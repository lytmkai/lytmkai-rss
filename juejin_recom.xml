<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Trae Coding - ã€ŒExcel ç§’å˜æµ·æŠ¥ã€â€”â€” ä¸Šä¼  CSVï¼Œä¸€å¥è¯ç”Ÿæˆå¯æ‰“å°ä¿¡æ¯å›¾ã€‚]]></title>    <link>https://juejin.cn/post/7574020645863653427</link>    <guid>https://juejin.cn/post/7574020645863653427</guid>    <pubDate>2025-11-19T07:58:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574020645863653427" data-draft-id="7574204970775298075" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Trae Coding - ã€ŒExcel ç§’å˜æµ·æŠ¥ã€â€”â€” ä¸Šä¼  CSVï¼Œä¸€å¥è¯ç”Ÿæˆå¯æ‰“å°ä¿¡æ¯å›¾ã€‚ "/> <meta itemprop="keywords" content="Trae,äººå·¥æ™ºèƒ½,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-19T07:58:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Trae Coding - ã€ŒExcel ç§’å˜æµ·æŠ¥ã€â€”â€” ä¸Šä¼  CSVï¼Œä¸€å¥è¯ç”Ÿæˆå¯æ‰“å°ä¿¡æ¯å›¾ã€‚ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:58:28.000Z" title="Wed Nov 19 2025 07:58:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Trae çš„ Coding èƒ½åŠ›å·²å®Œå…¨è¶…å‡ºæˆ‘ä»¬çš„å°è±¡</h2>
<p>Hello, å¾ˆé«˜å…´å’Œå¤§å®¶åˆ†äº«Trae Coding å®æˆ˜æ¡ˆä¾‹ï¼Œä½œä¸ºä¸€ä¸ªåº”ç”¨å¼€å‘å·¥ç¨‹å¸ˆï¼Œç›¸ä¿¡å¤§å®¶å·²ç»åœ¨Aiå¼ºå¤§èƒ½åŠ›çš„èƒŒååšäº†å¾ˆå¤šçš„å¿ƒç†å»ºè®¾äº†ï¼Œæœ‰çš„æ‹…å¿§è‡ªå·±çš„ä»ä¸šå‰æ™¯ï¼Œè€Œæœ‰çš„æŠ€æœ¯å‘çƒ§å‹æ­£åœ¨åˆ©ç”¨å¼ºå¤§çš„AI èƒ½åŠ›å®Œæˆä»–ä»¬çš„ Idea, ok, ä»Šå¤©æˆ‘ä»¬å€Ÿç€(<a href="https://juejin.cn/post/7571751304625815598" target="_blank" title="https://juejin.cn/post/7571751304625815598">ğŸš€TRAE SOLO å®æˆ˜èµ› | æ™ºå¯Coding ç åŠ›å…¨å¼€ğŸ”¥TRAE SOLO æ­£å¼ç‰ˆé‡ç£…ä¸Šçº¿ï¼ŒVibe Codi - æ˜é‡‘</a>) æœºä¼šï¼Œåšä¸€æ¬¡æ·±åº¦åº”ç”¨å¼€å‘å®è·µã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®èƒŒæ™¯</h2>
<p><strong>åˆ›æ„åï¼šã€ŒExcel ç§’å˜æµ·æŠ¥ã€â€”â€” ä¸Šä¼  CSVï¼Œä¸€å¥è¯ç”Ÿæˆå¯æ‰“å°ä¿¡æ¯å›¾</strong></p>
<ol>
<li>å‰ç«¯ä¸Šä¼  CSV â†’ è°ƒç”¨ AntV ChartAdvisor è‡ªåŠ¨æ¨èæœ€ä½³å›¾è¡¨ã€‚</li>
<li>ç”¨æˆ·è¾“å…¥ï¼šâ€œåšæˆå„¿ç«¥èŠ‚æµ·æŠ¥ï¼Œè¦å¡é€šã€è¦ç²‰è‰²â€ã€‚</li>
<li>AI è¿”å›ä¸€ä»½ Vega-Lite é…ç½® + æ’ç”»ç´ æ URLï¼Œå‰ç«¯ç›´æ¥æ¸²æŸ“æˆ 300dpi SVGï¼Œå¯ä¸€é”®ä¸‹è½½ã€‚<br/>
<strong>æŠ€æœ¯äº®ç‚¹</strong>ï¼šæŠŠã€Œæ•°æ®â†’å›¾è¡¨â†’ç¾åŒ–ã€ä¸‰æ­¥å‹ç¼©æˆä¸€å¥è‡ªç„¶è¯­è¨€ã€‚<br/>
<strong>æ•™è‚²æ„ä¹‰</strong>ï¼šè®©éæŠ€æœ¯è€å¸ˆä¹Ÿèƒ½ 30 ç§’åšå‡ºå®¶é•¿ä¼šæµ·æŠ¥ã€‚</li>
</ol>
<h2 data-id="heading-2">å®ç°è¿‡ç¨‹</h2>
<p>1ã€åˆ›å»ºé¡¹ç›®</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad734a672cc24c40b02d8dba9d06b78c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=KgXrU2%2Fv1OIkWtQBwXqk0i%2FtLQA%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€åœ¨builderç¯å¢ƒè¾“å…¥æˆ‘ä»¬çš„æç¤ºè¯ï¼Œè¿™ä¸ªæç¤ºè¯æ˜¯æˆ‘ç”¨è±†åŒ…ç”Ÿæˆçš„ï¼Œæ¯æ¬¡æ²¡åˆ›æ„çš„æ—¶å€™æˆ‘éƒ½è¿™æ ·åšï¼Œåœ¨è¿™ä¸ªæ—¶ä»£ï¼Œæˆ‘ä»¬ç”šè‡³è¿æƒ³æ³•éƒ½ä¸ç¼ºäº†ï¼Œç¼ºçš„æ˜¯è°è¶³å¤Ÿè®¤çœŸï¼Œè¶³å¤Ÿç†è§£ç”¨æˆ·ï¼Œè¶³å¤Ÿç†è§£äº§å“ï¼Œä»è€Œè®©Aiè¾…åŠ©æˆ‘ä»¬å®Œæˆä¸€æ¬¾é«˜è´¨é‡ã€é«˜å“è´¨çš„åº”ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/864e481143f9413d93c56d93306cc912~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=0n3Zdorv0yZmAcbX1tUv44RlQJs%3D" alt="image.png" loading="lazy"/></p>
<p>3ã€å®ŒæˆTraeæ¨èçš„æ­¥éª¤ï¼Œå¯ä»¥çœ‹åˆ°å½“Traeåˆ†æåï¼Œä¸å‡º1åˆ†é’Ÿå°±ç»™å‡ºäº†å®Œå¤‡çš„å¼€å‘è®¡åˆ’ï¼Œä½ åªéœ€è¦ååŠ©å®ƒä¸æ–­è°ƒæ•´è¿­ä»£å³å¯ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e883441e9bf04c0682022b357f26eabd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=bPjczCZNF9k8sH%2FNG2RQq2ZLEoY%3D" alt="image.png" loading="lazy"/></p>
<p>4ã€å½“ç„¶ä¹Ÿè¦æ³¨æ„ï¼Œæœ‰ä¸€äº›ç»ˆç«¯actionéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»runä¸€ä¸‹ï¼Œå¯ä¸è¦è¿è¿™ä¸ªæ‡’éƒ½å·å‘€ï¼ŒAiè®©æˆ‘ä»¬ä»å®¹ï¼Œè€Œä¸æ˜¯æ‡’æƒ°ï¼Œå› ä¸ºå¥½çš„äº§å“ä¸€å®šå‡ºè‡ªäºé«˜æ•ˆçš„å·¥ä½œæµç¨‹å’Œç»†è…»çš„å·¥ç¨‹å¸ˆæŠŠæ§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be72494e47b34271a45b79b5ace24ecc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=XeCiP38hJdfQ8pBbr%2BwhvZoZDVI%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸åˆ°5åˆ†é’Ÿåï¼Œæˆ‘ä»¬å¾—åˆ°äº†å¦‚ä¸‹æç¤ºï¼š</p>
<p>â€”â€”â€”â€”â€”â€”</p>
<p>å·²å®Œæˆã€ŒExcel ç§’å˜æµ·æŠ¥ã€åº”ç”¨å¼€å‘ï¼Œå®ç°äº†ä» CSV ä¸Šä¼ åˆ°å¯æ‰“å°ä¿¡æ¯å›¾ç”Ÿæˆçš„å®Œæ•´æµç¨‹ã€‚</p>
<p>æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ol>
<li>CSV ä¸Šä¼ ä¸è§£æ ï¼šæ”¯æŒä¸Šä¼  Excel å¯¼å‡ºçš„ CSV æ–‡ä»¶ï¼Œè‡ªåŠ¨è§£ææ•°æ®</li>
<li>AI å›¾è¡¨æ¨è ï¼šé›†æˆ AntV ChartAdvisorï¼Œæ ¹æ®æ•°æ®ç±»å‹è‡ªåŠ¨æ¨èæœ€ä½³å›¾è¡¨</li>
<li>è‡ªç„¶è¯­è¨€ç¾åŒ– ï¼šæ”¯æŒè¾“å…¥å¦‚ã€Œåšæˆå„¿ç«¥èŠ‚æµ·æŠ¥ï¼Œè¦å¡é€šã€è¦ç²‰è‰²ã€çš„æè¿°ï¼Œè‡ªåŠ¨è§£æä¸»é¢˜ã€é£æ ¼ã€é¢œè‰²</li>
<li>300dpi SVG è¾“å‡º ï¼šç”Ÿæˆç¬¦åˆå°åˆ·æ ‡å‡†çš„é«˜æ¸… SVG æ ¼å¼æµ·æŠ¥</li>
<li>æ’ç”»ç´ æåŒ¹é… ï¼šæ ¹æ®ä¸»é¢˜è‡ªåŠ¨åŒ¹é…ç›¸å…³æ’ç”»ç´ æ</li>
<li>ä¸€é”®ä¸‹è½½ ï¼šæ”¯æŒç›´æ¥ä¸‹è½½ç”Ÿæˆçš„æµ·æŠ¥æ–‡ä»¶
æŠ€æœ¯å®ç°ï¼š</li>
</ol>
<ul>
<li>å‰ç«¯æ¡†æ¶ï¼šReact + TypeScript + Vite</li>
<li>å›¾è¡¨å¼•æ“ï¼šVega-Lite</li>
<li>AI æ¨èï¼šAntV ChartAdvisor</li>
<li>æ–‡ä»¶è§£æï¼šPapaParse
ä½¿ç”¨æ–¹å¼ï¼š</li>
</ul>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000%2F" target="_blank" title="http://localhost:3000/" ref="nofollow noopener noreferrer">http://localhost:3000/</a></li>
<li>ä¸Šä¼  CSV æ–‡ä»¶ï¼ˆæä¾›äº† test-data.csv ç¤ºä¾‹ï¼‰</li>
<li>è¾“å…¥è‡ªç„¶è¯­è¨€æè¿°è°ƒæ•´æµ·æŠ¥é£æ ¼</li>
<li>ç‚¹å‡»ã€Œç”Ÿæˆæµ·æŠ¥ã€</li>
<li>ä¸‹è½½ 300dpi SVG æ ¼å¼æµ·æŠ¥
åº”ç”¨å·²æˆåŠŸå¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå¯ç«‹å³ä½¿ç”¨ï¼</li>
</ol>
<h2 data-id="heading-3">ç»“æœå±•ç¤º</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2417fad7cfe24b9a9ad515310fa0d492~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=rN7Jx1e4iqoYsu5vf7oGT3mbfpA%3D" alt="image.png" loading="lazy"/></p>
<p>æ²¡é”™ï¼Œä½ æ²¡æœ‰çœ¼èŠ±ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰ï¼Œæ˜¯ä¸ªç©ºç™½é¡µé¢ã€‚</p>
<p>æ­¤æ—¶ä¸€èˆ¬ä½ ä¼šæœ‰ä¿©ç§å¿ƒç†ï¼š1ã€è¿™ä»€ä¹ˆåƒåœ¾ï¼Œä»€ä¹ˆä¸œè¥¿éƒ½æ²¡æå‡ºæ¥ã€‚2ã€è¿™ä¸ªå³ä¾§root èŠ‚ç‚¹æ²¡æœ‰æŒ‚è½½æˆåŠŸï¼Œæ˜¯ä¸æ˜¯è¿™é‡Œæœ‰ä»€ä¹ˆé”™è¯¯å¹²æ‰°ï¼Œè®©Traeæ’æŸ¥è¿™é‡Œã€‚</p>
<p>æˆ‘é€‰æ‹©ç¬¬2ç§ï¼Œå› ä¸ºæˆ‘æ˜¯é¡¹ç›®çš„ä¸»å¯¼è€…ï¼Œå¤ªå¤šçš„æƒ…ç»ªåŒ–ï¼Œä¸åˆ©äºæˆ‘ä»¬é¡¹ç›®çš„å®Œæˆï¼Œè€Œä¸”äººéƒ½ä¼šçŠ¯é”™ï¼Œä¸ºä»€ä¹ˆAI ä¸è¢«å…è®¸å‘¢ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2be95d1ccb6457e9517a0a6c6ea2a50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=iu3%2FZeCc3niA6yRQtgG407W4%2BBI%3D" alt="image.png" loading="lazy"/></p>
<p>æ­¤åˆ»ï¼Œæˆ‘æŠŠTraeå½“æˆäº†æˆ‘çš„æ­æ¡£ï¼Œæˆ‘ä¼šè·Ÿå®ƒé«˜æ•ˆæ²Ÿé€šï¼Œç„¶åä¹Ÿç»™å®ƒæœ€å¤§çš„æœŸå¾…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/397aee10c9d846fca9e9b2e7e42ad523~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=qTdTlsM%2BU6GayeW8oEMQD%2BBzLqU%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘è§‰å¾—å¤ªå¤šçš„è¯æ— æ³•å»æè¿°å®ƒï¼Œåªéœ€è¦çœ‹ç»“æœå³å¯ï¼ŒTrae é©¬ä¸Šåšå‡ºäº†ç»“æ„åŒ–çš„æ’æŸ¥ï¼Œå¹¶èªæ˜çš„ä½¿ç”¨buildæ‰“åŒ…å‘½ä»¤æ¥æš´éœ²æ–‡ä»¶ç»“æ„æˆ–è€…ä»£ç å®‰æ’ä¸Šçš„é”™è¯¯ï¼Œè¿™ä¸€ç‚¹æˆ‘è®¤ä¸ºå·²ç»ä¸è¾“cursoräº†ï¼Œä¸ºä¼Ÿå¤§çš„å›½äº§è½¯ä»¶ç‚¹èµï¼ï¼ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8125a51a73ac4ece8ae84232901132cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=6NPYfPYsFwViYSpW2SXIT5s858U%3D" alt="image.png" loading="lazy"/></p>
<p>è¯´æ—¶è¿Ÿé‚£æ—¶å¿«ï¼Œæˆ‘ä»¬æ‰“å­—çš„åŠŸå¤«ï¼ŒTraeå·²ç»ä¿®å¤äº†é—®é¢˜ï¼Œå¹¶æ‰“å¼€äº†å†…ç½®æµè§ˆå™¨ï¼Œå±•ç¤ºäº†æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½ï¼Œæˆ‘åªèƒ½è¯´å®ƒæ²¡æœ‰è®©æˆ‘å¤±æœ›ï¼Œå…‰å‡­è¿™ä¸€ç‚¹å„¿ï¼Œæˆ‘å·²ç»å¯ä»¥å……ä¸€å¹´proä¼šå‘˜äº†ã€‚</p>
<p>æ—¢ç„¶ç•Œé¢å‡ºæ¥äº†ï¼Œé‚£æˆ‘ç»§ç»­è¿›è¡Œï¼Œé¡ºä¾¿æœŸå¾…ä¸€ä¸‹ï¼Œå‰©ä½™çš„æŒ‘æˆ˜ï¼ˆæ‘©æ‹³æ“¦æŒï¼‰ï¼Œè¿™é‡Œæˆ‘æœ‰ä¸€ä¸ªè§‚ç‚¹æƒ³åˆ†äº«ï¼Œç°ä»£å¤§å¤šæ•°å¼€å‘è€…çš„å†…å¿ƒéƒ½æ¯”è¾ƒæµ®èºï¼Œæ€»æƒ³ä¸€æ¬¡å®Œæˆï¼Œåˆå¿«åˆå¥½ï¼Œæ®Šä¸çŸ¥ï¼Œæ›²å¾„é€šå¹½å¤„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42dbdc1e43334f14a38d12f61f0c6fd3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=SiQ4ttQy2W%2FTYpj11ckpwoU%2FGfs%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘é€‰æ‹©äº†ä¸€ä»½æµ‹è¯•æ•°æ®ï¼Œå½“ç‚¹å‡»ç”Ÿæˆæµ·æŠ¥æ—¶ï¼Œå³ä¾§çš„æ¸²æŸ“å¡ä½äº†ï¼Œé‚£æˆ‘ä»¬å†æ¥çœ‹çœ‹è¿™ä¸ªè°ƒæ•´æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆè‡ªå·±å®¡æŸ¥ä¸€ä¸‹å…ƒç´ ï¼Œæˆ–è€…çœ‹çœ‹æ§åˆ¶å°ï¼Œæœ‰ä»€ä¹ˆæç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27f15b571856413284944d69acc4ce95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=6DyQYBeaOyXlyj9HzznWL4UtnMc%3D" alt="image.png" loading="lazy"/></p>
<p>çœ‹èµ·æ¥æŒºå¥½æ²¡æœ‰æŠ¥é”™ï¼Œé‚£å°±æ˜¯ä¸šåŠ¡é€»è¾‘å‡ºç°äº†é—®é¢˜ï¼Œçœ‹çœ‹Traeåˆæœ‰ä»€ä¹ˆæ ·çš„è¡¨ç°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3196b6b3bc6440b18a3be7ca3ca740ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=tT5j1uRdWSMVvdaDWd8K5bK9slw%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘æ˜¯è¿™æ ·ä¸å®ƒæ²Ÿé€šçš„ï¼Œå°½é‡è¡¨è¾¾ç®€æ´ï¼Œæä¾›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œæˆ‘é™„ä¸Šæˆªå›¾å’Œæ§åˆ¶æ‰“å°çš„æ•°æ®ã€‚</p>
<p>è¿›è¡Œäº†ä¸€æ®µæ—¶é—´çš„ä¿®å¤åï¼Œæ²¡æœ‰æŒ‰é¢„æœŸä¿®å¤....ï¼Œæˆ‘ä»¬è®©Traeè‡ªå·±æ·»åŠ æ’æŸ¥é€»è¾‘ï¼Œè¿™ä¸ªæ˜¯æˆ‘ç”¨aiå·¥å…·å®Œæˆé—®é¢˜ä¿®å¤çš„åˆ©å™¨ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f807d9b7ebb444d49cbef422ff338f6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=hTe5oDwILZjVHoVREjcFwBYnguk%3D" alt="image.png" loading="lazy"/></p>
<p>é‚£ä¹ˆç»“æœå¦‚ä¸‹ï¼Œå¤§å®¶ä¸€èµ·æ¥æ„Ÿå—ä¸‹æˆæœï¼Œåç»­ä¹Ÿç­‰å¾…ç€æˆ‘ä»¬å»è¿›ä¸€æ­¥è¿­ä»£æ›´å¥½çœ‹çš„uiã€æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79a5a950c15a436aab58fc717bb6efa0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVvbkdhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143908&amp;x-signature=VQwqVCwmQrRGfAQARBFqBdZYEaY%3D" alt="Excel ç§’å˜æµ·æŠ¥ - Google Chrome 2025-11-19 15-50-56.gif" loading="lazy"/></p>
<h2 data-id="heading-4">Trae çš„å¼€å‘æ€»ç»“</h2>
<h3 data-id="heading-5">é¡¹ç›®æ¦‚è¿°</h3>
<p>PosterEngineæ˜¯ä¸€æ¬¾å°†CSVæ•°æ®è½¬æ¢ä¸ºå¯è§†åŒ–æµ·æŠ¥çš„Webåº”ç”¨ï¼Œæ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬CSVè§£æã€æ™ºèƒ½å›¾è¡¨æ¨èï¼ˆåŸºäº@antv/chart-advisorï¼‰å’ŒVega-Liteå›¾è¡¨æ¸²æŸ“ã€‚</p>
<h3 data-id="heading-6">å…³é”®é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<ol>
<li>
<p>å›¾è¡¨æ¸²æŸ“å¤±è´¥ ï¼š</p>
<ul>
<li>æ ¹æœ¬åŸå› ï¼šå›¾è¡¨å®¹å™¨divä»…åœ¨ isRendered ä¸ºtrueæ—¶æ¸²æŸ“ï¼Œè€Œè¯¥çŠ¶æ€éœ€åœ¨å›¾è¡¨åµŒå…¥åè®¾ç½®ï¼Œå½¢æˆæ­»é”ã€‚</li>
<li>ä¿®å¤ï¼šä¿®æ”¹ç»„ä»¶ç»“æ„ï¼Œå§‹ç»ˆæ¸²æŸ“å¸¦refçš„å›¾è¡¨å®¹å™¨ï¼Œå¹¶åœ¨æœªæ¸²æŸ“å®Œæˆæ—¶æ˜¾ç¤ºåŠ è½½åŠ¨ç”»ã€‚</li>
</ul>
</li>
<li>
<p>ç‰¹æ®Šå­—ç¬¦å…¼å®¹æ€§ ï¼š</p>
<ul>
<li>æ ¹æœ¬åŸå› ï¼šCSVå­—æ®µ"æ»¡æ„åº¦%"åŒ…å«%å­—ç¬¦ï¼Œå¯èƒ½åœ¨Vega-Liteé…ç½®ä¸­å¯¼è‡´è§£æé—®é¢˜ã€‚</li>
<li>ä¿®å¤ï¼šåœ¨ enhanceChartConfig å‡½æ•°ä¸­å®ç°å­—æ®µåå‡€åŒ–ï¼Œå°†æ•°æ®å’Œç¼–ç é…ç½®ä¸­çš„%ç»Ÿä¸€æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ã€‚</li>
</ul>
</li>
<li>
<p>DOMæ—¶æœºé—®é¢˜ ï¼š</p>
<ul>
<li>æ ¹æœ¬åŸå› ï¼šuseEffectå¯èƒ½åœ¨DOMå®Œå…¨æ¸²æŸ“å‰æ‰§è¡Œï¼Œå¯¼è‡´æ— æ³•è·å–chartRefã€‚</li>
<li>ä¿®å¤ï¼šæ”¹ç”¨useLayoutEffectç¡®ä¿DOMå°±ç»ªåå†æ‰§è¡Œå›¾è¡¨åµŒå…¥é€»è¾‘ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-7">æŠ€æœ¯æ”¹è¿›</h3>
<ul>
<li>å¢å¼ºå›¾è¡¨åµŒå…¥çš„é”™è¯¯å¤„ç†ä¸æ—¥å¿—è¾“å‡º</li>
<li>æ·»åŠ æ•°æ®å­—æ®µç‰¹æ®Šå­—ç¬¦å‡€åŒ–æœºåˆ¶</li>
<li>ä¼˜åŒ–ç»„ä»¶æŒ‚è½½é€»è¾‘ï¼Œç¡®ä¿refå¯é è®¿é—®</li>
</ul>
<h3 data-id="heading-8">æœ€ç»ˆçŠ¶æ€</h3>
<ul>
<li>å¼€å‘æœåŠ¡å™¨è¿è¡Œåœ¨ <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3002%2F" target="_blank" title="http://localhost:3002/" ref="nofollow noopener noreferrer">http://localhost:3002/</a></li>
<li>å›¾è¡¨æ¸²æŸ“åŠŸèƒ½æ­£å¸¸</li>
<li>æ”¯æŒåŒ…å«ç‰¹æ®Šå­—ç¬¦çš„CSVæ•°æ®</li>
<li>å„ç»„ä»¶é›†æˆå·¥ä½œè‰¯å¥½</li>
</ul>
<p>æœ€åæ„Ÿè°¢å¤§å®¶è€å¿ƒçš„è§‚çœ‹ï¼Œæ”¯æŒä½œè€…çš„ç•™ä¸‹ä½ çš„èµèµå’Œè¯„è®ºï¼ä½œè€…ä¼šå‘å¸ƒæ›´å¤šä¼˜è´¨å†…å®¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go é‡è¯•æœºåˆ¶ç»ˆææŒ‡å—ï¼šåŸºäº go-retry æ‰“é€ å¯é å®¹é”™ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7574244766423007241</link>    <guid>https://juejin.cn/post/7574244766423007241</guid>    <pubDate>2025-11-19T08:09:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574244766423007241" data-draft-id="7574244766422990857" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go é‡è¯•æœºåˆ¶ç»ˆææŒ‡å—ï¼šåŸºäº go-retry æ‰“é€ å¯é å®¹é”™ç³»ç»Ÿ"/> <meta itemprop="keywords" content="Go,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-19T08:09:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹¼çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2418581314208279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go é‡è¯•æœºåˆ¶ç»ˆææŒ‡å—ï¼šåŸºäº go-retry æ‰“é€ å¯é å®¹é”™ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2418581314208279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹¼çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:09:53.000Z" title="Wed Nov 19 2025 08:09:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="srcery">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1b19;color:#fce8c3}.hljs-emphasis,.hljs-strong{color:#918175}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ff5c8f}.hljs-code,.hljs-selector-class{color:#68a8e4}.hljs-emphasis{font-style:italic}.hljs-attribute,.hljs-keyword,.hljs-section,.hljs-selector-tag,.hljs-variable{color:#ef2f27}.hljs-name,.hljs-title{color:#fbb829}.hljs-params,.hljs-type{color:#0aaeb3}.hljs-string{color:#98bc37}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#c07abe}.hljs-comment,.hljs-deletion,.hljs-meta{color:#918175}</style><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿã€API è°ƒç”¨ã€æ•°æ®åº“æ“ä½œç­‰åœºæ™¯ä¸­ï¼Œç½‘ç»œæŠ–åŠ¨ã€æœåŠ¡ä¸´æ—¶ä¸å¯ç”¨ç­‰é—®é¢˜æ—¶æœ‰å‘ç”Ÿã€‚é‡è¯•æœºåˆ¶ä½œä¸ºå®¹é”™è®¾è®¡çš„æ ¸å¿ƒæ‰‹æ®µï¼Œèƒ½æœ‰æ•ˆæå‡ç³»ç»Ÿç¨³å®šæ€§â€”â€”ä½†ä¸åˆç†çš„é‡è¯•ç­–ç•¥ï¼ˆå¦‚æ— é™åˆ¶é‡è¯•ã€å›ºå®šé—´éš”é‡è¯•ï¼‰å¯èƒ½å¯¼è‡´é›ªå´©æ•ˆåº”æˆ–èµ„æºè€—å°½ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æ <code>sethvargo/go-retry</code> è¿™ä¸ªè½»é‡ä¸”å¼ºå¤§çš„ Go é‡è¯•åº“ï¼Œå¸¦ä½ ä»åŸç†åˆ°å®è·µï¼Œæ„å»ºçµæ´»ã€å®‰å…¨ã€é«˜æ•ˆçš„é‡è¯•é€»è¾‘ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹© go-retryï¼Ÿ</h2>
<p>Go æ ‡å‡†åº“å¹¶æœªæä¾›é‡è¯•ç›¸å…³çš„åŸç”Ÿæ”¯æŒï¼Œæ‰‹åŠ¨å®ç°é‡è¯•é€»è¾‘å¾€å¾€é¢ä¸´è¯¸å¤šé—®é¢˜ï¼š</p>
<ul>
<li>é‡å¤ç¼–ç ï¼šæ¯æ¬¡éœ€è¦é‡è¯•æ—¶éƒ½è¦å†™å¾ªç¯ã€ç¡çœ ã€é€€å‡ºæ¡ä»¶åˆ¤æ–­ï¼›</li>
<li>ç­–ç•¥åƒµåŒ–ï¼šéš¾ä»¥çµæ´»åˆ‡æ¢å›ºå®šé—´éš”ã€æŒ‡æ•°é€€é¿ç­‰é‡è¯•ç­–ç•¥ï¼›</li>
<li>é”™è¯¯å¤„ç†æ··ä¹±ï¼šæ— æ³•æ¸…æ™°åŒºåˆ†â€œå¯é‡è¯•é”™è¯¯â€å’Œâ€œä¸å¯é‡è¯•é”™è¯¯â€ï¼›</li>
<li>èµ„æºæ³„æ¼ï¼šå¿˜è®°ç»ˆæ­¢é‡è¯•å¯¼è‡´æ— é™å¾ªç¯ï¼Œæˆ–è¶…æ—¶æ§åˆ¶ä¸å½“ã€‚</li>
</ul>
<p>è€Œ <code>sethvargo/go-retry</code> å®Œç¾è§£å†³äº†è¿™äº›ç—›ç‚¹ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>è½»é‡æ— ä¾èµ–</strong>ï¼šçº¯ Go å®ç°ï¼Œä»£ç é‡å°‘ï¼Œæ— é¢å¤–ä¾èµ–ï¼Œæ¥å…¥æˆæœ¬æä½ï¼›</li>
<li><strong>ä¸°å¯Œçš„é‡è¯•ç­–ç•¥</strong>ï¼šå†…ç½®å›ºå®šé—´éš”ã€æŒ‡æ•°é€€é¿ã€æŠ–åŠ¨é€€é¿ç­‰å¸¸ç”¨ç­–ç•¥ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•ï¼›</li>
<li><strong>çµæ´»çš„ç»ˆæ­¢æ¡ä»¶</strong>ï¼šæ”¯æŒæœ€å¤§é‡è¯•æ¬¡æ•°ã€è¶…æ—¶æ—¶é—´ã€è‡ªå®šä¹‰é€€å‡ºåˆ¤æ–­ç­‰å¤šé‡ç»ˆæ­¢è§„åˆ™ï¼›</li>
<li><strong>ä¼˜é›…çš„é”™è¯¯å¤„ç†</strong>ï¼šæ¸…æ™°åŒºåˆ†é‡è¯•é”™è¯¯å’Œæœ€ç»ˆå¤±è´¥ï¼Œæ”¯æŒé”™è¯¯è¿‡æ»¤ï¼ˆä»…é‡è¯•ç‰¹å®šé”™è¯¯ï¼‰ï¼›</li>
<li><strong>ä¸Šä¸‹æ–‡æ”¯æŒ</strong>ï¼šæ·±åº¦é›†æˆ <code>context.Context</code>ï¼Œæ”¯æŒå–æ¶ˆä¿¡å·å’Œè¶…æ—¶æ§åˆ¶ï¼Œç¬¦åˆ Go æœ€ä½³å®è·µï¼›</li>
<li><strong>å¹¶å‘å®‰å…¨</strong>ï¼šæ ¸å¿ƒç»„ä»¶å¯å®‰å…¨åœ°åœ¨å¤šä¸ª goroutine ä¸­å¤ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€å¿«é€Ÿå…¥é—¨ï¼š5 åˆ†é’Ÿå®ç°åŸºç¡€é‡è¯•</h2>
<h3 data-id="heading-2">2.1 å®‰è£…ä¾èµ–</h3>
<p>é¦–å…ˆé€šè¿‡ <code>go get</code> å®‰è£…åº“ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">go get github.com/sethvargo/go-retry@latest
</code></pre>
<h3 data-id="heading-3">2.2 åŸºç¡€ç¤ºä¾‹ï¼šé‡è¯• HTTP è¯·æ±‚</h3>
<p>ä¸‹é¢ä»¥â€œé‡è¯•è°ƒç”¨ä¸€ä¸ªä¸ç¨³å®šçš„ APIâ€ä¸ºä¾‹ï¼Œå±•ç¤ºæœ€åŸºç¡€çš„é‡è¯•é€»è¾‘ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"net/http"</span>
	<span class="hljs-string">"time"</span>

	retry <span class="hljs-string">"github.com/sethvargo/go-retry"</span>
)

<span class="hljs-comment">// æ¨¡æ‹Ÿä¸ç¨³å®šçš„ API è°ƒç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">callUnstableAPI</span><span class="hljs-params">()</span></span> <span class="hljs-type">error</span> {
	resp, err := http.Get(<span class="hljs-string">"https://api.example.com/unstable"</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Println(<span class="hljs-string">"API è°ƒç”¨å¤±è´¥:"</span>, err)
		<span class="hljs-keyword">return</span> err <span class="hljs-comment">// ç½‘ç»œé”™è¯¯ï¼Œå¯é‡è¯•</span>
	}
	<span class="hljs-keyword">defer</span> resp.Body.Close()

	<span class="hljs-keyword">if</span> resp.StatusCode != http.StatusOK {
		fmt.Printf(<span class="hljs-string">"API è¿”å›é 200 çŠ¶æ€ç : %d\n"</span>, resp.StatusCode)
		<span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"status code: %d"</span>, resp.StatusCode) <span class="hljs-comment">// é 200 å¯é‡è¯•</span>
	}

	fmt.Println(<span class="hljs-string">"API è°ƒç”¨æˆåŠŸ!"</span>)
	<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	<span class="hljs-comment">// 1. åˆ›å»ºä¸Šä¸‹æ–‡ï¼ˆæ”¯æŒè¶…æ—¶/å–æ¶ˆï¼‰</span>
	ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">30</span>*time.Second)
	<span class="hljs-keyword">defer</span> cancel()

	<span class="hljs-comment">// 2. å®šä¹‰é‡è¯•ç­–ç•¥ï¼šå›ºå®šé—´éš” 2 ç§’ï¼Œæœ€å¤šé‡è¯• 5 æ¬¡</span>
	<span class="hljs-comment">// ConstantBackoff(é—´éš”) + LimitMaxRetries(æœ€å¤§æ¬¡æ•°)</span>
	strategy := retry.WithMaxRetries(<span class="hljs-number">5</span>, retry.ConstantBackoff(<span class="hljs-number">2</span>*time.Second))

	<span class="hljs-comment">// 3. æ‰§è¡Œé‡è¯•é€»è¾‘</span>
	err := retry.Do(ctx, strategy, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context)</span></span> <span class="hljs-type">error</span> {
		err := callUnstableAPI()
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			<span class="hljs-comment">// æ ‡è®°é”™è¯¯ä¸ºâ€œå¯é‡è¯•â€ï¼Œè§¦å‘ä¸‹ä¸€æ¬¡é‡è¯•</span>
			<span class="hljs-keyword">return</span> retry.RetryableError(err)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> <span class="hljs-comment">// æˆåŠŸåˆ™ç»ˆæ­¢é‡è¯•</span>
	})

	<span class="hljs-comment">// 4. å¤„ç†æœ€ç»ˆç»“æœ</span>
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"æ‰€æœ‰é‡è¯•å¤±è´¥: %v\n"</span>, err)
		<span class="hljs-keyword">return</span>
	}
	fmt.Println(<span class="hljs-string">"é‡è¯•æµç¨‹æ­£å¸¸ç»“æŸ"</span>)
}
</code></pre>
<h3 data-id="heading-4">æ ¸å¿ƒæ¦‚å¿µè§£æ</h3>
<ol>
<li><strong>Strategyï¼ˆé‡è¯•ç­–ç•¥ï¼‰</strong>ï¼šå®šä¹‰â€œä½•æ—¶é‡è¯•â€ï¼Œå¦‚å›ºå®šé—´éš”ã€æŒ‡æ•°é€€é¿ç­‰ï¼Œæ˜¯ <code>go-retry</code> çš„æ ¸å¿ƒæ¥å£ï¼›</li>
<li><strong>RetryableError</strong>ï¼šåŒ…è£…é”™è¯¯ï¼Œæ ‡è®°è¯¥é”™è¯¯æ˜¯â€œå¯é‡è¯•â€çš„ï¼Œè‹¥è¿”å›æ™®é€šé”™è¯¯åˆ™ç›´æ¥ç»ˆæ­¢é‡è¯•ï¼›</li>
<li><strong>Context</strong>ï¼šä¼ é€’è¶…æ—¶ã€å–æ¶ˆä¿¡å·ï¼Œç¡®ä¿é‡è¯•é€»è¾‘èƒ½å“åº”å¤–éƒ¨æ§åˆ¶ï¼ˆå¦‚ç”¨æˆ·ä¸­æ–­ã€æœåŠ¡å…³é—­ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-5">ä¸‰ã€è¿›é˜¶ç”¨æ³•ï¼šæ‰“é€ ç”Ÿäº§çº§é‡è¯•é€»è¾‘</h2>
<h3 data-id="heading-6">3.1 é€‰æ‹©åˆé€‚çš„é‡è¯•ç­–ç•¥</h3>
<p><code>go-retry</code> å†…ç½®äº† 4 ç§å¸¸ç”¨ç­–ç•¥ï¼Œå¯æ ¹æ®åœºæ™¯ç»„åˆä½¿ç”¨ï¼š</p>
<h4 data-id="heading-7">1. å›ºå®šé—´éš”é‡è¯•ï¼ˆConstantBackoffï¼‰</h4>
<p>é€‚ç”¨äºæœåŠ¡æ¢å¤æ—¶é—´å¯é¢„æµ‹çš„åœºæ™¯ï¼ˆå¦‚æ•°æ®åº“é‡å¯ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ¯æ¬¡é‡è¯•é—´éš” 1 ç§’ï¼Œæœ€å¤šé‡è¯• 3 æ¬¡</span>
strategy := retry.WithMaxRetries(<span class="hljs-number">3</span>, retry.ConstantBackoff(<span class="hljs-number">1</span>*time.Second))
</code></pre>
<h4 data-id="heading-8">2. æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆExponentialBackoffï¼‰</h4>
<p>é€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯ï¼Œé¿å…é‡è¯•é£æš´ï¼ˆé—´éš”éšé‡è¯•æ¬¡æ•°æŒ‡æ•°å¢é•¿ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åˆå§‹é—´éš” 1 ç§’ï¼Œæœ€å¤§é—´éš” 10 ç§’ï¼Œæœ€å¤šé‡è¯• 5 æ¬¡</span>
<span class="hljs-comment">// é—´éš”ï¼š1s â†’ 2s â†’ 4s â†’ 8s â†’ 10sï¼ˆåç»­ä¿æŒ 10sï¼‰</span>
strategy := retry.WithMaxRetries(<span class="hljs-number">5</span>, retry.ExponentialBackoff(<span class="hljs-number">1</span>*time.Second, <span class="hljs-number">10</span>*time.Second))
</code></pre>
<h4 data-id="heading-9">3. æŠ–åŠ¨é€€é¿ï¼ˆJitterï¼‰</h4>
<p>åœ¨æŒ‡æ•°é€€é¿åŸºç¡€ä¸Šæ·»åŠ éšæœºæŠ–åŠ¨ï¼Œè¿›ä¸€æ­¥åˆ†æ•£é‡è¯•è¯·æ±‚ï¼Œé¿å…â€œå³°å€¼åŒæ—¶é‡è¯•â€ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æŒ‡æ•°é€€é¿ + æŠ–åŠ¨ï¼Œåˆå§‹ 1sï¼Œæœ€å¤§ 10sï¼Œæœ€å¤š 5 æ¬¡</span>
strategy := retry.WithMaxRetries(<span class="hljs-number">5</span>, retry.Jitter(retry.ExponentialBackoff(<span class="hljs-number">1</span>*time.Second, <span class="hljs-number">10</span>*time.Second), <span class="hljs-number">0.5</span>))
<span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯æŠ–åŠ¨å› å­ï¼ˆ0-1ï¼‰ï¼Œå› å­è¶Šå¤§ï¼Œéšæœºæ³¢åŠ¨è¶Šæ˜æ˜¾</span>
</code></pre>
<h4 data-id="heading-10">4. çº¿æ€§é€€é¿ï¼ˆLinearBackoffï¼‰</h4>
<p>é—´éš”éšé‡è¯•æ¬¡æ•°çº¿æ€§å¢é•¿ï¼ˆå¦‚ 1s â†’ 2s â†’ 3sï¼‰ï¼Œé€‚ç”¨äºæœåŠ¡æ¢å¤æ—¶é—´ç¼“æ…¢å¢é•¿çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åˆå§‹é—´éš” 1sï¼Œæ¯æ¬¡å¢åŠ  1sï¼Œæœ€å¤§é—´éš” 5sï¼Œæœ€å¤šé‡è¯• 4 æ¬¡</span>
strategy := retry.WithMaxRetries(<span class="hljs-number">4</span>, retry.LinearBackoff(<span class="hljs-number">1</span>*time.Second, <span class="hljs-number">1</span>*time.Second, <span class="hljs-number">5</span>*time.Second))
</code></pre>
<h3 data-id="heading-11">3.2 è¿‡æ»¤å¯é‡è¯•é”™è¯¯</h3>
<p>å®é™…åœºæ™¯ä¸­ï¼Œå¹¶éæ‰€æœ‰é”™è¯¯éƒ½éœ€è¦é‡è¯•ï¼ˆå¦‚å‚æ•°é”™è¯¯ã€404 ç­‰ï¼‰ï¼Œå¯é€šè¿‡ <code>retry.If</code> è¿‡æ»¤ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">30</span>*time.Second)
	<span class="hljs-keyword">defer</span> cancel()

	<span class="hljs-comment">// ä»…é‡è¯•â€œç½‘ç»œé”™è¯¯â€å’Œâ€œ5xx çŠ¶æ€ç é”™è¯¯â€</span>
	strategy := retry.WithMaxRetries(<span class="hljs-number">5</span>, retry.ConstantBackoff(<span class="hljs-number">2</span>*time.Second))

	err := retry.Do(ctx, strategy, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context)</span></span> <span class="hljs-type">error</span> {
		err := callUnstableAPI()
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			<span class="hljs-comment">// è‡ªå®šä¹‰è¿‡æ»¤é€»è¾‘ï¼šåˆ¤æ–­é”™è¯¯ç±»å‹æ˜¯å¦å¯é‡è¯•</span>
			<span class="hljs-keyword">if</span> isRetryableError(err) {
				<span class="hljs-keyword">return</span> retry.RetryableError(err)
			}
			<span class="hljs-keyword">return</span> err <span class="hljs-comment">// ä¸å¯é‡è¯•é”™è¯¯ï¼Œç›´æ¥ç»ˆæ­¢</span>
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
	})

	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥: %v\n"</span>, err)
	}
}

<span class="hljs-comment">// å®šä¹‰å¯é‡è¯•é”™è¯¯çš„åˆ¤æ–­é€»è¾‘</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isRetryableError</span><span class="hljs-params">(err <span class="hljs-type">error</span>)</span></span> <span class="hljs-type">bool</span> {
	<span class="hljs-comment">// ç½‘ç»œé”™è¯¯ï¼ˆå¦‚è¿æ¥è¶…æ—¶ã€æ‹’ç»è¿æ¥ï¼‰</span>
	<span class="hljs-keyword">if</span> _, ok := err.(*http.Error); ok {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
	}
	<span class="hljs-comment">// 5xx çŠ¶æ€ç é”™è¯¯</span>
	<span class="hljs-keyword">if</span> err.Error()[:<span class="hljs-number">3</span>] == <span class="hljs-string">"500"</span> || err.Error()[:<span class="hljs-number">3</span>] == <span class="hljs-string">"503"</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
	}
	<span class="hljs-comment">// å…¶ä»–é”™è¯¯ï¼ˆå¦‚ 400ã€404ï¼‰ä¸å¯é‡è¯•</span>
	<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<h3 data-id="heading-12">3.3 ç»“åˆè¶…æ—¶å’Œå–æ¶ˆä¿¡å·</h3>
<p>é€šè¿‡ <code>context</code> å®ç°å¤šé‡æ§åˆ¶ï¼šè¶…æ—¶æ—¶é—´ï¼ˆæ•´ä½“é‡è¯•æµç¨‹çš„æœ€å¤§è€—æ—¶ï¼‰ã€æ‰‹åŠ¨å–æ¶ˆï¼ˆå¦‚ç”¨æˆ·ä¸­æ–­ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	<span class="hljs-comment">// 1. è®¾ç½®æ•´ä½“è¶…æ—¶ 15 ç§’</span>
	ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">15</span>*time.Second)
	<span class="hljs-keyword">defer</span> cancel()

	<span class="hljs-comment">// 2. å¯åŠ¨ä¸€ä¸ª goroutineï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ‰‹åŠ¨å–æ¶ˆï¼ˆ5 ç§’åï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		time.Sleep(<span class="hljs-number">5</span> * time.Second)
		fmt.Println(<span class="hljs-string">"ç”¨æˆ·æ‰‹åŠ¨å–æ¶ˆé‡è¯•"</span>)
		cancel()
	}()

	<span class="hljs-comment">// 3. é‡è¯•ç­–ç•¥ï¼šæŒ‡æ•°é€€é¿ï¼Œæœ€å¤š 10 æ¬¡ï¼ˆä½†ä¼šè¢«è¶…æ—¶/å–æ¶ˆä¸­æ–­ï¼‰</span>
	strategy := retry.WithMaxRetries(<span class="hljs-number">10</span>, retry.ExponentialBackoff(<span class="hljs-number">1</span>*time.Second, <span class="hljs-number">5</span>*time.Second))

	err := retry.Do(ctx, strategy, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context)</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-comment">// æ£€æŸ¥ä¸Šä¸‹æ–‡æ˜¯å¦å·²å–æ¶ˆ/è¶…æ—¶</span>
		<span class="hljs-keyword">select</span> {
		<span class="hljs-keyword">case</span> &lt;-ctx.Done():
			<span class="hljs-keyword">return</span> ctx.Err() <span class="hljs-comment">// ä¼ é€’å–æ¶ˆä¿¡å·</span>
		<span class="hljs-keyword">default</span>:
		}

		<span class="hljs-keyword">return</span> retry.RetryableError(callUnstableAPI())
	})

	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"é‡è¯•ç»ˆæ­¢: %v\n"</span>, err) <span class="hljs-comment">// å¯èƒ½æ˜¯è¶…æ—¶æˆ–å–æ¶ˆé”™è¯¯</span>
	}
}
</code></pre>
<h3 data-id="heading-13">3.4 è‡ªå®šä¹‰é‡è¯•ç­–ç•¥</h3>
<p>å¦‚æœå†…ç½®ç­–ç•¥ä¸æ»¡è¶³éœ€æ±‚ï¼Œå¯é€šè¿‡å®ç° <code>retry.Strategy</code> æ¥å£è‡ªå®šä¹‰ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// è‡ªå®šä¹‰ç­–ç•¥ï¼šå‰ 3 æ¬¡é—´éš” 1 ç§’ï¼Œä¹‹åé—´éš” 3 ç§’</span>
<span class="hljs-keyword">type</span> CustomStrategy <span class="hljs-keyword">struct</span> {
	maxRetries <span class="hljs-type">int</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *CustomStrategy)</span></span> NextRetry(ctx context.Context, attempt <span class="hljs-type">int</span>) (time.Duration, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// attempt æ˜¯å·²é‡è¯•æ¬¡æ•°ï¼ˆä» 0 å¼€å§‹ï¼‰</span>
	<span class="hljs-keyword">if</span> attempt &gt;= s.maxRetries {
		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, retry.ErrMaxRetriesExceeded <span class="hljs-comment">// è¾¾åˆ°æœ€å¤§æ¬¡æ•°ï¼Œç»ˆæ­¢</span>
	}

	<span class="hljs-comment">// å‰ 3 æ¬¡é—´éš” 1sï¼Œä¹‹å 3s</span>
	<span class="hljs-keyword">if</span> attempt &lt; <span class="hljs-number">3</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span> * time.Second, <span class="hljs-literal">nil</span>
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">3</span> * time.Second, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ç­–ç•¥</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	ctx := context.Background()
	strategy := &amp;CustomStrategy{maxRetries: <span class="hljs-number">5</span>}

	err := retry.Do(ctx, strategy, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context)</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-keyword">return</span> retry.RetryableError(callUnstableAPI())
	})
}
</code></pre>
<h3 data-id="heading-14">3.5 é‡è¯•è¿‡ç¨‹ç›‘æ§</h3>
<p>é€šè¿‡ <code>retry.WithCallback</code> è®°å½•é‡è¯•è¿‡ç¨‹ï¼ˆå¦‚æ—¥å¿—ã€æŒ‡æ ‡ä¸ŠæŠ¥ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	ctx := context.Background()

	<span class="hljs-comment">// æ·»åŠ å›è°ƒå‡½æ•°ï¼Œç›‘æ§æ¯æ¬¡é‡è¯•</span>
	strategy := retry.WithCallback(
		retry.WithMaxRetries(<span class="hljs-number">5</span>, retry.ConstantBackoff(<span class="hljs-number">2</span>*time.Second)),
		<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context, attempt <span class="hljs-type">int</span>, err <span class="hljs-type">error</span>, next time.Duration)</span></span> {
			fmt.Printf(<span class="hljs-string">"ç¬¬ %d æ¬¡é‡è¯•å¤±è´¥: %vï¼Œä¸‹æ¬¡é‡è¯•é—´éš” %v\n"</span>, attempt+<span class="hljs-number">1</span>, err, next)
			<span class="hljs-comment">// æ­¤å¤„å¯æ·»åŠ æŒ‡æ ‡ä¸ŠæŠ¥ï¼ˆå¦‚ Prometheus è®¡æ•°å™¨ï¼‰</span>
			<span class="hljs-comment">// retryTotal.WithLabelValues("api").Inc()</span>
		},
	)

	err := retry.Do(ctx, strategy, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context)</span></span> <span class="hljs-type">error</span> {
		<span class="hljs-keyword">return</span> retry.RetryableError(callUnstableAPI())
	})
}
</code></pre>
<h2 data-id="heading-15">å››ã€æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—</h2>
<h3 data-id="heading-16">4.1 æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>æ˜ç¡®å¯é‡è¯•åœºæ™¯</strong>ï¼šä»…å¯¹â€œæš‚æ—¶æ€§é”™è¯¯â€é‡è¯•ï¼ˆå¦‚ç½‘ç»œæŠ–åŠ¨ã€5xx æœåŠ¡é”™è¯¯ã€æ•°æ®åº“é”ç­‰å¾…ï¼‰ï¼Œé¿å…å¯¹â€œæ°¸ä¹…æ€§é”™è¯¯â€ï¼ˆå¦‚å‚æ•°é”™è¯¯ã€404ï¼‰é‡è¯•ï¼›</li>
<li><strong>æ§åˆ¶é‡è¯•å¼ºåº¦</strong>ï¼šç»“åˆ <code>WithMaxRetries</code> å’Œ <code>context.WithTimeout</code>ï¼Œé¿å…æ— é™é‡è¯•å¯¼è‡´èµ„æºè€—å°½ï¼›</li>
<li><strong>ä½¿ç”¨é€€é¿+æŠ–åŠ¨</strong>ï¼šé«˜å¹¶å‘åœºæ™¯ä¼˜å…ˆé€‰æ‹©â€œæŒ‡æ•°é€€é¿+æŠ–åŠ¨â€ï¼Œå‡å°‘é‡è¯•é£æš´å¯¹ä¸‹æ¸¸æœåŠ¡çš„å‹åŠ›ï¼›</li>
<li><strong>é‡è¯•å‰æ£€æŸ¥ä¸Šä¸‹æ–‡</strong>ï¼šåœ¨é‡è¯•å‡½æ•°ä¸­ä¼˜å…ˆæ£€æŸ¥ <code>ctx.Done()</code>ï¼Œç¡®ä¿èƒ½åŠæ—¶å“åº”å–æ¶ˆ/è¶…æ—¶ä¿¡å·ï¼›</li>
<li><strong>ä¸è¦é‡è¯•å¹‚ç­‰æ“ä½œ</strong>ï¼šè‹¥æ“ä½œéå¹‚ç­‰ï¼ˆå¦‚é‡å¤åˆ›å»ºè®¢å•ï¼‰ï¼Œéœ€å…ˆä¿è¯æ¥å£å¹‚ç­‰æ€§ï¼Œæˆ–é€šè¿‡å”¯ä¸€æ ‡è¯†é¿å…é‡å¤æ‰§è¡Œï¼›</li>
<li><strong>è®°å½•é‡è¯•æ—¥å¿—</strong>ï¼šé€šè¿‡ <code>WithCallback</code> è®°å½•é‡è¯•æ¬¡æ•°ã€é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ã€‚</li>
</ol>
<h3 data-id="heading-17">4.2 å¸¸è§å‘ç‚¹</h3>
<ol>
<li><strong>å¿˜è®°æ ‡è®° RetryableError</strong>ï¼šè‹¥è¿”å›æ™®é€šé”™è¯¯ï¼Œé‡è¯•ä¼šç›´æ¥ç»ˆæ­¢ï¼Œéœ€ç¡®ä¿å¯é‡è¯•é”™è¯¯è¢« <code>retry.RetryableError</code> åŒ…è£…ï¼›</li>
<li><strong>å¿½ç•¥ä¸Šä¸‹æ–‡å–æ¶ˆ</strong>ï¼šæœªåœ¨é‡è¯•å‡½æ•°ä¸­æ£€æŸ¥ <code>ctx.Done()</code>ï¼Œå¯èƒ½å¯¼è‡´é‡è¯•é€»è¾‘æ— æ³•åŠæ—¶ç»ˆæ­¢ï¼›</li>
<li><strong>é‡è¯•ç­–ç•¥è¿‡äºæ¿€è¿›</strong>ï¼šå›ºå®šé—´éš”+é«˜é‡è¯•æ¬¡æ•°ï¼Œå¯èƒ½åŠ å‰§ä¸‹æ¸¸æœåŠ¡å‹åŠ›ï¼Œå¼•å‘é›ªå´©ï¼›</li>
<li><strong>æœªå¤„ç†é‡è¯•ä¸­çš„èµ„æºæ³„æ¼</strong>ï¼šå¦‚é‡è¯• HTTP è¯·æ±‚æ—¶æœªå…³é—­ <code>resp.Body</code>ï¼Œéœ€åœ¨ <code>defer</code> ä¸­ç¡®ä¿èµ„æºé‡Šæ”¾ï¼›</li>
<li><strong>æ··æ·†â€œé‡è¯•æ¬¡æ•°â€å’Œâ€œå°è¯•æ¬¡æ•°â€</strong>ï¼š<code>WithMaxRetries(5)</code> è¡¨ç¤ºâ€œæœ€å¤šé‡è¯• 5 æ¬¡â€ï¼Œå³â€œæ€»å…±å°è¯• 6 æ¬¡â€ï¼ˆåˆå§‹ 1 æ¬¡ + é‡è¯• 5 æ¬¡ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-18">äº”ã€æ€»ç»“</h2>
<p><code>sethvargo/go-retry</code> ä»¥å…¶è½»é‡ã€çµæ´»ã€è´´åˆ Go ç”Ÿæ€çš„è®¾è®¡ï¼Œæˆä¸º Go è¯­è¨€é‡è¯•æœºåˆ¶çš„é¦–é€‰åº“ã€‚é€šè¿‡æœ¬æ–‡çš„è®²è§£ï¼Œä½ å¯ä»¥æŒæ¡ï¼š</p>
<ul>
<li>åŸºç¡€é‡è¯•é€»è¾‘çš„å¿«é€Ÿå®ç°ï¼›</li>
<li>å¤šç§é‡è¯•ç­–ç•¥çš„é€‰å‹ä¸ç»„åˆï¼›</li>
<li>è¿‡æ»¤å¯é‡è¯•é”™è¯¯ã€ç›‘æ§é‡è¯•è¿‡ç¨‹ã€å“åº”å–æ¶ˆä¿¡å·ç­‰è¿›é˜¶ç”¨æ³•ï¼›</li>
<li>ç”Ÿäº§ç¯å¢ƒä¸­çš„æœ€ä½³å®è·µä¸é¿å‘è¦ç‚¹ã€‚</li>
</ul>
<p>é‡è¯•æœºåˆ¶æ˜¯ç³»ç»Ÿå®¹é”™èƒ½åŠ›çš„åŸºç¡€ï¼Œä½†å®ƒä¸æ˜¯é“¶å¼¹â€”â€”éœ€ç»“åˆä¸šåŠ¡åœºæ™¯åˆç†è®¾è®¡ç­–ç•¥ï¼ŒåŒæ—¶æ­é…ç†”æ–­ã€é™æµã€é™çº§ç­‰æœºåˆ¶ï¼Œæ‰èƒ½æ„å»ºçœŸæ­£é«˜å¯ç”¨çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚å¦‚æœä½ æ­£åœ¨å¼€å‘éœ€è¦å®¹é”™çš„ Go åº”ç”¨ï¼Œä¸å¦¨è¯•è¯• <code>go-retry</code>ï¼Œå®ƒä¼šè®©é‡è¯•é€»è¾‘çš„ç¼–å†™å˜å¾—ç®€æ´è€Œå¯é ã€‚</p>
<h2 data-id="heading-19">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsethvargo%2Fgo-retry" target="_blank" title="https://github.com/sethvargo/go-retry" ref="nofollow noopener noreferrer">go-retry å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpkg.go.dev%2Fcontext" target="_blank" title="https://pkg.go.dev/context" ref="nofollow noopener noreferrer">Go å®˜æ–¹ Context æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmartinfowler.com%2Farticles%2Fpatterns-of-distributed-systems%2F" target="_blank" title="https://martinfowler.com/articles/patterns-of-distributed-systems/" ref="nofollow noopener noreferrer">åˆ†å¸ƒå¼ç³»ç»Ÿå®¹é”™è®¾è®¡åŸåˆ™</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Doris AI èƒ½åŠ›æ­ç§˜ï¼ˆä¸‰ï¼‰ï¼šAI_AGG ä¸ EMBED å‡½æ•°æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7574045294611726371</link>    <guid>https://juejin.cn/post/7574045294611726371</guid>    <pubDate>2025-11-19T08:10:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574045294611726371" data-draft-id="7573995798604185615" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Doris AI èƒ½åŠ›æ­ç§˜ï¼ˆä¸‰ï¼‰ï¼šAI_AGG ä¸ EMBED å‡½æ•°æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="Apache,æ•°æ®åº“,åç«¯"/> <meta itemprop="datePublished" content="2025-11-19T08:10:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Doris AI èƒ½åŠ›æ­ç§˜ï¼ˆä¸‰ï¼‰ï¼šAI_AGG ä¸ EMBED å‡½æ•°æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:10:22.000Z" title="Wed Nov 19 2025 08:10:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åˆæ­¥æ¢ç´¢äº† AI å‡½æ•°çš„å¯èƒ½æ€§ä¹‹åï¼Œæœ¬æ¬¡æˆ‘ä»¬å°†ç›®å…‰æŠ•å‘ä¸¤ä¸ªæ›´ä¸ºæ ¸å¿ƒçš„å‡½æ•°ï¼š<code>AI_AGG</code> å’Œ <code>EMBED</code>ã€‚æˆ‘ä»¬å°†æ·±å…¥è§£æè¿™ä¸¤ä¸ªå‡½æ•°çš„è®¾è®¡ç†å¿µã€å®ç°åŸç†åŠå…¶åœ¨ä¸šåŠ¡åœºæ™¯ä¸­çš„åº”ç”¨ï¼Œå±•ç¤º Apache Doris å¦‚ä½•é€šè¿‡åŸç”Ÿçš„å‡½æ•°è®¾è®¡ï¼Œå°†æ–‡æœ¬èšåˆä¸è¯­ä¹‰å‘é‡åˆ†ææ— ç¼é›†æˆåˆ° SQL ä¸­ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¼ºå¤§ã€æ›´æ˜“ç”¨çš„æ™ºèƒ½æ•°æ®åˆ†æä½“éªŒã€‚</p>
<p>ç›¸å…³é˜…è¯»ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.selectdb.com%2Fblog%2F1491" target="_blank" title="https://www.selectdb.com/blog/1491" ref="nofollow noopener noreferrer">Apache Doris 4.0 AI èƒ½åŠ›æ­ç§˜ï¼ˆäºŒï¼‰ï¼šä¸ºä¼ä¸šçº§åº”ç”¨è€Œç”Ÿçš„ AI å‡½æ•°è®¾è®¡ä¸å®è·µ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.selectdb.com%2Fblog%2F1455" target="_blank" title="https://www.selectdb.com/blog/1455" ref="nofollow noopener noreferrer">Apache Doris 4.0 AI èƒ½åŠ›æ­ç§˜ï¼ˆä¸€ï¼‰ï¼šAI å‡½æ•°ä¹‹ LLM å‡½æ•°ä»‹ç»</a></li>
</ul>
<h2 data-id="heading-0">AI_AGGï¼šåŸºäº AI çš„æ–‡æœ¬èšåˆ</h2>
<p>èšåˆæ˜¯æ•°æ®åˆ†æä¸­æœ€å¸¸è§çš„æ“ä½œï¼Œä½†å¦‚æœèšåˆçš„å¯¹è±¡æ˜¯æµ·é‡çš„ç”¨æˆ·è¯„è®ºã€æ”¯æŒå·¥å•æˆ–æ—¥å¿—æ–‡æœ¬ï¼Œä¼ ç»Ÿçš„èšåˆå‡½æ•°éš¾ä»¥ç›´æ¥å¤„ç†è¿™ç±»éç»“æ„åŒ–æ–‡æœ¬æ•°æ®ã€‚ä¸ºæ­¤ï¼ŒDoris æ”¯æŒäº† <code>AI_AGG</code>ï¼Œä¸€ä¸ªèƒ½å¤Ÿè°ƒç”¨ AI å¯¹æ–‡æœ¬è¿›è¡Œèšåˆçš„å‡½æ•°ã€‚å®ƒè®©åˆ†æå¸ˆå¯ä»¥æ ¹æ®è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œä»å¤§é‡çš„æ–‡æœ¬ä¸­å¤„ç†ç‰¹å®šçš„ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-1">01 ä½¿ç”¨æ–¹æ³•åŠç¤ºä¾‹</h3>
<blockquote>
<p>AI_AGG è¯¦ç»†ç”¨æ³•è¯·å‚è€ƒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fzh-CN%2Fdocs%2Fdev%2Fsql-manual%2Fsql-functions%2Faggregate-functions%2Fai-agg" target="_blank" title="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/aggregate-functions/ai-agg" ref="nofollow noopener noreferrer">doris.apache.org/zh-CN/docs/â€¦</a></p>
</blockquote>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p>ä¸‹è¡¨æ¨¡æ‹Ÿä¸€ä¸ªç®€æ˜“çš„å®¢æœå·¥å•ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> support_tickets;
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+---------------+------------------+----------------------------------------------------------------------------------+</span>
<span class="hljs-operator">|</span> ticket_id <span class="hljs-operator">|</span> customer_name <span class="hljs-operator">|</span> subject          <span class="hljs-operator">|</span> details                                                                          <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+---------------+------------------+----------------------------------------------------------------------------------+</span>
<span class="hljs-operator">|</span>         <span class="hljs-number">2</span> <span class="hljs-operator">|</span> Bob           <span class="hljs-operator">|</span> Login Failure    <span class="hljs-operator">|</span> Same problem <span class="hljs-keyword">as</span> Alice. Also seeing <span class="hljs-number">502</span> errors <span class="hljs-keyword">on</span> the SSO page.                   <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>         <span class="hljs-number">3</span> <span class="hljs-operator">|</span> Carol         <span class="hljs-operator">|</span> Payment Declined <span class="hljs-operator">|</span> Credit card charged twice but <span class="hljs-keyword">order</span> still shows pending.                         <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>         <span class="hljs-number">5</span> <span class="hljs-operator">|</span> Eve           <span class="hljs-operator">|</span> Login Failure    <span class="hljs-operator">|</span> Getting redirected back <span class="hljs-keyword">to</span> login after entering <span class="hljs-number">2</span>FA code.                        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>         <span class="hljs-number">1</span> <span class="hljs-operator">|</span> Alice         <span class="hljs-operator">|</span> Login Failure    <span class="hljs-operator">|</span> Cannot log <span class="hljs-keyword">in</span> after password reset. Tried clearing cache <span class="hljs-keyword">and</span> different browsers. <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>         <span class="hljs-number">4</span> <span class="hljs-operator">|</span> Dave          <span class="hljs-operator">|</span> Slow Dashboard   <span class="hljs-operator">|</span> Dashboard takes <span class="hljs-operator">&gt;</span><span class="hljs-number">30</span> seconds <span class="hljs-keyword">to</span> load since the <span class="hljs-keyword">last</span> release.                      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------+---------------+------------------+----------------------------------------------------------------------------------+</span>
</code></pre>
<p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>AI_AGG</code> å¯¹ä¸åŒé—®é¢˜ç±»å‹ä¸‹å®¢æˆ·çš„é—®é¢˜è¿›è¡Œæ€»ç»“</strong></p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span>
    subject,
    AI_AGG(
        details,
        <span class="hljs-string">'Summarize every ticket detail into one short paragraph'</span>
    ) <span class="hljs-keyword">AS</span> ai_summary
<span class="hljs-keyword">FROM</span> support_tickets
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> subject;
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">+------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| subject          | ai_summary                                                                                                                                                              |
+------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Slow Dashboard   | The dashboard is experiencing slow loading times, taking over 30 seconds to load following the most recent release.                                                     |
| Payment Declined | A customer reports being charged twice for their order, which remains in a pending status.                                                                              |
| Login Failure    | Users are experiencing login issues, including 2FA redirection, post-password reset failures, and SSO 502 errors, despite clearing cache and trying different browsers. |
+------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<p>ä¸‹è¡¨ç®€æ˜“æ¨¡æ‹Ÿäº†åº”ç”¨åé¦ˆè¡¨ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> app_feedback;
<span class="hljs-operator">+</span><span class="hljs-comment">-------------+----------------+-----------+--------------------------------------------------------------------------------------+</span>
<span class="hljs-operator">|</span> feedback_id <span class="hljs-operator">|</span> feature_module <span class="hljs-operator">|</span> user_name <span class="hljs-operator">|</span> feedback_text                                                                        <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-------------+----------------+-----------+--------------------------------------------------------------------------------------+</span>
<span class="hljs-operator">|</span>           <span class="hljs-number">1</span> <span class="hljs-operator">|</span> æœºç¥¨é¢„è®¢       <span class="hljs-operator">|</span> æé›·      <span class="hljs-operator">|</span> æœç´¢èˆªç­éå¸¸å¿«ï¼Œä»·æ ¼ä¹Ÿé€æ˜ï¼Œç­›é€‰åŠŸèƒ½å¾ˆå¥½ç”¨ã€‚                                         <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>           <span class="hljs-number">2</span> <span class="hljs-operator">|</span> æœºç¥¨é¢„è®¢       <span class="hljs-operator">|</span> éŸ©æ¢…æ¢…    <span class="hljs-operator">|</span> æ”¯ä»˜åå‡ºç¥¨é€Ÿåº¦æœ‰ç‚¹æ…¢ï¼Œç­‰äº†å¿«åŠå°æ—¶ï¼Œå¸Œæœ›èƒ½æ”¹è¿›ã€‚                                     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>           <span class="hljs-number">3</span> <span class="hljs-operator">|</span> æœºç¥¨é¢„è®¢       <span class="hljs-operator">|</span> å°é™ˆ      <span class="hljs-operator">|</span> å¸Œæœ›èƒ½å¢åŠ æ›´å¤šå»‰ä»·èˆªç©ºå…¬å¸çš„é€‰é¡¹ã€‚                                                   <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>           <span class="hljs-number">4</span> <span class="hljs-operator">|</span> æœºç¥¨é¢„è®¢       <span class="hljs-operator">|</span> é©¬ä¸½      <span class="hljs-operator">|</span> Appåœ¨é€‰æ‹©æ—¥æœŸçš„æ—¶å€™å¶å°”ä¼šå¡é¡¿ï¼Œä½“éªŒä¸æ˜¯å¾ˆå¥½ã€‚                                        <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>           <span class="hljs-number">5</span> <span class="hljs-operator">|</span> é…’åº—é¢„è®¢       <span class="hljs-operator">|</span> ç‹å…ˆç”Ÿ    <span class="hljs-operator">|</span> é…’åº—ä¿¡æ¯å¾ˆå…¨ï¼Œå›¾ç‰‡ä¹ŸçœŸå®ã€‚ä½†æ˜¯å–æ¶ˆé¢„è®¢çš„æµç¨‹å¤ªå¤æ‚äº†ã€‚                               <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>           <span class="hljs-number">6</span> <span class="hljs-operator">|</span> é…’åº—é¢„è®¢       <span class="hljs-operator">|</span> åˆ˜å¥³å£«    <span class="hljs-operator">|</span> é€šè¿‡Appé¢„è®¢æ¯”å…¶ä»–å¹³å°ä¾¿å®œï¼Œè¿˜æœ‰ä¼šå‘˜æŠ˜æ‰£ï¼Œéå¸¸æ»¡æ„ã€‚                                  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>           <span class="hljs-number">7</span> <span class="hljs-operator">|</span> è¡Œç¨‹è§„åˆ’       <span class="hljs-operator">|</span> èµµå››      <span class="hljs-operator">|</span> è¡Œç¨‹è§„åˆ’åŠŸèƒ½å¤ªæ£’äº†ï¼Œå¯ä»¥è‡ªåŠ¨æ¨èè·¯çº¿å’Œæ™¯ç‚¹ï¼Œçœäº†ä¸å°‘å¿ƒã€‚                             <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>           <span class="hljs-number">8</span> <span class="hljs-operator">|</span> å®¢æˆ·æœåŠ¡       <span class="hljs-operator">|</span> å­™å°å°    <span class="hljs-operator">|</span> è”ç³»å®¢æœå¾ˆæ–¹ä¾¿ï¼Œé—®é¢˜è§£å†³å¾—ä¹Ÿå¾ˆå¿«ï¼Œç»™å®¢æœç‚¹èµã€‚                                       <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>           <span class="hljs-number">9</span> <span class="hljs-operator">|</span> å®¢æˆ·æœåŠ¡       <span class="hljs-operator">|</span> é’±å¤šå¤š    <span class="hljs-operator">|</span> ç”µè¯å®¢æœæ€»æ˜¯å çº¿ï¼Œåœ¨çº¿å®¢æœå›å¤åˆå¾ˆæ…¢ï¼Œå¸Œæœ›èƒ½å¢åŠ äººæ‰‹ã€‚                               <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-------------+----------------+-----------+--------------------------------------------------------------------------------------+</span>
</code></pre>
<p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>AI_AGG</code> å¯¹ç”¨æˆ·åé¦ˆè¿›è¡Œæ€»ç»“ï¼š</strong></p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span>
    feature_module <span class="hljs-keyword">AS</span> <span class="hljs-string">'åŠŸèƒ½æ¨¡å—'</span>,
    AI_AGG(
        feedback_text,
        <span class="hljs-string">'è¯·ç”¨ç²¾ç¡®ä¸”å°½å¯èƒ½ç®€çŸ­åœ°æ€»ç»“è¿™äº›ç”¨æˆ·åé¦ˆä¸­æåˆ°çš„ä¸»è¦é—®é¢˜å’Œå»ºè®®'</span>
    ) <span class="hljs-keyword">AS</span> <span class="hljs-string">'AIåé¦ˆæ€»ç»“'</span>
<span class="hljs-keyword">FROM</span> app_feedback
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> feature_module;
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-Plain" lang="Plain">+--------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| åŠŸèƒ½æ¨¡å—     | AIåé¦ˆæ€»ç»“                                                                                                                                                                                                     |
+--------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| å®¢æˆ·æœåŠ¡     | ä¸»è¦é—®é¢˜ï¼šå®¢æœç”µè¯å çº¿ï¼Œåœ¨çº¿å®¢æœå›å¤æ…¢ã€‚  
ä¸»è¦å»ºè®®ï¼šå¢åŠ å®¢æœäººæ‰‹ã€‚                                                                                                                                                |
| è¡Œç¨‹è§„åˆ’     | ä¸»è¦é—®é¢˜ï¼šæ—   
ä¸»è¦å»ºè®®ï¼šèµèµè¡Œç¨‹è§„åˆ’åŠŸèƒ½ï¼Œå»ºè®®ç»§ç»­ä¼˜åŒ–                                                                                                                                                        |
| é…’åº—é¢„è®¢     | ä¸»è¦é—®é¢˜ï¼šå–æ¶ˆé¢„è®¢æµç¨‹å¤æ‚ã€‚
ä¸»è¦å»ºè®®ï¼šæ— æ˜ç¡®å»ºè®®ï¼Œä½†è‚¯å®šAppé¢„è®¢ä»·æ ¼ä¼˜åŠ¿å’Œä¼šå‘˜æŠ˜æ‰£ã€‚                                                                                                                          |
| æœºç¥¨é¢„è®¢     | ä¸»è¦é—®é¢˜ï¼šæ”¯ä»˜åå‡ºç¥¨æ…¢ï¼ˆçº¦åŠå°æ—¶ï¼‰ï¼ŒAppæ—¥æœŸé€‰æ‹©å¡é¡¿ï¼Œå»‰ä»·èˆªç©ºå…¬å¸é€‰é¡¹ä¸è¶³ã€‚
ä¸»è¦å»ºè®®ï¼šä¼˜åŒ–å‡ºç¥¨é€Ÿåº¦ï¼Œä¿®å¤Appå¡é¡¿é—®é¢˜ï¼Œå¢åŠ å»‰ä»·èˆªç©ºå…¬å¸é€‰é¡¹ã€‚                                                                   |
+--------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
</code></pre>
<h3 data-id="heading-2">02 AI_AGG çš„å®ç°åŸç†</h3>
<p>å°†èšåˆå‡½æ•°ä¸ AI ç»“åˆï¼Œéœ€è¦è§£å†³ä¸€ä¸ªåˆ†ç»„å†…æ–‡æœ¬æ€»é‡å¯èƒ½è¿œè¶…æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£çš„é—®é¢˜ã€‚å¦‚æœå°†æ‰€æœ‰æ–‡æœ¬æ‹¼æ¥åä¸€æ¬¡æ€§å‘é€ç»™ AIï¼Œ ææ˜“å‡ºç°æ‹¼æ¥æ–‡æœ¬å¤§äºæ¨¡å‹çš„æœ€å¤§ä¸Šä¸‹æ–‡çª—å£çš„æƒ…å†µï¼Œ<strong>è€Œ Doris ä¸­é€šè¿‡åŠ¨æ€é¢„èšåˆè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b494b99e2c2e487f99313c46db572ae2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764144622&amp;x-signature=gzMRN8uc8k9TGtdqmxU%2B8V7Hwkw%3D" alt="02 AI_AGG çš„å®ç°åŸç†.png" loading="lazy"/></p>
<ol>
<li><strong>ä¸Šä¸‹æ–‡ç›‘æ§</strong>ï¼šåœ¨èšåˆæ‹¼æ¥æ–‡æœ¬çš„è¿‡ç¨‹ä¸­ï¼Œ<code>AI_AGG</code> ä¼šä¸ºæ¯ä¸€ä¸ªåˆ†ç»„ç»´æŠ¤ä¸€ä¸ªå†…éƒ¨çš„æ–‡æœ¬ç¼“å†²åŒºï¼ˆç›®å‰å¤§å°å›ºå®šä¸º 128Kï¼Œä¸ºç»å¤§éƒ¨åˆ† AI å¯å…¼å®¹çš„ä¸Šä¸‹æ–‡çª—å£ï¼‰</li>
<li><strong>åŠ¨æ€é¢„èšåˆ</strong>ï¼šå½“æ–°çš„æ–‡æœ¬è¡Œå°†è¦è¢«åŠ å…¥ç¼“å†²åŒºå¹¶ä¼šå¯¼è‡´å…¶å¤§å°è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œ<code>AI_AGG</code> ä¼šè§¦å‘ä¸€æ¬¡é¢„èšåˆã€‚å®ƒä¼šæš‚åœæ¥æ”¶æ–°æ•°æ®ï¼Œå°†å½“å‰ç¼“å†²åŒºå†…çš„æ‰€æœ‰æ–‡æœ¬ä½œä¸ºä¸€ä¸ªæ‰¹æ¬¡å‘é€ç»™ AI è¿›è¡Œä¸€æ¬¡ä¸­é—´ä»»åŠ¡å¤„ç†ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡æ›¿æ¢</strong>ï¼šAI è¿”å›çš„ä¸­é—´å¤„ç†ç»“æœï¼Œå…¶é•¿åº¦é€šå¸¸è¿œå°äºåŸå§‹æ–‡æœ¬ã€‚<code>AI_AGG</code> ä¼šç”¨è¿™ä¸ªç²¾ç‚¼åçš„æ‘˜è¦æ›¿æ¢æ‰ç¼“å†²åŒºå†…åŸæœ‰çš„é•¿æ–‡æœ¬ï¼Œä»è€Œä¸ºå¤„ç†æ›´å¤šçš„æ–°æ–‡æœ¬è¡Œè…¾å‡ºç©ºé—´ã€‚ä¸ºä¿è¯èšåˆè¿‡ç¨‹çš„ç¨³å®šæ€§å’Œé˜²æ­¢è¶…å‡ºæ¨¡å‹æœåŠ¡ä¸Šé™ï¼Œåœ¨æ›¿æ¢åŸæœ‰æ–‡æœ¬åï¼Œè‹¥åŠ å…¥å½“å‰æ–‡æœ¬è¡Œè¿˜æ˜¯ä¼šå¯¼è‡´ç¼“å†²åŒºè¶…è¿‡é˜ˆå€¼ï¼Œ<code>AI_AGG</code> ä¼šç›´æ¥æŠ¥é”™é€€å‡ºã€‚</li>
</ol>
<p><strong>é€šè¿‡è¿™ç§å®ç°æ–¹å¼ï¼Œ<code>AI_AGG</code> å¯ä»¥å®Œå…¨èå…¥ Doris çš„åˆ†å¸ƒå¼æŸ¥è¯¢è®¡åˆ’ï¼Œåˆ©ç”¨å¤šèŠ‚ç‚¹å¹¶è¡Œè®¡ç®—ï¼Œå¹¶ç”±æ•°æ®åº“è‡ªåŠ¨ç®¡ç†èšåˆè¿‡ç¨‹ä¸­çš„ä¸­é—´çŠ¶æ€ã€‚å› æ­¤ï¼Œç”¨æˆ·å¯ä»¥ç”¨ç†Ÿæ‚‰çš„ SQL èšåˆè¯­æ³•ï¼Œåœ¨æµ·é‡æ–‡æœ¬ä¸Šå®ç°é«˜æ•ˆçš„æ™ºèƒ½åˆ†æã€‚</strong></p>
<h2 data-id="heading-3">EMBED: æ–‡æœ¬å‘é‡åŒ–å‡½æ•°</h2>
<p><code>EMBED</code> å‡½æ•°çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡ AI å°†ä»»æ„æ–‡æœ¬è½¬æ¢ä¸ºé«˜ç»´åº¦çš„æµ®ç‚¹æ•°å‘é‡ã€‚è¿™ä¸ªå‘é‡æ˜¯æ–‡æœ¬åœ¨è¯­ä¹‰ç©ºé—´ä¸­çš„ä¸€ç§æ•°å­¦è¡¨ç¤ºï¼Œå®ƒæ•æ‰äº†æ–‡æœ¬çš„è¯­ä¹‰ä¿¡æ¯ã€‚è¯­ä¹‰ç›¸è¿‘çš„æ–‡æœ¬ï¼Œå…¶å‘é‡åœ¨ç©ºé—´ä¸­çš„è·ç¦»ä¹Ÿæ›´è¿‘ã€‚</p>
<blockquote>
<p>EMBED è¯¦ç»†ç”¨æ³•è¯·å‚è€ƒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fzh-CN%2Fdocs%2Fdev%2Fsql-manual%2Fsql-functions%2Fai-functions%2Fdistance-functions%2Fembed" target="_blank" title="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/distance-functions/embed" ref="nofollow noopener noreferrer">doris.apache.org/zh-CN/docs/â€¦</a></p>
</blockquote>
<h3 data-id="heading-4">01 ä½¿ç”¨æ–¹æ³•åŠç¤ºä¾‹</h3>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p>ä¸‹è¡¨æ¨¡æ‹Ÿç®€æ˜“çš„è¡Œä¸ºæ‰‹å†Œ</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> knowledge_base (
    id <span class="hljs-type">BIGINT</span>,
    title STRING,
    content STRING,
    embedding <span class="hljs-keyword">ARRAY</span><span class="hljs-operator">&lt;</span><span class="hljs-type">FLOAT</span><span class="hljs-operator">&gt;</span> COMMENT <span class="hljs-string">'Semantic vector generated by EMBED function'</span>
)
DUPLICATE KEY(id)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(id) BUCKETS <span class="hljs-number">4</span>
PROPERTIES (
    "replication_num" <span class="hljs-operator">=</span> "1"
);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> knowledge_base (id, title, content, embedding) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-number">1</span>, "Travel Reimbursement Policy",
    "Employees must submit a reimbursement request within 7 days after the business trip, with invoices and travel approval attached.",
    EMBED("travel reimbursement policy")),
(<span class="hljs-number">2</span>, "Leave Policy",
    "Employees must apply for leave in the system in advance. If the leave is longer than three days, approval from the direct manager is required.",
    EMBED("leave request policy")),
(<span class="hljs-number">3</span>, "VPN User Guide",
    "To access the internal network, employees must use VPN. For the first login, download and install the client and configure the certificate.",
    EMBED("VPN guide intranet access")),
(<span class="hljs-number">4</span>, "Meeting Room Reservation",
    "Meeting rooms can be reserved in advance through the OA system, with time and number of participants specified.",
    EMBED("meeting room booking reservation")),
(<span class="hljs-number">5</span>, "Procurement Request Process",
    "Departments must fill out a procurement request form for purchasing items. If the amount exceeds $5000, financial approval is required.",
    EMBED("procurement request process finance"));
</code></pre>
<p><strong>é€šè¿‡ <code>EMBED</code> å‡½æ•°å¯¹æ–‡æœ¬çš„å‘é‡åŒ–æ“ä½œï¼Œç»“åˆ Doris æ”¯æŒçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fzh-CN%2Fdocs%2Fdev%2Fsql-manual%2Fsql-functions%2Fai-functions%2Fdistance-functions%2Fcosine-distance" target="_blank" title="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/distance-functions/cosine-distance" ref="nofollow noopener noreferrer">å‘é‡å‡½æ•°</a>ï¼Œ å¯å¯¹æ•°æ®è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</strong></p>
<ol>
<li>é—®ç­”æ£€ç´¢ï¼ˆç»“åˆ <code>COSINE_DISTANCE</code>ï¼‰</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    id, title, content,
    COSINE_DISTANCE(embedding, EMBED("How to apply for travel reimbursement?")) <span class="hljs-keyword">AS</span> score
<span class="hljs-keyword">FROM</span> knowledge_base
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">ASC</span>
LIMIT <span class="hljs-number">2</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+--------------------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> title                       <span class="hljs-operator">|</span> content                                                                                                                                 <span class="hljs-operator">|</span> score              <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+--------------------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> Travel Reimbursement Policy <span class="hljs-operator">|</span> Employees must submit a reimbursement request <span class="hljs-keyword">within</span> <span class="hljs-number">7</span> days after the business trip, <span class="hljs-keyword">with</span> invoices <span class="hljs-keyword">and</span> travel approval attached.        <span class="hljs-operator">|</span> <span class="hljs-number">0.4463210454563673</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">5</span> <span class="hljs-operator">|</span> Procurement Request Process <span class="hljs-operator">|</span> Departments must fill <span class="hljs-keyword">out</span> a procurement request form <span class="hljs-keyword">for</span> purchasing items. If the amount exceeds $<span class="hljs-number">5000</span>, financial approval <span class="hljs-keyword">is</span> required. <span class="hljs-operator">|</span> <span class="hljs-number">0.5726841578491431</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+--------------------+</span>
</code></pre>
<ol>
<li>é—®é¢˜åˆ†æåŒ¹é…ï¼ˆç»“åˆ <code>L2_DISTANCE</code>ï¼‰</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    id, title, content,
    L2_DISTANCE(embedding, EMBED("How to access the company intranet")) <span class="hljs-keyword">AS</span> distance
<span class="hljs-keyword">FROM</span> knowledge_base
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> distance <span class="hljs-keyword">ASC</span>
LIMIT <span class="hljs-number">2</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+--------------------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> title                       <span class="hljs-operator">|</span> content                                                                                                                                     <span class="hljs-operator">|</span> distance           <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+--------------------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span> VPN <span class="hljs-keyword">User</span> Guide              <span class="hljs-operator">|</span> <span class="hljs-keyword">To</span> access the internal network, employees must use VPN. <span class="hljs-keyword">For</span> the <span class="hljs-keyword">first</span> login, download <span class="hljs-keyword">and</span> install the client <span class="hljs-keyword">and</span> configure the certificate. <span class="hljs-operator">|</span> <span class="hljs-number">0.5838271122253775</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> Travel Reimbursement Policy <span class="hljs-operator">|</span> Employees must submit a reimbursement request <span class="hljs-keyword">within</span> <span class="hljs-number">7</span> days after the business trip, <span class="hljs-keyword">with</span> invoices <span class="hljs-keyword">and</span> travel approval attached.            <span class="hljs-operator">|</span>  <span class="hljs-number">1.272394695975331</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+--------------------+</span>
</code></pre>
<ol>
<li>æ ¹æ®æ–‡ç« å†…å®¹è¿›è¡Œæ–‡æœ¬ç›¸å…³åº¦åŒ¹é…å¹¶æ¨èï¼ˆç»“åˆ<code>INNER PRODUCT</code>ï¼‰</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    id, title, content,
    INNER_PRODUCT(embedding, EMBED("Leave system request leader approval")) <span class="hljs-keyword">AS</span> score
<span class="hljs-keyword">FROM</span> knowledge_base
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">!=</span> <span class="hljs-number">2</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">2</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> title                       <span class="hljs-operator">|</span> content                                                                                                                                 <span class="hljs-operator">|</span> score               <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">5</span> <span class="hljs-operator">|</span> Procurement Request Process <span class="hljs-operator">|</span> Departments must fill <span class="hljs-keyword">out</span> a procurement request form <span class="hljs-keyword">for</span> purchasing items. If the amount exceeds $<span class="hljs-number">5000</span>, financial approval <span class="hljs-keyword">is</span> required. <span class="hljs-operator">|</span>    <span class="hljs-number">0.33268885332504</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">4</span> <span class="hljs-operator">|</span> Meeting Room Reservation    <span class="hljs-operator">|</span> Meeting rooms can be reserved <span class="hljs-keyword">in</span> advance through the OA <span class="hljs-keyword">system</span>, <span class="hljs-keyword">with</span> <span class="hljs-type">time</span> <span class="hljs-keyword">and</span> number <span class="hljs-keyword">of</span> participants specified.                         <span class="hljs-operator">|</span> <span class="hljs-number">0.29224032230852487</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+---------------------+</span>
</code></pre>
<ol>
<li>å¯»æ‰¾å·®å¼‚è¾ƒå°çš„å†…å®¹ï¼ˆç»“åˆ<code>L1_DISTANCE</code>ï¼‰</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    id, title, content,
    L1_DISTANCE(embedding, EMBED("Procurement application process")) <span class="hljs-keyword">AS</span> distance
<span class="hljs-keyword">FROM</span> knowledge_base
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> distance <span class="hljs-keyword">ASC</span>
LIMIT <span class="hljs-number">3</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> title                       <span class="hljs-operator">|</span> content                                                                                                                                        <span class="hljs-operator">|</span> distance           <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">5</span> <span class="hljs-operator">|</span> Procurement Request Process <span class="hljs-operator">|</span> Departments must fill <span class="hljs-keyword">out</span> a procurement request form <span class="hljs-keyword">for</span> purchasing items. If the amount exceeds $<span class="hljs-number">5000</span>, financial approval <span class="hljs-keyword">is</span> required.        <span class="hljs-operator">|</span>  <span class="hljs-number">18.66882028897362</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">4</span> <span class="hljs-operator">|</span> Meeting Room Reservation    <span class="hljs-operator">|</span> Meeting rooms can be reserved <span class="hljs-keyword">in</span> advance through the OA <span class="hljs-keyword">system</span>, <span class="hljs-keyword">with</span> <span class="hljs-type">time</span> <span class="hljs-keyword">and</span> number <span class="hljs-keyword">of</span> participants specified.                                <span class="hljs-operator">|</span>  <span class="hljs-number">30.90449328294426</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span> Leave Policy                <span class="hljs-operator">|</span> Employees must apply <span class="hljs-keyword">for</span> leave <span class="hljs-keyword">in</span> the <span class="hljs-keyword">system</span> <span class="hljs-keyword">in</span> advance. If the leave <span class="hljs-keyword">is</span> longer than three days, approval <span class="hljs-keyword">from</span> the direct manager <span class="hljs-keyword">is</span> required. <span class="hljs-operator">|</span> <span class="hljs-number">31.060405636536416</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+--------------------+</span>
</code></pre>
<p><strong><code>EMBED</code> çš„è®¾è®¡ä¸ä»…æ˜¯ä¸€ä¸ªæ–‡æœ¬å‘é‡åŒ–å·¥å…·ï¼Œæ›´æ˜¯ Doris å‘é‡åˆ†æç”Ÿæ€çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</strong> é€šè¿‡ä¸å…¶ä»–å‘é‡å‡½æ•°ï¼ˆ<code>COSINE_DISTANCE</code>ï¼Œ <code>L2_DISTANCE</code>ï¼Œ <code>INNER_PRODUCT</code>ï¼Œ <code>L1_DISTANCE</code> ï¼‰çš„æ— ç¼é›†æˆï¼Œ<code>EMBED</code> æ”¯æŒç”¨æˆ·åœ¨ SQL æŸ¥è¯¢ä¸­å®Œæˆä»æ–‡æœ¬åˆ°å‘é‡ï¼Œå†åˆ°ç›¸ä¼¼åº¦è®¡ç®—æˆ–æ£€ç´¢çš„ä¸€ç«™å¼åˆ†æã€‚</p>
<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<p>ä¸‹è¡¨æ¨¡æ‹Ÿç®€æ˜“çš„å®¢æœå¸¸è§é—®é¢˜æ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> support_docs (
    id <span class="hljs-type">BIGINT</span>,
    title STRING,
    content STRING,
    embedding <span class="hljs-keyword">ARRAY</span><span class="hljs-operator">&lt;</span><span class="hljs-type">FLOAT</span><span class="hljs-operator">&gt;</span> COMMENT <span class="hljs-string">'ç”± EMBED å‡½æ•°ç”Ÿæˆçš„è¯­ä¹‰å‘é‡'</span>
) DUPLICATE KEY(id)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(id) BUCKETS <span class="hljs-number">1</span>
PROPERTIES ( "replication_num" <span class="hljs-operator">=</span> "1" );

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> support_docs (id, title, content, embedding) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-number">1</span>, "ç³»ç»Ÿç™»å½•é—®é¢˜æ’æŸ¥",
    "å½“ç”¨æˆ·æ— æ³•ç™»å½•æ—¶ï¼Œè¯·å…ˆæ£€æŸ¥ç½‘ç»œè¿æ¥ã€æµè§ˆå™¨ç¼“å­˜ï¼Œå¹¶ç¡®è®¤è´¦å·æœªè¢«é”å®šã€‚",
    EMBED("ç™»å½•é—®é¢˜æ’æŸ¥ ç½‘ç»œå¼‚å¸¸ è´¦å·é”å®š")),
(<span class="hljs-number">2</span>, "æ•°æ®å¤‡ä»½ä¸æ¢å¤æŒ‡å—",
    "å®¢æˆ·å¯åœ¨ç®¡ç†åå°æ‰‹åŠ¨å¤‡ä»½æ•°æ®ï¼Œè‹¥è¯¯åˆ å¯é€šè¿‡æ”¯æŒå›¢é˜Ÿç”³è¯·æ•°æ®æ¢å¤ã€‚",
    EMBED("æ•°æ®å¤‡ä»½ æ¢å¤ æ“ä½œæŒ‡å—")),
(<span class="hljs-number">3</span>, "è´¦å•ä¸å‘ç¥¨é—®é¢˜",
    "ä¼ä¸šå®¢æˆ·å¯åœ¨è´¢åŠ¡æ¨¡å—ä¸‹è½½ç”µå­å‘ç¥¨ã€‚å¦‚éœ€çº¸è´¨ç‰ˆï¼Œè¯·æäº¤ç”³è¯·å·¥å•ã€‚",
    EMBED("è´¦å• å‘ç¥¨ è´¢åŠ¡æ¨¡å—")),
(<span class="hljs-number">4</span>, "API æ¥å£è°ƒç”¨è§„èŒƒ",
    "å¼€å‘è€…åœ¨è°ƒç”¨ API æ—¶éœ€æºå¸¦æ­£ç¡®çš„è®¿é—®ä»¤ç‰Œï¼Œå¦åˆ™å°†è¿”å›èº«ä»½éªŒè¯é”™è¯¯ã€‚",
    EMBED("æ¥å£è°ƒç”¨ è®¤è¯é”™è¯¯ è®¿é—®ä»¤ç‰Œ")),
(<span class="hljs-number">5</span>, "æœåŠ¡ä¸­æ–­åº”æ€¥æµç¨‹",
    "è‹¥å‡ºç°æœåŠ¡ä¸­æ–­ï¼ŒæŠ€æœ¯å›¢é˜Ÿéœ€åœ¨30åˆ†é’Ÿå†…å¯åŠ¨åº”æ€¥å“åº”å¹¶å‘å¸ƒå…¬å‘Šã€‚",
    EMBED("æœåŠ¡ä¸­æ–­ åº”æ€¥å“åº” å¤„ç†æµç¨‹"));
</code></pre>
<p><strong>é€šè¿‡ <code>EMBED</code> å‡½æ•°å¯¹æ–‡æœ¬çš„å‘é‡åŒ–æ“ä½œï¼Œç»“åˆ Doris æ”¯æŒçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fzh-CN%2Fdocs%2Fdev%2Fsql-manual%2Fsql-functions%2Fai-functions%2Fdistance-functions%2Fcosine-distance" target="_blank" title="https://doris.apache.org/zh-CN/docs/dev/sql-manual/sql-functions/ai-functions/distance-functions/cosine-distance" ref="nofollow noopener noreferrer">å‘é‡å‡½æ•°</a>ï¼Œ å¯å¯¹æ•°æ®è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</strong></p>
<ol>
<li>é—®ç­”æ£€ç´¢ï¼ˆç»“åˆ <code>COSINE_DISTANCE</code>ï¼‰</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    id, title, content,
    COSINE_DISTANCE(embedding, EMBED("ç™»å½•ä¸ä¸Šç³»ç»Ÿæ€ä¹ˆåŠï¼Ÿ")) <span class="hljs-keyword">AS</span> score
<span class="hljs-keyword">FROM</span> support_docs
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">ASC</span>
LIMIT <span class="hljs-number">2</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+--------------------------+--------------------------------------------------------------------------------------------------------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> title                    <span class="hljs-operator">|</span> content                                                                                                <span class="hljs-operator">|</span> score     <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+--------------------------+--------------------------------------------------------------------------------------------------------+-----------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> ç³»ç»Ÿç™»å½•é—®é¢˜æ’æŸ¥         <span class="hljs-operator">|</span> å½“ç”¨æˆ·æ— æ³•ç™»å½•æ—¶ï¼Œè¯·å…ˆæ£€æŸ¥ç½‘ç»œè¿æ¥ã€æµè§ˆå™¨ç¼“å­˜ï¼Œå¹¶ç¡®è®¤è´¦å·æœªè¢«é”å®šã€‚                                   <span class="hljs-operator">|</span> <span class="hljs-number">0.3183002</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">4</span> <span class="hljs-operator">|</span> API æ¥å£è°ƒç”¨è§„èŒƒ         <span class="hljs-operator">|</span> å¼€å‘è€…åœ¨è°ƒç”¨ API æ—¶éœ€æºå¸¦æ­£ç¡®çš„è®¿é—®ä»¤ç‰Œï¼Œå¦åˆ™å°†è¿”å›èº«ä»½éªŒè¯é”™è¯¯ã€‚                                      <span class="hljs-operator">|</span> <span class="hljs-number">0.5599254</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+--------------------------+--------------------------------------------------------------------------------------------------------+-----------+</span>
</code></pre>
<ol>
<li>é—®é¢˜åˆ†æåŒ¹é…ï¼ˆç»“åˆ <code>L2_DISTANCE</code>ï¼‰</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    id, title, content,
    L2_DISTANCE(embedding, EMBED("æ¥å£è°ƒç”¨æ—¶æç¤ºæ²¡æœ‰æƒé™")) <span class="hljs-keyword">AS</span> distance
<span class="hljs-keyword">FROM</span> support_docs
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> distance <span class="hljs-keyword">ASC</span>
LIMIT <span class="hljs-number">2</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+--------------------------+--------------------------------------------------------------------------------------------------------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> title                    <span class="hljs-operator">|</span> content                                                                                                <span class="hljs-operator">|</span> distance  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+--------------------------+--------------------------------------------------------------------------------------------------------+-----------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">4</span> <span class="hljs-operator">|</span> API æ¥å£è°ƒç”¨è§„èŒƒ         <span class="hljs-operator">|</span> å¼€å‘è€…åœ¨è°ƒç”¨ API æ—¶éœ€æºå¸¦æ­£ç¡®çš„è®¿é—®ä»¤ç‰Œï¼Œå¦åˆ™å°†è¿”å›èº«ä»½éªŒè¯é”™è¯¯ã€‚                                      <span class="hljs-operator">|</span> <span class="hljs-number">0.6471552</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> ç³»ç»Ÿç™»å½•é—®é¢˜æ’æŸ¥         <span class="hljs-operator">|</span> å½“ç”¨æˆ·æ— æ³•ç™»å½•æ—¶ï¼Œè¯·å…ˆæ£€æŸ¥ç½‘ç»œè¿æ¥ã€æµè§ˆå™¨ç¼“å­˜ï¼Œå¹¶ç¡®è®¤è´¦å·æœªè¢«é”å®šã€‚                                   <span class="hljs-operator">|</span> <span class="hljs-number">0.9831962</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+--------------------------+--------------------------------------------------------------------------------------------------------+-----------+</span>
</code></pre>
<ol>
<li>æ ¹æ®æ–‡ç« å†…å®¹è¿›è¡Œæ–‡æœ¬ç›¸å…³åº¦åŒ¹é…å¹¶æ¨èï¼ˆç»“åˆ<code>INNER PRODUCT</code>ï¼‰</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    id, title, content,
    INNER_PRODUCT(embedding, EMBED("è´¦å• å‘ç¥¨ æŠ¥é”€æµç¨‹")) <span class="hljs-keyword">AS</span> score
<span class="hljs-keyword">FROM</span> support_docs
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">2</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+--------------------------+-----------------------------------------------------------------------------------------------+-----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> title                    <span class="hljs-operator">|</span> content                                                                                       <span class="hljs-operator">|</span> score     <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+--------------------------+-----------------------------------------------------------------------------------------------+-----------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span> è´¦å•ä¸å‘ç¥¨é—®é¢˜           <span class="hljs-operator">|</span> ä¼ä¸šå®¢æˆ·å¯åœ¨è´¢åŠ¡æ¨¡å—ä¸‹è½½ç”µå­å‘ç¥¨ã€‚å¦‚éœ€çº¸è´¨ç‰ˆï¼Œè¯·æäº¤ç”³è¯·å·¥å•ã€‚                                <span class="hljs-operator">|</span> <span class="hljs-number">0.8098868</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">5</span> <span class="hljs-operator">|</span> æœåŠ¡ä¸­æ–­åº”æ€¥æµç¨‹         <span class="hljs-operator">|</span> è‹¥å‡ºç°æœåŠ¡ä¸­æ–­ï¼ŒæŠ€æœ¯å›¢é˜Ÿéœ€åœ¨<span class="hljs-number">30</span>åˆ†é’Ÿå†…å¯åŠ¨åº”æ€¥å“åº”å¹¶å‘å¸ƒå…¬å‘Šã€‚                                  <span class="hljs-operator">|</span> <span class="hljs-number">0.3729638</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+--------------------------+-----------------------------------------------------------------------------------------------+-----------+</span>
</code></pre>
<ol>
<li>å¯»æ‰¾å·®å¼‚è¾ƒå°çš„å†…å®¹ï¼ˆç»“åˆ<code>L1_DISTANCE</code>ï¼‰</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    id, title, content,
    L1_DISTANCE(embedding, EMBED("æœåŠ¡ä¸­æ–­ å¤„ç† æŒ‡å—")) <span class="hljs-keyword">AS</span> distance
<span class="hljs-keyword">FROM</span> support_docs
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> distance <span class="hljs-keyword">ASC</span>
LIMIT <span class="hljs-number">3</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+--------------------------------------------------------------------------------------------------------+----------+</span>
<span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> title                       <span class="hljs-operator">|</span> content                                                                                                <span class="hljs-operator">|</span> distance <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+--------------------------------------------------------------------------------------------------------+----------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">5</span> <span class="hljs-operator">|</span> æœåŠ¡ä¸­æ–­åº”æ€¥æµç¨‹            <span class="hljs-operator">|</span> è‹¥å‡ºç°æœåŠ¡ä¸­æ–­ï¼ŒæŠ€æœ¯å›¢é˜Ÿéœ€åœ¨<span class="hljs-number">30</span>åˆ†é’Ÿå†…å¯åŠ¨åº”æ€¥å“åº”å¹¶å‘å¸ƒå…¬å‘Šã€‚                                           <span class="hljs-operator">|</span> <span class="hljs-number">13.94832</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span> æ•°æ®å¤‡ä»½ä¸æ¢å¤æŒ‡å—          <span class="hljs-operator">|</span> å®¢æˆ·å¯åœ¨ç®¡ç†åå°æ‰‹åŠ¨å¤‡ä»½æ•°æ®ï¼Œè‹¥è¯¯åˆ å¯é€šè¿‡æ”¯æŒå›¢é˜Ÿç”³è¯·æ•°æ®æ¢å¤ã€‚                                       <span class="hljs-operator">|</span> <span class="hljs-number">24.65827</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> ç³»ç»Ÿç™»å½•é—®é¢˜æ’æŸ¥            <span class="hljs-operator">|</span> å½“ç”¨æˆ·æ— æ³•ç™»å½•æ—¶ï¼Œè¯·å…ˆæ£€æŸ¥ç½‘ç»œè¿æ¥ã€æµè§ˆå™¨ç¼“å­˜ï¼Œå¹¶ç¡®è®¤è´¦å·æœªè¢«é”å®šã€‚                                   <span class="hljs-operator">|</span>  <span class="hljs-number">24.9747</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------+-----------------------------+--------------------------------------------------------------------------------------------------------+----------+</span>
</code></pre>
<h3 data-id="heading-5">02 çµæ´»çš„å‘é‡ç»´åº¦æ§åˆ¶</h3>
<p>é€šè¿‡ Doris å†…ç½®çš„ <code>RESOURCE</code> æœºåˆ¶ï¼Œç”¨æˆ·åœ¨é…ç½® AI  Resource æ—¶ï¼Œå¯ä»¥è®¾ç½® <code>ai.dimensions</code> å‚æ•°æ¥ç²¾ç¡®æŒ‡å®šç”Ÿæˆå‘é‡çš„ç»´åº¦ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡åœºæ™¯å’Œæ€§èƒ½è€ƒé‡ï¼Œé€‰æ‹©ç”Ÿæˆé«˜ç»´å‘é‡ä»¥ä¿ç•™æ›´ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯ï¼Œæˆ–é€‰æ‹©ä½ç»´å‘é‡ä»¥èŠ‚çº¦å­˜å‚¨ç©ºé—´å’ŒåŠ é€Ÿè®¡ç®—ã€‚è¿™ç§çµæ´»æ€§ä½¿å¾— <code>EMBED</code> å‡½æ•°èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”ä»è½»é‡çº§è¯­ä¹‰åŒ¹é…åˆ°é«˜ç²¾åº¦å‘é‡æ£€ç´¢ç­‰å¤šæ ·åŒ–çš„åˆ†æéœ€æ±‚ï¼Œè®©ç”¨æˆ·åœ¨æˆæœ¬ä¸æ•ˆæœä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šåœ¨ä½¿ç”¨ <code>dimensions</code> å‚æ•°æ—¶ï¼Œè¯·åŠ¡å¿…ç¡®è®¤ <code>RESOURCE</code> ä¸­é…ç½®çš„æ¨¡å‹æ”¯æŒæ‚¨æ‰€æŒ‡å®šçš„ç»´åº¦ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´è¯·æ±‚é”™è¯¯ã€‚æ­¤å¤–ï¼ŒDoris å†…éƒ¨å¯¹éƒ¨åˆ†ä¸æ”¯æŒç»´åº¦å®šåˆ¶çš„æ¨¡å‹ï¼ˆä¾‹å¦‚ OpenAI çš„ <code>text-embedding-ada-002</code>ï¼‰åšäº†é™åˆ¶ã€‚å¯¹äºè¿™äº›æ¨¡å‹ï¼Œå³ä½¿åœ¨ <code>RESOURCE</code> ä¸­è®¾ç½®äº† <code>dimensions</code> å‚æ•°ï¼Œè¯¥è®¾ç½®ä¹Ÿå°†è¢«å¿½ç•¥ï¼Œå‡½æ•°å°†è¿”å›æ¨¡å‹é»˜è®¤çš„ç»´åº¦ã€‚</p>
</blockquote>
<h2 data-id="heading-6">æ€»ç»“ä¸å±•æœ›</h2>
<p>å€ŸåŠ©<code>AI_AGG</code> ä¸ <code>EMBED</code> å‡½æ•°ï¼ŒApache Doris æ‹¥æœ‰äº†äº†å¼ºå¤§çš„æ™ºèƒ½åˆ†æèƒ½åŠ›ï¼Œæå¤§åœ°æ‹“å±•äº†æ•°æ®åˆ†æä¸æ™ºèƒ½åº”ç”¨çš„è¾¹ç•Œã€‚<code>AI_AGG</code> é€šè¿‡å…¶åŠ¨æ€é¢„èšåˆæœºåˆ¶ï¼Œå°†éç»“æ„åŒ–æ–‡æœ¬çš„æ™ºèƒ½èšåˆåˆ†æå¸¦å…¥æ•°æ®åº“ï¼Œè½»æ¾åº”å¯¹æµ·é‡ç”¨æˆ·è¯„è®ºã€æ—¥å¿—åˆ†æç­‰åœºæ™¯ã€‚è€Œ <code>EMBED</code> å‡½æ•°åˆ™ä¸ Doris çš„å‘é‡å‡½æ•°æ— ç¼é›†æˆï¼Œæä¾›ä»æ–‡æœ¬åˆ°è¯­ä¹‰å‘é‡ã€å†åˆ°ç›¸ä¼¼åº¦æ£€ç´¢çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œæå¤§ç®€åŒ–äº†é—®ç­”ç³»ç»Ÿã€å†…å®¹æ¨èç­‰åº”ç”¨çš„å¼€å‘ã€‚è¿™äº›åŠŸèƒ½ä½¿å¾— SQL è¯­è¨€æœ¬èº«å…·å¤‡äº†é©¾é©­ AI æ¨¡å‹çš„èƒ½åŠ›ï¼Œè®©æ¯ä¸€ä½æ•°æ®åˆ†æå¸ˆéƒ½èƒ½ä»¥ä½æˆæœ¬ã€é«˜æ•ˆç‡çš„æ–¹å¼ï¼ŒæŒ–æ˜æ•°æ®ä¸­æ›´æ·±å±‚æ¬¡çš„è¯­ä¹‰ä»·å€¼ã€‚</p>
<p>å±•æœ›æœªæ¥ï¼ŒDoris å°†ç»§ç»­æ·±åŒ– AI ä¸æ•°æ®åº“çš„èåˆã€‚æˆ‘ä»¬å°†è‡´åŠ›äºä¼˜åŒ–æ¨¡å‹è°ƒåº¦ä¸è®¡ç®—æ€§èƒ½ï¼Œå¹¶æ¢ç´¢æ›´å¤šå¦‚å¤šæ¨¡æ€æ•°æ®åˆ†æã€AI Agent äº¤äº’ç­‰å‰æ²¿åŠŸèƒ½ï¼ŒæŒç»­é™ä½ AI æŠ€æœ¯çš„ä½¿ç”¨é—¨æ§›ï¼Œè®©æ•°æ®é©±åŠ¨çš„æ™ºèƒ½å†³ç­–æ— å¤„ä¸åœ¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ React-DnDï¼šå®ç°å¤šä»»åŠ¡é¡¹æ‹–æ‹½-useDropå¤„ç†]]></title>    <link>https://juejin.cn/post/7574041466710671403</link>    <guid>https://juejin.cn/post/7574041466710671403</guid>    <pubDate>2025-11-19T07:45:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574041466710671403" data-draft-id="7574084898878259241" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ React-DnDï¼šå®ç°å¤šä»»åŠ¡é¡¹æ‹–æ‹½-useDropå¤„ç†"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-11-19T07:45:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Wect"/> <meta itemprop="url" content="https://juejin.cn/user/4185164878720068"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ React-DnDï¼šå®ç°å¤šä»»åŠ¡é¡¹æ‹–æ‹½-useDropå¤„ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185164878720068/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Wect
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:45:05.000Z" title="Wed Nov 19 2025 07:45:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç¯‡æŠ€æœ¯åˆ†äº«ä¸­ï¼Œæˆ‘ä»¬èšç„¦äºuseDragé’©å­å®ç°Todoä»»åŠ¡é¡¹çš„æ‹–åŠ¨è§¦å‘é€»è¾‘ï¼Œå®Œæˆäº†ä»»åŠ¡çš„é€‰ä¸­ä¸æ‹–æ‹½å¯åŠ¨åŠŸèƒ½ã€‚è€Œæ‹–æ‹½äº¤äº’çš„é—­ç¯ï¼Œå¿…ç„¶ç¦»ä¸å¼€æ”¾ç½®æ¥æ”¶ç¯èŠ‚â€”â€”å½“ç”¨æˆ·å°†ä»»åŠ¡æ‹–æ‹½åˆ°ç›®æ ‡ä½ç½®æ—¶ï¼Œå¦‚ä½•ç²¾å‡†åˆ¤æ–­æ‹–åŠ¨ç±»å‹ï¼ˆå•ä¸ª/å¤šä¸ªï¼‰å¹¶æ‰§è¡Œå¯¹åº”çš„æ’åºé€»è¾‘ï¼Œæ‰æ˜¯ç¡®ä¿äº¤äº’æµç•…æ€§çš„æ ¸å¿ƒã€‚æœ¬æ–‡å°†è¯¦ç»†æ‹†è§£è¿™ä¸€ç¯èŠ‚çš„å®ç°æ€è·¯ï¼Œé‡ç‚¹è§£ææ‰¹é‡æ’åºæ“ä½œçš„è®¾è®¡ä¸hoveräº‹ä»¶çš„é€»è¾‘å¤„ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f18f7ec5723048b3ad3a87c33279a42f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2VjdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143316&amp;x-signature=6DLmE4mu32QDvn3kn0l%2F%2F2LB7HE%3D" alt="SelectTodosDrop.gif" loading="lazy"/></p>
<h2 data-id="heading-0">æ ¸å¿ƒé—®é¢˜ï¼šåŒºåˆ†æ‹–åŠ¨ç±»å‹ï¼ŒåŒ¹é…å·®å¼‚åŒ–é€»è¾‘</h2>
<p>ä»»åŠ¡æ‹–æ‹½çš„æ”¾ç½®æ¥æ”¶ç¯èŠ‚ï¼Œé¦–è¦è§£å†³çš„é—®é¢˜æ˜¯â€œè¯†åˆ«å½“å‰æ‹–åŠ¨åœºæ™¯â€ã€‚å½“ç”¨æˆ·æ‹–æ‹½ä»»åŠ¡æ—¶ï¼Œå­˜åœ¨ä¸¤ç§å…¸å‹åœºæ™¯ï¼šå•ä¸ªä»»åŠ¡ç‹¬ç«‹æ‹–åŠ¨ã€å¤šä¸ªå·²é€‰ä¸­ä»»åŠ¡æ‰¹é‡æ‹–åŠ¨ã€‚è¿™ä¸¤ç§åœºæ™¯çš„æ’åºé€»è¾‘å­˜åœ¨æœ¬è´¨å·®å¼‚ï¼šå•ä¸ªä»»åŠ¡åªéœ€å¤„ç†â€œæºä½ç½®â€ä¸â€œç›®æ ‡ä½ç½®â€çš„åŒå‘äº¤æ¢ï¼›è€Œæ‰¹é‡ä»»åŠ¡åˆ™éœ€è¦å…ˆæå–æ‰€æœ‰é€‰ä¸­é¡¹ï¼Œå†æ•´ä½“æ’å…¥ç›®æ ‡ä½ç½®ï¼ŒåŒæ—¶ä¿æŒé€‰ä¸­é¡¹å†…éƒ¨çš„ç›¸å¯¹é¡ºåºã€‚</p>
<p>é’ˆå¯¹è¿™ä¸€å·®å¼‚ï¼Œæˆ‘ä»¬çš„æŠ€æœ¯æ–¹æ¡ˆåˆ†ä¸ºä¸¤æ­¥ï¼šä¸€æ˜¯æ–°å¢æ‰¹é‡æ’åºçš„Contextæ“ä½œç±»å‹ï¼Œä¸“é—¨å¤„ç†å¤šä»»åŠ¡æ’åºé€»è¾‘ï¼›äºŒæ˜¯åœ¨useDropçš„hoveräº‹ä»¶ä¸­æ·»åŠ ç±»å‹åˆ¤æ–­ï¼Œæ ¹æ®æ˜¯å¦ä¸ºæ‰¹é‡æ‹–åŠ¨æ‰§è¡Œå¯¹åº”é€»è¾‘ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šå®ç°æ‰¹é‡æ’åºæ“ä½œBATCH_REORDER_TODOS</h2>
<p>å•ä¸ªä»»åŠ¡æ’åºå¯é€šè¿‡ç®€å•çš„æ•°ç»„å…ƒç´ äº¤æ¢å®ç°ï¼Œä½†æ‰¹é‡æ’åºéœ€è¦å¤„ç†â€œé€‰ä¸­é¡¹æå–-ç›®æ ‡ä½ç½®è®¡ç®—-é€‰ä¸­é¡¹æ’å…¥â€ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ–°å¢<code>BATCH_REORDER_TODOS</code>æ“ä½œç±»å‹ï¼Œå°è£…å®Œæ•´çš„æ‰¹é‡æ’åºé€»è¾‘ã€‚</p>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒè®¾è®¡æ€è·¯</h3>
<p>æ‰¹é‡æ’åºçš„æ ¸å¿ƒéœ€æ±‚æ˜¯ï¼šå°†æ‰€æœ‰é€‰ä¸­çš„ä»»åŠ¡ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®ï¼Œå¹¶ä¿æŒé€‰ä¸­é¡¹åœ¨åŸå§‹æ•°ç»„ä¸­çš„ç›¸å¯¹é¡ºåºã€‚å…·ä½“æ€è·¯å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¾¹ç•Œæ ¡éªŒï¼šæ’é™¤â€œæ— é€‰ä¸­ä»»åŠ¡â€â€œç›®æ ‡ä½ç½®è¶Šç•Œâ€ç­‰æ— æ•ˆåœºæ™¯ï¼›</li>
<li>é€‰ä¸­é¡¹æ’åºï¼šç¡®ä¿é€‰ä¸­ä»»åŠ¡çš„é¡ºåºä¸åŸå§‹æ•°ç»„ä¸€è‡´ï¼Œé¿å…æ’åºæ··ä¹±ï¼›</li>
<li>åˆ†ç¦»æ•°ç»„ï¼šå°†åŸå§‹ä»»åŠ¡æ•°ç»„æ‹†åˆ†ä¸ºâ€œé€‰ä¸­ä»»åŠ¡â€å’Œâ€œéé€‰ä¸­ä»»åŠ¡â€ä¸¤ä¸ªé›†åˆï¼›</li>
<li>ç›®æ ‡ä½ç½®æ ¡å‡†ï¼šè®¡ç®—é€‰ä¸­ä»»åŠ¡åœ¨éé€‰ä¸­æ•°ç»„ä¸­çš„å®é™…æ’å…¥ä½ç½®ï¼›</li>
<li>æ•°ç»„é‡ç»„ï¼šå°†é€‰ä¸­ä»»åŠ¡æ•´ä½“æ’å…¥ç›®æ ‡ä½ç½®ï¼Œå½¢æˆæ–°çš„ä»»åŠ¡æ•°ç»„ã€‚</li>
</ul>
<h3 data-id="heading-3">1.2 å®Œæ•´ä»£ç å®ç°ä¸è§£æ</h3>
<p>ä»¥ä¸‹æ˜¯<code>BATCH_REORDER_TODOS</code>åœ¨Context reducerä¸­çš„å®ç°ä»£ç ï¼Œå…³é”®æ­¥éª¤å·²æ·»åŠ è¯¦ç»†æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">BATCH_REORDER_TODOS</span>:
  {
    <span class="hljs-comment">// ä»actionä¸­è·å–ç›®æ ‡ä½ç½®ç´¢å¼•å’Œç§»åŠ¨æ–¹å‘</span>
    <span class="hljs-keyword">const</span> { destinationIndex, direction } = action.<span class="hljs-property">payload</span>;

    <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶æ£€æŸ¥ï¼šæ— é€‰ä¸­ä»»åŠ¡/ç›®æ ‡ä½ç½®è¶Šç•Œåˆ™è¿”å›åŸçŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">selectedTodos</span>.<span class="hljs-property">length</span> || destinationIndex &lt; <span class="hljs-number">0</span> || destinationIndex &gt;= state.<span class="hljs-property">todos</span>.<span class="hljs-property">length</span>) {
      <span class="hljs-keyword">return</span> state;
    }

    <span class="hljs-comment">// å¤åˆ¶åŸå§‹ä»»åŠ¡æ•°ç»„ï¼Œé¿å…ç›´æ¥ä¿®æ”¹state</span>
    <span class="hljs-keyword">let</span> newTodos = [...state.<span class="hljs-property">todos</span>];

    <span class="hljs-comment">// å…³é”®ï¼šæŒ‰é€‰ä¸­ä»»åŠ¡åœ¨åŸå§‹æ•°ç»„ä¸­çš„é¡ºåºé‡æ–°æ’åº</span>
    <span class="hljs-comment">// é€šè¿‡findIndexåŒ¹é…idï¼Œç¡®ä¿æ’åºä¸åŸå§‹ä½ç½®ä¸€è‡´</span>
    <span class="hljs-keyword">let</span> tempSelectedTodos = [...state.<span class="hljs-property">selectedTodos</span>].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> newTodos.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span> === a.<span class="hljs-property">id</span>) - newTodos.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span> === b.<span class="hljs-property">id</span>);
    });

    <span class="hljs-comment">// åˆ›å»ºé€‰ä¸­ä»»åŠ¡IDé›†åˆï¼Œç”¨äºå¿«é€Ÿè¿‡æ»¤éé€‰ä¸­ä»»åŠ¡</span>
    <span class="hljs-keyword">const</span> selectedTodoIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(tempSelectedTodos.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span>));

    <span class="hljs-comment">// ä»åŸå§‹æ•°ç»„ä¸­ç§»é™¤æ‰€æœ‰é€‰ä¸­ä»»åŠ¡ï¼Œå¾—åˆ°éé€‰ä¸­ä»»åŠ¡æ•°ç»„</span>
    <span class="hljs-keyword">const</span> nonSelectedTodos = newTodos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !selectedTodoIds.<span class="hljs-title function_">has</span>(todo.<span class="hljs-property">id</span>));

    <span class="hljs-comment">// è®¡ç®—é€‰ä¸­ä»»åŠ¡åœ¨éé€‰ä¸­æ•°ç»„ä¸­çš„å®é™…æ’å…¥ä½ç½®</span>
    <span class="hljs-comment">// åŸç†ï¼šé€šè¿‡ç›®æ ‡ä½ç½®çš„ä»»åŠ¡IDï¼Œæ‰¾åˆ°å…¶åœ¨éé€‰ä¸­æ•°ç»„ä¸­çš„ç´¢å¼•</span>
    <span class="hljs-keyword">let</span> actualDestinationIndex = nonSelectedTodos.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span> === state.<span class="hljs-property">todos</span>[destinationIndex].<span class="hljs-property">id</span>);

    <span class="hljs-comment">// ç¡®ä¿ç›®æ ‡ä½ç½®ä¸è¶…å‡ºéé€‰ä¸­æ•°ç»„èŒƒå›´</span>
    actualDestinationIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(actualDestinationIndex, nonSelectedTodos.<span class="hljs-property">length</span>);

    <span class="hljs-comment">// æ ¹æ®ç§»åŠ¨æ–¹å‘å¾®è°ƒç›®æ ‡ä½ç½®ï¼šUPè¡¨ç¤ºå‘ä¸Šç§»åŠ¨ï¼Œéœ€å°†æ’å…¥ä½ç½®åç§»ä¸€ä½</span>
    <span class="hljs-keyword">if</span>(direction === <span class="hljs-string">'UP'</span>){
      actualDestinationIndex++;
    }

    <span class="hljs-comment">// é‡ç»„æ•°ç»„ï¼šå°†é€‰ä¸­ä»»åŠ¡æ•´ä½“æ’å…¥ç›®æ ‡ä½ç½®</span>
    <span class="hljs-keyword">const</span> resultTodos = [
      ...nonSelectedTodos.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, actualDestinationIndex), <span class="hljs-comment">// ç›®æ ‡ä½ç½®å‰çš„éé€‰ä¸­ä»»åŠ¡</span>
      ...tempSelectedTodos, <span class="hljs-comment">// é€‰ä¸­ä»»åŠ¡æ•´ä½“æ’å…¥</span>
      ...nonSelectedTodos.<span class="hljs-title function_">slice</span>(actualDestinationIndex) <span class="hljs-comment">// ç›®æ ‡ä½ç½®åçš„éé€‰ä¸­ä»»åŠ¡</span>
    ];

    <span class="hljs-comment">// è¿”å›æ–°çŠ¶æ€ï¼Œä¿æŒé€‰ä¸­çŠ¶æ€æ–¹ä¾¿ç”¨æˆ·ç»§ç»­æ“ä½œ</span>
    <span class="hljs-keyword">return</span> {
      ...state,
      <span class="hljs-attr">todos</span>: resultTodos,
      <span class="hljs-attr">selectedTodos</span>: [...state.<span class="hljs-property">selectedTodos</span>],
    }
  }
</code></pre>
<h3 data-id="heading-4">1.3 é…å¥—Actionåˆ›å»ºå‡½æ•°</h3>
<p>ä¸ºäº†åœ¨ç»„ä»¶ä¸­è°ƒç”¨æ‰¹é‡æ’åºé€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå¯¹åº”çš„actionåˆ›å»ºå‡½æ•°ï¼Œå°†ç›®æ ‡ä½ç½®å’Œç§»åŠ¨æ–¹å‘ä½œä¸ºå‚æ•°ä¼ é€’ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‰¹é‡é‡æ–°æ’åºä»»åŠ¡çš„actionåˆ›å»ºå‡½æ•°</span>
<span class="hljs-attr">batchReorderTodos</span>: <span class="hljs-function">(<span class="hljs-params">destinationIndex, direction</span>) =&gt;</span> {
  <span class="hljs-title function_">dispatch</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">BATCH_REORDER_TODOS</span>,
    <span class="hljs-attr">payload</span>: { destinationIndex, direction },
  });
},
</code></pre>
<h2 data-id="heading-5">ç¬¬äºŒæ­¥ï¼šä¼˜åŒ–useDropçš„hoveräº‹ä»¶ï¼ŒåŒºåˆ†æ‹–åŠ¨ç±»å‹</h2>
<p>useDropé’©å­çš„hoveräº‹ä»¶æ˜¯å¤„ç†â€œæ”¾ç½®æ¥æ”¶â€çš„å…³é”®â€”â€”å½“æ‹–æ‹½çš„ä»»åŠ¡æ‚¬åœåœ¨ç›®æ ‡ä»»åŠ¡ä¸Šæ—¶ï¼Œéœ€è¦å®æ—¶è®¡ç®—ä½ç½®å¹¶è§¦å‘æ’åºã€‚æˆ‘ä»¬åœ¨æ­¤å¤„æ·»åŠ â€œæ˜¯å¦ä¸ºæ‰¹é‡æ‹–åŠ¨â€çš„åˆ¤æ–­ï¼Œåˆ†åˆ«æ‰§è¡Œå•ä¸ªå’Œæ‰¹é‡æ’åºé€»è¾‘ã€‚</p>
<h3 data-id="heading-6">2.1 æ ¸å¿ƒäº¤äº’é€»è¾‘</h3>
<p>hoveräº‹ä»¶çš„æ ¸å¿ƒéœ€æ±‚æ˜¯â€œç²¾å‡†åˆ¤æ–­æ’å…¥ä½ç½®â€ï¼š</p>
<ul>
<li>æ‰¹é‡æ‹–åŠ¨æ—¶ï¼šæ ¹æ®é¼ æ ‡åœ¨ç›®æ ‡ä»»åŠ¡ä¸Šçš„å‚ç›´ä½ç½®ï¼ˆä¸ŠåŠéƒ¨åˆ†/ä¸‹åŠéƒ¨åˆ†ï¼‰ï¼Œç¡®å®šæ•´ä½“æ’å…¥æ–¹å‘ï¼ˆä¸Šæ–¹/ä¸‹æ–¹ï¼‰ï¼›</li>
<li>å•ä¸ªæ‹–åŠ¨æ—¶ï¼šç›´æ¥åŒ¹é…æºä»»åŠ¡ä¸ç›®æ ‡ä»»åŠ¡çš„ä½ç½®ï¼Œæ‰§è¡Œäº¤æ¢æ’åºã€‚</li>
</ul>
<p>åŒæ—¶éœ€è¦é¿å…â€œè‡ªæˆ‘äº¤æ¢â€é—®é¢˜â€”â€”å½“æ‹–æ‹½çš„ä»»åŠ¡ä¸ç›®æ ‡ä»»åŠ¡ä¸ºåŒä¸€ä»»åŠ¡ï¼ˆå•ä¸ªæ‹–åŠ¨ï¼‰ï¼Œæˆ–ç›®æ ‡ä»»åŠ¡å±äºé€‰ä¸­ä»»åŠ¡é›†åˆï¼ˆæ‰¹é‡æ‹–åŠ¨ï¼‰æ—¶ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚</p>
<h3 data-id="heading-7">2.2 å®Œæ•´hoveräº‹ä»¶ä»£ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">hover</span>: <span class="hljs-function">(<span class="hljs-params">item, monitor</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (item.<span class="hljs-property">selected</span>) {
    <span class="hljs-comment">// åœºæ™¯ä¸€ï¼šæ‰¹é‡æ‹–æ‹½é€»è¾‘</span>
    <span class="hljs-comment">// é¿å…å°†é€‰ä¸­ä»»åŠ¡æ‹–åˆ°è‡ªèº«é›†åˆå†…</span>
    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">selectedTodos</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">selectedTodo</span> =&gt;</span> selectedTodo.<span class="hljs-property">id</span> === todo.<span class="hljs-property">id</span>)) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// è·å–ç›®æ ‡ä»»åŠ¡åœ¨åŸå§‹æ•°ç»„ä¸­çš„ç´¢å¼•</span>
    <span class="hljs-keyword">const</span> destinationIndex = todos.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">oneTodo</span> =&gt;</span> oneTodo.<span class="hljs-property">id</span> === todo.<span class="hljs-property">id</span>);

    <span class="hljs-comment">// è®¡ç®—é¼ æ ‡åœ¨ç›®æ ‡ä»»åŠ¡å…ƒç´ ä¸Šçš„å‚ç›´åç§»é‡</span>
    <span class="hljs-comment">// monitor.getClientOffset().yï¼šé¼ æ ‡åœ¨è§†å£ä¸­çš„Yåæ ‡</span>
    <span class="hljs-comment">// divRef.current.getBoundingClientRect().topï¼šç›®æ ‡å…ƒç´ é¡¶éƒ¨åœ¨è§†å£ä¸­çš„Yåæ ‡</span>
    <span class="hljs-keyword">const</span> hoverOffset = monitor.<span class="hljs-title function_">getClientOffset</span>().<span class="hljs-property">y</span> - divRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span>;
    <span class="hljs-comment">// ç›®æ ‡å…ƒç´ çš„åŠé«˜ï¼Œä½œä¸ºåˆ¤æ–­æ’å…¥æ–¹å‘çš„é˜ˆå€¼</span>
    <span class="hljs-keyword">const</span> halfHeight = divRef.<span class="hljs-property">current</span>.<span class="hljs-property">offsetHeight</span> / <span class="hljs-number">2</span>;

    <span class="hljs-keyword">if</span> (hoverOffset &gt; halfHeight) {
      <span class="hljs-comment">// é¼ æ ‡åœ¨ç›®æ ‡å…ƒç´ ä¸‹åŠéƒ¨åˆ†ï¼šå°†é€‰ä¸­ä»»åŠ¡æ’å…¥åˆ°ç›®æ ‡å…ƒç´ ä¸‹æ–¹</span>
      <span class="hljs-title function_">batchReorderTodos</span>(destinationIndex, <span class="hljs-string">'UP'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// é¼ æ ‡åœ¨ç›®æ ‡å…ƒç´ ä¸ŠåŠéƒ¨åˆ†ï¼šå°†é€‰ä¸­ä»»åŠ¡æ’å…¥åˆ°ç›®æ ‡å…ƒç´ ä¸Šæ–¹</span>
      <span class="hljs-title function_">batchReorderTodos</span>(destinationIndex, <span class="hljs-string">'DOWN'</span>);
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// åœºæ™¯äºŒï¼šå•ä¸ªæ‹–æ‹½é€»è¾‘</span>
    <span class="hljs-comment">// é¿å…ä»»åŠ¡è‡ªæˆ‘äº¤æ¢</span>
    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">id</span> === todo.<span class="hljs-property">id</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å…³é”®ï¼šé€šè¿‡IDè·å–å®æ—¶ç´¢å¼•ï¼Œè€Œéä¾èµ–åˆå§‹ç´¢å¼•ï¼ˆé¿å…å¿«é€Ÿæ‹–æ‹½å¯¼è‡´çš„ç´¢å¼•æ··ä¹±ï¼‰</span>
    <span class="hljs-keyword">const</span> sourceIndex = todos.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">oneTodo</span> =&gt;</span> oneTodo.<span class="hljs-property">id</span> === item.<span class="hljs-property">id</span>);
    <span class="hljs-keyword">const</span> destinationIndex = todos.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">oneTodo</span> =&gt;</span> oneTodo.<span class="hljs-property">id</span> === todo.<span class="hljs-property">id</span>);

    <span class="hljs-comment">// æ‰§è¡Œå•ä¸ªä»»åŠ¡æ’åº</span>
    <span class="hljs-title function_">reorderTodos</span>(sourceIndex, destinationIndex);
  }
},
</code></pre>
<h3 data-id="heading-8">2.3 å…³é”®æŠ€æœ¯ç‚¹è§£æ</h3>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæœ‰ä¸¤ä¸ªææ˜“è¸©å‘çš„æŠ€æœ¯ç‚¹éœ€è¦é‡ç‚¹å…³æ³¨ï¼š</p>
<ol>
<li><strong>ç´¢å¼•è·å–æ–¹å¼</strong>ï¼šæ”¾å¼ƒâ€œä¾èµ–åˆå§‹ç´¢å¼•â€çš„æ–¹å¼ï¼Œæ”¹ç”¨<code>findIndex</code>é€šè¿‡ä»»åŠ¡IDè·å–å®æ—¶ç´¢å¼•ã€‚è¿™æ˜¯å› ä¸ºå¿«é€Ÿæ‹–æ‹½è¿‡ç¨‹ä¸­ï¼Œä»»åŠ¡æ•°ç»„é¡ºåºä¼šåŠ¨æ€å˜åŒ–ï¼Œåˆå§‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Œè€ŒIDä½œä¸ºå”¯ä¸€æ ‡è¯†èƒ½ç¡®ä¿ç´¢å¼•ç²¾å‡†ã€‚</li>
<li><strong>æ‰¹é‡æ‹–åŠ¨çš„ä½ç½®åˆ¤æ–­</strong>ï¼šé€šè¿‡â€œé¼ æ ‡å‚ç›´åç§»é‡+å…ƒç´ åŠé«˜â€çš„ç»„åˆï¼Œå®ç°â€œhoverä¸ŠåŠéƒ¨åˆ†æ’ä¸Šæ–¹ï¼Œhoverä¸‹åŠéƒ¨åˆ†æ’ä¸‹æ–¹â€çš„è‡ªç„¶äº¤äº’ã€‚è¿™ç§è®¾è®¡ç¬¦åˆç”¨æˆ·ç›´è§‰ï¼Œé¿å…äº†â€œæ‹–æ‹½åˆ°ä»»åŠ¡è¾¹ç¼˜æ—¶ä½ç½®åˆ¤æ–­æ¨¡ç³Šâ€çš„é—®é¢˜ã€‚</li>
</ol>
<h2 data-id="heading-9">åŠŸèƒ½é—­ç¯ï¼šä»æ‹–åŠ¨åˆ°æ”¾ç½®çš„äº¤äº’ä¼˜åŒ–</h2>
<p>é€šè¿‡æ–°å¢æ‰¹é‡æ’åºæ“ä½œå’Œä¼˜åŒ–hoveräº‹ä»¶é€»è¾‘ï¼Œæˆ‘ä»¬å®Œæˆäº†Todoä»»åŠ¡æ‹–æ‹½çš„å®Œæ•´åŠŸèƒ½é—­ç¯ã€‚å®é™…ä½¿ç”¨ä¸­ï¼Œç”¨æˆ·å¯é€šè¿‡ä»¥ä¸‹æµç¨‹å®Œæˆæ‹–æ‹½æ“ä½œï¼š</p>
<ol>
<li>å•ä¸ªä»»åŠ¡æ‹–æ‹½ï¼šç›´æ¥æ‹–åŠ¨ç›®æ ‡ä»»åŠ¡ï¼Œæ‚¬åœåˆ°ç›®æ ‡ä½ç½®å³å¯å®Œæˆæ’åºï¼›</li>
<li>æ‰¹é‡ä»»åŠ¡æ‹–æ‹½ï¼šå…ˆé€‰ä¸­å¤šä¸ªä»»åŠ¡ï¼ˆå¯é€šè¿‡Ctrl/Shifté”®è¾…åŠ©ï¼‰ï¼Œæ‹–åŠ¨ä»»æ„é€‰ä¸­ä»»åŠ¡ï¼Œæ•´ä½“æ‚¬åœåˆ°ç›®æ ‡ä½ç½®ï¼Œæ ¹æ®é¼ æ ‡ä½ç½®å®Œæˆæ‰¹é‡æ’å…¥ã€‚</li>
</ol>
<p>è¿™ç§å®ç°æ–¹å¼æ—¢ä¿è¯äº†æ“ä½œçš„çµæ´»æ€§ï¼Œåˆé€šè¿‡è¾¹ç•Œæ ¡éªŒï¼ˆå¦‚è¶Šç•Œåˆ¤æ–­ã€è‡ªæˆ‘äº¤æ¢æ’é™¤ï¼‰ç¡®ä¿äº†åŠŸèƒ½çš„ç¨³å®šæ€§ã€‚ä¸‹å›¾ä¸ºæ‰¹é‡æ‹–æ‹½çš„å®é™…æ•ˆæœæ¼”ç¤ºï¼š</p>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>æœ¬æ–‡é€šè¿‡â€œæ‰¹é‡æ’åºæ“ä½œå°è£…+hoveräº‹ä»¶ç±»å‹åŒºåˆ†â€çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œè§£å†³äº†Todoä»»åŠ¡æ‹–æ‹½ä¸­â€œæ”¾ç½®æ¥æ”¶â€çš„æ ¸å¿ƒé—®é¢˜ã€‚æ ¸å¿ƒäº®ç‚¹åœ¨äºï¼š</p>
<ul>
<li>ç”¨IDä½œä¸ºç´¢å¼•åŒ¹é…çš„å”¯ä¸€æ ‡è¯†ï¼Œé¿å…äº†åŠ¨æ€æ’åºä¸­çš„ç´¢å¼•æ··ä¹±é—®é¢˜ï¼›</li>
<li>æ‰¹é‡æ’åºæ—¶ä¿æŒé€‰ä¸­é¡¹çš„åŸå§‹é¡ºåºï¼Œç¬¦åˆç”¨æˆ·æ“ä½œé¢„æœŸï¼›</li>
<li>åŸºäºé¼ æ ‡ä½ç½®çš„ç²¾ç»†åˆ¤æ–­ï¼Œæå‡äº†æ‹–æ‹½äº¤äº’çš„æµç•…æ€§ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œäº‘å¯è§‚æµ‹ 2025 å¹´ 10 æœˆäº§å“åŠ¨æ€]]></title>    <link>https://juejin.cn/post/7574245788948496399</link>    <guid>https://juejin.cn/post/7574245788948496399</guid>    <pubDate>2025-11-19T08:32:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574245788948496399" data-draft-id="7573989365615329280" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œäº‘å¯è§‚æµ‹ 2025 å¹´ 10 æœˆäº§å“åŠ¨æ€"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-11-19T08:32:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œäº‘å¯è§‚æµ‹ 2025 å¹´ 10 æœˆäº§å“åŠ¨æ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:32:50.000Z" title="Wed Nov 19 2025 08:32:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœ¬æœˆå¯è§‚æµ‹çƒ­æ–‡å›é¡¾</h2>
<p><strong>æ–‡ç« ä¸€è§ˆï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247578952%26idx%3D1%26sn%3Dd37f4a402cafc39fdbb95d7c95a3b913%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247578952&amp;idx=1&amp;sn=d37f4a402cafc39fdbb95d7c95a3b913&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç”¨æˆ·è¯´â€œApp å¡æ­»äº†â€ï¼Œä½ å´æŸ¥ä¸åˆ°åŸå› ï¼Ÿå¯èƒ½æ˜¯ç›‘æ§æ–¹å¼é”™äº†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247578905%26idx%3D1%26sn%3D0681660bf43f99bb015af41511b74440%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247578905&amp;idx=1&amp;sn=0681660bf43f99bb015af41511b74440&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ¸…ç†ç¥–ä¼  AK ä¸æ€•ç‚¸é”…ï¼šåŸºäº UModel çš„äº‘ç›‘æ§ 2.0 èº«ä»½å‡­è¯è§‚æµ‹å®è·µ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247578779%26idx%3D2%26sn%3De71a751b24edf463a7b8f7514f4249a3%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247578779&amp;idx=2&amp;sn=e71a751b24edf463a7b8f7514f4249a3&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å‘Šåˆ«æ‰‹åŠ¨åŸ‹ç‚¹ï¼Android æ— ä¾µå…¥å¼æ•°æ®é‡‡é›†æ–¹æ¡ˆæ·±åº¦è§£æ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247578672%26idx%3D1%26sn%3Da5894d77679325b085e257b1143f4bfc%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247578672&amp;idx=1&amp;sn=a5894d77679325b085e257b1143f4bfc&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä»æ•°æ®å­¤å²›åˆ°æ™ºèƒ½æ´å¯Ÿï¼šæ„å»ºé¢å‘æœªæ¥çš„ Operation intelligence ä½“ç³»</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247578672%26idx%3D2%26sn%3D0b4184ef524dd80f78630ccd5d66d258%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247578672&amp;idx=2&amp;sn=0b4184ef524dd80f78630ccd5d66d258&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä»â€œå¤©ä¹¦â€åˆ°æºç ï¼šHarmonyOS NEXT å´©æºƒå †æ ˆè§£æå®æˆ˜æŒ‡å—</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247578606%26idx%3D2%26sn%3Dd2f5f7e216c2055533dc164beba3f6be%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247578606&amp;idx=2&amp;sn=d2f5f7e216c2055533dc164beba3f6be&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘åŠ æŒï¼Œã€Šæ³¡å§†æ³¡å§†ã€‹è®©å…¨çƒç©å®¶ç•…äº«é›¶å»¶è¿Ÿå†’é™©</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247578603%26idx%3D1%26sn%3D32042269250cb2a8cc475a789e0b24ba%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247578603&amp;idx=1&amp;sn=32042269250cb2a8cc475a789e0b24ba&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">16 å€æ€§èƒ½æå‡ï¼Œæˆæœ¬é™ä½ 98%ï¼ è§£è¯» SLS å‘é‡ç´¢å¼•æ¶æ„å‡çº§æ”¹é€ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247578445%26idx%3D1%26sn%3D6b2b1fff767580b31412319163cbc0fd%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247578445&amp;idx=1&amp;sn=6b2b1fff767580b31412319163cbc0fd&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç§»åŠ¨ç«¯æ€§èƒ½ç›‘æ§æ¢ç´¢ï¼šiOS RUM SDK æŠ€æœ¯æ¶æ„ä¸å®è·µ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwODY2NTk0OQ%3D%3D%26mid%3D2247485489%26idx%3D1%26sn%3D1b44928dab36242369be1f238429c279%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwODY2NTk0OQ==&amp;mid=2247485489&amp;idx=1&amp;sn=1b44928dab36242369be1f238429c279&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">äº‘æ –å®å½•ï¼šé‡æ„å¯è§‚æµ‹ - æ‰“é€ å¤§æ¨¡å‹é©±åŠ¨çš„äº‘ç›‘æ§ 2.0 ä¸ AIOps æ–°èŒƒå¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwODY2NTk0OQ%3D%3D%26mid%3D2247485489%26idx%3D3%26sn%3D155788294b7b280405c852d2b216bf97%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwODY2NTk0OQ==&amp;mid=2247485489&amp;idx=3&amp;sn=155788294b7b280405c852d2b216bf97&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç§»åŠ¨ç«¯æ€§èƒ½ç›‘æ§æ¢ç´¢ï¼šå¯è§‚æµ‹ Android é‡‡é›†æ¢é’ˆæ¶æ„ä¸å®ç°</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247578325%26idx%3D1%26sn%3D3453c36c2f865111aa5fdcfda575bb19%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247578325&amp;idx=1&amp;sn=3453c36c2f865111aa5fdcfda575bb19&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é›¶ä»£ç æ”¹é€  + å…¨é“¾è·¯è¿½è¸ªï¼Spring AI æœ€æ–°å¯è§‚æµ‹æ€§è¯¦ç»†è§£è¯»</a></p>
<h2 data-id="heading-1">åŠŸèƒ½å¿«æŠ¥</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1e98e29d3554e01be4ab83e5120f22d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764145970&amp;x-signature=3j6k%2BRJxmSFbtiA%2B%2B9d0bRfE7sA%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Farms" target="_blank" title="https://www.aliyun.com/product/arms" ref="nofollow noopener noreferrer">æ­¤å¤„</a>ï¼Œäº†è§£æ›´å¤šäº§å“è¯¦æƒ…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è®­ç»ƒä½ çš„å¤§è¯­è¨€æ¨¡å‹ï¼šä½¿ç”¨ Unsloth è¿›è¡Œä½ç§©é€‚é…å¾®è°ƒï¼]]></title>    <link>https://juejin.cn/post/7574253222606094377</link>    <guid>https://juejin.cn/post/7574253222606094377</guid>    <pubDate>2025-11-19T08:41:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574253222606094377" data-draft-id="7574041466710818859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è®­ç»ƒä½ çš„å¤§è¯­è¨€æ¨¡å‹ï¼šä½¿ç”¨ Unsloth è¿›è¡Œä½ç§©é€‚é…å¾®è°ƒï¼"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-19T08:41:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è®­ç»ƒä½ çš„å¤§è¯­è¨€æ¨¡å‹ï¼šä½¿ç”¨ Unsloth è¿›è¡Œä½ç§©é€‚é…å¾®è°ƒï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:41:34.000Z" title="Wed Nov 19 2025 08:41:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¾®è°ƒå°±åƒè®­ç»ƒä¸€æ¡é¾™ã€‚å›¾ç‰‡ç”±ChatGPTæ ¹æ®ä½œè€…æç¤ºç”Ÿæˆ è®­ç»ƒå¤§è¯­è¨€æ¨¡å‹çš„ä½“éªŒï¼Œå¾ˆåƒåœ¨ã€Šé©¯é¾™é«˜æ‰‹ã€‹é‡Œæ•™â€œæ— ç‰™â€ï¼ˆToothlessï¼‰é£è¡Œï¼šâ€œæ— ç‰™â€æ— ç–‘æ˜¯æ¡å¼ºå¤§çš„é¾™ï¼Œä½†å®ƒå°‘äº†ä¸€åªå°¾ç¿¼ï¼›åŒç†ï¼ŒåŸºç¡€å¤§è¯­è¨€æ¨¡å‹çœ‹ä¼¼åŠŸèƒ½å¼ºå¤§ï¼Œä½†è‹¥æœªç»è®­ç»ƒã€æ— æ³•è·å–ä½ çš„é¢†åŸŸçŸ¥è¯†ï¼Œå°±å®¹æ˜“å‡ºç°â€œå¹»è§‰â€ï¼ˆç”Ÿæˆè™šå‡ä¿¡æ¯ï¼‰ï¼Œç»™å‡ºä¸å¯é çš„å›å¤ã€‚</p>
<p>æˆ‘ä»¬çš„æœŸæœ›æ˜¯ä»€ä¹ˆï¼Ÿå¸Œæœ›é€šè¿‡å°‘é‡å¾®è°ƒï¼Œè®©æ¨¡å‹å­¦ä¹ ä½ çš„æ•°æ®â€”â€”æœ€ç»ˆåœ¨éœ€è¦æ—¶èƒ½â€œç²¾å‡†å’¬åˆâ€ï¼ˆè¾“å‡ºç¬¦åˆéœ€æ±‚çš„ç»“æœï¼‰ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä¸€æ­¥æ­¥æ‹†è§£å¾®è°ƒæµç¨‹ï¼šä»æ•°æ®é›†å‡†å¤‡åˆ°è®­ç»ƒæ‰§è¡Œï¼Œå¹¶åˆ†äº«å®é™…æ“ä½œä¸­çš„ç»“æœã€‚å‰§é€ä¸€ä¸‹ï¼šç¬¬ä¸€æ¬¡å°è¯•å¹¶æ²¡æœ‰â€œå–·ç«â€èˆ¬çš„æƒŠè‰³æ•ˆæœï¼Œä½†è¿™æ­£æ˜¯å®éªŒæœ€æœ‰æ„æ€çš„åœ°æ–¹ã€‚</p>
<p>æ‰€æœ‰ä»£ç å‡å¯åœ¨æˆ‘çš„GitHubä»“åº“ä¸­è·å–ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆèŠèŠå¤§è¯­è¨€æ¨¡å‹å¾®è°ƒ</h2>
<p>è¿™éƒ¨åˆ†å†…å®¹è‡³å…³é‡è¦ï¼Œåœ¨å†™ä¸€è¡Œä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æ·±å…¥æ¢è®¨ä¸€ä¸‹ã€‚</p>
<p>å¤§è¯­è¨€æ¨¡å‹çš„å¾®è°ƒï¼Œå’Œå…¶ä»–AIæ¨¡å‹çš„å¾®è°ƒæˆªç„¶ä¸åŒã€‚å› ä¸ºå¤§è¯­è¨€æ¨¡å‹åœ¨è§„æ¨¡å’Œèƒ½åŠ›ä¸Šéƒ½ç‹¬æ ‘ä¸€å¸œï¼šå®ƒä»¬é€šè¿‡æµ·é‡æ–‡æœ¬è¯­æ–™è®­ç»ƒï¼Œèƒ½å¤Ÿå½¢æˆå¯¹è¯­è¨€çš„ç†è§£èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-1">1. å¤§è¯­è¨€æ¨¡å‹çš„â€œç†è§£èƒ½åŠ›â€</h3>
<p>éšä¾¿é—®ChatGPTè¥¿å…°èŠ±çš„å¥åº·ç›Šå¤„ï¼Œä½ éƒ½ä¼šä¸ºä¹‹æƒŠå¹â€”â€”å®ƒçš„å›ç­”ä¸ä»…å¿«é€Ÿã€å‡†ç¡®ï¼Œè¿˜å¸¦æœ‰æƒŠäººçš„ç»†èŠ‚ä¸°å¯Œåº¦ã€‚</p>
<p>å¤§è¯­è¨€æ¨¡å‹çš„èƒ½åŠ›ç”šè‡³å¯ä»¥å»¶ä¼¸åˆ°â€œæ¨ç†â€ï¼šå°¤å…¶å½“å®ƒä»¬åœ¨åŒ…å«â€œæ€ç»´é“¾â€ï¼ˆChain-of-Thought, CoTï¼‰æ¨ç†çš„æ•°æ®é›†ä¸Šè®­ç»ƒæ—¶ï¼Œæ¨ç†èƒ½åŠ›ä¼šæ›´çªå‡ºã€‚å¦‚ä»Šï¼Œå¤§å¤šæ•°ä¸»æµå¤§è¯­è¨€æ¨¡å‹éƒ½èå…¥äº†è¿™ç±»å¤æ‚çš„è®­ç»ƒæœºåˆ¶ã€‚</p>
<p>ä¸è¿‡ï¼Œå¤§è¯­è¨€æ¨¡å‹å¾®è°ƒä»æ˜¯ä¸€ä¸ªå­˜åœ¨äº‰è®®çš„è¯é¢˜ï¼Œå­¦æœ¯è®ºæ–‡ä¸­æ”¯æŒä¸åå¯¹çš„è§‚ç‚¹å¹¶å­˜ã€‚ä¸€äº›ç ”ç©¶è­¦å‘Šï¼Œå¾®è°ƒå¯èƒ½å¯¼è‡´â€œç¾éš¾æ€§é—å¿˜â€ï¼ˆæ¨¡å‹å¿˜è®°åŸæœ‰çŸ¥è¯†ï¼‰ã€å®‰å…¨æŠ¤æ å¼±åŒ–ã€å¹»è§‰é£é™©å¢åŠ ä»¥åŠéšç§é—®é¢˜ï¼›æ›´ä»¤äººæ‹…å¿§çš„æ˜¯ï¼Œåœ¨æ•™æ¨¡å‹å­¦ä¹ ç‰¹å®šé¢†åŸŸçŸ¥è¯†æ—¶ï¼Œå¯èƒ½ä¼šæ— æ„é—´è®©å®ƒä¸§å¤±æ¨ç†èƒ½åŠ›ã€‚å°½ç®¡æœ‰ç ”ç©¶æå‡ºäº†ç¼“è§£è¿™äº›é—®é¢˜çš„æŠ€æœ¯ï¼Œä½†æŒç»­çš„äº‰è®®è¡¨æ˜ï¼Œè§£å†³æ–¹æ¡ˆå¹¶éé‚£ä¹ˆç®€å•ã€‚</p>
<h3 data-id="heading-2">2. å¾®è°ƒçš„æ ¸å¿ƒçªç ´ï¼šå‚æ•°é«˜æ•ˆå¾®è°ƒï¼ˆPEFTï¼‰</h3>
<p>å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒé¢†åŸŸçš„ä¸€é¡¹é‡å¤§çªç ´ï¼Œæ˜¯â€œå‚æ•°é«˜æ•ˆå¾®è°ƒâ€ï¼ˆParameter-Efficient Fine-Tuning, PEFTï¼‰ã€‚è¿™æ˜¯ä¸€ç§è¶³ä»¥è®©äººæ‹æ¡ˆå«ç»çš„â€œè·¨æ—¶ä»£æ€è·¯â€ï¼Œå¦‚ä»Šå·²è¢«å¿«é€Ÿçº³å…¥å¼€æºæ¡†æ¶ï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒã€‚</p>
<p>å¤§è¯­è¨€æ¨¡å‹çš„è§„æ¨¡æ­£åœ¨é£é€Ÿå¢é•¿ã€‚ä¾‹å¦‚ï¼ŒMetaçš„Llama 4 Behemothæ¨¡å‹æ®ç§°æ‹¥æœ‰2ä¸‡äº¿ä¸ªå‚æ•°ï¼Œæå°‘æœ‰æœºæ„èƒ½æ‹¥æœ‰é‡è®­è¿™ç±»è¶…å¤§æ¨¡å‹çš„è®¡ç®—èµ„æºã€‚æ­¤å¤–ï¼Œä¸ºæ¯ä¸ªä¸‹æ¸¸ä»»åŠ¡å•ç‹¬å­˜å‚¨å’Œéƒ¨ç½²å¾®è°ƒæ¨¡å‹çš„æˆæœ¬æé«˜â€”â€”å› ä¸ºæ¯ä¸ªå¾®è°ƒæ¨¡å‹çš„è§„æ¨¡å‡ ä¹ä¸åŸå§‹æ¨¡å‹ç›¸å½“ã€‚</p>
<p>PEFTçš„ç›®æ ‡å°±æ˜¯è§£å†³è¿™ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå‚æ•°è´Ÿæ‹…ä¸éƒ¨ç½²æˆæœ¬ï¼ŒåŒæ—¶ä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£å‰æ–‡æåˆ°çš„é£é™©ï¼ˆå°½ç®¡äº‰è®®è¡¨æ˜æ•ˆæœå‚å·®ä¸é½ï¼‰ã€‚PEFTæŠ€æœ¯ä»…å¯¹å°‘é‡æ–°å¢å‚æ•°è¿›è¡Œå¾®è°ƒï¼Œè€Œå°†é¢„è®­ç»ƒæ¨¡å‹çš„å¤§éƒ¨åˆ†å‚æ•°â€œå†»ç»“â€ï¼ˆä¸æ›´æ–°ï¼‰ï¼Œè¿™å¤§å¤§é™ä½äº†è®¡ç®—å’Œå­˜å‚¨éœ€æ±‚ã€‚</p>
<h3 data-id="heading-3">3. ä½ç§©é€‚é…ï¼ˆLoRAï¼‰ç™»åœº</h3>
<p>åœ¨å„ç±»PEFTæ–¹æ³•ä¸­ï¼Œâ€œä½ç§©é€‚é…â€ï¼ˆLow-Rank Adaptation, LoRAï¼‰æ˜¯ç›®å‰åº”ç”¨æœ€å¹¿æ³›çš„ä¸€ç§ã€‚å®ƒä¸æ›´æ–°æ¨¡å‹çš„æ‰€æœ‰æƒé‡ï¼Œè€Œæ˜¯å†»ç»“é¢„è®­ç»ƒæ¨¡å‹çš„å‚æ•°ï¼Œé€šè¿‡æ³¨å…¥å¯è®­ç»ƒçš„ä½ç§©çŸ©é˜µï¼Œå®ç°ä»»åŠ¡ç‰¹å®šçš„å­¦ä¹ ã€‚</p>
<p>LoRAçš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p>
<ul>
<li>Â <strong>ç¡®å®šç›®æ ‡å±‚</strong>ï¼šLoRAé€šå¸¸åº”ç”¨äºçº¿æ€§å±‚ï¼ˆä¾‹å¦‚Transformeræ³¨æ„åŠ›æœºåˆ¶ä¸­çš„æŸ¥è¯¢å±‚ã€é”®å±‚ã€å€¼å±‚å’Œè¾“å‡ºæŠ•å½±å±‚ï¼‰ï¼›</li>
<li>Â <strong>æ·»åŠ ä½ç§©çŸ©é˜µ</strong>ï¼šå¯¹äºæ¯ä¸ªå†»ç»“çš„ç›®æ ‡æƒé‡çŸ©é˜µWâ‚€ï¼ŒLoRAå¼•å…¥ä¸¤ä¸ªæ›´å°çš„çŸ©é˜µAå’ŒBï¼Œä½¿å¾—å®ƒä»¬çš„ä¹˜ç§¯BAå…·æœ‰è¾ƒä½çš„ç§©rï¼ˆrè¿œå°äºWâ‚€çš„ç»´åº¦ï¼‰ï¼›</li>
<li>Â <strong>è®­ç»ƒä½ç§©çŸ©é˜µ</strong>ï¼šå¾®è°ƒè¿‡ç¨‹ä¸­ï¼Œä»…æ›´æ–°çŸ©é˜µAå’ŒBçš„å‚æ•°ï¼ŒåŸå§‹æƒé‡Wâ‚€ä¿æŒä¸å˜ï¼Œæœ€ç»ˆçš„æœ‰æ•ˆæƒé‡çŸ©é˜µä¸ºW = Wâ‚€ + BAï¼›</li>
<li>Â <strong>æ¨ç†æ—¶å¯é€‰åˆå¹¶çŸ©é˜µ</strong>ï¼šè®­ç»ƒå®Œæˆåï¼Œå¯å°†ä½ç§©çŸ©é˜µBAåˆå¹¶å›åŸå§‹æƒé‡çŸ©é˜µWâ‚€ï¼Œå½¢æˆæ–°çš„æƒé‡çŸ©é˜µWã€‚è¿™æ„å‘³ç€ï¼Œæ¨ç†æ—¶çš„è®¡ç®—é‡ä¸å…¨é‡å¾®è°ƒæ¨¡å‹å®Œå…¨ä¸€è‡´ï¼Œæ— éœ€é¢å¤–å¼€é”€ã€‚</li>
</ul>
<h3 data-id="heading-4">4. LoRAä¼šå½±å“å¤§è¯­è¨€æ¨¡å‹çš„æ¿€æ´»å€¼å—ï¼Ÿ</h3>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚ä½ç§©çŸ©é˜µAå’ŒBç”¨äºè®¡ç®—åŸå§‹æƒé‡çŸ©é˜µçš„æ›´æ–°é‡ï¼ˆBAï¼‰ï¼›å½“è¾“å…¥ç»è¿‡LoRAé€‚é…å±‚æ—¶ï¼Œè¾“å‡ºç»“æœï¼ˆä»¥åŠåç»­çš„æ¿€æ´»å€¼ï¼‰ä¼šä¸æœªé€‚é…çš„åŸå§‹æ¨¡å‹äº§ç”Ÿå·®å¼‚ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼ŒLoRAé€šè¿‡æ³¨å…¥å¯è®­ç»ƒçš„ä½ç§©çŸ©é˜µï¼Œä¿®æ”¹äº†å¤§è¯­è¨€æ¨¡å‹çš„æœ‰æ•ˆæƒé‡ã€‚è¿™äº›ä¿®æ”¹åçš„æƒé‡ä¼šåœ¨æ¨ç†æ—¶äº§ç”Ÿæ–°çš„æ¿€æ´»æ¨¡å¼â€”â€”ä¸”è¿™ç§æ¨¡å¼æ˜¯é’ˆå¯¹ç‰¹å®šä»»åŠ¡å®šåˆ¶çš„ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒè¾ƒä½çš„è®¡ç®—å’Œå†…å­˜æˆæœ¬ã€‚è¿™æ˜¯ä¸€ç§å®ç”¨ã€ç²¾å¦™çš„ä¼˜åŒ–æ‰‹æ®µï¼Œæ­£åœ¨é‡å¡‘å¤§è¯­è¨€æ¨¡å‹çš„å®é™…åº”ç”¨æ–¹å¼ã€‚</p>
<h3 data-id="heading-5">5. è¦ä¸è¦å¾®è°ƒï¼Ÿå…³é”®çœ‹æ¨¡å‹è§„æ¨¡</h3>
<p>åœ¨æˆ‘çœ‹æ¥ï¼Œå¾®è°ƒçš„æ”¶ç›Šåœ¨â€œå°å‹å¤§è¯­è¨€æ¨¡å‹â€ä¸Šä½“ç°å¾—æœ€æ˜æ˜¾ã€‚è¿™ç±»æ¨¡å‹é€šå¸¸é€šè¿‡â€œçŸ¥è¯†è’¸é¦â€ä»æ›´å¤§è§„æ¨¡çš„â€œå…„å¼Ÿæ¨¡å‹â€ä¸­å­¦ä¹ ï¼šå°½ç®¡èƒ½ç»§æ‰¿åŸºç¡€çš„è¯­è¨€ç†è§£èƒ½åŠ›ï¼Œä½†æ·±åº¦å’Œå¹¿åº¦å¾€å¾€ä¸åŠå¤§å‹æ¨¡å‹ã€‚</p>
<p>ä½†è¿™ä¸€ç‚¹åè€Œå¯èƒ½æˆä¸ºä¼˜åŠ¿ã€‚å®è¯ç ”ç©¶è¡¨æ˜ï¼Œå°å‹å¤§è¯­è¨€æ¨¡å‹çš„â€œç¾éš¾æ€§é—å¿˜â€ç°è±¡æ›´è½»å¾®â€”â€”å¾®è°ƒæ—¶è¦†ç›–åŸæœ‰é¢„è®­ç»ƒçŸ¥è¯†çš„é£é™©æ›´ä½ã€‚ä½œä¸ºå›æŠ¥ï¼Œä½ åªéœ€ä»˜å‡ºè¿œä½äºå¤§å‹æ¨¡å‹çš„è®­ç»ƒã€éƒ¨ç½²å’Œæ¨ç†æˆæœ¬ï¼Œå°±èƒ½è·å¾—æ¨¡å‹çš„â€œé¢†åŸŸç‰¹å®šèƒ½åŠ›â€ã€‚</p>
<p>é‚£ä¹ˆï¼Œâ€œå°å‹â€å…·ä½“æŒ‡å¤šå¤§ï¼Ÿåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å¾®è°ƒLlama 3.2 10äº¿å‚æ•°æ¨¡å‹ï¼ˆLlama 3.2 1bnï¼‰â€”â€”å®ƒæ˜¯ç›®å‰ä¸»æµå¤§è¯­è¨€æ¨¡å‹ä¸­ï¼Œè§„æ¨¡è¾ƒå°ä½†èƒ½åŠ›è¶³å¤Ÿçš„ä»£è¡¨ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-6">äºŒã€æ­¥éª¤1ï¼šæ„å»ºè®­ç»ƒé›†ä¸æµ‹è¯•é›†</h2>
<p>å…³äºå¤§è¯­è¨€æ¨¡å‹å¾®è°ƒï¼Œæœ‰ä¸€ä¸ªå¸¸è§è¯¯åŒºï¼šâ€œè®­ç»ƒæ•°æ®æ°¸è¿œä¸å¤Ÿâ€ã€‚ä½†äº‹å®å¹¶éå¦‚æ­¤â€”â€”å› ä¸ºä½ å®Œå…¨å¯ä»¥ç”¨å¦ä¸€ä¸ªå¤§è¯­è¨€æ¨¡å‹æ¥ç”Ÿæˆè®­ç»ƒæ•°æ®ï¼</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥æ­å»º notebook ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ./notebooks/training_dataset_gen.ipynb  </span>
  
<span class="hljs-keyword">import</span>Â nest_asyncio  
nest_asyncio.apply()  
  
<span class="hljs-keyword">from</span>Â llama_index.coreÂ <span class="hljs-keyword">import</span>Â SimpleDirectoryReader  
<span class="hljs-keyword">from</span>Â llama_index.core.llama_dataset.generatorÂ <span class="hljs-keyword">import</span>Â RagDatasetGenerator  
<span class="hljs-keyword">from</span>Â llama_index.llms.ollamaÂ <span class="hljs-keyword">import</span>Â Ollama  
  
<span class="hljs-comment"># åˆ›å»ºæ•°æ®ç›®å½•å¹¶ä¸‹è½½ç¤ºä¾‹æ–‡æ¡£ï¼ˆå…³äºâ€œéä¼ ç»Ÿèµ„è´¨â€çš„è®ºæ–‡ï¼‰  </span>
!mkdir Â -p ../data  
!wgetÂ <span class="hljs-string">"https://arxiv.org/pdf/2405.00247.pdf"</span>Â -OÂ <span class="hljs-string">"../data/non_traditional_credentials.pdf"</span>  
  
<span class="hljs-comment"># åŠ è½½æ–‡æ¡£  </span>
docs = SimpleDirectoryReader(<span class="hljs-string">"../data/"</span>).load_data(show_progress=<span class="hljs-literal">True</span>)
</code></pre>
<p>æˆ‘ä»¬å°†ä½¿ç”¨LlamaIndexçš„<code>RagDatasetGenerator</code>å·¥å…·æ¥æ„å»ºæ•°æ®é›†ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ./notebooks/training_dataset_gen.ipynb  </span>
  
<span class="hljs-attr">data_gen</span> = RagDatasetGenerator.from_documents(  
Â  Â  docs,  
Â  Â  <span class="hljs-attr">llm</span>=Ollama(<span class="hljs-string">"qwen2.5"</span>),Â  <span class="hljs-comment"># ä½¿ç”¨Qwen 2.5æ¨¡å‹ç”Ÿæˆæ•°æ®  </span>
Â  Â  <span class="hljs-comment"># ç”ŸæˆæŒ‡ä»¤ï¼šæ¨¡æ‹Ÿæ•™å¸ˆ/æ•™æˆï¼ŒåŸºäºæ–‡æ¡£ä¸Šä¸‹æ–‡ç”Ÿæˆ1ä¸ªé—®é¢˜åŠå¯¹åº”ç­”æ¡ˆ  </span>
Â  Â  <span class="hljs-attr">question_gen_query</span>=<span class="hljs-string">"You are a teacher/professor. Using the provided context, formulate a single question and its answer"</span>,  
Â  Â  <span class="hljs-attr">num_questions_per_chunk</span>=<span class="hljs-number">10</span>Â  <span class="hljs-comment"># æ¯ä¸ªæ–‡æ¡£ç‰‡æ®µç”Ÿæˆ10ä¸ªé—®é¢˜  </span>
)  
<span class="hljs-comment"># ä»æ–‡æ¡£èŠ‚ç‚¹ç”Ÿæˆé—®ç­”æ•°æ®é›†  </span>
<span class="hljs-attr">qa_dataset</span> = data_gen.generate_dataset_from_nodes()
</code></pre>
<p>ğŸ’¡Â <strong>å®ç”¨æŠ€å·§</strong>ï¼šç”Ÿæˆé—®ç­”å¯¹æ—¶ï¼Œä»¥åŠè¯„ä¼°å¾…å¾®è°ƒçš„å°å‹æ¨¡å‹æ€§èƒ½æ—¶ï¼Œä¸€å®šè¦ç”¨æ›´å¼ºå¤§ï¼ˆè§„æ¨¡æ›´å¤§ï¼‰çš„å¤§è¯­è¨€æ¨¡å‹ã€‚å¦‚æœè¿™ä¸ªâ€œå¼ºæ¨¡å‹â€å¯¹å°å‹æ¨¡å‹çš„è¾“å‡ºæ»¡æ„ï¼Œå°±è¯´æ˜ä½ æˆåŠŸæ‰“é€ äº†ä¸€ä¸ªâ€œå°è€Œå¼ºâ€çš„ç´§å‡‘æ¨¡å‹ã€‚</p>
<p>ä¸ºäº†é¿å…APIè°ƒç”¨æ¬¡æ•°é™åˆ¶å’Œé™ä½æˆæœ¬ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨æœ¬åœ°éƒ¨ç½²çš„Qwen 2.5 7Bæ¨¡å‹ç”Ÿæˆè®­ç»ƒæ•°æ®â€”â€”å®ƒçš„èƒ½åŠ›è¶³ä»¥æ”¯æ’‘æ•°æ®ç”Ÿæˆï¼Œä¸”æ— éœ€æ‰¿æ‹…è°ƒç”¨äº‘ç«¯APIçš„é¢å¤–å¼€é”€ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œä¿ç•™é›†ï¼ˆç”¨äºåç»­è¯„ä¼°ï¼‰ï¼Œå¹¶å°†ä¿ç•™é›†å¯¼å‡ºä¸ºCSVæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ./notebooks/training_dataset_gen.ipynb  </span>
  
<span class="hljs-keyword">from</span>Â sklearn.model_selectionÂ <span class="hljs-keyword">import</span>Â train_test_split  
<span class="hljs-keyword">from</span>Â llama_index.core.llama_datasetÂ <span class="hljs-keyword">import</span>Â LabelledRagDataset  
<span class="hljs-keyword">import</span>Â json  
<span class="hljs-keyword">import</span>Â pandasÂ <span class="hljs-keyword">as</span>Â pd  
  
<span class="hljs-comment"># æå–æ‰€æœ‰ç¤ºä¾‹  </span>
all_examples = qa_dataset.examples  
<span class="hljs-comment"># æŒ‰8:2æ¯”ä¾‹åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼ˆéšæœºç§å­ç¡®ä¿å¯å¤ç°ï¼‰  </span>
train_examples, test_examples = train_test_split(  
Â  Â  all_examples,  
Â  Â  test_size=<span class="hljs-number">0.2</span>,Â  Â  Â  Â  Â  <span class="hljs-comment"># 20%æ•°æ®ä½œä¸ºä¿ç•™é›†  </span>
Â  Â  random_state=<span class="hljs-number">42</span>,Â  Â  Â  Â  <span class="hljs-comment"># éšæœºç§å­ï¼Œä¿è¯ç»“æœå¯å¤ç°  </span>
Â  Â  shuffle=<span class="hljs-literal">True</span>  
)  
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®­ç»ƒé›†æ ·æœ¬æ•°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(train_examples)}</span>ï¼Œæµ‹è¯•é›†æ ·æœ¬æ•°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(test_examples)}</span>"</span>)  
  
<span class="hljs-comment"># æ„å»ºå¸¦æ ‡ç­¾çš„RAGæ•°æ®é›†  </span>
training_dataset = LabelledRagDataset(examples=train_examples)  
holdout_dataset = LabelledRagDataset(examples=test_examples)  
  
<span class="hljs-comment"># å°†ä¿ç•™é›†è½¬æ¢ä¸ºDataFrameå¹¶å¯¼å‡ºä¸ºCSV  </span>
records = []  
<span class="hljs-keyword">for</span>Â exÂ <span class="hljs-keyword">in</span>Â holdout_dataset.examples:  
Â  Â  records.append({  
Â  Â  Â  Â  <span class="hljs-string">"query"</span>: ex.query,  
Â  Â  Â  Â  <span class="hljs-comment"># å¯¹å‚è€ƒä¸Šä¸‹æ–‡åˆ—è¡¨è¿›è¡ŒJSONç¼–ç   </span>
Â  Â  Â  Â  <span class="hljs-string">"reference_contexts"</span>: json.dumps(ex.reference_contexts),  
Â  Â  Â  Â  <span class="hljs-string">"reference_answer"</span>: ex.reference_answer,  
Â  Â  Â  Â  <span class="hljs-comment"># å¯¹CreatedByå¯¹è±¡è¿›è¡ŒJSONç¼–ç   </span>
Â  Â  Â  Â  <span class="hljs-string">"query_by"</span>: ex.query_by.model_dump_json(),  
Â  Â  Â  Â  <span class="hljs-string">"reference_answer_by"</span>: ex.reference_answer_by.model_dump_json(),  
Â  Â  })  
  
df = pd.DataFrame.from_records(records)  
df.to_csv(<span class="hljs-string">"holdout_dataset.csv"</span>, index=<span class="hljs-literal">False</span>)  
  
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®­ç»ƒé›†æ ·æœ¬æ•°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(train_examples)}</span>ï¼Œæµ‹è¯•é›†æ ·æœ¬æ•°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(test_examples)}</span>"</span>)
</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬å°†è®­ç»ƒé›†åºåˆ—åŒ–ä¸ºè®­ç»ƒæ‰€éœ€çš„JSONLæ ¼å¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ./notebooks/training_dataset_gen.ipynb  </span>
  
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">serialize_to_jsonl</span>(<span class="hljs-params">examples, out_path=<span class="hljs-string">"train.jsonl"</span></span>):  
Â  Â  <span class="hljs-string">"""  
Â  Â  å°†å¸¦æ ‡ç­¾çš„RAGæ•°æ®ç¤ºä¾‹åºåˆ—åŒ–ä¸ºJSONLæ ¼å¼  
Â  Â  å‚æ•°ï¼š  
Â  Â  Â  Â  examples: LabelledRagDataExampleåˆ—è¡¨ï¼Œæ¯ä¸ªç¤ºä¾‹åŒ…å«.queryå’Œ.reference_answerå­—æ®µ  
Â  Â  Â  Â  out_path: JSONLæ–‡ä»¶çš„è¾“å‡ºè·¯å¾„  
Â  Â  """</span>  
Â  Â  <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">strip_prefix</span>(<span class="hljs-params">text</span>):  
Â  Â  Â  Â  <span class="hljs-comment"># ç§»é™¤æ–‡æœ¬å¼€å¤´çš„"**Question:**"æˆ–"**Answer:**"å‰ç¼€ï¼ˆè‹¥å­˜åœ¨ï¼‰  </span>
Â  Â  Â  Â  <span class="hljs-keyword">for</span>Â pÂ <span class="hljs-keyword">in</span>Â (<span class="hljs-string">"**Question:**"</span>,Â <span class="hljs-string">"**Answer:**"</span>):  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span>Â text.strip().startswith(p):  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â text.strip()[<span class="hljs-built_in">len</span>(p):].strip()  
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â text  
  
Â  Â  <span class="hljs-keyword">with</span>Â <span class="hljs-built_in">open</span>(out_path,Â <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf8"</span>)Â <span class="hljs-keyword">as</span>Â f:  
Â  Â  Â  Â  <span class="hljs-keyword">for</span>Â exÂ <span class="hljs-keyword">in</span>Â examples:  
Â  Â  Â  Â  Â  Â  q_raw = ex.queryÂ <span class="hljs-keyword">or</span>Â <span class="hljs-string">""</span>  
Â  Â  Â  Â  Â  Â  a_raw =Â <span class="hljs-built_in">getattr</span>(ex,Â <span class="hljs-string">"reference_answer"</span>,Â <span class="hljs-literal">None</span>)  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># ä»…åºåˆ—åŒ–åŒ…å«"Question"å‰ç¼€ä¸”æœ‰ç­”æ¡ˆçš„ç¤ºä¾‹  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span>Â q_raw.lower().startswith(<span class="hljs-string">"**question"</span>)Â <span class="hljs-keyword">and</span>Â a_raw:  
Â  Â  Â  Â  Â  Â  Â  Â  q = strip_prefix(q_raw)  
Â  Â  Â  Â  Â  Â  Â  Â  a = a_raw.strip()  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># æ„å»ºç¬¦åˆæ ¼å¼çš„æ¶ˆæ¯å¯¹è±¡  </span>
Â  Â  Â  Â  Â  Â  Â  Â  obj = {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-string">"messages"</span>: [  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,Â  Â  Â  <span class="hljs-string">"content"</span>: q},  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"assistant"</span>,Â <span class="hljs-string">"content"</span>: a}  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ]  
Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  Â  Â  f.write(json.dumps(obj, ensure_ascii=<span class="hljs-literal">False</span>) +Â <span class="hljs-string">"\n"</span>)  
  
<span class="hljs-comment"># åºåˆ—åŒ–è®­ç»ƒé›†  </span>
serialize_to_jsonl(train_examples)
</code></pre>
<p>å¤§åŠŸå‘Šæˆï¼æˆ‘ä»¬çš„è®­ç»ƒé›†å·²ç»å‡†å¤‡å¥½äº†ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€æ­¥éª¤2ï¼šå…ˆè¯„ä¼°â€œæœªå¾®è°ƒâ€çš„åŸºç¡€æ¨¡å‹æ€§èƒ½</h2>
<p>åœ¨å¼€å§‹å¾®è°ƒå‰ï¼Œå¿…é¡»å…ˆè¯„ä¼°åŸºç¡€æ¨¡å‹çš„â€œåŸç”Ÿæ€§èƒ½â€â€”â€”è¿™æ˜¯é‡è¦çš„åŸºå‡†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¹‹å‰ä¿å­˜çš„ä¿ç•™é›†ï¼Œè¿›è¡Œä¸€æ¬¡ç®€å•çš„â€œæ£€ç´¢å¢å¼ºç”Ÿæˆâ€ï¼ˆRAGï¼‰è¯„ä¼°ã€‚</p>
<h3 data-id="heading-8">1. åŠ è½½ä¿ç•™é›†ï¼ˆä»CSVæ–‡ä»¶ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ./notebooks/training_dataset_gen.ipynb  </span>
  
<span class="hljs-keyword">from</span>Â llama_index.core.llama_datasetÂ <span class="hljs-keyword">import</span>Â (  
Â  Â  LabelledRagDataset,  
Â  Â  LabelledRagDataExample,  
Â  Â  CreatedBy,  
)  
  
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_rag_dataset_from_csv</span>(<span class="hljs-params">csv_path:Â <span class="hljs-built_in">str</span></span>):  
Â  Â  <span class="hljs-string">"""ä»CSVæ–‡ä»¶åŠ è½½å¸¦æ ‡ç­¾çš„RAGæ•°æ®é›†"""</span>  
Â  Â  <span class="hljs-comment"># å®šä¹‰CSVåˆ—çš„è½¬æ¢å™¨ï¼ˆå¤„ç†JSONæ ¼å¼æ•°æ®ï¼‰  </span>
Â  Â  converters = {  
Â  Â  Â  Â  <span class="hljs-string">"reference_contexts"</span>:Â  Â  <span class="hljs-keyword">lambda</span>Â s: json.loads(s),  
Â  Â  Â  Â  <span class="hljs-string">"query_by"</span>:Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">lambda</span>Â s: CreatedBy.model_validate_json(s),  
Â  Â  Â  Â  <span class="hljs-string">"reference_answer_by"</span>:Â  <span class="hljs-keyword">lambda</span>Â s: CreatedBy.model_validate_json(s),  
Â  Â  }  
Â  Â  <span class="hljs-comment"># è¯»å–CSVæ–‡ä»¶  </span>
Â  Â  df = pd.read_csv(csv_path, converters=converters)  
Â  Â  examples = []  
Â  Â  <span class="hljs-keyword">for</span>Â _, rowÂ <span class="hljs-keyword">in</span>Â df.iterrows():  
Â  Â  Â  Â  <span class="hljs-comment"># æ„å»ºLabelledRagDataExampleå¯¹è±¡  </span>
Â  Â  Â  Â  examples.append(  
Â  Â  Â  Â  Â  Â  LabelledRagDataExample(  
Â  Â  Â  Â  Â  Â  Â  Â  query=row[<span class="hljs-string">"query"</span>],  
Â  Â  Â  Â  Â  Â  Â  Â  query_by=row[<span class="hljs-string">"query_by"</span>],Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># è½¬æ¢ä¸ºCreatedByå¯¹è±¡  </span>
Â  Â  Â  Â  Â  Â  Â  Â  reference_contexts=row[<span class="hljs-string">"reference_contexts"</span>],Â  Â <span class="hljs-comment"># è½¬æ¢ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨  </span>
Â  Â  Â  Â  Â  Â  Â  Â  reference_answer=row[<span class="hljs-string">"reference_answer"</span>],  
Â  Â  Â  Â  Â  Â  Â  Â  reference_answer_by=row[<span class="hljs-string">"reference_answer_by"</span>],Â <span class="hljs-comment"># è½¬æ¢ä¸ºCreatedByå¯¹è±¡  </span>
Â  Â  Â  Â  Â  Â  )  
Â  Â  Â  Â  )  
Â  Â  <span class="hljs-comment"># æ„å»ºå¹¶è¿”å›å¸¦æ ‡ç­¾çš„RAGæ•°æ®é›†  </span>
Â  Â  dataset = LabelledRagDataset(examples=examples)  
Â  Â  <span class="hljs-keyword">return</span>Â dataset  
  
<span class="hljs-comment"># åŠ è½½ä¿ç•™é›†  </span>
holdout_dataset = get_rag_dataset_from_csv(<span class="hljs-string">"holdout_dataset.csv"</span>)
</code></pre>
<h3 data-id="heading-9">2. æ„å»ºRAGå¼•æ“</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ./notebooks/training_dataset_gen.ipynb  </span>
  
fromÂ llama_index.embeddings.ollamaÂ importÂ OllamaEmbedding  
fromÂ llama_index.llms.ollamaÂ importÂ Ollama  
fromÂ llama_index.coreÂ importÂ VectorStoreIndex  
  
<span class="hljs-comment"># åˆå§‹åŒ–åµŒå…¥æ¨¡å‹ï¼ˆç”¨äºæ–‡æœ¬å‘é‡è½¬æ¢ï¼‰  </span>
<span class="hljs-attr">embed_model</span> = OllamaEmbedding(model_name=<span class="hljs-string">"nomic-embed-text"</span>)  
<span class="hljs-comment"># ä»æ–‡æ¡£æ„å»ºå‘é‡å­˜å‚¨ç´¢å¼•  </span>
<span class="hljs-attr">index</span> = VectorStoreIndex.from_documents(docs, embed_model=embed_model)  
<span class="hljs-comment"># æ„å»ºæŸ¥è¯¢å¼•æ“ï¼ˆä½¿ç”¨å¾…å¾®è°ƒçš„åŸºç¡€æ¨¡å‹Llama 3.2 1Bï¼‰  </span>
<span class="hljs-attr">query_engine</span> = index.as_query_engine(  
Â  Â  Â  <span class="hljs-attr">similarity_top_k</span>=<span class="hljs-number">6</span>,Â  <span class="hljs-comment"># æ£€ç´¢Top 6ä¸ªç›¸ä¼¼æ–‡æ¡£ç‰‡æ®µ  </span>
Â  Â  Â  <span class="hljs-attr">llm</span>=Ollama(<span class="hljs-string">"llama3.2:1b"</span>)Â  <span class="hljs-comment"># åŸºç¡€æ¨¡å‹ï¼ˆåç»­å°†å¾®è°ƒæ­¤æ¨¡å‹ï¼‰  </span>
)
</code></pre>
<h3 data-id="heading-10">3. æ‰§è¡ŒRAGè¯„ä¼°</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ./notebooks/training_dataset_gen.ipynb  </span>
  
fromÂ llama_index.core.llama_packÂ importÂ download_llama_pack  
  
<span class="hljs-comment"># ä¸‹è½½RAGè¯„ä¼°å·¥å…·åŒ…  </span>
<span class="hljs-attr">RagEvaluatorPack</span> = download_llama_pack(<span class="hljs-string">"RagEvaluatorPack"</span>,Â <span class="hljs-string">"./pack"</span>)  
<span class="hljs-comment"># åˆå§‹åŒ–è¯„ä¼°å™¨  </span>
<span class="hljs-attr">rag_evaluator</span> = RagEvaluatorPack(  
Â  Â  <span class="hljs-attr">query_engine</span>=query_engine,Â   
Â  Â  <span class="hljs-attr">rag_dataset</span>=holdout_dataset,  
Â  Â  <span class="hljs-comment"># ä½¿ç”¨ç”Ÿæˆæ•°æ®é›†æ—¶çš„åŒä¸€æ¨¡å‹ï¼ˆQwen 2.5ï¼‰ä½œä¸ºè¯„ä¼°è£åˆ¤  </span>
Â  Â  <span class="hljs-attr">judge_llm</span>=Ollama(<span class="hljs-string">"qwen2.5"</span>, request_timeout=<span class="hljs-number">120.0</span>),  
Â  Â  <span class="hljs-attr">embed_model</span>=OllamaEmbedding(model_name=<span class="hljs-string">"nomic-embed-text"</span>)  
)  
<span class="hljs-comment"># è¿è¡Œè¯„ä¼°å¹¶è·å–ç»“æœ  </span>
<span class="hljs-attr">benchmark_df</span> = rag_evaluator.run()
</code></pre>
<p>è¯„ä¼°æŒ‡æ ‡è¯´æ˜ï¼š</p>
<ul>
<li>â€¢ â€œæ­£ç¡®æ€§â€ï¼ˆCorrectnessï¼‰ï¼šè¯„åˆ†èŒƒå›´ä¸º1-5åˆ†ï¼›</li>
<li>â€¢ å…¶ä»–æŒ‡æ ‡ï¼ˆå¦‚ç›¸å…³æ€§ã€å¿ å®åº¦ã€æµç•…åº¦ï¼‰ï¼šè¯„åˆ†èŒƒå›´ä¸º0-1åˆ†ã€‚</li>
</ul>
<p>æ•´ä½“æ¥çœ‹ï¼ŒåŸºç¡€æ¨¡å‹çš„è¡¨ç°ä¸ç®—å·®ï¼Œä½†â€œå¿ å®åº¦â€ï¼ˆFaithfulnessï¼‰å¾—åˆ†æ˜æ˜¾åä½â€”â€”è¿™æ˜¯ä¸€ä¸ªå…³é”®çŸ­æ¿ã€‚</p>
<p>â€œå¿ å®åº¦â€è¡¡é‡çš„æ˜¯ç”Ÿæˆå›ç­”ä¸æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¹‹é—´çš„â€œäº‹å®ä¸€è‡´æ€§â€ï¼šåªæœ‰å½“å›ç­”ä¸­çš„æ¯ä¸€ä¸ªä¸»å¼ éƒ½èƒ½è¢«æ£€ç´¢ä¸Šä¸‹æ–‡ç›´æ¥æ”¯æŒæ—¶ï¼Œæ‰ç®—â€œå¿ å®â€ã€‚å¿ å®åº¦ä½ï¼Œæ„å‘³ç€æ¨¡å‹å­˜åœ¨â€œå¹»è§‰â€ï¼ˆç”Ÿæˆæ— ä¾æ®å†…å®¹ï¼‰æˆ–â€œè¿‡åº¦æ³›åŒ–â€ï¼ˆè¶…å‡ºä¸Šä¸‹æ–‡èŒƒå›´æ¨æ–­ï¼‰çš„é—®é¢˜â€”â€”è¿™æ­£æ˜¯æˆ‘ä»¬å¸Œæœ›é€šè¿‡å¾®è°ƒè§£å†³çš„æ ¸å¿ƒç—›ç‚¹ã€‚</p>
<h2 data-id="heading-11">å››ã€æ­¥éª¤3ï¼šç»ˆäºåˆ°å¾®è°ƒç¯èŠ‚ï¼</h2>
<p>æ¥ä¸‹æ¥å°±æ˜¯æœ€æœ‰è¶£çš„éƒ¨åˆ†ï¼šå¾®è°ƒï¼è¿™é‡Œè¦ä»‹ç»ä¸€ä¸ªéå¸¸å‡ºè‰²çš„æ¡†æ¶â€”â€”Unsloth.aiã€‚</p>
<p>Unslothçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼Œå®ƒé€šè¿‡æ‰‹åŠ¨æ¨å¯¼åå‘ä¼ æ’­æ­¥éª¤ï¼Œç»•å¼€äº†PyTorchçš„æ ‡å‡†è‡ªåŠ¨æ±‚å¯¼ï¼ˆautogradï¼‰ç³»ç»Ÿã€‚è¿™ç§ä¼˜åŒ–å¤§å¹…é™ä½äº†è®¡ç®—éœ€æ±‚ï¼Œæ˜¾è‘—åŠ å¿«äº†è®­ç»ƒé€Ÿåº¦ï¼Œéå¸¸é€‚åˆåœ¨æœ¬åœ°æˆ–èµ„æºæœ‰é™çš„ç¡¬ä»¶ä¸Šè¿è¡Œã€‚</p>
<p>éœ€è¦æ˜ç¡®çš„æ˜¯ï¼ŒUnsloth.aiçš„æ ¸å¿ƒåˆ›æ–°å¹¶éâ€œæ›¿ä»£è®­ç»ƒæ¡†æ¶â€ï¼Œè€Œæ˜¯â€œä¼˜åŒ–LLMæ¨¡å—â€â€”â€”ä¸“é—¨é’ˆå¯¹PEFTå¾®è°ƒåœºæ™¯è¿›è¡Œæ”¹å†™ã€‚äº‹å®ä¸Šï¼ŒUnslothçš„å¤§å¤šæ•°ç¤ºä¾‹ä»£ç ï¼ˆcookbookï¼‰éƒ½èƒ½åœ¨å…è´¹çš„Google Colabå®ä¾‹ä¸Šè¿è¡Œï¼Œç”šè‡³èƒ½å¾®è°ƒå‚æ•°è§„æ¨¡è¾¾140äº¿çš„æ¨¡å‹ï¼</p>
<p>å®é™…å¾®è°ƒè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»ä¼šä½¿ç”¨Hugging Faceçš„â€œTransformerå¼ºåŒ–å­¦ä¹ â€ï¼ˆTRLï¼‰æ¡†æ¶â€”â€”è¿™æ˜¯ä¸€ä¸ªåŸºäºPyTorchçš„é«˜å±‚æŠ½è±¡æ¡†æ¶ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>â€¢ ç›‘ç£å¼å¾®è°ƒï¼ˆåŒ…æ‹¬æ¨ç†å¯†é›†å‹æ•°æ®é›†ï¼‰ï¼›</li>
<li>â€¢ PEFTï¼ˆå‚æ•°é«˜æ•ˆå¾®è°ƒï¼‰æ–¹æ³•ï¼›</li>
<li>â€¢ åŸºäºå¼ºåŒ–å­¦ä¹ çš„å¾®è°ƒï¼ˆå¦‚GRPOï¼‰ã€‚</li>
</ul>
<p>Unslothä¸TRLçš„ç»„åˆï¼Œä¸ºèµ„æºæœ‰é™åœºæ™¯ä¸‹çš„å¤§è¯­è¨€æ¨¡å‹è®­ç»ƒæä¾›äº†é«˜æ•ˆä¸”çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-12">1. åŠ è½½æ•°æ®é›†ä¸æ¨¡å‹</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ./notebooks/finetune_llama32_1bn.ipynb  </span>
  
importÂ json  
fromÂ datasetsÂ importÂ Dataset  
fromÂ unslothÂ importÂ FastLanguageModel  
importÂ torch  
  
<span class="hljs-comment"># åŠ è½½æ•°æ®é›†ï¼ˆæ·»åŠ ç³»ç»Ÿæç¤ºè¯ï¼‰  </span>
defÂ load_messages_with_system(path, <span class="hljs-attr">system_content</span>=<span class="hljs-string">"You are a helpful assistant."</span>):  
Â  Â  <span class="hljs-attr">examples</span> = []  
Â  Â  withÂ open(path,Â 'r', <span class="hljs-attr">encoding</span>=<span class="hljs-string">'utf8'</span>)Â asÂ f:  
Â  Â  Â  Â  forÂ lineÂ inÂ f:  
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">obj</span> = json.loads(line)  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># æ„å»ºç³»ç»Ÿæç¤ºè¯æ¶ˆæ¯  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">sys_msg</span> = {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"system"</span>,Â <span class="hljs-string">"content"</span>: system_content}  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># è·å–ç”¨æˆ·-åŠ©æ‰‹æ¶ˆæ¯å¯¹  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">ua_msgs</span> = obj.get(<span class="hljs-string">"messages"</span>, [])  
Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># ç»„åˆç³»ç»Ÿæ¶ˆæ¯ä¸ç”¨æˆ·-åŠ©æ‰‹æ¶ˆæ¯  </span>
Â  Â  Â  Â  Â  Â  examples.append({"messages": <span class="hljs-section">[sys_msg]</span> + ua_msgs})  
Â  Â  returnÂ examples  
  
<span class="hljs-comment"># åŠ è½½è®­ç»ƒé›†ï¼ˆJSONLæ ¼å¼ï¼‰  </span>
<span class="hljs-attr">examples</span> = load_messages_with_system(<span class="hljs-string">"train.jsonl"</span>)  
<span class="hljs-comment"># è½¬æ¢ä¸ºHugging Face Datasetæ ¼å¼  </span>
<span class="hljs-attr">dataset</span> = Dataset.from_list(examples)  
  
<span class="hljs-comment"># åŠ è½½æ¨¡å‹ä¸åˆ†è¯å™¨ï¼ˆä½¿ç”¨Unslothçš„FastLanguageModelåŒ…è£…å™¨ï¼‰  </span>
model, <span class="hljs-attr">tokenizer</span> = FastLanguageModel.from_pretrained(  
Â  Â  <span class="hljs-attr">model_name</span>=<span class="hljs-string">"unsloth/Llama-3.2-1B-Instruct"</span>,Â  <span class="hljs-comment"># Unslothé¢„è®­ç»ƒçš„Llama 3.2 1Bæ¨¡å‹  </span>
Â  Â  <span class="hljs-attr">max_seq_length</span>=<span class="hljs-number">2048</span>,Â  <span class="hljs-comment"># é•¿ä¸Šä¸‹æ–‡é•¿åº¦ï¼ˆå¯æŒ‰éœ€è®¾ç½®ï¼‰  </span>
Â  Â  <span class="hljs-attr">load_in_4bit</span>=<span class="hljs-literal">True</span>,Â  Â <span class="hljs-comment"># 4ä½é‡åŒ–ï¼Œå‡å°‘å†…å­˜å ç”¨  </span>
Â  Â  <span class="hljs-attr">load_in_8bit</span>=<span class="hljs-literal">False</span>,Â  <span class="hljs-comment"># 8ä½é‡åŒ–ï¼ˆç²¾åº¦ç•¥é«˜ï¼Œä½†å†…å­˜å ç”¨ç¿»å€ï¼‰  </span>
Â  Â  <span class="hljs-attr">full_finetuning</span>=<span class="hljs-literal">False</span>,Â  <span class="hljs-comment"># å…³é—­å…¨é‡å¾®è°ƒï¼ˆå¯ç”¨PEFTï¼‰  </span>
)
</code></pre>
<p>æ­¥éª¤è¯´æ˜ï¼š</p>
<ul>
<li>â€¢ é¦–å…ˆå°†JSONLæ ¼å¼çš„è®­ç»ƒé›†åŠ è½½ä¸ºHugging Face Datasetæ ¼å¼ï¼›</li>
<li>â€¢ ç„¶åé€šè¿‡Unslothçš„<code>FastLanguageModel</code>åŒ…è£…å™¨åŠ è½½åŸºç¡€æ¨¡å‹ä¸åˆ†è¯å™¨â€”â€”<code>model_name</code>å‚æ•°å¯¹åº”Unslothåœ¨Hugging Face Hubä¸Šå‘å¸ƒçš„æ¨¡å‹ï¼Œå¯æ ¹æ®éœ€æ±‚æµè§ˆå¹¶é€‰æ‹©å…¼å®¹æ¨¡å‹ã€‚</li>
</ul>
<h3 data-id="heading-13">2. é…ç½®LoRAå‚æ•°ï¼ˆå¯ç”¨PEFTï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ./notebooks/finetune_llama32_1bn.ipynb  </span>
  
<span class="hljs-attr">model</span> = FastLanguageModel.get_peft_model(  
Â  Â  model,  
Â  Â  <span class="hljs-attr">r</span>=<span class="hljs-number">16</span>,Â  <span class="hljs-comment"># ä½ç§©çŸ©é˜µçš„ç§©ï¼ˆå¸¸ç”¨å€¼ï¼š8ã€16ã€32ã€64ã€128ï¼‰  </span>
Â  Â  <span class="hljs-comment"># LoRAé€‚é…çš„ç›®æ ‡å±‚ï¼ˆä¸åŒæ¨¡å‹å¯èƒ½ä¸åŒï¼Œéœ€å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼‰  </span>
Â  Â  <span class="hljs-attr">target_modules</span>=[<span class="hljs-string">"q_proj"</span>,Â <span class="hljs-string">"k_proj"</span>,Â <span class="hljs-string">"v_proj"</span>,Â <span class="hljs-string">"o_proj"</span>,  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-string">"gate_proj"</span>,Â <span class="hljs-string">"up_proj"</span>,Â <span class="hljs-string">"down_proj"</span>],  
Â  Â  <span class="hljs-attr">lora_alpha</span>=<span class="hljs-number">16</span>,Â  <span class="hljs-comment"># LoRAç¼©æ”¾å› å­  </span>
Â  Â  <span class="hljs-attr">lora_dropout</span>=<span class="hljs-number">0</span>,Â  <span class="hljs-comment"># LoRA dropoutç‡ï¼ˆè®¾ä¸º0ä»¥ä¼˜åŒ–æ€§èƒ½ï¼‰  </span>
Â  Â  <span class="hljs-attr">bias</span>=<span class="hljs-string">"none"</span>,Â  Â  Â <span class="hljs-comment"># åç½®é¡¹å¤„ç†ï¼ˆ"none"æœ€èŠ‚çœå†…å­˜ï¼‰  </span>
Â  Â  <span class="hljs-attr">use_gradient_checkpointing</span>=<span class="hljs-string">"unsloth"</span>,Â  <span class="hljs-comment"># ä½¿ç”¨Unslothæ¢¯åº¦æ£€æŸ¥ç‚¹ï¼Œå‡å°‘30%æ˜¾å­˜å ç”¨  </span>
Â  Â  <span class="hljs-attr">random_state</span>=<span class="hljs-number">3407</span>,Â  <span class="hljs-comment"># éšæœºç§å­ï¼Œä¿è¯å¯å¤ç°  </span>
Â  Â  <span class="hljs-attr">use_rslora</span>=<span class="hljs-literal">False</span>,Â  Â <span class="hljs-comment"># å…³é—­ç§©ç¨³å®šLoRAï¼ˆæŒ‰éœ€å¯ç”¨ï¼‰  </span>
Â  Â  <span class="hljs-attr">loftq_config</span>=None,Â  <span class="hljs-comment"># å…³é—­LoftQé‡åŒ–ï¼ˆæŒ‰éœ€é…ç½®ï¼‰  </span>
)
</code></pre>
<p>é€šè¿‡<code>FastLanguageModel.get_peft_model()</code>ï¼Œæˆ‘ä»¬å°†åŸºç¡€æ¨¡å‹è½¬æ¢ä¸ºæ”¯æŒPEFTçš„æ¨¡å‹ã€‚å…¶ä¸­ï¼Œ<code>target_modules</code>å®šä¹‰äº†LoRAå°†é€‚é…çš„å±‚â€”â€”ä¸åŒæ¨¡å‹çš„ç›®æ ‡å±‚å¯èƒ½ä¸åŒï¼Œå»ºè®®å‚è€ƒUnslothå®˜æ–¹ç¤ºä¾‹ä»£ç ï¼Œç¡®è®¤å¯¹åº”æ¨¡å‹çš„ç›®æ ‡å±‚è®¾ç½®ã€‚</p>
<h3 data-id="heading-14">3. æ ¼å¼åŒ–è®­ç»ƒæ•°æ®ï¼ˆé€‚é…Llama 3.2æŒ‡ä»¤æ ¼å¼ï¼‰</h3>
<p>Llama 3.2çš„æŒ‡ä»¤å¾®è°ƒéœ€è¦ç‰¹å®šçš„å¯¹è¯æ ¼å¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>begin_of_text<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>start_header_id<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span><span class="hljs-keyword">system</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>end_header_id<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span>  
  
çŸ¥è¯†æˆªæ­¢æ—¥æœŸï¼š<span class="hljs-number">2023</span>å¹´<span class="hljs-number">12</span>æœˆ  
å½“å‰æ—¥æœŸï¼š<span class="hljs-number">2025</span>å¹´<span class="hljs-number">5</span>æœˆ<span class="hljs-number">1</span>æ—¥  
  
ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„åŠ©æ‰‹ã€‚<span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>eot_id<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>start_header_id<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span><span class="hljs-keyword">user</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>end_header_id<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span>  
  
<span class="hljs-number">1</span><span class="hljs-operator">+</span><span class="hljs-number">1</span>ç­‰äºå¤šå°‘ï¼Ÿ<span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>eot_id<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>start_header_id<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span>assistant<span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>end_header_id<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span>  
  
<span class="hljs-number">2</span><span class="hljs-operator">&lt;</span><span class="hljs-operator">|</span>eot_id<span class="hljs-operator">|</span><span class="hljs-operator">&gt;</span>
</code></pre>
<p>æ³¨æ„ï¼šè¯¥æ ¼å¼æ˜¯â€œæ¨¡å‹ä¸“å±â€çš„ï¼Œä½†Unslothæä¾›äº†å¯¹è¯æ¨¡æ¿æ˜ å°„å·¥å…·ï¼Œå¯ç®€åŒ–è¿™ä¸€æ­¥éª¤ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ./notebooks/finetune_llama32_1bn.ipynb  </span>
  
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">formatting_prompts_func</span>(<span class="hljs-params">batch</span>):  
Â  Â  <span class="hljs-string">"""å°†å¯¹è¯æ¶ˆæ¯è½¬æ¢ä¸ºLlama 3.2æ‰€éœ€çš„æ ¼å¼"""</span>  
Â  Â  convos = batch[<span class="hljs-string">"messages"</span>]Â  <span class="hljs-comment"># å¯¹è¯æ¶ˆæ¯åˆ—è¡¨ï¼ˆæ¯ä¸ªå…ƒç´ æ˜¯ä¸€æ¡å¯¹è¯ï¼‰  </span>
Â  Â  <span class="hljs-comment"># åº”ç”¨åˆ†è¯å™¨çš„å¯¹è¯æ¨¡æ¿  </span>
Â  Â  texts = [  
Â  Â  Â  Â  tokenizer.apply_chat_template(convo,  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tokenize=<span class="hljs-literal">False</span>,  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  add_generation_prompt=<span class="hljs-literal">False</span>)  
Â  Â  Â  Â  <span class="hljs-keyword">for</span>Â convoÂ <span class="hljs-keyword">in</span>Â convos  
Â  Â  ]  
Â  Â  <span class="hljs-keyword">return</span>Â {<span class="hljs-string">"text"</span>: texts}  
  
<span class="hljs-comment"># æ‰¹é‡å¤„ç†æ•°æ®é›†ï¼ˆä¸åˆ é™¤åŸå§‹"messages"å­—æ®µï¼‰  </span>
dataset = dataset.<span class="hljs-built_in">map</span>(  
Â  Â  formatting_prompts_func,  
Â  Â  batched=<span class="hljs-literal">True</span>,  
)
</code></pre>
<p>ç°åœ¨ï¼Œæ•°æ®é›†å·²å®Œæˆæ ¼å¼è½¬æ¢ï¼Œå¯ç”¨äºè®­ç»ƒï¼</p>
<h3 data-id="heading-15">4. é…ç½®å¹¶å¯åŠ¨å¾®è°ƒ</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ./notebooks/finetune_llama32_1bn.ipynb  </span>
importÂ os  
fromÂ trlÂ importÂ SFTTrainer, SFTConfig  
  
<span class="hljs-comment"># åˆå§‹åŒ–ç›‘ç£å¼å¾®è°ƒï¼ˆSFTï¼‰è®­ç»ƒå™¨  </span>
<span class="hljs-attr">trainer</span> = SFTTrainer(  
Â  Â  <span class="hljs-attr">model</span>=model,  
Â  Â  <span class="hljs-attr">tokenizer</span>=tokenizer,  
Â  Â  <span class="hljs-attr">train_dataset</span>=dataset,  
Â  Â  <span class="hljs-attr">eval_dataset</span>=None,Â  <span class="hljs-comment"># å¯æŒ‰éœ€é…ç½®è¯„ä¼°é›†  </span>
Â  Â  <span class="hljs-attr">args</span>=SFTConfig(  
Â  Â  Â  Â  <span class="hljs-attr">dataset_text_field</span>=<span class="hljs-string">"text"</span>,Â  <span class="hljs-comment"># æ•°æ®é›†ä¸­æ–‡æœ¬å­—æ®µçš„åç§°  </span>
Â  Â  Â  Â  <span class="hljs-attr">per_device_train_batch_size</span>=<span class="hljs-number">2</span>,Â  <span class="hljs-comment"># å•è®¾å¤‡è®­ç»ƒæ‰¹æ¬¡å¤§å°  </span>
Â  Â  Â  Â  <span class="hljs-attr">gradient_accumulation_steps</span>=<span class="hljs-number">4</span>,Â  <span class="hljs-comment"># æ¢¯åº¦ç´¯ç§¯æ­¥æ•°ï¼ˆç”¨äºæ¨¡æ‹Ÿæ›´å¤§æ‰¹æ¬¡ï¼‰  </span>
Â  Â  Â  Â  <span class="hljs-attr">warmup_steps</span>=<span class="hljs-number">5</span>,Â  <span class="hljs-comment"># é¢„çƒ­æ­¥æ•°  </span>
Â  Â  Â  Â  <span class="hljs-attr">max_steps</span>=<span class="hljs-number">60</span>,Â  <span class="hljs-comment"># æ€»è®­ç»ƒæ­¥æ•°ï¼ˆä¹Ÿå¯æ³¨é‡Šæ­¤å‚æ•°ï¼Œè®¾ç½®num_epochs=1ï¼‰  </span>
Â  Â  Â  Â  <span class="hljs-attr">learning_rate</span>=<span class="hljs-number">2</span>e-<span class="hljs-number">4</span>,Â  <span class="hljs-comment"># å­¦ä¹ ç‡  </span>
Â  Â  Â  Â  <span class="hljs-attr">logging_steps</span>=<span class="hljs-number">1</span>,Â  <span class="hljs-comment"># æ—¥å¿—è®°å½•æ­¥æ•°  </span>
Â  Â  Â  Â  <span class="hljs-attr">optim</span>=<span class="hljs-string">"adamw_8bit"</span>,Â  <span class="hljs-comment"># ä¼˜åŒ–å™¨ï¼ˆ8ä½AdamWï¼ŒèŠ‚çœå†…å­˜ï¼‰  </span>
Â  Â  Â  Â  <span class="hljs-attr">weight_decay</span>=<span class="hljs-number">0.01</span>,Â  <span class="hljs-comment"># æƒé‡è¡°å‡ï¼ˆé˜²æ­¢è¿‡æ‹Ÿåˆï¼‰  </span>
Â  Â  Â  Â  <span class="hljs-attr">lr_scheduler_type</span>=<span class="hljs-string">"linear"</span>,Â  <span class="hljs-comment"># å­¦ä¹ ç‡è°ƒåº¦å™¨ç±»å‹  </span>
Â  Â  Â  Â  <span class="hljs-attr">seed</span>=<span class="hljs-number">2025</span>,Â  <span class="hljs-comment"># éšæœºç§å­  </span>
Â  Â  Â  Â  <span class="hljs-attr">report_to</span>=<span class="hljs-string">"none"</span>,Â  <span class="hljs-comment"># å…³é—­æ—¥å¿—ä¸ŠæŠ¥ï¼ˆå¦‚éœ€ä½¿ç”¨WandBç­‰å·¥å…·ï¼Œå¯ä¿®æ”¹æ­¤å‚æ•°ï¼‰  </span>
Â  Â  ),  
)  
<span class="hljs-comment"># å¯åŠ¨è®­ç»ƒ  </span>
<span class="hljs-attr">trainer_stats</span> = trainer.train()  
  
<span class="hljs-comment"># å°†å¾®è°ƒåçš„æ¨¡å‹æ¨é€åˆ°Hugging Face Hub  </span>
model.push_to_hub(  
Â  "tituslhy/retrained_llama32-1bn-finetuned",Â   
Â  <span class="hljs-attr">token</span>=os.environ[<span class="hljs-string">"HUGGINGFACE_ACCESS_TOKEN"</span>]Â  <span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡è·å–Hubä»¤ç‰Œ  </span>
)Â   
<span class="hljs-comment"># å°†åˆ†è¯å™¨æ¨é€åˆ°Hugging Face Hub  </span>
tokenizer.push_to_hub(  
Â  "tituslhy/retrained_llama32-1bn-finetuned",Â   
Â  <span class="hljs-attr">token</span>=os.environ[<span class="hljs-string">"HUGGINGFACE_ACCESS_TOKEN"</span>]  
)
</code></pre>
<p>è®­ç»ƒé…ç½®è¯´æ˜ï¼š</p>
<ul>
<li>â€¢ å¾®è°ƒçš„æ ¸å¿ƒæ˜¯<code>SFTConfig</code>ï¼šå®ƒæ§åˆ¶æ‰€æœ‰è®­ç»ƒå‚æ•°ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©æŒ‰â€œå›ºå®šæ­¥æ•°â€ï¼ˆ60æ­¥ï¼‰è®­ç»ƒï¼Œè€ŒéæŒ‰â€œå®Œæ•´è½®æ¬¡â€ï¼ˆepochï¼‰â€”â€”æŒ‰è½®æ¬¡è®­ç»ƒè€—æ—¶æ›´é•¿ï¼ŒæŒ‰æ­¥æ•°è®­ç»ƒæ›´é€‚åˆå¿«é€ŸåŸå‹éªŒè¯ï¼›</li>
<li>â€¢ Hugging Faceçš„TRLæ¡†æ¶å°è£…äº†PyTorchçš„åº•å±‚ç»†èŠ‚ï¼ˆå¦‚<code>zero_grad()</code>å’Œè‡ªåŠ¨æ±‚å¯¼è°ƒç”¨ï¼‰ï¼Œå› æ­¤åªéœ€ä¸€è¡Œä»£ç é…ç½®è®­ç»ƒå™¨ã€ä¸€è¡Œä»£ç å¯åŠ¨è®­ç»ƒã€‚</li>
</ul>
<p>è®­ç»ƒå¯åŠ¨åï¼Œä½ ä¼šçœ‹åˆ°Unslothæ ‡å¿—æ€§çš„æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">==((====))== Â Unsloth - 2x faster free finetuning | Num GPUs <span class="hljs-attr">used</span> = <span class="hljs-number">1</span>  
Â  Â \\ Â  /| Â  Â Num <span class="hljs-attr">examples</span> = <span class="hljs-number">16</span> | Num Epochs = <span class="hljs-number">30</span> | Total steps = <span class="hljs-number">60</span>  
O^O/ \_/ \ Â  Â Batch size per <span class="hljs-attr">device</span> = <span class="hljs-number">2</span> | Gradient accumulation steps = <span class="hljs-number">4</span>  
\ Â  Â  Â  Â / Â  Â Data Parallel <span class="hljs-attr">GPUs</span> = <span class="hljs-number">1</span> | Total batch size (<span class="hljs-number">2</span> x <span class="hljs-number">4</span> x <span class="hljs-number">1</span>) = <span class="hljs-number">8</span>  
Â "-____-" Â  Â  Trainable <span class="hljs-attr">parameters</span> = <span class="hljs-number">11</span>,<span class="hljs-number">272</span>,<span class="hljs-number">192</span>/<span class="hljs-number">1</span>,<span class="hljs-number">000</span>,<span class="hljs-number">000</span>,<span class="hljs-number">000</span> (<span class="hljs-number">1.13</span>% trained)
</code></pre>
<p>æ²¡é”™ï¼Œè¾“å‡ºé‡Œæœ‰ä¸€ä¸ªæ ‘æ‡’å›¾æ¡ˆï¼ğŸ¦¥ åœ¨10äº¿ä¸ªå‚æ•°ä¸­ï¼Œæˆ‘ä»¬ä»…è®­ç»ƒäº†1127ä¸‡ä¸ªå‚æ•°â€”â€”è¿™å°±æ˜¯LoRAä½ç§©é€‚é…çš„é­”åŠ›ã€‚</p>
<p>è®­ç»ƒå®Œæˆåï¼Œå¯é€šè¿‡<code>model.push_to_hub()</code>å°†æ¨¡å‹æ¨é€åˆ°Hugging Face Hubï¼Œæ–¹ä¾¿åç»­è°ƒç”¨ã€‚</p>
<h3 data-id="heading-16">5. ï¼ˆå¯é€‰ï¼‰æ¨é€é‡åŒ–ç‰ˆæœ¬æ¨¡å‹</h3>
<p>å¦‚æœéœ€è¦æ¨é€é‡åŒ–ç‰ˆæœ¬çš„æ¨¡å‹ï¼ŒUnslothåº•å±‚ä½¿ç”¨llama.cppå®ç°è¯¥åŠŸèƒ½ï¼ˆæ³¨æ„ï¼šéœ€ç¡®ä¿llama.cppå®‰è£…æ­£ç¡®ï¼Œæˆ‘æ›¾åœ¨æ­¤æ­¥éª¤é‡åˆ°è¿‡é—®é¢˜ï¼Œé‡æ–°å®‰è£…å‡ æ¬¡åæ‰è§£å†³ï¼‰ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ./notebooks/finetune_llama32_1bn.ipynb  </span>
model.push_to_hub_gguf(  
Â  Â  "tituslhy/retrained_llama32-1bn-finetuned",Â   
Â  Â  tokenizer,  
Â  Â  <span class="hljs-attr">quantization_method</span>=[<span class="hljs-string">"q4_k_m"</span>,Â <span class="hljs-string">"q8_0"</span>,Â <span class="hljs-string">"q5_k_m"</span>],Â  <span class="hljs-comment"># é‡åŒ–æ–¹å¼  </span>
Â  Â  <span class="hljs-attr">token</span>=os.environ[<span class="hljs-string">"HUGGINGFACE_ACCESS_TOKEN"</span>],Â   
)
</code></pre>
<p>å¦å¤–ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°æ§åˆ¶å°è¾“å‡ºæ˜¾ç¤ºâ€œ30è½®è®­ç»ƒâ€ï¼Œä½†æˆ‘ä»¬æ˜æ˜åªè®¾ç½®äº†60æ­¥â€”â€”è¿™æ˜¯å› ä¸ºè®­ç»ƒæ•°æ®é›†è§„æ¨¡è¿‡å°ï¼šå°‘é‡æ ·æœ¬éœ€è¦å¾ªç¯å¤šæ¬¡ï¼Œæ‰èƒ½è¾¾åˆ°è®¾å®šçš„æ­¥æ•°ã€‚</p>
<p>ç°åœ¨ï¼Œå…³é”®é—®é¢˜æ¥äº†ï¼šè¿™ç§è®­ç»ƒæ–¹å¼åˆ°åº•å¥½ä¸å¥½ï¼Ÿè®©æˆ‘ä»¬é€šè¿‡è¯„ä¼°æ¥å¯»æ‰¾ç­”æ¡ˆã€‚</p>
<h2 data-id="heading-17">äº”ã€æ­¥éª¤4ï¼šä½¿ç”¨Ollamaæœ¬åœ°éƒ¨ç½²æ¨¡å‹</h2>
<p>é¦–å…ˆï¼Œåœ¨Hugging Face Hubä¸Šæ‰¾åˆ°ä½ çš„æ¨¡å‹ï¼Œç‚¹å‡»â€œUse this modelâ€ï¼Œå†é€‰æ‹©â€œOllamaâ€ã€‚</p>
<p>ä½ å¯ä»¥ç›´æ¥å°†é¡µé¢æä¾›çš„å‘½ä»¤å¤åˆ¶åˆ°ç»ˆç«¯è¿è¡Œï¼Œä¹Ÿå¯ä»¥ç¨ä½œä¿®æ”¹ï¼šå°†<code>run</code>æ”¹ä¸º<code>pull</code>ï¼Œå°†æ¨¡å‹ä¸‹è½½åˆ°æœ¬åœ°Ollamaç¯å¢ƒä¸­ã€‚</p>
<h2 data-id="heading-18">å…­ã€æ­¥éª¤5ï¼šè¯„ä¼°å¾®è°ƒåçš„æ¨¡å‹</h2>
<h3 data-id="heading-19">1. åŸºäºRAGçš„è¯„ä¼°</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ./notebooks/finetune_llama32_1bn.ipynb  </span>
  
<span class="hljs-comment"># æ„å»ºæ–°çš„æŸ¥è¯¢å¼•æ“ï¼ˆä½¿ç”¨å¾®è°ƒåçš„æ¨¡å‹ï¼‰  </span>
<span class="hljs-attr">query_engine2</span> = index.as_query_engine(  
Â  Â  <span class="hljs-attr">similarity_top_k</span>=<span class="hljs-number">6</span>,Â   
Â  Â  <span class="hljs-attr">llm</span>=Ollama(<span class="hljs-string">"hf.co/tituslhy/retrained_llama32-1bn-finetuned:Q4_K_M"</span>)  
)  
<span class="hljs-comment"># åˆå§‹åŒ–æ–°çš„è¯„ä¼°å™¨  </span>
<span class="hljs-attr">rag_evaluator2</span> = RagEvaluatorPack(  
Â  Â  <span class="hljs-attr">query_engine</span>=query_engine2,Â   
Â  Â  <span class="hljs-attr">rag_dataset</span>=holdout_dataset,  
Â  Â  <span class="hljs-comment"># ä»ä½¿ç”¨Qwen 2.5ä½œä¸ºè¯„ä¼°è£åˆ¤ï¼ˆä¸ç”Ÿæˆæ•°æ®é›†æ—¶ä¸€è‡´ï¼‰  </span>
Â  Â  <span class="hljs-attr">judge_llm</span>=Ollama(<span class="hljs-string">"qwen2.5"</span>, request_timeout=<span class="hljs-number">120.0</span>),  
Â  Â  <span class="hljs-attr">embed_model</span>=OllamaEmbedding(model_name=<span class="hljs-string">"nomic-embed-text"</span>)  
)  
<span class="hljs-comment"># è¿è¡Œè¯„ä¼°ï¼ˆå¼‚æ­¥æ–¹å¼ï¼‰  </span>
<span class="hljs-attr">benchmark_df</span> =Â awaitÂ rag_evaluator.arun()
</code></pre>
<p>ç»“æœä»¤äººæ„å¤–ï¼šå¾®è°ƒæ•ˆæœå¹¶ä¸æ˜æ˜¾â€”â€”å°½ç®¡å¿ å®åº¦å¾—åˆ†ç•¥æœ‰æå‡ï¼ˆè¾¾åˆ°0.31/1ï¼‰ï¼Œä½†æ•´ä½“ä»å¤„äºè¾ƒä½æ°´å¹³ã€‚</p>
<p>åŸå› å¯èƒ½åœ¨äºï¼šæˆ‘ä»¬åœ¨â€œRAGæ¨¡å¼â€ä¸‹è¯„ä¼°å¾®è°ƒæ¨¡å‹â€”â€”æ­¤æ—¶æ¨¡å‹ä¾èµ–å¤–éƒ¨æ£€ç´¢åˆ°çš„æ–‡æœ¬ç‰‡æ®µç”Ÿæˆç­”æ¡ˆï¼Œè€Œéä»…ä¾é è‡ªèº«å†…åŒ–çš„çŸ¥è¯†ï¼›ä½†å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒçš„æ ¸å¿ƒç›®æ ‡ï¼Œæ˜¯è®©æ¨¡å‹â€œå†…åŒ–é¢†åŸŸçŸ¥è¯†â€ï¼Œè€Œéâ€œæå‡ä½¿ç”¨å¤–éƒ¨ä¸Šä¸‹æ–‡çš„èƒ½åŠ›â€ã€‚</p>
<h3 data-id="heading-20">2. ç›´æ¥è¯„ä¼°æ¨¡å‹ï¼ˆæ— æ£€ç´¢ï¼Œä»…ä¾èµ–å†…åŒ–çŸ¥è¯†ï¼‰</h3>
<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ¢ä¸€ç§æ­£ç¡®çš„è¯„ä¼°æ–¹å¼ï¼šä¸è¿›è¡Œæ£€ç´¢ï¼Œè®©æ¨¡å‹ç›´æ¥å›ç­”é—®é¢˜ï¼Œä»…ä¾é å¾®è°ƒæ—¶å­¦åˆ°çš„é¢†åŸŸçŸ¥è¯†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ./notebooks/finetune_llama32_1bn.ipynb  </span>
  
fromÂ llama_index.llms.ollamaÂ importÂ Ollama  
fromÂ llama_index.embeddings.ollamaÂ importÂ OllamaEmbedding  
fromÂ llama_index.core.evaluationÂ importÂ SemanticSimilarityEvaluator  
fromÂ tqdmÂ importÂ tqdm  
  
<span class="hljs-comment"># åˆå§‹åŒ–å¾®è°ƒåçš„æ¨¡å‹ä¸åµŒå…¥æ¨¡å‹  </span>
<span class="hljs-attr">llm</span> = Ollama(<span class="hljs-string">"hf.co/tituslhy/retrained_llama32-1bn-finetuned:Q4_K_M"</span>)  
<span class="hljs-attr">embed_model</span> = OllamaEmbedding(model_name=<span class="hljs-string">"nomic-embed-text"</span>)  
  
<span class="hljs-comment"># è¯»å–ä¿ç•™é›†ï¼ˆå¤„ç†JSONæ ¼å¼å­—æ®µï¼‰  </span>
<span class="hljs-attr">converters</span> = {  
Â  Â  Â  Â  "reference_contexts":Â  Â lambdaÂ s: json.loads(s),  
Â  Â  Â  Â  "query_by":Â  Â  Â  Â  Â  Â  Â lambdaÂ s: CreatedBy.model_validate_json(s),  
Â  Â  Â  Â  "reference_answer_by":Â  lambdaÂ s: CreatedBy.model_validate_json(s),  
Â  Â  }  
<span class="hljs-attr">df</span> = pd.read_csv(<span class="hljs-string">"holdout_dataset.csv"</span>, converters=converters)  
  
<span class="hljs-comment"># åˆå§‹åŒ–è¯­ä¹‰ç›¸ä¼¼åº¦è¯„ä¼°å™¨ï¼ˆç›¸ä¼¼åº¦é˜ˆå€¼è®¾ä¸º0.5ï¼‰  </span>
<span class="hljs-attr">evaluator</span> = SemanticSimilarityEvaluator(  
Â  Â  <span class="hljs-attr">similarity_threshold</span>=<span class="hljs-number">0.5</span>,Â   
Â  Â  <span class="hljs-attr">embed_model</span>=embed_model  
)  
  
<span class="hljs-comment"># ç­›é€‰å‡ºåŒ…å«"Question"çš„æœ‰æ•ˆæŸ¥è¯¢ä¸å‚è€ƒç­”æ¡ˆ  </span>
<span class="hljs-attr">queries</span> = [df.iloc[i][<span class="hljs-string">'query'</span>]Â forÂ iÂ inÂ range(len(df))Â ifÂ <span class="hljs-string">"Question"</span>Â inÂ df.iloc[i][<span class="hljs-string">'query'</span>]]  
<span class="hljs-attr">references</span> = [df.iloc[i][<span class="hljs-string">'reference_answer'</span>]Â forÂ iÂ inÂ range(len(df))Â ifÂ <span class="hljs-string">"Question"</span>Â inÂ df.iloc[i][<span class="hljs-string">'query'</span>]]  
<span class="hljs-comment"># æ„å»ºDataFrameå­˜å‚¨æŸ¥è¯¢ä¸å‚è€ƒç­”æ¡ˆ  </span>
<span class="hljs-attr">df_answers</span> = pd.DataFrame({<span class="hljs-string">'queries'</span>: queries,Â <span class="hljs-string">'reference_answers'</span>: references})  
  
<span class="hljs-comment"># å­˜å‚¨æ¨¡å‹å›ç­”ä¸ç›¸ä¼¼åº¦å¾—åˆ†  </span>
answers, <span class="hljs-attr">similarity_scores</span> = [], []  
<span class="hljs-comment"># éå†æ‰€æœ‰æŸ¥è¯¢ï¼Œè®©æ¨¡å‹ç›´æ¥å›ç­”  </span>
forÂ idx, (query, reference)Â inÂ tqdm(df_answers.iterrows()):  
Â  Â  <span class="hljs-attr">answer</span> = llm.complete(query)  
Â  Â  answers.append(str(answer))  
Â  Â Â   
Â  Â  <span class="hljs-comment"># è®¡ç®—æ¨¡å‹å›ç­”ä¸å‚è€ƒç­”æ¡ˆçš„è¯­ä¹‰ç›¸ä¼¼åº¦  </span>
Â  Â  <span class="hljs-attr">similarity_score</span> = evaluator.evaluate(  
Â  Â  Â  Â  <span class="hljs-attr">response</span>=str(answer),  
Â  Â  Â  Â  <span class="hljs-attr">reference</span>=reference  
Â  Â  )  
Â  Â  similarity_scores.append(round(similarity_score.score,Â 2))  
  
<span class="hljs-comment"># å°†ç»“æœæ·»åŠ åˆ°DataFrame  </span>
df_answers<span class="hljs-section">['answers']</span> = answers  
df_answers<span class="hljs-section">['similarity_scores']</span> = similarity_scores
</code></pre>
<h3 data-id="heading-21">3. è¯„ä¼°ç»“æœåˆ†æ</h3>
<p>æˆ‘ä»¬æ¥æ‹†è§£è¿™æ®µä»£ç çš„é€»è¾‘ï¼š</p>
<ol>
<li>åˆå§‹åŒ–å¾®è°ƒåçš„æ¨¡å‹ä¸åµŒå…¥æ¨¡å‹ï¼›</li>
<li>åŠ è½½ä¿ç•™é›†ï¼Œç­›é€‰å‡ºæœ‰æ•ˆæŸ¥è¯¢ï¼ˆåŒ…å«â€œQuestionâ€çš„æ¡ç›®ï¼‰ï¼›</li>
<li>è®©æ¨¡å‹ä¸ä¾èµ–ä»»ä½•æ£€ç´¢ä¸Šä¸‹æ–‡ï¼Œç›´æ¥å›ç­”æ¯ä¸ªæŸ¥è¯¢ï¼›</li>
<li>è®¡ç®—æ¨¡å‹å›ç­”ä¸å‚è€ƒç­”æ¡ˆä¹‹é—´çš„è¯­ä¹‰ç›¸ä¼¼åº¦ï¼ˆå¾—åˆ†èŒƒå›´0-1ï¼‰ã€‚</li>
</ol>
<p>ä»ç›¸ä¼¼åº¦å¾—åˆ†æ¥çœ‹ï¼Œä¼¼ä¹æœ‰äº†æå‡ï¼ä½†åˆ«æ€¥ç€ä¸‹ç»“è®ºâ€”â€”æˆ‘ä»¬éœ€è¦ä»”ç»†é˜…è¯»æ¨¡å‹çš„å›ç­”å†…å®¹ï¼Œè€Œéä»…çœ‹åˆ†æ•°ã€‚</p>
<p>é—®é¢˜å¾ˆå¿«æµ®ç°ï¼šä»¥ç¬¬ä¸€ä¸ªé—®é¢˜ä¸ºä¾‹ï¼Œæ¨¡å‹çš„å›ç­”éå¸¸å†—é•¿ï¼Œè€Œå‚è€ƒç­”æ¡ˆåªæ˜¯ä¸€å¥è¯ã€‚è¿™ç§â€œé«˜åˆ†â€å…¶å®å…·æœ‰è¯¯å¯¼æ€§â€”â€”æ›´é•¿çš„å›ç­”åŒ…å«æ›´å¤štokenå’Œä¿¡æ¯ç‚¹ï¼Œè‡ªç„¶æ›´å®¹æ˜“ä¸å‚è€ƒç­”æ¡ˆäº§ç”Ÿè¯­ä¹‰é‡å ã€‚</p>
<p>æ›´æ·±å…¥åˆ†æâ€œå¾—åˆ†æœ€é«˜â€çš„å›ç­”åï¼Œå‘ç°æƒ…å†µæ›´ä¸ä¹è§‚ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªéå¸¸æ¨¡ç³Šçš„æŸ¥è¯¢ï¼šâ€œWhich study are we referring to here?â€ï¼ˆæˆ‘ä»¬è¿™é‡ŒæŒ‡çš„æ˜¯å“ªé¡¹ç ”ç©¶ï¼Ÿï¼‰â€”â€”è¿™ä¸ªé—®é¢˜æœ¬èº«è¡¨è¿°ä¸æ˜ç¡®ã€ä¿¡æ¯ä¸å®Œæ•´ã€‚</p>
<p>ä»è¡¨é¢ä¸Šçœ‹ï¼Œæ¨¡å‹ä¼¼ä¹å­¦åˆ°äº†æ–‡æ¡£ä¸­çš„ä¸€äº›ä¿¡æ¯â€”â€”å³ä½¿é¢å¯¹æ¨¡ç³Šçš„æç¤ºï¼Œä¹Ÿç»™å‡ºäº†è¿è´¯çš„å›ç­”ã€‚ä½†é—®é¢˜åœ¨äºï¼šæˆ‘ä»¬ä»æœªåœ¨è®­ç»ƒæ•°æ®ä¸­æåŠâ€œè¯¥ç ”ç©¶çš„åç§°â€ï¼Œå› æ­¤è¿™ä¸ªå›ç­”å¾ˆå¯èƒ½æ˜¯â€œå¹»è§‰â€ã€‚</p>
<p>ğŸ‘‰ æˆ‘å°†è¿™ç§æƒ…å†µç§°ä¸ºâ€œå‡é˜³æ€§â€ï¼šå›ç­”çœ‹èµ·æ¥æ­£ç¡®ï¼Œä½†å®é™…ä¸ŠåŸºäºå‡è®¾æˆ–è™šæ„çš„ä¸Šä¸‹æ–‡ã€‚</p>
<h2 data-id="heading-22">ä¸ƒã€å®éªŒåæ€</h2>
<p>æ€»ä½“è€Œè¨€ï¼Œè¿™æ¬¡å¾®è°ƒå®éªŒä¸èƒ½ç®—â€œæˆåŠŸâ€ï¼Œä½†å´å¸¦æ¥äº†å®è´µçš„ç»éªŒã€‚ä»¥ä¸‹æ˜¯å‡ ç‚¹å…³é”®å¯ç¤ºï¼š</p>
<ol>
<li><strong>æ•°æ®é›†è´¨é‡è‡³å…³é‡è¦</strong> æˆ‘ä»¬çš„è®­ç»ƒé›†ä»…åŒ…å«49ä¸ªç¤ºä¾‹ï¼Œä¸”æ²¡æœ‰å¯¹æ•°æ®è´¨é‡è¿›è¡Œæ ¡éªŒï¼ˆåªæ˜¯ç›²ç›®ç›¸ä¿¡å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆçš„é—®ç­”å¯¹ï¼‰ã€‚å®é™…åœºæ™¯ä¸­ï¼Œè¿™ç±»æ•°æ®å¾€å¾€å­˜åœ¨â€œWhat format is this document?â€ï¼ˆè¿™æ˜¯ä»€ä¹ˆæ ¼å¼çš„æ–‡æ¡£ï¼Ÿï¼‰è¿™ç±»æ— æ„ä¹‰é—®é¢˜ï¼Œéœ€è¦æ‰‹åŠ¨å‰”é™¤ã€‚æ­£å› å¦‚æ­¤ï¼Œç”Ÿæˆè®­ç»ƒæ•°æ®é›†æ—¶ï¼ŒåŠ¡å¿…ä½¿ç”¨æ€§èƒ½ä¼˜å¼‚çš„å¤§è¯­è¨€æ¨¡å‹ï¼</li>
<li><strong>æ•°æ®é›†è§„æ¨¡åŒæ ·å…³é”®</strong> æ ·æœ¬é‡è¿‡å°‘æ—¶ï¼Œå¾®è°ƒå¾ˆå¯èƒ½æ˜¯â€œé”™è¯¯é€‰æ‹©â€â€”â€”æˆ‘ä»¬çš„å®éªŒå°±å‡ºç°äº†æ€§èƒ½æœªè¾¾é¢„æœŸçš„æƒ…å†µã€‚æ›´ä¼˜çš„è·¯å¾„ï¼ˆæˆ‘å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­æ¢è®¨ï¼‰æ˜¯â€œå¾®è°ƒæ•´ä¸ªRAGç³»ç»Ÿâ€ï¼Œæ•¬è¯·å…³æ³¨ï¼</li>
<li><strong>è®­ç»ƒé…ç½®å†³å®šç»“æœæˆè´¥</strong> ç†æƒ³çš„è®­ç»ƒé…ç½®åº”åŒ…å«ï¼š</li>
</ol>
<ul>
<li>å•ç‹¬çš„è¯„ä¼°é›†ï¼ˆåŒæ ·éœ€è¦ç²¾å¿ƒç­›é€‰æˆ–ç”Ÿæˆï¼‰ï¼›</li>
<li>å¤šç»„è¶…å‚æ•°å®éªŒï¼ˆæµ‹è¯•ä¸åŒå‚æ•°ç»„åˆçš„æ•ˆæœï¼‰ï¼›</li>
<li>å€ŸåŠ©Weights &amp; Biasesæˆ–MLflowç­‰å·¥å…·è¿›è¡Œå®Œæ•´çš„è®­ç»ƒè·Ÿè¸ªã€‚</li>
</ul>
<p>ä½†åœ¨æœ¬æ¬¡å®éªŒä¸­ï¼Œæˆ‘ä»¬ä»…è¿›è¡Œäº†ä¸€æ¬¡â€œä¸€æ¬¡æ€§è®­ç»ƒâ€ï¼Œä¸”å‡ ä¹æ²¡æœ‰è·Ÿè¸ªè®°å½•â€”â€”æ‚„æ‚„è¯´ä¸€å¥ï¼Œå¯åˆ«è®©æˆ‘çš„æ•™æˆçŸ¥é“è¿™äº‹ã€‚</p>
<ol start="4">
<li><strong>å¾®è°ƒæ¯”æƒ³è±¡ä¸­ç®€å•ï¼Œå½’åŠŸäºå¼€æºç¤¾åŒº</strong> æˆ‘ä»¬èƒ½è½»æ¾å®Œæˆè¿™æ¬¡å®éªŒï¼Œç¦»ä¸å¼€å¼€æºç¤¾åŒºçš„è´¡çŒ®ã€‚Unsloth.AIã€Hugging Faceå’ŒOllamaç­‰å·¥å…·ï¼Œå°†æ›¾ç»å¤æ‚ä¸”é«˜é—¨æ§›çš„å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒï¼Œå˜å¾—å¦‚ä»Šè§¦æ‰‹å¯åŠã€‚æ²¡æœ‰è¿™äº›å‡ºè‰²çš„å·¥å…·ï¼Œæœ¬æ¬¡å®éªŒçš„ä»£ç ç¼–å†™å’Œè¿è¡Œä¼šå›°éš¾å¾—å¤šã€‚</li>
</ol>
<p>è™½ç„¶æˆ‘ä»¬æ²¡èƒ½æˆåŠŸâ€œæ•™æ— ç‰™å­¦ä¼šå’¬åˆâ€ï¼ˆè®©æ¨¡å‹ç²¾å‡†è¾“å‡ºï¼‰ï¼Œä½†è¿™æ¬¡å®éªŒä»æ˜¯ä¸€æ¬¡å®è´µçš„â€œå¤§è¯­è¨€æ¨¡å‹å¾®è°ƒå…¥é—¨â€â€”â€”æˆ‘ä»¬ä¸ä»…å­¦åˆ°äº†å¤§é‡çŸ¥è¯†ï¼Œè¿˜å¾—åˆ°äº†å¯å¤ç”¨çš„ä»£ç ï¼Œè€Œä¸ä»…ä»…æ˜¯å¤åˆ¶Unslothçš„ç¤ºä¾‹ã€‚</p>
<p>ç›®å‰ï¼ŒHugging Faceå’ŒKaggleä¸Šæœ‰è®¸å¤šé«˜è´¨é‡çš„é¢†åŸŸæ•°æ®é›†å¯ä¾›ä½¿ç”¨ã€‚ç›¸ä¿¡åªè¦ä¼˜åŒ–æ•°æ®è´¨é‡ã€è®¾è®¡æ›´åˆç†çš„è®­ç»ƒæ–¹æ¡ˆï¼Œæˆ‘ä»¬ä¸€å®šèƒ½æ„å»ºå‡ºæ›´ç²¾å‡†ã€æ›´å¯é çš„å¾®è°ƒæ¨¡å‹ã€‚</p>
<h2 data-id="heading-23">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[logback é…ç½®æ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7574245125027938323</link>    <guid>https://juejin.cn/post/7574245125027938323</guid>    <pubDate>2025-11-19T08:42:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574245125027938323" data-draft-id="7574253222606061609" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="logback é…ç½®æ–‡ä»¶"/> <meta itemprop="keywords" content="Java,åç«¯"/> <meta itemprop="datePublished" content="2025-11-19T08:42:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ªé‡Œçš„ç ´æ°´ç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/4394111849466414"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            logback é…ç½®æ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4394111849466414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ªé‡Œçš„ç ´æ°´ç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:42:37.000Z" title="Wed Nov 19 2025 08:42:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>æ—¥å¿—çº§åˆ«æŒ‡çš„æ˜¯æ—¥å¿—ä¿¡æ¯çš„ç±»å‹ï¼Œæ—¥å¿—éƒ½ä¼šåˆ†çº§åˆ«ï¼Œå¸¸è§çš„æ—¥å¿—çº§åˆ«å¦‚ä¸‹ï¼ˆçº§åˆ«ç”±ä½åˆ°é«˜ï¼‰ï¼š</p>



































<table><thead><tr><th>æ—¥å¿—çº§åˆ«</th><th>è¯´æ˜</th><th>è®°å½•æ–¹å¼</th></tr></thead><tbody><tr><td>trace</td><td>è¿½è¸ªï¼Œè®°å½•ç¨‹åºè¿è¡Œè½¨è¿¹ ã€ä½¿ç”¨å¾ˆå°‘ã€‘</td><td>log.trace("...")</td></tr><tr><td>debug</td><td>è°ƒè¯•ï¼Œè®°å½•ç¨‹åºè°ƒè¯•è¿‡ç¨‹ä¸­çš„ä¿¡æ¯ï¼Œå®é™…åº”ç”¨ä¸­ä¸€èˆ¬å°†å…¶è§†ä¸ºæœ€ä½çº§åˆ« ã€ä½¿ç”¨è¾ƒå¤šã€‘</td><td>log.debug("...")</td></tr><tr><td>info</td><td>è®°å½•ä¸€èˆ¬ä¿¡æ¯ï¼Œæè¿°ç¨‹åºè¿è¡Œçš„å…³é”®äº‹ä»¶ï¼Œå¦‚ï¼šç½‘ç»œè¿æ¥ã€ioæ“ä½œ ã€ä½¿ç”¨è¾ƒå¤šã€‘</td><td>log.info("...")</td></tr><tr><td>warn</td><td>è­¦å‘Šä¿¡æ¯ï¼Œè®°å½•æ½œåœ¨æœ‰å®³çš„æƒ…å†µ ã€ä½¿ç”¨è¾ƒå¤šã€‘</td><td>log.warn("...")</td></tr><tr><td>error</td><td>é”™è¯¯ä¿¡æ¯ ã€ä½¿ç”¨è¾ƒå¤šã€‘</td><td>log.error("...")</td></tr></tbody></table>
<p>å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œçµæ´»çš„æ§åˆ¶è¾“å‡ºé‚£äº›ç±»å‹çš„æ—¥å¿—ã€‚ï¼ˆå¤§äºç­‰äºé…ç½®çš„æ—¥å¿—çº§åˆ«çš„æ—¥å¿—æ‰ä¼šè¾“å‡ºï¼‰</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"info"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"STDOUT"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"FILE"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span>
</code></pre>
<h2 data-id="heading-0">æ–‡ä»¶å¦‚ä¸‹</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"STDOUT"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.classic.encoder.PatternLayoutEncoder"</span>&gt;</span>
          <span class="hljs-comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%d è¡¨ç¤ºæ—¥æœŸï¼Œ%thread è¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelè¡¨ç¤ºçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ï¼Œ%loggeræ˜¾ç¤ºæ—¥å¿—è®°å½•å™¨çš„åç§°ï¼Œ %msgè¡¨ç¤ºæ—¥å¿—æ¶ˆæ¯ï¼Œ%nè¡¨ç¤ºæ¢è¡Œç¬¦ --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50}-%msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ç³»ç»Ÿæ–‡ä»¶è¾“å‡º --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"FILE"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">rollingPolicy</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy"</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- æ—¥å¿—æ–‡ä»¶è¾“å‡ºçš„æ–‡ä»¶å, %iè¡¨ç¤ºåºå· --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">FileNamePattern</span>&gt;</span>D:/tlias-%d{yyyy-MM-dd}-%i.log<span class="hljs-tag">&lt;/<span class="hljs-name">FileNamePattern</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- æœ€å¤šä¿ç•™çš„å†å²æ—¥å¿—æ–‡ä»¶æ•°é‡ --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">MaxHistory</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-name">MaxHistory</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- æœ€å¤§æ–‡ä»¶å¤§å°ï¼Œè¶…è¿‡è¿™ä¸ªå¤§å°ä¼šè§¦å‘æ»šåŠ¨åˆ°æ–°æ–‡ä»¶ï¼Œé»˜è®¤ä¸º 10MB --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">maxFileSize</span>&gt;</span>10MB<span class="hljs-tag">&lt;/<span class="hljs-name">maxFileSize</span>&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">rollingPolicy</span>&gt;</span>

       <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.classic.encoder.PatternLayoutEncoder"</span>&gt;</span>
          <span class="hljs-comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%d è¡¨ç¤ºæ—¥æœŸï¼Œ%thread è¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelè¡¨ç¤ºçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ï¼Œ%msgè¡¨ç¤ºæ—¥å¿—æ¶ˆæ¯ï¼Œ%nè¡¨ç¤ºæ¢è¡Œç¬¦ --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50}-%msg%n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ—¥å¿—è¾“å‡ºçº§åˆ« --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"ALL"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"STDOUT"</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"FILE"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LLM å››é˜¶æ®µå’Œ Transformer æ¶æ„ï¼ˆäºŒï¼‰]]></title>    <link>https://juejin.cn/post/7574230922314268678</link>    <guid>https://juejin.cn/post/7574230922314268678</guid>    <pubDate>2025-11-19T08:42:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574230922314268678" data-draft-id="7573993452577849387" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LLM å››é˜¶æ®µå’Œ Transformer æ¶æ„ï¼ˆäºŒï¼‰"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-19T08:42:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å…µå¼ å¥"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032405229"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LLM å››é˜¶æ®µå’Œ Transformer æ¶æ„ï¼ˆäºŒï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032405229/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å…µå¼ å¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:42:40.000Z" title="Wed Nov 19 2025 08:42:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šä¸€ç¯‡è§£é‡Šå®Œç‚¹ç§¯å’ŒçŸ©é˜µä¹˜æ³•ï¼ŒçŸ©é˜µä¹˜æ³•æ˜¯ä¸€ç§è½¬æ¢ï¼Œè¿™ä¸€ç¯‡çœ‹ Transformer ä¸­å¦‚ä½•è¿ç”¨çš„ã€‚</p>
<p>LLM çš„æœ¬è´¨æ˜¯é¢„æµ‹ä¸‹ä¸€ä¸ª tokenï¼Œé˜¶æ®µäºŒä¸­ï¼Œä½¿ç”¨å¤§é‡çš„äº’è”ç½‘å†…å®¹ï¼Œç»™æ¨¡å‹åšè®­ç»ƒï¼Œä½¿ç”¨è‡ªç›‘ç£å­¦ä¹ ï¼Œä¸æ–­è°ƒæ•´ 1750 äº¿ä¸ªå‚æ•°ã€‚ç›´åˆ°æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®çš„è¡¥å…¨æ–‡æœ¬å†…å®¹ã€‚</p>
<p>é˜¶æ®µäºŒçš„äº§ç‰©ï¼Œåªæœ‰æ–‡æœ¬è¡¥å…¨åŠŸèƒ½ï¼Œä¸å…·å¤‡é—®ç­”ã€å¯¹è¯èƒ½åŠ›ã€‚</p>
<p>ç°åœ¨å‡è®¾æ‰€æœ‰å‚æ•°å·²ç»è°ƒèŠ‚å®Œæ¯•ï¼Œä»¥ä¸€ä¸ªè¾“å…¥æ˜¯ "The cat sat" å±•ç¤ºæ¨¡å‹æ€ä¹ˆé¢„æµ‹ä¸‹ä¸€ä¸ª token æ˜¯ "on" çš„ã€‚</p>
<h3 data-id="heading-0">æŸ¥è¯¢å‘é‡åæ ‡</h3>
<p>è¾“å…¥ "The cat sat" ç»è¿‡ Tokenizer ä¼šæŠŠè¿™å¥è¯åˆ†ä¸º theã€catã€sat ä¸‰ä¸ª tokenï¼Œå†ä» Vocab Map&lt;String, Integer&gt; ä¸­æ‰¾åˆ°å¯¹åº”çš„idï¼Œå†å» Embedding Table ä¸­æ‰¾åˆ°è¿™ä¸‰ä¸ªå‘é‡åæ ‡ã€‚</p>
<p>å¾—åˆ° 3 ä¸ªå½¢çŠ¶ä¸º [1,4096] çš„å‘é‡ï¼ŒVector_The: [0.1, -0.5, ...]ã€Vector_cat: [0.8, 0.2, ...]ã€Vector_sat: [-0.1, 0.9, ...]ã€‚æŠŠè¿™ä¸‰ä¸ªå‘é‡åˆå¹¶åˆ°ä¸€ä¸ªçŸ©é˜µé‡Œé¢ï¼Œå¾—åˆ°ä¸€ä¸ªå½¢çŠ¶æ˜¯ [3,4096] çš„å‘é‡ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mrow><mi>i</mi><mi>n</mi></mrow></msub><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mover accent="true"><mi>x</mi><mo>âƒ—</mo></mover><mrow><mi>T</mi><mi>h</mi><mi>e</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mover accent="true"><mi>x</mi><mo>âƒ—</mo></mover><mrow><mi>c</mi><mi>a</mi><mi>t</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mover accent="true"><mi>x</mi><mo>âƒ—</mo></mover><mrow><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">X_{in} = \begin{bmatrix} \vec{x}_{The} \\ \vec{x}_{cat} \\ \vec{x}_{sat} \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">in</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5&#10;3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11&#10;10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63&#10;-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1&#10;-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59&#10;H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359&#10;c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5&#10;3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11&#10;10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63&#10;-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1&#10;-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59&#10;H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359&#10;c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5&#10;3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11&#10;10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63&#10;-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1&#10;-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59&#10;H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359&#10;c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<h3 data-id="heading-1">è¿›å…¥ Layer åŠ å·¥</h3>
<p>æ¥ä¸‹æ¥æ­£å¼è¿›å…¥ Layer åŠ å·¥ã€‚ä¹‹å‰è¯´è¿‡ä¸€å…±æœ‰ 96 å±‚ Layersï¼Œæ¯ä¸€å±‚ Layer æœ‰ MHA (Multi-Head Attention) å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ å’Œ FFN (Feed-Forward Network) å‰é¦ˆç¥ç»ç½‘ç»œå¤„ç†ã€‚å½¢çŠ¶ä¸º [3,4096] çš„çŸ©é˜µä¼šå®Œæ•´ç»å†æ‰€æœ‰ Layersï¼Œæœ€åå¾—åˆ°åŠ å·¥åçš„ [3,4096]ã€‚</p>
<h3 data-id="heading-2"><code>x_in</code> â” <strong>[Norm]</strong> â” <strong>[MHA]</strong> â” <strong>(+ æ®‹å·®è¿æ¥)</strong> â” <code>x_mid</code> â” <strong>[Norm]</strong> â” <strong>[FFN]</strong> â” <strong>(+ æ®‹å·®è¿æ¥)</strong> â” <code>x_out</code></h3>
<p>ä»¥ä¸Šæ˜¯ä¸€å±‚ Layer å®Œæ•´è¿‡ç¨‹ã€‚ x_out ä¼šæ˜¯ä¸‹ä¸€å±‚ Layer çš„ x_inã€‚</p>
<h4 data-id="heading-3">Norm å±‚å½’ä¸€åŒ–</h4>
<p>å…¶ä¸­ Norm æ˜¯ Layer Normalizationï¼ˆå±‚å½’ä¸€åŒ–ï¼‰ï¼ŒçŸ©é˜µä¹˜æ³•çš„ç»“æœèŒƒå›´éå¸¸å¤§ï¼Œæœ‰çš„å€¼æ˜¯ 50000 è€Œæœ‰çš„æ˜¯ 0.000003ï¼Œä¸ºäº†é˜²æ­¢è®¡ç®—æº¢å‡ºæˆ–è€…æ¢¯åº¦ä¹±è·³ï¼Œéœ€è¦æŠŠè¿™äº›å€¼ç»Ÿä¸€å¤„ç†ä¸ºå‡å€¼ä¸º 0 æ–¹å·®ä¸º 1ã€‚</p>
<p>Norm è®¡ç®—åŒ…å«å››ä¸ªæ­¥éª¤ï¼Œå‡è®¾ä»¥  (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>âƒ—</mo></mover><mrow><mi>c</mi><mi>a</mi><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\vec{x}_{cat}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.864em;vertical-align:-0.15em;"/><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal">x</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5&#10;3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11&#10;10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63&#10;-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1&#10;-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59&#10;H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359&#10;c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>): [10, 2, 12, 0] ä¸ºä¾‹ã€‚</p>
<ol>
<li>
<p>æ±‚å‡å€¼ (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¼</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Î¼</span></span></span></span></span>)</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>10</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>12</mn><mo>+</mo><mn>0</mn><mo stretchy="false">)</mo><mo>Ã·</mo><mn>4</mn><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">(10 + 2 + 12 + 0) \div 4 = 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">10</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">12</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã·</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">6</span></span></span></span></span></p>
</li>
<li>
<p>æ±‚æ–¹å·® (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>)</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mo>â†’</mo><mo stretchy="false">(</mo><mn>10</mn><mo>âˆ’</mo><mn>6</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">10 \to (10-6)^2 = 16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">10</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">10</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord">6</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">16</span></span></span></span></span><br/>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>â†’</mo><mo stretchy="false">(</mo><mn>2</mn><mo>âˆ’</mo><mn>6</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">2 \to (2-6)^2 = 16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord">6</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">16</span></span></span></span></span><br/>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>12</mn><mo>â†’</mo><mo stretchy="false">(</mo><mn>12</mn><mo>âˆ’</mo><mn>6</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><mn>36</mn></mrow><annotation encoding="application/x-tex">12 \to (12-6)^2 = 36</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">12</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">12</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord">6</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">36</span></span></span></span></span><br/>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>â†’</mo><mo stretchy="false">(</mo><mn>0</mn><mo>âˆ’</mo><mn>6</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><mn>36</mn></mrow><annotation encoding="application/x-tex">0 \to (0-6)^2 = 36</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord">6</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">36</span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>æ–¹å·®</mtext><mo>=</mo><mo stretchy="false">(</mo><mn>16</mn><mo>+</mo><mn>16</mn><mo>+</mo><mn>36</mn><mo>+</mo><mn>36</mn><mo stretchy="false">)</mo><mo>Ã·</mo><mn>4</mn><mo>=</mo><mn>26</mn></mrow><annotation encoding="application/x-tex">\text{æ–¹å·®} = (16 + 16 + 36 + 36) \div 4 = 26</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord cjk_fallback">æ–¹å·®</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">16</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">16</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">36</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">36</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã·</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">26</span></span></span></span></span></p>
<p><strong>æ ‡å‡†å·® (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span></span></span></span></span>):</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mn>26</mn></msqrt><mo>â‰ˆ</mo><mn>5.1</mn></mrow><annotation encoding="application/x-tex">\sqrt{26} \approx 5.1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1328em;"/><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord">26</span></span></span><span style="top:-2.8672em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">5.1</span></span></span></span></span></p>
</li>
<li>
<p>å½’ä¸€åŒ– (Normalize)<br/>
å…¬å¼ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>x</mi><mo>âˆ’</mo><mtext>å‡å€¼</mtext></mrow><mtext>æ ‡å‡†å·®</mtext></mfrac></mrow><annotation encoding="application/x-tex">\frac{x - \text{å‡å€¼}}{\text{æ ‡å‡†å·®}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">æ ‡å‡†å·®</span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mbin mtight">âˆ’</span><span class="mord text mtight"><span class="mord cjk_fallback mtight">å‡å€¼</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span>ç›®çš„æ˜¯æŠŠæ•°æ®å¼ºè¡Œæ‹‰å›åˆ° â€œå‡å€¼ä¸º 0ï¼Œæ–¹å·®ä¸º 1â€ çš„æ ‡å‡†å½¢æ€ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mo>â†’</mo><mo stretchy="false">(</mo><mn>10</mn><mo>âˆ’</mo><mn>6</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>5.1</mn><mo>â‰ˆ</mo><mn mathvariant="bold">0.78</mn></mrow><annotation encoding="application/x-tex">10 \to (10 - 6) / 5.1 \approx \mathbf{0.78}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">10</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">10</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">6</span><span class="mclose">)</span><span class="mord">/5.1</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord"><span class="mord mathbf">0.78</span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>â†’</mo><mo stretchy="false">(</mo><mn>2</mn><mo>âˆ’</mo><mn>6</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>5.1</mn><mo>â‰ˆ</mo><mrow><mo>âˆ’</mo><mn mathvariant="bold">0.78</mn></mrow></mrow><annotation encoding="application/x-tex">2 \to (2 - 6) / 5.1 \approx \mathbf{-0.78}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">6</span><span class="mclose">)</span><span class="mord">/5.1</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord mathbf">0.78</span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>12</mn><mo>â†’</mo><mo stretchy="false">(</mo><mn>12</mn><mo>âˆ’</mo><mn>6</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>5.1</mn><mo>â‰ˆ</mo><mn mathvariant="bold">1.17</mn></mrow><annotation encoding="application/x-tex">12 \to (12 - 6) / 5.1 \approx \mathbf{1.17}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">12</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">12</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">6</span><span class="mclose">)</span><span class="mord">/5.1</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord"><span class="mord mathbf">1.17</span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>â†’</mo><mo stretchy="false">(</mo><mn>0</mn><mo>âˆ’</mo><mn>6</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>5.1</mn><mo>â‰ˆ</mo><mrow><mo>âˆ’</mo><mn mathvariant="bold">1.17</mn></mrow></mrow><annotation encoding="application/x-tex">0 \to (0 - 6) / 5.1 \approx \mathbf{-1.17}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">6</span><span class="mclose">)</span><span class="mord">/5.1</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord mathbf">1.17</span></span></span></span></span></span></p>
<p>ç»“æœå‘é‡ï¼š [0.78, -0.78, 1.17, -1.17]</p>
</li>
<li>
<p>ç¼©æ”¾ä¸å¹³ç§» (Scale &amp; Shift)
å¦‚æœæ¯æ¬¡éƒ½å¼ºè¡Œå˜æˆ 0 å‡å€¼ï¼Œå¯èƒ½ä¼šç ´åæ•°æ®çš„å«ä¹‰ã€‚æ‰€ä»¥æ¨¡å‹æœ‰ä¸¤ä¸ªå¯å˜å‚æ•°ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span></span> (ç¼©æ”¾) å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span></span> (å¹³ç§»)ã€‚è¿™é‡Œå¯ä»¥ç†è§£æˆä¸€ä¸ªä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹çš„çº¿æ€§å‡½æ•°ã€‚
å‡è®¾æ¨¡å‹å­¦åˆ°è¿™ä¸€å±‚éœ€è¦æ•°å€¼ç¨å¾®å¤§ä¸€ç‚¹ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi><mo>=</mo><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\gamma = [2, 2, 2, 2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">2</span><span class="mclose">]</span></span></span></span></span>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi><mo>=</mo><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\beta = [1, 1, 1, 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mclose">]</span></span></span></span></span></p>
<p>æœ€ç»ˆè¾“å‡º = <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>å½’ä¸€åŒ–ç»“æœ</mtext><mo>Ã—</mo><mi>Î³</mi><mo>+</mo><mi>Î²</mi></mrow><annotation encoding="application/x-tex">\text{å½’ä¸€åŒ–ç»“æœ} \times \gamma + \beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord text"><span class="mord cjk_fallback">å½’ä¸€åŒ–ç»“æœ</span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.78</mn><mo>Ã—</mo><mn>2</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn mathvariant="bold">2.56</mn></mrow><annotation encoding="application/x-tex">0.78 \times 2 + 1 = \mathbf{2.56}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">0.78</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord"><span class="mord mathbf">2.56</span></span></span></span></span></span><br/>
...</p>
</li>
</ol>
<h4 data-id="heading-4">æ®‹å·®è¿æ¥</h4>
<p>ç»è¿‡ MHA å’Œ FFN åï¼Œä¸ºäº†é˜²æ­¢åŸå§‹æ•°æ®ä¸¢å¤±ï¼Œä¼šåŠ ä¸Šå¤„ç†å‰çš„åŸå§‹å€¼ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mtext>New_Process</mtext><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">Output = \text{New\_Process}(x) + x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">u</span><span class="mord mathnormal">tp</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.06em;vertical-align:-0.31em;"/><span class="mord text"><span class="mord">New_Process</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">x</span></span></span></span></span></p>
<h3 data-id="heading-5">MHA</h3>
<p>å›åˆ°å…¬å¼ï¼Œx_in æ˜¯å½¢çŠ¶ä¸º [3,4096] çš„çŸ©é˜µï¼Œç»è¿‡ Norm åè¿˜æ˜¯ [3,4096]ã€‚æ¥ç€è¿›å…¥ MHAã€‚</p>
<p>MHA ä¸­æœ‰  <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>Q</mi></msub><mtext>ã€</mtext><msub><mi>W</mi><mi>K</mi></msub><mtext>ã€</mtext><msub><mi>W</mi><mi>V</mi></msub></mrow><annotation encoding="application/x-tex">W_Qã€W_Kã€W_V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ã€</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ã€</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ã€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>O</mi></msub></mrow><annotation encoding="application/x-tex">W_O</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">O</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å››ä¸ªå½¢çŠ¶ä¸º [d_modle,d_modle]ï¼ˆ[4096,4096]ï¼‰ çš„çŸ©é˜µã€‚è¿™æ˜¯åœ¨é˜¶æ®µäºŒè®­ç»ƒå¥½çš„ã€‚</p>
<p>Q æ˜¯ questionï¼ŒK æ˜¯ keyï¼ŒV æ˜¯ valueï¼Œè¿™æ˜¯ä¸‰ä¸ªéå¸¸æŠ½è±¡çš„çŸ©é˜µï¼Œä»–ä»¬çš„ä½œç”¨æ˜¯æŠŠ "The cat sat" ä¸­ä¸‰ä¸ª token çš„å‘é‡åæ ‡äº’ç›¸èåˆï¼Œæ¯”å¦‚ the è¦æ›´å…³æ³¨ catï¼Œç»è¿‡èåˆå the è¿™ä¸ª token çš„å‘é‡å€¼é‡Œå°±åŒ…å«äº†å¤§é‡ cat çš„å‘é‡å€¼ã€‚</p>
<p>MHA å«å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ï¼Œæ¯”å¦‚æœ‰ 32 ä¸ªå¤´,4096/32=128ï¼Œå°±æ˜¯æŠŠ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>Q</mi></msub><mtext>ã€</mtext><msub><mi>W</mi><mi>K</mi></msub><mtext>ã€</mtext><msub><mi>W</mi><mi>V</mi></msub></mrow><annotation encoding="application/x-tex">W_Qã€W_Kã€W_V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ã€</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ã€</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> åˆ†ä¸º 32 ä¸ªå½¢çŠ¶ä¸º [4096,128] çš„å°çŸ©é˜µï¼Œå¹¶è¡Œè®¡ç®—å¾—åˆ° 32 ä¸ªç»“æœï¼Œå†åˆå¹¶èµ·æ¥ä¹˜ä»¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>O</mi></msub></mrow><annotation encoding="application/x-tex">W_O</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">O</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å¾—åˆ°æœ€ç»ˆçš„äº§ç‰©ã€‚</p>
<p>å¤§é‡çš„å¹¶è¡ŒçŸ©é˜µè®¡ç®—ï¼Œè¿™ä¹Ÿæ˜¯ç®—åŠ›ä»¥ GPU ä¸ºæ ¸å¿ƒçš„åŸå› ã€‚</p>
<p>å¤´ä¹Ÿæ˜¯æŠ½è±¡çš„æ¦‚å¿µï¼Œå¯ä»¥ç”¨è§’åº¦ç±»æ¯”ï¼Œä»¥ "The cat sat on the mat because it was tired." ä¸ºä¾‹ã€‚</p>
<p>Head 1 (è¯­æ³•çœ¼): ä¸“é—¨ç›¯ç€ä¸»è°“å…³ç³»ã€‚å®ƒå‘ç° "it" æŒ‡ä»£ "cat"ã€‚</p>
<p>Head 2 (é€»è¾‘çœ¼): ä¸“é—¨ç›¯ç€å› æœå…³ç³»ã€‚å®ƒå‘ç° "because" å¯¼è‡´äº† "tired"ã€‚</p>
<p>Head 3 (ä½ç½®çœ¼): ä¸“é—¨ç›¯ç€æ–¹ä½å…³ç³»ã€‚å®ƒå…³æ³¨ "on the mat"ã€‚</p>
<p>çœŸä¸ª MHA çš„è®¡ç®—è¿‡ç¨‹ç”¨ä¸€ä¸ªå…¬å¼è¡¨ç¤ºã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi><mo>=</mo><mtext>softmax</mtext><mrow><mo fence="true">(</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>X</mi><msub><mi>W</mi><mi>Q</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>X</mi><msub><mi>W</mi><mi>K</mi></msub><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><msqrt><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></msqrt></mfrac><mo fence="true">)</mo></mrow><mo stretchy="false">(</mo><mi>X</mi><msub><mi>W</mi><mi>V</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Z = \text{softmax}\left( \frac{(X W_Q)(X W_K)^T}{\sqrt{d_{model}}} \right) (X W_V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.8009em;vertical-align:-0.65em;"/><span class="mord text"><span class="mord">softmax</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1509em;"><span style="top:-2.5864em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8622em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8222em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1778em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.5075em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2822em;"><span/></span></span></span></span></span><span class="mclose mtight">)</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span/></span></span></span></span></span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9191em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>å…¶ä¸­ï¼Œ
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Scores</mtext><mo>=</mo><mo stretchy="false">(</mo><mi>X</mi><msub><mi>W</mi><mi>Q</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>X</mi><msub><mi>W</mi><mi>K</mi></msub><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">\text{Scores} = (X W_Q)(X W_K)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord">Scores</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1274em;vertical-align:-0.2861em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><msub><mi>W</mi><mi>Q</mi></msub></mrow><annotation encoding="application/x-tex">X W_Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span></strong> : ç®—å‡º Q çŸ©é˜µã€‚<br/>
<strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><msub><mi>W</mi><mi>K</mi></msub></mrow><annotation encoding="application/x-tex">X W_K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></strong> : ç®—å‡º K çŸ©é˜µã€‚<br/>
<strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo>â€¦</mo><mtext>â€‰</mtext><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">(\dots)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span></strong> : è½¬ç½® K çŸ©é˜µï¼Œä¸ºäº†èƒ½è¿›è¡ŒçŸ©é˜µä¹˜æ³•ï¼ˆå‰ä¸€ä¸ªçŸ©é˜µçš„æ¨ªè¡Œå¿…é¡»ç­‰äºåä¸€ä¸ªçŸ©é˜µçš„çºµåˆ—ï¼‰ã€‚</p>
<p>è½¬ç½®æ˜¯æ²¿å¯¹è§’çº¿ç¿»è½¬ã€‚æ¯”å¦‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">K = \begin{bmatrix} 1 &amp; 2 &amp; 3 \\ 4 &amp; 5 &amp; 6 \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p>
<p>è½¬ç½®åæ˜¯</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>K</mi><mi>T</mi></msup><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">K^T = \begin{bmatrix} 1 &amp; 4 \\ 2 &amp; 5 \\ 3 &amp; 6 \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p>d_modle è®¡ç®—æ¨¡å‹è®¾å®šçš„ç»´åº¦ï¼Œé™¤ä»¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{d_{model}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1828em;"/><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span></span></span> ä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢å‘é‡å€¼ä¹‹é—´å·®è·å¤ªå¤§ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mtext>softmax</mtext><mrow><mo fence="true">(</mo><mfrac><mtext>Scores</mtext><msqrt><mn>4</mn></msqrt></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">A = \text{softmax}\left( \frac{\text{Scores}}{\sqrt{4}} \right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.8em;vertical-align:-0.65em;"/><span class="mord text"><span class="mord">softmax</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.551em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9128em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mtight">4</span></span></span><span style="top:-2.8728em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1272em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Scores</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span></span></span></span></span></p>
<p>softmax æ˜¯ä¸€ç§æŠŠä¸€å †æ•°å­—å˜ä¸ºæ€»å’Œä¸º 1 çš„å°æ•°ç®—æ³•ï¼Œå‡è®¾æœ‰ä¸€ä¸ªè¾“å…¥å‘é‡ï¼ˆLogitsï¼‰ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi><mo>=</mo><mo stretchy="false">[</mo><msub><mi>z</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>z</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>z</mi><mi>n</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">z = [z_1, z_2, ..., z_n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">]</span></span></span></span></span>ã€‚ Softmax å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi><mo stretchy="false">(</mo><mi>z</mi><msub><mo stretchy="false">)</mo><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\sigma(z)_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„å…¬å¼æ˜¯ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïƒ</mi><mo stretchy="false">(</mo><mi>z</mi><msub><mo stretchy="false">)</mo><mi>i</mi></msub><mo>=</mo><mfrac><msup><mi>e</mi><msub><mi>z</mi><mi>i</mi></msub></msup><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><msup><mi>e</mi><msub><mi>z</mi><mi>j</mi></msub></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\sigma(z)_i = \frac{e^{z_i}}{\sum_{j=1}^N e^{z_j}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.6629em;vertical-align:-0.7519em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.911em;"><span style="top:-2.5703em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8852em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-2.8971em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4603em;"><span/></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"/><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.779em;"><span style="top:-2.9714em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.044em;margin-right:0.1em;"><span class="pstrut" style="height:2.6595em;"/><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5092em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.044em;margin-right:0.1em;"><span class="pstrut" style="height:2.6595em;"/><span class="mord mathnormal mtight">i</span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3147em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></p>
<p><strong>åˆ†å­ (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><msub><mi>z</mi><mi>i</mi></msub></msup></mrow><annotation encoding="application/x-tex">e^{z_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.044em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>)</strong> ï¼šç®—å‡ºå½“å‰å…ƒç´ çš„æŒ‡æ•°å€¼ã€‚</p>
<p><strong>åˆ†æ¯ (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ‘</mo><msup><mi>e</mi><msub><mi>z</mi><mi>j</mi></msub></msup></mrow><annotation encoding="application/x-tex">\sum e^{z_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.044em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>)</strong> ï¼šç®—å‡ºæ‰€æœ‰å…ƒç´ æŒ‡æ•°å€¼çš„æ€»å’Œã€‚</p>
<p>ç”¨åˆ°äº† e è‡ªç„¶æŒ‡æ•°ï¼ŒæŠŠè´Ÿæ•°ä¹Ÿè½¬æˆæ­£æ•°ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mrow><mo>âˆ’</mo><mn>2</mn></mrow></msup><mo>â‰ˆ</mo><mn>0.135</mn></mrow><annotation encoding="application/x-tex">e^{-2} \approx 0.135</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.135</span></span></span></span></span>ï¼‰ï¼Œç”±äºæŒ‡æ•°å‡½æ•°ç‰¹æ€§ï¼Œæ‹‰å¤§çš„åŸå§‹çš„å·®è·ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mn>2.0</mn></msup><mo>â‰ˆ</mo><mn mathvariant="bold">7.4</mn></mrow><annotation encoding="application/x-tex">e^{2.0} \approx \mathbf{7.4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2.0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord"><span class="mord mathbf">7.4</span></span></span></span></span></span> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mn>1.0</mn></msup><mo>â‰ˆ</mo><mn mathvariant="bold">2.7</mn></mrow><annotation encoding="application/x-tex">e^{1.0} \approx \mathbf{2.7}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1.0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord"><span class="mord mathbf">2.7</span></span></span></span></span></span>ï¼‰ã€‚</p>
<p>LLM ä¸­å¸¸è§çš„é…ç½® temperature å°±æ˜¯åœ¨è¿™ä¸ªå…¬å¼çš„åˆ†å­å’Œåˆ†æ¯åŒæ—¶é™¤ä»¥ Tã€‚</p>
<p><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><msub><mi>W</mi><mi>V</mi></msub></mrow><annotation encoding="application/x-tex">X W_V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></strong> : ç®—å‡º V çŸ©é˜µã€‚</p>
<p>å†ä¹˜ä»¥ softmax åçš„æ¦‚ç‡ Aï¼Œå°±æ˜¯æœ€ç»ˆçš„ç»“æœã€‚</p>
<p>è¿™é‡Œ X å‚æ•°æ˜¯å½¢çŠ¶ä¸º [3,4096] çš„çŸ©é˜µï¼Œè€Œä¸æ˜¯å•ä¸€çš„ tokenï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ª token ä¹‹é—´éƒ½ç›¸äº’èåˆï¼Œç”±äºå‰ä¸€ä¸ª token ä¸èƒ½çœ‹åˆ°åä¸€ä¸ª tokenï¼Œæ‰€ä»¥åä¸€ä¸ª token çš„å‘é‡æ˜¯åŒ…å«äº†å‰é¢æ‰€æœ‰ä¿¡æ¯çš„ã€‚</p>
<p>åä¸€ä¸ª token çœ‹ä¸åˆ°å‰ä¸€ä¸ª token é€šè¿‡ Mask çŸ©é˜µå®ç°ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Attention</mtext><mo>=</mo><mtext>softmax</mtext><mrow><mo fence="true">(</mo><mfrac><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><mi>d</mi></msqrt></mfrac><mo>+</mo><mrow><mi mathvariant="bold">M</mi><mi mathvariant="bold">a</mi><mi mathvariant="bold">s</mi><mi mathvariant="bold">k</mi></mrow><mo fence="true">)</mo></mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">\text{Attention} = \text{softmax}\left( \frac{Q K^T}{\sqrt{d}} + \mathbf{Mask} \right) V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord">Attention</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.8em;vertical-align:-0.65em;"/><span class="mord text"><span class="mord">softmax</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0895em;"><span style="top:-2.5335em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9378em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mathnormal mtight">d</span></span></span><span style="top:-2.8978em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1022em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">Q</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9191em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathbf">Mask</span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></span></p>
<p>ä¸Šé¢çš„å…¬å¼ç®€åŒ–åæ˜¯è¿™æ ·çš„ï¼ŒMask çŸ©é˜µæ˜¯ä¸€ä¸ª<strong>ä¸Šä¸‰è§’çŸ©é˜µ</strong>ï¼ˆå³ä¸Šè§’å…¨æ˜¯è´Ÿæ— ç©· <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">-\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord">âˆ’</span><span class="mord">âˆ</span></span></span></span></span>ï¼‰ï¼Œä¾‹å¦‚ï¼ˆä¸ºäº†ç®€åŒ–è¿™é‡Œ d_modle æ˜¯ 3ï¼‰ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Mask</mtext><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\text{Mask} = \begin{bmatrix} 0 &amp; -\infty &amp; -\infty \\ 0 &amp; 0 &amp; -\infty \\ 0 &amp; 0 &amp; 0 \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord text"><span class="mord">Mask</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">âˆ</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">âˆ</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">âˆ</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p>è¿™æ ·ä»»ä½•çŸ©é˜µåŠ ä¸Šè¿™ä¸ªçŸ©é˜µå³ä¸Šè§’éƒ½æ˜¯è´Ÿæ— ç©·ï¼Œè€Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow></msup><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">e^{-\infty} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7713em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">âˆ</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼Œè¿™ä¿è¯äº†åœ¨åŸå§‹å¥å­ "The cat sat" ä¸­ cat çš„æ¦‚ç‡æ°¸è¿œæ˜¯ 1ã€‚</p>
<p>å¦‚æœè¯´åä¸€ä¸ª token å‘é‡åŒ…å«äº†æ‰€æœ‰ä¿¡æ¯ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦ç®—æ‰€æœ‰å‘é‡çš„ Q K Vï¼Ÿè¿™æ˜¯å› ä¸ºåä¸€ä¸ªå‘é‡è®¡ç®—çš„è¿‡ç¨‹ä¸­ï¼Œç”¨åˆ°äº†è¿™äº›æ•°æ®ã€‚</p>
<p>ç°åœ¨ç”¨ä¸€ä¸ª dmodle = 3 çš„ä¾‹å­ï¼Œå®Œæ•´æ¼”ç¤º MHA ä¸­çš„è®¡ç®—è¿‡ç¨‹ã€‚</p>
<p>å…¥å‚ X</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>The</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>cat</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>sat</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">X = \begin{bmatrix} 1 &amp; 0 &amp; 0 \\ 0 &amp; 2 &amp; 0 \\ 0 &amp; 0 &amp; 2 \end{bmatrix} \begin{matrix} \leftarrow \text{The} \\ \leftarrow \text{cat} \\ \leftarrow \text{sat} \end{matrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">The</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">cat</span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">sat</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p>é˜¶æ®µäºŒè®­ç»ƒåçš„å‚æ•°ï¼ˆæ³¨æ„è¿™é‡Œæ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>Q</mi></msub></mrow><annotation encoding="application/x-tex">W_Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ŒQ æ˜¯è®¡ç®—åçš„çŸ©é˜µï¼‰</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>Q</mi></msub><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">W_Q = \begin{bmatrix} 0 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 0 \\ 0 &amp; \mathbf{1} &amp; 0 \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathbf">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>K</mi></msub><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">W_K = \begin{bmatrix} 0 &amp; 0 &amp; 0 \\ 0 &amp; \mathbf{1} &amp; 0 \\ 0 &amp; 0 &amp; 0 \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathbf">1</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>V</mi></msub><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">W_V = \begin{bmatrix} 1 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p>çŸ©é˜µä¹˜æ³•å</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>TheÂ (æ— éœ€æ±‚)</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>catÂ (æ— éœ€æ±‚)</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>satÂ (æœ‰éœ€æ±‚)</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">Q = \begin{bmatrix} 0 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 0 \\ 0 &amp; 2 &amp; 0 \end{bmatrix} \begin{matrix} \leftarrow \text{The (æ— éœ€æ±‚)} \\ \leftarrow \text{cat (æ— éœ€æ±‚)} \\ \leftarrow \text{sat (æœ‰éœ€æ±‚)} \end{matrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">TheÂ (</span><span class="mord cjk_fallback">æ— éœ€æ±‚</span><span class="mord">)</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">catÂ (</span><span class="mord cjk_fallback">æ— éœ€æ±‚</span><span class="mord">)</span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">satÂ (</span><span class="mord cjk_fallback">æœ‰éœ€æ±‚</span><span class="mord">)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mspace width="1em"/><mo>â†’</mo><mspace width="1em"/><msup><mi>K</mi><mi>T</mi></msup><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">K = \begin{bmatrix} 0 &amp; 0 &amp; 0 \\ 0 &amp; 2 &amp; 0 \\ 0 &amp; 0 &amp; 0 \end{bmatrix} \quad \rightarrow \quad K^T = \begin{bmatrix} 0 &amp; 0 &amp; 0 \\ 0 &amp; 2 &amp; 0 \\ 0 &amp; 0 &amp; 0 \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:1em;"/><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>TheÂ çš„è´§</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>catÂ çš„è´§</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>satÂ çš„è´§</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">V = \begin{bmatrix} 1 &amp; 0 &amp; 0 \\ 0 &amp; 2 &amp; 0 \\ 0 &amp; 0 &amp; 2 \end{bmatrix} \begin{matrix} \leftarrow \text{The çš„è´§} \\ \leftarrow \text{cat çš„è´§} \\ \leftarrow \text{sat çš„è´§} \end{matrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">TheÂ </span><span class="mord cjk_fallback">çš„è´§</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">catÂ </span><span class="mord cjk_fallback">çš„è´§</span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">satÂ </span><span class="mord cjk_fallback">çš„è´§</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p>æ ¹æ®å…¬å¼è®¡ç®— scores</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Scores</mtext><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\text{Scores} = \begin{bmatrix} 0 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 0 \\ 0 &amp; \mathbf{4} &amp; 0 \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord">Scores</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathbf">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Masked</mtext><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>+</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mi mathvariant="normal">âˆ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\text{Masked} = \begin{bmatrix} 0 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 0 \\ 0 &amp; 4 &amp; 0 \end{bmatrix} + \begin{bmatrix} 0 &amp; -\infty &amp; -\infty \\ 0 &amp; 0 &amp; -\infty \\ 0 &amp; 0 &amp; 0 \end{bmatrix} = \begin{bmatrix} 0 &amp; -\infty &amp; -\infty \\ 0 &amp; 0 &amp; -\infty \\ 0 &amp; \mathbf{4} &amp; 0 \end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord text"><span class="mord">Masked</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">âˆ</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">âˆ</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">âˆ</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">âˆ</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathbf">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">âˆ</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">âˆ</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p>softmax åç»“æœ</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">0.08</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">0.84</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">0.08</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>The</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>cat</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mrow><mi mathvariant="bold">s</mi><mi mathvariant="bold">a</mi><mi mathvariant="bold">t</mi></mrow><mtext>Â (èšç„¦Â cat)</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">A = \begin{bmatrix} 1.0 &amp; 0 &amp; 0 \\ 0.5 &amp; 0.5 &amp; 0 \\ \mathbf{0.08} &amp; \mathbf{0.84} &amp; \mathbf{0.08} \end{bmatrix} \begin{matrix} \leftarrow \text{The} \\ \leftarrow \text{cat} \\ \leftarrow \mathbf{sat} \text{ (èšç„¦ cat)} \end{matrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1.0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0.5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathbf">0.08</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0.5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathbf">0.84</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathbf">0.08</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">The</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord">cat</span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathbf">sat</span></span><span class="mord text"><span class="mord">Â (</span><span class="mord cjk_fallback">èšç„¦</span><span class="mord">Â cat)</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p>è§£é‡Šä¸‹ç¬¬ä¸‰è¡Œæ€ä¹ˆç®—çš„<br/>
å…¬å¼ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>softmax</mtext><mo stretchy="false">(</mo><mfrac><mtext>Scores</mtext><msqrt><mn>3</mn></msqrt></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{softmax}(\frac{\text{Scores}}{\sqrt{3}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4103em;vertical-align:-0.538em;"/><span class="mord text"><span class="mord">softmax</span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.551em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9128em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mtight">3</span></span></span><span style="top:-2.8728em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1272em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Scores</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose">)</span></span></span></span></span>ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mn>3</mn></msqrt><mo>â‰ˆ</mo><mn>1.73</mn></mrow><annotation encoding="application/x-tex">\sqrt{3} \approx 1.73</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1328em;"/><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord">3</span></span></span><span style="top:-2.8672em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1.73</span></span></span></span></span>ã€‚</p>
<ul>
<li>cat å¾—åˆ†: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mi mathvariant="normal">/</mi><mn>1.73</mn><mo>â‰ˆ</mo><mn>2.3</mn></mrow><annotation encoding="application/x-tex">4 / 1.73 \approx 2.3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">4/1.73</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2.3</span></span></span></span></span></li>
<li>The/sat å¾—åˆ†: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mn>2.3</mn></msup><mo>â‰ˆ</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">e^{2.3} \approx 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2.3</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">10</span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mn>0</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">e^0 = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ã€‚</li>
<li>æ¦‚ç‡: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mn>10</mn><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>â‰ˆ</mo><mn>0.84</mn></mrow><annotation encoding="application/x-tex">10 / (1+10+1) \approx 0.84</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">10/</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">10</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.84</span></span></span></span></span></li>
</ul>
<p>æ‰€ä»¥æ˜¯ [0.08,0.84,0.08]</p>
<p>æœ€åè®¡ç®— Z çŸ©é˜µ(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi><mo>=</mo><mi>A</mi><mo>Ã—</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">Z = A \times V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></span>)</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">0.08</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">1.68</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">0.16</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>è¾“å‡ºç»™ä¸‹ä¸€å±‚çš„Â The</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>è¾“å‡ºç»™ä¸‹ä¸€å±‚çš„Â cat</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>â†</mo><mtext>è¾“å‡ºç»™ä¸‹ä¸€å±‚çš„Â sat</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">Z = \begin{bmatrix} 1.0 &amp; 0 &amp; 0 \\ 0.5 &amp; 1.0 &amp; 0 \\ \mathbf{0.08} &amp; \mathbf{1.68} &amp; \mathbf{0.16} \end{bmatrix} \begin{matrix} \leftarrow \text{è¾“å‡ºç»™ä¸‹ä¸€å±‚çš„ The} \\ \leftarrow \text{è¾“å‡ºç»™ä¸‹ä¸€å±‚çš„ cat} \\ \leftarrow \text{è¾“å‡ºç»™ä¸‹ä¸€å±‚çš„ sat} \end{matrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1.0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0.5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathbf">0.08</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1.0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathbf">1.68</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathbf">0.16</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord cjk_fallback">è¾“å‡ºç»™ä¸‹ä¸€å±‚çš„</span><span class="mord">Â The</span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord cjk_fallback">è¾“å‡ºç»™ä¸‹ä¸€å±‚çš„</span><span class="mord">Â cat</span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord text"><span class="mord cjk_fallback">è¾“å‡ºç»™ä¸‹ä¸€å±‚çš„</span><span class="mord">Â sat</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<p>è‡³æ­¤åˆå§‹å€¼ X å‘é‡ç»è¿‡ MHA åå˜ä¸ºäº† Z å‘é‡ï¼Œå¯ä»¥çœ‹åˆ° sat çš„åŸå§‹å‘é‡å‘ cat å€¾æ–œäº†ã€‚</p>
<p>32 ä¸ªå¤´åŒæ—¶è¿™ä¹ˆè¿›è¡Œï¼Œæ¯ä¸ªå¤´éƒ½ä¼šå¾—åˆ°ä¸€ä¸ª Z å‘é‡ç»“æœï¼Œå–æœ€åä¸€è¡Œçš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Z</mi><mrow><mi>c</mi><mi>a</mi><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">Z_{cat}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æŠŠä»–ä»¬å…¨éƒ¨æ‹¼æ¥èµ·æ¥ï¼Œåˆå˜æˆäº†ä¸€ä¸ªå½¢çŠ¶ä¸º [1,4096] çš„å‘é‡ã€‚ï¼ˆæ¨ç†æ˜¯åªç”¨æœ€åä¸€ä¸ª tokenï¼Œè®­ç»ƒéƒ½ç”¨äº†ï¼‰</p>
<p>ä½†å‘é‡çš„ 0<del>128 ä½æ˜¯å¤´ 1 çš„è¡¨ç¤ºçš„æ˜¯è¯­æ³•ï¼Œå¤´ 2 çš„ 128</del>256 ä½è¡¨ç¤ºä½ç½®ç­‰ç­‰ï¼Œä¸€ç›´åˆ°å¤´ 32ï¼Œæœ€ç»ˆéœ€è¦å†ä¹˜ä»¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>o</mi></msub></mrow><annotation encoding="application/x-tex">W_o</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">o</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çŸ©é˜µï¼ŒæŠŠè¿™äº›ç‹¬ç«‹çš„ä¿¡æ¯èä¸ºä¸€ä½“ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚</p>
<p>è¿™å°±æ˜¯ MHA çš„å…¨éƒ¨è¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-6">FFN</h4>
<p>Z ç»è¿‡æ®‹å·®è¿æ¥å’Œå±‚å½’ä¸€åŒ–åï¼Œè¿›å…¥ FFNã€‚</p>
<p>FFN é‡Œé¢æœ‰ä¸¤ä¸ªåœ¨é˜¶æ®µäºŒè®­ç»ƒå¥½çš„çŸ©é˜µï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">W_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">W_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">W_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯å‡ç»´çŸ©é˜µï¼Œå½¢çŠ¶æ˜¯ [d_modle, 4<em>d_modle]ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">W_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯é™ç»´çŸ©é˜µï¼Œå½¢çŠ¶æ˜¯ [4</em>d_modle,d_modle]ã€‚</p>
<p>å‡è®¾ Z å·²ç»å®Œæˆæ®‹å·®è¿æ¥å’Œå±‚å½’ä¸€åŒ–ï¼Œä¹˜ä»¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">W_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çŸ©é˜µ</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mrow><mi>u</mi><mi>p</mi></mrow></msub><mo>=</mo><msub><mi>Z</mi><mrow><mi>s</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>Ã—</mo><msub><mi>W</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">H_{up} = Z_{sat} \times W_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0813em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></p>
<p>å‡ç»´åæœ‰æ›´å¤šæ›´ç»†èŠ‚çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ Apple è¿™ä¸ª token å‡ç»´å‰çš„å‘é‡æ˜¯ <code>x = [0.8, 0.1, 0.5]</code> åˆ†åˆ«ä»£ç æ˜¯æ°´æœï¼Œæ˜¯å…¬å¸ï¼Œæ˜¯çº¢è‰²çš„ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">W_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å°±åƒåŒ…å« 6 ä¸ªé—®é¢˜çš„é—®å·ï¼š</p>
<ul>
<li>æ˜¯ç”µå­äº§å“å—ï¼Ÿ</li>
<li>æ˜¯çº¢è‰²çš„å—ï¼Ÿ</li>
<li>èƒ½åƒå—ï¼Ÿ</li>
<li>æ˜¯äº¤é€šå·¥å…·å—ï¼Ÿ</li>
<li>æœ‰æ¯›å—ï¼Ÿ</li>
<li>æ˜¯æ¶²ä½“å—ï¼Ÿ</li>
</ul>
<p>è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mo>=</mo><mi>x</mi><mo>Ã—</mo><msub><mi>W</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">H = x \times W_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼š</p>
<p>ç»“æœå‘é‡ï¼ˆ6ç»´ï¼‰å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<p>[10, 8, 9, -5, -10, -2]</p>
<ul>
<li><strong>10 (æ˜¯ç”µå­äº§å“):</strong> å‘½ä¸­ï¼</li>
<li><strong>8 (æ˜¯çº¢è‰²çš„):</strong> å‘½ä¸­ï¼</li>
<li><strong>9 (èƒ½åƒ):</strong> å‘½ä¸­ï¼</li>
<li><strong>-5 (æ˜¯äº¤é€šå·¥å…·):</strong> å®Œå…¨ä¸æ˜¯ï¼Œè´Ÿåˆ†ï¼</li>
<li><strong>-10 (æœ‰æ¯›):</strong> è´Ÿåˆ†æ»šç²—ï¼</li>
<li><strong>-2 (æ˜¯æ¶²ä½“):</strong> ä¸å¤ªåƒã€‚</li>
</ul>
<p>ç„¶åç»è¿‡ ReLU æ¿€æ´»å‡½æ•°å¤„ç†ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>max</mi><mo>â¡</mo><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x) = \max(0, x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">max</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>ï¼ŒæŠŠå°äº 0 çš„ç½®ä½ 0ï¼Œç»“æœå°±å˜æˆäº† [10, 8, 9, 0, 0, 0]ã€‚</p>
<p>å†é€šè¿‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">W_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æŠŠç»“æœå‹ç¼©å›å»ï¼Œå»æ‰æ— ç”¨ä¿¡æ¯ï¼Œæ¯”å¦‚å˜æˆäº† [5.0, 2.0, 8.0]ã€‚</p>
<p>å†æŠŠè¿™ä¸ªå€¼åšä¸€é“æ®‹å·®è¿æ¥ï¼Œæ•´ä¸ª Layer å±‚æ‰§è¡Œç»“æŸï¼ŒæŠŠç»“æœä½œä¸ºè¾“å…¥ä¼ ç»™ä¸‹ä¸€ä¸ª Layer å±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PAI Physical AI Notebookè¯¦è§£3ï¼šåŸºäºä»¿çœŸçš„å¯¼èˆªæ¨¡å‹è®­ç»ƒ]]></title>    <link>https://juejin.cn/post/7574045294611808291</link>    <guid>https://juejin.cn/post/7574045294611808291</guid>    <pubDate>2025-11-19T08:38:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574045294611808291" data-draft-id="7573864324713676852" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PAI Physical AI Notebookè¯¦è§£3ï¼šåŸºäºä»¿çœŸçš„å¯¼èˆªæ¨¡å‹è®­ç»ƒ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-19T08:38:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PAI Physical AI Notebookè¯¦è§£3ï¼šåŸºäºä»¿çœŸçš„å¯¼èˆªæ¨¡å‹è®­ç»ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:38:07.000Z" title="Wed Nov 19 2025 08:38:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ä¸¤æœŸï¼Œæˆ‘ä»¬å·²ç»åˆ†åˆ«åŸºäºä»¿çœŸç¯å¢ƒå’Œä¸–ç•Œæ¨¡å‹è¿›è¡Œäº†é’ˆå¯¹Manipulationï¼ˆåŠ¨ä½œæ§åˆ¶ï¼‰æ¨¡å‹çš„è®­ç»ƒæ•°æ®åˆæˆä¸æ¨¡ä»¿å­¦ä¹ ã€‚æˆ‘ä»¬æ¥å›é¡¾ä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5397c9718de04142955000b58f3c7ad4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=n4xww8psEFf01%2Bfd5XpY%2F2wRtpI%3D" alt="image.png" loading="lazy"/></p>
<p>é’ˆå¯¹å…·èº«æ™ºèƒ½åœºæ™¯ï¼Œé™¤äº†Maniputionï¼ŒNavigationï¼ˆå¯¼èˆªï¼‰ä¹Ÿæ˜¯ä¸€ç±»éå¸¸é‡è¦çš„æ§åˆ¶æ¨¡å‹ï¼Œæœ¬æœŸæˆ‘ä»¬å°±æ¥è¯¦ç»†è§£è¯»åŸºäºä»¿çœŸç¯å¢ƒçš„å¯¼èˆªæ¨¡å‹è®­ç»ƒçš„å…¨è¿‡ç¨‹ã€‚</p>
<p>å’ŒåŠ¨ä½œæ§åˆ¶æ¨¡å‹ç±»ä¼¼ï¼Œå¯¹å¯¼èˆªæ¨¡å‹çš„è®­ç»ƒä¹Ÿå¯ä»¥é€šè¿‡äººå·¥æ¼”ç¤ºã€æ•°æ®æ‰©å¢ã€æ•°æ®å¢å¼ºã€æ¨¡ä»¿å­¦ä¹ å’Œæ¨¡å‹æµ‹è¯„å‡ ä¸ªç¯èŠ‚æ¥è¿›è¡Œã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71911d95af9b4c4b8f3b46064a2f76b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=T5i%2Fk07CoCwxWxqVqve2SnzZeAg%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†æ˜¯ç›¸æ¯”åŠ¨ä½œæ§åˆ¶æ¨¡å‹ï¼Œå¯¼èˆªæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>äººå·¥æ¼”ç¤ºç›¸å¯¹ç®€å•ï¼Œåªéœ€è¦åœ¨äºŒç»´å¹³é¢ä¸Šæ§åˆ¶è¿åŠ¨æ–¹å‘å³å¯</li>
<li>æ•°æ®æ‰©å¢ç›¸å¯¹ç®€å•ï¼Œå› ä¸ºäºŒç»´å¹³é¢ä¸Šä»…æœ‰2ä¸ªè‡ªç”±åº¦</li>
<li>è¿åŠ¨æ§åˆ¶çš„ç›®æ ‡æ›´å¤æ‚ï¼Œä¸å†æ˜¯å®Œæˆå…ˆéªŒçš„ç‰¹å®šåŠ¨ä½œï¼Œè€Œæ˜¯åˆ°è¾¾ä¸€ä¸ªéšæœºæŒ‡å®šçš„åæ ‡</li>
<li>åŸºäºä¸Šè¿°ç¬¬3ç‚¹çš„åŸå› ï¼Œå¯¹å¯¼èˆªæ¨¡å‹çš„æµ‹è¯„ä¹Ÿæ›´åŠ å¤æ‚ï¼Œéœ€è¦ç»“åˆä»¿çœŸç¯å¢ƒå’Œæ¨¡å‹æ¨ç†è¿›è¡Œåœ¨ç¯éªŒè¯</li>
</ul>
<p>åœ¨PAIçš„NotebookÂ Galleryä¸­ï¼Œæˆ‘ä»¬å·²ç»é¢„ç½®äº†ä¸€ä¸ªæœ€ä½³å®è·µï¼Œå°±æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„ä¸€ä¸ªå…·ä½“ç¤ºä¾‹ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgallery.pai-ml.com%2F%23%2Fpreview%2FdeepLearning%2Fcv%2Fisaac_sim_wf3" target="_blank" title="https://gallery.pai-ml.com/#/preview/deepLearning/cv/isaac_sim_wf3" ref="nofollow noopener noreferrer">gallery.pai-ml.com/#/preview/dâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c11167d6ff314fc3ab91914c91432214~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=y2u8pNBhVVJMNOZx4MsJ8itG8cg%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£è¯»è¿™ä¸ªç¤ºä¾‹ã€‚</p>
<h2 data-id="heading-0">ä½¿ç”¨IsaacÂ Assetå…¬å…±æ•°æ®é›†</h2>
<p>ç”±äºå¯¼èˆªæ¨¡å‹çš„è®­ç»ƒéœ€è¦ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„3Dåœºæ™¯ï¼Œåœ¨PAIçš„å…¬å…±æ•°æ®é›†ä¸­å·²ç»å†…ç½®äº†ä¸€ä¸ªæ•°æ®é›†ï¼ŒåŒ…å«äº†ä¸€äº›3Dåœºæ™¯ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61ecbcbc24c246ed9b2cadcccc46abde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=um1SKZqoToanT73tg4OLcpx2MM0%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨å¯åŠ¨ç”¨äºäººå·¥æ¼”ç¤ºçš„DSWæ—¶ï¼Œé™¤äº†é€‰æ‹©èµ„æºç±»å‹ã€è‡ªå®šä¹‰æ•°æ®é›†ï¼Œè¿˜å¯ä»¥é€‰æ‹©è¿™ä¸ªå…¬å…±æ•°æ®é›†ï¼Œæ–¹ä¾¿åç»­çš„åœºæ™¯æ„å»º
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/faf56c4892d44a9d9a20aca76d8484fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=mhADkGkjnykMU99jNj8%2BPBpU%2F%2FI%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ ·ï¼ŒDSWå¯åŠ¨åï¼Œå°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªå…¬å…±æ•°æ®é›†ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/968d70820ee646899dee5c3a4b2f8b42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=FBcFJuZt9I8en2RQJ5VYxyQbWIE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">äººå·¥å°‘é‡æ¼”ç¤º</h2>
<h3 data-id="heading-2">åŠ è½½åœºæ™¯</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªDSWä¸­ï¼Œé€šè¿‡livestreamå¯åŠ¨IsaacÂ Simç¯å¢ƒï¼š</p>
<pre><code class="hljs language-python" lang="python">export ACCEPT_EULA=Y
PUBLIC_IP=$(curl -s ifconfig.me) &amp;&amp; /isaac-sim/runheadless.sh --/persistent/isaac/asset_root/default=<span class="hljs-string">"/mnt/data/isaac_tmp/isaac_asset/Assets/Isaac/5.0"</span> --/app/livestream/publicEndpointAddress=$PUBLIC_IP --/app/livestream/port=<span class="hljs-number">49100</span>
</code></pre>
<p>å³å¯åœ¨IsaacÂ Simä¸­é€šè¿‡IsaacÂ Assetå…¬å…±æ•°æ®é›†åŠ è½½å¯¼èˆªæ¨¡å‹å°†è¦è¿è¡Œçš„åœºæ™¯ï¼š</p>
<p>ï¼ˆåœºæ™¯ç›®å½•ï¼š/mnt/isaac_assets/5.0/Isaac/Environments/Simple_Warehouse/warehouse_multiple_shelves.usdï¼‰
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2e8bc794ae84b77ba3c63d5d3e22621~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=ghCpSqB07zF%2B068TrC4UNFLY%2Bo0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">åˆ›å»ºOccupancyÂ Map</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä¸ºè¿™ä¸ªåœºæ™¯åˆ›å»ºOccupancyÂ Mapï¼Œè¿™æ ·MobilityGenå°±çŸ¥é“æœºå™¨äººåœ¨å“ªé‡Œå¯ä»¥ç§»åŠ¨ã€‚</p>
<ol>
<li>é€‰æ‹©Â ToolsÂ &gt;Â RoboticsÂ &gt;Â OccupancyÂ MapÂ æ‰“å¼€å ç”¨åœ°å›¾æ‰©å±•</li>
<li>åœ¨å ç”¨åœ°å›¾çª—å£ä¸­è®¾ç½®å‚æ•°ï¼š<br/>
Origin:Â X=2.0,Â Y=0.0,Â Z=0.0<br/>
UpperÂ Bound:Â X=10.0,Â Y=20.0,Â Z=2.0<br/>
LowerÂ Bound:Â X=-14.0,Â Y=-18.0,Â Z=0.1</li>
<li>ç‚¹å‡»Â <code>Calculate</code>Â ç”Ÿæˆå ç”¨åœ°å›¾</li>
<li>ç‚¹å‡»Â VisualizeÂ ImageÂ æŸ¥çœ‹å ç”¨åœ°å›¾</li>
<li>åœ¨å¯è§†åŒ–çª—å£ä¸­é€‰æ‹©Â RotateÂ Image:Â 180</li>
<li>é€‰æ‹©Â CoordinateÂ Type:Â ROSÂ OccupancyÂ MapÂ ParametersÂ FileÂ YAML</li>
<li>ç‚¹å‡»Â RegenerateÂ Image</li>
<li>å¤åˆ¶ç”Ÿæˆçš„YAMLæ–‡æœ¬</li>
<li>åˆ›å»ºæ–‡ä»¶Â <code>~/MobilityGenData/maps/warehouse_multiple_shelves/map.yaml</code></li>
<li>ç²˜è´´YAMLå†…å®¹å¹¶ä¿®æ”¹Â <code>image:Â warehouse_multiple_shelves.png</code>Â ä¸ºÂ <code>image:Â map.png</code></li>
<li>ä¿å­˜æ–‡ä»¶</li>
<li>åœ¨å¯è§†åŒ–çª—å£ä¸­ç‚¹å‡»Â SaveÂ Imageï¼Œåœ¨<code>/root/MobilityGenData/maps/warehouse_multiple_shelves</code>ä¸‹ä¿å­˜ä¸ºÂ <code>map.png</code>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a5e54b7938e47fb832785524cfde448~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=2UoOWWQ1lWASC6ZUl7wntiv5Mts%3D" alt="image.png" loading="lazy"/></li>
</ol>
<h3 data-id="heading-4">å¯åŠ¨MobilityGenæ’ä»¶</h3>
<p>æŒ‰ç…§ä¸‹åˆ—æ“ä½œå¯åŠ¨MobilityGenæ’ä»¶ï¼š</p>
<ol>
<li>å¯¼èˆªåˆ°Â WindowÂ &gt;Â Extensions</li>
<li>æœç´¢Â MobilityGenÂ UI</li>
<li>ç‚¹å‡»åˆ‡æ¢å¼€å…³å¯ç”¨æ‰©å±•</li>
<li>æ‚¨åº”è¯¥çœ‹åˆ°ä¸¤ä¸ªçª—å£ï¼šMobilityGenÂ UIå’Œå ç”¨åœ°å›¾å¯è§†åŒ–çª—å£
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26d357875f0547fcbe441166587c5821~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=ZdX6htAh5eU0L%2Feniwr%2F%2FaBSKWM%3D" alt="image.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f8f3331980c44049008448321f02ac5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=3w73GtHLrlUrUGGXO5jRox4y2UA%3D" alt="image.png" loading="lazy"/></li>
</ol>
<p>åœ¨MobilityGençª—å£ä¸­è®¾ç½®ä»¥ä¸‹å‚æ•°ï¼š</p>
<ol>
<li>
<p><strong>Stage</strong>:Â ç²˜è´´ä»“åº“USDè·¯å¾„</p>
<pre><code class="hljs language-plaintext" lang="plaintext">/mnt/isaac_assets/5.0/Isaac/Environments/Simple_Warehouse/warehouse_multiple_shelves.usd
</code></pre>
</li>
<li>
<p><strong>OccupancyÂ Map</strong>:Â è¾“å…¥ä¹‹å‰åˆ›å»ºçš„map.yamlæ–‡ä»¶è·¯å¾„</p>
<pre><code class="hljs language-plaintext" lang="plaintext">~/MobilityGenData/maps/warehouse_multiple_shelves/map.yaml
</code></pre>
</li>
<li>
<p><strong>Robot</strong>:Â é€‰æ‹©Â <strong>CarterRobot</strong></p>
</li>
<li>
<p><strong>Scenario</strong>:Â é€‰æ‹©Â <strong>KeyboardTeleoperationScenario</strong>ï¼ˆå¯é€‰ï¼šå¦‚æœæ‚¨æƒ³è‡ªåŠ¨ç”Ÿæˆæ•°æ®ï¼Œè¯·é€‰æ‹©Â <strong>RandomPathFollowingScenario</strong>ï¼‰</p>
</li>
<li>
<p>ç‚¹å‡»Â <strong>Build</strong></p>
</li>
</ol>
<h3 data-id="heading-5">å½•åˆ¶è½¨è¿¹</h3>
<ol>
<li>ç‚¹å‡»Â <strong>StartÂ recording</strong>Â å¼€å§‹è®°å½•æ—¥å¿—</li>
<li>ç§»åŠ¨æœºå™¨äººï¼ˆå¦‚æ‚¨é€‰å–<strong>KeyboardTeleoperationScenario</strong>ï¼‰</li>
<li>ç‚¹å‡»Â <strong>StopÂ recording</strong>Â åœæ­¢è®°å½•</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.video.taobao.com%2Fvod%2FFZuzlx0k-G4EEVTb4lFDJm4VbzqbLDd8ae5Qcin4t1o.mp4" target="_blank" title="https://cloud.video.taobao.com/vod/FZuzlx0k-G4EEVTb4lFDJm4VbzqbLDd8ae5Qcin4t1o.mp4" ref="nofollow noopener noreferrer">è§†é¢‘æ¼”ç¤º&gt;&gt;</a></p>
<p>æ•°æ®ç°åœ¨è®°å½•åˆ°Â <code>~/MobilityGenData/recordings</code>Â ç›®å½•ä¸­ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbc68468c0d94335b6d455b1f444a57d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=isIEU9kIVc4Ns449A%2Fb2awt3gfs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">é‡æ”¾ç”Ÿæˆè§†é¢‘</h3>
<p>ç„¶åä½¿ç”¨IsaacÂ Simæä¾›çš„Â <code>replay_directory.py</code>Â Pythonè„šæœ¬é‡æ”¾åœºæ™¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /isaac-sim &amp;&amp; \
/isaac-sim/python.sh standalone_examples/replicator/mobility_gen/replay_directory.py --render_interval 10 --<span class="hljs-built_in">enable</span> isaacsim.replicator.mobility_gen.examples
</code></pre>
<p>è„šæœ¬å®Œæˆåï¼Œé‡æ”¾æ¸²æŸ“çš„å›¾åƒå’Œä¼ æ„Ÿå™¨æ•°æ®ä¼šè¢«ä¿å­˜åˆ°Â <code>~/MobilityGenData/replays</code>è·¯å¾„ä¸‹
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcdd07c0b72d41ae82aaa35a9c16a892~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=XUFCn0FINbO%2F3vGMC1gXkYBAzPk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7">æ•°æ®å¢å¼º</h2>
<p>æˆ‘ä»¬ä½¿ç”¨Cosmos-Transfer1-7Bæ¨¡å‹æ¥å¢å¼ºé‡‡é›†åˆ°çš„å›¾åƒæ•°æ®ã€‚åœ¨PAI-ModelGalleryä¸­å·²ç»é›†æˆäº†è¿™ä¸ªæ¨¡å‹çš„éƒ¨ç½²æ–¹æ¡ˆï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4832a98022d74b2e8a3f317c4cc5b1e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=T2hS47LPKPHY2qjv7wpV4d5RFO0%3D" alt="image.png" loading="lazy"/></p>
<p>å®Œæˆæ¨¡å‹éƒ¨ç½²åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹è„šæœ¬æ¥å¯¹å›¾åƒæ•°æ®è¿›è¡Œå¢å¼ºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">import</span> shutil
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> gradio_client.client <span class="hljs-keyword">as</span> gradio_client
<span class="hljs-keyword">import</span> gradio_client.utils <span class="hljs-keyword">as</span> gradio_utils  

<span class="hljs-comment"># å®šä¹‰CosmosæœåŠ¡URLå’ŒToken</span>
<span class="hljs-comment"># COSMOS_SERVICE_URL = "http://xxxxxx"  # è¯·æ›¿æ¢ä¸ºå®é™…æœåŠ¡URL</span>
<span class="hljs-comment"># EAS_TOKEN = "your_eas_token"  # è¯·æ›¿æ¢ä¸ºå®é™…EAS Token</span>

RGB_TARGETS = [
    <span class="hljs-string">"state/rgb/robot.front_camera.left.rgb_image"</span>,
    <span class="hljs-string">"state/rgb/robot.front_camera.right.rgb_image"</span>,
]

<span class="hljs-comment"># --- æ¨¡å—1: å›¾åƒåºåˆ—è½¬è§†é¢‘ ---</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_sequence_to_video</span>(<span class="hljs-params">input_dir: Path, output_path: Path, fps: <span class="hljs-built_in">int</span>, image_format: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - Converting to video: <span class="hljs-subst">{input_dir.name}</span> (Format: <span class="hljs-subst">{image_format}</span>)"</span>)
    image_files = <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">list</span>(input_dir.glob(<span class="hljs-string">f'*.<span class="hljs-subst">{image_format}</span>'</span>)))
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> image_files:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    -&gt; No '<span class="hljs-subst">{image_format}</span>' images found. Skipping."</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    <span class="hljs-keyword">try</span>:
        first_img = cv2.imread(<span class="hljs-built_in">str</span>(image_files[<span class="hljs-number">0</span>]))
        <span class="hljs-keyword">if</span> first_img <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>: <span class="hljs-keyword">raise</span> IOError(<span class="hljs-string">"Cannot read the first image."</span>)
        height, width = first_img.shape[:<span class="hljs-number">2</span>]
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    -&gt; Error reading first image: <span class="hljs-subst">{e}</span>. Skipping."</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    output_path.parent.mkdir(parents=<span class="hljs-literal">True</span>, exist_ok=<span class="hljs-literal">True</span>)
    fourcc = cv2.VideoWriter_fourcc(*<span class="hljs-string">'mp4v'</span>)
    out = cv2.VideoWriter(<span class="hljs-built_in">str</span>(output_path), fourcc, fps, (width, height))
    <span class="hljs-keyword">for</span> image_file <span class="hljs-keyword">in</span> image_files:
        frame = cv2.imread(<span class="hljs-built_in">str</span>(image_file))
        <span class="hljs-keyword">if</span> frame <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            out.write(frame)
    out.release()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    -&gt; Video created: <span class="hljs-subst">{output_path}</span>"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

<span class="hljs-comment"># --- æ–°æ¨¡å—: è§†é¢‘è½¬å›¾åƒåºåˆ— ---</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">split_video_to_frames</span>(<span class="hljs-params">video_path: Path, output_dir: Path, original_image_dir: Path, image_format: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""
    å°†è§†é¢‘æ–‡ä»¶æ‹†åˆ†ä¸ºä¸€å¸§å¸§çš„å›¾ç‰‡ï¼Œå¹¶ä½¿ç”¨åŸå§‹å›¾ç‰‡çš„æ–‡ä»¶åè¿›è¡Œå‘½åã€‚
    """</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - Splitting video back to frames: <span class="hljs-subst">{video_path.name}</span>"</span>)
    
    <span class="hljs-comment"># 1. è·å–åŸå§‹æ–‡ä»¶åä½œä¸ºæ¨¡æ¿</span>
    original_image_files = <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">list</span>(original_image_dir.glob(<span class="hljs-string">f'*.<span class="hljs-subst">{image_format}</span>'</span>)))
    original_filenames = [p.name <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> original_image_files]
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> original_filenames:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    -&gt; Warning: Could not find original images in <span class="hljs-subst">{original_image_dir}</span> to use for naming. Skipping frame splitting."</span>)
        <span class="hljs-keyword">return</span>

    <span class="hljs-comment"># 2. å‡†å¤‡è¾“å‡ºç›®å½•</span>
    output_dir.mkdir(parents=<span class="hljs-literal">True</span>, exist_ok=<span class="hljs-literal">True</span>)
    
    <span class="hljs-comment"># 3. æ‰“å¼€è§†é¢‘æ–‡ä»¶å¹¶é€å¸§è¯»å–</span>
    cap = cv2.VideoCapture(<span class="hljs-built_in">str</span>(video_path))
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> cap.isOpened():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    -&gt; Error: Could not open video file <span class="hljs-subst">{video_path}</span>. Skipping."</span>)
        <span class="hljs-keyword">return</span>

    frame_index = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        ret, frame = cap.read()
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ret:
            <span class="hljs-keyword">break</span>  <span class="hljs-comment"># è§†é¢‘ç»“æŸ</span>

        <span class="hljs-keyword">if</span> frame_index &lt; <span class="hljs-built_in">len</span>(original_filenames):
            <span class="hljs-comment"># ä½¿ç”¨åŸå§‹æ–‡ä»¶åæ¥ä¿å­˜æ–°å¸§</span>
            output_filepath = output_dir / original_filenames[frame_index]
            cv2.imwrite(<span class="hljs-built_in">str</span>(output_filepath), frame)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># å¦‚æœè§†é¢‘å¸§æ•°å¤šäºåŸå§‹å›¾ç‰‡æ•°ï¼Œåˆ™åœæ­¢ï¼Œé¿å…å‘½åå†²çª</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    -&gt; Warning: Video contains more frames than original image sequence. Stopping at frame <span class="hljs-subst">{frame_index}</span>."</span>)
            <span class="hljs-keyword">break</span>
        
        frame_index += <span class="hljs-number">1</span>

    cap.release()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    -&gt; Success! <span class="hljs-subst">{frame_index}</span> frames saved to: <span class="hljs-subst">{output_dir}</span>"</span>)

<span class="hljs-comment"># --- æ¨¡å—2: è°ƒç”¨CosmosæœåŠ¡ ---</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">cosmos_sync_with_upload</span>(<span class="hljs-params">client, rgb_video_path, seg_video_path, output_dir, original_rgb_dir</span>):
    <span class="hljs-string">"""ä¸Šä¼ è§†é¢‘ï¼Œè°ƒç”¨APIï¼Œä¸‹è½½ç»“æœï¼Œå¹¶è§¦å‘è§†é¢‘åˆ°å¸§çš„è½¬æ¢ã€‚"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">upload_file</span>(<span class="hljs-params">filepath: Path</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> filepath <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> filepath.exists(): <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  - Uploading: <span class="hljs-subst">{filepath.name}</span>"</span>)
        file_desc = gradio_utils.handle_file(<span class="hljs-built_in">str</span>(filepath))
        result_str = client.predict(file_desc, api_name=<span class="hljs-string">"/upload_file"</span>)
        <span class="hljs-keyword">return</span> json.loads(result_str).get(<span class="hljs-string">"path"</span>)

    remote_rgb_path = upload_file(rgb_video_path)
    remote_seg_path = upload_file(seg_video_path)

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> remote_rgb_path <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> remote_seg_path:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">"è§†é¢‘ä¸Šä¼ å¤±è´¥"</span>

    request_dict = create_cosmos_request(remote_rgb_path, remote_seg_path)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"  - Sending generation request to Cosmos service..."</span>)
    result = client.predict(json.dumps(request_dict), api_name=<span class="hljs-string">"/generate_video"</span>)
    
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(result, <span class="hljs-built_in">tuple</span>) <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(result) &gt;= <span class="hljs-number">2</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(result[<span class="hljs-number">0</span>], <span class="hljs-built_in">dict</span>):
        video_path = result[<span class="hljs-number">0</span>].get(<span class="hljs-string">"video"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> video_path:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">f"API did not return a video path. Message: <span class="hljs-subst">{result[<span class="hljs-number">1</span>]}</span>"</span>

        output_file = Path(output_dir) / <span class="hljs-string">f"<span class="hljs-subst">{rgb_video_path.stem}</span>_cosmos_enhanced.mp4"</span>
        
        <span class="hljs-comment"># ç»Ÿä¸€å¤„ç†ä¸‹è½½æˆ–å¤åˆ¶çš„é€»è¾‘</span>
        success = <span class="hljs-literal">False</span>
        <span class="hljs-keyword">if</span> video_path.startswith((<span class="hljs-string">"http://"</span>, <span class="hljs-string">"https://"</span>)):
            <span class="hljs-keyword">try</span>:
                resp = requests.get(video_path, stream=<span class="hljs-literal">True</span>, timeout=<span class="hljs-number">300</span>)
                resp.raise_for_status()
                <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">"wb"</span>) <span class="hljs-keyword">as</span> f: shutil.copyfileobj(resp.raw, f)
                success = <span class="hljs-literal">True</span>
            <span class="hljs-keyword">except</span> requests.exceptions.RequestException <span class="hljs-keyword">as</span> e:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">f"Failed to download video: <span class="hljs-subst">{e}</span>"</span>
        <span class="hljs-keyword">else</span>:
            source_path = Path(video_path)
            <span class="hljs-keyword">if</span> source_path.exists():
                shutil.copy2(source_path, output_file)
                success = <span class="hljs-literal">True</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">f"API returned a local path that does not exist: <span class="hljs-subst">{video_path}</span>"</span>

        <span class="hljs-keyword">if</span> success:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  -&gt; Augmented video saved to: <span class="hljs-subst">{output_file}</span>"</span>)
            <span class="hljs-comment"># å®šä¹‰æ–°å¸§çš„è¾“å‡ºç›®å½•ï¼Œä¾‹å¦‚ .../robot.front_camera.left.rgb_image_cosmos</span>
            new_frames_output_dir = original_rgb_dir.parent / <span class="hljs-string">f"<span class="hljs-subst">{original_rgb_dir.name}</span>_cosmos"</span>
            split_video_to_frames(
                video_path=output_file,
                output_dir=new_frames_output_dir,
                original_image_dir=original_rgb_dir,
                image_format=<span class="hljs-string">"jpg"</span>  <span class="hljs-comment"># RGBå›¾åƒçš„åŸå§‹æ ¼å¼</span>
            )
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>, <span class="hljs-built_in">str</span>(output_file)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">"Failed to retrieve the generated video file."</span>
            
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-string">f"Unexpected API response format: <span class="hljs-subst">{result}</span>"</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_cosmos_request</span>(<span class="hljs-params">remote_rgb_path, remote_seg_path</span>):
    <span class="hljs-string">"""åŠ¨æ€åˆ›å»ºCosmosè¯·æ±‚ï¼ŒåŒ…å«ä¸»è§†é¢‘å’Œåˆ†å‰²è§†é¢‘çš„è¿œç¨‹è·¯å¾„ã€‚"""</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"prompt"</span>: <span class="hljs-string">"A realistic warehouse environment with consistent lighting, perspective, and camera motion. Preserve the original structure, object positions, and layout from the input video. Ensure the output exactly matches the segmentation video frame-by-frame in timing and content. Camera movement must follow the original path precisely."</span>,
        <span class="hljs-string">"negative_prompt"</span>: <span class="hljs-string">"The video captures a game playing, with bad crappy graphics and cartoonish frames. It represents a recording of old outdated games. The images are very pixelated and of poor CG quality. There are many subtitles in the footage. Overall, the video is unrealistic and appears cg. Plane background."</span>,
        <span class="hljs-string">"sigma_max"</span>: <span class="hljs-number">80</span>,
        <span class="hljs-string">"guidance"</span>: <span class="hljs-number">7</span>,
        <span class="hljs-string">"input_video_path"</span>: remote_rgb_path, <span class="hljs-comment"># ä¸»è§†é¢‘è·¯å¾„</span>
        <span class="hljs-string">"blur_strength"</span>: <span class="hljs-string">"low"</span>,
        <span class="hljs-string">"canny_threshold"</span>: <span class="hljs-string">"low"</span>,
        <span class="hljs-string">"edge"</span>: {<span class="hljs-string">"control_weight"</span>: <span class="hljs-number">0.3</span>},
        <span class="hljs-string">"seg"</span>: {
            <span class="hljs-string">"control_weight"</span>: <span class="hljs-number">1.0</span>,
            <span class="hljs-string">"input_control"</span>: remote_seg_path <span class="hljs-comment"># åˆ†å‰²è§†é¢‘è·¯å¾„</span>
        }
    }

<span class="hljs-comment"># --- æ¨¡å—3: ä¸»å·¥ä½œæµæ§åˆ¶å™¨ ---</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_and_augment_replays</span>(<span class="hljs-params">output_dir: <span class="hljs-built_in">str</span>, fps: <span class="hljs-built_in">int</span> = <span class="hljs-number">30</span></span>):
    source_root = Path(<span class="hljs-string">"/root/MobilityGenData/replays"</span>)
    output_root = Path(output_dir)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> source_root.is_dir(): <span class="hljs-keyword">return</span>
    timestamp_dirs = [d <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> source_root.iterdir() <span class="hljs-keyword">if</span> d.is_dir()]
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> timestamp_dirs: <span class="hljs-keyword">return</span>
    
    client = gradio_client.Client(COSMOS_SERVICE_URL, hf_token=EAS_TOKEN)

    <span class="hljs-keyword">for</span> ts_dir <span class="hljs-keyword">in</span> timestamp_dirs:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nProcessing replay: <span class="hljs-subst">{ts_dir.name}</span>"</span>)
        final_output_dir = output_root / ts_dir.name
        final_output_dir.mkdir(exist_ok=<span class="hljs-literal">True</span>)
        
        <span class="hljs-keyword">for</span> rgb_rel_path_str <span class="hljs-keyword">in</span> RGB_TARGETS:
            rgb_image_dir = ts_dir / rgb_rel_path_str
            seg_rel_path_str = rgb_rel_path_str.replace(<span class="hljs-string">"rgb"</span>, <span class="hljs-string">"segmentation"</span>)
            seg_image_dir = ts_dir / seg_rel_path_str
            
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (rgb_image_dir.is_dir() <span class="hljs-keyword">and</span> seg_image_dir.is_dir()):
                <span class="hljs-keyword">continue</span>
            
            rgb_video_path = final_output_dir / <span class="hljs-string">f"<span class="hljs-subst">{rgb_image_dir.name}</span>.mp4"</span>
            seg_video_path = final_output_dir / <span class="hljs-string">f"<span class="hljs-subst">{seg_image_dir.name}</span>.mp4"</span>
            
            rgb_ok = convert_sequence_to_video(rgb_image_dir, rgb_video_path, fps, <span class="hljs-string">"jpg"</span>)
            seg_ok = convert_sequence_to_video(seg_image_dir, seg_video_path, fps, <span class="hljs-string">"png"</span>)
            
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (rgb_ok <span class="hljs-keyword">and</span> seg_ok):
                <span class="hljs-keyword">continue</span>

            cosmos_sync_with_upload(
                client, 
                rgb_video_path, 
                seg_video_path, 
                final_output_dir,
                original_rgb_dir=rgb_image_dir
            )

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">20</span> + <span class="hljs-string">" å…¨éƒ¨å¤„ç†å®Œæˆ "</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">20</span>)

<span class="hljs-comment"># --- ç¨‹åºå…¥å£ ---</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    !mkdir -p /root/MobilityGenData/cosmos_augmented_videos
    output_directory = <span class="hljs-string">"/root/MobilityGenData/cosmos_augmented_videos"</span>
    process_and_augment_replays(output_dir=output_directory)
</code></pre>
<p>ä»¥ä¸‹æ˜¯ä¸¤æ®µæ•°æ®å¢å¼ºå‰åçš„è§†é¢‘æ•°æ®ï¼Œä½œä¸ºå¯¹æ¯”ï¼š</p>
<p>å¢å¼ºå‰
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.video.taobao.com%2Fvod%2F0nkgzuEMsC7zGPY0jivLOgJSMd5ojDoigOUS14L9H9c.mp4" target="_blank" title="https://cloud.video.taobao.com/vod/0nkgzuEMsC7zGPY0jivLOgJSMd5ojDoigOUS14L9H9c.mp4" ref="nofollow noopener noreferrer">è§†é¢‘æ¼”ç¤º&gt;&gt;</a></p>
<p>å¢å¼ºå
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.video.taobao.com%2Fvod%2FKIS5xt9rjZubBfL5Y6Tqbk0nY2FeC5qwprEtYNJMBNs.mp4" target="_blank" title="https://cloud.video.taobao.com/vod/KIS5xt9rjZubBfL5Y6Tqbk0nY2FeC5qwprEtYNJMBNs.mp4" ref="nofollow noopener noreferrer">è§†é¢‘æ¼”ç¤º&gt;&gt;</a></p>
<h2 data-id="heading-8">æ¨¡ä»¿å­¦ä¹ </h2>
<p>è¿™é‡Œé€‰æ‹©NVLabçš„å¼€æºæ¨¡å‹X-Mobilityï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNVlabs%2FX-Mobility" target="_blank" title="https://github.com/NVlabs/X-Mobility" ref="nofollow noopener noreferrer">github.com/NVlabs/X-Moâ€¦</a>ï¼‰ä½œä¸ºåŸºæ¨¡ï¼Œè¿›è¡Œæ¨¡ä»¿å­¦ä¹ ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ï¼Œå¯åŠ¨DLCè¿›è¡Œåˆ†å¸ƒå¼è®­ç»ƒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">from</span> alibabacloud_tea_openapi.models <span class="hljs-keyword">import</span> Config
<span class="hljs-keyword">from</span> alibabacloud_credentials.client <span class="hljs-keyword">import</span> Client <span class="hljs-keyword">as</span> CredClient
<span class="hljs-keyword">from</span> alibabacloud_credentials.models <span class="hljs-keyword">import</span> Config <span class="hljs-keyword">as</span> CredConfig
<span class="hljs-keyword">from</span> alibabacloud_pai_dlc20201203.client <span class="hljs-keyword">import</span> Client <span class="hljs-keyword">as</span> DLCClient
<span class="hljs-keyword">from</span> alibabacloud_pai_dlc20201203.models <span class="hljs-keyword">import</span> (
    CreateJobRequest,
    GetJobRequest,
)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">wait_for_job_to_terminate</span>(<span class="hljs-params">client, job_id</span>):
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        job = client.get_job(job_id, GetJobRequest()).body
        <span class="hljs-built_in">print</span>(<span class="hljs-string">'job({}) is {}'</span>.<span class="hljs-built_in">format</span>(job_id, job.status))
        <span class="hljs-keyword">if</span> job.status <span class="hljs-keyword">in</span> (<span class="hljs-string">'Succeeded'</span>, <span class="hljs-string">'Failed'</span>, <span class="hljs-string">'Stopped'</span>):
            <span class="hljs-keyword">return</span> job.status
        time.sleep(<span class="hljs-number">5</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    current_time_tuple = time.localtime()
    year = current_time_tuple.tm_year
    month = current_time_tuple.tm_mon
    day = current_time_tuple.tm_mday
    hour = current_time_tuple.tm_hour
    minute = current_time_tuple.tm_min
    <span class="hljs-comment"># è¯·ç¡®è®¤æ‚¨çš„ä¸»è´¦å·å·²æˆæƒDLCï¼Œä¸”æ‹¥æœ‰è¶³å¤Ÿçš„æƒé™ã€‚</span>
    display_name = <span class="hljs-string">f"train_xmobility_for_isaac_<span class="hljs-subst">{day}</span>_<span class="hljs-subst">{hour}</span>-<span class="hljs-subst">{minute}</span>"</span>  <span class="hljs-comment">#è®¾ç½®ä»»åŠ¡åç§° </span>
    region_id = os.environ.get(<span class="hljs-string">"dsw_region"</span>) <span class="hljs-comment">#è®¾ç½®regionid</span>
    workspace_id = os.environ.get(<span class="hljs-string">'PAI_WORKSPACE_ID'</span>) <span class="hljs-comment">#è®¾ç½®æˆç”¨æˆ·è‡ªå·±çš„å·¥ä½œç©ºé—´id</span>
    image_uri = <span class="hljs-string">f"dsw-registry.<span class="hljs-subst">{region_id}</span>.cr.aliyuncs.com/pai-training-algorithm/isaac-sim:x-mobility-v10"</span> <span class="hljs-comment">#ä½¿ç”¨å®˜æ–¹é•œåƒ</span>
    ecs_spec = <span class="hljs-string">"ecs.gn8v-4x.8xlarge"</span>     <span class="hljs-comment">#</span>
    <span class="hljs-comment">#########è®­ç»ƒä»»åŠ¡ç›¸å…³é…ç½®#############</span>
    <span class="hljs-comment"># æ ·ä¾‹æ•°æ®é›†è®¾ç½®</span>
    <span class="hljs-comment"># data_type = 'pqt'</span>
    <span class="hljs-comment"># dataset1_dir = "/mnt/data/notebook3/x_mobility_isaac_sim_random_160k/data"</span>
    <span class="hljs-comment"># dataset2_dir = "/mnt/data/notebook3/x_mobility_isaac_sim_nav2_100k/data"</span>
    <span class="hljs-comment"># output_dir = "/mnt/data/notebook3/sample_output"</span>
    <span class="hljs-comment"># æ ·ä¾‹cosmosæ•°æ®é›†è®¾ç½®</span>
    data_type = <span class="hljs-string">'pqt'</span>
    dataset1_dir = <span class="hljs-string">"/mnt/data/notebook3/x_mobility_isaac_sim_random_160k_cosmos_to_xmob_resized/afm_isaac_sim_random_160k/data"</span>
    dataset2_dir = <span class="hljs-string">"/mnt/data/notebook3/x_mobility_isaac_sim_nav2_100k_cosmos_to_xmob_resized/afm_isaac_sim_nav2_100k/data"</span>
    output_dir = <span class="hljs-string">"/mnt/data/notebook3/sample_cosmos_output"</span>
    <span class="hljs-comment"># mobilitygenæ•°æ®é›†è®¾ç½®</span>
    <span class="hljs-comment"># data_type = 'lerobot'</span>
    <span class="hljs-comment"># dataset1_dir = "/mnt/data/notebook3/x_mobility_isaac_sim_mobilitygen"</span>
    <span class="hljs-comment"># dataset2_dir = "/mnt/data/notebook3/x_mobility_isaac_sim_mobilitygen"</span>
    <span class="hljs-comment"># output_dir = "/mnt/data/notebook3/mobilitygen_output"</span>
    <span class="hljs-comment">#########è®­ç»ƒä»»åŠ¡ç›¸å…³é…ç½®#############</span>

    <span class="hljs-comment"># æœ¬ç¤ºä¾‹é€šè¿‡Credentials SDKé»˜è®¤ä»ç¯å¢ƒå˜é‡ä¸­è¯»å–AccessKeyï¼Œæ¥å®ç°èº«ä»½éªŒè¯ã€‚</span>
    credentialsConfig = CredConfig(
        <span class="hljs-built_in">type</span>=<span class="hljs-string">'credentials_uri'</span>   <span class="hljs-comment"># é€‰å¡«ã€‚è‹¥æ‚¨æœªé…ç½®å…¶ä»–â€œé»˜è®¤å‡­æ®é“¾â€è®¿é—®æ–¹å¼ï¼Œæ‚¨æ— éœ€å†æ˜¾å¼æŒ‡å®šï¼ŒCredentials SDKä¼šé€šè¿‡uriæ–¹å¼è·å–ä¸´æ—¶å‡­è¯</span>
    )
    cred = CredClient(credentialsConfig)

    <span class="hljs-comment"># 1. create client;</span>
    dlc_client = DLCClient(
         config=Config(
            credential=cred,
            region_id=region_id,
            endpoint=<span class="hljs-string">'pai-dlc.{}.aliyuncs.com'</span>.<span class="hljs-built_in">format</span>(region_id),
         )
    )
        
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'-------- Create Job ----------'</span>)
    <span class="hljs-comment"># åˆ›å»ºDLCä½œä¸šã€‚</span>
    create_job_resp = dlc_client.create_job(CreateJobRequest().from_map({
        <span class="hljs-string">'WorkspaceId'</span>: workspace_id,
        <span class="hljs-string">'DisplayName'</span>: display_name,
        <span class="hljs-string">'JobType'</span>: <span class="hljs-string">'PyTorchJob'</span>,
        <span class="hljs-comment"># 'ResourceId': resource_quota_id,</span>
        <span class="hljs-string">'JobSpecs'</span>: [
            {
                <span class="hljs-string">"Type"</span>: <span class="hljs-string">"Master"</span>,
                <span class="hljs-string">"Image"</span>: image_uri,
                <span class="hljs-string">"PodCount"</span>: <span class="hljs-number">1</span>,
                <span class="hljs-string">"EcsSpec"</span>: ecs_spec,
            },
        ],
        <span class="hljs-string">'DataSources'</span>: [
            {
                <span class="hljs-string">"DataSourceId"</span>: dataset_id,
            },
        ],
       <span class="hljs-string">'UserVpc'</span>: {
            <span class="hljs-string">"VpcId"</span>: vpc_id,  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™… VPC ID</span>
            <span class="hljs-string">"SwitchId"</span>: switch_id,  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…äº¤æ¢æœº ID</span>
            <span class="hljs-string">"SecurityGroupId"</span>: security_groupid  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…å®‰å…¨ç»„ ID</span>
        },
        <span class="hljs-string">"UserCommand"</span>: <span class="hljs-string">f" export WANDB_MODE=offline &amp;&amp; \
            export NCCL_NVLS_ENABLE=0 &amp;&amp; \
            cd /workspace &amp;&amp; \
            python3 /train_pai/train_wrapper.py \
            -d <span class="hljs-subst">{dataset1_dir}</span> \
            -o <span class="hljs-subst">{output_dir}</span> \
            --type <span class="hljs-subst">{data_type}</span> \
            --stage 1 &amp;&amp; \
            python3 /train_pai/train_wrapper.py \
            -d <span class="hljs-subst">{dataset2_dir}</span> \
            -o <span class="hljs-subst">{output_dir}</span> \
            --type <span class="hljs-subst">{data_type}</span> \
            --stage 2 &amp;&amp; \
            sleep 30"</span>,
    }))
    job_id = create_job_resp.body.job_id

    wait_for_job_to_terminate(dlc_client, job_id)

    <span class="hljs-keyword">pass</span>


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    main()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6b34cba99964daaac70da308750baf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=jHvfl28bQe7Vm67UHX%2BJpAFmkxQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-9">è½¯ä»¶åœ¨ç¯éªŒè¯</h2>
<h3 data-id="heading-10">æ¨¡å‹æ ¼å¼è½¬æ¢</h3>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å¾®è°ƒå¾—åˆ°çš„X-Mobilityæ¨¡å‹è½¬æ¢ä¸ºONNXæ ¼å¼ï¼š</p>
<pre><code class="hljs language-python" lang="python">%cd /X-MOBILITY
<span class="hljs-comment"># ä»¥sampleè®­ç»ƒç»“æœä¸ºä¾‹ï¼Œè¯·æ›´æ¢ä¸ºè‡ªå·±çš„è®­ç»ƒç»“æœè·¯å¾„</span>
!python3 onnx_conversion.py -p /mnt/data/notebook3/nav2_output/checkpoints/last.ckpt -o /tmp/x_mobility.onnx

<span class="hljs-comment"># è¯·å‹¿éšæ„æ›´æ”¹tensorrtè·¯å¾„ï¼Œæ­¤ä¸ºX-Mobilityé»˜è®¤è·¯å¾„</span>
!python3 trt_conversion.py -o /tmp/x_mobility.onnx -t /tmp/x_mobility.engine
</code></pre>
<h3 data-id="heading-11">éƒ¨ç½²ROS2</h3>
<p>ä½¿ç”¨ä»¥ä¸‹è„šæœ¬éƒ¨ç½²ROS2ç¯å¢ƒï¼Œä»¥åŠ è½½X-Mobilityæ¨¡å‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ›å»ºros2å·¥ä½œç©ºé—´æ–‡ä»¶å¤¹</span>
!mkdir -p ~/ros2_ws/src

<span class="hljs-comment"># åˆ›å»ºç¬¦å·é“¾æ¥åˆ°x_mobility_navigator ROS2åŒ…</span>
!ln -s /X-MOBILITY/ros2_deployment/x_mobility_navigator ~/ros2_ws/src/x_mobility_navigator

<span class="hljs-comment"># æ„å»ºROS2å·¥ä½œç©ºé—´</span>
!cd ~/ros2_ws &amp;&amp; colcon build --symlink-install
</code></pre>
<h3 data-id="heading-12">å¯åŠ¨VNC</h3>
<p>X-Mobilityæ¨¡å‹çš„è½¯ä»¶åœ¨ç¯éªŒè¯ä½¿ç”¨IsaacÂ SimÂ +Â ROS2çš„ç»„åˆæ–¹æ¡ˆï¼Œéœ€è¦ä½¿ç”¨VNCä»¥é©±åŠ¨å›¾å½¢åŒ–ç•Œé¢ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨DSWä¸­å¯åŠ¨VNCï¼š</p>
<pre><code class="hljs language-shell" lang="shell">/opt/TurboVNC/bin/vncserver :0 -geometry 4000x3000
</code></pre>
<h3 data-id="heading-13">åœ¨IsaacÂ Simä¸­å¯ç”¨ROS2</h3>
<p>ä½¿ç”¨å¦‚ä¸‹æ­¥éª¤åœ¨IsaacÂ Simä¸­å¯åŠ¨ROS2æ’ä»¶ï¼š</p>
<ol>
<li>
<p>è¿›è¡ŒROS2é¢„é…ç½®</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span> /opt/ros/humble/setup.bash
<span class="hljs-built_in">cd</span> ~/ros2_ws &amp;&amp; <span class="hljs-built_in">source</span> install/setup.bash
<span class="hljs-built_in">source</span> ~/.bashrc

</code></pre>
</li>
<li>
<p>å¯åŠ¨IsaacÂ Sim</p>
<pre><code class="hljs language-bash" lang="bash">ACCEPT_EULA=Y /isaac-sim/runapp.sh --/persistent/isaac/asset_root/default=<span class="hljs-string">"/mnt/isaac_assets/5.0"</span>

</code></pre>
</li>
<li>
<p>é€šè¿‡ç‚¹å‡»<code>RoboticsÂ Examples</code>Â &gt;Â <code>ROS2</code>Â &gt;Â <code>Navigation</code>Â &gt;Â <code>CarterÂ Navigation</code>Â &gt;Â <code>LoadÂ SampleÂ Scene</code>Â å¯åŠ¨Carterå¯¼èˆªç¤ºä¾‹</p>
</li>
<li>
<p>ç‚¹å‡»å·¦ä¾§å·¥å…·æ çš„<code>Play</code>å›¾æ ‡</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d7217e862224a4dbabd009abc7fee22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146287&amp;x-signature=l7%2BcW5%2FL3GPMRC65hiSi6lTobbY%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥æ–°å¼€ä¸€ä¸ªTerminalæµ‹è¯•ROS2è¿æ¥æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½®ROS2ç¯å¢ƒ</span>
<span class="hljs-built_in">source</span> /opt/ros/humble/setup.bash
<span class="hljs-built_in">cd</span> ~/ros2_ws &amp;&amp; <span class="hljs-built_in">source</span> install/setup.bash
<span class="hljs-comment"># åˆ—å‡ºå¯ç”¨ä¸»é¢˜</span>
ros2 topic list

</code></pre>
<p>å¦‚æœçœ‹åˆ°ä»¥ä¸‹ä¸»é¢˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/back_stereo_imu/imu
/chassis/imu
/chassis/odom
/clock
/cmd_vel
/front_3d_lidar/lidar_points
/front_stereo_camera/left/camera_info
/front_stereo_camera/left/image_raw
/front_stereo_camera/left/image_raw/nitros_bridge
/front_stereo_imu/imu
/left_stereo_imu/imu
/parameter_events
/right_stereo_imu/imu
/rosout
/tf

</code></pre>
<p>åˆ™è¯æ˜ROS2æ’ä»¶å®‰è£…æˆåŠŸã€‚</p>
<h3 data-id="heading-14">å¯åŠ¨X-Mobilityæ¨¡å‹</h3>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤åœ¨Terminalä¸­å¯åŠ¨X-MobilityÂ Navigatorè½¯ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½®æ„å»ºçš„å·¥ä½œç©ºé—´</span>
<span class="hljs-built_in">cd</span> ~/ros2_ws &amp;&amp; <span class="hljs-built_in">source</span> install/setup.bash
<span class="hljs-comment"># å¯åŠ¨X-Mobilityå¯¼èˆªå™¨</span>
ros2 launch x_mobility_navigator x_mobility_navigator.launch.py

</code></pre>
<p>è®¾ç½®ç›®æ ‡å§¿æ€ï¼šé€‰æ‹©<code>2DÂ GoalÂ Pose</code>ç„¶åç‚¹å‡»åœ°å›¾è®¾ç½®ä½ç½®/æ–¹å‘ã€‚
å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåº”è¯¥çœ‹åˆ°æœºå™¨äººåœ¨æ¨¡æ‹Ÿä¸­å‘ç›®æ ‡ä½ç½®ç§»åŠ¨ã€‚</p>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>åœ¨æœ¬Â NotebookÂ ä¸­ï¼Œæˆ‘ä»¬åŸºäºé˜¿é‡Œäº‘Â PAIÂ å¹³å°çš„å¼ºå¤§åŠŸèƒ½ï¼Œå®Œæ•´åœ°æ¼”ç¤ºäº†ä½¿ç”¨Â IsaacÂ SimÂ å’ŒÂ X-MobilityÂ çš„é€šç”¨å¯¼èˆªä¸è¿åŠ¨æ§åˆ¶å·¥ä½œæµï¼Œå®ç°äº†ä»æ•°æ®ç”Ÿæˆã€è§†è§‰å¢å¼ºåˆ°æ¨¡å‹è®­ç»ƒå’Œä»¿çœŸéƒ¨ç½²çš„ç«¯åˆ°ç«¯æµç¨‹ã€‚</p>
<p>å¤„ç†æµç¨‹åŒ…æ‹¬ï¼š</p>
<ul>
<li>äººå·¥æ¼”ç¤º:Â ä½¿ç”¨Â IsaacÂ SimÂ 5.0Â å’ŒÂ MobilityGenÂ è‡ªåŠ¨åŒ–ç”Ÿæˆå¤§è§„æ¨¡å¯¼èˆªæ¼”ç¤ºæ•°æ®ã€‚</li>
<li>æ•°æ®æ‰©å¢ï¼ˆå¯é€‰ï¼‰ï¼šä½¿ç”¨MobilityGençš„Randomè½¨è¿¹ç”ŸæˆåŠŸèƒ½ï¼Œå¯ä»¥å¿«é€Ÿæ‰©å¢æ¼”ç¤ºæ•°æ®ã€‚</li>
<li>æ•°æ®å¢å¼º:Â åˆ©ç”¨Â Cosmos-Transfer1Â å¯¹ä»¿çœŸæ•°æ®è¿›è¡Œé£æ ¼è¿ç§»ï¼Œæå‡å…¶çœŸå®æ„Ÿå’Œå¤šæ ·æ€§ã€‚</li>
<li>æ¨¡ä»¿å­¦ä¹ :Â åŸºäºç”Ÿæˆçš„æ•°æ®è®­ç»ƒÂ X-Mobilityï¼Œä¸€ä¸ªä»¥ä¸–ç•Œæ¨¡å‹ä¸ºåŸºç¡€çš„é€šç”¨å¯¼èˆªä¸è¿åŠ¨æ§åˆ¶ç­–ç•¥ã€‚</li>
<li>è½¯ä»¶åœ¨ç¯éªŒè¯:Â å°†è®­ç»ƒå¥½çš„æ¨¡å‹é€šè¿‡Â ROS2Â é›†æˆåˆ°Â IsaacÂ SimÂ ä¸­ï¼Œè¿›è¡Œç«¯åˆ°ç«¯çš„é—­ç¯å¯¼èˆªéªŒè¯ã€‚</li>
</ul>
<p>é€šè¿‡Â CosmosÂ å¢å¼ºæ•°æ®åé‡æ–°è®­ç»ƒçš„Â X-MobilityÂ æ¨¡å‹ï¼Œåœ¨æ³›åŒ–æ€§å’Œé²æ£’æ€§ä¸Šå±•ç°äº†å·¨å¤§æ½œåŠ›ã€‚æ­¤å·¥ä½œæµä¸ºé€šç”¨æœºå™¨äººå¯¼èˆªæä¾›äº†ä¸€å¥—å®Œæ•´çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œæ˜¾è‘—æå‡äº†æ¨¡å‹åœ¨å¤æ‚è§†è§‰ç¯å¢ƒä¸‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œå¹¶ä¸ºÂ Sim2RealÂ çš„æˆåŠŸè¿ç§»å¥ å®šäº†åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Happy-LLMï¼šä»é›¶å¼€å§‹çš„å¤§è¯­è¨€æ¨¡å‹åŸç†ä¸å®è·µæ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7574230922314285062</link>    <guid>https://juejin.cn/post/7574230922314285062</guid>    <pubDate>2025-11-19T08:44:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574230922314285062" data-draft-id="7574230922314252294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Happy-LLMï¼šä»é›¶å¼€å§‹çš„å¤§è¯­è¨€æ¨¡å‹åŸç†ä¸å®è·µæ•™ç¨‹"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-19T08:44:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Happy-LLMï¼šä»é›¶å¼€å§‹çš„å¤§è¯­è¨€æ¨¡å‹åŸç†ä¸å®è·µæ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:44:04.000Z" title="Wed Nov 19 2025 08:44:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f701f34f207d4cfba043219bf8ee4475~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764146643&amp;x-signature=y5ZsL2DXDXx3RxbyhUsfn0J2q74%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€é¡¹ç›®æ¦‚è¿°</h2>
<p>ã€ŠHappy-LLMã€‹é¡¹ç›®æ˜¯ä¸€ä¸ªç³»ç»Ÿæ€§çš„ LLM å­¦ä¹ æ•™ç¨‹çš„å¼€æºé¡¹ç›®ï¼Œæ—¨åœ¨å¸®åŠ©å­¦ä¹ è€…æ·±å…¥ç†è§£å¤§è¯­è¨€æ¨¡å‹çš„æ ¸å¿ƒåŸç†å’Œè®­ç»ƒè¿‡ç¨‹ï¼Œå¹¶èƒ½å¤Ÿäº²æ‰‹æ­å»ºå’Œè®­ç»ƒä¸€ä¸ª LLMã€‚</p>
<p>é€‚åˆå¤§å­¦ç”Ÿã€ç ”ç©¶äººå‘˜å’Œ LLM çˆ±å¥½è€…é˜…è¯»ï¼Œå»ºè®®å…·å¤‡ä¸€å®šçš„ç¼–ç¨‹ç»éªŒï¼ˆå°¤å…¶æ˜¯ Pythonï¼‰å’Œæ·±åº¦å­¦ä¹ åŸºç¡€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatawhalechina%2Fhappy-llm" target="_blank" title="https://github.com/datawhalechina/happy-llm" ref="nofollow noopener noreferrer">github.com/datawhalechâ€¦</a></p>
<hr/>
<h2 data-id="heading-1">äºŒã€å†…å®¹ç»“æ„</h2>
<p>ã€ŠHappy-LLMã€‹çš„å†…å®¹åˆ†ä¸º"åŸºç¡€ç†è®º"å’Œ"å®æˆ˜åº”ç”¨"ä¸¤å¤§éƒ¨åˆ†ï¼Œå…±7ç« ï¼Œéš¾åº¦ç”±æµ…å…¥æ·±ã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç†è®º</h3>
<ul>
<li>ç¬¬ 1 ç« ï¼šNLP ä¸ LLM åŸºç¡€ï¼šä»åˆ†è¯ã€è¯å‘é‡è®²åˆ°PLMå‘å±•å†ç¨‹ï¼Œä¸º LLM å­¦ä¹ é“ºå«åŸºç¡€ã€‚</li>
<li>ç¬¬ 2 ç« ï¼šTransformer æ¶æ„è¯¦è§£ï¼šæ‹†è§£è¾“å…¥å±‚ã€ç¼–ç å™¨ã€è§£ç å™¨ã€è¾“å‡ºå±‚ï¼Œé…åˆæ•°å­¦å…¬å¼æ¨å¯¼ä¸ä»£ç å®ç°ï¼Œåƒé€æ ¸å¿ƒåŸç†ï¼›</li>
<li>ç¬¬ 3 ç« ï¼šé¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼šæ•´ä½“ä»‹ç»ç»å…¸çš„ PLMï¼ŒåŒ…æ‹¬ Encoder-Onlyã€Encoder-Decoder å’Œ Decoder-Only ä¸‰ç§æ¶æ„ï¼Œä¹ŸåŒæ—¶ä»‹ç»äº†å½“å‰ä¸€äº›ä¸»æµ LLM çš„æ¶æ„å’Œæ€æƒ³ã€‚</li>
<li>ç¬¬ 4 ç« ï¼šLLMç‰¹æ€§ä¸è®­ç»ƒæµç¨‹ï¼šè¯¦ç»†ä»‹ç» LLM çš„ç‰¹ç‚¹å’Œèƒ½åŠ›ï¼Œä»¥åŠå¤§æ¨¡å‹â€œé¢„è®­ç»ƒâ†’SFTï¼ˆæœ‰ç›‘ç£å¾®è°ƒï¼‰â†’RLHFï¼ˆäººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ ï¼‰â€çš„å…¨æµç¨‹ã€‚</li>
</ul>
<h3 data-id="heading-3">ç¬¬äºŒéƒ¨åˆ†ï¼šå®æˆ˜åº”ç”¨</h3>
<ul>
<li>ç¬¬ 5 ç« ï¼šLLaMA2 æ¨¡å‹å®ç°ï¼šæ‰‹åŠ¨å¤ç°æ¨¡å‹ç»“æ„ã€è®­ç»ƒä¸“å± Tokenizerï¼Œå®Œæˆä» 0 åˆ° 1 çš„æ¨¡å‹æ­å»ºã€‚</li>
<li>ç¬¬ 6 ç« ï¼šLLM å¾®è°ƒæŠ€æœ¯ï¼šå¯¹æ¯”å…¨å‚æ•°å¾®è°ƒä¸ LoRA/QLoRA çš„ä¼˜ç¼ºç‚¹ï¼Œå®æˆ˜å¾®è°ƒ 7B æ¨¡å‹å¹¶éƒ¨ç½²æ¨ç†ã€‚</li>
<li>ç¬¬ 7 ç« ï¼šRAG ä¸ Agent å¼€å‘ï¼šæ­å»ºå‘é‡æ•°æ®åº“ã€å®ç°æ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œå¼€å‘èƒ½è°ƒç”¨å·¥å…·çš„æ™ºèƒ½ä½“åº”ç”¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒå­¦ä¹ æ”¶è·</h2>
<p>é€šè¿‡ã€ŠHappy-LLMã€‹çš„å­¦ä¹ ï¼Œä½ å°†è·å¾— 5 é¡¹å…³é”®èƒ½åŠ›ï¼Œè¦†ç›– LLM å¼€å‘çš„å…¨æµç¨‹ã€‚æŒæ¡è¿™äº›æŠ€èƒ½ï¼Œä½ ä¹Ÿèƒ½ç©è½¬ LLMã€‚</p>
<h3 data-id="heading-5">1. æ·±å…¥ç†è§£ Transformer æ¶æ„ä¸æ³¨æ„åŠ›æœºåˆ¶</h3>
<p>Transformer æ˜¯æ‰€æœ‰ç°ä»£LLMçš„åŸºç¡€ï¼Œæ•™ç¨‹ä»åŸå§‹è®ºæ–‡å‡ºå‘ï¼Œè¯¦è§£å…¶æ ¸å¿ƒæ¨¡å—ï¼š</p>
<ul>
<li>è¯åµŒå…¥ï¼šå°† Token è½¬ä¸ºå›ºå®šç»´åº¦å‘é‡ã€‚</li>
<li>ä½ç½®ç¼–ç ï¼šé€šè¿‡æ­£å¼¦/ä½™å¼¦å‡½æ•°æ·»åŠ åºåˆ—é¡ºåºä¿¡æ¯ã€‚</li>
<li>å¤šå¤´æ³¨æ„åŠ›ï¼šå¹¶è¡Œè®¡ç®—å¤šç»´åº¦è¯­ä¹‰å…³è”ã€‚</li>
<li>å‰é¦ˆç¥ç»ç½‘ç»œï¼šç‰¹å¾æå–ä¸éçº¿æ€§å˜æ¢ã€‚</li>
</ul>
<p>ä¸ä»…èƒ½çœ‹æ‡‚æ¶æ„å›¾ï¼Œè¿˜èƒ½æ‰‹åŠ¨æ¨å¯¼æ³¨æ„åŠ›æƒé‡è®¡ç®—å…¬å¼ï¼Œç†è§£"ä¸ºä»€ä¹ˆæ³¨æ„åŠ›æœºåˆ¶èƒ½æ•æ‰é•¿è·ç¦»ä¾èµ–ã€‚</p>
<h3 data-id="heading-6">2. æŒæ¡é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼ˆPLMï¼‰çš„ç»å…¸æ¶æ„</h3>
<p>LLM æ˜¯é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼ˆPLMï¼‰çš„å‡çº§ç‰ˆï¼Œæ•™ç¨‹ç³»ç»Ÿæ¢³ç†äº† PLM çš„ä¸‰å¤§ç»å…¸æ¶æ„ï¼š</p>
<ul>
<li>Encoder-onlyï¼ˆå¦‚ BERTï¼‰ï¼šåŒå‘æ³¨æ„åŠ›ï¼Œæ“…é•¿ç†è§£ç±»ä»»åŠ¡ï¼ˆæ–‡æœ¬åˆ†ç±»ã€å®ä½“è¯†åˆ«ï¼‰ã€‚</li>
<li>Decoder-onlyï¼ˆå¦‚ GPTï¼‰ï¼šå•å‘æ³¨æ„åŠ›ï¼Œæ“…é•¿ç”Ÿæˆç±»ä»»åŠ¡ï¼ˆæ–‡æœ¬ç”Ÿæˆã€å¯¹è¯ï¼‰ã€‚</li>
<li>Encoder-Decoderï¼ˆå¦‚ T5ï¼‰ï¼šåŒå‘ç¼–ç +å•å‘è§£ç ï¼Œæ“…é•¿ç¿»è¯‘ã€æ‘˜è¦ç­‰åºåˆ—è½¬æ¢ä»»åŠ¡ã€‚</li>
</ul>
<p>ç†è§£è¿™äº›æ¶æ„çš„å·®å¼‚ï¼Œèƒ½å¸®ä½ åœ¨å®é™…åº”ç”¨ä¸­é€‰æ‹©åˆé€‚çš„æ¨¡å‹åº•åº§ã€‚</p>
<h3 data-id="heading-7">3. ä»é›¶å®ç°LLaMA2æ¨¡å‹ï¼šäº²æ‰‹æ­å»ºä½ çš„ç¬¬ä¸€ä¸ªå¤§æ¨¡å‹</h3>
<p>æ•™ç¨‹çš„å®æˆ˜æ ¸å¿ƒæ˜¯å¸¦é¢†å­¦ä¹ è€…æ‰‹åŠ¨å®ç° Meta çš„ LLaMA2 æ¨¡å‹ï¼š</p>
<ul>
<li>æ¨¡å‹ç»“æ„å®šä¹‰ï¼šTransformer Decoder å±‚å †å ã€‚</li>
<li>Tokenizer è®­ç»ƒï¼šåŸºäº BPE ç®—æ³•å¤„ç†æ–‡æœ¬ã€‚</li>
<li>å‚æ•°å‚æ•°åˆå§‹åŒ–ã€å‰å‘ä¼ æ’­è®¡ç®—ï¼Œå…¨ç¨‹ä»£ç å¯è°ƒè¯•ã€‚</li>
</ul>
<p>è¿™ä¸€æ­¥èƒ½è®©ä½ å½»åº•æ‰“ç ´å¯¹å¤§æ¨¡å‹çš„æ•¬ç•å¿ƒç†ï¼Œç†è§£ LLaMA2 æ¨¡å‹çš„æ ¸å¿ƒæ¨¡å—ã€‚</p>
<h3 data-id="heading-8">4. æŒæ¡LLMå…¨æµç¨‹è®­ç»ƒï¼šä»é¢„è®­ç»ƒåˆ°å¾®è°ƒ</h3>
<p>LLM è®­ç»ƒåˆ†ä¸ºé¢„è®­ç»ƒã€å¾®è°ƒä¸¤å¤§é˜¶æ®µï¼š</p>
<ul>
<li>é¢„è®­ç»ƒé˜¶æ®µï¼šåœ¨æµ·é‡æ— æ ‡æ³¨æ–‡æœ¬ä¸Šè®­ç»ƒæ¨¡å‹ï¼Œå­¦ä¹ è¯­è¨€è§„å¾‹ã€‚</li>
<li>å¾®è°ƒé˜¶æ®µï¼šé€šè¿‡æŒ‡ä»¤æ•°æ®ï¼ˆSFTï¼‰æˆ–äººç±»åé¦ˆï¼ˆRLHFï¼‰ä¼˜åŒ–æ¨¡å‹è¾“å‡ºï¼Œä½¿å…¶å¯¹é½äººç±»éœ€æ±‚ã€‚</li>
</ul>
<p>æ•™ç¨‹ä¸ä»…è®²è§£åŸç†ï¼Œè¿˜æä¾›å·¥ç¨‹å®è·µæŠ€å·§ï¼Œä¾‹å¦‚ç”¨ LoRA/QLoRA å¾®è°ƒ 7B æ¨¡å‹ã€‚</p>
<h3 data-id="heading-9">5. å‰æ²¿æŠ€æœ¯è½åœ°ï¼šRAGã€Agentåº”ç”¨å¼€å‘</h3>
<p>å°† LLM ä¸å®é™…ä¸šåŠ¡ç»“åˆï¼Œèšç„¦ä¸¤å¤§å‰æ²¿åº”ç”¨ï¼š</p>
<ul>
<li>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ï¼šé€šè¿‡â€œæ–‡æ¡£åˆ†å—â†’å‘é‡åŒ–â†’å‘é‡æ•°æ®åº“æ£€ç´¢â†’ç”Ÿæˆç­”æ¡ˆâ€çš„æµç¨‹ï¼Œè®©LLMèƒ½è°ƒç”¨å¤–éƒ¨çŸ¥è¯†åº“ï¼Œè§£å†³çŸ¥è¯†è¿‡æ—¶å¹»è§‰é—®é¢˜ï¼›</li>
<li>Agentï¼ˆæ™ºèƒ½ä½“ï¼‰ï¼šæ•™æ¨¡å‹è§„åˆ’ä»»åŠ¡ã€è°ƒç”¨å·¥å…·ï¼ˆå¦‚è®¡ç®—å™¨ã€æœç´¢å¼•æ“ï¼‰ï¼Œå®ç°å¤æ‚ç›®æ ‡ï¼ˆå¦‚â€œå†™æŠ¥å‘Šâ†’æŸ¥æ•°æ®â†’å¯è§†åŒ–â€å…¨æµç¨‹è‡ªåŠ¨åŒ–ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-10">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactæºç å­¦ä¹ å‡†å¤‡å·¥ä½œâ‘ â€”â€”ä»€ä¹ˆæ˜¯Fiber]]></title>    <link>https://juejin.cn/post/7574040813749862451</link>    <guid>https://juejin.cn/post/7574040813749862451</guid>    <pubDate>2025-11-19T08:35:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574040813749862451" data-draft-id="7573900332637519882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactæºç å­¦ä¹ å‡†å¤‡å·¥ä½œâ‘ â€”â€”ä»€ä¹ˆæ˜¯Fiber"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2025-11-19T08:35:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jseeza"/> <meta itemprop="url" content="https://juejin.cn/user/2601912558697392"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactæºç å­¦ä¹ å‡†å¤‡å·¥ä½œâ‘ â€”â€”ä»€ä¹ˆæ˜¯Fiber
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2601912558697392/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jseeza
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:35:24.000Z" title="Wed Nov 19 2025 08:35:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ React 16 ä»¥å‰ï¼ŒReactçš„æ›´æ–°æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š<strong>ä¸€æ¬¡æ€§ã€ä¸å¯ä¸­æ–­çš„æ·±åº¦é€’å½’æ›´æ–°</strong>ã€‚è¿™ç§æ›´æ–°æ–¹å¼ï¼š</p>
<ul>
<li>é‡‡ç”¨<strong>è°ƒç”¨é€’å½’æ ‘</strong>æ¥éå†ç»„ä»¶æ ‘</li>
<li>ä»<strong>æ ¹èŠ‚ç‚¹</strong>å¼€å§‹é€’å½’render</li>
<li>ä¸­é—´è¿‡ç¨‹ä¸èƒ½æš‚åœã€ä¸èƒ½æ‰“æ–­</li>
<li>ä¸€æ—¦å¼€å§‹ï¼Œå°±å¿…é¡»ä¸€æ¬¡æ€§æ‰§è¡Œåˆ°ç»“æŸ</li>
</ul>
<p>è¿™ç§æ›´æ–°æ–¹å¼è¢«ç§°ä½œï¼š<strong>Stack Reconciler</strong>ï¼ˆè°ƒç”¨æ ˆè°ƒå’Œå™¨ï¼‰ã€‚
å…¶ä¼˜ç‚¹æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼šå®ç°ç®€å•ï¼Œé€»è¾‘æ¸…æ™°ï¼Œç†è®ºä¸Šæ¥è¯´æ€§èƒ½ä¸ä¼šå¤ªå·®ï¼Œå°æ›´æ–°é€Ÿåº¦éå¸¸å¿«ï¼Œä¸å¯æ‰“æ–­çš„ä¸€æ¬¡æ€§èƒ½ä¿è¯æ¸²æŸ“çš„ä¸€è‡´æ€§ï¼ŒåŒ…æ‹¬UIçš„ä¸€è‡´æ€§å’Œç”Ÿå‘½å‘¨æœŸé¡ºåºçš„å›ºå®šå¯é ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ç§ä¸å¯æ‰“æ–­çš„ä¸€æ¬¡æ€§ï¼Œå¸¦æ¥äº†éå¸¸è‡´å‘½çš„é—®é¢˜ï¼šå¤§ç»„ä»¶æ ‘ä¼šå¡æ­»ä¸»çº¿ç¨‹ã€‚</p>
<p>React çš„æ›´æ–°é€»è¾‘æ˜¯è¿è¡Œåœ¨ JS ä¸»çº¿ç¨‹ä¸­çš„ï¼Œä½†æ˜¯ JS ä¸»çº¿ç¨‹é™¤äº†è´Ÿè´£ React çš„æ›´æ–°ï¼Œè¿˜éœ€è¦å»è´Ÿè´£ï¼š</p>
<ul>
<li>UIæ¸²æŸ“</li>
<li>ç”¨æˆ·è¾“å…¥äº‹ä»¶</li>
<li>åŠ¨ç”»</li>
<li>ç½‘ç»œå›è°ƒ</li>
<li>ç­‰ç­‰</li>
</ul>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦æ¸²æŸ“ä¸€ä¸ªå·¨å‹çš„ç»„ä»¶æ ‘ï¼Œ React å°±ä¼šä¸€æ¬¡æ€§é€’å½’è®¡ç®—ç»„ä»¶æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå ç”¨äº† JS ä¸»çº¿ç¨‹ï¼Œå¹¶ä¸”ä¸­é€”æ— æ³•æš‚åœï¼Œä»è€Œå¯¼è‡´ JS å µå¡ï¼Œé¡µé¢å¡æ­»ï¼Œç”¨æˆ·çš„äº¤äº’äº‹ä»¶ä¹Ÿæ²¡æœ‰ååº”â€”â€”å› ä¸ºä¸»çº¿ç¨‹éƒ½è¢«å“ªå»ç»™ React æ¸²æŸ“ç»„ä»¶æ ‘äº†ã€‚</p>
<p>ä¸ä»…äºæ­¤ï¼ŒRaact é˜»å¡è¿›ç¨‹è¿˜ä¼šå¯¼è‡´æµè§ˆå™¨æ— æ³•å“åº”æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œåœ¨ React 16 ä»¥å‰ï¼ŒReact ä¸ä¼šè®©ç”¨æˆ·è¾“å…¥ç­‰æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡å»æ’é˜Ÿå“åº”ï¼ŒJS çº¿ç¨‹å¿…é¡»ç­‰å¾…å½“å‰ç»„ä»¶æ ‘ render å®Œæˆï¼Œæ‰èƒ½å»å“åº”å…¶ä»–ä»»åŠ¡â€”â€”ç»™ç”¨æˆ·çš„ä½“éªŒå°±æ˜¯ï¼š<strong>é¡µé¢å¡é¡¿ã€æ‰å¸§ã€è¾“å‡ºå»¶è¿Ÿ</strong>ã€‚</p>
<p>æ­¤å¤–ï¼Œå› ä¸ºé€’å½’æ ˆå½¢å¼çš„éå†ä¸èƒ½ä¸­æ–­ï¼Œå› æ­¤ä¹Ÿå¾ˆéš¾å»ä¿å­˜å½“å‰æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ï¼Œè®°å½•æ‰§è¡Œåˆ°å“ªä¸€æ­¥ä»è€Œæ¢å¤æ‰§è¡Œï¼Œè¿™ç§æ–¹å¼å®Œå…¨æ— æ³•å®ç°<strong>æ¸è¿›å¼æ¸²æŸ“</strong>ï¼ŒåŒ…æ‹¬åˆ†ç‰‡ç­‰åŠŸèƒ½è‡ªç„¶ä¹Ÿæ— æ³•å®ç°ã€‚</p>
<p>æ€»ç»“ï¼šReact 16 ä»¥å‰ä½¿ç”¨çš„Stack Reconcilerï¼Œä¼˜ç‚¹æ˜¯å®ç°ç®€å•ã€ä¸€æ¬¡æ€§æ¸²æŸ“ä¿è¯ä¸€è‡´æ€§ï¼›ç¼ºç‚¹æ˜¯ä¸èƒ½ä¸­æ–­ã€ä¸èƒ½åˆ†ç‰‡ã€ä¸èƒ½æ¢å¤ï¼Œå¯¼è‡´é•¿ä»»åŠ¡ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œå¼•å‘é¡µé¢å¡é¡¿ï¼Œå› æ­¤è¢«Fiberæ›¿ä»£ã€‚</p>
<p>React å¼€å‘å›¢é˜Ÿä¹Ÿæ­£æ˜¯ä¸ºäº†å®ç° <strong>â€œå¯ä¸­æ–­ã€å¯æ¢å¤â€çš„æ¸²æŸ“</strong>ï¼Œä»è€Œå¼•å…¥äº†Fiberçš„æ¦‚å¿µã€‚</p>
<h2 data-id="heading-1">Fiber çš„å®šä¹‰</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Fiber</h3>
<p>ä¸€å¥è¯æ¦‚æ‹¬ï¼šFiber æ˜¯ React ç”¨æ¥æ‰§è¡Œâ€œå¯ä¸­æ–­æ›´æ–°â€çš„ä¸€ç§æ•°æ®ç»“æ„ï¼ˆFiberNodeï¼‰+è°ƒåº¦æœºåˆ¶ï¼ˆWorkloopï¼‰ã€‚</p>
<p>Fiber æ—¢æ˜¯ä¸€ä¸ªè½»é‡çº§æ•°æ®ç»“æ„ï¼ˆæè¿°ç»„ä»¶çš„å·¥ä½œå•å…ƒï¼‰ï¼Œåˆæ˜¯ä¸€ä¸ªä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼ˆè®©æ›´æ–°åˆ†ç‰‡æ‰§è¡Œï¼Œä¸å¡ä¸»çº¿ç¨‹ï¼‰ã€‚</p>
<p>å¯ä»¥è¿™ä¹ˆè¯´ï¼Œ<strong>Fiber=æ•°æ®ç»“æ„+è°ƒåº¦ç³»ç»Ÿ</strong>ã€‚</p>
<p>Fiber çš„å¼•å…¥ä½¿å¾—æ¸²æŸ“è¿‡ç¨‹å¯ä»¥ä¸­æ–­ï¼Œå¹¶ä¸”æ ¹æ®éœ€è¦é‡æ–°è°ƒåº¦ä»»åŠ¡ï¼Œè¿™ç§å¯ä¸­æ–­å¯åˆ†ç‰‡çš„ä¼˜åŒ–ä½¿å¾— React å¯ä»¥æ›´å¥½åˆ©ç”¨ JS ä¸»çº¿ç¨‹çš„ç©ºé—²æ—¶é—´ï¼Œä¼˜åŒ–æ€§èƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-3">Fiber æ˜¯ä¸€ç§æ•°æ®ç»“æ„</h3>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥çœ‹çœ‹FiberNodeçš„æºç ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FiberNode</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">tag, pendinfProps, key, mode</span>){
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span> = tag;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = key;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elementType</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stateNode</span> = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// æ ‘å½¢ç»“æ„</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">return</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">child</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sibling</span> = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// props</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingProps</span> = pendingProps;
    <span class="hljs-variable language_">this</span>,memoizedProps = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// çŠ¶æ€</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">memoizedState</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateQueue</span> = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// Effect ç›¸å…³</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">flags</span> = <span class="hljs-title class_">NoFlags</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subtreeFlags</span> = <span class="hljs-title class_">NoFlags</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">deletions</span> = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// è°ƒåº¦ lane</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lanes</span> = <span class="hljs-title class_">NoLanes</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">childLanes</span> = <span class="hljs-title class_">NoLanes</span>;

    <span class="hljs-comment">// åŒç¼“å­˜æ ‘</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">alternate</span> = <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é‡ç‚¹å…³æ³¨ä»¥ä¸‹å‡ ä¸ªå†…å®¹ã€‚</p>
<h4 data-id="heading-4">1. child / sibling / return</h4>
<p>Fiber æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„<strong>é“¾è¡¨ç»“æ„+æ ‘ç»“æ„</strong>çš„æ··åˆï¼Œè€Œéä¸€æ£µæ ‡å‡†çš„å¤šå‰æ ‘ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx">child â†’ ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹  
sibling â†’ å³å…„å¼ŸèŠ‚ç‚¹  
<span class="hljs-keyword">return</span> â†’ çˆ¶èŠ‚ç‚¹  
</code></pre>
<h4 data-id="heading-5">2. alternate</h4>
<p>Fiber ä½¿ç”¨çš„æ˜¯â€œåŒç¼“å­˜â€æœºåˆ¶ï¼Œalternate æ˜¯åŒç¼“å­˜æ ‘çš„æ ¸å¿ƒã€‚</p>
<p>Fiber ä¼šåŒæ—¶ç»´æŠ¤ä¸¤æ£µ Fiber æ ‘ï¼š</p>
<ul>
<li>ä¸€æ£µæ˜¯å½“å‰é¡µé¢æ­£åœ¨ç”¨çš„æ ‘ï¼ˆcurrentï¼‰</li>
<li>å¦ä¸€æ£µæ˜¯æ­£åœ¨è®¡ç®—ä¸‹ä¸€å¸§UIçš„æ ‘ï¼ˆworkInProgressï¼‰</li>
</ul>
<p>è®¡ç®—å®Œæˆåï¼Œå°±ç”¨ä¸€æ¬¡æ€§â€œåˆ‡æ¢æŒ‡é’ˆâ€çš„æ–¹å¼æŠŠæ–°çš„æ ‘æ¢æˆ currentï¼Œæ¸²æŸ“è¿‡ç¨‹å¯ä»¥å®ç°<strong>æ— é—ªçƒã€å¯ä¸­æ–­ã€ä¸å¡é¡¿</strong>ã€‚åŒç¼“å­˜ä¾èµ– alternate å½¢æˆä¸¤æ£µæ ‘ï¼Œalternate ç›¸å½“äºä¸¤æ£µæ ‘åˆ‡æ¢çš„æ¡¥æ¢ï¼Œèƒ½è®© React åŒæ—¶ç»´æŠ¤ current æ ‘å’Œ workInProgress æ ‘ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´éšæ—¶åˆ‡æ¢ï¼Œæ— éœ€é‡æ–°åˆ›å»ºæ•´æ£µæ ‘ã€‚</p>
<p>æ¯ä¸ª Fiber èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œalternate å­—æ®µå»è®°å½•å®ƒä»¬çš„æ˜ å°„å…³ç³»ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">currentFiber.<span class="hljs-property">alternate</span> = workInProgressFiber
workInProgressFiber.<span class="hljs-property">alternate</span> = currentFiber
</code></pre>
<p>è¿™ç§æ¡¥æ¢å…³ç³»å¯ä»¥ä½¿ React å¿«é€Ÿä» current å¾—åˆ°å¯¹åº”çš„ WIPï¼Œè®¡ç®—ä¸‹ä¸€å¸§UIæ ‘æ—¶ä¹Ÿä¸éœ€è¦ new æ–°çš„æ ‘ï¼Œè€Œæ˜¯ç›´æ¥å¤ç”¨å·²æœ‰çš„èŠ‚ç‚¹ï¼Œåœ¨æ›´æ–°çš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šä¿å­˜ä¸Šä¸€æ¬¡çš„çŠ¶æ€ã€‚</p>
<p>è¿™é‡Œå»¶ä¼¸ä¸€ä¸‹ï¼šalternate ä¸ºä»€ä¹ˆå¯ä»¥è®© Fiber é‡ç”¨å·²æœ‰çš„èŠ‚ç‚¹ï¼Ÿè¿™é‡Œå¯ä»¥ç›´æ¥å‚è€ƒæºç ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">if</span> (current.<span class="hljs-property">alternate</span> !== <span class="hljs-literal">null</span>) {
  <span class="hljs-comment">// reuse</span>
  workInProgress = current.<span class="hljs-property">alternate</span>;
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// create a new fiber</span>
}
</code></pre>
<p>è¿™æ„å‘³ç€ï¼Œåœ¨ current.alternate å­˜åœ¨æ—¶ï¼ŒFiber ä¼šç›´æ¥å¤ç”¨å·²æœ‰çš„èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„Tree Nodeï¼Œè¿™å°†å¤§å¤§å‡å°‘æ€§èƒ½ã€‚</p>
<p>è¿™ä¹Ÿæ„å‘³ç€ï¼ŒWIP çš„æ„å»ºæ˜¯å¯ä»¥éšæ—¶äº§ç”Ÿéšæ—¶åœæ­¢çš„ï¼Œåªéœ€è¦æ ¹æ® current å³å¯éšæ—¶æ„é€ ï¼Œé‚£ä¹ˆï¼Œåœ¨ JS çº¿ç¨‹ä¸­ï¼Œä¸€æ—¦æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡å‘ç”Ÿï¼ŒWIP å¯ä»¥ç«‹å³è¢«ä¸¢å¼ƒï¼Œç­‰å¾…æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡å®Œæˆï¼Œç„¶åå†é‡æ–°ç®—ï¼ŒæœŸé—´ä¸ä¼šå¯¹ current é€ æˆä»»ä½•å½±å“ï¼Œç”¨æˆ·åªèƒ½çœ‹åˆ° current çš„å†…å®¹ï¼Œé¡µé¢ä½“éªŒä¹Ÿä¸ä¼šå—åˆ°å½±å“ã€‚</p>
<p>åœ¨ WIP æ„å»ºå®Œæˆåï¼ŒUI åˆ‡æ¢å¹¶ä¸æ˜¯é‡æ–°åˆ›å»ºï¼Œè€Œæ˜¯â€œè°ƒæ¢æŒ‡é’ˆâ€ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx">root.<span class="hljs-property">current</span> = finishedWork;
</code></pre>
<p>Alternate ä¿è¯ä¸¤æ£µæ ‘çš„èŠ‚ç‚¹æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œé‚£ä¹ˆåªéœ€è¦åˆ‡æ¢æŒ‡é’ˆï¼Œå°±èƒ½å®ç°å°† WIP æ¨åˆ°é¡µé¢ä¸Šã€‚</p>
<p>ç”¨ä¸€å¥è¯æ€»ç»“ï¼š<strong>Alternate æ˜¯åŒç¼“å­˜çš„æ ¸å¿ƒï¼Œå› ä¸ºå®ƒè®© React èƒ½ç»´æŒ current å’Œ workInProgress ä¸¤æ£µå¹¶è¡Œçš„ Fiber æ ‘ã€‚æ‰€æœ‰çš„æ›´æ–°éƒ½åœ¨WIPä¸Šè¿›è¡Œï¼Œæœ€ç»ˆé€šè¿‡ alternate å¿«é€Ÿåˆ‡æ¢æŒ‡é’ˆä½¿é¡µé¢æ›´æ–°ã€‚</strong> è¿™ç§æ–¹å¼å¸¦æ¥äº†å¯ä¸­æ–­ã€å¯æ¢å¤ã€å¯ä¸¢å¼ƒã€ä½å¡é¡¿çš„å¹¶å‘æ¸²æŸ“èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-6">3. lans</h4>
<p>React 17 å†…éƒ¨å¼•å…¥ lanes å–ä»£ expirationTimeï¼Œä½† lanes çš„çœŸå®èƒ½åŠ›åœ¨ React 18 å¹¶å‘æ¨¡å¼ä¸­æ‰çœŸæ­£å‘å¼€å‘è€…å¼€æ”¾ã€‚</p>
<p>Lans æ¨¡å‹å†³å®šï¼š</p>
<ul>
<li>å“ªäº›ä»»åŠ¡å¯ä»¥ä¸­æ–­</li>
<li>å“ªäº›ä»»åŠ¡å¯ä»¥åˆå¹¶</li>
<li>å“ªäº›ä»»åŠ¡éœ€è¦ä¼˜å…ˆæ‰§è¡Œ</li>
</ul>
<p>è¿™æ˜¯å¹¶å‘æ¨¡å¼çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-7">Fiber æ˜¯ä¸€ç§è°ƒåº¦ç³»ç»Ÿ</h3>
<p>è¯´ Fiber æ˜¯ä¸€ç§è°ƒåº¦ç³»ç»Ÿï¼Œæœ¬è´¨ä¸Šæ˜¯æŠ“ä½äº† Fiber çš„è®¾è®¡æ ¸å¿ƒï¼šFiber ä¸æ˜¯ä¸€ä¸ªå•çº¯çš„æ ‘ç»“æ„ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯ä»¥æ‹†åˆ†ä»»åŠ¡ã€æŒ‰ä¼˜å…ˆçº§æ‰§è¡Œã€æš‚åœå’Œæ¢å¤çš„<strong>å·¥ä½œè°ƒåº¦å¼•æ“</strong>ã€‚ä¸Šæ–‡æåˆ°çš„ lans å¾ˆå¥½åœ°æ­ç¤ºäº†è¿™æ ·çš„ä¸€ç§è¡Œä¸ºã€‚</p>
<h4 data-id="heading-8">ä¸ºä»€ä¹ˆè¯´ Fiber æ˜¯ä¸€ç§è°ƒåº¦ç³»ç»Ÿ</h4>
<h5 data-id="heading-9">1. å¯ä¸­æ–­/å¯æ¢å¤</h5>
<p>React 16 ä»¥å‰ï¼Œæ¸²æŸ“æ˜¯â€œé€’å½’+åŒæ­¥â€çš„æ¸²æŸ“ï¼šä¸€æ—¦å¼€å§‹æ¸²æŸ“ï¼Œå°±æ— æ³•åœæ­¢ã€‚Fiber æ”¯æŒå°†æ¸²æŸ“å·¥ä½œæ‹†åˆ†æˆå°å•å…ƒï¼Œæ¸²æŸ“é—´éš™å¯ä»¥å°† JS çº¿ç¨‹è®©ç»™ä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡ï¼Œç­‰å¾…ä»»åŠ¡å®Œæˆåå†å›æ¥ç»§ç»­æ¸²æŸ“ã€‚</p>
<p>è¿™ç§æœºåˆ¶éå¸¸åƒæ“ä½œç³»ç»Ÿåˆ°çš„ CPU è°ƒåº¦ï¼šFiber æ˜¯ä»»åŠ¡çº¿ç¨‹/è¿›ç¨‹ï¼ŒReact æ ¹æ®éœ€æ±‚å»è°ƒåº¦ã€‚</p>
<h5 data-id="heading-10">2. ä¼˜å…ˆçº§æœºåˆ¶</h5>
<p>æ“ä½œç³»ç»Ÿçš„ CPU è°ƒåº¦ä¼šæåˆ°ä¼˜å…ˆçº§è¿™ä¸ªæ¦‚å¿µï¼Œæ ¹æ®ä¼˜å…ˆçº§å®‰æ’ä»»åŠ¡è°ƒåº¦é¡ºåºï¼Œä¿è¯é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ä¼˜å…ˆè¢«æ‰§è¡Œã€‚</p>
<p>Fiber ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„ä¼˜å…ˆçº§è°ƒåº¦æœºåˆ¶ï¼Œæ”¯æŒä¸åŒä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œå®ç°åŸç†å°±æ˜¯ä¸Šæ–‡æåˆ°çš„ Lansï¼Œé€šè¿‡ä¼˜å…ˆçº§è°ƒåº¦ç³»ç»Ÿï¼ŒReact å¯ä»¥â€œæ’é˜Ÿâ€æ‰§è¡Œé«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œä¾‹å¦‚åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æ¥äº†ä¸€ä¸ªç”¨æˆ·äº¤äº’ä»»åŠ¡ï¼ŒReact å¯ä»¥æš‚åœæ¸²æŸ“å…ˆå»å¤„ç†äº¤äº’ä»»åŠ¡ï¼Œå®Œæˆåå†è¿”å›ç»§ç»­æ‰§è¡Œæ¸²æŸ“ä»»åŠ¡ã€‚</p>
<p>ä¸Šä¸‹æ–‡çš„å‚¨å­˜ä¹Ÿä¼šä¿è¯ä¸ä¼šä¸¢å¤±ä»¥å‰çš„æ¸²æŸ“ç»“æœã€‚è¿™ä¸ªä¼˜å…ˆçº§æœºåˆ¶æ˜¯å¹¶å‘æ¸²æŸ“çš„åŸºç¡€ã€‚</p>
<h5 data-id="heading-11">3. æ—¶é—´åˆ†ç‰‡</h5>
<p>Fiber å¯ä»¥é€šè¿‡â€œæ—¶é—´åˆ†ç‰‡â€çš„æ€æƒ³ï¼Œå°†å¤§çš„æ¸²æŸ“ä»»åŠ¡åˆ†è§£ä¸ºå°çš„ä»»åŠ¡ï¼Œæ¯ä¸€å¸§éƒ½åªå®Œæˆéƒ¨åˆ†ä»»åŠ¡ã€‚è¿™æ · JS ä¸»çº¿ç¨‹ä¸ä¼šé•¿æ—¶é—´è¢«æ¸²æŸ“ä»»åŠ¡å æ®ï¼Œæµè§ˆå™¨è°ƒåº¦ API åœ¨æ­¤åŸºç¡€ä¸Šå¯ä»¥å†³å®šä»€ä¹ˆæ—¶å€™ç»§ç»­æ¸²æŸ“ä»»åŠ¡ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç”¨æˆ·äº¤äº’ã€åŠ¨ç”»ç­‰é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ä¸ä¼šè¢«ä½ä¼˜å…ˆçº§çš„æ¸²æŸ“ä»»åŠ¡å¡ä½ã€‚</p>
<h5 data-id="heading-12">4. è°ƒåº¦å™¨</h5>
<p>React æœ‰ä¸€ä¸ªå•ç‹¬çš„è°ƒåº¦å±‚ï¼ˆSchedulerï¼‰ï¼Œä¸ Fiber ç»“åˆï¼Œä»è€Œå®ç°å†³å®šä½•æ—¶æ‰§è¡Œä»»åŠ¡ã€‚è¿™ä¸ªè°ƒåº¦å±‚æ”¯æŒä¼˜å…ˆçº§ä»»åŠ¡ã€è¶…æ—¶ã€æŒ‚èµ·ã€æ¢å¤ç­‰ï¼Œæ˜¯ä¸€ä¸ªçœŸæ­£çš„ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿã€‚</p>
<h5 data-id="heading-13">5. å¯æ’¤é”€/å¯æ”¾å¼ƒä»»åŠ¡</h5>
<p>å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ¸²æŸ“ä»»åŠ¡ä¼˜å…ˆçº§ä½äºé«˜ä¼˜å…ˆçº§çš„ç”¨æˆ·äº¤äº’ä»»åŠ¡ï¼Œåˆ™å½“å‰çš„æ¸²æŸ“ä»»åŠ¡å¯ä»¥è¢«æš‚åœï¼Œæ–­ç‚¹æ‰§è¡Œæ—¶æœºå¯ä»¥è¢«æ¨åæˆ–è€…æ”¾å¼ƒã€‚æ¸²æŸ“è¿›åº¦ä¼šè¢«ä¿å­˜ï¼Œä¸‹æ¬¡å¯ä»¥ä»ä¸­æ–­å¤„æ¢å¤ï¼Œè¿™æ ·ï¼ŒReact çš„æ¸²æŸ“å°±ä¸æ˜¯ä¸€æ¬¡æ€§çš„å¿…é¡»å…¨éƒ¨æˆåŠŸæˆ–è€…å…¨éƒ¨å¤±è´¥ï¼Œè€Œæ˜¯æœ‰â€œå¼¹æ€§â€çš„ã€‚</p>
<h4 data-id="heading-14">ä»è°ƒåº¦ç³»ç»Ÿè§’åº¦çœ‹ Fiber çš„ä¼˜åŠ¿</h4>
<p>ä¸€å¥è¯æ€»ç»“ï¼šæ›´å¥½åœ°å®ç°å¯ä¸­æ–­ã€å¯æ¢å¤ã€ä½å¡é¡¿çš„æ¸²æŸ“ä¸é¡µé¢äº¤äº’ã€‚</p>
<ul>
<li>æ›´å¥½å“åº”é¡µé¢äº¤äº’ï¼šé«˜ä¼˜å…ˆçº§çš„ç”¨æˆ·äº¤äº’ä»»åŠ¡è¢«ä¼˜å…ˆæ‰§è¡Œï¼Œä½ä¼˜å…ˆçº§ä»»åŠ¡å¯ä»¥è¢«æ‰“æ–­ï¼Œä½¿ç”¨æˆ·çš„é¡µé¢ä½¿ç”¨ä½“éªŒæ›´æµç•…ã€‚</li>
<li>æå‡é¡µé¢æ€§èƒ½ï¼šæ¸²æŸ“ä»»åŠ¡è¢«åˆ†ç‰‡åˆ†æ—¶æ¸²æŸ“ï¼Œå‡å°‘äº† React é•¿ä»»åŠ¡å ç”¨ JS ä¸»çº¿ç¨‹çš„æ—¶é—´ï¼Œæµè§ˆå™¨å¯ä»¥åŠæ—¶è¿›è¡Œé‡ç»˜/å›æµã€‚</li>
<li>æ”¯æŒå¹¶å‘ç‰¹æ€§ï¼šFiber æ˜¯ React å¹¶å‘æ¨¡å¼çš„åŸºç¡€ï¼Œè°ƒåº¦ç³»ç»Ÿä¸ºå¹¶å‘æ¸²æŸ“æä¾›äº†æ ¸å¿ƒä¸åŸºçŸ³ã€‚</li>
<li>é”™è¯¯æ¢å¤èƒ½åŠ›æ›´å¼ºï¼šFiber ä¼šè®°ä½æ¸²æŸ“çš„ä¸Šä¸‹æ–‡ï¼Œæ¸²æŸ“ä»»åŠ¡ä¸­æ–­æˆ–æ”¾å¼ƒä¸ä¼šå½±å“ç°æœ‰é¡µé¢ä¸æ•´ä¸ªæ¸²æŸ“ä»»åŠ¡ï¼Œå¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æ¢å¤æ¸²æŸ“ä»»åŠ¡ã€‚</li>
</ul>
<h2 data-id="heading-15">Fiber å¦‚ä½•å®ç°æ¸²æŸ“</h2>
<p>è¿™é‡Œæˆ‘ä»¬è¦ç ”ç©¶å®ç°æ¸²æŸ“çš„å…³é”®å‡½æ•°ã€‚</p>
<h3 data-id="heading-16">1. åˆæ¬¡æ¸²æŸ“ï¼šåˆ›å»ºåŒç¼“å­˜æ ‘</h3>
<p>åˆæ¬¡æ¸²æŸ“æ—¶æ²¡æœ‰ alternateï¼Œäºæ˜¯ React ä¼šåˆ›å»ºä¸€æ£µæ–°çš„ workInProgress Fiber æ ‘ã€‚</p>
<p>è¿™é‡Œå¯ä»¥å»çœ‹ä¸€çœ‹ Fiber çš„æºç  <code>ReactFiber.js</code>ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createWorkInProgress</span>(<span class="hljs-params">current, pendingProps</span>) {
  <span class="hljs-keyword">let</span> workInProgress = current.<span class="hljs-property">alternate</span>;
  <span class="hljs-keyword">if</span> (workInProgress === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// åˆæ¬¡æ¸²æŸ“ï¼šcurrent æ²¡æœ‰ alternateï¼Œä¼šå»åˆ›å»ºä¸€ä¸ªæ–°çš„ Fiber</span>
    workInProgress = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FiberNode</span>(current.<span class="hljs-property">tag</span>, pendingProps, current.<span class="hljs-property">key</span>);
    workInProgress.<span class="hljs-property">stateNode</span> = current.<span class="hljs-property">stateNode</span>;
    workInProgress.<span class="hljs-property">alternate</span> = current;
    current.<span class="hljs-property">alternate</span> = workInProgress;
  }
  <span class="hljs-keyword">return</span> workInProgress;
}
</code></pre>
<p>åˆæ¬¡æ¸²æŸ“ä¹‹åï¼Œcurrent å’Œ WIP ä¸¤æ£µæ ‘å°±å»ºå¥½äº†ï¼Œå½¼æ­¤é€šè¿‡ alternate è¿æ¥ï¼Œç›¸äº’å¤ç”¨ï¼Œå‡å°‘äº†åç»­èŠ‚ç‚¹æ„å»ºçš„å‹åŠ›ï¼ˆå› ä¸ºåç»­å°±å¤ç”¨äº†ï¼‰ã€‚</p>
<h3 data-id="heading-17">2. æ›´æ–°é˜¶æ®µï¼šåˆ©ç”¨åŒç¼“å­˜æœºåˆ¶æ„å»ºæ–°çš„UI</h3>
<p>æ›´æ–°æµç¨‹å‘ç”Ÿåœ¨ <code>ReactFiberWorkLoop.js</code> ä¸­ã€‚</p>
<p>æ ¸å¿ƒæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä» current æ ‘ä¸­è·å–å¯¹åº” Fiberï¼›</li>
<li>é€šè¿‡ createWorkInProgress åˆ›å»ºæˆ–å¤ç”¨ WIP æ ‘ï¼›</li>
<li>æ‰€æœ‰çš„è®¡ç®—ã€diffã€effect éƒ½åœ¨ WIP æ ‘ç§è¿›è¡Œï¼›</li>
<li>å®Œæˆåæ‰§è¡Œ commit é˜¶æ®µï¼›</li>
<li>ç”¨æ”¹å˜æŒ‡é’ˆçš„æ–¹å¼äº¤æ¢ä¸¤æ£µæ ‘çš„è§’è‰²ï¼šWIP å˜æˆæ–°çš„ currentã€‚</li>
</ol>
<h4 data-id="heading-18">â‘  Render é˜¶æ®µï¼šæ„å»º WIP æ ‘</h4>
<p>å¾ªç¯ç”± <code>performUnitOfWork(WIP)</code> é©±åŠ¨å®ç°ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">performUnitOfWork</span>(<span class="hljs-params">unitOfWork</span>) {
  <span class="hljs-keyword">const</span> current = unitOfWork.<span class="hljs-property">alternate</span>;
  <span class="hljs-keyword">let</span> next = <span class="hljs-title function_">beginWork</span>(current, unitOfWork);
  unitOfWork.<span class="hljs-property">memoizedProps</span> = unitOfWork.<span class="hljs-property">pendingProps</span>;

  <span class="hljs-keyword">if</span> (next === <span class="hljs-literal">null</span>) {
    <span class="hljs-title function_">completeUnitOfWork</span>(unitOfWork);
  }
  <span class="hljs-keyword">return</span> next;
}
</code></pre>
<p>æ¸²æŸ“éƒ½åœ¨WIPä¸Šè®¡ç®—ï¼Œå¦‚æœèŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œé‚£å°±è¿›å…¥å­èŠ‚ç‚¹ç»§ç»­å¤„ç†ï¼Œç›´åˆ°èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹äº†ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰ï¼Œåˆ™å‘ä¸Šå½’å¹¶è¿›å…¥ complete é˜¶æ®µã€‚</p>
<h4 data-id="heading-19">â‘¡ Commit é˜¶æ®µï¼šåˆ‡æ¢ç¼“å­˜æ ‘</h4>
<p>commit é˜¶æ®µæœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ol>
<li>åŒæ­¥æ‰§è¡Œï¼Œä¸å¯ä¸­æ–­</li>
<li>ä¼šçœŸæ­£åœ°æ›´æ–° DOM/UI</li>
</ol>
<p>åœ¨ commitLayoutEffects é˜¶æ®µï¼ŒReact ä¼šåœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ï¼ˆpaintï¼‰ä¹‹å‰æ‰§è¡Œæ‰€æœ‰ Layout å‰¯ä½œç”¨ï¼Œç»Ÿä¸€åœ¨åŒä¸€å¸§å†…å®Œæˆï¼Œä»¥é¿å… layout thrashingï¼ˆå¸ƒå±€æŠ–åŠ¨ï¼‰ã€‚</p>
<p>ç”± commitRoot æ‰§è¡Œè§’è‰²äº¤æ¢ï¼Œäº¤æ¢æ–¹å¼æ˜¯æŒ‡é’ˆæŒ‡å‘ä¿®æ”¹ï¼Œcommit é˜¶æ®µåˆè¢«æ‹†æˆä¸‰ä¸ªé˜¶æ®µã€‚æ¥è‡ª<code>ReactFiberWorkLoop.js</code>ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">commitRoot</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-keyword">const</span> finishedWork = root.<span class="hljs-property">finishedWork</span>;
  root.<span class="hljs-property">finishedWork</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-comment">// é˜¶æ®µ1ï¼šmutation å‰</span>
  <span class="hljs-title function_">commitBeforeMutationEffects</span>(root, finishedWork);

  <span class="hljs-comment">// é˜¶æ®µ2ï¼šmutation</span>
  <span class="hljs-title function_">commitMutationEffects</span>(root, finishedWork);
  root.<span class="hljs-property">current</span> = finishedWork ;
  
  <span class="hljs-comment">// é˜¶æ®µ3ï¼šlayout é˜¶æ®µ</span>
  <span class="hljs-title function_">commitLayoutEffects</span>(root, finishedWork);
}
</code></pre>
<p><strong>é˜¶æ®µä¸€ï¼šmutation å‰</strong></p>
<p>è¯¥é˜¶æ®µå‘ç”Ÿåœ¨æ›´æ–° DOM å‰ï¼Œç”¨äºä¸º mutation åšå‡†å¤‡ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">commitBeforeMutationEffects</span>(<span class="hljs-params">root, firstChild</span>) {
  <span class="hljs-keyword">let</span> nextEffect = firstChild;
  <span class="hljs-keyword">while</span> (nextEffect !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">const</span> flags = nextEffect.<span class="hljs-property">flags</span>;
    <span class="hljs-keyword">if</span> (flags &amp; <span class="hljs-title class_">Snapshot</span>) {
      <span class="hljs-title function_">commitBeforeMutationEffectOnFiber</span>(nextEffect);
    }
    nextEffect = nextEffect.<span class="hljs-property">nextEffect</span>;
  }
}
</code></pre>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒReact ä¼šéå†æ‰€æœ‰å¸¦ Snapshot æ ‡è®°çš„ Fiberï¼ŒSnapshot æ ‡è®°å¯¹åº” getSnapshotBeforeUpdateã€‚</p>
<p>è¿™ä¹ˆåšçš„ç›®çš„æ˜¯è®©æˆ‘ä»¬åœ¨ DOM æ›´æ–°å‰æ‹¿åˆ°æ›´æ–°å‰çš„ DOM çš„çœŸå®çŠ¶æ€çš„â€œå¿«ç…§â€ï¼Œå¦‚æœåœ¨æ›´æ–°åå†è·å–ï¼Œå°±ä¸å®Œå…¨å‡†ç¡®äº†ã€‚</p>
<p>React æ˜¯ä¸€ä¸ªå¢é‡æ›´æ–°çš„ Fiber æ ‘ï¼Œä¸æ˜¯ä¸€ä¸ªå•çº¯çš„ DOM æ ‘ï¼Œå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>å¤šä¸ªç»„ä»¶æœ‰ Snapshot å‰¯ä½œç”¨</li>
<li>æœ‰äº›åµŒå¥—ç»„ä»¶ä¼šäº§ç”Ÿ Snapshot</li>
<li>æŸäº›ç»„ä»¶çš„å­ç»„ä»¶æ²¡æœ‰æ›´æ–°ï¼Œä½†å­ç»„ä»¶ä»ç„¶éœ€è¦ Snapshot</li>
</ul>
<p>å› æ­¤ React ä¸èƒ½åªå¤„ç†å½“å‰èŠ‚ç‚¹ï¼Œå®ƒéœ€è¦ç¡®ä¿ï¼šæ¯ä¸€ä¸ª Fiber èŠ‚ç‚¹ï¼Œåªè¦åœ¨æœ¬æ¬¡æ›´æ–°ä¸­è¢«æ ‡è®°ä¸º Snapshotï¼Œéƒ½å¿…é¡»åœ¨ DOM æ›´æ–°å‰æ‰§è¡Œå¿«ç…§ã€‚</p>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œåªå¤„ç† Snapshotï¼Œä¸éœ€è¦è€ƒè™‘å…¶å®ƒflagsï¼Œå› ä¸ºå…¶å®ƒ flags ä¸æ˜¯å¿…é¡»åœ¨ DOM æ›´æ–°å‰æ‰§è¡Œã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>Placementï¼ˆæ’å…¥ DOMï¼‰ï¼šmutation é˜¶æ®µ</li>
<li>Updateï¼ˆæ›´æ–°å±æ€§ï¼‰ï¼šmutation é˜¶æ®µ</li>
<li>Deletionï¼ˆåˆ é™¤DOMï¼‰ï¼šmutation é˜¶æ®µ</li>
<li>useEffectï¼šLayout åå¼‚æ­¥æ‰§è¡Œ</li>
</ul>
<p>æ€»ç»“ï¼šå¦‚æœè¢«é—®åˆ° commitBeforeMutationEffects è¦éå†æ‰€æœ‰ Snapshot Fiber çš„åŸå› ï¼Œå¯ä»¥è¿™ä¹ˆå›ç­”ï¼š</p>
<blockquote>
<p>å› ä¸º Snapshot å¯¹åº” getSnapshotBeforeUpdateï¼Œå®ƒçš„è¯­ä¹‰è¦æ±‚â€œè¯»å–æ—§ DOM çŠ¶æ€â€ã€‚<br/>
æ‰€ä»¥å¿…é¡»åœ¨ mutation é˜¶æ®µï¼ˆDOM æ›´æ–°ï¼‰ä¹‹å‰æ‰§è¡Œã€‚<br/>
React é€šè¿‡éå† effectList ä¸Šæ‰€æœ‰å¸¦ Snapshot æ ‡è®°çš„ Fiberï¼Œç¡®ä¿æ‰€æœ‰ç»„ä»¶åœ¨ DOM è¢«ä¿®æ”¹ä¹‹å‰å®Œæˆå¿«ç…§è¯»å–ã€‚<br/>
è¿™ä¿è¯äº†ç»„ä»¶åœ¨ update é˜¶æ®µèƒ½è·å¾—ç²¾å‡†çš„ DOM å˜åŒ–å‰çš„çŠ¶æ€ï¼Œä½¿æ»šåŠ¨æ¢å¤ã€å…‰æ ‡ä½ç½®ä¿å­˜ã€å¸ƒå±€æµ‹é‡ç­‰æˆä¸ºå¯èƒ½ã€‚</p>
</blockquote>
<p><strong>é˜¶æ®µäºŒï¼šmutation</strong></p>
<p>è¿™ä¸ªé˜¶æ®µæ˜¯çœŸæ­£æ›´æ–° DOM çš„é˜¶æ®µï¼Œæ‰€æœ‰çš„ DOM å˜åŠ¨éƒ½åœ¨è¿™ä¸€æ­¥å®Œæˆã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">commitMutationEffects</span>(<span class="hljs-params">root, finishedWork</span>) {
  <span class="hljs-keyword">let</span> nextEffect = finishedWork

  <span class="hljs-keyword">while</span> (nextEffect !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">const</span> flags = nextEffect.<span class="hljs-property">flags</span>

    <span class="hljs-comment">// åˆ é™¤èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (flags &amp; <span class="hljs-title class_">Deletion</span>) {
      <span class="hljs-title function_">commitDeletion</span>(root, nextEffect)
    }

    <span class="hljs-comment">// æ’å…¥æˆ–ç§»åŠ¨èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (flags &amp; <span class="hljs-title class_">Placement</span>) {
      <span class="hljs-title function_">commitPlacement</span>(nextEffect)
    }

    <span class="hljs-comment">// æ›´æ–°å±æ€§æˆ–æ–‡æœ¬</span>
    <span class="hljs-keyword">if</span> (flags &amp; <span class="hljs-title class_">Update</span>) {
      <span class="hljs-title function_">commitWork</span>(nextEffect)
    }

    nextEffect = nextEffect.<span class="hljs-property">nextEffect</span>
  }
}
</code></pre>
<p>React ç”¨ flags æ ‡è®° effectï¼Œå¸¸è§çš„ä¸ mutation ç›¸å…³çš„ flags æœ‰ï¼š</p>
<ul>
<li>Placementï¼šéœ€è¦æ’å…¥ï¼ˆmountï¼‰æˆ–ç§»åŠ¨èŠ‚ç‚¹</li>
<li>Deletionï¼šéœ€è¦åˆ é™¤ï¼ˆunmountï¼‰èŠ‚ç‚¹</li>
<li>Updateï¼šæ›´æ–°å±æ€§/æ–‡æœ¬</li>
<li>Snapshotï¼šåœ¨ before-mutation é˜¶æ®µå¤„ç†ï¼ˆå·²åœ¨å‰é¢å®Œæˆï¼‰</li>
<li>Refï¼šéœ€è¦æ›´æ–°/æ¸…ç† refï¼ˆé€šå¸¸åœ¨ layout é˜¶æ®µä¹Ÿä¼šå¤„ç†ï¼‰</li>
<li>Passiveï¼šuseEffectï¼ˆä½† cleanup åœ¨ mutation é˜¶æ®µéœ€è¦å…ˆæ‰§è¡Œå…¶ cleanupï¼Œå†åœ¨ layout/after å†™å…¥ï¼‰</li>
</ul>
<p>å¤„ç†é¡ºåºä¹Ÿæœ‰å…ˆåï¼Œéµå¾ª<strong>Deletion â†’ Placement â†’ Update</strong> çš„é¡ºåºï¼Œè¿™æ ·å¯ä»¥ä¿è¯ DOM çˆ¶èŠ‚ç‚¹çš„ç¨³å®šæ€§ã€‚</p>
<p><strong>é˜¶æ®µä¸‰ï¼šlayout é˜¶æ®µ</strong></p>
<p>åœ¨ DOM æ›´æ–°åæ‰§è¡Œï¼š</p>
<ul>
<li>ç±»ç»„ä»¶çš„ <code>componentDidMount</code></li>
<li>ç±»ç»„ä»¶çš„ <code>componentDidUpdate</code></li>
<li>hook çš„ <code>useLayoutEffect</code> create éƒ¨åˆ†</li>
<li>è°ƒç”¨ ref å›è°ƒ</li>
</ul>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">commitLayoutEffects</span>(<span class="hljs-params">root, finishedWork</span>) {
  <span class="hljs-keyword">let</span> nextEffect = finishedWork;
  
  <span class="hljs-keyword">while</span> (nextEffect !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">if</span> (nextEffect.<span class="hljs-property">flags</span> &amp; <span class="hljs-title class_">Update</span>) {
      <span class="hljs-title function_">commitLayoutEffectOnFiber</span>(root, nextEffect);
    }
    nextEffect = nextEffect.<span class="hljs-property">nextEffect</span>;
  }
}
</code></pre>
<p>ä¸»è¦ä½œç”¨å°±æ˜¯ï¼šæ‰§è¡Œæ‰€æœ‰éœ€è¦â€œçœ‹åˆ°æœ€æ–° DOMâ€çš„å‰¯ä½œç”¨ï¼Œä»è€Œå®ç°åŒæ­¥ã€å¼ºåˆ¶ã€é˜»å¡ï¼Œä¿è¯é¡ºåºä¸€è‡´ï¼Œä¸”èƒ½è®¿é—®æœ€æ–° DOMã€‚</p>
<p>ä¸»æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">commitLayoutEffects</span>(<span class="hljs-params">finishedWork, root, committedLanes</span>) {
  <span class="hljs-comment">// â‘  æ¸…ç†ä¸Šæ¬¡çš„ passive destroyï¼ˆuseEffect cleanupï¼‰</span>
  <span class="hljs-title function_">flushSyncCallbacksOnlyInLegacyMode</span>();

  <span class="hljs-comment">// â‘¡ éå† layoutEffects</span>
  <span class="hljs-title function_">commitLayoutEffectsOnFiber</span>(root, finishedWork, committedLanes);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">commitLayoutEffectsOnFiber</span>(<span class="hljs-params">root, finishedWork, lanes</span>) {
  <span class="hljs-keyword">let</span> nextEffect = finishedWork.<span class="hljs-property">firstEffect</span>;
  <span class="hljs-keyword">while</span> (nextEffect !== <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// æ‰§è¡Œ layout çš„ work</span>
    <span class="hljs-title function_">commitLayoutEffectOnFiber</span>(
      root,
      nextEffect.<span class="hljs-property">alternate</span>,
      nextEffect,
      lanes
    );
    nextEffect = nextEffect.<span class="hljs-property">nextEffect</span>;
  }
}
</code></pre>
<p>å…¶ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨ä¸€ä¸‹<code>commitLayoutEffectsOnFiber</code>ï¼Œè¿™ä¸ªé˜¶æ®µæ˜¯æ ¹æ® flags åˆ†ç±»å¤„ç†å‰¯ä½œç”¨ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">commitLayoutEffectOnFiber</span>(<span class="hljs-params">root, current, finishedWork, lanes</span>) {
  <span class="hljs-keyword">const</span> flags = finishedWork.<span class="hljs-property">flags</span>;

  <span class="hljs-keyword">if</span> (flags &amp; <span class="hljs-title class_">Update</span>) {
    <span class="hljs-comment">// å¤„ç† class ç»„ä»¶çš„ didUpdate ç”Ÿå‘½å‘¨æœŸ</span>
  }

  <span class="hljs-keyword">if</span> (flags &amp; <span class="hljs-title class_">Callback</span>) {
    <span class="hljs-comment">// setState çš„å›è°ƒ</span>
  }

  <span class="hljs-keyword">if</span> (flags &amp; <span class="hljs-title class_">Ref</span>) {
    <span class="hljs-comment">// å®‰è£… ref</span>
  }

  <span class="hljs-comment">// é‡ç‚¹ï¼šå¤„ç† Layout effects</span>
  <span class="hljs-keyword">if</span> (flags &amp; <span class="hljs-title class_">LayoutMask</span>) {
    <span class="hljs-title function_">commitHookEffectListMount</span>(<span class="hljs-title class_">HookLayout</span>, finishedWork)
  }
}
</code></pre>
<p>å…¶ä¸­ LayoutMask åŒ…æ‹¬ useLayoutEffect çš„é”€æ¯å’Œåˆ›å»ºã€‚å¯¹äº useLayoutEffectï¼ŒReactä¼šå…ˆæ‰§è¡Œ destoryï¼Œå†æ‰§è¡Œ createï¼Œè¿™é‡Œçš„å…ˆåé¡ºåºæ°¸è¿œä¸ä¼šè¢«æ‰“ç ´ã€‚</p>
<p>å¼ºè°ƒï¼useLayoutEffect å¿…é¡»åŒæ­¥æ‰§è¡Œï¼Ÿ</p>
<p><strong>å› ä¸ºè¿™ä¸€é˜¶æ®µçš„ DOM å·²ç»æ›´æ–°ï¼Œä¾ç„¶å¯ä»¥åŒæ­¥è¯»å–ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æ¸²æŸ“åœ¨æµè§ˆå™¨ä¸Šï¼Œè¿™æ—¶ useLayoutEffect å¯ä»¥è¿›è¡Œ DOM çš„å°ºå¯¸æµ‹é‡å’Œä½ç½®è®¡ç®—ã€ä¿®æ”¹ DOM ï¼Œä»¥åŠæ³¨å…¥åŒæ­¥é€»è¾‘ã€‚</strong> React æ•…æ„å°† useLayoutEffect å®‰æ’åœ¨æ¸²æŸ“æµè§ˆå™¨ä¹‹å‰ï¼Œä»è€Œé¿å…æ¸²æŸ“åœ¨é¡µé¢çš„ DOM ä¼šå‡ºç°é—ªçƒï¼Œè¿™æ˜¯ä¸€ä¸ªåŒæ­¥è¡Œä¸ºã€‚</p>
<p>å¦‚æœæ—¶ä¼šè¢«é—®åˆ°è¿™æ ·çš„é—®é¢˜â€”â€”ä¸ºä»€ä¹ˆ useEffect ä¸åœ¨è¿™ä¸ªé˜¶æ®µæ‰§è¡Œï¼Ÿæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå›ç­”ï¼š</p>
<blockquote>
<p>å› ä¸º useLayoutEffect æ˜¯åŒæ­¥ + é˜»å¡çš„ï¼Œè€Œ useEffect æ˜¯å¼‚æ­¥ + ä¸é˜»å¡æ¸²æŸ“çš„ï¼ˆè°ƒåº¦åˆ°å¾®ä»»åŠ¡/å®ä»»åŠ¡ï¼‰ï¼Œæ‰€ä»¥ useEffect ä¸ä¼šåœ¨è¿™ä¸ªé˜¶æ®µçš„layout æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯æ‰§è¡Œã€‚</p>
</blockquote>
<p>ä»¥ä¸Šé˜¶æ®µå†…å®¹æ€»ç»“ï¼š</p>
<p><strong>commitLayoutEffects æ˜¯ React commit é˜¶æ®µçš„â€œå¸ƒå±€é˜¶æ®µâ€ï¼Œåœ¨ DOM å·²æ›´æ–°ä½†æµè§ˆå™¨å°šæœªç»˜åˆ¶æ—¶æ‰§è¡Œã€‚<br/>
å®ƒåŒæ­¥æ‰§è¡Œ useLayoutEffect çš„ destroy ä¸ createã€ç±»ç»„ä»¶çš„ didMount/didUpdateã€ref èµ‹å€¼ç­‰æ‰€æœ‰éœ€è¦è®¿é—®æœ€æ–° DOM çš„å‰¯ä½œç”¨ã€‚<br/>
React é€šè¿‡ effect list éå†ä»…æ›´æ–°çš„ Fiberï¼Œä¿è¯å‰¯ä½œç”¨æŒ‰ä¸¥æ ¼é¡ºåºæ‰§è¡Œï¼Œå¹¶ç¡®ä¿ DOM çŠ¶æ€ä¸€è‡´æ€§</strong>ã€‚</p>
<h2 data-id="heading-20">è¡¥å……ï¼šä¸ºä»€ä¹ˆ Fiber æ˜¯â€œæœ€å°å¯å·¥ä½œå•å…ƒâ€</h2>
<p>å› ä¸º Fiber ä»¥å‰æ˜¯ä¸å¯ä¸­æ–­ã€ä¸å¯æš‚åœçš„â€œé€’å½’è°ƒç”¨æ ˆâ€ï¼ŒFiber çš„å‡ºç°æŠŠé€’å½’å˜æˆäº†â€œå¯è¿­ä»£çš„å•é“¾è¡¨ç»“æ„â€ï¼Œæ¯ä¸ª FiberNode æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œè¿™å°±æ˜¯ Fiber â€œå¯ä¸­æ–­â€çš„æ ¹æœ¬åŸå› ã€‚</p>
<p>React Fiber çš„æœ¬è´¨å°±æ˜¯ï¼šæŠŠç»„ä»¶æ ‘ä»é€’å½’æ”¹å†™æˆå¯éå†çš„é“¾è¡¨ï¼Œè®©æ¸²æŸ“å˜æˆå¯æ‹†åˆ†çš„å·¥ä½œå•å…ƒï¼Œä»è€Œå¯ä»¥æš‚åœã€æ¢å¤ã€ä¸¢å¼ƒã€é‡åšã€‚</p>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p>React 16 å¼•å…¥ Fiberï¼Œæœ¬è´¨ä¸Šæ˜¯ç”¨ä¸€å¥—â€œå¯ä¸­æ–­ã€å¯æ¢å¤â€çš„è°ƒåº¦ç³»ç»Ÿæ¥æ›¿ä»£åŸå…ˆä¸å¯ä¸­æ–­çš„ Stack Reconcilerï¼ˆé€’å½’è°ƒç”¨æ ˆï¼‰ã€‚Fiber æ—¢æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®ç»“æ„ï¼ˆFiberNodeï¼‰ï¼Œåˆæ˜¯ä¸€å¥—å®Œæ•´çš„æ¸²æŸ“ä¸è°ƒåº¦æœºåˆ¶ï¼ˆWorkLoop + Schedulerï¼‰ã€‚å®ƒé€šè¿‡ï¼š</p>
<ul>
<li><strong>åŒç¼“å­˜æœºåˆ¶</strong></li>
<li><strong>å•é“¾è¡¨åŒ–çš„æ ‘èŠ‚ç‚¹FiberNode</strong></li>
<li><strong>å¯åˆ†ç‰‡ä¸å¯ä¸­æ–­çš„å·¥ä½œå•å…ƒ</strong></li>
<li><strong>åŸºäºä¼˜å…ˆçº§çš„è°ƒåº¦æ¨¡å‹</strong></li>
</ul>
<p>è®© React èƒ½å¤Ÿåœ¨æ¸²æŸ“æœŸé—´æš‚åœã€æ¢å¤ã€æ”¾å¼ƒä»»åŠ¡ï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶æœºç»§ç»­æ‰§è¡Œï¼Œä¸å»é•¿æ—¶é—´çš„å æ® JS ä¸»çº¿ç¨‹ï¼Œä»è€Œé¿å…å¡é¡¿ã€‚</p>
<p>Fiber çš„å¼•å…¥å½»åº•æ”¹å˜äº† React çš„æ¸²æŸ“æ¨¡å‹ï¼Œä½¿å¾—ï¼š</p>
<ul>
<li>æ¸²æŸ“å˜å¾—å¯æ§ã€ä¸å†é˜»å¡ä¸»çº¿ç¨‹</li>
<li>æ›´é«˜ä¼˜å…ˆçº§çš„ç”¨æˆ·äº¤äº’å¯ä»¥â€œæ’é˜Ÿâ€</li>
<li>æ›´æ–°å¯ä»¥åˆ†ç‰‡å®Œæˆï¼ˆæ—¶é—´åˆ‡ç‰‡ï¼‰</li>
<li>DOM æ›´æ–°è¢«æ‹†è§£æˆ before-mutation â†’ mutation â†’ layout ä¸‰é˜¶æ®µï¼Œæ›´å¯é¢„æµ‹ã€æ›´åŠ ç²¾ç»†</li>
</ul>
<p>å¯ä»¥è¯´ï¼š<strong>Fiber æ˜¯ React å¹¶å‘ç‰¹æ€§çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯ React æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒã€‚</strong></p>
<p>React ä»åŒæ­¥é€’å½’ â†’ å¯è°ƒåº¦çš„ Fiber æ¶æ„ï¼Œæ˜¯ä¸€æ¬¡ä»â€œå‡½æ•°è°ƒç”¨â€åˆ°â€œä»»åŠ¡è°ƒåº¦â€çš„æ ¹æœ¬æ€§è½¬å˜ï¼Œä¸ºåç»­çš„ Concurrent Modeã€Suspense ç­‰ç‰¹æ€§å¥ å®šäº†å…¨éƒ¨åŸºç¡€ã€‚</p>
<p>ä»¥ä¸Šä¸ºä¸ªäººåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­çš„ä¸€äº›ç†è§£å’Œæ„Ÿæ‚Ÿï¼Œéƒ¨åˆ†æœ‰å‚è€ƒï¼Œå¦‚æœ‰ä¸è¶³ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¹²äº†10å¹´å‰ç«¯ï¼Œæ‰å­¦ä¼šä½¿ç”¨IntersectionObserver]]></title>    <link>https://juejin.cn/post/7574045294611873827</link>    <guid>https://juejin.cn/post/7574045294611873827</guid>    <pubDate>2025-11-19T08:45:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574045294611873827" data-draft-id="7573989365615460352" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¹²äº†10å¹´å‰ç«¯ï¼Œæ‰å­¦ä¼šä½¿ç”¨IntersectionObserver"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-19T08:45:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="tyroæ›¹ä»“èˆ’"/> <meta itemprop="url" content="https://juejin.cn/user/3403743729041038"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¹²äº†10å¹´å‰ç«¯ï¼Œæ‰å­¦ä¼šä½¿ç”¨IntersectionObserver
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743729041038/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    tyroæ›¹ä»“èˆ’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T08:45:37.000Z" title="Wed Nov 19 2025 08:45:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>IntersectionObserver</code>Â æ˜¯ JavaScript åŸç”Ÿ APIï¼Œç”¨äº<strong>å¼‚æ­¥ç›‘å¬ç›®æ ‡å…ƒç´ ä¸è§†å£ï¼ˆæˆ–æŒ‡å®šå®¹å™¨å…ƒç´ ï¼‰çš„äº¤å‰çŠ¶æ€</strong>ï¼ˆå³å…ƒç´ æ˜¯å¦è¿›å…¥ / ç¦»å¼€è§†å£ã€äº¤å‰æ¯”ä¾‹å¤šå°‘ï¼‰ã€‚æ ¸å¿ƒä¼˜åŠ¿æ˜¯æ€§èƒ½ä¼˜å¼‚ï¼ˆæµè§ˆå™¨åŸç”Ÿä¼˜åŒ–ï¼Œé¿å… scroll äº‹ä»¶çš„é«˜é¢‘è§¦å‘ï¼‰ï¼Œå¸¸è§åœºæ™¯ï¼šæ‡’åŠ è½½å›¾ç‰‡ / è§†é¢‘ã€æ»šåŠ¨åŠ è½½åˆ—è¡¨ã€æ›å…‰ç»Ÿè®¡ã€å…ƒç´ è¿›å…¥è§†å£æ—¶è§¦å‘åŠ¨ç”»ç­‰ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ</h3>
<ol>
<li><strong>ç›®æ ‡å…ƒç´ ï¼ˆtargetï¼‰</strong> ï¼šéœ€è¦ç›‘å¬çš„ DOM å…ƒç´ ï¼ˆå¦‚å›¾ç‰‡ã€åˆ—è¡¨é¡¹ï¼‰ã€‚</li>
<li><strong>æ ¹å…ƒç´ ï¼ˆrootï¼‰</strong> ï¼šä½œä¸º â€œè§†å£â€ çš„å‚è€ƒå®¹å™¨ï¼Œé»˜è®¤æ˜¯æµè§ˆå™¨è§†å£ï¼ˆ<code>null</code>ï¼‰ï¼Œå¿…é¡»æ˜¯ç›®æ ‡å…ƒç´ çš„ç¥–å…ˆå…ƒç´ ã€‚</li>
<li><strong>æ ¹è¾¹ç•Œï¼ˆrootMarginï¼‰</strong> ï¼šæ ¹å…ƒç´ çš„ â€œæ‰©å±• / æ”¶ç¼©è¾¹è·â€ï¼Œç”¨äºæå‰ / å»¶è¿Ÿè§¦å‘ç›‘å¬ï¼ˆå¦‚æå‰ 100px æ£€æµ‹å…ƒç´ å³å°†è¿›å…¥è§†å£ï¼‰ã€‚</li>
<li><strong>é˜ˆå€¼ï¼ˆthresholdï¼‰</strong> ï¼šè§¦å‘å›è°ƒçš„ â€œäº¤å‰æ¯”ä¾‹é˜ˆå€¼â€ï¼ˆ0~1ï¼‰ï¼Œå¯ä¼ å•ä¸ªå€¼æˆ–æ•°ç»„ï¼ˆå¦‚Â <code>[0, 0.5, 1]</code>Â è¡¨ç¤ºå…ƒç´ åˆšè¿›å…¥ã€ä¸€åŠè¿›å…¥ã€å®Œå…¨è¿›å…¥æ—¶éƒ½è§¦å‘ï¼‰ã€‚</li>
<li><strong>äº¤å‰çŠ¶æ€ï¼ˆintersectionRatioï¼‰</strong> ï¼šç›®æ ‡å…ƒç´ ä¸æ ¹å…ƒç´ çš„äº¤å‰æ¯”ä¾‹ï¼ˆ0 = å®Œå…¨ä¸äº¤å‰ï¼Œ1 = å®Œå…¨äº¤å‰ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-1">äºŒã€åŸºæœ¬ä½¿ç”¨æ­¥éª¤</h3>
<h4 data-id="heading-2">1. è¯­æ³•ç»“æ„</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åˆ›å»ºè§‚å¯Ÿå™¨å®ä¾‹ï¼Œä¼ å…¥å›è°ƒå‡½æ•°å’Œé…ç½®é¡¹</span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries, observer</span>) =&gt;</span> {
  <span class="hljs-comment">// entriesï¼šæ‰€æœ‰è¢«ç›‘å¬å…ƒç´ çš„äº¤å‰çŠ¶æ€æ•°ç»„ï¼ˆæ¯ä¸ªå…ƒç´ æ˜¯ IntersectionObserverEntry å¯¹è±¡ï¼‰</span>
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-comment">// entryï¼šå•ä¸ªå…ƒç´ çš„äº¤å‰çŠ¶æ€ä¿¡æ¯</span>
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
      <span class="hljs-comment">// å…ƒç´ è¿›å…¥è§†å£ï¼ˆäº¤å‰æ¯”ä¾‹ &gt; 0ï¼‰</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ è¿›å…¥è§†å£'</span>, entry.<span class="hljs-property">target</span>);
      <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ‡’åŠ è½½ã€è§¦å‘åŠ¨ç”»ï¼‰</span>
      <span class="hljs-comment">// å¯é€‰ï¼šåªç›‘å¬ä¸€æ¬¡ï¼Œè§¦å‘åå–æ¶ˆè§‚å¯Ÿ</span>
      observer.<span class="hljs-title function_">unobserve</span>(entry.<span class="hljs-property">target</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å…ƒç´ ç¦»å¼€è§†å£ï¼ˆäº¤å‰æ¯”ä¾‹ = 0ï¼‰</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ ç¦»å¼€è§†å£'</span>, entry.<span class="hljs-property">target</span>);
    }
  });
}, {
  <span class="hljs-attr">root</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// æ ¹å…ƒç´ ï¼Œé»˜è®¤è§†å£ï¼ˆnullï¼‰</span>
  <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">'0px'</span>, <span class="hljs-comment">// æ ¹å…ƒç´ è¾¹è·ï¼ˆæ ¼å¼ï¼šä¸Š å³ ä¸‹ å·¦ï¼Œæ”¯æŒ px/%)</span>
  <span class="hljs-attr">threshold</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// é˜ˆå€¼ï¼ˆé»˜è®¤ 0ï¼Œå…ƒç´ åˆšè¿›å…¥è§†å£æ—¶è§¦å‘ï¼‰</span>
});

<span class="hljs-comment">// 2. ç›‘å¬ç›®æ ‡å…ƒç´ ï¼ˆå¯ç›‘å¬å¤šä¸ªï¼‰</span>
<span class="hljs-keyword">const</span> target1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.target1'</span>);
<span class="hljs-keyword">const</span> target2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.target2'</span>);
observer.<span class="hljs-title function_">observe</span>(target1);
observer.<span class="hljs-title function_">observe</span>(target2);

<span class="hljs-comment">// 3. å¯é€‰ï¼šåœæ­¢ç›‘å¬å•ä¸ªå…ƒç´ </span>
observer.<span class="hljs-title function_">unobserve</span>(target1);

<span class="hljs-comment">// 4. å¯é€‰ï¼šé”€æ¯è§‚å¯Ÿå™¨ï¼ˆæ‰€æœ‰ç›‘å¬éƒ½åœæ­¢ï¼‰</span>
observer.<span class="hljs-title function_">disconnect</span>();
</code></pre>
<h4 data-id="heading-3">2. å…³é”®å‚æ•°è¯¦è§£</h4>

























<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>entries</code></td><td>æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯Â <code>IntersectionObserverEntry</code>Â å¯¹è±¡ï¼ŒåŒ…å«å•ä¸ªç›®æ ‡çš„äº¤å‰ä¿¡æ¯ï¼š-Â <code>isIntersecting</code>ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦æ­£åœ¨äº¤å‰ï¼ˆè¿›å…¥è§†å£ï¼‰-Â <code>intersectionRatio</code>ï¼šäº¤å‰æ¯”ä¾‹ï¼ˆ0~1ï¼‰-Â <code>target</code>ï¼šè¢«ç›‘å¬çš„ DOM å…ƒç´ -Â <code>boundingClientRect</code>ï¼šç›®æ ‡å…ƒç´ çš„ä½ç½®ä¿¡æ¯-Â <code>rootBounds</code>ï¼šæ ¹å…ƒç´ çš„ä½ç½®ä¿¡æ¯</td></tr><tr><td><code>root</code></td><td>å‚è€ƒå®¹å™¨ï¼ˆDOM å…ƒç´ ï¼‰ï¼Œé»˜è®¤Â <code>null</code>ï¼ˆæµè§ˆå™¨è§†å£ï¼‰ï¼Œå¿…é¡»æ˜¯ç›®æ ‡å…ƒç´ çš„ç¥–å…ˆã€‚</td></tr><tr><td><code>rootMargin</code></td><td>æ ¹å…ƒç´ çš„è¾¹è·ï¼Œç”¨äºæ‰©å±• / æ”¶ç¼©æ ¹å…ƒç´ çš„ â€œæœ‰æ•ˆè§†å£â€ï¼Œæ ¼å¼åŒ CSS è¾¹è·ã€‚ä¾‹ï¼š<code>rootMargin: '50px 0px'</code>Â â†’ æ ¹å…ƒç´ ä¸Šä¸‹æ‰©å±• 50pxï¼Œæå‰ 50px è§¦å‘ç›‘å¬ã€‚</td></tr><tr><td><code>threshold</code></td><td>è§¦å‘å›è°ƒçš„äº¤å‰æ¯”ä¾‹é˜ˆå€¼ï¼Œå¯ä¼ æ•°ç»„ï¼š-Â <code>threshold: 0</code>ï¼ˆé»˜è®¤ï¼‰â†’ å…ƒç´ åˆšè¿›å…¥è§†å£ï¼ˆäº¤å‰æ¯”ä¾‹ &gt;0ï¼‰æ—¶è§¦å‘-Â <code>threshold: 1</code>Â â†’ å…ƒç´ å®Œå…¨è¿›å…¥è§†å£ï¼ˆäº¤å‰æ¯”ä¾‹ =1ï¼‰æ—¶è§¦å‘-Â <code>threshold: [0, 0.5, 1]</code>Â â†’ å…ƒç´ åˆšè¿›å…¥ã€ä¸€åŠè¿›å…¥ã€å®Œå…¨è¿›å…¥æ—¶å„è§¦å‘ä¸€æ¬¡</td></tr></tbody></table>
<h3 data-id="heading-4">ä¸‰ã€å¸¸è§åœºæ™¯ç¤ºä¾‹</h3>
<h4 data-id="heading-5">ç¤ºä¾‹ 1ï¼šå›¾ç‰‡æ‡’åŠ è½½ï¼ˆæ ¸å¿ƒåœºæ™¯ï¼‰</h4>
<p>éœ€æ±‚ï¼šé¡µé¢æ»šåŠ¨æ—¶ï¼Œå›¾ç‰‡è¿›å…¥è§†å£åå†åŠ è½½çœŸå®å›¾ç‰‡ï¼ˆä¼˜åŒ–é¦–å±åŠ è½½é€Ÿåº¦ï¼‰ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- HTMLï¼šå ä½å›¾ + çœŸå®å›¾ç‰‡åœ°å€å­˜æ”¾åœ¨ data-src å±æ€§ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"lazy-img"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"placeholder.jpg"</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">"real-img1.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"æ‡’åŠ è½½å›¾ç‰‡"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"lazy-img"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"placeholder.jpg"</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">"real-img2.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"æ‡’åŠ è½½å›¾ç‰‡"</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åˆ›å»ºè§‚å¯Ÿå™¨</span>
<span class="hljs-keyword">const</span> lazyLoadObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
      <span class="hljs-comment">// å…ƒç´ è¿›å…¥è§†å£ï¼ŒåŠ è½½çœŸå®å›¾ç‰‡</span>
      <span class="hljs-keyword">const</span> img = entry.<span class="hljs-property">target</span>;
      img.<span class="hljs-property">src</span> = img.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>; <span class="hljs-comment">// æ›¿æ¢ src ä¸ºçœŸå®åœ°å€</span>
      img.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'loaded'</span>); <span class="hljs-comment">// å¯é€‰ï¼šæ·»åŠ åŠ è½½å®Œæˆæ ·å¼</span>
      lazyLoadObserver.<span class="hljs-title function_">unobserve</span>(img); <span class="hljs-comment">// åªåŠ è½½ä¸€æ¬¡ï¼Œå–æ¶ˆç›‘å¬</span>
    }
  });
}, {
  <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">'100px 0px'</span>, <span class="hljs-comment">// æå‰ 100px å¼€å§‹åŠ è½½ï¼ˆä¼˜åŒ–ä½“éªŒï¼Œé¿å…ç™½å±ï¼‰</span>
  <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.1</span> <span class="hljs-comment">// å…ƒç´  10% è¿›å…¥è§†å£æ—¶è§¦å‘</span>
});

<span class="hljs-comment">// 2. ç›‘å¬æ‰€æœ‰æ‡’åŠ è½½å›¾ç‰‡</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.lazy-img'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> {
  lazyLoadObserver.<span class="hljs-title function_">observe</span>(img);
});
</code></pre>
<h4 data-id="heading-6">ç¤ºä¾‹ 2ï¼šæ»šåŠ¨åŠ è½½æ›´å¤šï¼ˆæ— é™æ»šåŠ¨ï¼‰</h4>
<p>éœ€æ±‚ï¼šæ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨çš„ â€œåŠ è½½æ›´å¤šâ€ æŒ‰é’®æ—¶ï¼Œè¯·æ±‚ä¸‹ä¸€é¡µæ•°æ®ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"load-more"</span>&gt;</span>åŠ è½½æ›´å¤š<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> loadMoreBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.load-more'</span>);
<span class="hljs-keyword">const</span> list = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.list'</span>);
<span class="hljs-keyword">let</span> page = <span class="hljs-number">1</span>;

<span class="hljs-comment">// åˆ›å»ºè§‚å¯Ÿå™¨ï¼ˆç›‘å¬â€œåŠ è½½æ›´å¤šâ€æŒ‰é’®ï¼‰</span>
<span class="hljs-keyword">const</span> loadMoreObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [entry] = entries;
  <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span> &amp;&amp; !isLoading) { <span class="hljs-comment">// isLoading é˜²æ­¢é‡å¤è¯·æ±‚</span>
    isLoading = <span class="hljs-literal">true</span>;
    loadMoreBtn.<span class="hljs-property">textContent</span> = <span class="hljs-string">'åŠ è½½ä¸­...'</span>;
    <span class="hljs-comment">// æ¨¡æ‹Ÿè¯·æ±‚ä¸‹ä¸€é¡µæ•°æ®</span>
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/data?page=<span class="hljs-subst">${page}</span>`</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
        data.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
          <span class="hljs-keyword">const</span> li = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'li'</span>);
          li.<span class="hljs-property">textContent</span> = item.<span class="hljs-property">content</span>;
          list.<span class="hljs-title function_">appendChild</span>(li);
        });
        page++;
        isLoading = <span class="hljs-literal">false</span>;
        loadMoreBtn.<span class="hljs-property">textContent</span> = <span class="hljs-string">'åŠ è½½æ›´å¤š'</span>;
      });
  }
}, { <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">'50px 0px'</span> }); <span class="hljs-comment">// æå‰ 50px è§¦å‘ï¼Œä¼˜åŒ–ä½“éªŒ</span>

<span class="hljs-comment">// ç›‘å¬â€œåŠ è½½æ›´å¤šâ€æŒ‰é’®</span>
loadMoreObserver.<span class="hljs-title function_">observe</span>(loadMoreBtn);
</code></pre>
<h4 data-id="heading-7">ç¤ºä¾‹ 3ï¼šå…ƒç´ è¿›å…¥è§†å£è§¦å‘åŠ¨ç”»</h4>
<p>éœ€æ±‚ï¼šå…ƒç´ æ»šåŠ¨è¿›å…¥è§†å£æ—¶ï¼Œæ·»åŠ  â€œæ·¡å…¥â€ åŠ¨ç”»ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* CSSï¼šåˆå§‹çŠ¶æ€ï¼ˆé€æ˜ã€åç§»ï¼‰+ åŠ¨ç”»çŠ¶æ€ */</span>
<span class="hljs-selector-class">.fade-in</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">20px</span>);
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">0.5s</span>, transform <span class="hljs-number">0.5s</span>;
}
<span class="hljs-selector-class">.fade-in</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>);
}
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fade-in"</span>&gt;</span>å…ƒç´  1ï¼šè¿›å…¥è§†å£æ·¡å…¥<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fade-in"</span>&gt;</span>å…ƒç´  2ï¼šè¿›å…¥è§†å£æ·¡å…¥<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºè§‚å¯Ÿå™¨</span>
<span class="hljs-keyword">const</span> animationObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
      entry.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>); <span class="hljs-comment">// è§¦å‘åŠ¨ç”»</span>
      animationObserver.<span class="hljs-title function_">unobserve</span>(entry.<span class="hljs-property">target</span>); <span class="hljs-comment">// åªè§¦å‘ä¸€æ¬¡</span>
    }
  });
}, { <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.3</span> }); <span class="hljs-comment">// å…ƒç´  30% è¿›å…¥è§†å£æ—¶è§¦å‘</span>

<span class="hljs-comment">// ç›‘å¬æ‰€æœ‰éœ€è¦åŠ¨ç”»çš„å…ƒç´ </span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.fade-in'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> {
  animationObserver.<span class="hljs-title function_">observe</span>(el);
});
</code></pre>
<h3 data-id="heading-8">å››ã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>å…¼å®¹æ€§</strong>ï¼šæ”¯æŒ Chrome 51+ã€Firefox 55+ã€Safari 12.1+ã€Edge 16+ï¼Œä¸æ”¯æŒ IEï¼ˆéœ€å…¼å®¹å¯ä½¿ç”¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fw3c%2FIntersectionObserver%2Ftree%2Fmain%2Fpolyfill" target="_blank" title="https://github.com/w3c/IntersectionObserver/tree/main/polyfill" ref="nofollow noopener noreferrer">polyfill</a>ï¼‰ã€‚</li>
<li><strong>å¼‚æ­¥ç‰¹æ€§</strong>ï¼š<code>IntersectionObserver</code>Â æ˜¯å¼‚æ­¥çš„ï¼Œå›è°ƒå‡½æ•°ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼ˆæ€§èƒ½ä¼˜åŠ¿ï¼‰ï¼Œä½†æ— æ³•åŒæ­¥è·å–å…ƒç´ äº¤å‰çŠ¶æ€ã€‚</li>
<li><strong>root å¿…é¡»æ˜¯ç¥–å…ˆå…ƒç´ </strong>ï¼šå¦‚æœæŒ‡å®šÂ <code>root</code>ï¼Œå¿…é¡»ç¡®ä¿å®ƒæ˜¯ç›®æ ‡å…ƒç´ çš„çˆ¶çº§ / ç¥–å…ˆå…ƒç´ ï¼Œå¦åˆ™ç›‘å¬æ— æ•ˆã€‚</li>
<li><strong>åŠ¨æ€å…ƒç´ ç›‘å¬</strong>ï¼šå¦‚æœç›®æ ‡å…ƒç´ æ˜¯åŠ¨æ€åˆ›å»ºçš„ï¼ˆå¦‚é€šè¿‡ JS æ–°å¢çš„åˆ—è¡¨é¡¹ï¼‰ï¼Œåˆ›å»ºåéœ€è°ƒç”¨Â <code>observer.observe(æ–°å…ƒç´ )</code>Â æ‰‹åŠ¨æ·»åŠ ç›‘å¬ã€‚</li>
<li><strong>rootMargin å•ä½</strong>ï¼šæ”¯æŒÂ <code>px</code>Â æˆ–Â <code>%</code>ï¼Œä½†ä¸èƒ½æ··åˆå•ä½ï¼ˆå¦‚Â <code>50px 10%</code>Â æ˜¯å…è®¸çš„ï¼Œ<code>50 10px</code>Â ä¸å…è®¸ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-9">äº”ã€æ€»ç»“</h3>
<p><code>IntersectionObserver</code>Â çš„æ ¸å¿ƒä»·å€¼æ˜¯<strong>é«˜æ•ˆç›‘å¬å…ƒç´ äº¤å‰çŠ¶æ€</strong>ï¼Œæ›¿ä»£ä¼ ç»Ÿçš„Â <code>scroll</code>Â +Â <code>getBoundingClientRect()</code>Â æ–¹æ¡ˆï¼ˆåè€…é«˜é¢‘è§¦å‘ï¼Œæ€§èƒ½è¾ƒå·®ï¼‰ã€‚ä½¿ç”¨æ—¶åªéœ€ä¸‰æ­¥ï¼š</p>
<ol>
<li>åˆ›å»ºè§‚å¯Ÿå™¨ï¼ˆé…ç½®å›è°ƒå’Œå‚æ•°ï¼‰ï¼›</li>
<li>ç›‘å¬ç›®æ ‡å…ƒç´ ï¼›</li>
<li>è§¦å‘åæ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼ˆå¹¶å¯é€‰å–æ¶ˆç›‘å¬ï¼‰ã€‚</li>
</ol>
<p>å¸¸è§åº”ç”¨ï¼šæ‡’åŠ è½½ã€æ— é™æ»šåŠ¨ã€æ›å…‰ç»Ÿè®¡ã€æ»šåŠ¨åŠ¨ç”»ï¼Œæ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–å’Œäº¤äº’ä½“éªŒæå‡çš„é‡è¦ APIã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯chromeæ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿]]></title>    <link>https://juejin.cn/post/7573521516324732955</link>    <guid>https://juejin.cn/post/7573521516324732955</guid>    <pubDate>2025-11-18T00:06:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573521516324732955" data-draft-id="7572481101711097910" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯chromeæ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿"/> <meta itemprop="keywords" content="å‰ç«¯,æµè§ˆå™¨,JavaScript"/> <meta itemprop="datePublished" content="2025-11-18T00:06:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¸€æ ·çš„å°‘å¹´_"/> <meta itemprop="url" content="https://juejin.cn/user/3035079961218551"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯chromeæ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035079961218551/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¸€æ ·çš„å°‘å¹´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-18T00:06:38.000Z" title="Tue Nov 18 2025 00:06:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    264
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ˜¨å¤©ä¸€ä¸ªå®ä¹ ç”ŸåŒäº‹æ¥æ‰¾æˆ‘ï¼šâ€œå“¥ä»¬ï¼Œæˆ‘çš„Chromeæ’ä»¶é‡åˆ°ä¸ªå¥‡æ€ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆæˆ‘æ’å…¥åˆ°é¡µé¢çš„å†…å®¹è„šæœ¬content.jsï¼Œé‡å†™é¡µé¢è„šæœ¬çš„æ–¹æ³•æ²¡æœ‰ç”Ÿæ•ˆï¼Ÿâ€</p>
<p>å…¶å®ç±»ä¼¼çš„é—®é¢˜æˆ‘ä¹Ÿç»å¸¸ç¢°åˆ°ï¼Œæ¯”å¦‚ï¼šâ€œä¸ºä»€ä¹ˆpopupé¡µé¢è°ƒç”¨ä¸äº†content.jsçš„å‡½æ•°ï¼Ÿâ€ã€â€œæ’å…¥åˆ°é¡µé¢çš„å†…å®¹è„šæœ¬ä¸ºå•¥è®¿é—®ä¸åˆ°Vueå®ä¾‹ï¼Ÿâ€ã€â€œbackgroundè„šæœ¬ä¸ºå•¥ä¸èƒ½è®¿é—®é¡µé¢çš„domèŠ‚ç‚¹â€?â€¦â€¦â€¦è¿™äº›é—®é¢˜åœ¨æ’ä»¶å¼€å‘é‡ŒçœŸçš„æŒºå¸¸è§çš„ï¼Œå¤§å®¶éƒ½å®¹æ˜“è¸©å‘ã€‚</p>
<p>æ‰€ä»¥ä»Šå¤©ï¼Œæˆ‘æƒ³ç”¨æœ€é€šä¿—çš„æ–¹å¼ï¼ŒæŠŠè‡ªå·±é‡åˆ°çš„é—®é¢˜å’Œä¸€äº›å°ç»éªŒåˆ†äº«å‡ºæ¥ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆChromeè¦æŠŠæ’ä»¶åˆ†æˆè¿™ä¹ˆå¤šè„šæœ¬ï¼Ÿå®ƒä»¬ä¹‹é—´åˆ°åº•å•¥å…³ç³»ï¼Ÿ</li>
<li>é‚£äº›â€œçœ‹èµ·æ¥åº”è¯¥èƒ½ç”¨ï¼Œä½†å°±æ˜¯ä¸è¡Œâ€çš„é€šä¿¡æ–¹å¼ï¼ŒèƒŒåçš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>æ€ä¹ˆè®©æ’ä»¶çš„å„ä¸ªéƒ¨åˆ†é…åˆå¾—æ›´é¡ºç•…ï¼Ÿ</li>
</ul>
<p>æ”¾å¿ƒï¼Œæ²¡æœ‰å¤æ‚çš„æœ¯è¯­ï¼Œç”¨å›¾è§£çš„æ–¹å¼æ¥æ¢³ç†è„‰ç»œï¼Œå¸Œæœ›è¿™äº›å†…å®¹èƒ½å¸®åˆ°å¤§å®¶ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµï¼</p>
</blockquote>
<h3 data-id="heading-0">å‰ç½®çŸ¥è¯†ï¼š</h3>
<p>è¦ææ‡‚æ’ä»¶é€šä¿¡ï¼Œé¦–å…ˆå¾—äº†è§£æµè§ˆå™¨çš„æ¶æ„ã€‚ç°åœ¨çš„ Chrome æµè§ˆå™¨é‡‡ç”¨çš„æ˜¯â€œå¤šè¿›ç¨‹æ¶æ„â€ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿç›´æ¥çœ‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef2bd5d3aa8b482ab9bbdb857454ceef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764050800&amp;x-signature=1cwDjD6VYVqmH2tNZsn8N02yW84%3D" alt="" loading="lazy"/></p>
<p>ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬æµè§ˆå™¨æ¶æ„æ˜¯ç”±ã€æ¸²æŸ“è¿›ç¨‹ã€æ’ä»¶è¿›ç¨‹ã€ç½‘è·¯è¿›ç¨‹ã€æµè§ˆå™¨ä¸»è¿›ç¨‹ã€gpuè¿›ç¨‹ç­‰ç»„æˆçš„</p>
<ul>
<li>
<p><code>æµè§ˆå™¨ä¸»è¿›ç¨‹</code>: ç›¸å½“äºå…¬å¸çš„å¤§è€æ¿ï¼Œè´Ÿè´£æ•´ä¸ªå…¬å¸çš„è¿è½¬ã€‚æ¯”å¦‚ä½ è¦å¼€æ–°çª—å£ã€åˆ‡æ¢æ ‡ç­¾ã€ä¸‹è½½æ–‡ä»¶ã€å¼¹å‡ºæƒé™æç¤ºï¼Œéƒ½æ˜¯æµè§ˆå™¨ä¸»è¿›ç¨‹å®‰æ’çš„ã€‚</p>
<p>å…¶ä»–è¿›ç¨‹æœ‰å•¥äº‹ä¹Ÿéƒ½å¾—è·Ÿä¸»è¿›ç¨‹æŠ¥å¤‡ï¼Œä¸»è¿›ç¨‹æ¥è°ƒåº¦ã€‚</p>
</li>
<li>
<p><code>æ¸²æŸ“è¿›ç¨‹</code>ï¼šå¹³æ—¶æˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€çš„æ¯ä¸€ä¸ªç½‘é¡µï¼Œéƒ½æ˜¯ç”±æ¸²æŸ“è¿›ç¨‹è¿›è¡Œæ¸²æŸ“çš„ã€‚æ’ä»¶æ³¨å…¥çš„å†…å®¹è„šæœ¬ä¹Ÿåœ¨è¿™é‡Œè¿è¡Œï¼Œä¸è¿‡å¤„äºâ€œéš”ç¦»ä¸–ç•Œâ€ï¼Œä¸é¡µé¢è„šæœ¬ç›¸äº’éš”ç¦»ï¼Œè¿™ä¸ªåé¢æˆ‘ä»¬ä¼šè¯¦ç»†è®²</p>
</li>
<li>
<p><code>ç½‘ç»œè¿›ç¨‹</code>ï¼šå¤„ç†æ‰€æœ‰é¡µé¢ä¸æ‰©å±•çš„è¯·æ±‚ï¼Œæˆ‘ä»¬ç½‘é¡µä¸­æˆ–è€…æ’ä»¶ä¸­çš„æ¥å£è¯·æ±‚è¿™ç§è„æ´»ç´¯æ´»éƒ½ç”±å®ƒæ¥å¹²</p>
</li>
<li>
<p><code>GPUè¿›ç¨‹</code>ï¼šç½‘é¡µä¸­æœ‰ç‚«é…·åŠ¨ç”»ã€è§†é¢‘ã€3Dæ•ˆæœå•¥çš„ï¼ŒGPUè¿›ç¨‹å°±ä¼šå¸®ä½ ç”»çš„åˆå¿«åˆæ¼‚äº®ã€‚</p>
</li>
<li>
<p><code>æ’ä»¶è¿›ç¨‹</code>ï¼šè¿è¡Œæˆ‘ä»¬å¹³æ—¶æ‰€è£…çš„æµè§ˆå™¨æ’ä»¶ï¼Œæˆ‘ä»¬è£…çš„ä¸åŒçš„æ’ä»¶éƒ½ä¼šåˆ†é…åˆ°ä¸åŒçš„æ’ä»¶è¿›ç¨‹ä¸­ï¼Œäº’ä¸å¹²æ‰°ï¼Œè°å®¶æ’ä»¶å‡ºäº†é—®é¢˜ï¼Œæœ€å¤šè‡ªå·±å´©ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–æ’ä»¶å’Œé¡µé¢çš„è¿è¡Œ</p>
</li>
</ul>
<p>Chrome æµè§ˆå™¨å…¶å®å°±æ˜¯æŠŠå„ç§å·¥ä½œåˆ†å¼€æ¥åšï¼Œè°è´Ÿè´£å•¥éƒ½å¾ˆæ¸…æ¥šã€‚<code>ä¸»è¿›ç¨‹</code>ç®¡å¤§å±€ï¼Œ<code>æ¸²æŸ“è¿›ç¨‹</code>è´Ÿè´£æŠŠç½‘é¡µå†…å®¹å±•ç¤ºå‡ºæ¥ï¼Œ<code>ç½‘ç»œè¿›ç¨‹</code>ä¸“é—¨ææ•°æ®ä¼ è¾“ï¼Œ<code>GPUè¿›ç¨‹</code>è®©åŠ¨ç”»å’Œè§†é¢‘æ›´æµç•…ï¼Œ<code>æ’ä»¶è¿›ç¨‹</code>åˆ™è®©ä½ è£…çš„å„ç§æ‰©å±•å„è‡ªç‹¬ç«‹è¿è¡Œã€‚å¤§å®¶å„å¹²å„çš„ï¼Œäº’ä¸å½±å“ï¼Œè¿™æ ·æµè§ˆå™¨ç”¨èµ·æ¥æ‰åˆå¿«åˆç¨³è¿˜å®‰å…¨ã€‚</p>
<h3 data-id="heading-1">æ’ä»¶å„éƒ¨åˆ†çš„è§’è‰²ä¸èƒ½åŠ›</h3>
<p><a href="https://juejin.cn/column/7548643621609193482" target="_blank" title="https://juejin.cn/column/7548643621609193482">æµè§ˆå™¨æ’ä»¶å¼€å‘å®è·µ - ä¸ä¸€æ ·çš„å°‘å¹´_çš„ä¸“æ  - æ˜é‡‘</a></p>
<p>å¤§å®¶çœ‹åˆ°æˆ‘çš„æ’ä»¶ä¸“æ é‡Œçš„æ’ä»¶ç›®å½•ï¼Œå¤§è‡´æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-js" lang="js">demo
â”œâ”€â”€ manifest.<span class="hljs-property">json</span> # æ‰©å±•çš„<span class="hljs-string">"èº«ä»½è¯"</span>
â”œâ”€â”€ background.<span class="hljs-property">js</span> # æ’ä»¶åå°è„šæœ¬
â”œâ”€â”€ injected.<span class="hljs-property">js</span> # æ³¨å…¥é¡µé¢è„šæœ¬
â”œâ”€â”€ content.<span class="hljs-property">js</span> # å†…å®¹è„šæœ¬
â””â”€â”€ popup.<span class="hljs-property">html</span> # å¼¹çª—é¡µé¢
</code></pre>
<p>æˆ‘ä»¬æ¥ç®€å•èŠèŠæ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼š</p>
<h4 data-id="heading-2">manifest.json â€”â€” æ’ä»¶çš„â€œèº«ä»½è¯â€</h4>
<p>è¿™ä¸ªæ–‡ä»¶å°±åƒæ’ä»¶çš„èº«ä»½è¯ï¼Œé‡Œé¢å†™æ˜äº†æ’ä»¶çš„åå­—ã€ç‰ˆæœ¬ã€æƒé™ã€å„ä¸ªè„šæœ¬çš„å…¥å£ã€‚æ¯”å¦‚ä½ è¿™ä¸ªæ’ä»¶æ˜¯å¼¹çª—ç±»å‹ï¼Œè¿˜æ˜¯éœ€è¦å†…å®¹è„šæœ¬ã€åå°è„šæœ¬ï¼Œéƒ½è¦åœ¨è¿™é‡Œå£°æ˜æ¸…æ¥šã€‚æ²¡æœ‰å®ƒï¼Œæµè§ˆå™¨éƒ½ä¸è®¤ä½ è¿™ä¸ªæ’ä»¶ã€‚</p>
<h4 data-id="heading-3">popup.html â€”â€” å¼¹çª—é¡µé¢</h4>
<p>è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ä½ ç‚¹æµè§ˆå™¨å³ä¸Šè§’æ’ä»¶å›¾æ ‡å¼¹å‡ºæ¥çš„å°çª—å£ã€‚å†™æ³•è·Ÿæ™®é€šç½‘é¡µä¸€æ ·ï¼Œå¯ä»¥æ”¾æŒ‰é’®ã€è¾“å…¥æ¡†ã€ç»“æœå±•ç¤ºåŒºã€‚</p>
<p>å¦‚ä¸‹çº¢è‰²æ¡†ä½çš„å°±æ˜¯popupé¡µé¢ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/903ab19c88c74d078203bb1649f097ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764050800&amp;x-signature=wZskmJ%2BDzZvcUWNqhmQBCKUIkA0%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªpopupé¡µé¢ï¼Œæµè§ˆå™¨ä¼šåˆ†é…ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹æ¥è¿›è¡Œæ¸²æŸ“ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9021eb9b881c4d8cbc75bf3718accc39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764050800&amp;x-signature=SIKyf34nfHwlYK9HkadTyqOBnXM%3D" alt="" width="70%" loading="lazy"/>
<h4 data-id="heading-4">background.js â€”â€” åå°è„šæœ¬</h4>
<p>åå°è„šæœ¬æ˜¯æ’ä»¶çš„å¤§è„‘ï¼Œè´Ÿè´£å¤„ç†å„ç§â€œåå°ä»»åŠ¡â€ã€‚æ¯”å¦‚ç›‘å¬æ¶ˆæ¯ã€å’ŒæœåŠ¡å™¨é€šä¿¡ã€ç®¡ç†æ•°æ®ã€‚å®ƒä¸ç›´æ¥æ“ä½œé¡µé¢å†…å®¹ï¼Œä½†èƒ½å¸®ä½ åšå¾ˆå¤šâ€œè„æ´»ç´¯æ´»â€ï¼Œæ¯”å¦‚è·¨åŸŸè¯·æ±‚ã€å®šæ—¶ä»»åŠ¡ã€æƒé™æ§åˆ¶ã€‚å¼¹çª—é¡µé¢ã€å†…å®¹è„šæœ¬éƒ½å¯ä»¥å’Œå®ƒå‘æ¶ˆæ¯ï¼Œè®©å®ƒå¸®å¿™å¹²æ´»ã€‚</p>
<p>è¿™ä¸ªåå°è„šæœ¬ï¼Œæµè§ˆå™¨ä¼šå¼€ä¸€ä¸ªservice workeræœåŠ¡è¿›ç¨‹æ¥è¿è¡Œï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8eb0c1e3ccac481b894a0accd1bfb9c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764050800&amp;x-signature=%2FcZUsyxtR2zQFGF1x2%2BpvSV%2Fnok%3D" alt="" width="70%" loading="lazy"/>
<p><strong>ä¸¾ä¾‹</strong>ï¼š <code>popupé¡µé¢å’Œæ’ä»¶åå°çš„é€šä¿¡</code></p>
<p>æ¯”å¦‚ä½ åšäº†ä¸€ä¸ªâ€œå¤©æ°”æŸ¥è¯¢â€æ’ä»¶ï¼Œç”¨æˆ·åœ¨å¼¹çª—é¡µé¢è¾“å…¥åŸå¸‚åï¼Œç‚¹å‡»â€œæŸ¥è¯¢â€æŒ‰é’®ï¼Œå¼¹çª—é¡µé¢å°±ä¼šé€šè¿‡ chrome.runtime.sendMessage æŠŠåŸå¸‚åå‘ç»™åå°è„šæœ¬ï¼Œåå°è„šæœ¬æ”¶åˆ°åå»è¯·æ±‚å¤©æ°”æ¥å£ï¼Œç„¶åæŠŠç»“æœè¿”å›ç»™å¼¹çª—é¡µé¢æ˜¾ç¤ºã€‚</p>
<p><code>å›¾è§£</code>ï¼š</p>
<ul>
<li>
<p>ç”¨æˆ·æ“ä½œ popup é¡µé¢</p>
</li>
<li>
<p>popup é¡µé¢ç”¨ chrome.runtime.sendMessage å‘æ¶ˆæ¯ç»™åå°è„šæœ¬</p>
</li>
<li>
<p>åå°è„šæœ¬å¤„ç†è¯·æ±‚ï¼Œè¿”å›ç»“æœç»™ popup é¡µé¢</p>
</li>
</ul>
<p>è™½ç„¶éƒ½popupé¡µé¢å’Œservice workerå±äºåŒä¸€ä¸ªæ‰©å±•ï¼Œä½†å®ƒä»¬è¿è¡Œåœ¨ä¸åŒè¿›ç¨‹/æ²™ç®±ä¸­ï¼Œæ— æ³•ç›´æ¥å…±äº«å†…å­˜æˆ–è°ƒç”¨å‡½æ•°ï¼Œå¿…é¡»é€šè¿‡æµè§ˆå™¨ä¸»è¿›ç¨‹çš„æ¶ˆæ¯è·¯ç”±ï¼ˆIPCï¼‰ä¸­è½¬ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/444bdaa4c84048a6b4e93ca0c366757e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764050800&amp;x-signature=xjVKvxWHgGHWCDZrWbNF50qEWGE%3D" alt="" loading="lazy"/></p>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<p><code>popup.htm</code>l</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"city"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"åŸå¸‚å"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"btn"</span>&gt;</span>æŸ¥å¤©æ°”<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"result"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>)
      btn.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> city = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'city'</span>).<span class="hljs-property">value</span>;
        <span class="hljs-comment">// popupå‘background.jså‘é€æŸ¥è¯¢æ¶ˆæ¯</span>
        chrome.<span class="hljs-property">runtime</span>.<span class="hljs-title function_">sendMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'getWeather'</span>, city }, <span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) {
            <span class="hljs-comment">// background.jsè¿”å›çš„æ¶ˆæ¯</span>
          <span class="hljs-keyword">const</span> data =  response.<span class="hljs-property">weather</span> 
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'result'</span>).<span class="hljs-property">textContent</span> = data || <span class="hljs-string">'æŸ¥è¯¢å¤±è´¥'</span>;
        });
      };
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><code>background.js</code></p>
<pre><code class="hljs language-js" lang="js">chrome.<span class="hljs-property">runtime</span>.<span class="hljs-property">onMessage</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-function">(<span class="hljs-params">msg, sender, sendResponse</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">type</span> === <span class="hljs-string">'getWeather'</span>) {
    <span class="hljs-comment">// è¿™é‡Œåªåšæ¼”ç¤ºï¼Œå®é™…å¼€å‘å¯ä»¥ç”¨ fetch å»è¯·æ±‚çœŸå®æ¥å£</span>
    <span class="hljs-keyword">const</span> fakeWeather = <span class="hljs-string">`<span class="hljs-subst">${msg.city}</span>ï¼šæ™´ï¼Œ25Â°C`</span>;
    <span class="hljs-title function_">sendResponse</span>({ <span class="hljs-attr">weather</span>: fakeWeather });
    <span class="hljs-comment">// å¦‚æœæ˜¯å¼‚æ­¥æ“ä½œï¼ˆæ¯”å¦‚ fetchï¼‰ï¼Œéœ€è¦ return true</span>
  }
});
</code></pre>
<p>è¿™æ ·ï¼Œå¼¹çª—é¡µé¢å’Œåå°è„šæœ¬å°±èƒ½é€šè¿‡æ¶ˆæ¯æœºåˆ¶å®ç°é€šä¿¡ï¼Œå¼¹çª—é¡µé¢åªè´Ÿè´£æ”¶é›†ç”¨æˆ·è¾“å…¥å’Œå±•ç¤ºç»“æœï¼Œåå°è„šæœ¬è´Ÿè´£å¤„ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œåˆ†å·¥æ˜ç¡®ï¼Œå¼€å‘èµ·æ¥ä¹Ÿå¾ˆæ¸…æ™°ï¼</p>
<p>æˆ‘ä»¬æ‰“å¼€chromeçš„ä»»åŠ¡ç®¡ç†å™¨çœ‹åˆšåˆšä¸Šé¢æåˆ°çš„popupæ’ä»¶ï¼Œæ¥çœ‹çœ‹service workerå’Œpopupæ˜¯å¦åœ¨ä¸åŒçš„è¿›ç¨‹ä¸­è¿è¡Œ</p>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ead66cfebf6472fa38e9edc9c41b92e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764050800&amp;x-signature=0LZWsp41x2ar4YidqphQ%2F%2FryV7c%3D" alt="image.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16e2c6d77b0f48ddbd2d44dccd26b671~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764050800&amp;x-signature=XaV1aOSHMATkPDlTHfzH%2BKHLxLM%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹å‡ºservice workerå’Œpopupç¡®å®æ˜¯åˆ†åˆ«åœ¨ä¸¤ä¸ªè¿›ç¨‹ä¸­è¿è¡Œ</p>
<h4 data-id="heading-5">content.js â€”â€” å†…å®¹è„šæœ¬</h4>
<p>å†…å®¹è„šæœ¬æ˜¯æ’ä»¶æ´¾åˆ°ç½‘é¡µé‡Œçš„â€œå§åº•â€ï¼Œæ‰€ä»¥è¿™ä¸ªcontent.jsæ˜¯åœ¨é¡µé¢çš„æ¸²æŸ“è¿›ç¨‹ä¸­è¿è¡Œçš„ï¼Œä¸æ˜¯åœ¨æ’ä»¶ä¸­è¿è¡Œçš„</p>
<p>æˆ‘ä»¬ç”»ä¸ªå›¾æ¥è§£é‡Šä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/795107b9fbfb4fed82e87c49023499c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764050800&amp;x-signature=YKwiP%2F7r5E3I103NI%2Br67%2BCFMvk%3D" alt="" loading="lazy"/></p>
<p>å½“æˆ‘ä»¬ç”¨æµè§ˆå™¨æ‰“å¼€æ˜é‡‘ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨ä¼šå¯åŠ¨ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹æ¥è´Ÿè´£é¡µé¢çš„å±•ç¤ºã€‚æ˜é‡‘ç½‘ç«™è‡ªå·±çš„ JS å˜é‡å’Œè¿è¡Œç¯å¢ƒéƒ½åœ¨ Main Worldï¼ˆé¡µé¢è„šæœ¬ç¯å¢ƒï¼‰é‡Œï¼Œæ¯”å¦‚ä½ ç”¨ React/Vue å†™çš„ä»£ç ã€window ä¸ŠæŒ‚çš„å˜é‡ï¼Œéƒ½æ˜¯å±äºè¿™ä¸ªä¸–ç•Œã€‚</p>
<p>å¦‚æœä½ è¿™æ—¶å€™è£…äº†ä¸€ä¸ªæŠ¤çœ¼æ’ä»¶ï¼Œæƒ³è®©é¡µé¢å˜æˆæŠ¤çœ¼æ¨¡å¼ï¼ˆæ¯”å¦‚æŠŠèƒŒæ™¯è‰²è°ƒæˆç»¿è‰²ï¼‰ï¼Œæ’ä»¶ä¼šé€šè¿‡å†…å®¹è„šæœ¬æ¥æ“ä½œé¡µé¢çš„ DOMï¼Œæ¯”å¦‚ç›´æ¥ä¿®æ”¹ body çš„æ ·å¼ã€‚è¿™æ®µå†…å®¹è„šæœ¬å…¶å®æ˜¯åœ¨å¦ä¸€ä¸ªç‹¬ç«‹çš„ JS ç¯å¢ƒé‡Œè¿è¡Œï¼Œä¹Ÿå°±æ˜¯å›¾é‡Œçš„ Isolated Worldï¼ˆå†…å®¹è„šæœ¬ç¯å¢ƒï¼‰ã€‚</p>
<p>è™½ç„¶å†…å®¹è„šæœ¬å’Œé¡µé¢è„šæœ¬çš„æ‰§è¡Œç¯å¢ƒæ˜¯éš”ç¦»å¼€çš„ï¼Œäº’ç›¸è®¿é—®ä¸åˆ°å¯¹æ–¹çš„å˜é‡ï¼Œä½†å®ƒä»¬å¯ä»¥ä¸€èµ·æ“ä½œå’Œå…±äº«é¡µé¢ä¸Šçš„ DOMï¼ˆæ¯”å¦‚ document.bodyï¼‰ï¼Œæ‰€ä»¥å†…å®¹è„šæœ¬èƒ½å¸®ä½ æ”¹é¡µé¢æ ·å¼ã€åŠ æŒ‰é’®ã€å¼¹æç¤ºï¼Œä½†æ²¡æ³•ç›´æ¥æ‹¿åˆ°é¡µé¢é‡Œçš„ JS å˜é‡ã€‚å¦‚æœå†…å®¹è„šæœ¬çœŸè¦å’Œé¡µé¢è„šæœ¬é€šä¿¡ï¼Œå¯ä»¥ç”¨ window.postMessage è¿™ç§æ–¹å¼æ¥â€œæ­æ¡¥â€ã€‚</p>
<p>è¿™æ ·è®¾è®¡æ—¢ä¿è¯äº†å®‰å…¨ï¼Œåˆèƒ½è®©æ’ä»¶çµæ´»åœ°æ‰©å±•é¡µé¢åŠŸèƒ½ã€‚</p>
<h5 data-id="heading-6">å†…å®¹è„šæœ¬æ˜¯æ€ä¹ˆè¿›åˆ°é¡µé¢é‡Œçš„å‘¢ï¼Ÿ</h5>
<p>å†…å®¹è„šæœ¬æ˜¯æ’ä»¶æ´¾åˆ°ç½‘é¡µé‡Œçš„â€œå§åº•â€ï¼Œå…¶å®å®ƒçš„â€œå§åº•â€è¿‡ç¨‹ä¹Ÿæ˜¯æœ‰è®²ç©¶çš„ï¼š</p>
<p>æœ‰ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯å£°æ˜å¼çš„ï¼Œå¦ä¸€ç§æ˜¯ç¼–ç¨‹å¼çš„</p>
<h6 data-id="heading-7">å£°æ˜å¼ï¼š</h6>
<p>æµè§ˆå™¨æ ¹æ®æ’ä»¶çš„ manifest.json é…ç½®ï¼Œè‡ªåŠ¨å¸®ä½ æ³¨å…¥åˆ°æŒ‡å®šç½‘é¡µçš„æ¸²æŸ“è¿›ç¨‹é‡Œã€‚ æ¯”å¦‚ä½ åœ¨ manifest.json é‡Œå†™äº†ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"content_scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"matches"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"https://juejin.cn/*"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"js"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"content.js"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p>åªè¦ä½ æ‰“å¼€æ˜é‡‘ç½‘ç«™ï¼Œæµè§ˆå™¨å°±ä¼šè‡ªåŠ¨æŠŠ content.js æ³¨å…¥åˆ°é¡µé¢çš„æ¸²æŸ“è¿›ç¨‹é‡Œï¼Œè®©å®ƒåœ¨ Isolated Worldï¼ˆéš”ç¦»ç¯å¢ƒï¼‰é‡Œè¿è¡Œã€‚</p>
<h6 data-id="heading-8">ç¼–ç¨‹å¼ï¼ˆæŒ‰éœ€æ³¨å…¥ï¼‰</h6>
<p>è¿™é‡Œæœ‰ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼š æµè§ˆå™¨é‡Œä¸åŒè¿›ç¨‹ä¹‹é—´ï¼ˆæ¯”å¦‚ä¸»è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹ã€æ’ä»¶è¿›ç¨‹ï¼‰è¦äº’ç›¸ä¼ é€’æ¶ˆæ¯ï¼Œé çš„å°±æ˜¯ IPCï¼ˆInter-Process Communicationï¼‰æœºåˆ¶ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œè¿›ç¨‹é—´é€šä¿¡â€ã€‚</p>
<ul>
<li>
<p>æ¯”å¦‚ä½ åœ¨åå°è„šæœ¬ï¼ˆbackground.jsï¼‰æˆ–å¼¹çª—é¡µé¢ï¼ˆpopupï¼‰é‡Œè°ƒç”¨ chrome.scripting.executeScript ï¼Œå°±èƒ½æŒ‰éœ€æŠŠå†…å®¹è„šæœ¬æ³¨å…¥åˆ°æŒ‡å®šç½‘ç«™é¡µé¢é‡Œã€‚</p>
</li>
<li>
<p>è¿™ä¸ªè¿‡ç¨‹å…¶å®æ˜¯ï¼šæ’ä»¶å‘èµ·æ³¨å…¥è¯·æ±‚åï¼Œæµè§ˆå™¨ä¸»è¿›ç¨‹ä¼šå…ˆå—ç†è¿™ä¸ªè¯·æ±‚ï¼Œç„¶åé€šè¿‡ IPCæœºåˆ¶ï¼ŒæŠŠè¦æ³¨å…¥çš„å†…å®¹è„šæœ¬å®‰å…¨åœ°ä¼ é€’ç»™ç›®æ ‡é¡µé¢çš„æ¸²æŸ“è¿›ç¨‹ã€‚</p>
</li>
<li>
<p>æ¸²æŸ“è¿›ç¨‹æ”¶åˆ°è„šæœ¬åï¼Œå°±ä¼šåœ¨é¡µé¢çš„éš”ç¦»ç¯å¢ƒï¼ˆIsolated Worldï¼‰é‡Œæ‰§è¡Œå†…å®¹è„šæœ¬ï¼Œè¿™æ ·å†…å®¹è„šæœ¬å°±çœŸæ­£â€œè½åœ°â€åˆ°é¡µé¢ä¸­äº†ã€‚</p>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ•´ä¸ªæµç¨‹å°±æ˜¯ï¼š æ’ä»¶è°ƒç”¨ chrome.scripting.executeScript â†’ æµè§ˆå™¨ä¸»è¿›ç¨‹å—ç†å¹¶é€šè¿‡ IPC è½¬å‘ â†’ é¡µé¢æ¸²æŸ“è¿›ç¨‹æ‰§è¡Œå†…å®¹è„šæœ¬ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59eb3f573d1745afbcfe59271299a3d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764050800&amp;x-signature=cFoNmcJY%2FREtXrZTlfcFNx7qdns%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">injected.js â€”â€” æ³¨å…¥é¡µé¢è„šæœ¬</h4>
<p>å‰é¢è¯´è¿‡ï¼Œé¡µé¢çš„ JS ç¯å¢ƒå’Œå†…å®¹è„šæœ¬çš„ JS ç¯å¢ƒæ˜¯äº’ç›¸éš”ç¦»çš„ï¼Œå½¼æ­¤è®¿é—®ä¸åˆ°å¯¹æ–¹çš„å˜é‡å’Œæ–¹æ³•ï¼Œä½†å®ƒä»¬å…±äº«åŒä¸€ä¸ª DOM æ ‘ã€‚ å¦‚æœä½ æƒ³ç›´æ¥æ”¹é¡µé¢é‡Œçš„ JS ç¯å¢ƒï¼Œæ¯”å¦‚é‡å†™ fetch æˆ– XMLHttpRequestï¼Œå®ç°åƒ mock æ¥å£è¿™æ ·çš„åŠŸèƒ½ï¼Œå°±ä¸èƒ½åªé å†…å®¹è„šæœ¬äº†ã€‚</p>
<p>è¿™æ—¶å€™å°±éœ€è¦ç”¨â€œæ³¨å…¥è„šæœ¬â€çš„æ–¹å¼ï¼š æˆ‘ä»¬å¯ä»¥åœ¨å†…å®¹è„šæœ¬é‡Œåˆ›å»ºä¸€ä¸ª script æ ‡ç­¾ï¼ŒæŠŠè¦æ”¹å†™çš„ä»£ç ï¼ˆæ¯”å¦‚æ–°çš„ fetch å®ç°ï¼‰å†™è¿›å»ï¼Œç„¶åæŠŠè¿™ä¸ªæ ‡ç­¾æ’å…¥åˆ°é¡µé¢çš„ DOM é‡Œã€‚è¿™æ ·ï¼Œé¡µé¢ä¼šåƒåŠ è½½æ™®é€š JS æ–‡ä»¶ä¸€æ ·æ‰§è¡Œè¿™æ®µä»£ç ï¼Œæœ€ç»ˆå°±èƒ½è¦†ç›–é¡µé¢åŸç”Ÿçš„ fetch å’Œ xhr æ–¹æ³•ã€‚</p>
<p>è¿™ç§åšæ³•çš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>
<p>èƒ½ç›´æ¥å½±å“é¡µé¢è‡ªå·±çš„ JS ç¯å¢ƒï¼Œå®ç°æ›´å¼ºçš„åŠŸèƒ½æ‰©å±•</p>
</li>
<li>
<p>åªè¦ DOM æ˜¯å…±äº«çš„ï¼Œæ’å…¥ script æ ‡ç­¾å°±èƒ½è®©é¡µé¢æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç </p>
</li>
<li>
<p>å¾ˆé€‚åˆåš mockã€æ—¥å¿—åŠ«æŒã€æ€§èƒ½ç›‘æ§ç­‰æ’ä»¶åŠŸèƒ½</p>
</li>
</ul>
<p>æ¯”å¦‚æˆ‘æœ€è¿‘å†™çš„ä¸€ä¸ªåŸºç¡€çš„ mock æ’ä»¶(<a href="https://juejin.cn/post/7570984257666056238" target="_blank" title="https://juejin.cn/post/7570984257666056238">juejin.cn/post/757098â€¦</a>), å°±æ˜¯ç”¨è¿™ç§æ–¹å¼ï¼Œåœ¨é¡µé¢åŠ è½½å‰å·å·æŠŠ fetch å’Œ XMLHttpRequest æ›¿æ¢æˆæˆ‘é‡å†™çš„ï¼Œè®©æ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½èƒ½è¢«æ’ä»¶æ‹¦æˆªå’Œå¤„ç†ã€‚</p>
<h5 data-id="heading-10">è·¨ç¯å¢ƒé€šä¿¡æµç¨‹ä¸¾ä¾‹</h5>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬çš„æ³¨å…¥é¡µé¢è„šæœ¬ï¼ˆinjected.jsï¼‰éœ€è¦ç”¨åˆ°æ’ä»¶è¿›ç¨‹é‡Œçš„æ•°æ®ï¼Œæ¯”å¦‚åˆ¤æ–­æŸä¸ª fetch è¯·æ±‚æ˜¯å¦å‘½ä¸­æ’ä»¶é…ç½®çš„è§„åˆ™ã€‚ä½†é¡µé¢ç¯å¢ƒæ˜¯æ‹¿ä¸åˆ°æ’ä»¶è¿›ç¨‹é‡Œçš„é…ç½®çš„ï¼Œä¸è¿‡å†…å®¹è„šæœ¬å¯ä»¥å¸®å¿™â€œä¸­è½¬â€ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬åœ¨ injected.js é‡Œé‡å†™äº† fetch æ–¹æ³•ï¼Œé¡µé¢å‘èµ·è¯·æ±‚åï¼Œéœ€è¦æŸ¥ä¸€ä¸‹æ’ä»¶é‡Œæœ‰æ²¡æœ‰å¯¹åº”çš„ mock è§„åˆ™ã€‚æ•´ä¸ªæ•°æ®æµå¯ä»¥è¿™æ ·èµ°ï¼š</p>
<ul>
<li>
<ol>
<li>æ³¨å…¥è„šæœ¬ï¼ˆinjected.jsï¼‰æ‹¦æˆªåˆ° fetch è¯·æ±‚ï¼Œå‘ç°éœ€è¦æ’ä»¶é‡Œçš„è§„åˆ™é…ç½®ã€‚</li>
</ol>
</li>
<li>
<ol start="2">
<li>æ³¨å…¥è„šæœ¬ç”¨ window.postMessage å‘å†…å®¹è„šæœ¬å‘æ¶ˆæ¯ï¼Œè¯·æ±‚è§„åˆ™æ•°æ®ã€‚</li>
</ol>
</li>
<li>
<ol start="3">
<li>å†…å®¹è„šæœ¬æ”¶åˆ°æ¶ˆæ¯åï¼Œå†ç”¨ chrome.runtime.sendMessage å‘æ’ä»¶è¿›ç¨‹ï¼ˆæ¯”å¦‚åå°è„šæœ¬ï¼‰å‘èµ·è¯·æ±‚ï¼Œè·å–æœ€æ–°è§„åˆ™ã€‚</li>
</ol>
</li>
<li>
<ol start="4">
<li>æ’ä»¶è¿›ç¨‹é€šè¿‡ IPC æœºåˆ¶æŠŠè§„åˆ™æ•°æ®è¿”å›ç»™å†…å®¹è„šæœ¬ã€‚</li>
</ol>
</li>
<li>
<ol start="5">
<li>å†…å®¹è„šæœ¬æ‹¿åˆ°æ•°æ®åï¼Œå†ç”¨ window.postMessage æŠŠç»“æœä¼ å› injected.jsã€‚</li>
</ol>
</li>
<li>
<ol start="6">
<li>æ³¨å…¥è„šæœ¬æ‹¿åˆ°è§„åˆ™ï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦å‘½ä¸­ï¼Œç„¶ååšåç»­å¤„ç†ï¼ˆæ¯”å¦‚ mockã€æ‹¦æˆªã€æ—¥å¿—ç­‰ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<p>è¿™æ ·ä¸€æ¥ï¼Œé¡µé¢è„šæœ¬ã€å†…å®¹è„šæœ¬ã€æ’ä»¶è¿›ç¨‹å°±èƒ½é€šè¿‡æ¶ˆæ¯é“¾è·¯æŠŠæ•°æ®å®‰å…¨åœ°ä¸²è”èµ·æ¥ï¼Œå®ç°å¤æ‚çš„åŠŸèƒ½æ‰©å±•ã€‚ æ•´ä¸ªè¿‡ç¨‹å°±åƒâ€œæ¥åŠ›ä¼ è¯â€ï¼Œæ¯ä¸ªç¯èŠ‚å„å¸å…¶èŒï¼Œæ—¢ä¿è¯äº†å®‰å…¨ï¼Œåˆè®©æ’ä»¶å’Œé¡µé¢èƒ½çµæ´»åä½œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/398541a9c4df48e2b4d612ffefa12615~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764050800&amp;x-signature=qB3A%2BkU3KI%2Byl6kUWkxvrXKxfXQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">æ€»ç»“ï¼šæ’ä»¶å¤šè„šæœ¬é€šä¿¡ï¼Œæ²¡é‚£ä¹ˆéš¾ï¼</h3>
<p>çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å·²ç»å¯¹Chromeæ’ä»¶ä¸­çš„å¤šè„šæœ¬é€šä¿¡æœ‰äº†æ¸…æ™°çš„è®¤è¯†ã€‚è®©æˆ‘ä»¬ç®€å•å›é¡¾ä¸€ä¸‹ä»Šå¤©å­¦åˆ°çš„å…³é”®çŸ¥è¯†ï¼š</p>
<ol>
<li>ä¸ºä»€ä¹ˆéœ€è¦å¤šè„šæœ¬ï¼Ÿ</li>
</ol>
<ul>
<li>Chromeçš„å¤šè¿›ç¨‹æ¶æ„æ˜¯ä¸ºäº†å®‰å…¨å’Œç¨³å®šæ€§ï¼Œä¸æ˜¯ä¸ºäº†æ•…æ„ä¸ºéš¾å¼€å‘è€…</li>
</ul>
<ol start="2">
<li>å„è„šæœ¬çš„è§’è‰²ï¼š</li>
</ol>
<ul>
<li>background.js ï¼šå¸¸é©»åå°ï¼Œè´Ÿè´£å¤§éƒ¨åˆ†é€»è¾‘å’Œæƒé™ï¼Œæ˜¯æ’ä»¶çš„å¤§è„‘ã€‚</li>
<li>content.js ï¼šåµŒå…¥é¡µé¢ï¼Œèƒ½æ“ä½œDOMï¼Œä½†å’Œé¡µé¢JSæ˜¯éš”ç¦»çš„ï¼Œåƒæ˜¯æ´¾é©»åˆ°é¡µé¢çš„ç‰¹å·¥ã€‚</li>
<li>popup.html ï¼šå¼¹çª—é¡µé¢ï¼Œä¸»è¦è´Ÿè´£UIäº¤äº’ï¼Œå…³é—­å°±â€œå¤±å¿†â€ï¼Œä½†ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ã€‚</li>
<li>injected.js ï¼šç›´æ¥æ³¨å…¥é¡µé¢ï¼Œèƒ½è®¿é—®å’Œä¿®æ”¹é¡µé¢ç¯å¢ƒï¼Œç±»ä¼¼å§åº•ã€‚</li>
</ul>
<ol start="3">
<li>é€šä¿¡ç§˜è¯€ï¼š</li>
</ol>
<ul>
<li>background â†” popup ï¼šç”¨ chrome.runtime.sendMessage</li>
<li>background â†” content ï¼šç”¨ chrome.tabs.sendMessage æˆ– chrome.runtime.sendMessage</li>
<li>content â†” é¡µé¢JS ï¼šç”¨ window.postMessage</li>
</ul>
<p>è¿˜è®°å¾—å¼€å¤´é‚£ä½è‹¦æ¼çš„åŒäº‹å—ï¼Ÿç°åœ¨ä½ ä¸ä»…çŸ¥é“ä¸ºä»€ä¹ˆä»–çš„å˜é‡â€œæ­»æ´»æ‹¿ä¸åˆ°â€ï¼Œæ›´é‡è¦çš„æ˜¯ï¼ŒæŒæ¡äº†æ­£ç¡®çš„è§£å†³æ–¹æ³•ï¼</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å°‘è¸©å‘ã€å¤šæ”¶è·ã€‚å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ï¼Œä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­åˆ†äº«çš„åŠ¨åŠ›ï¼</p>
<p>æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºã€‚ä¸‹æœŸè§ï¼ğŸ‘‹</p>
<blockquote>
<p>å¦‚æœè§‰å¾—å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµ ğŸ‘ æ”¶è— â­ å…³æ³¨ ğŸ”” æ”¯æŒä¸€ä¸‹ï¼</p>
<p><strong>å¾€æœŸå®æˆ˜æ¨èï¼š</strong></p>
<ul>
<li>
<p><a href="https://juejin.cn/post/7549096640340426802" target="_blank" title="https://juejin.cn/post/7549096640340426802">Vue3 åå°åˆ†é¡µå†™è…»äº†ï¼Ÿæˆ‘ç”¨ 1 ä¸ª Hook åˆ æ‰ 90% é‡å¤ä»£ç ï¼ˆé™„æºç ï¼‰</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7511332054941188147" target="_blank" title="https://juejin.cn/post/7511332054941188147">âš¡ ä¸€ä¸ªVueè‡ªå®šä¹‰æŒ‡ä»¤æå®šä¸æ»‘æ‹–æ‹½åˆ—è¡¨ï¼Œå‘Šåˆ«å¤æ‚ç»„ä»¶å°è£…
</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7543806966926802971" target="_blank" title="https://juejin.cn/post/7543806966926802971">ğŸ”¥ è¿™æ‰æ˜¯ Vue é©±åŠ¨çš„ Chrome æ’ä»¶å·¥ç¨‹åŒ–æ­£ç¡®æ‰“å¼€æ–¹å¼</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7566299971643424819" target="_blank" title="https://juejin.cn/post/7566299971643424819">  è€æ¿é—®æˆ‘ï¼šAIçœŸèƒ½ä¸€é”®ç”»å¹¿å·æ—…æ¸¸è·¯çº¿å›¾ï¼Ÿæˆ‘ç”¨ MCP ç°åœºå¼€å›¾</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7559124639323242506" target="_blank" title="https://juejin.cn/post/7559124639323242506">ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘ï¼šå‘Šåˆ«å³é”®å¦å­˜ï¼Œä¸åˆ° 50 è¡Œä»£ç ä¸€é”®æ‰¹é‡ä¸‹è½½ç½‘é¡µå›¾ç‰‡</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7561612065707065390" target="_blank" title="https://juejin.cn/post/7561612065707065390"> å¥³æœ‹å‹ç‚¸äº†ï¼šåˆšæ‰“å¼€çš„ç½‘é¡µæ€ä¹ˆåˆæ²¡äº†ï¼Ÿæˆ‘åæ‰‹ç”©å‡ºä¸€é”®æ¢å¤æŒ‰é’®ï¼</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7562859113246343178" target="_blank" title="https://juejin.cn/post/7562859113246343178"> ä½ å®¶å­©å­åˆå·ç©ç½‘é¡µæ¸¸æˆ? è¯•è¯•è¿™ä¸ªé˜²æ²‰è¿·å·¥å…·</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7563830723057647643" target="_blank" title="https://juejin.cn/post/7563830723057647643">  å¥¹è¯´æƒ³è¦æµªæ¼«ï¼Œæˆ‘æŠŠæµè§ˆå™¨é¼ æ ‡æ¢æˆäº†æŸ´çŠ¬ï¼Œç‚¹ä¸€ä¸‹å°±æœ‰çƒŸèŠ±ï¼ˆé™„æºç ï¼‰</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7566677296801071155" target="_blank" title="https://juejin.cn/post/7566677296801071155"> å¥³æœ‹å‹è¢«é“¾æ¥æŠ˜ç£¨ç–¯äº†ï¼Œæˆ‘å†™äº†ä¸ªå·¥å…·ä¸€é”®è§£æ•‘</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7568055953310662707" target="_blank" title="https://juejin.cn/post/7568055953310662707"> ä¸Šç­æ‘¸é±¼çœ‹æ˜é‡‘ï¼Œè€æ¿çªç„¶å‡ºç°åœ¨èº«å...</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7570984257666056238" target="_blank" title="https://juejin.cn/post/7570984257666056238"> ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘å†ä¹Ÿä¸ç”¨ APIfox è”è°ƒï¼é›¶ä¾µå…¥ Mockï¼Œå…¨ç¨‹ä¸æ”¹ä»£ç ã€ä¸å¼€ä»£ç†</a></p>
</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kafka æ¶ˆæ¯ç§¯å‹äº†ï¼ŒåŒäº‹è·‘è·¯äº†]]></title>    <link>https://juejin.cn/post/7573687816431190026</link>    <guid>https://juejin.cn/post/7573687816431190026</guid>    <pubDate>2025-11-18T07:54:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573687816431190026" data-draft-id="7573687816431140874" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kafka æ¶ˆæ¯ç§¯å‹äº†ï¼ŒåŒäº‹è·‘è·¯äº†"/> <meta itemprop="keywords" content="Spring Cloud,Kafka,åç«¯"/> <meta itemprop="datePublished" content="2025-11-18T07:54:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¸ä»“"/> <meta itemprop="url" content="https://juejin.cn/user/1812410601572599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kafka æ¶ˆæ¯ç§¯å‹äº†ï¼ŒåŒäº‹è·‘è·¯äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1812410601572599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¸ä»“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-18T07:54:44.000Z" title="Tue Nov 18 2025 07:54:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¿«åˆ°å¹´åº•äº†ï¼Œç³»ç»Ÿé¢‘ç¹å‡ºé—®é¢˜ã€‚æˆ‘æœ‰æ­£å½“ç†ç”±æ€€ç–‘è€æ¿ä¸æƒ³å‘å¹´ç»ˆå¥–æ‰€ä»¥æäº‹ã€‚</p>
<p>è¿™ä¸ï¼Œå‡ å¹´éƒ½é‡ä¸åˆ°çš„æ¶ˆæ¯é˜Ÿåˆ—ç§¯å‹ç°è±¡ä»Šæ™šåˆå·åœŸé‡æ¥äº†ã€‚</p>
<p>ä»Šæ™šæ³¨å®šæ˜¯ä¸ªä¸çœ å¤œäº†ï¼ŒåŸç¥å¯åŠ¨ã€‚ã€‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d262a2234a3345a5bd06d6e88cb83886~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=EgR7MTMwdg1urXnKTvopJ4l0pdY%3D" alt="image.png" loading="lazy"/></p>
<p>ç»„é‡Œçš„å°ä¼™ä¼´ç«æ€¥ç«ç‡æ‰¾åˆ°æˆ‘è¯´ï¼ŒKafka çš„æ¶ˆæ¯ç§¯å‹ä¸€ç›´åœ¨æ¶¨ï¼Œé¢„è§ˆå›¾ä¸€ç›´å‡ºä¸æ¥ã€‚æˆ‘åŠ äº†å‡ ä¸ªæœåŠ¡å®ä¾‹ï¼Œåˆšå¼€å§‹å¯ä»¥æ¶ˆè´¹ï¼Œåé¢æ¶ˆè´¹ç€ä¹Ÿå¡ä½äº†ã€‚</p>
<p>æœ¬æ¥åˆšåˆšä¸‹ç­çš„æˆ‘å°±æ¯”è¾ƒç–²æƒ«ï¼Œæƒ³è®©ä»–æ’¤å›é•œåƒæ˜å¤©å†ä¸Šã€‚ä¸æˆæƒ³ç»„é•¿ä¸è®²æ­¦å¾·ï¼Œç›´æ¥å¼€äº†ä¸ªé£ä¹¦è§†é¢‘ã€‚</p>
<p>æˆ‘å½“æ—¶æœ¬æ¥ä¸æƒ³ç†ä»–ï¼Œæˆ‘å·²ç»ä¸‹ç­äº†ï¼Œåˆ«äººä¸Šçº¿çš„åŠŸèƒ½å‡ºé—®é¢˜å…³æˆ‘å•¥äº‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de4e28b56392431cb9ced680fc7ca0fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=0E67yTsROPOVD8BnIxMoOI0E6Hg%3D" alt="image.png" loading="lazy"/></p>
<p>åæ¥ä»–è¶æˆ‘ä¸æ³¨æ„æå·è¢­ï¼Œç»™æˆ‘ç§ä¿¡äº†ï¼Œæˆ‘å½“æ—¶æ²¡å¤šæƒ³å°±ç‚¹å¼€äº†é£ä¹¦ã€‚</p>
<p>æœ¬æ¥ä»¥ä¼ ç»ŸåŠŸå¤«çš„ç‚¹åˆ°ä¸ºæ­¢ï¼Œæˆ‘è¿›å…¥é£ä¹¦ä¸ç‚¹å¼€ä»–çš„ä¼šè¯ï¼Œæ˜¯èƒ½çœ‹ä»–ç»™æˆ‘å‘çš„æœ€åä¸€å¥è¯çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d01ffbdf60cd4787b53b80772b77e7a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=HIYSUBEibj6LkQLBebckeAbaiu4%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘æŠŠæ‰‹æ”¾åœ¨ä»–é‚£ä¸ªä¼šè¯ä¸Šå°±æ˜¯æ²¡ç‚¹å¼€ï¼Œå·²è¯»ä¸å›è¿™ç§äº‹åšå¤šäº†ä¸å¥½ã€‚æˆ‘ç¬‘äº†ä¸€ä¸‹ï¼Œå‡†å¤‡æ´—æ´—ç¡äº†ã€‚</p>
<p>æ­£åœ¨æˆ‘æ”¶æ‰‹ä¸ç‚¹çš„æ—¶å€™ï¼Œä»–çªç„¶ç»™æˆ‘æ¥äº†ä¸€ä¸ªç”µè¯ï¼Œæˆ‘å¤§æ„äº†å•Šï¼Œæ²¡æœ‰æŒ‚ï¼Œè¿˜å¼ºè¡Œæ¥äº†ä»–çš„ç”µè¯ã€‚ä¸¤åˆ†å¤šé’Ÿä»¥åå°±å¥½äº†ï¼Œæˆ‘è¯´å°ä¼™å­ä½ ä¸è®²æ­¦å¾·ã€‚</p>
<p>ç›´æ¥å–Šè¯ï¼Œä»Šæ™šå¿…é¡»è§£å†³ï¼Œå¤§å®¶éƒ½ç‚¹å’–å•¡ç®—ä»–çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd429dec7d7b40628ea638adf1398c1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=BlGPf6cgFQnEht1CZSow5sSincg%3D" alt="image.png" loading="lazy"/>
è¿™çœŸæ²¡åŠæ³•ï¼Œéƒ½æ‰¾ä¸Šé—¨æ¥äº†ã€‚åªèƒ½è·Ÿç€æŸ¥ä¸€ä¸‹ï¼Œæ—©ç‚¹è§£å†³æ—©ç‚¹ç¡è§‰ã€‚ç„¶åæˆ‘å°±ä¸Š Kafka é¢æ¿ä¸€çœ‹ï¼šæœ€åˆçš„4ä¸ªåˆ†åŒºå·²ç»ç§¯å‹äº† 1200 æ¡ï¼Œåé¢æ–°åŠ çš„åˆ†åŒºä¹Ÿå¼€å§‹ç§¯å‹äº†ï¼Œè€Œä¸”ç§¯å‹çš„é€Ÿåº¦è¶Šæ¥è¶Šå¿«ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/168bdb4c49b341a09684c6d7474a7aeb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=IQk0XL6JvXa3zCv32Ke%2BxEF0%2BdY%3D" alt="image.png" loading="lazy"/></p>
<p>ææ¸…æ¥šå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å°±å¾—æ€è€ƒä¸€ä¸‹å¯¼è‡´ç§¯å‹çš„åŸå› ã€‚ä¸€èˆ¬æ˜¯æ¶ˆè´¹è€…ä»£ç æ‰§è¡Œå‡ºé”™äº†ï¼Œå¯¼è‡´æŸæ¡æ¶ˆæ¯æ¶ˆè´¹ä¸äº†ã€‚</p>
<p>æ‰€ä»¥æŸä¸ªç‚¹å¡ä½äº†ï¼Œç„¶ååˆæœ‰æ–°çš„æ¶ˆæ¯è¿›æ¥ã€‚</p>
<p>Kafka æ˜¯é€šè¿‡ offset æœºåˆ¶æ¥æ ‡è®°æ¶ˆæ¯æ˜¯å¦æ¶ˆè´¹è¿‡çš„ï¼Œæ‰€ä»¥å¦‚æœåˆ†åŒºä¸­æœ‰æŸä¸€æ¡æ¶ˆæ¯æ¶ˆè´¹å¤±è´¥ï¼Œå°±ä¼šå¯¼è‡´åé¢çš„æ²¡æœºä¼šæ¶ˆè´¹ã€‚</p>
<p>æˆ‘ç”¨çš„æ˜¯spring cloud stream æ¥å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—çš„å‘é€å’Œç›‘å¬ã€‚ä»£ç ä¸Šæ˜¯æ¯æ¬¡å¤„ç†ä¸€æ¡æ¶ˆæ¯ï¼Œè€Œä¸”ä»£ç è¿˜åœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­åŠ äº† try-catchã€‚ç›‘å¬å™¨é“¾è·¯æ‰“å°çš„æ—¥å¿—æ˜¾ç¤ºæ‰§è¡ŒæˆåŠŸäº†ï¼Œtry-catchä¹Ÿæ²¡æœ‰æ•æ‰åˆ°ä»»ä½•çš„å¼‚å¸¸ã€‚</p>
<p>è¿™ä¸€çœ‹ï¼Œæˆ‘å°±ä»¥ä¸ºæ˜¯æ¶ˆè´¹è€…æ€§èƒ½ä¸è¶³ï¼Œçªç„¶æƒ³èµ· SpringCloudStream å¥½åƒæœ‰ä¸ªå¤šçº¿ç¨‹æ¶ˆè´¹çš„æœºåˆ¶ã€‚ç«‹é©¬è®©å¼€å‘è€å“¥è¯•è¯•ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å°±è¿™æ ·è§£å†³äº†ï¼Œæˆ‘å›°å¾—ä¸è¡Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4aa5194bc0dd4d11a11e4f420644b18d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=%2BrMIs%2FHVShaV5EWk1STUCapwJDI%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘åŠçœ¯ç€çœ¼ç›è¢«æé†’åµé†’äº†ã€‚å¼€å‘è€å“¥æŠŠå¤šçº¿ç¨‹æ”¹æˆ10ä¹‹åï¼Œå‘ç°ç§¯å‹æ›´å¿«äº†ï¼Œè€Œä¸”è¿˜æœ‰podä¼šæŒ‚ã€‚è€å“¥æŸ¥äº†ä¸€ä¸‹å¤šçº¿ç¨‹çš„é…ç½® concurrencyã€‚</p>
<p>åŸæ¥æŒ‡çš„æ˜¯æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ä¼šè´Ÿè´£å¤„ç†ä¸€ä¸ªåˆ†åŒºã€‚å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œå¢åŠ ä¹‹åå¯èƒ½ä¼šå¯¼è‡´ä¸¥é‡çš„æµé‡å€¾æ–œï¼Œéš¾æ€ªpodä¼šæŒ‚æ‰ï¼Œèµ¶ç´§æ¢å¤äº†å›å»ã€‚</p>
<p>çœ‹æ¥æƒ³ç³Šå¼„è¿‡å»æ˜¯ä¸è¡Œäº†ï¼Œæˆ‘æŠŠpodè¿è¡Œçš„æ—¥å¿—å…¨éƒ¨æ‹‰ä¸‹æ¥ã€‚æŸ¥äº†ä¸€ä¸‹æ—¥å¿—ï¼Œæ—¥å¿—æ˜¾ç¤ºæ‰§è¡ŒæˆåŠŸäº†ï¼Œä½†åŒæ—¶æœ‰è¶…æ—¶é”™è¯¯ï¼Œè¿™å°±è§äº†é¬¼äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f520d30783e648208fc84f9af2fa7e15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=9Xd6ePItrR7Gza9g4a4v6jmip84%3D" alt="image.png" loading="lazy"/></p>
<p>ä½œä¸ºä¸€ä¸ªåšå®šçš„å”¯ç‰©ä¸»ä¹‰è€…ï¼Œæˆ‘æ˜¯ä¸ä¿¡è§é¬¼çš„ã€‚ä½†æ­¤åˆ»æˆ‘æ±—æ¯›å€’ç«–ï¼Œå“å¾—ä¸æ•¢å†çœ‹å±å¹•ä¸€çœ¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e734b9c41f6d44cc9d91f95346099844~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=uJ6DjPAI2ah7TsTUDgNrZgaYilU%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†æ˜¯å†…å¿ƒåˆè§‰å¾—ä¸ç”˜å¿ƒï¼Œäºæ˜¯æˆ‘å·å·ç„äº†ä¸€çœ¼å±å¹•ã€‚ä¸çœ‹è¿˜å¥½ï¼Œä¸€å–µä½ çŒœæˆ‘å‘ç°äº†å•¥ï¼Ÿ</p>
<p>æ¶ˆè´¹è€…ç»„é‡å¹³è¡¡äº†ï¼Œè¿™å°±åƒæ˜¯åœ¨é»‘æš—ä¸­æœ‰ä¸€æŸå…‰ç…§å‘äº†æˆ‘ï¼ŒçŒªå…«æˆ’å‘ç°å«¦å¨¥åŸæ¥ä¸€ç›´æš—æ‹è‡ªå·±ï¼Œæˆ‘çš„å¥³ç¥å…¶å®ä¸éœ€è¦æ‹‰å±ã€‚</p>
<p>æœ‰äº†é‡å¹³è¡¡å°±å¥½è¯´äº†ï¼Œæ— éå°±æ˜¯ä¸¤ç§æƒ…å†µï¼Œä¸€æ˜¯æœåŠ¡æŒ‚æ‰äº†ï¼ŒäºŒæ˜¯æœåŠ¡æ¶ˆè´¹è€…æ‰§è¡Œè¶…æ—¶äº†ã€‚ç°åœ¨çœ‹æ¥æœåŠ¡æ²¡æœ‰æŒ‚ï¼Œé‚£å°±æ˜¯è¶…æ—¶äº†ï¼Œä¹Ÿæ­£å¥½å’Œä¸Šé¢çš„æ—¥å¿—èƒ½å¯¹ä¸Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04985de725e14d628345e7b71ee76d0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=iK374RfLuibUb%2BoRMw%2BlPETGfq0%3D" alt="image.png" loading="lazy"/></p>
<p>é‚£æ€ä¹ˆåˆçœ‹åˆ°ç›‘å¬å™¨æ‰§è¡Œçš„ç»“æœæ˜¯æ­£å¸¸çš„å‘¢ï¼Ÿ</p>
<p>è¿™å°±å¾—ä» Kafka çš„æ‰¹é‡æ‹‰å–æœºåˆ¶è¯´èµ·äº†ï¼Œè¿™è´§å’Œæˆ‘ä»¬äººç±»ç›´è§‰ä¸Šçš„çš„é˜Ÿåˆ—æœºåˆ¶ä¸å¤ªä¸€æ ·ã€‚æˆ‘ä»¬ä¸€èˆ¬ç†è§£çš„é˜Ÿåˆ—æ˜¯å‘é€ä¸€ä¸ªæ¶ˆæ¯ç»™é˜Ÿåˆ—ï¼Œç„¶åé˜Ÿåˆ—å°±å¼‚æ­¥æŠŠè¿™æ¶ˆæ¯ç»™æ¶ˆè´¹è€…ã€‚ä½†æ˜¯è¿™è´§æ˜¯æ¶ˆè´¹è€…ä¸»åŠ¨å»<strong>æ‹‰å–ä¸€æ‰¹</strong>æ¥æ¶ˆè´¹ã€‚</p>
<p>ç„¶åå¥½æ­»ä¸æ­»ï¼ŒSpringCloudStream ä¸ºäº†å°è£…å¾—å¥½ç”¨ç¬¦åˆäººç±»çš„è®¤çŸ¥ï¼Œå°±åšæˆäº†ä¸€èˆ¬ç†è§£çš„é˜Ÿåˆ—é‚£ç§æ–¹å¼ã€‚</p>
<p>SpringCloudStream ä¸€æ‰¹æ‹‰äº†500æ¡è®°å½•ï¼Œç„¶åæä¾›äº†ä¸€ä¸ªç›‘å¬å™¨æ¥å£è®©æˆ‘ä»¬å®ç°ã€‚å…¥å‚æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯500æ¡æ•°æ®ä¸­çš„ä¸€æ¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/659126ce33d44c4e887c1df1db5655f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=cbDMY0wPWJdT9Y9FacBwEj61cyk%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬å‡è®¾è¿™500æ¡æ•°æ®çš„IDæ˜¯ 001-500ï¼Œæ¯ä¸€æ¡æ•°æ®å¯¹åº”çš„æ¶ˆè´¹è€…éœ€è¦æ‰§è¡Œ10sã€‚é‚£ä¹ˆæ€»å…±å°±éœ€è¦500 x 10s=5000sã€‚</p>
<p>å†å‡è®¾æ¶ˆè´¹è€…æ‰§è¡Œçš„è¶…æ—¶æ—¶é—´æ˜¯ 300sï¼Œè€Œä¸”æ¶ˆè´¹è€…æ‰§è¡Œçš„è¿‡ç¨‹æ˜¯ä¸²è¡Œçš„ã€‚é‚£ä¹ˆ500æ¡ä¸­æœ€å¤šåªèƒ½æ‰§è¡Œ30æ¡ï¼Œè¿™å°±èƒ½è§£é‡Šä¸ºä»€ä¹ˆçœ‹æ¶ˆè´¹é“¾è·¯æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯è¿˜è¶…æ—¶ã€‚</p>
<p>å› ä¸ºå•æ¬¡æ¶ˆè´¹ç¡®å®æˆåŠŸäº†ï¼Œä½†æ˜¯æ‰¹æ¬¡æ¶ˆè´¹ä¹Ÿç¡®å®è¶…æ—¶äº†ã€‚</p>
<p>æˆ‘å’§ä¸ªè±†ï¼Œç ´æ¡ˆäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01f37852aca94c5e82fb78b2cf547c96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=obku9iCkmjK%2BKHFoNtRFYpM%2B8h4%3D" alt="image.png" loading="lazy"/></p>
<p>äºæ˜¯æˆ‘å°±æƒ³åˆ°äº†ä¸¤ç§æ–¹å¼æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼šç¬¬ä¸€æ˜¯æ”¹æˆå•æ¡æ¶ˆæ¯æ¶ˆè´¹å®Œç«‹é©¬ç¡®è®¤ï¼Œç¬¬äºŒæ˜¯æŠŠæ‰¹æ¬¡æ‹‰å–çš„æ•°æ®é‡æ”¹å°ä¸€ç‚¹ã€‚</p>
<p>ç¬¬ä¸€ç§æ–¹æ¡ˆæŒºå¥½çš„ï¼Œå°±æ˜¯æ€§èƒ½è‚¯å®šæ²¡æœ‰æ‰¹é‡é‚£ä¹ˆå¥½ï¼Œä¸ç„¶ä½ ä»¥ä¸º Kafka çš„ååé‡èƒ½è–„çº±ActiveMQè¿™äº›ä¼ ç»Ÿé˜Ÿåˆ—ã€‚ååé‡éƒ½æ˜¯å°äº‹ï¼Œè¿™ä¸ªæ–¹æ¡ˆèƒœåœ¨å¯ä»¥ç«‹é©¬å»ç¡è§‰äº†ã€‚åªéœ€è¦æ”¹ä¸€ä¸ªé…ç½®ï¼š<code>ack-mode: RECORD</code></p>
<p>ç¬¬äºŒç§æ–¹æ¡ˆæ˜¯åæ¥æçš„ï¼Œå…¶å®å•å•æŠŠæ‰¹æ¬¡æ‹‰å–çš„æ•°æ®é‡æ”¹å°æ€§èƒ½æå‡è¿˜ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚ä¸è¿‡æ—¢ç„¶æˆ‘ä»¬éƒ½èƒ½æ‹¿åˆ°ä¸€æ‰¹æ•°æ®äº†ï¼Œé‚£å¤šçº¿ç¨‹å®‰æ’ä¸Šå°±å¾—äº†ã€‚</p>
<p>å…ˆæ”¹é…ç½®ï¼Œä¸€æ¬¡åªæ‹‰å–50æ¡ <code>max.poll.records: 50</code>ã€‚ç„¶åå¯ç”¨çº¿ç¨‹æ± å¤„ç†ï¼Œå®Œç¾ï¼</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@StreamListener("&lt;TOPIC&gt;")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">consume</span><span class="hljs-params">(List&lt;<span class="hljs-type">byte</span>[]&gt; payloads)</span> {
    
    List&lt;CompletableFuture&lt;Void&gt;&gt; futures = payloads.stream().map(bytes -&gt; {
        <span class="hljs-type">Payload</span> <span class="hljs-variable">payload</span> <span class="hljs-operator">=</span> JacksonSnakeCaseUtils.parseJson(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bytes), Payload.class);

        <span class="hljs-keyword">return</span> CompletableFuture.runAsync(() -&gt; {
            <span class="hljs-comment">// ........</span>
        }, batchConsumeExecutor).exceptionally(e -&gt; {
            log.error(<span class="hljs-string">"Thread error {}"</span>, bytes, e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        });
    }).collect(Collectors.toList());

    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ç­‰å¾…è¿™æ‰¹æ¶ˆæ¯ä¸­çš„æ‰€æœ‰ä»»åŠ¡å…¨éƒ¨å®Œæˆ</span>
        CompletableFuture.allOf(futures.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>[<span class="hljs-number">0</span>])).join();
        errorMessage = <span class="hljs-string">"OK"</span>;
    } <span class="hljs-keyword">catch</span> (Exception e) {
        errorMessage = <span class="hljs-string">"Ex: "</span> + e.getMessage();
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22c364e4a4264b7394cdcd4ea05eadb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764057283&amp;x-signature=052zcBN1DKbaLbU2W6KA1WK2yNw%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Langchain Template å…¨é¢æŒ‡å—]]></title>    <link>https://juejin.cn/post/7573535624532639763</link>    <guid>https://juejin.cn/post/7573535624532639763</guid>    <pubDate>2025-11-17T16:51:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573535624532639763" data-draft-id="7573524348130050111" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Langchain Template å…¨é¢æŒ‡å—"/> <meta itemprop="keywords" content="LangChain,OpenAI"/> <meta itemprop="datePublished" content="2025-11-17T16:51:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å°ä¸œ"/> <meta itemprop="url" content="https://juejin.cn/user/932815872994359"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Langchain Template å…¨é¢æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/932815872994359/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å°ä¸œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-17T16:51:42.000Z" title="Mon Nov 17 2025 16:51:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p><code>LangChain Template</code>Â æ˜¯ LangChain æç¤ºå·¥ç¨‹çš„æ ¸å¿ƒç»„ä»¶ï¼Œç”¨äºåŠ¨æ€ç”Ÿæˆæ¨¡å‹çš„è¾“å…¥ã€‚</p>
<p>ğŸ¯Â <strong>Template</strong> çš„æ ¸å¿ƒæ¦‚å¿µï¼š</p>
<p><strong>Template</strong>Â æœ¬è´¨æ˜¯ä¸€ä¸ªå¸¦æœ‰<strong>å ä½ç¬¦</strong>çš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œè¿™äº›å ä½ç¬¦ä¼šåœ¨è¿è¡Œæ—¶è¢«å…·ä½“çš„å€¼å¡«å……ã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯å°†<strong>æç¤ºé€»è¾‘</strong>ä¸<strong>ä¸šåŠ¡æ•°æ®</strong>åˆ†ç¦»ã€‚</p>
<h2 data-id="heading-1">æ¨¡æ¿åˆ†ç±»</h2>
<h3 data-id="heading-2">1. ğŸ¯ åŸºç¡€æ¨¡æ¿ç±»ï¼ˆCore Templatesï¼‰</h3>
<h4 data-id="heading-3">(1)Â <code>PromptTemplate</code></h4>
<p><strong>æœ€åŸºç¡€çš„æ–‡æœ¬æ¨¡æ¿</strong></p>
<pre><code class="hljs language-ini" lang="ini">from langchain.prompts import PromptTemplate

<span class="hljs-comment"># åˆ›å»ºæ¨¡æ¿çš„ä¸¤ç§æ–¹å¼</span>
<span class="hljs-comment"># æ–¹å¼1: ä½¿ç”¨ from_template (æ¨è)</span>
<span class="hljs-attr">template</span> = PromptTemplate.from_template(<span class="hljs-string">"è¯·æŠŠ{text}ç¿»è¯‘æˆ{language}"</span>)
<span class="hljs-attr">result</span> = template.format(text=<span class="hljs-string">"Hello"</span>, language=<span class="hljs-string">"ä¸­æ–‡"</span>)
print(result)  <span class="hljs-comment"># è¾“å‡º: "è¯·æŠŠHelloç¿»è¯‘æˆä¸­æ–‡"</span>

<span class="hljs-comment"># æ–¹å¼2: ä¼ ç»Ÿåˆ›å»ºæ–¹å¼</span>
<span class="hljs-attr">template</span> = PromptTemplate(
    <span class="hljs-attr">input_variables</span>=[<span class="hljs-string">"text"</span>, <span class="hljs-string">"language"</span>],
    <span class="hljs-attr">template</span>=<span class="hljs-string">"è¯·æŠŠ{text}ç¿»è¯‘æˆ{language}"</span>
)

<span class="hljs-comment"># å®é™…åº”ç”¨ç¤ºä¾‹</span>
<span class="hljs-attr">translation_template</span> = PromptTemplate.from_template(
    "å°†ä»¥ä¸‹{source_lang}æ–‡æœ¬ç¿»è¯‘æˆ{target_lang}ï¼š{text}"
)
<span class="hljs-attr">translation_result</span> = translation_template.format(
    <span class="hljs-attr">source_lang</span>=<span class="hljs-string">"è‹±æ–‡"</span>,
    <span class="hljs-attr">target_lang</span>=<span class="hljs-string">"ä¸­æ–‡"</span>, 
    <span class="hljs-attr">text</span>=<span class="hljs-string">"Hello, how are you?"</span>
)
</code></pre>
<h4 data-id="heading-4">(2)Â <code>ChatPromptTemplate</code></h4>
<p><strong>èŠå¤©æ¶ˆæ¯æ¨¡æ¿ï¼ˆæœ€å¸¸ç”¨ï¼‰</strong></p>
<pre><code class="hljs language-ini" lang="ini">from langchain.prompts import ChatPromptTemplate

<span class="hljs-comment"># åˆ›å»ºèŠå¤©æç¤ºæ¨¡æ¿</span>
<span class="hljs-attr">chat_prompt</span> = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ª{role}"</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"è¯·å›ç­”ï¼š{question}"</span>)
])

<span class="hljs-comment"># æ ¼å¼åŒ–æ¨¡æ¿</span>
<span class="hljs-attr">messages</span> = chat_prompt.format_messages(
    <span class="hljs-attr">role</span>=<span class="hljs-string">"æ•°å­¦è€å¸ˆ"</span>,
    <span class="hljs-attr">question</span>=<span class="hljs-string">"ä»€ä¹ˆæ˜¯å‹¾è‚¡å®šç†ï¼Ÿ"</span>
)

<span class="hljs-comment"># å®é™…åº”ç”¨ï¼šå®¢æœæœºå™¨äººæ¨¡æ¿</span>
<span class="hljs-attr">customer_service_prompt</span> = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯{company}çš„å®¢æœä»£è¡¨ï¼Œä¸“é—¨å¤„ç†{department}é—®é¢˜"</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"æˆ‘é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼š{issue_description}"</span>),
    (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"æˆ‘å¾ˆç†è§£æ‚¨çš„æƒ…å†µï¼Œè®©æˆ‘æ¥å¸®æ‚¨è§£å†³ã€‚"</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"å…·ä½“çš„ç»†èŠ‚æ˜¯ï¼š{details}"</span>)
])
</code></pre>
<h3 data-id="heading-5">2. ğŸ‘¥ æ¶ˆæ¯æ¨¡æ¿ç±»ï¼ˆMessage Templatesï¼‰</h3>
<p>è¿™äº›æ˜¯Â <code>ChatPromptTemplate</code>Â çš„ç»„æˆéƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from langchain.prompts import (
    SystemMessagePromptTemplate,
    HumanMessagePromptTemplate,
    AIMessagePromptTemplate,
    FunctionMessagePromptTemplate
)

<span class="hljs-comment"># åˆ›å»ºå„ç§æ¶ˆæ¯æ¨¡æ¿</span>
<span class="hljs-attr">system_template</span> = SystemMessagePromptTemplate.from_template(
    "ä½ æ˜¯{role}ï¼Œå…·æœ‰{expertise}ä¸“ä¸šçŸ¥è¯†"
)
<span class="hljs-attr">human_template</span> = HumanMessagePromptTemplate.from_template(
    "æˆ‘çš„é—®é¢˜æ˜¯ï¼š{question}"
)
<span class="hljs-attr">ai_template</span> = AIMessagePromptTemplate.from_template(
    "æ ¹æ®æˆ‘çš„çŸ¥è¯†ï¼Œ{answer}"
)

<span class="hljs-comment"># ç»„åˆä½¿ç”¨</span>
<span class="hljs-attr">chat_prompt</span> = ChatPromptTemplate.from_messages([
    system_template, 
    human_template,
    ai_template
])

<span class="hljs-comment"># å®Œæ•´ç¤ºä¾‹ï¼šç¼–ç¨‹åŠ©æ‰‹</span>
<span class="hljs-attr">programming_prompt</span> = ChatPromptTemplate.from_messages([
    SystemMessagePromptTemplate.from_template(
        <span class="hljs-string">"ä½ æ˜¯{language}ç¼–ç¨‹ä¸“å®¶ï¼Œæ“…é•¿{domain}å¼€å‘"</span>
    ),
    HumanMessagePromptTemplate.from_template(
        <span class="hljs-string">"è¯·å¸®æˆ‘è§£å†³è¿™ä¸ªç¼–ç¨‹é—®é¢˜ï¼š{problem}"</span>
    ),
    AIMessagePromptTemplate.from_template(
        <span class="hljs-string">"æˆ‘ä¼šæŒ‰ç…§ä»¥ä¸‹æ€è·¯è§£å†³ï¼š{approach}"</span>
    ),
    HumanMessagePromptTemplate.from_template(
        <span class="hljs-string">"å…·ä½“å®ç°ä»£ç æ˜¯ï¼Ÿ"</span>
    )
])
</code></pre>
<h3 data-id="heading-6">3. ğŸª é«˜çº§æ¨¡æ¿ç±»ï¼ˆAdvanced Templatesï¼‰</h3>
<h4 data-id="heading-7">(7)Â <code>FewShotPromptTemplate</code></h4>
<p><strong>å°‘æ ·æœ¬å­¦ä¹ æ¨¡æ¿</strong></p>
<pre><code class="hljs language-ini" lang="ini">from langchain.prompts import FewShotPromptTemplate, PromptTemplate

<span class="hljs-comment"># å®šä¹‰ç¤ºä¾‹æ•°æ®</span>
<span class="hljs-attr">examples</span> = [
    {
        <span class="hljs-string">"input"</span>: <span class="hljs-string">"The weather is nice today"</span>, 
        <span class="hljs-string">"output"</span>: <span class="hljs-string">"ä»Šå¤©å¤©æ°”å¾ˆå¥½"</span>
    },
    {
        <span class="hljs-string">"input"</span>: <span class="hljs-string">"I love programming"</span>, 
        <span class="hljs-string">"output"</span>: <span class="hljs-string">"æˆ‘å–œæ¬¢ç¼–ç¨‹"</span>
    },
    {
        <span class="hljs-string">"input"</span>: <span class="hljs-string">"The meeting starts at 3 PM"</span>, 
        <span class="hljs-string">"output"</span>: <span class="hljs-string">"ä¼šè®®ä¸‹åˆä¸‰ç‚¹å¼€å§‹"</span>
    }
]

<span class="hljs-comment"># å®šä¹‰å•ä¸ªç¤ºä¾‹çš„æ¨¡æ¿</span>
<span class="hljs-attr">example_template</span> = PromptTemplate.from_template(
    "è‹±æ–‡: {input}\nä¸­æ–‡: {output}"
)

<span class="hljs-comment"># åˆ›å»ºå°‘æ ·æœ¬æç¤ºæ¨¡æ¿</span>
<span class="hljs-attr">few_shot_prompt</span> = FewShotPromptTemplate(
    <span class="hljs-attr">examples</span>=examples,
    <span class="hljs-attr">example_prompt</span>=example_template,
    <span class="hljs-attr">prefix</span>=<span class="hljs-string">"è¯·æ ¹æ®ä»¥ä¸‹ç¤ºä¾‹å°†è‹±æ–‡ç¿»è¯‘æˆä¸­æ–‡ï¼š"</span>,
    <span class="hljs-attr">suffix</span>=<span class="hljs-string">"è‹±æ–‡: {input}\nä¸­æ–‡:"</span>,
    <span class="hljs-attr">input_variables</span>=[<span class="hljs-string">"input"</span>]
)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-attr">result</span> = few_shot_prompt.format(input=<span class="hljs-string">"Thank you for your help"</span>)
print("=== ç”Ÿæˆçš„æç¤º ===")
print(result)

<span class="hljs-comment"># å®é™…åº”ç”¨ï¼šæƒ…æ„Ÿåˆ†æå°‘æ ·æœ¬æ¨¡æ¿</span>
<span class="hljs-attr">sentiment_examples</span> = [
    {<span class="hljs-string">"text"</span>: <span class="hljs-string">"è¿™ä¸ªäº§å“å¤ªæ£’äº†ï¼"</span>, <span class="hljs-string">"sentiment"</span>: <span class="hljs-string">"æ­£é¢"</span>},
    {<span class="hljs-string">"text"</span>: <span class="hljs-string">"æœåŠ¡å¾ˆå·®ï¼Œå¾ˆä¸æ»¡æ„"</span>, <span class="hljs-string">"sentiment"</span>: <span class="hljs-string">"è´Ÿé¢"</span>},
    {<span class="hljs-string">"text"</span>: <span class="hljs-string">"è¿˜å¯ä»¥ï¼Œä¸€èˆ¬èˆ¬"</span>, <span class="hljs-string">"sentiment"</span>: <span class="hljs-string">"ä¸­æ€§"</span>}
]

<span class="hljs-attr">sentiment_template</span> = FewShotPromptTemplate(
    <span class="hljs-attr">examples</span>=sentiment_examples,
    <span class="hljs-attr">example_prompt</span>=PromptTemplate.from_template(
        "æ–‡æœ¬: {text}\næƒ…æ„Ÿ: {sentiment}"
    ),
    <span class="hljs-attr">prefix</span>=<span class="hljs-string">"åˆ†æä»¥ä¸‹æ–‡æœ¬çš„æƒ…æ„Ÿå€¾å‘ï¼š"</span>,
    <span class="hljs-attr">suffix</span>=<span class="hljs-string">"æ–‡æœ¬: {text}\næƒ…æ„Ÿ:"</span>,
    <span class="hljs-attr">input_variables</span>=[<span class="hljs-string">"text"</span>]
)
</code></pre>
<h4 data-id="heading-8">(8)Â <code>FewShotChatMessagePromptTemplate</code></h4>
<p><strong>èŠå¤©ç‰ˆçš„å°‘æ ·æœ¬æ¨¡æ¿</strong></p>
<pre><code class="hljs language-ini" lang="ini">from langchain.prompts import FewShotChatMessagePromptTemplate, ChatPromptTemplate

<span class="hljs-comment"># å®šä¹‰èŠå¤©ç¤ºä¾‹</span>
<span class="hljs-attr">chat_examples</span> = [
    {
        <span class="hljs-string">"input"</span>: <span class="hljs-string">"ä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>,
        <span class="hljs-string">"output"</span>: <span class="hljs-string">"æˆ‘æ— æ³•è·å–å®æ—¶å¤©æ°”ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹å¤©æ°”é¢„æŠ¥åº”ç”¨ã€‚"</span>
    },
    {
        <span class="hljs-string">"input"</span>: <span class="hljs-string">"ç°åœ¨å‡ ç‚¹äº†ï¼Ÿ"</span>,
        <span class="hljs-string">"output"</span>: <span class="hljs-string">"æˆ‘æ— æ³•è·å–å½“å‰æ—¶é—´ï¼Œè¯·æŸ¥çœ‹æ‚¨çš„è®¾å¤‡æ—¶é’Ÿã€‚"</span>
    },
    {
        <span class="hljs-string">"input"</span>: <span class="hljs-string">"æˆ‘çš„å¿«é€’åˆ°å“ªé‡Œäº†ï¼Ÿ"</span>, 
        <span class="hljs-string">"output"</span>: <span class="hljs-string">"æˆ‘æ— æ³•æŸ¥è¯¢ç‰©æµä¿¡æ¯ï¼Œè¯·ä½¿ç”¨å¿«é€’å…¬å¸çš„å®˜æ–¹åº”ç”¨æŸ¥è¯¢ã€‚"</span>
    }
]

<span class="hljs-comment"># åˆ›å»ºç¤ºä¾‹æ¨¡æ¿</span>
<span class="hljs-attr">example_prompt</span> = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>),
    (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"{output}"</span>)
])

<span class="hljs-comment"># åˆ›å»ºå°‘æ ·æœ¬èŠå¤©æ¨¡æ¿</span>
<span class="hljs-attr">few_shot_chat</span> = FewShotChatMessagePromptTemplate(
    <span class="hljs-attr">examples</span>=chat_examples,
    <span class="hljs-attr">example_prompt</span>=example_prompt
)

<span class="hljs-comment"># ç»„åˆåˆ°å®Œæ•´æç¤ºä¸­</span>
<span class="hljs-attr">final_prompt</span> = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„AIåŠ©æ‰‹ï¼Œè¯·ç¤¼è²Œåœ°å›ç­”ç”¨æˆ·é—®é¢˜ã€‚"</span>),
    few_shot_chat,
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{user_input}"</span>)
])

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-attr">messages</span> = final_prompt.format_messages(
    <span class="hljs-attr">user_input</span>=<span class="hljs-string">"æˆ‘çš„é“¶è¡Œä½™é¢æ˜¯å¤šå°‘ï¼Ÿ"</span>
)
</code></pre>
<h3 data-id="heading-9">4. ğŸ§© ç‰¹æ®Šç”¨é€”æ¨¡æ¿</h3>
<h4 data-id="heading-10">(9)Â <code>MessagesPlaceholder</code></h4>
<p><strong>æ¶ˆæ¯å ä½ç¬¦ï¼ˆç”¨äºåŠ¨æ€æ’å…¥æ¶ˆæ¯ï¼‰</strong></p>
<pre><code class="hljs language-ini" lang="ini">from langchain.prompts import MessagesPlaceholder, ChatPromptTemplate

<span class="hljs-comment"># åˆ›å»ºå¸¦æ¶ˆæ¯å ä½ç¬¦çš„æ¨¡æ¿</span>
<span class="hljs-attr">prompt_with_history</span> = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸“ä¸šçš„{expert_role}"</span>),
    MessagesPlaceholder(variable_name=<span class="hljs-string">"chat_history"</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{current_question}"</span>)
])

<span class="hljs-comment"># æ¨¡æ‹Ÿå¯¹è¯å†å²</span>
<span class="hljs-attr">chat_history</span> = [
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"human"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä»€ä¹ˆæ˜¯Pythonï¼Ÿ"</span>},
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"ai"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"Pythonæ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚"</span>}
]

<span class="hljs-comment"># æ ¼å¼åŒ–æ¨¡æ¿</span>
<span class="hljs-attr">messages</span> = prompt_with_history.format_messages(
    <span class="hljs-attr">expert_role</span>=<span class="hljs-string">"ç¼–ç¨‹æ•™å¸ˆ"</span>,
    <span class="hljs-attr">chat_history</span>=chat_history,
    <span class="hljs-attr">current_question</span>=<span class="hljs-string">"Pythonæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"</span>
)

<span class="hljs-comment"># å®é™…åº”ç”¨ï¼šå¸¦è®°å¿†çš„å¯¹è¯ç³»ç»Ÿ</span>
<span class="hljs-attr">memory_prompt</span> = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"""ä½ æ˜¯{assistant_name}ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
    - ä¸“ä¸šé¢†åŸŸ: {expertise}
    - å›ç­”é£æ ¼: {style}
    - è¯­è¨€: {language}"""</span>),
    
    MessagesPlaceholder(variable_name=<span class="hljs-string">"conversation_history"</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{current_input}"</span>)
])
</code></pre>
<h2 data-id="heading-11">ğŸ”— Template å…³ç³»å›¾è°±</h2>
<pre><code class="hljs language-scss" lang="scss">PromptTemplate (åŸºç±»)
    â”‚
    â”œâ”€â”€ ChatPromptTemplate (ç»„åˆå¤šä¸ªæ¶ˆæ¯)
    â”‚       â”œâ”€â”€ SystemMessagePromptTemplate
    â”‚       â”œâ”€â”€ HumanMessagePromptTemplate  
    â”‚       â”œâ”€â”€ AIMessagePromptTemplate
    â”‚       â””â”€â”€ FunctionMessagePromptTemplate
    â”‚
    â”œâ”€â”€ FewShotPromptTemplate (åŒ…å«example_prompt)
    â”‚
    â””â”€â”€ FewShotChatMessagePromptTemplate (ä¸“é—¨ç”¨äºèŠå¤©)
</code></pre>
<h2 data-id="heading-12">ğŸ¯ æ ¸å¿ƒå…³ç³»è¯´æ˜</h2>
<h3 data-id="heading-13">å…³ç³»1ï¼š<strong>åŒ…å«å…³ç³»</strong></h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># FewShotPromptTemplate åŒ…å« PromptTemplate</span>
<span class="hljs-attr">examples</span> = [
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"hello"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"ä½ å¥½"</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"goodbye"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"å†è§"</span>}
]

<span class="hljs-attr">example_prompt</span> = PromptTemplate.from_template(
    "è¾“å…¥: {input}\nè¾“å‡º: {output}"
)

<span class="hljs-attr">few_shot_prompt</span> = FewShotPromptTemplate(
    <span class="hljs-attr">example_prompt</span>=example_prompt,  <span class="hljs-comment"># åŒ…å«å…³ç³»</span>
    <span class="hljs-attr">examples</span>=examples,
    <span class="hljs-attr">prefix</span>=<span class="hljs-string">"ç¿»è¯‘ä»»åŠ¡ï¼š"</span>,
    <span class="hljs-attr">suffix</span>=<span class="hljs-string">"è¾“å…¥: {input}\nè¾“å‡º:"</span>,
    <span class="hljs-attr">input_variables</span>=[<span class="hljs-string">"input"</span>]
)

<span class="hljs-comment"># ChatPromptTemplate åŒ…å« MessagePromptTemplates</span>
<span class="hljs-attr">system_template</span> = SystemMessagePromptTemplate.from_template(<span class="hljs-string">"ç³»ç»Ÿ: {role}"</span>)
<span class="hljs-attr">human_template</span> = HumanMessagePromptTemplate.from_template(<span class="hljs-string">"ç”¨æˆ·: {question}"</span>)

<span class="hljs-attr">chat_prompt</span> = ChatPromptTemplate.from_messages([
    system_template,    <span class="hljs-comment"># åŒ…å«å…³ç³»</span>
    human_template      <span class="hljs-comment"># åŒ…å«å…³ç³»</span>
])
</code></pre>
<h3 data-id="heading-14">å…³ç³»2ï¼š<strong>ç»„åˆå…³ç³»</strong></h3>
<pre><code class="hljs language-ini" lang="ini">from langchain.prompts import ChatPromptTemplate, FewShotChatMessagePromptTemplate

<span class="hljs-comment"># åˆ›å»ºå°‘æ ·æœ¬éƒ¨åˆ†</span>
<span class="hljs-attr">few_shot_examples</span> = [
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"å¦‚ä½•å­¦ä¹ ç¼–ç¨‹ï¼Ÿ"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"å»ºè®®ä»åŸºç¡€è¯­æ³•å¼€å§‹..."</span>},
    {<span class="hljs-string">"input"</span>: <span class="hljs-string">"æœ€å¥½çš„ç¼–ç¨‹è¯­è¨€ï¼Ÿ"</span>, <span class="hljs-string">"output"</span>: <span class="hljs-string">"è¿™å–å†³äºä½ çš„ç›®æ ‡..."</span>}
]

<span class="hljs-attr">few_shot_section</span> = FewShotChatMessagePromptTemplate(
    <span class="hljs-attr">example_prompt</span>=ChatPromptTemplate.from_messages([
        (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>),
        (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"{output}"</span>)
    ]),
    <span class="hljs-attr">examples</span>=few_shot_examples
)

<span class="hljs-comment"># FewShotChatMessagePromptTemplate ä½œä¸º ChatPromptTemplate çš„ä¸€éƒ¨åˆ†</span>
<span class="hljs-attr">final_prompt</span> = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯{teacher_type}è€å¸ˆ"</span>),
    few_shot_section,  <span class="hljs-comment"># ç»„åˆå…³ç³»</span>
    MessagesPlaceholder(variable_name=<span class="hljs-string">"history"</span>),  <span class="hljs-comment"># ç»„åˆå…³ç³»</span>
    HumanMessagePromptTemplate.from_template(<span class="hljs-string">"{current_input}"</span>)
])

<span class="hljs-comment"># ä½¿ç”¨ç»„åˆæ¨¡æ¿</span>
<span class="hljs-attr">formatted_messages</span> = final_prompt.format_messages(
    <span class="hljs-attr">teacher_type</span>=<span class="hljs-string">"ç¼–ç¨‹"</span>,
    <span class="hljs-attr">history</span>=[],
    <span class="hljs-attr">current_input</span>=<span class="hljs-string">"å¦‚ä½•è°ƒè¯•ä»£ç ï¼Ÿ"</span>
)
</code></pre>
<h2 data-id="heading-15">ğŸ› ï¸ å®é™…ä½¿ç”¨åœºæ™¯å¯¹æ¯”</h2>
<h3 data-id="heading-16">åœºæ™¯1ï¼šç®€å•æ–‡æœ¬ç”Ÿæˆ â†’Â <code>PromptTemplate</code></h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¯—æ­Œç”Ÿæˆ</span>
<span class="hljs-attr">poem_template</span> = PromptTemplate.from_template(<span class="hljs-string">"""
è¯·ä»¥{style}é£æ ¼å†™ä¸€é¦–å…³äº{topic}çš„è¯—ã€‚

è¦æ±‚ï¼š
- æ„å¢ƒ: {mood}
- é•¿åº¦: {length}
- è¯­è¨€: {language}

è¯—æ­Œï¼š
"""</span>)

<span class="hljs-attr">poem_prompt</span> = poem_template.format(
    <span class="hljs-attr">style</span>=<span class="hljs-string">"æµªæ¼«"</span>,
    <span class="hljs-attr">topic</span>=<span class="hljs-string">"æ˜¥å¤©"</span>, 
    <span class="hljs-attr">mood</span>=<span class="hljs-string">"æ¬¢å¿«"</span>,
    <span class="hljs-attr">length</span>=<span class="hljs-string">"å…«å¥"</span>,
    <span class="hljs-attr">language</span>=<span class="hljs-string">"ä¸­æ–‡"</span>
)
</code></pre>
<h3 data-id="heading-17">åœºæ™¯2ï¼šèŠå¤©å¯¹è¯ â†’Â <code>ChatPromptTemplate</code>Â +Â <code>MessageTemplates</code></h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¸“ä¸šå’¨è¯¢å¯¹è¯</span>
<span class="hljs-attr">system_msg</span> = SystemMessagePromptTemplate.from_template(<span class="hljs-string">"""
ä½ æ˜¯{profession}é¡¾é—®ï¼Œå…·æœ‰ä»¥ä¸‹èµ„è´¨ï¼š
- ç»éªŒ: {experience}
- ä¸“é•¿: {specialization} 
- è®¤è¯: {certifications}
"""</span>)

<span class="hljs-attr">human_msg</span> = HumanMessagePromptTemplate.from_template(<span class="hljs-string">"""
æˆ‘çš„å’¨è¯¢é—®é¢˜æ˜¯ï¼š{question}

èƒŒæ™¯ä¿¡æ¯ï¼š
{context}
"""</span>)

<span class="hljs-attr">chat_prompt</span> = ChatPromptTemplate.from_messages([system_msg, human_msg])

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-attr">messages</span> = chat_prompt.format_messages(
    <span class="hljs-attr">profession</span>=<span class="hljs-string">"æ³•å¾‹"</span>,
    <span class="hljs-attr">experience</span>=<span class="hljs-string">"10å¹´"</span>,
    <span class="hljs-attr">specialization</span>=<span class="hljs-string">"åˆåŒæ³•"</span>,
    <span class="hljs-attr">certifications</span>=<span class="hljs-string">"å¾‹å¸ˆæ‰§ä¸šè¯"</span>,
    <span class="hljs-attr">question</span>=<span class="hljs-string">"åˆåŒè¿çº¦å¦‚ä½•å¤„ç†ï¼Ÿ"</span>,
    <span class="hljs-attr">context</span>=<span class="hljs-string">"ç”²æ–¹æœªæŒ‰çº¦å®šæ—¶é—´ä»˜æ¬¾"</span>
)
</code></pre>
<h3 data-id="heading-18">åœºæ™¯3ï¼šç¤ºä¾‹å­¦ä¹  â†’Â <code>FewShotPromptTemplate</code></h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä»£ç ç”Ÿæˆå°‘æ ·æœ¬å­¦ä¹ </span>
<span class="hljs-attr">code_examples</span> = [
    {
        <span class="hljs-string">"requirement"</span>: <span class="hljs-string">"è®¡ç®—åˆ—è¡¨å¹³å‡å€¼"</span>,
        <span class="hljs-string">"code"</span>: <span class="hljs-string">"def calculate_average(numbers):\n    return sum(numbers) / len(numbers)"</span>
    },
    {
        <span class="hljs-string">"requirement"</span>: <span class="hljs-string">"åè½¬å­—ç¬¦ä¸²"</span>, 
        <span class="hljs-string">"code"</span>: <span class="hljs-string">"def reverse_string(s):\n    return s[::-1]"</span>
    }
]

<span class="hljs-attr">code_template</span> = FewShotPromptTemplate(
    <span class="hljs-attr">examples</span>=code_examples,
    <span class="hljs-attr">example_prompt</span>=PromptTemplate.from_template(
        "éœ€æ±‚: {requirement}\nä»£ç : {code}"
    ),
    <span class="hljs-attr">prefix</span>=<span class="hljs-string">"è¯·æ ¹æ®ç¤ºä¾‹ç¼–å†™Pythonä»£ç ï¼š"</span>,
    <span class="hljs-attr">suffix</span>=<span class="hljs-string">"éœ€æ±‚: {requirement}\nä»£ç :"</span>,
    <span class="hljs-attr">input_variables</span>=[<span class="hljs-string">"requirement"</span>]
)

<span class="hljs-attr">code_prompt</span> = code_template.format(
    <span class="hljs-attr">requirement</span>=<span class="hljs-string">"æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡"</span>
)
</code></pre>
<h3 data-id="heading-19">åœºæ™¯4ï¼šå¤æ‚èŠå¤© + ç¤ºä¾‹ â†’ ç»„åˆä½¿ç”¨</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># 1. åˆ›å»ºå°‘æ ·æœ¬éƒ¨åˆ†</span>
<span class="hljs-attr">few_shot_examples</span> = [
    {
        <span class="hljs-string">"situation"</span>: <span class="hljs-string">"ç”¨æˆ·è¯¢é—®ä¸ªäººéšç§ä¿¡æ¯"</span>,
        <span class="hljs-string">"response"</span>: <span class="hljs-string">"å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæˆ‘æ— æ³•è®¿é—®æˆ–æä¾›ä¸ªäººéšç§ä¿¡æ¯ã€‚"</span>
    },
    {
        <span class="hljs-string">"situation"</span>: <span class="hljs-string">"ç”¨æˆ·è¦æ±‚è¿æ³•å¸®åŠ©"</span>, 
        <span class="hljs-string">"response"</span>: <span class="hljs-string">"æŠ±æ­‰ï¼Œæˆ‘æ— æ³•æä¾›ä»»ä½•è¿æ³•æˆ–ä¸é“å¾·è¡Œä¸ºçš„å¸®åŠ©ã€‚"</span>
    }
]

<span class="hljs-attr">few_shot_section</span> = FewShotChatMessagePromptTemplate(
    <span class="hljs-attr">example_prompt</span>=ChatPromptTemplate.from_messages([
        (<span class="hljs-string">"human"</span>, <span class="hljs-string">"æƒ…å¢ƒ: {situation}"</span>),
        (<span class="hljs-string">"ai"</span>, <span class="hljs-string">"å›å¤: {response}"</span>)
    ]),
    <span class="hljs-attr">examples</span>=few_shot_examples
)

<span class="hljs-comment"># 2. åˆ›å»ºå®Œæ•´èŠå¤©æç¤º</span>
<span class="hljs-attr">final_prompt</span> = ChatPromptTemplate.from_messages([
    SystemMessagePromptTemplate.from_template(<span class="hljs-string">"""
    ä½ æ˜¯{assistant_name}ï¼Œå®‰å…¨å‡†åˆ™ï¼š
    - {safety_guidelines}
    - å§‹ç»ˆéµå®ˆ{regulations}
    """</span>),
    
    few_shot_section,  <span class="hljs-comment"># åŒ…å«å°‘æ ·æœ¬ç¤ºä¾‹</span>
    
    MessagesPlaceholder(variable_name=<span class="hljs-string">"conversation_history"</span>),  <span class="hljs-comment"># åŠ¨æ€å†å²</span>
    
    HumanMessagePromptTemplate.from_template(<span class="hljs-string">"å½“å‰æŸ¥è¯¢: {current_query}"</span>)
])

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-attr">messages</span> = final_prompt.format_messages(
    <span class="hljs-attr">assistant_name</span>=<span class="hljs-string">"å®‰å…¨åŠ©æ‰‹"</span>,
    <span class="hljs-attr">safety_guidelines</span>=<span class="hljs-string">"ä¸åˆ†äº«ä¸ªäººä¿¡æ¯ï¼Œä¸æä¾›è¿æ³•å»ºè®®"</span>,
    <span class="hljs-attr">regulations</span>=<span class="hljs-string">"AIä½¿ç”¨è§„èŒƒ"</span>,
    <span class="hljs-attr">conversation_history</span>=[],
    <span class="hljs-attr">current_query</span>=<span class="hljs-string">"ä½ èƒ½å‘Šè¯‰æˆ‘åˆ«äººçš„ç”µè¯å·ç å—ï¼Ÿ"</span>
)
</code></pre>
<h2 data-id="heading-20">ğŸ“ ä½¿ç”¨é¢‘ç‡æ€»ç»“</h2>


















































<table><thead><tr><th>Template ç±»å‹</th><th>ç”¨é€”</th><th>ä½¿ç”¨é¢‘ç‡</th></tr></thead><tbody><tr><td><code>PromptTemplate</code></td><td>åŸºç¡€æ–‡æœ¬æ¨¡æ¿</td><td>â­â­â­â­</td></tr><tr><td><code>ChatPromptTemplate</code></td><td>èŠå¤©æ¶ˆæ¯ç»„åˆ</td><td>â­â­â­â­â­</td></tr><tr><td><code>SystemMessagePromptTemplate</code></td><td>ç³»ç»Ÿæ¶ˆæ¯</td><td>â­â­â­â­</td></tr><tr><td><code>HumanMessagePromptTemplate</code></td><td>ç”¨æˆ·æ¶ˆæ¯</td><td>â­â­â­â­</td></tr><tr><td><code>AIMessagePromptTemplate</code></td><td>AIæ¶ˆæ¯</td><td>â­â­â­</td></tr><tr><td><code>FewShotPromptTemplate</code></td><td>å°‘æ ·æœ¬å­¦ä¹ </td><td>â­â­â­</td></tr><tr><td><code>FewShotChatMessagePromptTemplate</code></td><td>èŠå¤©å°‘æ ·æœ¬</td><td>â­â­</td></tr><tr><td><code>MessagesPlaceholder</code></td><td>åŠ¨æ€æ¶ˆæ¯å ä½</td><td>â­â­</td></tr></tbody></table>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p><code>LangChain Template</code>Â æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„æç¤ºå·¥ç¨‹èƒ½åŠ›ï¼š</p>
<ul>
<li><strong>ğŸ¯ ç²¾å‡†æ§åˆ¶</strong>: é€šè¿‡æ¨¡æ¿ç²¾ç¡®æ§åˆ¶æ¨¡å‹è¾“å…¥ï¼Œç¡®ä¿æç¤ºçš„ä¸€è‡´æ€§</li>
<li><strong>â™»ï¸ å¯å¤ç”¨æ€§</strong>: ä¸€æ¬¡åˆ›å»ºï¼Œå¤šå¤„ä½¿ç”¨ï¼Œæé«˜å¼€å‘æ•ˆç‡</li>
<li><strong>ğŸ”§ æ¨¡å—åŒ–</strong>: åƒæ­ç§¯æœ¨ä¸€æ ·ç»„åˆæ¨¡æ¿ï¼Œæ”¯æŒå¤æ‚åœºæ™¯</li>
<li><strong>ğŸ›¡ï¸ å¯é æ€§</strong>: ç±»å‹å®‰å…¨å’Œé”™è¯¯æ£€æŸ¥ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯</li>
<li><strong>ğŸš€ é«˜æ•ˆå¼€å‘</strong>: åŠ é€Ÿ AI åº”ç”¨å¼€å‘æµç¨‹ï¼Œé™ä½ç»´æŠ¤æˆæœ¬</li>
</ul>
<p>æŒæ¡ <code>LangChain Template</code> æ˜¯æ„å»ºé«˜è´¨é‡å¤§æ¨¡å‹åº”ç”¨çš„å…³é”®æŠ€èƒ½ï¼Œå®ƒè®©æç¤ºå·¥ç¨‹ä»è‰ºæœ¯èµ°å‘å·¥ç¨‹åŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰“åŒ…ç¥¨ï¼å‰ç«¯å’Œå°ç™½ä¸€å®šæ˜ç™½çš„äººå·¥æ™ºèƒ½åŸºç¡€æ¦‚å¿µï¼]]></title>    <link>https://juejin.cn/post/7573592127299108914</link>    <guid>https://juejin.cn/post/7573592127299108914</guid>    <pubDate>2025-11-18T05:38:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573592127299108914" data-draft-id="7573595009553137674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰“åŒ…ç¥¨ï¼å‰ç«¯å’Œå°ç™½ä¸€å®šæ˜ç™½çš„äººå·¥æ™ºèƒ½åŸºç¡€æ¦‚å¿µï¼"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-18T05:38:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰“åŒ…ç¥¨ï¼å‰ç«¯å’Œå°ç™½ä¸€å®šæ˜ç™½çš„äººå·¥æ™ºèƒ½åŸºç¡€æ¦‚å¿µï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-18T05:38:01.000Z" title="Tue Nov 18 2025 05:38:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>AIæ—¶ä»£ï¼Œä¸çŸ¥é“ä½ æ˜¯å¦å’Œæˆ‘æœ‰åŒæ ·çš„ç»å†ï¼šæœç´¢äº†å¤§é‡å·ç§°â€œå°ç™½ä¹Ÿèƒ½çœ‹æ‡‚â€çš„AIç§‘æ™®æ–‡ç« ï¼Œç»“æœç‚¹è¿›å»ï¼Œä»æœ‰90%çš„å†…å®¹è®©äººä¸€å¤´é›¾æ°´ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œæ˜¯æˆ‘åœ¨é˜…è¯»ä¼—å¤šèµ„æ–™åï¼Œæ•´ç†å‡ºçš„ä¸€ä»½æ›´æ˜“æ‡‚çš„æ€»ç»“ã€‚å®ƒä¸å¼ºæ±‚å…¨é¢ï¼Œä½†åŠ›æ±‚é€»è¾‘æ¸…æ™°ã€å±‚å±‚é€’è¿›â€”â€”ä»åŸºç¡€æ¦‚å¿µé€æ­¥å¼•å‡ºæ›´å¤æ‚çš„å†…å®¹ï¼Œè€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±æŠ›å‡ºâ€œç¥ç»ç½‘ç»œâ€â€œæ·±åº¦å­¦ä¹ â€æˆ–â€œChatGPTé¢„æµ‹æ¨¡å‹â€è¿™æ ·çš„æœ¯è¯­ã€‚</p>
<p>æˆ‘ç›¸ä¿¡ï¼Œåªè¦ä½ å…·å¤‡åˆä¸­çŸ¥è¯†æ°´å¹³ï¼Œå°±èƒ½è½»æ¾ç†è§£ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<h2 data-id="heading-0">ä¸€ã€äººå·¥æ™ºèƒ½çš„èµ·æº</h2>
<p>1956å¹´ï¼Œä¸€ç¾¤ç§‘å­¦å®¶åœ¨è¾¾ç‰¹èŒ…æ–¯ä¼šè®®ä¸Šé¦–æ¬¡æå‡ºâ€œäººå·¥æ™ºèƒ½â€è¿™ä¸€æ¦‚å¿µã€‚ä»–ä»¬è®¨è®ºçš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼šå¦‚ä½•åˆ¶é€ å‡ºèƒ½å¤Ÿå­¦ä¹ å¹¶æ¨¡æ‹Ÿäººç±»æ™ºèƒ½çš„æœºå™¨ã€‚</p>
<p>ä»æ­¤ï¼Œäººå·¥æ™ºèƒ½ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç ”ç©¶é¢†åŸŸæ­£å¼è¯ç”Ÿã€‚</p>
<p>ä½†é—®é¢˜åœ¨äºï¼Œæœºå™¨å¤„ç†ä¿¡æ¯çš„æ–¹å¼ä¸äººç±»æˆªç„¶ä¸åŒã€‚æœºå™¨æ¥æ”¶çš„æ‰€æœ‰æ•°æ®æœ€ç»ˆéƒ½ä¼šè½¬åŒ–ä¸ºæ•°å­—ï¼ˆåŒ…æ‹¬æ–‡å­—ï¼‰ã€‚</p>
<blockquote>
<p>ç®€å•è§£é‡Šä¸ºä»€ä¹ˆæ–‡å­—åœ¨è®¡ç®—æœºå†…éƒ¨ä¹Ÿæ˜¯æ•°å­—è¡¨ç¤ºçš„ï¼Œå°±æ¶‰åŠåˆ°ç¼–ç çš„çŸ¥è¯†ï¼Œä¾‹å¦‚ ASCII ç¼–ç ï¼Œå­—æ¯ a åœ¨è®¡ç®—æœºå†…éƒ¨è¡¨ç¤º 97ã€‚è€Œ 97 æœ€ç»ˆä¼šè¢«è§£é‡Šè€Œ 2 è¿›åˆ¶ï¼Œå› ä¸ºè®¡ç®—æœºæœ¬èº«å°±æ˜¯ 2 è¿›åˆ¶çš„ã€‚å®ƒåªèƒ½è®¤è¯† 0 å’Œ 1ã€‚ç„¶åæˆ‘ä»¬å°†æ•°å­—å’Œæ–‡å­—åšä¸ªæ˜ å°„ï¼Œä¾‹å¦‚ <code>01100001</code> è¡¨ç¤ºå­—æ¯ a ï¼Œè€Œ <code>01100001</code> çš„ 10 è¿›åˆ¶å°±æ˜¯ 97.</p>
</blockquote>
<p>æˆ‘ä»¬æŠ½è±¡ä¸€ä¸‹è®¡ç®—æœºçš„æ€è€ƒæ–¹å¼ï¼Œç®€å•æ¥è¯´å°±æ˜¯ï¼š</p>
<p>f(x)=<em>y</em></p>
<ul>
<li>
<p>æˆ‘ä»¬å‘è®¡ç®—æœºè¾“å…¥å‚æ•° x</p>
</li>
<li>
<p>è®¡ç®—æœºå°†å‚æ•°è½¬ä¸ºæ•°å­—ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šæ–‡ç« è¯´ä»€ä¹ˆå‘é‡è¿™ä¸ªæ¦‚å¿µï¼Œå‘é‡å¯ä»¥ç®€å•ç†è§£ä¸ºæ•°å­—ç»„æˆçš„å¤šç»´æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¾‹å¦‚ â€œè‹¹æœâ€ è¿™ä¸ªè¯ï¼Œæœ€ç»ˆè¦è½¬åŒ–ä¸ºæ•°å­—ï¼Œè®¡ç®—æœºæ‰èƒ½ç†è§£ï¼‰ï¼Œç„¶åé€šè¿‡å‡½æ•° f å¤„ç†å¹¶è®¡ç®—</p>
</li>
<li>
<p>æœ€ç»ˆè¾“å‡ºç»“æœ y</p>
</li>
</ul>
<p>ä½†è¿™æ˜¾ç„¶ä¸æ˜¯äººç±»æ€è€ƒé—®é¢˜çš„æ–¹å¼ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•è®©æœºå™¨å…·å¤‡ç±»ä¼¼äººç±»çš„åˆ¤æ–­ä¸å­¦ä¹ èƒ½åŠ›ï¼Œæˆä¸ºçœŸæ­£çš„â€œæ™ºèƒ½æœºå™¨â€å‘¢ï¼Ÿ</p>
<p>ç§‘å­¦å®¶ä»¬æå‡ºäº†ä¸åŒçš„æ€è·¯ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç¬¦å·ä¸»ä¹‰ï¼šç”¨è§„åˆ™æ¨¡æ‹Ÿæ™ºèƒ½</h2>
<p>åœ¨äººå·¥æ™ºèƒ½çš„æ—©æœŸé˜¶æ®µï¼Œç¬¦å·ä¸»ä¹‰ï¼ˆSymbolismï¼‰æ˜¯ä¸€ç§ä¸»æµæ€è·¯ã€‚å®ƒè®¤ä¸ºï¼Œå¯ä»¥é€šè¿‡æ•°å­¦é€»è¾‘æ¥æ¨¡æ‹Ÿäººç±»çš„æ¨ç†è¿‡ç¨‹ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ä¸‹é›¨çš„æœºå™¨ï¼š</p>
<ul>
<li>
<p>å‚æ•° a<em>a</em>ï¼šæ˜¯å¦ä¸ºé˜´å¤©</p>
</li>
<li>
<p>å‚æ•° b<em>b</em>ï¼šæ¹¿åº¦æ˜¯å¦å¤§äº70%</p>
</li>
</ul>
<p>åªæœ‰å½“ a å’Œ b åŒæ—¶ä¸ºâ€œçœŸâ€æ—¶ï¼Œæœºå™¨æ‰è¾“å‡ºâ€œè¦ä¸‹é›¨â€ï¼Œå¦åˆ™è¾“å‡ºâ€œä¸ä¸‹é›¨â€ã€‚</p>
<p>è¿™ç§æ€è·¯æœ¬è´¨ä¸Šå°±æ˜¯ç¼–ç¨‹ä¸­çš„ <code>if...else...</code> é€»è¾‘ã€‚</p>
<p>åˆ«å°çœ‹ç¬¦å·ä¸»ä¹‰ï¼Œå®ƒçš„æˆåŠŸåº”ç”¨ä¹‹ä¸€å°±æ˜¯â€œä¸“å®¶ç³»ç»Ÿâ€ã€‚æ¯”å¦‚åœ¨åŒ»ç–—è¯Šæ–­ä¸­ï¼š</p>
<ul>
<li>
<p>ä» å¤´ç–¼ + å‘çƒ­ + å’³å—½ çš„ç—‡çŠ¶ â†’ èƒ½æ¨æµ‹å‡ºå¾—äº†æµæ„Ÿ</p>
</li>
<li>
<p>ä» è…¹ç—› + å°¿è¡€ â†’ èƒ½æ¨æµ‹å‡ºå¾—äº† è‚¾ç»“çŸ³</p>
</li>
</ul>
<p>é€šè¿‡ä¸€ç³»åˆ—è§„åˆ™ç»„åˆï¼Œä¸“å®¶ç³»ç»Ÿèƒ½å¤Ÿæ¨¡æ‹Ÿäººç±»ä¸“å®¶çš„å†³ç­–è¿‡ç¨‹ï¼Œå¹¶åœ¨ç‰¹å®šé¢†åŸŸå–å¾—äº†æ˜¾è‘—æˆæœã€‚</p>
<p>ä½†å®ƒä¹Ÿæœ‰æ˜æ˜¾çš„å±€é™ï¼š</p>
<ol>
<li>
<p>è§„åˆ™éš¾ä»¥ç»Ÿä¸€ï¼šæ¯”å¦‚é¢å¯¹åŒä¸€å¼ è‚¡ç¥¨èµ°åŠ¿å›¾ï¼Œä¸åŒä¸“å®¶å¯èƒ½åšå‡ºå®Œå…¨ç›¸åçš„åˆ¤æ–­ã€‚</p>
</li>
<li>
<p>æ— æ³•è‡ªä¸»å­¦ä¹ ï¼šç³»ç»Ÿæœ¬èº«ä¸å…·å¤‡å­¦ä¹ èƒ½åŠ›ï¼Œä¾èµ–äººå·¥æ›´æ–°è§„åˆ™ã€‚</p>
</li>
</ol>
<p>éšç€ç ”ç©¶çš„æ·±å…¥ï¼Œå¦ä¸€ç§æ€è·¯é€æ¸å…´èµ·ï¼šä¸å…¶é¢„è®¾æ‰€æœ‰è§„åˆ™ï¼Œä¸å¦‚è®©æœºå™¨è‡ªå·±ä»æ•°æ®ä¸­å­¦ä¹ ã€‚è¿™å°±æ˜¯â€œè”ç»“ä¸»ä¹‰â€ï¼ˆConnectionismï¼‰ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€è”ç»“ä¸»ä¹‰ï¼šè®©æœºå™¨è‡ªå·±å­¦ä¹ </h2>
<p>è¿™ç§æ¨¡å¼æœ‰ç‚¹åƒè®­ç‹—ï¼Œä½ è¯´åä¸‹ï¼Œå®ƒåä¸‹ä½ å°±å¥–åŠ±é›¶é£Ÿï¼Œå¦‚æœé”™äº†ï¼Œå°±è·Ÿå®ƒä¸€é£è…¿ï¼Œè¿™æ ·ä½ å°±èƒ½è®­ç»ƒå‡ºä¸€ä¸ªä¼šå¬åä¸‹æŒ‡ä»¤çš„ç‹—äº†ã€‚</p>
<p>æˆ‘ä»¬æŠŠç‹—æ¢æˆæœºå™¨ï¼Œä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼è®­ç»ƒï¼Œè®©å®ƒåœ¨æŸä¸ªä»»åŠ¡ä¸‹å®Œæˆä»»åŠ¡ã€‚ä¾‹å¦‚è¯´ç°åœ¨è¦è®­ç»ƒä¸€ä¸ªèƒ½è¯†åˆ«è‹¹æœå›¾ç‰‡çš„æ™ºèƒ½ã€‚</p>
<h3 data-id="heading-3">ä¸¾ä¾‹ï¼šè¯†åˆ«è‹¹æœ</h3>
<p>é‚£ä¹ˆæœºå™¨è‚¯å®šè¦è¯†åˆ«è‹¹æœçš„ç‰¹å¾ï¼Œæ‰èƒ½åŒºåˆ«åˆ«çš„å›¾ç‰‡ï¼Œå‡è®¾æˆ‘ä»¬è®¾ç½®äº†å¦‚ä¸‹ç»´åº¦</p>
<ul>
<li>
<p>ç›´å¾„: è‹¹æœç›´å¾„å¤§çº¦10cm</p>
</li>
<li>
<p>é¢œè‰²: è‹¹æœæ˜¯çº¢è‰²</p>
</li>
<li>
<p>å½¢çŠ¶: è‹¹æœæ˜¯çƒå½¢</p>
</li>
</ul>
<p>ä¾‹å¦‚åœ¨æŸäº›æ¡ä»¶ä¸‹ï¼Œç›´å¾„ï¼Œé¢œè‰²ï¼Œå½¢çŠ¶éƒ½ç¬¦åˆè‹¹æœç‰¹æ€§çš„æ¡ä»¶ä¸‹ï¼Œæ‰æ˜¯è‹¹æœï¼Œä½†æ˜¯æˆ‘ä»¬ä¹‹å‰è¯´äº†ï¼Œè®¡ç®—æœºåªè®¤è¯†æ•°å­—ï¼Œåªèƒ½é€šè¿‡è®¡ç®—æ¥åˆ¤æ–­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»“åˆä¸€äº›æ•°å­¦å…¬å¼æ¥æŠŠ ç›´å¾„ï¼Œé¢œè‰²ï¼Œå½¢çŠ¶ï¼Œæ˜ å°„ä¸ºæ•°å­—ï¼Œé€šè¿‡æ•°å­—çš„è®¡ç®—æ˜ å°„å®ƒä»¬åœ¨ç°å®ç”Ÿæ´»çš„æ˜¯å¦å¯¹åº”ã€‚</p>
<p>æ—¢ç„¶æ–‡å­—ä¹Ÿå¯ä»¥é€šè¿‡æ•°å­—æ˜ å°„ï¼Œä¾‹å¦‚ 97 ä»£è¡¨æ•°å­— aï¼Œé‚£ä¹ˆå…¶å®ƒå±æ€§ä¹Ÿå¯ä»¥ï¼Œä¾‹å¦‚ï¼ˆæˆ‘ä¹±è¯´çš„ï¼Œå°±æ˜¯è¡¨è¾¾ä¸€ç§æ„æ€ï¼‰ï¼Œæˆ‘ä»¬æŠŠå½¢çŠ¶ï¼Œé¢œè‰²ï¼Œå’Œç›´å¾„ï¼Œéƒ½ç†è§£ä¸ºæƒé‡ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­:</p>
<p>å‡è®¾æˆ‘ä»¬ç»™æ¯ä¸ªç‰¹å¾åˆ†é…ä¸€ä¸ªæƒé‡ï¼ˆweightï¼‰ï¼Œä»£è¡¨è¿™ä¸ªç‰¹å¾å¯¹â€œæ˜¯å¦æ˜¯è‹¹æœâ€çš„é‡è¦ç¨‹åº¦ï¼š</p>
<ul>
<li>
<p>ç›´å¾„ï¼šè‹¹æœç›´å¾„çº¦ 10cm æƒé‡ = +0.6ï¼ˆè¶Šæ¥è¿‘ 10cm è¶Šå¯èƒ½æ˜¯è‹¹æœï¼‰</p>
</li>
<li>
<p>é¢œè‰²ï¼šçº¢è‰²ç¨‹åº¦ï¼ˆ0 ä¸æ˜¯çº¢ï¼Œ1 æ˜¯çº¢ï¼‰ æƒé‡ = +0.3ï¼ˆçº¢è‰²å¯¹åˆ¤æ–­æœ‰è´¡çŒ®ï¼‰</p>
</li>
<li>
<p>å½¢çŠ¶ï¼šçƒå½¢ç¨‹åº¦ï¼ˆ0 ä¸æ˜¯çƒå½¢ï¼Œ1 æ˜¯çƒå½¢ï¼‰ æƒé‡ = +0.4ï¼ˆçƒå½¢å¯¹åˆ¤æ–­æœ‰è´¡çŒ®ï¼‰</p>
</li>
</ul>
<p>ç„¶åï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªç®€å•çš„â€œè‹¹æœå¾—åˆ†â€å…¬å¼ï¼š</p>
<p>è‹¹æœå¾—åˆ†=(ç›´å¾„å¾—åˆ†)Ã—0.6+(é¢œè‰²å¾—åˆ†)Ã—0.3+(å½¢çŠ¶å¾—åˆ†)Ã—0.4</p>
<p>ç„¶åå¾—å‡ºæ¥çš„å€¼ï¼Œå¦‚æœå¤§äº 1 å°±æ˜¯è‹¹æœï¼Œå¦‚æœå°äº 1 å°±ä¸æ˜¯è‹¹æœã€‚</p>
<h3 data-id="heading-4">è®¡ç®—ä¾‹å­</h3>
<p>ä¾‹1ï¼šä¸€ä¸ªçº¢è‹¹æœï¼ˆç›´å¾„ 10cmï¼Œçº¢è‰²ï¼Œçƒå½¢ï¼‰</p>
<ul>
<li>ç›´å¾„å¾—åˆ† = 1</li>
<li>é¢œè‰²å¾—åˆ† = 1</li>
<li>å½¢çŠ¶å¾—åˆ† = 1</li>
</ul>
<p>è‹¹æœå¾—åˆ† = 1Ã—0.6+1Ã—0.3+1Ã—0.4=1.3</p>
<p>ä¾‹2ï¼šä¸€ä¸ªæ©™å­ï¼ˆç›´å¾„ 8cmï¼Œæ©™è‰²ï¼Œçƒå½¢ï¼‰</p>
<ul>
<li>ç›´å¾„å¾—åˆ† = 0.8ï¼ˆå‡è®¾ 8cm ç¦» 10cm å·® 2cmï¼Œå¾—åˆ† 0.8ï¼‰</li>
<li>é¢œè‰²å¾—åˆ† = 0ï¼ˆä¸æ˜¯çº¢è‰²ï¼‰</li>
<li>å½¢çŠ¶å¾—åˆ† = 1</li>
<li/>
</ul>
<p>è‹¹æœå¾—åˆ† = 0.8Ã—0.6+0Ã—0.3+1Ã—0.4=0.48+0.4=0.88</p>
<p>å¤§å®¶åº”è¯¥æ˜ç™½ä¸Šé¢çš„æ„æ€äº†å§ã€‚æˆ‘ä»¬å†æ¬¡æŠ½è±¡ä¸ºæ•°å­¦å…¬å¼ï¼Œä¹Ÿå°±æ˜¯å˜ä¸º 1 æ¬¡å‡½æ•°ã€‚å°†å¾—åˆ†ç”¨ x è¡¨ç¤ºï¼Œå°†æƒé‡ç”¨ w è¡¨ç¤ºï¼Œå¦‚ä¸‹ï¼š</p>
<p><em>z</em> = (<em>w</em>1 Ã— <em>x</em>1) + (<em>w</em>2 Ã— <em>x</em>2) + (<em>w</em>3 Ã— <em>x</em>3) + <em>b</em></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>
<p>w1,w2,w3 æ˜¯å„ç‰¹å¾çš„æƒé‡ï¼ˆé‡è¦æ€§ï¼‰</p>
</li>
<li>
<p>b æ˜¯åç½®é¡¹ï¼ˆå¯ç†è§£ä¸ºåˆ¤æ–­é—¨æ§›ï¼‰</p>
</li>
</ul>
<p>æ‰€ä»¥</p>
<ul>
<li>
<p>å¦‚æœ zâ‰¥0ï¼Œåˆ¤å®šä¸ºè‹¹æœ</p>
</li>
<li>
<p>å¦‚æœ z&lt;0ï¼Œåˆ¤å®šä¸ºéè‹¹æœ</p>
</li>
</ul>
<p>å› ä¸ºæœ‰ w1,w2,w3 3ä¸ªå‚æ•°ï¼Œä¸åˆ©äºæˆ‘ä»¬åé¢çš„è®²è§£ï¼Œæˆ‘ä»¬å†æ¬¡ç®€åŒ–å…¬å¼ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬ç†è§£åé¢çš„æ¦‚å¿µã€‚</p>
<p><em>z</em> = (<em>w</em>1 Ã— <em>x</em>1) + (<em>w</em>2 Ã— <em>x</em>2) + <em>b</em></p>
<p>å˜ä¸ºåªæœ‰ä¸¤ä¸ªå‚æ•°æ¥å†³å®šæ˜¯å¦æ˜¯è‹¹æœï¼Œå…¶å®è¿™æ˜¯è¿™æ˜¯åˆä¸­æ•°å­¦ä¸­çš„ <strong>çº¿æ€§æ–¹ç¨‹</strong>ï¼Œå®ƒçš„å›¾åƒæ˜¯ä¸€æ¡ç›´çº¿ã€‚å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/460c799cbeb34e6aa592ff313d6496c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764049081&amp;x-signature=IOZzjUAdhfch1IA%2FB%2FtnvQ0j7c0%3D" alt="" loading="lazy"/></p>
<p>è¿™æ¡ç›´çº¿ä¸‹æ–¹çš„å°±æ˜¯å°±æ˜¯éè‹¹æœï¼Œä¸Šæ–¹çš„å°±æ˜¯è‹¹æœã€‚</p>
<p>æ¥ä¸‹æ¥æœ‰äººä¼šé—®ï¼Œä½ è¯´å½¢çŠ¶ï¼Œç›´å¾„è¿™äº›ç‰¹å¾çš„å€¼ï¼Œæ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ</p>
<p>å®ƒä»¬å½“ç„¶ä¸æ˜¯å¤©ç„¶å­˜åœ¨çš„ï¼Œè€Œæ˜¯éœ€è¦æˆ‘ä»¬äººä¸ºè®¾è®¡å’Œæå–çš„ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨ä¼ ç»Ÿæœºå™¨å­¦ä¹ ä¸­è¢«ç§°ä¸º â€œç‰¹å¾å·¥ç¨‹â€ã€‚æˆ‘ä»¬åˆè¦ä¸¾ä¸€ä¸ªç²—ç³™çš„ä¾‹å­äº†ï¼Œæˆ‘ä»¬æ‹¿é¢œè‰²å¾—åˆ†æ¥ä¸¾ä¾‹ï¼š</p>
<ul>
<li>
<p>æ€è·¯ï¼š è‹¹æœé€šå¸¸æ˜¯çº¢è‰²ã€ç»¿è‰²æˆ–é»„è‰²ã€‚æˆ‘ä»¬éœ€è¦é‡åŒ–â€œçº¢è‰²ç¨‹åº¦â€ã€‚</p>
</li>
<li>
<p>è®¾è®¡æ–¹æ³•ï¼š</p>
<ul>
<li>
<p>å¦‚æœæ˜¯ä»å›¾ç‰‡ä¸­æå–ï¼š è®¡ç®—æœºå¯ä»¥åˆ†æå›¾ç‰‡çš„æ‰€æœ‰åƒç´ ç‚¹ã€‚</p>
<ul>
<li>å°†å›¾ç‰‡ä»RGBé¢œè‰²ç©ºé—´è½¬æ¢åˆ° HSV é¢œè‰²ç©ºé—´ï¼ˆHä»£è¡¨è‰²è°ƒï¼Œèƒ½æ›´å¥½åœ°è¡¨ç¤ºé¢œè‰²æœ¬èº«ï¼‰ã€‚</li>
<li>ç»Ÿè®¡æ‰€æœ‰åƒç´ ä¸­ï¼Œè‰²è°ƒï¼ˆHï¼‰åœ¨çº¢è‰²èŒƒå›´å†…ï¼ˆæ¯”å¦‚0-10åº¦å’Œ350-360åº¦ï¼‰çš„åƒç´ æ¯”ä¾‹ã€‚æ¯”ä¾‹è¶Šé«˜ï¼Œ<code>x2</code>è¶Šæ¥è¿‘1ã€‚</li>
</ul>
</li>
<li>
<p>å¦‚æœæ˜¯ä»æ–‡å­—æè¿°æå–ï¼š å¦‚æœæˆ‘ä»¬çš„æ•°æ®æ˜¯æ–‡å­—â€œæ·±çº¢è‰²â€ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªé¢œè‰²è¯å…¸ï¼š</p>
<ul>
<li>
<p>â€œæ·±çº¢è‰²â€ -&gt; <code>x2 = 0.9</code></p>
</li>
<li>
<p>â€œæµ…çº¢è‰²â€ -&gt; <code>x2 = 0.7</code></p>
</li>
<li>
<p>â€œç»¿è‰²â€ -&gt; <code>x2 = 0.3</code>ï¼ˆå› ä¸ºé’è‹¹æœä¹Ÿå­˜åœ¨ï¼‰</p>
</li>
<li>
<p>â€œè“è‰²â€ -&gt; <code>x2 = 0</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>å¥½äº†ï¼Œç‰¹å¾å¾—åˆ†æˆ‘ä»¬è§£å†³äº†ï¼Œç„¶åå°±æ˜¯è®­ç»ƒï¼Œè°ƒæ•´ w1 å’Œ w2 å‚æ•°ï¼Œä»è€Œæ‰¾å‡ºä¸€ä¸ªåˆ†ç•Œçº¿ï¼Œåœ¨åˆ†ç•Œçº¿èŒƒå›´å†…çš„å°±æ˜¯è‹¹æœï¼ŒèŒƒå›´å¤–çš„å°±æ˜¯å…¶å®ƒã€‚å½“ç„¶è¿™ä¸ªåˆ†ç•Œçº¿ä¸ä¸€å®šæ˜¯ç›´çº¿ï¼Œä¹Ÿå¯ä»¥æ˜¯å¾ˆå¤æ‚çš„æ›²çº¿èŒƒå›´ï¼Œæˆ‘ä»¬åªæ˜¯ä¸ºäº†å¼•å‡ºæ ¸å¿ƒæ¦‚å¿µï¼Œå°±æ˜¯ï¼š</p>
<p>â€œæœºå™¨å­¦ä¹ â€ï¼</p>
<p>è™½ç„¶æ²¡æœ‰ç›´æ¥è¯´å‡ºâ€œæœºå™¨å­¦ä¹ â€å››ä¸ªå­—ï¼Œä½†å·²ç»å®Œæ•´åœ°æç»˜äº†å®ƒçš„æ ¸å¿ƒæ€æƒ³ï¼šé€šè¿‡æ•°æ®ï¼ˆè‹¹æœçš„ç‰¹å¾ï¼‰å’Œåé¦ˆï¼ˆå¾—åˆ†æ˜¯å¦å¤§äºé˜ˆå€¼ï¼‰ï¼Œè®©æœºå™¨è‡ªåŠ¨è°ƒæ•´å†…éƒ¨å‚æ•°ï¼ˆæƒé‡ w å’Œåç½® bï¼‰ï¼Œä»è€Œå­¦ä¼šä¸€é¡¹ä»»åŠ¡ï¼ˆè¯†åˆ«è‹¹æœï¼‰ã€‚</p>
<p>æˆ‘ä»¬æ¥ç€èŠï¼Œåˆšæ‰æˆ‘ä»¬ä¸¾å¾—ä¾‹å­éå¸¸ç²—ç³™ï¼Œä½†å¯ä»¥å¾ˆå®¹æ˜“çš„ç†è§£å¤§æ¦‚çš„æ„æ€ã€‚</p>
<p>ä¸Šé¢è¿™ç§æœºå™¨å­¦ä¹ çš„æ€è·¯ï¼Œç§°ä¸ºè”ç»“ä¸»ä¹‰ï¼Œå¯è¿™ç§æ€è·¯åœ¨æœ€åˆæ›¾ä¸€åº¦è¢«æ•´ä¸ªä¸–ç•Œç§°ä¸ºéª—å­æ€è·¯ï¼</p>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆæ˜¯éª—å­ï¼Ÿ</h3>
<p>åˆšæ‰æˆ‘ä»¬ä¸¾äº†ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œè®©æœºå™¨æ ¹æ® <strong>ç›´å¾„ã€é¢œè‰²</strong> æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯è‹¹æœã€‚</p>
<p>æˆ‘ä»¬æœ€ç»ˆæŠŠå®ƒæŠ½è±¡æˆä¸€ä¸ªæ•°å­¦å…¬å¼ï¼š</p>
<p><em>z</em> = (<em>w</em>1 Ã— <em>x</em>1) + (<em>w</em>2 Ã— <em>x</em>2) + <em>b</em></p>
<p>æœ¬è´¨ä¸Šï¼Œå®ƒå°±æ˜¯ä¸€ä¸ª<strong>ä¸€æ¬¡å‡½æ•°</strong>ï¼ˆäºŒç»´ä¸‹æ˜¯ä¸€æ¡ç›´çº¿ï¼Œä¸‰ç»´ä¸‹æ˜¯ä¸€å¼ å¹³é¢ï¼‰ã€‚</p>
<p>åœ¨å¾ˆå¤šä»»åŠ¡ä¸­ï¼Œè¿™ç§æ¨¡å‹çœŸçš„èƒ½å·¥ä½œã€‚</p>
<p>æ¯”å¦‚â€œè‹¹æœ vs ä¸æ˜¯è‹¹æœâ€ï¼Œ</p>
<p>å¦‚æœè‹¹æœçš„æ•°æ®å¤§å¤šé›†ä¸­åœ¨åŒä¸€å—åŒºåŸŸï¼Œé‚£ä¹ˆä¸€æ¡ç›´çº¿ï¼ˆæˆ–å¹³é¢ï¼‰ç¡®å®èƒ½æŠŠå®ƒä»¬åŒºåˆ†å¼€æ¥ã€‚</p>
<p>å¦‚æœæœ‰ä¸€ä¸ªä»»åŠ¡ï¼Œæ ¹æœ¬æ— æ³•ç”¨ä¸€æ¡ç›´çº¿åˆ†å¼€å‘¢ï¼Ÿ</p>
<p>ç§‘å­¦å®¶ä»¬å¾ˆå¿«å°±å‘ç°ï¼š</p>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰é—®é¢˜éƒ½åƒè¯†åˆ«è‹¹æœä¸€æ ·ç®€å•ã€‚</p>
<p>å…¶ä¸­æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯ <strong>å¼‚æˆ–</strong> <strong>ï¼ˆ</strong> <strong>XOR</strong> <strong>ï¼‰é—®é¢˜</strong>ã€‚</p>
<p>å…ˆçœ‹ä»€ä¹ˆæ˜¯å¼‚æˆ–ï¼š</p>






























<table><thead><tr><th>è¾“å…¥ A</th><th>è¾“å…¥ B</th><th>è¾“å‡º</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td></tr></tbody></table>
<p>ä¹Ÿå°±æ˜¯è¾“å…¥æ˜¯ä¸€æ ·çš„æƒ…å†µï¼Œä¾‹å¦‚éƒ½æ˜¯ 0 æˆ–è€…éƒ½æ˜¯ 1 ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ 0ï¼Œå¦åˆ™å¾—åˆ°çš„ç»“æœæ˜¯ 1ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•æ‰¾åˆ°ä¸€æ¡ç›´çº¿ï¼Œåˆ†å‰²çº¢è‰²ç‚¹å’Œè“è‰²ç‚¹çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ff3a6c2dbc747b0b20e4e501cd1f22c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764049081&amp;x-signature=BpH509yPUYJd%2FeIoYJV9yTWDriU%3D" alt="" loading="lazy"/></p>
<p>è¿™å°±æ„å‘³ç€ï¼Œç®€å•çš„çº¿æ€§æ¨¡å‹ï¼Œæœ‰äº›æƒ…å†µæ˜¯æ— æ³•æ¨¡æ‹Ÿçš„ï¼</p>
<p>ä¹Ÿå°±æ˜¯è¯´ âŒ å†æ€ä¹ˆè°ƒæ•´ w1ã€w2ã€bï¼Œè¿™ä¸ªæ¨¡å‹ä¹Ÿæ°¸è¿œæ— æ³•å­¦ä¼šå¼‚æˆ–ã€‚</p>
<p>è¿™å¯¼è‡´äº†äººå·¥æ™ºèƒ½å†å²ä¸Šç¬¬ä¸€æ¬¡å¯’å†¬ï¼ˆAI Winterï¼‰ã€‚</p>
<h2 data-id="heading-6">å››ã€çªç ´ï¼šå¼•å…¥éçº¿æ€§ï¼â€”â€” ç¥ç»ç½‘ç»œçš„è¯ç”Ÿ</h2>
<p>åæ¥ç§‘å­¦å®¶ä»¬å‘ç°ï¼š</p>
<blockquote>
<p>å¦‚æœåœ¨ä¸¤ä¸ªçº¿æ€§æ¨¡å‹ä¸­é—´ï¼Œå†åŠ ä¸Šä¸€å±‚â€œéçº¿æ€§å‡½æ•°â€ï¼Œå°±èƒ½è§£å¼€å¼‚æˆ–ã€‚</p>
</blockquote>
<p>ä½ å¯ä»¥æŠŠæ€æƒ³ç†è§£æˆï¼š</p>
<ul>
<li>
<p>ä¸€æ¡ç›´çº¿ä¸èƒ½åˆ†çš„</p>
</li>
<li>
<p>ä¸¤æ¡ç›´çº¿å¯ä»¥</p>
</li>
<li>
<p>è®©æ¨¡å‹åƒæ­ç§¯æœ¨ä¸€æ ·æŠŠâ€œå¤šæ¡ç›´çº¿â€ç»„åˆèµ·æ¥ â†’ å°±èƒ½æ‹¼å‡ºå¤æ‚çš„è¾¹ç•Œ</p>
</li>
</ul>
<p>ä»€ä¹ˆæ„æ€å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç”¨ä¸‹å…¥ç†è§£ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b077caac745476ab67031c27d3debf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764049081&amp;x-signature=5J%2BCcAl8VUuwYuInG8qwrkVRkgQ%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾å³è¾¹ï¼Œæ˜¯ä¸æ˜¯è¾¹ç•Œå˜æˆäº†ä¸æ˜¯ä¸€æ¡ç›´çº¿ï¼Œè€Œæ˜¯ä¸¤ä¸ªæ›²çº¿å»åˆ†å‰²å‘¢ï¼Œå€ŸåŠ©è¿™è¿™ç§æ€è·¯å°±è§£å†³äº†å¼‚æˆ–é—®é¢˜ã€‚</p>
<p>è¿™å°±æ˜¯**ç¥ç»ç½‘ç»œï¼ˆNeural Networkï¼‰**æœ€æ ¸å¿ƒçš„æ€æƒ³ï¼š</p>
<blockquote>
<p>å¤šä¸ªç®€å•æ¨¡å‹å åœ¨ä¸€èµ·ï¼Œä¸­é—´åŠ ä¸Šæ¿€æ´»å‡½æ•°ï¼ˆéçº¿æ€§ï¼‰ï¼Œ å°±èƒ½è¡¨è¾¾æ›´å¤æ‚çš„å†³ç­–è¾¹ç•Œã€‚</p>
</blockquote>
<p>æˆ‘ä»¬ä»å¼€å§‹çš„çº¿æ€§æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯å•å±‚ç»“æ„æ˜¯ï¼š</p>
<p><code>è¾“å…¥ â†’ æƒé‡åŠ æƒ â†’ æ¿€æ´»å‡½æ•° â†’ è¾“å‡º</code></p>
<p>ç®€å•æ¥è¯´å°±æ˜¯è¾“å…¥ x1, x2 çš„å¾—åˆ† â€”&gt; è·Ÿ w1ï¼Œw2 æƒé‡è®¡ç®— -&gt; è·Ÿé˜ˆå€¼å¯¹æ¯”ï¼Œä¾‹å¦‚å¤§äº 1 å°±æ˜¯è‹¹æœ -&gt; è¾“å‡ºæ˜¯å¦æ˜¯è‹¹æœ</p>
<p>ç„¶åå†çœ‹çœ‹æ–°çš„å¤šå±‚ç»“æ„ï¼š</p>
<p><code>è¾“å…¥ â†’ [æƒé‡åŠ æƒ + æ¿€æ´»å‡½æ•°] â†’ [æƒé‡åŠ æƒ + æ¿€æ´»å‡½æ•°] â†’ è¾“å‡º</code></p>
<p>å¥½äº†è‡³æ­¤ï¼Œæˆ‘ä»¬å°±æ˜ç™½äº†ç¥ç»ç½‘ç»œçš„æ¦‚å¿µï¼Œç¥ç»ç½‘ç»œä¹Ÿæ˜¯è”ç»“ä¸»ä¹‰çš„ä¸€éƒ¨åˆ†ã€‚æ­¤æ—¶å†æ¬¡è§£é‡Šä»¥ä¸‹è”ç»“ä¸»ä¹‰çš„ä¸»å¼ ï¼š</p>
<blockquote>
<p>â€œæ™ºèƒ½æ¥è‡ªå¤§é‡ç®€å•å•å…ƒï¼ˆç¥ç»å…ƒï¼‰çš„è¿æ¥å’Œå­¦ä¹ ï¼Œè€Œä¸æ˜¯æ‰‹å†™è§„åˆ™ã€‚â€</p>
</blockquote>
<p>æˆ‘ä»¬å†æ¥ä¸€ä¸ªå°å°ç»“ï¼Œå°±æ˜¯ä»ç¬¦å·ä¸»ä¹‰ï¼Œè¿™ç§ä¾é äººè‡ªèº«å†™è§„åˆ™åˆ°è”ç»“ä¸»ä¹‰ï¼Œåˆ°ç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬é€æ¸æ­¥å…¥äº†æ–°çš„äººå·¥æ™ºèƒ½æ—¶ä»£ã€‚</p>
<h2 data-id="heading-7">äº”ã€ä»ç¥ç»ç½‘ç»œåˆ°æ·±åº¦å­¦ä¹ ï¼šå½“ç½‘ç»œå˜å¾—â€œæ·±ä¸å¯æµ‹â€</h2>
<p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬æ˜ç™½äº†ç¥ç»ç½‘ç»œâ€”â€”å®ƒé€šè¿‡å¤šå±‚è¿æ¥ï¼Œå·§å¦™åœ°è§£å†³äº†ç®€å•æ¨¡å‹æ— æ³•å¤„ç†çš„å¤æ‚é—®é¢˜ï¼ˆå¦‚å¼‚æˆ–é—®é¢˜ï¼‰ã€‚é‚£ä¹ˆï¼Œæ·±åº¦å­¦ä¹ åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å…¶å®ç­”æ¡ˆå‡ºä¹æ„æ–™çš„ç®€å•ï¼š</p>
<p>æ·±åº¦å­¦ä¹  = ç‰¹åˆ«â€œæ·±â€çš„ç¥ç»ç½‘ç»œã€‚</p>
<p>è¿™é‡Œçš„â€œæ·±â€ï¼ŒæŒ‡çš„ä¸æ˜¯å“²å­¦çš„æ·±é‚ƒï¼Œè€Œæ˜¯å­—é¢æ„æ€ä¸Šçš„å±‚æ•°éå¸¸å¤šã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªç›´è§‚çš„å¯¹æ¯”ï¼š</p>
<ul>
<li>
<p>ä¼ ç»Ÿçš„ç¥ç»ç½‘ç»œï¼šå¯èƒ½åªæœ‰å‡ å±‚ï¼ˆæ¯”å¦‚ä¸€ä¸ªè¾“å…¥å±‚ã€ä¸€ä¸ªéšè—å±‚ã€ä¸€ä¸ªè¾“å‡ºå±‚ï¼‰ã€‚å°±åƒä¸€ä¸ªç®€å•çš„ä¸‰æ˜æ²»ã€‚</p>
</li>
<li>
<p>æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼šåˆ™æ‹¥æœ‰åå‡ å±‚ã€ä¸Šç™¾å±‚ç”šè‡³ä¸Šåƒå±‚ã€‚è¿™å°±åƒä¸€ä¸ªå·¨æ— éœ¸æ±‰å ¡ï¼Œæ‹¥æœ‰æ— æ•°å±‚é¦…æ–™å’Œé¢åŒ…ã€‚</p>
</li>
</ul>
<p>ä¸ºä»€ä¹ˆå±‚æ•°å¤šäº†å°±å‰å®³ï¼Ÿ</p>
<p>è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰æ‰‹åŠ¨è®¾è®¡â€œç‰¹å¾â€çš„éº»çƒ¦å—ï¼Ÿï¼ˆæ¯”å¦‚è¦è‡ªå·±å†™è§„åˆ™è®¡ç®—â€œé¢œè‰²å¾—åˆ†â€ã€â€œå½¢çŠ¶å¾—åˆ†â€ï¼‰æ·±åº¦å­¦ä¹ çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œå®ƒèƒ½å¤Ÿè‡ªåŠ¨å®Œæˆè¿™ä»¶äº‹ï¼Œè€Œä¸”åšå¾—æ¯”æˆ‘ä»¬å¥½å¾—å¤šã€‚</p>
<p>æˆ‘ä»¬æ‹¿ä¸€ä¸ªè¯†åˆ«ç‹—çš„ä¾‹å­ä¸¾ä¾‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4888eca8ffd4101a1456e5678916785~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764049081&amp;x-signature=WqgnIE25U0x6jpBX5jQKCkUGe48%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªæ·±åº¦ç½‘ç»œç†è§£æˆä¸€ä¸ªåˆ†å·¥æå…¶ç²¾ç»†çš„æµæ°´çº¿å·¥å‚ï¼Œç”¨æ¥è¯†åˆ«ä¸€å¼ â€œç‹—â€çš„å›¾ç‰‡ï¼š</p>
<ol>
<li>ç¬¬ä¸€å±‚ï¼ˆæœ€åŸºç¡€çš„å·¥äººï¼‰ï¼šåªè´Ÿè´£æ£€æµ‹å›¾åƒä¸­æœ€ç®€å•çš„è¾¹ç¼˜å’Œè‰²å—ã€‚æ¯”å¦‚è¿™é‡Œæ˜¯æ¨ªçº¿ï¼Œé‚£é‡Œæ˜¯ç«–çº¿ï¼Œé‚£ç‰‡æ˜¯é»‘è‰²ã€‚</li>
<li>ä¸­é—´å‡ å±‚ï¼ˆåˆçº§ç»„è£…å·¥ï¼‰ï¼šæ¥æ”¶ä¸‹ä¸€å±‚çš„â€œè¾¹ç¼˜å’Œè‰²å—â€ï¼ŒæŠŠå®ƒä»¬ç»„åˆæˆæ›´å¤æ‚çš„å±€éƒ¨ç‰¹å¾ã€‚æ¯”å¦‚ï¼Œâ€œä¸¤ä¸ªåœ†åœˆâ€å¯èƒ½æ˜¯çœ¼ç›ï¼Œâ€œä¸€ä¸ªä¸‰è§’å½¢â€å¯èƒ½æ˜¯è€³æœµã€‚</li>
<li>æœ€åå±‚ï¼ˆæœ€ç»ˆå†³ç­–è€…ï¼‰ï¼šåŸºäºå‰é¢æ‰€æœ‰å±‚ä¼ é€’è¿‡æ¥çš„ã€å·²ç»é«˜åº¦æŠ½è±¡åŒ–çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚â€œè¿™æ˜¯ä¸€ä¸ªæœ‰èƒ¡é¡»ã€å°–è€³æœµã€ç«–ç³çš„åŠ¨ç‰©é¢éƒ¨â€ï¼‰ï¼Œæœ€ç»ˆåšå‡ºåˆ¤æ–­ï¼šâ€œè¿™æ˜¯ç‹—ã€‚â€</li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±æ˜¯ä¸€ä¸ªâ€œé€å±‚æŠ½è±¡ï¼Œä¸æ–­ç²¾ç‚¼â€çš„è¿‡ç¨‹ã€‚ æ¯ä¸€å±‚éƒ½åœ¨å‰ä¸€å±‚çš„åŸºç¡€ä¸Šï¼Œå­¦ä¹ å¹¶æå–æ›´å¤æ‚ã€æ›´æ ¸å¿ƒçš„ç‰¹å¾ã€‚ç½‘ç»œè¶Šæ·±ï¼Œèƒ½å­¦åˆ°çš„ç‰¹å¾å°±è¶ŠæŠ½è±¡ï¼Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ä¹Ÿå°±è¶Šå¼ºã€‚</p>
<p>åˆ°æ­¤æˆ‘ç›¸ä¿¡å¤§éƒ¨åˆ†åº”è¯¥æ˜ç™½äº†å‡ ä¸ªå¾ˆåŸºç¡€çš„æ¦‚å¿µï¼Œå°±æ˜¯æœºå™¨å­¦ä¹ ï¼Œç¥ç»ç½‘ç»œï¼Œæ·±åº¦å­¦ä¹ çš„æ¦‚å¿µã€‚æˆ‘æ˜¯ä¸€åå‰ç«¯å¼€å‘æŠ€æœ¯ä¸“å®¶ï¼Œç›®å‰é™¤äº†å¼€å§‹æ¥è§¦ ai éƒ¨åˆ†çš„çŸ¥è¯†ï¼Œå‰ç«¯éƒ¨åˆ†æ­£åœ¨å†™å…³äº <a href="https://link.juejin.cn?target=%255Blio-mengxiang.github.io%2Ft-ui%2F%255D(https%3A%2F%2Flio-mengxiang.github.io%2Ft-ui%2F)" target="_blank" title="%5Blio-mengxiang.github.io/t-ui/%5D(https://lio-mengxiang.github.io/t-ui/)" ref="nofollow noopener noreferrer">headless ç»„ä»¶åº“æ•™ç¨‹</a> è¿™æ˜¯ç½‘ç«™é¦–é¡µï¼Œæ¬¢è¿å¤§å®¶ç»™ä¸ªèµå“¦ï¼Œæ„Ÿè°¢ï¼åŒæ—¶ä¹Ÿåœ¨å†™é…·ç‚«çš„åŠ¨ç”»æ•™ç¨‹ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥çœ‹<a href="https://juejin.cn/post/7572157115907375154" target="_blank" title="https://juejin.cn/post/7572157115907375154">è¿™ç¯‡æ–‡ç« </a></p>
<p>ä¸‹ä¸€ç« æˆ‘å°†ç®€å•ä»‹ç»ä¸€ä¸‹ chatgpt çš„åŸºæœ¬åŸç†ï¼Œä¹Ÿæ˜¯é¢ç›¸çº¯å°ç™½ï¼Œä¹Ÿç»å¯¹åŒ…ç¥¨ä½ èƒ½çœ‹æ‡‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªè¶…çº§çœŸå®çš„Three.jsæ ‘ğŸŒ²ç”Ÿæˆå™¨æ’ä»¶]]></title>    <link>https://juejin.cn/post/7573588675638099983</link>    <guid>https://juejin.cn/post/7573588675638099983</guid>    <pubDate>2025-11-18T03:54:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573588675638099983" data-draft-id="7573588675637641231" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªè¶…çº§çœŸå®çš„Three.jsæ ‘ğŸŒ²ç”Ÿæˆå™¨æ’ä»¶"/> <meta itemprop="keywords" content="three.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-18T03:54:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç­”æ¡ˆanswer"/> <meta itemprop="url" content="https://juejin.cn/user/2634865719391869"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªè¶…çº§çœŸå®çš„Three.jsæ ‘ğŸŒ²ç”Ÿæˆå™¨æ’ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634865719391869/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç­”æ¡ˆanswer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-18T03:54:14.000Z" title="Tue Nov 18 2025 03:54:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åˆ†äº«ä¸€ä¸ªåŸºäºThree.jså°è£…çš„æ ‘ç”Ÿæˆå™¨æ’ä»¶ï¼Œå¯ä»¥å®ç°åˆ›å»ºä¸åŒç±»å‹ä¸”æ¸²æŸ“æ•ˆæœçœŸå®çš„3Dæ ‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a739c9d99f34af9b9a7b74a14737f60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg562U5qGIYW5zd2Vy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764042854&amp;x-signature=iqNirUDW51hzE1%2BPTqF%2FpL7l0Jk%3D" alt="11111111111111111111111.gif" loading="lazy"/></p>
<p>è¯´å®è¯ï¼Œç¬¬ä¸€æ¬¡åœ¨è¿™ä¸ª<em>æ’ä»¶å®˜ç½‘</em>çœ‹åˆ°è¿™ä¸ªæ•ˆæœæ—¶æˆ‘ä¸€åº¦ä»¥ä¸ºè¿™åªæ˜¯ä¸€ä¸ª<em>è§†é¢‘</em>ï¼Œæ ‘çš„å†…å®¹ä¸ä»…ä»…æ˜¯åŠ¨æ€çš„è€Œä¸”æ•´ä½“çš„æ¸²æŸ“æ•ˆæœä¹Ÿååˆ†çœŸå®ã€‚</p>
<p>åœ¨three.jsä¸­ä½¿ç”¨èµ·æ¥ä¹Ÿæ˜¯éå¸¸çš„ç®€å•çš„ä»…ä»…éœ€<em>å‡ è¡Œä»£ç </em>å°±å¯ä»¥æå®šï¼Œä¸‹é¢ç»™å¤§å®¶ç®€å•çš„ä»‹ç»ä¸€ä¸‹ã€‚</p>
<h3 data-id="heading-1">å®‰è£…</h3>
<p>é€šè¿‡ npm/pnpm å®‰è£…åˆ°é¡¹ç›®æœ¬åœ°å³å¯</p>
<pre><code class="hljs language-js" lang="js">npm i @dgreenheck/ez-tree

pnpm add @dgreenheck/ez-tree

</code></pre>
<h3 data-id="heading-2">ä½¿ç”¨</h3>
<p>ä½¿ç”¨èµ·æ¥ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ï¼Œåªéœ€è¦å°†æ’ä»¶import å¼•å…¥ç„¶ååœ¨ new å®ä¾‹åŒ–å‡ºæ¥ åœ¨æ·»åŠ åˆ° åœºæ™¯ä¸­å°±å¯ä»¥äº†</p>
<p>æœ€ååœ¨ä¸€ä¸ªrequestAnimationFrame åŠ¨ç”»å‡½æ•°ä¸­æ›´æ–°<strong>æ ‘</strong>çš„å†…å®¹å°±è¡Œäº†</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Tree</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dgreenheck/ez-tree'</span>;

<span class="hljs-title function_">createTree</span>(<span class="hljs-params"/>){

      <span class="hljs-keyword">const</span> tree = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tree</span>();
      tree.<span class="hljs-title function_">generate</span>();
      <span class="hljs-comment">// è®¾ç½®ä¸€ä¸‹ä½ç½®</span>
      tree.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
      <span class="hljs-comment">// è®¾ç½®ä¸€ä¸‹å¤§å°ç¼©æ”¾</span>
      tree.<span class="hljs-property">scale</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">0.1</span>);
      <span class="hljs-comment">// æ·»åŠ åˆ°åœºæ™¯ä¸­</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span>.<span class="hljs-title function_">add</span>(tree);
      
}

  <span class="hljs-title function_">sceneAnimation</span>(): <span class="hljs-keyword">void</span> {
    <span class="hljs-comment">// ç¡®ä¿åŠ¨ç”»å¾ªç¯æŒç»­è¿›è¡Œ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderAnimation</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sceneAnimation</span>());

      <span class="hljs-comment">// æ›´æ–°æ—¶é’Ÿ</span>
      <span class="hljs-keyword">const</span> elapsedTime = <span class="hljs-variable language_">this</span>.<span class="hljs-property">clock</span>.<span class="hljs-title function_">getElapsedTime</span>();


      <span class="hljs-comment">// æ›´æ–°æ§åˆ¶å™¨ å¦‚æœå½“å‰æ˜¯ç¬¬ä¸€äººç§°æ§åˆ¶å™¨åˆ™ä¸æ›´æ–°</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">pointerLockControls</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">controls</span>.<span class="hljs-title function_">update</span>();
      }

      <span class="hljs-comment">// æ›´æ–° Tree åŠ¨æ€æ•ˆæœï¼ˆé£åŠ¨æ•ˆæœç­‰ï¼‰</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tree</span>.<span class="hljs-title function_">update</span>(elapsedTime);
      }
      <span class="hljs-comment">// æ¸²æŸ“åœºæ™¯</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span>.<span class="hljs-title function_">render</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scene</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>);
  }

</code></pre>
<p>æœ¬åœ°é¡¹ç›®æ•ˆæœ</p>
<p>å› ä¸ºæœ¬åœ°é¡¹ç›®å¯¹å…‰ç…§ç­‰å‚æ•°æ²¡æœ‰ä¸“é—¨è°ƒè¯•æ‰€ä»¥å’Œå®˜ç½‘å±•ç¤ºçš„æ•ˆæœæœ‰ä¸€å®šçš„å·®è·</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6728f9c801d40848718d1824f330bd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg562U5qGIYW5zd2Vy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764042854&amp;x-signature=7PwEs1PJX4A8eRbDCmHMm%2B8AfAE%3D" alt="image.png" loading="lazy"/></p>
<p>å°†ç›¸æœºæ”¾å¤§æŸ¥çœ‹æ ‘æ¸²æŸ“çš„æ•ˆæœç»†èŠ‚å¤„ç†ä¸ªäººè§‰å¾—æ˜¯éå¸¸niceçš„ï¼Œååˆ†çœŸå®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ef8af9abe50456d939aa39ff33b9a4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg562U5qGIYW5zd2Vy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764042854&amp;x-signature=vpMyBZLYK3nCr0kswuAemNKZqAY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">å‚æ•°</h3>
<p>è¯¥æ’ä»¶è¿˜æä¾›äº†åˆ›å»ºä¸åŒç±»å‹æ ‘çš„æ–¹æ³•ï¼Œé€šè¿‡å®˜ç½‘çš„åœ¨çº¿è°ƒè¯•å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†</p>
<p>åˆ›å»ºä¸€ä¸ªåˆ«çš„ç±»å‹æ ‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a0b1cc0b4db4e228d2ad1b34a60097f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg562U5qGIYW5zd2Vy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764042854&amp;x-signature=qJn0cr4YP%2FouH7lNfcZ1tjYdOrY%3D" alt="image.png" loading="lazy"/></p>
<p>ä¿®æ”¹æ ‘æçš„æ–¹å‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1372f4e75c4b420ca42967f689e0ac11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg562U5qGIYW5zd2Vy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764042854&amp;x-signature=brwjizkErZBTjkD7TIMduSHCRcs%3D" alt="image.png" loading="lazy"/></p>
<p>æ ‘å¶çš„å¤šå°‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f3a2d1a0ba647199c8c568c30a88012~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg562U5qGIYW5zd2Vy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764042854&amp;x-signature=S8RwmA1NpaY0VH1TDP2QsaMq4Zw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">é¡¹ç›®åœ°å€</h3>
<p>è¯¥é¡¹ç›®æ’ä»¶æ˜¯ä¸€ä¸ªå¤–å›½å¤§ä½¬å¼€å‘ï¼Œå¦‚æœä½ çš„é¡¹ç›®æˆ–è€…ä¸ªäººç½‘ç«™éœ€è¦ä¸°å¯Œä¸€ä¸‹é¡µé¢å†…å®¹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ’ä»¶æˆ–è®¸æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.eztree.dev%2F" target="_blank" title="https://www.eztree.dev/" ref="nofollow noopener noreferrer">www.eztree.dev/</a></p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdgreenheck%2Fez-tree" target="_blank" title="https://github.com/dgreenheck/ez-tree" ref="nofollow noopener noreferrer">github.com/dgreenheck/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·¥ä½œä¸­æœ€å¸¸ç”¨çš„6ç§APIç½‘å…³]]></title>    <link>https://juejin.cn/post/7573594825317253160</link>    <guid>https://juejin.cn/post/7573594825317253160</guid>    <pubDate>2025-11-18T02:18:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573594825317253160" data-draft-id="7573530680887607330" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥ä½œä¸­æœ€å¸¸ç”¨çš„6ç§APIç½‘å…³"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-18T02:18:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥ä½œä¸­æœ€å¸¸ç”¨çš„6ç§APIç½‘å…³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-18T02:18:02.000Z" title="Tue Nov 18 2025 02:18:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>APIç½‘å…³åœ¨é¡¹ç›®ä¸­éå¸¸é‡è¦ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« è·Ÿå¤§å®¶ä¸€èµ·èŠèŠå·¥ä½œæœ€å¸¸ç”¨çš„6ç§ç½‘å…³ï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fwww.susan.net.cn%3Frefer%3Djuejin" title="https://link.juejin.cn/?target=http%3A%2F%2Fwww.susan.net.cn%3Frefer%3Djuejin" target="_blank">æœ€è¿‘å‡†å¤‡é¢è¯•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®è—ç½‘ç«™ï¼ˆJavaçªå‡»é˜Ÿï¼‰ï¼šwww.susan.net.cnï¼Œé‡Œé¢ï¼šé¢è¯•å…«è‚¡æ–‡ã€åœºæ™¯è®¾è®¡é¢˜ã€é¢è¯•çœŸé¢˜ã€7ä¸ªé¡¹ç›®å®æˆ˜ã€å·¥ä½œå†…æ¨ä»€ä¹ˆéƒ½æœ‰</a>ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦APIç½‘å…³ï¼Ÿ</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­å¯èƒ½ä¼šé—®ï¼šæˆ‘ä»¬çš„ç³»ç»Ÿç›´æ¥è°ƒç”¨å¾®æœåŠ¡ä¸æ˜¯æ›´ç®€å•å—ï¼Ÿ</p>
<p>ä¸ºä»€ä¹ˆéè¦å¼•å…¥APIç½‘å…³è¿™ä¸ª"ä¸­é—´å•†"å‘¢ï¼Ÿ</p>
<p>è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ã€‚</p>
<h3 data-id="heading-2">æ²¡æœ‰ç½‘å…³çš„å¾®æœåŠ¡å›°å¢ƒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å‰ç«¯ç›´æ¥è°ƒç”¨å¤šä¸ªå¾®æœåŠ¡ - é—®é¢˜é‡é‡</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FrontendController</span> {
    
    <span class="hljs-comment">// é—®é¢˜1ï¼šæœåŠ¡åœ°å€ç¡¬ç¼–ç </span>
    <span class="hljs-meta">@Value("${user.service.url:http://localhost:8081}")</span>
    <span class="hljs-keyword">private</span> String userServiceUrl;
    
    <span class="hljs-meta">@Value("${order.service.url:http://localhost:8082}")</span>
    <span class="hljs-keyword">private</span> String orderServiceUrl;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RestTemplate restTemplate;
    
    <span class="hljs-meta">@GetMapping("/user-dashboard")</span>
    <span class="hljs-keyword">public</span> UserDashboard <span class="hljs-title function_">getUserDashboard</span><span class="hljs-params">(<span class="hljs-meta">@RequestHeader("Authorization")</span> String token)</span> {
        <span class="hljs-comment">// é—®é¢˜2ï¼šæ¯ä¸ªæœåŠ¡éƒ½è¦é‡å¤è®¤è¯é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (!validateToken(token)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>(<span class="hljs-string">"Token invalid"</span>);
        }
        
        <span class="hljs-comment">// é—®é¢˜3ï¼šéœ€è¦æ‰‹åŠ¨å¤„ç†æœåŠ¡é—´è°ƒç”¨é¡ºåº</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> restTemplate.getForObject(userServiceUrl + <span class="hljs-string">"/users/current"</span>, User.class);
        List&lt;Order&gt; orders = restTemplate.getForObject(orderServiceUrl + <span class="hljs-string">"/orders?userId="</span> + user.getId(), List.class);
        
        <span class="hljs-comment">// é—®é¢˜4ï¼šé”™è¯¯å¤„ç†å¤æ‚</span>
        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span> || orders == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceUnavailableException</span>(<span class="hljs-string">"Backend service unavailable"</span>);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserDashboard</span>(user, orders);
    }
    
    <span class="hljs-comment">// é—®é¢˜5ï¼šé‡å¤çš„è®¤è¯ä»£ç </span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">validateToken</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-comment">// æ¯ä¸ªæ¥å£éƒ½è¦å®ç°çš„è®¤è¯é€»è¾‘</span>
        <span class="hljs-keyword">return</span> token != <span class="hljs-literal">null</span> &amp;&amp; token.startsWith(<span class="hljs-string">"Bearer "</span>);
    }
}
</code></pre>
<h3 data-id="heading-3">å¼•å…¥ç½‘å…³åçš„ä¼˜é›…æ¶æ„</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç½‘å…³ç»Ÿä¸€å¤„ç†æ‰€æœ‰æ¨ªåˆ‡å…³æ³¨ç‚¹</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GatewayConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RouteLocator <span class="hljs-title function_">customRouteLocator</span><span class="hljs-params">(RouteLocatorBuilder builder)</span> {
        <span class="hljs-keyword">return</span> builder.routes()
            .route(<span class="hljs-string">"user_service"</span>, r -&gt; r.path(<span class="hljs-string">"/api/users/**"</span>)
                .uri(<span class="hljs-string">"lb://user-service"</span>))
            .route(<span class="hljs-string">"order_service"</span>, r -&gt; r.path(<span class="hljs-string">"/api/orders/**"</span>)
                .uri(<span class="hljs-string">"lb://order-service"</span>))
            .route(<span class="hljs-string">"product_service"</span>, r -&gt; r.path(<span class="hljs-string">"/api/products/**"</span>)
                .uri(<span class="hljs-string">"lb://product-service"</span>))
            .build();
    }
}

<span class="hljs-comment">// å‰ç«¯åªéœ€è°ƒç”¨ç½‘å…³</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FrontendController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RestTemplate restTemplate;
    
    <span class="hljs-meta">@GetMapping("/api/user-dashboard")</span>
    <span class="hljs-keyword">public</span> UserDashboard <span class="hljs-title function_">getUserDashboard</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ç½‘å…³å·²ç»å¤„ç†äº†è®¤è¯ã€è·¯ç”±ã€è´Ÿè½½å‡è¡¡ç­‰é—®é¢˜</span>
        <span class="hljs-keyword">return</span> restTemplate.getForObject(<span class="hljs-string">"http://gateway/api/users/current/dashboard"</span>, UserDashboard.class);
    }
}
</code></pre>
<h3 data-id="heading-4">APIç½‘å…³çš„æ ¸å¿ƒä»·å€¼</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡æ¶æ„å›¾æ¥ç†è§£ç½‘å…³åœ¨å¾®æœåŠ¡æ¶æ„ä¸­çš„å…³é”®ä½œç”¨ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a0b22cc4a7b42e9a8d3c57431384a95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764037082&amp;x-signature=%2F6VuMccszgnP%2FTxBznc0N7cQApo%3D" alt="" loading="lazy"/></p>
<p><strong>ç½‘å…³è§£å†³çš„8å¤§æ ¸å¿ƒé—®é¢˜ï¼š</strong></p>
<ol>
<li><strong>ç»Ÿä¸€å…¥å£</strong>ï¼šæ‰€æœ‰è¯·æ±‚éƒ½é€šè¿‡ç½‘å…³è¿›å…¥ç³»ç»Ÿ</li>
<li><strong>è®¤è¯æˆæƒ</strong>ï¼šé›†ä¸­å¤„ç†èº«ä»½éªŒè¯å’Œæƒé™æ§åˆ¶</li>
<li><strong>æµé‡æ§åˆ¶</strong>ï¼šé™æµã€ç†”æ–­ã€é™çº§ç­‰ resiliency æ¨¡å¼</li>
<li><strong>ç›‘æ§ç»Ÿè®¡</strong>ï¼šç»Ÿä¸€çš„æ—¥å¿—ã€æŒ‡æ ‡æ”¶é›†</li>
<li><strong>åè®®è½¬æ¢</strong>ï¼šHTTP/1.1ã€HTTP/2ã€gRPC ç­‰åè®®é€‚é…</li>
<li><strong>ç¼“å­˜åŠ é€Ÿ</strong>ï¼šå“åº”ç¼“å­˜é™ä½åç«¯å‹åŠ›</li>
<li><strong>å®‰å…¨é˜²æŠ¤</strong>ï¼šWAFã€é˜²çˆ¬è™«ã€é˜²é‡æ”¾æ”»å‡»</li>
<li><strong>æœåŠ¡æ²»ç†</strong>ï¼šæœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€è·¯ç”±è½¬å‘</li>
</ol>
<p>ä¸‹é¢æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å·¥ä½œä¸­æœ€å¸¸è§çš„6ç§APIç½‘å…³æœ‰å“ªäº›ã€‚</p>
<h2 data-id="heading-5">äºŒã€Spring Cloud Gateway</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨SpringæŠ€æœ¯æ ˆä¸­å¼€å‘å¾®æœåŠ¡ï¼ŒSpring Cloud Gateway æ— ç–‘æ˜¯æœ€è‡ªç„¶çš„é€‰æ‹©ã€‚</p>
<p>ä½œä¸ºSpringå®˜æ–¹æ¨å‡ºçš„ç¬¬äºŒä»£ç½‘å…³ï¼Œå®ƒåŸºäºWebFluxå“åº”å¼ç¼–ç¨‹æ¨¡å‹ï¼Œæ€§èƒ½å“è¶Šã€‚</p>
<h3 data-id="heading-6">æ ¸å¿ƒæ¶æ„æ·±åº¦è§£æ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedGatewayConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Order(-1)</span>
    <span class="hljs-keyword">public</span> GlobalFilter <span class="hljs-title function_">customGlobalFilter</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> (exchange, chain) -&gt; {
            <span class="hljs-comment">// å‰ç½®å¤„ç†</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            <span class="hljs-type">ServerHttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> exchange.getRequest();
            
            <span class="hljs-comment">// æ·»åŠ è¿½è¸ªID</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
            <span class="hljs-type">ServerHttpRequest</span> <span class="hljs-variable">mutatedRequest</span> <span class="hljs-operator">=</span> request.mutate()
                .header(<span class="hljs-string">"X-Trace-Id"</span>, traceId)
                .build();
                
            <span class="hljs-keyword">return</span> chain.filter(exchange.mutate().request(mutatedRequest).build())
                .then(Mono.fromRunnable(() -&gt; {
                    <span class="hljs-comment">// åç½®å¤„ç†</span>
                    <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
                    log.info(<span class="hljs-string">"Request {} completed in {}ms"</span>, traceId, duration);
                }));
        };
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RouteLocator <span class="hljs-title function_">advancedRoutes</span><span class="hljs-params">(RouteLocatorBuilder builder)</span> {
        <span class="hljs-keyword">return</span> builder.routes()
            <span class="hljs-comment">// ç”¨æˆ·æœåŠ¡ - å¸¦ç†”æ–­å’Œé‡è¯•</span>
            .route(<span class="hljs-string">"user_service"</span>, r -&gt; r.path(<span class="hljs-string">"/api/users/**"</span>)
                .filters(f -&gt; f
                    .circuitBreaker(config -&gt; config
                        .setName(<span class="hljs-string">"userServiceCB"</span>)
                        .setFallbackUri(<span class="hljs-string">"forward:/fallback/user-service"</span>))
                    .retry(config -&gt; config
                        .setRetries(<span class="hljs-number">3</span>)
                        .setMethods(HttpMethod.GET, HttpMethod.POST)
                        .setBackoff(<span class="hljs-number">100L</span>, <span class="hljs-number">1000L</span>, <span class="hljs-number">2</span>, <span class="hljs-literal">true</span>))
                    .requestRateLimiter(config -&gt; config
                        .setRateLimiter(redisRateLimiter())
                        .setKeyResolver(apiKeyResolver()))
                    .modifyRequestBody(String.class, String.class, 
                        (exchange, s) -&gt; Mono.just(validateAndTransform(s))))
                .uri(<span class="hljs-string">"lb://user-service"</span>))
            
            <span class="hljs-comment">// è®¢å•æœåŠ¡ - å¸¦JWTè®¤è¯</span>
            .route(<span class="hljs-string">"order_service"</span>, r -&gt; r.path(<span class="hljs-string">"/api/orders/**"</span>)
                .filters(f -&gt; f
                    .filter(jwtAuthenticationFilter())
                    .prefixPath(<span class="hljs-string">"/v1"</span>)
                    .addResponseHeader(<span class="hljs-string">"X-API-Version"</span>, <span class="hljs-string">"1.0"</span>))
                .uri(<span class="hljs-string">"lb://order-service"</span>))
            
            <span class="hljs-comment">// å•†å“æœåŠ¡ - é™æ€èµ„æºç¼“å­˜</span>
            .route(<span class="hljs-string">"product_service"</span>, r -&gt; r.path(<span class="hljs-string">"/api/products/**"</span>)
                .filters(f -&gt; f
                    .dedupeResponseHeader(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"RETAIN_FIRST"</span>)
                    .setResponseHeader(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"public, max-age=3600"</span>))
                .uri(<span class="hljs-string">"lb://product-service"</span>))
            .build();
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> JwtAuthenticationFilter <span class="hljs-title function_">jwtAuthenticationFilter</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JwtAuthenticationFilter</span>();
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisRateLimiter <span class="hljs-title function_">redisRateLimiter</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisRateLimiter</span>(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> KeyResolver <span class="hljs-title function_">apiKeyResolver</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> exchange -&gt; {
            <span class="hljs-type">String</span> <span class="hljs-variable">apiKey</span> <span class="hljs-operator">=</span> exchange.getRequest().getHeaders().getFirst(<span class="hljs-string">"X-API-Key"</span>);
            <span class="hljs-keyword">return</span> Mono.just(Optional.ofNullable(apiKey).orElse(<span class="hljs-string">"anonymous"</span>));
        };
    }
}

<span class="hljs-comment">// JWTè®¤è¯è¿‡æ»¤å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtAuthenticationFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">GatewayFilter</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JwtUtil jwtUtil;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Mono&lt;Void&gt; <span class="hljs-title function_">filter</span><span class="hljs-params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> extractToken(exchange.getRequest());
        
        <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> onError(exchange, <span class="hljs-string">"Missing authentication token"</span>, HttpStatus.UNAUTHORIZED);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> jwtUtil.parseToken(token);
            <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> claims.getSubject();
            
            <span class="hljs-comment">// å°†ç”¨æˆ·ä¿¡æ¯æ·»åŠ åˆ°header</span>
            <span class="hljs-type">ServerHttpRequest</span> <span class="hljs-variable">mutatedRequest</span> <span class="hljs-operator">=</span> exchange.getRequest().mutate()
                .header(<span class="hljs-string">"X-User-Name"</span>, username)
                .header(<span class="hljs-string">"X-User-Roles"</span>, String.join(<span class="hljs-string">","</span>, claims.get(<span class="hljs-string">"roles"</span>, List.class)))
                .build();
                
            <span class="hljs-keyword">return</span> chain.filter(exchange.mutate().request(mutatedRequest).build());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">return</span> onError(exchange, <span class="hljs-string">"Invalid token: "</span> + e.getMessage(), HttpStatus.UNAUTHORIZED);
        }
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractToken</span><span class="hljs-params">(ServerHttpRequest request)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">bearerToken</span> <span class="hljs-operator">=</span> request.getHeaders().getFirst(<span class="hljs-string">"Authorization"</span>);
        <span class="hljs-keyword">if</span> (StringUtils.hasText(bearerToken) &amp;&amp; bearerToken.startsWith(<span class="hljs-string">"Bearer "</span>)) {
            <span class="hljs-keyword">return</span> bearerToken.substring(<span class="hljs-number">7</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-keyword">private</span> Mono&lt;Void&gt; <span class="hljs-title function_">onError</span><span class="hljs-params">(ServerWebExchange exchange, String err, HttpStatus status)</span> {
        exchange.getResponse().setStatusCode(status);
        <span class="hljs-type">DataBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> exchange.getResponse().bufferFactory()
            .wrap((<span class="hljs-string">"{\"error\":\""</span> + err + <span class="hljs-string">"\"}"</span>).getBytes());
        <span class="hljs-keyword">return</span> exchange.getResponse().writeWith(Mono.just(buffer));
    }
}
</code></pre>
<h3 data-id="heading-7">Spring Cloud Gateway æ‰§è¡Œæµç¨‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3aadd8f06f84f65ba665baa24a1b4e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764037082&amp;x-signature=QtfTLKG7jroFTug4l3ISQ3WvaKY%3D" alt="" loading="lazy"/></p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>ä¸Spring Cloudç”Ÿæ€å®Œç¾é›†æˆ</li>
<li>åŸºäºWebFluxï¼Œæ€§èƒ½ä¼˜ç§€</li>
<li>åŠŸèƒ½ä¸°å¯Œï¼Œæ”¯æŒè¿‡æ»¤å™¨å’Œæ–­è¨€</li>
<li>é…ç½®çµæ´»ï¼Œæ”¯æŒä»£ç å’Œé…ç½®æ–‡ä»¶ä¸¤ç§æ–¹å¼</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>å¯¹éSpringæŠ€æœ¯æ ˆä¸å‹å¥½</li>
<li>å­¦ä¹ æ›²çº¿ç›¸å¯¹é™¡å³­</li>
<li>ä¾èµ–Spring Cloudç»„ä»¶</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>Spring Cloudå¾®æœåŠ¡æ¶æ„</li>
<li>éœ€è¦æ·±åº¦å®šåˆ¶ç½‘å…³é€»è¾‘</li>
<li>å›¢é˜Ÿç†Ÿæ‚‰SpringæŠ€æœ¯æ ˆ</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€Kongï¼šä¼ä¸šçº§APIç½‘å…³æ ‡æ†</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨ä¼ä¸šçº§åœºæ™¯ä¸­éœ€è¦æ›´é«˜çš„æ€§èƒ½å’Œæ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼ŒKongå°±æ˜¯è¿™æ ·ä¸€ä¸ªåŸºäºNginxå’ŒOpenRestyçš„é«˜æ€§èƒ½APIç½‘å…³ã€‚</p>
<h3 data-id="heading-9">Kong é…ç½®å®æˆ˜</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># kong.yml - å£°æ˜å¼é…ç½®</span>
<span class="hljs-attr">_format_version:</span> <span class="hljs-string">"2.1"</span>
<span class="hljs-attr">_transform:</span> <span class="hljs-literal">true</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">user-service</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">http://user-service:8080</span>
    <span class="hljs-attr">routes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">user-route</span>
        <span class="hljs-attr">paths:</span> [<span class="hljs-string">"/api/users"</span>]
        <span class="hljs-attr">strip_path:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">plugins:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">key-auth</span>
        <span class="hljs-attr">config:</span>
          <span class="hljs-attr">key_names:</span> [<span class="hljs-string">"apikey"</span>]
          <span class="hljs-attr">hide_credentials:</span> <span class="hljs-literal">true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">rate-limiting</span>
        <span class="hljs-attr">config:</span>
          <span class="hljs-attr">minute:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">policy:</span> <span class="hljs-string">redis</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">order-service</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">http://order-service:8080</span>
    <span class="hljs-attr">routes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">order-route</span>
        <span class="hljs-attr">paths:</span> [<span class="hljs-string">"/api/orders"</span>]
        <span class="hljs-attr">methods:</span> [<span class="hljs-string">"GET"</span>, <span class="hljs-string">"POST"</span>, <span class="hljs-string">"PUT"</span>]
    <span class="hljs-attr">plugins:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">cors</span>
        <span class="hljs-attr">config:</span>
          <span class="hljs-attr">origins:</span> [<span class="hljs-string">"https://example.com"</span>]
          <span class="hljs-attr">methods:</span> [<span class="hljs-string">"GET"</span>, <span class="hljs-string">"POST"</span>, <span class="hljs-string">"PUT"</span>]
          <span class="hljs-attr">headers:</span> [<span class="hljs-string">"Accept"</span>, <span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Content-Type"</span>]
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">request-transformer</span>
        <span class="hljs-attr">config:</span>
          <span class="hljs-attr">add:</span>
            <span class="hljs-attr">headers:</span> [<span class="hljs-string">"X-From-Kong: true"</span>]
          <span class="hljs-attr">remove:</span>
            <span class="hljs-attr">headers:</span> [<span class="hljs-string">"User-Agent"</span>]

<span class="hljs-attr">consumers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">username:</span> <span class="hljs-string">mobile-app</span>
    <span class="hljs-attr">keyauth_credentials:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">mobile-key-123</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">username:</span> <span class="hljs-string">web-app</span>
    <span class="hljs-attr">keyauth_credentials:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">web-key-456</span>

<span class="hljs-attr">plugins:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">ip-restriction</span>
    <span class="hljs-attr">config:</span>
      <span class="hljs-attr">allow:</span> [<span class="hljs-string">"192.168.0.0/16"</span>, <span class="hljs-string">"10.0.0.0/8"</span>]
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">correlation-id</span>
    <span class="hljs-attr">config:</span>
      <span class="hljs-attr">header_name:</span> <span class="hljs-string">"X-Request-ID"</span>
      <span class="hljs-attr">generator:</span> <span class="hljs-string">"uuid"</span>
</code></pre>
<h3 data-id="heading-10">è‡ªå®šä¹‰Kongæ’ä»¶å¼€å‘</h3>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- kong/plugins/request-validator/handler.lua</span>
<span class="hljs-keyword">local</span> BasePlugin = <span class="hljs-built_in">require</span> <span class="hljs-string">"kong.plugins.base_plugin"</span>
<span class="hljs-keyword">local</span> cjson = <span class="hljs-built_in">require</span> <span class="hljs-string">"cjson"</span>

<span class="hljs-keyword">local</span> RequestValidator = BasePlugin:extend()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RequestValidator:new</span><span class="hljs-params">()</span></span>
  RequestValidator.super.new(<span class="hljs-built_in">self</span>, <span class="hljs-string">"request-validator"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RequestValidator:access</span><span class="hljs-params">(conf)</span></span>
  RequestValidator.super.access(<span class="hljs-built_in">self</span>)
  
  <span class="hljs-keyword">local</span> headers = kong.request.get_headers()
  <span class="hljs-keyword">local</span> method = kong.request.get_method()
  <span class="hljs-keyword">local</span> body = kong.request.get_raw_body()
  
  <span class="hljs-comment">-- API KeyéªŒè¯</span>
  <span class="hljs-keyword">local</span> api_key = headers[<span class="hljs-string">"X-API-Key"</span>]
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> api_key <span class="hljs-keyword">then</span>
    kong.response.<span class="hljs-built_in">exit</span>(<span class="hljs-number">401</span>, { message = <span class="hljs-string">"Missing API Key"</span> })
  <span class="hljs-keyword">end</span>
  
  <span class="hljs-comment">-- éªŒè¯API Keyæ ¼å¼</span>
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">string</span>.<span class="hljs-built_in">match</span>(api_key, <span class="hljs-string">"^%x%x%x%-%x%x%x%-%x%x%x$"</span>) <span class="hljs-keyword">then</span>
    kong.response.<span class="hljs-built_in">exit</span>(<span class="hljs-number">401</span>, { message = <span class="hljs-string">"Invalid API Key format"</span> })
  <span class="hljs-keyword">end</span>
  
  <span class="hljs-comment">-- è¯·æ±‚ä½“éªŒè¯</span>
  <span class="hljs-keyword">if</span> method == <span class="hljs-string">"POST"</span> <span class="hljs-keyword">or</span> method == <span class="hljs-string">"PUT"</span> <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> body <span class="hljs-keyword">or</span> body == <span class="hljs-string">""</span> <span class="hljs-keyword">then</span>
      kong.response.<span class="hljs-built_in">exit</span>(<span class="hljs-number">400</span>, { message = <span class="hljs-string">"Request body is required"</span> })
    <span class="hljs-keyword">end</span>
    
    <span class="hljs-keyword">local</span> ok, json_body = <span class="hljs-built_in">pcall</span>(cjson.decode, body)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ok <span class="hljs-keyword">then</span>
      kong.response.<span class="hljs-built_in">exit</span>(<span class="hljs-number">400</span>, { message = <span class="hljs-string">"Invalid JSON format"</span> })
    <span class="hljs-keyword">end</span>
    
    <span class="hljs-comment">-- ä¸šåŠ¡è§„åˆ™éªŒè¯</span>
    <span class="hljs-keyword">if</span> json_body.amount <span class="hljs-keyword">and</span> <span class="hljs-built_in">tonumber</span>(json_body.amount) &lt;= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      kong.response.<span class="hljs-built_in">exit</span>(<span class="hljs-number">400</span>, { message = <span class="hljs-string">"Amount must be greater than 0"</span> })
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
  
  <span class="hljs-comment">-- æ·»åŠ éªŒè¯é€šè¿‡æ ‡è®°</span>
  kong.service.request.set_header(<span class="hljs-string">"X-Request-Validated"</span>, <span class="hljs-string">"true"</span>)
  kong.service.request.set_header(<span class="hljs-string">"X-API-Key"</span>, api_key)
  
  <span class="hljs-comment">-- è®°å½•å®¡è®¡æ—¥å¿—</span>
  kong.<span class="hljs-built_in">log</span>.info(<span class="hljs-string">"Request validated for API Key: "</span>, api_key)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> RequestValidator
</code></pre>
<h3 data-id="heading-11">Kong é›†ç¾¤æ¶æ„</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/042215d4aa9143c1858568a990d14aef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764037082&amp;x-signature=wwnNcgipQSgGkYWRfLBgA49TWoU%3D" alt="" loading="lazy"/></p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>åŸºäºNginxï¼Œæ€§èƒ½æé«˜</li>
<li>æ’ä»¶ç”Ÿæ€ä¸°å¯Œ</li>
<li>æ”¯æŒé›†ç¾¤éƒ¨ç½²</li>
<li>æˆç†Ÿçš„ç›‘æ§å’Œç®¡ç†ç•Œé¢</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>ä¾èµ–æ•°æ®åº“ï¼ˆPostgreSQL/Cassandraï¼‰</li>
<li>æ’ä»¶å¼€å‘éœ€è¦LuaçŸ¥è¯†</li>
<li>é…ç½®ç›¸å¯¹å¤æ‚</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>é«˜å¹¶å‘ä¼ä¸šçº§åº”ç”¨</li>
<li>éœ€è¦ä¸°å¯Œæ’ä»¶åŠŸèƒ½çš„åœºæ™¯</li>
<li>å·²æœ‰KongæŠ€æœ¯æ ˆçš„å›¢é˜Ÿ</li>
</ul>
<p>æœ€è¿‘ä¸ºäº†å¸®åŠ©å¤§å®¶æ‰¾å·¥ä½œï¼Œä¸“é—¨å»ºäº†ä¸€äº›å·¥ä½œå†…æ¨ç¾¤ï¼Œå„å¤§åŸå¸‚éƒ½æœ‰ï¼Œæ¬¢è¿å„ä½HRå’Œæ‰¾å·¥ä½œçš„å°ä¼™ä¼´è¿›ç¾¤äº¤æµï¼Œç¾¤é‡Œç›®å‰å·²ç»æ”¶é›†äº†ä¸å°‘çš„å·¥ä½œå†…æ¨å²—ä½ã€‚åŠ è‹ä¸‰çš„å¾®ä¿¡ï¼šli_su223ï¼Œå¤‡æ³¨ï¼šæ˜é‡‘+æ‰€åœ¨åŸå¸‚ï¼Œå³å¯è¿›ç¾¤ã€‚</p>
<h2 data-id="heading-12">å››ã€Nginxï¼šç»å…¸åå‘ä»£ç†ç½‘å…³</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨ä¼ ç»Ÿæ¶æ„æˆ–ç®€å•åœºæ™¯ä¸­ï¼ŒNginxä»ç„¶æ˜¯æœ€å¯é çš„é€‰æ‹©ã€‚å®ƒè™½ç„¶åŠŸèƒ½ç›¸å¯¹ç®€å•ï¼Œä½†æ€§èƒ½å“è¶Šä¸”ç¨³å®šã€‚</p>
<h3 data-id="heading-13">Nginx é…ç½®è¯¦è§£</h3>
<pre><code class="hljs language-nginx" lang="nginx"># nginx.conf - ç”Ÿäº§ç¯å¢ƒé…ç½®
http {
    # åŸºç¡€é…ç½®
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    
    # æ—¥å¿—æ ¼å¼
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for" '
                    'rt=$request_time uct="$upstream_connect_time" '
                    'uht="$upstream_header_time" urt="$upstream_response_time"';
    
    # ä¸Šæ¸¸æœåŠ¡é…ç½®
    upstream user_service {
        server user-service-1:8080 weight=3;
        server user-service-2:8080 weight=2;
        server user-service-3:8080 weight=1;
        
        # å¥åº·æ£€æŸ¥
        check interval=3000 rise=2 fall=3 timeout=1000;
    }
    
    upstream order_service {
        server order-service-1:8080;
        server order-service-2:8080;
        
        # ä¼šè¯ä¿æŒ
        hash $cookie_jsessionid;
        hash_again 1;
    }
    
    upstream product_service {
        server product-service:8080;
        
        # å¤‡ä»½æœåŠ¡å™¨
        server backup-product-service:8080 backup;
    }
    
    # APIç½‘å…³é…ç½®
    server {
        listen 80;
        server_name api.example.com;
        
        # å…¨å±€é™æµ
        limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
        
        # ç”¨æˆ·æœåŠ¡è·¯ç”±
        location /api/users/ {
            limit_req zone=api burst=20 nodelay;
            
            # åå‘ä»£ç†é…ç½®
            proxy_pass http://user_service;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            
            # è¶…æ—¶é…ç½®
            proxy_connect_timeout 5s;
            proxy_read_timeout 10s;
            proxy_send_timeout 10s;
            
            # é‡è¯•æœºåˆ¶
            proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
            proxy_next_upstream_tries 3;
            proxy_next_upstream_timeout 10s;
            
            # ç¼“å­˜é…ç½®
            proxy_cache api_cache;
            proxy_cache_key "$scheme$request_method$host$request_uri";
            proxy_cache_valid 200 302 5m;
            proxy_cache_valid 404 1m;
            
            # æ·»åŠ å®‰å…¨å¤´
            add_header X-Frame-Options DENY;
            add_header X-Content-Type-Options nosniff;
            add_header X-XSS-Protection "1; mode=block";
        }
        
        # è®¢å•æœåŠ¡è·¯ç”±
        location /api/orders/ {
            # JWTéªŒè¯
            auth_request /auth;
            auth_request_set $user $upstream_http_x_user;
            proxy_set_header X-User $user;
            
            proxy_pass http://order_service;
            
            # CORSé…ç½®
            if ($request_method = 'OPTIONS') {
                add_header 'Access-Control-Allow-Origin' '*';
                add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
                add_header 'Access-Control-Allow-Headers' 'Authorization,Content-Type';
                add_header 'Access-Control-Max-Age' 86400;
                return 204;
            }
        }
        
        # è®¤è¯ç«¯ç‚¹
        location = /auth {
            internal;
            proxy_pass http://auth_service/validate;
            proxy_pass_request_body off;
            proxy_set_header Content-Length "";
            proxy_set_header X-Original-URI $request_uri;
        }
        
        # å¥åº·æ£€æŸ¥ç«¯ç‚¹
        location /health {
            access_log off;
            return 200 "healthy\n";
            add_header Content-Type text/plain;
        }
        
        # ç›‘æ§ç«¯ç‚¹
        location /nginx-status {
            stub_status on;
            access_log off;
            allow 192.168.0.0/16;
            deny all;
        }
    }
}
</code></pre>
<h3 data-id="heading-14">Nginx è¯·æ±‚å¤„ç†æµç¨‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f50f62bc7b0b4bc1a61dd9709981392c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764037082&amp;x-signature=Y1BjLK0V5lj0S%2F7NiZjTwuF%2B%2BxQ%3D" alt="" loading="lazy"/></p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>æ€§èƒ½æé«˜ï¼ŒCè¯­è¨€ç¼–å†™</li>
<li>é…ç½®ç›¸å¯¹ç®€å•</li>
<li>èµ„æºæ¶ˆè€—ä½</li>
<li>ç¤¾åŒºæˆç†Ÿï¼Œèµ„æ–™ä¸°å¯Œ</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>åŠ¨æ€é…ç½®èƒ½åŠ›å¼±</li>
<li>åŠŸèƒ½ç›¸å¯¹åŸºç¡€</li>
<li>éœ€è¦reloadç”Ÿæ•ˆé…ç½®å˜æ›´</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>é«˜æ€§èƒ½è¦æ±‚çš„ç®€å•è·¯ç”±</li>
<li>é™æ€èµ„æºæœåŠ¡</li>
<li>ä¼ ç»Ÿæ¶æ„å‡çº§</li>
</ul>
<h2 data-id="heading-15">äº”ã€APISIXï¼šäº‘åŸç”ŸAPIç½‘å…³æ–°æ˜Ÿ</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­éœ€è¦åŠ¨æ€é…ç½®å’Œé«˜æ€§èƒ½ï¼ŒAPISIXå°±æ˜¯è¿™æ ·ä¸€ä¸ªåŸºäºetcdçš„äº‘åŸç”ŸAPIç½‘å…³ã€‚</p>
<h3 data-id="heading-16">APISIX è·¯ç”±é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># apisix-config.yaml</span>
<span class="hljs-attr">routes:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">uri:</span> <span class="hljs-string">/api/users/*</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">user-service</span>
    <span class="hljs-attr">methods:</span> [<span class="hljs-string">GET</span>, <span class="hljs-string">POST</span>, <span class="hljs-string">PUT</span>, <span class="hljs-string">DELETE</span>]
    <span class="hljs-attr">upstream:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">roundrobin</span>
      <span class="hljs-attr">nodes:</span>
        <span class="hljs-attr">user-service-1:8080:</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">user-service-2:8080:</span> <span class="hljs-number">2</span>
        <span class="hljs-attr">user-service-3:8080:</span> <span class="hljs-number">1</span>
    <span class="hljs-attr">plugins:</span>
      <span class="hljs-attr">proxy-rewrite:</span>
        <span class="hljs-attr">uri:</span> <span class="hljs-string">"/users$1"</span>
      <span class="hljs-attr">limit-count:</span>
        <span class="hljs-attr">count:</span> <span class="hljs-number">100</span>
        <span class="hljs-attr">time_window:</span> <span class="hljs-number">60</span>
        <span class="hljs-attr">key:</span> <span class="hljs-string">remote_addr</span>
        <span class="hljs-attr">rejected_code:</span> <span class="hljs-number">503</span>
      <span class="hljs-attr">jwt-auth:</span>
        <span class="hljs-attr">key:</span> <span class="hljs-string">user-service</span>
        <span class="hljs-attr">secret:</span> <span class="hljs-string">my-secret-key</span>
        <span class="hljs-attr">exp:</span> <span class="hljs-number">86400</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">uri:</span> <span class="hljs-string">/api/orders/*</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">order-service</span>  
    <span class="hljs-attr">upstream:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">chash</span>
      <span class="hljs-attr">key:</span> <span class="hljs-string">arg_user_id</span>
      <span class="hljs-attr">nodes:</span>
        <span class="hljs-attr">order-service-1:8080:</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">order-service-2:8080:</span> <span class="hljs-number">1</span>
    <span class="hljs-attr">plugins:</span>
      <span class="hljs-attr">cors:</span>
        <span class="hljs-attr">allow_origins:</span> <span class="hljs-string">"https://example.com"</span>
        <span class="hljs-attr">allow_methods:</span> <span class="hljs-string">"GET,POST,PUT,DELETE"</span>
        <span class="hljs-attr">allow_headers:</span> <span class="hljs-string">"*"</span>
      <span class="hljs-attr">response-rewrite:</span>
        <span class="hljs-attr">body:</span> <span class="hljs-string">'{"code": 0, "message": "success", "data": $body}'</span>
      <span class="hljs-attr">fault-injection:</span>
        <span class="hljs-attr">abort:</span>
          <span class="hljs-attr">http_status:</span> <span class="hljs-number">500</span>
          <span class="hljs-attr">body:</span> <span class="hljs-string">"service unavailable"</span>
          <span class="hljs-attr">percentage:</span> <span class="hljs-number">5</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">uri:</span> <span class="hljs-string">/api/products/*</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">product-service</span>
    <span class="hljs-attr">upstream:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">roundrobin</span>
      <span class="hljs-attr">nodes:</span>
        <span class="hljs-attr">product-service:8080:</span> <span class="hljs-number">1</span>
    <span class="hljs-attr">plugins:</span>
      <span class="hljs-attr">proxy-cache:</span>
        <span class="hljs-attr">cache_key:</span> [<span class="hljs-string">"$uri"</span>, <span class="hljs-string">"$args"</span>]
        <span class="hljs-attr">cache_zone:</span> <span class="hljs-string">disk_cache_one</span>
        <span class="hljs-attr">cache_ttl:</span> <span class="hljs-number">300</span>
      <span class="hljs-attr">uri-blocker:</span>
        <span class="hljs-attr">block_rules:</span> [<span class="hljs-string">"^/admin/"</span>, <span class="hljs-string">".php$"</span>]
        <span class="hljs-attr">rejected_code:</span> <span class="hljs-number">403</span>

<span class="hljs-comment"># å…¨å±€æ’ä»¶</span>
<span class="hljs-attr">plugins:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">prometheus</span>
    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">zipkin</span>
    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">config:</span>
      <span class="hljs-attr">endpoint:</span> <span class="hljs-string">http://zipkin:9411/api/v2/spans</span>
      <span class="hljs-attr">sample_ratio:</span> <span class="hljs-number">0.001</span>
</code></pre>
<h3 data-id="heading-17">APISIX æ’ä»¶å¼€å‘</h3>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- apisix/plugins/rate-limit-advanced/init.lua</span>
<span class="hljs-keyword">local</span> core = <span class="hljs-built_in">require</span>(<span class="hljs-string">"apisix.core"</span>)
<span class="hljs-keyword">local</span> plugin_name = <span class="hljs-string">"rate-limit-advanced"</span>

<span class="hljs-keyword">local</span> schema = {
    <span class="hljs-built_in">type</span> = <span class="hljs-string">"object"</span>,
    properties = {
        rate = {<span class="hljs-built_in">type</span> = <span class="hljs-string">"integer"</span>, minimum = <span class="hljs-number">1</span>},
        burst = {<span class="hljs-built_in">type</span> = <span class="hljs-string">"integer"</span>, minimum = <span class="hljs-number">0</span>},
        key = {<span class="hljs-built_in">type</span> = <span class="hljs-string">"string"</span>},
        window = {<span class="hljs-built_in">type</span> = <span class="hljs-string">"integer"</span>, minimum = <span class="hljs-number">1</span>},
        rejected_code = {<span class="hljs-built_in">type</span> = <span class="hljs-string">"integer"</span>, default = <span class="hljs-number">429</span>},
        rejected_msg = {<span class="hljs-built_in">type</span> = <span class="hljs-string">"string"</span>, default = <span class="hljs-string">"rate limit exceeded"</span>}
    },
    required = {<span class="hljs-string">"rate"</span>, <span class="hljs-string">"key"</span>}
}

<span class="hljs-keyword">local</span> _M = {
    version = <span class="hljs-number">1.0</span>,
    priority = <span class="hljs-number">1000</span>,
    name = plugin_name,
    schema = schema,
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_M.check_schema</span><span class="hljs-params">(conf)</span></span>
    <span class="hljs-keyword">return</span> core.schema.check(schema, conf)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_M.access</span><span class="hljs-params">(conf, ctx)</span></span>
    <span class="hljs-keyword">local</span> key = conf.key
    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"remote_addr"</span> <span class="hljs-keyword">then</span>
        key = ctx.var.remote_addr
    <span class="hljs-keyword">elseif</span> key == <span class="hljs-string">"server_addr"</span> <span class="hljs-keyword">then</span>
        key = ctx.var.server_addr
    <span class="hljs-keyword">end</span>
    
    <span class="hljs-keyword">local</span> rate = conf.rate
    <span class="hljs-keyword">local</span> burst = conf.burst <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>
    <span class="hljs-keyword">local</span> window = conf.window <span class="hljs-keyword">or</span> <span class="hljs-number">60</span>
    
    <span class="hljs-comment">-- ä½¿ç”¨redisè¿›è¡Œåˆ†å¸ƒå¼é™æµ</span>
    <span class="hljs-keyword">local</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">"resty.redis"</span>)
    <span class="hljs-keyword">local</span> red = redis:new()
    
    <span class="hljs-keyword">local</span> ok, err = red:connect(<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">6379</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ok <span class="hljs-keyword">then</span>
        core.<span class="hljs-built_in">log</span>.<span class="hljs-built_in">error</span>(<span class="hljs-string">"failed to connect to redis: "</span>, err)
        <span class="hljs-keyword">return</span> <span class="hljs-number">500</span>
    <span class="hljs-keyword">end</span>
    
    <span class="hljs-keyword">local</span> current_time = ngx.now()
    <span class="hljs-keyword">local</span> key_name = <span class="hljs-string">"rate_limit:"</span> .. key
    
    <span class="hljs-comment">-- ä½¿ç”¨ä»¤ç‰Œæ¡¶ç®—æ³•</span>
    <span class="hljs-keyword">local</span> tokens = red:get(key_name)
    <span class="hljs-keyword">if</span> tokens <span class="hljs-keyword">then</span>
        tokens = <span class="hljs-built_in">tonumber</span>(tokens)
    <span class="hljs-keyword">else</span>
        tokens = burst
    <span class="hljs-keyword">end</span>
    
    <span class="hljs-keyword">local</span> last_update = red:get(key_name .. <span class="hljs-string">":time"</span>)
    <span class="hljs-keyword">if</span> last_update <span class="hljs-keyword">then</span>
        last_update = <span class="hljs-built_in">tonumber</span>(last_update)
        <span class="hljs-keyword">local</span> elapsed = current_time - last_update
        <span class="hljs-keyword">local</span> new_tokens = elapsed * rate / window
        
        <span class="hljs-keyword">if</span> new_tokens &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
            tokens = <span class="hljs-built_in">math</span>.<span class="hljs-built_in">min</span>(tokens + new_tokens, burst)
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
    
    <span class="hljs-keyword">if</span> tokens &lt; <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
        red:setex(key_name .. <span class="hljs-string">":time"</span>, window, current_time)
        <span class="hljs-keyword">return</span> conf.rejected_code, conf.rejected_msg
    <span class="hljs-keyword">end</span>
    
    tokens = tokens - <span class="hljs-number">1</span>
    red:setex(key_name, window, tokens)
    red:setex(key_name .. <span class="hljs-string">":time"</span>, window, current_time)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> _M
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>é…ç½®çƒ­æ›´æ–°ï¼Œæ— éœ€é‡å¯</li>
<li>æ€§èƒ½å“è¶Š</li>
<li>æ’ä»¶ç”Ÿæ€ä¸°å¯Œ</li>
<li>äº‘åŸç”Ÿå‹å¥½</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>ç›¸å¯¹è¾ƒæ–°ï¼Œç”Ÿæ€ä¸å¦‚Kongæˆç†Ÿ</li>
<li>ä¾èµ–etcd</li>
<li>å­¦ä¹ æˆæœ¬è¾ƒé«˜</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>äº‘åŸç”Ÿç¯å¢ƒ</li>
<li>éœ€è¦åŠ¨æ€é…ç½®çš„åœºæ™¯</li>
<li>é«˜æ€§èƒ½è¦æ±‚çš„å¾®æœåŠ¡æ¶æ„</li>
</ul>
<h2 data-id="heading-18">å…­ã€Zuulï¼šNetflixç»å…¸ç½‘å…³</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨ä¼ ç»ŸSpring Cloudé¡¹ç›®ä¸­å¯èƒ½è¿˜åœ¨ä½¿ç”¨Zuulï¼Œè™½ç„¶å®ƒå·²è¢«Spring Cloud Gatewayå–ä»£ï¼Œä½†äº†è§£å…¶åŸç†ä»æœ‰ä»·å€¼ã€‚</p>
<h3 data-id="heading-19">Zuul è¿‡æ»¤å™¨å®æˆ˜</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Zuulå‰ç½®è¿‡æ»¤å™¨ - è®¤è¯å’Œé™æµ</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthPreFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ZuulFilter</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RateLimiterService rateLimiter;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JwtTokenProvider tokenProvider;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">filterType</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"pre"</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">filterOrder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">shouldFilter</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">run</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ZuulException {
        <span class="hljs-type">RequestContext</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> RequestContext.getCurrentContext();
        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> ctx.getRequest();
        
        <span class="hljs-comment">// 1. é™æµæ£€æŸ¥</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">clientId</span> <span class="hljs-operator">=</span> getClientId(request);
        <span class="hljs-keyword">if</span> (!rateLimiter.tryAcquire(clientId)) {
            ctx.setSendZuulResponse(<span class="hljs-literal">false</span>);
            ctx.setResponseStatusCode(<span class="hljs-number">429</span>);
            ctx.setResponseBody(<span class="hljs-string">"{\"error\": \"Rate limit exceeded\"}"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-comment">// 2. JWTè®¤è¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> extractToken(request);
        <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span> &amp;&amp; requiresAuth(request)) {
            ctx.setSendZuulResponse(<span class="hljs-literal">false</span>);
            ctx.setResponseStatusCode(<span class="hljs-number">401</span>);
            ctx.setResponseBody(<span class="hljs-string">"{\"error\": \"Authentication required\"}"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-keyword">if</span> (token != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> tokenProvider.parseToken(token);
                ctx.addZuulRequestHeader(<span class="hljs-string">"X-User-Id"</span>, claims.getSubject());
                ctx.addZuulRequestHeader(<span class="hljs-string">"X-User-Roles"</span>, 
                    String.join(<span class="hljs-string">","</span>, claims.get(<span class="hljs-string">"roles"</span>, List.class)));
            } <span class="hljs-keyword">catch</span> (Exception e) {
                ctx.setSendZuulResponse(<span class="hljs-literal">false</span>);
                ctx.setResponseStatusCode(<span class="hljs-number">401</span>);
                ctx.setResponseBody(<span class="hljs-string">"{\"error\": \"Invalid token\"}"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
        }
        
        <span class="hljs-comment">// 3. æ·»åŠ è¿½è¸ªä¿¡æ¯</span>
        ctx.addZuulRequestHeader(<span class="hljs-string">"X-Request-ID"</span>, UUID.randomUUID().toString());
        ctx.addZuulRequestHeader(<span class="hljs-string">"X-Forwarded-For"</span>, request.getRemoteAddr());
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getClientId</span><span class="hljs-params">(HttpServletRequest request)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">apiKey</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"X-API-Key"</span>);
        <span class="hljs-keyword">return</span> apiKey != <span class="hljs-literal">null</span> ? apiKey : request.getRemoteAddr();
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractToken</span><span class="hljs-params">(HttpServletRequest request)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">bearerToken</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"Authorization"</span>);
        <span class="hljs-keyword">if</span> (bearerToken != <span class="hljs-literal">null</span> &amp;&amp; bearerToken.startsWith(<span class="hljs-string">"Bearer "</span>)) {
            <span class="hljs-keyword">return</span> bearerToken.substring(<span class="hljs-number">7</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">requiresAuth</span><span class="hljs-params">(HttpServletRequest request)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> request.getRequestURI();
        <span class="hljs-keyword">return</span> !path.startsWith(<span class="hljs-string">"/api/public/"</span>) &amp;&amp; 
               !path.equals(<span class="hljs-string">"/health"</span>) &amp;&amp; 
               !path.startsWith(<span class="hljs-string">"/actuator/"</span>);
    }
}

<span class="hljs-comment">// Zuulåç½®è¿‡æ»¤å™¨ - å“åº”å¤„ç†</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponsePostFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ZuulFilter</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(ResponsePostFilter.class);
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">filterType</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"post"</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">filterOrder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1000</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">shouldFilter</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">run</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ZuulException {
        <span class="hljs-type">RequestContext</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> RequestContext.getCurrentContext();
        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> ctx.getRequest();
        <span class="hljs-type">HttpServletResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> ctx.getResponse();
        
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> (Long) ctx.get(<span class="hljs-string">"startTime"</span>);
        <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
        
        <span class="hljs-comment">// è®°å½•è®¿é—®æ—¥å¿—</span>
        logger.info(<span class="hljs-string">"{} {} {} {} {}ms"</span>, 
            request.getRemoteAddr(),
            request.getMethod(),
            request.getRequestURI(),
            response.getStatus(),
            duration);
        
        <span class="hljs-comment">// æ·»åŠ å“åº”å¤´</span>
        response.setHeader(<span class="hljs-string">"X-Response-Time"</span>, duration + <span class="hljs-string">"ms"</span>);
        response.setHeader(<span class="hljs-string">"X-API-Version"</span>, <span class="hljs-string">"1.0"</span>);
        
        <span class="hljs-comment">// ç»Ÿä¸€å“åº”æ ¼å¼</span>
        <span class="hljs-keyword">if</span> (ctx.getResponseBody() != <span class="hljs-literal">null</span> &amp;&amp; 
            response.getContentType() != <span class="hljs-literal">null</span> &amp;&amp; 
            response.getContentType().contains(<span class="hljs-string">"application/json"</span>)) {
            
            <span class="hljs-type">String</span> <span class="hljs-variable">originalBody</span> <span class="hljs-operator">=</span> ctx.getResponseBody();
            <span class="hljs-type">String</span> <span class="hljs-variable">wrappedBody</span> <span class="hljs-operator">=</span> <span class="hljs-string">"{\"code\": 0, \"data\": "</span> + originalBody + <span class="hljs-string">", \"timestamp\": "</span> + 
                System.currentTimeMillis() + <span class="hljs-string">"}"</span>;
            ctx.setResponseBody(wrappedBody);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>ä¸Netflixé›†æˆè‰¯å¥½</li>
<li>è¿‡æ»¤å™¨æœºåˆ¶çµæ´»</li>
<li>æ–‡æ¡£èµ„æ–™ä¸°å¯Œ</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>æ€§èƒ½è¾ƒå·®ï¼ˆé˜»å¡IOï¼‰</li>
<li>å·²è¢«Spring Cloud Gatewayå–ä»£</li>
<li>ç¤¾åŒºæ´»è·ƒåº¦ä¸‹é™</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>é—ç•™Spring Cloudé¡¹ç›®</li>
<li>NetflixæŠ€æœ¯æ ˆ</li>
<li>éæ€§èƒ½æ•æ„Ÿåœºæ™¯</li>
</ul>
<h2 data-id="heading-20">ä¸ƒã€Traefikï¼šäº‘åŸç”ŸåŠ¨æ€ç½‘å…³</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å®¹å™¨åŒ–ç¯å¢ƒä¸­éœ€è¦è‡ªåŠ¨æœåŠ¡å‘ç°ï¼ŒTraefikå°±æ˜¯ä¸ºäº‘åŸç”Ÿè€Œç”Ÿçš„åŠ¨æ€ç½‘å…³ã€‚</p>
<h3 data-id="heading-21">Traefik é…ç½®ç¤ºä¾‹</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># traefik.yaml</span>
<span class="hljs-attr">api:</span>
  <span class="hljs-attr">dashboard:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">insecure:</span> <span class="hljs-literal">true</span>

<span class="hljs-attr">entryPoints:</span>
  <span class="hljs-attr">web:</span>
    <span class="hljs-attr">address:</span> <span class="hljs-string">":80"</span>
    <span class="hljs-attr">http:</span>
      <span class="hljs-attr">redirections:</span>
        <span class="hljs-attr">entryPoint:</span>
          <span class="hljs-attr">to:</span> <span class="hljs-string">websecure</span>
          <span class="hljs-attr">scheme:</span> <span class="hljs-string">https</span>
          
  <span class="hljs-attr">websecure:</span>
    <span class="hljs-attr">address:</span> <span class="hljs-string">":443"</span>

<span class="hljs-attr">certificatesResolvers:</span>
  <span class="hljs-attr">myresolver:</span>
    <span class="hljs-attr">acme:</span>
      <span class="hljs-attr">email:</span> <span class="hljs-string">admin@example.com</span>
      <span class="hljs-attr">storage:</span> <span class="hljs-string">/etc/traefik/acme.json</span>
      <span class="hljs-attr">httpChallenge:</span>
        <span class="hljs-attr">entryPoint:</span> <span class="hljs-string">web</span>

<span class="hljs-attr">providers:</span>
  <span class="hljs-attr">docker:</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"unix:///var/run/docker.sock"</span>
    <span class="hljs-attr">exposedByDefault:</span> <span class="hljs-literal">false</span>
    
  <span class="hljs-attr">file:</span>
    <span class="hljs-attr">filename:</span> <span class="hljs-string">/etc/traefik/dynamic.yaml</span>
    <span class="hljs-attr">watch:</span> <span class="hljs-literal">true</span>

<span class="hljs-attr">log:</span>
  <span class="hljs-attr">level:</span> <span class="hljs-string">INFO</span>

<span class="hljs-attr">accessLog:</span>
  <span class="hljs-attr">filePath:</span> <span class="hljs-string">"/var/log/traefik/access.log"</span>
  <span class="hljs-attr">bufferingSize:</span> <span class="hljs-number">100</span>

<span class="hljs-attr">metrics:</span>
  <span class="hljs-attr">prometheus:</span>
    <span class="hljs-attr">entryPoint:</span> <span class="hljs-string">websecure</span>

<span class="hljs-comment"># åŠ¨æ€é…ç½®</span>
<span class="hljs-comment"># dynamic.yaml</span>
<span class="hljs-attr">http:</span>
  <span class="hljs-attr">middlewares:</span>
    <span class="hljs-comment"># è®¤è¯ä¸­é—´ä»¶</span>
    <span class="hljs-attr">auth-middleware:</span>
      <span class="hljs-attr">basicAuth:</span>
        <span class="hljs-attr">users:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">"admin:$2y$05$YOUR_HASHED_PASSWORD"</span>
          
    <span class="hljs-comment"># é™æµä¸­é—´ä»¶  </span>
    <span class="hljs-attr">rate-limit-middleware:</span>
      <span class="hljs-attr">rateLimit:</span>
        <span class="hljs-attr">burst:</span> <span class="hljs-number">100</span>
        <span class="hljs-attr">period:</span> <span class="hljs-string">1m</span>
        
    <span class="hljs-comment"># é‡è¯•ä¸­é—´ä»¶</span>
    <span class="hljs-attr">retry-middleware:</span>
      <span class="hljs-attr">retry:</span>
        <span class="hljs-attr">attempts:</span> <span class="hljs-number">3</span>
        
    <span class="hljs-comment"># ç†”æ–­ä¸­é—´ä»¶</span>
    <span class="hljs-attr">circuit-breaker-middleware:</span>
      <span class="hljs-attr">circuitBreaker:</span>
        <span class="hljs-attr">expression:</span> <span class="hljs-string">"NetworkErrorRatio() &gt; 0.5"</span>
        
    <span class="hljs-comment"># å‹ç¼©ä¸­é—´ä»¶</span>
    <span class="hljs-attr">compress-middleware:</span>
      <span class="hljs-attr">compress:</span> {}

  <span class="hljs-attr">routers:</span>
    <span class="hljs-comment"># ç”¨æˆ·æœåŠ¡è·¯ç”±</span>
    <span class="hljs-attr">user-service:</span>
      <span class="hljs-attr">rule:</span> <span class="hljs-string">"PathPrefix(`/api/users`)"</span>
      <span class="hljs-attr">entryPoints:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">websecure</span>
      <span class="hljs-attr">middlewares:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">rate-limit-middleware</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">compress-middleware</span>
      <span class="hljs-attr">service:</span> <span class="hljs-string">user-service</span>
      <span class="hljs-attr">tls:</span>
        <span class="hljs-attr">certResolver:</span> <span class="hljs-string">myresolver</span>
        
    <span class="hljs-comment"># è®¢å•æœåŠ¡è·¯ç”±  </span>
    <span class="hljs-attr">order-service:</span>
      <span class="hljs-attr">rule:</span> <span class="hljs-string">"PathPrefix(`/api/orders`)"</span>
      <span class="hljs-attr">entryPoints:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">websecure</span>
      <span class="hljs-attr">middlewares:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">auth-middleware</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">rate-limit-middleware</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">circuit-breaker-middleware</span>
      <span class="hljs-attr">service:</span> <span class="hljs-string">order-service</span>
      <span class="hljs-attr">tls:</span>
        <span class="hljs-attr">certResolver:</span> <span class="hljs-string">myresolver</span>

  <span class="hljs-attr">services:</span>
    <span class="hljs-attr">user-service:</span>
      <span class="hljs-attr">loadBalancer:</span>
        <span class="hljs-attr">servers:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">"http://user-service-1:8080"</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">"http://user-service-2:8080"</span>
        <span class="hljs-attr">healthCheck:</span>
          <span class="hljs-attr">path:</span> <span class="hljs-string">/health</span>
          <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
          <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
          
    <span class="hljs-attr">order-service:</span>
      <span class="hljs-attr">loadBalancer:</span>
        <span class="hljs-attr">servers:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">"http://order-service-1:8080"</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">"http://order-service-2:8080"</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨æœåŠ¡å‘ç°</li>
<li>é…ç½®ç®€å•</li>
<li>äº‘åŸç”Ÿå‹å¥½</li>
<li>å†…ç½®ç›‘æ§å’ŒDashboard</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>åŠŸèƒ½ç›¸å¯¹ç®€å•</li>
<li>æ€§èƒ½ä¸å¦‚Nginxç³»ç½‘å…³</li>
<li>é«˜çº§åŠŸèƒ½éœ€è¦ä¼ä¸šç‰ˆ</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å®¹å™¨åŒ–ç¯å¢ƒ</li>
<li>éœ€è¦è‡ªåŠ¨æœåŠ¡å‘ç°çš„åœºæ™¯</li>
<li>å¿«é€ŸåŸå‹å¼€å‘</li>
</ul>
<h2 data-id="heading-22">å…«ã€6å¤§ç½‘å…³å¯¹æ¯”</h2>
<p>é€šè¿‡å‰é¢çš„åˆ†æï¼Œæˆ‘ä»¬ç°åœ¨å¯¹è¿™å…­ç§APIç½‘å…³æœ‰äº†æ·±å…¥çš„äº†è§£ã€‚</p>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…¨é¢çš„å¯¹æ¯”æ¥å¸®åŠ©å¤§å®¶åšå‡ºæ­£ç¡®çš„æŠ€æœ¯é€‰å‹ã€‚</p>
<h3 data-id="heading-23">è¯¦ç»†å¯¹æ¯”è¡¨æ ¼</h3>













































































<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th>Spring Cloud Gateway</th><th>Kong</th><th>Nginx</th><th>APISIX</th><th>Zuul</th><th>Traefik</th></tr></thead><tbody><tr><td><strong>æ€§èƒ½</strong></td><td>é«˜ï¼ˆWebFluxï¼‰</td><td>æé«˜ï¼ˆNginxï¼‰</td><td>æé«˜ï¼ˆCï¼‰</td><td>æé«˜ï¼ˆNginxï¼‰</td><td>ä¸­ï¼ˆé˜»å¡IOï¼‰</td><td>ä¸­</td></tr><tr><td><strong>é…ç½®æ–¹å¼</strong></td><td>ä»£ç /é…ç½®</td><td>å£°æ˜å¼YAML</td><td>é…ç½®æ–‡ä»¶</td><td>åŠ¨æ€é…ç½®</td><td>ä»£ç /é…ç½®</td><td>åŠ¨æ€é…ç½®</td></tr><tr><td><strong>æœåŠ¡å‘ç°</strong></td><td>Spring Cloud</td><td>æ’ä»¶æ”¯æŒ</td><td>éœ€æ‰‹åŠ¨é…ç½®</td><td>æ”¯æŒ</td><td>Spring Cloud</td><td>è‡ªåŠ¨å‘ç°</td></tr><tr><td><strong>K8sæ”¯æŒ</strong></td><td>è‰¯å¥½</td><td>è‰¯å¥½</td><td>éœ€Ingress</td><td>ä¼˜ç§€</td><td>ä¸€èˆ¬</td><td>ä¼˜ç§€</td></tr><tr><td><strong>ç›‘æ§</strong></td><td>Micrometer</td><td>Prometheus</td><td>åŸºç¡€ç›‘æ§</td><td>Prometheus</td><td>Hystrix</td><td>å†…ç½®</td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>ä¸­</td><td>ä¸­é«˜</td><td>ä½</td><td>ä¸­é«˜</td><td>ä¸­</td><td>ä½</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>Spring Cloud</td><td>ä¼ä¸šçº§</td><td>ä¼ ç»Ÿæ¶æ„</td><td>äº‘åŸç”Ÿ</td><td>ä¼ ç»ŸSpring</td><td>å®¹å™¨åŒ–</td></tr></tbody></table>
<h3 data-id="heading-24">é€‰å‹å†³ç­–æŒ‡å—</h3>
<p><strong>é€‰æ‹©Spring Cloud Gatewayå½“ï¼š</strong></p>
<ul>
<li>æŠ€æœ¯æ ˆä»¥Springä¸ºä¸»</li>
<li>éœ€è¦æ·±åº¦å®šåˆ¶ç½‘å…³é€»è¾‘</li>
<li>å·²ç»ä½¿ç”¨Spring Cloudç»„ä»¶</li>
<li>å›¢é˜Ÿç†Ÿæ‚‰å“åº”å¼ç¼–ç¨‹</li>
</ul>
<p><strong>é€‰æ‹©Kongå½“ï¼š</strong></p>
<ul>
<li>ä¼ä¸šçº§é«˜å¹¶å‘åœºæ™¯</li>
<li>éœ€è¦ä¸°å¯Œæ’ä»¶ç”Ÿæ€</li>
<li>æœ‰ä¸“ä¸šè¿ç»´å›¢é˜Ÿ</li>
<li>éœ€è¦æˆç†Ÿçš„ç®¡ç†ç•Œé¢</li>
</ul>
<p><strong>é€‰æ‹©Nginxå½“ï¼š</strong></p>
<ul>
<li>æ€§èƒ½è¦æ±‚æé«˜</li>
<li>åœºæ™¯ç›¸å¯¹ç®€å•</li>
<li>å›¢é˜Ÿç†Ÿæ‚‰Nginx</li>
<li>èµ„æºå—é™ç¯å¢ƒ</li>
</ul>
<p><strong>é€‰æ‹©APISIXå½“ï¼š</strong></p>
<ul>
<li>äº‘åŸç”Ÿç¯å¢ƒ</li>
<li>éœ€è¦åŠ¨æ€é…ç½®</li>
<li>è¿½æ±‚æœ€æ–°æŠ€æœ¯</li>
<li>é«˜æ€§èƒ½è¦æ±‚</li>
</ul>
<p><strong>é€‰æ‹©Zuulå½“ï¼š</strong></p>
<ul>
<li>ç»´æŠ¤é—ç•™Spring Cloudé¡¹ç›®</li>
<li>NetflixæŠ€æœ¯æ ˆ</li>
<li>éæ€§èƒ½æ•æ„Ÿåœºæ™¯</li>
</ul>
<p><strong>é€‰æ‹©Traefikå½“ï¼š</strong></p>
<ul>
<li>å®¹å™¨åŒ–éƒ¨ç½²</li>
<li>éœ€è¦è‡ªåŠ¨æœåŠ¡å‘ç°</li>
<li>å¿«é€Ÿå¼€å‘éƒ¨ç½²</li>
<li>é…ç½®ç®€å•è¦æ±‚</li>
</ul>
<h2 data-id="heading-25">æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯¹6ç§ä¸»æµAPIç½‘å…³æœ‰äº†å…¨é¢çš„è®¤è¯†ã€‚</p>
<p>åœ¨é€‰æ‹©ç½‘å…³æ—¶éœ€è¦è€ƒè™‘ä»¥ä¸‹å…³é”®å› ç´ ï¼š</p>
<ol>
<li><strong>æŠ€æœ¯æ ˆåŒ¹é…</strong>ï¼šé€‰æ‹©ä¸å›¢é˜ŸæŠ€æœ¯æ ˆæœ€åŒ¹é…çš„æ–¹æ¡ˆ</li>
<li><strong>æ€§èƒ½è¦æ±‚</strong>ï¼šæ ¹æ®ä¸šåŠ¡å¹¶å‘é‡é€‰æ‹©æ€§èƒ½åˆé€‚çš„ç½‘å…³</li>
<li><strong>åŠŸèƒ½éœ€æ±‚</strong>ï¼šè¯„ä¼°éœ€è¦çš„åŠŸèƒ½ç‰¹æ€§ï¼Œå¦‚é™æµã€è®¤è¯ã€ç›‘æ§ç­‰</li>
<li><strong>è¿ç»´æˆæœ¬</strong>ï¼šè€ƒè™‘éƒ¨ç½²ã€ç›‘æ§ã€ç»´æŠ¤çš„å¤æ‚åº¦</li>
<li><strong>å›¢é˜Ÿèƒ½åŠ›</strong>ï¼šè¯„ä¼°å›¢é˜Ÿå¯¹ç½‘å…³æŠ€æœ¯çš„æŒæ¡ç¨‹åº¦</li>
</ol>
<h3 data-id="heading-26">æ ¸å¿ƒå»ºè®®</h3>
<ol>
<li><strong>æ–°é¡¹ç›®ä¼˜å…ˆè€ƒè™‘</strong>ï¼šSpring Cloud Gatewayï¼ˆSpringæŠ€æœ¯æ ˆï¼‰æˆ– APISIXï¼ˆäº‘åŸç”Ÿï¼‰</li>
<li><strong>é«˜å¹¶å‘åœºæ™¯</strong>ï¼šKong æˆ– Nginx</li>
<li><strong>å¿«é€ŸåŸå‹</strong>ï¼šTraefik</li>
<li><strong>é—ç•™ç³»ç»Ÿ</strong>ï¼šæ ¹æ®ç°æœ‰æŠ€æœ¯æ ˆé€‰æ‹©</li>
</ol>
<p>è®°ä½ï¼Œæ²¡æœ‰æœ€å¥½çš„ç½‘å…³ï¼Œåªæœ‰æœ€åˆé€‚çš„ç½‘å…³ã€‚</p>
<p>åˆç†çš„ç½‘å…³é€‰å‹å¯ä»¥å¤§å¤§æå‡ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œæ€§èƒ½è¡¨ç°ã€‚</p>
<h2 data-id="heading-27">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SOLO Coder å®è·µï½œç»™å¼€æºäº‘ç›˜ Cloudreve åŠ ä¸ª AI å¯¹è¯åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7573592127298240562</link>    <guid>https://juejin.cn/post/7573592127298240562</guid>    <pubDate>2025-11-18T02:56:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573592127298240562" data-draft-id="7573589277004054566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SOLO Coder å®è·µï½œç»™å¼€æºäº‘ç›˜ Cloudreve åŠ ä¸ª AI å¯¹è¯åŠŸèƒ½"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-18T02:56:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TRAE_ai"/> <meta itemprop="url" content="https://juejin.cn/user/3048259110571032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SOLO Coder å®è·µï½œç»™å¼€æºäº‘ç›˜ Cloudreve åŠ ä¸ª AI å¯¹è¯åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048259110571032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TRAE_ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-18T02:56:14.000Z" title="Tue Nov 18 2025 02:56:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/749b11d4371d4c8d9db419e6002f45bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=78kZMcKhdgLFxm8MEM9PpzEXJ3Q%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>ä½œè€…ä»‹ç»ï¼šåˆ˜æ˜Ÿè¾°ï¼ŒTRAE æŠ€æœ¯ä¸“å®¶</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d535a33641e14520857916eff5bb3bec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=a%2FQJZ%2FQY3mdn6dDP3kPUUCdltb0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>é¡¹ç›®èƒŒæ™¯</strong></h2>
<h3 data-id="heading-1"><strong>Cloudreve ç®€ä»‹</strong></h3>
<p><strong>é¡¹ç›®åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcloudreve%2Fcloudreve" target="_blank" title="https://github.com/cloudreve/cloudreve" ref="nofollow noopener noreferrer">github.com/cloudreve/câ€¦</a></p>
<p>Cloudreve æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„<strong>è‡ªæ‰˜ç®¡æ–‡ä»¶ç®¡ç†ä¸åˆ†äº«ç³»ç»Ÿ</strong>ï¼Œæ”¯æŒå°†æ–‡ä»¶å­˜å‚¨åˆ°å¤šç§äº‘æœåŠ¡ï¼ˆå¦‚æœ¬åœ°å­˜å‚¨ã€S3ã€OneDriveã€é˜¿é‡Œäº‘ OSSã€è…¾è®¯ COS ç­‰ï¼‰ã€‚è¯¥é¡¹ç›®æä¾›äº†å®Œæ•´çš„<strong>ç½‘é¡µç‰ˆç½‘ç›˜ä½“éªŒ</strong>ï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ã€åœ¨çº¿é¢„è§ˆã€åˆ†äº«é“¾æ¥ã€å¤šç”¨æˆ·ä¸åˆ†ç»„ç®¡ç†ï¼Œä»¥åŠ WebDAV æ¥å…¥ç­‰åŠŸèƒ½ã€‚</p>
<p><strong>é¡¹ç›®äº®ç‚¹åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>
<p>æ”¯æŒå¤šç§äº‘å­˜å‚¨æœåŠ¡çš„ç»Ÿä¸€ç®¡ç†</p>
</li>
<li>
<p>å‰åç«¯ä¸€ä½“åŒ–çš„è‡ªéƒ¨ç½²æ–¹æ¡ˆï¼ˆGo + React æŠ€æœ¯æ ˆï¼‰</p>
</li>
<li>
<p>æ–‡ä»¶åŠ å¯†ã€å‹ç¼©ã€æ–­ç‚¹ç»­ä¼ ã€åœ¨çº¿é¢„è§ˆç­‰åŠŸèƒ½é½å…¨</p>
</li>
<li>
<p>é€‚ç”¨äºä¸ªäººç½‘ç›˜ã€å›¢é˜Ÿæ–‡ä»¶åä½œã€è½»é‡çº§ç§æœ‰äº‘ç­‰åœºæ™¯</p>
</li>
</ul>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong> ğŸŒ©ï¸ Cloudreve æ˜¯ä¸€ä¸ªå¼€æºçš„ã€å¯è‡ªå·±æ­å»ºçš„å¤šäº‘æ–‡ä»¶ç®¡ç†å¹³å°ï¼Œè®©ä½ æ‹¥æœ‰å±äºè‡ªå·±çš„ã€Œç½‘ç›˜ç³»ç»Ÿã€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d08a57f7abc4bb181e0c73b6b3efb62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=F6PKwP4M0c06mO%2F9q6CLcx2ORCI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf5c0109a0db4f279ca542a3a54a5f6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=BFSrSB8pLgq%2BQ%2Bfo%2B2E5%2B9mSf68%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>é¡¹ç›®ç†è§£</strong></h2>
<p>é¢å¯¹ä¸€ä¸ªé™Œç”Ÿçš„å¼€æºé¡¹ç›®ï¼Œå¦‚ä½•å¿«é€Ÿä¸Šæ‰‹ï¼Ÿå¯ä»¥ç›´æ¥æŠŠé—®é¢˜äº¤ç»™ SOLO Coderï¼Œè®©å®ƒæŠŠå¤æ‚çš„é¡¹ç›®æ‹†è§£ä¸ºå¯ç†è§£çš„æ¨¡å—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/344587d235224e0d8d7c3987949168bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=llbRSP3KUJJz1nSjzlrcz4tdBD4%3D" alt="" loading="lazy"/></p>
<p>æ ¹æ®ä»»åŠ¡æ‹†è§£ï¼ŒCoder å†™äº† 6 ç¯‡æŠ€æœ¯æŠ¥å‘Šï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c75b056c81fc418bbc9086826b2c89b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=payXeh7PkBbW7lEMBVd2Xm5vd8k%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆéœ€è¦ç†è§£é¡¹ç›®çš„å®è§‚ç»“æ„ã€‚Coder ç»˜åˆ¶äº†æ•´ä½“æ¶æ„åˆ†ææ–‡æ¡£ï¼Œæ¶µç›–æŠ€æœ¯æ ˆã€éƒ¨ç½²æ–¹å¼å’Œæ•°æ®æµç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1214c883383a4896b1768bca7f43b310~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=hs1y0GhCbgFkHwU1azRvxixbh3A%3D" alt="" loading="lazy"/></p>
<p>ä»¥ä¸‹æ˜¯æ–‡æ¡£å®Œæ•´å†…å®¹ï¼š</p>
<h3 data-id="heading-3"><strong>01-project-overview.md - é¡¹ç›®æ•´ä½“æ¶æ„æ¦‚è§ˆ</strong></h3>
<ul>
<li>
<p>æŠ€æœ¯æ ˆåˆ†æï¼ˆReact + Go + æ•°æ®åº“ï¼‰</p>
</li>
<li>
<p>éƒ¨ç½²æ¶æ„å›¾å’Œæ•°æ®æµç¨‹</p>
</li>
<li>
<p>æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ä»‹ç»</p>
</li>
</ul>

<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Cloudreve é¡¹ç›®æ•´ä½“æ¶æ„åˆ†æ</span>

<span class="hljs-section">## é¡¹ç›®æ¦‚è¿°</span>

Cloudreve æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è‡ªæ‰˜ç®¡ç½‘ç›˜ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å­˜å‚¨åç«¯ï¼Œæä¾›å®Œæ•´çš„æ–‡ä»¶ç®¡ç†ã€åˆ†äº«ã€ç”¨æˆ·ç®¡ç†ç­‰åŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚

<span class="hljs-section">## æŠ€æœ¯æ ˆæ€»è§ˆ</span>

<span class="hljs-section">### å‰ç«¯æŠ€æœ¯æ ˆ</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ¡†æ¶**</span>: React 18 + TypeScript
<span class="hljs-bullet">-</span> <span class="hljs-strong">**UI åº“**</span>: Material-UI (MUI) v6
<span class="hljs-bullet">-</span> <span class="hljs-strong">**çŠ¶æ€ç®¡ç†**</span>: Redux Toolkit
<span class="hljs-bullet">-</span> <span class="hljs-strong">**è·¯ç”±**</span>: React Router v6
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ„å»ºå·¥å…·**</span>: Vite
<span class="hljs-bullet">-</span> <span class="hljs-strong">**HTTP å®¢æˆ·ç«¯**</span>: Axios
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ‹–æ‹½**</span>: React DnD
<span class="hljs-bullet">-</span> <span class="hljs-strong">**å›½é™…åŒ–**</span>: i18next

<span class="hljs-section">### åç«¯æŠ€æœ¯æ ˆ</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**è¯­è¨€**</span>: Go 1.23
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Web æ¡†æ¶**</span>: Gin
<span class="hljs-bullet">-</span> <span class="hljs-strong">**ORM**</span>: Ent (Facebook å¼€æºçš„ Go ORM)
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ•°æ®åº“**</span>: æ”¯æŒ MySQLã€PostgreSQLã€SQLite
<span class="hljs-bullet">-</span> <span class="hljs-strong">**è®¤è¯**</span>: JWT + Session
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ–‡ä»¶å­˜å‚¨**</span>: æ”¯æŒæœ¬åœ°ã€é˜¿é‡Œäº‘ OSSã€AWS S3ã€è…¾è®¯äº‘ COS ç­‰
<span class="hljs-bullet">-</span> <span class="hljs-strong">**ä»»åŠ¡é˜Ÿåˆ—**</span>: å†…ç½®ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ

<span class="hljs-section">## é¡¹ç›®ç»“æ„</span>

<span class="hljs-code">```mermaid
graph TB
    subgraph "Cloudreve é¡¹ç›®ç»“æ„"
        A[æ ¹ç›®å½•] --&gt; B[Cloudreve/]
        A --&gt; C[assets/]
        A --&gt; D[.trae/]
        
        B --&gt; B1[main.go - å…¥å£æ–‡ä»¶]
        B --&gt; B2[routers/ - è·¯ç”±å±‚]
        B --&gt; B3[service/ - ä¸šåŠ¡é€»è¾‘å±‚]
        B --&gt; B4[ent/ - æ•°æ®æ¨¡å‹å±‚]
        B --&gt; B5[pkg/ - å·¥å…·åŒ…]
        B --&gt; B6[middleware/ - ä¸­é—´ä»¶]
        B --&gt; B7[inventory/ - åº“å­˜ç®¡ç†]
        B --&gt; B8[application/ - åº”ç”¨é…ç½®]
        
        C --&gt; C1[src/ - å‰ç«¯æºç ]
        C --&gt; C2[assets/ - é™æ€èµ„æº]
        C --&gt; C3[locales/ - å›½é™…åŒ–æ–‡ä»¶]
        
        C1 --&gt; C11[component/ - React ç»„ä»¶]
        C1 --&gt; C12[redux/ - çŠ¶æ€ç®¡ç†]
        C1 --&gt; C13[api/ - API æ¥å£]
        C1 --&gt; C14[router/ - å‰ç«¯è·¯ç”±]
        C1 --&gt; C15[session/ - ä¼šè¯ç®¡ç†]
    end
```</span>

<span class="hljs-section">## æ ¸å¿ƒæ¶æ„è®¾è®¡</span>

<span class="hljs-section">### 1. åˆ†å±‚æ¶æ„</span>

<span class="hljs-code">```mermaid
graph TB
    subgraph "åç«¯åˆ†å±‚æ¶æ„"
        A[è·¯ç”±å±‚ - routers/] --&gt; B[æ§åˆ¶å™¨å±‚ - controllers/]
        B --&gt; C[æœåŠ¡å±‚ - service/]
        C --&gt; D[æ•°æ®è®¿é—®å±‚ - ent/]
        D --&gt; E[æ•°æ®åº“]
        
        F[ä¸­é—´ä»¶å±‚ - middleware/] --&gt; B
        G[å·¥å…·åŒ… - pkg/] --&gt; C
    end
```</span>

<span class="hljs-section">### 2. å‰ç«¯ç»„ä»¶æ¶æ„</span>

<span class="hljs-code">```mermaid
graph TB
    subgraph "å‰ç«¯ç»„ä»¶æ¶æ„"
        A[App.tsx - æ ¹ç»„ä»¶] --&gt; B[Frame/ - æ¡†æ¶ç»„ä»¶]
        A --&gt; C[Pages/ - é¡µé¢ç»„ä»¶]
        
        B --&gt; B1[NavBarFrame - å¯¼èˆªæ¡†æ¶]
        B --&gt; B2[HeadlessFrame - æ— å¤´æ¡†æ¶]
        
        B1 --&gt; B11[TopAppBar - é¡¶éƒ¨æ ]
        B1 --&gt; B12[AppDrawer - ä¾§è¾¹æ ]
        B1 --&gt; B13[AppMain - ä¸»å†…å®¹åŒº]
        
        C --&gt; C1[FileManager/ - æ–‡ä»¶ç®¡ç†å™¨]
        C --&gt; C2[Login/ - ç™»å½•é¡µé¢]
        C --&gt; C3[Admin/ - ç®¡ç†é¡µé¢]
        
        C1 --&gt; C11[Explorer/ - æ–‡ä»¶æµè§ˆå™¨]
        C1 --&gt; C12[Uploader/ - æ–‡ä»¶ä¸Šä¼ å™¨]
        C1 --&gt; C13[Viewers/ - æ–‡ä»¶æŸ¥çœ‹å™¨]
    end
```</span>

<span class="hljs-section">## éƒ¨ç½²æ¶æ„</span>

Cloudreve æ”¯æŒä¸¤ç§éƒ¨ç½²æ¨¡å¼ï¼š

<span class="hljs-section">### 1. å•æœºæ¨¡å¼ (Master Mode)</span>
<span class="hljs-code">```mermaid
graph LR
    A[ç”¨æˆ·] --&gt; B[Nginx/åå‘ä»£ç†]
    B --&gt; C[Cloudreve ä¸»èŠ‚ç‚¹]
    C --&gt; D[æ•°æ®åº“]
    C --&gt; E[æ–‡ä»¶å­˜å‚¨]
```</span>

<span class="hljs-section">### 2. é›†ç¾¤æ¨¡å¼ (Master-Slave Mode)</span>
<span class="hljs-code">```mermaid
graph TB
    A[ç”¨æˆ·] --&gt; B[è´Ÿè½½å‡è¡¡å™¨]
    B --&gt; C[Cloudreve ä¸»èŠ‚ç‚¹]
    B --&gt; D[Cloudreve ä»èŠ‚ç‚¹ 1]
    B --&gt; E[Cloudreve ä»èŠ‚ç‚¹ 2]
    
    C --&gt; F[å…±äº«æ•°æ®åº“]
    D --&gt; G[æœ¬åœ°å­˜å‚¨ 1]
    E --&gt; H[æœ¬åœ°å­˜å‚¨ 2]
    
    C -.-&gt; D
    C -.-&gt; E
```</span>

<span class="hljs-section">## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—</span>

<span class="hljs-section">### 1. ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ</span>
<span class="hljs-bullet">-</span> ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†
<span class="hljs-bullet">-</span> ç”¨æˆ·ç»„ç®¡ç†
<span class="hljs-bullet">-</span> å­˜å‚¨é…é¢ç®¡ç†
<span class="hljs-bullet">-</span> 2FA åŒå› å­è®¤è¯
<span class="hljs-bullet">-</span> Passkey æ”¯æŒ

<span class="hljs-section">### 2. æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ</span>
<span class="hljs-bullet">-</span> æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€é¢„è§ˆ
<span class="hljs-bullet">-</span> æ–‡ä»¶å¤¹ç®¡ç†
<span class="hljs-bullet">-</span> æ–‡ä»¶åˆ†äº«ï¼ˆå…¬å¼€/ç§å¯†ï¼‰
<span class="hljs-bullet">-</span> æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶
<span class="hljs-bullet">-</span> æ‰¹é‡æ“ä½œ

<span class="hljs-section">### 3. å­˜å‚¨ç³»ç»Ÿ</span>
<span class="hljs-bullet">-</span> å¤šå­˜å‚¨åç«¯æ”¯æŒ
<span class="hljs-bullet">-</span> å­˜å‚¨ç­–ç•¥ç®¡ç†
<span class="hljs-bullet">-</span> æ–‡ä»¶åŠ å¯†
<span class="hljs-bullet">-</span> ç¼©ç•¥å›¾ç”Ÿæˆ
<span class="hljs-bullet">-</span> åª’ä½“å…ƒæ•°æ®æå–

<span class="hljs-section">### 4. ä»»åŠ¡ç³»ç»Ÿ</span>
<span class="hljs-bullet">-</span> å¼‚æ­¥ä»»åŠ¡å¤„ç†
<span class="hljs-bullet">-</span> ç¦»çº¿ä¸‹è½½
<span class="hljs-bullet">-</span> æ–‡ä»¶å‹ç¼©/è§£å‹
<span class="hljs-bullet">-</span> å®šæ—¶ä»»åŠ¡

<span class="hljs-section">### 5. èŠå¤©ç³»ç»Ÿ (å·²å®ç°)</span>
<span class="hljs-bullet">-</span> OpenRouter API é›†æˆ
<span class="hljs-bullet">-</span> æµå¼å¯¹è¯æ”¯æŒ
<span class="hljs-bullet">-</span> å¤šæ¨¡æ€æ–‡ä»¶å¤„ç†
<span class="hljs-bullet">-</span> æ–‡ä»¶ä¸Šä¸‹æ–‡åˆ†æ

<span class="hljs-section">## æ•°æ®æµæ¶æ„</span>

<span class="hljs-code">```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as å‰ç«¯ (React)
    participant R as è·¯ç”±å±‚ (Gin)
    participant S as æœåŠ¡å±‚
    participant D as æ•°æ®å±‚ (Ent)
    participant DB as æ•°æ®åº“

    U-&gt;&gt;F: ç”¨æˆ·æ“ä½œ
    F-&gt;&gt;R: HTTP è¯·æ±‚
    R-&gt;&gt;R: ä¸­é—´ä»¶å¤„ç† (è®¤è¯/æˆæƒ)
    R-&gt;&gt;S: è°ƒç”¨ä¸šåŠ¡æœåŠ¡
    S-&gt;&gt;D: æ•°æ®æ“ä½œ
    D-&gt;&gt;DB: SQL æŸ¥è¯¢
    DB--&gt;&gt;D: è¿”å›æ•°æ®
    D--&gt;&gt;S: è¿”å›å®ä½“
    S--&gt;&gt;R: è¿”å›ç»“æœ
    R--&gt;&gt;F: JSON å“åº”
    F--&gt;&gt;U: æ›´æ–°ç•Œé¢
```</span>

<span class="hljs-section">## å…³é”®è®¾è®¡ç‰¹ç‚¹</span>

<span class="hljs-section">### 1. æ¨¡å—åŒ–è®¾è®¡</span>
<span class="hljs-bullet">-</span> å‰åç«¯å®Œå…¨åˆ†ç¦»
<span class="hljs-bullet">-</span> ç»„ä»¶åŒ–å¼€å‘
<span class="hljs-bullet">-</span> æ’ä»¶å¼å­˜å‚¨åç«¯
<span class="hljs-bullet">-</span> ä¸­é—´ä»¶æ¶æ„

<span class="hljs-section">### 2. å¯æ‰©å±•æ€§</span>
<span class="hljs-bullet">-</span> æ”¯æŒé›†ç¾¤éƒ¨ç½²
<span class="hljs-bullet">-</span> æ°´å¹³æ‰©å±•èƒ½åŠ›
<span class="hljs-bullet">-</span> æ’ä»¶ç³»ç»Ÿ
<span class="hljs-bullet">-</span> API ç‰ˆæœ¬ç®¡ç†

<span class="hljs-section">### 3. å®‰å…¨æ€§</span>
<span class="hljs-bullet">-</span> JWT è®¤è¯
<span class="hljs-bullet">-</span> RBAC æƒé™æ§åˆ¶
<span class="hljs-bullet">-</span> æ–‡ä»¶åŠ å¯†
<span class="hljs-bullet">-</span> CSRF ä¿æŠ¤
<span class="hljs-bullet">-</span> è¾“å…¥éªŒè¯

<span class="hljs-section">### 4. æ€§èƒ½ä¼˜åŒ–</span>
<span class="hljs-bullet">-</span> ç¼“å­˜æœºåˆ¶
<span class="hljs-bullet">-</span> å¼‚æ­¥ä»»åŠ¡å¤„ç†
<span class="hljs-bullet">-</span> æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ 
<span class="hljs-bullet">-</span> CDN æ”¯æŒ
<span class="hljs-bullet">-</span> æ•°æ®åº“è¿æ¥æ± 

<span class="hljs-section">## å¼€å‘ç¯å¢ƒè¦æ±‚</span>

<span class="hljs-section">### å‰ç«¯å¼€å‘</span>
<span class="hljs-bullet">-</span> Node.js 18+
<span class="hljs-bullet">-</span> npm æˆ– yarn
<span class="hljs-bullet">-</span> ç°ä»£æµè§ˆå™¨

<span class="hljs-section">### åç«¯å¼€å‘</span>
<span class="hljs-bullet">-</span> Go 1.23+
<span class="hljs-bullet">-</span> æ•°æ®åº“ (MySQL/PostgreSQL/SQLite)
<span class="hljs-bullet">-</span> Redis (å¯é€‰ï¼Œç”¨äºç¼“å­˜)

<span class="hljs-section">## é¡¹ç›®ç‰¹è‰²åŠŸèƒ½</span>

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**å¤šå­˜å‚¨åç«¯**</span>: æ”¯æŒæœ¬åœ°ã€äº‘å­˜å‚¨ç­‰å¤šç§å­˜å‚¨æ–¹å¼
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**WebDAV æ”¯æŒ**</span>: å¯é€šè¿‡ WebDAV åè®®è®¿é—®æ–‡ä»¶
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**Office åœ¨çº¿ç¼–è¾‘**</span>: é›†æˆ WOPI åè®®æ”¯æŒ Office æ–‡æ¡£åœ¨çº¿ç¼–è¾‘
<span class="hljs-bullet">4.</span> <span class="hljs-strong">**åª’ä½“å¤„ç†**</span>: æ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘çš„é¢„è§ˆå’Œå…ƒæ•°æ®æå–
<span class="hljs-bullet">5.</span> <span class="hljs-strong">**ç¦»çº¿ä¸‹è½½**</span>: æ”¯æŒ Aria2 ç¦»çº¿ä¸‹è½½
<span class="hljs-bullet">6.</span> <span class="hljs-strong">**æ–‡ä»¶åˆ†äº«**</span>: çµæ´»çš„æ–‡ä»¶åˆ†äº«æœºåˆ¶
<span class="hljs-bullet">7.</span> <span class="hljs-strong">**AI èŠå¤©**</span>: é›†æˆ OpenRouter API çš„æ™ºèƒ½å¯¹è¯åŠŸèƒ½

<span class="hljs-section">## æ€»ç»“</span>

Cloudreve æ˜¯ä¸€ä¸ªæ¶æ„æ¸…æ™°ã€åŠŸèƒ½å®Œæ•´çš„ç°ä»£åŒ–ç½‘ç›˜ç³»ç»Ÿã€‚å…¶å‰åç«¯åˆ†ç¦»çš„è®¾è®¡ã€æ¨¡å—åŒ–çš„æ¶æ„ã€ä»¥åŠä¸°å¯Œçš„åŠŸèƒ½ç‰¹æ€§ï¼Œä¸ºå¼€å‘è€…æä¾›äº†è‰¯å¥½çš„æ‰©å±•åŸºç¡€ã€‚ç‰¹åˆ«æ˜¯å·²ç»å®ç°çš„èŠå¤©åŠŸèƒ½ï¼Œä¸ºä½ è¦å¼€å‘çš„ä¾§è¾¹æ å¯¹è¯åŠŸèƒ½æä¾›äº†å¾ˆå¥½çš„å‚è€ƒå’ŒåŸºç¡€ã€‚

ä¸‹ä¸€æ­¥å»ºè®®æ·±å…¥äº†è§£å‰ç«¯ç»„ä»¶æ¶æ„å’Œåç«¯æœåŠ¡å±‚çš„å…·ä½“å®ç°ï¼Œè¿™å°†æœ‰åŠ©äºä½ æ›´å¥½åœ°ç†è§£å¦‚ä½•åœ¨ç°æœ‰æ¶æ„åŸºç¡€ä¸Šæ·»åŠ æ–°åŠŸèƒ½ã€‚
</code></pre>
<h3 data-id="heading-4"><strong>02-frontend-architecture.md - å‰ç«¯æ¶æ„è¯¦è§£</strong></h3>
<ul>
<li>
<p>React + TypeScript + Material-UI æŠ€æœ¯æ ˆ</p>
</li>
<li>
<p>ç»„ä»¶å±‚æ¬¡ç»“æ„å’ŒçŠ¶æ€ç®¡ç†</p>
</li>
<li>
<p>è·¯ç”±ç³»ç»Ÿå’Œæ€§èƒ½ä¼˜åŒ–ç­–ç•¥</p>
</li>
</ul>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Cloudreve å‰ç«¯æ¶æ„å­¦ä¹ æŒ‡å—</span>

<span class="hljs-comment">## å‰ç«¯æŠ€æœ¯æ ˆè¯¦è§£</span>

<span class="hljs-comment">### æ ¸å¿ƒæŠ€æœ¯æ ˆ</span>
- **React 18**: ä½¿ç”¨æœ€æ–°çš„ React ç‰¹æ€§ï¼ŒåŒ…æ‹¬ Hooksã€Suspenseã€Concurrent Features
- **TypeScript**: æä¾›ç±»å‹å®‰å…¨å’Œæ›´å¥½çš„å¼€å‘ä½“éªŒ
- **Material-UI (MUI) v6**: Google Material Design è®¾è®¡è¯­è¨€çš„ React å®ç°
- **Redux Toolkit**: ç°ä»£åŒ–çš„ Redux çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆ
- **React Router v6**: å£°æ˜å¼è·¯ç”±ç®¡ç†
- **Vite**: å¿«é€Ÿçš„æ„å»ºå·¥å…·å’Œå¼€å‘æœåŠ¡å™¨

<span class="hljs-comment">### å¼€å‘å·¥å…·é“¾</span>
- **ESLint**: ä»£ç è´¨é‡æ£€æŸ¥
- **Prettier**: ä»£ç æ ¼å¼åŒ–
- **Husky**: Git hooks ç®¡ç†
- **TypeScript**: é™æ€ç±»å‹æ£€æŸ¥

<span class="hljs-comment">## é¡¹ç›®ç»“æ„è¯¦è§£</span>

```
assets/src/
â”œâ”€â”€ component/           <span class="hljs-comment"># React ç»„ä»¶</span>
â”‚   â”œâ”€â”€ Common/         <span class="hljs-comment"># é€šç”¨ç»„ä»¶</span>
â”‚   â”œâ”€â”€ Frame/          <span class="hljs-comment"># æ¡†æ¶ç»„ä»¶</span>
â”‚   â”œâ”€â”€ FileManager/    <span class="hljs-comment"># æ–‡ä»¶ç®¡ç†å™¨ç»„ä»¶</span>
â”‚   â”œâ”€â”€ Pages/          <span class="hljs-comment"># é¡µé¢ç»„ä»¶</span>
â”‚   â”œâ”€â”€ Admin/          <span class="hljs-comment"># ç®¡ç†åå°ç»„ä»¶</span>
â”‚   â”œâ”€â”€ Viewers/        <span class="hljs-comment"># æ–‡ä»¶æŸ¥çœ‹å™¨ç»„ä»¶</span>
â”‚   â”œâ”€â”€ Uploader/       <span class="hljs-comment"># æ–‡ä»¶ä¸Šä¼ ç»„ä»¶</span>
â”‚   â”œâ”€â”€ Icons/          <span class="hljs-comment"># å›¾æ ‡ç»„ä»¶</span>
â”‚   â””â”€â”€ Dialogs/        <span class="hljs-comment"># å¯¹è¯æ¡†ç»„ä»¶</span>
â”œâ”€â”€ redux/              <span class="hljs-comment"># çŠ¶æ€ç®¡ç†</span>
â”‚   â”œâ”€â”€ hooks.ts        <span class="hljs-comment"># Redux hooks</span>
â”‚   â”œâ”€â”€ store.ts        <span class="hljs-comment"># Store é…ç½®</span>
â”‚   â””â”€â”€ slices/         <span class="hljs-comment"># Redux slices</span>
â”œâ”€â”€ api/                <span class="hljs-comment"># API æ¥å£</span>
â”‚   â”œâ”€â”€ api.ts          <span class="hljs-comment"># API å‡½æ•°</span>
â”‚   â”œâ”€â”€ request.ts      <span class="hljs-comment"># è¯·æ±‚å°è£…</span>
â”‚   â””â”€â”€ types.ts        <span class="hljs-comment"># ç±»å‹å®šä¹‰</span>
â”œâ”€â”€ router/             <span class="hljs-comment"># è·¯ç”±é…ç½®</span>
â”œâ”€â”€ session/            <span class="hljs-comment"># ä¼šè¯ç®¡ç†</span>
â”œâ”€â”€ util/               <span class="hljs-comment"># å·¥å…·å‡½æ•°</span>
â””â”€â”€ App.tsx             <span class="hljs-comment"># æ ¹ç»„ä»¶</span>
```

<span class="hljs-comment">## ç»„ä»¶æ¶æ„è®¾è®¡</span>

<span class="hljs-comment">### 1. æ¡†æ¶ç»„ä»¶å±‚æ¬¡ç»“æ„</span>

```mermaid
graph TB
    subgraph "æ¡†æ¶ç»„ä»¶æ¶æ„"
        A<span class="hljs-section">[App.tsx]</span> --&gt; B<span class="hljs-section">[NavBarFrame]</span>
        A --&gt; C<span class="hljs-section">[HeadlessFrame]</span>
        
        B --&gt; D<span class="hljs-section">[TopAppBar]</span>
        B --&gt; E<span class="hljs-section">[AppDrawer]</span>
        B --&gt; F<span class="hljs-section">[AppMain]</span>
        
        D --&gt; D1<span class="hljs-section">[UserAction]</span>
        D --&gt; D2<span class="hljs-section">[SearchBar]</span>
        D --&gt; D3<span class="hljs-section">[NavBarMainActions]</span>
        
        E --&gt; E1<span class="hljs-section">[SideNavItem]</span>
        E --&gt; E2<span class="hljs-section">[StorageSummary]</span>
        E --&gt; E3<span class="hljs-section">[PageNavigation]</span>
        
        F --&gt; F1<span class="hljs-section">[FileManager]</span>
        F --&gt; F2<span class="hljs-section">[Pages]</span>
        F --&gt; F3<span class="hljs-section">[Admin]</span>
    end
```

<span class="hljs-comment">### 2. æ–‡ä»¶ç®¡ç†å™¨ç»„ä»¶ç»“æ„</span>

```mermaid
graph TB
    subgraph "æ–‡ä»¶ç®¡ç†å™¨ç»„ä»¶"
        A<span class="hljs-section">[FileManager]</span> --&gt; B<span class="hljs-section">[TopBar]</span>
        A --&gt; C<span class="hljs-section">[Explorer]</span>
        A --&gt; D<span class="hljs-section">[Uploader]</span>
        A --&gt; E<span class="hljs-section">[Viewers]</span>
        A --&gt; F<span class="hljs-section">[Dialogs]</span>
        
        B --&gt; B1<span class="hljs-section">[Breadcrumb]</span>
        B --&gt; B2<span class="hljs-section">[TopActions]</span>
        B --&gt; B3<span class="hljs-section">[ViewOptions]</span>
        
        C --&gt; C1<span class="hljs-section">[FileList]</span>
        C --&gt; C2<span class="hljs-section">[ContextMenu]</span>
        C --&gt; C3<span class="hljs-section">[DragDrop]</span>
        
        D --&gt; D1<span class="hljs-section">[UploadQueue]</span>
        D --&gt; D2<span class="hljs-section">[ProgressBar]</span>
        
        E --&gt; E1<span class="hljs-section">[ImageViewer]</span>
        E --&gt; E2<span class="hljs-section">[VideoPlayer]</span>
        E --&gt; E3<span class="hljs-section">[DocumentViewer]</span>
        
        F --&gt; F1<span class="hljs-section">[CreateNew]</span>
        F --&gt; F2<span class="hljs-section">[ShareDialog]</span>
        F --&gt; F3<span class="hljs-section">[DeleteConfirm]</span>
    end
```

<span class="hljs-comment">## çŠ¶æ€ç®¡ç†æ¶æ„</span>

<span class="hljs-comment">### Redux Store ç»“æ„</span>

```typescript
// store.ts æ ¸å¿ƒé…ç½®
export const <span class="hljs-attr">store</span> = configureStore({
  reducer: {
    // å…¨å±€çŠ¶æ€
    globalState: globalStateSlice.reducer,
    // æ–‡ä»¶ç®¡ç†å™¨çŠ¶æ€
    explorer: explorerSlice.reducer,
    // ç”¨æˆ·çŠ¶æ€
    user: userSlice.reducer,
    // ä¸Šä¼ çŠ¶æ€
    uploader: uploaderSlice.reducer,
    // å¯¹è¯æ¡†çŠ¶æ€
    dialog: dialogSlice.reducer,
  },
  middleware: (getDefaultMiddleware) =&gt;
    getDefaultMiddleware({
      serializableCheck: {
        ignoredActions: <span class="hljs-section">[FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER]</span>,
      },
    }),
})<span class="hljs-comment">;</span>
```

<span class="hljs-comment">### çŠ¶æ€ç®¡ç†æ¨¡å¼</span>

```mermaid
graph LR
    subgraph "Redux æ•°æ®æµ"
        A<span class="hljs-section">[Component]</span> --&gt; B<span class="hljs-section">[Action]</span>
        B --&gt; C<span class="hljs-section">[Reducer]</span>
        C --&gt; D<span class="hljs-section">[Store]</span>
        D --&gt; A
        
        E<span class="hljs-section">[Middleware]</span> --&gt; C
        F<span class="hljs-section">[DevTools]</span> --&gt; D
    end
```

<span class="hljs-comment">### ä¸»è¦ Slice è¯´æ˜</span>

<span class="hljs-comment">#### 1. globalStateSlice</span>
```typescript
interface GlobalState {
  // ä¾§è¾¹æ çŠ¶æ€
  drawerOpen: boolean<span class="hljs-comment">;</span>
  mobileDrawerOpen: boolean<span class="hljs-comment">;</span>
  // ä¸»é¢˜è®¾ç½®
  theme: 'light' | 'dark' | 'auto'<span class="hljs-comment">;</span>
  // è¯­è¨€è®¾ç½®
  language: string<span class="hljs-comment">;</span>
  // åŠ è½½çŠ¶æ€
  loading: boolean<span class="hljs-comment">;</span>
}
```

<span class="hljs-comment">#### 2. explorerSlice</span>
```typescript
interface ExplorerState {
  // å½“å‰è·¯å¾„
  currentPath: string<span class="hljs-comment">;</span>
  // æ–‡ä»¶åˆ—è¡¨
  files: FileResponse<span class="hljs-section">[]</span><span class="hljs-comment">;</span>
  // é€‰ä¸­çš„æ–‡ä»¶
  selectedFiles: string<span class="hljs-section">[]</span><span class="hljs-comment">;</span>
  // è§†å›¾æ¨¡å¼
  viewMode: 'list' | 'grid' | 'small'<span class="hljs-comment">;</span>
  // æ’åºæ–¹å¼
  sortBy: string<span class="hljs-comment">;</span>
  sortOrder: 'asc' | 'desc'<span class="hljs-comment">;</span>
}
```

<span class="hljs-comment">## è·¯ç”±ç³»ç»Ÿ</span>

<span class="hljs-comment">### è·¯ç”±é…ç½®ç»“æ„</span>

```typescript
// router/index.tsx
export const <span class="hljs-attr">router</span> = createBrowserRouter([
  {
    path: <span class="hljs-string">"/"</span>,
    element: &lt;App /&gt;,
    errorElement: &lt;ErrorBoundary /&gt;,
    children: [
      { path: <span class="hljs-string">"/"</span>, element: &lt;HomeRedirect /&gt; },
      {
        path: <span class="hljs-string">"/"</span>,
        element: &lt;HeadlessFrame /&gt;,
        children: [
          // ç™»å½•ç›¸å…³è·¯ç”±
          {
            path: <span class="hljs-string">"/session"</span>,
            element: &lt;SessionIntro /&gt;,
            children: [
              { path: <span class="hljs-string">"/session"</span>, element: &lt;SignIn /&gt; },
              { path: <span class="hljs-string">"signup"</span>, element: &lt;SignUp /&gt; },
              { path: <span class="hljs-string">"activate"</span>, element: &lt;Activate /&gt; },
              { path: <span class="hljs-string">"reset"</span>, element: &lt;Reset /&gt; },
            ],
          },
        ],
      },
    ],
  },
])<span class="hljs-comment">;</span>
```

<span class="hljs-comment">### è·¯ç”±å®ˆå«æœºåˆ¶</span>

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant R as Router
    participant A as Auth Guard
    participant S as Session
    participant C as Component

    U-&gt;&gt;R: è®¿é—®è·¯ç”±
    R-&gt;&gt;A: æ£€æŸ¥æƒé™
    A-&gt;&gt;S: éªŒè¯ä¼šè¯
    alt å·²ç™»å½•
        S--&gt;&gt;A: è¿”å›ç”¨æˆ·ä¿¡æ¯
        A--&gt;&gt;R: å…è®¸è®¿é—®
        R-&gt;&gt;C: æ¸²æŸ“ç»„ä»¶
        C--&gt;&gt;U: æ˜¾ç¤ºé¡µé¢
    else æœªç™»å½•
        S--&gt;&gt;A: è¿”å›æœªè®¤è¯
        A--&gt;&gt;R: é‡å®šå‘ç™»å½•
        R-&gt;&gt;U: è·³è½¬ç™»å½•é¡µ
    end
```

<span class="hljs-comment">## ç»„ä»¶è®¾è®¡æ¨¡å¼</span>

<span class="hljs-comment">### 1. å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶</span>

```typescript
// å®¹å™¨ç»„ä»¶ - è´Ÿè´£æ•°æ®å’Œé€»è¾‘
const FileManagerContainer: <span class="hljs-attr">React.FC</span> = () =&gt; {
  const <span class="hljs-attr">dispatch</span> = useAppDispatch()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">files</span> = useAppSelector(state =&gt; state.explorer.files)<span class="hljs-comment">;</span>
  
  const <span class="hljs-attr">handleFileSelect</span> = (fileId: string) =&gt; {
    dispatch(selectFile(fileId))<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>
  
  return (
    &lt;FileList 
      <span class="hljs-attr">files</span>={files}
      <span class="hljs-attr">onFileSelect</span>={handleFileSelect}
    /&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

// å±•ç¤ºç»„ä»¶ - è´Ÿè´£ UI æ¸²æŸ“
interface FileListProps {
  files: FileResponse<span class="hljs-section">[]</span><span class="hljs-comment">;</span>
  onFileSelect: (fileId: string) =&gt; void<span class="hljs-comment">;</span>
}

const FileList: React.FC&lt;FileListProps&gt; = ({ files, onFileSelect }) =&gt; {
  return (
    &lt;List&gt;
      {files.map(<span class="hljs-attr">file</span> =&gt; (
        &lt;FileItem 
          <span class="hljs-attr">key</span>={file.id}
          <span class="hljs-attr">file</span>={file}
          <span class="hljs-attr">onClick</span>={() =&gt; <span class="hljs-literal">on</span>FileSelect(file.id)}
        /&gt;
      ))}
    &lt;/List&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
```

<span class="hljs-comment">### 2. è‡ªå®šä¹‰ Hooks</span>

```typescript
// hooks/useFileManager.ts
export const <span class="hljs-attr">useFileManager</span> = () =&gt; {
  const <span class="hljs-attr">dispatch</span> = useAppDispatch()<span class="hljs-comment">;</span>
  const { files, currentPath, loading } = useAppSelector(<span class="hljs-attr">state</span> =&gt; state.explorer)<span class="hljs-comment">;</span>
  
  const <span class="hljs-attr">loadFiles</span> = useCallback(async (path: string) =&gt; {
    dispatch(setLoading(true))<span class="hljs-comment">;</span>
    try {
      const <span class="hljs-attr">response</span> = await api.listFiles(path)<span class="hljs-comment">;</span>
      dispatch(setFiles(response.data))<span class="hljs-comment">;</span>
    } catch (error) {
      // é”™è¯¯å¤„ç†
    } finally {
      dispatch(setLoading(false))<span class="hljs-comment">;</span>
    }
  }, <span class="hljs-section">[dispatch]</span>)<span class="hljs-comment">;</span>
  
  return {
    files,
    currentPath,
    loading,
    loadFiles,
  }<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
```

<span class="hljs-comment">### 3. é«˜é˜¶ç»„ä»¶ (HOC)</span>

```typescript
// hoc/withAuth.tsx
export const <span class="hljs-attr">withAuth</span> = &lt;P extends object&gt;(
  Component: React.ComponentType&lt;P&gt;
) =&gt; {
  return (props: P) =&gt; {
    const { user } = useAppSelector(<span class="hljs-attr">state</span> =&gt; state.user)<span class="hljs-comment">;</span>
    
    if (!user) {
      return &lt;Navigate <span class="hljs-attr">to</span>=<span class="hljs-string">"/session"</span> /&gt;<span class="hljs-comment">;</span>
    }
    
    return &lt;Component {...props} /&gt;<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

// ä½¿ç”¨æ–¹å¼
const <span class="hljs-attr">ProtectedPage</span> = withAuth(FileManager)<span class="hljs-comment">;</span>
```

<span class="hljs-comment">## Material-UI ä¸»é¢˜ç³»ç»Ÿ</span>

<span class="hljs-comment">### ä¸»é¢˜é…ç½®</span>

```typescript
// App.tsx ä¸­çš„ä¸»é¢˜é…ç½®
export const <span class="hljs-attr">applyThemeWithOverrides</span> = (themeConfig: ThemeOptions): ThemeOptions =&gt; {
  return {
    ...themeConfig,
    shape: {
      borderRadius: 12,
    },
    components: {
      MuiButton: {
        styleOverrides: {
          root: {
            textTransform: "none",
          },
        },
      },
      MuiTooltip: {
        defaultProps: {
          enterDelay: 500,
        },
      },
    },
  }<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
```

<span class="hljs-comment">### å“åº”å¼è®¾è®¡</span>

```typescript
// ä½¿ç”¨ MUI çš„æ–­ç‚¹ç³»ç»Ÿ
const <span class="hljs-attr">useStyles</span> = () =&gt; {
  const <span class="hljs-attr">theme</span> = useTheme()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">isMobile</span> = useMediaQuery(theme.breakpoints.down(<span class="hljs-string">'sm'</span>))<span class="hljs-comment">;</span>
  const <span class="hljs-attr">isTablet</span> = useMediaQuery(theme.breakpoints.down(<span class="hljs-string">'md'</span>))<span class="hljs-comment">;</span>
  
  return {
    container: {
      padding: isMobile ? theme.spacing(1) : theme.spacing(3),
      gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fill, minmax(200px, 1fr))',
    },
  }<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
```

<span class="hljs-comment">## API é›†æˆæ¨¡å¼</span>

<span class="hljs-comment">### è¯·æ±‚å°è£…</span>

```typescript
// api/request.ts
const <span class="hljs-attr">instance</span> = axios.create({
  baseURL: '/api/v4',
})<span class="hljs-comment">;</span>

// è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.request.use(async (config) =&gt; {
  const <span class="hljs-attr">token</span> = await SessionManager.getAccessToken()<span class="hljs-comment">;</span>
  if (token) {
    <span class="hljs-attr">config.headers.Authorization</span> = `Bearer <span class="hljs-variable">${token}</span>`<span class="hljs-comment">;</span>
  }
  return config<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>

// å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(
  (response) =&gt; response,
  async (error) =&gt; {
    if (error.response?.<span class="hljs-attr">status</span> === <span class="hljs-number">401</span>) {
      // å¤„ç†è®¤è¯å¤±è´¥
      await SessionManager.refreshToken()<span class="hljs-comment">;</span>
    }
    return Promise.reject(error)<span class="hljs-comment">;</span>
  }
)<span class="hljs-comment">;</span>
```

<span class="hljs-comment">### API å‡½æ•°è®¾è®¡</span>

```typescript
// api/explorer.ts
export const <span class="hljs-attr">explorerAPI</span> = {
  // è·å–æ–‡ä»¶åˆ—è¡¨
  listFiles: (path: string): Promise&lt;Response&lt;FileResponse<span class="hljs-section">[]</span>&gt;&gt; =&gt; {
    return request.get('/file/list', { params: { path } })<span class="hljs-comment">;</span>
  },
  
  // ä¸Šä¼ æ–‡ä»¶
  uploadFile: (
    file: File, 
    path: string, 
    onProgress?: (progress: number) =&gt; void
  ): Promise&lt;Response&lt;FileResponse&gt;&gt; =&gt; {
    const <span class="hljs-attr">formData</span> = new FormData()<span class="hljs-comment">;</span>
    formData.append('file', file)<span class="hljs-comment">;</span>
    formData.append('path', path)<span class="hljs-comment">;</span>
    
    return request.post('/file/upload', formData, {
      onUploadProgress: (progressEvent) =&gt; {
        const <span class="hljs-attr">progress</span> = Math.round(
          (progressEvent.loaded * 100) / progressEvent.total
        )<span class="hljs-comment">;</span>
        onProgress?.(progress)<span class="hljs-comment">;</span>
      },
    })<span class="hljs-comment">;</span>
  },
}<span class="hljs-comment">;</span>
```

<span class="hljs-comment">## å›½é™…åŒ– (i18n) ç³»ç»Ÿ</span>

<span class="hljs-comment">### é…ç½®ç»“æ„</span>

```typescript
// i18n.ts
import i18n from 'i18next'<span class="hljs-comment">;</span>
import Backend from 'i18next-http-backend'<span class="hljs-comment">;</span>
import LanguageDetector from 'i18next-browser-languagedetector'<span class="hljs-comment">;</span>

i18n
  .use(Backend)
  .use(LanguageDetector)
  .init({
    fallbackLng: 'en-US',
    debug: false,
    
    interpolation: {
      escapeValue: false,
    },
    
    backend: {
      loadPath: '/assets/locales/{{lng}}/{{ns}}.json',
    },
  })<span class="hljs-comment">;</span>
```

<span class="hljs-comment">### ä½¿ç”¨æ–¹å¼</span>

```typescript
// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
const FileManager: <span class="hljs-attr">React.FC</span> = () =&gt; {
  const { t } = useTranslation()<span class="hljs-comment">;</span>
  
  return (
    &lt;Box&gt;
      &lt;Typography <span class="hljs-attr">variant</span>=<span class="hljs-string">"h6"</span>&gt;
        {t('fileManager.title')}
      &lt;/Typography&gt;
      &lt;Button&gt;
        {t('common.upload')}
      &lt;/Button&gt;
    &lt;/Box&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
```

<span class="hljs-comment">## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</span>

<span class="hljs-comment">### 1. ä»£ç åˆ†å‰²</span>

```typescript
// è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²
const <span class="hljs-attr">FileManager</span> = lazy(() =&gt; import(<span class="hljs-string">'../component/FileManager/FileManager'</span>))<span class="hljs-comment">;</span>
const <span class="hljs-attr">AdminPanel</span> = lazy(() =&gt; import(<span class="hljs-string">'../component/Admin/AdminPanel'</span>))<span class="hljs-comment">;</span>

// åœ¨è·¯ç”±ä¸­ä½¿ç”¨
&lt;Route 
  <span class="hljs-attr">path</span>=<span class="hljs-string">"/files"</span> 
  <span class="hljs-attr">element</span>={
    &lt;Suspense <span class="hljs-attr">fallback</span>={&lt;Loading /&gt;}&gt;
      &lt;FileManager /&gt;
    &lt;/Suspense&gt;
  } 
/&gt;
```

<span class="hljs-comment">### 2. ç»„ä»¶ä¼˜åŒ–</span>

```typescript
// ä½¿ç”¨ React.memo ä¼˜åŒ–æ¸²æŸ“
const <span class="hljs-attr">FileItem</span> = React.memo&lt;FileItemProps&gt;(({ file, <span class="hljs-literal">on</span>Select }) =&gt; {
  return (
    &lt;ListItem <span class="hljs-attr">onClick</span>={() =&gt; <span class="hljs-literal">on</span>Select(file.id)}&gt;
      &lt;ListItemText <span class="hljs-attr">primary</span>={file.name} /&gt;
    &lt;/ListItem&gt;
  )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>

// ä½¿ç”¨ useMemo ä¼˜åŒ–è®¡ç®—
const FileList: React.FC&lt;FileListProps&gt; = ({ files, filter }) =&gt; {
  const <span class="hljs-attr">filteredFiles</span> = useMemo(() =&gt; {
    return files.filter(<span class="hljs-attr">file</span> =&gt; 
      file.name.toLowerCase().includes(filter.toLowerCase())
    )<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[files, filter]</span>)<span class="hljs-comment">;</span>
  
  return (
    &lt;List&gt;
      {filteredFiles.map(<span class="hljs-attr">file</span> =&gt; (
        &lt;FileItem <span class="hljs-attr">key</span>={file.id} file={file} /&gt;
      ))}
    &lt;/List&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
```

<span class="hljs-comment">### 3. è™šæ‹Ÿæ»šåŠ¨</span>

```typescript
// ä½¿ç”¨ react-virtuoso å¤„ç†å¤§åˆ—è¡¨
import { Virtuoso } from 'react-virtuoso'<span class="hljs-comment">;</span>

const VirtualFileList: React.FC&lt;{ files: FileResponse<span class="hljs-section">[]</span> }&gt; = ({ files }) =&gt; {
  return (
    &lt;Virtuoso
      <span class="hljs-attr">data</span>={files}
      <span class="hljs-attr">itemContent</span>={(index, file) =&gt; (
        &lt;FileItem <span class="hljs-attr">key</span>={file.id} file={file} /&gt;
      )}
      <span class="hljs-attr">style</span>={{ height: <span class="hljs-string">'400px'</span> }}
    /&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
```

<span class="hljs-comment">## é”™è¯¯å¤„ç†æœºåˆ¶</span>

<span class="hljs-comment">### é”™è¯¯è¾¹ç•Œ</span>

```typescript
// component/Common/ErrorBoundary.tsx
class ErrorBoundary extends React.Component&lt;Props, State&gt; {
  constructor(props: Props) {
    super(props)<span class="hljs-comment">;</span>
    <span class="hljs-attr">this.state</span> = { hasError: <span class="hljs-literal">false</span> }<span class="hljs-comment">;</span>
  }

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true }<span class="hljs-comment">;</span>
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Error caught by boundary:', error, errorInfo)<span class="hljs-comment">;</span>
  }

  render() {
    if (this.state.hasError) {
      return &lt;ErrorFallback /&gt;<span class="hljs-comment">;</span>
    }

    return this.props.children<span class="hljs-comment">;</span>
  }
}
```

<span class="hljs-comment">### å…¨å±€é”™è¯¯å¤„ç†</span>

```typescript
// åœ¨ request.ts ä¸­ç»Ÿä¸€å¤„ç†é”™è¯¯
instance.interceptors.response.use(
  (response) =&gt; response,
  (error) =&gt; {
    const <span class="hljs-attr">message</span> = error.response?.data?.message || error.message<span class="hljs-comment">;</span>
    
    // æ˜¾ç¤ºé”™è¯¯æç¤º
    enqueueSnackbar(message, { 
      variant: 'error',
      action: &lt;DefaultCloseAction /&gt;
    })<span class="hljs-comment">;</span>
    
    return Promise.reject(error)<span class="hljs-comment">;</span>
  }
)<span class="hljs-comment">;</span>
```

<span class="hljs-comment">## æµ‹è¯•ç­–ç•¥</span>

<span class="hljs-comment">### å•å…ƒæµ‹è¯•</span>

```typescript
// __tests__/FileItem.test.tsx
import { render, screen, fireEvent } from '@testing-library/react'<span class="hljs-comment">;</span>
import { FileItem } from '../FileItem'<span class="hljs-comment">;</span>

describe('FileItem', () =&gt; {
  const <span class="hljs-attr">mockFile</span> = {
    id: '1',
    name: 'test.txt',
    size: 1024,
  }<span class="hljs-comment">;</span>

  it('renders file name correctly', () =&gt; {
    render(&lt;FileItem <span class="hljs-attr">file</span>={mockFile} <span class="hljs-literal">on</span>Select={jest.fn()} /&gt;)<span class="hljs-comment">;</span>
    expect(screen.getByText('test.txt')).toBeInTheDocument()<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>

  it('calls onSelect when clicked', () =&gt; {
    const <span class="hljs-attr">onSelect</span> = jest.fn()<span class="hljs-comment">;</span>
    render(&lt;FileItem <span class="hljs-attr">file</span>={mockFile} <span class="hljs-literal">on</span>Select={<span class="hljs-literal">on</span>Select} /&gt;)<span class="hljs-comment">;</span>
    
    fireEvent.click(screen.getByText('test.txt'))<span class="hljs-comment">;</span>
    expect(onSelect).toHaveBeenCalledWith('1')<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
```

<span class="hljs-comment">## å¼€å‘æœ€ä½³å®è·µ</span>

<span class="hljs-comment">### 1. ç»„ä»¶è®¾è®¡åŸåˆ™</span>
- **å•ä¸€èŒè´£**: æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- **å¯å¤ç”¨æ€§**: è®¾è®¡é€šç”¨çš„ç»„ä»¶æ¥å£
- **å¯æµ‹è¯•æ€§**: ä¾¿äºç¼–å†™å•å…ƒæµ‹è¯•
- **æ€§èƒ½ä¼˜åŒ–**: é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

<span class="hljs-comment">### 2. çŠ¶æ€ç®¡ç†åŸåˆ™</span>
- **æœ€å°åŒ–çŠ¶æ€**: åªå­˜å‚¨å¿…è¦çš„çŠ¶æ€
- **ä¸å¯å˜æ›´æ–°**: ä½¿ç”¨ Redux Toolkit çš„ Immer
- **å¼‚æ­¥å¤„ç†**: ä½¿ç”¨ createAsyncThunk å¤„ç†å¼‚æ­¥æ“ä½œ

<span class="hljs-comment">### 3. ä»£ç ç»„ç»‡åŸåˆ™</span>
- **æŒ‰åŠŸèƒ½åˆ†ç»„**: ç›¸å…³ç»„ä»¶æ”¾åœ¨åŒä¸€ç›®å½•
- **ç±»å‹å®šä¹‰**: ä¸ºæ‰€æœ‰ props å’ŒçŠ¶æ€å®šä¹‰ç±»å‹
- **æ–‡æ¡£æ³¨é‡Š**: ä¸ºå¤æ‚ç»„ä»¶æ·»åŠ  JSDoc æ³¨é‡Š

<span class="hljs-comment">## æ€»ç»“</span>

Cloudreve çš„å‰ç«¯æ¶æ„é‡‡ç”¨äº†ç°ä»£åŒ–çš„ React ç”Ÿæ€ç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

1. **ç±»å‹å®‰å…¨**: å…¨é¢ä½¿ç”¨ TypeScript
2. **ç»„ä»¶åŒ–**: é«˜åº¦æ¨¡å—åŒ–çš„ç»„ä»¶è®¾è®¡
3. **çŠ¶æ€ç®¡ç†**: ä½¿ç”¨ Redux Toolkit è¿›è¡ŒçŠ¶æ€ç®¡ç†
4. **UI ä¸€è‡´æ€§**: åŸºäº Material-UI çš„è®¾è®¡ç³»ç»Ÿ
5. **æ€§èƒ½ä¼˜åŒ–**: ä»£ç åˆ†å‰²ã€è™šæ‹Ÿæ»šåŠ¨ç­‰ä¼˜åŒ–ç­–ç•¥
6. **å›½é™…åŒ–**: å®Œæ•´çš„å¤šè¯­è¨€æ”¯æŒ
7. **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯è¾¹ç•Œå’Œé”™è¯¯å¤„ç†æœºåˆ¶

è¿™ä¸ªæ¶æ„ä¸ºä½ å¼€å‘ä¾§è¾¹æ å¯¹è¯åŠŸèƒ½æä¾›äº†è‰¯å¥½çš„åŸºç¡€ï¼Œä½ å¯ä»¥å‚è€ƒç°æœ‰çš„ç»„ä»¶è®¾è®¡æ¨¡å¼å’ŒçŠ¶æ€ç®¡ç†æ–¹å¼æ¥å®ç°æ–°åŠŸèƒ½ã€‚
</code></pre>
<h3 data-id="heading-5"><strong>03-backend-architecture.md - åç«¯æ¶æ„æŒ‡å—</strong></h3>
<ul>
<li>
<p>Go è¯­è¨€åŸºç¡€çŸ¥è¯†ï¼ˆä¸“ä¸ºå‰ç«¯å¼€å‘è€…ï¼‰</p>
</li>
<li>
<p>Gin æ¡†æ¶å’Œ Ent ORM ä½¿ç”¨</p>
</li>
<li>
<p>æœåŠ¡å±‚è®¾è®¡å’Œè®¤è¯ç³»ç»Ÿ</p>
</li>
</ul>

<pre><code class="hljs language-scss" lang="scss"># Cloudreve åç«¯æ¶æ„å­¦ä¹ æŒ‡å—

## Go è¯­è¨€åŸºç¡€çŸ¥è¯†

### ä¸ºä»€ä¹ˆé€‰æ‹© Go
- **é«˜æ€§èƒ½**: ç¼–è¯‘å‹è¯­è¨€ï¼Œæ¥è¿‘ C/C++ çš„æ€§èƒ½
- **å¹¶å‘æ”¯æŒ**: åŸç”Ÿçš„ goroutine å’Œ channel æ”¯æŒ
- **ç®€æ´è¯­æ³•**: å­¦ä¹ æ›²çº¿å¹³ç¼“ï¼Œä»£ç å¯è¯»æ€§å¼º
- **ä¸°å¯Œç”Ÿæ€**: ä¼˜ç§€çš„ Web æ¡†æ¶å’Œå·¥å…·é“¾
- **å†…å­˜å®‰å…¨**: åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œé¿å…å†…å­˜æ³„æ¼

### Go è¯­è¨€æ ¸å¿ƒæ¦‚å¿µ

#### <span class="hljs-number">1</span>. åŒ… (Package) ç³»ç»Ÿ
```go
// åŒ…å£°æ˜
package main

// å¯¼å…¥å…¶ä»–åŒ…
import (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"net/http"</span>
    <span class="hljs-string">"github.com/gin-gonic/gin"</span>
)

// å‡½æ•°å®šä¹‰
func <span class="hljs-built_in">main</span>() {
    fmt<span class="hljs-selector-class">.Println</span>("Hello, World!")
}
```

#### <span class="hljs-number">2</span>. ç»“æ„ä½“ (Struct)
```go
<span class="hljs-comment">// å®šä¹‰ç»“æ„ä½“</span>
type User struct {
    ID       int    `json:<span class="hljs-string">"id"</span>`
    Name     string `json:<span class="hljs-string">"name"</span>`
    Email    string `json:<span class="hljs-string">"email"</span>`
    Password string `json:<span class="hljs-string">"-"</span>` // ä¸åºåˆ—åŒ–åˆ° JSON
}

<span class="hljs-comment">// ç»“æ„ä½“æ–¹æ³•</span>
func (u *User) <span class="hljs-built_in">GetDisplayName</span>() string {
    return u<span class="hljs-selector-class">.Name</span>
}
```

#### <span class="hljs-number">3</span>. æ¥å£ (Interface)
```go
<span class="hljs-comment">// å®šä¹‰æ¥å£</span>
type UserService interface {
    <span class="hljs-built_in">CreateUser</span>(user *User) error
    <span class="hljs-built_in">GetUser</span>(id int) (*User, error)
    <span class="hljs-built_in">UpdateUser</span>(user *User) error
    <span class="hljs-built_in">DeleteUser</span>(id int) error
}

<span class="hljs-comment">// å®ç°æ¥å£</span>
type userServiceImpl struct {
    db *sql<span class="hljs-selector-class">.DB</span>
}

func (s *userServiceImpl) <span class="hljs-built_in">CreateUser</span>(user *User) error {
    <span class="hljs-comment">// å®ç°é€»è¾‘</span>
    return nil
}
```

#### <span class="hljs-number">4</span>. é”™è¯¯å¤„ç†
```go
func <span class="hljs-built_in">GetUser</span>(id int) (*User, error) {
    if id &lt;= <span class="hljs-number">0</span> {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("invalid user id: %d", id)
    }
    
    user, err := db.<span class="hljs-built_in">FindUser</span>(id)
    if err != nil {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to find user: %w", err)
    }
    
    return user, nil
}

<span class="hljs-comment">// ä½¿ç”¨</span>
user, err := <span class="hljs-built_in">GetUser</span>(<span class="hljs-number">123</span>)
if err != nil {
    log<span class="hljs-selector-class">.Printf</span>("Error: %v", err)
    return
}
```

## Cloudreve åç«¯æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶å’Œåº“
- **Gin**: é«˜æ€§èƒ½çš„ HTTP Web æ¡†æ¶
- **Ent**: Facebook å¼€æºçš„ Go ORM æ¡†æ¶
- **Cobra**: å‘½ä»¤è¡Œåº”ç”¨æ¡†æ¶
- **JWT**: JSON Web Token è®¤è¯
- **Viper**: é…ç½®ç®¡ç†
- **Logrus**: ç»“æ„åŒ–æ—¥å¿—

### æ•°æ®åº“æ”¯æŒ
- **MySQL**: ä¸»è¦ç”Ÿäº§æ•°æ®åº“
- **PostgreSQL**: ä¼ä¸šçº§æ•°æ®åº“
- **SQLite**: è½»é‡çº§åµŒå…¥å¼æ•°æ®åº“

## é¡¹ç›®æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„

```mermaid
graph TB
    subgraph <span class="hljs-string">"Cloudreve åç«¯åˆ†å±‚æ¶æ„"</span>
        A[HTTP å±‚] --&gt; B[è·¯ç”±å±‚ - routers/]
        B --&gt; C[æ§åˆ¶å™¨å±‚ - controllers/]
        C --&gt; D[æœåŠ¡å±‚ - service/]
        D --&gt; E[æ•°æ®è®¿é—®å±‚ - ent/]
        E --&gt; F[æ•°æ®åº“]
        
        G[ä¸­é—´ä»¶å±‚ - middleware/] --&gt; C
        H[å·¥å…·åŒ… - pkg/] --&gt; D
        I[åº”ç”¨é…ç½® - application/] --&gt; D
    end
```

### ç›®å½•ç»“æ„è¯¦è§£

```
Cloudreve/
â”œâ”€â”€ main.go                 # åº”ç”¨å…¥å£
â”œâ”€â”€ cmd/                    # å‘½ä»¤è¡Œå·¥å…·
â”‚   â”œâ”€â”€ root.go            # æ ¹å‘½ä»¤
â”‚   â”œâ”€â”€ server.go          # æœåŠ¡å™¨å‘½ä»¤
â”‚   â””â”€â”€ migrate.go         # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ routers/               # è·¯ç”±å±‚
â”‚   â”œâ”€â”€ router.go          # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ controllers/       # æ§åˆ¶å™¨
â”œâ”€â”€ service/               # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ admin/            # ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ user/             # ç”¨æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ explorer/         # æ–‡ä»¶ç®¡ç†æœåŠ¡
â”‚   â””â”€â”€ chat/             # èŠå¤©æœåŠ¡
â”œâ”€â”€ ent/                   # æ•°æ®æ¨¡å‹å±‚ (Ent ORM)
â”‚   â”œâ”€â”€ schema/           # æ•°æ®åº“æ¨¡å¼å®šä¹‰
â”‚   â”œâ”€â”€ migrate/          # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ *.go              # ç”Ÿæˆçš„å®ä½“ä»£ç 
â”œâ”€â”€ middleware/            # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.go           # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ cors.go           # è·¨åŸŸä¸­é—´ä»¶
â”‚   â””â”€â”€ session.go        # ä¼šè¯ä¸­é—´ä»¶
â”œâ”€â”€ pkg/                   # å·¥å…·åŒ…
â”‚   â”œâ”€â”€ auth/             # è®¤è¯å·¥å…·
â”‚   â”œâ”€â”€ cache/            # ç¼“å­˜å·¥å…·
â”‚   â”œâ”€â”€ conf/             # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ util/             # é€šç”¨å·¥å…·
â”œâ”€â”€ inventory/             # åº“å­˜ç®¡ç†
â””â”€â”€ application/           # åº”ç”¨é…ç½®
```

## Gin æ¡†æ¶è¯¦è§£

### åŸºæœ¬ç”¨æ³•

```go
package main

import (
    <span class="hljs-string">"github.com/gin-gonic/gin"</span>
    <span class="hljs-string">"net/http"</span>
)

func <span class="hljs-built_in">main</span>() {
    <span class="hljs-comment">// åˆ›å»º Gin å¼•æ“</span>
    r := gin.<span class="hljs-built_in">Default</span>()
    
    // å®šä¹‰è·¯ç”±
    r.<span class="hljs-built_in">GET</span>(<span class="hljs-string">"/ping"</span>, <span class="hljs-built_in">func</span>(c *gin.Context) {
        c<span class="hljs-selector-class">.JSON</span>(http.StatusOK, gin.H{
            "message": "pong",
        })
    })
    
    <span class="hljs-comment">// å¯åŠ¨æœåŠ¡å™¨</span>
    r<span class="hljs-selector-class">.Run</span>(":<span class="hljs-number">8080</span>")
}
```

### è·¯ç”±ç»„ç»‡

```go
<span class="hljs-comment">// routers/router.go</span>
func <span class="hljs-built_in">InitRouter</span>(dep dependency.Dep) *gin<span class="hljs-selector-class">.Engine</span> {
    r := gin.<span class="hljs-built_in">New</span>()
    
    // å…¨å±€ä¸­é—´ä»¶
    r.<span class="hljs-built_in">Use</span>(gin.<span class="hljs-built_in">Recovery</span>())
    r.<span class="hljs-built_in">Use</span>(middleware.<span class="hljs-built_in">CORS</span>())
    
    // API ç‰ˆæœ¬åˆ†ç»„
    v4 := r.<span class="hljs-built_in">Group</span>(<span class="hljs-string">"/api/v4"</span>)
    
    // ç”¨æˆ·ç›¸å…³è·¯ç”±
    user := v4.<span class="hljs-built_in">Group</span>(<span class="hljs-string">"/user"</span>)
    user.<span class="hljs-built_in">Use</span>(middleware.<span class="hljs-built_in">LoginRequired</span>())
    {
        user<span class="hljs-selector-class">.GET</span>("/info", controllers.GetUserInfo)
        user<span class="hljs-selector-class">.PUT</span>("/info", controllers.UpdateUserInfo)
    }
    
    <span class="hljs-comment">// æ–‡ä»¶ç›¸å…³è·¯ç”±</span>
    file := v4.<span class="hljs-built_in">Group</span>(<span class="hljs-string">"/file"</span>)
    {
        file<span class="hljs-selector-class">.GET</span>("/list", controllers.ListFiles)
        file<span class="hljs-selector-class">.POST</span>("/upload", controllers.UploadFile)
    }
    
    return r
}
```

### ä¸­é—´ä»¶ç³»ç»Ÿ

```go
<span class="hljs-comment">// middleware/auth.go</span>
func <span class="hljs-built_in">LoginRequired</span>() gin<span class="hljs-selector-class">.HandlerFunc</span> {
    return <span class="hljs-built_in">func</span>(c *gin.Context) {
        <span class="hljs-comment">// ä»è¯·æ±‚å¤´è·å– token</span>
        token := c.<span class="hljs-built_in">GetHeader</span>(<span class="hljs-string">"Authorization"</span>)
        if token == <span class="hljs-string">""</span> {
            c<span class="hljs-selector-class">.JSON</span>(http.StatusUnauthorized, gin.H{
                "error": "Missing authorization token",
            })
            c<span class="hljs-selector-class">.Abort</span>()
            return
        }
        
        <span class="hljs-comment">// éªŒè¯ token</span>
        user, err := <span class="hljs-built_in">validateToken</span>(token)
        if err != nil {
            c<span class="hljs-selector-class">.JSON</span>(http.StatusUnauthorized, gin.H{
                "error": "Invalid token",
            })
            c<span class="hljs-selector-class">.Abort</span>()
            return
        }
        
        <span class="hljs-comment">// å°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°ä¸Šä¸‹æ–‡</span>
        c<span class="hljs-selector-class">.Set</span>("user", user)
        c<span class="hljs-selector-class">.Next</span>()
    }
}
```

## Ent ORM æ¡†æ¶

### æ¨¡å¼å®šä¹‰

```go
<span class="hljs-comment">// ent/schema/user.go</span>
package schema

import (
    "entgo.io/ent"
    "entgo.io/ent/schema/field"
    "entgo.io/ent/schema/edge"
)

<span class="hljs-comment">// User ç”¨æˆ·å®ä½“</span>
type User struct {
    ent<span class="hljs-selector-class">.Schema</span>
}

<span class="hljs-comment">// Fields å­—æ®µå®šä¹‰</span>
func (User) <span class="hljs-built_in">Fields</span>() <span class="hljs-selector-attr">[]</span>ent<span class="hljs-selector-class">.Field</span> {
    return <span class="hljs-selector-attr">[]</span>ent<span class="hljs-selector-class">.Field</span>{
        field<span class="hljs-selector-class">.String</span>("name").
            <span class="hljs-built_in">NotEmpty</span>().
            <span class="hljs-built_in">Comment</span>("ç”¨æˆ·å"),
        field<span class="hljs-selector-class">.String</span>("email").
            <span class="hljs-built_in">Unique</span>().
            <span class="hljs-built_in">Comment</span>("é‚®ç®±"),
        field<span class="hljs-selector-class">.String</span>("password").
            <span class="hljs-built_in">Sensitive</span>().
            <span class="hljs-built_in">Comment</span>("å¯†ç "),
        field<span class="hljs-selector-class">.Time</span>("created_at").
            Default(time.Now).
            <span class="hljs-built_in">Comment</span>("åˆ›å»ºæ—¶é—´"),
    }
}

<span class="hljs-comment">// Edges å…³è”å…³ç³»</span>
func (User) <span class="hljs-built_in">Edges</span>() <span class="hljs-selector-attr">[]</span>ent<span class="hljs-selector-class">.Edge</span> {
    return <span class="hljs-selector-attr">[]</span>ent<span class="hljs-selector-class">.Edge</span>{
        edge<span class="hljs-selector-class">.To</span>("files", File.Type).
            <span class="hljs-built_in">Comment</span>("ç”¨æˆ·æ–‡ä»¶"),
        edge<span class="hljs-selector-class">.To</span>("groups", Group.Type).
            <span class="hljs-built_in">Through</span>("user_groups", UserGroup.Type).
            <span class="hljs-built_in">Comment</span>("ç”¨æˆ·ç»„"),
    }
}
```

### æ•°æ®åº“æ“ä½œ

```go
<span class="hljs-comment">// service/user/user.go</span>
type UserService struct {
    client *ent<span class="hljs-selector-class">.Client</span>
}

func <span class="hljs-built_in">NewUserService</span>(client *ent.Client) *UserService {
    return &amp;UserService{client: client}
}

<span class="hljs-comment">// åˆ›å»ºç”¨æˆ·</span>
func (s *UserService) <span class="hljs-built_in">CreateUser</span>(ctx context.Context, req *CreateUserRequest) (*ent.User, error) {
    user, err := s.client.User.
        <span class="hljs-built_in">Create</span>().
        <span class="hljs-built_in">SetName</span>(req.Name).
        <span class="hljs-built_in">SetEmail</span>(req.Email).
        <span class="hljs-built_in">SetPassword</span>(<span class="hljs-built_in">hashPassword</span>(req.Password)).
        <span class="hljs-built_in">Save</span>(ctx)
    
    if err != nil {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to create user: %w", err)
    }
    
    return user, nil
}

<span class="hljs-comment">// æŸ¥è¯¢ç”¨æˆ·</span>
func (s *UserService) <span class="hljs-built_in">GetUser</span>(ctx context.Context, id int) (*ent.User, error) {
    user, err := s.client.User.
        <span class="hljs-built_in">Query</span>().
        <span class="hljs-built_in">Where</span>(user.<span class="hljs-built_in">ID</span>(id)).
        <span class="hljs-built_in">WithFiles</span>().  // é¢„åŠ è½½æ–‡ä»¶å…³è”
        <span class="hljs-built_in">Only</span>(ctx)
    
    if err != nil {
        if ent<span class="hljs-selector-class">.IsNotFound</span>(err) {
            return nil, fmt<span class="hljs-selector-class">.Errorf</span>("user not found")
        }
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to get user: %w", err)
    }
    
    return user, nil
}

<span class="hljs-comment">// æ›´æ–°ç”¨æˆ·</span>
func (s *UserService) <span class="hljs-built_in">UpdateUser</span>(ctx context.Context, id int, req *UpdateUserRequest) (*ent.User, error) {
    user, err := s.client.User.
        <span class="hljs-built_in">UpdateOneID</span>(id).
        <span class="hljs-built_in">SetName</span>(req.Name).
        <span class="hljs-built_in">SetEmail</span>(req.Email).
        <span class="hljs-built_in">Save</span>(ctx)
    
    if err != nil {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to update user: %w", err)
    }
    
    return user, nil
}
```

## æ§åˆ¶å™¨å±‚è®¾è®¡

### æ§åˆ¶å™¨ç»“æ„

```go
<span class="hljs-comment">// routers/controllers/user.go</span>
package controllers

import (
    "github.com/gin-gonic/gin"
    "github.com/cloudreve/Cloudreve/v4/service/user"
)

<span class="hljs-comment">// GetUserInfo è·å–ç”¨æˆ·ä¿¡æ¯</span>
func <span class="hljs-built_in">GetUserInfo</span>(c *gin.Context) {
    <span class="hljs-comment">// ä»ä¸Šä¸‹æ–‡è·å–ç”¨æˆ·</span>
    currentUser, exists := c.<span class="hljs-built_in">Get</span>(<span class="hljs-string">"user"</span>)
    if !exists {
        c<span class="hljs-selector-class">.JSON</span>(http.StatusUnauthorized, gin.H{
            "error": "User not found in context",
        })
        return
    }
    
    user := currentUser.(*ent.User)
    
    // è¿”å›ç”¨æˆ·ä¿¡æ¯
    c.<span class="hljs-built_in">JSON</span>(http.StatusOK, gin.H{
        "data": gin.H{
            "id":    user.ID,
            <span class="hljs-string">"name"</span>:  user.Name,
            <span class="hljs-string">"email"</span>: user.Email,
        },
    })
}

<span class="hljs-comment">// UpdateUserInfo æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span>
func <span class="hljs-built_in">UpdateUserInfo</span>(c *gin.Context) {
    <span class="hljs-selector-tag">var</span> req user<span class="hljs-selector-class">.UpdateUserRequest</span>
    
    <span class="hljs-comment">// ç»‘å®šè¯·æ±‚å‚æ•°</span>
    if err := c.<span class="hljs-built_in">ShouldBindJSON</span>(&amp;req); err != nil {
        c<span class="hljs-selector-class">.JSON</span>(http.StatusBadRequest, gin.H{
            "error": err.Error(),
        })
        return
    }
    
    <span class="hljs-comment">// è·å–å½“å‰ç”¨æˆ·</span>
    currentUser := c.<span class="hljs-built_in">MustGet</span>(<span class="hljs-string">"user"</span>).(*ent.User)
    
    // è°ƒç”¨æœåŠ¡å±‚
    userService := user.<span class="hljs-built_in">NewUserService</span>(ent.<span class="hljs-built_in">GetClient</span>())
    updatedUser, err := userService.<span class="hljs-built_in">UpdateUser</span>(c.Request.<span class="hljs-built_in">Context</span>(), currentUser.ID, &amp;req)
    if err != nil {
        c<span class="hljs-selector-class">.JSON</span>(http.StatusInternalServerError, gin.H{
            "error": err.Error(),
        })
        return
    }
    
    c<span class="hljs-selector-class">.JSON</span>(http.StatusOK, gin.H{
        "data": updatedUser,
    })
}
```

### å‚æ•°ç»‘å®šå’ŒéªŒè¯

```go
<span class="hljs-comment">// service/user/types.go</span>
type CreateUserRequest struct {
    Name     string `json:<span class="hljs-string">"name"</span> binding:<span class="hljs-string">"required,min=2,max=50"</span>`
    Email    string `json:<span class="hljs-string">"email"</span> binding:<span class="hljs-string">"required,email"</span>`
    Password string `json:<span class="hljs-string">"password"</span> binding:<span class="hljs-string">"required,min=6"</span>`
}

type UpdateUserRequest struct {
    Name  string `json:<span class="hljs-string">"name"</span> binding:<span class="hljs-string">"omitempty,min=2,max=50"</span>`
    Email string `json:<span class="hljs-string">"email"</span> binding:<span class="hljs-string">"omitempty,email"</span>`
}

<span class="hljs-comment">// è‡ªå®šä¹‰éªŒè¯å™¨</span>
func <span class="hljs-built_in">ValidatePassword</span>(fl validator.FieldLevel) bool {
    password := fl.<span class="hljs-built_in">Field</span>().<span class="hljs-built_in">String</span>()
    // å¯†ç å¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—
    hasLetter := regexp.<span class="hljs-built_in">MustCompile</span>(`[a-zA-Z]`).<span class="hljs-built_in">MatchString</span>(password)
    hasNumber := regexp.<span class="hljs-built_in">MustCompile</span>(`[<span class="hljs-number">0</span>-<span class="hljs-number">9</span>]`).<span class="hljs-built_in">MatchString</span>(password)
    return hasLetter &amp;&amp; hasNumber
}
```

## æœåŠ¡å±‚è®¾è®¡æ¨¡å¼

### ä¾èµ–æ³¨å…¥

```go
<span class="hljs-comment">// application/dependency/dependency.go</span>
type Dep interface {
    <span class="hljs-built_in">Logger</span>() logging<span class="hljs-selector-class">.Logger</span>
    <span class="hljs-built_in">ConfigProvider</span>() conf<span class="hljs-selector-class">.Provider</span>
    <span class="hljs-built_in">DatabaseClient</span>() *ent<span class="hljs-selector-class">.Client</span>
    <span class="hljs-built_in">CacheProvider</span>() cache<span class="hljs-selector-class">.Driver</span>
}

type dep struct {
    logger         logging<span class="hljs-selector-class">.Logger</span>
    configProvider conf<span class="hljs-selector-class">.Provider</span>
    dbClient       *ent<span class="hljs-selector-class">.Client</span>
    cacheProvider  cache<span class="hljs-selector-class">.Driver</span>
}

func <span class="hljs-built_in">NewDep</span>() Dep {
    return &amp;dep{
        logger:         logging.<span class="hljs-built_in">NewLogger</span>(),
        configProvider: conf.<span class="hljs-built_in">NewProvider</span>(),
        dbClient:       ent.<span class="hljs-built_in">NewClient</span>(),
        cacheProvider:  cache.<span class="hljs-built_in">NewRedisDriver</span>(),
    }
}
```

### æœåŠ¡æ¥å£è®¾è®¡

```go
<span class="hljs-comment">// service/user/interface.go</span>
type Service interface {
    <span class="hljs-built_in">CreateUser</span>(ctx context.Context, req *CreateUserRequest) (*ent.User, error)
    <span class="hljs-built_in">GetUser</span>(ctx context.Context, id int) (*ent.User, error)
    <span class="hljs-built_in">UpdateUser</span>(ctx context.Context, id int, req *UpdateUserRequest) (*ent.User, error)
    <span class="hljs-built_in">DeleteUser</span>(ctx context.Context, id int) error
    <span class="hljs-built_in">ListUsers</span>(ctx context.Context, req *ListUsersRequest) ([]*ent.User, error)
}

<span class="hljs-comment">// service/user/service.go</span>
type service struct {
    dep    dependency<span class="hljs-selector-class">.Dep</span>
    client *ent<span class="hljs-selector-class">.Client</span>
    logger logging<span class="hljs-selector-class">.Logger</span>
}

func <span class="hljs-built_in">NewService</span>(dep dependency.Dep) Service {
    return &amp;service{
        dep:    dep,
        client: dep.<span class="hljs-built_in">DatabaseClient</span>(),
        logger: dep.<span class="hljs-built_in">Logger</span>(),
    }
}
```

## è®¤è¯å’Œæˆæƒç³»ç»Ÿ

### JWT è®¤è¯

```go
<span class="hljs-comment">// pkg/auth/jwt.go</span>
type JWTAuth struct {
    secretKey <span class="hljs-selector-attr">[]</span>byte
    issuer    string
}

type Claims struct {
    UserID int    `json:<span class="hljs-string">"user_id"</span>`
    Email  string `json:<span class="hljs-string">"email"</span>`
    jwt.RegisteredClaims
}

func (j *JWTAuth) <span class="hljs-built_in">GenerateToken</span>(user *ent.User) (string, error) {
    claims := &amp;Claims{
        UserID: user.ID,
        Email:  user.Email,
        RegisteredClaims: jwt.RegisteredClaims{
            ExpiresAt: jwt.<span class="hljs-built_in">NewNumericDate</span>(time.<span class="hljs-built_in">Now</span>().<span class="hljs-built_in">Add</span>(<span class="hljs-number">24</span> * time.Hour)),
            IssuedAt:  jwt.<span class="hljs-built_in">NewNumericDate</span>(time.<span class="hljs-built_in">Now</span>()),
            Issuer:    j.issuer,
        },
    }
    
    token := jwt.<span class="hljs-built_in">NewWithClaims</span>(jwt.SigningMethodHS256, claims)
    return token.<span class="hljs-built_in">SignedString</span>(j.secretKey)
}

func (j *JWTAuth) <span class="hljs-built_in">ValidateToken</span>(tokenString string) (*Claims, error) {
    token, err := jwt.<span class="hljs-built_in">ParseWithClaims</span>(tokenString, &amp;Claims{}, <span class="hljs-built_in">func</span>(token *jwt.Token) (interface{}, error) {
        return j<span class="hljs-selector-class">.secretKey</span>, nil
    })
    
    if err != nil {
        return nil, err
    }
    
    if claims, ok := token.Claims.(*Claims); ok &amp;&amp; token<span class="hljs-selector-class">.Valid</span> {
        return claims, nil
    }
    
    return nil, fmt<span class="hljs-selector-class">.Errorf</span>("invalid token")
}
```

### æƒé™æ§åˆ¶

```go
<span class="hljs-comment">// middleware/rbac.go</span>
func <span class="hljs-built_in">RequirePermission</span>(permission string) gin<span class="hljs-selector-class">.HandlerFunc</span> {
    return <span class="hljs-built_in">func</span>(c *gin.Context) {
        user := c.<span class="hljs-built_in">MustGet</span>(<span class="hljs-string">"user"</span>).(*ent.User)
        
        // æ£€æŸ¥ç”¨æˆ·æƒé™
        hasPermission, err := <span class="hljs-built_in">checkUserPermission</span>(user.ID, permission)
        if err != nil {
            c<span class="hljs-selector-class">.JSON</span>(http.StatusInternalServerError, gin.H{
                "error": "Failed to check permission",
            })
            c<span class="hljs-selector-class">.Abort</span>()
            return
        }
        
        if !hasPermission {
            c<span class="hljs-selector-class">.JSON</span>(http.StatusForbidden, gin.H{
                "error": "Insufficient permissions",
            })
            c<span class="hljs-selector-class">.Abort</span>()
            return
        }
        
        c<span class="hljs-selector-class">.Next</span>()
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼</span>
admin := v4.<span class="hljs-built_in">Group</span>(<span class="hljs-string">"/admin"</span>)
admin.<span class="hljs-built_in">Use</span>(middleware.<span class="hljs-built_in">LoginRequired</span>())
admin.<span class="hljs-built_in">Use</span>(middleware.<span class="hljs-built_in">RequirePermission</span>(<span class="hljs-string">"admin:read"</span>))
{
    admin<span class="hljs-selector-class">.GET</span>("/users", controllers.ListUsers)
}
```

## æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿ

### å­˜å‚¨æ¥å£è®¾è®¡

```go
<span class="hljs-comment">// pkg/filesystem/driver.go</span>
type Driver interface {
    <span class="hljs-comment">// ä¸Šä¼ æ–‡ä»¶</span>
    <span class="hljs-built_in">Put</span>(ctx context.Context, path string, file io.Reader) error
    
    <span class="hljs-comment">// è·å–æ–‡ä»¶</span>
    <span class="hljs-built_in">Get</span>(ctx context.Context, path string) (io.ReadCloser, error)
    
    <span class="hljs-comment">// åˆ é™¤æ–‡ä»¶</span>
    <span class="hljs-built_in">Delete</span>(ctx context.Context, path string) error
    
    <span class="hljs-comment">// è·å–æ–‡ä»¶ä¿¡æ¯</span>
    <span class="hljs-built_in">Stat</span>(ctx context.Context, path string) (*FileInfo, error)
    
    <span class="hljs-comment">// åˆ—å‡ºæ–‡ä»¶</span>
    <span class="hljs-built_in">List</span>(ctx context.Context, path string) ([]*FileInfo, error)
}

type FileInfo struct {
    Name    string
    Size    int64
    ModTime <span class="hljs-selector-tag">time</span><span class="hljs-selector-class">.Time</span>
    IsDir   bool
}
```

### æœ¬åœ°å­˜å‚¨å®ç°

```go
<span class="hljs-comment">// pkg/filesystem/local.go</span>
type LocalDriver struct {
    rootPath string
}

func <span class="hljs-built_in">NewLocalDriver</span>(rootPath string) Driver {
    return &amp;LocalDriver{rootPath: rootPath}
}

func (d *LocalDriver) <span class="hljs-built_in">Put</span>(ctx context.Context, path string, file io.Reader) error {
    fullPath := filepath.<span class="hljs-built_in">Join</span>(d.rootPath, path)
    
    // ç¡®ä¿ç›®å½•å­˜åœ¨
    if err := os.<span class="hljs-built_in">MkdirAll</span>(filepath.<span class="hljs-built_in">Dir</span>(fullPath), <span class="hljs-number">0755</span>); err != nil {
        return fmt<span class="hljs-selector-class">.Errorf</span>("failed to create directory: %w", err)
    }
    
    <span class="hljs-comment">// åˆ›å»ºæ–‡ä»¶</span>
    dst, err := os.<span class="hljs-built_in">Create</span>(fullPath)
    if err != nil {
        return fmt<span class="hljs-selector-class">.Errorf</span>("failed to create file: %w", err)
    }
    defer dst<span class="hljs-selector-class">.Close</span>()
    
    <span class="hljs-comment">// å¤åˆ¶æ–‡ä»¶å†…å®¹</span>
    _, err = io<span class="hljs-selector-class">.Copy</span>(dst, file)
    if err != nil {
        return fmt<span class="hljs-selector-class">.Errorf</span>("failed to write file: %w", err)
    }
    
    return nil
}

func (d *LocalDriver) <span class="hljs-built_in">Get</span>(ctx context.Context, path string) (io.ReadCloser, error) {
    fullPath := filepath.<span class="hljs-built_in">Join</span>(d.rootPath, path)
    
    file, err := os.<span class="hljs-built_in">Open</span>(fullPath)
    if err != nil {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to open file: %w", err)
    }
    
    return file, nil
}
```

## èŠå¤©æœåŠ¡å®ç°

### OpenRouter å®¢æˆ·ç«¯

```go
<span class="hljs-comment">// pkg/openrouter/client.go</span>
type Client struct {
    apiKey     string
    baseURL    string
    httpClient *http<span class="hljs-selector-class">.Client</span>
    logger     logging<span class="hljs-selector-class">.Logger</span>
}

type ChatRequest struct {
    Model       string    `json:<span class="hljs-string">"model"</span>`
    Messages    []Message `json:<span class="hljs-string">"messages"</span>`
    Stream      bool      `json:<span class="hljs-string">"stream"</span>`
    Temperature float64   `json:<span class="hljs-string">"temperature"</span>`
    MaxTokens   int       `json:<span class="hljs-string">"max_tokens"</span>`
}

type Message struct {
    Role    string `json:<span class="hljs-string">"role"</span>`
    Content string `json:<span class="hljs-string">"content"</span>`
}

func (c *Client) <span class="hljs-built_in">Chat</span>(ctx context.Context, req ChatRequest) (*ChatResponse, error) {
    reqBody, err := json.<span class="hljs-built_in">Marshal</span>(req)
    if err != nil {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to marshal request: %w", err)
    }
    
    httpReq, err := http.<span class="hljs-built_in">NewRequestWithContext</span>(ctx, <span class="hljs-string">"POST"</span>, c.baseURL+<span class="hljs-string">"/chat/completions"</span>, bytes.<span class="hljs-built_in">NewReader</span>(reqBody))
    if err != nil {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to create request: %w", err)
    }
    
    httpReq<span class="hljs-selector-class">.Header</span><span class="hljs-selector-class">.Set</span>("Authorization", "Bearer "+c.apiKey)
    httpReq<span class="hljs-selector-class">.Header</span><span class="hljs-selector-class">.Set</span>("Content-Type", "application/json")
    
    resp, err := c.httpClient.<span class="hljs-built_in">Do</span>(httpReq)
    if err != nil {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to send request: %w", err)
    }
    defer resp<span class="hljs-selector-class">.Body</span><span class="hljs-selector-class">.Close</span>()
    
    <span class="hljs-selector-tag">var</span> chatResp ChatResponse
    if err := json.<span class="hljs-built_in">NewDecoder</span>(resp.Body).<span class="hljs-built_in">Decode</span>(&amp;chatResp); err != nil {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to decode response: %w", err)
    }
    
    return &amp;chatResp, nil
}
```

### æµå¼å“åº”å¤„ç†

```go
<span class="hljs-comment">// service/chat/chat.go</span>
type StreamCallback <span class="hljs-built_in">func</span>(content string, done bool) error

func (s *ChatService) <span class="hljs-built_in">StreamChat</span>(ctx context.Context, user *ent.User, message string, callback StreamCallback) error {
    req := openrouter.ChatRequest{
        Model: <span class="hljs-string">"google/gemini-2.5-pro"</span>,
        Messages: []openrouter.Message{
            {
                Role:    <span class="hljs-string">"system"</span>,
                Content: <span class="hljs-string">"ä½ æ˜¯ Cloudreve äº‘ç›˜çš„ AI åŠ©æ‰‹"</span>,
            },
            {
                Role:    <span class="hljs-string">"user"</span>,
                Content: message,
            },
        },
        Stream:      true,
        Temperature: <span class="hljs-number">0.7</span>,
        MaxTokens:   <span class="hljs-number">2000</span>,
    }
    
    return s<span class="hljs-selector-class">.client</span><span class="hljs-selector-class">.ChatStream</span>(ctx, req, callback)
}

<span class="hljs-comment">// åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨</span>
func <span class="hljs-built_in">ChatStream</span>(c *gin.Context) {
    <span class="hljs-comment">// è®¾ç½® SSE å“åº”å¤´</span>
    c<span class="hljs-selector-class">.Header</span>("Content-Type", "text/event-stream")
    c<span class="hljs-selector-class">.Header</span>("Cache-Control", "no-cache")
    c<span class="hljs-selector-class">.Header</span>("Connection", "keep-alive")
    
    <span class="hljs-comment">// è·å–å‚æ•°</span>
    service := ParametersFromContext[*chatsvc.Service](c, ChatParameterCtx)
    user := c.<span class="hljs-built_in">MustGet</span>(<span class="hljs-string">"user"</span>).(*ent.User)
    
    // åˆ›å»ºèŠå¤©æœåŠ¡
    chatService := chatsvc.<span class="hljs-built_in">NewChatService</span>(dep)
    
    // æµå¼å›è°ƒ
    callback := <span class="hljs-built_in">func</span>(content string, done bool) error {
        data := map[string]interface{}{
            "choices": []map[string]interface{}{
                {
                    "delta": map[string]interface{}{
                        "<span class="hljs-attribute">content</span>": content,
                    },
                    "finish_reason": nil,
                },
            },
        }
        
        if done {
            data<span class="hljs-selector-attr">[<span class="hljs-string">"choices"</span>]</span>.([]map[string]interface{})<span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[<span class="hljs-string">"finish_reason"</span>]</span> = "stop"
        }
        
        jsonData, _ := json.<span class="hljs-built_in">Marshal</span>(data)
        fmt.<span class="hljs-built_in">Fprintf</span>(c.Writer, <span class="hljs-string">"data: %s\n\n"</span>, jsonData)
        c.Writer.<span class="hljs-built_in">Flush</span>()
        
        return nil
    }
    
    <span class="hljs-comment">// æ‰§è¡Œæµå¼èŠå¤©</span>
    err := chatService.<span class="hljs-built_in">StreamChat</span>(c.Request.<span class="hljs-built_in">Context</span>(), user, service.Message, callback)
    if err != nil {
        c<span class="hljs-selector-class">.JSON</span>(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }
}
```

## é”™è¯¯å¤„ç†å’Œæ—¥å¿—

### ç»Ÿä¸€é”™è¯¯å¤„ç†

```go
<span class="hljs-comment">// pkg/errors/errors.go</span>
type AppError struct {
    <span class="hljs-selector-tag">Code</span>    int    `json:<span class="hljs-string">"code"</span>`
    Message string `json:<span class="hljs-string">"message"</span>`
    Details string `json:<span class="hljs-string">"details,omitempty"</span>`
}

func (e *AppError) <span class="hljs-built_in">Error</span>() string {
    return e<span class="hljs-selector-class">.Message</span>
}

func <span class="hljs-built_in">NewAppError</span>(code int, message string) *AppError {
    return &amp;AppError{
        <span class="hljs-selector-tag">Code</span>:    code,
        Message: message,
    }
}

<span class="hljs-comment">// é¢„å®šä¹‰é”™è¯¯</span>
<span class="hljs-selector-tag">var</span> (
    ErrUserNotFound     = NewAppError(<span class="hljs-number">404</span>, "User not found")
    ErrInvalidPassword  = <span class="hljs-built_in">NewAppError</span>(<span class="hljs-number">400</span>, "Invalid password")
    ErrUnauthorized     = <span class="hljs-built_in">NewAppError</span>(<span class="hljs-number">401</span>, "Unauthorized")
    ErrForbidden        = <span class="hljs-built_in">NewAppError</span>(<span class="hljs-number">403</span>, "Forbidden")
)
```

### ç»“æ„åŒ–æ—¥å¿—

```go
<span class="hljs-comment">// pkg/logging/logger.go</span>
type Logger interface {
    <span class="hljs-built_in">Debug</span>(msg string, fields ...Field)
    <span class="hljs-built_in">Info</span>(msg string, fields ...Field)
    <span class="hljs-built_in">Warn</span>(msg string, fields ...Field)
    <span class="hljs-built_in">Error</span>(msg string, fields ...Field)
    <span class="hljs-built_in">Fatal</span>(msg string, fields ...Field)
}

type Field struct {
    Key   string
    Value interface{}
}

func <span class="hljs-built_in">String</span>(key, value string) Field {
    return Field{Key: key, Value: value}
}

func <span class="hljs-built_in">Int</span>(key string, value int) Field {
    return Field{Key: key, Value: value}
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼</span>
logger<span class="hljs-selector-class">.Info</span>("User created successfully",
    String("user_id", user.ID),
    <span class="hljs-built_in">String</span>("email", user.Email),
    <span class="hljs-built_in">String</span>("ip", c.ClientIP()),
)
```

## é…ç½®ç®¡ç†

### é…ç½®ç»“æ„

```go
<span class="hljs-comment">// pkg/conf/conf.go</span>
type Config struct {
    System   SystemConfig   `mapstructure:<span class="hljs-string">"system"</span>`
    Database DatabaseConfig `mapstructure:<span class="hljs-string">"database"</span>`
    Redis    RedisConfig    `mapstructure:<span class="hljs-string">"redis"</span>`
    Storage  StorageConfig  `mapstructure:<span class="hljs-string">"storage"</span>`
}

type SystemConfig struct {
    Mode        string `mapstructure:<span class="hljs-string">"mode"</span>`
    Port        int    `mapstructure:<span class="hljs-string">"port"</span>`
    Debug       bool   `mapstructure:<span class="hljs-string">"debug"</span>`
    SessionName string `mapstructure:<span class="hljs-string">"session_name"</span>`
}

type DatabaseConfig struct {
    Type     string `mapstructure:<span class="hljs-string">"type"</span>`
    Host     string `mapstructure:<span class="hljs-string">"host"</span>`
    Port     int    `mapstructure:<span class="hljs-string">"port"</span>`
    User     string `mapstructure:<span class="hljs-string">"user"</span>`
    Password string `mapstructure:<span class="hljs-string">"password"</span>`
    Name     string `mapstructure:<span class="hljs-string">"name"</span>`
}

<span class="hljs-comment">// åŠ è½½é…ç½®</span>
func <span class="hljs-built_in">LoadConfig</span>(path string) (*Config, error) {
    viper<span class="hljs-selector-class">.SetConfigFile</span>(path)
    viper<span class="hljs-selector-class">.SetConfigType</span>("yaml")
    
    if err := viper.<span class="hljs-built_in">ReadInConfig</span>(); err != nil {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to read config: %w", err)
    }
    
    <span class="hljs-selector-tag">var</span> config Config
    if err := viper.<span class="hljs-built_in">Unmarshal</span>(&amp;config); err != nil {
        return nil, fmt<span class="hljs-selector-class">.Errorf</span>("failed to unmarshal config: %w", err)
    }
    
    return &amp;config, nil
}
```

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

```go
<span class="hljs-comment">// service/user/user_test.go</span>
func <span class="hljs-built_in">TestUserService_CreateUser</span>(t *testing.T) {
    <span class="hljs-comment">// è®¾ç½®æµ‹è¯•æ•°æ®åº“</span>
    client := enttest.<span class="hljs-built_in">Open</span>(t, <span class="hljs-string">"sqlite3"</span>, <span class="hljs-string">"file:ent?mode=memory&amp;cache=shared&amp;_fk=1"</span>)
    defer client.<span class="hljs-built_in">Close</span>()
    
    // åˆ›å»ºæœåŠ¡
    service := <span class="hljs-built_in">NewUserService</span>(client)
    
    // æµ‹è¯•æ•°æ®
    req := &amp;CreateUserRequest{
        Name:     <span class="hljs-string">"Test User"</span>,
        Email:    <span class="hljs-string">"test@example.com"</span>,
        Password: <span class="hljs-string">"password123"</span>,
    }
    
    <span class="hljs-comment">// æ‰§è¡Œæµ‹è¯•</span>
    user, err := service.<span class="hljs-built_in">CreateUser</span>(context.<span class="hljs-built_in">Background</span>(), req)
    
    // æ–­è¨€
    assert.<span class="hljs-built_in">NoError</span>(t, err)
    assert.<span class="hljs-built_in">NotNil</span>(t, user)
    assert.<span class="hljs-built_in">Equal</span>(t, req.Name, user.Name)
    assert.<span class="hljs-built_in">Equal</span>(t, req.Email, user.Email)
}
```

### é›†æˆæµ‹è¯•

```go
<span class="hljs-comment">// test/integration/api_test.go</span>
func <span class="hljs-built_in">TestUserAPI</span>(t *testing.T) {
    <span class="hljs-comment">// è®¾ç½®æµ‹è¯•æœåŠ¡å™¨</span>
    router := <span class="hljs-built_in">setupTestRouter</span>()
    
    // åˆ›å»ºç”¨æˆ·
    createReq := `{"name":<span class="hljs-string">"Test User"</span>,<span class="hljs-string">"email"</span>:<span class="hljs-string">"test@example.com"</span>,<span class="hljs-string">"password"</span>:<span class="hljs-string">"password123"</span>}`
    w := httptest.<span class="hljs-built_in">NewRecorder</span>()
    req, _ := http.<span class="hljs-built_in">NewRequest</span>(<span class="hljs-string">"POST"</span>, <span class="hljs-string">"/api/v4/user"</span>, strings.<span class="hljs-built_in">NewReader</span>(createReq))
    req.Header.<span class="hljs-built_in">Set</span>(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>)
    
    router.<span class="hljs-built_in">ServeHTTP</span>(w, req)
    
    assert.<span class="hljs-built_in">Equal</span>(t, http.StatusCreated, w.Code)
    
    var response map[string]interface{}
    json<span class="hljs-selector-class">.Unmarshal</span>(w.Body.Bytes(), &amp;response)
    
    assert<span class="hljs-selector-class">.Equal</span>(t, "Test User", response["data"].(map[string]interface{})<span class="hljs-selector-attr">[<span class="hljs-string">"name"</span>]</span>)
}
```

## æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–

```go
<span class="hljs-comment">// ä½¿ç”¨ç´¢å¼•</span>
func (User) <span class="hljs-built_in">Indexes</span>() <span class="hljs-selector-attr">[]</span>ent<span class="hljs-selector-class">.Index</span> {
    return <span class="hljs-selector-attr">[]</span>ent<span class="hljs-selector-class">.Index</span>{
        index<span class="hljs-selector-class">.Fields</span>("email")<span class="hljs-selector-class">.Unique</span>(),
        index<span class="hljs-selector-class">.Fields</span>("name", "created_at"),
    }
}

<span class="hljs-comment">// æ‰¹é‡æ“ä½œ</span>
func (s *UserService) <span class="hljs-built_in">CreateUsers</span>(ctx context.Context, users []*CreateUserRequest) ([]*ent.User, error) {
    bulk := <span class="hljs-built_in">make</span>([]*ent.UserCreate, <span class="hljs-built_in">len</span>(users))
    for i, req := range users {
        bulk<span class="hljs-selector-attr">[i]</span> = s<span class="hljs-selector-class">.client</span><span class="hljs-selector-class">.User</span><span class="hljs-selector-class">.Create</span>().
            <span class="hljs-built_in">SetName</span>(req.Name).
            <span class="hljs-built_in">SetEmail</span>(req.Email).
            <span class="hljs-built_in">SetPassword</span>(hashPassword(req.Password))
    }
    
    return s<span class="hljs-selector-class">.client</span><span class="hljs-selector-class">.User</span><span class="hljs-selector-class">.CreateBulk</span>(bulk...)<span class="hljs-selector-class">.Save</span>(ctx)
}

<span class="hljs-comment">// é¢„åŠ è½½å…³è”</span>
func (s *UserService) <span class="hljs-built_in">GetUserWithFiles</span>(ctx context.Context, id int) (*ent.User, error) {
    return s<span class="hljs-selector-class">.client</span><span class="hljs-selector-class">.User</span>.
        <span class="hljs-built_in">Query</span>().
        <span class="hljs-built_in">Where</span>(user.ID(id)).
        <span class="hljs-built_in">WithFiles</span>(func(q *ent.FileQuery) {
            <span class="hljs-selector-tag">q</span><span class="hljs-selector-class">.Order</span>(ent.Desc(file.FieldCreatedAt)).
              <span class="hljs-built_in">Limit</span>(<span class="hljs-number">10</span>)
        }).
        <span class="hljs-built_in">Only</span>(ctx)
}
```

### ç¼“å­˜ç­–ç•¥

```go
<span class="hljs-comment">// pkg/cache/cache.go</span>
type Cache interface {
    <span class="hljs-built_in">Get</span>(ctx context.Context, key string) (string, error)
    <span class="hljs-built_in">Set</span>(ctx context.Context, key string, value string, ttl time.Duration) error
    <span class="hljs-built_in">Delete</span>(ctx context.Context, key string) error
}

<span class="hljs-comment">// åœ¨æœåŠ¡ä¸­ä½¿ç”¨ç¼“å­˜</span>
func (s *UserService) <span class="hljs-built_in">GetUser</span>(ctx context.Context, id int) (*ent.User, error) {
    cacheKey := fmt.<span class="hljs-built_in">Sprintf</span>(<span class="hljs-string">"user:%d"</span>, id)
    
    // å°è¯•ä»ç¼“å­˜è·å–
    cached, err := s.cache.<span class="hljs-built_in">Get</span>(ctx, cacheKey)
    if err == nil {
        <span class="hljs-selector-tag">var</span> user ent<span class="hljs-selector-class">.User</span>
        if json<span class="hljs-selector-class">.Unmarshal</span>([]byte(cached), &amp;user) == nil {
            return &amp;user, nil
        }
    }
    
    <span class="hljs-comment">// ä»æ•°æ®åº“è·å–</span>
    user, err := s.client.User.<span class="hljs-built_in">Get</span>(ctx, id)
    if err != nil {
        return nil, err
    }
    
    <span class="hljs-comment">// å­˜å…¥ç¼“å­˜</span>
    if data, err := json.<span class="hljs-built_in">Marshal</span>(user); err == nil {
        s<span class="hljs-selector-class">.cache</span><span class="hljs-selector-class">.Set</span>(ctx, cacheKey, string(data), <span class="hljs-selector-tag">time</span><span class="hljs-selector-class">.Hour</span>)
    }
    
    return user, nil
}
```

## éƒ¨ç½²å’Œè¿ç»´

### Docker åŒ–

```dockerfile
# Dockerfile
FROM golang:<span class="hljs-number">1.23</span>-alpine AS builder

WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download

COPY . .
RUN CGO_ENABLED=<span class="hljs-number">0</span> GOOS=linux go build -o cloudreve .

FROM alpine:latest
RUN apk --no-cache add ca-certificates
WORKDIR /root/

COPY --from=builder /app/cloudreve .
COPY --from=builder /app/conf.ini .

EXPOSE <span class="hljs-number">5212</span>
CMD [<span class="hljs-string">"./cloudreve"</span>]
```

### å¥åº·æ£€æŸ¥

```go
// routers/controllers/health.go
func <span class="hljs-built_in">HealthCheck</span>(c *gin.Context) {
    <span class="hljs-comment">// æ£€æŸ¥æ•°æ®åº“è¿æ¥</span>
    if err := <span class="hljs-built_in">checkDatabase</span>(); err != nil {
        c<span class="hljs-selector-class">.JSON</span>(http.StatusServiceUnavailable, gin.H{
            "status": "unhealthy",
            "error":  err.Error(),
        })
        return
    }
    
    <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜è¿æ¥</span>
    if err := <span class="hljs-built_in">checkCache</span>(); err != nil {
        c<span class="hljs-selector-class">.JSON</span>(http.StatusServiceUnavailable, gin.H{
            "status": "unhealthy",
            "error":  err.Error(),
        })
        return
    }
    
    c<span class="hljs-selector-class">.JSON</span>(http.StatusOK, gin.H{
        "status": "healthy",
        "timestamp": time.Now()<span class="hljs-selector-class">.Unix</span>(),
    })
}
```

## æ€»ç»“

Cloudreve çš„åç«¯æ¶æ„å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

<span class="hljs-number">1</span>. **æ¸…æ™°çš„åˆ†å±‚è®¾è®¡**: è·¯ç”±ã€æ§åˆ¶å™¨ã€æœåŠ¡ã€æ•°æ®è®¿é—®å±‚èŒè´£åˆ†æ˜
<span class="hljs-number">2</span>. **ç°ä»£åŒ–çš„ ORM**: ä½¿ç”¨ Ent æä¾›ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ
<span class="hljs-number">3</span>. **å®Œå–„çš„ä¸­é—´ä»¶ç³»ç»Ÿ**: è®¤è¯ã€æˆæƒã€æ—¥å¿—ã€é”™è¯¯å¤„ç†ç­‰
<span class="hljs-number">4</span>. **çµæ´»çš„å­˜å‚¨ç³»ç»Ÿ**: æ”¯æŒå¤šç§å­˜å‚¨åç«¯
<span class="hljs-number">5</span>. **å¼ºå¤§çš„èŠå¤©åŠŸèƒ½**: é›†æˆ OpenRouter API æ”¯æŒ AI å¯¹è¯
<span class="hljs-number">6</span>. **è‰¯å¥½çš„æµ‹è¯•è¦†ç›–**: å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
<span class="hljs-number">7</span>. **æ€§èƒ½ä¼˜åŒ–**: ç¼“å­˜ã€æ•°æ®åº“ä¼˜åŒ–ã€å¹¶å‘å¤„ç†

è¿™ä¸ªæ¶æ„ä¸ºä½ å¼€å‘ä¾§è¾¹æ å¯¹è¯åŠŸèƒ½æä¾›äº†åšå®çš„åŸºç¡€ï¼Œä½ å¯ä»¥å‚è€ƒç°æœ‰çš„èŠå¤©æœåŠ¡å®ç°æ¥æ‰©å±•æ–°åŠŸèƒ½ã€‚
</code></pre>
<h3 data-id="heading-6"><strong>04-api-communication.md - API é€šä¿¡æœºåˆ¶</strong></h3>
<ul>
<li>RESTful API è®¾è®¡è§„èŒƒ</li>
<li>JWT è®¤è¯æµç¨‹å’Œ SSE æµå¼ä¼ è¾“</li>
<li>é”™è¯¯å¤„ç†å’Œç¼“å­˜ç­–ç•¥</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino"># Cloudreve å‰åç«¯é€šä¿¡æœºåˆ¶è¯¦è§£

## API è®¾è®¡æ¦‚è§ˆ

Cloudreve é‡‡ç”¨ RESTful API è®¾è®¡ï¼Œå‰åç«¯é€šè¿‡ HTTP/HTTPS åè®®è¿›è¡Œé€šä¿¡ã€‚API éµå¾ªç»Ÿä¸€çš„è®¾è®¡è§„èŒƒï¼Œæä¾›æ¸…æ™°çš„æ¥å£å®šä¹‰å’Œé”™è¯¯å¤„ç†æœºåˆ¶ã€‚

### API ç‰ˆæœ¬ç®¡ç†

```
åŸºç¡€è·¯å¾„: /api/v4
å½“å‰ç‰ˆæœ¬: v4
```

æ‰€æœ‰ API è¯·æ±‚éƒ½ä½¿ç”¨ `/api/v4` ä½œä¸ºåŸºç¡€è·¯å¾„ï¼Œä¾¿äºç‰ˆæœ¬ç®¡ç†å’Œå‘åå…¼å®¹ã€‚

## è¯·æ±‚å“åº”æ ¼å¼

### ç»Ÿä¸€å“åº”æ ¼å¼

```typescript
interface Response&lt;T&gt; {
  data: T;           <span class="hljs-comment">// å“åº”æ•°æ®</span>
  code: number;      <span class="hljs-comment">// çŠ¶æ€ç </span>
  msg: string;       <span class="hljs-comment">// æ¶ˆæ¯</span>
  error?: string;    <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯</span>
  correlation_id?: string; <span class="hljs-comment">// è¯·æ±‚è¿½è¸ªID</span>
}
```

### æˆåŠŸå“åº”ç¤ºä¾‹

```json
{
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"ç”¨æˆ·å"</span>,
    <span class="hljs-string">"email"</span>: <span class="hljs-string">"user@example.com"</span>
  },
  <span class="hljs-string">"code"</span>: <span class="hljs-number">200</span>,
  <span class="hljs-string">"msg"</span>: <span class="hljs-string">"success"</span>
}
```

### é”™è¯¯å“åº”ç¤ºä¾‹

```json
{
  <span class="hljs-string">"data"</span>: null,
  <span class="hljs-string">"code"</span>: <span class="hljs-number">400</span>,
  <span class="hljs-string">"msg"</span>: <span class="hljs-string">"å‚æ•°éªŒè¯å¤±è´¥"</span>,
  <span class="hljs-string">"error"</span>: <span class="hljs-string">"email field is required"</span>,
  <span class="hljs-string">"correlation_id"</span>: <span class="hljs-string">"req-123456789"</span>
}
```

## è®¤è¯æœºåˆ¶

### JWT Token è®¤è¯

```mermaid
sequenceDiagram
    participant C as å®¢æˆ·ç«¯
    participant S as æœåŠ¡å™¨
    participant DB as æ•°æ®åº“

    C-&gt;&gt;S: POST /api/v4/session/<span class="hljs-built_in">token</span> (ç”¨æˆ·å/å¯†ç )
    S-&gt;&gt;DB: éªŒè¯ç”¨æˆ·å‡­æ®
    DB--&gt;&gt;S: è¿”å›ç”¨æˆ·ä¿¡æ¯
    S--&gt;&gt;C: è¿”å› JWT Token
    
    Note over C: å­˜å‚¨ Token åˆ° localStorage
    
    C-&gt;&gt;S: GET /api/v4/user/<span class="hljs-built_in">info</span> (Authorization: Bearer &lt;token&gt;)
    S-&gt;&gt;S: éªŒè¯ Token
    S--&gt;&gt;C: è¿”å›ç”¨æˆ·ä¿¡æ¯
```

### Token ç®¡ç†

#### <span class="hljs-number">1.</span> è·å– Token

```typescript
<span class="hljs-comment">// å‰ç«¯ç™»å½•è¯·æ±‚</span>
<span class="hljs-type">const</span> loginRequest = {
  email: <span class="hljs-string">"user@example.com"</span>,
  password: <span class="hljs-string">"password123"</span>
};

<span class="hljs-type">const</span> response = await axios.<span class="hljs-built_in">post</span>(<span class="hljs-string">'/api/v4/session/token'</span>, loginRequest);
<span class="hljs-type">const</span> { access_token, refresh_token } = response.data;

<span class="hljs-comment">// å­˜å‚¨ Token</span>
SessionManager.<span class="hljs-built_in">setTokens</span>(access_token, refresh_token);
```

#### <span class="hljs-number">2.</span> è¯·æ±‚æ‹¦æˆªå™¨

```typescript
<span class="hljs-comment">// api/request.ts</span>
instance.interceptors.request.<span class="hljs-built_in">use</span>(<span class="hljs-built_in">async</span> (config) =&gt; {
  <span class="hljs-type">const</span> token = await SessionManager.<span class="hljs-built_in">getAccessToken</span>();
  <span class="hljs-keyword">if</span> (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  <span class="hljs-keyword">return</span> config;
});
```

#### <span class="hljs-number">3.</span> Token åˆ·æ–°æœºåˆ¶

```typescript
instance.interceptors.response.<span class="hljs-built_in">use</span>(
  (response) =&gt; response,
  <span class="hljs-built_in">async</span> (error) =&gt; {
    <span class="hljs-keyword">if</span> (error.response?.status === <span class="hljs-number">401</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å°è¯•åˆ·æ–° Token</span>
        await SessionManager.<span class="hljs-built_in">refreshToken</span>();
        <span class="hljs-comment">// é‡è¯•åŸè¯·æ±‚</span>
        <span class="hljs-keyword">return</span> instance.<span class="hljs-built_in">request</span>(error.config);
      } <span class="hljs-built_in">catch</span> (refreshError) {
        <span class="hljs-comment">// åˆ·æ–°å¤±è´¥ï¼Œè·³è½¬ç™»å½•é¡µ</span>
        router.<span class="hljs-built_in">push</span>(<span class="hljs-string">'/session'</span>);
      }
    }
    <span class="hljs-keyword">return</span> Promise.<span class="hljs-built_in">reject</span>(error);
  }
);
```

## æ ¸å¿ƒ API æ¥å£

### <span class="hljs-number">1.</span> ç”¨æˆ·è®¤è¯ API

#### ç™»å½•
```http
POST /api/v4/session/token
Content-Type: application/json

{
  <span class="hljs-string">"email"</span>: <span class="hljs-string">"user@example.com"</span>,
  <span class="hljs-string">"password"</span>: <span class="hljs-string">"password123"</span>
}
```

å“åº”ï¼š
```json
{
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"access_token"</span>: <span class="hljs-string">"eyJhbGciOiJIUzI1NiIs..."</span>,
    <span class="hljs-string">"refresh_token"</span>: <span class="hljs-string">"eyJhbGciOiJIUzI1NiIs..."</span>,
    <span class="hljs-string">"expires_in"</span>: <span class="hljs-number">3600</span>,
    <span class="hljs-string">"user"</span>: {
      <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-string">"name"</span>: <span class="hljs-string">"ç”¨æˆ·å"</span>,
      <span class="hljs-string">"email"</span>: <span class="hljs-string">"user@example.com"</span>
    }
  },
  <span class="hljs-string">"code"</span>: <span class="hljs-number">200</span>,
  <span class="hljs-string">"msg"</span>: <span class="hljs-string">"ç™»å½•æˆåŠŸ"</span>
}
```

#### åˆ·æ–° Token
```http
POST /api/v4/session/refresh
Content-Type: application/json

{
  <span class="hljs-string">"refresh_token"</span>: <span class="hljs-string">"eyJhbGciOiJIUzI1NiIs..."</span>
}
```

#### ç™»å‡º
```http
DELETE /api/v4/session/token
Authorization: Bearer &lt;access_token&gt;
```

### <span class="hljs-number">2.</span> æ–‡ä»¶ç®¡ç† API

#### è·å–æ–‡ä»¶åˆ—è¡¨
```http
GET /api/v4/file/list?path=/documents&amp;sort=name&amp;order=asc
Authorization: Bearer &lt;access_token&gt;
```

å“åº”ï¼š
```json
{
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"files"</span>: [
      {
        <span class="hljs-string">"id"</span>: <span class="hljs-string">"file_123"</span>,
        <span class="hljs-string">"name"</span>: <span class="hljs-string">"document.pdf"</span>,
        <span class="hljs-string">"size"</span>: <span class="hljs-number">1024000</span>,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"file"</span>,
        <span class="hljs-string">"created_at"</span>: <span class="hljs-string">"2023-01-01T00:00:00Z"</span>,
        <span class="hljs-string">"path"</span>: <span class="hljs-string">"cloudreve://my/documents/document.pdf"</span>
      }
    ],
    <span class="hljs-string">"total"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"path"</span>: <span class="hljs-string">"/documents"</span>
  },
  <span class="hljs-string">"code"</span>: <span class="hljs-number">200</span>,
  <span class="hljs-string">"msg"</span>: <span class="hljs-string">"success"</span>
}
```

#### æ–‡ä»¶ä¸Šä¼ 
```http
POST /api/v4/file/upload
Authorization: Bearer &lt;access_token&gt;
Content-Type: multipart/form-data

file: &lt;binary_data&gt;
path: /documents
```

#### æ–‡ä»¶ä¸‹è½½
```http
GET /api/v4/file/download/&lt;file_id&gt;
Authorization: Bearer &lt;access_token&gt;
```

### <span class="hljs-number">3.</span> èŠå¤© API

#### æ™®é€šèŠå¤©
```http
POST /api/v4/chat
Authorization: Bearer &lt;access_token&gt;
Content-Type: application/json

{
  <span class="hljs-string">"message"</span>: <span class="hljs-string">"è¯·å¸®æˆ‘æ€»ç»“ä¸€ä¸‹æ–‡æ¡£å†…å®¹"</span>
}
```

å“åº”ï¼š
```json
{
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"response"</span>: <span class="hljs-string">"æ ¹æ®æ‚¨çš„æ–‡æ¡£å†…å®¹ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ–¹é¢..."</span>,
    <span class="hljs-string">"model"</span>: <span class="hljs-string">"google/gemini-2.5-pro"</span>,
    <span class="hljs-string">"usage"</span>: {
      <span class="hljs-string">"prompt_tokens"</span>: <span class="hljs-number">100</span>,
      <span class="hljs-string">"completion_tokens"</span>: <span class="hljs-number">200</span>,
      <span class="hljs-string">"total_tokens"</span>: <span class="hljs-number">300</span>
    }
  },
  <span class="hljs-string">"code"</span>: <span class="hljs-number">200</span>,
  <span class="hljs-string">"msg"</span>: <span class="hljs-string">"success"</span>
}
```

#### æµå¼èŠå¤©
```http
POST /api/v4/chat/stream
Authorization: Bearer &lt;access_token&gt;
Content-Type: application/json

{
  <span class="hljs-string">"message"</span>: <span class="hljs-string">"è¯·å¸®æˆ‘åˆ†æè¿™äº›æ–‡ä»¶"</span>
}
```

å“åº”ï¼ˆSSE æ ¼å¼ï¼‰ï¼š
```
Content-Type: text/event-stream
Cache-Control: no-cache
Connection: keep-alive

data: {<span class="hljs-string">"choices"</span>:[{<span class="hljs-string">"delta"</span>:{<span class="hljs-string">"content"</span>:<span class="hljs-string">"æ ¹æ®"</span>},<span class="hljs-string">"finish_reason"</span>:null}]}

data: {<span class="hljs-string">"choices"</span>:[{<span class="hljs-string">"delta"</span>:{<span class="hljs-string">"content"</span>:<span class="hljs-string">"æ‚¨çš„"</span>},<span class="hljs-string">"finish_reason"</span>:null}]}

data: {<span class="hljs-string">"choices"</span>:[{<span class="hljs-string">"delta"</span>:{<span class="hljs-string">"content"</span>:<span class="hljs-string">"æ–‡ä»¶"</span>},<span class="hljs-string">"finish_reason"</span>:null}]}

data: {<span class="hljs-string">"choices"</span>:[{<span class="hljs-string">"delta"</span>:{<span class="hljs-string">"content"</span>:<span class="hljs-string">""</span>},<span class="hljs-string">"finish_reason"</span>:<span class="hljs-string">"stop"</span>}]}
```

## é”™è¯¯å¤„ç†æœºåˆ¶

### HTTP çŠ¶æ€ç è§„èŒƒ

| çŠ¶æ€ç  | å«ä¹‰ | ä½¿ç”¨åœºæ™¯ |
|--------|------|----------|
| <span class="hljs-number">200</span> | æˆåŠŸ | è¯·æ±‚æˆåŠŸå¤„ç† |
| <span class="hljs-number">201</span> | åˆ›å»ºæˆåŠŸ | èµ„æºåˆ›å»ºæˆåŠŸ |
| <span class="hljs-number">400</span> | è¯·æ±‚é”™è¯¯ | å‚æ•°éªŒè¯å¤±è´¥ |
| <span class="hljs-number">401</span> | æœªè®¤è¯ | Token æ— æ•ˆæˆ–è¿‡æœŸ |
| <span class="hljs-number">403</span> | æƒé™ä¸è¶³ | æ²¡æœ‰è®¿é—®æƒé™ |
| <span class="hljs-number">404</span> | èµ„æºä¸å­˜åœ¨ | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ |
| <span class="hljs-number">409</span> | å†²çª | èµ„æºå†²çªï¼ˆå¦‚é‚®ç®±å·²å­˜åœ¨ï¼‰ |
| <span class="hljs-number">422</span> | éªŒè¯å¤±è´¥ | ä¸šåŠ¡é€»è¾‘éªŒè¯å¤±è´¥ |
| <span class="hljs-number">500</span> | æœåŠ¡å™¨é”™è¯¯ | å†…éƒ¨æœåŠ¡å™¨é”™è¯¯ |

### é”™è¯¯å“åº”æ ¼å¼

```typescript
interface ErrorResponse {
  code: number;
  msg: string;
  error?: string;
  details?: {
    field: string;
    message: string;
  }[];
  correlation_id?: string;
}
```

### å‰ç«¯é”™è¯¯å¤„ç†

```typescript
<span class="hljs-comment">// å…¨å±€é”™è¯¯å¤„ç†</span>
instance.interceptors.response.<span class="hljs-built_in">use</span>(
  (response) =&gt; response,
  (error) =&gt; {
    <span class="hljs-type">const</span> { response } = error;
    
    <span class="hljs-keyword">if</span> (response) {
      <span class="hljs-type">const</span> { status, data } = response;
      
      <span class="hljs-keyword">switch</span> (status) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">400</span>:
          <span class="hljs-built_in">enqueueSnackbar</span>(data.msg || <span class="hljs-string">'è¯·æ±‚å‚æ•°é”™è¯¯'</span>, { variant: <span class="hljs-string">'error'</span> });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
          <span class="hljs-built_in">enqueueSnackbar</span>(<span class="hljs-string">'ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>, { variant: <span class="hljs-string">'error'</span> });
          router.<span class="hljs-built_in">push</span>(<span class="hljs-string">'/session'</span>);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">403</span>:
          <span class="hljs-built_in">enqueueSnackbar</span>(<span class="hljs-string">'æƒé™ä¸è¶³'</span>, { variant: <span class="hljs-string">'error'</span> });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">404</span>:
          <span class="hljs-built_in">enqueueSnackbar</span>(<span class="hljs-string">'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨'</span>, { variant: error<span class="hljs-number">'</span> });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">500</span>:
          <span class="hljs-built_in">enqueueSnackbar</span>(<span class="hljs-string">'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'</span>, { variant: <span class="hljs-string">'error'</span> });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
          <span class="hljs-built_in">enqueueSnackbar</span>(data.msg || <span class="hljs-string">'æœªçŸ¥é”™è¯¯'</span>, { variant: <span class="hljs-string">'error'</span> });
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">enqueueSnackbar</span>(<span class="hljs-string">'ç½‘ç»œè¿æ¥é”™è¯¯'</span>, { variant: <span class="hljs-string">'error'</span> });
    }
    
    <span class="hljs-keyword">return</span> Promise.<span class="hljs-built_in">reject</span>(error);
  }
);
```

## æµå¼æ•°æ®ä¼ è¾“

### <span class="hljs-built_in">Server</span>-<span class="hljs-function">Sent <span class="hljs-title">Events</span> <span class="hljs-params">(SSE)</span>

Cloudreve ä½¿ç”¨ SSE åè®®å®ç°æµå¼æ•°æ®ä¼ è¾“ï¼Œä¸»è¦ç”¨äºèŠå¤©åŠŸèƒ½çš„å®æ—¶å“åº”ã€‚

#### å‰ç«¯ SSE å¤„ç†

```typescript
<span class="hljs-comment">// æµå¼èŠå¤©å®ç°</span>
<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> streamChat </span>= <span class="hljs-built_in">async</span> (
  message: string,
  onMessage: (content: string) =&gt; <span class="hljs-type">void</span>,
  onComplete: () =&gt; <span class="hljs-type">void</span>,
  onError: (error: Error) =&gt; <span class="hljs-type">void</span>
) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-type">const</span> token = await SessionManager.<span class="hljs-built_in">getAccessToken</span>();
    
    <span class="hljs-type">const</span> response = await <span class="hljs-built_in">fetch</span>(<span class="hljs-string">'/api/v4/chat/stream'</span>, {
      method: <span class="hljs-string">'POST'</span>,
      headers: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
        <span class="hljs-string">'Authorization'</span>: `Bearer ${token}`,
      },
      body: JSON.<span class="hljs-built_in">stringify</span>({ message }),
    });
    
    <span class="hljs-keyword">if</span> (!response.ok) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(`HTTP ${response.status}: ${response.statusText}`);
    }
    
    <span class="hljs-type">const</span> reader = response.body?.<span class="hljs-built_in">getReader</span>();
    <span class="hljs-type">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TextDecoder</span>();
    
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
      <span class="hljs-type">const</span> { done, value } = await reader!.<span class="hljs-built_in">read</span>();
      
      <span class="hljs-keyword">if</span> (done) {
        <span class="hljs-built_in">onComplete</span>();
        <span class="hljs-keyword">break</span>;
      }
      
      <span class="hljs-type">const</span> chunk = decoder.<span class="hljs-built_in">decode</span>(value);
      <span class="hljs-type">const</span> lines = chunk.<span class="hljs-built_in">split</span>(<span class="hljs-string">'\n'</span>);
      
      <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> line of lines) {
        <span class="hljs-keyword">if</span> (line.<span class="hljs-built_in">startsWith</span>(<span class="hljs-string">'data: '</span>)) {
          <span class="hljs-type">const</span> data = line.<span class="hljs-built_in">slice</span>(<span class="hljs-number">6</span>);
          
          <span class="hljs-keyword">if</span> (data === <span class="hljs-string">'[DONE]'</span>) {
            <span class="hljs-built_in">onComplete</span>();
            <span class="hljs-keyword">return</span>;
          }
          
          <span class="hljs-keyword">try</span> {
            <span class="hljs-type">const</span> parsed = JSON.<span class="hljs-built_in">parse</span>(data);
            <span class="hljs-type">const</span> content = parsed.choices?.[<span class="hljs-number">0</span>]?.delta?.content;
            
            <span class="hljs-keyword">if</span> (content) {
              <span class="hljs-built_in">onMessage</span>(content);
            }
            
            <span class="hljs-keyword">if</span> (parsed.choices?.[<span class="hljs-number">0</span>]?.finish_reason === <span class="hljs-string">'stop'</span>) {
              <span class="hljs-built_in">onComplete</span>();
              <span class="hljs-keyword">return</span>;
            }
          } <span class="hljs-built_in">catch</span> (parseError) {
            console.<span class="hljs-built_in">warn</span>(<span class="hljs-string">'Failed to parse SSE data:'</span>, data);
          }
        }
      }
    }
  } <span class="hljs-built_in">catch</span> (error) {
    <span class="hljs-built_in">onError</span>(error as Error);
  }
};
```

#### åç«¯ SSE å®ç°

```go
<span class="hljs-comment">// æ§åˆ¶å™¨ä¸­çš„æµå¼å“åº”</span>
<span class="hljs-function">func <span class="hljs-title">ChatStream</span><span class="hljs-params">(c *gin.Context)</span> </span>{
    <span class="hljs-comment">// è®¾ç½® SSE å“åº”å¤´</span>
    c.<span class="hljs-built_in">Header</span>(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/event-stream"</span>)
    c.<span class="hljs-built_in">Header</span>(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"no-cache"</span>)
    c.<span class="hljs-built_in">Header</span>(<span class="hljs-string">"Connection"</span>, <span class="hljs-string">"keep-alive"</span>)
    c.<span class="hljs-built_in">Header</span>(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>)
    
    <span class="hljs-comment">// è·å–å‚æ•°</span>
    service := ParametersFromContext[*chatsvc.Service](c, ChatParameterCtx)
    user := c.<span class="hljs-built_in">MustGet</span>(<span class="hljs-string">"user"</span>).(*ent.User)
    
    <span class="hljs-comment">// åˆ›å»ºèŠå¤©æœåŠ¡</span>
    chatService := chatsvc.<span class="hljs-built_in">NewChatService</span>(dep)
    
    <span class="hljs-comment">// æµå¼å›è°ƒå‡½æ•°</span>
    callback := <span class="hljs-built_in">func</span>(content string, done <span class="hljs-type">bool</span>) error {
        data := map[string]interface{}{
            <span class="hljs-string">"id"</span>:      <span class="hljs-string">"chatcmpl-"</span> + <span class="hljs-built_in">generateID</span>(),
            <span class="hljs-string">"object"</span>:  <span class="hljs-string">"chat.completion.chunk"</span>,
            <span class="hljs-string">"created"</span>: time.<span class="hljs-built_in">Now</span>().<span class="hljs-built_in">Unix</span>(),
            <span class="hljs-string">"model"</span>:   <span class="hljs-string">"google/gemini-2.5-pro"</span>,
            <span class="hljs-string">"choices"</span>: []map[string]interface{}{
                {
                    <span class="hljs-string">"index"</span>: <span class="hljs-number">0</span>,
                    <span class="hljs-string">"delta"</span>: map[string]interface{}{
                        <span class="hljs-string">"content"</span>: content,
                    },
                    <span class="hljs-string">"finish_reason"</span>: nil,
                },
            },
        }
        
        <span class="hljs-keyword">if</span> done {
            data[<span class="hljs-string">"choices"</span>].([]map[string]interface{})[<span class="hljs-number">0</span>][<span class="hljs-string">"finish_reason"</span>] = <span class="hljs-string">"stop"</span>
        }
        
        jsonData, _ := json.<span class="hljs-built_in">Marshal</span>(data)
        fmt.<span class="hljs-built_in">Fprintf</span>(c.Writer, <span class="hljs-string">"data: %s\n\n"</span>, jsonData)
        c.Writer.<span class="hljs-built_in">Flush</span>()
        
        <span class="hljs-keyword">return</span> nil
    }
    
    <span class="hljs-comment">// æ‰§è¡Œæµå¼èŠå¤©</span>
    err := chatService.<span class="hljs-built_in">StreamChatWithFiles</span>(c.Request.<span class="hljs-built_in">Context</span>(), user, service.Message, callback)
    <span class="hljs-keyword">if</span> err != nil {
        errorData := map[string]interface{}{
            <span class="hljs-string">"error"</span>: map[string]interface{}{
                <span class="hljs-string">"message"</span>: err.<span class="hljs-built_in">Error</span>(),
                <span class="hljs-string">"type"</span>:    <span class="hljs-string">"server_error"</span>,
            },
        }
        jsonData, _ := json.<span class="hljs-built_in">Marshal</span>(errorData)
        fmt.<span class="hljs-built_in">Fprintf</span>(c.Writer, <span class="hljs-string">"data: %s\n\n"</span>, jsonData)
        c.Writer.<span class="hljs-built_in">Flush</span>()
    }
    
    <span class="hljs-comment">// å‘é€ç»“æŸæ ‡è®°</span>
    fmt.<span class="hljs-built_in">Fprintf</span>(c.Writer, <span class="hljs-string">"data: [DONE]\n\n"</span>)
    c.Writer.<span class="hljs-built_in">Flush</span>()
}
```

## æ–‡ä»¶ä¸Šä¼ æœºåˆ¶

### åˆ†ç‰‡ä¸Šä¼ 

å¯¹äºå¤§æ–‡ä»¶ï¼ŒCloudreve æ”¯æŒåˆ†ç‰‡ä¸Šä¼ æœºåˆ¶ï¼š

```mermaid
sequenceDiagram
    participant C as å®¢æˆ·ç«¯
    participant S as æœåŠ¡å™¨
    participant FS as æ–‡ä»¶ç³»ç»Ÿ

    C-&gt;&gt;S: <span class="hljs-number">1.</span> åˆ›å»ºä¸Šä¼ ä¼šè¯
    S--&gt;&gt;C: è¿”å› session_id
    
    loop åˆ†ç‰‡ä¸Šä¼ 
        C-&gt;&gt;S: <span class="hljs-number">2.</span> ä¸Šä¼ åˆ†ç‰‡ (session_id, chunk_index, chunk_data)
        S-&gt;&gt;FS: å­˜å‚¨åˆ†ç‰‡
        S--&gt;&gt;C: è¿”å›ä¸Šä¼ è¿›åº¦
    end
    
    C-&gt;&gt;S: <span class="hljs-number">3.</span> å®Œæˆä¸Šä¼  (session_id)
    S-&gt;&gt;FS: åˆå¹¶åˆ†ç‰‡
    S--&gt;&gt;C: è¿”å›æ–‡ä»¶ä¿¡æ¯
```

#### å‰ç«¯åˆ†ç‰‡ä¸Šä¼ å®ç°

```typescript
<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> uploadFileWithProgress = <span class="hljs-built_in">async</span> (
  file: <span class="hljs-built_in">File</span>,
  path: string,
  onProgress: (progress: number) =&gt; <span class="hljs-type">void</span>
): Promise&lt;FileResponse&gt; =&gt; {
  <span class="hljs-type">const</span> CHUNK_SIZE = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>; <span class="hljs-comment">// 1MB per chunk</span>
  <span class="hljs-type">const</span> totalChunks = Math.<span class="hljs-built_in">ceil</span>(file.size / CHUNK_SIZE);
  
  <span class="hljs-comment">// 1. åˆ›å»ºä¸Šä¼ ä¼šè¯</span>
  <span class="hljs-type">const</span> sessionResponse = await api.<span class="hljs-built_in">post</span>(<span class="hljs-string">'/file/upload/session'</span>, {
    name: file.name,
    size: file.size,
    path: path,
    chunks: totalChunks,
  });
  
  <span class="hljs-type">const</span> sessionId = sessionResponse.data.session_id;
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 2. åˆ†ç‰‡ä¸Šä¼ </span>
    <span class="hljs-keyword">for</span> (let i = <span class="hljs-number">0</span>; i &lt; totalChunks; i++) {
      <span class="hljs-type">const</span> start = i * CHUNK_SIZE;
      <span class="hljs-type">const</span> end = Math.<span class="hljs-built_in">min</span>(start + CHUNK_SIZE, file.size);
      <span class="hljs-type">const</span> chunk = file.<span class="hljs-built_in">slice</span>(start, end);
      
      <span class="hljs-type">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-built_in">FormData</span>();
      formData.<span class="hljs-built_in">append</span>(<span class="hljs-string">'chunk'</span>, chunk);
      formData.<span class="hljs-built_in">append</span>(<span class="hljs-string">'session_id'</span>, sessionId);
      formData.<span class="hljs-built_in">append</span>(<span class="hljs-string">'chunk_index'</span>, i.<span class="hljs-built_in">toString</span>());
      
      await api.<span class="hljs-built_in">post</span>(<span class="hljs-string">'/file/upload/chunk'</span>, formData, {
        headers: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'multipart/form-data'</span>,
        },
      });
      
      <span class="hljs-comment">// æ›´æ–°è¿›åº¦</span>
      <span class="hljs-type">const</span> progress = Math.<span class="hljs-built_in">round</span>(((i + <span class="hljs-number">1</span>) / totalChunks) * <span class="hljs-number">100</span>);
      <span class="hljs-built_in">onProgress</span>(progress);
    }
    
    <span class="hljs-comment">// 3. å®Œæˆä¸Šä¼ </span>
    <span class="hljs-type">const</span> completeResponse = await api.<span class="hljs-built_in">post</span>(<span class="hljs-string">'/file/upload/complete'</span>, {
      session_id: sessionId,
    });
    
    <span class="hljs-keyword">return</span> completeResponse.data;
  } <span class="hljs-built_in">catch</span> (error) {
    <span class="hljs-comment">// ä¸Šä¼ å¤±è´¥ï¼Œæ¸…ç†ä¼šè¯</span>
    await api.<span class="hljs-built_in">delete</span>(`/file/upload/session/${sessionId}`);
    <span class="hljs-keyword">throw</span> error;
  }
};
```

## ç¼“å­˜ç­–ç•¥

### å‰ç«¯ç¼“å­˜

#### <span class="hljs-number">1.</span> HTTP ç¼“å­˜

```typescript
<span class="hljs-comment">// ä¸ºé™æ€èµ„æºè®¾ç½®ç¼“å­˜</span>
<span class="hljs-type">const</span> cacheableRequests = [
  <span class="hljs-string">'/api/v4/site/config'</span>,
  <span class="hljs-string">'/api/v4/user/info'</span>,
];

instance.interceptors.request.<span class="hljs-built_in">use</span>((config) =&gt; {
  <span class="hljs-keyword">if</span> (cacheableRequests.<span class="hljs-built_in">some</span>(url =&gt; config.url?.<span class="hljs-built_in">includes</span>(url))) {
    config.headers[<span class="hljs-string">'Cache-Control'</span>] = <span class="hljs-string">'max-age=300'</span>; <span class="hljs-comment">// 5åˆ†é’Ÿç¼“å­˜</span>
  }
  <span class="hljs-keyword">return</span> config;
});
```

#### <span class="hljs-number">2.</span> å†…å­˜ç¼“å­˜

```typescript
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiCache</span> {
  <span class="hljs-keyword">private</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>&lt;string, { data: any; expires: number }&gt;();
  
  <span class="hljs-built_in">get</span>(key: string): any | null {
    <span class="hljs-type">const</span> item = <span class="hljs-keyword">this</span>.cache.<span class="hljs-built_in">get</span>(key);
    <span class="hljs-keyword">if</span> (!item || Date.<span class="hljs-built_in">now</span>() &gt; item.expires) {
      <span class="hljs-keyword">this</span>.cache.<span class="hljs-built_in">delete</span>(key);
      <span class="hljs-keyword">return</span> null;
    }
    <span class="hljs-keyword">return</span> item.data;
  }
  
  <span class="hljs-built_in">set</span>(key: string, data: any, ttl: number = <span class="hljs-number">300000</span>): <span class="hljs-type">void</span> {
    <span class="hljs-keyword">this</span>.cache.<span class="hljs-built_in">set</span>(key, {
      data,
      expires: Date.<span class="hljs-built_in">now</span>() + ttl,
    });
  }
  
  <span class="hljs-built_in">clear</span>(): <span class="hljs-type">void</span> {
    <span class="hljs-keyword">this</span>.cache.<span class="hljs-built_in">clear</span>();
  }
}

<span class="hljs-type">const</span> apiCache = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ApiCache</span>();

<span class="hljs-comment">// åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­ä½¿ç”¨ç¼“å­˜</span>
instance.interceptors.request.<span class="hljs-built_in">use</span>((config) =&gt; {
  <span class="hljs-keyword">if</span> (config.method === <span class="hljs-string">'GET'</span>) {
    <span class="hljs-type">const</span> cacheKey = `${config.url}?${JSON.<span class="hljs-built_in">stringify</span>(config.params)}`;
    <span class="hljs-type">const</span> cached = apiCache.<span class="hljs-built_in">get</span>(cacheKey);
    
    <span class="hljs-keyword">if</span> (cached) {
      <span class="hljs-comment">// è¿”å›ç¼“å­˜çš„ Promise</span>
      <span class="hljs-keyword">return</span> Promise.<span class="hljs-built_in">resolve</span>({
        ...config,
        adapter: () =&gt; Promise.<span class="hljs-built_in">resolve</span>({
          data: cached,
          status: <span class="hljs-number">200</span>,
          statusText: <span class="hljs-string">'OK'</span>,
          headers: {},
          config,
        }),
      });
    }
  }
  
  <span class="hljs-keyword">return</span> config;
});
```

### åç«¯ç¼“å­˜

```go
<span class="hljs-comment">// ç¼“å­˜ä¸­é—´ä»¶</span>
<span class="hljs-function">func <span class="hljs-title">CacheMiddleware</span><span class="hljs-params">(ttl time.Duration)</span> gin.HandlerFunc </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">func</span>(c *gin.Context) {
        <span class="hljs-keyword">if</span> c.Request.Method != <span class="hljs-string">"GET"</span> {
            c.<span class="hljs-built_in">Next</span>()
            <span class="hljs-keyword">return</span>
        }
        
        cacheKey := fmt.<span class="hljs-built_in">Sprintf</span>(<span class="hljs-string">"api:%s:%s"</span>, c.Request.URL.Path, c.Request.URL.RawQuery)
        
        <span class="hljs-comment">// å°è¯•ä»ç¼“å­˜è·å–</span>
        <span class="hljs-keyword">if</span> cached, err := cache.<span class="hljs-built_in">Get</span>(c.Request.<span class="hljs-built_in">Context</span>(), cacheKey); err == nil {
            c.<span class="hljs-built_in">Header</span>(<span class="hljs-string">"X-Cache"</span>, <span class="hljs-string">"HIT"</span>)
            c.<span class="hljs-built_in">Data</span>(<span class="hljs-number">200</span>, <span class="hljs-string">"application/json"</span>, []<span class="hljs-built_in">byte</span>(cached))
            <span class="hljs-keyword">return</span>
        }
        
        <span class="hljs-comment">// åŒ…è£… ResponseWriter ä»¥æ•è·å“åº”</span>
        w := &amp;responseWriter{
            ResponseWriter: c.Writer,
            body:          &amp;bytes.Buffer{},
        }
        c.Writer = w
        
        c.<span class="hljs-built_in">Next</span>()
        
        <span class="hljs-comment">// ç¼“å­˜å“åº”</span>
        <span class="hljs-keyword">if</span> w.status == <span class="hljs-number">200</span> {
            cache.<span class="hljs-built_in">Set</span>(c.Request.<span class="hljs-built_in">Context</span>(), cacheKey, w.body.<span class="hljs-built_in">String</span>(), ttl)
        }
    }
}
```

## è·¨åŸŸå¤„ç†

### CORS é…ç½®

```go
<span class="hljs-comment">// middleware/cors.go</span>
func <span class="hljs-built_in">CORS</span>() gin.HandlerFunc {
    <span class="hljs-keyword">return</span> cors.<span class="hljs-built_in">New</span>(cors.Config{
        AllowOrigins:     []string{<span class="hljs-string">"http://localhost:3000"</span>, <span class="hljs-string">"https://yourdomain.com"</span>},
        AllowMethods:     []string{<span class="hljs-string">"GET"</span>, <span class="hljs-string">"POST"</span>, <span class="hljs-string">"PUT"</span>, <span class="hljs-string">"DELETE"</span>, <span class="hljs-string">"OPTIONS"</span>},
        AllowHeaders:     []string{<span class="hljs-string">"Origin"</span>, <span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"Authorization"</span>},
        ExposeHeaders:    []string{<span class="hljs-string">"Content-Length"</span>},
        AllowCredentials: <span class="hljs-literal">true</span>,
        MaxAge:           <span class="hljs-number">12</span> * time.Hour,
    })
}
```

### é¢„æ£€è¯·æ±‚å¤„ç†

```typescript
<span class="hljs-comment">// å‰ç«¯å¤„ç†é¢„æ£€è¯·æ±‚</span>
axios.defaults.withCredentials = <span class="hljs-literal">true</span>;

<span class="hljs-comment">// è‡ªå®šä¹‰é¢„æ£€è¯·æ±‚å¤„ç†</span>
instance.interceptors.request.<span class="hljs-built_in">use</span>((config) =&gt; {
  <span class="hljs-comment">// å¯¹äºå¤æ‚è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘é€ OPTIONS é¢„æ£€è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (config.method !== <span class="hljs-string">'GET'</span> &amp;&amp; config.method !== <span class="hljs-string">'POST'</span>) {
    config.headers[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'application/json'</span>;
  }
  
  <span class="hljs-keyword">return</span> config;
});
```

## API ç‰ˆæœ¬å…¼å®¹

### ç‰ˆæœ¬ç­–ç•¥

```typescript
<span class="hljs-comment">// API ç‰ˆæœ¬ç®¡ç†</span>
<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> API_VERSIONS = {
  V3: <span class="hljs-string">'/api/v3'</span>,
  V4: <span class="hljs-string">'/api/v4'</span>,
} as <span class="hljs-type">const</span>;

<span class="hljs-comment">// æ ¹æ®åŠŸèƒ½é€‰æ‹© API ç‰ˆæœ¬</span>
<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> createApiClient = (version: keyof typeof API_VERSIONS = <span class="hljs-string">'V4'</span>) =&gt; {
  <span class="hljs-keyword">return</span> axios.<span class="hljs-built_in">create</span>({
    baseURL: API_VERSIONS[version],
    timeout: <span class="hljs-number">10000</span>,
  });
};

<span class="hljs-comment">// å‘åå…¼å®¹å¤„ç†</span>
<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> legacyApiCall = <span class="hljs-built_in">async</span> (endpoint: string, data: any) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å°è¯•ä½¿ç”¨æ–°ç‰ˆæœ¬ API</span>
    <span class="hljs-keyword">return</span> await v4Client.<span class="hljs-built_in">post</span>(endpoint, data);
  } <span class="hljs-built_in">catch</span> (error) {
    <span class="hljs-keyword">if</span> (error.response?.status === <span class="hljs-number">404</span>) {
      <span class="hljs-comment">// å›é€€åˆ°æ—§ç‰ˆæœ¬ API</span>
      console.<span class="hljs-built_in">warn</span>(`Falling back to v3 API <span class="hljs-keyword">for</span> ${endpoint}`);
      <span class="hljs-keyword">return</span> await v3Client.<span class="hljs-built_in">post</span>(endpoint, data);
    }
    <span class="hljs-keyword">throw</span> error;
  }
};
```

## æ€§èƒ½ä¼˜åŒ–

### è¯·æ±‚ä¼˜åŒ–

#### <span class="hljs-number">1.</span> è¯·æ±‚åˆå¹¶

```typescript
<span class="hljs-comment">// æ‰¹é‡è¯·æ±‚åˆå¹¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestBatcher</span> {
  <span class="hljs-keyword">private</span> batches = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>&lt;string, any[]&gt;();
  <span class="hljs-keyword">private</span> timers = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>&lt;string, NodeJS.Timeout&gt;();
  
  <span class="hljs-built_in">batch</span>&lt;T&gt;(
    key: string,
    request: any,
    batchFn: (requests: any[]) =&gt; Promise&lt;T[]&gt;,
    delay: number = <span class="hljs-number">100</span>
  ): Promise&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>((resolve, reject) =&gt; {
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.batches.<span class="hljs-built_in">has</span>(key)) {
        <span class="hljs-keyword">this</span>.batches.<span class="hljs-built_in">set</span>(key, []);
      }
      
      <span class="hljs-type">const</span> batch = <span class="hljs-keyword">this</span>.batches.<span class="hljs-built_in">get</span>(key)!;
      batch.<span class="hljs-built_in">push</span>({ request, resolve, reject });
      
      <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.timers.<span class="hljs-built_in">has</span>(key)) {
        <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-keyword">this</span>.timers.<span class="hljs-built_in">get</span>(key)!);
      }
      
      <span class="hljs-comment">// è®¾ç½®æ–°çš„å®šæ—¶å™¨</span>
      <span class="hljs-type">const</span> timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-built_in">async</span> () =&gt; {
        <span class="hljs-type">const</span> currentBatch = <span class="hljs-keyword">this</span>.batches.<span class="hljs-built_in">get</span>(key)!;
        <span class="hljs-keyword">this</span>.batches.<span class="hljs-built_in">delete</span>(key);
        <span class="hljs-keyword">this</span>.timers.<span class="hljs-built_in">delete</span>(key);
        
        <span class="hljs-keyword">try</span> {
          <span class="hljs-type">const</span> requests = currentBatch.<span class="hljs-built_in">map</span>(item =&gt; item.request);
          <span class="hljs-type">const</span> results = await <span class="hljs-built_in">batchFn</span>(requests);
          
          currentBatch.forEach((item, index) =&gt; {
            item.<span class="hljs-built_in">resolve</span>(results[index]);
          });
        } <span class="hljs-built_in">catch</span> (error) {
          currentBatch.forEach(item =&gt; {
            item.<span class="hljs-built_in">reject</span>(error);
          });
        }
      }, delay);
      
      <span class="hljs-keyword">this</span>.timers.<span class="hljs-built_in">set</span>(key, timer);
    });
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-type">const</span> batcher = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RequestBatcher</span>();

<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> getUserInfo = (userId: number) =&gt; {
  <span class="hljs-keyword">return</span> batcher.<span class="hljs-built_in">batch</span>(
    <span class="hljs-string">'getUserInfo'</span>,
    userId,
    <span class="hljs-built_in">async</span> (userIds: number[]) =&gt; {
      <span class="hljs-type">const</span> response = await api.<span class="hljs-built_in">post</span>(<span class="hljs-string">'/user/batch'</span>, { ids: userIds });
      <span class="hljs-keyword">return</span> response.data;
    }
  );
};
```

#### <span class="hljs-number">2.</span> è¯·æ±‚å»é‡

```typescript
<span class="hljs-comment">// è¯·æ±‚å»é‡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestDeduplicator</span> {
  <span class="hljs-keyword">private</span> pending = <span class="hljs-keyword">new</span> Map&lt;string, Promise&lt;any&gt;&gt;();
  
  <span class="hljs-built_in">dedupe</span>&lt;T&gt;(key: string, requestFn: () =&gt; Promise&lt;T&gt;): Promise&lt;T&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.pending.<span class="hljs-built_in">has</span>(key)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pending.<span class="hljs-built_in">get</span>(key)!;
    }
    
    <span class="hljs-type">const</span> promise = <span class="hljs-built_in">requestFn</span>().<span class="hljs-built_in">finally</span>(() =&gt; {
      <span class="hljs-keyword">this</span>.pending.<span class="hljs-built_in">delete</span>(key);
    });
    
    <span class="hljs-keyword">this</span>.pending.<span class="hljs-built_in">set</span>(key, promise);
    <span class="hljs-keyword">return</span> promise;
  }
}

<span class="hljs-type">const</span> deduplicator = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RequestDeduplicator</span>();

<span class="hljs-keyword">export</span> <span class="hljs-type">const</span> getFileList = (path: string) =&gt; {
  <span class="hljs-type">const</span> key = `fileList:${path}`;
  <span class="hljs-keyword">return</span> deduplicator.<span class="hljs-built_in">dedupe</span>(key, () =&gt; 
    api.<span class="hljs-built_in">get</span>(<span class="hljs-string">'/file/list'</span>, { params: { path } })
  );
};
```

## ç›‘æ§å’Œè°ƒè¯•

### è¯·æ±‚æ—¥å¿—

```typescript
<span class="hljs-comment">// è¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶</span>
instance.interceptors.request.<span class="hljs-built_in">use</span>((config) =&gt; {
  <span class="hljs-type">const</span> requestId = <span class="hljs-built_in">generateRequestId</span>();
  config.metadata = { requestId, startTime: Date.<span class="hljs-built_in">now</span>() };
  
  console.<span class="hljs-built_in">log</span>(`[${requestId}] ${config.method?.<span class="hljs-built_in">toUpperCase</span>()} ${config.url}`, {
    params: config.params,
    data: config.data,
  });
  
  <span class="hljs-keyword">return</span> config;
});

instance.interceptors.response.<span class="hljs-built_in">use</span>(
  (response) =&gt; {
    <span class="hljs-type">const</span> { requestId, startTime } = response.config.metadata;
    <span class="hljs-type">const</span> duration = Date.<span class="hljs-built_in">now</span>() - startTime;
    
    console.<span class="hljs-built_in">log</span>(`[${requestId}] Response ${response.status} (${duration}ms)`, {
      data: response.data,
    });
    
    <span class="hljs-keyword">return</span> response;
  },
  (error) =&gt; {
    <span class="hljs-type">const</span> { requestId, startTime } = error.config?.metadata || {};
    <span class="hljs-type">const</span> duration = Date.<span class="hljs-built_in">now</span>() - startTime;
    
    console.<span class="hljs-built_in">error</span>(`[${requestId}] Error ${error.response?.status} (${duration}ms)`, {
      error: error.response?.data,
    });
    
    <span class="hljs-keyword">return</span> Promise.<span class="hljs-built_in">reject</span>(error);
  }
);
```

### æ€§èƒ½ç›‘æ§

```typescript
<span class="hljs-comment">// API æ€§èƒ½ç›‘æ§</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiMonitor</span> {
  <span class="hljs-keyword">private</span> metrics = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>&lt;string, {
    count: number;
    totalTime: number;
    errors: number;
  }&gt;();
  
  <span class="hljs-built_in">record</span>(endpoint: string, duration: number, success: <span class="hljs-type">boolean</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.metrics.<span class="hljs-built_in">has</span>(endpoint)) {
      <span class="hljs-keyword">this</span>.metrics.<span class="hljs-built_in">set</span>(endpoint, { count: <span class="hljs-number">0</span>, totalTime: <span class="hljs-number">0</span>, errors: <span class="hljs-number">0</span> });
    }
    
    <span class="hljs-type">const</span> metric = <span class="hljs-keyword">this</span>.metrics.<span class="hljs-built_in">get</span>(endpoint)!;
    metric.count++;
    metric.totalTime += duration;
    
    <span class="hljs-keyword">if</span> (!success) {
      metric.errors++;
    }
  }
  
  <span class="hljs-built_in">getStats</span>() {
    <span class="hljs-type">const</span> stats = Array.<span class="hljs-built_in">from</span>(<span class="hljs-keyword">this</span>.metrics.<span class="hljs-built_in">entries</span>()).<span class="hljs-built_in">map</span>(([endpoint, metric]) =&gt; ({
      endpoint,
      count: metric.count,
      avgTime: metric.totalTime / metric.count,
      errorRate: metric.errors / metric.count,
    }));
    
    <span class="hljs-keyword">return</span> stats.<span class="hljs-built_in">sort</span>((a, b) =&gt; b.avgTime - a.avgTime);
  }
}

<span class="hljs-type">const</span> monitor = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ApiMonitor</span>();

<span class="hljs-comment">// åœ¨æ‹¦æˆªå™¨ä¸­ä½¿ç”¨</span>
instance.interceptors.response.<span class="hljs-built_in">use</span>(
  (response) =&gt; {
    <span class="hljs-type">const</span> duration = Date.<span class="hljs-built_in">now</span>() - response.config.metadata.startTime;
    monitor.<span class="hljs-built_in">record</span>(response.config.url!, duration, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">return</span> response;
  },
  (error) =&gt; {
    <span class="hljs-type">const</span> duration = Date.<span class="hljs-built_in">now</span>() - error.config?.metadata?.startTime;
    monitor.<span class="hljs-built_in">record</span>(error.config?.url!, duration, <span class="hljs-literal">false</span>);
    <span class="hljs-keyword">return</span> Promise.<span class="hljs-built_in">reject</span>(error);
  }
);
```

## æ€»ç»“

Cloudreve çš„å‰åç«¯é€šä¿¡æœºåˆ¶å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

<span class="hljs-number">1.</span> **ç»Ÿä¸€çš„ API è®¾è®¡**: RESTful é£æ ¼ï¼Œæ¸…æ™°çš„æ¥å£è§„èŒƒ
<span class="hljs-number">2.</span> **å®Œå–„çš„è®¤è¯æœºåˆ¶**: JWT Token + è‡ªåŠ¨åˆ·æ–°
<span class="hljs-number">3.</span> **çµæ´»çš„é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯æ ¼å¼å’Œå¤„ç†ç­–ç•¥
<span class="hljs-number">4.</span> **æµå¼æ•°æ®æ”¯æŒ**: SSE åè®®å®ç°å®æ—¶é€šä¿¡
<span class="hljs-number">5.</span> **é«˜æ•ˆçš„æ–‡ä»¶ä¼ è¾“**: åˆ†ç‰‡ä¸Šä¼ æ”¯æŒå¤§æ–‡ä»¶
<span class="hljs-number">6.</span> **æ™ºèƒ½ç¼“å­˜ç­–ç•¥**: å‰åç«¯å¤šå±‚ç¼“å­˜ä¼˜åŒ–
<span class="hljs-number">7.</span> **æ€§èƒ½ç›‘æ§**: å®Œæ•´çš„è¯·æ±‚ç›‘æ§å’Œè°ƒè¯•æœºåˆ¶

è¿™å¥—é€šä¿¡æœºåˆ¶ä¸ºä½ å¼€å‘ä¾§è¾¹æ å¯¹è¯åŠŸèƒ½æä¾›äº†å¯é çš„åŸºç¡€ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ç°æœ‰çš„ API æ¥å£å’Œé€šä¿¡æ¨¡å¼æ¥å®ç°æ–°åŠŸèƒ½ã€‚
</code></pre>
<h3 data-id="heading-7"><strong>05-development-guide.md - å¼€å‘æµç¨‹æŒ‡å—</strong></h3>
<ul>
<li>
<p>ç¯å¢ƒæ­å»ºå’Œå¼€å‘å·¥ä½œæµ</p>
</li>
<li>
<p>è°ƒè¯•æŠ€å·§å’Œæ€§èƒ½ä¼˜åŒ–</p>
</li>
<li>
<p>éƒ¨ç½²æµç¨‹å’Œæœ€ä½³å®è·µ</p>
</li>
</ul>
<blockquote>
<p>å› ç¯‡å¹…é™åˆ¶ï¼Œå®Œæ•´æ–‡æ¡£å†…å®¹è¯¦è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FO65Ay8h1S6jbK_j67jQVDg" target="_blank" title="https://mp.weixin.qq.com/s/O65Ay8h1S6jbK_j67jQVDg" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/O65Ay8h1Sâ€¦</a></p>
</blockquote>
<h3 data-id="heading-8"><strong>06-chat-feature-extension.md - èŠå¤©åŠŸèƒ½æ‰©å±•å®ç°æ–¹æ¡ˆ</strong></h3>
<ul>
<li>
<p>åŸºäºç°æœ‰èŠå¤©åŠŸèƒ½çš„ä¾§è¾¹æ æ‰©å±•</p>
</li>
<li>
<p>å®Œæ•´çš„å‰åç«¯ä»£ç ç¤ºä¾‹</p>
</li>
<li>
<p>æ–‡ä»¶å¤¹ä¸Šä¸‹æ–‡è¯»å–å’Œ AI å¯¹è¯é›†æˆ</p>
</li>
</ul>
<blockquote>
<p>å› ç¯‡å¹…é™åˆ¶ï¼Œå®Œæ•´æ–‡æ¡£å†…å®¹è¯¦è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FO65Ay8h1S6jbK_j67jQVDg" target="_blank" title="https://mp.weixin.qq.com/s/O65Ay8h1S6jbK_j67jQVDg" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/O65Ay8h1Sâ€¦</a></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb0e8142224a4b3d998726c7bfecac32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=hMYrTL9aIgepbNietMJntPYejkE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9"><strong>æ¨¡å—é‡æ„</strong></h2>
<h3 data-id="heading-10"><strong>åˆ†æå¹¶è§„åˆ’é‡æ„</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a38acf5942b948578c636054c1df6fe7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=SHj%2BiM7YijijumkImq44YMSQdkA%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b243bc6b1a74472a9b6a8a0b0650674f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=pREIpCB2EreCJD3a1Fjzqw%2FqygQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11"><strong>é‡æ„è®¡åˆ’è¯¦æƒ…</strong></h3>
<pre><code class="hljs language-markdown" lang="markdown">
<span class="hljs-section"># Cloudreve å‰ç«¯é‡æ„ä¼˜åŒ–è®¡åˆ’</span>

<span class="hljs-section">## ğŸ“Š é¡¹ç›®ç°çŠ¶åˆ†æ</span>

<span class="hljs-section">### æŠ€æœ¯æ ˆæ¦‚å†µ</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**React 18.2.0 + TypeScript 5.2.2**</span> - ç°ä»£åŒ–æŠ€æœ¯æ ˆ
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Material-UI 6.x**</span> - æˆç†Ÿçš„ç»„ä»¶åº“
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Redux Toolkit**</span> - ç°ä»£çŠ¶æ€ç®¡ç†
<span class="hljs-bullet">-</span> <span class="hljs-strong">**119ä¸ªä¾èµ–åŒ…**</span> - ä¾èµ–è¾ƒä¸ºå¤æ‚

<span class="hljs-section">### ä¸»è¦é—®é¢˜è¯†åˆ«</span>
<span class="hljs-bullet">1.</span> <span class="hljs-strong">**æ€§èƒ½é—®é¢˜**</span>: Bundleè¿‡å¤§ã€ç¼ºå°‘è™šæ‹ŸåŒ–ã€ä¸å¿…è¦çš„é‡æ¸²æŸ“
<span class="hljs-bullet">2.</span> <span class="hljs-strong">**ä»£ç è´¨é‡**</span>: 75ä¸ªæ–‡ä»¶ä½¿ç”¨anyç±»å‹ã€ç»„ä»¶èŒè´£ä¸æ¸…ã€ä»£ç é‡å¤
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**æ¶æ„é—®é¢˜**</span>: ç»„ä»¶è€¦åˆåº¦é«˜ã€çŠ¶æ€ç®¡ç†åˆ†æ•£ã€ç¼ºå°‘æŠ½è±¡å±‚
<span class="hljs-bullet">4.</span> <span class="hljs-strong">**æŠ€æœ¯å€ºåŠ¡**</span>: 8ä¸ªTODOæ ‡è®°ã€é‡å¤æ ·å¼å®šä¹‰ã€é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€

<span class="hljs-section">## ğŸ¯ é‡æ„ä¼˜å…ˆçº§æ’åº</span>

<span class="hljs-section">### ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šå¿«é€Ÿèƒœåˆ©é¡¹ç›®ï¼ˆ2-3å‘¨ï¼‰</span>
<span class="hljs-strong">**é£é™©ï¼šğŸŸ¢ä½ | æ”¶ç›Šï¼šğŸ’°ğŸ’°ä¸­é«˜**</span>

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**ä»£ç è§„èŒƒç»Ÿä¸€**</span>
<span class="hljs-bullet">   -</span> ç»Ÿä¸€TypeScripté…ç½®ï¼Œæ¶ˆé™¤anyç±»å‹æ»¥ç”¨
<span class="hljs-bullet">   -</span> å»ºç«‹ç»„ä»¶å‘½åè§„èŒƒå’Œæ–‡ä»¶ç»„ç»‡æ ‡å‡†
<span class="hljs-bullet">   -</span> å®æ–½è‡ªåŠ¨åŒ–ä»£ç æ ¼å¼åŒ–

<span class="hljs-bullet">2.</span> <span class="hljs-strong">**å›½é™…åŒ–ä¼˜åŒ–**</span>
<span class="hljs-bullet">   -</span> ä¼˜åŒ–10ç§è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶ç»“æ„
<span class="hljs-bullet">   -</span> å®æ–½æŒ‰éœ€åŠ è½½æœºåˆ¶
<span class="hljs-bullet">   -</span> ç»Ÿä¸€ç¿»è¯‘keyå‘½åè§„èŒƒ

<span class="hljs-bullet">3.</span> <span class="hljs-strong">**å·¥å…·å‡½æ•°æŠ½å–**</span>
<span class="hljs-bullet">   -</span> åˆ›å»ºç»Ÿä¸€çš„æ—¶é—´æ ¼å¼åŒ–ã€æ–‡ä»¶ç±»å‹åˆ¤æ–­å·¥å…·
<span class="hljs-bullet">   -</span> æŠ½å–é‡å¤çš„APIè°ƒç”¨æ¨¡å¼
<span class="hljs-bullet">   -</span> å»ºç«‹å…¬å…±Hookåº“

<span class="hljs-section">### ç¬¬äºŒä¼˜å…ˆçº§ï¼šæ€§èƒ½ä¼˜åŒ–é¡¹ç›®ï¼ˆ3-4å‘¨ï¼‰</span>
<span class="hljs-strong">**é£é™©ï¼šğŸ”´é«˜ | æ”¶ç›Šï¼šğŸ’°ğŸ’°ğŸ’°é«˜**</span>

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**Bundleä¼˜åŒ–**</span>
<span class="hljs-bullet">   -</span> å®æ–½ç²¾ç»†åŒ–ä»£ç åˆ†å‰²ï¼Œé¢„è®¡å‡å°‘35%åŒ…å¤§å°
<span class="hljs-bullet">   -</span> ä¼˜åŒ–Monaco Editorã€Excalidrawç­‰å¤§å‹åº“çš„åŠ è½½
<span class="hljs-bullet">   -</span> å®æ–½æ‡’åŠ è½½å’Œé¢„åŠ è½½ç­–ç•¥

<span class="hljs-bullet">2.</span> <span class="hljs-strong">**ç»„ä»¶æ€§èƒ½ä¼˜åŒ–**</span>
<span class="hljs-bullet">   -</span> ä¸ºæ ¸å¿ƒç»„ä»¶æ·»åŠ React.memoå’ŒuseCallback
<span class="hljs-bullet">   -</span> å®æ–½è™šæ‹Ÿæ»šåŠ¨è§£å†³é•¿åˆ—è¡¨æ€§èƒ½é—®é¢˜
<span class="hljs-bullet">   -</span> ä¼˜åŒ–æ–‡ä»¶ç¼©ç•¥å›¾åŠ è½½æœºåˆ¶

<span class="hljs-bullet">3.</span> <span class="hljs-strong">**è¿è¡Œæ—¶ä¼˜åŒ–**</span>
<span class="hljs-bullet">   -</span> ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜
<span class="hljs-bullet">   -</span> ä¼˜åŒ–çŠ¶æ€æ›´æ–°é¢‘ç‡
<span class="hljs-bullet">   -</span> å®æ–½æ™ºèƒ½ç¼“å­˜ç­–ç•¥

<span class="hljs-section">### ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼šæ¶æ„é‡æ„é¡¹ç›®ï¼ˆ4-6å‘¨ï¼‰</span>
<span class="hljs-strong">**é£é™©ï¼šğŸ”´é«˜ | æ”¶ç›Šï¼šğŸ’°ğŸ’°ğŸ’°é«˜**</span>

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**ç»„ä»¶æ¶æ„é‡æ„**</span>
<span class="hljs-bullet">   -</span> é‡æ„GridFileç­‰å¤§å‹ç»„ä»¶ï¼ˆ463è¡Œâ†’æ‹†åˆ†ä¸ºå¤šä¸ªå°ç»„ä»¶ï¼‰
<span class="hljs-bullet">   -</span> åˆ†ç¦»æ•°æ®è·å–å’ŒUIæ¸²æŸ“é€»è¾‘
<span class="hljs-bullet">   -</span> å»ºç«‹ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€ç®¡ç†

<span class="hljs-bullet">2.</span> <span class="hljs-strong">**çŠ¶æ€ç®¡ç†ä¼˜åŒ–**</span>
<span class="hljs-bullet">   -</span> é‡æ„èŠå¤©ç³»ç»Ÿçš„çŠ¶æ€ç®¡ç†
<span class="hljs-bullet">   -</span> ç»Ÿä¸€Reduxå’Œæœ¬åœ°çŠ¶æ€çš„ä½¿ç”¨æ¨¡å¼
<span class="hljs-bullet">   -</span> å®æ–½çŠ¶æ€æœºç®¡ç†å¤æ‚çŠ¶æ€è½¬æ¢

<span class="hljs-bullet">3.</span> <span class="hljs-strong">**ä¾èµ–å‡çº§**</span>
<span class="hljs-bullet">   -</span> åˆ†æ‰¹å‡çº§æ ¸å¿ƒä¾èµ–åŒ…
<span class="hljs-bullet">   -</span> è§£å†³å®‰å…¨æ¼æ´å’Œå…¼å®¹æ€§é—®é¢˜
<span class="hljs-bullet">   -</span> è·å¾—æ–°ç‰ˆæœ¬ç‰¹æ€§æ”¯æŒ

<span class="hljs-section">## ğŸš€ å®æ–½ç­–ç•¥</span>

<span class="hljs-section">### æ¸è¿›å¼é‡æ„æ–¹æ¡ˆ</span>
<span class="hljs-code">```
é˜¶æ®µä¸€ï¼ˆ2-3å‘¨ï¼‰ï¼šåŸºç¡€ä¼˜åŒ–
â”œâ”€â”€ ä»£ç è§„èŒƒç»Ÿä¸€
â”œâ”€â”€ å›½é™…åŒ–ä¼˜åŒ–  
â””â”€â”€ æŠ€æœ¯å€ºåŠ¡æ¸…ç†

é˜¶æ®µäºŒï¼ˆ3-4å‘¨ï¼‰ï¼šæ€§èƒ½ä¼˜åŒ–
â”œâ”€â”€ Bundleåˆ†å‰²ä¼˜åŒ–
â”œâ”€â”€ ç»„ä»¶æ¸²æŸ“ä¼˜åŒ–
â””â”€â”€ ç¼“å­˜ç­–ç•¥å®æ–½

é˜¶æ®µä¸‰ï¼ˆ4-6å‘¨ï¼‰ï¼šæ¶æ„é‡æ„
â”œâ”€â”€ ç»„ä»¶æ‹†åˆ†é‡æ„
â”œâ”€â”€ çŠ¶æ€ç®¡ç†ç»Ÿä¸€
â””â”€â”€ ä¾èµ–ç‰ˆæœ¬å‡çº§
```</span>

<span class="hljs-section">### æµ‹è¯•å’Œè´¨é‡ä¿è¯</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**è‡ªåŠ¨åŒ–æµ‹è¯•**</span>: æ ¸å¿ƒç»„ä»¶90%+è¦†ç›–ç‡
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ€§èƒ½æµ‹è¯•**</span>: FCP&lt;1.5s, LCP&lt;2.5sç›®æ ‡
<span class="hljs-bullet">-</span> <span class="hljs-strong">**å›æ»šè®¡åˆ’**</span>: æ¯é˜¶æ®µè®¾ç½®ç¨³å®šç‰ˆæœ¬æ ‡ç­¾
<span class="hljs-bullet">-</span> <span class="hljs-strong">**ç›‘æ§å‘Šè­¦**</span>: å®æ—¶ç›‘æ§å…³é”®æ€§èƒ½æŒ‡æ ‡

<span class="hljs-section">## ğŸ“ˆ é¢„æœŸæ”¶ç›Š</span>

<span class="hljs-section">### æ€§èƒ½æå‡</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**åŠ è½½é€Ÿåº¦**</span>: æå‡50%
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Bundleå¤§å°**</span>: å‡å°‘35%
<span class="hljs-bullet">-</span> <span class="hljs-strong">**å†…å­˜å ç”¨**</span>: é™ä½20-30%

<span class="hljs-section">### å¼€å‘æ•ˆç‡</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ–°åŠŸèƒ½å¼€å‘**</span>: é€Ÿåº¦æå‡40%
<span class="hljs-bullet">-</span> <span class="hljs-strong">**ç»„ä»¶å¤ç”¨ç‡**</span>: æå‡60%
<span class="hljs-bullet">-</span> <span class="hljs-strong">**Bugä¿®å¤æ—¶é—´**</span>: å‡å°‘40%

<span class="hljs-section">### ä»£ç è´¨é‡</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æŠ€æœ¯å€ºåŠ¡**</span>: å‡å°‘80%
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æµ‹è¯•è¦†ç›–ç‡**</span>: è¾¾åˆ°85%+
<span class="hljs-bullet">-</span> <span class="hljs-strong">**ç±»å‹å®‰å…¨**</span>: æ¶ˆé™¤75ä¸ªanyç±»å‹ä½¿ç”¨

<span class="hljs-section">## âš ï¸ é£é™©æ§åˆ¶</span>

<span class="hljs-section">### æŠ€æœ¯é£é™©ç¼“è§£</span>
<span class="hljs-bullet">-</span> æ¸è¿›å¼é‡æ„é¿å…å¤§çˆ†ç‚¸å¼æ”¹åŠ¨
<span class="hljs-bullet">-</span> å……åˆ†çš„è‡ªåŠ¨åŒ–å’Œæ‰‹å·¥æµ‹è¯•
<span class="hljs-bullet">-</span> ç°åº¦å‘å¸ƒå’Œå®æ—¶ç›‘æ§

<span class="hljs-section">### é¡¹ç›®é£é™©ç®¡ç†</span>
<span class="hljs-bullet">-</span> æ¯å‘¨è¿›åº¦å’Œè´¨é‡è¯„å®¡
<span class="hljs-bullet">-</span> æ˜ç¡®çš„é‡Œç¨‹ç¢‘å’Œäº¤ä»˜ç‰©
<span class="hljs-bullet">-</span> å¤‡ç”¨æ–¹æ¡ˆå’ŒçŸ¥è¯†åˆ†äº«æœºåˆ¶

<span class="hljs-section">## ğŸ’¼ èµ„æºéœ€æ±‚</span>

<span class="hljs-bullet">-</span> <span class="hljs-strong">**äººåŠ›**</span>: å‰ç«¯æ¶æ„å¸ˆ1äºº + é«˜çº§å·¥ç¨‹å¸ˆ2äºº + å·¥ç¨‹å¸ˆ1äºº
<span class="hljs-bullet">-</span> <span class="hljs-strong">**æ—¶é—´**</span>: æ€»è®¡13-16å‘¨
<span class="hljs-bullet">-</span> <span class="hljs-strong">**å·¥å…·**</span>: è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ã€æ€§èƒ½ç›‘æ§å·¥å…·ã€CI/CDæµæ°´çº¿

è¿™ä¸ªé‡æ„è®¡åˆ’é€šè¿‡ç§‘å­¦çš„ä¼˜å…ˆçº§æ’åºå’Œé£é™©æ§åˆ¶ï¼Œç¡®ä¿åœ¨æå‡ä»£ç è´¨é‡çš„åŒæ—¶ä¿æŒé¡¹ç›®ç¨³å®šæ€§ï¼Œä¸ºé•¿æœŸçš„å¯ç»´æŠ¤æ€§å’Œå¼€å‘æ•ˆç‡å¥ å®šåŸºç¡€ã€‚
</code></pre>
<h3 data-id="heading-12"><strong>é‡æ„å®æ–½ç»“æœ</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed106812a2e4451f9d7dde99b3110e86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=sDw3gqwosSQmuCv4rXsFLbn%2BSz0%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71621d638a9442a1966fa481eef3a3e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=VVWK46lP8jA0gEGh4hImskngD%2FY%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86e8de53d9894f608e9012012ad386eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=rhZVUNICSjbJfihDET%2F%2F1MEo0oc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35d3584594a34692a93ae213af2edbc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=EASH%2B%2BKH5eup8CL53NcMqxbLzf4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13"><strong>åŠŸèƒ½è¿­ä»£</strong></h2>
<p>åœ¨å®Œæˆé¡¹ç›®ç†è§£å’Œä»£ç ä¼˜åŒ–åï¼Œæ­£å¼è¿›å…¥åŠŸèƒ½å¼€å‘é˜¶æ®µã€‚æˆ‘è®¡åˆ’ä¸º Cloudreve æ·»åŠ ä¸€ä¸ªæ™ºèƒ½å¯¹è¯åŠŸèƒ½ï¼Œè®©ç”¨æˆ·å¯ä»¥é€šè¿‡è‡ªç„¶è¯­è¨€ä¸äº‘ç›˜äº¤äº’ã€‚</p>
<h3 data-id="heading-14"><strong>å‡†å¤‡å·¥ä½œï¼šæ¥å…¥ Context7 MCP</strong></h3>
<p>ä¸ºäº†æé«˜ AI å¯¹ OpenRouter API çš„ç†è§£å’Œä½¿ç”¨èƒ½åŠ›ï¼Œæˆ‘å…ˆæ¥å…¥äº† Context7 MCP æœåŠ¡ã€‚</p>
<p><strong>Context7 é“¾æ¥ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fcontext7.com%3Fq%3Dopenrouter" target="_blank" title="https://context7.com?q=openrouter" ref="nofollow noopener noreferrer">context7.com?q=openrouter</a></p>
<p><strong>MCP é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"context7"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://mcp.context7.com/mcp"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/000fed0186eb4531a9b3d9163ff64b4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=Mv%2FmE1oZ5%2BUCsfbT4wbPVwRgFyM%3D" alt="" loading="lazy"/></p>
<p align="center">Context7 MCP é…ç½®ç•Œé¢</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3b77040a0f34d24a8df19056abd0a76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=UWlKqSJvyujlMJH5mt4en%2Bxbk%2BM%3D" alt="" loading="lazy"/></p>
<p align="center">MCP æœåŠ¡çŠ¶æ€</p>
<h3 data-id="heading-15"><strong>ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€å¯¹è¯åŠŸèƒ½</strong></h3>
<p><strong>éœ€æ±‚è§„åˆ’</strong></p>
<p>æ‰“å¼€ Planï¼Œæ˜ç¡®åŸºç¡€å¯¹è¯åŠŸèƒ½çš„æ ¸å¿ƒéœ€æ±‚ã€‚</p>
<p><strong>éœ€æ±‚æè¿°ï¼š</strong></p>
<pre><code class="hljs language-diff" lang="diff">éœ€æ±‚ï¼š
ç»™äº‘ç›˜åŠ ä¸ª AI å¯¹è¯åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ç”¨è‡ªç„¶è¯­è¨€è·Ÿ AI èŠå¤©

åç«¯ ï¼š
<span class="hljs-deletion">- æ–°å¢æµå¼å¯¹è¯æ¥å£å¹¶æ³¨å†Œåˆ°è·¯ç”±ä¸­ï¼Œéœ€è¦èº«ä»½é‰´æƒ</span>
<span class="hljs-deletion">- é›†æˆ OpenRouter è°ƒç”¨æ¨¡å‹</span>

å‰ç«¯ ï¼š
<span class="hljs-deletion">- å³ä¸‹è§’åŠ ä¸ªåœ†å½¢æ‚¬æµ®æŒ‰é’®</span>
<span class="hljs-deletion">- ç‚¹å‡»å¼¹å‡º 600px å®½çš„ä¾§è¾¹æ å¯¹è¯é¢æ¿</span>
<span class="hljs-deletion">- åŸºæœ¬çš„èŠå¤©ç•Œé¢ï¼šæ¶ˆæ¯åˆ—è¡¨ + è¾“å…¥æ¡†</span>
<span class="hljs-deletion">- è°ƒç”¨æµå¼å¯¹è¯æ¥å£æ—¶ï¼Œå¤„ç†å¥½é‰´æƒå‚æ•°ã€æµå¼è¾“å‡ºçŠ¶æ€</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c4fdfa41fc948a4a2e85d39fd4b9e43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=0b6PtVj9WiV3hroEpAZe8gWNiTQ%3D" alt="" loading="lazy"/></p>
<p>Coder ä¼šè‡ªåŠ¨è°ƒç”¨å†…ç½®çš„ Search Agent åˆ†æé¡¹ç›®ç»“æ„ï¼Œç†è§£ä»£ç ä¸Šä¸‹æ–‡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/531d8d6529fc4849ba172c8ff5cde9fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=1PFGSyJ9ptLPanIxbTGwP7MASC8%3D" alt="" loading="lazy"/></p>
<p align="center">Search Agent å·¥ä½œè¿‡ç¨‹</p>
<p>åˆ†æå®Œæˆåï¼ŒCoder å°†æŠ€æœ¯æ–¹æ¡ˆä»¥æ–‡æ¡£å½¢å¼å‘ˆç°ï¼Œæ”¯æŒå®æ—¶ä¿®æ”¹å’Œç¼–è¾‘ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0969b63c5ad471e9681b69689819455~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=rYrZaNhWCV%2Ftf7RnQZR8bsPEvuY%3D" alt="" loading="lazy"/></p>
<p align="center">æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£</p>
<h4 data-id="heading-16"><strong>ä»»åŠ¡æ‰§è¡Œ</strong></h4>
<p>ç¡®è®¤æ–¹æ¡ˆåï¼ŒCoder ä¼šæ ¹æ®æŠ€æœ¯è§„åˆ’è‡ªåŠ¨æ‹†è§£ä»»åŠ¡å¹¶åˆ†æ­¥æ‰§è¡Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bc4e5bed4644204837f2389623260cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=0aCkB8F%2BsDVjpnM2CaKZ0%2FXNz7A%3D" alt="" loading="lazy"/></p>
<p align="center">ä»»åŠ¡æ‹†è§£åˆ—è¡¨</p>
<p>åœ¨å®æ–½è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å®æ—¶çœ‹åˆ°æ¯ä¸ªæ­¥éª¤çš„çŠ¶æ€æ›´æ–°ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e973700b38df4cfabbcacb23665b6e40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=CubWtnj1VSsDyRphP%2BxgppbOpDY%3D" alt="" loading="lazy"/></p>
<p align="center">å®æ–½è¿›åº¦è¿½è¸ª</p>
<p>å¼€å‘å®Œæˆåï¼ŒCoder ä¼šè‡ªåŠ¨å¯åŠ¨é¡¹ç›®è¿›è¡Œé¢„è§ˆéªŒè¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6c3c56fc76347d78e450509f1e164ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=YW7Vw2onWpJ6qZgpYpz%2BaCF1KTs%3D" alt="" loading="lazy"/></p>
<p align="center">è‡ªåŠ¨å¯åŠ¨é¢„è§ˆ</p>
<p><strong>å®ç°æ•ˆæœï¼š</strong></p>
<p>å¯¹è¯åŠŸèƒ½å·²ç»æˆåŠŸå®ç°ï¼ŒUI é£æ ¼ä¸ Cloudreve åŸç”Ÿç•Œé¢ä¿æŒé«˜åº¦ä¸€è‡´ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ceb9310336146a79dc16ac837dc6a4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=8I20e%2Fj9tKqXqbTBNe56DqVkAPM%3D" alt="" loading="lazy"/></p>
<p align="center">å¯¹è¯åŠŸèƒ½ç•Œé¢</p>
<h3 data-id="heading-17"><strong>ç¬¬äºŒé˜¶æ®µï¼šå¢é‡è¿­ä»£ï¼Œå¢åŠ å¤šæ¨¡æ€å¬å›</strong></h3>
<p>åŸºç¡€å¯¹è¯åŠŸèƒ½å®Œæˆåï¼Œæˆ‘è¿›ä¸€æ­¥æå‡ºäº†æ›´é«˜çº§çš„éœ€æ±‚ï¼šè®© AI èƒ½å¤Ÿç†è§£å’Œæ£€ç´¢äº‘ç›˜ä¸­çš„æ–‡ä»¶å†…å®¹ã€‚</p>
<p><strong>å¢å¼ºéœ€æ±‚</strong></p>
<p><strong>éœ€æ±‚æè¿°ï¼š</strong></p>
<pre><code class="hljs language-diff" lang="diff">éœ€æ±‚ï¼š
AI èŠå¤©æ”¯æŒå¤šæ¨¡æ€æ–‡ä»¶æ™ºèƒ½æ£€ç´¢

åç«¯ï¼š
<span class="hljs-deletion">- æµå¼å¯¹è¯æ¥å£ä¸­è¯»å–å…¨é‡äº‘ç›˜æ–‡å†…å®¹ä½œä¸ºä¸Šä¸‹æ–‡æä¾›ç»™æ¨¡å‹ï¼Œæ¨¡å‹é€šè¿‡æ–‡ä»¶å…ƒä¿¡æ¯åŠå¤šæ¨¡æ€å†…å®¹è¿›è¡Œæ–‡ä»¶å¬å›</span>
<span class="hljs-deletion">- è¿”å›ï¼šsummary + file list çš„ç»“æ„ï¼Œå‰ç«¯æ¸²æŸ“ä¸ºæ–‡æœ¬ + GUI åˆ—è¡¨</span>
<span class="hljs-deletion">- é—®"å¸®æˆ‘æ‰¾åŒ…å«å°ç‹—çš„å›¾ç‰‡"è¿™ç±»é—®é¢˜æ—¶ï¼Œèƒ½å¤Ÿå¬å›æ–‡ä»¶å…ƒä¿¡æ¯æˆ–æ–‡ä»¶å†…å®¹ä¸ç”¨æˆ·æ„å›¾ç›¸å…³çš„æ–‡ä»¶</span>

å‰ç«¯ï¼š
<span class="hljs-deletion">- æ¶ˆæ¯ä¸­å±•ç¤ºæ–‡ä»¶åˆ—è¡¨</span>
<span class="hljs-deletion">- 3 åˆ—ç½‘æ ¼å¸ƒå±€ï¼Œæ˜¾ç¤ºç¼©ç•¥å›¾ã€æ–‡ä»¶å</span>
</code></pre>
<p><strong>å®ç°æ•ˆæœ</strong></p>
<p>Coder ä¼šè‡ªåŠ¨å¯åŠ¨å‰åç«¯æœåŠ¡ï¼Œå¹¶é€šè¿‡ç»ˆç«¯è¿›è¡ŒåŠŸèƒ½æµ‹è¯•ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/806ec905e34e4d118e7a6ca2b7a247b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=Ir0CL9WSmCDnmy2mWPPu7WT5jgs%3D" alt="" loading="lazy"/></p>
<p align="center">åŠŸèƒ½æµ‹è¯•è¿‡ç¨‹</p>
<p><strong>æœ€ç»ˆæ•ˆæœï¼š</strong></p>
<p>ç³»ç»ŸæˆåŠŸå®ç°äº†æ–‡ä»¶å†…å®¹è¯†åˆ«å’Œæ™ºèƒ½å¬å›åŠŸèƒ½ã€‚å½“ç”¨æˆ·è¯¢é—®"å¸®æˆ‘æ‰¾åŒ…å«å°ç‹—çš„å›¾ç‰‡"æ—¶ï¼ŒAI èƒ½å¤Ÿå‡†ç¡®è¯†åˆ«å›¾ç‰‡å†…å®¹å¹¶è¿”å›ç›¸å…³æ–‡ä»¶ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d018f95c7f24fe78a42f3f539caf686~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=mXFmRh%2F8fbZoot3avhyHlDb5jrs%3D" alt="" loading="lazy"/></p>
<p align="center">æ–‡ä»¶å¬å›æ•ˆæœå±•ç¤º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/581c966bbfde4d35b71c95b4ceabcb1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764039376&amp;x-signature=xz9gTKrb1g%2BuhEQ7lJ9mSmvTFBc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-18"><strong>æ€»ç»“ä¸æ€è€ƒ</strong></h2>
<p>é€šè¿‡è¿™æ¬¡å®è·µï¼Œå¯ä»¥çœ‹åˆ° SOLO Coder åœ¨é¡¹ç›®ç†è§£ã€ä»£ç é‡æ„åˆ°åŠŸèƒ½å¼€å‘çš„æ¯ä¸ªç¯èŠ‚éƒ½å¯ä»¥æä¾›æ”¯æŒã€‚è¿™ä¸ªé¡¹ç›®æœªæ¥è¿˜å¯ä»¥è¿›ä¸€æ­¥æ¢ç´¢çš„æœ‰ï¼šæ›´å¤æ‚çš„å¤šæ¨¡æ€äº¤äº’åœºæ™¯ã€æ™ºèƒ½æ–‡ä»¶ç®¡ç†å’Œæ¨èå’ŒåŸºäºç”¨æˆ·è¡Œä¸ºçš„ä¸ªæ€§åŒ–ä½“éªŒï¼Œæ¬¢è¿å¤§å®¶å»åˆ›é€ ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day 12ï¼š09. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-ä½¿ç”¨NuxtContentæ„å»ºåšå®¢æ¨¡å—]]></title>    <link>https://juejin.cn/post/7573776814927446035</link>    <guid>https://juejin.cn/post/7573776814927446035</guid>    <pubDate>2025-11-18T03:30:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573776814927446035" data-draft-id="7573631442312609798" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day 12ï¼š09. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-ä½¿ç”¨NuxtContentæ„å»ºåšå®¢æ¨¡å—"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-18T03:30:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”³é˜³"/> <meta itemprop="url" content="https://juejin.cn/user/4353721775165486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day 12ï¼š09. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-ä½¿ç”¨NuxtContentæ„å»ºåšå®¢æ¨¡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721775165486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”³é˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-18T03:30:51.000Z" title="Tue Nov 18 2025 03:30:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.hljs-comment,.hljs-quote,.hljs-variable{color:green}.hljs-built_in,.hljs-keyword,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#00f}.hljs-addition,.hljs-attribute,.hljs-literal,.hljs-section,.hljs-string,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type{color:#a31515}.hljs-deletion,.hljs-meta,.hljs-selector-attr,.hljs-selector-pseudo{color:#2b91af}.hljs-doctag{color:grey}.hljs-attr{color:red}.hljs-bullet,.hljs-link,.hljs-symbol{color:#00b0e8}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df86e40dd69f4632aa6fba29585aa97d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=hlKOs9cGdzZA2mWGMfDpYXHJyow%3D" alt="PixPin_2025-11-18_11-05-26.gif" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>ç”¨å®˜ç½‘çš„ä»‹ç»æ¥è¯´ï¼Œè¿™å…¶å®æ˜¯ä¸“ä¸º<code>Nuxt</code>å¼€å‘äººå‘˜è®¾è®¡çš„ä¸€æ¬¾å¼ºå¤§çš„åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„<code>CMS</code> ç³»ç»Ÿã€‚å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcontent.nuxt.com%2F%25EF%25BC%258C" target="_blank" title="https://content.nuxt.com/%EF%BC%8C" ref="nofollow noopener noreferrer">content.nuxt.com/ï¼Œ</a> è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ–°çš„ç‰ˆæœ¬ï¼Œæˆ‘æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒå¥½çš„ä¸­æ–‡ç¿»è¯‘ç«™ç‚¹ï¼Œæˆ‘å»ºè®®å¤§å®¶ç›´æ¥çœ‹å®˜ç½‘åŸæ–‡æ¡£ï¼Œé¿å…å› ä¸ºç‰ˆæœ¬ä¸åŒè€Œè¸©å‘ã€‚</p>
<h2 data-id="heading-1">äºŒã€é¡µé¢å¸ƒå±€è®¾è®¡</h2>
<p>è¿™é‡Œæˆ‘å‚è€ƒäº†ä¸€äº›åšå®¢ç«™ç‚¹çš„è®¾è®¡ï¼Œæˆ‘å¸Œæœ›å·¦è¾¹æ˜¯ä¸€ä¸ªåˆé›†çš„å±•ç¤ºï¼Œç‚¹å‡»ä¸“æ ï¼Œå³ä¾§æ˜¾ç¤ºå‡ºå…·ä½“çš„æ–‡ç« åˆ—è¡¨ï¼Œç‚¹å‡»æ–‡ç« åè¿›å…¥è¯¦ç»†å†…å®¹æŸ¥çœ‹é¡µé¢ã€‚å¤§æ¦‚å¾—ç¤ºæ„å›¾å¦‚ä¸‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ccd1e5bb7bb4cf0a69ea8dd71991bbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=IdkxqcHBZeh4KJZzTqrhE6Svoc0%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€æ•´åˆ NuxtContent</h2>
<h3 data-id="heading-3">1. å®‰è£…æ¨¡å—</h3>
<pre><code class="hljs language-bash" lang="bash">npx nuxt module add content
</code></pre>
<blockquote>
<p>ä¸å‡ºæ„å¤–çš„è¯ï¼Œä½ åº”è¯¥ä¼šç¢°åˆ°ä»¥ä¸‹æŠ¥é”™</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/593829820eb84d31bde4b711840ac596~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=9ooJIyauHnPpiHfBd3LUTTkRC8s%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ä¸è¦æ…Œï¼Œé¦–å…ˆæˆ‘æ˜¯å®Œå…¨æŒ‰ç…§å®˜æ–¹æ–‡æ¡£è¿›è¡Œæ“ä½œçš„ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œè‚¯å®šä¼šæœ‰äººåé¦ˆï¼Œæ‰€ä»¥ç¬¬ä¸€æ—¶é—´æˆ‘å°±å»<code>github</code>çš„ <code>issues</code> é‡Œç¿»äº†ä¸€ä¸‹ï¼Œæœä¸å…¶ç„¶ï¼Œæœ‰å¾ˆå¤šäººéƒ½åé¦ˆäº†è¿™ä¸ªé—®é¢˜ï¼Œæ„Ÿå…´è¶£çš„è‡ªå·±å»äº†è§£ä¸€ä¸‹ã€‚è¿™é‡Œæˆ‘ç»™å‡ºç›´è¾¾é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnuxt%2Fcontent%2Fissues%3Fq%3DCould%2520not%2520locate%2520the%2520bindings%2520file%25EF%25BC%258C%25E6%259C%2580%25E7%25BB%2588%25E5%25BE%2597%25E5%2587%25BA%25E7%259A%2584%25E7%25BB%2593%25E8%25AE%25BA%25E6%2598%25AF" target="_blank" title="https://github.com/nuxt/content/issues?q=Could%20not%20locate%20the%20bindings%20file%EF%BC%8C%E6%9C%80%E7%BB%88%E5%BE%97%E5%87%BA%E7%9A%84%E7%BB%93%E8%AE%BA%E6%98%AF" ref="nofollow noopener noreferrer">github.com/nuxt/contenâ€¦</a> <code>node</code> ç‰ˆæœ¬è¿‡é«˜ï¼Œåœ¨ <code>pnpm@10</code> ä¹‹åæœ‰ä¸€äº›ç ´åæ€§çš„æ›´æ–°ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffb00d567622427ab42a07d60d286184~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=gGY5Z%2FX8TNd1Uq%2BCwEP4PKyJ1GQ%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>é‡æ–°å®‰è£…ä¸€ä¸‹ä¸€æ¥ <code>pnpm i</code>ï¼Œæˆ‘å‘ç°äº†è¿™ä¸ª</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b812468c433d434883cab1da321bdd5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=2B85YMmsyIYEwzGLQ5sK6q%2F3gjI%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¹æ®æç¤ºï¼Œæˆ‘å°è¯•äº†ä¸€ä¸‹æ‰§è¡Œ<code>pnpm approve-builds</code>, å¹¶ä¸”å‹¾é€‰ä¸Šä»¥ä¸‹ä¾èµ–</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63da803f46c745bc8a1c1b9c53a6a1e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=Vl4Ot2LinkEkYyp7Hi%2FNmp8Azn4%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æŠ¥é”™ï¼Œå®‰è£…ä¸æˆåŠŸ</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/851c020d46924ae4bc1635ed0b023e9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=VrLodekcEFhp6fkxrhmFsY%2B62uM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b88fe256d4e495eb781a518a1993fab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=DJjtUEkI5wyUUSlcIBwAfp6GVYQ%3D" alt="image.png" loading="lazy"/>
å¤§è‡´æ„æ€æ˜¯è¯´ï¼Œå®ƒéœ€è¦ä¾èµ–æˆ‘æœ¬åœ°çš„ <code>Visual Studio</code> æ¥è¿›è¡Œç¼–è¯‘ï¼Œè¿˜å’Œ <code>c++</code>æœ‰ç‚¹å…³ç³»ï¼Œè¯´å·§ä¸å·§ï¼Œæˆ‘å‰å‡ å¤©åˆšæŠŠè¿™ç©æ„å¸è½½äº†ï¼Œä¹‹å‰å­¦ä¹ <code>c#</code>çš„æ—¶å€™è£…è¿‡ã€‚æˆ‘è‚¯å®šä¸ä¼šå†è£…å›å»äº†ï¼Œè¿™æœ‰ç‚¹åç›´è§‰äº†ï¼Œéš¾é“æˆ‘ç”¨è¿™ä¸ªè¿˜å¾—ä¸ºä½ è£…ä¸ªæœ¬åœ°çš„ç¼–è¯‘å™¨å˜›ã€‚<strong>æˆ‘éƒ½æ‡’å¾—å»è¯•è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæˆ‘è§‰å¾—å¾ˆä¸åˆç†ã€‚</strong></p>
<blockquote>
<p>æˆ‘åˆå»å®˜ç½‘æ‰«äº†ä¸€é , æœäº†ä¸€ä¸‹å…³é”®è¯ <code>better-sqlite3</code></p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30767b105a4741f98cb6a8904c6e0468~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=w%2FCsckh5Na0IuEQ9cvnQS%2FtZqlk%3D" alt="image.png" loading="lazy"/></p>
<p>éå¸¸å¥½ï¼Œ<code>install</code> çš„æ—¶å€™å®˜æ–¹è¿™é‡Œæœ‰æç¤º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a09ec99768c4bafb50fe096f88849ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=cS%2FCIEAjhQzu3c150Uqp5EL5nXg%3D" alt="image.png" loading="lazy"/></p>
<p>ä¿®æ”¹é…ç½®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40131dec09264d57b4ad0f14d72a5960~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=dzJkmxuGSv34n%2FZgR%2BdO7%2FvYuMw%3D" alt="image.png" loading="lazy"/></p>
<p>é‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œè¿è¡ŒæˆåŠŸã€‚</p>
<p><strong>é—®é¢˜è§£å†³ã€‚</strong></p>
<p>å°†åˆšåˆšæ‰§è¡Œ <code>pnpm approve-builds</code> é€ æˆçš„å½±å“è¿˜åŸ</p>
<ul>
<li>åˆ é™¤ç”Ÿæˆçš„ <code>pnpm-workspace.yaml</code> æ–‡ä»¶</li>
<li>å¸è½½ <code>sqlite3</code> ç›¸å…³ä¾èµ–</li>
</ul>
<blockquote>
<p><strong>åçœï¼Œçœ‹æ–‡æ¡£è¿˜æ˜¯ä¸å¤Ÿä»”ç»†å•Šï¼</strong>
è€½è¯¯äº†ä¸€äº›æ—¶é—´ï¼Œä¸è¿‡æˆ‘è§‰å¾—è¿™ä¸ªæ’æŸ¥æ­¥éª¤è¿˜æ˜¯æ¯”è¾ƒæœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥èŠ±äº†å¤§é‡ç¯‡å¹…è®°å½•ä¸‹æ¥äº†ï¼Œå¸Œæœ›å¯¹çœ‹æˆ‘åšå®¢çš„ä½ èƒ½æœ‰æ‰€å¸®åŠ©ã€‚</p>
</blockquote>
<h3 data-id="heading-4">2. ç»„ç»‡æˆ‘ä»¬çš„æ–‡ä»¶ç»“æ„</h3>
<h4 data-id="heading-5">1. é¡µé¢ç»“æ„</h4>
<pre><code class="hljs language-ini" lang="ini">pages                
â”œâ”€ blog              
â”‚  â”œâ”€ index.vue      <span class="hljs-comment"># é»˜è®¤åŠ è½½é¡µé¢</span>
â”‚  â””â”€ <span class="hljs-section">[...slug]</span>.vue  <span class="hljs-comment"># åŠ¨æ€è¯¦æƒ…é¡µ</span>
â”œâ”€ about.vue         
â”œâ”€ index.vue         
â””â”€ tools.vue         
</code></pre>
<h4 data-id="heading-6">2. æ–‡æ¡£ç»“æ„ (æ²¡æœ‰ content ç›®å½•è‡ªå·±æ–°å»ºä¸€ä¸ª)</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">content</span>           
â””â”€ blog           
   â””â”€ v2h         
      â”œâ”€ day1<span class="hljs-selector-class">.md</span>  
      â””â”€ day2<span class="hljs-selector-class">.md</span>  
</code></pre>
<blockquote>
<p>è¿™é‡Œç®€å•è§£é‡Šä¸€ä¸‹ï¼Œ<code>blog</code> æ˜¯ä¸€ä¸ªåˆé›†ï¼Œè¡¨ç¤ºè¿™é‡Œå­˜æ”¾çš„æ˜¯æ‰€æœ‰åšå®¢æ–‡ç« ï¼Œ<code>v2h</code> æ„æ€æ˜¯ <code>value 2 hours</code> æ¯å¤©ä¸¤å°æ—¶è¿™ä¸ªä¸“æ çš„æ„æ€ï¼Œ<code>day1.md</code> åˆ™è¡¨ç¤ºä¸“æ ä¸‹çš„æ–‡ç« ã€‚</p>
</blockquote>
<h3 data-id="heading-7">3. è¯»å–æ–‡ä»¶å†…å®¹</h3>
<p>æ¥ä¸‹æ¥å°±æ˜¯å°†æˆ‘ä»¬çš„åšå®¢æ–‡ç« ï¼Œè¯»å–åˆ°é¡µé¢ä¸­ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘ŠçŸ¥<code>blog</code>ç›®å½•ï¼Œä½œä¸ºåˆé›†é…ç½®</p>
<h4 data-id="heading-8">1. æ–°å»º content.config.ts</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineCollection, defineContentConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nuxt/content'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineContentConfig</span>({
    <span class="hljs-attr">collections</span>: {
        <span class="hljs-attr">blog</span>: <span class="hljs-title function_">defineCollection</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">'page'</span>,
            <span class="hljs-attr">source</span>: <span class="hljs-string">'blog/**/*.md'</span>,

        })
    }
})
</code></pre>
<h4 data-id="heading-9">2. æµ‹è¯•ä¸€ä¸‹<code>api</code></h4>
<p>æ–°å»ºä¸€äº›æ–‡æ¡£ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash">content           
â””â”€ blog           
   â”œâ”€ miniapp      <span class="hljs-comment"># å°ç¨‹åºä¸“æ </span>
   â”‚  â””â”€ aaa.md   
   â””â”€ v2h         <span class="hljs-comment"># æ¯å¤©ä¸¤å°æ—¶ä¸“æ åˆé›†</span>
      â”œâ”€ day1.md  
      â””â”€ day2.md  
</code></pre>
<p>åœ¨ <code>blog/index.vue</code>ä¸­è¯»å–æ–‡ä»¶å¯¼èˆªä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">useAsyncData</span>(<span class="hljs-string">'navigation'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">queryCollectionNavigation</span>(<span class="hljs-string">'blog'</span>)
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- &lt;div&gt;{{ allPosts }}&lt;/div&gt; --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ data }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>æŸ¥çœ‹è¾“å‡ºå†…å®¹</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Blog"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/blog"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"stem"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blog"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Miniapp"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/blog/miniapp"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"stem"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blog/miniapp"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Aaa"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/blog/miniapp/aaa"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"stem"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blog/miniapp/aaa"</span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"page"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"V2h"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/blog/v2h"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"stem"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blog/v2h"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Day1"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/blog/v2h/day1"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"stem"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blog/v2h/day1"</span>
                    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-punctuation">{</span>
                        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Day2"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/blog/v2h/day2"</span><span class="hljs-punctuation">,</span>
                        <span class="hljs-attr">"stem"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blog/v2h/day2"</span>
                    <span class="hljs-punctuation">}</span>
                <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"page"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"page"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<blockquote>
<p>è¿”å›äº†æ•´ä¸ªæ–‡æ¡£ç»“æ„ã€‚æœ‰äº†è¿™ä¸ªæˆ‘ä¹ˆå°±å¯ä»¥è½»æ¾çš„ç»„ç»‡å¥½å·¦ä¾§çš„ç›®å½•ç»“æ„äº†ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/456089a3676644e4ba7620777cd7ff04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=38xCgzfuN%2BEy9EdSbMXfuhIjlQU%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">useAsyncData</span>(<span class="hljs-string">'navigation'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">queryCollectionNavigation</span>(<span class="hljs-string">'blog'</span>)
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"full-height-container grid grid-cols-5 gap-6 p-6"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å·¦ä¾§å¯¼èˆªæ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-span-1 bg-white rounded-xl shadow-lg overflow-hidden flex flex-col"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"p-4 border-b border-gray-100"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-lg font-semibold text-gray-800"</span>&gt;</span>åšå®¢ä¸“æ <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu menu-lg rounded-box w-full h-full"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"columns in data![0]!.children"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">details</span> <span class="hljs-attr">open</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>{{ columns.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"article in columns.children"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>{{ article.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å³ä¾§å†…å®¹åŒº --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-span-4 bg-white rounded-xl shadow-lg flex flex-col overflow-hidden"</span>&gt;</span>{{ data }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

</code></pre>
<blockquote>
<p>å®Œå–„ä¸¤ç‚¹ï¼ŒåŸºæœ¬ä¸Šå°±æˆå‹äº†ã€‚</p>
<ol>
<li>ç‚¹å‡»ä¸€çº§èœå•çš„æ—¶å€™å³ä¾§åˆ†é¡µå±•ç¤ºä¸“æ ä¸‹æ‰€æœ‰æ–‡ç« åˆ—è¡¨</li>
<li>ç‚¹å‡»å­é›†èœå•ï¼Œç›´æ¥è¿›å…¥æ–‡ç« è¯¦æƒ…</li>
</ol>
</blockquote>
<h2 data-id="heading-10">å››ã€æœ€ç»ˆæˆæœå±•ç¤º</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df86e40dd69f4632aa6fba29585aa97d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=hlKOs9cGdzZA2mWGMfDpYXHJyow%3D" alt="PixPin_2025-11-18_11-05-26.gif" loading="lazy"/>
ç¤ºä¾‹ä»£ç ï¼š</p>
<p><code>blog/index.vue</code></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">ContentNavigationItem</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nuxt/content'</span>

<span class="hljs-keyword">const</span> currentPage = ref&lt;<span class="hljs-title class_">ContentNavigationItem</span>[]&gt;([])
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()
<span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">useAsyncData</span>(<span class="hljs-string">'navigation'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">queryCollectionNavigation</span>(<span class="hljs-string">'blog'</span>, [<span class="hljs-string">'description'</span>])
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleColumnsClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">title: string</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">value</span>?.[<span class="hljs-number">0</span>]?.<span class="hljs-property">children</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'No navigation data found'</span>)
    <span class="hljs-keyword">return</span>
  }
  <span class="hljs-comment">// è¿‡æ»¤åŒ¹é…çš„é¡¹</span>
  <span class="hljs-keyword">const</span> filteredItems = data.<span class="hljs-property">value</span>[<span class="hljs-number">0</span>].<span class="hljs-property">children</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">title</span> === title)
  <span class="hljs-keyword">if</span> (!filteredItems?.[<span class="hljs-number">0</span>]?.<span class="hljs-property">children</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'No Content data found'</span>)
    <span class="hljs-keyword">return</span>
  }
  currentPage.<span class="hljs-property">value</span> = filteredItems[<span class="hljs-number">0</span>]?.<span class="hljs-property">children</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleArticleClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">path: string</span>) =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">navigateTo</span>(path)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"full-height-container grid grid-cols-5 p-6"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å·¦ä¾§å¯¼èˆªæ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-span-1 bg-white rounded-xl shadow-lg overflow-hidden flex flex-col"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"p-4 border-b border-gray-100"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-lg font-semibold text-gray-800"</span>&gt;</span>åšå®¢ä¸“æ <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu menu-lg rounded-box w-full h-full"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"columns in data![0]!.children"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">details</span> <span class="hljs-attr">open</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">summary</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleColumnsClick(columns.title)"</span>&gt;</span>{{ columns.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"before:w-px"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"article in columns.children"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleArticleClick(article.path)"</span>&gt;</span>{{ article.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å³ä¾§å†…å®¹åŒº --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-span-4 flex flex-col gap-4 px-20"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in currentPage"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.path"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">NuxtLink</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"item.path"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card card-side bg-base-100 shadow-sm px-2"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">figure</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-40 h-20"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/image-20251031133400797.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">" "</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">figure</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>{{ item.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ item.description }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">NuxtLink</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

</code></pre>
<p><code>blog/[...slug].vue</code></p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
const route = useRoute()
const { data: post } = await useAsyncData(route.path, () =&gt; {
  return queryCollection('blog').path(route.path).first()
})
&lt;/script&gt;
&lt;template&gt;
  &lt;div class="h-screen"&gt;&lt;ContentRenderer v-if="post" :value="post" /&gt;&lt;/div&gt;
&lt;/template&gt;
&lt;style scoped lang="scss"&gt;&lt;/style&gt;

</code></pre>
<h2 data-id="heading-11">äº”ã€æ€»ç»“</h2>
<p>åˆ°è¿™é‡ŒåŸºæœ¬ç»“æ„ç®—æ˜¯å®šä¸‹æ¥äº†ï¼Œåç»­å°±æ˜¯å†…å®¹çš„å¡«å……ï¼Œä»¥åŠè§‚æ„Ÿä¸Šçš„ä¼˜åŒ–äº†ã€‚</p>
<p>å½“ç„¶è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡ï¼Œæœ€ç»ˆä¼šé›†æˆåå°ç®¡ç†ç³»ç»Ÿï¼Œå®Œæˆä¸€å¥—çœŸæ­£çš„ <code>CMS</code> å‘å¸ƒç³»ç»Ÿã€‚æ‰€ä»¥å¦‚æœä½ è§‰å¾—éº»çƒ¦ï¼Œæˆ–è€…å¯¹äº <code>NuxtContent</code>å¹¶ä¸æ„Ÿå…´è¶£ï¼Œå®Œå…¨å¯ä»¥å¿½ç•¥è¿™ä¸€èŠ‚å†…å®¹ã€‚</p>
<blockquote>
<p>åœ¨è¿›è¡Œæ ·å¼è°ƒæ•´çš„æ—¶å€™ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ª<code>bug</code>ï¼Œ<strong>inspira-ui</strong> å’Œ <strong>daisyui</strong> çš„æ ·å¼è¡¨å˜é‡å­˜åœ¨å‘½åå†²çªã€‚</p>
<p>æ¯”å¦‚ï¼š<strong>inspira-ui</strong> å®šä¹‰ <code> --border: oklch(0.922 0 0);</code> æ˜¯é¢œè‰²å±æ€§ï¼Œè€Œ <strong>daisyui</strong> å®šä¹‰çš„æ˜¯å®½åº¦å±æ€§ <code>--border: 1px;</code></p>
<p>å¯¼è‡´å±æ€§å€¼è¦†ç›–ï¼Œè¿™è‚¯å®šä¸æ˜¯ä¸ªä¾‹ï¼Œæš‚æ—¶è®°å½•ä¸€ä¸‹ï¼Œåç»­å†è€ƒè™‘æ€ä¹ˆè§£å†³ã€‚</p>
<p>ç›®å‰ä¼šå¯¼è‡´  <strong>daisyui</strong> çš„èœå•å·¦è¾¹æ²¡æœ‰ç«–çº¿</p>
<p>æˆ‘ç›®å‰çš„è§£å†³æ–¹æ¡ˆæ˜¯ç›´æ¥åœ¨æ ‡ç­¾è¦†ç›–å›å»</p>
<p><code>&lt;ul class="before:w-px"&gt;</code></p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e87041c758194a9a9bb8256570492027~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764041451&amp;x-signature=qDeiaaxUlGaEn7fJRMV3T2m6KsE%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚ä½ çš„â€œä¸ªäººå…¬å¸â€ä»è¿™ç¬¬ä¸€ä¸ª2å°æ—¶å¼€å§‹ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è¿›å±•æˆ–é‡åˆ°çš„å¡ç‚¹ï¼Œæˆ‘ä¼šé€ä¸€æŸ¥çœ‹ï¼Œå°½å¯èƒ½çš„å¸®åŠ©è§£å†³ã€‚æˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ130ï¼‰Redisçš„å‹ç¼©åˆ—è¡¨ï¼ˆZiplistï¼‰æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7573519273030664238</link>    <guid>https://juejin.cn/post/7573519273030664238</guid>    <pubDate>2025-11-17T23:02:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573519273030664238" data-draft-id="7573528564026556462" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ130ï¼‰Redisçš„å‹ç¼©åˆ—è¡¨ï¼ˆZiplistï¼‰æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-17T23:02:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ130ï¼‰Redisçš„å‹ç¼©åˆ—è¡¨ï¼ˆZiplistï¼‰æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-17T23:02:08.000Z" title="Mon Nov 17 2025 23:02:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    16
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‹ç¼©åˆ—è¡¨ï¼ˆZiplistï¼‰æ˜¯Redisä¸­ä¸€ç§ç´§å‡‘å‹çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨å°é‡çš„å­—ç¬¦ä¸²æˆ–æ•´æ•°ã€‚å®ƒçš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå°¤å…¶é€‚ç”¨äºå­˜å‚¨çŸ­å°æ•°æ®çš„åœºæ™¯ï¼Œå¦‚åˆ—è¡¨æˆ–å“ˆå¸Œè¡¨ä¸­çš„å°‘é‡å…ƒç´ ã€‚Ziplisté€šè¿‡è¿ç»­çš„å†…å­˜å—å­˜å‚¨æ•°æ®ï¼Œå¹¶ä½¿ç”¨ä¸€ç§ç´§å‡‘çš„ç¼–ç æ–¹å¼æ¥è¡¨ç¤ºå­—ç¬¦ä¸²å’Œæ•´æ•°ï¼Œä»è€Œå‡å°‘å†…å­˜å ç”¨ã€‚</p>
<h3 data-id="heading-0">ä¸»è¦ç»“æ„</h3>
<p>Ziplistçš„ç»“æ„å¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šè¡¨å¤´ã€æ•°æ®é¡¹å’Œè¡¨å°¾ã€‚</p>
<ol>
<li><strong>è¡¨å¤´</strong>ï¼šåŒ…å«ä¸¤ä¸ªå­—æ®µï¼š<code>zlbytes</code>å’Œ<code>zltail</code>ã€‚
<ul>
<li><code>zlbytes</code>ï¼šæ•´ä¸ªå‹ç¼©åˆ—è¡¨æ‰€å çš„å­—èŠ‚æ•°ã€‚</li>
<li><code>zltail</code>ï¼šåˆ°å‹ç¼©åˆ—è¡¨å°¾éƒ¨çš„åç§»é‡ã€‚</li>
<li><code>zllen</code>ï¼šå‹ç¼©åˆ—è¡¨åŒ…å«çš„èŠ‚ç‚¹æ•°ã€‚</li>
</ul>
</li>
<li><strong>æ•°æ®é¡¹</strong>ï¼šæ¯ä¸ªæ•°æ®é¡¹éƒ½æœ‰ä¸‰éƒ¨åˆ†ï¼šå‰ç½®èŠ‚ç‚¹é•¿åº¦ã€ç¼–ç æ–¹å¼å’Œå®é™…æ•°æ®ã€‚</li>
<li><strong>è¡¨å°¾</strong>ï¼šç”¨ä¸€ä¸ªå­—èŠ‚<code>0xFF</code>æ ‡è¯†å‹ç¼©åˆ—è¡¨çš„ç»“æŸã€‚</li>
</ol>
<h4 data-id="heading-1">å‹ç¼©åˆ—è¡¨çš„å®Œæ•´ç»“æ„</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/*  
 * |&lt;zlbytes&gt;|&lt;zltail&gt;|&lt;zllen&gt;|&lt;entry&gt;...|&lt;entry&gt;|&lt;zlend&gt;|
 */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ziplist</span> {</span>
    <span class="hljs-type">uint32_t</span> zlbytes;  <span class="hljs-comment">// å‹ç¼©åˆ—è¡¨æ‰€å ç”¨çš„æ€»å­—èŠ‚æ•°</span>
    <span class="hljs-type">uint32_t</span> zltail;   <span class="hljs-comment">// åˆ°å‹ç¼©åˆ—è¡¨å°¾éƒ¨çš„åç§»é‡</span>
    <span class="hljs-type">uint16_t</span> zllen;    <span class="hljs-comment">// å‹ç¼©åˆ—è¡¨åŒ…å«çš„èŠ‚ç‚¹æ•°</span>
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> entries[]; <span class="hljs-comment">// å‹ç¼©åˆ—è¡¨çš„å®é™…æ•°æ®éƒ¨åˆ†</span>
} ziplist;
</code></pre>
<h3 data-id="heading-2">æ•°æ®é¡¹çš„ç»“æ„</h3>
<p>æ¯ä¸ªæ•°æ®é¡¹ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li><strong>å‰ç½®èŠ‚ç‚¹é•¿åº¦ï¼ˆPrevEntryLengthï¼‰</strong>ï¼šè¡¨ç¤ºå‰ä¸€ä¸ªèŠ‚ç‚¹çš„é•¿åº¦ã€‚</li>
<li><strong>ç¼–ç æ–¹å¼ï¼ˆEncodingï¼‰</strong>ï¼šè¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„ç±»å‹å’Œç¼–ç æ–¹å¼ã€‚</li>
<li><strong>å®é™…æ•°æ®ï¼ˆContentï¼‰</strong>ï¼šå½“å‰èŠ‚ç‚¹çš„å®é™…æ•°æ®ã€‚</li>
</ol>
<h4 data-id="heading-3">æ•°æ®é¡¹çš„ç»“æ„å®šä¹‰</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ziplistEntry</span> {</span>
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> prevrawlen;  <span class="hljs-comment">// å‰ä¸€ä¸ªèŠ‚ç‚¹çš„é•¿åº¦</span>
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> encoding;    <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹çš„æ•°æ®ç±»å‹å’Œç¼–ç æ–¹å¼</span>
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *p;         <span class="hljs-comment">// æŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆ</span>
} ziplistEntry;
</code></pre>
<h3 data-id="heading-4">ä¸»è¦æ“ä½œ</h3>
<h4 data-id="heading-5">1. å‹ç¼©åˆ—è¡¨çš„åˆ›å»º</h4>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„å‹ç¼©åˆ—è¡¨ï¼Œå¹¶åˆå§‹åŒ–å…¶å¤´éƒ¨å’Œå°¾éƒ¨ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *<span class="hljs-title function_">ziplistNew</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> bytes = ZIPLIST_HEADER_SIZE+<span class="hljs-number">1</span>; <span class="hljs-comment">// å¤´éƒ¨ + å°¾éƒ¨</span>
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *zl = zmalloc(bytes);

    ZIPLIST_BYTES(zl) = intrev32ifbe(bytes);  <span class="hljs-comment">// è®¾ç½® zlbytes</span>
    ZIPLIST_TAIL_OFFSET(zl) = intrev32ifbe(ZIPLIST_HEADER_SIZE);  <span class="hljs-comment">// è®¾ç½® zltail</span>
    ZIPLIST_LENGTH(zl) = <span class="hljs-number">0</span>;  <span class="hljs-comment">// è®¾ç½® zllen</span>
    zl[bytes<span class="hljs-number">-1</span>] = ZIP_END;  <span class="hljs-comment">// è®¾ç½® zlend</span>

    <span class="hljs-keyword">return</span> zl;
}
</code></pre>
<h4 data-id="heading-6">2. æ’å…¥æ“ä½œ</h4>
<p>æ’å…¥ä¸€ä¸ªæ–°çš„æ•°æ®é¡¹åˆ°å‹ç¼©åˆ—è¡¨ä¸­ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *<span class="hljs-title function_">ziplistInsert</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *zl, <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *p, <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *s, <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> slen)</span> {
    <span class="hljs-type">size_t</span> curlen = intrev32ifbe(ZIPLIST_BYTES(zl));
    <span class="hljs-type">size_t</span> reqlen;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> encoding = <span class="hljs-number">0</span>;
    <span class="hljs-type">long</span> <span class="hljs-type">long</span> value;

    <span class="hljs-comment">// è®¡ç®—æ’å…¥æ•°æ®æ‰€éœ€çš„ç©ºé—´</span>
    <span class="hljs-keyword">if</span> (zipTryEncoding(s, slen, &amp;value, &amp;encoding)) {
        reqlen = zipIntSize(encoding);
    } <span class="hljs-keyword">else</span> {
        reqlen = slen;
    }

    <span class="hljs-comment">// è®¡ç®—æ–°èŠ‚ç‚¹çš„æ€»é•¿åº¦</span>
    reqlen += zipStorePrevEntryLength(<span class="hljs-literal">NULL</span>, curlen);
    reqlen += zipStoreEntryEncoding(<span class="hljs-literal">NULL</span>, encoding, slen);

    zl = zrealloc(zl, curlen + reqlen);
    p = zl + (p - zl);

    <span class="hljs-comment">// æ›´æ–°å¤´éƒ¨ä¿¡æ¯</span>
    memmove(p + reqlen, p, curlen - (p - zl));
    zipStorePrevEntryLength(p, curlen);
    p += zipStoreEntryEncoding(p, encoding, slen);
    
    <span class="hljs-keyword">if</span> (encoding == ZIP_INT_8B) {
        p[<span class="hljs-number">0</span>] = (<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>)value;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (encoding == ZIP_INT_16B) {
        <span class="hljs-type">int16_t</span> i16 = (<span class="hljs-type">int16_t</span>)value;
        <span class="hljs-built_in">memcpy</span>(p, &amp;i16, <span class="hljs-keyword">sizeof</span>(i16));
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (encoding == ZIP_INT_32B) {
        <span class="hljs-type">int32_t</span> i32 = (<span class="hljs-type">int32_t</span>)value;
        <span class="hljs-built_in">memcpy</span>(p, &amp;i32, <span class="hljs-keyword">sizeof</span>(i32));
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (encoding == ZIP_INT_64B) {
        <span class="hljs-type">int64_t</span> i64 = (<span class="hljs-type">int64_t</span>)value;
        <span class="hljs-built_in">memcpy</span>(p, &amp;i64, <span class="hljs-keyword">sizeof</span>(i64));
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">memcpy</span>(p, s, slen);
    }

    ZIPLIST_BYTES(zl) = intrev32ifbe(curlen + reqlen);
    ZIPLIST_TAIL_OFFSET(zl) = intrev32ifbe(curlen + reqlen - (p - zl));
    ZIPLIST_LENGTH(zl) = intrev16ifbe(intrev16ifbe(ZIPLIST_LENGTH(zl)) + <span class="hljs-number">1</span>);

    <span class="hljs-keyword">return</span> zl;
}
</code></pre>
<h4 data-id="heading-7">3. åˆ é™¤æ“ä½œ</h4>
<p>ä»å‹ç¼©åˆ—è¡¨ä¸­åˆ é™¤ä¸€ä¸ªæ•°æ®é¡¹ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *<span class="hljs-title function_">ziplistDelete</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *zl, <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> **p)</span> {
    <span class="hljs-type">size_t</span> curlen = intrev32ifbe(ZIPLIST_BYTES(zl));
    <span class="hljs-type">size_t</span> reqlen = zipRawEntryLength(*p);
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *ptr = *p;
    <span class="hljs-type">size_t</span> offset = ptr - zl;

    <span class="hljs-comment">// åˆ é™¤èŠ‚ç‚¹</span>
    memmove(ptr, ptr+reqlen, curlen-(offset+reqlen));
    zl = zrealloc(zl, curlen-reqlen);

    <span class="hljs-comment">// æ›´æ–°å¤´éƒ¨ä¿¡æ¯</span>
    ZIPLIST_BYTES(zl) = intrev32ifbe(curlen-reqlen);
    ZIPLIST_TAIL_OFFSET(zl) = intrev32ifbe(intrev32ifbe(ZIPLIST_TAIL_OFFSET(zl))-reqlen);
    ZIPLIST_LENGTH(zl) = intrev16ifbe(intrev16ifbe(ZIPLIST_LENGTH(zl))<span class="hljs-number">-1</span>);

    <span class="hljs-keyword">return</span> zl;
}
</code></pre>
<h3 data-id="heading-8">è¾…åŠ©å‡½æ•°</h3>
<h4 data-id="heading-9">ç¼–ç å’Œå­˜å‚¨é•¿åº¦</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> <span class="hljs-title function_">zipStorePrevEntryLength</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *p, <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> len)</span> {
    <span class="hljs-keyword">if</span> (p == <span class="hljs-literal">NULL</span>) {
        <span class="hljs-keyword">return</span> (len &lt; ZIP_BIG_PREVLEN) ? <span class="hljs-number">1</span> : <span class="hljs-number">5</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (len &lt; ZIP_BIG_PREVLEN) {
            p[<span class="hljs-number">0</span>] = len;
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> {
            p[<span class="hljs-number">0</span>] = ZIP_BIG_PREVLEN;
            <span class="hljs-built_in">memcpy</span>(p+<span class="hljs-number">1</span>, &amp;len, <span class="hljs-keyword">sizeof</span>(len));
            <span class="hljs-keyword">return</span> <span class="hljs-number">5</span>;
        }
    }
}

<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> <span class="hljs-title function_">zipStoreEntryEncoding</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *p, <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> encoding, <span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> rawlen)</span> {
    <span class="hljs-keyword">if</span> (p == <span class="hljs-literal">NULL</span>) {
        <span class="hljs-keyword">if</span> (ZIP_IS_STR(encoding)) {
            <span class="hljs-keyword">if</span> (rawlen &lt;= <span class="hljs-number">0x3f</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rawlen &lt;= <span class="hljs-number">0x3fff</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-number">5</span>;
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (ZIP_IS_STR(encoding)) {
            <span class="hljs-keyword">if</span> (rawlen &lt;= <span class="hljs-number">0x3f</span>) {
                p[<span class="hljs-number">0</span>] = ZIP_STR_06B | rawlen;
                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rawlen &lt;= <span class="hljs-number">0x3fff</span>) {
                p[<span class="hljs-number">0</span>] = ZIP_STR_14B | ((rawlen &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0x3f</span>);
                p[<span class="hljs-number">1</span>] = rawlen &amp; <span class="hljs-number">0xff</span>;
                <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
            } <span class="hljs-keyword">else</span> {
                p[<span class="hljs-number">0</span>] = ZIP_STR_32B;
                <span class="hljs-built_in">memcpy</span>(p+<span class="hljs-number">1</span>, &amp;rawlen, <span class="hljs-keyword">sizeof</span>(rawlen));
                <span class="hljs-keyword">return</span> <span class="hljs-number">5</span>;
            }
        } <span class="hljs-keyword">else</span> {
            p[<span class="hljs-number">0</span>] = encoding;
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-10">ç¤ºä¾‹ä½¿ç”¨</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *zl = ziplistNew();
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *p;

    <span class="hljs-comment">// æ’å…¥æ•°æ®é¡¹</span>
    zl = ziplistInsert(zl, zl + ZIPLIST_HEADER_SIZE, (<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *)<span class="hljs-string">"hello"</span>, <span class="hljs-number">5</span>);
    zl = ziplistInsert(zl, zl + ZIPLIST_HEADER_SIZE, (<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *)<span class="hljs-string">"world"</span>, <span class="hljs-number">5</span>);

    p = zl + ZIPLIST_HEADER_SIZE;
    <span class="hljs-keyword">while</span> (*p != ZIP_END) {
        <span class="hljs-comment">// è®¿é—®æ•°æ®é¡¹</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s\n"</span>, p + <span class="hljs-number">1</span>); <span class="hljs-comment">// æ‰“å°æ•°æ®é¡¹å†…å®¹</span>
        p += zipRawEntryLength(p);
    }

    <span class="hljs-comment">// åˆ é™¤æ•°æ®é¡¹</span>
    zl = ziplistDelete(zl, &amp;p);

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>æ€»ç»“ï¼šå‹ç¼©åˆ—è¡¨ï¼ˆziplistï¼‰é€šè¿‡ç´§å‡‘çš„å†…å­˜å¸ƒå±€å’Œçµæ´»çš„ç¼–ç æ–¹å¼å®ç°äº†é«˜æ•ˆçš„å†…å­˜åˆ©ç”¨ã€‚å®ƒé€‚ç”¨äºå­˜å‚¨çŸ­å°æ•°æ®çš„åœºæ™¯ï¼Œé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æ•°æ®ç»“æ„ï¼Œä¿è¯äº†é«˜æ•ˆçš„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº Hologres æ„å»ºæ™ºèƒ½é©¾é©¶å›¾åƒé«˜æ€§èƒ½åˆ†æç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7573708620870975540</link>    <guid>https://juejin.cn/post/7573708620870975540</guid>    <pubDate>2025-11-18T10:16:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573708620870975540" data-draft-id="7573679820632342563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº Hologres æ„å»ºæ™ºèƒ½é©¾é©¶å›¾åƒé«˜æ€§èƒ½åˆ†æç³»ç»Ÿ"/> <meta itemprop="keywords" content="æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2025-11-18T10:16:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº Hologres æ„å»ºæ™ºèƒ½é©¾é©¶å›¾åƒé«˜æ€§èƒ½åˆ†æç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-18T10:16:35.000Z" title="Tue Nov 18 2025 10:16:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€äººå·¥æ™ºèƒ½æŠ€æœ¯çš„æ·±å…¥å‘å±•ï¼Œä¼ä¸šå¯¹æ•°æ®çš„åˆ©ç”¨å·²ä¸å†å±€é™äºä¼ ç»Ÿçš„ç»“æ„åŒ–æ•°æ®åˆ†æã€‚è¶Šæ¥è¶Šå¤šçš„è¡Œä¸šå¼€å§‹ä¾èµ–å¤šæ¨¡æ€æ•°æ®è¿›è¡Œæ™ºèƒ½å†³ç­–ï¼Œæ¶µç›–å•†å“æ¨èã€é©¾é©¶è¡Œä¸ºåˆ†æã€é‡‘èé£æ§ã€æ•™è‚²ä¸ªæ€§åŒ–ç­‰å¤šä¸ªåœºæ™¯ã€‚è¿™äº›åœºæ™¯æ™®éå…·å¤‡ä¸€ä¸ªå…±åŒç‰¹å¾ï¼š<strong>æ•°æ®å½¢æ€å¤šæ ·ã€åˆ†æéœ€æ±‚å¤æ‚ã€æ£€ç´¢æ–¹å¼å¤šå…ƒ</strong>ã€‚Hologres 4.0çš„æ•´ä½“æ¶æ„å›´ç»•â€œå¤šæ¨¡æ€åˆ†ææ£€ç´¢ all-in-oneâ€è®¾è®¡ï¼Œå®ç°â€œä¸€ä»½æ•°æ®ã€ä¸€ä»½è®¡ç®—ã€å¤šæ¨¡åˆ†æâ€çš„ä¸€ç«™å¼ç›®æ ‡ï¼Œä¸€æ¡SQLå³å¯å®Œæˆä»æ•°æ®æ¥å…¥ã€AIåŠ å·¥åˆ°å¤šæ¨¡æŸ¥è¯¢çš„å…¨æµç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/954b03bd631747bc9ecdbc804bc7276b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764065957&amp;x-signature=UXzee7usV9IDcPSda96iKERLGV8%3D" alt="image.png" loading="lazy"/></p>
<p>æ™ºèƒ½é©¾é©¶åœºæ™¯ä¸­ï¼Œå¯ä»¥çœ‹åˆ°é‡‡é›†çš„è½¦æœºå„ç§ä¿¡å·æ•°æ®ï¼Œä»¥å¤§å®½è¡¨çš„å½¢å¼å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚è¿™äº›ä¿¡å·æ•°æ®é€šå¸¸ä¼šåŒ…å«ç»“æ„åŒ–æ•°æ®ï¼ˆè½¦è¾†çŠ¶æ€ã€è½¦æœºç‰ˆæœ¬ç­‰ï¼‰ã€åŠç»“æ„åŒ–æ•°æ®ï¼ˆè½¦æœºä¿¡å·ï¼‰ã€éç»“æ„åŒ–æ•°æ®ï¼ˆè½¨è¿¹ç…§ç‰‡ç­‰ï¼‰ã€‚åœ¨ä¸šåŠ¡åº”ç”¨çš„æ—¶å€™ï¼Œè¦è¿›è¡Œç‚¹æŸ¥ã€OLAPåˆ†æã€å…¨æ–‡æ£€ç´¢ã€å‘é‡æ£€ç´¢ã€æ··åˆæ£€ç´¢ç­‰å¤šç§åœºæ™¯ã€‚</p>
<p>ä¼ ç»Ÿæ¶æ„å¾€å¾€ä¾èµ–å¤šä¸ªç‹¬ç«‹å¼•æ“ååŒå·¥ä½œï¼Œå¯¼è‡´ç³»ç»Ÿå¤æ‚ã€æˆæœ¬é«˜æ˜‚ã€æ•°æ®ä¸ä¸€è‡´ç­‰é—®é¢˜é¢‘å‘ã€‚AIæ—¶ä»£çš„åº”ç”¨éœ€è¦åœ¨ä¸€ä¸ªç»Ÿä¸€å¹³å°ä¸Šå®ŒæˆOLAPåˆ†æã€ç‚¹æŸ¥æœåŠ¡ã€å…¨æ–‡æ£€ç´¢ã€å‘é‡æœç´¢ä»¥åŠAIæ¨ç†ç­‰å¤šç§èƒ½åŠ›çš„èåˆä½¿ç”¨ã€‚æœ¬æ–‡ä»¥è‡ªåŠ¨é©¾é©¶å›¾åƒæ•°æ®é›†ä¸ºä¾‹ï¼Œä»‹ç»Hologreså¦‚ä½•åœ¨ä¼ ç»Ÿçš„ç»“æ„åŒ–åˆ†æçš„åŸºç¡€ä¸Šï¼Œå®Œæˆæ–‡æœå›¾ã€å›¾æœå›¾ç­‰å¤šæ¨¡æ€åˆ†æåœºæ™¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51e2915b7deb45cea3632a5a2ee92aea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764065957&amp;x-signature=gavDrk9mOWaDApHcEgrFfrQ12UA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>åŸºäºHologresæ„å»ºè‡ªåŠ¨é©¾é©¶å›¾åƒé«˜æ€§èƒ½åˆ†æç³»ç»Ÿ</strong></h2>
<p>åœ¨è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿä¸­ï¼Œè½¦è¾†å›¾ç‰‡åˆ†ææ˜¯ç¯å¢ƒæ„ŸçŸ¥æ¨¡å—çš„æ ¸å¿ƒåœºæ™¯ä¹‹ä¸€ï¼Œä¸»è¦ç”¨äºå®æ—¶è§£æè½¦è¾†å†…å¤–éƒ¨æ‘„åƒå¤´æ•æ‰çš„è§†è§‰ä¿¡æ¯ï¼Œä»¥å®ç°å¯¹å‘¨å›´ç¯å¢ƒçš„ç²¾å‡†ç†è§£ä¸å†³ç­–ã€‚æœ¬æ–‡ä»¥BDDè‡ªåŠ¨é©¾é©¶æ•°æ®é›†ä¸ºä¾‹æ¨¡æ‹Ÿè‡ªåŠ¨é©¾é©¶åœºæ™¯ï¼Œæ¨¡æ‹ŸçœŸå®é©¾é©¶åœºæ™¯ï¼Œé‡‡é›†10ä¸‡å¼ åŒ…æ‹¬é©¾é©¶åŒºåŸŸã€åœ°ç†ã€ç¯å¢ƒã€å¤©æ°”å¤šæ ·æ€§ç­‰æ•°æ®çš„å›¾ç‰‡ï¼Œé€šè¿‡å¯¹å›¾ç‰‡çš„åˆ†æä¸æ£€ç´¢ï¼Œè¿›è¡Œäº†è¡Œé©¶è½¨è¿¹åˆ†æã€ç¯å¢ƒæ„ŸçŸ¥ä¼˜åŒ–åŠè¡Œäººè½¦è¾†è¯†åˆ«ç²¾åº¦æå‡ç­‰å…¨æ ˆæŠ€æœ¯éªŒè¯ï¼Œæå‡ç³»ç»Ÿå¯¹å¤æ‚äº¤é€šåœºæ™¯çš„é€‚åº”èƒ½åŠ›ã€å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p>åŸºäºHologresæ„å»ºè‡ªåŠ¨é©¾é©¶å›¾åƒé«˜æ€§èƒ½åˆ†æç³»ç»ŸåŒ…å«çš„ä¸»è¦èƒ½åŠ›å¦‚ä¸‹ï¼š</p>
<ul>
<li>éç»“æ„åŒ–æ•°æ®ï¼ˆObject Tableï¼‰ï¼šæ”¯æŒé€šè¿‡è¡¨çš„å½¢å¼è¯»å–OSSä¸­éç»“æ„åŒ–æ•°æ®ï¼ˆPDFã€IMAGEã€PPTç­‰ï¼‰ã€‚</li>
<li>AI Functionï¼šåœ¨Hologresä¸­å¯ä»¥ç”¨æ ‡å‡†SQLçš„æ–¹å¼è°ƒç”¨Functionï¼Œè‡ªåŠ¨è°ƒç”¨å†…ç½®å¤§æ¨¡å‹ï¼Œå®ŒæˆAIæœåŠ¡å»ºè®¾åœºæ™¯ã€‚
<ul>
<li>æ•°æ®åŠ å·¥ï¼šæä¾›Embedã€Chunkç®—å­ï¼Œå¯ä»¥å¯¹éç»“æ„åŒ–æ•°æ®åŠ å·¥æˆç»“æ„åŒ–æ•°æ®å­˜å‚¨ï¼Œæ— éœ€ä½¿ç”¨å¤–éƒ¨ç®—æ³•å°±èƒ½è‡ªåŠ¨Embedã€‚</li>
<li>æ•°æ®æ£€ç´¢å’Œåˆ†æï¼šæä¾›ai_genã€ai_summarizeç­‰ç®—å­ï¼Œä½¿ç”¨SQLå°±èƒ½å¯¹æ•°æ®è¿›è¡Œæ¨ç†ã€é—®é¢˜æ€»ç»“ä»¥åŠç¿»è¯‘ç­‰èƒ½åŠ›ã€‚</li>
</ul>
</li>
<li>Dynamic Tableä»‹ç»ï¼šæ”¯æŒå¢é‡åˆ·æ–°æ¨¡å¼å¯¹éç»“æ„åŒ–æ•°æ®è‡ªåŠ¨åŠ å·¥ï¼Œæ¯æ¬¡åªè®¡ç®—å¢é‡çš„æ•°æ®æœ‰æ•ˆå‡å°‘é‡å¤è®¡ç®—ï¼Œé™ä½èµ„æºåˆ©ç”¨ç‡ã€‚</li>
<li>å‘é‡æ£€ç´¢ï¼šæ”¯æŒæ ‡å‡†SQLçš„å‘é‡æ£€ç´¢ï¼Œç”¨äºéç»“æ„åŒ–æ•°æ®çš„ç›¸ä¼¼åº¦æœç´¢ã€åœºæ™¯è¯†åˆ«ç­‰ï¼Œåœ¨åŒä¸€ä¸ªæŸ¥è¯¢ä¸­å¯ä»¥è‡ªç”±åœ°å®ç°å‘é‡å’Œæ ‡é‡çš„æ£€ç´¢ã€‚</li>
<li>å…¨æ–‡æ£€ç´¢ï¼šé€šè¿‡å€’æ’ç´¢å¼•ã€åˆ†è¯ç­‰æœºåˆ¶å®ç°å¯¹éç»“æ„åŒ–æ•°æ®çš„é«˜æ•ˆæ£€ç´¢ï¼Œæ”¯æŒå…³é”®è¯åŒ¹é…ã€çŸ­è¯­æ£€ç´¢ç­‰ä¸°å¯Œçš„æ£€ç´¢æ–¹å¼ï¼Œå®ç°æ›´åŠ çµæ´»çš„æ£€ç´¢ã€‚</li>
</ul>
<h2 data-id="heading-1"><strong>æ–¹æ¡ˆä¼˜åŠ¿</strong></h2>
<p>é€šè¿‡å¦‚ä¸Šæ ¸å¿ƒèƒ½åŠ›ï¼Œåœ¨Hologresä¸­å¯¹å›¾ç‰‡æ£€ç´¢çš„æ ¸å¿ƒä¼˜åŠ¿å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å®Œæ•´çš„<strong><strong>AI</strong></strong>æ•°æ®å¤„ç†æµç¨‹</strong>ï¼šæ¶µç›–ä»æ•°æ®Embedã€Chunkã€å¢é‡åŠ å·¥å’Œæ£€ç´¢/åˆ†æçš„å…¨æµç¨‹ï¼Œä¸ä½¿ç”¨å¤§æ•°æ®ç³»ç»Ÿä¸€æ ·è½»æ¾æ„å»ºAIåº”ç”¨ã€‚</li>
<li><strong>æ ‡å‡†<strong><strong>SQL</strong></strong>åŠ å·¥å›¾ç‰‡æ•°æ®</strong>ï¼šæ— éœ€ä½¿ç”¨ä¸“ç”¨å¼€å‘è¯­è¨€ï¼Œ<strong>çº¯SQL</strong>å°±èƒ½å®Œæˆå›¾ç‰‡æ•°æ®æå–ã€åŠ å·¥ã€‚</li>
<li><strong>ä¸€ä¸ªå¹³å°æ”¯æŒè·¨æ¨¡æ€æ£€ç´¢</strong>ï¼šæ”¯æŒä»¥æ–‡æœå›¾ã€ä»¥å›¾æœå›¾ï¼Œè¯­ä¹‰ç†è§£çªç ´å…³é”®è¯å±€é™ï¼Œåœ¨Hologreså°±èƒ½å®ç°è·¨æ¨¡æ€æ£€ç´¢ã€‚</li>
<li><strong>æ£€ç´¢æ›´ç²¾å‡†ã€çµæ´»å’Œæ™ºèƒ½</strong>ï¼šå¯ä»¥è½»æ¾æ„å»ºâ€œå…³é”®è¯+è¯­ä¹‰+å¤šæ¨¡æ€â€çš„æ··åˆæ£€ç´¢é“¾è·¯ï¼Œè¦†ç›–ä»ç²¾å‡†æœç´¢åˆ°æ„å›¾ç†è§£çš„å…¨åœºæ™¯éœ€æ±‚ã€‚è¿˜èƒ½ç»“åˆAI Functionå®ç°å¯¹ç”¨æˆ·æ„å›¾çš„æ·±åº¦ç†è§£ï¼Œè¯­ä¹‰å…³è”å’Œä¸Šä¸‹æ–‡æ¨ç†ï¼Œå®ç°æ›´æ™ºèƒ½çš„æ£€ç´¢èƒ½åŠ›ã€‚</li>
<li><strong>æ•°æ®ä¸å‡ºåº“ï¼Œå®‰å…¨æ€§æ›´é«˜</strong>ï¼šä¸éœ€è¦å°†æ•°æ®å¯¼å‡ºåˆ°å¤–éƒ¨ç³»ç»Ÿï¼Œä¸Hologresçš„å¤šç§å®‰å…¨èƒ½åŠ›æ— ç¼é›†æˆï¼Œå¹¶é«˜æ•ˆä¿æŠ¤æ•°æ®å®‰å…¨ã€‚</li>
</ul>
<h2 data-id="heading-2">æ–¹æ¡ˆæµç¨‹</h2>
<p>æœ¬æ¬¡æ–¹æ¡ˆçš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ•°æ®é›†å‡†å¤‡ã€‚</li>
</ol>
<p>å°†å›¾ç‰‡æ•°æ®ä¸Šä¼ è‡³OSSå­˜å‚¨ã€‚</p>
<ol start="2">
<li>å›¾ç‰‡åŠ å·¥ã€‚</li>
</ol>
<p>ä½¿ç”¨Object Tableè¯»å–å›¾ç‰‡çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œç„¶ååˆ›å»ºå¢é‡åˆ·æ–°çš„Dynamic Tableå¯¹æ•°æ®è¿›è¡ŒEmbedï¼Œå¹¶ä¸ºDynamic Tableæ„å»ºå‘é‡ç´¢å¼•ï¼Œä»¥ä¾¿åç»­æ£€ç´¢èƒ½å¤Ÿå……åˆ†åˆ©ç”¨ç´¢å¼•çš„åŠŸèƒ½ã€‚</p>
<ol start="3">
<li>ä½¿ç”¨ai_embedç®—å­å°†è‡ªç„¶è¯­è¨€çš„é—®é¢˜è¿›è¡ŒEmbeddingï¼Œç„¶åä½¿ç”¨å‘é‡æ£€ç´¢è¾“å‡ºTop Nçš„ç»“æœã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61d6d9715947417bbfa09193822f216c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764065957&amp;x-signature=GSSEtM2lHOc6a8afhygWFOuFuuc%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>å‡†å¤‡å·¥ä½œ</strong></h2>
<ol>
<li>æ•°æ®å‡†å¤‡</li>
</ol>
<p>æœ¬æ–‡ä½¿ç”¨ModelScopeå…¬å¼€çš„BDD100K è‡ªåŠ¨é©¾é©¶å›¾åƒæ•°æ®é›†ä¸­<code>val.zip</code>æ–‡ä»¶ï¼Œæ¨¡æ‹Ÿå¤šä¸ªè½¦è¾†çœŸæ˜¯è¡Œé©¶æ•°æ®ã€‚</p>
<ol start="2">
<li>ç¯å¢ƒå‡†å¤‡</li>
</ol>
<ul>
<li>è´­ä¹°Hologres V4.0åŠä»¥ä¸Šç‰ˆæœ¬å®ä¾‹å¹¶åˆ›å»ºæ•°æ®åº“ã€‚</li>
<li>è´­ä¹°AIèµ„æºã€‚</li>
</ul>
<p>æœ¬æ–‡ä»¥<code>large-96core-512GB-384GB</code>ã€1ä¸ªèŠ‚ç‚¹ä¸ºä¾‹ã€‚</p>
<ul>
<li>æ¨¡å‹éƒ¨ç½²ã€‚æœ¬æ¬¡æ–¹æ¡ˆä½¿ç”¨çš„æ¨¡å‹ä»¥åŠåˆ†é…çš„èµ„æºä¸ºï¼š</li>
</ul>







<table><thead><tr><th/><th/></tr></thead></table>





































<table><thead><tr><th align="left"><strong>ç±»åˆ«</strong></th><th align="left"><strong>ç¤ºä¾‹å€¼</strong></th></tr></thead><tbody><tr><td align="left"><strong>æ¨¡å‹åç§°</strong></td><td align="left">image_embed</td></tr><tr><td align="left"><strong>æ¨¡å‹ç±»åˆ«</strong></td><td align="left">clip-ViT-B-32</td></tr><tr><td align="left"><strong>æ¨¡å‹ä½œç”¨æè¿°</strong></td><td align="left">å›¾ç‰‡Embedding</td></tr><tr><td align="left"><strong>å•å‰¯æœ¬CPUï¼ˆCoreï¼‰</strong></td><td align="left">7</td></tr><tr><td align="left"><strong>å•å‰¯æœ¬å†…å­˜</strong></td><td align="left">30 GB</td></tr><tr><td align="left"><strong>å•å‰¯æœ¬GPU</strong></td><td align="left">1å¡(96 GB)</td></tr><tr><td align="left"><strong>èµ„æºå‰¯æœ¬æ•°</strong></td><td align="left">1</td></tr></tbody></table>
<p><strong>è¯´æ˜ï¼š</strong>ä¸Šè¿°æ¨¡å‹çš„èµ„æºå‡ä¸ºé»˜è®¤åˆ†é…çš„èµ„æºã€‚</p>
<h2 data-id="heading-4"><strong>æ“ä½œæ­¥éª¤</strong></h2>
<p>1.ä¸‹è½½å›¾ç‰‡æ•°æ®å¹¶å¯¼å…¥è‡³OSSã€‚</p>
<ul>
<li>ä¸‹è½½BDD100K è‡ªåŠ¨é©¾é©¶å›¾åƒæ•°æ®é›†ä¸­çš„æ–‡ä»¶ã€‚</li>
<li>ç™»å½•OSSç®¡ç†æ§åˆ¶å°ï¼Œåˆ›å»ºBucketå¹¶å°†å·²ä¸‹è½½çš„æ–‡ä»¶ä¸Šä¼ è‡³è¯¥Bucketè·¯å¾„ä¸‹ã€‚ä¸Šä¼ æ“ä½œè¯¦æƒ…ï¼Œè¯·å‚è§ç®€å•ä¸Šä¼ ã€‚</li>
</ul>
<p><strong>è¯´æ˜ï¼š</strong>æ–‡ä»¶å¤¹åç§°è¯·ä½¿ç”¨å°å†™ã€‚</p>
<ol start="2">
<li>è´¦å·æˆæƒã€‚</li>
</ol>
<p>a. ç™»å½•RAMæ§åˆ¶å°ï¼Œåˆ›å»ºé˜¿é‡Œäº‘RAMè§’è‰²å¹¶æˆäºˆOSSçš„ç›¸å…³æƒé™ã€‚
æ¨èæˆäºˆAliyunOSSReadOnlyAccessæƒé™ã€‚</p>
<p>b.ä¸ºä¸Šè¿°é˜¿é‡Œäº‘RAMè§’è‰²æ·»åŠ ç™»å½•å’ŒHologresçš„è®¿é—®æƒé™ã€‚</p>
<ul>
<li>é˜¿é‡Œäº‘è´¦å·ï¼ˆä¸»è´¦å·ï¼‰</li>
</ul>
<p>ä¿®æ”¹RAMè§’è‰²çš„ä¿¡ä»»ç­–ç•¥ã€‚é‡ç‚¹éœ€æ›´æ–°å¦‚ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>Action:æ›´æ–°ä¸º sts:AssumeRole.</li>
<li>Service:æ›´æ–°ä¸º hologres.aliyuncs.com</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"Statement"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"Action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sts:AssumeRole"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Effect"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Allow"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Principal"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"RAM"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-string">"acs:ram::1866xxxx:root"</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"Service"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-string">"hologres.aliyuncs.com"</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>RAMç”¨æˆ·ï¼ˆå­è´¦å·ï¼‰</li>
</ul>
<ol>
<li>ä¸ºRAMç”¨æˆ·æˆæƒã€‚</li>
</ol>
<ul>
<li>åœ¨<strong>æƒé™ç®¡ç† &gt; æƒé™ç­–ç•¥</strong>é¡µé¢ï¼Œå•å‡»<strong>åˆ›å»ºæƒé™ç­–ç•¥</strong>ï¼Œå¹¶é€‰æ‹©<strong>è„šæœ¬ç¼–è¾‘</strong>æ¨¡å¼åˆ›å»ºæƒé™ç­–ç•¥ã€‚å…·ä½“æ“ä½œï¼Œè¯·å‚è§åˆ›å»ºè‡ªå®šä¹‰æƒé™ç­–ç•¥</li>
</ul>
<p>Hologreså¯é€šè¿‡è¯¥ç­–ç•¥åˆ¤æ–­å½“å‰RAMç”¨æˆ·æ˜¯å¦å…·å¤‡åˆ›å»ºå¯¹åº”RAMè§’è‰²çš„æƒé™ã€‚æƒé™ç­–ç•¥å†…å®¹å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"Version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Statement"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"Effect"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Allow"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"hologram:GrantAssumeRole"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Resource"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&lt;arnè´¦å·&gt;"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>åœ¨<strong>èº«ä»½ç®¡ç† &gt; ç”¨æˆ·</strong>é¡µé¢ï¼Œå•å‡»ç›®æ ‡RAMç”¨æˆ·<strong>æ“ä½œ</strong>åˆ—ä¸­çš„<strong>æ·»åŠ æƒé™</strong>ï¼Œä¸ºRAMç”¨æˆ·ï¼ˆå­è´¦å·ï¼‰æˆäºˆä¸Šè¿°æ­¥éª¤å·²åˆ›å»ºçš„æƒé™ç­–ç•¥ã€‚å…·ä½“æ“ä½œï¼Œè¯·å‚è§ä¸ºRAMç”¨æˆ·æˆæƒã€‚</li>
</ul>
<ol start="2">
<li>ä¸ºå·²åˆ›å»ºçš„RAMè§’è‰²æˆæƒã€‚</li>
</ol>
<p>ä¿®æ”¹RAMè§’è‰²çš„ä¿¡ä»»ç­–ç•¥ã€‚é‡ç‚¹éœ€æ›´æ–°å¦‚ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>Actionï¼šæ›´æ–°ä¸ºsts:AssumeRoleã€‚</li>
<li>Serviceï¼šæ›´æ–°ä¸ºhologres.aliyuncs.comã€‚</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"Statement"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"Action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sts:AssumeRole"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Effect"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Allow"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"Principal"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"RAM"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-string">"acs:ram::1866xxxx:root"</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"Service"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-string">"hologres.aliyuncs.com"</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"Version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="3">
<li>å¯¹å›¾ç‰‡è¿›è¡ŒEmbeddingã€‚</li>
</ol>
<p>åˆ›å»ºObject Tableå’ŒDynamic Tableè¯»å–å›¾ç‰‡å…ƒæ•°æ®ï¼Œå¹¶å¯¹å›¾ç‰‡åŠ å·¥Embeddingã€‚å› ä¸ºæµç¨‹è¾ƒé•¿ï¼ŒHologresç›´æ¥å°†è¿‡ç¨‹å°è£…æˆé™„å½•ï¼šå­˜å‚¨è¿‡ç¨‹ã€‚è¯¥å­˜å‚¨è¿‡ç¨‹åŒ…æ‹¬çš„èƒ½åŠ›å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€å¼ Object Tableï¼Œç”¨äºè¯»å–å›¾ç‰‡çš„å…ƒæ•°æ®ã€‚</li>
<li>åˆ›å»ºä¸€å¼ å¢é‡åˆ·æ–°çš„Dynamic Tableç»“æœè¡¨ï¼Œç”¨äºå­˜å‚¨åŠ å·¥åçš„æ•°æ®ï¼Œå¹¶è®¾ç½®å‘é‡ç´¢å¼•ã€‚è¯¥Dynamic Tableæœªè®¾ç½®è‡ªåŠ¨åˆ·æ–°ï¼Œéœ€è¦æ‰‹åŠ¨åˆ·æ–°ã€‚</li>
<li>Dynamic Tableçš„åˆ·æ–°è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨ai_embedå¯¹å›¾ç‰‡è¿›è¡ŒEmbeddingã€‚</li>
</ul>
<p>è¯¥å­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">--å­˜å‚¨è¿‡ç¨‹ï¼Œåˆ›å»ºObject Tableå’ŒDynamic Tableï¼Œä½¿ç”¨dtå¯¹å›¾ç‰‡è¿›è¡ŒEmbedding</span>
<span class="hljs-keyword">CALL</span> create_image_table_from_oss(
    oss_path <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">'oss://xxxx/bdd100k/val/images'</span>,
    oss_endpoint <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">'oss-cn-hangzhou-internal.aliyuncs.com'</span>,
    oss_role_arn <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">'acs:ram::1xxxx:role/xxxx'</span>,
    image_table <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">'public.dt_image_bdd100k'</span>,
    embedding_model <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span><span class="hljs-string">'image_embed'</span>
);
</code></pre>
<ol start="4">
<li>åˆ·æ–°ç»“æœè¡¨ã€‚</li>
</ol>
<p>é€šè¿‡ä¸Šè¿°æ­¥éª¤åˆ›å»ºçš„Object Tableå’ŒDynamic Tableéƒ½éœ€è¦æ‰‹åŠ¨åˆ·æ–°ï¼Œæ‰èƒ½å®Œæˆæ•°æ®åŠ å·¥ã€‚è¯¥æ­¥éª¤å·²è¢«å°è£…ä¸ºé™„å½•ï¼šå­˜å‚¨è¿‡ç¨‹ï¼Œè¯¥å­˜å‚¨è¿‡ç¨‹åŒ…æ‹¬çš„èƒ½åŠ›å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆ·æ–°ä¸€æ¬¡Object Tableè·å–å›¾ç‰‡å…ƒæ•°æ®ã€‚</li>
<li>åˆ·æ–°ä¸€æ¬¡Dynamic Tableï¼Œè¿›è¡Œå›¾ç‰‡çš„EmbeddingåŠ å·¥ã€‚</li>
</ul>
<p>è¯¥å­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">--åˆ·æ–°Dynamic Tableï¼Œå°†å›¾ç‰‡Embedding</span>
<span class="hljs-keyword">CALL</span> refresh_image_table(
    image_table <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">'public.dt_image_bdd100k'</span>
);
</code></pre>
<ol start="5">
<li>å›¾ç‰‡æ£€ç´¢ã€‚</li>
</ol>
<p>å›¾ç‰‡æ•°æ®å¤„ç†è¿‡åå¯ä»¥ä½¿ç”¨å‘é‡æ£€ç´¢å’ŒAI Functionè¿›è¡Œæ£€ç´¢ã€‚</p>
<p><strong>ä»¥æ–‡æœå›¾ï¼š</strong></p>
<p>å¦‚æœä½¿ç”¨clip-ViT-B-32æ¨¡å‹è¿›è¡Œä»¥æ–‡æœå›¾ï¼Œé—®é¢˜è¯·ä½¿ç”¨è‹±æ–‡ã€‚å¦‚æœæ˜¯ä¸­æ–‡é—®é¢˜ï¼Œè¯·æ¢æˆLLMæ¨¡å‹ã€‚ä»¥æ–‡æœå›¾çš„ç¤ºä¾‹SQLå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">--ä»¥æ–‡æœå›¾</span>
<span class="hljs-keyword">SELECT</span>
    object_uri,
    approx_cosine_distance (embedding_vector, ai_embed (<span class="hljs-string">'image_embed'</span>, <span class="hljs-string">'a red car in the rain'</span>)) <span class="hljs-keyword">AS</span> score
<span class="hljs-keyword">FROM</span>
    public.dt_image_bdd100k
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span>
    score <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">1</span>;

                            object_uri                         <span class="hljs-operator">|</span>  score   
<span class="hljs-comment">---------------------------------------------------------------+-------</span>
 oss:<span class="hljs-operator">/</span><span class="hljs-comment">/****/</span>bd<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>k<span class="hljs-operator">/</span>val<span class="hljs-operator">/</span>images<span class="hljs-operator">/</span>b836b14a<span class="hljs-operator">-</span>fb13<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>.jpgï½œ <span class="hljs-number">0.322337151</span>
(<span class="hljs-number">5</span> <span class="hljs-keyword">rows</span>)
</code></pre>
<p>åœ¨OSSä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªç»“æœçš„å›¾ç‰‡å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74b4c914d822445ebf39ca0181b51a47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764065957&amp;x-signature=pKp7g4Lu4ubZpCntviH6qdPW6H8%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä»¥å›¾æœå›¾ï¼š</strong></p>
<p>ä»¥å›¾æœå›¾çš„ç¤ºä¾‹SQLå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">--ä»¥å›¾æœå›¾</span>
<span class="hljs-keyword">SELECT</span>
    object_uri,
    approx_cosine_distance (embedding_vector, ai_embed (<span class="hljs-string">'image_embed'</span>, to_file (<span class="hljs-string">'oss://xxxx/val/images/b9b53753-91a5d5f8.jpg'</span>, <span class="hljs-string">'oss-cn-hangzhou-internal.aliyuncs.com'</span>, <span class="hljs-string">'acs:ram::18xxx:role/xxx'</span>))) <span class="hljs-keyword">AS</span> score
<span class="hljs-keyword">FROM</span>
    public.dt_image_bdd100k
<span class="hljs-keyword">WHERE</span>
    object_uri <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-string">'oss://hm-**-hangzhou/bd****k/val/images/b9b53753-91a5****.jpg'</span> <span class="hljs-comment">--æ’é™¤è‡ªèº«</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span>
    score <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">1</span>;

                          object_uri                           <span class="hljs-operator">|</span>  score   
<span class="hljs-comment">---------------------------------------------------------------+------</span>
 oss:<span class="hljs-operator">/</span><span class="hljs-comment">/****/</span>bd<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>k<span class="hljs-operator">/</span>val<span class="hljs-operator">/</span>images<span class="hljs-operator">/</span>c0e9b7c4<span class="hljs-operator">-</span>cd8b<span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>.jpg <span class="hljs-operator">|</span> <span class="hljs-number">0.918008327</span>
</code></pre>
<p>åœ¨OSSä¸­æ‰¾åˆ°å¬å›çš„å›¾ç‰‡ï¼Œå¹¶åšå¯¹æ¯”ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98bb4d9d1b17467990c1a03b84160c69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764065957&amp;x-signature=3ZVmWanJAhS%2B0GlZ%2Bd3H1XZjW%2FY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">é™„å½•ï¼šå­˜å‚¨è¿‡ç¨‹</h2>
<ul>
<li>åˆ›å»ºObject Tableå’ŒDynamic Table </li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- QueryæŸ¥è¯¢ç»“æœé»˜è®¤é™åˆ¶200è¡Œï¼Œå¦‚éœ€æ›´å¤šæ•°æ®è¯·ä¿®æ”¹limitï¼Œæœ€å¤šå±•ç¤º10000è¡Œæˆ–20Mã€‚</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">PROCEDURE</span> create_image_table_from_oss(
    oss_path TEXT,
    oss_endpoint TEXT,
    oss_role_arn TEXT,
    image_table TEXT,
    embedding_model TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
    overwrite <span class="hljs-type">BOOLEAN</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">FALSE</span>
)
<span class="hljs-keyword">AS</span> $$
<span class="hljs-keyword">DECLARE</span>
    image_schema_name TEXT;
    image_table_name TEXT;
    obj_table_name TEXT;
    full_image_table_ident TEXT;
    full_obj_ident TEXT;
    embed_expr TEXT;
    create_sql TEXT;
    embedding_dims <span class="hljs-type">INT</span>;
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">-- 1. æ‹† schema name + table name</span>
    IF <span class="hljs-built_in">position</span>(<span class="hljs-string">'.'</span> <span class="hljs-keyword">in</span> image_table) <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span>
        image_schema_name :<span class="hljs-operator">=</span> split_part(image_table, <span class="hljs-string">'.'</span>, <span class="hljs-number">1</span>);
        image_table_name  :<span class="hljs-operator">=</span> split_part(image_table, <span class="hljs-string">'.'</span>, <span class="hljs-number">2</span>);
    <span class="hljs-keyword">ELSE</span>
        image_schema_name :<span class="hljs-operator">=</span> <span class="hljs-string">'public'</span>;
        image_table_name  :<span class="hljs-operator">=</span> image_table;
    <span class="hljs-keyword">END</span> IF;

    obj_table_name :<span class="hljs-operator">=</span> image_table_name <span class="hljs-operator">||</span> <span class="hljs-string">'_obj_table'</span>;

    full_image_table_ident :<span class="hljs-operator">=</span> format(<span class="hljs-string">'%I.%I'</span>, image_schema_name, image_table_name);
    full_obj_ident    :<span class="hljs-operator">=</span> format(<span class="hljs-string">'%I.%I'</span>, image_schema_name, obj_table_name);
    
    <span class="hljs-comment">-- 2. å¦‚æœéœ€è¦è¦†ç›–ï¼Œå…ˆåˆ è¡¨å’Œç´¢å¼•</span>
    IF overwrite <span class="hljs-keyword">THEN</span>
        <span class="hljs-keyword">DECLARE</span>
            dyn_table_exists <span class="hljs-type">BOOLEAN</span>;
            rec RECORD;
        <span class="hljs-keyword">BEGIN</span>
            <span class="hljs-comment">-- æ£€æŸ¥ dynamic table æ˜¯å¦å­˜åœ¨</span>
            <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">EXISTS</span> (
                <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>
                <span class="hljs-keyword">FROM</span> pg_class c
                <span class="hljs-keyword">JOIN</span> pg_namespace n <span class="hljs-keyword">ON</span> n.oid <span class="hljs-operator">=</span> c.relnamespace
                <span class="hljs-keyword">WHERE</span> c.relname <span class="hljs-operator">=</span> image_table_name
                <span class="hljs-keyword">AND</span> n.nspname <span class="hljs-operator">=</span> image_schema_name
            )
            <span class="hljs-keyword">INTO</span> dyn_table_exists;

            IF dyn_table_exists <span class="hljs-keyword">THEN</span>
                <span class="hljs-comment">-- 2.1 å…³é—­åŠ¨æ€è¡¨è‡ªåŠ¨åˆ·æ–°</span>
                <span class="hljs-comment">-- RAISE NOTICE 'Disabling auto refresh for %', full_image_table_ident;</span>
                <span class="hljs-comment">-- EXECUTE format('ALTER TABLE IF EXISTS %s SET (auto_refresh_enable=false)', full_image_table_ident);</span>

                <span class="hljs-comment">-- 2.2 æŸ¥æ‰¾ RUNNING åˆ·æ–°ä»»åŠ¡å¹¶å–æ¶ˆ</span>
                <span class="hljs-keyword">FOR</span> rec <span class="hljs-keyword">IN</span>
                    <span class="hljs-keyword">EXECUTE</span> format(
                        $f$
                        <span class="hljs-keyword">SELECT</span> query_job_id
                            <span class="hljs-keyword">FROM</span> hologres.hg_dynamic_table_refresh_log(<span class="hljs-operator">%</span>L)
                            <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'RUNNING'</span>;
                        $f$,
                        image_table
                    )
                LOOP
                    RAISE NOTICE <span class="hljs-string">'Found running refresh job: %'</span>, rec.query_job_id;
                    IF hologres.hg_internal_cancel_query_job(rec.query_job_id::<span class="hljs-type">bigint</span>) <span class="hljs-keyword">THEN</span>
                        RAISE NOTICE <span class="hljs-string">'Cancel job % succeeded.'</span>, rec.query_job_id;
                    <span class="hljs-keyword">ELSE</span>
                        RAISE WARNING <span class="hljs-string">'Cancel job % failed.'</span>, rec.query_job_id;
                    <span class="hljs-keyword">END</span> IF;
                <span class="hljs-keyword">END</span> LOOP;

                <span class="hljs-comment">-- 2.3 åˆ é™¤ Dynamic Table</span>
                <span class="hljs-keyword">EXECUTE</span> format(<span class="hljs-string">'DROP TABLE IF EXISTS %s;'</span>, full_image_table_ident);
            <span class="hljs-keyword">ELSE</span>
                RAISE NOTICE <span class="hljs-string">'Dynamic table % does not exist, skip cancel job and drop.'</span>, full_image_table_ident;
            <span class="hljs-keyword">END</span> IF;

            <span class="hljs-comment">-- 2.4 æ— è®ºå¦‚ä½•ï¼ŒObject Table éƒ½è¦åˆ é™¤</span>
            <span class="hljs-keyword">EXECUTE</span> format(<span class="hljs-string">'DROP OBJECT TABLE IF EXISTS %s;'</span>, full_obj_ident);
        <span class="hljs-keyword">END</span>;
    <span class="hljs-keyword">END</span> IF;

    <span class="hljs-comment">-- 3. åˆ›å»º Object Table</span>
    RAISE NOTICE <span class="hljs-string">'Create object table: %'</span>, obj_table_name;
    <span class="hljs-keyword">EXECUTE</span> format(
        $f$
        <span class="hljs-keyword">CREATE</span> OBJECT <span class="hljs-keyword">TABLE</span> <span class="hljs-operator">%</span>s
        <span class="hljs-keyword">WITH</span> (
            path <span class="hljs-operator">=</span> <span class="hljs-operator">%</span>L,
            oss_endpoint <span class="hljs-operator">=</span> <span class="hljs-operator">%</span>L,
            role_arn <span class="hljs-operator">=</span> <span class="hljs-operator">%</span>L
        );
        $f$,
        full_obj_ident,
        oss_path,
        oss_endpoint,
        oss_role_arn
    );

    <span class="hljs-keyword">COMMIT</span>;

    <span class="hljs-comment">-- 4. åˆ·æ–° Object Table</span>
    RAISE NOTICE <span class="hljs-string">'Refresh object table: %'</span>, obj_table_name;
    <span class="hljs-keyword">EXECUTE</span> format(<span class="hljs-string">'REFRESH OBJECT TABLE %s;'</span>, full_obj_ident);

    <span class="hljs-keyword">COMMIT</span>;

    <span class="hljs-comment">-- 5. embedding æ¨¡å‹é€‰æ‹©</span>
    IF embedding_model <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">OR</span> length(<span class="hljs-built_in">trim</span>(embedding_model)) <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span>
        embed_expr :<span class="hljs-operator">=</span> <span class="hljs-string">'ai_embed(file)'</span>;

        <span class="hljs-keyword">EXECUTE</span> <span class="hljs-string">'SELECT array_length(ai_embed(''dummy''), 1)'</span>
        <span class="hljs-keyword">INTO</span> embedding_dims;
    <span class="hljs-keyword">ELSE</span>
        embed_expr :<span class="hljs-operator">=</span> format(<span class="hljs-string">'ai_embed(%L, file)'</span>, embedding_model);

        <span class="hljs-keyword">EXECUTE</span> format(
            <span class="hljs-string">'SELECT array_length(ai_embed(%L, ''dummy''), 1)'</span>,
            embedding_model
        )
        <span class="hljs-keyword">INTO</span> embedding_dims;
    <span class="hljs-keyword">END</span> IF;

    RAISE NOTICE <span class="hljs-string">'embedding dimension is: %'</span>, embedding_dims;

    <span class="hljs-comment">-- 6. åˆ›å»º RAG è¾“å‡ºåŠ¨æ€è¡¨</span>
    RAISE NOTICE <span class="hljs-string">'create dynamic table: %'</span>, image_table_name;
    <span class="hljs-keyword">EXECUTE</span> format(
        $f$
        <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DYNAMIC</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-operator">%</span>s(
            <span class="hljs-keyword">CHECK</span>(array_ndims(embedding_vector) <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> array_length(embedding_vector, <span class="hljs-number">1</span>) <span class="hljs-operator">=</span> <span class="hljs-operator">%</span>s)
        )
        <span class="hljs-keyword">WITH</span> (
            vectors <span class="hljs-operator">=</span> <span class="hljs-string">'{
                "embedding_vector": {
                    "algorithm": "HGraph",
                    "distance_method": "Cosine",
                    "builder_params": {
                    "base_quantization_type": "sq8_uniform",
                    "max_degree": 64,
                    "ef_construction": 400,
                    "precise_quantization_type": "fp32",
                    "use_reorder": true
                    }
                }
            }'</span>,
            auto_refresh_mode <span class="hljs-operator">=</span> <span class="hljs-string">'incremental'</span>,
            freshness <span class="hljs-operator">=</span> <span class="hljs-string">'5 minutes'</span>,
            auto_refresh_enable <span class="hljs-operator">=</span> <span class="hljs-string">'false'</span>
        ) <span class="hljs-keyword">AS</span>
        <span class="hljs-keyword">SELECT</span>
            object_uri,
            etag,
            <span class="hljs-operator">%</span>s <span class="hljs-keyword">AS</span> embedding_vector
        <span class="hljs-keyword">FROM</span> <span class="hljs-operator">%</span>s;
        $f$,
        full_image_table_ident,
        embedding_dims,
        embed_expr,
        obj_table_name
    );

    <span class="hljs-keyword">COMMIT</span>;

    RAISE NOTICE <span class="hljs-string">''</span>;
    RAISE NOTICE <span class="hljs-string">'Create image table success: %'</span>, image_table;
    RAISE NOTICE <span class="hljs-string">'    Vector index is: %.embedding_vector'</span>, image_table;
<span class="hljs-keyword">END</span>;
$$ <span class="hljs-keyword">LANGUAGE</span> plpgsql;
</code></pre>
<ul>
<li>Object Tableå’ŒDynamic Table</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">PROCEDURE</span> refresh_image_table(
    image_table TEXT
)
<span class="hljs-keyword">AS</span> $$
<span class="hljs-keyword">DECLARE</span>
    image_schema_name TEXT;
    image_table_name   TEXT;
    obj_table_name TEXT;
    full_image_table_ident TEXT;
    full_obj_ident    TEXT;
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">-- 1. è§£æ schema å’Œè¡¨å</span>
    IF <span class="hljs-built_in">position</span>(<span class="hljs-string">'.'</span> <span class="hljs-keyword">in</span> image_table) <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span>
        image_schema_name :<span class="hljs-operator">=</span> split_part(image_table, <span class="hljs-string">'.'</span>, <span class="hljs-number">1</span>);
        image_table_name  :<span class="hljs-operator">=</span> split_part(image_table, <span class="hljs-string">'.'</span>, <span class="hljs-number">2</span>);
    <span class="hljs-keyword">ELSE</span>
        image_schema_name :<span class="hljs-operator">=</span> <span class="hljs-string">'public'</span>;
        image_table_name  :<span class="hljs-operator">=</span> image_table;
    <span class="hljs-keyword">END</span> IF;

    obj_table_name :<span class="hljs-operator">=</span> image_table_name <span class="hljs-operator">||</span> <span class="hljs-string">'_obj_table'</span>;

    full_image_table_ident :<span class="hljs-operator">=</span> format(<span class="hljs-string">'%I.%I'</span>, image_schema_name, image_table_name);
    full_obj_ident    :<span class="hljs-operator">=</span> format(<span class="hljs-string">'%I.%I'</span>, image_schema_name, obj_table_name);

    <span class="hljs-comment">-- 2. åˆ·æ–° Object Table</span>
    RAISE NOTICE <span class="hljs-string">'Refreshing Object Table: %'</span>, obj_table_name;
    <span class="hljs-keyword">EXECUTE</span> format(<span class="hljs-string">'REFRESH OBJECT TABLE %s;'</span>, full_obj_ident);

    <span class="hljs-comment">-- 3. åˆ·æ–° Dynamic Table</span>
    RAISE NOTICE <span class="hljs-string">'Refreshing Dynamic Table: %'</span>, image_table_name;
    <span class="hljs-keyword">EXECUTE</span> format(<span class="hljs-string">'REFRESH TABLE %s;'</span>, full_image_table_ident);

    RAISE NOTICE <span class="hljs-string">'Refresh image table complete: %'</span>, image_table;
<span class="hljs-keyword">END</span>;
$$ <span class="hljs-keyword">LANGUAGE</span> plpgsql;
</code></pre>
<ul>
<li>åˆ é™¤å­˜å‚¨è¿‡ç¨‹</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">PROCEDURE</span> drop_image_table(
    image_table TEXT
)
<span class="hljs-keyword">AS</span> $$
<span class="hljs-keyword">DECLARE</span>
    image_schema_name TEXT;
    image_table_name   TEXT;
    obj_table_name TEXT;
    full_image_table_ident TEXT;
    full_obj_ident    TEXT;
    rec RECORD;
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">-- 1. è§£æ schema å’Œè¡¨å</span>
    IF <span class="hljs-built_in">position</span>(<span class="hljs-string">'.'</span> <span class="hljs-keyword">in</span> image_table) <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span>
        image_schema_name :<span class="hljs-operator">=</span> split_part(image_table, <span class="hljs-string">'.'</span>, <span class="hljs-number">1</span>);
        image_table_name   :<span class="hljs-operator">=</span> split_part(image_table, <span class="hljs-string">'.'</span>, <span class="hljs-number">2</span>);
    <span class="hljs-keyword">ELSE</span>
        image_schema_name :<span class="hljs-operator">=</span> <span class="hljs-string">'public'</span>;
        image_table_name   :<span class="hljs-operator">=</span> image_table;
    <span class="hljs-keyword">END</span> IF;

    obj_table_name :<span class="hljs-operator">=</span> image_table_name <span class="hljs-operator">||</span> <span class="hljs-string">'_obj_table'</span>;

    full_image_table_ident :<span class="hljs-operator">=</span> format(<span class="hljs-string">'%I.%I'</span>, image_schema_name, image_table_name);
    full_obj_ident    :<span class="hljs-operator">=</span> format(<span class="hljs-string">'%I.%I'</span>, image_schema_name, obj_table_name);

    <span class="hljs-comment">-- 2. åˆ é™¤è¡¨</span>
    <span class="hljs-comment">-- 2.1 å…³é—­åŠ¨æ€è¡¨è‡ªåŠ¨åˆ·æ–°</span>
    <span class="hljs-comment">-- RAISE NOTICE 'Disabling auto refresh for %', full_image_table_ident;</span>
    <span class="hljs-comment">-- EXECUTE format('ALTER TABLE IF EXISTS %s SET (auto_refresh_enable=false)', full_image_table_ident);</span>

    <span class="hljs-comment">-- 2.2 æŸ¥æ‰¾ RUNNING åˆ·æ–°ä»»åŠ¡å¹¶å–æ¶ˆ</span>
    <span class="hljs-keyword">FOR</span> rec <span class="hljs-keyword">IN</span>
        <span class="hljs-keyword">EXECUTE</span> format(
            $f$
            <span class="hljs-keyword">SELECT</span> query_job_id
                <span class="hljs-keyword">FROM</span> hologres.hg_dynamic_table_refresh_log(<span class="hljs-operator">%</span>L)
                <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'RUNNING'</span>;
            $f$,
            image_table
        )
    LOOP
        RAISE NOTICE <span class="hljs-string">'Found running refresh job: %'</span>, rec.query_job_id;
        IF hologres.hg_internal_cancel_query_job(rec.query_job_id::<span class="hljs-type">bigint</span>) <span class="hljs-keyword">THEN</span>
            RAISE NOTICE <span class="hljs-string">'Cancel job % succeeded.'</span>, rec.query_job_id;
        <span class="hljs-keyword">ELSE</span>
            RAISE WARNING <span class="hljs-string">'Cancel job % failed.'</span>, rec.query_job_id;
        <span class="hljs-keyword">END</span> IF;
    <span class="hljs-keyword">END</span> LOOP;

    <span class="hljs-comment">-- 2.3 åˆ é™¤ Dynamic Table</span>
    RAISE NOTICE <span class="hljs-string">'Dropping Dynamic Table: %'</span>, image_table_name;
    <span class="hljs-keyword">EXECUTE</span> format(<span class="hljs-string">'DROP TABLE IF EXISTS %s;'</span>, full_image_table_ident);

    <span class="hljs-comment">-- 2.4 åˆ é™¤ Object Table</span>
    RAISE NOTICE <span class="hljs-string">'Dropping Object Table: %'</span>, obj_table_name;
    <span class="hljs-keyword">EXECUTE</span> format(<span class="hljs-string">'DROP OBJECT TABLE IF EXISTS %s;'</span>, full_obj_ident);

    RAISE NOTICE <span class="hljs-string">'Drop image table complete: %'</span>, image_table;
<span class="hljs-keyword">END</span>;
$$ <span class="hljs-keyword">LANGUAGE</span> plpgsql;
</code></pre>
<p>å¦‚æœæƒ³ä½“éªŒæ›´å¤šæ“ä½œæµç¨‹ï¼Œæ¬¢è¿åˆ°é˜¿é‡Œäº‘å®˜ç½‘é¢†å–Hologreså…è´¹è¯•ç”¨ï¼Œå¼€é€šHologres4.0ï¼Œå¹¶æŒ‰ç…§æ“ä½œæ–‡æ¡£å®è·µã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fhologres%2Fuser-guide%2Fvisual-data-analysis-for-autonomous-driving" target="_blank" title="https://help.aliyun.com/zh/hologres/user-guide/visual-data-analysis-for-autonomous-driving" ref="nofollow noopener noreferrer">help.aliyun.com/zh/hologresâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Numpyã€Panads]]></title>    <link>https://juejin.cn/post/7574204970775805979</link>    <guid>https://juejin.cn/post/7574204970775805979</guid>    <pubDate>2025-11-19T07:24:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574204970775805979" data-draft-id="7568841625603719219" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Numpyã€Panads"/> <meta itemprop="keywords" content="pandas,NumPy,Python"/> <meta itemprop="datePublished" content="2025-11-19T07:24:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ªé‡Œçš„ç ´æ°´ç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/4394111849466414"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Numpyã€Panads
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4394111849466414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ªé‡Œçš„ç ´æ°´ç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:24:41.000Z" title="Wed Nov 19 2025 07:24:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h3 data-id="heading-0">Numpy</h3>
<p>ç”¨æ¥å­˜å‚¨å’Œå¤„ç†å¤§å‹çŸ©é˜µ</p>
<p>NumPyé‡è¦åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ol>
<li>é«˜æ€§èƒ½ç§‘å­¦è®¡ç®—å’Œæ•°æ®åˆ†æçš„åŸºç¡€åŒ…</li>
<li>ndarrayï¼Œå¤šç»´æ•°ç»„ï¼Œå…·æœ‰çŸ¢é‡è¿ç®—èƒ½åŠ›ï¼Œå¿«é€Ÿã€èŠ‚çœç©ºé—´</li>
<li>çŸ©é˜µè¿ç®—ï¼Œæ— éœ€å¾ªç¯ï¼Œå¯å®Œæˆç±»ä¼¼Matlabä¸­çš„çŸ¢é‡è¿ç®—</li>
<li>ç”¨äºè¯»å†™ç£ç›˜æ•°æ®çš„å·¥å…·ä»¥åŠç”¨äºæ“ä½œå†…å­˜æ˜ å°„æ–‡ä»¶çš„å·¥å…·</li>
</ol>
<h4 data-id="heading-1">Numpy å±æ€§</h4>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># ç”Ÿæˆ15ä¸ªæ•°æ®</span>
arr = np.arange(<span class="hljs-number">15</span>)
<span class="hljs-built_in">print</span>(arr) <span class="hljs-comment"># [ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14]</span>
</code></pre>
<blockquote>
<p>è½¬æ¢æˆ 3 è¡Œ 5 åˆ—</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># è½¬æ¢</span>
reshape = arr.reshape(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(reshape)
<span class="hljs-comment"># [[ 0  1  2  3  4]</span>
<span class="hljs-comment"># [ 5  6  7  8  9]</span>
<span class="hljs-comment"># [10 11 12 13 14]]</span>


<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ•°ç»„çš„ç»´åº¦(è½´)ï¼š<span class="hljs-subst">{reshape.ndim}</span>'</span>) <span class="hljs-comment"># å‡ ç»´æ•°ç»„ã€‚è½´å°±æ˜¯å‡ </span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ•°ç»„çš„å½¢çŠ¶ï¼š<span class="hljs-subst">{reshape.shape}</span>'</span>) <span class="hljs-comment"># å‡ è¡Œå‡ åˆ— (è¡Œæ•°ï¼Œåˆ—æ•°)</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ•°ç»„çš„å…ƒç´ ç±»å‹ï¼š<span class="hljs-subst">{reshape.dtype}</span>'</span>)<span class="hljs-comment"># æ•´å‹</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰€å å­—èŠ‚æ•°ï¼š<span class="hljs-subst">{reshape.itemsize}</span>'</span>) <span class="hljs-comment">#int32 4å­—èŠ‚ int64 8å­—èŠ‚</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼š<span class="hljs-subst">{reshape.size}</span>'</span>) <span class="hljs-comment"># é•¿åº¦</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ•°ç»„çš„ç±»å‹ï¼š<span class="hljs-subst">{<span class="hljs-built_in">type</span>(reshape)}</span>'</span>) <span class="hljs-comment"># &lt;class 'numpy.ndarray'&gt;</span>

<span class="hljs-comment"># æ•°ç»„çš„ç»´åº¦(è½´)ï¼š2</span>
<span class="hljs-comment"># æ•°ç»„çš„å½¢çŠ¶ï¼š(3, 5)</span>
<span class="hljs-comment"># æ•°ç»„çš„å…ƒç´ ç±»å‹ï¼šint64</span>
<span class="hljs-comment"># æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰€å å­—èŠ‚æ•°ï¼š8</span>
<span class="hljs-comment"># æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼š15</span>
<span class="hljs-comment"># æ•°ç»„çš„ç±»å‹ï¼š&lt;class 'numpy.ndarray'&gt;</span>
</code></pre>
<h4 data-id="heading-2">åˆ›å»º ndarray</h4>
<p>NumPyæ•°ç»„æ˜¯ä¸€ä¸ªå¤šç»´çš„æ•°ç»„å¯¹è±¡ï¼ˆçŸ©é˜µï¼‰ï¼Œç§°ä¸ºndarrayï¼Œå…·æœ‰çŸ¢é‡ç®—æœ¯è¿ç®—èƒ½åŠ›å’Œå¤æ‚çš„å¹¿æ’­èƒ½åŠ›ï¼Œå¹¶å…·æœ‰æ‰§è¡Œé€Ÿåº¦å¿«å’ŒèŠ‚çœç©ºé—´çš„ç‰¹ç‚¹ã€‚</p>
<p>æ³¨æ„ï¼š<strong>ndarrayçš„ä¸‹æ ‡ä»0å¼€å§‹ï¼Œä¸”æ•°ç»„é‡Œçš„æ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯ç›¸åŒç±»å‹</strong>ã€‚</p>
<h5 data-id="heading-3">array å‡½æ•°</h5>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># å°†æ™®é€šæ•°ç»„è½¬æ¢æˆ numpy</span>
arr = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>])
</code></pre>
<blockquote>
<p>æŒ‡å®šå­—èŠ‚ç±»å‹ï¼Œæ³¨æ„å¦‚æœæ˜¯å°æ•°ï¼Œç”¨çš„æ˜¯æ•´å‹ï¼Œä¼šç›´æ¥ç æ‰ï¼Œå¹¶ä¸æ˜¯å››èˆäº”å…¥</p>
</blockquote>
<pre><code class="hljs language-py" lang="py">array = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>], dtype=np.int32)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ•°ç»„çš„å…ƒç´ ç±»å‹ï¼š<span class="hljs-subst">{array.dtype}</span>'</span>)  <span class="hljs-comment"># æ•´å‹</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰€å å­—èŠ‚æ•°ï¼š<span class="hljs-subst">{array.itemsize}</span>'</span>)  <span class="hljs-comment">#int32 4å­—èŠ‚ int64 8å­—èŠ‚</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ•°ç»„çš„ç±»å‹ï¼š<span class="hljs-subst">{<span class="hljs-built_in">type</span>(array)}</span>'</span>)  <span class="hljs-comment"># &lt;class 'numpy.ndarray'&gt;</span>
</code></pre>
<h5 data-id="heading-4">arange å‡½æ•°</h5>
<p>åŒ…å·¦ä¸åŒ…å³</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œä»2åˆ°10ï¼Œæ­¥é•¿ä¸º2</span>
array = np.arange(<span class="hljs-number">2</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>)
<span class="hljs-built_in">print</span>(array) <span class="hljs-comment"># [2 4 6 8]</span>
</code></pre>
<h5 data-id="heading-5">random éšæœºæ•°</h5>
<blockquote>
<p>random.rand</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># éšæœºæ•°, 0-1, 3 è¡Œ 4 åˆ—</span>
array = np.random.rand(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
<span class="hljs-built_in">print</span>(array)

<span class="hljs-comment"># [[0.31049238 0.75832324 0.37506145 0.32252616]</span>
<span class="hljs-comment">#  [0.38807463 0.93432297 0.17881305 0.88305402]</span>
<span class="hljs-comment">#  [0.41024363 0.28271881 0.86731565 0.53035414]]</span>
</code></pre>
<blockquote>
<p>random.randint æ•´æ•°</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># éšæœºæ•°, -1-4, 3 è¡Œ 4 åˆ—</span>
array = np.random.randint(-<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, size=(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
<span class="hljs-built_in">print</span>(array)

<span class="hljs-comment"># [[ 3  2  1  1]</span>
<span class="hljs-comment">#  [ 3  4  3 -1]</span>
<span class="hljs-comment">#  [ 1  0  3  0]]</span>
</code></pre>
<blockquote>
<p>random.uniform åŒ…å«å°æ•°</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># éšæœºæ•°, -1-4, 3 è¡Œ 4 åˆ—ï¼ŒåŒ…å«å°æ•°</span>
array = np.random.uniform(-<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, size=(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
<span class="hljs-built_in">print</span>(array)

<span class="hljs-comment"># [[ 4.67745816  4.20730726  2.1148062   1.7430438 ]</span>
<span class="hljs-comment">#  [ 4.13875101  3.95117814 -0.91604952  0.31978374]</span>
<span class="hljs-comment">#  [ 2.18948176  2.99218651  4.02325524  2.29999013]]</span>
</code></pre>
<blockquote>
<p>randn</p>
</blockquote>
<p>ç”Ÿæˆæ­£æ€åˆ†å¸ƒï¼Œçš„æµ®ç‚¹æ•°ï¼Œ3è¡Œ5åˆ—ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
f = np.random.randn(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(f)
</code></pre>
<h5 data-id="heading-6">åˆ›å»ºç­‰æ¯”æ•°åˆ—</h5>
<p>logspace(èµ·å§‹æ¬¡å¹‚ï¼Œç»“æŸæ¬¡å¹‚ï¼Œæ•°å­—ä¸ªæ•°, base=åŸºæ•°) -&gt; ç”Ÿæˆç­‰æ¯”æ•°åˆ—ï¼Œé»˜è®¤åŸºæ•°æ˜¯10ï¼Œå³ï¼š10çš„èµ·å§‹æ¬¡å¹‚ ~ 10çš„ç»“æŸæ¬¡å¹‚ï¼ŒåŒ…å·¦åŒ…å³</p>
<p>éœ€æ±‚ï¼šåˆ›å»ºé•¿åº¦ä¸º 5 çš„ç­‰æ¯”æ•°åˆ—ï¼Œèµ·å§‹æ¬¡å¹‚ä¸º1ï¼Œç»“æŸæ¬¡å¹‚ä¸º3</p>
<p>è¿‡ç¨‹ï¼šä¼šè‡ªåŠ¨è®¡ç®—ï¼Œæ¯ç”Ÿæˆä¸€ä¸ªæ•°å­—ï¼ŒåŠ å¤šå°‘å¹‚åˆé€‚ã€‚ä¸­é—´ä¼šå˜ï¼Œå¼€å§‹å’Œç»“å°¾ä¸ä¼šå˜ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
n = np.logspace(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, base=<span class="hljs-number">10</span>)
<span class="hljs-built_in">print</span>(n)
<span class="hljs-comment"># [  10.           31.6227766   100.          316.22776602 1000.        ]</span>
</code></pre>
<h5 data-id="heading-7">åˆ›å»ºç­‰å·®æ•°åˆ—</h5>
<p>np.linspace(èµ·å§‹å€¼ï¼Œç»“æŸå€¼ï¼Œå…ƒç´ ä¸ªæ•°, endpoint=True)</p>
<p>ç”ŸæˆæŒ‡å®šèŒƒå›´å†…çš„ç­‰å·®æ•°åˆ—ï¼Œé»˜è®¤åŒ…å·¦åŒ…å³ã€‚</p>
<ul>
<li>endpointï¼šè®¾ç½®ä¸ºfalseï¼Œå¯ä»¥ä¸åŒ…å³</li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªç­‰å·®æ•°åˆ—ï¼Œä»1å¼€å§‹ï¼Œåˆ°10ç»“æŸï¼Œå…±10ä¸ªæ•°ï¼ŒåŒ…å³</span>
n = np.linspace(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>, endpoint=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(n)
<span class="hljs-comment"># [ 1.  2.  3.  4.  5.  6.  7.  8.  9. 10.]</span>
</code></pre>
<h4 data-id="heading-8">æ•°æ®ç±»å‹è½¬æ¢</h4>
<h5 data-id="heading-9">1. æŠŠå…ƒç´ ç±»å‹ä¸º np.float64 -&gt; np.int32</h5>
<ol>
<li>zeros åˆ›å»ºç”¨ 0 å¡«å……çš„æ•°ç»„</li>
<li>astype ç”¨äºå°†è°ƒç”¨è€…è½¬æ¢æˆæŒ‡å®šç±»å‹ï¼Œè¿”å›</li>
</ol>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># ç”Ÿæˆ 3è¡Œ4åˆ—ç”¨0å¡«å……çš„æ•°ç»„ï¼Œç±»å‹æ˜¯float</span>
zeros = np.zeros((<span class="hljs-number">3</span>, <span class="hljs-number">4</span>), dtype=np.float64)
<span class="hljs-built_in">print</span>(zeros)
<span class="hljs-comment"># [[0. 0. 0. 0.]</span>
<span class="hljs-comment">#  [0. 0. 0. 0.]</span>
<span class="hljs-comment">#  [0. 0. 0. 0.]]</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># å°†zerosæ•°ç»„è½¬æ¢æˆæ•´å‹</span>
astype = zeros.astype(np.int32)
<span class="hljs-built_in">print</span>(astype)
<span class="hljs-comment"># [[0 0 0 0]</span>
<span class="hljs-comment">#  [0 0 0 0]</span>
<span class="hljs-comment">#  [0 0 0 0]]</span>
</code></pre>
<h4 data-id="heading-10">Numpy å†…ç½®å‡½æ•°</h4>
<pre><code class="hljs language-py" lang="py">f = [[-<span class="hljs-number">0.30398695</span>  <span class="hljs-number">0.39242509</span>  <span class="hljs-number">0.83707249</span> -<span class="hljs-number">0.5360649</span> ]
 [-<span class="hljs-number">0.10631079</span> -<span class="hljs-number">0.69037792</span> -<span class="hljs-number">0.47947986</span> -<span class="hljs-number">1.06188956</span>]
 [-<span class="hljs-number">0.45553133</span> -<span class="hljs-number">0.49964343</span>  <span class="hljs-number">1.3645323</span>   <span class="hljs-number">0.26271202</span>]]
</code></pre>
<p>æ ¹æ®ä¸Šé¢çš„ f è¿›è¡Œå‡½æ•°è¿ç®—ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># å¤©èŠ±æ¿æ•°ï¼Œå‘ä¸Šå–æ•´</span>
<span class="hljs-built_in">print</span>(np.ceil(f))
<span class="hljs-comment"># [[-0.  1.  1. -0.]</span>
<span class="hljs-comment">#  [-0. -0. -0. -1.]</span>
<span class="hljs-comment">#  [-0. -0.  2.  1.]]</span>

<span class="hljs-comment"># åœ°æ¿æ•°ï¼Œå‘ä¸‹å–æ•´</span>
<span class="hljs-built_in">print</span>(np.floor(f))
<span class="hljs-comment"># [[-1.  0.  0. -1.]</span>
<span class="hljs-comment">#  [-1. -1. -1. -2.]</span>
<span class="hljs-comment">#  [-1. -1.  1.  0.]]</span>

<span class="hljs-comment"># å››èˆäº”å…¥</span>
<span class="hljs-built_in">print</span>(np.rint(f))
<span class="hljs-comment"># [[-0.  0.  1. -1.]</span>
<span class="hljs-comment">#  [-0. -1. -0. -1.]</span>
<span class="hljs-comment">#  [-0. -0.  1.  0.]]</span>

<span class="hljs-comment"># åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span>
<span class="hljs-built_in">print</span>(np.isnan(f))
<span class="hljs-comment"># [[False False False False]</span>
<span class="hljs-comment">#  [False False False False]</span>
<span class="hljs-comment">#  [False False False False]]</span>

<span class="hljs-comment"># çŸ©é˜µä¹˜æ³•</span>
<span class="hljs-comment"># çŸ©é˜µä¹˜æ³•çš„æ„æ€æ˜¯ï¼Œnp.multiply() ä¼šå¯¹æ•°ç»„ x å’Œ y çš„æ¯ä¸ªå¯¹åº”ä½ç½®çš„å…ƒç´ æ‰§è¡Œä¹˜æ³•è¿ç®—ã€‚</span>
<span class="hljs-built_in">print</span>(np.multiply(f, f))
<span class="hljs-comment"># [[0.09240807 0.15399745 0.70069035 0.28736557]</span>
<span class="hljs-comment">#  [0.01130198 0.47662167 0.22990094 1.12760944]</span>
<span class="hljs-comment">#  [0.20750879 0.24964356 1.8619484  0.0690176 ]]</span>

<span class="hljs-comment"># çŸ©é˜µé™¤æ³•</span>
<span class="hljs-comment"># æ„æ€æ˜¯ï¼Œä¼šå¯¹æ•°ç»„ x å’Œ y çš„æ¯ä¸ªå¯¹åº”ä½ç½®çš„å…ƒç´ æ‰§è¡Œé™¤æ³•è¿ç®—ã€‚</span>
<span class="hljs-built_in">print</span>(np.divide(f, f))
<span class="hljs-comment"># [[1. 1. 1. 1.]</span>
<span class="hljs-comment">#  [1. 1. 1. 1.]</span>
<span class="hljs-comment">#  [1. 1. 1. 1.]]</span>

<span class="hljs-comment"># æ¡ä»¶è¿ç®—</span>
<span class="hljs-built_in">print</span>(np.where(f &gt; <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>))
<span class="hljs-comment"># [[0 1 1 0]</span>
<span class="hljs-comment">#  [0 0 0 0]</span>
<span class="hljs-comment">#  [0 0 1 1]]</span>
</code></pre>
<h4 data-id="heading-11">ç»Ÿè®¡å‡½æ•°</h4>
<p>æ•°æ®å±•ç¤º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3eb4486427b4e4994a48d1add0d7c75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=cTVd%2BGTqUrlj7WZWGlWEwPQMZRY%3D" alt="image.png" loading="lazy"/></p>
<p>0 æ˜¯åˆ—ï¼Œ1æ˜¯è¡Œ</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># åˆ›å»º3è¡Œ4åˆ—æ•°æ®</span>
f = np.arange(<span class="hljs-number">12</span>).reshape(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)

<span class="hljs-comment"># æ±‚æ‰€æœ‰çš„å’Œ</span>
<span class="hljs-built_in">print</span>(f.<span class="hljs-built_in">sum</span>()) <span class="hljs-comment"># 66</span>
<span class="hljs-comment"># æ±‚æ¯åˆ—çš„å’Œ</span>
<span class="hljs-built_in">print</span>(f.<span class="hljs-built_in">sum</span>(axis=<span class="hljs-number">0</span>)) <span class="hljs-comment"># [12 15 18 21]</span>
<span class="hljs-comment"># æ±‚æ¯è¡Œçš„å’Œ</span>
<span class="hljs-built_in">print</span>(f.<span class="hljs-built_in">sum</span>(axis=<span class="hljs-number">1</span>)) <span class="hljs-comment"># [ 6 22 38]</span>

<span class="hljs-comment"># æ±‚ç´¯åŠ å’Œï¼Œä¼šæŠŠæ•°ç»„è½¬æˆä¸€ç»´æ•°ç»„ï¼Œè¿›è¡Œç´¯åŠ </span>
<span class="hljs-built_in">print</span>(f.cumsum()) <span class="hljs-comment"># [ 0  1  3  6 10 15 21 28 36 45 55 66]</span>
<span class="hljs-comment"># æŒ‰åˆ—ç»Ÿè®¡ï¼Œç¬¬ä¸€åˆ—ï¼Œ0ï¼Œ4ï¼Œ8ï¼Œç»“æœå°±æ˜¯ï¼Œ0+0ï¼Œ0+4ï¼Œ0+4+8</span>
<span class="hljs-built_in">print</span>(f.cumsum(axis=<span class="hljs-number">0</span>))
<span class="hljs-comment"># [[ 0  1  2  3]</span>
<span class="hljs-comment">#  [ 4  6  8 10]</span>
<span class="hljs-comment">#  [12 15 18 21]]</span>
<span class="hljs-comment"># æŒ‰è¡Œç»Ÿè®¡</span>
<span class="hljs-built_in">print</span>(f.cumsum(axis=<span class="hljs-number">1</span>))
<span class="hljs-comment"># [[ 0  1  3  6]</span>
<span class="hljs-comment">#  [ 4  9 15 22]</span>
<span class="hljs-comment">#  [ 8 17 27 38]]</span>
</code></pre>
<h4 data-id="heading-12">å»é‡å’Œæ’åº</h4>
<blockquote>
<p>å»é‡</p>
</blockquote>
<p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª3è¡Œ3åˆ—çš„æ•°ç»„ï¼Œå¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šé‡å¤çš„ã€‚é€šè¿‡uniqueæ‰§è¡Œäº†å»é‡ï¼Œå‘ç°å˜æˆä¸€ç»´æ•°ç»„äº†ï¼Œå¹¶ä¸”ä¸ä¼šå½±å“arrçš„éƒ¨åˆ†ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
arr = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]])
<span class="hljs-comment"># [[1 2 1]</span>
<span class="hljs-comment">#  [2 3 4]</span>
<span class="hljs-comment">#  [3 4 5]]</span>
<span class="hljs-comment"># æ‰§è¡Œå»é‡</span>
<span class="hljs-built_in">print</span>(np.unique(arr)) <span class="hljs-comment"># [1 2 3 4 5]</span>
</code></pre>
<blockquote>
<p>æ’åº</p>
</blockquote>
<p>ä¸ä¼šå½±å“åŸæ•°ç»„ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
arr = np.array([<span class="hljs-number">33</span>, <span class="hljs-number">11</span>, <span class="hljs-number">22</span>, <span class="hljs-number">66</span>, <span class="hljs-number">55</span>])
<span class="hljs-built_in">print</span>(arr) <span class="hljs-comment"># [33 11 22 66 55]</span>
<span class="hljs-built_in">print</span>(np.sort(arr)) <span class="hljs-comment"># [11 22 33 55 66]</span>
</code></pre>
<p>å½±å“åŸæ•°ç»„</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
arr = np.array([<span class="hljs-number">33</span>, <span class="hljs-number">11</span>, <span class="hljs-number">22</span>, <span class="hljs-number">66</span>, <span class="hljs-number">55</span>])
arr.sort()
<span class="hljs-built_in">print</span>(arr) <span class="hljs-comment"># [11 22 33 55 66]</span>
</code></pre>
<h3 data-id="heading-13">çŸ©é˜µè¿ç®—</h3>
<h4 data-id="heading-14">å¤šç»´æ•°ç»„è¿ç®—</h4>
<blockquote>
<p>ç›¸åŠ ï¼Œç›¸å‡ï¼Œç›¸ä¹˜ï¼Œç›¸é™¤</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°æ¯ä¸€åˆ—ç›¸åŠ äº†ï¼Œå¿…é¡»æ˜¯å…ƒç´ ä¸ªæ•°ä¸€ä¸€å¯¹åº”ï¼Œå¦‚æœAçš„æ•°ç»„æ˜¯6ä¸ªï¼ŒBçš„æ•°ç»„å¿…é¡»æ˜¯6ä¸ªï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œä¼šæŠ¥é”™ã€‚å¤šç»´ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
arr = np.array([<span class="hljs-number">33</span>, <span class="hljs-number">11</span>, <span class="hljs-number">22</span>, <span class="hljs-number">66</span>, <span class="hljs-number">55</span>])
<span class="hljs-built_in">print</span>(arr)<span class="hljs-comment"># [33 11 22 66 55]</span>
a = np.arange(<span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(a) <span class="hljs-comment"># [0 1 2 3 4]</span>

<span class="hljs-built_in">print</span>(arr + a) <span class="hljs-comment"># [33 12 24 69 59]</span>
</code></pre>
<h4 data-id="heading-15">çŸ©é˜µä¹˜æ³•ï¼ŒçŸ©é˜µAçš„è¡Œæ•° = çŸ©é˜µBçš„åˆ—æ•°</h4>
<p>å°† A çš„ 1,2,3 è¿™ä¸€è¡Œï¼Œå»å’Œ B çš„ 9,6,5 è¿™ä¸€åˆ—ï¼Œå»é€ä¸ªå…ƒç´ ç›¸ä¹˜ï¼Œç„¶åå†é€ä¸ªå…ƒç´ ç›¸åŠ ï¼Œç­‰äº C çš„ç¬¬ä¸€ä¸ªæ•°å­—</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eda21201be0e442784d9a2a48f24eab0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=gJ%2BoEB%2BpgNOPVMavChOmZIinBtc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb1ab56df747400788dc3fce28229a6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=t1VDGlJiEXAxC9B8uno9A9g9uVY%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>å…ƒç´ ä¸ªæ•°ä¸ä¸€è‡´ä¹Ÿä¼šæŠ¥é”™ã€‚</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
arr = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])
<span class="hljs-built_in">print</span>(arr)
<span class="hljs-comment"># [[1 2 3]</span>
<span class="hljs-comment">#  [4 5 6]]</span>
a = np.array([[<span class="hljs-number">9</span>, <span class="hljs-number">8</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">2</span>]])
<span class="hljs-built_in">print</span>(a)
<span class="hljs-comment"># [[9 8]</span>
<span class="hljs-comment">#  [6 5]</span>
<span class="hljs-comment">#  [3 2]]</span>
<span class="hljs-built_in">print</span>(arr.dot(a))
<span class="hljs-built_in">print</span>(np.dot(arr, a)) <span class="hljs-comment"># ç»“æœå’Œä¸Šé¢ä¸€æ ·</span>
<span class="hljs-comment"># [[30 24]</span>
<span class="hljs-comment">#  [84 69]]</span>
</code></pre>
<h2 data-id="heading-16">Pandas</h2>
<p>Pandas æ˜¯ Python çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…</p>
<p>Pandasåœ¨æ•°æ®å¤„ç†ä¸Šå…·æœ‰ç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>åº•å±‚æ˜¯åŸºäºNumpyæ„å»ºçš„ï¼Œæ‰€ä»¥è¿è¡Œé€Ÿåº¦ç‰¹åˆ«çš„å¿«</li>
<li>æœ‰ä¸“é—¨çš„å¤„ç†ç¼ºå¤±æ•°æ®çš„API</li>
<li>å¼ºå¤§è€Œçµæ´»çš„åˆ†ç»„ã€èšåˆã€è½¬æ¢åŠŸèƒ½</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/515c7ed9af004b9d95b8894a3bf12bb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=JN0Z8At4CdaeEdIPcuAG1zUIB5o%3D" alt="image.png" loading="lazy"/></p>
<p>é€‚ç”¨åœºæ™¯:</p>
<ul>
<li>æ•°æ®é‡å¤§åˆ°Excelä¸¥é‡å¡é¡¿ï¼Œä¸”åˆéƒ½æ˜¯å•æœºæ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨Pandas</li>
<li>Pandasç”¨äºå¤„ç†å•æœºæ•°æ®(å°æ•°æ®é›†(ç›¸å¯¹äºå¤§æ•°æ®æ¥è¯´))</li>
<li>åœ¨å¤§æ•°æ®ETLæ•°æ®ä»“åº“ä¸­ï¼Œå¯¹æ•°æ®è¿›è¡Œæ¸…æ´—åŠå¤„ç†çš„ç¯èŠ‚ä½¿ç”¨Pandas</li>
</ul>
<p>ä¸èƒ½å¤„ç† GB ä»¥ä¸Šçš„æ•°æ®</p>
<h3 data-id="heading-17">è¯»å– CSV æ–‡ä»¶</h3>
<p><strong>é…ç½®ä¸€äº›å‚æ•°</strong></p>
<blockquote>
<p>è®¾ç½®æ˜¾ç¤ºçš„æœ€å¤§è¡Œæ•°å’Œåˆ—æ•°ä¸ºNone</p>
<p>pd.set_option('display.max_rows', None) pd.set_option('display.max_columns', None)</p>
</blockquote>
<blockquote>
<p>æ¢å¤æ˜¾ç¤ºçš„æœ€å¤§è¡Œæ•°åˆ°é»˜è®¤å€¼</p>
<p>pd.reset_option('display.max_rows') # æ¢å¤æ˜¾ç¤ºçš„æœ€å¤§åˆ—æ•°åˆ°é»˜è®¤å€¼ pd.reset_option('display.max_columns')</p>
</blockquote>
<blockquote>
<p>æ¢å¤æ‰€æœ‰é€‰é¡¹åˆ°é»˜è®¤å€¼ pd.reset_option('all')</p>
</blockquote>
<p><strong>å¼€å§‹</strong></p>
<p>é¦–å…ˆè¦ç¡®ä¿å·¥ä½œè·¯å¾„ï¼Œå¯ä»¥é€šè¿‡ <code>os.getcwd()</code> è·å–å·¥ä½œç›®å½•ï¼Œä½¿ç”¨ <code>os.chdir(r'E:\')</code> ä¿®æ”¹è·¯å¾„ã€‚<strong>å› ä¸ºæ¯æ¬¡éƒ½ä¼šé»˜è®¤åˆ°ç”¨æˆ·è·¯å¾„ä¸‹</strong>ã€‚</p>
<p>å¦‚æœç¼–ç æ˜¯ä¸æ­£ç¡®çš„ï¼Œä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œé»˜è®¤ä¼šæ‰“å°æ‰€æœ‰ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># å¯¼å…¥</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-comment"># åŠ è½½è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œå¹¶æŒ‡å®šç¼–ç </span>
csv = pd.read_csv(<span class="hljs-string">'./1960-2019å…¨çƒGDPæ•°æ®.csv'</span>, encoding=<span class="hljs-string">'gbk'</span>)
<span class="hljs-comment"># print(csv)</span>

head = csv.head() <span class="hljs-comment"># æŸ¥çœ‹å‰ 5 è¡Œ</span>
head = csv.head(<span class="hljs-number">10</span>) <span class="hljs-comment"># æŸ¥çœ‹å‰ 10 è¡Œ</span>
</code></pre>
<h3 data-id="heading-18">æ›²çº¿ç”Ÿæˆ / æ•°æ®æ£€ç´¢</h3>
<p>éœ€æ±‚ï¼šæ£€ç´¢å‡ºä¸­å›½ï¼ŒæŒ‰ç…§å¹´ä»½æŸ¥çœ‹(å¹¶ä¸”å°†å¹´ä»½è®¾ç½®ä¸ºè¡Œ)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a77584cd995452eb2e6ed51012e23a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=eoLKknlP5u2aqJjyPu5hPvm6RjU%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æ³¨æ„ Pandas ç»˜åˆ¶å›¾éœ€è¦çš„æ˜¯ <strong>matplotlib</strong>ï¼Œpip install matplotlib</p>
</blockquote>
<p>åœ¨è®¾ç½®ç´¢å¼•çš„æ—¶å€™ï¼Œinplace è¡¨ç¤ºçš„æ˜¯å¦åœ¨åŸæ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œé»˜è®¤false</p>
<p>GDP æ˜¯è¡¨ä¸­çš„å­—æ®µï¼Œè¡¨ç¤ºç»˜åˆ¶é‚£ä¸€åˆ—ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
csv = pd.read_csv(<span class="hljs-string">'./1960-2019å…¨çƒGDPæ•°æ®.csv'</span>, encoding=<span class="hljs-string">'gbk'</span>)
<span class="hljs-comment"># è·å–ä¸­å›½æ•°æ®</span>
s = csv[csv.country == <span class="hljs-string">'ä¸­å›½'</span>]
<span class="hljs-comment"># è®¾ç½®è¡Œåˆ—</span>
s.set_index(<span class="hljs-string">'year'</span>, inplace=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># ç»˜åˆ¶ GDP æŠ˜çº¿å›¾</span>
s.GDP.plot()
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7de981ba978846ee9e2dbb36d2c649e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=KXPLfpMn3tb4%2FOTZIokNsvLSyuU%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å‰é¢æ˜¯ä¸€ä¸ªå›¾ä¸€ä¸ªæŠ˜ç°ï¼Œå¦‚æœæ˜¯å¤šä¸ªå‘¢</strong></p>
<p>æ³¨æ„ï¼šåªèƒ½é€šè¿‡ <code>s.GDP.plot()</code> è¿™ç§æ–¹å¼å»ç»˜åˆ¶ï¼Œå½“å¤šä¸ªå­—æ®µä¸€æ ·æ—¶ï¼Œè‡ªåŠ¨åˆå¹¶</p>
<p>æœ‰ä¸ªå‘ï¼š<code>inplace=True</code> è¡¨ç¤º <strong>åŸåœ°ä¿®æ”¹ DataFrame</strong>ï¼Œè¿™æ ·å°±ä¸èƒ½é“¾å¼è°ƒç”¨äº†ã€‚</p>
<p>é‚£å¦‚æœæƒ³ä¿®æ”¹é¢œè‰²å‘¢ï¼Œå’ŒåŠ ä¸Šå›¾ä¾‹å‘¢ã€‚æ³¨æ„ï¼Œå›¾ä¾‹çš„åç§°é»˜è®¤æ˜¯è¡Œåã€‚æ¯”å¦‚GDPå°±æ˜¯GDPï¼Œé€šè¿‡ color å’Œ legendï¼Œé€šè¿‡ label å±æ€§å‘¢ï¼Œè®¾ç½®å›¾ä¾‹çš„åç§°ã€‚</p>
<p>æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œä¸­æ–‡æ˜¯ä¹±ç å•Šï¼Œè¿™æ˜¯å› ä¸º <code>matplotlib</code> æ˜¯ UTF-8çš„ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
csv = pd.read_csv(<span class="hljs-string">'./1960-2019å…¨çƒGDPæ•°æ®.csv'</span>, encoding=<span class="hljs-string">'gbk'</span>)

<span class="hljs-comment"># è·å–ä¸­å›½æ•°æ®</span>
s = csv[csv.country == <span class="hljs-string">'ä¸­å›½'</span>].set_index(<span class="hljs-string">'year'</span>)
<span class="hljs-comment"># è·å–æ—¥æœ¬æ•°æ®</span>
j = csv[csv.country == <span class="hljs-string">'æ—¥æœ¬'</span>].set_index(<span class="hljs-string">'year'</span>)
<span class="hljs-comment"># è·å–ç¾å›½æ•°æ®</span>
u = csv[csv.country == <span class="hljs-string">'ç¾å›½'</span>].set_index(<span class="hljs-string">'year'</span>)

s.GDP.plot(color=<span class="hljs-string">'red'</span>, legend=<span class="hljs-literal">True</span>, label=<span class="hljs-string">'ä¸­å›½'</span>)
j.GDP.plot(color=<span class="hljs-string">'gray'</span>, legend=<span class="hljs-literal">True</span>, label=<span class="hljs-string">'æ—¥æœ¬'</span>)
u.GDP.plot(color=<span class="hljs-string">'blue'</span>, legend=<span class="hljs-literal">True</span>, label=<span class="hljs-string">'ç¾å›½'</span>)
</code></pre>
<blockquote>
<p>ä¿®å¤ä¹±ç </p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> matplotlib <span class="hljs-keyword">as</span> plt
plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>] = [<span class="hljs-string">'SimHei'</span>]
plt.rcParams[<span class="hljs-string">'axes.unicode_minus'</span>] = <span class="hljs-literal">False</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b418a163a6894dbfbb07f47822b8c0ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=eqYQyiEh4Y%2FIPCrz7qIAbmLJ5QE%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-19">Pandas æ•°æ®ç»“æ„</h3>
<p>åœ¨ pandas ä¸­æ²¡æœ‰è¡Œçš„æ¦‚å¿µã€‚</p>
<p>çœ‹å›¾ä¸­ï¼Œå…¶ä¸­ï¼Œ0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5~è¿™ä¸€åˆ—<strong>æ˜¯ç´¢å¼•åˆ—</strong></p>
<p>ç´¢å¼•åˆ—çš„å·¦ä¾§è¿˜éšè—äº†ä¸€åˆ—ï¼Œå«è¡Œç´¢å¼•åˆ—ï¼Œçœ‹ä¸åˆ°ï¼Œä½†æ˜¯æœ‰ï¼Œæ— æ³•ä¿®æ”¹ã€‚</p>
<p>yearï¼Œcountryï¼ŒGDPï¼Œè¿™ä¸€è¡Œ<strong>å«åˆ—å</strong>ã€‚</p>
<p>æ¯ä¸€åˆ—éƒ½æ˜¯ä¸€ä¸ª <strong>Series å¯¹è±¡</strong></p>
<p>è¿˜éšè—äº†ä¸€ä¸ªåˆ—çš„ç¼–å·ï¼Œä¸‹æ–¹å›¾ä¸­ï¼Œyearçš„ç¼–å·æ˜¯0ï¼Œcountry æ˜¯1ï¼ŒGDP æ˜¯2ã€‚</p>
<p>è¿™ä¸€æ•´ä¸ªå›¾ï¼Œå«åšDataFrameå¯¹è±¡
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8561742183554d75ab7db379ddd99717~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=HO%2BjZZbIL5Qk2Rjl7Gon0sjvwV0%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-20">Series å¯¹è±¡çš„åˆ›å»º</h4>
<p>Seriesä¹Ÿæ˜¯Pandasä¸­çš„æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„å¯¹è±¡ï¼Œæ˜¯ DataFrame çš„åˆ—å¯¹è±¡ï¼Œseries æœ¬èº«ä¹Ÿå…·æœ‰ç´¢å¼•ã€‚</p>
<p>Series æ˜¯ä¸€ç§ç±»ä¼¼äºä¸€ç»´æ•°ç»„çš„å¯¹è±¡ï¼Œç”±ä¸‹é¢ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9db985194a344530be6c2f9322a5f3a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=emLdyOlUl23QGCQjMdQZqjbMO9M%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>é€šè¿‡åˆ—è¡¨åˆ›å»º seriesï¼Œä½¿ç”¨ index è®¾ç½®ç´¢å¼•</li>
</ol>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
series = pd.Series([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], index=[<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>])
<span class="hljs-built_in">print</span>(series)
<span class="hljs-comment"># a    1</span>
<span class="hljs-comment"># b    2</span>
<span class="hljs-comment"># c    3</span>
<span class="hljs-comment"># dtype: int64</span>
</code></pre>
<ol start="2">
<li>é€šè¿‡å…ƒç»„åˆ›å»º series</li>
</ol>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
s3 = pd.Series((<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'ç”·'</span>, <span class="hljs-number">23</span>), index=[<span class="hljs-string">'name'</span>, <span class="hljs-string">'sex'</span>, <span class="hljs-string">'age'</span>])
<span class="hljs-built_in">print</span>(s3)
<span class="hljs-comment"># name    å¼ ä¸‰</span>
<span class="hljs-comment"># sex      ç”·</span>
<span class="hljs-comment"># age     23</span>
<span class="hljs-comment"># dtype: object</span>
</code></pre>
<ol start="3">
<li>é€šè¿‡å­—å…¸ç”Ÿæˆï¼Œé»˜è®¤keyæ˜¯ç´¢å¼•ï¼Œvalueæ˜¯æ•°æ®</li>
</ol>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
s3 = pd.Series({<span class="hljs-string">'name'</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">18</span>, <span class="hljs-string">'sex'</span>: <span class="hljs-string">'ç”·'</span>})
<span class="hljs-built_in">print</span>(s3)
<span class="hljs-comment"># name    å¼ ä¸‰</span>
<span class="hljs-comment"># age     18</span>
<span class="hljs-comment"># sex      ç”·</span>
<span class="hljs-comment"># dtype: object</span>
</code></pre>
<ol start="4">
<li>å°† numpy çš„ ndarray å¯¹è±¡è½¬æ¢æˆ series</li>
</ol>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
arange = np.arange(<span class="hljs-number">5</span>)
s3 = pd.Series(arange)
<span class="hljs-built_in">print</span>(s3)
</code></pre>
<h4 data-id="heading-21">Series çš„å¸¸ç”¨å±æ€§</h4>
<ul>
<li>æˆ‘å¸Œæœ›è·å–ç´¢å¼•åˆ—</li>
<li>æˆ‘å¸Œæœ›è·å–æ•°å€¼åˆ—</li>
<li>æˆ‘å¸Œæœ›æ ¹æ®ç´¢å¼•è·å–æ•°æ®</li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
s1 = pd.Series(data=[i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">6</span>)], index=[i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-string">'ABCDEF'</span>])
<span class="hljs-built_in">print</span>(s1)
<span class="hljs-comment"># A    0</span>
<span class="hljs-comment"># B    1</span>
<span class="hljs-comment"># C    2</span>
<span class="hljs-comment"># D    3</span>
<span class="hljs-comment"># E    4</span>
<span class="hljs-comment"># F    5</span>
<span class="hljs-comment"># dtype: int64</span>

<span class="hljs-comment"># ç´¢å¼•åˆ—</span>
<span class="hljs-built_in">print</span>(s1.index)
<span class="hljs-comment"># æ•°æ®åˆ—</span>
<span class="hljs-built_in">print</span>(s1.values)
<span class="hljs-comment"># æ ¹æ®ç´¢å¼•Dæ‰¾å€¼</span>
<span class="hljs-built_in">print</span>(s1[<span class="hljs-string">'D'</span>])
</code></pre>
<h4 data-id="heading-22">DataFrame å¯¹è±¡</h4>
<p>DataFrameæ˜¯ä¸€ä¸ªç±»ä¼¼äºäºŒç»´æ•°ç»„æˆ–è¡¨æ ¼(å¦‚excel)çš„å¯¹è±¡ï¼Œæ—¢æœ‰è¡Œç´¢å¼•ï¼Œåˆæœ‰åˆ—ç´¢å¼•</p>
<ul>
<li>è¡Œç´¢å¼•ï¼Œè¡¨æ˜ä¸åŒè¡Œï¼Œæ¨ªå‘ç´¢å¼•ï¼Œå«indexï¼Œ0è½´ï¼Œaxis=0</li>
<li>åˆ—ç´¢å¼•ï¼Œè¡¨æ˜ä¸åŒåˆ—ï¼Œçºµå‘ç´¢å¼•ï¼Œå«columnsï¼Œ1è½´ï¼Œaxis=1</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b47844ede8cf45cf9d7554fc8fdcfb02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=mnRQTBApJ8avp7l6orbpjmbNXiA%3D" alt="image.png" loading="lazy"/></p>
<p>é™¤äº†ä¹‹å‰ç”¨ csvæ–‡ä»¶è¯»å–è·å– DataFrame è¿˜æœ‰å¾ˆå¤šæ–¹å¼</p>
<ol>
<li>åˆ›å»º DataFrame å¯¹è±¡ï¼Œå­—å…¸ + åˆ—è¡¨çš„æ–¹å¼</li>
</ol>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
data_dict = {
    <span class="hljs-string">'æ—¥æœŸ'</span>: [<span class="hljs-string">'2025-11-08'</span>, <span class="hljs-string">'2025-11-09'</span>, <span class="hljs-string">'2025-11-10'</span>],
    <span class="hljs-string">'æ¸©åº¦'</span>: [<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>],
    <span class="hljs-string">'æ¹¿åº¦'</span>: [<span class="hljs-number">60</span>, <span class="hljs-number">70</span>, <span class="hljs-number">60</span>]
}
<span class="hljs-comment"># æŠŠä¸Šé¢çš„æ•°æ®å­—å…¸è½¬æ¢æˆDataFrame</span>
s1 = pd.DataFrame(data=data_dict, index=[<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>])
<span class="hljs-built_in">print</span>(s1)
<span class="hljs-comment">#            æ—¥æœŸ  æ¸©åº¦  æ¹¿åº¦</span>
<span class="hljs-comment"># A  2025-11-08   5  60</span>
<span class="hljs-comment"># B  2025-11-09   3  70</span>
<span class="hljs-comment"># C  2025-11-10   4  60</span>
</code></pre>
<ol start="2">
<li>åˆ›å»º DataFrame å¯¹è±¡ï¼Œåˆ—è¡¨åŠ å…ƒç»„çš„æ–¹å¼ï¼Œä¸ä¸€å®šæ˜¯å…ƒç»„ï¼Œåˆ—è¡¨+åˆ—è¡¨ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</li>
</ol>
<p>é€šè¿‡ columns è®¾ç½®åˆ—åï¼Œé€šè¿‡indexè®¾ç½®ç´¢å¼•</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
data_dc = [
    (<span class="hljs-string">'2025-11-08'</span>, <span class="hljs-number">5</span>, <span class="hljs-number">60</span>),
    (<span class="hljs-string">'2025-11-09'</span>, <span class="hljs-number">3</span>, <span class="hljs-number">70</span>),
    (<span class="hljs-string">'2025-11-10'</span>, <span class="hljs-number">4</span>, <span class="hljs-number">60</span>)
]
s2 = pd.DataFrame(data=data_dc, columns=[<span class="hljs-string">'æ—¥æœŸ'</span>, <span class="hljs-string">'æ¸©åº¦'</span>, <span class="hljs-string">'æ¹¿åº¦'</span>], index=[<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>])
<span class="hljs-built_in">print</span>(s2)

<span class="hljs-comment">#            æ—¥æœŸ  æ¸©åº¦  æ¹¿åº¦</span>
<span class="hljs-comment"># A  2025-11-08   5  60</span>
<span class="hljs-comment"># B  2025-11-09   3  70</span>
<span class="hljs-comment"># C  2025-11-10   4  60</span>
</code></pre>
<ol start="3">
<li>é€šè¿‡ numpy åˆ›å»º</li>
</ol>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
s3 = pd.DataFrame(np.arange(<span class="hljs-number">9</span>).reshape(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>))
<span class="hljs-built_in">print</span>(s3)
<span class="hljs-comment">#    0  1  2</span>
<span class="hljs-comment"># 0  0  1  2</span>
<span class="hljs-comment"># 1  3  4  5</span>
<span class="hljs-comment"># 2  6  7  8</span>
</code></pre>
<h4 data-id="heading-23">DataFrame å¸¸ç”¨å±æ€§</h4>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
score = np.random.randint(<span class="hljs-number">40</span>, <span class="hljs-number">101</span>, size=(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>))
score_df = pd.DataFrame(score)
<span class="hljs-comment"># èµ‹å€¼</span>
score_df.columns = [<span class="hljs-string">'è¯­æ–‡'</span>, <span class="hljs-string">'æ•°å­¦'</span>, <span class="hljs-string">'è‹±è¯­'</span>, <span class="hljs-string">'ç‰©ç†'</span>, <span class="hljs-string">'åŒ–å­¦'</span>]
score_df.index = [<span class="hljs-string">'åŒå­¦'</span> + <span class="hljs-built_in">str</span>(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]
</code></pre>
<p>å·²æœ‰æ•°æ®æ˜¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2629b685ba004c3a8450a8c0e2e4e76b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=6OMDke%2F0ltr4wjUppbroPLVT%2BUc%3D" alt="image.png" loading="lazy"/></p>
<p>æ³¨æ„ï¼Œæ‰“å°çš„ dtype è™½ç„¶æ˜¯ objectï¼Œä½†æ˜¯è¡¨ç¤ºçš„æ„æ€æ˜¯å­—ç¬¦ä¸²ï¼Œç­‰äº str</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># è·å–å½¢çŠ¶</span>
<span class="hljs-built_in">print</span>(score_df.shape) <span class="hljs-comment"># (10, 5)</span>
<span class="hljs-comment"># è·å–ç´¢å¼•</span>
<span class="hljs-built_in">print</span>(score_df.index) <span class="hljs-comment"># Index(['åŒå­¦0',....], dtype='object')</span>
<span class="hljs-comment"># è·å–æ•°æ®</span>
<span class="hljs-built_in">print</span>(score_df.values)
<span class="hljs-comment"># [[92 81 63 79 83]</span>
<span class="hljs-comment"># ...</span>
<span class="hljs-comment">#  [71 89 90 94 64]]</span>
<span class="hljs-comment"># è½¬æ¢æˆ numpy</span>
<span class="hljs-built_in">print</span>(score_df.to_numpy())
<span class="hljs-comment"># è¡Œåˆ—ï¼Œæ•°æ®è½¬æ¢ï¼Œä¹‹å‰æ˜¯è¡Œçš„è½¬æˆåˆ—ï¼Œä¹‹å‰æ˜¯åˆ—çš„è½¬æˆè¡Œ</span>
<span class="hljs-built_in">print</span>(score_df.T)
<span class="hljs-comment">#     åŒå­¦0  åŒå­¦1  åŒå­¦2  åŒå­¦3  åŒå­¦4  åŒå­¦5  åŒå­¦6  åŒå­¦7  åŒå­¦8  åŒå­¦9</span>
<span class="hljs-comment"># è¯­æ–‡   92   51   58   40   43   40   71   76   56   71</span>
<span class="hljs-comment"># æ•°å­¦   81   54   96   84   67   44   70   80   99   89</span>
<span class="hljs-comment"># è‹±è¯­   63   92   41   46   96   44   93   90   64   90</span>
<span class="hljs-comment"># ç‰©ç†   79   66   43   98   76   64   43   92   48   94</span>
<span class="hljs-comment"># åŒ–å­¦   83   45   48   45   84   52   54   58   99   64</span>
<span class="hljs-comment"># size å¤§å°ï¼Œç»Ÿè®¡çš„å…ƒç´ ä¸ªæ•°ã€‚åªåŒ…å«æ•°æ®</span>
<span class="hljs-built_in">print</span>(score_df.size) <span class="hljs-comment"># 50</span>
<span class="hljs-comment"># è·å–æ•°æ®ç±»å‹</span>
<span class="hljs-built_in">print</span>(score_df.dtypes)
<span class="hljs-comment"># è¯­æ–‡    int32</span>
<span class="hljs-comment"># æ•°å­¦    int32</span>
<span class="hljs-comment"># è‹±è¯­    int32</span>
<span class="hljs-comment"># ç‰©ç†    int32</span>
<span class="hljs-comment"># åŒ–å­¦    int32</span>
<span class="hljs-comment"># dtype: object</span>
</code></pre>
<h4 data-id="heading-24">å¸¸ç”¨æ–¹æ³•</h4>
<p>å·²çŸ¥æ•°æ® <code>score_df</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6b87b7c329b4f42a17627748c520d97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=5aj3PyIGfMzesBGmUBlA9Pc3e58%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æŸ¥çœ‹å‰5è¡Œ</span>
score_df.head()
<span class="hljs-comment"># æŸ¥çœ‹å‰10è¡Œ</span>
score_df.head(<span class="hljs-number">10</span>)

<span class="hljs-comment"># æŸ¥çœ‹å5è¡Œ</span>
score_df.tail()
<span class="hljs-comment"># æŸ¥çœ‹å10è¡Œ</span>
score_df.tail(<span class="hljs-number">10</span>)
</code></pre>
<p><strong>è·å–æ–¹æ³•çš„æè¿°ä¿¡æ¯ç»Ÿè®¡ä¿¡æ¯ç­‰</strong></p>
<pre><code class="hljs language-py" lang="py">score_df.describe()
</code></pre>


















































<table><thead><tr><th>è¡Œå</th><th>å«ä¹‰</th><th>ç¤ºä¾‹è§£é‡Šï¼ˆä»¥â€œè¯­æ–‡â€ä¸ºä¾‹ï¼‰</th></tr></thead><tbody><tr><td><strong>count</strong></td><td>éç©ºï¼ˆæœ‰æ•ˆï¼‰æ ·æœ¬æ•°</td><td>ä¸€å…±æœ‰ 10 ä¸ªå­¦ç”Ÿçš„è¯­æ–‡æˆç»©</td></tr><tr><td><strong>mean</strong></td><td>å¹³å‡å€¼ï¼ˆç®—æœ¯å¹³å‡æ•°ï¼‰</td><td>å¹³å‡è¯­æ–‡æˆç»©æ˜¯ 67 åˆ†</td></tr><tr><td><strong>std</strong></td><td>æ ‡å‡†å·®ï¼ˆstandard deviationï¼‰</td><td>æˆç»©çš„æ³¢åŠ¨ç¨‹åº¦æ˜¯ 19.9ï¼Œè¯´æ˜åˆ†æ•°å·®è·è¾ƒå¤§</td></tr><tr><td><strong>min</strong></td><td>æœ€å°å€¼</td><td>è¯­æ–‡æœ€ä½åˆ† 41</td></tr><tr><td><strong>25%</strong></td><td>ç¬¬ 1 å››åˆ†ä½æ•°ï¼ˆQ1ï¼‰</td><td>æœ‰ 25% çš„å­¦ç”Ÿè¯­æ–‡ â‰¤ 50.5</td></tr><tr><td><strong>50%</strong></td><td>ä¸­ä½æ•°ï¼ˆQ2ï¼‰</td><td>ä¸€åŠå­¦ç”Ÿè¯­æ–‡ â‰¤ 64ï¼Œå¦ä¸€åŠ â‰¥ 64</td></tr><tr><td><strong>75%</strong></td><td>ç¬¬ 3 å››åˆ†ä½æ•°ï¼ˆQ3ï¼‰</td><td>æœ‰ 75% çš„å­¦ç”Ÿè¯­æ–‡ â‰¤ 82.75</td></tr><tr><td><strong>max</strong></td><td>æœ€å¤§å€¼</td><td>è¯­æ–‡æœ€é«˜åˆ† 98</td></tr></tbody></table>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># è·å–æ•°æ®çš„æè¿°æ€§ï¼Œè¯¦ç»†ä¿¡æ¯</span>
score_df.info()
<span class="hljs-comment"># &lt;class 'pandas.core.frame.DataFrame'&gt;</span>
<span class="hljs-comment"># Index: 10 entries, åŒå­¦0 to åŒå­¦9</span>
<span class="hljs-comment"># Data columns (total 5 columns):</span>
<span class="hljs-comment">#  #   Column  Non-Null Count  Dtype</span>
<span class="hljs-comment"># ---  ------  --------------  -----</span>
<span class="hljs-comment">#  0   è¯­æ–‡      10 non-null     int32</span>
<span class="hljs-comment">#  1   æ•°å­¦      10 non-null     int32</span>
<span class="hljs-comment">#  2   è‹±è¯­      10 non-null     int32</span>
<span class="hljs-comment">#  3   ç‰©ç†      10 non-null     int32</span>
<span class="hljs-comment">#  4   åŒ–å­¦      10 non-null     int32</span>
<span class="hljs-comment"># dtypes: int32(5)</span>
<span class="hljs-comment"># memory usage: 280.0+ bytes</span>
</code></pre>
<h4 data-id="heading-25">ç´¢å¼•æ“ä½œ</h4>
<p>å·²çŸ¥æ•°æ®æ˜¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b68ba851a30e4bc68d08364b22c73748~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=vlzYN%2BwdB0SNRetT7fRWsGIwYBA%3D" alt="image.png" loading="lazy"/></p>
<p>æ–°å¢ä¸€åˆ—ï¼Œåˆ—åæ˜¯ åŒå­¦0ï¼Œå€¼å…¨éƒ¨æ˜¯ stu</p>
<pre><code class="hljs language-py" lang="py">score_df[<span class="hljs-string">'åŒå­¦0'</span>] = <span class="hljs-string">'stu'</span>
<span class="hljs-comment"># åˆ é™¤åˆ—ï¼Œaxis = 1 æ˜¯åˆ—</span>
score_df.drop(<span class="hljs-string">'åŒå­¦0'</span>, axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78d8d9b72cdb446a956f2b2146a44fab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=RtwrSwMtE%2FkYteM3%2FqqLogQTO0A%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>è®¾ç½®ç´¢å¼•åˆ—</p>
</blockquote>
<p>reset_indexï¼Œå¯ä»¥è¢«æ‰§è¡Œå¤šæ¬¡ï¼Œä½†æ˜¯æ‰§è¡Œå¤šæ¬¡æœ‰ä¸Šé™ï¼Œä¼šå°† index å’Œ level0ç½®é¡¶è¿‡å»ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># è®¾ç½®</span>
score_df.reset_index(<span class="hljs-string">'month'</span>, drop=<span class="hljs-literal">False</span>, inplace=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># å–æ¶ˆè®¾ç½®ç´¢å¼•åˆ—</span>
score_df.reset_index(inplace=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># è®¾ç½®å¤šåˆ—ç´¢å¼•</span>
score_df.reset_index([<span class="hljs-string">'month'</span>, <span class="hljs-string">'year'</span>], drop=<span class="hljs-literal">False</span>, inplace=<span class="hljs-literal">True</span>)
</code></pre>
<h4 data-id="heading-26">æ•°æ®ç±»å‹</h4>


















































<table><thead><tr><th>Pandasæ•°æ®ç±»å‹</th><th>è¯´æ˜</th><th>å¯¹åº”çš„Pythonç±»å‹</th></tr></thead><tbody><tr><td>Object</td><td>å­—ç¬¦ä¸²ç±»å‹</td><td>string</td></tr><tr><td>int</td><td>æ•´æ•°ç±»å‹</td><td>int</td></tr><tr><td>float</td><td>æµ®ç‚¹æ•°ç±»å‹</td><td>float</td></tr><tr><td>datetime</td><td>æ—¥æœŸæ—¶é—´ç±»å‹</td><td>datetimeåŒ…ä¸­çš„datetimeç±»å‹</td></tr><tr><td>timedelta</td><td>æ—¶é—´å·®ç±»å‹</td><td>datetimeåŒ…ä¸­çš„timedeltaç±»å‹</td></tr><tr><td>category</td><td>åˆ†ç±»ç±»å‹</td><td>æ— åŸç”Ÿç±»å‹ï¼Œå¯ä»¥è‡ªå®šä¹‰</td></tr><tr><td>bool</td><td>å¸ƒå°”ç±»å‹</td><td>boolï¼ˆTrue,Falseï¼‰</td></tr><tr><td>nan</td><td>ç©ºå€¼ç±»å‹</td><td>None</td></tr></tbody></table>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
pd.to_datetime(<span class="hljs-string">'2025-11-10'</span>)
<span class="hljs-comment"># &lt;class 'pandas._libs.tslibs.timestamps.Timestamp'&gt;</span>
pd.to_datetime([<span class="hljs-string">'2025-11-10'</span>, <span class="hljs-string">'2025-11-11'</span>, <span class="hljs-string">'2025-11-12'</span>])
<span class="hljs-comment"># DatetimeIndex(['2025-11-10', '2025-11-11', '2025-11-12'], dtype='datetime64[ns]', freq=None)</span>
</code></pre>
<blockquote>
<p>è®¡ç®—æ—¶é—´é—´éš”</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
start = pd.to_datetime(<span class="hljs-string">'2025-11-10'</span>)
end = pd.to_datetime(<span class="hljs-string">'2025-11-13'</span>)

result = end - start
<span class="hljs-built_in">print</span>(result) <span class="hljs-comment"># 3 days 00:00:00</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(result)) <span class="hljs-comment"># &lt;class 'pandas._libs.tslibs.timedeltas.Timedelta'&gt;</span>
</code></pre>
<p><strong>category ç±»å‹</strong></p>
<p>æ­¤æ—¶æœ‰é‡å¤çš„æ•°æ®ã€‚</p>
<p>æ‰“å°ç»“æœä¸ºï¼š</p>
<p>0     apple<br/>
1      pear<br/>
2    orange<br/>
3     apple<br/>
4      pear<br/>
dtype: object<br/></p>
<p>åŠ ä¸Š dtype = categoryï¼Œæ•°æ®ä¸€æ ·ï¼Œä½†æ˜¯æ‰“å°çš„å€¼ç±»å‹æ˜¯3ä¸ªï¼Œå‡å°‘äº†å†…å­˜æ¶ˆè€—ï¼Œåªå­˜å‚¨å”¯ä¸€å€¼ã€‚</p>
<p>0     apple<br/>
1      pear<br/>
2    orange<br/>
3     apple<br/>
4      pear<br/>
dtype: category <br/>
Categories (3, object): ['apple', 'orange', 'pear']</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-comment"># f = pd.Series(['apple', 'pear', 'orange', 'apple', 'pear'])</span>
f = pd.Series([<span class="hljs-string">'apple'</span>, <span class="hljs-string">'pear'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'apple'</span>, <span class="hljs-string">'pear'</span>], dtype=<span class="hljs-string">'category'</span>)
</code></pre>
<h3 data-id="heading-27">æ“ä½œ pandas æ•°æ®</h3>
<h4 data-id="heading-28">ä½¿ç”¨è¯­æ³•å’Œ loc è·å–</h4>
<p>å·²çŸ¥ sd æ•°æ®ä¸º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60609a3e4ebb47f0902eb4ec1d6fe8b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=%2BbI9c7mROIKFmtU37TAyqaHbuLI%3D" alt="image.png" loading="lazy"/></p>
<p>å› ä¸ºæ—¶é—´è®¾ç½®äº†ç´¢å¼•ï¼Œæ‰€ä»¥æ˜¯æŒ‰ç…§æ—¶é—´æ’çš„ï¼Œæ³¨æ„ï¼šå¿…é¡»æ˜¯å…ˆåˆ—åè¡Œ</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># è·å– open åˆ—</span>
sd[<span class="hljs-string">'open'</span>]

<span class="hljs-comment"># å¿…é¡»æ˜¯5ä¸ªï¼Œå› ä¸ºæ˜¯5è¡Œï¼Œæ§åˆ¶æ˜¯å¦æŸ¥çœ‹è¿™ä¸€è¡Œã€‚</span>
sd.head(<span class="hljs-number">5</span>)[[<span class="hljs-literal">True</span>, <span class="hljs-literal">True</span>, <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>]]
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22472a30bb2a46448be347fdcb276d9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=Pg6qS8EHOllxh1uobR4DKuQ4n0Y%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># è·å–åˆ°å…·ä½“çš„æ•°æ®ï¼Œè¯­æ³•ï¼šsd[åˆ—][è¡Œ] </span>
sd[<span class="hljs-string">'open'</span>][<span class="hljs-string">'2018-02-23'</span>] <span class="hljs-comment"># 22.88</span>
<span class="hljs-comment"># è¿™ä¹Ÿæ˜¯è·å–çš„ï¼Œåªä¸è¿‡æ˜¯å…ˆè¡Œååˆ—ï¼Œè¯­æ³•ï¼šsd.loc[è¡Œ, åˆ—]</span>
sd.loc[<span class="hljs-string">'2018-02-23'</span>, <span class="hljs-string">'open'</span>]
</code></pre>
<blockquote>
<p>è·å–åŒºé—´çš„æ•°æ®ï¼Œè¯­æ³•ï¼šloc[å¼€å§‹:ç»“æŸ, åˆ—å]ï¼Œä¸æŒ‡å®šåˆ—ï¼Œæ˜¯æ‰€æœ‰åˆ—</p>
</blockquote>
<pre><code class="hljs language-py" lang="py">sd.loc[<span class="hljs-string">'2018-02-27'</span>:<span class="hljs-string">'2018-02-22'</span>, <span class="hljs-string">'open'</span>]
<span class="hljs-comment"># è·å–å¤šåˆ—</span>
sd.loc[<span class="hljs-string">'2018-02-27'</span>:<span class="hljs-string">'2018-02-22'</span>, [<span class="hljs-string">'open'</span>, <span class="hljs-string">'high'</span>]]
<span class="hljs-comment"># å†™ä¸€ä¸ª : å·ä¹Ÿæ˜¯æ‰€æœ‰åˆ—</span>
sd.loc[<span class="hljs-string">'2018-02-27'</span>:<span class="hljs-string">'2018-02-22'</span>, :]
<span class="hljs-comment"># éƒ½ä¸å†™ï¼Œæ‰€æœ‰æ—¶é—´ï¼Œæ‰€æœ‰åˆ—</span>
sd.loc[:, :]
</code></pre>
<h4 data-id="heading-29">ä½¿ç”¨ iloc è·å–</h4>
<p>iloc æ˜¯æ“ä½œç´¢å¼•çš„</p>
<blockquote>
<p>è·å–ç¬¬æŒ‡å®šè¡Œæ‰€æœ‰åˆ—</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># è·å–ç¬¬ 0 è¡Œæ‰€æœ‰</span>
<span class="hljs-built_in">print</span>(sd.iloc[<span class="hljs-number">0</span>])
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f15887b4a5f344799598f806de99d52f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=kdS%2FjLbZj3YtgVokZTwhF19CY34%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>è·å–æŒ‡å®šè¡Œçš„æŒ‡å®šåˆ—</p>
</blockquote>
<pre><code class="hljs language-py" lang="py">sd.iloc[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]
</code></pre>
<blockquote>
<p>åŒºé—´æŸ¥æ‰¾</p>
</blockquote>
<p>è·å–å‰å››è¡Œæ•°æ®ï¼Œåªè¦ç¬¬0åˆ—ã€‚</p>
<pre><code class="hljs language-py" lang="py">sd.iloc[:<span class="hljs-number">4</span>, <span class="hljs-number">0</span>]
</code></pre>
<p>è·å–å‰å››è¡Œï¼Œå¹¶ä¸”è¦ç¬¬0~4åˆ—</p>
<pre><code class="hljs language-py" lang="py">sd.iloc[:<span class="hljs-number">4</span>, <span class="hljs-number">0</span>:<span class="hljs-number">4</span>]
<span class="hljs-comment"># è·å–å‰å››è¡Œï¼Œæ‰€æœ‰åˆ—</span>
sd.iloc[:<span class="hljs-number">4</span>, :]
<span class="hljs-comment"># è·å–æ‰€æœ‰è¡Œæ‰€æœ‰åˆ—</span>
sd.iloc[:, :]
</code></pre>
<p>åŠ ä¸Šæ­¥é•¿</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># ä»ç¬¬1è¡Œåˆ°ç¬¬5è¡Œï¼Œæ­¥é•¿ä¸º2ï¼Œè·å–2~5åˆ—</span>
sd.iloc[<span class="hljs-number">1</span>:<span class="hljs-number">5</span>:<span class="hljs-number">2</span>, <span class="hljs-number">2</span>:<span class="hljs-number">5</span>]
</code></pre>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æŸ¥çœ‹ç¬¬ 0 è¡Œå’Œç¬¬2è¡Œ</span>
sd.iloc[[<span class="hljs-number">0</span>, <span class="hljs-number">2</span>]]
</code></pre>
<h4 data-id="heading-30">åˆ é™¤ã€æ·»åŠ ã€ä¿®æ”¹</h4>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># åˆ é™¤ axis = 1 çš„åˆ—ï¼Œåˆ—åæ˜¯ma20å’Œma10</span>
sd.drop([<span class="hljs-string">'ma20'</span>, <span class="hljs-string">'ma10'</span>], axis=<span class="hljs-number">1</span>)
</code></pre>
<p>åœ¨è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åˆ—åè¿›è¡Œèµ‹å€¼ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¿®æ”¹ï¼Œä¸å­˜åœ¨åˆ™æ·»åŠ </p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># å°†openåˆ—çš„å€¼è®¾ç½®ä¸º1</span>
sd[<span class="hljs-string">'open'</span>] = <span class="hljs-number">1</span>
<span class="hljs-comment"># å› ä¸ºaiåˆ—æ²¡æœ‰ï¼Œæ­¤æ—¶æ˜¯æ–°å¢</span>
sd[<span class="hljs-string">'ai'</span>] = <span class="hljs-string">'333'</span>
<span class="hljs-comment"># è¿™æ ·æ–°å¢çš„æ—¶å€™ï¼Œä¼šæ¯è¡Œè¿›è¡Œè®¡ç®—ï¼Œè€Œä¸æ˜¯æ¯ä¸€åˆ—éƒ½æ˜¯ä¸€ä¸ªæ•°æ®</span>
sd[<span class="hljs-string">'diff'</span>] = sd[<span class="hljs-string">'high'</span>] - sd[<span class="hljs-string">'low'</span>]
</code></pre>
<p>ç»†èŠ‚ï¼šæ–¹æ‹¬å·é‡Œå†™åˆ—åå’Œ.åˆ—åï¼Œéƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ç‰¹æ®Šå†…å®¹ï¼Œç›´æ¥å†™å‡ºæ¥ï¼Œå¹¶ä¸åˆè§„</p>
<h4 data-id="heading-31">æ’åº</h4>
<p>å·²çŸ¥ sd æ•°æ®å¦‚ä¸‹å›¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd7b91eb0d4b464ab3f6142324f5ab58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=HZpBHQLl2kCv4wg4yo7uNL3qTbM%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>ascendingï¼šç­‰äº false æ˜¯é™åºæ’åº</li>
<li>æ³¨æ„axis åªèƒ½æ˜¯ 0</li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># é»˜è®¤æ˜¯å‡åºæ’åºï¼ŒæŒ‡å®šåˆ—å</span>
sd.sort_values(<span class="hljs-string">'åˆ—å'</span>, ascending=<span class="hljs-literal">False</span>)
<span class="hljs-comment"># å¤šåˆ—åæ’åº</span>
sd.sort_values([<span class="hljs-string">'åˆ—å'</span>, <span class="hljs-string">'åˆ—å'</span>])
<span class="hljs-comment"># å¤šåˆ—åæ’åºï¼Œå¹¶å•ç‹¬æŒ‡å®šæ’åºè§„åˆ™</span>
sd.sort_values([<span class="hljs-string">'åˆ—å'</span>, <span class="hljs-string">'åˆ—å'</span>], ascending=[<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>])
<span class="hljs-comment"># æ ¹æ®ç´¢å¼•æ’åºï¼Œé»˜è®¤æ˜¯Trueï¼Œå‡åº</span>
sd.sort_index(ascending=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># è¿™æ ·ä¹Ÿå¯ä»¥</span>
sd.åˆ—å.sort_values()
</code></pre>
<h3 data-id="heading-32">pandas åŸºç¡€è¿ç®—</h3>
<p>å·²çŸ¥ open æ•°æ®å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7abbf742ca664307ba70c9ee37dab198~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=Z3CzU1kWXkfrMxS984ulbRhOIoo%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>åŸºç¡€è¿ç®—ç¬¦ +-*/ éƒ½ä¸€æ ·</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># ä¸´æ—¶æ•°æ®ï¼Œæ­¤æ—¶ s çš„ç»“æœæ˜¯openè¿™ä¸€åˆ— + 1çš„æ•°æ®</span>
s = <span class="hljs-built_in">open</span> + <span class="hljs-number">1</span>
<span class="hljs-comment"># æ­¤æ—¶è¿”å›çš„ s ä¹Ÿæ˜¯åŠ  1 çš„</span>
s = <span class="hljs-built_in">open</span>.add(<span class="hljs-number">1</span>)

<span class="hljs-comment"># ä¿®æ”¹åŸæ•°æ® + 1</span>
<span class="hljs-built_in">open</span> += <span class="hljs-number">1</span>
</code></pre>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># åŠ æ³•æ˜¯ openï¼Œå‡æ³•æ˜¯ sub</span>
<span class="hljs-built_in">open</span>.sub(<span class="hljs-number">1</span>)
</code></pre>
<blockquote>
<p>å¯ä»¥è¿›è¡Œä¸¤ä¸ªå­—æ®µç›¸è®¡ç®—ã€‚ç©ºç”¨Nanå¡«å……</p>
</blockquote>
<p><strong>å®ç°å¯¹æ•´ä¸ªDataFrameè¡¨åŠ  1</strong></p>
<p>å·²çŸ¥æ•´ä¸ªè¡¨çš„æ•°æ®ä¸º sd</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5430fb7dbc9496aa5ca17567fd7c2ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=fmz6DgSEO9D%2FkOQjaEO%2FQweEjas%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py">sd + <span class="hljs-number">1</span>
</code></pre>
<h3 data-id="heading-33">pandas é€»è¾‘è¿ç®—</h3>
<p>å·²çŸ¥ sd æ•°æ®ä¸º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9c0185a3b3543ea912de41b2ab24f84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=M08OjkiIrGgiaMJUhHJw3gxl6No%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># ç­›é€‰å‡º open çš„å€¼å¤§äº 23 çš„</span>
sd[sd.<span class="hljs-built_in">open</span> &gt; <span class="hljs-number">23</span>]
<span class="hljs-comment"># å¤šæ¡ä»¶åˆ¤æ–­æ–¹å¼ä¸€</span>
sd[(sd.<span class="hljs-built_in">open</span> &gt;= <span class="hljs-number">23</span>) &amp; (sd.<span class="hljs-built_in">open</span> &lt;= <span class="hljs-number">24</span>)]
sd[(sd[<span class="hljs-string">'open'</span>] &gt;= <span class="hljs-number">23</span>) &amp; (sd[<span class="hljs-string">'open'</span>] &lt;= <span class="hljs-number">24</span>)]
</code></pre>
<blockquote>
<p>é€»è¾‘è¿ç®—å‡½æ•°æ–¹å¼</p>
</blockquote>
<ul>
<li>queryï¼šå¯ä»¥ç›´æ¥å†™è¡¨è¾¾å¼</li>
<li>isinï¼šç­‰äºæ¯”è¾ƒ</li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æŸ¥è¯¢å‡ºæ¥ open çš„å€¼åœ¨ 23 å’Œ 24 ä¹‹é—´</span>
sd.query(<span class="hljs-string">'open &gt;= 23 &amp; open &lt;= 24'</span>)
<span class="hljs-comment"># æŸ¥è¯¢å‡ºæ¥ open ç­‰äº 23.8æˆ–è€…ç­‰äº22.8</span>
sd[(sd.<span class="hljs-built_in">open</span> == <span class="hljs-number">23.8</span>) | (sd.<span class="hljs-built_in">open</span> == <span class="hljs-number">22.8</span>)]
<span class="hljs-comment"># query æ–¹å¼</span>
sd.query(<span class="hljs-string">'open in [22.8, 23.8]'</span>)
<span class="hljs-comment"># isin æ–¹å¼</span>
sd[sd.<span class="hljs-built_in">open</span>.isin([<span class="hljs-number">22.8</span>, <span class="hljs-number">23.8</span>])]
</code></pre>
<h3 data-id="heading-34">ç»Ÿè®¡å‡½æ•°</h3>
<p>å·²çŸ¥æ•°æ®æ˜¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fec87eeacdc84dbf9cb2d845b2c9ba87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=3K0rWMeFgZhFmIihEKkJw4UQNGg%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># ç»Ÿè®¡æ¯åˆ—æ•°æ®çš„æ€»æ¡æ•°</span>
sd.count()
sd.count(axis=<span class="hljs-number">0</span>)

<span class="hljs-comment"># ç»Ÿè®¡æ¯è¡Œæœ‰å¤šå°‘åˆ—</span>
sd.count(axis=<span class="hljs-string">'columns'</span>)
<span class="hljs-comment"># ç»Ÿè®¡æ¯åˆ—æœ‰å¤šå°‘è¡Œ</span>
sd.count(axis=<span class="hljs-string">'rows'</span>)

<span class="hljs-comment"># æŸ¥çœ‹æ¯åˆ—æœ€å¤§å€¼</span>
sd.<span class="hljs-built_in">max</span>()
sd.<span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>)
<span class="hljs-comment"># æŒ‰è¡Œç´¢å¼•ç»Ÿè®¡æœ€å¤§å€¼</span>
sd.<span class="hljs-built_in">max</span>(<span class="hljs-number">1</span>)
<span class="hljs-comment"># æœ€å°å€¼  min</span>
<span class="hljs-comment"># æŸ¥çœ‹å¹³å‡å€¼</span>
sd.mean()

</code></pre>
<p>æ–¹å·®æ€ä¹ˆç®—å‘¢ï¼Œæ¯ä¸ªå€¼å’Œå¹³å‡å€¼çš„å·®å€¼ã€‚</p>
<p>æ¯ä¸ªå€¼å’Œ å¹³å‡å€¼çš„å·®çš„ä¸€ä¸ªå¹³æ–¹å’Œçš„å¹³å‡å€¼ã€‚</p>
<p>æ ‡å‡†å·®ç­‰äº æ–¹å·®å¼€æ ¹å·ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æŸ¥çœ‹æ¯åˆ—çš„æ ‡å‡†å·®(std)ï¼Œæ–¹å·®(var)</span>
sd.std()
sd.var()
</code></pre>
<p>æ±‚ä¸­ä½æ•°ï¼Œå°†æ•°æ®ä»å°åˆ°å¤§æ’åºï¼Œå–ä¸­é—´çš„é‚£ä¸ªæ•°å­—ï¼Œå¦‚æœæ˜¯å¶æ•°ï¼Œå–ä¸­é—´ä¸¤ä¸ªæ•°å­—çš„å¹³å‡å€¼ã€‚</p>
<pre><code class="hljs language-py" lang="py">df = pd.DataFrame({
    <span class="hljs-string">'col1'</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>], <span class="hljs-comment"># æ’åºåï¼š2,2,3,4,4,5</span>
    <span class="hljs-string">'col2'</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>]  <span class="hljs-comment"># æ’åºåï¼š0,1,2,2,3,4</span>
})
df.median()
<span class="hljs-comment"># col1    3.5ï¼Œ3å’Œ4ä¹‹é—´å°±æ˜¯3.5</span>
<span class="hljs-comment"># col2    2.0 # ä¸¤ä¸ªä¸€æ ·å°±æ˜¯ 2</span>
<span class="hljs-comment"># dtype: float64</span>
</code></pre>
<p>å¦‚æœä¸æ˜¯å¶æ•°ï¼Œæ˜¯å¥‡æ•°ï¼Œç›´æ¥å–ä¸­é—´çš„æ•°å­—</p>
<pre><code class="hljs language-py" lang="py">df = pd.DataFrame({
    <span class="hljs-string">'col1'</span>: [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">10</span>], <span class="hljs-comment"># æ’åºåï¼š2,2,3,4,4,5,10</span>
    <span class="hljs-string">'col2'</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">10</span>]  <span class="hljs-comment"># æ’åºåï¼š0,1,2,2,3,4,10</span>
})
<span class="hljs-comment"># æ±‚ä¸­ä½æ•°</span>
df.median()
<span class="hljs-comment"># col1    4.0</span>
<span class="hljs-comment"># col2    2.0</span>
<span class="hljs-comment"># dtype: float64</span>

<span class="hljs-comment"># æ±‚æœ€å¤§å€¼ä½ç½®ï¼Œæ‰¾å‡ºè¡Œ ç´¢å¼•</span>
df.idxmax()
<span class="hljs-comment"># df.idxmax(1) # å¦‚æœæ˜¯1æ²¡æœ‰æ„ä¹‰ï¼Œæ±‚å‡ºæ¥çš„æ˜¯åˆ—å</span>
<span class="hljs-comment"># col1    6</span>
<span class="hljs-comment"># col2    6</span>
<span class="hljs-comment"># dtype: int64</span>
</code></pre>
<h3 data-id="heading-35">ç´¯åŠ å’Œå‡½æ•°</h3>
<p>å·²çŸ¥ sd æ•°æ®ä¸º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cf8cd43a2c749569243ccf5622cfa74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=m4vU9P5dKwjsL0%2F29HfinHnjoIA%3D" alt="image.png" loading="lazy"/></p>
<p>è®¡ç®—æ¯åˆ—çš„ç´¯åŠ å’Œ</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æ±‚æ¯åˆ—ç´¯åŠ å’Œ</span>
sd.cumsum()
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ae3e824e5f24a359ad22eee18e4d28d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=uq18T2KJZzztXBNmOSzyCDaCH6U%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># è®¡ç®— open åˆ—</span>
sd.<span class="hljs-built_in">open</span>.cumsum()
<span class="hljs-comment"># ç»˜åˆ¶æ‰€æœ‰åˆ—çš„å¯è§†åŒ–å›¾</span>
sd.cumsum().plot()
</code></pre>
<h3 data-id="heading-36">apply å‡½æ•°æ‰§è¡Œè‡ªå®šä¹‰å‡½æ•°</h3>
<p>apply(å‡½æ•°å¯¹è±¡ï¼Œaxis=0)</p>
<p>æ‰§è¡Œè‡ªå®šä¹‰å‡½æ•°ï¼ŒæŒ‰è¡Œ 1 æˆ–è€… æŒ‰åˆ— 0  ä¼ å…¥æ•°æ®ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æ±‚æ¯è¡Œçš„æœ€å¤§å€¼</span>
sd.apply(<span class="hljs-keyword">lambda</span> col: col.<span class="hljs-built_in">max</span>(), axis=<span class="hljs-number">0</span>)
<span class="hljs-comment"># æ±‚æ¯è¡Œçš„æœ€å°å€¼</span>
sd.apply(<span class="hljs-keyword">lambda</span> col: col.<span class="hljs-built_in">max</span>(), axis=<span class="hljs-number">0</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3b05c736067411196b43d64e5e377dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=xqY08RI2VR3XRNm8HsN%2FpJkUh3w%3D" alt="image.png" loading="lazy"/></p>
<p>ä»¥è¡Œçš„æ–¹å¼ä¼ å…¥</p>
<pre><code class="hljs language-py" lang="py">sd.apply(<span class="hljs-keyword">lambda</span> row: row.<span class="hljs-built_in">max</span>(), axis=<span class="hljs-number">1</span>)
</code></pre>
<h3 data-id="heading-37">è¯»å†™æ–‡ä»¶</h3>
<p>csv æ˜¯ä»¥é€—å·åˆ†éš”ï¼Œtsv æ˜¯ä»¥ Tab åˆ†å‰²ã€‚</p>
<blockquote>
<p>è¯»å– CSV</p>
</blockquote>
<ul>
<li>index_colï¼šè®¾ç½®ç´¢å¼•åˆ—</li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># è¯»å–æ‰€æœ‰åˆ—</span>
sd = pd.read_csv(<span class="hljs-string">'./stock_day.csv'</span>)
<span class="hljs-comment"># åŠ è½½æŒ‡å®šåˆ—</span>
sd = pd.read_csv(<span class="hljs-string">'./stock_day.csv'</span>, usecols=[<span class="hljs-string">'high'</span>, <span class="hljs-string">'low'</span>])
</code></pre>
<blockquote>
<p>å†™å…¥ csv</p>
</blockquote>
<ul>
<li>indexï¼šæ˜¯å¦å°†ç´¢å¼•å†™å…¥ï¼Œé»˜è®¤True</li>
<li>headerï¼šæ˜¯å¦å°†è¡¨å¤´å†™å…¥ï¼Œé»˜è®¤True</li>
</ul>
<pre><code class="hljs language-py" lang="py">sd.to_csv(<span class="hljs-string">'./testHead10.csv'</span>, index=<span class="hljs-literal">True</span>, header=<span class="hljs-literal">True</span>)
</code></pre>
<blockquote>
<p>è¯»å– TSV</p>
</blockquote>
<ul>
<li>columnsï¼šæŒ‡å®šå†™å‡ºçš„åˆ—</li>
<li>sepï¼šæŒ‰ \t åˆ†å‰²</li>
<li>mode='a'ï¼šè¡¨ç¤ºè¿½åŠ </li>
</ul>
<pre><code class="hljs language-py" lang="py">sd.to_csv(<span class="hljs-string">'./testHead10.tsv'</span>, sep=<span class="hljs-string">'\t'</span>, columns=[<span class="hljs-string">'low'</span>])
</code></pre>
<h3 data-id="heading-38">è¯»å†™ SQL</h3>
<p>åˆ›å»ºå¼•æ“å¯¹è±¡</p>
<ul>
<li>mysql+pymysqlï¼šè¦æ“ä½œçš„æ•°æ®åº“ï¼Œå…·ä½“ç”¨çš„åŒ…</li>
<li>root:123456ï¼šè¦æ“ä½œçš„æ•°æ®åº“çš„è´¦å·å’Œå¯†ç </li>
<li>localhost:3306ï¼šæ•°æ®åº“çš„IPå’Œç«¯å£</li>
<li>my_projectï¼šæ•°æ®åº“è¡¨</li>
<li>charsetï¼šç è¡¨</li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># å¯¼åŒ…</span>
<span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> create_engine
engine =  create_engine(<span class="hljs-string">'mysql+pymysql://root:123456@localhost:3306/my_project?charset=utf8'</span>)
<span class="hljs-comment"># Engine(mysql+pymysql://root:***@localhost:3306/my_project?charset=utf8)</span>
</code></pre>
<blockquote>
<p>å†™å…¥</p>
</blockquote>
<ul>
<li>å‚æ•°ä¸€ï¼šå¯¼å…¥çš„sqlè¡¨å</li>
<li>å‚æ•°äºŒï¼šè¿æ¥å¯¹è±¡</li>
<li>å‚æ•°ä¸‰ï¼šæ˜¯å¦åŒ…å«ç´¢å¼•</li>
<li>å‚æ•°å››ï¼šå¯¼å…¥æ¨¡å¼ï¼ˆå¦‚æœè¡¨åå­˜åœ¨ï¼‰ï¼Œfail/æŠ¥é”™, replace/è¦†ç›–ï¼Œappend/è¿½åŠ </li>
</ul>
<pre><code class="hljs language-py" lang="py">sd = pd.read_csv(<span class="hljs-string">'./csvç¤ºä¾‹æ–‡ä»¶.csv'</span>, encoding=<span class="hljs-string">'GBK'</span>, index_col=<span class="hljs-number">0</span>)
sd.to_sql(<span class="hljs-string">'person_info'</span>, engine, index=<span class="hljs-literal">False</span>, if_exists=<span class="hljs-string">'replace'</span>)
</code></pre>
<blockquote>
<p>è¯»å…¥</p>
</blockquote>
<ul>
<li>å‚æ•°ä¸€ï¼šsqlè¯­å¥</li>
<li>å‚æ•°äºŒï¼šå¼•æ“å¯¹è±¡</li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> create_engine
engine =  create_engine(<span class="hljs-string">'mysql+pymysql://root:123456@localhost:3306/my_project?charset=utf8'</span>)
pd.read_sql(<span class="hljs-string">'select * from person_info'</span>, engine)
</code></pre>
<h3 data-id="heading-39">æ•°æ®è½¬JSON</h3>
<ul>
<li>ensure_asciiï¼šæ˜¯å¦å°†ä¸­æ–‡è½¬æ¢ä¸º ASCII ç </li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> json
<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªå­—å…¸ </span>
dict_data = {<span class="hljs-string">'name'</span>: <span class="hljs-string">'ä¹”å³°'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">38</span>, <span class="hljs-string">'sex'</span>: <span class="hljs-string">'ç”·'</span>}

<span class="hljs-comment"># å°†å­—å…¸è½¬ä¸ºJSON</span>
json2 = json.dumps(dict_data, ensure_ascii=<span class="hljs-literal">False</span>)

<span class="hljs-comment"># å°† JSON è½¬æ¢ä¸º å­—å…¸</span>
newDict = json.loads(json2)
</code></pre>
<h3 data-id="heading-40">è¯»å–JSONæ–‡ä»¶</h3>
<p>é¦–å…ˆ json æ–‡ä»¶æ˜¯å¦‚ä¸‹</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¹”å³°"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">38</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"sex"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”·"</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¹”å³°2"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">39</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"sex"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”·"</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¹”å³°3"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">40</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"sex"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”·"</span><span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>å‚æ•°ä¸€ï¼šæ˜¯è·¯å¾„</li>
<li>å‚æ•°äºŒï¼šæ˜¯è¯»å–æ–¹å¼ï¼Œè¡¨ç¤ºæ¯ä¸ªå¯¹è±¡æ˜¯ä¸€è¡Œ
<ul>
<li>recordsï¼šæ¯ä¸ªå¯¹è±¡ä¸€è¡Œ</li>
<li>columnsï¼šä»¥åˆ—ä¸ºä¸»</li>
<li>indexï¼šä»¥ç´¢å¼•ä¸ºä¸»</li>
</ul>
</li>
<li>å‚æ•°ä¸‰ï¼šæ˜¯ä¸€è¡Œä¸€è¡Œçš„è¯»å–</li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
pd.read_json(<span class="hljs-string">'./my.json'</span>, orient=<span class="hljs-string">'records'</span>, lines=<span class="hljs-literal">True</span>)
</code></pre>
<h3 data-id="heading-41">å†™å…¥ JSON æ–‡ä»¶</h3>
<p>å·²çŸ¥æ•°æ®æ˜¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b50c47543db4622996fd78d6920f418~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=riGZlvYIbUerlpW6VkCnuIw3ZEs%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
df.to_json(<span class="hljs-string">'./my_to.json'</span>)
<span class="hljs-comment"># æ•ˆæœåŒä¸Š</span>
df.to_json(<span class="hljs-string">'./my_to.json'</span>, orient=<span class="hljs-string">'columns'</span>)
</code></pre>
<p>è½¬æ¢åæ˜¯
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75574631e44a4bcfb880c25e81784765~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=SSI2M%2FG77OdS%2FNMHcWMaTei5xfQ%3D" alt="image.png" loading="lazy"/></p>
<p>å¸Œæœ›æ˜¯æŒ‰è¡Œè¯»å–ï¼Œè¿”å›åˆ—è¡¨ orient='records'</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
df.to_json(<span class="hljs-string">'./my_to.json'</span>, orient=<span class="hljs-string">'records'</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be0ec92072674092a7bcb9383e21c4c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=l2MEZfTCi%2Ba5QPXemKVlrQV4odg%3D" alt="image.png" loading="lazy"/></p>
<p>å¸Œæœ›æ¯ä¸ªå¯¹è±¡ä¸€è¡Œä¸€è¡Œï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œlines = True</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
df.to_json(<span class="hljs-string">'./my_to.json'</span>, orient=<span class="hljs-string">'records'</span>, lines=<span class="hljs-literal">True</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d746ce7f57844592a3d1e8a004f1b951~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=Kk0HWiketX1rX%2F9kinduGIP0bT4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-42">DateFrame åˆ—æ“ä½œ</h3>
<p>å·²çŸ¥ sd æ•°æ®ä¸º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48fbd78536734f4e87a53892a4ddc2ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=8aAvkQ6PiNTIkBB%2FwKVAKdI8jgU%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¿™äº›éƒ½ä¼šä¿®æ”¹åŸå§‹æ•°æ®</strong></p>
<p>å¢åŠ  col1 åˆ—ï¼Œå€¼å…¨æ˜¯ 2</p>
<pre><code class="hljs language-py" lang="py">sd[<span class="hljs-string">'col1'</span>] = <span class="hljs-number">2</span>
</code></pre>
<p>å¢åŠ col2 åˆ—ï¼Œæ¯åˆ—æŒ‡å®šæ•°æ®ï¼Œè¿™ç§æ–¹å¼ï¼Œå‡è®¾è¯¥ DataFrameï¼Œæœ‰äº”åˆ—ï¼Œå°±åªèƒ½æŒ‡å®š 5 ä¸ªï¼Œå¦åˆ™ä¼šæŠ¥é”™</p>
<pre><code class="hljs language-py" lang="py">sd[<span class="hljs-string">'col2'</span>] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
</code></pre>
<p>è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–åˆ—è®¡ç®—</p>
<pre><code class="hljs language-py" lang="py">sd[<span class="hljs-string">'col3'</span>] = sd.year * <span class="hljs-number">2</span>
</code></pre>
<p><strong>ä¸ä¼šä¿®æ”¹åŸå§‹æ•°æ®çš„</strong></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æ·»åŠ ä¸€åˆ— cole = 1</span>
sd.assign(cole = <span class="hljs-number">1</span>)
sd.assign(cole = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>])
sd.assign(cole = sd.year * <span class="hljs-number">2</span>)
</code></pre>
<blockquote>
<p>ä½¿ç”¨ series å¯¹è±¡ä¼ å…¥ï¼Œå¦‚æœè¡Œæ•°å¯¹ä¸é½ï¼Œä½¿ç”¨ NAN å¡«å……</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
series = pd.Series([<span class="hljs-string">'æ®µå»¶åº†'</span>, <span class="hljs-string">'ç‹ä¼Ÿ'</span>, <span class="hljs-string">'å¶äºŒå¨˜'</span>, <span class="hljs-string">'ç‹å°è™'</span>])
sd.assign(col = series)
</code></pre>
<blockquote>
<p>ä½¿ç”¨å‡½æ•°</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun1</span>(<span class="hljs-params">df</span>):
    <span class="hljs-comment"># è¿”å›ç´¢å¼•</span>
    <span class="hljs-keyword">return</span> df.index.values

sd.assign(col = fun1)
</code></pre>
<blockquote>
<p>ä¸€æ¬¡æ·»åŠ å¤šä¸ªåˆ—</p>
</blockquote>
<pre><code class="hljs language-py" lang="py">sd.assign(
    col=<span class="hljs-number">2</span>, <span class="hljs-comment"># åˆ—1</span>
    col1=[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>] <span class="hljs-comment"># åˆ—2</span>
)
</code></pre>
<h4 data-id="heading-43">åˆ é™¤</h4>
<blockquote>
<p>åˆ é™¤è¡Œ</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># åˆ é™¤ç¬¬ 0 è¡Œï¼Œä¸ä¼šä¿®æ”¹æ•°æ®ï¼Œè¿™æ˜¯æ ¹æ®ç´¢å¼•</span>
sd.drop([<span class="hljs-number">0</span>])
<span class="hljs-comment"># æ•ˆæœåŒä¸Š</span>
sd.drop([<span class="hljs-number">0</span>], axis = <span class="hljs-number">0</span>)

<span class="hljs-comment"># åˆ é™¤å¤šè¡Œ</span>
sd.drop([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>])
</code></pre>
<blockquote>
<p>åˆ é™¤åˆ—</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># åˆ é™¤åˆ—</span>
sd.drop([<span class="hljs-string">'year'</span>, <span class="hljs-string">'col'</span>, <span class="hljs-string">'col1'</span>], axis=<span class="hljs-number">1</span>)
</code></pre>
<p>ä¿®æ”¹åŸæ•°æ®ï¼Œåˆ é™¤åˆ—</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">del</span> sd[<span class="hljs-string">'year'</span>]
</code></pre>
<h4 data-id="heading-44">å»é‡</h4>
<p><strong>dataframe çš„å»é‡</strong></p>
<p>å·²çŸ¥æ•°æ® sd æ•°æ®æ˜¯ 9930 è¡Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fd7435363544689b20b1c2793b2228e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=kgwcaS68pMDYfewfV0VZJhDlB4U%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æ‰§è¡Œå»é‡</span>
sd.drop_duplicates()
</code></pre>
<p><strong>serires çš„å»é‡</strong></p>
<p>å‡è®¾æœ‰ä¸ª s å˜é‡æ˜¯seriesç±»å‹</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># å»é‡</span>
s.unique()
<span class="hljs-comment"># å»é‡</span>
s.drop_duplicates()
</code></pre>
<h4 data-id="heading-45">ä¿®æ”¹</h4>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># ä¿®æ”¹df5ï¼Œçš„GDPåˆ—ä¸º 66ï¼Œä¸´æ—¶ä¿®æ”¹</span>
df5.assign(GDP=<span class="hljs-number">66</span>)
<span class="hljs-comment"># åŒä¸Š</span>
df5[<span class="hljs-string">'GDP'</span>] = [<span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>]
</code></pre>
<p>replace æ›¿æ¢</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># å°† sd2 çš„ year å­—æ®µçš„ 1960 ä¿®æ”¹ä¸º 2025</span>
sd2.year.replace(<span class="hljs-number">1960</span>, <span class="hljs-number">2025</span>)

<span class="hljs-comment"># æ›¿æ¢å¤šä¸ªå€¼ï¼Œæ–¹å¼ä¸€</span>
sd2.replace([<span class="hljs-number">1960</span>, <span class="hljs-string">'æ—¥æœ¬'</span>, <span class="hljs-string">'ä¸­å›½'</span>], [<span class="hljs-number">2025</span>, <span class="hljs-string">'é¬¼å­'</span>, <span class="hljs-string">'é¾™å›½'</span>])
<span class="hljs-comment"># å¤šä¸ªå€¼ï¼Œæ–¹å¼äºŒ</span>
sd2.replace({<span class="hljs-number">1960</span>: <span class="hljs-number">2025</span>, <span class="hljs-string">'æ—¥æœ¬'</span>: <span class="hljs-string">'é¬¼å­'</span>, <span class="hljs-string">'ä¸­å›½'</span>: <span class="hljs-string">'é¾™å›½'</span>})
</code></pre>
<h3 data-id="heading-46">æŸ¥è¯¢dataFrameä¸­çš„æ•°æ®</h3>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># é»˜è®¤å–å‰5è¡Œæ•°æ®</span>
df.head()
df.head(<span class="hljs-number">10</span>) <span class="hljs-comment"># å–å‰10è¡Œ</span>

<span class="hljs-comment"># é»˜è®¤å–å5è¡Œæ•°æ®</span>
df.tail()
df.tail(<span class="hljs-number">15</span>) <span class="hljs-comment"># å€’æ•°15è¡Œ</span>
</code></pre>
<blockquote>
<p>è·å–ä¸€åˆ—æˆ–å¤šåˆ—æ•°æ®</p>
</blockquote>
<pre><code class="hljs language-py" lang="py">df[<span class="hljs-string">'country'</span>]
df.country
df[[<span class="hljs-string">'country'</span>, <span class="hljs-string">'GDP'</span>]] <span class="hljs-comment"># è¿”å›æ–°çš„df</span>
</code></pre>
<blockquote>
<p>ç´¢å¼•ä¸‹æ ‡åˆ‡ç‰‡å–è¡Œ</p>
</blockquote>
<p>æ ¼å¼ï¼š<code>df[start:stop:step]</code></p>
<pre><code class="hljs language-py" lang="py">df[:<span class="hljs-number">3</span>] <span class="hljs-comment"># å–å‰3è¡Œ</span>
df[:<span class="hljs-number">5</span>:<span class="hljs-number">2</span>] <span class="hljs-comment"># å–å‰5è¡Œï¼Œæ­¥é•¿ä¸º2</span>
df[<span class="hljs-number">1</span>::<span class="hljs-number">3</span>] <span class="hljs-comment"># å–ç¬¬2è¡Œåˆ°æœ€åæ‰€æœ‰è¡Œï¼Œæ­¥é•¿ä¸º3</span>
</code></pre>
<blockquote>
<p>æŸ¥æ‰¾æ•°æ®</p>
</blockquote>
<pre><code class="hljs language-py" lang="py">df.query(<span class="hljs-string">'country=="å¸•åŠ³"'</span>)
df[df[<span class="hljs-string">'country'</span>]==<span class="hljs-string">'å¸•åŠ³'</span>]
</code></pre>
<p><strong>å¤šæ¡ä»¶æŸ¥è¯¢</strong></p>
<pre><code class="hljs language-py" lang="py">df.query(<span class="hljs-string">'country=="ä¸­å›½" or country=="æ—¥æœ¬" or country=="ç¾å›½"'</span>).query(<span class="hljs-string">'year in ["2015", "2016", "2017", "2018", "2019"]'</span>)
df.query(<span class="hljs-string">'(country=="ä¸­å›½" or country=="æ—¥æœ¬" or country=="ç¾å›½") and year in ["2015", "2016", "2017", "2018", "2019"]'</span>)
</code></pre>
<h3 data-id="heading-47">æ’åºå‡½æ•°</h3>
<p>å·²çŸ¥ sd æ•°æ®ä¸º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3a068a249324e658e6b4f92841003a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=ciSrSSLADX3vaC9D30IIwap9EQ4%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æ ¹æ®ç´¢å¼•æ’åºï¼Œé»˜è®¤å‡åºï¼Œ ascending è®¾ç½®ä¸ºfalse ï¼Œé™åº</span>
sd.sort_index(ascending=<span class="hljs-literal">False</span>)
<span class="hljs-comment"># æŒ‰ç…§å­—æ®µæ’åºï¼Œé»˜è®¤å‡åºï¼Œascending è®¾ç½® Falseï¼Œé™åº</span>
sd.sort_values(<span class="hljs-string">'GDP'</span>, ascending=<span class="hljs-literal">False</span>)
<span class="hljs-comment"># å¦‚æœyearä¸€æ ·ï¼ŒæŒ‰ç…§GDPæ’åºï¼Œé™åºæ’åº</span>
sd.sort_values([<span class="hljs-string">'year'</span>, <span class="hljs-string">'GDP'</span>], ascending=<span class="hljs-literal">False</span>)
<span class="hljs-comment"># å¦‚æœyearä¸€æ ·ï¼ŒæŒ‰ç…§GDPæ’åºï¼Œyear æ˜¯é™åºæ’åºï¼ŒGDP æ˜¯å‡åºæ’åº</span>
sd.sort_values([<span class="hljs-string">'year'</span>, <span class="hljs-string">'GDP'</span>], ascending=[<span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>])
</code></pre>
<blockquote>
<p>æ’åå‡½æ•°ï¼Œrank</p>
</blockquote>
<p>å®šä¹‰æ•°æ®</p>
<pre><code class="hljs language-py" lang="py">df = pd.DataFrame({
    <span class="hljs-string">'å§“å'</span>: [<span class="hljs-string">'å°æ˜'</span>, <span class="hljs-string">'å°ç¾'</span>, <span class="hljs-string">'å°å¼º'</span>, <span class="hljs-string">'å°å…°'</span>],
    <span class="hljs-string">'æˆç»©'</span>: [<span class="hljs-number">100</span>, <span class="hljs-number">90</span>, <span class="hljs-number">90</span>, <span class="hljs-number">80</span>]
})
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/346ebebee08043de823be823b2bc5d2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=ajmexwask3iysxC4kEiNcYS216o%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æŒ‰ç…§æ’åï¼Œé™åºæ’åºï¼Œè¯„åˆ†ä¸€è‡´ï¼Œå–å¹³å‡å€¼</span>
df.rank(ascending=<span class="hljs-literal">False</span>)
df.rank(ascending=<span class="hljs-literal">False</span>, method=<span class="hljs-string">'average'</span>)
<span class="hljs-comment"># è¯„åˆ†ä¸€è‡´ï¼Œå–æœ€å°å€¼</span>
df.rank(ascending=<span class="hljs-literal">False</span>, method=<span class="hljs-string">'min'</span>)
<span class="hljs-comment"># è¯„åˆ†ä¸€è‡´ï¼Œå–æœ€å¤§å€¼</span>
df.rank(ascending=<span class="hljs-literal">False</span>, method=<span class="hljs-string">'max'</span>)
<span class="hljs-comment"># è¯„åˆ†ä¸€è‡´ï¼Œæ•°å€¼ç›¸åŒï¼Œå®Œå…¨ç­‰ä»·äºSQLä¸­çš„dense_rank()ï¼Œå®Œå…¨ç­‰äº minå‡½æ•°</span>
df.rank(ascending=<span class="hljs-literal">False</span>, method=<span class="hljs-string">'dense'</span>)
</code></pre>
<h3 data-id="heading-48">ç¼ºå¤±å€¼å¤„ç†</h3>
<p>å·²çŸ¥ sd æ•°æ®ä¸º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fc8895bf35340dbaf0f10f5eca7c081~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=SP5abdEvJCHFZGl1GpZh6zzVEyI%3D" alt="image.png" loading="lazy"/></p>
<p>æŸ¥çœ‹ä¿¡æ¯</p>
<pre><code class="hljs language-py" lang="py">sd.info()

<span class="hljs-comment"># &lt;class 'pandas.core.frame.DataFrame'&gt;</span>
<span class="hljs-comment"># RangeIndex: 1000 entries, 0 to 999 # æœ‰ 0 ~ 999 è¡Œæ•°æ®</span>
<span class="hljs-comment"># Data columns (total 12 columns):</span>
<span class="hljs-comment">#  #   Column              Non-Null Count  Dtype  </span>
<span class="hljs-comment"># ---  ------              --------------  -----  </span>
<span class="hljs-comment">#  0   Rank                1000 non-null   int64  </span>
<span class="hljs-comment">#  1   Title               1000 non-null   object </span>
<span class="hljs-comment">#  2   Genre               1000 non-null   object </span>
<span class="hljs-comment">#  3   Description         1000 non-null   object </span>
<span class="hljs-comment">#  4   Director            1000 non-null   object </span>
<span class="hljs-comment">#  5   Actors              1000 non-null   object </span>
<span class="hljs-comment">#  6   Year                1000 non-null   int64  </span>
<span class="hljs-comment">#  7   Runtime (Minutes)   1000 non-null   int64  </span>
<span class="hljs-comment">#  8   Rating              1000 non-null   float64</span>
<span class="hljs-comment">#  9   Votes               1000 non-null   int64  </span>
<span class="hljs-comment">#  10  Revenue (Millions)  872 non-null    float64 # 872è¡Œéç©º</span>
<span class="hljs-comment">#  11  Metascore           936 non-null    float64 # 936è¡Œéç©º</span>
<span class="hljs-comment"># dtypes: float64(3), int64(4), object(5)</span>
<span class="hljs-comment"># memory usage: 93.9+ KB</span>
</code></pre>
<blockquote>
<p>åˆ¤æ–­ç¼ºå¤±å€¼</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment"># æ‰“å°çš„åˆ—è¡¨æœ‰ true çš„å°±æ˜¯ç©ºå€¼</span>
sd.isnull()
<span class="hljs-comment"># æ‰“å°çš„åˆ—è¡¨æœ‰ true çš„æ˜¯éç©ºå€¼</span>
sd.notnull()
<span class="hljs-comment"># æ‰“å°ç¼ºå¤±å€¼çš„ä¸ªæ•°</span>
sd.isnull().<span class="hljs-built_in">sum</span>()
<span class="hljs-comment"># æ‰“å°éç¼ºå¤±å€¼çš„ä¸ªæ•°</span>
sd.notnull().<span class="hljs-built_in">sum</span>()
<span class="hljs-comment"># ä½¿ç”¨ numpy çš„allæ–¹æ³•ï¼Œåˆ¤æ–­æ˜¯å¦å…¨éƒ¨ä¸ä¸ºç©ºï¼Œæœ‰ä¸€ä¸ªå°± false</span>
np.<span class="hljs-built_in">all</span>(sd.notnull())
</code></pre>
<blockquote>
<p>åˆ é™¤ç¼ºå¤±å€¼</p>
</blockquote>
<p>æ¯”å¦‚ï¼ŒA å­—æ®µ å’Œ B å­—æ®µï¼ŒBå­—æ®µä¸ºç©ºï¼Œé‚£ä¹ˆå³ä½¿Aå­—æ®µä¸ä¸ºç©ºï¼Œä¹Ÿä¼šåˆ é™¤ã€‚</p>
<p>ä½†æ˜¯ç´¢å¼•ä¼šç•™ä¸‹ï¼Œæ¯”å¦‚åˆ é™¤äº† 8 è¡Œï¼Œé‚£ä¹ˆ 9 ç´¢å¼•ä¸ä¼šå¾€å‰é ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># åˆ é™¤è¡Œ</span>
sd.dropna()
<span class="hljs-comment"># åˆ é™¤åˆ—</span>
sd.dropna(axis=<span class="hljs-number">1</span>)
</code></pre>
<blockquote>
<p>å¡«å……ç¼ºå¤±å€¼</p>
</blockquote>
<p>æ ¹æ®å¹³å‡å€¼ï¼Œå¡«å……æ‰€æœ‰åˆ—ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># è®¡ç®—å¹³å‡å€¼</span>
avg = sd[<span class="hljs-string">'Revenue (Millions)'</span>].mean()
<span class="hljs-comment"># æ‰§è¡Œå¡«å……</span>
sd.fillna(avg, inplace=<span class="hljs-literal">True</span>)
</code></pre>
<blockquote>
<p>å¾ªç¯éå†ï¼Œæ˜¯å¦å­˜åœ¨ç¼ºå¤±å€¼ï¼Œç”¨æ¯åˆ—çš„å¹³å‡å€¼å¡«å……æ¯åˆ—</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">for</span> col_name <span class="hljs-keyword">in</span> sd:
    <span class="hljs-comment"># åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¼ºå¤±å€¼</span>
    <span class="hljs-keyword">if</span> sd[col_name].isnull().<span class="hljs-built_in">sum</span>() &gt; <span class="hljs-number">0</span>:
        <span class="hljs-comment"># è®¡ç®—æ¯åˆ—å¹³å‡å€¼</span>
        mean_value = sd[col_name].mean()
        <span class="hljs-comment"># å¡«å……ç»™æ¯åˆ—</span>
        sd[col_name] = sd[col_name].fillna(mean_value)
</code></pre>
<blockquote>
<p>å¦‚æœè¡¨ç¤ºç©ºçš„ä¸æ˜¯NaNå‘¢ï¼Œé‚£è¯¥æ€ä¹ˆå¤„ç†</p>
</blockquote>
<p>å·²çŸ¥æ•°æ®é›†ä¸­ä½¿ç”¨çš„æ˜¯ ? å·ä½œä¸ºç©ºå€¼ï¼Œå¤„ç†é€»è¾‘æ˜¯ï¼šå…ˆè¿›è¡Œæ›´æ¢æˆ nanï¼Œå†è¿›è¡Œåˆ é™¤</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># åŠ è½½æ•°æ®</span>
wis = pd.read_csv(<span class="hljs-string">"https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.data"</span>)
<span class="hljs-comment"># å°†é—®å·æ›¿æ¢ä¸ºç©º</span>
wis.replace(<span class="hljs-string">'?'</span>, np.nan, inplace=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># è¿›è¡Œåˆ é™¤</span>
wis.dropna(inplace=<span class="hljs-literal">True</span>)
</code></pre>
<h3 data-id="heading-49">æ•°æ®åˆå¹¶</h3>
<p><strong>concat å¯ä»¥åˆå¹¶å¤šä¸ª DataFrame å¯¹è±¡ï¼Œå¯ä»¥è¡Œä¹Ÿå¯ä»¥åˆ—åˆå¹¶</strong></p>
<p>å·²çŸ¥æ•°æ®å¦‚ä¸‹</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
left = pd.DataFrame({<span class="hljs-string">'key1'</span>: [<span class="hljs-string">'K0'</span>, <span class="hljs-string">'K0'</span>, <span class="hljs-string">'K1'</span>, <span class="hljs-string">'K2'</span>],
                     <span class="hljs-string">'key2'</span>: [<span class="hljs-string">'K0'</span>, <span class="hljs-string">'K1'</span>, <span class="hljs-string">'K0'</span>, <span class="hljs-string">'K1'</span>],
                     <span class="hljs-string">'A'</span>: [<span class="hljs-string">'A0'</span>, <span class="hljs-string">'A1'</span>, <span class="hljs-string">'A2'</span>, <span class="hljs-string">'A3'</span>],
                     <span class="hljs-string">'B'</span>: [<span class="hljs-string">'B0'</span>, <span class="hljs-string">'B1'</span>, <span class="hljs-string">'B2'</span>, <span class="hljs-string">'B3'</span>]})

right = pd.DataFrame({<span class="hljs-string">'key1'</span>: [<span class="hljs-string">'K0'</span>, <span class="hljs-string">'K1'</span>, <span class="hljs-string">'K1'</span>, <span class="hljs-string">'K2'</span>],
                      <span class="hljs-string">'key2'</span>: [<span class="hljs-string">'K0'</span>, <span class="hljs-string">'K0'</span>, <span class="hljs-string">'K0'</span>, <span class="hljs-string">'K0'</span>],
                      <span class="hljs-string">'C'</span>: [<span class="hljs-string">'C0'</span>, <span class="hljs-string">'C1'</span>, <span class="hljs-string">'C2'</span>, <span class="hljs-string">'C3'</span>],
                      <span class="hljs-string">'D'</span>: [<span class="hljs-string">'D0'</span>, <span class="hljs-string">'D1'</span>, <span class="hljs-string">'D2'</span>, <span class="hljs-string">'D3'</span>]})
</code></pre>
<blockquote>
<p>left</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0856721b3fcc4e91957ec41e97a42316~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=yniykAU6UpHB2ur6bL9ENbbcRyY%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>right</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/322ab8a02ebb42df80b313c5eb4bc47f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=KwqlQLzno2iu2pC6PeSVH2mP07M%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>åˆå¹¶ç»“æœ</p>
</blockquote>
<ul>
<li>åˆ—åä¸€æ ·ï¼Œåˆ—åˆå¹¶</li>
<li>åˆ—åä¸ä¸€æ ·ï¼Œè¡Œåˆå¹¶</li>
<li>é»˜è®¤æ˜¯çºµå‘åˆå¹¶</li>
</ul>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
pd.concat([left, right])
<span class="hljs-comment"># åŒä¸Š</span>
<span class="hljs-comment"># pd.concat([left, right], axis=0)</span>
</code></pre>
<p>ä¸Šè¿°ä¼šå‘ç°ï¼Œç´¢å¼•å±…ç„¶å‡ºç°äº†é‡å¤ï¼Œå»é™¤ç´¢å¼•é‡å¤ï¼Œå¿½ç•¥ç´¢å¼•</p>
<pre><code class="hljs language-py" lang="py">pd.concat([left, right], axis=<span class="hljs-number">0</span>, ignore_index=<span class="hljs-literal">True</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/444b4501dd4f4e738eda491fed37bcef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=KIbygPuWEKrWrbIZwoiZajTS9t4%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ—åˆå¹¶å‘¢ï¼Œç›´æ¥å¾€åé¢å †å å°±å¯ä»¥ï¼Œä½†æ˜¯ä¼šå‚è€ƒè¡Œç´¢å¼•</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
pd.concat([left, right], axis=<span class="hljs-number">1</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f616017cd4a949759ebcdfbac6d3179d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=TfZKzX3nZKH7e%2BaMSUUdza94K3c%3D" alt="image.png" loading="lazy"/></p>
<p>è¡Œç´¢å¼•ä¸ä¸€è‡´æ¼”ç¤ºï¼Œä¼šä½¿ç”¨ç©ºå¡«å……</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
pd.concat([left, right], axis=<span class="hljs-number">1</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40a580db36174ddf88f5ab175f328d26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=YHhDf%2BkljYqP%2BayN3NyiPwFPg1s%3D" alt="image.png" loading="lazy"/></p>
<p><strong>merge</strong></p>
<p>åªèƒ½ä¸¤ä¸ªä¸¤ä¸ªåˆå¹¶</p>
<ul>
<li>å‚æ•°1ï¼šç¬¬ä¸€ä¸ªdfå¯¹è±¡</li>
<li>å‚æ•°2ï¼šç¬¬äºŒä¸ªdfå¯¹è±¡</li>
<li>å‚æ•°3ï¼šhow è¿æ¥æ–¹å¼
<ul>
<li>left å·¦å¤–è¿æ¥ï¼Œ</li>
<li>right å³å¤–è¿æ¥</li>
<li>inner å†…è¿æ¥</li>
<li>outer å…¨è¿æ¥ï¼Œæ»¡å¤–è¿æ¥</li>
</ul>
</li>
<li>å‚æ•°4ï¼šon å…³è”å­—æ®µï¼Œè¡¨ç¤ºå‚è€ƒè°åˆå¹¶</li>
</ul>
<blockquote>
<p>å·¦å¤–è¿æ¥</p>
</blockquote>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
pd.merge(left, right, how=<span class="hljs-string">'left'</span>, on=[<span class="hljs-string">'key1'</span>])
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b321da93de3d4d5784e0ba4848406021~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=61f6C0M%2BFawWL0WizInL%2FzCVJUs%3D" alt="image.png" loading="lazy"/></p>
<p>ç»“æœ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5419cf5298449be89ff6143fb75f7c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141881&amp;x-signature=ZqMnyqyurTJEKX9bNXNrQaTrMT4%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>å³è¿æ¥</p>
</blockquote>
<p>ä¹Ÿæ˜¯æŒ‰ç…§å³è¡¨ï¼Œå»ä¸€ä¸€çš„æ‰¾ï¼Œæ‰¾ä¸åˆ°å°±ä¸¢å¼ƒå·¦è¡¨çš„ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
pd.merge(left, right, how=<span class="hljs-string">'right'</span>, on=[<span class="hljs-string">'key1'</span>, <span class="hljs-string">'key2'</span>])
</code></pre>
<blockquote>
<p>å†…è¿æ¥ï¼ŒåŸºäºå·¦å³è¡¨å…¨æœ‰</p>
</blockquote>
<pre><code class="hljs language-py" lang="py">pd.merge(left, right, how=<span class="hljs-string">'inner'</span>, on=[<span class="hljs-string">'key1'</span>, <span class="hljs-string">'key2'</span>])
</code></pre>
<blockquote>
<p>å…¨è¿æ¥</p>
</blockquote>
<p>ä¼šåŸºäºå·¦è¡¨çš„å…¨éƒ¨å’Œå³è¡¨çš„å…¨éƒ¨</p>
<pre><code class="hljs language-py" lang="py">pd.merge(left, right, how=<span class="hljs-string">'outer'</span>, on=[<span class="hljs-string">'key1'</span>, <span class="hljs-string">'key2'</span>])
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ131ï¼‰Redisçš„æ•´æ•°é›†åˆï¼ˆIntsetï¼‰æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7573525927793868826</link>    <guid>https://juejin.cn/post/7573525927793868826</guid>    <pubDate>2025-11-17T23:03:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573525927793868826" data-draft-id="7573519273030680622" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ131ï¼‰Redisçš„æ•´æ•°é›†åˆï¼ˆIntsetï¼‰æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-17T23:03:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ131ï¼‰Redisçš„æ•´æ•°é›†åˆï¼ˆIntsetï¼‰æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-17T23:03:10.000Z" title="Mon Nov 17 2025 23:03:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•´æ•°é›†åˆï¼ˆIntsetï¼‰æ˜¯Redisä¸­çš„ä¸€ç§ç´§å‡‘å‹æ•°æ®ç»“æ„ï¼Œä¸“é—¨ç”¨äºå­˜å‚¨æ•´æ•°é›†åˆã€‚è¿™ç§é›†åˆé€šè¿‡æ•°ç»„ä¿å­˜æ•°æ®ï¼Œå¹¶æ ¹æ®éœ€è¦åŠ¨æ€è°ƒæ•´æ•°ç»„çš„å¤§å°å’Œæ•´æ•°çš„å­˜å‚¨æ ¼å¼ï¼ˆ16ä½ã€32ä½æˆ–64ä½ï¼‰ï¼Œä»è€Œå®ç°é«˜æ•ˆçš„å­˜å‚¨å’ŒæŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-0">ä¸»è¦ç»“æ„</h3>
<p>æ•´æ•°é›†åˆçš„åŸºæœ¬ç»“æ„åŒ…æ‹¬ä¸€ä¸ªå¤´éƒ¨å’Œä¸€ä¸ªæ•´æ•°æ•°ç»„ã€‚å¤´éƒ¨åŒ…å«äº†æ•´æ•°é›†åˆçš„å…ƒæ•°æ®ï¼Œå¦‚ç¼–ç æ–¹å¼ã€å…ƒç´ æ•°é‡ç­‰ã€‚æ•°ç»„éƒ¨åˆ†åˆ™ç”¨äºå­˜å‚¨å®é™…çš„æ•´æ•°æ•°æ®ã€‚</p>
<h4 data-id="heading-1">å¤´éƒ¨ç»“æ„</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">intset</span> {</span>
    <span class="hljs-type">uint32_t</span> encoding;   <span class="hljs-comment">// ç¼–ç æ–¹å¼ï¼šè¡¨ç¤ºå½“å‰ä½¿ç”¨çš„æ•´æ•°ç±»å‹ï¼ˆ16ä½ã€32ä½æˆ–64ä½ï¼‰</span>
    <span class="hljs-type">uint32_t</span> length;     <span class="hljs-comment">// é›†åˆä¸­çš„å…ƒç´ æ•°é‡</span>
    <span class="hljs-type">int8_t</span> contents[];   <span class="hljs-comment">// æ•´æ•°æ•°ç»„ï¼Œå®é™…å­˜å‚¨æ•°æ®çš„åœ°æ–¹</span>
} intset;
</code></pre>
<h3 data-id="heading-2">ä¸»è¦æ“ä½œ</h3>
<h4 data-id="heading-3">1. åˆ›å»ºæ•´æ•°é›†åˆ</h4>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„æ•´æ•°é›†åˆå¹¶åˆå§‹åŒ–ã€‚</p>
<pre><code class="hljs language-c" lang="c">intset *<span class="hljs-title function_">intsetNew</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    intset *is = zmalloc(<span class="hljs-keyword">sizeof</span>(intset));
    is-&gt;encoding = intrev32ifbe(INTSET_ENC_INT16);  <span class="hljs-comment">// é»˜è®¤ç¼–ç æ–¹å¼ä¸º16ä½æ•´æ•°</span>
    is-&gt;length = <span class="hljs-number">0</span>;  <span class="hljs-comment">// åˆå§‹é›†åˆé•¿åº¦ä¸º0</span>
    <span class="hljs-keyword">return</span> is;
}
</code></pre>
<h4 data-id="heading-4">2. æŸ¥æ‰¾æ“ä½œ</h4>
<p>æŸ¥æ‰¾ä¸€ä¸ªæ•´æ•°æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">uint8_t</span> <span class="hljs-title function_">intsetFind</span><span class="hljs-params">(intset *is, <span class="hljs-type">int64_t</span> value)</span> {
    <span class="hljs-type">uint32_t</span> pos;
    <span class="hljs-keyword">if</span> (intsetSearch(is, value, &amp;pos)) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-type">int</span> <span class="hljs-title function_">intsetSearch</span><span class="hljs-params">(intset *is, <span class="hljs-type">int64_t</span> value, <span class="hljs-type">uint32_t</span> *pos)</span> {
    <span class="hljs-type">int</span> min = <span class="hljs-number">0</span>, max = intrev32ifbe(is-&gt;length) - <span class="hljs-number">1</span>, mid = <span class="hljs-number">-1</span>;
    <span class="hljs-type">int64_t</span> cur;
    <span class="hljs-keyword">if</span> (intrev32ifbe(is-&gt;length) == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (pos) *pos = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }

    <span class="hljs-keyword">while</span> (max &gt;= min) {
        mid = (min + max) / <span class="hljs-number">2</span>;
        cur = intsetGetEncoded(is, mid);
        <span class="hljs-keyword">if</span> (value &gt; cur) {
            min = mid + <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value &lt; cur) {
            max = mid - <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">break</span>;
        }
    }

    <span class="hljs-keyword">if</span> (value == cur) {
        <span class="hljs-keyword">if</span> (pos) *pos = mid;
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (pos) *pos = min;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
}
</code></pre>
<h4 data-id="heading-5">3. æ’å…¥æ“ä½œ</h4>
<p>å‘æ•´æ•°é›†åˆä¸­æ’å…¥ä¸€ä¸ªæ•´æ•°ã€‚æ ¹æ®éœ€è¦è°ƒæ•´ç¼–ç æ–¹å¼å¹¶é‡æ–°åˆ†é…å†…å­˜ã€‚</p>
<pre><code class="hljs language-c" lang="c">intset *<span class="hljs-title function_">intsetAdd</span><span class="hljs-params">(intset *is, <span class="hljs-type">int64_t</span> value, <span class="hljs-type">uint8_t</span> *success)</span> {
    <span class="hljs-type">uint8_t</span> valenc = _intsetValueEncoding(value);
    <span class="hljs-type">uint32_t</span> pos;
    <span class="hljs-keyword">if</span> (success) *success = <span class="hljs-number">1</span>;

    <span class="hljs-comment">// æŸ¥æ‰¾æ’å…¥ä½ç½®</span>
    <span class="hljs-keyword">if</span> (intsetSearch(is, value, &amp;pos)) {
        <span class="hljs-keyword">if</span> (success) *success = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">return</span> is;
    }

    <span class="hljs-comment">// å¦‚æœéœ€è¦æ›´å¤§çš„ç¼–ç æ ¼å¼</span>
    <span class="hljs-keyword">if</span> (valenc &gt; intrev32ifbe(is-&gt;encoding)) {
        <span class="hljs-keyword">return</span> intsetUpgradeAndAdd(is, value);
    }

    <span class="hljs-comment">// ä¸ºæ–°å…ƒç´ åˆ†é…ç©ºé—´</span>
    is = intsetResize(is, intrev32ifbe(is-&gt;length) + <span class="hljs-number">1</span>);

    <span class="hljs-comment">// ç§»åŠ¨å…ƒç´ ä»¥è…¾å‡ºæ’å…¥ä½ç½®</span>
    <span class="hljs-keyword">if</span> (pos &lt; intrev32ifbe(is-&gt;length)) {
        intsetMoveTail(is, pos, intrev32ifbe(is-&gt;length) - pos);
    }

    <span class="hljs-comment">// æ’å…¥æ–°å…ƒç´ </span>
    intsetSet(is, pos, value);
    is-&gt;length = intrev32ifbe(intrev32ifbe(is-&gt;length) + <span class="hljs-number">1</span>);

    <span class="hljs-keyword">return</span> is;
}

<span class="hljs-type">static</span> <span class="hljs-type">uint8_t</span> _intsetValueEncoding(<span class="hljs-type">int64_t</span> v) {
    <span class="hljs-keyword">if</span> (v &lt; INT32_MIN || v &gt; INT32_MAX) <span class="hljs-keyword">return</span> INTSET_ENC_INT64;
    <span class="hljs-keyword">if</span> (v &lt; INT16_MIN || v &gt; INT16_MAX) <span class="hljs-keyword">return</span> INTSET_ENC_INT32;
    <span class="hljs-keyword">return</span> INTSET_ENC_INT16;
}
</code></pre>
<h4 data-id="heading-6">4. åˆ é™¤æ“ä½œ</h4>
<p>ä»æ•´æ•°é›†åˆä¸­åˆ é™¤ä¸€ä¸ªæ•´æ•°ã€‚</p>
<pre><code class="hljs language-c" lang="c">intset *<span class="hljs-title function_">intsetRemove</span><span class="hljs-params">(intset *is, <span class="hljs-type">int64_t</span> value, <span class="hljs-type">int</span> *success)</span> {
    <span class="hljs-type">uint8_t</span> valenc = _intsetValueEncoding(value);
    <span class="hljs-type">uint32_t</span> pos;
    <span class="hljs-keyword">if</span> (success) *success = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">if</span> (valenc &lt;= intrev32ifbe(is-&gt;encoding) &amp;&amp; intsetSearch(is, value, &amp;pos)) {
        <span class="hljs-type">uint32_t</span> len = intrev32ifbe(is-&gt;length);

        <span class="hljs-comment">// ç§»åŠ¨å°¾éƒ¨å…ƒç´ ä»¥è¦†ç›–è¢«åˆ é™¤å…ƒç´ </span>
        <span class="hljs-keyword">if</span> (pos &lt; (len - <span class="hljs-number">1</span>)) {
            intsetMoveTail(is, pos + <span class="hljs-number">1</span>, len - (pos + <span class="hljs-number">1</span>));
        }
        is = intsetResize(is, len - <span class="hljs-number">1</span>);
        is-&gt;length = intrev32ifbe(len - <span class="hljs-number">1</span>);
        <span class="hljs-keyword">if</span> (success) *success = <span class="hljs-number">1</span>;
    }

    <span class="hljs-keyword">return</span> is;
}
</code></pre>
<h3 data-id="heading-7">è¾…åŠ©å‡½æ•°</h3>
<h4 data-id="heading-8">è·å–å’Œè®¾ç½®å…ƒç´ </h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">int64_t</span> <span class="hljs-title function_">intsetGetEncoded</span><span class="hljs-params">(intset *is, <span class="hljs-type">int</span> pos)</span> {
    <span class="hljs-type">int64_t</span> v64;
    <span class="hljs-type">int32_t</span> v32;
    <span class="hljs-type">int16_t</span> v16;
    <span class="hljs-type">uint32_t</span> encoding = intrev32ifbe(is-&gt;encoding);

    <span class="hljs-keyword">if</span> (encoding == INTSET_ENC_INT64) {
        <span class="hljs-built_in">memcpy</span>(&amp;v64, ((<span class="hljs-type">int64_t</span>*)is-&gt;contents) + pos, <span class="hljs-keyword">sizeof</span>(v64));
        <span class="hljs-keyword">return</span> intrev64ifbe(v64);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (encoding == INTSET_ENC_INT32) {
        <span class="hljs-built_in">memcpy</span>(&amp;v32, ((<span class="hljs-type">int32_t</span>*)is-&gt;contents) + pos, <span class="hljs-keyword">sizeof</span>(v32));
        <span class="hljs-keyword">return</span> intrev32ifbe(v32);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">memcpy</span>(&amp;v16, ((<span class="hljs-type">int16_t</span>*)is-&gt;contents) + pos, <span class="hljs-keyword">sizeof</span>(v16));
        <span class="hljs-keyword">return</span> intrev16ifbe(v16);
    }
}

<span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">intsetSet</span><span class="hljs-params">(intset *is, <span class="hljs-type">int</span> pos, <span class="hljs-type">int64_t</span> value)</span> {
    <span class="hljs-type">uint32_t</span> encoding = intrev32ifbe(is-&gt;encoding);

    <span class="hljs-keyword">if</span> (encoding == INTSET_ENC_INT64) {
        ((<span class="hljs-type">int64_t</span>*)is-&gt;contents)[pos] = intrev64ifbe(value);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (encoding == INTSET_ENC_INT32) {
        ((<span class="hljs-type">int32_t</span>*)is-&gt;contents)[pos] = intrev32ifbe(value);
    } <span class="hljs-keyword">else</span> {
        ((<span class="hljs-type">int16_t</span>*)is-&gt;contents)[pos] = intrev16ifbe(value);
    }
}
</code></pre>
<h4 data-id="heading-9">è°ƒæ•´å†…å­˜å¤§å°</h4>
<pre><code class="hljs language-c" lang="c">intset *<span class="hljs-title function_">intsetResize</span><span class="hljs-params">(intset *is, <span class="hljs-type">uint32_t</span> len)</span> {
    <span class="hljs-type">uint32_t</span> size = len * intrev32ifbe(is-&gt;encoding);
    is = zrealloc(is, <span class="hljs-keyword">sizeof</span>(intset) + size);
    <span class="hljs-keyword">return</span> is;
}
</code></pre>
<h3 data-id="heading-10">ç¤ºä¾‹ä½¿ç”¨</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    intset *is = intsetNew();
    <span class="hljs-type">uint8_t</span> success;

    <span class="hljs-comment">// æ’å…¥æ•´æ•°</span>
    is = intsetAdd(is, <span class="hljs-number">10</span>, &amp;success);
    is = intsetAdd(is, <span class="hljs-number">20</span>, &amp;success);
    is = intsetAdd(is, <span class="hljs-number">30</span>, &amp;success);

    <span class="hljs-comment">// æŸ¥æ‰¾æ•´æ•°</span>
    <span class="hljs-keyword">if</span> (intsetFind(is, <span class="hljs-number">20</span>)) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"20 exists in the set.\n"</span>);
    }

    <span class="hljs-comment">// åˆ é™¤æ•´æ•°</span>
    is = intsetRemove(is, <span class="hljs-number">20</span>, &amp;success);
    <span class="hljs-keyword">if</span> (!intsetFind(is, <span class="hljs-number">20</span>)) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"20 has been removed from the set.\n"</span>);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>æ€»ç»“ï¼šæ•´æ•°é›†åˆï¼ˆIntsetï¼‰é€šè¿‡ç´§å‡‘çš„å†…å­˜å¸ƒå±€å’Œçµæ´»çš„ç¼–ç æ–¹å¼å®ç°äº†é«˜æ•ˆçš„å­˜å‚¨å’ŒæŸ¥è¯¢æ“ä½œã€‚å®ƒé€‚ç”¨äºå­˜å‚¨å°èŒƒå›´çš„æ•´æ•°é›†åˆï¼Œé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æ•°æ®ç»“æ„ï¼Œä¿è¯äº†é«˜æ•ˆçš„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨csså®ç°ç«‹ä½“æ‹è§’è£…é¥°æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7574230922313711622</link>    <guid>https://juejin.cn/post/7574230922313711622</guid>    <pubDate>2025-11-19T07:05:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574230922313711622" data-draft-id="7573468493569212452" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨csså®ç°ç«‹ä½“æ‹è§’è£…é¥°æ•ˆæœ"/> <meta itemprop="keywords" content="CSS"/> <meta itemprop="datePublished" content="2025-11-19T07:05:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MoMoDad"/> <meta itemprop="url" content="https://juejin.cn/user/2788017221151342"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨csså®ç°ç«‹ä½“æ‹è§’è£…é¥°æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017221151342/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MoMoDad
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:05:52.000Z" title="Wed Nov 19 2025 07:05:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee0665ec6388439a84186431b8e454e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9Nb0RhZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764140752&amp;x-signature=9W3VP46XITpuZyR%2BejPk%2BetmcDc%3D" alt="845fb88aab529dbde41e3f17eb667494.jpeg" loading="lazy"/></p>
<h2 data-id="heading-0">5 åˆ†é’Ÿå®ç°é«˜çº§æ„Ÿç«‹ä½“æ‹è§’ï¼CSS ä¼ªå…ƒç´  + DOM èŠ‚ç‚¹å®æˆ˜</h2>
<p>åœ¨ç™»å½•è¡¨å•ã€å¡ç‰‡ç»„ä»¶ç­‰ UI è®¾è®¡ä¸­ï¼Œä¸€ä¸ªç²¾è‡´çš„æ‹è§’æ•ˆæœèƒ½ç¬é—´æå‡ç•Œé¢é«˜çº§æ„Ÿã€‚ä»Šå¤©åˆ†äº«ä¸€ç§ç®€å•å®ç”¨çš„è“è‰²ç«‹ä½“æ‹è§’å®ç°æ–¹æ¡ˆï¼Œä»…ç”¨ CSS ä¼ªå…ƒç´ å’Œå°‘é‡ DOM èŠ‚ç‚¹ï¼Œå°±èƒ½åšå‡ºè§†è§‰æƒŠè‰³çš„ç«‹ä½“è¾¹è§’æ•ˆæœï¼Œæ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ï½</p>
<h3 data-id="heading-1">ä¸€ã€æ•ˆæœé¢„è§ˆä¸åº”ç”¨åœºæ™¯</h3>
<p>å…ˆçœ‹æœ€ç»ˆå®ç°æ•ˆæœï¼šå®¹å™¨å››ä¸ªè§’è½å‘ˆç°è“è‰²ï¼ˆ#0f9cfbï¼‰ç«‹ä½“è¾¹æ¡†ï¼Œè¾¹è§’çº¿æ¡åˆ©è½ï¼Œè‡ªå¸¦å…‰å½±å±‚æ¬¡æ„Ÿï¼Œæ²¡æœ‰å¤æ‚çš„ SVG æˆ–å›¾ç‰‡ä¾èµ–ã€‚</p>
<p>è¿™ç§æ•ˆæœé€‚ç”¨äºå¤šç§åœºæ™¯ï¼š</p>
<ul>
<li>ç™»å½• / æ³¨å†Œè¡¨å•çš„è¾¹æ¡†è£…é¥°</li>
<li>æ•°æ®å¡ç‰‡ã€å¼¹çª—çš„è¾¹è§’å¼ºåŒ–</li>
<li>æŒ‰é’®ã€å¯¼èˆªæ çš„è§†è§‰ç‚¹ç¼€</li>
<li>ä¸ªäººåšå®¢ã€åå°ç³»ç»Ÿçš„ UI å‡çº§</li>
</ul>
<p>æ ¸å¿ƒä¼˜åŠ¿ï¼šçº¯ CSS å®ç°ï¼Œä»£ç ç®€æ´å¯å¤ç”¨ï¼Œæ”¯æŒçµæ´»è°ƒæ•´é¢œè‰²ã€å°ºå¯¸ï¼Œå…¼å®¹æ€§è¦†ç›–ä¸»æµæµè§ˆå™¨ã€‚</p>
<h3 data-id="heading-2">äºŒã€å®ç°æ­¥éª¤æ‹†è§£</h3>
<h4 data-id="heading-3">1. HTML ç»“æ„æ­å»º</h4>
<p>é¦–å…ˆéœ€è¦ä¸€ä¸ªå®¹å™¨å…ƒç´ å’Œä¸¤ä¸ªç”¨äºä¸‹æ‹è§’çš„ DOM èŠ‚ç‚¹ï¼Œç»“æ„æç®€ï¼š</p>
<p>html</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"login-form"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- ä¸‹å·¦ã€ä¸‹å³æ‹è§’DOMèŠ‚ç‚¹ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"corner corner-bl"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"corner corner-br"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- è¡¨å•å†…å®¹ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-content"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç”¨æˆ·ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç”¨æˆ·å"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å¯†ç "</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>å®¹å™¨<code>.login-form</code>ä½œä¸ºåŸºç¡€è½½ä½“ï¼Œå†…éƒ¨ä¸¤ä¸ª<code>.corner</code>èŠ‚ç‚¹ä¸“é—¨å®ç°ä¸‹ä¸¤è§’æ•ˆæœï¼Œè¡¨å•å†…å®¹æŒ‰éœ€æ·»åŠ å³å¯ã€‚</p>
<h4 data-id="heading-4">2. æ ¸å¿ƒ CSS å®ç°é€»è¾‘</h4>
<h5 data-id="heading-5">ï¼ˆ1ï¼‰åŸºç¡€å®¹å™¨è®¾ç½®</h5>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.login-form</span> {
  <span class="hljs-attribute">position</span>: relative; <span class="hljs-comment">/* å…³é”®ï¼šä¸ºä¼ªå…ƒç´ å’Œå­èŠ‚ç‚¹å®šä½ */</span>
  <span class="hljs-attribute">width</span>: <span class="hljs-number">350px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">30px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.05</span>); <span class="hljs-comment">/* è½»å¾®é˜´å½±å¢å¼ºç«‹ä½“ */</span>
}
</code></pre>
<p><code>position: relative</code>æ˜¯å®ç°æ‹è§’å®šä½çš„å‰æï¼Œèƒ½è®©åç»­ä¼ªå…ƒç´ å’Œ<code>.corner</code>èŠ‚ç‚¹åŸºäºå®¹å™¨è¿›è¡Œç»å¯¹å®šä½ã€‚</p>
<h5 data-id="heading-6">ï¼ˆ2ï¼‰ä¸Šä¸¤è§’ï¼šä¼ªå…ƒç´ å®ç°</h5>
<p>åˆ©ç”¨<code>::before</code>å’Œ<code>::after</code>ä¼ªå…ƒç´ åˆ›å»ºä¸Šå·¦ã€ä¸Šå³æ‹è§’ï¼Œæ— éœ€é¢å¤– DOM èŠ‚ç‚¹ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.login-form</span> {
  &amp;<span class="hljs-selector-pseudo">::before</span>,
  &amp;<span class="hljs-selector-pseudo">::after</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>; <span class="hljs-comment">/* ä¼ªå…ƒç´ å¿…é¡»æœ‰contentå±æ€§ */</span>
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">30px</span>; <span class="hljs-comment">/* æ‹è§’å¤§å°ï¼Œå¯è°ƒæ•´ */</span>
    <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">5px</span> solid <span class="hljs-number">#0f9cfb</span>; <span class="hljs-comment">/* æ‹è§’é¢œè‰² */</span>
  }

  <span class="hljs-comment">/* ä¸Šå·¦è§’ï¼šä¿ç•™ä¸Šè¾¹æ¡†å’Œå·¦è¾¹æ¡† */</span>
  &amp;<span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">5px</span> solid <span class="hljs-number">#0f9cfb</span>;
    <span class="hljs-attribute">border-left</span>: <span class="hljs-number">5px</span> solid <span class="hljs-number">#0f9cfb</span>;
    <span class="hljs-attribute">border-right</span>: <span class="hljs-number">5px</span> solid transparent; <span class="hljs-comment">/* é€æ˜è¾¹æ¡†å®ç°æ‹è§’æ•ˆæœ */</span>
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">5px</span> solid transparent;
  }

  <span class="hljs-comment">/* ä¸Šå³è§’ï¼šä¿ç•™ä¸Šè¾¹æ¡†å’Œå³è¾¹æ¡† */</span>
  &amp;<span class="hljs-selector-pseudo">::after</span> {
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">5px</span> solid <span class="hljs-number">#0f9cfb</span>;
    <span class="hljs-attribute">border-right</span>: <span class="hljs-number">5px</span> solid <span class="hljs-number">#0f9cfb</span>;
    <span class="hljs-attribute">border-left</span>: <span class="hljs-number">5px</span> solid transparent;
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">5px</span> solid transparent;
  }
}
</code></pre>
<p>æ ¸å¿ƒåŸç†ï¼šé€šè¿‡<code>transparent</code>é€æ˜è¾¹æ¡†ä¸å®è‰²è¾¹æ¡†ç»„åˆï¼Œåˆ©ç”¨ CSS è¾¹æ¡†çš„æ¢¯å½¢ç‰¹æ€§ï¼Œè‡ªç„¶å½¢æˆæ‹è§’å½¢çŠ¶ã€‚</p>
<h5 data-id="heading-7">ï¼ˆ3ï¼‰ä¸‹ä¸¤è§’ï¼šDOM èŠ‚ç‚¹å®ç°</h5>
<p>ä¸‹ä¸¤è§’ä½¿ç”¨ç‹¬ç«‹ DOM èŠ‚ç‚¹<code>.corner</code>å®ç°ï¼Œä¸ä¼ªå…ƒç´ é€»è¾‘ä¸€è‡´ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.corner</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">30px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">5px</span> solid <span class="hljs-number">#0f9cfb</span>; <span class="hljs-comment">/* ä¸ä¼ªå…ƒç´ ä¿æŒæ ·å¼ç»Ÿä¸€ */</span>
}

<span class="hljs-comment">/* ä¸‹å·¦è§’ï¼šä¿ç•™ä¸‹è¾¹æ¡†å’Œå·¦è¾¹æ¡† */</span>
<span class="hljs-selector-class">.corner-bl</span> {
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">5px</span> solid <span class="hljs-number">#0f9cfb</span>;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">5px</span> solid <span class="hljs-number">#0f9cfb</span>;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">5px</span> solid transparent;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">5px</span> solid transparent;
}

<span class="hljs-comment">/* ä¸‹å³è§’ï¼šä¿ç•™ä¸‹è¾¹æ¡†å’Œå³è¾¹æ¡† */</span>
<span class="hljs-selector-class">.corner-br</span> {
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">5px</span> solid <span class="hljs-number">#0f9cfb</span>;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">5px</span> solid <span class="hljs-number">#0f9cfb</span>;
  <span class="hljs-attribute">border-top</span>: <span class="hljs-number">5px</span> solid transparent;
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">5px</span> solid transparent;
}
</code></pre>
<p>ä¸ºä»€ä¹ˆä¸‹ä¸¤è§’ä¸ç”¨ä¼ªå…ƒç´ ï¼Ÿå› ä¸ºä¸€ä¸ªå…ƒç´ æœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ªä¼ªå…ƒç´ ï¼ˆ<code>::before</code>å’Œ<code>::after</code>ï¼‰ï¼Œå››ä¸ªæ‹è§’éœ€è¦å››ä¸ªç‹¬ç«‹ â€œè½½ä½“â€ï¼Œå› æ­¤ä¸‹ä¸¤è§’é‡‡ç”¨è½»é‡ DOM èŠ‚ç‚¹è¡¥å……ï¼Œä¸å½±å“é¡µé¢æ€§èƒ½ã€‚</p>
<h3 data-id="heading-8">ä¸‰ã€å…³é”®æŠ€æœ¯ç‚¹è§£æ</h3>
<h4 data-id="heading-9">1. é€æ˜è¾¹æ¡†å®ç°æ‹è§’çš„åŸç†</h4>
<p>CSS è¾¹æ¡†é»˜è®¤æ˜¯æ¢¯å½¢ç»“æ„ï¼Œå½“å…ƒç´ å®½é«˜å›ºå®šæ—¶ï¼Œå››ä¸ªè¾¹æ¡†ä¼šè‡ªç„¶æ‹¼æ¥ã€‚é€šè¿‡å°†ä¸éœ€è¦çš„è¾¹æ¡†è®¾ä¸º<code>transparent</code>ï¼Œåªä¿ç•™æ‹è§’æ‰€éœ€çš„ä¸¤ä¸ªé‚»è¾¹å®è‰²ï¼Œå°±èƒ½å½¢æˆç²¾å‡†çš„æ‹è§’æ•ˆæœã€‚</p>
<p>æ¯”å¦‚ä¸Šå·¦è§’åªä¿ç•™<code>border-top</code>å’Œ<code>border-left</code>ä¸ºå®è‰²ï¼Œå…¶ä½™ä¸¤ä¸ªæ–¹å‘ä¸ºé€æ˜ï¼Œè§†è§‰ä¸Šå°±å½¢æˆäº†å·¦ä¸Šè§’çš„ç«‹ä½“è¾¹æ¡†ã€‚</p>
<h4 data-id="heading-10">2. ä¼ªå…ƒç´ çš„æ­£ç¡®ä½¿ç”¨è§„èŒƒ</h4>
<ul>
<li>ä¼ªå…ƒç´ å¿…é¡»è®¾ç½®<code>content</code>å±æ€§ï¼ˆç©ºå€¼ä¹Ÿå¯ï¼‰ï¼Œå¦åˆ™æ— æ³•ç”Ÿæ•ˆ</li>
<li>æ¨èä½¿ç”¨åŒå†’å·<code>::before</code>/<code>::after</code>ï¼ˆCSS3 è§„èŒƒï¼‰ï¼Œå…¼å®¹å•å†’å·å†™æ³•ä½†å¯è¯»æ€§æ›´å¼º</li>
<li>ä¼ªå…ƒç´ é»˜è®¤æ˜¯è¡Œå†…å…ƒç´ ï¼Œéœ€é€šè¿‡<code>position: absolute</code>è„±ç¦»æ–‡æ¡£æµï¼Œæ‰èƒ½è¿›è¡Œå®šä½å’Œå°ºå¯¸è®¾ç½®</li>
</ul>
<h4 data-id="heading-11">3. æ ·å¼ç»Ÿä¸€æ€§ä¼˜åŒ–</h4>
<p>åŸä»£ç ä¸­å­˜åœ¨é‡å¤æ ·å¼ï¼Œå¯é€šè¿‡ CSS å˜é‡ä¼˜åŒ–ï¼Œæ–¹ä¾¿åç»­è°ƒæ•´ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.login-form</span> {
  <span class="hljs-attr">--corner-color</span>: <span class="hljs-number">#0f9cfb</span>; <span class="hljs-comment">/* æ‹è§’é¢œè‰²å˜é‡ */</span>
  <span class="hljs-attr">--corner-size</span>: <span class="hljs-number">30px</span>;     <span class="hljs-comment">/* æ‹è§’å¤§å°å˜é‡ */</span>
  <span class="hljs-attr">--border-width</span>: <span class="hljs-number">5px</span>;     <span class="hljs-comment">/* è¾¹æ¡†å®½åº¦å˜é‡ */</span>
  
  &amp;<span class="hljs-selector-pseudo">::before</span>,
  &amp;<span class="hljs-selector-pseudo">::after</span>,
  <span class="hljs-selector-class">.corner</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">var</span>(--corner-size);
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--corner-size);
    <span class="hljs-attribute">border-width</span>: <span class="hljs-built_in">var</span>(--border-width);
  }
  
  <span class="hljs-comment">/* åç»­æ ·å¼ç›´æ¥å¼•ç”¨å˜é‡å³å¯ */</span>
}
</code></pre>
<p>é€šè¿‡ CSS å˜é‡ï¼Œåªéœ€ä¿®æ”¹ä¸€å¤„å°±èƒ½å…¨å±€æ”¹å˜æ‹è§’çš„é¢œè‰²ã€å¤§å°ï¼Œç»´æŠ¤æ€§å¤§å¹…æå‡ã€‚</p>
<h3 data-id="heading-12">å››ã€æ‹“å±•ä¸è¿›é˜¶ä¼˜åŒ–</h3>
<h4 data-id="heading-13">1. å…¶ä»–å®ç°æ–¹æ¡ˆå¯¹æ¯”</h4>
<p>é™¤äº†æœ¬æ–‡çš„ä¼ªå…ƒç´  + DOM èŠ‚ç‚¹æ–¹æ¡ˆï¼Œè¿˜æœ‰ä¸¤ç§å¸¸è§å®ç°æ–¹å¼ï¼š</p>





























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ä¼ªå…ƒç´  + DOM èŠ‚ç‚¹</td><td>å…¼å®¹æ€§å¥½ï¼Œå®ç°ç®€å•</td><td>éœ€è¦ 2 ä¸ªé¢å¤– DOM èŠ‚ç‚¹</td><td>å¤§å¤šæ•°å¸¸è§„åœºæ™¯</td></tr><tr><td>clip-path è£å‰ª</td><td>çº¯ CSS æ— é¢å¤–èŠ‚ç‚¹</td><td>æ‹è§’çº¿æ¡ä¸å¤Ÿçµæ´»</td><td>ç®€å•åˆ‡è§’æ•ˆæœ</td></tr><tr><td>CSS Mask é®ç½©</td><td>æ”¯æŒå¤æ‚å½¢çŠ¶</td><td>å…¼å®¹æ€§ç¨å·®ï¼ˆIE ä¸æ”¯æŒï¼‰</td><td>é«˜çº§å®šåˆ¶åŒ–æ‹è§’</td></tr></tbody></table>
<p>æœ¬æ–‡æ–¹æ¡ˆå¹³è¡¡äº†æ˜“ç”¨æ€§å’Œå…¼å®¹æ€§ï¼Œæ˜¯æ—¥å¸¸å¼€å‘çš„æœ€ä¼˜é€‰æ‹©ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-14">2. å…¼å®¹æ€§è¯´æ˜</h4>
<ul>
<li>æ”¯æŒ Chromeã€Firefoxã€Edge ç­‰ç°ä»£æµè§ˆå™¨</li>
<li>å…¼å®¹ IE10+ï¼ˆéœ€å°†åŒå†’å·ä¼ªå…ƒç´ æ”¹ä¸ºå•å†’å·<code>:before</code>/<code>:after</code>ï¼‰</li>
<li>é€æ˜è¾¹æ¡†ç‰¹æ€§åœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨ä¸­å‡èƒ½æ­£å¸¸æ˜¾ç¤º</li>
</ul>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>è¿™ç§è“è‰²ç«‹ä½“æ‹è§’æ•ˆæœé€šè¿‡ â€œä¼ªå…ƒç´  + DOM èŠ‚ç‚¹â€ çš„ç»„åˆï¼Œä»¥æç®€ä»£ç å®ç°äº†é«˜çº§ UI è´¨æ„Ÿï¼Œæ ¸å¿ƒåœ¨äºåˆ©ç”¨ CSS è¾¹æ¡†ç‰¹æ€§å’Œå®šä½æŠ€å·§ã€‚ä»£ç å¯ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼Œè¿˜èƒ½é€šè¿‡ CSS å˜é‡çµæ´»è°ƒæ•´æ ·å¼ï¼Œé€‚é…ä¸åŒé¡¹ç›®éœ€æ±‚ã€‚</p>
<p>å¦‚æœéœ€è¦æ›´å¤æ‚çš„æ‹è§’æ•ˆæœï¼ˆå¦‚ 3D æŠ˜å è§’ã€æ¸å˜æ‹è§’ï¼‰ï¼Œå¯ä»¥å°è¯•ç»“åˆ<code>perspective</code>é€è§†å±æ€§æˆ–æ¸å˜èƒŒæ™¯è¿›ä¸€æ­¥æ‹“å±•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» AI Coding åˆ°æŠ€æœ¯å€ºåŠ¡ï¼ŒCloudflare 3ä¸ªå°æ—¶æ‰å…¨é¢æ¢å¤ï¼Œå‡ºæ¥æ··çš„ï¼Œè¿Ÿæ—©è¦è¿˜çš„]]></title>    <link>https://juejin.cn/post/7574105194166861870</link>    <guid>https://juejin.cn/post/7574105194166861870</guid>    <pubDate>2025-11-19T07:39:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574105194166861870" data-draft-id="7574040813749534771" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» AI Coding åˆ°æŠ€æœ¯å€ºåŠ¡ï¼ŒCloudflare 3ä¸ªå°æ—¶æ‰å…¨é¢æ¢å¤ï¼Œå‡ºæ¥æ··çš„ï¼Œè¿Ÿæ—©è¦è¿˜çš„"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-19T07:39:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ‘_"/> <meta itemprop="url" content="https://juejin.cn/user/1471609400466218"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» AI Coding åˆ°æŠ€æœ¯å€ºåŠ¡ï¼ŒCloudflare 3ä¸ªå°æ—¶æ‰å…¨é¢æ¢å¤ï¼Œå‡ºæ¥æ··çš„ï¼Œè¿Ÿæ—©è¦è¿˜çš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1471609400466218/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ‘_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:39:31.000Z" title="Wed Nov 19 2025 07:39:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´11 æœˆ18 æ—¥ï¼Œçœ‹ä¼¼å¹³å¸¸çš„ä¸€å¤©ï¼Œå´å› ä¸ºäº’è”ç½‘éª¨å¹²å¹³å°ä¹‹ä¸€â€”â€”Cloudflareçªç„¶ã€ŒæŒ‚äº†ã€è€Œå˜å¾—ä¸å†å¹³å¸¸ã€‚åŒ…æ‹¬ X ã€ChatGPTã€Canva ç­‰å¤§ç‰ŒæœåŠ¡çº·çº·å‡ºç°è®¿é—®ä¸­æ–­ã€500 é”™è¯¯ã€åˆ·å±æŠ¥é”™ã€‚è°ä¹Ÿæ²¡æƒ³åˆ°ï¼Œæˆ‘ä»¬æ‰€èµ–ä»¥ä¸ºç†æ‰€å½“ç„¶çš„ç½‘åœ¨çš„ä½“éªŒï¼Œç«Ÿåœ¨ä¸€ç¬é—´è¢«æŠ½ç©ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb4dbc5f1be24fec81d9c12b2b3ed109~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142770&amp;x-signature=bBFHfq2kJ438pkFb3YxtR07UB5s%3D" alt="image.png" loading="lazy"/>
Cloudflare æ•…éšœçš„æ—¶å€™ï¼Œæˆ‘æ­£å¥½åœ¨è¯•ä¸€ä¸ª AI Coding å·¥å…·ã€‚å†™ç€å†™ç€ä»£ç çªç„¶è¿ä¸ä¸Šä¾èµ–ï¼Œæ¥å£å…¨çº¢ï¼ŒIDE å´©æºƒå¾—æ¯”æˆ‘è¿˜å¿«ã€‚æˆ‘å½“æ—¶ä»¥ä¸ºåˆæ˜¯æˆ‘ç”µè„‘æŠ½é£äº†ï¼Œé‡å¯ã€åˆ‡ç½‘ã€VPN æ¢å‡ºå£ï¼Œæ²¡ç”¨ã€‚ç­‰æˆ‘åˆ·åˆ°æ¶ˆæ¯æ‰æ„è¯†åˆ°â€”â€”ä¸æ˜¯æˆ‘ä¸è¡Œï¼Œæ˜¯äº’è”ç½‘ç—…äº†ã€‚</p>
<p>Cloudflare å…¨çƒæ³¢åŠ¨ï¼Œ3 ä¸ªå°æ—¶æ‰å…¨é¢æ¢å¤ã€‚æœ‰äººè¯´è¿™æ¬¡é”…æ˜¯ 600G çš„ DDoS å¤§ç«ç®­ï¼Œæœ‰äººè¯´æ˜¯å†…éƒ¨é…ç½®å†²çªï¼Œè¿˜æœ‰äººè¯´æ˜¯æ··åˆå› ç´ å åŠ ã€‚ä½†è¯´å®è¯ï¼Œæˆ‘å¯¹åŸå› å¹¶ä¸æ•æ„Ÿï¼ŒçœŸæ­£æˆ³ä¸­æˆ‘çš„ï¼Œæ˜¯å®ƒæ‰€æš´éœ²å‡ºæ¥çš„<strong>æŠ€æœ¯å€ºåŠ¡</strong>ã€‚
å…·å®˜æ–¹å‘æ–‡æè¿°ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06f1771b30cc4aeea3f0e8157ccfc247~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142770&amp;x-signature=cVAP0P%2BS7EBy3lg4994KlR9k7%2Bg%3D" alt="image.png" loading="lazy"/>
å‡ºé”™åŸå› å¹¶éé»‘å®¢ï¼Œè€Œæ˜¯ä¸€ä»½è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®ï¼ç‰¹å¾æ–‡ä»¶æ„å¤–è†¨èƒ€ï¼Œå¯¼è‡´å…¶è¾¹ç¼˜ä»£ç†æˆ–äº¤é€šåˆ†é…ç³»ç»Ÿå´©æºƒã€‚Cloudflare è‡ªå·±ç§°ï¼Œé”™è¯¯æ–‡ä»¶æ¯”é¢„æœŸå¤§ <strong>ä¸¤å€</strong>ï¼Œç³»ç»Ÿè¯»å–è¯¥æ–‡ä»¶æ—¶å‡ºç°å¤±è´¥ã€‚</p>
<p>æˆ‘ä»¬è¿™ä¸¤å¹´æ²‰è¿· AI å¼€å‘ï¼Œå†™ä»£ç çš„é€Ÿåº¦é£èµ·æ¥äº†ã€‚è‡ªåŠ¨å®Œæˆã€è‡ªåŠ¨è¡¥å…¨ã€è‡ªåŠ¨ç”Ÿæˆã€è‡ªåŠ¨ä¼˜åŒ–ï¼Œå†™åç«¯åƒæ‰“æ¸¸æˆå¼€äº†ç¥è£…ã€‚å¯ä»£ç å†™å¾—å¿«ï¼Œä¸ä»£è¡¨ç³»ç»Ÿè®¾è®¡æƒ³å¾—æ·±ã€‚è¶Šæ¥è¶Šå¤šäººåœ¨ä¸è€ƒè™‘æ‰©å±•ä¸è€ƒè™‘å…¼å®¹ä¸è€ƒè™‘æ•…éšœéš”ç¦»çš„å‰æä¸‹ç–¯ç‹‚æ¨è¿›ä¸Šçº¿ã€‚å› ä¸ºèƒ½è·‘ã€èƒ½ç”¨ã€èƒ½äº¤ä»˜ã€èƒ½æ‹¿æˆæœï¼Œè‡³äºåº•å±‚æ€ä¹ˆæ”¯æ’‘ï¼Œåæ­£ä»¥åå†è¯´ã€‚</p>
<p>ä»¥åå†è¯´è¿™å››ä¸ªå­—ï¼Œæ˜¯æŠ€æœ¯å€ºåŠ¡æœ€å¤§çš„åˆ©æ¯æ¥æºã€‚Cloudflare å€’ä¸‹çš„è¿™ä¸‰ä¸ªå°æ—¶ï¼Œè®©æˆ‘å¿½ç„¶æ„è¯†åˆ°ï¼šé‚£ä¹ˆåºå¤§çš„åŸºç¡€è®¾æ–½å°šä¸”è¦ä¸ºè‡ªå·±çš„æŠ€æœ¯å†å²ä¹°å•ï¼Œæˆ‘ä»¬è¿™äº›å†™ä¸šåŠ¡ã€å†™æœåŠ¡ã€å†™ AI åº”ç”¨çš„äººï¼Œå°±æ›´é€ƒä¸æ‰ã€‚</p>
<p>ç°åœ¨ AI Coding å¾ˆå¼ºï¼Œèƒ½å¸®æˆ‘ä»¬å†™å‡ºæ•´æ®µæ•´æ®µçœ‹èµ·æ¥æ²¡æ¯›ç—…çš„ä»£ç ã€‚ä½†ä½ åªè¦è®©å®ƒæ¥æ‰‹ 3 ä¸ªæœˆä»¥ä¸Šçš„é¡¹ç›®ï¼Œå°±ä¼šçœ‹åˆ°ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼š**é€»è¾‘æ˜¯å¯¹çš„ï¼Œç»“æ„å´åœ¨ä¸€ç‚¹ç‚¹å˜å½¢ï¼Œèƒ½è·‘ä½†è¶Šæ¥è¶Šéš¾ç»´æŠ¤ã€‚**è¿™ä¸æ€ª AIï¼Œå®ƒæ²¡æœ‰ç”Ÿæ´»ç»éªŒï¼Œä¹Ÿæ²¡æœ‰æŠ€æœ¯å€ºåŠ¡æ„è¯†ã€‚å®ƒå¤©çœŸï¼Œå®ƒæ€•é”™ï¼Œä½†å®ƒä¸æ€•ä¹±ã€‚</p>
<p>çœŸæ­£æ€•ä¹±çš„äººï¼Œæ˜¯æˆ‘ä»¬ã€‚Cloudflare è¿™ä¸€æˆ˜è®©æˆ‘é‡æ–°æƒ³èµ·ä¸€ä¸ªç»å…¸æ®µå­ï¼š</p>
<blockquote>
<p>ç¨‹åºå‘˜ä¸æ˜¯ä¿® Bug çš„ï¼Œæ˜¯å¿è¿˜æŠ€æœ¯å€ºåŠ¡çš„ã€‚</p>
</blockquote>
<p>è€Œæœ€åè®½çš„æ˜¯ï¼Œæˆ‘ä»¬è¿˜åœ¨å¾€ä¿¡ç”¨å¡é‡Œæ›´ç”¨åŠ›åœ°é€æ”¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5998f9b0547474da73dfff0173a482a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142770&amp;x-signature=upuenZkdD7rOVGM42h0CFm%2BPWCM%3D" alt="image.png" loading="lazy"/>
å½“æ™šæˆ‘æŠŠç™½å¤© AI å†™çš„ä¸€æ®µè„šæœ¬ç¿»å‡ºæ¥çœ‹ï¼Œè™½ç„¶åŠŸèƒ½æ²¡é—®é¢˜ï¼Œä½†å¼‚å¸¸å¤„ç†ç¼ºå¤±ã€èµ„æºé‡Šæ”¾ä¸å®Œæ•´ã€é€»è¾‘è€¦åˆè¿‡é«˜â€”â€”è·‘å¾—é£å¿«ï¼Œä½†åŸ‹é›·æ›´å¿«ã€‚æˆ‘å°±åœ¨æ—è¾¹ç»™å®ƒåŠ è¡¥ä¸ï¼Œå°±åƒç»™æœªæ¥çš„æˆ‘ç•™ä¸€æ¡å›å®¶çš„è·¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœªæ¥ä½ çœ‹åˆ°è¿™é‡Œçš„æ—¶å€™åˆ«éª‚æˆ‘ï¼Œæˆ‘æ˜¯çœŸçš„æœ‰åæ€è¿‡</span>
<span class="hljs-keyword">try</span>:
    result = core_operation(data)
<span class="hljs-keyword">except</span> TimeoutError:
    logger.warning(<span class="hljs-string">"Timeout occurred, retrying..."</span>)
    <span class="hljs-keyword">return</span> retry_operation(data)
<span class="hljs-keyword">finally</span>:
    cleanup()
</code></pre>
<p>æˆ‘è¾¹å†™è¾¹ç¬‘ã€‚ç¬‘è‡ªå·±å½“åˆä»¥ä¸ºæ•ˆç‡è¶Šé«˜è¶Šå¥½ï¼Œç°åœ¨åè€Œæ‡‚äº†é€Ÿåº¦ä¸ç­‰äºç¨³å®šã€‚</p>
<p>Cloudflare ä¸‰å°æ—¶æ¢å¤ä¹‹åï¼Œæ•´ä¸ªæŠ€æœ¯åœˆä¸€è¾¹ç»§ç»­åæ§½ï¼Œä¸€è¾¹ç»§ç»­ç”¨ã€‚é‚£ç§çˆ±æ¨äº¤ç»‡çš„æ„Ÿè§‰ç‰¹åˆ«ç†Ÿæ‚‰ï¼Œå› ä¸ºæˆ‘ä»¬æ¯ä¸ªäººéƒ½æœ‰è¿‡è¿™ç§ç»å†â€”â€”ç³»ç»Ÿå´©äº†ï¼Œå®¢æˆ·åœ¨é—®ï¼Œé¢†å¯¼åœ¨è¿½ï¼Œè‡ªå·±åœ¨å‡Œæ™¨ä¿®ï¼Œç†¬è¿‡å±æœºçš„é‚£ä¸€ç§’ä½ å–Šè€å­ä¸å¹²äº†ï¼Œç­‰æœåŠ¡æ¢å¤åˆé»˜ä¸ä½œå£°ç»§ç»­ä¸Šçº¿ä¸‹ä¸€ä¸ªç‰ˆæœ¬ã€‚</p>
<p>æˆ‘ä»¬éƒ½ä¸€æ ·ã€‚Cloudflare ä¹Ÿä¸€æ ·ã€‚ä¸æ˜¯è¯´ Cloudflareé”™â€”â€”å®ƒå·²ç»åšå¾—å¤Ÿå¥½äº†ã€‚è€Œæ˜¯è¿™ä¸‰ä¸ªå°æ—¶å†æ¬¡æé†’æˆ‘ä»¬æ‰€æœ‰å†™ä»£ç çš„äººï¼š<strong>å†™å¾—å¿«ï¼Œæ˜¯çº¢åˆ©ï¼›ä¿®å¾—åŠ¨ï¼Œæ˜¯å®åŠ›ï¼›æ’‘å¾—ä½ï¼Œæ˜¯åº•æ°”ã€‚</strong></p>
<p>å†™å¾—æƒŠè‰³ä¸æ˜¯æ°´å¹³ï¼Œ<strong>å†™å¾—ä¹…æ‰æ˜¯ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ae75363bf9c4017b9a03c51b49ae2e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142770&amp;x-signature=%2BymDTOXINLBuf0HjPvfULxokwpU%3D" alt="image.png" loading="lazy"/>
å¦‚æœå“ªä¸€å¤© AI Coding èƒ½åšåˆ°è‡ªåŠ¨è¯†åˆ«æŠ€æœ¯å€ºã€è‡ªåŠ¨é‡æ„ã€è‡ªåŠ¨æ²»ç†ï¼Œé‚£å°†ä¼šæ˜¯å¼€å‘é¢†åŸŸçœŸæ­£çš„é©å‘½ã€‚ä½†åœ¨é‚£ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦è€è€å®å®é¢å¯¹ä¸€å¥è€è¯ï¼š</p>
<p><strong>å‡ºæ¥æ··çš„ï¼ŒæŠ€æœ¯å€ºè¿Ÿæ—©è¦æ¢çš„ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3Då®æˆ˜æ¡ˆä¾‹ï¼ˆé£è¡Œçš„ç«ç®­/åˆ›å»º3Då¯¼èˆª/ç¿»ä¹¦æ•ˆæœ/åˆ›å»ºé•¿æ–¹ä½“/ç¯ç¯ç›¸æ‰£æ•ˆæœï¼‰]]></title>    <link>https://juejin.cn/post/7573985572400742415</link>    <guid>https://juejin.cn/post/7573985572400742415</guid>    <pubDate>2025-11-19T07:10:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573985572400742415" data-draft-id="7573892573346578484" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3Då®æˆ˜æ¡ˆä¾‹ï¼ˆé£è¡Œçš„ç«ç®­/åˆ›å»º3Då¯¼èˆª/ç¿»ä¹¦æ•ˆæœ/åˆ›å»ºé•¿æ–¹ä½“/ç¯ç¯ç›¸æ‰£æ•ˆæœï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-11-19T07:10:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Crystal328"/> <meta itemprop="url" content="https://juejin.cn/user/2359973194513272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3Då®æˆ˜æ¡ˆä¾‹ï¼ˆé£è¡Œçš„ç«ç®­/åˆ›å»º3Då¯¼èˆª/ç¿»ä¹¦æ•ˆæœ/åˆ›å»ºé•¿æ–¹ä½“/ç¯ç¯ç›¸æ‰£æ•ˆæœï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2359973194513272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Crystal328
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:10:25.000Z" title="Wed Nov 19 2025 07:10:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. é£è¡Œçš„ç«ç®­</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2dea5b2bed524cbb9a27631fdad4628c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ3J5c3RhbDMyOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141025&amp;x-signature=W1aqVNqNY%2FAwSGeSo1d2H85nXJw%3D" alt="rocket.gif" loading="lazy"/>
å¼€å‘æ­¥éª¤ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šæ’å…¥ç«ç®­å›¾ï¼Œç„¶ååˆ©ç”¨è‡ªå®šä¹‰åŠ¨ç”»ï¼Œå®ç°ç«ç®­æ²¿å·¦ä¸Šè§’å’Œå³ä¸‹è§’æ–¹å‘æ¥ä¼šç§»åŠ¨</li>
<li>ç¬¬äºŒæ­¥ï¼šå®šä¹‰ä¸€ä¸ªå®½ 1px å’Œé«˜ 160pxï¼ŒèƒŒæ™¯é¢œè‰²ä¸ºè“è‰²çš„ç›’å­ï¼Œç„¶åå®šä½åˆ°ç«ç®­æ—è¾¹ï¼Œå†æ—‹è½¬ä¸€å®šçš„è§’åº¦</li>
<li>ç¬¬ä¸‰æ­¥ï¼šè‡ªå®šä¹‰åŠ¨ç”»ï¼Œå®ç°çº¿æ¡ï¼ˆæ°”æµï¼‰ä»ä¸Šå¾€ä¸‹ç§»åŠ¨ï¼ˆY è½´ç§»åŠ¨ï¼‰ï¼Œç„¶åä»é€æ˜åˆ°ä¸é€æ˜å†åˆ°é€æ˜çš„æ•ˆæœ</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.rocket</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">animation</span>: fly <span class="hljs-number">0.5s</span> linear infinite alternate;
        }

        <span class="hljs-comment">/* ç«ç®­é£è¡ŒåŠ¨ç”» */</span>
        <span class="hljs-keyword">@keyframes</span> fly {
            <span class="hljs-number">0%</span> {
                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">30px</span>, -<span class="hljs-number">30px</span>);
            }

            <span class="hljs-number">100%</span> {
                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(<span class="hljs-number">30px</span>, <span class="hljs-number">30px</span>);
            }
        }

        <span class="hljs-selector-class">.line</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">1px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">160px</span>;
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">background-color</span>: blue;
        }

        <span class="hljs-selector-class">.pos1</span> {
            <span class="hljs-attribute">top</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">400px</span>;
        }

        <span class="hljs-selector-class">.pos2</span> {
            <span class="hljs-attribute">top</span>: <span class="hljs-number">240px</span>;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">450px</span>;
        }

        <span class="hljs-selector-class">.pos3</span> {
            <span class="hljs-attribute">top</span>: <span class="hljs-number">290px</span>;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">500px</span>;
        }

        <span class="hljs-selector-class">.pos4</span> {
            <span class="hljs-attribute">top</span>: <span class="hljs-number">320px</span>;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">550px</span>;
        }

        <span class="hljs-selector-class">.animation-cloud</span> {
            <span class="hljs-attribute">animation</span>: cloud <span class="hljs-number">1s</span> linear <span class="hljs-built_in">var</span>(--delay) infinite backwards;

        }

        <span class="hljs-comment">/* æµäº‘åŠ¨ç”» */</span>

        <span class="hljs-keyword">@keyframes</span> cloud {
            <span class="hljs-number">0%</span> {
                <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
                <span class="hljs-comment">/* å…ˆæ—‹è½¬åä½ç§» */</span>
                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">55deg</span>) <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">200px</span>);
            }

            <span class="hljs-number">70%</span> {
                <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
            }

            <span class="hljs-number">100%</span> {
                <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">55deg</span>) <span class="hljs-built_in">translateY</span>(<span class="hljs-number">200px</span>);

            }
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./images/rocket.png"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"rocket"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"line pos1 animation-cloud"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"--delay:0s"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"line pos2 animation-cloud"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"--delay:0.4s"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"line pos3 animation-cloud"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"--delay:0.6s"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"line pos4 animation-cloud"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"--delay:0.8s"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<h2 data-id="heading-1">2. åˆ›å»º3Då¯¼èˆª</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fb9af9ac7a644c3a89d543c19fb2cdc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ3J5c3RhbDMyOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141025&amp;x-signature=RFC1cSfndJVTh2ouzvMAKmr0fCI%3D" alt="nav.gif" loading="lazy"/>
å¼€å‘æ­¥éª¤</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šåˆ©ç”¨ ul æ ‡ç­¾æ¥åˆ¶ä½œç®€å•çš„å¯¼èˆªå¸ƒå±€</li>
<li>ç¬¬äºŒæ­¥ï¼šåœ¨æ¯ä¸ª li ä¸­æ·»åŠ ä¸€ä¸ª div ç”¨æ¥å®ç°æ—‹è½¬æ•ˆæœï¼Œåé¢æ—‹è½¬å°±æ˜¯è¦æ—‹è½¬è¿™ä¸ª div</li>
<li>ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨ transform æ¥è°ƒæ•´ä¸¤ä¸ª a æ ‡ç­¾çš„æ„æˆçš„ç›’å­çš„ä½ç½®</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>3Då¯¼èˆª<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">body</span>, <span class="hljs-selector-tag">ul</span> ,<span class="hljs-selector-tag">li</span>,<span class="hljs-selector-tag">a</span> {
            <span class="hljs-attribute">list-style</span>: none;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">text-decoration</span>: none;
            <span class="hljs-attribute">color</span>: white;
        }
        <span class="hljs-selector-tag">ul</span> {
            <span class="hljs-attribute">display</span>: block;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#87ceeb</span>; 
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">200px</span> auto;
            <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">200px</span>;

        }
        <span class="hljs-selector-tag">li</span> {
            <span class="hljs-attribute">float</span>: left;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">50px</span>;
            <span class="hljs-attribute">perspective</span>: <span class="hljs-number">300px</span>; <span class="hljs-comment">/* é€è§†è·ç¦» */</span>
        }
        <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">a</span> {
            <span class="hljs-attribute">display</span>: block;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">50px</span>;
        }
        <span class="hljs-selector-class">.box</span> {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
            <span class="hljs-comment">/* border: 1px solid red; */</span>
            <span class="hljs-comment">/* å­å…ƒç´ åœ¨3DçŠ¶æ€ä¸‹å‘ˆç° */</span>
            <span class="hljs-attribute">transform-style</span>: preserve-<span class="hljs-number">3</span>d;
            <span class="hljs-attribute">transform-origin</span>: <span class="hljs-number">50%</span> <span class="hljs-number">50%</span> -<span class="hljs-number">25px</span>;

        }
        <span class="hljs-selector-class">.front</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#87ceeb</span>;
        }
        <span class="hljs-selector-class">.bottom</span> {
            <span class="hljs-attribute">background-color</span>: khaki;
            <span class="hljs-comment">/* ä¿®æ”¹æ—‹è½¬ä¸­å¿ƒç‚¹ */</span>
            <span class="hljs-attribute">transform-origin</span>: top center;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateX</span>(-<span class="hljs-number">90deg</span>);
        }
        <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.box</span> {
            <span class="hljs-attribute">transform-origin</span>: <span class="hljs-number">50%</span> <span class="hljs-number">50%</span> -<span class="hljs-number">25px</span>;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateX</span>(<span class="hljs-number">90deg</span>);
            <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">1s</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"front"</span>&gt;</span>å‰ç«¯<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bottom"</span>&gt;</span>å‰ç«¯<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"front"</span>&gt;</span>å‰ç«¯å¼€å‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bottom"</span>&gt;</span>å‰ç«¯å¼€å‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"front"</span>&gt;</span>æ¶æ„å¸ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bottom"</span>&gt;</span>æ¶æ„å¸ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"front"</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">""</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bottom"</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">3. ç¿»ä¹¦æ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36e78a09f34a41b1a2da2c17ba0598ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ3J5c3RhbDMyOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141025&amp;x-signature=FNJZvLvbJXrwDKQ%2FT88rdfplORY%3D" alt="book.gif" loading="lazy"/></p>
<ul>
<li>æ„å»º.book ç›’å­ï¼Œç„¶ååœ¨.book ä¸­æ„å»º.page,åé¢åœ¨æ—‹è½¬ç¿»é¡µæ•ˆæœæ—¶ï¼Œæ—‹è½¬çš„å°±æ˜¯.page è¿™ä¸ªç›’å­</li>
<li>.page æ²¿ç€ Y è½´çš„åæ–¹å‘æ—‹è½¬ 180deg æ¥å®ç°ç¿»é¡µæ•ˆæœï¼Œç¿»é¡µæ—¶ï¼ŒæŠŠè½¬æ¢åŸç‚¹è®¾ç½®ä¸ºå·¦è¾¹ä¸­é—´ä½ç½®ï¼ˆtransform-origin:left;</li>
<li>åœ¨.page ç›’å­ä¸­ï¼Œæ„å»ºä¸¤ä¸ª divï¼Œ.front ä½œä¸ºä¸€é¡µçš„æ­£é¢ï¼Œ.back ä½œä¸ºä¸€é¡µçš„åé¢ã€‚ç”¨ç»å¯¹å®šä½æ§åˆ¶ä½ç½®</li>
<li>è¦å®ç°ç¿»è½¬æ—¶ï¼Œèƒ½çœ‹åˆ°ä¸€é¡µçš„èƒŒé¢ï¼Œåˆ™ç»™.back ç›’å­æ·»åŠ  transform:translateZ(-1)ï¼Œä½¿å…¶ä¸æ­£é¢æ‹‰å¼€ä¸€ç‚¹è·ç¦»</li>
<li>è¦ä½¿ç¿»è½¬åèƒ½çœ‹åˆ°ä¹¦çš„åé¢æ˜¯æ­£é¢æœä¸Šçš„ï¼Œåˆ™éœ€è¦å…ˆæŠŠ.back æ—‹è½¬ 180deg ï¼Œå³ transform:rotateY(-180deg)</li>
</ul>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç¿»ä¹¦æ•ˆæœ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.book</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span> auto;
            <span class="hljs-attribute">position</span>: relative;
            <span class="hljs-attribute">perspective</span>: <span class="hljs-number">1000px</span>;
        }
        <span class="hljs-selector-class">.page</span> {
            <span class="hljs-attribute">width</span>: inherit;
            <span class="hljs-attribute">height</span>: inherit;
            <span class="hljs-attribute">transform-style</span>: preserve-<span class="hljs-number">3</span>d;
            <span class="hljs-attribute">transform-origin</span>: left;
        }
        <span class="hljs-selector-class">.first</span> {
            <span class="hljs-attribute">background-color</span>: orange;
        }
        <span class="hljs-selector-class">.second</span> {
            <span class="hljs-attribute">background-color</span>: yellow;
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">top</span>:<span class="hljs-number">0</span>;
            <span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;
            <span class="hljs-attribute">z-index</span>: -<span class="hljs-number">1</span>;
        }
        <span class="hljs-selector-class">.page-item</span> {
            <span class="hljs-attribute">width</span>: inherit;
            <span class="hljs-attribute">height</span>: inherit;
            <span class="hljs-attribute">position</span>: relative;
        }
        <span class="hljs-selector-class">.front</span> {
            <span class="hljs-attribute">background-color</span>: pink;
        }
        <span class="hljs-selector-class">.back</span> {
            <span class="hljs-attribute">background-color</span>: purple;
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">top</span>:<span class="hljs-number">0</span>;
            <span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;
            <span class="hljs-comment">/* z-index: -1; */</span>
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(-<span class="hljs-number">1px</span>) <span class="hljs-built_in">rotateY</span>(-<span class="hljs-number">180deg</span>);
        }
        <span class="hljs-selector-class">.book</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.page</span><span class="hljs-selector-class">.first</span> {
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(-<span class="hljs-number">180deg</span>);
            <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">1s</span>;
        }
        <span class="hljs-selector-tag">img</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">display</span>: block;
            <span class="hljs-attribute">object-fit</span>: cover;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"book"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç¬¬ä¸€é¡µ --&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page first"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ­£é¢ --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-item front"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./images/cover1.png"</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
         <span class="hljs-comment">&lt;!-- åé¢ --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-item back"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./images/cover2.png"</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç¬¬äºŒé¡µ --&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page second"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./images/cover3.png"</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-3">4. åˆ›å»ºé•¿æ–¹ä½“</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37371035eedb447e8f216c568455d2e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ3J5c3RhbDMyOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141025&amp;x-signature=hVqKRD4x%2FqiRsJ2rHUycyb2Ey%2FQ%3D" alt="rectangle.gif" loading="lazy"/>
å¼€å‘æ­¥éª¤ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šé¦–å…ˆåˆ›å»ºä¸€ä¸ªåä¸ºÂ <code>.container</code>Â çš„å®¹å™¨ï¼Œç”¨æ¥æ”¾ç«‹æ–¹ä½“ã€‚æˆ‘ä»¬ç«™åœ¨ç¦»è¿™ä¸ªå®¹å™¨Â <code>900px</code>Â çš„åœ°æ–¹ï¼Œæ¥è§‚å¯Ÿé‡Œé¢çš„ç«‹æ–¹ä½“ã€‚æ‰€ä»¥è®¾ç½®<code>perspective: 900px;</code></li>
<li>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä¸€ä¸ªåä¸ºÂ <code>.mybox</code>Â çš„å®¹å™¨ï¼Œç”¨æ¥æ„å»ºç«‹æ–¹ä½“ã€‚æ‰€ä»¥éœ€è¦è®¾ç½®Â <code>transform-style: preserve-3d;</code>ï¼Œå°†å­å…ƒç´ åœ¨ 3D ç©ºé—´å±•ç¤º</li>
<li>ç¬¬ä¸‰æ­¥ï¼šåœ¨å®¹å™¨ä¸­æ„å»º 6 ä¸ªé•¿æ–¹å½¢ï¼Œåˆ†åˆ«ä»£è¡¨æ­£æ–¹ä½“çš„ 6 ä¸ªé¢</li>
<li>ç¬¬å››æ­¥ï¼šé€šè¿‡å®šä½æŠŠå…ƒç´ å åœ¨ä¸€èµ·ï¼Œç„¶åé€šè¿‡ä½ç§»ï¼Œæ—‹è½¬æ¥ç§»åŠ¨æ¯ä¸ªé¢çš„ä½ç½®</li>
<li>ç¬¬äº”æ­¥ï¼šç»™å®¹å™¨è®¾ç½®ä¸€ä¸ªæ—‹è½¬è§’åº¦ï¼Œè¿™æ ·çœ‹æ­£æ–¹ä½“æ›´ç«‹ä½“ä¸€äº›</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.container</span> {
            <span class="hljs-attribute">height</span>: <span class="hljs-number">700px</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid red;
            <span class="hljs-attribute">perspective</span>: <span class="hljs-number">1000px</span>;
        }

        <span class="hljs-selector-class">.mybox</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid blue;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">200px</span> auto <span class="hljs-number">0</span>;
            <span class="hljs-attribute">transform-style</span>: preserve-<span class="hljs-number">3</span>d;
            <span class="hljs-comment">/* å¯ä¸åŠ  å› ä¸ºæœ‰ä¸Šé¢çš„transform-style: preserve-3d; */</span>
            <span class="hljs-attribute">position</span>: relative;
        }

        <span class="hljs-selector-class">.mybox</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-comment">/* ä¸­å¿ƒæ—‹è½¬ é˜²æ­¢è§†è§‰æ”¾å¤§ */</span>
            <span class="hljs-attribute">transform-origin</span>: <span class="hljs-number">50%</span> <span class="hljs-number">50%</span> -<span class="hljs-number">100px</span>;
            <span class="hljs-attribute">transform</span>:  <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>);
            <span class="hljs-attribute">transition</span>: all <span class="hljs-number">6s</span> ease ;
        }

        <span class="hljs-selector-class">.face</span> {
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
        }

        <span class="hljs-selector-class">.before</span>,
        <span class="hljs-selector-class">.after</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
        }

        <span class="hljs-selector-class">.before</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">240</span>, <span class="hljs-number">224</span>, <span class="hljs-number">79</span>, <span class="hljs-number">0.7</span>);
        }

        <span class="hljs-selector-class">.after</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">79</span>, <span class="hljs-number">224</span>, <span class="hljs-number">240</span>, <span class="hljs-number">0.8</span>);
        }

        <span class="hljs-selector-class">.top</span>,
        <span class="hljs-selector-class">.bottom</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
        }

        <span class="hljs-selector-class">.top</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">99</span>, <span class="hljs-number">71</span>, <span class="hljs-number">0.7</span>);
        }

        <span class="hljs-selector-class">.bottom</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">138</span>, <span class="hljs-number">43</span>, <span class="hljs-number">226</span>, <span class="hljs-number">0.7</span>);
        }

        <span class="hljs-selector-class">.left</span>,
        <span class="hljs-selector-class">.right</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
        }

        <span class="hljs-selector-class">.left</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">60</span>, <span class="hljs-number">179</span>, <span class="hljs-number">113</span>, <span class="hljs-number">0.5</span>);
        }

        <span class="hljs-selector-class">.right</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">210</span>, <span class="hljs-number">20</span>, <span class="hljs-number">147</span>, <span class="hljs-number">0.7</span>);
        }

        <span class="hljs-comment">/* ä½ç½®è°ƒæ•´ */</span>
        <span class="hljs-selector-class">.after</span> {
            <span class="hljs-comment">/* æœ€åé¢zè½´ç§»åŠ¨-200px */</span>
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(-<span class="hljs-number">200px</span>);
        }

        <span class="hljs-selector-class">.top</span> {
            <span class="hljs-comment">/* ä¸Šé¢å…ˆyè½´åæ–¹å‘å¹³ç§»ä¸Šå»ç„¶åå†å‘åæŠ˜å è¿‡å»*/</span>
            <span class="hljs-attribute">transform-origin</span>: bottom;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">100%</span>) <span class="hljs-built_in">rotateX</span>(<span class="hljs-number">90deg</span>);
        }
        <span class="hljs-selector-class">.bottom</span> {
            <span class="hljs-comment">/* ä¸‹é¢å…ˆyè½´æ­£æ–¹å‘å¹³ç§»ä¸‹å»ç„¶åå†å‘å‰æŠ˜å è¿‡å»*/</span>
            <span class="hljs-attribute">transform-origin</span>: top;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">300px</span>) <span class="hljs-built_in">rotateX</span>(-<span class="hljs-number">90deg</span>);
        }
        <span class="hljs-selector-class">.left</span> {
            <span class="hljs-comment">/* å·¦ä¾§å…ˆxè½´åæ–¹å‘å¹³ç§»è¿‡å»ç„¶åå†å‘å³æŠ˜å è¿‡å»*/</span>
            <span class="hljs-attribute">transform-origin</span>: right;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">200px</span>) <span class="hljs-built_in">rotateY</span>(-<span class="hljs-number">90deg</span>);
        }
        <span class="hljs-selector-class">.right</span> {
            <span class="hljs-comment">/* å³ä¾§å…ˆxè½´æ­£æ–¹å‘å¹³ç§»è¿‡å»ç„¶åå†å‘å·¦æŠ˜å è¿‡å»*/</span>
            <span class="hljs-attribute">transform-origin</span>: left;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">400px</span>) <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">90deg</span>);
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ç«‹ä½“ç›’å­ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mybox"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"face before"</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"face after"</span>&gt;</span>12<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"face top"</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"face bottom"</span>&gt;</span>22<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"face left"</span>&gt;</span>31<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"face right"</span>&gt;</span>32<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-4">5. ç¯ç¯ç›¸æ‰£</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/330b824cfc1d4c1b8b960e39a3eba7c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ3J5c3RhbDMyOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764141025&amp;x-signature=bbEhSnoILVSnzwOMpL79yeectFM%3D" alt="ring.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç¯ç¯ç›¸æ‰£<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.wrap</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid red;
            <span class="hljs-attribute">transform-style</span>: preserve-<span class="hljs-number">3</span>d;
        }
        <span class="hljs-selector-class">.ring</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
            <span class="hljs-attribute">float</span>: left;
        }
        <span class="hljs-selector-class">.tomato</span> {
            <span class="hljs-attribute">border</span>: <span class="hljs-number">10px</span> solid tomato;
            <span class="hljs-attribute">margin-right</span>: -<span class="hljs-number">60px</span>;
        }
        <span class="hljs-selector-class">.skyblue</span> {
            <span class="hljs-attribute">border</span>: <span class="hljs-number">10px</span> solid skyblue;
            <span class="hljs-comment">/* è“è‰²ç¯å‘xè½´æ—‹è½¬ */</span>
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateX</span>(<span class="hljs-number">1deg</span>);
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wrap"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ring tomato"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ring skyblue"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ²¹çŒ´è„šæœ¬æ‹¦æˆªfetchå’Œxhrè¯·æ±‚ï¼Œå®ç°ä¿®æ”¹æœåŠ¡ç«¯æ¥å£åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7574230586970161158</link>    <guid>https://juejin.cn/post/7574230586970161158</guid>    <pubDate>2025-11-19T07:30:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574230586970161158" data-draft-id="7574007967886377023" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ²¹çŒ´è„šæœ¬æ‹¦æˆªfetchå’Œxhrè¯·æ±‚ï¼Œå®ç°ä¿®æ”¹æœåŠ¡ç«¯æ¥å£åŠŸèƒ½"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-19T07:30:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mine_mine"/> <meta itemprop="url" content="https://juejin.cn/user/1503787635454567"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ²¹çŒ´è„šæœ¬æ‹¦æˆªfetchå’Œxhrè¯·æ±‚ï¼Œå®ç°ä¿®æ”¹æœåŠ¡ç«¯æ¥å£åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1503787635454567/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mine_mine
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:30:34.000Z" title="Wed Nov 19 2025 07:30:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä½¿ç”¨è¯´æ˜</h3>
<ol>
<li>ä¿®æ”¹ç¬¬7è¡Œçš„<code>match</code></li>
<li>ç¬¬15~34è¡Œï¼Œæ˜¯æˆ‘è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦æ”¹æˆä½ è‡ªå·±çš„</li>
<li>ç¬¬42è¡Œçš„<code>API_CONFIG</code>å®šä¹‰äº†æ¯ä¸ªæ¥å£çš„åŒ¹é…æ–¹å¼å’Œå›è°ƒå‡½æ•°ï¼Œä¹Ÿéœ€è¦æ”¹æˆä½ è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘</li>
<li>ä¿®æ”¹å®Œæˆåï¼Œå¤åˆ¶åˆ°æ²¹çŒ´è„šæœ¬ä¸­å³å¯</li>
</ol>
<h3 data-id="heading-1">ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ==UserScript==</span>
<span class="hljs-comment">// @name         æ¥å£ä¿®æ”¹è„šæœ¬</span>
<span class="hljs-comment">// @namespace    http://tampermonkey.net/</span>
<span class="hljs-comment">// @version      1.1</span>
<span class="hljs-comment">// @description  é€šç”¨æ¥å£æ‹¦æˆªå’Œå“åº”ä¿®æ”¹è„šæœ¬ï¼Œæ”¯æŒè‡ªå®šä¹‰é…ç½®</span>
<span class="hljs-comment">// @author       You</span>
<span class="hljs-comment">// @match        *://*/*</span>
<span class="hljs-comment">// @grant        unsafeWindow</span>
<span class="hljs-comment">// @run-at       document-start</span>
<span class="hljs-comment">// ==/UserScript==</span>
(<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-string">'use strict'</span>;

    <span class="hljs-comment">// æµ‹è¯•ç¯å¢ƒè´¦å·ä¸ç”Ÿäº§ç¯å¢ƒæ ‡è¯†ï¼ˆä¸šåŠ¡åœºæ™¯ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰ï¼‰</span>
    <span class="hljs-keyword">const</span> currentAccount = <span class="hljs-string">"acc1"</span>;

    <span class="hljs-keyword">const</span> accountConf = {
        <span class="hljs-string">"acc1"</span>: {
            <span class="hljs-string">"æ€»äººæ•°"</span>: <span class="hljs-number">400</span>,
            <span class="hljs-string">"deptMemberCount"</span>: {
                <span class="hljs-string">"éƒ¨é—¨1"</span>: <span class="hljs-number">150</span>,
                <span class="hljs-string">"éƒ¨é—¨2"</span>: <span class="hljs-number">80</span>,
            },
        },
        <span class="hljs-string">"acc2"</span>: {
            <span class="hljs-string">"æ€»äººæ•°"</span>: <span class="hljs-number">3574</span>,
            <span class="hljs-string">"deptMemberCount"</span>: {
                <span class="hljs-string">"éƒ¨é—¨1"</span>: <span class="hljs-number">3380</span>,
                <span class="hljs-string">"éƒ¨é—¨2"</span>: <span class="hljs-number">1256</span>,
            },
        }
    }

    <span class="hljs-keyword">const</span> config = accountConf[currentAccount] || accountConf[<span class="hljs-string">"acc1"</span>];

    <span class="hljs-comment">// ç”¨äºå­˜å‚¨è¯·æ±‚ä¿¡æ¯çš„Map</span>
    <span class="hljs-keyword">const</span> requestMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

    <span class="hljs-comment">// æ¥å£åœ°å€ä¸ä¿®æ”¹å›è°ƒå‡½æ•°çš„æ˜ å°„</span>
    <span class="hljs-comment">// æ¥å£åœ°å€ä½¿ç”¨çš„æ˜¯ url.includes æ–¹å¼åŒ¹é…ï¼Œå¯æ ¹æ®éœ€è¦ä¿®æ”¹</span>
    <span class="hljs-comment">// å›è°ƒå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šresponseï¼ˆå“åº”æ•°æ®å¯¹è±¡ï¼‰ï¼ŒrequestInfoï¼ˆè¯·æ±‚ä¿¡æ¯å¯¹è±¡ï¼‰</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">API_CONFIG</span> = {
        <span class="hljs-string">'get_sub_depts_page'</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">response, requestInfo</span>) {
            <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">result</span>) <span class="hljs-keyword">return</span> response;

            <span class="hljs-keyword">const</span> list = response.<span class="hljs-property">result</span>.<span class="hljs-property">list</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; list.<span class="hljs-property">length</span>; i++) {
                <span class="hljs-keyword">if</span> (list[i][<span class="hljs-string">'name'</span>] <span class="hljs-keyword">in</span> config[<span class="hljs-string">'deptMemberCount'</span>]) {
                    list[i].<span class="hljs-property">memberCount</span> = config[<span class="hljs-string">'deptMemberCount'</span>][list[i][<span class="hljs-string">'name'</span>]];
                    <span class="hljs-keyword">continue</span>;
                }
            }
            <span class="hljs-keyword">return</span> response;
        },
        <span class="hljs-string">'statistic_realtime'</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">response, requestInfo</span>) {
            <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">result</span>) <span class="hljs-keyword">return</span> response;

            response.<span class="hljs-property">result</span>.<span class="hljs-property">activeCount</span> = config[<span class="hljs-string">'æ€»äººæ•°'</span>] - <span class="hljs-number">1</span>;
            response.<span class="hljs-property">result</span>.<span class="hljs-property">memCount</span> = config[<span class="hljs-string">'æ€»äººæ•°'</span>];
            <span class="hljs-keyword">return</span> response;
        },
        <span class="hljs-comment">// ...</span>
    };

    <span class="hljs-comment">// XHR æ‹¦æˆª</span>
    <span class="hljs-keyword">const</span> originalOpen = <span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">open</span>;
    <span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">open</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">method, url</span>) {
        <span class="hljs-comment">// å­˜å‚¨è¯·æ±‚ä¿¡æ¯</span>
        requestMap.<span class="hljs-title function_">set</span>(<span class="hljs-variable language_">this</span>, {
            <span class="hljs-attr">method</span>: method,
            <span class="hljs-attr">url</span>: url,
            <span class="hljs-attr">body</span>: <span class="hljs-literal">null</span> <span class="hljs-comment">// XHRçš„bodyä¼šåœ¨sendæ—¶è®¾ç½®</span>
        });

        <span class="hljs-comment">// æŸ¥æ‰¾åŒ¹é…çš„æ¥å£é…ç½®</span>
        <span class="hljs-keyword">let</span> matchedCallback = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [path, callback] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-variable constant_">API_CONFIG</span>)) {
            <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">includes</span>(path)) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‹¦æˆªåˆ°æ¥å£: <span class="hljs-subst">${url}</span>`</span>);
                matchedCallback = callback;
                <span class="hljs-keyword">break</span>;
            }
        }

        <span class="hljs-keyword">if</span> (matchedCallback) {
            <span class="hljs-keyword">const</span> originalOnReadyStateChange = <span class="hljs-variable language_">this</span>.<span class="hljs-property">onreadystatechange</span>;
            <span class="hljs-keyword">const</span> xhr = <span class="hljs-variable language_">this</span>;

            <span class="hljs-variable language_">this</span>.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
                <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span> &amp;&amp; xhr.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-keyword">const</span> response = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>);
                        <span class="hljs-keyword">const</span> requestInfo = requestMap.<span class="hljs-title function_">get</span>(xhr) || {};
                        <span class="hljs-keyword">const</span> modifiedResponse = <span class="hljs-title function_">matchedCallback</span>(response, requestInfo);

                        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(xhr, <span class="hljs-string">'responseText'</span>, {
                            <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
                            <span class="hljs-attr">value</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(modifiedResponse)
                        });

                        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(xhr, <span class="hljs-string">'response'</span>, {
                            <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
                            <span class="hljs-attr">value</span>: modifiedResponse
                        });
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`xhr - <span class="hljs-subst">${url}</span> - å·²ä¿®æ”¹`</span>);
                    } <span class="hljs-keyword">catch</span> (e) {
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¿®æ”¹å“åº”å¤±è´¥:'</span>, e);
                    }
                }

                <span class="hljs-keyword">if</span> (originalOnReadyStateChange) {
                    originalOnReadyStateChange.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
                }
            };
        }

        originalOpen.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
    };

    <span class="hljs-comment">// XHR send æ‹¦æˆªï¼Œç”¨äºè·å–è¯·æ±‚ä½“</span>
    <span class="hljs-keyword">const</span> originalSend = <span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span>;
    <span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">body</span>) {
        <span class="hljs-comment">// æ›´æ–°è¯·æ±‚ä¿¡æ¯ä¸­çš„body</span>
        <span class="hljs-keyword">const</span> requestInfo = requestMap.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>);
        <span class="hljs-keyword">if</span> (requestInfo) {
            requestInfo.<span class="hljs-property">body</span> = body;
        }

        <span class="hljs-keyword">return</span> originalSend.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
    };

    <span class="hljs-comment">// Fetch æ‹¦æˆª</span>
    <span class="hljs-keyword">const</span> originalFetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>;

    <span class="hljs-variable language_">window</span>.<span class="hljs-property">unsafeWindow</span>.<span class="hljs-property">fetch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">input, init</span>) {
        <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span> ? input : input.<span class="hljs-property">url</span>;
        <span class="hljs-keyword">const</span> method = (init &amp;&amp; init.<span class="hljs-property">method</span>) || <span class="hljs-string">'GET'</span>;
        <span class="hljs-keyword">const</span> body = (init &amp;&amp; init.<span class="hljs-property">body</span>) || <span class="hljs-literal">null</span>;

        <span class="hljs-comment">// æŸ¥æ‰¾åŒ¹é…çš„æ¥å£é…ç½®</span>
        <span class="hljs-keyword">let</span> matchedCallback = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [path, callback] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-variable constant_">API_CONFIG</span>)) {
            <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">includes</span>(path)) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‹¦æˆªåˆ°fetchè¯·æ±‚: <span class="hljs-subst">${url}</span>`</span>);
                matchedCallback = callback;
                <span class="hljs-keyword">break</span>;
            }
        }

        <span class="hljs-keyword">if</span> (!matchedCallback) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">originalFetch</span>(input, init);
        }

        <span class="hljs-comment">// åˆ›å»ºè¯·æ±‚ä¿¡æ¯å¯¹è±¡</span>
        <span class="hljs-keyword">const</span> requestInfo = {
            <span class="hljs-attr">method</span>: method,
            <span class="hljs-attr">url</span>: url,
            <span class="hljs-attr">body</span>: body
        };

        <span class="hljs-keyword">return</span> <span class="hljs-title function_">originalFetch</span>(input, init).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
            <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">text</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">text</span> =&gt;</span> {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(text);
                    <span class="hljs-keyword">const</span> modifiedData = <span class="hljs-title function_">matchedCallback</span>(data, requestInfo);
                    <span class="hljs-keyword">const</span> modifiedText = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(modifiedData);

                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`fetch - <span class="hljs-subst">${url}</span> - å·²ä¿®æ”¹`</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(modifiedText, {
                        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
                        <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
                        <span class="hljs-attr">headers</span>: response.<span class="hljs-property">headers</span>
                    });
                } <span class="hljs-keyword">catch</span> (e) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¿®æ”¹fetchå“åº”å¤±è´¥:'</span>, e);
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(text, {
                        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
                        <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
                        <span class="hljs-attr">headers</span>: response.<span class="hljs-property">headers</span>
                    });
                }
            });
        });
    };

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥å£ä¿®æ”¹è„šæœ¬å·²åŠ è½½ï¼Œå½“å‰é…ç½®çš„æ¥å£æ•°é‡:'</span>, <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable constant_">API_CONFIG</span>).<span class="hljs-property">length</span>);
})();
</code></pre>
<h3 data-id="heading-2">å…¶ä»–è¯´æ˜</h3>
<ol>
<li>æ–‡ç« å‚è€ƒäº†<a href="https://juejin.cn/post/7135590843544502308" target="_blank" title="https://juejin.cn/post/7135590843544502308">æ²¹çŒ´è„šæœ¬é‡å†™fetchå’Œxhrè¯·æ±‚</a>ï¼Œå†åŠ ä¸Šå¤§æ¨¡å‹æ”¹æˆæ‰¹å¤„ç†çš„æ–¹å¼ï¼Œæ„Ÿè°¢å¤§ä½¬çš„åˆ†äº«ã€‚</li>
<li>é™¤äº†ä½¿ç”¨æ²¹çŒ´å¤–ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.scriptcat.org%2Fdocs%2Fuse%2Fscript_installation%2F" target="_blank" title="https://docs.scriptcat.org/docs/use/script_installation/" ref="nofollow noopener noreferrer">è„šæœ¬çŒ«</a>ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</li>
<li>æœ¬åœ°è°ƒè¯•æœŸé—´ï¼Œä¸ºäº†æ–¹ä¾¿å†™ä»£ç ï¼Œå¯ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F165517728" target="_blank" title="https://zhuanlan.zhihu.com/p/165517728" ref="nofollow noopener noreferrer">åˆ©ç”¨@requireè°ƒç”¨æœ¬åœ°è„šæœ¬çš„æ–¹æ³•</a>ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Compose ä¸­çš„ç³»ç»ŸåŒºåŸŸé€‚é…]]></title>    <link>https://juejin.cn/post/7574020645863473203</link>    <guid>https://juejin.cn/post/7574020645863473203</guid>    <pubDate>2025-11-19T07:31:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574020645863473203" data-draft-id="7574040813749354547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Compose ä¸­çš„ç³»ç»ŸåŒºåŸŸé€‚é…"/> <meta itemprop="keywords" content="Android,Android Jetpack"/> <meta itemprop="datePublished" content="2025-11-19T07:31:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ¨å­äºˆå½¤"/> <meta itemprop="url" content="https://juejin.cn/user/2691232911860727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Compose ä¸­çš„ç³»ç»ŸåŒºåŸŸé€‚é…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2691232911860727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ¨å­äºˆå½¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:31:33.000Z" title="Wed Nov 19 2025 07:31:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œç•Œé¢å…ƒç´ å¸¸å¸¸éœ€è¦é¿å¼€ç³»ç»Ÿå…³é”®åŒºåŸŸï¼ˆå¦‚çŠ¶æ€æ ã€å¯¼èˆªæ ï¼‰å’Œä¸´æ—¶å‡ºç°çš„äº¤äº’åŒºåŸŸï¼ˆå¦‚è¾“å…¥æ³•ï¼‰ï¼Œä»¥ç¡®ä¿å†…å®¹å®Œæ•´å¯è§ä¸”äº¤äº’æµç•…ã€‚Compose æä¾›äº†è¾ƒå¤šä¾¿æ·çš„ Modifier æ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…è½»æ¾å®ç°è¿™ç±»é€‚é…éœ€æ±‚ï¼Œæ— éœ€æ‰‹åŠ¨è®¡ç®—å¤æ‚çš„è¾¹è·å€¼ã€‚</p>
<h2 data-id="heading-0">å¸¸ç”¨ç³»ç»ŸåŒºåŸŸ Padding Modifier</h2>
<ol>
<li>
<p><strong><code>Modifier.statusBarsPadding()</code></strong></p>
<p>ä¸ºç»„ä»¶é¡¶éƒ¨æ·»åŠ ä¸çŠ¶æ€æ ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Ffoundation%2Flayout%2Fpackage-summary%23(androidx.compose.foundation.layout.WindowInsets.Companion).statusBars()" target="_blank" title="https://developer.android.google.cn/reference/kotlin/androidx/compose/foundation/layout/package-summary#(androidx.compose.foundation.layout.WindowInsets.Companion).statusBars()" ref="nofollow noopener noreferrer">StatusBar</a>ï¼‰åŒ¹é…çš„å†…è¾¹è·ï¼Œé¿å…å†…å®¹è¢«é¡¶éƒ¨çŠ¶æ€æ é®æŒ¡ã€‚</p>
</li>
<li>
<p><strong><code>Modifier.navigationBarsPadding()</code></strong></p>
<p>ä¸ºç»„ä»¶æ·»åŠ ä¸å¯¼èˆªæ ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Ffoundation%2Flayout%2Fpackage-summary%23(androidx.compose.foundation.layout.WindowInsets.Companion).navigationBars()" target="_blank" title="https://developer.android.google.cn/reference/kotlin/androidx/compose/foundation/layout/package-summary#(androidx.compose.foundation.layout.WindowInsets.Companion).navigationBars()" ref="nofollow noopener noreferrer">NavigationBar</a>ï¼‰åŒ¹é…çš„å†…è¾¹è·ï¼Œé€‚é…è™šæ‹Ÿå¯¼èˆªé”®æˆ–å…¨é¢å±æ‰‹åŠ¿åŒºåŸŸã€‚</p>
</li>
<li>
<p><strong><code>Modifier.imePadding()</code></strong></p>
<p>å½“è¾“å…¥æ³•ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.google.cn%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Ffoundation%2Flayout%2Fpackage-summary%3Fhl%3Dzh-cn%23(androidx.compose.foundation.layout.WindowInsets.Companion).ime()" target="_blank" title="https://developer.android.google.cn/reference/kotlin/androidx/compose/foundation/layout/package-summary?hl=zh-cn#(androidx.compose.foundation.layout.WindowInsets.Companion).ime()" ref="nofollow noopener noreferrer">IME</a>ï¼‰å¼¹å‡ºæ—¶ï¼Œä¸ºç»„ä»¶åº•éƒ¨æ·»åŠ ä¸è¾“å…¥æ³•é«˜åº¦åŒ¹é…çš„å†…è¾¹è·ï¼Œç¡®ä¿è¾“å…¥æ¡†æˆ–åº•éƒ¨æŒ‰é’®ä¸ä¼šè¢«è¾“å…¥æ³•é®æŒ¡ã€‚</p>
</li>
</ol>
<h3 data-id="heading-1">ä½¿ç”¨ç¤ºä¾‹ï¼š</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ImePaddingDemo</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier)</span></span> {
    Column(
        modifier = modifier
            .fillMaxWidth()
            <span class="hljs-comment">// é€‚é…çŠ¶æ€æ å’Œå¯¼èˆªæ ï¼Œç¡®ä¿æ•´ä½“å¸ƒå±€é¿å¼€ç³»ç»Ÿå›ºå®šåŒºåŸŸ</span>
            .statusBarsPadding()
            .navigationBarsPadding()
            <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰å†…è¾¹è·ï¼Œè°ƒæ•´å†…å®¹ä¸è¾¹ç¼˜çš„è·ç¦»</span>
            .padding(horizontal = <span class="hljs-number">30.</span>dp, vertical = <span class="hljs-number">20.</span>dp)
            <span class="hljs-comment">// æ·»åŠ è¾“å…¥æ³•é€‚é…ï¼Œç¡®ä¿è¾“å…¥æ³•å¼¹å‡ºæ—¶å†…å®¹ä¸Šç§»ä¸è¢«é®æŒ¡</span>
            .imePadding(),
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        <span class="hljs-comment">// è¾“å…¥æ¡†</span>
        TextField(
            value = <span class="hljs-string">""</span>,
            onValueChange = {}
        )
        Spacer(modifier = Modifier.weight(<span class="hljs-number">1f</span>))
        Button(
            onClick = {},
            modifier = Modifier
                .fillMaxWidth()
                .height(<span class="hljs-number">48.</span>dp)
        ) {
            Text(text = <span class="hljs-string">"ç¡®å®š"</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-2">æ³¨æ„äº‹é¡¹</h3>
<p>ä½¿ç”¨ imePadding() æ—¶ï¼Œéœ€åœ¨ AndroidManifest.xml ä¸­ä¸ºå¯¹åº” Activity æ·»åŠ é…ç½®ï¼Œå¦åˆ™åœ¨ Android 11ï¼ˆAPI 30ï¼‰ä»¥ä¸‹è®¾å¤‡å¯èƒ½æ— æ³•ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".YourActivity"</span>
    <span class="hljs-attr">android:windowSoftInputMode</span>=<span class="hljs-string">"adjustResize"</span>  &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">å…³é”®é…ç½®</span> <span class="hljs-attr">--</span>&gt;</span>
    ... &gt;
<span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>

</code></pre>
<h3 data-id="heading-3">æ•ˆæœå¯¹æ¯”</h3>
<p>é€šè¿‡ä¸Šè¿°é€‚é…ï¼Œå¯åœ¨ä¸åŒç³»ç»Ÿç‰ˆæœ¬ä¸­è·å¾—ä¸€è‡´çš„ä½“éªŒï¼š å·¦è¾¹æ˜¯ Android 15ï¼Œ å³è¾¹æ˜¯ Android 10 ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0aaa1658700a431490645a7976369a24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyo5a2Q5LqI5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143572&amp;x-signature=2p08N%2BwRJr6OB7kgD%2F9cYaLsoB8%3D" alt="cxxyv-i0rfl.gif" width="30%" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8ea828e085f45388d0c2e942c148d12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyo5a2Q5LqI5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143572&amp;x-signature=9MCez4No1LrF0eY1i1wXyxRvc0I%3D" alt="jot8b-zuczo.gif" width="33%" loading="lazy"/>
<h2 data-id="heading-4">æºç åˆ†æ</h2>
<p><em>statusBarsPadding()ã€navigationBarsPadding()ã€imePadding() éƒ½æ˜¯é€šè¿‡ windowInsetsPadding() æ¥å®ç°çš„ã€‚</em></p>
<p>ä»¥çŠ¶æ€æ ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">actual</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> Modifier.<span class="hljs-title">statusBarsPadding</span><span class="hljs-params">()</span></span> =
    windowInsetsPadding(debugInspectorInfo { name = <span class="hljs-string">"statusBarsPadding"</span> } ) { statusBars } 
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Suppress(<span class="hljs-string">"NOTHING_TO_INLINE"</span>)</span>
<span class="hljs-meta">@Stable</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> Modifier.<span class="hljs-title">windowInsetsPadding</span><span class="hljs-params">(
    <span class="hljs-keyword">noinline</span> inspectorInfo: <span class="hljs-type">InspectorInfo</span>.() -&gt; <span class="hljs-type">Unit</span>,
    <span class="hljs-keyword">crossinline</span> insetsCalculation: <span class="hljs-type">WindowInsetsHolder</span>.() -&gt; <span class="hljs-type">WindowInsets</span>,
)</span></span>: Modifier =
    composed(inspectorInfo) {
        <span class="hljs-keyword">val</span> composeInsets = WindowInsetsHolder.current()
        remember(composeInsets) {
            <span class="hljs-keyword">val</span> insets = composeInsets.insetsCalculation()
            InsetsPaddingModifier(insets)
        }
    }
</code></pre>
<h3 data-id="heading-5"><strong>WindowInsetsHolder.current()</strong></h3>
<p>WindowInsetsHolder æ˜¯ Compose å†…éƒ¨ç»´æŠ¤çš„ä¸€ä¸ªâ€œå½“å‰çª—å£ Insets æä¾›è€…â€ï¼Œé‡Œé¢æœ‰ statusBars / navigationBars / ime ç­‰å„ç§ insetsã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">current</span><span class="hljs-params">()</span></span>: WindowInsetsHolder {
    <span class="hljs-keyword">val</span> view = LocalView.current
    <span class="hljs-keyword">val</span> insets = getOrCreateFor(view)

    DisposableEffect(insets) {
        insets.incrementAccessors(view)
        onDispose { insets.decrementAccessors(view) }
    }
    <span class="hljs-keyword">return</span> insets
}

<span class="hljs-comment">/**
 * Returns the [WindowInsetsHolder] associated with [view] or creates one and associates it.
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getOrCreateFor</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span>: WindowInsetsHolder {
    <span class="hljs-keyword">return</span> synchronized(viewMap) {
        viewMap.getOrPut(view) {
            <span class="hljs-keyword">val</span> insets = <span class="hljs-literal">null</span>
            WindowInsetsHolder(insets, view)
        }
    }
}
</code></pre>
<p>LocalView.current ç”¨äºåœ¨ Compose ä¸­è·å–å½“å‰ç»„åˆæ ‘æ‰€å…³è”çš„ AndroidComposeViewã€‚é€šè¿‡è¯¥ View è¿›ä¸€æ­¥è°ƒç”¨ getOrCreateFor() æ–¹æ³•ï¼Œè·å– WindowInsetsHolder å¯¹è±¡ã€‚</p>
<p>æ ¸å¿ƒå°±æ˜¯ incrementAccessors æ–¹æ³•ï¼Œé¦–æ¬¡è®¿é—®æ—¶ä¸º View æ³¨å†Œ InsetsListener ç›‘å¬å™¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">incrementAccessors</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span> {
    <span class="hljs-keyword">if</span> (accessCount == <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// add listeners</span>
        ViewCompat.setOnApplyWindowInsetsListener(view, insetsListener)

        <span class="hljs-keyword">if</span> (view.isAttachedToWindow) {
            view.requestApplyInsets()
        }
        view.addOnAttachStateChangeListener(insetsListener)

        ViewCompat.setWindowInsetsAnimationCallback(view, insetsListener)
    }
    accessCount++
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InsetsListener</span>(<span class="hljs-keyword">val</span> composeInsets: WindowInsetsHolder) :
    WindowInsetsAnimationCompat.Callback(
        <span class="hljs-keyword">if</span> (composeInsets.consumes) DISPATCH_MODE_STOP <span class="hljs-keyword">else</span> DISPATCH_MODE_CONTINUE_ON_SUBTREE
    ),
    Runnable,
    OnApplyWindowInsetsListener,
    OnAttachStateChangeListener {
    

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onProgress</span><span class="hljs-params">(
        insets: <span class="hljs-type">WindowInsetsCompat</span>,
        runningAnimations: <span class="hljs-type">MutableList</span>&lt;<span class="hljs-type">WindowInsetsAnimationCompat</span>&gt;,
    )</span></span>: WindowInsetsCompat {
        composeInsets.update(insets)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (composeInsets.consumes) WindowInsetsCompat.CONSUMED <span class="hljs-keyword">else</span> insets
    }


    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onApplyWindowInsets</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, insets: <span class="hljs-type">WindowInsetsCompat</span>)</span></span>: WindowInsetsCompat {
        <span class="hljs-comment">// Keep track of the most recent insets we've seen, to ensure onEnd will always use the</span>
        <span class="hljs-comment">// most recently acquired insets</span>
        savedInsets = insets
        composeInsets.updateImeAnimationTarget(insets)
        <span class="hljs-keyword">if</span> (prepared) {
            <span class="hljs-comment">// There may be no callback on R if the animation is canceled after onPrepare(),</span>
            <span class="hljs-comment">// so we won't know if the onPrepare() was canceled or if this is an</span>
            <span class="hljs-comment">// onApplyWindowInsets() after the cancelation. We'll just post the value</span>
            <span class="hljs-comment">// and if it is still preparing then we just use the value.</span>
            <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT == Build.VERSION_CODES.R) {
                view.post(<span class="hljs-keyword">this</span>)
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!runningAnimation) {
            <span class="hljs-comment">// If an animation is running, rely on onProgress() to update the insets</span>
            <span class="hljs-comment">// On APIs less than 30 where the IME animation is backported, this avoids reporting</span>
            <span class="hljs-comment">// the final insets for a frame while the animation is running.</span>
            composeInsets.updateImeAnimationSource(insets)
            composeInsets.update(insets)
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (composeInsets.consumes) WindowInsetsCompat.CONSUMED <span class="hljs-keyword">else</span> insets
    }

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>InsetsListener æŒæœ‰ WindowInsetsHolderï¼ˆcomposeInsetsï¼‰ï¼Œåœ¨ä¸¤ç±»åœºæ™¯è§¦å‘æ›´æ–°ï¼š</p>
<ul>
<li>onProgressï¼šè½¯é”®ç›˜åŠ¨ç”»çŠ¶æ€ä¸‹æ›´æ–° Insets</li>
<li>onApplyWindowInsetsï¼šéåŠ¨ç”»çŠ¶æ€ä¸‹æ›´æ–° Insets</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">update</span><span class="hljs-params">(windowInsets: <span class="hljs-type">WindowInsetsCompat</span>, types: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span>)</span></span> {
     ime.update(insets, types)
     navigationBars.update(insets, types)
     statusBars.update(insets, types)
     <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>WindowInsetsHolder çš„ update æ–¹æ³•ä¼šå°†åŸå§‹ WindowInsetsCompat åˆ†åˆ«æ›´æ–°è¾“å…¥æ³•ã€å¯¼èˆªæ ã€çŠ¶æ€æ ç­‰å­åŒºåŸŸçš„ Insets ä¿¡æ¯ï¼Œä¸ºä¸Šå±‚é€‚é…æä¾›æ•°æ®æ”¯æŒã€‚</p>
<h3 data-id="heading-6">InsetsPaddingModifier(insets)</h3>
<p>å®ƒåŒæ—¶åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>LayoutModifier â€”â€” åœ¨ layout é˜¶æ®µâ€œå¢åŠ  paddingâ€</li>
<li>ModifierLocalConsumer â€”â€” è¯»å–ä¸Šæ¸¸å·²ç»â€œæ¶ˆè´¹è¿‡â€çš„ insets</li>
<li>ModifierLocalProvider â€”â€” æŠŠâ€œå·²æ¶ˆè´¹çš„ insetsâ€ç»§ç»­å‘ä¸‹æ¸¸ä¼ é€’</li>
</ol>
<p>æ‰€ä»¥å®ƒæ—¢æ˜¯ <strong>Insets çš„æ¶ˆè´¹è€…</strong>ï¼Œä¹Ÿæ˜¯ <strong>Insets æ¶ˆè´¹æƒ…å†µçš„æä¾›è€…</strong>ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">val</span> ModifierLocalConsumedWindowInsets = modifierLocalOf { WindowInsets(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) }

<span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InsetsPaddingModifier</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> insets: WindowInsets) :
    LayoutModifier, ModifierLocalConsumer, ModifierLocalProvider&lt;WindowInsets&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> unconsumedInsets: WindowInsets <span class="hljs-keyword">by</span> mutableStateOf(insets)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> consumedInsets: WindowInsets <span class="hljs-keyword">by</span> mutableStateOf(insets)

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> MeasureScope.<span class="hljs-title">measure</span><span class="hljs-params">(
        measurable: <span class="hljs-type">Measurable</span>,
        constraints: <span class="hljs-type">Constraints</span>,
    )</span></span>: MeasureResult {
        <span class="hljs-keyword">val</span> left = unconsumedInsets.getLeft(<span class="hljs-keyword">this</span>, layoutDirection)
        <span class="hljs-keyword">val</span> top = unconsumedInsets.getTop(<span class="hljs-keyword">this</span>)
        <span class="hljs-keyword">val</span> right = unconsumedInsets.getRight(<span class="hljs-keyword">this</span>, layoutDirection)
        <span class="hljs-keyword">val</span> bottom = unconsumedInsets.getBottom(<span class="hljs-keyword">this</span>)

        <span class="hljs-keyword">val</span> horizontal = left + right
        <span class="hljs-keyword">val</span> vertical = top + bottom

        <span class="hljs-keyword">val</span> childConstraints = constraints.offset(-horizontal, -vertical)
        <span class="hljs-keyword">val</span> placeable = measurable.measure(childConstraints)

        <span class="hljs-keyword">val</span> width = constraints.constrainWidth(placeable.width + horizontal)
        <span class="hljs-keyword">val</span> height = constraints.constrainHeight(placeable.height + vertical)
        <span class="hljs-keyword">return</span> layout(width, height) { placeable.place(left, top) }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onModifierLocalsUpdated</span><span class="hljs-params">(scope: <span class="hljs-type">ModifierLocalReadScope</span>)</span></span> {
        with(scope) {
            <span class="hljs-keyword">val</span> consumed = ModifierLocalConsumedWindowInsets.current
            unconsumedInsets = insets.exclude(consumed)
            consumedInsets = consumed.union(insets)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> key: ProvidableModifierLocal&lt;WindowInsets&gt;
        <span class="hljs-keyword">get</span>() = ModifierLocalConsumedWindowInsets

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> value: WindowInsets
        <span class="hljs-keyword">get</span>() = consumedInsets

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<ol>
<li>
<p><strong>è®¡ç®— padding</strong></p>
<ul>
<li>unconsumedInsetsï¼šå½“å‰è¿™ä¸ª Modifier è¿˜éœ€è¦å¤„ç†çš„ Insetsï¼ˆå·²ç»å‰”æ‰ä¸Šæ¸¸æ¶ˆè´¹è¿‡çš„éƒ¨åˆ†ï¼‰ã€‚</li>
<li>getLeft/getTop/getRight/getBottomï¼šæ ¹æ®å½“å‰ MeasureScopeï¼ˆåŒ…å« densityï¼‰å’Œ layoutDirectionï¼Œå°† WindowInsets è½¬æ¢æˆå„æ–¹å‘çš„åƒç´ å€¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>æµ‹é‡å­é¡¹ï¼šç¼©å°çº¦æŸï¼ˆç›¸å½“äºé¢„ç•™ padding ç©ºé—´ï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> childConstraints = constraints.offset(-horizontal, -vertical)
<span class="hljs-keyword">val</span> placeable = measurable.measure(childConstraints)
</code></pre>
<p>æµ‹é‡å­ç»„ä»¶æ—¶ï¼Œä¼šå…ˆæŠŠ padding å ç”¨çš„ç©ºé—´ä»çˆ¶çº¦æŸä¸­æ‰£é™¤ï¼Œè®©å­ç»„ä»¶åªåœ¨â€œæ‰£é™¤ padding åçš„å‰©ä½™ç©ºé—´â€ä¸­æµ‹é‡è‡ªå·±ã€‚è¿™æ ·ä¿è¯å­ç»„ä»¶ä¸ä¼šå ç”¨ padding åŒºåŸŸï¼Œä¹Ÿä¸ä¼šè¢«å‹ç¼©æˆ–å˜å½¢ã€‚</p>
</li>
<li>
<p><strong>å¸ƒå±€è‡ªèº«ï¼šæ‰©å±•å°ºå¯¸ + åç§»å­é¡¹</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> width = constraints.constrainWidth(placeable.width + horizontal)
<span class="hljs-keyword">val</span> height = constraints.constrainHeight(placeable.height + vertical)
<span class="hljs-keyword">return</span> layout(width, height) { placeable.place(left, top) }
</code></pre>
<ul>
<li>æ•´ä½“å¤§å° = å†…å®¹å°ºå¯¸ + padding</li>
<li>å­é¡¹æ”¾ç½®åœ¨ (left, top)ï¼Œä¹Ÿå°±æ˜¯â€œæŠŠå†…å®¹å¾€å³ä¸‹å¹³ç§»â€ï¼Œå½¢æˆ padding æ•ˆæœã€‚</li>
</ul>
</li>
<li>
<p><strong>Insets æ¶ˆè´¹æœºåˆ¶ï¼šModifierLocalConsumer +</strong> <strong>ModifierLocalProvider</strong></p>
<p>è¿™æ˜¯è¿™æ®µä»£ç æœ€æœ‰æ„æ€ã€ä¹Ÿæœ€å®¹æ˜“å¿½ç•¥çš„éƒ¨åˆ†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onModifierLocalsUpdated</span><span class="hljs-params">(scope: <span class="hljs-type">ModifierLocalReadScope</span>)</span></span> {
    with(scope) {
        <span class="hljs-keyword">val</span> consumed = ModifierLocalConsumedWindowInsets.current
        unconsumedInsets = insets.exclude(consumed)
        consumedInsets = consumed.union(insets)
    }
}

<span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> key: ProvidableModifierLocal&lt;WindowInsets&gt;
    <span class="hljs-keyword">get</span>() = ModifierLocalConsumedWindowInsets

<span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> value: WindowInsets
    <span class="hljs-keyword">get</span>() = consumedInsets
</code></pre>
<p><strong>è¿™æ®µä»£ç è´Ÿè´£ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>
<p>è¯»å–ï¼šä¸Šæ¸¸ Modifier å·²ç»æ¶ˆè´¹è¿‡å“ªäº› WindowInsets</p>
</li>
<li>
<p>å†³å®šï¼šå½“å‰ Modifier è¿˜éœ€è¦å¤„ç†å“ªäº› Insetsï¼ˆunconsumedInsetsï¼‰</p>
</li>
<li>
<p>æ›´æ–°ï¼šæ–°çš„â€œåˆ°ç›®å‰ä¸ºæ­¢å·²æ¶ˆè´¹é›†åˆâ€ï¼ˆconsumedInsets = consumed.union(insets)ï¼‰</p>
</li>
<li>
<p>æš´éœ²ï¼šæŠŠ consumedInsets æä¾›ç»™ä¸‹æ¸¸ Modifierï¼Œä½œä¸º ModifierLocalConsumedWindowInsets.current çš„æ–°å€¼</p>
</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¦â€œæ¶ˆè´¹â€ï¼Ÿ</strong></p>
<p>è€ƒè™‘ä»¥ä¸‹åœºæ™¯ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">TestDemo</span><span class="hljs-params">()</span></span> {
    Column(
        Modifier
            .fillMaxSize()
            .statusBarsPadding()
            .background(Color.Gray)
    ) {
        Box(
            Modifier
                .fillMaxSize()
                .statusBarsPadding()
                .background(Color.Red)
        )
    }
}
</code></pre>
<p>å¦‚æœä¸åšâ€œæ¶ˆè´¹â€æœºåˆ¶ï¼š</p>
<ul>
<li>
<p>å¤–å±‚ Column ä¼šæ ¹æ® statusBar Insets åŠ ä¸€å±‚ paddingTop</p>
</li>
<li>
<p>å†…å±‚ Box ä¹Ÿä¼šå†åŠ ä¸€å±‚åŒæ ·çš„ paddingTop</p>
</li>
</ul>
<p>ç°åœ¨æœ‰äº† ModifierLocal çš„â€œæ¶ˆè´¹â€æœºåˆ¶ï¼š</p>
<ul>
<li>
<p>å¤–å±‚ statusBarsPadding()ï¼š</p>
<ul>
<li>ä¸Šæ¸¸ consumed = 0</li>
<li>è‡ªå·±çš„ insets = statusBars</li>
<li>unconsumedInsets = statusBars.exclude(0) = statusBars</li>
<li>æµ‹é‡æ—¶ä½¿ç”¨å®Œæ•´ statusBar é«˜åº¦åš padding</li>
<li>è®¡ç®— consumedInsets = 0.union(statusBars) = statusBars</li>
<li>å¾€ä¸‹æ¸¸æä¾›ï¼šModifierLocalConsumedWindowInsets = statusBars</li>
</ul>
</li>
<li>
<p>å†…å±‚ statusBarsPadding()ï¼š</p>
<ul>
<li>è¯»å–åˆ°ä¸Šæ¸¸ consumed = statusBars</li>
<li>è‡ªå·±çš„ insets = statusBars</li>
<li>unconsumedInsets = statusBars.exclude(statusBars) = 0</li>
<li>æµ‹é‡æ—¶ â†’ padding ä¸º 0ï¼ˆä¸ä¼šé‡å¤é¡¶ä¸€æ¬¡ï¼‰</li>
<li>consumedInsets = statusBars union statusBars = statusBarsï¼ˆä¸å˜ï¼‰</li>
</ul>
</li>
</ul>
<p><strong>ç»“æœï¼š</strong></p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2219c37a504e4dddb05fc397befb1937~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyo5a2Q5LqI5b2k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143572&amp;x-signature=JNQid8C%2FBVGYELreRqYhECoWevc%3D" alt="" width="30%" loading="lazy"/>
<blockquote>
<p>å³ä½¿ä½ åœ¨åµŒå¥—ç»“æ„ä¸­å¤šæ¬¡ä½¿ç”¨ statusBarsPadding()ï¼Œåªæœ‰æœ€å¤–å±‚é‚£ä¸€æ¬¡ä¼šçœŸæ­£äº§ç”Ÿ paddingï¼Œå†…éƒ¨çš„è‡ªç„¶â€œå¿½ç•¥â€æ‰ã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯ exclude / union çš„ç”¨å¤„ã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è®²æ¸…ï¼šä»è¯­è¨€å­¦åˆ°æ·±åº¦å­¦ä¹ NLPè‡ªç„¶è¯­è¨€å¤„ç†]]></title>    <link>https://juejin.cn/post/7574245125027594259</link>    <guid>https://juejin.cn/post/7574245125027594259</guid>    <pubDate>2025-11-19T07:42:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574245125027594259" data-draft-id="7574230922313383942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è®²æ¸…ï¼šä»è¯­è¨€å­¦åˆ°æ·±åº¦å­¦ä¹ NLPè‡ªç„¶è¯­è¨€å¤„ç†"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-19T07:42:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è®²æ¸…ï¼šä»è¯­è¨€å­¦åˆ°æ·±åº¦å­¦ä¹ NLPè‡ªç„¶è¯­è¨€å¤„ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:42:04.000Z" title="Wed Nov 19 2025 07:42:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>åŸºç¡€æ¦‚å¿µ</strong></p>
<p>20ä¸–çºª60å¹´ä»£ï¼Œæœºå™¨æ€ä¹ˆç†è§£è‡ªç„¶è¯­è¨€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab7ae2ff4fac41479726f518dedda085~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142923&amp;x-signature=HhFpagJaX2IpJ1RTVyUhulZ7VV0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸Šå›¾æ˜¯æ—©æœŸå¯¹è‡ªç„¶è¯­è¨€å¤„ç†çš„ç†è§£</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60bd38929e964361a157b9e6042ea27b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142923&amp;x-signature=otqIAehyvqTbxnF%2F6O%2Fz%2FUGp9%2Bg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰å› å¯¹äººç±»è¯­è¨€çš„è®¡ç®—å»ºæ¨¡ä¸åˆ†æéœ€æ±‚æ—¥ç›Šå¢é•¿è€Œå¤‡å—å…³æ³¨ã€‚å…¶åº”ç”¨åœºæ™¯å·²è¦†ç›–æœºå™¨ç¿»è¯‘ã€åƒåœ¾é‚®ä»¶æ£€æµ‹ã€ä¿¡æ¯æå–ã€è‡ªåŠ¨æ‘˜è¦ã€åŒ»ç–—è¯Šæ–­åŠé—®ç­”ç³»ç»Ÿç­‰å¤šä¸ªé¢†åŸŸã€‚</p>
<p><strong>1.å‰è¨€</strong></p>
<p>è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä½œä¸ºäººå·¥æ™ºèƒ½ä¸è¯­è¨€å­¦çš„äº¤å‰é¢†åŸŸï¼Œä¸“æ³¨äºé€šè¿‡è®¡ç®—æœºæŠ€æœ¯è§£æäººç±»è¯­è¨€ä¸­çš„è¯­å¥æˆ–è¯æ±‡ã€‚</p>
<p>å…¶æ ¸å¿ƒç›®æ ‡åœ¨äºå‡å°‘ç”¨æˆ·æ“ä½œè´Ÿæ‹…ï¼Œå®ç°ä»¥è‡ªç„¶è¯­è¨€ä¸ºåª’ä»‹çš„äººæœºäº¤äº’ã€‚ç”±äºå¤šæ•°ç”¨æˆ·å¯¹æœºå™¨è¯­è¨€ç¼ºä¹äº†è§£ï¼ŒNLPæŠ€æœ¯ä½¿å¾—è¿™ç±»ç”¨æˆ·èƒ½å¤Ÿç›´æ¥ä½¿ç”¨æ—¥å¸¸è¯­è¨€ä¸è®¾å¤‡æ²Ÿé€šã€‚</p>
<p>è¯­è¨€æœ¬è´¨ä¸Šæ˜¯ç”±è§„åˆ™æˆ–ç¬¦å·æ„æˆçš„ç³»ç»Ÿã€‚äººä»¬é€šè¿‡ç¬¦å·çš„ç»„åˆå®ç°ä¿¡æ¯ä¼ é€’æˆ–å‘å¸ƒã€‚</p>
<p>NLPæŠ€æœ¯ä¸»è¦æ¶µç›–ä¸¤å¤§åˆ†æ”¯ï¼šè‡ªç„¶è¯­è¨€ç†è§£ï¼ˆNLUï¼‰å’Œè‡ªç„¶è¯­è¨€ç”Ÿæˆï¼ˆNLGï¼‰ï¼Œåˆ†åˆ«å¯¹åº”æ–‡æœ¬è§£æä¸å†…å®¹ç”Ÿæˆä¸¤å¤§åŠŸèƒ½ä»»åŠ¡ï¼ˆå›¾ 1ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b26db17af0314469bcbd7aee7d220561~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142923&amp;x-signature=uKxTL9AEeBhkp%2FXlKdjck1O7Crc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ 1ï¼šNLP çš„ç²—åˆ†ç±»</p>
<p>è¯­è¨€å­¦ä½œä¸ºç ”ç©¶è¯­è¨€çš„ç§‘å­¦ä½“ç³»ï¼Œæ¶µç›–å¤šä¸ªæ ¸å¿ƒåˆ†æ”¯ï¼šå…¶ä¸­éŸ³ç³»å­¦ï¼ˆPhonologyï¼‰èšç„¦å£°éŸ³è¡¨å¾ï¼Œè¯æ€å­¦ï¼ˆMorphologyï¼‰æ¢ç©¶æ„è¯è§„å¾‹ï¼Œå¥æ³•å­¦ï¼ˆSyntaxï¼‰è§£æè¯­å¥ç»“æ„ï¼Œè¯­ä¹‰å¥æ³•å­¦ï¼ˆSemantics syntaxï¼‰ä¸è¯­ç”¨å­¦ï¼ˆPragmaticsï¼‰å…±åŒæ„æˆæ„ä¹‰ç†è§£çš„åŸºç¡€æ¡†æ¶ã€‚</p>
<p>è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰çš„å…¸å‹ç ”ç©¶ä»»åŠ¡åŒ…æ‹¬ï¼šè‡ªåŠ¨æ‘˜è¦ï¼ˆå°†æ–‡æœ¬å…³é”®ä¿¡æ¯æŒ‰ç‰¹å®šæ ¼å¼æµ“ç¼©ï¼‰ã€æŒ‡ä»£æ¶ˆè§£ï¼ˆCo-Reference Resolutionï¼‰ï¼ˆè¯†åˆ«è·¨å¥å­çš„æŒ‡ä»£åŒä¸€æ€§ï¼‰ã€è¯­ç¯‡åˆ†æï¼ˆæ„å»ºæ–‡æœ¬çš„å®è§‚ç»“æ„ï¼‰ã€æœºå™¨ç¿»è¯‘ï¼ˆå®ç°è·¨è¯­è¨€è‡ªåŠ¨è½¬æ¢ï¼‰ã€è¯­ç´ åˆ‡åˆ†ï¼ˆMorphological Segmentationï¼‰ï¼ˆåˆ†è§£è¯æ±‡å¹¶æ ‡æ³¨è¯ç´ ç±»åˆ«ï¼‰ã€å‘½åå®ä½“è¯†åˆ«ï¼ˆNERï¼‰ï¼ˆå®šä½ä¸“æœ‰åè¯ï¼‰ã€å…‰å­¦å­—ç¬¦è¯†åˆ«ï¼ˆOCRï¼‰ï¼ˆä»PDFç­‰æ–‡æ¡£ä¸­æå–æ–‡å­—ï¼‰ä»¥åŠè¯æ€§æ ‡æ³¨ï¼ˆåˆ¤å®šå¥å­ä¸­æ¯ä¸ªå•è¯çš„è¯­æ³•å±æ€§ï¼‰ã€‚</p>
<p>å°½ç®¡è¿™äº›ä»»åŠ¡åœ¨è¡¨é¢å½¢æ€ä¸Šå·®å¼‚æ˜¾è‘—ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­å¾€å¾€éœ€è¦å¤šä»»åŠ¡ååŒå¤„ç†ã€‚</p>
<p><strong>2.NLP çš„å±‚çº§</strong></p>
<p>ä½œä¸ºè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸæœ€å…·è§£é‡Šæ€§çš„æ¡†æ¶ï¼Œè¯­è¨€å±‚çº§é€šè¿‡ä»¥ä¸‹ä¸‰ä¸ªå…³é”®é˜¶æ®µå®ç°æ–‡æœ¬ç”Ÿæˆï¼šâ€Œå†…å®¹è§„åˆ’â€Œï¼ˆContent Planningï¼‰ã€â€Œè¯­å¥è§„åˆ’â€Œï¼ˆSentence Planningï¼‰ä¸â€Œè¡¨å±‚å®ç°â€Œï¼ˆSurface Realizationï¼‰ã€‚ï¼ˆå›¾ 2ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f83e8ec125442ab8fc3d5414620ea82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142923&amp;x-signature=lgNcxQcyqBtcGgxHHOocdoV9aKI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ 2ï¼šNLP æ¶æ„çš„é˜¶æ®µ</p>
<p>è¯­è¨€å­¦æ˜¯æ¶‰åŠåˆ°è¯­è¨€ã€è¯­å¢ƒå’Œå„ç§è¯­è¨€å½¢å¼çš„å­¦ç§‘ã€‚ä¸ NLP ç›¸å…³çš„é‡è¦æœ¯è¯­åŒ…æ‹¬ï¼š</p>
<p>éŸ³ç³»å­¦</p>
<p>å½¢æ€å­¦</p>
<p>è¯æ±‡å­¦</p>
<p>å¥æ³•å­¦</p>
<p>è¯­ä¹‰å­¦</p>
<p>è¯­ç¯‡åˆ†æ</p>
<p>è¯­ç”¨å­¦</p>
<p><strong>3.è‡ªç„¶è¯­è¨€ç”Ÿæˆ</strong></p>
<p>NLG æ˜¯ä»å†…åœ¨è¡¨å¾ç”Ÿæˆæœ‰å«ä¹‰çš„çŸ­è¯­ã€å¥å­å’Œæ®µè½çš„å¤„ç†è¿‡ç¨‹ã€‚</p>
<p>å®ƒæ˜¯ NLP çš„ä¸€éƒ¨åˆ†ï¼ŒåŒ…æ‹¬å››ä¸ªé˜¶æ®µï¼šç¡®å®šç›®æ ‡ã€é€šè¿‡åœºæ™¯è¯„ä¼°è§„åˆ’å¦‚ä½•å®ç°ç›®æ ‡ã€å¯ç”¨çš„å¯¹è¯æºã€æŠŠè§„åˆ’å®ç°ä¸ºæ–‡æœ¬ï¼Œå¦‚ä¸‹å›¾ 3ã€‚ç”Ÿæˆä¸ç†è§£æ˜¯ç›¸åçš„è¿‡ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1492bab1ac424062920f067f3ae57159~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142923&amp;x-signature=JNqnAC8nd1VhtdfazQN5UgyKALQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ 3ï¼šNLG çš„ç»„ä»¶</p>
<p><strong>4.NLP çš„åº”ç”¨</strong></p>
<p>NLP å¯è¢«ä»–åº”ç”¨äºå„ç§é¢†åŸŸï¼Œä¾‹å¦‚æœºå™¨ç¿»è¯‘ã€åƒåœ¾é‚®ä»¶æ£€æµ‹ã€ä¿¡æ¯æå–ç­‰ã€‚åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œè¯¥è®ºæ–‡å¯¹ä»¥ä¸‹ NLP çš„åº”ç”¨è¿›è¡Œäº†ä»‹ç»ï¼š</p>
<p>æœºå™¨ç¿»è¯‘</p>
<p>æ–‡æœ¬åˆ†ç±»</p>
<p>åƒåœ¾é‚®ä»¶è¿‡æ»¤</p>
<p>ä¿¡æ¯æå–</p>
<p>è‡ªåŠ¨æ‘˜è¦</p>
<p>å¯¹è¯ç³»ç»Ÿ</p>
<p>åŒ»ç–—</p>
<p><strong>5.æ·±åº¦å­¦ä¹ ä¸­çš„ NLP</strong></p>
<p>åŸæ–‡å¯¹è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰çš„åŸºç¡€æ€§ä»‹ç»å­˜åœ¨ä¸€å®šå±€é™ï¼Œå°¤å…¶æ˜¯æœªå……åˆ†æ¶µç›–æ·±åº¦å­¦ä¹ åœ¨è¯¥é¢†åŸŸçš„æœ€æ–°åº”ç”¨è¿›å±•ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¼•ç”¨äº†åŒ—äº¬ç†å·¥å¤§å­¦çš„ç ”ç©¶è®ºæ–‡ï¼Œç³»ç»Ÿæ¢³ç†äº†NLPä¸­ä¸æ·±åº¦å­¦ä¹ ç›¸å…³çš„æ ¸å¿ƒæ¨¡å‹ä¸æ–¹æ³•ï¼ŒåŒ…æ‹¬â€Œå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰â€Œã€â€Œå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰â€Œã€â€Œé€’å½’ç¥ç»ç½‘ç»œï¼ˆRecNNï¼‰â€Œã€‚</p>
<p>åŒæ—¶æ·±å…¥æ¢è®¨äº†è®°å¿†å¢å¼ºç­–ç•¥ã€æ³¨æ„åŠ›æœºåˆ¶ï¼Œä»¥åŠæ— ç›‘ç£æ¨¡å‹ã€å¼ºåŒ–å­¦ä¹ æ¨¡å‹ã€æ·±åº¦ç”Ÿæˆæ¨¡å‹åœ¨è¯­è¨€ä»»åŠ¡ä¸­çš„å®è·µåº”ç”¨ã€‚</p>
<p>æ­¤å¤–ï¼Œè®ºæ–‡è¿˜å…¨é¢åˆ†æäº†å½“å‰ä¸»æµæ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œæ—¨åœ¨ä»æŠ€æœ¯æ¼”è¿›è§†è§’å‘ˆç°NLPçš„å‘å±•å…¨è²Œã€‚</p>
<p>è¿‘å¹´æ¥ï¼Œæ·±åº¦å­¦ä¹ åœ¨è®¡ç®—æœºè§†è§‰ä¸æ¨¡å¼è¯†åˆ«é¢†åŸŸçš„çªç ´æ€§æˆæœï¼Œæ˜¾è‘—æ¨åŠ¨äº†åŸºäºæ–°æ–¹æ³•çš„NLPç ”ç©¶çƒ­æ½®ã€‚</p>
<p>ä¼ ç»ŸNLPè§£å†³æ–¹æ¡ˆé•¿æœŸä¾èµ–æµ…å±‚æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚SVMå’Œlogisticå›å½’ï¼‰ï¼Œå…¶è®­ç»ƒè¿‡ç¨‹éœ€å¤„ç†é«˜ç»´ç¨€ç–ç‰¹å¾ã€‚</p>
<p>è€Œè¿‘å¹´æ¥ï¼ŒåŸºäºå¯†é›†å‘é‡è¡¨å¾çš„ç¥ç»ç½‘ç»œåœ¨å¤šé¡¹NLPä»»åŠ¡ä¸­è¡¨ç°ä¼˜å¼‚ï¼Œè¿™ä¸€å˜é©æºäºè¯åµŒå…¥æŠ€æœ¯ä¸æ·±åº¦å­¦ä¹ çš„æˆåŠŸç»“åˆã€‚</p>
<p>æ·±åº¦å­¦ä¹ å®ç°äº†å¤šå±‚æ¬¡è‡ªåŠ¨ç‰¹å¾å­¦ä¹ çš„å¯èƒ½ï¼Œå½»åº•æ”¹å˜äº†ä¼ ç»ŸNLPç³»ç»Ÿä¾èµ–äººå·¥è®¾è®¡ç‰¹å¾çš„è€—æ—¶ä¸”ä¸å®Œå¤‡çš„ç°çŠ¶ã€‚</p>
<p>2011å¹´ï¼ŒCollobertç­‰å­¦è€…é€šè¿‡å®éªŒè¯å®ï¼Œå³ä¾¿æ˜¯åŸºç¡€çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œä¹Ÿèƒ½åœ¨å®ä½“å‘½åè¯†åˆ«ï¼ˆNERï¼‰ã€è¯­ä¹‰è§’è‰²æ ‡æ³¨ï¼ˆSRLï¼‰ã€è¯æ€§æ ‡æ³¨ï¼ˆPOS taggingï¼‰ç­‰ä»»åŠ¡ä¸­è¶…è¶Šä¼ ç»Ÿæœ€ä¼˜æ–¹æ³•ã€‚</p>
<p>æ­¤åï¼Œæ›´å¤æ‚çš„æ·±åº¦å­¦ä¹ ç®—æ³•è¢«ç›¸ç»§æå‡ºä»¥åº”å¯¹NLPæŒ‘æˆ˜ã€‚</p>
<p>è¯¥è®ºæ–‡ä¸ä»…æ€»ç»“äº†CNNã€RNNã€RecNNç­‰å…³é”®æ¨¡å‹ï¼Œè¿˜è¯¦ç»†é˜è¿°äº†è®°å¿†å¢å¼ºç­–ç•¥ã€æ³¨æ„åŠ›æœºåˆ¶ï¼Œä»¥åŠæ— ç›‘ç£/å¼ºåŒ–å­¦ä¹ æ¨¡å‹ã€æ·±åº¦ç”Ÿæˆæ¨¡å‹åœ¨è¯­è¨€ä»»åŠ¡ä¸­çš„åˆ›æ–°åº”ç”¨ã€‚</p>
<p>2016å¹´Goldbergçš„æ•™ç¨‹è™½å¯¹NLPä¸­çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼ˆå¦‚word2vecã€CNNï¼‰è¿›è¡Œäº†æ¦‚è¿°ï¼Œä½†æœªç³»ç»Ÿè®¨è®ºå„ç±»æ¶æ„è®¾è®¡ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œå½“å‰è®ºæ–‡æä¾›äº†æ›´å®Œæ•´çš„ç†è®ºæ¡†æ¶ä¸å®è·µè§†è§’ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe5e30bbf3cd468b8bf554bb4f8c5dd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142923&amp;x-signature=urOHhyhi%2FfFYosLFqK76ZlpzMvE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‘˜è¦ï¼šé€šè¿‡å¤šå±‚å¤„ç†ç»“æ„å­¦ä¹ æ•°æ®çš„å±‚æ¬¡åŒ–ç‰¹å¾ï¼Œæ·±åº¦å­¦ä¹ æ–¹æ³•å·²åœ¨å¤šä¸ªé¢†åŸŸå–å¾—æœ€ä¼˜æ€§èƒ½ã€‚</p>
<p>è¿‘å¹´æ¥ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸæ¶Œç°å‡ºä¼—å¤šåˆ›æ–°æ¨¡å‹ä¸æŠ€æœ¯ã€‚æœ¬æ–‡ç³»ç»Ÿæ¢³ç†äº†NLPä»»åŠ¡ä¸­ä¸æ·±åº¦å­¦ä¹ ç›¸å…³çš„æ ¸å¿ƒæ¨¡å‹ä¸æ–¹æ³•ï¼Œå¹¶å…¨é¢ç»¼è¿°å…¶å‘å±•è„‰ç»œã€‚</p>
<p>é€šè¿‡å¯¹æ¯”åˆ†æå„ç±»æ¨¡å‹ï¼Œæ·±å…¥é˜é‡Šäº†NLPä¸­æ·±åº¦å­¦ä¹ çš„å†å²æ¼”è¿›ã€å½“å‰è¿›å±•ä¸æœªæ¥è¶‹åŠ¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/110700697dba4c57b07833980ece5fcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142923&amp;x-signature=SHVmfsyj2H9x0lmpsEngtU2L4A0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸€ä¸ª D ç»´å‘é‡çš„åˆ†å¸ƒå¼å‘é‡è¡¨è¾¾ï¼Œå…¶ä¸­ D &lt;&lt; Vï¼ŒV æ˜¯è¯æ±‡çš„å¤§å°ã€‚</p>
<p>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é—ªè€€NeurIPS 2025ï¼å¿«æ‰‹13ç¯‡è®ºæ–‡å…¥é€‰ï¼ŒSpotlight æˆæœè·»èº«å‰ä¸‰ï¼]]></title>    <link>https://juejin.cn/post/7574084898878324777</link>    <guid>https://juejin.cn/post/7574084898878324777</guid>    <pubDate>2025-11-19T07:40:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574084898878324777" data-draft-id="7574084898878226473" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é—ªè€€NeurIPS 2025ï¼å¿«æ‰‹13ç¯‡è®ºæ–‡å…¥é€‰ï¼ŒSpotlight æˆæœè·»èº«å‰ä¸‰ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-11-19T07:40:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿«æ‰‹æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3736571181793721"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é—ªè€€NeurIPS 2025ï¼å¿«æ‰‹13ç¯‡è®ºæ–‡å…¥é€‰ï¼ŒSpotlight æˆæœè·»èº«å‰ä¸‰ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3736571181793721/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿«æ‰‹æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:40:22.000Z" title="Wed Nov 19 2025 07:40:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>NeurIPSï¼ˆConference on Neural Information Processing Systemsï¼‰æ˜¯ç¥ç»ä¿¡æ¯å¤„ç†ç³»ç»Ÿé¢†åŸŸæœ€å…·å½±å“åŠ›çš„ä¼šè®®ï¼Œä¸“æ³¨äºæœºå™¨å­¦ä¹ ã€è®¡ç®—ç¥ç»ç§‘å­¦å’Œç»Ÿè®¡å­¦çš„äº¤å‰ç ”ç©¶ã€‚NeurIPS 2025å°†äº12æœˆ2æ—¥è‡³12æœˆ7æ—¥åœ¨ç¾å›½åŠ åˆ©ç¦å°¼äºšå·åœ£åœ°äºšå“¥ä¸¾åŠï¼Œæœ¬å±Šå…±æ”¶åˆ°äº†21,575ç¯‡æœ‰æ•ˆè®ºæ–‡æäº¤ï¼Œæœ€ç»ˆæœ‰5,290ç¯‡è¢«æ¥æ”¶ï¼Œæ•´ä½“å½•ç”¨ç‡ä¸º24.52%ã€‚å…¶ä¸­å¿«æ‰‹å…±æœ‰13ç¯‡è®ºæ–‡å…¥é€‰NeurIPS2025ï¼ŒåŒ…æ‹¬å¯çµå›¢é˜Ÿçš„8ç¯‡ã€‚è¿™äº›è®ºæ–‡æ¶µç›–è§†é¢‘ç”Ÿæˆä¸ä¼˜åŒ–ã€å¤šæ¨¡æ€å¤§æ¨¡å‹è¯„ä¼°ä¸é²æ£’æ€§ç ”ç©¶ã€è§†é¢‘å‹ç¼©ä¸è¡¨å¾ã€æƒ…æ„Ÿè®¡ç®—ä¸è·¨æ¨¡æ€åŒæ­¥ã€ä»¥åŠå®æ—¶è§†é¢‘æµåˆ†æä¸åº”ç”¨ç­‰æ–¹å‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6b59ecd48634c21bb81cf91900bad3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=M9FjGZHou4GBGpkZu%2Bl%2F%2BKR4ok4%3D" alt="" loading="lazy"/></p>
<p><strong>è®ºæ–‡ç²¾é€‰</strong></p>
<p><strong>è®ºæ–‡01ï¼šOmniSync: Towards Universal Lip Synchronization via Diffusion Transformers</strong></p>
<p><strong>| è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2505.21448" target="_blank" title="https://arxiv.org/abs/2505.21448" ref="nofollow noopener noreferrer">arxiv.org/abs/2505.21â€¦</a></strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fziqiaopeng.github.io%2FOmniSync%2F" target="_blank" title="https://ziqiaopeng.github.io/OmniSync/" ref="nofollow noopener noreferrer">ziqiaopeng.github.io/OmniSync/</a></strong></p>
<p>**|****è®ºæ–‡ç®€ä»‹ï¼š**å”‡è¯­åŒæ­¥æŠ€æœ¯æ—¨åœ¨å°†è§†é¢‘ä¸­äººç‰©çš„å”‡éƒ¨è¿åŠ¨ä¸å¯¹åº”çš„è¯­éŸ³éŸ³é¢‘è¿›è¡Œç²¾å‡†å¯¹é½ï¼Œè¯¥ä»»åŠ¡å¯¹åˆ¶ä½œé€¼çœŸä¸”å¯Œæœ‰è¡¨ç°åŠ›çš„è§†é¢‘å†…å®¹è‡³å…³é‡è¦ã€‚ç„¶è€Œç°æœ‰æ–¹æ³•æ™®éä¾èµ–å‚è€ƒå›¾ï¼‹æ˜¾å¼æ©ç å†ä¿®å¤çš„æ–¹æ¡ˆï¼Œå¯¼è‡´å…¶åœ¨èº«ä»½ä¸€è‡´æ€§ã€å§¿æ€å˜åŒ–ã€é¢éƒ¨é®æŒ¡åŠé£æ ¼åŒ–å†…å®¹å¤„ç†ä¸Šçš„é²æ£’æ€§å—é™ã€‚æ­¤å¤–ï¼Œç”±äºéŸ³é¢‘ä¿¡å·æä¾›çš„æ¡ä»¶çº¦æŸå¼±äºè§†è§‰çº¿ç´¢ï¼ŒåŸå§‹è§†é¢‘ä¸­çš„å”‡å½¢ä¿¡æ¯æ³„éœ²ä¼šæ˜¾è‘—å½±å“åŒæ­¥è´¨é‡ã€‚æœ¬æ–‡æå‡ºäº†é€šç”¨å”‡è¯­åŒæ­¥æ¡†æ¶OmniSyncï¼Œé€šè¿‡å¼•å…¥åŸºäºæ‰©æ•£å˜æ¢å™¨æ¨¡å‹çš„æ— æ©ç è®­ç»ƒèŒƒå¼ï¼Œå®ç°æ— éœ€æ˜¾å¼æ©ç çš„ç›´æ¥å¸§ç¼–è¾‘ï¼Œåœ¨ä¿æŒè‡ªç„¶é¢éƒ¨åŠ¨æ€ä¸è§’è‰²èº«ä»½çš„åŒæ—¶æ”¯æŒæ— é™æ—¶é•¿æ¨ç†ã€‚æ¨ç†è¿‡ç¨‹ä¸­é‡‡ç”¨åŸºäºæµåŒ¹é…çš„æ¸è¿›å™ªå£°åˆå§‹åŒ–ç­–ç•¥ï¼Œåœ¨ç¡®ä¿å§¿æ€ä¸èº«ä»½ä¸€è‡´æ€§çš„å‰æä¸‹å®ç°ç²¾å‡†çš„å£å‹ç¼–è¾‘ã€‚é’ˆå¯¹éŸ³é¢‘å¼±æ¡ä»¶é—®é¢˜ï¼Œåˆ›æ–°æ€§åœ°å¼€å‘åŠ¨æ€æ—¶ç©ºåˆ†ç±»å™¨æ— å¼•å¯¼æœºåˆ¶ï¼ˆDS-CFGï¼‰ï¼Œå¯è‡ªé€‚åº”è°ƒæ•´æ—¶ç©ºç»´åº¦çš„å¼•å¯¼å¼ºåº¦ã€‚åŒæ—¶æ„å»ºé¦–ä¸ªé¢å‘AIç”Ÿæˆè§†é¢‘çš„AIGC-LipSyncå¤šåœºæ™¯è¯„ä¼°åŸºå‡†ã€‚å¤§é‡å®éªŒè¡¨æ˜ï¼ŒOmniSyncåœ¨çœŸå®è§†é¢‘ä¸AIç”Ÿæˆè§†é¢‘ä¸­å‡æ˜¾è‘—è¶…è¶Šç°æœ‰æ–¹æ³•ï¼Œåœ¨è§†è§‰è´¨é‡ä¸å”‡è¯­åŒæ­¥ç²¾åº¦ä¸Šå‡è¾¾åˆ°æœ€ä¼˜æ•ˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08e138861b5a4c9ba5f3f8f644e2737e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=XmeaukC%2BT5r6mIDfIm9%2FQHL6R0A%3D" alt="" loading="lazy"/></p>
<p>**è®ºæ–‡02ï¼š**<strong>Decoupling Contrastive Decoding: Robust Hallucination Mitigation in Multimodal Large Language Models</strong></p>
<p><strong>|</strong> <strong>è®ºæ–‡é“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2504.08809" target="_blank" title="https://arxiv.org/abs/2504.08809" ref="nofollow noopener noreferrer">arxiv.org/abs/2504.08â€¦</a></p>
<p>**| è®ºæ–‡ç®€ä»‹ï¼š**å°½ç®¡å¤šæ¨¡æ€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆMLLMsï¼‰åœ¨å¤æ‚çš„å¤šæ¨¡æ€ç†è§£ä»»åŠ¡ä¸­å±•ç°å‡ºäº†å“è¶Šçš„æ¨ç†èƒ½åŠ›ï¼Œä½†å®ƒä»¬ä»å­˜åœ¨ä¼—æ‰€å‘¨çŸ¥çš„â€œå¹»è§‰â€é—®é¢˜ï¼šç”Ÿæˆçš„è¾“å‡ºä¸æ˜æ˜¾çš„è§†è§‰æˆ–äº‹å®è¯æ®ä¸ç¬¦ã€‚ç›®å‰ï¼ŒåŸºäºè®­ç»ƒçš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚ç›´æ¥åå¥½ä¼˜åŒ–ï¼ˆDPOï¼‰ï¼Œåˆ©ç”¨æˆå¯¹çš„åå¥½æ•°æ®æ¥æŠ‘åˆ¶å¹»è§‰ã€‚ç„¶è€Œï¼Œç”±äºå¯èƒ½æ€§ä½ç§»ï¼Œå®ƒä»¬æœ‰å¯èƒ½ç‰ºç‰²ä¸€èˆ¬çš„æ¨ç†èƒ½åŠ›ã€‚åŒæ—¶ï¼Œæ— éœ€è®­ç»ƒçš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚å¯¹æ¯”è§£ç ï¼Œé€šè¿‡ä»å¤±çœŸçš„è¾“å…¥ä¸­å‡å»ä¼°è®¡çš„å¹»è§‰æ¨¡å¼æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚ç„¶è€Œï¼Œè¿™äº›æ‰‹å·¥åˆ¶ä½œçš„å¹²æ‰°ï¼ˆä¾‹å¦‚ï¼Œå‘å›¾åƒæ·»åŠ å™ªå£°ï¼‰å¯èƒ½æ— æ³•å¾ˆå¥½åœ°æ•æ‰çœŸå®çš„å¹»è§‰æ¨¡å¼ã€‚ä¸ºäº†é¿å…ç°æœ‰æ–¹æ³•çš„è¿™äº›å¼±ç‚¹ï¼Œå¹¶å®ç°â€œç¨³å¥â€çš„å¹»è§‰ç¼“è§£ï¼ˆå³ä¿æŒä¸€èˆ¬çš„æ¨ç†æ€§èƒ½ï¼‰ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„æ¡†æ¶ï¼šè§£è€¦å¯¹æ¯”è§£ç ï¼ˆDCDï¼‰ã€‚å…·ä½“è€Œè¨€ï¼ŒDCD åœ¨åå¥½æ•°æ®é›†ä¸­è§£è€¦æ­£æ ·æœ¬å’Œè´Ÿæ ·æœ¬çš„å­¦ä¹ ï¼Œå¹¶åœ¨ MLLM å†…åˆ†åˆ«è®­ç»ƒæ­£å›¾åƒæŠ•å½±å’Œè´Ÿå›¾åƒæŠ•å½±ã€‚è´Ÿå‘æŠ•å½±éšå¼åœ°æ¨¡æ‹Ÿäº†çœŸå®çš„å¹»è§‰æ¨¡å¼ï¼Œè¿™ä½¿å¾—åœ¨å¯¹æ¯”è§£ç æ¨ç†é˜¶æ®µèƒ½å¤Ÿç”Ÿæˆå…·æœ‰è§†è§‰æ„ŸçŸ¥çš„è´Ÿå‘å›¾åƒã€‚æˆ‘ä»¬çš„ DCD é€šè¿‡é¿å…æˆå¯¹ä¼˜åŒ–æ¥ç¼“è§£ä¼¼ç„¶ä½ç§»ï¼Œå¹¶ä¸”æ— éœ€æ‰‹å·¥é™è´¨å°±èƒ½ç¨³å¥åœ°æ³›åŒ–ã€‚åœ¨å¹»è§‰åŸºå‡†æµ‹è¯•å’Œä¸€èˆ¬æ¨ç†ä»»åŠ¡ä¸Šçš„å¤§é‡æ¶ˆèç ”ç©¶è¡¨æ˜ DCD çš„æœ‰æ•ˆæ€§ï¼Œå³å®ƒåœ¨æŠ‘åˆ¶å¹»è§‰æ–¹é¢ä¸ DPO ç›¸å½“ï¼ŒåŒæ—¶ä¿æŒäº†ä¸€èˆ¬èƒ½åŠ›ï¼Œå¹¶ä¸”ä¼˜äºæ‰‹å·¥è®¾è®¡çš„å¯¹æ¯”è§£ç æ–¹æ³•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab61e7826e4a4011a330e6c7569829dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=RqFjGty2uuyECuRLXkky41ytAgE%3D" alt="" loading="lazy"/></p>
<p><strong>è®ºæ–‡03ï¼šLiveStar: Live Streaming Assistant for Real-World Online Video Understanding</strong></p>
<p><strong>| è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenreview.net%2Fforumid%3D4n7IifN7yr%26referrer%3D%255BAuthor%2520Console%255D" target="_blank" title="https://openreview.net/forumid=4n7IifN7yr&amp;referrer=%5BAuthor%20Console%5D" ref="nofollow noopener noreferrer">openreview.net/forumid=4n7â€¦</a></strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyzy-bupt%2FLiveStar" target="_blank" title="https://github.com/yzy-bupt/LiveStar" ref="nofollow noopener noreferrer">github.com/yzy-bupt/Liâ€¦</a></strong></p>
<p>**| è®ºæ–‡ç®€ä»‹ï¼š**å°½ç®¡ç¦»çº¿è§†é¢‘ç†è§£çš„è§†é¢‘å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆVideo-LLMsï¼‰å–å¾—äº†æ˜¾è‘—è¿›å±•ï¼Œä½†ç°æœ‰çš„åœ¨çº¿ Video-LLMs é€šå¸¸éš¾ä»¥åŒæ—¶å¤„ç†è¿ç»­çš„é€å¸§è¾“å…¥å¹¶ç¡®å®šæœ€ä½³å“åº”æ—¶æœºï¼Œè¿™å¾€å¾€ä¼šå½±å“å®æ—¶å“åº”èƒ½åŠ›å’Œå™äº‹è¿è´¯æ€§ã€‚ä¸ºäº†è§£å†³è¿™äº›å±€é™æ€§ï¼Œæˆ‘ä»¬æ¨å‡ºäº† LiveStarï¼Œè¿™æ˜¯ä¸€æ¬¾å¼€åˆ›æ€§çš„ç›´æ’­åŠ©æ‰‹ï¼Œé€šè¿‡è‡ªé€‚åº”æµè§£ç å®ç°äº†å§‹ç»ˆåœ¨çº¿çš„ä¸»åŠ¨å“åº”ã€‚å…·ä½“è€Œè¨€ï¼ŒLiveStar åŒ…å«ï¼šï¼ˆ1ï¼‰ä¸€ç§è®­ç»ƒç­–ç•¥ï¼Œèƒ½å¤Ÿå¯¹å¯å˜é•¿åº¦çš„è§†é¢‘æµè¿›è¡Œå¢é‡è§†é¢‘è¯­è¨€å¯¹é½ï¼Œä¿æŒåŠ¨æ€å˜åŒ–çš„å¸§åºåˆ—ä¸­çš„æ—¶é—´ä¸€è‡´æ€§ï¼›ï¼ˆ2ï¼‰ä¸€ç§å“åº”æ²‰é»˜è§£ç æ¡†æ¶ï¼Œé€šè¿‡å•æ¬¡å‰å‘ä¼ é€’éªŒè¯æ¥ç¡®å®šæœ€ä½³ä¸»åŠ¨å“åº”æ—¶æœºï¼›ï¼ˆ3ï¼‰é€šè¿‡å³°å€¼æœ«å°¾å†…å­˜å‹ç¼©å®ç°å†…å­˜æ„ŸçŸ¥åŠ é€Ÿï¼Œä»¥ä¾¿åœ¨ 10 åˆ†é’Ÿä»¥ä¸Šçš„è§†é¢‘ä¸Šè¿›è¡Œåœ¨çº¿æ¨ç†ï¼Œå¹¶ç»“åˆæµå¼é”®å€¼ç¼“å­˜å®ç° 1.53 å€çš„æ¨ç†é€Ÿåº¦æå‡ã€‚æˆ‘ä»¬è¿˜æ„å»ºäº†ä¸€ä¸ª OmniStar æ•°æ®é›†ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒå’ŒåŸºå‡†æµ‹è¯•çš„å…¨é¢æ•°æ®é›†ï¼Œæ¶µç›–äº† 15 ç§ä¸åŒçš„çœŸå®ä¸–ç•Œåœºæ™¯ä»¥åŠ 5 é¡¹åœ¨çº¿è§†é¢‘ç†è§£çš„è¯„ä¼°ä»»åŠ¡ã€‚åœ¨ä¸‰ä¸ªåŸºå‡†æµ‹è¯•ä¸­çš„å¹¿æ³›å®éªŒè¡¨æ˜ï¼ŒLiveStar è¾¾åˆ°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ï¼Œåœ¨è¯­ä¹‰æ­£ç¡®æ€§æ–¹é¢å¹³å‡æé«˜äº† 19.5%ï¼Œä¸ç°æœ‰çš„åœ¨çº¿è§†é¢‘è¯­è¨€æ¨¡å‹ç›¸æ¯”ï¼Œæ—¶é—´å·®å¼‚å‡å°‘äº† 18.1%ï¼ŒåŒæ—¶åœ¨ OmniStar çš„æ‰€æœ‰äº”é¡¹ä»»åŠ¡ä¸­ï¼Œæ¯ç§’å¸§æ•°æé«˜äº† 12.0%ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a730eaee9d074424a80578ca6cdc8a5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=aPUINn8pgIO1va2AyQMk86UVIfk%3D" alt="" loading="lazy"/></p>
<p>**è®ºæ–‡04ï¼š**<strong>MME-VideoOCR: Evaluating OCR-Based Capabilities of Multimodal LLMs in Video Scenarios</strong></p>
<p><strong>|</strong> <strong>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2505.21333" target="_blank" title="https://arxiv.org/abs/2505.21333" ref="nofollow noopener noreferrer">arxiv.org/abs/2505.21â€¦</a></strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmme-videoocr.github.io%2F" target="_blank" title="https://mme-videoocr.github.io/" ref="nofollow noopener noreferrer">mme-videoocr.github.io/</a></strong></p>
<p>**| è®ºæ–‡ç®€ä»‹ï¼š**å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ï¼ˆMLLMï¼‰åœ¨é™æ€å›¾åƒå…‰å­¦å­—ç¬¦è¯†åˆ«ï¼ˆOCRï¼‰ä»»åŠ¡ä¸­å·²å–å¾—æ˜¾è‘—æˆæ•ˆï¼Œç„¶è€Œå…¶åœ¨è§†é¢‘OCRåœºæ™¯ä¸‹çš„æ€§èƒ½å´å› è¿åŠ¨æ¨¡ç³Šã€æ—¶åºå˜åŒ–åŠè§†é¢‘ç‰¹æœ‰çš„è§†è§‰æ•ˆæœç­‰å› ç´ å¤§å¹…å—é™ã€‚ä¸ºç»™å®ç”¨å‹MLLMè®­ç»ƒæä¾›æ˜ç¡®æŒ‡å¯¼ï¼Œæ¨å‡ºäº†æ¶µç›–å…¨åœºæ™¯è§†é¢‘OCRåº”ç”¨çš„è¯„ä¼°ä½“ç³»MME-VideoOCRã€‚è¯¥åŸºå‡†åŒ…å«10å¤§ç±»ä»»åŠ¡ï¼ˆå…±25é¡¹å­ä»»åŠ¡ï¼‰ï¼Œè¦†ç›–44ç§å·®å¼‚åŒ–åœºæ™¯ï¼Œä¸ä»…æ¶‰åŠæ–‡æœ¬è¯†åˆ«ä»»åŠ¡ï¼Œæ›´åŒ…å«éœ€è¦å¯¹è§†é¢‘æ–‡æœ¬å†…å®¹è¿›è¡Œæ·±åº¦ç†è§£ä¸æ¨ç†çš„ä»»åŠ¡ç±»å‹ã€‚æ•°æ®é›†åŒ…å«1,464æ®µä¸åŒåˆ†è¾¨ç‡ã€å®½é«˜æ¯”åŠæ—¶é•¿çš„è§†é¢‘ï¼Œå¹¶é…æœ‰2,000ç»„ç²¾å¿ƒæ„å»ºçš„äººå·¥æ ‡æ³¨é—®ç­”å¯¹ã€‚é€šè¿‡å¯¹15ä¸ªå‰æ²¿MLLMæ¨¡å‹çš„è¯„ä¼°å‘ç°ï¼Œè¡¨ç°æœ€ä½³çš„æ¨¡å‹ï¼ˆGemini-2.5 Proï¼‰åœ¨2000åˆ†æ»¡åˆ†ä¸­å¾—åˆ†ä»ä¸è¶³1500ã€‚ç»†ç²’åº¦åˆ†æè¡¨æ˜ï¼šç°æœ‰æ¨¡å‹åœ¨å•å¸§æˆ–å°‘é‡å¸§åŒ…å«ç›®æ ‡æ–‡æœ¬çš„ä»»åŠ¡ä¸­è¡¨ç°ä¼˜å¼‚ï¼Œä½†å¯¹éœ€è¦å…¨å±€è§†é¢‘ç†è§£çš„ä»»åŠ¡å“åº”èƒ½åŠ›æ˜æ˜¾ä¸è¶³ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e2a881e188948a78761581fd584627d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=Jxwfdij5toWNkwJAeYrOjtjEP3s%3D" alt="" loading="lazy"/></p>
<p>**è®ºæ–‡05ï¼š**<strong>Neural B-frame Video Compression with Bi-directional Reference Harmonization</strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkwai%2FNVC" target="_blank" title="https://github.com/kwai/NVC" ref="nofollow noopener noreferrer">github.com/kwai/NVC</a></strong></p>
<p>**| è®ºæ–‡ç®€ä»‹ï¼š**è¿‘å¹´æ¥ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ çš„ç«¯åˆ°ç«¯è§†é¢‘å‹ç¼©ï¼ˆNVCï¼‰å–å¾—äº†æ˜¾è‘—è¿›å±•ï¼Œä½†ä¸ P å¸§å‹ç¼©ç›¸æ¯”ï¼Œå¯¹ç«¯åˆ°ç«¯è§†é¢‘ B å¸§å‹ç¼©çš„ç ”ç©¶ä»ç›¸å¯¹ä¸è¶³ã€‚B å¸§å‹ç¼©å¯é‡‡ç”¨åŒå‘å‚è€ƒå¸§ä»¥è·å¾—æ›´ä¼˜çš„å‹ç¼©æ€§èƒ½ã€‚ç„¶è€Œï¼ŒB å¸§çš„åˆ†å±‚ç¼–ç ç»“æ„ä½¿å¾—æ—¶åŸŸé¢„æµ‹å˜å¾—å¤æ‚ï¼Œå°¤å…¶æ˜¯åœ¨å¸§è·¨åº¦è¾ƒå¤§çš„å±‚çº§ï¼Œè¿™ä¼šå¯¼è‡´ä¸¤ä¸ªå‚è€ƒå¸§çš„è´¡çŒ®ä¸å‡åŒ€ã€‚ä¸ºäº†å……åˆ†åˆ©ç”¨åŒå‘å‚è€ƒä¿¡æ¯ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„ç«¯åˆ°ç«¯è§†é¢‘ B å¸§å‹ç¼©æ–¹æ³•ï¼Œç§°ä¸ºåŒå‘å‚è€ƒå‡è¡¡çš„è§†é¢‘å‹ç¼©ï¼Œå…¶ç»“åˆäº†æˆ‘ä»¬æå‡ºçš„åŒå‘è¿åŠ¨èšåˆå’ŒåŒå‘ä¸Šä¸‹æ–‡èåˆæŠ€æœ¯ã€‚åŒå‘è¿åŠ¨èšåˆæŠ€æœ¯åœ¨è¿åŠ¨å‹ç¼©ä¸­èšåˆå¤šä¸ªå°ºåº¦å…‰æµï¼Œä»è€Œåœ¨å¤§èŒƒå›´å†…å®ç°æ›´ç²¾ç¡®çš„è¿åŠ¨è¡¥å¿ã€‚ç„¶åï¼ŒåŒå‘ä¸Šä¸‹æ–‡èåˆæŠ€æœ¯åœ¨è¿åŠ¨è¡¥å¿ç²¾åº¦çš„æŒ‡å¯¼ä¸‹ï¼Œæ˜¾å¼åœ°å¯¹å‚è€ƒä¸Šä¸‹æ–‡çš„æƒé‡è¿›è¡Œå»ºæ¨¡ã€‚å‡­å€Ÿæ›´é«˜æ•ˆçš„è¿åŠ¨å’Œä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬æ–¹æ³•å¯ä»¥æœ‰æ•ˆåœ°å¹³è¡¡åŒå‘å‚è€ƒä¿¡æ¯ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ³•ä¼˜äºä»¥å¾€æœ€å…ˆè¿›çš„ NVC æ–¹æ³•ï¼Œç”šè‡³åœ¨ HEVC æ•°æ®é›†ä¸Šè¶…è¶Šäº†ä¼ ç»Ÿç¼–ç å™¨ VTM-RA é…ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0c4962a31df4d1f9d9d27f466664f25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=yQKk76iQHWafDtN5zFV7CYoo0Gs%3D" alt="" loading="lazy"/></p>
<p>**è®ºæ–‡06ï¼š**<strong>VFRTok: Variable Frame Rates Video Tokenizer with Duration-Proportional Information Assumption</strong></p>
<p><strong>|</strong> <strong>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2505.12053" target="_blank" title="https://arxiv.org/abs/2505.12053" ref="nofollow noopener noreferrer">arxiv.org/abs/2505.12â€¦</a></strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FKwaiVGI%2FVFRTok" target="_blank" title="https://github.com/KwaiVGI/VFRTok" ref="nofollow noopener noreferrer">github.com/KwaiVGI/VFRâ€¦</a></strong></p>
<p>**| è®ºæ–‡ç®€ä»‹ï¼š**åŸºäºæ½œæ‰©æ•£æ¨¡å‹çš„ç°ä»£è§†é¢‘ç”Ÿæˆæ¡†æ¶ï¼Œå—é™äºå¸§æ¯”ä¾‹ä¿¡æ¯å‡è®¾è€Œå­˜åœ¨è¡¨å¾ä½æ•ˆé—®é¢˜ã€‚ç°æœ‰åˆ†è¯å™¨æä¾›å›ºå®šçš„æ—¶é—´å‹ç¼©ç‡ï¼Œå¯¼è‡´æ‰©æ•£æ¨¡å‹è®¡ç®—æˆæœ¬éšå¸§ç‡çº¿æ€§å¢é•¿ã€‚æœ¬æ–‡æå‡ºæ—¶é•¿æ¯”ä¾‹ä¿¡æ¯å‡è®¾ï¼šè§†é¢‘ä¿¡æ¯å®¹é‡çš„ä¸Šé™ä¸æ—¶é•¿è€Œéå¸§æ•°æˆæ­£æ¯”ã€‚åŸºäºè¯¥æ´è§ï¼Œæ¨å‡ºäº†VFRTokâ€”â€”åŸºäºTransformerçš„è§†é¢‘åˆ†è¯å™¨ï¼Œé€šè¿‡ç¼–ç å™¨ä¸è§£ç å™¨é—´çš„éå¯¹ç§°å¸§ç‡è®­ç»ƒï¼Œå®ç°å¯å˜å¸§ç‡ç¼–è§£ç ã€‚æ­¤å¤–ï¼Œæœ¬æ–‡æå‡ºéƒ¨åˆ†æ—‹è½¬ä½ç½®åµŒå…¥ï¼ˆPartial RoPEï¼‰æŠ€æœ¯è§£è€¦ä½ç½®å»ºæ¨¡ä¸å†…å®¹å»ºæ¨¡ï¼Œä»è€Œæ¢ç´¢æ¨¡å‹è¯­ä¹‰è·Ÿéšèƒ½åŠ›ã€‚è¯¥æŠ€æœ¯æœ‰æ•ˆå¢å¼ºå†…å®¹æ„ŸçŸ¥èƒ½åŠ›ï¼Œæ˜¾è‘—æå‡è§†é¢‘ç”Ÿæˆè´¨é‡ã€‚å¾—ç›Šäºç´§å‡‘è¿ç»­çš„æ—¶ç©ºè¡¨å¾ï¼ŒVFRTokä»…éœ€ç°æœ‰åˆ†è¯å™¨1/8çš„tokené‡å³å¯å®ç°å…·æœ‰ç«äº‰åŠ›çš„é‡å»ºè´¨é‡ï¼Œå¹¶è¾¾æˆä¸šç•Œé¢†å…ˆçš„ç”Ÿæˆä¿çœŸåº¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82dc05851d794840a3df32155751e534~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=AtjX3ycTrIf1O1jws1CJiZ3ehJY%3D" alt="" loading="lazy"/></p>
<p>**è®ºæ–‡07ï¼š**<strong>VidEmo: Affective-Tree Reasoning for Emotion-Centric Video Foundation Models</strong></p>
<p><strong>| è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2511.02712" target="_blank" title="https://arxiv.org/pdf/2511.02712" ref="nofollow noopener noreferrer">arxiv.org/pdf/2511.02â€¦</a></strong></p>
<p>**| è®ºæ–‡ç®€ä»‹ï¼š**å°½ç®¡è§†é¢‘å¤§è¯­è¨€æ¨¡å‹ï¼ˆVideoLLMsï¼‰åœ¨è§†é¢‘æƒ…æ„Ÿåˆ†æé¢†åŸŸå–å¾—äº†é‡è¦è¿›å±•ï¼Œä½†æƒ…æ„Ÿçš„åŠ¨æ€æ€§ä¸ä¾èµ–å¤šç§çº¿ç´¢çš„å¤æ‚ç‰¹æ€§ï¼Œä¾ç„¶å¯¹æ¨¡å‹çš„æ¨ç†èƒ½åŠ›æå‡ºäº†å·¨å¤§æŒ‘æˆ˜ã€‚æœ¬ç ”ç©¶æå‡ºäº†æƒ…æ„Ÿçº¿ç´¢å¼•å¯¼çš„æ¨ç†æ¡†æ¶ï¼Œç³»ç»Ÿæ•´åˆäº†åŸºç¡€å±æ€§æ„ŸçŸ¥ã€è¡¨è¾¾åˆ†æä¸é«˜é˜¶æƒ…æ„Ÿç†è§£ä¸‰å¤§é˜¶æ®µã€‚æ ¸å¿ƒåœ¨äºè®¾è®¡äº†ä¸“æ³¨äºæƒ…æ„Ÿæ¨ç†ä¸æŒ‡ä»¤éµå¾ªçš„è§†é¢‘æƒ…æ„ŸåŸºç¡€æ¨¡å‹å®¶æ—VidEmoï¼Œå¹¶é€šè¿‡ä¸¤é˜¶æ®µè°ƒä¼˜ç­–ç•¥å®ç°æ€§èƒ½æå‡ï¼šç¬¬ä¸€é˜¶æ®µé‡‡ç”¨è¯¾ç¨‹å¼æƒ…æ„Ÿå­¦ä¹ é€æ­¥æ³¨å…¥æƒ…æ„ŸçŸ¥è¯†ï¼Œç¬¬äºŒé˜¶æ®µé€šè¿‡æƒ…æ„Ÿæ ‘å¼ºåŒ–å­¦ä¹ å¢å¼ºæ¨ç†èƒ½åŠ›ã€‚æ­¤å¤–ï¼Œæ„å»ºäº†æƒ…æ„Ÿé©±åŠ¨çš„æ•°æ®åŸºç¡€è®¾æ–½ï¼Œæ¨å‡ºç»†ç²’åº¦æƒ…æ„Ÿæ•°æ®é›†Emo-CFGï¼Œæ¶µç›–2.1Må¤šæ ·åŒ–æŒ‡ä»¤æ ·æœ¬ï¼ŒåŒ…æ‹¬å¯è§£é‡Šçš„æƒ…æ„Ÿé—®ç­”ã€ç»†ç²’åº¦æè¿°åŠç›¸å…³æ¨ç†ã€‚å®éªŒè¡¨æ˜ï¼ŒVidEmoåœ¨15é¡¹äººåƒä»»åŠ¡ä¸­æ ‘ç«‹äº†æ–°SOTAï¼Œæ˜¾è‘—æå‡äº†å¤æ‚æƒ…æ„ŸçŠ¶æ€ç†è§£çš„åˆç†æ€§ä¸å‡†ç¡®æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39b2a19425fe4c60b0c9fc9d49710ab9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=DJQfBoddRP3H3NWp3XEFYm%2FVtys%3D" alt="" loading="lazy"/></p>
<p>**è®ºæ–‡08ï¼š**<strong>Who You Are Matters: Bridging Topics and Social Roles via LLM-Enhanced Logical Recommendation</strong></p>
<p><strong>| è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Farxiv.org%2Fabs%2F2505.10940" target="_blank" title="http://arxiv.org/abs/2505.10940" ref="nofollow noopener noreferrer">arxiv.org/abs/2505.10â€¦</a></strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCode2Q%2FTagCF" target="_blank" title="https://github.com/Code2Q/TagCF" ref="nofollow noopener noreferrer">github.com/Code2Q/TagCâ€¦</a></strong></p>
<p>****| è®ºæ–‡ç®€ä»‹ï¼š<strong>æ¨èç³»ç»Ÿé€šè¿‡æ¨æ–­ç”¨æˆ·ç‰¹å¾å’Œå†å²è¡Œä¸ºä¸­çš„åå¥½ï¼Œç­›é€‰å‡ºå¯¹ç”¨æˆ·æœ‰ä»·å€¼çš„å†…å®¹æˆ–å…´è¶£ç‚¹ã€‚ä¸»æµæ–¹æ³•éƒ½ä¾§é‡äºå‘ç°å’Œå»ºæ¨¡ item ç²’åº¦çš„å†…å®¹å…´è¶£ç‚¹ï¼ˆå³ topic modelingï¼‰ï¼Œå¹¶åŸºäºå†å²äº¤äº’æ•æ‰ç”¨æˆ·å¯¹è¿™äº›å…´è¶£ç‚¹çš„åå¥½ã€‚è¿™ç§èŒƒå¼è™½ç„¶æœ‰æ•ˆï¼Œä½†å¾€å¾€è¿‡äºæ³¨é‡ä»¥ item ä¸ºå•ä½çš„ç†è§£ä»»åŠ¡ï¼Œå¿½è§†äº†ç”¨æˆ·ç²’åº¦å¯¹ç‰¹å¾ã€ç¤¾äº¤è§’è‰²å’Œå…¶éœ€æ±‚ç‰¹æ€§çš„å»ºæ¨¡ï¼Œå³ user role modeling ã€‚ç„¶è€Œï¼Œè¿™äº›å› ç´ åœ¨å»ºæ¨¡ä¸Šå¾ˆå¯èƒ½æ˜¯å½±å“ç›¸å…³å…´è¶£å’Œç”¨æˆ·åå¥½è¿ç§»çš„å…³é”®é€»è¾‘æ··æ‚å› ç´ ã€‚</strong></p>
<p>**</p>
<p>ä¸ºäº†å¼¥è¡¥è¿™ä¸€ç¼ºå¤±çš„å»ºæ¨¡è§’åº¦ï¼Œè®©æ¨èç³»ç»Ÿä»â€œçŸ¥å…¶ç„¶â€è¿›æ­¥åˆ°â€œçŸ¥å…¶æ‰€ä»¥ç„¶â€ï¼š1ï¼‰å›¢é˜Ÿå¼•å…¥äº†ç”¨æˆ·è§’è‰²è¯†åˆ«ä»»åŠ¡å’Œè¡Œä¸ºé€»è¾‘å»ºæ¨¡ä»»åŠ¡ï¼Œæ—¨åœ¨æ˜¾å¼å»ºæ¨¡ç”¨æˆ·è§’è‰²å’Œç‰¹æ€§ï¼Œå¹¶å­¦ä¹  item topic (tag) ä¸ user role (tag) ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œä½¿æ¨èç³»ç»Ÿç ”ç©¶ä»å›å½’ç¤¾ä¼šç§‘å­¦æœ¬è´¨ã€‚2ï¼‰æ­¤å¤–ï¼Œæ–‡ç« ä¹Ÿè¯æ˜äº†å¯ä»¥é€šè¿‡ä¸€ç§é«˜æ•ˆçš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸æ¨èç³»ç»Ÿçš„é›†æˆæ¡†æ¶æ¥æ˜¾å¼è§£å†³è¿™äº›ä»»åŠ¡ï¼Œå¹¶æå‡ºäº† TagCF æ–¹æ³•ï¼Œåšåˆ°ç†è§£ç”¨æˆ·ç¤¾ä¼šè§’è‰²å’Œéœ€æ±‚çš„åŒæ—¶æå‡æ¨èæ•ˆæœã€‚3ï¼‰æœ€åï¼Œä½œè€…åœ¨å·¥ä¸šç¯å¢ƒä¸­çš„åœ¨çº¿å®éªŒå’Œå…¬å¼€æ•°æ®é›†ä¸Šçš„ç¦»çº¿å®éªŒä¸­éªŒè¯äº† TagCF çš„æœ‰æ•ˆæ€§ã€‚å®éªŒè¯æ˜ï¼Œä¸å…´è¶£ç‚¹å»ºæ¨¡ç›¸æ¯”ï¼Œç”¨æˆ·è§’è‰²å»ºæ¨¡ç­–ç•¥å¯èƒ½æ˜¯æ›´ä¼˜çš„é€‰æ‹©ã€‚åŒæ—¶ï¼Œæ–‡ç« ä¹Ÿæä¾›äº†è¯æ®è¡¨æ˜ï¼Œæå–çš„é€»è¾‘å›¾åœ¨ç»éªŒä¸Šæ˜¯ä¸€ç§é€šç”¨ä¸”å¯è¿ç§»çš„çŸ¥è¯†ï¼Œèƒ½å¤Ÿæƒ åŠå¹¿æ³›çš„æ¨èä»»åŠ¡ã€‚</p>
<p>**</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c3aa74d69974b75b2b7577da57f9597~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=M1d2lqYj0ozVpP0q8K5lE40jPNM%3D" alt="" loading="lazy"/></p>
<p>**è®ºæ–‡09ï¼š**<strong>Diffusion Model as a Noise-Aware Latent Reward Model for Step-Level Preference Optimization</strong></p>
<p><strong>|</strong> <strong>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2502.01051" target="_blank" title="https://arxiv.org/abs/2502.01051" ref="nofollow noopener noreferrer">arxiv.org/abs/2502.01â€¦</a></strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FKwai-Kolors%2FLPO%2Ftree%2Fmain" target="_blank" title="https://github.com/Kwai-Kolors/LPO/tree/main" ref="nofollow noopener noreferrer">github.com/Kwai-Kolorsâ€¦</a></strong></p>
<p><strong>| è®ºæ–‡ç®€ä»‹ï¼šåœ¨å›¾åƒç”Ÿæˆé¢†åŸŸï¼Œåå¥½ä¼˜åŒ–çš„ç›®æ ‡æ˜¯è®©æ¨¡å‹æ›´å¥½åœ°ç¬¦åˆäººç±»çš„å®¡ç¾æ ‡å‡†ã€‚ä»¥å¾€çš„åšæ³•é€šå¸¸ä¾èµ–è§†è§‰-è¯­è¨€æ¨¡å‹ï¼ˆVLMsï¼‰ä½œä¸ºåƒç´ çº§çš„å¥–åŠ±æ¨¡å‹ï¼Œä»¥æ­¤æ¥è¿‘ä¼¼äººç±»çš„åå¥½ã€‚ç„¶è€Œï¼Œå½“è¿™äº›æ¨¡å‹åº”ç”¨äºæ­¥éª¤çº§ï¼ˆstep-awareï¼‰çš„åå¥½ä¼˜åŒ–æ—¶ï¼Œå®ƒä»¬åœ¨å¤„ç†ä¸åŒæ—¶é—´æ­¥çš„å™ªå£°å›¾åƒæ—¶å¸¸å¸¸é‡åˆ°å›°éš¾ï¼Œå¹¶ä¸”éœ€è¦å¤æ‚çš„è½¬æ¢æ‰èƒ½å›åˆ°åƒç´ ç©ºé—´ã€‚æˆ‘ä»¬å‘ç°é¢„è®­ç»ƒçš„æ‰©æ•£æ¨¡å‹åœ¨å™ªå£°æ½œåœ¨ç©ºé—´ä¸­è¿›è¡Œæ­¥éª¤çº§å¥–åŠ±å»ºæ¨¡çš„èƒ½åŠ›éå¸¸å‡ºè‰²ï¼Œå› ä¸ºå®ƒä»¬æœ¬èº«å°±æ˜¯ä¸ºäº†å¤„ç†ä¸åŒå™ªå£°æ°´å¹³çš„æ½œåœ¨å›¾åƒè€Œè®¾è®¡çš„ã€‚åŸºäºè¿™ä¸€å‘ç°ï¼Œæˆ‘ä»¬æå‡ºäº†æ½œåœ¨å¥–åŠ±æ¨¡å‹ï¼ˆLatent Reward Model, LRMï¼‰ï¼Œè¯¥æ¨¡å‹åˆ©ç”¨æ‰©æ•£æ¨¡å‹çš„ç»„ä»¶æ¥é¢„æµ‹ä»»æ„æ—¶é—´æ­¥çš„æ½œåœ¨å›¾åƒåå¥½ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æ¨å‡ºäº†æ½œåœ¨åå¥½ä¼˜åŒ–ï¼ˆLatent Preference Optimization, LPOï¼‰ï¼Œè¿™æ˜¯ä¸€ç§å…¨æ–°çš„æ­¥éª¤çº§åå¥½ä¼˜åŒ–æ–¹æ³•ï¼Œèƒ½å¤Ÿç›´æ¥åœ¨å™ªå£°æ½œåœ¨ç©ºé—´ä¸­è¿›è¡Œã€‚å®éªŒç»“æœæ˜¾ç¤ºï¼ŒLPOä¸ä»…æ˜¾è‘—æå‡äº†æ¨¡å‹åœ¨æ•´ä½“äººç±»åå¥½å¾—åˆ†ã€å›¾æ–‡ç›¸å…³æ€§å’Œå›¾åƒç¾å­¦è´¨é‡çš„åå¥½ä¸€è‡´æ€§ï¼Œè€Œä¸”åœ¨è®­ç»ƒé€Ÿåº¦ä¸Šä¹Ÿæ¯”ç°æœ‰çš„åå¥½ä¼˜åŒ–æ–¹æ³•å¿«äº†2.5åˆ°28å€ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9a8810f849f478c8427bdfbcff31796~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=aKIJLt3yG29Fohg5mrN07PgsJw0%3D" alt="" loading="lazy"/></p>
<p><strong>è®ºæ–‡10ï¼š Flow-GRPO: Training Flow Matching Models via Online RL</strong></p>
<p><strong>|</strong> <strong>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2505.05470" target="_blank" title="https://arxiv.org/abs/2505.05470" ref="nofollow noopener noreferrer">arxiv.org/abs/2505.05â€¦</a></strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyifan123%2Fflow%255C_grpo" target="_blank" title="https://github.com/yifan123/flow%5C_grpo" ref="nofollow noopener noreferrer">github.com/yifan123/flâ€¦</a></strong></p>
<p><strong>|</strong> **è®ºæ–‡ç®€ä»‹ï¼š**æå‡ºFlow-GRPOï¼Œè¿™æ˜¯é¦–ä¸ªå°†åœ¨çº¿å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰èå…¥æµåŒ¹é…æ¨¡å‹çš„æ–¹æ³•ã€‚è¯¥æ–¹æ³•é‡‡ç”¨ä¸¤å¤§æ ¸å¿ƒç­–ç•¥ï¼šï¼ˆ1ï¼‰é€šè¿‡ODEåˆ°SDEçš„è½¬æ¢ï¼Œå°†ç¡®å®šæ€§å¸¸å¾®åˆ†æ–¹ç¨‹ï¼ˆODEï¼‰è½¬åŒ–ä¸ºç­‰ä»·éšæœºå¾®åˆ†æ–¹ç¨‹ï¼ˆSDEï¼‰ï¼Œè¯¥è½¬æ¢è¿‡ç¨‹åœ¨å…¨éƒ¨æ—¶é—´æ­¥ä¸Šä¿æŒåŸå§‹æ¨¡å‹çš„è¾¹é™…åˆ†å¸ƒä¸€è‡´æ€§ï¼Œä¸ºå¼ºåŒ–å­¦ä¹ æ¢ç´¢æä¾›ç»Ÿè®¡é‡‡æ ·åŸºç¡€ï¼›ï¼ˆ2ï¼‰é‡‡ç”¨é™å™ªæ­¥éª¤ç¼©å‡ç­–ç•¥ï¼Œåœ¨ä¿æŒåŸå§‹æ¨ç†æ­¥æ•°çš„åŒæ—¶å‡å°‘è®­ç»ƒé™å™ªæ­¥éª¤ï¼Œæ˜¾è‘—æå‡é‡‡æ ·æ•ˆç‡ä¸”ä¸ç‰ºç‰²æ€§èƒ½ã€‚å®éªŒè¡¨æ˜ï¼ŒFlow-GRPOåœ¨å¤šé¡¹æ–‡æœ¬ç”Ÿæˆå›¾åƒä»»åŠ¡ä¸­æˆæ•ˆæ˜¾è‘—ï¼šåœ¨ç»„åˆç”Ÿæˆä»»åŠ¡ä¸­ï¼Œç»RLè°ƒä¼˜çš„SD3.5-Mæ¨¡å‹å®ç°äº†è¿‘ä¹å®Œç¾çš„ç‰©ä½“æ•°é‡ã€ç©ºé—´å…³ç³»åŠç»†ç²’åº¦å±æ€§ç”Ÿæˆï¼Œå°†GenEvalå‡†ç¡®ç‡ä»63%æå‡è‡³95%ï¼›åœ¨è§†è§‰æ–‡æœ¬æ¸²æŸ“ä»»åŠ¡ä¸­ï¼Œå‡†ç¡®ç‡ä»59%è·ƒå‡è‡³92%ï¼Œå¤§å¹…ä¼˜åŒ–äº†æ–‡æœ¬ç”Ÿæˆè´¨é‡ï¼›è¯¥æ–¹æ³•è¿˜æ˜¾è‘—æå‡äº†äººç±»åå¥½å¯¹é½åº¦ã€‚å°¤ä¸ºé‡è¦çš„æ˜¯ï¼Œå®éªŒåŸºæœ¬æœªå‡ºç°å¥–åŠ±ä½œå¼Šç°è±¡â€”â€”å³å¥–åŠ±æå‡æœªä¼´éšå¯æ„ŸçŸ¥çš„å›¾åƒè´¨é‡ä¸‹é™æˆ–å¤šæ ·æ€§å‡æŸã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19ae7e9d872f4ef5a6a3b37a7183c1ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=LIhrbXMejl6k4qCKpv%2Bu%2BPaMYKA%3D" alt="" loading="lazy"/></p>
<p><strong>è®ºæ–‡11ï¼šImproving Video Generation with Human Feedback</strong></p>
<p><strong>|</strong> <strong>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2501.13918" target="_blank" title="https://arxiv.org/abs/2501.13918" ref="nofollow noopener noreferrer">arxiv.org/abs/2501.13â€¦</a></strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgongyeliu.github.io%2Fvideoalign%2F" target="_blank" title="https://gongyeliu.github.io/videoalign/" ref="nofollow noopener noreferrer">gongyeliu.github.io/videoalign/</a></strong></p>
<p><strong>|</strong> **è®ºæ–‡ç®€ä»‹ï¼š**å°½ç®¡flow matchingæŠ€æœ¯æ¨åŠ¨è§†é¢‘ç”Ÿæˆå–å¾—é‡å¤§è¿›å±•ï¼Œä½†è¿åŠ¨è´¨é‡ä¸ä½³åŠæ–‡æœ¬éµå¾ªç­‰é—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚æœ¬ç ”ç©¶æ„å»ºäº†ç³»ç»Ÿæ€§æµç¨‹ï¼Œåˆ©ç”¨äººç±»åé¦ˆä¼˜åŒ–è§†é¢‘ç”Ÿæˆæ¨¡å‹ä¼˜åŒ–ä¸Šè¿°é—®é¢˜ã€‚å…·ä½“è€Œè¨€ï¼Œé¦–å…ˆæ„å»ºäº†é’ˆå¯¹ç°ä»£è§†é¢‘ç”Ÿæˆæ¨¡å‹çš„å¤§è§„æ¨¡äººç±»åå¥½æ•°æ®é›†ï¼Œæ¶µç›–å¤šç»´åº¦çš„æˆå¯¹æ ‡æ³¨ï¼›éšåæå‡ºVideoRewardå¤šç»´åº¦è§†é¢‘å¥–åŠ±æ¨¡å‹ï¼Œæ·±å…¥æ¢ç©¶æ ‡æ³¨æ–¹æ¡ˆä¸ä¸åŒè®¾è®¡é€‰æ‹©å¯¹å¥–åŠ±æ•ˆèƒ½çš„å½±å“ã€‚åŸºäºç»Ÿä¸€å¼ºåŒ–å­¦ä¹ æ¡†æ¶â€”â€”å³åœ¨KLæ­£åˆ™åŒ–çº¦æŸä¸‹å®ç°å¥–åŠ±æœ€å¤§åŒ–ï¼Œä¸ºåŸºäºæµçš„æ¨¡å‹æå‡ºä¸‰ç§å¯¹é½ç®—æ³•ï¼šåŒ…æ‹¬ä¸¤ç§è®­ç»ƒæ—¶ç­–ç•¥ï¼ˆç›´æ¥åå¥½ä¼˜åŒ–Flow-DPOã€å¥–åŠ±åŠ æƒå›å½’Flow-RWRï¼‰ï¼Œä»¥åŠä¸€ç§æ¨ç†æ—¶æŠ€æœ¯Flow-NRGï¼Œè¯¥æŠ€æœ¯å°†å¥–åŠ±å¼•å¯¼ç›´æ¥åº”ç”¨äºå«å™ªè§†é¢‘ã€‚å®éªŒè¡¨æ˜ï¼šVideoRewardæ˜¾è‘—è¶…è¶Šç°æœ‰å¥–åŠ±æ¨¡å‹ï¼ŒFlow-DPOæ€§èƒ½ä¼˜äºFlow-RWRåŠç›‘ç£å¾®è°ƒæ–¹æ³•ï¼›æ­¤å¤–Flow-NRGæ”¯æŒç”¨æˆ·åœ¨æ¨ç†æ—¶è‡ªå®šä¹‰å¤šç›®æ ‡æƒé‡ï¼Œæ»¡è¶³ä¸ªæ€§åŒ–è§†é¢‘è´¨é‡éœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f090b9a101ba460eb9b0475bbc6d2dbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=JHdq6AR%2BjDE7YUXc5F8H1oCyDX0%3D" alt="" loading="lazy"/></p>
<p><strong>è®ºæ–‡12ï¼šMVU-Eval: Towards Multi-Video Understanding Evaluation for Multimodal LLMs</strong></p>
<p><strong>|</strong> <strong>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.07250" target="_blank" title="https://arxiv.org/abs/2511.07250" ref="nofollow noopener noreferrer">arxiv.org/abs/2511.07â€¦</a></strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdatasets%2FMVU-Eval-Team%2FMVU-Eval-Data" target="_blank" title="https://huggingface.co/datasets/MVU-Eval-Team/MVU-Eval-Data" ref="nofollow noopener noreferrer">huggingface.co/datasets/MVâ€¦</a></strong></p>
<p><strong>|</strong> **è®ºæ–‡ç®€ä»‹ï¼š**å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ï¼ˆMLLMï¼‰çš„å‡ºç°å°†äººå·¥æ™ºèƒ½èƒ½åŠ›æ‰©å±•è‡³è§†è§‰é¢†åŸŸï¼Œç„¶è€Œç°æœ‰è¯„ä¼°åŸºå‡†ä»å±€é™äºå•ä¸€è§†é¢‘ç†è§£ï¼Œå¿½è§†äº†ç°å®åœºæ™¯ï¼ˆå¦‚ä½“è‚²èµ›äº‹åˆ†æä¸è‡ªåŠ¨é©¾é©¶ï¼‰ä¸­å¯¹å¤šè§†é¢‘ç†è§£çš„è¿«åˆ‡éœ€æ±‚ã€‚ä¸ºå¼¥è¡¥è¿™ä¸€é‡è¦ç©ºç™½ï¼Œæ¨å‡ºäº†é¦–ä¸ªç»¼åˆæ€§è¯„ä¼°åŸºå‡†MVU-Evalï¼Œä¸“é—¨ç”¨äºè¯„æµ‹MLLMçš„å¤šè§†é¢‘ç†è§£èƒ½åŠ›ã€‚è¯¥åŸºå‡†ä¸»è¦é€šè¿‡1,824ç»„è·¨é¢†åŸŸç²¾é€‰é—®ç­”å¯¹ï¼ˆè¦†ç›–4,959æ®µè§†é¢‘ï¼‰è¯„ä¼°å…«é¡¹æ ¸å¿ƒèƒ½åŠ›ï¼Œæ¶µç›–åŸºç¡€æ„ŸçŸ¥ä»»åŠ¡ä¸é«˜é˜¶æ¨ç†ä»»åŠ¡ã€‚è¿™äº›èƒ½åŠ›ä¸¥æ ¼å¯¹æ ‡è‡ªåŠ¨é©¾é©¶ä¸­çš„å¤šä¼ æ„Ÿå™¨ä¿¡æ¯åˆæˆã€ä½“è‚²èµ›äº‹å¤šè§†è§’åˆ†æç­‰å®é™…åº”ç”¨åœºæ™¯ã€‚é€šè¿‡å¯¹å‰æ²¿å¼€æºä¸é—­æºæ¨¡å‹çš„å¹¿æ³›è¯„æµ‹ï¼Œæ­ç¤ºäº†å½“å‰MLLMåœ¨å¤šè§†é¢‘ç†è§£èƒ½åŠ›æ–¹é¢å­˜åœ¨çš„æ˜¾è‘—æ€§èƒ½å·®è·ä¸å±€é™ã€‚æœ¬åŸºå‡†æ•°æ®é›†å·²å…¬å¼€å…±äº«ï¼Œä»¥æ¨åŠ¨æœªæ¥ç ”ç©¶å‘å±•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f3492e635044c64aaddec91547ae038~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=qmph9VidERXd%2F3vr8vVfSzcdnPA%3D" alt="" loading="lazy"/></p>
<p><strong>è®ºæ–‡13ï¼šTraining-Free Efficient Video Generation via Dynamic Token Carving</strong></p>
<p><strong>| è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2505.16864" target="_blank" title="https://arxiv.org/abs/2505.16864" ref="nofollow noopener noreferrer">arxiv.org/abs/2505.16â€¦</a></strong></p>
<p><strong>| é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjulianjuaner.github.io%2Fprojects%2Fjenga%2F" target="_blank" title="https://julianjuaner.github.io/projects/jenga/" ref="nofollow noopener noreferrer">julianjuaner.github.io/projects/jeâ€¦</a></strong></p>
<p>**| è®ºæ–‡ç®€ä»‹ï¼š**å°½ç®¡è§†é¢‘æ‰©æ•£å˜æ¢å™¨ï¼ˆDiTï¼‰æ¨¡å‹å±•ç°å‡ºå“è¶Šçš„ç”Ÿæˆè´¨é‡ï¼Œä½†å…¶å®é™…éƒ¨ç½²å› åºå¤§çš„è®¡ç®—éœ€æ±‚è€Œå—åˆ°ä¸¥é‡é˜»ç¢ã€‚è¿™ç§ä½æ•ˆæ€§æºäºä¸¤ä¸ªå…³é”®æŒ‘æˆ˜ï¼šè‡ªæ³¨æ„åŠ›æœºåˆ¶ç›¸å¯¹äºä»¤ç‰Œé•¿åº¦çš„äºŒæ¬¡æ–¹å¤æ‚åº¦ï¼Œä»¥åŠæ‰©æ•£æ¨¡å‹å›ºæœ‰çš„å¤šæ­¥ç”Ÿæˆç‰¹æ€§ã€‚ä¸ºçªç ´è¿™äº›é™åˆ¶ï¼Œæå‡ºäº†Jengaâ€”â€”ä¸€ç§åˆ›æ–°æ¨ç†æ¡†æ¶ï¼Œæ•´åˆäº†åŠ¨æ€æ³¨æ„åŠ›é›•åˆ»ä¸æ¸è¿›å¼åˆ†è¾¨ç‡ç”ŸæˆæŠ€æœ¯ã€‚è¯¥æ–¹æ³•åŸºäºä¸¤ä¸ªæ ¸å¿ƒæ´è§ï¼š(1) æ—©æœŸå»å™ªæ­¥éª¤æ— éœ€é«˜åˆ†è¾¨ç‡æ½œåœ¨è¡¨å¾ï¼›(2) åæœŸæ­¥éª¤æ— éœ€å¯†é›†æ³¨æ„åŠ›è®¡ç®—ã€‚Jengaé€šè¿‡åŸºäº3Dç©ºé—´å¡«å……æ›²çº¿çš„å—çŠ¶æ³¨æ„åŠ›æœºåˆ¶åŠ¨æ€ç­›é€‰å…³é”®ä»¤ç‰Œäº¤äº’ï¼ŒåŒæ—¶é‡‡ç”¨æ¸è¿›åˆ†è¾¨ç‡ç­–ç•¥åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­é€æ­¥æå‡æ½œåœ¨è¡¨å¾æ¸…æ™°åº¦ã€‚å®éªŒè¡¨æ˜ï¼ŒJengaåœ¨å¤šä¸ªå‰æ²¿è§†é¢‘æ‰©æ•£æ¨¡å‹ä¸Šå®ç°æ˜¾è‘—åŠ é€Ÿï¼ˆåœ¨VBenchåŸºå‡†æµ‹è¯•ä¸­å–å¾—8.83å€åŠ é€Ÿä¸”æ€§èƒ½ä»…ä¸‹é™0.01%ï¼‰ã€‚ä½œä¸ºå³æ’å³ç”¨è§£å†³æ–¹æ¡ˆï¼ŒJengaæ— éœ€æ¨¡å‹é‡è®­ç»ƒå³å¯å°†æ¨ç†æ—¶å»¶ä»æ•°åˆ†é’Ÿç¼©çŸ­è‡³ç§’çº§ï¼Œä½¿ç°ä»£ç¡¬ä»¶è®¾å¤‡èƒ½å¤Ÿå®ç°å®ç”¨åŒ–çš„é«˜è´¨é‡è§†é¢‘ç”Ÿæˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96ef3638b1934f059d048e8da75daab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=FwVBIzYnnZPCisDOZ4rrPiQ0cSc%3D" alt="" loading="lazy"/></p>
<p>å¿«æ‰‹å±•ä½é€Ÿè§ˆ</p>
<p>å…¨çƒé¡¶ä¼š NeurIPS 2025 å·²å°±ä½ï¼Œå¿«æ‰‹å¸¦ç€ä¼—å¤šå‰æ²¿æŠ€æœ¯å¹²è´§ç­‰ä½ æ¥ï¼ ç°åœºæ›´æœ‰è®¾è®¡æ„Ÿæ‹‰æ»¡çš„ token å®ä½“å¡ã€å®šåˆ¶æ¬¾å†°ç®±è´´ç­‰ä¸“å±ç¤¼å“ï¼Œåˆ°åœºäº’åŠ¨å°±èƒ½æ”¶å…¥å›Šä¸­ï½æœŸå¾…å’Œæ¯ä¸€ä½çƒ­çˆ±æŠ€æœ¯çš„ä½ ï¼Œåœ¨ä¼šåœºç¢°æ’æ€æƒ³ç«èŠ±ï¼Œå…±æ¢ AI æœªæ¥ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/209972f5d93b4646b1c117e39c3b4984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=hQgN6aa1Vv0wMwbTGBWJ%2BfA30Zs%3D" alt="" loading="lazy"/></p>
<p>NeurIPS 2025 ä¼šåœºå¹³é¢å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/779807bb1fc245599e4be6e438837b3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5omL5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764142821&amp;x-signature=VPUETZXyxQXjROhsErRAgnoSs24%3D" alt="" loading="lazy"/></p>
<p>å®šåˆ¶æ¬¾å†°ç®±è´´</p>
<p><strong>ç»“è¯­</strong></p>
<p>ä½œä¸ºä¸€å®¶ä»¥äººå·¥æ™ºèƒ½ä¸ºæ ¸å¿ƒé©±åŠ¨åŠ›å’ŒæŠ€æœ¯ä¾æ‰˜çš„ç§‘æŠ€å…¬å¸ï¼Œå¿«æ‰‹è‡´åŠ›äºæŒç»­æ·±åŒ–ç ”å‘æŠ•å…¥ï¼Œå°†æŠ€æœ¯æ‰“é€ ä¸ºé©±åŠ¨ä¸šåŠ¡å¢é•¿çš„å¼ºåŠ²å¼•æ“ã€‚åŒæ—¶ï¼Œå…¬å¸å°†åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸä¸æ–­æ¢ç´¢ï¼Œç§¯ææ¨åŠ¨å‰æ²¿æŠ€æœ¯åœ¨ä¸šåŠ¡åœºæ™¯ä¸­çš„è½åœ°åº”ç”¨ã€‚æ¬²è·å–ç›¸å…³è®ºæ–‡çš„è¯¦å°½å†…å®¹ä¸æ·±åº¦è§£è¯»ï¼Œæ•¬è¯·å…³æ³¨å¿«æ‰‹æŠ€æœ¯å…¬ä¼—å·çš„åç»­æ›´æ–°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡æ•°æ®åº“æƒé™å°æ”¹åŠ¨ï¼Œå¦‚ä½•æ‹–å®åŠä¸ªäº’è”ç½‘ï¼Ÿâ€”â€”Cloudflare 2025-11-18 å¤§æ•…éšœå¤ç›˜]]></title>    <link>https://juejin.cn/post/7574041466710491179</link>    <guid>https://juejin.cn/post/7574041466710491179</guid>    <pubDate>2025-11-19T07:26:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574041466710491179" data-draft-id="7574041466710458411" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡æ•°æ®åº“æƒé™å°æ”¹åŠ¨ï¼Œå¦‚ä½•æ‹–å®åŠä¸ªäº’è”ç½‘ï¼Ÿâ€”â€”Cloudflare 2025-11-18 å¤§æ•…éšœå¤ç›˜"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-19T07:26:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Starduster"/> <meta itemprop="url" content="https://juejin.cn/user/3350967174302167"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡æ•°æ®åº“æƒé™å°æ”¹åŠ¨ï¼Œå¦‚ä½•æ‹–å®åŠä¸ªäº’è”ç½‘ï¼Ÿâ€”â€”Cloudflare 2025-11-18 å¤§æ•…éšœå¤ç›˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3350967174302167/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Starduster
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:26:05.000Z" title="Wed Nov 19 2025 07:26:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´ 11 æœˆ 18 æ—¥ï¼ŒCloudflare å‘ç”Ÿäº† 2019 å¹´ä»¥æ¥æœ€ä¸¥é‡çš„ä¸€æ¬¡å…¨çƒç½‘ç»œæ•…éšœã€‚å¤§æ‰¹ä¾èµ– Cloudflare çš„ç½‘ç«™å’ŒæœåŠ¡ï¼ˆåŒ…æ‹¬ ChatGPTã€Xã€æ¸¸æˆã€å„ç±» SaaSï¼‰åœ¨æ•°å°æ—¶å†…æŒç»­è¿”å› 5xx é”™è¯¯ï¼Œç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯ â€œCloudflare ç½‘ç»œå†…éƒ¨å‡ºé”™â€ çš„æŠ¥é”™é¡µã€‚</p>
<p>äº‹å Cloudflare å‘å¸ƒäº†è¯¦ç»†çš„äº‹æ•…æŠ¥å‘Šï¼šè¿™ <strong>ä¸æ˜¯é»‘å®¢æ”»å‡»</strong>ï¼Œè€Œæ˜¯ä¸€è¿ä¸²ç”± <strong>ClickHouse æ•°æ®åº“æƒé™å˜æ›´</strong> å¼•å‘çš„è¿é”ååº”ï¼Œæœ€ç»ˆå¯¼è‡´æ ¸å¿ƒä»£ç†ç¨‹åºå´©æºƒã€‚</p>
<p>ä¸‹æ–‡æˆ‘ä»¬æŒ‰è¿™æ ·å‡ ä¸ªé—®é¢˜æ¥è®²ï¼š</p>
<ol>
<li>è¿™æ¬¡äº‹æ•…è¡¨å±‚ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</li>
<li>æŠ€æœ¯ä¸Šåˆ°åº•æ˜¯æ€æ ·çš„ä¸€æ¡ â€œå¤šç±³è¯ºéª¨ç‰Œé“¾â€ï¼Ÿ</li>
<li><strong>ClickHouse æƒé™å˜æ›´</strong> åˆ°åº•æ”¹äº†å•¥ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºäº‹ï¼Ÿ</li>
<li>æˆ‘ä»¬èƒ½ä»ä¸­å­¦åˆ°å“ªäº›é€šç”¨çš„å·¥ç¨‹ç»éªŒï¼Ÿ</li>
</ol>
<hr/>
<h2 data-id="heading-0">ä¸€ã€äº‹æ•…æ¦‚è§ˆï¼šä»é”™è¯¯é¡µåˆ°æ ¸å¿ƒä»£ç†å´©æºƒ</h2>
<h3 data-id="heading-1">1. å¤–åœ¨è¡¨ç°</h3>
<ul>
<li>
<p>æ—¶é—´ï¼š</p>
<ul>
<li><strong>11:20 UTC å·¦å³</strong>ï¼šCloudflare ç½‘ç»œå¼€å§‹å¤§è§„æ¨¡è¿”å› 5xxï¼›</li>
<li><strong>14:30 å·¦å³</strong>ï¼šæ ¸å¿ƒæµé‡åŸºæœ¬æ¢å¤ï¼›</li>
<li><strong>17:06</strong>ï¼šCloudflare å®£å¸ƒæ‰€æœ‰ç³»ç»Ÿæ¢å¤æ­£å¸¸ã€‚</li>
</ul>
</li>
<li>
<p>ç”¨æˆ·èƒ½æ„ŸçŸ¥åˆ°çš„ç—‡çŠ¶ï¼š</p>
<ul>
<li>è®¿é—®å¤§é‡ç½‘ç«™æ—¶ï¼Œé¡µé¢ç›´æ¥æ˜¾ç¤º Cloudflare çš„é”™è¯¯é¡µï¼›</li>
<li>è®¸å¤šç™»å½•ã€éªŒè¯ç ã€äººæœºæ ¡éªŒç•Œé¢å®Œå…¨æ— æ³•åŠ è½½ï¼ˆTurnstile æŒ‚äº†ï¼‰ï¼›</li>
<li>ä¸€éƒ¨åˆ†ä½¿ç”¨ Cloudflare Access / Zero Trust çš„å†…éƒ¨ç³»ç»Ÿç™»å½•å¤±æ•ˆã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">2. é«˜å±‚æŠ€æœ¯åŸå› ï¼ˆä¸€å¥è¯ç‰ˆï¼‰</h3>
<blockquote>
<p>ä¸€æ¬¡ ClickHouse æƒé™å˜æ›´ â†’ æŸ¥è¯¢ system.columns è¡Œä¸ºå˜åŒ– â†’ ç”Ÿæˆçš„ Bot Management ç‰¹å¾é…ç½®æ–‡ä»¶ â€œç¿»å€è†¨èƒ€â€ â†’ è¶…è¿‡ä»£ç†æ¨¡å—è®¾å®šçš„ç‰¹å¾ä¸Šé™ â†’ æ–°ä»£ç† FL2 é‡Œä¸€æ®µ Rust ä»£ç  <code>unwrap()</code> è§¦å‘ panic â†’ æ ¸å¿ƒä»£ç†ç¨‹åºå´©æºƒï¼Œå‘å…¨ç½‘è¿”å› 5xxã€‚</p>
</blockquote>
<p>æ³¨æ„ï¼š<strong>æ•°æ®åº“æœ¬èº«æ²¡ â€œåâ€</strong> ï¼ŒClickHouse æŒ‰æ–‡æ¡£è§„å®šçš„è¡Œä¸ºæ­£ç¡®å·¥ä½œï¼›é—®é¢˜åœ¨äºä¸Šå±‚ç‰¹å¾ç”Ÿæˆé€»è¾‘å¯¹å®ƒåšäº†é”™è¯¯å‡è®¾ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€ClickHouse æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆç»™æ²¡ç”¨è¿‡çš„äººä¸€ä¸ª 3 åˆ†é’Ÿç‰ˆï¼‰</h2>
<p>è¦ç†è§£äº‹æ•…é‡Œé‚£æ¡å‘äººçš„ SQLï¼Œæˆ‘ä»¬å…ˆå¿«é€Ÿè®¤è¯†ä¸€ä¸‹ ClickHouseã€‚</p>
<p>ä½ å¯ä»¥æŠŠ ClickHouse ç†è§£æˆä¸€ä¸ªï¼š</p>
<blockquote>
<p><strong>é«˜æ€§èƒ½çš„åˆ—å¼åˆ†ææ•°æ®åº“</strong>ï¼Œä¸“é—¨ç”¨æ¥å­˜å‚¨å’ŒæŸ¥è¯¢æµ·é‡æ—¥å¿—ã€ç›‘æ§ã€åŸ‹ç‚¹æ•°æ®ã€‚</p>
</blockquote>
<p>è¿™é‡Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒå®ƒçš„ä¸‰ç‚¹ç‰¹æ€§ï¼š</p>
<h3 data-id="heading-4">1. å¤šä¸ª database &amp; å¤šç§è¡¨ç±»å‹</h3>
<p>å’Œ MySQL ä¸€æ ·ï¼ŒClickHouse æœ‰å¤šä¸ª databaseï¼ˆåº“ï¼‰ï¼Œæ¯ä¸ªåº“é‡Œæœ‰å¾ˆå¤šè¡¨ã€‚<br/>
ä½†å®ƒè¿˜å¼•å…¥äº† <strong>åˆ†å¸ƒå¼è¡¨ï¼ˆDistributedï¼‰</strong> çš„æ¦‚å¿µï¼Œç”¨æ¥ç»Ÿä¸€æŸ¥è¯¢åˆ†ç‰‡æ•°æ®ã€‚</p>
<p>åœ¨ Cloudflare çš„æ¶æ„é‡Œï¼ˆæ ¹æ®å®˜æ–¹æè¿°ï¼‰ï¼š</p>
<ul>
<li><code>default</code> æ•°æ®åº“ï¼šæ”¾çš„æ˜¯ <strong>Distributed è¡¨</strong>ï¼Œæ¯”å¦‚ <code>default.http_requests_features</code>ï¼Œå¯¹ç”¨æˆ·æ¥è¯´æ˜¯é€»è¾‘ä¸Šçš„ â€œæ•´å¼ è¡¨â€ï¼›</li>
<li><code>r0</code> æ•°æ®åº“ï¼šæ”¾çš„æ˜¯å®é™…åˆ†ç‰‡ä¸Šçš„ <strong>æœ¬åœ°ç‰©ç†è¡¨</strong>ï¼Œæ¯”å¦‚ <code>r0.http_requests_features</code>ã€‚</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š<strong>ä¸¤è¾¹éƒ½æœ‰åŒåè¡¨</strong>ï¼Œä¸€ä¸ªæ˜¯èšåˆè§†å›¾ï¼Œä¸€ä¸ªæ˜¯çœŸå®å­˜å‚¨ã€‚</p>
<h3 data-id="heading-5">2. system.* ç³»ç»Ÿè¡¨ï¼šç±»ä¼¼ information_schema</h3>
<p>ClickHouse æœ‰ä¸€å¥— <code>system.*</code> è¡¨ç”¨æ¥æä¾›å…ƒæ•°æ®ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><code>system.tables</code>ï¼šæœ‰å“ªäº›è¡¨ï¼›</li>
<li><code>system.columns</code>ï¼šæ‰€æœ‰è¡¨é‡Œæœ‰å“ªäº›åˆ—ã€‚</li>
</ul>
<p><code>system.columns</code> çš„å…¸å‹ç”¨æ³•ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span>Â database,Â <span class="hljs-keyword">table</span>,Â name,Â type
<span class="hljs-keyword">FROM</span>Â system.columns
<span class="hljs-keyword">WHERE</span>Â <span class="hljs-keyword">table</span>Â <span class="hljs-operator">=</span>Â <span class="hljs-string">'http_requests_features'</span>;
</code></pre>
<p>è¿™æœ‰ç‚¹åƒ MySQL çš„ <code>information_schema.columns</code>ã€‚</p>
<p><strong>å…³é”®ç‚¹ï¼š</strong> <code>system.columns</code> åªä¼šæ˜¾ç¤º <strong>å½“å‰ç”¨æˆ·æœ‰æƒé™çœ‹åˆ°çš„è¡¨çš„åˆ—ä¿¡æ¯</strong>ã€‚å¦‚æœä½ æ²¡æƒé™è®¿é—®æŸä¸ªåº“ / è¡¨ï¼Œé‚£å®ƒåœ¨ <code>system.columns</code> ä¸­å°± â€œé€æ˜æ¶ˆå¤±â€ï¼Œæ ¹æœ¬ä¸ä¼šå‡ºç°åœ¨ç»“æœé‡Œã€‚</p>
<h3 data-id="heading-6">3. RBAC æƒé™æ¨¡å‹</h3>
<p>ClickHouse æ”¯æŒè§’è‰² / æƒé™ï¼ˆRBACï¼‰ï¼š</p>
<ul>
<li>
<p>å¯ä»¥é’ˆå¯¹ï¼šåº“ã€è¡¨ã€åˆ—ã€ç”šè‡³è¡Œåš SELECT/INSERT ç­‰æƒé™æ§åˆ¶ï¼›</p>
</li>
<li>
<p>å…¸å‹æˆæƒè¯­æ³•ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">GRANTÂ <span class="hljs-keyword">SELECT</span>Â <span class="hljs-keyword">ON</span>Â <span class="hljs-keyword">default</span>.*Â <span class="hljs-keyword">TO</span>Â some_role;
GRANTÂ <span class="hljs-keyword">SELECT</span>Â <span class="hljs-keyword">ON</span>Â r0.http_requests_featuresÂ <span class="hljs-keyword">TO</span>Â some_role;
</code></pre>
</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<em><em>ä½ ç»™äº†ä»€ä¹ˆæƒé™ï¼Œå°±ä¼šå½±å“ system.</em> è§†å›¾ä¸­ç”¨æˆ·èƒ½çœ‹åˆ°ä»€ä¹ˆ</em>*ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€é‚£ Cloudflare è¿™æ¬¡åˆ°åº•æ”¹äº†ä»€ä¹ˆæƒé™ï¼Ÿ</h2>
<p>Cloudflare åœ¨æŠ¥å‘Šé‡Œæè¿°ï¼Œä»–ä»¬æƒ³åšä¸€ä»¶ â€œçœ‹èµ·æ¥å¾ˆåˆç†â€ çš„äº‹ï¼š</p>
<blockquote>
<p>è®©è¿è¡Œåˆ†å¸ƒå¼æŸ¥è¯¢çš„ä¸æ˜¯å•ä¸€çš„ â€œç³»ç»Ÿè´¦å·â€ï¼Œè€Œæ˜¯å‘èµ·è¯·æ±‚çš„é‚£ä¸ªçœŸå®ç”¨æˆ·ï¼Œè¿™æ ·é™æµã€é…é¢ã€æƒé™æ§åˆ¶éƒ½æ›´ç»†ç²’åº¦ã€‚</p>
</blockquote>
<p>ä¸ºæ­¤ï¼Œä»–ä»¬åœ¨ ClickHouse ä¸Šåšäº†ä¸€ä¸ªå˜æ›´ï¼ˆç®€åŒ–ç†è§£ï¼Œå¤§è‡´æ˜¯è¿™æ ·ï¼‰ï¼š</p>
<p>ä¹‹å‰ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">GRANTÂ <span class="hljs-keyword">SELECT</span>Â <span class="hljs-keyword">ON</span>Â <span class="hljs-keyword">default</span>.*Â <span class="hljs-keyword">TO</span>Â role_for_analytics;
--Â ç”¨æˆ·åªçœ‹å¾—åˆ°Â <span class="hljs-keyword">default</span>Â åº“çš„è¡¨å’Œåˆ—
</code></pre>
<p>ä¹‹åï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">GRANTÂ <span class="hljs-keyword">SELECT</span>Â <span class="hljs-keyword">ON</span>Â <span class="hljs-keyword">default</span>.*Â <span class="hljs-keyword">TO</span>Â role_for_analytics;
GRANTÂ <span class="hljs-keyword">SELECT</span>Â <span class="hljs-keyword">ON</span>Â r0.*Â Â Â Â Â Â Â <span class="hljs-keyword">TO</span>Â role_for_analytics;
--Â ç”¨æˆ·ç°åœ¨ä¹Ÿèƒ½çœ‹åˆ°Â r0Â åº“é‡Œçš„åº•å±‚ç‰©ç†è¡¨
</code></pre>
<p>è¿™ä¸ªæ“ä½œå¯¼è‡´çš„æ•ˆæœæ˜¯ï¼š</p>
<blockquote>
<p>åŒä¸€ä¸ªç”¨æˆ·åœ¨æŸ¥è¯¢ <code>system.columns</code> æ—¶ï¼Œ<strong>åŸæœ¬åªä¼šçœ‹åˆ° <code>default</code> åº“çš„åˆ—ï¼Œç°åœ¨ä¼šåŒæ—¶çœ‹åˆ° <code>default</code> + <code>r0</code> ä¸¤å¥—æ•°æ®</strong>ã€‚</p>
</blockquote>
<p>è¿™æœ¬èº«æ˜¯ ClickHouse å®Œå…¨æ­£å¸¸ã€ç¬¦åˆæ–‡æ¡£çš„è¡Œä¸ºã€‚</p>
<p><strong>å‘åœ¨ä¸Šå±‚ï¼š</strong> Cloudflare çš„æŸæ®µä¸šåŠ¡ä»£ç é»˜è®¤è®¤ä¸º â€œåªä¼šæœ‰ default é‚£ä¸€ä»½â€ã€‚</p>
<hr/>
<h2 data-id="heading-8">å››ã€é‚£æ¡ â€œå‘æ­»äººä¸å¿å‘½â€ çš„ SQLï¼šç‰¹å¾æ–‡ä»¶å¦‚ä½•è¢« â€œç¿»å€è†¨èƒ€â€</h2>
<p>Cloudflare çš„ Bot Management éœ€è¦ä¸ºè‡ªå·±çš„æœºå™¨å­¦ä¹ æ¨¡å‹ç”Ÿæˆä¸€ä¸ª <strong>â€œç‰¹å¾é…ç½®æ–‡ä»¶ï¼ˆfeature fileï¼‰â€</strong> ï¼Œé‡Œé¢åˆ—å‡ºå„ç§ç‰¹å¾åç§°ã€ç±»å‹ç­‰ã€‚è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸‹å‘ç»™å…¨ç½‘çš„ä»£ç†ï¼Œç”¨æ¥ç»™æ¯ä¸ªè¯·æ±‚æ‰“ bot scoreã€‚</p>
<p>åœ¨ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œæœ‰è¿™æ ·ä¸€æ¡ SQLï¼ˆå®˜æ–¹æŠ¥å‘Šé‡Œç»™å‡ºæ¥çš„ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span>Â name,Â type
<span class="hljs-keyword">FROM</span>Â system.columns
<span class="hljs-keyword">WHERE</span>Â <span class="hljs-keyword">table</span>Â <span class="hljs-operator">=</span>Â <span class="hljs-string">'http_requests_features'</span>
<span class="hljs-keyword">ORDER</span>Â <span class="hljs-keyword">BY</span>Â name;
</code></pre>
<p>æˆ‘ä»¬æ³¨æ„ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>å®ƒåªæŒ‰ <code>table</code> è¿‡æ»¤ï¼Œæ²¡æœ‰ç®¡ <code>database</code>ï¼›</li>
<li>ä¹‹å‰ç”¨æˆ·åªçœ‹å¾—åˆ° <code>default.http_requests_features</code>ï¼›</li>
<li>ç»“æœè¢«ç›´æ¥ç”¨æ¥æ‹¼è£… â€œç‰¹å¾åˆ—è¡¨â€ã€‚</li>
</ol>
<h3 data-id="heading-9">1. å˜æ›´å‰ï¼šä¸€åˆ‡æ­£å¸¸</h3>
<p>æƒé™å˜æ›´ä¹‹å‰ï¼Œ<code>system.columns</code> é‡Œå¯¹è¿™ä¸ªæŸ¥è¯¢è¿”å›çš„ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼ˆç¤ºæ„ï¼‰ï¼š</p>





























<table><thead><tr><th>database</th><th>table</th><th>name</th><th>type</th></tr></thead><tbody><tr><td>default</td><td>http_requests_features</td><td>feature_a</td><td>UInt8</td></tr><tr><td>default</td><td>http_requests_features</td><td>feature_b</td><td>Float32</td></tr><tr><td>â€¦</td><td>â€¦</td><td>â€¦</td><td>â€¦</td></tr></tbody></table>
<p>ç‰¹å¾ç”Ÿæˆç¨‹åºæ‹¿åˆ°è¿™äº›è¡Œï¼Œç”Ÿæˆä¸€ä¸ªæœ‰ N ä¸ªç‰¹å¾çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ 60 ä¸ªï¼Œå®Œå…¨åœ¨ä»£ç†æ¨¡å—è®¾å®šçš„ â€œæœ€å¤š 200 ä¸ªç‰¹å¾â€ ä¸Šé™ä¹‹å†…ã€‚</p>
<h3 data-id="heading-10">2. å˜æ›´åï¼šåŒåè¡¨ + æƒé™ = æ•°æ®ç¿»å€</h3>
<p>ä¸€æ—¦ç»™äº† <code>r0.*</code> çš„æƒé™ï¼Œè¿™æ¡ SQL çš„ç»“æœå°±å˜æˆäº†ï¼š</p>















































<table><thead><tr><th>database</th><th>table</th><th>name</th><th>type</th></tr></thead><tbody><tr><td>default</td><td>http_requests_features</td><td>feature_a</td><td>UInt8</td></tr><tr><td>default</td><td>http_requests_features</td><td>feature_b</td><td>Float32</td></tr><tr><td>â€¦</td><td>â€¦</td><td>â€¦</td><td>â€¦</td></tr><tr><td>r0</td><td>http_requests_features</td><td>feature_a</td><td>UInt8</td></tr><tr><td>r0</td><td>http_requests_features</td><td>feature_b</td><td>Float32</td></tr><tr><td>â€¦</td><td>â€¦</td><td>â€¦</td><td>â€¦</td></tr></tbody></table>
<p>å¯ä»¥çœ‹åˆ°ï¼š<strong>åŒæ ·çš„åˆ—åœ¨ <code>default</code> å’Œ <code>r0</code> ä¸‹å„å‡ºç°äº†ä¸€é</strong>ã€‚</p>
<p>ç”±äºä¸Šå±‚ä»£ç å®Œå…¨æ²¡çœ‹ <code>database</code> å­—æ®µï¼Œåªæ‹¿ <code>name</code>ã€<code>type</code> å°±ç”¨ï¼Œç­‰äºæ˜¯ï¼š</p>
<blockquote>
<p>åŸæœ‰ N æ¡ç‰¹å¾è®°å½• â†’ ç°åœ¨å˜æˆäº†çº¦ 2N æ¡ã€‚</p>
</blockquote>
<p>äºæ˜¯ï¼ŒBot Management ç”Ÿæˆçš„ç‰¹å¾é…ç½®æ–‡ä»¶å¤§å°ç›´æ¥ <strong>ç¿»å€è†¨èƒ€</strong>ã€‚</p>
<h3 data-id="heading-11">3. ä»£ç†æ¨¡å—ä¸­çš„ä¸Šé™ + <code>unwrap()</code> panic</h3>
<p>Cloudflare çš„ä»£ç†æ¨¡å—ï¼ˆå°¤å…¶æ˜¯æ–°ä¸€ä»£ FL2ï¼‰é‡Œï¼Œå¯¹ç‰¹å¾æ•°é‡è®¾äº†ä¸€ä¸ªç¡¬ä¸Šé™ï¼Œä¾‹å¦‚ 200ï¼ˆæŠ¥å‘Šé‡Œæåˆ°æ­¤å‰é€šå¸¸åªç”¨åˆ° ~60 ä¸ªï¼‰ã€‚è¿™ä¸ªæ¨¡å—å¤§è‡´åšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>æŒ‰ä¸Šé™é¢„åˆ†é…å­˜å‚¨ç‰¹å¾çš„å†…å­˜ï¼›</li>
<li>åœ¨åŠ è½½é…ç½®æ—¶ï¼Œå¦‚æœå‘ç°ç‰¹å¾æ¡æ•°è¶…å‡ºäº†é¢„æœŸï¼Œå°±ä¼šèµ°ä¸€æ¡é”™è¯¯è·¯å¾„ã€‚</li>
</ol>
<p>é—®é¢˜å°±å‡ºåœ¨è¿™æ¡é”™è¯¯è·¯å¾„ä¸Šï¼š</p>
<ul>
<li>åœ¨ FL2 çš„ Rust ä»£ç ä¸­ï¼Œæœ‰åœ°æ–¹å¯¹ä¸€ä¸ª <code>Result</code> è°ƒç”¨äº† <code>unwrap()</code>ï¼›</li>
<li>åœ¨æ­£å¸¸æƒ…å†µä¸‹è¿™æ˜¯ <code>Ok(...)</code>ï¼Œä¸ä¼šå‡ºäº‹ï¼›</li>
<li>ä½†å½“ç‰¹å¾æ¡æ•°è¶…å‡ºä¸Šé™æ—¶ï¼Œå®ƒå˜æˆäº† <code>Err(...)</code>ï¼Œ<code>unwrap()</code> ç›´æ¥ <code>panic</code>ï¼›</li>
<li>panic å¯¼è‡´æ•´ä¸ªä»£ç†è¿›ç¨‹å´©æºƒï¼Œæ— æ³•å¤„ç†è¯·æ±‚ï¼Œäºæ˜¯å‘å¤–ç»Ÿä¸€è¿”å› 5xxã€‚</li>
</ul>
<p>è€Œè¿™æ°å¥½å‘ç”Ÿåœ¨ Cloudflare æœ€æ ¸å¿ƒçš„æµé‡è·¯å¾„ä¸Šï¼Œäºæ˜¯å°±å‡ºç°äº†æˆ‘ä»¬çœ‹åˆ°çš„ â€œåŠä¸ªäº’è”ç½‘éƒ½æŒ‚äº†â€ çš„ç°è±¡ã€‚</p>
<hr/>
<h2 data-id="heading-12">äº”ã€è¿™ä¸€é“¾è·¯é‡ŒçœŸæ­£çš„å‡ ä¸ª â€œå‘ç‚¹â€</h2>
<p>å¦‚æœä»æ¶æ„å’Œå·¥ç¨‹è§’åº¦æ‹†è§£ï¼Œè¿™æ¡é“¾è·¯é‡Œè‡³å°‘æœ‰äº”ä¸ªå…³é”®å‘ï¼š</p>
<h3 data-id="heading-13">1. æŠŠ â€œå†…éƒ¨ç”Ÿæˆçš„é…ç½®â€ å½“æˆäº†å®Œå…¨å¯ä¿¡</h3>
<p>ç‰¹å¾æ–‡ä»¶æ˜¯ Cloudflare è‡ªå·±å†…éƒ¨ç®¡é“ç”Ÿæˆçš„ï¼Œä¸æ˜¯ç”¨æˆ·ç›´æ¥ä¸Šä¼ çš„ã€‚å·¥ç¨‹å¸ˆé€šå¸¸ä¼šä¸‹æ„è¯†è§‰å¾—ï¼š</p>
<blockquote>
<p>â€œè¿™æ˜¯æˆ‘ä»¬è‡ªå·±ç³»ç»Ÿç”Ÿæˆçš„ä¸œè¥¿ï¼Œåº”è¯¥æ˜¯é è°±çš„ã€‚â€</p>
</blockquote>
<p>äºæ˜¯ï¼š</p>
<ul>
<li>æ²¡æœ‰å¯¹ç‰¹å¾æ•°é‡åšä¸¥æ ¼æ ¡éªŒæˆ–ç¡¬æ€§æˆªæ–­ï¼›</li>
<li>æ²¡æœ‰åšå¥½ â€œæ–‡ä»¶å¼‚å¸¸æ—¶çš„é™çº§ç­–ç•¥â€ï¼ˆæ¯”å¦‚å¿½ç•¥å¤šä½™ç‰¹å¾ / å›é€€ä¸Šä¸€ç‰ˆæœ¬ / å…³é—­ Bot æ¨¡å—ï¼‰ã€‚</li>
</ul>
<p>ä½†ç°å®æ˜¯ï¼š<strong>åªè¦é“¾è·¯ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œâ€œå†…éƒ¨é…ç½®â€ å°±éœ€è¦åƒä¸å¯ä¿¡è¾“å…¥ä¸€æ ·å¯¹å¾…</strong>ã€‚</p>
<h3 data-id="heading-14">2. SQL æŸ¥è¯¢å¯¹ç³»ç»Ÿè¡¨è¡Œä¸ºåšäº†éšå¼å‡è®¾</h3>
<p>é‚£æ¡ SQL çš„éšå«å‡è®¾æ˜¯ï¼š</p>
<blockquote>
<p>â€œæˆ‘æŸ¥ <code>system.columns</code> è¿‡æ»¤æŸä¸ª table åï¼Œå°±åªä¼šè¿”å› default åº“é‚£ä¸€ä»½ã€‚â€</p>
</blockquote>
<p>è€Œ ClickHouse çš„è¡Œä¸ºå®šä¹‰æ˜¯ï¼š</p>
<blockquote>
<p>åªè¦ä½ å¯¹æŸä¸ªè¡¨æœ‰æƒé™ï¼Œå®ƒçš„åˆ—å°±ä¼šå‡ºç°åœ¨ <code>system.columns</code> ä¸­ï¼Œ<strong>å“ªæ€•æœ‰å¤šä¸ªåº“é‡Œæœ‰åŒåè¡¨ã€‚</strong></p>
</blockquote>
<p>è¿™å…¶å®æ˜¯ä¸¤å¥—æ¨¡å‹çš„æ€ç»´å†²çªï¼š</p>
<ul>
<li>ä¸šåŠ¡ä¾§ï¼šé»˜è®¤ â€œä¸€ä¸ªé€»è¾‘è¡¨å â†’ ä¸€ä»½å…ƒæ•°æ®â€ï¼›</li>
<li>DB ä¾§ï¼šå…è®¸ â€œå¤šä¸ª database + å¤šä¸ªåŒåè¡¨å…¨éƒ½åˆæ³•å­˜åœ¨â€ã€‚</li>
</ul>
<h3 data-id="heading-15">3. æƒé™ï¼ˆRBACï¼‰å˜æ›´æ²¡æœ‰åæ¨ä¾èµ–ç³»ç»Ÿ</h3>
<p>ClickHouse çš„ RBAC æ˜¯å…¨å±€å½±å“çš„ï¼š</p>
<ul>
<li>
<p>ä¸€æ—¦ä½ å¯¹ <code>r0.*</code> æˆäºˆ SELECTï¼Œç”¨æˆ·å°±ç†æ‰€å½“ç„¶èƒ½çœ‹åˆ° <code>r0</code> ä¸‹çš„è¡¨å’Œ system.* ä¸­ç›¸åº”æ¡ç›®ï¼›</p>
</li>
<li>
<p>ä½†è¿™æ¬¡æƒé™å˜æ›´çš„å†³ç­–è·¯å¾„ï¼Œå¾ˆå¯èƒ½åªå…³æ³¨äº† â€œå­æŸ¥è¯¢ç”¨å®é™…ç”¨æˆ·èº«ä»½æ‰§è¡Œâ€ çš„éœ€æ±‚ï¼Œæ²¡æœ‰ç³»ç»Ÿæ€§åœ°æ¢³ç†ï¼š</p>
<ul>
<li>å“ªäº›ä¸Šå±‚æµç¨‹ä¾èµ– <code>system.columns</code>ï¼Ÿ</li>
<li>è¿™äº›æµç¨‹æ˜¯å¦å¯¹ <code>database</code> åšäº†åŒºåˆ†ï¼Ÿ</li>
<li>æ˜¯å¦å‡è®¾ â€œä¸€å¼ è¡¨ååªæœ‰ä¸€ä»½å…ƒæ•°æ®â€ï¼Ÿ</li>
</ul>
</li>
</ul>
<h3 data-id="heading-16">4. æ ¸å¿ƒè·¯å¾„é‡Œç”¨äº† â€œä¼šå´©æ•´ä¸ªè¿›ç¨‹â€ çš„é”™è¯¯å¤„ç†æ–¹å¼</h3>
<p>åœ¨é«˜å¯ç”¨ç³»ç»Ÿé‡Œï¼Œä¸€èˆ¬ä¼šå°½é‡é¿å…åœ¨æ ¸å¿ƒè·¯å¾„ä¸­ï¼š</p>
<ul>
<li>ç›´æ¥ <code>panic</code>ï¼›</li>
<li>åœ¨é”™è¯¯åˆ†æ”¯è°ƒç”¨ <code>unwrap()</code>ã€<code>expect()</code> ä¹‹ç±»ä¼šç»ˆæ­¢è¿›ç¨‹çš„æ–¹æ³•ã€‚</li>
</ul>
<p>æ›´ç†æƒ³çš„åšæ³•åŒ…æ‹¬ï¼š</p>
<ul>
<li>å¯¹ â€œéæ ¸å¿ƒåŠŸèƒ½â€ æ¨¡å—çš„é”™è¯¯è¦èƒ½ <strong>fail-open / fail-closed å¯é…ç½®</strong>ï¼›</li>
<li>æ›´ä¸Šå±‚æœ‰ä¸€ä¸ª â€œç†”æ–­â€ ç‚¹ï¼Œèƒ½æŠŠæŸäº›æ¨¡å—å½»åº•æ‘˜é™¤ï¼Œè€Œä¸æ˜¯è®©å®ƒä»¬æŠŠæ•´ä¸ªä»£ç†æ‹‰è·¨ã€‚</li>
</ul>
<p>Cloudflare åœ¨æŠ¥å‘Šä¸­ä¹Ÿæåˆ°ï¼Œä»Šåä¼šæ›´ä¸¥æ ¼åœ°å®¡æŸ¥ä»£ç†ä¸­å„ç»„ä»¶çš„ failure modeï¼Œå¹¶å¢åŠ æ›´å¤š â€œå…¨å±€ kill switchâ€ã€‚</p>
<h3 data-id="heading-17">5. ç¼ºå°‘ä¸€çœ¼å°±èƒ½çœ‹å‡º â€œfeature æ•°é‡å¼‚å¸¸â€ çš„ç›‘æ§</h3>
<p>è€ƒè™‘åˆ° Bot Management æ˜¯ä¸€ä¸ªé«˜åº¦ä¾èµ–é…ç½®çš„æ¨¡å—ï¼š</p>
<ul>
<li>
<p>å¦‚æœåœ¨ â€œæ¯æ¬¡å‘å¸ƒæ–°ç‰¹å¾æ–‡ä»¶â€ æ—¶å°±æœ‰ç›‘æ§ï¼š</p>
<ul>
<li>ç»Ÿè®¡ç‰¹å¾æ•°ï¼›</li>
<li>ä¸å‰ä¸€ç‰ˆæœ¬åšå¯¹æ¯”ï¼ˆä¾‹å¦‚è¶…è¿‡ 2 å€å°±æŠ¥è­¦ï¼‰ï¼›</li>
</ul>
</li>
<li>
<p>é‚£ä¹ˆè¿™æ¬¡é—®é¢˜å¯èƒ½åœ¨å½±å“å…¨ç½‘ä¹‹å‰å°±è¢«æŒ¡åœ¨å®éªŒ / ç°åº¦é˜¶æ®µã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-18">å…­ã€ç»™ä¸äº†è§£ ClickHouse çš„è¯»è€…çš„ä¸€ç‚¹ â€œæ€»ç»“ç‰ˆæ•™è®­â€</h2>
<p>ä½ å®Œå…¨å¯ä»¥æŠŠè¿™æ¬¡äº‹æ•…å½“æˆä¸€ä¸ªé€šç”¨çš„ <strong>â€œç³»ç»Ÿè®¾è®¡åä¾‹â€</strong> ï¼Œè€Œä¸æ˜¯ä»…ä»…å½’å’äºæŸä¸ªæ•°æ®åº“æˆ–æŸè¡Œ Rust ä»£ç ï¼š</p>
<ol>
<li>
<p><strong>æ‰€æœ‰é…ç½®éƒ½è¦å½“ â€œä¸å¯ä¿¡è¾“å…¥â€ å¤„ç†</strong></p>
<ul>
<li>ä¸åªæ˜¯ç”¨æˆ·è¡¨å•ï¼›</li>
<li>åŒ…æ‹¬å†…éƒ¨ç®¡é“ç”Ÿæˆçš„ JSONã€ç‰¹å¾æ–‡ä»¶ã€å…ƒæ•°æ®å¿«ç…§â€¦â€¦ä¸€æ—¦é“¾è·¯è¶³å¤Ÿé•¿ï¼Œå®ƒä»¬éšæ—¶å¯èƒ½å’Œé¢„æœŸä¸ä¸€è‡´ã€‚</li>
</ul>
</li>
<li>
<p><em><em>system.</em> / information_schema è¿™ç±»å…ƒæ•°æ®æŸ¥è¯¢è¦å†™å¾— â€œä¿å®ˆâ€</em> *</p>
<ul>
<li>æ˜ç¡®åŠ ä¸Š <code>database = 'xxx'</code>ï¼›</li>
<li>æˆ–è€…åœ¨åº”ç”¨å±‚åšå»é‡ä¸é™åˆ¶ï¼›</li>
<li>æŠŠ â€œåªä¼šæœ‰ä¸€ä»½â€ çš„å‡è®¾å†™æˆæ˜¾å¼æ¡ä»¶ï¼Œè€Œä¸æ˜¯éšå«åœ¨ â€œç°åœ¨åˆšå¥½æ²¡æœ‰åŒåè¡¨â€ çš„å·§åˆé‡Œã€‚</li>
</ul>
</li>
<li>
<p><strong>æƒé™å’Œå…ƒæ•°æ®è§†å›¾é«˜åº¦è€¦åˆæ—¶ï¼Œå˜æ›´è¦åæ¨åˆ°æ‰€æœ‰ä¾èµ–æ–¹</strong></p>
<ul>
<li>ç»™æŸä¸ªåº“åŠ äº† SELECT æƒé™ï¼Œçœ‹ä¼¼æ˜¯ â€œç»™åˆ«äººå¤šäº†ä¸€ç‚¹æ•°æ®è®¿é—®èƒ½åŠ›â€ï¼›</li>
<li>å®é™…ä¸Šæ”¹å˜çš„æ˜¯ï¼š<strong>ç³»ç»Ÿè¡¨ / è§†å›¾ / æŠ¥è¡¨ / é…ç½®ç”Ÿæˆ</strong> ç­‰ä¸€æ•´æ¡é“¾è·¯çš„è¾“å…¥ç©ºé—´ã€‚</li>
</ul>
</li>
<li>
<p><strong>åœ¨æ ¸å¿ƒç»„ä»¶é‡Œï¼Œé”™è¯¯ä¼˜å…ˆ degrade è€Œä¸æ˜¯ crash</strong></p>
<ul>
<li>ä¾‹å¦‚ï¼šBot ç‰¹å¾æ–‡ä»¶åŠ è½½å¤±è´¥æ—¶ï¼Œå¯ä»¥å…ˆæŠŠè¯¥æ¨¡å—æš‚æ—¶è§†ä¸º â€œå…³é—­â€ï¼Œè®©æµé‡ä»¥æ›´å¼±çš„é˜²æŠ¤é€šè¿‡ï¼›</li>
<li>çœŸè¦ panicï¼Œä¹Ÿå°½é‡æŠŠ panic æ§åˆ¶åœ¨æŸä¸ª â€œå®‰å…¨è¾¹ç•Œâ€ ä¹‹å†…ï¼Œè€Œä¸æ˜¯å½“åœºæŠŠæ•´ä¸ªä»£ç†å¹²æ‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç›‘æ§ä¸ä»…è¦çœ‹ â€œè¯·æ±‚é‡ã€é”™è¯¯ç‡â€ï¼Œä¹Ÿè¦çœ‹ â€œé…ç½®å’Œå…ƒæ•°æ®çš„å¥åº·åº¦â€</strong></p>
<ul>
<li>ç‰¹å¾æ•°ã€é…ç½®å°ºå¯¸ã€å­—æ®µæ•°é‡ã€schema å˜åŒ–ï¼Œè¿™äº›ä¹Ÿæ˜¯å¼‚å¸¸çš„é‡è¦ä¿¡å·ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-19">ä¸ƒã€ç»“è¯­</h2>
<p>ä» â€œæ”¹äº†ä¸€ä¸ªæ•°æ®åº“æƒé™â€ åˆ° â€œå…¨çƒå¤§é‡ç½‘ç«™ 5xxâ€ï¼Œä¸­é—´éš”ç€çš„æ˜¯ï¼š</p>
<ul>
<li>å…ƒæ•°æ®è¡Œä¸ºçš„ç»†å¾®æ”¹å˜ï¼›</li>
<li>ä¸šåŠ¡ä»£ç å¯¹ç³»ç»Ÿè¡¨çš„éšå¼å‡è®¾ï¼›</li>
<li>ä¸å¤Ÿé˜²å¾¡æ€§çš„é”™è¯¯å¤„ç†ï¼›</li>
<li>å¯¹å†…éƒ¨é…ç½®ç¼ºä¹ â€œåƒä¸å¯ä¿¡è¾“å…¥ä¸€æ ·â€ çš„æ•¬ç•ã€‚</li>
</ul>
<p>å¦‚æœä½ åœ¨åšæ—¥å¿—å¹³å°ã€é£æ§ç³»ç»Ÿã€åŸ‹ç‚¹åˆ†æï¼Œæˆ–è€…ä»»ä½•ä¾èµ– <strong>â€œé…ç½® + å¤§è§„æ¨¡åˆ†å¸ƒå¼æœåŠ¡â€</strong> çš„æ¶æ„ï¼Œè¿™æ¬¡ Cloudflare çš„äº‹æ•…å€¼å¾—ä½ è®¤çœŸè¯»ä¸€éåŸå§‹æŠ¥å‘Šï¼Œç„¶åå¯¹ç…§è‡ªå·±çš„ç³»ç»Ÿé—®ä¸€å¥ï¼š</p>
<blockquote>
<p>â€œå¦‚æœæ˜¯æˆ‘è¿™å¥—ç³»ç»Ÿï¼Œåªæ”¹ä¸€ä¸ªæƒé™æˆ– schemaï¼Œä¼šä¸ä¼šä¹Ÿæœ‰ç±»ä¼¼çš„è¿é”ååº”ï¼Ÿâ€</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reqable 3.0ç‰ˆæœ¬äº‘åŒæ­¥çš„å®è·µè¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7573995798604021775</link>    <guid>https://juejin.cn/post/7573995798604021775</guid>    <pubDate>2025-11-19T07:45:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573995798604021775" data-draft-id="7573989365614510080" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reqable 3.0ç‰ˆæœ¬äº‘åŒæ­¥çš„å®è·µè¿‡ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æµ‹è¯•"/> <meta itemprop="datePublished" content="2025-11-19T07:45:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MegatronKing"/> <meta itemprop="url" content="https://juejin.cn/user/2559318798642792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reqable 3.0ç‰ˆæœ¬äº‘åŒæ­¥çš„å®è·µè¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2559318798642792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MegatronKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:45:38.000Z" title="Wed Nov 19 2025 07:45:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Reqable 3.0ä¸Šçº¿äº†çš„äº‘æœåŠ¡åŠŸèƒ½ï¼Œæ”¯æŒæ•°æ®äº‘ç«¯å­˜å‚¨å’Œå¤šè®¾å¤‡å®æ—¶åŒæ­¥ï¼Œå°±è¿™ä¸€ä¸ªä¸å¤§ä¸å°çš„åŠŸèƒ½å´èŠ±è´¹äº†æˆ‘ä»¬å¾ˆå¤§çš„å¿ƒæ€å’Œç²¾åŠ›ï¼Œä»Šå¤©å†™äº†è¿™ç¯‡æ–‡ç« æ¥å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘ä»¬çš„å®è·µè¿‡ç¨‹ã€‚</p>
<p>é¦–å…ˆï¼Œå¤§å®¶å¯ä»¥å…ˆçœ‹çœ‹ä¸‹é¢çš„Reqableçš„å¤šè®¾å¤‡äº‘åŒæ­¥çš„è§†é¢‘ï¼Œå·¦è¾¹æ˜¯æ‰‹æœºï¼Œå³è¾¹æ˜¯ç”µè„‘ã€‚åœ¨å³è¾¹ç”µè„‘ä¸Šæ“ä½œæ•°æ®æ—¶ï¼Œå·¦è¾¹æ‰‹æœºä¸Šå¯ä»¥å®æ—¶çœ‹åˆ°æœ€æ–°çš„APIæ•°æ®ï¼Œè¿™å¯¹å›¢é˜Ÿå¤šäººåä½œéå¸¸æœ‰ç”¨ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5768f3c202be41f08bd3a9f1d4af7348~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVnYXRyb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143138&amp;x-signature=HhOi1txzLWLY7kT6j%2BiEGDnak5s%3D" alt="output.gif" loading="lazy"/></p>
<p>ä¸‹é¢ç®€å•èŠèŠæˆ‘ä»¬çš„æ€è€ƒå’Œå®è·µè¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-0">1. æ–¹æ¡ˆè°ƒç ”</h3>
<p>ä»…ä»…å®ç°æ•°æ®å­˜å‚¨åˆ°äº‘ç«¯å…¶å®å¹¶ä¸éš¾ï¼Œæš´åŠ›ç‚¹ä¸€ä¸ªä¸Šä¼ å’Œä¸€ä¸ªä¸‹è½½æ¥å£å¯èƒ½å°±å¹²å®Œäº‹äº†ã€‚ä½†æ˜¯ä¸ºäº†ç”¨æˆ·ä½“éªŒæˆ‘ä»¬å¹¶ä¸èƒ½è¿™ä¹ˆåšï¼Œæœ‰å¾ˆå¤šéœ€è¦è€ƒè™‘çš„ç‚¹ï¼Œæ¯”å¦‚ä¸‹é¢è¿™äº›ã€‚</p>
<ul>
<li>
<p>æ•°æ®ä½•æ—¶ä¸Šä¼ ï¼Œä½•æ—¶ä¸‹è½½ï¼Ÿè¿™ä¸ªé—®é¢˜æœ¬è´¨å…¶å®å°±æ˜¯å¦‚ä½•ä¿è¯æœ¬åœ°æ•°æ®å’Œäº‘ç«¯æ•°æ®çš„æ—¶æ•ˆæ€§ã€‚ç®€å•ç‚¹çš„æ–¹å¼ï¼Œæ˜¯äº¤ç»™ç”¨æˆ·å»æ“ä½œï¼Œç”¨æˆ·æ‰‹åŠ¨è§¦å‘ä¸Šä¼ äº‘ç«¯ï¼Œæ‰‹åŠ¨è§¦å‘ä»äº‘ç«¯ä¸‹è½½ã€‚é€»è¾‘å¤æ‚äº›ï¼Œå†å¢åŠ ä¸€ä¸ªå®šæ—¶é€»è¾‘ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å’ŒæœåŠ¡å™¨äº¤äº’ä¸€æ¬¡ï¼Œä¸Šä¼ æ•°æ®æˆ–è€…ä¸‹è½½æ•°æ®ã€‚è®©ç”¨æˆ·æ¥æ“ä½œï¼Œä½“éªŒå¿…ç„¶ä¸ä¼šå¾ˆå¥½ï¼Œæ¯”å¦‚æ•°æ®å¿˜è®°åŒæ­¥äº†ç­‰ç­‰ã€‚</p>
</li>
<li>
<p>å¦‚ä½•è§£å†³æ•°æ®ç‰ˆæœ¬å†²çªï¼Ÿå•è®¾å¤‡çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå‡ºç°æ•°æ®ç‰ˆæœ¬é—®é¢˜ã€‚ä½†æ˜¯å¤šè®¾å¤‡çš„æ—¶å€™ï¼Œå¿…ç„¶ä¼šå‡ºç°ç‰ˆæœ¬å†²çªé—®é¢˜ã€‚æ¯”å¦‚ä¸¤å°è®¾å¤‡åŒæ—¶ä¸Šä¼ æ•°æ®ï¼Œè¿™ä¸ªé—®é¢˜å…¶å®å¥½è§£å†³ï¼Œå…ˆæ¥å…ˆå­˜å‚¨ï¼Œååˆ°çš„å¤±è´¥ã€‚è¿™ä¸ªé—®é¢˜è¡ç”Ÿå¼€æ¥ï¼Œè¿˜æœ‰ä¸€äº›æƒ…å†µï¼Œä¾‹å¦‚æœ¬åœ°æ•°æ®å’Œäº‘ç«¯æ•°æ®éƒ½æ›´æ–°äº†é‡‡ç”¨å“ªä¸€ä¸ªï¼Œæ— è®ºæœ€åæ˜¯ä¿ç•™æœ¬åœ°æ•°æ®è¿˜æ˜¯ä¿ç•™äº‘ç«¯æ•°æ®ï¼Œéƒ½æœ‰æ•°æ®ä¸¢å¤±äº†ï¼Œä¸¢å¤±æ•°æ®çš„æ¦‚ç‡å’Œå¤šå°‘å–å†³äºä¸Šä¸€ä¸ªé—®é¢˜ä¸­åŒæ­¥çš„æ—¶æ•ˆæ€§ï¼ŒåŒæ­¥çš„é—´éš”è¶Šé•¿ï¼Œä¸¢å¤±æ•°æ®çš„æ¦‚ç‡å’Œæ•°æ®é‡å°±è¶Šå¤§ã€‚</p>
</li>
<li>
<p>å¦‚ä½•ä¸Šä¼ ï¼Œå¦‚ä½•ä¸‹è½½ï¼Ÿåœ¨æ•°æ®é‡ä¸å¤§çš„æƒ…å†µä¸‹ï¼ŒæŠŠæ‰€æœ‰æ•°æ®ä¸€èµ·ä¸¢åˆ°æ¥å£å°±å¯ä»¥äº†ï¼Œä½†æ˜¯å¦‚æœæ•°æ®é‡å¤§äº†ï¼Œå°±éå¸¸ä¸åˆé€‚äº†ï¼ŒåŒæ­¥æ—¶é—´å˜æ…¢ä¸è¯´ï¼ŒæœåŠ¡å™¨çš„å¸¦å®½ä¹Ÿåƒä¸æ¶ˆã€‚æˆ‘ä»¬æ²¡åŠæ³•æ§åˆ¶ç”¨æˆ·æ¥å£åˆ°åº•æœ‰å¤šå°‘ï¼Œå¯èƒ½ä¸€ä¸ªAPIçš„è¯·æ±‚ä½“å°±å¥½å‡ Mäº†ã€‚å¯¹æ­¤ï¼Œæˆ‘ä»¬åªèƒ½åšå¢é‡æ›´æ–°ï¼Œæ¯”å¦‚å¯ä»¥è€ƒè™‘ç”¨gitæ¥ç®¡ç†æ•°æ®ã€‚ä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬å†³å®šæ—¢è¦åšå®æ—¶åˆè¦åšå¢é‡æ›´æ–°ã€‚æ— è®ºæ˜¯RESTæ¥å£ï¼Œè¿˜æ˜¯GITç®¡ç†ï¼Œæˆ–è€…æ˜¯WebdavåŒæ­¥æ–‡ä»¶ï¼Œä¼¼ä¹éƒ½æ— æ³•æ»¡è¶³ï¼Œæˆ‘ä»¬åªèƒ½è‡ªå·±æ¥é€ ä¸ªè½®å­äº†ã€‚</p>
</li>
</ul>
<h3 data-id="heading-1">2. WebSocketé•¿è¿æ¥</h3>
<p>å› ä¸ºè€ƒè™‘åˆ°è¦åšå®æ—¶æ€§ï¼Œæˆ‘ä»¬åªèƒ½ä¸Šé•¿è¿æ¥äº†ã€‚å¸¸ç”¨çš„é•¿è¿æ¥ç½‘ç»œé€šä¿¡æ–¹æ¡ˆæœ‰WebSocketã€MQTTã€HTTP2ç­‰ï¼Œç›¸å¯¹æ¥è¯´WebSocketæ›´åŠ ç¨³å¦¥ä¸€ç‚¹ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç›®å‰é‡‡ç”¨çš„æ–¹æ¡ˆã€‚</p>
<p>è‡³äºå¢é‡ä¸Šä¼ ï¼Œå°±æ˜¯ç”¨æˆ·æ¯ä¸€ä¸ªæ“ä½œéƒ½éœ€è¦å®æ—¶é€šè¿‡WebSocketæ¥ä¸æœåŠ¡å™¨è¿›è¡ŒåŒæ­¥ï¼Œæ¯”å¦‚åˆ›å»ºäº†ä¸€ä¸ªAPIè¯·æ±‚ï¼Œä¿®æ”¹äº†æŸä¸ªç¯å¢ƒå˜é‡ï¼Œä¿®æ”¹äº†APIè¯·æ±‚çš„æ•°æ®ï¼Œåˆ é™¤äº†é›†åˆç­‰ç­‰ï¼Œæ— éœ€å°†å…¨éƒ¨æ•°æ®éƒ½ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œåªéœ€å°†ç”¨æˆ·çš„æ“ä½œæŒ‡ä»¤å’Œæ“ä½œçš„ç›¸å…³çš„æ•°æ®ä¸Šä¼ å³å¯ã€‚</p>
<p>æœåŠ¡å™¨æ¥æ”¶åˆ°ç”¨æˆ·çš„æ“ä½œæŒ‡ä»¤åï¼Œæ›´æ–°äº‘ç«¯æ•°æ®ï¼Œå†å°†æ“ä½œæŒ‡ä»¤å’Œæ•°æ®å‘é€ç»™æ‰€æœ‰è¿æ¥çš„å…¶ä»–è®¾å¤‡ï¼Œå…¶ä»–è®¾å¤‡æ¥æ”¶åˆ°æœåŠ¡å™¨ä¸‹å‘çš„æŒ‡ä»¤åæ›´æ–°æœ¬åœ°æ•°æ®ï¼Œè¿™æ ·ä¿è¯æœåŠ¡å™¨å’Œæ‰€æœ‰çš„å®¢æˆ·ç«¯æ•°æ®éƒ½æ˜¯æœ€æ–°ä¸”ä¸€è‡´çš„ã€‚</p>
<p>å¢é‡æ›´æ–°å¾ˆå®¹æ˜“å‡ºç°æ•°æ®ç‰ˆæœ¬ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œæ¯”å¦‚æŸå°è®¾å¤‡æ¥æ”¶åˆ°æ“ä½œæŒ‡ä»¤åæ•°æ®å¤„ç†å‡ºé”™ï¼Œè¿™æ—¶å€™è¿™å°è®¾å¤‡çš„æ•°æ®å°±æ— æ³•å’Œå…¶ä»–è®¾å¤‡ä¿æŒä¸€è‡´äº†ï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬å°±éœ€è¦åšå…¨é‡åŒæ­¥äº†ã€‚æ­¤å¤–ï¼Œæ¯æ¬¡å¯åŠ¨åº”ç”¨åŠ è½½æ•°æ®åï¼Œä¸ºäº†ä¿æŒæ•°æ®ä¸€è‡´ï¼Œæˆ‘ä»¬ä¹Ÿè¦åšå…¨é‡åŒæ­¥ã€‚</p>
<p>å…¨é‡åŒæ­¥å¦‚æœè§¦å‘å¤ªè¿‡é¢‘ç¹ï¼Œå¯¹æœåŠ¡å™¨ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å‹åŠ›ï¼Œæ¯”å¦‚ç”¨æˆ·æœ‰å‡ åä¸ªAPIé›†åˆï¼Œä»…ä»…å› ä¸ºä¸€ä¸ªæ“ä½œæŒ‡ä»¤æ²¡æ³•å®Œæˆï¼Œæ‰€æœ‰é›†åˆæ•°æ®éƒ½ä»æœåŠ¡å™¨ä¸‹è½½ä¸€éï¼Œå°±å¤ªæµªè´¹èµ„æºäº†ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ç»™æ¯ä¸ªAPIé›†åˆéƒ½å¢åŠ äº†ä¸€ä¸ªrevisionå­—æ®µï¼ŒæœåŠ¡ç«¯é›†åˆæ•°æ®æ¯æ›´æ–°ä¸€æ¬¡revisionå€¼éƒ½åŠ 1ï¼Œå®¢æˆ·ç«¯è¯·æ±‚å…¨é‡åŒæ­¥çš„æ—¶å€™ä¸Šä¼ æœ¬åœ°çš„revisionï¼Œå¦‚æœæœ¬åœ°çš„revisionå’ŒæœåŠ¡ç«¯ç›¸åŒï¼ŒæœåŠ¡å™¨å°±æ— éœ€å°†æ•°æ®åŒæ­¥ç»™å®¢æˆ·ç«¯ã€‚</p>
<h3 data-id="heading-2">3. ç¦»å®Œç¾è¿˜æœ‰è·ç¦»</h3>
<p>æˆ‘ä»¬è¿™ç§æ–¹æ¡ˆè™½ç„¶è§£å†³äº†æ•°æ®å®æ—¶æ€§å’Œæ•°æ®å¢é‡æ›´æ–°ä¸¤ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å´æœ‰ä¸€ä¸ªéå¸¸å¤§çš„ç¼ºç‚¹ï¼Œå°±æ˜¯å¤ªä¾èµ–æœåŠ¡å™¨äº†ã€‚å¦‚æœæœåŠ¡å™¨æ•…éšœæˆ–è€…ç”¨æˆ·è®¾å¤‡ç¦»çº¿ï¼Œç”¨æˆ·çš„æ“ä½œæŒ‡ä»¤æ— æ³•åŒæ­¥åˆ°æœåŠ¡å™¨ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>ä¸€ç§æ–¹æ¡ˆæ˜¯æŠŠç”¨æˆ·çš„æ“ä½œæŒ‡ä»¤å’Œæ•°æ®å…¨éƒ¨å­˜å‚¨åˆ°æœ¬åœ°ï¼Œç­‰ç½‘ç»œæ¢å¤å†åŒæ­¥ã€‚ä½†æ˜¯æ“ä½œæŒ‡ä»¤å›¤ç§¯è¿‡å¤šåˆè¯¥æ€ä¹ˆåŠï¼Œç¼“å­˜æ•°æ®ä¼šçˆ†ç‚¸ï¼›å¦å¤–ï¼Œå°±å¤šå°è®¾å¤‡éƒ½ç¼“å­˜äº†æ“ä½œæŒ‡ä»¤ï¼ŒåŒæ—¶éƒ½åŒæ­¥åˆ°æœåŠ¡å™¨è¯¥æ€ä¹ˆå¤„ç†ã€‚</p>
<p>å¯¹äºè¿™ä¸ªé—®é¢˜æˆ‘ä»¬ä¹Ÿæ²¡æƒ³åˆ°ä»€ä¹ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œåªå¥½å­¦ç«å“Postmanç­‰ä¸€æ ·ï¼Œåœ¨æ— æ³•è¿æ¥æœåŠ¡å™¨çš„æ—¶å€™é›†åˆå˜æˆåªè¯»çŠ¶æ€ã€‚å½“ç„¶ï¼Œå’ŒPostmanå®Œå…¨ä¾èµ–äº‘ç«¯ä¸åŒï¼ŒReqableä¸ä¼šå‡ºç°é›†åˆæ•°æ®åŠ è½½ä¸å‡ºæ¥çš„æƒ…å†µï¼Œåœ¨æœ¬åœ°ä»ç„¶ä¼šæœ‰æ•°æ®ã€‚å³ä½¿æˆ‘ä»¬æœåŠ¡å™¨æ•…éšœï¼Œç”¨æˆ·ä»ç„¶å¯ä»¥æ­£å¸¸æŸ¥çœ‹é›†åˆæ•°æ®å’Œè¿›è¡ŒAPIæµ‹è¯•ï¼Œä¹Ÿå¯ä»¥æ–°å»ºAPIæµ‹è¯•ï¼ŒåŸºæœ¬ä¸Šä¸ä¼šä¸­æ–­å¤§å®¶çš„å·¥ä½œï¼Œé™åˆ¶å°±æ˜¯æ–°å»ºæˆ–è€…ä¿®æ”¹çš„APIæ— æ³•ä¿å­˜åˆ°é›†åˆï¼Œé›†åˆå†…çš„æ•°æ®ä¹Ÿæ²¡åŠæ³•åˆ é™¤ã€‚</p>
<h3 data-id="heading-3">4. æœåŠ¡ç«¯è®¾è®¡</h3>
<p>åœ¨ä¹‹å‰æˆ‘ä»¬å¯¹åç«¯æ˜¯ç”¨Javaè¿˜æ˜¯Pythonæ¥å®ç°çº ç»“äº†å¾ˆä¹…ï¼Œæœ€ç»ˆé‡‡çº³äº†å¤šæ•°çš„å»ºè®®ä½¿ç”¨Javaï¼Œé¦–é€‰å½“ç„¶æ˜¯Spring Bootäº†ã€‚æˆ‘ä»¬ä¹‹å‰åç«¯æ˜¯ä½¿ç”¨Dartæ¥å†™çš„ï¼Œè¿™æ¬¡å…¨éƒ¨ä½¿ç”¨Javaæ¥é‡å†™äº†ã€‚</p>
<p>æˆ‘ä»¬æŠŠåç«¯åˆ†æˆäº†å¤šä¸ªå­é¡¹ç›®æ¥å®ç°ï¼Œä¾‹å¦‚å¸¸ç”¨çš„æ¥å£APIï¼Œç™»å½•æ³¨å†Œç­‰ç­‰ä½œä¸ºä¸€ä¸ªå­é¡¹ç›®ï¼Œäº‘æœåŠ¡ä½œä¸ºå¦ä¸€ä¸ªå­é¡¹ç›®ï¼Œå’Œäº§å“åŠŸèƒ½ä¸ç›¸å…³çš„åƒäº‹ä»¶ç»Ÿè®¡ä¹Ÿå•ç‹¬æ‹†åˆ†å‡ºæ¥ï¼Œæ¯ä¸ªå­é¡¹ç›®æ”¾åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šå•ç‹¬éƒ¨ç½²ã€‚è¿™æ ·æœ‰ä¸ªå¥½å¤„ï¼Œåƒå¸¸è§„çš„æ¥å£æ›´æ–°ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œé‡æ–°éƒ¨ç½²ç”¨æˆ·ä¹Ÿä¸ä¼šæœ‰æ„ŸçŸ¥ï¼Œåƒäº‘æœåŠ¡ä½¿ç”¨é•¿è¿æ¥ï¼Œæˆ‘ä»¬å°½é‡ä¸å»åŠ¨ï¼Œå› ä¸ºåªè¦ä¸€é‡æ–°éƒ¨ç½²æ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä¼šæ„ŸçŸ¥åˆ°ã€‚å¦å¤–ä¸€ä¸ªè€ƒè™‘ï¼ŒæŒ‰ç…§æˆ‘ä»¬çš„è§„åˆ’ï¼Œäº‘æœåŠ¡è¿™éƒ¨åˆ†ä»£ç åé¢ä¼šå¼€æºå‡ºæ¥ï¼Œä¾›ç”¨æˆ·ç§æœ‰éƒ¨ç½²ï¼Œå¦‚æœä¸æ”¾å¿ƒå°†æ•°æ®å­˜å‚¨åˆ°æˆ‘ä»¬æœåŠ¡å™¨ä¸Šé¢çš„è¯ã€‚</p>
<p>å¯¹äºæ•°æ®å­˜å‚¨ï¼Œæˆ‘ä»¬é‡‡è´­äº†è…¾è®¯äº‘çš„é«˜å¯ç”¨MySQLæ•°æ®ï¼Œè‡ªå¸¦å®¹ç¾ã€‚ä¸ºäº†ç¨³å¦¥èµ·è§ï¼Œæˆ‘ä»¬è¿˜ä¼šæ¯æ—¥å°†æ•°æ®è‡ªåŠ¨å¤‡ä»½åˆ°é˜¿é‡Œäº‘ï¼Œæ¯•ç«Ÿé¸¡è›‹ä¸èƒ½æ”¾ä¸€ä¸ªç¯®å­é‡Œï¼Œå¤§å®¶çš„æ•°æ®æ˜¯æ— ä»·çš„ã€‚</p>
<h3 data-id="heading-4">5. åç»­è§„åˆ’</h3>
<p>ç›®å‰é˜¶æ®µï¼Œå¤šè®¾å¤‡åŒæ­¥åªèƒ½åœ¨åŒä¸€ä¸ªè´¦æˆ·ä¸‹é¢è¿›è¡Œï¼Œåç»­æˆ‘ä»¬ä¼šå¢åŠ å›¢é˜ŸåŠŸèƒ½ï¼ŒåŒä¸€ä¸ªå›¢é˜Ÿæˆå‘˜ä¹‹é—´å¯ä»¥è®¿é—®å’ŒåŒæ­¥åŒä¸€ä¸ªé›†åˆçš„æ•°æ®ã€‚å¦å¤–ï¼Œå°±æ˜¯ä¸åŒå›¢é˜Ÿä¸åŒè´¦æˆ·ä¹‹é—´çš„æ•°æ®åˆ†äº«åŠŸèƒ½ï¼Œä¾‹å¦‚å¯ä»¥åœ¨Reqableå†…å°†æ•°æ®ç›´æ¥åˆ†äº«ç»™æŒ‡å®šçš„ç”¨æˆ·ã€‚</p>
<p>å¦å¤–ä¸€ä¸ªé‡è¦çš„äº‹é¡¹ï¼Œå°±æ˜¯å¦‚ä½•è®©ç”¨æˆ·è‡ªè¡Œéƒ¨ç½²ï¼Œç”±äºæ–°ç‰ˆæœ¬åˆšä¸Šçº¿ï¼Œè¿˜æœ‰è®¸å¤šåœ°æ–¹éœ€è¦å†æ€è™‘å’Œæ‰“ç£¨ï¼Œé¡¹ç›®è¿˜ä¼šæœ‰ä¸å°çš„å˜åŠ¨ï¼Œè¿™äº‹æƒ…ä¹Ÿæ€¥ä¸å¾—ã€‚</p>
<h3 data-id="heading-5">6. ç«å“å¯¹æ¯”</h3>
<p>æœ€åï¼Œç®€å•èŠèŠä¸€äº›çŸ¥åç«å“çš„å®ç°æ–¹æ¡ˆï¼Œä»¥åŠå„è‡ªçš„ä¼˜ç¼ºç‚¹ã€‚</p>
<ul>
<li>
<p>Postmanï¼Œæ–¹æ¡ˆå’Œæˆ‘ä»¬ç±»ä¼¼ï¼Œä¹Ÿæ˜¯é€šè¿‡WebSocketå‘æœåŠ¡å™¨åŒæ­¥ç”¨æˆ·çš„æ“ä½œæŒ‡ä»¤å¹¶æ¥æ”¶å…¶ä»–è´¦æˆ·æˆ–è€…è®¾å¤‡çš„ä¿®æ”¹æŒ‡ä»¤ï¼Œç„¶åæ›´æ–°äº‘ç«¯å’Œæœ¬åœ°æ•°æ®ã€‚åªè¦æ— æ³•è¿æ¥æœåŠ¡å™¨ï¼ŒAPIé›†åˆä¾¿ä¼šè¿›å…¥åªè¯»çŠ¶æ€ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸¤è€…æœ‰ä¸€ä¸ªæœ€å¤§çš„ä¸åŒç‚¹ï¼ŒPostmanæœ¬è´¨æ˜¯ä¸ªæµè§ˆå™¨ï¼Œæ•°æ®æ¯æ¬¡éƒ½éœ€è¦ä»æœåŠ¡å™¨æ‹‰å–ï¼Œè€Œä¸”æ•°æ®åªæ˜¯ç¼“å­˜åœ¨æœ¬åœ°è€Œä¸æ˜¯å­˜å‚¨åœ¨æœ¬åœ°ï¼Œæ–­ç½‘æ‰“å¼€Postmanå¯ä»¥çœ‹åˆ°ä»€ä¹ˆæ•°æ®éƒ½æ²¡æœ‰ï¼ŒåŠ è½½ä¸å‡ºæ¥ï¼Œç›´æ¥å½±å“åˆ°ç”¨æˆ·çš„å·¥ä½œï¼Œè€ŒReqableæœ¬åœ°çš„æ•°æ®ä»ç„¶å¯ä»¥æŸ¥çœ‹å’Œä½¿ç”¨ã€‚</p>
</li>
<li>
<p>Brunoï¼Œä¸»è¦æ˜¯é€šè¿‡Gitæ¥ç®¡ç†å’ŒåŒæ­¥æ•°æ®ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ›¾ç»æ€è€ƒè¿‡çš„æ–¹æ¡ˆä¹‹ä¸€ã€‚Brunoä½¿ç”¨æ–‡ä»¶æ¥ç»„ç»‡APIæ•°æ®ï¼Œé€šè¿‡Gitå‘½ä»¤æ¥æäº¤å’Œæ›´æ–°æ–‡ä»¶ã€‚ç”±äºä½¿ç”¨æ–‡æœ¬æè¿°è¯­è¨€ï¼Œå¯ä»¥ç›´è§‚åœ°è®©ç”¨æˆ·å¤„ç†æ•°æ®ç‰ˆæœ¬å†²çªã€‚ç¼ºç‚¹æ˜¯æ— æ³•åšåˆ°å®æ—¶åŒæ­¥ï¼Œä¸Šä¼ æ•°æ®ï¼Œéœ€è¦ä¿®æ”¹ã€æäº¤ã€æ¨é€ä¸‰æ­¥èµ°ï¼Œä¸‹è½½æ•°æ®è¿˜éœ€è¦æš‚å­˜æœ¬åœ°çš„ä¿®æ”¹ï¼Œå…¶å®å¹¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚</p>
</li>
</ul>
<h3 data-id="heading-6">7. ç»“è¯­</h3>
<p>Reqableè™½ç„¶è¿˜æœ‰å¾ˆå¤šä¸å®Œå–„çš„åœ°æ–¹ï¼Œä½†æˆ‘ä»¬ä¸€ç›´åœ¨åŠªåŠ›æ›´æ–°ï¼Œä¸€æ­¥ä¸€ä¸ªè„šå°ï¼Œè‡´åŠ›äºåšæœ€å¥½çš„APIå·¥å…·ï¼Œå¸Œæœ›å¤§å®¶æ”¯æŒï¼æ¬¢è¿è®¿é—®æˆ‘ä»¬çš„ç½‘ç«™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Freqable.com%2F" target="_blank" title="https://reqable.com/" ref="nofollow noopener noreferrer">reqable.com/</a></p>
<p>è°¢è°¢å¤§å®¶ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[5æ­¥æ„å»ºä¼ä¸šçº§RAGåº”ç”¨ï¼šDifyä¸LangChain v1.0é›†æˆå®æˆ˜]]></title>    <link>https://juejin.cn/post/7574041466710655019</link>    <guid>https://juejin.cn/post/7574041466710655019</guid>    <pubDate>2025-11-19T07:45:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574041466710655019" data-draft-id="7574069837532692516" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="5æ­¥æ„å»ºä¼ä¸šçº§RAGåº”ç”¨ï¼šDifyä¸LangChain v1.0é›†æˆå®æˆ˜"/> <meta itemprop="keywords" content="LangChain,LLM,Agent"/> <meta itemprop="datePublished" content="2025-11-19T07:45:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            5æ­¥æ„å»ºä¼ä¸šçº§RAGåº”ç”¨ï¼šDifyä¸LangChain v1.0é›†æˆå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:45:03.000Z" title="Wed Nov 19 2025 07:45:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fde45c850f3548c1875b911b2e13ace1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143102&amp;x-signature=Ijh%2F8lNZLGOWaB6VecWzEC0xXwE%3D" alt="" loading="lazy"/></p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é€šè¿‡äº”ä¸ªå…³é”®æ­¥éª¤ï¼Œå¸¦æ‚¨ä»é›¶å¼€å§‹æŒæ¡Difyä¸LangChain v1.0çš„é›†æˆæŠ€æœ¯ï¼Œæ„å»ºå±äºè‡ªå·±çš„ä¼ä¸šçº§RAGåº”ç”¨ã€‚</p>
<h2 data-id="heading-0">Difyæ ¸å¿ƒåŠŸèƒ½è§£æï¼šä½ä»£ç å¼€å‘çš„å¼ºå¤§å¼•æ“</h2>
<p>Difyä½œä¸ºå¼€æºçš„LLMåº”ç”¨å¼€å‘å¹³å°ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå°†å¤æ‚çš„AIå·¥ç¨‹èƒ½åŠ›å°è£…ä¸ºç›´è§‚çš„å¯è§†åŒ–å·¥å…·ã€‚åœ¨é›†æˆLangChainæ—¶ï¼Œä»¥ä¸‹ç‰¹æ€§å°¤ä¸ºå…³é”®ï¼š</p>
<p><strong>å¯è§†åŒ–å·¥ä½œæµç¼–æ’</strong>å…è®¸å¼€å‘è€…é€šè¿‡æ‹–æ‹½èŠ‚ç‚¹æ„å»ºå¤æ‚AIæµç¨‹ã€‚Difyçš„Chatflowå¼•æ“æ”¯æŒæ¡ä»¶åˆ†æ”¯ã€å¾ªç¯é€»è¾‘å’Œå¹¶è¡Œä»»åŠ¡å¤„ç†ï¼Œè¿™æ„å‘³ç€å³ä½¿æ˜¯éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½è®¾è®¡å‡ºåŒ…å«RAGæ£€ç´¢ã€å·¥å…·è°ƒç”¨å’Œå¤šæ¨¡å‹åä½œçš„é«˜çº§åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨å®¢æœåœºæ™¯ä¸­ï¼Œå¯è½»æ¾é…ç½®"ç”¨æˆ·æé—®â†’æ„å›¾è¯†åˆ«â†’çŸ¥è¯†åº“æ£€ç´¢â†’LLMç”Ÿæˆâ†’å¤šæ¸ é“åˆ†å‘"çš„å®Œæ•´æµç¨‹ã€‚</p>
<p><strong>æ¨¡å‹ç½‘å…³</strong>åŠŸèƒ½è§£å†³äº†å¤šæ¨¡å‹ç®¡ç†çš„ç—›ç‚¹ã€‚Difyæ”¯æŒOpenAIã€Anthropicã€Llamaç­‰æ•°ç™¾ç§æ¨¡å‹çš„ç»Ÿä¸€æ¥å…¥ï¼Œé€šè¿‡æ ‡å‡†åŒ–APIæŠ½è±¡ï¼Œä½¿LangChainè°ƒç”¨ä¸åŒæ¨¡å‹æ—¶æ— éœ€ä¿®æ”¹ä»£ç ã€‚æŸç”µå•†å¹³å°åˆ©ç”¨æ­¤ç‰¹æ€§ï¼Œåœ¨ä¿ƒé”€é«˜å³°æœŸè‡ªåŠ¨å°†ç®€å•æŸ¥è¯¢åˆ‡æ¢è‡³å¼€æºæ¨¡å‹ï¼Œå¤æ‚æ¨ç†ä¿ç•™GPT-4ï¼Œä½¿æˆæœ¬é™ä½40%åŒæ—¶ä¿æŒæœåŠ¡è´¨é‡ã€‚</p>
<p><strong>RAGå¼•æ“</strong>ç»è¿‡æ·±åº¦ä¼˜åŒ–ï¼Œæ”¯æŒ20+æ–‡æ¡£æ ¼å¼è§£æå’Œæ··åˆæ£€ç´¢ç­–ç•¥ã€‚Difyçš„çˆ¶å­åˆ†æ®µæŠ€æœ¯å°†æ–‡æ¡£æ‹†åˆ†ä¸ºè¯­ä¹‰å—ï¼ˆçˆ¶æ®µï¼‰å’Œç»†èŠ‚å—ï¼ˆå­æ®µï¼‰ï¼Œç»“åˆBM25å…³é”®è¯æ£€ç´¢ä¸å‘é‡æ£€ç´¢ï¼Œä½¿å¬å›ç‡æå‡25%ã€‚åœ¨ä»£ç å®ç°ä¸­ï¼Œåªéœ€é€šè¿‡å‡ è¡Œé…ç½®å³å¯å¯ç”¨è¿™ä¸€é«˜çº§ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Dify RAGé…ç½®ç¤ºä¾‹ï¼ˆéœ€dify-client==1.9.1ï¼‰  </span>
fromÂ dify_clientÂ importÂ DifyClient  
  
<span class="hljs-attr">client</span> = DifyClient(api_key=<span class="hljs-string">"your_api_key"</span>)  
client.knowledge.create_dataset(  
Â  Â  <span class="hljs-attr">name</span>=<span class="hljs-string">"ä¼ä¸šçŸ¥è¯†åº“"</span>,  
Â  Â  <span class="hljs-attr">retrieval_strategy</span>=<span class="hljs-string">"hybrid"</span>,Â  <span class="hljs-comment"># æ··åˆæ£€ç´¢æ¨¡å¼  </span>
Â  Â  <span class="hljs-attr">chunking_strategy</span>={  
Â  Â  Â  Â  "mode":Â "semantic",  
Â  Â  Â  Â  "parent_chunk_size":Â 500,  
Â  Â  Â  Â  "child_chunk_size":Â 100,  
Â  Â  Â  Â  "overlap_rate":Â 0.15  
Â  Â  }  
)
</code></pre>
<p><strong>Agentæ¡†æ¶</strong>æ”¯æŒFunction Callingä¸ReActæ¨¡å¼ï¼Œå†…ç½®50+å·¥å…·é›†æˆã€‚é€šè¿‡Difyçš„å·¥å…·å¸‚åœºï¼Œå¯ä¸€é”®æ·»åŠ LangChainçš„å„ç§å·¥å…·èƒ½åŠ›ï¼Œå¦‚SerpAPIæœç´¢ã€WolframAlphaè®¡ç®—ç­‰ï¼Œä¸ºæ™ºèƒ½ä½“æ‰©å±•ä¸°å¯Œçš„å¤–éƒ¨èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-1">LangChain v1.0æ–°ç‰¹æ€§è§£è¯»ï¼šæ„å»ºç”Ÿäº§çº§Agentçš„åˆ©å™¨</h2>
<p>2025å¹´10æœˆå‘å¸ƒçš„LangChain v1.0å¸¦æ¥äº†æ¶æ„å±‚é¢çš„é‡å¤§é©æ–°ï¼Œè¿™äº›å˜åŒ–æ·±åˆ»å½±å“äº†ä¸Difyçš„é›†æˆæ–¹å¼ï¼š</p>
<p><strong>ç»Ÿä¸€AgentæŠ½è±¡</strong>æ˜¯æœ€æ˜¾è‘—çš„æ›´æ–°ã€‚v1.0å°†åŸæœ‰çš„å„ç±»Chainå’ŒAgentç»Ÿä¸€ä¸ºåŸºäºLangGraphæ„å»ºçš„Â <code>create_agent</code>Â æ¥å£ï¼Œå¤§å¹…ç®€åŒ–äº†å¤æ‚é€»è¾‘çš„å®ç°ã€‚ä¸æ—§ç‰ˆç›¸æ¯”ï¼Œä»£ç é‡å‡å°‘60%ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># LangChain v1.0 Agentåˆ›å»ºï¼ˆéœ€langchain==1.0.0ï¼‰  </span>
<span class="hljs-keyword">from</span>Â langchain.agentsÂ <span class="hljs-keyword">import</span>Â create_agent  
<span class="hljs-keyword">from</span>Â langchain_anthropicÂ <span class="hljs-keyword">import</span>Â ChatAnthropic  
  
<span class="hljs-comment"># å®šä¹‰å·¥å…·  </span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">location:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-built_in">str</span>:  
Â  Â  <span class="hljs-string">"""è·å–æŒ‡å®šä½ç½®çš„å¤©æ°”ä¿¡æ¯"""</span>  
Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-string">f"<span class="hljs-subst">{location}</span>çš„å¤©æ°”æ˜¯æ™´æœ—çš„"</span>  
  
<span class="hljs-comment"># åˆ›å»ºAgentï¼ˆå°‘äº10è¡Œä»£ç ï¼‰  </span>
model = ChatAnthropic(model=<span class="hljs-string">"claude-3-5-sonnet-20241022"</span>)  
agent = create_agent(  
Â  Â  model=model,  
Â  Â  tools=[get_weather],  
Â  Â  system_prompt=<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„AIåŠ©æ‰‹"</span>  
)  
  
<span class="hljs-comment"># æ‰§è¡Œ  </span>
result = agent.invoke({<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"åŒ—äº¬å¤©æ°”å¦‚ä½•ï¼Ÿ"</span>}]})
</code></pre>
<p><strong>ä¸­é—´ä»¶æœºåˆ¶</strong>ä¸ºAgentæä¾›äº†å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ã€‚å¼€å‘è€…å¯é€šè¿‡Â <code>middleware</code>Â å‚æ•°æ³¨å…¥é€šç”¨é€»è¾‘ï¼Œå¦‚å¯¹è¯æ‘˜è¦ã€æ•æ„Ÿä¿¡æ¯è¿‡æ»¤ã€å·¥å…·æƒé™æ§åˆ¶ç­‰ã€‚ä¾‹å¦‚ï¼Œæ·»åŠ å¯¹è¯æ‘˜è¦ä¸­é—´ä»¶è§£å†³é•¿å¯¹è¯ä¸Šä¸‹æ–‡è¶…é™é—®é¢˜ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">fromÂ langchain.agents.middlewareÂ importÂ summarization_middleware  
  
<span class="hljs-attr">agent</span> = create_agent(  
Â  Â  <span class="hljs-attr">model</span>=model,  
Â  Â  <span class="hljs-attr">tools</span>=[get_weather],  
Â  Â  <span class="hljs-attr">middleware</span>=[  
Â  Â  Â  Â  summarization_middleware(  
Â  Â  Â  Â  Â  Â  model=<span class="hljs-string">"openai:gpt-4o-mini"</span>,  
Â  Â  Â  Â  Â  Â  max_tokens_before_summary=<span class="hljs-number">4000</span>,  
Â  Â  Â  Â  Â  Â  messages_to_keep=<span class="hljs-number">20</span>  
Â  Â  Â  Â  )  
Â  Â  ]  
)

</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/631261eaf6b8457d93cdcf08acc1545d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143102&amp;x-signature=abjJZckkgEYMPNntIVxsp9Mlj2M%3D" alt="image.png" loading="lazy"/>
LangChain v1.0æ¶æ„å›¾</p>
<p><strong>æ ‡å‡†åŒ–å†…å®¹å—</strong>ä½¿å·¥å…·è°ƒç”¨å’Œå¤šæ¨¡æ€å¤„ç†æ›´åŠ æ¸…æ™°ã€‚v1.0å¼•å…¥çš„Â <code>content_blocks</code>Â ç»“æ„ç»Ÿä¸€äº†ä¸åŒç±»å‹æ¶ˆæ¯çš„è¡¨ç¤ºæ–¹å¼ï¼Œæ— è®ºæ˜¯æ–‡æœ¬ã€å·¥å…·è°ƒç”¨è¿˜æ˜¯å›¾åƒURLï¼Œéƒ½èƒ½ä»¥ä¸€è‡´çš„æ ¼å¼åœ¨ç³»ç»Ÿä¸­æµè½¬ï¼Œè¿™ä¸ºDifyä¸LangChainä¹‹é—´çš„æ•°æ®äº¤æ¢æä¾›äº†ä¾¿åˆ©ã€‚</p>
<h2 data-id="heading-2">é›†æˆæ­¥éª¤æŒ‡å—ï¼šä»ç¯å¢ƒé…ç½®åˆ°APIè°ƒç”¨</h2>
<p>é›†æˆDifyä¸LangChainéœ€è¦å®Œæˆä¸‰ä¸ªå…³é”®æ­¥éª¤ï¼Œæˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»æ¯ä¸€æ­¥çš„æ“ä½œè¦ç‚¹å’Œä»£ç å®ç°ï¼š</p>
<p><strong>ç¯å¢ƒé…ç½®</strong>éœ€è¦å‡†å¤‡ä¸¤ä¸ªæ ¸å¿ƒä¾èµ–åº“ã€‚å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»é¡¹ç›®ä¾èµ–ï¼Œç¡®ä¿ç‰ˆæœ¬å…¼å®¹æ€§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ  </span>
python -m venv dify-env  
<span class="hljs-built_in">source</span>Â dify-env/bin/activateÂ  <span class="hljs-comment"># Linux/Mac  </span>
<span class="hljs-comment"># dify-env\Scripts\activate Â # Windows  </span>
  
<span class="hljs-comment"># å®‰è£…ä¾èµ–ï¼ˆæŒ‡å®šæœ€æ–°ç‰ˆæœ¬ï¼‰  </span>
pip install dify-client==1.9.1 langchain==1.0.0 python-dotenv
</code></pre>
<p>åœ¨Difyå¹³å°ç«¯ï¼Œéœ€è¦åˆ›å»ºåº”ç”¨å¹¶è·å–APIå¯†é’¥ã€‚ç™»å½•Difyæ§åˆ¶å°åï¼Œé€šè¿‡"è®¾ç½®â†’APIè®¿é—®"åˆ›å»ºæ–°çš„è®¿é—®å‡­è¯ï¼ŒåŒæ—¶ç¡®ä¿å·²å¯ç”¨"å¤–éƒ¨å·¥å…·è°ƒç”¨"æƒé™ã€‚å°†è·å–çš„APIå¯†é’¥å­˜å‚¨åœ¨Â <code>.env</code>Â æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">DIFY_API_KEY</span>=your_dify_api_key  
<span class="hljs-attr">LANGCHAIN_API_KEY</span>=your_langchain_api_key
</code></pre>
<p><strong>æ ¸å¿ƒAPIè°ƒç”¨</strong>åˆ†ä¸ºä¸¤ç§æ¨¡å¼ã€‚å½“Difyä½œä¸ºå‰ç«¯ç•Œé¢ï¼ŒLangChainå¤„ç†åç«¯é€»è¾‘æ—¶ï¼Œå¯é€šè¿‡Difyçš„è‡ªå®šä¹‰å·¥å…·è°ƒç”¨LangChainæœåŠ¡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Difyè‡ªå®šä¹‰å·¥å…·é…ç½®ç¤ºä¾‹ï¼ˆDify 1.9.1+ï¼‰  </span>
<span class="hljs-keyword">import</span>Â requests  
<span class="hljs-keyword">from</span>Â dify_clientÂ <span class="hljs-keyword">import</span>Â DifyClient  
<span class="hljs-keyword">import</span>Â os  
<span class="hljs-keyword">from</span>Â dotenvÂ <span class="hljs-keyword">import</span>Â load_dotenv  
  
load_dotenv()  
client = DifyClient(api_key=os.getenv(<span class="hljs-string">"DIFY_API_KEY"</span>))  
  
<span class="hljs-comment"># åˆ›å»ºè°ƒç”¨LangChainçš„è‡ªå®šä¹‰å·¥å…·  </span>
tool_config = {  
Â  Â  <span class="hljs-string">"name"</span>:Â <span class="hljs-string">"langchain_agent"</span>,  
Â  Â  <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"è°ƒç”¨LangChainå¤„ç†å¤æ‚é€»è¾‘"</span>,  
Â  Â  <span class="hljs-string">"parameters"</span>: {  
Â  Â  Â  Â  <span class="hljs-string">"query"</span>: {<span class="hljs-string">"type"</span>:Â <span class="hljs-string">"string"</span>,Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"ç”¨æˆ·æŸ¥è¯¢å†…å®¹"</span>}  
Â  Â  },  
Â  Â  <span class="hljs-string">"request_config"</span>: {  
Â  Â  Â  Â  <span class="hljs-string">"url"</span>:Â <span class="hljs-string">"https://your-langchain-server/api/process"</span>,  
Â  Â  Â  Â  <span class="hljs-string">"method"</span>:Â <span class="hljs-string">"POST"</span>,  
Â  Â  Â  Â  <span class="hljs-string">"headers"</span>: {  
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"Content-Type"</span>:Â <span class="hljs-string">"application/json"</span>,  
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"Authorization"</span>:Â <span class="hljs-string">f"BearerÂ <span class="hljs-subst">{os.getenv(<span class="hljs-string">'LANGCHAIN_API_KEY'</span>)}</span>"</span>  
Â  Â  Â  Â  },  
Â  Â  Â  Â  <span class="hljs-string">"body"</span>: {<span class="hljs-string">"query"</span>:Â <span class="hljs-string">"{{query}}"</span>}  
Â  Â  }  
}  
  
client.tool.create(tool_config)
</code></pre>
<p>åä¹‹ï¼Œå½“LangChainéœ€è¦è®¿é—®Difyçš„çŸ¥è¯†åº“æ—¶ï¼Œå¯ä½¿ç”¨Dify Python SDKï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># LangChainè°ƒç”¨DifyçŸ¥è¯†åº“ç¤ºä¾‹ï¼ˆLangChain v1.0+ï¼‰  </span>
fromÂ langchain.retrieversÂ importÂ DifyRetriever  
importÂ os  
fromÂ dotenvÂ importÂ load_dotenv  
  
load_dotenv()  
<span class="hljs-attr">retriever</span> = DifyRetriever(  
Â  Â  <span class="hljs-attr">api_key</span>=os.getenv(<span class="hljs-string">"DIFY_API_KEY"</span>),  
Â  Â  <span class="hljs-attr">dataset_id</span>=<span class="hljs-string">"your_dataset_id"</span>,  
Â  Â  <span class="hljs-attr">top_k</span>=<span class="hljs-number">5</span>,  
Â  Â  <span class="hljs-attr">score_threshold</span>=<span class="hljs-number">0.7</span>  
)  
  
<span class="hljs-comment"># åœ¨LangChainä¸­ä½¿ç”¨Difyæ£€ç´¢å™¨  </span>
fromÂ langchain.chainsÂ importÂ RetrievalQA  
fromÂ langchain_openaiÂ importÂ ChatOpenAI  
  
<span class="hljs-attr">llm</span> = ChatOpenAI(model=<span class="hljs-string">"gpt-4o"</span>)  
<span class="hljs-attr">qa_chain</span> = RetrievalQA.from_chain_type(  
Â  Â  <span class="hljs-attr">llm</span>=llm,  
Â  Â  <span class="hljs-attr">chain_type</span>=<span class="hljs-string">"stuff"</span>,  
Â  Â  <span class="hljs-attr">retriever</span>=retriever  
)  
  
<span class="hljs-attr">result</span> = qa_chain.invoke({<span class="hljs-string">"query"</span>:Â <span class="hljs-string">"ä¼ä¸šäº§å“å®šä»·ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ"</span>})
</code></pre>
<p><strong>æ•°æ®æµè½¬è®¾è®¡</strong>éœ€è¦æ³¨æ„ä¸Šä¸‹æ–‡ä¿æŒã€‚åœ¨å¤šè½®å¯¹è¯åœºæ™¯ä¸­ï¼Œéœ€å°†Difyçš„ä¼šè¯IDä¼ é€’ç»™LangChainï¼Œç¡®ä¿å¯¹è¯å†å²çš„è¿ç»­æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¸¦ä¼šè¯ä¸Šä¸‹æ–‡çš„è°ƒç”¨ç¤ºä¾‹ï¼ˆDify 1.9.1+ï¼‰  </span>
defÂ process_query(query:Â str, conversation_id:Â <span class="hljs-attr">str</span>Â =Â None):  
Â  Â  <span class="hljs-comment"># 1. ä»Difyè·å–çŸ¥è¯†åº“æ£€ç´¢ç»“æœ  </span>
Â  Â  <span class="hljs-attr">retrieval_result</span> = client.knowledge.retrieve(  
Â  Â  Â  Â  <span class="hljs-attr">dataset_id</span>=<span class="hljs-string">"your_dataset_id"</span>,  
Â  Â  Â  Â  <span class="hljs-attr">query</span>=query,  
Â  Â  Â  Â  <span class="hljs-attr">conversation_id</span>=conversation_id  
Â  Â  )  
  
Â  Â  <span class="hljs-comment"># 2. è°ƒç”¨LangChainå¤„ç†æ£€ç´¢ç»“æœ  </span>
Â  Â  <span class="hljs-attr">langchain_response</span> = requests.post(  
Â  Â  Â  Â  "https://your-langchain-server/api/process",  
Â  Â  Â  Â  <span class="hljs-attr">json</span>={  
Â  Â  Â  Â  Â  Â  "query": query,  
Â  Â  Â  Â  Â  Â  "context": retrieval_result<span class="hljs-section">["documents"]</span>,  
Â  Â  Â  Â  Â  Â  "conversation_id": conversation_id  
Â  Â  Â  Â  },  
Â  Â  Â  Â  <span class="hljs-attr">headers</span>={<span class="hljs-string">"Authorization"</span>:Â f<span class="hljs-string">"BearerÂ {os.getenv('LANGCHAIN_API_KEY')}"</span>}  
Â  Â  )  
  
Â  Â  <span class="hljs-comment"># 3. å°†ç»“æœè¿”å›ç»™Difyæ›´æ–°ä¼šè¯  </span>
Â  Â  ifÂ conversation_id:  
Â  Â  Â  Â  client.conversation.update(  
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">conversation_id</span>=conversation_id,  
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">messages</span>=[{<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"assistant"</span>,Â <span class="hljs-string">"content"</span>: langchain_response.json()[<span class="hljs-string">"result"</span>]}]  
Â  Â  Â  Â  )  
  
Â  Â  returnÂ langchain_response.json()
</code></pre>
<h2 data-id="heading-3">å®æˆ˜æ¡ˆä¾‹æ¼”ç¤ºï¼šä¼ä¸šçŸ¥è¯†åº“æ™ºèƒ½é—®ç­”ç³»ç»Ÿ</h2>
<p>æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿç»“åˆDifyçš„å¯è§†åŒ–ç•Œé¢å’ŒLangChainçš„é«˜çº§æ£€ç´¢èƒ½åŠ›ï¼Œæ”¯æŒPDFæ–‡æ¡£è§£æã€è¯­ä¹‰æ£€ç´¢å’Œå¤šè½®å¯¹è¯ã€‚</p>
<p><strong>ç³»ç»Ÿæ¶æ„</strong>åˆ†ä¸ºå››ä¸ªå±‚æ¬¡ã€‚ç”¨æˆ·é€šè¿‡Difyçš„Webç•Œé¢æé—®ï¼Œè¯·æ±‚é¦–å…ˆç»è¿‡Difyçš„æ„å›¾è¯†åˆ«æ¨¡å—ï¼Œç„¶åè°ƒç”¨LangChainçš„RAGé“¾å¤„ç†ï¼Œæ£€ç´¢ç»“æœæ¥è‡ªDifyç®¡ç†çš„çŸ¥è¯†åº“ï¼Œæœ€ç»ˆç”±LLMç”Ÿæˆå›ç­”å¹¶è¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dd17f0bf63f415cb6264d7effbee59e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143102&amp;x-signature=%2F6WIES2BOUCbNGdhU5bQVuvGMjE%3D" alt="" loading="lazy"/></p>
<p>RAGç³»ç»Ÿæ¶æ„å›¾</p>
<p><strong>æ•°æ®å‡†å¤‡</strong>é˜¶æ®µéœ€è¦ä¸Šä¼ æ–‡æ¡£å¹¶æ„å»ºçŸ¥è¯†åº“ã€‚é€šè¿‡Difyçš„"çŸ¥è¯†åº“"åŠŸèƒ½ä¸Šä¼ ä¼ä¸šæ–‡æ¡£ï¼ˆæ”¯æŒPDFã€DOCXç­‰20+æ ¼å¼ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œæ–‡æœ¬æå–å’Œåˆ†å—å¤„ç†ã€‚æ¨èä½¿ç”¨ä»¥ä¸‹åˆ†å—ç­–ç•¥ï¼š</p>
<ul>
<li>â€¢ çˆ¶å—å¤§å°ï¼š400-600å­—ç¬¦ï¼ˆä¿ç•™ä¸Šä¸‹æ–‡è¯­ä¹‰ï¼‰</li>
<li>â€¢ å­å—å¤§å°ï¼š100-200å­—ç¬¦ï¼ˆå®ç°ç²¾ç¡®åŒ¹é…ï¼‰</li>
<li>â€¢ é‡å ç‡ï¼š10-15%ï¼ˆé¿å…å…³é”®ä¿¡æ¯æˆªæ–­ï¼‰</li>
</ul>
<p>åœ¨LangChainç«¯ï¼Œéœ€è¦é…ç½®å‘é‡å­˜å‚¨å’ŒåµŒå…¥æ¨¡å‹ã€‚è¿™é‡Œä½¿ç”¨FAISSä½œä¸ºå‘é‡æ•°æ®åº“ï¼Œé…åˆBGEåµŒå…¥æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># LangChainæ£€ç´¢é“¾é…ç½®ï¼ˆv1.0+ï¼‰  </span>
fromÂ langchain.vectorstoresÂ importÂ FAISS  
fromÂ langchain.embeddingsÂ importÂ HuggingFaceEmbeddings  
fromÂ langchain.text_splitterÂ importÂ RecursiveCharacterTextSplitter  
fromÂ langchain.document_loadersÂ importÂ PyPDFLoader  
  
<span class="hljs-comment"># åŠ è½½Difyå¯¼å‡ºçš„çŸ¥è¯†åº“æ–‡æ¡£  </span>
<span class="hljs-attr">loader</span> = PyPDFLoader(<span class="hljs-string">"dify_knowledge_export.pdf"</span>)  
<span class="hljs-attr">documents</span> = loader.load()  
  
<span class="hljs-comment"># æ–‡æœ¬åˆ†å—  </span>
<span class="hljs-attr">text_splitter</span> = RecursiveCharacterTextSplitter(  
Â  Â  <span class="hljs-attr">chunk_size</span>=<span class="hljs-number">500</span>,  
Â  Â  <span class="hljs-attr">chunk_overlap</span>=<span class="hljs-number">50</span>,  
Â  Â  <span class="hljs-attr">separators</span>=[<span class="hljs-string">"\n\n"</span>,Â <span class="hljs-string">"\n"</span>,Â <span class="hljs-string">". "</span>,Â <span class="hljs-string">" "</span>,Â <span class="hljs-string">""</span>]  
)  
<span class="hljs-attr">splits</span> = text_splitter.split_documents(documents)  
  
<span class="hljs-comment"># åˆ›å»ºå‘é‡å­˜å‚¨  </span>
<span class="hljs-attr">embeddings</span> = HuggingFaceEmbeddings(model_name=<span class="hljs-string">"BAAI/bge-small-en-v1.5"</span>)  
<span class="hljs-attr">vectorstore</span> = FAISS.from_documents(documents=splits, embedding=embeddings)  
vectorstore.save_local("faiss_index")
</code></pre>
<p><strong>æ ¸å¿ƒä»£ç å®ç°</strong>åŒ…å«Difyå·¥ä½œæµè®¾è®¡å’ŒLangChainæ£€ç´¢é“¾ä¸¤éƒ¨åˆ†ã€‚åœ¨Difyä¸­åˆ›å»ºæ–°çš„"å¯¹è¯å‹åº”ç”¨"ï¼Œç„¶åè®¾è®¡å¦‚ä¸‹å·¥ä½œæµï¼š</p>
<ol start="0">
<li>
<ol start="0">
<li>æ·»åŠ "ç”¨æˆ·è¾“å…¥"èŠ‚ç‚¹æ¥æ”¶æé—®</li>
</ol>
</li>
<li>
<ol start="2">
<li>æ·»åŠ "çŸ¥è¯†åº“æ£€ç´¢"èŠ‚ç‚¹è·å–ç›¸å…³æ–‡æ¡£</li>
</ol>
</li>
<li>
<ol start="3">
<li>æ·»åŠ "å·¥å…·è°ƒç”¨"èŠ‚ç‚¹è°ƒç”¨LangChainå¤„ç†é€»è¾‘</li>
</ol>
</li>
<li>
<ol start="4">
<li>æ·»åŠ "LLMç”Ÿæˆ"èŠ‚ç‚¹ç”Ÿæˆæœ€ç»ˆå›ç­”</li>
</ol>
</li>
<li>
<ol start="5">
<li>æ·»åŠ "è¾“å‡º"èŠ‚ç‚¹å±•ç¤ºç»“æœ</li>
</ol>
</li>
</ol>
<p>LangChainç«¯å®ç°é«˜çº§æ£€ç´¢é€»è¾‘ï¼ŒåŒ…æ‹¬æ··åˆæ£€ç´¢å’Œç»“æœé‡æ’ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># LangChainé«˜çº§æ£€ç´¢å®ç°ï¼ˆv1.0+ï¼‰  </span>
fromÂ langchain.retrieversÂ importÂ ContextualCompressionRetriever  
fromÂ langchain.retrievers.document_compressorsÂ importÂ CohereRerank  
fromÂ langchain_community.retrieversÂ importÂ BM25Retriever  
fromÂ langchain.retrieversÂ importÂ EnsembleRetriever  
  
<span class="hljs-comment"># åŠ è½½å‘é‡å­˜å‚¨  </span>
<span class="hljs-attr">vectorstore</span> = FAISS.load_local(<span class="hljs-string">"faiss_index"</span>, embeddings, allow_dangerous_deserialization=<span class="hljs-literal">True</span>)  
<span class="hljs-attr">vector_retriever</span> = vectorstore.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>:Â <span class="hljs-number">10</span>})  
  
<span class="hljs-comment"># åˆå§‹åŒ–BM25æ£€ç´¢å™¨ï¼ˆå…³é”®è¯æ£€ç´¢ï¼‰  </span>
<span class="hljs-attr">bm25_retriever</span> = BM25Retriever.from_documents(documents=splits)  
<span class="hljs-attr">bm25_retriever.k</span> =Â <span class="hljs-number">10</span>  
  
<span class="hljs-comment"># ç»„åˆæ£€ç´¢å™¨  </span>
<span class="hljs-attr">ensemble_retriever</span> = EnsembleRetriever(  
Â  Â  <span class="hljs-attr">retrievers</span>=[vector_retriever, bm25_retriever],  
Â  Â  <span class="hljs-attr">weights</span>=[<span class="hljs-number">0.7</span>,Â <span class="hljs-number">0.3</span>]  
)  
  
<span class="hljs-comment"># æ·»åŠ é‡æ’å™¨  </span>
<span class="hljs-attr">compressor</span> = CohereRerank(model=<span class="hljs-string">"rerank-english-v3.0"</span>)  
<span class="hljs-attr">compression_retriever</span> = ContextualCompressionRetriever(  
Â  Â  <span class="hljs-attr">base_compressor</span>=compressor,  
Â  Â  <span class="hljs-attr">base_retriever</span>=ensemble_retriever  
)  
  
<span class="hljs-comment"># åˆ›å»ºRAGé“¾  </span>
fromÂ langchain.chainsÂ importÂ RetrievalQA  
fromÂ langchain.chat_modelsÂ importÂ ChatOpenAI  
  
<span class="hljs-attr">llm</span> = ChatOpenAI(model_name=<span class="hljs-string">"gpt-4o"</span>, temperature=<span class="hljs-number">0.3</span>)  
<span class="hljs-attr">qa_chain</span> = RetrievalQA.from_chain_type(  
Â  Â  <span class="hljs-attr">llm</span>=llm,  
Â  Â  <span class="hljs-attr">chain_type</span>=<span class="hljs-string">"stuff"</span>,  
Â  Â  <span class="hljs-attr">retriever</span>=compression_retriever,  
Â  Â  <span class="hljs-attr">return_source_documents</span>=<span class="hljs-literal">True</span>  
)  
  
<span class="hljs-comment"># å¯åŠ¨FastAPIæœåŠ¡ä¾›Difyè°ƒç”¨  </span>
fromÂ fastapiÂ importÂ FastAPI  
importÂ uvicorn  
fromÂ pydanticÂ importÂ BaseModel  
  
<span class="hljs-attr">app</span> = FastAPI()  
  
classÂ QueryRequest(BaseModel):  
Â  Â  query:Â str  
  
@app.post("/process")  
asyncÂ defÂ process_query(request: QueryRequest):  
Â  Â  <span class="hljs-attr">result</span> = qa_chain({<span class="hljs-string">"query"</span>: request.query})  
Â  Â  returnÂ {  
Â  Â  Â  Â  "result": result<span class="hljs-section">["result"]</span>,  
Â  Â  Â  Â  "sources": <span class="hljs-section">[doc.metadata.get("source")Â forÂ docÂ inÂ result["source_documents"]]</span>  
Â  Â  }  
  
ifÂ <span class="hljs-attr">__name__</span> ==Â <span class="hljs-string">"__main__"</span>:  
Â  Â  uvicorn.run(app, <span class="hljs-attr">host</span>=<span class="hljs-string">"0.0.0.0"</span>, port=<span class="hljs-number">8000</span>)
</code></pre>
<p><strong>éƒ¨ç½²ä¸æµ‹è¯•</strong>éœ€è¦å¯åŠ¨LangChainæœåŠ¡å¹¶åœ¨Difyä¸­é…ç½®å·¥å…·åœ°å€ã€‚å°†LangChainæœåŠ¡éƒ¨ç½²åˆ°å…¬ç½‘å¯è®¿é—®çš„æœåŠ¡å™¨ï¼Œç„¶ååœ¨Difyçš„è‡ªå®šä¹‰å·¥å…·ä¸­å¡«å†™æœåŠ¡URLã€‚æµ‹è¯•æ—¶ï¼Œå¯ä¸Šä¼ ä¼ä¸šäº§å“æ‰‹å†Œå¹¶æé—®"è¯·ä»‹ç»äº§å“çš„æ ¸å¿ƒåŠŸèƒ½"ï¼Œç³»ç»Ÿåº”èƒ½å‡†ç¡®æ£€ç´¢ç›¸å…³å†…å®¹å¹¶ç”Ÿæˆå›ç­”ã€‚</p>
<h2 data-id="heading-4">æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<p>ä¼ä¸šçº§åº”ç”¨éœ€è¦å…³æ³¨æ€§èƒ½å’Œå¯é æ€§ï¼Œä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥å¯æ˜¾è‘—æå‡ç³»ç»Ÿè¡¨ç°ï¼š</p>
<p><strong>å‘é‡æ£€ç´¢ä¼˜åŒ–</strong>ä»ä¸‰ä¸ªæ–¹é¢ç€æ‰‹ã€‚è°ƒæ•´åˆ†å—å¤§å°å’Œé‡å ç‡ï¼šå®éªŒè¡¨æ˜ï¼ŒæŠ€æœ¯æ–‡æ¡£ä½¿ç”¨300-500å­—ç¬¦çš„åˆ†å—å¤§å°ï¼Œé…åˆ10-15%çš„é‡å ç‡ï¼Œå¯ä½¿å¬å›ç‡æå‡18%ã€‚é€‰æ‹©åˆé€‚çš„åµŒå…¥æ¨¡å‹ï¼šå¯¹äºä¸­æ–‡åœºæ™¯ï¼ŒBGE-M3æ¨¡å‹åœ¨æ£€ç´¢ä»»åŠ¡ä¸Šè¡¨ç°ä¼˜äºä¼ ç»Ÿæ¨¡å‹ã€‚ä¼˜åŒ–å‘é‡æ•°æ®åº“å‚æ•°ï¼šFAISSçš„HNSWç´¢å¼•å¯é€šè¿‡è°ƒæ•´Â <code>nlist</code>Â å’ŒÂ <code>ef_construction</code>Â å‚æ•°å¹³è¡¡é€Ÿåº¦ä¸ç²¾åº¦ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># FAISSç´¢å¼•ä¼˜åŒ–ç¤ºä¾‹  </span>
<span class="hljs-attr">index</span> = faiss.IndexHNSWFlat(dimension, hnsw_params.M)  
<span class="hljs-attr">index.hnsw.efConstruction</span> =Â <span class="hljs-number">200</span>Â  <span class="hljs-comment"># æ„å»ºæ—¶ç²¾åº¦ï¼ˆå€¼è¶Šå¤§è¶Šç²¾ç¡®ï¼Œé€Ÿåº¦è¶Šæ…¢ï¼‰  </span>
<span class="hljs-attr">index.hnsw.efSearch</span> =Â <span class="hljs-number">100</span>Â  <span class="hljs-comment"># æŸ¥è¯¢æ—¶ç²¾åº¦  </span>
faiss.write_index(index,Â "optimized_index.faiss")
</code></pre>
<p><strong>ç¼“å­˜ç­–ç•¥</strong>æœ‰æ•ˆå‡å°‘é‡å¤è®¡ç®—ã€‚å®ç°ä¸‰çº§ç¼“å­˜æœºåˆ¶ï¼šRedisç¼“å­˜é«˜é¢‘æŸ¥è¯¢ç»“æœï¼ˆTTL=1å°æ—¶ï¼‰ï¼ŒDifyå†…ç½®ç¼“å­˜å­˜å‚¨çŸ¥è¯†åº“æ£€ç´¢ç»“æœï¼ˆTTL=12å°æ—¶ï¼‰ï¼Œå®¢æˆ·ç«¯ç¼“å­˜ä¿å­˜ç”¨æˆ·ä¼šè¯ï¼ˆTTL=24å°æ—¶ï¼‰ã€‚ä»¥ä¸‹æ˜¯Redisç¼“å­˜å®ç°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Redisç¼“å­˜å®ç°  </span>
<span class="hljs-keyword">import</span>Â redis  
<span class="hljs-keyword">from</span>Â functoolsÂ <span class="hljs-keyword">import</span>Â lru_cache  
  
r = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)  
  
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">cache_decorator</span>(<span class="hljs-params">ttl=<span class="hljs-number">3600</span></span>):  
Â  Â  <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):  
Â  Â  Â  Â  <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):  
Â  Â  Â  Â  Â  Â  key =Â <span class="hljs-string">f"cache:<span class="hljs-subst">{func.__name__}</span>:<span class="hljs-subst">{<span class="hljs-built_in">str</span>(args)}</span>:<span class="hljs-subst">{<span class="hljs-built_in">str</span>(kwargs)}</span>"</span>  
Â  Â  Â  Â  Â  Â  cached_result = r.get(key)  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span>Â cached_result:  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">eval</span>(cached_result)  
Â  Â  Â  Â  Â  Â  result = func(*args, **kwargs)  
Â  Â  Â  Â  Â  Â  r.setex(key, ttl,Â <span class="hljs-built_in">str</span>(result))  
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â result  
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â wrapper  
Â  Â  <span class="hljs-keyword">return</span>Â decorator  
  
<span class="hljs-meta">@cache_decorator(<span class="hljs-params">ttl=<span class="hljs-number">3600</span></span>)  </span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">rag_query</span>(<span class="hljs-params">query:Â <span class="hljs-built_in">str</span></span>):  
Â  Â  <span class="hljs-keyword">return</span>Â qa_chain({<span class="hljs-string">"query"</span>: query})
</code></pre>
<p><strong>å¹¶å‘æ§åˆ¶</strong>é˜²æ­¢ç³»ç»Ÿè¿‡è½½ã€‚åœ¨Difyä¸­é…ç½®APIè¯·æ±‚é™æµï¼ˆé€šè¿‡"è®¾ç½®â†’å®‰å…¨"ï¼‰ï¼Œæ¨èå€¼ä¸ºæ™®é€šç”¨æˆ·5 QPSï¼Œç®¡ç†å‘˜10 QPSã€‚LangChainæœåŠ¡ç«¯ä½¿ç”¨FastAPIçš„é™æµä¸­é—´ä»¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># FastAPIé™æµé…ç½®  </span>
<span class="hljs-keyword">from</span>Â fastapiÂ <span class="hljs-keyword">import</span>Â FastAPI, Request, HTTPException  
<span class="hljs-keyword">from</span>Â fastapi.middleware.corsÂ <span class="hljs-keyword">import</span>Â CORSMiddleware  
<span class="hljs-keyword">from</span>Â slowapiÂ <span class="hljs-keyword">import</span>Â Limiter, _rate_limit_exceeded_handler  
<span class="hljs-keyword">from</span>Â slowapi.utilÂ <span class="hljs-keyword">import</span>Â get_remote_address  
<span class="hljs-keyword">from</span>Â slowapi.errorsÂ <span class="hljs-keyword">import</span>Â RateLimitExceeded  
  
limiter = Limiter(key_func=get_remote_address)  
app = FastAPI()  
app.state.limiter = limiter  
app.add_exception_handler(RateLimitExceeded, _rate_limit_exceeded_handler)  
  
<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/process"</span></span>)  </span>
<span class="hljs-meta">@limiter.limit(<span class="hljs-params"><span class="hljs-string">"10/minute"</span></span>)  </span>
<span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">process_query</span>(<span class="hljs-params">request: Request, query: QueryRequest</span>):  
Â  Â  <span class="hljs-comment"># å¤„ç†è¯·æ±‚é€»è¾‘</span>
</code></pre>
<p><strong>ç›‘æ§ä¸è°ƒä¼˜</strong>æ˜¯æŒç»­ä¼˜åŒ–çš„åŸºç¡€ã€‚é›†æˆPrometheuså’ŒGrafanaç›‘æ§å…³é”®æŒ‡æ ‡ï¼šAPIå“åº”æ—¶é—´ï¼ˆç›®æ ‡P99&lt;1ç§’ï¼‰ã€æ£€ç´¢å‡†ç¡®ç‡ï¼ˆé€šè¿‡ç”¨æˆ·åé¦ˆæ”¶é›†ï¼‰ã€ç¼“å­˜å‘½ä¸­ç‡ï¼ˆç›®æ ‡&gt;80%ï¼‰ã€‚å®šæœŸåˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œä¼˜åŒ–åˆ†å—ç­–ç•¥å’Œæç¤ºè¯æ¨¡æ¿ã€‚</p>
<h2 data-id="heading-5">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>é›†æˆè¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…å¸¸é‡åˆ°ä»¥ä¸‹æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æä¾›ç»è¿‡éªŒè¯çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<p><strong>ä¾èµ–å†²çª</strong>æ˜¯æœ€å¸¸è§çš„é—®é¢˜ã€‚å½“Difyå’ŒLangChainå¯¹åŒä¸€ä¾èµ–åº“æœ‰ä¸åŒç‰ˆæœ¬è¦æ±‚æ—¶ï¼ˆå¦‚pydanticï¼‰ï¼Œä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»å¹¶åˆ›å»ºÂ <code>requirements.txt</code>Â é”å®šç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># requirements.txtï¼ˆé€‚é…Dify 1.9.1å’ŒLangChain v1.0ï¼‰  </span>
<span class="hljs-attr">dify-client</span>==<span class="hljs-number">1.9</span>.<span class="hljs-number">1</span>  
<span class="hljs-attr">langchain</span>==<span class="hljs-number">1.0</span>.<span class="hljs-number">0</span>  
<span class="hljs-attr">python-dotenv</span>==<span class="hljs-number">1.0</span>.<span class="hljs-number">0</span>  
<span class="hljs-attr">pydantic</span>==<span class="hljs-number">2.5</span>.<span class="hljs-number">2</span>  
<span class="hljs-attr">fastapi</span>==<span class="hljs-number">0.104</span>.<span class="hljs-number">1</span>  
<span class="hljs-attr">uvicorn</span>==<span class="hljs-number">0.24</span>.<span class="hljs-number">0</span>  
<span class="hljs-attr">redis</span>==<span class="hljs-number">4.6</span>.<span class="hljs-number">0</span>  
<span class="hljs-attr">faiss-cpu</span>==<span class="hljs-number">1.7</span>.<span class="hljs-number">4</span>
</code></pre>
<p>å¤„ç†æ–¹æ³•ï¼šåˆ é™¤ç°æœ‰ç¯å¢ƒï¼Œé‡æ–°åˆ›å»ºå¹¶å®‰è£…é”å®šç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">rm</span>Â -rf dify-env  
python -m venv dify-env  
<span class="hljs-built_in">source</span>Â dify-env/bin/activate  
pip install -r requirements.txt
</code></pre>
<p><strong>APIè°ƒç”¨å¤±è´¥</strong>æ’æŸ¥æ­¥éª¤ï¼šé¦–å…ˆæ£€æŸ¥Difyçš„APIå¯†é’¥æ˜¯å¦å…·æœ‰æ­£ç¡®æƒé™ï¼Œå…¶æ¬¡éªŒè¯ç½‘ç»œè¿æ¥ï¼ˆç‰¹åˆ«æ˜¯ç§æœ‰åŒ–éƒ¨ç½²æ—¶çš„é˜²ç«å¢™è®¾ç½®ï¼‰ï¼Œæœ€åæŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—ã€‚Difyçš„"æ—¥å¿—"é¡µé¢æä¾›å·¥å…·è°ƒç”¨çš„å®Œæ•´è®°å½•ï¼ŒåŒ…æ‹¬è¯·æ±‚å‚æ•°å’Œå“åº”å†…å®¹ã€‚</p>
<p><strong>æ€§èƒ½ç“¶é¢ˆ</strong>è¯Šæ–­æµç¨‹ï¼šä½¿ç”¨LangChainçš„ tracing åŠŸèƒ½è¯†åˆ«æ…¢ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¯ç”¨LangChainè¿½è¸ª  </span>
importÂ langchain  
<span class="hljs-attr">langchain.verbose</span> =Â <span class="hljs-literal">True</span>  
<span class="hljs-attr">langchain.debug</span> =Â <span class="hljs-literal">True</span>  
  
<span class="hljs-comment"># æˆ–ä½¿ç”¨LangSmith  </span>
os.environ<span class="hljs-section">["LANGCHAIN_TRACING_V2"]</span> =Â "true"  
os.environ<span class="hljs-section">["LANGCHAIN_API_KEY"]</span> =Â "your_langsmith_key"  
os.environ<span class="hljs-section">["LANGCHAIN_PROJECT"]</span> =Â "dify-integration"
</code></pre>
<p><strong>å®‰å…¨é—®é¢˜</strong>ä¸å¯å¿½è§†ã€‚ç¡®ä¿æ‰€æœ‰APIå¯†é’¥é€šè¿‡ç¯å¢ƒå˜é‡ä¼ é€’ï¼Œä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç ã€‚Difyç§æœ‰åŒ–éƒ¨ç½²æ—¶ï¼Œå¯ç”¨HTTPSå¹¶é…ç½®IPç™½åå•ï¼Œé™åˆ¶ç®¡ç†æ¥å£è®¿é—®ã€‚LangChainå·¥å…·è°ƒç”¨ä½¿ç”¨æ²™ç®±ç¯å¢ƒï¼Œç‰¹åˆ«æ˜¯ä»£ç æ‰§è¡Œç±»å·¥å…·ã€‚</p>
<h2 data-id="heading-6">æœªæ¥å±•æœ›ä¸è¿›é˜¶æ–¹å‘</h2>
<p>Difyä¸LangChainçš„é›†æˆæŠ€æœ¯æ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œä»¥ä¸‹è¶‹åŠ¿å€¼å¾—å…³æ³¨ï¼š</p>
<p><strong>å¤šæ¨¡æ€èƒ½åŠ›</strong>å°†æˆä¸ºä¸‹ä¸€ä»£åº”ç”¨çš„æ ‡é…ã€‚Difyå·²æ”¯æŒå›¾åƒå’Œè¯­éŸ³è¾“å…¥ï¼Œç»“åˆLangChainçš„å¤šæ¨¡æ€æ¨¡å‹è°ƒç”¨ï¼Œå¯æ„å»ºæ›´è‡ªç„¶çš„äº¤äº’ä½“éªŒã€‚ä¾‹å¦‚ï¼Œé›¶å”®åœºæ™¯ä¸­ï¼Œç”¨æˆ·ä¸Šä¼ å•†å“å›¾ç‰‡å³å¯è·å–ä»·æ ¼å¯¹æ¯”å’Œè´­ä¹°å»ºè®®ã€‚</p>
<p><strong>æ™ºèƒ½ä½“åä½œ</strong>ç³»ç»Ÿè§£å†³å¤æ‚ä»»åŠ¡ã€‚é€šè¿‡Difyç¼–æ’å¤šä¸ªLangChainæ™ºèƒ½ä½“ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“ä¸“æ³¨äºç‰¹å®šé¢†åŸŸï¼ˆå¦‚æ³•å¾‹ã€è´¢åŠ¡ã€æŠ€æœ¯æ”¯æŒï¼‰ï¼Œå®ç°é—®é¢˜çš„åˆ†å¸ƒå¼è§£å†³ã€‚æŸå’¨è¯¢å…¬å¸å·²ç”¨æ­¤æ¶æ„å°†é¡¹ç›®ææ¡ˆç”Ÿæˆæ—¶é—´ä»3å¤©ç¼©çŸ­è‡³4å°æ—¶ã€‚</p>
<p><strong>LLMOpså®è·µ</strong>è‡ªåŠ¨åŒ–æ¨¡å‹ä¼˜åŒ–ã€‚Difyçš„æ ‡æ³¨åŠŸèƒ½ç»“åˆLangChainçš„è¯„ä¼°æ¡†æ¶ï¼Œå½¢æˆ"æ•°æ®æ”¶é›†â†’æ¨¡å‹å¾®è°ƒâ†’æ•ˆæœè¯„ä¼°"çš„é—­ç¯ã€‚ä¼ä¸šå¯é€šè¿‡ç”¨æˆ·åé¦ˆæŒç»­ä¼˜åŒ–ç§æœ‰æ¨¡å‹ï¼Œä½¿å›ç­”å‡†ç¡®ç‡æ¯æœˆæå‡5-8%ã€‚</p>
<p><strong>è¾¹ç¼˜è®¡ç®—éƒ¨ç½²</strong>æ‹“å±•åº”ç”¨åœºæ™¯ã€‚éšç€æ¨¡å‹å°å‹åŒ–æŠ€æœ¯çš„å‘å±•ï¼ŒDifyä¸LangChainçš„è½»é‡ç‰ˆæœ¬å¯éƒ¨ç½²åœ¨è¾¹ç¼˜è®¾å¤‡ï¼Œå¦‚å·¥å‚çš„å·¥ä¸šå¹³æ¿æˆ–åŒ»ç–—ç°åœºçš„ç§»åŠ¨ç»ˆç«¯ï¼Œå®ç°ä½å»¶è¿Ÿã€é«˜éšç§çš„AIåº”ç”¨ã€‚</p>
<p>è¿›é˜¶å­¦ä¹ è·¯å¾„å»ºè®®ï¼šæŒæ¡LangGraphæ„å»ºçŠ¶æ€ç®¡ç†çš„å¤æ‚å·¥ä½œæµï¼Œå­¦ä¹ Difyçš„æ’ä»¶å¼€å‘æ‰©å±•ç³»ç»Ÿèƒ½åŠ›ï¼Œç ”ç©¶RAGä¸å¾®è°ƒç»“åˆçš„çŸ¥è¯†æ³¨å…¥æŠ€æœ¯ã€‚é€šè¿‡å‚ä¸å¼€æºç¤¾åŒºï¼ˆDifyåœ¨GitHubå·²æœ‰4.4ä¸‡æ˜Ÿæ ‡ï¼‰ï¼Œè·Ÿè¸ªæœ€æ–°æŠ€æœ¯åŠ¨æ€å’Œæœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-7">ç»“è¯­ï¼šé‡Šæ”¾AIç”Ÿäº§åŠ›çš„æ— é™å¯èƒ½</h2>
<p>Difyä¸LangChain v1.0çš„é›†æˆï¼Œä»£è¡¨äº†AIåº”ç”¨å¼€å‘çš„æ–°èŒƒå¼â€”â€”æ— éœ€åœ¨æ˜“ç”¨æ€§å’Œçµæ´»æ€§ä¹‹é—´å¦¥åã€‚é€šè¿‡æœ¬æ–‡ä»‹ç»çš„äº”ä¸ªæ­¥éª¤ï¼Œæ‚¨å·²ç»æŒæ¡äº†æ„å»ºä¼ä¸šçº§RAGåº”ç”¨çš„æ ¸å¿ƒæŠ€æœ¯ï¼šä»Difyçš„å¯è§†åŒ–å·¥ä½œæµè®¾è®¡ï¼Œåˆ°LangChainçš„é«˜çº§æ£€ç´¢å®ç°ï¼›ä»æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ç­–ç•¥ï¼Œåˆ°å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™å°†è¿™äº›çŸ¥è¯†åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­äº†ã€‚æ— è®ºæ‚¨æ˜¯å¸Œæœ›æå‡å®¢æœæ•ˆç‡ã€ä¼˜åŒ–å†…éƒ¨çŸ¥è¯†åº“ï¼Œè¿˜æ˜¯æ„å»ºå…¨æ–°çš„AIäº§å“ï¼ŒDifyä¸LangChainçš„ç»„åˆéƒ½èƒ½ä¸ºæ‚¨æä¾›å¼ºå¤§çš„æŠ€æœ¯æ”¯æ’‘ã€‚è®°ä½ï¼Œæœ€å¥½çš„å­¦ä¹ æ–¹å¼æ˜¯åŠ¨æ‰‹å®è·µâ€”â€”å¼€å§‹æ„å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªé›†æˆåº”ç”¨ï¼Œä½“éªŒAIç”Ÿäº§åŠ›çš„é©å‘½æ€§æå‡ï¼</p>
<h2 data-id="heading-8">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ç”¨Traeç”Ÿæˆäº†ä¸€ä¸ªEcharts 3DæŸ±çŠ¶å›¾çš„Demo]]></title>    <link>https://juejin.cn/post/7574045294611529763</link>    <guid>https://juejin.cn/post/7574045294611529763</guid>    <pubDate>2025-11-19T07:48:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574045294611529763" data-draft-id="7573995798603759631" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ç”¨Traeç”Ÿæˆäº†ä¸€ä¸ªEcharts 3DæŸ±çŠ¶å›¾çš„Demo"/> <meta itemprop="keywords" content="Trae,å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-19T07:48:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æå‰‘ä¸€"/> <meta itemprop="url" content="https://juejin.cn/user/4147782344247918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ç”¨Traeç”Ÿæˆäº†ä¸€ä¸ªEcharts 3DæŸ±çŠ¶å›¾çš„Demo
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4147782344247918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æå‰‘ä¸€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:48:33.000Z" title="Wed Nov 19 2025 07:48:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨å¼€å‘ä¸ªäººçš„å¤§å±é¡¹ç›®ï¼Œä½œä¸ºç®€å†çš„ä¸€éƒ¨åˆ†æ‰¾å·¥ä½œçš„æ—¶å€™æ‹¿å‡ºæ¥æ’‘æ’‘é—¨é¢ã€‚</p>
<p>å¯¹äºå‰ç«¯è€Œè¨€ï¼Œæœ€éš¾çš„å¹¶ä¸æ˜¯æŠ€æœ¯éƒ¨åˆ†ï¼Œè€Œæ˜¯ UI éƒ¨åˆ†ï¼Œæ¯•ç«Ÿå‰ç«¯å¤§éƒ¨åˆ†æ—¶å€™åªæ˜¯<strong>åˆ‡å›¾ä»”</strong>ï¼Œè€Œä¸æ˜¯<strong>è®¾è®¡å¸ˆ</strong>ã€‚</p>
<p>ä½†æ˜¯æˆ‘ç°åœ¨æ‰¾åˆ°äº†ä¸€ä¸ªæ–°çš„æ–¹æ¡ˆï¼Œç”¨ AI å·¥å…·ã€‚æ¯”å¦‚æˆ‘ç°åœ¨ç”¨çš„ Traeï¼Œå¤§é¢ä¸Šçš„æ¡†æ¶è¿˜æ˜¯å»ºè®®ä¸ªäººå†™ï¼Œæ¯•ç«ŸAIè™½ç„¶æ™ºèƒ½ï¼Œä½†ä¸ªäººæ‰æ˜¯ä»£ç çš„æœ€ç»ˆæŠŠæ§è€…ã€‚</p>
<p>Echartså®˜ç½‘ä¸Šæ‰¾äº†æ‰¾å…³äºæŸ±çŠ¶å›¾çš„å†…å®¹ï¼Œæ— æ³•è¾¾åˆ°ä»¥ä¸‹çš„æ•ˆæœï¼Œåœ¨ç½‘ä¸Šæœäº†æœï¼Œå‘ç°ä¹Ÿæ²¡æœ‰ç±»ä¼¼çš„æ•ˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bde63c4c5834c99a0d2360c6fddd150~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5YmR5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143313&amp;x-signature=LuG6e9hkMpMdrVcjmy2wiebQ4DI%3D" alt="image.png" loading="lazy"/></p>
<p>äºæ˜¯ç”¨ Trae ç®€å•å†™äº†ä¸€ä¸ªæŒ‡ä»¤ï¼š</p>
<p><strong>è¯·å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªEchartsæŸ±çŠ¶å›¾ç»„ä»¶ï¼Œå†…å®¹æ˜¯ä¸€ä¸ªæŸ±çŠ¶å›¾ï¼Œä½†æ˜¯æŸ±å­æ˜¾ç°å‡ºä¸€ç§3Dæ•ˆæœã€‚åˆ†åˆ«ç”±ä¸‰éƒ¨åˆ†æ„æˆï¼ŒæŸ±å­çš„é¡¶ç«¯æ˜¯ä¸€ä¸ªå››è¾¹å½¢ï¼Œå·¦å³ä¸¤ä¾§å„æ˜¯ä¸€ä¸ªæ¸å˜çš„å››è¾¹å½¢ï¼Œä¸‰ä¸ªå›¾å½¢ç»„æˆä¸€ä¸ªä¾§è§†å›¾çš„3DæŸ±å­æ•ˆæœã€‚</strong></p>
<p>Traeè¡¨ç¤ºè¿™ç§æ•ˆæœåœ¨æŸ±çŠ¶å›¾ä¸­ä¸å­˜åœ¨ï¼Œæ¨èä½¿ç”¨Echartsçš„<code>custom</code>è‡ªè¡Œå¼€å‘ï¼Œå¹¶ç»™å‡ºäº†ç›¸åº”çš„å¼€å‘é€»è¾‘ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å…ˆç”ŸæˆæŸ±å­æ•ˆæœ</span>
<span class="hljs-comment">// ç»˜åˆ¶å·¦ä¾§é¢</span>
<span class="hljs-keyword">const</span> barLeft = echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">extendShape</span>({
    <span class="hljs-attr">shape</span>: {
        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,
    },
    <span class="hljs-attr">buildPath</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">ctx, shape</span>) {
        <span class="hljs-keyword">const</span> xAxisPoint = shape.<span class="hljs-property">xAxisPoint</span>;
        <span class="hljs-keyword">const</span> c0 = [shape.<span class="hljs-property">x</span> + <span class="hljs-number">2</span>, shape.<span class="hljs-property">y</span>];
        <span class="hljs-keyword">const</span> c1 = [shape.<span class="hljs-property">x</span> - <span class="hljs-number">7</span>, shape.<span class="hljs-property">y</span> - <span class="hljs-number">1</span>];
        <span class="hljs-keyword">const</span> c2 = [xAxisPoint[<span class="hljs-number">0</span>] - <span class="hljs-number">7</span>, xAxisPoint[<span class="hljs-number">1</span>] - <span class="hljs-number">3</span>];
        <span class="hljs-keyword">const</span> c3 = [xAxisPoint[<span class="hljs-number">0</span>] + <span class="hljs-number">2</span>, xAxisPoint[<span class="hljs-number">1</span>]];
        ctx
            .<span class="hljs-title function_">moveTo</span>(c0[<span class="hljs-number">0</span>], c0[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">lineTo</span>(c1[<span class="hljs-number">0</span>], c1[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">lineTo</span>(c2[<span class="hljs-number">0</span>], c2[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">lineTo</span>(c3[<span class="hljs-number">0</span>], c3[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">closePath</span>();
    },
});
<span class="hljs-comment">// ç»˜åˆ¶å³ä¾§é¢</span>
<span class="hljs-keyword">const</span> barRight = echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">extendShape</span>({
    <span class="hljs-attr">shape</span>: {
        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,
    },
    <span class="hljs-attr">buildPath</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">ctx, shape</span>) {
        <span class="hljs-keyword">const</span> xAxisPoint = shape.<span class="hljs-property">xAxisPoint</span>;
        <span class="hljs-keyword">const</span> c1 = [shape.<span class="hljs-property">x</span> + <span class="hljs-number">2</span>, shape.<span class="hljs-property">y</span>];
        <span class="hljs-keyword">const</span> c2 = [xAxisPoint[<span class="hljs-number">0</span>] + <span class="hljs-number">2</span>, xAxisPoint[<span class="hljs-number">1</span>]];
        <span class="hljs-keyword">const</span> c3 = [xAxisPoint[<span class="hljs-number">0</span>] + <span class="hljs-number">10</span>, xAxisPoint[<span class="hljs-number">1</span>] - <span class="hljs-number">5</span>];
        <span class="hljs-keyword">const</span> c4 = [shape.<span class="hljs-property">x</span> + <span class="hljs-number">10</span>, shape.<span class="hljs-property">y</span> - <span class="hljs-number">5</span>];
        ctx
            .<span class="hljs-title function_">moveTo</span>(c1[<span class="hljs-number">0</span>], c1[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">lineTo</span>(c2[<span class="hljs-number">0</span>], c2[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">lineTo</span>(c3[<span class="hljs-number">0</span>], c3[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">lineTo</span>(c4[<span class="hljs-number">0</span>], c4[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">closePath</span>();
    },
});
<span class="hljs-comment">// ç»˜åˆ¶é¡¶é¢</span>
<span class="hljs-keyword">const</span> barTop = echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">extendShape</span>({
    <span class="hljs-attr">shape</span>: {
        <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,
    },
    <span class="hljs-attr">buildPath</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">ctx, shape</span>) {
        <span class="hljs-keyword">const</span> c1 = [shape.<span class="hljs-property">x</span> + <span class="hljs-number">2</span>, shape.<span class="hljs-property">y</span> + <span class="hljs-number">3</span>];
        <span class="hljs-keyword">const</span> c2 = [shape.<span class="hljs-property">x</span> + <span class="hljs-number">10</span>, shape.<span class="hljs-property">y</span> - <span class="hljs-number">5</span>]; <span class="hljs-comment">//å³ç‚¹</span>
        <span class="hljs-keyword">const</span> c3 = [shape.<span class="hljs-property">x</span> - <span class="hljs-number">0</span>, shape.<span class="hljs-property">y</span> - <span class="hljs-number">7</span>];
        <span class="hljs-keyword">const</span> c4 = [shape.<span class="hljs-property">x</span> - <span class="hljs-number">7</span>, shape.<span class="hljs-property">y</span> - <span class="hljs-number">1</span>];
        ctx
            .<span class="hljs-title function_">moveTo</span>(c1[<span class="hljs-number">0</span>], c1[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">lineTo</span>(c2[<span class="hljs-number">0</span>], c2[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">lineTo</span>(c3[<span class="hljs-number">0</span>], c3[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">lineTo</span>(c4[<span class="hljs-number">0</span>], c4[<span class="hljs-number">1</span>])
            .<span class="hljs-title function_">closePath</span>();
    },
});
</code></pre>
<p>å°†æ¸²æŸ“å®Œæˆçš„é¢æ³¨å†Œåˆ°Echartsä¸­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ³¨å†Œä¸‰ä¸ªé¢å›¾å½¢</span>
echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">registerShape</span>(<span class="hljs-string">"barLeft"</span>, barLeft);
echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">registerShape</span>(<span class="hljs-string">"barRight"</span>, barRight);
echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">registerShape</span>(<span class="hljs-string">"barTop"</span>, barTop);
</code></pre>
<p>åº”ç”¨å·²ç»æ³¨å†Œå¥½çš„é¢ï¼Œç”ŸæˆEchartsæŸ±çŠ¶å›¾ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">series</span>: [
    {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"custom"</span>,
        <span class="hljs-attr">renderItem</span>: <span class="hljs-function">(<span class="hljs-params">params, api</span>) =&gt;</span> {
            <span class="hljs-keyword">let</span> barLeftStyle = <span class="hljs-keyword">new</span> echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title class_">LinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, [
                {<span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(27, 126, 242, 0.8)"</span>},
                {<span class="hljs-attr">offset</span>: <span class="hljs-number">0.5</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(27, 126, 242, 0.6)"</span>},
                {<span class="hljs-attr">offset</span>: <span class="hljs-number">0.8</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(27, 126, 242, 0.3)"</span>},
                {<span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(0,0,0,0.2)"</span>},
            ]);
            <span class="hljs-keyword">let</span> barRightStyle = <span class="hljs-keyword">new</span> echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title class_">LinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, [
                {<span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(23,176,255,1)"</span>},
                {<span class="hljs-attr">offset</span>: <span class="hljs-number">0.5</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(23,176,255, 0.6)"</span>},
                {<span class="hljs-attr">offset</span>: <span class="hljs-number">0.8</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(23,176,255, 0.3)"</span>},
                {<span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(0,0,0,0.2)"</span>},
            ]);
            <span class="hljs-keyword">let</span> barTopStyle = <span class="hljs-keyword">new</span> echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title class_">LinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, [
                {<span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(27, 126, 242, 1)"</span>},
                {<span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(27, 126, 242, 1)"</span>},
            ]);
    },
],
</code></pre>
<h4 data-id="heading-0">å®Œæ•´ä»£ç </h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createCharts</span> = (<span class="hljs-params">data</span>) =&gt; {
    <span class="hljs-keyword">const</span> myChart = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'firstCharts'</span>));
    <span class="hljs-comment">// ç»˜åˆ¶å·¦ä¾§é¢</span>
    <span class="hljs-keyword">const</span> barLeft = echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">extendShape</span>({
        <span class="hljs-attr">shape</span>: {
            <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,
        },
        <span class="hljs-attr">buildPath</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">ctx, shape</span>) {
            <span class="hljs-keyword">const</span> xAxisPoint = shape.<span class="hljs-property">xAxisPoint</span>;
            <span class="hljs-keyword">const</span> c0 = [shape.<span class="hljs-property">x</span> + <span class="hljs-number">2</span>, shape.<span class="hljs-property">y</span>];
            <span class="hljs-keyword">const</span> c1 = [shape.<span class="hljs-property">x</span> - <span class="hljs-number">7</span>, shape.<span class="hljs-property">y</span> - <span class="hljs-number">1</span>];
            <span class="hljs-keyword">const</span> c2 = [xAxisPoint[<span class="hljs-number">0</span>] - <span class="hljs-number">7</span>, xAxisPoint[<span class="hljs-number">1</span>] - <span class="hljs-number">3</span>];
            <span class="hljs-keyword">const</span> c3 = [xAxisPoint[<span class="hljs-number">0</span>] + <span class="hljs-number">2</span>, xAxisPoint[<span class="hljs-number">1</span>]];
            ctx
                .<span class="hljs-title function_">moveTo</span>(c0[<span class="hljs-number">0</span>], c0[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">lineTo</span>(c1[<span class="hljs-number">0</span>], c1[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">lineTo</span>(c2[<span class="hljs-number">0</span>], c2[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">lineTo</span>(c3[<span class="hljs-number">0</span>], c3[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">closePath</span>();
        },
    });
    <span class="hljs-comment">// ç»˜åˆ¶å³ä¾§é¢</span>
    <span class="hljs-keyword">const</span> barRight = echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">extendShape</span>({
        <span class="hljs-attr">shape</span>: {
            <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,
        },
        <span class="hljs-attr">buildPath</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">ctx, shape</span>) {
            <span class="hljs-keyword">const</span> xAxisPoint = shape.<span class="hljs-property">xAxisPoint</span>;
            <span class="hljs-keyword">const</span> c1 = [shape.<span class="hljs-property">x</span> + <span class="hljs-number">2</span>, shape.<span class="hljs-property">y</span>];
            <span class="hljs-keyword">const</span> c2 = [xAxisPoint[<span class="hljs-number">0</span>] + <span class="hljs-number">2</span>, xAxisPoint[<span class="hljs-number">1</span>]];
            <span class="hljs-keyword">const</span> c3 = [xAxisPoint[<span class="hljs-number">0</span>] + <span class="hljs-number">10</span>, xAxisPoint[<span class="hljs-number">1</span>] - <span class="hljs-number">5</span>];
            <span class="hljs-keyword">const</span> c4 = [shape.<span class="hljs-property">x</span> + <span class="hljs-number">10</span>, shape.<span class="hljs-property">y</span> - <span class="hljs-number">5</span>];
            ctx
                .<span class="hljs-title function_">moveTo</span>(c1[<span class="hljs-number">0</span>], c1[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">lineTo</span>(c2[<span class="hljs-number">0</span>], c2[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">lineTo</span>(c3[<span class="hljs-number">0</span>], c3[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">lineTo</span>(c4[<span class="hljs-number">0</span>], c4[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">closePath</span>();
        },
    });
    <span class="hljs-comment">// ç»˜åˆ¶é¡¶é¢</span>
    <span class="hljs-keyword">const</span> barTop = echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">extendShape</span>({
        <span class="hljs-attr">shape</span>: {
            <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,
        },
        <span class="hljs-attr">buildPath</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">ctx, shape</span>) {
            <span class="hljs-keyword">const</span> c1 = [shape.<span class="hljs-property">x</span> + <span class="hljs-number">2</span>, shape.<span class="hljs-property">y</span> + <span class="hljs-number">3</span>];
            <span class="hljs-keyword">const</span> c2 = [shape.<span class="hljs-property">x</span> + <span class="hljs-number">10</span>, shape.<span class="hljs-property">y</span> - <span class="hljs-number">5</span>]; <span class="hljs-comment">//å³ç‚¹</span>
            <span class="hljs-keyword">const</span> c3 = [shape.<span class="hljs-property">x</span> - <span class="hljs-number">0</span>, shape.<span class="hljs-property">y</span> - <span class="hljs-number">7</span>];
            <span class="hljs-keyword">const</span> c4 = [shape.<span class="hljs-property">x</span> - <span class="hljs-number">7</span>, shape.<span class="hljs-property">y</span> - <span class="hljs-number">1</span>];
            ctx
                .<span class="hljs-title function_">moveTo</span>(c1[<span class="hljs-number">0</span>], c1[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">lineTo</span>(c2[<span class="hljs-number">0</span>], c2[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">lineTo</span>(c3[<span class="hljs-number">0</span>], c3[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">lineTo</span>(c4[<span class="hljs-number">0</span>], c4[<span class="hljs-number">1</span>])
                .<span class="hljs-title function_">closePath</span>();
        },
    });
    <span class="hljs-comment">// æ³¨å†Œä¸‰ä¸ªé¢å›¾å½¢</span>
    echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">registerShape</span>(<span class="hljs-string">"barLeft"</span>, barLeft);
    echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">registerShape</span>(<span class="hljs-string">"barRight"</span>, barRight);
    echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title function_">registerShape</span>(<span class="hljs-string">"barTop"</span>, barTop);
    <span class="hljs-keyword">let</span> option = {
        <span class="hljs-attr">tooltip</span>: {
            <span class="hljs-attr">trigger</span>: <span class="hljs-string">"axis"</span>,
            <span class="hljs-attr">formatter</span>: <span class="hljs-string">'&lt;b&gt;{b}&lt;/b&gt; &lt;br/&gt; å»ºè®¾å®Œæˆåº¦: &lt;b style="color: #2AB6FF"&gt;{c}%&lt;/b&gt;'</span>
        },
        <span class="hljs-attr">grid</span>: {
            <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>,
            <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>,
            <span class="hljs-attr">bottom</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">right</span>: <span class="hljs-number">20</span>,
            <span class="hljs-attr">containLabel</span>: <span class="hljs-literal">true</span>,
        },
        <span class="hljs-attr">xAxis</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">"category"</span>,
            <span class="hljs-attr">data</span>: data.<span class="hljs-property">name</span>,
            <span class="hljs-attr">axisLine</span>: {
                <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">lineStyle</span>: {
                    <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(255,255,255,0.5)"</span>,
                },
            },
            <span class="hljs-attr">axisLabel</span>: {
                <span class="hljs-attr">interval</span>: <span class="hljs-number">0</span>,
                <span class="hljs-attr">textStyle</span>: {
                    <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(255,255,255,0.5)"</span>,
                },
            },
            <span class="hljs-attr">axisTick</span>: {
                <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,
            }
        },
        <span class="hljs-attr">yAxis</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">"value"</span>,
            <span class="hljs-attr">axisLine</span>: {
                <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">lineStyle</span>: {
                    <span class="hljs-attr">color</span>: <span class="hljs-string">"#7ebaf2"</span>,
                },
            },
            <span class="hljs-attr">splitLine</span>: {
                <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,
            },
            <span class="hljs-attr">axisTick</span>: {
                <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,
            },
            <span class="hljs-attr">splitNumber</span>: <span class="hljs-number">4</span>,
            <span class="hljs-attr">axisLabel</span>: {
                <span class="hljs-attr">fontSize</span>: <span class="hljs-number">12</span>,
                <span class="hljs-attr">textStyle</span>: {
                    <span class="hljs-attr">color</span>: <span class="hljs-string">"#FFF"</span>,
                },
            },
        },
        <span class="hljs-attr">series</span>: [
            {
                <span class="hljs-attr">type</span>: <span class="hljs-string">"custom"</span>,
                <span class="hljs-attr">renderItem</span>: <span class="hljs-function">(<span class="hljs-params">params, api</span>) =&gt;</span> {
                    <span class="hljs-keyword">let</span> barLeftStyle = <span class="hljs-keyword">new</span> echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title class_">LinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, [
                        {<span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(27, 126, 242, 0.8)"</span>},
                        {<span class="hljs-attr">offset</span>: <span class="hljs-number">0.5</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(27, 126, 242, 0.6)"</span>},
                        {<span class="hljs-attr">offset</span>: <span class="hljs-number">0.8</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(27, 126, 242, 0.3)"</span>},
                        {<span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(0,0,0,0.2)"</span>},
                    ]);
                    <span class="hljs-keyword">let</span> barRightStyle = <span class="hljs-keyword">new</span> echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title class_">LinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, [
                        {<span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(23,176,255,1)"</span>},
                        {<span class="hljs-attr">offset</span>: <span class="hljs-number">0.5</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(23,176,255, 0.6)"</span>},
                        {<span class="hljs-attr">offset</span>: <span class="hljs-number">0.8</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(23,176,255, 0.3)"</span>},
                        {<span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(0,0,0,0.2)"</span>},
                    ]);
                    <span class="hljs-keyword">let</span> barTopStyle = <span class="hljs-keyword">new</span> echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title class_">LinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, [
                        {<span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(27, 126, 242, 1)"</span>},
                        {<span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"rgba(27, 126, 242, 1)"</span>},
                    ]);
                    <span class="hljs-keyword">const</span> location = api.<span class="hljs-title function_">coord</span>([api.<span class="hljs-title function_">value</span>(<span class="hljs-number">0</span>), api.<span class="hljs-title function_">value</span>(<span class="hljs-number">1</span>)]);
                    <span class="hljs-keyword">return</span> {
                        <span class="hljs-attr">type</span>: <span class="hljs-string">"group"</span>,
                        <span class="hljs-attr">children</span>: [
                            {
                                <span class="hljs-attr">type</span>: <span class="hljs-string">"barLeft"</span>,
                                <span class="hljs-attr">shape</span>: {
                                    api,
                                    <span class="hljs-attr">xValue</span>: api.<span class="hljs-title function_">value</span>(<span class="hljs-number">0</span>),
                                    <span class="hljs-attr">yValue</span>: api.<span class="hljs-title function_">value</span>(<span class="hljs-number">1</span>),
                                    <span class="hljs-attr">x</span>: location[<span class="hljs-number">0</span>],
                                    <span class="hljs-attr">y</span>: location[<span class="hljs-number">1</span>],
                                    <span class="hljs-attr">xAxisPoint</span>: api.<span class="hljs-title function_">coord</span>([api.<span class="hljs-title function_">value</span>(<span class="hljs-number">0</span>), <span class="hljs-number">0</span>]),
                                },
                                <span class="hljs-attr">style</span>: {
                                    <span class="hljs-attr">fill</span>: barLeftStyle,
                                },
                            },
                            {
                                <span class="hljs-attr">type</span>: <span class="hljs-string">"barRight"</span>,
                                <span class="hljs-attr">shape</span>: {
                                    api,
                                    <span class="hljs-attr">xValue</span>: api.<span class="hljs-title function_">value</span>(<span class="hljs-number">0</span>),
                                    <span class="hljs-attr">yValue</span>: api.<span class="hljs-title function_">value</span>(<span class="hljs-number">1</span>),
                                    <span class="hljs-attr">x</span>: location[<span class="hljs-number">0</span>],
                                    <span class="hljs-attr">y</span>: location[<span class="hljs-number">1</span>],
                                    <span class="hljs-attr">xAxisPoint</span>: api.<span class="hljs-title function_">coord</span>([api.<span class="hljs-title function_">value</span>(<span class="hljs-number">0</span>), <span class="hljs-number">0</span>]),
                                },
                                <span class="hljs-attr">style</span>: {
                                    <span class="hljs-attr">fill</span>: barRightStyle,
                                },
                            },
                            {
                                <span class="hljs-attr">type</span>: <span class="hljs-string">"barTop"</span>,
                                <span class="hljs-attr">shape</span>: {
                                    api,
                                    <span class="hljs-attr">xValue</span>: api.<span class="hljs-title function_">value</span>(<span class="hljs-number">0</span>),
                                    <span class="hljs-attr">yValue</span>: api.<span class="hljs-title function_">value</span>(<span class="hljs-number">1</span>),
                                    <span class="hljs-attr">x</span>: location[<span class="hljs-number">0</span>],
                                    <span class="hljs-attr">y</span>: location[<span class="hljs-number">1</span>],
                                    <span class="hljs-attr">xAxisPoint</span>: api.<span class="hljs-title function_">coord</span>([api.<span class="hljs-title function_">value</span>(<span class="hljs-number">0</span>), <span class="hljs-number">0</span>]),
                                },
                                <span class="hljs-attr">style</span>: {
                                    <span class="hljs-attr">fill</span>: barTopStyle,
                                },
                            },
                        ],
                    };
                },
                <span class="hljs-attr">data</span>: data.<span class="hljs-property">value</span>,
            },
        ],
        <span class="hljs-attr">animation</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">animationDuration</span>: <span class="hljs-number">1000</span>
    };
    myChart.<span class="hljs-title function_">setOption</span>(option);
};
</code></pre>
<p><strong>Ps:</strong> å…¶ä»–ä¸æ˜ä¹‹å¤„å¯ä»¥å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fecharts.apache.org%2Fzh%2Foption.html%23series-custom.type" target="_blank" title="https://echarts.apache.org/zh/option.html#series-custom.type" ref="nofollow noopener noreferrer">Echartså®˜æ–¹æ–‡æ¡£ custom ç¯‡</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS ç›¸å¯¹é¢œè‰²ï¼šå‘Šåˆ« 180 ä¸ªé¢œè‰²å˜é‡çš„è®¾è®¡ç³»ç»Ÿå™©æ¢¦]]></title>    <link>https://juejin.cn/post/7574045294611546147</link>    <guid>https://juejin.cn/post/7574045294611546147</guid>    <pubDate>2025-11-19T07:51:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574045294611546147" data-draft-id="7574245788948283407" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS ç›¸å¯¹é¢œè‰²ï¼šå‘Šåˆ« 180 ä¸ªé¢œè‰²å˜é‡çš„è®¾è®¡ç³»ç»Ÿå™©æ¢¦"/> <meta itemprop="keywords" content="CSS,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-19T07:51:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS ç›¸å¯¹é¢œè‰²ï¼šå‘Šåˆ« 180 ä¸ªé¢œè‰²å˜é‡çš„è®¾è®¡ç³»ç»Ÿå™©æ¢¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:51:30.000Z" title="Wed Nov 19 2025 07:51:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“ç»„ä»¶åº“ä¸­çš„é¢œè‰²å˜é‡è¾¾åˆ° 180 ä¸ªæ—¶ï¼Œä¸€æ¬¡å“ç‰Œè‰²å˜æ›´å°±æˆäº†å‰ç«¯å¼€å‘çš„å™©æ¢¦ã€‚CSS ç›¸å¯¹é¢œè‰²è¯­æ³•å°†å½»åº•æ”¹å˜è¿™ä¸€ç°çŠ¶ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ä¸ªè®©äººæ²‰é»˜çš„ç°å®</h2>
<p>æœ€è¿‘åœ¨æ’æŸ¥ä¸€ä¸ªç»„ä»¶åº“çš„ä¸»é¢˜ BUG æ—¶ï¼Œæˆ‘ä»¬å‘ç°äº†ä»¤äººéœ‡æƒŠçš„äº‹å®ï¼šè¿™ä¸ªçœ‹ä¼¼æˆç†Ÿçš„è®¾è®¡ç³»ç»Ÿä¸­ï¼Œç«Ÿç„¶å®šä¹‰äº† <strong>180 ä¸ªé¢œè‰²å˜é‡</strong>ã€‚</p>
<p>æ›´å¯æ€•çš„æ˜¯ï¼Œæ¯æ¬¡å“ç‰Œä¸»è‰²è°ƒæ•´ï¼Œéƒ½éœ€è¦åœ¨ 3 ä¸ªä¸åŒçš„æ–‡ä»¶ä¸­åŒæ­¥ä¿®æ”¹ 15 ç§æ·±æµ…å˜åŒ–ã€hover çŠ¶æ€ã€é€æ˜åº¦å˜ä½“â€¦â€¦è®¾è®¡åŒå­¦è½»ææ·¡å†™çš„ä¸€å¥"ä¸»è‰²æƒ³ä»åè“è°ƒæˆæ›´ç´«ä¸€ç‚¹"ï¼Œæ„å‘³ç€å·¥ç¨‹ä¾§éœ€è¦ï¼š</p>
<ul>
<li>
<p>æ‰‹åŠ¨ä¿®æ”¹ 15+ ä¸ªå˜é‡</p>
</li>
<li>
<p>åå¤å¯¹æ¯” hoverã€active çŠ¶æ€æ˜¯å¦åè°ƒ</p>
</li>
<li>
<p>ä»”ç»†æ£€æŸ¥åŠé€æ˜èƒŒæ™¯æ˜¯å¦æ¼æ”¹</p>
</li>
<li>
<p>ç¡®ä¿æ•´ä¸ªé¢œè‰²ä½“ç³»ä¿æŒå’Œè°</p>
</li>
</ul>
<p>æ¼æ”¹ä¸€ä¸ªå˜é‡ï¼Œhover çŠ¶æ€æ˜¾å¾—æ€ªå¼‚ï¼›æ¼æ”¹ä¸¤ä¸ªï¼Œæ•´å¥—ä¸»é¢˜å°±å¼€å§‹"å‘è„"ã€‚</p>
<h2 data-id="heading-1">ä¼ ç»Ÿé¢œè‰²ç³»ç»Ÿçš„å›°å¢ƒ</h2>
<p>å½“å‰ç»å¤§å¤šæ•°è®¾è®¡ç³»ç»Ÿçš„é…è‰²æ–¹æ¡ˆå¯ä»¥æ¦‚æ‹¬ä¸ºï¼š<strong>é äººè‚‰å¤åˆ¶çš„"é¢œè‰²å†œåœº"</strong>ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* ä¸»è‰²ç³» */</span>
  <span class="hljs-attr">--color-primary</span>: <span class="hljs-number">#3b82f6</span>;
  <span class="hljs-attr">--color-primary-hover</span>: <span class="hljs-number">#2563eb</span>;
  <span class="hljs-attr">--color-primary-active</span>: <span class="hljs-number">#1d4ed8</span>;
  <span class="hljs-attr">--color-primary-light</span>: <span class="hljs-number">#93c5fd</span>;
  <span class="hljs-attr">--color-primary-dark</span>: <span class="hljs-number">#1e40af</span>;
  
  <span class="hljs-comment">/* è¾…åŠ©è‰²ç³» */</span>
  <span class="hljs-attr">--color-secondary</span>: <span class="hljs-number">#8b5cf6</span>;
  <span class="hljs-attr">--color-secondary-hover</span>: <span class="hljs-number">#7c3aed</span>;
  <span class="hljs-attr">--color-secondary-active</span>: <span class="hljs-number">#6d28d9</span>;
  
  <span class="hljs-comment">/* ç»§ç»­è¡ç”Ÿ... */</span>
}
</code></pre>
<p>è¿™ç§æ¨¡å¼çš„ç—›ç‚¹æ˜¾è€Œæ˜“è§ï¼š</p>
<ul>
<li>
<p><strong>ç»´æŠ¤æˆæœ¬é«˜</strong>ï¼šä¸€ä¸ªä¸»è‰²ç³»éœ€è¦åå‡ äºŒåä¸ªå˜é‡</p>
</li>
<li>
<p><strong>åŒæ­¥å›°éš¾</strong>ï¼šå¤šå¤„å®šä¹‰çš„å˜é‡å®¹æ˜“é—æ¼</p>
</li>
<li>
<p><strong>ä¸å¯é </strong>ï¼šæ‰‹åŠ¨è°ƒè‰²ä¾èµ–ä¸ªäººæ„Ÿè§‰ï¼Œç¼ºä¹ç³»ç»Ÿæ€§</p>
</li>
</ul>
<h2 data-id="heading-2">CSS ç›¸å¯¹é¢œè‰²ï¼šé©å‘½æ€§çš„è§£å†³æ–¹æ¡ˆ</h2>
<p>CSS ç›¸å¯¹é¢œè‰²è¯­æ³•å¼•å…¥çš„ <code>from</code> å…³é”®å­—ï¼Œè®©é¢œè‰²ä»"æ­»å€¼"å˜æˆ"æ´»å…¬å¼"ã€‚</p>
<h3 data-id="heading-3">åŸºç¡€è¯­æ³•</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">color</span>-function(<span class="hljs-selector-tag">from</span> origin-<span class="hljs-attribute">color</span> channel1 channel2 channel3 / alpha)
</code></pre>
<p>æ‹†è§£è¯´æ˜ï¼š</p>
<ul>
<li>
<p><code>color-function</code>ï¼šè¾“å‡ºæ ¼å¼ï¼Œå¦‚ <code>rgb()</code>ã€<code>hsl()</code>ã€<code>oklch()</code></p>
</li>
<li>
<p><code>from</code>ï¼šå…³é”®å­—ç¬¦ï¼Œå£°æ˜é¢œè‰²æ¥æº</p>
</li>
<li>
<p><code>origin-color</code>ï¼šåŸºå‡†é¢œè‰²ï¼Œæ”¯æŒ hexã€RGBã€HSL ç­‰æ ¼å¼</p>
</li>
<li>
<p><code>channel1 ~ 3</code>ï¼šå¯è®¿é—®å’Œä¿®æ”¹çš„é€šé“å€¼</p>
</li>
<li>
<p><code>alpha</code>ï¼šå¯é€‰é€æ˜åº¦é€šé“</p>
</li>
</ul>
<h3 data-id="heading-4">å®é™…åº”ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--primary</span>: <span class="hljs-number">#3b82f6</span>;
}
â€‹
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--primary);
}
â€‹
<span class="hljs-selector-class">.button</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-comment">/* åŸºäºä¸»è‰²è‡ªåŠ¨è®¡ç®— hover çŠ¶æ€ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">hsl</span>(from <span class="hljs-built_in">var</span>(--primary) h s <span class="hljs-built_in">calc</span>(l - <span class="hljs-number">10</span>));
}
</code></pre>
<p>è¿™ä¸€è¡Œ <code>hsl(from ...)</code> çš„æ”¹å˜ï¼Œå°† hover æ•ˆæœä»"å†™æ­»"å˜æˆäº†"ç›¸å¯¹åŸºè‰²ã€è‡ªåŠ¨è”åŠ¨"ã€‚ä»æ­¤ï¼Œå“ç‰Œè‰²åªéœ€ä¿®æ”¹ä¸€ä¸ª <code>--primary</code> å˜é‡ï¼Œæ‰€æœ‰è¡ç”ŸçŠ¶æ€è‡ªåŠ¨è·Ÿéšã€‚</p>
<h2 data-id="heading-5">from å…³é”®å­—çš„é­”åŠ›</h2>
<p><code>from</code> çš„æ ¸å¿ƒä½œç”¨æ˜¯å°†é¢œè‰²åˆ†è§£ä¸ºé€šé“å€¼ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåƒæ­ä¹é«˜ä¸€æ ·é‡æ–°ç»„åˆï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* å°†ç»¿è‰²åˆ†è§£ä¸º RGB é€šé“ */</span>
<span class="hljs-built_in">rgb</span>(from green r g b)  <span class="hljs-comment">/* è¾“å‡º: rgb(0 128 0) */</span>
â€‹
<span class="hljs-comment">/* ç”¨ç»¿è‰²é€šé“åˆ›å»ºç°åº¦ */</span>
<span class="hljs-built_in">rgb</span>(from green g g g)  <span class="hljs-comment">/* è¾“å‡º: rgb(128 128 128) */</span>
â€‹
<span class="hljs-comment">/* éšæ„è°ƒæ¢é€šé“é¡ºåº */</span>
<span class="hljs-built_in">rgb</span>(from green b r g)  <span class="hljs-comment">/* è¾“å‡º: rgb(0 0 128) */</span>
</code></pre>
<h3 data-id="heading-6">è·¨è‰²å½©ç©ºé—´è½¬æ¢</h3>
<p><code>from</code> è‡ªåŠ¨å¤„ç†è‰²å½©ç©ºé—´è½¬æ¢ï¼Œè®©é¢œè‰²æ ¼å¼ä¸å†æˆä¸ºéšœç¢ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* RGB è½¬ HSL */</span>
<span class="hljs-built_in">hsl</span>(from rgb(<span class="hljs-number">255</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>) h s l)
â€‹
<span class="hljs-comment">/* Hex è½¬ OKLCH */</span>
<span class="hljs-built_in">oklch</span>(from #<span class="hljs-number">3</span>b82f6 l c h)
</code></pre>
<p>è¿™å¯¹è®¾è®¡ç³»ç»Ÿæ„ä¹‰é‡å¤§ï¼šæºå¤´å­˜å‚¨æ ¼å¼ä¸å†é‡è¦ï¼Œä½¿ç”¨ç«¯å§‹ç»ˆä½¿ç”¨ç»Ÿä¸€çš„å¯è®¡ç®—ç©ºé—´ã€‚</p>
<h2 data-id="heading-7">calc()ï¼šé¢œè‰²è®¡ç®—çš„å¼•æ“</h2>
<p>çœŸæ­£çš„å¨åŠ›åœ¨äºå°† <code>calc()</code> ä¸é¢œè‰²é€šé“ç»“åˆï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* å˜äº®ï¼šæé«˜äº®åº¦ */</span>
<span class="hljs-built_in">hsl</span>(from blue h s calc(l + <span class="hljs-number">20</span>))
â€‹
<span class="hljs-comment">/* å˜æš—ï¼šé™ä½äº®åº¦ */</span>  
<span class="hljs-built_in">hsl</span>(from blue h s calc(l - <span class="hljs-number">20</span>))
â€‹
<span class="hljs-comment">/* åŠé€æ˜ï¼šè°ƒæ•´é€æ˜åº¦ */</span>
<span class="hljs-built_in">rgb</span>(from blue r g b / calc(alpha * <span class="hljs-number">0.5</span>))
â€‹
<span class="hljs-comment">/* è°ƒè‰²ï¼šæ—‹è½¬è‰²ç›¸ */</span>
<span class="hljs-built_in">hsl</span>(from blue calc(h + <span class="hljs-number">180</span>) s l)
</code></pre>
<p>å¤§éƒ¨åˆ†é¢œè‰²è¡ç”Ÿé€»è¾‘éƒ½å¯ä»¥å½’ç»“ä¸ºï¼š<strong>é€šé“ + åç§»é‡</strong> æˆ– <strong>é€šé“ Ã— ç³»æ•°</strong>ã€‚</p>
<h2 data-id="heading-8">OKLCHï¼šæ›´æ™ºèƒ½çš„è‰²å½©ç©ºé—´</h2>
<p>è™½ç„¶ HSL å¾ˆæµè¡Œï¼Œä½†å®ƒæœ‰ä¸ªè‡´å‘½ç¼ºé™·ï¼š<strong>äº®åº¦æ„ŸçŸ¥ä¸å‡</strong>ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">hsl</span>(<span class="hljs-number">220</span> <span class="hljs-number">80%</span> <span class="hljs-number">50%</span>)  <span class="hljs-comment">/* è“è‰² */</span>
<span class="hljs-built_in">hsl</span>(<span class="hljs-number">120</span> <span class="hljs-number">80%</span> <span class="hljs-number">50%</span>)  <span class="hljs-comment">/* ç»¿è‰² */</span>
</code></pre>
<p>ç†è®ºä¸Šä¸¤è€…äº®åº¦ç›¸åŒï¼Œä½†äººçœ¼æ„ŸçŸ¥ä¸­ç»¿è‰²æ˜æ˜¾æ›´äº®ã€‚OKLCH è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>
<p><strong>Lï¼ˆLightnessï¼‰</strong>ï¼š0-1ï¼Œæ„ŸçŸ¥äº®åº¦ï¼Œæ›´ç¬¦åˆäººçœ¼</p>
</li>
<li>
<p><strong>Cï¼ˆChromaï¼‰</strong>ï¼š0-çº¦0.37ï¼Œé¢œè‰²çº¯åº¦</p>
</li>
<li>
<p><strong>Hï¼ˆHueï¼‰</strong>ï¼š0-360ï¼Œè‰²ç›¸è§’åº¦</p>
<p>oklch(0.55 0.15 260)  /* è“è‰² <em>/
oklch(0.55 0.15 140)  /</em> ç»¿è‰² */</p>
</li>
</ul>
<p>åœ¨ OKLCH ä¸­ï¼Œç›¸åŒçš„ L å€¼åœ¨ä¸åŒè‰²ç›¸é—´å…·æœ‰ä¸€è‡´çš„äº®åº¦æ„ŸçŸ¥ï¼Œè¿™è®©ç¨‹åºåŒ–è°ƒè‰²æ›´åŠ å¯é ã€‚</p>
<h2 data-id="heading-9">æ„å»ºæ™ºèƒ½é¢œè‰²ç³»ç»Ÿ</h2>
<h3 data-id="heading-10">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰å“ç‰ŒåŸºè‰²</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* åªç”¨å®šä¹‰ 4 ä¸ªåŸºç¡€å“ç‰Œè‰² */</span>
  <span class="hljs-attr">--brand-primary</span>: <span class="hljs-built_in">oklch</span>(<span class="hljs-number">0.55</span> <span class="hljs-number">0.2</span> <span class="hljs-number">265</span>);
  <span class="hljs-attr">--brand-success</span>: <span class="hljs-built_in">oklch</span>(<span class="hljs-number">0.65</span> <span class="hljs-number">0.18</span> <span class="hljs-number">145</span>);
  <span class="hljs-attr">--brand-error</span>: <span class="hljs-built_in">oklch</span>(<span class="hljs-number">0.6</span> <span class="hljs-number">0.25</span> <span class="hljs-number">25</span>);
  <span class="hljs-attr">--brand-warning</span>: <span class="hljs-built_in">oklch</span>(<span class="hljs-number">0.75</span> <span class="hljs-number">0.15</span> <span class="hljs-number">85</span>);
}
</code></pre>
<h3 data-id="heading-11">ç¬¬äºŒæ­¥ï¼šæŒ‰è§„åˆ™ç”Ÿæˆå®Œæ•´è‰²æ¿</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* Primary è‰²ç³» - å…¨éƒ¨ä»åŸºè‰²æ´¾ç”Ÿ */</span>
  <span class="hljs-attr">--primary</span>: <span class="hljs-built_in">var</span>(--brand-primary);
  <span class="hljs-attr">--primary-hover</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--brand-primary) <span class="hljs-built_in">calc</span>(l - <span class="hljs-number">0.1</span>) c h);
  <span class="hljs-attr">--primary-active</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--brand-primary) <span class="hljs-built_in">calc</span>(l - <span class="hljs-number">0.15</span>) c h);
  <span class="hljs-attr">--primary-light</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--brand-primary) <span class="hljs-built_in">calc</span>(l + <span class="hljs-number">0.2</span>) <span class="hljs-built_in">calc</span>(c * <span class="hljs-number">0.5</span>) h);
  <span class="hljs-attr">--primary-lighter</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--brand-primary) <span class="hljs-built_in">calc</span>(l + <span class="hljs-number">0.3</span>) <span class="hljs-built_in">calc</span>(c * <span class="hljs-number">0.3</span>) h);
  <span class="hljs-attr">--primary-alpha-10</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--brand-primary) l c h / <span class="hljs-number">0.1</span>);
  <span class="hljs-attr">--primary-alpha-20</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--brand-primary) l c h / <span class="hljs-number">0.2</span>);
  
  <span class="hljs-comment">/* å…¶ä»–è‰²ç³»é‡‡ç”¨ç›¸åŒæ¨¡å¼ */</span>
  <span class="hljs-attr">--success</span>: <span class="hljs-built_in">var</span>(--brand-success);
  <span class="hljs-attr">--success-hover</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--brand-success) <span class="hljs-built_in">calc</span>(l - <span class="hljs-number">0.1</span>) c h);
  <span class="hljs-attr">--success-light</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--brand-success) <span class="hljs-built_in">calc</span>(l + <span class="hljs-number">0.2</span>) <span class="hljs-built_in">calc</span>(c * <span class="hljs-number">0.5</span>) h);
}
</code></pre>
<p>å››ä¸ªåŸºè‰²å˜é‡ï¼Œæ‰©å±•å‡ºå®Œæ•´çš„é¢œè‰²ä½“ç³»ã€‚å“ç‰Œè‰²è°ƒæ•´æ—¶ï¼Œåªéœ€ä¿®æ”¹å››ä¸ªåŸºç¡€å€¼ã€‚</p>
<h2 data-id="heading-12">æš—è‰²æ¨¡å¼çš„é©å‘½</h2>
<p>ä¼ ç»Ÿæš—è‰²æ¨¡å¼éœ€è¦ç»´æŠ¤ä¸¤å¥— tokenï¼Œç°åœ¨åªéœ€ä¸€ä¸ªå…¬å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--surface</span>: <span class="hljs-built_in">oklch</span>(<span class="hljs-number">0.98</span> <span class="hljs-number">0.02</span> <span class="hljs-number">240</span>);
  <span class="hljs-attr">--text</span>: <span class="hljs-built_in">oklch</span>(<span class="hljs-number">0.25</span> <span class="hljs-number">0.03</span> <span class="hljs-number">240</span>);
}
â€‹
<span class="hljs-selector-attr">[data-theme=<span class="hljs-string">"dark"</span>]</span> {
  <span class="hljs-comment">/* äº®åº¦åè½¬å®ç°æš—è‰²æ¨¡å¼ */</span>
  <span class="hljs-attr">--surface</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--surface) <span class="hljs-built_in">calc</span>(<span class="hljs-number">1</span> - l) c h);
  <span class="hljs-attr">--text</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--text) <span class="hljs-built_in">calc</span>(<span class="hljs-number">1</span> - l) c h);
}
</code></pre>
<h2 data-id="heading-13">å®æˆ˜é«˜çº§æŠ€å·§</h2>
<h3 data-id="heading-14">1. æ™ºèƒ½é˜´å½±ç³»ç»Ÿ</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span> {
  <span class="hljs-attr">--card-bg</span>: <span class="hljs-built_in">var</span>(--primary);
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--card-bg);
  <span class="hljs-attribute">box-shadow</span>: 
    <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">6px</span> <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--card-bg) l c h / <span class="hljs-number">0.2</span>),
    <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-number">15px</span> <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--card-bg) l c h / <span class="hljs-number">0.15</span>);
}
</code></pre>
<p>é˜´å½±è‡ªåŠ¨é€‚åº”èƒŒæ™¯è‰²ï¼Œä¸»é¢˜åˆ‡æ¢æ—¶è‡ªç„¶è¿‡æ¸¡ã€‚</p>
<h3 data-id="heading-15">2. ç¡®ä¿å¯è¯»æ€§çš„æ–‡æœ¬é¢œè‰²</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.tag</span> {
  <span class="hljs-attr">--tag-bg</span>: <span class="hljs-built_in">var</span>(--primary);
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--tag-bg);
  <span class="hljs-comment">/* æ–‡æœ¬äº®åº¦æ¯”èƒŒæ™¯é«˜ 0.6ï¼Œç¡®ä¿å¯¹æ¯”åº¦ */</span>
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--tag-bg) <span class="hljs-built_in">calc</span>(l + <span class="hljs-number">0.6</span>) c h);
}
</code></pre>
<h3 data-id="heading-16">3. å“ç‰ŒåŒ–åŠé€æ˜é®ç½©</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.modal-backdrop</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--brand-primary) l c h / <span class="hljs-number">0.7</span>);
}
</code></pre>
<h2 data-id="heading-17">æµè§ˆå™¨æ”¯æŒä¸æ¸è¿›å¢å¼º</h2>
<p>æˆªè‡³ 2025 å¹´ï¼Œç›¸å¯¹é¢œè‰²å·²è·å¾—è‰¯å¥½æ”¯æŒï¼š</p>
<ul>
<li>
<p>Chrome 119+ âœ…</p>
</li>
<li>
<p>Firefox 128+ âœ…</p>
</li>
<li>
<p>Safari 16.4+ âœ…</p>
</li>
<li>
<p>Edge 119+ âœ…</p>
</li>
</ul>
<p>è¦†ç›–ç‡çº¦ 83%ï¼Œå¯¹äºä¸æ”¯æŒçš„ç¯å¢ƒå¯æä¾›é™æ€å›é€€ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#2563eb</span>; <span class="hljs-comment">/* å›é€€å€¼ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">oklch</span>(from <span class="hljs-built_in">var</span>(--primary) <span class="hljs-built_in">calc</span>(l - <span class="hljs-number">0.1</span>) c h);
}
</code></pre>
<h2 data-id="heading-18">é¿å‘æŒ‡å—</h2>
<ol>
<li>
<p><strong>é¿å…è¿‡æ·±æ´¾ç”Ÿé“¾</strong>ï¼šä»åŸºè‰²ç›´æ¥æ¨å¯¼ï¼Œæœ€å¤šä¸¤å±‚</p>
</li>
<li>
<p><strong>æ§åˆ¶ Chroma èŒƒå›´</strong>ï¼šOKLCH ä¸­ Chroma è¶…è¿‡ 0.37 å¯èƒ½å¯¼è‡´é¢œè‰²æº¢å‡º</p>
</li>
<li>
<p><strong>æ­£ç¡®ä½¿ç”¨ Alpha</strong>ï¼š<code>oklch(0.6 0.2 265 / 0.5)</code> è€Œé <code>oklch(0.6 0.2 265 0.5)</code></p>
</li>
</ol>
<h2 data-id="heading-19">æ€»ç»“ï¼šä»å°å‡çº§åˆ°å¤§å˜é©</h2>
<p>CSS ç›¸å¯¹é¢œè‰²è§£å†³çš„ä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯è®¾è®¡ç³»ç»Ÿç»´æŠ¤çš„å“²å­¦å˜é©ï¼š</p>
<ul>
<li>
<p><strong>ä¸»é¢˜åˆ‡æ¢ä¸å†æ˜¯ç¾éš¾</strong>ï¼šæ”¹ä¸€ä¸ªå˜é‡ï¼Œå…¨ç«™è‡ªæ´½</p>
</li>
<li>
<p><strong>é¢œè‰² Token çœŸæ­£é›†ä¸­ç®¡ç†</strong>ï¼šä»åˆ†æ•£å®šä¹‰åˆ°ç»Ÿä¸€æºå¤´</p>
</li>
<li>
<p><strong>è®¾è®¡è§„åˆ™åŒ–</strong>ï¼šæ·±æµ…ã€çŠ¶æ€ã€é€æ˜åº¦éƒ½æˆä¸ºå¯å¤ç”¨çš„å…¬å¼</p>
</li>
<li>
<p><strong>å¼€å‘ä½“éªŒæå‡</strong>ï¼šä»æœºæ¢°è°ƒè‰²åˆ°æ™ºèƒ½æ¨å¯¼</p>
</li>
</ul>
<p>ä¸‹ä¸€æ¬¡é‡æ„é…è‰²ç³»ç»Ÿæ—¶ï¼Œä¸å¦¨å°è¯•å°†åŸºå‡†è‰²ã€çŠ¶æ€è‰²ã€æš—è‰²æ¨¡å¼ã€åŠé€æ˜å±‚å…¨éƒ¨äº¤ç»™ç›¸å¯¹é¢œè‰²è®¡ç®—ã€‚é‚£ç§"æ”¹ä¸€å¤„ï¼Œå…¨å±€è”åŠ¨"çš„æµç•…ä½“éªŒï¼Œç¡®å®è®©äººä¸Šå¤´ã€‚</p>
<p>ä» 180 ä¸ªé¢œè‰²å˜é‡åˆ° 4 ä¸ªåŸºè‰²å˜é‡ï¼Œè¿™ä¸åªæ˜¯æ•°é‡çš„å‡å°‘ï¼Œæ›´æ˜¯è®¾è®¡ç³»ç»Ÿç»´æŠ¤ç†å¿µçš„è´¨çš„é£è·ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GraphRAG å…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¸šåŠ¡è½åœ°]]></title>    <link>https://juejin.cn/post/7574041466710704171</link>    <guid>https://juejin.cn/post/7574041466710704171</guid>    <pubDate>2025-11-19T07:53:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574041466710704171" data-draft-id="7574230586970324998" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GraphRAG å…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¸šåŠ¡è½åœ°"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-19T07:53:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GraphRAG å…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¸šåŠ¡è½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T07:53:32.000Z" title="Wed Nov 19 2025 07:53:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<blockquote>
<p>æœ¬æ–‡å…¨é¢è§£æå¾®è½¯å¼€æºçš„ GraphRAG é¡¹ç›®ï¼Œä»å®ƒæ˜¯ä»€ä¹ˆã€æ€ä¹ˆç”¨ã€å¦‚ä½•ä¼˜åŒ–è¿è¡Œæ€§èƒ½ã€ç”Ÿæˆå“ªäº›å…³é”®æ–‡ä»¶ï¼Œåˆ°å¦‚ä½•é›†æˆåˆ°ä½ è‡ªå·±çš„ä¸šåŠ¡ä¸­ã€‚å†…å®¹æ·±å…¥ä½†é€šä¿—ï¼Œé€‚åˆå¼€å‘è€…ã€æ•°æ®åˆ†æå¸ˆã€AIå·¥ç¨‹å¸ˆå­¦ä¹ å‚è€ƒã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ GraphRAGï¼Ÿå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2>
<p>GraphRAGï¼ˆGraph Retrieval-Augmented Generationï¼‰æ˜¯å¾®è½¯ç ”ç©¶å›¢é˜Ÿå‘å¸ƒçš„å¼€æºé¡¹ç›®ï¼Œå®ƒæ˜¯ä¸€ç§â€œå›¾å¢å¼ºçš„æ£€ç´¢ç”Ÿæˆç³»ç»Ÿâ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37b7a1d7ca2b42b4a9035287a82d4384~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=jBi5Qnxayfwimlb9brKhGTn2wlw%3D" alt="" loading="lazy"/></p>
<p>ä¸ä¼ ç»Ÿçš„RAGä¸åŒï¼ŒGraphRAGä¸ä»…ä»…æ˜¯â€œæ£€ç´¢+ç”Ÿæˆâ€ï¼Œå®ƒå¼•å…¥äº†å›¾ç»“æ„ï¼Œä½¿å¾—RAGå…·å¤‡ä»¥ä¸‹<strong>å…³é”®èƒ½åŠ›</strong>ï¼š</p>

























<table><thead><tr><th>èƒ½åŠ›</th><th>æè¿°</th></tr></thead><tbody><tr><td>ç»“æ„åŒ–ç†è§£</td><td>æ„å»ºæ–‡æ¡£å†…çš„<strong>å®ä½“-å…³ç³»å›¾è°±</strong></td></tr><tr><td>å…¨å±€æ´å¯Ÿ</td><td>å¯¹æ–‡æ¡£ä¸­çš„çŸ¥è¯†ç‚¹è¿›è¡Œç¤¾åŒºèšç±»å’Œè¯­ä¹‰æ€»ç»“</td></tr><tr><td>ç²¾ç¡®æŸ¥è¯¢</td><td>æä¾›<strong>å±€éƒ¨è¯­ä¹‰æœç´¢</strong>ä¸<strong>å…¨å±€çŸ¥è¯†æ€»ç»“</strong>ä¸¤ç§æ–¹å¼</td></tr><tr><td>å¯è§£é‡Šæ€§å¼º</td><td>æ¯ä¸ªç»“è®ºéƒ½å¯ä»¥å›æº¯åŸå§‹å®ä½“ã€æ–‡æœ¬ã€ç¤¾åŒº</td></tr></tbody></table>
<h3 data-id="heading-1">ä½¿ç”¨GraphRAGçš„å…¸å‹åœºæ™¯ï¼š</h3>
<ul>
<li><strong>é•¿æ–‡æ¡£é—®ç­”ï¼ˆæ–‡æ¡£QAï¼‰</strong> ï¼šå¦‚æ³•å¾‹æ–‡ä¹¦ã€æ”¿ç­–æ–‡ä»¶ã€è´¢æŠ¥ç­‰</li>
<li><strong>ç»“æ„åŒ–æ‘˜è¦ç”Ÿæˆ</strong>ï¼šéœ€è¦ä»æµ·é‡æ–‡æœ¬ä¸­æç‚¼ç»“æ„åŒ–çŸ¥è¯†</li>
<li><strong>çŸ¥è¯†å›¾è°±æ„å»º</strong>ï¼šä¸æ‰‹å†™è§„åˆ™ã€çº¯é LLMè‡ªåŠ¨æå–å…³ç³»</li>
<li><strong>ä¼ä¸šæ•°æ®æ´å¯Ÿ</strong>ï¼šå¯¹å…¬å¸èµ„æ–™ã€é¡¹ç›®æŠ¥å‘Šè¿›è¡Œç»“æ„å»ºæ¨¡å’Œåˆ†æ</li>
</ul>
<h3 data-id="heading-2">ğŸ†š GraphRAG vs ä¼ ç»Ÿ RAG vs Embedding Search</h3>















































<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»ŸEmbedding Search</th><th>æ™®é€šRAG</th><th><strong>GraphRAG</strong></th></tr></thead><tbody><tr><td>åŸºäºå‘é‡æ£€ç´¢</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>ä¸Šä¸‹æ–‡ç”Ÿæˆ</td><td>âŒ</td><td>âœ…</td><td>âœ…</td></tr><tr><td>çŸ¥è¯†å…³ç³»å»ºæ¨¡</td><td>âŒ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ç¤¾åŒºèšç±»åˆ†æ</td><td>âŒ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å…¨å±€ç»“æ„å›ç­”</td><td>âŒ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å¯è§£é‡Šæ€§</td><td>ä¸­</td><td>ä½</td><td><strong>é«˜</strong></td></tr></tbody></table>
<p>ç®€è¨€ä¹‹ï¼ŒGraphRAGæ˜¯å¯¹RAGçš„<strong>èƒ½åŠ›å‡çº§</strong>ï¼Œä¸ä»…å¯é—®ï¼Œè¿˜èƒ½è§£é‡Šâ€œçŸ¥è¯†æ˜¯å¦‚ä½•æ„æˆçš„â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4afa685742df4709b990c6e101318a94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=JKUNLl8AyOLpGctEczOtH9Jo32I%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3">äºŒã€å¦‚ä½•è·‘é€š GraphRAGï¼Ÿä»0åˆ°1å®Œæ•´æµç¨‹</h2>
<h3 data-id="heading-4"/>
<h3 data-id="heading-5">1. å®‰è£…ç¯å¢ƒï¼ˆæ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼‰</h3>
<pre><code class="hljs">â€‹
pip install graphrag
ä¸å†éœ€è¦ Poetryã€æºç å…‹éš†ç­‰ç¹çæ­¥éª¤ã€‚GraphRAG å·²æ­£å¼å‘å¸ƒåˆ° PyPIã€‚
â€‹
</code></pre>
<hr/>
<h3 data-id="heading-6"/>
<h3 data-id="heading-7">2. åˆå§‹åŒ–é¡¹ç›®ç›®å½•</h3>
<p>ä½¿ç”¨å®˜æ–¹å‘½ä»¤å¿«é€Ÿåˆå§‹åŒ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">graphrag init --root ./ragtest
è¿™ä¸€æ­¥ä¼šç”Ÿæˆæ ‡å‡†çš„ç›®å½•ç»“æ„ï¼š
ragtest/
â”œâ”€â”€ settings.yaml Â  Â  Â 
<span class="hljs-comment"># ä¸»é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ prompts/ Â  Â  Â  Â  Â  
<span class="hljs-comment"># æç¤ºè¯æ¨¡æ¿</span>
â”œâ”€â”€ .
<span class="hljs-built_in">env</span>
<span class="hljs-comment"># å­˜æ”¾APIå¯†é’¥ï¼ˆéœ€æ‰‹åŠ¨å¡«å…¥ï¼‰</span>
â””â”€â”€ input/ Â  Â  Â  Â  Â  Â  
<span class="hljs-comment"># â—éœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼Œç”¨æ¥æ”¾ä½ è¦åˆ†æçš„æ–‡æ¡£</span>
â€‹
</code></pre>
<hr/>
<h3 data-id="heading-8"/>
<h3 data-id="heading-9">3. é…ç½® API å¯†é’¥</h3>
<p>ç¼–è¾‘Â <code>.env</code>Â æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Keyã€‚ä¾‹å¦‚ä½¿ç”¨ç¡…åŸºæµåŠ¨ APIï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">GRAPHRAG_API_KEY</span> = sk-your-siliconflow-api-key
åŒæ—¶ï¼Œåœ¨settings.yamlä¸­è®¾ç½® API æä¾›æ–¹ï¼š
</code></pre>

<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">models:</span>
<span class="hljs-section">default_chat_model:</span>
<span class="hljs-section">type: openai_chat</span>
<span class="hljs-section">api_base: https://api.siliconflow.cn/v1</span>
<span class="hljs-section">api_key: ${GRAPHRAG_API_KEY}</span>
<span class="hljs-section">model: deepseek-ai/DeepSeek-V3</span>
<span class="hljs-section">encoding_model: cl100k_base</span>
<span class="hljs-section">concurrent_requests: 3</span>
<span class="hljs-section">requests_per_minute: 30</span>
<span class="hljs-section">default_embedding_model:</span>
<span class="hljs-section">type: openai_embedding</span>
<span class="hljs-section">api_base: https://api.siliconflow.cn/v1</span>
<span class="hljs-section">api_key: ${GRAPHRAG_API_KEY}</span>
<span class="hljs-section">model: BAAI/bge-large-zh-v1.5</span>
<span class="hljs-section">encoding_model: cl100k_base</span>
<span class="hljs-section">concurrent_requests: 3</span>
<span class="hljs-section">requests_per_minute: 30</span>
</code></pre>
<h3 data-id="heading-10">4. æ·»åŠ æ–‡æ¡£åˆ° input ç›®å½•</h3>
<p>å°†ä½ éœ€è¦å¤„ç†çš„æ–‡æ¡£æ”¾å…¥Â <code>ragtest/input/</code>Â ç›®å½•ä¸­ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ragtest/
â”œâ”€â”€ settings.yaml Â  <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ prompts/ Â  Â  Â   <span class="hljs-comment"># æç¤ºè¯æ¨¡æ¿</span>
â”œâ”€â”€ input/ Â  Â  Â  Â   <span class="hljs-comment"># æ•°æ®è¾“å…¥ç›®å½•ï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰</span>
â”œâ”€â”€ .<span class="hljs-built_in">env</span> Â  Â  Â  Â  Â   <span class="hljs-comment"># å­˜å‚¨APIå¯†é’¥</span>
â””â”€â”€ output/ Â  Â  Â  Â  <span class="hljs-comment"># è‡ªåŠ¨ç”Ÿæˆçš„ç´¢å¼•ç»“æœ</span>
æ”¯æŒ.txt,.pdf,.docxç­‰å¤šç§æ ¼å¼ã€‚
</code></pre>
<hr/>
<h3 data-id="heading-11">5. è¿è¡Œç´¢å¼•æ„å»ºå‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ragtest
graphrag index --root .
è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹è¿‡ç¨‹ï¼š
</code></pre>
<ol>
<li>æ–‡æœ¬åˆ†å—</li>
<li>å®ä½“è¯†åˆ«ä¸å…³ç³»æå–ï¼ˆè°ƒç”¨å¤§æ¨¡å‹ï¼‰</li>
<li>æ„å»ºå®ä½“-å…³ç³»å›¾è°±</li>
<li>ç¤¾åŒºæ£€æµ‹ï¼ˆLeidenç®—æ³•ï¼‰</li>
<li>ç”Ÿæˆç¤¾åŒºæ‘˜è¦ï¼ˆè°ƒç”¨å¤§æ¨¡å‹ï¼‰</li>
<li>åµŒå…¥è®¡ç®— + å‘é‡ç´¢å¼•æ„å»º</li>
</ol>
<blockquote>
<p>è¿™ä¸ªè¿‡ç¨‹ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">6. è¿è¡ŒæŸ¥è¯¢å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># å…¨å±€æŸ¥è¯¢ï¼ˆé—®ç»“æ„åŒ–ä¸»é¢˜ï¼‰</span>
graphrag query --root . --method global <span class="hljs-string">"å…¬å¸çš„æ ¸å¿ƒé¡¹ç›®æ˜¯ä»€ä¹ˆï¼Ÿ"</span>
<span class="hljs-comment"># å±€éƒ¨æŸ¥è¯¢ï¼ˆé—®ç»†èŠ‚è¯­ä¹‰ï¼‰</span>
graphrag query --root . --method <span class="hljs-built_in">local</span> <span class="hljs-string">"å¼ ä¸‰çš„èŒè´£æ˜¯ä»€ä¹ˆï¼Ÿ"</span>
éœ€è¦åœ¨åŒ…å« settings.yaml é…ç½®æ–‡ä»¶çš„ç›®å½•ä¸­è¿è¡Œï¼Œä¹Ÿå°±æ˜¯ ragtest ç›®å½•ã€‚
<span class="hljs-built_in">cd</span> ragtest  <span class="hljs-comment"># åˆ‡æ¢åˆ°åŒ…å«settings.yamlçš„ç›®å½•</span>
ç¤ºä¾‹ï¼š
graphrag query --root . --method global --query <span class="hljs-string">"å¼ é£æ˜¯è°çš„å…„å¼Ÿ"</span>
Missing reports <span class="hljs-keyword">for</span> communities: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498] Â  Â  Â  Â 
SUCCESS: Global Search Response:
å¼ é£æ˜¯åˆ˜å¤‡çš„å…„å¼Ÿã€‚åœ¨ä¸‰å›½æ—¶æœŸï¼Œå¼ é£ä¸åˆ˜å¤‡ã€å…³ç¾½å¹¶ç§°ä¸ºâ€˜æ¡ƒå›­ä¸‰ç»“ä¹‰â€™ï¼Œä¸‰äººç»“ä¸ºå¼‚å§“å…„å¼Ÿï¼Œå…±åŒå‚ä¸äº†ä¸‰å›½çš„è¯¸å¤šå†å²äº‹ä»¶ã€‚[Data: Reports (1, 3)] Â  Â  Â 

</code></pre>
<hr/>
<h2 data-id="heading-13">ä¸‰ã€ragtestç›®å½•ç»“æ„è¯¦è§£</h2>
<p>ä¸€æ—¦è¿è¡Œå®Œç´¢å¼•å‘½ä»¤ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">ragtest/
â”œâ”€â”€ input/                          <span class="hljs-meta"># è¾“å…¥æ•°æ®</span>
â”‚   â””â”€â”€ three_kingdomspart.txt      <span class="hljs-meta"># æˆ‘ä»¬ç»™å®šçš„æ–‡æ¡£ï¼Œæ¯”å¦‚ä¸‰å›½æ¼”ä¹‰</span>
â”œâ”€â”€ output/                         <span class="hljs-meta"># ä¸»è¦è¾“å‡ºæ–‡ä»¶</span>
â”‚   â”œâ”€â”€ documents.parquet           <span class="hljs-meta"># æ–‡æ¡£è¡¨</span>
â”‚   â”œâ”€â”€ text_units.parquet          <span class="hljs-meta"># æ–‡æœ¬å•å…ƒè¡¨</span>
â”‚   â”œâ”€â”€ entities.parquet            <span class="hljs-meta"># å®ä½“è¡¨</span>
â”‚   â”œâ”€â”€ relationships.parquet       <span class="hljs-meta"># å…³ç³»è¡¨</span>
â”‚   â”œâ”€â”€ communities.parquet         <span class="hljs-meta"># ç¤¾åŒºè¡¨</span>
â”‚   â”œâ”€â”€ community_reports.parquet   <span class="hljs-meta"># ç¤¾åŒºæŠ¥å‘Šè¡¨</span>
â”‚   â”œâ”€â”€ covariates.parquet          <span class="hljs-meta"># åå˜é‡è¡¨ï¼ˆå¯é€‰ï¼‰</span>
â”‚   â””â”€â”€ lancedb/                    <span class="hljs-meta"># å‘é‡æ•°æ®åº“</span>
â”‚       â””â”€â”€ <span class="hljs-literal">default</span>/                <span class="hljs-meta"># å­˜å‚¨æ–‡æœ¬åµŒå…¥å‘é‡</span>
â”œâ”€â”€ cache/                          <span class="hljs-meta"># ç¼“å­˜æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ base_text_units.parquet     <span class="hljs-meta"># åŸºç¡€æ–‡æœ¬å•å…ƒç¼“å­˜</span>
â”‚   â”œâ”€â”€ extracted_entities.parquet  <span class="hljs-meta"># æå–çš„å®ä½“ç¼“å­˜</span>
â”‚   â”œâ”€â”€ extracted_relationships.parquet <span class="hljs-meta"># æå–çš„å…³ç³»ç¼“å­˜</span>
â”‚   â””â”€â”€ ... (å…¶ä»–ä¸­é—´ç¼“å­˜æ–‡ä»¶)
â””â”€â”€ logs/                           <span class="hljs-meta"># è¿è¡Œæ—¥å¿—</span>
â””â”€â”€ indexing-engine.log         <span class="hljs-meta"># ç´¢å¼•è¿‡ç¨‹æ—¥å¿—</span>
</code></pre>
<hr/>
<h2 data-id="heading-14">å››ã€GraphRAGè¾“å‡ºæ–‡ä»¶è¯¦è§£</h2>
<h3 data-id="heading-15"/>
<h3 data-id="heading-16">1ï¸âƒ£Â <code>documents.parquet</code>ï¼ˆæ–‡æ¡£è¡¨ï¼‰</h3>
<ul>
<li>å­˜å‚¨åŸå§‹æ–‡æ¡£çš„å…ƒä¿¡æ¯ä¸å…¨æ–‡å†…å®¹</li>
<li>æ¯ä¸ªæ–‡æ¡£ä¸€ä¸ªæ¡ç›®ï¼Œè®°å½•å…¶Â <code>title</code>ã€<code>text</code>ã€<code>doc_id</code></li>
<li><code>å°±æ˜¯åŸå§‹æ–‡æ¡£çš„æ¡ç›®</code></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5504baf2c6974f3db0cbf160f8392fec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=tFoheLOqg16exALwLL5H%2F7423KM%3D" alt="" loading="lazy"/></p>
<p><code>2ï¸âƒ£</code>Â <code>text_units.parquet</code>ï¼ˆæ–‡æœ¬å•å…ƒè¡¨ï¼‰</p>
<ul>
<li>å°†æ¯ä¸ªæ–‡æ¡£åˆ†å—ï¼ˆchunkï¼‰åçš„åˆ‡ç‰‡å†…å®¹</li>
<li>æ¯ä¸€å—å¯¹åº”ä¸€æ¬¡LLMè°ƒç”¨ï¼ˆå¦‚å®ä½“æå–ï¼‰</li>
<li>å°±æ˜¯åˆ‡åˆ†åçš„æ¯ä¸€ä¸ªchunkçš„å†…å®¹</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eacad25c74ba4319aff921f604e81169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=8Ka8oJUAifnLyn63EZvXD5HZ3Wo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-17">3ï¸âƒ£Â <code>entities.parquet</code>ï¼ˆå®ä½“è¡¨ï¼‰</h3>
<ul>
<li>æ‰€æœ‰æ–‡æ¡£ä¸­æå–å‡ºçš„<strong>äººç‰©ã€ç»„ç»‡ã€åœ°ç‚¹ã€äº‹ä»¶</strong></li>
<li>åŒ…å«ï¼šå®ä½“åç§°ã€ç±»å‹ã€é¢‘ç‡ã€æè¿°ã€å‡ºç°åœ¨å“ªäº›å—ä¸­</li>
<li>æ˜¯çŸ¥è¯†å›¾è°±çš„"èŠ‚ç‚¹"</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8401aedd1fc4b3ea7017ae146740aa2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=xV8Vav93VxeCV%2BIUU3KxO8pCZNs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-18">4ï¸âƒ£Â <code>relationships.parquet</code>ï¼ˆå…³ç³»è¡¨ï¼‰</h3>
<ul>
<li>æ¯å¯¹å®ä½“ä¹‹é—´çš„è¯­ä¹‰å…³ç³»ï¼ˆå¦‚â€œå¼ ä¸‰-ç®¡ç†-äº§å“éƒ¨â€ï¼‰</li>
<li>åŒ…å«æè¿°ã€å…³ç³»ç±»å‹ã€æƒé‡ç­‰</li>
<li>æ˜¯çŸ¥è¯†å›¾è°±çš„"è¾¹"</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c93116e8a9949eab283385a5d6a780d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=3cFcsrQ6v0%2BJvBGw%2B8FG00kcxic%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-19">5ï¸âƒ£Â <code>communities.parquet</code>ï¼ˆç¤¾åŒºè¡¨ï¼‰</h3>
<ul>
<li>åŸºäºå›¾è°±è¿è¡Œç¤¾åŒºæ£€æµ‹ç®—æ³•ï¼Œèšå‡ºâ€œä¸»é¢˜ç»„â€</li>
<li>æ¯ä¸ªç¤¾åŒºåŒ…å«ä¸€ç»„ç›¸å…³çš„å®ä½“ï¼ˆå¦‚æŸäº§å“çº¿å›¢é˜Ÿï¼‰</li>
<li>ä½œç”¨æ˜¯å‘ç°"ä¸»é¢˜é›†ç¾¤"</li>
<li><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d827a523ca04834af2d9a1a7d5787c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=v%2FGMQQ%2FxRHuY4GksiCjZx0P9VMo%3D" alt="" loading="lazy"/></li>
</ul>
<h3 data-id="heading-20">6ï¸âƒ£Â <code>community_reports.parquet</code>ï¼ˆç¤¾åŒºæŠ¥å‘Šè¡¨ï¼‰</h3>
<ul>
<li>å¯¹æ¯ä¸ªç¤¾åŒºï¼Œè°ƒç”¨LLMç”Ÿæˆçš„ç»“æ„åŒ–æ‘˜è¦</li>
<li>åŒ…æ‹¬æŠ¥å‘Šæ ‡é¢˜ã€æ‘˜è¦ã€ä¸»è¦å‘ç°</li>
<li>é¢å‘çš„æ˜¯ç”¨æˆ·ï¼Œç”¨çš„æ˜¯è‡ªç„¶è¯­è¨€</li>
<li>Qwenæ¨¡å‹å®¹æ˜“å¤±è´¥ï¼Œå¾—æ¢ä¸ªåˆé€‚çš„æ¨¡å‹</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2c1f2953fee4844be3c5d5013b3dce5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764143612&amp;x-signature=ODalo1ZH5fUcNq%2B3yErUBls4OyE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-21">7ï¸âƒ£Â <code>lancedb/</code>ï¼ˆå‘é‡æ•°æ®åº“ï¼‰</h3>
<ul>
<li>æ¯ä¸ªæ–‡æœ¬å•å…ƒçš„å‘é‡è¡¨ç¤ºï¼Œç”¨äºå±€éƒ¨è¯­ä¹‰æœç´¢</li>
</ul>
<hr/>
<h2 data-id="heading-22">äº”ã€GraphRAGæ˜¯å¦ç”¨åˆ°GPUï¼Ÿç”¨çš„æ˜¯APIè¿˜æ˜¯æœ¬åœ°æ¨ç†ï¼Ÿ</h2>
<h3 data-id="heading-23">âœ… GraphRAG é»˜è®¤æ˜¯Â <strong>çº¯CPU + APIæ¶æ„</strong></h3>
<ul>
<li>å¤§æ¨¡å‹ï¼ˆLLMï¼‰çš„ç”Ÿæˆä»»åŠ¡ â†’ è°ƒç”¨è¿œç¨‹APIï¼ˆå¦‚OpenAIã€DeepSeekã€ç¡…åŸºæµåŠ¨ï¼‰</li>
<li>å‘é‡åµŒå…¥ â†’ è°ƒç”¨APIè¿”å›å‘é‡</li>
<li>å›¾è°±æ„å»ºä¸èšç±» â†’ æœ¬åœ°CPUå®Œæˆ</li>
</ul>
<blockquote>
<p>æ— éœ€å®‰è£…æœ¬åœ°å¤§æ¨¡å‹ï¼Œä¹Ÿä¸éœ€è¦GPUã€‚åªéœ€é…ç½®å¥½API Keyï¼Œå³å¯å…¨æµç¨‹è¿è¡Œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-24">å…­ã€å¦‚ä½•è®©GraphRAGè·‘å¾—æ›´å¿«ï¼Ÿæ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<p>è™½ç„¶GraphRAGä¸ä¾èµ–GPUï¼Œä½†å®ƒå¯¹ç½‘ç»œå’ŒAPIé€Ÿç‡éå¸¸æ•æ„Ÿã€‚</p>
<h3 data-id="heading-25">å¸¸è§å¯¼è‡´è¿è¡Œæ…¢çš„åŸå› ï¼š</h3>
<ol start="0">
<li><strong>æ–‡æœ¬åˆ†å—å¤ªå¤š</strong>ï¼ˆé»˜è®¤1200å­—ç¬¦ä¸€å—ï¼‰</li>
<li><strong>å¹¶å‘è¯·æ±‚å¤ªé«˜ï¼ŒAPIæœåŠ¡é™é€Ÿ</strong></li>
<li><strong>æå–çš„å®ä½“ç§ç±»å¤ªå¤šï¼ˆé»˜è®¤4ç±»ï¼‰</strong></li>
<li><strong>å¯ç”¨äº†å¤šè½®æå–æˆ–å¤§ç¤¾åŒºå¤„ç†</strong></li>
</ol>
<h3 data-id="heading-26">âœ… ä¼˜åŒ–å»ºè®®æ¸…å•ï¼š</h3>
<h4 data-id="heading-27">1. å‡å°æ–‡æœ¬å—å¤§å°ï¼Œé™ä½è¯·æ±‚é‡</h4>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">chunks:</span>
  <span class="hljs-attr">size:</span> <span class="hljs-number">600</span>     <span class="hljs-comment"># é»˜è®¤1200ï¼Œå‡å°å¯ä»¥å‡å°‘æ¯æ¬¡Tokené‡</span>
  <span class="hljs-attr">overlap:</span> <span class="hljs-number">50</span>
</code></pre>
<h4 data-id="heading-28">2. é™åˆ¶å®ä½“ç±»å‹</h4>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">extract_graph:</span>
  <span class="hljs-attr">entity_types:</span> [<span class="hljs-string">person</span>, <span class="hljs-string">organization</span>]
</code></pre>
<h4 data-id="heading-29">3. é™ä½å¹¶å‘å¹¶é™é€Ÿï¼ˆå°¤å…¶ç”¨ç¡…åŸºæµåŠ¨æ—¶ï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">models:</span>
  <span class="hljs-attr">default_chat_model:</span>
    <span class="hljs-attr">concurrent_requests:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">requests_per_minute:</span> <span class="hljs-number">30</span>
</code></pre>
<h4 data-id="heading-30">4. å¯ç”¨ç¼“å­˜</h4>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">cache:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">file</span>
  <span class="hljs-attr">base_dir:</span> <span class="hljs-string">"cache"</span>
</code></pre>
<h4 data-id="heading-31">5. å…ˆç”¨å°æ–‡æ¡£æµ‹è¯•ï¼Œé€æ­¥æ‰©å¤§è§„æ¨¡</h4>
<h4 data-id="heading-32"/>
<h4 data-id="heading-33">è¿›ä¸€æ­¥çš„æ€§èƒ½ä¼˜åŒ–æ¸…å•</h4>
<h4 data-id="heading-34"/>













































<table><thead><tr><th>ä¼˜åŒ–ç‚¹</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Chunk Size &amp; Overlap è°ƒå‚</strong></td><td>â€¢ è‹¥ä¾›åº”å•†æŒ‰Â <em>token/min</em>Â è®¡è´¹/é™é€Ÿï¼Œ<strong>å‡å° chunk</strong>Â å¯è®©å•æ¬¡ token-loadâ†“ï¼Œé™ä½è¢«é™é€Ÿæ¦‚ç‡ï¼›ä½†è¯·æ±‚æ•°ä¼šå¢å¤šã€‚â€¢ è‹¥æŒ‰Â <em>req/min</em>Â é™é€Ÿï¼Œ<strong>å¢å¤§ chunk</strong>ï¼ˆ1500-2000 tokensï¼‰+Â <strong>overlap 50â†’20</strong>Â å¯ä»¥æ˜¾è‘—å‡å°‘è°ƒç”¨æ¬¡æ•°ã€‚</td><td>å¤§æ–‡ä»¶ / é™é€Ÿä¸¥æ ¼</td></tr><tr><td><strong>åœç”¨ Claim ä¸ Gleanings</strong></td><td>åœ¨Â <code>settings.yaml</code>ï¼š<code>claim_extraction.enabled: false``extract_graph.max_gleanings: 0</code></td><td>åªæƒ³è¦å®ä½“-å…³ç³»-ç¤¾åŒºæ—¶</td></tr><tr><td><strong>åˆ†é˜¶æ®µæ‰§è¡Œ</strong></td><td>å…ˆè·‘Â <code>graphrag index --root . --method embeddings</code>Â åªè®¡ç®—åµŒå…¥ï¼Œç¡®è®¤é€Ÿåº¦ OK åå†è·‘å®Œæ•´æµæ°´çº¿ã€‚</td><td>è¶…é•¿è¯­æ–™è¯•è·‘</td></tr><tr><td><strong>æœ¬åœ°åµŒå…¥æ¨¡å‹</strong></td><td>ç”¨Â <code>api_base: http://localhost:11434</code>Â + Ollama embeddingï¼ˆnomic-embedï¼‰å¯æŠŠ 60-70 %çš„ API è°ƒç”¨è½¬æœ¬åœ°ï¼Œé€Ÿåº¦å’Œæˆæœ¬åŒé™ã€‚</td><td>æœ‰ GPU / CPU å……è£•</td></tr><tr><td><strong>é€’å¢æ‰¹å¤„ç†</strong></td><td>åˆ©ç”¨Â <code>parallelization.stagger</code>ï¼ˆ0.3-0.5ï¼‰è®©è¯·æ±‚æ‰¹æ¬¡äº¤é”™ï¼Œæ›´å¹³æ»‘åœ°åˆ©ç”¨é™é¢ã€‚</td><td>ä¾›åº”å•†æ”¯æŒå¹¶å‘é«˜ä½†é™é€Ÿ</td></tr><tr><td><strong>æ–‡æœ¬é¢„æ¸…æ´—</strong></td><td>å»é™¤é¡µçœ‰é¡µè„šã€æ¨¡æ¿é‡å¤æ®µï¼Œå¯å‡å°‘ 10-30 % æ— æ•ˆ tokenã€‚</td><td>PDF æ‰¹é‡å¯¼å…¥</td></tr><tr><td><strong>é‡ç”¨ Prompt æ¨¡æ¿</strong></td><td>æŠŠé•¿ç³»ç»Ÿ prompt å†™è¿›Â <code>prompt_template:</code>Â æ–‡ä»¶å¹¶å¼•ç”¨ï¼Œå¯æ˜¾è‘—å‡å°æ¯æ¬¡ tokenã€‚</td><td>è‡ªå®šä¹‰ prompt å¾ˆé•¿æ—¶</td></tr></tbody></table>
<h4 data-id="heading-35"/>
<h4 data-id="heading-36"/>
<hr/>
<h2 data-id="heading-37">ä¸ƒã€æˆ‘æƒ³æ¥å…¥è‡ªå·±é¡¹ç›®ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ</h2>
<p>GraphRAGæ˜¯<strong>æ ‡å‡†è¾“å‡ºç»“æ„+è‡ªå®šä¹‰é…ç½®é©±åŠ¨</strong>çš„ç³»ç»Ÿï¼Œä½ åªéœ€è¦ï¼š</p>
<h3 data-id="heading-38">âœ… è°ƒæ•´é…ç½®æ–‡ä»¶Â <code>settings.yaml</code></h3>
<ul>
<li>å®ä½“ç±»å‹é€‚é…ä½ ä¸šåŠ¡é¢†åŸŸ</li>
<li>åˆ†å—ç­–ç•¥æŒ‰æ–‡æ¡£ç‰¹ç‚¹è°ƒæ•´</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">extract_graph:</span>
  <span class="hljs-attr">entity_types:</span> [<span class="hljs-string">person</span>, <span class="hljs-string">department</span>, <span class="hljs-string">project</span>]
  <span class="hljs-attr">prompt:</span> <span class="hljs-string">prompts/extract_business.txt</span>
<span class="hljs-attr">chunks:</span>
  <span class="hljs-attr">size:</span> <span class="hljs-number">1000</span>
  <span class="hljs-attr">overlap:</span> <span class="hljs-number">100</span>
</code></pre>
<h3 data-id="heading-39">âœ… ä¿®æ”¹æç¤ºè¯æ¨¡æ¿</h3>
<p>åœ¨Â <code>prompts/</code>Â ä¸­ç¼–å†™è‡ªå®šä¹‰æ¨¡æ¿ï¼Œå¦‚ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">è¯·ä»ä»¥ä¸‹æ–‡æœ¬ä¸­æå–ï¼š
<span class="hljs-deletion">- PERSON: å‘˜å·¥ã€å®¢æˆ·ã€åˆä½œä¼™ä¼´</span>
<span class="hljs-deletion">- DEPARTMENT: å…¬å¸å†…éƒ¨éƒ¨é—¨</span>
<span class="hljs-deletion">- PROJECT: é¡¹ç›®/äº§å“</span>
</code></pre>
<h3 data-id="heading-40">âœ… ä½¿ç”¨GraphRAGç”Ÿæˆç»“æ„åŒ–ç»“æœå¹¶æ¥å…¥ä½ ç³»ç»Ÿ</h3>
<p>ä½ å¯ä»¥å°†ç”Ÿæˆçš„Â <code>entities.parquetï¼Œ``relationships.parquetï¼Œ``community_reports.parquet</code>ä½œä¸ºä½ ç³»ç»Ÿçš„çŸ¥è¯†ç»“æ„ã€æ ‡ç­¾æºã€ç”šè‡³é—®ç­”åŸºç¡€ã€‚</p>
<hr/>
<h2 data-id="heading-41">âœ… æ€»ç»“</h2>

































<table><thead><tr><th>åŠŸèƒ½</th><th>GraphRAG</th></tr></thead><tbody><tr><td>æ–‡æ¡£ç»“æ„å»ºæ¨¡</td><td>âœ…</td></tr><tr><td>å®ä½“/å…³ç³»æŠ½å–</td><td>âœ…</td></tr><tr><td>ç¤¾åŒºèšç±»åˆ†æ</td><td>âœ…</td></tr><tr><td>å¤šå±‚æ¬¡é—®ç­”æ”¯æŒ</td><td>âœ…</td></tr><tr><td>æ— éœ€æœ¬åœ°éƒ¨ç½²å¤§æ¨¡å‹</td><td>âœ…</td></tr><tr><td>æ”¯æŒä¼ä¸šå®šåˆ¶</td><td>âœ…</td></tr></tbody></table>
<p>GraphRAG å°±åƒæ˜¯ä¸€ä¸ª<strong>è‡ªåŠ¨åŒ–çŸ¥è¯†å·¥å‚</strong>ï¼Œå¸®ä½ ä»æ— ç»“æ„æ–‡æœ¬ä¸­æç‚¼å‡ºæœ‰ç»“æ„çš„å›¾è°±å’Œæ´å¯Ÿã€‚åªè¦ä½ é…ç½®å¾—å½“ï¼Œå®ƒå¯ä»¥æ— ç¼é›†æˆåˆ°ä½ ä»»ä½•AIç›¸å…³çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ã€‚</p>
<hr/>
<p>ğŸ“ é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fgraphrag" target="_blank" title="https://github.com/microsoft/graphrag" ref="nofollow noopener noreferrer">github.com/microsoft/gâ€¦</a></p>
<p>ğŸ“– å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fgraphrag%3Ftab%3Dreadme-ov-file" target="_blank" title="https://github.com/microsoft/graphrag?tab=readme-ov-file" ref="nofollow noopener noreferrer">github.com/microsoft/gâ€¦</a></p>
<h2 data-id="heading-42">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IDEA + Maven å®æˆ˜ï¼šå¦‚ä½•ä¼˜é›…åœ°åˆ‡æ¢ Dev å’Œ Prod ç¯å¢ƒè¿›è¡Œæ‰“åŒ…ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7574204970774888475</link>    <guid>https://juejin.cn/post/7574204970774888475</guid>    <pubDate>2025-11-19T05:50:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574204970774888475" data-draft-id="7574020645862621235" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IDEA + Maven å®æˆ˜ï¼šå¦‚ä½•ä¼˜é›…åœ°åˆ‡æ¢ Dev å’Œ Prod ç¯å¢ƒè¿›è¡Œæ‰“åŒ…ï¼Ÿ"/> <meta itemprop="keywords" content="Spring Boot"/> <meta itemprop="datePublished" content="2025-11-19T05:50:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…ƒYäº¨H"/> <meta itemprop="url" content="https://juejin.cn/user/2839351584888617"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IDEA + Maven å®æˆ˜ï¼šå¦‚ä½•ä¼˜é›…åœ°åˆ‡æ¢ Dev å’Œ Prod ç¯å¢ƒè¿›è¡Œæ‰“åŒ…ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2839351584888617/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…ƒYäº¨H
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T05:50:43.000Z" title="Wed Nov 19 2025 05:50:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<h2 data-id="heading-0">IDEA + Maven å®æˆ˜ï¼šå¦‚ä½•ä¼˜é›…åœ°åˆ‡æ¢ Dev å’Œ Prod ç¯å¢ƒè¿›è¡Œæ‰“åŒ…ï¼Ÿ</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é¢ä¸´ä¸€ä¸ªç—›ç‚¹ï¼š**æœ¬åœ°å¼€å‘ï¼ˆDevï¼‰<strong>è¿æ¥çš„æ˜¯æµ‹è¯•æ•°æ®åº“ï¼Œè€Œ</strong>ä¸Šçº¿ï¼ˆProdï¼‰**éœ€è¦è¿æ¥ç”Ÿäº§æ•°æ®åº“ã€‚å¦‚æœåœ¨æ‰“åŒ…æ—¶æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¸ä»…ç¹çï¼Œè¿˜å®¹æ˜“å› ä¸ºè¯¯æ“ä½œå¯¼è‡´ç”Ÿäº§äº‹æ•…ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åˆ©ç”¨ <strong>Maven Profiles</strong> ç»“åˆ <strong>IDEA</strong>ï¼Œå®ç°â€œä¸€é”®åˆ‡æ¢â€ç¯å¢ƒæ‰“åŒ…ï¼Œå½»åº•å‘Šåˆ«æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ—¶ä»£ã€‚</p>
<hr/>
<h3 data-id="heading-1">æ ¸å¿ƒåŸç†</h3>
<p>Maven æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½å« <strong>Profilesï¼ˆé…ç½®æ–‡ä»¶ï¼‰</strong>ã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰å¤šå¥—ç¯å¢ƒé…ç½®ï¼ˆå¦‚ <code>dev</code>ã€<code>test</code>ã€<code>prod</code>ï¼‰ï¼Œå¹¶é€šè¿‡å˜é‡æ§åˆ¶ Maven åœ¨æ„å»ºï¼ˆBuildï¼‰è¿‡ç¨‹ä¸­åŠ è½½ä¸åŒçš„èµ„æºæ–‡ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-2">æ–¹æ¡ˆä¸€ï¼šåŸºäºç›®å½•éš”ç¦»ï¼ˆé€šç”¨æ–¹æ¡ˆï¼Œæ¨èï¼‰</h3>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> ä¼ ç»Ÿçš„ SSM é¡¹ç›®ï¼Œæˆ–è€…å¸Œæœ›æ‰“åŒ…åçš„ jar åŒ…ä¸­<strong>åªåŒ…å«</strong>å½“å‰ç¯å¢ƒé…ç½®ï¼Œä¸åŒ…å«å…¶ä»–ç¯å¢ƒçš„æ‚ä¹±æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-3">1. è§„åˆ’é¡¹ç›®ç›®å½•</h4>
<p>åœ¨ <code>src/main/resources</code> ä¸‹ï¼Œä¸ºä¸åŒç¯å¢ƒå»ºç«‹ç‹¬ç«‹çš„æ–‡ä»¶å¤¹ï¼š</p>
<pre><code class="hljs language-text" lang="text">src/main/resources
â”œâ”€â”€ config-dev             &lt;-- å¼€å‘ç¯å¢ƒç›®å½•
â”‚   â””â”€â”€ application.properties (æ•°æ®åº“URL: 127.0.0.1)
â”œâ”€â”€ config-prod            &lt;-- ç”Ÿäº§ç¯å¢ƒç›®å½•
â”‚   â””â”€â”€ application.properties (æ•°æ®åº“URL: 192.168.x.x)
â”œâ”€â”€ mapper                 &lt;-- å…¬å…±èµ„æº
â””â”€â”€ logback.xml            &lt;-- å…¬å…±èµ„æº
</code></pre>
<h4 data-id="heading-4">2. é…ç½® <code>pom.xml</code></h4>
<p>æˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹ï¼šå®šä¹‰å˜é‡ã€æ§åˆ¶èµ„æºåŠ è½½ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ... --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 1. å®šä¹‰ Profiles --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">env</span>&gt;</span>config-dev<span class="hljs-tag">&lt;/<span class="hljs-name">env</span>&gt;</span> <span class="hljs-comment">&lt;!-- å®šä¹‰å˜é‡ env æŒ‡å‘å¯¹åº”æ–‡ä»¶å¤¹ --&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">activeByDefault</span>&gt;</span> <span class="hljs-comment">&lt;!-- é»˜è®¤æ¿€æ´» dev --&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">env</span>&gt;</span>config-prod<span class="hljs-tag">&lt;/<span class="hljs-name">env</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 2. åŠ¨æ€èµ„æºåŠ è½½ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- åŠ è½½å¯¹åº”ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources/${env}<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- åŠ è½½å…¬å…±èµ„æºï¼Œå¹¶æ’é™¤ç¯å¢ƒæ–‡ä»¶å¤¹ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>config-dev/**<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>config-prod/**<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">æ–¹æ¡ˆäºŒï¼šSpring Boot èµ„æºè¿‡æ»¤ï¼ˆSpringBoot ä¸“ç”¨ï¼‰</h3>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> Spring Boot é¡¹ç›®ï¼Œåˆ©ç”¨å…¶å¤šç¯å¢ƒé…ç½®æœºåˆ¶ï¼ˆ<code>application-{profile}.yml</code>ï¼‰ã€‚</p>
<h4 data-id="heading-6">1. è§„åˆ’é¡¹ç›®ç›®å½•</h4>
<p>æ–‡ä»¶é€šå¸¸å¹³é“ºåœ¨ resources ç›®å½•ä¸‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">src/main/resources
â”œâ”€â”€ application.yml       &lt;-- ä¸»å…¥å£é…ç½®
â”œâ”€â”€ application-dev.yml   &lt;-- å¼€å‘é…ç½®è¯¦æƒ…
â””â”€â”€ application-prod.yml  &lt;-- ç”Ÿäº§é…ç½®è¯¦æƒ…
</code></pre>
<h4 data-id="heading-7">2. ä¿®æ”¹ <code>application.yml</code></h4>
<p>åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ Maven çš„å ä½ç¬¦ï¼ˆSpring Boot æ¨èä½¿ç”¨ <code>@...@</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">profiles:</span>
    <span class="hljs-attr">active:</span> <span class="hljs-string">@profiles.active@</span>  <span class="hljs-comment"># è¿™é‡Œçš„å€¼å°†ç”± Maven æ‰“åŒ…æ—¶åŠ¨æ€æ›¿æ¢</span>
</code></pre>
<h4 data-id="heading-8">3. é…ç½® <code>pom.xml</code></h4>
<p>å¼€å¯èµ„æºè¿‡æ»¤ï¼ˆFilteringï¼‰ï¼Œè®© Maven è§£ææ–‡ä»¶ä¸­çš„å ä½ç¬¦ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">profiles.active</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">profiles.active</span>&gt;</span> <span class="hljs-comment">&lt;!-- å¯¹åº” application-dev.yml --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">activeByDefault</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">profiles.active</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">profiles.active</span>&gt;</span> <span class="hljs-comment">&lt;!-- å¯¹åº” application-prod.yml --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span> <span class="hljs-comment">&lt;!-- å…³é”®ï¼šå¿…é¡»å¼€å¯è¿‡æ»¤ --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-9">å®æ“ï¼šåœ¨ IDEA ä¸­ä¸€é”®åˆ‡æ¢</h3>
<p>é…ç½®å®Œæˆåï¼Œåœ¨ IntelliJ IDEA ä¸­çš„æ“ä½œæ­¥éª¤å®Œå…¨ä¸€è‡´ï¼š</p>
<ol>
<li><strong>æ‰“å¼€ Maven é¢æ¿</strong>ï¼šç‚¹å‡» IDEA å³ä¾§ä¾§è¾¹æ çš„ <code>Maven</code> æ ‡ç­¾ã€‚</li>
<li><strong>æ‰¾åˆ° Profiles</strong>ï¼šå±•å¼€é¡¹ç›®ä¸‹çš„ <code>Profiles</code> æ–‡ä»¶å¤¹ã€‚</li>
<li><strong>å‹¾é€‰ç¯å¢ƒ</strong>ï¼š
<ul>
<li>æƒ³æ‰“ç”Ÿäº§åŒ…ï¼šå‹¾é€‰ <code>prod</code>ï¼ˆæ­¤æ—¶ <code>dev</code> ä¼šè‡ªåŠ¨å–æ¶ˆå‹¾é€‰ï¼‰ã€‚</li>
<li>æƒ³æ‰“å¼€å‘åŒ…ï¼šå‹¾é€‰ <code>dev</code>ã€‚</li>
</ul>
</li>
<li><strong>æ‰§è¡Œæ‰“åŒ…</strong>ï¼š
<ul>
<li>åœ¨ <code>Lifecycle</code> ä¸‹ï¼ŒåŒå‡» <code>clean</code>ï¼ˆæ¸…ç†æ—§æ–‡ä»¶ï¼‰ã€‚</li>
<li>åŒå‡» <code>package</code>ï¼ˆå¼€å§‹æ‰“åŒ…ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>ğŸ’¡ å°æŠ€å·§</strong>ï¼šå‹¾é€‰ Profile åï¼Œå¦‚æœä»£ç ä¸­å¯¹å˜é‡çš„å¼•ç”¨çˆ†çº¢ï¼Œå¯ä»¥ç‚¹å‡» Maven é¢æ¿å·¦ä¸Šè§’çš„ <strong>"Reload All Maven Projects"</strong>ï¼ˆåˆ·æ–°å›¾æ ‡ï¼‰æ¥åŒæ­¥çŠ¶æ€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">éªŒè¯ç»“æœ</h3>
<p>ä¸è¦ç›²ç›®ç›¸ä¿¡é…ç½®ï¼Œå»ºè®®ç¬¬ä¸€æ¬¡æ‰“åŒ…åè¿›è¡ŒéªŒè¯ï¼š</p>
<ol>
<li>æ‰“åŒ…å®Œæˆåï¼Œåœ¨é¡¹ç›®å·¦ä¾§æ–‡ä»¶æ ‘ä¸­æ‰¾åˆ° <code>target</code> ç›®å½•ã€‚</li>
<li>å±•å¼€ <code>target/classes</code> æˆ–è§£å‹ç”Ÿæˆçš„ <code>.jar</code> åŒ…ã€‚</li>
<li><strong>æ–¹æ¡ˆä¸€éªŒè¯</strong>ï¼šæ£€æŸ¥æ ¹ç›®å½•ä¸‹æ˜¯å¦æœ‰ <code>application.properties</code>ï¼Œä¸”å†…å®¹æ˜¯å¦ä¸ºç”Ÿäº§åº“åœ°å€ã€‚</li>
<li><strong>æ–¹æ¡ˆäºŒéªŒè¯</strong>ï¼šæ‰“å¼€ <code>application.yml</code>ï¼Œæ£€æŸ¥ <code>active: @profiles.active@</code> æ˜¯å¦å·²è¢«æ›¿æ¢ä¸º <code>active: prod</code>ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-11">è¿›é˜¶ï¼šCI/CD å‘½ä»¤è¡Œæ‰“åŒ…</h3>
<p>å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨ Jenkins æˆ– GitLab CI è¿›è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œä¸éœ€è¦å›¾å½¢ç•Œé¢ï¼Œåªéœ€åœ¨å‘½ä»¤ä¸­åŠ å…¥ <code>-P</code> å‚æ•°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰“åŒ…å¼€å‘ç¯å¢ƒ</span>
mvn clean package -Pdev

<span class="hljs-comment"># æ‰“åŒ…ç”Ÿäº§ç¯å¢ƒ</span>
mvn clean package -Pprod
</code></pre>
<hr/>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>é€šè¿‡ <strong>Maven Profiles</strong>ï¼Œæˆ‘ä»¬å®ç°äº†ç¯å¢ƒé…ç½®ä¸ä»£ç çš„è§£è€¦ï¼š</p>
<ul>
<li><strong>å®‰å…¨æ€§æå‡</strong>ï¼šé¿å…äº†æ‰‹åŠ¨ä¿®æ”¹é…ç½®å¯¼è‡´çš„ç”Ÿäº§äº‹æ•…ã€‚</li>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šIDEA å›¾å½¢åŒ–å‹¾é€‰ï¼Œä¸€é”®åˆ‡æ¢ã€‚</li>
<li><strong>æ ‡å‡†åŒ–</strong>ï¼šæ— è®ºæ˜¯æœ¬åœ°è¿è¡Œè¿˜æ˜¯æœåŠ¡å™¨æ„å»ºï¼Œéƒ½ç»Ÿä¸€ç®¡ç†ã€‚</li>
</ul>
<p>å»ºè®®æ ¹æ®ä½ çš„é¡¹ç›®ç±»å‹ï¼ˆæ™®é€š Maven é¡¹ç›®é€‰æ–¹æ¡ˆä¸€ï¼ŒSpring Boot é€‰æ–¹æ¡ˆäºŒï¼‰å°½å¿«æ¥å…¥è¿™å¥—æµç¨‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Quarkus WebSocket å…¥é—¨å®è·µ]]></title>    <link>https://juejin.cn/post/7573989365614182400</link>    <guid>https://juejin.cn/post/7573989365614182400</guid>    <pubDate>2025-11-19T06:07:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573989365614182400" data-draft-id="7573978809365626880" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Quarkus WebSocket å…¥é—¨å®è·µ"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-19T06:07:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¹³å‡¡çš„Joe"/> <meta itemprop="url" content="https://juejin.cn/user/1047162215998333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Quarkus WebSocket å…¥é—¨å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1047162215998333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¹³å‡¡çš„Joe
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T06:07:06.000Z" title="Wed Nov 19 2025 06:07:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰æœŸå‡†å¤‡&amp;ç¯å¢ƒè¯´æ˜</h3>
<ul>
<li>JDK 21 (å¤§äº17å°±è¡Œ)</li>
<li>Quarkus Cli 3.29.3</li>
<li>quarkus mavenå·¥ç¨‹</li>
</ul>
<p>å®‰è£…æœ€æ–°çš„æ’ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">quarkus ext add websockets-next
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¸ç”¨ quarkus-websockets?</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91c7b2a68cc44b3c8214a73866c20f2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bmz5Yeh55qESm9l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764140072&amp;x-signature=4Xu0fa0yN2mGeS0TnJ54GdgS8fw%3D" alt="image.png" loading="lazy"/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fquarkus.net.cn%2Fguides%2Fwebsockets-next-tutorial%23quarkus-websockets-vs-quarkus-websockets-next" target="_blank" title="https://quarkus.net.cn/guides/websockets-next-tutorial#quarkus-websockets-vs-quarkus-websockets-next" ref="nofollow noopener noreferrer">quarkus.net.cn/guides/websâ€¦</a></p>
<h3 data-id="heading-1">å¼€å‘å®¢æˆ·ç«¯</h3>
<p><strong>ç›®æ ‡</strong>: è¿æ¥åˆ°æŒ‡å®šçš„wsæœåŠ¡å™¨</p>
<p><strong>æµç¨‹æ­¥éª¤:</strong></p>
<ul>
<li><strong>å®šä¹‰å®¢æˆ·ç«¯ç«¯ç‚¹ï¼ˆ@WebSocketClientï¼‰</strong>
Quarkus çš„ WebSocket Next å®¢æˆ·ç«¯æ¥æ”¶æ¶ˆæ¯éœ€è¦ä¸€ä¸ª <code>@WebSocketClient</code> æ³¨è§£çš„ç±»ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.acme;

<span class="hljs-keyword">import</span> io.quarkus.websockets.next.OnTextMessage;
<span class="hljs-keyword">import</span> io.quarkus.websockets.next.WebSocketClient;
<span class="hljs-keyword">import</span> io.quarkus.websockets.next.WebSocketClientConnection;
<span class="hljs-keyword">import</span> jakarta.inject.Inject;

<span class="hljs-meta">@WebSocketClient(path = "/echo")</span> <span class="hljs-comment">// è¿œç¨‹ ws çš„è·¯å¾„ï¼ˆç¤ºä¾‹ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWsClient</span> {

    <span class="hljs-meta">@Inject</span>
    WebSocketClientConnection connection;

    <span class="hljs-meta">@OnTextMessage</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(String msg)</span> {
        System.out.println(<span class="hljs-string">"&gt;&gt;&gt; æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯: "</span> + msg);
    }
}

</code></pre>
<ul>
<li>åªè¦è¿œç¨‹ ws æœåŠ¡å™¨åœ¨ <code>/echo</code> è·¯å¾„ä¸Šï¼Œè¿™ä¸ªç«¯ç‚¹å°±èƒ½æ¥æ”¶æ¶ˆæ¯ã€‚</li>
</ul>

<ul>
<li><strong>ä½¿ç”¨ WebSocketConnector ä¸»åŠ¨è¿æ¥è¿œç¨‹ ws</strong><br/>
éœ€è¦ä¸€ä¸ªä¸šåŠ¡ç±»ä¸»åŠ¨è°ƒç”¨ connector.connect()ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.acme;

<span class="hljs-keyword">import</span> io.quarkus.websockets.next.WebSocketConnector;
<span class="hljs-keyword">import</span> io.quarkus.websockets.next.WebSocketClientConnection;
<span class="hljs-keyword">import</span> jakarta.inject.Inject;
<span class="hljs-keyword">import</span> jakarta.inject.Singleton;

<span class="hljs-keyword">import</span> java.net.URI;

<span class="hljs-meta">@Singleton</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WsClientRunner</span> {

    <span class="hljs-meta">@Inject</span>
    WebSocketConnector&lt;MyWsClient&gt; connector;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect</span><span class="hljs-params">()</span> {
        <span class="hljs-type">URI</span> <span class="hljs-variable">uri</span> <span class="hljs-operator">=</span> URI.create(<span class="hljs-string">"ws://localhost:9000"</span>); <span class="hljs-comment">// å¤–éƒ¨ ws æœåŠ¡</span>

        <span class="hljs-type">WebSocketClientConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> connector
                .baseUri(uri)      <span class="hljs-comment">// ws://localhost:9000</span>
                .connectAndAwait(); <span class="hljs-comment">// é˜»å¡ç›´åˆ°è¿æ¥æˆåŠŸ</span>

        System.out.println(<span class="hljs-string">"&gt;&gt;&gt; å·²è¿æ¥åˆ°å¤–éƒ¨ WebSocket æœåŠ¡"</span>);

        <span class="hljs-comment">// ä¸»åŠ¨å‘é€ä¸€æ¡æ¶ˆæ¯</span>
        conn.sendTextAndAwait(<span class="hljs-string">"Hello WS Server!"</span>);
    }
}

</code></pre>
<ul>
<li><strong>å‘é€æ¶ˆæ¯ / æ¥æ”¶æ¶ˆæ¯</strong><br/>
æ ¹æ®ä¸šåŠ¡é€»è¾‘è¿›è¡Œä¸»åŠ¨æˆ–è‡ªåŠ¨è¿æ¥åˆ°WSæœåŠ¡å™¨</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.quarkus.runtime.StartupEvent;
<span class="hljs-keyword">import</span> jakarta.enterprise.event.Observes;

<span class="hljs-meta">@Singleton</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Startup</span> {

    <span class="hljs-meta">@Inject</span>
    WsClientRunner runner;

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStart</span><span class="hljs-params">(<span class="hljs-meta">@Observes</span> StartupEvent ev)</span> {
        runner.connect();
    }
}

</code></pre>
<h2 data-id="heading-2">ğŸ“Œ é‡ç‚¹è¯´æ˜</h2>





























<table><thead><tr><th>éœ€æ±‚</th><th>å¯¹åº”ç”¨æ³•</th></tr></thead><tbody><tr><td>ä¸»åŠ¨è¿æ¥å¤–éƒ¨ ws æœåŠ¡</td><td><strong>WebSocketConnector</strong></td></tr><tr><td>æ¥æ”¶æ¶ˆæ¯</td><td>åœ¨ <code>@WebSocketClient</code> ä¸­å†™ <code>@OnTextMessage</code></td></tr><tr><td>å‘é€æ¶ˆæ¯</td><td>connection.sendText() / sendTextAndAwait()</td></tr><tr><td>é…è·¯å¾„å‚æ•°</td><td><code>.pathParam("name", "abc")</code></td></tr><tr><td>è¿æ¥å¤šä¸ª ws</td><td>ä½¿ç”¨ <code>Instance&lt;WebSocketConnector&lt;T&gt;&gt;</code></td></tr></tbody></table>
<p>Quarkus WebSockets Next å®¢æˆ·ç«¯æœ¬è´¨ä¸Šæ˜¯<strong>å…¨å¼‚æ­¥ã€è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸçš„ WebSocket å®¢æˆ·ç«¯</strong>ï¼Œæ¯”ä¼ ç»Ÿ Java WebSocket API å¥½ç”¨å¤ªå¤šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€SpringBootã€‘37 æ ¸å¿ƒåŠŸèƒ½ - é«˜çº§ç‰¹æ€§- Spring Boot ä¸­çš„ è‡ªå®šä¹‰ Starter å®Œæ•´æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7574069837532119076</link>    <guid>https://juejin.cn/post/7574069837532119076</guid>    <pubDate>2025-11-19T06:10:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574069837532119076" data-draft-id="7573971406416068651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€SpringBootã€‘37 æ ¸å¿ƒåŠŸèƒ½ - é«˜çº§ç‰¹æ€§- Spring Boot ä¸­çš„ è‡ªå®šä¹‰ Starter å®Œæ•´æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-19T06:10:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€SpringBootã€‘37 æ ¸å¿ƒåŠŸèƒ½ - é«˜çº§ç‰¹æ€§- Spring Boot ä¸­çš„ è‡ªå®šä¹‰ Starter å®Œæ•´æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T06:10:26.000Z" title="Wed Nov 19 2025 06:10:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨Â Spring BootÂ ä¸­ï¼Œè‡ªå®šä¹‰ Starter æ˜¯ä¸€ç§éå¸¸å¼ºå¤§çš„æ–¹å¼ï¼Œå¯ä»¥å°†å¸¸ç”¨çš„åŠŸèƒ½æ¨¡å—å°è£…æˆå¯å¤ç”¨çš„ç»„ä»¶ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ Starterï¼Œå¹¶æä¾›å®Œæ•´çš„ä½¿ç”¨æµç¨‹å’Œä»£ç ç¤ºä¾‹ã€‚</p>
<hr/>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸€ã€è‡ªå®šä¹‰ Starter åŸç†</h3>
<p>Spring Boot çš„[è‡ªåŠ¨é…ç½®]æœºåˆ¶ä¾èµ–äºÂ <code>META-INF/spring.factories</code>Â æ–‡ä»¶ä¸­çš„Â <code>EnableAutoConfiguration</code>Â [é…ç½®é¡¹]ã€‚å½“é¡¹ç›®å¯åŠ¨æ—¶ï¼ŒSpring Boot ä¼šæ‰«ææ‰€æœ‰Â <code>META-INF/spring.factories</code>Â æ–‡ä»¶ï¼ŒåŠ è½½å…¶ä¸­æŒ‡å®šçš„è‡ªåŠ¨é…ç½®ç±»ã€‚</p>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å¯åŠ¨æµç¨‹å›¾è§£ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash">starter â†’ autoconfigure â†’ spring-boot-starter
         â†‘
         â””â”€ META-INF/spring.factories

AIå†™ä»£ç 
123
</code></pre>
<ul>
<li><code>starter</code>ï¼šMaven/Gradle ä¾èµ–åŒ…ï¼ˆå¯åŠ¨å™¨ï¼‰</li>
<li><code>autoconfigure</code>ï¼šåŒ…å«è‡ªåŠ¨é…ç½®é€»è¾‘çš„åŒ…</li>
<li><code>spring.factories</code>ï¼šé…ç½®è‡ªåŠ¨é…ç½®ç±»çš„å…¥å£æ–‡ä»¶</li>
</ul>
<hr/>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äºŒã€é¡¹ç›®ç»“æ„è®¾è®¡</h3>
<p>æˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„â€œHello Worldâ€åŠŸèƒ½ä¸ºä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºÂ <code>atguigu-hello-spring-boot-starter</code>Â çš„è‡ªå®šä¹‰ Starterã€‚</p>
<h4 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. æ¨¡å—åˆ’åˆ†</h4>
<pre><code class="hljs language-css" lang="css">â”œâ”€â”€ atguigu-hello-spring-boot-starter (Starter)
â”‚   â”œâ”€â”€ pom<span class="hljs-selector-class">.xml</span>
â”‚   â””â”€â”€ <span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span>/java/com/atguigu/hello/HelloService<span class="hljs-selector-class">.java</span>
â”‚
â”œâ”€â”€ atguigu-hello-spring-boot-starter-autoconfigure (Autoconfigure)
â”‚   â”œâ”€â”€ pom<span class="hljs-selector-class">.xml</span>
â”‚   â”œâ”€â”€ <span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span>/java/com/atguigu/hello/config/HelloAutoConfiguration<span class="hljs-selector-class">.java</span>
â”‚   â”œâ”€â”€ <span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span>/java/com/atguigu/hello/config/HelloProperties<span class="hljs-selector-class">.java</span>
â”‚   â””â”€â”€ <span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span>/resources/META-INF/spring<span class="hljs-selector-class">.factories</span>

AIå†™ä»£ç 
<span class="hljs-number">123456789</span>
</code></pre>
<hr/>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸‰ã€ä»£ç å®ç°</h3>
<h4 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. åˆ›å»º Autoconfigure æ¨¡å—</h4>
<h5 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><code>pom.xml</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.atguigu<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>atguigu-hello-spring-boot-starter-autoconfigure<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>

AIå†™ä»£ç xml
12345678910111213141516171819202122232425
</code></pre>
<h5 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><code>HelloProperties.java</code>ï¼ˆé…ç½®å±æ€§ç±»ï¼‰</h5>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">atguigu</span>.<span class="hljs-property">hello</span>.<span class="hljs-property">config</span>;

<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">context</span>.<span class="hljs-property">properties</span>.<span class="hljs-property">ConfigurationProperties</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Component</span>;

<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"hello"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloProperties</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> message = <span class="hljs-string">"Hello, World!"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getMessage</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> message;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setMessage</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> message</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = message;
    }
}

<span class="hljs-variable constant_">AI</span>å†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">12345678910111213141516171819</span>
</code></pre>
<h5 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><code>HelloAutoConfiguration.java</code>ï¼ˆè‡ªåŠ¨é…ç½®ç±»ï¼‰</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.atguigu.hello.config;

<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
<span class="hljs-keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Configuration;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableConfigurationProperties(HelloProperties.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloAutoConfiguration</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnMissingBean</span>
    <span class="hljs-keyword">public</span> HelloService helloService(HelloProperties properties) {
        <span class="hljs-keyword">return</span> new HelloService(properties.getMessage());
    }
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">1234567891011121314151617</span>
</code></pre>
<h5 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><code>HelloService.java</code>ï¼ˆä¸šåŠ¡é€»è¾‘ç±»ï¼‰</h5>
<pre><code class="hljs language-arduino" lang="arduino">package com.atguigu.hello;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> message;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">HelloService</span><span class="hljs-params">(<span class="hljs-type">String</span> message)</span> </span>{
        <span class="hljs-keyword">this</span>.message = message;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">sayHello</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> message;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">printHello</span><span class="hljs-params">()</span> </span>{
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-built_in">sayHello</span>());
    }
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">123456789101112131415161718</span>
</code></pre>
<h5 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><code>META-INF/spring.factories</code></h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=\
com.atguigu.hello.config.HelloAutoConfiguration

AIå†™ä»£ç properties
12
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š<code>spring.factories</code>Â æ–‡ä»¶å¿…é¡»æ”¾åœ¨Â <code>src/main/resources/META-INF/</code>Â ç›®å½•ä¸‹ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. åˆ›å»º Starter æ¨¡å—</h4>
<h5 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><code>pom.xml</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.atguigu<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>atguigu-hello-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å¼•å…¥ autoconfigure åŒ… --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.atguigu<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>atguigu-hello-spring-boot-starter-autoconfigure<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>

AIå†™ä»£ç xml
123456789101112131415161718192021222324252627
</code></pre>
<blockquote>
<p><strong>è¯´æ˜</strong>ï¼šè¿™ä¸ª starter åªæ˜¯ä¸€ä¸ªâ€œé—¨é¢â€ï¼ŒçœŸæ­£å®ç°è‡ªåŠ¨é…ç½®çš„æ˜¯Â <code>autoconfigure</code>Â æ¨¡å—ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-14"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å››ã€ä½¿ç”¨è‡ªå®šä¹‰ Starter</h3>
<h4 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. åœ¨ç›®æ ‡é¡¹ç›®ä¸­å¼•å…¥ Starter</h4>
<h5 data-id="heading-16"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><code>pom.xml</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.atguigu<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>atguigu-hello-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

AIå†™ä»£ç xml
12345
</code></pre>
<h4 data-id="heading-17"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. é…ç½®æ–‡ä»¶Â <code>application.yml</code></h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">hello:</span>
  message: <span class="hljs-string">"Hello, Spring Boot!"</span>

AIå†™ä»£ç yaml
12
</code></pre>
<h4 data-id="heading-18"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. ç¼–å†™æµ‹è¯•ä»£ç </h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoApplication</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">DemoApplication</span>.<span class="hljs-property">class</span>, args);
    }

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">HelloService</span> helloService;

    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
        helloService.<span class="hljs-title function_">printHello</span>(); <span class="hljs-comment">// è¾“å‡º: Hello, Spring Boot!</span>
    }
}

<span class="hljs-variable constant_">AI</span>å†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">123456789101112131415</span>
</code></pre>
<hr/>
<h3 data-id="heading-19"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äº”ã€å®Œæ•´æµç¨‹æ€»ç»“</h3>

































<table><thead><tr><th>æ­¥éª¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>1</td><td>åˆ›å»ºÂ <code>autoconfigure</code>Â æ¨¡å—ï¼ŒåŒ…å«è‡ªåŠ¨é…ç½®é€»è¾‘</td></tr><tr><td>2</td><td>ç¼–å†™Â <code>@Configuration</code>Â ç±»ï¼Œä½¿ç”¨Â <code>@EnableConfigurationProperties</code>Â ç»‘å®šé…ç½®</td></tr><tr><td>3</td><td>åœ¨Â <code>META-INF/spring.factories</code>Â ä¸­æ³¨å†Œè‡ªåŠ¨é…ç½®ç±»</td></tr><tr><td>4</td><td>åˆ›å»ºÂ <code>starter</code>Â æ¨¡å—ï¼Œä»…ä¾èµ–Â <code>autoconfigure</code></td></tr><tr><td>5</td><td>åœ¨ä¸»é¡¹ç›®ä¸­å¼•å…¥Â <code>starter</code>ï¼Œæ— éœ€é¢å¤–é…ç½®</td></tr><tr><td>6</td><td>é€šè¿‡Â <code>application.yml</code>Â è®¾ç½®å‚æ•°ï¼Œè‡ªåŠ¨ç”Ÿæ•ˆ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-20"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å…­ã€å…³é”®æ³¨è§£è¯´æ˜</h3>





























<table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Configuration</code></td><td>æ ‡è®°ä¸ºé…ç½®ç±»</td></tr><tr><td><code>@EnableConfigurationProperties</code></td><td>å¯ç”¨é…ç½®å±æ€§ç»‘å®š</td></tr><tr><td><code>@ConditionalOnMissingBean</code></td><td>å½“å®¹å™¨ä¸­æ²¡æœ‰è¯¥ Bean æ—¶æ‰åˆ›å»º</td></tr><tr><td><code>@Component</code></td><td>å°†ç±»æ³¨å†Œä¸º Spring Bean</td></tr><tr><td><code>@ConfigurationProperties</code></td><td>ç»‘å®šé…ç½®æ–‡ä»¶å‰ç¼€å±æ€§</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-21"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¸ƒã€æ‰©å±•å»ºè®®</h3>
<ul>
<li>æ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼ˆå¦‚Â <code>dev</code>,Â <code>prod</code>ï¼‰</li>
<li>æ·»åŠ æ—¥å¿—è®°å½•æˆ–ç›‘æ§åŠŸèƒ½</li>
<li>ä½¿ç”¨Â <code>@ConditionalOnClass</code>Â æˆ–Â <code>@ConditionalOnProperty</code>Â å®ç°æ›´å¤æ‚çš„æ¡ä»¶åˆ¤æ–­</li>
<li>æä¾›æ¥å£ä¾›å¤–éƒ¨æ‰©å±•</li>
</ul>
<hr/>
<h3 data-id="heading-22"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å…«ã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><code>spring.factories</code>Â æ–‡ä»¶æ ¼å¼å¿…é¡»æ­£ç¡®ï¼Œä¸èƒ½æœ‰ç©ºæ ¼æˆ–æ¢è¡Œé”™è¯¯ã€‚</li>
<li>ç¡®ä¿Â <code>autoconfigure</code>Â æ¨¡å—çš„Â <code>spring-boot-autoconfigure</code>Â ä¾èµ–å·²æ·»åŠ ã€‚</li>
<li>å¯åŠ¨å™¨æ¨¡å—ä¸è¦ç›´æ¥å†™ä¸šåŠ¡é€»è¾‘ï¼Œåªåšä¾èµ–ç®¡ç†ã€‚</li>
<li>ç‰ˆæœ¬å·ä¿æŒä¸€è‡´ï¼Œé¿å…å†²çªã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-23"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¹ã€è¿è¡Œæ•ˆæœ</h3>
<p>å¯åŠ¨é¡¹ç›®åï¼Œ[æ§åˆ¶å°è¾“å‡º]ï¼š</p>
<pre><code class="hljs">Hello, Spring Boot!

AIå†™ä»£ç 
1
</code></pre>
<p>è¯´æ˜è‡ªå®šä¹‰ Starter æˆåŠŸåŠ è½½å¹¶æ‰§è¡Œäº†è‡ªåŠ¨é…ç½®é€»è¾‘ã€‚</p>
<hr/>
<p>âœ…Â <strong>æ€»ç»“</strong>ï¼šé€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥è½»æ¾åœ°å°†ä»»ä½•åŠŸèƒ½å°è£…ä¸ºå¯å¤ç”¨çš„ Spring Boot Starterï¼Œæå‡å¼€å‘æ•ˆç‡ä¸ä»£ç å¤ç”¨æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Webpackâ€”â€”æ’ä»¶å®ç°çš„ç†è§£]]></title>    <link>https://juejin.cn/post/7573995798603087887</link>    <guid>https://juejin.cn/post/7573995798603087887</guid>    <pubDate>2025-11-19T05:46:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573995798603087887" data-draft-id="7573968791202627630" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Webpackâ€”â€”æ’ä»¶å®ç°çš„ç†è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-11-19T05:46:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èµ·è¿™ä¸ªåå­—"/> <meta itemprop="url" content="https://juejin.cn/user/3646404655847591"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Webpackâ€”â€”æ’ä»¶å®ç°çš„ç†è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3646404655847591/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èµ·è¿™ä¸ªåå­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T05:46:33.000Z" title="Wed Nov 19 2025 05:46:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>Webpack æ’ä»¶æ˜¯ Webpack ä¸­éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼ŒPluginsè´¯ç©¿æ•´ä¸ªé¡¹ç›®æ„å»ºè¿‡ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e0dcb24571045daaa2756537dae83bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LW36L-Z5Liq5ZCN5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764136488&amp;x-signature=EuAzvUqZGrev9rs%2FrvZgZKIpJ%2Bc%3D" alt="" loading="lazy"/></p>
<p>Webpack çš„æ’ä»¶åŒ…æ‹¬å†…ç½®æ’ä»¶å’Œé…ç½®ä¸­çš„æ’ä»¶ï¼ŒWebpack åœ¨å¤„ç†æ’ä»¶æ—¶ï¼Œä¼šå°†å®ƒä»¬éƒ½çº³å…¥åˆ°ç¼–è¯‘ç”Ÿå‘½å‘¨æœŸä¸­ã€‚</p>
<h2 data-id="heading-0">å†…ç½®æ’ä»¶</h2>
<p>å†…ç½®æ’ä»¶ä¼šåœ¨ webpack ç¼–è¯‘è¿‡ç¨‹çš„ç‰¹å®šé˜¶æ®µè‡ªåŠ¨æ‰§è¡Œã€‚å®ƒä»¬æ˜¯ç”± webpack æ ¸å¿ƒå›¢é˜Ÿç»´æŠ¤çš„ï¼Œç”¨äºå®ç° webpack çš„æ ¸å¿ƒåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå½“ webpack é…ç½®ä¸­è®¾ç½®äº† <code>mode</code> ä¸º 'production' æ—¶ï¼Œwebpack ä¼šè‡ªåŠ¨å¯ç”¨ä¸€äº›å†…ç½®æ’ä»¶ï¼Œå¦‚ <code>TerserPlugin</code>ï¼ˆç”¨äºä»£ç å‹ç¼©ï¼‰ç­‰ã€‚</p>
<h2 data-id="heading-1">é…ç½®æ’ä»¶</h2>
<p>åœ¨ webpack é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>plugins</code> æ•°ç»„ä¸­æ·»åŠ è‡ªå®šä¹‰æ’ä»¶æˆ–ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚è¿™äº›æ’ä»¶ä¼šåœ¨ webpack åˆå§‹åŒ–æ—¶æ³¨å†Œåˆ° Tappable é’©å­ä¸Šå¹¶åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ‰§è¡Œã€‚</p>
<h2 data-id="heading-2">Tappable åº“</h2>
<p>webpack çš„æ’ä»¶ç³»ç»Ÿæ˜¯åŸºäº Tapable åº“å®ç°çš„ï¼Œå®ƒæä¾›äº†å¤šç§é’©å­ï¼ˆhooksï¼‰ç±»å‹ï¼Œå¦‚ <code>SyncHook</code>ã€<code>AsyncSeriesHook</code> ç­‰ã€‚æ’ä»¶é€šè¿‡åœ¨è¿™äº›é’©å­ä¸Šæ³¨å†Œäº‹ä»¶å›è°ƒæ¥åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ã€‚æƒ³è¦æ·±å…¥ç†è§£webpack çš„æ’ä»¶ç³»ç»Ÿå°±éœ€è¦äº†è§£ Tappable æ˜¯æ€ä¹ˆå›äº‹ã€‚</p>
<p>Tapableæ˜¯ä¸€ä¸ªç”¨äºäº‹ä»¶å‘å¸ƒè®¢é˜…æ‰§è¡Œçš„åº“ï¼Œç±»ä¼¼äºNode.jsçš„EventEmitterï¼Œä½†æ›´åŠ å¼ºå¤§ï¼Œæ”¯æŒå¤šç§ç±»å‹çš„äº‹ä»¶é’©å­ï¼ˆHookï¼‰ã€‚åœ¨webpackä¸­ï¼ŒTapableè¢«ç”¨æ¥åˆ›å»ºå„ç§é’©å­ï¼Œè¿™äº›é’©å­åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­çš„ä¸åŒæ—¶æœºè¢«è§¦å‘ã€‚æ’ä»¶é€šè¿‡æ³¨å†Œè¿™äº›é’©å­æ¥ä»‹å…¥ç¼–è¯‘è¿‡ç¨‹ï¼Œå®ç°è‡ªå®šä¹‰åŠŸèƒ½ã€‚</p>
<p><strong>å®‰è£… Tappable</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm install tapable
</code></pre>
<p>ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªwebpackç¼–è¯‘è¿‡ç¨‹çš„ç®€å•ç¤ºä¾‹ï¼š</p>
<ol>
<li>å¼•å…¥Tapableåº“ï¼Œå¹¶åˆ›å»ºä¸€ç§ç±»å‹çš„é’©å­ï¼ˆä¾‹å¦‚SyncHookï¼ŒåŒæ­¥é’©å­ï¼‰ã€‚</li>
<li>å®šä¹‰ä¸€ä¸ªæ’ä»¶ï¼Œè¯¥æ’ä»¶åœ¨é’©å­ä¸Šæ³¨å†Œä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚</li>
<li>åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è§¦å‘é’©å­ï¼Œä»è€Œæ‰§è¡Œæ’ä»¶æ³¨å†Œçš„å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">SyncHook</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tapable'</span>);

<span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªåŒæ­¥é’©å­å®ä¾‹ï¼ŒæŒ‡å®šå‚æ•°åˆ—è¡¨</span>
<span class="hljs-keyword">const</span> hook = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([<span class="hljs-string">'arg1'</span>, <span class="hljs-string">'arg2'</span>]);

<span class="hljs-comment">// 2. æ³¨å†Œæ’ä»¶</span>
<span class="hljs-comment">// æ’ä»¶å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ªapplyæ–¹æ³•ï¼Œapplyæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼ˆæˆ‘ä»¬è¿™é‡Œç®€å•ç”¨hookå¯¹è±¡æ¨¡æ‹Ÿç¼–è¯‘å™¨ï¼‰</span>
<span class="hljs-comment">// åœ¨applyæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åœ¨é’©å­ä¸Šæ³¨å†Œä¸€ä¸ªå¤„ç†å‡½æ•°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPlugin</span> {
  <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {
    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">done</span> = hook; <span class="hljs-comment">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªdoneé’©å­</span>
    hook.<span class="hljs-title function_">tap</span>(<span class="hljs-string">'MyPlugin'</span>, <span class="hljs-function">(<span class="hljs-params">arg1, arg2</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'MyPluginè¢«è°ƒç”¨ï¼Œå‚æ•°ä¸º:'</span>, arg1, arg2);
    });
  }
}

<span class="hljs-comment">// 3. æ¨¡æ‹Ÿwebpackç¼–è¯‘å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Compiler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span> = {
      <span class="hljs-comment">// æˆ‘ä»¬è¿™é‡Œç”¨ä¸€ä¸ªSyncHookå®ä¾‹ä½œä¸ºdoneé’©å­</span>
      <span class="hljs-attr">done</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([<span class="hljs-string">'arg1'</span>, <span class="hljs-string">'arg2'</span>])
    };
  }

  <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿç¼–è¯‘è¿‡ç¨‹...</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹ç¼–è¯‘...'</span>);
    <span class="hljs-comment">// ç¼–è¯‘å®Œæˆåè§¦å‘doneé’©å­ï¼Œå¹¶ä¼ é€’å‚æ•°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">done</span>.<span class="hljs-title function_">call</span>(<span class="hljs-string">'å‚æ•°1'</span>, <span class="hljs-string">'å‚æ•°2'</span>);
  }
}

<span class="hljs-comment">// 4. ä½¿ç”¨æ’ä»¶</span>
<span class="hljs-keyword">const</span> compiler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Compiler</span>();
<span class="hljs-keyword">const</span> myPlugin = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPlugin</span>();
myPlugin.<span class="hljs-title function_">apply</span>(compiler); <span class="hljs-comment">// æ’ä»¶æ³¨å†Œï¼Œå°†å¤„ç†å‡½æ•°æŒ‚è½½åˆ°é’©å­ä¸Š</span>

<span class="hljs-comment">// 5. å¼€å§‹ç¼–è¯‘ï¼Œè§¦å‘é’©å­</span>
compiler.<span class="hljs-title function_">run</span>();
</code></pre>
<p>ä¸Šé¢ä½¿ç”¨äº† Tappable ä¸­çš„ SyncHook åŒæ­¥é’©å­å®ä¾‹ï¼Œå…¶å® Tapable æä¾›äº†å¤šç§ç±»å‹çš„ Hookï¼ˆé’©å­ï¼‰ï¼Œç”¨äºä¸åŒçš„åœºæ™¯ï¼Œå¯ä»¥è‡ªè¡Œäº†è§£ï¼Œä¸æ˜¯æœ¬ç¯‡æ–‡ç« çš„é‡ç‚¹ï¼Œæœ¬ç¯‡æ–‡ç« åªä»¥æ¯”è¾ƒç®€å•çš„ SyncHook åŒæ­¥é’©å­æ¥ç†è§£æ’ä»¶çš„å®ç°ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªä¸œè¥¿éœ€è¦åŒºåˆ†ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> hook = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([<span class="hljs-string">'arg1'</span>, <span class="hljs-string">'arg2'</span>]); <span class="hljs-comment">// Tappable çš„é’©å­</span>
compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">done</span> = hook; <span class="hljs-comment">// webpack çš„é’©å­</span>
</code></pre>
<h3 data-id="heading-3">Tapable ä¸­ SyncHook é’©å­çš„å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SyncHook</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">args = []</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_args</span> = args; <span class="hljs-comment">// å‚æ•°åç§°æ•°ç»„</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taps</span> = [];    <span class="hljs-comment">// å­˜å‚¨æ³¨å†Œçš„ webpack æ’ä»¶</span>
  }

  <span class="hljs-comment">// æ³¨å†ŒåŒæ­¥æ’ä»¶</span>
  <span class="hljs-title function_">tap</span>(<span class="hljs-params">name, fn</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taps</span>.<span class="hljs-title function_">push</span>({
      name,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'sync'</span>,
      fn
    });
  }

  <span class="hljs-comment">// è§¦å‘é’©å­æ‰§è¡Œ</span>
  <span class="hljs-title function_">call</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-comment">// ç¡®ä¿å‚æ•°æ•°é‡æ­£ç¡®</span>
    <span class="hljs-keyword">const</span> finalArgs = args.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_args</span>.<span class="hljs-property">length</span>);

    <span class="hljs-comment">// ä¾æ¬¡æ‰§è¡Œæ‰€æœ‰æ³¨å†Œçš„å‡½æ•°</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">taps</span>.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> tap = <span class="hljs-variable language_">this</span>.<span class="hljs-property">taps</span>[i];
      tap.<span class="hljs-property">fn</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, finalArgs);
    }
  }
}
</code></pre>
<h2 data-id="heading-4">ç¼–è¯‘è¿‡ç¨‹ä¸­æ’ä»¶çš„è°ƒç”¨åŸç†</h2>
<p><strong>Compiler ç±»å®ç°</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–ç‰ˆçš„ Compiler ç±»å®šä¹‰</span>
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Tapable</span>, <span class="hljs-title class_">SyncHook</span>, <span class="hljs-title class_">AsyncSeriesHook</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tapable'</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Compiler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Tapable</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-variable language_">super</span>();

    <span class="hljs-comment">// 1. æ ¸å¿ƒå±æ€§åˆå§‹åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span> = context; <span class="hljs-comment">// ä¸Šä¸‹æ–‡è·¯å¾„</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {}; <span class="hljs-comment">// é…ç½®é€‰é¡¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_createHooks</span>(); <span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸé’©å­</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// ç¼–è¯‘å™¨åç§°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentCompilation</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// çˆ¶çº§ compilation</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// æ ¹ç¼–è¯‘å™¨</span>

    <span class="hljs-comment">// 2. æ–‡ä»¶ç³»ç»Ÿ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputFileSystem</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// è¾“å…¥æ–‡ä»¶ç³»ç»Ÿ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputFileSystem</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// è¾“å‡ºæ–‡ä»¶ç³»ç»Ÿ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">intermediateFileSystem</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ä¸­é—´æ–‡ä»¶ç³»ç»Ÿ</span>

    <span class="hljs-comment">// 3. è®°å½•å’Œç¼“å­˜</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">records</span> = {}; <span class="hljs-comment">// æ„å»ºè®°å½•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">watchFileSystem</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç›‘å¬æ–‡ä»¶ç³»ç»Ÿ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// ç¼“å­˜</span>

    <span class="hljs-comment">// 4. çŠ¶æ€ç®¡ç†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ˜¯å¦æ­£åœ¨è¿è¡Œ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">watchMode</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ˜¯å¦ä¸ºç›‘å¬æ¨¡å¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">idle</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ˜¯å¦ç©ºé—²</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">modifiedFiles</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// ä¿®æ”¹çš„æ–‡ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">removedFiles</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// åˆ é™¤çš„æ–‡ä»¶</span>
  }

  <span class="hljs-comment">// åˆ›å»ºç”Ÿå‘½å‘¨æœŸé’©å­</span>
  <span class="hljs-title function_">_createHooks</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// åˆå§‹åŒ–é˜¶æ®µ</span>
      <span class="hljs-attr">initialize</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([]),

      <span class="hljs-comment">// æ„å»ºå¼€å§‹å‰</span>
      <span class="hljs-attr">environment</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([]),
      <span class="hljs-attr">afterEnvironment</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([]),
      <span class="hljs-attr">entryOption</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([<span class="hljs-string">'context'</span>, <span class="hljs-string">'entry'</span>]),

      <span class="hljs-comment">// æ„å»ºè¿‡ç¨‹</span>
      <span class="hljs-attr">beforeRun</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncSeriesHook</span>([<span class="hljs-string">'compiler'</span>]),
      <span class="hljs-attr">run</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncSeriesHook</span>([<span class="hljs-string">'compiler'</span>]),
      <span class="hljs-attr">beforeCompile</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncSeriesHook</span>([<span class="hljs-string">'params'</span>]),
      <span class="hljs-attr">compile</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([<span class="hljs-string">'params'</span>]),
      <span class="hljs-attr">thisCompilation</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([<span class="hljs-string">'compilation'</span>, <span class="hljs-string">'params'</span>]),
      <span class="hljs-attr">compilation</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([<span class="hljs-string">'compilation'</span>, <span class="hljs-string">'params'</span>]),
      <span class="hljs-attr">make</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncParallelHook</span>([<span class="hljs-string">'compilation'</span>]),
      <span class="hljs-attr">afterCompile</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncSeriesHook</span>([<span class="hljs-string">'compilation'</span>]),

      <span class="hljs-comment">// è¾“å‡ºé˜¶æ®µ</span>
      <span class="hljs-attr">emit</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncSeriesHook</span>([<span class="hljs-string">'compilation'</span>]),
      <span class="hljs-attr">afterEmit</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncSeriesHook</span>([<span class="hljs-string">'compilation'</span>]),

      <span class="hljs-comment">// å®Œæˆé˜¶æ®µ</span>
      <span class="hljs-attr">done</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncSeriesHook</span>([<span class="hljs-string">'stats'</span>]),
      <span class="hljs-attr">failed</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([<span class="hljs-string">'error'</span>]),
      <span class="hljs-attr">invalid</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([<span class="hljs-string">'filename'</span>, <span class="hljs-string">'changeTime'</span>]),
      <span class="hljs-attr">watchClose</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([]),
      <span class="hljs-attr">shutdown</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncSeriesHook</span>([])
    };
  }

  <span class="hljs-comment">// è¿è¡Œæ„å»º</span>
  <span class="hljs-title function_">run</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-comment">// æ„å»ºæµç¨‹å®ç°</span>
     <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Compiler is already running'</span>));
    }

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">finalCallback</span> = (<span class="hljs-params">err, stats</span>) =&gt; {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_cleanup</span>();
      <span class="hljs-keyword">if</span> (callback) <span class="hljs-title function_">callback</span>(err, stats);
    };

    <span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">running</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸš€ ========== å¼€å§‹æ„å»ºæµç¨‹ ==========\n'</span>);

    <span class="hljs-comment">// æ‰§è¡Œæ„å»ºæµç¨‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_run</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-title function_">finalCallback</span>(err);

      <span class="hljs-comment">// ç”Ÿæˆç»Ÿè®¡ä¿¡æ¯</span>
      <span class="hljs-keyword">const</span> stats = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_getStats</span>(startTime);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nğŸ“Š ç”Ÿæˆæ„å»ºç»Ÿè®¡ä¿¡æ¯'</span>);

      <span class="hljs-comment">// è§¦å‘ done é’©å­</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">done</span>.<span class="hljs-title function_">callAsync</span>(stats, <span class="hljs-function">(<span class="hljs-params">hookErr</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (hookErr) <span class="hljs-keyword">return</span> <span class="hljs-title function_">finalCallback</span>(hookErr);
        <span class="hljs-title function_">finalCallback</span>(<span class="hljs-literal">null</span>, stats);
      });
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">_run</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 1. è§¦å‘ beforeRun é’©å­</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ“‹ é˜¶æ®µ 1: å‡†å¤‡æ„å»ºç¯å¢ƒ'</span>);
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">beforeRun</span>.<span class="hljs-title function_">promise</span>(<span class="hljs-variable language_">this</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   âœ… beforeRun å®Œæˆ\n'</span>);

      <span class="hljs-comment">// 2. è§¦å‘ run é’©å­</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ“‹ é˜¶æ®µ 2: å¯åŠ¨æ„å»ºæµç¨‹'</span>);
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">run</span>.<span class="hljs-title function_">promise</span>(<span class="hljs-variable language_">this</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   âœ… run å®Œæˆ\n'</span>);

      <span class="hljs-comment">// 3. è¯»å–è®°å½•ï¼ˆç”¨äºå¢é‡æ„å»ºï¼‰</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ“‹ é˜¶æ®µ 3: è¯»å–æ„å»ºè®°å½•'</span>);
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_readRecords</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   âœ… è®°å½•è¯»å–å®Œæˆ\n'</span>);

      <span class="hljs-comment">// 4. æ‰§è¡Œç¼–è¯‘</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ“‹ é˜¶æ®µ 4: æ‰§è¡Œç¼–è¯‘'</span>);
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_compile</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   âœ… ç¼–è¯‘å®Œæˆ\n'</span>);

      <span class="hljs-title function_">callback</span>();

    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'âŒ æ„å»ºè¿‡ç¨‹å‡ºé”™:'</span>, error);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">failed</span>.<span class="hljs-title function_">call</span>(error);
      <span class="hljs-title function_">callback</span>(error);
    }
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">_readRecords</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">recordsInputPath</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">recordsOutputPath</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ“– è¯»å–æ„å»ºè®°å½•æ–‡ä»¶...'</span>);
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">50</span>));
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   âœ… æ„å»ºè®°å½•åŠ è½½å®Œæˆ'</span>);
    }
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">_compile</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»ºç¼–è¯‘å‚æ•°</span>
    <span class="hljs-keyword">const</span> params = {
      <span class="hljs-attr">normalModuleFactory</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_createNormalModuleFactory</span>(),
      <span class="hljs-attr">contextModuleFactory</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_createContextModuleFactory</span>()
    };

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ”§ åˆ›å»ºç¼–è¯‘å‚æ•°'</span>);

    <span class="hljs-comment">// è§¦å‘ beforeCompile é’©å­</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ¯ è§¦å‘ beforeCompile é’©å­'</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">beforeCompile</span>.<span class="hljs-title function_">promise</span>(params);

    <span class="hljs-comment">// è§¦å‘ compile é’©å­</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ¯ è§¦å‘ compile é’©å­'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">compile</span>.<span class="hljs-title function_">call</span>(params);

    <span class="hljs-comment">// åˆ›å»º compilation å¯¹è±¡</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ—ï¸  åˆ›å»º compilation å¯¹è±¡'</span>);
    <span class="hljs-keyword">const</span> compilation = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_createCompilation</span>();
    compilation.<span class="hljs-property">params</span> = params;

    <span class="hljs-comment">// è§¦å‘ compilation ç›¸å…³é’©å­</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">thisCompilation</span>.<span class="hljs-title function_">call</span>(compilation, params);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">compilation</span>.<span class="hljs-title function_">call</span>(compilation, params);

    <span class="hljs-comment">// è§¦å‘ make é’©å­ - æ ¸å¿ƒæ„å»ºé˜¶æ®µ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ¯ è§¦å‘ make é’©å­ - å¼€å§‹æ„å»ºæ¨¡å—'</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">make</span>.<span class="hljs-title function_">promise</span>(compilation);

    <span class="hljs-comment">// å¯†å° compilationï¼ˆå®Œæˆæ¨¡å—æ„å»ºï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ”’ å¯†å° compilation'</span>);
    <span class="hljs-keyword">await</span> compilation.<span class="hljs-title function_">seal</span>();

    <span class="hljs-comment">// è§¦å‘ afterCompile é’©å­</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ¯ è§¦å‘ afterCompile é’©å­'</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">afterCompile</span>.<span class="hljs-title function_">promise</span>(compilation);

    <span class="hljs-comment">// ç”Ÿæˆèµ„æº</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ“„ ç”Ÿæˆè¾“å‡ºèµ„æº'</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_emitAssets</span>(compilation);
  }

  <span class="hljs-title function_">_createNormalModuleFactory</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ­ åˆ›å»º NormalModuleFactory'</span>);
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'NormalModuleFactory'</span>,
      <span class="hljs-attr">context</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>
    };
  }

  <span class="hljs-title function_">_createContextModuleFactory</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ­ åˆ›å»º ContextModuleFactory'</span>);
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'ContextModuleFactory'</span>
    };
  }

  <span class="hljs-title function_">_cleanup</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ§¹ æ¸…ç†æ„å»ºç¯å¢ƒ'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileTimestamps</span>.<span class="hljs-title function_">clear</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contextTimestamps</span>.<span class="hljs-title function_">clear</span>();
  }

  <span class="hljs-comment">// åˆ›å»º compilation</span>
  <span class="hljs-title function_">createCompilation</span>(<span class="hljs-params">params</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Compilation</span>(<span class="hljs-variable language_">this</span>, params);
  }

  <span class="hljs-comment">// åˆ›å»ºç¼–è¯‘å‚æ•°</span>
  <span class="hljs-title function_">newCompilationParams</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">normalModuleFactory</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createNormalModuleFactory</span>(),
      <span class="hljs-attr">contextModuleFactory</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createContextModuleFactory</span>()
    };
  }
}
</code></pre>
<p><strong>webpack æ–¹æ³•å®ç°</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Compiler</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./Compiler'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">webpack</span>(<span class="hljs-params">config</span>) {
  <span class="hljs-comment">// åˆå¹¶é…ç½®ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œç›´æ¥ä½¿ç”¨ä¼ å…¥çš„é…ç½®</span>
  <span class="hljs-keyword">const</span> options = config;
  <span class="hljs-comment">// åˆ›å»ºCompilerå®ä¾‹ï¼Œä¼ å…¥ä¸Šä¸‹æ–‡ï¼ˆé€šå¸¸ä¸ºå½“å‰å·¥ä½œç›®å½•ï¼‰</span>
  <span class="hljs-keyword">const</span> compiler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Compiler</span>(options.<span class="hljs-property">context</span> || process.<span class="hljs-title function_">cwd</span>());
  <span class="hljs-comment">// å°†é…ç½®èµ‹å€¼ç»™compiler</span>
  compiler.<span class="hljs-property">options</span> = options;
  <span class="hljs-comment">// æ³¨å†Œé…ç½®ä¸­çš„æ’ä»¶</span>
  <span class="hljs-keyword">if</span> (options.<span class="hljs-property">plugins</span> &amp;&amp; <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(options.<span class="hljs-property">plugins</span>)) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> plugin <span class="hljs-keyword">of</span> options.<span class="hljs-property">plugins</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> plugin === <span class="hljs-string">'function'</span>) {
        plugin.<span class="hljs-title function_">call</span>(compiler, compiler);
      } <span class="hljs-keyword">else</span> {
        plugin.<span class="hljs-title function_">apply</span>(compiler);
      }
    }
  }
  <span class="hljs-comment">// è¿”å›compilerå®ä¾‹</span>
  <span class="hljs-keyword">return</span> compiler;
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = webpack;
</code></pre>
<p><strong>è¿è¡Œç¼–è¯‘</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./webpack'</span>);

<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">context</span>: __dirname,
  <span class="hljs-attr">plugins</span>: [
    {
      <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {
        compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">done</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">'MyPlugin'</span>, <span class="hljs-function">(<span class="hljs-params">stats</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'MyPlugin: æ„å»ºå®Œæˆï¼'</span>);
        });
      }
    }
  ]
};

<span class="hljs-keyword">const</span> compiler = <span class="hljs-title function_">webpack</span>(config);

compiler.<span class="hljs-title function_">run</span>(<span class="hljs-function">(<span class="hljs-params">err, stats</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ„å»ºå¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ„å»ºæˆåŠŸï¼Œç»Ÿè®¡ä¿¡æ¯:'</span>, stats.<span class="hljs-title function_">toString</span>());
});
</code></pre>
<p><strong>æˆ‘ä»¬é…ç½®çš„è‡ªå®šä¹‰æˆ–ç¬¬ä¸‰æ–¹æ’ä»¶ä¼šè¢«å­˜å‚¨åœ¨</strong> <strong>Tapable é’©å­å®ä¾‹çš„ taps é˜Ÿåˆ—ä¸­ï¼Œç„¶åæœ€ç»ˆæ³¨å†Œåˆ° webpack ç¼–è¯‘å™¨ï¼ˆcomplierï¼‰çš„ä¸åŒçš„é’©å­é‡Œï¼Œæœ€ååœ¨ webpack ç¼–è¯‘è¿‡ç¨‹ä¸­çš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨ã€‚</strong></p>
<p><strong>ä»¥ webpack compile é’©å­æ€»ç»“è¿è¡Œè¿‡ç¨‹</strong></p>
<ul>
<li>åˆ›å»º Tappable åŒæ­¥é’©å­å®ä¾‹ï¼ŒæŒ‡å®šå‚æ•°åˆ—è¡¨</li>
<li>æ³¨å†Œæ’ä»¶</li>
<li>è§¦å‘ compile é’©å­</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Compiler ç±»</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Compiler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Tapable</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-variable language_">super</span>();

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_createHooks</span>(); <span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸé’©å­</span>
  }
  <span class="hljs-comment">// åˆ›å»ºç”Ÿå‘½å‘¨æœŸé’©å­</span>
  <span class="hljs-title function_">_createHooks</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// åˆ›å»º Tappable åŒæ­¥é’©å­å®ä¾‹ï¼ŒæŒ‡å®šå‚æ•°åˆ—è¡¨</span>
      <span class="hljs-attr">initialize</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncHook</span>([]),
    };
  }

  <span class="hljs-comment">// è¿è¡Œæ„å»º</span>
  <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è§¦å‘ compile é’©å­ï¼Œæ­¤å¤„ä¼šè°ƒç”¨æ’ä»¶é…ç½®çš„å›è°ƒå‡½æ•°</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'   ğŸ¯ è§¦å‘ compile é’©å­'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-property">compile</span>.<span class="hljs-title function_">call</span>(params);
  }
}

<span class="hljs-comment">// webpack æ’ä»¶é…ç½®</span>
<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">plugins</span>: [
    {
      <span class="hljs-comment">// æ³¨å†Œæ’ä»¶</span>
      <span class="hljs-comment">// å‘åŒä¸€ä¸ªé’©å­å¤šæ³¨å†Œå‡ ä¸ªå›è°ƒå‡½æ•°</span>
      <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {
        compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">compile</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">'MyPlugin1'</span>, <span class="hljs-function">(<span class="hljs-params">stats</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'MyPlugin1: compileï¼'</span>);
        });
        compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">compile</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">'MyPlugin3'</span>, <span class="hljs-function">(<span class="hljs-params">stats</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'MyPlugin2: compileï¼'</span>);
        });
        compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">compile</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">'MyPlugin3'</span>, <span class="hljs-function">(<span class="hljs-params">stats</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'MyPlugin3: compileï¼'</span>);
        });
      }
    }
  ]
};
</code></pre>
<p>å¥½äº†ï¼Œè¿™å°±æ˜¯æˆ‘å¯¹ webpack æ’ä»¶çš„ç†è§£åŒ…æ‹¬é…ç½®ã€æ³¨å†Œã€å›è°ƒçš„æ•´ä¸ªæµç¨‹ï¼Œå¦‚æœæœ‰ä¸å¯¹çš„åœ°æ–¹æ•¬è¯·æ–§æ­£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mavençˆ¶å­æ¨¡å—Deployçš„é‚£äº›å‘]]></title>    <link>https://juejin.cn/post/7574069837531922468</link>    <guid>https://juejin.cn/post/7574069837531922468</guid>    <pubDate>2025-11-19T05:50:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574069837531922468" data-draft-id="7574007967885852735" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mavençˆ¶å­æ¨¡å—Deployçš„é‚£äº›å‘"/> <meta itemprop="keywords" content="åç«¯,maven"/> <meta itemprop="datePublished" content="2025-11-19T05:50:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mavençˆ¶å­æ¨¡å—Deployçš„é‚£äº›å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T05:50:23.000Z" title="Wed Nov 19 2025 05:50:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    18
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èµ·å› </h2>
<p>å‰ä¸¤å¤©é‡åˆ°ä¸ªæŒºå‘çš„é—®é¢˜ã€‚æˆ‘ä»¬æœ‰ä¸ªåŸºç¡€æœåŠ¡æ¡†æ¶å«financial-platform,æ˜¯å…¸å‹çš„çˆ¶å­ç»“æ„,çˆ¶å·¥ç¨‹ä¸‹é¢æŒ‚äº†common-utilsã€message-clientã€db-starterè¿™å‡ ä¸ªå­æ¨¡å—ã€‚è¿™æ¬¡éœ€è¦å‡çº§message-clientæ¨¡å—,å¢åŠ äº†RocketMQçš„ä¸€äº›æ–°ç‰¹æ€§,ç‰ˆæœ¬ä»1.2.5-SNAPSHOTæ”¹åˆ°1.3.0-SNAPSHOTã€‚</p>
<p>å½“æ—¶æƒ³çš„æŒºç®€å•çš„,å°±æ˜¯æŠŠæ•´ä¸ªé¡¹ç›®çš„ç‰ˆæœ¬éƒ½æ”¹äº†,ç„¶ååªdeployè¿™ä¸ªmessage-clientæ¨¡å—ä¸Šå»å°±è¡Œäº†ã€‚æ¯•ç«Ÿè¿™ä¸ªæ¨¡å—çœ‹èµ·æ¥æŒºç‹¬ç«‹çš„,ä¹Ÿä¸ä¾èµ–å…¶å®ƒå…„å¼Ÿæ¨¡å—,åº”è¯¥æ²¡é—®é¢˜å§?</p>
<p>ç»“æœè¢«ç°å®æ•™è‚²äº†ã€‚</p>
<h2 data-id="heading-1">æ‹‰å–å¤±è´¥</h2>
<p>æ”¹å®Œç‰ˆæœ¬å·,deployä¸Šå»å,ä¸šåŠ¡ç³»ç»Ÿå¼•ç”¨è¿™ä¸ªmessage-clientçš„æ—¶å€™å°±æŠ¥é”™äº†:</p>
<pre><code class="hljs language-arduino" lang="arduino">Could <span class="hljs-keyword">not</span> find artifact com.financial:message-client:jar:<span class="hljs-number">1.3</span><span class="hljs-number">.0</span>-SNAPSHOT
</code></pre>
<p>æˆ‘å½“æ—¶å°±æ‡µäº†,æ˜æ˜åˆšdeployä¸Šå»å•Š,æ€ä¹ˆå°±æ‰¾ä¸åˆ°å‘¢? å»Nexusç§æœä¸Šçœ‹,message-client-1.3.0-SNAPSHOT.jarç¡®å®åœ¨é‚£å„¿èººç€,ä½†å°±æ˜¯æ‹‰ä¸ä¸‹æ¥ã€‚</p>
<p>åæ¥å‘ç°Mavenåœ¨å°è¯•ä¸‹è½½ä¾èµ–çš„æ—¶å€™ä¼šæŠ¥pomæ‰¾ä¸åˆ°çš„è­¦å‘Š:</p>
<pre><code class="hljs language-arduino" lang="arduino">Could <span class="hljs-keyword">not</span> find artifact com.financial:financial-platform:pom:<span class="hljs-number">1.3</span><span class="hljs-number">.0</span>-SNAPSHOT
</code></pre>
<h2 data-id="heading-2">æç„¶å¤§æ‚Ÿ</h2>
<p>è¿™æ—¶å€™æ‰ååº”è¿‡æ¥,è™½ç„¶message-clientä¸ä¾èµ–common-utilsæˆ–db-starterè¿™äº›å…„å¼Ÿæ¨¡å—,ä½†æ˜¯å®ƒçš„pom.xmlé‡Œæœ‰è¿™ä¹ˆä¸€æ®µ:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.financial<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>financial-platform<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
</code></pre>
<p>Mavenæ‹‰å–message-clientçš„æ—¶å€™,ä¼šå…ˆå»æ‰¾å®ƒçš„çˆ¶pomã€‚çˆ¶pomæ‰¾ä¸åˆ°,åé¢çš„äº‹å„¿å°±éƒ½é»„äº†ã€‚</p>
<p>æ•´ä¸ªä¾èµ–è§£æçš„æµç¨‹æ˜¯è¿™æ ·çš„:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant B as ä¸šåŠ¡ç³»ç»Ÿ
    participant N as Nexusç§æœ
    participant P as financial-platform
    participant M as message-client
    
    B-&gt;&gt;N: è¯·æ±‚message-client:1.3.0-SNAPSHOT
    N-&gt;&gt;N: æ‰¾åˆ°message-clientçš„jar
    N-&gt;&gt;N: è¯»å–message-clientçš„pom
    N-&gt;&gt;P: éœ€è¦financial-platform:1.3.0-SNAPSHOTçš„pom
    P--&gt;&gt;N: 404 Not Found
    N--&gt;&gt;B: ä¾èµ–è§£æå¤±è´¥
</code></pre>
<h2 data-id="heading-3">ä¸ºä»€ä¹ˆéœ€è¦çˆ¶pom</h2>
<p>æœ‰äººå¯èƒ½ä¼šé—®,message-clientéƒ½å·²ç»æ˜¯ä¸ªå®Œæ•´çš„jaräº†,ä¸ºä»€ä¹ˆè¿˜è¦çˆ¶pomå‘¢?</p>
<p>å…¶å®çˆ¶pomé‡Œä¼šå®šä¹‰å¾ˆå¤šä¸œè¥¿:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- financial-platformçˆ¶pomé‡Œé€šå¸¸æœ‰è¿™äº› --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">spring-boot.version</span>&gt;</span>2.7.18<span class="hljs-tag">&lt;/<span class="hljs-name">spring-boot.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">rocketmq.version</span>&gt;</span>4.9.7<span class="hljs-tag">&lt;/<span class="hljs-name">rocketmq.version</span>&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ç»Ÿä¸€ç®¡ç†RocketMQã€Redisã€PostgreSQLç­‰ç‰ˆæœ¬ --&gt;</span>
        ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">pluginManagement</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ’ä»¶é…ç½® --&gt;</span>
        ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">pluginManagement</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<p>message-clientçš„pomå¯èƒ½ä¼šå¼•ç”¨çˆ¶pomé‡Œå®šä¹‰çš„å±æ€§å’Œé…ç½®ã€‚Mavenéœ€è¦æŠŠçˆ¶å­pomåˆå¹¶èµ·æ¥,æ‰èƒ½å¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„ã€å¯æ‰§è¡Œçš„pomã€‚</p>
<p>Mavenæ„å»ºæœ‰æ•ˆpomçš„è¿‡ç¨‹å¾ˆç®€å•:è§£æå­æ¨¡å—pomæ—¶,å¦‚æœå‘ç°æœ‰parentæ ‡ç­¾,å°±å»Nexusæ‰¾çˆ¶pomã€‚æ‰¾åˆ°ååˆå¹¶çˆ¶å­é…ç½®,å¦‚æœçˆ¶pomè¿˜æœ‰parent,å°±ç»§ç»­å¾€ä¸Šæ‰¾ã€‚ä¸€ç›´æ‰¾åˆ°æœ€é¡¶å±‚,ç„¶åä»ä¸Šåˆ°ä¸‹åˆå¹¶æ‰€æœ‰é…ç½®,æœ€åç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„æœ‰æ•ˆpomã€‚</p>
<h2 data-id="heading-4">æ­£ç¡®çš„åšæ³•</h2>
<p>æ‰€ä»¥æ­£ç¡®çš„åšæ³•æ˜¯,æŠŠçˆ¶pomå’Œmessage-clientéƒ½deployä¸Šå»:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨financial-platformçˆ¶å·¥ç¨‹ç›®å½•æ‰§è¡Œ</span>
mvn clean deploy
</code></pre>
<p>è¿™æ ·Mavenä¼šæŠŠçˆ¶pomå’Œæ‰€æœ‰å­æ¨¡å—éƒ½å‘å¸ƒåˆ°Nexusã€‚å³ä½¿ä½ åªæ”¹äº†message-client,çˆ¶pomä¹Ÿå¾—å‘ä¸Šå»,å› ä¸ºç‰ˆæœ¬å·å˜äº†ã€‚</p>
<h2 data-id="heading-5">Mavençš„ç»§æ‰¿å’Œèšåˆ</h2>
<p>è¯´åˆ°è¿™å„¿,é¡ºä¾¿èŠèŠMavençš„ç»§æ‰¿å’Œèšåˆ,å¾ˆå¤šäººå®¹æ˜“ææ··ã€‚</p>
<p>ç»§æ‰¿æ˜¯å­æ¨¡å—ç»§æ‰¿çˆ¶pomçš„é…ç½®,é€šè¿‡<code>&lt;parent&gt;</code>æ ‡ç­¾å®ç°ã€‚èšåˆæ˜¯çˆ¶å·¥ç¨‹ç®¡ç†å¤šä¸ªå­æ¨¡å—,é€šè¿‡<code>&lt;modules&gt;</code>æ ‡ç­¾å®ç°ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph ç»§æ‰¿å…³ç³»
    P1[financial-platform&lt;br/&gt;é…ç½®å’Œä¾èµ–ç‰ˆæœ¬] -.ç»§æ‰¿.-&gt; C1[common-utils&lt;br/&gt;ä½¿ç”¨çˆ¶é…ç½®]
    P1 -.ç»§æ‰¿.-&gt; C2[message-client&lt;br/&gt;ä½¿ç”¨çˆ¶é…ç½®]
    P1 -.ç»§æ‰¿.-&gt; C3[db-starter&lt;br/&gt;ä½¿ç”¨çˆ¶é…ç½®]
    end
    
    subgraph èšåˆå…³ç³»
    P2[financial-platform] --èšåˆ--&gt; C4[common-utils]
    P2 --èšåˆ--&gt; C5[message-client]
    P2 --èšåˆ--&gt; C6[db-starter]
    end
    
    style P1 fill:#e1f5ff
    style P2 fill:#ffe1f5
</code></pre>
<p>çˆ¶pomé‡Œæ˜¯è¿™æ ·çš„:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- èšåˆ: ç®¡ç†æœ‰å“ªäº›å­æ¨¡å— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>common-utils<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>message-client<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>db-starter<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç»§æ‰¿: æä¾›ç»™å­æ¨¡å—çš„é…ç½® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.rocketmq<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>rocketmq-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${rocketmq.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
</code></pre>
<p>å­æ¨¡å—message-clienté‡Œæ˜¯è¿™æ ·çš„:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç»§æ‰¿: æŒ‡å®šä»å“ªä¸ªçˆ¶pomç»§æ‰¿ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.financial<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>financial-platform<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å®é™…ä½¿ç”¨çš„ä¾èµ–,ç‰ˆæœ¬ä»çˆ¶pomç»§æ‰¿ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.rocketmq<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>rocketmq-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ç‰ˆæœ¬å·ä»çˆ¶pomçš„dependencyManagementç»§æ‰¿ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p>è¿™ä¸¤ä¸ªæ˜¯ç‹¬ç«‹çš„æœºåˆ¶,å¯ä»¥å•ç‹¬ä½¿ç”¨ã€‚ä½†å¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬ä¼šä¸€èµ·ç”¨,æ—¢è®©çˆ¶å·¥ç¨‹èšåˆç®¡ç†å­æ¨¡å—,åˆè®©å­æ¨¡å—ç»§æ‰¿çˆ¶é…ç½®ã€‚</p>
<h2 data-id="heading-6">åæ¥æˆ‘ä»¬çš„å¤„ç†</h2>
<p>æˆ‘ä»¬ç°åœ¨çš„åšæ³•æ˜¯,æ¯æ¬¡ç‰ˆæœ¬å‡çº§,ä¸ç®¡æ”¹äº†å‡ ä¸ªæ¨¡å—,éƒ½æ‰§è¡Œå®Œæ•´çš„deployã€‚è™½ç„¶ä¼šæŠŠcommon-utilsã€message-clientã€db-starteréƒ½å‘ä¸€é,æœ‰ç‚¹æµªè´¹,ä½†èµ·ç ä¸ä¼šå‡ºå¹ºè›¾å­ã€‚</p>
<p>å¦å¤–åœ¨Jenkinsçš„CIæµç¨‹é‡ŒåŠ äº†ä¸ªæ£€æŸ¥,å¦‚æœpomçš„ç‰ˆæœ¬å·å˜äº†,å¿…é¡»å…¨é‡deploy,ä¸å…è®¸åªdeployå•ä¸ªæ¨¡å—ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># Jenkinsé‡Œçš„æ£€æŸ¥è„šæœ¬</span>
VERSION=$(mvn <span class="hljs-built_in">help</span>:evaluate -Dexpression=project.version -q -DforceStdout)

<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$VERSION</span> == *<span class="hljs-string">"SNAPSHOT"</span>* ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ°SNAPSHOTç‰ˆæœ¬: <span class="hljs-variable">$VERSION</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰§è¡Œå…¨é‡deployåˆ°Nexus"</span>
    mvn clean deploy -DskipTests
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Releaseç‰ˆæœ¬: <span class="hljs-variable">$VERSION</span>"</span> 
    <span class="hljs-comment"># releaseç‰ˆæœ¬èµ°å‘å¸ƒå®¡æ‰¹æµç¨‹</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"éœ€è¦å®¡æ‰¹åæ‰èƒ½deploy"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
<h2 data-id="heading-7">å®é™…æ¡ˆä¾‹åˆ†æ</h2>
<p>æˆ‘ä»¬å†çœ‹ä¸€ä¸ªå®é™…çš„åœºæ™¯ã€‚å‡è®¾ä¸šåŠ¡ç³»ç»Ÿorder-serviceéœ€è¦å¼•ç”¨æˆ‘ä»¬å‡çº§åçš„message-client:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- order-serviceçš„pom.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.financial<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>message-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p>Mavenæ„å»ºorder-serviceçš„æ—¶å€™,ä¼šå…ˆä»æœ¬åœ°æˆ–Nexusä¸‹è½½message-clientçš„jarå’Œpomã€‚è¯»å–message-clientçš„pomæ—¶å‘ç°å®ƒä¾èµ–çˆ¶pom financial-platform:1.3.0,äºæ˜¯ç»§ç»­å»æ‰¾çˆ¶pomã€‚å¦‚æœçˆ¶pomä¸å­˜åœ¨,æ•´ä¸ªæ„å»ºå°±å¤±è´¥äº†ã€‚æ‰¾åˆ°çˆ¶pomå,Mavenä¼šåˆå¹¶çˆ¶å­é…ç½®,ç„¶åé€’å½’è§£ææ‰€æœ‰ä¼ é€’ä¾èµ–,æœ€åæ‰èƒ½æˆåŠŸæ„å»ºã€‚</p>
<p>æ‰€ä»¥ä½ çœ‹,è¿™æ˜¯ä¸ªé“¾å¼ååº”ã€‚ä¸­é—´ä»»ä½•ä¸€ç¯ç¼ºå¤±,æ•´ä¸ªæ„å»ºéƒ½ä¼šæŒ‚æ‰ã€‚</p>
<p>å°±è¿™æ ·å§,å¸Œæœ›èƒ½å¸®åˆ°é‡åˆ°ç±»ä¼¼é—®é¢˜çš„æœ‹å‹ã€‚è¿™ä¸ªå‘æˆ‘ä»¬å·²ç»è¸©è¿‡äº†,ä½ ä»¬å°±åˆ«å†è¸©äº†ã€‚ä¸‹æ¬¡å‡çº§message-clientåŠ æ–°åŠŸèƒ½çš„æ—¶å€™,è®°å¾—æŠŠæ•´ä¸ªframeworkéƒ½deployä¸Šå»,çœå¾—ä¸šåŠ¡ç³»ç»Ÿé‚£è¾¹æ‰¾ä½ éº»çƒ¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSï¼šç»˜åˆ¶å‡ ä½•å›¾å½¢ (Shape)]]></title>    <link>https://juejin.cn/post/7573989365614034944</link>    <guid>https://juejin.cn/post/7573989365614034944</guid>    <pubDate>2025-11-19T05:42:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573989365614034944" data-draft-id="7573978809365512192" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSï¼šç»˜åˆ¶å‡ ä½•å›¾å½¢ (Shape)"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-19T05:42:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ChinaDragon"/> <meta itemprop="url" content="https://juejin.cn/user/3966693681410840"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSï¼šç»˜åˆ¶å‡ ä½•å›¾å½¢ (Shape)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693681410840/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ChinaDragon
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T05:42:49.000Z" title="Wed Nov 19 2025 05:42:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€å‡ ä½•å›¾å½¢ç»˜åˆ¶æ¦‚è¿°</h3>
<blockquote>
<p>ç»˜åˆ¶å‡ ä½•å›¾å½¢æœ‰ä¸¤ç§æ–¹æ³•ï¼šä¸€æ˜¯é€šè¿‡ç»˜åˆ¶ç»„ä»¶<strong>Shape</strong>ç›´æ¥ç»˜åˆ¶å‡ºå‡ ä½•å›¾å½¢ï¼›äºŒæ˜¯é€šè¿‡å½¢çŠ¶è£å‰ªå±æ€§<strong>clipShape</strong>å°†ç»„ä»¶è£å‰ªæˆå‡ ä½•å›¾å½¢ã€‚</p>
</blockquote>
<h4 data-id="heading-1">1.1 ä½¿ç”¨åœºæ™¯</h4>

















<table><thead><tr><th align="left">ç»˜åˆ¶æ–¹å¼</th><th align="left">ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left">ç»˜åˆ¶å‡ ä½•å›¾å½¢ (Shape)</td><td align="left">ç”¨äºåˆ›å»ºæŒ‡å®šå½¢çŠ¶çš„ç»„ä»¶ï¼Œåœ¨é¡µé¢ä¸Šç›´æ¥ç»˜åˆ¶å‡ºå‡ ä½•å›¾å½¢ã€‚</td></tr><tr><td align="left">å½¢çŠ¶è£å‰ª (clipShape)</td><td align="left">ç”¨äºå°†ç»„ä»¶è£å‰ªä¸ºæŒ‡å®šçš„å‡ ä½•å›¾å½¢ã€‚</td></tr></tbody></table>
<h4 data-id="heading-2">1.2 çº¦æŸé™åˆ¶</h4>
<blockquote>
<ul>
<li>å¯¹ç»˜åˆ¶ç»„ä»¶ï¼Œæ—¢å¯ç”¨Shapeç»„ä»¶ä½œä¸ºçˆ¶ç»„ä»¶å®ç°ç±»ä¼¼SVGçš„æ•ˆæœï¼Œä¹Ÿå¯å•ç‹¬ä½¿ç”¨å„ç§å½¢çŠ¶çš„å­ç»„ä»¶è¿›è¡Œç»˜åˆ¶ã€‚</li>
<li>å¯¹å½¢çŠ¶è£å‰ªå±æ€§ï¼Œè£å‰ªä¸ä¼šå¯¼è‡´è¢«è£å‰ªåŒºåŸŸæ— æ³•å“åº”ç»‘å®šçš„æ‰‹åŠ¿äº‹ä»¶ã€‚</li>
</ul>
</blockquote>
<h3 data-id="heading-3">äºŒã€Shapeç»„ä»¶ç®€ä»‹</h3>
<blockquote>
<p>ç»˜åˆ¶ç»„ä»¶ç”¨äºåœ¨é¡µé¢ç»˜åˆ¶å›¾å½¢ï¼ŒShapeç»„ä»¶æ˜¯ç»˜åˆ¶ç»„ä»¶çš„çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶ä¸­ä¼šæè¿°æ‰€æœ‰ç»˜åˆ¶ç»„ä»¶å‡æ”¯æŒçš„é€šç”¨å±æ€§ã€‚å…·ä½“ç”¨æ³•è¯·å‚è€ƒShapeã€‚</p>
</blockquote>
<h3 data-id="heading-4">ä¸‰ã€åˆ›å»ºç»˜åˆ¶ç»„ä»¶</h3>
<blockquote>
<p>ç»˜åˆ¶ç»„ä»¶å¯ä»¥ç”±ä»¥ä¸‹ä¸¤ç§å½¢å¼åˆ›å»ºï¼š</p>
<ul>
<li>ç»˜åˆ¶ç»„ä»¶ä½¿ç”¨Shapeä½œä¸ºçˆ¶ç»„ä»¶ï¼Œå®ç°ç±»ä¼¼SVGçš„æ•ˆæœã€‚æ¥å£è°ƒç”¨ä¸ºä»¥ä¸‹å½¢å¼ï¼š</li>
</ul>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">Shape(value?: PixelMap)
</code></pre>
<blockquote>
<p>è¯¥æ¥å£ç”¨äºåˆ›å»ºå¸¦æœ‰çˆ¶ç»„ä»¶çš„ç»˜åˆ¶ç»„ä»¶ï¼Œå…¶ä¸­valueç”¨äºè®¾ç½®ç»˜åˆ¶ç›®æ ‡ï¼Œå¯å°†å›¾å½¢ç»˜åˆ¶åœ¨æŒ‡å®šçš„PixelMapå¯¹è±¡ä¸­ï¼Œè‹¥æœªè®¾ç½®ï¼Œåˆ™åœ¨å½“å‰ç»˜åˆ¶ç›®æ ‡ä¸­è¿›è¡Œç»˜åˆ¶ã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-function"><span class="hljs-title">Shape</span></span>() {
  Rect().width(300).height(50)
}
</code></pre>
<blockquote>
<ul>
<li>ç»˜åˆ¶ç»„ä»¶å•ç‹¬ä½¿ç”¨ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šç»˜åˆ¶æŒ‡å®šçš„å›¾å½¢ã€‚æœ‰7ç§ç»˜åˆ¶ç±»å‹ï¼Œåˆ†åˆ«ä¸ºCircleï¼ˆåœ†å½¢ï¼‰ã€Ellipseï¼ˆæ¤­åœ†å½¢ï¼‰ã€Lineï¼ˆç›´çº¿ï¼‰ã€Polylineï¼ˆæŠ˜çº¿ï¼‰ã€Polygonï¼ˆå¤šè¾¹å½¢ï¼‰ã€Pathï¼ˆè·¯å¾„ï¼‰ã€Rectï¼ˆçŸ©å½¢ï¼‰ã€‚ä»¥Circleçš„æ¥å£è°ƒç”¨ä¸ºä¾‹ï¼š</li>
</ul>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">Circle(value?: { width?: string | number, height?: string | number })
</code></pre>
<blockquote>
<p>è¯¥æ¥å£ç”¨äºåœ¨é¡µé¢ç»˜åˆ¶åœ†å½¢ï¼Œå…¶ä¸­widthç”¨äºè®¾ç½®åœ†å½¢çš„å®½åº¦ï¼Œheightç”¨äºè®¾ç½®åœ†å½¢çš„é«˜åº¦ï¼Œåœ†å½¢ç›´å¾„ç”±å®½é«˜æœ€å°å€¼ç¡®å®šã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">Circle({ width: 150, height: 150 })
</code></pre>
<h3 data-id="heading-5">å››ã€å½¢çŠ¶è§†å£viewPort</h3>
<pre><code class="hljs language-bash" lang="bash">viewPort(value: { x?: number | string, y?: number | string, width?: number | string, height?: number | string })
</code></pre>
<blockquote>
<p>å½¢çŠ¶è§†å£viewPortæŒ‡å®šç”¨æˆ·ç©ºé—´ä¸­çš„ä¸€ä¸ªçŸ©å½¢ï¼Œè¯¥çŸ©å½¢æ˜ å°„åˆ°ä¸ºå…³è”çš„SVGå…ƒç´ å»ºç«‹çš„è§†åŒºè¾¹ç•Œã€‚viewPortå±æ€§çš„å€¼åŒ…å«xã€yã€widthå’Œheightå››ä¸ªå¯é€‰å‚æ•°ï¼Œxå’Œyè¡¨ç¤ºè§†åŒºçš„å·¦ä¸Šè§’åæ ‡ï¼Œwidthå’Œheightè¡¨ç¤ºå…¶å°ºå¯¸ã€‚ <br/>
ä»¥ä¸‹ä¸‰ä¸ªç¤ºä¾‹è¯´æ˜å¦‚ä½•ä½¿ç”¨viewPortï¼š</p>
</blockquote>
<blockquote>
<ul>
<li>é€šè¿‡å½¢çŠ¶è§†å£å¯¹å›¾å½¢è¿›è¡Œæ”¾å¤§ä¸ç¼©å°ã€‚</li>
</ul>
</blockquote>
<blockquote>
<p><strong>æ•ˆæœå›¾</strong> <br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b69584544cfc4aa9bc9041a7547e9306~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=yrxZBsAcvpqgulw5BLPG4q1RwNw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ViewPortShape.etsä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">class tmp {
  x: number = 0
  y: number = 0
  width: number = 75
  height: number = 75
}

class tmp1 {
  x:number = 0
  y:number = 0
  width:number = 300
  height:number = 300
}
@Component
<span class="hljs-built_in">export</span> default struct ViewPortShape {
  viep: tmp = new tmp();
  viep1: tmp1 = new tmp1();

  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    <span class="hljs-function"><span class="hljs-title">Column</span></span>() {
      Text(<span class="hljs-string">'é€šè¿‡å½¢çŠ¶è§†å£å¯¹å›¾å½¢è¿›è¡Œæ”¾å¤§ä¸ç¼©å°'</span>).fontColor(Color.Blue).fontSize(20).fontWeight(FontWeight.Medium).margin({ top: 40 })
      // ç”»ä¸€ä¸ªå®½é«˜éƒ½ä¸º75çš„åœ†
      Text(<span class="hljs-string">'åŸå§‹å°ºå¯¸Circleç»„ä»¶'</span>).margin({top: 16})
      Circle({ width: 75, height: 75 }).fill(<span class="hljs-string">'#E87361'</span>)

      Row({ space: 10 }) {
        <span class="hljs-function"><span class="hljs-title">Column</span></span>() {
          // åˆ›å»ºä¸€ä¸ªå®½é«˜éƒ½ä¸º150çš„shapeç»„ä»¶ï¼ŒèƒŒæ™¯è‰²ä¸ºé»„è‰²ï¼Œä¸€ä¸ªå®½é«˜éƒ½ä¸º75çš„viewPortã€‚
          // ç”¨ä¸€ä¸ªè“è‰²çš„çŸ©å½¢æ¥å¡«å……viewPortï¼Œåœ¨viewPortä¸­ç»˜åˆ¶ä¸€ä¸ªç›´å¾„ä¸º75çš„åœ†ã€‚
          // ç»˜åˆ¶ç»“æŸï¼ŒviewPortä¼šæ ¹æ®ç»„ä»¶å®½é«˜æ”¾å¤§ä¸¤å€ã€‚
          Text(<span class="hljs-string">'shapeå†…æ”¾å¤§çš„Circleç»„ä»¶'</span>)
          <span class="hljs-function"><span class="hljs-title">Shape</span></span>() {
            Rect().width(<span class="hljs-string">'100%'</span>).height(<span class="hljs-string">'100%'</span>).fill(<span class="hljs-string">'#0097D4'</span>)
            Circle({ width: 75, height: 75 }).fill(<span class="hljs-string">'#E87361'</span>)
          }
          .viewPort(this.viep)
          .width(150)
          .height(150)
          .backgroundColor(<span class="hljs-string">'#F5DC62'</span>)
        }

        <span class="hljs-function"><span class="hljs-title">Column</span></span>() {
          // åˆ›å»ºä¸€ä¸ªå®½é«˜éƒ½ä¸º150çš„shapeç»„ä»¶ï¼ŒèƒŒæ™¯è‰²ä¸ºé»„è‰²ï¼Œä¸€ä¸ªå®½é«˜éƒ½ä¸º300çš„viewPortã€‚
          // ç”¨ä¸€ä¸ªç»¿è‰²çš„çŸ©å½¢æ¥å¡«å……viewPortï¼Œåœ¨viewPortä¸­ç»˜åˆ¶ä¸€ä¸ªç›´å¾„ä¸º75çš„åœ†ã€‚
          // ç»˜åˆ¶ç»“æŸï¼ŒviewPortä¼šæ ¹æ®ç»„ä»¶å®½é«˜ç¼©å°ä¸¤å€ã€‚
          Text(<span class="hljs-string">'Shapeå†…ç¼©å°çš„Circleç»„ä»¶'</span>)
          <span class="hljs-function"><span class="hljs-title">Shape</span></span>() {
            Rect().width(<span class="hljs-string">'100%'</span>).height(<span class="hljs-string">'100%'</span>).fill(<span class="hljs-string">'#BDDB69'</span>)
            Circle({width: 75, height: 75}).fill(<span class="hljs-string">'#E87361'</span>)
          }
          .viewPort(this.viep1)
          .width(150)
          .height(150)
          .backgroundColor(<span class="hljs-string">'#F5DC62'</span>)
        }
      }
    }
  }
}
</code></pre>
<blockquote>
<ul>
<li>åˆ›å»ºä¸€ä¸ªå®½é«˜éƒ½ä¸º300çš„shapeç»„ä»¶ï¼ŒèƒŒæ™¯è‰²ä¸ºé»„è‰²ï¼Œåˆ›å»ºä¸€ä¸ªå®½é«˜éƒ½ä¸º300çš„viewPortã€‚ç”¨ä¸€ä¸ªè“è‰²çš„çŸ©å½¢æ¥å¡«å……viewPortï¼Œåœ¨viewPortä¸­ç»˜åˆ¶ä¸€ä¸ªåŠå¾„ä¸º75çš„åœ†ã€‚</li>
</ul>
</blockquote>
<blockquote>
<p><strong>æ•ˆæœå›¾</strong> <br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb6f53a7268f4de3a59dc7425640f357~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=jn7ug%2FhTh%2BOSpFmApzJYSzFZu7E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">class tmp {
  x: number = 0
  y: number = 0
  width: number = 300
  height: number = 300
}

@Entry
@Component
struct Index {
  viep: tmp = new tmp();

  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    <span class="hljs-function"><span class="hljs-title">Column</span></span>() {
      <span class="hljs-function"><span class="hljs-title">Shape</span></span>() {
        Rect().width(<span class="hljs-string">"100%"</span>).height(<span class="hljs-string">"100%"</span>).fill(<span class="hljs-string">"#0097D4"</span>)
        Circle({ width: 150, height: 150 }).fill(<span class="hljs-string">"#E87361"</span>)
      }
      .viewPort(this.viep)
      .width(300)
      .height(300)
      .backgroundColor(<span class="hljs-string">"#F5DC62"</span>)
    }
  }
}
</code></pre>
<blockquote>
<ul>
<li>åˆ›å»ºä¸€ä¸ªå®½é«˜éƒ½ä¸º300çš„shapeç»„ä»¶ï¼ŒèƒŒæ™¯è‰²ä¸ºé»„è‰²ï¼Œåˆ›å»ºä¸€ä¸ªå®½é«˜éƒ½ä¸º300çš„viewPortã€‚ç”¨ä¸€ä¸ªè“è‰²çš„çŸ©å½¢æ¥å¡«å……viewPortï¼Œåœ¨viewPortä¸­ç»˜åˆ¶ä¸€ä¸ªåŠå¾„ä¸º75çš„åœ†ï¼Œå°†viewPortå‘å³æ–¹å’Œä¸‹æ–¹å„å¹³ç§»150ã€‚</li>
</ul>
</blockquote>
<blockquote>
<p><strong>æ•ˆæœå›¾</strong> <br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c71c742662424351a7bfb6a3fe9b143f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=pB8hlf8mgXwzZVbgelXHR8BwG88%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">class tmp {
  x: number = -150
  y: number = -150
  width: number = 300
  height: number = 300
}

@Entry
@Component
struct Index {
  viep: tmp = new tmp();

  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    <span class="hljs-function"><span class="hljs-title">Column</span></span>() {
      <span class="hljs-function"><span class="hljs-title">Shape</span></span>() {
        Rect().width(<span class="hljs-string">"100%"</span>).height(<span class="hljs-string">"100%"</span>).fill(<span class="hljs-string">"#0097D4"</span>)
        Circle({ width: 150, height: 150 }).fill(<span class="hljs-string">"#E87361"</span>)
      }
      .viewPort(this.viep)
      .width(300)
      .height(300)
      .backgroundColor(<span class="hljs-string">"#F5DC62"</span>)
    }
  }
}
</code></pre>
<h3 data-id="heading-6">äº”ã€è‡ªå®šä¹‰æ ·å¼</h3>
<blockquote>
<p>ç»˜åˆ¶ç»„ä»¶æ”¯æŒé€šè¿‡å„ç§å±æ€§æ›´æ”¹ç»„ä»¶æ ·å¼ã€‚</p>
</blockquote>
<blockquote>
<ul>
<li>é€šè¿‡fillå¯ä»¥è®¾ç½®ç»„ä»¶å¡«å……åŒºåŸŸé¢œè‰²ã€‚
<strong>æ•ˆæœå›¾</strong> <br/></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06009ec13a4a435381649a18ff978317~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=lwRd5tua8afHpbqOiFHNXmXhyTs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<strong>ç¤ºä¾‹ä»£ç </strong></p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">@Component
<span class="hljs-built_in">export</span> default struct PathShape {
  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({ space: 10 }) {
      Path()
        .width(100)
        .height(100)
        .commands(<span class="hljs-string">'M150 0 L300 300 L0 300 Z'</span>)
        .fill(<span class="hljs-string">"#E87361"</span>)
        .strokeWidth(0)
    }
    .margin({top: 20})
  }
}
</code></pre>
<blockquote>
<ul>
<li>é€šè¿‡strokeå¯ä»¥è®¾ç½®ç»„ä»¶è¾¹æ¡†é¢œè‰²ã€‚
<strong>æ•ˆæœå›¾</strong> <br/></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0929265252a043d0a59ab2f2574bcd9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=Aj8rH06KXhuVbV2O0xmlLmv%2B50k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">Path()
  .width(100)
  .height(100)
  .fillOpacity(0)
  .commands(<span class="hljs-string">'M150 0 L300 300 L0 300 Z'</span>)
  .stroke(Color.Red)
</code></pre>
<blockquote>
<ul>
<li>é€šè¿‡strokeOpacityå¯ä»¥è®¾ç½®è¾¹æ¡†é€æ˜åº¦ã€‚
<strong>æ•ˆæœå›¾</strong> <br/></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b158095931ad47d193335b6cf5123215~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=KQq4Johq4AsfkLXpfpEZ8R%2FSjiQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">Path()
  .width(100)
  .height(100)
  .fillOpacity(0)
  .commands(<span class="hljs-string">'M150 0 L300 300 L0 300 Z'</span>)
  .stroke(Color.Red)
  .strokeWidth(10)
  .strokeOpacity(0.2)
</code></pre>
<blockquote>
<ul>
<li>é€šè¿‡strokeLineJoinå¯ä»¥è®¾ç½®çº¿æ¡æ‹è§’ç»˜åˆ¶æ ·å¼ã€‚æ‹è§’ç»˜åˆ¶æ ·å¼åˆ†ä¸ºBevel(ä½¿ç”¨æ–œè§’è¿æ¥è·¯å¾„æ®µ)ã€Miter(ä½¿ç”¨å°–è§’è¿æ¥è·¯å¾„æ®µ)ã€Round(ä½¿ç”¨åœ†è§’è¿æ¥è·¯å¾„æ®µ)ã€‚
<strong>æ•ˆæœå›¾</strong> <br/></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2dfe54d071344c3ae46c846b9643c67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=QNdmQPlGLq8M0ALsbhWnptjU7%2BI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">Polyline()
  .width(100)
  .height(100)
  .fillOpacity(0)
  .stroke(Color.Red)
  .strokeWidth(8)
  .points([[20, 0], [0, 100], [100, 90]])
   // è®¾ç½®æŠ˜çº¿æ‹è§’å¤„ä¸ºåœ†å¼§
  .strokeLineJoin(LineJoinStyle.Round)
</code></pre>
<blockquote>
<ul>
<li>é€šè¿‡strokeMiterLimitè®¾ç½®æ–œæ¥é•¿åº¦ä¸è¾¹æ¡†å®½åº¦æ¯”å€¼çš„æé™å€¼ã€‚
æ–œæ¥é•¿åº¦è¡¨ç¤ºå¤–è¾¹æ¡†å¤–è¾¹äº¤ç‚¹åˆ°å†…è¾¹äº¤ç‚¹çš„è·ç¦»ï¼Œè¾¹æ¡†å®½åº¦å³strokeWidthå±æ€§çš„å€¼ã€‚strokeMiterLimitå–å€¼éœ€å¤§äºç­‰äº1ï¼Œä¸”åœ¨strokeLineJoinå±æ€§å–å€¼LineJoinStyle.Miteræ—¶ç”Ÿæ•ˆã€‚
<strong>æ•ˆæœå›¾</strong> <br/></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d340c8a6dbc247708f1c530b558b1b86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=yArZ%2BE388txrkCRfxXKilUUiAnA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">Polyline()
  .width(100)
  .height(100)
  .fillOpacity(0)
  .stroke(Color.Red)
  .strokeWidth(10)
  .points([[20, 0], [20, 100], [100, 100]])
  // è®¾ç½®æŠ˜çº¿æ‹è§’å¤„ä¸ºå°–è§’
  .strokeLineJoin(LineJoinStyle.Miter)
  // è®¾ç½®æ–œæ¥é•¿åº¦ä¸çº¿å®½çš„æ¯”å€¼
  .strokeMiterLimit(1/Math.sin(45))
Polyline()
  .width(100)
  .height(100)
  .fillOpacity(0)
  .stroke(Color.Red)
  .strokeWidth(10)
  .points([[20, 0], [20, 100], [100, 100]])
  .strokeLineJoin(LineJoinStyle.Miter)
  .strokeMiterLimit(1.42)
</code></pre>
<blockquote>
<ul>
<li>é€šè¿‡antiAliasè®¾ç½®æ˜¯å¦å¼€å¯æŠ—é”¯é½¿ï¼Œé»˜è®¤å€¼ä¸ºtrueï¼ˆå¼€å¯æŠ—é”¯é½¿ï¼‰ã€‚
<strong>æ•ˆæœå›¾</strong> <br/></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f18119f97c2448eda5c2928c7e8f7b69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=Je6xaKpvCzB9V4nHbh2o1Uc%2FsrY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">//å¼€å¯æŠ—é”¯é½¿
Circle()
  .width(150)
  .height(200)
  .fillOpacity(0)
  .strokeWidth(5)
  .stroke(Color.Black)
</code></pre>
<blockquote>
<p><strong>å…³é—­æŠ—é”¯é½¿</strong> <br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7801fb5cd20e42f8ac3ebf3c18906ed6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=hf6xZKINhsdyU6jkpbdCDp7gPE4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">//å…³é—­æŠ—é”¯é½¿
Circle()
  .width(150)
  .height(200)
  .fillOpacity(0)
  .strokeWidth(5)
  .stroke(Color.Black)
  .antiAlias(<span class="hljs-literal">false</span>)
</code></pre>
<h3 data-id="heading-7">å…­ã€åœºæ™¯ç¤ºä¾‹</h3>
<h4 data-id="heading-8">6.1 ç»˜åˆ¶å°é—­è·¯å¾„</h4>
<blockquote>
<p>åœ¨Shapeçš„(-80, -5)ç‚¹ç»˜åˆ¶ä¸€ä¸ªå°é—­è·¯å¾„ï¼Œå¡«å……é¢œè‰²0x317AF7ï¼Œçº¿æ¡å®½åº¦3ï¼Œè¾¹æ¡†é¢œè‰²çº¢è‰²ï¼Œæ‹è§’æ ·å¼é”è§’ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</p>
</blockquote>
<blockquote>
<p><strong>æ•ˆæœå›¾</strong> <br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1220dc58b57a49e996f8ac25e2c5e5dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=kd%2Fh2Km0EL07EiJHbEnAoYCeriw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">@Entry
@Component
struct ShapeExample {
  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({ space: 10 }) {
      <span class="hljs-function"><span class="hljs-title">Shape</span></span>() {
        Path().width(200).height(60).commands(<span class="hljs-string">'M0 0 L400 0 L400 150 Z'</span>)
      }
      .viewPort({ x: -80, y: -5, width: 500, height: 300 })
      .fill(0x317AF7)
      .stroke(Color.Red)
      .strokeWidth(3)
      .strokeLineJoin(LineJoinStyle.Miter)
      .strokeMiterLimit(5)
    }.width(<span class="hljs-string">'100%'</span>).margin({ top: 15 })
  }
}
</code></pre>
<h4 data-id="heading-9">6.2 ç»˜åˆ¶åœ†å’Œåœ†ç¯</h4>
<blockquote>
<p>ç»˜åˆ¶ä¸€ä¸ªç›´å¾„ä¸º150çš„åœ†ï¼Œå’Œä¸€ä¸ªç›´å¾„ä¸º150ã€çº¿æ¡ä¸ºçº¢è‰²è™šçº¿çš„åœ†ç¯ï¼ˆå®½é«˜è®¾ç½®ä¸ä¸€è‡´æ—¶ä»¥çŸ­è¾¹ä¸ºç›´å¾„ï¼‰ã€‚</p>
</blockquote>
<blockquote>
<p><strong>æ•ˆæœå›¾</strong> <br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65fd6aacbfad4333abdce798aef43359~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=YCvO5MDA9Zj1ezYhYkt87IATgqU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">@Entry
@Component
struct CircleExample {
  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({ space: 10 }) {
      //ç»˜åˆ¶ä¸€ä¸ªç›´å¾„ä¸º150çš„åœ†
      Circle({ width: 150, height: 150 })
      //ç»˜åˆ¶ä¸€ä¸ªç›´å¾„ä¸º150ã€çº¿æ¡ä¸ºçº¢è‰²è™šçº¿çš„åœ†ç¯
      Circle()
        .width(150)
        .height(200)
        .fillOpacity(0)
        .strokeWidth(3)
        .stroke(Color.Red)
        .strokeDashArray([1, 2])
    }.width(<span class="hljs-string">'100%'</span>)
  }
}
</code></pre>
<h4 data-id="heading-10">6.3 UIè§†è§‰å±æ€§ä½œç”¨æ•ˆæœ</h4>
<blockquote>
<p><strong>è¯´æ˜</strong>
backgroundColorã€linearGradientç­‰é€šç”¨å±æ€§ä½œç”¨äºç»„ä»¶çš„èƒŒæ™¯åŒºåŸŸï¼Œè€Œä¸ä¼šåœ¨ç»„ä»¶å…·ä½“çš„å†…å®¹åŒºåŸŸç”Ÿæ•ˆã€‚</p>
</blockquote>
<blockquote>
<p><strong>æ•ˆæœå›¾</strong> <br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a01b301a5b1454d9afbcab8dd269917~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764135769&amp;x-signature=mRKanvi85US6zSbpDRWAwHFzXdE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">@Entry
@Component
struct CircleExample {
  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({ space: 10 }) {
      //ç»˜åˆ¶ä¸€ä¸ªç›´å¾„ä¸º150çš„åœ†
      Circle()
        .width(150)
        .height(200)
        .backgroundColor(Color.Pink) // ä¼šç”Ÿæ•ˆåœ¨ä¸€ä¸ª150*200å¤§å°çš„çŸ©å½¢åŒºåŸŸï¼Œè€Œéä»…åœ¨ç»˜åˆ¶çš„ä¸€ä¸ªç›´å¾„ä¸º150çš„åœ†å½¢åŒºåŸŸ
    }.width(<span class="hljs-string">'100%'</span>)
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kimi å¼€æºå³çˆ†ç«ï¼K2 Thinking æœ‰å“ªäº›å®ç”¨ç©æ³•ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7573985572400283663</link>    <guid>https://juejin.cn/post/7573985572400283663</guid>    <pubDate>2025-11-19T06:10:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573985572400283663" data-draft-id="7573892573347233844" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kimi å¼€æºå³çˆ†ç«ï¼K2 Thinking æœ‰å“ªäº›å®ç”¨ç©æ³•ï¼Ÿ"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-19T06:10:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kimi å¼€æºå³çˆ†ç«ï¼K2 Thinking æœ‰å“ªäº›å®ç”¨ç©æ³•ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T06:10:07.000Z" title="Wed Nov 19 2025 06:10:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Kimi æœ€è¿‘å¼€æºäº†æ€è€ƒæ¨¡å‹ï¼šKimi K2 Thinkingã€‚æŒ‰ç…§å®˜æ–¹ä»‹ç»ï¼Œå®ƒæŒæ¡ã€Œè¾¹æ€è€ƒï¼Œè¾¹ä½¿ç”¨å·¥å…·ã€çš„èƒ½åŠ›ã€‚</p>
<p>å¯ä»¥è‡ªä¸»å®ç°é«˜è¾¾ 300 æ­¥çš„å·¥å…·è°ƒç”¨ï¼Œè§£å†³å¤æ‚é—®é¢˜ã€‚</p>
<p>è€Œä¸”åœ¨ã€Œäººç±»ç»ˆæè€ƒè¯•ã€ä¸­ä¸€ä¸¾è¶…è¶Š GPT-5ï¼Œæ‹¿åˆ°äº† SOTA æ°´å¹³ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/758a65b80e154e7c80422aa2de2a0b5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=Ms%2BAJD2Oa86BtCW3IS2fq%2B0Cf9I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>PSï¼šäººç±»ç»ˆæè€ƒè¯•æ˜¯ä¸€ç§é«˜éš¾åº¦æ¨ç†ä¸é€šç”¨æ™ºåŠ›æµ‹è¯•ï¼Œå¯ä»¥æµ‹è¯• AI å¤§æ¨¡å‹åœ¨äººç±»æé™èƒ½åŠ›è¾¹ç•Œä¸Šçš„é€šç”¨æ¨ç†ä¸æ™ºèƒ½æ°´å¹³ã€‚</p>
<p>å¦‚æœæƒ³åœ¨å®˜ç½‘ä½“éªŒæœ€æ–°çš„èƒ½åŠ›ï¼Œå¯ä»¥ç›´æ¥åœ¨ kimi.com å¼€å¯é•¿æ€è€ƒ + K2 å°±è¡Œäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/283ba24d64d048f6884f7d49245f9ef4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=W9IWQpra8AP%2FMWveL6OdgTzxVzg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚ä½•æƒ³åœ¨ Claude Code ä¸­ä½¿ç”¨ï¼Œæˆ‘ä¸‹é¢ä¹Ÿæœ‰æ•™ç¨‹ï¼Œä¸€æ­¥æ­¥é…ç½®å°±å¥½äº†ã€‚æˆ‘å…ˆæ¥æµ‹å‡ ä¸ª Caseï¼Œçœ‹çœ‹ Kimi æœ€æ–°èƒ½åŠ›æœ‰å“ªäº›å®ç”¨å¥½ç©çš„è½åœ°åœºæ™¯ã€‚</p>
<h2 data-id="heading-0">01ã€æ–‡ç« é…å›¾åŠ¨èµ·æ¥</h2>
<p>åµŒå…¥æ–‡ç« é‡Œé¢çš„ SVGï¼šKimi K2 Thinking æ¨¡å‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79e9a365c8094153bbf9ac3f3462aad6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=MndS4DjBlzErA66MYnLpBHnfVmw%3D" alt="image.png" loading="lazy"/>
å¯ä»¥ç”¨ Kimi ä¸ºè‡ªå·±å†™çš„æ–‡ç« ç”Ÿæˆç±»ä¼¼çš„é«˜çº§é…å›¾ã€‚<br/>
è§£å†³åˆ›ä½œè€…çš„ç—›ç‚¹ï¼Œä¸ç”¨ä¸ºç”¨å¹²å·´å·´çš„æ–‡å­—å‘æ„ï¼Œæ–‡ç« æ’å…¥æœ‰æ›´é«˜çº§çš„é…å›¾ï¼Œè¯»è€…æ›´æ„¿æ„å¾€ä¸‹çœ‹ã€‚æç¤ºè¯å¦‚ä¸‹ï¼Œå‚è€ƒæ²ƒæ ¹çš„ Promptï¼Œæˆ‘æ”¹äº†ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">è¯·æœç´¢ kimi k2 thinking å¼€æºæ¨¡å‹çš„äº®ç‚¹ã€‚å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªç½‘é¡µï¼šä½¿ç”¨ svg ç”»å‡ºäº®ç‚¹æ€»ç»“ã€‚ ç½‘é¡µæœ‰ä¸€ä¸ªå¤åˆ¶æŒ‰é’®ï¼Œç‚¹å‡»å¤åˆ¶åæˆ‘å¯ä»¥ç›´æ¥æŠŠ svg å¯è§†åŒ–ç²˜è´´åˆ°å…¬ä¼—å·ç¼–è¾‘å™¨ã€‚
<span class="hljs-meta">## è¦æ±‚1.Â æ•´ä¸ªé¡µé¢åº”è¯¥æç®€è®¾è®¡ï¼Œé…è‰²åˆç†ï¼Œæµ…è‰²è°ƒä¸ºä¸»2.Â ä¸è¦æœ‰ä»»ä½•bodyæ ·å¼ã€buttonæ ·å¼æˆ–å…¶ä»–CSSè£…é¥°ã€‚3.Â é™¤äº†SVGå›¾è¡¨æœ¬èº«å’Œä¸€ä¸ªå¤åˆ¶æŒ‰é’®ä¹‹å¤–ï¼Œä¸è¦æœ‰å…¶ä»–HTMLå…ƒç´ ã€‚å¤åˆ¶æŒ‰é’®åº”è¯¥æ”¾ç½®åœ¨é¡µé¢æœ€åº•éƒ¨ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç å®ç°å¤åˆ¶åŠŸèƒ½ï¼š</span>
```<span class="hljs-function">javascriptasyncÂ <span class="hljs-title">functioncopySVG</span>()</span> {Â Â <span class="hljs-keyword">const</span>Â svgElement = document.getElementById(<span class="hljs-string">'Chart'</span>);Â Â <span class="hljs-keyword">const</span>Â svgData =Â <span class="hljs-keyword">new</span>Â XMLSerializer().serializeToString(svgElement);
Â Â <span class="hljs-keyword">try</span>Â {Â  Â Â <span class="hljs-keyword">const</span>Â clipboardItem =Â <span class="hljs-keyword">new</span>Â ClipboardItem({Â  Â  Â Â <span class="hljs-string">'image/svg+xml'</span>:Â <span class="hljs-keyword">new</span>Â Blob([svgData], { type:Â <span class="hljs-string">'image/svg+xml'</span>Â }),Â  Â  Â Â <span class="hljs-string">'text/html'</span>:Â <span class="hljs-keyword">new</span>Â Blob([svgData], { type:Â <span class="hljs-string">'text/html'</span>Â })Â  Â  });Â  Â Â Â  Â Â <span class="hljs-keyword">await</span>Â navigator.clipboard.write([clipboardItem]);Â  Â  alert(<span class="hljs-string">'SVGå·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼'</span>);Â  }Â <span class="hljs-keyword">catch</span>Â (err) {Â  Â  console.error(<span class="hljs-string">'å¤åˆ¶å¤±è´¥:'</span>, err);Â  Â  alert(<span class="hljs-string">'å¤åˆ¶å¤±è´¥'</span>);Â  }}```<span class="hljs-number">4.</span>Â é¡µé¢åŠ è½½æ—¶JavaScriptè‡ªåŠ¨ç”ŸæˆåŒ…å«çœŸå®æ•°æ®å’ŒSVGåŸç”ŸåŠ¨ç”»çš„å®Œæ•´SVGï¼Œç”Ÿæˆåè¿™ä¸ªSVGæ˜¯å®Œå…¨è‡ªåŒ…å«çš„ã€‚<span class="hljs-number">5.</span>Â å¤åˆ¶åŠŸèƒ½åªéœ€ç®€å•åºåˆ—åŒ–è¿™ä¸ªå·²ç”Ÿæˆçš„SVGå…ƒç´ ã€‚å¤åˆ¶å‡ºå»çš„SVGå¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼ŒåŒ…å«çœŸå®çš„æ•°æ®æ ‡æ³¨å’Œåˆç†å‡ºåœºåŠ¨ç”»æ•ˆæœï¼Œæ— éœ€ä»»ä½•å¤–éƒ¨JavaScriptæ”¯æŒã€‚
</code></pre>
<p>åŸºäºè¿™ä¸ªæ€è·¯ï¼Œå…¶å®è¿˜å¯ä»¥æœ‰å¾ˆå¤šæœ‰æ„æ€çš„ç©æ³•ã€‚æ¯”å¦‚è®© Kimi ç›´æ¥ç”Ÿäº§å¯ä»¥äº¤äº’çš„ç©æ³•ï¼Œç›´æ¥ç²˜è´´åˆ°å…¬ä¼—å·ç¼–è¾‘å™¨é‡Œé¢ã€‚è¿™æ ·å…¬ä¼—å·æ–‡ç« å°±ä¸ä»…ä»…æ˜¯åªè¯»ï¼Œè€Œæ˜¯å¯ä»¥äº’åŠ¨çš„äº†ã€‚åé¢å°è¯•ä¸‹ã€‚</p>
<h2 data-id="heading-1">02ã€å¤šè½®æœç´¢+è”ç½‘å·¥å…·è°ƒç”¨</h2>
<p>æœ€æ–°çš„ Kimi K2 Thinking æ¨¡å‹åœ¨å¤æ‚æœç´¢å’Œæµè§ˆåœºæ™¯ä¸Šè¡¨ç°å¾ˆä¸é”™ã€‚è¿™ä¸ªåœºæ™¯å¤ªåˆšéœ€äº†ï¼Œæ¯•ç«Ÿå¾ˆå¤šäººç”¨ AI ä¸»è¦æ˜¯ä¸ºäº†ã€Œæœä¸œè¥¿ã€ã€‚</p>
<p>å¦‚æœä½ æƒ³äº†è§£çš„ç­”æ¡ˆæ¥è‡ªäº’è”ç½‘å„ä¸ªåœ°æ–¹ï¼Œä½¿ç”¨ Kimi K2 é•¿æ€è€ƒä¼šç»™ä½ è¯¦ç»†ä¸”æ»¡æ„çš„ç­”æ¡ˆã€‚</p>
<p>è‹±é›„è”ç›ŸSèµ›æŠ¥é“å’Œåæ¢—æ¯”å¦‚æç¤ºè¯ï¼šè¯·æ·±åº¦æœç´¢å…¨ç½‘å…³äºè‹±é›„è”ç›Ÿ S1-S15 çš„ç›¸å…³æŠ¥é“ï¼Œç”Ÿæˆä¸€ä¸ªè¯¦ç»†çš„æŠ¥å‘Šç»™æˆ‘ã€‚ä¹Ÿéœ€è¦åŒ…æ‹¬å›½å†…å¤–çŸ¥åçš„ç”µç«é€‰æ‰‹çš„æ¢—ï¼Œä¹Ÿè¯¦ç»†çš„æè¿°ä¸€ä¸‹æ¢—çš„ç”±æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3afb011bb2f4408b8afb9319d1663325~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=i7cHPkA6Ix1IAu26ISB8VBo4dHc%3D" alt="image.png" loading="lazy"/></p>
<p>S èµ›ä¸Šå‡ºç°çš„åæ¢—éƒ½æ€»ç»“äº†å‡ºæ¥ï¼Œæ¯”å¦‚Â The Shy å¤©ç¥ä¸‹å‡¡ã€4396ã€Clearlove ä¸ºä»€ä¹ˆå«å‚é•¿ã€‚ä»¥åŠæˆ‘ç»å¸¸ç”¨çš„æ ‡é¢˜Â YYDS ç«Ÿç„¶æ˜¯ UZI å‘æ˜çš„ï¼Œæˆ‘æœ¬æ¥ä»¥ä¸ºæ˜¯ AI å¹»è§‰ï¼Ÿåˆç¡®è®¤äº†ä¸€ä¸‹ï¼Œè¿˜çœŸæ˜¯ã€‚ã€‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f4d7eb8ac59481bb52237404f07e830~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=gcO4XYBvwqbgKKb7D%2BAN77jaCd8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒKimi ä¸æ˜¯æœç´¢å‡ ä¸ªç½‘é¡µåä¸€è‚¡è„‘å…¨ä¸¢ç»™ AI æ€»ç»“åˆ†æç»™ç­”æ¡ˆã€‚å®ƒè¿›è¡Œäº† 3 æ¬¡æœç´¢ -&gt; æµè§ˆç½‘é¡µ -&gt; æ€è€ƒçš„å¾ªç¯ï¼Œæœç´¢äº† 102 ä¸ªç½‘é¡µï¼Œæœ€ç»ˆæ‰ç»™åˆ°ä¸€ä¸ªæ¨ç†åçš„ç­”å¤ã€‚</p>
<p>Open AI ä¹‹å‰å‘å¸ƒè¿‡ä¸€ä¸ªåŸºå‡†æµ‹è¯•ï¼Œä¸“é—¨è¡¡é‡ AIÂ åœ¨ä¿¡æ¯è¿‡è½½ç¯å¢ƒä¸­èƒ½å¦åˆ¨æ ¹é—®åº•ã€‚</p>
<p>è¿™ä¸ªä»»åŠ¡ï¼Œäººç±»å¹³å‡åªèƒ½è¾¾åˆ° 29.2% çš„æˆç»©ã€‚Kimi K2 Thinking çš„æˆç»©æ˜¯ 60.2% ï¼Œç›®å‰ç¬¬ä¸€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/552374d278b34cf5a2e5a13814576e4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=fNpFYXVg9sHT27GyDzTSAQjFysg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¼ å®¶ç•Œç™¾äººè’é‡æ±‚ç”Ÿæ¢³ç†</p>
<p>å› ä¸º Kimi K2 Thinking å¯ä»¥åœ¨æµ·é‡ä¿¡æ¯ä¸­åˆ¨æ ¹é—®åœ°ï¼Œç®€ç›´å¯ä»¥ä½œä¸ºè¿½çƒ­ç‚¹äº‹ä»¶çš„åˆ©å™¨ã€‚</p>
<p>æ¯”å¦‚æœ€è¿‘å¼ å®¶ç•Œç™¾äººè’é‡æ±‚ç”Ÿçš„å‰å› åæœæ˜¯å•¥ï¼Œæœ‰å“ªäº›å¥½ç©çš„äº‹å„¿ã€‚</p>
<p>ç½—æ°¸æµ©æ’­å®¢èŠ‚ç›®æ€»ç»“</p>
<p>æˆ‘åˆæµ‹è¯•äº†ä¸€ä¸ª Case è®© Kimi K2 é•¿æ€è€ƒè¾“å‡ºä¸€ä¸ªæŠ¥å‘Šï¼ŒæŠŠç½—æ°¸æµ©æ‰€æœ‰æ’­å®¢èŠ‚ç›®éƒ½æ¢³ç†å¥½ï¼Œå‘ç»™æˆ‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d376c13b7054d6c85e6387c7944fa36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=VRAL3Q3SezXG2SXqy61lez0Dme4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒKimi è¿›è¡Œäº†Â 6 è½®æ€è€ƒ+è”ç½‘å·¥å…·è°ƒç”¨æ‰æŠŠæ‰€æœ‰æœŸèŠ‚ç›®çš„ä¿¡æ¯æ‹¿åˆ°ï¼Œæ•´ç†å¥½å‘ç»™æˆ‘ã€‚</p>
<p>é¡ºç€æˆ‘åˆå‘Šè¯‰ Kimiï¼šç”Ÿæˆçš„æŠ¥å‘Š UI ä¸é«˜çº§ï¼Œæˆ‘æƒ³è¦ä¹”å¸ƒæ–¯é‚£ç§ç®€æ´é£æ ¼ï¼Œé…ä¸Šå‚è€ƒæˆ‘å›¾ç‰‡ä¸­çš„é…è‰²ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18bff347c730419d8b622962ed1336cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=CFEHhycavWbpeSQk%2BfUhH%2Bba4k0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ä¸€ä¼šå„¿ï¼Œ ä¸€ä¸ªç®€æ´ã€æ¸…çˆ½é…è‰²çš„æŠ¥å‘Šå°±ç”Ÿæˆäº†ã€‚ç„¶åç»§ç»­é—® Kimiï¼Œæˆ‘æƒ³è¯¦ç»†äº†è§£è´¾æ¨ŸæŸ¯è¿™ä¸€æœŸï¼Œèƒ½å¦å¸®æˆ‘è¾“å‡ºä¸€ä¸ªæ€»ç»“æ•´ç†ä¸€ä¸‹è¿™ä¸€æœŸçš„å†…å®¹ã€‚</p>
<p>å®ƒå°±ä¼šåŸºäºæˆ‘ä¹‹å‰çš„ UI åå¥½ï¼Œç”Ÿæˆä¸€ä¸ªç½—æ°¸æµ©è®¿è°ˆè´¾æ¨ŸæŸ¯é‚£ä¸€æœŸçš„ä¸“é¢˜æ€»ç»“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/258fd5da43be4ef5b27c0537ed7929ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=fS2%2FgTLf5vwmjtUgjJKeYTu912M%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">03ã€ç¼–ç¨‹èƒ½åŠ›æå‡</h2>
<p>å¤åˆ»ä¸€ä¸ªç®€å•çš„ Word ç¼–è¾‘å™¨Kimi K2 Thinking æ¨¡å‹çš„ Coding èƒ½åŠ›ä¹Ÿå¢å¼ºäº†ï¼Œæµ‹è¯•äº†å®ƒä»¬çš„å®˜æ–¹ Case èƒ½å¦å¤ç°ï¼šå¤åˆ»ä¸€ä¸ªç®€å•çš„ Word ç¼–è¾‘å™¨ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå­—ä½“å¤§å°ã€æ¼”ç¤ºã€å±…ä¸­ã€åŠ ç²—ã€è¡Œé—´è·ã€æ’å…¥å›¾ç‰‡ç­‰ç­‰ï¼Œæ–‡æ¡£ç¼–è¾‘å™¨çš„åŸºç¡€åŠŸèƒ½ï¼Œä¸€å£æ°”éƒ½å®ç°äº†ã€‚å• HTML ç½‘é¡µå¤åˆ» Mac OS</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/641089d681834f729a18f4a97043d46b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=pnjw2YydNjJXMHgb9KZba55GqwE%3D" alt="image.png" loading="lazy"/></p>
<p>æç¤ºè¯ï¼šDesign and create a web os like mac os full functional features from text editor , to dile manager to paint to video editor and all important mac os pre bundled software Use whatever libraries to get this done but make sure I can paste it all into a single HTML file and open it in Chrome.make it interesting and highly detail , shows details that no one expected go full creative and full beauty in one code block.</p>
<p>å¯ä»¥çœ‹åˆ° Kimi K2 Thinking é€šè¿‡å• HTML å¤åˆ»äº†ä¸€ä¸ªç®€æ˜“çš„ Mac OS ç³»ç»Ÿã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/510528bd646c44fdab3357f025e0bfc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=eTOqBvcdkPU5RJPsvbuX1bZyl2E%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">04ã€æ¥å…¥ Claude Code</h2>
<p>å¯ä»¥åœ¨ Claude Code ä¸­æ¥å…¥ Kimi K2 Thinkingã€‚é¦–å…ˆå»æœˆä¹‹æš—é¢çš„ AI å¼€æ”¾å¹³å°è·å– API Keyã€‚</p>
<p>æ‰“å¼€ä¸‹é¢è¿™ä¸ªç½‘å€ï¼Œæ‰¾åˆ°æ–°å»º API Key æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªå±äºè‡ªå·±çš„å¯†é’¥ï¼Œå¤åˆ¶åä¸€å®šè¦ä¿å­˜å¥½ï¼Œè€Œä¸”ä¸è¦éšä¾¿å‘ç»™åˆ«äººã€‚</p>
<pre><code class="hljs language-perl" lang="perl">è·å– API Keyï¼šhttps:<span class="hljs-regexp">//pla</span>tform.moonshot.cn/console/api-<span class="hljs-keyword">keys</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6aebad6d165649abb16b703344eba607~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=iTthgG2pNnIItBvTQDSZmY3mrNE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ä½ è¯·æŒ‰ç…§ä»¥ä¸‹æ–¹å¼è®¾ç½®ç¯å¢ƒå˜é‡ä½¿ç”¨Â <code>kimi-k2-thinking</code>Â æ¨¡å‹ï¼Œå¹¶å¯åŠ¨ Claudeã€‚</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">Linux/macOS å¯åŠ¨é«˜é€Ÿç‰ˆ kimi-k2-thinking-turbo æ¨¡å‹<span class="hljs-built_in">export</span>Â ANTHROPIC_BASE_URL=https://api.moonshot.cn/anthropicexportÂ ANTHROPIC_AUTH_TOKEN=<span class="hljs-variable">${YOUR_MOONSHOT_API_KEY}</span><span class="hljs-built_in">export</span>Â ANTHROPIC_MODEL=kimi-k2-thinking-turboexportÂ ANTHROPIC_DEFAULT_OPUS_MODEL=kimi-k2-thinking-turboexportÂ ANTHROPIC_DEFAULT_SONNET_MODEL=kimi-k2-thinking-turboexportÂ ANTHROPIC_DEFAULT_HAIKU_MODEL=kimi-k2-thinking-turboexportÂ CLAUDE_CODE_SUBAGENT_MODEL=kimi-k2-thinking-turboÂ claude</span>
</code></pre>
<p>æ³¨æ„ä¸Šé¢Â YOUR_MOONSHOT_API_KEYÂ è¿™é‡Œè¦è¾“å…¥ä½ åˆšåˆšå¤åˆ¶çš„ API Keyã€‚</p>
<p>å°†ä¸Šé¢è¿™äº›å‘½ä»¤å¤åˆ¶åˆ°ç»ˆç«¯é‡Œé¢å°±è¡Œäº†ã€‚å¦‚æœæ˜¾ç¤º kimi-k2-thinking-turbo å°±è¡Œäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0904636192a4264b5568ced308cd929~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764137407&amp;x-signature=EDRLP3rE4BQQdk2OYuKCjQuy4nU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ›´å¤šè§†é¢‘è¯¦æƒ…ï¼Œè¯·æŸ¥çœ‹åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F8nAJ-Efuzmq1F-DF1iJS2w" target="_blank" title="https://mp.weixin.qq.com/s/8nAJ-Efuzmq1F-DF1iJS2w" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/8nAJ-Efuzâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangSmithæœ¬åœ°éƒ¨ç½²LangGraphåº”ç”¨]]></title>    <link>https://juejin.cn/post/7573995798603137039</link>    <guid>https://juejin.cn/post/7573995798603137039</guid>    <pubDate>2025-11-19T05:52:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573995798603137039" data-draft-id="7573985572400152591" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangSmithæœ¬åœ°éƒ¨ç½²LangGraphåº”ç”¨"/> <meta itemprop="keywords" content="Agent,LangChain,Python"/> <meta itemprop="datePublished" content="2025-11-19T05:52:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FreeCode"/> <meta itemprop="url" content="https://juejin.cn/user/1282499717900794"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangSmithæœ¬åœ°éƒ¨ç½²LangGraphåº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1282499717900794/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FreeCode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T05:52:06.000Z" title="Wed Nov 19 2025 05:52:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>æœ¬æ–‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨LangSmithåœ¨æœ¬åœ°éƒ¨ç½²LangGraphåº”ç”¨ï¼Œä»¥ä¾¿è¿›è¡Œæµ‹è¯•å’Œå¼€å‘ã€‚</p>
<h2 data-id="heading-0">å‡†å¤‡</h2>
<ul>
<li>ä¸€ä¸ª LangSmith è´¦å·ï¼šå¯åœ¨ smith.langchain.com æ³¨å†Œæˆ–ç™»å½•ã€‚</li>
<li>ä¸€ä¸ª LangSmith API å¯†é’¥ï¼šè¯·å‚è€ƒã€Šåˆ›å»º API å¯†é’¥æŒ‡å—ã€‹æ“ä½œã€‚</li>
</ul>
<h2 data-id="heading-1">å®‰è£…LangGraph CLI</h2>
<pre><code class="hljs language-bash" lang="bash">pip install -U <span class="hljs-string">"langgraph-cli[inmem]"</span>
</code></pre>
<h2 data-id="heading-2">åˆ›å»ºLangGraphåº”ç”¨</h2>
<p>ä»new-langgraph-project-pythonæ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ–°åº”ç”¨ã€‚è¯¥æ¨¡æ¿å±•ç¤ºäº†ä¸€ä¸ªå•èŠ‚ç‚¹åº”ç”¨ï¼Œä½ å¯ä»¥ç”¨è‡ªå·±çš„é€»è¾‘å¯¹å…¶è¿›è¡Œæ‰©å±•ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">langgraph new path/to/your/app --template new-langgraph-project-python
</code></pre>
<h2 data-id="heading-3">å®‰è£…ä¾èµ–</h2>
<p>åœ¨æ–°å»ºçš„LangGraphåº”ç”¨çš„æ ¹ç›®å½•ä¸‹ï¼Œä»¥ç¼–è¾‘æ¨¡å¼å®‰è£…ä¾èµ–é¡¹ï¼Œè¿™æ ·æœåŠ¡å™¨å°±ä¼šä½¿ç”¨ä½ çš„æœ¬åœ°ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> path/to/your/app
pip install -e .
</code></pre>
<h2 data-id="heading-4">åˆ›å»º.env æ–‡ä»¶</h2>
<p>åœ¨æ–°å»ºçš„LangGraphåº”ç”¨æ ¹ç›®å½•ä¸­ï¼Œä¼šæ‰¾åˆ°ä¸€ä¸ª.env.example æ–‡ä»¶ã€‚è¯·åœ¨è¯¥åº”ç”¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.env æ–‡ä»¶ï¼Œå°†.env.example æ–‡ä»¶çš„å†…å®¹å¤åˆ¶åˆ°.env æ–‡ä»¶ä¸­ï¼Œå¹¶å¡«å†™å¿…è¦çš„ API å¯†é’¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">LANGSMITH_API_KEY=lsv2...
</code></pre>
<h2 data-id="heading-5">å¯åŠ¨æ™ºèƒ½ä½“æœåŠ¡å™¨</h2>
<p>åœ¨æœ¬åœ°å¯åŠ¨æ™ºèƒ½ä½“æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">langgraph dev
</code></pre>
<p>langgraph dev å‘½ä»¤ä¼šä»¥å†…å­˜æ¨¡å¼ï¼ˆin-memory modeï¼‰å¯åŠ¨æ™ºèƒ½ä½“æœåŠ¡å™¨ï¼ˆAgent Serverï¼‰ã€‚æ­¤æ¨¡å¼é€‚ç”¨äºå¼€å‘å’Œæµ‹è¯•åœºæ™¯ã€‚</p>
<h2 data-id="heading-6">æµ‹è¯•API</h2>
<p>å®‰è£…LangGraph Python SDK</p>
<pre><code class="hljs language-bash" lang="bash">pip install langgraph-sdk
</code></pre>
<p>æµ‹è¯•API</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph_sdk <span class="hljs-keyword">import</span> get_client
<span class="hljs-keyword">import</span> asyncio

client = get_client(url=<span class="hljs-string">"http://localhost:2024"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> client.runs.stream(
        <span class="hljs-literal">None</span>,  <span class="hljs-comment"># Threadless run</span>
        <span class="hljs-string">"agent"</span>, <span class="hljs-comment"># Name of assistant. Defined in langgraph.json.</span>
        <span class="hljs-built_in">input</span>={
        <span class="hljs-string">"messages"</span>: [{
            <span class="hljs-string">"role"</span>: <span class="hljs-string">"human"</span>,
            <span class="hljs-string">"content"</span>: <span class="hljs-string">"What is LangGraph?"</span>,
            }],
        },
    ):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Receiving new event of type: <span class="hljs-subst">{chunk.event}</span>..."</span>)
        <span class="hljs-built_in">print</span>(chunk.data)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n\n"</span>)

asyncio.run(main())
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» GPT-4 åˆ° Gemini 3 Proï¼šä¸€ä¸ªäº”å­æ£‹æ¸¸æˆè§è¯çš„ AI ä¸¤å¹´è¿›åŒ–å²]]></title>    <link>https://juejin.cn/post/7573995798603251727</link>    <guid>https://juejin.cn/post/7573995798603251727</guid>    <pubDate>2025-11-19T06:20:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573995798603251727" data-draft-id="7573989365614280704" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» GPT-4 åˆ° Gemini 3 Proï¼šä¸€ä¸ªäº”å­æ£‹æ¸¸æˆè§è¯çš„ AI ä¸¤å¹´è¿›åŒ–å²"/> <meta itemprop="keywords" content="Gemini"/> <meta itemprop="datePublished" content="2025-11-19T06:20:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— æ³•é£"/> <meta itemprop="url" content="https://juejin.cn/user/2506542240789629"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» GPT-4 åˆ° Gemini 3 Proï¼šä¸€ä¸ªäº”å­æ£‹æ¸¸æˆè§è¯çš„ AI ä¸¤å¹´è¿›åŒ–å²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2506542240789629/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— æ³•é£
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.5 å¦‚é±¼å¾—æ°´
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.5 å¦‚é±¼å¾—æ°´" title="VIP.5 å¦‚é±¼å¾—æ°´" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T06:20:22.000Z" title="Wed Nov 19 2025 06:20:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å‰è¨€</strong></p>
<p>ä¸¤å¹´å‰ï¼Œå½“ GPT-4 åˆšåˆšæ¨ªç©ºå‡ºä¸–æ—¶ï¼Œæˆ‘æ€€ç€æ¿€åŠ¨çš„å¿ƒæƒ…å°è¯•ç”¨å®ƒå†™ä¸€ä¸ªäº”å­æ£‹æ¸¸æˆã€‚é‚£æ®µç»å†æˆ‘è®°å½•åœ¨äº†æ˜é‡‘æ–‡ç« ã€Š<a href="https://juejin.cn/post/7212491760734355516" target="_blank" title="https://juejin.cn/post/7212491760734355516">GPT-4å¤šè½®å¯¹è¯ç”Ÿæˆäº”å­æ£‹æ¸¸æˆ</a>ã€‹ä¸­ã€‚å½“æ—¶ï¼Œä¸ºäº†å¾—åˆ°ä¸€ä¸ªèƒ½è·‘çš„ Demoï¼Œæˆ‘ä¸ GPT-4 è¿›è¡Œäº†æ¼«é•¿çš„å¤šè½®å¯¹è¯ï¼šä¿®å¤ Bugã€è°ƒæ•´æ ·å¼ã€çº æ­£é€»è¾‘ï¼Œä»¿ä½›åœ¨å¸¦ä¸€ä¸ªè™½ç„¶èªæ˜ä½†ç”±äºâ€œå¥å¿˜â€å’Œâ€œç²—å¿ƒâ€è€Œéœ€è¦ä¸æ–­çº æ­£çš„å®ä¹ ç”Ÿã€‚</p>
<p>æ—¶å…‰èè‹’ï¼Œä¸¤å¹´åçš„ä»Šå¤©ï¼Œæˆ‘æ‹¿åˆ°äº† <strong>Gemini 3 Pro</strong>ã€‚æŠ±ç€åŒæ ·çš„å‘½é¢˜ï¼Œæˆ‘å†æ¬¡è¾“å…¥äº†é‚£ä¸ªéœ€æ±‚ï¼šâ€œå¸®æˆ‘å†™ä¸€ä¸ªäº”å­æ£‹äººæœºå¯¹æˆ˜æ¸¸æˆâ€ã€‚</p>
<p>è¿™ä¸€æ¬¡ï¼Œæ²¡æœ‰å¤šè½®å¯¹è¯ï¼Œæ²¡æœ‰æŠ¥é”™è°ƒè¯•ã€‚å®ƒç›´æ¥ç”©ç»™äº†æˆ‘ä¸€ä¸ªå•æ–‡ä»¶ï¼Œæˆ‘å¤åˆ¶ã€ç²˜è´´ã€æ‰“å¼€â€”â€”<strong>å®ƒä¸ä»…èƒ½è·‘ï¼Œè€Œä¸”â€œæ‡‚â€æˆ˜æœ¯ï¼Œç”šè‡³è¿ UI çš„æ¸å˜è‰²éƒ½åšå¥½äº†ã€‚</strong></p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œä¸ä»…æ˜¯å¯¹ä»£ç çš„å¤ç›˜ï¼Œæ›´æ˜¯å¯¹è¿™ä¸¤å¹´ AI å‘å±•é€Ÿåº¦çš„ä¸€æ¬¡å¾®è§‚è§è¯ã€‚</p>
<h2 data-id="heading-0">1. ç›´è§‚å¯¹æ¯”ï¼šä»â€œæ‹¼ç§¯æœ¨â€åˆ°â€œ3Dæ‰“å°â€</h2>
<h3 data-id="heading-1">ä¸¤å¹´å‰çš„ GPT-4 ä½“éªŒ</h3>
<p>åœ¨ä¸¤å¹´å‰çš„é‚£ç¯‡æ–‡ç« ä¸­ï¼Œå¼€å‘è¿‡ç¨‹æ˜¯ç¢ç‰‡åŒ–çš„ï¼š</p>
<ol>
<li><strong>ä¸Šä¸‹æ–‡ä¸¢å¤±</strong>ï¼šä»£ç å¤ªé•¿æ—¶ï¼ŒGPT-4 ä¼šä¸­æ–­ï¼Œéœ€è¦æˆ‘æç¤ºâ€œç»§ç»­â€ã€‚</li>
<li><strong>é€»è¾‘å‰²è£‚</strong>ï¼šHTMLã€CSS å’Œ JS å¾€å¾€æ˜¯åˆ†å¼€ç”Ÿæˆçš„ï¼Œéœ€è¦æˆ‘æ‰‹åŠ¨ç»„è£…ã€‚</li>
<li><strong>è°ƒè¯•å¾ªç¯</strong>ï¼šæœ€å¼€å§‹ç”Ÿæˆçš„ AI é€»è¾‘ç»å¸¸åªä¼šéšæœºè½å­ï¼Œæˆ–è€…ä¸ä»…ä¸å µæˆ‘çš„æ£‹ï¼Œè¿˜ä¸‹åœ¨å·²ç»è¢«å ç”¨çš„æ ¼å­ä¸Šã€‚æˆ‘éœ€è¦åå¤å‘Šè¯‰å®ƒï¼šâ€œä½ è¿™é‡Œé€»è¾‘ä¸å¯¹ï¼Œåº”è¯¥å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç©ºâ€ã€‚</li>
</ol>
<h3 data-id="heading-2">ä»Šå¤©çš„ Gemini 3 Pro ä½“éªŒ</h3>
<p>è¿™æ˜¯ Gemini 3 Pro ç»™æˆ‘ç”Ÿæˆçš„å®Œæ•´ä»£ç ï¼ˆè§æ–‡æœ«é™„å½•ï¼‰ã€‚</p>
<p><strong>ç»“æœæ˜¯æƒŠäººçš„ï¼š</strong></p>
<ul>
<li><strong>One-Shotï¼ˆä¸€æ¬¡æˆå‹ï¼‰</strong> ï¼šå®ƒåœ¨ä¸€ä¸ª HTML æ–‡ä»¶ä¸­å®Œæ•´å°è£…äº†ç»“æ„ã€æ ·å¼å’Œé€»è¾‘ï¼Œæ²¡æœ‰ä»»ä½•æˆªæ–­ã€‚</li>
<li><strong>å®¡ç¾åœ¨çº¿</strong>ï¼šå®ƒæ²¡æœ‰ç»™æˆ‘ä¸€ä¸ªé»‘ç™½æ ¼å­çš„ç®€é™‹æ£‹ç›˜ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨äº† <code>#dcb35c</code> æœ¨çº¹åº•è‰²ï¼Œæ£‹å­ç”šè‡³ä½¿ç”¨äº† <code>RadialGradient</code> å¾„å‘æ¸å˜æ¥æ¨¡æ‹Ÿå…‰å½±ç«‹ä½“æ„Ÿã€‚</li>
<li><strong>é€»è¾‘å®Œå¤‡</strong>ï¼šèµ¢æ³•æ•°ç»„ (<code>wins</code>)ã€èµ¢æ³•ç»Ÿè®¡ (<code>myWin</code>, <code>computerWin</code>)ã€å¯å‘å¼è¯„åˆ† (<code>myScore</code>, <code>computerScore</code>) ä¸€æ°”å‘µæˆã€‚</li>
</ul>
<h2 data-id="heading-3">2. ä»£ç æ·±åº¦è§£æï¼šAI çœŸçš„æ‡‚â€œç®—æ³•â€äº†</h2>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ Gemini 3 Pro ç”Ÿæˆçš„æ ¸å¿ƒ AI é€»è¾‘ï¼Œè¿™åœ¨ä¸¤å¹´å‰æ˜¯éœ€è¦æˆ‘å¼•å¯¼å¾ˆä¹…æ‰èƒ½å†™å‡ºæ¥çš„ã€‚</p>
<h3 data-id="heading-4">èµ¢æ³•æ•°ç»„çš„é¢„è®¡ç®—</h3>
<p>ä»£ç ä¸­æœ‰ä¸€ä¸ªéå¸¸ç»å…¸çš„äº”å­æ£‹ç®—æ³•å®ç°â€”â€”<strong>èµ¢æ³•æ•°ç»„</strong>ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åˆå§‹åŒ–èµ¢æ³•æ•°ç»„</span>
<span class="hljs-function">function <span class="hljs-title">initWins</span>()</span>{
    <span class="hljs-comment">// ... çœç•¥å¾ªç¯ ...</span>
    <span class="hljs-comment">// æ¨ªçº¿ã€ç«–çº¿ã€æ–œçº¿ã€åæ–œçº¿</span>
    <span class="hljs-comment">// ç»Ÿè®¡å‡ºæ‰€æœ‰å¯èƒ½è¿æˆ5å­çš„çº¿ï¼Œæ€»å…±572ç§ï¼ˆ15x15æ£‹ç›˜ï¼‰</span>
}
</code></pre>
<p>Gemini 3 Pro åœ¨åˆå§‹åŒ–æ—¶ï¼Œç›´æ¥è®¡ç®—äº†æ£‹ç›˜ä¸Šæ‰€æœ‰æ¨ªã€ç«–ã€æ’‡ã€æºèƒ½æ„æˆäº”è¿ç çš„æƒ…å†µï¼Œå¹¶åœ¨å†…å­˜ä¸­æ„å»ºäº†ä¸€ä¸ªä¸‰ç»´æ•°ç»„ã€‚è¿™æ„å‘³ç€å®ƒâ€œçŸ¥é“â€äº”å­æ£‹çš„èƒœåˆ©æ¡ä»¶ä¸ä»…ä»…æ˜¯â€œçœ‹åˆ°5ä¸ªå­â€ï¼Œè€Œæ˜¯åŸºäºæ•°å­¦ä¸Šçš„ç»„åˆå¯èƒ½æ€§ã€‚</p>
<h3 data-id="heading-5">å¯å‘å¼è¯„åˆ†ç³»ç»Ÿ</h3>
<p>æœ€è®©æˆ‘æƒŠè®¶çš„æ˜¯ <code>computerAI</code> å‡½æ•°ä¸­çš„è¯„åˆ†é€»è¾‘ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ‹¦æˆªç©å®¶</span>
<span class="hljs-built_in">if</span>(myWin[k] == <span class="hljs-number">1</span>) myScore<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> += <span class="hljs-number">200</span>;
else <span class="hljs-built_in">if</span>(myWin[k] == <span class="hljs-number">2</span>) myScore<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> += <span class="hljs-number">400</span>;
else <span class="hljs-built_in">if</span>(myWin[k] == <span class="hljs-number">3</span>) myScore<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> += <span class="hljs-number">2000</span>;
else <span class="hljs-built_in">if</span>(myWin[k] == <span class="hljs-number">4</span>) myScore<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> += <span class="hljs-number">10000</span>;

<span class="hljs-comment">// ç”µè„‘è¿›æ”»</span>
<span class="hljs-built_in">if</span>(computerWin[k] == <span class="hljs-number">1</span>) computerScore<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> += <span class="hljs-number">220</span>;
else <span class="hljs-built_in">if</span>(computerWin[k] == <span class="hljs-number">2</span>) computerScore<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> += <span class="hljs-number">420</span>;
else <span class="hljs-built_in">if</span>(computerWin[k] == <span class="hljs-number">3</span>) computerScore<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> += <span class="hljs-number">2100</span>;
else <span class="hljs-built_in">if</span>(computerWin[k] == <span class="hljs-number">4</span>) computerScore<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> += <span class="hljs-number">20000</span>;
</code></pre>
<p><strong>æ³¨æ„è¿™é‡Œçš„ç»†èŠ‚ï¼š</strong></p>
<ol>
<li><strong>æ”»å®ˆå…¼å¤‡</strong>ï¼šå®ƒåŒæ—¶è®¡ç®—äº†â€œå°å µç©å®¶â€çš„åˆ†æ•°å’Œâ€œè‡ªå·±è¿›æ”»â€çš„åˆ†æ•°ã€‚</li>
<li><strong>æƒé‡å·®å¼‚</strong>ï¼šæ³¨æ„çœ‹ï¼ŒåŒæ ·æ˜¯è¿3å­ï¼Œç”µè„‘è¿›æ”»çš„åˆ†æ•° (2100) ç•¥é«˜äºæ‹¦æˆªç©å®¶çš„åˆ†æ•° (2000)ã€‚è¿™è¯´æ˜ AI è¢«è®¾å®šä¸º**â€œåœ¨ç¡®ä¿å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆè¿›æ”»â€**çš„æ¿€è¿›ç­–ç•¥ã€‚</li>
<li><strong>ç»æ€åˆ¤æ–­</strong>ï¼šå½“è¾¾åˆ° 4 å­æ—¶ï¼Œåˆ†æ•°ç›´æ¥è·³è·ƒåˆ°ä¸‡çº§ï¼Œç¡®ä¿ AI èƒ½å¤Ÿè¯†åˆ«â€œå†²å››â€å’Œâ€œé˜²å®ˆå†²å››â€çš„æœ€é«˜ä¼˜å…ˆçº§ã€‚</li>
</ol>
<p>ä¸¤å¹´å‰ï¼ŒGPT-4 ç”Ÿæˆçš„ä»£ç å¾€å¾€åªæ˜¯éšæœºæ‰¾ç©ºä½ï¼Œæˆ–è€…ä»…ä»…åˆ¤æ–­å‘¨å›´ä¸€æ ¼æ˜¯å¦æœ‰å­ã€‚è€Œç°åœ¨çš„ Gemini 3 Pro ç›´æ¥å†™å‡ºäº†ä¸€ä¸ªå…·å¤‡<strong>è´ªå¿ƒç®—æ³•</strong>é›å½¢çš„ AIã€‚</p>
<h2 data-id="heading-6">3. ä¸¤å¹´çš„æŠ€æœ¯è·¨è¶Šï¼šæˆ‘ä»¬ç»å†äº†ä»€ä¹ˆï¼Ÿ</h2>
<p>é€šè¿‡è¿™ä¸ªäº”å­æ£‹ Demoï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ° AI è¿›åŒ–çš„ä¸‰ä¸ªç»´åº¦ï¼š</p>
<h3 data-id="heading-7">1. ä¸Šä¸‹æ–‡çª—å£ä¸æ¨ç†æ·±åº¦çš„è´¨å˜</h3>
<p>ä¸¤å¹´å‰ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå¤§ä»»åŠ¡æ‹†è§£æˆå°ä»»åŠ¡å–‚ç»™ AIã€‚ç°åœ¨ï¼ŒGemini 3 Pro çš„ä¸Šä¸‹æ–‡çª—å£å’Œæ¨ç†èƒ½åŠ›å…è®¸å®ƒåœ¨ä¸€æ¬¡è¾“å‡ºä¸­å¤„ç†<strong>å…¨å±€ä¾èµ–</strong>ã€‚å®ƒæ¸…æ¥šå®šä¹‰åœ¨ç¬¬ 10 è¡Œçš„ CSS ç±»åéœ€è¦åœ¨ç¬¬ 50 è¡Œçš„ HTML ä¸­ä½¿ç”¨ï¼Œä»¥åŠç¬¬ 100 è¡Œçš„ JS é€»è¾‘è¦æ“ä½œç¬¬ 20 è¡Œçš„ Canvas DOMã€‚è¿™ç§<strong>å…¨å±€ä¸€è‡´æ€§</strong>æ˜¯æœ€å¤§çš„è¿›æ­¥ã€‚</p>
<h3 data-id="heading-8">2. ä»â€œæ¨¡ä»¿è€…â€åˆ°â€œå·¥ç¨‹å¸ˆâ€</h3>
<p>ä»¥å‰çš„ AI åƒæ˜¯åœ¨ Stack Overflow ä¸Šæœç´¢ä»£ç ç‰‡æ®µå¹¶æ‹¼æ¥ï¼ˆå¸¸å¸¸æ‹¼é”™ï¼‰ã€‚ç°åœ¨çš„ AI æ›´åƒæ˜¯ä¸€ä¸ªå·¥ç¨‹å¸ˆã€‚å®ƒè€ƒè™‘äº†ï¼š</p>
<ul>
<li><strong>UI äº¤äº’</strong>ï¼šç‚¹å‡»åç¨ä½œå»¶è¿Ÿ (<code>setTimeout</code>) å†è®©ç”µè„‘è½å­ï¼Œä¸ºäº†è®© UI åˆ·æ–°ï¼Œé¿å…æµè§ˆå™¨å‡æ­»ã€‚</li>
<li><strong>è¾¹ç•Œæ¡ä»¶</strong>ï¼šæ¸¸æˆç»“æŸåé”å®šç‚¹å‡»äº‹ä»¶ (<code>if (over) return</code>)ã€‚</li>
<li><strong>ä»£ç è§„èŒƒ</strong>ï¼šå˜é‡å‘½åæ¸…æ™°ï¼Œæ³¨é‡Šè¯¦å°½ã€‚</li>
</ul>
<h3 data-id="heading-9">3. å¤šæ¨¡æ€ç†è§£çš„åå“º</h3>
<p>è™½ç„¶è¿™æ¬¡æ˜¯çº¯ä»£ç ç”Ÿæˆï¼Œä½† Gemini 3 Pro å¯¹é¢œè‰²çš„è¿ç”¨ï¼ˆæœ¨çº¹è‰²ã€æ¸å˜æ£‹å­ï¼‰æš—ç¤ºäº†å®ƒå¯¹ç‰©ç†ä¸–ç•Œâ€œäº”å­æ£‹â€è§†è§‰æ ·è²Œçš„æ·±åˆ»ç†è§£ã€‚å®ƒä¸ä»…ä»…æ˜¯åœ¨å†™ä»£ç ï¼Œå®ƒæ˜¯åœ¨â€œæ„å»ºâ€ä¸€ä¸ªå®ƒè®¤çŸ¥ä¸­çš„æ¸¸æˆåœºæ™¯ã€‚</p>
<h2 data-id="heading-10">4. ç»“è¯­</h2>
<p>ä¸¤å¹´å‰ï¼Œæˆ‘åœ¨ Juejin æ–‡ç« çš„ç»“å°¾å¯èƒ½è¿˜åœ¨æ„Ÿå¹ï¼šâ€œAI è¾…åŠ©ç¼–ç¨‹çš„æ—¶ä»£æ¥äº†ï¼Œä½†è¿˜éœ€è¦äººæ¥æŠŠå…³ã€‚â€</p>
<p>ä»Šå¤©ï¼Œçœ‹ç€ Gemini 3 Pro ç”Ÿæˆçš„è¿™ä¸ªæ— éœ€ä¿®æ”¹ã€ç›´æ¥è¿è¡Œã€ç”šè‡³æœ‰ç‚¹éš¾èµ¢çš„äº”å­æ£‹æ¸¸æˆï¼Œæˆ‘å¿…é¡»æ›´æ–°æˆ‘çš„è§‚ç‚¹ï¼š<strong>AI å·²ç»ä»â€œå‰¯é©¾é©¶â€å¼€å§‹å°è¯•æ¡ä½æ–¹å‘ç›˜äº†ã€‚</strong></p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œè¿™æ„å‘³ç€é—¨æ§›çš„å†ä¸€æ¬¡æé«˜å’Œé™ä½â€”â€”ç¼–å†™åŸºç¡€ä»£ç çš„é—¨æ§›é™åˆ°äº†é›¶ï¼Œä½†ç†è§£å¤æ‚ç³»ç»Ÿã€ä¼˜åŒ–ç®—æ³•æƒé‡çš„é—¨æ§›ä¾ç„¶å­˜åœ¨ã€‚</p>
<p>é™„ï¼šGemini 3 Pro ç”Ÿæˆçš„å®Œæ•´ä»£ç ä¸æ•ˆæœå›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de04beb2ab6e4423a01d8d880a0562ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5peg5rOV6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138021&amp;x-signature=1Lw6ieN4JvObhev8xuvK%2FeYzaAY%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>äº”å­æ£‹äººæœºå¯¹æˆ˜<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">body</span> {
            <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Microsoft YaHei'</span>, sans-serif;
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f0f0f0</span>;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">flex-direction</span>: column;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">justify-content</span>: center;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
        }

        <span class="hljs-selector-tag">h1</span> {
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
        }

        <span class="hljs-selector-id">#game-container</span> {
            <span class="hljs-attribute">position</span>: relative;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-number">25px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.5</span>);
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#dcb35c</span>; <span class="hljs-comment">/* æœ¨çº¹åº•è‰² */</span>
        }

        <span class="hljs-selector-tag">canvas</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#dcb35c</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute">display</span>: block;
        }

        <span class="hljs-selector-class">.status-bar</span> {
            <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">align-items</span>: center;
        }

        <span class="hljs-selector-id">#status</span> {
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2em</span>;
            <span class="hljs-attribute">font-weight</span>: bold;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
        }

        <span class="hljs-selector-tag">button</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1em</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4CAF50</span>;
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">border</span>: none;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
            <span class="hljs-attribute">transition</span>: background <span class="hljs-number">0.3s</span>;
        }

        <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#45a049</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>äº”å­æ£‹ - äººæœºå¯¹æˆ˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"game-container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chess"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"450"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"450"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"status-bar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"status"</span>&gt;</span>å½“å‰å›åˆ: ç©å®¶ (é»‘æ£‹)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"restartGame()"</span>&gt;</span>é‡æ–°å¼€å§‹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// é…ç½®å‚æ•°</span>
        <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chess'</span>);
        <span class="hljs-keyword">const</span> context = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
        <span class="hljs-keyword">const</span> statusText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'status'</span>);
        
        <span class="hljs-keyword">const</span> gridSize = <span class="hljs-number">30</span>; <span class="hljs-comment">// æ ¼å­å¤§å°</span>
        <span class="hljs-keyword">const</span> padding = <span class="hljs-number">15</span>;  <span class="hljs-comment">// æ£‹ç›˜è¾¹ç¼˜ç•™ç™½</span>
        <span class="hljs-keyword">const</span> boardSize = <span class="hljs-number">15</span>; <span class="hljs-comment">// 15x15 æ£‹ç›˜</span>
        
        <span class="hljs-keyword">let</span> chessBoard = []; <span class="hljs-comment">// æ£‹ç›˜çŠ¶æ€æ•°ç»„ 0:ç©º, 1:é»‘(ç©å®¶), 2:ç™½(ç”µè„‘)</span>
        <span class="hljs-keyword">let</span> me = <span class="hljs-literal">true</span>; <span class="hljs-comment">// true: ç©å®¶å›åˆ, false: ç”µè„‘å›åˆ</span>
        <span class="hljs-keyword">let</span> over = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ¸¸æˆç»“æŸæ ‡å¿—</span>
        
        <span class="hljs-comment">//èµ¢æ³•æ•°ç»„</span>
        <span class="hljs-keyword">let</span> wins = [];
        <span class="hljs-comment">//èµ¢æ³•ç»Ÿè®¡æ•°ç»„</span>
        <span class="hljs-keyword">let</span> myWin = [];
        <span class="hljs-keyword">let</span> computerWin = [];
        <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>; <span class="hljs-comment">// èµ¢æ³•æ€»æ•°</span>

        <span class="hljs-comment">// åˆå§‹åŒ–æ¸¸æˆ</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-title function_">initGame</span>();
        };

        <span class="hljs-keyword">function</span> <span class="hljs-title function_">initGame</span>(<span class="hljs-params"/>) {
            <span class="hljs-comment">// é‡ç½®å˜é‡</span>
            me = <span class="hljs-literal">true</span>;
            over = <span class="hljs-literal">false</span>;
            chessBoard = [];
            statusText.<span class="hljs-property">innerText</span> = <span class="hljs-string">"å½“å‰å›åˆ: ç©å®¶ (é»‘æ£‹)"</span>;
            statusText.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">"#333"</span>;

            <span class="hljs-comment">// åˆå§‹åŒ–æ£‹ç›˜æ•°ç»„</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; boardSize; i++){
                chessBoard[i] = [];
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; boardSize; j++){
                    chessBoard[i][j] = <span class="hljs-number">0</span>;
                }
            }

            <span class="hljs-comment">// åˆå§‹åŒ–èµ¢æ³•ç»Ÿè®¡</span>
            <span class="hljs-title function_">initWins</span>();
            
            <span class="hljs-comment">// ç»˜åˆ¶æ£‹ç›˜</span>
            <span class="hljs-title function_">drawChessBoard</span>();
        }

        <span class="hljs-comment">// ç»˜åˆ¶æ£‹ç›˜ç½‘æ ¼</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">drawChessBoard</span>(<span class="hljs-params"/>) {
            context.<span class="hljs-title function_">clearRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.<span class="hljs-property">width</span>, canvas.<span class="hljs-property">height</span>);
            context.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">"#555"</span>;
            
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; boardSize; i++) {
                <span class="hljs-comment">// ç«–çº¿</span>
                context.<span class="hljs-title function_">moveTo</span>(padding + i * gridSize, padding);
                context.<span class="hljs-title function_">lineTo</span>(padding + i * gridSize, canvas.<span class="hljs-property">height</span> - padding);
                context.<span class="hljs-title function_">stroke</span>();
                <span class="hljs-comment">// æ¨ªçº¿</span>
                context.<span class="hljs-title function_">moveTo</span>(padding, padding + i * gridSize);
                context.<span class="hljs-title function_">lineTo</span>(canvas.<span class="hljs-property">width</span> - padding, padding + i * gridSize);
                context.<span class="hljs-title function_">stroke</span>();
            }
        }

        <span class="hljs-comment">// ç»˜åˆ¶æ£‹å­</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">oneStep</span>(<span class="hljs-params">i, j, me</span>) {
            context.<span class="hljs-title function_">beginPath</span>();
            context.<span class="hljs-title function_">arc</span>(padding + i * gridSize, padding + j * gridSize, <span class="hljs-number">13</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>);
            context.<span class="hljs-title function_">closePath</span>();
            
            <span class="hljs-keyword">let</span> gradient = context.<span class="hljs-title function_">createRadialGradient</span>(
                padding + i * gridSize + <span class="hljs-number">2</span>, padding + j * gridSize - <span class="hljs-number">2</span>, <span class="hljs-number">13</span>, 
                padding + i * gridSize + <span class="hljs-number">2</span>, padding + j * gridSize - <span class="hljs-number">2</span>, <span class="hljs-number">0</span>
            );

            <span class="hljs-keyword">if</span> (me) { <span class="hljs-comment">// é»‘æ£‹</span>
                gradient.<span class="hljs-title function_">addColorStop</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"#0a0a0a"</span>);
                gradient.<span class="hljs-title function_">addColorStop</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"#636766"</span>);
            } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// ç™½æ£‹</span>
                gradient.<span class="hljs-title function_">addColorStop</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"#d1d1d1"</span>);
                gradient.<span class="hljs-title function_">addColorStop</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"#f9f9f9"</span>);
            }
            
            context.<span class="hljs-property">fillStyle</span> = gradient;
            context.<span class="hljs-title function_">fill</span>();
        }

        <span class="hljs-comment">// ç©å®¶ç‚¹å‡»è½å­</span>
        canvas.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
            <span class="hljs-keyword">if</span> (over || !me) <span class="hljs-keyword">return</span>;

            <span class="hljs-keyword">let</span> x = e.<span class="hljs-property">offsetX</span>;
            <span class="hljs-keyword">let</span> y = e.<span class="hljs-property">offsetY</span>;
            
            <span class="hljs-keyword">let</span> i = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(x / gridSize);
            <span class="hljs-keyword">let</span> j = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(y / gridSize);

            <span class="hljs-keyword">if</span> (chessBoard[i][j] == <span class="hljs-number">0</span>) {
                <span class="hljs-title function_">oneStep</span>(i, j, <span class="hljs-literal">true</span>);
                chessBoard[i][j] = <span class="hljs-number">1</span>; <span class="hljs-comment">// 1ä»£è¡¨é»‘æ£‹</span>

                <span class="hljs-comment">// æ£€æŸ¥ç©å®¶æ˜¯å¦èƒœåˆ©</span>
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k = <span class="hljs-number">0</span>; k &lt; count; k++){
                    <span class="hljs-keyword">if</span>(wins[i][j][k]){
                        myWin[k]++;
                        computerWin[k] = <span class="hljs-number">6</span>; <span class="hljs-comment">// è®¾ç½®å¼‚å¸¸å€¼ï¼Œå› ä¸ºå¯¹æ–¹ä¸å¯èƒ½åœ¨è¿™ä¸ªèµ¢æ³•ä¸Šèµ¢äº†</span>
                        <span class="hljs-keyword">if</span>(myWin[k] == <span class="hljs-number">5</span>){
                            statusText.<span class="hljs-property">innerText</span> = <span class="hljs-string">"æ­å–œä½ ï¼ä½ èµ¢äº†ï¼"</span>;
                            statusText.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">"red"</span>;
                            over = <span class="hljs-literal">true</span>;
                        }
                    }
                }

                <span class="hljs-keyword">if</span> (!over) {
                    me = !me;
                    statusText.<span class="hljs-property">innerText</span> = <span class="hljs-string">"å½“å‰å›åˆ: ç”µè„‘ (æ€è€ƒä¸­...)"</span>;
                    <span class="hljs-built_in">setTimeout</span>(computerAI, <span class="hljs-number">50</span>); <span class="hljs-comment">// ç¨ä½œå»¶è¿Ÿï¼Œè®©UIåˆ·æ–°</span>
                }
            }
        }

        <span class="hljs-comment">// ç”µè„‘AIé€»è¾‘</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">computerAI</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">let</span> myScore = []; <span class="hljs-comment">// ç©å®¶åˆ†æ•°ï¼ˆé˜²å®ˆï¼‰</span>
            <span class="hljs-keyword">let</span> computerScore = []; <span class="hljs-comment">// ç”µè„‘åˆ†æ•°ï¼ˆè¿›æ”»ï¼‰</span>
            <span class="hljs-keyword">let</span> max = <span class="hljs-number">0</span>; <span class="hljs-comment">// æœ€é«˜åˆ†</span>
            <span class="hljs-keyword">let</span> u = <span class="hljs-number">0</span>, v = <span class="hljs-number">0</span>; <span class="hljs-comment">// æœ€ä½³è½å­ç‚¹</span>

            <span class="hljs-comment">// åˆå§‹åŒ–åˆ†æ•°æ•°ç»„</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; boardSize; i++){
                myScore[i] = [];
                computerScore[i] = [];
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; boardSize; j++){
                    myScore[i][j] = <span class="hljs-number">0</span>;
                    computerScore[i][j] = <span class="hljs-number">0</span>;
                }
            }

            <span class="hljs-comment">// éå†æ£‹ç›˜æ‰€æœ‰ç©ºç‚¹è¿›è¡Œè¯„åˆ†</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; boardSize; i++){
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; boardSize; j++){
                    <span class="hljs-keyword">if</span>(chessBoard[i][j] == <span class="hljs-number">0</span>){
                        <span class="hljs-comment">// éå†æ‰€æœ‰èµ¢æ³•</span>
                        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k = <span class="hljs-number">0</span>; k &lt; count; k++){
                            <span class="hljs-keyword">if</span>(wins[i][j][k]){
                                <span class="hljs-comment">// è®¡ç®—æ‹¦æˆªç©å®¶çš„åˆ†æ•°</span>
                                <span class="hljs-keyword">if</span>(myWin[k] == <span class="hljs-number">1</span>) myScore[i][j] += <span class="hljs-number">200</span>;
                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(myWin[k] == <span class="hljs-number">2</span>) myScore[i][j] += <span class="hljs-number">400</span>;
                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(myWin[k] == <span class="hljs-number">3</span>) myScore[i][j] += <span class="hljs-number">2000</span>;
                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(myWin[k] == <span class="hljs-number">4</span>) myScore[i][j] += <span class="hljs-number">10000</span>;

                                <span class="hljs-comment">// è®¡ç®—ç”µè„‘è¿›æ”»çš„åˆ†æ•°</span>
                                <span class="hljs-keyword">if</span>(computerWin[k] == <span class="hljs-number">1</span>) computerScore[i][j] += <span class="hljs-number">220</span>;
                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(computerWin[k] == <span class="hljs-number">2</span>) computerScore[i][j] += <span class="hljs-number">420</span>;
                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(computerWin[k] == <span class="hljs-number">3</span>) computerScore[i][j] += <span class="hljs-number">2100</span>;
                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(computerWin[k] == <span class="hljs-number">4</span>) computerScore[i][j] += <span class="hljs-number">20000</span>;
                            }
                        }

                        <span class="hljs-comment">// ç»¼åˆè¯„åˆ†ï¼Œå†³å®šæœ€ä½³è½å­</span>
                        <span class="hljs-comment">// åªè¦è¯¥ç‚¹æ€»åˆ†æ¯”å½“å‰æœ€é«˜åˆ†é«˜ï¼Œå°±æ›´æ–°</span>
                        <span class="hljs-keyword">if</span>(myScore[i][j] &gt; max){
                            max = myScore[i][j];
                            u = i; v = j;
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(myScore[i][j] == max){
                            <span class="hljs-keyword">if</span>(computerScore[i][j] &gt; computerScore[u][v]){
                                u = i; v = j;
                            }
                        }
                        
                        <span class="hljs-keyword">if</span>(computerScore[i][j] &gt; max){
                            max = computerScore[i][j];
                            u = i; v = j;
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(computerScore[i][j] == max){
                            <span class="hljs-keyword">if</span>(myScore[i][j] &gt; myScore[u][v]){
                                u = i; v = j;
                            }
                        }
                    }
                }
            }

            <span class="hljs-comment">// ç”µè„‘è½å­</span>
            <span class="hljs-title function_">oneStep</span>(u, v, <span class="hljs-literal">false</span>);
            chessBoard[u][v] = <span class="hljs-number">2</span>; <span class="hljs-comment">// 2ä»£è¡¨ç™½æ£‹</span>

            <span class="hljs-comment">// æ£€æŸ¥ç”µè„‘æ˜¯å¦èƒœåˆ©</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k = <span class="hljs-number">0</span>; k &lt; count; k++){
                <span class="hljs-keyword">if</span>(wins[u][v][k]){
                    computerWin[k]++;
                    myWin[k] = <span class="hljs-number">6</span>;
                    <span class="hljs-keyword">if</span>(computerWin[k] == <span class="hljs-number">5</span>){
                        statusText.<span class="hljs-property">innerText</span> = <span class="hljs-string">"é—æ†¾ï¼Œç”µè„‘èµ¢äº†ï¼"</span>;
                        statusText.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">"blue"</span>;
                        over = <span class="hljs-literal">true</span>;
                    }
                }
            }

            <span class="hljs-keyword">if</span> (!over) {
                me = !me;
                statusText.<span class="hljs-property">innerText</span> = <span class="hljs-string">"å½“å‰å›åˆ: ç©å®¶ (é»‘æ£‹)"</span>;
            }
        }

        <span class="hljs-comment">// åˆå§‹åŒ–èµ¢æ³•æ•°ç»„ï¼ˆè¿™æ˜¯ç®—æ³•æ ¸å¿ƒï¼šé¢„å…ˆè®¡ç®—æ‰€æœ‰å¯èƒ½çš„è¿çº¿ï¼‰</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">initWins</span>(<span class="hljs-params"/>){
            wins = [];
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;boardSize; i++){
                wins[i] = [];
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j=<span class="hljs-number">0</span>; j&lt;boardSize; j++){
                    wins[i][j] = [];
                }
            }
            
            count = <span class="hljs-number">0</span>;

            <span class="hljs-comment">// æ¨ªçº¿èµ¢æ³•</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;boardSize; i++){
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j=<span class="hljs-number">0</span>; j&lt;boardSize-<span class="hljs-number">4</span>; j++){
                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k=<span class="hljs-number">0</span>; k&lt;<span class="hljs-number">5</span>; k++){
                        wins[i][j+k][count] = <span class="hljs-literal">true</span>;
                    }
                    count++;
                }
            }

            <span class="hljs-comment">// ç«–çº¿èµ¢æ³•</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;boardSize; i++){
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j=<span class="hljs-number">0</span>; j&lt;boardSize-<span class="hljs-number">4</span>; j++){
                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k=<span class="hljs-number">0</span>; k&lt;<span class="hljs-number">5</span>; k++){
                        wins[j+k][i][count] = <span class="hljs-literal">true</span>;
                    }
                    count++;
                }
            }

            <span class="hljs-comment">// æ–œçº¿èµ¢æ³• ( \ )</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;boardSize-<span class="hljs-number">4</span>; i++){
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j=<span class="hljs-number">0</span>; j&lt;boardSize-<span class="hljs-number">4</span>; j++){
                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k=<span class="hljs-number">0</span>; k&lt;<span class="hljs-number">5</span>; k++){
                        wins[i+k][j+k][count] = <span class="hljs-literal">true</span>;
                    }
                    count++;
                }
            }

            <span class="hljs-comment">// åæ–œçº¿èµ¢æ³• ( / )</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;boardSize-<span class="hljs-number">4</span>; i++){
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j=boardSize-<span class="hljs-number">1</span>; j&gt;<span class="hljs-number">3</span>; j--){
                    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k=<span class="hljs-number">0</span>; k&lt;<span class="hljs-number">5</span>; k++){
                        wins[i+k][j-k][count] = <span class="hljs-literal">true</span>;
                    }
                    count++;
                }
            }

            <span class="hljs-comment">// åˆå§‹åŒ–ç»Ÿè®¡æ•°ç»„</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;count; i++){
                myWin[i] = <span class="hljs-number">0</span>;
                computerWin[i] = <span class="hljs-number">0</span>;
            }
        }

        <span class="hljs-keyword">function</span> <span class="hljs-title function_">restartGame</span>(<span class="hljs-params"/>) {
            <span class="hljs-title function_">initGame</span>();
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº¬ä¸œå¤–å–Appç‹¬ç«‹ä¸Šçº¿ï¼Œè¶…çº§Appå¦‚ä½•é›†æˆæµ·é‡å°ç¨‹åºï¼Ÿ]]></title>    <link>https://juejin.cn/post/7574007967886164031</link>    <guid>https://juejin.cn/post/7574007967886164031</guid>    <pubDate>2025-11-19T06:20:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574007967886164031" data-draft-id="7573993452579274795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº¬ä¸œå¤–å–Appç‹¬ç«‹ä¸Šçº¿ï¼Œè¶…çº§Appå¦‚ä½•é›†æˆæµ·é‡å°ç¨‹åºï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-19T06:20:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FinClip"/> <meta itemprop="url" content="https://juejin.cn/user/395479918322696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº¬ä¸œå¤–å–Appç‹¬ç«‹ä¸Šçº¿ï¼Œè¶…çº§Appå¦‚ä½•é›†æˆæµ·é‡å°ç¨‹åºï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479918322696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FinClip
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T06:20:51.000Z" title="Wed Nov 19 2025 06:20:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>11æœˆ17æ—¥ï¼Œäº¬ä¸œæ­£å¼æ¨å‡ºå¤–å–ç‹¬ç«‹Appï¼Œä¸ä»…æä¾›å¤–å–æœåŠ¡ï¼Œæ›´æ•´åˆäº†â€œå¤–å–+å³æ—¶é›¶å”®+ç‚¹è¯„+é…’æ—…+è´­ç‰©â€ç­‰æœ¬åœ°ç”Ÿæ´»æœåŠ¡äºä¸€ä½“ ã€‚åŒæ—¶ï¼Œå¤–å–Appä¸äº¬ä¸œä¸»ç«™æ‰“é€šï¼ŒåŒæ­¥ä¸Šçº¿äº¬ä¸œç‚¹è¯„å’Œäº¬ä¸œçœŸæ¦œä¸¤å¤§é…å¥—æœåŠ¡ï¼Œæ»¡è¶³â€œæœ¬åœ°ç”Ÿæ´»+æ—¥å¸¸è´­ç‰©â€ç­‰ä¸åŒåœºæ™¯ä¸‹çš„å¤šå…ƒéœ€æ±‚ï¼ŒåŠ ç æœ¬åœ°ç”Ÿæ´»èµ›é“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed494654ab2c496985e0b63a7eb48a25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138051&amp;x-signature=IHHvG97ZcjmOjXUSRzbDMJz10%2B8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>äº¬ä¸œå¤–å–Appç‹¬ç«‹ä¸Šçº¿èƒŒåï¼Œåæ˜ å‡ºä¸€ä¸ªæ˜æ˜¾çš„è¡Œä¸šè¶‹åŠ¿ï¼šåœ¨ç«äº‰æ—¥ç›Šæ¿€çƒˆçš„å¸‚åœºç¯å¢ƒä¸­ï¼Œå¿«é€Ÿæ„å»ºå¤šå…ƒåŒ–æœåŠ¡èƒ½åŠ›ã€æ‰“é€ ä¸€ç«™å¼ç”¨æˆ·ä½“éªŒï¼Œå·²æˆä¸ºä¼ä¸šåº”å¯¹ç«äº‰çš„å…³é”®ä¸¾æªã€‚Â </p>
<p>ç„¶è€Œï¼Œä¼ä¸šè‡ªå»ºå®Œæ•´ç”Ÿæ€/è¶…çº§Appå¾€å¾€é¢ä¸´ç€é‡é‡æŒ‘æˆ˜ï¼š</p>
<p>1.å¤šç«¯å¼€å‘æˆæœ¬é«˜ï¼šä¼ä¸šå¸Œæœ›å¿«é€Ÿå¼•å…¥å¤šå…ƒæœåŠ¡ã€æ„å»ºè‡ªæœ‰ç”Ÿæ€ï¼Œä½†æ¯æ¥å…¥ä¸€é¡¹æ–°ä¸šåŠ¡ï¼Œéƒ½éœ€é’ˆå¯¹iOSã€Androidã€HarmonyOSç­‰ç³»ç»Ÿç‹¬ç«‹å¼€å‘ï¼Œå¯¼è‡´å¼€å‘æˆæœ¬é«˜ã€ä¸Šçº¿å‘¨æœŸé•¿ã€‚Â </p>
<p>2.ä½“éªŒä¸æ€§èƒ½éš¾å…¼é¡¾ï¼šä¼ä¸šæ—¢è¦ä¿è¯å¤šä¸šåŠ¡æ¨¡å—ç‹¬ç«‹å¼€å‘ä¸å¿«é€Ÿä¸Šçº¿ï¼Œåˆè¦åœ¨ä¸åŒç»ˆç«¯ä¸Šæä¾›ç»Ÿä¸€ã€æµç•…çš„åŸç”Ÿç”¨æˆ·ä½“éªŒã€‚Â </p>
<p>3.å®‰å…¨è¿è¥ç®¡æ§éš¾ï¼šéšç€ç”Ÿæ€æœåŠ¡å¢å¤šï¼Œå¦‚ä½•åœ¨ä¸å½±å“ä¸Šçº¿æ•ˆç‡çš„å‰æä¸‹ï¼Œç¡®ä¿å†…å®¹å®‰å…¨å¯æ§ã€åŠŸèƒ½å¹³ç¨³å‘å¸ƒï¼Œå¹¶å®ç°å¤šä¸šåŠ¡çº¿çš„æœ‰åºç®¡ç†ï¼Œæˆä¸ºä¼ä¸šæŒç»­è¿è¥çš„å…³é”®éš¾é¢˜ã€‚</p>
<p>é’ˆå¯¹ä»¥ä¸Šç—›ç‚¹ï¼ŒFinClipè¶…çº§åº”ç”¨æ™ºèƒ½å¹³å°ä»¥â€œä¸€æ¬¡å¼€å‘ã€å¤šç«¯è¿è¡Œâ€ä¸ºæ ¸å¿ƒèƒ½åŠ›ï¼Œä¸ºä¼ä¸šæä¾›æ„å»ºè‡ªä¸»è¶…çº§åº”ç”¨çš„å¯é åº•åº§ã€‚</p>
<p><strong>ä¸€ã€é›†æˆä¸€æ¬¡ï¼Œé€‚é…æ— é™åœºæ™¯</strong></p>
<p>å¦‚åŒäº¬ä¸œå¤–å–Appéœ€è¦æ•´åˆå¤šå…ƒæœåŠ¡ï¼Œä¼ä¸šAppåŒæ ·é¢ä¸´ç€ç”Ÿæ€åŒ–å‘å±•çš„è¿«åˆ‡éœ€æ±‚ã€‚Â </p>
<p>åœ¨é›†æˆFinClipå°ç¨‹åºSDK åï¼Œä¼ä¸šçš„Appæ— è®ºæ˜¯iOS ã€Androidï¼Œè¿˜æ˜¯HarmonyOSçš„Appè®¾å¤‡ä¸Šï¼Œéƒ½èƒ½è·å¾—è¿è¡Œå°ç¨‹åºçš„èƒ½åŠ›ã€‚Â </p>
<p>å¦ä¸€æ–¹é¢ï¼ŒFinClipå°ç¨‹åºAPI å’Œç»„ä»¶ä¸å¾®ä¿¡ä¿æŒé«˜åº¦ä¸€è‡´ï¼Œæ”¯æŒä½¿ç”¨è‡ªå®šä¹‰APIï¼Œè¿˜æä¾›äº†åœ°å›¾ã€è“ç‰™ã€WebRTC ç­‰å¤šç§æ‰©å±•SDKã€‚é€šè¿‡FinClipé›†æˆï¼Œä¼ä¸šå³å¯è®©ç°æœ‰Appè·å¾—è¿è¡Œå°ç¨‹åºçš„èƒ½åŠ›ï¼Œå¿«é€Ÿå¼•å…¥å„ç±»ç¬¬ä¸‰æ–¹æœåŠ¡æˆ–è‡ªå»ºæ–°ä¸šåŠ¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0de93492a46940b8b5da64e96482560b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138051&amp;x-signature=TaH%2BexzDl7iGNyOARtwhCc3Fylw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>äºŒã€å¼€å‘ä¸€æ¬¡ï¼Œä½“éªŒå¤§å¹…æå‡</strong></p>
<p>äº¬ä¸œå¤–å–Appçš„å¤šå…ƒæœåŠ¡æ•´åˆèƒŒåï¼Œæ˜¯å¯¹æŠ€æœ¯æ¶æ„çš„å‡çº§ã€‚æ—¢è¦ä¿è¯å„æœåŠ¡æ¨¡å—çš„ç‹¬ç«‹è¿­ä»£ï¼Œåˆè¦ç¡®ä¿ç»Ÿä¸€çš„ç”¨æˆ·ä½“éªŒï¼Œè¿™æ­£æ˜¯å°ç¨‹åºæŠ€æœ¯çš„ä¼˜åŠ¿æ‰€åœ¨ã€‚Â </p>
<p>ä½¿ç”¨ FinClipå°ç¨‹åºSDKå‡çº§é€‚é…åŸºäºAppæˆ–HTML5å¼€å‘çš„åŠŸèƒ½é¡µé¢ï¼Œä¸ä»…èƒ½å¤Ÿæä¾›åª²ç¾åŸç”Ÿå¼€å‘çš„ç”¨æˆ·ä½“éªŒï¼Œè¿˜å…·å¤‡æ›´åŠ ä¸°å¯Œçš„ç³»ç»Ÿä¸è®¾å¤‡æƒé™è°ƒç”¨èƒ½åŠ›ï¼Œè®©æ¯ä¸ªä¸šåŠ¡æ¨¡å—éƒ½èƒ½ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œå‘å¸ƒã€‚ç›¸å…³æ•°æ®æ˜¾ç¤ºï¼ŒåŸºäºFinClipæ„å»ºçš„ä¸šåŠ¡æ¨¡å—ï¼Œå…¶åŠ è½½é€Ÿåº¦è¾ƒä¼ ç»ŸH5æå‡çº¦60%ï¼Œç”¨æˆ·æ“ä½œæµç•…åº¦æ˜¾è‘—æ”¹å–„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56fcd888932c442e99194c1c0248fad4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138051&amp;x-signature=UDKHMJVyXA%2Fey%2BFPvbckmesJ8Ko%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä¸‰ã€å¤šåœºæ™¯å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></p>
<p>æœ¬åœ°ç”Ÿæ´»ç±»Appéœ€è¦ç®¡ç†ä¼—å¤šç¬¬ä¸‰æ–¹å•†å®¶ï¼Œä¼ä¸šå¼•å…¥å¤šå…ƒæœåŠ¡æ—¶ï¼ŒåŒæ ·éœ€è¦å®Œå–„çš„ç®¡ç†æœºåˆ¶ã€‚é‚£ä¹ˆï¼Œå®‰å…¨ç®¡æ§å’Œè¿è¥æ•ˆç‡è‡³å…³é‡è¦ã€‚ é’ˆå¯¹æ­¤ç±»ä¼ä¸šå®¢æˆ·éœ€æ±‚ï¼ŒFinClipæä¾›ä»å¼€å‘ã€æµ‹è¯•ã€å®¡æ ¸åˆ°å‘å¸ƒçš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†èƒ½åŠ›ã€‚Â </p>
<p>å®‰å…¨æ²™ç®±æŠ€æœ¯ï¼šä»£ç ä¸ä¸šåŠ¡å†…å®¹å‡ä¸å®¿ä¸»åº”ç”¨éš”ç¦»ï¼Œç¡®ä¿æ¯ä¸ªå°ç¨‹åºéƒ½èƒ½åœ¨å®‰å…¨ç¯å¢ƒä¸­ç‹¬ç«‹è¿è¡Œï¼Œä¿éšœç”¨æˆ·æ•°æ®ä¸ä¿¡æ¯å®‰å…¨ï¼›Â </p>
<p>å®¡æ ¸æœºåˆ¶ï¼šå°ç¨‹åºä¸Šä¸‹æ¶å®¡æ ¸ã€å†…å®¹å®¡æ ¸ã€ç¡®ä¿ç”¨æˆ·ç«¯æµè§ˆçš„ä¿¡æ¯éƒ½å¤„äºç»Ÿä¸€ç›‘ç®¡ä¹‹ä¸‹ï¼Œå¹³è¡¡äº†ä¸šåŠ¡æ•æ·ä¸å®‰å…¨åˆè§„ï¼›Â </p>
<p>ç°åº¦å‘å¸ƒåŠŸèƒ½ï¼šå®æ—¶æ›´æ–°å°ç¨‹åºå†…å®¹ï¼ŒA/Bæµ‹è¯•æ–°åŠŸèƒ½ï¼Œå¯åŠ©åŠ›ä¼ä¸šçµæ´»å“åº”çƒ­ç‚¹äº‹ä»¶ï¼Œæå¤§ç¼©çŸ­å¼€å‘å‘¨æœŸå¹¶æå‡è¿è¥æ•ˆç‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62c04fecf73d429e98ab30bede6694d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138051&amp;x-signature=QUUnNeohLNketoOvnE6U4QGqdBc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å¤®å›½ä¼ã€é‡‘èã€èåª’ç­‰å¤šè¡Œä¸šå®¢æˆ·é€‰æ‹©FinClip</strong></p>
<p>FinClipå‡­å€Ÿå…¶å“è¶Šçš„ç”Ÿæ€æ•´åˆã€æ•æ·å¼€å‘ä¸ç”Ÿæ€æ„å»ºèƒ½åŠ›ï¼Œæ­£åŠ©åŠ›ä¼ä¸šæ‰“é€ è¶…çº§App,ä¸°å¯Œåº”ç”¨å†…ç”Ÿæ€ï¼Œææ•ˆä¸šåŠ¡ã€‚</p>
<p>å¤§å‹å¤®å›½ä¼ï¼Œå€ŸåŠ©FinClipï¼Œé€šè¿‡å¯¹æ——ä¸‹æ•°åä¸ªAppçš„é‡ç»„ï¼Œé›†æˆæµ·é‡å°ç¨‹åºï¼Œå½¢æˆäº†ä¸‰å¤§ä¸»åŠ›Appï¼Œè¦†ç›–â€œé‡‘è+æœ¬åœ°ç”Ÿæ´»â€åŠ©åŠ›ä¼ä¸šå®ç°ä»â€œåˆ†æ•£è¿è¥â€åˆ°â€œç”Ÿæ€ååŒâ€å˜ï¼Œæ˜¾è‘—æå‡äº†å®¢æˆ·ä½“éªŒä¸ä¸šåŠ¡æ•ˆç‡ã€‚Â </p>
<p>é‡‘èè¡Œä¸šï¼ŒæŸåˆ¸å•†Appé€šè¿‡å¼•å…¥FinClipï¼Œå¿«é€Ÿæ„å»ºäº†è¡Œæƒ…ã€äº¤æ˜“ã€èµ„è®¯ã€ç†è´¢ç­‰å¤šå…ƒæœåŠ¡ç”Ÿæ€ã€‚æ–°ä¸šåŠ¡ä¸Šçº¿å‘¨æœŸä»åŸæ¥çš„ä¸€ä¸ªæœˆç¼©çŸ­è‡³ä¸€å‘¨ï¼Œç”¨æˆ·æ´»è·ƒåº¦æå‡40%ï¼ŒæˆåŠŸå®ç°äº†ä»å•ä¸€äº¤æ˜“å·¥å…·åˆ°ç»¼åˆé‡‘èæœåŠ¡å¹³å°çš„è½¬å‹ã€‚Â </p>
<p>èåª’è¡Œä¸šï¼ŒåŸºäºFinClipå¯å¿«é€Ÿæ­å»ºä¼ åª’å°ç¨‹åºå¼€æ”¾å¹³å°ï¼Œè¿è¥è‡ªæœ‰å°ç¨‹åºå¼€æ”¾ç”Ÿæ€å¹³å°ï¼Œå¸å¼•ç¬¬ä¸‰æ–¹æœåŠ¡å•†åŠå¼€å‘è€…å…¥é©»ï¼ˆå¦‚ç”µå•†ã€ç¥¨åŠ¡ã€æ•™è‚²ï¼‰ï¼Œä¹Ÿå¯å°†è‡ªæœ‰å†…å®¹/æœåŠ¡å°è£…æˆå°ç¨‹åºï¼Œè¾“å‡ºåˆ°å…¶ä»–é›†æˆFinClipçš„ç”Ÿæ€ï¼ˆå¦‚è½¦æœºã€æ™ºæ…§å±ï¼‰ï¼Œæ‹“å±•åˆ†å‘æ¸ é“ä¸å½±å“åŠ›ã€‚</p>
<p>æœªæ¥ï¼Œå‡¡æ³°æå®¢FinClipå°†æŒç»­å®Œå–„æŠ€æœ¯èƒ½åŠ›ï¼Œè‡´åŠ›äºä¸ºä¼ä¸šæä¾›æœ€å¯é çš„æŠ€æœ¯æ”¯æ’‘ï¼Œå¿«é€Ÿæ„å»ºä¼ä¸šè‡ªå·±çš„è¶…çº§Appç”Ÿæ€ï¼Œåœ¨æ¿€çƒˆçš„å¸‚åœºç«äº‰ä¸­èµ¢å¾—å…ˆæœºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ä»£ç å®è·µã€‘æ— éœ€å¤æ‚æ­£åˆ™ï¼é˜¿é‡Œäº‘SLSä¸€é”®æå®šæ—¥å¿—è„±æ•ï¼Œå‘Šåˆ«éšç§æ•°æ®â€œè£¸å¥”â€ï¼]]></title>    <link>https://juejin.cn/post/7573950036897611816</link>    <guid>https://juejin.cn/post/7573950036897611816</guid>    <pubDate>2025-11-19T06:22:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7573950036897611816" data-draft-id="7573995798603104271" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ä»£ç å®è·µã€‘æ— éœ€å¤æ‚æ­£åˆ™ï¼é˜¿é‡Œäº‘SLSä¸€é”®æå®šæ—¥å¿—è„±æ•ï¼Œå‘Šåˆ«éšç§æ•°æ®â€œè£¸å¥”â€ï¼"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-11-19T06:22:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ä»£ç å®è·µã€‘æ— éœ€å¤æ‚æ­£åˆ™ï¼é˜¿é‡Œäº‘SLSä¸€é”®æå®šæ—¥å¿—è„±æ•ï¼Œå‘Šåˆ«éšç§æ•°æ®â€œè£¸å¥”â€ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T06:22:12.000Z" title="Wed Nov 19 2025 06:22:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šå­™ç‰æ¢…</p>
<p>æ³¨ï¼šæœ¬æ–‡æ•°æ®éƒ½ä¸ºæ¨¡æ‹Ÿç”Ÿæˆã€‚</p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>è¿‡å»ä¸¤å¹´ï¼Œç”µå•†å®¢æœã€å·¥å•ã€ç‰©æµç­‰ç¯èŠ‚çš„è‡ªåŠ¨åŒ–æ­£æ€¥é€Ÿæ¨è¿›ã€‚ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹å¯ä»¥åŒæ—¶å¤„ç†ä¸Šç™¾æ¡é€€æ¬¾è¯·æ±‚ã€ç‰©æµæŸ¥è¯¢ã€è´¦å•è¿½è¸ªï¼›å®ƒä¸çŸ¥ç–²å€¦åœ°ä¸ç”¨æˆ·å¯¹è¯ï¼Œä¹Ÿåœ¨åå°ä¸åœè°ƒç”¨æ¥å£ã€è®°å½•æ—¥å¿—ã€æ±‡æ€»æŠ¥è¡¨ã€‚åœ¨è¿™äº›è‡ªåŠ¨åŒ–äº¤äº’ä¸­ï¼Œéšè—ç€å¤§é‡æ•æ„Ÿæ•°æ®ï¼š</p>
<ul>
<li>ç”¨æˆ·å’¨è¯¢é‡Œå¯èƒ½å‡ºç°æ‰‹æœºå·ã€è®¢å•å·ã€æ”¶è´§åœ°å€ï¼›</li>
<li>åç«¯ä¸šåŠ¡æ—¥å¿—ä¸­å¸¸å¸¸åŒ…å«é“¶è¡Œå¡å·ã€æ¥å£ IPã€è´¦æˆ· IDï¼›</li>
<li>å·¥å•æµè½¬è¿‡ç¨‹ä¸­ç”šè‡³ä¼šé™„å¸¦å†…éƒ¨ Tokenã€ç”¨æˆ·åã€‚</li>
</ul>
<p>è¿™äº›ä¿¡æ¯è‹¥åœ¨ç³»ç»Ÿå†…æœªç»å¤„ç†åœ°æµè½¬ã€å­˜å‚¨æˆ–å¯¼å‡ºï¼Œä¸ä»…è¿åæ•°æ®æœ€å°åŒ–åŸåˆ™ï¼Œæ›´å¯èƒ½åœ¨è°ƒè¯•ã€å…±äº«æˆ–å¯¼å‡ºæ—¥å¿—æ—¶æ„å¤–æ³„éœ²ã€‚ç„¶è€Œï¼Œç°å®åœºæ™¯ä¸­æˆ‘ä»¬åˆæ— æ³•ç®€å•åœ°â€œå°‘æ‰“æ—¥å¿—â€æˆ–â€œå»æ‰å­—æ®µâ€ã€‚æ—¥å¿—æ˜¯è¿ç»´æ’éšœçš„å·¥å…·ï¼Œæ˜¯è¿è¥åˆ†æçš„åŸºç¡€ï¼Œä¹Ÿæ˜¯å®‰å…¨å®¡è®¡çš„ä¾æ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d79330b583f484babcfb07f4fde58a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=2GDYgWYDPxM6fuOjvzVyYCJa7YE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ¬æ–‡å°†ä»¥ä¸€ä¸ªç”µå•† Copilot Demo ä¸ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•å€ŸåŠ©é˜¿é‡Œäº‘æ—¥å¿—æœåŠ¡ï¼ˆSLSï¼‰çš„è„±æ•å‡½æ•°ï¼Œåœ¨ä¸æ”¹å˜ä¸šåŠ¡é€»è¾‘çš„å‰æä¸‹ï¼Œç¡®ä¿ç³»ç»Ÿä¸­çš„æ•æ„Ÿæ•°æ®éšç§å®‰å…¨ã€‚</p>
<h2 data-id="heading-1">æ–¹æ¡ˆå…¨æ™¯ï¼šæ™ºèƒ½åŒ–ä¸æ•°æ®å®‰å…¨çš„èåˆ</h2>
<h3 data-id="heading-2">æ•´ä½“è®¾è®¡</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83eb3adc4ab7499b96d730db48ce1af1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=tXyhsItYc8G0C2EfXKKyBjy9wiU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç³»ç»Ÿçš„ä¸Šå±‚ç¼–æ’ç”± Dify å¹³å°å®Œæˆï¼ŒDify è´Ÿè´£åè°ƒç”¨æˆ·è¾“å…¥ã€æ„å›¾è¯†åˆ«ã€è°ƒç”¨åç«¯æœåŠ¡ä»¥åŠç”Ÿæˆå›å¤ï¼Œæ˜¯æ•´ä¸ª Copilot ç³»ç»Ÿçš„ä¸­æ¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a75a28ab8a9d4389a3078812ed3c43b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=Z5C4QSoOqMTZCizyJeYuZ9wZsVc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½†åœ¨å®è·µä¸­å‘ç°ä¸€ä¸ªå…³é”®é—®é¢˜ï¼ŒDify è‡ªèº«çš„æ•°æ®é“¾è·¯è§‚æµ‹å¹¶ä¸ç»†ç²’åº¦ï¼Œä¸»è¦ä½“ç°åœ¨ï¼š</p>
<ul>
<li>å¹³å°ä¸»è¦æä¾›èŠ‚ç‚¹çº§æ‰§è¡Œæ—¥å¿—ï¼›</li>
<li>ä½†å¯¹ä¸‹æ¸¸ API è°ƒç”¨ã€å¼‚å¸¸å †æ ˆã€è€—æ—¶åˆ†å¸ƒçš„è§‚æµ‹æœ‰é™ï¼›</li>
<li>å‡ºç°æ•…éšœæ—¶ï¼ŒDify å†…ç½®æ—¥å¿—å¾€å¾€ä¸è¶³ä»¥æ”¯æ’‘æ’éšœä¸å®¡è®¡ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œé€‰æ‹©åœ¨ Dify æœåŠ¡éƒ¨ç½²ä¾§é€šè¿‡ LoongCollector é‡‡é›†æœåŠ¡æ—¥å¿—ï¼Œé€šè¿‡ LoongCollector å°†æ—¥å¿—ç»Ÿä¸€æ¨é€åˆ° SLS LogStoreã€‚</p>
<ul>
<li><strong>æ•°æ®æµï¼š</strong> é‡‡é›†æ¥æºç»Ÿä¸€ï¼ŒåŒæ—¶é‡‡é›† Dify ç¼–æ’æ—¥å¿—ã€åç«¯æœåŠ¡æ—¥å¿—ã€ç³»ç»Ÿæ ‡å‡†è¾“å‡ºï¼Œå¹¶ä»¥å›ºå®šçš„æ—¥å¿—æ ¼å¼è¾“å‡ºï¼Œå®Œæ•´çš„æ•°æ®æµè½¬æ—¶åºå›¾å¦‚ä¸‹ï¼š</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74a78ddd734647d0bd49aa6104d471a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=s4nnlwiNFu3WxYRppyC%2FpNU4gac%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>å†™å…¥è„±æ•ï¼š</strong> é€šè¿‡å†™å…¥å¤„ç†å™¨é…ç½® SPL è„±æ•ï¼ˆmaskï¼‰å‡½æ•°ï¼Œç¡®ä¿æ•æ„Ÿå­—æ®µåœ¨å…¥åº“æ—¶å·²è¢«æ‰“ç ã€‚</li>
<li><strong>ä½¿ç”¨å±‚ï¼š</strong> ä¸ç®¡æ˜¯è¿ç»´ã€è¿è¥æˆ–è€…å®‰å…¨åŒå­¦ï¼Œéƒ½å¯ä»¥åŸºäºè„±æ•çš„ Logstore æ•°æ®åšå¯ä»¥åšç›¸å…³ä¸šåŠ¡åˆ†æã€‚</li>
</ul>
<h3 data-id="heading-3">æ—¥å¿—é“¾è·¯</h3>
<h4 data-id="heading-4">æ•°æ®é‡‡é›†</h4>
<p>LoongCollector <strong>[</strong> <strong>1]</strong> ä½œä¸ºä¸€æ¬¾è½»é‡çº§æ—¥å¿—é‡‡é›†å·¥å…·ï¼Œæ”¯æŒé‡‡é›†ä¸»æœºæ–‡æœ¬æ—¥å¿—ã€Kubernetes é›†ç¾¤å®¹å™¨æ—¥å¿—ã€HTTP æ•°æ®ç­‰ä¸åŒçš„æ•°æ®æºï¼Œå½“å‰ Copilot Demo æ—¥å¿—ä»¥ JSON æ ¼å¼æ‰“å°åœ¨ä¸»æœºæ—¥å¿—ç›®å½•ä¸­ï¼Œæ­¤å¤„æ¥å…¥å•è¡Œæ–‡æœ¬æ—¥å¿—å³å¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bb658e2a9104128bbbcdb9652c01c99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=751php4g2O6bwhd7WVPDbG5BEME%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é…ç½®æ—¥å¿—æ‰€åœ¨çš„æ–‡ä»¶è·¯å¾„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9e0be7190cb48ec9590fc71d6320670~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=8z7eTUvkSJMNJUZy8XNpbulrJho%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-5">å†™å…¥è„±æ•</h4>
<p>SLS æä¾›çš„ maskï¼ˆè„±æ•ï¼‰å‡½æ•°ï¼Œæ”¯æŒå†…ç½®å’Œå…³é”®å­—åŒ¹é…ä¸¤ç§æ¨¡å¼ï¼Œèƒ½é«˜æ•ˆã€ç²¾å‡†åœ°è¯†åˆ«å¹¶è„±æ•æ—¥å¿—ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼š</p>
<ul>
<li><strong>å†…ç½®åŒ¹é…ï¼ˆbuildinï¼‰ï¼š</strong> mask å‡½æ•°å¼€ç®±å³ç”¨ï¼Œå†…ç½®äº†å¯¹å¸¸è§ 6 ç§æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚æ‰‹æœºå·ã€èº«ä»½è¯ã€é‚®ç®±ã€IP åœ°å€ã€åº§æœºç”µè¯ã€é“¶è¡Œå¡å·ï¼‰çš„è¯†åˆ«èƒ½åŠ›ã€‚</li>
<li><strong>å…³é”®å­—åŒ¹é…ï¼ˆkeywordï¼‰ï¼š</strong> æ™ºèƒ½è¯†åˆ«ä»»æ„æ–‡æœ¬ä¸­ç¬¦åˆ "key":"value"ã€'key':'value' æˆ– key=value ç­‰å¸¸è§ KV å¯¹æ ¼å¼çš„æ•æ„Ÿä¿¡æ¯ã€‚</li>
</ul>
<p>é’ˆå¯¹æ–‡ä¸­ç”µå•† copilot æ—¥å¿—ï¼Œåœ¨å¯¹åº”çš„ project ä¸­æ–°å»ºæ•°æ®å¤„ç†å™¨ï¼ˆé…ç½®ä¸‹å›¾ SPL é…ç½®ï¼‰ï¼Œå³å¯æ™ºèƒ½è¯†åˆ«å¹¶å¯¹ IP åœ°å€ã€é‚®ç®±ç­‰æ•æ„Ÿå†…å®¹è¿›è¡Œè„±æ•ã€‚å…¶ä¸­æ‰‹æœºå·ã€èº«ä»½è¯å·ã€ä¿¡ç”¨å¡å·ã€å§“åä»¥åŠåœ°å€ä¿¡æ¯ï¼Œå®šåˆ¶åŒ–åœ°ä¿ç•™å‰åç¼€ã€‚è¯¦ç»†é…ç½®ä»‹ç»å¯å‚è§ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247577547%26idx%3D1%26sn%3D0653117a7cc1e6ee70c91f513de40f8c%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247577547&amp;idx=1&amp;sn=0653117a7cc1e6ee70c91f513de40f8c&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ— éœ€å¤æ‚æ­£åˆ™ï¼šSLS æ–°è„±æ•å‡½æ•°è®©éšç§ä¿æŠ¤æ›´ç®€å•é«˜æ•ˆ</a>ã€‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4a643d492824b328009c44155837595~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=ihy4Ww%2BgnWRCtoW0N3BI1WM9j8w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>é…ç½®å†™å…¥å¤„ç†å™¨ä½¿ä»»åŠ¡ç”Ÿæ•ˆï¼šé€‰æ‹©å¾…åº”ç”¨çš„ logstoreï¼Œåœ¨å†™å…¥å¤„ç†å™¨ tab ä¸­åº”ç”¨ä¸Šé¢æ–°å»ºçš„å¤„ç†ä»»åŠ¡ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d21501f8d73a406ab2304abeef3be246~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=QBdJMUlldQjEGl9OLUpxjKbA2nI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è„±æ•å‰åæ—¥å¿—å¯¹æ¯”</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ef2a903f89049d4bb3ebc2c2fe2de53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=E7EiBePUuVejlJiHne7g8Wad9pQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯¹æ¯”è„±æ•å‰çš„æ•°æ®å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li><strong>æŒ‰éœ€ä¿ç•™ï¼Œå®‰å…¨ä¸å¯ç”¨æ€§å…¼é¡¾ï¼š</strong> é’ˆå¯¹ä¸åŒæ•æ„Ÿå­—æ®µï¼Œå¯å®šåˆ¶åŒ–ä¿ç•™å‰åç¼€å­—ç¬¦ã€‚æ‰‹æœºå·ä¿ç•™å‰ä¸‰åå››ä½ï¼Œæ—¢ä¿æŠ¤äº†ç”¨æˆ·éšç§ï¼Œåˆæ–¹ä¾¿è¿ç»´äººå‘˜è¿›è¡Œé—®é¢˜æ’æŸ¥å’Œç”¨æˆ·èº«ä»½æ ¸éªŒï¼Œåœ¨ä¿éšœå®‰å…¨çš„åŒæ—¶å…¼é¡¾äº†æ•°æ®å¯ç”¨æ€§ã€‚</li>
<li><strong>é…ç½®æç®€ï¼Œæ— éœ€æ­£åˆ™ï¼š</strong> å…³é”®å­—åŒ¹é…æ¨¡å¼ä¸‹ï¼Œå³ä½¿æ•°æ®åµŒå¥—å¤šå±‚ JSON ç»“æ„ï¼Œä¹Ÿåªéœ€é…ç½®æœ€å†…å±‚çš„ Key å³å¯ç²¾å‡†åŒ¹é… Value è¿›è¡Œè„±æ•ï¼ŒåŒæ—¶æ— éœ€ç¼–å†™å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼æ¥å…¼å®¹å„ç§Â key:valueÂ å¯¹æ ¼å¼ï¼Œå¤§å¤§é™ä½äº†é…ç½®éš¾åº¦ã€‚</li>
<li><strong>ä¸­æ–‡ç²¾å‡†è„±æ•ï¼š</strong> å§“åä¸åœ°å€ç²¾ç¡®æŒ‰ç…§é…ç½®çš„è§„åˆ™è¿›è¡Œæ‰“ç ï¼Œé¿å…å› ç¼–ç é—®é¢˜å¯¼è‡´è„±æ•å¤±æ•ˆã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œmask å‡½æ•°ç›¸è¾ƒäºä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œè„±æ•ï¼Œåœ¨æ€§èƒ½ä¸Šå…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼Œå¯æœ‰æ•ˆé™ä½æ—¥å¿—å¤„ç†å»¶è¿Ÿï¼Œæå‡æ•´ä½“æ€§èƒ½ã€‚å°¤å…¶æ˜¯åœ¨å¤æ‚æˆ–è€…æ•°æ®é‡å·¨å¤§çš„åœºæ™¯ä¸‹ï¼Œæ€§èƒ½ä¼˜åŠ¿æ›´ä¸ºæ˜æ˜¾ã€‚</p>
<h3 data-id="heading-6">ä½¿ç”¨å±‚æ—¥å¿—åˆ†æ</h3>
<p>æ•°æ®è„±æ•è®©åŒä¸€ä»½æ—¥å¿—å‘ˆç°å‡ºä¸‰ç§â€œè§†è§’â€ï¼š</p>
<ul>
<li>è¿ç»´çœ‹åˆ°è°ƒç”¨é“¾ä¸æ€§èƒ½ç“¶é¢ˆï¼Œå´çœ‹ä¸åˆ°éšç§ï¼›</li>
<li>è¿è¥çœ‹åˆ°è¶‹åŠ¿ã€æ•ˆç‡ä¸ä½“éªŒï¼Œå´çœ‹ä¸åˆ°ä¸ªä½“ï¼›</li>
<li>å®‰å…¨çœ‹åˆ°ç­–ç•¥æ‰§è¡Œä¸ç•™ç—•è¯æ®ï¼Œå´æ— éœ€æ‹…å¿ƒé—æ¼ã€‚</li>
</ul>
<p>åœ¨è¿™å¥—ä½“ç³»ä¸­ï¼Œæ•°æ®ä¸å†æ˜¯ä¸€åº§å­¤å²›ï¼Œè€Œæ˜¯ä¸€å¥—æœ‰è¾¹ç•Œçš„æ™ºèƒ½èµ„äº§ï¼Œæ•°æ®åˆè§„ã€åˆ†æã€æ’éšœä¸‰è€…å¯ä»¥å¹¶è¡Œã€‚</p>
<h4 data-id="heading-7">è¿ç»´å·¥ç¨‹å¸ˆï¼šå®šä½</h4>
<p>å¯¹äºè¿ç»´å›¢é˜Ÿæ¥è¯´ï¼Œä»¥å¾€æ’éšœå¾€å¾€ä¾èµ–åŒ…å«ç”¨æˆ·æ‰‹æœºå·ã€åœ°å€ã€è´¦æˆ·å·çš„æ˜æ–‡æ—¥å¿—ï¼Œè¿™åœ¨åˆè§„ä¸Šå­˜åœ¨é«˜é£é™©ã€‚ç°åœ¨ï¼Œè„±æ•åçš„æ—¥å¿—è®©è¿™ä¸€è¿‡ç¨‹ä»æºå¤´å®‰å…¨åŒ–ï¼Œåœ¨é—®é¢˜å®šä½åœºæ™¯ä¸­é€šè¿‡ trace_id æ£€ç´¢å³å¯å¤åŸæ•´ä¸ªè°ƒç”¨é“¾ï¼š</p>
<ul>
<li>ä» Copilot çš„æ„å›¾è¯†åˆ«å¼€å§‹ï¼›</li>
<li>åˆ°è®¢å•æœåŠ¡ â†’ é€€æ¬¾æœåŠ¡ â†’ ç¬¬ä¸‰æ–¹æ”¯ä»˜ç½‘å…³ï¼›</li>
<li>å†åˆ°è¿”å›ç»“æœä¸è€—æ—¶ã€‚</li>
</ul>
<p>éœ€è¦æ ¸å¯¹ç”¨æˆ·èº«ä»½æ—¶ï¼Œæ—¥å¿—é‡Œåªä¿ç•™äº†è„±æ•åçš„é“¶è¡Œå¡å·ã€æ‰‹æœºå·ç­‰ä¿¡æ¯ï¼Œè¶³ä»¥å’Œä¸šåŠ¡ä¾§â€œåŒä¸€ç”¨æˆ·â€æ¯”å¯¹ï¼Œè€Œä¸ä¼šæš´éœ²åŸå€¼ã€‚å³ä¾¿æ˜¯è·¨å›¢é˜ŸåæŸ¥ï¼Œä¹Ÿèƒ½ç›´æ¥åœ¨è„±æ•æ—¥å¿—ä¸Šå®šä½é—®é¢˜ï¼Œé¿å…æ³„éœ²é£é™©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b7626e260964278bdffe89bd2eb4c3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=FJGb7hrts8EBGgGumn1jRZrgz9c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-8">è¿è¥å›¢é˜Ÿï¼šåˆ†æ</h4>
<p>æŠ¥è¡¨çš„ä»·å€¼åœ¨äºå‘ç°æ•´ä½“è¶‹åŠ¿ï¼Œè€Œéçª¥æ¢ä¸ªäººä¿¡æ¯ã€‚åœ¨è„±æ•è¿è¥æŠ¥è¡¨ä¸­ï¼Œç”¨æˆ·ä¿¡æ¯å·²åŒ¿ååŒ–å¤„ç†ï¼Œä»…ä¿ç•™å…³é”®ä¸šåŠ¡æŒ‡æ ‡ï¼ŒåŠ©åŠ›å›¢é˜Ÿä»æ•°æ®ä¸­æŒ–æ˜æ´å¯Ÿã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9ed7869461b4a6793ea26c5815076c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=mZzOqanzh4OOZDJaDIX1rX8gq5o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»è¿™ä»½æŠ¥è¡¨ä¸­ï¼Œè¿è¥å›¢é˜Ÿå¯ä»¥å¿«é€Ÿäº†è§£ï¼š</p>
<ul>
<li>æ•´ä½“æ¦‚å†µï¼šUVã€PV ç­‰å…³é”®æŒ‡æ ‡ï¼ŒCopilot äº¤äº’æ¬¡æ•°ï¼Œä»¥åŠå’¨è¯¢æ€»é‡ï¼Œå¿«é€ŸæŒæ¡è¿è¥æ¦‚å†µã€‚</li>
<li>å’¨è¯¢åˆ†ç±»ï¼šé€€æ¬¾ã€å•†å“ã€ç‰©æµå’¨è¯¢å æ¯”ï¼Œæ¸…æ™°äº†è§£ç”¨æˆ·å…³æ³¨ç‚¹ã€‚</li>
<li>é—®é¢˜åˆ†ç±»ï¼šæŒæ¡ç”¨æˆ·æé—®çš„ä¾§é‡ç‚¹ï¼Œå¦‚åŠŸèƒ½ã€ä»·æ ¼ã€è§„æ ¼ç­‰ã€‚</li>
<li>é‡å¤å’¨è¯¢ç‡ï¼šè¡¡é‡æœåŠ¡è´¨é‡ï¼Œå¿«é€Ÿå®šä½éœ€è¦ä¼˜åŒ–çš„ç¯èŠ‚ã€‚</li>
<li>ç”¨æˆ·è¡Œä¸ºï¼šå’¨è¯¢åè´­ä¹°è½¬åŒ–æ¼æ–—ï¼Œä»¥åŠçƒ­é—¨å’¨è¯¢å…³é”®è¯ï¼ŒåŠ©åŠ›ä¼˜åŒ–äº§å“å’Œè¥é”€ç­–ç•¥ã€‚</li>
<li>é‡ç‚¹ç”¨æˆ·ï¼šTop 10 å’¨è¯¢ç”¨æˆ·ï¼Œè™½ç„¶ç”¨æˆ·ä¿¡æ¯è„±æ•ï¼Œä½†å¯é€šè¿‡ VIP ç­‰çº§å’Œå’¨è¯¢æ¬¡æ•°ï¼Œåˆ¶å®šå·®å¼‚åŒ–æœåŠ¡ç­–ç•¥ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼ŒæŠ¥è¡¨ä¸­æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯éƒ½ç»è¿‡è„±æ•å¤„ç†ï¼Œç”µè¯å·ç ã€å§“åç­‰ä¸ªäººä¿¡æ¯å‡è¢«æ©ç ï¼Œç¡®ä¿æ— æ³•åæ¨åˆ°å…·ä½“ç”¨æˆ·ï¼Œå……åˆ†ä¿éšœç”¨æˆ·éšç§ã€‚</p>
<h4 data-id="heading-9">å®‰å…¨ä¸åˆè§„å›¢é˜Ÿï¼šå®¡è®¡</h4>
<p>å¯¹å®‰å…¨ä¸åˆè§„å›¢é˜Ÿè€Œè¨€ï¼Œæ—¥å¿—çš„æœ€å¤§é£é™©åœ¨äºâ€œå­˜é‡æ˜æ–‡â€ã€‚æœ¬æ–‡ä¸­çš„è„±æ•æ–¹æ¡ˆå°†è„±æ•å‰ç½®ï¼šæ•°æ®åœ¨å†™å…¥å‰å·²è¢«å¤„ç†ï¼Œè¿™ä»æ ¹æœ¬ä¸Šæ¶ˆé™¤äº†æ•æ„Ÿæ•°æ®è„±æ•è¦†ç›–ä¸å…¨ä¸å¯¼å‡ºæ˜æ–‡æ•°æ®çš„å¯èƒ½ã€‚æ­¤å¤–ï¼ŒSLS è¿˜æä¾›å®Œå–„çš„åˆè§„æ”¯æ’‘èƒ½åŠ›ï¼š</p>
<ul>
<li>æ•°æ®å­˜å‚¨ï¼šæ”¯æŒè‡ªå®šä¹‰æ—¥å¿—å­˜å‚¨æ—¶é—´ï¼Œå¯¹ç½‘ç»œå®¡è®¡ç›¸å…³æ—¥å¿—è®¾ç½®&gt;180 å¤©çš„å­˜å‚¨å¤©æ•°ï¼Œæ»¡è¶³å®‰å…¨å®¡è®¡è¦æ±‚ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74b8b1078a96406a98f0163cd7ee6b71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764138132&amp;x-signature=BOycSKEa8NPiuRrKi9GeAchF0Ws%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>æ•°æ®æ“ä½œå®¡è®¡ï¼šæ—¥å¿—ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šå­˜åœ¨ç”¨æˆ·çº§æ“ä½œè¡Œä¸ºï¼Œè¿™äº›ä¸ç®¡æ˜¯ç®¡æ§å±‚é¢çš„æ§åˆ¶å°æ“ä½œã€OpenAPI è°ƒç”¨ï¼Œæˆ–è€…æ•°æ®é¢çš„ä¸šåŠ¡æ—¥å¿—ä½¿ç”¨ï¼Œä»»ä½•äººæŸ¥çœ‹ã€åˆ†æã€å¯¼å‡ºæ—¥å¿—ï¼Œéƒ½åªåœ¨æˆæƒèŒƒå›´å†…çœ‹åˆ°åº”å½“çœ‹åˆ°çš„å†…å®¹ã€‚åŒæ—¶Â CloudLens for SLS <strong>[</strong> <strong>2]</strong> è¿˜æä¾› Projectã€Logstore çš„èµ„äº§ä½¿ç”¨ç›‘æ§ã€‚</li>
</ul>
<h2 data-id="heading-10">å°ç»“</h2>
<p>å½“ LoongCollector çš„æ—¥å¿—é‡‡é›†ä¸ LogStore çš„æ•°æ®è„±æ•è¿æˆé—­ç¯ï¼Œæ—¥å¿—åœ¨è½åº“åŒæ—¶å®Œæˆå®‰å…¨è½¬åŒ–ã€‚è¿ç»´èƒ½å®šä½ï¼Œè¿è¥èƒ½åˆ†æï¼Œå®‰å…¨èƒ½å®¡è®¡ã€‚è¿™ä¸æ˜¯ä¸€æ¬¡æ€§çš„åŠ å›ºï¼Œè€Œæ˜¯ä¸€æ¡å¯å¤ç”¨çš„è·¯å¾„ï¼šå†™å…¥ä¾§è„±æ• + é»˜è®¤è„±æ•è½åº“ + è§’è‰²åŒ–è®¿é—®ã€‚ä»¥æ­¤ä¸ºåŸºçº¿ï¼Œä¼ä¸šèƒ½æ”¾å¿ƒæ‰©å±• Copilot çš„ä¸šåŠ¡è¦†ç›–ï¼Œè®©â€œæ•ˆç‡çº¢åˆ©â€ä¸â€œåˆè§„ç¡®å®šæ€§â€å¹¶è¡Œå­˜åœ¨ã€‚</p>
<p><strong>ç›¸å…³é“¾æ¥ï¼š</strong></p>
<p>[1]Â LoongCollector</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fsls%2Fwhat-is-sls-loongcollector" target="_blank" title="https://help.aliyun.com/zh/sls/what-is-sls-loongcollector" ref="nofollow noopener noreferrer">help.aliyun.com/zh/sls/whatâ€¦</a></p>
<p>[2]Â CloudLens for SLS</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fsls%2Fcloudlens-for-sls%2F" target="_blank" title="https://help.aliyun.com/zh/sls/cloudlens-for-sls/" ref="nofollow noopener noreferrer">help.aliyun.com/zh/sls/clouâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[N8NåŸºç¡€å…¥é—¨æŒ‡å—ï¼šå¼€æºå·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°æŠ€æœ¯å®è·µ]]></title>    <link>https://juejin.cn/post/7574230922313252870</link>    <guid>https://juejin.cn/post/7574230922313252870</guid>    <pubDate>2025-11-19T06:25:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574230922313252870" data-draft-id="7574084898877669417" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="N8NåŸºç¡€å…¥é—¨æŒ‡å—ï¼šå¼€æºå·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°æŠ€æœ¯å®è·µ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,å·¥ä½œæµå¼•æ“"/> <meta itemprop="datePublished" content="2025-11-19T06:25:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HuskyYellow"/> <meta itemprop="url" content="https://juejin.cn/user/2999123452110574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            N8NåŸºç¡€å…¥é—¨æŒ‡å—ï¼šå¼€æºå·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°æŠ€æœ¯å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2999123452110574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HuskyYellow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-19T06:25:13.000Z" title="Wed Nov 19 2025 06:25:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æŠ€æœ¯æ¦‚è¿°</h2>
<p>N8Næ˜¯ä¸€æ¬¾åŸºäºNode.jsæ„å»ºçš„å¼€æºå·¥ä½œæµè‡ªåŠ¨åŒ–å·¥å…·ï¼Œé‡‡ç”¨å¯è§†åŒ–æµç¨‹å›¾æ–¹å¼è®¾è®¡å’Œæ‰§è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚è¯¥å¹³å°é€šè¿‡èŠ‚ç‚¹å¼ç¼–ç¨‹æ¨¡å‹ï¼Œå…è®¸ç”¨æˆ·è¿æ¥å„ç§åº”ç”¨ç¨‹åºã€APIå’Œæ•°æ®åº“ï¼Œå®ç°å¤æ‚ä¸šåŠ¡æµç¨‹çš„è‡ªåŠ¨åŒ–å¤„ç†ã€‚</p>
<h2 data-id="heading-1">å­¦ä¹ ä¸å®æ–½é—¨æ§›</h2>
<p>åœ¨å®æ–½n8nå·¥ä½œæµè‡ªåŠ¨åŒ–è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·é€šå¸¸é¢ä¸´ä»¥ä¸‹æŠ€æœ¯éšœç¢ï¼š</p>
<ul>
<li><strong>æ–‡æ¡£æœ¬åœ°åŒ–ä¸è¶³</strong>ï¼šå®˜æ–¹æ–‡æ¡£ä»¥è‹±æ–‡ä¸ºä¸»ï¼Œç¼ºä¹å¤šè¯­è¨€æ”¯æŒï¼Œå¢åŠ äº†éè‹±è¯­ç¯å¢ƒä¸‹çš„å­¦ä¹ éš¾åº¦</li>
<li><strong>èŠ‚ç‚¹æ“ä½œå¤æ‚åº¦</strong>ï¼šèŠ‚ç‚¹é…ç½®å‚æ•°ç¹å¤šï¼Œæ•°æ®å¤„ç†é€»è¾‘éœ€è¦æ·±å…¥ç†è§£</li>
<li><strong>å®è·µæ¡ˆä¾‹ç¨€ç¼º</strong>ï¼šç¼ºä¹ç”Ÿäº§ç¯å¢ƒä¸‹çš„æˆç†Ÿå®æ–½æ¡ˆä¾‹å‚è€ƒ</li>
<li><strong>æŠ€æœ¯æ”¯æŒæœ‰é™</strong>ï¼šç¤¾åŒºèµ„æºåˆ†æ•£ï¼Œé—®é¢˜è§£å†³æ•ˆç‡è¾ƒä½</li>
</ul>
<h2 data-id="heading-2">é€‚ç”¨äººç¾¤ä¸æŠ€èƒ½è¦æ±‚</h2>
<p>n8nä½œä¸ºä½ä»£ç å¼€å‘å¹³å°ï¼Œå¯¹ä½¿ç”¨è€…æå‡ºä»¥ä¸‹æŠ€èƒ½è¦æ±‚ï¼š</p>

























<table><thead><tr><th>å¿…å¤‡æŠ€èƒ½</th><th>å…·ä½“è¦æ±‚</th><th>é‡è¦æ€§è¯´æ˜</th></tr></thead><tbody><tr><td>é€»è¾‘æ€ç»´èƒ½åŠ›</td><td>ç†è§£æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯æ§åˆ¶ã€æ•°æ®è¾“å…¥è¾“å‡ºç­‰åŸºæœ¬ç¼–ç¨‹æ¦‚å¿µ</td><td>æ ¸å¿ƒèƒ½åŠ›ï¼Œç›´æ¥å½±å“å·¥ä½œæµè®¾è®¡çš„åˆç†æ€§ä¸æ‰§è¡Œæ•ˆç‡</td></tr><tr><td>ç½‘ç»œè®¿é—®èƒ½åŠ›</td><td>èƒ½å¤Ÿè®¿é—®å›½é™…äº’è”ç½‘èµ„æº</td><td>å¿…è¦æ¡ä»¶ï¼Œç”¨äºè·å–å®˜æ–¹æ–‡æ¡£ã€ç¤¾åŒºæ”¯æŒå’Œç¬¬ä¸‰æ–¹æ’ä»¶</td></tr><tr><td>é—®é¢˜æ’æŸ¥èƒ½åŠ›</td><td>å…·å¤‡åŸºæœ¬çš„è°ƒè¯•æŠ€èƒ½å’Œé—®é¢˜åˆ†æèƒ½åŠ›</td><td>å…³é”®èƒ½åŠ›ï¼Œç¡®ä¿å·¥ä½œæµç¨³å®šè¿è¡Œå’Œå¿«é€Ÿæ•…éšœæ’é™¤</td></tr></tbody></table>
<h2 data-id="heading-3">æŠ€æœ¯ä»·å€¼ä¸åº”ç”¨åœºæ™¯</h2>
<p>n8nä½œä¸ºä¼ä¸šçº§è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œå…¶æ ¸å¿ƒä»·å€¼ä½“ç°åœ¨ï¼š</p>
<ul>
<li><strong>æå‡å·¥ä½œæµæ•ˆç‡</strong>ï¼šé€šè¿‡è‡ªåŠ¨åŒ–å‡å°‘äººå·¥å¹²é¢„ï¼Œæé«˜ä¸šåŠ¡å¤„ç†é€Ÿåº¦å’Œå‡†ç¡®æ€§</li>
<li><strong>é™ä½è¿è¥æˆæœ¬</strong>ï¼šå‡å°‘é‡å¤æ€§åŠ³åŠ¨ï¼Œä¼˜åŒ–äººåŠ›èµ„æºé…ç½®</li>
<li><strong>å®ç°ç³»ç»Ÿé›†æˆ</strong>ï¼šæ‰“ç ´æ•°æ®å­¤å²›ï¼Œå®ç°ä¼ä¸šå†…éƒ¨ç³»ç»Ÿçš„æ— ç¼è¿æ¥</li>
<li><strong>åŠ é€Ÿæ•°å­—åŒ–è½¬å‹</strong>ï¼šå¿«é€Ÿæ„å»ºå’Œéƒ¨ç½²è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒä¸šåŠ¡åˆ›æ–°</li>
</ul>
<p>å…¸å‹åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>è‡ªåŠ¨ç”Ÿæˆå’Œåˆ†å‘ä¸šåŠ¡æŠ¥è¡¨</li>
<li>è¡¨å•æ•°æ®çš„è‡ªåŠ¨å¤„ç†ä¸å­˜å‚¨</li>
<li>å¤šç³»ç»Ÿé—´çš„æ•°æ®åŒæ­¥ä¸é›†æˆ</li>
<li>å®¢æˆ·æœåŠ¡æµç¨‹çš„è‡ªåŠ¨åŒ–å¤„ç†</li>
<li>å®šæ—¶ä»»åŠ¡çš„è°ƒåº¦ä¸æ‰§è¡Œ</li>
</ul>
<h2 data-id="heading-4">å¹³å°å¯¹æ¯”åˆ†æ</h2>
<p>åœ¨é€‰æ‹©è‡ªåŠ¨åŒ–å·¥å…·æ—¶ï¼Œäº†è§£ä¸åŒå¹³å°çš„æŠ€æœ¯ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯è‡³å…³é‡è¦ã€‚ä»¥ä¸‹æ˜¯n8nä¸Difyã€Cozeä¸‰ä¸ªå¹³å°çš„æŠ€æœ¯å¯¹æ¯”ï¼š</p>
<h3 data-id="heading-5">æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”</h3>













































































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>n8n</th><th>Dify</th><th>Coze</th></tr></thead><tbody><tr><td>äº§å“å®šä½</td><td>è‡ªåŠ¨åŒ–æµç¨‹å¹³å°</td><td>å¤§æ¨¡å‹åº”ç”¨å¼€å‘å¹³å°</td><td>å¤šè½®å¯¹è¯AIåŠ©æ‰‹å¹³å°</td></tr><tr><td>ä¸»è¦ç”¨é€”</td><td>ç³»ç»Ÿæ‰“é€šã€ä»»åŠ¡è‡ªåŠ¨åŒ–</td><td>å¿«é€Ÿå¼€å‘AIåº”ç”¨ï¼ˆAPIæˆ–å‰ç«¯ï¼‰</td><td>æ„å»ºèŠå¤©æœºå™¨äººå¹¶åµŒå…¥å„ç±»åœºæ™¯</td></tr><tr><td>å¼€æºæ€§è´¨</td><td>âœ… å®Œå…¨å¼€æº</td><td>âœ… éƒ¨åˆ†å¼€æº</td><td>âŒ é—­æºï¼ˆå­—èŠ‚è·³åŠ¨ï¼‰</td></tr><tr><td>å¤§æ¨¡å‹æ¥å…¥</td><td>âœ… æ”¯æŒOpenAIç­‰ï¼Œè‡ªè¡Œé…ç½®</td><td>âœ… å†…ç½®å¤šå®¶æ¨¡å‹ï¼ˆOpenAIã€Azureã€Moonshotç­‰ï¼‰</td><td>âœ… å†…ç½®æ¨¡å‹</td></tr><tr><td>å¤šè½®å¯¹è¯æ”¯æŒ</td><td>âŒ ä¸åŸç”Ÿæ”¯æŒ</td><td>âœ… Workflowæ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†</td><td>âœ… å†…ç½®ä¸Šä¸‹æ–‡è®°å¿†å’Œå¤šè½®å¯¹è¯èƒ½åŠ›</td></tr><tr><td>APIé›†æˆèƒ½åŠ›</td><td>âœ… å¼ºï¼Œå¯é›†æˆä»»æ„API</td><td>âœ… æ”¯æŒè‡ªå®šä¹‰å¤–éƒ¨API</td><td>âœ… å¯è¿æ¥å¤–éƒ¨APIå¢å¼ºBot</td></tr><tr><td>æµç¨‹æ§åˆ¶é€»è¾‘</td><td>âœ… å¯è§†åŒ–æµç¨‹å›¾ï¼ˆå¼ºï¼‰</td><td>â– åŸºç¡€æµç¨‹é€»è¾‘</td><td>â– æ’ä»¶é€»è¾‘æ§åˆ¶</td></tr><tr><td>å‰ç«¯äº¤äº’èƒ½åŠ›</td><td>âŒ æ— åŸç”ŸUIï¼Œéœ€é…åˆå…¶ä»–æ¡†æ¶</td><td>âœ… Chat Appã€Web Appç”Ÿæˆå™¨</td><td>âœ… BotèŠå¤©çª—å£ï¼Œå¯åµŒå…¥å…¬ä¼—å·ã€å°ç¨‹åºã€ç½‘é¡µç­‰</td></tr><tr><td>ç”¨æˆ·æƒé™/åä½œ</td><td>âœ… å¤šç”¨æˆ·ã€RBACï¼ˆéœ€è‡ªå»ºï¼‰</td><td>âœ… å›¢é˜Ÿåä½œæ”¯æŒ</td><td>âœ… å¤šBotç®¡ç†ï¼Œå¹³å°å†…æƒé™æ§åˆ¶</td></tr><tr><td>é€‚ç”¨äººç¾¤</td><td>æŠ€æœ¯å¼€å‘è€…ã€è‡ªåŠ¨åŒ–çˆ±å¥½è€…</td><td>AIåº”ç”¨å¼€å‘è€…</td><td>è¿è¥ã€äº§å“ã€éæŠ€æœ¯ç”¨æˆ·</td></tr><tr><td>å…¸å‹åº”ç”¨åœºæ™¯</td><td>è‡ªåŠ¨å‘é€æ—¥æŠ¥ã€å¤„ç†è¡¨å•æ•°æ®ã€å¯¹æ¥å¤šä¸ªç³»ç»Ÿ</td><td>AIå®¢æœã€AIå·¥å…·ç®±ã€æ–‡æ¡£é—®ç­”API</td><td>å…¬ä¼—å·AIå®¢æœã€ç½‘ç«™AIåŠ©æ‰‹ã€SaaSé›†æˆBot</td></tr></tbody></table>
<h3 data-id="heading-6">æŠ€æœ¯é€‰å‹å»ºè®®</h3>
<p>å„å¹³å°å‡æœ‰å…¶ç‹¬ç‰¹ä¼˜åŠ¿ï¼ŒæŠ€æœ¯é€‰å‹åº”åŸºäºå…·ä½“ä¸šåŠ¡éœ€æ±‚ï¼š</p>
<ul>
<li><strong>n8n</strong>ï¼šé€‚åˆéœ€è¦é«˜åº¦å®šåˆ¶åŒ–å’Œç³»ç»Ÿé›†æˆèƒ½åŠ›çš„æŠ€æœ¯å›¢é˜Ÿï¼Œç‰¹åˆ«æ“…é•¿å¤æ‚å·¥ä½œæµçš„è‡ªåŠ¨åŒ–å¤„ç†</li>
<li><strong>Dify</strong>ï¼šä¸“æ³¨äºAIåº”ç”¨å¼€å‘ï¼Œé€‚åˆå¿«é€Ÿæ„å»ºåŸºäºå¤§æ¨¡å‹çš„æ™ºèƒ½åº”ç”¨</li>
<li><strong>Coze</strong>ï¼šé¢å‘éæŠ€æœ¯ç”¨æˆ·ï¼Œæä¾›ä¾¿æ·çš„èŠå¤©æœºå™¨äººå¼€å‘ä½“éªŒ</li>
</ul>
<p>æŠ€æœ¯é€‰å‹çš„æ ¸å¿ƒåœ¨äºåŒ¹é…ä¸šåŠ¡ç›®æ ‡ï¼Œè€Œéçº ç»“äºå·¥å…·æœ¬èº«çš„ä¼˜åŠ£ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™ä¸‰ä¸ªå¹³å°ä¹Ÿå¯ä»¥æ ¹æ®åœºæ™¯éœ€æ±‚è¿›è¡Œäº’è¡¥ä½¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>