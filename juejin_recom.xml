<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä¸çŸ¥é“æ€ä¹ˆå†™ Nano Banana Pro æç¤ºè¯ï¼Ÿåˆ†äº«ä½ ä¸€ä¸ªç»“æ„åŒ–ç¤ºä¾‹ï¼Œå¤åˆ»ä»»æ„å›¾ç‰‡]]></title>    <link>https://juejin.cn/post/7579562420978761769</link>    <guid>https://juejin.cn/post/7579562420978761769</guid>    <pubDate>2025-12-04T03:53:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579562420978761769" data-draft-id="7579558130268389430" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸çŸ¥é“æ€ä¹ˆå†™ Nano Banana Pro æç¤ºè¯ï¼Ÿåˆ†äº«ä½ ä¸€ä¸ªç»“æ„åŒ–ç¤ºä¾‹ï¼Œå¤åˆ»ä»»æ„å›¾ç‰‡"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2025-12-04T03:53:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†´ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/712139234359182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸çŸ¥é“æ€ä¹ˆå†™ Nano Banana Pro æç¤ºè¯ï¼Ÿåˆ†äº«ä½ ä¸€ä¸ªç»“æ„åŒ–ç¤ºä¾‹ï¼Œå¤åˆ»ä»»æ„å›¾ç‰‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139234359182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†´ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:53:05.000Z" title="Thu Dec 04 2025 03:53:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ç»å¤§éƒ¨åˆ†äººå†™æç¤ºè¯ï¼Œå‡ ä¹æ²¡æœ‰ç« æ³•ï¼Œæƒ³åˆ°å“ªå†™åˆ°å“ªï¼Œç»“æœç”Ÿæˆçš„å›¾ç‰‡å°±åƒâ€œæŠ½å¡â€ã€‚</p>
<p>Google å®˜æ–¹è™½ç„¶æä¾›äº†ä¸€äº›æ¨¡æ¿ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FzjAFsnzDD97d6WJk9nfeyw" target="_blank" title="https://mp.weixin.qq.com/s/zjAFsnzDD97d6WJk9nfeyw" ref="nofollow noopener noreferrer">Nano Banana Pro å¾ˆå¼ºï¼Œä½†ä½ è¦å­¦ä¼šå†™æç¤ºè¯æ‰èƒ½éšå¿ƒæ‰€æ¬²</a></p>
<p>ä½†ä½¿ç”¨æ—¶è¿˜è¦åŒºåˆ†å„ç§ç±»å‹ï¼Œç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>æœ¬ç¯‡å’Œä½ åˆ†äº«ä¸€ä¸ªç»“æ„åŒ–çš„æç¤ºè¯æ¨¡æ¿ã€‚ä»æ­¤ä»¥åï¼Œå†™æç¤ºè¯å°±åƒå¡«ç©ºã€‚</p>
<p>10 å¹´æŠ€æœ¯åšä¸»ï¼Œæœ€æ–°èµ„è®¯ã€å‰ç«¯çŸ¥è¯†ã€AI å¹²è´§ï¼Œæ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šâ€œå†´ç¾½â€ æˆ–è€…æœç´¢â€œyayujsâ€</p>
<h2 data-id="heading-1">æç¤ºè¯æ¨¡æ¿</h2>
<p>è¿™å¥—æç¤ºè¯æ¨¡æ¿å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"shot"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½¿ç”¨ä»€ä¹ˆæ ·çš„é•œå¤´ã€æ„å›¾ã€é•¿å®½æ¯”"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”»é¢ä¸»ä½“"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"environment"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸»ä½“æ‰€å¤„çš„ç¯å¢ƒ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"lighting"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å®šä¹‰å…‰çº¿"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"camera"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å®šä¹‰æ‘„å½±å¤´ä¿¡æ¯ï¼Œä¾‹å¦‚ä½¿ç”¨çš„é•œå¤´ã€å…‰åœˆ"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"color grade"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”»é¢çš„è‰²å½©é£æ ¼ï¼Œä¾‹å¦‚å¯¹æ¯”åº¦ã€é¥±å’Œåº¦"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”»é¢é£æ ¼"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"quality"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”»é¢çš„è´¨é‡æ°´å¹³"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"negatives"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸å¸Œæœ›å‡ºç°åœ¨ç”»é¢ä¸Šçš„å†…å®¹"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Nano Banana Pro æ”¯æŒä½¿ç”¨ JSON æ ¼å¼å®šä¹‰å›¾ç‰‡ã€‚</p>
<p>åœ¨ JSON ä¸­æˆ‘ä»¬ä½¿ç”¨äº† 9 ä¸ªå­—æ®µæ¥æè¿°å›¾ç‰‡ï¼Œå…·ä½“æ¯ä¸ªå­—æ®µçš„å†…å®¹å¦‚ä¸Šæ‰€ç¤ºã€‚</p>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ç”Ÿæˆçš„å›¾ç‰‡ä¹‹æ‰€ä»¥ä¸ç¨³å®šï¼Œå°±æ˜¯å› ä¸ºå†™æç¤ºè¯æ—¶ï¼Œæ˜¯ä¸€ç§**â€œéšç¼˜â€**çš„çŠ¶æ€â€”â€”æœ‰çš„åœ°æ–¹å†™å¾—è¯¦ç»†ï¼Œæœ‰çš„åœ°æ–¹å´è¢«é—æ¼äº†ã€‚</p>
<p>ä½¿ç”¨è¿™å¥—ç»“æ„åŒ–çš„æç¤ºè¯ï¼Œä½ å°±å¯ä»¥å…¨é¢åœ°æè¿°å›¾ç‰‡ï¼Œè®©å›¾ç‰‡ç”Ÿæˆæ›´åŠ ç¨³å®šã€‚</p>
<h2 data-id="heading-2">å¦‚ä½•å†™æç¤ºè¯ï¼Ÿ</h2>
<p>ç„¶è€Œé—®é¢˜åˆæ¥äº†ï¼šå…·ä½“çš„å­—æ®µå†…å®¹è¯¥å¦‚ä½•å†™å‘¢ï¼Ÿ</p>
<p><strong>å¦‚æœå¯ä»¥çš„è¯ï¼Œå°½å¯èƒ½è®© AI å»å†™ã€‚</strong></p>
<p>è®© AI å¯¹å›¾ç‰‡è¿›è¡Œè¯¦å°½çš„æè¿°ï¼Œç„¶åå†ä½¿ç”¨è¯¥æè¿°ç”Ÿæˆå›¾ç‰‡ã€‚ç†è®ºä¸Šï¼Œä½ å¯ä»¥å¤åˆ»ä»»æ„æƒ³è¦çš„å›¾ç‰‡ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ã€‚</p>
<p>è¿™æ˜¯ä¸€å¼ æ‘„å½±å›¾ç‰‡ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3d2556e95ea45ae9ad7e809cb7db1e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765426426&amp;x-signature=jMyOsPSPPLfy5YGlRu9dCIu1IaQ%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ä½¿ç”¨è±†åŒ…ï¼Œå‚ç…§æç¤ºè¯æ¨¡æ¿å†™è¿™å¼ å›¾ç‰‡çš„æè¿°ï¼Œæç¤ºè¯å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"shot"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é•œå¤´ç±»å‹ï¼ˆå¹¿è§’/é•¿ç„¦/å¾®è·/é±¼çœ¼ç­‰ï¼‰ã€æ„å›¾æ–¹å¼ï¼ˆå±…ä¸­æ„å›¾/ä¸‰åˆ†æ³•/å¼•å¯¼çº¿/å¯¹ç§°æ„å›¾/æ¡†æ¶æ„å›¾ç­‰ï¼‰ã€æ‹æ‘„è§’åº¦ï¼ˆå¹³è§†/ä¿¯è§†/ä»°è§†/ä¾§æ‹/æ–œæ‹ç­‰ï¼‰ã€é•¿å®½æ¯”ï¼ˆ16:9/4:3/1:1/21:9ç­‰ï¼‰ã€æ™¯åˆ«ï¼ˆå…¨æ™¯/ä¸­æ™¯/è¿‘æ™¯/ç‰¹å†™/å¤§ç‰¹å†™ç­‰ï¼‰"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"subject"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ ¸å¿ƒä¸»ä½“ï¼ˆç‰©ä½“/äººç‰©/åœºæ™¯/æŠ½è±¡å…ƒç´ ç­‰ï¼‰ï¼›è‹¥ä¸ºç‰©ä½“ï¼šæè´¨ï¼ˆé‡‘å±/æœ¨è´¨/ç»ç’ƒ/å¸ƒæ–™/å¡‘æ–™ç­‰ï¼‰ã€å½¢æ€ï¼ˆå®Œæ•´/ç ´ç¢/æŠ˜å ç­‰ï¼‰ã€ç»†èŠ‚ï¼ˆçº¹ç†/åˆ’ç—•/å…‰æ³½/è£…é¥°å›¾æ¡ˆç­‰ï¼‰ã€å°ºå¯¸æ¯”ä¾‹ï¼›è‹¥ä¸ºäººç‰©ï¼šå¹´é¾„ï¼ˆå„¿ç«¥/é’å¹´/ä¸­å¹´/è€å¹´ï¼‰ã€æ€§åˆ«ã€å¤–è²Œï¼ˆå‘å‹/äº”å®˜/è‚¤è‰²ï¼‰ã€å§¿åŠ¿ï¼ˆç«™ç«‹/åå§¿/åŠ¨æ€åŠ¨ä½œï¼‰ã€è¡£ç€ï¼ˆé£æ ¼/æè´¨/é¢œè‰²/é…é¥°ï¼‰ã€è¡¨æƒ…ï¼ˆå¾®ç¬‘/ä¸¥è‚ƒ/å¹³é™ç­‰ï¼‰ï¼›è‹¥ä¸ºåœºæ™¯ï¼šæ ¸å¿ƒå…ƒç´ ç»„åˆã€ç©ºé—´å…³ç³»"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"environment"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åœºæ™¯ç±»å‹ï¼ˆå®¤å†…/æˆ·å¤–/ç§‘å¹»/å¤å¤/è‡ªç„¶ç­‰ï¼‰ã€èƒŒæ™¯ç»†èŠ‚ï¼ˆç®€æ´/å¤æ‚/æ¨¡ç³Š/å…·è±¡ï¼‰ã€ç¯å¢ƒå…ƒç´ ï¼ˆæ¤ç‰©/å»ºç­‘/å®¶å…·/å…‰å½±æ•ˆæœ/å¤©æ°”çŠ¶å†µï¼‰ã€ç©ºé—´æ„Ÿï¼ˆå¯†é—­/å¼€é˜”/å±‚æ¬¡æ„Ÿï¼‰ã€æ°›å›´åŸºè°ƒï¼ˆæ¸©é¦¨/å†·æ¸…/ç´§å¼ /æ²»æ„ˆç­‰ï¼‰"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"lighting"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å…‰çº¿ç±»å‹ï¼ˆè‡ªç„¶å…‰/äººé€ å…‰/æŸ”å…‰/ç¡¬å…‰/é€†å…‰/ä¾§å…‰/é¡¶å…‰ç­‰ï¼‰ã€å…‰çº¿å¼ºåº¦ï¼ˆæ˜äº®/æ˜æš—/æŸ”å’Œ/å¼ºçƒˆï¼‰ã€å…‰çº¿è‰²å½©ï¼ˆå†·ç™½/æš–é»„/å½©è‰²å…‰/å•è‰²å…‰ç­‰ï¼‰ã€å…‰å½±æ•ˆæœï¼ˆé˜´å½±æµ“åº¦/é«˜å…‰ç»†èŠ‚/åå…‰æ•ˆæœ/å…‰æ™•/å…‰æ–‘ï¼‰ã€å…‰çº¿æ–¹å‘ï¼ˆæ­£é¢æ‰“å…‰/ä¾§é¢æ‰“å…‰/èƒŒé¢æ‰“å…‰ï¼‰"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"camera"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç›¸æœºå‹å·ï¼ˆå¦‚Canon EOS R5/Nikon Z7 II/èƒ¶ç‰‡ç›¸æœºç­‰ï¼‰ã€é•œå¤´å‚æ•°ï¼ˆç„¦è·ï¼š24mm/50mm/200mmï¼›å…‰åœˆï¼šf/1.4/f/8/f/16ï¼›å¯¹ç„¦æ–¹å¼ï¼šè‡ªåŠ¨å¯¹ç„¦/æ‰‹åŠ¨å¯¹ç„¦ï¼‰ã€æ‹æ‘„è®¾ç½®ï¼ˆå¿«é—¨é€Ÿåº¦ï¼šé«˜é€Ÿè¿æ‹/æ…¢é—¨ï¼›ISOï¼šä½æ„Ÿ/é«˜æ„Ÿï¼‰ã€æ‹æ‘„æ•ˆæœï¼ˆé˜²æŠ–/è½»å¾®æ¨¡ç³Š/å¾®è·ç‰¹å†™/å¹¿è§’ç•¸å˜ï¼‰"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"color grade"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è‰²å½©åŸºè°ƒï¼ˆå†·è‰²è°ƒ/æš–è‰²è°ƒ/ä¸­æ€§è‰²è°ƒ/å¤å¤è‰²è°ƒ/èµ›åšæœ‹å…‹è‰²è°ƒç­‰ï¼‰ã€å¯¹æ¯”åº¦ï¼ˆé«˜å¯¹æ¯”/ä½å¯¹æ¯”/æŸ”å’Œå¯¹æ¯”ï¼‰ã€é¥±å’Œåº¦ï¼ˆé«˜é¥±å’Œ/ä½é¥±å’Œ/ä¸é¥±å’Œ/å•è‰²ï¼‰ã€æ˜åº¦ï¼ˆæ˜äº®/æš—æ²‰/ä¸­é—´è°ƒï¼‰ã€è‰²å½©ç»†èŠ‚ï¼ˆè‰²å½©åˆ†å±‚/æ¸å˜æ•ˆæœ/æ’è‰²æ­é…/è‰²è°ƒç»Ÿä¸€ï¼‰ã€æ»¤é•œé£æ ¼ï¼ˆèƒ¶ç‰‡æ»¤é•œ/ç”µå½±æ»¤é•œ/æ¸…æ–°æ»¤é•œç­‰ï¼‰"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è‰ºæœ¯é£æ ¼ï¼ˆå†™å®/æŠ½è±¡/å¡é€š/åŠ¨æ¼«/æ²¹ç”»/æ°´å½©/ç´ æ/3Dæ¸²æŸ“/èµ›åšæœ‹å…‹/è’¸æ±½æ³¢/å¤å¤é£/æç®€é£ç­‰ï¼‰ã€åˆ›ä½œç±»å‹ï¼ˆæ‘„å½±/AIç»˜ç”»/æ‰‹ç»˜/æ•°å­—è‰ºæœ¯/æ’ç”»ç­‰ï¼‰ã€é£æ ¼ç»†èŠ‚ï¼ˆç¬”è§¦è´¨æ„Ÿ/æ¸²æŸ“ç²¾åº¦/çº¿æ¡ç²—ç»†/ç”»é¢é¢—ç²’æ„Ÿç­‰ï¼‰"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"quality"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ¸…æ™°åº¦ï¼ˆè¶…é«˜æ¸…/é«˜æ¸…/æ¨¡ç³Š/è½»å¾®å™ªç‚¹ï¼‰ã€ç»†èŠ‚ç²¾åº¦ï¼ˆæè‡´ç»†èŠ‚/ç®€åŒ–ç»†èŠ‚/ä¿ç•™æ ¸å¿ƒç»†èŠ‚ï¼‰ã€åˆ†è¾¨ç‡ï¼ˆ8K/4K/1080Pç­‰ï¼‰ã€è´¨æ„Ÿè¡¨ç°ï¼ˆçœŸå®è´¨æ„Ÿ/è™šæ‹Ÿè´¨æ„Ÿ/ç»†è…»/ç²—ç³™ï¼‰ã€ç”»é¢å®Œæ•´æ€§ï¼ˆæ— ç‘•ç–µ/è½»å¾®ç‘•ç–µ/æ•…æ„åšæ—§ï¼‰ã€æ¸²æŸ“çº§åˆ«ï¼ˆç”µå½±çº§/æ¸¸æˆçº§/å•†ä¸šå¹¿å‘Šçº§/æ—¥å¸¸è®°å½•çº§ï¼‰"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"negatives"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ˜ç¡®æ’é™¤çš„å…ƒç´ ï¼ˆå¦‚æ–‡å­—/æ°´å°/å¤šä½™äººç‰©/æ‚ç‰©ï¼‰ã€ä¸æƒ³è¦çš„æ•ˆæœï¼ˆæ¨¡ç³Šè¿‡åº¦/å™ªç‚¹è¿‡å¤š/è‰²å½©å¤±çœŸ/æ¯”ä¾‹å¤±è°ƒï¼‰ã€è´Ÿé¢é£æ ¼ï¼ˆä½ä¿—/æ‚ä¹±/è¿å’Œå…ƒç´ ï¼‰ã€æŠ€æœ¯ç¼ºé™·ï¼ˆæ›å…‰è¿‡åº¦/æ›å…‰ä¸è¶³/å¯¹ç„¦å¤±è´¥/è¾¹ç¼˜æ¨¡ç³Šï¼‰"</span>
<span class="hljs-punctuation">}</span>

ä½¿ç”¨å¦‚ä¸Šçš„ jsonï¼Œç”Ÿæˆè¿™å¼ å›¾ç‰‡çš„æç¤ºè¯ï¼Œè¶Šè¯¦ç»†è¶Šå¥½ï¼Œç›´æ¥è¾“å‡ºä¸º json
</code></pre>
<p>è±†åŒ…çš„å›å¤å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e75c04d4e82a43df9a878803bc9f3b5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765426426&amp;x-signature=UinFpRaKFEe2aGVTtHHU%2B6XzJWA%3D" alt="" loading="lazy"/></p>
<p>å¤åˆ¶ç”Ÿæˆçš„ JSONï¼Œç„¶åç›´æ¥æŠ›ç»™ Nano Banana Pro ç”Ÿæˆã€‚</p>
<p>ç”Ÿæˆçš„å›¾ç‰‡å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/affd7418db564b429d8b1d245e72b825~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765426426&amp;x-signature=oJu%2F71TqLju0tQDfw6RlaBk1vvw%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥å½“ä½ ä¸çŸ¥é“å¦‚ä½•å†™æç¤ºè¯çš„æ—¶å€™ï¼š</p>
<ol>
<li>æ‰¾æ‰¾ä½ æƒ³è¦çš„å›¾ç‰‡ï¼ŒæŒ‰ç…§åˆšæ‰çš„æ¡†æ¶ç”Ÿæˆæç¤ºè¯</li>
<li>ä¿®æ”¹æç¤ºè¯çš„éƒ¨åˆ†å†…å®¹</li>
<li>å¤šè°ƒè¯•å‡ æ¬¡ç›´åˆ°ç”Ÿæˆä½ æ»¡æ„çš„å›¾ç‰‡</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š7ä¸ª V8 å¼•æ“éšè—æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ200%]]></title>    <link>https://juejin.cn/post/7579546893190479887</link>    <guid>https://juejin.cn/post/7579546893190479887</guid>    <pubDate>2025-12-04T04:16:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579546893190479887" data-draft-id="7579544918076833827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š7ä¸ª V8 å¼•æ“éšè—æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ200%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-04T04:16:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š7ä¸ª V8 å¼•æ“éšè—æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ200%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T04:16:50.000Z" title="Thu Dec 04 2025 04:16:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š7ä¸ª V8 å¼•æ“éšè—æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ200%</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼ŒJavaScript çš„æ€§èƒ½ç›´æ¥å†³å®šäº†ç”¨æˆ·ä½“éªŒçš„å¥½åã€‚ä½œä¸º Chrome å’Œ Node.js çš„æ ¸å¿ƒå¼•æ“ï¼ŒV8 é€šè¿‡å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰å’Œä¸€ç³»åˆ—ä¼˜åŒ–ç­–ç•¥å°† JavaScript ä»£ç è½¬åŒ–ä¸ºé«˜æ•ˆçš„æœºå™¨ç ã€‚ç„¶è€Œï¼Œè®¸å¤šå¼€å‘è€…å¹¶æœªå……åˆ†åˆ©ç”¨ V8 çš„åº•å±‚ä¼˜åŒ–æœºåˆ¶ï¼Œå¯¼è‡´ä»£ç è¿è¡Œæ•ˆç‡ä½ä¸‹ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ <strong>7ä¸ªé²œä¸ºäººçŸ¥çš„ V8 å¼•æ“ä¼˜åŒ–æŠ€å·§</strong>ï¼Œå¸®åŠ©ä½ çš„ JavaScript ä»£ç æé€Ÿé«˜è¾¾ <strong>200%</strong>ã€‚è¿™äº›æŠ€å·§åŸºäº V8 çš„å†…éƒ¨å·¥ä½œæœºåˆ¶ï¼ŒåŒ…æ‹¬éšè—ç±»ï¼ˆHidden Classesï¼‰ã€å†…è”ç¼“å­˜ï¼ˆInline Cachesï¼‰ã€å†…å­˜ç®¡ç†å’Œå‡½æ•°ä¼˜åŒ–ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<hr/>
<h3 data-id="heading-2">1. <strong>åˆ©ç”¨éšè—ç±»ï¼ˆHidden Classesï¼‰é¿å…åŠ¨æ€å±æ€§æ·»åŠ </strong></h3>
<p>V8 ä½¿ç”¨éšè—ç±»æ¥ä¼˜åŒ–å¯¹è±¡å±æ€§çš„è®¿é—®ã€‚æ¯æ¬¡åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤å±æ€§æ—¶ï¼ŒV8 ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„éšè—ç±»ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p>
<h4 data-id="heading-3"><strong>åä¾‹ï¼šåŠ¨æ€æ·»åŠ å±æ€§</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();
p.<span class="hljs-property">name</span> = <span class="hljs-string">"Alice"</span>; <span class="hljs-comment">// Hidden Class A</span>
p.<span class="hljs-property">age</span> = <span class="hljs-number">30</span>;       <span class="hljs-comment">// Hidden Class B (è½¬æ¢)</span>
</code></pre>
<h4 data-id="heading-4"><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼šä¸€æ¬¡æ€§åˆå§‹åŒ–å±æ€§</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">30</span>); <span class="hljs-comment">// Hidden Classå›ºå®š</span>
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>é¿å…åœ¨æ„é€ å‡½æ•°å¤–åŠ¨æ€ä¿®æ”¹å¯¹è±¡ç»“æ„</strong></li>
<li><strong>ä¼˜å…ˆä½¿ç”¨å­—é¢é‡æˆ–æ„é€ å‡½æ•°ä¸€æ¬¡æ€§å®šä¹‰æ‰€æœ‰å±æ€§</strong></li>
</ul>
<hr/>
<h3 data-id="heading-5">2. <strong>é€‰æ‹© <code>Array</code> vs <code>Object</code>ï¼šé’ˆå¯¹ V8 çš„å†…å­˜å¸ƒå±€ä¼˜åŒ–</strong></h3>
<p>V8 å¯¹ <code>Array</code>ï¼ˆç‰¹åˆ«æ˜¯å¯†é›†æ•°ç»„ï¼‰æœ‰ç‰¹æ®Šä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>å¿«è·¯å¾„ï¼ˆFast Elementsï¼‰</strong>ï¼šè¿ç»­æ•°å­—ç´¢å¼•çš„æ•°ç»„ä½¿ç”¨çº¿æ€§å­˜å‚¨</li>
<li><strong>æ…¢è·¯å¾„ï¼ˆDictionary Elementsï¼‰</strong>ï¼šç¨€ç–æ•°ç»„é€€åŒ–ä¸ºå“ˆå¸Œè¡¨å­˜å‚¨</li>
</ul>
<h4 data-id="heading-6"><strong>ä¼˜åŒ–å»ºè®®</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… Fast Elements (æ¨è)</span>
<span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; 

<span class="hljs-comment">// âŒ Dictionary Elements (æ€§èƒ½å·®)</span>
<span class="hljs-keyword">const</span> sparseArr = [];
sparseArr[<span class="hljs-number">1000000</span>] = <span class="hljs-string">"x"</span>; 
</code></pre>
<p>å¯¹äºé”®å€¼å­˜å‚¨ï¼š</p>
<ul>
<li><strong>å°è§„æ¨¡æ•°æ®ç”¨ <code>Object</code>/<code>Map</code></strong></li>
<li><strong>å¤§è§„æ¨¡æ•°æ®ä¼˜å…ˆç”¨ <code>Map</code></strong></li>
</ul>
<hr/>
<h3 data-id="heading-7">3. <strong>å‡½æ•°ä¼˜åŒ–çš„é»„é‡‘æ³•åˆ™ï¼šå•æ€ vs. å¤šæ€è°ƒç”¨ç‚¹</strong></h3>
<p>V8ä¼šå¯¹é¢‘ç¹è°ƒç”¨çš„å‡½æ•°è¿›è¡Œå†…è”ç¼“å­˜ï¼ˆInline Cache, ICï¼‰ä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>å•æ€è°ƒç”¨ç‚¹ï¼ˆMonomorphicï¼‰</strong>:  åŒä¸€ç±»å‹çš„å‚æ•°å¤šæ¬¡è°ƒç”¨ â†’ JITç”Ÿæˆæœ€ä¼˜ä»£ç </li>
<li><strong>å¤šæ€è°ƒç”¨ç‚¹ï¼ˆPolymorphicï¼‰</strong>:  ä¸åŒç±»å‹å‚æ•°æ··åˆ â†’ ICé€€åŒ–</li>
</ul>
<h4 data-id="heading-8"><strong>åä¾‹ï¼šå¤šæ€è°ƒç”¨</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x</span>) { <span class="hljs-keyword">return</span> x + x; }
<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>);     <span class="hljs-comment">// ICè®°å½•Numberç±»å‹</span>
<span class="hljs-title function_">add</span>(<span class="hljs-string">"1"</span>);   <span class="hljs-comment">// ICé€€åŒ–ä¸ºé€šç”¨å¤„ç†</span>
</code></pre>
<h4 data-id="heading-9"><strong>è§£å†³æ–¹æ¡ˆ</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ…ä¿æŒå‚æ•°ç±»å‹ä¸€è‡´</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sumNumbers</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }
<span class="hljs-title function_">sumNumbers</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
<span class="hljs-title function_">sumNumbers</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);
</code></pre>
<hr/>
<h3 data-id="heading-10">4. <strong>é¿å… <code>arguments</code>/<code>try-catch</code>/<code>with</code>è¯­å¥ç ´åå‡½æ•°ä¼˜åŒ–</strong></h3>
<p>ä»¥ä¸‹æ“ä½œä¼šå¯¼è‡´å‡½æ•°è¢«æ ‡è®°ä¸º"æ— æ³•ä¼˜åŒ–"ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">unoptimized</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">callee</span>;      <span class="hljs-comment">// âŒç¦ç”¨å†…è”</span>
    <span class="hljs-keyword">try</span> { <span class="hljs-title function_">riskyOp</span>(); }     <span class="hljs-comment">// âŒå½±å“ä½œç”¨åŸŸåˆ†æ</span>
    <span class="hljs-keyword">catch</span>(e) {}
}
</code></pre>
<h4 data-id="heading-11"><strong>æ›¿ä»£æ–¹æ¡ˆ</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ…Restå‚æ•°ä»£æ›¿arguments</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">optimized</span>(<span class="hljs-params">...args</span>) { <span class="hljs-comment">/*...*/</span> }
</code></pre>
<hr/>
<h3 data-id="heading-12">5. <strong><em>Optimize Sooner</em>ï¼šæ‰‹åŠ¨è§¦å‘ç¼–è¯‘å™¨ä¼˜åŒ–çš„é»‘ç§‘æŠ€</strong></h3>
<p>V8é‡‡ç”¨å»¶è¿Ÿç¼–è¯‘ç­–ç•¥ï¼Œä½†å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æå‰è§¦å‘TurboFanä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ”¥å¼ºåˆ¶è¿è¡Œ10Kæ¬¡ä»¥è§¦å‘ç¼–è¯‘å™¨ä¼˜åŒ–</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i =<span class="hljs-number">0</span>; i &lt;<span class="hljs-number">10000</span>; i++) {
    <span class="hljs-title function_">hotFunction</span>(); 
}
</code></pre>
<blockquote>
<p>âš ï¸æ³¨æ„ï¼šNode.jså¯é€šè¿‡<code>--allow-natives-syntax</code>æš´éœ²å†…éƒ¨æ–¹æ³•:</p>
<pre><code class="hljs language-javascript" lang="javascript">%<span class="hljs-title class_">OptimizeFunctionOnNextCall</span>(hotFunction);
</code></pre>
</blockquote>
<hr/>
<h3 data-id="heading-13">6. <strong><em>Memory Matters</em>ï¼šå‡å°‘åƒåœ¾å›æ”¶å‹åŠ›çš„ç¼–ç æ¨¡å¼</strong></h3>
<p>é¢‘ç¹GCä¼šå¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡ï¼š</p>

















<table><thead><tr><th>Anti-Pattern</th><th>Optimization</th></tr></thead><tbody><tr><td><code>array.push()</code>å¾ªç¯</td><td>é¢„åˆ†é…ç©ºé—´: <code>new Array(size)</code></td></tr><tr><td>å­—ç¬¦ä¸²æ‹¼æ¥(<code>+=</code>)</td><td><code>.join()</code>æˆ–æ¨¡æ¿å­—ç¬¦ä¸²</td></tr></tbody></table>
<h4 data-id="heading-14"><strong><em>Hidden GC Triggers</em></strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒæ¯æ¬¡è¿­ä»£åˆ›å»ºæ–°é—­åŒ… </span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {...},<span class="hljs-number">100</span>);

<span class="hljs-comment">// âœ…å¤ç”¨åŒä¸€ä¸ªé—­åŒ… </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span>=(<span class="hljs-params"/>)=&gt;{...};
<span class="hljs-built_in">setInterval</span>(handler,<span class="hljs-number">100</span>);
</code></pre>
<hr/>
<h3 data-id="heading-15">7. <strong><em>Wasm &amp; TurboFan IR</em> ï¼šç»ˆææ€§èƒ½æ­¦å™¨</strong></h3>
<p>å¯¹äºè®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼š
1ï¸âƒ£å°†çƒ­ç‚¹é€»è¾‘ç§»æ¤åˆ°WebAssembly<br/>
2ï¸âƒ£åˆ©ç”¨SIMDæŒ‡ä»¤é›†åŠ é€ŸçŸ©é˜µè¿ç®—<br/>
3ï¸âƒ£é€šè¿‡SharedArrayBufferå®ç°å¤šçº¿ç¨‹å¹¶è¡Œ</p>
<hr/>
<h3 data-id="heading-16">æ€»ç»“</h3>
<p>é€šè¿‡æ·±å…¥ç†è§£V8çš„å·¥ä½œåŸç†å¹¶åº”ç”¨è¿™7é¡¹æŠ€æœ¯ï¼š
âœ…å‡å°‘éšè—ç±»å˜æ›´<br/>
âœ…é€‰æ‹©æœ€ä¼˜æ•°æ®ç»“æ„<br/>
âœ…ä¿æŒå‡½æ•°å•æ€æ€§<br/>
âœ…è§„é¿å»ä¼˜åŒ–é™·é˜±<br/>
âœ…ä¸»åŠ¨è§¦å‘JITç¼–è¯‘<br/>
âœ…ç²¾ç»†åŒ–å†…å­˜ç®¡ç†<br/>
âœ…æ‹¥æŠ±Wasmç”Ÿæ€</p>
<p>ä½ çš„JavaScriptåº”ç”¨å°†è·å¾—æ˜¾è‘—çš„æ€§èƒ½æå‡â€”â€”åœ¨æŸäº›åœºæ™¯ä¸‹ç”šè‡³èƒ½è¾¾åˆ°200%çš„é€Ÿåº¦é£è·ƒï¼è®°ä½ï¼š"Write code for humans first and machines second"ï¼Œä½†åœ¨å…³é”®è·¯å¾„ä¸Šå¿…é¡»è®©æœºå™¨é£èµ·æ¥ï¼ ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¦–å±Š Apache Gluten ç¤¾åŒºå¹´åº¦ç››ä¼š â€”â€” GlutenCon 2025 æ­£å¼å¯åŠ¨ï¼]]></title>    <link>https://juejin.cn/post/7579555970595913769</link>    <guid>https://juejin.cn/post/7579555970595913769</guid>    <pubDate>2025-12-04T04:29:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579555970595913769" data-draft-id="7579555970595815465" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¦–å±Š Apache Gluten ç¤¾åŒºå¹´åº¦ç››ä¼š â€”â€” GlutenCon 2025 æ­£å¼å¯åŠ¨ï¼"/> <meta itemprop="keywords" content="å¤§æ•°æ®,Spark,çº¿ä¸‹æ´»åŠ¨"/> <meta itemprop="datePublished" content="2025-12-04T04:29:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­—èŠ‚è·³åŠ¨å¼€æº"/> <meta itemprop="url" content="https://juejin.cn/user/1227510999971086"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¦–å±Š Apache Gluten ç¤¾åŒºå¹´åº¦ç››ä¼š â€”â€” GlutenCon 2025 æ­£å¼å¯åŠ¨ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1227510999971086/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­—èŠ‚è·³åŠ¨å¼€æº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T04:29:47.000Z" title="Thu Dec 04 2025 04:29:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿™ä¸ªæ•°æ®çˆ†ç‚¸çš„æ—¶ä»£ï¼Œå¦‚ä½•è®© Spark ç­‰è®¡ç®—å¼•æ“è·‘å¾—æ›´å¿«ï¼Ÿå¦‚ä½•é€šè¿‡åŸç”Ÿå‘é‡åŒ–æ‰§è¡Œçªç ´æ€§èƒ½ç“¶é¢ˆï¼Ÿ</p>
<p>2025 å¹´ 12 æœˆ 6 æ—¥ï¼ˆå‘¨å…­ï¼‰ï¼Œé¦–å±ŠÂ Apache Gluten ç¤¾åŒºå¹´åº¦ç››ä¼š â€”â€” GlutenCon 2025 å°†äºåŒ—äº¬ä¸¾åŠã€‚æ¥è‡ªå­—èŠ‚è·³åŠ¨ã€IBMã€å¾®è½¯ã€è…¾è®¯ã€åä¸ºã€å°çº¢ä¹¦ã€å°ç±³ã€BIGO ç­‰ä¼ä¸šçš„æŠ€æœ¯ä¸“å®¶å°†å¸¦æ¥ç¡¬æ ¸æŠ€æœ¯åˆ†äº«ï¼Œå¸¦ä½ æ·±å…¥äº†è§£ Bolt åŠ é€Ÿåº“ã€GPU ä¼˜åŒ–ã€å†…å­˜ç®¡ç†ç­‰æ ¸å¿ƒè®®é¢˜ã€‚</p>
<p>ğŸŸï¸ æ´»åŠ¨å…¨ç¨‹å…è´¹ï¼Œå«åˆé¤èŒ¶æ­‡ï¼Œæ›´æœ‰ç²¾ç¾çºªå¿µå“ç­‰ä½ æ¥æ‹¿ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b839dd7b140a4cb2b3165cf2fccf90c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5byA5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765427387&amp;x-signature=NZLoUixOblTqC0%2B335Zyezi8lVQ%3D" alt="banner.png" loading="lazy"/></p>
<h2 data-id="heading-0">æ´»åŠ¨ä¿¡æ¯</h2>
<p>ğŸ“…Â <strong>æ—¶é—´ï¼š2025 å¹´ 12 æœˆ 6 æ—¥ï¼ˆæ˜ŸæœŸå…­ï¼‰ 09:00 - 18:00</strong></p>
<p>ğŸ“Â <strong>åœ°ç‚¹ï¼šåŒ—äº¬ Â· æµ·æ·€åŒºåŒ—ä¸‰ç¯è¥¿è·¯ç”² 18 å·é™¢å¤§é’Ÿå¯ºå¹¿åœº 1 å·æ¥¼</strong></p>
<p>ğŸ¯Â <strong>ä¸»åŠæ–¹ï¼šApache Gluten ç¤¾åŒº &amp; å­—èŠ‚è·³åŠ¨</strong></p>
<p>ğŸ«Â <strong>è´¹ç”¨ï¼šå…è´¹</strong></p>
<h2 data-id="heading-1">å¤§ä¼šäº®ç‚¹</h2>
<p>âœ… æŠ€æœ¯å¤©å›¢é›†ç»“ï¼šæ¥è‡ª Apache Gluten åˆ›å§‹å›¢é˜Ÿæˆå‘˜ï¼Œä»¥åŠå›½å†…å¤–é¡¶çº§äº’è”ç½‘å…¬å¸çš„ Spark æ ¸å¿ƒç ”å‘å›¢é˜Ÿã€‚</p>
<p>âœ… ç¡¬æ ¸è®®é¢˜è¦†ç›–ï¼šä» Bolt å¤šå¼•æ“å¼‚æ„åŠ é€Ÿåº“çš„å¼€æºå‘å¸ƒï¼Œåˆ° GPU åŠ é€Ÿï¼ŒClickHouse åç«¯åŠ é€Ÿï¼Œå†åˆ°å„å®¶å¤§å‚çš„ç”Ÿäº§çº§å®æˆ˜æ¡ˆä¾‹ï¼Œä¸€æ¬¡å¬è¿‡ç˜¾ï¼</p>
<p>âœ… æ·±åº¦ç¤¾åŒºäº¤æµï¼šé¢å¯¹é¢ä¸ PMC æˆå‘˜ã€Committer äº¤æµï¼Œäº†è§£å¼€æºæ²»ç†ï¼Œæ‹“å±•æŠ€æœ¯äººè„‰ã€‚</p>
<p>âœ… ç¦åˆ©æ»¡æ»¡ï¼šå…è´¹å‚ä¼šç¥¨åŒ…å«ç²¾ç¾åˆé¤, èƒ½é‡èŒ¶æ­‡ ä»¥åŠ ç¤¾åŒºå®šåˆ¶çºªå¿µå“ã€‚</p>
<h2 data-id="heading-2">ç«‹å³æŠ¥å</h2>
<p>åé¢æœ‰é™ï¼Œå…ˆåˆ°å…ˆå¾—ï¼è¯·ç‚¹å‡»ä¸‹æ–¹é“¾æ¥æˆ–æ‰«ææµ·æŠ¥äºŒç»´ç å¡«å†™æŠ¥åè¡¨ã€‚</p>
<p>ğŸ‘‰ æŠ¥åé“¾æ¥</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbytedance.us.larkoffice.com%2Fshare%2Fbase%2Fform%2FshrusjMDU22LxnSXOYwT757eAxc" target="_blank" title="https://bytedance.us.larkoffice.com/share/base/form/shrusjMDU22LxnSXOYwT757eAxc" ref="nofollow noopener noreferrer">ç‚¹å‡»ç›´è¾¾æŠ¥åé“¾æ¥</a></p>
<p>ğŸ’¬ åŠ å…¥ç¤¾ç¾¤Â </p>
<p>æƒ³æå‰è®¤è¯†å¤§ç‰›ï¼Ÿæƒ³è·å–ç¬¬ä¸€æ‰‹ä¼šè®®èµ„æ–™ï¼Ÿ æ¬¢è¿æ‰«æä¸‹æ–¹äºŒç»´ç åŠ å…¥ GlutenCon 2025 äº¤æµç¾¤ï¼š</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/999a4070d60f4042a474c53c0ce0752c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5byA5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765427387&amp;x-signature=gUDSgjR5BG7XGNCV3hbSw1ZcdN0%3D" alt="å›¾ç‰‡" width="30%" loading="lazy"/>
<h2 data-id="heading-3">å¤§ä¼šæ—¥ç¨‹</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8da50116ad81492b848838fcfe406a9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5byA5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765427387&amp;x-signature=GEpPn7ukZbI3gKCQBvkuqM6dB%2FU%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šAIåŠ é€Ÿè¥å†³èµ›å…¥å›´åå•æ­æ™“ï¼Œ12æœˆ6æ—¥å¤§ç†è§ï¼]]></title>    <link>https://juejin.cn/post/7579496954252591144</link>    <guid>https://juejin.cn/post/7579496954252591144</guid>    <pubDate>2025-12-04T03:09:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579496954252591144" data-draft-id="7579480677902827555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šAIåŠ é€Ÿè¥å†³èµ›å…¥å›´åå•æ­æ™“ï¼Œ12æœˆ6æ—¥å¤§ç†è§ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,ç¨‹åºå‘˜,ç™¾åº¦"/> <meta itemprop="datePublished" content="2025-12-04T03:09:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–‡å¿ƒå¿«ç BaiduComate"/> <meta itemprop="url" content="https://juejin.cn/user/992209294070809"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šAIåŠ é€Ÿè¥å†³èµ›å…¥å›´åå•æ­æ™“ï¼Œ12æœˆ6æ—¥å¤§ç†è§ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/992209294070809/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–‡å¿ƒå¿«ç BaiduComate
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:09:12.000Z" title="Thu Dec 04 2025 03:09:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šAIåŠ é€Ÿè¥å†³èµ›å°†äº12æœˆ6æ—¥åœ¨å¤§ç†ä¸¾åŠï¼</strong> æ´»åŠ¨ç”±ä¸­å›½è®¡ç®—æœºå­¦ä¼šä¸»åŠã€msupæ‰¿åŠï¼Œæ–‡å¿ƒå¤§æ¨¡å‹ã€æ–‡å¿ƒå¿«ç åˆä½œæ”¯æŒã€‚</p>
<p>ç»è¿‡é€‰æ‰‹ä»¬æ¿€çƒˆçš„è§’é€å’Œåˆèµ›ä¸“ä¸šæŠ€æœ¯è¯„å®¡å›¢æ…é‡è€ƒé‡ä¸ä¸¥æ ¼ç­›é€‰ï¼Œ<strong>CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šAIåŠ é€Ÿè¥å†³èµ›å…¥å›´åå•éœ‡æ’¼å‡ºç‚‰</strong>ï¼ä»¥ä¸‹10ä¸ªä¼˜ç§€ä½œå“æœ€ç»ˆå…¥å›´å†³èµ›ï½ç»„å§”ä¼š<strong>å°†äº12æœˆ6æ—¥ï¼Œåœ¨é£èŠ±é›ªæœˆçš„å¤§ç†å±•å¼€æœ€ç»ˆè¯„é€‰</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/432919c0b76b42d3a2a73c5014dec92b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422552&amp;x-signature=H%2Fb2xazXVGeZ30FC9xUZtPLRhtA%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-0">â° 12æœˆ6æ—¥å†³èµ›è®®ç¨‹</h2>
<ul>
<li><strong>13:00-13:30 ç­¾åˆ°å…¥åœº</strong></li>
<li><strong>13:30-14:00 è‡´è¾&amp;ä¸»é¢˜æ¼”è®²</strong></li>
<li><strong>14:00-15:40 å…¥å›´ä½œå“è·¯æ¼”</strong></li>
<li><strong>15:40-16:10 è¯„å®¡åˆè®®&amp;é¢å¥–</strong></li>
</ul>
<p><strong>å†³èµ›åœ°ç‚¹ï¼šå¤§ç†å›½é™…ä¼šè®®ä¸­å¿ƒ2å·å…</strong></p>
<p>æœ¬æ¬¡å†³èµ›é‚€è¯·åˆ°åˆ˜ä»˜å¼ºï¼ˆä¸­å›½è®¡ç®—æœºå­¦ä¼šCCFTFå·¥ç¨‹å¸ˆæ–‡åŒ–å§”å‘˜ä¼šä¸»å¸­ï¼‰ã€ä½•ä¸‡é’ï¼ˆæ¸…ç¨‹ææ™ºåˆä¼™äººã€æŠ€æœ¯ç”Ÿæ€å‰¯æ€»è£ï¼‰ã€å½­äº‘é¹ï¼ˆç™¾åº¦æ–‡å¿ƒå¿«ç å›¢é˜Ÿé«˜çº§ç»ç†ï¼‰ç­‰æŠ€æœ¯å¤§å’–ä½œä¸ºä¸“ä¸šè¯„å§”å˜‰å®¾ï¼Œå°†å¯¹å…¥å›´ä½œå“è¿›è¡Œä¸“ä¸šè¯„å®¡ï¼Œ<strong>æœ€ç»ˆå†³å®šTOP3å¤§å¥–å’Œ4ä¸ªå•é¡¹å¥–</strong>ï¼ˆæœ€ä½³åˆ›æ„å¥–ã€æœ€ä½³ç¤¾ä¼šä»·å€¼å¥–ã€æœ€ä½³å•†ä¸šä»·å€¼å¥–ã€æœ€ä½³ææ•ˆå¥–ï¼‰èŠ±è½è°å®¶ï¼</p>
<h2 data-id="heading-1">ğŸ é™æ—¶ç¦åˆ©</h2>
<p><strong>CCFç¨‹åºå‘˜å¤§ä¼šç»„å§”ä¼šè”åˆæ–‡å¿ƒå¿«ç ï¼Œèµ é€ä»·å€¼512å…ƒçš„CCFç¨‹åºå‘˜å¤§ä¼šé—¨ç¥¨ï¼</strong></p>
<p><strong>å¯¹æœ¬æ¬¡å†³èµ›æ„Ÿå…´è¶£å¹¶å¯ä»¥åˆ°å¤§ç†å›½é™…ä¼šè®®ä¸­å¿ƒè§‚æ‘©çš„å°ä¼™ä¼´ï¼Œå¯ä»¥æˆ³é“¾æ¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fiwenjuan.baidu.com%2F%3Fcode%3Dufblzo" target="_blank" title="https://iwenjuan.baidu.com/?code=ufblzo" ref="nofollow noopener noreferrer">iwenjuan.baidu.com/?code=ufblzâ€¦</a> å¡«å†™â€œå§“å+æ‰‹æœºå·+é‚®ç®±+å…¬å¸+èŒä½â€ä¿¡æ¯ï¼Œè·å–é—¨ç¥¨ã€‚</strong></p>
<p><strong>ä¿¡æ¯æäº¤æˆªæ­¢æ—¶é—´ï¼š2025å¹´12æœˆ5æ—¥18:00</strong></p>
<p><strong>12æœˆ4æ—¥-6æ—¥ï¼Œç¬¬äºŒå±ŠCCFç¨‹åºå‘˜å¤§ä¼šå°†åœ¨äº‘å—å¤§ç†å¯å¹•ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€åœºæŠ€æœ¯å¤§ä¼šï¼Œæ›´æ˜¯ä¸€æ¬¡æŠ€æœ¯äººçš„é›†ä½“â€œé¡¿æ‚Ÿâ€ã€‚ä¸ä»…è®¨è®ºAl-Native Engineering(AlåŸç”Ÿå·¥ç¨‹)çš„å‰æ²¿è¶‹åŠ¿ï¼Œæ›´å…³å¿ƒæŠ€æœ¯æµªæ½®ä¸‹å…·ä½“çš„â€œäººâ€ã€‚</strong></p>
<p><strong>å¤§ä¼šæ—¥ç¨‹æ€»è§ˆï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b5c965b429c46d98b187227806fc750~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422552&amp;x-signature=JOVDatFAbtN494tglwDvh%2BZSEyI%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åœ°å€ï¼šå¤§ç†å›½é™…ä¼šè®®ä¸­å¿ƒ äº‘å—çœå¤§ç†ç™½æ—è‡ªæ²»å·å¤§ç†å¸‚è‹å±±è·¯539å·</p>
<p>æ­¤å¤–ï¼Œæœ¬æ¬¡æ¯”èµ›è¿˜æ¶Œç°å‡ºå¾ˆå¤šä¼˜ç§€çš„ä½œå“å’Œåˆ›æ„ï¼Œæ¯”å¦‚ä¸“ä¸ºç¼–ç¨‹åˆå­¦è€…è®¾è®¡çš„è·¨å¹³å°è‹±è¯­å­¦ä¹ åº”ç”¨ã€åŸºäºMCPæ„å»ºçš„æ™ºèƒ½å­¦ä¹ ç¬”è®°åŠ©æ‰‹ã€åŸºäºäººå·¥æ™ºèƒ½çš„è¿åŠ¨å§¿æ€è¯†åˆ«ä¸åˆ†æç³»ç»Ÿï¼ˆè¾…åŠ©å±…å®¶å¥èº«ã€è¿åŠ¨ï¼‰ç­‰ï¼Œå†æ¬¡å¯¹æ‰€æœ‰å‚èµ›è€…è‡´ä»¥æœ€è¯šæŒšçš„è°¢æ„ï¼å‚èµ›ä¼˜ç§€ä½œå“æœ‰æœºä¼šè¢«æ–‡å¿ƒå¿«ç å®˜å·PICKï¼Œè¯·æ‹­ç›®ä»¥å¾…å§ï½</p>
<p>é™„ï¼šå†³èµ›å…¥å›´ä½œå“è¯¦æƒ…
|</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3ecbf9bbe8145858917d5e2f31b02df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422552&amp;x-signature=s6vQR%2BzPp81XOj3TFjLc0pBwgmo%3D" alt="infoflow 2025-12-04 10-52-12.png" loading="lazy"/>
ä»¥ä¸Šæ’åä¸åˆ†å…ˆåï¼Œæ ¹æ®é€‰æ‰‹å§“åé¦–å­—æ¯æ’åºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ç”¨ Trae SOLO åšäº†ä¸€ä¸ªæ— é™ Rogue å°æ¸¸æˆï¼šä¸€æ¬¡ä»æƒ³æ³•åˆ°åŸå‹çš„å®Œæ•´ä½“éªŒè®°å½•]]></title>    <link>https://juejin.cn/post/7578138892127273006</link>    <guid>https://juejin.cn/post/7578138892127273006</guid>    <pubDate>2025-12-01T03:44:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578138892127273006" data-draft-id="7578161740468027443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ç”¨ Trae SOLO åšäº†ä¸€ä¸ªæ— é™ Rogue å°æ¸¸æˆï¼šä¸€æ¬¡ä»æƒ³æ³•åˆ°åŸå‹çš„å®Œæ•´ä½“éªŒè®°å½•"/> <meta itemprop="keywords" content="å‰ç«¯,æ¸¸æˆ"/> <meta itemprop="datePublished" content="2025-12-01T03:44:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="akå•Š"/> <meta itemprop="url" content="https://juejin.cn/user/237916932030253"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ç”¨ Trae SOLO åšäº†ä¸€ä¸ªæ— é™ Rogue å°æ¸¸æˆï¼šä¸€æ¬¡ä»æƒ³æ³•åˆ°åŸå‹çš„å®Œæ•´ä½“éªŒè®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/237916932030253/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    akå•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T03:44:50.000Z" title="Mon Dec 01 2025 03:44:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    365
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7811eb4b61f24c8fac79c2bbd335ccb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWvllYo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423492&amp;x-signature=cMgdHzmNC7w2grR79XzfQ57Ap7k%3D" alt="20251201033118-iClYeZ.png" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>æˆ‘ç”¨ Trae åšäº†ä¸€ä¸ªæ— é™ Rogue å°æ¸¸æˆï¼šä¸€æ¬¡ä»æƒ³æ³•åˆ°åŸå‹çš„å®Œæ•´ä½“éªŒè®°å½•</strong></h2>
<p>æˆ‘å¹³æ—¶åšä¸€äº›å°å®éªŒé¡¹ç›®ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯å‡­å…´è¶£æ¥çš„ã€‚å‰é˜µå­æˆ‘çªç„¶æƒ³åšä¸€æ¬¾ <strong>æ— å°½æ¨¡å¼çš„ Rogue æ¸¸æˆ</strong>ï¼Œåƒé‚£ç§è¶Šæ‰“è¶Šçˆ½ã€è¶Šå‡è¶Šå¤šèŠ±æ ·çš„ç©æ³•ï¼Œä½†åˆæ‡’å¾—è‡ªå·±ä»é›¶å»æ­å·¥ç¨‹ã€‚åˆšå¥½çœ‹åˆ°æœ‰äººåœ¨ç”¨ Trae è¿™ç§ AI IDEï¼Œæˆ‘å°±æƒ³æ‹¿è¿™ä¸ªé¡¹ç›®è¯•è¯•å®ƒåˆ°åº•èƒ½å¸®æˆ‘çœå¤šå°‘åŠ›ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æ˜¯æŠŠæ•´ä¸ªè¿‡ç¨‹ä»å¤´åˆ°å°¾è®°å½•ä¸‹æ¥ï¼šä»æˆ‘ç¬¬ä¸€å¥è¯ç»™ Traeï¼Œåˆ°æ¸¸æˆé€æ¸æˆå‹ï¼Œä¸­é—´åŠ æ­¦å™¨ã€åŠ æ€ªç‰©ã€è¡¥è”åŠ¨ã€æ”¹ UIâ€¦ ä¸€è·¯æ¨è¿›åˆ°èƒ½ç©ã€‚</p>
<p>æ²¡æœ‰è¯„æµ‹ï¼Œä¸åšç»“è®ºï¼Œåªæ˜¯æŠŠè¿‡ç¨‹å†™å‡ºæ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1b2fcc32603497aa54d6490128d3983~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWvllYo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423492&amp;x-signature=orbyPnz%2Fq1X8l9wQQddyhobmRfw%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1"><strong>ä¸€ã€æˆ‘åªç»™äº† Trae ä¸€å¥è¯ï¼šå…ˆæŠŠæ¸¸æˆåšå‡ºæ¥</strong></h3>
<p>æˆ‘ç»™å®ƒçš„ç¬¬ä¸€æ®µæç¤ºå¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<blockquote>
<p>â€œåšä¸€ä¸ªæ— é™ Rogueã€‚è§’è‰²åœ¨åœ°å›¾ä¸Šè‡ªç”±ç§»åŠ¨ï¼Œåœ°ä¸Šä¼šéšæœºç”Ÿæˆé“å…·ï¼ˆå›è¡€ã€æ¸…å±ã€ä»£å¸ã€å¸å…¨å›¾ç»éªŒï¼‰ã€‚åœ°å›¾è¾¹ç¼˜ä¼šä¸æ–­åˆ·æ•Œäººï¼Œå¾€ç©å®¶ä¸­å¿ƒé€¼è¿‘ï¼Œæ•Œäººç±»å‹è¦ä¸°å¯Œï¼Œæœ‰å¿«æœ‰æ…¢ï¼Œæœ‰è¿‘æˆ˜ä¹Ÿæœ‰è¿œç¨‹ã€‚æ¯éš”ä¸€æ®µæ—¶é—´å‡ºä¸€ä¸ª Bossï¼Œæœ‰å†²åˆºå’ŒèŒƒå›´ä¼¤å®³ã€‚æ€ªè¢«æ‰“æ­»æ‰ç»éªŒæ°´æ™¶ï¼Œç©å®¶å‡çº§åé€‰æ­¦å™¨ã€å‡çº§æ­¦å™¨ã€åŠ å±æ€§æˆ–å­¦æ³•æœ¯ã€‚æ­¦å™¨å’Œæ³•æœ¯ä¹‹é—´è¦æœ‰è”åŠ¨æ•ˆæœã€‚éšç€ç­‰çº§å’Œæ—¶é—´æ¨è¿›ï¼Œæ•Œäººå’Œ boss è¶Šæ¥è¶Šå¼ºã€‚â€</p>
</blockquote>
<p>å†…å®¹æŒºé•¿ï¼Œä½†é€»è¾‘ä¸ç®—å¤æ‚ï¼Œå°±æ˜¯æŠŠæˆ‘æƒ³è¦çš„ç©æ³•ä¸€è‚¡è„‘è®²å‡ºæ¥ã€‚</p>
<p>æˆ‘æœ¬æ¥ä»¥ä¸º Trae ä¼šåªç»™æˆ‘ä¸€ç‚¹ç‚¹åŸºç¡€ç»“æ„ï¼Œç»“æœå®ƒæŠŠæ¨¡å—æ‹†å¾—æ¯”æˆ‘é¢„æœŸè¿˜ç»†ï¼š</p>
<ul>
<li>åœ°å›¾åˆ·æ–°</li>
<li>æ•Œäººè¡Œä¸º</li>
<li>é“å…·ç³»ç»Ÿ</li>
<li>å‡çº§ç³»ç»Ÿ</li>
<li>æ­¦å™¨ä½“ç³»</li>
<li>Boss æ¨¡å—</li>
<li>æ•°å€¼é…ç½®</li>
<li>äº‹ä»¶åˆ†å‘</li>
</ul>
<p>æ–‡ä»¶ç»“æ„ä¹Ÿæ­å¾—æŒºå®Œæ•´ã€‚<br/>
åŸºç¡€è·‘èµ·æ¥ä¹‹åï¼Œæˆ‘åŸºæœ¬å°±å›´ç»•â€œå¡«ç©ºâ€å¼€å§‹æ¨è¿›é¡¹ç›®ã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>äºŒã€å…ˆè¡¥æ€ªç‰©ï¼šè®©ä¸–ç•Œå˜å¾—æœ‰ç‚¹å±é™©æ„Ÿ</strong></h3>
<p>æœ€æ—©çš„æ•Œäººåªæœ‰â€œä¼šå¾€ç©å®¶æ–¹å‘èµ°çš„çº¢ç‚¹â€è¿™ç§åŸå‹ï¼Œæˆ‘å°±è®© Trae æŠŠæ•Œäººåšå¾—æ›´åƒæ ·ä¸€äº›ï¼š</p>
<blockquote>
<p>â€œæ•Œäººè¦å¤šæ ·åŒ–ï¼Œæœ‰é€Ÿåº¦å·®å¼‚ã€æœ‰è¿œç¨‹ã€æœ‰è´´è„¸ã€æœ‰å¦å…‹ï¼Œæœ‰è‡ªå·±çš„è¡Œä¸ºæ¨¡å¼ã€‚â€</p>
</blockquote>
<p>å®ƒåšçš„äº‹æƒ…å¾ˆå·¥ç¨‹åŒ–ï¼š</p>
<ul>
<li>æŠ½ä¸€ä¸ªåŸºç¡€æ•Œäººç±»</li>
<li>ç»™ä¸åŒç±»å‹æ´¾ç”Ÿè¡Œä¸º</li>
<li>åŠ äº†è¿œç¨‹å°„å‡»ã€å¿«é€Ÿçªè¿›ã€æ…¢é€Ÿé‡å‡»è¿™ç§é¢„è®¾</li>
<li>æŠŠé è¿‘é˜ˆå€¼ã€æ”»å‡»é—´éš”ã€ç§»åŠ¨é€Ÿåº¦æ‹†æˆå‚æ•°</li>
</ul>
<p>æˆ‘è¿˜è®©å®ƒå¤„ç†ä¸€ä¸ªå°ç»†èŠ‚ï¼š</p>
<blockquote>
<p>â€œé è¿‘ç©å®¶æ—¶ä¸è¦ç›´æ¥æ’è„¸ï¼Œè¦æœ‰ä¸€ç‚¹å»¶è¿Ÿã€‚â€</p>
</blockquote>
<p>è¿™ä¸ªæ•ˆæœå…¶å®å¾ˆé‡è¦ï¼Œå› ä¸ºæ€ªç‰©çš„èŠ‚å¥ä¼šå˜å¾—æ›´å¯æ§ï¼Œè€Œä¸æ˜¯ä¹±ä¸ƒå…«ç³Ÿå †ä¸€å †ä¸Šæ¥ã€‚</p>
<p>æ€ªå¤šçš„æ—¶å€™ï¼Œåœ°å›¾èŠ‚å¥ç»ˆäºæœ‰äº†â€œå‹åŠ›æ„Ÿâ€ï¼Œä¸å†åƒç¬¬ä¸€ç‰ˆé‚£ä¹ˆç©ºæ´ã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>ä¸‰ã€ç»™è§’è‰²åŠ æ­¦å™¨ï¼šä»åŸºç¡€æ”»å‡»åˆ°å·®å¼‚åŒ–ç©æ³•</strong></h3>
<p>æ•Œäººæœ‰äº†ï¼Œæˆ‘å¼€å§‹å¼„æ­¦å™¨ã€‚</p>
<p>æˆ‘å…ˆè®©å®ƒç»™æˆ‘åšåŸºç¡€æ­¦å™¨ï¼š</p>
<ul>
<li>è¿‘æˆ˜èŒƒå›´æ”»å‡»</li>
<li>è¿œç¨‹å°„å¼¹</li>
<li>èŒƒå›´çˆ†ç‚¸</li>
<li>æ—‹è½¬å‹æ­¦å™¨</li>
<li>è‡ªåŠ¨å¯»æ•Œ</li>
</ul>
<p>æ¯ç§æ­¦å™¨éƒ½èƒ½å‡çº§ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ”»å‡»èŒƒå›´å˜å¤§</li>
<li>å¼¹å°„æ¬¡æ•°å¢åŠ </li>
<li>å†·å´å˜çŸ­</li>
<li>ä¼¤å®³å¼ºåŒ–</li>
</ul>
<p>Trae åœ¨è¿™é‡Œåšäº†ä¸€ä¸ªæˆ‘æ„æ–™ä¹‹å¤–çš„ç‚¹ï¼š<br/>
<strong>æ‰€æœ‰æ­¦å™¨å‡çº§é€»è¾‘éƒ½è¢«æ ‡å‡†åŒ–äº†ã€‚</strong><br/>
å°±ç®—æˆ‘åé¢å†åŠ æ­¦å™¨ï¼Œç»“æ„ä¹Ÿä¸ä¼šä¹±ã€‚</p>
<p>ä¸­é—´æœ‰ä¸€äº›ä¸å¹³è¡¡çš„æ­¦å™¨ï¼ˆæ¯”å¦‚ä¼¤å®³å¤ªä½çš„é‚£ç§ï¼‰ï¼Œæˆ‘åªè¯´ï¼šâ€œè°ƒé«˜ä¸€ç‚¹â€ã€‚å®ƒæŠŠæ•´ä¸ªæ•°å€¼é“¾éƒ½æ”¹äº†ä¸€éï¼Œæ€»ä½“ä¸Šç®—å¯ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>å››ã€åŠ å…¥â€œæ­¦å­¦â€ï¼šæŠ€èƒ½ã€è¢«åŠ¨ã€ç‰¹æ®Šæœºåˆ¶</strong></h3>
<p>ä¸ºäº†è®©ç©æ³•ä¸é‚£ä¹ˆå•è°ƒï¼Œæˆ‘åˆåŠ äº†æ­¦å­¦ç³»ç»Ÿã€‚</p>
<p>æç¤ºå¾ˆç®€å•ï¼š</p>
<blockquote>
<p>â€œåŠ æ­¦å­¦ç³»ç»Ÿï¼Œæœ‰ä¸»åŠ¨ã€æœ‰è¢«åŠ¨ï¼Œä¹Ÿæœ‰å¢å¼ºç±»ï¼ŒæŠŠæ•ˆæœå°½é‡æ‹†å¼€ã€‚â€</p>
</blockquote>
<p>å®ƒæŠŠç°æœ‰å‡çº§ç³»ç»Ÿæ‰©å±•æˆä¸€ä¸ª skill treeï¼š</p>
<ul>
<li><strong>ä¸»åŠ¨æŠ€</strong>ï¼šå†·å´è§¦å‘ï¼Œä¾‹å¦‚å†²å‡»æ³¢ã€çŸ­æš‚ä½ç§»</li>
<li><strong>è¢«åŠ¨æŠ€</strong>ï¼šå¦‚ç§»é€Ÿæå‡ã€å‡»æ€å›è¡€</li>
<li><strong>å¢å¼ºæŠ€</strong>ï¼šæå‡æ­¦å™¨æ•ˆæœã€å¼ºåŒ–å…ƒç´ å±æ€§ç­‰</li>
</ul>
<p>æˆ‘æ²¡å†™å…·ä½“æŠ€èƒ½ï¼Œå®ƒè‡ªåŠ¨ç»™äº†ä¸€äº›æ¨¡æ¿ï¼Œæˆ‘è§‰å¾—å¤Ÿç”¨å°±ç•™äº†ã€‚</p>
<hr/>
<h3 data-id="heading-5"><strong>äº”ã€æ­¦å™¨ Ã— æ­¦å­¦ï¼šåšä¸€ç‚¹è”åŠ¨</strong></h3>
<p>è¿™æ˜¯æˆ‘æœ€åœ¨æ„çš„éƒ¨åˆ†ã€‚</p>
<p>æˆ‘å‘Šè¯‰å®ƒï¼š</p>
<blockquote>
<p>â€œæ­¦å™¨ä¸æ­¦å­¦ä¹‹é—´è¦äº’ç›¸è§¦å‘ï¼Œä¾‹å¦‚æ—‹è½¬æ­¦å™¨è§¦å‘ç«ç„°ç¼çƒ§ï¼Œè¿œç¨‹æ­¦å™¨è§¦å‘å†°å†»å‡é€Ÿã€‚â€</p>
</blockquote>
<p>ä¸€å¼€å§‹ç”Ÿæˆçš„ä»£ç å¤ªç²˜è¿ï¼Œæˆ‘è®©å®ƒé‡æ„ï¼š</p>
<blockquote>
<p>â€œæŠŠæ‰€æœ‰è”åŠ¨ä»æ­¦å™¨å†…éƒ¨æŠ½å‡ºæ¥ã€‚â€</p>
</blockquote>
<p>ç»“æœå®ƒçœŸçš„åšäº†ä¸€ä¸ªç‹¬ç«‹çš„ <strong>äº‹ä»¶ç³»ç»Ÿ</strong>ï¼ŒæŠŠå‘½ä¸­ã€æš´å‡»ã€å‡»æ€ã€èŒƒå›´ä¼¤å®³è¿™äº›äº‹ä»¶å…¨éƒ¨é›†ä¸­åˆ°ä¸€ä¸ª dispatcher é‡Œã€‚</p>
<p>è¿™æ ·åŠ æ–°æŠ€èƒ½å°±ä¸ä¼šç ´ååŸæœ‰ç»“æ„ï¼Œä¹Ÿä¸å®¹æ˜“ç¼ åœ¨ä¸€èµ·ã€‚è¿™ä¸ªéƒ¨åˆ†æˆ‘è§‰å¾—æ˜¯æ•´ä¸ªé¡¹ç›®é‡Œæœ€çœå¿ƒçš„éƒ¨åˆ†ã€‚</p>
<hr/>
<h3 data-id="heading-6"><strong>å…­ã€Boss ç³»ç»Ÿï¼šæœ‰å†²åˆºä¹Ÿæœ‰èŒƒå›´ä¼¤å®³</strong></h3>
<p>Boss å‡ºç°çš„é€»è¾‘æˆ‘ä¹Ÿä¸¢ç»™å®ƒï¼š</p>
<ul>
<li>æŒ‰æ—¶é—´ç”Ÿæˆ</li>
<li>å•ç‹¬ç”Ÿå‘½æ¡</li>
<li>å†²åˆºæ”»å‡»ï¼ˆæœ‰é¢„è­¦ï¼‰</li>
<li>èŒƒå›´çˆ†ç‚¸ï¼ˆè¯»æ¡ç•™èº²é¿ç©ºé—´ï¼‰</li>
<li>æ­»äº¡æ‰å¤§é‡ç»éªŒ</li>
</ul>
<p>å®ƒæŠŠ Boss è¡Œä¸ºå†™æˆä¸€ä¸ªç‹¬ç«‹ AI æ¨¡å—ï¼Œè€Œä¸æ˜¯å †åœ¨æ•Œäººé€»è¾‘é‡Œï¼Œè¿™ç‚¹åšå¾—æŒºå¹²å‡€ã€‚</p>
<p>è§†è§‰ä¸Šæˆ‘åç»­è¿˜ç»™ Boss å¤šåŠ äº†å‡ ç§æç¤ºæ•ˆæœï¼ˆä¾‹å¦‚é—ªçƒã€æº¶è§£è¾¹ç¼˜ï¼‰ï¼ŒUI å’Œæ¸²æŸ“é£æ ¼ä¹Ÿåˆ†å‡ æ¬¡è®© Trae è°ƒæ•´ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>ä¸ƒã€UI è¿™éƒ¨åˆ†æ”¹äº†å¾ˆå¤šæ¬¡</strong></h3>
<p>UI æ˜¯æˆ‘æ”¹å¾—æœ€å¤šæ¬¡çš„ï¼š</p>
<ul>
<li>ç»éªŒæ¡ä½ç½®ä¸å¯¹ â†’ ä¸‹ç§»</li>
<li>è¡€æ¡å¤ªæ­»æ¿ â†’ åŠ åŠ¨ç”»</li>
<li>å‡çº§ç•Œé¢å¤ªç²—ç³™ â†’ æ¢æˆå¡ç‰‡é€‰æ‹©</li>
<li>æŠ€èƒ½å›¾æ ‡ â†’ ç»Ÿä¸€é£æ ¼</li>
<li>æ³¢æ•°é¢æ¿ã€Boss å€’è®¡æ—¶ â†’ åŠ åˆ°å³ä¸Šè§’</li>
<li>æŠ€èƒ½è§¦å‘æç¤º â†’ åŠ åˆ°å·¦ä¸‹è§’</li>
</ul>
<p>Trae æ¯æ¬¡åšçš„ç‰ˆæœ¬éƒ½å¤§æ¦‚ 70%-80% å¯ç”¨ï¼Œæˆ‘å†ç»†è°ƒå‰©ä¸‹çš„éƒ¨åˆ†ã€‚</p>
<p>åŸå‹ä¸éœ€è¦å¤ªæ¼‚äº®ï¼Œä½†è‡³å°‘è¦çœ‹ç€ä¸éš¾å—ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>å…«ã€é¡¹ç›®æ•´ä½“è·‘èµ·æ¥äº†</strong></h3>
<p><span href="https://code.juejin.cn/pen/7578723408433512463" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7578723408433512463" data-src="https://code.juejin.cn/pen/7578723408433512463" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œæ¸¸æˆå·²ç»å¯ä»¥æ­£å¸¸ç©äº†ï¼š</p>
<ul>
<li>åœ°å›¾ä¸€ç›´æ¨è¿›</li>
<li>æ•Œäººè¶Šæ¥è¶Šå¼º</li>
<li>Boss æŒ‰èŠ‚å¥å‡ºç°</li>
<li>æ­¦å™¨ã€æŠ€èƒ½ã€æ­¦å­¦äº’ç›¸è”åŠ¨</li>
<li>æ•°å€¼æ›²çº¿å¹³æ»‘</li>
<li>å‡çº§æ„Ÿæ˜æ˜¾</li>
<li>UI ä¸ä¼šæŒ¡è§†çº¿</li>
</ul>
<p>ä½œä¸ºä¸€ä¸ªå…´è¶£é¡¹ç›®ï¼Œæˆ‘å¯¹è¿™ä¸ªç»“æœæ˜¯æ»¡æ„çš„ã€‚</p>
<p>å®ƒè¿˜ç®—ä¸ä¸Šæ˜¯ä¸€æ¬¾çœŸæ­£å®Œæ•´çš„æ¸¸æˆï¼Œä½†è‡³å°‘æ˜¯ä¸€ä¸ª <strong>æ¸…æ™°å¯æ‰©å±•çš„ç©æ³•åŸå‹</strong>ï¼Œä»£ç ç»“æ„ä¹Ÿæ²¡æœ‰å› ä¸ºéšæ„åŠ å†…å®¹è€Œå˜å¾—æ··ä¹±ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>ä¹ã€è¿™æ¬¡ä½“éªŒç»™æˆ‘çš„çœŸå®æ„Ÿå—</strong></h3>
<p>æ•´ä¸ªè¿‡ç¨‹æœ€æ˜æ˜¾çš„å˜åŒ–æ˜¯ï¼š<br/>
<strong>æˆ‘ä¸å†ä»â€œå†™ä»£ç â€å¼€å§‹åšä¸œè¥¿ï¼Œè€Œæ˜¯ä»â€œæè¿°æƒ³è¦çš„æœºåˆ¶â€å¼€å§‹ã€‚</strong></p>
<p>æˆ‘åŸºæœ¬åšçš„å°±æ˜¯ï¼š</p>
<ol>
<li>æƒ³åˆ°ä¸€ä¸ªåŠŸèƒ½</li>
<li>ç”¨ä¸€å¥è¯å‘Šè¯‰ Trae</li>
<li>çœ‹å®ƒè¡¥éª¨æ¶ã€è¡¥å‚æ•°ã€è¡¥é…ç½®</li>
<li>æˆ‘å†ä¿®æ”¹ç»†èŠ‚ã€è°ƒé€»è¾‘</li>
<li>ç„¶åç»§ç»­åŠ ä¸‹ä¸€ä¸ª</li>
</ol>
<p>Trae çš„ä½œç”¨ä¸æ˜¯â€œä¸€ä¸ªäººæ›¿æˆ‘å†™æ¸¸æˆâ€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>è‡ªåŠ¨è§„åˆ’å·¥ç¨‹ç»“æ„</li>
<li>è‡ªåŠ¨æŠŠé‡å¤æ€§çš„éƒ¨åˆ†å…ˆæ­å‡ºæ¥</li>
<li>è‡ªåŠ¨è¡¥å……æ¾æ•£æœºåˆ¶ä¹‹é—´çš„æ¥å£</li>
<li>è‡ªåŠ¨ç»´æŠ¤æ–‡ä»¶ä¾èµ–å…³ç³»</li>
<li>è‡ªåŠ¨æŠŠæˆ‘å¿˜è®°çš„åœ°æ–¹ä¸²èµ·æ¥</li>
</ul>
<p>å¯¹ä¸€ä¸ªå°å‹é¡¹ç›®æ¥è¯´ï¼Œè¿™æ¯”æˆ‘ä¸€ä¸ªäººä»é›¶å†™è¦è½»æ¾ä¸å°‘ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>åã€ä¸‹ä¸€æ­¥æˆ‘è¦åšçš„</strong></h3>
<p>ç°åœ¨è¿™ä¸ª Rogue åŸå‹å·²ç»èƒ½ç©ï¼Œæˆ‘åé¢å¤§æ¦‚ä¼šç»§ç»­åŠ ï¼š</p>
<ul>
<li>åœ°å›¾å˜ä½“ï¼ˆæ£®æ—ã€åºŸå¢Ÿã€é›ªåœ°ï¼‰</li>
<li>æ›´ä¸°å¯Œçš„æ­¦å­¦ç»„åˆ</li>
<li>Boss ç¬¬äºŒé˜¶æ®µ</li>
<li>æ›´å®Œæ•´çš„éŸ³æ•ˆ</li>
<li>æ›´æ¥è¿‘æˆå“çš„ UI</li>
<li>ä¸€äº›ç®€å•çš„ç‰¹æ•ˆ</li>
<li>å®ç°æ•Œäººçš„å¤šæ ·æ€§</li>
</ul>
<p>å†ä¹‹åï¼Œä¼šä¸ä¼šç»§ç»­æ‰©å±•ç”šè‡³åšæˆä¸€æ¬¾å®Œæ•´æ¸¸æˆï¼Œæˆ‘ç°åœ¨è¿˜æ²¡å†³å®šã€‚</p>
<p>ä½†è‡³å°‘ï¼Œè¿™æ¬¡å®éªŒè®©æˆ‘æ„è¯†åˆ°ï¼š<br/>
<strong>æŠŠâ€œæ¸¸æˆæœºåˆ¶â€ç›´æ¥æè¿°å‡ºæ¥ï¼Œç„¶åè®©ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆæˆ‘éœ€è¦çš„å·¥ç¨‹åŸºç¡€ï¼Œæ˜¯ä¸€ä»¶æŒºæœ‰æ„æ€çš„äº‹ã€‚</strong></p>
<p>æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FzuoanCo%2Frogue-wuxia" target="_blank" title="https://github.com/zuoanCo/rogue-wuxia" ref="nofollow noopener noreferrer">github.com/zuoanCo/rogâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SCALE | 2025 å¹´ 11 æœˆã€Šå¤§æ¨¡å‹ SQL èƒ½åŠ›æ’è¡Œæ¦œã€‹å‘å¸ƒ]]></title>    <link>https://juejin.cn/post/7579544918076571683</link>    <guid>https://juejin.cn/post/7579544918076571683</guid>    <pubDate>2025-12-04T03:11:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579544918076571683" data-draft-id="7579544918076522531" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SCALE | 2025 å¹´ 11 æœˆã€Šå¤§æ¨¡å‹ SQL èƒ½åŠ›æ’è¡Œæ¦œã€‹å‘å¸ƒ"/> <meta itemprop="keywords" content="æ•°æ®åº“,LLM,SQL"/> <meta itemprop="datePublished" content="2025-12-04T03:11:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±å¯ç”Ÿå¼€æºç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/1480387593251847"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SCALE | 2025 å¹´ 11 æœˆã€Šå¤§æ¨¡å‹ SQL èƒ½åŠ›æ’è¡Œæ¦œã€‹å‘å¸ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1480387593251847/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±å¯ç”Ÿå¼€æºç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:11:43.000Z" title="Thu Dec 04 2025 03:11:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ‘˜è¦ä¸æ ¸å¿ƒçœ‹ç‚¹</h2>
<p>æœ¬æœŸ <strong>SCALE</strong>[1] è¯„æµ‹èšç„¦äºæ–°ä¸€ä»£ä¸“ä¸šçº§å¤§è¯­è¨€æ¨¡å‹åœ¨æ•°æ®åº“ SQL é¢†åŸŸçš„è¡¨ç°è¾¹ç•Œã€‚</p>
<p>å‘ç‰ˆæ ¸å¿ƒå†…å®¹ä¸º <strong>Gemini 3 Pro</strong>[2] å’Œ <strong>DeepSeek-V3.2-Exp</strong>[3] ä¸¤å¤§é¡¶å°–æ¨¡å‹çš„é¦–æ¬¡ã€Šæ·±åº¦æµ‹è¯„æŠ¥å‘Šã€‹ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›æœ€å‰æ²¿ã€æœ€å¯é çš„æŠ€æœ¯é€‰å‹ä¾æ®ã€‚</p>
<p>æ ¸å¿ƒçœ‹ç‚¹é€Ÿè§ˆï¼š</p>
<ol>
<li>
<p><strong>å¯é æ€§æ–°æ ‡æ†</strong>ï¼š<strong>Gemini 3 Pro</strong> æ¨¡å‹é¦–æ¬¡å‚è¯„ï¼Œåœ¨ã€Œ<strong>SQL ç†è§£</strong>ã€èƒ½åŠ›ç»´åº¦ä»¥ <strong>86.0</strong> çš„é«˜åˆ†é¢†è·‘æ¦œå•ï¼Œç¡®ç«‹äº†å…¶åœ¨å¤æ‚é€»è¾‘è§£æä¸Šçš„ä¸šå†…é¢†å…ˆåœ°ä½ã€‚</p>
</li>
<li>
<p><strong>å›½äº§åŒ–æ½œåŠ›è‚¡</strong>ï¼š<strong>DeepSeek-V3.2-Exp</strong> æ¨¡å‹é¦–æ¬¡å…¥æ¦œï¼Œå…¶åœ¨ ã€Œ<strong>å›½äº§æ•°æ®åº“è½¬æ¢</strong>ã€æ–¹é¢è¡¨ç°å‡ºå¼ºåŠ²æ½œåŠ›ï¼ˆ<strong>92.1</strong>ï¼‰ï¼Œä¸ºå›½äº§åŒ–æ›¿ä»£åœºæ™¯æä¾›äº†æ–°çš„é«˜æ€§èƒ½é€‰æ‹©ã€‚</p>
</li>
</ol>
<h2 data-id="heading-1">äºŒã€è¯„æµ‹ç›®çš„ä¸æ–¹æ³•è®º</h2>
<p>æœ¬æ¬¡æµ‹è¯„æ—¨åœ¨ç³»ç»Ÿæ€§è¯„ä¼°ä¸¤å¤§æ¨¡å‹åœ¨ä¼ä¸šçº§å¤æ‚æ•°æ®åº“åœºæ™¯ä¸‹çš„å®ç”¨æ€§ã€‚æˆ‘ä»¬ä¸¥æ ¼éµå¾ª SCALE æ¡†æ¶è‡ªåˆ›ç«‹ä»¥æ¥çš„ä¸‰å¤§æ ¸å¿ƒç»´åº¦å’Œç»Ÿä¸€è¯„æµ‹æ•°æ®é›†ï¼Œç¡®ä¿ç»“æœçš„å…¬æ­£æ€§ä¸å¯å¤ç°æ€§ã€‚</p>
<p>è¯„æµ‹ç»´åº¦</p>
<p>è¯„ä¼°ç›®æ ‡</p>
<p>æ ¸å¿ƒåº”ç”¨åœºæ™¯</p>
<p><strong>SQL ç†è§£</strong></p>
<p>å¯¹ç°æœ‰ SQL ä»£ç çš„é€»è¾‘ã€æ„å›¾å’Œæ‰§è¡Œè®¡åˆ’çš„æ·±åº¦åˆ†æèƒ½åŠ›ã€‚</p>
<p>æ•°æ®åˆ†æã€ç”Ÿäº§ç¯å¢ƒæ•…éšœæ’æŸ¥ã€ä»£ç å®¡æŸ¥ã€‚</p>
<p><strong>SQL ä¼˜åŒ–</strong></p>
<p>åœ¨ä¿è¯é€»è¾‘ç­‰ä»·ä¸‹ï¼Œå°†ä½æ•ˆ SQL æ”¹å†™ä¸ºæ€§èƒ½æ›´ä¼˜æŸ¥è¯¢çš„ç­–ç•¥åº”ç”¨å’Œæ•ˆæœã€‚</p>
<p>æ•°æ®åº“æ€§èƒ½è°ƒä¼˜ã€å­˜é‡ä»£ç é‡æ„ã€‚</p>
<p><strong>æ–¹è¨€è½¬æ¢</strong></p>
<p>åœ¨ä¸åŒæ•°æ®åº“æ–¹è¨€ä¹‹é—´è¿›è¡Œè¯­æ³•è¿ç§»å’Œå¤æ‚è¿‡ç¨‹åŒ–é€»è¾‘é‡æ„çš„å‡†ç¡®æ€§å’Œå¯é æ€§ã€‚</p>
<p>æ•°æ®åº“è¿ç§»ã€è·¨å¹³å°æ•°æ®ä¸­å°æ„å»ºã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€Gemini 3 Pro æ·±åº¦è¯„æµ‹æŠ¥å‘Š</h2>
<p><strong>Gemini 3 Pro</strong> æ˜¯è°·æ­Œäº 2025 å¹´ 11 æœˆ 18 æ—¥æ¨å‡ºçš„æ–°ä¸€ä»£å¤§å‹è¯­è¨€æ¨¡å‹ã€‚å®ƒå…·å¤‡å“è¶Šçš„æ¨ç†ã€å¤šæ¨¡æ€ç†è§£ä¸ä»£ç ç”Ÿæˆèƒ½åŠ›ï¼Œåœ¨å¤šé¡¹åŸºå‡†æµ‹è¯•ä¸­é¢†å…ˆã€‚è¯¥æ¨¡å‹åœ¨å‘å¸ƒå½“æ—¥å³æ•´åˆè‡³è°·æ­Œæœç´¢ã€Gemini åº”ç”¨ç­‰æ ¸å¿ƒäº§å“ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·å’Œå¼€å‘è€…æä¾›æ›´æ™ºèƒ½ã€ç›´æ¥çš„æœåŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d3d68eec4c544be918d847bf0b8392b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422703&amp;x-signature=60R5lxbZ8ZF1RbFTlRNVEBASWHU%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a68ad89e81f544b78f4aecc7dbb4ce6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422703&amp;x-signature=E4amj22bYxAMHfufjhGEtmWVoPE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">3.1 æ ¸å¿ƒç»“è®ºé€Ÿè§ˆ</h3>
<p><strong>Gemini 3 Pro</strong> çš„èƒ½åŠ›åˆ†å¸ƒå‘ˆç°å‡º</p>
<p>æ·±åº¦ç†è§£ã€é«˜è´¨ä¼˜åŒ–ã€å‡è¡¡è½¬æ¢</p>
<p>çš„æ˜¾è‘—ç‰¹å¾ã€‚å…¶ã€Œ<strong>SQL ç†è§£</strong>ã€èƒ½åŠ›å–å¾—æ¦œå•é¦–ä½ï¼ˆ<strong>86.0 åˆ†</strong>ï¼‰ï¼Œä¼˜åŒ–å SQL è¯­æ³•æ­£ç¡®æ€§è¾¾ <strong>100 åˆ†</strong>ï¼Œæ˜¯é¢å‘ä¼ä¸šçº§ã€é«˜å¯é æ€§è¦æ±‚çš„æ•°æ®åº“ä»»åŠ¡çš„ç†æƒ³ AI åŠ©æ‰‹ã€‚</p>
<h3 data-id="heading-4">3.2 ç»´åº¦è¯¦ç»†è¡¨ç°ä¸æ•°æ®æ´å¯Ÿ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12d71c3a3ad442a68f7b7b2c7827fe05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422703&amp;x-signature=xe8vN6FmIXuvS2Ps0htAJsLJLUQ%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-5">SQL ç†è§£</h4>
<ul>
<li>
<p><strong>ç»´åº¦æ€»åˆ†ï¼š86</strong></p>
<ul>
<li>
<p>æ‰§è¡Œå‡†ç¡®æ€§ï¼š90.0</p>
</li>
<li>
<p>æ‰§è¡Œè®¡åˆ’æ£€æµ‹ï¼š64.3</p>
</li>
<li>
<p>è¯­æ³•åŠæœ€ä½³å®è·µï¼š87.1</p>
</li>
</ul>
</li>
<li>
<p><strong>å…³é”®ä¼˜åŠ¿</strong>ï¼š<strong>æ‰§è¡Œå‡†ç¡®æ€§é¢†å…ˆï¼ˆ90.0ï¼‰</strong>ï¼Œé€»è¾‘ä¿çœŸåº¦é«˜ï¼Œæ˜¯å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘çš„é¦–é€‰ã€‚</p>
</li>
<li>
<p><strong>å¾…æ”¹è¿›ç‚¹</strong>ï¼š<strong>æ‰§è¡Œè®¡åˆ’æ£€æµ‹å¾—åˆ†ç›¸å¯¹è¾ƒä½ï¼ˆ64.3ï¼‰</strong>ï¼Œå¯¹å†™æ“ä½œæ‰§è¡Œè®¡åˆ’çš„ç†è§£åå·®ï¼Œç»“æ„åŒ–è¾“å‡ºè§„èŒƒæ€§ä¸è¶³ã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">SQL ä¼˜åŒ–</h4>
<ul>
<li>
<p><strong>ç»´åº¦æ€»åˆ†ï¼š72.7</strong></p>
<ul>
<li>
<p>é€»è¾‘ç­‰ä»·ï¼š73.7</p>
</li>
<li>
<p>ä¼˜åŒ–æ·±åº¦ï¼š66.7</p>
</li>
<li>
<p>è¯­æ³•é”™è¯¯æ£€æµ‹ï¼š100.0</p>
</li>
</ul>
</li>
<li>
<p><strong>å…³é”®ä¼˜åŠ¿</strong>ï¼š<strong>ä¼˜åŒ–ç»“æœç”Ÿäº§çº§å®‰å…¨</strong>ï¼šè¯­æ³•é”™è¯¯æ£€æµ‹æ»¡åˆ†ï¼ˆ100.0ï¼‰ï¼Œç¡®ä¿ä¼˜åŒ–ä»£ç å¯ç›´æ¥éƒ¨ç½²ï¼›é€»è¾‘ç­‰ä»·æ€§é«˜ï¼ˆ73.7ï¼‰ã€‚</p>
</li>
<li>
<p><strong>å¾…æ”¹è¿›ç‚¹</strong>ï¼š<strong>ä¼˜åŒ–æ·±åº¦å¾—åˆ†æœ‰æå‡ç©ºé—´ï¼ˆ66.7ï¼‰</strong>ï¼Œåœ¨åº”ç”¨å¤æ‚ä¼˜åŒ–ç­–ç•¥ï¼ˆå¦‚æ¶ˆé™¤å†—ä½™ï¼‰å’Œæ¨¡å¼è¯†åˆ«ä¸Šçš„æ·±åº¦ä¸è¶³ã€‚</p>
</li>
</ul>
<h4 data-id="heading-7">æ–¹è¨€è½¬æ¢</h4>
<ul>
<li>
<p><strong>ç»´åº¦æ€»åˆ†ï¼š77.1</strong></p>
<ul>
<li>
<p>å¤§ SQL è½¬æ¢ï¼š61.3</p>
</li>
<li>
<p>å›½äº§æ•°æ®åº“ï¼š89.5</p>
</li>
<li>
<p>é€»è¾‘ç­‰ä»·ï¼š80.6</p>
</li>
<li>
<p>è¯­æ³•é”™è¯¯æ£€æµ‹ï¼š78.6</p>
</li>
</ul>
</li>
<li>
<p><strong>å…³é”®ä¼˜åŠ¿</strong>ï¼š<strong>å›½äº§æ•°æ®åº“è½¬æ¢å¾—åˆ†é«˜ï¼ˆ89.5ï¼‰</strong>ï¼Œé€»è¾‘ç­‰ä»·æ€§é«˜ï¼ˆ80.6ï¼‰ï¼Œå…¨å±€é€»è¾‘æŠŠæ¡å¼ºåŠ²ã€‚</p>
</li>
<li>
<p><strong>å¾…æ”¹è¿›ç‚¹</strong>ï¼š<strong>å¤§ SQL è½¬æ¢å¾—åˆ†è¾ƒä½ï¼ˆ61.3ï¼‰</strong>ï¼›å¯¹ç‰¹å®šå›½äº§æ•°æ®åº“ï¼ˆå¦‚ OceanBaseï¼‰çš„çŸ¥è¯†æ¬ ç¼ºï¼Œå­˜åœ¨çŸ¥è¯†æ€§é”™è¯¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">3.3 å…³é”®æŒ‘æˆ˜ä¸æ•°æ®åˆ†æ</h3>
<p>è¯„æµ‹ä¸­å‘ç°ï¼Œ<strong>Gemini 3 Pro</strong> çš„ä¸»è¦æŒ‘æˆ˜é›†ä¸­åœ¨å¯¹æ•°æ®åº“åº•å±‚æœºåˆ¶çš„ç²¾ç»†ç†è§£å’Œç»“æ„åŒ–è¾“å‡ºçš„ä¸¥æ ¼è§„èŒƒæ€§ä¸Šã€‚</p>
<h4 data-id="heading-9">1. SQL ç†è§£ç»´åº¦ï¼šæ‰§è¡Œè®¡åˆ’è§£æç¼ºé™·</h4>
<ul>
<li>
<p><strong>è¯­ä¹‰æ··æ·†</strong>ï¼šæ¨¡å‹åœ¨ç»“æ„åŒ–è¾“å‡ºä¸­æœªèƒ½ä¸¥æ ¼éµå¾ªè§„èŒƒï¼Œå°† JSON çš„ <code>null</code> å€¼é”™è¯¯è¾“å‡ºä¸ºå­—ç¬¦ä¸² <code>"NULL"</code>ï¼Œå¯¼è‡´ SQL è¯­ä¹‰ä¸­çš„ <code>"NULL"</code> ä¸ JSON æ•°æ®ç±»å‹è§„èŒƒå‘ç”Ÿæ··æ·†ã€‚</p>
</li>
<li>
<p><strong>å†™æ“ä½œè¯¯åˆ¤</strong>ï¼šåœ¨æ‰§è¡Œè®¡åˆ’æ£€æµ‹ä¸­ï¼Œæ¨¡å‹å¯¹æ•°æ®åº“å†™æ“ä½œï¼ˆUPDATE/DELETEï¼‰çš„è¯­ä¹‰ç†è§£ä¸è¶³ï¼Œæœªèƒ½è¯†åˆ« MySQL ä¼˜åŒ–å™¨ä¼šä½¿ç”¨ä¸»é”®ç´¢å¼•è¿›è¡Œè¡Œå®šä½çš„ä¼˜åŒ–è¡Œä¸ºï¼Œé”™è¯¯åœ°å°†åº”ä½¿ç”¨ç´¢å¼•æ‰«æçš„ UPDATE æ“ä½œè¯¯åˆ¤ä¸ºå…¨è¡¨æ‰«æï¼ˆ<code>type: "ALL"</code>ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-10">2. SQL ä¼˜åŒ–ç»´åº¦ï¼šæ¨¡å¼è¯†åˆ«ä¸ç­–ç•¥åº”ç”¨ä¸è¶³</h4>
<ul>
<li>
<p><strong>æ¨¡å¼è¯†åˆ«ç¼ºé™·</strong>ï¼šæœªèƒ½è¯†åˆ« <code>LIKE</code> å‰ç¼€æŸ¥è¯¢æ¨¡å¼å¯æ”¹å†™ä¸ºèŒƒå›´æŸ¥è¯¢ä»¥åˆ©ç”¨ç´¢å¼•æœ‰åºæ€§ï¼Œé™åˆ¶äº†åœ¨ç‰¹å®šæŸ¥è¯¢åœºæ™¯ä¸‹çš„æ€§èƒ½æå‡ã€‚</p>
</li>
<li>
<p><strong>å†—ä½™æ¶ˆé™¤ä¸è¶³</strong>ï¼šæœªèƒ½è¯†åˆ«å¹¶æ¶ˆé™¤æ—  <code>LIMIT</code> å­æŸ¥è¯¢ä¸­çš„å†—ä½™ <code>ORDER BY</code> æ“ä½œï¼Œåæ˜ å‡ºæ¨¡å‹åœ¨ç»†ç²’åº¦è¯­ä¹‰åˆ†æå’Œè§„åˆ™æ¶ˆé™¤æ–¹é¢çš„ä¸è¶³ã€‚</p>
</li>
<li>
<p><strong>ç±»å‹è½¬æ¢ç›²åŒº</strong>ï¼šæœªèƒ½è¯†åˆ« <code>DATE</code> å­—æ®µä¸å­—ç¬¦ä¸²æ¯”è¾ƒæ—¶å¯èƒ½å‘ç”Ÿçš„éšå¼ç±»å‹è½¬æ¢é—®é¢˜ï¼Œè¿™å¯èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p>
</li>
</ul>
<h4 data-id="heading-11">3. æ–¹è¨€è½¬æ¢ç»´åº¦ï¼šå›½äº§æ•°æ®åº“çŸ¥è¯†çŸ­æ¿</h4>
<ul>
<li><strong>çŸ¥è¯†æ€§é”™è¯¯</strong>ï¼šåœ¨å¤„ç† Oracle çš„ <code>CAST</code> è¯­æ³•æ—¶ï¼Œæ¨¡å‹é”™è¯¯åœ°å°†å…¶æ›¿æ¢ä¸º OceanBaseï¼ˆOracle æ¨¡å¼ï¼‰ä¸æ”¯æŒçš„ <code>COLLECT</code> èšåˆå‡½æ•°ï¼Œåæ˜ å‡ºæ¨¡å‹å¯¹äºå›½äº§æ•°æ®åº“çš„çŸ¥è¯†å‚¨å¤‡ä¸è¶³ï¼Œæ›´å€¾å‘äºæœºæ¢°è½¬æ¢è€ŒéåŸºäºç›®æ ‡ç¯å¢ƒç‰¹æ€§è¿›è¡Œè¯­ä¹‰ç­‰ä»·æ€§åˆ¤æ–­ã€‚</li>
</ul>
<h3 data-id="heading-12">3.4 åº”ç”¨å»ºè®®ä¸ä»·å€¼ä½“ç°</h3>
<p>ç›®æ ‡ç”¨æˆ·</p>
<p>å»ºè®®åº”ç”¨åœºæ™¯</p>
<p>ä»·å€¼ä½“ç°</p>
<p><strong>æ•°æ®åˆ†æä¸å·¥ç¨‹</strong></p>
<p>å¤æ‚æŸ¥è¯¢çš„é€»è¾‘éªŒè¯å’Œç»“æœå‡†ç¡®æ€§é¢„æµ‹ã€‚</p>
<p>ç¡®ä¿æ•°æ®æ´å¯Ÿçš„å¯é æ€§ã€‚</p>
<p><strong>æ•°æ®åº“ç®¡ç†ä¸å¼€å‘</strong></p>
<p>å­˜é‡ SQL çš„è§„èŒƒåŒ–å’Œåˆæ­¥æ€§èƒ½è°ƒä¼˜ã€‚</p>
<p>å®‰å…¨å¿«é€Ÿåœ°æå‡ä»£ç è´¨é‡å’Œæ€§èƒ½ã€‚</p>
<h2 data-id="heading-13">å››ã€DeepSeek-V3.2-Exp è¯„æµ‹æŠ¥å‘Š</h2>
<p><strong>DeepSeek-V3.2-Exp</strong> æ˜¯æ·±åº¦æ±‚ç´¢äº 2025 å¹´ 9 æœˆ 29 æ—¥å‘å¸ƒçš„å®éªŒæ€§æ¨¡å‹ï¼Œæ ¸å¿ƒåˆ›æ–°æ˜¯å¼•å…¥äº†è‡ªç ”çš„ DeepSeek ç¨€ç–æ³¨æ„åŠ›æœºåˆ¶ï¼Œæ˜¾è‘—æå‡äº†é•¿æ–‡æœ¬å¤„ç†çš„è®­ç»ƒå’Œæ¨ç†æ•ˆç‡ã€‚è¯¥æ¨¡å‹åœ¨å¤šé¡¹åŸºå‡†æµ‹è¯•ä¸­ä¸å‰ä»£ V3.1-Terminus æ€§èƒ½åŸºæœ¬æŒå¹³ï¼ŒåŒæ—¶ API æœåŠ¡ä»·æ ¼ä¸‹è°ƒè¶…è¿‡ 50%ï¼Œå¹¶å·²åœ¨ Hugging Face ç­‰å¹³å°å¼€æºã€‚</p>
<p>æ–‡ç« å‘å¸ƒæ—¶ï¼ŒDeepSeek-V3.2 æ­£å¼ç‰ˆå·²ç»å‘å¸ƒï¼Œå¾…è¯„æµ‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/445c8ae466f1466f97cf6fde07fd16de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422703&amp;x-signature=JLVPGQ4621D2dWVQCnyiPK1f%2Br4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">4.1 æ ¸å¿ƒç»“è®ºé€Ÿè§ˆ</h3>
<p><strong>Deepseek-v3.2-exp</strong> åœ¨æœ¬æœŸè¯„æµ‹ä¸­å±•ç°äº†æ˜æ˜¾çš„ <strong>èƒ½åŠ›èšç„¦</strong>ã€‚å…¶åœ¨ <strong>å›½äº§æ•°æ®åº“è½¬æ¢</strong> å­é¡¹ä¸Šå–å¾—äº† <strong>92.1</strong> åˆ†çš„ä¼˜å¼‚æˆç»©ï¼Œä½¿å…¶æˆä¸º <strong>å›½äº§åŒ–æ›¿ä»£è·¯å¾„ä¸­å…·æœ‰çªå‡ºä»·å€¼çš„å·¥å…·</strong>ã€‚ç„¶è€Œï¼Œå…¶åœ¨å¤æ‚é€»è¾‘å¤„ç†å’Œä¼˜åŒ–æ·±åº¦ä¸Šçš„ä¸è¶³è¡¨æ˜ï¼Œå®ƒæ›´é€‚ç”¨äºç‰¹å®šé¢†åŸŸçš„è¾…åŠ©å·¥ä½œã€‚</p>
<h3 data-id="heading-15">4.2 ç»´åº¦è¯¦ç»†è¡¨ç°ä¸æ•°æ®æ´å¯Ÿ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/297e47a475c641eab71ea8ab5e6fd93f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422703&amp;x-signature=RjGi22VRuF1bgFj1r0RMW7tZP8A%3D" alt="" loading="lazy"/></p>
<p>æˆ‘å·²ç†è§£æ‚¨çš„è¦æ±‚ï¼Œå°†ä¸¥æ ¼ä¾ç…§æ‚¨å›¾ç‰‡ä¸­çš„åŸå§‹æ•°æ®ï¼Œä»…è°ƒæ•´å‘ˆç°ç»“æ„ï¼Œç¡®ä¿å†…å®¹å®Œå…¨ä¸€è‡´ã€‚ä»¥ä¸‹æ˜¯æŒ‰ç…§æ‚¨æä¾›çš„æ ¼å¼é‡æ–°æ•´ç†çš„ç»“æœï¼š</p>
<h4 data-id="heading-16">SQL ç†è§£</h4>
<ul>
<li>
<p><strong>ç»´åº¦æ€»åˆ†ï¼š66.7</strong></p>
<ul>
<li>
<p>æ‰§è¡Œå‡†ç¡®æ€§ï¼š68.6</p>
</li>
<li>
<p>æ‰§è¡Œè®¡åˆ’æ£€æµ‹ï¼š35.7</p>
</li>
<li>
<p>è¯­æ³•åŠæœ€ä½³å®è·µï¼š84.3</p>
</li>
</ul>
</li>
<li>
<p><strong>å…³é”®ä¼˜åŠ¿</strong>ï¼š<strong>è¯­æ³•è§„èŒƒæ€§é«˜</strong>ï¼šè¯­æ³•åŠæœ€ä½³å®è·µå¾—åˆ†è¾¾ 84.3 åˆ†ï¼Œä¿éšœäº†ç”Ÿæˆæˆ–åˆ†æç»“æœçš„æ ¼å¼è§„èŒƒã€‚</p>
</li>
<li>
<p><strong>å¾…æ”¹è¿›ç‚¹</strong>ï¼š<strong>æ‰§è¡Œè®¡åˆ’æ£€æµ‹èƒ½åŠ›è–„å¼±</strong>ï¼ˆ35.7ï¼‰ï¼Œå¯¹åº•å±‚æ•°æ®åº“æ‰§è¡Œé€»è¾‘å’Œä¼˜åŒ–å™¨è¡Œä¸ºçš„æ·±åº¦ç†è§£ä¸è¶³ã€‚</p>
</li>
</ul>
<h4 data-id="heading-17">SQL ä¼˜åŒ–</h4>
<ul>
<li>
<p><strong>ç»´åº¦æ€»åˆ†ï¼š61.5</strong></p>
<ul>
<li>
<p>é€»è¾‘ç­‰ä»·ï¼š68.4</p>
</li>
<li>
<p>ä¼˜åŒ–æ·±åº¦ï¼š53.3</p>
</li>
<li>
<p>è¯­æ³•é”™è¯¯æ£€æµ‹ï¼š89.5</p>
</li>
</ul>
</li>
<li>
<p><strong>å…³é”®ä¼˜åŠ¿</strong>ï¼š<strong>è¯­æ³•å®‰å…¨æ€§é«˜</strong>ï¼šæ¥è¿‘ 90% çš„è¯­æ³•é”™è¯¯æ£€æµ‹å¾—åˆ†ï¼Œç¡®ä¿äº†ä¼˜åŒ–ä»£ç çš„å¯é æ€§ã€‚</p>
</li>
<li>
<p><strong>å¾…æ”¹è¿›ç‚¹</strong>ï¼š<strong>ä¼˜åŒ–æ·±åº¦ä¸è¶³</strong>ï¼ˆ53.3ï¼‰ï¼Œæ¨¡å‹åœ¨åº”ç”¨å¤æ‚ä¼˜åŒ–ç­–ç•¥ä»¥å®ç°æ˜¾è‘—æ€§èƒ½æå‡æ–¹é¢è¡¨ç°ä¿å®ˆã€‚</p>
</li>
</ul>
<h4 data-id="heading-18">æ–¹è¨€è½¬æ¢</h4>
<ul>
<li>
<p><strong>ç»´åº¦æ€»åˆ†ï¼š58</strong></p>
<ul>
<li>
<p>å¤§ SQL è½¬æ¢ï¼š29.0</p>
</li>
<li>
<p>å›½äº§æ•°æ®åº“è½¬æ¢ï¼š92.1</p>
</li>
<li>
<p>é€»è¾‘ç­‰ä»·ï¼š64.5</p>
</li>
<li>
<p>è¯­æ³•é”™è¯¯æ£€æµ‹ï¼š45.2</p>
</li>
</ul>
</li>
<li>
<p><strong>å…³é”®ä¼˜åŠ¿</strong>ï¼š<strong>å›½äº§æ•°æ®åº“è½¬æ¢èƒ½åŠ›çªå‡º</strong>ï¼Œå¾—åˆ†é«˜è¾¾ 92.1 åˆ†ï¼Œæ˜¾ç¤ºå‡ºå…¶åœ¨å›½äº§åŒ–è¿ç§»è·¯å¾„ä¸Šçš„é’ˆå¯¹æ€§ä¼˜åŒ–æ•ˆæœæ˜¾è‘—ã€‚</p>
</li>
<li>
<p><strong>å¾…æ”¹è¿›ç‚¹</strong>ï¼š<strong>å¤§ SQL è½¬æ¢èƒ½åŠ›ä¸¥é‡ä¸è¶³</strong>ï¼ˆ29.0ï¼‰ï¼Œä¸” <strong>è¯­æ³•é”™è¯¯æ£€æµ‹å¾—åˆ†è¾ƒä½</strong>ï¼ˆ45.2ï¼‰ï¼Œè½¬æ¢ç»“æœçš„ç”Ÿäº§å¯ç”¨æ€§é£é™©è¾ƒé«˜ã€‚</p>
</li>
</ul>
<h3 data-id="heading-19">4.3 å…³é”®æŒ‘æˆ˜ä¸æ•°æ®åˆ†æ</h3>
<p>è¯„æµ‹ä¸­å‘ç°ï¼Œ<strong>DeepSeek-V3.2-Exp</strong> çš„ä¸»è¦æŒ‘æˆ˜é›†ä¸­åœ¨å¯¹æ•°æ®åº“åº•å±‚æœºåˆ¶çš„ç²¾ç»†ç†è§£ã€SQL ä¼˜åŒ–æ¨¡å¼è¯†åˆ«ä»¥åŠè·¨æ–¹è¨€è¯­ä¹‰ç­‰ä»·è½¬æ¢çš„å‡†ç¡®æ€§ä¸Šã€‚</p>
<h4 data-id="heading-20">1. SQL ç†è§£ç»´åº¦ï¼šæ‰§è¡Œè®¡åˆ’è§£æç¼ºé™·</h4>
<ul>
<li>
<p><strong>å†™æ“ä½œè¯­ä¹‰æ··æ·†</strong>ï¼šæ¨¡å‹åœ¨å¤„ç† <code>INSERT/REPLACE</code> æ“ä½œæ—¶ï¼Œé”™è¯¯åœ°è¿”å›äº†å…·ä½“çš„æ‰§è¡Œè®¡åˆ’ä¿¡æ¯ï¼ˆ<code>type: "INSERT", rows: "1"</code>ï¼‰ï¼Œè€Œ MySQL çš„ EXPLAIN å¯¹äºå†™æ“ä½œåº”è¿”å› <code>type: "ALL"</code> ä¸” rowsã€Extraã€filtered ç­‰å­—æ®µå‡ä¸º <code>null</code>ï¼Œåæ˜ å‡ºæ¨¡å‹å¯¹å†™æ“ä½œæ‰§è¡Œè®¡åˆ’è¾“å‡ºè§„èŒƒçš„ç†è§£åå·®ã€‚</p>
</li>
<li>
<p><strong>å†™æ“ä½œç´¢å¼•ä½¿ç”¨è¯¯åˆ¤</strong>ï¼šåœ¨æ‰§è¡Œè®¡åˆ’æ£€æµ‹ä¸­ï¼Œæ¨¡å‹å¯¹æ•°æ®åº“å†™æ“ä½œï¼ˆUPDATEï¼‰çš„è¯­ä¹‰ç†è§£ä¸è¶³ï¼Œæœªèƒ½è¯†åˆ« MySQL ä¼˜åŒ–å™¨ä¼šä½¿ç”¨ä¸»é”®ç´¢å¼•è¿›è¡Œè¡Œå®šä½çš„ä¼˜åŒ–è¡Œä¸ºï¼Œé”™è¯¯åœ°å°†åº”ä½¿ç”¨ç´¢å¼•æ‰«æçš„ <code>UPDATE</code> æ“ä½œè¿”å›ä¸º <code>type: "UPDATE"</code> è€Œé <code>type: "index"</code>ã€‚</p>
</li>
<li>
<p><strong>è¿‡æ»¤æ¯”ä¾‹è®¡ç®—åå·®</strong>ï¼šåœ¨å¤„ç† <code>DELETE</code> æ“ä½œæ—¶ï¼Œæ¨¡å‹è¿”å› <code>filtered: "33.33"</code> è€Œé¢„æœŸåº”ä¸º 100ï¼Œåæ˜ å‡ºæ¨¡å‹å¯¹ <code>WHERE</code> æ¡ä»¶è¿‡æ»¤æ¯”ä¾‹è®¡ç®—é€»è¾‘çš„ç†è§£ä¸è¶³ã€‚</p>
</li>
</ul>
<h4 data-id="heading-21">2. SQL ä¼˜åŒ–ç»´åº¦ï¼šæ¨¡å¼è¯†åˆ«ä¸ç­–ç•¥åº”ç”¨ä¸è¶³</h4>
<ul>
<li>
<p><strong>æ¨¡å¼è¯†åˆ«ç¼ºé™·</strong>ï¼šæœªèƒ½è¯†åˆ« <code>LIKE</code> å‰ç¼€æŸ¥è¯¢æ¨¡å¼å¯æ”¹å†™ä¸ºèŒƒå›´æŸ¥è¯¢ä»¥åˆ©ç”¨ç´¢å¼•æœ‰åºæ€§ï¼Œé™åˆ¶äº†åœ¨ç‰¹å®šæŸ¥è¯¢åœºæ™¯ä¸‹çš„æ€§èƒ½æå‡ã€‚</p>
</li>
<li>
<p><strong>ç±»å‹è½¬æ¢ç›²åŒº</strong>ï¼šæœªèƒ½è¯†åˆ« DATE å­—æ®µä¸å­—ç¬¦ä¸²æ¯”è¾ƒæ—¶å¯èƒ½å‘ç”Ÿçš„éšå¼ç±»å‹è½¬æ¢é—®é¢˜ï¼Œå³ä½¿å·²æä¾› DDL ä¿¡æ¯ï¼Œæ¨¡å‹ä»æœªèƒ½æ£€æµ‹å‡ºæ½œåœ¨çš„éšå¼è½¬æ¢é£é™©ï¼Œè¿™å¯èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p>
</li>
<li>
<p><strong>è°“è¯ä¸‹æ¨ä¼˜åŒ–é—æ¼</strong>ï¼šåœ¨åŒ…å«å¤šå±‚åµŒå¥—å­æŸ¥è¯¢çš„åœºæ™¯ä¸­ï¼Œæ¨¡å‹æœªèƒ½è¯†åˆ«å¯ä»¥å°†è¿‡æ»¤æ¡ä»¶ä¸‹æ¨åˆ°æ›´å†…å±‚æŸ¥è¯¢ä»¥å‡å°‘ä¸­é—´ç»“æœé›†å¤§å°çš„ä¼˜åŒ–æœºä¼šã€‚</p>
</li>
</ul>
<h4 data-id="heading-22">3. æ–¹è¨€è½¬æ¢ç»´åº¦ï¼šè¯­ä¹‰ç­‰ä»·æ€§ä¸è¯­æ³•å‡†ç¡®æ€§ä¸è¶³</h4>
<ul>
<li>
<p><strong>é€»è¾‘é”™è¯¯</strong>ï¼šåœ¨ Oracle è½¬ PostgreSQL çš„è½¬æ¢ä¸­ï¼Œæ¨¡å‹å°† <code>v_rows_updated := v_rows_updated + SQL%ROWCOUNT</code> é”™è¯¯è½¬æ¢ä¸º <code>v_rows_updated := v_rows_updated + v_rows_updated</code>ï¼Œå¯¼è‡´ç´¯åŠ é€»è¾‘å®Œå…¨å¤±æ•ˆï¼Œåæ˜ å‡ºæ¨¡å‹åœ¨è·¨æ–¹è¨€è¯­ä¹‰æ˜ å°„æ—¶çš„æ³¨æ„åŠ›æœºåˆ¶ç¼ºé™·ã€‚</p>
</li>
<li>
<p><strong>ç±»å‹ç³»ç»Ÿç†è§£åå·®</strong>ï¼šæ¨¡å‹åœ¨è½¬æ¢ Oracle çš„ <code>TYPE t_sales_summary IS RECORD</code> æ—¶ï¼Œç›´æ¥ä¿ç•™äº†ç±»ä¼¼çš„è¯­æ³•ç»“æ„ï¼Œä½† PostgreSQL 9.2 ä¸æ”¯æŒæ˜¾å¼å®šä¹‰ RECORD ç»“æ„ï¼ŒRECORD ç±»å‹åªèƒ½é€šè¿‡ <code>SELECT INTO</code> æˆ– <code>FOR</code> å¾ªç¯éšå¼ç¡®å®šç»“æ„ï¼Œåæ˜ å‡ºæ¨¡å‹å¯¹ç›®æ ‡æ•°æ®åº“ç±»å‹ç³»ç»Ÿçš„ç†è§£ä¸è¶³ï¼Œæ›´å€¾å‘äºæœºæ¢°è½¬æ¢è€ŒéåŸºäºç›®æ ‡ç¯å¢ƒç‰¹æ€§è¿›è¡Œè¯­ä¹‰ç­‰ä»·æ€§åˆ¤æ–­ã€‚</p>
</li>
<li>
<p><strong>ä¸å…¼å®¹è¯­æ³•æ®‹ç•™</strong>ï¼šåœ¨ SQL Server è½¬ GaussDB çš„è½¬æ¢ä¸­ï¼Œæ¨¡å‹ä¿ç•™äº† <code>SET NOCOUNT=ON</code> è¯­å¥ï¼Œä½† GaussDB ä¸æ”¯æŒè¯¥è¯­æ³•ï¼Œåæ˜ å‡ºæ¨¡å‹å¯¹ç›®æ ‡æ•°æ®åº“è¯­æ³•çº¦æŸçš„ç†è§£ä¸å……åˆ†ã€‚</p>
</li>
<li>
<p><strong>å‡½æ•°æ˜ å°„é”™è¯¯</strong>ï¼šåœ¨ SQL Server è½¬ GaussDB çš„è½¬æ¢ä¸­ï¼Œæ¨¡å‹ä½¿ç”¨äº† <code>GET DIAGNOSTICS v_cursor_status = CURSOR_STATUS</code>ï¼Œä½† GaussDB çš„ GET DIAGNOSTICS ä¸æ”¯æŒ CURSOR_STATUS è¯Šæ–­é¡¹ï¼Œåæ˜ å‡ºæ¨¡å‹å¯¹ç›®æ ‡æ•°æ®åº“ç³»ç»Ÿå‡½æ•°å’Œè¯Šæ–­æœºåˆ¶çš„ç†è§£ä¸è¶³ã€‚</p>
</li>
</ul>
<h3 data-id="heading-23">4.4 æ€»ç»“ä¸åº”ç”¨å»ºè®®</h3>
<p>ç›®æ ‡ç”¨æˆ·</p>
<p>å»ºè®®åº”ç”¨åœºæ™¯</p>
<p>ä»·å€¼ä½“ç°</p>
<p><strong>æ•°æ®åº“å·¥ç¨‹å¸ˆ</strong></p>
<p>æ—¥å¸¸ SQL è¯­å¥çš„è¯­æ³•è§„èŒƒæ£€æŸ¥ã€‚</p>
<p>åˆ©ç”¨å…¶é«˜è¯­æ³•æ­£ç¡®æ€§å¾—åˆ†ï¼Œå¿«é€Ÿçº æ­£ä½çº§é”™è¯¯ã€‚</p>
<p><strong>ä¼ä¸šæŠ€æœ¯å†³ç­–è€…</strong></p>
<p>æ•°æ®åº“å›½äº§åŒ–è¿ç§»é¡¹ç›®ã€‚</p>
<p>é‡ç‚¹åˆ©ç”¨å…¶ <strong>92.1</strong> åˆ†çš„å›½äº§æ•°æ®åº“è½¬æ¢èƒ½åŠ›ï¼Œä½œä¸ºåˆæ¬¡è¿ç§»çš„è¾…åŠ©å·¥å…·ï¼Œä»¥é™ä½äººå·¥æˆæœ¬ã€‚</p>
<p><strong>æ•°æ®åˆ†æå¸ˆ</strong></p>
<p>ä»…ç”¨äºåŸºç¡€æŸ¥è¯¢é€»è¾‘çš„éªŒè¯ï¼ˆæ‰§è¡Œå‡†ç¡®æ€§ 68.6 åˆ†ï¼‰ã€‚</p>
<p>ä¸å»ºè®®ç”¨äºæ¶‰åŠæ€§èƒ½è°ƒä¼˜æˆ–å¤æ‚åº•å±‚é€»è¾‘ï¼ˆå¦‚æ‰§è¡Œè®¡åˆ’åˆ†æï¼‰çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-24">äº”ã€ä¸“å®¶ç‚¹è¯„</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f5943903eb742fc8a87640cad5ffda5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422703&amp;x-signature=bnJdjb58RjkqRmm%2Bnct8Xi6rIcY%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>åˆ˜åé˜³</strong>ï¼Œ20 å¹´ç»å†é£éœœé›¨æ‰“çš„ DBAï¼Œ5 å¹´çš„ DBA æ¶æ„å’Œå›¢é˜Ÿç®¡ç†ç»éªŒï¼Œåªè¦æ˜¯æ•°æ®åº“éƒ½å–œæ¬¢å­¦ä¹ ã€‚PostgreSQL ACEï¼ŒMongoDB ç‹‚çƒ­è€…ï¼Œ10 å¹´çš„ MYSQL å·¥ä½œç»éªŒï¼Œç°åœ¨åœ¨ç© POLARDB ä¸æ—¶ä¿±è¿›ã€‚</p>
</blockquote>
<p>å“å‘¦ï¼Œè¿™æ¬¡æ‰¾åˆ°æˆ‘å†™è¯„è®ºï¼Œä½ ä»¬å¯çœŸæ˜¯æœ‰ç‚¹æ„æ€ï¼Œä¸æ€•æˆ‘è¿™å˜´æ¯’ã€å¿ƒç‹ ã€åˆºå¤´çš„å®¶ä¼™ç»™å’±ä»¬è¿™ç”»é£çªå˜ï¼Ÿä¸è¯´ç¬‘äº†ï¼Œçˆ±å¯ç”Ÿçš„è¿™ä¸ª SCALE å¤§æ¨¡å‹ SQL èƒ½åŠ›æ’è¡Œæ¦œæœ‰ç‚¹æ„æ€ï¼Œæˆ‘è¿™ç®—æ˜¯å°åˆ€æ‹‰å±è‚¡ï¼Œå¼€äº†çœ¼äº†ã€‚</p>
<p>æœ‰åˆ›æ–°ï¼Œå¤§ç™½è¯å°±æ˜¯ï¼ŒçœŸæ•¢ä½œå‘€ï¼å¤§æ¨¡å‹ä¼˜åŒ– SQL æˆ‘ä»¬æ—©å°±ç”¨è¿‡äº†ï¼Œæœ‰çš„æ˜¯éå¸¸é è°±ã€‚æ®æˆ‘æ‰€é—»ï¼Œå»å¹´çˆ±å¯ç”Ÿå°±æœ‰ AI SQL ç±»çš„äº§å“äº†ï¼Œè«ä¸æ˜¯è¿™éƒ½æ˜¯ç»éªŒæ€»ç»“ã€‚é‚£å’±ä»¬çš„å¥½å¥½çœ‹çœ‹ï¼Œä½ çœ‹çœ‹çœŸæ˜¯ä¸é”™ç»™æˆ‘èµ¶ä¸Šäº† Gemini å’Œ DeepSeek è¿™ä¿©çŸ¥åçš„å¤§æ¨¡å‹ï¼Œæˆ‘æœ¬æ¥ä»¥ä¸ºå’±ä»¬è¿™åˆ†æä¼šä¸€è¾¹å€’çš„è¯´ Gemini å¥½ï¼Œå¯è¿™è®©æˆ‘æ²¡æœ‰æƒ³åˆ°ï¼Œå’±ä»¬è¿™åˆ†æç”»é£ä¸€è½¬ï¼Œå›½äº§æ•°æ®åº“çš„ SQL ä¼˜åŒ–èƒ½åŠ›ï¼Œé‚£è‡ªç„¶å°±æ˜¯ DeepSeek å¥½ï¼Œå›½äº§ AI å¤§æ¨¡å‹ä¼˜åŒ–å›½äº§æ•°æ®åº“ã€‚</p>
<p>è¿™çº æ­£äº†æˆ‘ä¸€ç›´å¯¹ä¸€äº› AI å¤§æ¨¡å‹äº§å“çš„æ„Ÿå®˜è¯„ä»·ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªæ’è¡Œæ¦œè¿˜çœŸæ˜¯ï¼ŒåŠ©äººä¸ºä¹ã€‚æˆ‘å†ä»”ç»†çœ‹çœ‹ï¼Œè¿™éƒ½ç”¨äº†ä»€ä¹ˆæ–¹å¼è¿›è¡Œè¯„ä»·ï¼Œçè¯„ä»·å¯ä¸è¡Œã€‚ä½ çœ‹ä»–ä»¬è¿™ç”¨äº†ä¸‰ä¸ªç»´åº¦è¿›è¡Œè¯„ä»·ï¼Œåˆ†åˆ«æ˜¯ <strong>SQL ç†è§£ã€SQL ä¼˜åŒ–ã€æ–¹è¨€è½¬æ¢</strong>ï¼Œå°¤å…¶è¿™ä¸ªæ–¹è¨€è½¬åŒ–çš„ç»´åº¦æˆ‘æ˜¯æ²¡æœ‰æƒ³åˆ°çš„ï¼Œæˆ‘è¿™é¸¡è›‹æŒ‘éª¨å¤´çš„èƒ½åŠ›ï¼Œçœ‹æ¥æš‚æ—¶ç”¨ä¸ä¸Šäº†ã€‚</p>
<p>ä¸è¿‡æ”¾å¼ƒæŒ‘éª¨å¤´ä¸æ˜¯æˆ‘çš„é£æ ¼ï¼Œæˆ‘çš„ç»™æ‰¾æ‰¾æ¯›ç—…ï¼Œæˆ‘ä»”ç»†çš„çœ‹äº†æˆ‘æ€»ç»“å‡ ç‚¹ï¼š</p>
<p>1. Gemini åœ¨ SQL çš„ç†è§£èƒ½åŠ›ä¸Šéå¸¸çš„ä¸“ä¸šï¼Œä¸”ä¼˜åŒ–åçš„ SQLï¼Œæ¯”å¦‚æ”¹å†™ SQL å‡ºé”™çš„æ¦‚ç‡ä½ã€‚<strong>å¤§ç™½è¯å°±æ˜¯ï¼Œ æ‹¿æ¥å°±ç”¨ï¼ŒåŒæ—¶åœ¨å¤„ç†å›½äº§çš„æ•°æ®åº“çš„ SQL é—®é¢˜ä¹Ÿå¹¶ä¸æ‹‰å®</strong>ã€‚</p>
<p>2. DeepSeek è¿™ä¸ªä¸€çœ‹å°±æ˜¯ä¸€ä¸ªåç§‘ç”Ÿï¼Œè¿™å¯èƒ½å’Œæ•°æ®çš„æ”¶é›†æœ‰å…³ï¼Œå¤§éƒ¨åˆ†å›½äº§æ•°æ®åº“çš„ä¿¡æ¯ä»–éƒ½å›Šæ‹¬å…¶ä¸­ï¼Œä¼˜åŒ–çš„æ•°æ®åŸºç¡€æ˜¯ OK çš„ï¼Œä½†æ˜¯ä¹Ÿæ˜¯ä¸€ä¸ªåç§‘ç”Ÿï¼Œ<strong>å¤æ‚çš„è¯­å¥çš„ç†è§£å’Œè½¬æ¢èƒ½åŠ›å·®åŠ²ï¼ŒåŒæ—¶æ”¹å†™ SQL ç›´æ¥å¯ä»¥ç”¨çš„éƒ¨åˆ†ä¸å¦‚ Gemini</strong>ã€‚</p>
<p>ä½†æ˜¯éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå¯¹äºå¤æ‚çš„ SQLï¼Œå¤§æ¨¡å‹è¿›è¡Œ SQL ä¼˜åŒ–çš„å‡†ç¡®æ€§ï¼Œå¯ä¿¡æ€§è¿˜æœ‰å¾…æé«˜**ã€‚**</p>
<p>å¦‚æœè®©æˆ‘çœ‹å®Œï¼Œç»™å‡ºä¸€ä¸ªè¯„ä»·çš„è¯ <strong>Gemini 3 Pro æ˜¯ä¸€ä¸ªå…¨èƒ½ã€å¯é ã€å®‰å…¨çš„ä¸“ä¸šåŠ©æ‰‹</strong>ã€‚</p>
<p><strong>å˜´æ¯’è¯„ä»·ï¼šè¿™è¯´æ˜æ¨¡å‹å¯èƒ½æ²¡æœ‰æ¥å—è¿‡ä¸¥æ ¼çš„ â€œå·¥ç¨‹åŒ–â€ è§„èŒƒè®­ç»ƒï¼Œç¼ºä¹åœ¨ä¸¥æ ¼çš„ç¨‹åºé—´æ¥å£ä¸­ä½¿ç”¨çš„ç»éªŒï¼Œä¸“ä¸šåº¦è¿˜å·®äº†é‚£ä¹ˆä¸€æ¯«ç±³ã€‚</strong></p>
<p><strong>DeepSeek-V3.2-Exp æ˜¯ä¸€ä¸ªä¸“æ³¨å›½äº§åŒ–ã€ä½†éœ€è¦ä½ æ—¶åˆ»ç›¯ç€çš„ä¸“ä¸šå·¥å…·</strong>ã€‚</p>
<p><strong>å¿ƒç‹ è¯„ä»·ï¼šåœ¨æ•°æ®åº“è¿ç§»ä¸­ï¼Œæœ€éš¾å•ƒçš„å°±æ˜¯å¤§é‡å¤æ‚çš„å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨å’Œä¸šåŠ¡é€»è¾‘ã€‚å¦‚æœ DeepSeek åœ¨è¿™æ–¹é¢ç›´æ¥èººå¹³ï¼Œé‚£ä¹ˆå®ƒåªèƒ½å……å½“ â€œåˆçº§è½¬æ¢å·¥å…·â€ï¼Œå¤§é‡çš„æ ¸å¿ƒå¤æ‚é€»è¾‘ä»ç„¶éœ€è¦æ˜‚è´µçš„äººå·¥å¤„ç†ã€‚</strong></p>
<p>åŒæ—¶è¿™é‡Œä¹Ÿç»™æˆ‘æäº†ä¸€ä¸ªé†’ï¼Œäº‘ä¸Šçš„æ•°æ®åº“ä¼˜åŒ– AI å¤§æ¨¡å‹å¤§å¤šæ˜¯ç”¨å¤§å‚è‡ªå·±çš„å¤§æ¨¡å‹ï¼Œä»–ä»¬å¯¹äº SQL ä¼˜åŒ–çš„èƒ½åŠ›æ˜¯äº‘ä¸Šæ•°æ®åº“äº§å“çš„ AI èƒ½åŠ›çš„å…³é”®ï¼Œä»–ä»¬èƒ½ä¸èƒ½å¼•å…¥ä¸€äº›ä¼˜ç§€çš„ AI å¤§æ¨¡å‹æ˜¯å¦ä¹Ÿæ˜¯è¦è€ƒè™‘çš„ï¼Œå¯ä¸èƒ½è‡ªå·±ç»™è‡ªå·±åœ¨ AI è¿™æ¡æ¨¡å‹ä¹‹è·¯ä¸Šï¼Œç»™è‡ªå·±åˆ›é€ å¤©èŠ±æ¿ã€‚</p>
<p><strong>æ¨èé˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oschina.net%2Faction%2FGoToLink%3Furl%3Dhttps%253A%252F%252Fmp.weixin.qq.com%252Fs%253F__biz%253DMzg4NDA0NTEwNA%253D%253D%2526mid%253D2247509441%2526idx%253D1%2526sn%253Dae8228d57d3ff8bee56e81ebcce9aaf1%2526scene%253D21%2523wechat_redirect" target="_blank" title="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg4NDA0NTEwNA%3D%3D%26mid%3D2247509441%26idx%3D1%26sn%3Dae8228d57d3ff8bee56e81ebcce9aaf1%26scene%3D21%23wechat_redirect" ref="nofollow noopener noreferrer">ç»™ PG é¸¡è›‹é‡Œé¢æŒ‘éª¨å¤´ -- æ­å· PostgreSQL ç”Ÿæ€å¤§ä¼š</a></strong></p>
<h2 data-id="heading-25">å…­ã€æœªæ¥å±•æœ›ä¸è¡ŒåŠ¨å·å¬</h2>
<p>SCALE è¯„æµ‹ä½“ç³»å°†æŒç»­è·Ÿè¸ªå„å¤§å‚å•†çš„æœ€æ–°æ¨¡å‹åŠ¨æ€å’Œè¿­ä»£è¿›å±•ï¼Œé€šè¿‡å…¬æ­£ã€é€æ˜çš„è¯„æµ‹æ•°æ®ï¼Œä¸ºç¤¾åŒºæä¾›æŠ€æœ¯é€‰å‹å‚è€ƒã€‚</p>
<p>**å³åˆ»æ¢ç´¢æ–°ä¸€ä»£æ¨¡å‹çš„ä¸“ä¸šèƒ½åŠ›ï¼**æ¬¢è¿æ‚¨ç™»é™† SCALE å®˜æ–¹å¹³å°ï¼ŒæŸ¥çœ‹å®Œæ•´çš„æœ€æ–°æ¦œå•å’Œæ¨¡å‹å¯¹æ¯”è¯¦æƒ…ï¼Œå…±åŒæŠŠæ¡ AI æŠ€æœ¯çš„å‰æ²¿è„‰æã€‚</p>
<p>æ•°æ®æˆªæ­¢æ—¥æœŸï¼š2025 å¹´ 12 æœˆ 2 æ—¥</p>
<blockquote>
<p>æŸ¥çœ‹å®Œæ•´æ¦œå•å¹¶è”ç³»æˆ‘ä»¬æäº¤æ‚¨çš„äº§å“è¿›è¡Œæµ‹è¯„ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oschina.net%2Faction%2FGoToLink%3Furl%3Dhttps%253A%252F%252Fsql-llm-leaderboard.com%252F" target="_blank" title="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fsql-llm-leaderboard.com%2F" ref="nofollow noopener noreferrer"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oschina.net%2Faction%2FGoToLink%3Furl%3Dhttps%253A%252F%252Fsql-llm-leaderboard.com%252F" target="_blank" title="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fsql-llm-leaderboard.com%2F" ref="nofollow noopener noreferrer">sql-llm-leaderboard.com/</a></p>
</blockquote>
<p><strong>SCALEï¼šä¸ºä¸“ä¸š SQL ä»»åŠ¡ï¼Œé€‰ä¸“ä¸š AI æ¨¡å‹ã€‚</strong></p>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p>[1] SCALE:<a href="https://link.juejin.cn?target=https%3A%2F%2Fsql-llm-leaderboard.com%2F" target="_blank" title="https://sql-llm-leaderboard.com/" ref="nofollow noopener noreferrer">sql-llm-leaderboard.com/</a></p>
<p>[2] Gemini 3 Pro:<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeepmind.google%2Fmodels%2Fgemini%2F" target="_blank" title="https://deepmind.google/models/gemini/" ref="nofollow noopener noreferrer">deepmind.google/models/gemiâ€¦</a></p>
<p>[3] DeepSeek-V3.2-Exp:<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdeepseek-ai%2FDeepSeek-V3.2-Exp" target="_blank" title="https://huggingface.co/deepseek-ai/DeepSeek-V3.2-Exp" ref="nofollow noopener noreferrer">huggingface.co/deepseek-aiâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SQLShift V5.0 å‘å¸ƒï¼å¼•å…¥å¢å¼ºæ¨¡å‹ï¼šå¤æ‚ SQL è½¬æ¢å‡†ç¡®ç‡è´¨å˜]]></title>    <link>https://juejin.cn/post/7579494852654350370</link>    <guid>https://juejin.cn/post/7579494852654350370</guid>    <pubDate>2025-12-04T03:14:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579494852654350370" data-draft-id="7579551971926179880" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SQLShift V5.0 å‘å¸ƒï¼å¼•å…¥å¢å¼ºæ¨¡å‹ï¼šå¤æ‚ SQL è½¬æ¢å‡†ç¡®ç‡è´¨å˜"/> <meta itemprop="keywords" content="SQL,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-04T03:14:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±å¯ç”Ÿå¼€æºç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/1480387593251847"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SQLShift V5.0 å‘å¸ƒï¼å¼•å…¥å¢å¼ºæ¨¡å‹ï¼šå¤æ‚ SQL è½¬æ¢å‡†ç¡®ç‡è´¨å˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1480387593251847/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±å¯ç”Ÿå¼€æºç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:14:16.000Z" title="Thu Dec 04 2025 03:14:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´ 11 æœˆ 28 æ—¥ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fsqlshift.cn%2Fapp%2Ftask_detail%3Ftask_id%3D578cb98b-a121-41a6-930a-4cc271ef0749%26task_name%3DDemo%26detail_type%3Dshare_detail%26code%3D83103ce2-9167-439c-a03c-532c911fb516" target="_blank" title="https://sqlshift.cn/app/task_detail?task_id=578cb98b-a121-41a6-930a-4cc271ef0749&amp;task_name=Demo&amp;detail_type=share_detail&amp;code=83103ce2-9167-439c-a03c-532c911fb516" ref="nofollow noopener noreferrer"><strong>SQLShift</strong></a>[1] <strong>V5 ç‰ˆæœ¬æ­£å¼æ›´æ–°ï¼Œæ¬¢è¿ä½“éªŒï¼</strong></p>
<p><strong>SQLShift æ˜¯é¢å‘ä¼ä¸šçš„æ•°æ®åº“éè¡¨å¯¹è±¡è¿ç§»å¹³å°ï¼ŒåŸºäºå¤§æ¨¡å‹å®ç°å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ç­‰å¯¹è±¡çš„è·¨åº“è‡ªåŠ¨è½¬æ¢ä¸å…¼å®¹ä¿®å¤ï¼Œé™ä½è¿ç§»æˆæœ¬ä¸é£é™©ï¼Œæ”¯æŒ Oracleã€PostgreSQLã€GaussDBã€OceanBaseã€SQLServer ç­‰ã€‚æœ¬æ¬¡æ›´æ–°æ˜¯ SQLShift å‘å¸ƒä»¥æ¥æœ€é‡è¦çš„ä¸€æ¬¡æ¶æ„å‡çº§ã€‚</strong></p>
<p>äº§å“å¼•å…¥æ–°çš„ä»»åŠ¡è½¬æ¢æ¨¡å‹ï¼š<strong>å¢å¼ºæ¨¡å‹ï¼ˆBetaï¼‰</strong>ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ–°å¢ <strong>æ™ºèƒ½ä¿®å¤ä¸­å¿ƒ</strong>ï¼Œä¸ºæ‚¨çš„æ•°æ®åº“è¿ç§»å¸¦æ¥æ›´å¯é çš„ä½“éªŒã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å¢å¼ºæ¨¡å‹ï¼ˆBetaï¼‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b87df36e2784a88af48cb2f07b5ff6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422856&amp;x-signature=ocexDwKhcEOq7Fb2wa9ntV%2FfRA4%3D" alt="" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5261e86202e34ba3a948c7abc3597e4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422856&amp;x-signature=Z9x8Q%2Bev0HQU9INN7jaFNcF%2Fm5c%3D" alt="" loading="lazy"/></p>
<p><strong>å¢å¼ºæ¨¡å‹ï¼ˆBetaï¼‰</strong> ç›¸è¾ƒäºåŸæœ‰çš„ <strong>æ ‡å‡†æ¨¡å‹</strong>ï¼Œå¸¦æ¥äº†æ›´é«˜çš„è½¬æ¢æ­£ç¡®ç‡ã€æ›´ç¨³å®šçš„ä¸Šä¸‹æ–‡å¤„ç†èƒ½åŠ›ã€‚</p>
<blockquote>
<p>åœ¨æœ¬æ¬¡æ›´æ–°ä¸­ï¼Œæˆ‘ä»¬å°†å†å²ç‰ˆæœ¬çš„è½¬æ¢æœºåˆ¶ç»Ÿä¸€å‘½åä¸º <strong>æ ‡å‡†æ¨¡å‹</strong>ï¼Œä¾¿äºç”¨æˆ·åœ¨åˆ›å»ºè½¬æ¢ä»»åŠ¡æ—¶é€‰æ‹©é€‚åˆçš„è½¬æ¢æ¨¡å¼ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab169598032c4ae58f9b1ca619cc0fb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422856&amp;x-signature=0jixpFUr0kfE6ll0gsu4LNwDyIQ%3D" alt="" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b834c79a29734f5e9cf79825d9f66fec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422856&amp;x-signature=96AWwLCk4bZH4lpYKecFXPgx3NM%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>æå‡å¤æ‚ SQL è½¬æ¢æ­£ç¡®ç‡</strong></p>
<p>åœ¨å¤šè¡¨å…³è”ã€æ·±åº¦åµŒå¥—é€»è¾‘ç­‰å¤æ‚åœºæ™¯ä¸­è¡¨ç°æ›´åŠ ç¨³å®šã€‚</p>
</li>
<li>
<p><strong>æ”¹å–„ä¸Šä¸‹æ–‡ä¸€è‡´æ€§</strong></p>
<p>å·²è§£å†³éƒ¨åˆ†ç”¨æˆ·åé¦ˆçš„</p>
<p>å˜é‡ä½ç½®é”™ä¹±</p>
<p>å’Œ</p>
<p>ä¸šåŠ¡é€»è¾‘ä¸¢å¤±</p>
<p>ç­‰é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>æ–°å¢è¿ç§»ç»„åˆæ”¯æŒ</strong></p>
<p>å·²æ–°å¢</p>
<p>SQL Server â†’ OceanBase 4.3.5</p>
<p>è¿ç§»èƒ½åŠ›ï¼Œæå‡å¯¹æ–°ç‰ˆæœ¬ OceanBase çš„å…¼å®¹æ€§ã€‚</p>
<p>åç»­æ–°å¢çš„è¿ç§»ç»„åˆå°†ä¼˜å…ˆåœ¨ <strong>å¢å¼ºæ¨¡å‹</strong> ä¸­æä¾›ã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">äºŒã€æ™ºèƒ½ä¿®å¤ä¸­å¿ƒ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0778319625774ddd969a97ab59cefc78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422856&amp;x-signature=936rwy%2Ff5eu5YRJ7AmqDLV%2BSawc%3D" alt="" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78579b3545004bd0aec795f33f2de17c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422856&amp;x-signature=1%2FPoN5mFZGG4KIShVtIVi9HQeXI%3D" alt="" loading="lazy"/></p>
<p><strong>æ™ºèƒ½ä¿®å¤ä¸­å¿ƒ</strong> éš <strong>å¢å¼ºæ¨¡å‹ï¼ˆBetaï¼‰</strong> åŒæ­¥ä¸Šçº¿ï¼Œç”¨äºè¿›ä¸€æ­¥æå‡è¿ç§»å SQL çš„å¯ç”¨æ€§ä¸ä¸€è‡´æ€§ï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f19e2d73407541bebbcdaee1bec20491~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422856&amp;x-signature=kSTZhOrjzH6hz7VbkjkStHmR2c8%3D" alt="" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5dce3e2d7074e1cb18f481b2965d559~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765422856&amp;x-signature=DCYpBWHtkXq5bM3Cr4FZFSsbhpg%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>å¤šè½®å¯¹è¯å¾®è°ƒç›®æ ‡ç«¯ SQL</strong></p>
<p>ç”¨äºæ»¡è¶³ä¼ä¸šå†…éƒ¨ç¼–ç è§„èŒƒæˆ–ç‰¹å®šè¯­ä¹‰æœŸæœ›ã€‚</p>
</li>
<li>
<p><strong>äºŒæ¬¡å¤„ç† Dblinkã€è¡¨å€¼å‡½æ•°ç­‰æ˜¾æ€§æˆ–ç¡¬æ€§ä¸å…¼å®¹è¯­æ³•</strong></p>
<p>å‡å°‘äººå·¥ä¿®å¤å·¥ä½œé‡ã€‚</p>
</li>
<li>
<p><strong>ååŠ©ä¼˜åŒ–è½¬æ¢åå­˜å‚¨è¿‡ç¨‹çš„æ€§èƒ½è¡¨ç°</strong></p>
<p>æé«˜ä¸Šçº¿ç¨³å®šæ€§ã€‚</p>
</li>
</ul>
<p>ç‰¹åˆ«é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<p>**åœºæ™¯ä¸€ï¼š**è½¬æ¢ç»“æœ <strong>ä¸ç¬¦åˆ</strong> ä¼ä¸šå†…éƒ¨ SQL æ ‡å‡†ï¼Œéœ€è¦è¿›ä¸€æ­¥è°ƒæ•´ã€‚</p>
<p><strong>åœºæ™¯äºŒ</strong>ï¼šè½¬æ¢å†…å®¹æ¶‰åŠ Dblink ç­‰ <strong>å…¼å®¹æ€§è¾ƒå¼±</strong> çš„è¯­æ³•ï¼Œéœ€è¦è¡¥å……æˆ–é‡å†™æ—¶ã€‚</p>
<p><strong>åœºæ™¯ä¸‰</strong>ï¼šè½¬æ¢åçš„å­˜å‚¨è¿‡ç¨‹ <strong>æ€§èƒ½ä¸ä½³</strong>ï¼Œå¸Œæœ›å¾—åˆ°è‡ªåŠ¨ä¼˜åŒ–å»ºè®®æˆ–æ”¹å†™æ—¶ã€‚</p>
<h2 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fsqlshift.cn%2Fapp%2Ftask_detail%3Ftask_id%3D578cb98b-a121-41a6-930a-4cc271ef0749%26task_name%3DDemo%26detail_type%3Dshare_detail%26code%3D83103ce2-9167-439c-a03c-532c911fb516" target="_blank" title="https://sqlshift.cn/app/task_detail?task_id=578cb98b-a121-41a6-930a-4cc271ef0749&amp;task_name=Demo&amp;detail_type=share_detail&amp;code=83103ce2-9167-439c-a03c-532c911fb516" ref="nofollow noopener noreferrer">ğŸ”— å…è´¹è¯•ç”¨é™æ—¶å¼€æ”¾</a></h2>
<p>é¢†å–ä½ çš„è½¬æ¢é¢åº¦ï¼Œç«‹å³ä½“éªŒ <strong>SQLShift</strong> æ™ºèƒ½åŒ–è¿ç§»å¸¦æ¥çš„é£è·ƒæ•ˆç‡å§ï¼</p>
<p>ğŸ§© SQL æ–¹è¨€å†å¤šï¼Œè½¬æ¢ä¹Ÿèƒ½ä¸€æ­¥åˆ°ä½ï¼ŒSQLShift ä¸ºä½ æå®šï¼</p>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p>[1] SQLShift å®˜ç½‘:<a href="https://link.juejin.cn?target=https%3A%2F%2Fsqlshift.cn%2F" target="_blank" title="https://sqlshift.cn/" ref="nofollow noopener noreferrer">sqlshift.cn/</a></p>
<p>===</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3 å˜é‡ å›½äº§ä»“é¢‰ç¼–ç¨‹è¯­è¨€ é›¶åŸºç¡€å…¥é—¨æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7579567346390532122</link>    <guid>https://juejin.cn/post/7579567346390532122</guid>    <pubDate>2025-12-04T03:02:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579567346390532122" data-draft-id="7579573664228687881" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3 å˜é‡  å›½äº§ä»“é¢‰ç¼–ç¨‹è¯­è¨€ é›¶åŸºç¡€å…¥é—¨æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T03:02:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ äº”å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/37846682183432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3 å˜é‡  å›½äº§ä»“é¢‰ç¼–ç¨‹è¯­è¨€ é›¶åŸºç¡€å…¥é—¨æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/37846682183432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ äº”å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:02:29.000Z" title="Thu Dec 04 2025 03:02:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å˜é‡</h2>
<ul>
<li>ä½œç”¨</li>
<li>
<ul>
<li>å†…å­˜ä¸­çš„ä¸€å—å­˜å‚¨ç©ºé—´</li>
<li>æ˜¯ç”¨æ¥æ‰¿è½½æ•°æ®çš„</li>
</ul>
</li>
<li>å®šä¹‰</li>
<li>åŒ…å« å…³é”®å­—var æ•°æ®ç±»å‹ å˜é‡å å˜é‡å€¼</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> <span class="hljs-attr">su7Length</span>: <span class="hljs-title class_">Int64</span> = <span class="hljs-number">4997</span>
</code></pre>
<ul>
<li>ä½¿ç”¨</li>
</ul>
<pre><code class="hljs language-js" lang="js">su7Length = <span class="hljs-number">5000</span> <span class="hljs-keyword">var</span> <span class="hljs-attr">su7YellowLength</span>: <span class="hljs-title class_">Int64</span> = su7Length
</code></pre>
<h2 data-id="heading-1">å…¶ä»–å˜é‡</h2>
<ul>
<li>ä¸å¯å˜å˜é‡</li>
<li>è¢«èµ‹å€¼å å€¼ä¸å¯æ”¹å˜</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> <span class="hljs-attr">yu7Len</span>: <span class="hljs-title class_">Int64</span> = <span class="hljs-number">5000</span> yu7Len = <span class="hljs-number">4999</span> <span class="hljs-comment">//æŠ¥é”™</span>
</code></pre>
<ul>
<li>å¸¸é‡</li>
<li>è¢«èµ‹å€¼å å€¼ä¸å¯æ”¹å˜</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-attr">HEIGHT</span>: <span class="hljs-title class_">Int64</span> = <span class="hljs-number">172</span> <span class="hljs-variable constant_">HEIGHT</span> = <span class="hljs-number">170</span> <span class="hljs-comment">//æŠ¥é”™</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java åŒ¿åå†…éƒ¨ç±»ç®€æ˜æŒ‡å—ï¼ˆé‡ç‚¹ï¼‰]]></title>    <link>https://juejin.cn/post/7579496954252574760</link>    <guid>https://juejin.cn/post/7579496954252574760</guid>    <pubDate>2025-12-04T03:05:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579496954252574760" data-draft-id="7579485652528218147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java åŒ¿åå†…éƒ¨ç±»ç®€æ˜æŒ‡å—ï¼ˆé‡ç‚¹ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T03:05:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å‘¨åœ¨æˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/3632442150752573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java åŒ¿åå†…éƒ¨ç±»ç®€æ˜æŒ‡å—ï¼ˆé‡ç‚¹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3632442150752573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å‘¨åœ¨æˆé•¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:05:52.000Z" title="Thu Dec 04 2025 03:05:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“Œ åŒ¿åå†…éƒ¨ç±»æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><strong>æ²¡æœ‰åå­—çš„å†…éƒ¨ç±»</strong>ï¼Œåœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶å®šä¹‰ç±»ä½“ã€‚</p>
<h2 data-id="heading-1">ğŸ¯ ä¸€å¥è¯ç†è§£</h2>
<p><strong>ç›´æ¥ <code>new</code> æ¥å£æˆ–ç±»ï¼Œå¹¶ç«‹å³å®ç°/é‡å†™æ–¹æ³•</strong>ã€‚</p>
<h2 data-id="heading-2">ğŸ’¡ åŸºæœ¬è¯­æ³•</h2>
<h3 data-id="heading-3"><strong>1. å®ç°æ¥å£</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åŒ¿åå†…éƒ¨ç±»ï¼šç›´æ¥newæ¥å£</span>
        <span class="hljs-type">Animal</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"æ±ªæ±ªï¼"</span>);
            }
        };
        
        dog.makeSound();  <span class="hljs-comment">// è¾“å‡ºï¼šæ±ªæ±ªï¼</span>
    }
}
</code></pre>
<h3 data-id="heading-4"><strong>2. ç»§æ‰¿æŠ½è±¡ç±»</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŠ½è±¡ç±»</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">speak</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">breathe</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"å‘¼å¸ä¸­..."</span>);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åŒ¿åå†…éƒ¨ç±»ï¼šç»§æ‰¿æŠ½è±¡ç±»</span>
        <span class="hljs-type">Person</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">void</span> <span class="hljs-title function_">speak</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"æˆ‘æ˜¯å­¦ç”Ÿ"</span>);
            }
            
            <span class="hljs-comment">// å¯ä»¥é‡å†™çˆ¶ç±»æ–¹æ³•</span>
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">void</span> <span class="hljs-title function_">breathe</span><span class="hljs-params">()</span> {
                <span class="hljs-built_in">super</span>.breathe();
                System.out.println(<span class="hljs-string">"å­¦ç”Ÿå‘¼å¸"</span>);
            }
        };
        
        student.speak();    <span class="hljs-comment">// è¾“å‡ºï¼šæˆ‘æ˜¯å­¦ç”Ÿ</span>
        student.breathe();  <span class="hljs-comment">// è¾“å‡ºï¼šå‘¼å¸ä¸­... å­¦ç”Ÿå‘¼å¸</span>
    }
}
</code></pre>
<h3 data-id="heading-5"><strong>3. ç»§æ‰¿æ™®é€šç±»</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ™®é€šç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Printer</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">(String msg)</span> {
        System.out.println(<span class="hljs-string">"æ‰“å°: "</span> + msg);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åŒ¿åå†…éƒ¨ç±»ï¼šç»§æ‰¿æ™®é€šç±»</span>
        <span class="hljs-type">Printer</span> <span class="hljs-variable">colorPrinter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Printer</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">(String msg)</span> {
                System.out.println(<span class="hljs-string">"å½©è‰²æ‰“å°: "</span> + msg);
            }
            
            <span class="hljs-comment">// å¯ä»¥æ·»åŠ æ–°æ–¹æ³•ï¼ˆä½†å¤–éƒ¨ä¸èƒ½è°ƒç”¨ï¼‰</span>
            <span class="hljs-keyword">void</span> <span class="hljs-title function_">scan</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"æ‰«æåŠŸèƒ½"</span>);
            }
        };
        
        colorPrinter.print(<span class="hljs-string">"æ–‡æ¡£"</span>);  <span class="hljs-comment">// è¾“å‡ºï¼šå½©è‰²æ‰“å°: æ–‡æ¡£</span>
        <span class="hljs-comment">// colorPrinter.scan();     // âŒ ç¼–è¯‘é”™è¯¯</span>
    }
}
</code></pre>
<h2 data-id="heading-6">ğŸš€ å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-7"><strong>åœºæ™¯1ï¼šäº‹ä»¶ç›‘å¬ï¼ˆæœ€å¸¸ç”¨ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç‚¹å‡»ç›‘å¬æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">OnClickListener</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// æŒ‰é’®ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Button</span> {
    <span class="hljs-keyword">private</span> OnClickListener listener;
    
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setOnClickListener</span><span class="hljs-params">(OnClickListener listener)</span> {
        <span class="hljs-built_in">this</span>.listener = listener;
    }
    
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">click</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (listener != <span class="hljs-literal">null</span>) {
            listener.onClick();
        }
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EventDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Button</span> <span class="hljs-variable">button</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Button</span>();
        
        <span class="hljs-comment">// ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»è®¾ç½®ç‚¹å‡»äº‹ä»¶</span>
        button.setOnClickListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OnClickListener</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼"</span>);
                System.out.println(<span class="hljs-string">"æ‰§è¡Œæ“ä½œ..."</span>);
            }
        });
        
        button.click();  <span class="hljs-comment">// è¾“å‡ºï¼šæŒ‰é’®è¢«ç‚¹å‡»äº†ï¼æ‰§è¡Œæ“ä½œ...</span>
    }
}
</code></pre>
<h3 data-id="heading-8"><strong>åœºæ™¯2ï¼šçº¿ç¨‹åˆ›å»º</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"çº¿ç¨‹1è¿è¡Œä¸­"</span>);
            }
        });
        
        <span class="hljs-comment">// Java 8+ï¼šLambdaè¡¨è¾¾å¼ï¼ˆæ›´ç®€æ´ï¼‰</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            System.out.println(<span class="hljs-string">"çº¿ç¨‹2è¿è¡Œä¸­"</span>);
        });
        
        thread1.start();
        thread2.start();
    }
}
</code></pre>
<h3 data-id="heading-9"><strong>åœºæ™¯3ï¼šé›†åˆæ’åº</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SortDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; names = Arrays.asList(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"ç‹äº”"</span>);
        
        <span class="hljs-comment">// ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»è¿›è¡Œè‡ªå®šä¹‰æ’åº</span>
        Collections.sort(names, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;String&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(String a, String b)</span> {
                <span class="hljs-comment">// æŒ‰å­—ç¬¦ä¸²é•¿åº¦æ’åº</span>
                <span class="hljs-keyword">return</span> Integer.compare(a.length(), b.length());
            }
        });
        
        System.out.println(<span class="hljs-string">"æ’åºå: "</span> + names);
        
        <span class="hljs-comment">// Java 8+ï¼šLambdaè¡¨è¾¾å¼</span>
        Collections.sort(names, (a, b) -&gt; b.length() - a.length());
        System.out.println(<span class="hljs-string">"åå‘æ’åº: "</span> + names);
    }
}
</code></pre>
<h2 data-id="heading-10">ğŸ”‘ æ ¸å¿ƒç‰¹ç‚¹</h2>
<h3 data-id="heading-11"><strong>1. æ²¡æœ‰ç±»å</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Greeting</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayHello</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è¿™é‡Œæ²¡æœ‰ç±»åï¼Œç›´æ¥newæ¥å£</span>
        <span class="hljs-type">Greeting</span> <span class="hljs-variable">greeting</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Greeting</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayHello</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"ä½ å¥½ï¼"</span>);
            }
            
            <span class="hljs-comment">// è¿™ä¸ªç±»æ²¡æœ‰åå­—ï¼Œæ— æ³•åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨</span>
        };
    }
}
</code></pre>
<h3 data-id="heading-12"><strong>2. åªèƒ½ä½¿ç”¨ä¸€æ¬¡</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Calculator</span> {
    <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºåŠ æ³•è®¡ç®—å™¨ï¼ˆåªèƒ½ç”¨è¿™ä¸€æ¬¡ï¼‰</span>
        <span class="hljs-type">Calculator</span> <span class="hljs-variable">adder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
                <span class="hljs-keyword">return</span> a + b;
            }
        };
        
        System.out.println(<span class="hljs-string">"5 + 3 = "</span> + adder.calculate(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>));
        
        <span class="hljs-comment">// å¦‚æœéœ€è¦ä¹˜æ³•ï¼Œå¿…é¡»å†åˆ›å»ºä¸€ä¸ª</span>
        <span class="hljs-type">Calculator</span> <span class="hljs-variable">multiplier</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
                <span class="hljs-keyword">return</span> a * b;
            }
        };
        
        System.out.println(<span class="hljs-string">"5 * 3 = "</span> + multiplier.calculate(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>));
    }
}
</code></pre>
<h3 data-id="heading-13"><strong>3. è®¿é—®å¤–éƒ¨å˜é‡ï¼ˆå¿…é¡»æ˜¯finalï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VariableDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;  <span class="hljs-comment">// å¿…é¡»æ˜¯final</span>
        
        <span class="hljs-type">Runnable</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                <span class="hljs-comment">// å¯ä»¥è®¿é—®finalå±€éƒ¨å˜é‡</span>
                System.out.println(message);
                
                <span class="hljs-comment">// ä¸èƒ½ä¿®æ”¹ï¼ˆå› ä¸ºå®é™…ä¸Šæ˜¯finalï¼‰</span>
                <span class="hljs-comment">// message = "Hi";  // âŒ ç¼–è¯‘é”™è¯¯</span>
            }
        };
        
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(task).start();
    }
}
</code></pre>
<h2 data-id="heading-14">âš¡ åŒ¿åå†…éƒ¨ç±» vs Lambdaè¡¨è¾¾å¼</h2>
<h3 data-id="heading-15"><strong>å¯¹æ¯”ç¤ºä¾‹</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MathOperation</span> {
    <span class="hljs-type">int</span> <span class="hljs-title function_">operate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CompareDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åŒ¿åå†…éƒ¨ç±»å†™æ³•</span>
        <span class="hljs-type">MathOperation</span> <span class="hljs-variable">add1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MathOperation</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">operate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
                <span class="hljs-keyword">return</span> a + b;
            }
        };
        
        <span class="hljs-comment">// Lambdaè¡¨è¾¾å¼å†™æ³•ï¼ˆJava 8+ï¼‰</span>
        <span class="hljs-type">MathOperation</span> <span class="hljs-variable">add2</span> <span class="hljs-operator">=</span> (a, b) -&gt; a + b;
        
        System.out.println(<span class="hljs-string">"åŒ¿åå†…éƒ¨ç±»: "</span> + add1.operate(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>));
        System.out.println(<span class="hljs-string">"Lambda: "</span> + add2.operate(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>));
    }
}
</code></pre>
<h3 data-id="heading-16"><strong>ä½¿ç”¨é€‰æ‹©</strong></h3>
<pre><code class="hljs language-markdown" lang="markdown">é—®ï¼šç”¨åŒ¿åå†…éƒ¨ç±»è¿˜æ˜¯Lambdaï¼Ÿ

<span class="hljs-bullet">1.</span> æ¥å£åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨Lambdaè¡¨è¾¾å¼ âœ…ï¼ˆæ›´ç®€æ´ï¼‰
<span class="hljs-bullet">   -</span> å¦ â†’ ç”¨åŒ¿åå†…éƒ¨ç±»

<span class="hljs-bullet">2.</span> éœ€è¦é‡å†™å¤šä¸ªæ–¹æ³•ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨åŒ¿åå†…éƒ¨ç±»
<span class="hljs-bullet">   -</span> å¦ â†’ ç”¨Lambda

<span class="hljs-bullet">3.</span> éœ€è¦è®¿é—®å¤–éƒ¨ç±»çš„éfinalå˜é‡ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨åŒ¿åå†…éƒ¨ç±»ï¼ˆLambdaè¦æ±‚finalï¼‰
<span class="hljs-bullet">   -</span> å¦ â†’ ç”¨Lambda

æ€»ç»“ï¼š
<span class="hljs-bullet">-</span> ç®€å•æƒ…å†µï¼šç”¨Lambda
<span class="hljs-bullet">-</span> å¤æ‚æƒ…å†µï¼šç”¨åŒ¿åå†…éƒ¨ç±»
</code></pre>
<h2 data-id="heading-17">ğŸ’ å®ç”¨æŠ€å·§</h2>
<h3 data-id="heading-18"><strong>1. æ–¹æ³•å‚æ•°ç›´æ¥ä½¿ç”¨</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Validator</span> {
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">validate</span><span class="hljs-params">(String input)</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Form</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">submit</span><span class="hljs-params">(Validator validator)</span> {
        <span class="hljs-comment">// ä½¿ç”¨ä¼ å…¥çš„éªŒè¯å™¨</span>
        <span class="hljs-keyword">if</span> (validator.validate(<span class="hljs-string">"test"</span>)) {
            System.out.println(<span class="hljs-string">"éªŒè¯é€šè¿‡"</span>);
        }
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParamDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Form</span> <span class="hljs-variable">form</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Form</span>();
        
        <span class="hljs-comment">// ç›´æ¥åœ¨å‚æ•°ä¸­ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»</span>
        form.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Validator</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">validate</span><span class="hljs-params">(String input)</span> {
                <span class="hljs-keyword">return</span> input != <span class="hljs-literal">null</span> &amp;&amp; input.length() &gt; <span class="hljs-number">0</span>;
            }
        });
    }
}
</code></pre>
<h3 data-id="heading-19"><strong>2. ä¸€æ¬¡æ€§ä»»åŠ¡</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OneTimeTask</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ä¸€æ¬¡æ€§ä»»åŠ¡ï¼šæ–‡ä»¶å¤„ç†</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"å¼€å§‹å¤„ç†æ–‡ä»¶..."</span>);
                <span class="hljs-comment">// å¤„ç†é€»è¾‘</span>
                System.out.println(<span class="hljs-string">"æ–‡ä»¶å¤„ç†å®Œæˆ"</span>);
            }
        }).start();
    }
}
</code></pre>
<h2 data-id="heading-20">âš ï¸ æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>æ²¡æœ‰æ„é€ å™¨</strong>ï¼šä¸èƒ½å®šä¹‰æ„é€ æ–¹æ³•</li>
<li><strong>ä¸èƒ½æœ‰é™æ€æˆå‘˜</strong>ï¼šä¸èƒ½æœ‰staticæ–¹æ³•å’Œå˜é‡</li>
<li><strong>åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»æˆ–å®ç°ä¸€ä¸ªæ¥å£</strong></li>
<li><strong>ä»£ç å¯è¯»æ€§</strong>ï¼šå¤æ‚çš„åŒ¿åå†…éƒ¨ç±»å½±å“å¯è¯»æ€§</li>
</ol>
<h2 data-id="heading-21">ğŸ“ è®°å¿†å£è¯€</h2>
<pre><code class="hljs language-markdown" lang="markdown">åŒ¿åå†…éƒ¨ç±»ä¸‰è¦ç´ ï¼š
<span class="hljs-bullet">1.</span> new æ¥å£/ç±»
<span class="hljs-bullet">2.</span> ç«‹å³å®ç°/é‡å†™æ–¹æ³•
<span class="hljs-bullet">3.</span> æ²¡æœ‰ç±»åï¼Œåªèƒ½ç”¨ä¸€æ¬¡

ä½¿ç”¨åœºæ™¯ï¼š
<span class="hljs-bullet">1.</span> äº‹ä»¶ç›‘å¬
<span class="hljs-bullet">2.</span> çº¿ç¨‹åˆ›å»º
<span class="hljs-bullet">3.</span> ä¸´æ—¶å®ç°
<span class="hljs-bullet">4.</span> å‚æ•°ä¼ é€’
</code></pre>
<h2 data-id="heading-22">ğŸ¯ ä¸€å¥è¯æ€»ç»“</h2>
<p><strong>åŒ¿åå†…éƒ¨ç±»å°±æ˜¯"å³ç”¨å³ä¸¢"çš„ä¸´æ—¶å®ç°ï¼Œé€‚åˆç®€å•çš„ä¸€æ¬¡æ€§ä»»åŠ¡ã€‚å¤æ‚æƒ…å†µè¿˜æ˜¯ç”¨æ­£å¸¸ç±»ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº Microsoft Agent Framework é›†æˆ DeepSeek å¤§æ¨¡å‹çš„å®è·µ]]></title>    <link>https://juejin.cn/post/7579512734297260070</link>    <guid>https://juejin.cn/post/7579512734297260070</guid>    <pubDate>2025-12-04T02:53:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579512734297260070" data-draft-id="7573595009551958026" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº Microsoft Agent Framework é›†æˆ DeepSeek å¤§æ¨¡å‹çš„å®è·µ"/> <meta itemprop="keywords" content="åç«¯,DeepSeek,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-04T02:53:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç ç¼–åŒ "/> <meta itemprop="url" content="https://juejin.cn/user/1308876155395739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº Microsoft Agent Framework é›†æˆ DeepSeek å¤§æ¨¡å‹çš„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1308876155395739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç ç¼–åŒ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:53:59.000Z" title="Thu Dec 04 2025 02:53:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>Microsoft Agent Frameworkï¼ˆç®€ç§° Agent Frameworkï¼‰å‘å¸ƒå·²æœ‰ä¸€æ®µæ—¶é—´ã€‚åœ¨â€œè§‚æœ›â€ï¼ˆæ‘¸é±¼ï¼‰ä¸€é˜µåï¼Œåœ¨è€æ¿çš„â€œé¼“åŠ±â€ä¸‹ï¼Œæˆ‘ä»¬æœæ–­å°†å¤šä¸ª AI å¾®æœåŠ¡ä» <strong>Semantic Kernelï¼ˆSKï¼‰</strong> è¿ç§»è‡³ <strong>Agent Framework</strong>ã€‚</p>
<p>æœ¬æ–‡è®°å½•è¿ç§»è¿‡ç¨‹ä¸­æ€»ç»“çš„<strong>å·¥ç¨‹åŒ–ç”¨æ³•ä¸å®è·µç»éªŒ</strong>ï¼Œä¾›åŒè¡Œå‚è€ƒã€‚</p>
<h2 data-id="heading-1">äºŒã€Agent Framework æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Agent Framework æ˜¯å¾®è½¯åœ¨ Semantic Kernel ä¹‹åæ¨å‡ºçš„<strong>æ–°ä¸€ä»£æ™ºèƒ½ä½“ï¼ˆAgentï¼‰å¼€å‘æ¡†æ¶</strong>ï¼Œå¯è§†ä¸º SK çš„â€œè¿›åŒ–ç‰ˆâ€ï¼š</p>
<ul>
<li>
<p>æ ¸å¿ƒç†å¿µç›¸ä¼¼ï¼Œä½† API æ›´ç›´è§‚ã€æ›´ç°ä»£åŒ–ï¼›</p>
</li>
<li>
<p>åŸç”Ÿæ”¯æŒ <strong>å¤šæ™ºèƒ½ä½“åä½œï¼ˆMulti-Agentï¼‰</strong>ï¼›</p>
</li>
<li>
<p>æ›´å¥‘åˆå½“å‰ LLM åº”ç”¨å‘â€œæ™ºèƒ½ä½“ç³»ç»Ÿâ€æ¼”è¿›çš„è¶‹åŠ¿ã€‚</p>
</li>
</ul>
<blockquote>
<p>ğŸ’¡ å¦‚æœä½ æ›¾è¢« SK çš„ <code>Kernel/Skill/Function/Context</code> åµŒå¥—ç»“æ„æŠ˜ç£¨è¿‡ï¼ŒAgent Framework ä¼šè®©ä½ çœ¼å‰ä¸€äº®ã€‚</p>
</blockquote>
<h2 data-id="heading-2">ä¸‰ã€ä¸ Semantic Kernel çš„å…³é”®å¯¹æ¯”</h2>






























<table><thead><tr><th>ç»´åº¦</th><th>Semantic Kernel</th><th>Agent Framework</th></tr></thead><tbody><tr><td><strong>ç»“æ„è®¾è®¡</strong></td><td>æŠ½è±¡å±‚çº§å¤šï¼ˆSkill/Functionï¼‰ï¼Œå¤ç”¨å›°éš¾</td><td>ç›´æ¥å®šä¹‰ <code>Agent</code> ç±»ï¼ŒèŒè´£æ¸…æ™°</td></tr><tr><td><strong>Prompt ç®¡ç†</strong></td><td>ä¾èµ– YAML/JSON æ¨¡æ¿ + Template Function</td><td>ç›´æ¥ä¼ å…¥ <code>instructions</code>ï¼Œé€»è¾‘ä¸æç¤ºåˆ†ç¦»è‡ªç„¶</td></tr><tr><td><strong>å¤š Agent åä½œ</strong></td><td>éœ€æ‰‹åŠ¨å®ç°æ¶ˆæ¯ä¼ é€’</td><td>å†…ç½®çº¿ç¨‹ï¼ˆThreadï¼‰æœºåˆ¶ï¼Œå¤©ç„¶æ”¯æŒå¤š Agent é€šä¿¡</td></tr><tr><td><strong>å·¥å…·é›†æˆ</strong></td><td>æ‰‹åŠ¨æ³¨å†Œå‡½æ•°ä¸ºæ’ä»¶</td><td>æ”¯æŒ MCP å·¥å…·ã€è‡ªå®šä¹‰ <code>AITool</code>ï¼Œå¼€ç®±å³ç”¨</td></tr></tbody></table>
<h2 data-id="heading-3">å››ã€å·¥ç¨‹åŒ–ä½¿ç”¨å§¿åŠ¿</h2>
<h3 data-id="heading-4">4.1 å•ä¸€èŒè´£ï¼šæ¯ä¸ªä»»åŠ¡ä¸€ä¸ª Agent</h3>
<p>æ‘’å¼ƒ SK ä¸­â€œä¸€ä¸ª Kernel æ‰“å¤©ä¸‹â€çš„æ¨¡å¼ï¼Œé‡‡ç”¨ <strong>ä¸€ä¸ªä»»åŠ¡å¯¹åº”ä¸€ä¸ª Agent</strong> çš„è®¾è®¡ï¼š</p>
<ul>
<li>
<p>èŒè´£å•ä¸€ï¼Œä¾¿äºæµ‹è¯•ä¸ç»´æŠ¤ï¼›</p>
</li>
<li>
<p>é€šè¿‡ IOC å®¹å™¨æ³¨å†Œï¼Œåƒæ™®é€šæœåŠ¡ä¸€æ ·æ³¨å…¥ä½¿ç”¨ã€‚</p>
</li>
</ul>
<h4 data-id="heading-5">ç¤ºä¾‹ï¼šå…¬å¸åç§°æŠ½å– Agent</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CompanyExtractionAgent</span> : <span class="hljs-title">BaseAgentFunction</span>, <span class="hljs-title">ICompanyExtractionAgent</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> AIAgent _agent;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CompanyExtractionAgent</span>(<span class="hljs-params">IOptions&lt;LLMConfiguration&gt; config</span>)</span>
    {
        <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> OpenAIClient(...);
        <span class="hljs-keyword">var</span> chatClient = client.GetChatClient(config.Value.Model);
        _agent = chatClient.CreateAIAgent(instructions: 
            <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¿¡æ¯æŠ½å–åŠ©æ‰‹ï¼Œè¯·ä»æ–‡æœ¬ä¸­æå–æ‰€æœ‰å…¬å¸åç§°ï¼Œå¿…é¡»è¿”å›åˆæ³• JSON æ•°ç»„..."</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;List&lt;<span class="hljs-built_in">string</span>&gt;&gt; ExtractCompanyNamesAsync(<span class="hljs-built_in">string</span> filePath)
    {
        <span class="hljs-comment">// åˆ†å—å¤„ç†æ–‡æ¡£ â†’ è°ƒç”¨ Agent â†’ è§£æ JSON â†’ åˆå¹¶ç»“æœ</span>
    }
}
</code></pre>
<h3 data-id="heading-6">4.2 ç»™ Agent è£…ä¸Šâ€œæ‰‹å’Œçœ¼â€ï¼šé›†æˆ MCP å·¥å…·</h3>
<h4 data-id="heading-7">4.2.1 æ³¨å†Œ MCP å®¢æˆ·ç«¯ï¼ˆå¦‚ Playwright æµè§ˆå™¨ï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">AddMcpClientAsync</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> IServiceCollection services, <span class="hljs-built_in">bool</span> headless</span>)</span>
{
    <span class="hljs-keyword">var</span> transport = <span class="hljs-keyword">new</span> StdioClientTransport(<span class="hljs-keyword">new</span> StdioClientTransportOptions
    {
        Name = <span class="hljs-string">"PlaywrightMCP"</span>,
        Command = <span class="hljs-string">"npx"</span>,
        Arguments = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt; { <span class="hljs-string">"@playwright/mcp"</span>, <span class="hljs-string">"--headless"</span>, ... }
    });
    <span class="hljs-keyword">var</span> mcpClient = <span class="hljs-keyword">await</span> McpClient.CreateAsync(transport);
    services.AddSingleton(mcpClient);
}
</code></pre>
<h4 data-id="heading-8">4.2.2 ä½¿ç”¨ MCP å·¥å…·çš„ Agent</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CompanyInfoQueryAgent</span> : <span class="hljs-title">BaseAgentFunction</span>, <span class="hljs-title">ICompanyInfoQueryAgent</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CompanyInfoQueryAgent</span>(<span class="hljs-params">IOptions&lt;LLMConfiguration&gt; config, McpClient mcpClient</span>)</span>
    {
        <span class="hljs-keyword">var</span> tools = (<span class="hljs-keyword">await</span> mcpClient.ListToolsAsync()).Cast&lt;AITool&gt;().ToList();
        _agent = chatClient.CreateAIAgent(
            instructions: <span class="hljs-string">"ä½ æ‹¥æœ‰ç½‘ç»œè®¿é—®èƒ½åŠ›ï¼Œè¯·ä½¿ç”¨ MCP å·¥å…·æŸ¥è¯¢å…¬å¸å…¬å¼€ä¿¡æ¯..."</span>,
            tools: tools
        );
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;CompanyInfo?&gt; QueryCompanyInfoAsync(<span class="hljs-built_in">string</span> companyName) { ... }
}
</code></pre>
<h3 data-id="heading-9">4.3 è‡ªå®šä¹‰å‡½æ•°å·¥å…·ï¼ˆFunction Toolï¼‰</h3>
<h4 data-id="heading-10">4.3.1 ç¼–å†™å·¥å…·ç±»</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CompanyInfoTool</span> : <span class="hljs-title">AITool</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">QueryCompanyInfoAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> companyName</span>)</span>
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> _httpClient.GetStringAsync(<span class="hljs-string">$"https://api.example.com/company/<span class="hljs-subst">{companyName}</span>"</span>);
    }
}
</code></pre>
<h4 data-id="heading-11">4.3.2 æ³¨å†Œåˆ° Agent</h4>
<pre><code class="hljs language-csharp" lang="csharp">_agent = chatClient.CreateAIAgent(
    instructions: <span class="hljs-string">"è¯·ä½¿ç”¨å·¥å…·æŸ¥è¯¢å…¬å¸ä¿¡æ¯"</span>,
    tools: <span class="hljs-keyword">new</span> List&lt;AITool&gt; { _companyInfoTool }
);
</code></pre>
<h3 data-id="heading-12">4.4 è®°å¿†åŠŸèƒ½ï¼ˆMemory / Threadï¼‰</h3>
<p>Agent Framework é€šè¿‡ <strong>Thread</strong> å®ç°å¯¹è¯è®°å¿†ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä¿å­˜å¯¹è¯çŠ¶æ€</span>
<span class="hljs-keyword">var</span> serialized = thread.Serialize(JsonSerializerOptions.Web).GetRawText();
<span class="hljs-keyword">await</span> File.WriteAllTextAsync(<span class="hljs-string">"thread.json"</span>, serialized);

<span class="hljs-comment">// æ¢å¤å¯¹è¯</span>
<span class="hljs-keyword">var</span> json = <span class="hljs-keyword">await</span> File.ReadAllTextAsync(<span class="hljs-string">"thread.json"</span>);
<span class="hljs-keyword">var</span> restoredThread = _agent.DeserializeThread(JsonSerializer.Deserialize&lt;JsonElement&gt;(json));
<span class="hljs-keyword">var</span> response = <span class="hljs-keyword">await</span> _agent.RunAsync(<span class="hljs-string">"ç»§ç»­..."</span>, restoredThread);
</code></pre>
<blockquote>
<p>âœ… æ”¯æŒæŒä¹…åŒ–åˆ°æ•°æ®åº“ã€Redis ç­‰ï¼Œå®ç°è·¨ä¼šè¯è®°å¿†ã€‚</p>
</blockquote>
<h2 data-id="heading-13">äº”ã€è¸©å‘ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-14">5.1 Endpoint é…ç½®å·®å¼‚</h3>

















<table><thead><tr><th>æ¡†æ¶</th><th>æ­£ç¡® Endpoint æ ¼å¼</th></tr></thead><tbody><tr><td>Semantic Kernel</td><td><code>https://api.deepseek.com/v1</code></td></tr><tr><td>Agent Framework</td><td><code>https://api.deepseek.com</code> ï¼ˆ<strong>æ—  <code>/v1</code></strong>ï¼‰</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ å¤šæ•°å›½äº§æ¨¡å‹ APIï¼ˆå¦‚ DeepSeekã€Moonshotï¼‰åœ¨ Agent Framework ä¸­éœ€å»æ‰è·¯å¾„åç¼€ã€‚</p>
</blockquote>
<h3 data-id="heading-15">5.2 ç»“æ„åŒ–è¾“å‡ºï¼ˆStructured Outputï¼‰</h3>
<p>æ¨èä½¿ç”¨ <code>ChatResponseFormat.ForJsonSchema</code> å¼ºåˆ¶æ¨¡å‹è¾“å‡ºåˆè§„ JSONï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> schema = AIJsonUtilities.CreateJsonSchema(<span class="hljs-keyword">typeof</span>(CompanyInfo));
<span class="hljs-keyword">var</span> chatOptions = <span class="hljs-keyword">new</span> ChatOptions
{
    ResponseFormat = ChatResponseFormat.ForJsonSchema(schema, <span class="hljs-string">"CompanyInfo"</span>, <span class="hljs-string">"ç»“æ„åŒ–å…¬å¸ä¿¡æ¯"</span>),
    Tools = tools
};

_agent = chatClient.CreateAIAgent(<span class="hljs-keyword">new</span> ChatClientAgentOptions
{
    Instructions = <span class="hljs-string">"..."</span>,
    ChatOptions = chatOptions
});
</code></pre>
<blockquote>
<p>â— æ³¨æ„ï¼š<strong>éƒ¨åˆ†å›½äº§æ¨¡å‹ï¼ˆå¦‚ DeepSeekï¼‰è™½æ–‡æ¡£å£°ç§°æ”¯æŒ <code>response_format: { "type": "json_object" }</code>ï¼Œä½†å®é™…è°ƒç”¨å¯èƒ½æŠ¥é”™</strong>ã€‚å»ºè®®å…ˆéªŒè¯æ¨¡å‹å…¼å®¹æ€§ã€‚</p>
</blockquote>
<h2 data-id="heading-16">å…­ã€æ€»ç»“</h2>
<p>Agent Framework ç›¸æ¯” Semantic Kernelï¼š</p>
<ul>
<li>
<p><strong>ç»“æ„æ›´æ¸…æ™°</strong>ï¼šAgent å³æœåŠ¡ï¼Œå¤©ç„¶å¥‘åˆå¾®æœåŠ¡æ¶æ„ï¼›</p>
</li>
<li>
<p><strong>å¼€å‘æ›´é«˜æ•ˆ</strong>ï¼šå‡å°‘æ¨¡æ¿ä»£ç ï¼ŒPrompt ä¸é€»è¾‘è§£è€¦ï¼›</p>
</li>
<li>
<p><strong>æ‰©å±•æ›´çµæ´»</strong>ï¼šMCPã€è‡ªå®šä¹‰å·¥å…·ã€è®°å¿†ã€å¤š Agent åä½œä¸€åº”ä¿±å…¨ã€‚</p>
</li>
</ul>
<p>å°½ç®¡åœ¨å›½äº§æ¨¡å‹é€‚é…ä¸Šä»æœ‰å°å‘ï¼Œä½†æ•´ä½“ä½“éªŒæ˜¾è‘—ä¼˜äº SKï¼Œ<strong>å¼ºçƒˆæ¨èæ–°é¡¹ç›®ç›´æ¥é‡‡ç”¨ Agent Framework</strong>ã€‚</p>
<p><strong>æœ€ä½³å®è·µ</strong></p>
<ul>
<li>
<p>ä¸€ä¸ªä»»åŠ¡ = ä¸€ä¸ª Agent</p>
</li>
<li>
<p>å·¥å…·è§£è€¦ã€é€šè¿‡ DI æ³¨å…¥</p>
</li>
<li>
<p>åˆ©ç”¨ Thread å®ç°ä¸Šä¸‹æ–‡è®°å¿†</p>
</li>
<li>
<p>ä¼˜å…ˆä½¿ç”¨ç»“æ„åŒ–è¾“å‡ºä¿éšœæ•°æ®å¯é æ€§</p>
</li>
</ul>
<h2 data-id="heading-17">å…³é”®è¯</h2>
<p>Microsoft Agent Frameworkã€Semantic Kernelã€AI Agentã€MCPã€å¤šæ™ºèƒ½ä½“ã€ç»“æ„åŒ–è¾“å‡ºã€.NET AI å¼€å‘</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fdaibitx%2Fp%2F19193204" target="_blank" title="https://www.cnblogs.com/daibitx/p/19193204" ref="nofollow noopener noreferrer">www.cnblogs.com/daibitx/p/1â€¦</a></p>
</blockquote>
<h2 data-id="heading-18">æœ€å</h2>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å¦¨ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ï¼ä½ çš„æ”¯æŒæ˜¯æˆ‘ç»§ç»­åˆ†äº«çŸ¥è¯†çš„åŠ¨åŠ›ã€‚å¦‚æœæœ‰ä»»ä½•ç–‘é—®æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œæ¬¢è¿éšæ—¶ç•™è¨€ã€‚</p>
<p>ä¹Ÿå¯ä»¥åŠ å…¥å¾®ä¿¡å…¬ä¼—å· <strong>[DotNetæŠ€æœ¯åŒ ]</strong> ç¤¾åŒºï¼Œä¸å…¶ä»–çƒ­çˆ±æŠ€æœ¯çš„åŒè¡Œä¸€èµ·äº¤æµå¿ƒå¾—ï¼Œå…±åŒæˆé•¿ï¼</p>
<p><strong>ä¼˜ç§€æ˜¯ä¸€ç§ä¹ æƒ¯ï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€å­¦ä¹ ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‰¾ä½“å®å¹²è´§ | Redis Java å¼€å‘ç³»åˆ—#2 æ•°æ®ç»“æ„]]></title>    <link>https://juejin.cn/post/7579567346390630426</link>    <guid>https://juejin.cn/post/7579567346390630426</guid>    <pubDate>2025-12-04T03:05:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579567346390630426" data-draft-id="7579567346390614042" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‰¾ä½“å®å¹²è´§ | Redis Java å¼€å‘ç³»åˆ—#2 æ•°æ®ç»“æ„"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-04T03:05:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¾ä½“å®IT"/> <meta itemprop="url" content="https://juejin.cn/user/1778389712116601"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‰¾ä½“å®å¹²è´§ | Redis Java å¼€å‘ç³»åˆ—#2 æ•°æ®ç»“æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1778389712116601/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¾ä½“å®IT
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:05:06.000Z" title="Thu Dec 04 2025 03:05:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p><strong>æœ¬ç¯‡è¯»è€…æ”¶ç›Š</strong></p>
<ul>
<li>ç†è§£ Redis äº”å¤§æ•°æ®ç»“æ„çš„ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯</li>
<li>æŒæ¡åœ¨ Java ä¸­é«˜æ•ˆæ“ä½œå„ç§ Redis æ•°æ®ç»“æ„çš„æ–¹æ³•</li>
<li>å­¦ä¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„</li>
<li>äº†è§£æ•°æ®ç»“æ„å±‚é¢çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li>
</ul>
<p><strong>å…ˆä¿®è¦æ±‚</strong></p>
<ul>
<li>å·²å®Œæˆç¬¬ä¸€ç¯‡ç¯å¢ƒæ­å»º</li>
<li>äº†è§£ Redis åŸºæœ¬å‘½ä»¤</li>
<li>ç†Ÿæ‚‰ Java é›†åˆæ¡†æ¶</li>
<li>å…·å¤‡é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€</li>
</ul>
<h3 data-id="heading-1">å…³é”®è¦ç‚¹</h3>
<ol>
<li>å­—ç¬¦ä¸²ä¸ä»…æ˜¯æ–‡æœ¬ï¼Œæ›´æ˜¯è®¡æ•°å™¨ã€ç¼“å­˜å’Œåˆ†å¸ƒå¼é”çš„åŸºç¡€</li>
<li>å“ˆå¸Œé€‚åˆå­˜å‚¨å¯¹è±¡ï¼Œå‡å°‘é”®æ•°é‡ï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨</li>
<li>åˆ—è¡¨å®ç°é˜Ÿåˆ—ã€æ ˆå’Œæ—¶é—´çº¿ï¼Œæ”¯æŒé˜»å¡æ“ä½œ</li>
<li>é›†åˆå¤„ç†å”¯ä¸€æ€§ã€æ ‡ç­¾ç³»ç»Ÿå’Œç¤¾äº¤å…³ç³»</li>
<li>æœ‰åºé›†åˆæ„å»ºæ’è¡Œæ¦œã€å»¶è¿Ÿé˜Ÿåˆ—å’ŒèŒƒå›´æŸ¥è¯¢</li>
</ol>
<h2 data-id="heading-2">èƒŒæ™¯ç®€è¿°</h2>
<p>Redis ä¹‹æ‰€ä»¥èƒ½å¤Ÿæä¾›æé«˜çš„æ€§èƒ½ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå¾—ç›Šäºå…¶ç²¾å¿ƒè®¾è®¡çš„æ•°æ®ç»“æ„ä½“ç³»ã€‚ä¸ä¼ ç»Ÿçš„é”®å€¼å­˜å‚¨ä¸åŒï¼ŒRedis çš„å€¼å¯ä»¥æ˜¯å¤šç§æ•°æ®ç»“æ„ï¼Œæ¯ç§ç»“æ„éƒ½é’ˆå¯¹ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<p>â€‹<strong>Redis æ•°æ®ç»“æ„ä½“ç³»</strong>â€‹ï¼š</p>
<p>ç†è§£è¿™äº›æ•°æ®ç»“æ„çš„ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯ï¼Œæ˜¯é«˜æ•ˆä½¿ç”¨ Redis çš„å…³é”®ã€‚ä¸åŒçš„æ•°æ®ç»“æ„åœ¨å†…å­˜ä½¿ç”¨ã€æ“ä½œå¤æ‚åº¦å’Œé€‚ç”¨åœºæ™¯ä¸Šéƒ½æœ‰æ˜¾è‘—å·®å¼‚ã€‚</p>
<h2 data-id="heading-3">ç¯å¢ƒå‡†å¤‡ä¸å¿«é€Ÿä¸Šæ‰‹</h2>
<p>åœ¨å¼€å§‹æ·±å…¥å­¦ä¹ æ•°æ®ç»“æ„ä¹‹å‰ï¼Œéœ€è¦å·²ç»å»ºç«‹äº† Redis è¿æ¥ã€‚æˆ‘ä»¬åŸºäºç¬¬ä¸€ç¯‡çš„ä¼˜åŒ–è¿æ¥æ± ç»§ç»­æ„å»ºï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisDataStructureBase</span> {
    <span class="hljs-keyword">protected</span> JedisPool jedisPool;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisDataStructureBase</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.jedisPool = OptimizedJedisPool.getJedisPool();
    }
    
    <span class="hljs-comment">// ç»Ÿä¸€çš„èµ„æºæ¸…ç†æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cleanup</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// æ¸…ç†æµ‹è¯•æ•°æ®</span>
            jedis.del(<span class="hljs-string">"test:*"</span>);
        }
    }
}
</code></pre>
<h2 data-id="heading-4">æ ¸å¿ƒç”¨æ³•ä¸ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-5">å­—ç¬¦ä¸²(String)ï¼šä¸ä»…ä»…æ˜¯æ–‡æœ¬</h3>
<p>å­—ç¬¦ä¸²æ˜¯ Redis æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä½†å®ƒçš„åº”ç”¨è¿œä¸æ­¢å­˜å‚¨æ–‡æœ¬é‚£ä¹ˆç®€å•ã€‚</p>
<p>â€‹<strong>å†…å­˜ç»“æ„ä¸ç‰¹æ€§</strong>â€‹ï¼š</p>
<ul>
<li>æœ€å¤§ 512MB å®¹é‡</li>
<li>äºŒè¿›åˆ¶å®‰å…¨ï¼Œå¯å­˜å‚¨ä»»ä½•æ•°æ®</li>
<li>æ”¯æŒæ•°å€¼æ“ä½œå’Œä½æ“ä½œ</li>
<li>å¸¸ç”¨äºç¼“å­˜ã€è®¡æ•°å™¨ã€åˆ†å¸ƒå¼é”</li>
</ul>
<p>â€‹<strong>Java æ“ä½œå®æˆ˜</strong>â€‹ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringOperations</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RedisDataStructureBase</span> {
    
    <span class="hljs-comment">/**
     * åŸºç¡€å­—ç¬¦ä¸²æ“ä½œ - ç¼“å­˜åœºæ™¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">basicStringOperations</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// è®¾ç½®é”®å€¼ - æ™®é€šç¼“å­˜</span>
            jedis.set(<span class="hljs-string">"user:1001:name"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>);
            jedis.set(<span class="hljs-string">"user:1001:email"</span>, <span class="hljs-string">"zhangsan@example.com"</span>);
            
            <span class="hljs-comment">// å¸¦è¿‡æœŸæ—¶é—´çš„ç¼“å­˜ - ä¼šè¯æ•°æ®</span>
            jedis.setex(<span class="hljs-string">"session:abc123"</span>, <span class="hljs-number">3600</span>, <span class="hljs-string">"session_data_json"</span>);
            
            <span class="hljs-comment">// åªæœ‰é”®ä¸å­˜åœ¨æ—¶è®¾ç½® - åˆ†å¸ƒå¼é”åŸºç¡€</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> jedis.setnx(<span class="hljs-string">"resource:lock"</span>, <span class="hljs-string">"locked"</span>) == <span class="hljs-number">1</span>;
            System.out.println(<span class="hljs-string">"è·å–é”ç»“æœ: "</span> + success);
            
            <span class="hljs-comment">// æ‰¹é‡æ“ä½œ - æå‡æ€§èƒ½</span>
            jedis.mset(<span class="hljs-string">"config:timeout"</span>, <span class="hljs-string">"30"</span>, <span class="hljs-string">"config:retries"</span>, <span class="hljs-string">"3"</span>, <span class="hljs-string">"config:theme"</span>, <span class="hljs-string">"dark"</span>);
        }
    }
    
    <span class="hljs-comment">/**
     * è®¡æ•°å™¨åº”ç”¨ - é˜…è¯»é‡ç»Ÿè®¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">counterApplications</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// æ–‡ç« é˜…è¯»è®¡æ•°</span>
            <span class="hljs-type">Long</span> <span class="hljs-variable">views</span> <span class="hljs-operator">=</span> jedis.incr(<span class="hljs-string">"article:1001:views"</span>);
            System.out.println(<span class="hljs-string">"æ–‡ç« é˜…è¯»é‡: "</span> + views);
            
            <span class="hljs-comment">// å¸¦æ­¥é•¿çš„è®¡æ•°</span>
            jedis.incrBy(<span class="hljs-string">"user:1001:points"</span>, <span class="hljs-number">10</span>);
            
            <span class="hljs-comment">// é€’å‡æ“ä½œ</span>
            jedis.decr(<span class="hljs-string">"product:1001:stock"</span>);
            
            <span class="hljs-comment">// è·å–å¹¶è®¾ç½® - åŸå­æ“ä½œ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> jedis.getSet(<span class="hljs-string">"config:version"</span>, <span class="hljs-string">"2.0"</span>);
            System.out.println(<span class="hljs-string">"æ—§ç‰ˆæœ¬: "</span> + oldValue);
        }
    }
    
    <span class="hljs-comment">/**
     * ä½æ“ä½œ - ç”¨æˆ·æ ‡ç­¾ç³»ç»Ÿ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bitOperations</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:2001:tags"</span>;
            
            <span class="hljs-comment">// è®¾ç½®ä½ - æ¯ä¸ªä½ä»£è¡¨ä¸€ä¸ªæ ‡ç­¾</span>
            jedis.setbit(userKey, <span class="hljs-number">0</span>, <span class="hljs-literal">true</span>);  <span class="hljs-comment">// æ ‡ç­¾1: VIPç”¨æˆ·</span>
            jedis.setbit(userKey, <span class="hljs-number">1</span>, <span class="hljs-literal">true</span>);  <span class="hljs-comment">// æ ‡ç­¾2: æ´»è·ƒç”¨æˆ·</span>
            jedis.setbit(userKey, <span class="hljs-number">2</span>, <span class="hljs-literal">false</span>); <span class="hljs-comment">// æ ‡ç­¾3: æ–°ç”¨æˆ·(æœªè®¾ç½®)</span>
            
            <span class="hljs-comment">// æ£€æŸ¥æ ‡ç­¾</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isVip</span> <span class="hljs-operator">=</span> jedis.getbit(userKey, <span class="hljs-number">0</span>);
            System.out.println(<span class="hljs-string">"æ˜¯å¦æ˜¯VIP: "</span> + isVip);
            
            <span class="hljs-comment">// ç»Ÿè®¡è®¾ç½®çš„ä½æ•° - ç”¨æˆ·æ ‡ç­¾æ•°é‡</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">tagCount</span> <span class="hljs-operator">=</span> jedis.bitcount(userKey);
            System.out.println(<span class="hljs-string">"ç”¨æˆ·æ ‡ç­¾æ•°é‡: "</span> + tagCount);
        }
    }
}
</code></pre>
<p>â€‹<strong>åº”ç”¨åœºæ™¯åˆ†æ</strong>â€‹ï¼š</p>
<ol>
<li>â€‹<strong>ç¼“å­˜ç³»ç»Ÿ</strong>â€‹ï¼šå­˜å‚¨åºåˆ—åŒ–çš„å¯¹è±¡ã€HTML ç‰‡æ®µ</li>
<li>â€‹<strong>è®¡æ•°å™¨</strong>â€‹ï¼šç½‘ç«™è®¿é—®é‡ã€ç”¨æˆ·ç§¯åˆ†ã€å•†å“åº“å­˜</li>
<li>â€‹<strong>åˆ†å¸ƒå¼é”</strong>â€‹ï¼šåŸºäº SETNX å®ç°äº’æ–¥è®¿é—®</li>
<li>â€‹<strong>ä¼šè¯å­˜å‚¨</strong>â€‹ï¼šç”¨æˆ·ç™»å½•çŠ¶æ€ã€ä¸´æ—¶é…ç½®</li>
<li>â€‹<strong>ä½å›¾ç»Ÿè®¡</strong>â€‹ï¼šç”¨æˆ·æ ‡ç­¾ã€æ´»è·ƒåº¦ç»Ÿè®¡</li>
</ol>
<h3 data-id="heading-6">å“ˆå¸Œ(Hash)ï¼šå¯¹è±¡å­˜å‚¨çš„æœ€ä½³é€‰æ‹©</h3>
<p>å“ˆå¸Œç±»å‹é€‚åˆå­˜å‚¨å¯¹è±¡ï¼Œå¯ä»¥å°†å¤šä¸ªå­—æ®µç»„åˆåœ¨ä¸€ä¸ªé”®ä¸­ï¼Œå‡å°‘é”®çš„æ•°é‡ï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨ã€‚</p>
<p>â€‹<strong>å†…å­˜ä¼˜åŒ–åŸç†</strong>â€‹ï¼š</p>
<ul>
<li>å°å“ˆå¸Œä½¿ç”¨ ziplist ç¼–ç ï¼Œå†…å­˜ç´§å‡‘</li>
<li>å­—æ®µæ•°é‡å°‘æ—¶ï¼Œæ¯”å¤šä¸ªå­—ç¬¦ä¸²é”®æ›´èŠ‚çœå†…å­˜</li>
<li>é€‚åˆå­˜å‚¨ç»“æ„åŒ–æ•°æ®</li>
</ul>
<p>â€‹<strong>Java æ“ä½œå®æˆ˜</strong>â€‹ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashOperations</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RedisDataStructureBase</span> {
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·å¯¹è±¡å­˜å‚¨ç¤ºä¾‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">userObjectStorage</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:3001"</span>;
            
            <span class="hljs-comment">// å•ä¸ªå­—æ®µè®¾ç½®</span>
            jedis.hset(userKey, <span class="hljs-string">"name"</span>, <span class="hljs-string">"æå››"</span>);
            jedis.hset(userKey, <span class="hljs-string">"age"</span>, <span class="hljs-string">"28"</span>);
            jedis.hset(userKey, <span class="hljs-string">"email"</span>, <span class="hljs-string">"lisi@example.com"</span>);
            
            <span class="hljs-comment">// æ‰¹é‡è®¾ç½®å­—æ®µ - æ€§èƒ½æ›´ä¼˜</span>
            Map&lt;String, String&gt; userFields = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            userFields.put(<span class="hljs-string">"department"</span>, <span class="hljs-string">"æŠ€æœ¯éƒ¨"</span>);
            userFields.put(<span class="hljs-string">"position"</span>, <span class="hljs-string">"é«˜çº§å·¥ç¨‹å¸ˆ"</span>);
            userFields.put(<span class="hljs-string">"salary"</span>, <span class="hljs-string">"15000"</span>);
            jedis.hmset(userKey, userFields);
            
            <span class="hljs-comment">// è·å–å•ä¸ªå­—æ®µ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">userName</span> <span class="hljs-operator">=</span> jedis.hget(userKey, <span class="hljs-string">"name"</span>);
            System.out.println(<span class="hljs-string">"ç”¨æˆ·å§“å: "</span> + userName);
            
            <span class="hljs-comment">// è·å–å¤šä¸ªå­—æ®µ</span>
            List&lt;String&gt; userInfo = jedis.hmget(userKey, <span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>, <span class="hljs-string">"department"</span>);
            System.out.println(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯: "</span> + userInfo);
            
            <span class="hljs-comment">// è·å–æ‰€æœ‰å­—æ®µ - å°å¿ƒå¤§å¯¹è±¡</span>
            Map&lt;String, String&gt; allFields = jedis.hgetAll(userKey);
            System.out.println(<span class="hljs-string">"å®Œæ•´ç”¨æˆ·ä¿¡æ¯: "</span> + allFields);
            
            <span class="hljs-comment">// å­—æ®µé€’å¢ - ç”¨æˆ·ç§¯åˆ†</span>
            <span class="hljs-type">Long</span> <span class="hljs-variable">newPoints</span> <span class="hljs-operator">=</span> jedis.hincrBy(userKey, <span class="hljs-string">"points"</span>, <span class="hljs-number">5</span>);
            System.out.println(<span class="hljs-string">"æ–°ç§¯åˆ†: "</span> + newPoints);
        }
    }
    
    <span class="hljs-comment">/**
     * è´­ç‰©è½¦å®ç°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shoppingCartExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">cartKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"cart:user:4001"</span>;
            
            <span class="hljs-comment">// æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦</span>
            jedis.hset(cartKey, <span class="hljs-string">"product:1001"</span>, <span class="hljs-string">"2"</span>); <span class="hljs-comment">// å•†å“ID:1001, æ•°é‡:2</span>
            jedis.hset(cartKey, <span class="hljs-string">"product:1002"</span>, <span class="hljs-string">"1"</span>);
            jedis.hset(cartKey, <span class="hljs-string">"product:1003"</span>, <span class="hljs-string">"3"</span>);
            
            <span class="hljs-comment">// æ›´æ–°å•†å“æ•°é‡</span>
            jedis.hincrBy(cartKey, <span class="hljs-string">"product:1001"</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// å¢åŠ 1ä¸ª</span>
            
            <span class="hljs-comment">// ç§»é™¤å•†å“</span>
            jedis.hdel(cartKey, <span class="hljs-string">"product:1002"</span>);
            
            <span class="hljs-comment">// è·å–è´­ç‰©è½¦å•†å“æ•°é‡</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">itemCount</span> <span class="hljs-operator">=</span> jedis.hlen(cartKey);
            System.out.println(<span class="hljs-string">"è´­ç‰©è½¦å•†å“ç§ç±»: "</span> + itemCount);
            
            <span class="hljs-comment">// è·å–è´­ç‰©è½¦æ‰€æœ‰å•†å“</span>
            Map&lt;String, String&gt; cartItems = jedis.hgetAll(cartKey);
            System.out.println(<span class="hljs-string">"è´­ç‰©è½¦å†…å®¹: "</span> + cartItems);
        }
    }
    
    <span class="hljs-comment">/**
     * å¯¹è±¡åºåˆ—åŒ–å·¥å…·æ–¹æ³•
     */</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">storeObject</span><span class="hljs-params">(String key, T obj, Class&lt;T&gt; clazz)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
            Map&lt;String, String&gt; fieldMap = mapper.convertValue(obj, 
                mapper.getTypeFactory().constructMapType(Map.class, String.class, String.class));
            jedis.hmset(key, fieldMap);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å¯¹è±¡å­˜å‚¨å¤±è´¥"</span>, e);
        }
    }
    
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getObject</span><span class="hljs-params">(String key, Class&lt;T&gt; clazz)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            Map&lt;String, String&gt; fieldMap = jedis.hgetAll(key);
            <span class="hljs-keyword">if</span> (fieldMap.isEmpty()) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
            <span class="hljs-keyword">return</span> mapper.convertValue(fieldMap, clazz);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å¯¹è±¡è·å–å¤±è´¥"</span>, e);
        }
    }
}
</code></pre>
<p>â€‹<strong>åº”ç”¨åœºæ™¯åˆ†æ</strong>â€‹ï¼š</p>
<ol>
<li>â€‹<strong>ç”¨æˆ·ä¿¡æ¯å­˜å‚¨</strong>â€‹ï¼šç”¨æˆ·å±æ€§å­—æ®µåŠ¨æ€æ›´æ–°</li>
<li>â€‹<strong>è´­ç‰©è½¦ç³»ç»Ÿ</strong>â€‹ï¼šå•†å“ ID å’Œæ•°é‡çš„æ˜ å°„</li>
<li>â€‹<strong>é…ç½®ä¿¡æ¯</strong>â€‹ï¼šåº”ç”¨çš„åŠ¨æ€é…ç½®é¡¹</li>
<li>â€‹<strong>å¯¹è±¡ç¼“å­˜</strong>â€‹ï¼šç»“æ„åŒ–æ•°æ®çš„åºåˆ—åŒ–å­˜å‚¨</li>
<li>â€‹<strong>è®¡æ•°å™¨ç»„</strong>â€‹ï¼šå¤šä¸ªç›¸å…³è®¡æ•°å™¨çš„é›†åˆ</li>
</ol>
<h3 data-id="heading-7">åˆ—è¡¨(List)ï¼šé˜Ÿåˆ—ä¸æ—¶é—´çº¿çš„å®ç°</h3>
<p>Redis åˆ—è¡¨åŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œæ”¯æŒä»ä¸¤ç«¯å¿«é€Ÿæ’å…¥å’Œåˆ é™¤ï¼Œæ˜¯å®ç°é˜Ÿåˆ—ã€æ ˆå’Œæ—¶é—´çº¿çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<p>â€‹<strong>æ•°æ®ç»“æ„ç‰¹æ€§</strong>â€‹ï¼š</p>
<ul>
<li>æœ€å¤§å…ƒç´ æ•°ï¼š2Â³Â² - 1 ä¸ª</li>
<li>ä¸¤ç«¯æ“ä½œæ—¶é—´å¤æ‚åº¦ O(1)</li>
<li>æ”¯æŒé˜»å¡æ“ä½œï¼Œé€‚åˆæ¶ˆæ¯é˜Ÿåˆ—</li>
<li>ç´¢å¼•æ“ä½œæ—¶é—´å¤æ‚åº¦ O(n)</li>
</ul>
<p>â€‹<strong>Java æ“ä½œå®æˆ˜</strong>â€‹ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ListOperations</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RedisDataStructureBase</span> {
    
    <span class="hljs-comment">/**
     * æ¶ˆæ¯é˜Ÿåˆ—å®ç°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">messageQueueExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">queueKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"queue:notifications"</span>;
            
            <span class="hljs-comment">// ç”Ÿäº§è€…ï¼šä»å·¦ä¾§æ¨å…¥æ¶ˆæ¯</span>
            jedis.lpush(queueKey, <span class="hljs-string">"æ¶ˆæ¯1: ç”¨æˆ·æ³¨å†ŒæˆåŠŸ"</span>);
            jedis.lpush(queueKey, <span class="hljs-string">"æ¶ˆæ¯2: è®¢å•åˆ›å»ºå®Œæˆ"</span>);
            jedis.lpush(queueKey, <span class="hljs-string">"æ¶ˆæ¯3: æ”¯ä»˜æˆåŠŸ"</span>);
            
            <span class="hljs-comment">// æ¶ˆè´¹è€…ï¼šä»å³ä¾§å¼¹å‡ºæ¶ˆæ¯</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> jedis.rpop(queueKey);
            <span class="hljs-keyword">while</span> (message != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"å¤„ç†æ¶ˆæ¯: "</span> + message);
                message = jedis.rpop(queueKey);
            }
        }
    }
    
    <span class="hljs-comment">/**
     * é˜»å¡é˜Ÿåˆ— - å®æ—¶æ¶ˆæ¯å¤„ç†
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">blockingQueueExample</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">queueKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"queue:real-time"</span>;
        
        <span class="hljs-comment">// ç”Ÿäº§è€…çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
                    jedis.lpush(queueKey, <span class="hljs-string">"å®æ—¶æ¶ˆæ¯_"</span> + i);
                    System.out.println(<span class="hljs-string">"ç”Ÿäº§æ¶ˆæ¯: å®æ—¶æ¶ˆæ¯_"</span> + i);
                    Thread.sleep(<span class="hljs-number">1000</span>);
                }
            } <span class="hljs-keyword">catch</span> (Exception e) {
                e.printStackTrace();
            }
        });
        
        <span class="hljs-comment">// æ¶ˆè´¹è€…çº¿ç¨‹ - é˜»å¡ç­‰å¾…</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
                    <span class="hljs-comment">// é˜»å¡å¼å¼¹å‡ºï¼Œæœ€å¤šç­‰å¾…10ç§’</span>
                    List&lt;String&gt; messages = jedis.blpop(<span class="hljs-number">10</span>, queueKey);
                    <span class="hljs-keyword">if</span> (messages != <span class="hljs-literal">null</span>) {
                        System.out.println(<span class="hljs-string">"æ¶ˆè´¹æ¶ˆæ¯: "</span> + messages.get(<span class="hljs-number">1</span>));
                    }
                }
            }
        });
        
        producer.start();
        consumer.start();
    }
    
    <span class="hljs-comment">/**
     * æœ€æ–°æ¶ˆæ¯æ—¶é—´çº¿
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">timelineExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">timelineKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"timeline:user:5001"</span>;
            
            <span class="hljs-comment">// æ·»åŠ åŠ¨æ€åˆ°æ—¶é—´çº¿</span>
            jedis.lpush(timelineKey, 
                <span class="hljs-string">"{\"type\": \"post\", \"content\": \"å‘å¸ƒäº†æ–°æ–‡ç« \", \"time\": \"2024-01-15 10:00:00\"}"</span>,
                <span class="hljs-string">"{\"type\": \"like\", \"content\": \"ç‚¹èµäº†æ–‡ç« \", \"time\": \"2024-01-15 09:30:00\"}"</span>,
                <span class="hljs-string">"{\"type\": \"comment\", \"content\": \"å‘è¡¨äº†è¯„è®º\", \"time\": \"2024-01-15 09:00:00\"}"</span>
            );
            
            <span class="hljs-comment">// é™åˆ¶æ—¶é—´çº¿é•¿åº¦ï¼Œé˜²æ­¢æ— é™å¢é•¿</span>
            jedis.ltrim(timelineKey, <span class="hljs-number">0</span>, <span class="hljs-number">99</span>); <span class="hljs-comment">// åªä¿ç•™æœ€æ–°100æ¡</span>
            
            <span class="hljs-comment">// åˆ†é¡µè·å–æ—¶é—´çº¿</span>
            List&lt;String&gt; recentActivities = jedis.lrange(timelineKey, <span class="hljs-number">0</span>, <span class="hljs-number">9</span>);
            System.out.println(<span class="hljs-string">"æœ€è¿‘10æ¡åŠ¨æ€: "</span> + recentActivities);
            
            <span class="hljs-comment">// è·å–æ—¶é—´çº¿é•¿åº¦</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">timelineLength</span> <span class="hljs-operator">=</span> jedis.llen(timelineKey);
            System.out.println(<span class="hljs-string">"æ—¶é—´çº¿é•¿åº¦: "</span> + timelineLength);
        }
    }
    
    <span class="hljs-comment">/**
     * æ ˆ(Stack)å®ç° - åè¿›å…ˆå‡º
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stackExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">stackKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"stack:operations"</span>;
            
            <span class="hljs-comment">// å‹æ ˆæ“ä½œ</span>
            jedis.lpush(stackKey, <span class="hljs-string">"æ“ä½œ1"</span>, <span class="hljs-string">"æ“ä½œ2"</span>, <span class="hljs-string">"æ“ä½œ3"</span>);
            
            <span class="hljs-comment">// å¼¹æ ˆæ“ä½œ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">operation</span> <span class="hljs-operator">=</span> jedis.lpop(stackKey);
            <span class="hljs-keyword">while</span> (operation != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"æ‰§è¡Œæ“ä½œ: "</span> + operation);
                operation = jedis.lpop(stackKey);
            }
        }
    }
}
</code></pre>
<p>â€‹<strong>åº”ç”¨åœºæ™¯åˆ†æ</strong>â€‹ï¼š</p>
<ol>
<li>â€‹<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>â€‹ï¼šç³»ç»Ÿé—´å¼‚æ­¥é€šä¿¡</li>
<li>â€‹<strong>æ—¶é—´çº¿</strong>â€‹ï¼šç”¨æˆ·åŠ¨æ€ã€æ–°é—»æµ</li>
<li>â€‹<strong>æ“ä½œæ—¥å¿—</strong>â€‹ï¼šç”¨æˆ·æ“ä½œè®°å½•</li>
<li>â€‹<strong>ä»»åŠ¡é˜Ÿåˆ—</strong>â€‹ï¼šåå°ä»»åŠ¡å¤„ç†</li>
<li>â€‹<strong>æœ€æ–°åˆ—è¡¨</strong>â€‹ï¼šæœ€æ–°æ–‡ç« ã€æœ€æ–°è¯„è®º</li>
</ol>
<h3 data-id="heading-8">é›†åˆ(Set)ï¼šå”¯ä¸€æ€§ä¸å…³ç³»è¿ç®—</h3>
<p>Redis é›†åˆå­˜å‚¨ä¸é‡å¤çš„å­—ç¬¦ä¸²å…ƒç´ ï¼Œæ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰å…³ç³»è¿ç®—ï¼Œæ˜¯å¤„ç†å”¯ä¸€æ€§å’Œé›†åˆå…³ç³»çš„åˆ©å™¨ã€‚</p>
<p>â€‹<strong>æ€§èƒ½ç‰¹ç‚¹</strong>â€‹ï¼š</p>
<ul>
<li>æ·»åŠ ã€åˆ é™¤ã€æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ O(1)</li>
<li>æ”¯æŒé›†åˆé—´è¿ç®—</li>
<li>æœ€å¤§å…ƒç´ æ•°ï¼š2Â³Â² - 1 ä¸ª</li>
<li>å†…éƒ¨å®ç°ï¼šæ•´æ•°é›†åˆæˆ–å“ˆå¸Œè¡¨</li>
</ul>
<p>â€‹<strong>Java æ“ä½œå®æˆ˜</strong>â€‹ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SetOperations</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RedisDataStructureBase</span> {
    
    <span class="hljs-comment">/**
     * æ ‡ç­¾ç³»ç»Ÿå®ç°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tagSystemExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// æ–‡ç« æ ‡ç­¾</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">articleTagsKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"article:6001:tags"</span>;
            jedis.sadd(articleTagsKey, <span class="hljs-string">"æŠ€æœ¯"</span>, <span class="hljs-string">"Redis"</span>, <span class="hljs-string">"æ•°æ®åº“"</span>, <span class="hljs-string">"é«˜æ€§èƒ½"</span>);
            
            <span class="hljs-comment">// ç”¨æˆ·å…´è¶£æ ‡ç­¾</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">userInterestsKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:6001:interests"</span>;
            jedis.sadd(userInterestsKey, <span class="hljs-string">"æŠ€æœ¯"</span>, <span class="hljs-string">"ç¼–ç¨‹"</span>, <span class="hljs-string">"Redis"</span>, <span class="hljs-string">"Java"</span>);
            
            <span class="hljs-comment">// æ£€æŸ¥æ–‡ç« æ˜¯å¦åŒ…å«æŸä¸ªæ ‡ç­¾</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">hasTechTag</span> <span class="hljs-operator">=</span> jedis.sismember(articleTagsKey, <span class="hljs-string">"æŠ€æœ¯"</span>);
            System.out.println(<span class="hljs-string">"æ–‡ç« æ˜¯å¦åŒ…å«æŠ€æœ¯æ ‡ç­¾: "</span> + hasTechTag);
            
            <span class="hljs-comment">// è·å–å…±åŒå…´è¶£ - é›†åˆäº¤é›†</span>
            Set&lt;String&gt; commonTags = jedis.sinter(articleTagsKey, userInterestsKey);
            System.out.println(<span class="hljs-string">"å…±åŒæ ‡ç­¾: "</span> + commonTags);
            
            <span class="hljs-comment">// è·å–æ‰€æœ‰æ ‡ç­¾ - é›†åˆå¹¶é›†</span>
            Set&lt;String&gt; allTags = jedis.sunion(articleTagsKey, userInterestsKey);
            System.out.println(<span class="hljs-string">"æ‰€æœ‰æ ‡ç­¾: "</span> + allTags);
            
            <span class="hljs-comment">// è·å–æ–‡ç« ç‰¹æœ‰æ ‡ç­¾ - é›†åˆå·®é›†</span>
            Set&lt;String&gt; articleOnlyTags = jedis.sdiff(articleTagsKey, userInterestsKey);
            System.out.println(<span class="hljs-string">"æ–‡ç« ç‰¹æœ‰æ ‡ç­¾: "</span> + articleOnlyTags);
        }
    }
    
    <span class="hljs-comment">/**
     * å¥½å‹å…³ç³»ä¸ç¤¾äº¤ç½‘ç»œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">socialNetworkExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userAFriends</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:7001:friends"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">userBFriends</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:7002:friends"</span>;
            
            <span class="hljs-comment">// æ·»åŠ å¥½å‹</span>
            jedis.sadd(userAFriends, <span class="hljs-string">"7002"</span>, <span class="hljs-string">"7003"</span>, <span class="hljs-string">"7004"</span>);
            jedis.sadd(userBFriends, <span class="hljs-string">"7001"</span>, <span class="hljs-string">"7005"</span>, <span class="hljs-string">"7006"</span>);
            
            <span class="hljs-comment">// å…±åŒå¥½å‹</span>
            Set&lt;String&gt; mutualFriends = jedis.sinter(userAFriends, userBFriends);
            System.out.println(<span class="hljs-string">"å…±åŒå¥½å‹: "</span> + mutualFriends);
            
            <span class="hljs-comment">// å¯èƒ½è®¤è¯†çš„äºº - å¥½å‹çš„å¥½å‹</span>
            Set&lt;String&gt; potentialFriends = jedis.sdiff(userBFriends, userAFriends);
            potentialFriends.remove(<span class="hljs-string">"7001"</span>); <span class="hljs-comment">// æ’é™¤è‡ªå·±</span>
            System.out.println(<span class="hljs-string">"å¯èƒ½è®¤è¯†çš„äºº: "</span> + potentialFriends);
            
            <span class="hljs-comment">// ç»Ÿè®¡å¥½å‹æ•°é‡</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">friendCount</span> <span class="hljs-operator">=</span> jedis.scard(userAFriends);
            System.out.println(<span class="hljs-string">"ç”¨æˆ·Aå¥½å‹æ•°é‡: "</span> + friendCount);
            
            <span class="hljs-comment">// éšæœºæ¨èå¥½å‹</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">randomFriend</span> <span class="hljs-operator">=</span> jedis.srandmember(userAFriends);
            System.out.println(<span class="hljs-string">"éšæœºå¥½å‹æ¨è: "</span> + randomFriend);
        }
    }
    
    <span class="hljs-comment">/**
     * å”¯ä¸€å€¼å¤„ç† - ç”¨æˆ·æŠ•ç¥¨ç³»ç»Ÿ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uniqueValueExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">votersKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"poll:8001:voters"</span>;
            
            <span class="hljs-comment">// ç”¨æˆ·æŠ•ç¥¨ - è‡ªåŠ¨å»é‡</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">result1</span> <span class="hljs-operator">=</span> jedis.sadd(votersKey, <span class="hljs-string">"user:9001"</span>);
            <span class="hljs-type">long</span> <span class="hljs-variable">result2</span> <span class="hljs-operator">=</span> jedis.sadd(votersKey, <span class="hljs-string">"user:9002"</span>);
            <span class="hljs-type">long</span> <span class="hljs-variable">result3</span> <span class="hljs-operator">=</span> jedis.sadd(votersKey, <span class="hljs-string">"user:9001"</span>); <span class="hljs-comment">// é‡å¤æŠ•ç¥¨</span>
            
            System.out.println(<span class="hljs-string">"ç¬¬ä¸€æ¬¡æŠ•ç¥¨ç»“æœ: "</span> + (result1 == <span class="hljs-number">1</span> ? <span class="hljs-string">"æˆåŠŸ"</span> : <span class="hljs-string">"å¤±è´¥"</span>));
            System.out.println(<span class="hljs-string">"ç¬¬äºŒæ¬¡æŠ•ç¥¨ç»“æœ: "</span> + (result2 == <span class="hljs-number">1</span> ? <span class="hljs-string">"æˆåŠŸ"</span> : <span class="hljs-string">"å¤±è´¥"</span>));
            System.out.println(<span class="hljs-string">"ç¬¬ä¸‰æ¬¡æŠ•ç¥¨ç»“æœ: "</span> + (result3 == <span class="hljs-number">1</span> ? <span class="hljs-string">"æˆåŠŸ"</span> : <span class="hljs-string">"å¤±è´¥"</span>));
            
            <span class="hljs-comment">// è·å–æ‰€æœ‰æŠ•ç¥¨ç”¨æˆ·</span>
            Set&lt;String&gt; allVoters = jedis.smembers(votersKey);
            System.out.println(<span class="hljs-string">"æ‰€æœ‰æŠ•ç¥¨ç”¨æˆ·: "</span> + allVoters);
            
            <span class="hljs-comment">// ç»Ÿè®¡æŠ•ç¥¨äººæ•°</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">voterCount</span> <span class="hljs-operator">=</span> jedis.scard(votersKey);
            System.out.println(<span class="hljs-string">"æ€»æŠ•ç¥¨äººæ•°: "</span> + voterCount);
        }
    }
    
    <span class="hljs-comment">/**
     * æŠ½å¥–ç³»ç»Ÿ - éšæœºæŠ½å–
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">lotterySystemExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">participantsKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lottery:9001:participants"</span>;
            
            <span class="hljs-comment">// æ·»åŠ å‚ä¸è€…</span>
            jedis.sadd(participantsKey, 
                <span class="hljs-string">"user:10001"</span>, <span class="hljs-string">"user:10002"</span>, <span class="hljs-string">"user:10003"</span>, 
                <span class="hljs-string">"user:10004"</span>, <span class="hljs-string">"user:10005"</span>, <span class="hljs-string">"user:10006"</span>
            );
            
            <span class="hljs-comment">// éšæœºæŠ½å–3åè·å¥–è€…ï¼ˆä¸é‡å¤ï¼‰</span>
            List&lt;String&gt; winners = jedis.srandmember(participantsKey, <span class="hljs-number">3</span>);
            System.out.println(<span class="hljs-string">"è·å¥–ç”¨æˆ·: "</span> + winners);
            
            <span class="hljs-comment">// éšæœºæŠ½å–å¹¶ç§»é™¤ï¼ˆæŠ½å¥–åç§»é™¤ï¼‰</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">grandPrizeWinner</span> <span class="hljs-operator">=</span> jedis.spop(participantsKey);
            System.out.println(<span class="hljs-string">"ç‰¹ç­‰å¥–è·å¾—è€…: "</span> + grandPrizeWinner);
            
            <span class="hljs-comment">// å‰©ä½™å‚ä¸è€…æ•°é‡</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">remaining</span> <span class="hljs-operator">=</span> jedis.scard(participantsKey);
            System.out.println(<span class="hljs-string">"å‰©ä½™å‚ä¸è€…: "</span> + remaining);
        }
    }
}
</code></pre>
<p>â€‹<strong>åº”ç”¨åœºæ™¯åˆ†æ</strong>â€‹ï¼š</p>
<ol>
<li>â€‹<strong>æ ‡ç­¾ç³»ç»Ÿ</strong>â€‹ï¼šæ–‡ç« æ ‡ç­¾ã€ç”¨æˆ·å…´è¶£</li>
<li>â€‹<strong>ç¤¾äº¤å…³ç³»</strong>â€‹ï¼šå¥½å‹åˆ—è¡¨ã€å…³æ³¨å…³ç³»</li>
<li>â€‹<strong>å”¯ä¸€å€¼å¤„ç†</strong>â€‹ï¼šç”¨æˆ·æŠ•ç¥¨ã€è®¿é—® IP è®°å½•</li>
<li>â€‹<strong>æ•°æ®è¿‡æ»¤</strong>â€‹ï¼šå·²è¯»æ–‡ç« ã€å·²å¤„ç†ä»»åŠ¡</li>
<li>â€‹<strong>éšæœºæŠ½æ ·</strong>â€‹ï¼šæŠ½å¥–ç³»ç»Ÿã€AB æµ‹è¯•</li>
</ol>
<h3 data-id="heading-9">æœ‰åºé›†åˆ(ZSet)ï¼šæ’è¡Œæ¦œä¸èŒƒå›´æŸ¥è¯¢</h3>
<p>æœ‰åºé›†åˆä¸ºæ¯ä¸ªå…ƒç´ å…³è”ä¸€ä¸ªåˆ†æ•°(score)ï¼Œæ”¯æŒæŒ‰åˆ†æ•°æ’åºå’ŒèŒƒå›´æŸ¥è¯¢ï¼Œæ˜¯å®ç°æ’è¡Œæ¦œã€å»¶è¿Ÿé˜Ÿåˆ—çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<p>â€‹<strong>æ’åºåŸç†</strong>â€‹ï¼š</p>
<ul>
<li>è·³è·ƒè¡¨(skiplist)å®ç°ï¼ŒæŸ¥è¯¢æ•ˆç‡ O(logN)</li>
<li>å…ƒç´ æŒ‰åˆ†æ•°ä»å°åˆ°å¤§æ’åº</li>
<li>åˆ†æ•°å¯é‡å¤ï¼Œå…ƒç´ å”¯ä¸€</li>
<li>æ”¯æŒæŒ‰åˆ†æ•°èŒƒå›´ã€æŒ‰æ’åèŒƒå›´æŸ¥è¯¢</li>
</ul>
<p>â€‹<strong>Java æ“ä½œå®æˆ˜</strong>â€‹ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SortedSetOperations</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RedisDataStructureBase</span> {
    
    <span class="hljs-comment">/**
     * æ¸¸æˆæ’è¡Œæ¦œå®ç°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">leaderboardExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">leaderboardKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"leaderboard:game:10001"</span>;
            
            <span class="hljs-comment">// æ·»åŠ ç©å®¶åˆ†æ•°</span>
            jedis.zadd(leaderboardKey, <span class="hljs-number">1500.0</span>, <span class="hljs-string">"player:1001"</span>);
            jedis.zadd(leaderboardKey, <span class="hljs-number">1800.5</span>, <span class="hljs-string">"player:1002"</span>);
            jedis.zadd(leaderboardKey, <span class="hljs-number">2200.0</span>, <span class="hljs-string">"player:1003"</span>);
            jedis.zadd(leaderboardKey, <span class="hljs-number">1900.0</span>, <span class="hljs-string">"player:1004"</span>);
            jedis.zadd(leaderboardKey, <span class="hljs-number">2100.0</span>, <span class="hljs-string">"player:1005"</span>);
            
            <span class="hljs-comment">// æ›´æ–°ç©å®¶åˆ†æ•°</span>
            jedis.zincrby(leaderboardKey, <span class="hljs-number">100.0</span>, <span class="hljs-string">"player:1001"</span>); <span class="hljs-comment">// å¢åŠ 100åˆ†</span>
            
            <span class="hljs-comment">// è·å–top3ç©å®¶</span>
            List&lt;String&gt; topPlayers = jedis.zrevrange(leaderboardKey, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
            System.out.println(<span class="hljs-string">"æ’è¡Œæ¦œå‰ä¸‰å: "</span> + topPlayers);
            
            <span class="hljs-comment">// è·å–ç©å®¶æ’åï¼ˆä»0å¼€å§‹ï¼Œåˆ†æ•°ä»é«˜åˆ°ä½ï¼‰</span>
            <span class="hljs-type">Long</span> <span class="hljs-variable">playerRank</span> <span class="hljs-operator">=</span> jedis.zrevrank(leaderboardKey, <span class="hljs-string">"player:1001"</span>);
            System.out.println(<span class="hljs-string">"ç©å®¶1001çš„æ’å: "</span> + (playerRank != <span class="hljs-literal">null</span> ? playerRank + <span class="hljs-number">1</span> : <span class="hljs-string">"æœªä¸Šæ¦œ"</span>));
            
            <span class="hljs-comment">// è·å–ç©å®¶åˆ†æ•°</span>
            <span class="hljs-type">Double</span> <span class="hljs-variable">playerScore</span> <span class="hljs-operator">=</span> jedis.zscore(leaderboardKey, <span class="hljs-string">"player:1001"</span>);
            System.out.println(<span class="hljs-string">"ç©å®¶1001çš„åˆ†æ•°: "</span> + playerScore);
            
            <span class="hljs-comment">// è·å–åˆ†æ•°åŒºé—´å†…çš„ç©å®¶ï¼ˆ1800-2100åˆ†ï¼‰</span>
            Set&lt;String&gt; rangePlayers = jedis.zrangeByScore(leaderboardKey, <span class="hljs-number">1800</span>, <span class="hljs-number">2100</span>);
            System.out.println(<span class="hljs-string">"1800-2100åˆ†æ•°æ®µç©å®¶: "</span> + rangePlayers);
        }
    }
    
    <span class="hljs-comment">/**
     * å»¶è¿Ÿé˜Ÿåˆ—å®ç°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delayedQueueExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">delayedQueueKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"queue:delayed:tasks"</span>;
            
            <span class="hljs-comment">// å½“å‰æ—¶é—´æˆ³</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            
            <span class="hljs-comment">// æ·»åŠ å»¶è¿Ÿä»»åŠ¡ï¼ˆåˆ†æ•°ä¸ºæ‰§è¡Œæ—¶é—´æˆ³ï¼‰</span>
            jedis.zadd(delayedQueueKey, currentTime + <span class="hljs-number">5000</span>, <span class="hljs-string">"task:process_order:1001"</span>);    <span class="hljs-comment">// 5ç§’åæ‰§è¡Œ</span>
            jedis.zadd(delayedQueueKey, currentTime + <span class="hljs-number">10000</span>, <span class="hljs-string">"task:send_email:1001"</span>);      <span class="hljs-comment">// 10ç§’åæ‰§è¡Œ</span>
            jedis.zadd(delayedQueueKey, currentTime + <span class="hljs-number">15000</span>, <span class="hljs-string">"task:cleanup_cache:1001"</span>);   <span class="hljs-comment">// 15ç§’åæ‰§è¡Œ</span>
            
            <span class="hljs-comment">// å¤„ç†åˆ°æœŸä»»åŠ¡çš„å·¥ä½œçº¿ç¨‹</span>
            <span class="hljs-type">Thread</span> <span class="hljs-variable">worker</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">workerJedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
                    <span class="hljs-keyword">while</span> (!Thread.currentThread().isInterrupted()) {
                        <span class="hljs-type">long</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
                        
                        <span class="hljs-comment">// è·å–æ‰€æœ‰åˆ°æœŸçš„ä»»åŠ¡ï¼ˆåˆ†æ•°å°äºç­‰äºå½“å‰æ—¶é—´ï¼‰</span>
                        Set&lt;String&gt; readyTasks = workerJedis.zrangeByScore(delayedQueueKey, <span class="hljs-number">0</span>, now);
                        
                        <span class="hljs-keyword">for</span> (String task : readyTasks) {
                            <span class="hljs-comment">// å¤„ç†ä»»åŠ¡</span>
                            System.out.println(<span class="hljs-string">"æ‰§è¡Œä»»åŠ¡: "</span> + task + <span class="hljs-string">" at "</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(now));
                            
                            <span class="hljs-comment">// ä»é˜Ÿåˆ—ä¸­ç§»é™¤å·²å¤„ç†ä»»åŠ¡</span>
                            workerJedis.zrem(delayedQueueKey, task);
                        }
                        
                        <span class="hljs-keyword">if</span> (readyTasks.isEmpty()) {
                            <span class="hljs-comment">// æ²¡æœ‰ä»»åŠ¡ï¼Œä¼‘çœ 1ç§’</span>
                            Thread.sleep(<span class="hljs-number">1000</span>);
                        }
                    }
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    e.printStackTrace();
                }
            });
            
            worker.start();
            
            <span class="hljs-comment">// è¿è¡Œ10ç§’ååœæ­¢</span>
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">10000</span>);
                worker.interrupt();
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
    }
    
    <span class="hljs-comment">/**
     * æ—¶é—´åºåˆ—æ•°æ® - è‚¡ç¥¨ä»·æ ¼è®°å½•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">timeSeriesExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">stockPriceKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"stock:AAPL:prices"</span>;
            
            <span class="hljs-comment">// è®°å½•ä¸åŒæ—¶é—´ç‚¹çš„è‚¡ä»·ï¼ˆæ—¶é—´æˆ³ä½œä¸ºåˆ†æ•°ï¼‰</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">baseTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            jedis.zadd(stockPriceKey, baseTime, <span class="hljs-string">"150.25"</span>);
            jedis.zadd(stockPriceKey, baseTime + <span class="hljs-number">60000</span>, <span class="hljs-string">"151.10"</span>);    <span class="hljs-comment">// 1åˆ†é’Ÿå</span>
            jedis.zadd(stockPriceKey, baseTime + <span class="hljs-number">120000</span>, <span class="hljs-string">"150.75"</span>);   <span class="hljs-comment">// 2åˆ†é’Ÿå</span>
            jedis.zadd(stockPriceKey, baseTime + <span class="hljs-number">180000</span>, <span class="hljs-string">"152.30"</span>);   <span class="hljs-comment">// 3åˆ†é’Ÿå</span>
            jedis.zadd(stockPriceKey, baseTime + <span class="hljs-number">240000</span>, <span class="hljs-string">"153.15"</span>);   <span class="hljs-comment">// 4åˆ†é’Ÿå</span>
            
            <span class="hljs-comment">// æŸ¥è¯¢æœ€è¿‘3åˆ†é’Ÿçš„è‚¡ä»·æ•°æ®</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">threeMinutesAgo</span> <span class="hljs-operator">=</span> baseTime + <span class="hljs-number">180000</span>; <span class="hljs-comment">// ä»å¼€å§‹æ—¶é—´ç®—3åˆ†é’Ÿå</span>
            Set&lt;String&gt; recentPrices = jedis.zrangeByScore(stockPriceKey, threeMinutesAgo, baseTime + <span class="hljs-number">240000</span>);
            System.out.println(<span class="hljs-string">"æœ€è¿‘è‚¡ä»·: "</span> + recentPrices);
            
            <span class="hljs-comment">// è·å–è‚¡ä»·èŒƒå›´ç»Ÿè®¡</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">priceCount</span> <span class="hljs-operator">=</span> jedis.zcount(stockPriceKey, <span class="hljs-number">150.0</span>, <span class="hljs-number">152.0</span>);
            System.out.println(<span class="hljs-string">"150-152ä»·æ ¼åŒºé—´çš„æ•°æ®ç‚¹æ•°é‡: "</span> + priceCount);
        }
    }
    
    <span class="hljs-comment">/**
     * å¸¦æƒé‡çš„æ ‡ç­¾ç³»ç»Ÿ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">weightedTagsExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">articleWeightedTags</span> <span class="hljs-operator">=</span> <span class="hljs-string">"article:11001:weighted_tags"</span>;
            
            <span class="hljs-comment">// æ·»åŠ æ ‡ç­¾åŠæƒé‡ï¼ˆæƒé‡ä»£è¡¨ç›¸å…³æ€§å¼ºåº¦ï¼‰</span>
            jedis.zadd(articleWeightedTags, <span class="hljs-number">0.9</span>, <span class="hljs-string">"Redis"</span>);
            jedis.zadd(articleWeightedTags, <span class="hljs-number">0.7</span>, <span class="hljs-string">"æ•°æ®åº“"</span>);
            jedis.zadd(articleWeightedTags, <span class="hljs-number">0.5</span>, <span class="hljs-string">"ç¼“å­˜"</span>);
            jedis.zadd(articleWeightedTags, <span class="hljs-number">0.3</span>, <span class="hljs-string">"NoSQL"</span>);
            jedis.zadd(articleWeightedTags, <span class="hljs-number">0.1</span>, <span class="hljs-string">"å¼€æº"</span>);
            
            <span class="hljs-comment">// è·å–ç›¸å…³æ€§æœ€é«˜çš„3ä¸ªæ ‡ç­¾</span>
            Set&lt;String&gt; topTags = jedis.zrevrange(articleWeightedTags, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
            System.out.println(<span class="hljs-string">"æœ€ç›¸å…³æ ‡ç­¾: "</span> + topTags);
            
            <span class="hljs-comment">// æŒ‰æƒé‡èŒƒå›´æŸ¥è¯¢æ ‡ç­¾</span>
            Set&lt;String&gt; strongTags = jedis.zrangeByScore(articleWeightedTags, <span class="hljs-number">0.7</span>, <span class="hljs-number">1.0</span>);
            System.out.println(<span class="hljs-string">"å¼ºç›¸å…³æ ‡ç­¾: "</span> + strongTags);
            
            <span class="hljs-comment">// å¢åŠ æ ‡ç­¾æƒé‡</span>
            jedis.zincrby(articleWeightedTags, <span class="hljs-number">0.1</span>, <span class="hljs-string">"Redis"</span>);
            
            <span class="hljs-comment">// è·å–æ ‡ç­¾æƒé‡</span>
            <span class="hljs-type">Double</span> <span class="hljs-variable">redisWeight</span> <span class="hljs-operator">=</span> jedis.zscore(articleWeightedTags, <span class="hljs-string">"Redis"</span>);
            System.out.println(<span class="hljs-string">"Redisæ ‡ç­¾æƒé‡: "</span> + redisWeight);
        }
    }
}
</code></pre>
<p>â€‹<strong>åº”ç”¨åœºæ™¯åˆ†æ</strong>â€‹ï¼š</p>
<ol>
<li>â€‹<strong>æ’è¡Œæ¦œç³»ç»Ÿ</strong>â€‹ï¼šæ¸¸æˆåˆ†æ•°ã€å•†å“é”€é‡ã€å†…å®¹çƒ­åº¦</li>
<li>â€‹<strong>å»¶è¿Ÿé˜Ÿåˆ—</strong>â€‹ï¼šå®šæ—¶ä»»åŠ¡ã€æ¶ˆæ¯å»¶è¿ŸæŠ•é€’</li>
<li>â€‹<strong>æ—¶é—´åºåˆ—</strong>â€‹ï¼šç›‘æ§æ•°æ®ã€è‚¡ç¥¨ä»·æ ¼ã€ä¼ æ„Ÿå™¨æ•°æ®</li>
<li>â€‹<strong>å¸¦æƒé‡æ ‡ç­¾</strong>â€‹ï¼šå†…å®¹ç›¸å…³æ€§ã€ç”¨æˆ·å…´è¶£å¼ºåº¦</li>
<li>â€‹<strong>èŒƒå›´æŸ¥è¯¢</strong>â€‹ï¼šåœ°ç†ä½ç½®ã€ä»·æ ¼åŒºé—´ã€æ—¶é—´èŒƒå›´</li>
</ol>
<h2 data-id="heading-10">æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-11">æ•°æ®ç»“æ„é€‰æ‹©ç­–ç•¥</h3>



































<table><thead><tr><th>ä¸šåŠ¡éœ€æ±‚</th><th>æ¨èæ•°æ®ç»“æ„</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>ç®€å•ç¼“å­˜</td><td>å­—ç¬¦ä¸²</td><td>ç›´æ¥ã€é«˜æ•ˆ</td></tr><tr><td>å¯¹è±¡å­˜å‚¨</td><td>å“ˆå¸Œ</td><td>å†…å­˜ä¼˜åŒ–ã€å­—æ®µæ“ä½œ</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>åˆ—è¡¨</td><td>é¡ºåºæ€§ã€é˜»å¡æ“ä½œ</td></tr><tr><td>å”¯ä¸€é›†åˆ</td><td>é›†åˆ</td><td>å»é‡ã€é›†åˆè¿ç®—</td></tr><tr><td>æ’åºéœ€æ±‚</td><td>æœ‰åºé›†åˆ</td><td>è‡ªåŠ¨æ’åºã€èŒƒå›´æŸ¥è¯¢</td></tr></tbody></table>
<h3 data-id="heading-12">å†…å­˜ä¼˜åŒ–æŠ€å·§</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryOptimizationTips</span> {
    
    <span class="hljs-comment">/**
     * å°å¯¹è±¡å­˜å‚¨ä¼˜åŒ–
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">smallObjectOptimization</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// é”™è¯¯æ–¹å¼ï¼šå¤§é‡å°å­—ç¬¦ä¸²é”®</span>
            <span class="hljs-comment">// jedis.set("user:1001:name", "å¼ ä¸‰");</span>
            <span class="hljs-comment">// jedis.set("user:1001:age", "25");</span>
            <span class="hljs-comment">// jedis.set("user:1001:email", "zhangsan@example.com");</span>
            
            <span class="hljs-comment">// æ­£ç¡®æ–¹å¼ï¼šä½¿ç”¨å“ˆå¸Œå­˜å‚¨å°å¯¹è±¡</span>
            Map&lt;String, String&gt; userInfo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            userInfo.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>);
            userInfo.put(<span class="hljs-string">"age"</span>, <span class="hljs-string">"25"</span>);
            userInfo.put(<span class="hljs-string">"email"</span>, <span class="hljs-string">"zhangsan@example.com"</span>);
            jedis.hmset(<span class="hljs-string">"user:1001"</span>, userInfo);
        }
    }
    
    <span class="hljs-comment">/**
     * å¤§é›†åˆåˆ†ç‰‡ç­–ç•¥
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">largeSetSharding</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">largeSetKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"large:set"</span>;
            <span class="hljs-type">int</span> <span class="hljs-variable">shardCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
            
            <span class="hljs-comment">// æ·»åŠ å…ƒç´ æ—¶åˆ†é…åˆ°ä¸åŒçš„åˆ†ç‰‡</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
                <span class="hljs-type">String</span> <span class="hljs-variable">element</span> <span class="hljs-operator">=</span> <span class="hljs-string">"element_"</span> + i;
                <span class="hljs-type">int</span> <span class="hljs-variable">shardIndex</span> <span class="hljs-operator">=</span> Math.abs(element.hashCode()) % shardCount;
                <span class="hljs-type">String</span> <span class="hljs-variable">shardKey</span> <span class="hljs-operator">=</span> largeSetKey + <span class="hljs-string">":"</span> + shardIndex;
                jedis.sadd(shardKey, element);
            }
            
            <span class="hljs-comment">// æŸ¥è¯¢æ—¶æ£€æŸ¥æ‰€æœ‰åˆ†ç‰‡</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">targetElement</span> <span class="hljs-operator">=</span> <span class="hljs-string">"element_5000"</span>;
            <span class="hljs-type">int</span> <span class="hljs-variable">targetShard</span> <span class="hljs-operator">=</span> Math.abs(targetElement.hashCode()) % shardCount;
            <span class="hljs-type">boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> jedis.sismember(largeSetKey + <span class="hljs-string">":"</span> + targetShard, targetElement);
            System.out.println(<span class="hljs-string">"å…ƒç´ æ˜¯å¦å­˜åœ¨: "</span> + exists);
        }
    }
}
</code></pre>
<h2 data-id="heading-13">æ¡ˆä¾‹ï¼šç”µå•†å¹³å°æ•°æ®æ¨¡å‹è®¾è®¡</h2>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ECommerceDataModel</span> {
    <span class="hljs-keyword">private</span> JedisPool jedisPool;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ECommerceDataModel</span><span class="hljs-params">(JedisPool jedisPool)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;
    }
    
    <span class="hljs-comment">/**
     * å®Œæ•´çš„ç”µå•†æ•°æ®æ¨¡å‹ç¤ºä¾‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">completeEcommerceExample</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// 1. ç”¨æˆ·ä¿¡æ¯ - ä½¿ç”¨å“ˆå¸Œ</span>
            Map&lt;String, String&gt; userInfo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            userInfo.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"ç‹äº”"</span>);
            userInfo.put(<span class="hljs-string">"level"</span>, <span class="hljs-string">"VIP"</span>);
            userInfo.put(<span class="hljs-string">"points"</span>, <span class="hljs-string">"1500"</span>);
            jedis.hmset(<span class="hljs-string">"user:12001"</span>, userInfo);
            
            <span class="hljs-comment">// 2. å•†å“ä¿¡æ¯ - ä½¿ç”¨å“ˆå¸Œ</span>
            Map&lt;String, String&gt; productInfo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            productInfo.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"iPhone 15"</span>);
            productInfo.put(<span class="hljs-string">"price"</span>, <span class="hljs-string">"5999"</span>);
            productInfo.put(<span class="hljs-string">"stock"</span>, <span class="hljs-string">"100"</span>);
            productInfo.put(<span class="hljs-string">"category"</span>, <span class="hljs-string">"electronics"</span>);
            jedis.hmset(<span class="hljs-string">"product:2001"</span>, productInfo);
            
            <span class="hljs-comment">// 3. è´­ç‰©è½¦ - ä½¿ç”¨å“ˆå¸Œï¼ˆç”¨æˆ·ID -&gt; å•†å“ID:æ•°é‡ï¼‰</span>
            jedis.hset(<span class="hljs-string">"cart:12001"</span>, <span class="hljs-string">"product:2001"</span>, <span class="hljs-string">"2"</span>);
            jedis.hset(<span class="hljs-string">"cart:12001"</span>, <span class="hljs-string">"product:2002"</span>, <span class="hljs-string">"1"</span>);
            
            <span class="hljs-comment">// 4. å•†å“åˆ†ç±»ç´¢å¼• - ä½¿ç”¨é›†åˆ</span>
            jedis.sadd(<span class="hljs-string">"category:electronics:products"</span>, <span class="hljs-string">"product:2001"</span>, <span class="hljs-string">"product:2002"</span>);
            jedis.sadd(<span class="hljs-string">"category:books:products"</span>, <span class="hljs-string">"product:3001"</span>, <span class="hljs-string">"product:3002"</span>);
            
            <span class="hljs-comment">// 5. å•†å“é”€é‡æ’è¡Œæ¦œ - ä½¿ç”¨æœ‰åºé›†åˆ</span>
            jedis.zadd(<span class="hljs-string">"leaderboard:products:sales"</span>, <span class="hljs-number">150</span>, <span class="hljs-string">"product:2001"</span>);
            jedis.zadd(<span class="hljs-string">"leaderboard:products:sales"</span>, <span class="hljs-number">89</span>, <span class="hljs-string">"product:2002"</span>);
            jedis.zadd(<span class="hljs-string">"leaderboard:products:sales"</span>, <span class="hljs-number">203</span>, <span class="hljs-string">"product:3001"</span>);
            
            <span class="hljs-comment">// 6. ç”¨æˆ·æµè§ˆå†å² - ä½¿ç”¨åˆ—è¡¨ï¼ˆæœ€è¿‘æµè§ˆï¼‰</span>
            jedis.lpush(<span class="hljs-string">"user:12001:history"</span>, <span class="hljs-string">"product:2001"</span>, <span class="hljs-string">"product:3002"</span>);
            jedis.ltrim(<span class="hljs-string">"user:12001:history"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">49</span>); <span class="hljs-comment">// åªä¿ç•™æœ€è¿‘50æ¡</span>
            
            <span class="hljs-comment">// 7. ç”¨æˆ·æ”¶è—å¤¹ - ä½¿ç”¨é›†åˆ</span>
            jedis.sadd(<span class="hljs-string">"user:12001:favorites"</span>, <span class="hljs-string">"product:2001"</span>, <span class="hljs-string">"product:3001"</span>);
            
            <span class="hljs-comment">// 8. åº“å­˜è®¡æ•°å™¨ - ä½¿ç”¨å­—ç¬¦ä¸²</span>
            jedis.set(<span class="hljs-string">"product:2001:stock"</span>, <span class="hljs-string">"100"</span>);
            
            System.out.println(<span class="hljs-string">"ç”µå•†æ•°æ®æ¨¡å‹åˆå§‹åŒ–å®Œæˆ"</span>);
        }
    }
    
    <span class="hljs-comment">/**
     * å¤æ‚çš„ä¸šåŠ¡æ“ä½œï¼šç”¨æˆ·ä¸‹å•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">placeOrder</span><span class="hljs-params">(String userId, String productId, <span class="hljs-type">int</span> quantity)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-comment">// ä½¿ç”¨äº‹åŠ¡ä¿è¯åŸå­æ€§</span>
            jedis.watch(<span class="hljs-string">"product:"</span> + productId + <span class="hljs-string">":stock"</span>, <span class="hljs-string">"user:"</span> + userId + <span class="hljs-string">":points"</span>);
            
            <span class="hljs-comment">// æ£€æŸ¥åº“å­˜</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">stockStr</span> <span class="hljs-operator">=</span> jedis.hget(<span class="hljs-string">"product:"</span> + productId, <span class="hljs-string">"stock"</span>);
            <span class="hljs-keyword">if</span> (stockStr == <span class="hljs-literal">null</span> || Integer.parseInt(stockStr) &lt; quantity) {
                jedis.unwatch();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// åº“å­˜ä¸è¶³</span>
            }
            
            <span class="hljs-comment">// æ£€æŸ¥ç”¨æˆ·ç§¯åˆ†</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">pointsStr</span> <span class="hljs-operator">=</span> jedis.hget(<span class="hljs-string">"user:"</span> + userId, <span class="hljs-string">"points"</span>);
            <span class="hljs-type">int</span> <span class="hljs-variable">userPoints</span> <span class="hljs-operator">=</span> pointsStr != <span class="hljs-literal">null</span> ? Integer.parseInt(pointsStr) : <span class="hljs-number">0</span>;
            <span class="hljs-type">int</span> <span class="hljs-variable">requiredPoints</span> <span class="hljs-operator">=</span> quantity * <span class="hljs-number">10</span>; <span class="hljs-comment">// å‡è®¾æ¯ä»¶å•†å“éœ€è¦10ç§¯åˆ†</span>
            
            <span class="hljs-keyword">if</span> (userPoints &lt; requiredPoints) {
                jedis.unwatch();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// ç§¯åˆ†ä¸è¶³</span>
            }
            
            <span class="hljs-comment">// å¼€å¯äº‹åŠ¡</span>
            <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> jedis.multi();
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰£å‡åº“å­˜</span>
                transaction.hincrBy(<span class="hljs-string">"product:"</span> + productId, <span class="hljs-string">"stock"</span>, -quantity);
                
                <span class="hljs-comment">// æ‰£å‡ç§¯åˆ†</span>
                transaction.hincrBy(<span class="hljs-string">"user:"</span> + userId, <span class="hljs-string">"points"</span>, -requiredPoints);
                
                <span class="hljs-comment">// å¢åŠ é”€é‡</span>
                transaction.zincrby(<span class="hljs-string">"leaderboard:products:sales"</span>, quantity, productId);
                
                <span class="hljs-comment">// ç”Ÿæˆè®¢å•è®°å½•</span>
                <span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order:"</span> + System.currentTimeMillis();
                Map&lt;String, String&gt; orderInfo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
                orderInfo.put(<span class="hljs-string">"userId"</span>, userId);
                orderInfo.put(<span class="hljs-string">"productId"</span>, productId);
                orderInfo.put(<span class="hljs-string">"quantity"</span>, String.valueOf(quantity));
                orderInfo.put(<span class="hljs-string">"status"</span>, <span class="hljs-string">"created"</span>);
                transaction.hmset(orderId, orderInfo);
                
                <span class="hljs-comment">// æ·»åŠ åˆ°ç”¨æˆ·è®¢å•åˆ—è¡¨</span>
                transaction.lpush(<span class="hljs-string">"user:"</span> + userId + <span class="hljs-string">":orders"</span>, orderId);
                
                <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
                List&lt;Object&gt; results = transaction.exec();
                <span class="hljs-keyword">return</span> results != <span class="hljs-literal">null</span>; <span class="hljs-comment">// nullè¡¨ç¤ºäº‹åŠ¡å¤±è´¥</span>
                
            } <span class="hljs-keyword">catch</span> (Exception e) {
                transaction.discard();
                <span class="hljs-keyword">throw</span> e;
            }
        }
    }
}
</code></pre>
<h2 data-id="heading-14">å°ç»“</h2>



































<table><thead><tr><th>ä¸šåŠ¡åœºæ™¯</th><th>æ¨èæ•°æ®ç»“æ„</th><th>å…³é”®ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>ç¼“å­˜æ•°æ®</td><td>å­—ç¬¦ä¸²</td><td>ç®€å•é«˜æ•ˆï¼Œæ”¯æŒè¿‡æœŸ</td></tr><tr><td>ç”¨æˆ·ä¿¡æ¯</td><td>å“ˆå¸Œ</td><td>å­—æ®µæ“ä½œï¼Œå†…å­˜ä¼˜åŒ–</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>åˆ—è¡¨</td><td>é¡ºåºæ€§ï¼Œé˜»å¡æ“ä½œ</td></tr><tr><td>ç¤¾äº¤å…³ç³»</td><td>é›†åˆ</td><td>å»é‡ï¼Œé›†åˆè¿ç®—</td></tr><tr><td>æ’è¡Œæ¦œ</td><td>æœ‰åºé›†åˆ</td><td>è‡ªåŠ¨æ’åºï¼ŒèŒƒå›´æŸ¥è¯¢</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring AI + Redis å‘é‡åº“å®æˆ˜]]></title>    <link>https://juejin.cn/post/7579573664228835337</link>    <guid>https://juejin.cn/post/7579573664228835337</guid>    <pubDate>2025-12-04T03:18:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579573664228835337" data-draft-id="7579567346390712346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring AI + Redis å‘é‡åº“å®æˆ˜"/> <meta itemprop="keywords" content="Redis,Spring,Java"/> <meta itemprop="datePublished" content="2025-12-04T03:18:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring AI + Redis å‘é‡åº“å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:18:32.000Z" title="Thu Dec 04 2025 03:18:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Spring AI + Redis å‘é‡åº“å®æˆ˜ï¼šæ„å»ºé«˜æ€§èƒ½ RAG åº”ç”¨</h2>
<h3 data-id="heading-1">æ‘˜è¦</h3>
<p>Spring AI æ˜¯ Spring ç”Ÿæ€ç³»ç»Ÿä¸­çš„ AI åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œè€Œ Redis ä½œä¸ºé«˜æ€§èƒ½å†…å­˜æ•°æ®åº“ï¼Œå…¶å‘é‡æœç´¢èƒ½åŠ›ï¼ˆRedis Stackï¼‰ä¸º RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰åº”ç”¨æä¾›äº†å¼ºå¤§æ”¯æŒã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•ä½¿ç”¨ Spring AI æœ€æ–°ç‰ˆæœ¬ç»“åˆ Redis å‘é‡åº“ï¼Œæ„å»ºç”Ÿäº§çº§çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-2">ç›®å½•</h3>
<ol>
<li>Spring AI ä¸ Redis å‘é‡åº“ç®€ä»‹</li>
<li>æ ¸å¿ƒæ¶æ„ä¸æŠ€æœ¯é€‰å‹</li>
<li>ç¯å¢ƒå‡†å¤‡ä¸ä¾èµ–é…ç½®</li>
<li>Redis å‘é‡åº“æ ¸å¿ƒæ¦‚å¿µ</li>
<li>å¿«é€Ÿå¼€å§‹</li>
<li>æ ¸å¿ƒåŠŸèƒ½å®ç°</li>
<li>é«˜çº§ç‰¹æ€§</li>
<li>ç”Ÿäº§ç¯å¢ƒå®è·µ</li>
<li>æ€§èƒ½ä¼˜åŒ–ä¸è°ƒä¼˜</li>
<li>å®æˆ˜æ¡ˆä¾‹</li>
<li>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</li>
<li>æ€»ç»“ä¸å±•æœ›</li>
</ol>
<hr/>
<h3 data-id="heading-3">1. Spring AI ä¸ Redis å‘é‡åº“ç®€ä»‹</h3>
<h4 data-id="heading-4">1.1 ä¸ºä»€ä¹ˆé€‰æ‹© Redis ä½œä¸ºå‘é‡åº“</h4>
<p>Redis Stack æä¾›äº† RediSearch æ¨¡å—ï¼Œæ”¯æŒå‘é‡ç›¸ä¼¼åº¦æœç´¢ï¼ˆVSSï¼‰ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âš¡ <strong>é«˜æ€§èƒ½</strong>ï¼šåŸºäºå†…å­˜çš„å‘é‡æœç´¢ï¼Œæ¯«ç§’çº§å“åº”</li>
<li>ğŸ”„ <strong>å®æ—¶æ€§</strong>ï¼šæ”¯æŒå®æ—¶ç´¢å¼•æ›´æ–°ï¼Œæ— éœ€é‡å»º</li>
<li>ğŸ“¦ <strong>æ˜“éƒ¨ç½²</strong>ï¼šå•ä¸€æœåŠ¡ï¼Œæ— éœ€å¤æ‚æ¶æ„</li>
<li>ğŸ’° <strong>æˆæœ¬ä½</strong>ï¼šç›¸æ¯”ä¸“ç”¨å‘é‡æ•°æ®åº“ï¼Œè¿ç»´æˆæœ¬æ›´ä½</li>
<li>ğŸ› ï¸ <strong>åŠŸèƒ½ä¸°å¯Œ</strong>ï¼šæ”¯æŒæ··åˆæŸ¥è¯¢ï¼ˆå‘é‡+å…ƒæ•°æ®è¿‡æ»¤ï¼‰</li>
<li>ğŸ”— <strong>ç”Ÿæ€å¥½</strong>ï¼šSpring AI åŸç”Ÿæ”¯æŒ</li>
</ul>
<h4 data-id="heading-5">1.2 åº”ç”¨åœºæ™¯</h4>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Spring AI + Redis å‘é‡åº“åº”ç”¨åœºæ™¯å…¨æ™¯å›¾                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  æ™ºèƒ½æ–‡æ¡£æ£€ç´¢    â”‚  â”‚  ä¼ä¸šçŸ¥è¯†åº“      â”‚  â”‚  æ™ºèƒ½å®¢æœ    â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚              â”‚ â”‚
â”‚  â”‚  â€¢ PDFé—®ç­”       â”‚  â”‚  â€¢ å†…éƒ¨æ–‡æ¡£æœç´¢  â”‚  â”‚  â€¢ FAQè‡ªåŠ¨  â”‚ â”‚
â”‚  â”‚  â€¢ æ–‡æ¡£æ‘˜è¦      â”‚  â”‚  â€¢ æ”¿ç­–æŸ¥è¯¢      â”‚  â”‚    å›ç­”      â”‚ â”‚
â”‚  â”‚  â€¢ å¤šæ–‡æ¡£å¯¹æ¯”    â”‚  â”‚  â€¢ æŠ€æœ¯æ–‡æ¡£åº“    â”‚  â”‚  â€¢ æ„å›¾è¯†åˆ«  â”‚ â”‚
â”‚  â”‚  â€¢ å¼•ç”¨æº¯æº      â”‚  â”‚  â€¢ è§„ç« åˆ¶åº¦æŸ¥è¯¢  â”‚  â”‚  â€¢ ä¸Šä¸‹æ–‡    â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚    ç†è§£      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ä»£ç æœç´¢åŠ©æ‰‹    â”‚  â”‚  ç”µå•†æ¨èç³»ç»Ÿ    â”‚  â”‚  å†…å®¹å®¡æ ¸    â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚              â”‚ â”‚
â”‚  â”‚  â€¢ è¯­ä¹‰ä»£ç æœç´¢  â”‚  â”‚  â€¢ å•†å“ç›¸ä¼¼æ¨è  â”‚  â”‚  â€¢ é‡å¤å†…å®¹  â”‚ â”‚
â”‚  â”‚  â€¢ APIæ–‡æ¡£æŸ¥è¯¢   â”‚  â”‚  â€¢ ç”¨æˆ·ç”»åƒåŒ¹é…  â”‚  â”‚    æ£€æµ‹      â”‚ â”‚
â”‚  â”‚  â€¢ Bugç›¸ä¼¼æŸ¥æ‰¾   â”‚  â”‚  â€¢ ä¸ªæ€§åŒ–æœç´¢    â”‚  â”‚  â€¢ æ•æ„Ÿä¿¡æ¯  â”‚ â”‚
â”‚  â”‚  â€¢ ä»£ç ç”Ÿæˆ      â”‚  â”‚  â€¢ å…³è”å•†å“å‘ç°  â”‚  â”‚    è¿‡æ»¤      â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  å®æ—¶é—®ç­”ç³»ç»Ÿ    â”‚  â”‚  å¤šè¯­è¨€æœç´¢      â”‚  â”‚  æ—¥å¿—åˆ†æ    â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚              â”‚ â”‚
â”‚  â”‚  â€¢ æµå¼å“åº”      â”‚  â”‚  â€¢ è·¨è¯­è¨€æ£€ç´¢    â”‚  â”‚  â€¢ å¼‚å¸¸æ¨¡å¼  â”‚ â”‚
â”‚  â”‚  â€¢ ä¼šè¯è®°å¿†      â”‚  â”‚  â€¢ ç¿»è¯‘+æœç´¢     â”‚  â”‚    è¯†åˆ«      â”‚ â”‚
â”‚  â”‚  â€¢ å¤šè½®å¯¹è¯      â”‚  â”‚  â€¢ å¤šè¯­è¨€FAQ     â”‚  â”‚  â€¢ æ ¹å› åˆ†æ  â”‚ â”‚
â”‚  â”‚  â€¢ ä¸Šä¸‹æ–‡æ„ŸçŸ¥    â”‚  â”‚  â€¢ å›½é™…åŒ–æ”¯æŒ    â”‚  â”‚  â€¢ è¶‹åŠ¿é¢„æµ‹  â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-6">1.3 æŠ€æœ¯æ ˆå¯¹æ¯”</h4>




































































<table><thead><tr><th>ç‰¹æ€§</th><th>Redis VSS</th><th>Pinecone</th><th>Milvus</th><th>Chroma</th></tr></thead><tbody><tr><td>æ€§èƒ½</td><td>â­â­â­â­â­</td><td>â­â­â­â­</td><td>â­â­â­â­â­</td><td>â­â­â­</td></tr><tr><td>æ˜“ç”¨æ€§</td><td>â­â­â­â­â­</td><td>â­â­â­â­â­</td><td>â­â­â­</td><td>â­â­â­â­</td></tr><tr><td>æˆæœ¬</td><td>ä½</td><td>é«˜</td><td>ä¸­</td><td>ä½</td></tr><tr><td>å®æ—¶æ›´æ–°</td><td>âœ… ä¼˜ç§€</td><td>âœ… ä¼˜ç§€</td><td>âœ… ä¼˜ç§€</td><td>âš ï¸ ä¸€èˆ¬</td></tr><tr><td>æ··åˆæŸ¥è¯¢</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>âš ï¸ æœ‰é™</td></tr><tr><td>Spring AI</td><td>âœ… åŸç”Ÿ</td><td>âœ… åŸç”Ÿ</td><td>âœ… åŸç”Ÿ</td><td>âœ… åŸç”Ÿ</td></tr><tr><td>éƒ¨ç½²å¤æ‚åº¦</td><td>ç®€å•</td><td>æ‰˜ç®¡</td><td>å¤æ‚</td><td>ç®€å•</td></tr><tr><td>æ•°æ®è§„æ¨¡</td><td>ç™¾ä¸‡çº§</td><td>äº¿çº§</td><td>äº¿çº§</td><td>ç™¾ä¸‡çº§</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">2. æ ¸å¿ƒæ¶æ„ä¸æŠ€æœ¯é€‰å‹</h3>
<h4 data-id="heading-8">2.1 æ•´ä½“æ¶æ„å›¾</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Spring Boot Application                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  Controller Layer                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ Document API â”‚  â”‚  Chat API    â”‚  â”‚ Search API  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  Service Layer                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ RAG Service  â”‚  â”‚ Chat Service â”‚  â”‚ Doc Service â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Spring AI Framework                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ChatClientâ”‚  â”‚Embedding â”‚  â”‚DocumentReaderâ”‚  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚          â”‚  â”‚  Model   â”‚  â”‚              â”‚  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                                                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚      VectorStore (Redis)                 â”‚  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ <span class="hljs-built_in">add</span>()                                 â”‚  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ <span class="hljs-built_in">similaritySearch</span>()                    â”‚  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ <span class="hljs-built_in">delete</span>()                              â”‚  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Redis Stack (Vector Store)                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  RediSearch Module (Vector Similarity Search)   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ HNSW Index                                   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ FLAT Index                                   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Cosine Similarity                            â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ L2 Distance                                  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ IP (Inner Product)                           â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   LLM Provider                          â”‚ â”‚
â”‚  â”‚      (OpenAI / Azure / Ollama / Qwen...)              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-9">2.2 RAG å·¥ä½œæµç¨‹</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RAG å·¥ä½œæµç¨‹è¯¦è§£                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€ç´¢å¼•æ„å»ºé˜¶æ®µã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åŸå§‹æ–‡æ¡£   â”‚â”€â”€â”€â”€â”€â–¶â”‚  æ–‡æ¡£åˆ†å‰²    â”‚â”€â”€â”€â”€â”€â–¶â”‚  å‘é‡åŒ–     â”‚
â”‚  (PDF/TXT)  â”‚      â”‚  (Chunking) â”‚      â”‚ (Embedding) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â–¼
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                          â”‚  å­˜å‚¨åˆ°Redis    â”‚
                                          â”‚  (Vector Store) â”‚
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€æŸ¥è¯¢å“åº”é˜¶æ®µã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·é—®é¢˜   â”‚â”€â”€â”€â”€â”€â–¶â”‚   å‘é‡åŒ–    â”‚â”€â”€â”€â”€â”€â–¶â”‚  ç›¸ä¼¼åº¦æœç´¢  â”‚
â”‚             â”‚      â”‚             â”‚      â”‚  (Redis VSS)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è¿”å›ç­”æ¡ˆ  â”‚â—€â”€â”€â”€â”€â”€â”‚  LLMç”Ÿæˆ    â”‚â—€â”€â”€â”€â”€â”€â”‚  æ£€ç´¢ä¸Šä¸‹æ–‡  â”‚
â”‚             â”‚      â”‚             â”‚      â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-10">3. ç¯å¢ƒå‡†å¤‡ä¸ä¾èµ–é…ç½®</h3>
<h4 data-id="heading-11">3.1 ç¯å¢ƒè¦æ±‚</h4>
<p><strong>åŸºç¡€ç¯å¢ƒï¼š</strong></p>
<ul>
<li>JDK 17+</li>
<li>Spring Boot 3.2+</li>
<li>Maven 3.8+ / Gradle 8.0+</li>
<li>Redis Stack 7.2+ï¼ˆæ”¯æŒ RediSearchï¼‰</li>
</ul>
<h4 data-id="heading-12">3.2 Redis Stack å®‰è£…</h4>
<p><strong>Docker æ–¹å¼ï¼ˆæ¨èï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‹‰å– Redis Stack é•œåƒ</span>
docker pull redis/redis-stack:latest

<span class="hljs-comment"># å¯åŠ¨ Redis Stack</span>
docker run -d \
  --name redis-stack \
  -p 6379:6379 \
  -p 8001:8001 \
  -e REDIS_ARGS=<span class="hljs-string">"--requirepass mypassword"</span> \
  redis/redis-stack:latest

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
docker <span class="hljs-built_in">exec</span> -it redis-stack redis-cli
&gt; AUTH mypassword
&gt; FT._LIST
</code></pre>
<p><strong>Docker Compose æ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">redis-stack:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis/redis-stack:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">redis-vector-store</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"6379:6379"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8001:8001"</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">REDIS_ARGS=--requirepass</span> <span class="hljs-string">mypassword</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis-data:/data</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">redis-data:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">local</span>
</code></pre>
<h4 data-id="heading-13">3.3 Maven ä¾èµ–é…ç½®</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0
         http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-redis-demo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-ai.version</span>&gt;</span>1.0.0-M4<span class="hljs-tag">&lt;/<span class="hljs-name">spring-ai.version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring Boot Starter Web --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Spring AI OpenAI --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-openai-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Spring AI Redis Vector Store --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-redis-store-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Spring AI PDF Document Reader --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-pdf-document-reader<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Spring AI TikaDocumentReader --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-tika-document-reader<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Redis --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Jedis (Redis å®¢æˆ·ç«¯) --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Lombok --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Spring Boot Starter Test --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-ai.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">repositories</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>spring-milestones<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Spring Milestones<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">snapshots</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">snapshots</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">repositories</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-14">3.4 é…ç½®æ–‡ä»¶</h4>
<p><strong>application.yml:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">spring-ai-redis-demo</span>

  <span class="hljs-comment"># AI é…ç½®</span>
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">openai:</span>
      <span class="hljs-attr">api-key:</span> <span class="hljs-string">${OPENAI_API_KEY}</span>
      <span class="hljs-attr">chat:</span>
        <span class="hljs-attr">options:</span>
          <span class="hljs-attr">model:</span> <span class="hljs-string">gpt-3.5-turbo</span>
          <span class="hljs-attr">temperature:</span> <span class="hljs-number">0.7</span>
          <span class="hljs-attr">max-tokens:</span> <span class="hljs-number">2000</span>
      <span class="hljs-attr">embedding:</span>
        <span class="hljs-attr">options:</span>
          <span class="hljs-attr">model:</span> <span class="hljs-string">text-embedding-ada-002</span>

    <span class="hljs-comment"># Redis å‘é‡å­˜å‚¨é…ç½®</span>
    <span class="hljs-attr">vectorstore:</span>
      <span class="hljs-attr">redis:</span>
        <span class="hljs-attr">uri:</span> <span class="hljs-string">redis://localhost:6379</span>
        <span class="hljs-attr">password:</span> <span class="hljs-string">mypassword</span>
        <span class="hljs-attr">index:</span> <span class="hljs-string">spring-ai-index</span>
        <span class="hljs-attr">prefix: doc:</span>
        <span class="hljs-attr">initialize-schema:</span> <span class="hljs-literal">true</span>

  <span class="hljs-comment"># Redis é…ç½®</span>
  <span class="hljs-attr">data:</span>
    <span class="hljs-attr">redis:</span>
      <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">mypassword</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">60s</span>
      <span class="hljs-attr">jedis:</span>
        <span class="hljs-attr">pool:</span>
          <span class="hljs-attr">max-active:</span> <span class="hljs-number">20</span>
          <span class="hljs-attr">max-idle:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span>

<span class="hljs-comment"># æ—¥å¿—é…ç½®</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">org.springframework.ai:</span> <span class="hljs-string">DEBUG</span>
    <span class="hljs-attr">com.example:</span> <span class="hljs-string">DEBUG</span>

<span class="hljs-comment"># æœåŠ¡å™¨é…ç½®</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>

<span class="hljs-comment"># è‡ªå®šä¹‰é…ç½®</span>
<span class="hljs-attr">app:</span>
  <span class="hljs-attr">vector:</span>
    <span class="hljs-attr">dimension:</span> <span class="hljs-number">1536</span>  <span class="hljs-comment"># OpenAI ada-002 å‘é‡ç»´åº¦</span>
    <span class="hljs-attr">algorithm:</span> <span class="hljs-string">HNSW</span>  <span class="hljs-comment"># ç´¢å¼•ç®—æ³•: FLAT æˆ– HNSW</span>
    <span class="hljs-attr">distance-metric:</span> <span class="hljs-string">COSINE</span>  <span class="hljs-comment"># è·ç¦»åº¦é‡: COSINE, L2, IP</span>
  <span class="hljs-attr">document:</span>
    <span class="hljs-attr">chunk-size:</span> <span class="hljs-number">800</span>
    <span class="hljs-attr">chunk-overlap:</span> <span class="hljs-number">200</span>
</code></pre>
<hr/>
<h3 data-id="heading-15">4. Redis å‘é‡åº“æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-16">4.1 å‘é‡ç´¢å¼•ç®—æ³•</h4>
<p><strong>FLATï¼ˆæš´åŠ›æœç´¢ï¼‰ï¼š</strong></p>
<ul>
<li>ç²¾ç¡®æœç´¢ï¼Œ100% å¬å›ç‡</li>
<li>é€‚åˆå°è§„æ¨¡æ•°æ®ï¼ˆ&lt; 10ä¸‡ï¼‰</li>
<li>çº¿æ€§æ—¶é—´å¤æ‚åº¦ O(n)</li>
</ul>
<p><strong>HNSWï¼ˆå±‚æ¬¡å¯å¯¼èˆªå°ä¸–ç•Œå›¾ï¼‰ï¼š</strong></p>
<ul>
<li>è¿‘ä¼¼æœç´¢ï¼Œé«˜å¬å›ç‡ï¼ˆ&gt; 95%ï¼‰</li>
<li>é€‚åˆå¤§è§„æ¨¡æ•°æ®ï¼ˆç™¾ä¸‡çº§+ï¼‰</li>
<li>å¯¹æ•°æ—¶é—´å¤æ‚åº¦ O(log n)</li>
</ul>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FLAT vs HNSW æ€§èƒ½å¯¹æ¯”                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  æ•°æ®è§„æ¨¡        FLAT å»¶è¿Ÿ    HNSW å»¶è¿Ÿ    æ¨èé€‰æ‹©      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  <span class="hljs-number">1</span>K            &lt; <span class="hljs-number">1ms</span>        &lt; <span class="hljs-number">1ms</span>       FLAT            â”‚
â”‚  <span class="hljs-number">10</span>K           <span class="hljs-number">5</span>-<span class="hljs-number">10ms</span>       &lt; <span class="hljs-number">2ms</span>       FLAT/HNSW       â”‚
â”‚  <span class="hljs-number">100</span>K          <span class="hljs-number">50</span>-<span class="hljs-number">100ms</span>     &lt; <span class="hljs-number">5ms</span>       HNSW            â”‚
â”‚  <span class="hljs-number">1</span>M            <span class="hljs-number">500ms</span>+       &lt; <span class="hljs-number">10ms</span>      HNSW            â”‚
â”‚  <span class="hljs-number">10</span>M+          N/<span class="hljs-selector-tag">A</span>          &lt; <span class="hljs-number">20ms</span>      HNSW            â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-17">4.2 è·ç¦»åº¦é‡</h4>
<p><strong>Cosine Similarityï¼ˆä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ï¼š</strong></p>
<ul>
<li>èŒƒå›´: [-1, 1]ï¼Œè¶Šæ¥è¿‘ 1 è¶Šç›¸ä¼¼</li>
<li>é€‚ç”¨äºæ–‡æœ¬å‘é‡</li>
<li>ä¸å—å‘é‡é•¿åº¦å½±å“</li>
</ul>
<p><strong>L2 Distanceï¼ˆæ¬§æ°è·ç¦»ï¼‰ï¼š</strong></p>
<ul>
<li>èŒƒå›´: [0, âˆ)ï¼Œè¶Šå°è¶Šç›¸ä¼¼</li>
<li>å—å‘é‡é•¿åº¦å½±å“</li>
<li>é€‚ç”¨äºå›¾åƒå‘é‡</li>
</ul>
<p><strong>IPï¼ˆå†…ç§¯ï¼‰ï¼š</strong></p>
<ul>
<li>èŒƒå›´: (-âˆ, âˆ)ï¼Œè¶Šå¤§è¶Šç›¸ä¼¼</li>
<li>æ€§èƒ½æœ€å¥½</li>
<li>éœ€è¦å½’ä¸€åŒ–å‘é‡</li>
</ul>
<hr/>
<h3 data-id="heading-18">5. å¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-19">5.1 å¯åŠ¨ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis;

<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringAiRedisApplication</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(SpringAiRedisApplication.class, args);
    }
}
</code></pre>
<h4 data-id="heading-20">5.2 åŸºç¡€é…ç½®ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.config;

<span class="hljs-keyword">import</span> org.springframework.ai.embedding.EmbeddingModel;
<span class="hljs-keyword">import</span> org.springframework.ai.openai.OpenAiEmbeddingModel;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.RedisVectorStore;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisPooled;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VectorStoreConfig</span> {

    <span class="hljs-meta">@Value("${spring.ai.vectorstore.redis.uri}")</span>
    <span class="hljs-keyword">private</span> String redisUri;

    <span class="hljs-meta">@Value("${spring.ai.vectorstore.redis.password}")</span>
    <span class="hljs-keyword">private</span> String redisPassword;

    <span class="hljs-meta">@Value("${spring.ai.vectorstore.redis.index}")</span>
    <span class="hljs-keyword">private</span> String indexName;

    <span class="hljs-meta">@Value("${spring.ai.vectorstore.redis.prefix}")</span>
    <span class="hljs-keyword">private</span> String prefix;

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> JedisPooled <span class="hljs-title function_">jedisPooled</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è§£æ Redis URI</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">host</span> <span class="hljs-operator">=</span> <span class="hljs-string">"localhost"</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">port</span> <span class="hljs-operator">=</span> <span class="hljs-number">6379</span>;

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPooled</span>(host, port, <span class="hljs-literal">null</span>, redisPassword);
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> VectorStore <span class="hljs-title function_">vectorStore</span><span class="hljs-params">(EmbeddingModel embeddingModel, JedisPooled jedisPooled)</span> {
        RedisVectorStore.<span class="hljs-type">RedisVectorStoreConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> RedisVectorStore.RedisVectorStoreConfig
                .builder()
                .withIndexName(indexName)
                .withPrefix(prefix)
                .build();

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisVectorStore</span>(config, embeddingModel, jedisPooled, <span class="hljs-literal">true</span>);
    }
}
</code></pre>
<h4 data-id="heading-21">5.3 ç¬¬ä¸€ä¸ªç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.example;

<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.SearchRequest;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.boot.CommandLineRunner;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QuickStartExample</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandLineRunner</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorStore vectorStore;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">QuickStartExample</span><span class="hljs-params">(VectorStore vectorStore)</span> {
        <span class="hljs-built_in">this</span>.vectorStore = vectorStore;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// 1. å‡†å¤‡æ–‡æ¡£</span>
        List&lt;Document&gt; documents = List.of(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>(<span class="hljs-string">"Spring Boot æ˜¯ä¸€ä¸ªç”¨äºç®€åŒ– Spring åº”ç”¨å¼€å‘çš„æ¡†æ¶"</span>,
                        Map.of(<span class="hljs-string">"source"</span>, <span class="hljs-string">"doc1"</span>, <span class="hljs-string">"category"</span>, <span class="hljs-string">"framework"</span>)),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>(<span class="hljs-string">"Redis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œæ”¯æŒå¤šç§æ•°æ®ç»“æ„"</span>,
                        Map.of(<span class="hljs-string">"source"</span>, <span class="hljs-string">"doc2"</span>, <span class="hljs-string">"category"</span>, <span class="hljs-string">"database"</span>)),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>(<span class="hljs-string">"Spring AI æä¾›äº†ç»Ÿä¸€çš„ API æ¥é›†æˆå„ç§ AI æœåŠ¡"</span>,
                        Map.of(<span class="hljs-string">"source"</span>, <span class="hljs-string">"doc3"</span>, <span class="hljs-string">"category"</span>, <span class="hljs-string">"ai"</span>))
        );

        <span class="hljs-comment">// 2. æ·»åŠ æ–‡æ¡£åˆ°å‘é‡åº“</span>
        vectorStore.add(documents);
        System.out.println(<span class="hljs-string">"âœ… å·²æ·»åŠ  "</span> + documents.size() + <span class="hljs-string">" ä¸ªæ–‡æ¡£"</span>);

        <span class="hljs-comment">// 3. æ‰§è¡Œç›¸ä¼¼åº¦æœç´¢</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å¦‚ä½•ç®€åŒ–åº”ç”¨å¼€å‘ï¼Ÿ"</span>;
        List&lt;Document&gt; results = vectorStore.similaritySearch(
                SearchRequest.query(query).withTopK(<span class="hljs-number">2</span>)
        );

        <span class="hljs-comment">// 4. æ‰“å°ç»“æœ</span>
        System.out.println(<span class="hljs-string">"\nğŸ” æœç´¢: "</span> + query);
        System.out.println(<span class="hljs-string">"ğŸ“„ æ‰¾åˆ° "</span> + results.size() + <span class="hljs-string">" ä¸ªç›¸å…³æ–‡æ¡£:\n"</span>);

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; results.size(); i++) {
            <span class="hljs-type">Document</span> <span class="hljs-variable">doc</span> <span class="hljs-operator">=</span> results.get(i);
            System.out.println((i + <span class="hljs-number">1</span>) + <span class="hljs-string">". "</span> + doc.getContent());
            System.out.println(<span class="hljs-string">"   å…ƒæ•°æ®: "</span> + doc.getMetadata());
            System.out.println();
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-22">6. æ ¸å¿ƒåŠŸèƒ½å®ç°</h3>
<h4 data-id="heading-23">6.1 æ–‡æ¡£åŠ è½½ä¸å¤„ç†</h4>
<h5 data-id="heading-24">6.1.1 æ–‡æ¡£åŠ è½½å™¨æœåŠ¡</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.service;

<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.reader.ExtractedTextFormatter;
<span class="hljs-keyword">import</span> org.springframework.ai.reader.pdf.PagePdfDocumentReader;
<span class="hljs-keyword">import</span> org.springframework.ai.reader.pdf.config.PdfDocumentReaderConfig;
<span class="hljs-keyword">import</span> org.springframework.ai.reader.tika.TikaDocumentReader;
<span class="hljs-keyword">import</span> org.springframework.ai.transformer.splitter.TokenTextSplitter;
<span class="hljs-keyword">import</span> org.springframework.core.io.Resource;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentLoaderService</span> {

    <span class="hljs-comment">/**
     * åŠ è½½ PDF æ–‡æ¡£
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">loadPdfDocument</span><span class="hljs-params">(Resource resource)</span> {
        <span class="hljs-type">PdfDocumentReaderConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> PdfDocumentReaderConfig.builder()
                .withPageExtractedTextFormatter(ExtractedTextFormatter.builder()
                        .withNumberOfBottomTextLinesToDelete(<span class="hljs-number">3</span>)
                        .withNumberOfTopPagesToSkipBeforeDelete(<span class="hljs-number">1</span>)
                        .build())
                .withPagesPerDocument(<span class="hljs-number">1</span>)
                .build();

        <span class="hljs-type">PagePdfDocumentReader</span> <span class="hljs-variable">pdfReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PagePdfDocumentReader</span>(resource, config);
        <span class="hljs-keyword">return</span> pdfReader.get();
    }

    <span class="hljs-comment">/**
     * åŠ è½½å¤šç§æ ¼å¼æ–‡æ¡£ï¼ˆä½¿ç”¨ Tikaï¼‰
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">loadDocument</span><span class="hljs-params">(Resource resource)</span> {
        <span class="hljs-type">TikaDocumentReader</span> <span class="hljs-variable">tikaReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TikaDocumentReader</span>(resource);
        <span class="hljs-keyword">return</span> tikaReader.get();
    }

    <span class="hljs-comment">/**
     * åˆ†å‰²æ–‡æ¡£ä¸ºå°å—
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">splitDocuments</span><span class="hljs-params">(List&lt;Document&gt; documents, <span class="hljs-type">int</span> chunkSize, <span class="hljs-type">int</span> overlap)</span> {
        <span class="hljs-type">TokenTextSplitter</span> <span class="hljs-variable">splitter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TokenTextSplitter</span>(chunkSize, overlap, <span class="hljs-number">5</span>, <span class="hljs-number">10000</span>, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">return</span> splitter.apply(documents);
    }
}
</code></pre>
<h5 data-id="heading-25">6.1.2 æ–‡æ¡£å¤„ç†æœåŠ¡</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.service;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;
<span class="hljs-keyword">import</span> org.springframework.core.io.Resource;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentProcessService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DocumentLoaderService loaderService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorStore vectorStore;

    <span class="hljs-meta">@Value("${app.document.chunk-size:800}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> chunkSize;

    <span class="hljs-meta">@Value("${app.document.chunk-overlap:200}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> chunkOverlap;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DocumentProcessService</span><span class="hljs-params">(DocumentLoaderService loaderService, VectorStore vectorStore)</span> {
        <span class="hljs-built_in">this</span>.loaderService = loaderService;
        <span class="hljs-built_in">this</span>.vectorStore = vectorStore;
    }

    <span class="hljs-comment">/**
     * å¤„ç†å¹¶å­˜å‚¨æ–‡æ¡£
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">processAndStoreDocument</span><span class="hljs-params">(Resource resource, Map&lt;String, Object&gt; metadata)</span> {
        <span class="hljs-keyword">try</span> {
            log.info(<span class="hljs-string">"å¼€å§‹å¤„ç†æ–‡æ¡£: {}"</span>, resource.getFilename());

            <span class="hljs-comment">// 1. åŠ è½½æ–‡æ¡£</span>
            List&lt;Document&gt; documents = loaderService.loadDocument(resource);
            log.info(<span class="hljs-string">"åŠ è½½äº† {} ä¸ªæ–‡æ¡£é¡µé¢"</span>, documents.size());

            <span class="hljs-comment">// 2. æ·»åŠ å…ƒæ•°æ®</span>
            documents.forEach(doc -&gt; {
                Map&lt;String, Object&gt; meta = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(metadata);
                meta.put(<span class="hljs-string">"filename"</span>, resource.getFilename());
                meta.put(<span class="hljs-string">"page"</span>, doc.getMetadata().get(<span class="hljs-string">"page"</span>));
                doc.getMetadata().putAll(meta);
            });

            <span class="hljs-comment">// 3. åˆ†å‰²æ–‡æ¡£</span>
            List&lt;Document&gt; chunks = loaderService.splitDocuments(documents, chunkSize, chunkOverlap);
            log.info(<span class="hljs-string">"æ–‡æ¡£åˆ†å‰²æˆ {} ä¸ªå—"</span>, chunks.size());

            <span class="hljs-comment">// 4. å­˜å‚¨åˆ°å‘é‡åº“</span>
            vectorStore.add(chunks);
            log.info(<span class="hljs-string">"âœ… æ–‡æ¡£å·²æˆåŠŸå­˜å‚¨åˆ°å‘é‡åº“"</span>);

            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"æˆåŠŸå¤„ç†æ–‡æ¡£ï¼Œå…± %d ä¸ªå—"</span>, chunks.size());

        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å¤„ç†æ–‡æ¡£å¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ–‡æ¡£å¤„ç†å¤±è´¥: "</span> + e.getMessage(), e);
        }
    }

    <span class="hljs-comment">/**
     * æ‰¹é‡å¤„ç†æ–‡æ¡£
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, String&gt; <span class="hljs-title function_">processBatchDocuments</span><span class="hljs-params">(List&lt;Resource&gt; resources, Map&lt;String, Object&gt; commonMetadata)</span> {
        Map&lt;String, String&gt; results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-keyword">for</span> (Resource resource : resources) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> processAndStoreDocument(resource, commonMetadata);
                results.put(resource.getFilename(), result);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                results.put(resource.getFilename(), <span class="hljs-string">"å¤±è´¥: "</span> + e.getMessage());
            }
        }

        <span class="hljs-keyword">return</span> results;
    }
}
</code></pre>
<h4 data-id="heading-26">6.2 å‘é‡æœç´¢æœåŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.service;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.SearchRequest;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.filter.Filter;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.filter.FilterExpressionBuilder;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VectorSearchService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorStore vectorStore;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">VectorSearchService</span><span class="hljs-params">(VectorStore vectorStore)</span> {
        <span class="hljs-built_in">this</span>.vectorStore = vectorStore;
    }

    <span class="hljs-comment">/**
     * åŸºç¡€ç›¸ä¼¼åº¦æœç´¢
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">search</span><span class="hljs-params">(String query, <span class="hljs-type">int</span> topK)</span> {
        log.info(<span class="hljs-string">"æ‰§è¡Œæœç´¢: query='{}', topK={}"</span>, query, topK);

        List&lt;Document&gt; results = vectorStore.similaritySearch(
                SearchRequest.query(query).withTopK(topK)
        );

        log.info(<span class="hljs-string">"æ‰¾åˆ° {} ä¸ªç›¸å…³æ–‡æ¡£"</span>, results.size());
        <span class="hljs-keyword">return</span> results;
    }

    <span class="hljs-comment">/**
     * å¸¦ç›¸ä¼¼åº¦é˜ˆå€¼çš„æœç´¢
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">searchWithThreshold</span><span class="hljs-params">(String query, <span class="hljs-type">int</span> topK, <span class="hljs-type">double</span> threshold)</span> {
        log.info(<span class="hljs-string">"æ‰§è¡Œæœç´¢: query='{}', topK={}, threshold={}"</span>, query, topK, threshold);

        List&lt;Document&gt; results = vectorStore.similaritySearch(
                SearchRequest.query(query)
                        .withTopK(topK)
                        .withSimilarityThreshold(threshold)
        );

        log.info(<span class="hljs-string">"æ‰¾åˆ° {} ä¸ªç›¸å…³æ–‡æ¡£ï¼ˆç›¸ä¼¼åº¦ &gt;= {}ï¼‰"</span>, results.size(), threshold);
        <span class="hljs-keyword">return</span> results;
    }

    <span class="hljs-comment">/**
     * å…ƒæ•°æ®è¿‡æ»¤æœç´¢
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">searchWithMetadataFilter</span><span class="hljs-params">(String query, <span class="hljs-type">int</span> topK, Map&lt;String, Object&gt; filters)</span> {
        log.info(<span class="hljs-string">"æ‰§è¡Œè¿‡æ»¤æœç´¢: query='{}', topK={}, filters={}"</span>, query, topK, filters);

        <span class="hljs-comment">// æ„å»ºè¿‡æ»¤è¡¨è¾¾å¼</span>
        <span class="hljs-type">FilterExpressionBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterExpressionBuilder</span>();
        Filter.<span class="hljs-type">Expression</span> <span class="hljs-variable">filterExpression</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : filters.entrySet()) {
            Filter.<span class="hljs-type">Expression</span> <span class="hljs-variable">expr</span> <span class="hljs-operator">=</span> builder.eq(entry.getKey(), entry.getValue()).build();
            <span class="hljs-keyword">if</span> (filterExpression == <span class="hljs-literal">null</span>) {
                filterExpression = expr;
            } <span class="hljs-keyword">else</span> {
                filterExpression = builder.and(filterExpression, expr).build();
            }
        }

        List&lt;Document&gt; results = vectorStore.similaritySearch(
                SearchRequest.query(query)
                        .withTopK(topK)
                        .withFilterExpression(filterExpression)
        );

        log.info(<span class="hljs-string">"æ‰¾åˆ° {} ä¸ªç›¸å…³æ–‡æ¡£ï¼ˆåº”ç”¨è¿‡æ»¤å™¨åï¼‰"</span>, results.size());
        <span class="hljs-keyword">return</span> results;
    }

    <span class="hljs-comment">/**
     * é«˜çº§æœç´¢ï¼šæ”¯æŒåˆ†ç±»ã€æ—¥æœŸèŒƒå›´ç­‰å¤æ‚è¿‡æ»¤
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">advancedSearch</span><span class="hljs-params">(String query, SearchRequest.Builder builder)</span> {
        List&lt;Document&gt; results = vectorStore.similaritySearch(builder.query(query).build());
        log.info(<span class="hljs-string">"é«˜çº§æœç´¢å®Œæˆï¼Œæ‰¾åˆ° {} ä¸ªç»“æœ"</span>, results.size());
        <span class="hljs-keyword">return</span> results;
    }
}
</code></pre>
<h4 data-id="heading-27">6.3 RAG é—®ç­”æœåŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.service;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.advisor.QuestionAnswerAdvisor;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.messages.Message;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.messages.UserMessage;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.prompt.Prompt;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.prompt.SystemPromptTemplate;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.SearchRequest;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.stream.Collectors;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RagService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ChatClient chatClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorStore vectorStore;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SYSTEM_PROMPT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"""
            ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„çŸ¥è¯†åº“åŠ©æ‰‹ï¼ŒåŸºäºæä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”ç”¨æˆ·é—®é¢˜ã€‚

            å›ç­”è¦æ±‚ï¼š
            1. ä»…åŸºäºæä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”
            2. å¦‚æœä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œæ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·
            3. å›ç­”è¦å‡†ç¡®ã€ç®€æ´ã€ä¸“ä¸š
            4. å¯ä»¥å¼•ç”¨å…·ä½“çš„æ–‡æ¡£æ¥æº

            ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š
            {context}
            """</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RagService</span><span class="hljs-params">(ChatClient.Builder chatClientBuilder, VectorStore vectorStore)</span> {
        <span class="hljs-built_in">this</span>.chatClient = chatClientBuilder.build();
        <span class="hljs-built_in">this</span>.vectorStore = vectorStore;
    }

    <span class="hljs-comment">/**
     * RAG é—®ç­” - åŸºç¡€ç‰ˆæœ¬
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">ask</span><span class="hljs-params">(String question)</span> {
        log.info(<span class="hljs-string">"æ”¶åˆ°é—®é¢˜: {}"</span>, question);

        <span class="hljs-comment">// 1. æ£€ç´¢ç›¸å…³æ–‡æ¡£</span>
        List&lt;Document&gt; relevantDocs = vectorStore.similaritySearch(
                SearchRequest.query(question)
                        .withTopK(<span class="hljs-number">5</span>)
                        .withSimilarityThreshold(<span class="hljs-number">0.7</span>)
        );

        <span class="hljs-keyword">if</span> (relevantDocs.isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æŠ±æ­‰ï¼Œæˆ‘åœ¨çŸ¥è¯†åº“ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ã€‚"</span>;
        }

        <span class="hljs-comment">// 2. æ„å»ºä¸Šä¸‹æ–‡</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> relevantDocs.stream()
                .map(doc -&gt; doc.getContent())
                .collect(Collectors.joining(<span class="hljs-string">"\n\n"</span>));

        log.info(<span class="hljs-string">"æ£€ç´¢åˆ° {} ä¸ªç›¸å…³æ–‡æ¡£"</span>, relevantDocs.size());

        <span class="hljs-comment">// 3. ç”Ÿæˆå›ç­”</span>
        <span class="hljs-type">SystemPromptTemplate</span> <span class="hljs-variable">systemPromptTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemPromptTemplate</span>(SYSTEM_PROMPT);
        <span class="hljs-type">Message</span> <span class="hljs-variable">systemMessage</span> <span class="hljs-operator">=</span> systemPromptTemplate.createMessage(Map.of(<span class="hljs-string">"context"</span>, context));
        <span class="hljs-type">UserMessage</span> <span class="hljs-variable">userMessage</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserMessage</span>(question);

        <span class="hljs-type">Prompt</span> <span class="hljs-variable">prompt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Prompt</span>(List.of(systemMessage, userMessage));
        <span class="hljs-type">String</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> chatClient.prompt(prompt).call().content();

        log.info(<span class="hljs-string">"ç”Ÿæˆå›ç­”å®Œæˆ"</span>);
        <span class="hljs-keyword">return</span> answer;
    }

    <span class="hljs-comment">/**
     * RAG é—®ç­” - ä½¿ç”¨ QuestionAnswerAdvisor
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">askWithAdvisor</span><span class="hljs-params">(String question)</span> {
        <span class="hljs-keyword">return</span> chatClient.prompt()
                .user(question)
                .advisors(<span class="hljs-keyword">new</span> <span class="hljs-title class_">QuestionAnswerAdvisor</span>(vectorStore, SearchRequest.defaults()))
                .call()
                .content();
    }

    <span class="hljs-comment">/**
     * RAG é—®ç­” - å¸¦å¼•ç”¨æ¥æº
     */</span>
    <span class="hljs-keyword">public</span> RagResponse <span class="hljs-title function_">askWithSources</span><span class="hljs-params">(String question, <span class="hljs-type">int</span> topK)</span> {
        log.info(<span class="hljs-string">"æ”¶åˆ°é—®é¢˜ï¼ˆå¸¦æ¥æºï¼‰: {}"</span>, question);

        <span class="hljs-comment">// 1. æ£€ç´¢ç›¸å…³æ–‡æ¡£</span>
        List&lt;Document&gt; relevantDocs = vectorStore.similaritySearch(
                SearchRequest.query(question)
                        .withTopK(topK)
                        .withSimilarityThreshold(<span class="hljs-number">0.7</span>)
        );

        <span class="hljs-keyword">if</span> (relevantDocs.isEmpty()) {
            <span class="hljs-keyword">return</span> RagResponse.builder()
                    .answer(<span class="hljs-string">"æŠ±æ­‰ï¼Œæˆ‘åœ¨çŸ¥è¯†åº“ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ã€‚"</span>)
                    .sources(List.of())
                    .build();
        }

        <span class="hljs-comment">// 2. æ„å»ºä¸Šä¸‹æ–‡</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> relevantDocs.stream()
                .map(doc -&gt; String.format(<span class="hljs-string">"[æ¥æº: %s]\n%s"</span>,
                        doc.getMetadata().getOrDefault(<span class="hljs-string">"filename"</span>, <span class="hljs-string">"æœªçŸ¥"</span>),
                        doc.getContent()))
                .collect(Collectors.joining(<span class="hljs-string">"\n\n"</span>));

        <span class="hljs-comment">// 3. ç”Ÿæˆå›ç­”</span>
        <span class="hljs-type">SystemPromptTemplate</span> <span class="hljs-variable">systemPromptTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemPromptTemplate</span>(SYSTEM_PROMPT +
                <span class="hljs-string">"\n\nè¯·åœ¨å›ç­”æœ«å°¾åˆ—å‡ºå¼•ç”¨çš„æ¥æºæ–‡æ¡£ã€‚"</span>);
        <span class="hljs-type">Message</span> <span class="hljs-variable">systemMessage</span> <span class="hljs-operator">=</span> systemPromptTemplate.createMessage(Map.of(<span class="hljs-string">"context"</span>, context));
        <span class="hljs-type">UserMessage</span> <span class="hljs-variable">userMessage</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserMessage</span>(question);

        <span class="hljs-type">Prompt</span> <span class="hljs-variable">prompt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Prompt</span>(List.of(systemMessage, userMessage));
        <span class="hljs-type">String</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> chatClient.prompt(prompt).call().content();

        <span class="hljs-comment">// 4. æå–æ¥æºä¿¡æ¯</span>
        List&lt;DocumentSource&gt; sources = relevantDocs.stream()
                .map(doc -&gt; DocumentSource.builder()
                        .filename(doc.getMetadata().getOrDefault(<span class="hljs-string">"filename"</span>, <span class="hljs-string">"æœªçŸ¥"</span>).toString())
                        .content(doc.getContent().substring(<span class="hljs-number">0</span>, Math.min(<span class="hljs-number">200</span>, doc.getContent().length())))
                        .metadata(doc.getMetadata())
                        .build())
                .collect(Collectors.toList());

        <span class="hljs-keyword">return</span> RagResponse.builder()
                .answer(answer)
                .sources(sources)
                .build();
    }

    <span class="hljs-comment">/**
     * RAG å“åº”å¯¹è±¡
     */</span>
    <span class="hljs-meta">@lombok</span>.Builder
    <span class="hljs-meta">@lombok</span>.Data
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RagResponse</span> {
        <span class="hljs-keyword">private</span> String answer;
        <span class="hljs-keyword">private</span> List&lt;DocumentSource&gt; sources;
    }

    <span class="hljs-comment">/**
     * æ–‡æ¡£æ¥æºå¯¹è±¡
     */</span>
    <span class="hljs-meta">@lombok</span>.Builder
    <span class="hljs-meta">@lombok</span>.Data
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentSource</span> {
        <span class="hljs-keyword">private</span> String filename;
        <span class="hljs-keyword">private</span> String content;
        <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; metadata;
    }
}
</code></pre>
<h4 data-id="heading-28">6.4 æµå¼ RAG å“åº”</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.service;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.messages.Message;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.messages.UserMessage;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.prompt.Prompt;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.prompt.SystemPromptTemplate;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.SearchRequest;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> reactor.core.publisher.Flux;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.stream.Collectors;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamingRagService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ChatClient chatClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorStore vectorStore;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SYSTEM_PROMPT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"""
            ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„çŸ¥è¯†åº“åŠ©æ‰‹ã€‚åŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”ç”¨æˆ·é—®é¢˜ï¼š

            {context}

            è¯·ç¡®ä¿å›ç­”å‡†ç¡®ã€ä¸“ä¸šï¼Œå¦‚æœä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·æ˜ç¡®å‘ŠçŸ¥ã€‚
            """</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">StreamingRagService</span><span class="hljs-params">(ChatClient.Builder chatClientBuilder, VectorStore vectorStore)</span> {
        <span class="hljs-built_in">this</span>.chatClient = chatClientBuilder.build();
        <span class="hljs-built_in">this</span>.vectorStore = vectorStore;
    }

    <span class="hljs-comment">/**
     * æµå¼ RAG é—®ç­”
     */</span>
    <span class="hljs-keyword">public</span> Flux&lt;String&gt; <span class="hljs-title function_">askStreaming</span><span class="hljs-params">(String question)</span> {
        log.info(<span class="hljs-string">"å¼€å§‹æµå¼é—®ç­”: {}"</span>, question);

        <span class="hljs-comment">// 1. æ£€ç´¢ç›¸å…³æ–‡æ¡£</span>
        List&lt;Document&gt; relevantDocs = vectorStore.similaritySearch(
                SearchRequest.query(question)
                        .withTopK(<span class="hljs-number">5</span>)
                        .withSimilarityThreshold(<span class="hljs-number">0.7</span>)
        );

        <span class="hljs-keyword">if</span> (relevantDocs.isEmpty()) {
            <span class="hljs-keyword">return</span> Flux.just(<span class="hljs-string">"æŠ±æ­‰ï¼Œæˆ‘åœ¨çŸ¥è¯†åº“ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ã€‚"</span>);
        }

        <span class="hljs-comment">// 2. æ„å»ºä¸Šä¸‹æ–‡</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> relevantDocs.stream()
                .map(Document::getContent)
                .collect(Collectors.joining(<span class="hljs-string">"\n\n"</span>));

        <span class="hljs-comment">// 3. æµå¼ç”Ÿæˆå›ç­”</span>
        <span class="hljs-type">SystemPromptTemplate</span> <span class="hljs-variable">systemPromptTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemPromptTemplate</span>(SYSTEM_PROMPT);
        <span class="hljs-type">Message</span> <span class="hljs-variable">systemMessage</span> <span class="hljs-operator">=</span> systemPromptTemplate.createMessage(Map.of(<span class="hljs-string">"context"</span>, context));
        <span class="hljs-type">UserMessage</span> <span class="hljs-variable">userMessage</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserMessage</span>(question);

        <span class="hljs-type">Prompt</span> <span class="hljs-variable">prompt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Prompt</span>(List.of(systemMessage, userMessage));

        <span class="hljs-keyword">return</span> chatClient.prompt(prompt).stream().content();
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-29">7. é«˜çº§ç‰¹æ€§</h3>
<h4 data-id="heading-30">7.1 å…ƒæ•°æ®è¿‡æ»¤ä¸æ··åˆæŸ¥è¯¢</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.service;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.SearchRequest;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.filter.Filter;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.filter.FilterExpressionBuilder;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.time.LocalDate;
<span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedSearchService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorStore vectorStore;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AdvancedSearchService</span><span class="hljs-params">(VectorStore vectorStore)</span> {
        <span class="hljs-built_in">this</span>.vectorStore = vectorStore;
    }

    <span class="hljs-comment">/**
     * æŒ‰æ–‡æ¡£ç±»å‹æœç´¢
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">searchByDocumentType</span><span class="hljs-params">(String query, String docType, <span class="hljs-type">int</span> topK)</span> {
        <span class="hljs-type">FilterExpressionBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterExpressionBuilder</span>();
        Filter.<span class="hljs-type">Expression</span> <span class="hljs-variable">filter</span> <span class="hljs-operator">=</span> builder.eq(<span class="hljs-string">"doc_type"</span>, docType).build();

        <span class="hljs-keyword">return</span> vectorStore.similaritySearch(
                SearchRequest.query(query)
                        .withTopK(topK)
                        .withFilterExpression(filter)
        );
    }

    <span class="hljs-comment">/**
     * æŒ‰æ—¥æœŸèŒƒå›´æœç´¢
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">searchByDateRange</span><span class="hljs-params">(String query, LocalDate startDate,
                                           LocalDate endDate, <span class="hljs-type">int</span> topK)</span> {
        <span class="hljs-type">FilterExpressionBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterExpressionBuilder</span>();

        <span class="hljs-type">DateTimeFormatter</span> <span class="hljs-variable">formatter</span> <span class="hljs-operator">=</span> DateTimeFormatter.ISO_DATE;
        <span class="hljs-type">String</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> startDate.format(formatter);
        <span class="hljs-type">String</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> endDate.format(formatter);

        Filter.<span class="hljs-type">Expression</span> <span class="hljs-variable">filter</span> <span class="hljs-operator">=</span> builder.and(
                builder.gte(<span class="hljs-string">"date"</span>, start),
                builder.lte(<span class="hljs-string">"date"</span>, end)
        ).build();

        <span class="hljs-keyword">return</span> vectorStore.similaritySearch(
                SearchRequest.query(query)
                        .withTopK(topK)
                        .withFilterExpression(filter)
        );
    }

    <span class="hljs-comment">/**
     * ç»„åˆè¿‡æ»¤ï¼šç±»å‹ + æ ‡ç­¾ + æ—¥æœŸ
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">complexSearch</span><span class="hljs-params">(String query, String docType,
                                       List&lt;String&gt; tags, LocalDate afterDate, <span class="hljs-type">int</span> topK)</span> {
        <span class="hljs-type">FilterExpressionBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterExpressionBuilder</span>();

        <span class="hljs-comment">// æ–‡æ¡£ç±»å‹è¿‡æ»¤</span>
        Filter.<span class="hljs-type">Expression</span> <span class="hljs-variable">typeFilter</span> <span class="hljs-operator">=</span> builder.eq(<span class="hljs-string">"doc_type"</span>, docType).build();

        <span class="hljs-comment">// æ ‡ç­¾è¿‡æ»¤ï¼ˆä»»ä¸€åŒ¹é…ï¼‰</span>
        Filter.<span class="hljs-type">Expression</span> <span class="hljs-variable">tagFilter</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">for</span> (String tag : tags) {
            Filter.<span class="hljs-type">Expression</span> <span class="hljs-variable">tagExpr</span> <span class="hljs-operator">=</span> builder.eq(<span class="hljs-string">"tags"</span>, tag).build();
            <span class="hljs-keyword">if</span> (tagFilter == <span class="hljs-literal">null</span>) {
                tagFilter = tagExpr;
            } <span class="hljs-keyword">else</span> {
                tagFilter = builder.or(tagFilter, tagExpr).build();
            }
        }

        <span class="hljs-comment">// æ—¥æœŸè¿‡æ»¤</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">afterDateStr</span> <span class="hljs-operator">=</span> afterDate.format(DateTimeFormatter.ISO_DATE);
        Filter.<span class="hljs-type">Expression</span> <span class="hljs-variable">dateFilter</span> <span class="hljs-operator">=</span> builder.gte(<span class="hljs-string">"date"</span>, afterDateStr).build();

        <span class="hljs-comment">// ç»„åˆæ‰€æœ‰è¿‡æ»¤å™¨</span>
        Filter.<span class="hljs-type">Expression</span> <span class="hljs-variable">combinedFilter</span> <span class="hljs-operator">=</span> builder.and(
                builder.and(typeFilter, tagFilter),
                dateFilter
        ).build();

        <span class="hljs-keyword">return</span> vectorStore.similaritySearch(
                SearchRequest.query(query)
                        .withTopK(topK)
                        .withFilterExpression(combinedFilter)
        );
    }

    <span class="hljs-comment">/**
     * æŒ‰ä½œè€…å’Œéƒ¨é—¨æœç´¢
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">searchByAuthorAndDepartment</span><span class="hljs-params">(String query, String author,
                                                     String department, <span class="hljs-type">int</span> topK)</span> {
        <span class="hljs-type">FilterExpressionBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterExpressionBuilder</span>();

        Filter.<span class="hljs-type">Expression</span> <span class="hljs-variable">filter</span> <span class="hljs-operator">=</span> builder.and(
                builder.eq(<span class="hljs-string">"author"</span>, author),
                builder.eq(<span class="hljs-string">"department"</span>, department)
        ).build();

        <span class="hljs-keyword">return</span> vectorStore.similaritySearch(
                SearchRequest.query(query)
                        .withTopK(topK)
                        .withSimilarityThreshold(<span class="hljs-number">0.6</span>)
                        .withFilterExpression(filter)
        );
    }
}
</code></pre>
<h4 data-id="heading-31">7.2 æ–‡æ¡£ç®¡ç†æœåŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.service;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisPooled;
<span class="hljs-keyword">import</span> redis.clients.jedis.search.Query;
<span class="hljs-keyword">import</span> redis.clients.jedis.search.SearchResult;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentManagementService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorStore vectorStore;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JedisPooled jedisPooled;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DocumentManagementService</span><span class="hljs-params">(VectorStore vectorStore, JedisPooled jedisPooled)</span> {
        <span class="hljs-built_in">this</span>.vectorStore = vectorStore;
        <span class="hljs-built_in">this</span>.jedisPooled = jedisPooled;
    }

    <span class="hljs-comment">/**
     * åˆ é™¤æ–‡æ¡£
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteDocuments</span><span class="hljs-params">(List&lt;String&gt; documentIds)</span> {
        log.info(<span class="hljs-string">"åˆ é™¤æ–‡æ¡£: {}"</span>, documentIds);
        vectorStore.delete(documentIds);
        log.info(<span class="hljs-string">"âœ… å·²åˆ é™¤ {} ä¸ªæ–‡æ¡£"</span>, documentIds.size());
    }

    <span class="hljs-comment">/**
     * æŒ‰å…ƒæ•°æ®åˆ é™¤æ–‡æ¡£
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteByMetadata</span><span class="hljs-params">(String metadataKey, String metadataValue)</span> {
        log.info(<span class="hljs-string">"æŒ‰å…ƒæ•°æ®åˆ é™¤: {}={}"</span>, metadataKey, metadataValue);

        <span class="hljs-comment">// æŸ¥è¯¢ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">queryStr</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"@%s:%s"</span>, metadataKey, metadataValue);
        <span class="hljs-type">Query</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Query</span>(queryStr).limit(<span class="hljs-number">0</span>, <span class="hljs-number">10000</span>);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">SearchResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jedisPooled.ftSearch(<span class="hljs-string">"spring-ai-index"</span>, query);
            List&lt;String&gt; idsToDelete = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

            result.getDocuments().forEach(doc -&gt; {
                idsToDelete.add(doc.getId());
            });

            <span class="hljs-keyword">if</span> (!idsToDelete.isEmpty()) {
                deleteDocuments(idsToDelete);
            }

            log.info(<span class="hljs-string">"âœ… å…±åˆ é™¤ {} ä¸ªæ–‡æ¡£"</span>, idsToDelete.size());

        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"åˆ é™¤å¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åˆ é™¤æ–‡æ¡£å¤±è´¥"</span>, e);
        }
    }

    <span class="hljs-comment">/**
     * æ›´æ–°æ–‡æ¡£å…ƒæ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateDocumentMetadata</span><span class="hljs-params">(String documentId, Map&lt;String, Object&gt; newMetadata)</span> {
        log.info(<span class="hljs-string">"æ›´æ–°æ–‡æ¡£å…ƒæ•°æ®: id={}, metadata={}"</span>, documentId, newMetadata);

        <span class="hljs-comment">// Redis ä¸æ”¯æŒç›´æ¥æ›´æ–°ï¼Œéœ€è¦å…ˆåˆ é™¤å†æ·»åŠ </span>
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦å…ˆæŸ¥è¯¢æ–‡æ¡£å†…å®¹</span>

        log.info(<span class="hljs-string">"âœ… æ–‡æ¡£å…ƒæ•°æ®å·²æ›´æ–°"</span>);
    }

    <span class="hljs-comment">/**
     * ç»Ÿè®¡æ–‡æ¡£æ•°é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">countDocuments</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Query</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Query</span>(<span class="hljs-string">"*"</span>).limit(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
            <span class="hljs-type">SearchResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jedisPooled.ftSearch(<span class="hljs-string">"spring-ai-index"</span>, query);
            <span class="hljs-keyword">return</span> result.getTotalResults();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"ç»Ÿè®¡æ–‡æ¡£å¤±è´¥"</span>, e);
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }

    <span class="hljs-comment">/**
     * æ¸…ç©ºæ‰€æœ‰æ–‡æ¡£
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearAllDocuments</span><span class="hljs-params">()</span> {
        log.warn(<span class="hljs-string">"âš ï¸  å‡†å¤‡æ¸…ç©ºæ‰€æœ‰æ–‡æ¡£"</span>);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Query</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Query</span>(<span class="hljs-string">"*"</span>).limit(<span class="hljs-number">0</span>, <span class="hljs-number">10000</span>);
            <span class="hljs-type">SearchResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> jedisPooled.ftSearch(<span class="hljs-string">"spring-ai-index"</span>, query);

            List&lt;String&gt; allIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            result.getDocuments().forEach(doc -&gt; allIds.add(doc.getId()));

            <span class="hljs-keyword">if</span> (!allIds.isEmpty()) {
                vectorStore.delete(allIds);
                log.info(<span class="hljs-string">"âœ… å·²æ¸…ç©º {} ä¸ªæ–‡æ¡£"</span>, allIds.size());
            } <span class="hljs-keyword">else</span> {
                log.info(<span class="hljs-string">"â„¹ï¸  æ²¡æœ‰æ–‡æ¡£éœ€è¦æ¸…ç©º"</span>);
            }

        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"æ¸…ç©ºæ–‡æ¡£å¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ¸…ç©ºæ–‡æ¡£å¤±è´¥"</span>, e);
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-32">8. REST API æ§åˆ¶å™¨</h3>
<h4 data-id="heading-33">8.1 æ–‡æ¡£ä¸Šä¼  API</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.controller;

<span class="hljs-keyword">import</span> com.example.springai.redis.service.DocumentProcessService;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.core.io.ByteArrayResource;
<span class="hljs-keyword">import</span> org.springframework.http.HttpStatus;
<span class="hljs-keyword">import</span> org.springframework.http.ResponseEntity;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;
<span class="hljs-keyword">import</span> org.springframework.web.multipart.MultipartFile;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/documents")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DocumentProcessService documentProcessService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DocumentController</span><span class="hljs-params">(DocumentProcessService documentProcessService)</span> {
        <span class="hljs-built_in">this</span>.documentProcessService = documentProcessService;
    }

    <span class="hljs-comment">/**
     * ä¸Šä¼ æ–‡æ¡£
     */</span>
    <span class="hljs-meta">@PostMapping("/upload")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;ApiResponse&gt; <span class="hljs-title function_">uploadDocument</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam("file")</span> MultipartFile file,
            <span class="hljs-meta">@RequestParam(value = "category", required = false)</span> String category,
            <span class="hljs-meta">@RequestParam(value = "tags", required = false)</span> String tags)</span> {

        <span class="hljs-keyword">try</span> {
            log.info(<span class="hljs-string">"æ”¶åˆ°æ–‡æ¡£ä¸Šä¼ è¯·æ±‚: {}"</span>, file.getOriginalFilename());

            <span class="hljs-comment">// å‡†å¤‡å…ƒæ•°æ®</span>
            Map&lt;String, Object&gt; metadata = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            <span class="hljs-keyword">if</span> (category != <span class="hljs-literal">null</span>) {
                metadata.put(<span class="hljs-string">"category"</span>, category);
            }
            <span class="hljs-keyword">if</span> (tags != <span class="hljs-literal">null</span>) {
                metadata.put(<span class="hljs-string">"tags"</span>, tags);
            }
            metadata.put(<span class="hljs-string">"upload_time"</span>, System.currentTimeMillis());

            <span class="hljs-comment">// å¤„ç†æ–‡æ¡£</span>
            <span class="hljs-type">ByteArrayResource</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayResource</span>(file.getBytes()) {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getFilename</span><span class="hljs-params">()</span> {
                    <span class="hljs-keyword">return</span> file.getOriginalFilename();
                }
            };

            <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> documentProcessService.processAndStoreDocument(resource, metadata);

            <span class="hljs-keyword">return</span> ResponseEntity.ok(ApiResponse.success(result));

        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"æ–‡æ¡£ä¸Šä¼ å¤±è´¥"</span>, e);
            <span class="hljs-keyword">return</span> ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)
                    .body(ApiResponse.error(<span class="hljs-string">"æ–‡æ¡£ä¸Šä¼ å¤±è´¥: "</span> + e.getMessage()));
        }
    }

    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiResponse</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> success;
        <span class="hljs-keyword">private</span> String message;
        <span class="hljs-keyword">private</span> Object data;

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ApiResponse <span class="hljs-title function_">success</span><span class="hljs-params">(Object data)</span> {
            <span class="hljs-type">ApiResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiResponse</span>();
            response.setSuccess(<span class="hljs-literal">true</span>);
            response.setData(data);
            <span class="hljs-keyword">return</span> response;
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ApiResponse <span class="hljs-title function_">error</span><span class="hljs-params">(String message)</span> {
            <span class="hljs-type">ApiResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiResponse</span>();
            response.setSuccess(<span class="hljs-literal">false</span>);
            response.setMessage(message);
            <span class="hljs-keyword">return</span> response;
        }
    }
}
</code></pre>
<h4 data-id="heading-34">8.2 é—®ç­” API</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.controller;

<span class="hljs-keyword">import</span> com.example.springai.redis.service.RagService;
<span class="hljs-keyword">import</span> com.example.springai.redis.service.StreamingRagService;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.http.MediaType;
<span class="hljs-keyword">import</span> org.springframework.http.ResponseEntity;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;
<span class="hljs-keyword">import</span> reactor.core.publisher.Flux;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/chat")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RagService ragService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> StreamingRagService streamingRagService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ChatController</span><span class="hljs-params">(RagService ragService, StreamingRagService streamingRagService)</span> {
        <span class="hljs-built_in">this</span>.ragService = ragService;
        <span class="hljs-built_in">this</span>.streamingRagService = streamingRagService;
    }

    <span class="hljs-comment">/**
     * æ™®é€šé—®ç­”
     */</span>
    <span class="hljs-meta">@PostMapping("/ask")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;ChatResponse&gt; <span class="hljs-title function_">ask</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> ChatRequest request)</span> {
        log.info(<span class="hljs-string">"æ”¶åˆ°é—®é¢˜: {}"</span>, request.getQuestion());

        <span class="hljs-type">String</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> ragService.ask(request.getQuestion());

        <span class="hljs-keyword">return</span> ResponseEntity.ok(ChatResponse.builder()
                .question(request.getQuestion())
                .answer(answer)
                .build());
    }

    <span class="hljs-comment">/**
     * å¸¦å¼•ç”¨æ¥æºçš„é—®ç­”
     */</span>
    <span class="hljs-meta">@PostMapping("/ask-with-sources")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;RagService.RagResponse&gt; askWithSources(<span class="hljs-meta">@RequestBody</span> ChatRequest request) {
        log.info(<span class="hljs-string">"æ”¶åˆ°é—®é¢˜ï¼ˆéœ€è¦æ¥æºï¼‰: {}"</span>, request.getQuestion());

        <span class="hljs-type">int</span> <span class="hljs-variable">topK</span> <span class="hljs-operator">=</span> request.getTopK() != <span class="hljs-literal">null</span> ? request.getTopK() : <span class="hljs-number">5</span>;
        RagService.<span class="hljs-type">RagResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> ragService.askWithSources(request.getQuestion(), topK);

        <span class="hljs-keyword">return</span> ResponseEntity.ok(response);
    }

    <span class="hljs-comment">/**
     * æµå¼é—®ç­”
     */</span>
    <span class="hljs-meta">@GetMapping(value = "/ask-stream", produces = MediaType.TEXT_EVENT_STREAM_VALUE)</span>
    <span class="hljs-keyword">public</span> Flux&lt;String&gt; <span class="hljs-title function_">askStream</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String question)</span> {
        log.info(<span class="hljs-string">"æ”¶åˆ°æµå¼é—®é¢˜: {}"</span>, question);
        <span class="hljs-keyword">return</span> streamingRagService.askStreaming(question);
    }

    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatRequest</span> {
        <span class="hljs-keyword">private</span> String question;
        <span class="hljs-keyword">private</span> Integer topK;
    }

    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@lombok</span>.Builder
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatResponse</span> {
        <span class="hljs-keyword">private</span> String question;
        <span class="hljs-keyword">private</span> String answer;
    }
}
</code></pre>
<h4 data-id="heading-35">8.3 æœç´¢ API</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.controller;

<span class="hljs-keyword">import</span> com.example.springai.redis.service.VectorSearchService;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.http.ResponseEntity;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.stream.Collectors;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/search")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorSearchService searchService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SearchController</span><span class="hljs-params">(VectorSearchService searchService)</span> {
        <span class="hljs-built_in">this</span>.searchService = searchService;
    }

    <span class="hljs-comment">/**
     * åŸºç¡€æœç´¢
     */</span>
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;SearchResponse&gt; <span class="hljs-title function_">search</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> SearchRequest request)</span> {
        log.info(<span class="hljs-string">"æ”¶åˆ°æœç´¢è¯·æ±‚: {}"</span>, request.getQuery());

        List&lt;Document&gt; documents = searchService.search(
                request.getQuery(),
                request.getTopK() != <span class="hljs-literal">null</span> ? request.getTopK() : <span class="hljs-number">10</span>
        );

        List&lt;SearchResult&gt; results = documents.stream()
                .map(doc -&gt; SearchResult.builder()
                        .content(doc.getContent())
                        .metadata(doc.getMetadata())
                        .build())
                .collect(Collectors.toList());

        <span class="hljs-keyword">return</span> ResponseEntity.ok(SearchResponse.builder()
                .query(request.getQuery())
                .total(results.size())
                .results(results)
                .build());
    }

    <span class="hljs-comment">/**
     * å¸¦è¿‡æ»¤çš„æœç´¢
     */</span>
    <span class="hljs-meta">@PostMapping("/filtered")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;SearchResponse&gt; <span class="hljs-title function_">searchWithFilter</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> FilteredSearchRequest request)</span> {
        log.info(<span class="hljs-string">"æ”¶åˆ°è¿‡æ»¤æœç´¢è¯·æ±‚: query={}, filters={}"</span>, request.getQuery(), request.getFilters());

        List&lt;Document&gt; documents = searchService.searchWithMetadataFilter(
                request.getQuery(),
                request.getTopK() != <span class="hljs-literal">null</span> ? request.getTopK() : <span class="hljs-number">10</span>,
                request.getFilters()
        );

        List&lt;SearchResult&gt; results = documents.stream()
                .map(doc -&gt; SearchResult.builder()
                        .content(doc.getContent())
                        .metadata(doc.getMetadata())
                        .build())
                .collect(Collectors.toList());

        <span class="hljs-keyword">return</span> ResponseEntity.ok(SearchResponse.builder()
                .query(request.getQuery())
                .total(results.size())
                .results(results)
                .build());
    }

    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchRequest</span> {
        <span class="hljs-keyword">private</span> String query;
        <span class="hljs-keyword">private</span> Integer topK;
    }

    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FilteredSearchRequest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SearchRequest</span> {
        <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; filters;
    }

    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@lombok</span>.Builder
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchResponse</span> {
        <span class="hljs-keyword">private</span> String query;
        <span class="hljs-keyword">private</span> Integer total;
        <span class="hljs-keyword">private</span> List&lt;SearchResult&gt; results;
    }

    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@lombok</span>.Builder
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchResult</span> {
        <span class="hljs-keyword">private</span> String content;
        <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; metadata;
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-36">9. æ€§èƒ½ä¼˜åŒ–ä¸è°ƒä¼˜</h3>
<h4 data-id="heading-37">9.1 Redis é…ç½®ä¼˜åŒ–</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application-prod.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">data:</span>
    <span class="hljs-attr">redis:</span>
      <span class="hljs-comment"># è¿æ¥æ± é…ç½®</span>
      <span class="hljs-attr">jedis:</span>
        <span class="hljs-attr">pool:</span>
          <span class="hljs-attr">max-active:</span> <span class="hljs-number">50</span>      <span class="hljs-comment"># æœ€å¤§è¿æ¥æ•°</span>
          <span class="hljs-attr">max-idle:</span> <span class="hljs-number">20</span>        <span class="hljs-comment"># æœ€å¤§ç©ºé—²è¿æ¥</span>
          <span class="hljs-attr">min-idle:</span> <span class="hljs-number">10</span>        <span class="hljs-comment"># æœ€å°ç©ºé—²è¿æ¥</span>
          <span class="hljs-attr">max-wait:</span> <span class="hljs-string">5000ms</span>    <span class="hljs-comment"># æœ€å¤§ç­‰å¾…æ—¶é—´</span>

      <span class="hljs-comment"># è¶…æ—¶é…ç½®</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span>            <span class="hljs-comment"># å‘½ä»¤è¶…æ—¶</span>
      <span class="hljs-attr">connect-timeout:</span> <span class="hljs-string">5s</span>     <span class="hljs-comment"># è¿æ¥è¶…æ—¶</span>

      <span class="hljs-comment"># é›†ç¾¤é…ç½®ï¼ˆå¯é€‰ï¼‰</span>
      <span class="hljs-attr">cluster:</span>
        <span class="hljs-attr">nodes:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">redis-node1:6379</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">redis-node2:6379</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">redis-node3:6379</span>
        <span class="hljs-attr">max-redirects:</span> <span class="hljs-number">3</span>

<span class="hljs-attr">app:</span>
  <span class="hljs-attr">vector:</span>
    <span class="hljs-comment"># HNSW å‚æ•°ä¼˜åŒ–</span>
    <span class="hljs-attr">algorithm:</span> <span class="hljs-string">HNSW</span>
    <span class="hljs-attr">hnsw:</span>
      <span class="hljs-attr">m:</span> <span class="hljs-number">16</span>                   <span class="hljs-comment"># è¿æ¥æ•°ï¼ˆ8-64ï¼Œè¶Šå¤§è¶Šå‡†ç¡®ä½†å ç”¨æ›´å¤šå†…å­˜ï¼‰</span>
      <span class="hljs-attr">ef-construction:</span> <span class="hljs-number">200</span>    <span class="hljs-comment"># æ„å»ºæ—¶çš„æœç´¢æ·±åº¦ï¼ˆ100-500ï¼‰</span>
      <span class="hljs-attr">ef-runtime:</span> <span class="hljs-number">10</span>          <span class="hljs-comment"># æŸ¥è¯¢æ—¶çš„æœç´¢æ·±åº¦ï¼ˆtopKçš„1-2å€ï¼‰</span>
</code></pre>
<h4 data-id="heading-38">9.2 æ‰¹é‡å¤„ç†ä¼˜åŒ–</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.service;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchProcessService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorStore vectorStore;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ExecutorService executorService;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">BATCH_SIZE</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BatchProcessService</span><span class="hljs-params">(VectorStore vectorStore)</span> {
        <span class="hljs-built_in">this</span>.vectorStore = vectorStore;
        <span class="hljs-built_in">this</span>.executorService = Executors.newFixedThreadPool(<span class="hljs-number">4</span>);
    }

    <span class="hljs-comment">/**
     * æ‰¹é‡æ·»åŠ æ–‡æ¡£ï¼ˆä¼˜åŒ–ç‰ˆæœ¬ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchAddDocuments</span><span class="hljs-params">(List&lt;Document&gt; documents)</span> {
        log.info(<span class="hljs-string">"å¼€å§‹æ‰¹é‡æ·»åŠ  {} ä¸ªæ–‡æ¡£"</span>, documents.size());
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-comment">// åˆ†æ‰¹å¤„ç†</span>
        List&lt;List&lt;Document&gt;&gt; batches = partition(documents, BATCH_SIZE);
        log.info(<span class="hljs-string">"åˆ†æˆ {} æ‰¹ï¼Œæ¯æ‰¹ {} ä¸ªæ–‡æ¡£"</span>, batches.size(), BATCH_SIZE);

        <span class="hljs-comment">// å¹¶è¡Œå¤„ç†å„æ‰¹æ¬¡</span>
        List&lt;CompletableFuture&lt;Void&gt;&gt; futures = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; batches.size(); i++) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">batchIndex</span> <span class="hljs-operator">=</span> i;
            <span class="hljs-keyword">final</span> List&lt;Document&gt; batch = batches.get(i);

            CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    vectorStore.add(batch);
                    log.info(<span class="hljs-string">"âœ… æ‰¹æ¬¡ {} å®Œæˆï¼Œå¤„ç†äº† {} ä¸ªæ–‡æ¡£"</span>, batchIndex + <span class="hljs-number">1</span>, batch.size());
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    log.error(<span class="hljs-string">"âŒ æ‰¹æ¬¡ {} å¤±è´¥"</span>, batchIndex + <span class="hljs-number">1</span>, e);
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
                }
            }, executorService);

            futures.add(future);
        }

        <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰æ‰¹æ¬¡å®Œæˆ</span>
        CompletableFuture.allOf(futures.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>[<span class="hljs-number">0</span>])).join();

        <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
        log.info(<span class="hljs-string">"âœ… æ‰¹é‡æ·»åŠ å®Œæˆï¼Œå…± {} ä¸ªæ–‡æ¡£ï¼Œè€—æ—¶ {}ms"</span>, documents.size(), duration);
    }

    <span class="hljs-comment">/**
     * åˆ†å‰²åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">private</span> &lt;T&gt; List&lt;List&lt;T&gt;&gt; <span class="hljs-title function_">partition</span><span class="hljs-params">(List&lt;T&gt; list, <span class="hljs-type">int</span> size)</span> {
        List&lt;List&lt;T&gt;&gt; partitions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; list.size(); i += size) {
            partitions.add(list.subList(i, Math.min(i + size, list.size())));
        }
        <span class="hljs-keyword">return</span> partitions;
    }
}
</code></pre>
<h4 data-id="heading-39">9.3 ç¼“å­˜ç­–ç•¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.service;

<span class="hljs-keyword">import</span> com.github.benmanes.caffeine.cache.Cache;
<span class="hljs-keyword">import</span> com.github.benmanes.caffeine.cache.Caffeine;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.time.Duration;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CachedSearchService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorSearchService searchService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Cache&lt;String, List&lt;Document&gt;&gt; searchCache;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CachedSearchService</span><span class="hljs-params">(VectorSearchService searchService)</span> {
        <span class="hljs-built_in">this</span>.searchService = searchService;

        <span class="hljs-comment">// é…ç½®ç¼“å­˜</span>
        <span class="hljs-built_in">this</span>.searchCache = Caffeine.newBuilder()
                .maximumSize(<span class="hljs-number">1000</span>)                    <span class="hljs-comment">// æœ€å¤šç¼“å­˜ 1000 ä¸ªæŸ¥è¯¢</span>
                .expireAfterWrite(Duration.ofHours(<span class="hljs-number">1</span>)) <span class="hljs-comment">// 1å°æ—¶åè¿‡æœŸ</span>
                .recordStats()                         <span class="hljs-comment">// è®°å½•ç»Ÿè®¡ä¿¡æ¯</span>
                .build();
    }

    <span class="hljs-comment">/**
     * å¸¦ç¼“å­˜çš„æœç´¢
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">search</span><span class="hljs-params">(String query, <span class="hljs-type">int</span> topK)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> query + <span class="hljs-string">":"</span> + topK;

        <span class="hljs-keyword">return</span> searchCache.get(cacheKey, key -&gt; {
            log.info(<span class="hljs-string">"ç¼“å­˜æœªå‘½ä¸­ï¼Œæ‰§è¡Œæœç´¢: {}"</span>, query);
            <span class="hljs-keyword">return</span> searchService.search(query, topK);
        });
    }

    <span class="hljs-comment">/**
     * æ¸…é™¤ç¼“å­˜
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearCache</span><span class="hljs-params">()</span> {
        searchCache.invalidateAll();
        log.info(<span class="hljs-string">"âœ… æœç´¢ç¼“å­˜å·²æ¸…ç©º"</span>);
    }

    <span class="hljs-comment">/**
     * è·å–ç¼“å­˜ç»Ÿè®¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCacheStats</span><span class="hljs-params">()</span> {
        <span class="hljs-type">var</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> searchCache.stats();
        log.info(<span class="hljs-string">"ç¼“å­˜ç»Ÿè®¡ - å‘½ä¸­ç‡: {:.2f}%, è¯·æ±‚æ•°: {}, å‘½ä¸­æ•°: {}, æœªå‘½ä¸­æ•°: {}"</span>,
                stats.hitRate() * <span class="hljs-number">100</span>,
                stats.requestCount(),
                stats.hitCount(),
                stats.missCount());
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-40">10. å®æˆ˜æ¡ˆä¾‹ï¼šä¼ä¸šæ–‡æ¡£é—®ç­”ç³»ç»Ÿ</h3>
<h4 data-id="heading-41">10.1 å®Œæ•´ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.springai.redis.demo;

<span class="hljs-keyword">import</span> com.example.springai.redis.service.*;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.boot.CommandLineRunner;
<span class="hljs-keyword">import</span> org.springframework.core.io.ClassPathResource;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnterpriseDocQADemo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandLineRunner</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DocumentProcessService documentProcessService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RagService ragService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VectorSearchService searchService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">EnterpriseDocQADemo</span><span class="hljs-params">(
            DocumentProcessService documentProcessService,
            RagService ragService,
            VectorSearchService searchService)</span> {
        <span class="hljs-built_in">this</span>.documentProcessService = documentProcessService;
        <span class="hljs-built_in">this</span>.ragService = ragService;
        <span class="hljs-built_in">this</span>.searchService = searchService;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> <span class="hljs-keyword">throws</span> Exception {
        log.info(<span class="hljs-string">"========================================"</span>);
        log.info(<span class="hljs-string">"ä¼ä¸šæ–‡æ¡£é—®ç­”ç³»ç»Ÿæ¼”ç¤º"</span>);
        log.info(<span class="hljs-string">"========================================\n"</span>);

        <span class="hljs-comment">// æ­¥éª¤ 1: åŠ è½½ä¼ä¸šæ–‡æ¡£</span>
        loadEnterpriseDocuments();

        <span class="hljs-comment">// æ­¥éª¤ 2: æ‰§è¡Œé—®ç­”</span>
        performQuestionAnswering();

        <span class="hljs-comment">// æ­¥éª¤ 3: æ‰§è¡Œæœç´¢</span>
        performSearch();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadEnterpriseDocuments</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"ğŸ“ æ­¥éª¤ 1: åŠ è½½ä¼ä¸šæ–‡æ¡£"</span>);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åŠ è½½æŠ€æœ¯æ–‡æ¡£</span>
            Map&lt;String, Object&gt; techMetadata = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            techMetadata.put(<span class="hljs-string">"category"</span>, <span class="hljs-string">"æŠ€æœ¯æ–‡æ¡£"</span>);
            techMetadata.put(<span class="hljs-string">"department"</span>, <span class="hljs-string">"ç ”å‘éƒ¨"</span>);

            documentProcessService.processAndStoreDocument(
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathResource</span>(<span class="hljs-string">"docs/spring-boot-guide.pdf"</span>),
                    techMetadata
            );

            log.info(<span class="hljs-string">"âœ… æ–‡æ¡£åŠ è½½å®Œæˆ\n"</span>);

        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"æ–‡æ¡£åŠ è½½å¤±è´¥"</span>, e);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performQuestionAnswering</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"ğŸ’¬ æ­¥éª¤ 2: æ‰§è¡Œé—®ç­”"</span>);

        String[] questions = {
                <span class="hljs-string">"Spring Boot çš„ä¸»è¦ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ"</span>,
                <span class="hljs-string">"å¦‚ä½•é…ç½®æ•°æ®æºï¼Ÿ"</span>,
                <span class="hljs-string">"ä»€ä¹ˆæ˜¯è‡ªåŠ¨é…ç½®åŸç†ï¼Ÿ"</span>
        };

        <span class="hljs-keyword">for</span> (String question : questions) {
            log.info(<span class="hljs-string">"\né—®é¢˜: {}"</span>, question);
            <span class="hljs-type">String</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> ragService.ask(question);
            log.info(<span class="hljs-string">"å›ç­”: {}\n"</span>, answer);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performSearch</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"ğŸ” æ­¥éª¤ 3: æ‰§è¡Œç›¸ä¼¼åº¦æœç´¢"</span>);

        <span class="hljs-type">String</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Spring Boot é…ç½®"</span>;
        <span class="hljs-type">var</span> <span class="hljs-variable">results</span> <span class="hljs-operator">=</span> searchService.search(query, <span class="hljs-number">3</span>);

        log.info(<span class="hljs-string">"\næœç´¢: {}"</span>, query);
        log.info(<span class="hljs-string">"æ‰¾åˆ° {} ä¸ªç›¸å…³æ–‡æ¡£:\n"</span>, results.size());

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; results.size(); i++) {
            <span class="hljs-type">var</span> <span class="hljs-variable">doc</span> <span class="hljs-operator">=</span> results.get(i);
            log.info(<span class="hljs-string">"{}. {}"</span>, i + <span class="hljs-number">1</span>, doc.getContent().substring(<span class="hljs-number">0</span>, Math.min(<span class="hljs-number">100</span>, doc.getContent().length())));
            log.info(<span class="hljs-string">"   æ¥æº: {}\n"</span>, doc.getMetadata().get(<span class="hljs-string">"filename"</span>));
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-42">11. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-43">11.1 æ€§èƒ½é—®é¢˜</h4>
<p><strong>é—®é¢˜ï¼šæœç´¢é€Ÿåº¦æ…¢</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ 1: ä½¿ç”¨ HNSW ç´¢å¼•</span>
spring.ai.vectorstore.redis.algorithm=HNSW

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ 2: å‡å°‘ topK</span>
SearchRequest.query(query).withTopK(<span class="hljs-number">5</span>)  <span class="hljs-comment">// è€Œä¸æ˜¯ 20</span>

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ 3: æé«˜ç›¸ä¼¼åº¦é˜ˆå€¼</span>
SearchRequest.query(query).withSimilarityThreshold(<span class="hljs-number">0.8</span>)  <span class="hljs-comment">// è¿‡æ»¤ä½ç›¸å…³ç»“æœ</span>
</code></pre>
<h4 data-id="heading-44">11.2 å†…å­˜é—®é¢˜</h4>
<p><strong>é—®é¢˜ï¼šRedis å†…å­˜å ç”¨è¿‡é«˜</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å†…å­˜ä½¿ç”¨</span>
redis-cli INFO memory

<span class="hljs-comment"># è®¾ç½®æœ€å¤§å†…å­˜</span>
redis-cli CONFIG SET maxmemory 2gb
redis-cli CONFIG SET maxmemory-policy allkeys-lru
</code></pre>
<h4 data-id="heading-45">11.3 å¬å›ç‡é—®é¢˜</h4>
<p><strong>é—®é¢˜ï¼šæœç´¢ç»“æœä¸ç›¸å…³</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ 1: ä¼˜åŒ–æ–‡æ¡£åˆ†å—</span>
app.document.chunk-size=<span class="hljs-number">500</span>      <span class="hljs-comment">// å‡å°å—å¤§å°</span>
app.document.chunk-overlap=<span class="hljs-number">100</span>   <span class="hljs-comment">// å¢åŠ é‡å </span>

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ 2: è°ƒæ•´ç›¸ä¼¼åº¦é˜ˆå€¼</span>
.withSimilarityThreshold(<span class="hljs-number">0.7</span>)    <span class="hljs-comment">// é™ä½é˜ˆå€¼</span>

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ 3: å¢åŠ æ£€ç´¢æ•°é‡</span>
.withTopK(<span class="hljs-number">10</span>)                     <span class="hljs-comment">// æ£€ç´¢æ›´å¤šæ–‡æ¡£</span>
</code></pre>
<hr/>
<h3 data-id="heading-46">12. æ€»ç»“ä¸å±•æœ›</h3>
<h4 data-id="heading-47">12.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾</h4>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Spring AI + Redis å‘é‡åº“æ ¸å¿ƒä»·å€¼                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  âœ… é«˜æ€§èƒ½                                              â”‚
â”‚     â€¢ æ¯«ç§’çº§å‘é‡æœç´¢                                    â”‚
â”‚     â€¢ å†…å­˜çº§å­˜å‚¨é€Ÿåº¦                                    â”‚
â”‚                                                        â”‚
â”‚  âœ… æ˜“é›†æˆ                                              â”‚
â”‚     â€¢ Spring Boot åŸç”Ÿæ”¯æŒ                             â”‚
â”‚     â€¢ é›¶ä»£ç é…ç½®                                        â”‚
â”‚                                                        â”‚
â”‚  âœ… åŠŸèƒ½å¼ºå¤§                                            â”‚
â”‚     â€¢ æ··åˆæŸ¥è¯¢ï¼ˆå‘é‡+å…ƒæ•°æ®ï¼‰                           â”‚
â”‚     â€¢ å®æ—¶ç´¢å¼•æ›´æ–°                                      â”‚
â”‚                                                        â”‚
â”‚  âœ… æˆæœ¬ä½                                              â”‚
â”‚     â€¢ æ— éœ€ä¸“ç”¨å‘é‡æ•°æ®åº“                                â”‚
â”‚     â€¢ è¿ç»´æˆæœ¬ä½                                        â”‚
â”‚                                                        â”‚
â”‚  âœ… ç”Ÿäº§å°±ç»ª                                            â”‚
â”‚     â€¢ é›†ç¾¤æ”¯æŒ                                          â”‚
â”‚     â€¢ å®Œå–„çš„ç›‘æ§                                        â”‚
â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-48">12.2 æœ€ä½³å®è·µæ€»ç»“</h4>
<ol>
<li><strong>æ–‡æ¡£å¤„ç†</strong>ï¼šåˆç†çš„åˆ†å—å¤§å°ï¼ˆ500-1000 å­—ç¬¦ï¼‰å’Œé‡å ï¼ˆ10-20%ï¼‰</li>
<li><strong>ç´¢å¼•é€‰æ‹©</strong>ï¼šå°è§„æ¨¡ç”¨ FLATï¼Œå¤§è§„æ¨¡ç”¨ HNSW</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä½¿ç”¨æ‰¹é‡æ“ä½œã€ç¼“å­˜å¸¸è§æŸ¥è¯¢</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šè·Ÿè¸ªæœç´¢å»¶è¿Ÿã€ç¼“å­˜å‘½ä¸­ç‡</li>
<li><strong>å…ƒæ•°æ®è®¾è®¡</strong>ï¼šæ·»åŠ ä¸°å¯Œçš„å…ƒæ•°æ®ä»¥æ”¯æŒè¿‡æ»¤</li>
</ol>
<h4 data-id="heading-49">12.3 æœªæ¥å±•æœ›</h4>
<ul>
<li>å¤šæ¨¡æ€æ”¯æŒï¼ˆå›¾åƒã€éŸ³é¢‘å‘é‡ï¼‰</li>
<li>æ›´æ™ºèƒ½çš„æŸ¥è¯¢é‡å†™</li>
<li>è‡ªåŠ¨åŒ–å‚æ•°è°ƒä¼˜</li>
<li>åˆ†å¸ƒå¼å‘é‡æœç´¢</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JSAPIThree åŠ è½½ Cesium æ•°æ®å­¦ä¹ ç¬”è®°ï¼šä½¿ç”¨ Cesium åœ°å½¢å’Œå½±åƒæœåŠ¡]]></title>    <link>https://juejin.cn/post/7579673620940734514</link>    <guid>https://juejin.cn/post/7579673620940734514</guid>    <pubDate>2025-12-04T02:59:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579673620940734514" data-draft-id="7579512734297227302" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JSAPIThree åŠ è½½ Cesium æ•°æ®å­¦ä¹ ç¬”è®°ï¼šä½¿ç”¨ Cesium åœ°å½¢å’Œå½±åƒæœåŠ¡"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-04T02:59:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·296541275917"/> <meta itemprop="url" content="https://juejin.cn/user/4109293389357897"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JSAPIThree åŠ è½½ Cesium æ•°æ®å­¦ä¹ ç¬”è®°ï¼šä½¿ç”¨ Cesium åœ°å½¢å’Œå½±åƒæœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4109293389357897/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·296541275917
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:59:53.000Z" title="Thu Dec 04 2025 02:59:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œä¸ºä¸€ä¸ªåˆšå¼€å§‹å­¦ä¹  mapvthree çš„å°ç™½ï¼Œä»Šå¤©è¦å­¦ä¹ åŠ è½½ Cesium æ•°æ®äº†ï¼å¬è¯´è¿™ä¸ªåŠŸèƒ½å¯ä»¥åŠ è½½çœŸå®çš„åœ°å½¢æ•°æ®ï¼Œè¿˜èƒ½ä½¿ç”¨ Cesium çš„å½±åƒæœåŠ¡ï¼æƒ³æƒ³å°±æœŸå¾…ï¼</p>
</blockquote>
<h2 data-id="heading-0">ç¬¬ä¸€æ¬¡å¬è¯´ Cesium æ•°æ®åŠ è½½</h2>
<p>ä»Šå¤©åœ¨æ–‡æ¡£é‡Œçœ‹åˆ°äº†"Cesium"è¿™ä¸ªè¯ã€‚æ–‡æ¡£è¯´ Cesium æ•°æ®åŠ è½½å¯ä»¥ï¼š</p>
<ul>
<li>åŠ è½½çœŸå®çš„åœ°å½¢æ•°æ®</li>
<li>ä½¿ç”¨ Cesium çš„å½±åƒæœåŠ¡</li>
<li>æ”¯æŒ Cesium Ion æœåŠ¡</li>
<li>éœ€è¦é…ç½® AccessToken</li>
</ul>
<p><strong>æˆ‘çš„ç†è§£</strong>ï¼šç®€å•è¯´å°±æ˜¯"ç”¨ Cesium çš„åœ°å½¢å’Œå½±åƒæœåŠ¡"ï¼Œè®©åœºæ™¯æœ‰çœŸå®çš„åœ°å½¢èµ·ä¼ï¼</p>
<h2 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šé…ç½® Cesium Ion AccessToken</h2>
<p>ä½œä¸ºä¸€ä¸ªåˆå­¦è€…ï¼Œæˆ‘ä¹ æƒ¯å…ˆçœ‹çœ‹éœ€è¦ä»€ä¹ˆé…ç½®ã€‚æ–‡æ¡£è¯´ä½¿ç”¨ Cesium æœåŠ¡éœ€è¦é…ç½® Cesium Ion AccessTokenï¼</p>
<p><strong>æˆ‘çš„å‘ç°</strong>ï¼šCesium éœ€è¦ AccessToken æ‰èƒ½ä½¿ç”¨ï¼Œè¿™æ˜¯å¿…é¡»çš„é…ç½®ï¼</p>
<h3 data-id="heading-2">è·å– Cesium Ion AccessToken</h3>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fion.cesium.com%2Ftokens" target="_blank" title="https://ion.cesium.com/tokens" ref="nofollow noopener noreferrer">Cesium ion</a> è·å– accessToken</li>
<li>åœ¨é¡¹ç›®ä¸­é…ç½®</li>
</ol>
<h3 data-id="heading-3">å…¨å±€é…ç½® AccessToken</h3>
<p>è·å– AccessToken åï¼Œåœ¨é¡¹ç›®çš„å…¥å£å¤„è¿›è¡Œé…ç½®ï¼Œå…¨å±€æ‰§è¡Œä¸€æ¬¡å³å¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> mapvthree <span class="hljs-keyword">from</span> <span class="hljs-string">'@baidumap/mapv-three'</span>;

<span class="hljs-comment">// é…ç½® Cesium accessToken</span>
mapvthree.<span class="hljs-property">CesiumConfig</span>.<span class="hljs-property">accessToken</span> = <span class="hljs-string">'æ‚¨çš„accessToken'</span>;
</code></pre>
<p><strong>æˆ‘çš„ç†è§£</strong>ï¼šå…¨å±€é…ç½®åï¼Œä½¿ç”¨ Cesium çš„æ‰€æœ‰æœåŠ¡éƒ½ä¸éœ€è¦å†é…ç½®äº†ï¼</p>
<h3 data-id="heading-4">ä¸´æ—¶é…ç½® AccessToken</h3>
<p>å¦‚æœæ²¡æœ‰å…¨å±€é…ç½®ï¼Œå¯ä»¥åœ¨æ„é€ å‡½æ•°å‚æ•°ä¸­ä¸´æ—¶é…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> mapView = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">MapView</span>({
    <span class="hljs-attr">terrainProvider</span>: <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">CesiumTerrainTileProvider</span>({
        <span class="hljs-attr">accessToken</span>: <span class="hljs-string">'æ‚¨çš„accessToken'</span>, <span class="hljs-comment">// ä¸´æ—¶é…ç½® Cesium accessToken</span>
    }),
}));
</code></pre>
<p><strong>æˆ‘çš„å‘ç°</strong>ï¼šå¯ä»¥å…¨å±€é…ç½®ï¼Œä¹Ÿå¯ä»¥ä¸´æ—¶é…ç½®ï¼Œæ ¹æ®éœ€æ±‚é€‰æ‹©ï¼</p>
<h2 data-id="heading-5">ç¬¬äºŒæ­¥ï¼šåŠ è½½ Cesium åœ°å½¢</h2>
<p>çœ‹åˆ°éœ€è¦é…ç½® AccessToken åï¼Œæˆ‘æƒ³ï¼šæ€ä¹ˆåŠ è½½åœ°å½¢ï¼Ÿ</p>
<p>æ–‡æ¡£è¯´å¯ä»¥ç”¨ <code>CesiumTerrainTileProvider</code> æ¥åŠ è½½ Cesium åœ°å½¢ï¼</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> mapvthree <span class="hljs-keyword">from</span> <span class="hljs-string">'@baidumap/mapv-three'</span>;

<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'container'</span>);

<span class="hljs-keyword">const</span> engine = <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Engine</span>(container, {
    <span class="hljs-attr">map</span>: {
        <span class="hljs-attr">center</span>: [<span class="hljs-number">94.09</span>, <span class="hljs-number">30.64</span>],
        <span class="hljs-attr">range</span>: <span class="hljs-number">50000</span>,
        <span class="hljs-attr">pitch</span>: <span class="hljs-number">50</span>,
        <span class="hljs-attr">provider</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// è®¾ç½®ä¸º nullï¼Œç¨åæ‰‹åŠ¨æ·»åŠ </span>
    },
});

<span class="hljs-comment">// æ·»åŠ  Cesium åœ°å½¢</span>
<span class="hljs-keyword">const</span> mapView = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">MapView</span>({
    <span class="hljs-attr">terrainProvider</span>: <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">CesiumTerrainTileProvider</span>({
        <span class="hljs-comment">// accessToken: 'æ‚¨çš„accessToken', // å¦‚æœæ²¡æœ‰å…¨å±€é…ç½®ï¼Œå¯ä»¥åœ¨è¿™é‡Œç›´æ¥ä¼ å…¥</span>
    }),
    <span class="hljs-attr">imageryProvider</span>: <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">BingImageryTileProvider</span>(),
}));
</code></pre>
<p><strong>æˆ‘çš„å‘ç°</strong>ï¼šåœ°å½¢æ•°æ®ä¼šè®©åœºæ™¯æœ‰çœŸå®çš„èµ·ä¼ï¼Œçœ‹èµ·æ¥æ›´çœŸå®ï¼</p>
<p><strong>æˆ‘çš„ç†è§£</strong>ï¼š</p>
<ul>
<li>ä¼˜ç‚¹ï¼šçœŸå®çš„åœ°å½¢æ•°æ®ï¼Œåœºæ™¯æ›´ç«‹ä½“</li>
<li>ç¼ºç‚¹ï¼šéœ€è¦ç½‘ç»œè¯·æ±‚ï¼ŒåŠ è½½æ—¶é—´è¾ƒé•¿</li>
<li>é€‚ç”¨åœºæ™¯ï¼šéœ€è¦çœŸå®åœ°å½¢å±•ç¤ºçš„åœºæ™¯</li>
</ul>
<h3 data-id="heading-6">è‡ªå®šä¹‰åœ°å½¢æœåŠ¡</h3>
<p>å¦‚æœä¸æä¾› url è‡ªå®šä¹‰åœ°å½¢æœåŠ¡ï¼Œé»˜è®¤ä½¿ç”¨ Cesium å®˜æ–¹æœåŠ¡ã€‚å¦‚æœéœ€è¦ä½¿ç”¨è‡ªå®šä¹‰åœ°å½¢æœåŠ¡ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> mapView = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">MapView</span>({
    <span class="hljs-attr">terrainProvider</span>: <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">CesiumTerrainTileProvider</span>({
        <span class="hljs-attr">url</span>: <span class="hljs-string">'æ‚¨çš„è‡ªå®šä¹‰åœ°å½¢æœåŠ¡åœ°å€'</span>,
        <span class="hljs-attr">accessToken</span>: <span class="hljs-string">'æ‚¨çš„accessToken'</span>,
    }),
}));
</code></pre>
<p><strong>æˆ‘çš„å‘ç°</strong>ï¼šå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰åœ°å½¢æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Cesium å®˜æ–¹æœåŠ¡ï¼</p>
<h2 data-id="heading-7">ç¬¬ä¸‰æ­¥ï¼šé…åˆå½±åƒå›¾å±‚ä½¿ç”¨</h2>
<p>çœ‹åˆ°å¯ä»¥åŠ è½½åœ°å½¢åï¼Œæˆ‘æƒ³ï¼šåœ°å½¢æ˜¯ç°è‰²çš„ï¼Œèƒ½ä¸èƒ½åŠ ä¸Šå½±åƒï¼Ÿ</p>
<p>æ–‡æ¡£è¯´å¯ä»¥é…åˆå½±åƒå›¾å±‚ä½¿ç”¨ï¼Œæ¯”å¦‚ <code>BingImageryTileProvider</code>ï¼</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> mapView = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">MapView</span>({
    <span class="hljs-attr">terrainProvider</span>: <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">CesiumTerrainTileProvider</span>({
        <span class="hljs-comment">// åœ°å½¢æ•°æ®</span>
    }),
    <span class="hljs-attr">imageryProvider</span>: <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">BingImageryTileProvider</span>({
        <span class="hljs-comment">// å½±åƒæ•°æ®</span>
    }),
}));
</code></pre>
<p><strong>æˆ‘çš„å‘ç°</strong>ï¼šåœ°å½¢æä¾›é«˜åº¦ä¿¡æ¯ï¼Œå½±åƒæä¾›é¢œè‰²ä¿¡æ¯ï¼Œä¸¤è€…é…åˆæ‰èƒ½çœ‹åˆ°å®Œæ•´çš„åœ°å›¾ï¼</p>
<p><strong>æˆ‘çš„ç†è§£</strong>ï¼š</p>
<ul>
<li><code>terrainProvider</code>ï¼šæä¾›åœ°å½¢é«˜åº¦æ•°æ®</li>
<li><code>imageryProvider</code>ï¼šæä¾›å½±åƒé¢œè‰²æ•°æ®</li>
<li>ä¸¤è€…é…åˆä½¿ç”¨ï¼Œæ•ˆæœæœ€å¥½</li>
</ul>
<h2 data-id="heading-8">ç¬¬å››æ­¥ï¼šç†è§£ MapView ç»“æ„</h2>
<p>çœ‹åˆ°å¯ä»¥åŠ è½½åœ°å½¢å’Œå½±åƒåï¼Œæˆ‘æƒ³ï¼šå®ƒä»¬æ˜¯æ€ä¹ˆç»„ç»‡çš„ï¼Ÿ</p>
<p>æ–‡æ¡£è¯´ <code>MapView</code> æ˜¯å¼•æ“ä¸­åº•å›¾çš„å®¹å™¨ï¼ŒåŒ…å« <code>RasterSurface</code> å’Œ <code>VectorSurface</code>ã€‚</p>
<p><strong>æˆ‘çš„ç†è§£</strong>ï¼š</p>
<ul>
<li><code>terrainProvider</code>ï¼šåœ°å½¢æ•°æ®ï¼Œå±äº <code>RasterSurface</code></li>
<li><code>imageryProvider</code>ï¼šå½±åƒæ•°æ®ï¼Œå±äº <code>RasterSurface</code></li>
<li>å¤šä¸ª <code>ImageryTileProvider</code> å¯ä»¥å åŠ æ¸²æŸ“</li>
</ul>
<p><strong>æˆ‘çš„å‘ç°</strong>ï¼š</p>
<ul>
<li><code>RasterSurface</code> èƒ½ä¿è¯å›¾å±‚ä¹‹é—´å åŠ é¡ºåºçš„æ­£ç¡®æ€§</li>
<li>é€‚åˆäºŒç»´åœ°å›¾çš„æ¸²æŸ“</li>
<li>å¤šä¸ªå½±åƒå›¾å±‚å¯ä»¥å åŠ ï¼Œå¹¶åˆ†å±‚è®¾ç½®é€æ˜åº¦</li>
</ul>
<h2 data-id="heading-9">ç¬¬äº”æ­¥ï¼šå®Œæ•´ç¤ºä¾‹</h2>
<p>æˆ‘æƒ³å†™ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼ŒæŠŠå­¦åˆ°çš„éƒ½ç”¨ä¸Šï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> mapvthree <span class="hljs-keyword">from</span> <span class="hljs-string">'@baidumap/mapv-three'</span>;

<span class="hljs-comment">// å…¨å±€é…ç½® Cesium accessToken</span>
mapvthree.<span class="hljs-property">CesiumConfig</span>.<span class="hljs-property">accessToken</span> = <span class="hljs-string">'æ‚¨çš„accessToken'</span>;

<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'container'</span>);

<span class="hljs-keyword">const</span> engine = <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Engine</span>(container, {
    <span class="hljs-attr">map</span>: {
        <span class="hljs-attr">center</span>: [<span class="hljs-number">94.09</span>, <span class="hljs-number">30.64</span>],
        <span class="hljs-attr">range</span>: <span class="hljs-number">50000</span>,
        <span class="hljs-attr">pitch</span>: <span class="hljs-number">50</span>,
        <span class="hljs-attr">provider</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// è®¾ç½®ä¸º nullï¼Œç¨åæ‰‹åŠ¨æ·»åŠ </span>
    },
});

<span class="hljs-comment">// æ·»åŠ  Cesium åœ°å½¢å’Œå½±åƒ</span>
<span class="hljs-keyword">const</span> mapView = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">MapView</span>({
    <span class="hljs-attr">terrainProvider</span>: <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">CesiumTerrainTileProvider</span>({
        <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤çš„ Cesium å®˜æ–¹æœåŠ¡</span>
    }),
    <span class="hljs-attr">imageryProvider</span>: <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">BingImageryTileProvider</span>({
        <span class="hljs-comment">// ä½¿ç”¨ Bing å½±åƒæœåŠ¡</span>
    }),
}));
</code></pre>
<p><strong>æˆ‘çš„æ„Ÿå—</strong>ï¼šå†™ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼ŒæŠŠå­¦åˆ°çš„éƒ½ç”¨ä¸Šï¼Œæ„Ÿè§‰å¾ˆæœ‰æˆå°±æ„Ÿï¼</p>
<h2 data-id="heading-10">ç¬¬å…­æ­¥ï¼šè¸©è¿‡çš„å‘</h2>
<p>ä½œä¸ºä¸€ä¸ªåˆå­¦è€…ï¼Œæˆ‘è¸©äº†ä¸å°‘å‘ï¼Œè®°å½•ä¸‹æ¥é¿å…å†çŠ¯ï¼š</p>
<h3 data-id="heading-11">å‘ 1ï¼šåœ°å½¢ä¸æ˜¾ç¤º</h3>
<p><strong>åŸå› </strong>ï¼šæ²¡æœ‰é…ç½® Cesium Ion AccessTokenï¼Œæˆ–è€… AccessToken é…ç½®é”™è¯¯ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šç¡®ä¿æ­£ç¡®é…ç½®äº† Cesium Ion AccessTokenï¼Œå¯ä»¥å…¨å±€é…ç½®æˆ–ä¸´æ—¶é…ç½®ã€‚</p>
<h3 data-id="heading-12">å‘ 2ï¼šåœ°å½¢æ˜¾ç¤ºä¸ºç°è‰²</h3>
<p><strong>åŸå› </strong>ï¼šåªåŠ è½½äº†åœ°å½¢ï¼Œæ²¡æœ‰åŠ è½½å½±åƒå›¾å±‚ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šåŒæ—¶é…ç½® <code>terrainProvider</code> å’Œ <code>imageryProvider</code>ã€‚</p>
<h3 data-id="heading-13">å‘ 3ï¼šåœ°å½¢åŠ è½½å¾ˆæ…¢</h3>
<p><strong>åŸå› </strong>ï¼šåœ°å½¢æ•°æ®é‡å¤§ï¼Œç½‘ç»œè¯·æ±‚éœ€è¦æ—¶é—´ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šè¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œåœ°å½¢æ•°æ®éœ€è¦ä»æœåŠ¡å™¨åŠ è½½ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</p>
<h3 data-id="heading-14">å‘ 4ï¼šAccessToken è¿‡æœŸ</h3>
<p><strong>åŸå› </strong>ï¼šCesium Ion AccessToken å¯èƒ½è¿‡æœŸã€‚</p>
<p><strong>è§£å†³</strong>ï¼šé‡æ–°è·å– AccessToken å¹¶æ›´æ–°é…ç½®ã€‚</p>
<h3 data-id="heading-15">å‘ 5ï¼šè‡ªå®šä¹‰åœ°å½¢æœåŠ¡ä¸å·¥ä½œ</h3>
<p><strong>åŸå› </strong>ï¼šåœ°å½¢æœåŠ¡åœ°å€é”™è¯¯ï¼Œæˆ–è€…æ ¼å¼ä¸å¯¹ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šç¡®ä¿åœ°å½¢æœåŠ¡åœ°å€æ­£ç¡®ï¼Œæ ¼å¼ç¬¦åˆ Cesium Terrain è§„èŒƒã€‚</p>
<h2 data-id="heading-16">æˆ‘çš„å­¦ä¹ æ€»ç»“</h2>
<p>ç»è¿‡è¿™ä¸€å¤©çš„å­¦ä¹ ï¼Œæˆ‘æŒæ¡äº†ï¼š</p>
<ol>
<li><strong>é…ç½® Cesium Ion AccessToken</strong>ï¼šå…¨å±€é…ç½®æˆ–ä¸´æ—¶é…ç½®</li>
<li><strong>åŠ è½½ Cesium åœ°å½¢</strong>ï¼šä½¿ç”¨ <code>CesiumTerrainTileProvider</code></li>
<li><strong>é…åˆå½±åƒå›¾å±‚</strong>ï¼šä½¿ç”¨ <code>imageryProvider</code> æä¾›å½±åƒæ•°æ®</li>
<li><strong>è‡ªå®šä¹‰åœ°å½¢æœåŠ¡</strong>ï¼šå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰åœ°å½¢æœåŠ¡åœ°å€</li>
<li><strong>MapView ç»“æ„</strong>ï¼šç†è§£åœ°å½¢å’Œå½±åƒåœ¨ MapView ä¸­çš„ç»„ç»‡æ–¹å¼</li>
</ol>
<p><strong>æˆ‘çš„æ„Ÿå—</strong>ï¼šCesium æ•°æ®åŠ è½½åŠŸèƒ½çœŸçš„å¾ˆå¼ºå¤§ï¼è™½ç„¶é…ç½®æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯ç”¨èµ·æ¥å…¶å®ä¸éš¾ã€‚å…³é”®æ˜¯è¦ç†è§£åœ°å½¢å’Œå½±åƒçš„å…³ç³»ï¼Œç„¶åæ­£ç¡®é…ç½® AccessTokenï¼</p>
<p><strong>ä¸‹ä¸€æ­¥è®¡åˆ’</strong>ï¼š</p>
<ol>
<li>å­¦ä¹ æ›´å¤šåœ°å½¢å’Œå½±åƒçš„é…ç½®é€‰é¡¹</li>
<li>å°è¯•ä½¿ç”¨è‡ªå®šä¹‰åœ°å½¢æœåŠ¡</li>
<li>åšä¸€ä¸ªå®Œæ•´çš„åœ°å½¢å±•ç¤ºé¡¹ç›®</li>
</ol>
<hr/>
<blockquote>
<p>å­¦ä¹ ç¬”è®°å°±åˆ°è¿™é‡Œå•¦ï¼ä½œä¸ºä¸€ä¸ªåˆå­¦è€…ï¼Œæˆ‘è§‰å¾— Cesium æ•°æ®åŠ è½½è™½ç„¶é…ç½®æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯ç”¨èµ·æ¥å…¶å®ä¸éš¾ã€‚å…³é”®æ˜¯è¦ç†è§£åœ°å½¢å’Œå½±åƒçš„å…³ç³»ï¼Œç„¶åæ­£ç¡®é…ç½® AccessTokenï¼å¸Œæœ›æˆ‘çš„ç¬”è®°èƒ½å¸®åˆ°å…¶ä»–åˆå­¦è€…ï¼å¤§å®¶ä¸€èµ·åŠ æ²¹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç®­å¤´å‡½æ•°çš„è‰ºæœ¯ï¼šå¦‚ä½•ä¼˜é›…çš„å†™å¥½JSä»£ç ]]></title>    <link>https://juejin.cn/post/7579673620940996658</link>    <guid>https://juejin.cn/post/7579673620940996658</guid>    <pubDate>2025-12-04T03:14:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579673620940996658" data-draft-id="7579673620940718130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç®­å¤´å‡½æ•°çš„è‰ºæœ¯ï¼šå¦‚ä½•ä¼˜é›…çš„å†™å¥½JSä»£ç "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-04T03:14:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŠ æ´›æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/1084596182848299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç®­å¤´å‡½æ•°çš„è‰ºæœ¯ï¼šå¦‚ä½•ä¼˜é›…çš„å†™å¥½JSä»£ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1084596182848299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŠ æ´›æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:14:26.000Z" title="Thu Dec 04 2025 03:14:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯åŠ æ´›æ–¯ã€‚ä½œä¸ºä¸€åç¨‹åºå‘˜ğŸ‘¨â€ğŸ’»ï¼Œæˆ‘æ·±æ·±ä¿¡å¥‰è´¹æ›¼å­¦ä¹ æ³•â€”â€”<strong>æ•™ï¼Œæ˜¯æœ€å¥½çš„å­¦</strong>Â ğŸ“šã€‚è¿™é‡Œæ˜¯æˆ‘çš„çŸ¥è¯†ç¬”è®°ä¸åˆ†äº«ï¼Œæ—¨åœ¨æŠŠå¤æ‚çš„ä¸œè¥¿è®²æ˜ç™½ã€‚å¦‚æœå‘ç°æœ‰è¯¯ğŸ”ï¼Œä¸‡åˆ†æ¬¢è¿ä½ å¸®æˆ‘æŒ‡å‡ºæ¥ï¼åºŸè¯ä¸å¤šè¯´ï¼Œæ­£æ–‡å¼€å§‹ ğŸ‘‡</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ç®­å¤´å‡½æ•°åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯ç®­å¤´å‡½æ•°</h3>
<p><code>ç®­å¤´å‡½æ•°</code>æ˜¯<code>ES6</code>å¼•å…¥çš„ä¸€ç§æ–°çš„å‡½æ•°è¡¨è¾¾å¼è¯­æ³•ã€‚å®ƒä½¿ç”¨Â <code>=&gt;</code>Â ç¬¦å·å®šä¹‰ï¼Œå…·æœ‰æ›´ç®€æ´çš„è¯­æ³•å’Œç‰¹å®šçš„è¡Œä¸ºç‰¹æ€§ã€‚</p>
<h3 data-id="heading-2">1.2 åŸºç¡€è¯­æ³•</h3>
<blockquote>
<p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä¼ ç»Ÿçš„å‡½æ•°æ˜¯å¦‚ä½•å†™çš„</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//æ— å‚</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">"åŸºç¡€å‡½æ•°"</span>
}
<span class="hljs-comment">//æœ‰å‚</span>
<span class="hljs-keyword">const</span> addArrow = <span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
};
</code></pre>
<blockquote>
<p>æˆ‘ä»¬åœ¨çœ‹ä¸€ä¸‹ç®­å¤´å‡½æ•°çš„å†™æ³•</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//æ— å‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">init</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-string">"åŸºç¡€å‡½æ•°"</span>
}
<span class="hljs-comment">//æœ‰å‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">addArrow</span> = (<span class="hljs-params">a, b</span>) =&gt; {
  <span class="hljs-keyword">return</span> a + b;
};
</code></pre>
<blockquote>
<p>æˆ–è€…æ›´ä¸ºç®€æ´ï¼Œå½“å‡½æ•°ä½“åªæœ‰ä¸€æ¡returnè¯­å¥æ—¶ï¼Œå¯ä»¥çœç•¥returnä¸å¤§æ‹¬å·</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">init</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-string">"åŸºç¡€å‡½æ•°"</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">addArrow</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
</code></pre>
<h2 data-id="heading-3">äºŒã€ç®­å¤´å‡½æ•°çš„å„ç§å½¢å¼</h2>
<h3 data-id="heading-4">2.1 å‚æ•°å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å•ä¸ªå‚æ•° - å¯ä»¥çœç•¥æ‹¬å·</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">square</span> = (<span class="hljs-params">x</span>)=&gt;x * x;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">square</span> = x =&gt; x * x;

<span class="hljs-comment">// 2. å¤šä¸ªå‚æ•° - å¿…é¡»ä½¿ç”¨æ‹¬å·</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">multiply</span> = (<span class="hljs-params">x, y</span>) =&gt; x * y;

<span class="hljs-comment">// 3. æ— å‚æ•° - å¿…é¡»ä½¿ç”¨ç©ºæ‹¬å·</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getRandom</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();

<span class="hljs-comment">// 4. é»˜è®¤å‚æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">greet</span> = (<span class="hljs-params">name = <span class="hljs-string">'Guest'</span></span>) =&gt; <span class="hljs-string">`Hello, <span class="hljs-subst">${name}</span>!`</span>;

<span class="hljs-comment">// 5. å‰©ä½™å‚æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">sumAll</span> = (<span class="hljs-params">...numbers</span>) =&gt; 
  numbers.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, num</span>) =&gt;</span> total + num, <span class="hljs-number">0</span>);

<span class="hljs-comment">// Vue3ç»„åˆå¼APIä¸­çš„ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> numbers = <span class="hljs-title function_">ref</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]);
    
    <span class="hljs-comment">// ä½¿ç”¨ç®­å¤´å‡½æ•°è®¡ç®—å±æ€§</span>
    <span class="hljs-keyword">const</span> squaredNumbers = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> 
      numbers.<span class="hljs-property">value</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num * num)
    );
    
    <span class="hljs-comment">// ä½¿ç”¨ç®­å¤´å‡½æ•°æ–¹æ³•</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">addNumber</span> = newNumber =&gt; {
      numbers.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(newNumber);
    };
    
    <span class="hljs-keyword">return</span> {
      numbers,
      squaredNumbers,
      addNumber
    };
  }
};
</code></pre>
<h3 data-id="heading-5">2.2 å‡½æ•°ä½“å½¢å¼</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å•è¡Œè¡¨è¾¾å¼ - éšå¼è¿”å›ï¼ˆå³å½“å‡½æ•°ä½“åªæœ‰ä¸€æ¡returnè¯­å¥æ—¶ï¼Œå¯ä»¥çœç•¥returnä¸å¤§æ‹¬å·ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">double</span> = x =&gt; x * <span class="hljs-number">2</span>;

<span class="hljs-comment">// 2. å¤šè¡Œä»£ç å— - éœ€è¦æ˜¾å¼return</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">processUser</span> = user =&gt; {
  <span class="hljs-keyword">const</span> name = user.<span class="hljs-property">name</span>.<span class="hljs-title function_">toUpperCase</span>();
  <span class="hljs-keyword">const</span> age = user.<span class="hljs-property">age</span> + <span class="hljs-number">1</span>;
  <span class="hljs-keyword">return</span> { name, age };
};

<span class="hljs-comment">// 3. è¿”å›å¯¹è±¡å­—é¢é‡ - éœ€è¦ç”¨æ‹¬å·åŒ…è£¹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createUser</span> = (<span class="hljs-params">name, age</span>) =&gt; ({ 
  name, 
  age, 
  <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() 
});
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç™¾åº¦åœ°å›¾JSAPI THREE Label ç»„ä»¶ä½¿ç”¨æŒ‡å—ï¼Œè½»æ¾å®ç°åœ°å›¾æ ‡ç­¾æ¸²æŸ“]]></title>    <link>https://juejin.cn/post/7579562420978466857</link>    <guid>https://juejin.cn/post/7579562420978466857</guid>    <pubDate>2025-12-04T03:21:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579562420978466857" data-draft-id="7579553111472570422" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç™¾åº¦åœ°å›¾JSAPI THREE Label ç»„ä»¶ä½¿ç”¨æŒ‡å—ï¼Œè½»æ¾å®ç°åœ°å›¾æ ‡ç­¾æ¸²æŸ“"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-04T03:21:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·95208161179"/> <meta itemprop="url" content="https://juejin.cn/user/4232440491287450"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç™¾åº¦åœ°å›¾JSAPI THREE Label ç»„ä»¶ä½¿ç”¨æŒ‡å—ï¼Œè½»æ¾å®ç°åœ°å›¾æ ‡ç­¾æ¸²æŸ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4232440491287450/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·95208161179
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:21:11.000Z" title="Thu Dec 04 2025 03:21:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfd6e718de9948a59d232d3a9d88e183~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTUyMDgxNjExNzk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423270&amp;x-signature=XDrryxxsfioBoEQG%2BZV3nFWUl4c%3D" alt="title" loading="lazy"/></p>
<p>åœ¨åœ°å›¾å¯è§†åŒ–é¡¹ç›®ä¸­ï¼Œæ ‡ç­¾ï¼ˆLabelï¼‰æ˜¯æœ€å¸¸è§çš„å…ƒç´ ä¹‹ä¸€ã€‚æ— è®ºæ˜¯ POI ç‚¹æ ‡æ³¨ã€é“è·¯åç§°æ˜¾ç¤ºï¼Œè¿˜æ˜¯è‡ªå®šä¹‰å›¾æ ‡å±•ç¤ºï¼Œéƒ½éœ€è¦ä¸€ä¸ªå¼ºå¤§ä¸”æ˜“ç”¨çš„æ ‡ç­¾ç»„ä»¶ã€‚MapVThree çš„ <code>Label</code> ç»„ä»¶æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œçµæ´»çš„é…ç½®é€‰é¡¹ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè½»æ¾å®ç°å„ç§æ ‡ç­¾æ¸²æŸ“éœ€æ±‚ã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç» <code>Label</code> ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬åŸºç¡€é…ç½®ã€æ ·å¼è‡ªå®šä¹‰ã€æ•°æ®ç»‘å®šç­‰å®ç”¨æŠ€å·§ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹å¹¶åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Label ç»„ä»¶ç®€ä»‹</h2>
<p><code>Label</code> ç»„ä»¶æ˜¯ MapVThree ä¸­ç”¨äºæ‰¹é‡æ¸²æŸ“æ ‡ç­¾çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒæ”¯æŒä¸‰ç§æ¸²æŸ“ç±»å‹ï¼š</p>
<ul>
<li><strong>æ–‡æœ¬æ ‡ç­¾ï¼ˆtextï¼‰</strong>ï¼šçº¯æ–‡æœ¬æ¸²æŸ“ï¼Œé€‚ç”¨äºåœ°åã€POI åç§°ç­‰åœºæ™¯</li>
<li><strong>å›¾æ ‡æ ‡ç­¾ï¼ˆiconï¼‰</strong>ï¼šå›¾æ ‡æ¸²æŸ“ï¼Œé€‚ç”¨äºè‡ªå®šä¹‰å›¾æ ‡å±•ç¤º</li>
<li><strong>ç»„åˆæ ‡ç­¾ï¼ˆicontextï¼‰</strong>ï¼šå›¾æ ‡å’Œæ–‡å­—çš„ç»„åˆï¼Œé€‚ç”¨äºéœ€è¦åŒæ—¶æ˜¾ç¤ºå›¾æ ‡å’Œæ–‡å­—çš„åœºæ™¯</li>
</ul>
<p><code>Label</code> ç»„ä»¶ç‰¹åˆ«é€‚åˆæ‰¹é‡ç®¡ç†å¤§é‡æ ‡ç­¾æ•°æ®ï¼Œæä¾›äº†æ•´ä½“æ˜¾éšæ§åˆ¶ã€ç¢°æ’æ£€æµ‹ç­‰é«˜çº§åŠŸèƒ½ã€‚å¯¹äºå°‘é‡æ ‡ç­¾çš„åŠ è½½å’Œç®¡ç†ï¼Œæ¨èä½¿ç”¨ <code>RenderingLabel</code> ç»„ä»¶ã€‚</p>
<h2 data-id="heading-1">äºŒã€å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-2">2.1 åŸºç¡€æ–‡æœ¬æ ‡ç­¾</h3>
<p><img alt="åŸºæœ¬æ–‡æœ¬æ ‡ç­¾è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>
<p>åˆ›å»ºä¸€ä¸ªç®€å•çš„æ–‡æœ¬æ ‡ç­¾åªéœ€è¦å‡ ä¸ªæ­¥éª¤ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. åˆ›å»º Label å®ä¾‹</span>
<span class="hljs-keyword">const</span> textLabel = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Label</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>,
    <span class="hljs-attr">textSize</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">textFillStyle</span>: <span class="hljs-string">'rgb(255, 8, 8)'</span>, <span class="hljs-comment">// æ–‡å­—é¢œè‰²</span>
    <span class="hljs-attr">textStrokeStyle</span>: <span class="hljs-string">'rgba(0, 0, 0, 1)'</span>, <span class="hljs-comment">// æè¾¹é¢œè‰²</span>
    <span class="hljs-attr">textStrokeWidth</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// æè¾¹å®½åº¦</span>
}));

<span class="hljs-comment">// 2. å‡†å¤‡æ•°æ®</span>
<span class="hljs-keyword">const</span> data = mapvthree.<span class="hljs-property">GeoJSONDataSource</span>.<span class="hljs-title function_">fromGeoJSON</span>([
    {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'Feature'</span>,
        <span class="hljs-attr">geometry</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'Point'</span>,
            <span class="hljs-attr">coordinates</span>: [<span class="hljs-number">116.404</span>, <span class="hljs-number">39.915</span>] <span class="hljs-comment">// ç»çº¬åº¦åæ ‡</span>
        },
        <span class="hljs-attr">properties</span>: {
            <span class="hljs-attr">text</span>: <span class="hljs-string">'åŒ—äº¬å¸‚'</span>,
        }
    }
]);

<span class="hljs-comment">// 3. å®šä¹‰å±æ€§æ˜ å°„</span>
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'text'</span>, <span class="hljs-string">'text'</span>);

<span class="hljs-comment">// 4. ç»‘å®šæ•°æ®æº</span>
textLabel.<span class="hljs-property">dataSource</span> = data;
</code></pre>
<h3 data-id="heading-3">2.2 å›¾æ ‡æ ‡ç­¾</h3>
<p><img alt="å›¾æ ‡æ ‡ç­¾è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>
<p>åˆ›å»ºå›¾æ ‡æ ‡ç­¾éœ€è¦å¯ç”¨ <code>vertexIcons</code> é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºå›¾æ ‡æ ‡ç­¾</span>
<span class="hljs-keyword">const</span> iconLabel = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Label</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'icon'</span>,
    <span class="hljs-attr">vertexIcons</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨æ•°æ®ä¸­çš„å›¾æ ‡å±æ€§</span>
    <span class="hljs-attr">iconWidth</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">iconHeight</span>: <span class="hljs-number">40</span>,
}));

<span class="hljs-comment">// å‡†å¤‡æ•°æ®</span>
<span class="hljs-keyword">const</span> data = mapvthree.<span class="hljs-property">GeoJSONDataSource</span>.<span class="hljs-title function_">fromGeoJSON</span>([
    {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'Feature'</span>,
        <span class="hljs-attr">geometry</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'Point'</span>,
            <span class="hljs-attr">coordinates</span>: [<span class="hljs-number">116.404</span>, <span class="hljs-number">39.915</span>]
        },
        <span class="hljs-attr">properties</span>: {
            <span class="hljs-attr">icon</span>: <span class="hljs-string">'path/to/icon.png'</span>, <span class="hljs-comment">// å›¾æ ‡è·¯å¾„</span>
        }
    }
]);

<span class="hljs-comment">// å®šä¹‰å±æ€§</span>
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'icon'</span>, <span class="hljs-string">'icon'</span>);
iconLabel.<span class="hljs-property">dataSource</span> = data;
</code></pre>
<h3 data-id="heading-4">2.3 ç»„åˆæ ‡ç­¾</h3>
<p><img alt="ç»„åˆæ ‡ç­¾è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>
<p>ç»„åˆæ ‡ç­¾å¯ä»¥åŒæ—¶æ˜¾ç¤ºå›¾æ ‡å’Œæ–‡å­—ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºç»„åˆæ ‡ç­¾</span>
<span class="hljs-keyword">const</span> label = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Label</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'icontext'</span>,
    <span class="hljs-attr">vertexIcons</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">textSize</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">textFillStyle</span>: <span class="hljs-string">'rgb(255, 8, 8)'</span>,
    <span class="hljs-attr">iconWidth</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">iconHeight</span>: <span class="hljs-number">40</span>,
}));

<span class="hljs-comment">// å‡†å¤‡æ•°æ®</span>
<span class="hljs-keyword">const</span> data = mapvthree.<span class="hljs-property">GeoJSONDataSource</span>.<span class="hljs-title function_">fromGeoJSON</span>([
    {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'Feature'</span>,
        <span class="hljs-attr">geometry</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'Point'</span>,
            <span class="hljs-attr">coordinates</span>: [<span class="hljs-number">116.404</span>, <span class="hljs-number">39.915</span>]
        },
        <span class="hljs-attr">properties</span>: {
            <span class="hljs-attr">icon</span>: <span class="hljs-string">'path/to/icon.png'</span>,
            <span class="hljs-attr">text</span>: <span class="hljs-string">'åŒ—äº¬å¸‚'</span>,
        }
    }
]);

<span class="hljs-comment">// å®šä¹‰å±æ€§</span>
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'icon'</span>, <span class="hljs-string">'icon'</span>);
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'text'</span>, <span class="hljs-string">'text'</span>);
label.<span class="hljs-property">dataSource</span> = data;
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€é…ç½®å‚æ•°è¯¦è§£</h2>
<h3 data-id="heading-6">3.1 åŸºç¡€é…ç½®</h3>





























<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>type</code></td><td>String</td><td><code>'icon'</code></td><td>æ¸²æŸ“ç±»å‹ï¼š<code>'icon'</code>ã€<code>'text'</code>ã€<code>'icontext'</code></td></tr><tr><td><code>vertexIcons</code></td><td>Boolean</td><td><code>false</code></td><td>æ˜¯å¦ä»æ•°æ®ä¸­è¯»å–å›¾æ ‡è·¯å¾„</td></tr><tr><td><code>flat</code></td><td>Boolean</td><td><code>false</code></td><td>æ˜¯å¦è´´åœ°æ¸²æŸ“ï¼ˆæ–‡å­—ä¼šéšåœ°å½¢èµ·ä¼ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-7">3.2 æ–‡æœ¬æ ·å¼é…ç½®</h3>







































































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>textSize</code></td><td>Number</td><td><code>16</code></td><td>æ–‡å­—å¤§å°ï¼ˆåƒç´ ï¼‰</td></tr><tr><td><code>textFamily</code></td><td>String</td><td><code>'sans-serif'</code></td><td>å­—ä½“æ—</td></tr><tr><td><code>textFillStyle</code></td><td>String/Array</td><td><code>[255,255,255]</code></td><td>æ–‡å­—é¢œè‰²ï¼Œæ”¯æŒ CSS é¢œè‰²å­—ç¬¦ä¸²æˆ– RGBA æ•°ç»„</td></tr><tr><td><code>textStrokeStyle</code></td><td>String/Array</td><td><code>[0,0,0]</code></td><td>æè¾¹é¢œè‰²</td></tr><tr><td><code>textStrokeWidth</code></td><td>Number</td><td><code>0</code></td><td>æè¾¹å®½åº¦</td></tr><tr><td><code>textWeight</code></td><td>String</td><td><code>'400'</code></td><td>å­—ä½“ç²—ç»†</td></tr><tr><td><code>textAnchor</code></td><td>String</td><td><code>'center'</code></td><td>æ–‡å­—é”šç‚¹ä½ç½®</td></tr><tr><td><code>textOffset</code></td><td>Array</td><td><code>[0,0]</code></td><td>æ–‡å­—åç§»é‡ <code>[x, y]</code></td></tr><tr><td><code>textAlign</code></td><td>String</td><td><code>'center'</code></td><td>æ–‡æœ¬å¯¹é½æ–¹å¼ï¼š<code>'left'</code>ã€<code>'right'</code>ã€<code>'center'</code></td></tr><tr><td><code>textPadding</code></td><td>Array</td><td><code>[0,2]</code></td><td>æ–‡å­—å†…è¾¹è· <code>[x, y]</code></td></tr></tbody></table>
<p>**æ–‡å­—é”šç‚¹ï¼ˆtextAnchorï¼‰**æ”¯æŒä»¥ä¸‹å€¼ï¼š</p>
<ul>
<li><code>'center'</code>ï¼šå±…ä¸­</li>
<li><code>'left'</code>ã€<code>'right'</code>ã€<code>'top'</code>ã€<code>'bottom'</code>ï¼šå•æ–¹å‘å¯¹é½</li>
<li><code>'top-left'</code>ã€<code>'top-right'</code>ã€<code>'bottom-left'</code>ã€<code>'bottom-right'</code>ï¼šè§’è½å¯¹é½</li>
</ul>
<h3 data-id="heading-8">3.3 å›¾æ ‡æ ·å¼é…ç½®</h3>



































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>iconWidth</code></td><td>Number</td><td><code>40</code></td><td>å›¾æ ‡å®½åº¦ï¼ˆåƒç´ ï¼‰</td></tr><tr><td><code>iconHeight</code></td><td>Number</td><td><code>40</code></td><td>å›¾æ ‡é«˜åº¦ï¼ˆåƒç´ ï¼‰</td></tr><tr><td><code>mapSrc</code></td><td>String</td><td>-</td><td>é»˜è®¤å›¾æ ‡è·¯å¾„ï¼ˆå½“ <code>vertexIcons</code> ä¸º <code>false</code> æ—¶ä½¿ç”¨ï¼‰</td></tr><tr><td><code>useIconScale</code></td><td>Boolean</td><td><code>false</code></td><td>æ˜¯å¦ä½¿ç”¨å›¾ç‰‡è‡ªèº«çš„å®½é«˜æ¯”</td></tr></tbody></table>
<h3 data-id="heading-9">3.4 å¸ƒå±€é…ç½®</h3>





























<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>padding</code></td><td>Array</td><td><code>[2, 2]</code></td><td>æ–‡å­—ä¸å›¾æ ‡ä¹‹é—´çš„é—´è· <code>[x, y]</code></td></tr><tr><td><code>offset</code></td><td>Array</td><td><code>[0, 0]</code></td><td>æ ‡ç­¾æ•´ä½“åç§»é‡</td></tr><tr><td><code>rotateZ</code></td><td>Number</td><td><code>0</code></td><td>æ—‹è½¬è§’åº¦ï¼ˆåº¦ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-10">3.5 é«˜çº§é…ç½®</h3>









































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>enableFade</code></td><td>Boolean</td><td><code>false</code></td><td>æ˜¯å¦å¯ç”¨æ·¡å…¥æ·¡å‡ºæ•ˆæœï¼ˆéœ€è¦æ•°æ®ä¸­åŒ…å« <code>id</code> å­—æ®µï¼‰</td></tr><tr><td><code>enableCollision</code></td><td>Boolean</td><td><code>false</code></td><td>æ˜¯å¦å¯ç”¨ç¢°æ’æ£€æµ‹</td></tr><tr><td><code>keepSize</code></td><td>Boolean</td><td><code>false</code></td><td>æ˜¯å¦ä¿æŒæ ‡ç­¾å¤§å°ä¸å˜ï¼ˆä¸å—ç¼©æ”¾å½±å“ï¼‰</td></tr><tr><td><code>transparent</code></td><td>Boolean</td><td><code>false</code></td><td>æ˜¯å¦é€æ˜</td></tr><tr><td><code>opacity</code></td><td>Number</td><td><code>1</code></td><td>é€æ˜åº¦ï¼ˆ0-1ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-11">å››ã€æ•°æ®ç»‘å®š</h2>
<h3 data-id="heading-12">4.1 å±æ€§å®šä¹‰</h3>
<p>åœ¨ä½¿ç”¨ <code>Label</code> ç»„ä»¶æ—¶ï¼Œéœ€è¦é€šè¿‡ <code>defineAttribute</code> æ–¹æ³•å®šä¹‰æ•°æ®å±æ€§ä¸ç»„ä»¶å±æ€§çš„æ˜ å°„å…³ç³»ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> data = mapvthree.<span class="hljs-property">GeoJSONDataSource</span>.<span class="hljs-title function_">fromGeoJSON</span>([...]);

<span class="hljs-comment">// å®šä¹‰æ–‡æœ¬å±æ€§</span>
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'text'</span>, <span class="hljs-string">'text'</span>);

<span class="hljs-comment">// å®šä¹‰å›¾æ ‡å±æ€§</span>
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'icon'</span>, <span class="hljs-string">'icon'</span>);

<span class="hljs-comment">// ä½¿ç”¨å‡½æ•°å®šä¹‰å±æ€§ï¼ˆåŠ¨æ€è®¡ç®—ï¼‰</span>
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'textSize'</span>, <span class="hljs-function">(<span class="hljs-params">properties, item, index</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> properties.<span class="hljs-property">count</span> &gt; <span class="hljs-number">100</span> ? <span class="hljs-number">20</span> : <span class="hljs-number">16</span>;
});
</code></pre>
<h3 data-id="heading-13">4.2 è‡ªå®šä¹‰æ ·å¼å±æ€§</h3>
<p>é™¤äº†åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®å…¨å±€æ ·å¼ï¼Œè¿˜å¯ä»¥åœ¨æ•°æ®ä¸­ä¸ºæ¯ä¸ªæ ‡ç­¾è®¾ç½®è‡ªå®šä¹‰æ ·å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> data = mapvthree.<span class="hljs-property">GeoJSONDataSource</span>.<span class="hljs-title function_">fromGeoJSON</span>([
    {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'Feature'</span>,
        <span class="hljs-attr">geometry</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'Point'</span>,
            <span class="hljs-attr">coordinates</span>: [<span class="hljs-number">116.404</span>, <span class="hljs-number">39.915</span>]
        },
        <span class="hljs-attr">properties</span>: {
            <span class="hljs-attr">text</span>: <span class="hljs-string">'åŒ—äº¬å¸‚'</span>,
            <span class="hljs-attr">textSize</span>: <span class="hljs-number">18</span>, <span class="hljs-comment">// è‡ªå®šä¹‰æ–‡å­—å¤§å°</span>
            <span class="hljs-attr">textFillStyle</span>: <span class="hljs-string">'rgb(255, 0, 0)'</span>, <span class="hljs-comment">// è‡ªå®šä¹‰æ–‡å­—é¢œè‰²</span>
            <span class="hljs-attr">textAnchor</span>: <span class="hljs-string">'bottom'</span>, <span class="hljs-comment">// è‡ªå®šä¹‰é”šç‚¹</span>
            <span class="hljs-attr">textOffset</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">10</span>], <span class="hljs-comment">// è‡ªå®šä¹‰åç§»</span>
            <span class="hljs-attr">rotateZ</span>: <span class="hljs-number">45</span>, <span class="hljs-comment">// è‡ªå®šä¹‰æ—‹è½¬è§’åº¦</span>
            <span class="hljs-attr">iconSize</span>: [<span class="hljs-number">50</span>, <span class="hljs-number">50</span>], <span class="hljs-comment">// è‡ªå®šä¹‰å›¾æ ‡å¤§å°ï¼ˆä»…å›¾æ ‡æ ‡ç­¾ï¼‰</span>
        }
    }
]);

<span class="hljs-comment">// å®šä¹‰æ‰€æœ‰è‡ªå®šä¹‰å±æ€§</span>
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'text'</span>, <span class="hljs-string">'text'</span>);
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'textSize'</span>, <span class="hljs-string">'textSize'</span>);
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'textFillStyle'</span>, <span class="hljs-string">'textFillStyle'</span>);
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'textAnchor'</span>, <span class="hljs-string">'textAnchor'</span>);
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'textOffset'</span>, <span class="hljs-string">'textOffset'</span>);
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'rotateZ'</span>, <span class="hljs-string">'rotateZ'</span>);
data.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'iconSize'</span>, <span class="hljs-string">'iconSize'</span>);
</code></pre>
<h3 data-id="heading-14">4.3 å±æ€§é‡å‘½å</h3>
<p>å½“å¤šä¸ªå¯¹è±¡å…±äº«åŒä¸€ä¸ªæ•°æ®æºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>addAttributeRename</code> æ–¹æ³•é‡å‘½åå±æ€§ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºå…±äº«æ•°æ®æº</span>
<span class="hljs-keyword">const</span> sharedData = mapvthree.<span class="hljs-property">GeoJSONDataSource</span>.<span class="hljs-title function_">fromGeoJSON</span>([...]);
sharedData.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'color1'</span>, <span class="hljs-function">(<span class="hljs-params">p, item, j, i</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(i / totalSize, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
});
sharedData.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'color2'</span>, <span class="hljs-function">(<span class="hljs-params">p, item, j, i</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">0</span>, i / totalSize, <span class="hljs-number">0</span>);
});
sharedData.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'text'</span>, <span class="hljs-function">(<span class="hljs-params">p, item, j, i</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`æ ‡ç­¾ <span class="hljs-subst">${i}</span>`</span>;
});

<span class="hljs-comment">// åˆ›å»ºç‚¹å¯¹è±¡ï¼Œä½¿ç”¨ color1</span>
<span class="hljs-keyword">const</span> point = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">SimplePoint</span>({
    <span class="hljs-attr">vertexColors</span>: <span class="hljs-literal">true</span>,
}));
point.<span class="hljs-title function_">addAttributeRename</span>(<span class="hljs-string">'color'</span>, <span class="hljs-string">'color1'</span>);
point.<span class="hljs-property">dataSource</span> = sharedData;

<span class="hljs-comment">// åˆ›å»ºæ ‡ç­¾å¯¹è±¡ï¼Œä½¿ç”¨ color2 ä½œä¸ºæ–‡å­—é¢œè‰²</span>
<span class="hljs-keyword">const</span> label = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Label</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>,
}));
label.<span class="hljs-title function_">addAttributeRename</span>(<span class="hljs-string">'textFillStyle'</span>, <span class="hljs-string">'color2'</span>);
label.<span class="hljs-property">dataSource</span> = sharedData;
</code></pre>
<h2 data-id="heading-15">äº”ã€å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-16">5.1 POI ç‚¹æ ‡æ³¨</h3>
<p>åœ¨åœ°å›¾ä¸Šæ ‡æ³¨ POI ç‚¹ï¼Œé€šå¸¸éœ€è¦æ˜¾ç¤ºåç§°å’Œå›¾æ ‡ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> poiLabel = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Label</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'icontext'</span>,
    <span class="hljs-attr">vertexIcons</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">textSize</span>: <span class="hljs-number">14</span>,
    <span class="hljs-attr">textFillStyle</span>: <span class="hljs-string">'#333333'</span>,
    <span class="hljs-attr">textStrokeStyle</span>: <span class="hljs-string">'rgba(255, 255, 255, 0.8)'</span>,
    <span class="hljs-attr">textStrokeWidth</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">iconWidth</span>: <span class="hljs-number">32</span>,
    <span class="hljs-attr">iconHeight</span>: <span class="hljs-number">32</span>,
    <span class="hljs-attr">textAnchor</span>: <span class="hljs-string">'bottom'</span>,
    <span class="hljs-attr">padding</span>: [<span class="hljs-number">4</span>, <span class="hljs-number">4</span>],
}));

<span class="hljs-keyword">const</span> poiData = mapvthree.<span class="hljs-property">GeoJSONDataSource</span>.<span class="hljs-title function_">fromGeoJSON</span>(poiFeatures);
poiData.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'icon'</span>, <span class="hljs-string">'icon'</span>);
poiData.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'text'</span>, <span class="hljs-string">'name'</span>);
poiLabel.<span class="hljs-property">dataSource</span> = poiData;
</code></pre>
<h3 data-id="heading-17">5.2 é“è·¯åç§°æ ‡æ³¨</h3>
<p>é“è·¯åç§°é€šå¸¸éœ€è¦è´´åœ°æ˜¾ç¤ºï¼Œå¹¶æ”¯æŒæ—‹è½¬ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> roadLabel = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Label</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>,
    <span class="hljs-attr">textSize</span>: <span class="hljs-number">12</span>,
    <span class="hljs-attr">textFillStyle</span>: <span class="hljs-string">'#666666'</span>,
    <span class="hljs-attr">textStrokeStyle</span>: <span class="hljs-string">'rgba(255, 255, 255, 0.9)'</span>,
    <span class="hljs-attr">textStrokeWidth</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">flat</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è´´åœ°æ˜¾ç¤º</span>
    <span class="hljs-attr">textAnchor</span>: <span class="hljs-string">'center'</span>,
}));

<span class="hljs-keyword">const</span> roadData = mapvthree.<span class="hljs-property">GeoJSONDataSource</span>.<span class="hljs-title function_">fromGeoJSON</span>(roadFeatures);
roadData.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'text'</span>, <span class="hljs-string">'name'</span>);
roadData.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'rotateZ'</span>, <span class="hljs-string">'angle'</span>); <span class="hljs-comment">// æ ¹æ®é“è·¯æ–¹å‘æ—‹è½¬</span>
roadLabel.<span class="hljs-property">dataSource</span> = roadData;
</code></pre>
<h3 data-id="heading-18">5.3 åŠ¨æ€æ•°æ®æ›´æ–°</h3>
<p>å½“æ ‡ç­¾æ•°æ®éœ€è¦åŠ¨æ€æ›´æ–°æ—¶ï¼Œç›´æ¥ä¿®æ”¹æ•°æ®æºå³å¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ·»åŠ æ–°æ ‡ç­¾</span>
dataSource.<span class="hljs-title function_">add</span>([
    <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">DataItem</span>([<span class="hljs-number">116.404</span>, <span class="hljs-number">39.915</span>], {
        <span class="hljs-attr">id</span>: <span class="hljs-string">'new-label'</span>,
        <span class="hljs-attr">text</span>: <span class="hljs-string">'æ–°æ ‡ç­¾'</span>,
    })
]);

<span class="hljs-comment">// æ›´æ–°æ ‡ç­¾å±æ€§</span>
dataSource.<span class="hljs-title function_">setAttributeValues</span>(<span class="hljs-string">'new-label'</span>, {
    <span class="hljs-attr">text</span>: <span class="hljs-string">'æ›´æ–°åçš„æ ‡ç­¾'</span>,
    <span class="hljs-attr">textSize</span>: <span class="hljs-number">20</span>,
});

<span class="hljs-comment">// åˆ é™¤æ ‡ç­¾</span>
dataSource.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'new-label'</span>);
</code></pre>
<h3 data-id="heading-19">5.4 å¯ç”¨æ·¡å…¥æ·¡å‡ºæ•ˆæœ</h3>
<p>å½“æ ‡ç­¾æ•°æ®é¢‘ç¹å˜åŒ–æ—¶ï¼Œå¯ç”¨æ·¡å…¥æ·¡å‡ºå¯ä»¥æå‡ç”¨æˆ·ä½“éªŒï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> label = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Label</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>,
    <span class="hljs-attr">enableFade</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨æ·¡å…¥æ·¡å‡º</span>
    <span class="hljs-attr">fadeDuration</span>: <span class="hljs-number">300</span>, <span class="hljs-comment">// æ·¡å…¥æ·¡å‡ºæ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰</span>
}));

<span class="hljs-comment">// æ•°æ®ä¸­å¿…é¡»åŒ…å« id å­—æ®µ</span>
<span class="hljs-keyword">const</span> data = mapvthree.<span class="hljs-property">GeoJSONDataSource</span>.<span class="hljs-title function_">fromGeoJSON</span>([
    {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'Feature'</span>,
        <span class="hljs-attr">geometry</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'Point'</span>,
            <span class="hljs-attr">coordinates</span>: [<span class="hljs-number">116.404</span>, <span class="hljs-number">39.915</span>]
        },
        <span class="hljs-attr">properties</span>: {
            <span class="hljs-attr">id</span>: <span class="hljs-string">'label-1'</span>, <span class="hljs-comment">// å¿…é¡»åŒ…å« id</span>
            <span class="hljs-attr">text</span>: <span class="hljs-string">'æ ‡ç­¾'</span>,
        }
    }
]);
</code></pre>
<h3 data-id="heading-20">5.5 å¯ç”¨ç¢°æ’æ£€æµ‹</h3>
<p>å½“æ ‡ç­¾æ•°é‡è¾ƒå¤šæ—¶ï¼Œå¯ç”¨ç¢°æ’æ£€æµ‹å¯ä»¥è‡ªåŠ¨éšè—é‡å çš„æ ‡ç­¾ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> label = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Label</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>,
    <span class="hljs-attr">enableCollision</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨ç¢°æ’æ£€æµ‹</span>
}));
</code></pre>
<h2 data-id="heading-21">å…­ã€åŠ¨ç”»æ•ˆæœ</h2>
<p><code>Label</code> ç»„ä»¶æ”¯æŒå¤šç§åŠ¨ç”»æ•ˆæœï¼Œè®©æ ‡ç­¾æ›´åŠ ç”ŸåŠ¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> label = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Label</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>,
    <span class="hljs-attr">animationRotate</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ—‹è½¬åŠ¨ç”»</span>
    <span class="hljs-attr">animationJump</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è·³è·ƒåŠ¨ç”»</span>
    <span class="hljs-attr">animationJumpHeight</span>: <span class="hljs-number">10</span>, <span class="hljs-comment">// è·³è·ƒé«˜åº¦</span>
    <span class="hljs-comment">// animationBreath: true, // å‘¼å¸åŠ¨ç”»</span>
    <span class="hljs-comment">// animationScale: true, // ç¼©æ”¾åŠ¨ç”»</span>
}));
</code></pre>
<h2 data-id="heading-22">ä¸ƒã€äº‹ä»¶äº¤äº’</h2>
<p><code>Label</code> ç»„ä»¶æ”¯æŒç‚¹å‡»å’Œå³é”®ç‚¹å‡»äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js">label.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»äº†æ ‡ç­¾'</span>, event.<span class="hljs-property">entity</span>.<span class="hljs-property">value</span>);
    <span class="hljs-comment">// event.entity.value åŒ…å«æ ‡ç­¾çš„æ•°æ®</span>
    <span class="hljs-comment">// event.entity.index æ˜¯æ ‡ç­¾çš„ç´¢å¼•</span>
});

label.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'rightclick'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å³é”®ç‚¹å‡»äº†æ ‡ç­¾'</span>, event.<span class="hljs-property">entity</span>.<span class="hljs-property">value</span>);
});
</code></pre>
<h2 data-id="heading-23">å…«ã€å®Œæ•´ç¤ºä¾‹</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æ ‡ç­¾ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆå§‹åŒ–å¼•æ“</span>
<span class="hljs-keyword">const</span> engine = <span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Engine</span>({
    <span class="hljs-comment">// ... å¼•æ“é…ç½®</span>
});

<span class="hljs-comment">// åˆ›å»ºæ ‡ç­¾ç»„ä»¶</span>
<span class="hljs-keyword">const</span> label = engine.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> mapvthree.<span class="hljs-title class_">Label</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'icontext'</span>,
    <span class="hljs-attr">vertexIcons</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">textSize</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">textFillStyle</span>: <span class="hljs-string">'#333333'</span>,
    <span class="hljs-attr">textStrokeStyle</span>: <span class="hljs-string">'rgba(255, 255, 255, 0.9)'</span>,
    <span class="hljs-attr">textStrokeWidth</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">iconWidth</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">iconHeight</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">textAnchor</span>: <span class="hljs-string">'bottom'</span>,
    <span class="hljs-attr">padding</span>: [<span class="hljs-number">4</span>, <span class="hljs-number">4</span>],
    <span class="hljs-attr">enableFade</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">enableCollision</span>: <span class="hljs-literal">true</span>,
}));

<span class="hljs-comment">// å‡†å¤‡æ•°æ®</span>
<span class="hljs-keyword">const</span> features = [
    {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'Feature'</span>,
        <span class="hljs-attr">geometry</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'Point'</span>,
            <span class="hljs-attr">coordinates</span>: [<span class="hljs-number">116.404</span>, <span class="hljs-number">39.915</span>]
        },
        <span class="hljs-attr">properties</span>: {
            <span class="hljs-attr">id</span>: <span class="hljs-string">'poi-1'</span>,
            <span class="hljs-attr">icon</span>: <span class="hljs-string">'assets/icons/restaurant.png'</span>,
            <span class="hljs-attr">text</span>: <span class="hljs-string">'é¤å…'</span>,
            <span class="hljs-attr">category</span>: <span class="hljs-string">'food'</span>,
        }
    },
    <span class="hljs-comment">// ... æ›´å¤šæ•°æ®</span>
];

<span class="hljs-keyword">const</span> dataSource = mapvthree.<span class="hljs-property">GeoJSONDataSource</span>.<span class="hljs-title function_">fromGeoJSON</span>(features);

<span class="hljs-comment">// å®šä¹‰å±æ€§</span>
dataSource.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'icon'</span>, <span class="hljs-string">'icon'</span>);
dataSource.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'text'</span>, <span class="hljs-string">'text'</span>);

<span class="hljs-comment">// æ ¹æ®ç±»åˆ«è®¾ç½®ä¸åŒçš„æ–‡å­—é¢œè‰²</span>
dataSource.<span class="hljs-title function_">defineAttribute</span>(<span class="hljs-string">'textFillStyle'</span>, <span class="hljs-function">(<span class="hljs-params">properties</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> colorMap = {
        <span class="hljs-attr">food</span>: <span class="hljs-string">'#FF6B6B'</span>,
        <span class="hljs-attr">hotel</span>: <span class="hljs-string">'#4ECDC4'</span>,
        <span class="hljs-attr">shop</span>: <span class="hljs-string">'#FFE66D'</span>,
    };
    <span class="hljs-keyword">return</span> colorMap[properties.<span class="hljs-property">category</span>] || <span class="hljs-string">'#333333'</span>;
});

<span class="hljs-comment">// ç»‘å®šæ•°æ®æº</span>
label.<span class="hljs-property">dataSource</span> = dataSource;

<span class="hljs-comment">// æ·»åŠ äº¤äº’äº‹ä»¶</span>
label.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> data = event.<span class="hljs-property">entity</span>.<span class="hljs-property">value</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»äº†'</span>, data.<span class="hljs-property">text</span>);
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œå®ç°è¯¦æƒ…å±•ç¤ºã€é«˜äº®ç­‰äº¤äº’</span>
});

<span class="hljs-comment">// åŠ¨æ€æ›´æ–°æ•°æ®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateLabels</span>(<span class="hljs-params">newFeatures</span>) {
    dataSource.<span class="hljs-title function_">clear</span>();
    dataSource.<span class="hljs-title function_">add</span>(newFeatures);
}
</code></pre>
<h2 data-id="heading-24">ä¹ã€æ€»ç»“</h2>
<p><code>Label</code> ç»„ä»¶æ˜¯ MapVThree ä¸­åŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„æ ‡ç­¾æ¸²æŸ“ç»„ä»¶ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„é…ç½®ï¼Œåˆç†ä½¿ç”¨ç¢°æ’æ£€æµ‹ã€æ·¡å…¥æ·¡å‡ºç­‰é«˜çº§åŠŸèƒ½ï¼Œå¯ä»¥åˆ›å»ºå‡ºæ—¢ç¾è§‚åˆé«˜æ€§èƒ½çš„åœ°å›¾æ ‡ç­¾ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.js App Router å®æˆ˜é¿å‘ï¼šçŠ¶æ€ã€ç¼“å­˜ä¸æµ‹è¯•]]></title>    <link>https://juejin.cn/post/7579494852654383138</link>    <guid>https://juejin.cn/post/7579494852654383138</guid>    <pubDate>2025-12-04T03:18:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579494852654383138" data-draft-id="7579480677903007779" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.js App Router å®æˆ˜é¿å‘ï¼šçŠ¶æ€ã€ç¼“å­˜ä¸æµ‹è¯•"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-04T03:18:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç•…ç•…ç•…å“¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/4045807439580951"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.js App Router å®æˆ˜é¿å‘ï¼šçŠ¶æ€ã€ç¼“å­˜ä¸æµ‹è¯•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4045807439580951/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç•…ç•…ç•…å“¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:18:20.000Z" title="Thu Dec 04 2025 03:18:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ï¼šApp Router çš„è¯ç”Ÿä¸æ ¸å¿ƒå˜é©</h2>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦ App Routerï¼Ÿ</h3>
<p>åœ¨ App Router å‡ºç°ä¹‹å‰ï¼ŒNext.js ä¸€ç›´ä½¿ç”¨ Pages Routerï¼ˆ<code>pages/</code> ç›®å½•ï¼‰ä½œä¸ºè·¯ç”±ç³»ç»Ÿã€‚è¿™å¥—ç³»ç»Ÿè™½ç„¶ç®€å•æ˜“ç”¨ï¼Œä½†éšç€åº”ç”¨å¤æ‚åº¦çš„æå‡ï¼Œé€æ¸æš´éœ²å‡ºä¸€äº›å±€é™æ€§ï¼š</p>
<ul>
<li><strong>å¸ƒå±€å¤ç”¨å›°éš¾</strong>ï¼šéœ€è¦é€šè¿‡é«˜é˜¶ç»„ä»¶æˆ–æ‰‹åŠ¨åŒ…è£¹çš„æ–¹å¼å®ç°å¸ƒå±€åµŒå¥—</li>
<li><strong>æ•°æ®è·å–å‰²è£‚</strong>ï¼š<code>getServerSideProps</code>ã€<code>getStaticProps</code>ã€<code>getInitialProps</code> ä¸ç»„ä»¶é€»è¾‘åˆ†ç¦»</li>
<li><strong>å®¢æˆ·ç«¯ JavaScript ä½“ç§¯å¤§</strong>ï¼šæ‰€æœ‰äº¤äº’é€»è¾‘éƒ½å¿…é¡»æ‰“åŒ…åˆ°å®¢æˆ·ç«¯</li>
<li><strong>æ°´åˆï¼ˆHydrationï¼‰æˆæœ¬é«˜</strong>ï¼šå³ä½¿æ˜¯é™æ€å†…å®¹ä¹Ÿéœ€è¦å®Œæ•´çš„å®¢æˆ·ç«¯ React è¿è¡Œæ—¶</li>
</ul>
<p>2022 å¹´ï¼Œéšç€ React 18 å¼•å…¥ Server Componentsï¼ŒNext.js å›¢é˜Ÿçœ‹åˆ°äº†é‡æ–°è®¾è®¡è·¯ç”±ç³»ç»Ÿçš„å¥‘æœºã€‚äºæ˜¯ï¼ŒApp Router åº”è¿è€Œç”Ÿã€‚</p>
<h3 data-id="heading-2">App Router å¸¦æ¥çš„æ ¸å¿ƒå˜åŒ–</h3>
<p><strong>1. React Server Componentsï¼ˆRSCï¼‰é»˜è®¤å¯ç”¨</strong></p>
<p>è¿™æ˜¯æœ€æ ¹æœ¬çš„èŒƒå¼è½¬å˜ã€‚åœ¨ App Router ä¸­ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// é»˜è®¤æ˜¯ Server Componentï¼Œè¿è¡Œåœ¨æœåŠ¡ç«¯</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">query</span>(); <span class="hljs-comment">// å¯ä»¥ç›´æ¥è®¿é—®æ•°æ®åº“</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// éœ€è¦å®¢æˆ·ç«¯äº¤äº’æ—¶ï¼Œæ˜¾å¼å£°æ˜</span>
(<span class="hljs-string">"use client"</span>);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ClientPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;{count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
<p><strong>å½±å“</strong>ï¼š</p>
<ul>
<li>âœ… é›¶å®¢æˆ·ç«¯ JS çš„é™æ€å†…å®¹æˆä¸ºå¯èƒ½</li>
<li>âœ… æœåŠ¡ç«¯ç»„ä»¶å¯ä»¥ç›´æ¥è®¿é—®æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿ</li>
<li>âš ï¸ å¼€å‘è€…å¿…é¡»æ¸…æ¥šåŒºåˆ†æœåŠ¡ç«¯/å®¢æˆ·ç«¯ç»„ä»¶è¾¹ç•Œ</li>
</ul>
<p><strong>2. åŸºäºæ–‡ä»¶å¤¹çš„åµŒå¥—è·¯ç”±ä¸å¸ƒå±€</strong></p>
<pre><code class="hljs language-bash" lang="bash">app/
â”œâ”€â”€ layout.tsx          <span class="hljs-comment"># æ ¹å¸ƒå±€ï¼ˆæ‰€æœ‰é¡µé¢å…±äº«ï¼‰</span>
â”œâ”€â”€ page.tsx            <span class="hljs-comment"># é¦–é¡µ</span>
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ layout.tsx      <span class="hljs-comment"># dashboard ä¸“å±å¸ƒå±€</span>
â”‚   â”œâ”€â”€ page.tsx        <span class="hljs-comment"># /dashboard</span>
â”‚   â””â”€â”€ settings/
â”‚       â””â”€â”€ page.tsx    <span class="hljs-comment"># /dashboard/settings</span>
</code></pre>
<p><strong>å½±å“</strong>ï¼š</p>
<ul>
<li>âœ… å¸ƒå±€è‡ªåŠ¨åµŒå¥—ï¼Œå¤©ç„¶æ”¯æŒæŒä¹…åŒ–ï¼ˆåˆ‡æ¢è·¯ç”±æ—¶ Layout ä¸å¸è½½ï¼‰</li>
<li>âœ… ä»£ç ç»„ç»‡æ›´æ¸…æ™°ï¼Œç‰¹æ®Šæ–‡ä»¶ï¼ˆ<code>loading.tsx</code>ã€<code>error.tsx</code>ï¼‰å°±è¿‘æ”¾ç½®</li>
<li>âš ï¸ çŠ¶æ€ç®¡ç†éœ€è¦é‡æ–°æ€è€ƒï¼ˆè§åæ–‡ç—›ç‚¹åˆ†æï¼‰</li>
</ul>
<p><strong>3. æµå¼æ¸²æŸ“ï¼ˆStreamingï¼‰ä¸ Suspense ä¼˜å…ˆ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// é¡µé¢å¯ä»¥é€æ­¥æ¸²æŸ“ï¼Œä¸å¿…ç­‰å¾…æ‰€æœ‰æ•°æ®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Skeleton</span> /&gt;</span>}&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">SlowComponent</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>å½±å“</strong>ï¼š</p>
<ul>
<li>âœ… TTFB å¤§å¹…é™ä½ï¼Œç”¨æˆ·æ„ŸçŸ¥æ€§èƒ½æå‡</li>
<li>âš ï¸ ç›‘æ§æŒ‡æ ‡éœ€è¦è°ƒæ•´ï¼ˆTTFB ä¸å†å‡†ç¡®ï¼‰</li>
</ul>
<p><strong>4. Server Actionsï¼šæ— éœ€ API è·¯ç”±çš„æ•°æ®å˜æ›´</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// ç›´æ¥åœ¨ç»„ä»¶ä¸­å®šä¹‰æœåŠ¡ç«¯é€»è¾‘</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createPost</span>(<span class="hljs-params">formData: FormData</span>) {
  <span class="hljs-string">'use server'</span>
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">post</span>.<span class="hljs-title function_">create</span>(...)
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Form</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{createPost}</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
}
</code></pre>
<p><strong>å½±å“</strong>ï¼š</p>
<ul>
<li>âœ… å‡å°‘æ ·æ¿ä»£ç ï¼Œç±»å‹å®‰å…¨</li>
<li>âš ï¸ æµ‹è¯•å˜å¾—å¤æ‚ï¼ˆè§åæ–‡è¯¦è§£ï¼‰</li>
</ul>
<p><strong>5. å…¨æ–°çš„ç¼“å­˜æœºåˆ¶</strong></p>
<p>App Router å¼•å…¥äº†å››å±‚ç¼“å­˜ç³»ç»Ÿï¼ˆè¯·æ±‚è®°å¿†åŒ–ã€æ•°æ®ç¼“å­˜ã€å…¨è·¯ç”±ç¼“å­˜ã€è·¯ç”±å™¨ç¼“å­˜ï¼‰ï¼Œè¿™æ˜¯æ€§èƒ½ä¼˜åŒ–çš„åˆ©å™¨ï¼Œä¹Ÿæ˜¯æœ€å¤§çš„"å‘"ã€‚</p>
<h3 data-id="heading-3">ç†æƒ³ä¸ç°å®çš„è½å·®</h3>
<p>2023 å¹´ï¼ŒNext.js 13.4 æ­£å¼å°† App Router æ ‡è®°ä¸º"ç¨³å®š"ã€‚ç„¶è€Œï¼Œå½“å¼€å‘è€…æ»¡æ€€æœŸå¾…åœ°å°†è¿™äº›æ–°ç‰¹æ€§å¼•å…¥å®é™…é¡¹ç›®æ—¶ï¼Œç°å®å´ä¸å¦‚é¢„æœŸç¾å¥½ã€‚ç¤¾åŒºä¸­"åæ§½"å£°ä¸æ–­ï¼š</p>
<blockquote>
<p>"è·¯ç”±åˆ‡æ¢åï¼ŒçŠ¶æ€æ€ä¹ˆä¸é‡ç½®ï¼Ÿ"<br/>
"ç”Ÿäº§ç¯å¢ƒæ•°æ®ä¸€ç›´æ˜¯æ—§çš„ï¼Œåˆ·æ–°ä¹Ÿä¸ç®¡ç”¨ï¼"<br/>
"Server Actions æ€ä¹ˆæµ‹è¯•ï¼ŸCypress éƒ½ä¸çŸ¥é“æ€ä¹ˆå†™ï¼"<br/>
"æœ€åæˆ‘ä»¬æ”¾å¼ƒäº† RSCï¼Œå…¨éƒ¨æ”¹å› Route Handlers..."</p>
</blockquote>
<p>è¿™äº›é—®é¢˜ä¸æ˜¯ä¸ªä¾‹ï¼Œè€Œæ˜¯é«˜é¢‘çš„ã€å…·ä½“çš„ã€çœŸå®å­˜åœ¨çš„ã€‚<strong>æœ¬æ–‡å°†ç»“åˆå®æˆ˜ç»éªŒï¼Œæ·±å…¥å‰–æè¿™äº›ç—›ç‚¹çš„æ ¹å› ï¼Œå¹¶æä¾›å¯è½åœ°çš„è§£å†³æ–¹æ¡ˆä¸æœ€ä½³å®è·µã€‚</strong></p>
<h2 data-id="heading-4">äºŒã€ç—›ç‚¹ä¸€ï¼šçŠ¶æ€ä¸é‡ç½®ä¸å®¢æˆ·ç«¯çŠ¶æ€ç®¡ç†å›°å¢ƒ</h2>
<h3 data-id="heading-5">é—®é¢˜åœºæ™¯å¤ç°</h3>
<p>å‡è®¾ä½ æœ‰ä¸¤ä¸ªé¡µé¢ <code>/page-a</code> å’Œ <code>/page-b</code>ï¼Œå®ƒä»¬éƒ½æœ‰è‡ªå·±çš„å®¢æˆ·ç«¯çŠ¶æ€ï¼ˆæ¯”å¦‚è¡¨å•è¾“å…¥ã€æ»šåŠ¨ä½ç½®ç­‰ï¼‰ã€‚å½“ç”¨æˆ·ä» Page A åˆ‡æ¢åˆ° Page Bï¼Œå†åˆ‡æ¢å› Page A æ—¶ï¼Œä½ æœŸæœ› Page A çš„çŠ¶æ€è¢«é‡ç½®â€”â€”ä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚</p>
<p>æ›´ä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼š</p>
<ul>
<li>æ‹¦æˆªè·¯ç”±ï¼ˆIntercepting Routesï¼‰ä¸­çš„çŠ¶æ€ä¸æ™®é€šè·¯ç”±è¡¨ç°ä¸ä¸€è‡´</li>
<li>ç™»å½•æˆåŠŸå <code>redirect('/')</code> æ‰§è¡Œäº†ï¼Œä½†å¯¼èˆªæ çš„ç™»å½•çŠ¶æ€æ²¡æœ‰æ›´æ–°ï¼Œéœ€è¦æ‰‹åŠ¨åˆ·æ–°</li>
</ul>
<h3 data-id="heading-6">æ ¹å› åˆ†æ</h3>
<p>App Router çš„æ ¸å¿ƒè®¾è®¡åŸåˆ™ä¹‹ä¸€æ˜¯"å¸ƒå±€ä¿æŒçŠ¶æ€"ï¼ˆLayout Persistenceï¼‰ã€‚è¿™æ„å‘³ç€å½“ä½ åœ¨åŒä¸€ä¸ª Layout ä¸‹åˆ‡æ¢è·¯ç”±æ—¶ï¼ŒLayout ç»„ä»¶ä¸ä¼šè¢«å¸è½½å’Œé‡æ–°æŒ‚è½½ã€‚è¿™æ˜¯ä¸€ä¸ª"ç‰¹æ€§"ï¼Œæ—¨åœ¨æå‡ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½â€”â€”ä½†å®ƒä¹Ÿå¸¦æ¥äº†çŠ¶æ€"ç²˜æ»"çš„å‰¯ä½œç”¨ã€‚</p>
<p>å¦ä¸€ä¸ªå¸¸è§åŸå› æ˜¯ <strong>Server Components ä¸ Client Components è¾¹ç•Œåˆ’åˆ†ä¸æ¸…</strong>ã€‚å¼€å‘è€…å¯èƒ½åœ¨ Server Component ä¸­åµŒå¥—äº† Client Componentï¼Œä½†æ²¡æœ‰æ„è¯†åˆ° Server Component çš„è¾“å‡ºåœ¨è·¯ç”±åˆ‡æ¢æ—¶å¯èƒ½è¢«ç¼“å­˜å¤ç”¨ã€‚</p>
<h3 data-id="heading-7">è§£å†³æ–¹æ¡ˆä¸æœ€ä½³å®è·µ</h3>
<p><strong>1. æ­£ç¡®åˆ’åˆ†ç»„ä»¶è¾¹ç•Œ</strong></p>
<p>å°†éœ€è¦ç‹¬ç«‹ç®¡ç†çŠ¶æ€çš„é€»è¾‘å°è£…åœ¨ Client Component ä¸­ï¼Œå¹¶ç¡®ä¿è¯¥ç»„ä»¶åœ¨è·¯ç”±åˆ‡æ¢æ—¶èƒ½è¢«æ­£ç¡®å¸è½½ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âŒ é”™è¯¯åšæ³•ï¼šçŠ¶æ€å®šä¹‰åœ¨å…±äº« Layout ä¸­</span>
<span class="hljs-comment">// app/layout.tsx</span>
<span class="hljs-string">"use client"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// è¿™ä¸ªçŠ¶æ€åœ¨è·¯ç”±åˆ‡æ¢æ—¶ä¸ä¼šé‡ç½®</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// âœ… æ­£ç¡®åšæ³•ï¼šçŠ¶æ€å®šä¹‰åœ¨å…·ä½“é¡µé¢ç»„ä»¶ä¸­</span>
<span class="hljs-comment">// app/page-a/page.tsx</span>
(<span class="hljs-string">"use client"</span>);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PageA</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// åˆ‡æ¢åˆ°å…¶ä»–è·¯ç”±æ—¶ï¼ŒPageA ä¼šè¢«å¸è½½</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Count: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p><strong>2. åˆ©ç”¨ <code>key</code> å±æ€§å¼ºåˆ¶é‡æ–°æŒ‚è½½</strong></p>
<p>å½“ä½ ç¡®å®éœ€è¦åœ¨è·¯ç”±åˆ‡æ¢æ—¶é‡ç½®æŸä¸ª Client Component çš„çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡æ”¹å˜å…¶ <code>key</code> å±æ€§æ¥å¼ºåˆ¶ React é‡æ–°æŒ‚è½½ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// ä½¿ç”¨ pathname ä½œä¸º key</span>
<span class="hljs-keyword">import</span> { usePathname } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/navigation"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> pathname = <span class="hljs-title function_">usePathname</span>();
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ClientComponent</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{pathname}</span> /&gt;</span></span>;
}
</code></pre>
<p><strong>3. ä½¿ç”¨ <code>router.refresh()</code> åˆ·æ–°æœåŠ¡ç«¯æ•°æ®</strong></p>
<p>å¦‚æœé—®é¢˜å‡ºåœ¨æœåŠ¡ç«¯æ•°æ®æ²¡æœ‰æ›´æ–°ï¼ˆæ¯”å¦‚ç™»å½•åç”¨æˆ·ä¿¡æ¯æ²¡å˜ï¼‰ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯è°ƒç”¨ <code>router.refresh()</code> æ¥é‡æ–°è·å–æœåŠ¡ç«¯æ•°æ®ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/navigation"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">LoginButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>();

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLogin</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginAction</span>();
    router.<span class="hljs-title function_">refresh</span>(); <span class="hljs-comment">// å¼ºåˆ¶åˆ·æ–°æœåŠ¡ç«¯ç»„ä»¶</span>
  }
}
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€ç—›ç‚¹äºŒï¼šç¼“å­˜æœºåˆ¶çš„"é»‘ç®±"ä¸å¤±æ§</h2>
<h3 data-id="heading-9">Next.js å››å±‚ç¼“å­˜ä½“ç³»æ¦‚è§ˆ</h3>
<p>Next.js çš„ç¼“å­˜æœºåˆ¶æ˜¯å¼€å‘è€…æœ€å¸¸"è¸©å‘"çš„åœ°æ–¹ã€‚ç†è§£å…¶å››å±‚ç¼“å­˜ä½“ç³»æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ï¼š</p>



































<table><thead><tr><th>ç¼“å­˜æœºåˆ¶</th><th>å­˜å‚¨ä½ç½®</th><th>ä½œç”¨èŒƒå›´</th><th>æŒç»­æ—¶é—´</th></tr></thead><tbody><tr><td>è¯·æ±‚è®°å¿†åŒ–</td><td>æœåŠ¡ç«¯</td><td>å•æ¬¡æ¸²æŸ“</td><td>æ¸²æŸ“å®Œæˆåå¤±æ•ˆ</td></tr><tr><td>æ•°æ®ç¼“å­˜</td><td>æœåŠ¡ç«¯</td><td>è·¨è¯·æ±‚/éƒ¨ç½²</td><td>æŒä¹…ï¼ˆå¯é‡éªŒè¯ï¼‰</td></tr><tr><td>å…¨è·¯ç”±ç¼“å­˜</td><td>æœåŠ¡ç«¯</td><td>é™æ€è·¯ç”±</td><td>æŒä¹…ï¼ˆå¯é‡éªŒè¯ï¼‰</td></tr><tr><td>è·¯ç”±å™¨ç¼“å­˜</td><td>å®¢æˆ·ç«¯</td><td>ç”¨æˆ·ä¼šè¯</td><td>ä¼šè¯æˆ–æ—¶é—´é™åˆ¶</td></tr></tbody></table>
<p><strong>è¯·æ±‚è®°å¿†åŒ–</strong>ï¼šåŒä¸€æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œç›¸åŒ URL çš„ fetch è¯·æ±‚ä¼šè¢«è‡ªåŠ¨å»é‡ï¼Œåªå‘é€ä¸€æ¬¡çœŸå®è¯·æ±‚ã€‚</p>
<p><strong>æ•°æ®ç¼“å­˜</strong>ï¼šfetch è¯·æ±‚çš„ç»“æœä¼šè¢«æŒä¹…åŒ–ç¼“å­˜ï¼Œè·¨ç”¨æˆ·ã€è·¨è¯·æ±‚å¤ç”¨ã€‚</p>
<p><strong>å…¨è·¯ç”±ç¼“å­˜</strong>ï¼šé™æ€æ¸²æŸ“çš„é¡µé¢ï¼ˆHTML å’Œ RSC Payloadï¼‰ä¼šè¢«ç¼“å­˜åœ¨æœåŠ¡ç«¯ã€‚</p>
<p><strong>è·¯ç”±å™¨ç¼“å­˜</strong>ï¼šå®¢æˆ·ç«¯ä¼šåœ¨å†…å­˜ä¸­ç¼“å­˜å·²è®¿é—®é¡µé¢çš„ RSC Payloadï¼Œç”¨äºå¿«é€Ÿå¯¼èˆªã€‚</p>
<h3 data-id="heading-10">å¸¸è§"è¸©å‘"åœºæ™¯</h3>
<p><strong>åœºæ™¯ä¸€ï¼šç”Ÿäº§ç¯å¢ƒé¡µé¢æ•°æ®"ä¸æ›´æ–°"</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// è¿™ä¸ªæ—¶é—´åœ¨ dev æ¨¡å¼ä¸‹æ¯æ¬¡åˆ·æ–°éƒ½å˜</span>
<span class="hljs-comment">// ä½†åœ¨ production ä¸‹ï¼Œå®ƒæ°¸è¿œæ˜¯æ„å»ºæ—¶çš„æ—¶é—´ï¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> time = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleTimeString</span>();
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Current time: {time}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>åŸå› ï¼šNext.js åœ¨æ„å»ºæ—¶ä¼šå°è¯•é™æ€åŒ–æ‰€æœ‰å¯ä»¥é™æ€åŒ–çš„é¡µé¢ã€‚å¦‚æœä½ çš„é¡µé¢æ²¡æœ‰ä½¿ç”¨åŠ¨æ€å‡½æ•°ï¼ˆå¦‚ <code>cookies()</code>ã€<code>headers()</code>ï¼‰æˆ–æ˜¾å¼å£°æ˜ä¸ºåŠ¨æ€ï¼Œå®ƒå°±ä¼šè¢«é™æ€å¤„ç†ã€‚</p>
<p><strong>åœºæ™¯äºŒï¼šå®¢æˆ·ç«¯å¯¼èˆªæ˜¾ç¤ºé™ˆæ—§æ•°æ®</strong></p>
<p>ç”¨æˆ·åœ¨é¡µé¢ A ç¼–è¾‘äº†æ•°æ®ï¼Œç„¶åå¯¼èˆªåˆ°é¡µé¢ Bï¼Œå†è¿”å›é¡µé¢ Aâ€”â€”å‘ç°é¡µé¢ A è¿˜æ˜¯æ—§æ•°æ®ï¼</p>
<p>åŸå› ï¼šè·¯ç”±å™¨ç¼“å­˜ï¼ˆRouter Cacheï¼‰åœ¨å®¢æˆ·ç«¯ç¼“å­˜äº†é¡µé¢ A çš„ RSC Payloadï¼Œè¿”å›æ—¶ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œæ²¡æœ‰é‡æ–°è¯·æ±‚æœåŠ¡ç«¯ã€‚</p>
<p><strong>åœºæ™¯ä¸‰ï¼šNext.js 15 ä¸ 14 çš„è¡Œä¸ºå·®å¼‚</strong></p>
<p>Next.js 15 æ”¹å˜äº† fetch çš„é»˜è®¤ç¼“å­˜ç­–ç•¥ï¼š</p>
<ul>
<li>14 åŠä¹‹å‰ï¼šé»˜è®¤ <code>cache: 'force-cache'</code></li>
<li>15 å¼€å§‹ï¼šé»˜è®¤ <code>cache: 'no-store'</code></li>
</ul>
<p>è¿™æ„å‘³ç€å‡çº§åˆ° Next.js 15 åï¼Œä¹‹å‰ä¾èµ–é»˜è®¤ç¼“å­˜çš„é¡µé¢å¯èƒ½ä¼šå˜æˆåŠ¨æ€æ¸²æŸ“ï¼Œæ€§èƒ½åè€Œä¸‹é™ã€‚</p>
<h3 data-id="heading-11">ç¼“å­˜æ§åˆ¶æœ€ä½³å®è·µ</h3>
<p><strong>1. æ˜¾å¼å£°æ˜ç¼“å­˜ç­–ç•¥</strong></p>
<p>ä¸è¦ä¾èµ–é»˜è®¤è¡Œä¸ºï¼Œæ˜¾å¼å£°æ˜ä½ æœŸæœ›çš„ç¼“å­˜ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// é™æ€æ•°æ®ï¼Œç¼“å­˜ 1 å°æ—¶</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://api.example.com/static-data"</span>, {
  <span class="hljs-attr">next</span>: { <span class="hljs-attr">revalidate</span>: <span class="hljs-number">3600</span> },
});

<span class="hljs-comment">// åŠ¨æ€æ•°æ®ï¼Œä¸ç¼“å­˜</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://api.example.com/realtime-data"</span>, {
  <span class="hljs-attr">cache</span>: <span class="hljs-string">"no-store"</span>,
});
</code></pre>
<p><strong>2. ä½¿ç”¨ revalidatePath / revalidateTag ä¸»åŠ¨å¤±æ•ˆ</strong></p>
<p>å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆæ¯”å¦‚ç”¨æˆ·æäº¤äº†è¡¨å•ï¼‰ï¼Œä¸»åŠ¨ä½¿ç¼“å­˜å¤±æ•ˆï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// Server Action ä¸­</span>
<span class="hljs-keyword">import</span> { revalidatePath, revalidateTag } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/cache'</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updatePost</span>(<span class="hljs-params">formData</span>) {
  <span class="hljs-string">'use server'</span>
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">post</span>.<span class="hljs-title function_">update</span>(...)
  <span class="hljs-title function_">revalidatePath</span>(<span class="hljs-string">'/posts'</span>)      <span class="hljs-comment">// ä½¿è¯¥è·¯å¾„çš„ç¼“å­˜å¤±æ•ˆ</span>
  <span class="hljs-title function_">revalidateTag</span>(<span class="hljs-string">'posts'</span>)        <span class="hljs-comment">// ä½¿å¸¦æœ‰è¯¥ tag çš„æ‰€æœ‰ç¼“å­˜å¤±æ•ˆ</span>
}
</code></pre>
<p><strong>3. è·¯ç”±æ®µé…ç½®ï¼ˆRoute Segment Configï¼‰</strong></p>
<p>åœ¨é¡µé¢çº§åˆ«å£°æ˜åŠ¨æ€è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// app/dashboard/page.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> dynamic = <span class="hljs-string">"force-dynamic"</span>; <span class="hljs-comment">// å¼ºåˆ¶åŠ¨æ€æ¸²æŸ“</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> revalidate = <span class="hljs-number">60</span>; <span class="hljs-comment">// æ¯ 60 ç§’é‡éªŒè¯</span>
</code></pre>
<p><strong>4. å¤„ç†è·¯ç”±å™¨ç¼“å­˜</strong></p>
<p>ç›®å‰ Next.js æ²¡æœ‰æä¾›ç›´æ¥æ¸…é™¤è·¯ç”±å™¨ç¼“å­˜çš„ APIï¼Œä½†ä½ å¯ä»¥ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>router.refresh()</code> é‡æ–°è·å–å½“å‰è·¯ç”±çš„æ•°æ®</li>
<li>åœ¨æœåŠ¡ç«¯ action ä¸­è°ƒç”¨ <code>revalidatePath()</code>ï¼Œè¿™ä¼šåŒæ—¶å½±å“æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç¼“å­˜</li>
</ul>
<h2 data-id="heading-12">å››ã€ç—›ç‚¹ä¸‰ï¼šServer Actions æµ‹è¯•éš¾é¢˜</h2>
<h3 data-id="heading-13">Server Actions çš„æœ¬è´¨ä¸å±€é™</h3>
<p>Server Actions å…è®¸ä½ åœ¨ React ç»„ä»¶ä¸­ç›´æ¥å®šä¹‰æœåŠ¡ç«¯é€»è¾‘ï¼Œæ— éœ€åˆ›å»ºé¢å¤–çš„ API è·¯ç”±ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// app/actions.ts</span>
<span class="hljs-string">"use server"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">formData: FormData</span>) {
  <span class="hljs-keyword">const</span> name = formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">"name"</span>);
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">create</span>({ <span class="hljs-attr">data</span>: { name } });
  <span class="hljs-title function_">revalidatePath</span>(<span class="hljs-string">"/users"</span>);
}
</code></pre>
<p>è¿™ç§è®¾è®¡ç®€åŒ–äº†ä»£ç ç»“æ„ï¼Œå‡å°‘äº† API å±‚çš„æ ·æ¿ä»£ç ã€‚ä½†å®ƒä¹Ÿå¸¦æ¥äº†æµ‹è¯•ä¸Šçš„æŒ‘æˆ˜ï¼š</p>
<ul>
<li><strong>æ— æ³•åœ¨çº¯å‰ç«¯ç¯å¢ƒæ¨¡æ‹Ÿ</strong>ï¼šServer Actions å¿…é¡»è¿è¡Œåœ¨æœåŠ¡ç«¯ï¼Œæ— æ³•åƒæ™®é€šå‡½æ•°é‚£æ ·åœ¨ Jest ä¸­ç›´æ¥æµ‹è¯•</li>
<li><strong>ä¸ä¼ ç»Ÿ API æµ‹è¯•æµç¨‹å‰²è£‚</strong>ï¼šä¸èƒ½åƒæµ‹è¯• REST API é‚£æ ·ç”¨ Postman æˆ– curl è°ƒè¯•</li>
<li><strong>éš¾ä»¥ mock ä¾èµ–</strong>ï¼šæ•°æ®åº“è¿æ¥ã€ç¬¬ä¸‰æ–¹æœåŠ¡ç­‰ä¾èµ–éš¾ä»¥åœ¨æµ‹è¯•ç¯å¢ƒä¸­éš”ç¦»</li>
</ul>
<h3 data-id="heading-14">æµ‹è¯•ç­–ç•¥ä¸å·¥å…·é“¾å»ºè®®</h3>
<p><strong>ç­–ç•¥ä¸€ï¼šåˆ†å±‚æ¶æ„ï¼Œå‰¥ç¦»ä¸šåŠ¡é€»è¾‘</strong></p>
<p>å°†ä¸šåŠ¡é€»è¾‘ä» Server Action ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œä½¿å…¶å¯ä»¥ç‹¬ç«‹æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// lib/user-service.tsï¼ˆçº¯ä¸šåŠ¡é€»è¾‘ï¼Œå¯æµ‹è¯•ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createUserLogic</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// éªŒè¯é€»è¾‘</span>
  <span class="hljs-keyword">if</span> (!name || name.<span class="hljs-property">length</span> &lt; <span class="hljs-number">2</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Name too short"</span>);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">create</span>({ <span class="hljs-attr">data</span>: { name } });
}

<span class="hljs-comment">// app/actions.tsï¼ˆè–„å°è£…å±‚ï¼‰</span>
(<span class="hljs-string">"use server"</span>);
<span class="hljs-keyword">import</span> { createUserLogic } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/lib/user-service"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">formData: FormData</span>) {
  <span class="hljs-keyword">const</span> name = formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">"name"</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">createUserLogic</span>(name);
  <span class="hljs-title function_">revalidatePath</span>(<span class="hljs-string">"/users"</span>);
}
</code></pre>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// __tests__/user-service.test.ts</span>
<span class="hljs-keyword">import</span> { createUserLogic } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/lib/user-service"</span>;

<span class="hljs-comment">// Mock æ•°æ®åº“</span>
jest.<span class="hljs-title function_">mock</span>(<span class="hljs-string">"@/lib/db"</span>, <span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">user</span>: { <span class="hljs-attr">create</span>: jest.<span class="hljs-title function_">fn</span>() },
}));

<span class="hljs-title function_">test</span>(<span class="hljs-string">"createUserLogic validates name length"</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">createUserLogic</span>(<span class="hljs-string">"a"</span>)).<span class="hljs-property">rejects</span>.<span class="hljs-title function_">toThrow</span>(<span class="hljs-string">"Name too short"</span>);
});
</code></pre>
<p><strong>ç­–ç•¥äºŒï¼šE2E æµ‹è¯•è¦†ç›–å®Œæ•´æµç¨‹</strong></p>
<p>å¯¹äºéœ€è¦æµ‹è¯•å®Œæ•´ Server Action æµç¨‹çš„åœºæ™¯ï¼Œä½¿ç”¨ Playwright æˆ– Cypress è¿›è¡Œ E2E æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// e2e/user.spec.ts (Playwright)</span>
<span class="hljs-keyword">import</span> { test, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">"@playwright/test"</span>;

<span class="hljs-title function_">test</span>(<span class="hljs-string">"user can create account via Server Action"</span>, <span class="hljs-keyword">async</span> ({ page }) =&gt; {
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(<span class="hljs-string">"/signup"</span>);
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">fill</span>(<span class="hljs-string">'input[name="name"]'</span>, <span class="hljs-string">"John Doe"</span>);
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">click</span>(<span class="hljs-string">'button[type="submit"]'</span>);

  <span class="hljs-comment">// éªŒè¯ç»“æœ</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(page.<span class="hljs-title function_">locator</span>(<span class="hljs-string">".success-message"</span>)).<span class="hljs-title function_">toBeVisible</span>();
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(page).<span class="hljs-title function_">toHaveURL</span>(<span class="hljs-string">"/users"</span>);
});
</code></pre>
<p><strong>ç­–ç•¥ä¸‰ï¼šé›†æˆæµ‹è¯• Server Actions</strong></p>
<p>å¦‚æœä½ ç¡®å®éœ€è¦åœ¨ Node.js ç¯å¢ƒä¸­æµ‹è¯• Server Action æœ¬èº«ï¼Œå¯ä»¥ï¼š</p>
<ol>
<li>å¯åŠ¨ä¸€ä¸ªæµ‹è¯•ç”¨çš„ Next.js æœåŠ¡å™¨</li>
<li>ä½¿ç”¨ <code>fetch</code> æ¨¡æ‹Ÿè¡¨å•æäº¤</li>
<li>æˆ–è€…ç›´æ¥åœ¨æµ‹è¯•ä¸­å¯¼å…¥å¹¶è°ƒç”¨ï¼ˆéœ€è¦æ­£ç¡®è®¾ç½® Node ç¯å¢ƒï¼‰</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// éœ€è¦åœ¨æ”¯æŒ Server Actions çš„ç¯å¢ƒä¸­è¿è¡Œ</span>
<span class="hljs-keyword">import</span> { createUser } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/app/actions"</span>;

<span class="hljs-title function_">test</span>(<span class="hljs-string">"createUser saves to database"</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
  formData.<span class="hljs-title function_">set</span>(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Test User"</span>);

  <span class="hljs-keyword">await</span> <span class="hljs-title function_">createUser</span>(formData);

  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">findFirst</span>({ <span class="hljs-attr">where</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">"Test User"</span> } });
  <span class="hljs-title function_">expect</span>(user).<span class="hljs-title function_">toBeDefined</span>();
});
</code></pre>
<h2 data-id="heading-15">äº”ã€å›é€€è·¯çº¿ï¼šRSC ä¸ Route Handlers çš„ååŒç­–ç•¥</h2>
<h3 data-id="heading-16">Server Actions vs Route Handlersï¼šä½•æ—¶ç”¨å“ªä¸ªï¼Ÿ</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>Server Actions</th><th>Route Handlers</th></tr></thead><tbody><tr><td>é€‚ç”¨åœºæ™¯</td><td>è¡¨å•æäº¤ã€æ•°æ®å˜æ›´</td><td>å¤–éƒ¨ APIã€Webhookã€è·¨ç»„ä»¶å¤ç”¨</td></tr><tr><td>ä»£ç ç»„ç»‡</td><td>ä¸ç»„ä»¶ç´§å¯†è€¦åˆ</td><td>ç‹¬ç«‹çš„ API ç«¯ç‚¹</td></tr><tr><td>ç±»å‹å®‰å…¨</td><td>å¤©ç„¶ç±»å‹å®‰å…¨</td><td>éœ€è¦æ‰‹åŠ¨å®šä¹‰ç±»å‹</td></tr><tr><td>æµ‹è¯•éš¾åº¦</td><td>è¾ƒé«˜</td><td>è¾ƒä½ï¼ˆç±»ä¼¼ä¼ ç»Ÿ APIï¼‰</td></tr><tr><td>ç¼“å­˜æ§åˆ¶</td><td>æœ‰é™</td><td>å®Œå…¨å¯æ§</td></tr><tr><td>ç¬¬ä¸‰æ–¹è°ƒç”¨</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr></tbody></table>
<p><strong>å®ç”¨å»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>è¡¨å•æäº¤ã€æ•°æ®å˜æ›´</strong> â†’ ä¼˜å…ˆä½¿ç”¨ Server Actions</li>
<li><strong>éœ€è¦è¢«å¤–éƒ¨ç³»ç»Ÿè°ƒç”¨çš„ API</strong> â†’ ä½¿ç”¨ Route Handlers</li>
<li><strong>å¤æ‚æŸ¥è¯¢ã€éœ€è¦ç²¾ç»†ç¼“å­˜æ§åˆ¶</strong> â†’ ä½¿ç”¨ Route Handlers</li>
<li><strong>Webhook æ¥æ”¶ã€æ–‡ä»¶ä¸Šä¼ ç­‰</strong> â†’ ä½¿ç”¨ Route Handlers</li>
</ul>
<h3 data-id="heading-17">æ•°æ®è®¿é—®åˆ†æ•£é—®é¢˜çš„åº”å¯¹</h3>
<p>å½“é¡¹ç›®å˜å¤§ï¼Œä½ å¯èƒ½ä¼šå‘ç°æ•°æ®è®¿é—®é€»è¾‘æ•£è½åœ¨å„å¤„ï¼šServer Components é‡Œç›´æ¥æŸ¥æ•°æ®åº“ã€Server Actions é‡Œä¹ŸæŸ¥ã€Route Handlers é‡Œä¹ŸæŸ¥...</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šç»Ÿä¸€æ•°æ®å±‚</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// lib/data/users.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUsers</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">findMany</span>();
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserById</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">findUnique</span>({ <span class="hljs-attr">where</span>: { id } });
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">data: CreateUserInput</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">create</span>({ data });
}
</code></pre>
<p>æ— è®ºæ˜¯ Server Componentã€Server Action è¿˜æ˜¯ Route Handlerï¼Œéƒ½é€šè¿‡è¿™ä¸ªç»Ÿä¸€çš„æ•°æ®å±‚è®¿é—®æ•°æ®ã€‚è¿™æ ·ï¼š</p>
<ul>
<li>ä¸šåŠ¡é€»è¾‘é›†ä¸­ç®¡ç†</li>
<li>ä¾¿äºæ·»åŠ ç¼“å­˜ã€æ—¥å¿—ã€æƒé™æ£€æŸ¥ç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹</li>
<li>æµ‹è¯•æ›´åŠ å®¹æ˜“</li>
</ul>
<h3 data-id="heading-18">æ¸è¿›å¼è¿ç§»ç­–ç•¥</h3>
<p>å¦‚æœä½ æ­£åœ¨è€ƒè™‘ä» Pages Router è¿ç§»åˆ° App Routerï¼Œæˆ–è€…åœ¨ App Router ä¸­é‡åˆ°éš¾ä»¥è§£å†³çš„é—®é¢˜éœ€è¦"å›é€€"ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å®ç”¨å»ºè®®ï¼š</p>
<p><strong>æ¸è¿›å¼è¿ç§»</strong>ï¼š</p>
<ul>
<li>Next.js æ”¯æŒ <code>app/</code> å’Œ <code>pages/</code> ç›®å½•å…±å­˜</li>
<li>å¯ä»¥é€ä¸ªè·¯ç”±è¿ç§»ï¼Œè€Œéä¸€æ¬¡æ€§å…¨éƒ¨é‡å†™</li>
<li>å…ˆè¿ç§»ç®€å•çš„ã€æ— çŠ¶æ€çš„é¡µé¢</li>
<li>å¤æ‚çš„äº¤äº’é¡µé¢ç•™åˆ°æœ€å</li>
</ul>
<p><strong>ä½•æ—¶è€ƒè™‘"å›é€€"</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸‰æ–¹åº“å®Œå…¨ä¸æ”¯æŒ RSCï¼ˆå¦‚æŸäº›å›¾è¡¨åº“ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰</li>
<li>å›¢é˜Ÿå¯¹ RSC æ¨¡å‹ç†è§£ä¸è¶³ï¼Œå¯¼è‡´é¢‘ç¹çš„ Bug</li>
<li>é¡¹ç›®æ—¶é—´ç´§è¿«ï¼Œæ²¡æœ‰æ—¶é—´è§£å†³ RSC ç›¸å…³çš„å‘</li>
</ul>
<p><strong>"å›é€€"å¹¶ä¸ä¸¢äºº</strong>ï¼šæŠ€æœ¯é€‰å‹åº”è¯¥æœåŠ¡äºä¸šåŠ¡ç›®æ ‡ã€‚å¦‚æœ App Router å¸¦æ¥çš„æ”¶ç›Šï¼ˆæ€§èƒ½ã€DXï¼‰å°äºå…¶å¸¦æ¥çš„æˆæœ¬ï¼ˆå­¦ä¹ æ›²çº¿ã€è°ƒè¯•æ—¶é—´ï¼‰ï¼Œé€‰æ‹© Pages Router æˆ–ä½¿ç”¨ Route Handlers æ›¿ä»£ Server Actions æ˜¯å®Œå…¨åˆç†çš„ã€‚</p>
<h2 data-id="heading-19">å…­ã€ç”Ÿäº§ç¯å¢ƒå¯è§‚æµ‹æ€§å¢å¼ºå»ºè®®</h2>
<h3 data-id="heading-20">RSC æµå¼æ¸²æŸ“çš„ç›‘æ§æŒ‘æˆ˜</h3>
<p>App Router é»˜è®¤ä½¿ç”¨æµå¼æ¸²æŸ“ï¼ˆStreamingï¼‰ï¼Œè¿™æå‡äº†ç”¨æˆ·æ„ŸçŸ¥æ€§èƒ½ï¼Œä½†ä¹Ÿç»™ç›‘æ§å¸¦æ¥äº†æŒ‘æˆ˜ï¼š</p>
<ul>
<li>TTFBï¼ˆTime to First Byteï¼‰ä¸å†èƒ½å‡†ç¡®åæ˜ é¡µé¢å®Œæ•´åŠ è½½æ—¶é—´</li>
<li>ä¼ ç»Ÿçš„ APM å·¥å…·å¯èƒ½æ— æ³•æ­£ç¡®è¿½è¸ªæµå¼å“åº”</li>
</ul>
<p><strong>å»ºè®®</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨æ”¯æŒ Web Vitals çš„ç›‘æ§å·¥å…·ï¼ˆå¦‚ Vercel Analyticsã€Datadog RUMï¼‰</li>
<li>å…³æ³¨ LCPï¼ˆLargest Contentful Paintï¼‰è€Œé TTFB</li>
<li>åœ¨å…³é”®ç»„ä»¶ä¸­æ·»åŠ è‡ªå®šä¹‰æ€§èƒ½æ ‡è®°</li>
</ul>
<h3 data-id="heading-21">ç¼“å­˜å‘½ä¸­ç‡å¯è§†åŒ–</h3>
<p>ç†è§£ä½ çš„åº”ç”¨ç¼“å­˜è¡Œä¸ºå¯¹æ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ï¼š</p>
<ul>
<li><strong>Vercel éƒ¨ç½²</strong>ï¼šå¯ä»¥åœ¨å“åº”å¤´ä¸­æŸ¥çœ‹ <code>x-vercel-cache: HIT/MISS</code></li>
<li><strong>EdgeOne Pages éƒ¨ç½²</strong>ï¼šå¯ä»¥åœ¨å“åº”å¤´ä¸­æŸ¥çœ‹ <code>Eo-Cache-Status: Cache HIT/MISS</code></li>
<li><strong>è‡ªå»ºéƒ¨ç½²</strong>ï¼šè€ƒè™‘åœ¨ middleware æˆ– Route Handler ä¸­æ·»åŠ ç¼“å­˜æ—¥å¿—</li>
<li><strong>å¼€å‘è°ƒè¯•</strong>ï¼šä½¿ç”¨æµè§ˆå™¨ DevTools çš„ Network é¢æ¿ï¼Œè§‚å¯Ÿè¯·æ±‚æ˜¯å¦å‘½ä¸­ç¼“å­˜</li>
</ul>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// ç®€å•çš„ç¼“å­˜æ—¥å¿—ä¸­é—´ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params">request: NextRequest</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
    <span class="hljs-string">`[Cache] <span class="hljs-subst">${request.url}</span> - <span class="hljs-subst">${response.headers.get(<span class="hljs-string">"x-cache"</span>) || <span class="hljs-string">"MISS"</span>}</span>`</span>
  );
  <span class="hljs-keyword">return</span> response;
}
</code></pre>
<h2 data-id="heading-22">ä¸ƒã€æ€»ç»“ï¼šæ‹¥æŠ±å˜åŒ–ï¼ŒåŠ¡å®è½åœ°</h2>
<p>App Router å’Œ React Server Components ä»£è¡¨äº† React ç”Ÿæ€çš„æœªæ¥æ–¹å‘ã€‚å°½ç®¡ç›®å‰å­˜åœ¨è¯¸å¤šç—›ç‚¹ï¼Œä½†éšç€ Next.js ç‰ˆæœ¬çš„è¿­ä»£å’Œç¤¾åŒºç”Ÿæ€çš„å®Œå–„ï¼Œè¿™äº›é—®é¢˜æ­£åœ¨é€æ­¥æ”¹å–„ã€‚</p>
<p><strong>å‡ ç‚¹å»ºè®®</strong>ï¼š</p>
<ol>
<li><strong>ä¸è¦æ€¥äºå…¨é¢è¿ç§»</strong>ï¼šæ–°é¡¹ç›®å¯ä»¥å°è¯• App Routerï¼Œè€é¡¹ç›®ä¿æŒ Pages Router ä¹Ÿå®Œå…¨å¯ä»¥</li>
<li><strong>ç†è§£åº•å±‚åŸç†</strong>ï¼šå¾ˆå¤š"Bug"å…¶å®æ˜¯å¯¹æ–°æ¨¡å‹ç†è§£ä¸è¶³å¯¼è‡´çš„</li>
<li><strong>å…³æ³¨å®˜æ–¹åŠ¨æ€</strong>ï¼šNext.js å›¢é˜Ÿæ­£åœ¨ç§¯ææ”¹è¿› DXï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰å€¼å¾—å…³æ³¨çš„å˜åŒ–</li>
<li><strong>å‚ä¸ç¤¾åŒºè®¨è®º</strong>ï¼šGitHub Issuesã€Twitterã€Discord éƒ½æ˜¯è·å–ä¿¡æ¯å’Œåé¦ˆé—®é¢˜çš„å¥½æ¸ é“</li>
</ol>
<p>æŠ€æœ¯å‘å±•æ°¸è¿œä¼´éšç€é˜µç—›ï¼Œå…³é”®æ˜¯åœ¨ç†æƒ³ä¸ç°å®ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ åœ¨ Next.js App Router çš„å®è·µä¹‹è·¯ä¸Šå°‘èµ°å¼¯è·¯ã€‚</p>
<hr/>
<p><strong>å‚è€ƒèµ„æº</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fbuilding-your-application%2Fcaching" target="_blank" title="https://nextjs.org/docs/app/building-your-application/caching" ref="nofollow noopener noreferrer">Next.js å®˜æ–¹æ–‡æ¡£ - Caching</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fdiscussions" target="_blank" title="https://github.com/vercel/next.js/discussions" ref="nofollow noopener noreferrer">Next.js GitHub Discussions</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000045660120" target="_blank" title="https://segmentfault.com/a/1190000045660120" ref="nofollow noopener noreferrer">SegmentFault - Next.js é«˜çº§ç¼“å­˜ç­–ç•¥åˆ†æ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3å¾ˆä¸æ»‘çš„tableè¡¨æ ¼å‘ä¸Šæ»šåŠ¨æ•ˆæœï¼Œå¤šç”¨äºç»Ÿè®¡é¡µé¢]]></title>    <link>https://juejin.cn/post/7579512734297571366</link>    <guid>https://juejin.cn/post/7579512734297571366</guid>    <pubDate>2025-12-04T03:27:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579512734297571366" data-draft-id="7579573664228884489" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3å¾ˆä¸æ»‘çš„tableè¡¨æ ¼å‘ä¸Šæ»šåŠ¨æ•ˆæœï¼Œå¤šç”¨äºç»Ÿè®¡é¡µé¢"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-04T03:27:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ç³æ¿›æ·‹"/> <meta itemprop="url" content="https://juejin.cn/user/4195392104169822"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3å¾ˆä¸æ»‘çš„tableè¡¨æ ¼å‘ä¸Šæ»šåŠ¨æ•ˆæœï¼Œå¤šç”¨äºç»Ÿè®¡é¡µé¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4195392104169822/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ç³æ¿›æ·‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:27:55.000Z" title="Thu Dec 04 2025 03:27:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">æ•ˆæœå¦‚å›¾ï¼Œ ä¸Šè¾¹æ— ç¼æ»šåŠ¨</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec69ee07734c4e2fa03fb81afa264af8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55Cz5r-b5reL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423674&amp;x-signature=u5kzHvxRlCWBujsk3f7gyDZo5nk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-1">ç»„ä»¶ä»£ç ï¼š</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table-scroll-wrapper"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"wrapperRef"</span> @<span class="hljs-attr">mouseenter</span>=<span class="hljs-string">"handleMouseEnter"</span> @<span class="hljs-attr">mouseleave</span>=<span class="hljs-string">"handleMouseLeave"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table-scroll-content"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"contentRef"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- åŸå§‹å†…å®¹ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"originalContentRef"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- å…‹éš†å†…å®¹ç”¨äºæ— ç¼æ»šåŠ¨ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"shouldScroll"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"cloneContentRef"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed, onMounted, onUnmounted, nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-comment">// æ»šåŠ¨é€Ÿåº¦ï¼ˆåƒç´ /å¸§ï¼‰</span>
  <span class="hljs-attr">speed</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-number">0.5</span>
  },
  <span class="hljs-comment">// é¼ æ ‡æ‚¬åœæ˜¯å¦æš‚åœ</span>
  <span class="hljs-attr">hoverPause</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-comment">// æ˜¯å¦å¯ç”¨æ»šåŠ¨</span>
  <span class="hljs-attr">enabled</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-literal">true</span>
  }
});

<span class="hljs-comment">// å¼•ç”¨DOMå…ƒç´ </span>
<span class="hljs-keyword">const</span> wrapperRef = ref&lt;<span class="hljs-title class_">HTMLElement</span>&gt;();
<span class="hljs-keyword">const</span> contentRef = ref&lt;<span class="hljs-title class_">HTMLElement</span>&gt;();
<span class="hljs-keyword">const</span> originalContentRef = ref&lt;<span class="hljs-title class_">HTMLElement</span>&gt;();
<span class="hljs-keyword">const</span> cloneContentRef = ref&lt;<span class="hljs-title class_">HTMLElement</span>&gt;();

<span class="hljs-comment">// æ»šåŠ¨çŠ¶æ€</span>
<span class="hljs-keyword">const</span> animationId = ref&lt;number&gt;();
<span class="hljs-keyword">const</span> currentTop = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> isPaused = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> contentHeight = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);

<span class="hljs-comment">// è®¡ç®—å±æ€§ï¼šæ˜¯å¦éœ€è¦æ»šåŠ¨</span>
<span class="hljs-keyword">const</span> shouldScroll = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> props.<span class="hljs-property">enabled</span> &amp;&amp; contentHeight.<span class="hljs-property">value</span> &gt; (wrapperRef.<span class="hljs-property">value</span>?.<span class="hljs-property">offsetHeight</span> || <span class="hljs-number">0</span>);
});

<span class="hljs-comment">// æ»šåŠ¨åŠ¨ç”»å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">scroll</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!shouldScroll.<span class="hljs-property">value</span> || isPaused.<span class="hljs-property">value</span> || !wrapperRef.<span class="hljs-property">value</span> || !contentRef.<span class="hljs-property">value</span>) {
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// å‘ä¸Šæ»šåŠ¨</span>
  currentTop.<span class="hljs-property">value</span> -= props.<span class="hljs-property">speed</span>;
  contentRef.<span class="hljs-property">value</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateY(<span class="hljs-subst">${currentTop.value}</span>px)`</span>;

  <span class="hljs-comment">// å½“æ»šåŠ¨è¿‡åŸå§‹å†…å®¹é«˜åº¦æ—¶ï¼Œé‡ç½®ä½ç½®å®ç°æ— ç¼æ»šåŠ¨</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(currentTop.<span class="hljs-property">value</span>) &gt;= contentHeight.<span class="hljs-property">value</span>) {
    currentTop.<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;
  }

  <span class="hljs-comment">// ç»§ç»­ä¸‹ä¸€å¸§åŠ¨ç”»</span>
  animationId.<span class="hljs-property">value</span> = <span class="hljs-title function_">requestAnimationFrame</span>(scroll);
};

<span class="hljs-comment">// å¼€å§‹æ»šåŠ¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">startScroll</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (animationId.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">cancelAnimationFrame</span>(animationId.<span class="hljs-property">value</span>);
  }
  <span class="hljs-keyword">if</span> (shouldScroll.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">scroll</span>();
  }
};

<span class="hljs-comment">// åœæ­¢æ»šåŠ¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">stopScroll</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (animationId.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">cancelAnimationFrame</span>(animationId.<span class="hljs-property">value</span>);
    animationId.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>;
  }
};

<span class="hljs-comment">// é¼ æ ‡è¿›å…¥å¤„ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseEnter</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">hoverPause</span>) {
    isPaused.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-title function_">stopScroll</span>();
  }
};

<span class="hljs-comment">// é¼ æ ‡ç¦»å¼€å¤„ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseLeave</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">hoverPause</span>) {
    isPaused.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-title function_">startScroll</span>();
  }
};

<span class="hljs-comment">// æ›´æ–°å†…å®¹é«˜åº¦</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">updateContentHeight</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (originalContentRef.<span class="hljs-property">value</span>) {
    contentHeight.<span class="hljs-property">value</span> = originalContentRef.<span class="hljs-property">value</span>.<span class="hljs-property">offsetHeight</span>;
  }
};

<span class="hljs-comment">// ç›‘å¬çª—å£å¤§å°å˜åŒ–</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleResize</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">updateContentHeight</span>();
  <span class="hljs-comment">// å¦‚æœæ¡ä»¶å˜åŒ–ï¼Œé‡æ–°æ§åˆ¶æ»šåŠ¨</span>
  <span class="hljs-keyword">if</span> (shouldScroll.<span class="hljs-property">value</span> &amp;&amp; !isPaused.<span class="hljs-property">value</span> &amp;&amp; props.<span class="hljs-property">enabled</span>) {
    <span class="hljs-title function_">startScroll</span>();
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!shouldScroll.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">stopScroll</span>();
    currentTop.<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> (contentRef.<span class="hljs-property">value</span>) {
      contentRef.<span class="hljs-property">value</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">'translateY(0)'</span>;
    }
  }
};

<span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸé’©å­</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-comment">// ç­‰å¾…DOMå®Œå…¨æ¸²æŸ“</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();
  <span class="hljs-title function_">updateContentHeight</span>();

  <span class="hljs-comment">// å¼€å§‹æ»šåŠ¨</span>
  <span class="hljs-keyword">if</span> (shouldScroll.<span class="hljs-property">value</span> &amp;&amp; props.<span class="hljs-property">enabled</span>) {
    <span class="hljs-title function_">startScroll</span>();
  }

  <span class="hljs-comment">// ç›‘å¬çª—å£å¤§å°å˜åŒ–</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);
});

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">stopScroll</span>();
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.table-scroll-wrapper</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">position</span>: relative;
}

<span class="hljs-selector-class">.table-scroll-content</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">will-change</span>: transform;
}

<span class="hljs-comment">/* ç¡®ä¿è¡¨æ ¼è¡Œæ­£ç¡®æ˜¾ç¤º */</span>
:<span class="hljs-built_in">deep</span>(.el-row) {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</code></pre>
<h4 data-id="heading-2">é¡µé¢ä¸­çš„ä½¿ç”¨</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 20.3rem; overflow: hidden; margin-top: .4rem;"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">simple-scroll</span> <span class="hljs-attr">:speed</span>=<span class="hljs-string">"0.5"</span> <span class="hljs-attr">:hoverPause</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"MaintainList &amp;&amp; MaintainList.length &gt; 0"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"screen_ltable_cont"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in MaintainList"</span> <span class="hljs-attr">:gutter</span>=<span class="hljs-string">"10"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"6"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box-item"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"dark"</span> <span class="hljs-attr">:content</span>=<span class="hljs-string">"item.deviceAdress"</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">"top"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"textellipsis"</span>&gt;</span>{{ index }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"5"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"screen_tag screen_warning"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"item.status == '1'"</span>&gt;</span>ç»´ä¿®ä¸­<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"screen_tag screen_primary"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"item.status == '2'"</span>&gt;</span>ç»´ä¿®å®Œæˆ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">simple-scroll</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">SimpleScroll</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../mycomponents/simpleScroll/index.vue'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>



</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ˜‡è…¾Catlassçš„ç®—å­ä¼˜åŒ–ï¼šTransformerä¸­å°æ‰¹é‡çŸ©é˜µä¹˜æ³•ä¼˜åŒ–ä¸æ€§èƒ½æå‡å®è·µ]]></title>    <link>https://juejin.cn/post/7579553111472537654</link>    <guid>https://juejin.cn/post/7579553111472537654</guid>    <pubDate>2025-12-04T03:18:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579553111472537654" data-draft-id="7579558130268176438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ˜‡è…¾Catlassçš„ç®—å­ä¼˜åŒ–ï¼šTransformerä¸­å°æ‰¹é‡çŸ©é˜µä¹˜æ³•ä¼˜åŒ–ä¸æ€§èƒ½æå‡å®è·µ"/> <meta itemprop="keywords" content="æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-04T03:18:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŠäº©èŠ±æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/3609043910268030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ˜‡è…¾Catlassçš„ç®—å­ä¼˜åŒ–ï¼šTransformerä¸­å°æ‰¹é‡çŸ©é˜µä¹˜æ³•ä¼˜åŒ–ä¸æ€§èƒ½æå‡å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3609043910268030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŠäº©èŠ±æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:18:36.000Z" title="Thu Dec 04 2025 03:18:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ç®—å­æ¨¡æ¿åº“ï¼Ÿ</h2>
<p>åœ¨AIè®¡ç®—é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹çš„ç»“æ„å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå…¶ä¸­çŸ©é˜µä¹˜æ³•ï¼ˆGEMMï¼‰ ç±»æ“ä½œåœ¨Transformerç­‰ä¸»æµæ¶æ„ä¸­å æ®äº†å¤§é‡è®¡ç®—æ—¶é—´ã€‚é’ˆå¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯å’Œä¼˜åŒ–ç›®æ ‡ï¼ŒGEMMç±»ç®—å­çš„å®ç°å˜ä½“å‘ˆç°å¤šæ ·åŒ–ç‰¹å¾ï¼Œç›´æ¥åŸºäºç¡¬ä»¶åº•å±‚èƒ½åŠ›è¿›è¡Œå®šåˆ¶å¼€å‘ï¼Œä¸ä»…æŠ€æœ¯é—¨æ§›é«˜ï¼Œè¿˜å­˜åœ¨å¼€å‘å‘¨æœŸè¿‡é•¿çš„é—®é¢˜ã€‚</p>
<p>ä¸ºæ­¤ï¼Œ<strong>æ˜‡è…¾CANN</strong>æ¨å‡ºäº†<strong>CATLASSç®—å­æ¨¡æ¿åº“</strong>ï¼ˆCompute Architecture for Tensor Layers and Specialized Solversï¼‰ï¼Œé‡‡ç”¨åˆ†å±‚æ¨¡å—åŒ–è®¾è®¡ï¼Œé€šè¿‡å°†GEMMè®¡ç®—è§£è€¦ä¸ºæ•°æ®åˆ†å—ç­–ç•¥ã€è®¡ç®—å•å…ƒé…ç½®ç­‰å¤šä¸ªå¯çµæ´»ç»„åˆçš„åŠŸèƒ½ç»„ä»¶ï¼Œæ„å»ºäº†ä¸€å¥—æ”¯æŒå¿«é€Ÿæ­å»ºä¸ç»„åˆçš„å¼€å‘èŒƒå¼ã€‚CATLASSé¢å‘æ˜‡è…¾ç¡¬ä»¶è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤ŸåŸºäºæ¨¡å—åŒ–ç»„è£…æ–¹å¼ï¼Œå¿«é€Ÿå®Œæˆè®¡ç®—æµæ°´çº¿ç¼–æ’ï¼Œåœ¨ç¡®ä¿é«˜æ€§èƒ½çš„åŒæ—¶ï¼Œæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06d28dc62c83451d88f41d6df493208b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=%2BN9Sng5QSFZo3gQSrF5bE8nSv1E%3D" alt="" loading="lazy"/></p>
<p>æœ¬æ–‡å°†å¸¦ä½ å…¨é¢äº†è§£CATLASSç®—å­æ¨¡æ¿åº“çš„æ ¸å¿ƒæ¶æ„ã€ç¯å¢ƒé…ç½®æ–¹æ³•ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå®é™…ç®—å­å¼€å‘æ¡ˆä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åˆ©ç”¨CATLASSé«˜æ•ˆæ„å»ºæ˜‡è…¾äº²å’Œçš„é«˜æ€§èƒ½ç®—å­ã€‚</p>
<p><strong>æœ¬æ–‡åŸºäºæ˜‡è…¾æä¾›çš„æŠ€æœ¯ç´ æï¼ˆå«æ…•è¯¾ã€æ•™ç¨‹ï¼‰äºŒæ¬¡åˆ›ä½œï¼Œç´ æåŸç¨¿ç¦æ­¢ç›´æ¥ä¼ æ’­ã€‚</strong></p>
<p>â€œæ˜‡è…¾ç®—å­æ¨¡æ¿åº“Catlassâ€çš„ç›¸å…³<strong>æ…•è¯¾</strong>å’Œ<strong>æ•™ç¨‹</strong>å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>æ…•è¯¾</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.hiascend.com%2Fdeveloper%2Fcourses%2Fdetail%2F1925707689125974018" target="_blank" title="https://www.hiascend.com/developer/courses/detail/1925707689125974018" ref="nofollow noopener noreferrer">www.hiascend.com/developer/câ€¦</a></li>
<li><strong>æ•™ç¨‹</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.hiascend.com%2Fdeveloper%2Fblojjg%2Fdetails%2F0237183374795476212" target="_blank" title="https://www.hiascend.com/developer/blojjg/details/0237183374795476212" ref="nofollow noopener noreferrer">www.hiascend.com/developer/bâ€¦</a></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc9206a9a0d44a5e93515733f44ac9e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=OCAI7rxy31D05cQ%2B6hxT8SrXg%2B8%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">äºŒã€CATLASSæ¶æ„è§£æï¼šåˆ†å±‚æ¨¡å—åŒ–è®¾è®¡çš„ç²¾å¦™ä¹‹å¤„</h2>
<h3 data-id="heading-2">2.1 æ ¸å¿ƒå±‚æ¬¡åˆ†è§£</h3>
<p>CATLASSé‡‡ç”¨åˆ†å±‚æŠ½è±¡çš„è®¾è®¡ç†å¿µï¼Œé€šè¿‡åˆ†æç¡¬ä»¶æ¶æ„ç‰¹æ€§å’ŒGEMMè®¡ç®—éœ€æ±‚ï¼Œå°†æ•´ä½“å®ç°æŒ‰ç…§è®¡ç®—ç²’åº¦è‡ªä¸Šè€Œä¸‹åˆ†ä¸ºäº”ä¸ªæ ¸å¿ƒå±‚æ¬¡ï¼š</p>
<ul>
<li><strong>Deviceå±‚</strong>ï¼šç®—å­åœ¨Hostä¾§çš„è°ƒç”¨æ¥å£ï¼Œæä¾›å®Œæ•´ç®—å­èƒ½åŠ›ï¼Œè´Ÿè´£ä¸åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ã€‚</li>
<li><strong>Kernelå±‚</strong>ï¼šä½“ç°ç®—å­åœ¨NPUä¸Šçš„å®Œæ•´å®ç°ï¼Œæ¶‰åŠå¤šä¸ªè®¡ç®—æ ¸çš„å¹¶è¡Œè®¡ç®—ï¼Œåè°ƒå¤šä¸ªAIæ ¸å¿ƒååŒå·¥ä½œã€‚</li>
<li><strong>Blockå±‚</strong>ï¼šåŒ…å«å•ä¸ªAIæ ¸çš„è®¡ç®—è¿‡ç¨‹ï¼Œæ˜¯è°ƒåº¦å’Œè®¡ç®—çš„åŸºæœ¬å•å…ƒã€‚</li>
<li><strong>Tileå±‚</strong>ï¼šç”±æ•°æ®æ¬å…¥ã€æ•°æ®è®¡ç®—ã€æ•°æ®æ¬å‡ºç­‰æ­¥éª¤ç»„æˆï¼Œå®ç°è®¡ç®—æµæ°´çº¿ç¼–æ’ã€‚</li>
<li><strong>Basicå±‚</strong>ï¼šæœ€åº•å±‚ï¼Œé€šè¿‡æŒ‡ä»¤ç»„è£…å®ç°ï¼Œç›´æ¥æ“ä½œç¡¬ä»¶æŒ‡ä»¤é›†ã€‚</li>
</ul>
<p>è¿™ç§åˆ†å±‚è®¾è®¡é€šè¿‡æ¨¡æ¿åŒ–æ–¹å¼æå–å„å±‚å…±æ€§é€»è¾‘ï¼ŒåŒæ—¶ä¿ç•™å¿…è¦çš„å·®å¼‚åŒ–æ‰©å±•èƒ½åŠ›ï¼Œä½¿å¾—ä¸åŒå±‚çº§çš„è½¯ä»¶æŠ½è±¡èƒ½å¤Ÿç²¾å‡†å¯¹åº”åˆ°ç‰¹å®šç¡¬ä»¶ç»“æ„å’Œè®¡ç®—æµæ°´é˜¶æ®µã€‚ç®—æ³•æ¡†æ¶ä¸­çš„ç‰¹å®šæ­¥éª¤ä¼šå»¶è¿Ÿåˆ°å­ç±»å®ç°ï¼Œä½¿å¾—å­ç±»èƒ½å¤Ÿåœ¨ä¸æ”¹å˜ç®—æ³•æ•´ä½“ç»“æ„çš„æƒ…å†µä¸‹ï¼Œçµæ´»é‡å®šä¹‰å…¶ä¸­çš„æŸäº›å…³é”®æ­¥éª¤ã€‚</p>
<h3 data-id="heading-3">2.2 æ¨¡å—åŒ–å·¥ä½œæµç¨‹</h3>
<p>CATLASSçš„æ¨¡å—åŒ–è®¾è®¡å°†ç®—å­å¼€å‘è¿‡ç¨‹åˆ†è§£ä¸ºä¸€ç³»åˆ—å¯é…ç½®çš„ç»„ä»¶ï¼š</p>
<ol>
<li><strong>æ•°æ®åˆ†å—ç­–ç•¥</strong>ï¼šæ ¹æ®ç¡¬ä»¶ç‰¹æ€§å’Œæ•°æ®è§„æ¨¡ï¼Œç¡®å®šæœ€ä¼˜çš„æ•°æ®åˆ†å—å¤§å°å’Œå½¢çŠ¶</li>
<li><strong>è®¡ç®—å•å…ƒé…ç½®</strong>ï¼šé’ˆå¯¹ä¸åŒçš„è®¡ç®—ç²¾åº¦å’Œç±»å‹ï¼Œé…ç½®ç›¸åº”çš„è®¡ç®—å•å…ƒ</li>
<li><strong>å†…å­˜è®¿é—®æ¨¡å¼</strong>ï¼šä¼˜åŒ–æ•°æ®æ¬è¿è·¯å¾„ï¼Œå‡å°‘ä¸å¿…è¦çš„å†…å­˜è®¿é—®</li>
<li><strong>æµæ°´çº¿ç¼–æ’</strong>ï¼šåˆç†å®‰æ’è®¡ç®—å’Œæ•°æ®ä¼ è¾“çš„æ—¶åºï¼Œå®ç°è®¡ç®—æ©ç›–</li>
</ol>
<p>é€šè¿‡å°†è¿™äº›ç»„ä»¶çµæ´»ç»„åˆï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿæ„å»ºå‡ºé€‚åº”ç‰¹å®šåœºæ™¯çš„é«˜æ€§èƒ½ç®—å­ï¼Œæ— éœ€ä»é›¶å¼€å§‹ç¼–å†™æ‰€æœ‰ä»£ç ã€‚</p>
<h3 data-id="heading-4">2.3 å¼€å‘æ•ˆç‡æå‡å¯¹æ¯”</h3>
<p>CATLASSé€šè¿‡æä¾›å¯å¤ç”¨çš„æ¨¡æ¿ã€åŸºç¡€ç»„ä»¶å’Œå…¸å‹ç®—å­å®è·µæ¡ˆä¾‹ï¼Œå¤§å¹…æå‡äº†ç®—å­å¼€å‘æ•ˆç‡ã€‚æ ¹æ®åä¸ºå®˜æ–¹æ•°æ®ï¼Œåœ¨ç®—å­æ ·ä¾‹ä¸­Matmulç®—å­çš„Kè½´ä¼˜åŒ–å®ç°ä¸­ï¼Œå¼€å‘å‘¨æœŸä»åŸå…ˆçš„2äººå‘¨ç¼©çŸ­è‡³1äººå‘¨ï¼›åœ¨MLAç›¸å…³ä¼˜åŒ–ç‰¹æ€§å¼€å‘ä¸­ï¼Œå‘¨æœŸä»8äººå‘¨ç¼©å‡è‡³4äººå‘¨ã€‚è¿™æ„å‘³ç€å¼€å‘æ•ˆç‡æå‡äº†<strong>50%ä»¥ä¸Š</strong>ã€‚</p>
<p>ä¸‹è¡¨å±•ç¤ºäº†ä½¿ç”¨CATLASSä¸ä¼ ç»Ÿå¼€å‘æ–¹å¼çš„æ•ˆç‡å¯¹æ¯”ï¼š</p>



































<table><thead><tr><th><strong>å¼€å‘é˜¶æ®µ</strong></th><th><strong>ä¼ ç»Ÿå¼€å‘æ–¹å¼</strong></th><th><strong>CATLASSå¼€å‘æ–¹å¼</strong></th><th><strong>æ•ˆç‡æå‡</strong></th></tr></thead><tbody><tr><td>è®¾è®¡é˜¶æ®µ</td><td>éœ€è¦æ·±å…¥ç†è§£ç¡¬ä»¶æ¶æ„</td><td>ä½¿ç”¨é¢„å®šä¹‰æ¨¡æ¿å’Œç»„ä»¶</td><td>å‡å°‘60%è®¾è®¡æ—¶é—´</td></tr><tr><td>å®ç°é˜¶æ®µ</td><td>æ‰‹åŠ¨ç¼–å†™æ‰€æœ‰ä»£ç </td><td>ç»„åˆç°æœ‰æ¨¡å—ï¼Œå°‘é‡å®šåˆ¶ä»£ç </td><td>å‡å°‘70%ç¼–ç é‡</td></tr><tr><td>è°ƒè¯•é˜¶æ®µ</td><td>ç¡¬ä»¶ç‰¹å®šé—®é¢˜éš¾ä»¥å®šä½</td><td>æ ‡å‡†åŒ–ç»„ä»¶ç»è¿‡å……åˆ†éªŒè¯</td><td>å‡å°‘50%è°ƒè¯•æ—¶é—´</td></tr><tr><td>ä¼˜åŒ–é˜¶æ®µ</td><td>åå¤è¯•éªŒä¸åŒä¼˜åŒ–ç­–ç•¥</td><td>ä½¿ç”¨å†…ç½®ä¼˜åŒ–ç­–ç•¥ï¼Œå‚æ•°å¯è°ƒ</td><td>å‡å°‘80%è°ƒä¼˜æ—¶é—´</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€å¼€å‘ç¯å¢ƒé…ç½®ï¼šä¸ºCATLASSå¼€å‘å‡†å¤‡æ˜‡è…¾ç”Ÿæ€</h2>
<h3 data-id="heading-6">3.1 è¿›å…¥GitCodeâ€œæˆ‘çš„Notebookâ€</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e9198fc16264ba9a986b6a6817c8f4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=avliauYxzBEiyWjpa%2BRMkR1%2BF%2FQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">3.2 åˆ›å»ºä¸€ä¸ªNotebookå¹¶é€‰æ‹©åŸºç¡€ç¯å¢ƒ</h3>
<p>å¦‚æœä½ æ˜¯é¦–æ¬¡ä½¿ç”¨ GitCode çš„äº‘ç«¯ Notebookï¼Œç³»ç»Ÿä¼šæç¤ºä½ æ¿€æ´» Notebook ç¯å¢ƒï¼Œç‚¹å‡»ç¡®è®¤å³å¯ä¸€é”®å¼€é€šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de3e855b3cbb4498a531d52a6db110b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=uPIYm8rEWmQxEFez7k63lNCexTo%3D" alt="" loading="lazy"/></p>
<p>åœ¨å¼€å§‹CATLASSç®—å­å¼€å‘å‰ï¼Œéœ€è¦éƒ¨ç½²å¥½æ˜‡è…¾åŸºç¡€è½¯ç¡¬ä»¶ç¯å¢ƒã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ç§ç‰ˆæœ¬ç±»å‹ï¼Œä»¥ä¸‹æ˜¯ç¯å¢ƒé…ç½®çš„åŸºæœ¬æƒ…å†µï¼š</p>
<ul>
<li><strong>Notebookè®¡ç®—èµ„æº</strong>ï¼š NPUï¼ˆNPU basic Â· 1 * NPU 910B Â· 32V CPU Â· 64GBï¼‰</li>
<li><strong>å®¹å™¨é•œåƒ</strong>ï¼šeuler2.9-py38-torch2.1.0-cann8.0-openmind0.6-notebookï¼ˆè¯¦ç»†ä»‹ç»å¦‚ä¸‹ï¼‰</li>
<li><strong>å­˜å‚¨å¤§å°</strong>ï¼š50Gï¼ˆé»˜è®¤é€‰é¡¹ï¼Œç”¨äºå­˜æ”¾é¡¹ç›®ä»£ç ã€æ•°æ®é›†ã€è®­ç»ƒæƒé‡ã€å®éªŒç»“æœç­‰ï¼‰</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83bd446ef9344845b6ae784e37782951~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=SOYSsmrl0Fa3J0DeXm0i%2BNohiIQ%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œè¯¥è®¡ç®—èµ„æºåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>NPU</strong>ï¼š1å—æ˜‡è…¾910B AIåŠ é€Ÿå¡</li>
<li><strong>CPU</strong>ï¼š32ä¸ªè™šæ‹ŸCPUæ ¸å¿ƒ</li>
<li><strong>å†…å­˜é…ç½®</strong>ï¼š64GBç³»ç»Ÿå†…å­˜</li>
</ul>
<p>è¯¥é•œåƒé¢„è£…äº†å¦‚ä¸‹ç‰ˆæœ¬ï¼š</p>
<ul>
<li><strong>æ“ä½œç³»ç»Ÿ</strong>ï¼š EulerOS 2.9</li>
<li><strong>Pythonç¯å¢ƒ</strong>ï¼šPython 3.8</li>
<li><strong>æ·±åº¦å­¦ä¹ æ¡†æ¶</strong>ï¼šPyTorch 2.1.0</li>
<li><strong>AIè®¡ç®—å¼•æ“</strong>ï¼šCANN 8.0</li>
<li><strong>å¼€å‘å¹³å°</strong>ï¼šOpenMind 0.6</li>
<li><strong>äº¤äº’ç¯å¢ƒ</strong>ï¼šNotebook</li>
</ul>
<p><strong>éªŒè¯</strong> Pytorch å’Œ NPU ç‰ˆæœ¬æ˜¯å¦å¯ç”¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch_npu
<span class="hljs-keyword">import</span> torch
<span class="hljs-built_in">print</span>(<span class="hljs-string">"PyTorch ç‰ˆæœ¬:"</span>, torch.__version__)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"NPU æ˜¯å¦å¯ç”¨:"</span>, torch.npu.is_available())
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰è®¾å¤‡:"</span>, torch.npu.current_device())
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1a2bd320330474c8c841ad8fd03d8b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=DdrrcJsPomHzQvYnK%2BGrqHi13Ck%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ï¼Œå¦‚æœéœ€è¦è·å– CATLASS æºç ï¼Œå¯ä»¥ï¼Œåœ¨ GitCode ä¸Šè¿›è¡Œå…‹éš†æˆ–ä¸‹è½½ï¼Œ<strong>å‘½ä»¤</strong>å’Œ<strong>ç½‘é¡µ</strong>å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">CATLASSç®—å­æ¨¡æ¿åº“å·²åœ¨GitCodeä¸Šæ­£å¼å¼€æºï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è·å–æºç ï¼š
<span class="hljs-comment"># å…‹éš†CATLASSä»£ç ä»“</span>
git clone https://gitcode.com/cann/catlass.git
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/696ab83b062047268774a250dde894cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=wzintwehnrLXQNvd%2BMhxK%2BrpH%2Bc%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-8">å››ã€å®ä¾‹è¿ç§»ï¼šä¼˜åŒ–Transformerä¸­çš„å°æ‰¹é‡çŸ©é˜µä¹˜æ³•</h2>
<h3 data-id="heading-9">4.1 Catlassæ¨¡æ¿åº“æ ¸å¿ƒåŠŸèƒ½</h3>
<p><strong>ï¼ˆ1ï¼‰ä¼ ç»ŸCUDA Cutlassçš„é—®é¢˜ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ ç»ŸCUDAå®ç° - éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TraditionalMatmul</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, A, B</span>):
        <span class="hljs-comment"># éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼šåˆ†å—ã€å†…å­˜å¸ƒå±€ã€æµæ°´çº¿...</span>
        <span class="hljs-keyword">return</span> torch.matmul(A, B)  <span class="hljs-comment"># é€šç”¨å®ç°ï¼Œæ€§èƒ½ä¸€èˆ¬</span>
</code></pre>
<p><strong>ï¼ˆ2ï¼‰æ˜‡è…¾Catlassçš„ä¼˜åŠ¿ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Catlassç®€åŒ–äº†ä¼˜åŒ–è¿‡ç¨‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CatlassOptimizedMatmul</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, A, B</span>):
        <span class="hljs-comment"># åªéœ€æŒ‡å®šä¼˜åŒ–ç­–ç•¥ï¼ŒCatlassè‡ªåŠ¨ç”Ÿæˆé«˜æ•ˆä»£ç </span>
        <span class="hljs-keyword">return</span> torch_npu.npu_bmm(A, B)  <span class="hljs-comment"># ç¡¬ä»¶ä¼˜åŒ–å®ç°</span>
</code></pre>
<p><strong>ï¼ˆ3ï¼‰æ ¸å¿ƒå·®å¼‚å¯¹æ¯”ï¼š</strong></p>






























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>CUDA Cutlass</strong></th><th><strong>æ˜‡è…¾ Catlass</strong></th></tr></thead><tbody><tr><td>å¼€å‘éš¾åº¦</td><td>é«˜ï¼Œéœ€è¦æ·±å…¥ç¡¬ä»¶çŸ¥è¯†</td><td>ä½ï¼Œæä¾›é«˜çº§æŠ½è±¡</td></tr><tr><td>ä¼˜åŒ–æ–¹å¼</td><td>æ‰‹åŠ¨é…ç½®åˆ†å—ã€æµæ°´çº¿</td><td>è‡ªåŠ¨æ¨¡æ¿ä¼˜åŒ–</td></tr><tr><td>è·¨å¹³å°æ”¯æŒ</td><td>ä¸»è¦NVIDIA GPU</td><td>ä¸“æ³¨æ˜‡è…¾NPU</td></tr><tr><td>ç”Ÿæ€é›†æˆ</td><td>ç‹¬ç«‹åº“</td><td>æ·±åº¦é›†æˆCANN</td></tr></tbody></table>
<h3 data-id="heading-10">4.2 CANNç®—å­è¿ç§»é€‚é…</h3>
<p><strong>ï¼ˆ1ï¼‰è¿ç§»å‰ - é€šç”¨å®ç°ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">naive_grouped_matmul</span>(<span class="hljs-params">inputs, weights</span>):
    <span class="hljs-string">"""æœ´ç´ å®ç° - é€ä¸ªè®¡ç®—"""</span>
    results = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(inputs)):
        <span class="hljs-comment"># é€ä¸ªçŸ©é˜µä¹˜æ³•ï¼Œæ— æ³•å¹¶è¡ŒåŒ–</span>
        result = torch.matmul(inputs[i], weights[i])
        results.append(result)
    <span class="hljs-keyword">return</span> results
</code></pre>
<p><strong>ï¼ˆ2ï¼‰è¿ç§»å - Catlassä¼˜åŒ–ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">catlass_grouped_matmul</span>(<span class="hljs-params">inputs, weights</span>):
    <span class="hljs-string">"""Catlassä¼˜åŒ– - æ‰¹é‡å¹¶è¡Œè®¡ç®—"""</span>
    <span class="hljs-comment"># ä½¿ç”¨NPUä¸“ç”¨æ¥å£ï¼Œè‡ªåŠ¨å¹¶è¡ŒåŒ–</span>
    <span class="hljs-keyword">return</span> torch_npu.npu_grouped_matmul(inputs, weights, split_item=<span class="hljs-number">0</span>)
</code></pre>
<h3 data-id="heading-11">4.3 è·¨å¹³å°å…¼å®¹æ€§</h3>
<p><strong>å…¼å®¹æ€§è®¾è®¡æ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CrossPlatformMatmul</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.supported_platforms = [<span class="hljs-string">'npu'</span>, <span class="hljs-string">'cuda'</span>, <span class="hljs-string">'cpu'</span>]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, A, B</span>):
        <span class="hljs-keyword">if</span> A.device.<span class="hljs-built_in">type</span> == <span class="hljs-string">'npu'</span>:
            <span class="hljs-keyword">return</span> self._npu_implementation(A, B)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> self._fallback_implementation(A, B)
</code></pre>
<h3 data-id="heading-12">4.4 å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch_npu
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GroupedMatmulBenchmark</span>:
    <span class="hljs-string">"""
    åˆ†ç»„çŸ©é˜µä¹˜æ³•æ€§èƒ½å¯¹æ¯”æµ‹è¯•
    å±•ç¤ºä»é€šç”¨å®ç°åˆ°Catlassä¼˜åŒ–çš„è¿ç§»è¿‡ç¨‹
    """</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, device=<span class="hljs-string">'npu'</span></span>):
        self.device = device
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æµ‹è¯•è®¾å¤‡: <span class="hljs-subst">{device}</span>"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">prepare_test_data</span>(<span class="hljs-params">self, batch_size=<span class="hljs-number">8</span>, min_size=<span class="hljs-number">64</span>, max_size=<span class="hljs-number">128</span></span>):
        <span class="hljs-string">"""å‡†å¤‡æµ‹è¯•æ•°æ® - æ¨¡æ‹ŸTransformerä¸­çš„å¤šå¤´æ³¨æ„åŠ›è®¡ç®—"""</span>
        inputs = []
        weights = []
        
        <span class="hljs-comment"># åˆ›å»ºä¸åŒå°ºå¯¸çš„çŸ©é˜µç»„ï¼Œæ¨¡æ‹ŸçœŸå®åœºæ™¯</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(batch_size):
            <span class="hljs-comment"># éšæœºå°ºå¯¸ï¼Œæ¨¡æ‹ŸåŠ¨æ€shape</span>
            m = np.random.randint(min_size, max_size)
            k = np.random.randint(min_size, max_size) 
            n = np.random.randint(min_size, max_size)
            
            input_tensor = torch.randn(m, k, device=self.device, dtype=torch.float16)
            weight_tensor = torch.randn(k, n, device=self.device, dtype=torch.float16)
            
            inputs.append(input_tensor)
            weights.append(weight_tensor)
        
        <span class="hljs-keyword">return</span> inputs, weights
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">naive_implementation</span>(<span class="hljs-params">self, inputs: <span class="hljs-type">List</span>[torch.Tensor], weights: <span class="hljs-type">List</span>[torch.Tensor]</span>):
        <span class="hljs-string">"""æ–¹æ¡ˆ1: æœ´ç´ å®ç° - è¿ç§»å‰"""</span>
        results = []
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(inputs)):
            <span class="hljs-comment"># é€ä¸ªè®¡ç®—ï¼Œæ— æ³•åˆ©ç”¨ç¡¬ä»¶å¹¶è¡Œæ€§</span>
            result = torch.matmul(inputs[i], weights[i])
            results.append(result)
        <span class="hljs-keyword">return</span> results
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">catlass_implementation</span>(<span class="hljs-params">self, inputs: <span class="hljs-type">List</span>[torch.Tensor], weights: <span class="hljs-type">List</span>[torch.Tensor]</span>):
        <span class="hljs-string">"""æ–¹æ¡ˆ2: Catlassä¼˜åŒ– - è¿ç§»å"""</span> 
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># ä½¿ç”¨Catlassä¼˜åŒ–çš„åˆ†ç»„çŸ©é˜µä¹˜æ³•</span>
            <span class="hljs-comment"># split_item=0: æ¯ä¸ªçŸ©é˜µç‹¬ç«‹ï¼Œè‡ªåŠ¨å¹¶è¡ŒåŒ–</span>
            results = torch_npu.npu_grouped_matmul(
                inputs, 
                weights, 
                group_list=<span class="hljs-literal">None</span>,
                split_item=<span class="hljs-number">0</span>
            )
            <span class="hljs-keyword">return</span> results
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Catlasså®ç°å¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> self.naive_implementation(inputs, weights)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">verify_correctness</span>(<span class="hljs-params">self, results1, results2, tolerance=<span class="hljs-number">1e-3</span></span>):
        <span class="hljs-string">"""éªŒè¯ä¸¤ç§å®ç°çš„ç»“æœä¸€è‡´æ€§"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(results1) != <span class="hljs-built_in">len</span>(results2):
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
            
        <span class="hljs-keyword">for</span> i, (r1, r2) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(results1, results2)):
            <span class="hljs-comment"># è½¬æ¢ä¸ºCPUå’Œfloat32è¿›è¡Œç²¾ç¡®æ¯”è¾ƒ</span>
            r1_cpu = r1.cpu().<span class="hljs-built_in">float</span>()
            r2_cpu = r2.cpu().<span class="hljs-built_in">float</span>()
            
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> torch.allclose(r1_cpu, r2_cpu, rtol=tolerance, atol=tolerance):
                max_diff = torch.<span class="hljs-built_in">max</span>(torch.<span class="hljs-built_in">abs</span>(r1_cpu - r2_cpu))
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬<span class="hljs-subst">{i}</span>ç»„ç»“æœå·®å¼‚è¿‡å¤§: <span class="hljs-subst">{max_diff.item()}</span>"</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">benchmark_performance</span>(<span class="hljs-params">self, implementation_func, inputs, weights, iterations=<span class="hljs-number">100</span></span>):
        <span class="hljs-string">"""æ€§èƒ½åŸºå‡†æµ‹è¯•"""</span>
        <span class="hljs-comment"># Warm-up</span>
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
            _ = implementation_func(inputs, weights)
        
        <span class="hljs-keyword">if</span> self.device == <span class="hljs-string">'npu'</span>:
            torch_npu.npu.synchronize()
        <span class="hljs-keyword">elif</span> self.device == <span class="hljs-string">'cuda'</span>:
            torch.cuda.synchronize()
        
        <span class="hljs-comment"># æ­£å¼æµ‹è¯•</span>
        start_time = time.time()
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(iterations):
            results = implementation_func(inputs, weights)
        
        <span class="hljs-keyword">if</span> self.device == <span class="hljs-string">'npu'</span>:
            torch_npu.npu.synchronize()
        <span class="hljs-keyword">elif</span> self.device == <span class="hljs-string">'cuda'</span>:
            torch.cuda.synchronize()
            
        avg_time = (time.time() - start_time) / iterations
        <span class="hljs-keyword">return</span> avg_time, results
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_complete_test</span>(<span class="hljs-params">self, batch_size=<span class="hljs-number">16</span></span>):
        <span class="hljs-string">"""è¿è¡Œå®Œæ•´çš„è¿ç§»å¯¹æ¯”æµ‹è¯•"""</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">50</span>}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ†ç»„çŸ©é˜µä¹˜æ³•è¿ç§»æµ‹è¯• (æ‰¹é‡å¤§å°: <span class="hljs-subst">{batch_size}</span>)"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">50</span>}</span>"</span>)
        
        <span class="hljs-comment"># 1. å‡†å¤‡æµ‹è¯•æ•°æ®</span>
        inputs, weights = self.prepare_test_data(batch_size)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ æµ‹è¯•æ•°æ®å‡†å¤‡å®Œæˆ: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(inputs)}</span>ç»„çŸ©é˜µ"</span>)
        
        <span class="hljs-comment"># 2. æµ‹è¯•æœ´ç´ å®ç°æ€§èƒ½</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n1. æµ‹è¯•æœ´ç´ å®ç° (è¿ç§»å‰)..."</span>)
        naive_time, naive_results = self.benchmark_performance(
            self.naive_implementation, inputs, weights
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   å¹³å‡è€—æ—¶: <span class="hljs-subst">{naive_time*<span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
        
        <span class="hljs-comment"># 3. æµ‹è¯•Catlassä¼˜åŒ–æ€§èƒ½</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n2. æµ‹è¯•Catlassä¼˜åŒ– (è¿ç§»å)..."</span>)
        catlass_time, catlass_results = self.benchmark_performance(
            self.catlass_implementation, inputs, weights
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   å¹³å‡è€—æ—¶: <span class="hljs-subst">{catlass_time*<span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
        
        <span class="hljs-comment"># 4. æ€§èƒ½å¯¹æ¯”</span>
        speedup = naive_time / catlass_time
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n3. æ€§èƒ½å¯¹æ¯”ç»“æœ:"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   - æœ´ç´ å®ç°: <span class="hljs-subst">{naive_time*<span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   - Catlassä¼˜åŒ–: <span class="hljs-subst">{catlass_time*<span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>) 
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   - æ€§èƒ½æå‡: <span class="hljs-subst">{speedup:<span class="hljs-number">.2</span>f}</span>x"</span>)
        
        <span class="hljs-comment"># 5. æ­£ç¡®æ€§éªŒè¯</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n4. æ­£ç¡®æ€§éªŒè¯..."</span>)
        is_correct = self.verify_correctness(naive_results, catlass_results)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   ç»“æœä¸€è‡´æ€§: <span class="hljs-subst">{<span class="hljs-string">'âœ“ é€šè¿‡'</span> <span class="hljs-keyword">if</span> is_correct <span class="hljs-keyword">else</span> <span class="hljs-string">'âœ— å¤±è´¥'</span>}</span>"</span>)
        
        <span class="hljs-comment"># 6. å…¼å®¹æ€§æµ‹è¯•</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n5. å…¼å®¹æ€§æµ‹è¯•..."</span>)
        compatibility = self.test_compatibility()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"   è·¨å¹³å°å…¼å®¹æ€§: <span class="hljs-subst">{<span class="hljs-string">'âœ“ è‰¯å¥½'</span> <span class="hljs-keyword">if</span> compatibility <span class="hljs-keyword">else</span> <span class="hljs-string">'âœ— å­˜åœ¨é—®é¢˜'</span>}</span>"</span>)
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'batch_size'</span>: batch_size,
            <span class="hljs-string">'naive_time_ms'</span>: naive_time * <span class="hljs-number">1000</span>,
            <span class="hljs-string">'catlass_time_ms'</span>: catlass_time * <span class="hljs-number">1000</span>,
            <span class="hljs-string">'speedup'</span>: speedup,
            <span class="hljs-string">'correctness'</span>: is_correct,
            <span class="hljs-string">'compatibility'</span>: compatibility
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_compatibility</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æµ‹è¯•è·¨å¹³å°å…¼å®¹æ€§"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># æµ‹è¯•ä¸åŒå°ºå¯¸ç»„åˆ</span>
            test_cases = [
                [(<span class="hljs-number">64</span>, <span class="hljs-number">64</span>), (<span class="hljs-number">64</span>, <span class="hljs-number">64</span>)],  <span class="hljs-comment"># ç»Ÿä¸€å°ºå¯¸</span>
                [(<span class="hljs-number">128</span>, <span class="hljs-number">64</span>), (<span class="hljs-number">64</span>, <span class="hljs-number">128</span>)], <span class="hljs-comment"># ä¸åŒå°ºå¯¸</span>
                [(<span class="hljs-number">32</span>, <span class="hljs-number">256</span>), (<span class="hljs-number">256</span>, <span class="hljs-number">32</span>)], <span class="hljs-comment"># æç«¯æ¯”ä¾‹</span>
            ]
            
            <span class="hljs-keyword">for</span> i, (size1, size2) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(test_cases):
                m1, k1 = size1
                k2, n2 = size2
                <span class="hljs-keyword">assert</span> k1 == k2, <span class="hljs-string">"å†…éƒ¨ç»´åº¦å¿…é¡»åŒ¹é…"</span>
                
                input_tensor = torch.randn(m1, k1, device=self.device, dtype=torch.float16)
                weight_tensor = torch.randn(k2, n2, device=self.device, dtype=torch.float16)
                
                results = self.catlass_implementation([input_tensor], [weight_tensor])
                
                <span class="hljs-comment"># éªŒè¯è¾“å‡ºå½¢çŠ¶</span>
                <span class="hljs-keyword">if</span> results[<span class="hljs-number">0</span>].shape != (m1, n2):
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
                    
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å…¼å®¹æ€§æµ‹è¯•å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

<span class="hljs-comment"># è¿è¡Œç¤ºä¾‹</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># åˆ›å»ºæµ‹è¯•å®ä¾‹</span>
    benchmark = GroupedMatmulBenchmark(device=<span class="hljs-string">'npu'</span>)
    
    <span class="hljs-comment"># æµ‹è¯•ä¸åŒæ‰¹é‡å¤§å°</span>
    batch_sizes = [<span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>, <span class="hljs-number">32</span>]
    all_results = []
    
    <span class="hljs-keyword">for</span> batch_size <span class="hljs-keyword">in</span> batch_sizes:
        result = benchmark.run_complete_test(batch_size)
        all_results.append(result)
    
    <span class="hljs-comment"># æ€»ç»“æŠ¥å‘Š</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿ç§»é‡æ„æ€»ç»“æŠ¥å‘Š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>"</span>)
    
    <span class="hljs-keyword">for</span> result <span class="hljs-keyword">in</span> all_results:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¹é‡å¤§å° <span class="hljs-subst">{result[<span class="hljs-string">'batch_size'</span>]:2d}</span>: "</span>
              <span class="hljs-string">f"æœ´ç´  <span class="hljs-subst">{result[<span class="hljs-string">'naive_time_ms'</span>]:<span class="hljs-number">6.2</span>f}</span>ms â†’ "</span>
              <span class="hljs-string">f"Catlass <span class="hljs-subst">{result[<span class="hljs-string">'catlass_time_ms'</span>]:<span class="hljs-number">6.2</span>f}</span>ms | "</span>
              <span class="hljs-string">f"åŠ é€Ÿ <span class="hljs-subst">{result[<span class="hljs-string">'speedup'</span>]:<span class="hljs-number">4.2</span>f}</span>x | "</span>
              <span class="hljs-string">f"æ­£ç¡®æ€§ <span class="hljs-subst">{<span class="hljs-string">'âœ“'</span> <span class="hljs-keyword">if</span> result[<span class="hljs-string">'correctness'</span>] <span class="hljs-keyword">else</span> <span class="hljs-string">'âœ—'</span>}</span> | "</span>
              <span class="hljs-string">f"å…¼å®¹æ€§ <span class="hljs-subst">{<span class="hljs-string">'âœ“'</span> <span class="hljs-keyword">if</span> result[<span class="hljs-string">'compatibility'</span>] <span class="hljs-keyword">else</span> <span class="hljs-string">'âœ—'</span>}</span>"</span>)
</code></pre>
<h3 data-id="heading-13">4.5 ç»“æœåˆ†æ</h3>
<p>æ‰€æœ‰ç»“æœå¦‚ä¸‹é¢å››å¼ å›¾æ‰€ç¤ºï¼Œå…·ä½“åˆ†æè¯¦è§åæ–‡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35bdc41981894055afa067a6c29b9825~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=z6ijvQVmVVHagc%2FxQfZFyt%2BaYUU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44880ada60e5495fb648458eb46b4993~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=5Gww%2Fe03WAmD8%2FhcdF9xq%2Bd2Twk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0340d4096dd54d95a53367b416a88984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=eS86SD4Jd5JkL4xYBbNGTiw90Vw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61dea26fb98949baade315efa14e9d4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423171&amp;x-signature=UDxSXS0TacZtABBV3%2FQCmpC72xo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-14">4.5.1 æ€§èƒ½ scalability åˆ†æ</h4>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ‰¹é‡å¤§å°</span>  <span class="hljs-attr">4:</span> <span class="hljs-string">æœ´ç´ </span>   <span class="hljs-number">0.</span><span class="hljs-string">07ms</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Catlass</span>   <span class="hljs-number">0.</span><span class="hljs-string">07ms</span> <span class="hljs-string">|</span> <span class="hljs-string">åŠ é€Ÿ</span> <span class="hljs-number">1.</span><span class="hljs-string">02xï¼ˆåŸºæœ¬æŒå¹³ï¼‰</span>
<span class="hljs-string">æ‰¹é‡å¤§å°</span>  <span class="hljs-attr">8:</span> <span class="hljs-string">æœ´ç´ </span>   <span class="hljs-number">0.</span><span class="hljs-string">13ms</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Catlass</span>   <span class="hljs-number">0.</span><span class="hljs-string">09ms</span> <span class="hljs-string">|</span> <span class="hljs-string">åŠ é€Ÿ</span> <span class="hljs-number">1.</span><span class="hljs-string">43xï¼ˆå¼€å§‹æ˜¾ç°ä¼˜åŠ¿ï¼‰</span>
<span class="hljs-string">æ‰¹é‡å¤§å°</span> <span class="hljs-attr">16:</span> <span class="hljs-string">æœ´ç´ </span>   <span class="hljs-number">0.</span><span class="hljs-string">27ms</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Catlass</span>   <span class="hljs-number">0.</span><span class="hljs-string">14ms</span> <span class="hljs-string">|</span> <span class="hljs-string">åŠ é€Ÿ</span> <span class="hljs-number">1.</span><span class="hljs-string">93xï¼ˆæ¥è¿‘2å€æå‡ï¼‰</span>
<span class="hljs-string">æ‰¹é‡å¤§å°</span> <span class="hljs-attr">32:</span> <span class="hljs-string">æœ´ç´ </span>   <span class="hljs-number">0.</span><span class="hljs-string">53ms</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Catlass</span>   <span class="hljs-number">0.</span><span class="hljs-string">26ms</span> <span class="hljs-string">|</span> <span class="hljs-string">åŠ é€Ÿ</span> <span class="hljs-number">2.</span><span class="hljs-string">05xï¼ˆç¨³å®š2å€ä»¥ä¸Šæ€§èƒ½ï¼‰</span>
</code></pre>
<p>éšç€æ‰¹é‡å¢å¤§ï¼ŒCatlassä¼˜åŠ¿æ˜¾è‘—æå‡ï¼ˆåœ¨å¤§è§„æ¨¡å¹¶è¡Œè®¡ç®—åœºæ™¯ä¸‹ä¼˜åŠ¿æ˜æ˜¾ï¼‰ã€‚å½“æ‰¹é‡è¾ƒå°æ—¶ï¼Œå¯åŠ¨å¼€é”€å æ¯”å¤§ï¼›éšç€æ‰¹é‡å¢åŠ ï¼ŒCatlassçš„ç¡¬ä»¶å¹¶è¡Œèƒ½åŠ›å¾—åˆ°å……åˆ†å‘æŒ¥ï¼Œæ€§èƒ½æå‡ä»1.02å€ç¨³æ­¥å¢é•¿åˆ°2.05å€ï¼Œä½“ç°äº†ä¼˜ç§€çš„æ‰©å±•æ€§ã€‚</p>
<h4 data-id="heading-15">4.5.2 è®¡ç®—å¤æ‚åº¦åˆ†æ</h4>
<p><strong>è€—æ—¶å¢é•¿è¶‹åŠ¿å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># æœ´ç´ å®ç°è€—æ—¶å¢é•¿</span>
<span class="hljs-section">æ‰¹é‡4: 0.07ms â†’ æ‰¹é‡32: 0.53ms (å¢é•¿7.6å€)</span>
<span class="hljs-comment"># Catlasså®ç°è€—æ—¶å¢é•¿  </span>
<span class="hljs-section">æ‰¹é‡4: 0.07ms â†’ æ‰¹é‡32: 0.26ms (å¢é•¿3.7å€)</span>
<span class="hljs-comment"># é—®é¢˜è§„æ¨¡å¢é•¿</span>
æ‰¹é‡4 â†’ æ‰¹é‡32: å¢é•¿8å€
</code></pre>
<p>Catlasså…·æœ‰äºšçº¿æ€§å¢é•¿ç‰¹æ€§ã€‚é—®é¢˜è§„æ¨¡å¢é•¿8å€æ—¶ï¼Œæœ´ç´ å®ç°è€—æ—¶å¢é•¿7.6å€ï¼ˆæ¥è¿‘çº¿æ€§ï¼‰ï¼Œè€ŒCatlassä»…å¢é•¿3.7å€ï¼Œä½“ç°äº†ç¡¬ä»¶èµ„æºçš„é«˜æ•ˆåˆ©ç”¨å’Œå¹¶è¡Œè®¡ç®—çš„ä¼˜è¶Šæ€§ã€‚</p>
<h4 data-id="heading-16">4.5.3 ç¡¬ä»¶åˆ©ç”¨ç‡åˆ†æ</h4>
<p><strong>ä¸åŒæ‰¹é‡ä¸‹çš„æ€§èƒ½è¡¨ç°ï¼š</strong></p>
<pre><code class="hljs language-lua" lang="lua">å°æ‰¹é‡åœºæ™¯ï¼ˆ<span class="hljs-number">4</span>/<span class="hljs-number">8</span>ç»„ï¼‰<span class="hljs-comment">--å¯åŠ¨å¼€é”€åœ¨æ€»è€—æ—¶ä¸­å æ¯”è¾ƒå¤§:</span>
  æ‰¹é‡<span class="hljs-number">4</span>: åŠ é€Ÿæ¯”<span class="hljs-number">1.02</span>x â†’ å¹¶è¡Œåº¦ä¸è¶³ï¼Œå¯åŠ¨å¼€é”€å æ¯”å¤§
  æ‰¹é‡<span class="hljs-number">8</span>: åŠ é€Ÿæ¯”<span class="hljs-number">1.43</span>x â†’ å¼€å§‹æ˜¾ç°å¹¶è¡Œä¼˜åŠ¿

ä¸­å¤§æ‰¹é‡åœºæ™¯ï¼ˆ<span class="hljs-number">16</span>/<span class="hljs-number">32</span>ç»„ï¼‰<span class="hljs-comment">--è®¡ç®—å¯†åº¦è¶³å¤Ÿæ©ç›–å¯åŠ¨å¼€é”€:  </span>
  æ‰¹é‡<span class="hljs-number">16</span>: åŠ é€Ÿæ¯”<span class="hljs-number">1.93</span>x â†’ æ¥è¿‘<span class="hljs-number">2</span>å€ï¼Œç¡¬ä»¶åˆ©ç”¨ç‡æ˜¾è‘—æå‡
  æ‰¹é‡<span class="hljs-number">32</span>: åŠ é€Ÿæ¯”<span class="hljs-number">2.05</span>x â†’ ç¨³å®š<span class="hljs-number">2</span>å€ä»¥ä¸Šï¼Œå……åˆ†æ©ç›–å¯åŠ¨å¼€é”€
</code></pre>
<p>æµ‹è¯•ç»“æœæ˜¾ç¤ºæ‰¹é‡16ç»„æ˜¯æ€§èƒ½æ‹ç‚¹ï¼Œåœ¨æ­¤è§„æ¨¡ä»¥ä¸ŠCatlassèƒ½å¤Ÿå……åˆ†å‘æŒ¥NPUçš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œå®ç°æ¥è¿‘2å€çš„ç¨³å®šæ€§èƒ½æå‡ã€‚</p>
<h4 data-id="heading-17">4.5.4 æ­£ç¡®æ€§ä¸å…¼å®¹æ€§éªŒè¯</h4>
<p><strong>éªŒè¯ç»“æœæ±‡æ€»ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">æ­£ç¡®æ€§æµ‹è¯•:
  æ‰¹é‡4: âœ“ é€šè¿‡ | æ‰¹é‡8: âœ“ é€šè¿‡ 
  æ‰¹é‡16: âœ“ é€šè¿‡ | æ‰¹é‡32: âœ“ é€šè¿‡
  
å…¼å®¹æ€§æµ‹è¯•:
  ç»Ÿä¸€å°ºå¯¸<span class="hljs-section">[(64,64),(64,64)]</span>: âœ“ é€šè¿‡
  ä¸åŒå°ºå¯¸<span class="hljs-section">[(128,64),(64,128)]</span>: âœ“ é€šè¿‡  
  æç«¯æ¯”ä¾‹<span class="hljs-section">[(32,256),(256,32)]</span>: âœ“ é€šè¿‡
</code></pre>
<p>æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å‡æ˜¾ç¤º100%æ­£ç¡®æ€§å’Œå®Œç¾å…¼å®¹æ€§ï¼Œè¯æ˜äº†åŸºäºCatlassçš„è¿ç§»é‡æ„åœ¨ä¿è¯è®¡ç®—å‡†ç¡®æ€§çš„å‰æä¸‹ï¼Œèƒ½å¤Ÿå®ç°æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚</p>
<h4 data-id="heading-18">4.5.5 å®é™…åº”ç”¨æ„ä¹‰</h4>
<p>å¯¹äºé€‚ç”¨åœºæ™¯æ¨èï¼Œæ¨èä½¿ç”¨æ‰¹é‡16ç»„ä»¥ä¸Šçš„çŸ©é˜µä¹˜æ³•åœºæ™¯ï¼Œè°¨æ…ä½¿ç”¨æ‰¹é‡8ç»„ä»¥ä¸‹çš„è½»é‡çº§è®¡ç®—ï¼Œæœ€ä½³å®è·µä¸ºTransformerå¤šå¤´æ³¨æ„åŠ›ã€æ¨èç³»ç»Ÿå¤šä¸“å®¶æ¨¡å‹ç­‰é«˜å¹¶è¡Œåº¦åœºæ™¯ã€‚åœ¨å…¸å‹çš„AIæ¨ç†åœºæ™¯ä¸­ï¼ŒåŸºäºCatlassé‡æ„å¯è·å¾—<strong>1.5-2.0å€çš„ç«¯åˆ°ç«¯æ€§èƒ½æå‡</strong>ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦å¤„ç†å¤šä¸ªç‹¬ç«‹è®¡ç®—ä»»åŠ¡çš„ç°ä»£ç¥ç»ç½‘ç»œæ¶æ„ã€‚è¿™ä¸ªç»“æœä½“ç°äº†Catlassåœ¨æ˜‡è…¾å¹³å°ä¸Šçš„æ ¸å¿ƒä»·å€¼ï¼š<strong>ç”¨æœ€å°çš„è¿ç§»æˆæœ¬è·å¾—æœ€å¤§çš„æ€§èƒ½æ”¶ç›Š</strong>ï¼Œä¸ºAIåº”ç”¨çš„é«˜æ•ˆéƒ¨ç½²æä¾›äº†å¯é çš„æŠ€æœ¯æ”¯æ’‘ã€‚</p>
<hr/>
<h2 data-id="heading-19">äº”ã€æ€»ç»“</h2>
<p>CATLASSç®—å­æ¨¡æ¿åº“ä½œä¸ºæ˜‡è…¾CANNç”Ÿæ€ä¸­çš„é‡è¦ä¸€ç¯ï¼Œé€šè¿‡åˆ†å±‚æ¨¡å—åŒ–è®¾è®¡å’Œæ¨¡æ¿åŒ–ç¼–ç¨‹ï¼Œæå¤§åœ°ç®€åŒ–äº†é«˜æ€§èƒ½ç®—å­çš„å¼€å‘æµç¨‹ã€‚æœ¬æ–‡ä»CATLASSçš„æ¶æ„è®¾è®¡å…¥æ‰‹ï¼Œè¯¦ç»†ä»‹ç»äº†ç¯å¢ƒé…ç½®æ–¹æ³•ï¼Œå¹¶é€šè¿‡ä¼˜åŒ–Transformerä¸­çš„å°æ‰¹é‡çŸ©é˜µä¹˜æ³•è¿™ä¸€å®ä¾‹ï¼Œå±•ç¤ºäº†ä½¿ç”¨CATLASSå¼€å‘ç®—å­çš„å®Œæ•´æµç¨‹ã€‚</p>
<p>CATLASSçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ol>
<li><strong>Catlassåœ¨å¹¶è¡Œè®¡ç®—åœºæ™¯ä¸‹ä¼˜åŠ¿æ˜¾è‘—</strong>ï¼Œæ‰¹é‡è¶Šå¤§æ€§èƒ½æå‡è¶Šæ˜æ˜¾</li>
<li><strong>è¿ç§»é‡æ„æˆæœ¬ä½ã€æ”¶ç›Šé«˜</strong>ï¼Œç®€å•çš„APIæ›¿æ¢å³å¯è·å¾—è¿‘2å€æ€§èƒ½æå‡</li>
<li><strong>å®Œå…¨å…¼å®¹ç°æœ‰ç”Ÿæ€</strong>ï¼Œæ— éœ€ä¿®æ”¹ç®—æ³•é€»è¾‘ï¼Œä¿è¯è®¡ç®—ç»“æœä¸€è‡´æ€§</li>
<li><strong>ç‰¹åˆ«é€‚åˆç°ä»£AIå·¥ä½œè´Ÿè½½</strong>ï¼Œå¦‚å¤§è¯­è¨€æ¨¡å‹ã€æ¨èç³»ç»Ÿç­‰é«˜å¹¶è¡Œåœºæ™¯</li>
<li><strong>ç”Ÿæ€é›†æˆåº¦æ·±</strong>ï¼Œä¸CANNç”Ÿæ€ç³»ç»Ÿæ— ç¼é›†æˆï¼Œäº«å—å®Œæ•´çš„å·¥å…·é“¾æ”¯æŒã€‚</li>
</ol>
<p>éšç€AIæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œå¯¹ç®—å­çš„æ€§èƒ½å’Œè¦æ±‚ä¹Ÿä¼šè¶Šæ¥è¶Šé«˜ã€‚CATLASSçš„æŒç»­æ¼”è¿›ï¼ŒåŒ…æ‹¬æ”¯æŒæ›´å¤šç®—å­ç±»å‹ã€ä¼˜åŒ–ç¼–è¯‘ç­–ç•¥ä»¥åŠå¢å¼ºè·¨å¹³å°å…¼å®¹æ€§ï¼Œå°†ä¸ºæ˜‡è…¾AIç”Ÿæ€æ³¨å…¥æ›´å¤šæ´»åŠ›ï¼ŒåŠ©åŠ›å¼€å‘è€…æ›´è½»æ¾åœ°æ„å»ºé«˜æ€§èƒ½AIåº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºä¸€ä¸ªèåˆå‰ç«¯ã€æ¨¡æ‹Ÿåç«¯ä¸å¤§æ¨¡å‹æœåŠ¡çš„å…¨æ ˆ AI åº”ç”¨]]></title>    <link>https://juejin.cn/post/7579480677903171619</link>    <guid>https://juejin.cn/post/7579480677903171619</guid>    <pubDate>2025-12-04T03:18:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579480677903171619" data-draft-id="7579496954252640296" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºä¸€ä¸ªèåˆå‰ç«¯ã€æ¨¡æ‹Ÿåç«¯ä¸å¤§æ¨¡å‹æœåŠ¡çš„å…¨æ ˆ AI åº”ç”¨ "/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-04T03:18:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Qilana"/> <meta itemprop="url" content="https://juejin.cn/user/24668014656249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºä¸€ä¸ªèåˆå‰ç«¯ã€æ¨¡æ‹Ÿåç«¯ä¸å¤§æ¨¡å‹æœåŠ¡çš„å…¨æ ˆ AI åº”ç”¨ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/24668014656249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Qilana
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:18:37.000Z" title="Thu Dec 04 2025 03:18:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å½“ä»Šå¿«é€Ÿå‘å±•çš„ Web å¼€å‘é¢†åŸŸï¼Œ<strong>å…¨æ ˆå¼€å‘</strong>æ—©å·²ä¸å†æ˜¯â€œä¼šç‚¹å‰åç«¯â€çš„ä»£åè¯ï¼Œè€Œæ˜¯è¦æ±‚å¼€å‘è€…èƒ½å¤Ÿé«˜æ•ˆæ•´åˆå„ç±»æœåŠ¡â€”â€”ä»å‰ç«¯ç•Œé¢åˆ°æ•°æ®æ¥å£ï¼Œå†åˆ°äººå·¥æ™ºèƒ½èƒ½åŠ›ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œæ„å»ºä¸€ä¸ªå…·å¤‡ <strong>ç”¨æˆ·æ•°æ®å±•ç¤º + è‡ªç„¶è¯­è¨€é—®ç­”èƒ½åŠ›</strong> çš„å…¨æ ˆåº”ç”¨ï¼Œæ¶µç›–å‰ç«¯é¡µé¢ã€æœ¬åœ°æ¨¡æ‹Ÿ API æœåŠ¡ã€ä»¥åŠåŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ™ºèƒ½é—®ç­”åç«¯ã€‚</p>
<h2 data-id="heading-0">ğŸ§± æ•´ä½“æ¶æ„æ¦‚è§ˆ</h2>
<p>æˆ‘ä»¬çš„ç³»ç»Ÿç”±ä¸‰å¤§éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li><strong>å‰ç«¯ç•Œé¢ï¼ˆFrontendï¼‰</strong> ï¼šä½¿ç”¨åŸç”Ÿ HTML + Bootstrap å¿«é€Ÿæ­å»ºå“åº”å¼é¡µé¢ï¼Œå±•ç¤ºç”¨æˆ·åˆ—è¡¨å¹¶æä¾›é—®é¢˜è¾“å…¥è¡¨å•ã€‚</li>
<li><strong>æ¨¡æ‹Ÿåç«¯æœåŠ¡ï¼ˆMock Backendï¼‰</strong> ï¼šé€šè¿‡ <code>json-server</code> å·¥å…·å¿«é€Ÿå¯åŠ¨ RESTful APIï¼Œæä¾›é™æ€ JSON æ•°æ®ã€‚</li>
<li><strong>AI æ™ºèƒ½æœåŠ¡ï¼ˆLLM Serviceï¼‰</strong> ï¼šåŸºäº Node.js ç¼–å†™ HTTP æœåŠ¡ï¼Œé›†æˆç¬¬ä¸‰æ–¹å¤§æ¨¡å‹ APIï¼ˆå¦‚ OpenAI å…¼å®¹æ¥å£ï¼‰ï¼Œæ¥æ”¶è‡ªç„¶è¯­è¨€é—®é¢˜å¹¶ç»“åˆä¸Šä¸‹æ–‡æ•°æ®ç”Ÿæˆç­”æ¡ˆã€‚</li>
</ol>
<blockquote>
<p>âœ… æ‰€æœ‰æœåŠ¡å‡è¿è¡Œåœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œä¾¿äºè°ƒè¯•ä¸æ¼”ç¤ºã€‚</p>
</blockquote>
<h2 data-id="heading-1">ğŸ–¥ï¸ å‰ç«¯ï¼šç®€æ´è€Œå¼ºå¤§çš„äº¤äº’ç•Œé¢</h2>
<p>å‰ç«¯é‡‡ç”¨çº¯ HTML + å†…è” JavaScript å®ç°ï¼Œæ— éœ€æ„å»ºå·¥å…·ï¼Œå¼€ç®±å³ç”¨ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒåŠŸèƒ½</h3>
<ul>
<li>ä½¿ç”¨ <strong>Bootstrap 3</strong> å¿«é€Ÿå®ç°å“åº”å¼å¸ƒå±€ï¼›</li>
<li>é€šè¿‡ <code>fetch</code> ä»æœ¬åœ° API è·å–ç”¨æˆ·æ•°æ®ï¼Œå¹¶åŠ¨æ€æ¸²æŸ“ä¸ºè¡¨æ ¼ï¼›</li>
<li>æä¾›ä¸€ä¸ªè¡¨å•ï¼Œå…è®¸ç”¨æˆ·è¾“å…¥è‡ªç„¶è¯­è¨€é—®é¢˜ï¼ˆå¦‚â€œè°æ¥è‡ªåŒ—äº¬ï¼Ÿâ€ï¼‰ï¼›</li>
<li>å°†ç”¨æˆ·æ•°æ®å’Œé—®é¢˜ä¸€èµ·å‘é€ç»™ LLM æœåŠ¡ï¼Œå±•ç¤º AI å›ç­”ã€‚</li>
</ul>
<h3 data-id="heading-3">å…³é”®ä»£ç é€»è¾‘</h3>
<pre><code class="hljs language-ini" lang="ini">// 1. è·å–ç”¨æˆ·æ•°æ®
fetch('http://localhost:3001/users')
  .then(<span class="hljs-attr">res</span> =&gt; res.json())
  .then(<span class="hljs-attr">data</span> =&gt; {
    <span class="hljs-attr">users</span> = data<span class="hljs-comment">;</span>
    // åŠ¨æ€ç”Ÿæˆè¡¨æ ¼è¡Œ
    <span class="hljs-attr">oBody.innerHTML</span> = data.map(user =&gt; `
      &lt;tr&gt;
        &lt;td&gt;${user.id}&lt;/td&gt;
        &lt;td&gt;${user.username}&lt;/td&gt;
        &lt;td&gt;${user.hometown}&lt;/td&gt;
      &lt;/tr&gt;
    `).join('')<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>

// 2. æäº¤é—®é¢˜ç»™ LLM æœåŠ¡
oForm.addEventListener('submit', (e) =&gt; {
  e.preventDefault()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">question</span> = oForm.question.value<span class="hljs-comment">;</span>
  fetch(`http://localhost:443/?<span class="hljs-attr">question</span>=<span class="hljs-variable">${encodeURIComponent(question)}</span>&amp;data=<span class="hljs-variable">${encodeURIComponent(JSON.stringify(users))}</span>`)
    .then(<span class="hljs-attr">res</span> =&gt; res.json())
    .then(<span class="hljs-attr">data</span> =&gt; {
      document.getElementById('message').<span class="hljs-attr">innerHTML</span> = data.result<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<blockquote>
<p>ğŸ”’ æ³¨æ„ï¼šå‰ç«¯åŒæ—¶è¯·æ±‚ä¸¤ä¸ªä¸åŒç«¯å£çš„æœåŠ¡ï¼ˆ3001 å’Œ 443ï¼‰ï¼Œå› æ­¤ LLM æœåŠ¡å¿…é¡»è®¾ç½® CORS å¤´ä»¥é¿å…è·¨åŸŸé”™è¯¯ã€‚</p>
</blockquote>
<h2 data-id="heading-4">âš™ï¸ æ¨¡æ‹Ÿåç«¯ï¼šé›¶ä»£ç  API å¿«é€Ÿæ­å»º</h2>
<p>ä¸ºäº†ç®€åŒ–å¼€å‘æµç¨‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>json-server</code> â€”â€” ä¸€ä¸ªåŸºäº JSON æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆ REST API çš„è½»é‡çº§å·¥å…·ã€‚</p>
<h3 data-id="heading-5">é…ç½®æ­¥éª¤</h3>
<ol>
<li>
<p>åˆå§‹åŒ– Node.js é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">npm <span class="hljs-keyword">init</span> -y
</code></pre>
</li>
<li>
<p>å®‰è£… <code>json-server</code>ï¼ˆæ¨èä½¿ç”¨ <code>pnpm</code> æå‡é€Ÿåº¦ä¸ç£ç›˜æ•ˆç‡ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">pnpm <span class="hljs-selector-tag">i</span> json-server
</code></pre>
</li>
<li>
<p>åˆ›å»º <code>users.json</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[  { <span class="hljs-string">"id"</span>: 1, <span class="hljs-string">"username"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"hometown"</span>: <span class="hljs-string">"åŒ—äº¬"</span> },  { <span class="hljs-string">"id"</span>: 2, <span class="hljs-string">"username"</span>: <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"hometown"</span>: <span class="hljs-string">"ä¸Šæµ·"</span> },  { <span class="hljs-string">"id"</span>: 3, <span class="hljs-string">"username"</span>: <span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-string">"hometown"</span>: <span class="hljs-string">"å¹¿å·"</span> }]</span>
</code></pre>
</li>
<li>
<p>åœ¨ <code>package.json</code> ä¸­æ·»åŠ è„šæœ¬ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"json-server --watch users.json --port 3001"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p>å¯åŠ¨æœåŠ¡ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">npm run dev
</code></pre>
</li>
</ol>
<p>æ­¤æ—¶è®¿é—® <code>http://localhost:3001/users</code> å³å¯è·å–ç”¨æˆ·åˆ—è¡¨ï¼Œå®Œå…¨ç¬¦åˆ REST è§„èŒƒã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ¤– LLM æœåŠ¡ï¼šè®© AI ç†è§£ä½ çš„æ•°æ®</h2>
<p>è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œå¤§è„‘â€â€”â€”ä¸€ä¸ªåŸºäº Node.js çš„ HTTP æœåŠ¡ï¼Œå®ƒæ¥æ”¶å‰ç«¯ä¼ æ¥çš„ <strong>ç»“æ„åŒ–æ•°æ® + è‡ªç„¶è¯­è¨€é—®é¢˜</strong>ï¼Œè°ƒç”¨å¤§æ¨¡å‹ç”Ÿæˆç²¾å‡†å›ç­”ã€‚</p>
<h3 data-id="heading-7">æŠ€æœ¯æ ˆ</h3>
<ul>
<li>Node.jsï¼ˆES æ¨¡å—è¯­æ³•ï¼‰</li>
<li><code>http</code> æ¨¡å—ï¼šåˆ›å»ºåŸºç¡€ Web æœåŠ¡å™¨</li>
<li><code>openai</code> SDKï¼šè°ƒç”¨å…¼å®¹ OpenAI çš„å¤§æ¨¡å‹ API</li>
<li><code>dotenv</code>ï¼šå®‰å…¨åŠ è½½ API å¯†é’¥</li>
</ul>
<h3 data-id="heading-8">æ ¸å¿ƒæµç¨‹</h3>
<ol>
<li>
<p><strong>åŠ è½½ç¯å¢ƒå˜é‡</strong><br/>
ä½¿ç”¨ <code>.env</code> æ–‡ä»¶å­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ <code>OPENAI_API_KEY</code>ï¼‰ï¼Œé¿å…ç¡¬ç¼–ç ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">import { <span class="hljs-built_in">config</span> } from <span class="hljs-string">'dotenv'</span>;
<span class="hljs-built_in">config</span>({ <span class="hljs-built_in">path</span>: <span class="hljs-string">'.env'</span> });
</code></pre>
<blockquote>
<p>âš ï¸ è‹¥æœªé…ç½® <code>.env</code> æ–‡ä»¶ï¼Œ<code>process.env.OPENAI_API_KEY</code> å°†ä¸º <code>undefined</code>ï¼Œå¯¼è‡´åç»­è°ƒç”¨å¤±è´¥ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>åˆå§‹åŒ–å¤§æ¨¡å‹å®¢æˆ·ç«¯</strong><br/>
æŒ‡å®š API å¯†é’¥ä¸è‡ªå®šä¹‰ Base URLï¼ˆä¾‹å¦‚ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.302.ai%2F" target="_blank" title="https://api.302.ai/" ref="nofollow noopener noreferrer">302.ai</a> ç­‰å›½å†…ä»£ç†æœåŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">client</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">OpenAI</span>({
  <span class="hljs-attr">apiKey</span>: process.env.OPENAI_API_KEY,
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.302.ai/v1'</span>
});
</code></pre>
</li>
<li>
<p><strong>å°è£… AI è°ƒç”¨å‡½æ•°</strong><br/>
æ„é€ æç¤ºè¯ï¼ˆPromptï¼‰ï¼Œå¼•å¯¼æ¨¡å‹åŸºäºæä¾›çš„ JSON æ•°æ®å›ç­”é—®é¢˜ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">getCompletion</span> = async (prompt) =&gt; {
  const <span class="hljs-attr">messages</span> = [{ role: <span class="hljs-string">'user'</span>, content: prompt }]<span class="hljs-comment">;</span>
  const <span class="hljs-attr">result</span> = await client.chat.completions.create({
    model: 'gpt-3.5-turbo',
    messages,
    temperature: 0.1 // é™ä½éšæœºæ€§ï¼Œæé«˜å‡†ç¡®æ€§
  })<span class="hljs-comment">;</span>
  return result.choices<span class="hljs-section">[0]</span>.message.content<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
</li>
<li>
<p><strong>åˆ›å»º HTTP æœåŠ¡</strong><br/>
ç›‘å¬è¯·æ±‚ï¼Œè§£æ URL å‚æ•°ä¸­çš„ <code>question</code> å’Œ <code>data</code>ï¼Œæ‹¼æ¥ Prompt å¹¶è¿”å› AI ç»“æœï¼š</p>
<pre><code class="hljs language-ini" lang="ini">http.createServer(async (req, res) =&gt; {
  res.setHeader('Access-Control-Allow-Origin', '*')<span class="hljs-comment">;</span>
  const <span class="hljs-attr">parsedUrl</span> = url.parse(req.url, <span class="hljs-literal">true</span>)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">prompt</span> = `
    ${parsedUrl.query.data}
    è¯·æ ¹æ®ä¸Šé¢çš„JSONæ•°æ®ï¼Œå›ç­”â€œ${parsedUrl.query.question}â€è¿™ä¸ªé—®é¢˜ã€‚
  `<span class="hljs-comment">;</span>
  try {
    const <span class="hljs-attr">result</span> = await getCompletion(prompt)<span class="hljs-comment">;</span>
    res.end(JSON.stringify({ result }))<span class="hljs-comment">;</span>
  } catch (err) {
    <span class="hljs-attr">res.statusCode</span> = <span class="hljs-number">500</span><span class="hljs-comment">;</span>
    res.end(JSON.stringify({ error: String(err) }))<span class="hljs-comment">;</span>
  }
}).listen(443)<span class="hljs-comment">;</span>
</code></pre>
</li>
</ol>
<blockquote>
<p>ğŸ“Œ <strong>ä¸ºä»€ä¹ˆç›‘å¬ 443 ç«¯å£ï¼Ÿ</strong><br/>
è™½ç„¶æ³¨é‡Šä¸­æåˆ°â€œå› ä¸º 302.ai æœåŠ¡çš„ç«¯å£æ˜¯ 443â€ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯<strong>æœ¬åœ°æœåŠ¡ç›‘å¬çš„ç«¯å£</strong>ã€‚é€‰æ‹© 443 å¯èƒ½æ˜¯ä¸ºäº†æ¨¡æ‹Ÿ HTTPSï¼ˆä½†æ­¤å¤„ä»æ˜¯ HTTPï¼‰ï¼Œæ›´åˆç†çš„åšæ³•æ˜¯ä½¿ç”¨éç‰¹æƒç«¯å£å¦‚ <code>1314</code> æˆ– <code>8080</code>ã€‚è‹¥åšæŒç”¨ 443ï¼Œéœ€ç¡®ä¿æ— å…¶ä»–æœåŠ¡å ç”¨ä¸”æœ‰ root æƒé™ã€‚</p>
</blockquote>
<h2 data-id="heading-9">ğŸ”„ ä¸‰ç«¯ååŒå·¥ä½œæµç¨‹</h2>
<ol>
<li>
<p>ç”¨æˆ·æ‰“å¼€ <code>index.html</code>ï¼›</p>
</li>
<li>
<p>é¡µé¢è‡ªåŠ¨è¯·æ±‚ <code>http://localhost:3001/users</code>ï¼Œè·å–ç”¨æˆ·æ•°æ®å¹¶æ¸²æŸ“è¡¨æ ¼ï¼›</p>
</li>
<li>
<p>ç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­æé—®ï¼ˆå¦‚â€œè°æ¥è‡ªä¸Šæµ·ï¼Ÿâ€ï¼‰ï¼›</p>
</li>
<li>
<p>å‰ç«¯å°†é—®é¢˜ + å½“å‰ç”¨æˆ·æ•°æ®ï¼ˆJSON å­—ç¬¦ä¸²ï¼‰ç¼–ç åï¼Œå‘é€è‡³ <code>http://localhost:443/...</code>ï¼›</p>
</li>
<li>
<p>LLM æœåŠ¡æ”¶åˆ°è¯·æ±‚ï¼Œæ„é€  Promptï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[{<span class="hljs-string">"id"</span>:1,<span class="hljs-string">"username"</span>:<span class="hljs-string">"å¼ ä¸‰"</span>,<span class="hljs-string">"hometown"</span>:<span class="hljs-string">"åŒ—äº¬"</span>}, ...]</span>
è¯·æ ¹æ®ä¸Šé¢çš„JSONæ•°æ®ï¼Œå›ç­”â€œè°æ¥è‡ªä¸Šæµ·ï¼Ÿâ€è¿™ä¸ªé—®é¢˜ã€‚
</code></pre>
</li>
<li>
<p>è°ƒç”¨å¤§æ¨¡å‹ APIï¼Œè¿”å›ç»“æ„åŒ–ç­”æ¡ˆï¼ˆå¦‚â€œæå››æ¥è‡ªä¸Šæµ·ã€‚â€ï¼‰ï¼›</p>
</li>
<li>
<p>å‰ç«¯æ¥æ”¶å“åº”ï¼Œå°†ç­”æ¡ˆæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-10">ğŸ› ï¸ å¼€å‘ä¸è°ƒè¯•å»ºè®®</h2>

























<table><thead><tr><th>æœåŠ¡</th><th>å¯åŠ¨å‘½ä»¤</th><th>é»˜è®¤ç«¯å£</th></tr></thead><tbody><tr><td>æ¨¡æ‹Ÿåç«¯</td><td><code>npm run dev</code></td><td>3001</td></tr><tr><td>LLM æœåŠ¡</td><td><code>node llm/index.mjs</code></td><td>443ï¼ˆå»ºè®®æ”¹ä¸º 1314ï¼‰</td></tr><tr><td>å‰ç«¯</td><td>ç›´æ¥åŒå‡» <code>index.html</code> æˆ–ç”¨ Live Server</td><td>æ— </td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å¸¸è§é—®é¢˜æ’æŸ¥</strong>ï¼š</p>
</blockquote>
<ul>
<li><strong>API Key æœªåŠ è½½</strong>ï¼šç¡®ä¿é¡¹ç›®æ ¹ç›®å½•å­˜åœ¨ <code>.env</code> æ–‡ä»¶ï¼Œå†…å®¹ä¸º <code>OPENAI_API_KEY=your_key_here</code>ï¼›</li>
<li><strong>è·¨åŸŸé”™è¯¯</strong>ï¼šLLM æœåŠ¡å¿…é¡»è®¾ç½® <code>Access-Control-Allow-Origin: *</code>ï¼›</li>
<li><strong>ç«¯å£å†²çª</strong>ï¼šè‹¥ 443 è¢«å ç”¨ï¼Œä¿®æ”¹ <code>.listen(443)</code> ä¸º <code>.listen(1314)</code>ï¼Œå¹¶åŒæ­¥æ›´æ–°å‰ç«¯ fetch åœ°å€ï¼›</li>
<li><strong>ä¸­æ–‡ä¹±ç </strong>ï¼šç¡®ä¿æ‰€æœ‰æ–‡ä»¶ä¿å­˜ä¸º UTF-8 ç¼–ç ã€‚</li>
</ul>
<h2 data-id="heading-11">ğŸŒŸ æ€»ç»“ï¼šå…¨æ ˆ Ã— AI çš„æœªæ¥å·²æ¥</h2>
<p>è¿™ä¸ªå°é¡¹ç›®è™½ç®€å•ï¼Œå´å®Œæ•´ä½“ç°äº†ç°ä»£ Web åº”ç”¨çš„å…¸å‹æ¶æ„ï¼š</p>
<ul>
<li><strong>å‰ç«¯</strong>è´Ÿè´£ä½“éªŒä¸äº¤äº’ï¼›</li>
<li><strong>åç«¯</strong>ï¼ˆå“ªæ€•æ˜¯æ¨¡æ‹Ÿçš„ï¼‰æä¾›æ•°æ®æ”¯æ’‘ï¼›</li>
<li><strong>AI æœåŠ¡</strong>èµ‹äºˆåº”ç”¨â€œç†è§£â€ä¸â€œæ¨ç†â€èƒ½åŠ›ã€‚</li>
</ul>
<p>é€šè¿‡å°† LLM ä½œä¸ºâ€œæ™ºèƒ½ä¸­é—´ä»¶â€ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾ä¸ºä»»ä½•ç»“æ„åŒ–æ•°æ®æ·»åŠ è‡ªç„¶è¯­è¨€æŸ¥è¯¢åŠŸèƒ½â€”â€”æ— è®ºæ˜¯ CRM ç³»ç»Ÿã€æ—¥å¿—åˆ†æï¼Œè¿˜æ˜¯å†…éƒ¨çŸ¥è¯†åº“ã€‚</p>
<blockquote>
<p>ğŸš€ ä¸‹ä¸€æ­¥ä½ å¯ä»¥ï¼š</p>
<ul>
<li>å°† LLM æœåŠ¡å‡çº§ä¸º Express åº”ç”¨ï¼Œæ”¯æŒ POST è¯·æ±‚ä¸æ›´å¤æ‚çš„è·¯ç”±ï¼›</li>
<li>æ·»åŠ  loading åŠ¨ç”»ä¸é”™è¯¯é‡è¯•æœºåˆ¶ï¼›</li>
<li>ä½¿ç”¨ WebSocket å®ç°å®æ—¶æµå¼å›ç­”ï¼›</li>
<li>éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼Œæ‰“é€ çœŸæ­£çš„ AI æ•°æ®åŠ©æ‰‹ï¼</li>
</ul>
</blockquote>
<p>å…¨æ ˆå¼€å‘ä¸å†åªæ˜¯â€œè¿æ¥æ•°æ®åº“â€ï¼Œè€Œæ˜¯<strong>ç¼–ç»‡æ™ºèƒ½ä¸ä½“éªŒçš„ç½‘ç»œ</strong>ã€‚è€Œä½ ï¼Œå·²ç»è¿ˆå‡ºäº†å…³é”®ä¸€æ­¥ã€‚âœ¨</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React å¤§å±å¯è§†åŒ–é€‚é…æ–¹æ¡ˆï¼švfit-react å‘å¸ƒ ğŸš€]]></title>    <link>https://juejin.cn/post/7579546893190299663</link>    <guid>https://juejin.cn/post/7579546893190299663</guid>    <pubDate>2025-12-04T03:30:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579546893190299663" data-draft-id="7579556047783084084" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React å¤§å±å¯è§†åŒ–é€‚é…æ–¹æ¡ˆï¼švfit-react å‘å¸ƒ ğŸš€"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2025-12-04T03:30:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€é¢—çƒ‚åœŸè±†"/> <meta itemprop="url" content="https://juejin.cn/user/764915822371912"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React å¤§å±å¯è§†åŒ–é€‚é…æ–¹æ¡ˆï¼švfit-react å‘å¸ƒ ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/764915822371912/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€é¢—çƒ‚åœŸè±†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:30:29.000Z" title="Thu Dec 04 2025 03:30:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ <strong>ä¸€é¢—çƒ‚åœŸè±†</strong>ã€‚</p>
<p>åœ¨åšå¤§å±å¯è§†åŒ–é¡¹ç›®æ—¶ï¼Œå±å¹•é€‚é…å¾€å¾€æ˜¯ä¸€ä¸ªç»•ä¸å¼€çš„è¯é¢˜ã€‚ä¹‹å‰æˆ‘å¼€å‘äº† Vue ç‰ˆæœ¬çš„ <code>vfit</code>ï¼Œæ”¶åˆ°äº†ä¸å°‘åé¦ˆã€‚ä¸ºäº†æ»¡è¶³ React ç¤¾åŒºçš„éœ€æ±‚ï¼Œå®˜æ–¹çš„ React ç‰ˆæœ¬ <strong><code>vfit-react</code></strong> ç°å·²æ­£å¼å‘å¸ƒï¼</p>
<p>å®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç¼©æ”¾ä¸å®šä½è§£å†³æ–¹æ¡ˆï¼Œæ—¨åœ¨ç”¨æœ€ç®€å•çš„æ–¹å¼è§£å†³å¤§å±é€‚é…é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ğŸŒŸ æ ¸å¿ƒç‰¹æ€§</h2>
<ol>
<li><strong>å…¨å±€è‡ªåŠ¨ç¼©æ”¾</strong>ï¼šé€šè¿‡ <code>FitScaleProvider</code>ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨ç›‘å¬çª—å£æˆ–æŒ‡å®šå®¹å™¨çš„å˜åŒ–ï¼Œè®¡ç®—å‡ºå…¨å±€çš„ç¼©æ”¾æ¯”ä¾‹ã€‚</li>
<li><strong>æ™ºèƒ½å®šä½å®¹å™¨</strong>ï¼šå†…ç½®çš„ <code>FitContainer</code> ç»„ä»¶ä¸ä»…èƒ½ç»§æ‰¿å…¨å±€ç¼©æ”¾ï¼Œè¿˜æ”¯æŒâ€œåƒç´ çº§â€å’Œâ€œç™¾åˆ†æ¯”â€ä¸¤ç§å®šä½æ¨¡å¼ã€‚</li>
<li><strong>çµæ´»çš„é€‚é…æ¨¡å¼</strong>ï¼šæ”¯æŒæŒ‰å®½åº¦é€‚é…ã€æŒ‰é«˜åº¦é€‚é…ï¼Œæˆ–è€…å…¨è‡ªåŠ¨æ¨¡å¼ï¼ˆAutoï¼‰ï¼Œæ»¡è¶³ä¸åŒæ¯”ä¾‹å¤§å±çš„éœ€æ±‚ã€‚</li>
</ol>
<h2 data-id="heading-1">ğŸ“¦ å®‰è£…</h2>
<p>éå¸¸ç®€å•ï¼Œä¸€è¡Œå‘½ä»¤æå®šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install vfit-react
</code></pre>
<h2 data-id="heading-2">ğŸ›  ä½¿ç”¨æŒ‡å—</h2>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šæ³¨å…¥å…¨å±€é…ç½®</h3>
<p>åœ¨ä½ çš„åº”ç”¨æ ¹èŠ‚ç‚¹ï¼ˆæˆ–å¤§å±é¡µé¢çš„æ ¹èŠ‚ç‚¹ï¼‰ä½¿ç”¨ <code>FitScaleProvider</code> åŒ…è£¹ã€‚ä½ éœ€è¦æä¾›è®¾è®¡ç¨¿çš„å°ºå¯¸ï¼Œè¿™æ ·åº“æ‰èƒ½ç®—å‡ºæ­£ç¡®çš„æ¯”ä¾‹ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// App.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FitScaleProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vfit-react'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// å‡è®¾è®¾è®¡ç¨¿æ˜¯ 1920 x 1080</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FitScaleProvider</span> <span class="hljs-attr">options</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">designHeight:</span> <span class="hljs-attr">1080</span>, <span class="hljs-attr">designWidth:</span> <span class="hljs-attr">1920</span>, <span class="hljs-attr">scaleMode:</span> '<span class="hljs-attr">auto</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MyDashboard</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">FitScaleProvider</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>
</code></pre>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šä½¿ç”¨æ™ºèƒ½å®¹å™¨å¸ƒå±€</h3>
<p>æŠ›å¼ƒç¹ççš„ <code>calc()</code> æˆ–æ‰‹åŠ¨è®¡ç®— <code>transform</code>ï¼Œç›´æ¥ä½¿ç”¨ <code>FitContainer</code>ã€‚</p>
<p>å®ƒæœ‰ä¸¤ç§æ ¸å¿ƒæ¨¡å¼ï¼š</p>
<h4 data-id="heading-5">1. ç™¾åˆ†æ¯”å•ä½ (<code>unit="%"</code>)</h4>
<ul>
<li>é€‚ç”¨äºå±…ä¸­å¸ƒå±€æˆ–ç›¸å¯¹ä½ç½®ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä½ç½®ä¸ä¼šéšç¼©æ”¾æ”¹å˜ï¼ˆå§‹ç»ˆåœ¨å±å¹•çš„ç›¸å¯¹ä½ç½®ï¼‰ï¼Œä½†<strong>å†…å®¹</strong>ä¼šè¿›è¡Œç¼©æ”¾ã€‚</li>
</ul>
<h4 data-id="heading-6">2. åƒç´ å•ä½ (<code>unit="px"</code>)</h4>
<ul>
<li>é€‚ç”¨äºç²¾ç¡®å¸ƒå±€ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä½ç½®å’Œå¤§å°éƒ½ä¼šä¹˜ä»¥ç¼©æ”¾æ¯”ä¾‹ã€‚æ¯”å¦‚è®¾ç½® <code>left={100}</code>ï¼Œå½“å±å¹•æ”¾å¤§ 1.5 å€æ—¶ï¼Œå®é™…å·¦è¾¹è·å°±æ˜¯ 150pxã€‚</li>
</ul>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FitContainer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vfit-react'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyDashboard</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">position:</span> '<span class="hljs-attr">relative</span>', <span class="hljs-attr">width:</span> '<span class="hljs-attr">100vw</span>', <span class="hljs-attr">height:</span> '<span class="hljs-attr">100vh</span>', <span class="hljs-attr">overflow:</span> '<span class="hljs-attr">hidden</span>' }}&gt;</span>
      
      {/* åœºæ™¯ Aï¼šç»å¯¹å±…ä¸­ (ä½¿ç”¨ç™¾åˆ†æ¯”) */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FitContainer</span> <span class="hljs-attr">top</span>=<span class="hljs-string">{50}</span> <span class="hljs-attr">left</span>=<span class="hljs-string">{50}</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"%"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">transform:</span> '<span class="hljs-attr">translate</span>(<span class="hljs-attr">-50</span>%, <span class="hljs-attr">-50</span>%)', <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ccc</span>' }}&gt;</span>
          æˆ‘æ˜¯å±…ä¸­çš„æ ‡é¢˜ï¼Œæ— è®ºå±å¹•å¤šå¤§æˆ‘éƒ½å±…ä¸­
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FitContainer</span>&gt;</span>

      {/* åœºæ™¯ Bï¼šå·¦ä¸Šè§’ Logo (ä½¿ç”¨åƒç´ ) */}
      {/* æ— è®ºå±å¹•å¦‚ä½•ç¼©æ”¾ï¼Œæˆ‘è·ç¦»å·¦ä¸Šè§’çš„è§†è§‰è·ç¦»æ¯”ä¾‹ä¿æŒä¸€è‡´ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FitContainer</span> <span class="hljs-attr">top</span>=<span class="hljs-string">{20}</span> <span class="hljs-attr">left</span>=<span class="hljs-string">{20}</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"px"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">200</span>, <span class="hljs-attr">height:</span> <span class="hljs-attr">60</span>, <span class="hljs-attr">background:</span> '<span class="hljs-attr">blue</span>' }}&gt;</span>
          Logo åŒºåŸŸ
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">FitContainer</span>&gt;</span>
      
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-7">ç¬¬ä¸‰æ­¥ï¼šè¿›é˜¶ç”¨æ³• (Hook)</h3>
<p>å¦‚æœä½ éœ€è¦æ‰‹åŠ¨è·å–å½“å‰çš„ç¼©æ”¾æ¯”ä¾‹æ¥åšä¸€äº› canvas ç»˜å›¾ï¼ˆå¦‚ ECharts çš„ resizeï¼‰æˆ–å…¶ä»–é€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨ <code>useFitScale</code>ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useFitScale } <span class="hljs-keyword">from</span> <span class="hljs-string">'vfit-react'</span>
<span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">ScaleDisplay</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> scale = <span class="hljs-title function_">useFitScale</span>()
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰å±å¹•ç¼©æ”¾æ¯”ä¾‹:'</span>, scale)
  }, [scale])
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Current Scale: {scale}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h2 data-id="heading-8">ğŸ“š API é€ŸæŸ¥</h2>
<h3 data-id="heading-9">FitScaleProvider Options</h3>



































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>target</code></td><td><code>string | HTMLElement</code></td><td><code>document.body</code></td><td>ç›‘å¬è°ƒæ•´å¤§å°çš„å®¹å™¨</td></tr><tr><td><code>designHeight</code></td><td><code>number</code></td><td><code>1080</code></td><td>è®¾è®¡ç¨¿é«˜åº¦</td></tr><tr><td><code>designWidth</code></td><td><code>number</code></td><td><code>1920</code></td><td>è®¾è®¡ç¨¿å®½åº¦</td></tr><tr><td><code>scaleMode</code></td><td><code>'height' | 'width' | 'auto'</code></td><td><code>'auto'</code></td><td>ç¼©æ”¾æ¨¡å¼</td></tr></tbody></table>
<h3 data-id="heading-10">FitContainer Props</h3>



































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>top</code>, <code>bottom</code></td><td><code>number</code></td><td>-</td><td>çºµå‘ä½ç½®</td></tr><tr><td><code>left</code>, <code>right</code></td><td><code>number</code></td><td>-</td><td>æ¨ªå‘ä½ç½®</td></tr><tr><td><code>unit</code></td><td><code>'px' | '%'</code></td><td><code>'px'</code></td><td>å®šä½å•ä½</td></tr><tr><td><code>z</code></td><td><code>number</code></td><td><code>300</code></td><td>å±‚çº§ (z-index)</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-11">ğŸ”— é“¾æ¥</h2>
<p>ç›®å‰ <code>vfit-react</code> å·²ç»å‘å¸ƒåˆ° npmï¼Œæ¬¢è¿å¤§å®¶è¯•ç”¨ï¼</p>
<ul>
<li><strong>NPM</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fvfit-react" target="_blank" title="https://www.npmjs.com/package/vfit-react" ref="nofollow noopener noreferrer">www.npmjs.com/package/vfiâ€¦</a></li>
<li><strong>Vue ç‰ˆæœ¬</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fv-plugin%2Fvfit" target="_blank" title="https://github.com/v-plugin/vfit" ref="nofollow noopener noreferrer">github.com/v-plugin/vfâ€¦</a></li>
</ul>
<p>å¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€æˆ–æäº¤ Issueã€‚Happy Coding! ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PyTorchæ¨¡å‹è½»æ¾è¿ç§»æ˜‡è…¾å¹³å°ï¼šBERTä¼˜åŒ–ä¸RoPEè‡ªå®šä¹‰ç®—å­å®æˆ˜]]></title>    <link>https://juejin.cn/post/7579553111472586806</link>    <guid>https://juejin.cn/post/7579553111472586806</guid>    <pubDate>2025-12-04T03:21:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579553111472586806" data-draft-id="7579589262622851091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PyTorchæ¨¡å‹è½»æ¾è¿ç§»æ˜‡è…¾å¹³å°ï¼šBERTä¼˜åŒ–ä¸RoPEè‡ªå®šä¹‰ç®—å­å®æˆ˜"/> <meta itemprop="keywords" content="æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-04T03:21:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŠäº©èŠ±æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/3609043910268030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PyTorchæ¨¡å‹è½»æ¾è¿ç§»æ˜‡è…¾å¹³å°ï¼šBERTä¼˜åŒ–ä¸RoPEè‡ªå®šä¹‰ç®—å­å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3609043910268030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŠäº©èŠ±æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:21:43.000Z" title="Thu Dec 04 2025 03:21:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å…³æ³¨PyTorchä¸æ˜‡è…¾çš„é€‚é…ï¼Ÿ</h2>
<p>PyTorchå› å…¶åŠ¨æ€å›¾å’Œæ˜“ç”¨æ€§å·²æˆä¸ºAIç ”ç©¶ä¸å®è·µçš„ä¸»æµæ¡†æ¶ã€‚ç„¶è€Œï¼Œå°†å…¶æ¨¡å‹é«˜æ•ˆåœ°éƒ¨ç½²åˆ°æ˜‡è…¾è¿™ç±»ä¸“ä¸ºAIè®¡ç®—è®¾è®¡çš„ç¡¬ä»¶ä¸Šï¼Œä»¥è·å¾—æè‡´çš„æ¨ç†ä¸è®­ç»ƒæ€§èƒ½ï¼Œæ˜¯ä¸€ä¸ªå…³é”®è¯¾é¢˜ã€‚ç›´æ¥ä½¿ç”¨æœªç»ä¼˜åŒ–çš„PyTorchæ¨¡å‹åœ¨æ˜‡è…¾NPUä¸Šè¿è¡Œï¼Œå¾€å¾€æ— æ³•å……åˆ†å‘æŒ¥ç¡¬ä»¶æ½œåŠ›ï¼Œç”šè‡³ä¼šé‡åˆ°ç®—å­ä¸æ”¯æŒã€ç²¾åº¦åå·®ç­‰é—®é¢˜ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæ˜‡è…¾CANNæä¾›äº†å®Œå–„çš„PyTorché€‚é…æ¥å£ä¸ç®—å­å¼€å‘æ¡†æ¶ï¼Œå®ç°äº†ä»æ¨¡å‹ç½‘ç»œåˆ°å•ä¸ªç®—å­çš„å…¨æ ˆä¼˜åŒ–ã€‚æœ¬æ–‡å°†ä»¥ä¸€ä¸ªç»å…¸çš„NLPå°æ¨¡å‹â€”â€”<strong>BERT</strong>çš„è¿ç§»ä¼˜åŒ–ï¼Œå’Œä¸€ä¸ªç°ä»£å¤§è¯­è¨€æ¨¡å‹ä¸­çš„å…³é”®ç»„ä»¶â€”â€”<strong>RoPEä½ç½®ç¼–ç ç®—å­</strong>ä¸ºä¾‹ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥å®ŒæˆPyTorchæ¨¡å‹åœ¨æ˜‡è…¾å¹³å°çš„é€‚é…ã€éªŒè¯ä¸æ€§èƒ½æå‡ã€‚</p>
<p><strong>æœ¬æ–‡åŸºäºæ˜‡è…¾æä¾›çš„æŠ€æœ¯ç´ æï¼ˆå«æ…•è¯¾ã€æ•™ç¨‹ï¼‰äºŒæ¬¡åˆ›ä½œï¼Œç´ æåŸç¨¿ç¦æ­¢ç›´æ¥ä¼ æ’­ã€‚</strong></p>
<p>â€œPytorchå°æ¨¡å‹è¿ç§»ä¸ç²¾åº¦è°ƒä¼˜â€çš„ç›¸å…³<strong>æ…•è¯¾</strong>å¦‚ä¸‹ï¼š</p>
<p><strong>æ…•è¯¾</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.hiascend.com%2Fdeveloper%2Fcourses%2Fdetail%2F1983449864584704001" target="_blank" title="https://www.hiascend.com/developer/courses/detail/1983449864584704001" ref="nofollow noopener noreferrer">www.hiascend.com/developer/câ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ce6ec1e8619404398581dc63f7375ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=JqIaw4U4zxmEoxx3LUh0XHIWagI%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">äºŒã€ç¯å¢ƒå‡†å¤‡ï¼šæ­å»ºPyTorch on Ascendå¼€å‘ç¯å¢ƒ</h2>
<p>æœ¬æ¬¡å®è·µæˆ‘ä»¬ä½¿ç”¨GitCode Notebookæä¾›çš„æ˜‡è…¾ç¯å¢ƒï¼Œå…¶é¢„é…ç½®çš„PyTorchä¸CANNç‰ˆæœ¬å…·æœ‰æœ€ä½³çš„å…¼å®¹æ€§ã€‚</p>
<h3 data-id="heading-2">2.1 è¿›å…¥"æˆ‘çš„Notebook"å¹¶åˆ›å»ºä¸€ä¸ªNotebook</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6c1b12749f3490abe45afa94a861f52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=fLKT6puUINQ0hlu8M%2BucPdFq6m0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.2 é€‰æ‹©åŸºç¡€ç¯å¢ƒç‰ˆæœ¬</h3>
<p>åœ¨å¼€å§‹æ˜‡è…¾å¹³å°çš„Pytorchè¿ç§»ä¹‹å‰ï¼Œéœ€è¦éƒ¨ç½²å¥½æ˜‡è…¾åŸºç¡€è½¯ç¡¬ä»¶ç¯å¢ƒã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ç§ç‰ˆæœ¬ç±»å‹ï¼Œä»¥ä¸‹æ˜¯ç¯å¢ƒé…ç½®çš„åŸºæœ¬æƒ…å†µï¼š</p>
<ul>
<li><strong>Notebookè®¡ç®—èµ„æº</strong>ï¼š NPUï¼ˆNPU basic Â· 1 * NPU 910B Â· 32V CPU Â· 64GBï¼‰</li>
<li><strong>å®¹å™¨é•œåƒ</strong>ï¼šeuler2.9-py38-torch2.1.0-cann8.0-openmind0.6-notebookï¼ˆè¯¦ç»†ä»‹ç»å¦‚ä¸‹ï¼‰</li>
<li><strong>å­˜å‚¨å¤§å°</strong>ï¼š50Gï¼ˆé»˜è®¤é€‰é¡¹ï¼Œç”¨äºå­˜æ”¾é¡¹ç›®ä»£ç ã€æ•°æ®é›†ã€è®­ç»ƒæƒé‡ã€å®éªŒç»“æœç­‰ï¼‰</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb1d28e9b9dc46f2bdbc91a3d2565bb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=9Hc8msvger%2BRr9VSU0Kq2sTdcTQ%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œè¯¥è®¡ç®—èµ„æºåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>NPU</strong>ï¼š1å—æ˜‡è…¾910B AIåŠ é€Ÿå¡</li>
<li><strong>CPU</strong>ï¼š32ä¸ªè™šæ‹ŸCPUæ ¸å¿ƒ</li>
<li><strong>å†…å­˜é…ç½®</strong>ï¼š64GBç³»ç»Ÿå†…å­˜</li>
</ul>
<p>è¯¥é•œåƒé¢„è£…äº†å¦‚ä¸‹ç‰ˆæœ¬ï¼š</p>
<ul>
<li><strong>æ“ä½œç³»ç»Ÿ</strong>ï¼š EulerOS 2.9</li>
<li><strong>Pythonç¯å¢ƒ</strong>ï¼šPython 3.8</li>
<li><strong>æ·±åº¦å­¦ä¹ æ¡†æ¶</strong>ï¼šPyTorch 2.1.0</li>
<li><strong>AIè®¡ç®—å¼•æ“</strong>ï¼šCANN 8.0</li>
<li><strong>å¼€å‘å¹³å°</strong>ï¼šOpenMind 0.6</li>
<li><strong>äº¤äº’ç¯å¢ƒ</strong>ï¼šNotebook</li>
</ul>
<h3 data-id="heading-4">2.3 éªŒè¯ç¯å¢ƒ</h3>
<p><strong>éªŒè¯</strong> Pytorch å’Œ NPU ç‰ˆæœ¬æ˜¯å¦å¯ç”¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch_npu
<span class="hljs-built_in">print</span>(<span class="hljs-string">"PyTorch ç‰ˆæœ¬:"</span>, {torch.__version__})
<span class="hljs-built_in">print</span>(<span class="hljs-string">"NPU æ˜¯å¦å¯ç”¨:"</span>, {torch.npu.is_available()})
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯ç”¨ NPU è®¾å¤‡æ•°:"</span>, {torch.npu.device_count()})
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17254f75eff94a57ac2136454b26e768~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=nWgH9%2BZ3pM4oKNQokEJLw7uNLNs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">2.4 å‡†å¤‡ä¸€ä¸ªç²¾ç®€BERTæ¨¡å‹</h3>
<p>ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨Hugging Face <code>transformers</code> åº“ä¸­çš„ä¸€ä¸ªç²¾ç®€ç‰ˆBERTæ¨¡å‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> BertModel, BertConfig

<span class="hljs-comment"># å®šä¹‰ç²¾ç®€BERTé…ç½®</span>
tiny_bert_config = BertConfig(
    vocab_size=<span class="hljs-number">1000</span>,
    hidden_size=<span class="hljs-number">128</span>,
    num_hidden_layers=<span class="hljs-number">4</span>,
    num_attention_heads=<span class="hljs-number">4</span>,
    intermediate_size=<span class="hljs-number">512</span>,
    max_position_embeddings=<span class="hljs-number">128</span>,
)

<span class="hljs-comment"># åˆ›å»ºæ¨¡å‹å®ä¾‹</span>
model = BertModel(tiny_bert_config)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç²¾ç®€BERTæ¨¡å‹å‚æ•°é‡: <span class="hljs-subst">{<span class="hljs-built_in">sum</span>(p.numel() <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> model.parameters())}</span>"</span>)
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼Œå±•ç¤ºäº†è¯¥BERTæ¨¡å‹çš„å‚æ•°é‡ä¸º 954496ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01f32e30df2d44518d62604fcefbdada~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=xh4nfcosufSzX3SGQvZXFYdeQ78%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€<strong>å®æˆ˜ä¸€ï¼šBERTå°æ¨¡å‹è¿ç§»ä¸ç²¾åº¦è°ƒä¼˜</strong></h2>
<h3 data-id="heading-7">3.1 åŸºç¡€è¿ç§»ä¸æ¨ç†æµ‹è¯•</h3>
<p>æœ€ç›´æ¥çš„è¿ç§»æ–¹å¼æ˜¯å°†æ¨¡å‹å’Œè¾“å…¥æ•°æ®ç§»åŠ¨åˆ°NPUè®¾å¤‡ä¸Šã€‚</p>
<p>python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">basic_migration_test</span>():
    <span class="hljs-string">"""åŸºç¡€è¿ç§»æµ‹è¯•"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== BERTæ¨¡å‹åŸºç¡€è¿ç§»æµ‹è¯• ==="</span>)
    
    <span class="hljs-comment"># å°†æ¨¡å‹ç§»è‡³NPU</span>
    device = torch.device(<span class="hljs-string">'npu:0'</span>)
    model_npu = model.to(device)
    
    <span class="hljs-comment"># å‡†å¤‡æµ‹è¯•æ•°æ®</span>
    input_ids = torch.randint(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">32</span>)).to(device)
    attention_mask = torch.ones(<span class="hljs-number">2</span>, <span class="hljs-number">32</span>).to(device)
    
    <span class="hljs-comment"># NPUæ¨ç†</span>
    <span class="hljs-keyword">with</span> torch.no_grad():
        outputs_npu = model_npu(input_ids, attention_mask=attention_mask)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"NPUè¾“å‡ºå½¢çŠ¶: <span class="hljs-subst">{outputs_npu.last_hidden_state.shape}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å‡ºè®¾å¤‡: <span class="hljs-subst">{outputs_npu.last_hidden_state.device}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ“ åŸºç¡€è¿ç§»æµ‹è¯•å®Œæˆ"</span>)
    
    <span class="hljs-keyword">return</span> model_npu, input_ids, attention_mask, outputs_npu

<span class="hljs-comment"># æ‰§è¡ŒåŸºç¡€è¿ç§»</span>
model_npu, input_ids, attention_mask, outputs_npu = basic_migration_test()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6e3703df38347b6b90700fbc440c145~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=cX%2Fa9a59pEP1iMHgFYcEO53Y%2FKQ%3D" alt="" loading="lazy"/></p>
<p><strong>å¯èƒ½é‡åˆ°çš„é—®é¢˜</strong>ï¼šæ­¤æ—¶è¿è¡Œå¯èƒ½ä¸€åˆ‡æ­£å¸¸ï¼Œä½†å½“ä½ å°†NPUçš„è¾“å‡ºä¸CPUè¾“å‡ºå¯¹æ¯”æ—¶ï¼Œå¯èƒ½ä¼šå‘ç°å¾®å°çš„ç²¾åº¦åå·®ã€‚</p>
<h3 data-id="heading-8">3.2 ç²¾åº¦éªŒè¯ä¸åå·®åˆ†æ</h3>
<p>ç²¾ç²¾åº¦æ˜¯æ¨¡å‹è¿ç§»æˆåŠŸçš„å…³é”®æŒ‡æ ‡ï¼Œæˆ‘ä»¬å¿…é¡»ä¸¥æ ¼éªŒè¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">precision_validation</span>():
    <span class="hljs-string">"""ç²¾åº¦éªŒè¯ä¸åå·®åˆ†æ"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ç²¾åº¦éªŒè¯ä¸åå·®åˆ†æ ==="</span>)
    
    <span class="hljs-comment"># CPUåŸºå‡†è¾“å‡º</span>
    model_cpu = model.to(<span class="hljs-string">'cpu'</span>)
    input_ids_cpu = input_ids.cpu()
    attention_mask_cpu = attention_mask.cpu()
    
    <span class="hljs-keyword">with</span> torch.no_grad():
        outputs_cpu = model_cpu(input_ids_cpu, attention_mask=attention_mask_cpu)
    
    <span class="hljs-comment"># å¯¹æ¯”NPUä¸CPUè¾“å‡º</span>
    output_npu_on_cpu = outputs_npu.last_hidden_state.cpu()
    
    <span class="hljs-comment"># è®¡ç®—è¯¯å·®æŒ‡æ ‡</span>
    abs_error = torch.<span class="hljs-built_in">abs</span>(output_npu_on_cpu - outputs_cpu.last_hidden_state)
    rel_error = abs_error / (torch.<span class="hljs-built_in">abs</span>(outputs_cpu.last_hidden_state) + <span class="hljs-number">1e-7</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€å¤§ç»å¯¹è¯¯å·®: <span class="hljs-subst">{abs_error.<span class="hljs-built_in">max</span>().item():<span class="hljs-number">.6</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å‡ç»å¯¹è¯¯å·®: <span class="hljs-subst">{abs_error.mean().item():<span class="hljs-number">.6</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€å¤§ç›¸å¯¹è¯¯å·®: <span class="hljs-subst">{rel_error.<span class="hljs-built_in">max</span>().item():<span class="hljs-number">.6</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å‡ç›¸å¯¹è¯¯å·®: <span class="hljs-subst">{rel_error.mean().item():<span class="hljs-number">.6</span>f}</span>"</span>)
    
    <span class="hljs-comment"># ç²¾åº¦éªŒè¯æ ‡å‡†</span>
    precision_pass = abs_error.<span class="hljs-built_in">max</span>().item() &lt; <span class="hljs-number">1e-4</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç²¾åº¦éªŒè¯: <span class="hljs-subst">{<span class="hljs-string">'âœ“ é€šè¿‡'</span> <span class="hljs-keyword">if</span> precision_pass <span class="hljs-keyword">else</span> <span class="hljs-string">'âœ— å¤±è´¥'</span>}</span>"</span>)
    
    <span class="hljs-keyword">return</span> precision_pass

<span class="hljs-comment"># æ‰§è¡Œç²¾åº¦éªŒè¯</span>
precision_pass = precision_validation()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feee145c1d4c4a44a70c724a7b26c056~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=BAvHan0pwMjVVkiJUq4Wx781ehM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">3.3 æ€§èƒ½ä¼˜åŒ–å¯¹æ¯”</h3>
<p>å¯¹äºBERTè¿™ç±»æ ‡å‡†æ¨¡å‹ï¼Œä½¿ç”¨æ˜‡è…¾æä¾›çš„ä¼˜åŒ–æ¥å£å¯ä»¥ä¸€é”®è·å¾—æ€§èƒ½æå‡ï¼Œé€šå¸¸ä¹Ÿèƒ½æ”¹å–„ç²¾åº¦ä¸€è‡´æ€§ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">performance_benchmark</span>():
    <span class="hljs-string">"""æ€§èƒ½åŸºå‡†æµ‹è¯•"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ€§èƒ½åŸºå‡†æµ‹è¯• ==="</span>)
    
    <span class="hljs-comment"># ç¡®ä¿æ¨¡å‹å®Œå…¨åœ¨NPUä¸Š</span>
    device = torch.device(<span class="hljs-string">'npu:0'</span>)
    model_npu = model.to(device)
    
    <span class="hljs-comment"># æµ‹è¯•æ•°æ® - ä½¿ç”¨æ›´å°çš„å°ºå¯¸é¿å…å†…å­˜é—®é¢˜</span>
    test_input_ids = torch.randint(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">32</span>)).to(device)
    test_attention_mask = torch.ones(<span class="hljs-number">2</span>, <span class="hljs-number">32</span>).to(device)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æµ‹è¯•æ•°æ®å‡†å¤‡å®Œæˆï¼Œå¼€å§‹æ€§èƒ½æµ‹è¯•..."</span>)
    
    <span class="hljs-comment"># æ–¹æ³•1: åŸå§‹æ¨¡å‹æ€§èƒ½</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># Warm-up</span>
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
            <span class="hljs-keyword">with</span> torch.no_grad():
                _ = model_npu(test_input_ids, attention_mask=test_attention_mask)
        torch_npu.npu.synchronize()
        
        <span class="hljs-comment"># æ­£å¼æµ‹è¯•</span>
        torch_npu.npu.synchronize()
        start_time = time.time()
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">30</span>):  <span class="hljs-comment"># å‡å°‘è¿­ä»£æ¬¡æ•°</span>
            <span class="hljs-keyword">with</span> torch.no_grad():
                _ = model_npu(test_input_ids, attention_mask=test_attention_mask)
        torch_npu.npu.synchronize()
        original_time = (time.time() - start_time) / <span class="hljs-number">30</span>
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸå§‹æ¨¡å‹å¹³å‡è€—æ—¶: <span class="hljs-subst">{original_time * <span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸå§‹æ¨¡å‹æµ‹è¯•å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        original_time = <span class="hljs-literal">None</span>
    
    <span class="hljs-comment"># æ–¹æ³•2: ä½¿ç”¨torch_npu.optimizeè¿›è¡Œä¼˜åŒ–</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å°è¯•ä½¿ç”¨torch_npu.optimizeè¿›è¡Œä¼˜åŒ–..."</span>)
        
        <span class="hljs-comment"># ä½¿ç”¨æ˜‡è…¾æä¾›çš„ä¼˜åŒ–æ¥å£</span>
        optimized_model = torch_npu.optimize(
            model_npu, 
            model_inputs=(test_input_ids, {<span class="hljs-string">'attention_mask'</span>: test_attention_mask})
        )
        
        <span class="hljs-comment"># Warm-up</span>
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
            <span class="hljs-keyword">with</span> torch.no_grad():
                _ = optimized_model(test_input_ids, attention_mask=test_attention_mask)
        torch_npu.npu.synchronize()
        
        <span class="hljs-comment"># æ­£å¼æµ‹è¯•</span>
        torch_npu.npu.synchronize()
        start_time = time.time()
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">30</span>):
            <span class="hljs-keyword">with</span> torch.no_grad():
                _ = optimized_model(test_input_ids, attention_mask=test_attention_mask)
        torch_npu.npu.synchronize()
        optimized_time = (time.time() - start_time) / <span class="hljs-number">30</span>
        
        <span class="hljs-keyword">if</span> original_time:
            speedup = original_time / optimized_time
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¼˜åŒ–æ¨¡å‹å¹³å‡è€—æ—¶: <span class="hljs-subst">{optimized_time * <span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€§èƒ½æå‡: <span class="hljs-subst">{speedup:<span class="hljs-number">.2</span>f}</span>x"</span>)
        <span class="hljs-keyword">else</span>:
            speedup = <span class="hljs-literal">None</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¼˜åŒ–æ¨¡å‹å¹³å‡è€—æ—¶: <span class="hljs-subst">{optimized_time * <span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
        
        <span class="hljs-keyword">return</span> original_time, optimized_time, speedup
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¨¡å‹ä¼˜åŒ–å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å°è¯•ä½¿ç”¨ç®€å•çš„JITç¼–è¯‘..."</span>)
        
        <span class="hljs-comment"># å¤‡é€‰æ–¹æ¡ˆ: ä½¿ç”¨torch.jit.trace</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªç¤ºä¾‹è¾“å…¥ç”¨äºtrace</span>
            example_input = (test_input_ids, {<span class="hljs-string">'attention_mask'</span>: test_attention_mask})
            
            <span class="hljs-comment"># ä½¿ç”¨torch.jit.trace</span>
            <span class="hljs-keyword">with</span> torch.no_grad():
                traced_model = torch.jit.trace(model_npu, example_inputs=example_input, check_trace=<span class="hljs-literal">False</span>)
            
            <span class="hljs-comment"># Warm-up</span>
            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
                _ = traced_model(test_input_ids, attention_mask=test_attention_mask)
            torch_npu.npu.synchronize()
            
            <span class="hljs-comment"># æ­£å¼æµ‹è¯•</span>
            torch_npu.npu.synchronize()
            start_time = time.time()
            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">30</span>):
                _ = traced_model(test_input_ids, attention_mask=test_attention_mask)
            torch_npu.npu.synchronize()
            traced_time = (time.time() - start_time) / <span class="hljs-number">30</span>
            
            <span class="hljs-keyword">if</span> original_time:
                speedup = original_time / traced_time
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"JITç¼–è¯‘æ¨¡å‹å¹³å‡è€—æ—¶: <span class="hljs-subst">{traced_time * <span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€§èƒ½æå‡: <span class="hljs-subst">{speedup:<span class="hljs-number">.2</span>f}</span>x"</span>)
            <span class="hljs-keyword">else</span>:
                speedup = <span class="hljs-literal">None</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"JITç¼–è¯‘æ¨¡å‹å¹³å‡è€—æ—¶: <span class="hljs-subst">{traced_time * <span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
            
            <span class="hljs-keyword">return</span> original_time, traced_time, speedup
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> trace_error:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"JITç¼–è¯‘ä¹Ÿå¤±è´¥: <span class="hljs-subst">{trace_error}</span>"</span>)
            <span class="hljs-keyword">return</span> original_time, <span class="hljs-literal">None</span>, <span class="hljs-number">1.0</span>

<span class="hljs-comment"># æ‰§è¡Œä¿®å¤åçš„æ€§èƒ½æµ‹è¯•</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œæ€§èƒ½æµ‹è¯•..."</span>)
original_time, optimized_time, speedup = performance_benchmark()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc3978f935464bcd8600a179545a5745~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=7EXvRbEmP46TPmwwSaKrx7lgm1c%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">å››ã€å®æˆ˜äºŒï¼šè‡ªå®šä¹‰RoPEä½ç½®ç¼–ç ç®—å­å¼€å‘</h2>
<h3 data-id="heading-11">4.1 RoPEåŸç†ä¸Pythonå®ç°</h3>
<p>RoPEé€šè¿‡æ—‹è½¬çŸ©é˜µå°†ä½ç½®ä¿¡æ¯ç¼–ç åˆ°æ³¨æ„åŠ›æœºåˆ¶ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> math

<span class="hljs-keyword">def</span> <span class="hljs-title function_">precompute_freqs_cis</span>(<span class="hljs-params">dim: <span class="hljs-built_in">int</span>, end: <span class="hljs-built_in">int</span>, theta: <span class="hljs-built_in">float</span> = <span class="hljs-number">10000.0</span></span>):
    <span class="hljs-string">"""
    é¢„è®¡ç®—RoPEé¢‘ç‡çŸ©é˜µ
    Args:
        dim: å¤´ç»´åº¦
        end: åºåˆ—é•¿åº¦  
        theta: åŸºæ•°
    """</span>
    freqs = <span class="hljs-number">1.0</span> / (theta ** (torch.arange(<span class="hljs-number">0</span>, dim, <span class="hljs-number">2</span>)[: (dim // <span class="hljs-number">2</span>)].<span class="hljs-built_in">float</span>() / dim))
    t = torch.arange(end, device=freqs.device)
    freqs = torch.outer(t, freqs)
    freqs_cis = torch.polar(torch.ones_like(freqs), freqs)
    <span class="hljs-keyword">return</span> freqs_cis

<span class="hljs-keyword">def</span> <span class="hljs-title function_">rope_native</span>(<span class="hljs-params">x: torch.Tensor, freqs_cis: torch.Tensor</span>):
    <span class="hljs-string">"""
    åŸç”ŸRoPEå®ç°
    Args:
        x: è¾“å…¥å¼ é‡ [batch, seq_len, num_heads, head_dim]
        freqs_cis: é¢‘ç‡çŸ©é˜µ [seq_len, head_dim//2]
    """</span>
    x_ = x.<span class="hljs-built_in">float</span>().reshape(*x.shape[:-<span class="hljs-number">1</span>], -<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
    x_ = torch.view_as_complex(x_)

    <span class="hljs-comment"># åº”ç”¨æ—‹è½¬</span>
    freqs_cis = freqs_cis.reshape(<span class="hljs-number">1</span>, x_.shape[<span class="hljs-number">1</span>], <span class="hljs-number">1</span>, x_.shape[-<span class="hljs-number">1</span>])
    x_out = torch.view_as_real(x_ * freqs_cis)

    <span class="hljs-keyword">return</span> x_out.flatten(<span class="hljs-number">3</span>).type_as(x)
</code></pre>
<h3 data-id="heading-12">4.2 æ˜‡è…¾NPUç®—å­å®ç°</h3>
<p>åŸºäºPyTorchè‡ªå®šä¹‰ç®—å­æœºåˆ¶å®ç°NPUä¼˜åŒ–ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RoPENpuFunction</span>(torch.autograd.Function):
    <span class="hljs-string">"""RoPEçš„NPUä¼˜åŒ–å®ç°"""</span>

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">ctx, x, freqs_cis</span>):
        <span class="hljs-comment"># ä¿å­˜ä¸­é—´ç»“æœç”¨äºåå‘ä¼ æ’­</span>
        ctx.save_for_backward(x, freqs_cis)

        <span class="hljs-comment"># å°†è¾“å…¥reshapeä¸º [batch, seq_len, num_heads, head_dim//2, 2]</span>
        x_reshaped = x.view(*x.shape[:-<span class="hljs-number">1</span>], -<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
        x1, x2 = x_reshaped[..., <span class="hljs-number">0</span>], x_reshaped[..., <span class="hljs-number">1</span>]

        <span class="hljs-comment"># ä»å¤æ•°é¢‘ç‡ä¸­æå–coså’Œsin</span>
        freqs_cos = torch.view_as_real(freqs_cis)[..., <span class="hljs-number">0</span>]
        freqs_sin = torch.view_as_real(freqs_cis)[..., <span class="hljs-number">1</span>]

        <span class="hljs-comment"># è°ƒæ•´ç»´åº¦ç”¨äºå¹¿æ’­</span>
        freqs_cos = freqs_cos.view(<span class="hljs-number">1</span>, freqs_cos.shape[<span class="hljs-number">0</span>], <span class="hljs-number">1</span>, freqs_cos.shape[<span class="hljs-number">1</span>])
        freqs_sin = freqs_sin.view(<span class="hljs-number">1</span>, freqs_sin.shape[<span class="hljs-number">0</span>], <span class="hljs-number">1</span>, freqs_sin.shape[<span class="hljs-number">1</span>])

        <span class="hljs-comment"># RoPEæ—‹è½¬å…¬å¼çš„çŸ©é˜µå½¢å¼</span>
        out1 = x1 * freqs_cos - x2 * freqs_sin
        out2 = x1 * freqs_sin + x2 * freqs_cos

        <span class="hljs-comment"># åˆå¹¶ç»“æœ</span>
        output = torch.stack([out1, out2], dim=-<span class="hljs-number">1</span>)
        <span class="hljs-keyword">return</span> output.flatten(<span class="hljs-number">3</span>)

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">backward</span>(<span class="hljs-params">ctx, grad_output</span>):
        x, freqs_cis = ctx.saved_tensors

        <span class="hljs-comment"># é‡æ–°è®¡ç®—å‰å‘ä¼ æ’­çš„reshape</span>
        grad_reshaped = grad_output.view(*grad_output.shape[:-<span class="hljs-number">1</span>], -<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
        grad1, grad2 = grad_reshaped[..., <span class="hljs-number">0</span>], grad_reshaped[..., <span class="hljs-number">1</span>]

        x_reshaped = x.view(*x.shape[:-<span class="hljs-number">1</span>], -<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
        x1, x2 = x_reshaped[..., <span class="hljs-number">0</span>], x_reshaped[..., <span class="hljs-number">1</span>]

        <span class="hljs-comment"># æå–coså’Œsin</span>
        freqs_cos = torch.view_as_real(freqs_cis)[..., <span class="hljs-number">0</span>]
        freqs_sin = torch.view_as_real(freqs_cis)[..., <span class="hljs-number">1</span>]
        freqs_cos = freqs_cos.view(<span class="hljs-number">1</span>, freqs_cos.shape[<span class="hljs-number">0</span>], <span class="hljs-number">1</span>, freqs_cos.shape[<span class="hljs-number">1</span>])
        freqs_sin = freqs_sin.view(<span class="hljs-number">1</span>, freqs_sin.shape[<span class="hljs-number">0</span>], <span class="hljs-number">1</span>, freqs_sin.shape[<span class="hljs-number">1</span>])

        <span class="hljs-comment"># åå‘ä¼ æ’­æ¢¯åº¦è®¡ç®—</span>
        grad_x1 = grad1 * freqs_cos + grad2 * freqs_sin
        grad_x2 = -grad1 * freqs_sin + grad2 * freqs_cos

        grad_input = torch.stack([grad_x1, grad_x2], dim=-<span class="hljs-number">1</span>).flatten(<span class="hljs-number">3</span>)

        <span class="hljs-keyword">return</span> grad_input, <span class="hljs-literal">None</span>  <span class="hljs-comment"># é¢‘ç‡çŸ©é˜µä¸éœ€è¦æ¢¯åº¦</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">rope_npu</span>(<span class="hljs-params">x, freqs_cis</span>):
    <span class="hljs-string">"""é¢å‘ç”¨æˆ·çš„NPU RoPEç®—å­æ¥å£"""</span>
    <span class="hljs-keyword">return</span> RoPENpuFunction.apply(x, freqs_cis)
</code></pre>
<h3 data-id="heading-13">4.3 åŠŸèƒ½æ­£ç¡®æ€§éªŒè¯</h3>
<p>éªŒè¯è‡ªå®šä¹‰ç®—å­çš„æ•°å€¼æ­£ç¡®æ€§ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">test_rope_correctness</span>():
    <span class="hljs-string">"""æµ‹è¯•RoPEç®—å­æ­£ç¡®æ€§"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== RoPEç®—å­æ­£ç¡®æ€§æµ‹è¯• ==="</span>)

    <span class="hljs-comment"># æµ‹è¯•å‚æ•°</span>
    batch_size, seq_len, num_heads, head_dim = <span class="hljs-number">2</span>, <span class="hljs-number">128</span>, <span class="hljs-number">8</span>, <span class="hljs-number">64</span>

    <span class="hljs-comment"># ç”Ÿæˆæµ‹è¯•æ•°æ®</span>
    x_cpu = torch.randn(batch_size, seq_len, num_heads, head_dim, requires_grad=<span class="hljs-literal">True</span>)
    x_npu = x_cpu.detach().clone().npu().requires_grad_()

    <span class="hljs-comment"># é¢„è®¡ç®—é¢‘ç‡çŸ©é˜µ</span>
    freqs_cis_cpu = precompute_freqs_cis(head_dim, seq_len)
    freqs_cis_npu = freqs_cis_cpu.npu()

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å…¥å½¢çŠ¶: <span class="hljs-subst">{x_cpu.shape}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é¢‘ç‡çŸ©é˜µå½¢çŠ¶: <span class="hljs-subst">{freqs_cis_cpu.shape}</span>"</span>)

    <span class="hljs-comment"># åˆ†åˆ«è¿è¡ŒåŸç”Ÿå’ŒNPUå®ç°</span>
    y_native = rope_native(x_cpu, freqs_cis_cpu)
    y_npu = rope_npu(x_npu, freqs_cis_npu)

    <span class="hljs-comment"># å‰å‘ä¼ æ’­å¯¹æ¯”</span>
    y_npu_cpu = y_npu.cpu()
    forward_diff = torch.<span class="hljs-built_in">max</span>(torch.<span class="hljs-built_in">abs</span>(y_native - y_npu_cpu)).item()
    forward_mean_diff = torch.mean(torch.<span class="hljs-built_in">abs</span>(y_native - y_npu_cpu)).item()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‰å‘ä¼ æ’­ - æœ€å¤§å·®å¼‚: <span class="hljs-subst">{forward_diff:<span class="hljs-number">.8</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‰å‘ä¼ æ’­ - å¹³å‡å·®å¼‚: <span class="hljs-subst">{forward_mean_diff:<span class="hljs-number">.8</span>f}</span>"</span>)

    <span class="hljs-comment"># åå‘ä¼ æ’­å¯¹æ¯”</span>
    y_native.<span class="hljs-built_in">sum</span>().backward()
    y_npu.<span class="hljs-built_in">sum</span>().backward()

    grad_native = x_cpu.grad
    grad_npu = x_npu.grad.cpu()
    backward_diff = torch.<span class="hljs-built_in">max</span>(torch.<span class="hljs-built_in">abs</span>(grad_native - grad_npu)).item()
    backward_mean_diff = torch.mean(torch.<span class="hljs-built_in">abs</span>(grad_native - grad_npu)).item()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åå‘ä¼ æ’­ - æœ€å¤§å·®å¼‚: <span class="hljs-subst">{backward_diff:<span class="hljs-number">.8</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åå‘ä¼ æ’­ - å¹³å‡å·®å¼‚: <span class="hljs-subst">{backward_mean_diff:<span class="hljs-number">.8</span>f}</span>"</span>)

    <span class="hljs-comment"># éªŒè¯æ ‡å‡†</span>
    forward_pass = forward_diff &lt; <span class="hljs-number">1e-5</span>
    backward_pass = backward_diff &lt; <span class="hljs-number">1e-5</span>

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‰å‘ä¼ æ’­éªŒè¯: <span class="hljs-subst">{<span class="hljs-string">'âœ“ é€šè¿‡'</span> <span class="hljs-keyword">if</span> forward_pass <span class="hljs-keyword">else</span> <span class="hljs-string">'âœ— å¤±è´¥'</span>}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åå‘ä¼ æ’­éªŒè¯: <span class="hljs-subst">{<span class="hljs-string">'âœ“ é€šè¿‡'</span> <span class="hljs-keyword">if</span> backward_pass <span class="hljs-keyword">else</span> <span class="hljs-string">'âœ— å¤±è´¥'</span>}</span>"</span>)

    <span class="hljs-keyword">return</span> forward_pass <span class="hljs-keyword">and</span> backward_pass

<span class="hljs-comment"># æ‰§è¡Œæ­£ç¡®æ€§æµ‹è¯•</span>
rope_correctness = test_rope_correctness()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e117520ed0549aba56ce0674d5d8dd3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=4BHCqrZcFmlnKTC8ceyd0VDuSp0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">4.4 æ€§èƒ½åŸºå‡†æµ‹è¯•</h3>
<p>æµ‹è¯•è‡ªå®šä¹‰ç®—å­çš„æ€§èƒ½è¡¨ç°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">benchmark_rope_performance</span>():
    <span class="hljs-string">"""RoPEç®—å­æ€§èƒ½æµ‹è¯•"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== RoPEç®—å­æ€§èƒ½æµ‹è¯• ==="</span>)

    <span class="hljs-comment"># å¤§å°ºå¯¸æ€§èƒ½æµ‹è¯•</span>
    batch_size, seq_len, num_heads, head_dim = <span class="hljs-number">4</span>, <span class="hljs-number">2048</span>, <span class="hljs-number">16</span>, <span class="hljs-number">128</span>
    x_large_npu = torch.randn(batch_size, seq_len, num_heads, head_dim).npu()
    freqs_cis_npu = precompute_freqs_cis(head_dim, seq_len).npu()

    <span class="hljs-comment"># NPUå®ç°æ€§èƒ½</span>
    torch_npu.npu.synchronize()

    <span class="hljs-comment"># Warm-up</span>
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>):
        _ = rope_npu(x_large_npu, freqs_cis_npu)
    torch_npu.npu.synchronize()

    <span class="hljs-comment"># æ­£å¼æµ‹è¯•</span>
    start_time = time.time()
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):
        _ = rope_npu(x_large_npu, freqs_cis_npu)
    torch_npu.npu.synchronize()
    npu_time = (time.time() - start_time) / <span class="hljs-number">100</span>

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å…¥å°ºå¯¸: <span class="hljs-subst">{x_large_npu.shape}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"NPU RoPEå¹³å‡è€—æ—¶: <span class="hljs-subst">{npu_time * <span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)

    <span class="hljs-comment"># åŸç”Ÿå®ç°æ€§èƒ½å¯¹æ¯”ï¼ˆåœ¨CPUä¸Šï¼‰</span>
    x_large_cpu = x_large_npu.cpu()
    freqs_cis_cpu = freqs_cis_npu.cpu()

    start_time = time.time()
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):  <span class="hljs-comment"># å‡å°‘æ¬¡æ•°ï¼Œå› ä¸ºCPUè¾ƒæ…¢</span>
        _ = rope_native(x_large_cpu, freqs_cis_cpu)
    native_time = (time.time() - start_time) / <span class="hljs-number">10</span>

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸç”ŸRoPEå¹³å‡è€—æ—¶: <span class="hljs-subst">{native_time * <span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)

    <span class="hljs-keyword">if</span> native_time &gt; <span class="hljs-number">0</span>:
        speedup = native_time / npu_time
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"NPUç›¸å¯¹æ€§èƒ½æå‡: <span class="hljs-subst">{speedup:<span class="hljs-number">.2</span>f}</span>x"</span>)

    <span class="hljs-keyword">return</span> npu_time

<span class="hljs-comment"># æ‰§è¡Œæ€§èƒ½æµ‹è¯•</span>
rope_npu_time = benchmark_rope_performance()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48e979303cb34753b554199f4eb38a05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=SIOlDz3%2BnQ4IE0xogeyYbTU3xek%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">4.5 å®é™…åº”ç”¨é›†æˆ</h3>
<p>å°†è‡ªå®šä¹‰ç®—å­é›†æˆåˆ°å®Œæ•´çš„æ³¨æ„åŠ›å±‚ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AttentionWithRoPE</span>(torch.nn.Module):
    <span class="hljs-string">"""é›†æˆè‡ªå®šä¹‰RoPEç®—å­çš„æ³¨æ„åŠ›å±‚"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, hidden_size, num_heads, max_seq_len=<span class="hljs-number">2048</span></span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.num_heads = num_heads
        self.head_dim = hidden_size // num_heads
        <span class="hljs-keyword">assert</span> hidden_size % num_heads == <span class="hljs-number">0</span>

        <span class="hljs-comment"># é¢„è®¡ç®—é¢‘ç‡çŸ©é˜µ</span>
        self.register_buffer(
            <span class="hljs-string">'freqs_cis'</span>, 
            precompute_freqs_cis(self.head_dim, max_seq_len)
        )

        <span class="hljs-comment"># æ³¨æ„åŠ›æŠ•å½±å±‚</span>
        self.q_proj = torch.nn.Linear(hidden_size, hidden_size)
        self.k_proj = torch.nn.Linear(hidden_size, hidden_size)
        self.v_proj = torch.nn.Linear(hidden_size, hidden_size)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        batch_size, seq_len, hidden_size = x.shape

        <span class="hljs-comment"># çº¿æ€§æŠ•å½±</span>
        q = self.q_proj(x).view(batch_size, seq_len, self.num_heads, self.head_dim)
        k = self.k_proj(x).view(batch_size, seq_len, self.num_heads, self.head_dim)
        v = self.v_proj(x).view(batch_size, seq_len, self.num_heads, self.head_dim)

        <span class="hljs-comment"># åº”ç”¨RoPEä½ç½®ç¼–ç </span>
        q = rope_npu(q, self.freqs_cis[:seq_len])
        k = rope_npu(k, self.freqs_cis[:seq_len])

        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ RoPEæ³¨æ„åŠ›å±‚å‰å‘ä¼ æ’­å®Œæˆ"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  Qå½¢çŠ¶: <span class="hljs-subst">{q.shape}</span>, Kå½¢çŠ¶: <span class="hljs-subst">{k.shape}</span>"</span>)

        <span class="hljs-keyword">return</span> q, k, v

<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_integrated_attention</span>():
    <span class="hljs-string">"""æµ‹è¯•é›†æˆRoPEçš„æ³¨æ„åŠ›å±‚"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== é›†æˆRoPEæ³¨æ„åŠ›å±‚æµ‹è¯• ==="</span>)

    hidden_size, num_heads, seq_len = <span class="hljs-number">768</span>, <span class="hljs-number">12</span>, <span class="hljs-number">256</span>
    batch_size = <span class="hljs-number">2</span>

    <span class="hljs-comment"># åˆ›å»ºæ³¨æ„åŠ›å±‚å¹¶ç§»è‡³NPU</span>
    attention = AttentionWithRoPE(hidden_size, num_heads)
    attention = attention.npu()

    <span class="hljs-comment"># æ¨¡æ‹Ÿè¾“å…¥</span>
    x = torch.randn(batch_size, seq_len, hidden_size).npu()

    <span class="hljs-comment"># å‰å‘ä¼ æ’­</span>
    q, k, v = attention(x)

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ“ é›†æˆæµ‹è¯•å®Œæˆ"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å‡ºQè®¾å¤‡: <span class="hljs-subst">{q.device}</span>"</span>)

    <span class="hljs-keyword">return</span> q <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> k <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># æ‰§è¡Œé›†æˆæµ‹è¯•</span>
integration_success = test_integrated_attention()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceb0186c2fc44acf92e88042f3e7f5c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=L3YPHDpA4KqYEyC32%2FZ%2BZBO4CtY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-16">äº”ã€å®Œæ•´ç»“æœåˆ†æä¸æ€»ç»“</h2>
<h3 data-id="heading-17">5.1 ç»“æœæ±‡æ€»å±•ç¤º</h3>
<p>æ‰“å°ä¸¤ä¸ªå®æˆ˜çš„å®Œæ•´ç»“æœï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_final_results</span>():
    <span class="hljs-string">"""æ‰“å°æœ€ç»ˆç»“æœæ±‡æ€»"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">60</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"PyTorchæ˜‡è…¾é€‚é…å®æˆ˜å®Œæ•´ç»“æœæ±‡æ€»"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>*<span class="hljs-number">60</span>)

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“Š BERTæ¨¡å‹è¿ç§»ç»“æœ:"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  â€¢ åŸºç¡€è¿ç§»: âœ“ å®Œæˆ"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  â€¢ ç²¾åº¦éªŒè¯: <span class="hljs-subst">{<span class="hljs-string">'âœ“ é€šè¿‡'</span> <span class="hljs-keyword">if</span> precision_pass <span class="hljs-keyword">else</span> <span class="hljs-string">'âœ— å¤±è´¥'</span>}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  â€¢ åŸå§‹æ€§èƒ½: <span class="hljs-subst">{original_time * <span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
    <span class="hljs-keyword">if</span> optimized_time:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  â€¢ ä¼˜åŒ–æ€§èƒ½: <span class="hljs-subst">{optimized_time * <span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  â€¢ æ€§èƒ½æå‡: <span class="hljs-subst">{speedup:<span class="hljs-number">.2</span>f}</span>x"</span>)

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸš€ RoPEç®—å­å¼€å‘ç»“æœ:"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  â€¢ åŠŸèƒ½æ­£ç¡®æ€§: <span class="hljs-subst">{<span class="hljs-string">'âœ“ é€šè¿‡'</span> <span class="hljs-keyword">if</span> rope_correctness <span class="hljs-keyword">else</span> <span class="hljs-string">'âœ— å¤±è´¥'</span>}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  â€¢ NPUæ€§èƒ½: <span class="hljs-subst">{rope_npu_time * <span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span> ms"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  â€¢ é›†æˆæµ‹è¯•: <span class="hljs-subst">{<span class="hljs-string">'âœ“ æˆåŠŸ'</span> <span class="hljs-keyword">if</span> integration_success <span class="hljs-keyword">else</span> <span class="hljs-string">'âœ— å¤±è´¥'</span>}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  â€¢ åº”ç”¨ä»·å€¼: ç°ä»£LLMæ ¸å¿ƒç»„ä»¶"</span>)

print_final_results()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34286c93b5da47b7bc057cf1c31eb2be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K5Lqp6Iqx5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765423302&amp;x-signature=YqzmNOv9umkSLNIcvH04XswDaVY%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-python" lang="python">============================================================
PyTorchæ˜‡è…¾é€‚é…å®æˆ˜å®Œæ•´ç»“æœæ±‡æ€»
============================================================

ğŸ“Š BERTæ¨¡å‹è¿ç§»ç»“æœ:
â€¢ åŸºç¡€è¿ç§»: âœ“ å®Œæˆ
â€¢ ç²¾åº¦éªŒè¯: âœ— å¤±è´¥
â€¢ åŸå§‹æ€§èƒ½: <span class="hljs-number">6.27</span> ms

ğŸš€ RoPEç®—å­å¼€å‘ç»“æœ:
â€¢ åŠŸèƒ½æ­£ç¡®æ€§: âœ“ é€šè¿‡
â€¢ NPUæ€§èƒ½: <span class="hljs-number">0.78</span> ms
â€¢ é›†æˆæµ‹è¯•: âœ“ æˆåŠŸ
â€¢ åº”ç”¨ä»·å€¼: ç°ä»£LLMæ ¸å¿ƒç»„ä»¶
</code></pre>
<h3 data-id="heading-18">5.2 ä¸¤ä¸ªå®æˆ˜çš„ç»“æœåˆ†æ</h3>
<p>ä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹å‡ºä¸¤ä¸ªå®æˆ˜æ¡ˆä¾‹å‘ˆç°å‡ºä¸åŒçš„è¡¨ç°ï¼Œè¿™åæ˜ äº†æ˜‡è…¾å¹³å°åœ¨ä¸åŒåœºæ™¯ä¸‹çš„é€‚é…ç‰¹ç‚¹ï¼š</p>
<h4 data-id="heading-19">5.2.1 BERTæ¨¡å‹è¿ç§»åˆ†æï¼šç²¾åº¦é—®é¢˜è¯Šæ–­</h4>
<p>ç²¾åº¦éªŒè¯å¤±è´¥çš„å¯èƒ½åŸå› æœ‰å¦‚ä¸‹ï¼š</p>

























<table><thead><tr><th><strong>åå·®åŸå› </strong></th><th><strong>æ’æŸ¥æ–¹æ³•</strong></th></tr></thead><tbody><tr><td>ç®—å­å®ç°å·®å¼‚</td><td>NPUä¸CPUçš„åº•å±‚ç®—å­å®ç°å­˜åœ¨æ•°å€¼å·®å¼‚</td></tr><tr><td>æ•°æ®é¢„å¤„ç†ä¸ä¸€è‡´</td><td>è¾“å…¥æ•°æ®çš„å½’ä¸€åŒ–æˆ–é¢„å¤„ç†æµç¨‹ä¸åŒ¹é…</td></tr><tr><td>æ··åˆç²¾åº¦è®¡ç®—</td><td>FP16ä¸FP32è®¡ç®—çš„ç´¯ç§¯è¯¯å·®</td></tr><tr><td>æ¨¡å‹æƒé‡åˆå§‹åŒ–</td><td>æ¨¡å‹è¿ç§»è¿‡ç¨‹ä¸­çš„æƒé‡ç²¾åº¦æŸå¤±</td></tr></tbody></table>
<p>å…·ä½“æ”¹è¿›å»ºè®®ï¼š</p>
<ul>
<li><strong>é€å±‚ç²¾åº¦å¯¹æ¯”</strong>ï¼šé€šè¿‡hookæœºåˆ¶é€å±‚å¯¹æ¯”NPUä¸CPUçš„è¾“å‡º</li>
<li><strong>ç²¾åº¦å®¹å¿åº¦è°ƒæ•´</strong>ï¼šæ ¹æ®åº”ç”¨åœºæ™¯è°ƒæ•´ç²¾åº¦éªŒè¯æ ‡å‡†</li>
<li><strong>æ··åˆç²¾åº¦è®­ç»ƒ</strong>ï¼šä½¿ç”¨<code>torch_npu.npu.set_amp_format</code>æ§åˆ¶è®¡ç®—ç²¾åº¦</li>
</ul>
<h4 data-id="heading-20">5.2.2 RoPEç®—å­å¼€å‘æˆåŠŸçš„å…³é”®å› ç´ </h4>
<p>ä¸ºä»€ä¹ˆRoPEç®—å­è¡¨ç°ä¼˜å¼‚ï¼š</p>

























<table><thead><tr><th><strong>æˆåŠŸå› ç´ </strong></th><th><strong>å…·ä½“è§£é‡Š</strong></th></tr></thead><tbody><tr><td>ç®—æ³•ç¡®å®šæ€§</td><td>RoPEåŸºäºç¡®å®šçš„æ•°å­¦å…¬å¼ï¼Œæ— éšæœºæ€§</td></tr><tr><td>çŸ©é˜µè¿ç®—ä¼˜åŒ–</td><td>å……åˆ†åˆ©ç”¨NPUçš„çŸ©é˜µè®¡ç®—èƒ½åŠ›</td></tr><tr><td>å†…å­˜è®¿é—®ä¼˜åŒ–</td><td>è¿ç»­å†…å­˜å¸ƒå±€å‡å°‘æ•°æ®æ¬è¿å¼€é”€</td></tr><tr><td>è®¡ç®—å¯†åº¦é«˜</td><td>é€‚åˆNPUçš„å¹¶è¡Œæ¶æ„</td></tr></tbody></table>
<p>æ€§èƒ½æ•°æ®äº®ç‚¹ï¼š</p>
<ul>
<li><strong>NPUæ€§èƒ½ï¼š0.78ms</strong> â†’ åœ¨å¤§å°ºå¯¸è¾“å…¥ä¸‹ä»ä¿æŒä¼˜å¼‚æ€§èƒ½</li>
<li><strong>åŠŸèƒ½æ­£ç¡®æ€§é€šè¿‡</strong> â†’ å‰å‘å’Œåå‘ä¼ æ’­å‡éªŒè¯é€šè¿‡</li>
<li><strong>é›†æˆæµ‹è¯•æˆåŠŸ</strong> â†’ åœ¨å®é™…çš„æ³¨æ„åŠ›æœºåˆ¶ä¸­è¿è¡Œç¨³å®š</li>
</ul>
<h4 data-id="heading-21">5.2.3 æ€§èƒ½è¡¨ç°å¯¹æ¯”</h4>
<p><strong>ï¼ˆ1ï¼‰BERTæ¨¡å‹æ€§èƒ½åˆ†æ</strong></p>
<ul>
<li><strong>åŸå§‹æ€§èƒ½ï¼š6.27ms</strong> - å¯¹äºå°å‹BERTæ¨¡å‹æ¥è¯´æ˜¯å¯æ¥å—çš„æ¨ç†å»¶è¿Ÿ</li>
<li><strong>ç²¾åº¦é—®é¢˜</strong>å¯èƒ½æ˜¯ç”±äºæ¨¡å‹å¤æ‚åº¦å’Œç®—å­é€‚é…çš„æŒ‘æˆ˜</li>
</ul>
<p><strong>ï¼ˆ2ï¼‰RoPEç®—å­æ€§èƒ½ä¼˜åŠ¿</strong></p>
<ul>
<li><strong>0.78ms</strong>çš„ä¼˜å¼‚è¡¨ç°è¯æ˜äº†è‡ªå®šä¹‰ç®—å­åœ¨NPUä¸Šçš„å·¨å¤§æ½œåŠ›</li>
<li>ç›¸æ¯”ä¼ ç»Ÿä½ç½®ç¼–ç æ–¹æ³•ï¼ŒRoPEåœ¨NPUä¸Šèƒ½å¤Ÿè·å¾—æ›´å¥½çš„æ€§èƒ½</li>
</ul>
<h3 data-id="heading-22">5.3 æ”¶è·ä¸æ€»ç»“</h3>
<p>åŸºäºä»¥ä¸Šç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹é‡è¦ç»“è®ºï¼š</p>
<ol>
<li><strong>è‡ªå®šä¹‰ç®—å­ä¼˜åŠ¿æ˜æ˜¾ï¼š</strong> é’ˆå¯¹ç‰¹å®šç®—æ³•ä¼˜åŒ–çš„è‡ªå®šä¹‰ç®—å­æ€§èƒ½ä¼˜å¼‚ï¼›åŠŸèƒ½æ­£ç¡®æ€§å®¹æ˜“ä¿è¯ï¼Œè°ƒè¯•ç›¸å¯¹ç®€å•</li>
<li><strong>å¤æ‚æ¨¡å‹è¿ç§»éœ€è¦ç²¾ç»†è°ƒä¼˜ï¼š</strong> BERTç­‰å¤æ‚æ¨¡å‹éœ€è¦é€å±‚ç²¾åº¦éªŒè¯ï¼›å»ºè®®é‡‡ç”¨æ¸è¿›å¼è¿ç§»ç­–ç•¥</li>
<li><strong>æ˜‡è…¾å¹³å°é€‚é…å»ºè®®ï¼š</strong></li>
</ol>





















<table><thead><tr><th><strong>è¿ç§»ä¼˜å…ˆçº§</strong></th><th><strong>å…·ä½“è§£é‡Š</strong></th></tr></thead><tbody><tr><td>é«˜ä¼˜å…ˆçº§</td><td>è‡ªå®šä¹‰ç®—å­ã€è®¡ç®—å¯†é›†å‹æ“ä½œã€çŸ©é˜µè¿ç®—</td></tr><tr><td>ä¸­ä¼˜å…ˆçº§</td><td>æ ‡å‡†æ¨¡å‹æ¨ç†ã€è®­ç»ƒæµç¨‹</td></tr><tr><td>ä½ä¼˜å…ˆçº§</td><td>å¤æ‚åŠ¨æ€å›¾æ¨¡å‹ã€å¼ºä¾èµ–CPUçš„æ“ä½œ</td></tr></tbody></table>
<p>é€šè¿‡è¿™ä¸¤ä¸ªå®Œæ•´çš„å®æˆ˜ï¼Œæˆ‘ä»¬å…¨é¢éªŒè¯äº†æ˜‡è…¾å¹³å°åœ¨PyTorchç”Ÿæ€ä¸­çš„æ ¸å¿ƒä¼˜åŠ¿ï¼šå¼€å‘è€…ä»…éœ€ç®€å•ä¿®æ”¹è®¾å¤‡æŒ‡å®šå³å¯å®Œæˆæ¨¡å‹çš„åŸºç¡€è¿ç§»ï¼Œåœ¨å®Œå–„çš„ç²¾åº¦ä¿éšœä½“ç³»æ”¯æ’‘ä¸‹èƒ½å¤Ÿå¿«é€Ÿå®šä½å’Œè§£å†³ç²¾åº¦åå·®é—®é¢˜ï¼ŒåŒæ—¶åŸºäºæ ‡å‡†åŒ–çš„è‡ªå®šä¹‰ç®—å­æ¥å£å¯ä»¥é«˜æ•ˆå¼€å‘å‡ºæ€§èƒ½ä¼˜å¼‚çš„æ ¸å¿ƒç®—å­ï¼Œæœ€ç»ˆåœ¨å¤§æ¨¡å‹åœºæ™¯ä¸­å®ç°æ˜¾è‘—çš„ç«¯åˆ°ç«¯åŠ é€Ÿæ•ˆæœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç°åœ¨ä¸Šçº¿ä¸ªå°ç¨‹åºè¿™ä¹ˆéº»çƒ¦å—ï¼Ÿï¼]]></title>    <link>https://juejin.cn/post/7579544295344963635</link>    <guid>https://juejin.cn/post/7579544295344963635</guid>    <pubDate>2025-12-04T03:40:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579544295344963635" data-draft-id="7579544295344881715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç°åœ¨ä¸Šçº¿ä¸ªå°ç¨‹åºè¿™ä¹ˆéº»çƒ¦å—ï¼Ÿï¼"/> <meta itemprop="keywords" content="å¾®ä¿¡å°ç¨‹åº,ç¨‹åºå‘˜,AIGC"/> <meta itemprop="datePublished" content="2025-12-04T03:40:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é±¼çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2444938365386621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç°åœ¨ä¸Šçº¿ä¸ªå°ç¨‹åºè¿™ä¹ˆéº»çƒ¦å—ï¼Ÿï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2444938365386621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é±¼çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:40:11.000Z" title="Thu Dec 04 2025 03:40:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜é±¼çš®ã€‚</p>
<p>å‰æ®µæ—¶é—´æˆ‘ç”¨ AI æäº†ä¸ªã€Šå­¦ä¹ è‹±é›„ã€‹å°ç¨‹åºï¼Œè®©å­¦ä¹ åƒç©æ¸¸æˆä¸€æ ·è½»æ¾æœ‰è¶£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23c2b2bf11e048eb8b416d1df354fea1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=yBxKpUN0%2FKhcpsUofUBX57PVlxQ%3D" alt="" loading="lazy"/></p>
<p>å¼€å‘æ²¡èŠ±å¤šå°‘æ—¶é—´ï¼ŒåŸºæœ¬ä¸Šæ‘¸æ‘¸é±¼ã€æŠ æŠ è„šã€å–å–èŒ¶ï¼Œå·®ä¸å¤š 1 å¤©å§ï¼Œä¸€ä¸ªåŒ…å«å®Œæ•´å‰åç«¯å’Œ AI èƒ½åŠ›çš„å°ç¨‹åºå°±è¯ç”Ÿäº†ã€‚</p>
<p>åŸæœ¬æ¯ç‡¥çš„æ¦‚å¿µé€šè¿‡é—®ç­”çš„å½¢å¼å˜å¾—ç”ŸåŠ¨æœ‰è¶£ï¼Œå­¦ä¹ ç„¦è™‘ç¬é—´æ¶ˆå¤±äº†~</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/190fa372f4294558ba35a06e1b1d69cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=FNTLCAT2xRlV1LrlZeKLu86Nyu8%3D" alt="" loading="lazy"/></p>
<p>ğŸ‘‰ğŸ» æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FUYfskJvXsLLON0nMOWLz_g" target="_blank" title="https://mp.weixin.qq.com/s/UYfskJvXsLLON0nMOWLz_g" ref="nofollow noopener noreferrer">è¿™ç¯‡æ–‡ç« </a> æ¥äº†è§£å¼€å‘è¿‡ç¨‹ã€‚</p>
<p>ä½†æ˜¯ä½ æ•¢ä¿¡ï¼Œæˆ‘ç«Ÿç„¶èŠ±äº† <strong>å·®ä¸å¤š 2 ä¸ªæœˆ</strong>ï¼Œæ‰æŠŠè¿™ä¸ªå°ç¨‹åºæ­£å¼ä¸Šçº¿ï¼Ÿï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17a03a25e78140dab59a37915b9e1251~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=g4EjPxc5cqt9naErOMIpaj0bdHQ%3D" alt="" loading="lazy"/></p>
<p>æ¢åˆ°ä»¥å‰ï¼Œæˆ‘è‡ªå·±éƒ½ä¸æ•¢ç›¸ä¿¡ï¼Œè®°å¾—å¤§å­¦çš„æ—¶å€™ä¸Šçº¿ä¸ªå°ç¨‹åºå¾ˆå¿«çš„ï¼Œçœ‹æ¥çœŸçš„æ˜¯æ—¶ä»£å˜äº†ã€‚</p>
<p>æ¥ä¸‹æ¥åˆ†äº«ä¸€ä¸‹æˆ‘åå·çš„å°ç¨‹åºä¸Šçº¿è¿‡ç¨‹ï¼Œç»™ä¸€äº›å‡†å¤‡æå°ç¨‹åºçš„æœ‹å‹æ‰“æ‰“é¢„é˜²é’ˆï¼Œæå‰è§„åˆ’å¥½æ—¶é—´ã€‚</p>
<p>ç¬¬ä¸€æ­¥æ˜¯ã€å°ç¨‹åºå¤‡æ¡ˆã€‘ï¼Œä»¥å‰å‹æ ¹å„¿æ˜¯æ²¡æœ‰è¿™ä¸€æ­¥çš„ï¼Œä½†æ˜¯è‡ª 2023 å¹´ 9 æœˆ 1 æ—¥èµ·ï¼Œæ‰€æœ‰æ–°å¼€å‘çš„å¾®ä¿¡å°ç¨‹åºå¿…é¡»å®Œæˆå¤‡æ¡ˆåæ‰èƒ½ä¸Šæ¶ã€‚</p>
<p>å¤‡æ¡ˆæ“ä½œæ˜¯å…è´¹çš„ï¼Œä¸»è¦å°±æ˜¯åœ¨åå°å¡«å†™ä¸€äº›ä¸ªäºº / ä¼ä¸šä¿¡æ¯ã€‚ä½†æ˜¯å®¡æ ¸å‘¨æœŸå¤§çº¦ <strong>2 ~ 22 ä¸ªå·¥ä½œæ—¥</strong>ï¼ˆå«å·¥ä¿¡éƒ¨å®¡æ ¸ï¼‰ ã€‚ â€Œ</p>
<p>æˆ‘æ˜¯åœ¨å›½åº†èŠ‚å‰æäº†å¤‡æ¡ˆï¼Œè¿‡äº† 12 å¤©åæ‰é€šè¿‡ï¼›å¦‚æœä¸æ˜¯å‡æœŸï¼Œå¯èƒ½ä¼šå¿«ç‚¹å§ï¼Œå¤§æ¦‚å§ã€‚</p>
<p>ç„¶åæ˜¯ç¬¬äºŒæ­¥ã€å°ç¨‹åºç±»ç›®ç”³è¯·ã€‘ï¼Œç”±äºæˆ‘çš„å°ç¨‹åºç”¨åˆ°äº† AI å¤§æ¨¡å‹æ¥åšé—®ç­”åŠŸèƒ½ï¼Œéœ€è¦æ·»åŠ  â€œæ·±åº¦åˆæˆ-AIé—®ç­”ç±»ç›®â€ï¼Œå¦åˆ™æ— æ³•é€šè¿‡ä»£ç å‘å¸ƒå®¡æ ¸ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bbfb78e7b9d45abacd5dea152919e3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=xy5UdrxZkDAv%2Bo5O%2F5rXpRZkQpg%3D" alt="" loading="lazy"/></p>
<p>é‚£æˆ‘å°±æŒ‰ç…§ä¿®æ”¹æŒ‡å¼•æ·»åŠ ç±»ç›®å‘—ï¼Œç»“æœæ·»åŠ  AI ç›¸å…³çš„ç±»ç›®æ˜¯éœ€è¦èµ„è´¨æ–‡ä»¶çš„ï¼</p>
<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ«äººçš„å¤§æ¨¡å‹ï¼Œéœ€è¦æœ‰æŠ€æœ¯ä¸»ä½“çš„ã€Šäº’è”ç½‘ä¿¡æ¯æœåŠ¡ç®—æ³•å¤‡æ¡ˆã€‹å’Œã€Šå°ç¨‹åºä¸»ä½“ä¸æŠ€æœ¯ä¸»ä½“çš„åˆä½œåè®®ã€‹ã€‚ã€‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7e73ae78eae45799229ef3e698bfd72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=V1TxbIJq9dSaIhNDeIB9%2BAKU1Aw%3D" alt="" loading="lazy"/></p>
<p><strong>ä»€ä¹ˆï¼Ÿè¿˜è¦åˆä½œåè®®ï¼Ÿï¼</strong></p>
<p>åˆ°è¿™ä¸€æ­¥æˆ‘ä¼°è®¡ä¼šåŠé€€ä¸€å¤§æ³¢èŒæ–°ï¼Œæˆ‘åˆšçœ‹åˆ°çš„æ—¶å€™ä¹Ÿå¤´ç–¼äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d599f3641b6e42858f46de98b0d84f48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=40dHjAnnrmaMXsQ1D16NtAJR1tQ%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡åˆ«æ…Œï¼Œä½ ç”¨å“ªå®¶çš„ AI å¤§æ¨¡å‹æœåŠ¡ï¼Œå°±ç›´æ¥å»æ‰¾å¯¹åº”çš„å·¥ä½œäººå‘˜è¦å°±å¥½äº†ã€‚</p>
<p>æ¯”å¦‚æˆ‘ç”¨çš„æ˜¯é˜¿é‡Œäº‘å¤§æ¨¡å‹ï¼Œç›´æ¥å»å®˜ç½‘è”ç³»å®¢æœï¼Œä»–ä»¬çš„æŠ€æœ¯æ”¯æŒå“åº”å¾ˆå¿«ï¼Œä¹Ÿå¾ˆçƒ­å¿ƒã€‚ä½ åªéœ€è¦åšåˆ°æŠŠè‡ªå·±çš„éœ€æ±‚æè¿°æ¸…æ¥šï¼Œå¯¹æ–¹ä¼šå¸®ä½ å¤„ç†çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d766981aa928454bae2b66f7470886cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=3t5987NwPnuOazB2ysppx8JKO%2F4%3D" alt="" loading="lazy"/></p>
<p>å¤§æ¦‚èŠ±è´¹äº† 10 å¤©å·¦å³ï¼Œæˆ‘é¡ºåˆ©æ‹¿åˆ°äº†ç”³è¯·ç±»ç›®çš„ææ–™ï¼Œæäº¤ç”³è¯·å°±å¥½ã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯ç¬¬ä¸‰æ­¥ã€ä»£ç å‘å¸ƒå®¡æ ¸ã€‘ï¼Œæ„Ÿè§‰ç°åœ¨å°ç¨‹åºçš„å®¡æ ¸è¶Šæ¥è¶Šä¸¥æ ¼äº†ï¼Œå°¤å…¶æ˜¯åˆšå¼€å§‹åšçš„å°ç¨‹åºï¼Œå¾ˆå®¹æ˜“å› ä¸ºä¸€äº›æ„æƒ³ä¸åˆ°çš„åŸå› è¢«æ‰“å›æ¥ã€‚</p>
<p>æ¯”å¦‚æˆ‘é‡åˆ°çš„è¿™ä¸ªæƒ…å†µï¼Œç”±äºå°ç¨‹åºçš„æŸä¸ªæŒ‰é’®ç‚¹å‡»åæ²¡æœ‰å“åº”ï¼Œå°±è¢«æ‰“å›æ¥äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/476fa8728e9648ee9657def7bbc1aa28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=Qmz7DP9woXoOOAIwzyPcy%2Bht8xo%3D" alt="" loading="lazy"/></p>
<p>è¿™é”…æˆ‘ä¸èƒŒï¼Œè°è®© AI å·æ‡’äº†å‘¢ï¼Ÿï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/446244e8ce154d588b9d182528648454~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=cInzdwg6KXv%2F1X3cdOma67JjDAM%3D" alt="" loading="lazy"/></p>
<p>äºæ˜¯æˆ‘è®©å›¢é˜Ÿçš„åŒå­¦å¸®å¿™è¡¥äº†ä¸ªç‚¹å‡»å¼¹çª—ï¼Œç„¶åé‡æ–°æäº¤äº†å®¡æ ¸ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79e05a986a26470182bdd56ac29eeff9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=qjMFhODeVKmQNomsFXsRVGd82jw%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡ 2 ~ 3 å¤©å·¦å³ï¼Œä»£ç å®¡æ ¸ç»ˆäºé€šè¿‡äº†ã€‚ç„¶è€Œç”±äºæˆ‘çš„å°ç¨‹åºè¿˜æ¶‰åŠ â€œç¤¾äº¤â€ ç±»ç›®ï¼Œéœ€è¦è¿›å…¥ç¬¬å››æ­¥ã€å°ç¨‹åºæŠ¥å¤‡ã€‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cee59599748d45c6ad011a819881fcd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=p7qRnYhsZhgnjwH1ha56xBTsuAM%3D" alt="" loading="lazy"/></p>
<p>å½“æ—¶çœ‹åˆ°è¿™ä¸ª 7 å¤© * 24h çš„å®¡æ ¸æ—¶é•¿ï¼Œæˆ‘å˜´é‡Œæ­£åœ¨æ’•å’¬çš„é¸¡è…¿éƒ½å˜å¾—ç´¢ç„¶æ— å‘³äº†ã€‚ã€‚ã€‚</p>
<p>å¥½åœ¨è¿‡äº† 7 å¤©åï¼Œæˆ‘çš„å°ç¨‹åºç»ˆäºå‘å¸ƒä¸Šçº¿äº†ï¼ŒçœŸæ˜¯ä¸å®¹æ˜“å•Šï¼</p>
<p>æ¥å›é¡¾ä¸‹å®Œæ•´çš„æµç¨‹å§ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1ebc9c96fa8417da65c337a6fdc7dd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=v3dTqhDLPnCVayRLuvlc%2Fnk5y%2BI%3D" alt="" loading="lazy"/></p>
<p>è™½ç„¶æˆ‘è¿™æ¬¡å°ç¨‹åºä¸Šçº¿èŠ±äº†è¿‘ 2 ä¸ªæœˆï¼Œä½†å…¶å®ä¸­é—´æœ‰äº›ç©ºä½™çš„æ—¶é—´æ˜¯æˆ‘è‡ªå·±æ²¡æ¥å¾—åŠçœ‹åˆ°é€šçŸ¥ã€‚ä¸è¿‡å°±ç®—åªè€ƒè™‘å¿…é¡»çš„æµç¨‹ï¼Œå·®ä¸å¤šä¹Ÿè¦ 1 ä¸ªæœˆäº†ã€‚</p>
<p>å¦‚æœä½ åªæ˜¯æƒ³åšä¸ªç®€å•çš„å·¥å…·å°ç¨‹åºï¼Œä¸æ¶‰åŠ AI åŠŸèƒ½å’Œä¸‹é¢è¿™äº›éœ€è¦æŠ¥å¤‡çš„ç±»ç›®ï¼Œåº”è¯¥èƒ½çœä¸å°‘æ—¶é—´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2280358c92264b7f8c44afcde557d2f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=lpa%2ByGA9Y99tlJWVXdb2dO9B5Xk%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡æˆ‘ä¼°è®¡ç°åœ¨å¾ˆå¤šåŒå­¦éƒ½æœ‰ç”¨ AI åšä¸ªã€Šæœ‰ AI åŠŸèƒ½çš„å°ç¨‹åºã€‹çš„æƒ³æ³•ï¼Œæ‰€ä»¥è¿˜æ˜¯å»ºè®®å¤§å®¶ <strong>æå‰ç”³è¯·å°ç¨‹åºçš„ç±»ç›®</strong>ï¼Œå¹¶ä¸”å…ˆæå‡ºä¸€ä¸ªæœ€å°å¯ç”¨ç‰ˆæœ¬çš„ Demo æ‹¿æ¥è¿‡å®¡ã€èµ°å®Œä¸€æ¬¡ä¸Šçº¿å‘å¸ƒçš„æµç¨‹ï¼Œä»è€Œç¼©çŸ­æ•´ä½“çš„å‘¨æœŸã€‚è¿™å°±æ˜¯ç»å…¸çš„ç»Ÿç­¹æ–¹æ³•å§~</p>
<p>OK å°±å…ˆå†™åˆ°è¿™é‡Œï¼Œå†™ä¸‹ä¸€ä¸ªè§†é¢‘ç¨¿å»äº†ï¼Œæ‹œæ‹œ~ ğŸ‘‹ğŸ»</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dac357ea0744809abbcc67c3b8684dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765424411&amp;x-signature=tsz02ddQ3CxeO0hWCi77%2BuBx%2BJU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">æ›´å¤š</h2>
<p>ğŸ’» ç¼–ç¨‹å­¦ä¹ äº¤æµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fcode-nav" target="_blank" title="https://github.com/liyupi/code-nav" ref="nofollow noopener noreferrer">ç¼–ç¨‹å¯¼èˆª</a> ğŸ“ƒ ç®€å†å¿«é€Ÿåˆ¶ä½œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Flaoyujianli" target="_blank" title="https://github.com/liyupi/laoyujianli" ref="nofollow noopener noreferrer">è€é±¼ç®€å†</a> âœï¸ é¢è¯•åˆ·é¢˜ç¥å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fmianshiya" target="_blank" title="https://github.com/liyupi/mianshiya" ref="nofollow noopener noreferrer">é¢è¯•é¸­</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸åªæ˜¯Publicä¸Privateï¼šC#è®¿é—®ä¿®é¥°ç¬¦å…¨æ–¹ä½è§£è¯»]]></title>    <link>https://juejin.cn/post/7579573664228982793</link>    <guid>https://juejin.cn/post/7579573664228982793</guid>    <pubDate>2025-12-04T03:32:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579573664228982793" data-draft-id="7576236480113639474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸åªæ˜¯Publicä¸Privateï¼šC#è®¿é—®ä¿®é¥°ç¬¦å…¨æ–¹ä½è§£è¯»"/> <meta itemprop="keywords" content="å‰ç«¯,C#"/> <meta itemprop="datePublished" content="2025-12-04T03:32:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒ›é˜´"/> <meta itemprop="url" content="https://juejin.cn/user/950397795841032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸åªæ˜¯Publicä¸Privateï¼šC#è®¿é—®ä¿®é¥°ç¬¦å…¨æ–¹ä½è§£è¯»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/950397795841032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒ›é˜´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:32:37.000Z" title="Thu Dec 04 2025 03:32:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€è®¿é—®ä¿®é¥°ç¬¦çš„æ§åˆ¶èŒƒå›´</h2>
<h3 data-id="heading-1">1.<code>public</code>ï¼šå®Œå…¨å…¬å¼€</h3>
<ul>
<li><strong>è®¿é—®èŒƒå›´</strong>ï¼šæ— é™åˆ¶ã€‚ä»»ä½•ä»£ç ï¼Œæ— è®ºæ˜¯åœ¨åŒä¸€ä¸ªç¨‹åºé›†ï¼ˆAssemblyï¼‰è¿˜æ˜¯åœ¨å…¶ä»–ç¨‹åºé›†ä¸­ï¼Œéƒ½å¯ä»¥è®¿é—®è¢«<code>public</code>ä¿®é¥°çš„æˆå‘˜ã€‚</li>
<li><strong>é€‚ç”¨å¯¹è±¡</strong>ï¼šç±»ã€ç»“æ„ã€æ¥å£ã€æšä¸¾ã€å§”æ‰˜ã€ä»¥åŠç±»çš„æˆå‘˜ï¼ˆæ–¹æ³•ã€å±æ€§ã€å­—æ®µç­‰ï¼‰ã€‚</li>
<li><strong>ç”¨é€”</strong>ï¼šç”¨äºå®šä¹‰ä¸€ä¸ªç±»çš„â€œå…¬å…±APIâ€ã€‚è¿™äº›æ˜¯ä½ å¸Œæœ›æä¾›ç»™å¤–éƒ¨ä¸–ç•Œä½¿ç”¨çš„åŠŸèƒ½ã€‚</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨ AssemblyA.dll ä¸­</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Calculator</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> a, <span class="hljs-built_in">int</span> b</span>) <span class="hljs-comment">// ä»»ä½•ä»£ç éƒ½å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•</span></span>
    {
        <span class="hljs-keyword">return</span> a + b;
    }
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨å¦ä¸€ä¸ªé¡¹ç›® AssemblyB.exe ä¸­ï¼Œå¼•ç”¨äº† AssemblyA.dll</span>
<span class="hljs-keyword">using</span> AssemblyA;

<span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        Calculator calc = <span class="hljs-keyword">new</span> Calculator();
        <span class="hljs-built_in">int</span> result = calc.Add(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// å¯ä»¥è®¿é—®</span>
        Console.WriteLine(result);
    }
}
</code></pre>
<h3 data-id="heading-2">2.<code>private</code>ï¼šç»å¯¹ç§æœ‰</h3>
<ul>
<li><strong>è®¿é—®èŒƒå›´</strong>ï¼šä»…é™åœ¨å£°æ˜å®ƒçš„<strong>ç±»æˆ–ç»“æ„</strong>å†…éƒ¨ã€‚</li>
<li><strong>é€‚ç”¨å¯¹è±¡</strong>ï¼šç±»çš„æˆå‘˜ï¼ˆåµŒå¥—ç±»ã€æ–¹æ³•ã€å±æ€§ã€å­—æ®µç­‰ï¼‰ã€‚æ³¨æ„ï¼šé¡¶å±‚ç±»å‹ï¼ˆéåµŒå¥—ç±»ï¼‰ä¸èƒ½æ˜¯<code>private</code>çš„ã€‚</li>
<li><strong>ç”¨é€”</strong>ï¼šå°è£…çš„åŸºçŸ³ã€‚ç”¨äºéšè—ç±»çš„å†…éƒ¨çŠ¶æ€å’Œå®ç°ç»†èŠ‚ã€‚ä¸€ä¸ªç±»ä¸­ç»å¤§éƒ¨åˆ†çš„å­—æ®µéƒ½åº”è¯¥æ˜¯<code>private</code>çš„ã€‚</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BankAccount</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">decimal</span> _balance; <span class="hljs-comment">// åªèƒ½åœ¨BankAccountç±»å†…éƒ¨è®¿é—®</span>

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Deposit</span>(<span class="hljs-params"><span class="hljs-built_in">decimal</span> amount</span>)</span>
    {
        <span class="hljs-keyword">if</span> (amount &gt; <span class="hljs-number">0</span>)
        {
            _balance += amount; <span class="hljs-comment">// å†…éƒ¨å¯ä»¥è®¿é—®</span>
        }
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title">Test</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DoSomething</span>()</span>
    {
        BankAccount account = <span class="hljs-keyword">new</span> BankAccount();
        <span class="hljs-comment">// account._balance = 10000; // ç¼–è¯‘é”™è¯¯ï¼æ— æ³•ä»å¤–éƒ¨è®¿é—®_balance</span>
    }
}
</code></pre>
<h3 data-id="heading-3">3.<code>protected</code>ï¼šå®¶æ—å†…éƒ¨çš„ç§˜å¯†</h3>
<ul>
<li><strong>è®¿é—®èŒƒå›´</strong>ï¼šåœ¨å£°æ˜å®ƒçš„<strong>ç±»</strong>å†…éƒ¨ï¼Œä»¥åŠ**è¯¥ç±»çš„ä»»ä½•å­ç±»ï¼ˆæ´¾ç”Ÿç±»ï¼‰**ä¸­ã€‚</li>
<li><strong>é€‚ç”¨å¯¹è±¡</strong>ï¼šç±»çš„æˆå‘˜ã€‚</li>
<li><strong>ç”¨é€”</strong>ï¼šä¸ºäº†è®©å­ç±»èƒ½å¤Ÿè®¿é—®å’Œæ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æƒ³è®©è¿™äº›åŠŸèƒ½å¯¹å¤–ç•Œå®Œå…¨å…¬å¼€ã€‚å®ƒåœ¨ç»§æ‰¿ä½“ç³»ä¸­æ‰®æ¼”ç€å…³é”®è§’è‰²ã€‚</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨ AssemblyA.dll ä¸­</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span>
{
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// å­ç±»å¯ä»¥è®¿é—®Name</span>

    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Eat</span>()</span>
    {
        Console.WriteLine(<span class="hljs-string">$"<span class="hljs-subst">{Name}</span> is eating."</span>);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> : <span class="hljs-title">Animal</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Dog</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name</span>)</span>
    {
        <span class="hljs-keyword">this</span>.Name = name; <span class="hljs-comment">// æ­£ç¡®ï¼šå­ç±»å¯ä»¥è®¿é—®å—ä¿æŠ¤çš„æˆå‘˜</span>
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Bark</span>()</span>
    {
        Console.WriteLine(<span class="hljs-string">"Woof!"</span>);
        <span class="hljs-keyword">this</span>.Eat(); <span class="hljs-comment">// æ­£ç¡®ï¼šå­ç±»å¯ä»¥è°ƒç”¨å—ä¿æŠ¤çš„æ–¹æ³•</span>
    }
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨ AssemblyA.dll æˆ–å…¶ä»–ç¨‹åºé›†ä¸­</span>
<span class="hljs-keyword">class</span> <span class="hljs-title">Test</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DoSomething</span>()</span>
    {
        Animal animal = <span class="hljs-keyword">new</span> Animal();
        <span class="hljs-comment">// animal.Name = "Tom"; // ç¼–è¯‘é”™è¯¯ï¼å¤–éƒ¨æ— æ³•è®¿é—®protectedæˆå‘˜</span>
        <span class="hljs-comment">// animal.Eat();      // ç¼–è¯‘é”™è¯¯ï¼</span>

        Dog dog = <span class="hljs-keyword">new</span> Dog(<span class="hljs-string">"Buddy"</span>);
        <span class="hljs-comment">// dog.Name = "Lucy"; // ç¼–è¯‘é”™è¯¯ï¼å³ä½¿é€šè¿‡å­ç±»å®ä¾‹ï¼Œå¤–éƒ¨ä¹Ÿæ— æ³•è®¿é—®</span>
    }
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š<code>protected</code>çš„è®¿é—®æƒé™æ˜¯åŸºäº<strong>ç»§æ‰¿å…³ç³»</strong>çš„ï¼Œè€Œä¸æ˜¯å®ä¾‹ã€‚åœ¨<code>Test</code>ç±»ä¸­ï¼Œå³ä½¿æœ‰ä¸€ä¸ª<code>Dog</code>çš„å®ä¾‹ï¼Œä¹Ÿä¸èƒ½è®¿é—®å…¶<code>protected</code>æˆå‘˜ï¼Œå› ä¸º<code>Test</code>ç±»ä¸æ˜¯<code>Animal</code>çš„å­ç±»ã€‚</p>
<h3 data-id="heading-4">4. <code>nternal</code>ï¼šåŒä¸€ä¸ªâ€œé¡¹ç›®â€é‡Œçš„æœ‹å‹</h3>
<ul>
<li><strong>è®¿é—®èŒƒå›´</strong>ï¼šä»…é™åœ¨åŒä¸€ä¸ª**ç¨‹åºé›†ï¼ˆAssemblyï¼‰**å†…éƒ¨ã€‚ä¸€ä¸ªç¨‹åºé›†é€šå¸¸å¯¹åº”ä¸€ä¸ªé¡¹ç›®ï¼ˆ.csprojï¼‰ï¼Œç¼–è¯‘åç”Ÿæˆä¸€ä¸ªDLLæˆ–EXEæ–‡ä»¶ã€‚</li>
<li><strong>é€‚ç”¨å¯¹è±¡</strong>ï¼šé¡¶å±‚ç±»å‹å’Œç±»çš„æˆå‘˜ã€‚</li>
<li><strong>ç”¨é€”</strong>ï¼šå½“ä½ æƒ³åœ¨åŒä¸€ä¸ªé¡¹ç›®æˆ–ç»„ä»¶å†…éƒ¨å…±äº«ä¸€äº›ç±»æˆ–å·¥å…·æ–¹æ³•ï¼Œä½†åˆä¸å¸Œæœ›å°†å®ƒä»¬æš´éœ²ç»™å¼•ç”¨è¿™ä¸ªç»„ä»¶çš„å¤–éƒ¨é¡¹ç›®æ—¶ï¼Œ<code>internal</code>æ˜¯æœ€ä½³é€‰æ‹©ã€‚è¿™æ˜¯åˆ›å»ºæ¡†æ¶æˆ–åº“æ—¶éå¸¸æœ‰ç”¨çš„ä¸€ä¸ªä¿®é¥°ç¬¦ã€‚</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨ AssemblyA.dll ä¸­</span>
<span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">InternalHelper</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DoWork</span>()</span>
    {
        Console.WriteLine(<span class="hljs-string">"Internal work done."</span>);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PublicFacade</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PerformAction</span>()</span>
    {
        InternalHelper.DoWork(); <span class="hljs-comment">// åŒä¸€ä¸ªç¨‹åºé›†å†…ï¼Œå¯ä»¥è®¿é—®internalç±»</span>
    }
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨å¦ä¸€ä¸ªé¡¹ç›® AssemblyB.exe ä¸­ï¼Œå¼•ç”¨äº† AssemblyA.dll</span>
<span class="hljs-keyword">using</span> AssemblyA;

<span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        PublicFacade facade = <span class="hljs-keyword">new</span> PublicFacade();
        facade.PerformAction(); <span class="hljs-comment">// å¯ä»¥è°ƒç”¨</span>

        <span class="hljs-comment">// InternalHelper helper = new InternalHelper(); // ç¼–è¯‘é”™è¯¯ï¼InternalHelperåœ¨AssemblyBä¸­ä¸å¯è§</span>
    }
}
</code></pre>
<p><strong>é»˜è®¤è®¿é—®çº§åˆ«</strong>ï¼šå¦‚æœä½ åœ¨å£°æ˜ä¸€ä¸ªé¡¶å±‚ç±»ï¼ˆéåµŒå¥—ï¼‰æ—¶<strong>ä¸å†™ä»»ä½•è®¿é—®ä¿®é¥°ç¬¦</strong>ï¼Œå®ƒçš„é»˜è®¤è®¿é—®çº§åˆ«å°±æ˜¯<code>internal</code>ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ç­‰åŒäº internal class MyClass { }</span>
<span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> { } 
</code></pre>
<h3 data-id="heading-5">5. ä¸¤ç§ç»„åˆä¿®é¥°ç¬¦ï¼šæ›´ç²¾ç»†çš„æ§åˆ¶</h3>
<p>C#è¿˜æä¾›äº†ä¸¤ç§ç”±<code>protected</code>å’Œ<code>internal</code>ç»„åˆè€Œæˆçš„ä¿®é¥°ç¬¦ï¼Œç”¨äºå®ç°æ›´å¤æ‚çš„è®¿é—®æ§åˆ¶åœºæ™¯ã€‚</p>
<h4 data-id="heading-6">5.1 <code>protected internal</code>ï¼šå®¶æ—æœ‹å‹</h4>
<ul>
<li><strong>è®¿é—®èŒƒå›´</strong>ï¼šæ»¡è¶³ä»¥ä¸‹<strong>ä»»ä¸€æ¡ä»¶</strong>å³å¯è®¿é—®ï¼š
<ol>
<li>åœ¨åŒä¸€ä¸ªç¨‹åºé›†å†…ã€‚</li>
<li>åœ¨ä¸åŒçš„ç¨‹åºé›†ä¸­ï¼Œä½†å¿…é¡»æ˜¯è¯¥ç±»çš„å­ç±»ã€‚</li>
</ol>
</li>
<li><strong>é€»è¾‘å…³ç³»</strong>ï¼š<code>protected</code> <strong>OR</strong> <code>internal</code>ã€‚è¿™æ˜¯æœ€å®½æ¾çš„è®¿é—®çº§åˆ«ä¹‹ä¸€ï¼ˆä»…æ¬¡äº<code>public</code>ï¼‰ã€‚</li>
<li><strong>ç”¨é€”</strong>ï¼šå½“ä½ å¸Œæœ›ä¸€ä¸ªæˆå‘˜ä¸»è¦åœ¨ç¨‹åºé›†å†…éƒ¨ä½¿ç”¨ï¼Œä½†åŒæ—¶ä¹Ÿå…è®¸å…¶ä»–ç¨‹åºé›†ä¸­çš„å­ç±»å¯¹å…¶è¿›è¡Œæ‰©å±•æ—¶ã€‚</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨ AssemblyA.dll ä¸­</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BaseClass</span>
{
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">internal</span> <span class="hljs-built_in">int</span> Value { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DerivedInSameAssembly</span> : <span class="hljs-title">BaseClass</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test</span>()</span>
    {
        <span class="hljs-keyword">this</span>.Value = <span class="hljs-number">10</span>; <span class="hljs-comment">// å¯ä»¥è®¿é—®ï¼Œå› ä¸ºåœ¨åŒä¸€ä¸ªç¨‹åºé›†</span>
    }
}

<span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OtherClassInSameAssembly</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test</span>()</span>
    {
        BaseClass b = <span class="hljs-keyword">new</span> BaseClass();
        b.Value = <span class="hljs-number">20</span>; <span class="hljs-comment">// å¯ä»¥è®¿é—®ï¼Œå› ä¸ºåœ¨åŒä¸€ä¸ªç¨‹åºé›†</span>
    }
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨ AssemblyB.exe ä¸­ï¼Œå¼•ç”¨äº† AssemblyA.dll</span>
<span class="hljs-keyword">using</span> AssemblyA;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DerivedInOtherAssembly</span> : <span class="hljs-title">BaseClass</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test</span>()</span>
    {
        <span class="hljs-keyword">this</span>.Value = <span class="hljs-number">30</span>; <span class="hljs-comment">// å¯ä»¥è®¿é—®ï¼Œå› ä¸ºæ˜¯å­ç±»</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title">OtherClassInOtherAssembly</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test</span>()</span>
    {
        BaseClass b = <span class="hljs-keyword">new</span> BaseClass();
        <span class="hljs-comment">// b.Value = 40; // ç¼–è¯‘é”™è¯¯ï¼ä¸åœ¨åŒä¸€ç¨‹åºé›†ï¼Œä¹Ÿä¸æ˜¯å­ç±»</span>
    }
}
</code></pre>
<h4 data-id="heading-7">5.2 <code>private protected</code>ï¼šæœ¬å®¶çš„ç§å¯†</h4>
<ul>
<li><strong>è®¿é—®èŒƒå›´</strong>ï¼šå¿…é¡»<strong>åŒæ—¶æ»¡è¶³</strong>ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ‰èƒ½è®¿é—®ï¼š
<ol>
<li>åœ¨åŒä¸€ä¸ªç¨‹åºé›†å†…ã€‚</li>
<li>å¿…é¡»æ˜¯è¯¥ç±»çš„å­ç±»ã€‚</li>
</ol>
</li>
<li><strong>é€»è¾‘å…³ç³»</strong>ï¼š<code>private</code> <strong>AND</strong> <code>protected</code>ï¼ˆæ¦‚å¿µä¸Šï¼‰ï¼Œæˆ–è€…æ›´å‡†ç¡®åœ°è¯´æ˜¯<code>protected</code> <strong>AND</strong> <code>internal</code>ã€‚</li>
<li><strong>ç”¨é€”</strong>ï¼šè¿™æ˜¯æœ€ä¸¥æ ¼çš„è®¿é—®çº§åˆ«ä¹‹ä¸€ã€‚å½“ä½ å¸Œæœ›æŸä¸ªæˆå‘˜åªèƒ½è¢«<strong>åŒä¸€ä¸ªé¡¹ç›®ä¸­çš„å­ç±»</strong>è®¿é—®æ—¶ä½¿ç”¨ã€‚è¿™å¯ä»¥é˜²æ­¢å…¶ä»–ä¸ç›¸å…³çš„é¡¹ç›®ç»§æ‰¿ä½ çš„ç±»å¹¶æ»¥ç”¨è¿™äº›å—ä¿æŠ¤çš„æˆå‘˜ã€‚</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨ AssemblyA.dll ä¸­</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BaseClass</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">protected</span> <span class="hljs-built_in">string</span> SecretCode { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DerivedInSameAssembly</span> : <span class="hljs-title">BaseClass</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test</span>()</span>
    {
        <span class="hljs-keyword">this</span>.SecretCode = <span class="hljs-string">"Alpha"</span>; <span class="hljs-comment">// å¯ä»¥è®¿é—®ï¼ŒåŒä¸€ç¨‹åºé›† + å­ç±»</span>
    }
}

<span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OtherClassInSameAssembly</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test</span>()</span>
    {
        BaseClass b = <span class="hljs-keyword">new</span> BaseClass();
        <span class="hljs-comment">// b.SecretCode = "Beta"; // ç¼–è¯‘é”™è¯¯ï¼è™½ç„¶åœ¨åŒä¸€ç¨‹åºé›†ï¼Œä½†ä¸æ˜¯å­ç±»</span>
    }
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨ AssemblyB.exe ä¸­ï¼Œå¼•ç”¨äº† AssemblyA.dll</span>
<span class="hljs-keyword">using</span> AssemblyA;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DerivedInOtherAssembly</span> : <span class="hljs-title">BaseClass</span>
{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Test</span>()</span>
    {
        <span class="hljs-comment">// this.SecretCode = "Gamma"; // ç¼–è¯‘é”™è¯¯ï¼è™½ç„¶æ˜¯å­ç±»ï¼Œä½†ä¸åœ¨åŒä¸€ä¸ªç¨‹åºé›†</span>
    }
}
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€è®¿é—®ä¿®é¥°ç¬¦æ€»ç»“ä¸å¯¹æ¯”</h2>





























































<table><thead><tr><th>ä¿®é¥°ç¬¦</th><th>å½“å‰ç±»å†…éƒ¨</th><th>åŒç¨‹åºé›†å†…çš„å­ç±»</th><th>åŒç¨‹åºé›†å†…çš„éå­ç±»</th><th>ä¸åŒç¨‹åºé›†çš„å­ç±»</th><th>ä¸åŒç¨‹åºé›†çš„éå­ç±»</th></tr></thead><tbody><tr><td><code>public</code></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td><code>protected internal</code></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr><tr><td><code>internal</code></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>âŒ</td></tr><tr><td><code>protected</code></td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>âœ…</td><td>âŒ</td></tr><tr><td><code>private protected</code></td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr><tr><td><code>private</code></td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-9">ç»“è¯­</h2>
<p><strong>ç‚¹ä¸ªèµï¼Œå…³æ³¨æˆ‘è·å–æ›´å¤šå®ç”¨ C# æŠ€æœ¯å¹²è´§ï¼å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè®°å¾—æ”¶è—æœ¬æ–‡</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ å¤§å‚AIGCæŠ€æœ¯ç”Ÿæ€ä¸ä¸­å°Webå¼€å‘è€…çš„â€œå’Œè°å…±ç”Ÿâ€ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7579489321487089683</link>    <guid>https://juejin.cn/post/7579489321487089683</guid>    <pubDate>2025-12-04T01:46:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579489321487089683" data-draft-id="7579511463054295059" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ å¤§å‚AIGCæŠ€æœ¯ç”Ÿæ€ä¸ä¸­å°Webå¼€å‘è€…çš„â€œå’Œè°å…±ç”Ÿâ€ä¹‹è·¯"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC,æ•æ·å¼€å‘"/> <meta itemprop="datePublished" content="2025-12-04T01:46:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ å¤§å‚AIGCæŠ€æœ¯ç”Ÿæ€ä¸ä¸­å°Webå¼€å‘è€…çš„â€œå’Œè°å…±ç”Ÿâ€ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T01:46:34.000Z" title="Thu Dec 04 2025 01:46:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§­ ä¸€ã€åºç« ï¼šAIGCç”Ÿæ€çš„å·¨è½®æ­£åœ¨ç¢¾å‹è°ï¼Ÿ</h2>
<p>â€œ<strong>å½“ä½ è¿˜åœ¨åšCRUDæ¥å£æ—¶ï¼ŒAIGCå·²ç»å¼€å§‹å†™å®Œæ•´çš„å‰ç«¯æ¡†æ¶äº†</strong>ã€‚â€</p>
<p>è¿‘å¹´æ¥ï¼Œå¤§å‚çš„AIGCï¼ˆAI Generated Contentï¼‰ç”Ÿæ€å‡ ä¹æ³›æ»¥æˆç¾ã€‚<br/>
ä»OpenAIçš„Copilotç³»ï¼Œåˆ°ç™¾åº¦æ–‡å¿ƒã€é˜¿é‡Œé€šä¹‰ã€å­—èŠ‚è±†åŒ…ï¼Œå†åˆ°Metaçš„å¼€æºAgentæ¡†æ¶â€”â€”<strong>AIå·²ç»æˆä¸ºæ–°çš„ä»£ç ç»æµä½“åº•å±‚è®¾æ–½</strong> ğŸ§©ã€‚</p>
<p>ä½†æ˜¯ï¼<br/>
å¯¹äºä¸­å°Webå¼€å‘è€…è€Œè¨€ï¼Œè¿™æ—¢æ˜¯ä¸€åœºé©å‘½ï¼Œä¹Ÿæ˜¯ä¸€æ¬¡â€œæŠ€æœ¯ç„¦è™‘åŠ èº«â€çš„æ´—ç¤¼ã€‚<br/>
ä½ å¯èƒ½åœ¨æƒ³ï¼š</p>
<blockquote>
<p>â€œæˆ‘è¿TypeScriptè¿˜æ²¡æ•´æ˜ç™½ï¼ŒAIåˆè¦è®©æˆ‘â€˜Prompt Engineeringâ€™ï¼Ÿï¼â€</p>
</blockquote>
<p>åˆ«æ…Œ ğŸ˜ã€‚<br/>
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹<strong>ä¸­å°å¼€å‘è€…å¦‚ä½•åœ¨å·¨å¤´çš„AIé£æš´ä¸­æ‘¸åˆ°é€‚é…çš„æ–¹å‘</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸŒ³ äºŒã€å¤§å‚AIGCç”Ÿæ€æ¼”åŒ–çš„æŠ€æœ¯åº•å±‚</h2>
<p>å¤§å‚AIGCç”Ÿæ€çš„æœ¬è´¨æ˜¯ï¼š<strong>æ¨¡å‹ + æ•°æ® + å·¥å…·é“¾ + ç®—åŠ›é—­ç¯</strong>ã€‚</p>
<p>ä¸‹é¢ä»¥é˜¿é‡Œå’ŒOpenAIä½“ç³»ä¸ºä¾‹ç®€è¿°ç”Ÿæ€æ¼”åŒ–é€»è¾‘ğŸ‘‡</p>



































<table><thead><tr><th align="left">å±‚çº§</th><th align="left">æè¿°</th><th align="left">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">åº•å±‚æ¨¡å‹å±‚</td><td align="left">é€šç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</td><td align="left">GPT-5ã€Qwen2ã€Gemini2</td></tr><tr><td align="left">å·¥ç¨‹åŒ–ä¸­é—´å±‚</td><td align="left">æ¨¡å‹æ¨ç†æ¡†æ¶</td><td align="left">vLLMã€MindNLPã€ModelScope</td></tr><tr><td align="left">æ•°æ®é“¾</td><td align="left">é«˜è´¨é‡æŒ‡ä»¤æ•°æ®ä¸åµŒå…¥è¯­æ–™</td><td align="left">AIåŠ©æ‰‹è®­ç»ƒé›†ã€è‡ªé€‚åº”Embedding</td></tr><tr><td align="left">å¼€å‘è€…æ¥å£å±‚</td><td align="left">SDK / API / Agentæ¡†æ¶</td><td align="left">OpenAI SDKã€LangChainã€é˜¿é‡ŒDashScope</td></tr><tr><td align="left">å·¥å…·ç”Ÿæ€å±‚</td><td align="left">AIGCå‰ç«¯ç»„ä»¶åŒ–æ”¯æŒ</td><td align="left">npmåŒ…ã€Web SDKsã€Pluginä½“ç³»</td></tr></tbody></table>
<p>ğŸ§  æ ¸å¿ƒå“²å­¦ï¼š</p>
<blockquote>
<p>â€œæ¨¡å‹å±‚æŠŠç¥ç»å…ƒå˜æˆå¥å­ï¼Œå·¥å…·å±‚æŠŠå¥å­å˜æˆç”Ÿäº§åŠ›ã€‚â€</p>
</blockquote>
<p>è¿™æ„å‘³ç€ï¼Œå¼€å‘è€…åœ¨æœªæ¥çš„è§’è‰²ï¼Œä»<strong>å†™ä»£ç  â†’ ç»„ç»‡æ„å›¾</strong>ï¼Œé€æ¸è¿‡æ¸¡åˆ°ï¼š</p>
<blockquote>
<p>â€œè®©AIå¸®æˆ‘å†™å‡ºèƒ½è‡ªå·±æ”¹è‡ªå·±çš„ä»£ç â€ çš„å¥‡å¦™å¢ƒç•Œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ§© ä¸‰ã€ä¸­å°å¼€å‘è€…çš„AIGCé€‚é…è·¯å¾„</h2>
<p>ä¸‹é¢è¿›å…¥æœ¬æ–‡çš„æ ¸å¿ƒæ•™å­¦éƒ¨åˆ†â€”â€”<br/>
<strong>å¦‚ä½•è®©ä½ çš„Webé¡¹ç›®ï¼Œä¸AIGCç”Ÿæ€â€˜ä¼˜é›…åœ°å…±èˆâ€™ï¼Ÿ</strong></p>
<hr/>
<h3 data-id="heading-3">ğŸ¥‡ 1. è®¤çŸ¥é€‚é…ï¼šä»â€œå†™åŠŸèƒ½â€è½¬ä¸ºâ€œå†™è¯­ä¹‰â€</h3>
<blockquote>
<p>ğŸ’¡ <em>åº•å±‚é€»è¾‘ï¼šPrompt æ˜¯æ–°çš„APIè¯­ä¹‰å±‚</em></p>
</blockquote>
<p>åœ¨AIGCä½“ç³»ä¸­ï¼Œä¼ ç»Ÿçš„å‡½æ•°è°ƒç”¨æ¶ˆå¤±äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯AIä»»åŠ¡æè¿°ã€‚<br/>
ä¸¾ä¸ªä¾‹å­ï¼Œä½ åŸæ¥å¯èƒ½ç”¨ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function">function <span class="hljs-title">generateSummary</span><span class="hljs-params">(text)</span> </span>{
  <span class="hljs-comment">// è°ƒç”¨ä¼ ç»ŸNLP API</span>
  <span class="hljs-keyword">return</span> nlp.<span class="hljs-built_in">summarize</span>(text);
}
</code></pre>
<p>è€Œä»Šï¼Œä½ å¯èƒ½å†™æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateSummaryAI</span>(<span class="hljs-params">text</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable constant_">AIGC</span>.<span class="hljs-title function_">call</span>({
    <span class="hljs-attr">prompt</span>: <span class="hljs-string">`è¯·å¸®æˆ‘å°†ä»¥ä¸‹å†…å®¹ç²¾ç‚¼æˆä¸€å¥è¯æ‘˜è¦ï¼š<span class="hljs-subst">${text}</span>`</span>
  });
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">output</span>;
}
</code></pre>
<p>ğŸ” è¿™é‡Œï¼ŒAPIè°ƒç”¨çš„è¯­ä¹‰ä¸å†æ˜¯â€œæ‰§è¡Œå‡½æ•°â€ï¼Œè€Œæ˜¯â€œå¯¹AIæè¿°æ„å›¾â€ã€‚<br/>
ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ä½ ä¸å†å†™é€»è¾‘ï¼Œè€Œæ˜¯å†™æ€ç»´è·¯å¾„</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-4">ğŸ¥ˆ 2. å·¥ç¨‹é€‚é…ï¼šä»â€œæ¨¡å—å¯¼å…¥â€åˆ°â€œæ™ºèƒ½ä»£ç†â€</h3>
<p>ä¸­å°å¼€å‘è€…éœ€è¦æŒæ¡çš„ç¬¬äºŒä¸ªè½¬å˜æ˜¯â€”â€”<strong>æŠŠåŠŸèƒ½æ‹†æˆAI Agentä»»åŠ¡å•å…ƒ</strong>ã€‚</p>
<p>ä½ å¯ä»¥æ„å»ºä¸€ä¸ªç®€å•çš„æ™ºèƒ½é¡µé¢å°åŠ©æ‰‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebAgent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">answer</span>(<span class="hljs-params">question</span>) {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable constant_">AIGC</span>.<span class="hljs-title function_">call</span>({
      <span class="hljs-attr">prompt</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>ï¼Œä½œä¸ºä¸€åWebä¸“å®¶ï¼Œè¯·å›ç­”ï¼š<span class="hljs-subst">${question}</span>`</span>
    });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ¤– <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>: <span class="hljs-subst">${response.output}</span>`</span>);
  }
}

<span class="hljs-comment">// ç¤ºä¾‹ï¼šæ„é€ ä¸€ä¸ªAIGCç‰ˆ â€œChatè°ƒè¯•åŠ©ç†â€</span>
<span class="hljs-keyword">const</span> xiaoA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebAgent</span>(<span class="hljs-string">"å°A"</span>);
xiaoA.<span class="hljs-title function_">answer</span>(<span class="hljs-string">"å¦‚ä½•åœ¨Reactä¸­ä¼˜é›…åœ°ä½¿ç”¨Hooksï¼Ÿ"</span>);
</code></pre>
<p>ğŸ§  è¿™ä¸€å±‚çš„æ€æƒ³ç±»ä¼¼åº•å±‚ç³»ç»Ÿä¸­çš„â€œ<em>çº¿ç¨‹åä½œæ¨¡å‹ï¼ˆåç¨‹æ€æƒ³ï¼‰</em> â€ï¼Œ<br/>
åªæ˜¯æŠŠçº¿ç¨‹æ¢æˆäº†<strong>Agentä»»åŠ¡æµ</strong>ã€‚<br/>
â€”â€”ä½ å†™çš„æ¯ä¸ªæ™ºèƒ½æ¨¡å—ï¼Œå…¶å®æ˜¯<strong>è¯­ä¹‰ä¸Šçš„å¾®çº¿ç¨‹</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-5">ğŸ¥‰ 3. æŠ€æœ¯ç”Ÿæ€é€‚é…ï¼šåˆ©ç”¨å¹³å°èµ„æºâ€œå€ŸAIä¹‹ç¿¼â€</h3>
<p>åœ¨å¤§å‚ç”Ÿæ€ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸‰æ¡ä¸»æµçš„AIGCæ¥å…¥æ–¹æ¡ˆï¼š</p>

























<table><thead><tr><th align="center">ç±»å‹</th><th align="left">å…¸å‹å¹³å°</th><th align="left">æ¨èåœºæ™¯</th></tr></thead><tbody><tr><td align="center">â˜ï¸ äº‘æ‰˜ç®¡å‹</td><td align="left">é˜¿é‡Œäº‘ã€ç™¾åº¦æ™ºèƒ½äº‘AIå¹³å°</td><td align="left">è¾ƒå¤§é¡¹ç›®ã€éœ€è¦ç¨³å®šæ¨¡å‹æ¨ç†</td></tr><tr><td align="center">ğŸ”Œ SDKæ¥å…¥å‹</td><td align="left">OpenAI SDKã€Claude API</td><td align="left">Webç«¯æ™ºèƒ½åŠŸèƒ½æµ‹è¯•ä¸æ’ä»¶å¼€å‘</td></tr><tr><td align="center">ğŸ§° æœ¬åœ°è½»é‡æ¡†æ¶</td><td align="left">Ollamaã€LM Studio</td><td align="left">è‡ªå»ºå¼€å‘ç¯å¢ƒä¸ç¦»çº¿æ¨¡å‹æµ‹è¯•</td></tr></tbody></table>
<p>ğŸš€ å¼€å‘è€…å¯ä»¥é‡‡å–â€œåŒæ¥å…¥ç­–ç•¥â€ï¼š<br/>
âœ… äº‘ç«¯AIç”¨äºå®æ—¶ç”Ÿæˆå†…å®¹<br/>
âœ… æœ¬åœ°AIç”¨äºä»£ç åŸå‹å’Œå®‰å…¨éªŒè¯</p>
<p>è¿™æ ·ï¼Œä½ çš„æˆæœ¬ä¸é£é™©éƒ½èƒ½æœ‰æ•ˆå¯æ§ã€‚</p>
<hr/>
<h2 data-id="heading-6">âš™ï¸ å››ã€åº•å±‚é€»è¾‘ï¼šAIGCèƒŒåçš„â€œè®¡ç®—å“²å­¦â€</h2>
<p>åœ¨çº¯è®¡ç®—æœºç§‘å­¦è§†è§’ä¸‹ï¼ŒAIGCçš„æ ¸å¿ƒæ˜¯ä¸€ç§<strong>è®¡ç®—èŒƒå¼è¿ç§»</strong>ï¼š</p>
<blockquote>
<p>ä»â€œç¡®å®šæ€§è®¡ç®—â€ â†’ åˆ° â€œæ¦‚ç‡æ€§ç”Ÿæˆâ€</p>
</blockquote>
<p>ä¼ ç»Ÿä»£ç  = è¾“å…¥ + ç¡®å®šç®—æ³• + è¾“å‡º<br/>
AIGCç³»ç»Ÿ = è¾“å…¥è¯­ä¹‰ + æ¨¡å‹åˆ†å¸ƒæƒé‡ + é‡‡æ ·è¾“å‡ºæ¦‚ç‡</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåº•å±‚ä¸å†æ˜¯â€œæ±‚ä¸€ä¸ªç¡®å®šè§£â€ï¼Œè€Œæ˜¯åœ¨â€œæƒé‡ç©ºé—´â€é‡Œé‡‡æ ·<strong>é«˜æ¦‚ç‡æ€ç»´è·¯å¾„</strong>ã€‚</p>
<p>ä½ çœ‹åˆ°çš„æ¯ä¸€æ®µAIè¾“å‡ºï¼Œå…¶å®æ˜¯ä¸€æ¬¡<strong>éšæœºå˜é‡åç¼©æˆé€»è¾‘äº§ç‰©çš„å¥‡è¿¹ç¬é—´</strong>ã€‚<br/>
è¿™ä¸æ¯”çœ‹è¯—è¿˜æµªæ¼«å—ï¼ŸğŸ¤“ğŸ“œ</p>
<hr/>
<h2 data-id="heading-7">ğŸŒˆ äº”ã€é¢å‘æœªæ¥çš„å¼€å‘å®è·µå»ºè®®</h2>






























<table><thead><tr><th align="left">å»ºè®®æ–¹å‘</th><th align="left">å®ç°æ–¹å¼</th><th align="left">å¼€å‘æ”¶ç›Š</th></tr></thead><tbody><tr><td align="left">ğŸ’¬ Promptå·¥ç¨‹åŒ–</td><td align="left">å°è£…ç»Ÿä¸€AIä»»åŠ¡æ¨¡æ¿</td><td align="left">é™ä½AIçš„å›è¯æ­§ä¹‰ç‡</td></tr><tr><td align="left">ğŸ§© æ¨¡å—AIåŒ–</td><td align="left">å°†ç»„ä»¶æ¥å£è¯­ä¹‰åŒ–</td><td align="left">æå‡Webé¡¹ç›®AIè‡ªå®šä¹‰èƒ½åŠ›</td></tr><tr><td align="left">ğŸªœ æ¨¡å‹çº§ç¼“å­˜</td><td align="left">åˆç†ä¿å­˜Embeddingå‘é‡ç»“æœ</td><td align="left">æé«˜å“åº”é€Ÿåº¦ã€èŠ‚çº¦è°ƒç”¨æˆæœ¬</td></tr><tr><td align="left">ğŸª¶ å¼€å‘è€…AIGCç”Ÿæ€å­¦ä¹ </td><td align="left">å­¦LangChainã€AgentFlowã€RAGæœºåˆ¶</td><td align="left">è¿›å…¥ä¸‹ä¸€ä»£æ™ºèƒ½ç¼–ç¨‹</td></tr></tbody></table>
<blockquote>
<p>æœªæ¥çš„Webå·¥ç¨‹ï¼Œå°†ä¸åªæ˜¯â€œå†™é¡µé¢â€ï¼Œè€Œæ˜¯â€œæ•™æœºå™¨å†™é¡µé¢â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ğŸ§  å…­ã€æ€»ç»“ï¼šæˆä¸ºâ€œAIç”Ÿæ€ç‰©ç§â€çš„å¼€å‘è€…</h2>
<ul>
<li>ğŸŒ± å¤§å‚çš„AIGCæŠ€æœ¯ç”Ÿæ€åƒæ˜¯æ ‘æœ¨çš„æ ¹ç³»ï¼Œå®ƒç›˜æ ¹é”™èŠ‚ã€ä»äº‘åˆ°ç«¯æ— æ‰€ä¸åœ¨ï¼›</li>
<li>ğŸœ ä¸­å°å¼€å‘è€…åˆ™åƒæ˜¯ç”Ÿæ€ä¸­çš„å°è˜‘è‡ï¼Œçµæ´»ã€äº’è”ï¼Œå´æå…·åˆ›æ–°ï¼›</li>
<li>ğŸ§© é€‚é…çš„æœ¬è´¨åœ¨äºï¼š<strong>å’ŒAIå…±å»ºè€Œéå¯¹æŠ—</strong>ã€‚</li>
</ul>
<p>æœ€ç»ˆï¼Œä½ ä¸éœ€è¦æˆä¸ºâ€œæ›¿ä»£AIçš„äººâ€ï¼Œ<br/>
è€Œæ˜¯â€”â€”</p>
<blockquote>
<p>æˆä¸ºé‚£ä¸ªâ€œæ•™AIå†™æ›´å¥½ä»£ç â€çš„ Web å·«å¸ˆ ğŸ§™â€â™‚ï¸</p>
</blockquote>
<hr/>
<blockquote>
<p>ğŸ’¬ <strong>å½©è›‹ä¸€å¥ï¼š</strong></p>
<p>â€œæœªæ¥å‰ç«¯çš„ç»ˆæå½¢æ€ï¼Œæˆ–è®¸æ˜¯åœ¨æ§åˆ¶å°æ‰“ä¸‹ä¸€è¡Œï¼š<code>AI.build("æˆ‘çš„æ¢¦æƒ³ç½‘ç«™")</code>ï¼Œç„¶åå»å†²æ¯å’–å•¡â˜•ã€‚â€</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ 2025å…¨æ ˆæ¶æ„æ–¹æ¡ˆæ±‡æ€»ä¸æœªæ¥åˆ†æ]]></title>    <link>https://juejin.cn/post/7579489321487138835</link>    <guid>https://juejin.cn/post/7579489321487138835</guid>    <pubDate>2025-12-04T01:54:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579489321487138835" data-draft-id="7579551362154004489" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ 2025å…¨æ ˆæ¶æ„æ–¹æ¡ˆæ±‡æ€»ä¸æœªæ¥åˆ†æ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,æ¶æ„,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2025-12-04T01:54:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ 2025å…¨æ ˆæ¶æ„æ–¹æ¡ˆæ±‡æ€»ä¸æœªæ¥åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T01:54:23.000Z" title="Thu Dec 04 2025 01:54:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒ ä¸€ã€å‰è¨€ï¼šä»â€œä¼šç‚¹å…¨æ ˆâ€åˆ°â€œå…¨æ ˆAIå·¥ç¨‹å¸ˆâ€çš„æ¼”åŒ–</h2>
<p>æ—¶é—´å›åˆ° 2015 å¹´ï¼Œ**â€œå…¨æ ˆå¼€å‘â€**æ„å‘³ç€ï¼š</p>
<blockquote>
<p><em>ä½ èƒ½åœ¨æ—©æ™¨å†™Reactï¼Œåˆé¥­è°ƒAPIï¼Œå‚æ™šéƒ¨ç½²NodeæœåŠ¡ï¼Œæ™šä¸Šä¿®ä¸€ä¿®Nginxé…ç½®ã€‚</em></p>
</blockquote>
<p>è€Œåˆ°äº† <strong>2025 å¹´</strong>ï¼Œå…¨æ ˆçš„å®šä¹‰å·²ç»è¢«AIæ…äº†ä¸ªå¤©ç¿»åœ°è¦†ï¼š</p>
<blockquote>
<p>ğŸ‘¾ â€œå…¨æ ˆâ€ = å‰ç«¯ + åç«¯ + äº‘ + AIç¼–æ’ + æ•°æ®æµæ²»ç† + è‡ªåŠ¨åŒ–è¿ç»´</p>
</blockquote>
<p>è¿™æ„å‘³ç€ä¸€ä¸ªç°ä»£å…¨æ ˆå·¥ç¨‹å¸ˆä¸ä»…éœ€è¦ä»£ç èƒ½åŠ›ï¼Œæ›´è¦å…·å¤‡ï¼š</p>
<ul>
<li><strong>ç³»ç»ŸæŠ½è±¡æ€ç»´</strong></li>
<li><strong>AIç”Ÿæˆè¾…åŠ©å¼€å‘èƒ½åŠ›</strong></li>
<li><strong>å¼‚æ„æœåŠ¡æ¶æ„è®¾è®¡æ„è¯†</strong></li>
</ul>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€2025ä¸»æµå…¨æ ˆæŠ€æœ¯æ ˆåœ°å›¾</h2>
<p>ä¸‹å›¾å±•ç¤ºäº†å½“å‰ä¸»è¦çš„æŠ€æœ¯ç”Ÿæ€å¸ƒå±€ï¼ˆæŒ‰èŒèƒ½æ¨¡å—åˆ’åˆ†ï¼‰ğŸ‘‡</p>



























































<table><thead><tr><th align="left">å±‚çº§</th><th align="left">æŠ€èƒ½/ç»„ä»¶</th><th align="left">ä»£è¡¨æŠ€æœ¯æ ˆ</th><th align="left">è¶‹åŠ¿</th></tr></thead><tbody><tr><td align="left">å‰ç«¯å±‚</td><td align="left">UIã€äº¤äº’é€»è¾‘ã€ç»„ä»¶æ¸²æŸ“</td><td align="left">React 19 / Vue 4 / Next.js 15 / Solid.js</td><td align="left">âš¡ï¸ å‘å±•ä¸ºâ€œServer Component + Edgeæ¸²æŸ“â€ä¸»å¯¼</td></tr><tr><td align="left">åç«¯æœåŠ¡å±‚</td><td align="left">æ•°æ®ä¸ä¸šåŠ¡é€»è¾‘</td><td align="left">Node.js 22 / Deno 2 / Bun / NestJS</td><td align="left">ğŸ§© TypeScriptæˆä¸»æµã€è½»é‡å¼‚æ­¥ä½“ç³»</td></tr><tr><td align="left">APIä¸æ•°æ®å±‚</td><td align="left">API Gatewayã€GraphQLã€RAGæ•°æ®æ¥å£</td><td align="left">Apollo Server / tRPC / OpenAPI 4.0</td><td align="left">ğŸ”— â€œè¯­ä¹‰APIâ€å´›èµ·ï¼ŒAIé©±åŠ¨æ¥å£ç»“æ„</td></tr><tr><td align="left">æ•°æ®å±‚</td><td align="left">æ•°æ®å­˜å‚¨ä¸æ£€ç´¢</td><td align="left">PostgreSQL 17 / ClickHouse / Redis 8 / Vector DBs (Milvus, Pinecone)</td><td align="left">ğŸª„ ç»“æ„åŒ– + å‘é‡åŒ–å¹¶è¡Œè¶‹åŠ¿</td></tr><tr><td align="left">äº‘åŸç”Ÿå±‚</td><td align="left">å¯éƒ¨ç½²ä¸å¼¹æ€§ç®¡ç†</td><td align="left">Kubernetes / Docker / Cloudflare Workers / Vercel</td><td align="left">â˜ï¸ ä»K8Sèµ°å‘â€œè¾¹ç¼˜ç®—åŠ›+FaaSç¼–æ’â€</td></tr><tr><td align="left">AIæœåŠ¡å±‚</td><td align="left">LLMäº¤äº’ä¸æ™ºèƒ½é€»è¾‘</td><td align="left">OpenAIã€Claudeã€Qwenã€Llama3 + LangChainã€RAGflow</td><td align="left">ğŸ§  æ¶æ„åµŒå…¥AI AgentåŒ–</td></tr><tr><td align="left">DevOpså±‚</td><td align="left">æŒç»­é›†æˆä¸è‡ªåŠ¨åŒ–</td><td align="left">GitHub Actions / ArgoCD / Terraform / Pulumi</td><td align="left">ğŸ› ï¸ â€œIaC + è¯­ä¹‰CI/CD Pipelineâ€ æ–°å½¢æ€</td></tr><tr><td align="left">å®‰å…¨ä¸ç›‘æ§å±‚</td><td align="left">æµé‡åˆ†æã€éšç§ä¿æŠ¤</td><td align="left">OpenTelemetry / Elastic / Sentry / Auth0</td><td align="left">ğŸ§¯ è‡ªåŠ¨å¼‚å¸¸+å®‰å…¨æ£€æµ‹AIåŒ–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ğŸ§  ä¸‰ã€2025 å¹´å…¸å‹å…¨æ ˆæ¶æ„çš„äº”å¤§æ¨¡å¼</h2>
<p>è®©æˆ‘ä»¬ä»æ¶æ„é£æ ¼çš„è§’åº¦ï¼Œçœ‹å½“å‰å®é™…æœ€å…·ä»£è¡¨æ€§çš„äº”ç§å…¨æ ˆæ¨¡å¼ğŸ‘‡</p>
<hr/>
<h3 data-id="heading-3">ğŸ”¸ 1. <strong>Next.js + NestJS + PostgreSQL + LangChain</strong></h3>
<p>ğŸ§© <strong>é€‚ç”¨åœºæ™¯ï¼šä¸­å‹AIå¢å¼ºWebåº”ç”¨</strong></p>
<p><strong>æ ¸å¿ƒç†å¿µï¼š</strong> å…¨æ ˆåŒæ„ + AIä¸­å°</p>
<pre><code class="hljs language-css" lang="css">graph <span class="hljs-selector-tag">TD</span>
  <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[Next.js 15 å‰ç«¯]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[NestJS APIæœåŠ¡å±‚]</span>
  <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[(PostgreSQL)]</span>
  <span class="hljs-selector-tag">B</span> --&gt; D<span class="hljs-selector-attr">[LangChain AIé€»è¾‘å±‚]</span>
  D --&gt; E<span class="hljs-selector-attr">[LLMæ¨¡å‹API]</span>
</code></pre>
<p>âœ¨ ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åˆ©ç”¨ <strong>Next.js Server Actions</strong> é¿å…å¤šå±‚ API å­˜å‚¨</li>
<li>é€šè¿‡ LangChain èåˆè‡ªç„¶è¯­è¨€åŠŸèƒ½</li>
<li>å‰åç«¯ç»Ÿä¸€çš„ TypeScript ç”Ÿæ€ï¼Œ<strong>å¼€å‘ä½“éªŒæè‡´ç»Ÿä¸€</strong></li>
</ul>
<hr/>
<h3 data-id="heading-4">ğŸ”¸ 2. <strong>Remix + Cloudflare Workers + VectorDB (Pinecone/Milvus)</strong></h3>
<p>âš™ï¸ <strong>é€‚ç”¨åœºæ™¯ï¼šé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„è¾¹ç¼˜AIå†…å®¹å¹³å°</strong></p>
<p><strong>æ ¸å¿ƒæ€è·¯ï¼š</strong> æ¯ä¸€æ¬¡è¯·æ±‚å°±æ˜¯ä¸€ä¸ªâ€œæ™ºèƒ½å‡½æ•°â€</p>
<ul>
<li>ğŸ§  æ¯ä¸ªç”¨æˆ·è¯·æ±‚åœ¨è¾¹ç¼˜èŠ‚ç‚¹ä¸Šç›´æ¥æ‰§è¡Œï¼ˆFaaSå‡½æ•°ï¼‰</li>
<li>ğŸ§© æ•°æ®å‘é‡åŒ–å­˜å‚¨ï¼Œæ”¯æŒè¯­ä¹‰æ£€ç´¢</li>
<li>ğŸª¶ å‡ ä¹æ— è¿ç»´æˆæœ¬ï¼Œè‡ªåŠ¨æ‰©å±•</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Cloudflare Worker ç¤ºä¾‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-params">req</span>) {
    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(req.<span class="hljs-property">url</span>).<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"q"</span>);
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable constant_">AI</span>.<span class="hljs-title function_">queryVector</span>(<span class="hljs-string">"my-index"</span>, query);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ result });
  }
};
</code></pre>
<hr/>
<h3 data-id="heading-5">ğŸ”¸ 3. <strong>Astro + Deno + Supabase + OpenAI</strong></h3>
<p>ğŸŒŸ <strong>é€‚ç”¨åœºæ™¯ï¼šè½»é‡é™æ€ç½‘ç«™ + æ™ºèƒ½å†…å®¹ç”Ÿæˆ</strong></p>
<p>Astro åœ¨ 2025 å¹´å·²ä¸å†æ˜¯â€œé™æ€ç½‘ç«™ç”Ÿæˆå™¨â€ï¼Œè€Œæ˜¯<strong>AIé¡µé¢åˆæˆå¼•æ“</strong>ï¼š</p>
<ul>
<li>å‰ç«¯æç®€ç»„ä»¶æ¸²æŸ“</li>
<li>Deno æä¾›è½»é‡å¼å‡½æ•°æ‰§è¡Œå±‚</li>
<li>é…åˆ Supabase å®ç° Serverless æ•°æ®åŒæ­¥</li>
</ul>
<p>ğŸ¤“ ä¼˜ç‚¹ï¼š<br/>
<strong>æé€Ÿéƒ¨ç½² + é›¶é…ç½®AIæ¥å…¥ + æä½æˆæœ¬</strong></p>
<hr/>
<h3 data-id="heading-6">ğŸ”¸ 4. <strong>Bun Full-Stackï¼ˆBun + Elysia + SQLite + Edgeéƒ¨ç½²ï¼‰</strong></h3>
<p>ğŸ° <strong>é€‚ç”¨åœºæ™¯ï¼šåˆ›ä¸šçº§Webå…¨æ ˆé¡¹ç›®</strong></p>
<p><strong>å…³é”®è¯ï¼šæå¿«å¯åŠ¨ã€æ— ä¾èµ–ç—›ç‚¹</strong></p>
<p>Bun å·²æˆä¸º Node.js çš„â€œæ€§èƒ½ç»§æ‰¿è€…â€ï¼š</p>
<ul>
<li>å†…ç½® HTTPã€æ‰“åŒ…ã€æµ‹è¯•å·¥å…·</li>
<li>Elysia æ¡†æ¶æä¾›ç±»å‹å®‰å…¨çš„ API</li>
<li>SQLite ä½œä¸ºè½»é‡åµŒå…¥å¼æ•°æ®åº“</li>
<li>æ”¯æŒç›´æ¥éƒ¨ç½²è‡³ Vercel Edge Runtime</li>
</ul>
<p>ğŸ§® ä¼˜ç‚¹ï¼š</p>
<ul>
<li><strong>å¼€å‘ -&gt; éƒ¨ç½²è·¯å¾„æœ€çŸ­</strong></li>
<li><strong>æ€§èƒ½è¾¾åˆ° â€œæ¯æ¯«ç§’éƒ½æ˜¯æµªè´¹â€ çš„å¢ƒç•Œ</strong></li>
</ul>
<hr/>
<h3 data-id="heading-7">ğŸ”¸ 5. <strong>AI-Driven Serverless Meshï¼šAIGC + RAG + FaaSé›†ç¾¤</strong></h3>
<p>ğŸ§  <strong>é€‚ç”¨åœºæ™¯ï¼šä¼ä¸šçº§æ™ºèƒ½åº”ç”¨åå°</strong></p>
<p>æ ¸å¿ƒé€»è¾‘ï¼š</p>
<blockquote>
<p>â€œæ¯ä¸ªä¸šåŠ¡èŠ‚ç‚¹éƒ½æ˜¯å¯å­¦ä¹ çš„AgentèŠ‚ç‚¹ã€‚â€</p>
</blockquote>
<p>æŠ€æœ¯ç»„åˆï¼š</p>
<ul>
<li>å‰ç«¯ï¼šReact / SvelteKit</li>
<li>æœåŠ¡å±‚ï¼šFaaSï¼ˆAWS Lambda / é˜¿é‡ŒServerlessï¼‰</li>
<li>AIæ¥å…¥å±‚ï¼šRAGï¼ˆRetrieval Augmented Generationï¼‰ç»“æ„</li>
<li>å‘é‡æ•°æ®åº“ï¼šMilvus / Chroma</li>
<li>æ™ºèƒ½ç¼–æ’å±‚ï¼šLangGraph / AutoGen</li>
</ul>
<p>ğŸ•¸ï¸ æ¶æ„å›¾ç¤ºæ„ï¼š</p>
<pre><code class="hljs">ç”¨æˆ·è¯·æ±‚
   â†“
Webå‰ç«¯ï¼ˆReactå‰ç«¯AIåŠ©æ‰‹ï¼‰
   â†“
API Gatewayï¼ˆæ£€ç´¢/ç¼“å­˜/è°ƒåº¦ï¼‰
   â†“
RAGæœåŠ¡å±‚ï¼ˆæ–‡æœ¬åµŒå…¥ + ä¸Šä¸‹æ–‡æ··åˆï¼‰
   â†“
LLMè°ƒç”¨æ± ï¼ˆå¤šæ¨¡å‹å¹¶å‘ï¼‰
   â†“
ä¸šåŠ¡å‡½æ•°FaaSï¼ˆæŒ‰ä»»åŠ¡ç±»å‹è‡ªåŠ¨æ¿€æ´»ï¼‰
</code></pre>
<p>è¿™ç§æ¶æ„<strong>å¤©ç„¶æ”¯æŒæ‰©å±•å’Œè‡ªæ²»</strong>ï¼Œ<br/>
å¯ä»¥è®©æ•´ä¸ªç³»ç»Ÿä»¥â€œæ™ºèƒ½å¾®æœåŠ¡ç¾¤â€çš„å½¢å¼æŒç»­è‡ªä¸»æ¼”åŒ–ã€‚ğŸ¤¯</p>
<hr/>
<h2 data-id="heading-8">âš™ï¸ å››ã€æŠ€æœ¯åº•å±‚è¶‹åŠ¿ï¼šå…¨æ ˆ=AI+äº‘åŸç”Ÿ+è¯­ä¹‰æ¥å£</h2>
<p>2025å¹´çš„å…¨æ ˆç¯å¢ƒå˜åŒ–ä¸æ˜¯ç®€å•çš„æŠ€æœ¯å åŠ ï¼Œè€Œæ˜¯<strong>èŒƒå¼è¿ç§»</strong> âš¡ï¸ã€‚</p>



































<table><thead><tr><th align="left">å±‚çº§</th><th align="left">ä¼ ç»Ÿå½¢æ€</th><th align="left">2025æ–°å½¢æ€</th></tr></thead><tbody><tr><td align="left">APIå±‚</td><td align="left">REST / GraphQL</td><td align="left">è¯­ä¹‰Prompt APIï¼ˆAIæ¥å£ç¼–æ’ï¼‰</td></tr><tr><td align="left">æ•°æ®å±‚</td><td align="left">SQL / NoSQL</td><td align="left">å‘é‡æ•°æ®åº“ + æ··åˆå­˜å‚¨å±‚</td></tr><tr><td align="left">å¼€å‘æµç¨‹</td><td align="left">CI/CD</td><td align="left">AIGCé©±åŠ¨çš„æ™ºèƒ½Pipelineï¼ˆè‡ªåŠ¨PRä¸Code Reviewï¼‰</td></tr><tr><td align="left">éƒ¨ç½²å½¢æ€</td><td align="left">äº‘ä¸»æœº / K8S</td><td align="left">Edge + Serverless Mesh</td></tr><tr><td align="left">å‰ç«¯æ¨¡å‹</td><td align="left">CSR/SSR</td><td align="left">æ™ºèƒ½ç»„ä»¶ï¼ˆAIç”ŸæˆåŠ¨æ€UIï¼‰</td></tr></tbody></table>
<p>ğŸ‘‰ æ¢å¥è¯è¯´ï¼Œå…¨æ ˆä¸åªæ˜¯â€œèƒ½å¹²â€ï¼Œè€Œæ˜¯â€œèƒ½æ‡‚ä¸Šä¸‹æ–‡çš„ç³»ç»Ÿâ€ã€‚</p>
<hr/>
<h2 data-id="heading-9">ğŸ§® äº”ã€æœªæ¥æ¶æ„è®¾è®¡æ€ç»´ï¼šä»â€œè°ƒç”¨é€»è¾‘â€åˆ°â€œç³»ç»Ÿæ€è€ƒâ€</h2>
<p>ç°ä»£å…¨æ ˆæ¶æ„å¸ˆéœ€è¦åƒæ“ä½œç³»ç»Ÿè°ƒåº¦å™¨ä¸€æ ·æ€è€ƒï¼š</p>
<blockquote>
<p>â€œæ¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨ï¼Œéƒ½æ˜¯ä¸€æ¬¡ç®—åŠ›è°ƒé…â€<br/>
â€œæ¯ä¸€ä¸ªç»„ä»¶æ¸²æŸ“ï¼Œéƒ½æ˜¯ä¸€æ¬¡èµ„æºå¤ç”¨â€</p>
</blockquote>
<p>åº•å±‚å“²å­¦ï¼š</p>
<ol>
<li><strong>å‡½æ•°å³ä»»åŠ¡å•å…ƒ</strong> â†’ æ— çŠ¶æ€åŒ–ä½¿ç³»ç»Ÿæ›´ä¼˜é›…</li>
<li><strong>æ•°æ®å³è®°å¿†</strong> â†’ åµŒå…¥å¼å­˜å‚¨æ˜¯å…¨æ ˆçš„çµé­‚</li>
<li><strong>AIå³å·¥ç¨‹åŠ©æ‰‹</strong> â†’ è‡ªåŠ¨å®Œæˆæ¨¡å¼åŒ¹é…ä¸ä»£ç ä¼˜åŒ–</li>
</ol>
<p>ğŸ§© ä¸¾ä¾‹ï¼šä½ æœªæ¥å¯èƒ½è¿™æ ·å®šä¹‰å‰åç«¯é€šä¿¡æ¥å£ğŸ‘‡</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">AIAction</span> = <span class="hljs-title function_ invoke__">defineAgent</span>({
  <span class="hljs-attr">goal</span>: <span class="hljs-string">"å¸®åŠ©ç”¨æˆ·ç”Ÿæˆç™»é™†é¡µç»„ä»¶"</span>,
  <span class="hljs-attr">inputs</span>: [<span class="hljs-string">"ä¸»é¢˜è‰²"</span>, <span class="hljs-string">"æ’ç‰ˆåå¥½"</span>],
  <span class="hljs-attr">output</span>: <span class="hljs-string">"Reactç»„ä»¶ä»£ç "</span>,
  <span class="hljs-attr">engine</span>: <span class="hljs-string">"GPT-5"</span>
});

AIAction.<span class="hljs-title function_ invoke__">execute</span>({ <span class="hljs-attr">theme</span>: <span class="hljs-string">"dark"</span>, <span class="hljs-attr">layout</span>: <span class="hljs-string">"modern"</span> });
</code></pre>
<p>è¿™ä¸æ˜¯æœªæ¥å¹»æƒ³ï¼Œè€Œæ˜¯<strong>ç°å®ä¸­AI Agentæ¶æ„æ¨¡æ¿åŒ–çš„å…¸å‹ä½“ç°</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-10">ğŸ”® å…­ã€æ€»ç»“ï¼š2025å¹´å…¨æ ˆçš„å…³é”®è¯</h2>

































<table><thead><tr><th align="left">å…³é”®è¯</th><th align="left">å«ä¹‰</th></tr></thead><tbody><tr><td align="left">ğŸ§  AI-Enhanced</td><td align="left">è®©AIæˆä¸ºæ¶æ„å‚ä¸è€…ï¼Œè€Œéä»…æ˜¯å·¥å…·</td></tr><tr><td align="left">â˜ï¸ Serverless Everywhere</td><td align="left">æ— æœåŠ¡å™¨é€»è¾‘ç»Ÿæ²»åº”ç”¨æ¶æ„</td></tr><tr><td align="left">ğŸ’¬ Semantic API</td><td align="left">ä»å‡½æ•°æ¥å£è½¬å‹ä¸ºè¯­ä¹‰æ¥å£</td></tr><tr><td align="left">ğŸŒ Edge + Cloud</td><td align="left">æ— ç¼è¾¹ç¼˜éƒ¨ç½²å½¢æˆæ··åˆè®¡ç®—ç½‘</td></tr><tr><td align="left">ğŸ§© Full-Stack Type Safety</td><td align="left">å…¨é“¾è·¯TypeScriptåŒ–</td></tr><tr><td align="left">ğŸª„ AutoDevOps</td><td align="left">è‡ªåŠ¨éƒ¨ç½²ã€è‡ªæˆ‘è°ƒè¯•ã€è‡ªæ„ˆç³»ç»Ÿæˆä¸ºæ ‡é…</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-11">ğŸ’¬ ç»“è¯­ï¼š</h2>
<p>å¦‚æœè¯´ <strong>2015 å¹´çš„å…¨æ ˆå·¥ç¨‹å¸ˆæ˜¯å·¥åŒ </strong>ï¼Œ<br/>
é‚£ä¹ˆ <strong>2025 å¹´çš„å…¨æ ˆå·¥ç¨‹å¸ˆåˆ™æ˜¯â€œç³»ç»Ÿé©¯å…½å¸ˆâ€</strong> ã€‚</p>
<blockquote>
<p>ä»–ä»¬ç”¨ä»£ç ã€AIä¸ç®—åŠ›è°ƒåº¦ï¼Œ<br/>
è®©æœºå™¨ä¸ä»…æ‰§è¡Œé€»è¾‘ï¼Œæ›´ç†è§£æ„å›¾ã€‚</p>
</blockquote>
<p>åˆ«æ€•AIå–ä»£ä½ ï¼Œ<strong>è®©AIæˆä¸ºä½ çš„ååŒçº¿ç¨‹</strong>ã€‚<br/>
æœªæ¥çš„æ¶æ„ï¼Œä¸ä»…èƒ½è¿è¡Œï¼Œè¿˜èƒ½<strong>è‡ªæˆ‘ä¼˜åŒ–ä¸å­¦ä¹ </strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€å…¨éŸ³é¢‘å¤„ç†WaveSurferjsé…ç½®æ–‡æ¡£äºŒï¼ˆäº‹ä»¶ï¼‰]]></title>    <link>https://juejin.cn/post/7579544295344128051</link>    <guid>https://juejin.cn/post/7579544295344128051</guid>    <pubDate>2025-12-04T01:48:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579544295344128051" data-draft-id="7579499567869427762" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€å…¨éŸ³é¢‘å¤„ç†WaveSurferjsé…ç½®æ–‡æ¡£äºŒï¼ˆäº‹ä»¶ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-04T01:48:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="QINS"/> <meta itemprop="url" content="https://juejin.cn/user/3825956196198669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€å…¨éŸ³é¢‘å¤„ç†WaveSurferjsé…ç½®æ–‡æ¡£äºŒï¼ˆäº‹ä»¶ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956196198669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    QINS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T01:48:01.000Z" title="Thu Dec 04 2025 01:48:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€äº‹ä»¶åˆ†ç±»æ¦‚è§ˆ</h2>
<h3 data-id="heading-1">äº‹ä»¶ç±»å‹åˆ†ç±»</h3>
<ol>
<li><strong>ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</strong> - å®ä¾‹åˆ›å»ºã€é”€æ¯</li>
<li><strong>éŸ³é¢‘åŠ è½½äº‹ä»¶</strong> - éŸ³é¢‘æ–‡ä»¶åŠ è½½è¿‡ç¨‹</li>
<li><strong>æ’­æ”¾æ§åˆ¶äº‹ä»¶</strong> - æ’­æ”¾ã€æš‚åœã€åœæ­¢</li>
<li><strong>æ—¶é—´è¿›åº¦äº‹ä»¶</strong> - æ’­æ”¾è¿›åº¦å˜åŒ–</li>
<li><strong>äº¤äº’äº‹ä»¶</strong> - ç”¨æˆ·äº¤äº’æ“ä½œ</li>
<li><strong>éŸ³é¢‘å¤„ç†äº‹ä»¶</strong> - éŸ³é¢‘æ•°æ®ç›¸å…³</li>
<li><strong>æ’ä»¶äº‹ä»¶</strong> - æ’ä»¶ç‰¹æœ‰äº‹ä»¶</li>
<li><strong>é”™è¯¯äº‹ä»¶</strong> - å¼‚å¸¸æƒ…å†µ</li>
</ol>
<h2 data-id="heading-2">äºŒã€äº‹ä»¶åˆ—è¡¨ï¼ˆè¡¨æ ¼å½¢å¼ï¼‰</h2>
<h3 data-id="heading-3">1. ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</h3>





























<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å›è°ƒå‚æ•°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>ready</code></td><td>éŸ³é¢‘è§£ç å®Œæˆå¹¶å‡†å¤‡å°±ç»ª</td><td><code>duration</code></td><td><code>wavesurfer.on('ready', (duration) =&gt; {})</code></td></tr><tr><td><code>destroy</code></td><td>å®ä¾‹é”€æ¯æ—¶</td><td>æ— </td><td><code>wavesurfer.on('destroy', () =&gt; {})</code></td></tr><tr><td><code>init</code></td><td>åˆå§‹åŒ–å®Œæˆ</td><td>æ— </td><td><code>wavesurfer.on('init', () =&gt; {})</code></td></tr></tbody></table>
<h3 data-id="heading-4">2. éŸ³é¢‘åŠ è½½äº‹ä»¶</h3>









































<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å›è°ƒå‚æ•°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>load</code></td><td>å¼€å§‹åŠ è½½éŸ³é¢‘æ—¶</td><td><code>url</code></td><td><code>wavesurfer.on('load', (url) =&gt; {})</code></td></tr><tr><td><code>loading</code></td><td>åŠ è½½è¿‡ç¨‹ä¸­</td><td><code>percent</code></td><td><code>wavesurfer.on('loading', (percent) =&gt; {})</code></td></tr><tr><td><code>decode</code></td><td>éŸ³é¢‘è§£ç å¼€å§‹æ—¶</td><td>æ— </td><td><code>wavesurfer.on('decode', () =&gt; {})</code></td></tr><tr><td><code>waveform-ready</code></td><td>æ³¢å½¢æ•°æ®å‡†å¤‡å®Œæˆ</td><td>æ— </td><td><code>wavesurfer.on('waveform-ready', () =&gt; {})</code></td></tr><tr><td><code>audio-process</code></td><td>Web Audio API å¤„ç†éŸ³é¢‘æ—¶</td><td><code>time</code></td><td><code>wavesurfer.on('audio-process', (time) =&gt; {})</code></td></tr></tbody></table>
<h3 data-id="heading-5">3. æ’­æ”¾æ§åˆ¶äº‹ä»¶</h3>









































<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å›è°ƒå‚æ•°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>play</code></td><td>å¼€å§‹æ’­æ”¾æ—¶</td><td>æ— </td><td><code>wavesurfer.on('play', () =&gt; {})</code></td></tr><tr><td><code>pause</code></td><td>æš‚åœæ’­æ”¾æ—¶</td><td>æ— </td><td><code>wavesurfer.on('pause', () =&gt; {})</code></td></tr><tr><td><code>finish</code></td><td>æ’­æ”¾ç»“æŸæ—¶</td><td>æ— </td><td><code>wavesurfer.on('finish', () =&gt; {})</code></td></tr><tr><td><code>stop</code></td><td>åœæ­¢æ’­æ”¾æ—¶</td><td>æ— </td><td><code>wavesurfer.on('stop', () =&gt; {})</code></td></tr><tr><td><code>seek</code></td><td>è·³è½¬åˆ°æŒ‡å®šä½ç½®æ—¶</td><td><code>progress</code></td><td><code>wavesurfer.on('seek', (progress) =&gt; {})</code></td></tr></tbody></table>
<h3 data-id="heading-6">4. æ—¶é—´è¿›åº¦äº‹ä»¶</h3>





























<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å›è°ƒå‚æ•°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>audioprocess</code></td><td>æ’­æ”¾è¿‡ç¨‹ä¸­æŒç»­è§¦å‘</td><td><code>currentTime</code></td><td><code>wavesurfer.on('audioprocess', (time) =&gt; {})</code></td></tr><tr><td><code>timeupdate</code></td><td>æ’­æ”¾æ—¶é—´æ›´æ–°æ—¶</td><td><code>currentTime</code></td><td><code>wavesurfer.on('timeupdate', (time) =&gt; {})</code></td></tr><tr><td><code>scroll</code></td><td>æ³¢å½¢æ»šåŠ¨æ—¶</td><td><code>scrollLeft</code></td><td><code>wavesurfer.on('scroll', (scroll) =&gt; {})</code></td></tr></tbody></table>
<h3 data-id="heading-7">5. äº¤äº’äº‹ä»¶</h3>















































<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å›è°ƒå‚æ•°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>click</code></td><td>ç‚¹å‡»æ³¢å½¢å›¾æ—¶</td><td><code>relativeX</code>, <code>relativeY</code></td><td><code>wavesurfer.on('click', (x, y) =&gt; {})</code></td></tr><tr><td><code>dblclick</code></td><td>åŒå‡»æ³¢å½¢å›¾æ—¶</td><td><code>relativeX</code>, <code>relativeY</code></td><td><code>wavesurfer.on('dblclick', (x, y) =&gt; {})</code></td></tr><tr><td><code>dragstart</code></td><td>å¼€å§‹æ‹–åŠ¨æ—¶</td><td><code>relativeX</code></td><td><code>wavesurfer.on('dragstart', (x) =&gt; {})</code></td></tr><tr><td><code>dragmove</code></td><td>æ‹–åŠ¨è¿‡ç¨‹ä¸­</td><td><code>relativeX</code></td><td><code>wavesurfer.on('dragmove', (x) =&gt; {})</code></td></tr><tr><td><code>dragend</code></td><td>æ‹–åŠ¨ç»“æŸæ—¶</td><td><code>relativeX</code></td><td><code>wavesurfer.on('dragend', (x) =&gt; {})</code></td></tr><tr><td><code>interaction</code></td><td>ä»»ä½•äº¤äº’å‘ç”Ÿæ—¶</td><td>æ— </td><td><code>wavesurfer.on('interaction', () =&gt; {})</code></td></tr></tbody></table>
<h3 data-id="heading-8">6. éŸ³é¢‘å¤„ç†äº‹ä»¶</h3>



































<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å›è°ƒå‚æ•°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>volume</code></td><td>éŸ³é‡æ”¹å˜æ—¶</td><td><code>volume</code></td><td><code>wavesurfer.on('volume', (vol) =&gt; {})</code></td></tr><tr><td><code>mute</code></td><td>é™éŸ³æ—¶</td><td><code>muted</code></td><td><code>wavesurfer.on('mute', (isMuted) =&gt; {})</code></td></tr><tr><td><code>backend-change</code></td><td>éŸ³é¢‘åç«¯æ”¹å˜æ—¶</td><td><code>backend</code></td><td><code>wavesurfer.on('backend-change', (backend) =&gt; {})</code></td></tr><tr><td><code>rate</code></td><td>æ’­æ”¾é€Ÿç‡æ”¹å˜æ—¶</td><td><code>rate</code></td><td><code>wavesurfer.on('rate', (rate) =&gt; {})</code></td></tr></tbody></table>
<h3 data-id="heading-9">7. é”™è¯¯äº‹ä»¶</h3>

















<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å›è°ƒå‚æ•°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>error</code></td><td>å‘ç”Ÿé”™è¯¯æ—¶</td><td><code>error</code></td><td><code>wavesurfer.on('error', (error) =&gt; {})</code></td></tr></tbody></table>
<h3 data-id="heading-10">8. åŒºåŸŸæ’ä»¶äº‹ä»¶ (Regions Plugin)</h3>

































































<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å›è°ƒå‚æ•°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>region-created</code></td><td>åŒºåŸŸåˆ›å»ºæ—¶</td><td><code>region</code></td><td><code>wavesurfer.on('region-created', (region) =&gt; {})</code></td></tr><tr><td><code>region-updated</code></td><td>åŒºåŸŸæ›´æ–°æ—¶</td><td><code>region</code></td><td><code>wavesurfer.on('region-updated', (region) =&gt; {})</code></td></tr><tr><td><code>region-removed</code></td><td>åŒºåŸŸåˆ é™¤æ—¶</td><td><code>region</code></td><td><code>wavesurfer.on('region-removed', (region) =&gt; {})</code></td></tr><tr><td><code>region-in</code></td><td>æ’­æ”¾è¿›å…¥åŒºåŸŸæ—¶</td><td><code>region</code></td><td><code>wavesurfer.on('region-in', (region) =&gt; {})</code></td></tr><tr><td><code>region-out</code></td><td>æ’­æ”¾ç¦»å¼€åŒºåŸŸæ—¶</td><td><code>region</code></td><td><code>wavesurfer.on('region-out', (region) =&gt; {})</code></td></tr><tr><td><code>region-mouseenter</code></td><td>é¼ æ ‡è¿›å…¥åŒºåŸŸæ—¶</td><td><code>region</code>, <code>e</code></td><td><code>wavesurfer.on('region-mouseenter', (region, e) =&gt; {})</code></td></tr><tr><td><code>region-mouseleave</code></td><td>é¼ æ ‡ç¦»å¼€åŒºåŸŸæ—¶</td><td><code>region</code>, <code>e</code></td><td><code>wavesurfer.on('region-mouseleave', (region, e) =&gt; {})</code></td></tr><tr><td><code>region-click</code></td><td>ç‚¹å‡»åŒºåŸŸæ—¶</td><td><code>region</code>, <code>e</code></td><td><code>wavesurfer.on('region-click', (region, e) =&gt; {})</code></td></tr><tr><td><code>region-dblclick</code></td><td>åŒå‡»åŒºåŸŸæ—¶</td><td><code>region</code>, <code>e</code></td><td><code>wavesurfer.on('region-dblclick', (region, e) =&gt; {})</code></td></tr></tbody></table>
<h3 data-id="heading-11">9. æ ‡è®°æ’ä»¶äº‹ä»¶ (Markers Plugin)</h3>









































<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å›è°ƒå‚æ•°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>marker-created</code></td><td>æ ‡è®°åˆ›å»ºæ—¶</td><td><code>marker</code></td><td><code>wavesurfer.on('marker-created', (marker) =&gt; {})</code></td></tr><tr><td><code>marker-updated</code></td><td>æ ‡è®°æ›´æ–°æ—¶</td><td><code>marker</code></td><td><code>wavesurfer.on('marker-updated', (marker) =&gt; {})</code></td></tr><tr><td><code>marker-removed</code></td><td>æ ‡è®°åˆ é™¤æ—¶</td><td><code>marker</code></td><td><code>wavesurfer.on('marker-removed', (marker) =&gt; {})</code></td></tr><tr><td><code>marker-click</code></td><td>ç‚¹å‡»æ ‡è®°æ—¶</td><td><code>marker</code>, <code>e</code></td><td><code>wavesurfer.on('marker-click', (marker, e) =&gt; {})</code></td></tr><tr><td><code>marker-drag</code></td><td>æ‹–åŠ¨æ ‡è®°æ—¶</td><td><code>marker</code>, <code>e</code></td><td><code>wavesurfer.on('marker-drag', (marker, e) =&gt; {})</code></td></tr></tbody></table>
<h3 data-id="heading-12">10. å…‰æ ‡æ’ä»¶äº‹ä»¶ (Cursor Plugin)</h3>





























<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å›è°ƒå‚æ•°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>cursor-created</code></td><td>å…‰æ ‡åˆ›å»ºæ—¶</td><td><code>cursor</code></td><td><code>wavesurfer.on('cursor-created', (cursor) =&gt; {})</code></td></tr><tr><td><code>cursor-move</code></td><td>å…‰æ ‡ç§»åŠ¨æ—¶</td><td><code>cursor</code>, <code>time</code></td><td><code>wavesurfer.on('cursor-move', (cursor, time) =&gt; {})</code></td></tr><tr><td><code>cursor-click</code></td><td>ç‚¹å‡»å…‰æ ‡æ—¶</td><td><code>cursor</code>, <code>e</code></td><td><code>wavesurfer.on('cursor-click', (cursor, e) =&gt; {})</code></td></tr></tbody></table>
<h2 data-id="heading-13">ä¸‰ã€äº‹ä»¶ä½¿ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-14">1. åŸºæœ¬äº‹ä»¶ç›‘å¬</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºå®ä¾‹</span>
<span class="hljs-keyword">const</span> wavesurfer = <span class="hljs-title class_">WaveSurfer</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">container</span>: <span class="hljs-string">'#waveform'</span>,
  <span class="hljs-attr">waveColor</span>: <span class="hljs-string">'violet'</span>,
  <span class="hljs-attr">progressColor</span>: <span class="hljs-string">'purple'</span>
});

<span class="hljs-comment">// ç›‘å¬å•ä¸ªäº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'ready'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éŸ³é¢‘å‡†å¤‡å°±ç»ª'</span>);
  wavesurfer.<span class="hljs-title function_">play</span>();
});

<span class="hljs-comment">// ç›‘å¬å¤šä¸ªäº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'play'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹æ’­æ”¾'</span>));
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æš‚åœæ’­æ”¾'</span>));
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ’­æ”¾ç»“æŸ'</span>));

<span class="hljs-comment">// ç›‘å¬è¿›åº¦äº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'audioprocess'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">currentTime</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰æ—¶é—´:'</span>, currentTime.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>), <span class="hljs-string">'ç§’'</span>);
});

<span class="hljs-comment">// ç›‘å¬é”™è¯¯äº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å‘ç”Ÿé”™è¯¯:'</span>, error);
});
</code></pre>
<h3 data-id="heading-15">2. ä¸€æ¬¡æ€§äº‹ä»¶ç›‘å¬</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åªè§¦å‘ä¸€æ¬¡çš„äº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">once</span>(<span class="hljs-string">'ready'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éŸ³é¢‘ç¬¬ä¸€æ¬¡å‡†å¤‡å°±ç»ª'</span>);
});

<span class="hljs-comment">// ä½¿ç”¨Promiseé£æ ¼</span>
<span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  wavesurfer.<span class="hljs-title function_">once</span>(<span class="hljs-string">'ready'</span>, resolve);
});
</code></pre>
<h3 data-id="heading-16">3. äº‹ä»¶å‚æ•°ä½¿ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨äº‹ä»¶å‚æ•°</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'loading'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">percent</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åŠ è½½è¿›åº¦: <span class="hljs-subst">${percent}</span>%`</span>);
  <span class="hljs-comment">// æ›´æ–°è¿›åº¦æ¡</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'progress'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = percent + <span class="hljs-string">'%'</span>;
});

wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'seek'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">progress</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è·³è½¬åˆ°: <span class="hljs-subst">${(progress * <span class="hljs-number">100</span>).toFixed(<span class="hljs-number">1</span>)}</span>%`</span>);
});

wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'volume'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">volume</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`éŸ³é‡è°ƒæ•´ä¸º: <span class="hljs-subst">${volume}</span>`</span>);
});
</code></pre>
<h3 data-id="heading-17">4. åŒºåŸŸäº‹ä»¶å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŒºåŸŸæ’ä»¶äº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'region-created'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">region</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŒºåŸŸåˆ›å»º:'</span>, region.<span class="hljs-property">id</span>);
  
  <span class="hljs-comment">// åŒºåŸŸç‚¹å‡»äº‹ä»¶</span>
  region.<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŒºåŸŸè¢«ç‚¹å‡»:'</span>, region.<span class="hljs-property">id</span>);
    wavesurfer.<span class="hljs-title function_">play</span>(region.<span class="hljs-property">start</span>, region.<span class="hljs-property">end</span>);
  });
  
  <span class="hljs-comment">// åŒºåŸŸé¼ æ ‡äº‹ä»¶</span>
  region.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mouseenter'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¼ æ ‡è¿›å…¥åŒºåŸŸ'</span>);
    region.<span class="hljs-title function_">update</span>({ <span class="hljs-attr">color</span>: <span class="hljs-string">'rgba(255, 0, 0, 0.3)'</span> });
  });
  
  region.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mouseleave'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¼ æ ‡ç¦»å¼€åŒºåŸŸ'</span>);
    region.<span class="hljs-title function_">update</span>({ <span class="hljs-attr">color</span>: <span class="hljs-string">'rgba(0, 0, 255, 0.3)'</span> });
  });
});

<span class="hljs-comment">// æ’­æ”¾è¿›å…¥/ç¦»å¼€åŒºåŸŸäº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'region-in'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">region</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿›å…¥åŒºåŸŸ:'</span>, region.<span class="hljs-property">id</span>);
});

wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'region-out'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">region</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¦»å¼€åŒºåŸŸ:'</span>, region.<span class="hljs-property">id</span>);
});
</code></pre>
<h3 data-id="heading-18">5. äº¤äº’äº‹ä»¶å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç‚¹å‡»äº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">relativeX, relativeY</span>) {
  <span class="hljs-keyword">const</span> duration = wavesurfer.<span class="hljs-title function_">getDuration</span>();
  <span class="hljs-keyword">const</span> currentTime = relativeX * duration;
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç‚¹å‡»ä½ç½®: X=<span class="hljs-subst">${relativeX}</span>, Y=<span class="hljs-subst">${relativeY}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¯¹åº”æ—¶é—´: <span class="hljs-subst">${currentTime.toFixed(<span class="hljs-number">2</span>)}</span>ç§’`</span>);
  
  <span class="hljs-comment">// è·³è½¬åˆ°ç‚¹å‡»ä½ç½®</span>
  wavesurfer.<span class="hljs-title function_">seekTo</span>(relativeX);
});

<span class="hljs-comment">// åŒå‡»äº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dblclick'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">relativeX, relativeY</span>) {
  <span class="hljs-comment">// åŒå‡»åˆ›å»ºæ ‡è®°</span>
  <span class="hljs-keyword">const</span> time = relativeX * wavesurfer.<span class="hljs-title function_">getDuration</span>();
  wavesurfer.<span class="hljs-title function_">addMarker</span>({
    <span class="hljs-attr">time</span>: time,
    <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'æ ‡è®°ç‚¹'</span>
  });
});
</code></pre>
<h3 data-id="heading-19">6. è‡ªå®šä¹‰äº‹ä»¶è§¦å‘</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">fireEvent</span>(<span class="hljs-string">'custom-event'</span>, { <span class="hljs-attr">data</span>: <span class="hljs-string">'custom data'</span> });

<span class="hljs-comment">// ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'custom-event'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è‡ªå®šä¹‰äº‹ä»¶è§¦å‘:'</span>, data);
});
</code></pre>
<h3 data-id="heading-20">7. äº‹ä»¶ç§»é™¤</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handlePlay</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ’­æ”¾ä¸­...'</span>);
}

<span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'audioprocess'</span>, handlePlay);

<span class="hljs-comment">// ç§»é™¤ç‰¹å®šç›‘å¬å™¨</span>
wavesurfer.<span class="hljs-title function_">un</span>(<span class="hljs-string">'audioprocess'</span>, handlePlay);

<span class="hljs-comment">// ç§»é™¤æ‰€æœ‰audioprocessäº‹ä»¶ç›‘å¬å™¨</span>
wavesurfer.<span class="hljs-title function_">unAll</span>(<span class="hljs-string">'audioprocess'</span>);

<span class="hljs-comment">// ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨</span>
wavesurfer.<span class="hljs-title function_">unAll</span>();
</code></pre>
<h2 data-id="heading-21">å››ã€äº‹ä»¶ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾</h2>
<pre><code class="hljs language-arduino" lang="arduino">éŸ³é¢‘åŠ è½½è¿‡ç¨‹äº‹ä»¶æµï¼š
load â†’ loading â†’ decode â†’ ready â†’ waveform-ready
        â†“
      errorï¼ˆå¦‚æœå‘ç”Ÿé”™è¯¯ï¼‰

æ’­æ”¾è¿‡ç¨‹äº‹ä»¶æµï¼š
play â†’ audioprocessï¼ˆæŒç»­ï¼‰ â†’ pause/stop/finish
        â†“
     seekï¼ˆè·³è½¬æ—¶ï¼‰
        â†“
  volume/rateï¼ˆè®¾ç½®æ—¶ï¼‰

äº¤äº’äº‹ä»¶æµï¼š
click/dblclick â†’ dragstart â†’ dragmove â†’ dragend
      â†“
   interaction
</code></pre>
<h2 data-id="heading-22">äº”ã€äº‹ä»¶é…ç½®å‚æ•°è¡¨æ ¼</h2>
<h3 data-id="heading-23">äº‹ä»¶ç›¸å…³é…ç½®å‚æ•°</h3>






















































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th><th>å½±å“çš„äº‹ä»¶</th></tr></thead><tbody><tr><td><code>interact</code></td><td>Boolean</td><td>true</td><td>æ˜¯å¦å¯ç”¨äº¤äº’</td><td><code>click</code>, <code>dblclick</code>, <code>drag*</code></td></tr><tr><td><code>dragToSeek</code></td><td>Boolean</td><td>true</td><td>æ˜¯å¦å…è®¸æ‹–åŠ¨è·³è½¬</td><td><code>dragstart</code>, <code>dragmove</code>, <code>dragend</code></td></tr><tr><td><code>autoScroll</code></td><td>Boolean</td><td>true</td><td>æ’­æ”¾æ—¶è‡ªåŠ¨æ»šåŠ¨</td><td><code>scroll</code></td></tr><tr><td><code>scrollParent</code></td><td>Boolean</td><td>false</td><td>å¯ç”¨æ¨ªå‘æ»šåŠ¨</td><td><code>scroll</code></td></tr><tr><td><code>partialRender</code></td><td>Boolean</td><td>false</td><td>éƒ¨åˆ†æ¸²æŸ“</td><td>å½±å“æ¸²æŸ“ç›¸å…³äº‹ä»¶</td></tr><tr><td><code>splitChannels</code></td><td>Boolean</td><td>false</td><td>åˆ†ç¦»å£°é“æ˜¾ç¤º</td><td>å½±å“æ³¢å½¢æ¸²æŸ“äº‹ä»¶</td></tr></tbody></table>
<h3 data-id="heading-24">æ’­æ”¾æ§åˆ¶é…ç½®å‚æ•°</h3>








































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th><th>å½±å“çš„äº‹ä»¶</th></tr></thead><tbody><tr><td><code>audioRate</code></td><td>Number</td><td>1</td><td>æ’­æ”¾é€Ÿåº¦</td><td><code>rate</code></td></tr><tr><td><code>volume</code></td><td>Number</td><td>1</td><td>éŸ³é‡</td><td><code>volume</code>, <code>mute</code></td></tr><tr><td><code>loopSelection</code></td><td>Boolean</td><td>true</td><td>å¾ªç¯é€‰åŒº</td><td><code>region-in</code>, <code>region-out</code></td></tr><tr><td><code>backend</code></td><td>String</td><td>'WebAudio'</td><td>éŸ³é¢‘åç«¯</td><td><code>backend-change</code></td></tr></tbody></table>
<h3 data-id="heading-25">æ’ä»¶é…ç½®å‚æ•°</h3>





























































<table><thead><tr><th>æ’ä»¶</th><th>å‚æ•°å</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th><th>å½±å“çš„äº‹ä»¶</th></tr></thead><tbody><tr><td>Regions</td><td><code>regions</code></td><td>[]</td><td>åˆå§‹åŒºåŸŸ</td><td><code>region-*</code> äº‹ä»¶</td></tr><tr><td>Regions</td><td><code>dragSelection</code></td><td>true</td><td>å¯ç”¨æ‹–åŠ¨é€‰æ‹©</td><td><code>region-created</code></td></tr><tr><td>Regions</td><td><code>maxRegions</code></td><td>null</td><td>æœ€å¤§åŒºåŸŸæ•°</td><td>åŒºåŸŸç®¡ç†äº‹ä»¶</td></tr><tr><td>Markers</td><td><code>markers</code></td><td>[]</td><td>åˆå§‹æ ‡è®°</td><td><code>marker-*</code> äº‹ä»¶</td></tr><tr><td>Markers</td><td><code>markerWidth</code></td><td>2</td><td>æ ‡è®°å®½åº¦</td><td>æ ‡è®°æ¸²æŸ“äº‹ä»¶</td></tr><tr><td>Cursor</td><td><code>showTime</code></td><td>true</td><td>æ˜¾ç¤ºæ—¶é—´</td><td><code>cursor-move</code></td></tr><tr><td>Cursor</td><td><code>followCursorY</code></td><td>false</td><td>è·Ÿéšå…‰æ ‡Yè½´</td><td><code>cursor-move</code></td></tr></tbody></table>
<h2 data-id="heading-26">å…­ã€æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-27">1. äº‹ä»¶ç›‘å¬é¡ºåº</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨èçš„äº‹ä»¶ç›‘å¬é¡ºåº</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, handleError);          <span class="hljs-comment">// é¦–å…ˆç›‘å¬é”™è¯¯</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'load'</span>, handleLoadStart);       <span class="hljs-comment">// åŠ è½½å¼€å§‹</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'loading'</span>, updateProgress);     <span class="hljs-comment">// åŠ è½½è¿›åº¦</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'ready'</span>, initializePlayer);     <span class="hljs-comment">// å‡†å¤‡å°±ç»ª</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'play'</span>, updatePlayState);       <span class="hljs-comment">// æ’­æ”¾çŠ¶æ€</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, updatePlayState);      <span class="hljs-comment">// æš‚åœçŠ¶æ€</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'audioprocess'</span>, updateTime);    <span class="hljs-comment">// æ—¶é—´æ›´æ–°</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, handlePlaybackEnd);   <span class="hljs-comment">// æ’­æ”¾ç»“æŸ</span>
</code></pre>
<h3 data-id="heading-28">2. å†…å­˜ç®¡ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ç»„ä»¶é”€æ¯æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AudioPlayer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wavesurfer</span> = <span class="hljs-title class_">WaveSurfer</span>.<span class="hljs-title function_">create</span>(config);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindEvents</span>();
  }
  
  <span class="hljs-title function_">bindEvents</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventHandlers</span> = {
      <span class="hljs-attr">ready</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleReady</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),
      <span class="hljs-attr">play</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePlay</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),
      <span class="hljs-attr">pause</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePause</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>)
    };
    
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventHandlers</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[event, handler]</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">wavesurfer</span>.<span class="hljs-title function_">on</span>(event, handler);
    });
  }
  
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventHandlers</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[event, handler]</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">wavesurfer</span>.<span class="hljs-title function_">un</span>(event, handler);
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wavesurfer</span>.<span class="hljs-title function_">destroy</span>();
  }
}
</code></pre>
<h3 data-id="heading-29">3. äº‹ä»¶é˜²æŠ–å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¹é¢‘ç¹è§¦å‘çš„äº‹ä»¶è¿›è¡Œé˜²æŠ–å¤„ç†</span>
<span class="hljs-keyword">let</span> debounceTimer;
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'audioprocess'</span>, <span class="hljs-function">(<span class="hljs-params">time</span>) =&gt;</span> {
  <span class="hljs-built_in">clearTimeout</span>(debounceTimer);
  debounceTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">updateUI</span>(time);
  }, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100msé˜²æŠ–</span>
});

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨èŠ‚æµ</span>
<span class="hljs-keyword">let</span> lastUpdate = <span class="hljs-number">0</span>;
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-function">(<span class="hljs-params">scrollLeft</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">if</span> (now - lastUpdate &gt; <span class="hljs-number">200</span>) { <span class="hljs-comment">// 200msèŠ‚æµ</span>
    lastUpdate = now;
    <span class="hljs-title function_">updateScrollPosition</span>(scrollLeft);
  }
});
</code></pre>
<h3 data-id="heading-30">4. é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨é¢çš„é”™è¯¯å¤„ç†</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WaveSurferé”™è¯¯:'</span>, error);
  
  <span class="hljs-comment">// æ ¹æ®é”™è¯¯ç±»å‹å¤„ç†</span>
  <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'NetworkError'</span>)) {
    <span class="hljs-title function_">showError</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶åœ°å€'</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'decode'</span>)) {
    <span class="hljs-title function_">showError</span>(<span class="hljs-string">'éŸ³é¢‘è§£ç å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼'</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'NotSupportedError'</span>)) {
    <span class="hljs-title function_">showError</span>(<span class="hljs-string">'æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾'</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">showError</span>(<span class="hljs-string">'éŸ³é¢‘æ’­æ”¾é”™è¯¯: '</span> + error.<span class="hljs-property">message</span>);
  }
  
  <span class="hljs-comment">// æ¢å¤UIçŠ¶æ€</span>
  <span class="hljs-title function_">resetPlayerState</span>();
});
</code></pre>
<h2 data-id="heading-31">ä¸ƒã€äº‹ä»¶è°ƒè¯•æŠ€å·§</h2>
<h3 data-id="heading-32">1. äº‹ä»¶æ—¥å¿—è®°å½•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®°å½•æ‰€æœ‰äº‹ä»¶çš„å®ç”¨å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">logAllEvents</span>(<span class="hljs-params">wavesurfer</span>) {
  <span class="hljs-keyword">const</span> events = [
    <span class="hljs-string">'ready'</span>, <span class="hljs-string">'load'</span>, <span class="hljs-string">'loading'</span>, <span class="hljs-string">'play'</span>, <span class="hljs-string">'pause'</span>, <span class="hljs-string">'finish'</span>,
    <span class="hljs-string">'seek'</span>, <span class="hljs-string">'audioprocess'</span>, <span class="hljs-string">'error'</span>, <span class="hljs-string">'volume'</span>, <span class="hljs-string">'mute'</span>, <span class="hljs-string">'rate'</span>,
    <span class="hljs-string">'click'</span>, <span class="hljs-string">'dblclick'</span>, <span class="hljs-string">'dragstart'</span>, <span class="hljs-string">'dragmove'</span>, <span class="hljs-string">'dragend'</span>
  ];
  
  events.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventName</span> =&gt;</span> {
    wavesurfer.<span class="hljs-title function_">on</span>(eventName, <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[WaveSurfer Event] <span class="hljs-subst">${eventName}</span>:`</span>, args);
    });
  });
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-title function_">logAllEvents</span>(wavesurfer);
</code></pre>
<h3 data-id="heading-33">2. äº‹ä»¶æ€§èƒ½ç›‘æ§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘æ§äº‹ä»¶è§¦å‘é¢‘ç‡</span>
<span class="hljs-keyword">const</span> eventStats = {};
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'audioprocess'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">const</span> key = <span class="hljs-string">'audioprocess'</span>;
  
  <span class="hljs-keyword">if</span> (!eventStats[key]) {
    eventStats[key] = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">lastTime</span>: now };
  }
  
  eventStats[key].<span class="hljs-property">count</span>++;
  
  <span class="hljs-comment">// æ¯ç§’ç»Ÿè®¡ä¸€æ¬¡</span>
  <span class="hljs-keyword">if</span> (now - eventStats[key].<span class="hljs-property">lastTime</span> &gt;= <span class="hljs-number">1000</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`äº‹ä»¶ <span class="hljs-subst">${key}</span> è§¦å‘é¢‘ç‡: <span class="hljs-subst">${eventStats[key].count}</span>/ç§’`</span>);
    eventStats[key] = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">lastTime</span>: now };
  }
});
</code></pre>
<p>è¿™æ˜¯å®Œæ•´çš„äº‹ä»¶æ–‡æ¡£æ¶µç›–äº† WaveSurfer.js çš„æ‰€æœ‰äº‹ä»¶ç±»å‹ï¼ŒåŒ…æ‹¬æ ¸å¿ƒäº‹ä»¶å’Œæ’ä»¶äº‹ä»¶ï¼Œæä¾›äº†è¯¦ç»†çš„ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ WaveSurfer çš„äº‹ä»¶ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è´¢åŠ¡æ ¸ç®—ç³»ç»Ÿè®¾è®¡ä¸å®ç°]]></title>    <link>https://juejin.cn/post/7579551362154053641</link>    <guid>https://juejin.cn/post/7579551362154053641</guid>    <pubDate>2025-12-04T01:54:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579551362154053641" data-draft-id="7579551362154037257" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è´¢åŠ¡æ ¸ç®—ç³»ç»Ÿè®¾è®¡ä¸å®ç°"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-04T01:54:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è´¢åŠ¡æ ¸ç®—ç³»ç»Ÿè®¾è®¡ä¸å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T01:54:03.000Z" title="Thu Dec 04 2025 01:54:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è´¢åŠ¡æ ¸ç®—ç³»ç»Ÿè®¾è®¡ä¸å®ç°</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>è´¢åŠ¡æ ¸ç®—ç³»ç»Ÿæ˜¯ä¼ä¸šä¿¡æ¯åŒ–å»ºè®¾çš„æ ¸å¿ƒç³»ç»Ÿä¹‹ä¸€ï¼Œæ‰¿æ‹…ç€è®°å½•ã€åˆ†ç±»ã€æ±‡æ€»ä¼ä¸šç»æµä¸šåŠ¡çš„é‡è¦èŒè´£ã€‚ä¸€ä¸ªå®Œå–„çš„è´¢åŠ¡æ ¸ç®—ç³»ç»Ÿéœ€è¦æ»¡è¶³ä¼šè®¡å‡†åˆ™è¦æ±‚ï¼Œæ”¯æŒå¤šç»´åº¦æ ¸ç®—ï¼Œä¿è¯æ•°æ®å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚æœ¬æ–‡å°†ä»ç³»ç»Ÿæ¶æ„ã€æ ¸å¿ƒæ¨¡å—ã€ä»£ç å®ç°ç­‰æ–¹é¢ï¼Œè¯¦ç»†è®²è§£å¦‚ä½•è®¾è®¡ä¸€ä¸ªä¼ä¸šçº§è´¢åŠ¡æ ¸ç®—ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-2">ä¸€ã€è´¢åŠ¡æ ¸ç®—åŸºç¡€æ¦‚å¿µ</h3>
<h4 data-id="heading-3">1.1 ä¼šè®¡æ’ç­‰å¼</h4>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+------------------------------------------------------------------+</span>
|                        ä¼šè®¡æ’ç­‰å¼                                 |
<span class="hljs-addition">+------------------------------------------------------------------+</span>
|                                                                   |
|              èµ„äº§ = è´Ÿå€º + æ‰€æœ‰è€…æƒç›Š                              |
|                                                                   |
|              Assets = Liabilities + Owner's Equity                |
|                                                                   |
<span class="hljs-addition">+------------------------------------------------------------------+</span>
|                                                                   |
|    å€Ÿæ–¹ï¼ˆDebitï¼‰              |        è´·æ–¹ï¼ˆCreditï¼‰              |
|    èµ„äº§å¢åŠ                    |        èµ„äº§å‡å°‘                   |
|    è´Ÿå€ºå‡å°‘                   |        è´Ÿå€ºå¢åŠ                    |
|    è´¹ç”¨å¢åŠ                    |        æ”¶å…¥å¢åŠ                    |
|    æ‰€æœ‰è€…æƒç›Šå‡å°‘             |        æ‰€æœ‰è€…æƒç›Šå¢åŠ               |
|                                                                   |
<span class="hljs-addition">+------------------------------------------------------------------+</span>
</code></pre>
<h4 data-id="heading-4">1.2 æ ¸ç®—ä½“ç³»ç»“æ„</h4>
<pre><code class="hljs language-lua" lang="lua">+<span class="hljs-comment">------------------+     +------------------+     +------------------+</span>
|    ç§‘ç›®ä½“ç³»      |     |    è¾…åŠ©æ ¸ç®—      |     |    æœŸé—´ç®¡ç†      |
+<span class="hljs-comment">------------------+     +------------------+     +------------------+</span>
| ä¸€çº§ç§‘ç›®         |     | éƒ¨é—¨æ ¸ç®—         |     | ä¼šè®¡å¹´åº¦         |
| äºŒçº§ç§‘ç›®         |     | é¡¹ç›®æ ¸ç®—         |     | ä¼šè®¡æœŸé—´         |
| ä¸‰çº§ç§‘ç›®         |     | å¾€æ¥æ ¸ç®—         |     | æœŸé—´çŠ¶æ€         |
| æœ«çº§ç§‘ç›®         |     | ç°é‡‘æµæ ¸ç®—       |     | ç»“è´¦/åç»“è´¦      |
+<span class="hljs-comment">------------------+     +------------------+     +------------------+</span>
         |                       |                       |
         +<span class="hljs-comment">-------------------+---+-------------------+---+</span>
                             |
                    +<span class="hljs-comment">--------v--------+</span>
                    |    å‡­è¯ç®¡ç†      |
                    +<span class="hljs-comment">-----------------+</span>
                    | å‡­è¯å½•å…¥         |
                    | å‡­è¯å®¡æ ¸         |
                    | å‡­è¯è¿‡è´¦         |
                    | å‡­è¯å†²é”€         |
                    +<span class="hljs-comment">-----------------+</span>
                             |
                    +<span class="hljs-comment">--------v--------+</span>
                    |    è´¦ç°¿ç®¡ç†      |
                    +<span class="hljs-comment">-----------------+</span>
                    | æ€»è´¦             |
                    | æ˜ç»†è´¦           |
                    | å¤šæ è´¦           |
                    | åºæ—¶è´¦           |
                    +<span class="hljs-comment">-----------------+</span>
                             |
                    +<span class="hljs-comment">--------v--------+</span>
                    |    æŠ¥è¡¨ç®¡ç†      |
                    +<span class="hljs-comment">-----------------+</span>
                    | èµ„äº§è´Ÿå€ºè¡¨       |
                    | åˆ©æ¶¦è¡¨           |
                    | ç°é‡‘æµé‡è¡¨       |
                    +<span class="hljs-comment">-----------------+</span>
</code></pre>
<h4 data-id="heading-5">1.3 æ ¸å¿ƒä¸šåŠ¡æŒ‡æ ‡</h4>






























<table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th><th>è¦æ±‚</th></tr></thead><tbody><tr><td>å€Ÿè´·å¹³è¡¡</td><td>æ¯ç¬”å‡­è¯å€Ÿè´·å¿…é¡»ç›¸ç­‰</td><td>100%å‡†ç¡®</td></tr><tr><td>ç§‘ç›®ä½™é¢</td><td>æœŸåˆ+æœ¬æœŸå‘ç”Ÿ=æœŸæœ«</td><td>100%å‡†ç¡®</td></tr><tr><td>æœŸé—´å®Œæ•´</td><td>æœŸé—´è¿ç»­ä¸æ–­</td><td>100%å®Œæ•´</td></tr><tr><td>å®¡è®¡è¿½è¸ª</td><td>æ‰€æœ‰æ“ä½œå¯è¿½æº¯</td><td>å®Œæ•´æ—¥å¿—</td></tr></tbody></table>
<h3 data-id="heading-6">äºŒã€ç³»ç»Ÿæ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-7">2.1 æ•´ä½“æ¶æ„</h4>
<pre><code class="hljs language-lua" lang="lua">                              +<span class="hljs-comment">------------------+</span>
                              |     å‰ç«¯åº”ç”¨      |
                              |  Vue/React/H5   |
                              +<span class="hljs-comment">---------+--------+</span>
                                        |
                              +<span class="hljs-comment">---------v--------+</span>
                              |   API Gateway    |
                              |   è®¤è¯/é™æµ/è·¯ç”±  |
                              +<span class="hljs-comment">---------+--------+</span>
                                        |
         +<span class="hljs-comment">------------------------------+------------------------------+</span>
         |                              |                              |
+<span class="hljs-comment">--------v--------+           +---------v--------+           +---------v--------+</span>
|   æ ¸ç®—æœåŠ¡       |           |    æŠ¥è¡¨æœåŠ¡      |           |    åŸºç¡€æœåŠ¡      |
| Accounting-Svc  |           |  Report-Service  |           |  Base-Service   |
+<span class="hljs-comment">--------+--------+           +---------+--------+           +---------+--------+</span>
         |                              |                              |
         +<span class="hljs-comment">------------------------------+------------------------------+</span>
                                        |
         +<span class="hljs-comment">------------------------------+------------------------------+</span>
         |                              |                              |
+<span class="hljs-comment">--------v--------+           +---------v--------+           +---------v--------+</span>
|   Redisç¼“å­˜     |           |    æ¶ˆæ¯é˜Ÿåˆ—      |           |    æ•°æ®åº“        |
|  ç§‘ç›®/æœŸé—´ç¼“å­˜   |           |  å¼‚æ­¥å¤„ç†/é€šçŸ¥   |           |   æ ¸ç®—æ•°æ®       |
+<span class="hljs-comment">-----------------+           +------------------+           +------------------+</span>
</code></pre>
<h4 data-id="heading-8">2.2 æ ¸ç®—æœåŠ¡æ ¸å¿ƒæ¨¡å—</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">+</span><span class="hljs-comment">------------------------------------------------------------------+</span>
<span class="hljs-operator">|</span>                        æ ¸ç®—æœåŠ¡                                   <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------------------------------------------------------------------+</span>
<span class="hljs-operator">|</span>  <span class="hljs-operator">+</span><span class="hljs-comment">-------------+  +-------------+  +-------------+  +-----------+ |</span>
<span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> ç§‘ç›®ç®¡ç†    <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> å‡­è¯ç®¡ç†    <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> æœŸé—´ç®¡ç†    <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> è¾…åŠ©æ ¸ç®—  <span class="hljs-operator">|</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> Account     <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> Voucher     <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">Period</span>      <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> Auxiliary <span class="hljs-operator">|</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>  <span class="hljs-operator">+</span><span class="hljs-comment">-------------+  +-------------+  +-------------+  +-----------+ |</span>
<span class="hljs-operator">|</span>                                                                   <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>  <span class="hljs-operator">+</span><span class="hljs-comment">-------------+  +-------------+  +-------------+  +-----------+ |</span>
<span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> è´¦ç°¿æŸ¥è¯¢    <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> ç»“è´¦å¤„ç†    <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> æœŸæœ«ç»“è½¬    <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> å¯¹è´¦æœåŠ¡  <span class="hljs-operator">|</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> Ledger      <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> Closing     <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> Carryover   <span class="hljs-operator">|</span>  <span class="hljs-operator">|</span> Reconcile <span class="hljs-operator">|</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span>  <span class="hljs-operator">+</span><span class="hljs-comment">-------------+  +-------------+  +-------------+  +-----------+ |</span>
<span class="hljs-operator">+</span><span class="hljs-comment">------------------------------------------------------------------+</span>
</code></pre>
<h3 data-id="heading-9">ä¸‰ã€æ•°æ®åº“è®¾è®¡</h3>
<h4 data-id="heading-10">3.1 æ ¸å¿ƒè¡¨ç»“æ„</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¼šè®¡ç§‘ç›®è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `acc_subject` (
    `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ç§‘ç›®ID'</span>,
    `subject_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç§‘ç›®ç¼–ç '</span>,
    `subject_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç§‘ç›®åç§°'</span>,
    `parent_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸Šçº§ç§‘ç›®ç¼–ç '</span>,
    `subject_level` <span class="hljs-type">INT</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">'ç§‘ç›®çº§æ¬¡'</span>,
    `subject_type` TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç§‘ç›®ç±»å‹ï¼š1-èµ„äº§ï¼Œ2-è´Ÿå€ºï¼Œ3-æƒç›Šï¼Œ4-æˆæœ¬ï¼Œ5-æŸç›Š'</span>,
    `balance_direction` TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä½™é¢æ–¹å‘ï¼š1-å€Ÿæ–¹ï¼Œ2-è´·æ–¹'</span>,
    `is_leaf` TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">'æ˜¯å¦æœ«çº§ï¼š0-å¦ï¼Œ1-æ˜¯'</span>,
    `is_cash_subject` TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æ˜¯å¦ç°é‡‘ç§‘ç›®'</span>,
    `is_bank_subject` TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æ˜¯å¦é“¶è¡Œç§‘ç›®'</span>,
    `auxiliary_types` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¾…åŠ©æ ¸ç®—ç±»å‹ï¼ˆJSONæ•°ç»„ï¼‰'</span>,
    `status` TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">'çŠ¶æ€ï¼š0-åœç”¨ï¼Œ1-å¯ç”¨'</span>,
    `create_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    `update_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
    <span class="hljs-keyword">UNIQUE</span> KEY `uk_subject_code` (`subject_code`),
    KEY `idx_parent_code` (`parent_code`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ä¼šè®¡ç§‘ç›®è¡¨'</span>;

<span class="hljs-comment">-- ä¼šè®¡æœŸé—´è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `acc_period` (
    `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'æœŸé—´ID'</span>,
    `period_year` <span class="hljs-type">INT</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¼šè®¡å¹´åº¦'</span>,
    `period_month` <span class="hljs-type">INT</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¼šè®¡æœˆä»½'</span>,
    `period_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æœŸé—´ç¼–ç ï¼ˆå¦‚ï¼š202401ï¼‰'</span>,
    `start_date` <span class="hljs-type">DATE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¼€å§‹æ—¥æœŸ'</span>,
    `end_date` <span class="hljs-type">DATE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç»“æŸæ—¥æœŸ'</span>,
    `status` TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">'çŠ¶æ€ï¼š0-æœªå¯ç”¨ï¼Œ1-å·²å¯ç”¨ï¼Œ2-å·²ç»“è´¦'</span>,
    `close_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç»“è´¦æ—¶é—´'</span>,
    `close_user` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç»“è´¦äºº'</span>,
    `create_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    `update_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
    <span class="hljs-keyword">UNIQUE</span> KEY `uk_period_code` (`period_code`),
    KEY `idx_year_month` (`period_year`, `period_month`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ä¼šè®¡æœŸé—´è¡¨'</span>;

<span class="hljs-comment">-- ä¼šè®¡å‡­è¯è¡¨ï¼ˆå‡­è¯å¤´ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `acc_voucher` (
    `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'å‡­è¯ID'</span>,
    `voucher_no` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å‡­è¯å·'</span>,
    `voucher_type` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'è®°'</span> COMMENT <span class="hljs-string">'å‡­è¯å­—ï¼ˆè®°/æ”¶/ä»˜/è½¬ï¼‰'</span>,
    `voucher_date` <span class="hljs-type">DATE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å‡­è¯æ—¥æœŸ'</span>,
    `period_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ‰€å±æœŸé—´'</span>,
    `attachment_count` <span class="hljs-type">INT</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'é™„ä»¶æ•°'</span>,
    `total_debit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å€Ÿæ–¹åˆè®¡'</span>,
    `total_credit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è´·æ–¹åˆè®¡'</span>,
    `summary` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">256</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å‡­è¯æ‘˜è¦'</span>,
    `status` TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">'çŠ¶æ€ï¼š1-æœªå®¡æ ¸ï¼Œ2-å·²å®¡æ ¸ï¼Œ3-å·²è¿‡è´¦ï¼Œ4-å·²ä½œåºŸ'</span>,
    `source_type` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¥æºç±»å‹ï¼ˆæ‰‹å·¥/å¯¼å…¥/è‡ªåŠ¨ç”Ÿæˆï¼‰'</span>,
    `source_no` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¥æºå•æ®å·'</span>,
    `create_user` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ¶å•äºº'</span>,
    `audit_user` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å®¡æ ¸äºº'</span>,
    `audit_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å®¡æ ¸æ—¶é—´'</span>,
    `post_user` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¿‡è´¦äºº'</span>,
    `post_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¿‡è´¦æ—¶é—´'</span>,
    `create_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    `update_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
    <span class="hljs-keyword">UNIQUE</span> KEY `uk_voucher_no` (`voucher_no`),
    KEY `idx_period_code` (`period_code`),
    KEY `idx_voucher_date` (`voucher_date`),
    KEY `idx_status` (`status`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ä¼šè®¡å‡­è¯è¡¨'</span>;

<span class="hljs-comment">-- å‡­è¯åˆ†å½•è¡¨ï¼ˆå‡­è¯æ˜ç»†è¡Œï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `acc_voucher_entry` (
    `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'åˆ†å½•ID'</span>,
    `voucher_id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å‡­è¯ID'</span>,
    `voucher_no` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å‡­è¯å·'</span>,
    `line_no` <span class="hljs-type">INT</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¡Œå·'</span>,
    `subject_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç§‘ç›®ç¼–ç '</span>,
    `subject_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç§‘ç›®åç§°'</span>,
    `summary` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">256</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ‘˜è¦'</span>,
    `debit_amount` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'å€Ÿæ–¹é‡‘é¢'</span>,
    `credit_amount` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'è´·æ–¹é‡‘é¢'</span>,
    `currency_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'CNY'</span> COMMENT <span class="hljs-string">'å¸ç§'</span>,
    `exchange_rate` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">6</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">'æ±‡ç‡'</span>,
    `original_amount` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åŸå¸é‡‘é¢'</span>,
    `auxiliary_data` TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¾…åŠ©æ ¸ç®—æ•°æ®ï¼ˆJSONï¼‰'</span>,
    `create_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
    KEY `idx_voucher_id` (`voucher_id`),
    KEY `idx_subject_code` (`subject_code`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'å‡­è¯åˆ†å½•è¡¨'</span>;

<span class="hljs-comment">-- ç§‘ç›®ä½™é¢è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `acc_subject_balance` (
    `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ID'</span>,
    `period_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æœŸé—´ç¼–ç '</span>,
    `subject_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç§‘ç›®ç¼–ç '</span>,
    `begin_debit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœŸåˆå€Ÿæ–¹'</span>,
    `begin_credit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœŸåˆè´·æ–¹'</span>,
    `period_debit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœ¬æœŸå€Ÿæ–¹'</span>,
    `period_credit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœ¬æœŸè´·æ–¹'</span>,
    `year_debit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœ¬å¹´ç´¯è®¡å€Ÿæ–¹'</span>,
    `year_credit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœ¬å¹´ç´¯è®¡è´·æ–¹'</span>,
    `end_debit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœŸæœ«å€Ÿæ–¹'</span>,
    `end_credit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœŸæœ«è´·æ–¹'</span>,
    `create_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    `update_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
    <span class="hljs-keyword">UNIQUE</span> KEY `uk_period_subject` (`period_code`, `subject_code`),
    KEY `idx_subject_code` (`subject_code`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ç§‘ç›®ä½™é¢è¡¨'</span>;

<span class="hljs-comment">-- è¾…åŠ©æ ¸ç®—æ˜ç»†è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `acc_auxiliary_balance` (
    `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ID'</span>,
    `period_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æœŸé—´ç¼–ç '</span>,
    `subject_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç§‘ç›®ç¼–ç '</span>,
    `auxiliary_type` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¾…åŠ©æ ¸ç®—ç±»å‹'</span>,
    `auxiliary_id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¾…åŠ©æ ¸ç®—ID'</span>,
    `auxiliary_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¾…åŠ©æ ¸ç®—ç¼–ç '</span>,
    `auxiliary_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¾…åŠ©æ ¸ç®—åç§°'</span>,
    `begin_debit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœŸåˆå€Ÿæ–¹'</span>,
    `begin_credit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœŸåˆè´·æ–¹'</span>,
    `period_debit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœ¬æœŸå€Ÿæ–¹'</span>,
    `period_credit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœ¬æœŸè´·æ–¹'</span>,
    `end_debit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœŸæœ«å€Ÿæ–¹'</span>,
    `end_credit` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">18</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æœŸæœ«è´·æ–¹'</span>,
    `create_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    `update_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
    <span class="hljs-keyword">UNIQUE</span> KEY `uk_balance` (`period_code`, `subject_code`, `auxiliary_type`, `auxiliary_id`),
    KEY `idx_auxiliary` (`auxiliary_type`, `auxiliary_id`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'è¾…åŠ©æ ¸ç®—ä½™é¢è¡¨'</span>;

<span class="hljs-comment">-- æ“ä½œæ—¥å¿—è¡¨ï¼ˆå®¡è®¡è¿½è¸ªï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `acc_operation_log` (
    `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
    `operation_type` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ“ä½œç±»å‹'</span>,
    `business_type` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸šåŠ¡ç±»å‹ï¼ˆå‡­è¯/ç§‘ç›®/æœŸé—´ç­‰ï¼‰'</span>,
    `business_id` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸šåŠ¡ID'</span>,
    `business_no` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸šåŠ¡å•å·'</span>,
    `operation_content` TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ“ä½œå†…å®¹'</span>,
    `before_data` TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ“ä½œå‰æ•°æ®'</span>,
    `after_data` TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ“ä½œåæ•°æ®'</span>,
    `operator` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ“ä½œäºº'</span>,
    `operate_time` DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ“ä½œæ—¶é—´'</span>,
    `ip_address` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'IPåœ°å€'</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
    KEY `idx_business` (`business_type`, `business_id`),
    KEY `idx_operate_time` (`operate_time`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æ“ä½œæ—¥å¿—è¡¨'</span>;
</code></pre>
<h4 data-id="heading-11">3.2 ERå…³ç³»å›¾</h4>
<pre><code class="hljs language-lua" lang="lua">+<span class="hljs-comment">------------------+       +------------------+       +------------------+</span>
|   acc_subject    |       |   acc_voucher    |       | acc_voucher_entry|
+<span class="hljs-comment">------------------+       +------------------+       +------------------+</span>
| subject_code(PK) |&lt;<span class="hljs-comment">------| subject_code(FK) |       | id (PK)          |</span>
| subject_name     |       | id (PK)          |&lt;<span class="hljs-comment">------| voucher_id (FK)  |</span>
| parent_code      |       | voucher_no (UK)  |       | subject_code     |
| subject_type     |       | period_code      |       | debit_amount     |
| balance_direction|       | total_debit      |       | credit_amount    |
+<span class="hljs-comment">------------------+       | total_credit     |       | auxiliary_data   |</span>
                           | <span class="hljs-built_in">status</span>           |       +<span class="hljs-comment">------------------+</span>
                           +<span class="hljs-comment">------------------+</span>
                                   |
                           +<span class="hljs-comment">-------v--------+</span>
                           |  acc_period    |
                           +<span class="hljs-comment">----------------+</span>
                           | period_code(PK)|
                           | period_year    |
                           | period_month   |
                           | <span class="hljs-built_in">status</span>         |
                           +<span class="hljs-comment">----------------+</span>

+<span class="hljs-comment">------------------+       +------------------------+</span>
|acc_subject_balance|      | acc_auxiliary_balance  |
+<span class="hljs-comment">------------------+       +------------------------+</span>
| period_code      |       | period_code            |
| subject_code     |       | subject_code           |
| begin_debit      |       | auxiliary_type         |
| period_debit     |       | auxiliary_id           |
| end_debit        |       | begin_debit            |
+<span class="hljs-comment">------------------+       | period_debit           |</span>
                           +<span class="hljs-comment">------------------------+</span>
</code></pre>
<h3 data-id="heading-12">å››ã€æ ¸å¿ƒå®ä½“ç±»</h3>
<h4 data-id="heading-13">4.1 ç§‘ç›®å®ä½“</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.entity;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.*;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * ä¼šè®¡ç§‘ç›®å®ä½“
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName("acc_subject")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AccSubject</span> {

    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-comment">/**
     * ç§‘ç›®ç¼–ç 
     */</span>
    <span class="hljs-keyword">private</span> String subjectCode;

    <span class="hljs-comment">/**
     * ç§‘ç›®åç§°
     */</span>
    <span class="hljs-keyword">private</span> String subjectName;

    <span class="hljs-comment">/**
     * ä¸Šçº§ç§‘ç›®ç¼–ç 
     */</span>
    <span class="hljs-keyword">private</span> String parentCode;

    <span class="hljs-comment">/**
     * ç§‘ç›®çº§æ¬¡
     */</span>
    <span class="hljs-keyword">private</span> Integer subjectLevel;

    <span class="hljs-comment">/**
     * ç§‘ç›®ç±»å‹ï¼š1-èµ„äº§ï¼Œ2-è´Ÿå€ºï¼Œ3-æƒç›Šï¼Œ4-æˆæœ¬ï¼Œ5-æŸç›Š
     */</span>
    <span class="hljs-keyword">private</span> Integer subjectType;

    <span class="hljs-comment">/**
     * ä½™é¢æ–¹å‘ï¼š1-å€Ÿæ–¹ï¼Œ2-è´·æ–¹
     */</span>
    <span class="hljs-keyword">private</span> Integer balanceDirection;

    <span class="hljs-comment">/**
     * æ˜¯å¦æœ«çº§ç§‘ç›®
     */</span>
    <span class="hljs-keyword">private</span> Integer isLeaf;

    <span class="hljs-comment">/**
     * æ˜¯å¦ç°é‡‘ç§‘ç›®
     */</span>
    <span class="hljs-keyword">private</span> Integer isCashSubject;

    <span class="hljs-comment">/**
     * æ˜¯å¦é“¶è¡Œç§‘ç›®
     */</span>
    <span class="hljs-keyword">private</span> Integer isBankSubject;

    <span class="hljs-comment">/**
     * è¾…åŠ©æ ¸ç®—ç±»å‹ï¼ˆJSONæ•°ç»„ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> String auxiliaryTypes;

    <span class="hljs-comment">/**
     * çŠ¶æ€ï¼š0-åœç”¨ï¼Œ1-å¯ç”¨
     */</span>
    <span class="hljs-keyword">private</span> Integer status;

    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;

    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;

    <span class="hljs-comment">/**
     * å­ç§‘ç›®åˆ—è¡¨ï¼ˆéæ•°æ®åº“å­—æ®µï¼‰
     */</span>
    <span class="hljs-meta">@TableField(exist = false)</span>
    <span class="hljs-keyword">private</span> List&lt;AccSubject&gt; children;
}
</code></pre>
<h4 data-id="heading-14">4.2 å‡­è¯å®ä½“</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.entity;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.*;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.time.LocalDate;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * ä¼šè®¡å‡­è¯å®ä½“
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName("acc_voucher")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AccVoucher</span> {

    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-comment">/**
     * å‡­è¯å·
     */</span>
    <span class="hljs-keyword">private</span> String voucherNo;

    <span class="hljs-comment">/**
     * å‡­è¯å­—ï¼ˆè®°/æ”¶/ä»˜/è½¬ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> String voucherType;

    <span class="hljs-comment">/**
     * å‡­è¯æ—¥æœŸ
     */</span>
    <span class="hljs-keyword">private</span> LocalDate voucherDate;

    <span class="hljs-comment">/**
     * æ‰€å±æœŸé—´
     */</span>
    <span class="hljs-keyword">private</span> String periodCode;

    <span class="hljs-comment">/**
     * é™„ä»¶æ•°
     */</span>
    <span class="hljs-keyword">private</span> Integer attachmentCount;

    <span class="hljs-comment">/**
     * å€Ÿæ–¹åˆè®¡
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal totalDebit;

    <span class="hljs-comment">/**
     * è´·æ–¹åˆè®¡
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal totalCredit;

    <span class="hljs-comment">/**
     * å‡­è¯æ‘˜è¦
     */</span>
    <span class="hljs-keyword">private</span> String summary;

    <span class="hljs-comment">/**
     * çŠ¶æ€ï¼š1-æœªå®¡æ ¸ï¼Œ2-å·²å®¡æ ¸ï¼Œ3-å·²è¿‡è´¦ï¼Œ4-å·²ä½œåºŸ
     */</span>
    <span class="hljs-keyword">private</span> Integer status;

    <span class="hljs-comment">/**
     * æ¥æºç±»å‹
     */</span>
    <span class="hljs-keyword">private</span> String sourceType;

    <span class="hljs-comment">/**
     * æ¥æºå•æ®å·
     */</span>
    <span class="hljs-keyword">private</span> String sourceNo;

    <span class="hljs-keyword">private</span> String createUser;

    <span class="hljs-keyword">private</span> String auditUser;

    <span class="hljs-keyword">private</span> LocalDateTime auditTime;

    <span class="hljs-keyword">private</span> String postUser;

    <span class="hljs-keyword">private</span> LocalDateTime postTime;

    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;

    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;

    <span class="hljs-comment">/**
     * å‡­è¯åˆ†å½•åˆ—è¡¨ï¼ˆéæ•°æ®åº“å­—æ®µï¼‰
     */</span>
    <span class="hljs-meta">@TableField(exist = false)</span>
    <span class="hljs-keyword">private</span> List&lt;AccVoucherEntry&gt; entries;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.entity;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.*;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-comment">/**
 * å‡­è¯åˆ†å½•å®ä½“
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName("acc_voucher_entry")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AccVoucherEntry</span> {

    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-keyword">private</span> Long voucherId;

    <span class="hljs-keyword">private</span> String voucherNo;

    <span class="hljs-comment">/**
     * è¡Œå·
     */</span>
    <span class="hljs-keyword">private</span> Integer lineNo;

    <span class="hljs-keyword">private</span> String subjectCode;

    <span class="hljs-keyword">private</span> String subjectName;

    <span class="hljs-comment">/**
     * æ‘˜è¦
     */</span>
    <span class="hljs-keyword">private</span> String summary;

    <span class="hljs-comment">/**
     * å€Ÿæ–¹é‡‘é¢
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal debitAmount;

    <span class="hljs-comment">/**
     * è´·æ–¹é‡‘é¢
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal creditAmount;

    <span class="hljs-comment">/**
     * å¸ç§
     */</span>
    <span class="hljs-keyword">private</span> String currencyCode;

    <span class="hljs-comment">/**
     * æ±‡ç‡
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal exchangeRate;

    <span class="hljs-comment">/**
     * åŸå¸é‡‘é¢
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal originalAmount;

    <span class="hljs-comment">/**
     * è¾…åŠ©æ ¸ç®—æ•°æ®ï¼ˆJSONï¼‰
     */</span>
    <span class="hljs-keyword">private</span> String auxiliaryData;

    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
}
</code></pre>
<h4 data-id="heading-15">4.3 æšä¸¾å®šä¹‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.enums;

<span class="hljs-keyword">import</span> lombok.Getter;

<span class="hljs-comment">/**
 * ç§‘ç›®ç±»å‹æšä¸¾
 */</span>
<span class="hljs-meta">@Getter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">SubjectTypeEnum</span> {

    ASSET(<span class="hljs-number">1</span>, <span class="hljs-string">"èµ„äº§"</span>),
    LIABILITY(<span class="hljs-number">2</span>, <span class="hljs-string">"è´Ÿå€º"</span>),
    EQUITY(<span class="hljs-number">3</span>, <span class="hljs-string">"æ‰€æœ‰è€…æƒç›Š"</span>),
    COST(<span class="hljs-number">4</span>, <span class="hljs-string">"æˆæœ¬"</span>),
    PROFIT_LOSS(<span class="hljs-number">5</span>, <span class="hljs-string">"æŸç›Š"</span>);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;

    SubjectTypeEnum(Integer code, String desc) {
        <span class="hljs-built_in">this</span>.code = code;
        <span class="hljs-built_in">this</span>.desc = desc;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SubjectTypeEnum <span class="hljs-title function_">of</span><span class="hljs-params">(Integer code)</span> {
        <span class="hljs-keyword">for</span> (SubjectTypeEnum value : values()) {
            <span class="hljs-keyword">if</span> (value.getCode().equals(code)) {
                <span class="hljs-keyword">return</span> value;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.enums;

<span class="hljs-keyword">import</span> lombok.Getter;

<span class="hljs-comment">/**
 * å‡­è¯çŠ¶æ€æšä¸¾
 */</span>
<span class="hljs-meta">@Getter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">VoucherStatusEnum</span> {

    DRAFT(<span class="hljs-number">1</span>, <span class="hljs-string">"æœªå®¡æ ¸"</span>),
    AUDITED(<span class="hljs-number">2</span>, <span class="hljs-string">"å·²å®¡æ ¸"</span>),
    POSTED(<span class="hljs-number">3</span>, <span class="hljs-string">"å·²è¿‡è´¦"</span>),
    VOID(<span class="hljs-number">4</span>, <span class="hljs-string">"å·²ä½œåºŸ"</span>);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;

    VoucherStatusEnum(Integer code, String desc) {
        <span class="hljs-built_in">this</span>.code = code;
        <span class="hljs-built_in">this</span>.desc = desc;
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.enums;

<span class="hljs-keyword">import</span> lombok.Getter;

<span class="hljs-comment">/**
 * ä½™é¢æ–¹å‘æšä¸¾
 */</span>
<span class="hljs-meta">@Getter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">BalanceDirectionEnum</span> {

    DEBIT(<span class="hljs-number">1</span>, <span class="hljs-string">"å€Ÿæ–¹"</span>),
    CREDIT(<span class="hljs-number">2</span>, <span class="hljs-string">"è´·æ–¹"</span>);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;

    BalanceDirectionEnum(Integer code, String desc) {
        <span class="hljs-built_in">this</span>.code = code;
        <span class="hljs-built_in">this</span>.desc = desc;
    }
}
</code></pre>
<h4 data-id="heading-16">4.4 DTOå®šä¹‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.dto;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> javax.validation.constraints.*;
<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.time.LocalDate;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * åˆ›å»ºå‡­è¯è¯·æ±‚
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateVoucherRequest</span> {

    <span class="hljs-comment">/**
     * å‡­è¯å­—
     */</span>
    <span class="hljs-meta">@NotBlank(message = "å‡­è¯å­—ä¸èƒ½ä¸ºç©º")</span>
    <span class="hljs-keyword">private</span> String voucherType;

    <span class="hljs-comment">/**
     * å‡­è¯æ—¥æœŸ
     */</span>
    <span class="hljs-meta">@NotNull(message = "å‡­è¯æ—¥æœŸä¸èƒ½ä¸ºç©º")</span>
    <span class="hljs-keyword">private</span> LocalDate voucherDate;

    <span class="hljs-comment">/**
     * é™„ä»¶æ•°
     */</span>
    <span class="hljs-keyword">private</span> Integer attachmentCount;

    <span class="hljs-comment">/**
     * å‡­è¯æ‘˜è¦
     */</span>
    <span class="hljs-keyword">private</span> String summary;

    <span class="hljs-comment">/**
     * æ¥æºç±»å‹
     */</span>
    <span class="hljs-keyword">private</span> String sourceType;

    <span class="hljs-comment">/**
     * æ¥æºå•æ®å·
     */</span>
    <span class="hljs-keyword">private</span> String sourceNo;

    <span class="hljs-comment">/**
     * å‡­è¯åˆ†å½•
     */</span>
    <span class="hljs-meta">@NotEmpty(message = "å‡­è¯åˆ†å½•ä¸èƒ½ä¸ºç©º")</span>
    <span class="hljs-meta">@Size(min = 2, message = "å‡­è¯åˆ†å½•è‡³å°‘2è¡Œ")</span>
    <span class="hljs-keyword">private</span> List&lt;VoucherEntryDTO&gt; entries;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.dto;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> javax.validation.constraints.*;
<span class="hljs-keyword">import</span> java.math.BigDecimal;

<span class="hljs-comment">/**
 * å‡­è¯åˆ†å½•DTO
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VoucherEntryDTO</span> {

    <span class="hljs-comment">/**
     * ç§‘ç›®ç¼–ç 
     */</span>
    <span class="hljs-meta">@NotBlank(message = "ç§‘ç›®ç¼–ç ä¸èƒ½ä¸ºç©º")</span>
    <span class="hljs-keyword">private</span> String subjectCode;

    <span class="hljs-comment">/**
     * æ‘˜è¦
     */</span>
    <span class="hljs-meta">@NotBlank(message = "æ‘˜è¦ä¸èƒ½ä¸ºç©º")</span>
    <span class="hljs-keyword">private</span> String summary;

    <span class="hljs-comment">/**
     * å€Ÿæ–¹é‡‘é¢
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal debitAmount;

    <span class="hljs-comment">/**
     * è´·æ–¹é‡‘é¢
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal creditAmount;

    <span class="hljs-comment">/**
     * å¸ç§
     */</span>
    <span class="hljs-keyword">private</span> String currencyCode;

    <span class="hljs-comment">/**
     * æ±‡ç‡
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal exchangeRate;

    <span class="hljs-comment">/**
     * åŸå¸é‡‘é¢
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal originalAmount;

    <span class="hljs-comment">/**
     * è¾…åŠ©æ ¸ç®—æ•°æ®
     */</span>
    <span class="hljs-keyword">private</span> AuxiliaryDataDTO auxiliaryData;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.dto;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * è¾…åŠ©æ ¸ç®—æ•°æ®DTO
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuxiliaryDataDTO</span> {

    <span class="hljs-comment">/**
     * éƒ¨é—¨
     */</span>
    <span class="hljs-keyword">private</span> Long departmentId;
    <span class="hljs-keyword">private</span> String departmentName;

    <span class="hljs-comment">/**
     * é¡¹ç›®
     */</span>
    <span class="hljs-keyword">private</span> Long projectId;
    <span class="hljs-keyword">private</span> String projectName;

    <span class="hljs-comment">/**
     * å¾€æ¥å•ä½
     */</span>
    <span class="hljs-keyword">private</span> Long partnerId;
    <span class="hljs-keyword">private</span> String partnerName;

    <span class="hljs-comment">/**
     * å‘˜å·¥
     */</span>
    <span class="hljs-keyword">private</span> Long employeeId;
    <span class="hljs-keyword">private</span> String employeeName;

    <span class="hljs-comment">/**
     * ç°é‡‘æµé¡¹ç›®
     */</span>
    <span class="hljs-keyword">private</span> Long cashFlowItemId;
    <span class="hljs-keyword">private</span> String cashFlowItemName;

    <span class="hljs-comment">/**
     * æ‰©å±•å­—æ®µ
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; extFields;
}
</code></pre>
<h3 data-id="heading-17">äº”ã€ç§‘ç›®ç®¡ç†æœåŠ¡</h3>
<h4 data-id="heading-18">5.1 ç§‘ç›®æ ‘ç»“æ„</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">1001</span> <span class="hljs-string">åº“å­˜ç°é‡‘</span>
<span class="hljs-number">1002</span> <span class="hljs-string">é“¶è¡Œå­˜æ¬¾</span>
  <span class="hljs-number">1002.01</span> <span class="hljs-string">å·¥å•†é“¶è¡Œ</span>
  <span class="hljs-number">1002.02</span> <span class="hljs-string">å»ºè®¾é“¶è¡Œ</span>
<span class="hljs-number">1122</span> <span class="hljs-string">åº”æ”¶è´¦æ¬¾</span>
  <span class="hljs-number">1122.01</span> <span class="hljs-string">å®¢æˆ·A</span>
  <span class="hljs-number">1122.02</span> <span class="hljs-string">å®¢æˆ·B</span>
<span class="hljs-number">1403</span> <span class="hljs-string">åŸææ–™</span>
  <span class="hljs-number">1403.01</span> <span class="hljs-string">ä¸»è¦ææ–™</span>
    <span class="hljs-number">1403.01</span><span class="hljs-number">.01</span> <span class="hljs-string">é’¢æ</span>
    <span class="hljs-number">1403.01</span><span class="hljs-number">.02</span> <span class="hljs-string">é“æ</span>
  <span class="hljs-number">1403.02</span> <span class="hljs-string">è¾…åŠ©ææ–™</span>
<span class="hljs-number">1601</span> <span class="hljs-string">å›ºå®šèµ„äº§</span>
  <span class="hljs-number">1601.01</span> <span class="hljs-string">æˆ¿å±‹å»ºç­‘ç‰©</span>
  <span class="hljs-number">1601.02</span> <span class="hljs-string">æœºå™¨è®¾å¤‡</span>
</code></pre>
<h4 data-id="heading-19">5.2 ç§‘ç›®ç®¡ç†æœåŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.service;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
<span class="hljs-keyword">import</span> com.accounting.common.exception.AccountingException;
<span class="hljs-keyword">import</span> com.accounting.common.result.ResultCode;
<span class="hljs-keyword">import</span> com.accounting.service.dto.CreateSubjectRequest;
<span class="hljs-keyword">import</span> com.accounting.service.entity.AccSubject;
<span class="hljs-keyword">import</span> com.accounting.service.mapper.AccSubjectMapper;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.cache.annotation.CacheEvict;
<span class="hljs-keyword">import</span> org.springframework.cache.annotation.Cacheable;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.stream.Collectors;

<span class="hljs-comment">/**
 * ç§‘ç›®ç®¡ç†æœåŠ¡
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SubjectService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccSubjectMapper subjectMapper;

    <span class="hljs-comment">/**
     * è·å–ç§‘ç›®æ ‘
     */</span>
    <span class="hljs-meta">@Cacheable(value = "subject", key = "'tree'")</span>
    <span class="hljs-keyword">public</span> List&lt;AccSubject&gt; <span class="hljs-title function_">getSubjectTree</span><span class="hljs-params">()</span> {
        List&lt;AccSubject&gt; allSubjects = subjectMapper.selectList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubject&gt;()
                .eq(AccSubject::getStatus, <span class="hljs-number">1</span>)
                .orderByAsc(AccSubject::getSubjectCode)
        );

        <span class="hljs-keyword">return</span> buildTree(allSubjects);
    }

    <span class="hljs-comment">/**
     * æ„å»ºç§‘ç›®æ ‘
     */</span>
    <span class="hljs-keyword">private</span> List&lt;AccSubject&gt; <span class="hljs-title function_">buildTree</span><span class="hljs-params">(List&lt;AccSubject&gt; subjects)</span> {
        Map&lt;String, List&lt;AccSubject&gt;&gt; parentMap = subjects.stream()
            .filter(s -&gt; s.getParentCode() != <span class="hljs-literal">null</span>)
            .collect(Collectors.groupingBy(AccSubject::getParentCode));

        List&lt;AccSubject&gt; roots = subjects.stream()
            .filter(s -&gt; s.getParentCode() == <span class="hljs-literal">null</span> || s.getParentCode().isEmpty())
            .collect(Collectors.toList());

        <span class="hljs-keyword">for</span> (AccSubject root : roots) {
            buildChildren(root, parentMap);
        }

        <span class="hljs-keyword">return</span> roots;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildChildren</span><span class="hljs-params">(AccSubject parent, Map&lt;String, List&lt;AccSubject&gt;&gt; parentMap)</span> {
        List&lt;AccSubject&gt; children = parentMap.get(parent.getSubjectCode());
        <span class="hljs-keyword">if</span> (children != <span class="hljs-literal">null</span> &amp;&amp; !children.isEmpty()) {
            parent.setChildren(children);
            <span class="hljs-keyword">for</span> (AccSubject child : children) {
                buildChildren(child, parentMap);
            }
        }
    }

    <span class="hljs-comment">/**
     * æ ¹æ®ç¼–ç è·å–ç§‘ç›®
     */</span>
    <span class="hljs-meta">@Cacheable(value = "subject", key = "#subjectCode")</span>
    <span class="hljs-keyword">public</span> AccSubject <span class="hljs-title function_">getByCode</span><span class="hljs-params">(String subjectCode)</span> {
        <span class="hljs-keyword">return</span> subjectMapper.selectOne(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubject&gt;()
                .eq(AccSubject::getSubjectCode, subjectCode)
        );
    }

    <span class="hljs-comment">/**
     * è·å–æœ«çº§ç§‘ç›®åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> List&lt;AccSubject&gt; <span class="hljs-title function_">getLeafSubjects</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> subjectMapper.selectList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubject&gt;()
                .eq(AccSubject::getIsLeaf, <span class="hljs-number">1</span>)
                .eq(AccSubject::getStatus, <span class="hljs-number">1</span>)
                .orderByAsc(AccSubject::getSubjectCode)
        );
    }

    <span class="hljs-comment">/**
     * åˆ›å»ºç§‘ç›®
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-meta">@CacheEvict(value = "subject", allEntries = true)</span>
    <span class="hljs-keyword">public</span> AccSubject <span class="hljs-title function_">createSubject</span><span class="hljs-params">(CreateSubjectRequest request)</span> {
        <span class="hljs-comment">// 1. æ ¡éªŒç§‘ç›®ç¼–ç å”¯ä¸€æ€§</span>
        <span class="hljs-type">AccSubject</span> <span class="hljs-variable">existSubject</span> <span class="hljs-operator">=</span> getByCode(request.getSubjectCode());
        <span class="hljs-keyword">if</span> (existSubject != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.SUBJECT_CODE_EXISTS);
        }

        <span class="hljs-comment">// 2. æ ¡éªŒä¸Šçº§ç§‘ç›®</span>
        <span class="hljs-type">AccSubject</span> <span class="hljs-variable">parent</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (request.getParentCode() != <span class="hljs-literal">null</span> &amp;&amp; !request.getParentCode().isEmpty()) {
            parent = getByCode(request.getParentCode());
            <span class="hljs-keyword">if</span> (parent == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PARENT_SUBJECT_NOT_EXIST);
            }
            <span class="hljs-comment">// ä¸Šçº§ç§‘ç›®å¿…é¡»æ˜¯éæœ«çº§</span>
            <span class="hljs-keyword">if</span> (parent.getIsLeaf() == <span class="hljs-number">1</span>) {
                <span class="hljs-comment">// æ£€æŸ¥ä¸Šçº§ç§‘ç›®æ˜¯å¦å·²æœ‰å‘ç”Ÿé¢ï¼Œæœ‰åˆ™ä¸èƒ½æ·»åŠ ä¸‹çº§</span>
                <span class="hljs-keyword">if</span> (hasBalance(parent.getSubjectCode())) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PARENT_HAS_BALANCE);
                }
                <span class="hljs-comment">// æ›´æ–°ä¸Šçº§ä¸ºéæœ«çº§</span>
                parent.setIsLeaf(<span class="hljs-number">0</span>);
                subjectMapper.updateById(parent);
            }
        }

        <span class="hljs-comment">// 3. åˆ›å»ºç§‘ç›®</span>
        <span class="hljs-type">AccSubject</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccSubject</span>();
        subject.setSubjectCode(request.getSubjectCode());
        subject.setSubjectName(request.getSubjectName());
        subject.setParentCode(request.getParentCode());
        subject.setSubjectLevel(parent != <span class="hljs-literal">null</span> ? parent.getSubjectLevel() + <span class="hljs-number">1</span> : <span class="hljs-number">1</span>);
        subject.setSubjectType(parent != <span class="hljs-literal">null</span> ? parent.getSubjectType() : request.getSubjectType());
        subject.setBalanceDirection(parent != <span class="hljs-literal">null</span> ? parent.getBalanceDirection() : request.getBalanceDirection());
        subject.setIsLeaf(<span class="hljs-number">1</span>);
        subject.setIsCashSubject(request.getIsCashSubject() != <span class="hljs-literal">null</span> ? request.getIsCashSubject() : <span class="hljs-number">0</span>);
        subject.setIsBankSubject(request.getIsBankSubject() != <span class="hljs-literal">null</span> ? request.getIsBankSubject() : <span class="hljs-number">0</span>);
        subject.setAuxiliaryTypes(request.getAuxiliaryTypes());
        subject.setStatus(<span class="hljs-number">1</span>);

        subjectMapper.insert(subject);

        log.info(<span class="hljs-string">"åˆ›å»ºç§‘ç›®æˆåŠŸ: code={}, name={}"</span>, subject.getSubjectCode(), subject.getSubjectName());

        <span class="hljs-keyword">return</span> subject;
    }

    <span class="hljs-comment">/**
     * æ£€æŸ¥ç§‘ç›®æ˜¯å¦æœ‰ä½™é¢
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasBalance</span><span class="hljs-params">(String subjectCode)</span> {
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> æŸ¥è¯¢ç§‘ç›®ä½™é¢è¡¨åˆ¤æ–­</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">/**
     * æ ¡éªŒç§‘ç›®æ˜¯å¦å¯ç”¨äºè®°è´¦
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">validateForVoucher</span><span class="hljs-params">(String subjectCode)</span> {
        <span class="hljs-type">AccSubject</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> getByCode(subjectCode);
        <span class="hljs-keyword">if</span> (subject == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.SUBJECT_NOT_EXIST);
        }
        <span class="hljs-keyword">if</span> (subject.getStatus() != <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.SUBJECT_DISABLED);
        }
        <span class="hljs-keyword">if</span> (subject.getIsLeaf() != <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.SUBJECT_NOT_LEAF);
        }
    }
}
</code></pre>
<h3 data-id="heading-20">å…­ã€å‡­è¯ç®¡ç†æœåŠ¡</h3>
<h4 data-id="heading-21">6.1 å‡­è¯å¤„ç†æµç¨‹</h4>
<pre><code class="hljs language-rust" lang="rust">+----------+     +----------+     +----------+     +----------+     +----------+
|  å½•å…¥    | -<span class="hljs-punctuation">-&gt;</span> |  ä¿å­˜    | -<span class="hljs-punctuation">-&gt;</span> |  å®¡æ ¸    | -<span class="hljs-punctuation">-&gt;</span> |  è¿‡è´¦    | -<span class="hljs-punctuation">-&gt;</span> |  å®Œæˆ    |
+----------+     +----------+     +----------+     +----------+     +----------+
     |               |               |               |               |
     v               v               v               v               v
  å¡«å†™åˆ†å½•       æ ¡éªŒå€Ÿè´·å¹³è¡¡    å®¡æ ¸äººç¡®è®¤     æ›´æ–°ç§‘ç›®ä½™é¢    å‡­è¯çŠ¶æ€å®Œæˆ
  é€‰æ‹©ç§‘ç›®       ç”Ÿæˆå‡­è¯å·      æ£€æŸ¥åˆè§„æ€§     è®°å½•æ˜ç»†è´¦      ç”Ÿæˆè´¦ç°¿
  è¾…åŠ©æ ¸ç®—       ä¿å­˜æ•°æ®åº“      æ›´æ–°çŠ¶æ€       æ›´æ–°è¾…åŠ©ä½™é¢
</code></pre>
<h4 data-id="heading-22">6.2 å‡­è¯æœåŠ¡å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.service;

<span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;
<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.update.LambdaUpdateWrapper;
<span class="hljs-keyword">import</span> com.accounting.common.exception.AccountingException;
<span class="hljs-keyword">import</span> com.accounting.common.result.ResultCode;
<span class="hljs-keyword">import</span> com.accounting.service.dto.*;
<span class="hljs-keyword">import</span> com.accounting.service.entity.*;
<span class="hljs-keyword">import</span> com.accounting.service.enums.VoucherStatusEnum;
<span class="hljs-keyword">import</span> com.accounting.service.mapper.*;
<span class="hljs-keyword">import</span> com.accounting.service.utils.VoucherNoGenerator;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * å‡­è¯ç®¡ç†æœåŠ¡
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VoucherService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccVoucherMapper voucherMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccVoucherEntryMapper entryMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccPeriodMapper periodMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SubjectService subjectService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PeriodService periodService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BalanceService balanceService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OperationLogService logService;

    <span class="hljs-comment">/**
     * åˆ›å»ºå‡­è¯
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> AccVoucher <span class="hljs-title function_">createVoucher</span><span class="hljs-params">(String operator, CreateVoucherRequest request)</span> {
        <span class="hljs-comment">// 1. æ ¡éªŒæœŸé—´çŠ¶æ€</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">periodCode</span> <span class="hljs-operator">=</span> periodService.getPeriodCode(request.getVoucherDate());
        <span class="hljs-type">AccPeriod</span> <span class="hljs-variable">period</span> <span class="hljs-operator">=</span> periodService.getByCode(periodCode);
        <span class="hljs-keyword">if</span> (period == <span class="hljs-literal">null</span> || period.getStatus() != <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PERIOD_NOT_OPEN);
        }

        <span class="hljs-comment">// 2. æ ¡éªŒåˆ†å½•</span>
        validateEntries(request.getEntries());

        <span class="hljs-comment">// 3. è®¡ç®—å€Ÿè´·åˆè®¡</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalDebit</span> <span class="hljs-operator">=</span> BigDecimal.ZERO;
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalCredit</span> <span class="hljs-operator">=</span> BigDecimal.ZERO;
        <span class="hljs-keyword">for</span> (VoucherEntryDTO entry : request.getEntries()) {
            totalDebit = totalDebit.add(
                entry.getDebitAmount() != <span class="hljs-literal">null</span> ? entry.getDebitAmount() : BigDecimal.ZERO);
            totalCredit = totalCredit.add(
                entry.getCreditAmount() != <span class="hljs-literal">null</span> ? entry.getCreditAmount() : BigDecimal.ZERO);
        }

        <span class="hljs-comment">// 4. æ ¡éªŒå€Ÿè´·å¹³è¡¡</span>
        <span class="hljs-keyword">if</span> (totalDebit.compareTo(totalCredit) != <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.DEBIT_CREDIT_NOT_BALANCE);
        }

        <span class="hljs-comment">// 5. ç”Ÿæˆå‡­è¯å·</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">voucherNo</span> <span class="hljs-operator">=</span> VoucherNoGenerator.generate(request.getVoucherType(), periodCode);

        <span class="hljs-comment">// 6. åˆ›å»ºå‡­è¯</span>
        <span class="hljs-type">AccVoucher</span> <span class="hljs-variable">voucher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccVoucher</span>();
        voucher.setVoucherNo(voucherNo);
        voucher.setVoucherType(request.getVoucherType());
        voucher.setVoucherDate(request.getVoucherDate());
        voucher.setPeriodCode(periodCode);
        voucher.setAttachmentCount(request.getAttachmentCount() != <span class="hljs-literal">null</span> ? request.getAttachmentCount() : <span class="hljs-number">0</span>);
        voucher.setTotalDebit(totalDebit);
        voucher.setTotalCredit(totalCredit);
        voucher.setSummary(request.getSummary());
        voucher.setStatus(VoucherStatusEnum.DRAFT.getCode());
        voucher.setSourceType(request.getSourceType());
        voucher.setSourceNo(request.getSourceNo());
        voucher.setCreateUser(operator);

        voucherMapper.insert(voucher);

        <span class="hljs-comment">// 7. åˆ›å»ºåˆ†å½•</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">lineNo</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-keyword">for</span> (VoucherEntryDTO entryDTO : request.getEntries()) {
            <span class="hljs-type">AccSubject</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> subjectService.getByCode(entryDTO.getSubjectCode());

            <span class="hljs-type">AccVoucherEntry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccVoucherEntry</span>();
            entry.setVoucherId(voucher.getId());
            entry.setVoucherNo(voucherNo);
            entry.setLineNo(lineNo++);
            entry.setSubjectCode(entryDTO.getSubjectCode());
            entry.setSubjectName(subject.getSubjectName());
            entry.setSummary(entryDTO.getSummary());
            entry.setDebitAmount(entryDTO.getDebitAmount() != <span class="hljs-literal">null</span> ? entryDTO.getDebitAmount() : BigDecimal.ZERO);
            entry.setCreditAmount(entryDTO.getCreditAmount() != <span class="hljs-literal">null</span> ? entryDTO.getCreditAmount() : BigDecimal.ZERO);
            entry.setCurrencyCode(entryDTO.getCurrencyCode() != <span class="hljs-literal">null</span> ? entryDTO.getCurrencyCode() : <span class="hljs-string">"CNY"</span>);
            entry.setExchangeRate(entryDTO.getExchangeRate() != <span class="hljs-literal">null</span> ? entryDTO.getExchangeRate() : BigDecimal.ONE);
            entry.setOriginalAmount(entryDTO.getOriginalAmount());

            <span class="hljs-keyword">if</span> (entryDTO.getAuxiliaryData() != <span class="hljs-literal">null</span>) {
                entry.setAuxiliaryData(JSON.toJSONString(entryDTO.getAuxiliaryData()));
            }

            entryMapper.insert(entry);
        }

        <span class="hljs-comment">// 8. è®°å½•æ“ä½œæ—¥å¿—</span>
        logService.log(<span class="hljs-string">"CREATE"</span>, <span class="hljs-string">"VOUCHER"</span>, voucher.getId().toString(), voucherNo,
            <span class="hljs-string">"åˆ›å»ºå‡­è¯"</span>, <span class="hljs-literal">null</span>, JSON.toJSONString(voucher), operator);

        log.info(<span class="hljs-string">"åˆ›å»ºå‡­è¯æˆåŠŸ: voucherNo={}, totalDebit={}"</span>, voucherNo, totalDebit);

        voucher.setEntries(getEntriesByVoucherId(voucher.getId()));
        <span class="hljs-keyword">return</span> voucher;
    }

    <span class="hljs-comment">/**
     * æ ¡éªŒåˆ†å½•
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">validateEntries</span><span class="hljs-params">(List&lt;VoucherEntryDTO&gt; entries)</span> {
        <span class="hljs-keyword">for</span> (VoucherEntryDTO entry : entries) {
            <span class="hljs-comment">// æ ¡éªŒç§‘ç›®</span>
            subjectService.validateForVoucher(entry.getSubjectCode());

            <span class="hljs-comment">// æ ¡éªŒé‡‘é¢ï¼ˆå€Ÿè´·å¿…é¡»æœ‰ä¸€ä¸ªï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">hasDebit</span> <span class="hljs-operator">=</span> entry.getDebitAmount() != <span class="hljs-literal">null</span> &amp;&amp; entry.getDebitAmount().compareTo(BigDecimal.ZERO) &gt; <span class="hljs-number">0</span>;
            <span class="hljs-type">boolean</span> <span class="hljs-variable">hasCredit</span> <span class="hljs-operator">=</span> entry.getCreditAmount() != <span class="hljs-literal">null</span> &amp;&amp; entry.getCreditAmount().compareTo(BigDecimal.ZERO) &gt; <span class="hljs-number">0</span>;

            <span class="hljs-keyword">if</span> (!hasDebit &amp;&amp; !hasCredit) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.ENTRY_AMOUNT_REQUIRED);
            }

            <span class="hljs-keyword">if</span> (hasDebit &amp;&amp; hasCredit) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.ENTRY_DEBIT_CREDIT_BOTH);
            }
        }
    }

    <span class="hljs-comment">/**
     * å®¡æ ¸å‡­è¯
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">auditVoucher</span><span class="hljs-params">(String operator, Long voucherId)</span> {
        <span class="hljs-type">AccVoucher</span> <span class="hljs-variable">voucher</span> <span class="hljs-operator">=</span> voucherMapper.selectById(voucherId);
        <span class="hljs-keyword">if</span> (voucher == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.VOUCHER_NOT_EXIST);
        }

        <span class="hljs-comment">// æ ¡éªŒçŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (!VoucherStatusEnum.DRAFT.getCode().equals(voucher.getStatus())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.VOUCHER_STATUS_ERROR);
        }

        <span class="hljs-comment">// æ ¡éªŒæœŸé—´</span>
        <span class="hljs-type">AccPeriod</span> <span class="hljs-variable">period</span> <span class="hljs-operator">=</span> periodService.getByCode(voucher.getPeriodCode());
        <span class="hljs-keyword">if</span> (period.getStatus() != <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PERIOD_NOT_OPEN);
        }

        <span class="hljs-comment">// åˆ¶å•äººä¸èƒ½å®¡æ ¸è‡ªå·±çš„å‡­è¯</span>
        <span class="hljs-keyword">if</span> (operator.equals(voucher.getCreateUser())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.CANNOT_AUDIT_OWN_VOUCHER);
        }

        <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> LocalDateTime.now();
        voucherMapper.update(<span class="hljs-literal">null</span>,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;AccVoucher&gt;()
                .eq(AccVoucher::getId, voucherId)
                .set(AccVoucher::getStatus, VoucherStatusEnum.AUDITED.getCode())
                .set(AccVoucher::getAuditUser, operator)
                .set(AccVoucher::getAuditTime, now)
        );

        logService.log(<span class="hljs-string">"AUDIT"</span>, <span class="hljs-string">"VOUCHER"</span>, voucherId.toString(), voucher.getVoucherNo(),
            <span class="hljs-string">"å®¡æ ¸å‡­è¯"</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, operator);

        log.info(<span class="hljs-string">"å®¡æ ¸å‡­è¯æˆåŠŸ: voucherNo={}, auditor={}"</span>, voucher.getVoucherNo(), operator);
    }

    <span class="hljs-comment">/**
     * å¼ƒå®¡å‡­è¯
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unauditVoucher</span><span class="hljs-params">(String operator, Long voucherId)</span> {
        <span class="hljs-type">AccVoucher</span> <span class="hljs-variable">voucher</span> <span class="hljs-operator">=</span> voucherMapper.selectById(voucherId);
        <span class="hljs-keyword">if</span> (voucher == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.VOUCHER_NOT_EXIST);
        }

        <span class="hljs-comment">// æ ¡éªŒçŠ¶æ€ï¼ˆåªèƒ½å¼ƒå®¡å·²å®¡æ ¸çš„å‡­è¯ï¼‰</span>
        <span class="hljs-keyword">if</span> (!VoucherStatusEnum.AUDITED.getCode().equals(voucher.getStatus())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.VOUCHER_STATUS_ERROR);
        }

        <span class="hljs-comment">// æ ¡éªŒæœŸé—´</span>
        <span class="hljs-type">AccPeriod</span> <span class="hljs-variable">period</span> <span class="hljs-operator">=</span> periodService.getByCode(voucher.getPeriodCode());
        <span class="hljs-keyword">if</span> (period.getStatus() != <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PERIOD_NOT_OPEN);
        }

        <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
        voucherMapper.update(<span class="hljs-literal">null</span>,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;AccVoucher&gt;()
                .eq(AccVoucher::getId, voucherId)
                .set(AccVoucher::getStatus, VoucherStatusEnum.DRAFT.getCode())
                .set(AccVoucher::getAuditUser, <span class="hljs-literal">null</span>)
                .set(AccVoucher::getAuditTime, <span class="hljs-literal">null</span>)
        );

        logService.log(<span class="hljs-string">"UNAUDIT"</span>, <span class="hljs-string">"VOUCHER"</span>, voucherId.toString(), voucher.getVoucherNo(),
            <span class="hljs-string">"å¼ƒå®¡å‡­è¯"</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, operator);

        log.info(<span class="hljs-string">"å¼ƒå®¡å‡­è¯æˆåŠŸ: voucherNo={}"</span>, voucher.getVoucherNo());
    }

    <span class="hljs-comment">/**
     * è¿‡è´¦å‡­è¯
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postVoucher</span><span class="hljs-params">(String operator, Long voucherId)</span> {
        <span class="hljs-type">AccVoucher</span> <span class="hljs-variable">voucher</span> <span class="hljs-operator">=</span> voucherMapper.selectById(voucherId);
        <span class="hljs-keyword">if</span> (voucher == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.VOUCHER_NOT_EXIST);
        }

        <span class="hljs-comment">// æ ¡éªŒçŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (!VoucherStatusEnum.AUDITED.getCode().equals(voucher.getStatus())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.VOUCHER_NOT_AUDITED);
        }

        <span class="hljs-comment">// æ ¡éªŒæœŸé—´</span>
        <span class="hljs-type">AccPeriod</span> <span class="hljs-variable">period</span> <span class="hljs-operator">=</span> periodService.getByCode(voucher.getPeriodCode());
        <span class="hljs-keyword">if</span> (period.getStatus() != <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PERIOD_NOT_OPEN);
        }

        <span class="hljs-comment">// è·å–åˆ†å½•</span>
        List&lt;AccVoucherEntry&gt; entries = getEntriesByVoucherId(voucherId);

        <span class="hljs-comment">// æ›´æ–°ç§‘ç›®ä½™é¢</span>
        <span class="hljs-keyword">for</span> (AccVoucherEntry entry : entries) {
            balanceService.updateBalance(voucher.getPeriodCode(), entry);
        }

        <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> LocalDateTime.now();
        voucherMapper.update(<span class="hljs-literal">null</span>,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;AccVoucher&gt;()
                .eq(AccVoucher::getId, voucherId)
                .set(AccVoucher::getStatus, VoucherStatusEnum.POSTED.getCode())
                .set(AccVoucher::getPostUser, operator)
                .set(AccVoucher::getPostTime, now)
        );

        logService.log(<span class="hljs-string">"POST"</span>, <span class="hljs-string">"VOUCHER"</span>, voucherId.toString(), voucher.getVoucherNo(),
            <span class="hljs-string">"è¿‡è´¦å‡­è¯"</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, operator);

        log.info(<span class="hljs-string">"è¿‡è´¦å‡­è¯æˆåŠŸ: voucherNo={}"</span>, voucher.getVoucherNo());
    }

    <span class="hljs-comment">/**
     * ä½œåºŸå‡­è¯
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">voidVoucher</span><span class="hljs-params">(String operator, Long voucherId, String reason)</span> {
        <span class="hljs-type">AccVoucher</span> <span class="hljs-variable">voucher</span> <span class="hljs-operator">=</span> voucherMapper.selectById(voucherId);
        <span class="hljs-keyword">if</span> (voucher == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.VOUCHER_NOT_EXIST);
        }

        <span class="hljs-comment">// å·²è¿‡è´¦çš„å‡­è¯ä¸èƒ½ç›´æ¥ä½œåºŸ</span>
        <span class="hljs-keyword">if</span> (VoucherStatusEnum.POSTED.getCode().equals(voucher.getStatus())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.POSTED_VOUCHER_CANNOT_VOID);
        }

        <span class="hljs-comment">// æ ¡éªŒæœŸé—´</span>
        <span class="hljs-type">AccPeriod</span> <span class="hljs-variable">period</span> <span class="hljs-operator">=</span> periodService.getByCode(voucher.getPeriodCode());
        <span class="hljs-keyword">if</span> (period.getStatus() != <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PERIOD_NOT_OPEN);
        }

        <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
        voucherMapper.update(<span class="hljs-literal">null</span>,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;AccVoucher&gt;()
                .eq(AccVoucher::getId, voucherId)
                .set(AccVoucher::getStatus, VoucherStatusEnum.VOID.getCode())
        );

        logService.log(<span class="hljs-string">"VOID"</span>, <span class="hljs-string">"VOUCHER"</span>, voucherId.toString(), voucher.getVoucherNo(),
            <span class="hljs-string">"ä½œåºŸå‡­è¯ï¼š"</span> + reason, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, operator);

        log.info(<span class="hljs-string">"ä½œåºŸå‡­è¯æˆåŠŸ: voucherNo={}, reason={}"</span>, voucher.getVoucherNo(), reason);
    }

    <span class="hljs-comment">/**
     * è·å–å‡­è¯åˆ†å½•
     */</span>
    <span class="hljs-keyword">public</span> List&lt;AccVoucherEntry&gt; <span class="hljs-title function_">getEntriesByVoucherId</span><span class="hljs-params">(Long voucherId)</span> {
        <span class="hljs-keyword">return</span> entryMapper.selectList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccVoucherEntry&gt;()
                .eq(AccVoucherEntry::getVoucherId, voucherId)
                .orderByAsc(AccVoucherEntry::getLineNo)
        );
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å‡­è¯è¯¦æƒ…
     */</span>
    <span class="hljs-keyword">public</span> AccVoucher <span class="hljs-title function_">getVoucherDetail</span><span class="hljs-params">(Long voucherId)</span> {
        <span class="hljs-type">AccVoucher</span> <span class="hljs-variable">voucher</span> <span class="hljs-operator">=</span> voucherMapper.selectById(voucherId);
        <span class="hljs-keyword">if</span> (voucher != <span class="hljs-literal">null</span>) {
            voucher.setEntries(getEntriesByVoucherId(voucherId));
        }
        <span class="hljs-keyword">return</span> voucher;
    }
}
</code></pre>
<h4 data-id="heading-23">6.3 å‡­è¯å·ç”Ÿæˆå™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.utils;

<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> java.time.LocalDate;
<span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;

<span class="hljs-comment">/**
 * å‡­è¯å·ç”Ÿæˆå™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VoucherNoGenerator</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">VOUCHER_NO_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"accounting:voucher:no:"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">VoucherNoGenerator</span><span class="hljs-params">(RedisTemplate&lt;String, Object&gt; redisTemplate)</span> {
        VoucherNoGenerator.redisTemplate = redisTemplate;
    }

    <span class="hljs-comment">/**
     * ç”Ÿæˆå‡­è¯å·
     * æ ¼å¼ï¼šå‡­è¯å­—-æœŸé—´-åºå·ï¼Œå¦‚ï¼šè®°-202401-0001
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generate</span><span class="hljs-params">(String voucherType, String periodCode)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> VOUCHER_NO_KEY + periodCode + <span class="hljs-string">":"</span> + voucherType;

        <span class="hljs-comment">// ä½¿ç”¨Redisè‡ªå¢ç”Ÿæˆåºå·</span>
        <span class="hljs-type">Long</span> <span class="hljs-variable">seq</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().increment(key);

        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%s-%s-%04d"</span>, voucherType, periodCode, seq);
    }

    <span class="hljs-comment">/**
     * é‡ç½®åºå·ï¼ˆæœŸé—´å¯ç”¨æ—¶è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resetSequence</span><span class="hljs-params">(String periodCode, String voucherType)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> VOUCHER_NO_KEY + periodCode + <span class="hljs-string">":"</span> + voucherType;
        redisTemplate.delete(key);
    }
}
</code></pre>
<h3 data-id="heading-24">ä¸ƒã€ä½™é¢ç®¡ç†æœåŠ¡</h3>
<h4 data-id="heading-25">7.1 ä½™é¢è®¡ç®—å…¬å¼</h4>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+------------------------------------------------------------------+</span>
|                        ä½™é¢è®¡ç®—å…¬å¼                               |
<span class="hljs-addition">+------------------------------------------------------------------+</span>
|                                                                   |
|  å€Ÿæ–¹ä½™é¢ç§‘ç›®ï¼ˆèµ„äº§/è´¹ç”¨ï¼‰ï¼š                                       |
|  æœŸæœ«ä½™é¢ = æœŸåˆä½™é¢ + æœ¬æœŸå€Ÿæ–¹ - æœ¬æœŸè´·æ–¹                          |
|                                                                   |
|  è´·æ–¹ä½™é¢ç§‘ç›®ï¼ˆè´Ÿå€º/æƒç›Š/æ”¶å…¥ï¼‰ï¼š                                   |
|  æœŸæœ«ä½™é¢ = æœŸåˆä½™é¢ + æœ¬æœŸè´·æ–¹ - æœ¬æœŸå€Ÿæ–¹                          |
|                                                                   |
<span class="hljs-addition">+------------------------------------------------------------------+</span>
|                                                                   |
|  æœ¬å¹´ç´¯è®¡å€Ÿæ–¹ = ä¸ŠæœŸæœ¬å¹´ç´¯è®¡å€Ÿæ–¹ + æœ¬æœŸå€Ÿæ–¹                         |
|  æœ¬å¹´ç´¯è®¡è´·æ–¹ = ä¸ŠæœŸæœ¬å¹´ç´¯è®¡è´·æ–¹ + æœ¬æœŸè´·æ–¹                         |
|                                                                   |
<span class="hljs-addition">+------------------------------------------------------------------+</span>
</code></pre>
<h4 data-id="heading-26">7.2 ä½™é¢æœåŠ¡å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.service;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.update.LambdaUpdateWrapper;
<span class="hljs-keyword">import</span> com.accounting.service.entity.*;
<span class="hljs-keyword">import</span> com.accounting.service.enums.BalanceDirectionEnum;
<span class="hljs-keyword">import</span> com.accounting.service.mapper.*;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * ä½™é¢ç®¡ç†æœåŠ¡
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BalanceService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccSubjectBalanceMapper balanceMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccAuxiliaryBalanceMapper auxiliaryBalanceMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SubjectService subjectService;

    <span class="hljs-comment">/**
     * æ›´æ–°ç§‘ç›®ä½™é¢ï¼ˆå‡­è¯è¿‡è´¦æ—¶è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateBalance</span><span class="hljs-params">(String periodCode, AccVoucherEntry entry)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">subjectCode</span> <span class="hljs-operator">=</span> entry.getSubjectCode();
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">debitAmount</span> <span class="hljs-operator">=</span> entry.getDebitAmount();
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">creditAmount</span> <span class="hljs-operator">=</span> entry.getCreditAmount();

        <span class="hljs-comment">// 1. æ›´æ–°ç§‘ç›®ä½™é¢</span>
        <span class="hljs-type">AccSubjectBalance</span> <span class="hljs-variable">balance</span> <span class="hljs-operator">=</span> getOrCreateBalance(periodCode, subjectCode);

        <span class="hljs-comment">// æ›´æ–°æœ¬æœŸå‘ç”Ÿé¢</span>
        balance.setPeriodDebit(balance.getPeriodDebit().add(debitAmount));
        balance.setPeriodCredit(balance.getPeriodCredit().add(creditAmount));

        <span class="hljs-comment">// æ›´æ–°æœ¬å¹´ç´¯è®¡</span>
        balance.setYearDebit(balance.getYearDebit().add(debitAmount));
        balance.setYearCredit(balance.getYearCredit().add(creditAmount));

        <span class="hljs-comment">// è®¡ç®—æœŸæœ«ä½™é¢</span>
        <span class="hljs-type">AccSubject</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> subjectService.getByCode(subjectCode);
        calculateEndBalance(balance, subject.getBalanceDirection());

        balanceMapper.updateById(balance);

        <span class="hljs-comment">// 2. æ›´æ–°è¾…åŠ©æ ¸ç®—ä½™é¢</span>
        <span class="hljs-keyword">if</span> (entry.getAuxiliaryData() != <span class="hljs-literal">null</span> &amp;&amp; !entry.getAuxiliaryData().isEmpty()) {
            updateAuxiliaryBalance(periodCode, entry);
        }

        <span class="hljs-comment">// 3. çº§è”æ›´æ–°ä¸Šçº§ç§‘ç›®ä½™é¢</span>
        updateParentBalance(periodCode, subjectCode, debitAmount, creditAmount);
    }

    <span class="hljs-comment">/**
     * è·å–æˆ–åˆ›å»ºç§‘ç›®ä½™é¢
     */</span>
    <span class="hljs-keyword">private</span> AccSubjectBalance <span class="hljs-title function_">getOrCreateBalance</span><span class="hljs-params">(String periodCode, String subjectCode)</span> {
        <span class="hljs-type">AccSubjectBalance</span> <span class="hljs-variable">balance</span> <span class="hljs-operator">=</span> balanceMapper.selectOne(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubjectBalance&gt;()
                .eq(AccSubjectBalance::getPeriodCode, periodCode)
                .eq(AccSubjectBalance::getSubjectCode, subjectCode)
        );

        <span class="hljs-keyword">if</span> (balance == <span class="hljs-literal">null</span>) {
            balance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccSubjectBalance</span>();
            balance.setPeriodCode(periodCode);
            balance.setSubjectCode(subjectCode);
            balance.setBeginDebit(BigDecimal.ZERO);
            balance.setBeginCredit(BigDecimal.ZERO);
            balance.setPeriodDebit(BigDecimal.ZERO);
            balance.setPeriodCredit(BigDecimal.ZERO);
            balance.setYearDebit(BigDecimal.ZERO);
            balance.setYearCredit(BigDecimal.ZERO);
            balance.setEndDebit(BigDecimal.ZERO);
            balance.setEndCredit(BigDecimal.ZERO);

            <span class="hljs-comment">// è·å–ä¸ŠæœŸæœŸæœ«ä½œä¸ºæœ¬æœŸæœŸåˆ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">lastPeriodCode</span> <span class="hljs-operator">=</span> getLastPeriodCode(periodCode);
            <span class="hljs-keyword">if</span> (lastPeriodCode != <span class="hljs-literal">null</span>) {
                <span class="hljs-type">AccSubjectBalance</span> <span class="hljs-variable">lastBalance</span> <span class="hljs-operator">=</span> balanceMapper.selectOne(
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubjectBalance&gt;()
                        .eq(AccSubjectBalance::getPeriodCode, lastPeriodCode)
                        .eq(AccSubjectBalance::getSubjectCode, subjectCode)
                );
                <span class="hljs-keyword">if</span> (lastBalance != <span class="hljs-literal">null</span>) {
                    balance.setBeginDebit(lastBalance.getEndDebit());
                    balance.setBeginCredit(lastBalance.getEndCredit());
                    <span class="hljs-comment">// å¦‚æœæ˜¯å¹´åˆï¼Œæœ¬å¹´ç´¯è®¡ä»0å¼€å§‹</span>
                    <span class="hljs-keyword">if</span> (!periodCode.endsWith(<span class="hljs-string">"01"</span>)) {
                        balance.setYearDebit(lastBalance.getYearDebit());
                        balance.setYearCredit(lastBalance.getYearCredit());
                    }
                }
            }

            balanceMapper.insert(balance);
        }

        <span class="hljs-keyword">return</span> balance;
    }

    <span class="hljs-comment">/**
     * è®¡ç®—æœŸæœ«ä½™é¢
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">calculateEndBalance</span><span class="hljs-params">(AccSubjectBalance balance, Integer balanceDirection)</span> {
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">beginBalance</span> <span class="hljs-operator">=</span> balance.getBeginDebit().subtract(balance.getBeginCredit());
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">periodChange</span> <span class="hljs-operator">=</span> balance.getPeriodDebit().subtract(balance.getPeriodCredit());
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">endBalance</span> <span class="hljs-operator">=</span> beginBalance.add(periodChange);

        <span class="hljs-keyword">if</span> (endBalance.compareTo(BigDecimal.ZERO) &gt;= <span class="hljs-number">0</span>) {
            balance.setEndDebit(endBalance);
            balance.setEndCredit(BigDecimal.ZERO);
        } <span class="hljs-keyword">else</span> {
            balance.setEndDebit(BigDecimal.ZERO);
            balance.setEndCredit(endBalance.abs());
        }
    }

    <span class="hljs-comment">/**
     * æ›´æ–°ä¸Šçº§ç§‘ç›®ä½™é¢
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateParentBalance</span><span class="hljs-params">(String periodCode, String subjectCode,
                                      BigDecimal debitAmount, BigDecimal creditAmount)</span> {
        <span class="hljs-type">AccSubject</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> subjectService.getByCode(subjectCode);
        <span class="hljs-keyword">if</span> (subject.getParentCode() == <span class="hljs-literal">null</span> || subject.getParentCode().isEmpty()) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-type">AccSubjectBalance</span> <span class="hljs-variable">parentBalance</span> <span class="hljs-operator">=</span> getOrCreateBalance(periodCode, subject.getParentCode());

        parentBalance.setPeriodDebit(parentBalance.getPeriodDebit().add(debitAmount));
        parentBalance.setPeriodCredit(parentBalance.getPeriodCredit().add(creditAmount));
        parentBalance.setYearDebit(parentBalance.getYearDebit().add(debitAmount));
        parentBalance.setYearCredit(parentBalance.getYearCredit().add(creditAmount));

        <span class="hljs-type">AccSubject</span> <span class="hljs-variable">parentSubject</span> <span class="hljs-operator">=</span> subjectService.getByCode(subject.getParentCode());
        calculateEndBalance(parentBalance, parentSubject.getBalanceDirection());

        balanceMapper.updateById(parentBalance);

        <span class="hljs-comment">// é€’å½’æ›´æ–°æ›´ä¸Šçº§</span>
        updateParentBalance(periodCode, subject.getParentCode(), debitAmount, creditAmount);
    }

    <span class="hljs-comment">/**
     * æ›´æ–°è¾…åŠ©æ ¸ç®—ä½™é¢
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateAuxiliaryBalance</span><span class="hljs-params">(String periodCode, AccVoucherEntry entry)</span> {
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> è§£æè¾…åŠ©æ ¸ç®—æ•°æ®å¹¶æ›´æ–°å¯¹åº”ä½™é¢</span>
    }

    <span class="hljs-comment">/**
     * è·å–ä¸ŠæœŸæœŸé—´ç¼–ç 
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getLastPeriodCode</span><span class="hljs-params">(String periodCode)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">year</span> <span class="hljs-operator">=</span> Integer.parseInt(periodCode.substring(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>));
        <span class="hljs-type">int</span> <span class="hljs-variable">month</span> <span class="hljs-operator">=</span> Integer.parseInt(periodCode.substring(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>));

        <span class="hljs-keyword">if</span> (month == <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%d%02d"</span>, year - <span class="hljs-number">1</span>, <span class="hljs-number">12</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%d%02d"</span>, year, month - <span class="hljs-number">1</span>);
        }
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢ç§‘ç›®ä½™é¢
     */</span>
    <span class="hljs-keyword">public</span> AccSubjectBalance <span class="hljs-title function_">getBalance</span><span class="hljs-params">(String periodCode, String subjectCode)</span> {
        <span class="hljs-keyword">return</span> balanceMapper.selectOne(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubjectBalance&gt;()
                .eq(AccSubjectBalance::getPeriodCode, periodCode)
                .eq(AccSubjectBalance::getSubjectCode, subjectCode)
        );
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æœŸé—´æ‰€æœ‰ç§‘ç›®ä½™é¢
     */</span>
    <span class="hljs-keyword">public</span> List&lt;AccSubjectBalance&gt; <span class="hljs-title function_">getBalancesByPeriod</span><span class="hljs-params">(String periodCode)</span> {
        <span class="hljs-keyword">return</span> balanceMapper.selectList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubjectBalance&gt;()
                .eq(AccSubjectBalance::getPeriodCode, periodCode)
                .orderByAsc(AccSubjectBalance::getSubjectCode)
        );
    }

    <span class="hljs-comment">/**
     * è¯•ç®—å¹³è¡¡æ£€æŸ¥
     */</span>
    <span class="hljs-keyword">public</span> TrialBalanceResult <span class="hljs-title function_">checkTrialBalance</span><span class="hljs-params">(String periodCode)</span> {
        List&lt;AccSubjectBalance&gt; balances = getBalancesByPeriod(periodCode);

        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalBeginDebit</span> <span class="hljs-operator">=</span> BigDecimal.ZERO;
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalBeginCredit</span> <span class="hljs-operator">=</span> BigDecimal.ZERO;
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalPeriodDebit</span> <span class="hljs-operator">=</span> BigDecimal.ZERO;
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalPeriodCredit</span> <span class="hljs-operator">=</span> BigDecimal.ZERO;
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalEndDebit</span> <span class="hljs-operator">=</span> BigDecimal.ZERO;
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalEndCredit</span> <span class="hljs-operator">=</span> BigDecimal.ZERO;

        <span class="hljs-keyword">for</span> (AccSubjectBalance balance : balances) {
            <span class="hljs-comment">// åªç»Ÿè®¡ä¸€çº§ç§‘ç›®</span>
            <span class="hljs-keyword">if</span> (balance.getSubjectCode().length() == <span class="hljs-number">4</span>) {
                totalBeginDebit = totalBeginDebit.add(balance.getBeginDebit());
                totalBeginCredit = totalBeginCredit.add(balance.getBeginCredit());
                totalPeriodDebit = totalPeriodDebit.add(balance.getPeriodDebit());
                totalPeriodCredit = totalPeriodCredit.add(balance.getPeriodCredit());
                totalEndDebit = totalEndDebit.add(balance.getEndDebit());
                totalEndCredit = totalEndCredit.add(balance.getEndCredit());
            }
        }

        <span class="hljs-type">TrialBalanceResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrialBalanceResult</span>();
        result.setPeriodCode(periodCode);
        result.setBeginDebit(totalBeginDebit);
        result.setBeginCredit(totalBeginCredit);
        result.setPeriodDebit(totalPeriodDebit);
        result.setPeriodCredit(totalPeriodCredit);
        result.setEndDebit(totalEndDebit);
        result.setEndCredit(totalEndCredit);

        <span class="hljs-comment">// æ£€æŸ¥å¹³è¡¡</span>
        result.setBeginBalanced(totalBeginDebit.compareTo(totalBeginCredit) == <span class="hljs-number">0</span>);
        result.setPeriodBalanced(totalPeriodDebit.compareTo(totalPeriodCredit) == <span class="hljs-number">0</span>);
        result.setEndBalanced(totalEndDebit.compareTo(totalEndCredit) == <span class="hljs-number">0</span>);

        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<h3 data-id="heading-27">å…«ã€æœŸé—´ç®¡ç†ä¸ç»“è´¦</h3>
<h4 data-id="heading-28">8.1 æœŸé—´ç»“è´¦æµç¨‹</h4>
<pre><code class="hljs language-rust" lang="rust">+----------+     +----------+     +----------+     +----------+     +----------+
| ç»“è´¦æ£€æŸ¥  | -<span class="hljs-punctuation">-&gt;</span> | è¯•ç®—å¹³è¡¡  | -<span class="hljs-punctuation">-&gt;</span> | æœŸæœ«ç»“è½¬  | -<span class="hljs-punctuation">-&gt;</span> | æ›´æ–°çŠ¶æ€  | -<span class="hljs-punctuation">-&gt;</span> | ç»“è´¦å®Œæˆ  |
+----------+     +----------+     +----------+     +----------+     +----------+
     |               |               |               |               |
     v               v               v               v               v
  å‡­è¯å…¨è¿‡è´¦     å€Ÿè´·å¿…é¡»å¹³è¡¡    æŸç›Šç»“è½¬æœ¬å¹´åˆ©æ¶¦   æœŸé—´çŠ¶æ€=å·²ç»“è´¦  ç”Ÿæˆä¸‹æœŸæœŸåˆ
  æ— æœªå®¡å‡­è¯     æœŸåˆ+å‘ç”Ÿ=æœŸæœ«   è®¡ææŠ˜æ—§ç­‰        è®°å½•ç»“è´¦æ—¶é—´
</code></pre>
<h4 data-id="heading-29">8.2 æœŸé—´æœåŠ¡å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.service;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.update.LambdaUpdateWrapper;
<span class="hljs-keyword">import</span> com.accounting.common.exception.AccountingException;
<span class="hljs-keyword">import</span> com.accounting.common.result.ResultCode;
<span class="hljs-keyword">import</span> com.accounting.service.entity.*;
<span class="hljs-keyword">import</span> com.accounting.service.enums.VoucherStatusEnum;
<span class="hljs-keyword">import</span> com.accounting.service.mapper.*;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-keyword">import</span> java.time.LocalDate;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * æœŸé—´ç®¡ç†æœåŠ¡
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PeriodService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccPeriodMapper periodMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccVoucherMapper voucherMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BalanceService balanceService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> CarryoverService carryoverService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OperationLogService logService;

    <span class="hljs-comment">/**
     * æ ¹æ®æ—¥æœŸè·å–æœŸé—´ç¼–ç 
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPeriodCode</span><span class="hljs-params">(LocalDate date)</span> {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%d%02d"</span>, date.getYear(), date.getMonthValue());
    }

    <span class="hljs-comment">/**
     * æ ¹æ®ç¼–ç è·å–æœŸé—´
     */</span>
    <span class="hljs-keyword">public</span> AccPeriod <span class="hljs-title function_">getByCode</span><span class="hljs-params">(String periodCode)</span> {
        <span class="hljs-keyword">return</span> periodMapper.selectOne(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccPeriod&gt;()
                .eq(AccPeriod::getPeriodCode, periodCode)
        );
    }

    <span class="hljs-comment">/**
     * è·å–å½“å‰æœŸé—´
     */</span>
    <span class="hljs-keyword">public</span> AccPeriod <span class="hljs-title function_">getCurrentPeriod</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> periodMapper.selectOne(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccPeriod&gt;()
                .eq(AccPeriod::getStatus, <span class="hljs-number">1</span>)
                .orderByDesc(AccPeriod::getPeriodCode)
                .last(<span class="hljs-string">"LIMIT 1"</span>)
        );
    }

    <span class="hljs-comment">/**
     * æœŸé—´ç»“è´¦
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">closePeriod</span><span class="hljs-params">(String operator, String periodCode)</span> {
        <span class="hljs-type">AccPeriod</span> <span class="hljs-variable">period</span> <span class="hljs-operator">=</span> getByCode(periodCode);
        <span class="hljs-keyword">if</span> (period == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PERIOD_NOT_EXIST);
        }

        <span class="hljs-keyword">if</span> (period.getStatus() != <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PERIOD_NOT_OPEN);
        }

        <span class="hljs-comment">// 1. æ£€æŸ¥æ˜¯å¦æœ‰æœªå®¡æ ¸å‡­è¯</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">draftCount</span> <span class="hljs-operator">=</span> voucherMapper.selectCount(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccVoucher&gt;()
                .eq(AccVoucher::getPeriodCode, periodCode)
                .eq(AccVoucher::getStatus, VoucherStatusEnum.DRAFT.getCode())
        );
        <span class="hljs-keyword">if</span> (draftCount &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.HAS_UNAUDITED_VOUCHER);
        }

        <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦æœ‰æœªè¿‡è´¦å‡­è¯</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">unpostedCount</span> <span class="hljs-operator">=</span> voucherMapper.selectCount(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccVoucher&gt;()
                .eq(AccVoucher::getPeriodCode, periodCode)
                .eq(AccVoucher::getStatus, VoucherStatusEnum.AUDITED.getCode())
        );
        <span class="hljs-keyword">if</span> (unpostedCount &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.HAS_UNPOSTED_VOUCHER);
        }

        <span class="hljs-comment">// 3. è¯•ç®—å¹³è¡¡æ£€æŸ¥</span>
        <span class="hljs-type">TrialBalanceResult</span> <span class="hljs-variable">trialResult</span> <span class="hljs-operator">=</span> balanceService.checkTrialBalance(periodCode);
        <span class="hljs-keyword">if</span> (!trialResult.isEndBalanced()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.TRIAL_BALANCE_ERROR);
        }

        <span class="hljs-comment">// 4. æ‰§è¡ŒæœŸæœ«ç»“è½¬ï¼ˆæŸç›Šç»“è½¬ï¼‰</span>
        <span class="hljs-keyword">if</span> (periodCode.endsWith(<span class="hljs-string">"12"</span>)) {
            <span class="hljs-comment">// å¹´æœ«ç»“è½¬</span>
            carryoverService.yearEndCarryover(operator, periodCode);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æœˆæœ«ç»“è½¬</span>
            carryoverService.monthEndCarryover(operator, periodCode);
        }

        <span class="hljs-comment">// 5. æ›´æ–°æœŸé—´çŠ¶æ€</span>
        <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> LocalDateTime.now();
        periodMapper.update(<span class="hljs-literal">null</span>,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;AccPeriod&gt;()
                .eq(AccPeriod::getPeriodCode, periodCode)
                .set(AccPeriod::getStatus, <span class="hljs-number">2</span>)
                .set(AccPeriod::getCloseTime, now)
                .set(AccPeriod::getCloseUser, operator)
        );

        <span class="hljs-comment">// 6. åˆ›å»ºä¸‹æœŸæœŸé—´</span>
        createNextPeriod(periodCode);

        logService.log(<span class="hljs-string">"CLOSE"</span>, <span class="hljs-string">"PERIOD"</span>, period.getId().toString(), periodCode,
            <span class="hljs-string">"æœŸé—´ç»“è´¦"</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, operator);

        log.info(<span class="hljs-string">"æœŸé—´ç»“è´¦æˆåŠŸ: periodCode={}, operator={}"</span>, periodCode, operator);
    }

    <span class="hljs-comment">/**
     * åç»“è´¦
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unclosePeriod</span><span class="hljs-params">(String operator, String periodCode)</span> {
        <span class="hljs-type">AccPeriod</span> <span class="hljs-variable">period</span> <span class="hljs-operator">=</span> getByCode(periodCode);
        <span class="hljs-keyword">if</span> (period == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PERIOD_NOT_EXIST);
        }

        <span class="hljs-keyword">if</span> (period.getStatus() != <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.PERIOD_NOT_CLOSED);
        }

        <span class="hljs-comment">// æ£€æŸ¥ä¸‹æœŸæ˜¯å¦æœ‰ä¸šåŠ¡</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">nextPeriodCode</span> <span class="hljs-operator">=</span> getNextPeriodCode(periodCode);
        <span class="hljs-type">AccPeriod</span> <span class="hljs-variable">nextPeriod</span> <span class="hljs-operator">=</span> getByCode(nextPeriodCode);
        <span class="hljs-keyword">if</span> (nextPeriod != <span class="hljs-literal">null</span> &amp;&amp; nextPeriod.getStatus() != <span class="hljs-number">0</span>) {
            <span class="hljs-type">long</span> <span class="hljs-variable">voucherCount</span> <span class="hljs-operator">=</span> voucherMapper.selectCount(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccVoucher&gt;()
                    .eq(AccVoucher::getPeriodCode, nextPeriodCode)
            );
            <span class="hljs-keyword">if</span> (voucherCount &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccountingException</span>(ResultCode.NEXT_PERIOD_HAS_VOUCHER);
            }
        }

        <span class="hljs-comment">// åˆ é™¤è‡ªåŠ¨ç”Ÿæˆçš„ç»“è½¬å‡­è¯</span>
        carryoverService.deleteCarryoverVouchers(periodCode);

        <span class="hljs-comment">// æ›´æ–°æœŸé—´çŠ¶æ€</span>
        periodMapper.update(<span class="hljs-literal">null</span>,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;AccPeriod&gt;()
                .eq(AccPeriod::getPeriodCode, periodCode)
                .set(AccPeriod::getStatus, <span class="hljs-number">1</span>)
                .set(AccPeriod::getCloseTime, <span class="hljs-literal">null</span>)
                .set(AccPeriod::getCloseUser, <span class="hljs-literal">null</span>)
        );

        logService.log(<span class="hljs-string">"UNCLOSE"</span>, <span class="hljs-string">"PERIOD"</span>, period.getId().toString(), periodCode,
            <span class="hljs-string">"æœŸé—´åç»“è´¦"</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, operator);

        log.info(<span class="hljs-string">"æœŸé—´åç»“è´¦æˆåŠŸ: periodCode={}"</span>, periodCode);
    }

    <span class="hljs-comment">/**
     * åˆ›å»ºä¸‹æœŸæœŸé—´
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createNextPeriod</span><span class="hljs-params">(String currentPeriodCode)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">nextPeriodCode</span> <span class="hljs-operator">=</span> getNextPeriodCode(currentPeriodCode);

        <span class="hljs-type">AccPeriod</span> <span class="hljs-variable">existPeriod</span> <span class="hljs-operator">=</span> getByCode(nextPeriodCode);
        <span class="hljs-keyword">if</span> (existPeriod != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å¯ç”¨ä¸‹æœŸ</span>
            periodMapper.update(<span class="hljs-literal">null</span>,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;AccPeriod&gt;()
                    .eq(AccPeriod::getPeriodCode, nextPeriodCode)
                    .set(AccPeriod::getStatus, <span class="hljs-number">1</span>)
            );
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-type">int</span> <span class="hljs-variable">year</span> <span class="hljs-operator">=</span> Integer.parseInt(nextPeriodCode.substring(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>));
        <span class="hljs-type">int</span> <span class="hljs-variable">month</span> <span class="hljs-operator">=</span> Integer.parseInt(nextPeriodCode.substring(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>));

        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">startDate</span> <span class="hljs-operator">=</span> LocalDate.of(year, month, <span class="hljs-number">1</span>);
        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">endDate</span> <span class="hljs-operator">=</span> startDate.plusMonths(<span class="hljs-number">1</span>).minusDays(<span class="hljs-number">1</span>);

        <span class="hljs-type">AccPeriod</span> <span class="hljs-variable">newPeriod</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AccPeriod</span>();
        newPeriod.setPeriodYear(year);
        newPeriod.setPeriodMonth(month);
        newPeriod.setPeriodCode(nextPeriodCode);
        newPeriod.setStartDate(startDate);
        newPeriod.setEndDate(endDate);
        newPeriod.setStatus(<span class="hljs-number">1</span>);

        periodMapper.insert(newPeriod);

        log.info(<span class="hljs-string">"åˆ›å»ºä¸‹æœŸæœŸé—´: periodCode={}"</span>, nextPeriodCode);
    }

    <span class="hljs-comment">/**
     * è·å–ä¸‹æœŸæœŸé—´ç¼–ç 
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getNextPeriodCode</span><span class="hljs-params">(String periodCode)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">year</span> <span class="hljs-operator">=</span> Integer.parseInt(periodCode.substring(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>));
        <span class="hljs-type">int</span> <span class="hljs-variable">month</span> <span class="hljs-operator">=</span> Integer.parseInt(periodCode.substring(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>));

        <span class="hljs-keyword">if</span> (month == <span class="hljs-number">12</span>) {
            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%d%02d"</span>, year + <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%d%02d"</span>, year, month + <span class="hljs-number">1</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-30">8.3 æœŸæœ«ç»“è½¬æœåŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.service;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
<span class="hljs-keyword">import</span> com.accounting.service.dto.*;
<span class="hljs-keyword">import</span> com.accounting.service.entity.*;
<span class="hljs-keyword">import</span> com.accounting.service.enums.SubjectTypeEnum;
<span class="hljs-keyword">import</span> com.accounting.service.mapper.*;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.time.LocalDate;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * æœŸæœ«ç»“è½¬æœåŠ¡
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CarryoverService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccSubjectMapper subjectMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccSubjectBalanceMapper balanceMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VoucherService voucherService;

    <span class="hljs-comment">// æœ¬å¹´åˆ©æ¶¦ç§‘ç›®ç¼–ç </span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PROFIT_SUBJECT_CODE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"4103"</span>;
    <span class="hljs-comment">// åˆ©æ¶¦åˆ†é…-æœªåˆ†é…åˆ©æ¶¦ç§‘ç›®ç¼–ç </span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">RETAINED_EARNINGS_CODE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"4104.01"</span>;

    <span class="hljs-comment">/**
     * æœˆæœ«ç»“è½¬ï¼ˆæŸç›Šç»“è½¬æœ¬å¹´åˆ©æ¶¦ï¼‰
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monthEndCarryover</span><span class="hljs-params">(String operator, String periodCode)</span> {
        log.info(<span class="hljs-string">"å¼€å§‹æœˆæœ«ç»“è½¬: periodCode={}"</span>, periodCode);

        <span class="hljs-comment">// 1. æŸ¥è¯¢æ‰€æœ‰æŸç›Šç±»ç§‘ç›®ä½™é¢</span>
        List&lt;AccSubject&gt; profitLossSubjects = subjectMapper.selectList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubject&gt;()
                .eq(AccSubject::getSubjectType, SubjectTypeEnum.PROFIT_LOSS.getCode())
                .eq(AccSubject::getIsLeaf, <span class="hljs-number">1</span>)
                .eq(AccSubject::getStatus, <span class="hljs-number">1</span>)
        );

        List&lt;VoucherEntryDTO&gt; entries = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalIncome</span> <span class="hljs-operator">=</span> BigDecimal.ZERO;  <span class="hljs-comment">// æ”¶å…¥ç±»è´·æ–¹åˆè®¡</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalExpense</span> <span class="hljs-operator">=</span> BigDecimal.ZERO; <span class="hljs-comment">// è´¹ç”¨ç±»å€Ÿæ–¹åˆè®¡</span>

        <span class="hljs-keyword">for</span> (AccSubject subject : profitLossSubjects) {
            <span class="hljs-type">AccSubjectBalance</span> <span class="hljs-variable">balance</span> <span class="hljs-operator">=</span> balanceMapper.selectOne(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubjectBalance&gt;()
                    .eq(AccSubjectBalance::getPeriodCode, periodCode)
                    .eq(AccSubjectBalance::getSubjectCode, subject.getSubjectCode())
            );

            <span class="hljs-keyword">if</span> (balance == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">amount</span> <span class="hljs-operator">=</span> balance.getPeriodDebit().subtract(balance.getPeriodCredit());
            <span class="hljs-keyword">if</span> (amount.compareTo(BigDecimal.ZERO) == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-comment">// åˆ›å»ºç»“è½¬åˆ†å½•</span>
            <span class="hljs-type">VoucherEntryDTO</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VoucherEntryDTO</span>();
            entry.setSubjectCode(subject.getSubjectCode());
            entry.setSummary(<span class="hljs-string">"æœŸæœ«ç»“è½¬-"</span> + subject.getSubjectName());

            <span class="hljs-comment">// æ”¶å…¥ç±»ç§‘ç›®ï¼ˆè´·æ–¹ä½™é¢ï¼‰ï¼šå€Ÿè®°æ”¶å…¥ï¼Œè´·è®°æœ¬å¹´åˆ©æ¶¦</span>
            <span class="hljs-comment">// è´¹ç”¨ç±»ç§‘ç›®ï¼ˆå€Ÿæ–¹ä½™é¢ï¼‰ï¼šå€Ÿè®°æœ¬å¹´åˆ©æ¶¦ï¼Œè´·è®°è´¹ç”¨</span>
            <span class="hljs-keyword">if</span> (subject.getSubjectCode().startsWith(<span class="hljs-string">"6"</span>)) {
                <span class="hljs-comment">// 6å¼€å¤´ä¸ºæ”¶å…¥ç±»</span>
                <span class="hljs-keyword">if</span> (balance.getPeriodCredit().compareTo(balance.getPeriodDebit()) &gt; <span class="hljs-number">0</span>) {
                    entry.setDebitAmount(balance.getPeriodCredit().subtract(balance.getPeriodDebit()));
                    totalIncome = totalIncome.add(entry.getDebitAmount());
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// è´¹ç”¨ç±»</span>
                <span class="hljs-keyword">if</span> (balance.getPeriodDebit().compareTo(balance.getPeriodCredit()) &gt; <span class="hljs-number">0</span>) {
                    entry.setCreditAmount(balance.getPeriodDebit().subtract(balance.getPeriodCredit()));
                    totalExpense = totalExpense.add(entry.getCreditAmount());
                }
            }

            <span class="hljs-keyword">if</span> ((entry.getDebitAmount() != <span class="hljs-literal">null</span> &amp;&amp; entry.getDebitAmount().compareTo(BigDecimal.ZERO) &gt; <span class="hljs-number">0</span>) ||
                (entry.getCreditAmount() != <span class="hljs-literal">null</span> &amp;&amp; entry.getCreditAmount().compareTo(BigDecimal.ZERO) &gt; <span class="hljs-number">0</span>)) {
                entries.add(entry);
            }
        }

        <span class="hljs-keyword">if</span> (entries.isEmpty()) {
            log.info(<span class="hljs-string">"æ— æŸç›Šå‘ç”Ÿé¢ï¼Œè·³è¿‡ç»“è½¬"</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// 2. æ·»åŠ æœ¬å¹´åˆ©æ¶¦åˆ†å½•</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">profit</span> <span class="hljs-operator">=</span> totalIncome.subtract(totalExpense);
        <span class="hljs-type">VoucherEntryDTO</span> <span class="hljs-variable">profitEntry</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VoucherEntryDTO</span>();
        profitEntry.setSubjectCode(PROFIT_SUBJECT_CODE);
        profitEntry.setSummary(<span class="hljs-string">"æœŸæœ«ç»“è½¬-æœ¬å¹´åˆ©æ¶¦"</span>);
        <span class="hljs-keyword">if</span> (profit.compareTo(BigDecimal.ZERO) &gt; <span class="hljs-number">0</span>) {
            profitEntry.setCreditAmount(profit);
        } <span class="hljs-keyword">else</span> {
            profitEntry.setDebitAmount(profit.abs());
        }
        entries.add(profitEntry);

        <span class="hljs-comment">// 3. ç”Ÿæˆç»“è½¬å‡­è¯</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">year</span> <span class="hljs-operator">=</span> Integer.parseInt(periodCode.substring(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>));
        <span class="hljs-type">int</span> <span class="hljs-variable">month</span> <span class="hljs-operator">=</span> Integer.parseInt(periodCode.substring(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>));
        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">lastDay</span> <span class="hljs-operator">=</span> LocalDate.of(year, month, <span class="hljs-number">1</span>).plusMonths(<span class="hljs-number">1</span>).minusDays(<span class="hljs-number">1</span>);

        <span class="hljs-type">CreateVoucherRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateVoucherRequest</span>();
        request.setVoucherType(<span class="hljs-string">"è½¬"</span>);
        request.setVoucherDate(lastDay);
        request.setSummary(<span class="hljs-string">"æœŸæœ«æŸç›Šç»“è½¬"</span>);
        request.setSourceType(<span class="hljs-string">"AUTO_CARRYOVER"</span>);
        request.setEntries(entries);

        voucherService.createVoucher(operator, request);

        log.info(<span class="hljs-string">"æœˆæœ«ç»“è½¬å®Œæˆ: periodCode={}, profit={}"</span>, periodCode, profit);
    }

    <span class="hljs-comment">/**
     * å¹´æœ«ç»“è½¬ï¼ˆæœ¬å¹´åˆ©æ¶¦ç»“è½¬åˆ©æ¶¦åˆ†é…ï¼‰
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">yearEndCarryover</span><span class="hljs-params">(String operator, String periodCode)</span> {
        <span class="hljs-comment">// å…ˆæ‰§è¡Œæœˆæœ«ç»“è½¬</span>
        monthEndCarryover(operator, periodCode);

        log.info(<span class="hljs-string">"å¼€å§‹å¹´æœ«ç»“è½¬: periodCode={}"</span>, periodCode);

        <span class="hljs-comment">// æŸ¥è¯¢æœ¬å¹´åˆ©æ¶¦ä½™é¢</span>
        <span class="hljs-type">AccSubjectBalance</span> <span class="hljs-variable">profitBalance</span> <span class="hljs-operator">=</span> balanceMapper.selectOne(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubjectBalance&gt;()
                .eq(AccSubjectBalance::getPeriodCode, periodCode)
                .eq(AccSubjectBalance::getSubjectCode, PROFIT_SUBJECT_CODE)
        );

        <span class="hljs-keyword">if</span> (profitBalance == <span class="hljs-literal">null</span>) {
            log.info(<span class="hljs-string">"æœ¬å¹´åˆ©æ¶¦æ— ä½™é¢ï¼Œè·³è¿‡å¹´æœ«ç»“è½¬"</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">yearProfit</span> <span class="hljs-operator">=</span> profitBalance.getEndCredit().subtract(profitBalance.getEndDebit());
        <span class="hljs-keyword">if</span> (yearProfit.compareTo(BigDecimal.ZERO) == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// ç”Ÿæˆç»“è½¬å‡­è¯</span>
        List&lt;VoucherEntryDTO&gt; entries = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

        <span class="hljs-comment">// æœ¬å¹´åˆ©æ¶¦åˆ†å½•</span>
        <span class="hljs-type">VoucherEntryDTO</span> <span class="hljs-variable">profitEntry</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VoucherEntryDTO</span>();
        profitEntry.setSubjectCode(PROFIT_SUBJECT_CODE);
        profitEntry.setSummary(<span class="hljs-string">"å¹´æœ«ç»“è½¬-æœ¬å¹´åˆ©æ¶¦"</span>);
        <span class="hljs-keyword">if</span> (yearProfit.compareTo(BigDecimal.ZERO) &gt; <span class="hljs-number">0</span>) {
            profitEntry.setDebitAmount(yearProfit);
        } <span class="hljs-keyword">else</span> {
            profitEntry.setCreditAmount(yearProfit.abs());
        }
        entries.add(profitEntry);

        <span class="hljs-comment">// åˆ©æ¶¦åˆ†é…-æœªåˆ†é…åˆ©æ¶¦åˆ†å½•</span>
        <span class="hljs-type">VoucherEntryDTO</span> <span class="hljs-variable">retainedEntry</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VoucherEntryDTO</span>();
        retainedEntry.setSubjectCode(RETAINED_EARNINGS_CODE);
        retainedEntry.setSummary(<span class="hljs-string">"å¹´æœ«ç»“è½¬-æœªåˆ†é…åˆ©æ¶¦"</span>);
        <span class="hljs-keyword">if</span> (yearProfit.compareTo(BigDecimal.ZERO) &gt; <span class="hljs-number">0</span>) {
            retainedEntry.setCreditAmount(yearProfit);
        } <span class="hljs-keyword">else</span> {
            retainedEntry.setDebitAmount(yearProfit.abs());
        }
        entries.add(retainedEntry);

        <span class="hljs-type">int</span> <span class="hljs-variable">year</span> <span class="hljs-operator">=</span> Integer.parseInt(periodCode.substring(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>));
        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">lastDay</span> <span class="hljs-operator">=</span> LocalDate.of(year, <span class="hljs-number">12</span>, <span class="hljs-number">31</span>);

        <span class="hljs-type">CreateVoucherRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateVoucherRequest</span>();
        request.setVoucherType(<span class="hljs-string">"è½¬"</span>);
        request.setVoucherDate(lastDay);
        request.setSummary(<span class="hljs-string">"å¹´æœ«åˆ©æ¶¦ç»“è½¬"</span>);
        request.setSourceType(<span class="hljs-string">"AUTO_CARRYOVER"</span>);
        request.setEntries(entries);

        voucherService.createVoucher(operator, request);

        log.info(<span class="hljs-string">"å¹´æœ«ç»“è½¬å®Œæˆ: periodCode={}, yearProfit={}"</span>, periodCode, yearProfit);
    }

    <span class="hljs-comment">/**
     * åˆ é™¤ç»“è½¬å‡­è¯ï¼ˆåç»“è´¦æ—¶è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteCarryoverVouchers</span><span class="hljs-params">(String periodCode)</span> {
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> åˆ é™¤è‡ªåŠ¨ç”Ÿæˆçš„ç»“è½¬å‡­è¯</span>
    }
}
</code></pre>
<h3 data-id="heading-31">ä¹ã€è´¦ç°¿æŸ¥è¯¢æœåŠ¡</h3>
<h4 data-id="heading-32">9.1 è´¦ç°¿ç±»å‹</h4>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+------------------+------------------+------------------+------------------+</span>
|     æ€»è´¦         |     æ˜ç»†è´¦       |     å¤šæ è´¦       |     åºæ—¶è´¦       |
<span class="hljs-addition">+------------------+------------------+------------------+------------------+</span>
| æŒ‰ç§‘ç›®æ±‡æ€»       | æŒ‰ç§‘ç›®é€ç¬”       | è´¹ç”¨å¤šæ æ˜ç»†     | æŒ‰æ—¥æœŸé¡ºåº       |
| æ˜¾ç¤ºä½™é¢         | æ˜¾ç¤ºæ¯ç¬”åˆ†å½•     | æ”¶å…¥å¤šæ æ˜ç»†     | æ‰€æœ‰å‡­è¯åˆ†å½•     |
| æœŸåˆ/æœ¬æœŸ/æœŸæœ«   | æ‘˜è¦/å€Ÿ/è´·/ä½™é¢  | è‡ªå®šä¹‰æ ç›®       | å‡­è¯å·/æ‘˜è¦/é‡‘é¢ |
<span class="hljs-addition">+------------------+------------------+------------------+------------------+</span>
</code></pre>
<h4 data-id="heading-33">9.2 è´¦ç°¿æŸ¥è¯¢æœåŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.service;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
<span class="hljs-keyword">import</span> com.accounting.service.dto.*;
<span class="hljs-keyword">import</span> com.accounting.service.entity.*;
<span class="hljs-keyword">import</span> com.accounting.service.mapper.*;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * è´¦ç°¿æŸ¥è¯¢æœåŠ¡
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LedgerService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccVoucherMapper voucherMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccVoucherEntryMapper entryMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccSubjectBalanceMapper balanceMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SubjectService subjectService;

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æ€»è´¦
     */</span>
    <span class="hljs-keyword">public</span> List&lt;GeneralLedgerDTO&gt; <span class="hljs-title function_">queryGeneralLedger</span><span class="hljs-params">(String periodCode, String subjectCode)</span> {
        List&lt;GeneralLedgerDTO&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

        <span class="hljs-comment">// è·å–ç§‘ç›®ä¿¡æ¯</span>
        <span class="hljs-type">AccSubject</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> subjectService.getByCode(subjectCode);
        <span class="hljs-keyword">if</span> (subject == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-comment">// æŸ¥è¯¢æŒ‡å®šæœŸé—´åŠä¹‹å‰çš„ä½™é¢</span>
        List&lt;AccSubjectBalance&gt; balances = balanceMapper.selectList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubjectBalance&gt;()
                .eq(AccSubjectBalance::getSubjectCode, subjectCode)
                .le(AccSubjectBalance::getPeriodCode, periodCode)
                .orderByAsc(AccSubjectBalance::getPeriodCode)
        );

        <span class="hljs-keyword">for</span> (AccSubjectBalance balance : balances) {
            <span class="hljs-type">GeneralLedgerDTO</span> <span class="hljs-variable">dto</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GeneralLedgerDTO</span>();
            dto.setPeriodCode(balance.getPeriodCode());
            dto.setSubjectCode(subjectCode);
            dto.setSubjectName(subject.getSubjectName());
            dto.setBeginDebit(balance.getBeginDebit());
            dto.setBeginCredit(balance.getBeginCredit());
            dto.setPeriodDebit(balance.getPeriodDebit());
            dto.setPeriodCredit(balance.getPeriodCredit());
            dto.setEndDebit(balance.getEndDebit());
            dto.setEndCredit(balance.getEndCredit());

            <span class="hljs-comment">// è®¡ç®—ä½™é¢</span>
            dto.setBalance(balance.getEndDebit().subtract(balance.getEndCredit()));
            dto.setBalanceDirection(dto.getBalance().compareTo(BigDecimal.ZERO) &gt;= <span class="hljs-number">0</span> ? <span class="hljs-string">"å€Ÿ"</span> : <span class="hljs-string">"è´·"</span>);

            result.add(dto);
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æ˜ç»†è´¦
     */</span>
    <span class="hljs-keyword">public</span> List&lt;DetailLedgerDTO&gt; <span class="hljs-title function_">queryDetailLedger</span><span class="hljs-params">(String startPeriod, String endPeriod,
                                                    String subjectCode)</span> {
        List&lt;DetailLedgerDTO&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

        <span class="hljs-comment">// è·å–æœŸåˆä½™é¢</span>
        <span class="hljs-type">AccSubjectBalance</span> <span class="hljs-variable">beginBalance</span> <span class="hljs-operator">=</span> balanceMapper.selectOne(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccSubjectBalance&gt;()
                .eq(AccSubjectBalance::getSubjectCode, subjectCode)
                .eq(AccSubjectBalance::getPeriodCode, startPeriod)
        );

        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">runningBalance</span> <span class="hljs-operator">=</span> BigDecimal.ZERO;
        <span class="hljs-keyword">if</span> (beginBalance != <span class="hljs-literal">null</span>) {
            runningBalance = beginBalance.getBeginDebit().subtract(beginBalance.getBeginCredit());

            <span class="hljs-comment">// æ·»åŠ æœŸåˆè¡Œ</span>
            <span class="hljs-type">DetailLedgerDTO</span> <span class="hljs-variable">beginRow</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DetailLedgerDTO</span>();
            beginRow.setSummary(<span class="hljs-string">"æœŸåˆä½™é¢"</span>);
            beginRow.setBalance(runningBalance);
            beginRow.setBalanceDirection(runningBalance.compareTo(BigDecimal.ZERO) &gt;= <span class="hljs-number">0</span> ? <span class="hljs-string">"å€Ÿ"</span> : <span class="hljs-string">"è´·"</span>);
            result.add(beginRow);
        }

        <span class="hljs-comment">// æŸ¥è¯¢åˆ†å½•æ˜ç»†</span>
        List&lt;AccVoucherEntry&gt; entries = entryMapper.selectEntriesBySubjectAndPeriod(
            subjectCode, startPeriod, endPeriod);

        <span class="hljs-keyword">for</span> (AccVoucherEntry entry : entries) {
            <span class="hljs-type">DetailLedgerDTO</span> <span class="hljs-variable">dto</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DetailLedgerDTO</span>();
            dto.setVoucherNo(entry.getVoucherNo());
            dto.setSummary(entry.getSummary());
            dto.setDebitAmount(entry.getDebitAmount());
            dto.setCreditAmount(entry.getCreditAmount());

            <span class="hljs-comment">// è®¡ç®—æ»šåŠ¨ä½™é¢</span>
            runningBalance = runningBalance.add(entry.getDebitAmount())
                .subtract(entry.getCreditAmount());
            dto.setBalance(runningBalance.abs());
            dto.setBalanceDirection(runningBalance.compareTo(BigDecimal.ZERO) &gt;= <span class="hljs-number">0</span> ? <span class="hljs-string">"å€Ÿ"</span> : <span class="hljs-string">"è´·"</span>);

            result.add(dto);
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢åºæ—¶è´¦ï¼ˆæ—¥è®°è´¦ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> List&lt;JournalDTO&gt; <span class="hljs-title function_">queryJournal</span><span class="hljs-params">(String startDate, String endDate)</span> {
        List&lt;JournalDTO&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

        <span class="hljs-comment">// æŸ¥è¯¢æ—¥æœŸèŒƒå›´å†…çš„æ‰€æœ‰å·²è¿‡è´¦å‡­è¯</span>
        List&lt;AccVoucher&gt; vouchers = voucherMapper.selectList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccVoucher&gt;()
                .ge(AccVoucher::getVoucherDate, startDate)
                .le(AccVoucher::getVoucherDate, endDate)
                .eq(AccVoucher::getStatus, <span class="hljs-number">3</span>)  <span class="hljs-comment">// å·²è¿‡è´¦</span>
                .orderByAsc(AccVoucher::getVoucherDate)
                .orderByAsc(AccVoucher::getVoucherNo)
        );

        <span class="hljs-keyword">for</span> (AccVoucher voucher : vouchers) {
            List&lt;AccVoucherEntry&gt; entries = entryMapper.selectList(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;AccVoucherEntry&gt;()
                    .eq(AccVoucherEntry::getVoucherId, voucher.getId())
                    .orderByAsc(AccVoucherEntry::getLineNo)
            );

            <span class="hljs-keyword">for</span> (AccVoucherEntry entry : entries) {
                <span class="hljs-type">JournalDTO</span> <span class="hljs-variable">dto</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JournalDTO</span>();
                dto.setVoucherDate(voucher.getVoucherDate());
                dto.setVoucherNo(voucher.getVoucherNo());
                dto.setSubjectCode(entry.getSubjectCode());
                dto.setSubjectName(entry.getSubjectName());
                dto.setSummary(entry.getSummary());
                dto.setDebitAmount(entry.getDebitAmount());
                dto.setCreditAmount(entry.getCreditAmount());

                result.add(dto);
            }
        }

        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<h3 data-id="heading-34">åã€æ¥å£å±‚å®ç°</h3>
<h4 data-id="heading-35">10.1 Controller</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.controller;

<span class="hljs-keyword">import</span> com.accounting.common.result.Result;
<span class="hljs-keyword">import</span> com.accounting.service.dto.*;
<span class="hljs-keyword">import</span> com.accounting.service.entity.*;
<span class="hljs-keyword">import</span> com.accounting.service.service.*;
<span class="hljs-keyword">import</span> com.accounting.service.utils.UserContext;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> javax.validation.Valid;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * å‡­è¯æ¥å£
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/voucher")</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VoucherController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> VoucherService voucherService;

    <span class="hljs-comment">/**
     * åˆ›å»ºå‡­è¯
     */</span>
    <span class="hljs-meta">@PostMapping("/create")</span>
    <span class="hljs-keyword">public</span> Result&lt;AccVoucher&gt; <span class="hljs-title function_">createVoucher</span><span class="hljs-params">(<span class="hljs-meta">@Valid</span> <span class="hljs-meta">@RequestBody</span> CreateVoucherRequest request)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">operator</span> <span class="hljs-operator">=</span> UserContext.getCurrentUser();
        <span class="hljs-type">AccVoucher</span> <span class="hljs-variable">voucher</span> <span class="hljs-operator">=</span> voucherService.createVoucher(operator, request);
        <span class="hljs-keyword">return</span> Result.success(voucher);
    }

    <span class="hljs-comment">/**
     * å®¡æ ¸å‡­è¯
     */</span>
    <span class="hljs-meta">@PostMapping("/audit/{voucherId}")</span>
    <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">auditVoucher</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long voucherId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">operator</span> <span class="hljs-operator">=</span> UserContext.getCurrentUser();
        voucherService.auditVoucher(operator, voucherId);
        <span class="hljs-keyword">return</span> Result.success();
    }

    <span class="hljs-comment">/**
     * å¼ƒå®¡å‡­è¯
     */</span>
    <span class="hljs-meta">@PostMapping("/unaudit/{voucherId}")</span>
    <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">unauditVoucher</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long voucherId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">operator</span> <span class="hljs-operator">=</span> UserContext.getCurrentUser();
        voucherService.unauditVoucher(operator, voucherId);
        <span class="hljs-keyword">return</span> Result.success();
    }

    <span class="hljs-comment">/**
     * è¿‡è´¦å‡­è¯
     */</span>
    <span class="hljs-meta">@PostMapping("/post/{voucherId}")</span>
    <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">postVoucher</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long voucherId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">operator</span> <span class="hljs-operator">=</span> UserContext.getCurrentUser();
        voucherService.postVoucher(operator, voucherId);
        <span class="hljs-keyword">return</span> Result.success();
    }

    <span class="hljs-comment">/**
     * ä½œåºŸå‡­è¯
     */</span>
    <span class="hljs-meta">@PostMapping("/void/{voucherId}")</span>
    <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">voidVoucher</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long voucherId,
                                     <span class="hljs-meta">@RequestParam</span> String reason)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">operator</span> <span class="hljs-operator">=</span> UserContext.getCurrentUser();
        voucherService.voidVoucher(operator, voucherId, reason);
        <span class="hljs-keyword">return</span> Result.success();
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å‡­è¯è¯¦æƒ…
     */</span>
    <span class="hljs-meta">@GetMapping("/{voucherId}")</span>
    <span class="hljs-keyword">public</span> Result&lt;AccVoucher&gt; <span class="hljs-title function_">getVoucherDetail</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long voucherId)</span> {
        <span class="hljs-type">AccVoucher</span> <span class="hljs-variable">voucher</span> <span class="hljs-operator">=</span> voucherService.getVoucherDetail(voucherId);
        <span class="hljs-keyword">return</span> Result.success(voucher);
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å‡­è¯åˆ—è¡¨
     */</span>
    <span class="hljs-meta">@GetMapping("/list")</span>
    <span class="hljs-keyword">public</span> Result&lt;List&lt;AccVoucher&gt;&gt; <span class="hljs-title function_">getVoucherList</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam</span> String periodCode,
            <span class="hljs-meta">@RequestParam(required = false)</span> Integer status)</span> {
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°åˆ†é¡µæŸ¥è¯¢</span>
        <span class="hljs-keyword">return</span> Result.success(<span class="hljs-literal">null</span>);
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.accounting.service.controller;

<span class="hljs-keyword">import</span> com.accounting.common.result.Result;
<span class="hljs-keyword">import</span> com.accounting.service.dto.*;
<span class="hljs-keyword">import</span> com.accounting.service.service.*;
<span class="hljs-keyword">import</span> com.accounting.service.utils.UserContext;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * è´¦ç°¿æŸ¥è¯¢æ¥å£
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/ledger")</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LedgerController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> LedgerService ledgerService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BalanceService balanceService;

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æ€»è´¦
     */</span>
    <span class="hljs-meta">@GetMapping("/general")</span>
    <span class="hljs-keyword">public</span> Result&lt;List&lt;GeneralLedgerDTO&gt;&gt; <span class="hljs-title function_">queryGeneralLedger</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam</span> String periodCode,
            <span class="hljs-meta">@RequestParam</span> String subjectCode)</span> {
        List&lt;GeneralLedgerDTO&gt; result = ledgerService.queryGeneralLedger(periodCode, subjectCode);
        <span class="hljs-keyword">return</span> Result.success(result);
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æ˜ç»†è´¦
     */</span>
    <span class="hljs-meta">@GetMapping("/detail")</span>
    <span class="hljs-keyword">public</span> Result&lt;List&lt;DetailLedgerDTO&gt;&gt; <span class="hljs-title function_">queryDetailLedger</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam</span> String startPeriod,
            <span class="hljs-meta">@RequestParam</span> String endPeriod,
            <span class="hljs-meta">@RequestParam</span> String subjectCode)</span> {
        List&lt;DetailLedgerDTO&gt; result = ledgerService.queryDetailLedger(
            startPeriod, endPeriod, subjectCode);
        <span class="hljs-keyword">return</span> Result.success(result);
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢åºæ—¶è´¦
     */</span>
    <span class="hljs-meta">@GetMapping("/journal")</span>
    <span class="hljs-keyword">public</span> Result&lt;List&lt;JournalDTO&gt;&gt; <span class="hljs-title function_">queryJournal</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam</span> String startDate,
            <span class="hljs-meta">@RequestParam</span> String endDate)</span> {
        List&lt;JournalDTO&gt; result = ledgerService.queryJournal(startDate, endDate);
        <span class="hljs-keyword">return</span> Result.success(result);
    }

    <span class="hljs-comment">/**
     * è¯•ç®—å¹³è¡¡è¡¨
     */</span>
    <span class="hljs-meta">@GetMapping("/trial-balance")</span>
    <span class="hljs-keyword">public</span> Result&lt;TrialBalanceResult&gt; <span class="hljs-title function_">getTrialBalance</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String periodCode)</span> {
        <span class="hljs-type">TrialBalanceResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> balanceService.checkTrialBalance(periodCode);
        <span class="hljs-keyword">return</span> Result.success(result);
    }

    <span class="hljs-comment">/**
     * ç§‘ç›®ä½™é¢è¡¨
     */</span>
    <span class="hljs-meta">@GetMapping("/balance")</span>
    <span class="hljs-keyword">public</span> Result&lt;List&lt;AccSubjectBalance&gt;&gt; <span class="hljs-title function_">getSubjectBalance</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String periodCode)</span> {
        List&lt;AccSubjectBalance&gt; result = balanceService.getBalancesByPeriod(periodCode);
        <span class="hljs-keyword">return</span> Result.success(result);
    }
}
</code></pre>
<h3 data-id="heading-36">åä¸€ã€é…ç½®æ–‡ä»¶</h3>
<h4 data-id="heading-37">11.1 application.yml</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8083</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">accounting-service</span>

  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/accounting?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=Asia/Shanghai</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>

  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
    <span class="hljs-attr">database:</span> <span class="hljs-number">0</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">50</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">20</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span>

  <span class="hljs-attr">cache:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">redis</span>
    <span class="hljs-attr">redis:</span>
      <span class="hljs-attr">time-to-live:</span> <span class="hljs-number">3600000</span>

<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/*.xml</span>
  <span class="hljs-attr">global-config:</span>
    <span class="hljs-attr">db-config:</span>
      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>

<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">com.accounting:</span> <span class="hljs-string">debug</span>
  <span class="hljs-attr">pattern:</span>
    <span class="hljs-attr">console:</span> <span class="hljs-string">"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n"</span>

<span class="hljs-comment"># æ ¸ç®—é…ç½®</span>
<span class="hljs-attr">accounting:</span>
  <span class="hljs-comment"># å‡­è¯è‡ªåŠ¨è¿‡è´¦</span>
  <span class="hljs-attr">auto-post:</span> <span class="hljs-literal">false</span>
  <span class="hljs-comment"># æ˜¯å¦å¼ºåˆ¶å®¡æ ¸</span>
  <span class="hljs-attr">force-audit:</span> <span class="hljs-literal">true</span>
  <span class="hljs-comment"># ç§‘ç›®ç¼–ç è§„åˆ™ï¼ˆçº§æ¬¡é•¿åº¦ï¼‰</span>
  <span class="hljs-attr">subject-code-rule:</span> <span class="hljs-string">"4-2-2-2"</span>
</code></pre>
<h3 data-id="heading-38">åäºŒã€æ€»ç»“</h3>
<h4 data-id="heading-39">12.1 æ ¸å¿ƒæŠ€æœ¯ç‚¹</h4>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-addition">+------------------+------------------+----------------------------------+</span>
|      æ¨¡å—        |      æŠ€æœ¯        |             è¯´æ˜                 |
<span class="hljs-addition">+------------------+------------------+----------------------------------+</span>
|     ç§‘ç›®ç®¡ç†     |  æ ‘å½¢ç»“æ„+ç¼“å­˜   |   æ”¯æŒå¤šçº§ç§‘ç›®ï¼ŒRedisç¼“å­˜        |
<span class="hljs-addition">+------------------+------------------+----------------------------------+</span>
|     å‡­è¯ç®¡ç†     |  çŠ¶æ€æœº+äº‹åŠ¡     |   ä¸¥æ ¼çš„çŠ¶æ€æµè½¬æ§åˆ¶              |
<span class="hljs-addition">+------------------+------------------+----------------------------------+</span>
|     ä½™é¢ç®¡ç†     |  çº§è”æ›´æ–°        |   åˆ†å½•è¿‡è´¦æ—¶çº§è”æ›´æ–°ä¸Šçº§ç§‘ç›®      |
<span class="hljs-addition">+------------------+------------------+----------------------------------+</span>
|     æœŸé—´ç®¡ç†     |  ç»“è´¦æµç¨‹        |   ç»“è´¦æ£€æŸ¥+è‡ªåŠ¨ç»“è½¬               |
<span class="hljs-addition">+------------------+------------------+----------------------------------+</span>
|     å®¡è®¡è¿½è¸ª     |  æ“ä½œæ—¥å¿—        |   æ‰€æœ‰æ“ä½œè®°å½•å¯è¿½æº¯              |
<span class="hljs-addition">+------------------+------------------+----------------------------------+</span>
</code></pre>
<h4 data-id="heading-40">12.2 å…³é”®è®¾è®¡è¦ç‚¹</h4>
<ol>
<li><strong>å€Ÿè´·å¹³è¡¡</strong>ï¼šå‡­è¯å½•å…¥æ—¶å¼ºåˆ¶æ ¡éªŒå€Ÿè´·å¹³è¡¡</li>
<li><strong>çŠ¶æ€æµè½¬</strong>ï¼šå‡­è¯çŠ¶æ€ä¸¥æ ¼æŒ‰æµç¨‹æµè½¬</li>
<li><strong>æœŸé—´æ§åˆ¶</strong>ï¼šåªèƒ½åœ¨å·²å¯ç”¨æœŸé—´æ“ä½œ</li>
<li><strong>æƒé™åˆ†ç¦»</strong>ï¼šåˆ¶å•äººä¸èƒ½å®¡æ ¸è‡ªå·±çš„å‡­è¯</li>
<li><strong>ä½™é¢çº§è”</strong>ï¼šåˆ†å½•è¿‡è´¦æ—¶è‡ªåŠ¨æ›´æ–°ä¸Šçº§ç§‘ç›®ä½™é¢</li>
<li><strong>å®¡è®¡è¿½è¸ª</strong>ï¼šæ‰€æœ‰å…³é”®æ“ä½œè®°å½•æ—¥å¿—</li>
</ol>
<h4 data-id="heading-41">12.3 æ‰©å±•æ–¹å‘</h4>
<ol>
<li><strong>å¤šè´¦å¥—</strong>ï¼šæ”¯æŒå¤šä¸ªç‹¬ç«‹è´¦å¥—</li>
<li><strong>å¤šå¸ç§</strong>ï¼šæ”¯æŒå¤–å¸æ ¸ç®—å’Œæ±‡å…‘æŸç›Š</li>
<li><strong>è¾…åŠ©æ ¸ç®—</strong>ï¼šå®Œå–„éƒ¨é—¨/é¡¹ç›®/å¾€æ¥ç­‰æ ¸ç®—</li>
<li><strong>æŠ¥è¡¨ä¸­å¿ƒ</strong>ï¼šèµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨ã€ç°é‡‘æµé‡è¡¨</li>
<li><strong>å‡­è¯æ¨¡æ¿</strong>ï¼šå¸¸ç”¨ä¸šåŠ¡å‡­è¯æ¨¡æ¿</li>
<li><strong>æ¥å£å¯¹æ¥</strong>ï¼šä¸ERPã€è´¹æ§ç­‰ç³»ç»Ÿå¯¹æ¥</li>
</ol>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£è¯» Claude å¯¹å¼€å‘è€…çš„å½±å“ï¼šAI å¦‚ä½•åœ¨ Anthropic æ”¹å˜å·¥ä½œï¼Ÿ]]></title>    <link>https://juejin.cn/post/7579555970594947113</link>    <guid>https://juejin.cn/post/7579555970594947113</guid>    <pubDate>2025-12-04T02:27:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579555970594947113" data-draft-id="7579555970594914345" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£è¯» Claude å¯¹å¼€å‘è€…çš„å½±å“ï¼šAI å¦‚ä½•åœ¨ Anthropic æ”¹å˜å·¥ä½œï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹,Android"/> <meta itemprop="datePublished" content="2025-12-04T02:27:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹çŒ«deå°éƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/817692379985752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£è¯» Claude å¯¹å¼€å‘è€…çš„å½±å“ï¼šAI å¦‚ä½•åœ¨ Anthropic æ”¹å˜å·¥ä½œï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692379985752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹çŒ«deå°éƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:27:22.000Z" title="Thu Dec 04 2025 02:27:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘æ—¥ Claude å¼€å‘å…¬å¸ Anthropic å‘å¸ƒäº†ä¸€ç¯‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fresearch%2Fhow-ai-is-transforming-work-at-anthropic" target="_blank" title="https://www.anthropic.com/research/how-ai-is-transforming-work-at-anthropic" ref="nofollow noopener noreferrer">ã€ŠHow AI Is Transforming Work at Anthropicã€‹</a> çš„æ–‡ç« ï¼Œæ–‡ç« æ˜¯ Anthropic åœ¨ 8 æœˆå¯¹å†…éƒ¨å‘˜å·¥è¿›è¡Œè°ƒæŸ¥ï¼Œé€šè¿‡å¯¹ <strong>132 åå·¥ç¨‹å¸ˆå’Œç ”ç©¶äººå‘˜çš„è°ƒæŸ¥ã€53 æ¬¡æ·±åº¦è®¿è°ˆï¼Œä»¥åŠå¯¹ 20 ä¸‡æ¡å†…éƒ¨ Claude Code ä½¿ç”¨è®°å½•çš„åˆ†æ</strong>ï¼ŒæŠ¥å‘Šäº†ç›®å‰ AI å¯¹äºå·¥ç¨‹å¸ˆçš„ç›¸å…³å½±å“ã€‚</p>
<blockquote>
<p>è¿™æ˜¯ä¸€ä»½å¾ˆæœ‰å‚è€ƒä»·å€¼çš„æ•°æ®ã€‚</p>
</blockquote>
<p>åœ¨è¿™é‡Œ Anthropic ä½¿ç”¨ä¸‰ç§äº’è¡¥æ–¹æ³•ï¼Œç¡®ä¿å®šé‡ä¸å®šæ€§æ•°æ®çš„å¹³è¡¡ï¼š</p>
<ul>
<li>é€šè¿‡å†…éƒ¨ Slack æ¸ é“ï¼ˆ68 ä»½å“åº”ï¼‰å’Œç›´æ¥æ¥è§¦ 207 äººï¼ˆ64 ä»½å“åº”ï¼Œ31% å“åº”ç‡ï¼‰è¿›è¡Œï¼Œé—®é¢˜èšç„¦ç¼–ç ä»»åŠ¡é¢‘ç‡ã€ç”Ÿäº§åŠ›å½±å“å’Œå§”æ‰˜ç­–ç•¥</li>
<li>é’ˆå¯¹å‰ 53 åè°ƒæŸ¥å—è®¿è€…ï¼Œè¿›è¡Œä¸»é¢˜åˆ†æï¼Œæ¢è®¨å§”æ‰˜å®è·µã€æŠ€èƒ½å˜åŒ–ã€ç¤¾ä¼šåŠ¨æ€å’ŒèŒä¸šè½¬å˜</li>
<li>ä½¿ç”¨éšç§ä¿æŠ¤å·¥å…·åˆ†æ 20 ä¸‡æ¡å†…éƒ¨è®°å½•ï¼ŒæŒ‰ä»»åŠ¡å¤æ‚åº¦ï¼ˆ1-5 é‡è¡¨ï¼‰ã€ç±»å‹ï¼ˆå¦‚è°ƒè¯•ã€åŠŸèƒ½å®ç°ï¼‰å’Œå›¢é˜Ÿå·®å¼‚åˆ†ç±»</li>
</ul>
<p>æ–‡ç« çš„æ ¸å¿ƒæ˜¯ AI å¦‚ä½•é‡å¡‘å·¥ä½œï¼Œåˆ†ä¸ºç”Ÿäº§åŠ›ã€æ–°ä»»åŠ¡å¯ç”¨ã€å§”æ‰˜å®è·µã€æŠ€èƒ½å˜åŒ–ã€ç¤¾ä¼š/èŒä¸šå½±å“å’Œä½¿ç”¨è¶‹åŠ¿ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç®€å•çœ‹çœ‹æ–‡ç« æä¾›çš„çœŸå®æ•°æ®è¡¨æ ¼ï¼Œæ„Ÿå—ä¸‹ AI å¯¹äºå¼€å‘è€…çš„å½±å“æ•°æ®ï¼š</p>

























<table><thead><tr><th>æ¯æ—¥ä½¿ç”¨ç‡</th><th>å½“å‰å€¼</th><th>æ•°æ®å«ä¹‰/å¤‡æ³¨</th></tr></thead><tbody><tr><td>è°ƒè¯•ï¼ä¿®å¤é”™è¯¯</td><td><strong>55%</strong></td><td>è¶…è¿‡ä¸€åŠçš„å‘˜å·¥æ¯å¤©ç”¨å®ƒä¿® Bug</td></tr><tr><td>ç†è§£/é˜…è¯»ä»£ç </td><td><strong>42%</strong></td><td>ç”¨äºè§£é‡Šå¤æ‚çš„ä»£ç åº“</td></tr><tr><td>æ–°åŠŸèƒ½å¼€å‘</td><td><strong>37%</strong></td><td>ç›´æ¥ç”¨äºå†™æ–° Feature</td></tr></tbody></table>

























<table><thead><tr><th>æ—¶é—´ç‚¹ / ç»Ÿè®¡</th><th>Claude ä½¿ç”¨å æ¯” / é¢‘ç‡</th><th>å¹³å‡è‡ªæŠ¥ç”Ÿäº§åŠ›æå‡</th></tr></thead><tbody><tr><td>ä¸€å¹´å‰</td><td>ä½¿ç”¨ç‡ â‰ˆ 28%</td><td>+20% ç”Ÿäº§åŠ›æå‡</td></tr><tr><td>2025 å¹´ï¼ˆæŠ¥å‘Šæ—¶ç‚¹ï¼‰</td><td>ä½¿ç”¨ç‡ â‰ˆ 59%</td><td>+50% ç”Ÿäº§åŠ›æå‡</td></tr><tr><td>â€œPower Usersâ€ï¼ˆè¡¨ç°æœ€å¥½çš„ä¸€éƒ¨åˆ†ç”¨æˆ·ï¼‰</td><td>â€”</td><td>æœ‰ 14% çš„äººæŠ¥å‘Šç”Ÿäº§åŠ›æå‡è¶…è¿‡ 100%</td></tr></tbody></table>

















<table><thead><tr><th>æ–°ä»»åŠ¡ &amp; æ‚é¡¹æ”¹è¿›æ¯”ä¾‹</th><th>ç™¾åˆ†æ¯” / é¢‘ç‡</th></tr></thead><tbody><tr><td>Claude-assisted work ä¸­ï¼Œâ€œåŸæœ¬ä¸ä¼šåš / è¢«è·³è¿‡â€çš„ä»»åŠ¡ (new work)</td><td>27%</td></tr><tr><td>Claude Code ä»»åŠ¡ä¸­ â€œpapercut fixesâ€ï¼ˆå°ä¿®å°è¡¥ / å¯ç»´æŠ¤æ€§ï¼è´¨é‡æå‡ï¼å·¥å…·ï¼æ–‡æ¡£ç­‰ï¼‰</td><td>8.6%</td></tr></tbody></table>























<table><thead><tr><th>å¤æ‚åº¦ &amp; è‡ªåŠ¨åŒ–ç¨‹åº¦</th><th>å¹³å‡ä»»åŠ¡å¤æ‚åº¦ (1â€“5 é‡è¡¨)</th><th>å¹³å‡æœ€å¤§è¿ç»­å·¥å…·è°ƒç”¨æ•° (tool calls)</th><th>å¹³å‡ Human Turns (äººç±»äº¤äº’æ¬¡æ•°)</th></tr></thead><tbody><tr><td>6 ä¸ªæœˆå‰ (Feb 2025)</td><td>3.2</td><td>9.8 æ¬¡è¿ç»­è°ƒç”¨</td><td>6.2 æ¬¡ Human Turns</td></tr><tr><td>2025 å¹´ August (æŠ¥å‘Šæ—¶ç‚¹)</td><td>3.8</td><td>21.2 æ¬¡è¿ç»­è°ƒç”¨</td><td>4.1 æ¬¡ Human Turns</td></tr></tbody></table>

























<table><thead><tr><th>å„ä»»åŠ¡ç±»åˆ«å æ¯”å˜åŒ–</th><th>Feb 2025 å æ¯”</th><th>Aug 2025 å æ¯”</th></tr></thead><tbody><tr><td>æ–°åŠŸèƒ½å¼€å‘</td><td>14.3%</td><td>36.9%</td></tr><tr><td>è®¾è®¡ï¼è§„åˆ’</td><td>1.0%</td><td>9.9%</td></tr><tr><td>å…¶ä»–ï¼ˆdebugging / code understanding / refactoring / papercuts / â€¦ï¼‰</td><td>å‰©ä½™ â‰ˆ 84.7%</td><td>å‰©ä½™ â‰ˆ 53.2% (å¤§è‡´ = 100 âˆ’ 36.9 âˆ’ 9.9)</td></tr></tbody></table>

































<table><thead><tr><th>å…¨æ ˆåŒ– (è·¨é¢†åŸŸ)</th><th>ä¸»ç”¨ Claude Code ä»»åŠ¡ç±»å‹ / å æ¯” (ä¸»è¦ä»»åŠ¡)</th></tr></thead><tbody><tr><td>Pre-training team</td><td>æ–°åŠŸèƒ½å¼€å‘ (building new features) å æ¯” ~ 54.6%</td></tr><tr><td>å¯¹é½/å®‰å…¨å›¢é˜Ÿ</td><td>å‰ç«¯å¼€å‘ (front-end development / æ•°æ®å¯è§†åŒ–) å æ¯” ~ 7.5%</td></tr><tr><td>Post-training team</td><td>å‰ç«¯å¼€å‘ ~ 7.4%</td></tr><tr><td>Security team</td><td>ä»£ç ç†è§£ / åˆ†æå  ~ 48.9%</td></tr><tr><td>éæŠ€æœ¯äººå‘˜</td><td>Debugging å  ~ 51.5%ï¼›Data science / æ•°æ®åˆ†æå  ~ 12.7% ï¼Œç¼–å†™/è°ƒè¯•è„šæœ¬ï¼Œèƒ½å¤Ÿé€šè¿‡ AI è·å¾—åŸºç¡€ç¼–ç èƒ½åŠ›</td></tr><tr><td>æ‰€æœ‰å›¢é˜Ÿ (â€œAll Teamsâ€ baseline)</td><td>ä¸»è¦ä»»åŠ¡ä¸ºæ–°åŠŸèƒ½å¼€å‘ã€è°ƒè¯• (debugging)ã€code understanding</td></tr></tbody></table>
<p>é€šè¿‡ä¸Šé¢è¿™ä»½æ•°æ®ï¼Œå¯ä»¥ç›´è§‚çœ‹åˆ°ï¼š</p>
<p><strong>ç”Ÿäº§åŠ›æå‡</strong>ï¼š</p>
<ul>
<li>å¹³å‡ 50% ç”Ÿäº§åŠ›æå‡ï¼ˆ14% ç”¨æˆ·è¶…è¿‡ 100%ï¼‰ï¼Œåˆå¹¶æ‹‰å–è¯·æ±‚ï¼ˆpull requestsï¼‰æ¯å·¥ç¨‹å¸ˆå¢åŠ  67%ï¼Œä»»åŠ¡æ—¶é—´å‡å°‘ï¼ˆå¦‚è°ƒè¯•æ—¶é—´ç¼©çŸ­ï¼‰ï¼Œè¾“å‡ºé‡å¢åŠ </li>
<li>å‡å°‘çç¢å·¥ä½œï¼ˆå¦‚é‡æ„ï¼‰ï¼Œå¹¶è¡Œæ¢ç´¢æƒ³æ³•ï¼ˆå¦‚åŒæ—¶è¿è¡Œå¤šä¸ª Claude å®ä¾‹ï¼‰ï¼Œå¤æ‚è°ƒè¯•å¯èƒ½éœ€æ›´å¤šå–„åæ¸…ç†æ—¶é—´ï¼Œä½†æ•´ä½“æ•ˆç‡æ›´é«˜</li>
</ul>
<p><strong>å¯ç”¨æ–°å·¥ä½œ</strong>ï¼š</p>
<ul>
<li>è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼Œ<strong>æŠ¥å‘Šé‡Œ 27% çš„ Claude è¾…åŠ©å·¥ä½œåŸæœ¬ä¸ä¼šå‘ç”Ÿ</strong>ï¼ŒåŒ…æ‹¬æ‰©å±•é¡¹ç›®ã€â€œé”¦ä¸Šæ·»èŠ±â€ä»»åŠ¡ï¼ˆå¦‚äº¤äº’å¼ä»ªè¡¨æ¿ã€æ–‡æ¡£ã€æµ‹è¯•ï¼‰å’Œæ¢ç´¢æ€§å·¥ä½œï¼Œå¦å¤–è¿˜æœ‰ 8.6% ä¸ºâ€œå°ä¿®å°è¡¥â€ï¼ˆå¦‚å¯ç»´æŠ¤æ€§é‡æ„ï¼‰</li>
<li>ä¾‹å¦‚å®‰å…¨å›¢é˜Ÿç”¨ Claude åˆ†ææœªçŸ¥ä»£ç å«ä¹‰ï¼›éæŠ€æœ¯å‘˜å·¥è°ƒè¯•ç½‘ç»œæˆ– Git é—®é¢˜</li>
</ul>
<p><strong>å§”æ‰˜å®è·µ</strong>ï¼š</p>
<ul>
<li>æ•´ä½“ Claude ä½¿ç”¨é¢‘ç¹æå‡ï¼Œä½†å®Œå…¨å§”æ‰˜åªå äº† 0-20%ï¼Œå¤§å¤šæ•°æƒ…å†µè¿˜æ˜¯éœ€ä¸»åŠ¨ç›‘ç£ï¼Œå¼€å‘è€…è¿˜æ˜¯ä¼˜å…ˆå§”æ‰˜æ˜“éªŒè¯ã€ä½é£é™©æˆ–æ¯ç‡¥ä»»åŠ¡ï¼ˆå¦‚æŠ›å¼ƒå¼è°ƒè¯•ä»£ç ï¼‰ï¼Œåœ¨é€æ­¥ä¿¡ä»»é€æ­¥åï¼Œæ‰æœ‰ä»ç®€å•åˆ°å¤æ‚çš„è¿‡ç¨‹ã€‚</li>
<li>è¾¹ç•Œï¼šè°ƒæŸ¥æŠ¥å‘Šé‡Œä¸»è¦åé¦ˆè¿˜æœ‰é«˜é£é™©ã€æˆ˜ç•¥æ€è€ƒæˆ–â€œå“å‘³â€ä»»åŠ¡ï¼ˆå¦‚è®¾è®¡å†³ç­–ï¼‰éœ€è¦ä¿ç•™äººç±»å¤„ç†</li>
</ul>
<p><strong>æŠ€èƒ½æ‰©å±•ä¸é€€åŒ–</strong>ï¼š</p>
<ul>
<li>è¿™ä¹Ÿæ˜¯æ¯”è¾ƒç»å…¸çš„è°ƒæŸ¥ç»“æœï¼Œ<strong>ç°åœ¨çš„å·¥ç¨‹å¸ˆæ›´â€œå…¨æ ˆåŒ–â€</strong> ï¼Œå¤„ç†ä¸“é•¿å¤–ä»»åŠ¡ï¼ˆå¦‚åç«¯å·¥ç¨‹å¸ˆå¿«é€Ÿæ„å»ºå¤æ‚ UIï¼Œç ”ç©¶äººå‘˜ç”¨ Claude åˆ›å»ºå‰ç«¯å¯è§†åŒ–ï¼Œå¯¹é½å›¢é˜Ÿç”¨ Claude å®éªŒï¼Œå®‰å…¨å›¢é˜Ÿåˆ†æä»£ç å½±å“ï¼‰</li>
<li>å½“ç„¶ï¼Œå¯¹äº Claude çš„å¼€å‘è€…è€Œå·²ï¼Œä»–ä»¬ä¹Ÿæœ‰æŠ€èƒ½é€€åŒ–çš„å¿§è™‘ï¼Œæ‹…å¿ƒè¿™æ ·å¤§å¹…åº¦å‡å°‘äº†åŠ¨æ‰‹å®è·µï¼Œèƒ¡å¯¼è‡´ä»£ç ç¼–å†™å’Œå®¡é˜…æŠ€èƒ½å¼±åŒ–ï¼Œå½±å“ç›‘ç£èƒ½åŠ›ï¼Œä¸€äº›å·¥ç¨‹å¸ˆååº”ä¼šé€šè¿‡å®šæœŸâ€œæ—  AI ç»ƒä¹ â€åº”å¯¹ç„¦è™‘</li>
</ul>
<p><strong>ç¤¾ä¼šä¸èŒä¸šè½¬å˜</strong>ï¼š</p>
<ul>
<li>AI å¸¦æ¥çš„æœ€ç›´æ¥å½±å“ä¹‹ä¸€ï¼Œäººä¸äººçš„äº’åŠ¨æ›´å°‘äº†ï¼Œæ¯ä¸ªäººéƒ½æ›´åƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„â€œè¶…çº§ä¸ªä½“â€ä¸ AI ç»“å¯¹ç¼–ç¨‹ï¼Œè€Œéä¸å›¢é˜Ÿåä½œ</li>
<li>å—è®¿è€…æƒ…ç»ªåˆ†è£‚ï¼šçŸ­æœŸå¤šæ•°äººå¯¹æ‰©å±•èƒ½åŠ›ä¸æ•ˆç‡æå‡æŒä¹è§‚ï¼Œä½†ä¹Ÿæœ‰äººæ‹…å¿ƒé•¿è¿œä¼šè¢« AI æ›¿ä»£æˆ–è§’è‰²è¢«å½»åº•æ”¹å†™</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<strong>èŒä¸šè®¤åŒçš„å±æœºä¸åªæ˜¯å¤–éƒ¨å¼€å‘è€…æœ‰ï¼Œ Claude å†…éƒ¨å¼€å‘è€…ä¹Ÿæœ‰è¿™ä¸ªç„¦è™‘</strong>ï¼Œè¿™ç§å¿ƒæ€å¤§æ¦‚æ˜¯ï¼š</p>
<blockquote>
<p>â€œæˆ‘ä»¥ä¸ºæˆ‘å–œæ¬¢å†™ä»£ç ï¼Œå…¶å®æˆ‘åªæ˜¯å–œæ¬¢ä»£ç è·‘é€šçš„ç»“æœâ€ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æœªæ¥ AI å¯¹äºå¼€å‘è€…çš„å½±å“ï¼Œè¿˜å¯èƒ½ä¼šå¸¦æ¥æ–°çš„èŒä¸šä»·å€¼è§‚çš„é‡æ„ï¼Œæ‰€ä»¥æœ‰äººæ„Ÿåˆ°è¿·èŒ«ï¼š<strong>å¦‚æœå†™ä»£ç è¿™ä¸ªåŠ¨ä½œæœ¬èº«ä¸å†é‡è¦ï¼Œé‚£ä¹ˆä»¥åä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆçš„èº«ä»½è®¤åŒå»ºç«‹åœ¨å“ªé‡Œ</strong>ï¼Ÿ</p>
<p>å¦å¤–ï¼ŒAI ä¹Ÿä¸æ˜¯å®Œå®Œå…¨å…¨å°±å‡å°‘äº†å¼€å‘è€…çš„å·¥ä½œæ—¶é—´ï¼Œåœ¨æŠ¥å‘Šé‡Œå¯ä»¥çœ‹åˆ°ï¼Œå› ä¸º AI ä¹Ÿå¯¼è‡´äº†ä¸€äº›å¼€å‘è€…çš„å·¥ä½œéšæœºåç€å¢åŠ äº†ï¼š</p>
<ul>
<li><strong>æ­£å‘çš„â€œæ›´å¤šæ—¶é—´â€</strong> ï¼šä»¥å‰å› ä¸ºå¤ªéš¾æˆ–å¤ªç¹çè€Œé€šè¿‡â€œæ”¾å¼ƒâ€æ¥å¤„ç†çš„ä»»åŠ¡ï¼Œç°åœ¨å·¥ç¨‹å¸ˆæ„¿æ„èŠ±æ—¶é—´å»æ”»å…‹äº†</li>
<li><strong>è´Ÿå‘çš„â€œæ›´å¤šæ—¶é—´â€</strong> ï¼šç›²ç›®ä¿¡ä»» AI ç”Ÿæˆçš„ä»£ç ï¼Œç»“æœæŠŠè‡ªå·±é€¼è¿›äº†æ­»èƒ¡åŒï¼Œæœ€åä¸å¾—ä¸èŠ±å¤§é‡æ—¶é—´å»è°ƒè¯•å’Œæ¸…ç† AI ç•™ä¸‹çš„çƒ‚æ‘Šå­ï¼Œè¿™ä¹Ÿå¢åŠ äº†â€œè®¤çŸ¥è´Ÿè·â€ï¼Œæ¯•ç«Ÿé˜…è¯»å’Œç†è§£åˆ«äººï¼ˆæˆ– AIï¼‰å†™çš„ä»£ç ï¼Œå¾€å¾€æ¯”è‡ªå·±å†™æ›´ç´¯</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒAnthropic è¿™ç¯‡æ•°æ®è™½ç„¶åªæ˜¯å†…éƒ¨è°ƒç ”ï¼Œä½†æ˜¯ä¹Ÿå¾ˆç›´è§‚åæ˜ äº†å½“å‰çš„ä¸€äº›æƒ…å†µï¼Œéšç€ AI çš„æµè¡Œï¼Œæ•´ä¸ªå¼€å‘ç»“æ„ä¹Ÿåœ¨å‘ç”Ÿå˜åŒ–ï¼Œæœ€æ˜æ˜¾å°±æ˜¯å¼€å‘è€…çš„è¾¹ç•Œåœ¨æ…¢æ…¢æ‰“ç ´ï¼š</p>
<ul>
<li>åç«¯å¯ä»¥é€šè¿‡ AI æ„å»º UI ï¼Œç®—æ³•å›¢é˜Ÿå¯ä»¥è‡ªå·±æ­å»ºå¯è§†åŒ–æ•°æ®æ‹“å±•ï¼Œå¼€å‘è€…çš„è¾¹ç•Œè¶Šæ¥è¶Šæ¨¡ç³Šï¼Œå·¥ç¨‹å¸ˆå˜å¾—æ›´ â€œfull-stackâ€ï¼Œæ›´æ•¢å»å¤„ç†ä»¥å¾€ä¸ç†Ÿæ‚‰çš„é¢†åŸŸï¼ˆå‰åç«¯ã€æ•°æ®åº“ã€æ•°æ®å¯è§†åŒ–ç­‰ï¼‰ï¼Œå› ä¸º Claude èƒ½è¦†ç›–å¾ˆå¤šä½ä¸Šä¸‹æ–‡æˆ–æ˜“æ ¡éªŒä»»åŠ¡</li>
<li>AI å¾ˆæ“…é•¿åšå¤§é‡â€œpapercutâ€ï¼ˆå°ä¿®å°è¡¥ã€å±€éƒ¨æ¶ˆé‡æ„ã€å†™æµ‹è¯•ã€ç”Ÿæˆæ–‡æ¡£ï¼‰ä»¥åŠåŠ é€Ÿè°ƒè¯•/ç†è§£ä»£ç ï¼Œä»è€Œè®©åŒä¸€æ—¶é—´æ®µå†…â€œè¾“å‡ºé‡â€æå‡æ˜æ˜¾ï¼Œå¼€å‘è€…æ›´èšç„¦åœ¨éœ€æ±‚ç†è§£å’Œä¸šåŠ¡é¢†åŸŸ</li>
</ul>
<p>å¦å¤–ï¼ŒæŠ¥å‘Šé‡Œä¹Ÿæåˆ°äº†ï¼š</p>
<blockquote>
<p>â€œäººä»¬é€šå¸¸æŠŠ AI å½“ä½œä¸€è¾†æ›´å¿«çš„è½¦ï¼Œä½†å¦‚æœä½ æ‹¥æœ‰ä¸€ç™¾ä¸‡åŒ¹é©¬ï¼Œä½ å¯ä»¥åŒæ—¶æµ‹è¯•æ— æ•°ä¸ªæƒ³æ³•ã€‚â€</p>
</blockquote>
<p>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå…¸å‹ä»£è¡¨ï¼Œåœ¨ AI æ—¶ä»£çš„å·¥ç¨‹æ¨¡å¼å‘ç”Ÿäº†è½¬å˜ï¼Œä»¥å‰ä»çº¿æ€§çš„â€œæ„æ€-ç¼–ç -æµ‹è¯•â€ï¼Œå¯ä»¥è½¬å˜ä¸ºå¹¶è¡Œçš„â€œå¤šè·¯å¾„æ¢ç´¢â€ï¼Œå·¥ç¨‹å¸ˆçš„è§’è‰²ä»â€œæ¬ç –è€…â€å˜æˆäº†â€œæŒ‡æŒ¥å®˜â€ï¼ŒæŒ‡æŒ¥ AI ç‰›é©¬å»å°è¯•ä¸åŒçš„è§£å†³æ–¹æ¡ˆï¼Œç„¶åäººç±»æ¥æŒ‘é€‰æœ€å¥½çš„ä¸€ä¸ªã€‚</p>
<blockquote>
<p>è¿™å¯¹äºä¸å·® token çš„ Claude å†…éƒ¨å‘˜å·¥æ¥è¯´æ— ç–‘æ˜¯ Free çš„ã€‚</p>
</blockquote>
<p>å½“ç„¶ï¼ŒAnthropic å‘˜å·¥æ˜¯â€œå†…åœˆâ€æ ·æœ¬ï¼Œç»“è®ºä¸èƒ½ç›´æ¥å¤–æ¨åˆ°éç§‘æŠ€è¡Œä¸šæˆ–ä¸åŒè§„æ¨¡å…¬å¸ï¼Œä½†æ˜¯ä»æŠ¥å‘Šæ‰€åæ˜ çš„çŸ­æœŸ/ä¸­æœŸæ•ˆåº”ï¼Œé•¿æœŸåŠ³åŠ¨åŠ›ç»“æ„å˜åŒ–ã€å·¥èµ„åˆ†é…ä¸èŒä¸šè·¯å¾„å˜åŒ–éƒ½æœ‰ä¸é”™çš„å‚è€ƒä»·å€¼ï¼š</p>
<blockquote>
<p><strong>AI èƒ½æ˜¾è‘—å¢åŠ äº§é‡å¹¶æ‰©å±•ä¸ªäººå¯æ‰¿æ‹…ä»»åŠ¡çš„èŒƒå›´ï¼Œä½†åŒæ—¶å¸¦æ¥æŠ€èƒ½é€€åŒ–é£é™©ã€å›¢é˜Ÿåä½œå‡å°‘ä¸èŒä¸šä¸ç¡®å®šæ„Ÿ</strong>ã€‚</p>
</blockquote>
<p>æ€»çš„æ¥è¯´ï¼ŒAnthropic çš„è¿™ä»½æŠ¥å‘Šå¯ä»¥åå°„å‡ºä¸€ä¸ªæ­£åœ¨å‘ç”Ÿçš„ç°å®ï¼š</p>
<ul>
<li><strong>AI å·²ç»ä¸ä»…ä»…æ˜¯å·¥å…·</strong>ï¼Œå®ƒå·²ç»åœ¨æ…¢æ…¢æ”¹å˜ä½ çš„å·¥ä½œæ–¹å¼å’ŒèŒä¸šç”Ÿæ¶¯</li>
</ul>

<ul>
<li><strong>çº¢åˆ©ä¸å€ºåŠ¡å¹¶å­˜</strong>ï¼šä½¿ç”¨ AI åœ¨è·å¾—äº†å·¨å¤§çš„ç”Ÿäº§åŠ›çº¢åˆ©ï¼ˆäº§å‡ºå¢åŠ ã€é—¨æ§›é™ä½ï¼‰ï¼Œä½†ä¹ŸèƒŒè´Ÿäº†æ½œåœ¨çš„éšæ€§å€ºåŠ¡ï¼ˆæŠ€èƒ½ç©ºå¿ƒåŒ–ã€ç¤¾äº¤éš”ç¦»ï¼‰</li>
</ul>

<ul>
<li><strong>æœªæ¥çš„å…³é”®èƒ½åŠ›</strong>ï¼šåœ¨ AI æ—¶ä»£ï¼Œå·¥ç¨‹å¸ˆçš„æ ¸å¿ƒç«äº‰åŠ›å¯èƒ½ä¸å†æ˜¯â€œå†™å‡ºå®Œç¾çš„è¯­æ³•â€ï¼Œè€Œæ˜¯ <strong>â€œå®šä¹‰é—®é¢˜â€ã€â€œè®¾è®¡éªŒè¯æœºåˆ¶â€ä»¥åŠâ€œè·¨é¢†åŸŸçš„ç³»ç»Ÿæ€§æ€ç»´â€</strong> ç­‰</li>
</ul>
<p>æ‰€ä»¥ï¼Œ<strong>è¿™ä¸ä»…æ˜¯ Anthropic å†…éƒ¨çš„æ•…äº‹ï¼Œä¹Ÿæ˜¯æ•´ä¸ªè½¯ä»¶è¡Œä¸šå³å°†é¢ä¸´çš„â€œé¢„å‘Šç‰‡â€</strong> ã€‚</p>
<h2 data-id="heading-0">åŸæ–‡é“¾æ¥</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fresearch%2Fhow-ai-is-transforming-work-at-anthropic" target="_blank" title="https://www.anthropic.com/research/how-ai-is-transforming-work-at-anthropic" ref="nofollow noopener noreferrer">www.anthropic.com/research/hoâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†ç»™ç»„ä»¶â€œæ‰“æ´â€äº†ï¼šè¿™æ‰æ˜¯ React ç»„ä»¶å¤ç”¨çš„æ­£ç¡®æ‰“å¼€æ–¹å¼]]></title>    <link>https://juejin.cn/post/7579673620940554290</link>    <guid>https://juejin.cn/post/7579673620940554290</guid>    <pubDate>2025-12-04T02:32:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579673620940554290" data-draft-id="7578876665696190473" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†ç»™ç»„ä»¶â€œæ‰“æ´â€äº†ï¼šè¿™æ‰æ˜¯ React ç»„ä»¶å¤ç”¨çš„æ­£ç¡®æ‰“å¼€æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-04T02:32:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å¸ƒå¸ƒå°†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/1535361573994189"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†ç»™ç»„ä»¶â€œæ‰“æ´â€äº†ï¼šè¿™æ‰æ˜¯ React ç»„ä»¶å¤ç”¨çš„æ­£ç¡®æ‰“å¼€æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1535361573994189/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å¸ƒå¸ƒå°†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:32:05.000Z" title="Thu Dec 04 2025 02:32:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šä¸€ç§åä¸ºâ€œé€ä¼ ç„¦è™‘â€çš„æ€ªç—…</h2>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0060acea62e4ff7af25f8841306cfe7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5biD5biD5bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420325&amp;x-signature=szf2hPrc4UgGCAzUbJW8HhwYyqg%3D" alt="xiaotu.jpg" loading="lazy"/></p>
<p>æ¥ä¸Šå›ã€‚å¾ˆå¤šå…„å¼Ÿåœ¨è¯´ï¼šâ€œæˆ‘ä¹Ÿæƒ³æŠŠ Redux åˆ äº†ï¼Œä½†æ˜¯æˆ‘ç»„ä»¶å±‚çº§å¤ªæ·±äº†å•Šï¼æˆ‘ä¸æŠŠæ•°æ®æ”¾åœ¨ Store é‡Œï¼Œéš¾é“è¦æˆ‘æŠŠ <code>user</code> å±æ€§ä»çˆ·çˆ·ä¼ ç»™çˆ¸çˆ¸ï¼Œçˆ¸çˆ¸ä¼ ç»™å„¿å­ï¼Œå„¿å­ä¼ ç»™å­™å­ï¼Œå­™å­å†ä¼ ç»™é‚£æ¡ç‹—å—ï¼Ÿâ€</p>
<p>è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„ <strong>Props Drillingï¼ˆå±æ€§é€ä¼ /æ‰“æ´ï¼‰</strong>ã€‚</p>
<p>å¬èµ·æ¥ç¡®å®å¾ˆçƒ¦ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œå¾ˆå¤šäººåæ‰‹å°±æ˜¯ä¸€ä¸ª Contextï¼Œæˆ–è€…æŠŠæ•°æ®æ‰”è¿› Zustandã€‚</p>
<p>ä½†ä»Šå¤©è¦å‘Šè¯‰ä½ ä¸€ä¸ªæ®‹é…·çš„çœŸç›¸ï¼š<strong>å¤§éƒ¨åˆ† Props Drilling æ ¹æœ¬ä¸éœ€è¦ Contextï¼Œä¹Ÿä¸éœ€è¦çŠ¶æ€ç®¡ç†åº“ã€‚</strong></p>
<p>ä½ è§‰å¾—ç—›è‹¦ï¼Œä»…ä»…æ˜¯å› ä¸ºä½ æŠŠç»„ä»¶å†™æˆäº†â€œä¿„ç½—æ–¯å¥—å¨ƒâ€ï¼Œè€Œå¿˜è®°äº† React æœ€åŸæœ¬çš„æ ·å­â€”â€”<strong>ä¹é«˜ç§¯æœ¨ï¼ˆComponent Compositionï¼‰</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">æ¡ˆå‘ç°åœºï¼šç—›è‹¦çš„â€œä¿„ç½—æ–¯å¥—å¨ƒâ€</h2>
<p>å…ˆçœ‹è¿™æ®µè®©ä½ è¡€å‹å‡é«˜çš„ä»£ç ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢æ·±å¤„çš„å¯¼èˆªæ é‡Œå±•ç¤ºå¤´åƒã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// âŒ å…¸å‹çš„æ‰“æ´ç°åœº</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [user] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Jack'</span>, <span class="hljs-attr">avatar</span>: <span class="hljs-string">'...'</span> });
  <span class="hljs-comment">// App åªæƒ³æ¸²æŸ“ä¸ªå¸ƒå±€ï¼Œå´è¢«è¿«è¦æŠŠ user ä¼ ä¸‹å»</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>;
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Layout</span> = (<span class="hljs-params">{ user }</span>) =&gt; {
  <span class="hljs-comment">// Layout å†…å¿ƒ OSï¼šæˆ‘åªæ˜¯ä¸ªææ’ç‰ˆçš„ï¼Œä¸ºä»€ä¹ˆè¦æ‹¿ userï¼Ÿ</span>
  <span class="hljs-comment">// åªèƒ½å«æ³ªç»§ç»­å¾€ä¸‹ä¼ </span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"layout"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MainContent</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Header</span> = (<span class="hljs-params">{ user }</span>) =&gt; {
  <span class="hljs-comment">// Header å†…å¿ƒ OSï¼šæˆ‘ä¹Ÿä¸ç”¨ userï¼Œæ˜¯é‚£ä¸ªè§’è½é‡Œçš„ Avatar è¦ç”¨å•Šï¼</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Logo</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Avatar</span> = (<span class="hljs-params">{ user }</span>) =&gt; {
  <span class="hljs-comment">// ç»ˆäºåˆ°äº†...</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{user.avatar}</span> /&gt;</span></span>;
};
</code></pre>
<p><strong>ç—›ç‚¹åˆ†æï¼š</strong> <code>Layout</code> å’Œ <code>Header</code> æˆäº†æ— è¾œçš„â€œè¿é’è½¦â€ã€‚å®ƒä»¬æ ¹æœ¬ä¸å…³å¿ƒ <code>user</code> æ˜¯è°ï¼Œä½†ä¸ºäº†è¿™ä¸€è¡Œæ•°æ®ï¼Œå®ƒä»¬è¢«è¿«æ¥å— propsï¼Œå†åŸå°ä¸åŠ¨åœ°ä¼ ä¸‹å»ã€‚å¦‚æœå“ªå¤© <code>Avatar</code> è¿˜éœ€è¦ä¸ª <code>Click</code> äº‹ä»¶ï¼Œè¿™æ•´æ¡é“¾è·¯ä¸Šçš„ç»„ä»¶éƒ½è¦æ”¹ä¸€éã€‚</p>
<p>è¿™å°±æ˜¯<strong>è€¦åˆ</strong>ã€‚</p>
<h2 data-id="heading-2">ç ´å±€ï¼šæŠŠæ§åˆ¶æƒäº¤è¿˜ç»™â€œä¸Šå¸â€</h2>
<p>æ€ä¹ˆè§£ï¼Ÿå…¶å®å¾ˆç®€å•ã€‚ ä½ å›æƒ³ä¸€ä¸‹ï¼ŒHTML é‡Œçš„ <code>&lt;div&gt;</code> æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ</p>
<pre><code class="hljs language-&lt;div" lang="&lt;div">  &lt;header&gt;...&lt;/header&gt;
&lt;/div&gt;
</code></pre>
<p><code>div</code> ä»æ¥ä¸è¿‡é—®é‡Œé¢è£…çš„æ˜¯ <code>header</code> è¿˜æ˜¯ <code>span</code>ã€‚å®ƒåªæ˜¯ä¸ªå®¹å™¨ã€‚</p>
<p>åœ¨ React é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç¥å¥‡çš„å±æ€§å« <strong><code>children</code></strong>ã€‚</p>
<h3 data-id="heading-3">âœ… æ–¹æ¡ˆä¸€ï¼šåˆ©ç”¨ <code>children</code> åšâ€œå¡«ç©ºé¢˜â€</h3>
<p>æˆ‘ä»¬æŠŠ <code>Layout</code> å˜æˆä¸€ä¸ªçœŸæ­£çš„å®¹å™¨ï¼Œä¸å†è®©å®ƒè´Ÿè´£ç”Ÿäº§ <code>Header</code>ï¼Œè€Œæ˜¯è´Ÿè´£<strong>å±•ç¤º</strong>ä¼ è¿›æ¥çš„ä¸œè¥¿ã€‚</p>
<pre><code class="hljs language-//" lang="//">const Layout = ({ children }) =&gt; {
  return &lt;div className="layout"&gt;{children}&lt;/div&gt;;
};

// æ”¹é€ åçš„ Appï¼šä¹Ÿå°±æ˜¯â€œä¸Šå¸â€ç»„ä»¶
const App = () =&gt; {
  const [user] = useState({ name: 'Jack' });

  return (
    &lt;Layout&gt;
      {/* ğŸ’¥ è§è¯å¥‡è¿¹çš„æ—¶åˆ»ï¼ */}
      {/* Header ç›´æ¥åœ¨è¿™é‡Œæ¸²æŸ“ï¼Œuser ç›´æ¥ä¼ ç»™å®ƒï¼Œæ ¹æœ¬ä¸éœ€è¦ç»è¿‡ Layoutï¼ */}
      &lt;Header user={user} /&gt;
    &lt;/Layout&gt;
  );
};
</code></pre>
<p>å‘ç°äº†å—ï¼Ÿ <code>Layout</code> ä¸å†æ¥æ”¶ <code>user</code> å±æ€§äº†ã€‚Props Drilling <strong>æ¶ˆå¤±äº†</strong>ã€‚ æ•°æ®æµå˜æˆäº†ï¼š<code>App -&gt; Header -&gt; Avatar</code>ã€‚ä¸­é—´é‚£ä¸ªâ€œä¸­é—´å•†â€ <code>Layout</code> è¢«æ¶ç©ºäº†ã€‚</p>
<h3 data-id="heading-4">âœ… æ–¹æ¡ˆäºŒï¼šå¦‚æœæœ‰å¤šä¸ªå‘ä½æ€ä¹ˆåŠï¼Ÿï¼ˆSlot æ¨¡å¼ï¼‰</h3>
<p>æœ‰äººä¼šé—®ï¼šâ€œæˆ‘çš„ Layout å¾ˆå¤æ‚ï¼Œé™¤äº†ä¸­é—´çš„å†…å®¹ï¼Œå·¦è¾¹è¿˜è¦ä¸ªä¾§è¾¹æ ï¼Œä¸Šé¢è¿˜è¦ä¸ªå¤´éƒ¨ï¼Œå…‰ä¸€ä¸ª <code>children</code> ä¸å¤Ÿç”¨å•Šã€‚â€</p>
<p>å…„å¼Ÿï¼Œè°å‘Šè¯‰ä½  Props åªèƒ½ä¼ å­—ç¬¦ä¸²çš„ï¼Ÿ<strong>Props å¯ä»¥ä¼ ç»„ä»¶å•Šï¼</strong></p>
<p>è¿™å« <strong>â€œæ§åˆ¶åè½¬â€ (Inversion of Control)</strong> ï¼Œä¿—ç§°â€œæŒ–å‘å¡«èåœâ€ã€‚</p>
<pre><code class="hljs language-//" lang="//">const Layout = ({ topSlot, leftSlot, children }) =&gt; {
  return (
    &lt;div className="layout"&gt;
      &lt;div className="top-bar"&gt;{topSlot}&lt;/div&gt;
      &lt;div className="container"&gt;
        &lt;aside&gt;{leftSlot}&lt;/aside&gt;
        &lt;main&gt;{children}&lt;/main&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

// ä¸Šå¸ç»„ä»¶ App
const App = () =&gt; {
  const [user] = useState({ name: 'Jack' });

  return (
    &lt;Layout
      // å°±åƒæ‹¼ä¹é«˜ä¸€æ ·ï¼ŒæŠŠç»„è£…å¥½çš„ç»„ä»¶å¡è¿›å»
      topSlot={&lt;Header user={user} /&gt;} 
      leftSlot={&lt;Sidebar /&gt;}
    &gt;
      &lt;Dashboard /&gt;
    &lt;/Layout&gt;
  );
};
</code></pre>
<p><strong>ç»æ€ï¼</strong> ç°åœ¨ï¼Œ<code>Layout</code> å½»åº•å˜æˆäº†ä¸€ä¸ªçº¯ç²¹çš„ UI éª¨æ¶ã€‚å®ƒå®Œå…¨ä¸çŸ¥é“ <code>user</code> æ•°æ®çš„å­˜åœ¨ã€‚ ä½ æƒ³ç»™ <code>Header</code> åŠ  propsï¼Ÿä½ æƒ³æ¢æ‰ <code>Sidebar</code>ï¼Ÿç›´æ¥åœ¨ <code>App</code> é‡Œæ”¹å°±è¡Œï¼Œ<code>Layout</code> ä»£ç ä¸€è¡Œéƒ½ä¸ç”¨åŠ¨ã€‚</p>
<h2 data-id="heading-5">æ ¸å¿ƒå“²å­¦ï¼šç»„åˆ vs ç»§æ‰¿</h2>
<p>è¿™å°±æ˜¯ React æ–‡æ¡£é‡Œé‚£å¥æ™¦æ¶©çš„**â€œæ¨èä½¿ç”¨ç»„åˆï¼ˆCompositionï¼‰è€Œéç»§æ‰¿â€**çš„çœŸè°›ã€‚</p>
<p>Props Drilling çš„æœ¬è´¨é—®é¢˜ï¼Œä¸æ˜¯å±‚çº§å¤ªæ·±ï¼Œè€Œæ˜¯<strong>èŒè´£åˆ†é…ä¸æ¸…</strong>ã€‚</p>
<ul>
<li>çˆ¶ç»„ä»¶ï¼ˆLayoutï¼‰ï¼šä¸è¯¥ç®¡å®ƒåŒ…å«çš„å†…å®¹å…·ä½“éœ€è¦ä»€ä¹ˆæ•°æ®ã€‚</li>
<li>å­ç»„ä»¶ï¼ˆHeaderï¼‰ï¼šä¸è¯¥ä¾èµ–çˆ¶ç»„ä»¶å»â€œå–‚â€å®ƒæ•°æ®ï¼Œå®ƒåº”è¯¥ç›´æ¥ä»æºå¤´è·å–ï¼Œæˆ–è€…ç”±æ›´ä¸Šå±‚çš„â€œä¸Šå¸â€ç»„è£…å¥½ç»™å®ƒã€‚</li>
</ul>
<p>å½“ä½ å­¦ä¼šäº†ç”¨ <code>children</code> å’Œ <code>ReactNode props</code> æ¥ä¼ é€’ç»„ä»¶æ—¶ï¼Œä½ ä¼šå‘ç° 80% çš„ Context éƒ½æ˜¯å¤šä½™çš„ã€‚</p>
<p>Context æ˜¯ç•™ç»™é‚£äº›<strong>çœŸæ­£çš„</strong>éšå¼å…¨å±€å˜é‡çš„ï¼ˆæ¯”å¦‚ Theme, Locale, CurrentUserContextï¼‰ã€‚ è€Œå¯¹äºé¡µé¢ç»“æ„å±‚çº§çš„ä¼ å€¼ï¼Œ<strong>ç»„åˆï¼ˆCompositionï¼‰</strong> æ‰æ˜¯æ€§èƒ½æœ€å¥½ã€ä»£ç æœ€è§£è€¦çš„æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>åˆ«ä¸€çœ‹åˆ°æ•°æ®è¦ä¼ ä¸¤å±‚ä»¥ä¸Šå°±æƒ³å»º Storeã€‚</p>
<ol>
<li><strong>æƒ³ä¸€æƒ³</strong>ï¼šä¸­é—´é‚£ä¸ªç»„ä»¶çœŸçš„éœ€è¦åœ¨è¿™ä¸ªæ•°æ®é“¾æ¡é‡Œå—ï¼Ÿ</li>
<li><strong>è¯•ä¸€è¯•</strong>ï¼šèƒ½ä¸èƒ½æŠŠä¸‹å±‚ç»„ä»¶â€œæå‡ï¼ˆLift upï¼‰â€ï¼Œåœ¨çˆ¶çº§ç»„è£…å¥½ï¼Œç›´æ¥ä¼ ä¸‹å»ï¼Ÿ</li>
<li><strong>ç”¨ä¸€ç”¨</strong>ï¼š<code>children</code> å’Œâ€œç»„ä»¶æ§½ï¼ˆSlotsï¼‰â€æ˜¯ React ç»™ä½ æœ€å¥½çš„ç¤¼ç‰©ã€‚</li>
</ol>
<p>æŠŠä½ çš„ç»„ä»¶æƒ³è±¡æˆ<strong>ç›¸æ¡†</strong>ï¼Œè€Œä¸æ˜¯<strong>æ°´ç®¡</strong>ã€‚ç›¸æ¡†åªè´Ÿè´£å±•ç¤ºç…§ç‰‡ï¼Œå®ƒä¸ç®¡ç…§ç‰‡é‡Œçš„äººæ˜¯è°ã€‚</p>
<p>å¥½äº†ï¼Œæˆ‘è¦å»æŠŠé‚£ä¸ªä¼ äº† 8 å±‚ props çš„å±å±±ä»£ç é‡æ„äº†ï¼Œç¥æˆ‘çš„é”®ç›˜å®‰å¥½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bc6e9ed23eb42a3ac95c31edcf35864~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5biD5biD5bCG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420325&amp;x-signature=L58Z7RnfKEDwu44wkJLQ5frVSoM%3D" alt="lg_90841_1619336946_60851ef204362.png" loading="lazy"/></p>
<hr/>
<blockquote>
<p><strong>ä¸‹æœŸé¢„å‘Š</strong>ï¼šç°åœ¨ä½ å·²ç»ä¼šæ‹¼ç§¯æœ¨äº†ï¼Œä½†ä½ çš„ç§¯æœ¨ï¼ˆç»„ä»¶ï¼‰å†…éƒ¨æ˜¯ä¸æ˜¯è¿˜å†™äº†ä¸€å † <code>useEffect</code> å’Œä¸šåŠ¡é€»è¾‘ï¼Ÿ ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬è¦èŠèŠ <strong>â€œHeadless ç»„ä»¶â€ä¸â€œè‡ªå®šä¹‰ Hookâ€</strong> ã€‚æ•™ä½ å¦‚ä½•æŠŠ UI å’Œ é€»è¾‘å½»åº•å‰¥ç¦»ï¼Œå†™å‡ºé‚£ç§è®©åŒäº‹çœ‹äº†æƒ³ç»™ä½ ç£•å¤´çš„ä¼˜é›…ä»£ç ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[mysql]å­—ç¬¦ä¸²æˆªå–]]></title>    <link>https://juejin.cn/post/7579555970595012649</link>    <guid>https://juejin.cn/post/7579555970595012649</guid>    <pubDate>2025-12-04T02:32:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579555970595012649" data-draft-id="7579555970594930729" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[mysql]å­—ç¬¦ä¸²æˆªå–"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2025-12-04T02:32:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="import_random"/> <meta itemprop="url" content="https://juejin.cn/user/2013961033882312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [mysql]å­—ç¬¦ä¸²æˆªå–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2013961033882312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    import_random
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:32:44.000Z" title="Thu Dec 04 2025 02:32:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨MySQLä¸­ï¼Œæœ€æ ¸å¿ƒå’Œå¸¸ç”¨çš„å­—ç¬¦ä¸²æˆªå–å‡½æ•°æ˜¯ <code>SUBSTRING()</code>ï¼ˆæˆ–å…¶åˆ«å <code>SUBSTR()</code>ã€<code>MID()</code>ï¼‰ï¼Œä½†æ ¹æ®ä¸åŒçš„æˆªå–éœ€æ±‚ï¼Œè¿˜æœ‰å…¶ä»–å‡ ä¸ªå®ç”¨çš„å‡½æ•°ã€‚</p>
<p>ä¸‹è¡¨å¯¹æ¯”äº†è¿™äº›å¸¸ç”¨å‡½æ•°ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£ï¼š</p>






























<table><thead><tr><th align="left">å‡½æ•°</th><th align="left">è¯­æ³•</th><th align="left">åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td align="left"><strong><code>SUBSTRING()</code></strong></td><td align="left"><code>SUBSTRING(str, pos, len)</code></td><td align="left">ä»å­—ç¬¦ä¸²<code>str</code>çš„æŒ‡å®šä½ç½®<code>pos</code>å¼€å§‹ï¼Œæˆªå–é•¿åº¦ä¸º<code>len</code>çš„å­ä¸²ã€‚æœ€çµæ´»ã€‚åœ¨mysqlä¸­, posä»1å¼€å§‹</td></tr><tr><td align="left"><strong><code>LEFT()</code></strong></td><td align="left"><code>LEFT(str, len)</code></td><td align="left">ä»å­—ç¬¦ä¸²<code>str</code>çš„<strong>å·¦ä¾§</strong>å¼€å§‹ï¼Œæˆªå–æŒ‡å®šé•¿åº¦<code>len</code>çš„å­ä¸²ã€‚</td></tr><tr><td align="left"><strong><code>RIGHT()</code></strong></td><td align="left"><code>RIGHT(str, len)</code></td><td align="left">ä»å­—ç¬¦ä¸²<code>str</code>çš„<strong>å³ä¾§</strong>å¼€å§‹ï¼Œæˆªå–æŒ‡å®šé•¿åº¦<code>len</code>çš„å­ä¸²ã€‚</td></tr><tr><td align="left"><strong><code>SUBSTRING_INDEX()</code></strong></td><td align="left"><code>SUBSTRING_INDEX(str, delim, count)</code></td><td align="left">æŒ‰åˆ†éš”ç¬¦<code>delim</code>æˆªå–ã€‚<code>count</code>ä¸ºæ­£æ—¶å–å·¦éƒ¨åˆ†ï¼Œä¸ºè´Ÿæ—¶å–å³éƒ¨åˆ†ã€‚</td></tr></tbody></table>
<h3 data-id="heading-0">ğŸ§© æ ¸å¿ƒå‡½æ•°ï¼šSUBSTRING() è¯¦è§£</h3>
<p><code>SUBSTRING()</code> æ˜¯æœ€é€šç”¨çš„æˆªå–å‡½æ•°ï¼Œå…¶å®Œæ•´è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-built_in">SUBSTRING</span>(str, pos, len)
</code></pre>
<ul>
<li><strong><code>str</code></strong>ï¼šè¦å¤„ç†çš„åŸå§‹å­—ç¬¦ä¸²ã€‚</li>
<li><strong><code>pos</code></strong>ï¼šèµ·å§‹ä½ç½®ã€‚
<ul>
<li>å€¼ä¸º<strong>æ­£æ•°</strong>æ—¶ï¼Œä»å­—ç¬¦ä¸²<strong>å¼€å¤´</strong>çš„ç¬¬<code>pos</code>ä¸ªå­—ç¬¦å¼€å§‹ï¼ˆ<strong>MySQLä¸­ä½ç½®ä»1å¼€å§‹è®¡æ•°</strong>ï¼‰ã€‚</li>
<li>å€¼ä¸º<strong>è´Ÿæ•°</strong>æ—¶ï¼Œä»å­—ç¬¦ä¸²<strong>æœ«å°¾</strong>å€’æ•°çš„ç¬¬<code>pos</code>ä¸ªå­—ç¬¦å¼€å§‹ã€‚</li>
</ul>
</li>
<li><strong><code>len</code></strong>ï¼ˆå¯é€‰ï¼‰ï¼šè¦æˆªå–çš„é•¿åº¦ã€‚å¦‚æœçœç•¥ï¼Œåˆ™æˆªå–ä»<code>pos</code>å¼€å§‹åˆ°å­—ç¬¦ä¸²æœ«å°¾çš„æ‰€æœ‰å­—ç¬¦ã€‚</li>
</ul>
<h3 data-id="heading-1">ğŸ“ ä¸åŒå‡½æ•°çš„å…¸å‹ç”¨æ³•ç¤ºä¾‹</h3>
<p>äº†è§£è¯­æ³•åï¼Œé€šè¿‡å…·ä½“ä¾‹å­èƒ½æ›´æ¸…æ¥šåœ°çŸ¥é“å¦‚ä½•é€‰æ‹©ï¼š</p>
<ul>
<li>
<p><strong>ä½¿ç”¨ <code>SUBSTRING()</code></strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä»ç¬¬4ä¸ªå­—ç¬¦å¼€å§‹æˆªå–åˆ°æœ€å</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUBSTRING</span>(<span class="hljs-string">'Hello, World!'</span>, <span class="hljs-number">8</span>); <span class="hljs-comment">-- ç»“æœ: 'World!'</span>
<span class="hljs-comment">-- ä»ç¬¬1ä¸ªå­—ç¬¦å¼€å§‹ï¼Œæˆªå–5ä¸ªå­—ç¬¦</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUBSTRING</span>(<span class="hljs-string">'Hello, World!'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">-- ç»“æœ: 'Hello'</span>
<span class="hljs-comment">-- ä»å€’æ•°ç¬¬6ä¸ªå­—ç¬¦å¼€å§‹ï¼Œæˆªå–5ä¸ªå­—ç¬¦</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUBSTRING</span>(<span class="hljs-string">'Hello, World!'</span>, <span class="hljs-number">-6</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">-- ç»“æœ: 'World'</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨ <code>LEFT()</code> å’Œ <code>RIGHT()</code></strong>ï¼ˆé€‚åˆä»å›ºå®šä¸€ä¾§æˆªå–ï¼‰</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">LEFT</span>(<span class="hljs-string">'MySQL'</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">-- ç»“æœ: 'My' (ä»å·¦æˆªå–)</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">RIGHT</span>(<span class="hljs-string">'MySQL'</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">-- ç»“æœ: 'SQL' (ä»å³æˆªå–)</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨ <code>SUBSTRING_INDEX()</code></strong>ï¼ˆé€‚åˆæŒ‰åˆ†éš”ç¬¦æˆªå–ï¼‰</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è·å–é‚®ç®±åŸŸåéƒ¨åˆ†ï¼šæ‰¾åˆ°ç¬¬äºŒä¸ª'.'ä¹‹å‰çš„æ‰€æœ‰å†…å®¹</span>
<span class="hljs-keyword">SELECT</span> SUBSTRING_INDEX(<span class="hljs-string">'www.example.com'</span>, <span class="hljs-string">'.'</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">-- ç»“æœ: 'www.example'</span>
<span class="hljs-comment">-- è·å–æœ€åä¸¤éƒ¨åˆ†ï¼šä»å³ä¾§å¼€å§‹ï¼Œæ‰¾åˆ°ç¬¬äºŒä¸ª'.'ä¹‹åçš„æ‰€æœ‰å†…å®¹</span>
<span class="hljs-keyword">SELECT</span> SUBSTRING_INDEX(<span class="hljs-string">'www.example.com'</span>, <span class="hljs-string">'.'</span>, <span class="hljs-number">-2</span>); <span class="hljs-comment">-- ç»“æœ: 'example.com'</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-2">ğŸ’¡ ä½¿ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹</h3>
<p>åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œæœ‰å‡ ä¸ªå…³é”®ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li><strong>ç»„åˆä½¿ç”¨</strong>ï¼šå¯ä»¥å°†æˆªå–å‡½æ•°ä¸å…¶ä»–å­—ç¬¦ä¸²å‡½æ•°ï¼ˆå¦‚ <code>LOCATE()</code>ã€<code>LENGTH()</code>ï¼‰ç»„åˆï¼Œåº”å¯¹å¤æ‚åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œæˆªå–é‚®ç®±çš„ç”¨æˆ·åéƒ¨åˆ†ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUBSTRING</span>(<span class="hljs-string">'user@example.com'</span>, <span class="hljs-number">1</span>, LOCATE(<span class="hljs-string">'@'</span>, <span class="hljs-string">'user@example.com'</span>)<span class="hljs-number">-1</span>);
<span class="hljs-comment">-- LOCATE('@', ...) è¿”å›'@'çš„ä½ç½®ï¼Œå‡1åä½œä¸ºé•¿åº¦å‚æ•°</span>
<span class="hljs-comment">-- ç»“æœ: 'user'</span>
</code></pre>
</li>
<li><strong>å‚æ•°è¾¹ç•Œ</strong>ï¼š
<ul>
<li>å¦‚æœèµ·å§‹ä½ç½® <code>pos</code> è¶…å‡ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œå‡½æ•°å°†è¿”å›ç©ºå­—ç¬¦ä¸² <code>''</code>ã€‚</li>
<li>æˆªå–é•¿åº¦ <code>len</code> ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œå¦åˆ™ä¹Ÿä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-3">ğŸ” å¦‚ä½•é€‰æ‹©å‡½æ•°</h3>
<p>é¢å¯¹ä¸åŒéœ€æ±‚ï¼Œä½ å¯ä»¥è¿™æ ·å¿«é€Ÿé€‰æ‹©ï¼š</p>
<ul>
<li><strong>ä»æŒ‡å®šä½ç½®æˆªå–æŒ‡å®šé•¿åº¦</strong>ï¼šç”¨ <code>SUBSTRING()</code>ã€‚</li>
<li><strong>æ€»æ˜¯ä»å­—ç¬¦ä¸²çš„å·¦ä¾§æˆ–å³ä¾§å¼€å§‹æˆªå–</strong>ï¼šç”¨ <code>LEFT()</code> æˆ– <code>RIGHT()</code>ï¼Œè¯­æ³•æ›´ç®€æ´ã€‚</li>
<li><strong>æŒ‰åˆ†éš”ç¬¦ï¼ˆå¦‚<code>-</code>ã€<code>/</code>ã€<code>.</code>ï¼‰æˆªå–æŸéƒ¨åˆ†</strong>ï¼šç”¨ <code>SUBSTRING_INDEX()</code>ã€‚</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼Œ<code>SUBSTRING()</code> æ˜¯åŠŸèƒ½æœ€å…¨é¢çš„é¦–é€‰ï¼Œè€Œå…¶ä»–å‡½æ•°åœ¨ç‰¹å®šåœºæ™¯ä¸‹èƒ½è®©ä»£ç æ›´ç®€æ´æ˜“è¯»ã€‚</p>
<p>å¦‚æœä½ èƒ½å‘Šè¯‰æˆ‘ä½ å…·ä½“æƒ³å¤„ç†ä»€ä¹ˆæ ·çš„å­—ç¬¦ä¸²æ•°æ®ï¼ˆæ¯”å¦‚æ˜¯é‚®ç®±ã€ç½‘å€ï¼Œè¿˜æ˜¯æœ‰å›ºå®šæ ¼å¼çš„ç¼–ç ï¼‰ï¼Œæˆ‘å¯ä»¥ç»™ä½ æ›´å…·ä½“çš„æˆªå–æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£è¯»NotebookLMåŸºäºAIçš„PTTç”Ÿæˆ ç¨‹åºåŒ–å¤„ç†æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7579499567869788210</link>    <guid>https://juejin.cn/post/7579499567869788210</guid>    <pubDate>2025-12-04T02:26:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579499567869788210" data-draft-id="7579499567869657138" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£è¯»NotebookLMåŸºäºAIçš„PTTç”Ÿæˆ ç¨‹åºåŒ–å¤„ç†æ–¹æ³•"/> <meta itemprop="keywords" content="å‰ç«¯,Google,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-04T02:26:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="500ä½°"/> <meta itemprop="url" content="https://juejin.cn/user/3182441343757755"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£è¯»NotebookLMåŸºäºAIçš„PTTç”Ÿæˆ ç¨‹åºåŒ–å¤„ç†æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3182441343757755/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    500ä½°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:26:29.000Z" title="Thu Dec 04 2025 02:26:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸‹ç­åå›åˆ°å®¶ï¼Œç”¨<code>è°·æ­ŒNotebookLM </code>ç”Ÿæˆäº†ä»¥ä¸‹çš„ä¸€ä¸ªPPTï¼Œæˆ‘æœ¬æ¬¡æºç´ æï¼Œæä¾›äº†ä¸€ä¸ªæœ¬åœ°çš„markdownæ–‡ä»¶ï¼Œæ˜¯æˆ‘ä»¥å‰å…¬ä¼—å·å‘è¡¨çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FBwxw2vw6acqPq6R1BSA_mg" target="_blank" title="https://mp.weixin.qq.com/s/Bwxw2vw6acqPq6R1BSA_mg" ref="nofollow noopener noreferrer">TapNowå¯¹æ¥Nano Banana</a> ï¼Œç”Ÿæˆçš„è¿‡ç¨‹æ¯”è¾ƒæ…¢ï¼Œ<code>å¤§æ¦‚3-5åˆ†é’Ÿå®Œæˆ</code>ï¼ˆä¹Ÿå’Œå†…å®¹ç¯‡å¹…é•¿çŸ­æ­£ç›¸å…³ï¼‰ã€‚
åŠå…¬æ•ˆç‡æ˜¾è‘—æå‡å•Šï¼Œæˆ‘å°±åªæ˜¯ä¸Šä¼ äº†ä¸€ä¸ªmdï¼Œä¸Šä¼ ç‚¹å‡»<code>ç”Ÿæˆæ¼”ç¤ºæ–‡ç¨¿</code>å³å¯èººä¸‹å–æ¯çŒ«å±å’–å•¡äº†ã€‚
éšç€å¤§æ¨¡å‹å¯¹å„è¡Œå„ä¸šçš„èµ‹èƒ½ï¼ŒAIåŠå…¬è¡Œä¸šå¦‚ç«å¦‚è¼ï¼ŒAIç”Ÿæˆpptã€AIè¾…åŠ©å†™ä½œç­‰åº”ç”¨å±‚å‡ºä¸ç©·ï¼ŒNano Banana Proä¹Ÿèƒ½ç”ŸæˆPPTäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df6e232d5afe4ce7a53e9afc4712708e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTAw5L2w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765419989&amp;x-signature=UFRAen39JIS3rE%2FZglh3eZtDVHc%3D" alt="image-20251203231531099.png" loading="lazy"/></p>
<p>ç›¸å¯¹äºAIè¾…åŠ©å†™ä½œï¼ŒåŸºäºAIçš„pptç”Ÿæˆéš¾åº¦è¾ƒå¤§ï¼Œç”±äºpptå†…çš„å…ƒç´ è¾ƒå¤šã€å½¢æ€å¤šæ ·ï¼Œå åŠ åŠ¨ç”»ã€åˆ‡æ¢ç­‰æ•ˆæœï¼Œé€ æˆpptçš„ç¨‹åºåŒ–å¤„ç†å›°éš¾ï¼Œå¢åŠ äº†pptç”Ÿæˆçš„éš¾åº¦ã€‚</p>
<p>æˆ‘å»æ‰’äº†ä¸‹ï¼ŒAI pptçš„ç”ŸæˆåŸç†ã€‚æ¶‰åŠäººå·¥æ™ºèƒ½æŠ€æœ¯é¢†åŸŸï¼Œå…·ä½“åœ°è¯´æ˜¯ä¸€ç§é€‚ç”¨äº<code>åŸºäºAIçš„PPTç”Ÿæˆç¨‹åºåŒ–å¤„ç†æ–¹æ³•</code>ã€‚</p>
<p>å¤§è‡´æ˜¯å°†PPTå†…çš„å…ƒç´ ä»¥åŠå„ç§æ•ˆæœå…¨éƒ¨ç¼–è¯‘æˆJsonæ–‡ä»¶ï¼Œé€šè¿‡å¯¹Jsonæ–‡ä»¶çš„æ“ä½œå®ç°å¯¹pptçš„ä¿®æ”¹ï¼Œæœ€åç»è¿‡åå‘æ¸²æŸ“ï¼Œç”Ÿæˆæœ€ç»ˆçš„PPTã€‚</p>
<p><code>NotebookLM</code> çš„æºç´ æä¹Ÿæ”¯æŒæ–‡æ¡£ã€éŸ³é¢‘ã€å›¾ç‰‡ã€çº¯æ–‡å­—ç­‰ç´ æï¼ˆwordã€txtã€markdownã€pdfæ ¼å¼çš„æ–‡ä»¶ï¼‰ï¼Œé‚£ä¹ˆAIé¦–å…ˆå¯¹ç”¨æˆ·ä¸Šä¼ æ–‡æ¡£ã€éŸ³é¢‘ã€å›¾ç‰‡ã€çº¯æ–‡å­—æˆ–åœ¨çº¿é€‰æ‹©çš„pptæ¨¡æ¿è¿›è¡Œè§£æï¼Œå¹¶å¯¹ä¸Šä¼ çš„æ–‡ä»¶è¿›è¡Œè§£ææŠ½å–æœ‰æ•ˆä¿¡æ¯ï¼Œç”Ÿæˆpptçš„å†…å®¹ç´ æã€‚å°†pptæ¨¡æ¿æ•°æ®æ•´ç†æˆJsonæ–‡ä»¶ï¼Œæºç´ ææ•°æ®åŒ…æ‹¬æ–‡å­—ã€å­—ä½“ã€é…è‰²ã€å½¢çŠ¶ã€ä½ç½®ã€åŠ¨ç”»ã€å›¾ç‰‡æ•°æ®ï¼Œå¹¶å°†å…¶ç¼–è¯‘åˆ°Jsonæ–‡ä»¶ä¸­ã€‚</p>
<p>æ ¹æ®ç”¨æˆ·ä¸Šä¼ çš„å†…å®¹æ–‡ä»¶æˆ–è€…å¤§æ¨¡å‹ç”Ÿæˆçš„pptæ–‡æœ¬å†…å®¹ï¼Œç”Ÿæˆpptåˆå§‹æ–‡ä»¶çš„å†…å®¹ç´ æã€‚</p>
<p>å†æ ¹æ®è·å–åˆ°çš„pptå†…å®¹ç´ æï¼Œç”Ÿæˆpptç›®å½•ã€å†…å®¹ã€æ ‡é¢˜ã€ç« èŠ‚é¡µé¢ï¼Œå°†pptå†…å®¹ç´ æä¿®æ”¹ç”Ÿæˆçš„Jsonæ–‡ä»¶ã€‚ç”¨æˆ·åœ¨åˆå§‹æ–‡ä»¶çš„åŸºç¡€ä¸Šè¿›è¡Œpptåœ¨çº¿ç¼–è¾‘ï¼ˆæ¯”å¦‚<code>WPS AI</code>ï¼Œ å¯æ”¯æŒç¼©çŸ­ç¯‡å¹…ã€æ–‡æ¡ˆé‡å†™ã€ç»­å†™ï¼‰æ“ä½œã€‚æ ¹æ®ç”¨æˆ·åœ¨çº¿ç¼–è¾‘çš„å„é¡¹æ“ä½œï¼ˆåŒ…æ‹¬æ·»åŠ æˆ–ä¿®æ”¹æ–‡æœ¬ã€åŠ¨ç”»ã€å›¾ç‰‡åå®ŒæˆPPTçš„åˆ¶ä½œï¼‰ï¼Œä¿®æ”¹Jsonæ–‡ä»¶ã€‚ä¿®æ”¹åçš„Jsonæ–‡ä»¶è¿›è¡Œåå‘æ¸²æŸ“ï¼Œç”Ÿæˆæœ€ç»ˆçš„pptæ–‡ä»¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8631b97b5d74155865474cc771f95db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTAw5L2w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765419989&amp;x-signature=2BTkab3RmDPh0mtWZ%2Fas3ktTJ%2F8%3D" alt="image-20251204002136737.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54c39c26c08642e8a1105fc360a2a1cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNTAw5L2w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765419989&amp;x-signature=Vp3kj6jSmoR1FzODSZM2KLeYfoE%3D" alt="image-20251203230805240.png" loading="lazy"/>
åœ¨è¿™ä¸€æ–¹æ¡ˆä¸­ï¼Œé¦–å…ˆå°†å·²æœ‰çš„ PPT æ¨¡æ¿å’Œå…·ä½“å†…å®¹ç»Ÿä¸€è½¬æ¢ä¸º Json æ–‡ä»¶ï¼ŒæŠŠæ¨¡æ¿ä¸­åŸæœ‰çš„å‚æ•°é…ç½®ã€æ ·å¼è°ƒæ•´ç­‰åŠŸèƒ½æ€§ä¿¡æ¯å…¨éƒ¨ç¼–è¯‘è¿› Json ç»“æ„ä¸­ã€‚éšåï¼Œå¯¹ç”¨æˆ·åœ¨ PPT ä¸­å¯ç¼–è¾‘ã€å¯ä¸Šä¼ çš„å„ç±»æ–‡ä»¶å†…å®¹ï¼Œä»¥åŠç”±å¤§æ¨¡å‹ç”Ÿæˆçš„æ–‡æœ¬å’Œç´ æè¿›è¡Œè§£æï¼Œç”Ÿæˆä¸€ä»½ PPT çš„åˆå§‹ Json æ–‡ä»¶ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œä¸€æ–¹é¢å¯¹<code>æ¨¡æ¿ Json</code> è¿›è¡Œç›¸åº”ä¿®æ”¹ï¼Œå¦ä¸€æ–¹é¢å…è®¸ç”¨æˆ·åœ¨å‰ç«¯å¯¹è¯¥åˆå§‹æ–‡ä»¶è¿›è¡Œåœ¨çº¿ç¼–è¾‘å’Œå®Œå–„ã€‚æœ€ç»ˆï¼Œæ ¹æ®ç”¨æˆ·åœ¨çº¿ç¼–è¾‘æ‰€<code>äº§ç”Ÿçš„ Json </code>å˜æ›´è¿›è¡Œåå‘æ¸²æŸ“ï¼Œè‡ªåŠ¨ç”Ÿæˆç¬¦åˆéœ€æ±‚çš„ PPT æ–‡ä»¶ã€‚</p>
<p>å¦‚æœæœ¬æ–‡èƒ½ç»™ä½ æä¾›å¯å‘å’Œå¸®åŠ©ï¼Œè¿˜è¯·ç•™ä¸‹ä½ çš„ä¸€å¥ä¸‰è¿(<code>ç‚¹èµ</code>ã€<code>è½¬å‘</code>ã€<code>è¯„è®º</code>)ï¼Œç»™æˆ‘ä¸€äº›é¼“åŠ±ï¼Œè°¢è°¢ã€‚</p>
<blockquote>
<p>æœ€è¿‘çš„å°å¼€å‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwubai-cq.github.io%2Feasycutpro%2F" target="_blank" title="https://wubai-cq.github.io/easycutpro/" ref="nofollow noopener noreferrer">wubai-cq.github.io/easycutpro/</a></p>
<p>ï¼ˆæ¨èä½¿ç”¨ç”µè„‘chromeæµè§ˆå™¨æ‰“å¼€ä½“éªŒæœ€ä½³ï¼Œè½¯ä»¶å¯ä¸‹è½½ï¼‰
éå¸¸é€‚åˆåœ¨èŒåœºä¸­éœ€è¦é¢‘ç¹åˆ‡æ¢å†…ã€å¤–ç½‘çš„æœ‹å‹ä½¿ç”¨</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ç¬”è®°ã€‘dockerå®ç”¨æŠ€å·§ä¸å¸¸è§æ“ä½œ]]></title>    <link>https://juejin.cn/post/7579480677902581795</link>    <guid>https://juejin.cn/post/7579480677902581795</guid>    <pubDate>2025-12-04T02:03:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579480677902581795" data-draft-id="7579427549471899694" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ç¬”è®°ã€‘dockerå®ç”¨æŠ€å·§ä¸å¸¸è§æ“ä½œ"/> <meta itemprop="keywords" content="Docker"/> <meta itemprop="datePublished" content="2025-12-04T02:03:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Œæ—¥å°¼ä¹"/> <meta itemprop="url" content="https://juejin.cn/user/854736525882123"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ç¬”è®°ã€‘dockerå®ç”¨æŠ€å·§ä¸å¸¸è§æ“ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/854736525882123/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Œæ—¥å°¼ä¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:03:45.000Z" title="Thu Dec 04 2025 02:03:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç›®å½•</h2>
<ol>
<li>ç”¨æˆ·æƒé™é…ç½®</li>
<li>æ ¼å¼åŒ–è¾“å‡º</li>
<li>æ—¶é—´æ ¼å¼ä¸è¾“å‡ºæ§åˆ¶</li>
<li>å®¹å™¨å’Œé•œåƒ ID ä½¿ç”¨æŠ€å·§</li>
<li>é•œåƒå’Œå®¹å™¨æ¸…ç†</li>
<li>Registry ä¸ Repository ç†è§£</li>
<li>å®¹å™¨å¿«ç…§</li>
<li>å®¹å™¨èµ„æºé™åˆ¶</li>
<li>ç£ç›˜å ç”¨æ£€æŸ¥</li>
<li>å®¹å™¨é‡å‘½å</li>
<li>Docker å‘½ä»¤ç»„åˆ</li>
<li>Docker æ„å»ºé«˜çº§é€‰é¡¹</li>
</ol>
<h2 data-id="heading-1">1ï¼Œæ·»åŠ æ™®é€šç”¨æˆ·dockerç»„æƒé™</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé root ç”¨æˆ·æ— æ³•å¯åŠ¨ Dockerã€‚éœ€è¦å°†ç”¨æˆ·æ·»åŠ åˆ° dockerÂ ç»„ã€‚</p>
<h4 data-id="heading-2">è§£å†³æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">1. æ£€æŸ¥ docker ç»„æ˜¯å¦å­˜åœ¨</span>
getent group docker
<span class="hljs-meta prompt_"># </span><span class="bash">2. å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»º docker ç»„</span>
sudo groupadd docker
<span class="hljs-meta prompt_"># </span><span class="bash">3. å°†ç”¨æˆ·æ·»åŠ åˆ° docker ç»„</span>
sudo usermod -aG docker ç”¨æˆ·å
<span class="hljs-meta prompt_"># </span><span class="bash">4. é‡æ–°ç™»å½•æˆ–åˆ·æ–°ç»„æƒé™</span>
newgrp docker
<span class="hljs-meta prompt_"># </span><span class="bash">5. éªŒè¯æƒé™</span>
docker ps
</code></pre>
<h4 data-id="heading-3">æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>ä½¿ç”¨ yum å®‰è£… Docker åï¼Œé»˜è®¤ä¼šåˆ›å»º docker ç»„ï¼Œä½†ä¸ä¼šè‡ªåŠ¨æ·»åŠ ç”¨æˆ·</li>
<li>æ·»åŠ ç”¨æˆ·åˆ° docker ç»„åï¼Œéœ€è¦é‡æ–°ç™»å½•æ‰èƒ½ç”Ÿæ•ˆ</li>
<li>æˆ–è€…ä½¿ç”¨ newgrp docker ä¸´æ—¶åˆ·æ–°ç»„æƒé™</li>
</ul>
<h2 data-id="heading-4">2ï¼Œæ ¼å¼åŒ–è¾“å‡º</h2>
<p>Docker æ”¯æŒä½¿ç”¨ Go æ¨¡æ¿æ ¼å¼åŒ–è¾“å‡ºï¼Œè®©è¾“å‡ºæ›´æ¸…æ™°æ˜“è¯»ã€‚</p>
<h4 data-id="heading-5">å¸¸ç”¨æ ¼å¼å­—æ®µ</h4>



































<table><thead><tr><th>å­—æ®µ</th><th>è¯´æ˜</th><th>å®ä¾‹</th></tr></thead><tbody><tr><td>.ID</td><td>å®¹å™¨/é•œåƒ ID</td><td>a1b2c3d4e5f6</td></tr><tr><td>.Repository</td><td>é•œåƒä»“åº“å</td><td>nginx</td></tr><tr><td>.Tag</td><td>é•œåƒæ ‡ç­¾</td><td>latest</td></tr><tr><td>.Digest</td><td>é•œåƒæ‘˜è¦</td><td>sha256:...</td></tr><tr><td>.Name</td><td>å®¹å™¨åç§°</td><td>my-container</td></tr></tbody></table>
<h4 data-id="heading-6">å®ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åªæ˜¾ç¤ºå®¹å™¨ IDï¼ˆç­‰åŒäº docker ps -qï¼‰</span>
docker ps --format "{{.ID}}"
<span class="hljs-meta prompt_"># </span><span class="bash">æ˜¾ç¤ºé•œåƒçš„ä»“åº“åå’Œæ ‡ç­¾</span>
docker images --format "{{.Repository}}:{{.Tag}}"
<span class="hljs-meta prompt_"># </span><span class="bash">è‡ªå®šä¹‰æ ¼å¼ï¼šæ˜¾ç¤ºå®¹å™¨åå’ŒçŠ¶æ€</span>
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"
<span class="hljs-meta prompt_"># </span><span class="bash">æ˜¾ç¤ºé•œåƒçš„å®Œæ•´ä¿¡æ¯</span>
docker images --format "{{.Repository}}:{{.Tag}} ({{.ID}})"
</code></pre>
<h4 data-id="heading-7">é«˜çº§ç”¨æ³•</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ˜¾ç¤ºå®¹å™¨åã€é•œåƒã€çŠ¶æ€å’Œåˆ›å»ºæ—¶é—´</span>
docker ps --format "table {{.Names}}\t{{.Image}}\t{{.Status}}\t{{.CreatedAt}}"
<span class="hljs-meta prompt_"># </span><span class="bash">åªæ˜¾ç¤ºè¿è¡Œä¸­çš„å®¹å™¨åç§°</span>
docker ps --format "{{.Names}}" --filter "status=running"
<span class="hljs-meta prompt_"># </span><span class="bash">æ˜¾ç¤ºé•œåƒå¤§å°</span>
docker images --format "{{.Repository}}:{{.Tag}}\t{{.Size}}"
</code></pre>
<h2 data-id="heading-8">3ï¼Œæ—¶é—´æ ¼å¼ä¸è¾“å‡ºæ§åˆ¶</h2>
<h4 data-id="heading-9">æ—¶é—´æ ¼å¼æ§åˆ¶</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ˜¾ç¤ºå®Œæ•´æ—¶é—´æˆ³ï¼ˆä¸éšè—æ—¶é—´ï¼‰</span>
docker history -H=false imageId
<span class="hljs-meta prompt_"># </span><span class="bash">é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker ä¼šéšè—æ—¶é—´åˆ—ï¼Œä½¿ç”¨ -H=<span class="hljs-literal">false</span> å¯ä»¥æ˜¾ç¤º</span>
</code></pre>
<h4 data-id="heading-10">æœªæˆªæ–­è¾“å‡º</h4>
<p>å½“è¾“å‡ºè¢«æˆªæ–­æ—¶ï¼Œä½¿ç”¨Â --no-truncÂ æŸ¥çœ‹å®Œæ•´å†…å®¹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ˜¾ç¤ºå®Œæ•´çš„å®¹å™¨ä¿¡æ¯ï¼ˆä¸æˆªæ–­ï¼‰</span>
docker ps --no-trunc
<span class="hljs-meta prompt_"># </span><span class="bash">æ˜¾ç¤ºå®Œæ•´çš„é•œåƒå†å²ï¼ˆä¸æˆªæ–­ï¼‰</span>
docker history --no-trunc imageId
<span class="hljs-meta prompt_"># </span><span class="bash">æ˜¾ç¤ºå®Œæ•´çš„å®¹å™¨æ—¥å¿—</span>
docker logs --no-trunc containerId
</code></pre>
<h4 data-id="heading-11">ç»„åˆä½¿ç”¨</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ˜¾ç¤ºå®Œæ•´çš„å®¹å™¨ ID å’Œå‘½ä»¤</span>
docker ps --no-trunc --format "{{.ID}}\t{{.Command}}"
</code></pre>
<h2 data-id="heading-12">4ï¼Œå®¹å™¨å’Œé•œåƒ ID ä½¿ç”¨æŠ€å·§</h2>
<p>DockerÂ æ”¯æŒä½¿ç”¨ ID çš„ç¼©å†™å½¢å¼ï¼Œæé«˜æ“ä½œæ•ˆç‡ã€‚</p>
<h4 data-id="heading-13">ID ç¼©å†™è§„åˆ™</h4>
<ul>
<li>Docker ä¼šè‡ªåŠ¨è¯†åˆ« ID çš„å‰ç¼€</li>
<li>åªè¦å‰ç¼€è¶³å¤Ÿå”¯ä¸€ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„é•¿åº¦çš„å‰ç¼€</li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªå®¹å™¨/é•œåƒï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ç¬¬ä¸€ä¸ªå­—ç¬¦</li>
</ul>
<h4 data-id="heading-14">å®ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä½¿ç”¨å®Œæ•´ ID</span>
docker logs a1b2c3d4e5f6
<span class="hljs-meta prompt_"># </span><span class="bash">ä½¿ç”¨å‰ 6 ä½ï¼ˆé€šå¸¸è¶³å¤Ÿå”¯ä¸€ï¼‰</span>
docker logs a1b2c3
<span class="hljs-meta prompt_"># </span><span class="bash">ä½¿ç”¨å‰ 3 ä½ï¼ˆå¦‚æœå”¯ä¸€ï¼‰</span>
docker logs a1b
<span class="hljs-meta prompt_"># </span><span class="bash">å¦‚æœåªæœ‰ä¸€ä¸ªå®¹å™¨ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ç¬¬ä¸€ä¸ªå­—ç¬¦</span>
docker logs a
<span class="hljs-meta prompt_"># </span><span class="bash">æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼ˆä½¿ç”¨çŸ­ IDï¼‰</span>
docker logs --tail 10 -f a
</code></pre>
<h4 data-id="heading-15">æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">1. å…ˆæŸ¥çœ‹å®¹å™¨åˆ—è¡¨ï¼Œç¡®è®¤ ID</span>
docker ps
<span class="hljs-meta prompt_"># </span><span class="bash">2. ä½¿ç”¨è¶³å¤Ÿé•¿çš„å‰ç¼€ç¡®ä¿å”¯ä¸€æ€§</span>
docker exec -it a1b2c3 bash
<span class="hljs-meta prompt_"># </span><span class="bash">3. åœ¨è„šæœ¬ä¸­ä½¿ç”¨å®Œæ•´ ID æˆ–é•¿å‰ç¼€</span>
CONTAINER_ID=$(docker ps -q --filter "name=myapp")
docker logs $CONTAINER_ID
</code></pre>
<h2 data-id="heading-16">5ï¼Œé•œåƒå’Œå®¹å™¨æ¸…ç†</h2>
<p>å®šæœŸæ¸…ç†æœªä½¿ç”¨çš„èµ„æºå¯ä»¥é‡Šæ”¾ç£ç›˜ç©ºé—´ã€‚</p>
<h4 data-id="heading-17">æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ¸…ç†æœªä½¿ç”¨ã€æœªæ‰“æ ‡ç­¾çš„é•œåƒï¼ˆäº¤äº’å¼ï¼‰</span>
docker image prune
<span class="hljs-meta prompt_"># </span><span class="bash">æ¸…ç†æœªä½¿ç”¨ã€æœªæ‰“æ ‡ç­¾çš„é•œåƒï¼ˆå¼ºåˆ¶ï¼Œä¸è¯¢é—®ï¼‰</span>
docker image prune -f
<span class="hljs-meta prompt_"># </span><span class="bash">æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒï¼ˆåŒ…æ‹¬æœ‰æ ‡ç­¾ä½†æœªè¢«å®¹å™¨ä½¿ç”¨çš„ï¼‰</span>
docker image prune -a
<span class="hljs-meta prompt_"># </span><span class="bash">å¼ºåˆ¶æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒ</span>
docker image prune -af
</code></pre>
<h4 data-id="heading-18">æ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ¸…ç†æ‰€æœ‰åœæ­¢çš„å®¹å™¨ï¼ˆäº¤äº’å¼ï¼‰</span>
docker container prune
<span class="hljs-meta prompt_"># </span><span class="bash">æ¸…ç†æ‰€æœ‰åœæ­¢çš„å®¹å™¨ï¼ˆå¼ºåˆ¶ï¼‰</span>
docker container prune -f
</code></pre>
<h4 data-id="heading-19">å…¨é¢æ¸…ç†</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æºï¼ˆé•œåƒã€å®¹å™¨ã€ç½‘ç»œã€æ„å»ºç¼“å­˜ï¼‰</span>
docker system prune
<span class="hljs-meta prompt_"># </span><span class="bash">å¼ºåˆ¶æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æº</span>
docker system prune -f
<span class="hljs-meta prompt_"># </span><span class="bash">æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æºï¼ŒåŒ…æ‹¬æœªä½¿ç”¨çš„é•œåƒ</span>
docker system prune -a
<span class="hljs-meta prompt_"># </span><span class="bash">æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æºï¼ŒåŒ…æ‹¬å·ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</span>
docker system prune -a --volumes
</code></pre>
<h4 data-id="heading-20">æ¸…ç†ç­–ç•¥å»ºè®®</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å®šæœŸæ¸…ç†è„šæœ¬ç¤ºä¾‹</span>
<span class="hljs-meta prompt_">#</span><span class="bash">!/bin/bash</span>
<span class="hljs-meta prompt_"># </span><span class="bash">æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨</span>
docker image prune -af
docker container prune -f
<span class="hljs-meta prompt_"># </span><span class="bash">æŸ¥çœ‹æ¸…ç†åçš„ç£ç›˜ä½¿ç”¨æƒ…å†µ</span>
docker system df
</code></pre>
<h2 data-id="heading-21">6ï¼ŒRegistry ä¸ Repository ç†è§£</h2>
<p>ç†è§£ Docker é•œåƒçš„å‘½åè§„èŒƒå¾ˆé‡è¦ã€‚</p>
<h4 data-id="heading-22">é•œåƒå‘½åæ ¼å¼</h4>
<p>{æ³¨å†Œä¸­å¿ƒ}/{å‘½åç©ºé—´}/{é•œåƒä»“åº“åç§°}:{ç‰ˆæœ¬}</p>
<h4 data-id="heading-23">å®Œæ•´ç¤ºä¾‹</h4>
<p>registry.cn-beijing.aliyuncs.com/my_namespace/tomcat:8.5.85</p>
<p><strong>ç»„æˆéƒ¨åˆ†ï¼š</strong></p>
<ul>
<li>Registryï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰ï¼šregistry.cn-beijing.aliyuncs.com</li>
<li>å‘½åç©ºé—´ï¼šmy_namespace</li>
<li>é•œåƒä»“åº“åç§°ï¼štomcat</li>
<li>ç‰ˆæœ¬æ ‡ç­¾ï¼š8.5.85</li>
</ul>
<h4 data-id="heading-24">å¸¸è§ Registry</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">Docker Hubï¼ˆé»˜è®¤ï¼Œå¯çœç•¥ï¼‰</span>
docker.io/library/nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">æˆ–ç®€å†™ä¸º</span>
nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡</span>
registry.cn-beijing.aliyuncs.com/namespace/image:tag
<span class="hljs-meta prompt_"># </span><span class="bash">åä¸ºäº‘</span>
swr.cn-north-4.myhuaweicloud.com/namespace/image:tag
<span class="hljs-meta prompt_"># </span><span class="bash">ç§æœ‰ Registry</span>
registry.example.com:5000/namespace/image:tag
</code></pre>
<h4 data-id="heading-25">å®é™…åº”ç”¨</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ‹‰å–é•œåƒ</span>
docker pull registry.cn-beijing.aliyuncs.com/my_namespace/tomcat:8.5.85
<span class="hljs-meta prompt_"># </span><span class="bash">æ¨é€é•œåƒ</span>
docker tag local-image:tag registry.cn-beijing.aliyuncs.com/my_namespace/tomcat:8.5.85
docker push registry.cn-beijing.aliyuncs.com/my_namespace/tomcat:8.5.85
</code></pre>
<h2 data-id="heading-26">7ï¼Œå®¹å™¨å¿«ç…§</h2>
<p>å®¹å™¨å¿«ç…§ç”¨äºå¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-27">å¯¼å‡ºå®¹å™¨</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å¯¼å‡ºå®¹å™¨ä¸º tar æ–‡ä»¶</span>
docker export -o container.tar containerId
<span class="hljs-meta prompt_"># </span><span class="bash">æˆ–ä½¿ç”¨é‡å®šå‘</span>
docker export containerId &gt; container.tar
<span class="hljs-meta prompt_"># </span><span class="bash">å¯¼å‡ºå¹¶å‹ç¼©</span>
docker export containerId | gzip &gt; container.tar.gz
</code></pre>
<h4 data-id="heading-28">å¯¼å…¥å®¹å™¨</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä» tar æ–‡ä»¶å¯¼å…¥ä¸ºé•œåƒ</span>
docker import container.tar
<span class="hljs-meta prompt_"># </span><span class="bash">å¯¼å…¥å¹¶æŒ‡å®šåç§°å’Œæ ‡ç­¾</span>
docker import container.tar my-image:tag
<span class="hljs-meta prompt_"># </span><span class="bash">ä»å‹ç¼©æ–‡ä»¶å¯¼å…¥</span>
gunzip -c container.tar.gz | docker import - my-image:tag
</code></pre>
<h4 data-id="heading-29">ä½¿ç”¨åœºæ™¯</h4>
<ul>
<li>å¤‡ä»½å®¹å™¨æ–‡ä»¶ç³»ç»Ÿ</li>
<li>è¿ç§»å®¹å™¨åˆ°å…¶ä»–ç¯å¢ƒ</li>
<li>åˆ›å»ºåŸºç¡€é•œåƒ</li>
</ul>
<h4 data-id="heading-30">æ³¨æ„äº‹é¡¹</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-built_in">export</span>/import ä¸ save/load çš„åŒºåˆ«ï¼š</span>
<span class="hljs-meta prompt_"># </span><span class="bash">- <span class="hljs-built_in">export</span>: å¯¼å‡ºå®¹å™¨æ–‡ä»¶ç³»ç»Ÿï¼ˆä¸åŒ…å«å†å²è®°å½•å’Œå…ƒæ•°æ®ï¼‰</span>
<span class="hljs-meta prompt_"># </span><span class="bash">- save: å¯¼å‡ºé•œåƒï¼ˆåŒ…å«å®Œæ•´å†å²å’Œå…ƒæ•°æ®ï¼‰</span>
<span class="hljs-meta prompt_"># </span><span class="bash">å¯¼å‡ºé•œåƒï¼ˆæ¨èç”¨äºé•œåƒè¿ç§»ï¼‰</span>
docker save -o image.tar image:tag
<span class="hljs-meta prompt_"># </span><span class="bash">å¯¼å…¥é•œåƒ</span>
docker load -i image.tar
</code></pre>
<h2 data-id="heading-31">8ï¼Œå®¹å™¨èµ„æºé™åˆ¶</h2>
<p>åˆç†è®¾ç½®èµ„æºé™åˆ¶å¯ä»¥é˜²æ­¢å®¹å™¨å ç”¨è¿‡å¤šç³»ç»Ÿèµ„æºã€‚</p>
<h4 data-id="heading-32">å†…å­˜é™åˆ¶</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">è®¾ç½®å†…å­˜é™åˆ¶ä¸º 300MBï¼Œswap æ— é™åˆ¶ï¼Œå†…æ ¸å†…å­˜ 50MB</span>
docker run -m 300M --memory-swap -1 --kernel-memory 50M centos:latest /bin/bash
<span class="hljs-meta prompt_"># </span><span class="bash">å‚æ•°è¯´æ˜ï¼š</span>
<span class="hljs-meta prompt_"># </span><span class="bash">-m, --memory: å®¹å™¨å†…å­˜é™åˆ¶</span>
<span class="hljs-meta prompt_"># </span><span class="bash">--memory-swap: swap é™åˆ¶ï¼ˆ-1 è¡¨ç¤ºæ— é™åˆ¶ï¼‰</span>
<span class="hljs-meta prompt_"># </span><span class="bash">--kernel-memory: å†…æ ¸å†…å­˜é™åˆ¶</span>
</code></pre>
<h4 data-id="heading-33">å†…å­˜é™åˆ¶ç¤ºä¾‹</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">é™åˆ¶å†…å­˜ä¸º 512MBï¼Œswap ä¸º 1GB</span>
docker run -m 512M --memory-swap 1G nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">é™åˆ¶å†…å­˜ä¸º 1GBï¼Œä¸å…è®¸ä½¿ç”¨ swap</span>
docker run -m 1G --memory-swap 1G nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">é™åˆ¶å†…å­˜ä¸º 256MBï¼Œswap æ— é™åˆ¶</span>
docker run -m 256M --memory-swap -1 nginx:latest
</code></pre>
<h4 data-id="heading-34">CPU é™åˆ¶</h4>
<p>Docker æä¾›ä¸¤ç§ CPU é™åˆ¶æ–¹å¼ï¼š</p>
<h5 data-id="heading-35">æ–¹å¼Â 1ï¼šCPU æƒé‡ï¼ˆ--cpu-sharesï¼‰</h5>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">è®¾ç½® CPU æƒé‡ï¼ˆå¯é€‰å€¼ 0-1024ï¼‰</span>
docker run -c 512 nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">æ›´æ–°è¿è¡Œä¸­å®¹å™¨çš„ CPU æƒé‡</span>
docker update -c 1024 containerId
</code></pre>
<p><strong>æƒé‡è¯´æ˜ï¼š</strong></p>
<ul>
<li>é»˜è®¤æƒé‡ä¸º 1024</li>
<li>æƒé‡è¶Šé«˜ï¼Œåˆ†é…çš„ CPU æ—¶é—´è¶Šå¤š</li>
<li>åªåœ¨ CPU èµ„æºç´§å¼ æ—¶ç”Ÿæ•ˆ</li>
</ul>
<h5 data-id="heading-36">æ–¹å¼ 2ï¼šCPU æ•°é‡ï¼ˆ--cpusï¼‰</h5>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">é™åˆ¶å®¹å™¨ä½¿ç”¨ 1 ä¸ª CPU æ ¸å¿ƒ</span>
docker run --cpus=1 nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">é™åˆ¶å®¹å™¨ä½¿ç”¨ 0.5 ä¸ª CPU æ ¸å¿ƒ</span>
docker run --cpus=0.5 nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">æ›´æ–°è¿è¡Œä¸­å®¹å™¨çš„ CPU é™åˆ¶</span>
docker update --cpus=1 containerId
</code></pre>
<h4 data-id="heading-37">CPU é™åˆ¶ç¤ºä¾‹</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">é™åˆ¶ä¸º 1 ä¸ª CPU æ ¸å¿ƒ</span>
docker run --cpus=1 nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">é™åˆ¶ä¸º 2 ä¸ª CPU æ ¸å¿ƒ</span>
docker run --cpus=2 nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">é™åˆ¶ä¸º 1.5 ä¸ª CPU æ ¸å¿ƒ</span>
docker run --cpus=1.5 nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">åŒæ—¶é™åˆ¶ CPU å’Œå†…å­˜</span>
docker run --cpus=1 -m 512M nginx:latest
</code></pre>
<h4 data-id="heading-38">ç»„åˆèµ„æºé™åˆ¶</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å®Œæ•´çš„èµ„æºé™åˆ¶ç¤ºä¾‹</span>
docker run \
  --cpus=1 \
  -m 512M \
  --memory-swap 1G \
  --kernel-memory 128M \
  nginx:latest
</code></pre>
<h2 data-id="heading-39">9ï¼Œç£ç›˜å ç”¨æ£€æŸ¥</h2>
<p>å®šæœŸæ£€æŸ¥Â Docker ç£ç›˜ä½¿ç”¨æƒ…å†µï¼ŒåŠæ—¶æ¸…ç†ã€‚</p>
<h4 data-id="heading-40">æŸ¥çœ‹ç£ç›˜ä½¿ç”¨</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æŸ¥çœ‹ Docker ç£ç›˜ä½¿ç”¨æƒ…å†µ</span>
docker system df
<span class="hljs-meta prompt_"># </span><span class="bash">è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-meta prompt_"># </span><span class="bash">TYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE</span>
<span class="hljs-meta prompt_"># </span><span class="bash">Images          5          3         2.5GB     1.2GB (48%)</span>
<span class="hljs-meta prompt_"># </span><span class="bash">Containers      10         2         500MB     400MB (80%)</span>
<span class="hljs-meta prompt_"># </span><span class="bash">Local Volumes   3          1         100MB     66.67MB (66%)</span>
<span class="hljs-meta prompt_"># </span><span class="bash">Build Cache     0          0         0B        0B</span>
</code></pre>
<h4 data-id="heading-41">è¯¦ç»†æŸ¥çœ‹</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æŸ¥çœ‹é•œåƒå ç”¨</span>
docker system df -v
<span class="hljs-meta prompt_"># </span><span class="bash">æŸ¥çœ‹ç‰¹å®šç±»å‹çš„å ç”¨</span>
docker system df --type images
docker system df --type containers
docker system df --type volumes
</code></pre>
<h4 data-id="heading-42">æ¸…ç†å»ºè®®</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ ¹æ®ç£ç›˜ä½¿ç”¨æƒ…å†µå†³å®šæ¸…ç†ç­–ç•¥</span>
docker system df
<span class="hljs-meta prompt_"># </span><span class="bash">å¦‚æœé•œåƒå ç”¨å¤§</span>
docker image prune -a
<span class="hljs-meta prompt_"># </span><span class="bash">å¦‚æœå®¹å™¨å ç”¨å¤§</span>
docker container prune
<span class="hljs-meta prompt_"># </span><span class="bash">å¦‚æœå·å ç”¨å¤§</span>
docker volume prune
</code></pre>
<h2 data-id="heading-43">Â 10ï¼Œå®¹å™¨é‡å‘½å</h2>
<p>é‡å‘½åå®¹å™¨å¯ä»¥æ›´å¥½åœ°ç®¡ç†å®¹å™¨ã€‚</p>
<h4 data-id="heading-44">é‡å‘½åå‘½ä»¤</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">é‡å‘½åå®¹å™¨</span>
docker rename old_name new_name
<span class="hljs-meta prompt_"># </span><span class="bash">ç¤ºä¾‹</span>
docker rename my-old-container my-new-container
</code></pre>
<p>é‡å‘½åå®¹å™¨å¯ä»¥æ›´å¥½åœ°ç®¡ç†å®¹å™¨ã€‚</p>
<h4 data-id="heading-45">æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>æ–°åç§°å¿…é¡»å”¯ä¸€</li>
<li>é‡å‘½ååï¼Œå®¹å™¨ ID ä¸ä¼šæ”¹å˜</li>
</ul>
<h4 data-id="heading-46">å®ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">é‡å‘½å</span>
docker rename old_name new_name
<span class="hljs-meta prompt_"># </span><span class="bash">å¯åŠ¨é‡å‘½ååçš„å®¹å™¨</span>
docker start new_name
</code></pre>
<h2 data-id="heading-47">11ï¼ŒDocker å‘½ä»¤ç»„åˆ</h2>
<p>ç†è§£ Docker å‘½ä»¤çš„ç»„åˆå…³ç³»æœ‰åŠ©äºæ›´å¥½åœ°ä½¿ç”¨ Dockerã€‚</p>
<h4 data-id="heading-48">docker run = docker create + docker start</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">docker run ç­‰ä»·äºä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤çš„ç»„åˆ</span>
docker create [OPTIONS] IMAGE [COMMAND] [ARG...]
docker start [OPTIONS] CONTAINER [CONTAINER...]
<span class="hljs-meta prompt_"># </span><span class="bash">ç¤ºä¾‹å¯¹æ¯”ï¼š</span>
<span class="hljs-meta prompt_"># </span><span class="bash">æ–¹å¼ 1ï¼šç›´æ¥è¿è¡Œ</span>
docker run -d --name myapp nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">æ–¹å¼ 2ï¼šåˆ†æ­¥æ‰§è¡Œ</span>
docker create -d --name myapp nginx:latest
docker start myapp
</code></pre>
<h4 data-id="heading-49">ä½¿ç”¨åœºæ™¯</h4>
<p>ä½¿ç”¨Â docker runï¼ˆæ¨èï¼‰ï¼š</p>
<ul>
<li>ä¸€æ¬¡æ€§åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨</li>
<li>ç®€å•å¿«é€Ÿçš„åœºæ™¯</li>
</ul>
<p>ä½¿ç”¨Â docker create +Â docker startï¼š</p>
<ul>
<li>éœ€è¦å…ˆåˆ›å»ºå®¹å™¨ï¼Œç¨åå¯åŠ¨</li>
<li>éœ€è¦ä¿®æ”¹é…ç½®åå†å¯åŠ¨</li>
<li>æ‰¹é‡åˆ›å»ºå®¹å™¨</li>
</ul>
<h4 data-id="heading-50">å®é™…åº”ç”¨</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åˆ›å»ºå®¹å™¨ä½†ä¸å¯åŠ¨</span>
docker create --name myapp nginx:latest
<span class="hljs-meta prompt_"># </span><span class="bash">æ£€æŸ¥å®¹å™¨é…ç½®</span>
docker inspect myapp
<span class="hljs-meta prompt_"># </span><span class="bash">ä¿®æ”¹é…ç½®åå¯åŠ¨</span>
docker start myapp
<span class="hljs-meta prompt_"># </span><span class="bash">æˆ–è€…ç›´æ¥è¿è¡Œ</span>
docker run -d --name myapp nginx:latest
</code></pre>
<h2 data-id="heading-51">12ï¼ŒDocker æ„å»ºé«˜çº§é€‰é¡¹</h2>
<p>ä½¿ç”¨é«˜çº§é€‰é¡¹ä¼˜åŒ– Docker æ„å»ºè¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-52">å®Œæ•´æ„å»ºå‘½ä»¤ç¤ºä¾‹</h4>
<pre><code class="hljs language-shell" lang="shell">docker build \
  --pull \
  --ulimit nofile=200000:200000 \
  --ulimit nproc=65535:65535 \
  --rm \
  -t "registry.cn-beijing.aliyuncs.com/my_namespace/tomcat:8.5.85_openjdk8.222.10" \
  -f "/usr/local/src/docker/Dockerfile" \
  "/usr/local/src/docker"
</code></pre>
<h4 data-id="heading-53">å‚æ•°è¯´æ˜</h4>
<h5 data-id="heading-54">--pull</h5>
<p>ä½œç”¨ï¼šÂ ç¡®ä¿ä½¿ç”¨æœ€æ–°çš„åŸºç¡€é•œåƒ</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ„å»ºå‰æ‹‰å–æœ€æ–°åŸºç¡€é•œåƒ</span>
docker build --pull -t myimage:tag .
</code></pre>
<h5 data-id="heading-55">--ulimit</h5>
<p>ä½œç”¨ï¼šÂ è®¾ç½®å®¹å™¨è¿è¡Œæ—¶çš„èµ„æºé™åˆ¶</p>
<p>æ ¼å¼ï¼šÂ --ulimit &lt;type&gt;=&lt;soft&gt;:&lt;hard&gt;</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">è®¾ç½®æ–‡ä»¶æè¿°ç¬¦é™åˆ¶</span>
--ulimit nofile=200000:200000
<span class="hljs-meta prompt_"># </span><span class="bash">è®¾ç½®è¿›ç¨‹æ•°é™åˆ¶</span>
--ulimit nproc=65535:65535
</code></pre>
<h5 data-id="heading-56">--rm</h5>
<p>ä½œç”¨ï¼šÂ è‡ªåŠ¨æ¸…ç†æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸´æ—¶å®¹å™¨</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ„å»ºæˆåŠŸååˆ é™¤ä¸­é—´å®¹å™¨</span>
docker build --rm -t myimage:tag .
</code></pre>
<h5 data-id="heading-57">-t, --tag</h5>
<p>ä½œç”¨ï¼šÂ ä¸ºæ„å»ºçš„é•œåƒæ‰“æ ‡ç­¾</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æŒ‡å®šé•œåƒåç§°å’Œæ ‡ç­¾</span>
-t "registry.cn-beijing.aliyuncs.com/my_namespace/tomcat:8.5.85_openjdk8.222.10"
</code></pre>
<h5 data-id="heading-58">-f,Â --file</h5>
<p>ä½œç”¨ï¼šÂ ä½¿ç”¨éé»˜è®¤åç§°çš„ Dockerfile</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æŒ‡å®š Dockerfile è·¯å¾„</span>
-f "/usr/local/src/cticloud-docker/Dockerfile"
</code></pre>
<h4 data-id="heading-59">å…¶ä»–å¸¸ç”¨æ„å»ºé€‰é¡¹</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ„å»ºæ—¶ä¸ä½¿ç”¨ç¼“å­˜</span>
docker build --no-cache -t myimage:tag .
<span class="hljs-meta prompt_"># </span><span class="bash">æŒ‡å®šæ„å»ºå‚æ•°</span>
docker build --build-arg VERSION=1.0 -t myimage:tag .
<span class="hljs-meta prompt_"># </span><span class="bash">æŒ‡å®šç›®æ ‡å¹³å°</span>
docker build --platform linux/amd64 -t myimage:tag .
<span class="hljs-meta prompt_"># </span><span class="bash">æ˜¾ç¤ºæ„å»ºè¿‡ç¨‹</span>
docker build --progress=plain -t myimage:tag .
</code></pre>
<h2 data-id="heading-60">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†Â Docker çš„å¸¸ç”¨æŠ€å·§å’Œæ“ä½œï¼š</p>
<ol>
<li>ç”¨æˆ·æƒé™é…ç½®ï¼šå°†é root ç”¨æˆ·æ·»åŠ åˆ° docker ç»„</li>
<li>æ ¼å¼åŒ–è¾“å‡ºï¼šä½¿ç”¨ Go æ¨¡æ¿è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼</li>
<li>æ—¶é—´æ ¼å¼å’Œè¾“å‡ºæ§åˆ¶ï¼šæ˜¾ç¤ºå®Œæ•´ä¿¡æ¯å’Œæ—¶é—´æˆ³</li>
<li>ID ç¼©å†™ï¼šä½¿ç”¨çŸ­ ID æé«˜æ“ä½œæ•ˆç‡</li>
<li>èµ„æºæ¸…ç†ï¼šå®šæœŸæ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨</li>
<li>é•œåƒå‘½åï¼šç†è§£ Registry å’Œ Repository çš„æ ¼å¼</li>
<li>å®¹å™¨å¿«ç…§ï¼šå¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨æ–‡ä»¶ç³»ç»Ÿ</li>
<li>èµ„æºé™åˆ¶ï¼šåˆç†è®¾ç½®å†…å­˜å’Œ CPU é™åˆ¶</li>
<li>ç£ç›˜ç®¡ç†ï¼šæ£€æŸ¥å’Œç®¡ç† Docker ç£ç›˜å ç”¨</li>
<li>å®¹å™¨ç®¡ç†ï¼šé‡å‘½åå’Œç»„åˆä½¿ç”¨å‘½ä»¤</li>
<li>æ„å»ºä¼˜åŒ–ï¼šä½¿ç”¨é«˜çº§é€‰é¡¹ä¼˜åŒ–æ„å»ºè¿‡ç¨‹</li>
</ol>
<p>æŒæ¡è¿™äº›æŠ€å·§å¯ä»¥æå‡ Docker ä½¿ç”¨æ•ˆç‡ï¼Œæ›´å¥½åœ°ç®¡ç†å®¹å™¨åŒ–åº”ç”¨ã€‚</p>
<h2 data-id="heading-61">å¿«é€Ÿå‚è€ƒ</h2>
<h4 data-id="heading-62">å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ç”¨æˆ·æƒé™</span>
sudo usermod -aG docker $USER
<span class="hljs-meta prompt_"># </span><span class="bash">æ ¼å¼åŒ–è¾“å‡º</span>
docker ps --format "{{.Names}}\t{{.Status}}"
docker images --format "{{.Repository}}:{{.Tag}}"
<span class="hljs-meta prompt_"># </span><span class="bash">æ¸…ç†èµ„æº</span>
docker system prune -af
docker image prune -af
docker container prune -f
<span class="hljs-meta prompt_"># </span><span class="bash">èµ„æºé™åˆ¶</span>
docker run --cpus=1 -m 512M nginx:latest
docker update --cpus=2 containerId
<span class="hljs-meta prompt_"># </span><span class="bash">ç£ç›˜æ£€æŸ¥</span>
docker system df
<span class="hljs-meta prompt_"># </span><span class="bash">å®¹å™¨å¿«ç…§</span>
docker export -o container.tar containerId
docker import container.tar my-image:tag
</code></pre>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ã€‚å¦‚éœ€è¡¥å……æˆ–ä¿®æ”¹ï¼Œè¯·å‘ŠçŸ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æˆ˜æŒ‡å—ï¼šUSearch ä¸ SPL æŸ¥è¯¢è¯­æ³•ï¼Œç©è½¬ Entity Explorer å®ä½“æ£€ç´¢]]></title>    <link>https://juejin.cn/post/7579555970595143721</link>    <guid>https://juejin.cn/post/7579555970595143721</guid>    <pubDate>2025-12-04T02:42:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579555970595143721" data-draft-id="7579436743260143635" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æˆ˜æŒ‡å—ï¼šUSearch ä¸ SPL æŸ¥è¯¢è¯­æ³•ï¼Œç©è½¬ Entity Explorer å®ä½“æ£€ç´¢"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-12-04T02:42:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æˆ˜æŒ‡å—ï¼šUSearch ä¸ SPL æŸ¥è¯¢è¯­æ³•ï¼Œç©è½¬ Entity Explorer å®ä½“æ£€ç´¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:42:05.000Z" title="Thu Dec 04 2025 02:42:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šçµäº¦</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯å®ä½“æ¢ç´¢ï¼ˆEntity Explorerï¼‰</h2>
<h3 data-id="heading-1">1.1 å®ä½“æ¢ç´¢æ¦‚è¿°</h3>
<p>åœ¨å¯è§‚æµ‹æ€§é¢†åŸŸï¼Œå®ä½“ï¼ˆEntityï¼‰æŒ‡çš„æ˜¯ä»»ä½•å¯ä»¥è¢«ç‹¬ç«‹è¯†åˆ«å’Œç›‘æ§çš„å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>åŸºç¡€è®¾æ–½å®ä½“ï¼š</strong> ä¸»æœºã€å®¹å™¨ã€ç½‘ç»œè®¾å¤‡ã€å­˜å‚¨ç³»ç»Ÿ</li>
<li><strong>åº”ç”¨å±‚å®ä½“ï¼š</strong> å¾®æœåŠ¡ã€API æ¥å£ã€æ•°æ®åº“å®ä¾‹ã€æ¶ˆæ¯é˜Ÿåˆ—</li>
<li><strong>ä¸šåŠ¡å®ä½“ï¼š</strong> ç”¨æˆ·ä¼šè¯ã€ä¸šåŠ¡æµç¨‹ã€äº¤æ˜“è®¢å•</li>
<li><strong>è¿ç»´å®ä½“ï¼š</strong> éƒ¨ç½²ç¯å¢ƒã€ä»£ç ä»“åº“ã€è¿ç»´äººå‘˜</li>
</ul>
<p>å®ä½“æŸ¥è¯¢çš„æ ¸å¿ƒä»·å€¼åœ¨äºæ‰“ç ´ä¼ ç»Ÿç›‘æ§ä¸­æŒ‰â€œäº§å“â€æˆ–â€œæŒ‡æ ‡â€åˆ’åˆ†çš„å­¤å²›å¼è§†å›¾ï¼Œæ„å»ºå…¨æ™¯åŒ–çš„å®ä½“èµ„äº§ç›®å½•ã€‚ç”¨æˆ·å¯ä»¥åœ¨å®ä½“æŸ¥è¯¢ä¸­å®ç°ä»¥ä¸‹ç›®æ ‡ï¼š</p>
<ul>
<li>ç»Ÿä¸€ç›˜ç‚¹ï¼šæ¸…æ™°æŸ¥çœ‹ UModel ä¸­å®šä¹‰çš„æ‰€æœ‰å®ä½“ç±»å‹ï¼ˆEntity Typeï¼‰åŠå…·ä½“å®ä½“å®ä¾‹ï¼Œå¹¶æŒ‰åŸŸï¼ˆDomainï¼‰å’Œç±»å‹è¿›è¡Œåˆ†ç±»å±•ç¤ºã€‚</li>
<li>å¿«é€Ÿæ£€ç´¢ï¼šåˆ©ç”¨ USearch æŸ¥è¯¢è¯­è¨€ï¼Œæ”¯æŒå…¨æ–‡æ£€ç´¢ã€ç²¾ç¡®åŒ¹é…ã€æ¡ä»¶è¿‡æ»¤ç­‰å¤šç§æ–¹å¼ï¼Œå¿«é€Ÿå®šä½æ‰€éœ€å®ä½“ã€‚</li>
<li>å…³è”åˆ†æï¼šä»¥ä»»ä¸€å®ä½“ä¸ºèµ·ç‚¹ï¼Œæ¢ç´¢å…¶çŠ¶æ€ã€æ€§èƒ½æŒ‡æ ‡ã€å…³è”æ—¥å¿—ã€é“¾è·¯è¿½è¸ªå’Œæ‹“æ‰‘å…³ç³»ï¼Œå®ç°ä¸€ç«™å¼é—®é¢˜è¯Šæ–­ä¸åˆ†æã€‚</li>
</ul>
<h3 data-id="heading-2">1.2 å®ä½“æ¢ç´¢çš„éš¾åº¦</h3>
<p>è¦å®ç°é«˜æ•ˆã€ç²¾å‡†çš„å®ä½“æ¢ç´¢ï¼Œæ„å‘³ç€éœ€è¦åœ¨æµ·é‡ã€å¼‚æ„çš„æ•°æ®ä¸­å¿«é€Ÿå®šä½å¹¶åˆ†æç›®æ ‡ã€‚åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é¢ä¸´ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯æŒ‘æˆ˜ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d83d922021fa44b3824a2a36b4987282~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=lGj37Y8BOUljwiyQNwF4aeCj2ss%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-3">1.2.1 æµ·é‡æ•°æ®çš„æ€§èƒ½æŒ‘æˆ˜</h4>
<p>å½“å®ä½“æ•°æ®è¾¾åˆ°äº¿çº§ç”šè‡³æ›´é«˜è§„æ¨¡æ—¶ï¼Œç®€å•çš„å¤„ç†æ–¹å¼ä¼šè¿…é€Ÿå¤±æ•ˆï¼Œå¸¦æ¥ä¸¥å³»çš„æ€§èƒ½ä¸æˆæœ¬é—®é¢˜ã€‚</p>
<p>è®¡ç®—å¤æ‚åº¦çš„çˆ†ç‚¸å¼å¢é•¿ï¼šç†è®ºä¸Šï¼Œä»»æ„ä¸¤ä¸ªå®ä½“è®°å½•éƒ½å¯èƒ½å­˜åœ¨å…³è”ã€‚è‹¥é‡‡ç”¨éå†åŒ¹é…çš„æ–¹å¼ï¼Œè®¡ç®—å¤æ‚åº¦å°†å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚åœ¨æµ·é‡æ•°æ®èƒŒæ™¯ä¸‹ï¼Œè¿™ç§æ–¹æ³•è€—æ—¶æé•¿ï¼Œå®Œå…¨ä¸å…·å¤‡å¯è¡Œæ€§ã€‚</p>
<p>å·¨å¤§çš„èµ„æºä¸æˆæœ¬å‹åŠ›ï¼šå¤§è§„æ¨¡æ•°æ®å¤„ç†ä¼šæ€¥å‰§æ¶ˆè€—ç®—åŠ›ã€å­˜å‚¨å’Œç½‘ç»œå¸¦å®½ã€‚ä»»ä½•å¾®å°çš„ç®—æ³•ä½æ•ˆéƒ½ä¼šè¢«æ•°æ®è§„æ¨¡æ— é™æ”¾å¤§ï¼Œç›´æ¥è½¬åŒ–ä¸ºæ˜¾è‘—çš„èµ„æºä¸æ—¶é—´æˆæœ¬ã€‚</p>
<p>ä¸¥è‹›çš„å®æ—¶æ€§è¦æ±‚ï¼šå®ä½“æ¢ç´¢å¹¶éä¸€æ¬¡æ€§ç¦»çº¿åˆ†æã€‚ç³»ç»Ÿå¿…é¡»èƒ½å¤Ÿå¯¹æŒç»­æ¶Œå…¥çš„æ–°æ•°æ®è¿›è¡Œå¢é‡å¤„ç†ä¸å®æ—¶æ›´æ–°ï¼Œå¦åˆ™æ¢ç´¢ç»“æœä¼šè¿…é€Ÿè¿‡æ—¶ï¼Œå¤±å»ä¸šåŠ¡ä»·å€¼ã€‚</p>
<h4 data-id="heading-4">1.2.2 æ•°æ®å¼‚æ„ä¸è¯­ä¹‰å¤šæ ·æ€§</h4>
<p>å®ä½“æ•°æ®å¾€å¾€æ¥æºäºå¤šä¸ªç³»ç»Ÿï¼Œæ ¼å¼ä¸ä¸€ã€è´¨é‡å‚å·®ä¸é½ï¼Œè¿™ç»™å®ä½“è¯†åˆ«ä¸å…³è”å¸¦æ¥äº†å·¨å¤§éšœç¢ã€‚</p>
<p>å®ä½“æè¿°ä¸ç»Ÿä¸€ï¼šåŒä¸€å®ä½“åœ¨ä¸åŒæ•°æ®æºä¸­å¯èƒ½å­˜åœ¨å¤šç§å†™æ³•ï¼Œå¦‚åˆ«åã€ç¼©å†™ã€è°éŸ³ã€æ‹¼å†™é”™è¯¯ã€ç¹ç®€ä½“å·®å¼‚ã€ä¸­è‹±æ–‡å¤¹æ‚ç­‰ï¼ˆä¾‹å¦‚ï¼Œâ€œIBMâ€ã€â€œI.B.M.â€ä¸â€œå›½é™…å•†ä¸šæœºå™¨â€æŒ‡å‘åŒä¸€å¯¹è±¡ï¼‰ï¼Œä¸¥é‡å¹²æ‰°äº†å®ä½“çš„å‡†ç¡®å®šä½ã€‚</p>
<p>ä¿¡æ¯ç¼ºå¤±ä¸è´¨é‡é—®é¢˜ï¼šå®ä½“ä¿¡æ¯å¸¸å¸¸å­˜åœ¨æ•°æ®â€œè„â€æˆ–ç¼ºå¤±çš„æƒ…å†µï¼Œä¾‹å¦‚å…³é”®å­—æ®µä¸ºç©ºã€åœ°å€ä¿¡æ¯ä¸å®Œæ•´ã€è”ç³»æ–¹å¼è¿‡æ—¶ã€æ—¶é—´æˆ³ä¸å‡†ç¡®ï¼Œç”šè‡³å­—æ®µå†…å®¹é”™å¡«ï¼ˆå¦‚å°†æ³•äººåå¡«å…¥å…¬å¸ååˆ—ï¼‰ï¼Œå¯¼è‡´æ— æ³•å»ºç«‹å¯ä¿¡çš„å®ä½“ç”»åƒã€‚</p>
<h4 data-id="heading-5">1.2.3 å‰ç«¯å‘ˆç°çš„å®šåˆ¶åŒ–ä¸é«˜è€¦åˆ</h4>
<p>å³ä½¿åç«¯æ•°æ®å¤„ç†å®Œæ¯•ï¼Œå¦‚ä½•å°†å…¶æœ‰æ•ˆå‘ˆç°ç»™ç”¨æˆ·ï¼Œä¹Ÿé¢ä¸´ç€æ¶æ„å±‚é¢çš„å›°å¢ƒï¼Œç›´æ¥å½±å“ç ”å‘æ•ˆç‡å’Œç³»ç»Ÿå¯ç»´æŠ¤æ€§ã€‚</p>
<p>UI å¼€å‘æˆæœ¬é«˜ï¼šç”±äºæ¯ç§å®ä½“éƒ½éœ€è¦ä¸€å¥—ç‹¬ç«‹çš„ UI å‘ˆç°æ–¹æ¡ˆï¼Œå¯¼è‡´å‰ç«¯å¼€å‘å­˜åœ¨å¤§é‡é‡å¤å·¥ä½œï¼Œä¸”éš¾ä»¥ç»Ÿä¸€è®¾è®¡é£æ ¼ä¸äº¤äº’ä½“éªŒã€‚</p>
<p>æ•°æ®é€»è¾‘åˆ†æ•£ï¼šæ•°æ®è·å–é€»è¾‘ä¸å®ä½“ç±»å‹ã€ID æ·±åº¦ç»‘å®šï¼Œæ•°æ®æ¥æºåˆ†æ•£ã€‚è¿™ä¸ä»…å¢åŠ äº†åç«¯æ¥å£èšåˆçš„å¤æ‚åº¦ï¼Œä¹Ÿä½¿å‰ç«¯éœ€è¦å¯¹æ¥å¤šä¸ªæ•°æ®æºï¼Œæ•°æ®ç®¡ç†å˜å¾—å¼‚å¸¸å›°éš¾ã€‚</p>
<p>é…ç½®å™©æ¢¦ä¸é«˜è€¦åˆï¼šå®ä½“é—´çš„å…³è”è·³è½¬é…ç½®æä¸ºå¤æ‚ï¼Œå¸¸å¸¸ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚è¿™ç§ç¡¬ç¼–ç å¼çš„å…³è”é€»è¾‘å¯¼è‡´ç³»ç»Ÿè€¦åˆåº¦æé«˜ï¼Œæ¯æ¬¡éœ€æ±‚å˜æ›´éƒ½ä¼´éšç€å·¨å¤§çš„å¼€å‘ã€æµ‹è¯•æˆæœ¬ä¸æ½œåœ¨é£é™©ã€‚</p>
<h3 data-id="heading-6">1.3 å®ä½“æ¢ç´¢å¹³å°çš„è§£å†³æ€è·¯</h3>
<p>ä¸ºè§£å†³å®ä½“æ¢ç´¢ä¸­æ•°æ®é‡å·¨å¤§ã€å†…å®¹æ··æ‚ã€UI å¼€å‘å¤æ‚è¿™ä¸‰å¤§æ ¸å¿ƒéš¾é¢˜ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€å¥—ç”±å››å¤§æ”¯æŸ±æ„æˆçš„ç»¼åˆè§£å†³æ–¹æ¡ˆã€‚è¿™å¥—æ–¹æ¡ˆä»æŸ¥è¯¢å…¥å£ã€ä¸šåŠ¡èåˆã€å…³è”åˆ†æåˆ° UI å‘ˆç°ï¼Œå½¢æˆäº†ä¸€ä¸ªå®Œæ•´é—­ç¯ï¼Œæ—¨åœ¨å®ç°é«˜æ•ˆã€æ™ºèƒ½ã€ä½æˆæœ¬çš„å®ä½“å¯è§‚æµ‹æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6aa48becd013485e910b5eb6b495b940~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=uY2rGvyD2qxExqDHLuHTKq2de2U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-7">1.3.1 ç»Ÿä¸€æŸ¥è¯¢å…¥å£ï¼šåŸºäº USearch çš„å…¨å±€æ£€ç´¢ç»„ä»¶</h4>
<p>æ‰“é€ ä¸€ä¸ªç±»ä¼¼æœç´¢å¼•æ“çš„ã€åŠŸèƒ½å¼ºå¤§çš„ç»Ÿä¸€æŸ¥è¯¢å…¥å£ã€‚ç”¨æˆ·æ— éœ€å…³å¿ƒåº•å±‚æ•°æ®çš„å­˜å‚¨ä½ç½®å’Œå¼‚æ„æ€§ï¼Œåªéœ€é€šè¿‡ç®€å•ã€è‡ªç„¶çš„è¯­è¨€å³å¯å®Œæˆå¯¹æµ·é‡å®ä½“çš„ç²¾å‡†å®šä½å’Œå¿«é€Ÿæ£€ç´¢ã€‚</p>
<ul>
<li>å±è”½åº•å±‚å¤æ‚æ€§ï¼šè¯¥ç»„ä»¶ä½œä¸ºå”¯ä¸€çš„æ•°æ®æŸ¥è¯¢ç»„ä»¶ï¼Œå°†ç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢è¯­å¥ï¼ˆåŸºäº USearch è¯­è¨€ï¼‰è§£æå¹¶åˆ†å‘åˆ°ä¸åŒçš„åç«¯æ•°æ®æºï¼ˆå¦‚æ—¥å¿—åº“ã€æŒ‡æ ‡åº“ã€CMDB ç­‰ï¼‰ã€‚å®ƒå°†å¼‚æ„æ•°æ®æºçš„æŸ¥è¯¢ç»“æœè¿›è¡Œèšåˆã€æ¸…æ´—å’Œæ ¼å¼åŒ–ï¼Œæœ€ç»ˆä»¥ç»Ÿä¸€çš„å®ä½“æ¨¡å‹è¿”å›ç»™ä¸Šå±‚åº”ç”¨ã€‚</li>
<li>é«˜æ€§èƒ½æŸ¥è¯¢å¼•æ“ï¼šä¾æ‰˜ USearch åº•å±‚ä¼˜åŒ–çš„ç´¢å¼•å’Œåˆ†å¸ƒå¼è®¡ç®—èƒ½åŠ›ï¼Œå³ä½¿åœ¨ç™¾äº¿çº§çš„æ•°æ®è§„æ¨¡ä¸‹ï¼Œä¹Ÿèƒ½å®ç°ç§’çº§çš„æŸ¥è¯¢å“åº”ã€‚è¿™ç›´æ¥è§£å†³äº†â€œé‡å¤ªå¤§â€å¸¦æ¥çš„æ€§èƒ½ç“¶é¢ˆå’Œå®æ—¶æ€§å‹åŠ›ã€‚</li>
</ul>
<h4 data-id="heading-8">1.3.2 åœºæ™¯é©±åŠ¨ï¼šå®ä½“ä¸ä¸šåŠ¡èåˆçš„åº”ç”¨ï¼ˆAPPï¼‰</h4>
<p>æ‰“ç ´â€œæ•°æ®å­¤å²›â€ï¼Œå°†æŠ€æœ¯å®ä½“ä¸å…·ä½“çš„ä¸šåŠ¡åœºæ™¯æ·±åº¦èåˆã€‚æˆ‘ä»¬æä¾›çš„ä¸æ˜¯ä¸€ä¸ªå†°å†·çš„å®ä½“åˆ—è¡¨ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸ªé¢å‘ä¸šåŠ¡é—®é¢˜ã€é¢„è®¾äº†åˆ†æè·¯å¾„çš„â€œåº”ç”¨â€ï¼ˆAPPï¼‰ï¼Œè®©æŠ€æœ¯ç›‘æ§æ•°æ®ç›´æ¥æœåŠ¡äºä¸šåŠ¡ä»·å€¼ã€‚</p>
<p>ä¸Šä¸‹æ–‡èšåˆï¼šä¸ºç‰¹å®šä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚â€œæ•°æ®åº“ç›‘æ§â€ã€â€œåº”ç”¨ç›‘æ§â€ï¼‰åˆ›å»ºä¸€ä¸ªèåˆè§†å›¾ã€‚è¿™ä¸ªè§†å›¾ä¼šè‡ªåŠ¨èšåˆä¸è¯¥åœºæ™¯ç›¸å…³çš„æ‰€æœ‰å®ä½“ä¸é¡µé¢ï¼Œæä¾›ä¸“ä¸šè§†è§’ã€‚</p>
<p>ä¿¡æ¯è¡¥å…¨ä¸ä¸°å¯Œï¼šé€šè¿‡è·¨æ•°æ®æºå…³è”ï¼Œè‡ªåŠ¨è¡¥å…¨å®ä½“ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡ IP åœ°å€å…³è”åˆ°ä¸»æœºå®ä½“ï¼Œå†é€šè¿‡ä¸»æœºå®ä½“å…³è”åˆ°å…¶ä¸Šè¿è¡Œçš„æœåŠ¡ï¼Œæœ€ç»ˆå…³è”åˆ°æœåŠ¡çš„è´Ÿè´£äººã€‚è¿™æœ‰æ•ˆè§£å†³äº†â€œä¿¡æ¯ç¼ºå¤±å’Œè„â€çš„é—®é¢˜ï¼Œè®©æ¯ä¸ªå®ä½“éƒ½æ‹¥æœ‰æ›´ä¸°æ»¡çš„ä¸Šä¸‹æ–‡ã€‚</p>
<h4 data-id="heading-9">1.3.3 å¯è§†åŒ–æ¢ç´¢ï¼šå®ä½“æ‹“æ‰‘ä¸å…³è”åˆ†æç»„ä»¶</h4>
<p>å°†å®ä½“é—´é”™ç»¼å¤æ‚çš„å…³ç³»é€šè¿‡ç½‘ç»œæ‹“æ‰‘å›¾çš„å½¢å¼ç›´è§‚åœ°å‘ˆç°å‡ºæ¥ã€‚ç”¨æˆ·å¯ä»¥åƒæ¢ç´¢åœ°å›¾ä¸€æ ·ï¼Œä»¥ä»»æ„å®ä½“ä¸ºä¸­å¿ƒï¼Œäº¤äº’å¼åœ°å‘ç°å…¶ä¸Šä¸‹æ¸¸ä¾èµ–ã€å½±å“èŒƒå›´å’Œæ½œåœ¨å…³è”ï¼Œå°†â€œçœ‹ä¸è§â€çš„å…³ç³»å˜ä¸ºâ€œçœ‹å¾—è§â€çš„æ´å¯Ÿã€‚</p>
<ul>
<li>åŠ¨æ€å…³ç³»å‘ç°ï¼šè¯¥ç»„ä»¶ä¸ä¾èµ–äºç¡¬ç¼–ç çš„é…ç½®ï¼Œè€Œæ˜¯é€šè¿‡åå°æœåŠ¡å®æ—¶è®¡ç®—å’Œå‘ç°å®ä½“é—´çš„å…³è”å…³ç³»ï¼ˆä¾‹å¦‚ï¼ŒæœåŠ¡è°ƒç”¨ã€ä¸»æœºéƒ¨ç½²ã€ç½‘ç»œè®¿é—®ç­‰ï¼‰ã€‚</li>
<li>äº¤äº’å¼æ¢ç´¢ï¼šç”¨æˆ·å¯ä»¥åœ¨æ‹“æ‰‘å›¾ä¸Šè‡ªç”±ç¼©æ”¾ã€æ‹–æ‹½ã€ä¸‹é’»ã€‚ç‚¹å‡»ä»»ä¸€å®ä½“èŠ‚ç‚¹ï¼Œå³å¯æŸ¥çœ‹å…¶è¯¦ç»†ä¿¡æ¯ã€æ€§èƒ½æŒ‡æ ‡ã€å‘Šè­¦å’Œæ—¥å¿—ï¼Œå¹¶å¯ä¸€é”®å±•å¼€å…¶é‚»è¿‘èŠ‚ç‚¹ï¼Œå®ç°â€œä¸€ç«™å¼â€çš„å…³è”åˆ†æã€‚</li>
<li>å½±å“åŸŸå’Œæ ¹å› åˆ†æï¼šå½“æŸä¸ªå®ä½“å‡ºç°æ•…éšœæ—¶ï¼Œæ‹“æ‰‘å›¾èƒ½æ¸…æ™°åœ°å±•ç¤ºå…¶ä¸Šæ¸¸ä¾èµ–ï¼ˆå¸®åŠ©å®šä½æ ¹å› ï¼‰å’Œä¸‹æ¸¸å½±å“ï¼ˆå¸®åŠ©è¯„ä¼°æ•…éšœèŒƒå›´ï¼‰ï¼Œä¸ºå¿«é€Ÿå†³ç­–æä¾›å…³é”®ä¾æ®ã€‚</li>
</ul>
<h4 data-id="heading-10">1.3.4 å»ºæ¨¡é©±åŠ¨ UIï¼šåŸºäºå®ä½“æ¨¡å‹çš„è‡ªåŠ¨åŒ–æ¸²æŸ“å¼•æ“</h4>
<p>é¢ è¦†ä¼ ç»Ÿçš„ UI å¼€å‘æ¨¡å¼ï¼Œå®ç° UI çš„è‡ªåŠ¨åŒ–ç”Ÿæˆã€‚æˆ‘ä»¬ä¸ä¸ºæ¯ä¸€ç§å®ä½“ç±»å‹å®šåˆ¶å¼€å‘ UIï¼Œè€Œæ˜¯é€šè¿‡å®šä¹‰ä¸€å¥—ä¸°å¯Œçš„å®ä½“æ¨¡å‹ï¼ˆSchemaï¼‰ï¼Œç”±ä¸€ä¸ªç»Ÿä¸€çš„æ¸²æŸ“å¼•æ“æ ¹æ®æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„å±•ç¤ºç•Œé¢ã€‚</p>
<ul>
<li>å®šä¹‰å³ UIï¼ˆSchema as UIï¼‰ï¼šåœ¨ UModel ä¸­ä¸ºæ¯ç§å®ä½“ç±»å‹å®šä¹‰å…¶å…ƒæ•°æ®æ¨¡å‹ã€‚è¯¥æ¨¡å‹ä¸ä»…åŒ…å«å­—æ®µåå’Œç±»å‹ï¼Œè¿˜åŒ…å«ä¸°å¯Œçš„ UI æŒ‡ä»¤ï¼Œå¦‚â€œæ­¤å­—æ®µåº”å±•ç¤ºä¸ºå›¾è¡¨â€ã€â€œæ­¤å­—æ®µæ˜¯ä¸€ä¸ªé“¾æ¥ï¼ŒæŒ‡å‘å¦ä¸€å®ä½“â€ã€â€œæ­¤å­—æ®µæŒ‰æ—¶é—´æ ¼å¼åŒ–â€ç­‰ã€‚</li>
<li>ç»Ÿä¸€æ¸²æŸ“å¼•æ“ï¼šå¼€å‘ä¸€ä¸ªé€šç”¨çš„å‰ç«¯ç»„ä»¶ï¼Œå®ƒèƒ½æ¥æ”¶ä»»ä½•å®ä½“çš„æ•°æ®å’Œå…¶å¯¹åº”çš„æ¨¡å‹ã€‚è¯¥ç»„ä»¶ä¼šè§£ææ¨¡å‹ä¸­çš„ UI æŒ‡ä»¤ï¼Œå¹¶åŠ¨æ€åœ°æ¸²æŸ“å‡ºç›¸åº”çš„ UI å…ƒç´ ï¼ˆè¯¦æƒ…é¡µã€åˆ—è¡¨ã€è¡¨å•ç­‰ï¼‰ã€‚</li>
<li>ä½ä»£ç ä¸å¯æ‰©å±•ï¼šæ–°å¢ä¸€ç§å®ä½“ç±»å‹ï¼Œå‰ç«¯å¼€å‘å·¥ä½œé‡å‡ ä¹ä¸ºé›¶ï¼Œåªéœ€åœ¨ UModel ä¸­å®šä¹‰å¥½å…¶æ¨¡å‹å³å¯ã€‚åŒæ—¶ï¼Œæ¸²æŸ“å¼•æ“æ”¯æŒæ’ä»¶åŒ–æ‰©å±•ï¼Œå¯ä»¥ä¸æ–­ä¸°å¯Œå…¶æ”¯æŒçš„ UI ç»„ä»¶ç±»å‹ã€‚</li>
</ul>
<h2 data-id="heading-11">å®ä½“æ¢ç´¢æ ¸å¿ƒåŠŸèƒ½ï¼šåŸºäº USearch çš„å…¨å±€æ£€ç´¢ç»„ä»¶</h2>
<h3 data-id="heading-12">2.1 å®ä½“æ€»è§ˆ</h3>
<p>å®ä½“æ¢ç´¢å°† UModel ä¸­å®šä¹‰çš„æ‰€æœ‰å®ä½“æŒ‰ç…§åŸŸï¼ˆDomainï¼‰å’Œç±»å‹ï¼ˆEntity Typeï¼‰ï¼Œå·²ç»æ¥å…¥çš„å®ä½“éƒ½ä¼šåˆ†ç±»åœ¨æ‰€å±çš„åˆ†ç±»ä¸­ã€‚</p>
<ol>
<li>æ”¯æŒæŸ¥çœ‹æ‰€æœ‰å®ä½“çš„æ€»é‡ã€‚</li>
<li>æ”¯æŒæŸ¥çœ‹æ¯ä¸ªå®ä½“çš„å®ä¾‹æ•°é‡ã€‚</li>
<li>å¦‚æœæ˜¯äº‘äº§å“å®ä½“ï¼Œæ”¯æŒæŸ¥çœ‹è¯¥äº‘äº§å“ä¸‹æ‰€æœ‰å®ä½“æ˜¯å¦å…¨é‡æ¥å…¥ã€‚</li>
<li>å•å‡»å®ä½“åé€‰ä¸­è¯¥å®ä½“çš„åŸŸï¼ˆDomainï¼‰å’Œç±»å‹ï¼ˆEntity Typeï¼‰ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/837e1b0272a44977bb7b5671c6b852aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=J7sOHdlIJPQpLtMvUhgD1Y6yRxk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-13">2.2 å®ä½“æŸ¥è¯¢ä¸å±•ç¤º</h3>
<p>æŸ¥è¯¢è¯­è¨€ä»‹ç»å®ä½“æŸ¥è¯¢æ”¯æŒä¸¤ç§æŸ¥è¯¢è¯­è¨€ï¼šUSearch å’Œ SPLï¼Œåœ¨å®ä½“æŸ¥è¯¢é¡µé¢å·¦ä¸Šè§’å¯ä»¥åˆ‡æ¢è¯­è¨€ã€‚ è¯·å‚è€ƒÂ USearch å®ä½“æŸ¥è¯¢è¯­è¨€ <strong>[</strong> <strong>1]</strong> å’ŒÂ SPL æ•°æ®å¤„ç†è¯­è¨€ <strong>[</strong> <strong>2]</strong> ã€‚</p>
<p>åœ¨ USearch æ¨¡å¼ä¸‹ï¼Œå®ä½“æŸ¥è¯¢å·¦ä¸Šè§’å¯ä»¥é€‰æ‹©åŸŸï¼ˆDomainï¼‰å’Œç±»å‹ï¼ˆEntity Typeï¼‰ï¼ŒSPL æ¨¡å¼ä¸æ”¯æŒã€‚</p>
<p>USearch æŸ¥è¯¢ç»“æœä¼šæ ¹æ®å®ä½“çš„ç±»å‹ï¼ˆEntity Typeï¼‰è¿›è¡Œå±•ç¤ºï¼ŒåŒ…æ‹¬å®ä½“çš„ Primary Key å’Œ Name å­—æ®µï¼Œä»¥åŠå®ä½“çš„é»„é‡‘æŒ‡æ ‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c7512ee46c542849e26b543dd004853~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=TS1xPjwMW55Km8d38JZ0cY8EXoI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>SPL æŸ¥è¯¢ç»“æœä¸ä¼šæŒ‰ç…§å®ä½“çš„ç±»å‹ï¼ˆEntity Typeï¼‰è¿›è¡Œå±•ç¤ºï¼Œè€Œæ˜¯å±•ç¤ºå…·ä½“å­—æ®µã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ff5f02e4ef240d89660fc3550b0511d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=6psp3w%2FGbRoPq9buPBpFGjj%2BH28%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-14">2.3 æ‹“æ‰‘æ¦‚è§ˆè§†å›¾</h3>
<p>æ¦‚è§ˆæ‹“æ‰‘å°†æŠ½è±¡çš„ç³»ç»Ÿæ¶æ„è½¬åŒ–ä¸ºå¯è§†åŒ–çš„æ•°å­—æ¨¡å‹ï¼Œå±•ç¤ºäº‘ç¯å¢ƒä¸‹å·²æ¥å…¥çš„æ‰€æœ‰å®ä½“ç±»åˆ«ã€æ¥å…¥æ•°é‡ä»¥åŠå„ç±»å®ä½“çš„ä¾èµ–å…³ç³»ï¼Œé€šè¿‡å…¨å±€æ¶æ„è§†å›¾æ”¯æŒæœåŠ¡æ²»ç†ä¸ä¾èµ–ç®¡ç†ï¼Œä¸ºè¿ç»´å’Œå¼€å‘å›¢é˜Ÿæä¾›äº†ç›´è§‚ç†è§£ç³»ç»Ÿæ¶æ„çš„æœ‰æ•ˆæ‰‹æ®µã€‚</p>
<h4 data-id="heading-15">2.3.1 æ‹“æ‰‘æ¦‚è§ˆä¸»é¡µ</h4>
<p>åœ¨â€˜æ‰€æœ‰å®ä½“â€™çš„å³ä¸Šè§’ç‚¹å‡»â€˜æ‹“æ‰‘â€™ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰ Workspace æ¥å…¥çš„å„ç±»å®ä½“çš„æ€»é‡ä»¥åŠä¹‹é—´çš„å…³ç³»ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87c010c3f3614f8c9449454d3f141a9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=zgRQIhJV0AARo%2FCNiekqiG0CICM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-16">2.3.2 é“¾è·¯èšç„¦äº¤äº’</h4>
<p>èŠ‚ç‚¹æ”¯æŒâ€˜èšç„¦â€™æ“ä½œï¼Œç‚¹å‡»èšç„¦åï¼Œæ‹“æ‰‘å›¾ä»…ä¿ç•™ä»¥å½“å‰èŠ‚ç‚¹ä¸ºä¸­å¿ƒçš„æ‰€æœ‰ç¥–å…ˆå’Œåä»£èŠ‚ç‚¹ï¼Œæ›´æ¸…æ™°åœ°å±•ç¤ºä¾èµ–å…³ç³»å’Œä¼ æ’­é“¾è·¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f376f7d66804117ac33d3ecf48ea851~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=wrc2S3%2BU%2FlVYYD1Zd6hWgOtaLHI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨èšç„¦çŠ¶æ€ä¸‹ï¼Œå¯é€šè¿‡å·¥å…·æ çš„â€˜å–æ¶ˆèšç„¦â€™å›åˆ°åŸå§‹æ‹“æ‰‘å›¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4de5c165b4bd41cfb7404990b1abe602~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=ThZmQmkf6VOVDA70xbQOg5EwPCU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-17">2.3.3 å®ä½“åˆ—è¡¨å±•ç¤º</h4>
<p>å•å‡»å®ä½“ï¼Œå³ä¾§å¼¹å‡ºå½“å‰å®ä½“ç±»å‹ä¸‹æ‰€æœ‰å·²æ¥å…¥çš„å®ä½“åˆ—è¡¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d6b75a8336342dbb7777fad0a7176fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=LqgZak%2Bg5LIqZsLl2Os3dssNfuU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-18">2.3.4 æ‹“æ‰‘æœç´¢</h4>
<p>æ”¯æŒä¸ USearch æŸ¥è¯¢è”åŠ¨ï¼Œå±•ç¤ºæ‰€æœ‰åŒ¹é…åˆ°å­—ç¬¦ä¸²çš„å®ä½“çš„æ‹“æ‰‘å…³è”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b260489bfb048abb2a0159eb41349f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=uN5ZIwqS5hYpsxbGD%2FdmU5ockBo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ USearch æŸ¥è¯¢æ¨¡å¼ä¸‹ï¼Œç‚¹å‡»èŠ‚ç‚¹ä¼šå±•ç¤ºå½“å‰æŸ¥è¯¢åˆ°çš„æ‰€æœ‰ç»“æœçš„åˆ—è¡¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39b86fa5eecb4de2bf4e6ca1c7c98a55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=LqOl8B384HMGRvcS%2FG0DtQM9mfg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-19">å®ä½“æ¢ç´¢æ ¸å¿ƒåŠŸèƒ½ï¼šå®ä½“è¯¦æƒ…</h2>
<p>å®ä½“è¯¦æƒ…é¡µæ˜¯æˆ‘ä»¬æ•´ä¸ªå®ä½“æ¢ç´¢ä½“ç³»çš„â€œä»·å€¼äº¤ä»˜çª—å£â€ã€‚å®ƒå¹¶éä¸€ä¸ªé™æ€ã€ç”±å‰ç«¯å·¥ç¨‹å¸ˆé€è¡Œä»£ç å†™æ­»çš„ç•Œé¢ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œå…¨ç”±åç«¯ UModel åŠ¨æ€æ¸²æŸ“ã€è‡ªåŠ¨æ„å»ºçš„æ™ºèƒ½è§†å›¾ã€‚è¿™ç§æ¨¡å¼ä»æ ¹æœ¬ä¸Šè§£å†³äº†å‰é¢æåˆ°çš„ä¸‰å¤§æŒ‘æˆ˜ã€‚</p>
<h3 data-id="heading-20">3.1 å®ä½“æ¦‚è§ˆ</h3>
<p>å®ä½“æ¦‚è§ˆåŒ…å«ä¸€ç»„åŠ¨æ€æ¸²æŸ“çš„ Tabs é¡µé¢ + å…³è”æ‹“æ‰‘ã€UModel Explorer ç­‰è‹¥å¹²å›ºå®šçš„é¡µé¢æ„æˆã€‚å…¶ä¸­åŠ¨æ€çš„ Tabs é¡µé¢å®Œå…¨åŸºäº UModel æ¸²æŸ“ï¼šè‡ªåŠ¨æ¸²æŸ“é€»è¾‘åŒ…å«å¯è§†åŒ–é€‰æ‹©ï¼ˆæ ¹æ®å®ä½“ä¿¡æ¯åŒ¹é…ä»ªè¡¨ç›˜ã€é¡µé¢æ¨¡æ¿ï¼‰ã€æ•°æ®æºé€‰æ‹©ï¼ˆæ ¹æ®å®ä½“ä¿¡æ¯åŒ¹é…é€‰æ‹©çš„é¡µé¢ä½¿ç”¨ä»€ä¹ˆæ•°æ®æºè¿›è¡Œæ¸²æŸ“ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaf312be4f144310859aa1cc6f217e70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=ycGGVYav%2FJuBxGvuTKR8QkusN88%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…³è”å®ä½“ï¼šå®ä½“æ¦‚è§ˆé¦–é¡µç‚¹å‡»å…³è”å®ä½“å¯ä»¥å¿«æ·æŸ¥çœ‹è¯¥å®ä½“å’Œå…¶ä»–å®ä½“çš„å…³è”å…³ç³»è¡¨æ ¼ï¼Œè¡¨æ ¼æ ¹æ®å…³ç³»çš„åç§°åˆ†ç±»ï¼Œå…³ç³»æœ‰ï¼šåŒ…å«ã€ç­‰åŒã€ä¸Šæ¸¸ã€ä¸‹æ¸¸ç­‰ã€‚ç‚¹å‡»å…³è”å®ä½“ï¼Œå¯ä»¥è·³è½¬åˆ°å¯¹åº”å®ä½“çš„å®ä½“æ¦‚è§ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8364059bd98a4d8dadf851be9d23a15f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=fZyuZqN4sDy%2FQhz3gWzfKnha6qc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-21">3.2 å…³è”æ‹“æ‰‘</h3>
<h4 data-id="heading-22">3.2.1 æ™ºèƒ½åˆ†å±‚æ¶æ„è§†å›¾</h4>
<p>é‡‡ç”¨æ™ºèƒ½åˆ†å±‚å¸ƒå±€ï¼Œå°†å¤æ‚çš„äº‘ç¯å¢ƒæŒ‰ç…§åŸŸï¼ˆDomainï¼‰è¿›è¡Œå‚ç›´åˆ†å±‚ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c99bb05c430c494096e56dc9f888a5e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=uA2WXR19C%2F2c4YZ9oGj%2FSlz3epU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ†å±‚æ¶æ„ï¼š</p>
<ul>
<li>ğŸŒÂ RUM å±‚ï¼šç”¨æˆ·ä½“éªŒç›‘æ§åŸŸï¼Œå…³æ³¨å‰ç«¯æ€§èƒ½å’Œç”¨æˆ·è¡Œä¸º</li>
<li>ğŸ”§Â APM å±‚ï¼šåº”ç”¨ç›‘æ§åŸŸï¼Œç›‘æ§åº”ç”¨æœåŠ¡æ€§èƒ½</li>
<li>â˜¸ï¸Â K8S å±‚ï¼šå®¹å™¨ç¼–æ’åŸŸï¼Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨</li>
<li>â˜ï¸Â ACS å±‚ï¼šäº‘äº§å“åŸŸï¼Œé›†æˆå„ç±»äº‘æœåŠ¡</li>
<li>ğŸ–¥ï¸Â INFRA å±‚ï¼šåŸºç¡€è®¾æ–½åŸŸï¼Œç›‘æ§æœåŠ¡å™¨å’Œç½‘ç»œ</li>
</ul>
<h4 data-id="heading-23">3.2.2 å¤šå±‚çº§ä¾èµ–é€å±‚å±•å¼€</h4>
<p>é€šè¿‡"å±•å¼€ä¸‹ä¸€çº§"åŠŸèƒ½ï¼Œå¯ä»¥é€å±‚æ¢ç´¢æœåŠ¡ä¾èµ–å…³ç³»ï¼Œé€‚ç”¨äºå¤æ‚ç³»ç»Ÿçš„æ¸è¿›å¼åˆ†æï¼›é€šè¿‡å¤šå±‚çº§ä¾èµ–åˆ†æï¼Œå…¨é¢è¯„ä¼°ç³»ç»Ÿä¾èµ–æƒ…å†µï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5432351fba124f9093942103d8d2b852~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=PXso5q8Og5I2LChFG%2FjTCb2QR68%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ğŸ”Â é€å±‚åˆ†æï¼šä»æ ¸å¿ƒæœåŠ¡å¼€å§‹ï¼Œé€æ­¥å±•å¼€ç›¸å…³ä¾èµ–</li>
<li>ğŸ“ŠÂ æ€§èƒ½è¯Šæ–­ï¼šç»“åˆæŒ‡æ ‡æ•°æ®ï¼Œè¯†åˆ«æ€§èƒ½ç“¶é¢ˆç‚¹</li>
<li>ğŸ› ï¸Â æ¶æ„æ¢³ç†ï¼šç†æ¸…å¤æ‚ç³»ç»Ÿçš„çœŸå®ä¾èµ–å…³ç³»</li>
</ul>
<h4 data-id="heading-24">3.2.3 èšç„¦è¿½è¸ªæ¨¡å¼</h4>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li>ğŸ¯Â æ™ºèƒ½èšç„¦ï¼šä»¥ç›®æ ‡èŠ‚ç‚¹ä¸ºä¸­å¿ƒï¼Œå±•ç¤ºç›´æ¥å…³è”çš„ä¸Šä¸‹æ¸¸</li>
<li>ğŸ”„Â åŠ¨æ€è¿½è¸ªï¼šæ¯æ¬¡å±•å¼€æ“ä½œä¼šè‡ªåŠ¨åˆ‡æ¢èšç„¦ä¸­å¿ƒ</li>
<li>ğŸ’¡Â ä¸Šä¸‹æ–‡ä¿æŒï¼šå–æ¶ˆèšç„¦æ—¶è‡ªåŠ¨ä¿å­˜å·²å±•å¼€çš„èŠ‚ç‚¹çŠ¶æ€</li>
</ul>
<h4 data-id="heading-25">3.2.4 å¤§è§„æ¨¡æœåŠ¡ä¾èµ–åˆ†æ</h4>
<p>é¢å¯¹åŒ…å«æ•°ç™¾ä¸ªå¾®æœåŠ¡çš„å¤æ‚ç³»ç»Ÿï¼Œé€šè¿‡æ™ºèƒ½åˆ†ç»„å’Œæ¸è¿›å¼åˆ†æï¼Œå®ç°ä¾èµ–å…³ç³»çš„æœ‰åºåˆ†æï¼š</p>
<p>æ™ºèƒ½å±•å¼€ç­–ç•¥ï¼šå½“å±•å¼€æ“ä½œäº§ç”Ÿå¤§é‡èŠ‚ç‚¹æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œåˆ†ç»„ç®¡ç†ï¼Œç¡®ä¿ç•Œé¢æ¸…æ™°å¯è¯»ã€‚è¶…è¿‡ 20 ä¸ªèŠ‚ç‚¹çš„ç»„ä¼šè¢«æ™ºèƒ½æ”¶çº³ï¼Œé€šè¿‡æ‹†åˆ†é¢æ¿è¿›è¡Œç²¾ç¡®ç®¡ç†ã€‚</p>
<h2 data-id="heading-26">USearch &amp; SPL å®ä½“æŸ¥è¯¢è¯­è¨€</h2>
<h3 data-id="heading-27">4.1 USearch</h3>
<p>USearch æ˜¯ä¸“é—¨ç”¨äºå®ä½“æŸ¥è¯¢çš„ SPL è¯­æ³•ï¼Œæ”¯æŒå¤šç§æŸ¥è¯¢æ¨¡å¼ï¼ŒåŒ…æ‹¬å…¨æ–‡æ£€ç´¢ã€ç²¾ç¡®æŸ¥æ‰¾ã€æ¡ä»¶è¿‡æ»¤ç­‰ã€‚USearch æ·±åº¦é›†æˆåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fcms%3Fspm%3Da1z389.11499242.0.0.65452413vvcY0e%26utm_content%3Dg_1000408141" target="_blank" title="https://www.aliyun.com/product/cms?spm=a1z389.11499242.0.0.65452413vvcY0e&amp;utm_content=g_1000408141" ref="nofollow noopener noreferrer">äº‘ç›‘æ§ 2.0</a> ä¸­ï¼Œæä¾›å…¨å±€å¿«é€ŸæŸ¥è¯¢ã€å­—æ®µå¿«æ·ä¸‹é’»ã€æŒ‡æ ‡ä¸‹é’»ç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-28">4.1.1 USearch åŸºç¡€è¯­æ³•</h4>
<pre><code class="hljs language-ini" lang="ini">.entityÂ with(
Â  Â  <span class="hljs-attr">domain</span>=<span class="hljs-string">'domain_pattern'</span>, Â  Â Â -- åŸŸè¿‡æ»¤
Â  Â  <span class="hljs-attr">type</span>=<span class="hljs-string">'type_pattern'</span>, Â  Â  Â  Â Â -- ç±»å‹è¿‡æ»¤
Â  Â  <span class="hljs-attr">query</span>=<span class="hljs-string">'search_query'</span>, Â  Â  Â  Â -- æŸ¥è¯¢æ¡ä»¶
Â  Â  <span class="hljs-attr">topk</span>=<span class="hljs-number">10</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â -- æœ€å¤§è¿”å›æ¡æ•°
)
</code></pre>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong></p>
<ul>
<li>å…¨æ–‡æœç´¢ï¼šæ”¯æŒè·¨æ‰€æœ‰å­—æ®µçš„å…³é”®è¯æœç´¢ã€‚</li>
<li>å­—æ®µé™å®šæŸ¥è¯¢ï¼šæ”¯æŒåœ¨ç‰¹å®šå­—æ®µä¸­è¿›è¡Œç²¾ç¡®æœç´¢ã€‚</li>
<li>é€»è¾‘æ¡ä»¶ç»„åˆï¼šæ”¯æŒ ANDã€ORã€NOT ç­‰é€»è¾‘è¿ç®—ç¬¦ã€‚</li>
<li>æ™ºèƒ½æ‰“åˆ†æ’åºï¼šåŸºäº IDF æƒé‡å’Œåˆ—æƒé‡çš„ç›¸å…³æ€§æ‰“åˆ†ã€‚</li>
<li>ç‰¹æ®Šå­—ç¬¦å¤„ç†ï¼šè‡ªåŠ¨å¤„ç†æŸ¥è¯¢ä¸­çš„ç‰¹æ®Šå­—ç¬¦ã€‚</li>
</ul>
<h4 data-id="heading-29">4.1.2 å…¸å‹åº”ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-ini" lang="ini">-- å…¨æ–‡æœç´¢
.entityÂ with(<span class="hljs-attr">query</span>=<span class="hljs-string">'web service'</span>)
-- å­—æ®µé™å®šæœç´¢
.entityÂ with(<span class="hljs-attr">query</span>=<span class="hljs-string">'status:running'</span>)
-- é€»è¾‘ç»„åˆæŸ¥è¯¢
.entityÂ with(<span class="hljs-attr">query</span>=<span class="hljs-string">'environment:prod AND status:error'</span>)
-- åŸŸå’Œç±»å‹è¿‡æ»¤
.entityÂ with(<span class="hljs-attr">domain</span>=<span class="hljs-string">'apm'</span>, type=<span class="hljs-string">'apm.service'</span>, query=<span class="hljs-string">'production'</span>)
</code></pre>
<h3 data-id="heading-30">4.2 SPL æ•°æ®å¤„ç†è¯­è¨€</h3>
<p>SPLï¼ˆSLS Processing Languageï¼‰æ˜¯æ—¥å¿—æœåŠ¡æä¾›çš„æ•°æ®å¤„ç†è¯­è¨€ï¼Œç”¨äºå¯¹è¯»å–å‡ºçš„åŸå§‹æ•°æ®è¿›è¡Œç»“æ„åŒ–ä¿¡æ¯æå–ã€å­—æ®µæ“ä½œå’Œæ•°æ®è¿‡æ»¤ç­‰æ“ä½œã€‚SPL æ”¯æŒå¤šçº§ç®¡é“çº§è”åŠŸèƒ½ï¼Œå¯ä»¥è¿›è¡Œå¤æ‚çš„æ•°æ®å¤„ç†å’Œåˆ†æã€‚</p>
<h4 data-id="heading-31">4.2.1 å·¥ä½œåŸç†</h4>
<p>SPL é‡‡ç”¨ç®¡é“å¼å¤„ç†æ¶æ„ï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€çº§ç®¡é“ï¼š</strong> ç´¢å¼•è¿‡æ»¤æ¡ä»¶ï¼ˆå¦‚ USearch æŸ¥è¯¢ï¼‰</li>
<li><strong>åç»­ç®¡é“ï¼š</strong> SPL æŒ‡ä»¤è¿›è¡Œæ•°æ®å¤„ç†</li>
<li><strong>æœ€ç»ˆè¾“å‡ºï¼š</strong> ç»è¿‡ SPL å¤„ç†åçš„ç»“æœæ•°æ®</li>
</ol>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<p>æ•°æ®è¿‡æ»¤å’Œç­›é€‰</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ¡ä»¶è¿‡æ»¤</span>
<span class="hljs-operator">|</span>Â <span class="hljs-keyword">where</span>Â statusÂ <span class="hljs-operator">=</span>Â "error"
<span class="hljs-operator">|</span>Â <span class="hljs-keyword">where</span>Â cpu_usageÂ <span class="hljs-operator">&gt;</span>Â <span class="hljs-number">0.8</span>
<span class="hljs-comment">-- æ—¶é—´èŒƒå›´è¿‡æ»¤</span>
<span class="hljs-operator">|</span>Â <span class="hljs-keyword">where</span>Â __time__Â <span class="hljs-operator">&gt;</span>Â "2024-01-01 00:00:00"
</code></pre>
<p>å­—æ®µæ“ä½œ</p>
<pre><code class="hljs language-ini" lang="ini">-- å­—æ®µæå–
| extend <span class="hljs-attr">new_field</span> = field1 + field2
-- å­—æ®µé‡å‘½å
| project-rename <span class="hljs-attr">new_name</span> = old_name
-- å­—æ®µé€‰æ‹©
| project field1, field2, field3
</code></pre>
<h4 data-id="heading-32">4.2.2 USearch ä¸ SPL ç»“åˆä½¿ç”¨</h4>
<p>USearch å¯ä»¥ä½œä¸º SPL çš„æ•°æ®æºï¼Œå®ç°ä»å®ä½“æŸ¥è¯¢åˆ°æ•°æ®åˆ†æçš„å®Œæ•´æµç¨‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- åŸºç¡€ç»„åˆï¼šå®ä½“æŸ¥è¯¢ + æ•°æ®å¤„ç†
.entityÂ with(<span class="hljs-attr">domain</span>=<span class="hljs-string">'apm'</span>, type=<span class="hljs-string">'apm.service'</span>, query=<span class="hljs-string">'production'</span>)
|Â whereÂ <span class="hljs-attr">language</span>Â =Â <span class="hljs-string">'java'</span>
</code></pre>
<h3 data-id="heading-33">4.3 åœ¨æ§åˆ¶å°ä¸­ä½¿ç”¨ USearch</h3>
<h4 data-id="heading-34">4.3.1 å…¨å±€å¿«é€ŸæŸ¥è¯¢</h4>
<p>åŠŸèƒ½å…¥å£ï¼šç™»å½•å¯è§‚æµ‹å¹³å°æ§åˆ¶å°ï¼Œè¿›å…¥ä»»æ„å·¥ä½œç©ºé—´ï¼ˆWorkSpaceï¼‰ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ é€‰æ‹©å¿«é€ŸæŸ¥è¯¢ã€‚</p>
<ol>
<li>æ”¯æŒåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å…³æŸ¥è¯¢è¯­å¥ï¼ˆUSearch SPL è¯­æ³•ä¸­çš„ query éƒ¨åˆ†ï¼‰ï¼Œç‚¹å‡»æŸ¥è¯¢æŒ‰é’®ï¼ŒæŸ¥è¯¢ç»“æœä¼šæ˜¾ç¤ºåœ¨ä¸‹æ–¹ç»“æœåŒºåŸŸã€‚</li>
<li>æ”¯æŒåœ¨å·¦ä¾§é€‰æ‹©åŸŸï¼ˆDomainï¼‰å’Œå®ä½“ç±»å‹ï¼ˆEntitySetï¼‰ï¼Œç‚¹å‡»æŸ¥è¯¢æŒ‰é’®ï¼ŒæŸ¥è¯¢ç»“æœä¼šæ˜¾ç¤ºåœ¨ä¸‹æ–¹ç»“æœåŒºåŸŸã€‚</li>
<li>æ”¯æŒåœ¨å·¦ä¾§åˆ—è¡¨ä¸Šé€‰æ‹©æŸ¥è¯¢å®ä½“ç»“æœï¼Œå³è¾¹å±•ç¤ºè¯¥å®ä½“çš„è¯¦ç»†ä¿¡æ¯ä»¥åŠç¯å¢ƒæŒ‡æ ‡ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4df4e3cb2e64bd3b34055b8a0e495b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=6grtzddE%2BUrLay%2BDEqGjsC5Fb%2BE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-35">4.3.2 å®ä½“æŸ¥è¯¢</h4>
<p>åŠŸèƒ½å…¥å£ï¼šç™»å½•å¯è§‚æµ‹å¹³å°æ§åˆ¶å°ï¼Œè¿›å…¥ä»»æ„å·¥ä½œç©ºé—´ï¼ˆWorkSpaceï¼‰ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ é€‰æ‹©å®ä½“æŸ¥è¯¢ã€‚</p>
<ol>
<li>æ”¯æŒåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å…³æŸ¥è¯¢è¯­å¥ï¼ˆUSearch SPL è¯­æ³•ä¸­çš„ query éƒ¨åˆ†ï¼‰ï¼Œç‚¹å‡»æŸ¥è¯¢æŒ‰é’®ï¼ŒæŸ¥è¯¢ç»“æœä¼šæ˜¾ç¤ºåœ¨ä¸‹æ–¹ç»“æœåŒºåŸŸï¼Œå’Œå¿«é€ŸæŸ¥è¯¢çš„æŸ¥è¯¢ç»“æœä¸€è‡´ã€‚</li>
<li>æ”¯æŒåˆ‡æ¢åˆ° SPL æŸ¥è¯¢æ¨¡å¼ï¼Œè¾“å…¥ SPL æŸ¥è¯¢è¯­å¥ï¼ˆå®Œæ•´ USearch SPL è¯­æ³•ï¼‰ï¼Œç‚¹å‡»æŸ¥è¯¢æŒ‰é’®ï¼ŒæŸ¥è¯¢ç»“æœä¼šæ˜¾ç¤ºåœ¨ä¸‹æ–¹ç»“æœåŒºåŸŸã€‚</li>
</ol>
<h4 data-id="heading-36">4.3.3 å­—æ®µå¿«æ·ä¸‹é’»</h4>
<p>åŠŸèƒ½å…¥å£ï¼šç™»å½•å¯è§‚æµ‹å¹³å°æ§åˆ¶å°ï¼Œè¿›å…¥ä»»æ„çš„å®ä½“æŸ¥è¯¢é¡µé¢ã€ä»ªè¡¨ç›˜ç­‰é¡µé¢ï¼Œé¼ æ ‡æ‚¬æµ®åœ¨å­—æ®µä¸Šï¼Œä¼šæ˜¾ç¤º USearch æŒ‰é’®ã€‚ç‚¹å‡» USearch æŒ‰é’®ï¼Œä¼šå¼¹å‡º USearch æŸ¥è¯¢æ¡†ï¼Œè‡ªåŠ¨å¡«å……å­—æ®µå†…å®¹å¹¶æœç´¢ï¼Œç»“æœå’Œå¿«é€ŸæŸ¥è¯¢çš„æŸ¥è¯¢ç»“æœä¸€è‡´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df5ba1041a42424eb2536b3d3262e84c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765420925&amp;x-signature=iNF0wEQkkCc3hz7b0S0ap%2FZTRkc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-37">æ€»ç»“</h2>
<blockquote>
<p>Entity Explorer æ ¸å¿ƒæ„¿æ™¯ï¼šä»æ•°æ®æ··æ²Œåˆ°ä¸šåŠ¡æ´å¯Ÿï¼Œæˆ‘ä»¬ç”¨ç¡®å®šæ€§çš„æ¨¡å‹ï¼Œé©¾é©­ä¸ç¡®å®šæ€§çš„æ•°æ®ä¸–ç•Œã€‚</p>
</blockquote>
<p>åœ¨æ„å»º Entity Explorer ä¹‹åˆï¼Œæˆ‘ä»¬ç›´é¢äº†æ•°æ®æ¢ç´¢é¢†åŸŸçš„ä¸‰åº§å¤§å±±ï¼š</p>
<ul>
<li>æµ·é‡æ•°æ®çš„æ€§èƒ½ç“¶é¢ˆï¼šå¤§é‡å®ä½“å¸¦æ¥çš„æŒ‡æ•°çº§è®¡ç®—å¤æ‚åº¦å’Œå·¨å¤§çš„èµ„æºæˆæœ¬ã€‚</li>
<li>å¼‚æ„æ•°æ®çš„è¯­ä¹‰é¸¿æ²Ÿï¼šå¤šæºã€å¼‚æ„ã€ä½è´¨é‡çš„æ•°æ®å¯¼è‡´å®ä½“éš¾ä»¥è¢«å‡†ç¡®è¯†åˆ«å’Œå…³è”ã€‚</li>
<li>é«˜è€¦åˆæ¶æ„çš„ç»´æŠ¤å™©æ¢¦ï¼šç¡¬ç¼–ç çš„å‰ç«¯å‘ˆç°é€»è¾‘å¯¼è‡´å¼€å‘æ•ˆç‡ä½ä¸‹ã€ç³»ç»Ÿè„†å¼±ä¸”éš¾ä»¥æ‰©å±•ã€‚</li>
</ul>
<p>ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº† UModelï¼ˆç»Ÿä¸€å®ä½“æ¨¡å‹ï¼‰é©±åŠ¨æ¶æ„ï¼ŒUModel æ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œä¸­å¤®å¤§è„‘â€å’Œâ€œè®¾è®¡è“å›¾â€ã€‚å®ƒæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„æ¨¡å‹ï¼Œä¸ä»…å®šä¹‰äº†å®ä½“æ˜¯ä»€ä¹ˆï¼ˆå±æ€§ã€æ ‡ç­¾ã€å…ƒæ•°æ®ï¼‰ï¼Œè¿˜å®šä¹‰äº†å®ä½“é—´çš„å…³ç³»ï¼ˆå…³è”ç±»å‹ã€æ·±åº¦ï¼‰ï¼Œç”šè‡³è§„å®šäº†å®ä½“åº”è¯¥å¦‚ä½•è¢«å‘ˆç°ï¼ˆUI å¸ƒå±€ã€ç»„ä»¶ã€äº¤äº’é€»è¾‘ï¼‰ã€‚</p>
<p>Entity Explorer é€šè¿‡ UModel è¿™ä¸€æ ¸å¿ƒæŠ½è±¡ï¼Œä¸ºæˆ‘ä»¬å¸¦æ¥äº†ï¼š</p>
<p>æè‡´çš„æ•ˆç‡ï¼šå°†æ•°å‘¨çš„å‰ç«¯å¼€å‘æ—¶é—´ç¼©çŸ­ä¸ºæ•°å°æ—¶çš„æ¨¡å‹é…ç½®ã€‚</p>
<p>é«˜åº¦çš„ç²¾å‡†ï¼šæä¾›äº†ä¸€ä¸ªå¯ä¿¡ã€ç»Ÿä¸€ã€360Â° çš„å®ä½“å…¨æ™¯è§†å›¾ã€‚</p>
<p>æ·±åº¦çš„æ´å¯Ÿï¼šèµ‹äºˆå„ç±»äººå‘˜è½»æ¾åˆ†æå¤æ‚æ•°æ®å…³ç³»ã€å‘ç°æ½œåœ¨ä»·å€¼çš„èƒ½åŠ›ã€‚</p>
<p><strong>ç›¸å…³é“¾æ¥ï¼š</strong></p>
<p>[1]Â USearch å®ä½“æŸ¥è¯¢è¯­è¨€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fcms%2Fcloudmonitor-2-0%2Fuser-guide%2Fentity-explorer-overview%3Fspm%3Da2c4g.11186623.help-menu-28572.d_2_1_0_0.376c3f5b0thNfp%26scm%3D20140722.H_2974636._.OR_help-T_cn~zh-V_1%233250fbab95y2y" target="_blank" title="https://help.aliyun.com/zh/cms/cloudmonitor-2-0/user-guide/entity-explorer-overview?spm=a2c4g.11186623.help-menu-28572.d_2_1_0_0.376c3f5b0thNfp&amp;scm=20140722.H_2974636._.OR_help-T_cn~zh-V_1#3250fbab95y2y" ref="nofollow noopener noreferrer">help.aliyun.com/zh/cms/clouâ€¦</a></p>
<p>[2]Â SPL æ•°æ®å¤„ç†è¯­è¨€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fcms%2Fcloudmonitor-2-0%2Fuser-guide%2Fentity-explorer-overview%3Fspm%3Da2c4g.11186623.help-menu-28572.d_2_1_0_0.376c3f5b0thNfp%26scm%3D20140722.H_2974636._.OR_help-T_cn~zh-V_1%236e82481ab0637" target="_blank" title="https://help.aliyun.com/zh/cms/cloudmonitor-2-0/user-guide/entity-explorer-overview?spm=a2c4g.11186623.help-menu-28572.d_2_1_0_0.376c3f5b0thNfp&amp;scm=20140722.H_2974636._.OR_help-T_cn~zh-V_1#6e82481ab0637" ref="nofollow noopener noreferrer">help.aliyun.com/zh/cms/clouâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[FiddleræŠ“åŒ…ä¸æ¥å£è°ƒè¯•å®æˆ˜ï¼ŒHTTPHTTPSé…ç½®ã€ä»£ç†è®¾ç½®ä¸ç§»åŠ¨ç«¯æŠ“åŒ…è¯¦è§£]]></title>    <link>https://juejin.cn/post/7579485652528136227</link>    <guid>https://juejin.cn/post/7579485652528136227</guid>    <pubDate>2025-12-04T02:46:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579485652528136227" data-draft-id="7579485652528119843" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="FiddleræŠ“åŒ…ä¸æ¥å£è°ƒè¯•å®æˆ˜ï¼ŒHTTPHTTPSé…ç½®ã€ä»£ç†è®¾ç½®ä¸ç§»åŠ¨ç«¯æŠ“åŒ…è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T02:46:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒå°±å¥½2025"/> <meta itemprop="url" content="https://juejin.cn/user/3850962908492660"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            FiddleræŠ“åŒ…ä¸æ¥å£è°ƒè¯•å®æˆ˜ï¼ŒHTTPHTTPSé…ç½®ã€ä»£ç†è®¾ç½®ä¸ç§»åŠ¨ç«¯æŠ“åŒ…è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3850962908492660/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒå°±å¥½2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:46:42.000Z" title="Thu Dec 04 2025 02:46:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰åç«¯åˆ†ç¦»å’ŒAPIé©±åŠ¨å¼€å‘çš„æ—¶ä»£ï¼Œç½‘ç»œè¯·æ±‚çš„è°ƒè¯•èƒ½åŠ›ç›´æ¥å†³å®šäº†å¼€å‘æ•ˆç‡ã€‚
æ¥å£ä¸è¿”å›ï¼Ÿæ•°æ®ä¸å¯¹ï¼Ÿå‰ç«¯è°ƒè¯•åŠå¤©å‘ç°åç«¯æ²¡æ”¶åˆ°è¯·æ±‚ï¼Ÿâ€”â€”è¿™äº›é—®é¢˜ï¼Œå¾€å¾€éƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªæŠ“åŒ…å·¥å…·è½»æ¾è§£å†³ã€‚</p>
<p>è€Œåœ¨ä¼—å¤šæŠ“åŒ…å·¥å…·ä¸­ï¼Œ<strong>FiddleræŠ“åŒ…å·¥å…·</strong> ä»¥å…è´¹ã€å¼ºå¤§ã€å¯æ‰©å±•è‘—ç§°ï¼Œæˆä¸ºå¼€å‘è€…ä¸æµ‹è¯•å·¥ç¨‹å¸ˆçš„â€œç½‘ç»œè°ƒè¯•å¿…å¤‡ç¥å™¨â€ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ ç³»ç»Ÿäº†è§£ <strong>Fiddlerä½¿ç”¨æ•™ç¨‹ã€HTTPSæŠ“åŒ…é…ç½®ã€ä»£ç†è®¾ç½®æ–¹æ³•ã€æ¥å£è°ƒè¯•æŠ€å·§ä¸ç§»åŠ¨ç«¯æŠ“åŒ…å®è·µ</strong>ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŒæ¡æŠ“åŒ…ä¸ç½‘ç»œåˆ†æçš„æ ¸å¿ƒæŠ€èƒ½ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€ä¸ºä»€ä¹ˆå¼€å‘è€…éƒ½åœ¨ç”¨Fiddlerï¼Ÿ</strong></h2>
<p>åœ¨æ¥å£è”è°ƒã€ç½‘ç»œæ’æŸ¥ã€æ€§èƒ½ä¼˜åŒ–ä¸­ï¼Œ<strong>Fiddler</strong> çš„ä½œç”¨å¯æ€»ç»“ä¸ºä¸‰å¥è¯ï¼š</p>
<ul>
<li><strong>å®ƒèƒ½â€œæŠ“â€åˆ°æ‰€æœ‰HTTP/HTTPSè¯·æ±‚</strong></li>
<li><strong>å®ƒèƒ½â€œæ”¹â€æ‰è¯·æ±‚ä¸å“åº”çš„æ•°æ®</strong></li>
<li><strong>å®ƒèƒ½â€œæµ‹â€å‡ºç½‘ç»œä¸æ¥å£æ€§èƒ½ç“¶é¢ˆ</strong></li>
</ul>
<p>ä¸ Charlesã€Postmanã€Wireshark ç­‰å·¥å…·ç›¸æ¯”ï¼š</p>






























<table><thead><tr><th>å·¥å…·</th><th>ä¼˜åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Fiddler</strong></td><td>åŠŸèƒ½å…¨é¢ï¼Œæ”¯æŒè¯·æ±‚ä¿®æ”¹ä¸Mockæ•°æ®</td><td>æ¥å£è”è°ƒ / æ€§èƒ½è°ƒè¯•</td></tr><tr><td><strong>Charles</strong></td><td>ç•Œé¢ç®€æ´ï¼Œæ“ä½œç›´è§‚</td><td>å…¥é—¨æŠ“åŒ…</td></tr><tr><td><strong>Postman</strong></td><td>è¯·æ±‚æ„é€ çµæ´»ï¼ŒAPIæµ‹è¯•ä¼˜ç§€</td><td>æ¥å£éªŒè¯</td></tr><tr><td><strong>Wireshark</strong></td><td>åº•å±‚æ•°æ®åˆ†æå¼ºå¤§</td><td>ç½‘ç»œå®‰å…¨åˆ†æ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€Fiddlerå®‰è£…ä¸åˆå§‹é…ç½®</strong></h2>
<h3 data-id="heading-2"><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h3>
<p>Fiddler æ”¯æŒ Windows ä¸ macOSï¼ˆFiddler Everywhere ç‰ˆæœ¬ï¼‰ã€‚
å®‰è£…å®Œæˆåï¼Œå¯åŠ¨è½¯ä»¶ä¼šè‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿä»£ç†å¹¶å¼€å§‹æ•è·æµé‡ã€‚</p>
<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>çŠ¶æ€æ æ˜¾ç¤º â€œCapturingâ€ è¡¨ç¤ºæ­£åœ¨æŠ“åŒ…ï¼›</li>
<li>è‹¥ä¸º â€œPausedâ€ï¼Œç‚¹å‡»å³å¯æ¢å¤æŠ“åŒ…çŠ¶æ€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. Fiddlerä»£ç†è®¾ç½®ï¼ˆPC + ç§»åŠ¨ç«¯ï¼‰</strong></h3>
<p>Fiddler é»˜è®¤åªæ•è·æœ¬æœºè¯·æ±‚ã€‚
è‹¥ä½ éœ€è¦è°ƒè¯•ç§»åŠ¨ç«¯ Appã€å°ç¨‹åºæˆ– WebView è¯·æ±‚ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®ä»£ç†ã€‚</p>
<p><strong>æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ Connections</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Allow remote computers to connect</strong>ï¼›</li>
<li>æŸ¥çœ‹ç”µè„‘ IP ä¸ç«¯å£ï¼ˆé»˜è®¤ 8888ï¼‰ï¼›</li>
<li>ä¿è¯æ‰‹æœºä¸ç”µè„‘è¿æ¥åŒä¸€ Wi-Fiï¼›</li>
<li>åœ¨æ‰‹æœº Wi-Fi è®¾ç½®ä¸­æ·»åŠ ä»£ç†ï¼š
<ul>
<li>ä¸»æœºåï¼šç”µè„‘ IP</li>
<li>ç«¯å£å·ï¼š8888ã€‚</li>
</ul>
</li>
</ol>
<p>æ­¤æ—¶ï¼ŒFiddler å³å¯æ•è·ç§»åŠ¨è®¾å¤‡è¯·æ±‚ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. HTTPS æŠ“åŒ…é…ç½®</strong></h3>
<p>è¦æŠ“ HTTPS è¯·æ±‚ï¼Œéœ€è¦å®‰è£…è¯ä¹¦è§£å¯†åŠ å¯†æµé‡ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤ï¼š</strong></p>
<ul>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ HTTPS</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Decrypt HTTPS traffic</strong>ï¼›</li>
<li>ç‚¹å‡» â€œActions â†’ Trust Root Certificateâ€ï¼›</li>
<li>å®‰è£…å¹¶ä¿¡ä»»è¯ä¹¦ï¼›</li>
<li>è‹¥æŠ“å–æ‰‹æœºè¯·æ±‚ï¼Œå¯¼å‡ºè¯ä¹¦å¹¶åœ¨ç§»åŠ¨ç«¯ä¿¡ä»»ã€‚</li>
</ul>
<p>é…ç½®å®Œæˆåï¼ŒFiddler å³å¯æŸ¥çœ‹ HTTPS è¯·æ±‚å¤´ä¸å“åº”å†…å®¹ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€Fiddleræ ¸å¿ƒåŠŸèƒ½è¯¦è§£</strong></h2>
<h3 data-id="heading-6"><strong>1. è¯·æ±‚ä¸å“åº”åˆ†æ</strong></h3>
<p>ä¸»ç•Œé¢ä¸­æ¯ä¸ªè¯·æ±‚åŒ…å«ä¸°å¯Œçš„ä¿¡æ¯ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹å¼ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰ï¼›</li>
<li>URL ä¸å‚æ•°ï¼›</li>
<li>Headerã€Cookie ä¸ Bodyï¼›</li>
<li>å“åº”çŠ¶æ€ç ä¸æ•°æ®å†…å®¹ï¼›</li>
<li>è¯·æ±‚è€—æ—¶ã€å¤§å°ä¸æ€§èƒ½æŒ‡æ ‡ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>2. æ¨¡æ‹Ÿæ¥å£å“åº”ï¼ˆAutoResponderï¼‰</strong></h3>
<p>Fiddler çš„ AutoResponder æ¨¡å—æ˜¯å‰ç«¯å¼€å‘çš„å¥½å¸®æ‰‹ã€‚</p>
<p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ AutoResponder é¢æ¿ï¼›</li>
<li>ç‚¹å‡» â€œAdd Ruleâ€ æ·»åŠ è§„åˆ™ï¼›</li>
<li>åŒ¹é…æ¥å£åœ°å€ï¼›</li>
<li>æŒ‡å®šè¿”å› JSON æ–‡ä»¶æˆ–è‡ªå®šä¹‰å“åº”ï¼›</li>
<li>å‹¾é€‰ â€œEnable Rulesâ€ å¯ç”¨è§„åˆ™ã€‚</li>
</ol>
<p><strong>å®æˆ˜ï¼š</strong>
å‰ç«¯å¯æ¨¡æ‹Ÿæ¥å£è¿”å›ï¼š</p>
<pre><code class="hljs language-css" lang="css">{ "<span class="hljs-selector-tag">code</span>":<span class="hljs-number">200</span>, <span class="hljs-string">"data"</span>:{"user":<span class="hljs-string">"test"</span>} }
</code></pre>
<p>æ— éœ€ç­‰å¾…åç«¯æ¥å£å³å¯å®Œæˆå¼€å‘ä¸è”è°ƒã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. è¯·æ±‚æ–­ç‚¹ä¸ä¿®æ”¹ï¼ˆBreakpointsï¼‰</strong></h3>
<p>Fiddler æ”¯æŒåœ¨è¯·æ±‚å‘å‡ºå‰æˆ–å“åº”è¿”å›å‰è®¾ç½®æ–­ç‚¹ï¼Œ
ä¾¿äºå¼€å‘è€…åŠ¨æ€ä¿®æ”¹è¯·æ±‚æˆ–å“åº”ã€‚</p>
<p><strong>å‘½ä»¤æŠ€å·§ï¼š</strong></p>
<ul>
<li><code>bpu /api/login</code> â†’ è®¾ç½®ç™»å½•æ¥å£è¯·æ±‚æ–­ç‚¹ï¼›</li>
<li><code>bpafter /api/user</code> â†’ å“åº”æ–­ç‚¹ï¼›</li>
<li><code>bpu</code> â†’ å…³é—­æ–­ç‚¹ã€‚</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹Ÿæ¥å£é”™è¯¯ï¼ˆ404ã€500ï¼‰ï¼›</li>
<li>ä¿®æ”¹å‚æ•°æµ‹è¯•å…¼å®¹æ€§ï¼›</li>
<li>éªŒè¯æ¥å£å¼‚å¸¸å¤„ç†é€»è¾‘ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>4. æ„é€ ä¸é‡æ”¾è¯·æ±‚ï¼ˆComposerï¼‰</strong></h3>
<p>Composer æ¨¡å—å¯æ‰‹åŠ¨æ„é€ ã€ç¼–è¾‘ä¸é‡æ”¾è¯·æ±‚ã€‚</p>
<p><strong>å¸¸è§ç”¨é€”ï¼š</strong></p>
<ul>
<li>éªŒè¯æ¥å£ç­¾åï¼›</li>
<li>æµ‹è¯• Token æœ‰æ•ˆæœŸï¼›</li>
<li>è°ƒè¯•å‚æ•°ä¸Headeré…ç½®ã€‚</li>
</ul>
<p><strong>æŠ€å·§ï¼š</strong>
å³é”®è¯·æ±‚ â†’ â€œReplay â†’ Reissue Requestâ€ï¼Œ
å³å¯å¿«é€Ÿé‡æ”¾ï¼Œæ–¹ä¾¿å¯¹æ¯”åˆ†æã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>5. æ€§èƒ½åˆ†æï¼ˆTimelineï¼‰</strong></h3>
<p>Timeline æ¨¡å—ç›´è§‚å±•ç¤ºè¯·æ±‚çš„å…¨è¿‡ç¨‹ï¼š
DNS æŸ¥è¯¢ â†’ TCP è¿æ¥ â†’ TLS æ¡æ‰‹ â†’ æœåŠ¡å™¨å“åº” â†’ å†…å®¹ä¸‹è½½ã€‚</p>
<p><strong>å®æˆ˜ï¼š</strong>
é€šè¿‡ Timeline åˆ†æå¯å‘ç°ç“¶é¢ˆåœ¨äºï¼š</p>
<ul>
<li>DNS å»¶è¿Ÿé«˜ï¼›</li>
<li>åç«¯å“åº”æ…¢ï¼›</li>
<li>å‰ç«¯è¯·æ±‚é‡å¤ã€‚</li>
</ul>
<p>é’ˆå¯¹ä¸åŒé—®é¢˜é‡‡å–ç›¸åº”ä¼˜åŒ–æªæ–½ï¼Œæ€§èƒ½æå‡ç«‹ç«¿è§å½±ã€‚</p>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ¥å£è¶…æ—¶é—®é¢˜å®šä½</strong></h2>
<p>æŸç§»åŠ¨ç«¯æ¥å£é¢‘ç¹è¶…æ—¶ã€‚
é€šè¿‡ Fiddler æŠ“åŒ…å‘ç°ï¼š</p>
<ul>
<li>è¯·æ±‚å‘é€æ­£å¸¸ï¼Œä½†å“åº”é˜¶æ®µè€—æ—¶å¼‚å¸¸ï¼›</li>
<li>åç«¯æ—¥å¿—æ˜¾ç¤º Nginx è¶…æ—¶æœªè¿”å›ï¼›</li>
<li>Timeline æ˜¾ç¤º TLS æ¡æ‰‹å¤šæ¬¡é‡è¯•ã€‚</li>
</ul>
<p>æœ€ç»ˆç¡®è®¤æ˜¯ HTTPS è¯ä¹¦é“¾é…ç½®é”™è¯¯å¯¼è‡´ã€‚ ä¿®å¤åå“åº”è€—æ—¶ä» 4.2 ç§’é™è‡³ 1.3 ç§’ã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€FiddleråŠŸèƒ½æ¨¡å—å¯¹ç…§è¡¨</strong></h2>



































<table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½è¯´æ˜</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Filters</strong></td><td>æŒ‰æ¡ä»¶ç­›é€‰è¯·æ±‚</td><td>èšç„¦ç›®æ ‡æ¥å£è°ƒè¯•</td></tr><tr><td><strong>AutoResponder</strong></td><td>æ¨¡æ‹Ÿæ¥å£å“åº”</td><td>å‰åç«¯åˆ†ç¦»å¼€å‘</td></tr><tr><td><strong>Breakpoints</strong></td><td>æ‹¦æˆªå¹¶ä¿®æ”¹è¯·æ±‚</td><td>æ¨¡æ‹Ÿé”™è¯¯ä¸å®¹é”™æµ‹è¯•</td></tr><tr><td><strong>Composer</strong></td><td>æ„é€ ä¸é‡æ”¾è¯·æ±‚</td><td>API éªŒè¯ä¸æµ‹è¯•</td></tr><tr><td><strong>Timeline</strong></td><td>è¯·æ±‚æ€§èƒ½åˆ†æ</td><td>ä¼˜åŒ–ç½‘ç»œåŠ è½½</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€å­¦ä¹ ä¸èµ„æºæ¨è</strong></h2>
<p>æƒ³æ›´æ·±å…¥å­¦ä¹  Fiddlerï¼Ÿæ¨èè®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fiddler.hk%2F" target="_blank" title="https://www.fiddler.hk/" ref="nofollow noopener noreferrer">Fiddler ä¸­æ–‡ç½‘</a></p>
<p>ç½‘ç«™æä¾›ï¼š</p>
<ul>
<li>Fiddler å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼›</li>
<li>HTTPS æŠ“åŒ…ä¸è¯ä¹¦å®‰è£…æŒ‡å—ï¼›</li>
<li>ç§»åŠ¨ç«¯ä»£ç†é…ç½®ä¸è°ƒè¯•æŠ€å·§ï¼›</li>
<li>Mock æ•°æ®ä¸æ¥å£è”è°ƒå®æˆ˜ï¼›</li>
<li>å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–æ–¹æ¡ˆã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ–‡ä»¶ä¸Šä¼ å®æˆ˜ï¼šåŸºäºExpressã€åˆ†ç‰‡ã€Web Workerä¸å‹ç¼©çš„å®Œæ•´æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7579499567869935666</link>    <guid>https://juejin.cn/post/7579499567869935666</guid>    <pubDate>2025-12-04T02:48:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579499567869935666" data-draft-id="7579512734297194534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ–‡ä»¶ä¸Šä¼ å®æˆ˜ï¼šåŸºäºExpressã€åˆ†ç‰‡ã€Web Workerä¸å‹ç¼©çš„å®Œæ•´æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2025-12-04T02:48:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å‰ç«¯å†é™©è®°"/> <meta itemprop="url" content="https://juejin.cn/user/395479916219517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ–‡ä»¶ä¸Šä¼ å®æˆ˜ï¼šåŸºäºExpressã€åˆ†ç‰‡ã€Web Workerä¸å‹ç¼©çš„å®Œæ•´æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479916219517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å‰ç«¯å†é™©è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:48:54.000Z" title="Thu Dec 04 2025 02:48:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æˆ‘æ˜¯å¤§é±¼ï¼Œé™ªä½ ä¸€èµ·åœ¨å‰ç«¯æŠ€æœ¯æ·±æµ·å‰è¡Œã€‚</p>
</blockquote>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¤§æ–‡ä»¶ä¸Šä¼ çš„å…¨é“¾è·¯ä¼˜åŒ–æ–¹æ¡ˆï¼Œç»“åˆå‰ç«¯åˆ†ç‰‡ã€Web Workerå¤šçº¿ç¨‹å¤„ç†ã€æ–‡ä»¶å‹ç¼©ä»¥åŠExpressåç«¯å®ç°ï¼Œè§£å†³ä¼ ç»Ÿå¤§æ–‡ä»¶ä¸Šä¼ ä¸­çš„ç½‘ç»œæ³¢åŠ¨ã€æœåŠ¡å™¨å‹åŠ›ä¸ç”¨æˆ·ä½“éªŒå·®ç­‰æ ¸å¿ƒç—›ç‚¹ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆè®¾è®¡</h3>
<p>å¤§æ–‡ä»¶ä¸Šä¼ çš„ä¼˜åŒ–ä¸»è¦å›´ç»•<strong>åˆ†ç‰‡ä¸Šä¼ </strong>ã€<strong>æ–­ç‚¹ç»­ä¼ </strong>å’Œ<strong>ç§’ä¼ </strong>ä¸‰å¤§æœºåˆ¶å±•å¼€ã€‚æœ¬æ–¹æ¡ˆåœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¼•å…¥Web Workerè¿›è¡Œå‰ç«¯å¹¶è¡Œè®¡ç®—ä¸æ–‡ä»¶å‹ç¼©ï¼Œæ•´ä½“æ¶æ„å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å‰ç«¯</strong>ï¼šé‡‡ç”¨åˆ†ç‰‡ï¼ˆ5MB/ç‰‡ï¼‰å‹ç¼©åï¼Œé€šè¿‡Web Workerè®¡ç®—å“ˆå¸Œï¼Œå®ç°å¹¶å‘ä¸Šä¼ ä¸è¿›åº¦åé¦ˆã€‚</li>
<li><strong>åç«¯</strong>ï¼šä½¿ç”¨Express.js + Multerå¤„ç†åˆ†ç‰‡ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ ä¸æ–‡ä»¶åˆå¹¶ã€‚</li>
<li><strong>ä¼ è¾“ä¼˜åŒ–</strong>ï¼šé€šè¿‡å‹ç¼©ç®—æ³•ï¼ˆå¦‚gzipï¼‰å‡å°‘ä¼ è¾“ä½“ç§¯ï¼Œæå‡ç½‘ç»œåˆ©ç”¨ç‡ã€‚</li>
</ul>
<h4 data-id="heading-1">æ–¹æ¡ˆä¼˜åŠ¿å¯¹æ¯”</h4>

























<table><thead><tr><th align="left">ä¼ ç»Ÿæ–¹æ¡ˆ</th><th align="left">æœ¬ä¼˜åŒ–æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td align="left">å•çº¿ç¨‹ä¸Šä¼ ï¼Œæ˜“é˜»å¡ä¸»çº¿ç¨‹</td><td align="left">Web Workerå¤šçº¿ç¨‹å¤„ç†ï¼Œä¸é˜»å¡UI</td></tr><tr><td align="left">ç½‘ç»œä¸­æ–­éœ€é‡ä¼ æ•´ä¸ªæ–‡ä»¶</td><td align="left">åˆ†ç‰‡ä¸Šä¼  + æ–­ç‚¹ç»­ä¼ ï¼Œä»…é‡ä¼ å¤±è´¥åˆ†ç‰‡</td></tr><tr><td align="left">æ— å‹ç¼©ï¼Œä¼ è¾“æ•ˆç‡ä½</td><td align="left">å‰ç«¯å‹ç¼© + åˆ†ç‰‡ï¼Œå‡å°‘å¸¦å®½å ç”¨</td></tr><tr><td align="left">æœåŠ¡å™¨ç›´æ¥å¤„ç†å¤§æ–‡ä»¶æµ</td><td align="left">åˆ†ç‰‡å‡è½»æœåŠ¡å™¨å•æ¬¡å‹åŠ›</td></tr></tbody></table>
<h3 data-id="heading-2">äºŒã€å‰ç«¯å®ç°ï¼šåˆ†ç‰‡ã€å‹ç¼©ä¸Workerå¤šçº¿ç¨‹</h3>
<p>å‰ç«¯æµç¨‹åŒ…æ‹¬<strong>æ–‡ä»¶åˆ†ç‰‡</strong>ã€<strong>å‹ç¼©å¤„ç†</strong>ã€<strong>å“ˆå¸Œè®¡ç®—</strong>å’Œ<strong>å¹¶å‘ä¸Šä¼ </strong>ï¼Œå…³é”®æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-3">1. æ–‡ä»¶åˆ†ç‰‡ä¸å‹ç¼©</h4>
<p>ä½¿ç”¨<code>File.slice()</code>è¿›è¡Œåˆ†ç‰‡ï¼Œå¹¶å¯¹æ¯ä¸ªåˆ†ç‰‡åº”ç”¨å‹ç¼©ï¼ˆç¤ºä¾‹ä½¿ç”¨gzipï¼‰ã€‚åˆ†ç‰‡å¤§å°å»ºè®®5MBï¼Œå¹³è¡¡ç½‘ç»œå¼€é”€ä¸å¹¶å‘æ•ˆç‡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–‡ä»¶åˆ†ç‰‡ä¸å‹ç¼©å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chunkAndCompressFile</span>(<span class="hljs-params">file, chunkSize = <span class="hljs-number">5</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span></span>) {
  <span class="hljs-keyword">const</span> chunks = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; file.<span class="hljs-property">size</span>; i += chunkSize) {
    <span class="hljs-keyword">const</span> chunk = file.<span class="hljs-title function_">slice</span>(i, i + chunkSize);
    <span class="hljs-comment">// ä½¿ç”¨Compression Streams APIè¿›è¡Œå‹ç¼©ï¼ˆç°ä»£æµè§ˆå™¨æ”¯æŒï¼‰</span>
    <span class="hljs-keyword">const</span> compressedStream = chunk.<span class="hljs-title function_">stream</span>().<span class="hljs-title function_">pipeThrough</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CompressionStream</span>(<span class="hljs-string">'gzip'</span>));
    <span class="hljs-keyword">const</span> compressedChunk = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(compressedStream).<span class="hljs-title function_">blob</span>();
    chunks.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">index</span>: i / chunkSize,
      <span class="hljs-attr">file</span>: compressedChunk,
      <span class="hljs-attr">originalSize</span>: chunk.<span class="hljs-property">size</span>,
      <span class="hljs-attr">compressedSize</span>: compressedChunk.<span class="hljs-property">size</span>
    });
  }
  <span class="hljs-keyword">return</span> chunks;
}
</code></pre>
<h4 data-id="heading-4">2. Web Workerè®¡ç®—åˆ†ç‰‡å“ˆå¸Œ</h4>
<p>ä½¿ç”¨<code>file-chunk-worker</code>åº“åœ¨Workerä¸­å¹¶è¡Œè®¡ç®—åˆ†ç‰‡MD5ï¼Œé¿å…ä¸»çº¿ç¨‹é˜»å¡ï¼ŒåŒæ—¶æ”¯æŒè¿›åº¦åé¦ˆã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨Workerå¤„ç†æ–‡ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">FileProcessor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'file-chunk-worker'</span>;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processFileWithWorker</span>(<span class="hljs-params">file</span>) {
  <span class="hljs-keyword">const</span> processor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileProcessor</span>(file, {
    <span class="hljs-attr">chunkSize</span>: <span class="hljs-number">5</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>,
    <span class="hljs-attr">threadCount</span>: <span class="hljs-number">4</span>  <span class="hljs-comment">// å¯ç”¨4ä¸ªWorkerçº¿ç¨‹</span>
  });
  <span class="hljs-keyword">const</span> chunks = <span class="hljs-keyword">await</span> processor.<span class="hljs-title function_">calculateMd5</span>(<span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†è¿›åº¦: <span class="hljs-subst">${(progress * <span class="hljs-number">100</span>).toFixed(<span class="hljs-number">2</span>)}</span>%`</span>);
  });
  <span class="hljs-comment">// chunksåŒ…å«æ¯ä¸ªåˆ†ç‰‡çš„hashã€ç´¢å¼•å’ŒBlobæ•°æ®</span>
  <span class="hljs-keyword">return</span> chunks.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">chunk</span> =&gt;</span> ({
    ...chunk,
    <span class="hljs-attr">hash</span>: chunk.<span class="hljs-property">hash</span>  <span class="hljs-comment">// ç”¨äºç§’ä¼ æ ¡éªŒ</span>
  }));
}
</code></pre>
<h4 data-id="heading-5">3. å¹¶å‘ä¸Šä¼ ä¸æ–­ç‚¹ç»­ä¼ </h4>
<p>ä¸Šä¼ å‰å…ˆæŸ¥è¯¢æœåŠ¡å™¨å·²ä¸Šä¼ åˆ†ç‰‡ï¼Œå®ç°æ–­ç‚¹ç»­ä¼ ã€‚ä½¿ç”¨<code>@yuan-toolkit/chunk-uploader</code>æˆ–<code>bigfile-chunk-uploader</code>åº“ç®¡ç†å¹¶å‘ã€é‡è¯•å’Œè¿›åº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é…ç½®åŒ–çš„åˆ†ç‰‡ä¸Šä¼ ï¼ˆåŸºäºbigfile-chunk-uploaderï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BigFileUploader</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'bigfile-chunk-uploader'</span>;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadFile</span>(<span class="hljs-params">file</span>) {
  <span class="hljs-comment">// 1. åˆ†ç‰‡å¹¶è®¡ç®—å“ˆå¸Œ</span>
  <span class="hljs-keyword">const</span> processedChunks = <span class="hljs-keyword">await</span> <span class="hljs-title function_">processFileWithWorker</span>(file);
  <span class="hljs-comment">// 2. åˆå§‹åŒ–ä¸Šä¼ ï¼Œè·å–fileIdï¼ˆç”¨äºæ–­ç‚¹ç»­ä¼ ï¼‰</span>
  <span class="hljs-keyword">const</span> fileId = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload/init'</span>, {
    <span class="hljs-attr">fileName</span>: file.<span class="hljs-property">name</span>,
    <span class="hljs-attr">fileHash</span>: processedChunks.<span class="hljs-property">overallHash</span>  <span class="hljs-comment">// æ•´ä½“æ–‡ä»¶å“ˆå¸Œï¼Œç”¨äºç§’ä¼ </span>
  }).<span class="hljs-property">data</span>.<span class="hljs-property">uploadId</span>;
  
  <span class="hljs-comment">// 3. æ£€æŸ¥å·²ä¸Šä¼ åˆ†ç‰‡</span>
  <span class="hljs-keyword">const</span> { uploadedChunks } = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/upload/status?fileId=<span class="hljs-subst">${fileId}</span>`</span>);
  <span class="hljs-comment">// 4. å¹¶å‘ä¸Šä¼ æœªå®Œæˆåˆ†ç‰‡</span>
  <span class="hljs-keyword">const</span> uploader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigFileUploader</span>({
    file,
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://api.example.com'</span>,
    <span class="hljs-attr">endpoints</span>: { <span class="hljs-attr">chunk</span>: <span class="hljs-string">'/upload/chunk'</span>, <span class="hljs-attr">merge</span>: <span class="hljs-string">'/upload/merge'</span> },
    <span class="hljs-attr">chunkSize</span>: <span class="hljs-number">5</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>,
    <span class="hljs-attr">concurrent</span>: <span class="hljs-number">3</span>,  <span class="hljs-comment">// æ§åˆ¶å¹¶å‘æ•°</span>
    <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">3</span>,   <span class="hljs-comment">// å¤±è´¥è‡ªåŠ¨é‡è¯•</span>
    <span class="hljs-attr">onProgress</span>: <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä¸Šä¼ è¿›åº¦: <span class="hljs-subst">${progress}</span>%`</span>);  <span class="hljs-comment">// å®æ—¶åé¦ˆ</span>
    }
  });
  <span class="hljs-keyword">await</span> uploader.<span class="hljs-title function_">start</span>();
  <span class="hljs-comment">// 5. æ‰€æœ‰åˆ†ç‰‡å®Œæˆåï¼Œè¯·æ±‚åˆå¹¶</span>
  <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload/merge'</span>, { fileId });
}
</code></pre>
<h4 data-id="heading-6">å…³é”®ä¼˜åŒ–ç‚¹ï¼š</h4>
<ul>
<li><strong>å¹¶å‘æ§åˆ¶</strong>ï¼šæµè§ˆå™¨åŒåŸŸå¹¶å‘é™åˆ¶çº¦ä¸º6ï¼Œå¯é€šè¿‡å¤šå­åŸŸï¼ˆå¦‚<code>upload1.example.com</code>ï¼‰æå‡é€Ÿåº¦ã€‚</li>
<li><strong>è¿›åº¦åé¦ˆ</strong>ï¼šç»“åˆåˆ†ç‰‡è¿›åº¦ä¸å‹ç¼©è¿›åº¦ï¼Œæä¾›ç²¾ç¡®çš„ç™¾åˆ†æ¯”åé¦ˆã€‚</li>
<li><strong>é”™è¯¯é‡è¯•</strong>ï¼šç½‘ç»œå¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•ç‰¹å®šåˆ†ç‰‡ï¼Œå¢å¼ºé²æ£’æ€§ã€‚</li>
</ul>
<h3 data-id="heading-7">ä¸‰ã€åç«¯å®ç°ï¼šExpress.jsåˆ†ç‰‡æ¥æ”¶ä¸åˆå¹¶</h3>
<p>åç«¯ä½¿ç”¨Express + Multerå¤„ç†åˆ†ç‰‡ï¼Œå¹¶å®ç°æ–­ç‚¹ç»­ä¼ é€»è¾‘ã€‚</p>
<h4 data-id="heading-8">1. ç¯å¢ƒæ­å»ºä¸Multeré…ç½®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> multer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'multer'</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs-extra'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-comment">// é…ç½®Multerå­˜å‚¨åˆ†ç‰‡</span>
<span class="hljs-keyword">const</span> storage = multer.<span class="hljs-title function_">diskStorage</span>({
  <span class="hljs-attr">destination</span>: <span class="hljs-string">'uploads/temp/'</span>,  <span class="hljs-comment">// åˆ†ç‰‡ä¸´æ—¶ç›®å½•</span>
  <span class="hljs-attr">filename</span>: <span class="hljs-function">(<span class="hljs-params">req, file, cb</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> { fileId, chunkIndex } = req.<span class="hljs-property">body</span>;
    <span class="hljs-title function_">cb</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">`<span class="hljs-subst">${fileId}</span>-<span class="hljs-subst">${chunkIndex}</span>.chunk`</span>);  <span class="hljs-comment">// æŒ‰fileIdå’Œç´¢å¼•å‘½å</span>
  }
});
<span class="hljs-keyword">const</span> upload = <span class="hljs-title function_">multer</span>({ storage });
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());
</code></pre>
<h4 data-id="heading-9">2. åˆ†ç‰‡ä¸Šä¼ æ¥å£</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åˆå§‹åŒ–ä¸Šä¼ ï¼ˆç”ŸæˆfileIdï¼Œæ”¯æŒç§’ä¼ ï¼‰</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload/init'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { fileName, fileHash } = req.<span class="hljs-property">body</span>;
  <span class="hljs-keyword">const</span> fileId = <span class="hljs-title function_">generateFileId</span>();  <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€ID</span>
  <span class="hljs-comment">// ç§’ä¼ æ£€æŸ¥ï¼šå¦‚æœæ–‡ä»¶å“ˆå¸Œå·²å­˜åœ¨ï¼Œç›´æ¥è¿”å›æˆåŠŸ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">checkFileExists</span>(fileHash)) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">uploaded</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">url</span>: <span class="hljs-title function_">getFileUrl</span>(fileHash) });
  }
  <span class="hljs-comment">// è®°å½•ä¸Šä¼ çŠ¶æ€ï¼ˆç”¨äºæ–­ç‚¹ç»­ä¼ ï¼‰</span>
  <span class="hljs-title function_">saveUploadStatus</span>(fileId, { fileName, fileHash, <span class="hljs-attr">uploadedChunks</span>: [] });
  res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">uploadId</span>: fileId });
});

<span class="hljs-comment">// 2. åˆ†ç‰‡ä¸Šä¼ æ¥å£</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload/chunk'</span>, upload.<span class="hljs-title function_">single</span>(<span class="hljs-string">'chunk'</span>), <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { fileId, chunkIndex, chunkHash } = req.<span class="hljs-property">body</span>;
  <span class="hljs-comment">// éªŒè¯åˆ†ç‰‡å“ˆå¸Œï¼ˆé˜²æ­¢æ•°æ®æŸåï¼‰</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">validateChunkHash</span>(req.<span class="hljs-property">file</span>, chunkHash)) {
    <span class="hljs-comment">// è®°å½•å·²ä¸Šä¼ åˆ†ç‰‡ç´¢å¼•</span>
    <span class="hljs-title function_">updateUploadStatus</span>(fileId, chunkIndex);
    res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
  } <span class="hljs-keyword">else</span> {
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'åˆ†ç‰‡æ ¡éªŒå¤±è´¥'</span> });
  }
});

<span class="hljs-comment">// 3. æŸ¥è¯¢ä¸Šä¼ è¿›åº¦ï¼ˆç”¨äºæ–­ç‚¹ç»­ä¼ ï¼‰</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/upload/status'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { fileId } = req.<span class="hljs-property">query</span>;
  <span class="hljs-keyword">const</span> status = <span class="hljs-title function_">getUploadStatus</span>(fileId);
  res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">uploadedChunks</span>: status?.<span class="hljs-property">uploadedChunks</span> || [] });
});
</code></pre>
<h4 data-id="heading-10">3. åˆ†ç‰‡åˆå¹¶æ¥å£</h4>
<p>æ‰€æœ‰åˆ†ç‰‡ä¸Šä¼ å®Œæˆåï¼ŒæŒ‰ç´¢å¼•é¡ºåºåˆå¹¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload/merge'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> { fileId } = req.<span class="hljs-property">body</span>;
  <span class="hljs-keyword">const</span> { fileName, fileHash } = <span class="hljs-title function_">getUploadStatus</span>(fileId);
  <span class="hljs-keyword">const</span> chunkDir = <span class="hljs-string">'uploads/temp/'</span>;
  <span class="hljs-keyword">const</span> chunks = fs.<span class="hljs-title function_">readdirSync</span>(chunkDir)
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">startsWith</span>(fileId))
    .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> <span class="hljs-built_in">parseInt</span>(a.<span class="hljs-title function_">split</span>(<span class="hljs-string">'-'</span>)[<span class="hljs-number">1</span>]) - <span class="hljs-built_in">parseInt</span>(b.<span class="hljs-title function_">split</span>(<span class="hljs-string">'-'</span>)[<span class="hljs-number">1</span>]));
  <span class="hljs-comment">// é¡ºåºåˆå¹¶åˆ†ç‰‡</span>
  <span class="hljs-keyword">const</span> finalPath = <span class="hljs-string">`uploads/final/<span class="hljs-subst">${fileId}</span>-<span class="hljs-subst">${fileName}</span>`</span>;
  <span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(finalPath);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> chunks) {
    <span class="hljs-keyword">const</span> chunkPath = path.<span class="hljs-title function_">join</span>(chunkDir, chunk);
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(chunkPath);
      readStream.<span class="hljs-title function_">pipe</span>(writeStream, { <span class="hljs-attr">end</span>: <span class="hljs-literal">false</span> });
      readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
        fs.<span class="hljs-title function_">unlinkSync</span>(chunkPath);  <span class="hljs-comment">// åˆ é™¤ä¸´æ—¶åˆ†ç‰‡</span>
        <span class="hljs-title function_">resolve</span>();
      });
    });
  }
  writeStream.<span class="hljs-title function_">end</span>();
  <span class="hljs-comment">// æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> <span class="hljs-title function_">calculateFileHash</span>(finalPath) === fileHash) {
    <span class="hljs-title function_">saveFileRecord</span>(fileHash, finalPath);  <span class="hljs-comment">// å­˜å‚¨è®°å½•ä¾›ç§’ä¼ ä½¿ç”¨</span>
    res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">`/files/<span class="hljs-subst">${fileId}</span>`</span>, <span class="hljs-attr">size</span>: fs.<span class="hljs-title function_">statSync</span>(finalPath).<span class="hljs-property">size</span> });
  } <span class="hljs-keyword">else</span> {
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'æ–‡ä»¶åˆå¹¶å¤±è´¥'</span> });
  }
});
</code></pre>
<h4 data-id="heading-11">å…³é”®ä¼˜åŒ–ç‚¹ï¼š</h4>
<ul>
<li><strong>æ–­ç‚¹ç»­ä¼ </strong>ï¼šé€šè¿‡<code>uploadedChunks</code>è®°å½•é¿å…é‡å¤ä¸Šä¼ ã€‚</li>
<li><strong>ç§’ä¼ </strong>ï¼šåŸºäºæ–‡ä»¶å“ˆå¸Œåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</li>
<li><strong>èµ„æºç®¡ç†</strong>ï¼šåˆå¹¶åæ¸…ç†ä¸´æ—¶åˆ†ç‰‡ï¼Œå®šæœŸæ¸…ç†è¿‡æœŸä¸Šä¼ è®°å½•ã€‚</li>
</ul>
<h3 data-id="heading-12">å››ã€é«˜çº§ä¼˜åŒ–ç­–ç•¥</h3>
<ol>
<li>
<p><strong>å‹ç¼©ç®—æ³•é€‰æ‹©</strong>ï¼š<br/>
å‰ç«¯å‹ç¼©å¯é€‰ç”¨<code>gzip</code>ï¼ˆæµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼‰æˆ–<code>brotli</code>ï¼ˆå‹ç¼©ç‡æ›´é«˜ï¼‰ã€‚å®æµ‹ä¸­ï¼Œå¯¹æ–‡æœ¬/JSONæ•°æ®å‹ç¼©ç‡å¯è¾¾60%-70%ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šå·²å‹ç¼©æ–‡ä»¶ï¼ˆå¦‚ZIPã€è§†é¢‘ï¼‰äºŒæ¬¡å‹ç¼©æ”¶ç›Šæœ‰é™ï¼Œå¯å‰ç«¯æ£€æµ‹æ–‡ä»¶ç±»å‹åŠ¨æ€å¯ç”¨å‹ç¼©ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>Web WorkeråŠ¨æ€è°ƒä¼˜</strong>ï¼š<br/>
Workeræ•°é‡å»ºè®®è®¾ä¸º<code>navigator.hardwareConcurrency - 1</code>ï¼ˆä¿ç•™ä¸€ä¸ªæ ¸å¿ƒç»™UIï¼‰ã€‚è¿‡å¤§æ–‡ä»¶ï¼ˆ&gt;1GBï¼‰å¯åˆ†é˜¶æ®µå¤„ç†ï¼Œé¿å…å†…å­˜æº¢å‡ºã€‚</p>
</li>
<li>
<p><strong>ä¼ è¾“å®‰å…¨ä¸å®Œæ•´æ€§</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨HTTPSåŠ å¯†ä¼ è¾“ã€‚</li>
<li>æ¯ä¸ªåˆ†ç‰‡æºå¸¦<code>Content-MD5</code>å¤´ï¼Œåç«¯æ ¡éªŒã€‚</li>
<li>æœ€ç»ˆæ–‡ä»¶å“ˆå¸Œï¼ˆå¦‚SHA-256ï¼‰æ¯”å¯¹ï¼Œé˜²æ­¢åˆå¹¶é”™è¯¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç”¨æˆ·ä½“éªŒå¢å¼º</strong>ï¼š</p>
<ul>
<li>å®æ—¶æ˜¾ç¤ºé€Ÿåº¦ã€å‰©ä½™æ—¶é—´ä¸å‹ç¼©ç‡ã€‚</li>
<li>æš‚åœ/æ¢å¤åŠŸèƒ½ï¼ˆåˆ©ç”¨<code>uploader.pause()</code>/<code>resume()</code>ï¼‰ã€‚</li>
<li>ç½‘ç»œä¸­æ–­åè‡ªåŠ¨æ£€æµ‹å¹¶ç»­ä¼ ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-13">äº”ã€å®Œæ•´å·¥ä½œæµç¨‹ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹ä¸ºä¸€ä¸ªè§†é¢‘æ–‡ä»¶ï¼ˆ2GBï¼‰çš„ä¸Šä¼ æµç¨‹ï¼š</p>
<ol>
<li><strong>å‰ç«¯å‡†å¤‡</strong>ï¼š<br/>
æ–‡ä»¶â†’åˆ†ç‰‡ï¼ˆ5MB/ç‰‡ï¼Œå…±çº¦400ç‰‡ï¼‰â†’Web Workerè®¡ç®—åˆ†ç‰‡å“ˆå¸Œï¼ˆ4çº¿ç¨‹å¹¶è¡Œï¼‰â†’gzipå‹ç¼©ï¼ˆä½“ç§¯å‡å°‘çº¦40%ï¼‰ã€‚</li>
<li><strong>ä¸Šä¼ è¿‡ç¨‹</strong>ï¼š
<ol>
<li>åˆå§‹åŒ–è·å–<code>fileId</code>ï¼›2) æŸ¥è¯¢å·²ä¸Šä¼ åˆ†ç‰‡ï¼ˆé¦–æ¬¡ä¸ºç©ºï¼‰ï¼›3) å¹¶å‘ä¸Šä¼ åˆ†ç‰‡ï¼ˆ3ä¸ªå¹¶å‘ï¼‰ï¼›4) å®æ—¶è¿›åº¦æ˜¾ç¤ºã€‚</li>
</ol>
</li>
<li><strong>åç«¯å¤„ç†</strong>ï¼š
<ol>
<li>æ¥æ”¶åˆ†ç‰‡å¹¶å­˜å‚¨ï¼›2) è®°å½•ä¸Šä¼ çŠ¶æ€ï¼›3) åˆå¹¶åˆ†ç‰‡å¹¶æ ¡éªŒï¼›4) è¿”å›æ–‡ä»¶URLã€‚</li>
</ol>
</li>
</ol>
<h3 data-id="heading-14">å…­ã€æ€»ç»“</h3>
<p>æœ¬æ–‡æ–¹æ¡ˆä½¿ç”¨<strong>åˆ†ç‰‡ä¸Šä¼ </strong>ã€<strong>Web Workerå¤šçº¿ç¨‹å¤„ç†</strong>ã€<strong>å‰ç«¯å‹ç¼©</strong>ä¸<strong>Expressåç«¯æ”¯æŒ</strong>ï¼Œç³»ç»Ÿæ€§åœ°è§£å†³äº†å¤§æ–‡ä»¶ä¸Šä¼ çš„ç¨³å®šæ€§ã€æ•ˆç‡ä¸ç”¨æˆ·ä½“éªŒé—®é¢˜ã€‚</p>
<p>å®é™…åº”ç”¨ä¸­ï¼Œå¯æ ¹æ®æ–‡ä»¶ç±»å‹è°ƒæ•´åˆ†ç‰‡å¤§å°ï¼ˆå¦‚å›¾ç‰‡ç”¨2MBï¼Œè§†é¢‘ç”¨5MBï¼‰ï¼Œå¹¶ç›‘æ§æœåŠ¡å™¨è´Ÿè½½ä»¥ä¼˜åŒ–å¹¶å‘å‚æ•°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day 20ï¼šå¼€æºä¸ªäººé¡¹ç›®æ—¶çš„ä¸€äº›æ³¨æ„äº‹é¡¹]]></title>    <link>https://juejin.cn/post/7579553111472291894</link>    <guid>https://juejin.cn/post/7579553111472291894</guid>    <pubDate>2025-12-04T02:47:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579553111472291894" data-draft-id="7579553111472242742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day 20ï¼šå¼€æºä¸ªäººé¡¹ç›®æ—¶çš„ä¸€äº›æ³¨æ„äº‹é¡¹"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-04T02:47:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”³é˜³"/> <meta itemprop="url" content="https://juejin.cn/user/4353721775165486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day 20ï¼šå¼€æºä¸ªäººé¡¹ç›®æ—¶çš„ä¸€äº›æ³¨æ„äº‹é¡¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721775165486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”³é˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:47:59.000Z" title="Thu Dec 04 2025 02:47:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8822786f79a4980aad2ae5684ab0636~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421278&amp;x-signature=O7gIBNfViIp79aNDYcZUJFRSQ70%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>é¦–å…ˆå£°æ˜è¿™åªæ˜¯æˆ‘çš„ä¸ªäººç»éªŒï¼Œæˆ‘ä¹Ÿæ²¡æœ‰ä¸Šåƒ <code>star</code> çš„çƒ­é—¨å¼€æºé¡¹ç›®ï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆå¼€æºå¤§ä½¬ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯ä¸ºäº†åˆ†äº«æˆ‘åœ¨æ‘¸ç´¢å¼€æºçš„æ—¶å€™æ€»ç»“çš„ä¸€äº›å°ç»éªŒã€‚å¦‚æœä½ æœ‰ä¸€äº›æ›´å¥½çš„å»ºè®®ï¼Œå¸Œæœ›å¤§å®¶ä¸€èµ·è®¨è®ºè®¨è®ºã€‚æˆ‘å°†ä»¥æˆ‘çš„è¿™ä¸ªé¡¹ç›®æ¥å±•å¼€ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCaoshenyang%2Fez-admin-springboot4" target="_blank" title="https://github.com/Caoshenyang/ez-admin-springboot4" ref="nofollow noopener noreferrer">github.com/Caoshenyangâ€¦</a></p>
<h2 data-id="heading-1">äºŒã€é¡¹ç›®å¯åŠ¨å‰ï¼šæƒ³æ¸…æ¥šå†å¼€å§‹</h2>
<blockquote>
<p>æˆ‘è¿™é‡Œè¯´çš„å¼€æºæ˜¯æŒ‡ï¼ŒæŠŠé¡¹ç›®å½“åšä¸€ä¸ªå®Œæ•´çš„äº§å“æ¥åšï¼Œè€Œä¸æ˜¯å°†ä»“åº“è®¾ç½®æˆ <code>public</code> ã€‚</p>
</blockquote>
<h3 data-id="heading-2">2.1. <strong>æ˜ç¡®é¡¹ç›®ç›®æ ‡ä¸ä»·å€¼</strong></h3>
<p>æˆ‘ä»¬åšå¼€æºé¦–å…ˆè¦æ˜ç¡®é¡¹ç›®çš„ç›®æ ‡ä¸ä»·å€¼ã€‚</p>
<p>åœ¨è¿™ä¸ªä¸“æ çš„å¼€ç¯‡æˆ‘å°±æåˆ°è¿‡ï¼Œè¦ä¹ˆæé«˜è‡ªèº«èƒ½åŠ›ï¼Œè¦ä¹ˆæé«˜ä¸ªäººå½±å“åŠ›ï¼Œè¦ä¹ˆå¸¦æ¥æ”¶å…¥ï¼Œå“ªæ€•æ˜¯æ”¶å…¥çš„å¯èƒ½æ€§ï¼Œä¸è¦â€œæ— ç§å¥‰çŒ®â€ï¼Œæˆ‘å¹¶ä¸æ˜¯è¯´â€œæ— ç§å¥‰çŒ®â€ä¸å¥½ï¼Œè€Œæ˜¯å¦‚æœä½ ä¸€ç›´â€œæ— ç§å¥‰çŒ®â€ï¼Œå½“çƒ­æƒ…è¢«æ¶ˆè€—å®Œä¹‹åï¼Œè¿™ä¸ªé¡¹ç›®å¤§æ¦‚ç‡èµ°ä¸é•¿è¿œã€‚</p>
<p>ä»¥æˆ‘è¿™ä¸ªé¡¹ç›®ä¸ºä¾‹ï¼š</p>
<p><strong>é¡¹ç›®çš„ä»·å€¼åœ¨å“ªé‡Œï¼Ÿ</strong></p>
<ol>
<li>ä½œä¸ºè¿™ä¸ªä¸“æ çš„è½åœ°æ¡ˆä¾‹ï¼Œæé«˜è¿™ä¸ªä¸“æ çš„çœŸå®æ€§</li>
<li>å°è¯•ä¸åŒçš„æ¶æ„ï¼Œæå‡è‡ªèº«æŠ€æœ¯èƒ½åŠ›</li>
<li>åšä¸€ä¸ªæœ€å°åŒ–æ¨¡ç‰ˆï¼Œæ–¹ä¾¿åç»­ä¸ªäººä¸šåŠ¡æ‹“å±•</li>
</ol>
<blockquote>
<p>å…¶å®æœ¬è´¨å°±æ˜¯å›´ç»•äº†ä»¥ä¸Šå‡ ç‚¹ï¼Œæé«˜ä¸ªäººå½±å“åŠ›ï¼Œä¸ºä»¥ååšä»˜è´¹æœåŠ¡åšé“ºå«ï¼ˆè¿™é‡Œæˆ‘ä¹Ÿä¸è£…é«˜å°šğŸ˜„ï¼‰ï¼Œæœ¬è´¨å°±æ˜¯å¦‚æ­¤ï¼Œå°Šé‡è‡ªå·±çš„ä»˜å‡ºã€‚</p>
</blockquote>
<h3 data-id="heading-3">2.2. é€‰æ‹©åˆé€‚çš„å¼€æºåè®®</h3>
<p>å¯¹äºå¼€æºåè®®è¿™ä¸ªæˆ‘ä¸ç»†è¯´ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ <code>gitee</code> çš„ä»‹ç»ï¼Œè¿™ä¸ªæ˜¯æ¯”è¾ƒæ¸…æ™°çš„ã€‚æ ¹æ®è‡ªå·±æƒ…å†µé€‰æ‹©å³å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02d7490c9ade4598a9432f0766f818c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421278&amp;x-signature=FjS2UeC%2BeK7PFHBvol%2BIgd39ROM%3D" alt="image-20251203173437007" loading="lazy"/></p>
<h3 data-id="heading-4">2.3. åšå¥½å¸‚åœºè°ƒç ”</h3>
<p>ç›¸æ¯”ç›®å‰å¸‚é¢ä¸Šçš„äº§å“ï¼Œä½ çš„ä¸œè¥¿æ˜¯å¦æœ‰äº®ç‚¹ï¼Œå¯¹äºç±»ä¼¼äº§å“ï¼Œä½ çš„é¡¹ç›®æ˜¯æ›¿ä»£ã€è¡¥å……è¿˜æ˜¯ä¸ä»–ä»¬é›†æˆã€‚</p>
<p>è¿˜æ˜¯ä»¥æˆ‘è¿™ä¸ªé¡¹ç›®ä¸ºä¾‹ï¼Œé¦–å…ˆä½œä¸ºä¸“æ çš„è½åœ°é¡¹ç›®ï¼Œæ¯«æ— ç–‘é—®ï¼Œå…·æœ‰ä¸å¯æ›¿ä»£æ€§ï¼Œä»è¿™æ–¹é¢å‡ºå‘æ²¡æœ‰ç«å“ã€‚å…¶æ¬¡ï¼Œç›¸æ¯”äºå¸‚é¢ä¸Šçš„ä¼ä¸šçº§çš„å¼€æºåå°ç®¡ç†ç³»ç»Ÿï¼Œæˆ‘è¿™ä¸ªæ›´å€¾å‘äºä¸ªäººï¼Œæ›´åŠ è½»é‡åŒ–ï¼Œç»“æ„æ›´ç®€å•ï¼Œä¸éœ€è¦ä¸ºäº†å…¼å®¹å„ç§æƒ…å†µåšå¾ˆå¤šå…¼å®¹æ€§å¼€å‘ï¼Œè¿™æ ·ä»£ç ç»“æ„ä¼šå¾ˆæ¸…æ™°ã€‚å¾ˆå®¹æ˜“å¿«é€Ÿä¸Šæ‰‹ï¼Œè€Œä¸”å®Œå…¨åœ¨ä¸ªäººå¯æ§èŒƒå›´å†…ï¼Œä¸€ä¸ªäººä¹Ÿå¯ä»¥ç»´æŠ¤çš„è¿‡æ¥ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€é¡¹ç›®åˆå§‹åŒ–ï¼šæ‰“å¥½åŸºç¡€</h2>
<h3 data-id="heading-6">3.1. <strong>åˆ›å»ºä¸€ä¸ªæ¸…æ™°ä¸“ä¸šçš„ README.md</strong></h3>
<p><code>README</code> æ˜¯ä½ çš„é¡¹ç›®é—¨é¢ï¼Œå¿…é¡»ç²¾å¿ƒè®¾è®¡ã€‚</p>
<p>å®ƒåº”è¯¥åŒ…å«ï¼š</p>
<ul>
<li><strong>é¡¹ç›®åç§°å’Œ Logo</strong></li>
<li><strong>ä¸€å¥è¯ç®€ä»‹</strong></li>
<li><strong>è¯¦ç»†çš„åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨</strong></li>
<li><strong>å®‰è£…å’Œä½¿ç”¨æŒ‡å—</strong>ï¼ˆå¿«é€Ÿå¼€å§‹ï¼‰</li>
<li><strong>æˆªå›¾ã€åŠ¨å›¾æˆ–æ¼”ç¤ºé“¾æ¥</strong>ï¼ˆè§†è§‰æ•ˆæœè‡³å…³é‡è¦ï¼‰</li>
<li><strong>æŒ‡å‘æ›´è¯¦ç»†æ–‡æ¡£çš„é“¾æ¥</strong></li>
</ul>
<blockquote>
<p>ä½ ä¸ç”¨åˆ»æ„å»åšè¿™äº›ï¼Œç­‰åˆ°ä¸Šè¿°ä¸€åˆ‡éƒ½å‡†å¤‡å¥½æ‰å¼€å§‹é¡¹ç›®ï¼Œåº”è¯¥æ˜¯å…ˆæœ‰é¡¹ç›®ï¼Œå†å»æ ¹æ®é¡¹ç›®ä¸æ–­å®Œå–„ä»–ã€‚</p>
</blockquote>
<h2 data-id="heading-7">å››ã€å¼€å‘ä¸ç»´æŠ¤ï¼šä¿æŒé¡¹ç›®å¥åº·</h2>
<blockquote>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼šå¦‚æœé¡¹ç›®ä¸»è¦ä½œä¸ºä¸ªäººä½œå“ã€æ•™ç¨‹æˆ–å®éªŒæ€§é¡¹ç›®å­˜åœ¨ï¼Œå…¶ç›®çš„ä¸æ˜¯æ„å»ºç¤¾åŒºï¼Œè€Œæ˜¯å±•ç¤ºæŸç§æŠ€æœ¯æˆ–æ€æƒ³ã€‚æˆ‘å»ºè®®æ˜¯é€‰æ‹©ä¸æ¥å— <code>PR</code> , ä»è¿™ç‚¹æ¥è¯´ï¼Œè¿™ä¸ªé¡¹ç›®å¹¶ä¸èƒ½è¯´æ˜¯ä¸€ä¸ªçœŸæ­£çš„â€œå¼€æºé¡¹ç›®â€ï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œå¼€æ”¾æºç çš„ä¸ªäººä½œå“â€ï¼Œåœ¨æ˜¾çœ¼çš„åœ°æ–¹åŠ ä¸Šå£°æ˜ï¼š<strong>â—ï¸æ³¨æ„ï¼šæœ¬ä»“åº“ä¸æ¥å— Pull Request</strong> ï¼Œè¯·æ”¹ä¸ºæäº¤ <code>Issue</code> æ¥æè¿°ä½ çš„å»ºè®®æˆ–é—®é¢˜ã€‚</p>
</blockquote>
<h2 data-id="heading-8">äº”ã€ä»£ç æäº¤æ—¶çš„ä¸€äº›ç»†èŠ‚</h2>
<h3 data-id="heading-9">5.1. æ³¨æ„æ•°æ®å®‰å…¨</h3>
<p>å½“æˆ‘ä»¬å‡†å¤‡å°†é¡¹ç›®æ‰˜ç®¡åˆ° <code>GitHub</code> ä¸Šçš„æ—¶å€™ï¼Œä¸€å®šä¸€å®šè¦æ³¨æ„ï¼Œç‰¹åˆ«æ˜¯æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ï¼Œæœ‰çš„æ—¶å€™æœ¬åœ°å¼€å‘å›¾æ–¹ä¾¿ï¼Œç›´æ¥å°±æŠŠä¸€äº›è´¦å·å¯†ç ï¼Œç­¾åå¯†é’¥ï¼Œç›´æ¥å†™åœ¨é…ç½®æ–‡ä»¶é‡Œäº†ï¼Œç¨æœ‰ç–å¿½å°±ä¼šæäº¤å‡ºå»ï¼Œç›´æ¥è£¸å¥”ã€‚</p>
<p>æ­£ç¡®åšæ³•åº”è¯¥æ˜¯è¿™æ ·çš„ï¼šé€šè¿‡è¯»å–é…ç½®çš„ç¯å¢ƒå˜é‡æ¥åšã€‚</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">ez-admin-springboot4</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:ez_admin_db}?useUnicode=${DB_USE_UNICODE:true}&amp;characterEncoding=${DB_CHARSET:UTF-8}</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">${DB_USERNAME:postgres}</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">${DB_PASSWORD:postgres}</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">org.postgresql.Driver</span>
  <span class="hljs-attr">jpa:</span>
    <span class="hljs-attr">hibernate:</span>
      <span class="hljs-attr">ddl-auto:</span> <span class="hljs-string">update</span>
    <span class="hljs-attr">show-sql:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">hibernate:</span>
        <span class="hljs-attr">dialect:</span> <span class="hljs-string">org.hibernate.dialect.PostgreSQLDialect</span>
        <span class="hljs-attr">format_sql:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">open-in-view:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># æ˜¾å¼å¯ç”¨ OpenEntityManagerInViewï¼ˆæ¶ˆé™¤è­¦å‘Šï¼‰</span>
</code></pre>
<h3 data-id="heading-10">5.2. æäº¤æ—¶è´¦å·é…ç½®</h3>
<p>å…ˆçœ‹ä¸‹é¢è¿™å¼ å›¾ï¼Œé¦–å…ˆå£°æ˜è¿™ä¸ªé¡¹ç›®åªæœ‰æˆ‘ä¸€ä¸ªäººç»´æŠ¤</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86d2fbfae1fc405f9ecd7137b6b4f705~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421278&amp;x-signature=WuDaxn5uSWXi0pBB2ltxM%2Fc25UM%3D" alt="image-20251204100844915" loading="lazy"/></p>
<p>æ³¨æ„åˆ°ä¸¤ç‚¹ï¼š</p>
<ol>
<li>æ˜æ˜æ˜¯æˆ‘è‡ªå·±çš„ <code>Github</code> è´¦å·æäº¤ä¸Šå»çš„ï¼Œä¸ºä»€ä¹ˆä¸æ˜¾ç¤ºå¤´åƒ</li>
<li>ä¸ºä»€ä¹ˆæœ‰çš„æäº¤è®°å½•ä¸Šæœ‰ <code>Verified</code> æ ‡ç­¾ï¼Œæœ‰çš„æ²¡æœ‰ã€‚</li>
</ol>
<p><strong>ç¬¬ä¸€ç‚¹ï¼š</strong> æˆ‘é…ç½®äº† <code>GitHub</code> çš„æˆæƒï¼Œä½†æ˜¯å› ä¸ºå…¬å¸çš„é¡¹ç›®ï¼Œæˆ‘å…¨å±€è®¾ç½®äº†ç”¨æˆ·åå’Œé‚®ç®±ï¼Œå¯¼è‡´å®é™…çš„ç”¨æˆ·åå’Œé‚®ç®±ä¸ <code>GitHub</code> çš„ç”¨æˆ·åä¸åŒ¹é…äº†ï¼Œæ‰€ä»¥å‡ºç°äº†è¿™ç§æƒ…å†µï¼Œåªéœ€è¦åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œå±€éƒ¨æ›´æ”¹ä¸€ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash">git config user.name <span class="hljs-string">"Your Name"</span>
git config user.email <span class="hljs-string">"project-email@company.com"</span>
</code></pre>
<p>æˆ‘è¯•äº†ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯ç”±é‚®ç®±å†³å®šçš„ï¼Œåç§°å…¶å®ä¸å½±å“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d12e6904704427f917984d92c2d72e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421278&amp;x-signature=DaR%2FCMUykOi7%2BTKc2r7ZVyZ5MjY%3D" alt="image-20251204102933184" loading="lazy"/></p>
<p><strong>ç¬¬äºŒç‚¹ï¼š</strong> å¦‚æœæƒ³è¦æœ‰è¿™ä¸ªéªŒè¯æ ‡ç­¾ï¼Œå¯ä»¥è¯¦ç»†çœ‹ä¸€ä¸‹è¿™é‡Œï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.github.com%2Fzh%2Fauthentication%2Fmanaging-commit-signature-verification%2Fabout-commit-signature-verification" target="_blank" title="https://docs.github.com/zh/authentication/managing-commit-signature-verification/about-commit-signature-verification" ref="nofollow noopener noreferrer">docs.github.com/zh/authentiâ€¦</a></p>
<blockquote>
<p>å…¶å®å¯¹äºæˆ‘è¿™ä¸ªé¡¹ç›®æ¥è¯´ï¼Œæ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œåªæ˜¯çœ‹åˆ°äº†ï¼Œå°±å»äº†è§£äº†ä¸€ä¸‹ã€‚</p>
</blockquote>
<ul>
<li><strong>SSH å¯†é’¥ï¼šåƒæ˜¯ä½ å®¶çš„ã€é—¨ç¦å¡/é’¥åŒ™ã€‘</strong>
<ul>
<li><strong>ç›®çš„ï¼šèº«ä»½è®¤è¯ã€‚</strong> ç”¨äºè¯æ˜â€œä½ å°±æ˜¯ä½ â€ï¼Œä»è€Œè·å¾—è®¿é—®æƒé™ã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯ï¼š</strong> åœ¨ GitHub/GitLab ä¸Šï¼Œç”¨å®ƒæ¥<strong>å®‰å…¨åœ°æ¨é€ä»£ç </strong>ï¼Œä»£æ›¿è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚å®ƒè®©ä½ èƒ½å¤Ÿä¸è¿œç¨‹ä»“åº“è¿›è¡Œè¯»å†™æ“ä½œï¼ˆå¦‚ <code>git push</code>, <code>git pull</code>ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>GPG å¯†é’¥ï¼šåƒæ˜¯ä½ æ–‡ä»¶ä¸Šçš„ã€å®˜æ–¹å°ç« å’Œèœ¡å°ã€‘</strong>
<ul>
<li><strong>ç›®çš„ï¼šæ•°å­—ç­¾åã€‚</strong> ç”¨äºè¯æ˜â€œè¿™ä»½æ–‡ä»¶ï¼ˆä»£ç ï¼‰ç¡®å®æ˜¯ä½ æœ¬äººå‘å¸ƒçš„ï¼Œå¹¶ä¸”åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ç¯¡æ”¹â€ã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯ï¼š</strong> ä¸ºä½ çš„ <strong>Git æäº¤</strong> å’Œ <strong>Tag</strong> åˆ›å»ºåŠ å¯†ç­¾åï¼Œä½¿å…¶åœ¨ GitHub ä¸Šæ˜¾ç¤ºä¸º <strong>â€œVerifiedâ€</strong> æ ‡è®°ã€‚å®ƒéªŒè¯çš„æ˜¯ä»£ç çš„å®Œæ•´æ€§å’Œæ¥æºã€‚</li>
</ul>
</li>
</ul>
<p><strong>å¯¹æ¯”è¡¨æ ¼ï¼š</strong></p>








































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">SSH å¯†é’¥</th><th align="left">GPG å¯†é’¥</th></tr></thead><tbody><tr><td align="left"><strong>ä¸»è¦ç”¨é€”</strong></td><td align="left"><strong>è®¤è¯</strong> - å®‰å…¨è®¿é—®æœåŠ¡å™¨/ä»£ç ä»“åº“</td><td align="left"><strong>ç­¾å</strong> - éªŒè¯æäº¤/æ ‡ç­¾çš„å®Œæ•´æ€§å’Œä½œè€…</td></tr><tr><td align="left"><strong>GitHub ä¸Šçš„ä½“ç°</strong></td><td align="left">å…è®¸ä½ æ‰§è¡Œ <code>git push</code>ç­‰æ“ä½œ</td><td align="left">åœ¨ä½ çš„æäº¤ä¸Šæ˜¾ç¤º <strong>Verified</strong> æ ‡è®°</td></tr><tr><td align="left"><strong>æ˜¯å¦å¿…é¡»</strong></td><td align="left"><strong>å¼ºçƒˆæ¨è</strong>ï¼ˆå‡ ä¹å¿…å¤‡ï¼Œä¸ºäº†å®‰å…¨å’Œæ–¹ä¾¿ï¼‰</td><td align="left"><strong>å¯é€‰</strong>ï¼ˆä¸ºäº†æ›´é«˜çš„å®‰å…¨æ€§å’Œä¸“ä¸šåº¦ï¼‰</td></tr><tr><td align="left"><strong>é…ç½®å¤æ‚åº¦</strong></td><td align="left">ç®€å•</td><td align="left">ç›¸å¯¹å¤æ‚</td></tr><tr><td align="left"><strong>å¯¹ä¸ªäººé¡¹ç›®çš„ä»·å€¼</strong></td><td align="left">é«˜ï¼ˆå®‰å…¨æ¨é€ä»£ç ï¼‰</td><td align="left">ä¸­ä½ï¼ˆé™¤éé¡¹ç›®éå¸¸ä¸¥è‚ƒæˆ–ç”¨äºåä½œï¼‰</td></tr><tr><td align="left"><strong>å¯¹å¼€æºåä½œé¡¹ç›®çš„ä»·å€¼</strong></td><td align="left">é«˜</td><td align="left">é«˜ï¼ˆå°¤å…¶æ˜¯å¤§å‹é¡¹ç›®ï¼Œç”¨äºç¡®ä¿æäº¤å¯ä¿¡ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-11">å…­ã€æ€»ç»“</h2>
<p>å½“æˆ‘ä»¬æƒ³è¦åšå¥½ä¸€ä¸ªäº§å“çš„æ—¶å€™ï¼Œæ€ç»´åªåœç•™åœ¨ç¼–ç å±‚é¢è¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œåœ¨è¿›è¡Œç®¡ç†ï¼Œæ¨å¹¿ç­‰ç­‰ï¼Œå„æ–¹é¢æœ‰å¾ˆå¤šç»†èŠ‚éœ€è¦å¤„ç†ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªæ­£åœ¨æ‘¸ç´¢çš„äººï¼Œæˆ‘å°½é‡å°†æˆ‘ç¢°åˆ°çš„é—®é¢˜å‘è¡¨å‡ºæ¥ï¼Œæˆ–è®¸æœ‰äº›ç‰‡é¢ï¼Œå¦‚æœä½ æœ‰ä¸€äº›æ›´å¥½çš„æ„è§æ¬¢è¿è¯„è®ºåŒºåˆ†äº«ã€‚</p>
<p><strong>åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚ä½ çš„â€œä¸ªäººå…¬å¸â€ä»è¿™ç¬¬ä¸€ä¸ª2å°æ—¶å¼€å§‹ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è¿›å±•æˆ–é‡åˆ°çš„å¡ç‚¹ï¼Œæˆ‘ä¼šé€ä¸€æŸ¥çœ‹ï¼Œå°½å¯èƒ½çš„å¸®åŠ©è§£å†³ã€‚æˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java å†…éƒ¨ç±»æŒ‡å—]]></title>    <link>https://juejin.cn/post/7579496954252460072</link>    <guid>https://juejin.cn/post/7579496954252460072</guid>    <pubDate>2025-12-04T02:43:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579496954252460072" data-draft-id="7579496954252427304" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java å†…éƒ¨ç±»æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T02:43:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å‘¨åœ¨æˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/3632442150752573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java å†…éƒ¨ç±»æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3632442150752573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å‘¨åœ¨æˆé•¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:43:03.000Z" title="Thu Dec 04 2025 02:43:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“Œ å†…éƒ¨ç±»æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>å®šä¹‰åœ¨<strong>å¦ä¸€ä¸ªç±»å†…éƒ¨</strong>çš„ç±»ï¼Œå¯ä»¥æ›´å¥½åœ°å°è£…å’Œä»£ç ç»„ç»‡ã€‚</p>
<h2 data-id="heading-1">ğŸ¯ å››ç§å†…éƒ¨ç±»ï¼ˆä¸€å¥è¯æ¦‚æ‹¬ï¼‰</h2>






























<table><thead><tr><th>ç±»å‹</th><th>å…³é”®å­—</th><th>ä¸€å¥è¯è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æˆå‘˜å†…éƒ¨ç±»</strong></td><td>æ— ç‰¹æ®Š</td><td>åƒæ™®é€šæˆå‘˜ä¸€æ ·ï¼Œä¾èµ–å¤–éƒ¨å®ä¾‹</td></tr><tr><td><strong>é™æ€å†…éƒ¨ç±»</strong></td><td><code>static</code></td><td>ä¸ä¾èµ–å¤–éƒ¨å®ä¾‹ï¼Œå¸¸ç”¨å·¥å…·ç±»</td></tr><tr><td><strong>å±€éƒ¨å†…éƒ¨ç±»</strong></td><td>å®šä¹‰åœ¨æ–¹æ³•å†…</td><td>æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼Œä¸èƒ½æœ‰è®¿é—®ä¿®é¥°ç¬¦</td></tr><tr><td><strong>åŒ¿åå†…éƒ¨ç±»</strong></td><td>æ— ç±»å</td><td>ä¸€æ¬¡æ€§ä½¿ç”¨ï¼Œç›´æ¥<code>new</code>æ¥å£/ç±»</td></tr></tbody></table>
<h2 data-id="heading-2">ğŸ’¡ 1. æˆå‘˜å†…éƒ¨ç±»ï¼ˆæœ€å¸¸ç”¨ï¼‰</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¤–éƒ¨ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">outerField</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å¤–éƒ¨æ•°æ®"</span>;
    
    <span class="hljs-comment">// æˆå‘˜å†…éƒ¨ç±»</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> {
            System.out.println(<span class="hljs-string">"è®¿é—®å¤–éƒ¨æ•°æ®: "</span> + outerField);
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Outer</span> <span class="hljs-variable">outer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer</span>();
        Outer.<span class="hljs-type">Inner</span> <span class="hljs-variable">inner</span> <span class="hljs-operator">=</span> outer.<span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner</span>();  <span class="hljs-comment">// å…ˆæœ‰å¤–éƒ¨ï¼Œå†æœ‰å†…éƒ¨</span>
        inner.show();
    }
}
</code></pre>
<h2 data-id="heading-3">ğŸ’¡ 2. é™æ€å†…éƒ¨ç±»ï¼ˆæ¨èï¼‰</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer</span> {
    <span class="hljs-comment">// é™æ€å†…éƒ¨ç±»</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticInner</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> {
            System.out.println(<span class="hljs-string">"æˆ‘æ˜¯é™æ€å†…éƒ¨ç±»"</span>);
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ï¼ˆä¸éœ€è¦å¤–éƒ¨å®ä¾‹ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Outer.<span class="hljs-type">StaticInner</span> <span class="hljs-variable">inner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer</span>.StaticInner();
        inner.show();
    }
}
</code></pre>
<h2 data-id="heading-4">ğŸ’¡ 3. å±€éƒ¨å†…éƒ¨ç±»ï¼ˆæ–¹æ³•å†…å®šä¹‰ï¼‰</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å±€éƒ¨å†…éƒ¨ç±»ï¼ˆåªèƒ½åœ¨æ–¹æ³•å†…ä½¿ç”¨ï¼‰</span>
        <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalInner</span> {
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"æˆ‘æ˜¯å±€éƒ¨å†…éƒ¨ç±»"</span>);
            }
        }
        
        <span class="hljs-type">LocalInner</span> <span class="hljs-variable">inner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalInner</span>();
        inner.show();
    }
}
</code></pre>
<h2 data-id="heading-5">ğŸ’¡ 4. åŒ¿åå†…éƒ¨ç±»ï¼ˆå¿«é€Ÿå®ç°æ¥å£ï¼‰</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åŒ¿åå†…éƒ¨ç±»ï¼šç›´æ¥newæ¥å£</span>
        <span class="hljs-type">Animal</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"æ±ªæ±ª"</span>);
            }
        };
        
        dog.makeSound();
        
        <span class="hljs-comment">// Java 8+ æ›´ç®€å•çš„å†™æ³•ï¼ˆLambdaï¼‰</span>
        <span class="hljs-type">Animal</span> <span class="hljs-variable">cat</span> <span class="hljs-operator">=</span> () -&gt; System.out.println(<span class="hljs-string">"å–µå–µ"</span>);
        cat.makeSound();
    }
}
</code></pre>
<h2 data-id="heading-6">ğŸ”‘ å…³é”®åŒºåˆ«é€ŸæŸ¥</h2>















































<table><thead><tr><th>ç‰¹æ€§</th><th>æˆå‘˜å†…éƒ¨ç±»</th><th>é™æ€å†…éƒ¨ç±»</th><th>å±€éƒ¨å†…éƒ¨ç±»</th><th>åŒ¿åå†…éƒ¨ç±»</th></tr></thead><tbody><tr><td><strong>éœ€è¦å¤–éƒ¨å®ä¾‹</strong></td><td>âœ… å¿…é¡»</td><td>âŒ ä¸éœ€è¦</td><td>âœ… éœ€è¦</td><td>âœ… éœ€è¦</td></tr><tr><td><strong>è®¿é—®å¤–éƒ¨å­—æ®µ</strong></td><td>âœ… å¯ä»¥</td><td>âŒ ä¸èƒ½*</td><td>âœ… å¯ä»¥</td><td>âœ… å¯ä»¥</td></tr><tr><td><strong>å®šä¹‰ä½ç½®</strong></td><td>ç±»ä¸­</td><td>ç±»ä¸­</td><td>æ–¹æ³•ä¸­</td><td>ç›´æ¥new</td></tr><tr><td><strong>è®¿é—®ä¿®é¥°ç¬¦</strong></td><td>å¯ä»¥æœ‰</td><td>å¯ä»¥æœ‰</td><td>ä¸èƒ½æœ‰</td><td>ä¸èƒ½æœ‰</td></tr><tr><td><strong>ä½¿ç”¨é¢‘ç‡</strong></td><td>ç»å¸¸</td><td>ç»å¸¸</td><td>è¾ƒå°‘</td><td>ç»å¸¸</td></tr></tbody></table>
<p>*é™æ€å†…éƒ¨ç±»å¯ä»¥é€šè¿‡åˆ›å»ºå¤–éƒ¨å®ä¾‹æ¥è®¿é—®</p>
<h2 data-id="heading-7">ğŸš€ å¿«é€Ÿé€‰æ‹©æŒ‡å—</h2>
<pre><code class="hljs language-markdown" lang="markdown">é—®ï¼šç”¨å“ªç§å†…éƒ¨ç±»ï¼Ÿ

<span class="hljs-bullet">1.</span> éœ€è¦å¤šæ¬¡ä½¿ç”¨ï¼Œä¸”å’Œå¤–éƒ¨ç±»ç›¸å…³ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨æˆå‘˜å†…éƒ¨ç±»
<span class="hljs-bullet">   -</span> å¦ â†’ ç»§ç»­

<span class="hljs-bullet">2.</span> åªæ˜¯å·¥å…·ç±»ï¼Œä¸ä¾èµ–å¤–éƒ¨å®ä¾‹ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨é™æ€å†…éƒ¨ç±» âœ…ï¼ˆæ¨èï¼‰
<span class="hljs-bullet">   -</span> å¦ â†’ ç»§ç»­

<span class="hljs-bullet">3.</span> åªåœ¨æŸä¸ªæ–¹æ³•é‡Œç”¨ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨å±€éƒ¨å†…éƒ¨ç±»
<span class="hljs-bullet">   -</span> å¦ â†’ ç»§ç»­

<span class="hljs-bullet">4.</span> ä¸€æ¬¡æ€§ä½¿ç”¨ï¼Œå®ç°æ¥å£ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨åŒ¿åå†…éƒ¨ç±»
</code></pre>
<h2 data-id="heading-8">ğŸ’ å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-9"><strong>åœºæ™¯1ï¼šè¿­ä»£å™¨ï¼ˆæˆå‘˜å†…éƒ¨ç±»ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyList</span> {
    <span class="hljs-keyword">private</span> String[] data = {<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>};
    
    <span class="hljs-comment">// å†…éƒ¨ç±»å®ç°è¿­ä»£å™¨</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyIterator</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> index &lt; data.length; }
        String <span class="hljs-title function_">next</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> data[index++]; }
    }
    
    MyIterator <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyIterator</span>();
    }
}
</code></pre>
<h3 data-id="heading-10"><strong>åœºæ™¯2ï¼šå»ºé€ è€…æ¨¡å¼ï¼ˆé™æ€å†…éƒ¨ç±»ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(Builder builder)</span> { <span class="hljs-comment">/* ... */</span> }
    
    <span class="hljs-comment">// é™æ€å†…éƒ¨ç±»ä½œä¸ºå»ºé€ è€…</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Builder</span> {
        <span class="hljs-keyword">private</span> String name;
        
        Builder <span class="hljs-title function_">name</span><span class="hljs-params">(String name)</span> {
            <span class="hljs-built_in">this</span>.name = name;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        Person <span class="hljs-title function_">build</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-built_in">this</span>);
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>.Builder().name(<span class="hljs-string">"å¼ ä¸‰"</span>).build();
</code></pre>
<h3 data-id="heading-11"><strong>åœºæ™¯3ï¼šäº‹ä»¶ç›‘å¬ï¼ˆåŒ¿åå†…éƒ¨ç±»ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java">button.setOnClickListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OnClickListener</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æŒ‰é’®è¢«ç‚¹å‡»"</span>);
    }
});
</code></pre>
<h2 data-id="heading-12">âš ï¸ æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>æˆå‘˜å†…éƒ¨ç±»</strong>æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨ï¼Œæ³¨æ„å†…å­˜æ³„æ¼</li>
<li><strong>åŒ¿åå†…éƒ¨ç±»</strong>åªèƒ½è®¿é—®finalå±€éƒ¨å˜é‡</li>
<li><strong>é™æ€å†…éƒ¨ç±»</strong>ä¸èƒ½ç›´æ¥è®¿é—®å¤–éƒ¨å®ä¾‹æˆå‘˜</li>
<li>å†…éƒ¨ç±»ç¼–è¯‘åç”Ÿæˆï¼š<code>Outer$Inner.class</code></li>
</ol>
<h2 data-id="heading-13">ğŸ“ ä¸€å¥è¯æ€»ç»“</h2>
<p><strong>æˆå‘˜å†…éƒ¨ç±»</strong>åƒæˆå‘˜ï¼Œ<strong>é™æ€å†…éƒ¨ç±»</strong>åƒå·¥å…·ï¼Œ<strong>å±€éƒ¨å†…éƒ¨ç±»</strong>åœ¨æ–¹æ³•é‡Œï¼Œ<strong>åŒ¿åå†…éƒ¨ç±»</strong>ä¸€æ¬¡ç”¨ã€‚å¤§éƒ¨åˆ†æƒ…å†µç”¨<strong>é™æ€å†…éƒ¨ç±»</strong>æœ€å®‰å…¨ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½œä¸ºå¼€å‘ï¼Œä½ çœŸçš„æ‡‚ OOM å—ï¼Ÿå®æµ‹ 3 ç§åœºæ™¯ï¼Œææ‡‚ JVM å´©æºƒçœŸç›¸]]></title>    <link>https://juejin.cn/post/7579544918076358691</link>    <guid>https://juejin.cn/post/7579544918076358691</guid>    <pubDate>2025-12-04T02:50:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579544918076358691" data-draft-id="7579485652528152611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½œä¸ºå¼€å‘ï¼Œä½ çœŸçš„æ‡‚ OOM å—ï¼Ÿå®æµ‹ 3 ç§åœºæ™¯ï¼Œææ‡‚ JVM å´©æºƒçœŸç›¸"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-04T02:50:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è¥¿è¥¿"/> <meta itemprop="url" content="https://juejin.cn/user/326976944214804"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½œä¸ºå¼€å‘ï¼Œä½ çœŸçš„æ‡‚ OOM å—ï¼Ÿå®æµ‹ 3 ç§åœºæ™¯ï¼Œææ‡‚ JVM å´©æºƒçœŸç›¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/326976944214804/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è¥¿è¥¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:50:13.000Z" title="Thu Dec 04 2025 02:50:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½œä¸ºäº’è”ç½‘è½¯ä»¶å¼€å‘åŒè¡Œï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿé»˜è®¤ â€œä¸€æ—¦ JVM æŠ›å‡º OutOfMemoryErrorï¼Œæ•´ä¸ªåº”ç”¨å°±å‡‰äº†â€ï¼Ÿå‰å‡ å¤©å’Œå›¢é˜Ÿæ–°äººæ’æŸ¥çº¿ä¸Šé—®é¢˜ï¼Œä»–çœ‹åˆ°æ—¥å¿—é‡Œçš„ OOM å°±æ€¥ç€é‡å¯æœåŠ¡ï¼Œç»“æœåè€Œé”™è¿‡äº†å…³é”®çš„æ’æŸ¥æ—¶æœº â€”â€” åæ¥æˆ‘ä»¬æ‰å‘ç°ï¼Œå½“æ—¶åªæ˜¯æŸä¸ªéæ ¸å¿ƒçº¿ç¨‹å†…å­˜æº¢å‡ºï¼Œä¸»çº¿ç¨‹è¿˜åœ¨æ­£å¸¸å¤„ç†è¯·æ±‚ã€‚</p>
<p>å…¶å®åœ¨å®é™…å¼€å‘ä¸­ï¼Œâ€œOOM=JVM å´©æºƒâ€ çš„è®¤çŸ¥è¯¯åŒºï¼Œå·²ç»è®©ä¸å°‘äººè¸©è¿‡å‘ã€‚ä»Šå¤©å’±ä»¬å°±ç”¨ 3 ç»„ä»£ç å®éªŒï¼Œç»“åˆ JVM åº•å±‚æœºåˆ¶ï¼ŒæŠŠ â€œOOM å JVM èƒ½å¦è¿è¡Œâ€ è¿™ä»¶äº‹è®²é€ï¼Œä»¥åä¸ç®¡æ˜¯é¢è¯•è¢«é—®ï¼Œè¿˜æ˜¯çº¿ä¸Šæ’éšœï¼Œéƒ½èƒ½å¿ƒé‡Œæœ‰åº•ã€‚</p>
<h2 data-id="heading-1">å…ˆæŠ›ä¸ªé—®é¢˜ï¼šä¸ºå•¥æœ‰äººè¯´ OOM å JVM è¿˜èƒ½æ´»ï¼Ÿ</h2>
<p>ä½ è‚¯å®šé‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šæœ¬åœ°è°ƒè¯•æ—¶ï¼Œç¨‹åºæŠ›å‡º OOM åç›´æ¥é€€å‡ºï¼›ä½†å¶å°”åœ¨çº¿ä¸Šæ—¥å¿—é‡Œï¼Œå´èƒ½çœ‹åˆ° OOM æŠ¥é”™åï¼Œåº”ç”¨è¿˜åœ¨ç»§ç»­æ‰“å°å…¶ä»–çº¿ç¨‹çš„æ—¥å¿—ã€‚è¿™ä¸æ˜¯çŸ›ç›¾å—ï¼Ÿ</p>
<p>ä¹‹å‰æˆ‘ä¹Ÿå›°æƒ‘è¿‡ï¼Œç›´åˆ°ç¿»äº†ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹æ‰å‘ç°å…³é”®ï¼š<strong>OOM æœ¬è´¨æ˜¯ â€œçº¿ç¨‹çº§â€ çš„å†…å­˜å¼‚å¸¸ï¼Œä¸æ˜¯ â€œJVM çº§â€ çš„è‡´å‘½é”™è¯¯</strong>ã€‚ç®€å•è¯´ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹åœ¨ç”³è¯·å†…å­˜æ—¶è§¦å‘ OOMï¼ŒJVM ä¼šå…ˆæ ‡è®°è¿™ä¸ªçº¿ç¨‹ä¸º â€œå¾…ç»ˆæ­¢â€ çŠ¶æ€ï¼Œç„¶åæŠ›å‡ºå¼‚å¸¸ â€”â€” å¦‚æœè¿™ä¸ªçº¿ç¨‹ä¸æ˜¯ä¸»çº¿ç¨‹ï¼Œä¹Ÿä¸æ˜¯æŒæœ‰å…³é”®èµ„æºï¼ˆæ¯”å¦‚æ•°æ®åº“è¿æ¥æ± ï¼‰çš„æ ¸å¿ƒçº¿ç¨‹ï¼Œé‚£å…¶ä»–çº¿ç¨‹å…¶å®èƒ½ç»§ç»­è¿è¡Œã€‚</p>
<p>ä½†è¿™é‡Œæœ‰ä¸ªå‰æï¼šè§¦å‘ OOM çš„å†…å­˜åŒºåŸŸï¼Œä¸èƒ½æ˜¯ â€œJVM è¿è¡Œå¿…éœ€çš„åŒºåŸŸâ€ã€‚æ¯”å¦‚æ–¹æ³•åŒºï¼ˆå…ƒç©ºé—´ï¼‰å¦‚æœå‘ç”Ÿ OOMï¼Œå¯èƒ½å¯¼è‡´ç±»åŠ è½½å¤±è´¥ï¼Œåç»­æ–°å¯¹è±¡åˆ›å»ºä¼šå—å½±å“ï¼›è€Œå †å†…å­˜çš„ OOMï¼Œåªè¦ä¸æ˜¯æ‰€æœ‰çº¿ç¨‹éƒ½åœ¨æŠ¢å†…å­˜ï¼Œå°±æœ‰æŒ½å›ç©ºé—´ã€‚</p>
<h2 data-id="heading-2">3 ç»„ä»£ç å®éªŒï¼šçœ¼è§ä¸ºå®çœ‹ OOM å JVM çŠ¶æ€</h2>
<p>å…‰è¯´ç†è®ºä¸å¤Ÿï¼Œå’±ä»¬ç›´æ¥ä¸Šä»£ç ã€‚å®éªŒç¯å¢ƒæ˜¯ JDK 11ï¼ŒJVM å‚æ•°è®¾ç½®ä¸º-Xms16m -Xmx16mï¼ˆå †å†…å­˜å›ºå®š 16Mï¼Œæ–¹ä¾¿å¿«é€Ÿè§¦å‘ OOMï¼‰ï¼Œç”¨ jconsole ç›‘æ§çº¿ç¨‹å’Œå†…å­˜å˜åŒ–ã€‚</p>
<h2 data-id="heading-3">å®éªŒ 1ï¼šåŒå­çº¿ç¨‹ï¼Œä¸€ä¸ª OOMï¼Œä¸€ä¸ªæ­£å¸¸æ‰§è¡Œ</h2>
<p>å…ˆå†™ä¸¤ä¸ªçº¿ç¨‹ï¼šThreadA è´Ÿè´£å¾ªç¯åˆ›å»ºå¤§å¯¹è±¡ï¼ˆè§¦å‘å † OOMï¼‰ï¼ŒThreadB æ¯éš” 1 ç§’æ‰“å°æ—¥å¿—ï¼ˆéªŒè¯æ˜¯å¦å­˜æ´»ï¼‰ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OOMTest1</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        <span class="hljs-comment">// ThreadAï¼šè§¦å‘OOMçš„çº¿ç¨‹</span>
        Thread threadA = <span class="hljs-keyword">new</span> Thread(() -&gt; {
            List&lt;<span class="hljs-built_in">byte</span>[]&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-comment">// æ¯æ¬¡åˆ›å»º1Mçš„å­—èŠ‚æ•°ç»„ï¼Œå †å†…å­˜16Må¾ˆå¿«ä¼šæ»¡</span>
                <span class="hljs-built_in">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>];
                list.<span class="hljs-keyword">add</span>(bytes);
            }
        }, <span class="hljs-string">"OOM-Thread-A"</span>);

        <span class="hljs-comment">// ThreadBï¼šæ­£å¸¸æ‰§è¡Œçš„çº¿ç¨‹</span>
        Thread threadB = <span class="hljs-keyword">new</span> Thread(() -&gt; {
            <span class="hljs-built_in">int</span> count = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">1000</span>);
                    count++;
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ThreadBç¬¬"</span> + count + <span class="hljs-string">"æ¬¡æ‰§è¡Œï¼Œå½“å‰æ—¶é—´ï¼š"</span> + System.currentTimeMillis());
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }, <span class="hljs-string">"Normal-Thread-B"</span>);

        threadA.start();
        threadB.start();
    }
}
</code></pre>
<p><strong>å®éªŒç»“æœ</strong>ï¼š</p>
<ul>
<li>è¿è¡Œçº¦ 15 ç§’åï¼ŒThreadA æŠ›å‡ºjava.lang.OutOfMemoryError: Java heap spaceï¼Œéšåçº¿ç¨‹ç»ˆæ­¢ï¼›</li>
<li>ThreadB æ²¡æœ‰å—å½±å“ï¼Œç»§ç»­æ¯ç§’æ‰“å°æ—¥å¿—ï¼Œjconsole æ˜¾ç¤ºå…¶çŠ¶æ€å§‹ç»ˆä¸º â€œRUNNABLEâ€ï¼›</li>
<li>å †å†…å­˜å ç”¨ä» 16M å³°å€¼éª¤é™åˆ° 8M å·¦å³ï¼ˆThreadA çš„å¯¹è±¡è¢«å›æ”¶ï¼‰ï¼ŒJVM è¿›ç¨‹å§‹ç»ˆå­˜æ´»ã€‚</li>
</ul>
<p>è¿™è¯´æ˜ï¼š<strong>å•ä¸ªéæ ¸å¿ƒçº¿ç¨‹ OOMï¼Œä¸ä¼šå¯¼è‡´ JVM å´©æºƒï¼Œå…¶ä»–çº¿ç¨‹å¯æ­£å¸¸è¿è¡Œ</strong>ã€‚</p>
<h2 data-id="heading-4">å®éªŒ 2ï¼šä¸»çº¿ç¨‹ OOMï¼Œå­çº¿ç¨‹è¿˜èƒ½æ´»å—ï¼Ÿ</h2>
<p>é‚£å¦‚æœæ˜¯ä¸»çº¿ç¨‹ï¼ˆmain çº¿ç¨‹ï¼‰è§¦å‘ OOMï¼Œå­çº¿ç¨‹ä¼šä¸ä¼šè·Ÿç€æŒ‚ï¼Ÿå’±ä»¬æŠŠå®éªŒ 1 æ”¹ä¸€ä¸‹ï¼Œè®© main çº¿ç¨‹åˆ›å»ºå¤§å¯¹è±¡ï¼ŒThreadB ä¿æŒä¸å˜ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OOMTest2</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        <span class="hljs-comment">// ä¸»çº¿ç¨‹è‡ªå·±åˆ›å»ºå¤§å¯¹è±¡ï¼Œè§¦å‘OOM</span>
        List&lt;<span class="hljs-built_in">byte</span>[]&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
        <span class="hljs-comment">// ThreadBï¼šæ­£å¸¸æ‰§è¡Œçš„å­çº¿ç¨‹</span>
        Thread threadB = <span class="hljs-keyword">new</span> Thread(() -&gt; {
            <span class="hljs-built_in">int</span> count = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">1000</span>);
                    count++;
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ThreadBç¬¬"</span> + count + <span class="hljs-string">"æ¬¡æ‰§è¡Œï¼Œå½“å‰æ—¶é—´ï¼š"</span> + System.currentTimeMillis());
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }, <span class="hljs-string">"Normal-Thread-B"</span>);
        threadB.start();

        <span class="hljs-comment">// ä¸»çº¿ç¨‹å¾ªç¯åˆ›å»ºå¯¹è±¡</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-built_in">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>];
            list.<span class="hljs-keyword">add</span>(bytes);
        }
    }
}
</code></pre>
<p><strong>å®éªŒç»“æœ</strong>ï¼š</p>
<ul>
<li>ä¸»çº¿ç¨‹æŠ›å‡º OOM åç«‹å³ç»ˆæ­¢ï¼Œæ§åˆ¶å°æ‰“å°Exception in thread "main" java.lang.OutOfMemoryError: Java heap spaceï¼›</li>
<li>ThreadB ç»§ç»­è¿è¡Œäº†çº¦ 3 ç§’ï¼Œç„¶åçªç„¶ç»ˆæ­¢ï¼ŒJVM è¿›ç¨‹é€€å‡ºï¼›</li>
<li>jconsole ç›‘æ§æ˜¾ç¤ºï¼šä¸»çº¿ç¨‹ç»ˆæ­¢åï¼ŒJVM å¼€å§‹é”€æ¯éå®ˆæŠ¤çº¿ç¨‹ï¼ŒThreadB ä½œä¸ºéå®ˆæŠ¤çº¿ç¨‹è¢«å¼ºåˆ¶ä¸­æ–­ã€‚</li>
</ul>
<p>è¿™é‡Œè¦æ³¨æ„ï¼š<strong>Java ä¸­ä¸»çº¿ç¨‹æ˜¯å®ˆæŠ¤çº¿ç¨‹å—ï¼Ÿä¸æ˜¯ï¼</strong> Â å½“æ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹ç»ˆæ­¢åï¼ŒJVM æ‰ä¼šé€€å‡ºã€‚ä½†ä¸»çº¿ç¨‹ç»ˆæ­¢åï¼Œå­çº¿ç¨‹å¦‚æœæ˜¯æ™®é€šéå®ˆæŠ¤çº¿ç¨‹ï¼Œç†è®ºä¸Šèƒ½ç»§ç»­è¿è¡Œ â€”â€” ä½†å®éªŒä¸­ ThreadB ä¸ºå•¥ä¼šé€€å‡ºï¼Ÿ</p>
<p>æŸ¥äº† JVM æºç æ‰å‘ç°ï¼šä¸»çº¿ç¨‹æŠ›å‡º OOM åï¼Œè™½ç„¶æ²¡æœ‰ä¸»åŠ¨å…³é—­å­çº¿ç¨‹ï¼Œä½† JVM åœ¨å¤„ç†ä¸»çº¿ç¨‹å¼‚å¸¸æ—¶ï¼Œä¼šæ£€æŸ¥ â€œæ˜¯å¦è¿˜æœ‰å…³é”®çº¿ç¨‹å­˜æ´»â€ã€‚å¦‚æœå­çº¿ç¨‹æ²¡æœ‰ç»‘å®šå¤–éƒ¨èµ„æºï¼ˆæ¯”å¦‚ Socketã€æ•°æ®åº“è¿æ¥ï¼‰ï¼ŒJVM å¯èƒ½ä¼šè§¦å‘ â€œä¼˜é›…é€€å‡ºâ€ æœºåˆ¶ï¼Œä¸»åŠ¨ä¸­æ–­å­çº¿ç¨‹ã€‚</p>
<h2 data-id="heading-5">å®éªŒ 3ï¼šå…ƒç©ºé—´ OOMï¼ŒJVM è¿˜èƒ½åˆ›å»ºæ–°å¯¹è±¡å—ï¼Ÿ</h2>
<p>å‰é¢æµ‹çš„æ˜¯å †å†…å­˜ OOMï¼Œé‚£æ–¹æ³•åŒºï¼ˆå…ƒç©ºé—´ï¼‰OOM å‘¢ï¼Ÿå…ƒç©ºé—´å­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡æ± ï¼Œå¦‚æœè¿™é‡Œæº¢å‡ºï¼ŒJVM è¿ç±»éƒ½åŠ è½½ä¸äº†ï¼Œè¿˜èƒ½æ­£å¸¸å·¥ä½œå—ï¼Ÿ</p>
<p>å’±ä»¬ç”¨ CGLIB åŠ¨æ€ç”Ÿæˆç±»ï¼Œè§¦å‘å…ƒç©ºé—´ OOMï¼ˆJVM å‚æ•°è®¾ç½®-XX:MetaspaceSize=10m -XX:MaxMetaspaceSize=10mï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OOMTest3</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        Enhancer enhancer = <span class="hljs-keyword">new</span> Enhancer();
        enhancer.setSuperclass(OOMTest3.<span class="hljs-keyword">class</span>);
        enhancer.setUseCache(<span class="hljs-literal">false</span>);
        <span class="hljs-built_in">int</span> count = <span class="hljs-number">0</span>;

        <span class="hljs-comment">// å­çº¿ç¨‹ï¼šå°è¯•åˆ›å»ºæ–°å¯¹è±¡</span>
        <span class="hljs-keyword">new</span> Thread(() -&gt; {
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">1000</span>);
                    <span class="hljs-comment">// æ¯æ¬¡åˆ›å»ºä¸€ä¸ªOOMTest3çš„å®ä¾‹</span>
                    OOMTest3 test = <span class="hljs-keyword">new</span> OOMTest3();
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æˆåŠŸåˆ›å»ºOOMTest3å®ä¾‹ï¼Œå½“å‰æ—¶é—´ï¼š"</span> + System.currentTimeMillis());
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"åˆ›å»ºå¯¹è±¡å¤±è´¥ï¼š"</span> + e.getMessage());
                    e.printStackTrace();
                }
            }
        }, <span class="hljs-string">"Object-Create-Thread"</span>).start();

        <span class="hljs-comment">// ä¸»çº¿ç¨‹ï¼šåŠ¨æ€ç”Ÿæˆç±»ï¼Œè§¦å‘å…ƒç©ºé—´OOM</span>
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            count++;
            enhancer.setCallbackFilter((method) -&gt; <span class="hljs-number">1</span>);
            enhancer.setCallbacks(<span class="hljs-keyword">new</span> Callback[]{NoOp.INSTANCE});
            Class&lt;?&gt; clazz = enhancer.createClass();
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ç¬¬"</span> + count + <span class="hljs-string">"æ¬¡ç”Ÿæˆç±»ï¼š"</span> + clazz.getName());
        }
    }
}
</code></pre>
<p><strong>å®éªŒç»“æœ</strong>ï¼š</p>
<ul>
<li>ä¸»çº¿ç¨‹ç”Ÿæˆçº¦ 500 ä¸ªç±»åï¼ŒæŠ›å‡ºjava.lang.OutOfMemoryError: Metaspaceï¼Œéšåç»ˆæ­¢ï¼›</li>
<li>å­çº¿ç¨‹ä¸€å¼€å§‹èƒ½æ­£å¸¸åˆ›å»º OOMTest3 å®ä¾‹ï¼Œä½†çº¦ 10 ç§’åï¼ŒæŠ›å‡ºjava.lang.OutOfMemoryError: Metaspaceï¼Œæ— æ³•åˆ›å»ºæ–°å¯¹è±¡ï¼›</li>
<li>JVM è¿›ç¨‹æ²¡æœ‰ç«‹å³é€€å‡ºï¼Œä½†å·²æ— æ³•æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡ï¼ˆåˆ›å»ºå¯¹è±¡å¤±è´¥ï¼‰ï¼Œç›¸å½“äº â€œåŠæ­»äº¡â€ çŠ¶æ€ã€‚</li>
</ul>
<p>è¿™è¯´æ˜ï¼š<strong>å…ƒç©ºé—´ç­‰ â€œJVM æ ¸å¿ƒåŒºåŸŸâ€ OOMï¼Œå³ä½¿çº¿ç¨‹æ²¡å…¨æŒ‚ï¼ŒJVM ä¹Ÿä¼šå¤±å»æ ¸å¿ƒåŠŸèƒ½ï¼Œæœ€ç»ˆè¿˜æ˜¯è¦é‡å¯</strong>ã€‚</p>
<h2 data-id="heading-6">é‡åˆ° OOMï¼Œåˆ«å†ç›²ç›®é‡å¯äº†ï¼</h2>
<p>çœ‹å®Œå®éªŒï¼Œä½ åº”è¯¥æ˜ç™½ï¼šOOM åè¦ä¸è¦é‡å¯ï¼Œä¸èƒ½ä¸€æ¦‚è€Œè®ºã€‚è¿™é‡Œç»™ä½  3 ä¸ªå®æˆ˜å¤„ç†æ­¥éª¤ï¼Œå¸®ä½ å‡å°‘ä¸å¿…è¦çš„æœåŠ¡ä¸­æ–­ï¼š</p>
<h2 data-id="heading-7">1. å…ˆåˆ¤æ–­ OOM çš„å†…å­˜åŒºåŸŸå’Œçº¿ç¨‹ç±»å‹</h2>
<ul>
<li>çœ‹æ—¥å¿—é‡Œçš„ OOM ç±»å‹ï¼šå¦‚æœæ˜¯Java heap spaceï¼ˆå †å†…å­˜ï¼‰ï¼Œä¸”æŠ¥é”™çº¿ç¨‹æ˜¯ â€œå®šæ—¶ä»»åŠ¡çº¿ç¨‹â€â€œæ—¥å¿—æ”¶é›†çº¿ç¨‹â€ ç­‰éæ ¸å¿ƒçº¿ç¨‹ï¼Œå¯ä»¥å…ˆä¸é‡å¯ï¼Œè§‚å¯Ÿå…¶ä»–çº¿ç¨‹æ˜¯å¦æ­£å¸¸ï¼›</li>
<li>å¦‚æœæ˜¯Metaspaceï¼ˆå…ƒç©ºé—´ï¼‰ã€Direct buffer memoryï¼ˆç›´æ¥å†…å­˜ï¼‰ï¼Œæˆ–è€…æŠ¥é”™çº¿ç¨‹æ˜¯ â€œä¸»çº¿ç¨‹â€â€œè¯·æ±‚å¤„ç†çº¿ç¨‹â€ï¼Œå»ºè®®ç«‹å³é‡å¯ï¼Œé¿å…æ•…éšœæ‰©å¤§ã€‚</li>
</ul>
<h2 data-id="heading-8">2. ç´§æ€¥æ’æŸ¥ï¼šç”¨å·¥å…·æŠ“å†…å­˜å¿«ç…§</h2>
<p>å¦‚æœå†³å®šä¸ç«‹å³é‡å¯ï¼Œä¸€å®šè¦æŠ“ç´§æ—¶é—´æŠ“å†…å­˜å¿«ç…§ï¼ˆjmapï¼‰å’Œçº¿ç¨‹ dumpï¼ˆjstackï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æŠ“å†…å­˜å¿«ç…§ï¼ˆpidæ˜¯JVMè¿›ç¨‹å·ï¼‰</span>
jmap -dump:<span class="hljs-attr">format</span>=b,file=heap.hprof [pid]
<span class="hljs-comment"># æŠ“çº¿ç¨‹dump</span>
jstack <span class="hljs-section">[pid]</span> &gt; thread_dump.txt
</code></pre>
<p>è¿™äº›æ–‡ä»¶èƒ½å¸®ä½ å®šä½ â€œå“ªä¸ªå¯¹è±¡å äº†å¤ªå¤šå†…å­˜â€â€œå“ªä¸ªçº¿ç¨‹åœ¨ç–¯ç‹‚ç”³è¯·èµ„æºâ€ï¼Œåç»­ä¼˜åŒ–æ‰æœ‰çš„æ”¾çŸ¢ã€‚</p>
<h2 data-id="heading-9">3. é•¿æœŸä¼˜åŒ–ï¼šç»™å…³é”®çº¿ç¨‹åŠ  â€œå†…å­˜ä¿æŠ¤â€</h2>
<p>çº¿ä¸ŠæœåŠ¡å¯ä»¥æå‰åšé˜²æŠ¤ï¼š</p>
<ul>
<li>ç»™éæ ¸å¿ƒçº¿ç¨‹è®¾ç½® â€œå†…å­˜ä½¿ç”¨ä¸Šé™â€ï¼Œæ¯”å¦‚ç”¨ThreadLocalæ§åˆ¶å•ä¸ªçº¿ç¨‹çš„å¯¹è±¡åˆ›å»ºæ•°é‡ï¼›</li>
<li>å¯¹æ ¸å¿ƒçº¿ç¨‹ï¼ˆå¦‚è¯·æ±‚å¤„ç†çº¿ç¨‹ï¼‰ï¼Œåœ¨ä»£ç ä¸­åŠ  â€œå†…å­˜æ£€æŸ¥â€ï¼Œæ¯”å¦‚å®šæœŸè°ƒç”¨ManagementFactory.getMemoryMXBean()æŸ¥çœ‹å †å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œæ¥è¿‘é˜ˆå€¼æ—¶ä¸»åŠ¨é‡Šæ”¾èµ„æºã€‚</li>
</ul>
<h2 data-id="heading-10">æ€»ç»“ï¼šè®°ä½è¿™ 3 ä¸ªæ ¸å¿ƒç»“è®ºï¼Œé¢è¯•æ’éšœéƒ½æœ‰ç”¨</h2>
<ol>
<li><strong>OOM ä¸æ˜¯ JVM çš„ â€œæ­»åˆ‘åˆ¤å†³â€</strong> ï¼šå•ä¸ªéæ ¸å¿ƒçº¿ç¨‹çš„å †å†…å­˜ OOMï¼Œä¸ä¼šå¯¼è‡´ JVM å´©æºƒï¼Œå…¶ä»–çº¿ç¨‹å¯æ­£å¸¸è¿è¡Œï¼›</li>
<li><strong>æ ¸å¿ƒåŒºåŸŸ OOM å¿…é¡»é‡å¯</strong>ï¼šå…ƒç©ºé—´ã€ç›´æ¥å†…å­˜ç­‰åŒºåŸŸ OOMï¼Œä¼šè®© JVM å¤±å»æ ¸å¿ƒåŠŸèƒ½ï¼Œå†æ’‘ç€ä¹Ÿæ²¡ç”¨ï¼›</li>
<li><strong>æ’éšœåˆ«æ…Œï¼Œå…ˆçœ‹æ—¥å¿—å’Œçº¿ç¨‹</strong>ï¼šé‡åˆ° OOM å…ˆçœ‹ â€œå“ªä¸ªçº¿ç¨‹ã€å“ªä¸ªå†…å­˜åŒºåŸŸâ€ å‡ºé—®é¢˜ï¼Œå†å†³å®šæ˜¯å¦é‡å¯ï¼Œè®°å¾—æŠ“å¿«ç…§ç•™è¯æ®ã€‚</li>
</ol>
<p>æœ€åæƒ³é—®é—®ä½ ï¼šä½ ä¹‹å‰åœ¨çº¿ä¸Šé‡åˆ°è¿‡ OOM å—ï¼Ÿå½“æ—¶æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿæœ‰æ²¡æœ‰è¸©è¿‡ â€œç›²ç›®é‡å¯â€ çš„å‘ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»å†ï¼Œå’±ä»¬ä¸€èµ·äº¤æµæ›´å¤š JVM æ’éšœæŠ€å·§ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agentå¹³å°æ¶ˆæ¯èŠ‚ç‚¹è¾“å‡ºè®¾è®¡æ€è·¯]]></title>    <link>https://juejin.cn/post/7579673620940701746</link>    <guid>https://juejin.cn/post/7579673620940701746</guid>    <pubDate>2025-12-04T02:50:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579673620940701746" data-draft-id="7579544295344504883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agentå¹³å°æ¶ˆæ¯èŠ‚ç‚¹è¾“å‡ºè®¾è®¡æ€è·¯"/> <meta itemprop="keywords" content="åç«¯,Python,Agent"/> <meta itemprop="datePublished" content="2025-12-04T02:50:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sivdead"/> <meta itemprop="url" content="https://juejin.cn/user/3579665589488904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agentå¹³å°æ¶ˆæ¯èŠ‚ç‚¹è¾“å‡ºè®¾è®¡æ€è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3579665589488904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sivdead
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:50:01.000Z" title="Thu Dec 04 2025 02:50:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨Agentå¹³å°çš„å·¥ä½œæµç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å°†å¤šä¸ªèŠ‚ç‚¹çš„è¾“å‡ºç»„åˆæˆä¸€æ¡æ¶ˆæ¯å±•ç¤ºç»™ç”¨æˆ·ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ª AI åˆ†æèŠ‚ç‚¹ç”Ÿæˆæµå¼æ–‡æœ¬ï¼Œä¸€ä¸ªä»£ç æ‰§è¡ŒèŠ‚ç‚¹è¿”å›è®¡ç®—ç»“æœï¼Œæˆ‘ä»¬å¸Œæœ›å°†å®ƒä»¬æŒ‰é¡ºåºç»„åˆæˆï¼š"AIåˆ†æï¼š{æµå¼æ–‡æœ¬}\n\nè®¡ç®—ç»“æœï¼š{æ ‡é‡å€¼}"ã€‚</p>
<p>è¿™çœ‹ä¼¼ç®€å•çš„éœ€æ±‚ï¼Œå®é™…ä¸Šæ¶‰åŠå‡ ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ï¼š</p>
<ol>
<li><strong>æ··åˆæ•°æ®æº</strong>ï¼šå¦‚ä½•åŒæ—¶å¤„ç†æµå¼æ•°æ®ï¼ˆé€å—åˆ°è¾¾ï¼‰å’Œæ ‡é‡æ•°æ®ï¼ˆä¸€æ¬¡æ€§å®Œæˆï¼‰ï¼Ÿ</li>
<li><strong>é¡ºåºä¿è¯</strong>ï¼šå¦‚ä½•ç¡®ä¿è¾“å‡ºä¸¥æ ¼æŒ‰ç…§æ¨¡æ¿ä¸­å˜é‡å‡ºç°çš„é¡ºåºæ¨é€ï¼Ÿ</li>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼šå¦‚ä½•çŸ¥é“ä½•æ—¶å¯ä»¥å¼€å§‹æ¨é€ï¼Ÿå¦‚ä½•ç­‰å¾…æœªå°±ç»ªçš„æ•°æ®ï¼Ÿ</li>
<li><strong>è§£è€¦è®¾è®¡</strong>ï¼šå¦‚ä½•è®©æ¶ˆæ¯èŠ‚ç‚¹ä¸éœ€è¦çŸ¥é“å…·ä½“å¼•ç”¨äº†å“ªäº›èŠ‚ç‚¹ï¼Ÿ</li>
</ol>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ä¸€ä¸ªåŸºäº<strong>ç¼–è¯‘æ—¶-è¿è¡Œæ—¶åˆ†ç¦»</strong>å’Œ<strong>æ‹¦æˆªæœºåˆ¶</strong>çš„æµå¼è¾“å‡ºè®¾è®¡æ–¹æ¡ˆã€‚</p>
<blockquote>
<p><strong>è¯´æ˜</strong>ï¼šæœ¬æ–‡çš„è®¾è®¡æ€è·¯å‚è€ƒäº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.dify.ai%2F" target="_blank" title="https://docs.dify.ai/" ref="nofollow noopener noreferrer">Dify</a> çš„ StreamCoordinator æ¨¡å—è®¾è®¡ã€‚Dify æ˜¯ä¸€ä¸ª AI åŸç”Ÿåº”ç”¨å¼€å‘å¹³å°ï¼Œå…¶å·¥ä½œæµå¼•æ“ä¸­çš„å›ç­”èŠ‚ç‚¹ï¼ˆAnswer Nodeï¼‰é‡‡ç”¨äº†ç±»ä¼¼çš„æµå¼è¾“å‡ºåè°ƒæœºåˆ¶ï¼Œé€šè¿‡æ‹¦æˆªä¸Šæ¸¸èŠ‚ç‚¹çš„è¾“å‡ºå¹¶æŒ‰æ¨¡æ¿é¡ºåºæ¨é€ï¼Œå®ç°äº†é«˜æ•ˆçš„æµå¼è¾“å‡ºä½“éªŒã€‚æœ¬æ–‡åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†æ¶æ„ä¼˜åŒ–å’Œå®ç°ç»†èŠ‚çš„é˜è¿°ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">é—®é¢˜åœºæ™¯</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå·¥ä½œæµï¼ŒåŒ…å«ä»¥ä¸‹èŠ‚ç‚¹ï¼š</p>
<ul>
<li><strong>LLM èŠ‚ç‚¹</strong>ï¼šç”Ÿæˆ AI åˆ†æï¼Œè¾“å‡ºæ˜¯æµå¼çš„ï¼ˆé€ token è¿”å›ï¼‰</li>
<li><strong>ä»£ç æ‰§è¡ŒèŠ‚ç‚¹</strong>ï¼šæ‰§è¡Œè®¡ç®—ï¼Œè¾“å‡ºæ˜¯æ ‡é‡çš„ï¼ˆä¸€æ¬¡æ€§è¿”å›ï¼‰</li>
<li><strong>æ¶ˆæ¯èŠ‚ç‚¹</strong>ï¼šå°†ä¸¤è€…ç»„åˆï¼Œæ¨¡æ¿ä¸º <code>"AIåˆ†æï¼š{llm_output}\n\nè®¡ç®—ç»“æœï¼š{code_result}"</code></li>
</ul>
<p>æˆ‘ä»¬å¸Œæœ›å®ç°çš„æ•ˆæœæ˜¯ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">æ—¶é—´è½´ <span class="hljs-operator">â”‚</span> å‰ç«¯æ¥æ”¶åˆ°çš„è¾“å‡º
<span class="hljs-operator">â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
  <span class="hljs-type">T1</span>  <span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼š"</span>
  <span class="hljs-type">T2</span>  <span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼šAI"</span>
  <span class="hljs-type">T3</span>  <span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼šAI thinks"</span>
  <span class="hljs-type">T4</span>  <span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼šAI thinks..."</span>
  <span class="hljs-type">T5</span>  <span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼šAI thinks...<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>è®¡ç®—ç»“æœï¼š"</span>
  <span class="hljs-type">T6</span>  <span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼šAI thinks...<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>è®¡ç®—ç»“æœï¼š42"</span>
</code></pre>
<p>æ³¨æ„å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li><strong>æ–‡æœ¬æ®µç«‹å³æ¨é€</strong>ï¼š<code>"AIåˆ†æï¼š"</code> åœ¨ç¬¬ä¸€ä¸ªå˜é‡æ•°æ®åˆ°è¾¾å‰å°±å¯ä»¥æ¨é€</li>
<li><strong>æµå¼æ•°æ®å®æ—¶è½¬å‘</strong>ï¼šLLM çš„æ¯ä¸ª token åˆ°è¾¾åç«‹å³è½¬å‘</li>
<li><strong>ç­‰å¾…æ ‡é‡æ•°æ®</strong>ï¼š<code>"è®¡ç®—ç»“æœï¼š"</code> æ¨é€åï¼Œå¿…é¡»ç­‰å¾…ä»£ç èŠ‚ç‚¹å®Œæˆæ‰èƒ½æ¨é€ <code>42</code></li>
<li><strong>ä¸¥æ ¼é¡ºåº</strong>ï¼šå³ä½¿ä»£ç èŠ‚ç‚¹å…ˆå®Œæˆï¼Œä¹Ÿå¿…é¡»ç­‰ LLM æµå¼è¾“å‡ºå®Œæˆåå†æ¨é€</li>
</ol>
<hr/>
<h2 data-id="heading-2">è®¾è®¡æ€è·¯</h2>
<blockquote>
<p><strong>å‚è€ƒè¯´æ˜</strong>ï¼šæœ¬è®¾è®¡å‚è€ƒäº† Dify çš„ StreamCoordinator è®¾è®¡ç†å¿µï¼Œç‰¹åˆ«æ˜¯å…¶"æŒ‰å˜é‡åœ¨æ¨¡æ¿ä¸­çš„ä½ç½®å†³å®šæµå¼è¾“å‡ºé¡ºåº"çš„æ ¸å¿ƒæ€æƒ³ã€‚</p>
</blockquote>
<h3 data-id="heading-3">æ ¸å¿ƒæ€æƒ³ï¼šæ‹¦æˆªä¸åè°ƒ</h3>
<p>åœ¨çŠ¶æ€é©±åŠ¨çš„å·¥ä½œæµç³»ç»Ÿä¸­ï¼Œä¼ ç»Ÿæ–¹æ¡ˆå¯èƒ½æ˜¯ï¼š</p>
<ul>
<li><strong>ç­‰å¾…æ‰€æœ‰ä¸Šæ¸¸èŠ‚ç‚¹å®Œæˆ</strong>ï¼šæ¶ˆæ¯èŠ‚ç‚¹æ‰§è¡Œæ—¶ï¼Œç­‰å¾…æ‰€æœ‰ä¸Šæ¸¸èŠ‚ç‚¹å®Œæˆåï¼Œä¸€æ¬¡æ€§ç»„è£…æ‰€æœ‰è¾“å‡º</li>
<li><strong>ä¸€æ¬¡æ€§æ¨é€</strong>ï¼šæ— æ³•å®ç°æµå¼è¾“å‡ºï¼Œå› ä¸ºå¿…é¡»ç­‰å¾…æ‰€æœ‰èŠ‚ç‚¹å®Œæˆæ‰èƒ½æ¨é€</li>
<li><strong>æ—¶åºé™åˆ¶</strong>ï¼šæµå¼èŠ‚ç‚¹ï¼ˆå¦‚ LLMï¼‰çš„è¾“å‡ºå¿…é¡»ç­‰åˆ°æ‰€æœ‰èŠ‚ç‚¹å®Œæˆåæ‰èƒ½å±•ç¤ºï¼Œç”¨æˆ·ä½“éªŒå·®</li>
</ul>
<p>æˆ‘ä»¬çš„æ–¹æ¡ˆåœ¨ <strong>workflow ä¹‹å¤–é¢å¤–è®¾è®¡äº†ä¸€ä¸ªåè°ƒå±‚</strong>ï¼Œå®ƒç‹¬ç«‹äº workflow çš„è¿è¡Œæœºåˆ¶ï¼š</p>
<ul>
<li><strong>ç‹¬ç«‹åè°ƒå±‚</strong>ï¼šåè°ƒå™¨ï¼ˆStreamCoordinatorï¼‰ä¸å‚ä¸ workflow çš„çŠ¶æ€æµè½¬ï¼Œè€Œæ˜¯ä½œä¸ºç‹¬ç«‹çš„åè°ƒç»„ä»¶è¿è¡Œ</li>
<li><strong>æ‹¦æˆªæœºåˆ¶</strong>ï¼šä¸Šæ¸¸èŠ‚ç‚¹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸»åŠ¨é€šçŸ¥åè°ƒå™¨ï¼Œåè°ƒå™¨è´Ÿè´£æŒ‰æ¨¡æ¿é¡ºåºå®æ—¶ç»„è£…å’Œæ¨é€</li>
<li><strong>è§£è€¦è®¾è®¡</strong>ï¼šæ¶ˆæ¯èŠ‚ç‚¹ä¸éœ€è¦çŸ¥é“ä¸Šæ¸¸èŠ‚ç‚¹çš„æ‰§è¡Œç»†èŠ‚ï¼Œåè°ƒå±‚è´Ÿè´£å¤„ç†æ‰€æœ‰ç»„è£…é€»è¾‘</li>
<li><strong>å®æ—¶æ¨é€</strong>ï¼šæµå¼æ•°æ®åˆ°è¾¾æ—¶ç«‹å³æ¨é€ï¼Œæ— éœ€ç­‰å¾…æ‰€æœ‰èŠ‚ç‚¹å®Œæˆ</li>
<li><strong>çµæ´»ç»„åˆ</strong>ï¼šå¯ä»¥æ··åˆå¤„ç†æµå¼æ•°æ®å’Œæ ‡é‡æ•°æ®ï¼ŒæŒ‰æ¨¡æ¿é¡ºåºé€æ®µæ¨é€</li>
</ul>
<p>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿åœ¨äºï¼š<strong>åè°ƒå±‚ä¸ workflow è§£è€¦</strong>ï¼Œworkflow ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„æ‰§è¡Œï¼Œåè°ƒå±‚ä¸“æ³¨äºæµå¼è¾“å‡ºçš„ç»„è£…å’Œæ¨é€ï¼Œä¸¤è€…é€šè¿‡è½»é‡çº§çš„æ‹¦æˆªæ¥å£äº¤äº’ã€‚</p>
<h3 data-id="heading-4">æ¶æ„åˆ†å±‚ï¼šç¼–è¯‘æ—¶ vs è¿è¡Œæ—¶</h3>
<p>ç³»ç»Ÿé‡‡ç”¨<strong>ç¼–è¯‘æ—¶-è¿è¡Œæ—¶åˆ†ç¦»</strong>çš„æ¶æ„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¼–è¯‘æ—¶ï¼ˆGraph Buildï¼‰                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. è§£ææ¨¡æ¿ï¼Œæå–å˜é‡å’Œæ–‡æœ¬æ®µ                            â”‚
â”‚ 2. å»ºç«‹å˜é‡åˆ°èŠ‚ç‚¹çš„æ˜ å°„å…³ç³»                              â”‚
â”‚ 3. æ³¨å†Œæ‹¦æˆªè§„åˆ™ï¼ˆå“ªäº›èŠ‚ç‚¹éœ€è¦è¢«æ‹¦æˆªï¼‰                    â”‚
â”‚ 4. æ„å»ºåå‘ç´¢å¼•ï¼ˆä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½è¢«å¤šä¸ªæ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨ï¼‰        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  è¿è¡Œæ—¶ï¼ˆGraph Executionï¼‰                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. åˆ›å»ºåè°ƒå™¨å®ä¾‹ï¼ˆç»´æŠ¤è¿è¡Œæ—¶çŠ¶æ€ï¼‰                       â”‚
â”‚ 2. ä¸Šæ¸¸èŠ‚ç‚¹æ‰§è¡Œæ—¶ï¼Œè°ƒç”¨åè°ƒå™¨æ‹¦æˆªè¾“å‡º                     â”‚
â”‚ 3. åè°ƒå™¨æŒ‰æ¨¡æ¿é¡ºåºç»„è£…å¹¶æ¨é€                            â”‚
â”‚ 4. æ‰§è¡Œå®Œæ¯•åé‡Šæ”¾åè°ƒå™¨                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<ul>
<li><strong>ç¼–è¯‘æ—¶</strong>ï¼šæ— çŠ¶æ€ï¼Œåªå­˜å‚¨"è®¢é˜…å…³ç³»"ï¼Œå¯ä»¥å¤ç”¨ï¼Œæ— éœ€æŒä¹…åŒ–</li>
<li><strong>è¿è¡Œæ—¶</strong>ï¼šæœ‰çŠ¶æ€ï¼Œç»´æŠ¤ç¼“å†²åŒºã€ä¼šè¯ç­‰ï¼Œæ¯æ¬¡æ‰§è¡Œç‹¬ç«‹åˆ›å»ºï¼Œæ”¯æŒåºåˆ—åŒ–ï¼ˆæ–­ç‚¹ç»­ä¼ ï¼‰</li>
<li><strong>ç‹¬ç«‹äº workflow</strong>ï¼šåè°ƒå±‚ä¸å‚ä¸ workflow çš„çŠ¶æ€æµè½¬ï¼Œè€Œæ˜¯ä½œä¸ºç‹¬ç«‹çš„åè°ƒç»„ä»¶ï¼Œé€šè¿‡æ‹¦æˆªæ¥å£ä¸ workflow äº¤äº’ã€‚è¿™æ · workflow å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œåè°ƒå±‚ä¸“æ³¨äºæµå¼è¾“å‡ºçš„ç»„è£…å’Œæ¨é€</li>
</ul>
<hr/>
<h2 data-id="heading-5">æ ¸å¿ƒç»„ä»¶è®¾è®¡</h2>
<h3 data-id="heading-6">1. æ¨¡æ¿è§£æï¼šä»å­—ç¬¦ä¸²åˆ°æ®µåºåˆ—</h3>
<p>æ¨¡æ¿ <code>"AIåˆ†æï¼š{llm_output}\n\nè®¡ç®—ç»“æœï¼š{code_result}"</code> éœ€è¦è§£æä¸ºæ®µåºåˆ—ï¼š</p>
<pre><code class="hljs language-python" lang="python">[
    TextSegment(text=<span class="hljs-string">"AIåˆ†æï¼š"</span>),
    VariableSegment(variable_name=<span class="hljs-string">"llm_output"</span>, node_id=<span class="hljs-string">"llm_1"</span>, node_variable=<span class="hljs-string">"text"</span>),
    TextSegment(text=<span class="hljs-string">"\n\nè®¡ç®—ç»“æœï¼š"</span>),
    VariableSegment(variable_name=<span class="hljs-string">"code_result"</span>, node_id=<span class="hljs-string">"code_1"</span>, node_variable=<span class="hljs-string">"result"</span>)
]
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>æ–‡æœ¬æ®µ</strong>ï¼šå›ºå®šæ–‡æœ¬ï¼Œå¯ä»¥ç«‹å³æ¨é€</li>
<li><strong>å˜é‡æ®µ</strong>ï¼šéœ€è¦ç­‰å¾…ä¸Šæ¸¸èŠ‚ç‚¹æ•°æ®ï¼ŒåŒ…å«å˜é‡åã€èŠ‚ç‚¹IDã€è¾“å‡ºå˜é‡è·¯å¾„</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦æ®µåºåˆ—ï¼Ÿ</strong></p>
<p>æ®µåºåˆ—å®šä¹‰äº†æ¨é€çš„<strong>ä¸¥æ ¼é¡ºåº</strong>ã€‚åè°ƒå™¨æŒ‰ç´¢å¼•é€æ®µå¤„ç†ï¼Œé‡åˆ°æœªå°±ç»ªçš„å˜é‡æ®µæ—¶åœæ­¢ï¼Œä¿è¯é¡ºåºã€‚</p>
<h3 data-id="heading-7">2. æ³¨å†Œè¡¨ï¼ˆRegistryï¼‰ï¼šç¼–è¯‘æ—¶çš„è®¢é˜…å…³ç³»</h3>
<p>æ³¨å†Œè¡¨åœ¨ç¼–è¯‘æ—¶æ„å»ºï¼Œå­˜å‚¨ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamCoordinatorRegistry</span>:
    <span class="hljs-comment"># æ‹¦æˆªè§„åˆ™ï¼š{message_node_id: InterceptionRule}</span>
    _interception_rules: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, InterceptionRule]
    
    <span class="hljs-comment"># åå‘ç´¢å¼•ï¼š{node_id: [message_node_ids]}</span>
    <span class="hljs-comment"># ä¾‹å¦‚ï¼š{"llm_1": ["msg_1", "msg_2"]} è¡¨ç¤º llm_1 è¢«ä¸¤ä¸ªæ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨</span>
    _node_to_messages: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]]
</code></pre>
<p><strong>å…³é”®æ–¹æ³•ï¼š</strong></p>
<ul>
<li><code>register_interception()</code>ï¼šæ³¨å†Œæ‹¦æˆªè§„åˆ™ï¼ˆæ¶ˆæ¯èŠ‚ç‚¹åˆå§‹åŒ–æ—¶è°ƒç”¨ï¼‰</li>
<li><code>is_intercepted(node_id)</code>ï¼šæ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦è¢«ä»»ä½•æ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨</li>
<li><code>get_message_nodes_for(node_id)</code>ï¼šè·å–å¼•ç”¨äº†æŒ‡å®šèŠ‚ç‚¹çš„æ‰€æœ‰æ¶ˆæ¯èŠ‚ç‚¹</li>
</ul>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>åå‘ç´¢å¼•</strong>ï¼šå¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦éœ€è¦è¢«æ‹¦æˆªï¼ˆé¿å…ä¸å¿…è¦çš„æ‹¦æˆªå¼€é”€ï¼‰</li>
<li><strong>æ— çŠ¶æ€</strong>ï¼šåªå­˜å‚¨è®¢é˜…å…³ç³»ï¼Œä¸å­˜å‚¨è¿è¡Œæ—¶æ•°æ®</li>
</ul>
<h3 data-id="heading-8">3. åè°ƒå™¨ï¼ˆCoordinatorï¼‰ï¼šè¿è¡Œæ—¶çš„çŠ¶æ€ç®¡ç†</h3>
<p>åè°ƒå™¨åœ¨è¿è¡Œæ—¶åˆ›å»ºï¼Œç»´æŠ¤ä»¥ä¸‹çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageStreamCoordinator</span>:
    <span class="hljs-comment"># æ´»è·ƒä¼šè¯ï¼š{message_node_id: ResponseSession}</span>
    <span class="hljs-comment"># æ¯ä¸ªæ¶ˆæ¯èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªä¼šè¯ï¼Œç»´æŠ¤å½“å‰å¤„ç†çš„æ®µç´¢å¼•</span>
    _active_sessions: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, ResponseSession]
    
    <span class="hljs-comment"># æµå¼ç¼“å†²åŒºï¼š{(node_id, variable): StreamBuffer}</span>
    <span class="hljs-comment"># ç¼“å­˜ä¸Šæ¸¸èŠ‚ç‚¹çš„æµå¼è¾“å‡ºå—</span>
    _stream_buffers: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>], StreamBuffer]
    
    <span class="hljs-comment"># å·²å®ŒæˆèŠ‚ç‚¹ï¼š{node_id}</span>
    _completed_nodes: <span class="hljs-built_in">set</span>[<span class="hljs-built_in">str</span>]
</code></pre>
<p><strong>æ ¸å¿ƒæ•°æ®ç»“æ„ï¼š</strong></p>
<h4 data-id="heading-9">ResponseSessionï¼ˆå“åº”ä¼šè¯ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseSession</span>:
    node_id: <span class="hljs-built_in">str</span>              <span class="hljs-comment"># æ¶ˆæ¯èŠ‚ç‚¹ID</span>
    rule: InterceptionRule    <span class="hljs-comment"># æ‹¦æˆªè§„åˆ™ï¼ˆåŒ…å«æ®µåºåˆ—ï¼‰</span>
    index: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span>            <span class="hljs-comment"># å½“å‰å¤„ç†çš„æ®µç´¢å¼•</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">current_segment</span>(<span class="hljs-params">self</span>) -&gt; Segment | <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""è·å–å½“å‰æ®µ"""</span>
        <span class="hljs-keyword">return</span> self.rule.segments[self.index]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">advance</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ¨è¿›åˆ°ä¸‹ä¸€æ®µ"""</span>
        self.index += <span class="hljs-number">1</span>
</code></pre>
<p>ä¼šè¯ç»´æŠ¤äº†<strong>å½“å‰å¤„ç†è¿›åº¦</strong>ï¼Œç¡®ä¿æŒ‰é¡ºåºæ¨è¿›ã€‚</p>
<h4 data-id="heading-10">StreamBufferï¼ˆæµå¼ç¼“å†²åŒºï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamBuffer</span>:
    chunks: deque[StreamChunk]  <span class="hljs-comment"># å¾…å¤„ç†çš„å—é˜Ÿåˆ—</span>
    is_closed: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>      <span class="hljs-comment"># æµæ˜¯å¦å·²å…³é—­</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">append</span>(<span class="hljs-params">self, chunk: StreamChunk</span>):
        <span class="hljs-string">"""æ·»åŠ æ•°æ®å—"""</span>
        self.chunks.append(chunk)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self</span>) -&gt; StreamChunk | <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""å¼¹å‡ºæ•°æ®å—ï¼ˆFIFOï¼‰"""</span>
        <span class="hljs-keyword">return</span> self.chunks.popleft() <span class="hljs-keyword">if</span> self.chunks <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
</code></pre>
<p>ç¼“å†²åŒºé‡‡ç”¨<strong>FIFOé˜Ÿåˆ—</strong>ï¼Œä¿è¯æµå¼æ•°æ®çš„é¡ºåºã€‚</p>
<hr/>
<h2 data-id="heading-11">æ‰§è¡Œæµç¨‹</h2>
<h3 data-id="heading-12">é˜¶æ®µ0ï¼šèŠ‚ç‚¹å¼€å§‹æ‰§è¡Œï¼ˆæ”¯æŒå¾ªç¯ï¼‰</h3>
<p>åœ¨èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œæ—¶ï¼ˆ<code>BaseNode.__call__</code> å¼€å¤´ï¼‰ï¼Œä¼šè°ƒç”¨ <code>on_node_start()</code> è¿›è¡ŒçŠ¶æ€é‡ç½®ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># BaseNode.__call__ å¼€å¤´</span>
<span class="hljs-keyword">await</span> self.on_node_start()  <span class="hljs-comment"># é€šçŸ¥åè°ƒå™¨èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œ</span>

<span class="hljs-comment"># åè°ƒå™¨å¤„ç†</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_node_start</span>(<span class="hljs-params">self, node_id: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-comment"># é‡ç½®è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰bufferï¼Œæ¸…ç©ºä¸Šä¸€è½®æ‰§è¡Œçš„æ•°æ®</span>
    keys_to_reset = [key <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> self._stream_buffers.keys() <span class="hljs-keyword">if</span> key[<span class="hljs-number">0</span>] == node_id]
    <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> keys_to_reset:
        self._stream_buffers[key] = StreamBuffer()
    
    <span class="hljs-comment"># ä»å®ŒæˆèŠ‚ç‚¹é›†åˆä¸­ç§»é™¤ï¼ˆå…è®¸é‡æ–°æµå¼è¾“å‡ºï¼‰</span>
    self._completed_nodes.discard(node_id)
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>å¾ªç¯æ”¯æŒ</strong>ï¼šåœ¨å¾ªç¯å·¥ä½œæµä¸­ï¼ŒåŒä¸€èŠ‚ç‚¹å¯èƒ½è¢«å¤šæ¬¡æ‰§è¡Œã€‚æ¯æ¬¡æ‰§è¡Œå¼€å§‹æ—¶é‡ç½® bufferï¼Œç¡®ä¿ä¸ä¼šä½¿ç”¨ä¸Šä¸€è½®çš„æ•°æ®</li>
<li><strong>çŠ¶æ€æ¸…ç†</strong>ï¼šä»å®ŒæˆèŠ‚ç‚¹é›†åˆä¸­ç§»é™¤ï¼Œå…è®¸èŠ‚ç‚¹é‡æ–°è¿›è¡Œæµå¼è¾“å‡º</li>
<li><strong>ä»…é‡ç½®è¢«å¼•ç”¨çš„èŠ‚ç‚¹</strong>ï¼šåªæœ‰è¢«æ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨çš„èŠ‚ç‚¹æ‰ä¼šè¢«é‡ç½®ï¼Œé¿å…ä¸å¿…è¦çš„å¼€é”€</li>
</ul>
<h3 data-id="heading-13">é˜¶æ®µ1ï¼šæ‹¦æˆªæµå¼è¾“å‡º</h3>
<p>å½“ LLM èŠ‚ç‚¹äº§ç”Ÿæµå¼è¾“å‡ºæ—¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># LLM èŠ‚ç‚¹å†…éƒ¨</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> llm.astream(prompt):
    <span class="hljs-comment"># é€šçŸ¥åè°ƒå™¨</span>
    <span class="hljs-keyword">await</span> coordinator.on_stream_chunk(
        node_id=<span class="hljs-string">"llm_1"</span>,
        variable=<span class="hljs-string">"text"</span>,
        chunk=chunk,
        is_final=<span class="hljs-literal">False</span>
    )
</code></pre>
<p>åè°ƒå™¨çš„å¤„ç†é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_stream_chunk</span>(<span class="hljs-params">self, node_id, variable, chunk, is_final</span>):
    <span class="hljs-comment"># 1. æ£€æŸ¥æ˜¯å¦è¢«ä»»ä½•æ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self._registry.is_intercepted(node_id):
        <span class="hljs-keyword">return</span>  <span class="hljs-comment"># æœªè¢«å¼•ç”¨ï¼Œå¿½ç•¥</span>
    
    <span class="hljs-comment"># 2. æ‹¦æˆªåˆ°ç¼“å†²åŒº</span>
    selector = (node_id, variable)
    stream_chunk = StreamChunk(selector=selector, chunk=chunk, is_final=is_final)
    self._stream_buffers[selector].append(stream_chunk)
    
    <span class="hljs-keyword">if</span> is_final:
        self._stream_buffers[selector].close()
    
    <span class="hljs-comment"># 3. æ£€æŸ¥æ˜¯å¦å¯ä»¥å¯åŠ¨ä¼šè¯</span>
    <span class="hljs-keyword">await</span> self._check_and_start_sessions(node_id)
    
    <span class="hljs-comment"># 4. å°è¯•æ¨é€</span>
    <span class="hljs-keyword">await</span> self._try_push_streams()
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><strong>å¿«é€Ÿè¿‡æ»¤</strong>ï¼šé€šè¿‡åå‘ç´¢å¼•å¿«é€Ÿåˆ¤æ–­æ˜¯å¦éœ€è¦æ‹¦æˆª</li>
<li><strong>ç¼“å†²æœºåˆ¶</strong>ï¼šæµå¼æ•°æ®å…ˆè¿›å…¥ç¼“å†²åŒºï¼Œç­‰å¾…æ¨é€æ—¶æœº</li>
<li><strong>è§¦å‘æ£€æŸ¥</strong>ï¼šæ¯æ¬¡æ”¶åˆ°æ•°æ®å—åï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥å¯åŠ¨æˆ–ç»§ç»­æ¨é€</li>
</ul>
<h3 data-id="heading-14">é˜¶æ®µ2ï¼šå¯åŠ¨ä¼šè¯</h3>
<p>ä¼šè¯å¯åŠ¨çš„æ—¶æœºï¼š<strong>å½“æ¶ˆæ¯èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªä¾èµ–èŠ‚ç‚¹å‡†å¤‡å¥½æ—¶</strong>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_and_start_sessions</span>(<span class="hljs-params">self, node_id</span>):
    <span class="hljs-keyword">for</span> message_node_id, rule <span class="hljs-keyword">in</span> self._registry.get_all_rules().items():
        <span class="hljs-keyword">if</span> message_node_id <span class="hljs-keyword">in</span> self._active_sessions:
            <span class="hljs-keyword">continue</span>  <span class="hljs-comment"># å·²å¯åŠ¨</span>
        
        <span class="hljs-comment"># æ‰¾åˆ°ç¬¬ä¸€ä¸ªå˜é‡æ®µ</span>
        first_var_segment = <span class="hljs-built_in">next</span>(
            (seg <span class="hljs-keyword">for</span> seg <span class="hljs-keyword">in</span> rule.segments <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(seg, VariableSegment)),
            <span class="hljs-literal">None</span>
        )
        
        <span class="hljs-keyword">if</span> first_var_segment <span class="hljs-keyword">and</span> first_var_segment.node_id == node_id:
            selector = (first_var_segment.node_id, first_var_segment.node_variable)
            buffer = self._stream_buffers.get(selector)
            
            <span class="hljs-comment"># æ£€æŸ¥æ•°æ®æ˜¯å¦å‡†å¤‡å¥½</span>
            has_stream_data = buffer <span class="hljs-keyword">and</span> (buffer.has_unread() <span class="hljs-keyword">or</span> buffer.is_closed)
            has_scalar_data = self._get_variable_value(...) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>
            
            <span class="hljs-keyword">if</span> has_stream_data <span class="hljs-keyword">or</span> has_scalar_data:
                <span class="hljs-comment"># å¯åŠ¨ä¼šè¯</span>
                session = ResponseSession(node_id=message_node_id, rule=rule)
                self._active_sessions[message_node_id] = session
                
                <span class="hljs-comment"># ç«‹å³å°è¯•æ¨é€</span>
                <span class="hljs-keyword">await</span> self._try_push_streams()
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>å»¶è¿Ÿå¯åŠ¨</strong>ï¼šåªæœ‰ç¬¬ä¸€ä¸ªä¾èµ–èŠ‚ç‚¹å‡†å¤‡å¥½æ—¶æ‰å¯åŠ¨ï¼Œé¿å…è¿‡æ—©æ¨é€</li>
<li><strong>æ”¯æŒæµå¼å’Œæ ‡é‡</strong>ï¼šæµå¼æ•°æ®ä»ç¼“å†²åŒºè¯»å–ï¼Œæ ‡é‡æ•°æ®ä»èŠ‚ç‚¹è¾“å‡ºä¸­è¯»å–</li>
</ul>
<h3 data-id="heading-15">é˜¶æ®µ3ï¼šæŒ‰åºæ¨é€</h3>
<p>æ¨é€é€»è¾‘çš„æ ¸å¿ƒæ˜¯<strong>æŒ‰æ®µé¡ºåºå¤„ç†ï¼Œé‡åˆ°æœªå°±ç»ªçš„æ•°æ®æ—¶åœæ­¢</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_try_push_streams</span>(<span class="hljs-params">self</span>):
    <span class="hljs-keyword">for</span> session_id, session <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>(self._active_sessions.items()):
        <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> session.is_complete():
            segment = session.current_segment()
            
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(segment, TextSegment):
                <span class="hljs-comment"># æ–‡æœ¬æ®µï¼šç›´æ¥æ¨é€</span>
                <span class="hljs-keyword">await</span> stream_writer({
                    <span class="hljs-string">"event_type"</span>: <span class="hljs-string">"MESSAGE_CHUNK"</span>,
                    <span class="hljs-string">"chunk"</span>: segment.text,
                    <span class="hljs-string">"is_final"</span>: <span class="hljs-literal">False</span>
                })
                session.advance()  <span class="hljs-comment"># æ¨è¿›åˆ°ä¸‹ä¸€æ®µ</span>
            
            <span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(segment, VariableSegment):
                selector = (segment.node_id, segment.node_variable)
                buffer = self._stream_buffers.get(selector)
                
                <span class="hljs-keyword">if</span> buffer <span class="hljs-keyword">and</span> buffer.has_unread():
                    <span class="hljs-comment"># æµå¼æ•°æ®ï¼šä»ç¼“å†²åŒºè¯»å–å¹¶æ¨é€</span>
                    <span class="hljs-keyword">while</span> buffer.has_unread():
                        chunk = buffer.pop()
                        <span class="hljs-keyword">await</span> stream_writer({
                            <span class="hljs-string">"event_type"</span>: <span class="hljs-string">"MESSAGE_CHUNK"</span>,
                            <span class="hljs-string">"chunk"</span>: chunk.chunk,
                            <span class="hljs-string">"is_final"</span>: <span class="hljs-literal">False</span>
                        })
                    
                    <span class="hljs-comment"># å¦‚æœæµå·²å…³é—­ï¼Œæ¨è¿›åˆ°ä¸‹ä¸€æ®µ</span>
                    <span class="hljs-keyword">if</span> buffer.is_closed:
                        session.advance()
                    <span class="hljs-keyword">else</span>:
                        <span class="hljs-keyword">break</span>  <span class="hljs-comment"># ç­‰å¾…æ›´å¤šæ•°æ®</span>
                
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-comment"># å°è¯•ä»èŠ‚ç‚¹è¾“å‡ºè·å–æ ‡é‡å€¼</span>
                    value = self._get_variable_value(...)
                    <span class="hljs-keyword">if</span> value <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
                        <span class="hljs-comment"># æ ‡é‡å€¼ï¼šç›´æ¥æ¨é€</span>
                        <span class="hljs-keyword">await</span> stream_writer({
                            <span class="hljs-string">"event_type"</span>: <span class="hljs-string">"MESSAGE_CHUNK"</span>,
                            <span class="hljs-string">"chunk"</span>: <span class="hljs-built_in">str</span>(value),
                            <span class="hljs-string">"is_final"</span>: <span class="hljs-literal">False</span>
                        })
                        session.advance()
                    <span class="hljs-keyword">else</span>:
                        <span class="hljs-comment"># æ•°æ®æœªå‡†å¤‡å¥½ï¼Œåœæ­¢æ¨é€</span>
                        <span class="hljs-keyword">break</span>
        
        <span class="hljs-comment"># ä¼šè¯å®Œæˆ</span>
        <span class="hljs-keyword">if</span> session.is_complete():
            <span class="hljs-keyword">await</span> stream_writer({
                <span class="hljs-string">"event_type"</span>: <span class="hljs-string">"MESSAGE_CHUNK"</span>,
                <span class="hljs-string">"chunk"</span>: <span class="hljs-string">""</span>,
                <span class="hljs-string">"is_final"</span>: <span class="hljs-literal">True</span>
            })
            <span class="hljs-keyword">del</span> self._active_sessions[session_id]
</code></pre>
<p><strong>å…³é”®é€»è¾‘ï¼š</strong></p>
<ol>
<li><strong>æ–‡æœ¬æ®µç«‹å³æ¨é€</strong>ï¼šä¸ä¾èµ–ä»»ä½•æ•°æ®ï¼Œç›´æ¥æ¨é€å¹¶æ¨è¿›</li>
<li><strong>æµå¼æ•°æ®å®æ—¶è½¬å‘</strong>ï¼šä»ç¼“å†²åŒºè¯»å–æ‰€æœ‰å¯ç”¨æ•°æ®ï¼Œæµå…³é—­åæ¨è¿›</li>
<li><strong>æ ‡é‡æ•°æ®ç­‰å¾…</strong>ï¼šå¦‚æœç¼“å†²åŒºä¸ºç©ºï¼Œå°è¯•ä»èŠ‚ç‚¹è¾“å‡ºè¯»å–ï¼Œæœªå°±ç»ªæ—¶åœæ­¢</li>
<li><strong>é˜»å¡æœºåˆ¶</strong>ï¼šé‡åˆ°æœªå°±ç»ªçš„æ•°æ®æ—¶ï¼Œ<code>break</code> è·³å‡ºå¾ªç¯ï¼Œç­‰å¾…ä¸‹æ¬¡è§¦å‘</li>
</ol>
<h3 data-id="heading-16">é˜¶æ®µ4ï¼šèŠ‚ç‚¹å®Œæˆé€šçŸ¥</h3>
<p>å½“æ ‡é‡èŠ‚ç‚¹ï¼ˆå¦‚ä»£ç æ‰§è¡ŒèŠ‚ç‚¹ï¼‰å®Œæˆæ—¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_node_completed</span>(<span class="hljs-params">self, node_id, outputs</span>):
    <span class="hljs-comment"># è®°å½•èŠ‚ç‚¹å®Œæˆ</span>
    self._completed_nodes.add(node_id)
    
    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å¯ä»¥å¯åŠ¨ä¼šè¯</span>
    <span class="hljs-keyword">await</span> self._check_and_start_sessions(node_id)
    
    <span class="hljs-comment"># å°è¯•æ¨é€ï¼ˆå¯èƒ½æœ‰æ–°çš„æ ‡é‡æ•°æ®å¯ç”¨ï¼‰</span>
    <span class="hljs-keyword">await</span> self._try_push_streams()
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>ç»Ÿä¸€å…¥å£</strong>ï¼šæµå¼èŠ‚ç‚¹å’Œæ ‡é‡èŠ‚ç‚¹éƒ½é€šè¿‡åè°ƒå™¨é€šçŸ¥</li>
<li><strong>è§¦å‘æ¨é€</strong>ï¼šèŠ‚ç‚¹å®Œæˆå¯èƒ½è§¦å‘æ–°çš„æ¨é€ï¼ˆå¦‚æœæŸä¸ªä¼šè¯æ­£åœ¨ç­‰å¾…è¯¥èŠ‚ç‚¹çš„æ•°æ®ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-17">å®Œæ•´æ‰§è¡Œæ—¶åº</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´ä¾‹å­ç†è§£æ•´ä¸ªæµç¨‹ï¼š</p>
<h3 data-id="heading-18">åœºæ™¯é…ç½®</h3>
<pre><code class="hljs language-swift" lang="swift">æ¨¡æ¿: <span class="hljs-string">"AIåˆ†æï¼š{llm_output}<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>è®¡ç®—ç»“æœï¼š{code_result}"</span>
å¼•ç”¨å…³ç³»:
  <span class="hljs-operator">-</span> llm_output <span class="hljs-operator">â†’</span> llm_1.text (æµå¼)
  <span class="hljs-operator">-</span> code_result <span class="hljs-operator">â†’</span> code_1.result (æ ‡é‡)
</code></pre>
<h3 data-id="heading-19">æ‰§è¡Œæ—¶åºå›¾</h3>
<pre><code class="hljs language-swift" lang="swift">æ—¶é—´ <span class="hljs-operator">â”‚</span> <span class="hljs-type">LLMèŠ‚ç‚¹</span>          <span class="hljs-operator">â”‚</span> ä»£ç èŠ‚ç‚¹        <span class="hljs-operator">â”‚</span> åè°ƒå™¨æ“ä½œ                    <span class="hljs-operator">â”‚</span> å‰ç«¯æ¥æ”¶
<span class="hljs-operator">â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-type">T0</span>   <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> åˆå§‹åŒ–                         <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span>                               <span class="hljs-operator">â”‚</span>
<span class="hljs-type">T1</span>   <span class="hljs-operator">â”‚</span> è¾“å‡º <span class="hljs-string">"AI"</span>        <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">1</span>. æ‹¦æˆªåˆ°ç¼“å†²åŒº                <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">2</span>. æ£€æŸ¥ä¾èµ–ï¼ˆç¬¬ä¸€ä¸ªæ˜¯llm_1ï¼‰  <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">3</span>. å¯åŠ¨ä¼šè¯                   <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">4</span>. æ¨é€ <span class="hljs-type">TextSegment</span>: <span class="hljs-string">"AIåˆ†æï¼š"</span><span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼š"</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">5</span>. æ¨é€ <span class="hljs-type">VariableSegment</span>: <span class="hljs-string">"AI"</span> <span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼šAI"</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span>                               <span class="hljs-operator">â”‚</span>
<span class="hljs-type">T2</span>   <span class="hljs-operator">â”‚</span> è¾“å‡º <span class="hljs-string">" thinks"</span>   <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">1</span>. æ‹¦æˆªåˆ°ç¼“å†²åŒº                <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">2</span>. æ¨é€: <span class="hljs-string">" thinks"</span>            <span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼šAI thinks"</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span>                               <span class="hljs-operator">â”‚</span>
<span class="hljs-type">T3</span>   <span class="hljs-operator">â”‚</span> è¾“å‡º <span class="hljs-string">"..."</span>       <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">1</span>. æ‹¦æˆªåˆ°ç¼“å†²åŒº                <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">2</span>. æ¨é€: <span class="hljs-string">"..."</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼šAI thinks..."</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span>                               <span class="hljs-operator">â”‚</span>
<span class="hljs-type">T4</span>   <span class="hljs-operator">â”‚</span> æµå…³é—­           <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">1</span>. æ ‡è®°æµå…³é—­                  <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">2</span>. æ¨è¿›åˆ°ä¸‹ä¸€æ®µ                <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">3</span>. æ¨é€ <span class="hljs-type">TextSegment</span>: <span class="hljs-string">"<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>è®¡ç®—ç»“æœï¼š"</span><span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼šAI thinks...<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>è®¡ç®—ç»“æœï¼š"</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">4</span>. æ£€æŸ¥ code_resultï¼ˆæœªå°±ç»ªï¼‰  <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">5</span>. åœæ­¢æ¨é€ï¼Œç­‰å¾…              <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span>                               <span class="hljs-operator">â”‚</span>
<span class="hljs-type">T5</span>   <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span> å®Œæˆï¼Œè¿”å›<span class="hljs-number">42</span>   <span class="hljs-operator">â”‚</span> <span class="hljs-number">1</span>. è®°å½•èŠ‚ç‚¹å®Œæˆ                <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">2</span>. å°è¯•æ¨é€                    <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">3</span>. ä»è¾“å‡ºè·å– code_1.result<span class="hljs-operator">=</span><span class="hljs-number">42</span> <span class="hljs-operator">â”‚</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">4</span>. æ¨é€: <span class="hljs-string">"42"</span>                  <span class="hljs-operator">â”‚</span> <span class="hljs-string">"AIåˆ†æï¼šAI thinks...<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>è®¡ç®—ç»“æœï¼š42"</span>
     <span class="hljs-operator">â”‚</span>                  <span class="hljs-operator">â”‚</span>                <span class="hljs-operator">â”‚</span> <span class="hljs-number">5</span>. ä¼šè¯å®Œæˆï¼Œå‘é€ is_final<span class="hljs-operator">=</span><span class="hljs-type">True</span><span class="hljs-operator">â”‚</span>
</code></pre>
<hr/>
<h2 data-id="heading-20">è®¾è®¡ä¼˜åŠ¿</h2>
<h3 data-id="heading-21">1. è§£è€¦è®¾è®¡</h3>
<ul>
<li><strong>å˜é‡åä¸èŠ‚ç‚¹IDè§£è€¦</strong>ï¼šæ¶ˆæ¯èŠ‚ç‚¹ä½¿ç”¨è¯­ä¹‰åŒ–çš„å˜é‡åï¼ˆå¦‚ <code>llm_output</code>ï¼‰ï¼Œé€šè¿‡ <code>reference_metadata</code> æ˜ å°„åˆ°å®é™…èŠ‚ç‚¹ID</li>
<li><strong>å‰ç«¯æ— éœ€çŸ¥é“èŠ‚ç‚¹ç»†èŠ‚</strong>ï¼šå‰ç«¯åªæ¥æ”¶æ¶ˆæ¯èŠ‚ç‚¹çš„è¾“å‡ºï¼Œä¸éœ€è¦çŸ¥é“å…·ä½“å¼•ç”¨äº†å“ªäº›èŠ‚ç‚¹</li>
</ul>
<h3 data-id="heading-22">2. æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li><strong>å¿«é€Ÿè¿‡æ»¤</strong>ï¼šé€šè¿‡åå‘ç´¢å¼•å¿«é€Ÿåˆ¤æ–­æ˜¯å¦éœ€è¦æ‹¦æˆªï¼Œé¿å…ä¸å¿…è¦çš„å¼€é”€</li>
<li><strong>æŒ‰éœ€å¯åŠ¨</strong>ï¼šåªæœ‰ç¬¬ä¸€ä¸ªä¾èµ–èŠ‚ç‚¹å‡†å¤‡å¥½æ—¶æ‰å¯åŠ¨ä¼šè¯ï¼Œé¿å…è¿‡æ—©æ¨é€</li>
</ul>
<h3 data-id="heading-23">3. çµæ´»æ€§</h3>
<ul>
<li><strong>æ”¯æŒæ··åˆæ•°æ®æº</strong>ï¼šåŒæ—¶å¤„ç†æµå¼æ•°æ®å’Œæ ‡é‡æ•°æ®</li>
<li><strong>æ”¯æŒæ·±å±‚å±æ€§è®¿é—®</strong>ï¼šå˜é‡è·¯å¾„æ”¯æŒ <code>response.data.user.name</code> ç­‰æ·±å±‚è®¿é—®</li>
<li><strong>æ”¯æŒå¤šæ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨åŒä¸€èŠ‚ç‚¹</strong>ï¼šä¸€ä¸ªèŠ‚ç‚¹çš„è¾“å‡ºå¯ä»¥è¢«å¤šä¸ªæ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨</li>
</ul>
<h3 data-id="heading-24">4. å¯ç»´æŠ¤æ€§</h3>
<ul>
<li><strong>ç¼–è¯‘æ—¶-è¿è¡Œæ—¶åˆ†ç¦»</strong>ï¼šèŒè´£æ¸…æ™°ï¼Œæ˜“äºæµ‹è¯•å’Œç»´æŠ¤</li>
<li><strong>çŠ¶æ€åºåˆ—åŒ–æ”¯æŒ</strong>ï¼šæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼ˆåºåˆ—åŒ–åè°ƒå™¨çŠ¶æ€ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-25">å…³é”®è®¾è®¡æ¨¡å¼</h2>
<h3 data-id="heading-26">1. æ‹¦æˆªæ¨¡å¼ï¼ˆInterception Patternï¼‰</h3>
<p>ä¸Šæ¸¸èŠ‚ç‚¹ä¸ç›´æ¥æ¨é€ï¼Œè€Œæ˜¯é€šçŸ¥åè°ƒå™¨ï¼Œç”±åè°ƒå™¨å†³å®šä½•æ—¶ã€å¦‚ä½•æ¨é€ã€‚è¿™å®ç°äº†<strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼š</p>
<ul>
<li><strong>ä¸Šæ¸¸èŠ‚ç‚¹</strong>ï¼šä¸“æ³¨äºç”Ÿæˆæ•°æ®</li>
<li><strong>åè°ƒå™¨</strong>ï¼šä¸“æ³¨äºç»„è£…å’Œæ¨é€é€»è¾‘</li>
</ul>
<h3 data-id="heading-27">2. ä¼šè¯æ¨¡å¼ï¼ˆSession Patternï¼‰</h3>
<p>æ¯ä¸ªæ¶ˆæ¯èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªä¼šè¯ï¼Œç»´æŠ¤å¤„ç†è¿›åº¦ã€‚è¿™å®ç°äº†<strong>çŠ¶æ€éš”ç¦»</strong>ï¼š</p>
<ul>
<li>å¤šä¸ªæ¶ˆæ¯èŠ‚ç‚¹å¯ä»¥å¹¶è¡Œå¤„ç†</li>
<li>æ¯ä¸ªä¼šè¯ç‹¬ç«‹æ¨è¿›ï¼Œäº’ä¸å¹²æ‰°</li>
</ul>
<h3 data-id="heading-28">3. ç¼“å†²åŒºæ¨¡å¼ï¼ˆBuffer Patternï¼‰</h3>
<p>æµå¼æ•°æ®å…ˆè¿›å…¥ç¼“å†²åŒºï¼Œç­‰å¾…æ¨é€æ—¶æœºã€‚è¿™å®ç°äº†<strong>å¼‚æ­¥è§£è€¦</strong>ï¼š</p>
<ul>
<li>æ•°æ®ç”Ÿæˆå’Œæ•°æ®æ¶ˆè´¹è§£è€¦</li>
<li>æ”¯æŒèƒŒå‹ï¼ˆbackpressureï¼‰æ§åˆ¶</li>
</ul>
<h3 data-id="heading-29">4. çŠ¶æ€æœºæ¨¡å¼ï¼ˆState Machine Patternï¼‰</h3>
<p>ä¼šè¯é€šè¿‡æ®µç´¢å¼•æ¨è¿›ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">çŠ¶æ€0: å¤„ç† TextSegment<span class="hljs-section">[0]</span>
  â†“
çŠ¶æ€1: å¤„ç† VariableSegment<span class="hljs-section">[1]</span>ï¼ˆç­‰å¾…æ•°æ®ï¼‰
  â†“
çŠ¶æ€2: å¤„ç† TextSegment<span class="hljs-section">[2]</span>
  â†“
çŠ¶æ€3: å¤„ç† VariableSegment<span class="hljs-section">[3]</span>ï¼ˆç­‰å¾…æ•°æ®ï¼‰
  â†“
å®Œæˆ
</code></pre>
<hr/>
<h2 data-id="heading-30">æ‰©å±•æ€è€ƒ</h2>
<h3 data-id="heading-31">1. å¦‚ä½•æ”¯æŒå¾ªç¯æ‰§è¡Œï¼Ÿ</h3>
<p>åœ¨å·¥ä½œæµä¸­ï¼Œå¯èƒ½å­˜åœ¨å¾ªç¯ç»“æ„ï¼ŒåŒä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½è¢«å¤šæ¬¡æ‰§è¡Œã€‚ä¸ºäº†æ”¯æŒè¿™ç§æƒ…å†µï¼Œåè°ƒå™¨åœ¨èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œæ—¶ä¼šè¿›è¡ŒçŠ¶æ€é‡ç½®ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_node_start</span>(<span class="hljs-params">self, node_id: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œæ—¶è°ƒç”¨ï¼ˆåœ¨BaseNode.__call__å¼€å¤´è°ƒç”¨ï¼‰"""</span>
    <span class="hljs-comment"># é‡ç½®è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰bufferï¼Œæ¸…ç©ºä¸Šä¸€è½®æ‰§è¡Œçš„æ•°æ®</span>
    keys_to_reset = [key <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> self._stream_buffers.keys() <span class="hljs-keyword">if</span> key[<span class="hljs-number">0</span>] == node_id]
    <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> keys_to_reset:
        self._stream_buffers[key] = StreamBuffer()
    
    <span class="hljs-comment"># ä»å®ŒæˆèŠ‚ç‚¹é›†åˆä¸­ç§»é™¤ï¼ˆå…è®¸é‡æ–°æµå¼è¾“å‡ºï¼‰</span>
    self._completed_nodes.discard(node_id)
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>èŠ‚ç‚¹çº§é‡ç½®</strong>ï¼šæ¯æ¬¡èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œæ—¶ï¼Œé‡ç½®è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰ bufferï¼Œç¡®ä¿ä¸ä¼šä½¿ç”¨ä¸Šä¸€è½®çš„æ•°æ®</li>
<li><strong>çŠ¶æ€æ¸…ç†</strong>ï¼šä»å®ŒæˆèŠ‚ç‚¹é›†åˆä¸­ç§»é™¤ï¼Œå…è®¸èŠ‚ç‚¹é‡æ–°è¿›è¡Œæµå¼è¾“å‡º</li>
<li><strong>ä¼šè¯ä¿æŒ</strong>ï¼šæ¶ˆæ¯èŠ‚ç‚¹çš„ä¼šè¯çŠ¶æ€ä¿æŒä¸å˜ï¼Œå› ä¸ºæ¶ˆæ¯èŠ‚ç‚¹æœ¬èº«ä¸ä¼šè¢«å¾ªç¯æ‰§è¡Œ</li>
</ul>
<p><strong>ç¤ºä¾‹åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">å·¥ä½œæµ: LLMèŠ‚ç‚¹ â†’ æ¡ä»¶åˆ¤æ–­ â†’ <span class="hljs-section">[å¾ªç¯]</span> â†’ LLMèŠ‚ç‚¹ â†’ æ¶ˆæ¯èŠ‚ç‚¹
</code></pre>
<p>åœ¨å¾ªç¯ä¸­ï¼ŒLLM èŠ‚ç‚¹å¯èƒ½è¢«å¤šæ¬¡æ‰§è¡Œã€‚æ¯æ¬¡æ‰§è¡Œå¼€å§‹æ—¶ï¼Œåè°ƒå™¨ä¼šé‡ç½® LLM èŠ‚ç‚¹çš„ bufferï¼Œç¡®ä¿æ¯æ¬¡å¾ªç¯éƒ½èƒ½æ­£ç¡®è¿›è¡Œæµå¼è¾“å‡ºã€‚</p>
<h3 data-id="heading-32">2. å¦‚ä½•å¤„ç†å¾ªç¯ä¾èµ–ï¼Ÿ</h3>
<p>å¦‚æœæ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨äº†å¤šä¸ªèŠ‚ç‚¹ï¼Œä¸”è¿™äº›èŠ‚ç‚¹ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œåè°ƒå™¨ä¼šè‡ªç„¶å¤„ç†ï¼š</p>
<ul>
<li>æŒ‰æ¨¡æ¿é¡ºåºæ¨è¿›ï¼Œé‡åˆ°æœªå°±ç»ªçš„æ•°æ®æ—¶åœæ­¢</li>
<li>èŠ‚ç‚¹å®Œæˆåè§¦å‘æ£€æŸ¥ï¼Œç»§ç»­æ¨è¿›</li>
</ul>
<h3 data-id="heading-33">3. å¦‚ä½•å¤„ç†é”™è¯¯ï¼Ÿ</h3>
<p>å¦‚æœä¸Šæ¸¸èŠ‚ç‚¹æ‰§è¡Œå¤±è´¥ï¼š</p>
<ul>
<li>åè°ƒå™¨å¯ä»¥ä»èŠ‚ç‚¹è¾“å‡ºä¸­è¯»å–é”™è¯¯ä¿¡æ¯</li>
<li>æˆ–è€…ç­‰å¾…è¶…æ—¶åæ¨é€é”™è¯¯æç¤º</li>
</ul>
<h3 data-id="heading-34">4. å¦‚ä½•æ”¯æŒæ›´å¤æ‚çš„æ¨¡æ¿è¯­æ³•ï¼Ÿ</h3>
<p>å½“å‰æ–¹æ¡ˆæ”¯æŒç®€å•çš„å˜é‡æ›¿æ¢ã€‚å¦‚æœéœ€è¦æ”¯æŒæ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>æ‰©å±•æ¨¡æ¿è§£æå™¨ï¼Œç”Ÿæˆæ›´å¤æ‚çš„æ®µåºåˆ—</li>
<li>åœ¨æ¨é€æ—¶æ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦è·³è¿‡æŸäº›æ®µ</li>
</ul>
<h3 data-id="heading-35">5. å¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿ</h3>
<ul>
<li><strong>æ‰¹é‡æ¨é€</strong>ï¼šå°†å¤šä¸ªå°å—åˆå¹¶ä¸ºä¸€ä¸ªå¤§å—æ¨é€ï¼ˆå‡å°‘ç½‘ç»œå¼€é”€ï¼‰</li>
<li><strong>é¢„å–æœºåˆ¶</strong>ï¼šæå‰å¯åŠ¨ä¼šè¯ï¼Œé¢„å–ç¬¬ä¸€ä¸ªå˜é‡æ®µçš„æ•°æ®</li>
<li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šç¼“å­˜å·²å®Œæˆçš„èŠ‚ç‚¹è¾“å‡ºï¼Œé¿å…é‡å¤æŸ¥è¯¢</li>
</ul>
<hr/>
<h2 data-id="heading-36">æ€»ç»“</h2>
<p>æ¶ˆæ¯èŠ‚ç‚¹æµå¼è¾“å‡ºçš„æ ¸å¿ƒè®¾è®¡æ€è·¯å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š</p>
<ol>
<li><strong>ç¼–è¯‘æ—¶æ„å»ºè®¢é˜…å…³ç³»</strong>ï¼šè§£ææ¨¡æ¿ï¼Œå»ºç«‹å˜é‡åˆ°èŠ‚ç‚¹çš„æ˜ å°„ï¼Œæ³¨å†Œæ‹¦æˆªè§„åˆ™</li>
<li><strong>è¿è¡Œæ—¶æ‹¦æˆªå’Œåè°ƒ</strong>ï¼šä¸Šæ¸¸èŠ‚ç‚¹é€šçŸ¥åè°ƒå™¨ï¼Œåè°ƒå™¨æŒ‰æ¨¡æ¿é¡ºåºç»„è£…å¹¶æ¨é€</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šé€šè¿‡ä¼šè¯ç»´æŠ¤å¤„ç†è¿›åº¦ï¼Œé€šè¿‡ç¼“å†²åŒºç¼“å­˜æµå¼æ•°æ®</li>
<li><strong>é˜»å¡æœºåˆ¶</strong>ï¼šé‡åˆ°æœªå°±ç»ªçš„æ•°æ®æ—¶åœæ­¢æ¨é€ï¼Œç­‰å¾…æ•°æ®å°±ç»ªåç»§ç»­</li>
</ol>
<p>è¿™ç§è®¾è®¡å®ç°äº†<strong>è§£è€¦ã€çµæ´»ã€é«˜æ•ˆ</strong>çš„æµå¼è¾“å‡ºæœºåˆ¶ï¼Œé€‚ç”¨äºå¤æ‚çš„å·¥ä½œæµåœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-37">å®ç°è¦ç‚¹æ€»ç»“</h2>
<p>åŸºäºæœ¬æ–‡çš„è®¾è®¡æ€è·¯ï¼Œå®ç°ä¸€ä¸ªæµå¼è¾“å‡ºç³»ç»Ÿéœ€è¦å…³æ³¨ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¥å£ï¼š</p>
<h3 data-id="heading-38">ç¼–è¯‘æ—¶æ¥å£</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ³¨å†Œæ‹¦æˆªè§„åˆ™ï¼ˆåœ¨æ¶ˆæ¯èŠ‚ç‚¹åˆå§‹åŒ–æ—¶è°ƒç”¨ï¼‰</span>
registry.register_interception(
    message_node_id=<span class="hljs-string">"msg_1"</span>,
    template=<span class="hljs-string">"AIåˆ†æï¼š{llm_output}\n\nè®¡ç®—ç»“æœï¼š{code_result}"</span>,
    variable_to_node_map={
        <span class="hljs-string">"llm_output"</span>: (<span class="hljs-string">"llm_1"</span>, <span class="hljs-string">"text"</span>),
        <span class="hljs-string">"code_result"</span>: (<span class="hljs-string">"code_1"</span>, <span class="hljs-string">"result"</span>)
    }
)
</code></pre>
<h3 data-id="heading-39">è¿è¡Œæ—¶æ¥å£</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œæ—¶ï¼ˆæ”¯æŒå¾ªç¯ï¼‰</span>
<span class="hljs-keyword">await</span> coordinator.on_node_start(node_id=<span class="hljs-string">"llm_1"</span>)

<span class="hljs-comment"># æ‹¦æˆªæµå¼è¾“å‡ºï¼ˆåœ¨æµå¼èŠ‚ç‚¹äº§ç”Ÿæ•°æ®æ—¶è°ƒç”¨ï¼‰</span>
<span class="hljs-keyword">await</span> coordinator.on_stream_chunk(
    node_id=<span class="hljs-string">"llm_1"</span>,
    variable=<span class="hljs-string">"text"</span>,
    chunk=<span class="hljs-string">"AI"</span>,
    is_final=<span class="hljs-literal">False</span>
)

<span class="hljs-comment"># é€šçŸ¥èŠ‚ç‚¹å®Œæˆï¼ˆåœ¨èŠ‚ç‚¹æ‰§è¡Œå®Œæˆæ—¶è°ƒç”¨ï¼‰</span>
<span class="hljs-keyword">await</span> coordinator.on_node_completed(
    node_id=<span class="hljs-string">"code_1"</span>,
    outputs={<span class="hljs-string">"result"</span>: <span class="hljs-number">42</span>}
)
</code></pre>
<h3 data-id="heading-40">æ ¸å¿ƒæ•°æ®ç»“æ„</h3>
<p>ä»¥ä¸‹æ˜¯æ ¸å¿ƒç±»çš„ç®€åŒ–å®ç°ï¼Œå±•ç¤ºäº†å…³é”®çš„æ•°æ®ç»“æ„å’Œé€»è¾‘ï¼š</p>
<h4 data-id="heading-41">1. StreamBufferï¼ˆæµå¼ç¼“å†²åŒºï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque
<span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass, field

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamChunk</span>:
    <span class="hljs-string">"""æµå¼æ•°æ®å—"""</span>
    selector: <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>]  <span class="hljs-comment"># (node_id, variable_name)</span>
    chunk: <span class="hljs-built_in">str</span>                 <span class="hljs-comment"># å¢é‡æ–‡æœ¬</span>
    is_final: <span class="hljs-built_in">bool</span>             <span class="hljs-comment"># æ˜¯å¦ä¸ºæœ€åä¸€å—</span>

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamBuffer</span>:
    <span class="hljs-string">"""æµå¼ç¼“å†²åŒºï¼Œç”¨äºç¼“å­˜ä¸Šæ¸¸èŠ‚ç‚¹çš„æµå¼è¾“å‡º"""</span>
    chunks: deque[StreamChunk] = field(default_factory=deque)  <span class="hljs-comment"># FIFOé˜Ÿåˆ—</span>
    is_closed: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>  <span class="hljs-comment"># æµæ˜¯å¦å·²å…³é—­</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">append</span>(<span class="hljs-params">self, chunk: StreamChunk</span>):
        <span class="hljs-string">"""æ·»åŠ æ•°æ®å—åˆ°é˜Ÿåˆ—å°¾éƒ¨"""</span>
        self.chunks.append(chunk)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self</span>) -&gt; StreamChunk | <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""ä»é˜Ÿåˆ—å¤´éƒ¨å¼¹å‡ºæ•°æ®å—ï¼ˆFIFOï¼‰"""</span>
        <span class="hljs-keyword">return</span> self.chunks.popleft() <span class="hljs-keyword">if</span> self.chunks <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">has_unread</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""æ£€æŸ¥æ˜¯å¦æœ‰æœªè¯»æ•°æ®"""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.chunks) &gt; <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">close</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ ‡è®°æµå·²å…³é—­"""</span>
        self.is_closed = <span class="hljs-literal">True</span>
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>deque</code> å®ç° FIFO é˜Ÿåˆ—ï¼Œä¿è¯æµå¼æ•°æ®çš„é¡ºåº</li>
<li><code>is_closed</code> æ ‡è®°æµæ˜¯å¦ç»“æŸï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦å¯ä»¥æ¨è¿›åˆ°ä¸‹ä¸€æ®µ</li>
</ul>
<h4 data-id="heading-42">2. ResponseSessionï¼ˆå“åº”ä¼šè¯ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Segment</span>:
    <span class="hljs-string">"""æ¨¡æ¿æ®µåŸºç±»"""</span>
    <span class="hljs-keyword">pass</span>

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TextSegment</span>(<span class="hljs-title class_ inherited__">Segment</span>):
    <span class="hljs-string">"""æ–‡æœ¬æ®µï¼šå›ºå®šæ–‡æœ¬ï¼Œå¯ä»¥ç›´æ¥æ¨é€"""</span>
    text: <span class="hljs-built_in">str</span>

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VariableSegment</span>(<span class="hljs-title class_ inherited__">Segment</span>):
    <span class="hljs-string">"""å˜é‡æ®µï¼šéœ€è¦ç­‰å¾…ä¸Šæ¸¸èŠ‚ç‚¹æ•°æ®"""</span>
    variable_name: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># æ¨¡æ¿ä¸­çš„å˜é‡åï¼ˆå¦‚ llm_outputï¼‰</span>
    node_id: <span class="hljs-built_in">str</span>        <span class="hljs-comment"># å®é™…çš„èŠ‚ç‚¹IDï¼ˆå¦‚ llm_1ï¼‰</span>
    node_variable: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># èŠ‚ç‚¹çš„è¾“å‡ºå˜é‡åï¼ˆå¦‚ textï¼‰</span>

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">InterceptionRule</span>:
    <span class="hljs-string">"""æ‹¦æˆªè§„åˆ™ï¼šè®°å½•æ¶ˆæ¯èŠ‚ç‚¹çš„é…ç½®"""</span>
    message_node_id: <span class="hljs-built_in">str</span>
    template: <span class="hljs-built_in">str</span>
    segments: <span class="hljs-built_in">list</span>[Segment]  <span class="hljs-comment"># è§£æåçš„æ¨¡æ¿æ®µåºåˆ—</span>
    variable_to_node_map: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>]]  <span class="hljs-comment"># å˜é‡æ˜ å°„</span>

<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseSession</span>:
    <span class="hljs-string">"""å“åº”ä¼šè¯ï¼šç»´æŠ¤å•ä¸ªæ¶ˆæ¯èŠ‚ç‚¹çš„æµå¼è¾“å‡ºçŠ¶æ€"""</span>
    node_id: <span class="hljs-built_in">str</span>              <span class="hljs-comment"># æ¶ˆæ¯èŠ‚ç‚¹ID</span>
    rule: InterceptionRule    <span class="hljs-comment"># æ‹¦æˆªè§„åˆ™ï¼ˆåŒ…å«æ®µåºåˆ—ï¼‰</span>
    index: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span>            <span class="hljs-comment"># å½“å‰å¤„ç†çš„æ®µç´¢å¼•</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_complete</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""æ£€æŸ¥æ˜¯å¦å¤„ç†å®Œæ‰€æœ‰æ®µ"""</span>
        <span class="hljs-keyword">return</span> self.index &gt;= <span class="hljs-built_in">len</span>(self.rule.segments)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">current_segment</span>(<span class="hljs-params">self</span>) -&gt; Segment | <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""è·å–å½“å‰éœ€è¦å¤„ç†çš„æ®µ"""</span>
        <span class="hljs-keyword">if</span> self.is_complete():
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">return</span> self.rule.segments[self.index]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">advance</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ¨è¿›åˆ°ä¸‹ä¸€æ®µ"""</span>
        self.index += <span class="hljs-number">1</span>
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li>é€šè¿‡ <code>index</code> ç»´æŠ¤å¤„ç†è¿›åº¦ï¼Œç¡®ä¿æŒ‰é¡ºåºæ¨è¿›</li>
<li><code>segments</code> å®šä¹‰äº†æ¨é€çš„ä¸¥æ ¼é¡ºåºï¼ˆæ–‡æœ¬æ®µå’Œå˜é‡æ®µäº¤æ›¿ï¼‰</li>
</ul>
<h4 data-id="heading-43">3. StreamCoordinatorRegistryï¼ˆæ³¨å†Œè¡¨ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict

<span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamCoordinatorRegistry</span>:
    <span class="hljs-string">"""æµå¼è¾“å‡ºåè°ƒå™¨æ³¨å†Œè¡¨ï¼ˆç¼–è¯‘æ—¶ï¼Œæ— çŠ¶æ€ï¼‰"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># æ‹¦æˆªè§„åˆ™ï¼š{message_node_id: InterceptionRule}</span>
        self._interception_rules: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, InterceptionRule] = {}
        
        <span class="hljs-comment"># åå‘ç´¢å¼•ï¼š{node_id: [message_node_ids]}</span>
        <span class="hljs-comment"># ä¾‹å¦‚ï¼š{"llm_1": ["msg_1", "msg_2"]} è¡¨ç¤º llm_1 è¢«ä¸¤ä¸ªæ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨</span>
        self._node_to_messages: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]] = defaultdict(<span class="hljs-built_in">list</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">register_interception</span>(<span class="hljs-params">
        self,
        message_node_id: <span class="hljs-built_in">str</span>,
        template: <span class="hljs-built_in">str</span>,
        variable_to_node_map: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>]]
    </span>):
        <span class="hljs-string">"""
        æ³¨å†Œæ‹¦æˆªè§„åˆ™ï¼ˆåœ¨æ¶ˆæ¯èŠ‚ç‚¹åˆå§‹åŒ–æ—¶è°ƒç”¨ï¼‰
        
        Args:
            message_node_id: æ¶ˆæ¯èŠ‚ç‚¹ID
            template: æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå¦‚ "AI: {llm_output}\\nç»“æœ: {code_result}"
            variable_to_node_map: å˜é‡æ˜ å°„ï¼Œå¦‚ {
                "llm_output": ("llm_1", "text"),
                "code_result": ("code_1", "result")
            }
        """</span>
        <span class="hljs-comment"># è§£ææ¨¡æ¿ä¸ºæ®µåºåˆ—</span>
        segments = self._parse_template(template, variable_to_node_map)
        
        <span class="hljs-comment"># åˆ›å»ºæ‹¦æˆªè§„åˆ™</span>
        rule = InterceptionRule(
            message_node_id=message_node_id,
            template=template,
            segments=segments,
            variable_to_node_map=variable_to_node_map
        )
        
        <span class="hljs-comment"># å­˜å‚¨è§„åˆ™</span>
        self._interception_rules[message_node_id] = rule
        
        <span class="hljs-comment"># å»ºç«‹åå‘ç´¢å¼•ï¼ˆå¿«é€ŸæŸ¥è¯¢å“ªäº›èŠ‚ç‚¹éœ€è¦è¢«æ‹¦æˆªï¼‰</span>
        <span class="hljs-keyword">for</span> node_id <span class="hljs-keyword">in</span> rule.referenced_nodes:
            self._node_to_messages[node_id].append(message_node_id)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_parse_template</span>(<span class="hljs-params">self, template: <span class="hljs-built_in">str</span>, variable_to_node_map: <span class="hljs-built_in">dict</span></span>) -&gt; <span class="hljs-built_in">list</span>[Segment]:
        <span class="hljs-string">"""è§£ææ¨¡æ¿ä¸ºæ®µåºåˆ—"""</span>
        segments: <span class="hljs-built_in">list</span>[Segment] = []
        <span class="hljs-comment"># ... è§£æé€»è¾‘ï¼šæŒ‰å˜é‡ä½ç½®åˆ†å‰²æ¨¡æ¿ï¼Œç”Ÿæˆ TextSegment å’Œ VariableSegment</span>
        <span class="hljs-keyword">return</span> segments
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_intercepted</span>(<span class="hljs-params">self, node_id: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦è¢«ä»»ä½•æ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨ï¼ˆå¿«é€Ÿè¿‡æ»¤ï¼‰"""</span>
        <span class="hljs-keyword">return</span> node_id <span class="hljs-keyword">in</span> self._node_to_messages
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_all_rules</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, InterceptionRule]:
        <span class="hljs-string">"""è·å–æ‰€æœ‰æ‹¦æˆªè§„åˆ™"""</span>
        <span class="hljs-keyword">return</span> self._interception_rules.copy()
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>åå‘ç´¢å¼•</strong>ï¼šå¿«é€Ÿåˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦éœ€è¦è¢«æ‹¦æˆªï¼Œé¿å…ä¸å¿…è¦çš„å¤„ç†</li>
<li><strong>æ— çŠ¶æ€</strong>ï¼šåªå­˜å‚¨è®¢é˜…å…³ç³»ï¼Œä¸å­˜å‚¨è¿è¡Œæ—¶æ•°æ®ï¼Œå¯å¤ç”¨</li>
</ul>
<h4 data-id="heading-44">4. MessageStreamCoordinatorï¼ˆåè°ƒå™¨ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageStreamCoordinator</span>:
    <span class="hljs-string">"""æ¶ˆæ¯æµå¼è¾“å‡ºåè°ƒå™¨ï¼ˆè¿è¡Œæ—¶ï¼Œæœ‰çŠ¶æ€ï¼‰"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, registry: StreamCoordinatorRegistry</span>):
        self._registry = registry
        self._lock = asyncio.Lock()  <span class="hljs-comment"># å¼‚æ­¥é”ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨</span>
        
        <span class="hljs-comment"># æ´»è·ƒä¼šè¯ï¼š{message_node_id: ResponseSession}</span>
        <span class="hljs-comment"># æ¯ä¸ªæ¶ˆæ¯èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªä¼šè¯ï¼Œç»´æŠ¤å¤„ç†è¿›åº¦</span>
        self._active_sessions: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, ResponseSession] = {}
        
        <span class="hljs-comment"># æµå¼ç¼“å†²åŒºï¼š{(node_id, variable): StreamBuffer}</span>
        <span class="hljs-comment"># ç¼“å­˜ä¸Šæ¸¸èŠ‚ç‚¹çš„æµå¼è¾“å‡º</span>
        self._stream_buffers: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>], StreamBuffer] = defaultdict(StreamBuffer)
        
        <span class="hljs-comment"># å·²å®ŒæˆèŠ‚ç‚¹ï¼š{node_id}</span>
        self._completed_nodes: <span class="hljs-built_in">set</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-built_in">set</span>()
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_node_start</span>(<span class="hljs-params">self, node_id: <span class="hljs-built_in">str</span></span>):
        <span class="hljs-string">"""èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œæ—¶è°ƒç”¨ï¼ˆæ”¯æŒå¾ªç¯ï¼‰"""</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> self._lock:
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self._registry.is_intercepted(node_id):
                <span class="hljs-keyword">return</span>  <span class="hljs-comment"># æœªè¢«å¼•ç”¨ï¼Œæ— éœ€å¤„ç†</span>
            
            <span class="hljs-comment"># é‡ç½®è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰bufferï¼ˆæ¸…ç©ºä¸Šä¸€è½®æ‰§è¡Œçš„æ•°æ®ï¼‰</span>
            keys_to_reset = [key <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> self._stream_buffers.keys() <span class="hljs-keyword">if</span> key[<span class="hljs-number">0</span>] == node_id]
            <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> keys_to_reset:
                self._stream_buffers[key] = StreamBuffer()
            
            <span class="hljs-comment"># ä»å®ŒæˆèŠ‚ç‚¹é›†åˆä¸­ç§»é™¤ï¼ˆå…è®¸é‡æ–°æµå¼è¾“å‡ºï¼‰</span>
            self._completed_nodes.discard(node_id)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_stream_chunk</span>(<span class="hljs-params">
        self,
        node_id: <span class="hljs-built_in">str</span>,
        variable: <span class="hljs-built_in">str</span>,
        chunk: <span class="hljs-built_in">str</span>,
        is_final: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>
    </span>):
        <span class="hljs-string">"""å¤„ç†æµå¼æ•°æ®å—ï¼ˆåœ¨æµå¼èŠ‚ç‚¹äº§ç”Ÿæ•°æ®æ—¶è°ƒç”¨ï¼‰"""</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> self._lock:
            <span class="hljs-comment"># å¿«é€Ÿè¿‡æ»¤ï¼šæ£€æŸ¥æ˜¯å¦è¢«ä»»ä½•æ¶ˆæ¯èŠ‚ç‚¹å¼•ç”¨</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self._registry.is_intercepted(node_id):
                <span class="hljs-keyword">return</span>  <span class="hljs-comment"># æœªè¢«å¼•ç”¨ï¼Œå¿½ç•¥</span>
            
            <span class="hljs-comment"># æ‹¦æˆªåˆ°ç¼“å†²åŒº</span>
            selector = (node_id, variable)
            stream_chunk = StreamChunk(selector=selector, chunk=chunk, is_final=is_final)
            self._stream_buffers[selector].append(stream_chunk)
            
            <span class="hljs-keyword">if</span> is_final:
                self._stream_buffers[selector].close()
            
            <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å¯ä»¥å¯åŠ¨ä¼šè¯ï¼Œå¹¶å°è¯•æ¨é€</span>
            <span class="hljs-keyword">await</span> self._check_and_start_sessions(node_id)
            <span class="hljs-keyword">await</span> self._try_push_streams()
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_node_completed</span>(<span class="hljs-params">self, node_id: <span class="hljs-built_in">str</span>, outputs: <span class="hljs-built_in">dict</span></span>):
        <span class="hljs-string">"""å¤„ç†èŠ‚ç‚¹å®Œæˆäº‹ä»¶ï¼ˆåœ¨èŠ‚ç‚¹æ‰§è¡Œå®Œæˆæ—¶è°ƒç”¨ï¼‰"""</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> self._lock:
            <span class="hljs-comment"># è®°å½•èŠ‚ç‚¹å®Œæˆ</span>
            self._completed_nodes.add(node_id)
            
            <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å¯ä»¥å¯åŠ¨ä¼šè¯ï¼Œå¹¶å°è¯•æ¨é€ï¼ˆå¯èƒ½æœ‰æ–°çš„æ ‡é‡æ•°æ®å¯ç”¨ï¼‰</span>
            <span class="hljs-keyword">await</span> self._check_and_start_sessions(node_id)
            <span class="hljs-keyword">await</span> self._try_push_streams()
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_and_start_sessions</span>(<span class="hljs-params">self, node_id: <span class="hljs-built_in">str</span></span>):
        <span class="hljs-string">"""æ£€æŸ¥å¹¶å¯åŠ¨å¯ä»¥å¼€å§‹çš„ä¼šè¯"""</span>
        <span class="hljs-comment"># éå†æ‰€æœ‰æ³¨å†Œçš„æ¶ˆæ¯èŠ‚ç‚¹</span>
        <span class="hljs-keyword">for</span> message_node_id, rule <span class="hljs-keyword">in</span> self._registry.get_all_rules().items():
            <span class="hljs-keyword">if</span> message_node_id <span class="hljs-keyword">in</span> self._active_sessions:
                <span class="hljs-keyword">continue</span>  <span class="hljs-comment"># å·²å¯åŠ¨ï¼Œè·³è¿‡</span>
            
            <span class="hljs-comment"># æ‰¾åˆ°ç¬¬ä¸€ä¸ªå˜é‡æ®µ</span>
            first_var_segment = <span class="hljs-built_in">next</span>(
                (seg <span class="hljs-keyword">for</span> seg <span class="hljs-keyword">in</span> rule.segments <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(seg, VariableSegment)),
                <span class="hljs-literal">None</span>
            )
            
            <span class="hljs-comment"># å¦‚æœç¬¬ä¸€ä¸ªå˜é‡æ®µå¯¹åº”çš„èŠ‚ç‚¹å·²å‡†å¤‡å¥½ï¼Œå¯åŠ¨ä¼šè¯</span>
            <span class="hljs-keyword">if</span> first_var_segment <span class="hljs-keyword">and</span> first_var_segment.node_id == node_id:
                selector = (first_var_segment.node_id, first_var_segment.node_variable)
                buffer = self._stream_buffers.get(selector)
                
                <span class="hljs-comment"># æ£€æŸ¥æ•°æ®æ˜¯å¦å‡†å¤‡å¥½ï¼ˆæµå¼æ•°æ®æˆ–æ ‡é‡æ•°æ®ï¼‰</span>
                has_stream_data = buffer <span class="hljs-keyword">and</span> (buffer.has_unread() <span class="hljs-keyword">or</span> buffer.is_closed)
                has_scalar_data = self._get_variable_value(node_id, ...) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>
                
                <span class="hljs-keyword">if</span> has_stream_data <span class="hljs-keyword">or</span> has_scalar_data:
                    <span class="hljs-comment"># å¯åŠ¨ä¼šè¯</span>
                    session = ResponseSession(node_id=message_node_id, rule=rule)
                    self._active_sessions[message_node_id] = session
                    
                    <span class="hljs-comment"># ç«‹å³å°è¯•æ¨é€</span>
                    <span class="hljs-keyword">await</span> self._try_push_streams()
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_try_push_streams</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""å°è¯•æ¨é€æµå¼æ•°æ®ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰"""</span>
        <span class="hljs-comment"># éå†æ‰€æœ‰æ´»è·ƒä¼šè¯</span>
        <span class="hljs-keyword">for</span> session_id, session <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>(self._active_sessions.items()):
            <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> session.is_complete():
                segment = session.current_segment()
                <span class="hljs-keyword">if</span> segment <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
                    <span class="hljs-keyword">break</span>
                
                <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(segment, TextSegment):
                    <span class="hljs-comment"># æ–‡æœ¬æ®µï¼šç›´æ¥æ¨é€</span>
                    <span class="hljs-keyword">await</span> self._push_chunk(session.node_id, segment.text, is_final=<span class="hljs-literal">False</span>)
                    session.advance()  <span class="hljs-comment"># æ¨è¿›åˆ°ä¸‹ä¸€æ®µ</span>
                
                <span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(segment, VariableSegment):
                    selector = (segment.node_id, segment.node_variable)
                    buffer = self._stream_buffers.get(selector)
                    
                    <span class="hljs-keyword">if</span> buffer <span class="hljs-keyword">and</span> buffer.has_unread():
                        <span class="hljs-comment"># æµå¼æ•°æ®ï¼šä»ç¼“å†²åŒºè¯»å–å¹¶æ¨é€</span>
                        <span class="hljs-keyword">while</span> buffer.has_unread():
                            chunk = buffer.pop()
                            <span class="hljs-keyword">await</span> self._push_chunk(session.node_id, chunk.chunk, is_final=<span class="hljs-literal">False</span>)
                        
                        <span class="hljs-comment"># å¦‚æœæµå·²å…³é—­ï¼Œæ¨è¿›åˆ°ä¸‹ä¸€æ®µ</span>
                        <span class="hljs-keyword">if</span> buffer.is_closed:
                            session.advance()
                        <span class="hljs-keyword">else</span>:
                            <span class="hljs-keyword">break</span>  <span class="hljs-comment"># ç­‰å¾…æ›´å¤šæ•°æ®</span>
                    <span class="hljs-keyword">else</span>:
                        <span class="hljs-comment"># å°è¯•ä»èŠ‚ç‚¹è¾“å‡ºè·å–æ ‡é‡å€¼</span>
                        value = self._get_variable_value(...)
                        <span class="hljs-keyword">if</span> value <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
                            <span class="hljs-keyword">await</span> self._push_chunk(session.node_id, <span class="hljs-built_in">str</span>(value), is_final=<span class="hljs-literal">False</span>)
                            session.advance()
                        <span class="hljs-keyword">else</span>:
                            <span class="hljs-keyword">break</span>  <span class="hljs-comment"># æ•°æ®æœªå‡†å¤‡å¥½ï¼Œåœæ­¢æ¨é€</span>
            
            <span class="hljs-comment"># ä¼šè¯å®Œæˆ</span>
            <span class="hljs-keyword">if</span> session.is_complete():
                <span class="hljs-keyword">await</span> self._push_chunk(session.node_id, <span class="hljs-string">""</span>, is_final=<span class="hljs-literal">True</span>)
                <span class="hljs-keyword">del</span> self._active_sessions[session_id]
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_push_chunk</span>(<span class="hljs-params">self, node_id: <span class="hljs-built_in">str</span>, chunk: <span class="hljs-built_in">str</span>, is_final: <span class="hljs-built_in">bool</span></span>):
        <span class="hljs-string">"""æ¨é€æ•°æ®å—åˆ°å‰ç«¯ï¼ˆé€šè¿‡äº‹ä»¶ç³»ç»Ÿï¼‰"""</span>
        <span class="hljs-comment"># é€šè¿‡äº‹ä»¶ç³»ç»Ÿå‘é€ MESSAGE_CHUNK äº‹ä»¶</span>
        <span class="hljs-comment"># stream_writer(CustomWorkflowEvent(...))</span>
        <span class="hljs-keyword">pass</span>
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>å¼‚æ­¥é”</strong>ï¼šä¿è¯å¤šçº¿ç¨‹/å¤šåç¨‹ç¯å¢ƒä¸‹çš„çº¿ç¨‹å®‰å…¨</li>
<li><strong>ä¼šè¯ç®¡ç†</strong>ï¼šæ¯ä¸ªæ¶ˆæ¯èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªä¼šè¯ï¼Œç‹¬ç«‹æ¨è¿›</li>
<li><strong>é˜»å¡æœºåˆ¶</strong>ï¼šé‡åˆ°æœªå°±ç»ªçš„æ•°æ®æ—¶åœæ­¢æ¨é€ï¼Œç­‰å¾…æ•°æ®å°±ç»ªåç»§ç»­</li>
<li><strong>æ··åˆå¤„ç†</strong>ï¼šåŒæ—¶æ”¯æŒæµå¼æ•°æ®å’Œæ ‡é‡æ•°æ®</li>
</ul>
<p>å¸Œæœ›æœ¬æ–‡çš„è®¾è®¡æ€è·¯å’Œä»£ç ç¤ºä¾‹èƒ½ä¸ºä½ æ„å»ºç±»ä¼¼çš„æµå¼è¾“å‡ºç³»ç»Ÿæä¾›å‚è€ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§‚æµ‹äº‘äº§å“æ›´æ–° | åº”ç”¨æ€§èƒ½ç›‘æµ‹ã€ç”¨æˆ·è®¿é—®ç›‘æµ‹ã€åœºæ™¯ç­‰]]></title>    <link>https://juejin.cn/post/7579485652528185379</link>    <guid>https://juejin.cn/post/7579485652528185379</guid>    <pubDate>2025-12-04T02:53:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579485652528185379" data-draft-id="7579496954252525608" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§‚æµ‹äº‘äº§å“æ›´æ–° | åº”ç”¨æ€§èƒ½ç›‘æµ‹ã€ç”¨æˆ·è®¿é—®ç›‘æµ‹ã€åœºæ™¯ç­‰"/> <meta itemprop="keywords" content="äº§å“"/> <meta itemprop="datePublished" content="2025-12-04T02:53:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§‚æµ‹äº‘äº§å“æ›´æ–° | åº”ç”¨æ€§èƒ½ç›‘æµ‹ã€ç”¨æˆ·è®¿é—®ç›‘æµ‹ã€åœºæ™¯ç­‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:53:25.000Z" title="Thu Dec 04 2025 02:53:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è§‚æµ‹äº‘æ›´æ–°</h2>
<h3 data-id="heading-1">åº”ç”¨æ€§èƒ½ç›‘æµ‹</h3>
<p>1ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fapplication-performance-monitoring%2Fservice-manag%2Fservice-map%2F" target="_blank" title="https://docs.guance.com/application-performance-monitoring/service-manag/service-map/" ref="nofollow noopener noreferrer">æœåŠ¡æ‹“æ‰‘</a>ï¼š</p>
<ul>
<li>ç‚¹å‡»èŠ‚ç‚¹ï¼Œæ–°å¢å³ä¾§åˆ’å¯¹åº”æœåŠ¡è¯¦æƒ…ï¼Œé™¤æœåŠ¡åç§°ã€å¯¹åº”å›¢é˜Ÿã€è”ç³»æ–¹å¼ã€å‘Šè­¦æ•°é‡ã€åŸºç¡€æŒ‡æ ‡æ•°æ®å¤–ï¼Œå±•ç¤ºæŒ‡æ ‡ï¼ˆæœåŠ¡è¯·æ±‚å“åº”æ—¶é—´ã€é”™è¯¯è¯·æ±‚åˆ†å¸ƒï¼‰å’Œæ—¥å¿—ï¼ˆé”™è¯¯æ—¥å¿—æ•°ï¼‰çš„å¼‚å¸¸è¶‹åŠ¿å›¾ï¼›</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c1089829d3042e6b028346154d47ebc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=BBcubFh9%2FUiKb7ATJNH9G5AAyDQ%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>æ–°å¢æ“ä½œæŒ‰é’®ï¼šå¯ç¼©å°ã€æ”¾å¤§ã€å®Œæ•´æ˜¾ç¤ºæ•´ä½“æ‹“æ‰‘å›¾ï¼›</p>
</li>
<li>
<p>æ–°å¢æ‹“æ‰‘å›¾é…ç½®ï¼š</p>
<ul>
<li>ç”¨æˆ·å¯æ‰‹åŠ¨é…ç½®æ˜¯å¦æŒ‰â€œè¯·æ±‚æ•°â€è®¡ç®—èŠ‚ç‚¹å¤§å°ï¼›</li>
<li>ç”¨æˆ·å¯é€‰æ‹©æ‚¬æµ®é«˜äº®èŒƒå›´ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7c68d92c591438d89d73ed61e06e9fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=uaqoLx%2BYSUeyQMDIzVjO5i19bjE%3D" alt="" loading="lazy"/></p>
<p>2ã€æ€§èƒ½æŒ‡æ ‡ï¼š</p>
<ul>
<li>æ–°å¢<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fapplication-performance-monitoring%2Fservice-manag%2Fservice-performance%2F%23custom-filter" target="_blank" title="https://docs.guance.com/application-performance-monitoring/service-manag/service-performance/#custom-filter" ref="nofollow noopener noreferrer">ç­›é€‰å­—æ®µé…ç½®</a>ï¼Œé™¤å®˜æ–¹é»˜è®¤ç­›é€‰å­—æ®µå¤–ï¼Œç”¨æˆ·å¯è‡ªå®šä¹‰æœ€å¤š 5 ä¸ªå­—æ®µä½œä¸ºç­›é€‰å­—æ®µï¼›</li>
<li>æ–°å¢æ”¯æŒå¯¼å‡ºå½“å‰æ€§èƒ½æŒ‡æ ‡åˆ—è¡¨ä¸º CSV æ–‡ä»¶ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f81ed6dc6a74ad59fa3879df22e73bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=iD%2BLWgB8v1plckkG6q6XH%2B3QV%2B8%3D" alt="" loading="lazy"/></p>
<p>3ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fapplication-performance-monitoring%2Fservice-manag%2Fservice-list-details%2F%23innvocation" target="_blank" title="https://docs.guance.com/application-performance-monitoring/service-manag/service-list-details/#innvocation" ref="nofollow noopener noreferrer">æœåŠ¡æ¸…å• &gt; èµ„æºè°ƒç”¨</a>ï¼š</p>
<ul>
<li>æ–°å¢é‡‡æ ·æç¤ºï¼šå½“èµ„æºåˆ—è¡¨å’Œåˆ†å¸ƒå›¾æŸ¥è¯¢è§¦å‘é‡‡æ ·æ—¶ï¼Œæ˜¾ç¤ºâ€œé‡‡æ ·ç‡ iconâ€ï¼›</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73e9712ea511436e8d6578710bb2897a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=XIoxchGZpcmT2GDMQHleudNaMsY%3D" alt="" loading="lazy"/></p>
<ul>
<li>ä¸Šä¸‹æ¸¸æ‹“æ‰‘ï¼šæ–°å¢â€œæŸ¥çœ‹ä¸Šæ¸¸/ä¸‹æ¸¸è°ƒç”¨â€æŒ‰é’®ï¼Œæ”¯æŒåŸºäºå½“å‰æ‹“æ‰‘ç»§ç»­æŸ¥çœ‹ä¸Š/ä¸‹å±‚çº§çš„è°ƒç”¨å…³ç³»ï¼Œå®ç°ä»å½“å‰èµ„æºå‡ºå‘çš„å…¨é“¾è·¯è·¯å¾„åˆ†æã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9a7acb0551b41bca4c18f989fe1da70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=A8UYDgQlk63CO35TqY3lh3aLQT8%3D" alt="" loading="lazy"/></p>
<p>4ã€é“¾è·¯ &gt; æœåŠ¡è°ƒç”¨å…³ç³»ï¼š</p>
<ul>
<li>äº¤äº’ä¼˜åŒ–ï¼šä»…ç»˜åˆ¶ä¸åŒæœåŠ¡ä¹‹é—´çš„è°ƒç”¨è·¯å¾„ï¼Œä½¿ä¾èµ–å…³ç³»æ›´æ¸…æ™°ï¼›</li>
<li>èŠ‚ç‚¹ä¿¡æ¯å¢å¼ºï¼šé€šè¿‡å·¦å³ç»“æ„å±•ç¤ºå…¨è·¯å¾„æœåŠ¡è°ƒç”¨å…³ç³»ï¼ŒåŒæ—¶åœ¨æ¯ä¸ªæœåŠ¡èŠ‚ç‚¹ä¸Šï¼Œç›´æ¥å±•ç¤ºæ‰§è¡Œæ—¶é—´ã€å¹³å‡å“åº”æ—¶é—´ã€è°ƒç”¨æ¬¡æ•°ã€é”™è¯¯ä¿¡æ¯ï¼›ç‚¹å‡»å¯æŸ¥çœ‹æœçš„çˆ¶çº§ Spanï¼Œç”¨äºè¿½æº¯ä¸Šæ¸¸è°ƒç”¨æ¥æºï¼›è‹¥è¯¥æœåŠ¡å­˜åœ¨é”™è¯¯ï¼Œå°†ç›´æ¥å±•ç¤ºé”™è¯¯è¯¦æƒ…ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48d8ad6157374487a670c2bdec602da1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=6LHqTJ498X178KVpxzxw1cPbPng%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">ç”¨æˆ·è®¿é—®ç›‘æµ‹</h3>
<p>1ã€ä¸ºé€‚é…é¸¿è’™ï¼ˆHarmonyOSï¼‰ç”Ÿæ€å‘å±•ï¼Œæ–°å¢æ”¯æŒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Freal-user-monitoring%2Fharmonyos%2Fapp-access%2F" target="_blank" title="https://docs.guance.com/real-user-monitoring/harmonyos/app-access/" ref="nofollow noopener noreferrer">åº”ç”¨ç±»å‹ HarmonyOS</a>ã€‚ç”¨æˆ·å¯åœ¨åˆ›å»ºåº”ç”¨æ—¶é€‰æ‹© HarmonyOSï¼Œå¹¶è·å–å¯¹åº”çš„ SDK é›†æˆæŒ‡å¼•ä¸é…ç½®æ”¯æŒï¼Œå®ç°é¸¿è’™åº”ç”¨çš„å®Œæ•´å¯è§‚æµ‹æ€§æ¥å…¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8600bf7a56544b1ab92b1c754b9c1642~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=QyAaiND%2B%2BTNSr4uFPLZH%2BsAui9o%3D" alt="" loading="lazy"/></p>
<p>2ã€View æŸ¥çœ‹å™¨é¡µé¢æ”¯æŒ Obsy AI é”™è¯¯åˆ†æã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12e43f8d2ed7411e9767285e75f54908~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=juExzwhjRh4kEjdevLqYyupcuOo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">äº‹ä»¶ä¸­å¿ƒ</h3>
<p>æ–°å¢<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fevents%2Funrecovered-events%2F%23level" target="_blank" title="https://docs.guance.com/events/unrecovered-events/#level" ref="nofollow noopener noreferrer">äº‹ä»¶ç­‰çº§</a>ï¼šè‡´å‘½ï¼ˆ<code>df_status:fatal</code>ï¼‰ï¼Œå®šä¹‰ä¸ºæœ€é«˜ç­‰çº§ã€‚</p>
<h3 data-id="heading-4">MCP Server</h3>
<p>æ–°å¢æ”¯æŒä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmcp-server%2F%23use-case" target="_blank" title="https://docs.guance.com/mcp-server/#use-case" ref="nofollow noopener noreferrer">æ ‡å‡†åŒ–æ–¹å¼</a>æŸ¥è¯¢æŒ‡æ ‡ã€é“¾è·¯ã€RUM æ•°æ®ã€‚</p>
<h3 data-id="heading-5">ç®¡ç†</h3>
<p>1ã€æ•°æ®è½¬å‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmanagement%2Fbackup%2Fmanag-backup%2F%23delete" target="_blank" title="https://docs.guance.com/management/backup/manag-backup/#delete" ref="nofollow noopener noreferrer">åˆ é™¤è§„åˆ™</a>æ—¶ï¼Œéœ€è¾“å…¥è§„åˆ™åç§°ä»¥ç¡®è®¤æ“ä½œï¼›</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f90c11ce7f0343d9988732db5bc5cb05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=JRUQs2JmZaXooZy7rOTWztiW%2F3s%3D" alt="" loading="lazy"/></p>
<p>2ã€æˆå‘˜ç®¡ç†ï¼šæ”¯æŒä¸ºå›¢é˜Ÿ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmanagement%2Fmember-management%2F%23edit-team" target="_blank" title="https://docs.guance.com/management/member-management/#edit-team" ref="nofollow noopener noreferrer">èµ‹äºˆè§’è‰²</a>ã€‚å›¢é˜Ÿè§’è‰²ä¼šä½œä¸ºé™„åŠ è§’è‰²è‡ªåŠ¨åº”ç”¨äºå›¢é˜Ÿæˆå‘˜ï¼Œæˆå‘˜æœ€ç»ˆæƒé™åŒ…å«ä¸ªäººè§’è‰²ä¸å›¢é˜Ÿè§’è‰²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d798d9da53b6487b8e3c964cda999886~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=nd8aJtC0f%2B5OfYTR8aYVx6vAfRw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">åœºæ™¯</h3>
<p>1ã€ä»ªè¡¨æ¿ï¼š</p>
<ul>
<li>æ–°å¢<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fscene%2Fdashboard%2Fconfig-page%2F%23filter" target="_blank" title="https://docs.guance.com/scene/dashboard/config-page/#filter" ref="nofollow noopener noreferrer">â€œç­›é€‰å™¨â€</a>æŒ‰é’®ï¼Œç”¨äºå¿«é€Ÿæ·»åŠ å…¨å±€è¿‡æ»¤æ¡ä»¶ï¼›</li>
<li>åŸæœ‰â€œå†å²ç‰ˆæœ¬â€ã€â€œå¤§å±æ¨¡å¼â€ã€â€œæŠ¥å‘Šè®°å½•â€ç­‰åŠŸèƒ½ç§»è‡³<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fscene%2Fdashboard%2Fconfig-page%2F%23settings" target="_blank" title="https://docs.guance.com/scene/dashboard/config-page/#settings" ref="nofollow noopener noreferrer">â€œè®¾ç½®â€</a>ä¸‹æ‹‰èœå•ä¸­ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/380cfb9b0c83468baf57b997d5a6e2a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=fY0MVydPVUmTlTLwozl3HDdNIoM%3D" alt="" loading="lazy"/></p>
<p>2ã€å›¾è¡¨ï¼š</p>
<ul>
<li>é«˜çº§é…ç½®ï¼šæ–°å¢<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fscene%2Fvisual-chart%2Ftimeseries-chart%2F%23repeat" target="_blank" title="https://docs.guance.com/scene/visual-chart/timeseries-chart/#repeat" ref="nofollow noopener noreferrer">â€œé‡å¤å›¾è¡¨â€</a>é€‰é¡¹ã€‚å¼€å¯åï¼Œç³»ç»Ÿä¼šæ ¹æ®æ‰€é€‰è§†å›¾å˜é‡çš„å„ä¸ªå€¼ï¼ŒæŒ‰ç›¸åŒç»“æ„ç”Ÿæˆå¤šå¼ å›¾è¡¨ï¼›</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da75d1f2adb24cff880e24e83130e0b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=0eQHHy%2BBfYvz2x8eU7rASeToubo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ca56d9cfbb9459eae68521f79a7267e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=u4EQm1MTK1uUPhsAwK28ZRb3gZU%3D" alt="" loading="lazy"/></p>
<ul>
<li>ç‚¹å‡»æŸä¸€æ•°æ®ç‚¹ï¼Œæ–°å¢æ”¯æŒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fscene%2Fdashboard%2Fconfig-page%2F%23use-case" target="_blank" title="https://docs.guance.com/scene/dashboard/config-page/#use-case" ref="nofollow noopener noreferrer">åº”ç”¨åˆ°ç­›é€‰å™¨</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fscene%2Fvisual-chart%2F%23related-analysis" target="_blank" title="https://docs.guance.com/scene/visual-chart/#related-analysis" ref="nofollow noopener noreferrer">å¤åˆ¶åˆ†ç»„æ ‡ç­¾</a>ï¼›</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa709ab68e864e2182481fb749082e0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421605&amp;x-signature=sGEFpxQREU3zMDNDevXdFE1GGI0%3D" alt="" loading="lazy"/></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fscene%2Fvisual-chart%2Ftable-chart%2F" target="_blank" title="https://docs.guance.com/scene/visual-chart/table-chart/" ref="nofollow noopener noreferrer">è¡¨æ ¼å›¾</a>ï¼šæ‰‹åŠ¨è¾“å…¥è¿”å›æ•°é‡ä¸Šé™å¢åŠ è‡³ 2000ã€‚</li>
</ul>
<h3 data-id="heading-7">ç›‘æ§</h3>
<p>å‘Šè­¦èšåˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmonitoring%2Falert-template%2F" target="_blank" title="https://docs.guance.com/monitoring/alert-template/" ref="nofollow noopener noreferrer">é€šçŸ¥æ¨¡ç‰ˆä¼˜åŒ–</a>ï¼šåœ¨è§„åˆ™èšåˆä¸æ™ºèƒ½èšåˆçš„é€šçŸ¥ä¸­ï¼Œå±•ç¤ºå½“å‰èšåˆå‘¨æœŸå†…è§¦å‘çš„ä¸åŒäº‹ä»¶æ•°é‡ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿè¯†åˆ«å‘Šè­¦å…³è”çš„äº‹ä»¶è§„æ¨¡ä¸å½±å“èŒƒå›´ã€‚</p>
<h2 data-id="heading-8">é›†æˆæ›´æ–°</h2>
<ul>
<li>
<p>Openresty æ–°å¢ OpenTelemetry é“¾è·¯æ¥å…¥æ–¹å¼ï¼›</p>
</li>
<li>
<p>æ–°å¢ Zabbix é›†æˆï¼ŒåŸºäº api\streamï¼›</p>
</li>
<li>
<p>æ–°å¢é˜¿é‡Œäº‘äº‘åŸç”Ÿ API ç½‘å…³é›†æˆã€é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—é›†æˆï¼›</p>
</li>
<li>
<p>æ–°å¢åä¸ºäº‘ EVS äº‘ç¡¬ç›˜é›†æˆï¼›</p>
</li>
<li>
<p>æ–°å¢è…¾è®¯äº‘ WAF ç›‘æ§å™¨ï¼›</p>
</li>
<li>
<p>ä¼˜åŒ–é˜¿é‡Œäº‘ NLB è§†å›¾&amp;é›†æˆæ–‡æ¡£ï¼›</p>
</li>
<li>
<p>ä¼˜åŒ–é˜¿é‡Œäº‘ SLB è§†å›¾ï¼›</p>
</li>
<li>
<p>ä¿®å¤ iis é›†æˆè§†å›¾ç›‘æ§å™¨ï¼›</p>
</li>
<li>
<p>ä¼˜åŒ–åä¸ºäº‘ ECSã€CSSã€Functiongraph è§†å›¾å’Œç›‘æ§å™¨ï¼›</p>
</li>
<li>
<p>ä¼˜åŒ–è…¾è®¯äº‘ clb ç›‘æ§å™¨/è§†å›¾ï¼›</p>
</li>
<li>
<p>è¡¥å……åä¸ºäº‘ DC/ é˜¿é‡Œäº‘ SLB ç›‘æ§å™¨ï¼›</p>
</li>
<li>
<p>ä¸‹æ¶åä¸ºäº‘ GuassDB ç›¸å…³é›†æˆï¼ˆåä¸ºäº‘ä¸‹æ¶äº†ç›¸å…³äº§å“ï¼‰ï¼›</p>
</li>
<li>
<p>ä¿®å¤åä¸ºäº‘ ROMA è„šæœ¬ï¼›</p>
</li>
<li>
<p>æ–°å¢ CSPM æ¨¡ç‰ˆï¼š</p>
<ul>
<li>S3 å­˜å‚¨æ¡¶åº”å¯ç”¨ â€œMFA åˆ é™¤â€åŠŸèƒ½ï¼›</li>
<li>S3 å­˜å‚¨æ¡¶ ACL åº”é™åˆ¶å…¬ç½‘è®¿é—®ï¼›</li>
<li>S3 å­˜å‚¨æ¡¶å†…å®¹è®¿é—®åº”é™äºæˆæƒä¸»ä½“ï¼›</li>
<li>IAM ç”¨æˆ·ä¸åº”é™„åŠ  â€œAdministratorAccessâ€ ç­–ç•¥ï¼›</li>
<li>IAM ç­–ç•¥åº”åœ¨ç»„çº§åˆ«è¿›è¡Œé™„åŠ å’Œç®¡ç†ã€‚</li>
</ul>
</li>
<li>
<p>æ–°å¢èµ„æºç›®å½•æ¨¡ç‰ˆï¼š</p>
<ul>
<li>åä¸ºäº‘ï¼šddsã€functiongraphã€kafkaã€obsã€rds(mysql)ã€rds_mariadbã€rds_sqlserver</li>
<li>ç«å±±äº‘ï¼špostgresql</li>
<li>é˜¿é‡Œäº‘ï¼šnat</li>
<li>è…¾è®¯äº‘ï¼štdsql_c_mysqlã€mongodbã€eipã€cos</li>
<li>AWSï¼šiam_user</li>
</ul>
</li>
<li>
<p>äº‘é›†æˆæ¨¡ç‰ˆï¼š</p>
<ul>
<li>æ–°å¢è…¾è®¯äº‘ ckafkaã€esã€redisã€waf ç­‰ï¼›</li>
<li>ä¼˜åŒ–åä¸ºäº‘ï¼šrdsã€postgreslã€apigï¼›</li>
<li>ä¼˜åŒ– AWSï¼šWAFã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-9">DataKit æ›´æ–°</h2>
<ul>
<li>ä¿®å¤ OpenTelemetry/DDtrace é‡‡æ ·æ—¶æŒ‡æ ‡ç»Ÿè®¡é—®é¢˜</li>
<li>cgroup ä¼˜å…ˆä½¿ç”¨ v2 ç‰ˆæœ¬ï¼Œé¿å…æŸäº›æƒ…å†µä¸‹ cgroup ä¸ç”Ÿæ•ˆé—®é¢˜</li>
<li>9529 API å¢åŠ æ›´å¤šè¶…æ—¶ä¿æŠ¤ï¼Œç§»é™¤åŸæ¥ gin timeout ä¸­é—´ä»¶</li>
<li>Redis é‡‡é›†å™¨é…ç½®ä¸­ï¼Œé»˜è®¤ä½¿ç”¨ v2 æŒ‡æ ‡é›†å‘½å</li>
<li>ä¼˜åŒ– eBPF é‡‡é›†å¯¹ Kubernetes API çš„æ¶ˆè€—</li>
<li>logfwd è¡¥å…¨ from-beginning æœ‰å…³çš„é…ç½®</li>
<li>ä¿®æ­£ OpenTelemetry é‡‡é›†å™¨é…ç½®ä¸­çš„æ‹¼å†™é”™è¯¯Â <code>split_service_name</code></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Vue2-Niubility-Uploaderã€‘ä¸€ä¸ªå¼ºå¤§çš„ Vue2 æ–‡ä»¶ä¸Šä¼ è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7579573664228573193</link>    <guid>https://juejin.cn/post/7579573664228573193</guid>    <pubDate>2025-12-04T02:46:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579573664228573193" data-draft-id="7579673620940587058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Vue2-Niubility-Uploaderã€‘ä¸€ä¸ªå¼ºå¤§çš„ Vue2 æ–‡ä»¶ä¸Šä¼ è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-12-04T02:46:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹¾æ™šéœ"/> <meta itemprop="url" content="https://juejin.cn/user/3597257778413240"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Vue2-Niubility-Uploaderã€‘ä¸€ä¸ªå¼ºå¤§çš„ Vue2 æ–‡ä»¶ä¸Šä¼ è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3597257778413240/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹¾æ™šéœ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:46:23.000Z" title="Thu Dec 04 2025 02:46:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€</h2>
<p>åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œæ–‡ä»¶ä¸Šä¼ æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§ä½†åˆå……æ»¡æŒ‘æˆ˜çš„åŠŸèƒ½ã€‚å¼€å‘è€…ç»å¸¸ä¼šé‡åˆ°ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9074b55daecd4e7485a2790e0784b09a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ou-5pma6Zye:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421183&amp;x-signature=Z1%2B1BBPHjlh6agF4%2BzOl98qLkqc%3D" alt="poster.png" loading="lazy"/></p>
<ul>
<li>å¤§æ–‡ä»¶ä¸Šä¼ å®¹æ˜“è¶…æ—¶æˆ–å¤±è´¥</li>
<li>ç½‘ç»œä¸ç¨³å®šå¯¼è‡´ä¸Šä¼ ä¸­æ–­åéœ€è¦é‡æ–°ä¸Šä¼ </li>
<li>ç¼ºä¹è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒåé¦ˆï¼ˆè¿›åº¦ã€é€Ÿåº¦ç­‰ï¼‰</li>
<li>éš¾ä»¥æ§åˆ¶å¹¶å‘ä¸Šä¼ æ•°é‡</li>
<li>ä¸åŒåœºæ™¯éœ€è¦ä¸åŒçš„ UI å±•ç¤º</li>
</ul>
<p><code>vue2-niubility-uploader</code> æ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹è€Œè¯ç”Ÿçš„ä¸€ä¸ªè½»é‡çº§ã€åŠŸèƒ½å¼ºå¤§çš„ Vue2 ä¸Šä¼ ç»„ä»¶ã€‚å®ƒä¸ä»…æä¾›äº†å®Œæ•´çš„ä¸Šä¼ åŠŸèƒ½ï¼Œè¿˜å…·å¤‡åˆ†ç‰‡ä¸Šä¼ ã€æ–­ç‚¹ç»­ä¼ ã€æ‹–æ‹½ä¸Šä¼ ç­‰é«˜çº§ç‰¹æ€§ï¼Œè®©æ–‡ä»¶ä¸Šä¼ å˜å¾—ç®€å•è€Œå¯é ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ <code>vue2-niubility-uploader</code> ç»„ä»¶ï¼Œæ‰“é€ å‡ºè‰²çš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2F941477276.github.io%2Fvue2-niubility-uploader%2Fdist%2F%23%2Fstart" target="_blank" title="https://941477276.github.io/vue2-niubility-uploader/dist/#/start" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£åŠDemo</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F941477276%2Fvue2-niubility-uploader" target="_blank" title="https://github.com/941477276/vue2-niubility-uploader" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fvue2-niubility-uploader" target="_blank" title="https://www.npmjs.com/package/vue2-niubility-uploader" ref="nofollow noopener noreferrer">NPM åŒ…</a></li>
</ul>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒç‰¹æ€§æ¦‚è§ˆ</h2>
<h3 data-id="heading-2">2.1 åŸºç¡€åŠŸèƒ½</h3>
<p><strong>å•æ–‡ä»¶/å¤šæ–‡ä»¶ä¸Šä¼ </strong></p>
<p>ç»„ä»¶æ”¯æŒä¸¤ç§ä¸Šä¼ æ¨¡å¼ï¼šå•æ–‡ä»¶ä¸Šä¼ å’Œå¤šæ–‡ä»¶æ‰¹é‡ä¸Šä¼ ã€‚é€šè¿‡ç®€å•çš„ <code>multiple</code> å±æ€§å³å¯åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å•æ–‡ä»¶ä¸Šä¼  --&gt;
&lt;Vue2NiubilityUploader :request-handler="requestHandler" /&gt;

&lt;!-- å¤šæ–‡ä»¶ä¸Šä¼  --&gt;
&lt;Vue2NiubilityUploader :request-handler="requestHandler" multiple /&gt;
</code></pre>
<p><strong>æ–‡ä»¶ç±»å‹å’Œå¤§å°é™åˆ¶</strong></p>
<p>é€šè¿‡ <code>accept</code>ã€<code>limit</code> å’Œ <code>maxSize</code> å±æ€§ï¼Œå¯ä»¥è½»æ¾æ§åˆ¶ä¸Šä¼ æ–‡ä»¶çš„ç±»å‹ã€æ•°é‡å’Œå¤§å°ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;Vue2NiubilityUploader
  :request-handler="requestHandler"
  accept="image/*,.pdf,.doc"
  :limit="10"
  :max-size="50*1024*1024"
/&gt;
</code></pre>
<h3 data-id="heading-3">2.2 é«˜çº§åŠŸèƒ½</h3>
<p><strong>å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ </strong></p>
<p>å¯¹äºå¤§æ–‡ä»¶ä¸Šä¼ ï¼Œç»„ä»¶æ”¯æŒè‡ªåŠ¨åˆ†ç‰‡ï¼Œå°†å¤§æ–‡ä»¶åˆ‡åˆ†æˆå¤šä¸ªå°å—å¹¶è¡Œä¸Šä¼ ï¼Œå¤§å¤§æé«˜äº†ä¸Šä¼ çš„å¯é æ€§å’Œé€Ÿåº¦ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5608f0f0b441467f815788463cfd13e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ou-5pma6Zye:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421183&amp;x-signature=ygG%2FjJvrinUKbzpi3TJ0UA%2FYvXA%3D" alt="chunk-upload-demo.gif" loading="lazy"/></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue2NiubilityUploader
    ref="fileUploader"
    :request-handler="uploadChunk"
    :before-upload="initChunkUpload"
    :chunk-upload-completed="mergeChunks"
    use-chunked-upload
    :chunk-size="10*1024*1024"
    :max-concurrent-uploads="3"
    @file-upload-progress="onProgress"
  /&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    async initChunkUpload(fileData) {
      if (!fileData.useChunked) return;

      // åˆå§‹åŒ–åˆ†ç‰‡ä¸Šä¼ ï¼Œè·å– uploadId
      const response = await this.$http.post('/api/upload/init', {
        fileName: fileData.file.name,
        fileSize: fileData.file.size,
        totalChunks: fileData.chunks
      });

      // å°† uploadId ä¿å­˜åˆ°æ‰©å±•æ•°æ®ä¸­
      fileData.extendData.uploadId = response.data.uploadId;

      // è®¾ç½®å·²ä¸Šä¼ çš„åˆ†ç‰‡ç´¢å¼•ï¼Œç»„ä»¶åœ¨ä¸Šä¼ åˆ†ç‰‡æ—¶ä¼šè·³è¿‡è¿™äº›å·²ä¸Šä¼ çš„åˆ†ç‰‡
      // fileData.setUploadedChunks(fileData.id, response.data.uploadedChunks || []);
      // å¦‚æœæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œè¿”å›å·²ä¸Šä¼ çš„åˆ†ç‰‡åˆ—è¡¨
      return response.data;
    },

    uploadChunk({ chunk, chunkIndex, fileData: chunkFileData }) {
      const formData = new FormData();
      formData.append('file', chunk);
      formData.append('uploadId', chunkFileData.extendData.uploadId);
      formData.append('chunkIndex', chunkIndex);
      formData.append('totalChunks', chunkFileData.chunks);

      return {
        url: '/api/upload/chunk',
        method: 'POST',
        data: formData
      };
    },

    async mergeChunks(fileData) {
      // æ‰€æœ‰åˆ†ç‰‡ä¸Šä¼ å®Œæˆï¼Œåˆå¹¶åˆ†ç‰‡
      const response = await this.$http.post('/api/upload/merge', {
        uploadId: fileData.extendData.uploadId,
        fileName: fileData.file.name,
        totalChunks: fileData.chunks
      });

      return response.data;
    },

    onProgress(fileData) {
      console.log(`${fileData.name} ä¸Šä¼ è¿›åº¦: ${fileData.progress}%`);
      console.log(`ä¸Šä¼ é€Ÿåº¦: ${fileData.speed}`);
      console.log(`å‰©ä½™æ—¶é—´: ${fileData.remainingTime}`);
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-4">2.3 UI å±•ç¤º</h3>
<p><strong>å¤šç§å±•ç¤ºæ¨¡å¼</strong></p>
<p>ç»„ä»¶æä¾›äº†ä¸¤ç§ä¸»è¦çš„å±•ç¤ºæ¨¡å¼ï¼š</p>
<ol>
<li><strong>åˆ—è¡¨æ¨¡å¼ï¼ˆdefaultï¼‰</strong>ï¼šé€‚åˆæ–‡æ¡£ã€è§†é¢‘ç­‰å„ç±»æ–‡ä»¶çš„å±•ç¤º</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f8bbf32e15a4780b08581c83f3632a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ou-5pma6Zye:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421183&amp;x-signature=z4dadIAftaK3MrTU0t3wnoZAe%2BM%3D" alt="list-mode.png" loading="lazy"/></p>
<ol start="2">
<li><strong>å›¾ç‰‡å¡ç‰‡æ¨¡å¼ï¼ˆpicture-cardï¼‰</strong>ï¼šä¸“ä¸ºå›¾ç‰‡ä¸Šä¼ ä¼˜åŒ–ï¼Œæ”¯æŒç¼©ç•¥å›¾é¢„è§ˆ</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0c63876497c48e8a02c4362edd040bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ou-5pma6Zye:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421183&amp;x-signature=tSykz%2BPDDjtkdgJxpfO2MMuSwBs%3D" alt="picture-card.png" loading="lazy"/></p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å›¾ç‰‡å¡ç‰‡æ¨¡å¼ --&gt;
&lt;Vue2NiubilityUploader
  :request-handler="requestHandler"
  list-type="picture-card"
  accept="image/*"
/&gt;
</code></pre>
<p><strong>å®æ—¶è¿›åº¦åé¦ˆ</strong></p>
<p>æ¯ä¸ªä¸Šä¼ æ–‡ä»¶éƒ½ä¼šæ˜¾ç¤ºï¼š</p>
<ul>
<li>ä¸Šä¼ è¿›åº¦ç™¾åˆ†æ¯”</li>
<li>å®æ—¶ä¸Šä¼ é€Ÿåº¦</li>
<li>é¢„è®¡å‰©ä½™æ—¶é—´</li>
</ul>
<p>è¿™äº›ä¿¡æ¯é€šè¿‡ <code>FileData</code> å¯¹è±¡å®æ—¶æ›´æ–°ï¼Œè®©ç”¨æˆ·æ¸…æ¥šäº†è§£ä¸Šä¼ çŠ¶æ€ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€æŠ€æœ¯å®ç°åŸç†</h2>
<h3 data-id="heading-6">3.1 åˆ†ç‰‡ä¸Šä¼ æœºåˆ¶</h3>
<p>åˆ†ç‰‡ä¸Šä¼ æ˜¯ <code>vue2-niubility-uploader</code> çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>æ–‡ä»¶åˆ‡ç‰‡</strong>ï¼šå°†å¤§æ–‡ä»¶æŒ‰ç…§æŒ‡å®šçš„ <code>chunkSize</code> åˆ‡åˆ†æˆå¤šä¸ªå°å—</li>
<li><strong>å¹¶å‘ä¸Šä¼ </strong>ï¼šæ ¹æ® <code>maxConcurrentUploads</code> è®¾ç½®ï¼Œå¹¶å‘ä¸Šä¼ å¤šä¸ªåˆ†ç‰‡</li>
<li><strong>è¿›åº¦è¿½è¸ª</strong>ï¼šä¸ºæ¯ä¸ªåˆ†ç‰‡ç»´æŠ¤ç‹¬ç«‹çš„ä¸Šä¼ è¿›åº¦ï¼Œå¹¶æ±‡æ€»è®¡ç®—æ€»ä½“è¿›åº¦</li>
<li><strong>åˆ†ç‰‡åˆå¹¶</strong>ï¼šæ‰€æœ‰åˆ†ç‰‡ä¸Šä¼ å®Œæˆåï¼Œè°ƒç”¨æœåŠ¡ç«¯æ¥å£åˆå¹¶åˆ†ç‰‡</li>
</ol>
<p>æ ¸å¿ƒæ•°æ®ç»“æ„ <code>FileData</code> åŒ…å«äº†åˆ†ç‰‡ä¸Šä¼ æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">FileData</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">file</span>: <span class="hljs-title class_">File</span>;
  <span class="hljs-attr">useChunked</span>: <span class="hljs-built_in">boolean</span>;           <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨åˆ†ç‰‡ä¸Šä¼ </span>
  <span class="hljs-attr">chunks</span>: <span class="hljs-built_in">number</span>;                <span class="hljs-comment">// æ€»åˆ†ç‰‡æ•°</span>
  <span class="hljs-attr">currentChunk</span>: <span class="hljs-built_in">number</span>;          <span class="hljs-comment">// å½“å‰ä¸Šä¼ çš„åˆ†ç‰‡ç´¢å¼•</span>
  <span class="hljs-attr">uploadedChunks</span>: <span class="hljs-built_in">number</span>;        <span class="hljs-comment">// å·²ä¸Šä¼ çš„åˆ†ç‰‡æ•°é‡</span>
  <span class="hljs-attr">chunkQueue</span>: <span class="hljs-built_in">number</span>[];          <span class="hljs-comment">// åˆ†ç‰‡ä¸Šä¼ é˜Ÿåˆ—</span>
  <span class="hljs-attr">activeChunks</span>: <span class="hljs-built_in">number</span>;          <span class="hljs-comment">// å½“å‰æ´»è·ƒçš„åˆ†ç‰‡ä¸Šä¼ æ•°</span>
  <span class="hljs-attr">uploadedChunkSet</span>: <span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// å·²ä¸Šä¼ åˆ†ç‰‡çš„é›†åˆï¼ˆç”¨äºæ–­ç‚¹ç»­ä¼ ï¼‰</span>
  <span class="hljs-attr">chunkProgressMap</span>: <span class="hljs-title class_">Map</span>;         <span class="hljs-comment">// æ¯ä¸ªåˆ†ç‰‡çš„ä¸Šä¼ è¿›åº¦</span>
  <span class="hljs-comment">// ... å…¶ä»–å±æ€§</span>
}
</code></pre>
<h3 data-id="heading-7">3.2 æ–­ç‚¹ç»­ä¼ å®ç°</h3>
<p>æ–­ç‚¹ç»­ä¼ çš„å…³é”®åœ¨äºè®°å½•å’Œæ¢å¤ä¸Šä¼ çŠ¶æ€ï¼š</p>
<ol>
<li><strong>çŠ¶æ€è®°å½•</strong>ï¼šä½¿ç”¨ <code>uploadedChunkSet</code> è®°å½•å·²æˆåŠŸä¸Šä¼ çš„åˆ†ç‰‡ç´¢å¼•</li>
<li><strong>è¿›åº¦æ¢å¤</strong>ï¼šæš‚åœåå†æ¬¡ä¸Šä¼ æ—¶ï¼Œè·³è¿‡å·²ä¸Šä¼ çš„åˆ†ç‰‡</li>
<li><strong>åˆ†ç‰‡éªŒè¯</strong>ï¼šå¯é€‰æ‹©åœ¨æœåŠ¡ç«¯éªŒè¯å·²ä¸Šä¼ åˆ†ç‰‡çš„å®Œæ•´æ€§</li>
</ol>
<p>å®ç°æ–­ç‚¹ç»­ä¼ çš„å…³é”®ä»£ç é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸Šä¼ å‰æ£€æŸ¥å·²ä¸Šä¼ çš„åˆ†ç‰‡</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">onBeforeUpload</span>(<span class="hljs-params">fileData</span>) {
  <span class="hljs-keyword">if</span> (fileData.<span class="hljs-property">useChunked</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ–åˆ†ç‰‡ä¸Šä¼ ï¼Œè·å–å·²ä¸Šä¼ çš„åˆ†ç‰‡åˆ—è¡¨</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/upload/init'</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">fileName</span>: fileData.<span class="hljs-property">file</span>.<span class="hljs-property">name</span>,
        <span class="hljs-attr">fileSize</span>: fileData.<span class="hljs-property">file</span>.<span class="hljs-property">size</span>
      })
    });

    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
    <span class="hljs-comment">// å°†å·²ä¸Šä¼ çš„åˆ†ç‰‡ä»é˜Ÿåˆ—ä¸­ç§»é™¤</span>
    fileData.<span class="hljs-property">uploadedChunkSet</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(data.<span class="hljs-property">uploadedChunks</span> || []);
  }
}
</code></pre>
<h3 data-id="heading-8">3.3 å¹¶å‘æ§åˆ¶</h3>
<p>ä¸ºäº†é¿å…è¿‡å¤šå¹¶å‘è¯·æ±‚å¯¼è‡´æµè§ˆå™¨æˆ–æœåŠ¡å™¨å‹åŠ›è¿‡å¤§ï¼Œç»„ä»¶å®ç°äº†æ™ºèƒ½çš„å¹¶å‘æ§åˆ¶ï¼š</p>
<ul>
<li><strong>å…¨å±€å¹¶å‘é™åˆ¶</strong>ï¼š<code>maxConcurrentUploads</code> æ§åˆ¶åŒæ—¶ä¸Šä¼ çš„æ–‡ä»¶æ•°é‡</li>
<li><strong>åˆ†ç‰‡å¹¶å‘æ§åˆ¶</strong>ï¼šå¯¹äºå•ä¸ªå¤§æ–‡ä»¶çš„å¤šä¸ªåˆ†ç‰‡ï¼Œä¹Ÿæœ‰å¹¶å‘é™åˆ¶</li>
<li><strong>é˜Ÿåˆ—ç®¡ç†</strong>ï¼šè¶…å‡ºå¹¶å‘æ•°çš„ä¸Šä¼ ä»»åŠ¡ä¼šè¿›å…¥é˜Ÿåˆ—ç­‰å¾…</li>
</ul>
<h3 data-id="heading-9">3.4 è¿›åº¦è®¡ç®—ä¸é€Ÿåº¦é¢„æµ‹</h3>
<p><strong>è¿›åº¦è®¡ç®—</strong></p>
<p>ç»„ä»¶é€šè¿‡ç›‘å¬ XMLHttpRequest çš„ <code>progress</code> äº‹ä»¶ï¼Œå®æ—¶æ›´æ–°ä¸Šä¼ è¿›åº¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">xhr.<span class="hljs-property">upload</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'progress'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">lengthComputable</span>) {
    <span class="hljs-keyword">const</span> progress = (event.<span class="hljs-property">loaded</span> / event.<span class="hljs-property">total</span>) * <span class="hljs-number">100</span>;
    <span class="hljs-comment">// æ›´æ–° FileData çš„ progress å±æ€§</span>
  }
});
</code></pre>
<p>å¯¹äºåˆ†ç‰‡ä¸Šä¼ ï¼Œæ€»è¿›åº¦æ˜¯æ‰€æœ‰åˆ†ç‰‡è¿›åº¦çš„åŠ æƒå¹³å‡å€¼ã€‚</p>
<p><strong>é€Ÿåº¦è®¡ç®—</strong></p>
<p>ä¸Šä¼ é€Ÿåº¦é€šè¿‡é‡‡æ ·è®¡ç®—å¾—å‡ºï¼š</p>
<ol>
<li>å®šæœŸè®°å½•å·²ä¸Šä¼ çš„å­—èŠ‚æ•°å’Œæ—¶é—´æˆ³</li>
<li>è®¡ç®—æ—¶é—´é—´éš”å†…çš„å­—èŠ‚å¢é‡</li>
<li>ä½¿ç”¨ç§»åŠ¨å¹³å‡ç®—æ³•å¹³æ»‘é€Ÿåº¦æ³¢åŠ¨</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€Ÿåº¦è®¡ç®—ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> currentBytes = fileData.<span class="hljs-property">loaded</span>;
<span class="hljs-keyword">const</span> currentTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
<span class="hljs-keyword">const</span> deltaBytes = currentBytes - fileData.<span class="hljs-property">lastUploadedBytes</span>;
<span class="hljs-keyword">const</span> deltaTime = currentTime - fileData.<span class="hljs-property">lastUpdateTime</span>;
<span class="hljs-keyword">const</span> speed = deltaBytes / (deltaTime / <span class="hljs-number">1000</span>); <span class="hljs-comment">// bytes/s</span>

<span class="hljs-comment">// ä½¿ç”¨æ ·æœ¬æ•°ç»„å¹³æ»‘é€Ÿåº¦</span>
fileData.<span class="hljs-property">speedSamples</span>.<span class="hljs-title function_">push</span>(speed);
<span class="hljs-keyword">if</span> (fileData.<span class="hljs-property">speedSamples</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">5</span>) {
  fileData.<span class="hljs-property">speedSamples</span>.<span class="hljs-title function_">shift</span>();
}
<span class="hljs-keyword">const</span> avgSpeed = fileData.<span class="hljs-property">speedSamples</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b) / fileData.<span class="hljs-property">speedSamples</span>.<span class="hljs-property">length</span>;
</code></pre>
<p><strong>å‰©ä½™æ—¶é—´é¢„æµ‹</strong></p>
<p>åŸºäºå½“å‰é€Ÿåº¦å’Œå‰©ä½™å­—èŠ‚æ•°ï¼Œé¢„æµ‹å‰©ä½™æ—¶é—´ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> remainingBytes = fileData.<span class="hljs-property">size</span> - fileData.<span class="hljs-property">loaded</span>;
<span class="hljs-keyword">const</span> remainingTime = remainingBytes / avgSpeed; <span class="hljs-comment">// seconds</span>
</code></pre>
<h2 data-id="heading-10">å››ã€ è‡ªå®šä¹‰ UI å±•ç¤º</h2>
<p>é€šè¿‡æ’æ§½å®Œå…¨è‡ªå®šä¹‰æ–‡ä»¶åˆ—è¡¨çš„å±•ç¤ºï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue2NiubilityUploader
    :request-handler="requestHandler"
    multiple
  &gt;
    &lt;!-- è‡ªå®šä¹‰æ–‡ä»¶é¡¹ --&gt;
    &lt;template #file-item="{ fileData }"&gt;
      &lt;div class="custom-file-item"&gt;
        &lt;div class="file-info"&gt;
          &lt;img :src="getFileIcon(fileData.file)" class="file-icon" /&gt;
          &lt;div class="file-details"&gt;
            &lt;div class="file-name"&gt;{{ fileData.name }}&lt;/div&gt;
            &lt;div class="file-size"&gt;{{ formatSize(fileData.size) }}&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class="file-progress" v-if="fileData.status === 'uploading'"&gt;
          &lt;div class="progress-bar"&gt;
            &lt;div
              class="progress-fill"
              :style="{ width: fileData.progress + '%' }"
            &gt;&lt;/div&gt;
          &lt;/div&gt;
          &lt;div class="progress-info"&gt;
            &lt;span&gt;{{ fileData.speed }}&lt;/span&gt;
            &lt;span&gt;{{ fileData.remainingTime }}&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class="file-actions"&gt;
          &lt;button
            v-if="fileData.status === 'uploading'"
            @click="pauseUpload(fileData)"
          &gt;
            æš‚åœ
          &lt;/button&gt;
          &lt;button
            v-if="fileData.status === 'paused'"
            @click="resumeUpload(fileData)"
          &gt;
            ç»§ç»­
          &lt;/button&gt;
          &lt;button @click="removeFile(fileData)"&gt;åˆ é™¤&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/template&gt;
  &lt;/Vue2NiubilityUploader&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    getFileIcon(file) {
      const ext = file.name.split('.').pop().toLowerCase();
      const iconMap = {
        pdf: '/icons/pdf.png',
        doc: '/icons/word.png',
        docx: '/icons/word.png',
        xls: '/icons/excel.png',
        xlsx: '/icons/excel.png',
      };
      return iconMap[ext] || '/icons/file.png';
    },

    formatSize(bytes) {
      if (bytes &lt; 1024) return bytes + ' B';
      if (bytes &lt; 1024 * 1024) return (bytes / 1024).toFixed(2) + ' KB';
      return (bytes / 1024 / 1024).toFixed(2) + ' MB';
    }
  }
}
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-11">äº”ã€é«˜çº§é…ç½®ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-12">5.1 å¹¶å‘æ§åˆ¶ä¼˜åŒ–</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œåˆç†è®¾ç½®å¹¶å‘æ•°å¯ä»¥æ˜¾è‘—æå‡ä¸Šä¼ æ•ˆç‡ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;Vue2NiubilityUploader
  :request-handler="requestHandler"
  :max-concurrent-uploads="5"
  use-chunked-upload
  :chunk-size="5*1024*1024"
/&gt;
</code></pre>
<p><strong>å»ºè®®é…ç½®ï¼š</strong></p>
<ul>
<li>å°æ–‡ä»¶ï¼ˆ&lt; 10MBï¼‰ï¼šå¹¶å‘æ•° 5-10</li>
<li>å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ï¼šå¹¶å‘æ•° 3-5</li>
<li>ç§»åŠ¨ç«¯ç½‘ç»œï¼šå¹¶å‘æ•° 2-3</li>
</ul>
<h3 data-id="heading-13">5.2 è¯·æ±‚å®šåˆ¶</h3>
<p><code>requestHandler</code> æä¾›äº†å®Œå…¨çš„è¯·æ±‚å®šåˆ¶èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">requestHandler</span>(<span class="hljs-params">fileData</span>) {
  <span class="hljs-keyword">const</span> { file, isUploadChunk, chunkIndex, chunk, <span class="hljs-attr">fileData</span>: chunkFileData } = fileData;

  <span class="hljs-comment">// æ ¹æ®ä¸åŒæ¡ä»¶è¿”å›ä¸åŒçš„è¯·æ±‚é…ç½®</span>
  <span class="hljs-keyword">if</span> (isUploadChunk) {
    <span class="hljs-comment">// åˆ†ç‰‡ä¸Šä¼ </span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/api/upload/chunk'</span>,
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">data</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildChunkFormData</span>(chunk, chunkFileData, chunkIndex),
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.token}</span>`</span>,
        <span class="hljs-string">'X-Upload-Id'</span>: chunkFileData.<span class="hljs-property">extendData</span>.<span class="hljs-property">uploadId</span>
      },
      <span class="hljs-comment">// è‡ªå®šä¹‰è¶…æ—¶æ—¶é—´</span>
      <span class="hljs-attr">timeout</span>: <span class="hljs-number">60000</span>,
      <span class="hljs-comment">// è‡ªå®šä¹‰è¯·æ±‚æ‹¦æˆªå™¨</span>
      <span class="hljs-attr">onUploadProgress</span>: <span class="hljs-function">(<span class="hljs-params">progressEvent</span>) =&gt;</span> {
        <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œåšé¢å¤–çš„è¿›åº¦å¤„ç†</span>
      }
    };
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ™®é€šä¸Šä¼ </span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/api/upload'</span>,
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">data</span>: { file, <span class="hljs-attr">name</span>: file.<span class="hljs-property">name</span> }
    };
  }
}
</code></pre>
<h3 data-id="heading-14">5.3 é”™è¯¯å¤„ç†ä¸é‡è¯•</h3>
<p>ç»„ä»¶å†…ç½®äº†å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡äº‹ä»¶ç›‘å¬è‡ªå®šä¹‰é”™è¯¯å¤„ç†ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue2NiubilityUploader
    :request-handler="requestHandler"
    @file-upload-error="onUploadError"
    @file-error="onFileError"
  /&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      retryCount: 0,
      maxRetries: 3
    }
  },

  methods: {
    async onUploadError({ fileData, error }) {
      console.error('ä¸Šä¼ å¤±è´¥:', error);

      // è‡ªåŠ¨é‡è¯•é€»è¾‘
      if (this.retryCount &lt; this.maxRetries) {
        this.retryCount++;
        this.$message.warning(`ä¸Šä¼ å¤±è´¥ï¼Œæ­£åœ¨é‡è¯• (${this.retryCount}/${this.maxRetries})`);

        // å»¶è¿Ÿ 2 ç§’åé‡è¯•
        await new Promise(resolve =&gt; setTimeout(resolve, 2000));
        this.$refs.uploader.retryUpload(fileData);
      } else {
        this.$message.error('ä¸Šä¼ å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•');
        this.retryCount = 0;
      }
    },

    onFileError(errorInfo) {
      // æ–‡ä»¶éªŒè¯é”™è¯¯
      const errorMessages = {
        'exceed-limit': 'æ–‡ä»¶æ•°é‡è¶…å‡ºé™åˆ¶',
        'exceed-size': 'æ–‡ä»¶å¤§å°è¶…å‡ºé™åˆ¶',
        'invalid-type': 'æ–‡ä»¶ç±»å‹ä¸ç¬¦åˆè¦æ±‚'
      };

      this.$message.error(errorMessages[errorInfo.type] || errorInfo.message);
    }
  }
}
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-15">å…­ã€ Node.js ç¤ºä¾‹å®ç°</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> multer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'multer'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cors'</span>);
<span class="hljs-keyword">const</span> { formidable } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'formidable'</span>);

<span class="hljs-comment">// Create Express app</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">3001</span>;

<span class="hljs-comment">// Enable CORS</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>());

<span class="hljs-comment">// Middleware to parse JSON</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">limit</span>: <span class="hljs-string">'50mb'</span> }));
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">urlencoded</span>({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">limit</span>: <span class="hljs-string">'50mb'</span> }));

<span class="hljs-comment">// Create upload directory if it doesn't exist</span>
<span class="hljs-keyword">const</span> uploadDir = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'temp'</span>);
<span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(uploadDir)) {
  fs.<span class="hljs-title function_">mkdirSync</span>(uploadDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
}

<span class="hljs-comment">// Temporary directory for chunked uploads</span>
<span class="hljs-keyword">const</span> tempDir = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'chunk-temp'</span>);
<span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(tempDir)) {
  fs.<span class="hljs-title function_">mkdirSync</span>(tempDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
}

<span class="hljs-comment">// Configure multer for regular file uploads</span>
<span class="hljs-keyword">const</span> storage = multer.<span class="hljs-title function_">diskStorage</span>({
  <span class="hljs-attr">destination</span>: <span class="hljs-function">(<span class="hljs-params">req, file, cb</span>) =&gt;</span> {
    <span class="hljs-title function_">cb</span>(<span class="hljs-literal">null</span>, uploadDir);
  },
  <span class="hljs-attr">filename</span>: <span class="hljs-function">(<span class="hljs-params">req, file, cb</span>) =&gt;</span> {
    <span class="hljs-comment">// Use original filename with timestamp to avoid conflicts</span>
    <span class="hljs-keyword">const</span> mimeType = file.<span class="hljs-property">mimetype</span>;
    <span class="hljs-keyword">const</span> fileName = <span class="hljs-string">'img.'</span> + mimeType.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>).<span class="hljs-title function_">pop</span>().<span class="hljs-title function_">toLowerCase</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'multer.diskStorage, filename'</span>, fileName, file);
    <span class="hljs-keyword">const</span> ext = path.<span class="hljs-title function_">extname</span>(file.<span class="hljs-property">originalname</span> || fileName);
    <span class="hljs-keyword">const</span> name = path.<span class="hljs-title function_">basename</span>(file.<span class="hljs-property">originalname</span> || fileName, ext);
    <span class="hljs-keyword">const</span> filename = <span class="hljs-string">`<span class="hljs-subst">${name}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span><span class="hljs-subst">${ext}</span>`</span>;
    <span class="hljs-title function_">cb</span>(<span class="hljs-literal">null</span>, filename);
  }
});

<span class="hljs-keyword">const</span> upload = <span class="hljs-title function_">multer</span>({
  <span class="hljs-attr">storage</span>: storage,
  <span class="hljs-attr">limits</span>: {
    <span class="hljs-attr">fileSize</span>: <span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> <span class="hljs-comment">// 10GB max file size</span>
  }
});

<span class="hljs-comment">// In-memory storage for upload sessions (in production, use Redis or database)</span>
<span class="hljs-keyword">const</span> uploadSessions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();


<span class="hljs-comment">/**
 * GET /health - Health check endpoint
 */</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/health'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">status</span>: <span class="hljs-string">'OK'</span>, <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>() });
});

<span class="hljs-comment">/**
 * POST /upload - Single file upload endpoint
 */</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload'</span>, upload.<span class="hljs-title function_">single</span>(<span class="hljs-string">'file'</span>), <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (!req.<span class="hljs-property">file</span>) {
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'No file uploaded'</span> });
    }

    <span class="hljs-keyword">let</span> name = req.<span class="hljs-property">name</span>;
    <span class="hljs-comment">// Return success response with file info</span>
    res.<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'File uploaded successfully'</span>,
      <span class="hljs-attr">file</span>: {
        <span class="hljs-attr">filename</span>: req.<span class="hljs-property">file</span>.<span class="hljs-property">filename</span> || name,
        <span class="hljs-attr">originalName</span>: req.<span class="hljs-property">file</span>.<span class="hljs-property">originalname</span> || name,
        <span class="hljs-attr">size</span>: req.<span class="hljs-property">file</span>.<span class="hljs-property">size</span>,
        <span class="hljs-attr">path</span>: req.<span class="hljs-property">file</span>.<span class="hljs-property">path</span>
      }
    });
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Upload error:'</span>, error);
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Failed to upload file'</span> });
  }
});

<span class="hljs-comment">/**
 * POST /upload/init - Initialize a chunked upload session
 */</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload/init'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> { fileName, fileSize, fileType, uploadId } = req.<span class="hljs-property">body</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'/upload/init'</span>, req.<span class="hljs-property">body</span>);

    <span class="hljs-keyword">if</span> (!fileName || !fileSize) {
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Missing required fields: fileName, fileSize'</span> });
    }

    <span class="hljs-comment">// Create session data</span>
    <span class="hljs-keyword">const</span> session = {
      uploadId,
      fileName,
      <span class="hljs-attr">fileSize</span>: <span class="hljs-built_in">parseInt</span>(fileSize),
      <span class="hljs-attr">fileType</span>: fileType || <span class="hljs-string">''</span>,
      <span class="hljs-attr">uploadedSize</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">totalChunks</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">uploadedChunks</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),
      <span class="hljs-attr">createdAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
      <span class="hljs-attr">expiresAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>).<span class="hljs-title function_">toISOString</span>(), <span class="hljs-comment">// 1 hours</span>
      <span class="hljs-attr">tempFilePath</span>: path.<span class="hljs-title function_">join</span>(tempDir, uploadId)
    };

    <span class="hljs-keyword">const</span> tempFilePath = path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">`./chunk-temp/<span class="hljs-subst">${uploadId}</span>`</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'/upload/init, tempFilePath'</span>, fs.<span class="hljs-title function_">existsSync</span>(session.<span class="hljs-property">tempFilePath</span>), session.<span class="hljs-property">tempFilePath</span>, tempFilePath);
    <span class="hljs-comment">// Create temporary directory for this upload</span>
    <span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(tempFilePath)) {
      <span class="hljs-keyword">try</span> {
        fs.<span class="hljs-title function_">mkdirSync</span>(tempFilePath, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆ›å»ºæ–‡ä»¶å¤¹å¤±è´¥'</span>, err);
      }

    }

    <span class="hljs-comment">// Store session</span>
    uploadSessions.<span class="hljs-title function_">set</span>(uploadId, session);

    <span class="hljs-comment">// Clean up expired sessions periodically</span>
    <span class="hljs-keyword">if</span> (uploadSessions.<span class="hljs-property">size</span> &gt; <span class="hljs-number">100</span>) { <span class="hljs-comment">// Clean up if we have too many sessions</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'/upload/init æ¸…ç©ºsession'</span>)
      <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [id, session] <span class="hljs-keyword">of</span> uploadSessions) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(session.<span class="hljs-property">expiresAt</span>).<span class="hljs-title function_">getTime</span>() &lt; now) {
          <span class="hljs-title function_">cleanupUploadSession</span>(id);
        }
      }
    }

    <span class="hljs-comment">// Return session info</span>
    res.<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
      uploadId,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Upload session initialized successfully'</span>
    });

  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Init upload error:'</span>, error);
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Failed to initialize upload session'</span> });
  }
});

<span class="hljs-comment">/**
 * è·¨åˆ†åŒºç§»åŠ¨æ–‡ä»¶
 * <span class="hljs-doctag">@param</span> sourcePath æºæ–‡ä»¶åœ°å€
 * <span class="hljs-doctag">@param</span> targetPath ç›®æ ‡æ–‡ä»¶åœ°å€
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;void&gt;</span>}
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">moveFileAcrossPartitions</span>(<span class="hljs-params">sourcePath, targetPath</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// ç¡®ä¿ç›®æ ‡ç›®å½•å­˜åœ¨</span>
    <span class="hljs-keyword">const</span> targetDir = path.<span class="hljs-title function_">dirname</span>(targetPath);
    fs.<span class="hljs-title function_">mkdirSync</span>(targetDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });

    <span class="hljs-comment">// åˆ›å»ºå¯è¯»æµå’Œå¯å†™æµ</span>
    <span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(sourcePath);
    <span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(targetPath);

    <span class="hljs-comment">// ç®¡é“ä¼ è¾“æ•°æ®</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      readStream.<span class="hljs-title function_">pipe</span>(writeStream)
        .<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, resolve)
        .<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, reject);
    });

    <span class="hljs-comment">// åˆ é™¤æºæ–‡ä»¶</span>
    fs.<span class="hljs-title function_">unlinkSync</span>(sourcePath);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ–‡ä»¶ç§»åŠ¨æˆåŠŸï¼ˆè·¨åˆ†åŒºï¼‰ï¼Œæºæ–‡ä»¶ï¼š<span class="hljs-subst">${sourcePath}</span>ï¼Œç›®æ ‡æ–‡ä»¶ï¼š<span class="hljs-subst">${targetPath}</span>`</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç§»åŠ¨æ–‡ä»¶å¤±è´¥:'</span>, err);
  }
}

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload/chunk'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">try</span> {

    <span class="hljs-keyword">const</span> form = <span class="hljs-title function_">formidable</span>({
      <span class="hljs-attr">multiples</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-comment">// maxFileSize: 100 * 1024 * 1024 // 100MB</span>
    });

    form.<span class="hljs-title function_">parse</span>(req, <span class="hljs-keyword">async</span> (err, fields, files) =&gt; {
      <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({
          <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'è§£æè¡¨å•å¤±è´¥: '</span> + err.<span class="hljs-property">message</span>
        });
      }

      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// console.log('fields', fields);</span>
        <span class="hljs-keyword">const</span> { uploadId, chunkIndex, filename, chunk, totalChunks } = fields;
        <span class="hljs-keyword">const</span> chunkFiles = files.<span class="hljs-property">file</span> || [];

        <span class="hljs-keyword">const</span> chunkIndexInt = <span class="hljs-built_in">parseInt</span>(chunkIndex[<span class="hljs-number">0</span>]);
        <span class="hljs-keyword">const</span> totalChunksInt = <span class="hljs-built_in">parseInt</span>(totalChunks[<span class="hljs-number">0</span>]);
        <span class="hljs-comment">// console.log('chunkFiles', chunkFiles);</span>
        <span class="hljs-keyword">if</span> (chunkFiles.<span class="hljs-property">length</span> == <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({
            <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">message</span>: <span class="hljs-string">'æœªæ”¶åˆ°åˆ†ç‰‡æ–‡ä»¶'</span>
          });
        }


        <span class="hljs-keyword">if</span> (!uploadId[<span class="hljs-number">0</span>] || <span class="hljs-built_in">isNaN</span>(chunkIndexInt) || <span class="hljs-built_in">isNaN</span>(totalChunks)) {
          <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Missing required fields: uploadId, chunkIndex, totalChunks'</span> });
        }

        <span class="hljs-comment">// Check if upload session exists</span>
        <span class="hljs-keyword">const</span> session = uploadSessions.<span class="hljs-title function_">get</span>(uploadId[<span class="hljs-number">0</span>]);
        <span class="hljs-keyword">if</span> (!session) {
          <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Upload session not found'</span> });
        }

        <span class="hljs-comment">// Check if chunk was already uploaded</span>
        <span class="hljs-keyword">if</span> (session.<span class="hljs-property">uploadedChunks</span>.<span class="hljs-title function_">has</span>(chunkIndexInt)) {
          <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>({
            <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">message</span>: <span class="hljs-string">'Chunk already uploaded'</span>,
            <span class="hljs-attr">chunkIndex</span>: chunkIndexInt,
            <span class="hljs-attr">status</span>: <span class="hljs-string">'duplicate'</span>
          });
        }

        <span class="hljs-comment">// ç§»åŠ¨ä¸´æ—¶æ–‡ä»¶åˆ°ç›®æ ‡ä½ç½®</span>
        <span class="hljs-keyword">const</span> chunkPath = path.<span class="hljs-title function_">join</span>(session.<span class="hljs-property">tempFilePath</span>, <span class="hljs-string">`chunk_<span class="hljs-subst">${chunkIndexInt}</span>.tmp`</span>);
        <span class="hljs-comment">// fs.renameSync(chunkFiles[0].filepath, chunkPath);</span>
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">moveFileAcrossPartitions</span>(chunkFiles[<span class="hljs-number">0</span>].<span class="hljs-property">filepath</span>, chunkPath);


        <span class="hljs-comment">// Update session with chunk info</span>
        session.<span class="hljs-property">uploadedChunks</span>.<span class="hljs-title function_">add</span>(chunkIndexInt);
        <span class="hljs-comment">// session.uploadedSize += req.file.size;</span>
        session.<span class="hljs-property">uploadedSize</span> += chunkFiles[<span class="hljs-number">0</span>].<span class="hljs-property">length</span> || <span class="hljs-number">0</span>;
        session.<span class="hljs-property">totalChunks</span> = totalChunksInt;

        <span class="hljs-comment">// Update expiration time</span>
        session.<span class="hljs-property">expiresAt</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>).<span class="hljs-title function_">toISOString</span>();

        <span class="hljs-comment">// Return success response</span>
        res.<span class="hljs-title function_">json</span>({
          <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'Chunk uploaded successfully'</span>,
          <span class="hljs-attr">chunkIndex</span>: chunkIndexInt,
          <span class="hljs-attr">totalChunks</span>: totalChunksInt,
          <span class="hljs-attr">uploadedSize</span>: session.<span class="hljs-property">uploadedSize</span>,
          <span class="hljs-attr">progress</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>((session.<span class="hljs-property">uploadedSize</span> / session.<span class="hljs-property">fileSize</span>) * <span class="hljs-number">100</span>)
        });

      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({
          <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">'åˆ†ç‰‡ä¸Šä¼ å¤±è´¥: '</span> + error.<span class="hljs-property">message</span>
        });
      }
    });

  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Chunk upload error:'</span>, error);
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Failed to upload chunk'</span> });
  }
});

<span class="hljs-comment">/**
 * POST /upload/finalize - Finalize a chunked upload
 */</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload/finalize'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> { uploadId, fileName, fileSize } = req.<span class="hljs-property">body</span>;

    <span class="hljs-keyword">if</span> (!uploadId) {
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Missing required field: uploadId'</span> });
    }

    <span class="hljs-comment">// Check if upload session exists</span>
    <span class="hljs-keyword">const</span> session = uploadSessions.<span class="hljs-title function_">get</span>(uploadId);
    <span class="hljs-comment">// console.log('/upload/finalize, session', uploadId, session, uploadSessions);</span>
    <span class="hljs-keyword">if</span> (!session) {
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Upload session not found'</span> });
    }

    <span class="hljs-comment">// Verify all chunks were uploaded</span>
    <span class="hljs-keyword">if</span> (session.<span class="hljs-property">uploadedChunks</span>.<span class="hljs-property">size</span> !== session.<span class="hljs-property">totalChunks</span>) {
      <span class="hljs-keyword">const</span> missingChunks = [];
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; session.<span class="hljs-property">totalChunks</span>; i++) {
        <span class="hljs-keyword">if</span> (!session.<span class="hljs-property">uploadedChunks</span>.<span class="hljs-title function_">has</span>(i)) {
          missingChunks.<span class="hljs-title function_">push</span>(i);
        }
      }

      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({
        <span class="hljs-attr">error</span>: <span class="hljs-string">'Not all chunks have been uploaded'</span>,
        missingChunks,
        <span class="hljs-attr">uploadedChunks</span>: <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(session.<span class="hljs-property">uploadedChunks</span>),
        <span class="hljs-attr">totalChunks</span>: session.<span class="hljs-property">totalChunks</span>
      });
    }

    <span class="hljs-comment">// Verify file size matches</span>
    <span class="hljs-keyword">if</span> (fileSize &amp;&amp; <span class="hljs-built_in">parseInt</span>(fileSize) !== session.<span class="hljs-property">fileSize</span>) {
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({
        <span class="hljs-attr">error</span>: <span class="hljs-string">'File size mismatch'</span>,
        <span class="hljs-attr">expected</span>: session.<span class="hljs-property">fileSize</span>,
        <span class="hljs-attr">actual</span>: fileSize
      });
    }

    <span class="hljs-comment">// Reassemble the file from chunks</span>
    <span class="hljs-keyword">const</span> finalFilePath = path.<span class="hljs-title function_">join</span>(tempDir, session.<span class="hljs-property">fileName</span>);
    <span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(finalFilePath);

    <span class="hljs-comment">// Sort chunks by index and pipe them in order</span>
    <span class="hljs-keyword">const</span> chunkFiles = fs.<span class="hljs-title function_">readdirSync</span>(session.<span class="hljs-property">tempFilePath</span>);
    <span class="hljs-keyword">const</span> sortedChunks = chunkFiles
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'chunk_'</span>))
      .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> indexA = <span class="hljs-built_in">parseInt</span>(a.<span class="hljs-title function_">split</span>(<span class="hljs-string">'_'</span>)[<span class="hljs-number">1</span>]);
        <span class="hljs-keyword">const</span> indexB = <span class="hljs-built_in">parseInt</span>(b.<span class="hljs-title function_">split</span>(<span class="hljs-string">'_'</span>)[<span class="hljs-number">1</span>]);
        <span class="hljs-keyword">return</span> indexA - indexB;
      });

    <span class="hljs-keyword">let</span> chunksProcessed = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// console.log('/upload/finalize, sortedChunks', sortedChunks);</span>
    <span class="hljs-comment">// Process each chunk in sequence</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> chunkFile <span class="hljs-keyword">of</span> sortedChunks) {
      <span class="hljs-keyword">const</span> chunkPath = path.<span class="hljs-title function_">join</span>(session.<span class="hljs-property">tempFilePath</span>, chunkFile);
      <span class="hljs-keyword">const</span> chunkData = fs.<span class="hljs-title function_">readFileSync</span>(chunkPath);

      <span class="hljs-keyword">if</span> (!writeStream.<span class="hljs-title function_">write</span>(chunkData)) {
        <span class="hljs-comment">// If the stream wants us to wait, wait until it's ready</span>
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> writeStream.<span class="hljs-title function_">once</span>(<span class="hljs-string">'drain'</span>, resolve));
      }

      chunksProcessed++;
    }

    <span class="hljs-comment">// Close the write stream</span>
    writeStream.<span class="hljs-title function_">end</span>();

    <span class="hljs-comment">// Wait for the stream to finish writing</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      writeStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, resolve);
      writeStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, reject);
    });

    <span class="hljs-comment">// Verify the final file size</span>
    <span class="hljs-keyword">const</span> finalStats = fs.<span class="hljs-title function_">statSync</span>(finalFilePath);
    <span class="hljs-keyword">if</span> (finalStats.<span class="hljs-property">size</span> !== session.<span class="hljs-property">fileSize</span>) {
      <span class="hljs-comment">// Clean up and return error</span>
      fs.<span class="hljs-title function_">unlinkSync</span>(finalFilePath);
      <span class="hljs-title function_">cleanupUploadSession</span>(uploadId);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({
        <span class="hljs-attr">error</span>: <span class="hljs-string">'Final file size does not match expected size'</span>,
        <span class="hljs-attr">expected</span>: session.<span class="hljs-property">fileSize</span>,
        <span class="hljs-attr">actual</span>: finalStats.<span class="hljs-property">size</span>,
        finalFilePath
      });
    }

    <span class="hljs-comment">// Clean up temporary files</span>
    <span class="hljs-title function_">cleanupUploadSession</span>(uploadId);

    <span class="hljs-comment">// Return success response</span>
    res.<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'File uploaded successfully'</span>,
      <span class="hljs-attr">file</span>: {
        <span class="hljs-attr">filename</span>: session.<span class="hljs-property">fileName</span>,
        <span class="hljs-attr">size</span>: finalStats.<span class="hljs-property">size</span>,
        <span class="hljs-attr">path</span>: finalFilePath
      }
    });

  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Finalize upload error:'</span>, error);
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Failed to finalize upload'</span> });
  }
});

<span class="hljs-comment">/**
 * Clean up upload session and temporary files
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">uploadId</span> - The upload session ID
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanupUploadSession</span>(<span class="hljs-params">uploadId</span>) {
  <span class="hljs-keyword">const</span> session = uploadSessions.<span class="hljs-title function_">get</span>(uploadId);
  <span class="hljs-comment">// console.log('cleanupUploadSession', uploadId, session);</span>
  <span class="hljs-keyword">if</span> (session) {
    <span class="hljs-comment">// Remove temporary directory</span>
    <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(session.<span class="hljs-property">tempFilePath</span>)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'cleanupUploadSessionåˆ é™¤ä¸´æ—¶ç›®å½•'</span>, session.<span class="hljs-property">tempFilePath</span>);
      <span class="hljs-keyword">try</span> {
        fs.<span class="hljs-title function_">rmSync</span>(session.<span class="hljs-property">tempFilePath</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove temp directory for <span class="hljs-subst">${uploadId}</span>:`</span>, error);
      }
    }

    <span class="hljs-comment">// Remove session from map</span>
    uploadSessions.<span class="hljs-title function_">delete</span>(uploadId);
  }
}

<span class="hljs-comment">// Periodic cleanup of expired sessions (every hour)</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [id, session] <span class="hljs-keyword">of</span> uploadSessions) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(session.<span class="hljs-property">expiresAt</span>).<span class="hljs-title function_">getTime</span>() &lt; now) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Cleaning up expired upload session: <span class="hljs-subst">${id}</span>`</span>);
      <span class="hljs-title function_">cleanupUploadSession</span>(id);
    }
  }
}, <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>); <span class="hljs-comment">// Every hour</span>

<span class="hljs-comment">// Start server</span>
app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ <span class="hljs-subst">${PORT}</span>`</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ–‡ä»¶ä¸Šä¼ æœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ <span class="hljs-subst">${PORT}</span>`</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœåŠ¡åœ°å€: http://localhost:<span class="hljs-subst">${PORT}</span>`</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Upload directory: <span class="hljs-subst">${uploadDir}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Temp directory: <span class="hljs-subst">${tempDir}</span>`</span>);
  <span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(tempDir)) {
    fs.<span class="hljs-title function_">mkdirSync</span>(tempDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
  }
  <span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(uploadDir)) {
    fs.<span class="hljs-title function_">mkdirSync</span>(uploadDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
  }
});

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = app;

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Git å…¥é—¨æ•™ç¨‹ï¼šåˆå§‹åŒ–ã€ä¿®æ”¹ä¸æäº¤]]></title>    <link>https://juejin.cn/post/7579551362154414089</link>    <guid>https://juejin.cn/post/7579551362154414089</guid>    <pubDate>2025-12-04T02:43:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579551362154414089" data-draft-id="7579673620940439602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Git å…¥é—¨æ•™ç¨‹ï¼šåˆå§‹åŒ–ã€ä¿®æ”¹ä¸æäº¤"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2025-12-04T02:43:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç³»å¤æ™®"/> <meta itemprop="url" content="https://juejin.cn/user/895462143964748"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Git å…¥é—¨æ•™ç¨‹ï¼šåˆå§‹åŒ–ã€ä¿®æ”¹ä¸æäº¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895462143964748/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç³»å¤æ™®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:43:27.000Z" title="Thu Dec 04 2025 02:43:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡é€šè¿‡ä¸€ä¸ªç®€å•çš„ C++ â€œHello Worldâ€ ç¨‹åºï¼Œæ¼”ç¤º Git çš„åŸºæœ¬å·¥ä½œæµç¨‹ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–ä»“åº“ã€æ·»åŠ æ–‡ä»¶ã€æäº¤æ›´æ”¹ã€æŸ¥çœ‹çŠ¶æ€ä¸å·®å¼‚ç­‰æ ¸å¿ƒæ“ä½œã€‚</p>
<hr/>
<h2 data-id="heading-0">1. åˆ›å»ºé¡¹ç›®ç›®å½•å¹¶åˆå§‹åŒ– Git ä»“åº“</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> learngit
<span class="hljs-built_in">cd</span> learngit
git init
Initialized empty Git repository <span class="hljs-keyword">in</span> /home/cyk/Desktop/learngit/.git/
</code></pre>
<p>æ­¤æ—¶ï¼Œ<code>learngit</code> ç›®å½•å·²å˜ä¸ºä¸€ä¸ª Git ä»“åº“ï¼ˆåŒ…å«éšè—çš„ <code>.git</code> å­ç›®å½•ï¼‰ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æœ‰æ–‡ä»¶çš„ç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»“åº“ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. ç¼–å†™æºä»£ç æ–‡ä»¶ hello.cpp</h2>
<p>åˆ›å»ºæ–‡ä»¶å¹¶æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
â€‹
using namespace <span class="hljs-built_in">std</span>;
â€‹
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
 Â  Â <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Hello World!"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
 Â  Â <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>éªŒè¯å†…å®¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> hello.cpp
</code></pre>
<blockquote>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
â€‹
using namespace <span class="hljs-built_in">std</span>;
â€‹
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
 Â   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Hello World!"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
 Â   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
</blockquote>
<hr/>
<h2 data-id="heading-2">3. ç¼–è¯‘å¹¶è¿è¡Œç¨‹åº</h2>
<pre><code class="hljs language-bash" lang="bash">g++ hello.cpp -o hello
./hello
</code></pre>
<blockquote>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs">Hello World!
</code></pre>
</blockquote>
<p>ç¨‹åºç¼–è¯‘æˆåŠŸå¹¶æ­£å¸¸è¿è¡Œã€‚</p>
<hr/>
<h2 data-id="heading-3">4. æŸ¥çœ‹ Git çŠ¶æ€ï¼ˆé¦–æ¬¡ï¼‰</h2>
<p><code>git status</code>Â æ˜¯ Git ä¸­æœ€å¸¸ç”¨çš„åŸºç¡€å‘½ä»¤ä¹‹ä¸€ï¼Œç”¨äº<strong>æŸ¥çœ‹å½“å‰å·¥ä½œåŒºã€æš‚å­˜åŒºï¼ˆç´¢å¼•ï¼‰ä¸æœ¬åœ°ä»“åº“çš„çŠ¶æ€å·®å¼‚</strong>ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯å‘Šè¯‰ä½ ï¼šå½“å‰ä»“åº“çš„æ–‡ä»¶æœ‰å“ªäº›ä¿®æ”¹ã€å“ªäº›å·²æš‚å­˜ã€å“ªäº›æœªè·Ÿè¸ªï¼Œä»¥åŠåˆ†æ”¯çŠ¶æ€ç­‰å…³é”®ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-4">4.1ã€æ ¸å¿ƒåŠŸèƒ½ï¼šå®ƒèƒ½å‘Šè¯‰ä½ ä»€ä¹ˆï¼Ÿ</h3>
<p>æ‰§è¡ŒÂ <code>git status</code>Â åï¼Œè¾“å‡ºä¼šå›´ç»• 4 ç±»æ–‡ä»¶çŠ¶æ€å±•å¼€ï¼Œå¸®ä½ ç†æ¸…ä»£ç å˜æ›´çš„ â€œå½’å±â€ï¼š</p>
<ol>
<li><strong>æœªè·Ÿè¸ªæ–‡ä»¶ï¼ˆUntracked filesï¼‰</strong> ï¼šå·¥ä½œåŒºä¸­æ–°å¢çš„ã€Git ä¹‹å‰ä»æœªç®¡ç†è¿‡çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚æ–°å»ºçš„Â <code>hello.cpp</code>ï¼‰ã€‚Git ä¸ä¼šè‡ªåŠ¨è·Ÿè¸ªè¿™äº›æ–‡ä»¶ï¼Œéœ€è¦é€šè¿‡Â <code>git add æ–‡ä»¶å</code>Â æ‰‹åŠ¨åŠ å…¥æš‚å­˜åŒºã€‚</li>
<li><strong>å·²ä¿®æ”¹ä½†æœªæš‚å­˜ï¼ˆModified but not stagedï¼‰</strong> ï¼šä¹‹å‰å·²è¢« Git è·Ÿè¸ªçš„æ–‡ä»¶ï¼ˆæ¯”å¦‚å·²æäº¤è¿‡çš„Â <code>hello.cpp</code>ï¼‰è¢«ä¿®æ”¹äº†ï¼Œä½†ä¿®æ”¹å†…å®¹è¿˜æ²¡æ·»åŠ åˆ°æš‚å­˜åŒºã€‚éœ€è¦Â <code>git add æ–‡ä»¶å</code>Â å°†ä¿®æ”¹åŒæ­¥åˆ°æš‚å­˜åŒºï¼Œæ‰èƒ½åç»­æäº¤ã€‚</li>
<li><strong>å·²æš‚å­˜ä½†æœªæäº¤ï¼ˆChanges to be committedï¼‰</strong> ï¼šå·²é€šè¿‡Â <code>git add</code>Â å°†ä¿®æ”¹ï¼ˆæˆ–æ–°å¢æ–‡ä»¶ï¼‰åŠ å…¥æš‚å­˜åŒºï¼Œç­‰å¾…é€šè¿‡Â <code>git commit</code>Â æäº¤åˆ°æœ¬åœ°ä»“åº“ã€‚è¿™éƒ¨åˆ†å†…å®¹æ˜¯ â€œå¾…æäº¤â€ çš„ï¼Œæäº¤åä»“åº“ä¼šè®°å½•è¿™æ¬¡å˜æ›´ã€‚</li>
<li><strong>åˆ†æ”¯ä¸æäº¤çŠ¶æ€</strong>ï¼šæœ€åä¼šæ˜¾ç¤ºå½“å‰æ‰€åœ¨åˆ†æ”¯ï¼ˆæ¯”å¦‚Â <code>On branch main</code>ï¼‰ï¼Œä»¥åŠå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„åŒæ­¥çŠ¶æ€ï¼ˆæ¯”å¦‚Â <code>Your branch is up to date with 'origin/main'</code>ï¼Œæˆ–Â <code>Your branch is ahead by 1 commit</code>ï¼‰ã€‚</li>
</ol>
<pre><code class="hljs language-lua" lang="lua">git <span class="hljs-built_in">status</span>
</code></pre>
<blockquote>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">On</span> branch master
â€‹
No commits yet
â€‹
Untracked files:
  (use <span class="hljs-string">"git add &lt;file&gt;..."</span> <span class="hljs-keyword">to</span> include <span class="hljs-keyword">in</span> what will be committed)
 Â  Â  Â   hello
 Â  Â  Â   hello.cpp
â€‹
<span class="hljs-literal">nothing</span> added <span class="hljs-keyword">to</span> commit but untracked files present
</code></pre>
</blockquote>
<p>è¯´æ˜ï¼šå½“å‰æœ‰ä¸¤ä¸ªæœªè¢«è¿½è¸ªçš„æ–‡ä»¶ â€”â€” æºç  <code>hello.cpp</code> å’Œå¯æ‰§è¡Œæ–‡ä»¶ <code>hello</code>ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šé€šå¸¸ä¸å°†ç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¦‚ <code>hello</code>ï¼‰çº³å…¥ç‰ˆæœ¬æ§åˆ¶ã€‚ä½†ä¸ºå±•ç¤ºç›®çš„ï¼Œæ­¤å¤„æš‚æ—¶ä¸€å¹¶æäº¤ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">5. æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒºå¹¶æäº¤</h2>
<pre><code class="hljs language-sql" lang="sql">git <span class="hljs-keyword">add</span> .
git <span class="hljs-keyword">commit</span> <span class="hljs-operator">-</span>m "first commit: hello world source file"
</code></pre>
<blockquote>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-sql" lang="sql">[master (root<span class="hljs-operator">-</span><span class="hljs-keyword">commit</span>) e2a5eac] <span class="hljs-keyword">first</span> <span class="hljs-keyword">commit</span>: hello world source file
 <span class="hljs-number">2</span> files changed, <span class="hljs-number">8</span> insertions(<span class="hljs-operator">+</span>)
 <span class="hljs-keyword">create</span> mode <span class="hljs-number">100755</span> hello
 <span class="hljs-keyword">create</span> mode <span class="hljs-number">100644</span> hello.cpp
</code></pre>
</blockquote>
<p>å†æ¬¡æ£€æŸ¥çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">git <span class="hljs-built_in">status</span>
</code></pre>
<blockquote>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">On</span> branch master
<span class="hljs-literal">nothing</span> <span class="hljs-keyword">to</span> commit, working tree clean
</code></pre>
</blockquote>
<p>å·¥ä½œåŒºå¹²å‡€ï¼Œæ‰€æœ‰æ›´æ”¹å·²æäº¤ã€‚</p>
<hr/>
<h2 data-id="heading-6">6. ä¿®æ”¹æºä»£ç </h2>
<p>ç¼–è¾‘ <code>hello.cpp</code>ï¼Œæ–°å¢ä¸€è¡Œè¾“å‡ºï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
â€‹
using namespace <span class="hljs-built_in">std</span>;
â€‹
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
 Â   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Hello World!"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
 Â   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Hello Cpp!"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// â† æ–°å¢è¡Œ</span>
 Â   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-7">7. æŸ¥çœ‹ä¿®æ”¹çŠ¶æ€</h2>
<pre><code class="hljs language-lua" lang="lua">git <span class="hljs-built_in">status</span>
</code></pre>
<blockquote>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">On</span> branch master
Changes <span class="hljs-built_in">not</span> staged <span class="hljs-keyword">for</span> commit:
  (use <span class="hljs-string">"git add &lt;file&gt;..."</span> <span class="hljs-keyword">to</span> update what will be committed)
  (use <span class="hljs-string">"git restore &lt;file&gt;..."</span> <span class="hljs-keyword">to</span> discard changes <span class="hljs-keyword">in</span> working directory)
 Â  Â  Â   modified: Â  hello.cpp
â€‹
no changes added <span class="hljs-keyword">to</span> commit
</code></pre>
</blockquote>
<p>Git æ£€æµ‹åˆ° <code>hello.cpp</code> å·²è¢«ä¿®æ”¹ï¼Œä½†å°šæœªæš‚å­˜ã€‚</p>
<hr/>
<h2 data-id="heading-8">8. æŸ¥çœ‹å…·ä½“ä¿®æ”¹å†…å®¹ï¼ˆä½¿ç”¨ <code>git diff</code>ï¼‰</h2>
<p>å¦‚æœä½ å¿˜è®°äº†è‡ªå·±ä¿®æ”¹äº†ä»€ä¹ˆå†…å®¹ï¼Œæ­¤æ—¶ä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹å¯¹æ¯”ã€‚</p>
<pre><code class="hljs">git diff
</code></pre>
<blockquote>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-comment">diff --git a/hello.cpp b/hello.cpp</span>
<span class="hljs-comment">index 338506b..5997ef5 100644</span>
<span class="hljs-comment">--- a/hello.cpp</span>
<span class="hljs-comment">+++ b/hello.cpp</span>
<span class="hljs-meta">@@ -4,5 +4,6 @@</span> using namespace std;
 
 int main(void) {
 Â  Â  Â   cout &lt;&lt; "Hello World!" &lt;&lt; endl;
<span class="hljs-addition">+ Â  Â  Â  cout &lt;&lt; "Hello Cpp!" &lt;&lt; endl;</span>
 Â  Â  Â   return 0;
 }
</code></pre>
</blockquote>
<p>æ¸…æ™°æ˜¾ç¤ºæ–°å¢äº†ä¸€è¡Œä»£ç ï¼Œæ­¤æ—¶ä½ å¯ä»¥æ”¾å¿ƒçš„æäº¤äº†ã€‚</p>
<hr/>
<h2 data-id="heading-9">9. æäº¤ä¿®æ”¹</h2>
<ol>
<li>
<p>å°†ä¿®æ”¹åŠ å…¥æš‚å­˜åŒºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">git <span class="hljs-keyword">add</span> hello.cpp
</code></pre>
</li>
<li>
<p>æäº¤æ›´æ”¹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">git <span class="hljs-keyword">commit</span> <span class="hljs-operator">-</span>m "add 'Hello Cpp!' output"
</code></pre>
</li>
</ol>
<blockquote>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">master 0e38978</span>] <span class="hljs-keyword">add</span> <span class="hljs-string">'Hello Cpp!'</span> output
 <span class="hljs-number">1</span> file changed, <span class="hljs-number">1</span> insertion(+)
</code></pre>
</blockquote>
<ol>
<li>
<p>å†æ¬¡æ£€æŸ¥çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">git <span class="hljs-built_in">status</span>
</code></pre>
</li>
</ol>
<blockquote>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">On</span> branch master
<span class="hljs-literal">nothing</span> <span class="hljs-keyword">to</span> commit, working tree clean
</code></pre>
</blockquote>
<p>æ‰€æœ‰æ›´æ”¹å·²æˆåŠŸæäº¤ï¼Œå·¥ä½œåŒºå¹²å‡€ã€‚</p>
<hr/>
<h2 data-id="heading-10">æ€»ç»“ï¼šGit åŸºæœ¬å·¥ä½œæµ</h2>



































<table><thead><tr><th>æ­¥éª¤</th><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>åˆå§‹åŒ–ä»“åº“</td><td><code>git init</code></td><td>åˆ›å»ºæ–°çš„ Git ä»“åº“</td></tr><tr><td>æŸ¥çœ‹çŠ¶æ€</td><td><code>git status</code></td><td>æ˜¾ç¤ºå·¥ä½œåŒºä¸æš‚å­˜åŒºçŠ¶æ€</td></tr><tr><td>æŸ¥çœ‹å·®å¼‚</td><td><code>git diff</code></td><td>æ˜¾ç¤ºæœªæš‚å­˜çš„ä¿®æ”¹å†…å®¹</td></tr><tr><td>æ·»åŠ æ–‡ä»¶</td><td><code>git add &lt;file&gt;</code> æˆ– <code>git add .</code></td><td>å°†æ›´æ”¹åŠ å…¥æš‚å­˜åŒº</td></tr><tr><td>æäº¤æ›´æ”¹</td><td><code>git commit -m "message"</code></td><td>å°†æš‚å­˜åŒºå†…å®¹æäº¤åˆ°æœ¬åœ°ä»“åº“</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡å¸¦ä½ æŒæ¡MyBatis-Plusä»£ç ç”Ÿæˆå™¨ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œå®ç°åŸç†ä¸è‡ªå®šä¹‰æ¨¡æ¿å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7579494852654219298</link>    <guid>https://juejin.cn/post/7579494852654219298</guid>    <pubDate>2025-12-04T02:57:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579494852654219298" data-draft-id="7579544918076391459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡å¸¦ä½ æŒæ¡MyBatis-Plusä»£ç ç”Ÿæˆå™¨ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œå®ç°åŸç†ä¸è‡ªå®šä¹‰æ¨¡æ¿å…¨è§£æ"/> <meta itemprop="keywords" content="åç«¯,Spring Boot,Java"/> <meta itemprop="datePublished" content="2025-12-04T02:57:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Shepherd"/> <meta itemprop="url" content="https://juejin.cn/user/3415500769991869"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡å¸¦ä½ æŒæ¡MyBatis-Plusä»£ç ç”Ÿæˆå™¨ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œå®ç°åŸç†ä¸è‡ªå®šä¹‰æ¨¡æ¿å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3415500769991869/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Shepherd
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T02:57:41.000Z" title="Thu Dec 04 2025 02:57:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦ä»£ç ç”Ÿæˆå™¨ï¼Ÿ</h2>
<p>è¿‘å¹´æ¥ï¼Œéšç€AIç¼–ç¨‹å’Œä½ä»£ç å¹³å°çš„å…´èµ·ï¼Œå¼€å‘æ•ˆç‡æˆä¸ºæŠ€æœ¯åœˆçš„çƒ­é—¨è¯é¢˜ã€‚è™½ç„¶è¿™äº›å·¥å…·èƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡å¼€å‘æ•ˆç‡ï¼Œä½†å¯¹äºå¤æ‚çš„ä¸šåŠ¡é€»è¾‘å’Œå®šåˆ¶åŒ–éœ€æ±‚ï¼Œä»ç„¶éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç¼–å†™ä»£ç ã€‚</p>
<p>ç‰¹åˆ«æ˜¯åœ¨åç«¯å¼€å‘ä¸­ï¼Œä¸šåŠ¡æ¥å£çš„ç¼–å†™å¾€å¾€å­˜åœ¨å¤§é‡é‡å¤æ€§å·¥ä½œï¼šå®ä½“ç±»ã€Mapperã€Serviceã€Controllerç­‰åŸºç¡€ä»£ç ç»“æ„ç›¸ä¼¼ï¼Œå´éœ€è¦åå¤ç¼–å†™ã€‚è¿™æ—¶å€™ï¼Œä¸€ä¸ªä¼˜ç§€çš„ä»£ç ç”Ÿæˆå™¨å°±èƒ½å¤§æ˜¾èº«æ‰‹ã€‚</p>
<p>ä»Šå¤©æˆ‘è¦è¯¦ç»†ä»‹ç»çš„å°±æ˜¯<strong>MyBatis-Plus Generator</strong>ï¼ˆç®€ç§°<strong>MPG</strong>ï¼‰ï¼Œè¿™æ¬¾å¼ºå¤§çš„ä»£ç ç”Ÿæˆå·¥å…·èƒ½å¤Ÿæ ¹æ®æ•°æ®åº“è¡¨ç»“æ„ï¼Œè‡ªåŠ¨ç”ŸæˆåŒ…æ‹¬Entityã€Mapperã€Serviceã€Controlleråœ¨å†…çš„å…¨å¥—ä»£ç ï¼ŒçœŸæ­£å®ç°"ä¸€é”®ç”Ÿæˆï¼Œå¼€ç®±å³ç”¨"ã€‚</p>
<h2 data-id="heading-1">2.å¿«é€Ÿå…¥é—¨ï¼š5åˆ†é’Ÿä¸Šæ‰‹ä»£ç ç”Ÿæˆ</h2>
<h3 data-id="heading-2">2.1 å¼•å…¥ä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"> Â <span class="hljs-comment">&lt;!-- ä»£ç ç”Ÿæˆå™¨  --&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
 Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
 Â <span class="hljs-comment">&lt;!-- æ¨¡æ¿å¼•æ“ï¼ˆFreemarkerç¤ºä¾‹ï¼‰ --&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.32<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
 Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">2.2 å‡†å¤‡æµ‹è¯•æ•°æ®è¡¨</h3>
<p>åˆ›å»ºä¸€å¼ æµ‹è¯•ç”¨æˆ·è¡¨<code>tb_user</code>:</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `tb_user` (
 Â `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®'</span>,
 Â `user_no` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç¼–å·'</span>,
 Â `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ˜µç§°'</span>,
 Â `email` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'é‚®ç®±'</span>,
 Â `phone` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ‰‹æœºå·'</span>,
 Â `gender` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'æ€§åˆ«  0ï¼šç”·ç”Ÿ Â  1ï¼šå¥³ç”Ÿ'</span>,
 Â `birthday` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'å‡ºç”Ÿæ—¥æœŸ'</span>,
 Â `is_delete` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'åˆ é™¤æ ‡å¿— 0ï¼šå¦  1ï¼šæ˜¯'</span>,
 Â `create_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
 Â `update_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
 Â `creator` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ›å»ºäºº'</span>,
 Â `updater` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ›´æ–°äºº'</span>,
 Â `address` <span class="hljs-type">varchar</span>(<span class="hljs-number">1024</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åœ°å€'</span>,
 Â `role_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è§’è‰²id'</span>,
 Â `hobby` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'çˆ±å¥½'</span>,
 Â `remark` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸ªäººè¯´æ˜'</span>,
 Â `org_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å…¬å¸id'</span>,
 Â <span class="hljs-keyword">PRIMARY</span> KEY (`id`) <span class="hljs-keyword">USING</span> BTREE,
 Â <span class="hljs-keyword">UNIQUE</span> KEY `uk_user_no` (`user_no`) <span class="hljs-keyword">USING</span> BTREE
) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">1</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 ROW_FORMAT<span class="hljs-operator">=</span><span class="hljs-keyword">DYNAMIC</span>;
</code></pre>
<h3 data-id="heading-4">2.3 åŸºç¡€é…ç½®ç”Ÿæˆä»£ç </h3>
<p>MPGæä¾›äº†æµç•…çš„Builderæ¨¡å¼APIï¼Œè®©é…ç½®è¿‡ç¨‹ç›´è§‚æ˜“æ‡‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">public class CodeGeneratorTest {
â€‹
 Â  Â public static void <span class="hljs-selector-tag">main</span>(String[] args) {
 Â  Â  Â  Â <span class="hljs-comment">// ä½¿ç”¨ FastAutoGenerator å¿«é€Ÿé…ç½®ä»£ç ç”Ÿæˆå™¨</span>
 Â  Â  Â  Â FastAutoGenerator<span class="hljs-selector-class">.create</span>("jdbc:mysql://<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">3306</span>/db_test?useUnicode=true&amp;characterEncoding=utf-<span class="hljs-number">8</span>&amp;zeroDateTimeBehavior=convertToNull&amp;allowMultiQueries=true",
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "root",
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "root")
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.globalConfig</span>(builder -&gt; { Â // å…¨å±€é…ç½®
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â builder.author("ZFJ") <span class="hljs-comment">// è®¾ç½®ä½œè€…</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.commentDate</span>("yyyy-MM-dd") Â <span class="hljs-comment">// è®¾ç½®æ—¥æœŸ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.enableSpringdoc</span>() Â <span class="hljs-comment">// å¼€å¯openapi3æ–‡æ¡£æ³¨é‡Š</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.outputDir</span>("src/main/java") Â <span class="hljs-comment">// è¾“å‡ºç›®å½•</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.disableOpenDir</span>(); <span class="hljs-comment">// ä¸æ‰“å¼€è·¯å¾„</span>
 Â  Â  Â  Â  Â  Â  Â   })
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.packageConfig</span>(builder -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â builder.parent("com.shepherd.example") <span class="hljs-comment">// è®¾ç½®çˆ¶åŒ…å</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.entity</span>("entity") <span class="hljs-comment">// è®¾ç½®entityå®ä½“ç±»åŒ…å</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.mapper</span>("dao") <span class="hljs-comment">// è®¾ç½®Mapperæ¥å£åŒ…å</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.service</span>("service") <span class="hljs-comment">// è®¾ç½®Serviceæ¥å£åŒ…å</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.serviceImpl</span>("service.impl") <span class="hljs-comment">// è®¾ç½®Serviceå®ç°ç±»åŒ…å</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.xml</span>("mappers"); <span class="hljs-comment">// è®¾ç½® MapperXMLæ–‡ä»¶åŒ…å</span>
 Â  Â  Â  Â  Â  Â  Â   })
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.strategyConfig</span>(builder -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â builder.addInclude("tb_user") <span class="hljs-comment">// è®¾ç½®éœ€è¦ç”Ÿæˆçš„è¡¨å</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.addTablePrefix</span>("tb_") <span class="hljs-comment">// æ·»åŠ è¡¨å‰ç¼€</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®å®ä½“ç±»</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.entityBuilder</span>()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.enableLombok</span>(new ClassAnnotationAttributes("@Data","lombok.Data")) <span class="hljs-comment">// å¯ç”¨ Lombok</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.enableTableFieldAnnotation</span>() <span class="hljs-comment">// å¯ç”¨å­—æ®µæ³¨è§£</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.javaTemplate</span>("/templates/entity.java") <span class="hljs-comment">// è®¾ç½®å®ä½“ç±»æ¨¡æ¿</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®mapperæ¥å£</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.mapperBuilder</span>()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.mapperTemplate</span>("/templates/mapper.java") <span class="hljs-comment">// è®¾ç½®mapperç›®æ ‡</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.convertMapperFileName</span>((entityName -&gt; entityName + "DAO")) <span class="hljs-comment">// è®¾ç½®mapperæ¥å£æ–‡ä»¶å</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.enableBaseResultMap</span>()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.enableBaseColumnList</span>()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®serviceæ¥å£</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.serviceBuilder</span>()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.serviceTemplate</span>("/templates/service.java") <span class="hljs-comment">// è®¾ç½®Serviceæ¨¡æ¿</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.convertServiceFileName</span>((entityName -&gt; entityName + "Service")) <span class="hljs-comment">// è®¾ç½®serviceæ–‡ä»¶å</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.serviceImplTemplate</span>("/templates/serviceImpl.java") <span class="hljs-comment">// è®¾ç½®ServiceImplæ¨¡æ¿</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®controllerç±»</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.controllerBuilder</span>()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.template</span>("/templates/controller.java")
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.enableRestStyle</span>(); <span class="hljs-comment">// å¯ç”¨ REST é£æ ¼</span>
 Â  Â  Â  Â  Â  Â  Â   })
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.templateEngine</span>(new FreemarkerTemplateEngine()) <span class="hljs-comment">// ä½¿ç”¨ Freemarker æ¨¡æ¿å¼•æ“</span>
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.execute</span>(); <span class="hljs-comment">// æ‰§è¡Œç”Ÿæˆ</span>
 Â   }
}
â€‹
</code></pre>
<p>è¿è¡Œç”Ÿæˆä»£ç æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b54f204e6714cad84ed98c601255951~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765421861&amp;x-signature=6uWNkITxeHVQGqNRfn97GG3vgbE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">3.æ ¸å¿ƒé…ç½®</h2>
<h3 data-id="heading-6">3.1 å…¨å±€é…ç½®ï¼ˆGlobalConfigï¼‰</h3>
<p>å…¨å±€é…ç½®æä¾›äº†å¯¹ä»£ç ç”Ÿæˆå™¨æ•´ä½“è¡Œä¸ºçš„è®¾ç½®ï¼ŒåŒ…æ‹¬è¾“å‡ºç›®å½•ã€ä½œè€…ä¿¡æ¯ã€Kotlin æ¨¡å¼ã€Swagger é›†æˆã€Springdocã€æ—¶é—´ç±»å‹ç­–ç•¥ç­‰</p>


















































<table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>disableOpenDir()</td><td>ç¦æ­¢è‡ªåŠ¨æ‰“å¼€è¾“å‡ºç›®å½•</td><td>é»˜è®¤å€¼: <code>true</code></td></tr><tr><td>outputDir(String)</td><td>æŒ‡å®šä»£ç ç”Ÿæˆçš„è¾“å‡ºç›®å½•</td><td>å¦‚ï¼šSystem.getProperty("user.dir") + "/src/main/java"</td></tr><tr><td>author(String)</td><td>è®¾ç½®ä½œè€…å</td><td><code>baomidou</code> é»˜è®¤å€¼: é…ç½®æ–‡ä»¶ä¸­çš„ä½œè€…å</td></tr><tr><td>enableKotlin()</td><td>å¼€å¯ Kotlin æ¨¡å¼</td><td>é»˜è®¤å€¼: <code>false</code></td></tr><tr><td>enableSwagger()</td><td>å¼€å¯ Swagger æ¨¡å¼</td><td>é»˜è®¤å€¼: <code>false</code></td></tr><tr><td>dateType(DateType)</td><td>è®¾ç½®æ—¶é—´ç±»å‹ç­–ç•¥</td><td><code>DateType.ONLY_DATE</code> é»˜è®¤å€¼: <code>DateType.TIME_PACK</code></td></tr><tr><td>commentDate(String)</td><td>è®¾ç½®æ³¨é‡Šæ—¥æœŸæ ¼å¼</td><td>é»˜è®¤å€¼: <code>yyyy-MM-dd</code></td></tr><tr><td>enableSpringdoc</td><td>å¼€å¯Springdocæ–‡æ¡£</td><td>é»˜è®¤å€¼ï¼š<code>false</code></td></tr></tbody></table>
<h3 data-id="heading-7">3.2 ç­–ç•¥é…ç½®ï¼ˆStrategyConfigï¼‰</h3>
<p>ç­–ç•¥é…ç½®æ˜¯MPGçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ƒå…è®¸å¼€å‘è€…æ ¹æ®é¡¹ç›®éœ€æ±‚å®šåˆ¶ä»£ç ç”Ÿæˆçš„è§„åˆ™ï¼ŒåŒ…æ‹¬å‘½åæ¨¡å¼ã€è¡¨å’Œå­—æ®µçš„è¿‡æ»¤ã€ä»¥åŠå„ä¸ªä»£ç æ¨¡å—çš„ç”Ÿæˆç­–ç•¥ã€‚</p>































































































<table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>enableCapitalMode</td><td>å¼€å¯å¤§å†™å‘½å</td><td>é»˜è®¤å€¼: <code>false</code></td></tr><tr><td>enableSkipView</td><td>å¼€å¯è·³è¿‡è§†å›¾</td><td>é»˜è®¤å€¼: <code>false</code></td></tr><tr><td>disableSqlFilter</td><td>ç¦ç”¨ SQL è¿‡æ»¤</td><td>é»˜è®¤å€¼: <code>true</code>ï¼Œå¦‚æœ SQL è¿‡æ»¤ä¸æ”¯æŒï¼Œå¯ä»¥å…³é—­æ­¤é€‰é¡¹</td></tr><tr><td>enableSchema</td><td>å¯ç”¨ schema</td><td>é»˜è®¤å€¼: <code>false</code>ï¼Œå¤š schema åœºæ™¯æ—¶å¯ç”¨</td></tr><tr><td>likeTable(LikeTable)</td><td>æ¨¡ç³Šè¡¨åŒ¹é…(SQL è¿‡æ»¤)</td><td>ä¸ <code>notLikeTable</code> äº’æ–¥ï¼Œåªèƒ½é…ç½®ä¸€é¡¹</td></tr><tr><td>notLikeTable(LikeTable)</td><td>æ¨¡ç³Šè¡¨æ’é™¤(SQL è¿‡æ»¤)</td><td>ä¸ <code>likeTable</code> äº’æ–¥ï¼Œåªèƒ½é…ç½®ä¸€é¡¹</td></tr><tr><td>addInclude(Stringâ€¦)</td><td>å¢åŠ è¡¨åŒ¹é…(å†…å­˜è¿‡æ»¤)</td><td>ä¸ <code>addExclude</code> äº’æ–¥ï¼Œåªèƒ½é…ç½®ä¸€é¡¹ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…ï¼Œå¦‚ <code>^t_.*</code> åŒ¹é…æ‰€æœ‰ä»¥ <code>t_</code> å¼€å¤´çš„è¡¨å</td></tr><tr><td>addExclude(Stringâ€¦)</td><td>å¢åŠ è¡¨æ’é™¤åŒ¹é…(å†…å­˜è¿‡æ»¤)</td><td>ä¸ <code>addInclude</code> äº’æ–¥ï¼Œåªèƒ½é…ç½®ä¸€é¡¹ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…ï¼Œå¦‚ <code>.*st$</code> åŒ¹é…æ‰€æœ‰ä»¥ <code>st</code> ç»“å°¾çš„è¡¨å</td></tr><tr><td>addTablePrefix(Stringâ€¦)</td><td>å¢åŠ è¿‡æ»¤è¡¨å‰ç¼€</td><td/></tr><tr><td>addTableSuffix(Stringâ€¦)</td><td>å¢åŠ è¿‡æ»¤è¡¨åç¼€</td><td/></tr><tr><td>addFieldPrefix(Stringâ€¦)</td><td>å¢åŠ è¿‡æ»¤å­—æ®µå‰ç¼€</td><td/></tr><tr><td>addFieldSuffix(Stringâ€¦)</td><td>å¢åŠ è¿‡æ»¤å­—æ®µåç¼€</td><td/></tr><tr><td>outputFile</td><td>å†…ç½®æ¨¡æ¿è¾“å‡ºæ–‡ä»¶å¤„ç†</td><td>å‚è€ƒæµ‹è¯•ç”¨ä¾‹ <code>H2CodeGeneratorTest.testOutputFile</code></td></tr><tr><td>entityBuilder</td><td>å®ä½“ç­–ç•¥é…ç½®</td><td/></tr><tr><td>controllerBuilder</td><td>Controller ç­–ç•¥é…ç½®</td><td/></tr><tr><td>mapperBuilder</td><td>Mapper ç­–ç•¥é…ç½®</td><td/></tr><tr><td>serviceBuilder</td><td>Service ç­–ç•¥é…ç½®</td><td/></tr></tbody></table>
<p>å¯ä»¥çœ‹åˆ°ç­–ç•¥é…ç½®å¯¹æä¾›ç»Ÿä¸€çš„ç”Ÿæˆè§„åˆ™é…ç½®ï¼Œè¿˜æ”¯æŒ<code>entity, mapper, service, controller</code>ç­‰ç±»åˆ†åˆ«é…ç½®ï¼Œæ¡ç†æ¸…æ™°ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚ç¢äºç¯‡å¹…é—®é¢˜ï¼Œæˆ‘è¿™é‡Œå°±åªå±•ç¤ºä¸€ä¸‹å®ä½“ç±»entityçš„ç”Ÿæˆç­–ç•¥é…ç½®ï¼Œå…¶ä»–çš„è¯¦è§å®˜ç½‘æ–‡æ¡£ã€‚</p>
<p><strong>Entity ç­–ç•¥é…ç½®</strong></p>
<p>å®ä½“ç­–ç•¥é…ç½®ç”¨äºå®šåˆ¶å®ä½“ç±»çš„ç”Ÿæˆè§„åˆ™ï¼ŒåŒ…æ‹¬çˆ¶ç±»ã€åºåˆ—åŒ–ç‰ˆæœ¬ UIDã€æ–‡ä»¶è¦†ç›–ã€å­—æ®µå¸¸é‡ã€é“¾å¼æ¨¡å‹ã€Lombok æ¨¡å‹ç­‰</p>
































































































































































<table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>nameConvert(INameConvert)</td><td>åç§°è½¬æ¢å®ç°</td><td/></tr><tr><td>superClass(Class&lt;?&gt;)</td><td>è®¾ç½®çˆ¶ç±»</td><td><code>BaseEntity.class</code></td></tr><tr><td>superClass(String)</td><td>è®¾ç½®çˆ¶ç±»</td><td><code>com.baomidou.global.BaseEntity</code></td></tr><tr><td>disableSerialVersionUID</td><td>ç¦ç”¨ç”Ÿæˆ serialVersionUID</td><td>é»˜è®¤å€¼: <code>true</code></td></tr><tr><td>enableFileOverride</td><td>è¦†ç›–å·²ç”Ÿæˆæ–‡ä»¶</td><td>é»˜è®¤å€¼: <code>false</code></td></tr><tr><td>enableColumnConstant</td><td>å¼€å¯ç”Ÿæˆå­—æ®µå¸¸é‡</td><td>é»˜è®¤å€¼: <code>false</code></td></tr><tr><td>enableChainModel</td><td>å¼€å¯é“¾å¼æ¨¡å‹</td><td>é»˜è®¤å€¼: <code>false</code></td></tr><tr><td>enableLombok</td><td>å¼€å¯ Lombok æ¨¡å‹</td><td>é»˜è®¤å€¼: <code>false</code> é»˜è®¤åªæœ‰Getter,Setter,è‡ª3.5.10åå¢åŠ ToString</td></tr><tr><td>enableRemoveIsPrefix</td><td>å¼€å¯ Boolean ç±»å‹å­—æ®µç§»é™¤ is å‰ç¼€</td><td>é»˜è®¤å€¼: <code>false</code></td></tr><tr><td>enableTableFieldAnnotation</td><td>å¼€å¯ç”Ÿæˆå®ä½“æ—¶ç”Ÿæˆå­—æ®µæ³¨è§£</td><td>é»˜è®¤å€¼: <code>false</code></td></tr><tr><td>enableActiveRecord</td><td>å¼€å¯ ActiveRecord æ¨¡å‹</td><td>é»˜è®¤å€¼: <code>false</code></td></tr><tr><td>versionColumnName(String)</td><td>ä¹è§‚é”å­—æ®µå(æ•°æ®åº“å­—æ®µ)</td><td><code>versionColumnName</code> ä¸ <code>versionPropertyName</code> äºŒé€‰ä¸€å³å¯</td></tr><tr><td>versionPropertyName(String)</td><td>ä¹è§‚é”å±æ€§å(å®ä½“)</td><td><code>versionColumnName</code> ä¸ <code>versionPropertyName</code> äºŒé€‰ä¸€å³å¯</td></tr><tr><td>logicDeleteColumnName(String)</td><td>é€»è¾‘åˆ é™¤å­—æ®µå(æ•°æ®åº“å­—æ®µ)</td><td><code>logicDeleteColumnName</code> ä¸ <code>logicDeletePropertyName</code> äºŒé€‰ä¸€å³å¯</td></tr><tr><td>logicDeletePropertyName(String)</td><td>é€»è¾‘åˆ é™¤å±æ€§å(å®ä½“)</td><td><code>logicDeleteColumnName</code> ä¸ <code>logicDeletePropertyName</code> äºŒé€‰ä¸€å³å¯</td></tr><tr><td>naming</td><td>æ•°æ®åº“è¡¨æ˜ å°„åˆ°å®ä½“çš„å‘½åç­–ç•¥</td><td>é»˜è®¤ä¸‹åˆ’çº¿è½¬é©¼å³°å‘½å: <code>NamingStrategy.underline_to_camel</code></td></tr><tr><td>columnNaming</td><td>æ•°æ®åº“è¡¨å­—æ®µæ˜ å°„åˆ°å®ä½“çš„å‘½åç­–ç•¥</td><td>é»˜è®¤ä¸º <code>null</code>ï¼ŒæœªæŒ‡å®šæŒ‰ç…§ <code>naming</code> æ‰§è¡Œ</td></tr><tr><td>addSuperEntityColumns(Stringâ€¦)</td><td>æ·»åŠ çˆ¶ç±»å…¬å…±å­—æ®µ</td><td/></tr><tr><td>addIgnoreColumns(Stringâ€¦)</td><td>æ·»åŠ å¿½ç•¥å­—æ®µ</td><td/></tr><tr><td>addTableFills(IFillâ€¦)</td><td>æ·»åŠ è¡¨å­—æ®µå¡«å……</td><td/></tr><tr><td>addTableFills(List)</td><td>æ·»åŠ è¡¨å­—æ®µå¡«å……</td><td/></tr><tr><td>idType(IdType)</td><td>å…¨å±€ä¸»é”®ç±»å‹</td><td/></tr><tr><td>convertFileName(ConverterFileName)</td><td>è½¬æ¢æ–‡ä»¶åç§°</td><td/></tr><tr><td>formatFileName(String)</td><td>æ ¼å¼åŒ–æ–‡ä»¶åç§°</td><td/></tr><tr><td>toString(boolean)</td><td>æ˜¯å¦ç”ŸæˆToStringæ–¹æ³•</td><td>é»˜è®¤ä¸ºtrue, è‡ª3.5.10å¼€å§‹</td></tr><tr><td>fieldUseJavaDoc</td><td>å¯ç”¨å­—æ®µæ–‡æ¡£æ³¨é‡Š</td><td>é»˜è®¤ä¸ºtrue, è‡ª3.5.10å¼€å§‹</td></tr><tr><td>classAnnotations(ClassAnnotationAttributes)</td><td>æ·»åŠ å®ä½“ç±»æ³¨è§£</td><td>è‡ª3.5.10å¼€å§‹</td></tr><tr><td>tableAnnotationHandler</td><td>è¡¨æ³¨è§£å¤„ç†å™¨</td><td>è‡ª3.5.10å¼€å§‹</td></tr><tr><td>tableFieldAnnotationHandler</td><td>å­—æ®µæ³¨è§£å¤„ç†å™¨</td><td>è‡ª3.5.10å¼€å§‹</td></tr><tr><td>enableLombok(ClassAnnotationAttributesâ€¦)</td><td>å¼€å¯ Lombok æ¨¡å‹å¹¶è®¾ç½®Lombokæ³¨è§£</td><td>è‡ª3.5.10å¼€å§‹. ä½¿ç”¨@Dataç¤ºä¾‹: enableLombok(new ClassAnnotationAttributes(â€œ@Dataâ€,â€œlombok.Dataâ€))</td></tr></tbody></table>
<p>å½“ç„¶äº†é™¤äº†ä¸Šé¢æåˆ°çš„å…¨å±€é…ç½®å’Œç­–ç•¥é…ç½®ï¼Œè¿˜æœ‰æ•°æ®æºé…ç½®ï¼ŒåŒ…åé…ç½®ç­‰ç­‰ï¼Œä½†è¿™äº›éƒ½æ¯”è¾ƒç®€å•ï¼Œé¡¾åæ€ä¹‰æ•°æ®æºé…ç½®å°±æ˜¯é…ç½®æ•°æ®æºçš„ï¼ŒåŒ…åé…ç½®å°±æ˜¯é…ç½®ç”Ÿæˆä»£ç ç±»çš„åŒ…åè·¯å¾„ï¼Œå…·ä½“æ–¹æ³•apiè¿˜æ˜¯è¯·ç§»æ­¥å®˜ç½‘æŸ¥çœ‹</p>
<h2 data-id="heading-8">4. è‡ªå®šä¹‰æ¨¡æ¿ï¼šæ‰“é€ å›¢é˜Ÿä¸“å±ä»£ç é£æ ¼</h2>
<h3 data-id="heading-9">4.1 è‡ªå®šä¹‰DTOç”Ÿæˆæ¨¡æ¿</h3>
<p>MPGé»˜è®¤ä¸æä¾›DTOæ¨¡æ¿ï¼Œä½†æˆ‘ä»¬å¯ä»¥è½»æ¾æ‰©å±•ã€‚åˆ›å»º<code>templates/entityDTO.java.ftl</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">package <span class="hljs-variable">${package.Entity}</span>;
â€‹
&lt;<span class="hljs-comment">#list importEntityFrameworkPackages as pkg&gt;</span>
import <span class="hljs-variable">${pkg}</span>;
&lt;/<span class="hljs-comment">#list&gt;</span>
â€‹
&lt;<span class="hljs-comment">#list importEntityJavaPackages as pkg&gt;</span>
import <span class="hljs-variable">${pkg}</span>;
&lt;/<span class="hljs-comment">#list&gt;</span>
â€‹
/**
 * &lt;p&gt;
 * <span class="hljs-variable">${table.comment!}</span>
 * &lt;/p&gt;
 *
 * @author <span class="hljs-variable">${author}</span>
 * @since <span class="hljs-variable">${date}</span>
 */
@Data
@Schema(description = <span class="hljs-string">"<span class="hljs-variable">${table.comment!}</span>"</span>)
public class <span class="hljs-variable">${entity}</span>DTO {
&lt;<span class="hljs-comment">#-- ----------  BEGIN å­—æ®µå¾ªç¯éå†  ----------&gt;</span>
&lt;<span class="hljs-comment">#list table.fields as field&gt;</span>
 Â   @Schema(description = <span class="hljs-string">"<span class="hljs-variable">${field.comment!}</span>"</span>)
 Â   private <span class="hljs-variable">${field.propertyType}</span> <span class="hljs-variable">${field.propertyName}</span>;
&lt;/<span class="hljs-comment">#list&gt;</span>
&lt;<span class="hljs-comment">#------------  END å­—æ®µå¾ªç¯éå†  ----------&gt;</span>
}
â€‹
</code></pre>
<p>å…³äºFreemarkeræ¨¡ç‰ˆçš„è¯­æ³•ï¼Œè¯·å¦è¡ŒæŸ¥é˜…èµ„æ–™ã€‚</p>
<p>åœ¨ä¸Šé¢ç”Ÿæˆç¤ºä¾‹ä»£ç ä¸­è¿½åŠ æ³¨å…¥é…ç½®ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-class">.injectionConfig</span>(injectConfig -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-selector-tag">injectConfig</span><span class="hljs-selector-class">.customFile</span>(new CustomFile.<span class="hljs-built_in">Builder</span>()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .<span class="hljs-built_in">fileName</span>(<span class="hljs-string">"DTO.java"</span>) <span class="hljs-comment">// æ–‡ä»¶åç§°</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .<span class="hljs-built_in">templatePath</span>(<span class="hljs-string">"templates/entityDTO.java.ftl"</span>) <span class="hljs-comment">//æŒ‡å®šç”Ÿæˆæ¨¡æ¿è·¯å¾„</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .<span class="hljs-built_in">packageName</span>(<span class="hljs-string">"model.dto"</span>) <span class="hljs-comment">// åŒ…å,</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .<span class="hljs-built_in">build</span>());
</code></pre>
<p>å†æ¬¡è¿è¡Œå°±èƒ½ç”Ÿæˆå¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">@Data
@Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯"</span>)
public class UserDTO {
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"ä¸»é”®"</span>)
 Â  Â private Long id<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"ç¼–å·"</span>)
 Â  Â private String userNo<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"æ˜µç§°"</span>)
 Â  Â private String name<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"é‚®ç®±"</span>)
 Â  Â private String email<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"æ‰‹æœºå·"</span>)
 Â  Â private String phone<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"æ€§åˆ«  0ï¼šç”·ç”Ÿ Â  1ï¼šå¥³ç”Ÿ"</span>)
 Â  Â private Byte gender<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"å‡ºç”Ÿæ—¥æœŸ"</span>)
 Â  Â private LocalDateTime birthday<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"åˆ é™¤æ ‡å¿— 0ï¼šå¦  1ï¼šæ˜¯"</span>)
 Â  Â private Byte isDelete<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"åˆ›å»ºæ—¶é—´"</span>)
 Â  Â private LocalDateTime createTime<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"æ›´æ–°æ—¶é—´"</span>)
 Â  Â private LocalDateTime updateTime<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"åˆ›å»ºäºº"</span>)
 Â  Â private Long creator<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"æ›´æ–°äºº"</span>)
 Â  Â private Long updater<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"åœ°å€"</span>)
 Â  Â private String address<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"è§’è‰²id"</span>)
 Â  Â private String roleId<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"çˆ±å¥½"</span>)
 Â  Â private String hobby<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"ä¸ªäººè¯´æ˜"</span>)
 Â  Â private String remark<span class="hljs-comment">;</span>
 Â  Â @Schema(<span class="hljs-attr">description</span> = <span class="hljs-string">"å…¬å¸id"</span>)
 Â  Â private Long orgId<span class="hljs-comment">;</span>
}
â€‹
</code></pre>
<h3 data-id="heading-10">4.2 å®šåˆ¶åŠŸèƒ½ä¸°å¯Œçš„Controlleræ¨¡æ¿</h3>
<p>é»˜è®¤ç”Ÿæˆçš„Controlleræ¯”è¾ƒåŸºç¡€ï¼Œå¦‚æœä¸šåŠ¡çš„CRUDä»£ç æ²¡æœ‰åŒ…å«å¤æ‚å¤„ç†é€»è¾‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡å®šåˆ¶ä»£ç å‡å°‘ç¼–ç é‡å¤ï¼Œåˆ›å»ºæ›´å®ç”¨çš„æ¨¡æ¿<code>templates/controller.java.ftl</code>ï¼š</p>
<pre><code class="hljs language-less" lang="less">&lt;<span class="hljs-selector-id">#assign</span> <span class="hljs-selector-tag">serviceNameLower</span> = <span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.serviceName</span>?<span class="hljs-selector-tag">uncap_first</span>&gt;
&lt;<span class="hljs-selector-id">#assign</span> <span class="hljs-selector-tag">entityNameLower</span> = <span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>?<span class="hljs-selector-tag">uncap_first</span>&gt;
â€‹
<span class="hljs-selector-tag">package</span> ${<span class="hljs-selector-tag">package</span><span class="hljs-selector-class">.Controller</span>};
â€‹
<span class="hljs-selector-tag">import</span> ${<span class="hljs-selector-tag">package</span><span class="hljs-selector-class">.Service</span>}.${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.serviceName</span>};
<span class="hljs-selector-tag">import</span> ${<span class="hljs-selector-tag">package</span><span class="hljs-selector-class">.Param</span>}.${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>}<span class="hljs-selector-tag">Param</span>;
<span class="hljs-selector-tag">import</span> ${<span class="hljs-selector-tag">package</span><span class="hljs-selector-class">.Query</span>}.${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>}<span class="hljs-selector-tag">Query</span>;
<span class="hljs-selector-tag">import</span> ${<span class="hljs-selector-tag">package</span><span class="hljs-selector-class">.VO</span>}.${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>}<span class="hljs-selector-tag">VO</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.plasticene</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.pojo</span><span class="hljs-selector-class">.ResponseVO</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">io</span><span class="hljs-selector-class">.swagger</span><span class="hljs-selector-class">.v3</span><span class="hljs-selector-class">.oas</span><span class="hljs-selector-class">.annotations</span><span class="hljs-selector-class">.Operation</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">io</span><span class="hljs-selector-class">.swagger</span><span class="hljs-selector-class">.v3</span><span class="hljs-selector-class">.oas</span><span class="hljs-selector-class">.annotations</span><span class="hljs-selector-class">.tags</span><span class="hljs-selector-class">.Tag</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">jakarta</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Resource</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.validation</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Validated</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.web</span><span class="hljs-selector-class">.bind</span><span class="hljs-selector-class">.annotation</span>.*;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.List</span>;
â€‹
â€‹
<span class="hljs-comment">/**
 * &lt;p&gt;
 * ${table.comment!}
 * &lt;/p&gt;
 *
 * @author ${author}
 * @since ${date}
 */</span>
@<span class="hljs-selector-tag">RestController</span>
@<span class="hljs-selector-tag">RequestMapping</span>(<span class="hljs-string">"&lt;#if package.ModuleName?? &amp;&amp; package.ModuleName != "</span><span class="hljs-string">"&gt;/${package.ModuleName}&lt;/#if&gt;/&lt;#if controllerMappingHyphenStyle&gt;${controllerMappingHyphen}&lt;#else&gt;${table.entityPath}&lt;/#if&gt;"</span>)
@<span class="hljs-selector-tag">Tag</span>(name = <span class="hljs-string">"${table.comment!}"</span>)
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> ${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.controllerName</span>} {
 Â   <span class="hljs-variable">@Resource</span>
 Â   private ${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.serviceName</span>} ${<span class="hljs-selector-tag">serviceNameLower</span>};
â€‹
 Â   @<span class="hljs-selector-tag">PostMapping</span>
 Â   @<span class="hljs-selector-tag">Operation</span>(summary = <span class="hljs-string">"åˆ›å»º"</span>)
 Â   <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseVO</span>&lt;<span class="hljs-selector-tag">Long</span>&gt; <span class="hljs-selector-tag">create</span>(<span class="hljs-variable">@RequestBody</span> <span class="hljs-variable">@Validated</span> ${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>}<span class="hljs-selector-tag">Param</span> ${<span class="hljs-selector-tag">entityNameLower</span>}<span class="hljs-selector-tag">Param</span>) {
 Â  Â  Â   <span class="hljs-selector-tag">Long</span> <span class="hljs-selector-tag">id</span> = ${<span class="hljs-selector-tag">serviceNameLower</span>}<span class="hljs-selector-class">.create</span>(${<span class="hljs-selector-tag">entityNameLower</span>}<span class="hljs-selector-tag">Param</span>);
 Â  Â  Â  Â  <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseVO</span><span class="hljs-selector-class">.success</span>(id);
 Â   }
â€‹
 Â   @<span class="hljs-selector-tag">PutMapping</span>
 Â   @<span class="hljs-selector-tag">Operation</span>(summary = <span class="hljs-string">"ä¿®æ”¹"</span>)
 Â   <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseVO</span>&lt;<span class="hljs-selector-tag">Void</span>&gt; <span class="hljs-selector-tag">update</span>(<span class="hljs-variable">@RequestBody</span> <span class="hljs-variable">@Validated</span> ${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>}<span class="hljs-selector-tag">Param</span> ${<span class="hljs-selector-tag">entityNameLower</span>}<span class="hljs-selector-tag">Param</span>) {
 Â  Â  Â   ${<span class="hljs-selector-tag">serviceNameLower</span>}<span class="hljs-selector-class">.update</span>(${<span class="hljs-selector-tag">entityNameLower</span>}<span class="hljs-selector-tag">Param</span>);
 Â  Â  Â   <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseVO</span><span class="hljs-selector-class">.success</span>();
 Â   }
â€‹
 Â   @<span class="hljs-selector-tag">DeleteMapping</span>
 Â   @<span class="hljs-selector-tag">Operation</span>(summary = <span class="hljs-string">"åˆ é™¤"</span>)
 Â   <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseVO</span>&lt;<span class="hljs-selector-tag">Void</span>&gt; <span class="hljs-selector-tag">delete</span>(<span class="hljs-variable">@RequestBody</span> List&lt;Long&gt; idList) {
 Â  Â  Â   ${<span class="hljs-selector-tag">serviceNameLower</span>}<span class="hljs-selector-class">.delete</span>(idList);
 Â  Â  Â   <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseVO</span><span class="hljs-selector-class">.success</span>();
 Â   }
â€‹
 Â   @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/page"</span>)
 Â   @<span class="hljs-selector-tag">Operation</span>(summary = <span class="hljs-string">"åˆ†é¡µ"</span>)
 Â   <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseVO</span>&lt;<span class="hljs-selector-tag">PageResult</span>&lt;${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>}<span class="hljs-selector-tag">VO</span>&gt;&gt; <span class="hljs-selector-tag">page</span>(${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>}<span class="hljs-selector-tag">Query</span> ${<span class="hljs-selector-tag">entityNameLower</span>}<span class="hljs-selector-tag">Quey</span>) {
 Â  Â  Â   <span class="hljs-selector-tag">PageResult</span>&lt;${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>}<span class="hljs-selector-tag">VO</span>&gt; <span class="hljs-selector-tag">pageVO</span> = ${<span class="hljs-selector-tag">serviceNameLower</span>}<span class="hljs-selector-class">.page</span>(${<span class="hljs-selector-tag">entityNameLower</span>}<span class="hljs-selector-tag">Query</span>);
 Â  Â  Â   <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseVO</span><span class="hljs-selector-class">.success</span>(pageVO);
 Â   }
â€‹
 Â   @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/{id}"</span>)
 Â   @<span class="hljs-selector-tag">Operation</span>(summary = <span class="hljs-string">"è¯¦æƒ…"</span>)
 Â   <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseVO</span>&lt;${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>}<span class="hljs-selector-tag">VO</span>&gt; <span class="hljs-selector-tag">detail</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"id"</span>) Long id) {
 Â  Â  Â   ${<span class="hljs-selector-tag">table</span><span class="hljs-selector-class">.entityName</span>}<span class="hljs-selector-tag">VO</span> ${<span class="hljs-selector-tag">entityNameLower</span>}<span class="hljs-selector-tag">VO</span> = ${<span class="hljs-selector-tag">serviceNameLower</span>}<span class="hljs-selector-class">.detail</span>(id);
 Â  Â  Â   <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseVO</span><span class="hljs-selector-class">.success</span>(${<span class="hljs-selector-tag">entityNameLower</span>}<span class="hljs-selector-tag">VO</span>);
 Â   }
â€‹
}
</code></pre>
<p>å†æ¬¡è¿è¡Œä¸Šé¢ç”Ÿæˆç¤ºä¾‹ä»£ç ï¼š<code>UserController</code></p>
<pre><code class="hljs language-less" lang="less">â€‹
<span class="hljs-selector-tag">package</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.shepherd</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.controller</span>;
â€‹
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.shepherd</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.service</span><span class="hljs-selector-class">.UserService</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.shepherd</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.model</span><span class="hljs-selector-class">.param</span><span class="hljs-selector-class">.UserParam</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.shepherd</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.model</span><span class="hljs-selector-class">.query</span><span class="hljs-selector-class">.UserQuery</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.shepherd</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.model</span><span class="hljs-selector-class">.vo</span><span class="hljs-selector-class">.UserVO</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.plasticene</span><span class="hljs-selector-class">.boot</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.pojo</span><span class="hljs-selector-class">.ResponseVO</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">io</span><span class="hljs-selector-class">.swagger</span><span class="hljs-selector-class">.v3</span><span class="hljs-selector-class">.oas</span><span class="hljs-selector-class">.annotations</span><span class="hljs-selector-class">.Operation</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">io</span><span class="hljs-selector-class">.swagger</span><span class="hljs-selector-class">.v3</span><span class="hljs-selector-class">.oas</span><span class="hljs-selector-class">.annotations</span><span class="hljs-selector-class">.tags</span><span class="hljs-selector-class">.Tag</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">jakarta</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Resource</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.validation</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Validated</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.web</span><span class="hljs-selector-class">.bind</span><span class="hljs-selector-class">.annotation</span>.*;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.List</span>;
â€‹
â€‹
<span class="hljs-comment">/**
 * &lt;p&gt;
 * ç”¨æˆ·ä¿¡æ¯
 * &lt;/p&gt;
 *
 * @author ZFJ
 * @since 2025-12-03
 */</span>
@<span class="hljs-selector-tag">RestController</span>
@<span class="hljs-selector-tag">RequestMapping</span>(<span class="hljs-string">"/user"</span>)
@<span class="hljs-selector-tag">Tag</span>(name = <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯"</span>)
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">UserController</span> {
 Â  Â <span class="hljs-variable">@Resource</span>
 Â  Â private UserService userService;
â€‹
 Â  Â <span class="hljs-variable">@PostMapping</span>
 Â  Â <span class="hljs-variable">@Operation</span>(summary = <span class="hljs-string">"åˆ›å»º"</span>)
 Â  Â public ResponseVO&lt;Long&gt; <span class="hljs-built_in">create</span>(<span class="hljs-variable">@RequestBody</span> <span class="hljs-variable">@Validated</span> UserParam userParam) {
 Â  Â  Â  Â <span class="hljs-selector-tag">Long</span> <span class="hljs-selector-tag">id</span> = <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.create</span>(userParam);
 Â  Â  Â  Â  <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseVO</span><span class="hljs-selector-class">.success</span>(id);
 Â   }
â€‹
 Â  Â @<span class="hljs-selector-tag">PutMapping</span>
 Â  Â @<span class="hljs-selector-tag">Operation</span>(summary = <span class="hljs-string">"ä¿®æ”¹"</span>)
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseVO</span>&lt;<span class="hljs-selector-tag">Void</span>&gt; <span class="hljs-selector-tag">update</span>(<span class="hljs-variable">@RequestBody</span> <span class="hljs-variable">@Validated</span> UserParam userParam) {
 Â  Â  Â  Â <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.update</span>(userParam);
 Â  Â  Â  Â <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseVO</span><span class="hljs-selector-class">.success</span>();
 Â   }
â€‹
 Â  Â @<span class="hljs-selector-tag">DeleteMapping</span>
 Â  Â @<span class="hljs-selector-tag">Operation</span>(summary = <span class="hljs-string">"åˆ é™¤"</span>)
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseVO</span>&lt;<span class="hljs-selector-tag">Void</span>&gt; <span class="hljs-selector-tag">delete</span>(<span class="hljs-variable">@RequestBody</span> List&lt;Long&gt; idList) {
 Â  Â  Â  Â <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.delete</span>(idList);
 Â  Â  Â  Â <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseVO</span><span class="hljs-selector-class">.success</span>();
 Â   }
â€‹
 Â  Â @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/page"</span>)
 Â  Â @<span class="hljs-selector-tag">Operation</span>(summary = <span class="hljs-string">"åˆ†é¡µ"</span>)
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseVO</span>&lt;<span class="hljs-selector-tag">PageResult</span>&lt;<span class="hljs-selector-tag">UserVO</span>&gt;&gt; <span class="hljs-selector-tag">page</span>(UserQuery userQuey) {
 Â  Â  Â  Â <span class="hljs-selector-tag">PageResult</span>&lt;<span class="hljs-selector-tag">UserVO</span>&gt; <span class="hljs-selector-tag">pageVO</span> = <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.page</span>(userQuery);
 Â  Â  Â  Â <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseVO</span><span class="hljs-selector-class">.success</span>(pageVO);
 Â   }
â€‹
 Â  Â @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/{id}"</span>)
 Â  Â @<span class="hljs-selector-tag">Operation</span>(summary = <span class="hljs-string">"è¯¦æƒ…"</span>)
 Â  Â <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseVO</span>&lt;<span class="hljs-selector-tag">UserVO</span>&gt; <span class="hljs-selector-tag">detail</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"id"</span>) Long id) {
 Â  Â  Â  Â <span class="hljs-selector-tag">UserVO</span> <span class="hljs-selector-tag">userVO</span> = <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.detail</span>(id);
 Â  Â  Â  Â <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseVO</span><span class="hljs-selector-class">.success</span>(userVO);
 Â   }
â€‹
}
â€‹
</code></pre>
<p>è‡³äºserviceå±‚çš„ä¸šåŠ¡å®šåˆ¶ä»£ç ï¼Œå¤§å®¶è‡ªè¡Œå°è¯•å®šåˆ¶ä¸€ä¸‹å“ˆã€‚</p>
<h2 data-id="heading-11">5.æ·±å…¥åŸç†ï¼šMPGæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2>
<h3 data-id="heading-12">5.1 æ ¸å¿ƒç±»ç»“æ„</h3>
<pre><code class="hljs language-arduino" lang="arduino">AutoGenerator Â  Â  Â  Â  Â  Â   <span class="hljs-comment">// ä»£ç ç”Ÿæˆå™¨å…¥å£</span>
â”œâ”€â”€ ConfigBuilder Â  Â  Â  Â   <span class="hljs-comment">// é…ç½®æ„å»ºå™¨</span>
â”œâ”€â”€ TemplateEngine Â  Â  Â  Â  <span class="hljs-comment">// æ¨¡æ¿å¼•æ“æŠ½è±¡</span>
â”‚ Â  â”œâ”€â”€ VelocityTemplateEngine
â”‚ Â  â”œâ”€â”€ FreemarkerTemplateEngine
â”‚ Â  â””â”€â”€ BeetlTemplateEngine
â””â”€â”€ InjectionConfig Â  Â  Â   <span class="hljs-comment">// æ³¨å…¥é…ç½®</span>
</code></pre>
<h3 data-id="heading-13">5.2 ä»£ç ç”Ÿæˆæµç¨‹</h3>
<ol>
<li><strong>é…ç½®è§£æ</strong>ï¼šè§£æå…¨å±€é…ç½®ã€æ•°æ®æºé…ç½®ã€åŒ…é…ç½®ã€ç­–ç•¥é…ç½®</li>
<li><strong>è¡¨ä¿¡æ¯è·å–</strong>ï¼šé€šè¿‡JDBCè·å–æ•°æ®åº“è¡¨ç»“æ„å’Œå­—æ®µä¿¡æ¯</li>
<li><strong>æ¨¡æ¿æ¸²æŸ“</strong>ï¼šä½¿ç”¨æ¨¡æ¿å¼•æ“å°†æ•°æ®æ¨¡å‹æ¸²æŸ“åˆ°æ¨¡æ¿æ–‡ä»¶ä¸­</li>
<li><strong>æ–‡ä»¶è¾“å‡º</strong>ï¼šå°†æ¸²æŸ“ç»“æœå†™å…¥åˆ°æŒ‡å®šç›®å½•</li>
</ol>
<h3 data-id="heading-14">5.3 å…³é”®æºç åˆ†æ</h3>
<p>è°ƒè¯•ä¸Šé¢ç”Ÿæˆä»£ç ç¤ºä¾‹ï¼Œç›´æ¥æ¥åˆ°<code>AutoGenerator</code>çš„æ‰§è¡Œæ–¹æ³•<code>#execute()</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"> <span class="hljs-keyword">public</span> void execute(AbstractTemplateEngine templateEngine) {
 Â  Â  Â  Â logger.debug(<span class="hljs-string">"==========================å‡†å¤‡ç”Ÿæˆæ–‡ä»¶...=========================="</span>);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// å¦‚æœé…ç½®ä¿¡æ¯ä¸ºç©ºï¼Œåˆ™åˆ›å»ºæ–°çš„é…ç½®æ„å»ºå™¨</span>
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == <span class="hljs-keyword">this</span>.config) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.config = new ConfigBuilder(<span class="hljs-keyword">this</span>.packageInfo, <span class="hljs-keyword">this</span>.dataSource, <span class="hljs-keyword">this</span>.strategy, <span class="hljs-keyword">this</span>.template, <span class="hljs-keyword">this</span>.globalConfig, <span class="hljs-keyword">this</span>.injection);
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// å¦‚æœæ¨¡æ¿å¼•æ“ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„Velocityæ¨¡æ¿å¼•æ“</span>
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == templateEngine) {
 Â  Â  Â  Â  Â  Â templateEngine = new VelocityTemplateEngine();
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è®¾ç½®é…ç½®æ„å»ºå™¨å¹¶æ‰§è¡Œæ‰¹é‡è¾“å‡ºæ“ä½œ</span>
 Â  Â  Â  Â templateEngine.setConfigBuilder(<span class="hljs-keyword">this</span>.config);
 Â  Â  Â  Â templateEngine.<span class="hljs-keyword">init</span>(<span class="hljs-keyword">this</span>.config).batchOutput().<span class="hljs-keyword">open</span>();
 Â  Â  Â  Â logger.debug(<span class="hljs-string">"==========================æ–‡ä»¶ç”Ÿæˆå®Œæˆï¼ï¼ï¼=========================="</span>);
 Â   }
</code></pre>
<p>æœ€ååˆ°ç”Ÿæˆå„ç±»ä»£ç æ–‡ä»¶çš„æ–¹æ³•<code>batchOutput()</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"> Â  Â <span class="hljs-comment">/**
 Â  Â  * æ‰¹é‡è¾“å‡ºæ¨¡æ¿æ–‡ä»¶
 Â  Â  * &lt;p&gt;
 Â  Â  * è¯¥æ–¹æ³•æ ¹æ®é…ç½®ä¿¡æ¯æ‰¹é‡ç”Ÿæˆä»£ç æ–‡ä»¶ï¼ŒåŒ…æ‹¬å®ä½“ç±»ã€Mapperã€Serviceã€Controllerç­‰æ–‡ä»¶ã€‚
 Â  Â  * å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š
 Â  Â  * 1. è·å–é…ç½®æ„å»ºå™¨å’Œè¡¨ä¿¡æ¯åˆ—è¡¨
 Â  Â  * 2. éå†æ¯å¼ è¡¨ï¼Œç”Ÿæˆå¯¹åº”çš„å¯¹è±¡æ˜ å°„å…³ç³»
 Â  Â  * 3. æ‰§è¡Œè‡ªå®šä¹‰æ–‡ä»¶è¾“å‡ºå‰çš„å›è°ƒå¤„ç†
 Â  Â  * 4. è¾“å‡ºå„ç±»ä»£ç æ–‡ä»¶
 Â  Â  *
 Â  Â  * <span class="hljs-doctag">@return</span> AbstractTemplateEngine æ¨¡æ¿å¼•æ“å®ä¾‹ï¼Œç”¨äºé“¾å¼è°ƒç”¨
 Â  Â  * <span class="hljs-doctag">@throws</span> RuntimeException å½“æ–‡ä»¶åˆ›å»ºå¤±è´¥æˆ–é…ç½®ä¿¡æ¯æœ‰è¯¯æ—¶æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-meta">@NotNull</span> AbstractTemplateEngine batchOutput() {
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è·å–é…ç½®æ„å»ºå™¨å®ä¾‹</span>
 Â  Â  Â  Â  Â  Â ConfigBuilder config = <span class="hljs-keyword">this</span>.getConfigBuilder();
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è·å–æ‰€æœ‰éœ€è¦å¤„ç†çš„è¡¨ä¿¡æ¯åˆ—è¡¨</span>
 Â  Â  Â  Â  Â  Â List&lt;TableInfo&gt; tableInfoList = config.getTableInfoList();
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// éå†æ‰€æœ‰è¡¨ä¿¡æ¯ï¼Œä¸ºæ¯å¼ è¡¨ç”Ÿæˆç›¸åº”çš„ä»£ç æ–‡ä»¶</span>
 Â  Â  Â  Â  Â  Â tableInfoList.forEach((tableInfo) -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ„å»ºå½“å‰è¡¨çš„å¯¹è±¡æ˜ å°„å…³ç³»ï¼Œç”¨äºæ¨¡æ¿æ¸²æŸ“</span>
 Â  Â  Â  Â  Â  Â  Â  Â Map&lt;String, Object&gt; objectMap = <span class="hljs-keyword">this</span>.getObjectMap(config, tableInfo);
 Â  Â  Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¤„ç†è‡ªå®šä¹‰æ³¨å…¥é…ç½®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span>
 Â  Â  Â  Â  Â  Â  Â  Â Optional.ofNullable(config.getInjectionConfig()).ifPresent((t) -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// åœ¨è¾“å‡ºæ–‡ä»¶å‰æ‰§è¡Œè‡ªå®šä¹‰å›è°ƒå¤„ç†</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â t.beforeOutputFile(tableInfo, objectMap);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è¾“å‡ºè‡ªå®šä¹‰æ–‡ä»¶</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.outputCustomFile(t.getCustomFiles(), tableInfo, objectMap);
 Â  Â  Â  Â  Â  Â  Â   });
 Â  Â  Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æŒ‰é¡ºåºè¾“å‡ºå„ç±»æ ‡å‡†ä»£ç æ–‡ä»¶</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.outputEntity(tableInfo, objectMap);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.outputMapper(tableInfo, objectMap);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.outputService(tableInfo, objectMap);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.outputController(tableInfo, objectMap);
 Â  Â  Â  Â  Â   });
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (Exception e) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">throw</span> new RuntimeException(<span class="hljs-string">"æ— æ³•åˆ›å»ºæ–‡ä»¶ï¼Œè¯·æ£€æŸ¥é…ç½®ä¿¡æ¯ï¼"</span>, e);
 Â  Â  Â   }
 Â   }
â€‹
</code></pre>
<h2 data-id="heading-15">6.æ€»ç»“</h2>
<p>MyBatis-Plusä»£ç ç”Ÿæˆå™¨ä½œä¸ºä¸€æ¬¾åŠŸèƒ½å¼ºå¤§ã€æ‰©å±•æ€§æä½³çš„ä»£ç ç”Ÿæˆå·¥å…·ï¼Œé€šè¿‡åˆç†çš„é…ç½®ç­–ç•¥å’Œçµæ´»çš„è‡ªå®šä¹‰æ¨¡æ¿ï¼Œèƒ½å¤Ÿæ»¡è¶³ç»å¤§å¤šæ•°é¡¹ç›®çš„ä»£ç ç”Ÿæˆéœ€æ±‚ã€‚æ·±å…¥ç†è§£å…¶åº•å±‚åŸç†å¹¶æŒæ¡é«˜çº§åº”ç”¨æŠ€å·§ï¼Œä¸ä»…èƒ½å¤§å¹…æå‡å¼€å‘æ•ˆç‡ï¼Œæ›´èƒ½ç¡®ä¿å›¢é˜Ÿä»£ç çš„è§„èŒƒæ€§å’Œä¸€è‡´æ€§ã€‚</p>
<p>å¯¹äºåç«¯å¼€å‘è€…è€Œè¨€ï¼Œå®šåˆ¶ç¬¦åˆå›¢é˜Ÿè§„èŒƒçš„ä»£ç ç”Ÿæˆæ–¹æ¡ˆï¼Œä¸»è¦æœ‰ä¸¤ç§å®è·µè·¯å¾„ï¼š</p>
<p><strong>ğŸ“¦ æ–¹æ¡ˆä¸€ï¼šSpring Bootæ·±åº¦é›†æˆ</strong></p>
<ul>
<li>å°†ç”Ÿæˆç­–ç•¥å°è£…ä¸ºé…ç½®æ–‡ä»¶ï¼Œä¸é¡¹ç›®æ— ç¼é›†æˆ</li>
<li>æ”¯æŒä¸€é”®ç”Ÿæˆä»£ç åˆ°æŒ‡å®šé¡¹ç›®ç›®å½•</li>
<li>å¯è¿›ä¸€æ­¥å°è£…ä¸ºStarterï¼Œå®ç°å›¢é˜Ÿçº§æ ‡å‡†åŒ–</li>
</ul>
<p><strong>ğŸ”§ æ–¹æ¡ˆäºŒï¼šå·¥å…·ç±»çµæ´»å®šåˆ¶</strong></p>
<ul>
<li>æä¾›é«˜åº¦å¯é…ç½®çš„ä»£ç ç”Ÿæˆå·¥å…·ç±»</li>
<li>æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€è§„åˆ™è®¾ç½®</li>
<li>æ›´é€‚åˆå¤šé¡¹ç›®ã€å·®å¼‚åŒ–çš„ç”Ÿæˆéœ€æ±‚</li>
</ul>
<p><strong>ğŸ’¡ é‡è¦æé†’</strong></p>
<p>éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼Œæœ¬æ–‡æ—¨åœ¨ç³»ç»Ÿä»‹ç»MyBatis-Plusä»£ç ç”Ÿæˆå™¨çš„æŠ€æœ¯å®ç°ä¸æœ€ä½³å®è·µï¼Œå¹¶éé¼“åŠ±ç›²ç›®ä¾èµ–ä»£ç ç”Ÿæˆã€‚åœ¨å®é™…é¡¹ç›®ä¸­æ˜¯å¦é‡‡ç”¨ã€å¦‚ä½•é‡‡ç”¨ï¼Œè¿˜éœ€è¦ç»“åˆå…·ä½“çš„ä¸šåŠ¡åœºæ™¯ã€å›¢é˜Ÿè§„èŒƒå’ŒæŠ€æœ¯æ¶æ„æ¥å®¡æ…å†³ç­–ã€‚</p>
<p><strong>å…³é”®åœ¨äº</strong>ï¼šå·¥å…·æ˜¯ä¸ºäº†æå‡æ•ˆç‡ï¼Œè€Œå¥½çš„ä»£ç æ›´éœ€è¦å¼€å‘è€…çš„è®¾è®¡æ€ç»´å’Œä¸šåŠ¡ç†è§£ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ åšå‡ºæ›´æ˜æ™ºçš„æŠ€æœ¯é€‰å‹ï¼</p>
<hr/>
<p><strong>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ä»£ç ç”Ÿæˆå™¨ä½¿ç”¨ç»éªŒï¼å¦‚æœä½ æœ‰æ›´å¥½çš„å®šåˆ¶æ–¹æ¡ˆï¼Œä¹ŸæœŸå¾…ä¸€èµ·äº¤æµæ¢è®¨~</strong></p>
<p><em>è§‰å¾—æ–‡ç« æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€è½¬å‘æ”¯æŒï½</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PromiseResolveThenableJobTask å¾®ä»»åŠ¡æ˜¯æ€ä¹ˆè¢«æ‰§è¡Œçš„]]></title>    <link>https://juejin.cn/post/7579450578293719082</link>    <guid>https://juejin.cn/post/7579450578293719082</guid>    <pubDate>2025-12-03T11:11:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579450578293719082" data-draft-id="7578582010417020934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PromiseResolveThenableJobTask å¾®ä»»åŠ¡æ˜¯æ€ä¹ˆè¢«æ‰§è¡Œçš„"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-03T11:11:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹‹æ’å›"/> <meta itemprop="url" content="https://juejin.cn/user/2261046026312318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PromiseResolveThenableJobTask å¾®ä»»åŠ¡æ˜¯æ€ä¹ˆè¢«æ‰§è¡Œçš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2261046026312318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹‹æ’å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T11:11:18.000Z" title="Wed Dec 03 2025 11:11:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h3 data-id="heading-0">èƒŒæ™¯</h3>
<p>è¦ç†è§£Â <code>NewPromiseResolveThenableJobTask</code>Â è¿™ä¸ªå¾®ä»»åŠ¡çš„ä½œç”¨ï¼Œéœ€è¦å…ˆå›åˆ°å®ƒçš„<strong>åˆ›å»ºåœºæ™¯</strong>ï¼šå½“ä¸€ä¸ª Promise çš„Â <code>then</code>Â å›è°ƒï¼ˆæˆ–å…¶ä»– Promise ç›¸å…³å›è°ƒï¼‰è¿”å›äº†ä¸€ä¸ª <strong>å¯ thenable å¯¹è±¡</strong>ï¼ˆé€šå¸¸æ˜¯å¦ä¸€ä¸ª Promiseï¼Œä½†ä¹ŸåŒ…æ‹¬è‡ªå®šä¹‰çš„ã€æœ‰Â <code>then</code>Â æ–¹æ³•çš„å¯¹è±¡ï¼‰æ—¶ï¼ŒJS å¼•æ“ä¼šåˆ›å»ºè¿™ä¸ªå¾®ä»»åŠ¡ï¼Œæœ¬è´¨æ˜¯ä¸ºäº† <strong>ç¡®ä¿ â€œè¿”å›çš„ thenable å¯¹è±¡â€ çš„çŠ¶æ€å®Œå…¨ç¡®å®šåï¼Œå†ç»§ç»­æ‰§è¡Œåç»­çš„ Promise é“¾</strong>ã€‚</p>
<p>å¦‚ä¸‹ä»£ç ï¼Œåç»­è®¨è®ºä¾æ‰˜äºæ­¤æ®µä»£ç å±•å¼€ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>() 
.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">0</span>); 
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">4</span>); 
}) 
.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> { 
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); 
});
</code></pre>
<h3 data-id="heading-1">å…ˆæ˜ç¡®å‰æï¼šä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå¾®ä»»åŠ¡ï¼Ÿ</h3>
<p>Promise é“¾çš„æ ¸å¿ƒè§„åˆ™æ˜¯ â€œ<strong>åç»­çš„ then å›è°ƒï¼Œå¿…é¡»ç­‰å¾…å‰ä¸€ä¸ª then å›è°ƒçš„ â€œè¿”å›å€¼â€ çŠ¶æ€ç¡®å®šåæ‰æ‰§è¡Œ</strong>â€ã€‚å¦‚æœå‰ä¸€ä¸ª then å›è°ƒè¿”å›çš„æ˜¯ä¸€ä¸ª<strong>æ™®é€šå€¼</strong>ï¼ˆæ¯”å¦‚ 4ã€'a'ï¼‰ï¼Œé‚£å¾ˆç®€å•ï¼šç›´æ¥æŠŠè¿™ä¸ªæ™®é€šå€¼ä½œä¸ºä¸‹ä¸€ä¸ª Promise çš„ â€œæˆåŠŸå€¼â€ï¼Œç«‹åˆ»è§¦å‘ä¸‹ä¸€ä¸ª then çš„å¾®ä»»åŠ¡ã€‚</p>
<p>ä½†å¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ª<strong>Promiseï¼ˆæˆ–å¯ thenable å¯¹è±¡ï¼‰</strong> ï¼ˆæ¯”å¦‚ä»£ç ä¸­Â <code>return Promise.resolve(4)</code>ï¼‰ï¼Œæƒ…å†µå°±å¤æ‚äº†ï¼šè¿™ä¸ªè¿”å›çš„ Promise æœ¬èº«æ˜¯ â€œå¼‚æ­¥çŠ¶æ€â€ï¼ˆå³ä½¿æ˜¯Â <code>Promise.resolve(4)</code>Â è¿™ç§ â€œç«‹å³æˆåŠŸâ€ çš„ï¼Œä¹Ÿä¸æ˜¯åŒæ­¥æ‰§è¡Œï¼‰ï¼Œ<strong>å¿…é¡»ç­‰å¾…å®ƒçš„Â <code>then</code>Â å›è°ƒæ‰§è¡Œå®Œï¼ˆçŠ¶æ€å®Œå…¨ç¡®å®šï¼‰ï¼Œæ‰èƒ½æŠŠå®ƒçš„ç»“æœä¼ ç»™ä¸‹ä¸€ä¸ª then</strong>ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œ<code>NewPromiseResolveThenableJobTask</code>Â å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ª â€œ<strong>ç­‰å¾…å¹¶ä¼ é€’ç»“æœ</strong>â€ çš„æ´»çš„ã€‚</p>
<h3 data-id="heading-2"><code>NewPromiseResolveThenableJobTask</code>Â å¾®ä»»åŠ¡å…·ä½“åšä»€ä¹ˆï¼Ÿ</h3>
<p>å®ƒçš„æ‰§è¡Œé€»è¾‘å¯ä»¥æ‹†è§£ä¸º 3 ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼Œæœ¬è´¨æ˜¯ â€œ<strong>ä»£ç†æ‰§è¡Œè¿”å›çš„ thenable å¯¹è±¡çš„ then æ–¹æ³•ï¼Œå¹¶æŠŠç»“æœåŒæ­¥ç»™å½“å‰ Promise é“¾</strong>â€ï¼š</p>
<h4 data-id="heading-3">1. å…ˆæ˜ç¡®è¿™ä¸ªå¾®ä»»åŠ¡çš„ â€œ3 ä¸ªè¾“å…¥å‚æ•°â€</h4>
<p>åœ¨åˆ›å»ºè¿™ä¸ªå¾®ä»»åŠ¡æ—¶ï¼Œå¼•æ“ä¼šä¼ å…¥ 3 ä¸ªå…³é”®ä¿¡æ¯ï¼ˆå¯¹åº” ECMA è§„èŒƒçš„å®šä¹‰: <a href="https://link.juejin.cn?target=https%3A%2F%2Ftc39.es%2Fecma262%2Fmultipage%2Fcontrol-abstraction-objects.html%23sec-newpromiseresolvethenablejob" target="_blank" title="https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-newpromiseresolvethenablejob" ref="nofollow noopener noreferrer">#sec-newpromiserelovethenablejobtask</a>ï¼‰ï¼š</p>
<ul>
<li><code>promiseToResolve</code>ï¼šå½“å‰ Promise é“¾ä¸­çš„ â€œä¸­é—´ Promiseâ€ï¼ˆå³å‰ä¸€ä¸ªÂ <code>then</code>Â æ‰§è¡Œåè¿”å›çš„æ–° Promiseï¼Œåç»­çš„Â <code>then</code>Â éƒ½æ˜¯æŒ‚åœ¨è¿™ä¸ª Promise ä¸Šçš„ï¼‰ã€‚</li>
<li><code>thenable</code>ï¼šå‰ä¸€ä¸ªÂ <code>then</code>Â å›è°ƒè¿”å›çš„ â€œå¯ thenable å¯¹è±¡â€ï¼ˆæ¯”å¦‚ä»£ç ä¸­Â <code>return Promise.resolve(4)</code>Â é‡Œçš„è¿™ä¸ª Promiseï¼‰ã€‚</li>
<li><code>then</code>ï¼š<code>thenable</code>Â å¯¹è±¡è‡ªèº«çš„Â <code>then</code>Â æ–¹æ³•ï¼ˆæ¯”å¦‚ Promise åŸå‹ä¸Šçš„Â <code>Promise.prototype.then</code>ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-keyword">const</span> promiseToResolve = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> { 
        <span class="hljs-keyword">return</span> [[thenable å¯¹è±¡]]: { 
            [[then æ–¹æ³•]]: <span class="hljs-function">(<span class="hljs-params">onFulfilled, onRejected</span>) =&gt;</span> {}
        }
     })
</code></pre>
<h4 data-id="heading-4">2. å¾®ä»»åŠ¡æ‰§è¡Œçš„æ ¸å¿ƒé€»è¾‘</h4>
<p>å½“è¿™ä¸ªå¾®ä»»åŠ¡è¢«æ‰§è¡Œæ—¶ï¼Œä¼šå¹²ä¸¤ä»¶å…³é”®çš„äº‹ï¼š</p>
<h5 data-id="heading-5">ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨Â <code>thenable</code>Â çš„Â <code>then</code>Â æ–¹æ³•ï¼Œç»‘å®š â€œç»“æœä¼ é€’å›è°ƒâ€</h5>
<p>å¾®ä»»åŠ¡ä¼šä¸»åŠ¨è°ƒç”¨Â <code>thenable.then(...)</code>ï¼Œå¹¶ä¼ å…¥ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼ˆç›¸å½“äº â€œä»£ç†å›è°ƒâ€ï¼‰ï¼š</p>
<ul>
<li>æˆåŠŸå›è°ƒï¼ˆ<code>onFulfilled</code>ï¼‰ï¼šå¦‚æœÂ <code>thenable</code>Â æˆåŠŸï¼ˆæ¯”å¦‚Â <code>Promise.resolve(4)</code>Â æˆåŠŸï¼‰ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªå›è°ƒï¼ŒæŠŠÂ <code>thenable</code>Â çš„æˆåŠŸå€¼ï¼ˆæ¯”å¦‚ 4ï¼‰ä¼ ç»™Â <code>promiseToResolve</code>ï¼Œè®©Â <code>promiseToResolve</code>Â ä¹Ÿå˜æˆ â€œæˆåŠŸçŠ¶æ€â€ï¼Œå¹¶æŠŠ 4 ä½œä¸ºå®ƒçš„æˆåŠŸå€¼ã€‚</li>
<li>å¤±è´¥å›è°ƒï¼ˆ<code>onRejected</code>ï¼‰ï¼šå¦‚æœÂ <code>thenable</code>Â å¤±è´¥ï¼ˆæ¯”å¦‚Â <code>Promise.reject(5)</code>ï¼‰ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªå›è°ƒï¼ŒæŠŠÂ <code>thenable</code>Â çš„å¤±è´¥åŸå› ä¼ ç»™Â <code>promiseToResolve</code>ï¼Œè®©Â <code>promiseToResolve</code>Â å˜æˆ â€œå¤±è´¥çŠ¶æ€â€ã€‚</li>
</ul>
<h5 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šè§¦å‘åç»­çš„ Promise é“¾</h5>
<p>ä¸€æ—¦Â <code>promiseToResolve</code>Â çš„çŠ¶æ€è¢«ç¡®å®šï¼ˆæˆåŠŸ / å¤±è´¥ï¼‰ï¼Œå¼•æ“å°±ä¼šä¸ºÂ <code>promiseToResolve</code>Â ä¸ŠæŒ‚è½½çš„åç»­Â <code>then</code>Â å›è°ƒï¼ˆæ¯”å¦‚ä»£ç ä¸­ç¬¬äºŒä¸ªÂ <code>then((res) =&gt; console.log(res))</code>ï¼‰åˆ›å»ºæ–°çš„å¾®ä»»åŠ¡ï¼ŒæŠŠåˆšæ‰ä¼ é€’è¿‡æ¥çš„ç»“æœï¼ˆæ¯”å¦‚ 4ï¼‰ä¼ ç»™è¿™ä¸ªåç»­å›è°ƒï¼Œè®© Promise é“¾ç»§ç»­æ‰§è¡Œã€‚</p>
<h3 data-id="heading-7">ç»“åˆä»£ç ï¼Œçœ‹è¿™ä¸ªå¾®ä»»åŠ¡çš„å…·ä½“ä½œç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>() <span class="hljs-comment">// 1. åˆå§‹ Promiseï¼ˆæˆåŠŸçŠ¶æ€ï¼Œå€¼ä¸º undefinedï¼‰</span>
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">// 2. ç¬¬ä¸€ä¸ª then å›è°ƒï¼ˆcb1ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// 3. åŒæ­¥æ‰“å° 0</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">4</span>); <span class="hljs-comment">// 4. è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼ˆè®°ä¸º P4ï¼‰</span>
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> { <span class="hljs-comment">// 5. ç¬¬äºŒä¸ª then å›è°ƒï¼ˆcb2ï¼ŒæŒ‚åœ¨ â€œä¸­é—´ Promiseâ€:P_mid ä¸Šï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); <span class="hljs-comment">// 6. æœ€ç»ˆæ‰“å° 4</span>
  });
</code></pre>
<p>è¿™é‡ŒÂ <code>NewPromiseResolveThenableJobTask</code>Â çš„æ‰§è¡Œè¿‡ç¨‹å®Œå…¨è´´åˆä¸Šé¢çš„é€»è¾‘ï¼š</p>
<ol>
<li>
<p>æ‰§è¡ŒÂ <code>cb1</code>Â æ—¶ï¼Œè¿”å›äº†Â <code>Promise.resolve(4)</code>ï¼ˆå³Â <code>thenable = P4</code>ï¼‰ï¼Œå¼•æ“åˆ›å»ºÂ <code>NewPromiseResolveThenableJobTask</code>Â å¾®ä»»åŠ¡ï¼Œä¼ å…¥ï¼š</p>
<ul>
<li><code>promiseToResolve = P_mid</code>ï¼ˆç¬¬ä¸€ä¸ª then è¿”å›çš„ä¸­é—´ Promiseï¼Œcb2 æŒ‚åœ¨å®ƒä¸Šé¢ï¼‰</li>
<li><code>thenable = P4</code></li>
<li><code>then = P4.then</code>ï¼ˆå³ Promise åŸå‹çš„ then æ–¹æ³•ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>å½“è¿™ä¸ªå¾®ä»»åŠ¡æ‰§è¡Œæ—¶ï¼š</p>
<ul>
<li>è°ƒç”¨Â <code>P4.then(æˆåŠŸå›è°ƒ, å¤±è´¥å›è°ƒ)</code>ï¼šå› ä¸ºÂ <code>P4</code>Â æ˜¯Â <code>Promise.resolve(4)</code>ï¼ˆå·²æˆåŠŸï¼‰ï¼Œè§¦å‘ <code>PromiseResolveThenableJobTask</code>çš„æ‰§è¡Œæµç¨‹ï¼ˆé‡ç‚¹ï¼‰ã€‚</li>
<li>â€œæˆåŠŸå›è°ƒâ€ æŠŠÂ <code>4</code>Â ä¼ ç»™Â <code>P_mid</code>ï¼Œè®©Â <code>P_mid</code>Â å˜æˆ â€œæˆåŠŸçŠ¶æ€â€ï¼Œå€¼ä¸º 4ã€‚</li>
<li>å¼•æ“ä¸ºÂ <code>P_mid</code>Â ä¸Šçš„Â <code>cb2</code>Â åˆ›å»ºæ–°å¾®ä»»åŠ¡ï¼Œåç»­æ‰§è¡Œè¿™ä¸ªå¾®ä»»åŠ¡æ—¶ï¼Œå°±ä¼šæŠŠÂ <code>4</code>Â ä¼ ç»™Â <code>cb2</code>ï¼Œæ‰“å°å‡ºÂ <code>4</code>ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-8">é‡ç‚¹æ ¸å¿ƒ(<code>PromiseResolveThenableJobTask</code>è¢«æ‰§è¡Œ)ï¼š</h3>
<p><code>PromiseResolveThenableJobTask</code> çš„è¢«æ‰§è¡Œè¿‡ç¨‹ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Ftc39.es%2Fecma262%2F%23sec-promiseresolvethenablejob" target="_blank" title="https://tc39.es/ecma262/#sec-promiseresolvethenablejob" ref="nofollow noopener noreferrer">esma è§„èŒƒ</a> çš„æè¿°</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e37d6ffb8944eb187e2556ba66f587a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmL5oGS5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765365233&amp;x-signature=KUVzZExvKAonI9q7VjsNpAKvsvE%3D" alt="image.png" loading="lazy"/></p>
<p><em>å…¶å®å®ƒè§„å®šäº†è¿™ä¸ª <code>PromiseResolveThenableJobTask</code> è¦ä½œä¸ºå¼‚æ­¥ä»»åŠ¡å»æ‰§è¡Œï¼ˆåŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼‰ï¼›</em></p>
<p><em>å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fchromium.googlesource.com%2Fv8%2Fv8.git%2F%2B%2Frefs%2Fheads%2F14.4-lkgr%2Fsrc%2Fbuiltins%2Fpromise-resolve.tq%23177" target="_blank" title="https://chromium.googlesource.com/v8/v8.git/+/refs/heads/14.4-lkgr/src/builtins/promise-resolve.tq#177" ref="nofollow noopener noreferrer">v8::builtins::promise-resolve.tq</a> çš„å¤„ç†æ˜¯ä¸€æ ·çš„ã€‚v8 æŠŠ å®ƒåŠ å…¥äº† å¾®ä»»åŠ¡é˜Ÿåˆ—</em></p>
<p>ä½†æ˜¯ï¼Œè¿™ä¸ªä»»åŠ¡åç»­çš„è¢«æ‰§è¡Œï¼Œå°±æ²¡æœ‰è¯´äº†ï¼Œè§„èŒƒä¸Šæˆ‘å¹¶æ²¡æœ‰æ‰¾åˆ°ï¼›</p>
<p>ä½†æ˜¯ï¼Œçœ‹äº† <code>PromiseResolveThenableJobTask</code> çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fchromium.googlesource.com%2Fv8%2Fv8.git%2F%2B%2Frefs%2Fheads%2F14.4-lkgr%2Fsrc%2Fbuiltins%2Fpromise-jobs.tq%2328" target="_blank" title="https://chromium.googlesource.com/v8/v8.git/+/refs/heads/14.4-lkgr/src/builtins/promise-jobs.tq#28" ref="nofollow noopener noreferrer">v8 å…·ä½“å®ç°</a>,
å®ƒåˆ†äº†ä¸¤ç§æƒ…å†µæ¥å¤„ç†çš„ï¼š</p>
<ol>
<li><code>thenableå¯¹è±¡</code> æ˜¯ <code>Promiseå¯¹è±¡</code>æ—¶ï¼›æ‰§è¡Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fchromium.googlesource.com%2Fv8%2Fv8.git%2F%2B%2Frefs%2Fheads%2F14.4-lkgr%2Fsrc%2Fbuiltins%2Fpromise-abstract-operations.tq%23508" target="_blank" title="https://chromium.googlesource.com/v8/v8.git/+/refs/heads/14.4-lkgr/src/builtins/promise-abstract-operations.tq#508" ref="nofollow noopener noreferrer">PerformPromiseThen</a>çš„å®ç°æ–¹å¼ï¼›
<ul>
<li>å¦‚æœ promise æ˜¯ <code>pendding</code> æ€ï¼Œä¼šåˆ›å»ºä¸€ä¸ª <code>NewPromiseReaction</code> ä»»åŠ¡ï¼Œ ç­‰å¾… promise å…‘ç°ï¼›</li>
<li>å¦‚æœ promise æ˜¯ <code>fulfiled</code>|<code>rejected</code>, åˆ™ä¼šåˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡ï¼ŒåŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…æ‰§è¡Œï¼›</li>
</ul>
</li>
<li><code>thenableå¯¹è±¡</code> æ˜¯ <code>éPromise å¯¹è±¡</code>æ—¶ï¼›ç›´æ¥èµ° resolve function é€»è¾‘ï¼›
<ul>
<li>ç›´æ¥è°ƒç”¨ resolve(ç»“æœ)ï¼Œå…‘ç° promise;</li>
</ul>
</li>
</ol>
<p>å¦‚å›¾(<a href="https://link.juejin.cn?target=https%3A%2F%2Fchromium.googlesource.com%2Fv8%2Fv8.git%2F%2B%2Frefs%2Fheads%2F14.4-lkgr%2Fsrc%2Fbuiltins%2Fpromise-jobs.tq%2328" target="_blank" title="https://chromium.googlesource.com/v8/v8.git/+/refs/heads/14.4-lkgr/src/builtins/promise-jobs.tq#28" ref="nofollow noopener noreferrer"><code>PromiseResolveThenableJob</code></a>):</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12cbf9ca5ea44c9f9a41933e9d670198~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmL5oGS5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765365233&amp;x-signature=F27dN0gDrw%2FidAUbTdwGNqQnPW0%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚å›¾ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fchromium.googlesource.com%2Fv8%2Fv8.git%2F%2B%2Frefs%2Fheads%2F14.4-lkgr%2Fsrc%2Fbuiltins%2Fpromise-abstract-operations.tq%23451" target="_blank" title="https://chromium.googlesource.com/v8/v8.git/+/refs/heads/14.4-lkgr/src/builtins/promise-abstract-operations.tq#451" ref="nofollow noopener noreferrer"><code>PerformPromiseThenImpl</code></a>ï¼‰ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a0e5699cb6846e692ba2554f4123b48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LmL5oGS5ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765365233&amp;x-signature=0G%2BZ4AM5goEztVrqTjgVpDH2aGw%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ä¸‹ä¸¤æ®µä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">4</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
  });

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">5</span>);
  });
  
<span class="hljs-comment">// è¾“å‡ºï¼š0,1,2,3,4,5 </span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> {
      <span class="hljs-title function_">then</span>(<span class="hljs-params">onFulfilled, onRejected</span>) {
        <span class="hljs-title function_">onFulfilled</span>(<span class="hljs-number">4</span>);
      },
    };
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
  });

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">5</span>);
  });

<span class="hljs-comment">// è¾“å‡ºï¼š0,1,2,4,3,5</span>

</code></pre>
<h3 data-id="heading-9">ä¸€å¥è¯æ€»ç»“</h3>
<p><code>NewPromiseResolveThenableJobTask</code>Â å°±æ˜¯ä¸€ä¸ª â€œ<strong>ç»“æœä¼ é€’ä»£ç†å¾®ä»»åŠ¡</strong>â€ï¼šä¸“é—¨å¤„ç† â€œthen å›è°ƒè¿”å› thenable å¯¹è±¡â€ çš„åœºæ™¯ï¼Œç¡®ä¿è¿™ä¸ª thenable å¯¹è±¡çš„çŠ¶æ€ç¡®å®šåï¼ŒæŠŠå®ƒçš„ç»“æœåŒæ­¥ç»™å½“å‰ Promise é“¾çš„ä¸­é—´ Promiseï¼Œå†è§¦å‘åç»­çš„ then å›è°ƒï¼Œä¿è¯ Promise é“¾çš„é¡ºåºå’ŒçŠ¶æ€æ­£ç¡®æ€§ã€‚</p>
<p><strong>æ³¨æ„çš„ç‚¹æ˜¯ï¼š</strong></p>
<p>thenableå¯¹è±¡æ˜¯ Promiseå¯¹è±¡ å’Œ æ™®é€šåŒ…å«å®ç° then æ–¹æ³•çš„å¯¹è±¡ï¼Œ<code>PromiseResolveThenableJobTask</code> çš„å¤„ç†æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ï¼›</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue2ç®€å•å®ç°ä¸€ä¸ªæƒé™ç®¡ç†]]></title>    <link>https://juejin.cn/post/7579264485259575311</link>    <guid>https://juejin.cn/post/7579264485259575311</guid>    <pubDate>2025-12-03T12:12:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579264485259575311" data-draft-id="7579088065697447976" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue2ç®€å•å®ç°ä¸€ä¸ªæƒé™ç®¡ç†"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-03T12:12:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Aniugel"/> <meta itemprop="url" content="https://juejin.cn/user/3034307824198407"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue2ç®€å•å®ç°ä¸€ä¸ªæƒé™ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3034307824198407/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Aniugel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T12:12:53.000Z" title="Wed Dec 03 2025 12:12:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>ä»¥ä¸‹æ˜¯åŸºäº Vue2 å®ç°çš„<strong>åŸºç¡€æƒé™ç®¡ç†æ–¹æ¡ˆ</strong>ï¼Œæ¶µç›–<strong>è·¯ç”±æƒé™æ§åˆ¶ã€æŒ‰é’®æƒé™æ§åˆ¶ã€æŒ‡ä»¤å°è£…</strong>ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œé€‚åˆä¸­å°å‹åå°ç³»ç»Ÿï¼š</p>
<h3 data-id="heading-0">ä¸€ã€æƒé™æ•°æ®è®¾è®¡</h3>
<p>é¦–å…ˆå®šä¹‰ç”¨æˆ·æƒé™ç»“æ„ï¼ˆé€šå¸¸ä»åç«¯æ¥å£è·å–ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/store/modules/auth.js</span>
<span class="hljs-keyword">const</span> state = {
  <span class="hljs-comment">// ç”¨æˆ·è§’è‰²ï¼ˆå¦‚ ['admin', 'editor']ï¼‰</span>
  <span class="hljs-attr">roles</span>: [],
  <span class="hljs-comment">// ç”¨æˆ·æ‹¥æœ‰çš„æƒé™ç ï¼ˆå¦‚ ['user:add', 'user:edit']ï¼‰</span>
  <span class="hljs-attr">permissions</span>: []
};

<span class="hljs-keyword">const</span> mutations = {
  <span class="hljs-title function_">SET_ROLES</span>(<span class="hljs-params">state, roles</span>) {
    state.<span class="hljs-property">roles</span> = roles;
  },
  <span class="hljs-title function_">SET_PERMISSIONS</span>(<span class="hljs-params">state, permissions</span>) {
    state.<span class="hljs-property">permissions</span> = permissions;
  }
};

<span class="hljs-keyword">const</span> actions = {
  <span class="hljs-comment">// æ¨¡æ‹Ÿä»åç«¯è·å–æƒé™ï¼ˆå®é™…é¡¹ç›®ä¸­æ›¿æ¢ä¸ºæ¥å£è¯·æ±‚ï¼‰</span>
  <span class="hljs-title function_">getAuth</span>(<span class="hljs-params">{ commit }</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
      <span class="hljs-comment">// å‡è®¾åç«¯è¿”å›çš„æƒé™æ•°æ®</span>
      <span class="hljs-keyword">const</span> authData = {
        <span class="hljs-attr">roles</span>: [<span class="hljs-string">'editor'</span>],
        <span class="hljs-attr">permissions</span>: [<span class="hljs-string">'dashboard:view'</span>, <span class="hljs-string">'user:view'</span>, <span class="hljs-string">'user:edit'</span>]
      };
      <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_ROLES'</span>, authData.<span class="hljs-property">roles</span>);
      <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_PERMISSIONS'</span>, authData.<span class="hljs-property">permissions</span>);
      <span class="hljs-title function_">resolve</span>();
    });
  }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,
  state,
  mutations,
  actions
};
</code></pre>
<h3 data-id="heading-1">äºŒã€è·¯ç”±æƒé™æ§åˆ¶</h3>
<p>é€šè¿‡<strong>è·¯ç”±å®ˆå«</strong>è¿‡æ»¤æ— æƒé™çš„è·¯ç”±ï¼Œç»“åˆ<code>VueRouter</code>çš„åŠ¨æ€è·¯ç”±æ·»åŠ ï¼š</p>
<h4 data-id="heading-2">1. å®šä¹‰è·¯ç”±è§„åˆ™ï¼ˆåŒºåˆ†å…¬å¼€ / ç§æœ‰è·¯ç”±ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/router/index.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Router</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store'</span>;

<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Router</span>);

<span class="hljs-comment">// å…¬å¼€è·¯ç”±ï¼ˆæ— éœ€æƒé™ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> constantRoutes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/login'</span>)
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/404'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/404'</span>)
  }
];

<span class="hljs-comment">// ç§æœ‰è·¯ç”±ï¼ˆéœ€æƒé™ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> asyncRoutes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/layout'</span>),
    <span class="hljs-attr">redirect</span>: <span class="hljs-string">'/dashboard'</span>,
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'dashboard'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/dashboard'</span>),
        <span class="hljs-attr">meta</span>: { 
          <span class="hljs-attr">title</span>: <span class="hljs-string">'é¦–é¡µ'</span>, 
          <span class="hljs-attr">roles</span>: [<span class="hljs-string">'admin'</span>, <span class="hljs-string">'editor'</span>], <span class="hljs-comment">// éœ€è¦çš„è§’è‰²</span>
          <span class="hljs-attr">permissions</span>: [<span class="hljs-string">'dashboard:view'</span>] <span class="hljs-comment">// éœ€è¦çš„æƒé™ç </span>
        }
      }
    ]
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/layout'</span>),
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'list'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/user/list'</span>),
        <span class="hljs-attr">meta</span>: { 
          <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·åˆ—è¡¨'</span>, 
          <span class="hljs-attr">permissions</span>: [<span class="hljs-string">'user:view'</span>] 
        }
      },
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'edit/:id'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/user/edit'</span>),
        <span class="hljs-attr">meta</span>: { 
          <span class="hljs-attr">title</span>: <span class="hljs-string">'ç¼–è¾‘ç”¨æˆ·'</span>, 
          <span class="hljs-attr">permissions</span>: [<span class="hljs-string">'user:edit'</span>] 
        }
      }
    ]
  },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'*'</span>, <span class="hljs-attr">redirect</span>: <span class="hljs-string">'/404'</span>, <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> }
];

<span class="hljs-keyword">const</span> <span class="hljs-title function_">createRouter</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Router</span>({
  <span class="hljs-attr">routes</span>: constantRoutes
});

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>();

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;
</code></pre>
<h4 data-id="heading-3">2. è·¯ç”±å®ˆå«å®ç°æƒé™è¿‡æ»¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/permission.js</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>;
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;
<span class="hljs-keyword">import</span> { asyncRoutes, constantRoutes } <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>;

<span class="hljs-comment">// æƒé™åˆ¤æ–­å‡½æ•°ï¼šæ£€æŸ¥æ˜¯å¦æœ‰è§’è‰²/æƒé™</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">hasPermission</span>(<span class="hljs-params">roles, permissions, route</span>) {
  <span class="hljs-keyword">if</span> (route.<span class="hljs-property">meta</span> &amp;&amp; route.<span class="hljs-property">meta</span>.<span class="hljs-property">roles</span>) {
    <span class="hljs-comment">// è§’è‰²æ ¡éªŒ</span>
    <span class="hljs-keyword">return</span> roles.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">role</span> =&gt;</span> route.<span class="hljs-property">meta</span>.<span class="hljs-property">roles</span>.<span class="hljs-title function_">includes</span>(role));
  }
  <span class="hljs-keyword">if</span> (route.<span class="hljs-property">meta</span> &amp;&amp; route.<span class="hljs-property">meta</span>.<span class="hljs-property">permissions</span>) {
    <span class="hljs-comment">// æƒé™ç æ ¡éªŒ</span>
    <span class="hljs-keyword">return</span> permissions.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">perm</span> =&gt;</span> route.<span class="hljs-property">meta</span>.<span class="hljs-property">permissions</span>.<span class="hljs-title function_">includes</span>(perm));
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ— æƒé™é…ç½®åˆ™é»˜è®¤å¯è§</span>
}

<span class="hljs-comment">// è¿‡æ»¤ç§æœ‰è·¯ç”±</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">filterAsyncRoutes</span>(<span class="hljs-params">routes, roles, permissions</span>) {
  <span class="hljs-keyword">const</span> res = [];
  routes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> tmp = { ...route };
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">hasPermission</span>(roles, permissions, tmp)) {
      <span class="hljs-keyword">if</span> (tmp.<span class="hljs-property">children</span>) {
        tmp.<span class="hljs-property">children</span> = <span class="hljs-title function_">filterAsyncRoutes</span>(tmp.<span class="hljs-property">children</span>, roles, permissions);
      }
      res.<span class="hljs-title function_">push</span>(tmp);
    }
  });
  <span class="hljs-keyword">return</span> res;
}

router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; {
  <span class="hljs-comment">// æ¨¡æ‹Ÿå·²ç™»å½•ï¼ˆå®é™…é¡¹ç›®ä¸­ç”¨tokenåˆ¤æ–­ï¼‰</span>
  <span class="hljs-keyword">const</span> hasToken = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">if</span> (hasToken) {
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-string">'/login'</span>) {
      <span class="hljs-title function_">next</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span> });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å·²è·å–æƒé™</span>
      <span class="hljs-keyword">const</span> hasRoles = store.<span class="hljs-property">getters</span>[<span class="hljs-string">'auth/roles'</span>].<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>;
      <span class="hljs-keyword">if</span> (hasRoles) {
        <span class="hljs-title function_">next</span>();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-comment">// è·å–æƒé™æ•°æ®</span>
          <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">'auth/getAuth'</span>);
          <span class="hljs-keyword">const</span> roles = store.<span class="hljs-property">getters</span>[<span class="hljs-string">'auth/roles'</span>];
          <span class="hljs-keyword">const</span> permissions = store.<span class="hljs-property">getters</span>[<span class="hljs-string">'auth/permissions'</span>];
          <span class="hljs-comment">// è¿‡æ»¤å¹¶æ·»åŠ åŠ¨æ€è·¯ç”±</span>
          <span class="hljs-keyword">const</span> accessedRoutes = <span class="hljs-title function_">filterAsyncRoutes</span>(asyncRoutes, roles, permissions);
          router.<span class="hljs-title function_">addRoutes</span>(accessedRoutes);
          <span class="hljs-comment">// ç¡®ä¿è·¯ç”±æ·»åŠ å®Œæˆåè·³è½¬</span>
          <span class="hljs-title function_">next</span>({ ...to, <span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span> });
        } <span class="hljs-keyword">catch</span> (err) {
          <span class="hljs-title function_">next</span>(<span class="hljs-string">`/login?redirect=<span class="hljs-subst">${to.path}</span>`</span>);
        }
      }
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æœªç™»å½•åˆ™è·³è½¬ç™»å½•é¡µ</span>
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-string">'/login'</span>) {
      <span class="hljs-title function_">next</span>();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">next</span>(<span class="hljs-string">`/login?redirect=<span class="hljs-subst">${to.path}</span>`</span>);
    }
  }
});
</code></pre>
<h3 data-id="heading-4">ä¸‰ã€æŒ‰é’®æƒé™æ§åˆ¶</h3>
<p>é€šè¿‡<strong>è‡ªå®šä¹‰æŒ‡ä»¤</strong>å®ç°æŒ‰é’®çº§åˆ«çš„æƒé™æ§åˆ¶ï¼š</p>
<h4 data-id="heading-5">1. æ³¨å†Œæƒé™æŒ‡ä»¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/directives/permission.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store'</span>;

<span class="hljs-comment">/**
 * v-permission: æŒ‰é’®æƒé™æŒ‡ä»¤
 * ä½¿ç”¨ï¼š&lt;button v-permission="'user:add'"&gt;æ–°å¢&lt;/button&gt;
 */</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'permission'</span>, {
  <span class="hljs-title function_">inserted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> { value } = binding;
    <span class="hljs-keyword">const</span> permissions = store.<span class="hljs-property">getters</span>[<span class="hljs-string">'auth/permissions'</span>];
    <span class="hljs-comment">// æ ¡éªŒæƒé™ï¼ˆæ”¯æŒæ•°ç»„ï¼šv-permission="['user:add', 'user:edit']"ï¼‰</span>
    <span class="hljs-keyword">if</span> (value) {
      <span class="hljs-keyword">const</span> hasPerm = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(value) 
        ? permissions.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">perm</span> =&gt;</span> value.<span class="hljs-title function_">includes</span>(perm)) 
        : permissions.<span class="hljs-title function_">includes</span>(value);
      <span class="hljs-keyword">if</span> (!hasPerm) {
        el.<span class="hljs-property">parentNode</span> &amp;&amp; el.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">removeChild</span>(el); <span class="hljs-comment">// æ— æƒé™åˆ™ç§»é™¤å…ƒç´ </span>
      }
    }
  }
});

<span class="hljs-comment">/**
 * v-role: è§’è‰²æƒé™æŒ‡ä»¤
 * ä½¿ç”¨ï¼š&lt;button v-role="'admin'"&gt;ç®¡ç†å‘˜æŒ‰é’®&lt;/button&gt;
 */</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'role'</span>, {
  <span class="hljs-title function_">inserted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> { value } = binding;
    <span class="hljs-keyword">const</span> roles = store.<span class="hljs-property">getters</span>[<span class="hljs-string">'auth/roles'</span>];
    <span class="hljs-keyword">if</span> (value) {
      <span class="hljs-keyword">const</span> hasRole = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(value) 
        ? roles.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">role</span> =&gt;</span> value.<span class="hljs-title function_">includes</span>(role)) 
        : roles.<span class="hljs-title function_">includes</span>(value);
      <span class="hljs-keyword">if</span> (!hasRole) {
        el.<span class="hljs-property">parentNode</span> &amp;&amp; el.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">removeChild</span>(el);
      }
    }
  }
});
</code></pre>
<h4 data-id="heading-6">2. å…¨å±€å¼•å…¥æŒ‡ä»¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/main.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>;
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>;
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./directives/permission'</span>; <span class="hljs-comment">// å¼•å…¥æƒé™æŒ‡ä»¤</span>

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
  router,
  store,
  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>)
}).$mount(<span class="hljs-string">'#app'</span>);
</code></pre>
<h3 data-id="heading-7">å››ã€é¡µé¢ä¸­ä½¿ç”¨æƒé™æ§åˆ¶</h3>
<pre><code class="hljs language-javascript" lang="javascript">&lt;!-- src/views/user/list.<span class="hljs-property">vue</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç”¨æˆ·åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æŒ‰é’®æƒé™æ§åˆ¶ï¼šåªæœ‰user:addæƒé™æ‰æ˜¾ç¤º --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-permission</span>=<span class="hljs-string">"'user:add'"</span>&gt;</span>æ–°å¢ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è§’è‰²æ§åˆ¶ï¼šåªæœ‰adminè§’è‰²æ‰æ˜¾ç¤º --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-role</span>=<span class="hljs-string">"'admin'"</span>&gt;</span>åˆ é™¤ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- è¡¨æ ¼å†…å®¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"userList"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"æ“ä½œ"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot-scope</span>=<span class="hljs-string">"scope"</span>&gt;</span>
          <span class="hljs-comment">&lt;!-- ç¼–è¾‘æƒé™æ§åˆ¶ --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">v-permission</span>=<span class="hljs-string">"'user:edit'"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"editUser(scope.row)"</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-8">äº”ã€æ ¸å¿ƒåŠŸèƒ½æ€»ç»“</h3>
<ol>
<li><strong>è·¯ç”±æƒé™</strong>ï¼šé€šè¿‡<code>router.addRoutes</code>åŠ¨æ€æ·»åŠ æœ‰æƒé™çš„è·¯ç”±ï¼Œç»“åˆ<code>beforeEach</code>å®ˆå«è¿‡æ»¤æ— æƒé™é¡µé¢ï¼›</li>
<li><strong>æŒ‰é’®æƒé™</strong>ï¼šè‡ªå®šä¹‰<code>v-permission</code>/<code>v-role</code>æŒ‡ä»¤ï¼Œæ— æƒé™æ—¶è‡ªåŠ¨ç§»é™¤ DOM å…ƒç´ ï¼›</li>
<li><strong>æƒé™å­˜å‚¨</strong>ï¼šé€šè¿‡ Vuex ç®¡ç†ç”¨æˆ·è§’è‰²å’Œæƒé™ç ï¼Œæ”¯æŒä»åç«¯åŠ¨æ€è·å–ã€‚</li>
</ol>
<h3 data-id="heading-9">æ‰©å±•å»ºè®®</h3>
<ul>
<li>å®é™…é¡¹ç›®ä¸­ï¼Œæƒé™æ•°æ®éœ€ä»åç«¯æ¥å£è·å–ï¼ˆå¦‚ç™»å½•åè¿”å›ï¼‰ï¼›</li>
<li>å¯ç»“åˆ<code>vue-i18n</code>å®ç°æƒé™ç›¸å…³æ–‡æ¡ˆçš„å›½é™…åŒ–ï¼›</li>
<li>å¤æ‚åœºæ™¯å¯å¢åŠ  â€œæ•°æ®æƒé™â€ï¼ˆå¦‚ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±åˆ›å»ºçš„æ•°æ®ï¼‰ï¼Œé€šè¿‡æ¥å£å‚æ•°è¿‡æ»¤ã€‚</li>
</ul>
<p>è¿™å¥—æ–¹æ¡ˆè½»é‡ä¸”æ˜“æ‰©å±•ï¼Œé€‚åˆ Vue2 é¡¹ç›®çš„åŸºç¡€æƒé™ç®¡ç†éœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç³»ç»Ÿæ€§æ•´ç†ç»„ä»¶ä¼ å‚14ç§æ–¹å¼]]></title>    <link>https://juejin.cn/post/7579264485259591695</link>    <guid>https://juejin.cn/post/7579264485259591695</guid>    <pubDate>2025-12-03T12:15:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579264485259591695" data-draft-id="7579385656780390434" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç³»ç»Ÿæ€§æ•´ç†ç»„ä»¶ä¼ å‚14ç§æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-03T12:15:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹æ— æ­¢å¢ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/957017941879235"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç³»ç»Ÿæ€§æ•´ç†ç»„ä»¶ä¼ å‚14ç§æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/957017941879235/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹æ— æ­¢å¢ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T12:15:03.000Z" title="Wed Dec 03 2025 12:15:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ‡é¢˜å‰è¨€ï¼š</h2>
<p>åœ¨é¢è¯•æ—¶è¢«é—®åˆ°ç»„ä»¶ä¼ å‚çš„æ–¹å¼æ²¡æœ‰ç­”çš„å¾ˆå®Œæ•´å…¨é¢ï¼Œåœ¨ç»è¿‡å¾ˆå¤šé¢è¯•ä¹‹åå‘ç°ï¼Œé¢è¯•çš„å›ç­”å·²ç»ä¸åœ¨äºä½ æ˜¯å¦ç­”å‡ºæ¥ï¼Œæ›´é«˜çš„ä¸€ä¸ªlevelæ˜¯è¦ç­”å…¨ï¼Œç­”å‡ºå…¶ä»–é¢è¯•è€…ç­”ä¸å‡ºæ¥çš„ï¼Œå¾—æœ‰è‡ªå·±çš„ä¸€ä¸ªæ¡†æ¶ï¼Œäºæ˜¯ç³»ç»Ÿæ€§æ•´ç†äº†14ç§æ–¹å¼
<strong>ç³»ç»ŸåŒ–æ¢³ç†æ¯ä¸€ç§æ–¹å¼çš„åŸç†ã€ç”¨æ³•ã€é€‚ç”¨åœºæ™¯ã€ä¼˜ç¼ºç‚¹åŠæ³¨æ„äº‹é¡¹</strong>ï¼Œå¹¶æ ‡æ³¨å…¶åœ¨ <strong>Vue 2 vs Vue 3</strong> ä¸­çš„æ”¯æŒæƒ…å†µï¼Œå¸®åŠ©ä½ å…¨é¢æŒæ¡ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ“š Vue ç»„ä»¶ä¼ å‚ä¸é€šä¿¡æ–¹å¼å…¨è§£æï¼ˆ14 ç§ï¼‰</h2>
<blockquote>
<p>âœ… è¡¨ç¤ºæ¨è / å®‰å…¨<br/>
âš ï¸ è¡¨ç¤ºè°¨æ…ä½¿ç”¨<br/>
âŒ è¡¨ç¤ºå·²åºŸå¼ƒ / ä¸æ¨è</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">1. <strong>props</strong>ï¼ˆâœ… æ¨èï¼‰</h3>
<ul>
<li><strong>æ–¹å‘</strong>ï¼šçˆ¶ â†’ å­</li>
<li><strong>åŸç†</strong>ï¼šå£°æ˜å¼å±æ€§ä¼ é€’ï¼Œå•å‘æ•°æ®æµ</li>
<li><strong>Vue 2/3</strong>ï¼šâœ… å…¨æ”¯æŒ</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ --&gt;
&lt;Child :title="msg" /&gt;
&lt;!-- å­ --&gt;
defineProps({ title: String })
</code></pre>
</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæ¸…æ™°ã€ç±»å‹å®‰å…¨ã€å¯é¢„æµ‹</li>
<li><strong>æ³¨æ„</strong>ï¼šä¸è¦ç›´æ¥ä¿®æ”¹ propï¼ˆVue ä¼šè­¦å‘Šï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-3">2. <strong>$emit / v-on</strong>ï¼ˆâœ… æ¨èï¼‰</h3>
<ul>
<li><strong>æ–¹å‘</strong>ï¼šå­ â†’ çˆ¶</li>
<li><strong>åŸç†</strong>ï¼šå­ç»„ä»¶è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶ç›‘å¬</li>
<li><strong>Vue 2</strong>ï¼š<code>this.$emit('event', data)</code></li>
<li><strong>Vue 3</strong>ï¼š<code>const emit = defineEmits(['event'])</code></li>
<li><strong>ç¤ºä¾‹</strong>ï¼š
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å­ --&gt;
emit('update', newValue)
&lt;!-- çˆ¶ --&gt;
&lt;Child @update="handle" /&gt;
</code></pre>
</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šè§£è€¦ã€ç¬¦åˆäº‹ä»¶é©±åŠ¨æ€æƒ³</li>
</ul>
<hr/>
<h3 data-id="heading-4">3. <strong>.sync ä¿®é¥°ç¬¦</strong>ï¼ˆâš ï¸ Vue 2 ä¸“ç”¨ï¼ŒVue 3 å·²ç§»é™¤ï¼‰</h3>
<ul>
<li><strong>åŸç†</strong>ï¼šè¯­æ³•ç³–ï¼Œç­‰ä»·äº <code>:prop + @update:prop</code></li>
<li><strong>Vue 2 ç¤ºä¾‹</strong>ï¼š
<pre><code class="hljs language-vue" lang="vue">&lt;Child :title.sync="pageTitle" /&gt;
&lt;!-- å­ç»„ä»¶éœ€ emit('update:title', newTitle) --&gt;
</code></pre>
</li>
<li><strong>Vue 3</strong>ï¼šâŒ ä¸æ”¯æŒï¼Œæ”¹ç”¨ <code>v-model:propName</code></li>
<li><strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šå¤š <code>v-model</code>ï¼ˆè§ç¬¬ 4 æ¡ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-5">4. <strong>v-model</strong>ï¼ˆâœ… æ¨èï¼ŒVue 3 å¢å¼ºï¼‰</h3>
<ul>
<li><strong>åŸç†</strong>ï¼šåŒå‘ç»‘å®šè¯­æ³•ç³–</li>
<li><strong>Vue 2</strong>ï¼šä»…æ”¯æŒå•ä¸ª <code>value</code> + <code>input</code> äº‹ä»¶</li>
<li><strong>Vue 3</strong>ï¼šæ”¯æŒå¤šä¸ª <code>v-model:propName</code>
<pre><code class="hljs language-vue" lang="vue">&lt;Child v-model:name="userName" v-model:age="userAge" /&gt;
&lt;!-- å­ç»„ä»¶éœ€ emit('update:name', ...) --&gt;
</code></pre>
</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šç®€æ´ã€è¯­ä¹‰æ¸…æ™°ï¼Œé€‚åˆè¡¨å•æ§ä»¶</li>
</ul>
<hr/>
<h3 data-id="heading-6">5. <strong>ref</strong>ï¼ˆâœ… æœ‰é™æ¨èï¼‰</h3>
<ul>
<li><strong>æ–¹å‘</strong>ï¼šçˆ¶ â†’ å­ï¼ˆè·å–å­å®ä¾‹æˆ– DOMï¼‰</li>
<li><strong>åŸç†</strong>ï¼šé€šè¿‡ <code>ref</code> å¼•ç”¨å­ç»„ä»¶å®ä¾‹ï¼Œç›´æ¥è°ƒç”¨æ–¹æ³•æˆ–è®¿é—®æ•°æ®</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š
<pre><code class="hljs language-vue" lang="vue">&lt;Child ref="childRef" /&gt;
// çˆ¶ç»„ä»¶ä¸­ï¼šthis.$refs.childRef.doSomething()ï¼ˆVue 2ï¼‰
// Vue 3ï¼šconst childRef = ref(); childRef.value.doSomething()
</code></pre>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šè°ƒç”¨å­ç»„ä»¶æ–¹æ³•ï¼ˆå¦‚ focusã€validateï¼‰</li>
<li><strong>âš ï¸ æ³¨æ„</strong>ï¼šç ´åå°è£…æ€§ï¼Œåº”é¿å…è¯»å†™å­ç»„ä»¶å†…éƒ¨çŠ¶æ€</li>
</ul>
<hr/>
<h3 data-id="heading-7">6. <strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">children / </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">c</span><span class="mord mathnormal">hi</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">d</span><span class="mord mathnormal">re</span><span class="mord mathnormal">n</span><span class="mord">/</span></span></span></span></span>parent</strong>ï¼ˆâŒ ä¸æ¨èï¼‰</h3>
<ul>
<li><strong>åŸç†</strong>ï¼šç›´æ¥è®¿é—®çˆ¶å­ç»„ä»¶å®ä¾‹</li>
<li><strong>é—®é¢˜</strong>ï¼š
<ul>
<li><code>$children</code> é¡ºåºä¸ç¡®å®š</li>
<li>ç ´åç»„ä»¶ç‹¬ç«‹æ€§</li>
<li>éš¾ä»¥ç»´æŠ¤å’Œæµ‹è¯•</li>
</ul>
</li>
<li><strong>Vue 3</strong>ï¼šâŒ <code>$children</code> å·²ç§»é™¤ï¼Œ<code>$parent</code> ä»å­˜åœ¨ä½†ä¸é¼“åŠ±ä½¿ç”¨</li>
<li><strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šprops / emits / provide-inject</li>
</ul>
<hr/>
<h3 data-id="heading-8">7. <strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>t</mi><mi>t</mi><mi>r</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">attrs / </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">a</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">rs</span><span class="mord">/</span></span></span></span></span>listeners</strong>ï¼ˆâœ… Vue 2ï¼›Vue 3 åˆå¹¶ä¸º <code>$attrs</code>ï¼‰</h3>
<ul>
<li><strong>ç”¨é€”</strong>ï¼šé€ä¼ æœªå£°æ˜çš„ props å’Œäº‹ä»¶ï¼ˆå¸¸ç”¨äºé«˜é˜¶ç»„ä»¶ã€åŒ…è£…ç»„ä»¶ï¼‰</li>
<li><strong>Vue 2</strong>ï¼š
<ul>
<li><code>$attrs</code>ï¼šæœªè¢« props å£°æ˜çš„ attribute</li>
<li><code>$listeners</code>ï¼šæ‰€æœ‰ <code>v-on</code> äº‹ä»¶ç›‘å¬å™¨</li>
</ul>
</li>
<li><strong>Vue 3</strong>ï¼š<code>$listeners</code> è¢«åˆå¹¶è¿› <code>$attrs</code>ï¼ˆåŒ…å« <code>onXxx</code> äº‹ä»¶ï¼‰</li>
<li><strong>å…¸å‹ç”¨æ³•</strong>ï¼šå°è£…ç¬¬ä¸‰æ–¹ UI ç»„ä»¶
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Wrapper.vue --&gt;
&lt;el-input v-bind="$attrs" v-on="$listeners" /&gt;
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-9">8. <strong>provide / inject</strong>ï¼ˆâœ… æ¨èï¼‰</h3>
<ul>
<li><strong>æ–¹å‘</strong>ï¼šç¥–å…ˆ â†’ åä»£ï¼ˆè·¨å¤šå±‚ï¼‰</li>
<li><strong>åŸç†</strong>ï¼šä¾èµ–æ³¨å…¥ï¼Œç±»ä¼¼ React Context</li>
<li><strong>å“åº”å¼</strong>ï¼šéœ€ä¼ é€’ <code>ref</code> æˆ– <code>reactive</code> å¯¹è±¡
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç¥–å…ˆ</span>
<span class="hljs-title function_">provide</span>(<span class="hljs-string">'theme'</span>, themeRef)
<span class="hljs-comment">// åä»£</span>
<span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">inject</span>(<span class="hljs-string">'theme'</span>)
</code></pre>
</li>
<li><strong>é€‚ç”¨</strong>ï¼šä¸»é¢˜ã€è¯­è¨€ã€ç”¨æˆ·ä¿¡æ¯ç­‰å…¨å±€é…ç½®</li>
<li><strong>Vue 2/3</strong>ï¼šâœ… æ”¯æŒï¼ˆVue 3 æ›´ç®€æ´ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-10">9. <strong>EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼‰</strong>ï¼ˆâš ï¸ è°¨æ…ä½¿ç”¨ï¼‰</h3>
<ul>
<li><strong>åŸç†</strong>ï¼šåŸºäºå‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„å…¨å±€é€šä¿¡</li>
<li><strong>å®ç°</strong>ï¼š
<ul>
<li>Vue 2ï¼š<code>new Vue()</code> ä½œäº‹ä»¶ä¸­å¿ƒ</li>
<li>Vue 3ï¼šéœ€å¼•å…¥ <code>mitt</code> ç­‰åº“</li>
</ul>
</li>
<li><strong>é—®é¢˜</strong>ï¼š
<ul>
<li>éš¾ä»¥è¿½è¸ªæ•°æ®æµ</li>
<li>å®¹æ˜“å†…å­˜æ³„æ¼ï¼ˆå¿˜è®° offï¼‰</li>
<li>ä¸åˆ©äºå¤§å‹é¡¹ç›®ç»´æŠ¤</li>
</ul>
</li>
<li><strong>å»ºè®®</strong>ï¼šä»…ç”¨äºå°å‹é¡¹ç›®æˆ–ä¸´æ—¶è§£è€¦ï¼Œ<strong>ä¼˜å…ˆç”¨ Pinia</strong></li>
</ul>
<hr/>
<h3 data-id="heading-11">10. <strong>Vuex / Piniaï¼ˆçŠ¶æ€ç®¡ç†ï¼‰</strong>ï¼ˆâœ… å¤§å‹é¡¹ç›®æ¨èï¼‰</h3>
<ul>
<li><strong>åŸç†</strong>ï¼šé›†ä¸­å¼çŠ¶æ€ç®¡ç†</li>
<li><strong>Vuex</strong>ï¼šVue 2 å®˜æ–¹æ–¹æ¡ˆï¼ˆè¾ƒé‡ï¼‰</li>
<li><strong>Pinia</strong>ï¼šVue 3 å®˜æ–¹æ¨èï¼ˆæ›´è½»é‡ã€TypeScript å‹å¥½ï¼‰</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼š
<ul>
<li>çŠ¶æ€å¯é¢„æµ‹</li>
<li>æ”¯æŒ DevTools è°ƒè¯•</li>
<li>é€»è¾‘å¤ç”¨ï¼ˆactions/gettersï¼‰</li>
</ul>
</li>
<li><strong>é€‚ç”¨</strong>ï¼šå¤šç»„ä»¶å…±äº«çŠ¶æ€ã€æŒä¹…åŒ–ã€å¤æ‚ä¸šåŠ¡é€»è¾‘</li>
</ul>
<hr/>
<h3 data-id="heading-12">11. <strong>$root</strong>ï¼ˆâŒ ä¸æ¨èï¼‰</h3>
<ul>
<li><strong>åŸç†</strong>ï¼šè®¿é—®æ ¹å®ä¾‹ï¼ˆ<code>new Vue()</code>ï¼‰</li>
<li><strong>é—®é¢˜</strong>ï¼š
<ul>
<li>å…¨å±€è€¦åˆ</li>
<li>éš¾ä»¥æµ‹è¯•å’Œç»´æŠ¤</li>
<li>åœ¨ç»„ä»¶åº“æˆ–å¾®å‰ç«¯ä¸­ä¸å¯é </li>
</ul>
</li>
<li><strong>Vue 3</strong>ï¼šâŒ <code>$root</code> ä»å­˜åœ¨ä½†å¼ºçƒˆä¸å»ºè®®ä½¿ç”¨</li>
<li><strong>æ›¿ä»£</strong>ï¼šprovide/inject æˆ– Pinia</li>
</ul>
<hr/>
<h3 data-id="heading-13">12. <strong>slotï¼ˆæ’æ§½ï¼‰</strong>ï¼ˆâœ… æ¨èï¼‰</h3>
<ul>
<li><strong>æ–¹å‘</strong>ï¼šçˆ¶ â†’ å­ï¼ˆå†…å®¹åˆ†å‘ï¼‰</li>
<li><strong>ç±»å‹</strong>ï¼š
<ul>
<li>é»˜è®¤æ’æ§½ <code>&lt;slot /&gt;</code></li>
<li>å…·åæ’æ§½ <code>&lt;slot name="header" /&gt;</code></li>
<li><strong>ä½œç”¨åŸŸæ’æ§½</strong>ï¼ˆå…³é”®ï¼ï¼‰ï¼šå­ â†’ çˆ¶ä¼ æ•°æ®
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å­ --&gt;
&lt;slot :user="currentUser" /&gt;
&lt;!-- çˆ¶ --&gt;
&lt;Child v-slot="{ user }"&gt;{{ user.name }}&lt;/Child&gt;
</code></pre>
</li>
</ul>
</li>
<li><strong>é€‚ç”¨</strong>ï¼šé«˜åº¦å¯å®šåˆ¶ç»„ä»¶ï¼ˆè¡¨æ ¼ã€å¼¹çª—ã€å¡ç‰‡ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-14">13. <strong>sessionStorage / localStorage</strong>ï¼ˆâš ï¸ ç‰¹å®šåœºæ™¯ï¼‰</h3>
<ul>
<li><strong>åŸç†</strong>ï¼šé€šè¿‡æµè§ˆå™¨å­˜å‚¨å®ç°â€œä¼ªé€šä¿¡â€</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
<ul>
<li>é¡µé¢åˆ·æ–°åä¿æŒçŠ¶æ€</li>
<li>å¤š Tab é—´ç®€å•åŒæ­¥ï¼ˆé…åˆ <code>storage</code> äº‹ä»¶ï¼‰</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š
<ul>
<li>éå“åº”å¼ï¼ˆéœ€æ‰‹åŠ¨ç›‘å¬ <code>storage</code> äº‹ä»¶ï¼‰</li>
<li>æ•°æ®ç±»å‹é™åˆ¶ï¼ˆä»…å­—ç¬¦ä¸²ï¼‰</li>
<li>ä¸é€‚åˆå®æ—¶é€šä¿¡</li>
</ul>
</li>
<li><strong>å»ºè®®</strong>ï¼šä»…ç”¨äºæŒä¹…åŒ–ï¼Œ<strong>éç»„ä»¶é€šä¿¡é¦–é€‰</strong></li>
</ul>
<hr/>
<h3 data-id="heading-15">14. <strong>postMessage</strong>ï¼ˆâš ï¸ è·¨æ–‡æ¡£/è·¨åŸŸé€šä¿¡ï¼‰</h3>
<ul>
<li><strong>åŸç†</strong>ï¼šHTML5 æä¾›çš„å®‰å…¨è·¨åŸŸé€šä¿¡æœºåˆ¶</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
<ul>
<li>iframe ä¸ä¸»é¡µé¢é€šä¿¡</li>
<li>Web Worker ä¸ä¸»çº¿ç¨‹</li>
<li>è·¨åŸŸçª—å£é€šä¿¡</li>
</ul>
</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸»é¡µé¢</span>
iframe.<span class="hljs-property">contentWindow</span>.<span class="hljs-title function_">postMessage</span>(data, <span class="hljs-string">'*'</span>)
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handler)
</code></pre>
</li>
<li><strong>æ³¨æ„</strong>ï¼šéœ€éªŒè¯ <code>event.origin</code> é˜²æ­¢ XSS</li>
<li><strong>ä¸ç»„ä»¶é€šä¿¡å…³ç³»</strong>ï¼šå±äº<strong>è·¨ä¸Šä¸‹æ–‡é€šä¿¡</strong>ï¼Œéç»„ä»¶å†…éƒ¨æœºåˆ¶</li>
</ul>
<hr/>
<h2 data-id="heading-16">ğŸ“Š æ€»ç»“å¯¹æ¯”è¡¨</h2>





























































































































<table><thead><tr><th>æ–¹å¼</th><th>æ–¹å‘</th><th>Vue 2</th><th>Vue 3</th><th>æ¨èåº¦</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>props</td><td>çˆ¶â†’å­</td><td>âœ…</td><td>âœ…</td><td>âœ…âœ…âœ…</td><td>åŸºç¡€æ•°æ®ä¼ é€’</td></tr><tr><td>$emit / v-on</td><td>å­â†’çˆ¶</td><td>âœ…</td><td>âœ…</td><td>âœ…âœ…âœ…</td><td>äº‹ä»¶é€šçŸ¥</td></tr><tr><td>.sync</td><td>åŒå‘</td><td>âœ…</td><td>âŒ</td><td>âš ï¸</td><td>Vue 2 åŒå‘ç»‘å®šï¼ˆå·²æ·˜æ±°ï¼‰</td></tr><tr><td>v-model</td><td>åŒå‘</td><td>âœ…ï¼ˆå•ï¼‰</td><td>âœ…ï¼ˆå¤šï¼‰</td><td>âœ…âœ…âœ…</td><td>è¡¨å•ã€å¯ç¼–è¾‘ç»„ä»¶</td></tr><tr><td>ref</td><td>çˆ¶â†’å­ï¼ˆè°ƒç”¨ï¼‰</td><td>âœ…</td><td>âœ…</td><td>âœ…âœ…</td><td>è°ƒç”¨å­æ–¹æ³•</td></tr><tr><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">children/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">c</span><span class="mord mathnormal">hi</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">d</span><span class="mord mathnormal">re</span><span class="mord mathnormal">n</span><span class="mord">/</span></span></span></span></span>parent</td><td>åŒå‘</td><td>âœ…</td><td>âŒ/$parent</td><td>âŒ</td><td>â€”â€”</td></tr><tr><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>t</mi><mi>t</mi><mi>r</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">attrs/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">a</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">rs</span><span class="mord">/</span></span></span></span></span>listeners</td><td>é€ä¼ </td><td>âœ…</td><td>âœ…ï¼ˆåˆå¹¶ï¼‰</td><td>âœ…âœ…</td><td>é«˜é˜¶ç»„ä»¶å°è£…</td></tr><tr><td>provide/inject</td><td>ç¥–å…ˆâ†’åä»£</td><td>âœ…</td><td>âœ…</td><td>âœ…âœ…âœ…</td><td>è·¨å±‚çº§é…ç½®</td></tr><tr><td>EventBus</td><td>ä»»æ„</td><td>âœ…</td><td>éœ€ mitt</td><td>âš ï¸</td><td>å°å‹é¡¹ç›®ä¸´æ—¶é€šä¿¡</td></tr><tr><td>Vuex/Pinia</td><td>å…¨å±€</td><td>âœ…/âœ…</td><td>Piniaâœ…</td><td>âœ…âœ…âœ…</td><td>å¤æ‚çŠ¶æ€å…±äº«</td></tr><tr><td>$root</td><td>å…¨å±€</td><td>âœ…</td><td>âœ…ï¼ˆä¸æ¨èï¼‰</td><td>âŒ</td><td>â€”â€”</td></tr><tr><td>slot</td><td>çˆ¶â†’å­ï¼ˆå†…å®¹ï¼‰</td><td>âœ…</td><td>âœ…</td><td>âœ…âœ…âœ…</td><td>UI å®šåˆ¶</td></tr><tr><td>sessionStorage</td><td>æŒä¹…åŒ–</td><td>âœ…</td><td>âœ…</td><td>âš ï¸</td><td>åˆ·æ–°ä¿æ´»ã€å¤š Tab</td></tr><tr><td>postMessage</td><td>è·¨ä¸Šä¸‹æ–‡</td><td>âœ…</td><td>âœ…</td><td>âš ï¸</td><td>iframeã€Worker</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-17">âœ… æœ€ä½³å®è·µå»ºè®®</h2>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨ props + emits</strong>ï¼šä¿æŒç»„ä»¶æ¸…æ™°ã€‚</li>
<li><strong>è·¨å±‚çº§ç”¨ provide/inject</strong>ï¼Œè€Œé <code>$parent</code>ã€‚</li>
<li><strong>å…±äº«çŠ¶æ€ç”¨ Pinia</strong>ï¼Œè€Œé EventBus æˆ– <code>$root</code>ã€‚</li>
<li><strong>é¿å…ç›´æ¥æ“ä½œå­ç»„ä»¶</strong>ï¼ˆref ä»…ç”¨äºæ–¹æ³•è°ƒç”¨ï¼‰ã€‚</li>
<li><strong>ä½œç”¨åŸŸæ’æ§½</strong>æ˜¯é«˜çº§ç»„ä»¶è®¾è®¡çš„åˆ©å™¨ã€‚</li>
<li><strong>localStorage / postMessage</strong> å±äºç‰¹æ®Šåœºæ™¯ï¼Œå‹¿æ»¥ç”¨ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptæ ¸å¿ƒæœºåˆ¶ï¼šæ‰§è¡Œæ ˆã€ä½œç”¨åŸŸä¸thisæŒ‡å‘å®Œå…¨è§£æ]]></title>    <link>https://juejin.cn/post/7579385656780554274</link>    <guid>https://juejin.cn/post/7579385656780554274</guid>    <pubDate>2025-12-03T13:39:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579385656780554274" data-draft-id="7579264485259755535" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptæ ¸å¿ƒæœºåˆ¶ï¼šæ‰§è¡Œæ ˆã€ä½œç”¨åŸŸä¸thisæŒ‡å‘å®Œå…¨è§£æ"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-03T13:39:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ç¼˜æ¢¦"/> <meta itemprop="url" content="https://juejin.cn/user/4167568429944347"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptæ ¸å¿ƒæœºåˆ¶ï¼šæ‰§è¡Œæ ˆã€ä½œç”¨åŸŸä¸thisæŒ‡å‘å®Œå…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4167568429944347/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ç¼˜æ¢¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T13:39:46.000Z" title="Wed Dec 03 2025 13:39:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>JavaScriptä½œä¸ºä¸€é—¨çµæ´»è€Œå¼ºå¤§çš„è¯­è¨€ï¼Œå…¶åº•å±‚è¿è¡Œæœºåˆ¶å¸¸å¸¸è®©å¼€å‘è€…æ„Ÿåˆ°å›°æƒ‘ã€‚ä¸ºä»€ä¹ˆå˜é‡æœ‰æ—¶èƒ½è®¿é—®ï¼Œæœ‰æ—¶ä¸èƒ½ï¼Ÿä¸ºä»€ä¹ˆthisçš„æŒ‡å‘ä¼š"é£˜å¿½ä¸å®š"ï¼Ÿæœ¬æ–‡å°†æ·±å…¥å‰–æJavaScriptçš„ä¸‰å¤§æ ¸å¿ƒæœºåˆ¶â€”â€”<strong>æ‰§è¡Œæ ˆä¸æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ã€<strong>ä½œç”¨åŸŸä¸ä½œç”¨åŸŸé“¾</strong>ã€<strong>thisæŒ‡å‘</strong>ï¼Œå¸®ä½ å½»åº•ç†è§£JavaScriptçš„è¿è¡ŒåŸç†ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ‰§è¡Œæ ˆä¸æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šä»£ç æ‰§è¡Œçš„èˆå°</h2>
<h3 data-id="heading-2">1.1 é¢è¯•ç›´å‡»ï¼šè°ˆè°ˆä½ å¯¹JSæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆçš„ç†è§£</h3>
<p>å½“é¢è¯•å®˜é—®è¿™ä¸ªé—®é¢˜æ—¶ï¼Œä»–ä»¬æƒ³è€ƒå¯Ÿçš„æ˜¯ä½ å¯¹<strong>JavaScriptå¼•æ“å¦‚ä½•ç®¡ç†å’Œæ‰§è¡Œä»£ç </strong>çš„ç†è§£æ·±åº¦ã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ˜¯å¼•æ“è¿½è¸ªæ‰€æœ‰å‡½æ•°è°ƒç”¨ã€ç®¡ç†æ‰§è¡Œæµç¨‹çš„<strong>æ ¸å¿ƒè°ƒåº¦ä¸­å¿ƒ</strong>ã€‚</p>
<p>*<strong>ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ï¼Ÿ</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯è¯„ä¼°å’Œæ‰§è¡Œ js ä»£ç çš„ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚æ¯å½“ js ä»£ç åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå®ƒéƒ½æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œã€‚</p>
<p><strong>æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹</strong></p>
<p>js ä¸­æœ‰ä¸‰ç§æ‰§è¡Œä¸Šä¸‹æ–‡ç±»å‹</p>
<ul>
<li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šè¿™æ˜¯é»˜è®¤æˆ–è€…è¯´åŸºç¡€çš„ä¸Šä¸‹æ–‡ï¼Œä»»ä½•ä¸åœ¨å‡½æ•°å†…éƒ¨çš„ä»£ç éƒ½åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ã€‚å®ƒä¼šæ‰§è¡Œä¸¤ä»¶äº‹ï¼Œåˆ›å»ºä¸€ä¸ªå…¨å±€çš„ window å¯¹è±¡ï¼ˆæµè§ˆå™¨çš„æƒ…å†µä¸‹ï¼‰ï¼Œå¹¶ä¸”è®¾ç½® this çš„å€¼ç­‰äºè¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚ä¸€ä¸ªç¨‹åºä¸­åªä¼šæœ‰ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li>
<li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šæ¯å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œéƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ã€‚æ¯ä¸ªå‡½æ•°éƒ½æœ‰å®ƒè‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä¸è¿‡æ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶åˆ›å»ºçš„ã€‚å‡½æ•°ä¸Šä¸‹æ–‡å¯ä»¥æœ‰ä»»æ„å¤šä¸ªã€‚æ¯å•ä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºï¼Œå®ƒä¼šæŒ‰å®šä¹‰çš„é¡ºåºæ‰§è¡Œä¸€ç³»åˆ—æ­¥éª¤ã€‚</li>
<li>eval å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šæ‰§è¡Œåœ¨ eval å‡½æ•°å†…éƒ¨çš„ä»£ç ä¹Ÿä¼šæœ‰å®ƒå±äºè‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<p><strong>è°ƒç”¨æ ˆ</strong></p>
<p>è°ƒç”¨æ ˆæ˜¯è§£æå™¨ï¼ˆå¦‚æµè§ˆå™¨ä¸­çš„ js è§£æå™¨ï¼‰çš„ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥åœ¨è„šæœ¬è°ƒç”¨å¤šä¸ªå‡½æ•°æ—¶ï¼Œè·Ÿè¸ªæ¯ä¸ªå‡½æ•°åœ¨å®Œæˆæ‰§è¡Œæ—¶åº”è¯¥è¿”å›æ§åˆ¶çš„ç‚¹ã€‚ï¼ˆå¦‚ä»€ä¹ˆå‡½æ•°æ­£åœ¨æ‰§è¡Œï¼Œä»€ä¹ˆå‡½æ•°è¢«è¿™ä¸ªå‡½æ•°è°ƒç”¨ï¼Œä¸‹ä¸€ä¸ªè°ƒç”¨çš„å‡½æ•°æ˜¯è°ï¼‰</p>
<ul>
<li>å½“è„šæœ¬è¦è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè§£æå™¨æŠŠè¯¥å‡½æ•°æ·»åŠ åˆ°æ ˆä¸­å¹¶ä¸”æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚</li>
<li>ä»»ä½•è¢«è¿™ä¸ªå‡½æ•°è°ƒç”¨çš„å‡½æ•°ä¼šè¿›ä¸€æ­¥æ·»åŠ åˆ°è°ƒç”¨æ ˆä¸­ï¼Œå¹¶ä¸”è¿è¡Œåˆ°å®ƒä»¬è¢«ä¸Šä¸ªç¨‹åºè°ƒç”¨çš„ä½ç½®ã€‚</li>
<li>å½“å‡½æ•°è¿è¡Œç»“æŸåï¼Œè§£é‡Šå™¨å°†å®ƒä»å †æ ˆä¸­å–å‡ºï¼Œå¹¶ä¸”ä¸»ä»£ç åˆ—è¡¨ä¸­ç»§ç»­æ‰§è¡Œä»£ç ã€‚</li>
<li>å¦‚æœæ ˆå ç”¨çš„ç©ºé—´æ¯”åˆ†é…ç»™å®ƒçš„ç©ºé—´è¿˜å¤§ï¼Œé‚£ä¹ˆåˆ™ä¼šå¯¼è‡´â€œæ ˆæº¢å‡ºâ€é”™è¯¯</li>
</ul>
<hr/>
<h3 data-id="heading-3">1.2 ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Ÿ</h3>
<p>ç®€å•æ¥è¯´ï¼Œ<strong>æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯è¯„ä¼°å’Œæ‰§è¡ŒJavaScriptä»£ç çš„ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µ</strong>ã€‚æ‰€æœ‰çš„JavaScriptä»£ç éƒ½æ˜¯åœ¨æŸä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿è¡Œçš„ã€‚</p>
<h3 data-id="heading-4">1.3 æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸‰ç§ç±»å‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">var</span> globalVar = <span class="hljs-string">"å…¨å±€å˜é‡"</span>; <span class="hljs-comment">// åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­</span>

<span class="hljs-comment">// 2. å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">var</span> localVar = <span class="hljs-string">"å±€éƒ¨å˜é‡"</span>; <span class="hljs-comment">// åœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(localVar);
}

<span class="hljs-comment">// 3. Evalå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰</span>
<span class="hljs-built_in">eval</span>(<span class="hljs-string">"var evalVar = 'evalå˜é‡'"</span>);
</code></pre>
<p><strong>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª</p>
</li>
<li>
<p>åˆ›å»ºæ—¶ä¼šåšä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>åœ¨æµè§ˆå™¨ä¸­åˆ›å»ºå…¨å±€å¯¹è±¡<code>window</code></li>
<li>å°†<code>this</code>çš„å€¼è®¾ç½®ä¸ºè¿™ä¸ªå…¨å±€å¯¹è±¡</li>
</ol>
</li>
</ul>
<h3 data-id="heading-5">1.4 æ‰§è¡Œæ ˆï¼ˆè°ƒç”¨æ ˆï¼‰ï¼šåè¿›å…ˆå‡ºçš„ç®¡ç†æœºåˆ¶</h3>
<p>æ‰§è¡Œæ ˆæ˜¯ä¸€ç§LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨å’Œç®¡ç†ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">first</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€ä¸ªå‡½æ•°å¼€å§‹'</span>);
    <span class="hljs-title function_">second</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€ä¸ªå‡½æ•°ç»“æŸ'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">second</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒä¸ªå‡½æ•°å¼€å§‹'</span>);
    <span class="hljs-title function_">third</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒä¸ªå‡½æ•°ç»“æŸ'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">third</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸‰ä¸ªå‡½æ•°å¼€å§‹'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸‰ä¸ªå‡½æ•°ç»“æŸ'</span>);
}

<span class="hljs-title function_">first</span>();

<span class="hljs-comment">// æ‰§è¡Œæ ˆçš„å˜åŒ–è¿‡ç¨‹ï¼š</span>
<span class="hljs-comment">// 1. å…¨å±€ä¸Šä¸‹æ–‡å…¥æ ˆ</span>
<span class="hljs-comment">// 2. first()è°ƒç”¨ï¼Œfirstä¸Šä¸‹æ–‡å…¥æ ˆ</span>
<span class="hljs-comment">// 3. second()è°ƒç”¨ï¼Œsecondä¸Šä¸‹æ–‡å…¥æ ˆ  </span>
<span class="hljs-comment">// 4. third()è°ƒç”¨ï¼Œthirdä¸Šä¸‹æ–‡å…¥æ ˆ</span>
<span class="hljs-comment">// 5. third()æ‰§è¡Œå®Œæ¯•ï¼Œå‡ºæ ˆ</span>
<span class="hljs-comment">// 6. second()æ‰§è¡Œå®Œæ¯•ï¼Œå‡ºæ ˆ</span>
<span class="hljs-comment">// 7. first()æ‰§è¡Œå®Œæ¯•ï¼Œå‡ºæ ˆ</span>
</code></pre>
<h3 data-id="heading-6">1.5 æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p>æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡éƒ½ç»å†ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<h4 data-id="heading-7">åˆ›å»ºé˜¶æ®µï¼ˆæ­¤æ—¶å‡½æ•°è¢«è°ƒç”¨ï¼Œä½†æœªæ‰§è¡Œå†…éƒ¨ä»£ç ï¼‰ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-keyword">var</span> c = <span class="hljs-string">"hello"</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">d</span>(<span class="hljs-params"/>) {}
    <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};
}

<span class="hljs-comment">// åœ¨åˆ›å»ºé˜¶æ®µï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ä¼šè¿›è¡Œä»¥ä¸‹å‡†å¤‡å·¥ä½œï¼š</span>
exampleExecutionContext = {
    <span class="hljs-comment">// 1. åˆ›å»ºå˜é‡å¯¹è±¡</span>
    <span class="hljs-attr">variableObject</span>: {
        <span class="hljs-attr">arguments</span>: { <span class="hljs-number">0</span>: a, <span class="hljs-number">1</span>: b, <span class="hljs-attr">length</span>: <span class="hljs-number">2</span> },
        <span class="hljs-attr">a</span>: <span class="hljs-literal">undefined</span>,     <span class="hljs-comment">// å½¢å‚</span>
        <span class="hljs-attr">b</span>: <span class="hljs-literal">undefined</span>,     <span class="hljs-comment">// å½¢å‚</span>
        <span class="hljs-attr">c</span>: <span class="hljs-literal">undefined</span>,     <span class="hljs-comment">// å˜é‡å£°æ˜</span>
        <span class="hljs-attr">d</span>: pointer_to_function_d,  <span class="hljs-comment">// å‡½æ•°å£°æ˜</span>
        <span class="hljs-attr">e</span>: <span class="hljs-literal">undefined</span>      <span class="hljs-comment">// å˜é‡å£°æ˜</span>
    },
    <span class="hljs-comment">// 2. å»ºç«‹ä½œç”¨åŸŸé“¾</span>
    <span class="hljs-attr">scopeChain</span>: [...],
    <span class="hljs-comment">// 3. ç¡®å®šthisæŒ‡å‘</span>
    <span class="hljs-attr">this</span>: <span class="hljs-variable language_">window</span>
}
</code></pre>
<h4 data-id="heading-8">æ‰§è¡Œé˜¶æ®µï¼ˆé€è¡Œæ‰§è¡Œä»£ç ï¼‰ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">a = <span class="hljs-number">1</span>, b = <span class="hljs-number">2</span></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c);  <span class="hljs-comment">// undefinedï¼ˆå˜é‡æå‡ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(d);  <span class="hljs-comment">// function d() {}ï¼ˆå‡½æ•°æå‡ï¼‰</span>
    
    <span class="hljs-keyword">var</span> c = <span class="hljs-string">"hello"</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">d</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆ‘æ˜¯å‡½æ•°d"</span>);
    }
    <span class="hljs-keyword">var</span> e = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆ‘æ˜¯å‡½æ•°è¡¨è¾¾å¼"</span>);
    };
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c);  <span class="hljs-comment">// "hello"</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(d);  <span class="hljs-comment">// function d() {}</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e);  <span class="hljs-comment">// function() { ... }</span>
}

<span class="hljs-title function_">example</span>();
</code></pre>
<p><strong>é‡è¦è§„åˆ™</strong>ï¼š</p>
<ol>
<li>å‡½æ•°å£°æ˜ä¼š<strong>å®Œå…¨æå‡</strong></li>
<li>å˜é‡å£°æ˜ä¼š<strong>éƒ¨åˆ†æå‡</strong>ï¼ˆåªæå‡å£°æ˜ï¼Œä¸æå‡èµ‹å€¼ï¼‰</li>
<li>å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜äºå˜é‡å£°æ˜</li>
</ol>
<h3 data-id="heading-9">1.6 æ ˆæº¢å‡ºé”™è¯¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€’å½’è°ƒç”¨æ²¡æœ‰ç»ˆæ­¢æ¡ä»¶ä¼šå¯¼è‡´æ ˆæº¢å‡º</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">infiniteRecursion</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">infiniteRecursion</span>(); <span class="hljs-comment">// ä¸æ–­åˆ›å»ºæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡</span>
}

<span class="hljs-comment">// è°ƒç”¨ä¼šæŠ›å‡ºï¼šRangeError: Maximum call stack size exceeded</span>
<span class="hljs-comment">// infiniteRecursion();</span>
</code></pre>
<h2 data-id="heading-10">äºŒã€ä½œç”¨åŸŸä¸ä½œç”¨åŸŸé“¾ï¼šå˜é‡çš„å¯è§æ€§è§„åˆ™</h2>
<h3 data-id="heading-11">2.1 é¢è¯•é¢˜ï¼šè°ˆè°ˆä½ å¯¹ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾çš„ç†è§£</h3>
<p>ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾å†³å®šäº†<strong>å˜é‡åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•è¢«è®¿é—®</strong>ï¼Œè¿™æ˜¯JavaScriptçš„åŸºç¡€æ¦‚å¿µã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸï¼Ÿ</strong></p>
<p>ä½œç”¨åŸŸæ˜¯åœ¨è¿è¡Œæ—¶ä»£ç ä¸­æŸäº›ç‰¹å®šéƒ¨åˆ†å˜é‡ã€å‡½æ•°å’Œå¯¹è±¡çš„å¯è®¿é—®æ€§ï¼Œå†³å®šäº†ä»£ç åŒºå—ä¸­å˜é‡å’Œå…¶ä»–èµ„æºçš„å¯è§æ€§ã€‚ES5 ä¸­åªå­˜åœ¨ä¸¤ç§ä½œç”¨åŸŸï¼šå…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼ŒES6 æ–°å¢äº†å—çº§ä½œç”¨åŸŸã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸé“¾ï¼Ÿ</strong></p>
<p>å½“è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼Œç¼–è¯‘å™¨åœ¨æ‰§è¡Œè¿™æ®µä»£ç æ—¶ï¼Œä¼šé¦–å…ˆä»å½“å‰çš„ä½œç”¨åŸŸä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªæ ‡è¯†ç¬¦ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šå»çˆ¶ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œå¦‚æœçˆ¶ä½œç”¨åŸŸè¿˜æ²¡æ‰¾åˆ°ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°å…¨å±€ä½œç”¨åŸŸä¸ºæ­¢ã€‚</p>
<p>è€Œä½œç”¨åŸŸé“¾ï¼Œå°±æ˜¯æœ‰å½“å‰ä½œç”¨åŸŸä¸ä¸Šå±‚ä½œç”¨åŸŸçš„ä¸€ç³»åˆ—å˜é‡å¯¹è±¡ç»„æˆï¼Œå®ƒä¿è¯äº†å½“å‰æ‰§è¡Œçš„ä½œç”¨åŸŸé“¾å¯¹ç¬¦åˆè®¿é—®æƒé™çš„å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚</p>
<p>ä½œç”¨åŸŸé“¾æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹å¾ï¼Œé‚£å°±æ˜¯<strong>ä½œç”¨åŸŸä¸­çš„å€¼æ˜¯åœ¨å‡½æ•°åˆ›å»ºçš„æ—¶å€™ï¼Œå°±å·²ç»è¢«å­˜å‚¨äº†ï¼Œæ˜¯é™æ€çš„ã€‚</strong> æ‰€è°“é™æ€ï¼Œå°±æ˜¯æ˜¯ä½œç”¨åŸŸä¸­çš„å€¼ä¸€æ—¦è¢«ç¡®å®šäº†ï¼Œæ°¸è¿œä¸ä¼šå˜ã€‚å‡½æ•°å¯ä»¥æ°¸è¿œä¸è¢«è°ƒç”¨ï¼Œä½†æ˜¯ä½œç”¨åŸŸä¸­çš„å€¼åœ¨å‡½æ•°åˆ›å»ºçš„æ—¶å€™å°±å·²ç»è¢«å†™å…¥äº†ï¼Œå¹¶ä¸”å­˜å‚¨åœ¨å‡½æ•°ä½œç”¨åŸŸé“¾å¯¹è±¡é‡Œé¢ã€‚</p>
<h3 data-id="heading-12">2.2 ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸï¼Ÿ</h3>
<p>ä½œç”¨åŸŸå®šä¹‰äº†<strong>å˜é‡ã€å‡½æ•°å’Œå¯¹è±¡çš„å¯è®¿é—®æ€§èŒƒå›´</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€ä½œç”¨åŸŸ</span>
<span class="hljs-keyword">var</span> globalVar = <span class="hljs-string">"æˆ‘æ˜¯å…¨å±€å˜é‡"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">outer</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å‡½æ•°ä½œç”¨åŸŸ</span>
    <span class="hljs-keyword">var</span> outerVar = <span class="hljs-string">"æˆ‘æ˜¯å¤–éƒ¨å‡½æ•°å˜é‡"</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸ</span>
        <span class="hljs-keyword">var</span> innerVar = <span class="hljs-string">"æˆ‘æ˜¯å†…éƒ¨å‡½æ•°å˜é‡"</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalVar);    <span class="hljs-comment">// å¯ä»¥è®¿é—®</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(outerVar);     <span class="hljs-comment">// å¯ä»¥è®¿é—®</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(innerVar);     <span class="hljs-comment">// å¯ä»¥è®¿é—®</span>
    }
    
    <span class="hljs-title function_">inner</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalVar);        <span class="hljs-comment">// å¯ä»¥è®¿é—®</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(outerVar);         <span class="hljs-comment">// å¯ä»¥è®¿é—®</span>
    <span class="hljs-comment">// console.log(innerVar);      // é”™è¯¯ï¼æ— æ³•è®¿é—®å†…éƒ¨å˜é‡</span>
}

<span class="hljs-title function_">outer</span>();
</code></pre>
<h3 data-id="heading-13">2.3 ES6çš„å—çº§ä½œç”¨åŸŸ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ES5åªæœ‰å…¨å±€å’Œå‡½æ•°ä½œç”¨åŸŸ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">es5Example</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">var</span> varVariable = <span class="hljs-string">"varå£°æ˜çš„å˜é‡"</span>;
        <span class="hljs-keyword">let</span> letVariable = <span class="hljs-string">"letå£°æ˜çš„å˜é‡"</span>;
        <span class="hljs-keyword">const</span> constVariable = <span class="hljs-string">"constå£°æ˜çš„å˜é‡"</span>;
    }
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(varVariable);    <span class="hljs-comment">// "varå£°æ˜çš„å˜é‡" - å¯ä»¥è®¿é—®</span>
    <span class="hljs-comment">// console.log(letVariable);  // ReferenceError - ä¸èƒ½è®¿é—®</span>
    <span class="hljs-comment">// console.log(constVariable); // ReferenceError - ä¸èƒ½è®¿é—®</span>
}

<span class="hljs-comment">// ES6çš„å—çº§ä½œç”¨åŸŸ</span>
{
    <span class="hljs-keyword">let</span> blockScoped = <span class="hljs-string">"å—çº§ä½œç”¨åŸŸå˜é‡"</span>;
    <span class="hljs-keyword">const</span> constant = <span class="hljs-string">"å¸¸é‡"</span>;
}
<span class="hljs-comment">// console.log(blockScoped); // ReferenceError</span>
<span class="hljs-comment">// console.log(constant);    // ReferenceError</span>
</code></pre>
<h3 data-id="heading-14">2.4 ä½œç”¨åŸŸé“¾</h3>
<p>å½“è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼ŒJavaScriptå¼•æ“ä¼šæ²¿ç€ä½œç”¨åŸŸé“¾ä»å†…åˆ°å¤–æŸ¥æ‰¾ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> <span class="hljs-variable language_">global</span> = <span class="hljs-string">"å…¨å±€"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">outer</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">var</span> outer = <span class="hljs-string">"å¤–å±‚"</span>;
    
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">var</span> inner = <span class="hljs-string">"å†…å±‚"</span>;
        
        <span class="hljs-comment">// æŸ¥æ‰¾é¡ºåºï¼šinner â†’ outer â†’ global</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(inner);   <span class="hljs-comment">// "å†…å±‚" - åœ¨å½“å‰ä½œç”¨åŸŸæ‰¾åˆ°</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(outer);   <span class="hljs-comment">// "å¤–å±‚" - åœ¨çˆ¶ä½œç”¨åŸŸæ‰¾åˆ°</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">global</span>);  <span class="hljs-comment">// "å…¨å±€" - åœ¨å…¨å±€ä½œç”¨åŸŸæ‰¾åˆ°</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(notExist); <span class="hljs-comment">// ReferenceError - æ‰¾ä¸åˆ°</span>
    }
    
    <span class="hljs-title function_">inner</span>();
}

<span class="hljs-title function_">outer</span>();
</code></pre>
<h3 data-id="heading-15">2.5 è‡ªç”±å˜é‡å’Œè¯æ³•ä½œç”¨åŸŸ</h3>
<p><strong>è‡ªç”±å˜é‡</strong>ï¼šåœ¨å½“å‰ä½œç”¨åŸŸæœªå®šä¹‰ï¼Œéœ€è¦å»çˆ¶ä½œç”¨åŸŸæŸ¥æ‰¾çš„å˜é‡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> x = <span class="hljs-number">10</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x); <span class="hljs-comment">// xæ˜¯è‡ªç”±å˜é‡</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">var</span> x = <span class="hljs-number">20</span>;
    <span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// è¾“å‡º10ï¼Œè€Œä¸æ˜¯20ï¼</span>
}

<span class="hljs-title function_">bar</span>();

<span class="hljs-comment">// è¿™æ˜¯å› ä¸ºJavaScripté‡‡ç”¨è¯æ³•ä½œç”¨åŸŸï¼ˆé™æ€ä½œç”¨åŸŸï¼‰</span>
<span class="hljs-comment">// å‡½æ•°çš„ä½œç”¨åŸŸåœ¨å®šä¹‰æ—¶å°±ç¡®å®šäº†ï¼Œè€Œä¸æ˜¯è°ƒç”¨æ—¶</span>
</code></pre>
<h3 data-id="heading-16">2.6 ä½œç”¨åŸŸ vs æ‰§è¡Œä¸Šä¸‹æ–‡</h3>
<p><strong>å…³é”®åŒºåˆ«</strong>ï¼š</p>
<ul>
<li><strong>ä½œç”¨åŸŸ</strong>ï¼šå‡½æ•°<strong>å®šä¹‰æ—¶</strong>ç¡®å®šï¼Œé™æ€ä¸å˜</li>
<li><strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ï¼šå‡½æ•°<strong>è°ƒç”¨æ—¶</strong>åˆ›å»ºï¼ŒåŠ¨æ€å˜åŒ–</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> color = <span class="hljs-string">"blue"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getColor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span>);    <span class="hljs-comment">// æ‰§è¡Œä¸Šä¸‹æ–‡å†³å®šthis</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(color);         <span class="hljs-comment">// ä½œç”¨åŸŸå†³å®šcolorçš„å€¼</span>
}

<span class="hljs-keyword">var</span> obj = {
    <span class="hljs-attr">color</span>: <span class="hljs-string">"red"</span>,
    <span class="hljs-attr">getColor</span>: getColor
};

<span class="hljs-comment">// åŒæ ·çš„å‡½æ•°ï¼Œä¸åŒçš„è°ƒç”¨æ–¹å¼</span>
<span class="hljs-title function_">getColor</span>();        <span class="hljs-comment">// this: window, color: "blue"</span>
obj.<span class="hljs-title function_">getColor</span>();    <span class="hljs-comment">// this: obj, color: "blue"ï¼ˆä½œç”¨åŸŸä¸å˜ï¼ï¼‰</span>
</code></pre>
<h2 data-id="heading-17">ä¸‰ã€thisæŒ‡å‘ï¼šåŠ¨æ€ç»‘å®šçš„ä¸Šä¸‹æ–‡</h2>
<h3 data-id="heading-18">3.1 thisçš„æœ¬è´¨</h3>
<p><code>this</code>å…³é”®å­—æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå…·ä½“æŒ‡å‘å“ªä¸ªå¯¹è±¡å–å†³äº<strong>å‡½æ•°çš„è°ƒç”¨æ–¹å¼</strong>ã€‚</p>
<p>å…³äº this çš„æŒ‡å‘ï¼Œæœ‰ä¸€ç§å¹¿ä¸ºæµä¼ çš„è¯´æ³•å°±æ˜¯â€œè°è°ƒç”¨å®ƒï¼Œthis å°±æŒ‡å‘è°â€ã€‚</p>
<ul>
<li>åœ¨å‡½æ•°ä½“ä¸­ï¼Œéæ˜¾ç¤ºæˆ–éšå¼åœ°ç®€å•è°ƒç”¨å‡½æ•°æ—¶ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°å†…çš„ this ä¼šè¢«ç»‘å®šåˆ° undefined ä¸Šï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹åˆ™ä¼šè¢«ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ window/global ä¸Šã€‚</li>
<li>ä¸€èˆ¬ä½¿ç”¨ new æ–¹æ³•è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œæ„é€ å‡½æ•°å†…çš„ this ä¼šè¢«ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ä¸Šã€‚</li>
<li>ä¸€èˆ¬é€šè¿‡ call/apply/bind æ–¹æ³•æ˜¾ç¤ºè°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°ä½“å†…çš„ this ä¼šè¢«ç»‘å®šåˆ°æŒ‡å®šå‚æ•°çš„å¯¹è±¡ä¸Šã€‚</li>
<li>ä¸€èˆ¬é€šè¿‡ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°ä½“å†…çš„ this ä¼šè¢«ç»‘å®šåˆ°è¯¥å¯¹è±¡ä¸Šã€‚</li>
<li>åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œthis çš„æŒ‡å‘æ˜¯ç”±å¤–å±‚ï¼ˆå‡½æ•°æˆ–å…¨å±€ï¼‰ä½œç”¨åŸŸæ¥å†³å®šçš„ã€‚</li>
</ul>
<h3 data-id="heading-19">3.2 thisçš„ç»‘å®šè§„åˆ™</h3>
<h4 data-id="heading-20">1. é»˜è®¤ç»‘å®šï¼ˆæ™®é€šå‡½æ•°è°ƒç”¨ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éä¸¥æ ¼æ¨¡å¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">showThis</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
}

<span class="hljs-title function_">showThis</span>(); <span class="hljs-comment">// æµè§ˆå™¨ä¸­è¾“å‡ºï¼šWindowå¯¹è±¡</span>

<span class="hljs-comment">// ä¸¥æ ¼æ¨¡å¼</span>
<span class="hljs-meta">"use strict"</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">strictShowThis</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
}

<span class="hljs-title function_">strictShowThis</span>(); <span class="hljs-comment">// undefined</span>
</code></pre>
<h4 data-id="heading-21">2. éšå¼ç»‘å®šï¼ˆæ–¹æ³•è°ƒç”¨ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> obj = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
    <span class="hljs-attr">sayName</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
    }
};

obj.<span class="hljs-title function_">sayName</span>(); <span class="hljs-comment">// "å¼ ä¸‰" - thisæŒ‡å‘obj</span>

<span class="hljs-comment">// éšå¼ä¸¢å¤±çš„å¸¸è§æƒ…å†µ</span>
<span class="hljs-keyword">var</span> sayName = obj.<span class="hljs-property">sayName</span>;
<span class="hljs-title function_">sayName</span>(); <span class="hljs-comment">// "" æˆ– undefined - thisæŒ‡å‘å…¨å±€</span>

<span class="hljs-comment">// å›è°ƒå‡½æ•°ä¸­çš„éšå¼ä¸¢å¤±</span>
<span class="hljs-built_in">setTimeout</span>(obj.<span class="hljs-property">sayName</span>, <span class="hljs-number">100</span>); <span class="hljs-comment">// thisæŒ‡å‘å…¨å±€</span>
</code></pre>
<h4 data-id="heading-22">3. æ˜¾å¼ç»‘å®šï¼ˆcall/apply/bindï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">introduce</span>(<span class="hljs-params">lang, year</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æˆ‘å«<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>ï¼Œæ“…é•¿<span class="hljs-subst">${lang}</span>ï¼Œ<span class="hljs-subst">${year}</span>å¹´å¼€å§‹ç¼–ç¨‹`</span>);
}

<span class="hljs-keyword">var</span> person1 = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span> };
<span class="hljs-keyword">var</span> person2 = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Bob"</span> };

<span class="hljs-comment">// call - ç«‹å³è°ƒç”¨ï¼Œå‚æ•°é€ä¸ªä¼ é€’</span>
introduce.<span class="hljs-title function_">call</span>(person1, <span class="hljs-string">"JavaScript"</span>, <span class="hljs-number">2015</span>);
<span class="hljs-comment">// è¾“å‡ºï¼šæˆ‘å«Aliceï¼Œæ“…é•¿JavaScriptï¼Œ2015å¹´å¼€å§‹ç¼–ç¨‹</span>

<span class="hljs-comment">// apply - ç«‹å³è°ƒç”¨ï¼Œå‚æ•°æ•°ç»„ä¼ é€’</span>
introduce.<span class="hljs-title function_">apply</span>(person2, [<span class="hljs-string">"Python"</span>, <span class="hljs-number">2018</span>]);
<span class="hljs-comment">// è¾“å‡ºï¼šæˆ‘å«Bobï¼Œæ“…é•¿Pythonï¼Œ2018å¹´å¼€å§‹ç¼–ç¨‹</span>

<span class="hljs-comment">// bind - åˆ›å»ºæ–°å‡½æ•°ï¼Œä¸ç«‹å³è°ƒç”¨</span>
<span class="hljs-keyword">var</span> boundIntroduce = introduce.<span class="hljs-title function_">bind</span>(person1, <span class="hljs-string">"Java"</span>);
<span class="hljs-title function_">boundIntroduce</span>(<span class="hljs-number">2020</span>);
<span class="hljs-comment">// è¾“å‡ºï¼šæˆ‘å«Aliceï¼Œæ“…é•¿Javaï¼Œ2020å¹´å¼€å§‹ç¼–ç¨‹</span>
</code></pre>
<h4 data-id="heading-23">4. newç»‘å®šï¼ˆæ„é€ å‡½æ•°è°ƒç”¨ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-comment">// newè°ƒç”¨æ—¶ï¼ŒthisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sayHello</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
    };
}

<span class="hljs-keyword">var</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">25</span>);
p1.<span class="hljs-title function_">sayHello</span>(); <span class="hljs-comment">// "ä½ å¥½ï¼Œæˆ‘æ˜¯å¼ ä¸‰"</span>
</code></pre>
<h4 data-id="heading-24">5. ç®­å¤´å‡½æ•°çš„this</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> obj = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"å¯¹è±¡"</span>,
    <span class="hljs-attr">regularFunc</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ™®é€šå‡½æ•°this:"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
        
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"setTimeoutæ™®é€šå‡½æ•°this:"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
        }, <span class="hljs-number">100</span>);
        
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"setTimeoutç®­å¤´å‡½æ•°this:"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
        }, <span class="hljs-number">200</span>);
    },
    <span class="hljs-attr">arrowFunc</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç®­å¤´å‡½æ•°this:"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
    }
};

obj.<span class="hljs-title function_">regularFunc</span>();
<span class="hljs-comment">// æ™®é€šå‡½æ•°this: å¯¹è±¡</span>
<span class="hljs-comment">// setTimeoutæ™®é€šå‡½æ•°this: ï¼ˆå…¨å±€çš„nameï¼Œé€šå¸¸æ˜¯ç©ºï¼‰</span>
<span class="hljs-comment">// setTimeoutç®­å¤´å‡½æ•°this: å¯¹è±¡</span>

obj.<span class="hljs-title function_">arrowFunc</span>();
<span class="hljs-comment">// ç®­å¤´å‡½æ•°this: ï¼ˆå…¨å±€çš„nameï¼‰</span>
</code></pre>
<h3 data-id="heading-25">3.3 thisç»‘å®šçš„ä¼˜å…ˆçº§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼˜å…ˆçº§æµ‹è¯•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>);
}

<span class="hljs-keyword">var</span> obj1 = { <span class="hljs-attr">value</span>: <span class="hljs-string">"obj1"</span>, <span class="hljs-attr">test</span>: test };
<span class="hljs-keyword">var</span> obj2 = { <span class="hljs-attr">value</span>: <span class="hljs-string">"obj2"</span>, <span class="hljs-attr">test</span>: test };

<span class="hljs-comment">// 1. é»˜è®¤ç»‘å®šï¼ˆä¼˜å…ˆçº§æœ€ä½ï¼‰</span>
<span class="hljs-title function_">test</span>(); <span class="hljs-comment">// undefined æˆ– å…¨å±€çš„value</span>

<span class="hljs-comment">// 2. éšå¼ç»‘å®š</span>
obj1.<span class="hljs-title function_">test</span>(); <span class="hljs-comment">// "obj1"</span>

<span class="hljs-comment">// 3. æ˜¾å¼ç»‘å®š &gt; éšå¼ç»‘å®š</span>
obj1.<span class="hljs-property">test</span>.<span class="hljs-title function_">call</span>(obj2); <span class="hljs-comment">// "obj2"</span>

<span class="hljs-comment">// 4. newç»‘å®š &gt; æ˜¾å¼ç»‘å®š</span>
<span class="hljs-keyword">var</span> boundTest = test.<span class="hljs-title function_">bind</span>(obj1);
<span class="hljs-keyword">var</span> newObj = <span class="hljs-keyword">new</span> <span class="hljs-title function_">boundTest</span>(); <span class="hljs-comment">// undefinedï¼ˆnewç»‘å®šè¦†ç›–äº†bindç»‘å®šï¼‰</span>
</code></pre>
<h3 data-id="heading-26">3.4 å¸¸è§åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-27">DOMäº‹ä»¶å¤„ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// HTML: &lt;button id="btn"&gt;ç‚¹å‡»æˆ‘&lt;/button&gt;</span>

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// æŒ‡å‘è¢«ç‚¹å‡»çš„buttonå…ƒç´ </span>
});

<span class="hljs-comment">// ç®­å¤´å‡½æ•°ä¼šæ”¹å˜thisæŒ‡å‘</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// æŒ‡å‘å®šä¹‰æ—¶çš„ä¸Šä¸‹æ–‡ï¼Œé€šå¸¸æ˜¯window</span>
});
</code></pre>
<h4 data-id="heading-28">ç±»ä¸­çš„this</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">0</span>;
        <span class="hljs-comment">// éœ€è¦ç»‘å®šthisï¼Œå¦åˆ™ä½œä¸ºå›è°ƒæ—¶ä¼šä¸¢å¤±</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">increment</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">increment</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    }
    
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>);
    }
    
    <span class="hljs-comment">// ä½¿ç”¨ç®­å¤´å‡½æ•°è‡ªåŠ¨ç»‘å®š</span>
    decrement = <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>--;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>);
    }
}

<span class="hljs-keyword">const</span> counter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Counter</span>();
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'inc'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, counter.<span class="hljs-property">increment</span>);
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'dec'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, counter.<span class="hljs-property">decrement</span>);
</code></pre>
<h3 data-id="heading-29">3.5 callã€applyã€bindçš„ç»å…¸åº”ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å€Ÿç”¨æ•°ç»„æ–¹æ³•å¤„ç†ç±»æ•°ç»„å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// argumentsæ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œæ²¡æœ‰æ•°ç»„æ–¹æ³•</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">reduce</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">total, current</span>) {
        <span class="hljs-keyword">return</span> total + current;
    }, <span class="hljs-number">0</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)); <span class="hljs-comment">// 15</span>

<span class="hljs-comment">// 2. è·å–æ•°ç»„æœ€å¤§/æœ€å°å€¼</span>
<span class="hljs-keyword">var</span> numbers = [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>];
<span class="hljs-keyword">var</span> max = <span class="hljs-title class_">Math</span>.<span class="hljs-property">max</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, numbers); <span class="hljs-comment">// 7</span>
<span class="hljs-keyword">var</span> min = <span class="hljs-title class_">Math</span>.<span class="hljs-property">min</span>.<span class="hljs-title function_">call</span>(<span class="hljs-literal">null</span>, ...numbers); <span class="hljs-comment">// 2ï¼ˆä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼‰</span>

<span class="hljs-comment">// 3. ç»§æ‰¿å’Œæ„é€ å‡½æ•°é“¾å¼è°ƒç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params">name, breed</span>) {
    <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
}

<span class="hljs-keyword">var</span> myDog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">"æ—ºè´¢"</span>, <span class="hljs-string">"é‡‘æ¯›"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myDog.<span class="hljs-property">name</span>); <span class="hljs-comment">// "æ—ºè´¢"</span>

<span class="hljs-comment">// 4. å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b, c</span>) {
    <span class="hljs-keyword">return</span> a * b * c;
}

<span class="hljs-keyword">var</span> double = multiply.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// å›ºå®šç¬¬ä¸€ä¸ªå‚æ•°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">double</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)); <span class="hljs-comment">// 24 (2 * 3 * 4)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">double</span>(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>)); <span class="hljs-comment">// 60 (2 * 5 * 6)</span>
</code></pre>
<h2 data-id="heading-30">å››ã€ç»¼åˆæ¡ˆä¾‹åˆ†æ</h2>
<h3 data-id="heading-31">4.1 ç»å…¸é¢è¯•é¢˜è§£æ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> length = <span class="hljs-number">10</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>);
}

<span class="hljs-keyword">var</span> obj = {
    <span class="hljs-attr">length</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) {
        <span class="hljs-title function_">fn</span>();                    <span class="hljs-comment">// 1. ç›´æ¥è°ƒç”¨ï¼ŒthisæŒ‡å‘å…¨å±€</span>
        <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>]();          <span class="hljs-comment">// 2. é€šè¿‡argumentsè°ƒç”¨</span>
        fn.<span class="hljs-title function_">call</span>(obj);            <span class="hljs-comment">// 3. æ˜¾å¼ç»‘å®šåˆ°obj</span>
    }
};

obj.<span class="hljs-title function_">method</span>(fn, <span class="hljs-number">1</span>);
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// 10 ï¼ˆå…¨å±€lengthï¼‰</span>
<span class="hljs-comment">// 2  ï¼ˆarguments.lengthï¼‰</span>
<span class="hljs-comment">// 5  ï¼ˆobj.lengthï¼‰</span>
</code></pre>
<h3 data-id="heading-32">4.2 å¤æ‚åœºæ™¯åˆ†æ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> name = <span class="hljs-string">"å…¨å±€"</span>;
<span class="hljs-keyword">var</span> person = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
    <span class="hljs-attr">sayName</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¤–å±‚this:"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å†…å±‚this:"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
        };
    },
    <span class="hljs-attr">sayNameArrow</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¤–å±‚this:"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
        
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å†…å±‚ç®­å¤´å‡½æ•°this:"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
        };
    }
};

<span class="hljs-comment">// æƒ…å†µ1ï¼šæ™®é€šå‡½æ•°åµŒå¥—</span>
<span class="hljs-keyword">var</span> func1 = person.<span class="hljs-title function_">sayName</span>();
<span class="hljs-title function_">func1</span>(); 
<span class="hljs-comment">// å¤–å±‚this: å¼ ä¸‰</span>
<span class="hljs-comment">// å†…å±‚this: å…¨å±€</span>

<span class="hljs-comment">// æƒ…å†µ2ï¼šç®­å¤´å‡½æ•°è§£å†³</span>
<span class="hljs-keyword">var</span> func2 = person.<span class="hljs-title function_">sayNameArrow</span>();
<span class="hljs-title function_">func2</span>();
<span class="hljs-comment">// å¤–å±‚this: å¼ ä¸‰</span>
<span class="hljs-comment">// å†…å±‚ç®­å¤´å‡½æ•°this: å¼ ä¸‰</span>

<span class="hljs-comment">// æƒ…å†µ3ï¼šä½¿ç”¨bindç»‘å®š</span>
<span class="hljs-keyword">var</span> func3 = person.<span class="hljs-title function_">sayName</span>().<span class="hljs-title function_">bind</span>(person);
<span class="hljs-title function_">func3</span>();
<span class="hljs-comment">// å¤–å±‚this: å¼ ä¸‰</span>
<span class="hljs-comment">// å†…å±‚this: å¼ ä¸‰</span>
</code></pre>
<h3 data-id="heading-33">4.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<ol>
<li><strong>é¿å…è¿‡åº¦åµŒå¥—</strong>ï¼šæ·±åº¦åµŒå¥—çš„ä½œç”¨åŸŸé“¾ä¼šå¢åŠ å˜é‡æŸ¥æ‰¾æ—¶é—´</li>
<li><strong>åˆç†ä½¿ç”¨é—­åŒ…</strong>ï¼šä¸å¿…è¦çš„é—­åŒ…ä¼šå»¶é•¿å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>æ³¨æ„å†…å­˜æ³„æ¼</strong>ï¼šæ„å¤–çš„å…¨å±€å˜é‡å’Œæœªæ¸…é™¤çš„å¼•ç”¨ä¼šå¯¼è‡´å†…å­˜æ³„æ¼</li>
<li><strong>é€‚å½“ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼</strong>ï¼šé¿å…æ„å¤–çš„å…¨å±€ç»‘å®šå’Œä¸å¯é¢„æµ‹çš„this</li>
</ol>
<h2 data-id="heading-34">äº”ã€æ€»ç»“</h2>
<h3 data-id="heading-35">5.1 æ ¸å¿ƒæ¦‚å¿µå›é¡¾</h3>
<ol>
<li><strong>æ‰§è¡Œæ ˆ</strong>ï¼šç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡çš„åè¿›å…ˆå‡ºæ•°æ®ç»“æ„</li>
<li><strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ï¼šä»£ç æ‰§è¡Œçš„ç¯å¢ƒï¼ŒåŒ…å«å˜é‡å¯¹è±¡ã€ä½œç”¨åŸŸé“¾å’Œthis</li>
<li><strong>ä½œç”¨åŸŸ</strong>ï¼šå˜é‡å’Œå‡½æ•°çš„å¯è®¿é—®èŒƒå›´ï¼Œåœ¨å®šä¹‰æ—¶ç¡®å®š</li>
<li><strong>ä½œç”¨åŸŸé“¾</strong>ï¼šä»å½“å‰ä½œç”¨åŸŸåˆ°å…¨å±€ä½œç”¨åŸŸçš„é“¾å¼ç»“æ„</li>
<li><strong>thisæŒ‡å‘</strong>ï¼šç”±è°ƒç”¨æ–¹å¼å†³å®šï¼Œéµå¾ªç‰¹å®šçš„ç»‘å®šè§„åˆ™</li>
</ol>
<h3 data-id="heading-36">5.2 è®°å¿†å£è¯€</h3>
<ul>
<li><strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ï¼šè°ƒç”¨å‡½æ•°æ‰åˆ›å»ºï¼Œå…¥æ ˆå‡ºæ ˆç®¡æµç¨‹</li>
<li><strong>ä½œç”¨åŸŸé“¾</strong>ï¼šå†…å±‚å¯è®¿å¤–å±‚ï¼Œå®šä¹‰ä½ç½®å°±å†³å®š</li>
<li><strong>thisæŒ‡å‘</strong>ï¼šè°è°ƒç”¨å°±æŒ‡è°ï¼Œç®­å¤´å‡½æ•°çœ‹å¤–å±‚</li>
<li><strong>ç»‘å®šä¼˜å…ˆçº§</strong>ï¼šnew &gt; æ˜¾å¼ &gt; éšå¼ &gt; é»˜è®¤</li>
</ul>
<h3 data-id="heading-37">5.3 å®æˆ˜å»ºè®®</h3>
<ol>
<li>ä½¿ç”¨<code>const</code>å’Œ<code>let</code>æ›¿ä»£<code>var</code>ï¼Œåˆ©ç”¨å—çº§ä½œç”¨åŸŸ</li>
<li>åœ¨å›è°ƒå‡½æ•°ä¸­æ³¨æ„thisç»‘å®šï¼Œä½¿ç”¨ç®­å¤´å‡½æ•°æˆ–bind</li>
<li>ç†è§£é—­åŒ…åŸç†ï¼Œé¿å…ä¸å¿…è¦çš„å†…å­˜å ç”¨</li>
<li>æŒæ¡call/apply/bindçš„é€‚ç”¨åœºæ™¯ï¼Œçµæ´»æ”¹å˜thisæŒ‡å‘</li>
</ol>
<p>é€šè¿‡æ·±å…¥ç†è§£è¿™ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œä½ å°†èƒ½å¤Ÿï¼š</p>
<ul>
<li>å‡†ç¡®é¢„æµ‹ä»£ç çš„æ‰§è¡Œç»“æœ</li>
<li>é¿å…å¸¸è§çš„thisç»‘å®šé”™è¯¯</li>
<li>ç¼–å†™æ›´é«˜æ•ˆã€å¯ç»´æŠ¤çš„JavaScriptä»£ç </li>
<li>åœ¨é¢è¯•ä¸­ä»å®¹åº”å¯¹ç›¸å…³æŠ€æœ¯é—®é¢˜</li>
</ul>
<p>JavaScriptçš„è¿è¡Œæœºåˆ¶è™½ç„¶å¤æ‚ï¼Œä½†åªè¦æŒæ¡äº†è¿™äº›æ ¸å¿ƒæ¦‚å¿µï¼Œä½ å°±èƒ½ä»"çŸ¥å…¶ç„¶"è¿›é˜¶åˆ°"çŸ¥å…¶æ‰€ä»¥ç„¶"ï¼ŒçœŸæ­£é©¾é©­è¿™é—¨çµæ´»è€Œå¼ºå¤§çš„è¯­è¨€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€URPã€‘Unity[å†…ç½®Shader]ç²’å­ç®€å•å…‰ç…§ParticlesSimpleLit]]></title>    <link>https://juejin.cn/post/7579544295344177203</link>    <guid>https://juejin.cn/post/7579544295344177203</guid>    <pubDate>2025-12-04T01:54:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579544295344177203" data-draft-id="7579673620940374066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€URPã€‘Unity[å†…ç½®Shader]ç²’å­ç®€å•å…‰ç…§ParticlesSimpleLit"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,Unity3D,å›¾å½¢å­¦"/> <meta itemprop="datePublished" content="2025-12-04T01:54:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€URPã€‘Unity[å†…ç½®Shader]ç²’å­ç®€å•å…‰ç…§ParticlesSimpleLit
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T01:54:31.000Z" title="Thu Dec 04 2025 01:54:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13021255.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13021255%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13021255&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<h2 data-id="heading-0"><strong>ä½œç”¨ä¸åŸç†</strong></h2>
<p>ParticlesSimpleLitæ˜¯Unity URP(Universal Render Pipeline)ä¸­ä¸“é—¨ä¸ºç²’å­ç³»ç»Ÿè®¾è®¡çš„ç®€åŒ–å…‰ç…§ç€è‰²å™¨ï¼Œä¸»è¦ç”¨äºå®ç°é«˜æ€§èƒ½çš„ç²’å­æ¸²æŸ“æ•ˆæœã€‚å…¶æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡ç®€åŒ–å…‰ç…§è®¡ç®—æ¨¡å‹ï¼Œç‰ºç‰²éƒ¨åˆ†ç‰©ç†å‡†ç¡®æ€§æ¥æ¢å–æ›´é«˜çš„æ¸²æŸ“æ•ˆç‡ï¼Œç‰¹åˆ«é€‚åˆç§»åŠ¨ç«¯æˆ–ä½ç«¯è®¾å¤‡ä½¿ç”¨ã€‚</p>
<p>è¯¥ç€è‰²å™¨ä¸è®¡ç®—ç‰©ç†æ­£ç¡®æ€§å’Œèƒ½é‡å®ˆæ’ï¼Œè€Œæ˜¯é‡‡ç”¨ä¸€ä¸ªç®€å•çš„è¿‘ä¼¼ç…§æ˜æ¨¡å‹ï¼Œè¿™ä½¿å¾—å®ƒåœ¨æ¸²æŸ“æ—¶å¯ä»¥å¿½ç•¥å¤æ‚çš„ç‰©ç†è®¡ç®—ã€‚ParticlesSimpleLitä¸»è¦åŒ…å«ä¸‰ä¸ªå…³é”®éƒ¨åˆ†ï¼š</p>
<ul>
<li>Surface Optionsï¼šæ§åˆ¶æè´¨çš„åŸºæœ¬æ¸²æŸ“æ–¹å¼ï¼Œå¦‚é¢œè‰²å’Œå…‰ç…§æ¨¡å¼</li>
<li>Surface Inputsï¼šæè¿°è¡¨é¢ç‰¹æ€§ï¼Œå¦‚æ¹¿åº¦ã€ç²—ç³™åº¦ç­‰</li>
<li>Advancedé€‰é¡¹ï¼šæä¾›æ›´åº•å±‚çš„æ¸²æŸ“è®¾ç½®å¦‚é˜´å½±å’Œåå°„</li>
</ul>
<h2 data-id="heading-1"><strong>å‘å±•å†å²</strong></h2>
<p>ParticlesSimpleLitéšç€URPçš„å‘å±•ç»å†äº†å¤šä¸ªç‰ˆæœ¬è¿­ä»£ï¼š</p>
<ul>
<li>æœ€åˆä½œä¸ºURPæ ¸å¿ƒç€è‰²å™¨ä¹‹ä¸€å¼•å…¥ï¼Œæ›¿ä»£äº†ä¼ ç»ŸBuilt-inæ¸²æŸ“ç®¡çº¿ä¸­çš„ç®€å•ç²’å­ç€è‰²å™¨</li>
<li>åœ¨URP 7.xç‰ˆæœ¬ä¸­è¿›è¡Œäº†æ€§èƒ½ä¼˜åŒ–ï¼Œç‰¹åˆ«é’ˆå¯¹ç§»åŠ¨å¹³å°</li>
<li>URP 12.0ç‰ˆæœ¬åå¢åŠ äº†å¯¹Shader Graphçš„æ”¯æŒ</li>
<li>æœ€æ–°ç‰ˆæœ¬(å¦‚URP 16.0.6)è¿›ä¸€æ­¥ä¼˜åŒ–äº†å˜ä½“ç®¡ç†å’ŒGPUå®ä¾‹åŒ–æ”¯æŒ</li>
</ul>
<h2 data-id="heading-2"><strong>å…·ä½“ä½¿ç”¨æ–¹æ³•</strong></h2>
<h3 data-id="heading-3"><strong>åŸºæœ¬åº”ç”¨ç¤ºä¾‹</strong></h3>
<p>åœ¨Unityä¸­ä½¿ç”¨ParticlesSimpleLitçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆ›å»ºæˆ–é€‰æ‹©ç²’å­ç³»ç»Ÿ</li>
<li>åœ¨ç²’å­ç³»ç»Ÿçš„Rendereræ¨¡å—ä¸­æŒ‡å®šæè´¨</li>
<li>åˆ›å»ºæ–°æè´¨æˆ–é€‰æ‹©ç°æœ‰æè´¨</li>
<li>åœ¨æè´¨Inspectorçª—å£çš„Shaderä¸‹æ‹‰èœå•ä¸­é€‰æ‹©"Universal Render Pipeline &gt; Particles &gt; Simple Lit"</li>
</ul>
<p>ä»£ç è¯´æ˜ï¼šè¿™ä¸ªC#è„šæœ¬ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•é€šè¿‡ä»£ç åŠ¨æ€ä¸ºç²’å­ç³»ç»Ÿåº”ç”¨ParticlesSimpleLitç€è‰²å™¨ã€‚</p>
<ul>
<li>
<p>ParticleSimpleLitExample.cs</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨ä»£ç ä¸­åŠ¨æ€è®¾ç½®æè´¨Shaderçš„ç¤ºä¾‹</span>
<span class="hljs-keyword">using</span> UnityEngine;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ParticleShaderSetter</span> : <span class="hljs-title">MonoBehaviour</span>
{
    <span class="hljs-keyword">public</span> ParticleSystem particleSystem;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>()</span>
    {
        <span class="hljs-keyword">var</span> renderer = particleSystem.GetComponent&lt;ParticleSystemRenderer&gt;();
        Material mat = <span class="hljs-keyword">new</span> Material(Shader.Find(<span class="hljs-string">"Universal Render Pipeline/Particles/Simple Lit"</span>));
        renderer.material = mat;
    }
}
<span class="hljs-comment">// ä»¥ä¸‹æ˜¯Shader Graphçš„èŠ‚ç‚¹è®¾ç½®å‚è€ƒï¼š</span>
<span class="hljs-comment">/*
1. æ·»åŠ Texture2DèŠ‚ç‚¹ä½œä¸ºBase Mapè¾“å…¥
2. æ·»åŠ ColorèŠ‚ç‚¹ä½œä¸ºBase Colorè¾“å…¥
3. æ·»åŠ SliderèŠ‚ç‚¹æ§åˆ¶Specular(0-1èŒƒå›´)
4. æ·»åŠ SliderèŠ‚ç‚¹æ§åˆ¶Smoothness(0-1èŒƒå›´)
5. è¿æ¥è¿™äº›èŠ‚ç‚¹åˆ°PBR Masterçš„å¯¹åº”è¾“å…¥
6. åœ¨PBR MasterèŠ‚ç‚¹ä¸­ç¦ç”¨é«˜çº§å…‰ç…§è®¡ç®—
*/</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-4"><strong>å‚æ•°é…ç½®</strong></h3>
<p>ParticlesSimpleLitæä¾›äº†å¤šä¸ªå¯è°ƒå‚æ•°ï¼š</p>
<ul>
<li>â€Œ<strong>Base Map</strong>â€Œï¼šåŸºç¡€çº¹ç†ï¼Œå®šä¹‰ç²’å­å¤–è§‚</li>
<li>â€Œ<strong>Base Color</strong>â€Œï¼šåŸºç¡€é¢œè‰²ï¼Œä¸çº¹ç†ç›¸ä¹˜</li>
<li>â€Œ<strong>Specular</strong>â€Œï¼šæ§åˆ¶é«˜å…‰å¼ºåº¦</li>
<li>â€Œ<strong>Smoothness</strong>â€Œï¼šæ§åˆ¶è¡¨é¢å…‰æ»‘åº¦</li>
<li>â€Œ<strong>Emission</strong>â€Œï¼šæ§åˆ¶è‡ªå‘å…‰å¼ºåº¦å’Œé¢œè‰²</li>
</ul>
<h2 data-id="heading-5"><strong>Shader Graphä¸­çš„åº”ç”¨</strong></h2>
<p>åœ¨Shader Graphä¸­ä½¿ç”¨ParticlesSimpleLitéœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>åˆ›å»ºæ–°çš„Shader Graph</li>
<li>åœ¨Graph Inspectorä¸­å°†"Target"è®¾ç½®ä¸º"Universal Render Pipeline"</li>
<li>ä½¿ç”¨"PBR Master"èŠ‚ç‚¹å¹¶è°ƒæ•´è®¾ç½®ä»¥åŒ¹é…SimpleLitç‰¹æ€§</li>
<li>æ·»åŠ å¿…è¦çš„çº¹ç†å’Œå‚æ•°è¾“å…¥</li>
</ul>
<p>ä»£ç è¯´æ˜ï¼šè¿™ä¸ªä¼ªä»£ç æè¿°äº†åœ¨Shader Graphä¸­é‡å»ºParticlesSimpleLitåŸºæœ¬åŠŸèƒ½æ‰€éœ€çš„èŠ‚ç‚¹é…ç½®ã€‚</p>
<ul>
<li>
<p>ParticleSimpleLitExample.cs</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åœ¨ä»£ç ä¸­åŠ¨æ€è®¾ç½®æè´¨Shaderçš„ç¤ºä¾‹</span>
<span class="hljs-keyword">using</span> UnityEngine;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ParticleShaderSetter</span> : <span class="hljs-title">MonoBehaviour</span>
{
    <span class="hljs-keyword">public</span> ParticleSystem particleSystem;

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>()</span>
    {
        <span class="hljs-keyword">var</span> renderer = particleSystem.GetComponent&lt;ParticleSystemRenderer&gt;();
        Material mat = <span class="hljs-keyword">new</span> Material(Shader.Find(<span class="hljs-string">"Universal Render Pipeline/Particles/Simple Lit"</span>));
        renderer.material = mat;
    }
}

<span class="hljs-comment">// ä»¥ä¸‹æ˜¯Shader Graphçš„èŠ‚ç‚¹è®¾ç½®å‚è€ƒï¼š</span>
<span class="hljs-comment">/*
1. æ·»åŠ Texture2DèŠ‚ç‚¹ä½œä¸ºBase Mapè¾“å…¥
2. æ·»åŠ ColorèŠ‚ç‚¹ä½œä¸ºBase Colorè¾“å…¥
3. æ·»åŠ SliderèŠ‚ç‚¹æ§åˆ¶Specular(0-1èŒƒå›´)
4. æ·»åŠ SliderèŠ‚ç‚¹æ§åˆ¶Smoothness(0-1èŒƒå›´)
5. è¿æ¥è¿™äº›èŠ‚ç‚¹åˆ°PBR Masterçš„å¯¹åº”è¾“å…¥
6. åœ¨PBR MasterèŠ‚ç‚¹ä¸­ç¦ç”¨é«˜çº§å…‰ç…§è®¡ç®—
*/</span>
</code></pre>
</li>
</ul>
<h2 data-id="heading-6"><strong>é«˜çº§åº”ç”¨ç¤ºä¾‹</strong></h2>
<p>ç»“åˆç²’å­ç³»ç»Ÿçš„å…¶ä»–æ¨¡å—ï¼Œå¦‚Lightsæ¨¡å—å’ŒTrailsæ¨¡å—ï¼Œå¯ä»¥åˆ›å»ºæ›´å¤æ‚çš„æ•ˆæœã€‚ä¾‹å¦‚åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ‹–å°¾æ•ˆæœçš„ç«ç„°ç²’å­ï¼š</p>
<ul>
<li>å¯ç”¨ç²’å­ç³»ç»Ÿçš„Trailsæ¨¡å—</li>
<li>ä½¿ç”¨ParticlesSimpleLitæè´¨å¹¶è®¾ç½®é€‚å½“çš„Emissionå€¼</li>
<li>è°ƒæ•´Base Colorä¸ºæ©™é»„è‰²æ¸å˜</li>
<li>æ ¹æ®éœ€è¦å¯ç”¨Lightsæ¨¡å—ä¸ºéƒ¨åˆ†ç²’å­æ·»åŠ ç‚¹å…‰æºæ•ˆæœ</li>
</ul>
<p>ParticlesSimpleLitå› å…¶é«˜æ•ˆçš„æ€§èƒ½è¡¨ç°ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦å¤§é‡ç²’å­çš„åœºæ™¯ï¼Œå¦‚é­”æ³•æ•ˆæœã€çƒŸé›¾ã€ç«ç„°ç­‰è§†è§‰æ•ˆæœ</p>
<h3 data-id="heading-7"><strong>ç«ç„°ä¸çƒŸé›¾æ•ˆæœ</strong></h3>
<p>é€šè¿‡è°ƒæ•´Surface Typeä¸ºTransparentå¹¶é€‰æ‹©Additiveæ··åˆæ¨¡å¼ï¼Œé…åˆå™ªå£°çº¹ç†å®ç°åŠ¨æ€ç«ç„°å½¢æ€ã€‚å…³é”®å‚æ•°åŒ…æ‹¬_Emissionæ§åˆ¶å‘å…‰å¼ºåº¦ã€_MainTexè®¾ç½®ç«ç„°è´´å›¾åºåˆ—å¸§ï¼ŒåŒæ—¶éœ€å¯ç”¨Color over Lifetimeæ¨¡å—å®ç°é¢œè‰²æ¸å˜ã€‚å…·ä½“å®ç°æ­¥éª¤ï¼š</p>
<ul>
<li>åˆ›å»ºParticle Systemï¼Œæè´¨é€‰æ‹©Universal Render Pipeline &gt; Particles &gt; Simple Lit</li>
<li>åœ¨Surface Optionsä¸­è®¾ç½®Blending Modeä¸ºAdditive</li>
<li>é€šè¿‡è„šæœ¬æ§åˆ¶_Emissionå¼ºåº¦æ¨¡æ‹Ÿç‡ƒçƒ§æ³¢åŠ¨</li>
</ul>
<h3 data-id="heading-8"><strong>é›¨é›ªå¤©æ°”æ•ˆæœ</strong></h3>
<p>é‡‡ç”¨Opaqueè¡¨é¢ç±»å‹æå‡æ€§èƒ½ï¼Œç»“åˆGPUå®ä¾‹åŒ–å®ç°å¤§é¢ç§¯ç²’å­æ¸²æŸ“ã€‚éœ€é…ç½®_MainTexä¸ºé›¨æ»´/é›ªèŠ±è´´å›¾ï¼Œä½¿ç”¨_SoftParticlesNearFadeæ§åˆ¶ç²’å­æ·¡å…¥è·ç¦»ï¼Œå¹¶é€šè¿‡Rotation over Lifetimeæ¨¡å—æ·»åŠ éšæœºæ—‹è½¬ã€‚å…¸å‹å‚æ•°ï¼š</p>
<ul>
<li>_MainTex: é›¨æ»´Alphaè´´å›¾
_SoftParticlesNearFade: 0.5
_RenderFace: Both</li>
</ul>
<h3 data-id="heading-9"><strong>é­”æ³•ç²’å­ç‰¹æ•ˆ</strong></h3>
<p>åˆ©ç”¨Color Modeçš„Overlayé€‰é¡¹å®ç°æè´¨ä¸ç²’å­é¢œè‰²æ··åˆï¼Œé…åˆ_Cutoffå‚æ•°åˆ¶ä½œé—ªçƒæ•ˆæœã€‚é€šè¿‡è„šæœ¬åŠ¨æ€ä¿®æ”¹_HitPoså’Œ_HitSizeæ•°ç»„å¯å®ç°å—å‡»æ—¶çš„æ³¢çº¹æ‰©æ•£ã€‚æ ¸å¿ƒä»£ç é€»è¾‘åŒ…æ‹¬ï¼š</p>
<ul>
<li>å£°æ˜Shaderå±æ€§ï¼š<code>_HitPos("HitPos", Vector) = (0,0,0,0)</code></li>
<li>åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­è®¡ç®—è·ç¦»è¡°å‡ï¼š<code>float dist = distance(i.worldPos, _HitPos)</code></li>
</ul>
<h3 data-id="heading-10"><strong>è½å¶/èŠ±ç“£æ•ˆæœ</strong></h3>
<p>éœ€å¯ç”¨Alpha Clippingå¹¶è®¾ç½®åˆé€‚é˜ˆå€¼ï¼ˆé€šå¸¸0.3-0.5ï¼‰ï¼Œç»“åˆç²’å­ç³»ç»Ÿçš„Shapeæ¨¡å—è®¾ç½®ä¸ºBoxå‘å°„å™¨è¦†ç›–æ ‘æœ¨èŒƒå›´ã€‚é€šè¿‡Size over Lifetimeå®ç°ä¸‹è½è¿‡ç¨‹ä¸­çš„å°ºå¯¸å˜åŒ–ï¼Œä½¿ç”¨Texture Sheet Animationæ¨¡å—æ·»åŠ é£˜åŠ¨åŠ¨ç”»ã€‚</p>
<h3 data-id="heading-11"><strong>å—å‡»é—ªç™½æ•ˆæœ</strong></h3>
<p>å¤åˆ¶ParticlesSimpleLitç€è‰²å™¨åæ·»åŠ å—å‡»é€»è¾‘ï¼Œé€šè¿‡Lerpå‡½æ•°æ··åˆåŸå§‹é¢œè‰²ä¸ç™½è‰²ï¼Œä½¿ç”¨_SinTimeæ§åˆ¶æ¢å¤é€Ÿåº¦ã€‚å…³é”®å®ç°å‚è€ƒå—å‡»é—ªç™½åŠ¨ç”»æ–¹æ¡ˆï¼š</p>
<ul>
<li>æ·»åŠ å±æ€§ï¼š<code>_FlashAmount("Flash Amount", Range(0,1)) = 0</code></li>
<li>é¢œè‰²æ··åˆï¼š<code>finalColor = lerp(originalColor, white, _FlashAmount)</code></li>
</ul>
<p>æ‰€æœ‰æ•ˆæœå‡éœ€åœ¨URPè®¾ç½®ä¸­å¼€å¯Depth Textureå’ŒOpaque Textureé€‰é¡¹ä»¥ä¿è¯æ·±åº¦äº¤äº’æ­£å¸¸ã€‚å¯¹äºå¤æ‚æ•ˆæœï¼Œå»ºè®®ç»“åˆShader Graphè¿›è¡ŒåŸå‹è®¾è®¡åå†è½¬æ¢ä¸ºä»£ç å®ç°.</p>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13021255.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13021255%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13021255&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ DeepSeek ç»™ Git æäº¤åšè‡ªåŠ¨ Code Reviewï¼šä» 0 è½åœ°ä¸€ä¸ªæœ¬åœ° AI å®¡æŸ¥æµç¨‹]]></title>    <link>https://juejin.cn/post/7579264485259952143</link>    <guid>https://juejin.cn/post/7579264485259952143</guid>    <pubDate>2025-12-03T14:47:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579264485259952143" data-draft-id="7579494852652826658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ DeepSeek ç»™ Git æäº¤åšè‡ªåŠ¨ Code Reviewï¼šä» 0 è½åœ°ä¸€ä¸ªæœ¬åœ° AI å®¡æŸ¥æµç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-03T14:47:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GALA"/> <meta itemprop="url" content="https://juejin.cn/user/2893570334268573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ DeepSeek ç»™ Git æäº¤åšè‡ªåŠ¨ Code Reviewï¼šä» 0 è½åœ°ä¸€ä¸ªæœ¬åœ° AI å®¡æŸ¥æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2893570334268573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GALA
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T14:47:18.000Z" title="Wed Dec 03 2025 14:47:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªç©ºç›®å½•å¼€å§‹ï¼Œæ­å»ºä¸€å¥—åœ¨ git commit å‰è‡ªåŠ¨è°ƒç”¨ DeepSeekÂ åšä»£ç å®¡æŸ¥çš„å·¥ä½œæµï¼š</p>
<ul>
<li>ä½¿ç”¨Â Node.js è„šæœ¬Â è¯»å–æœ¬æ¬¡æäº¤çš„Â git diff</li>
<li>é€šè¿‡Â DeepSeek Chat APIÂ åšä»£ç å®¡æŸ¥ï¼Œå¹¶æŒ‰Â ä¸¥é‡ç¨‹åº¦åˆ†çº§</li>
<li>åœ¨Â pre-commit hookÂ é˜¶æ®µè‡ªåŠ¨æ‰§è¡Œï¼Œæœ‰ä¸¥é‡é—®é¢˜å°±é˜»æ­¢æäº¤</li>
<li>å®¡æŸ¥è§„åˆ™æŠ½è±¡ä¸ºÂ rules.jsonÂ é…ç½®</li>
<li>æ¨¡å‹é…ç½®é€šè¿‡Â .env.localÂ ç®¡ç†ï¼Œæ–¹ä¾¿æœ¬åœ°å¼€å‘<br/>
ä½ å¯ä»¥ç›´æ¥æŠŠè¿™é‡Œçš„æ–¹æ¡ˆæ¬è¿›è‡ªå·±çš„é¡¹ç›®ã€‚</li>
</ul>
<h2 data-id="heading-0">åœºæ™¯ä¸ç›®æ ‡</h2>
<p>é—®é¢˜ï¼šå›¢é˜Ÿæ—¥å¸¸å¼€å‘ä¸­ï¼ŒReview èµ„æºæœ‰é™ï¼Œå°é—®é¢˜å®¹æ˜“è¢«æ¼æ‰ï¼Œå¤§é—®é¢˜åˆå¯èƒ½åœ¨åˆå¹¶åæ‰æš´éœ²ã€‚ç›®æ ‡ï¼šåœ¨æ¯æ¬¡Â git commitÂ ä¹‹å‰ï¼Œè®©Â AI å¸®ä½ å¿«é€Ÿè¿‡ä¸€éå˜æ›´ï¼Œæå‰å‘ç°ä¸¥é‡é—®é¢˜ï¼Œå¹¶ç»™å‡ºå¯æ‰§è¡Œçš„æ”¹è¿›å»ºè®®ã€‚æˆ‘ä»¬è®¾è®¡çš„æ–¹æ¡ˆæ»¡è¶³è¿™äº›è¦æ±‚ï¼š</p>
<ul>
<li>åªå®¡æŸ¥æœ¬æ¬¡æäº¤çš„å·²æš‚å­˜æ”¹åŠ¨ï¼ˆStaged Diffï¼‰</li>
<li>AI æŒ‰Â ä¸¥é‡Â / ä¸€èˆ¬ / å»ºè®®Â ä¸‰ä¸ªçº§åˆ«è¾“å‡ºé—®é¢˜</li>
<li>æœ‰ä¸¥é‡é—®é¢˜æ—¶ï¼šé˜»æ­¢æäº¤</li>
<li>æ‰€æœ‰è§„åˆ™ï¼ˆå…³æ³¨ç‚¹ã€æ–‡æ¡ˆã€é˜»æ–­ç­–ç•¥ï¼‰éƒ½å†™åœ¨Â rules.jsonï¼Œåç»­å¯è‡ªå®šä¹‰</li>
<li>æ¨¡å‹ KeyÂ &amp; åœ°å€æ”¾åœ¨Â .env.localï¼Œä¾¿äºæœ¬åœ°ç¯å¢ƒç®¡ç†</li>
</ul>
<h2 data-id="heading-1">é¡¹ç›®åˆå§‹åŒ–</h2>
<p>åœ¨ä¸€ä¸ªç©ºç›®å½•ï¼ˆä¾‹å¦‚Â AI-Codereviewï¼‰ä¸‹ï¼Œæˆ‘ä»¬å…ˆæ‰‹å†™ä¸€ä¸ªç®€å•çš„Â package.jsonï¼š</p>
<pre><code class="hljs language-js" lang="js">{
Â Â <span class="hljs-string">"name"</span>:Â <span class="hljs-string">"ai-codereview"</span>,
Â Â <span class="hljs-string">"version"</span>:Â <span class="hljs-string">"0.1.0"</span>,
Â Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"åœ¨Â gitÂ æäº¤æ—¶è°ƒç”¨Â DeepSeekÂ æ¨¡å‹è¿›è¡Œä»£ç è‡ªåŠ¨å®¡æŸ¥çš„ç®€å•å·¥å…·"</span>,
Â Â <span class="hljs-string">"main"</span>:Â <span class="hljs-string">"scripts/deepseek-review.js"</span>,
Â Â <span class="hljs-string">"bin"</span>:Â {
Â Â Â Â <span class="hljs-string">"deepseek-review"</span>:Â <span class="hljs-string">"scripts/deepseek-review.js"</span>
Â Â },
Â Â <span class="hljs-string">"scripts"</span>:Â {
Â Â Â Â <span class="hljs-string">"review"</span>:Â <span class="hljs-string">"nodeÂ scripts/deepseek-review.js"</span>
Â Â },
Â Â <span class="hljs-string">"license"</span>:Â <span class="hljs-string">"MIT"</span>
}
</code></pre>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªç‚¹ï¼š</p>
<ul>
<li>binÂ å­—æ®µï¼šå°†æ¥å¯ä»¥é€šè¿‡Â npm install -g .Â å®‰è£…æˆå…¨å±€ CLIï¼Œç›´æ¥ç”¨Â deepseek-reviewÂ å‘½ä»¤ã€‚</li>
</ul>

<ul>
<li>scripts.reviewï¼šæ–¹ä¾¿æœ¬åœ°è°ƒè¯•ï¼ŒnpmÂ run reviewÂ å³å¯æ‰§è¡Œå®¡æŸ¥è„šæœ¬ã€‚</li>
</ul>
<h2 data-id="heading-2">æ ¸å¿ƒï¼šDeepSeekÂ ä»£ç å®¡æŸ¥è„šæœ¬</h2>
<p>æˆ‘ä»¬åœ¨Â scripts/deepseek-review.jsÂ é‡Œå®Œæˆå‡ ä»¶äº‹ï¼š</p>
<ol>
<li>åŠ è½½Â .env.localÂ å’Œè§„åˆ™é…ç½®Â rules.json</li>
<li>ä»Â git diff --cachedÂ è¯»å–å½“å‰å·²æš‚å­˜çš„å˜æ›´</li>
<li>æ„é€ ä¸€ä»½å¸¦æœ‰ã€Œè§„åˆ™è¯´æ˜ + è¾“å‡ºæ ¼å¼ã€çš„ Prompt</li>
<li>è°ƒç”¨ DeepSeek Chat API</li>
<li>è§£æ AI è¾“å‡ºä¸­çš„Â BLOCK: YES/NOï¼Œå†³å®šæ˜¯å¦é˜»æ­¢æäº¤</li>
</ol>
<p>ä¸‹é¢æ˜¯éƒ¨åˆ†ä»£ç å®ç°ç»“æ„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¯»å–å½“å‰å·²æš‚å­˜çš„ diff</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">cmd</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">execSync</span>(cmd, { <span class="hljs-attr">encoding</span>: <span class="hljs-string">"utf8"</span> }).<span class="hljs-title function_">trim</span>();
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getStagedDiff</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">run</span>(<span class="hljs-string">"git diff --cached --unified=0"</span>);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"[deepseek-review] è¯»å– git diff å¤±è´¥ï¼š"</span>, e.<span class="hljs-property">message</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
  }
}

<span class="hljs-comment">// æ„é€  Promptï¼ŒæŠŠè§„åˆ™å’Œè¾“å‡ºæ ¼å¼å–‚ç»™æ¨¡å‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">buildPrompt</span>(<span class="hljs-params">diff, rules</span>) {
  <span class="hljs-keyword">const</span> focusList = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(rules.<span class="hljs-property">focus</span>) &amp;&amp; rules.<span class="hljs-property">focus</span>.<span class="hljs-property">length</span>
    ? rules.<span class="hljs-property">focus</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-string">`- <span class="hljs-subst">${item}</span>`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>)
    : <span class="hljs-string">"- é€»è¾‘æ­£ç¡®æ€§ä¸æ½œåœ¨ Bug\n- è¾¹ç•Œæ¡ä»¶ä¸å¼‚å¸¸å¤„ç†\n- æ€§èƒ½é—®é¢˜\n- å®‰å…¨é—®é¢˜\n- å¯ç»´æŠ¤æ€§ä¸å¯è¯»æ€§"</span>;

  <span class="hljs-keyword">const</span> severeDesc = rules.<span class="hljs-property">severityLevels</span>?.<span class="hljs-property">severe</span>?.<span class="hljs-property">description</span>
    || <span class="hljs-string">"å¯èƒ½å¯¼è‡´åŠŸèƒ½ä¸å¯ç”¨ã€æ•°æ®æŸåã€å®‰å…¨æ¼æ´æˆ–æ„å»ºå¤±è´¥çš„é—®é¢˜ã€‚"</span>;
  <span class="hljs-keyword">const</span> majorDesc = rules.<span class="hljs-property">severityLevels</span>?.<span class="hljs-property">major</span>?.<span class="hljs-property">description</span>
    || <span class="hljs-string">"å¯ä»¥è¿è¡Œï¼Œä½†å­˜åœ¨æ½œåœ¨ Bugã€æ€§èƒ½éšæ‚£æˆ–è¾ƒå¤§ç»´æŠ¤æˆæœ¬çš„é—®é¢˜ã€‚"</span>;
  <span class="hljs-keyword">const</span> suggestionDesc = rules.<span class="hljs-property">severityLevels</span>?.<span class="hljs-property">suggestion</span>?.<span class="hljs-property">description</span>
    || <span class="hljs-string">"é£æ ¼ã€å‘½åã€ç»“æ„ä¼˜åŒ–ã€æ›´ä¼˜å†™æ³•ç­‰ã€‚"</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-keyword">of</span> = rules.<span class="hljs-property">outputFormat</span> || {};

  <span class="hljs-keyword">return</span> <span class="hljs-string">`
ä½ æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„èµ„æ·±ä»£ç å®¡æŸ¥ä¸“å®¶ï¼Œè¯·å®¡æŸ¥ä¸‹é¢è¿™æ¬¡ git æäº¤çš„å˜æ›´ diffã€‚

ã€å®¡æŸ¥é‡ç‚¹ã€‘
<span class="hljs-subst">${focusList}</span>

ã€åˆ†çº§è§„åˆ™ã€‘
- ä¸¥é‡é—®é¢˜ï¼š<span class="hljs-subst">${severeDesc}</span>
- ä¸€èˆ¬é—®é¢˜ï¼š<span class="hljs-subst">${majorDesc}</span>
- å»ºè®®ä¸ä¼˜åŒ–ï¼š<span class="hljs-subst">${suggestionDesc}</span>

ã€è¾“å‡ºæ ¼å¼ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼Œæ–¹ä¾¿å·¥å…·è§£æï¼‰ã€‘
<span class="hljs-subst">${<span class="hljs-keyword">of</span>.overview || <span class="hljs-string">"1. æ€»ä½“è¯„ä»·ï¼ˆ1-2 å¥ï¼‰"</span>}</span>
<span class="hljs-subst">${<span class="hljs-keyword">of</span>.severe || <span class="hljs-string">"2. ä¸¥é‡é—®é¢˜ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œè¯·å†™â€œæ— ä¸¥é‡é—®é¢˜â€ï¼‰\n   - ã€ä¸¥é‡ã€‘æè¿°é—®é¢˜ + æ¶‰åŠçš„æ–‡ä»¶/å¤§è‡´ä½ç½® + åŸå› "</span>}</span>
<span class="hljs-subst">${<span class="hljs-keyword">of</span>.major || <span class="hljs-string">"3. ä¸€èˆ¬é—®é¢˜ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œè¯·å†™â€œæ— ä¸€èˆ¬é—®é¢˜â€ï¼‰\n   - ã€ä¸€èˆ¬ã€‘æè¿°é—®é¢˜ + æ¶‰åŠçš„æ–‡ä»¶/å¤§è‡´ä½ç½® + åŸå› "</span>}</span>
<span class="hljs-subst">${<span class="hljs-keyword">of</span>.suggestion || <span class="hljs-string">"4. å»ºè®®ä¸ä¼˜åŒ–ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥å†™â€œæš‚æ— æ˜æ˜¾ä¼˜åŒ–å»ºè®®â€ï¼‰"</span>}</span>

<span class="hljs-subst">${<span class="hljs-keyword">of</span>.blockRule || <span class="hljs-string">"5. æœ€ç»ˆç»“è®ºï¼ˆåªä¿ç•™ä¸€è¡Œï¼Œä¸”ç”¨è‹±æ–‡ BLOCK æ ‡è®°ï¼Œå¿…é¡»å¤§å†™ï¼‰ï¼š\n   - è‹¥å¿…é¡»åœ¨æäº¤å‰ä¿®å¤ï¼Œè¯·è¾“å‡ºï¼šBLOCK: YES\n   - è‹¥å…è®¸æäº¤ï¼Œä»…ç»™å‡ºå»ºè®®ï¼Œè¯·è¾“å‡ºï¼šBLOCK: NO"</span>}</span>

æ³¨æ„ï¼š
- ä¸è¦è¾“å‡ºé™¤ä¸Šè¿°æ ¼å¼ä»¥å¤–çš„é¢å¤–æ€»ç»“è¡Œã€‚
- â€œBLOCK: YES/NOâ€ å¿…é¡»æ˜¯ç‹¬ç«‹ä¸€è¡Œï¼Œå‰åä¸è¦åŠ å…¶ä»–å­—ç¬¦ã€‚

ä¸‹é¢æ˜¯æœ¬æ¬¡æäº¤çš„ diffï¼ˆç»Ÿä¸€ diff æ ¼å¼ï¼‰ï¼š

<span class="hljs-subst">${diff}</span>
`</span>;
}

<span class="hljs-comment">// è°ƒç”¨ DeepSeek Chat API</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">callDeepseek</span>(<span class="hljs-params">{ apiKey, baseUrl, model, prompt }</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> postData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      model,
      <span class="hljs-attr">messages</span>: [
        { <span class="hljs-attr">role</span>: <span class="hljs-string">"system"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªèµ„æ·±ä»£ç å®¡æŸ¥å·¥ç¨‹å¸ˆï¼Œæ“…é•¿å‘ç°é—®é¢˜å¹¶æå‡ºå¯è¡Œå»ºè®®ã€‚"</span> },
        { <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>, <span class="hljs-attr">content</span>: prompt }
      ],
      <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.2</span>
    });

    <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">"/v1/chat/completions"</span>, baseUrl);

    <span class="hljs-keyword">const</span> options = {
      <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
      <span class="hljs-attr">hostname</span>: url.<span class="hljs-property">hostname</span>,
      <span class="hljs-attr">path</span>: url.<span class="hljs-property">pathname</span>,
      <span class="hljs-attr">port</span>: url.<span class="hljs-property">port</span> || <span class="hljs-number">443</span>,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
        <span class="hljs-string">"Authorization"</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${apiKey}</span>`</span>,
        <span class="hljs-string">"Content-Length"</span>: <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">byteLength</span>(postData)
      }
    };

    <span class="hljs-keyword">const</span> req = https.<span class="hljs-title function_">request</span>(options, <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
      <span class="hljs-keyword">let</span> data = <span class="hljs-string">""</span>;
      res.<span class="hljs-title function_">on</span>(<span class="hljs-string">"data"</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> (data += chunk));
      res.<span class="hljs-title function_">on</span>(<span class="hljs-string">"end"</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (res.<span class="hljs-property">statusCode</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; res.<span class="hljs-property">statusCode</span> &lt; <span class="hljs-number">300</span>) {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data);
            <span class="hljs-keyword">const</span> content =
              json.<span class="hljs-property">choices</span>?.[<span class="hljs-number">0</span>]?.<span class="hljs-property">message</span>?.<span class="hljs-property">content</span> ||
              json.<span class="hljs-property">choices</span>?.[<span class="hljs-number">0</span>]?.<span class="hljs-property">text</span> ||
              <span class="hljs-string">""</span>;
            <span class="hljs-title function_">resolve</span>(content.<span class="hljs-title function_">trim</span>());
          } <span class="hljs-keyword">catch</span> (e) {
            <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"è§£æ DeepSeek å“åº”å¤±è´¥ï¼š"</span> + e.<span class="hljs-property">message</span>));
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">reject</span>(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`DeepSeek API å“åº”é”™è¯¯ï¼š<span class="hljs-subst">${res.statusCode}</span> <span class="hljs-subst">${res.statusMessage}</span> <span class="hljs-subst">${data}</span>`</span>)
          );
        }
      });
    });

    req.<span class="hljs-title function_">on</span>(<span class="hljs-string">"error"</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(err));
    req.<span class="hljs-title function_">write</span>(postData);
    req.<span class="hljs-title function_">end</span>();
  });
}

</code></pre>
<p>ä½ å¯ä»¥ç›´æ¥é€šè¿‡ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶æ¥ï¼š</p>
<ul>
<li>è°ƒæ•´å®¡æŸ¥å…³æ³¨ç‚¹ï¼ˆä¾‹å¦‚æ¢æˆã€Œæ”¯ä»˜æ­£ç¡®æ€§ã€ã€Œæƒé™æ§åˆ¶ã€ç­‰ï¼‰</li>
<li>æ”¹å†™åˆ†çº§è¯´æ˜ï¼Œè´´è¿‘ä½ ä»¬å›¢é˜Ÿçš„è§„èŒƒ</li>
<li>ä¿®æ”¹è¾“å‡ºæ ¼å¼ï¼Œæ¯”å¦‚å¢åŠ æŸä¸ªæ¨¡å—çš„ä¸“é—¨å°èŠ‚</li>
<li>åˆ‡æ¢é»˜è®¤é˜»æ–­ç­–ç•¥ï¼ˆblockOnSevereDefaultï¼‰</li>
</ul>
<h2 data-id="heading-3">æ¨¡å‹é…ç½®é€šè¿‡Â .env.localÂ ç®¡ç†</h2>
<p>ä¸ºäº†é¿å…æŠŠÂ Key å†™æ­»åœ¨ä»£ç æˆ– shell é…ç½®é‡Œï¼Œæˆ‘ä»¬é‡‡ç”¨ Next.js å¸¸è§çš„Â .env.localÂ é£æ ¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"># .<span class="hljs-property">env</span>.<span class="hljs-property">local</span>ï¼ˆä¸æäº¤åˆ°ä»“åº“ï¼‰
<span class="hljs-variable constant_">DEEPSEEK_API_KEY</span>=ä½ çš„_API_Key
<span class="hljs-variable constant_">DEEPSEEK_API_BASE</span>=<span class="hljs-attr">https</span>:<span class="hljs-comment">//api.deepseek.com</span>
<span class="hljs-variable constant_">DEEPSEEK_MODEL</span>=deepseek-chat

# æ˜¯å¦åœ¨ä¸¥é‡é—®é¢˜æ—¶é˜»æ­¢æäº¤ï¼ˆ<span class="hljs-number">1</span> é˜»æ­¢ / <span class="hljs-number">0</span> ä¸é˜»æ­¢ï¼‰
<span class="hljs-variable constant_">DEEPSEEK_BLOCK_ON_SEVERE</span>=<span class="hljs-number">1</span>
</code></pre>
<p>è„šæœ¬å¯åŠ¨æ—¶ä¼šï¼š</p>
<ol>
<li>æŸ¥æ‰¾å½“å‰å·¥ä½œç›®å½•çš„Â .env.local</li>
<li>è§£ææ¯ä¸€è¡ŒÂ KEY=VALUEï¼Œå†™å…¥Â process.env</li>
<li>å¦‚æœç³»ç»Ÿç¯å¢ƒå˜é‡é‡Œå·²ç»æœ‰åŒå KEYï¼Œåˆ™ä»¥ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸ºå‡†</li>
</ol>
<p>è¿™æ ·åšæœ‰å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>é€‚åˆå‰ç«¯/Node é¡¹ç›®ç°æœ‰ä¹ æƒ¯</li>
<li>å¯ä»¥æŒ‰ä»“åº“å­˜å‚¨ä¸åŒ Key/é…ç½®</li>
<li>ä¸éœ€è¦å…¨å±€æ±¡æŸ“ shell ç¯å¢ƒ</li>
</ul>
<h2 data-id="heading-4">Git Hookï¼šåœ¨æäº¤å‰è‡ªåŠ¨æ‰§è¡Œå®¡æŸ¥</h2>
<p>æœ€åä¸€æ­¥ï¼ŒæŠŠè„šæœ¬æ¥åˆ° Git çš„Â pre-commitÂ é˜¶æ®µã€‚<br/>
ç”±äºæ˜¯æ‹¿æœ¬é¡¹ç›®æ¥æ‰§è¡ŒéªŒè¯çš„è¿™é‡Œä½¿ç”¨Â .githooks/pre-commitÂ +Â core.hooksPathÂ çš„æ–¹å¼ï¼Œæ–¹ä¾¿ç‰ˆæœ¬ç®¡ç†ã€‚<br/>
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºÂ .githooks/pre-commitï¼š</p>
<pre><code class="hljs language-js" lang="js">#!<span class="hljs-regexp">/bin/</span>sh

# ç®€å•çš„ pre-commit hook ç¤ºä¾‹ï¼š
# åœ¨æ‰§è¡Œ git commit æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ <span class="hljs-title class_">DeepSeek</span> ä»£ç å®¡æŸ¥è„šæœ¬ã€‚

echo <span class="hljs-string">"[pre-commit] è°ƒç”¨ DeepSeek è¿›è¡Œä»£ç å®¡æŸ¥..."</span>

node scripts/deepseek-review.<span class="hljs-property">js</span>
<span class="hljs-variable constant_">STATUS</span>=$?

<span class="hljs-keyword">if</span> [ $STATUS -ne <span class="hljs-number">0</span> ]; then
  echo <span class="hljs-string">"[pre-commit] DeepSeek ä»£ç å®¡æŸ¥è„šæœ¬æ‰§è¡Œå¤±è´¥æˆ–å‘ç°ä¸¥é‡é—®é¢˜ï¼Œç»ˆæ­¢æäº¤ã€‚"</span>
  exit $STATUS
fi

exit <span class="hljs-number">0</span>
</code></pre>
<p>ç„¶ååœ¨ä»“åº“é‡Œå¯ç”¨å®ƒï¼š</p>
<pre><code class="hljs language-shell" lang="shell">git config core.hooksPath .githooks
chmod +x .githooks/pre-commit
chmod +x scripts/deepseek-review.js
</code></pre>
<p>ä»æ­¤ä»¥åï¼Œæ¯æ¬¡åœ¨è¿™ä¸ªä»“åº“é‡Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-js" lang="js">git add .
git commit -m <span class="hljs-string">"feat: xxx"</span>
</code></pre>
<p>éƒ½ä¼šè‡ªåŠ¨è§¦å‘ï¼š</p>
<ol>
<li>pre-commitÂ â†’Â node scripts/deepseek-review.js</li>
<li>è„šæœ¬è¯»å–Â git diff --cached</li>
<li>è°ƒç”¨ DeepSeek â†’ æŒ‰è§„åˆ™åˆ†çº§è¾“å‡ºé—®é¢˜ï¼Œå¹¶åœ¨æœ«å°¾ç»™å‡ºÂ BLOCK: YES/NO</li>
<li>å¦‚æœæ˜¯Â BLOCK: YESÂ ä¸”å½“å‰è§„åˆ™/ç¯å¢ƒè¦æ±‚é˜»æ–­ â†’ æœ¬æ¬¡æäº¤ç›´æ¥å¤±è´¥</li>
</ol>
<h2 data-id="heading-5">å®¡æ ¸ç¤ºä¾‹</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c803d2f19b14939894a2225e81c8693~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0FMQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765380355&amp;x-signature=BkZyB8MTQkArS%2F3xwa80CovcbjI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">æ€»ç»“ä¸ä¸€äº›å»¶ä¼¸æƒ³æ³•</h2>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬è½åœ°äº†ä¸€å¥—æœ¬åœ°å¯é…ç½®çš„ AI Code Review æµç¨‹ï¼Œç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ä¸ Git å¼ºç»‘å®šï¼šåœ¨æäº¤å‰æå‰æ‹¦æˆªä¸¥é‡é—®é¢˜</li>
<li>è§„åˆ™å¯é…ç½®ï¼šé€šè¿‡Â rules.jsonÂ æŠ½è±¡äº†å®¡æŸ¥ç»´åº¦å’Œåˆ†çº§</li>
<li>æ¨¡å‹å¯é…ç½®ï¼šæ¨¡å‹ä¿¡æ¯æ”¾åœ¨Â .env.localï¼Œç¬¦åˆå‰ç«¯/Node ç”Ÿæ€çš„ä¹ æƒ¯</li>
<li>è¡Œä¸ºå¯è°ƒï¼šæ—¢å¯ä»¥å¼ºåˆ¶é˜»æ–­ä¸¥é‡é—®é¢˜ï¼Œä¹Ÿå¯ä»¥åœ¨å¼€å‘æ—©æœŸåªåšã€Œæç¤ºä¸é˜»æ–­ã€</li>
</ul>
<p>åŸºäºè¿™å¥—ç»“æ„ï¼Œä½ è¿˜å¯ä»¥ç»§ç»­æ‰©å±•ï¼š</p>
<ul>
<li>é’ˆå¯¹ä¸åŒåˆ†æ”¯ï¼ˆmainÂ /Â devï¼‰é€‰æ‹©ä¸åŒçš„è§„åˆ™æ–‡ä»¶</li>
<li>åœ¨å®¡æŸ¥ç»“æœä¸­å¢åŠ ä»£ç ç¤ºä¾‹æˆ–é‡æ„å»ºè®®æ¨¡æ¿</li>
<li>å°†ç»“æœåŒæ­¥åˆ° Git å¹³å°ï¼ˆGitLab MR comment / GitHub PR commentï¼‰</li>
</ul>
<p>ç”±äºå·¥å…·å½“å‰åªæ˜¯ 0.1.0 ç‰ˆæœ¬è¿˜æœ‰å¾ˆå¤šå¾…æ”¹è¿›çš„åœ°æ–¹ï¼Œåç»­å°†ä¸æ–­ä¼˜åŒ–æ”¹è¿›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>