<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬ä¸‰ç¯‡ï¼‰ï¼šå­—ç¬¦ä¸²æ’å€¼çš„ â€œè¡¥ä½ç¥æŠ€â€]]></title>    <link>https://juejin.cn/post/7580303864605458441</link>    <guid>https://juejin.cn/post/7580303864605458441</guid>    <pubDate>2025-12-07T02:19:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580303864605458441" data-draft-id="7580374090365042726" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬ä¸‰ç¯‡ï¼‰ï¼šå­—ç¬¦ä¸²æ’å€¼çš„ â€œè¡¥ä½ç¥æŠ€â€"/> <meta itemprop="keywords" content="å‰ç«¯,Swift,Apple"/> <meta itemprop="datePublished" content="2025-12-07T02:19:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬ä¸‰ç¯‡ï¼‰ï¼šå­—ç¬¦ä¸²æ’å€¼çš„ â€œè¡¥ä½ç¥æŠ€â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:19:54.000Z" title="Sun Dec 07 2025 02:19:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb99131ac1074f19a60aba46e1641d4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678794&amp;x-signature=QfaAt0SeCyQyQ4oMtmaC96xtt4k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•å­ï¼šç³–è‘«èŠ¦ä¸æŠ¥é”™é½é£ï¼Œç†ŠçŒ«ä¾ å¡å£³å®¢æ ˆ</h2>
<p>æ´›é˜³åŸçš„ â€œç æ—åˆ†èˆµâ€ å®¢æ ˆé‡Œï¼Œå¤§ç†ŠçŒ«ä¾¯ä½©æ­£ä¸€æ‰‹æ”¥ç€ç³–è‘«èŠ¦ï¼Œä¸€æ‰‹æˆ³ç€å±å¹•ä¸Šçš„çº¢è‰²æŠ¥é”™ï¼Œåœ†è„¸è›‹çš±æˆäº†åŒ…å­ã€‚</p>
<p>è¿™ä½è‡ªç§° â€œæ’å€¼å°èƒ½æ‰‹ï¼Œå¤´äº®ä¹Ÿä¸ç§ƒâ€ çš„ Swift ç©å®¶ï¼Œæ­¤åˆ»æ­£è¢«ä¸€è¡Œå­—ç¬¦ä¸²æ‰“å°ä»£ç éš¾ä½ â€”â€” ç”¨æˆ·ä¿¡æ¯é‡Œçš„<code>age</code>æ˜¯<code>Int?</code>ï¼Œæƒ³ç»™ä¸ª â€œUnknownâ€ å½“é»˜è®¤å€¼ï¼Œç»“æœç¼–è¯‘å™¨åè¯´ â€œç±»å‹ä¸åŒ¹é…ï¼Œæ­¤è·¯ä¸é€šâ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/449e1e4c49f448ddb08fc49a781883f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678794&amp;x-signature=y27FK4Ff8LsDK4dL8gqC%2BV5E4X0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå²‚æœ‰æ­¤ç†ï¼â€ ä¾¯ä½©å’¬ç¢ä¸€é¢—å±±æ¥‚ï¼Œç³–æ¸£æ‰åœ¨é”®ç›˜ä¸Šï¼Œâ€œ<code>name ?? "Anonymous"</code>è¿˜å¥½å¥½çš„ï¼Œæ¢<code>age</code>å°±ç¿»è„¸ï¼Ÿéš¾ä¸æˆè¦æˆ‘å…ˆæŠŠ<code>age</code>è½¬æˆå­—ç¬¦ä¸²ï¼Œå¤šæ­¤ä¸€ä¸¾åƒç»•è¿œè·¯åƒåŒ…å­ï¼Ÿâ€</p>
<p>åœ¨æœ¬ç¯‡æ­¦æ—åˆ—ä¼ ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>å¼•å­ï¼šç³–è‘«èŠ¦ä¸æŠ¥é”™é½é£ï¼Œç†ŠçŒ«ä¾ å¡å£³å®¢æ ˆ</li>
<li>ğŸ¯ 1. æ–°æ‹›æ­ç§˜ï¼šSE-0477 çš„ â€œç®€çº¦è¡¥ä½æœ¯â€</li>
<li>ğŸ¤” 2. åˆçœ‹å¹³æ·¡ï¼Ÿnil coalescing çš„ â€œè½¯è‚‹â€ åœ¨æ­¤</li>
<li>âœ¨ 3. å…³é”®çªç ´ï¼šè·¨ç±»å‹è¡¥ä½çš„ â€œé€šå…³ç§˜ç±â€</li>
<li>ğŸš¨ 4. ç»†èŠ‚æé†’ï¼šåˆ«è¸© â€œé»˜è®¤å€¼ç±»å‹â€ çš„å°å‘</li>
<li>ğŸ”® ç»“å°¾ï¼šå¤æ‚æ’å€¼ç°æ–°ç–‘ï¼Œç§˜ç±æ®‹é¡µè—ç„æœº</li>
</ul>
<p>å°±åœ¨ä»–å‡†å¤‡å†™ â€œç¬¨åŠæ³•â€ æ—¶ï¼Œçª—è¾¹ä¼ æ¥è½»æŸ”çš„å£°éŸ³ï¼šâ€œä¾¯å¤§ä¾ è«æ€¥ï¼Œæˆ‘è¿™æœ‰ SE-0477 çš„â€˜è¡¥ä½ç¥æŠ€â€™ï¼ˆ<strong>Default Value in String Interpolations</strong>ï¼‰ï¼Œä¸“è§£è¿™ç§â€˜ç±»å‹ä¸å¯¹ä»˜â€™çš„éš¾é¢˜ã€‚â€ åªè§ç¨‹çµç´ ä¸€èº«é’å¸ƒè¡£è£™ï¼Œæ‰‹ä¸­æ‹¿ç€æœ¬ã€ŠSwift æ’å€¼ç§˜ç±ã€‹ï¼Œç¬‘å®¹æ¸©å’Œå¦‚æ˜¥é£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f29f646596794177923d4b4054b3fe12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678794&amp;x-signature=rxrb%2F%2Bmt%2Fb9w8TlQI5KnCCAxGDg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ¯ 1. æ–°æ‹›æ­ç§˜ï¼šSE-0477 çš„ â€œç®€çº¦è¡¥ä½æœ¯â€</h2>
<p>SE-0477 è¿™é—¨åŠŸæ³•ï¼Œçœ‹ä¼¼å°å·§ï¼Œå´è—ç€å¤§æ™ºæ…§ â€”â€” å®ƒç»™<strong>å­—ç¬¦ä¸²æ’å€¼ï¼ˆString Interpolationï¼‰</strong> é‡Œçš„<strong>å¯é€‰ç±»å‹ï¼ˆoptionalï¼‰</strong> åŠ äº† â€œè¡¥ä½åŠŸèƒ½â€ï¼š</p>
<blockquote>
<p>å¦‚æœå¯é€‰å€¼æ˜¯<code>nil</code>ï¼Œç›´æ¥åœ¨æ’å€¼é‡ŒæŒ‡å®šé»˜è®¤å€¼å°±è¡Œï¼Œä¸ç”¨å†å†™é¢å¤–çš„åˆ¤æ–­ã€‚</p>
</blockquote>
<p>ä¾¯ä½©å‡‘è¿‡å»ä¸€çœ‹ï¼Œç¨‹çµç´ å†™ä¸‹çš„åŸºç¡€ç”¨æ³•è®©ä»–çœ¼å‰ä¸€äº®ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span> <span class="hljs-comment">// ç”¨æˆ·æ²¡å¡«åå­—ï¼Œæ˜¯nil</span>

<span class="hljs-comment">// ç”¨SE-0477çš„æ–°è¯­æ³•ï¼šæ’å€¼é‡ŒåŠ (default: é»˜è®¤å€¼)</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello, <span class="hljs-subst">\(name, <span class="hljs-keyword">default</span>: <span class="hljs-string">"Anonymous"</span>)</span>!"</span>)

<span class="hljs-comment">// ç›´æ¥è¾“å‡ºï¼šHello, Anonymous!</span>
</code></pre>
<p>â€œè¿™æ¯”ä»¥å‰çš„<code>\(name ?? "Anonymous")</code>å°±å°‘ä¸ªé—®å·å•Šï¼Ÿâ€ ä¾¯ä½©æŒ æŒ å¤´ï¼Œå±±æ¥‚æ ¸å·®ç‚¹æ‰è¿›é”®ç›˜ç¼ï¼Œâ€œçœ‹ç€ä¹Ÿæ²¡å¤šå‰å®³å˜›ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8d63da0ad6c478eb7aaa0c38b98d9c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678794&amp;x-signature=S47fj4g6QV7lS%2Fm6jQdB07DVWVo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç¨‹çµç´ ç¬‘ç€æ‘‡å¤´ï¼šâ€œä¾¯å¤§ä¾ åˆ«æ€¥ï¼Œè¿™åªæ˜¯â€˜å¼€èƒƒå°èœâ€™ï¼ŒçœŸæ­£çš„å‰å®³ä¹‹å¤„ï¼Œä½ ä¸”åé¢å†çœ‹ã€‚â€</p>
<hr/>
<h2 data-id="heading-2">ğŸ¤” 2. åˆçœ‹å¹³æ·¡ï¼Ÿnil coalescing çš„ â€œè½¯è‚‹â€ åœ¨æ­¤</h2>
<p>ä¾¯ä½©ä¸æœæ°”ï¼Œæå‡ºä¹‹å‰èƒ½è·‘çš„ä»£ç ï¼šâ€œä½ çœ‹ï¼Œ<code>age ?? 0</code>å°±æ²¡é—®é¢˜ï¼Œæ‰“å°å‡ºæ¥æ˜¯â€˜Age: 0â€™ï¼Œä¹Ÿæ²¡æŠ¥é”™å•Šï¼â€</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">var</span> age: <span class="hljs-type">Int</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>

<span class="hljs-comment">// ä»¥å‰çš„nil coalescingï¼ˆç©ºåˆè¿ç®—ç¬¦ï¼‰å†™æ³•ï¼Œé»˜è®¤å€¼æ˜¯Intç±»å‹</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Age: <span class="hljs-subst">\(age <span class="hljs-operator">??</span> <span class="hljs-number">0</span>)</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šAge: 0</span>
</code></pre>
<p>â€œå¯è¦æ˜¯ä½ æƒ³ç»™â€˜Unknownâ€™å½“é»˜è®¤å€¼å‘¢ï¼Ÿâ€ ç¨‹çµç´ è½»è½»ä¸€ç‚¹å±å¹•ï¼Œâ€œæ¯”å¦‚äº§å“è¯´â€˜æ²¡å¹´é¾„å°±æ˜¾ç¤º â€œæœªçŸ¥â€â€™ï¼Œä½ å†è¯•è¯•ï¼Ÿâ€</p>
<p>ä¾¯ä½©ç«‹é©¬ä¿®æ”¹ï¼Œç»“æœçº¢è‰²æŠ¥é”™åˆå†’äº†å‡ºæ¥ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ ç¼–è¯‘æŠ¥é”™ï¼šInt?å’ŒStringç±»å‹ä¸å…¼å®¹ï¼Œnil coalescingä¸æ”¯æŒè·¨ç±»å‹</span>

<span class="hljs-comment">// print("Age: \(age ?? "Unknown")")</span>
</code></pre>
<p>â€œè¿™ä¸å°±å¡å£³äº†ï¼Ÿâ€ ç¨‹çµç´ èå°”ï¼Œâ€œ<code>nil coalescing</code>ï¼ˆç©ºåˆè¿ç®—ç¬¦ï¼‰çš„è½¯è‚‹å°±åœ¨è¿™ â€”â€” å®ƒè¦æ±‚é»˜è®¤å€¼å’Œå¯é€‰å€¼<strong>ç±»å‹å¿…é¡»ä¸€è‡´</strong>ï¼Œå°±åƒç³–è‘«èŠ¦åªèƒ½ä¸²å±±æ¥‚ï¼Œä¸èƒ½æ··ç€åŒ…å­ä¸²ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e87a686878624a0b8133aa4fee77fb5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678794&amp;x-signature=IVUfo6dhvq4L3esHRiHpMwVZV6A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©æç„¶å¤§æ‚Ÿï¼Œæ‹äº†ä¸‹å¤§è…¿ï¼ˆå·®ç‚¹æŠŠç³–è‘«èŠ¦æ‹æ‰ï¼‰ï¼šâ€œåŸæ¥å¦‚æ­¤ï¼æˆ‘ä¹‹å‰ç»•è¿œè·¯è½¬ç±»å‹ï¼Œå°±æ˜¯å› ä¸ºè¿™â€˜ç±»å‹é”â€™ï¼â€</p>
<hr/>
<h2 data-id="heading-3">âœ¨ 3. å…³é”®çªç ´ï¼šè·¨ç±»å‹è¡¥ä½çš„ â€œé€šå…³ç§˜ç±â€</h2>
<p>â€œåˆ«æ€¥ï¼ŒSE-0477 çš„â€˜è¡¥ä½ç¥æŠ€â€™ï¼Œå°±æ˜¯æ¥è§£è¿™â€˜ç±»å‹é”â€™çš„ã€‚â€</p>
<p>ç¨‹çµç´ æ‹¿èµ·ç¬”ï¼Œåœ¨çº¸ä¸Šå†™ä¸‹å…³é”®ä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">var</span> age: <span class="hljs-type">Int</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>

<span class="hljs-comment">// âœ… Swift 6.2+æ–°è¯­æ³•ï¼šæ’å€¼é‡Œç›´æ¥ç»™ä¸åŒç±»å‹çš„é»˜è®¤å€¼</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Age: <span class="hljs-subst">\(age, <span class="hljs-keyword">default</span>: <span class="hljs-string">"Unknown"</span>)</span>"</span>);

<span class="hljs-comment">// è¾“å‡ºï¼šAge: Unknown</span>
</code></pre>
<p>ä¾¯ä½©çœ¼ç›çªå¾—æºœåœ†ï¼Œèµ¶ç´§åœ¨ç”µè„‘ä¸Šè¯•äº†è¯• â€”â€” å±…ç„¶çœŸçš„ç¼–è¯‘é€šè¿‡ï¼Œè¿è¡Œç»“æœå®Œç¾ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab53348d05154b24a3c35f9e70266a0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678794&amp;x-signature=9mLY9S4bshJESHJ0QBsTtxOACmo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œè¿™ä¹Ÿå¤ªä¸æ»‘äº†å§ï¼â€ ä¾¯ä½©æ¿€åŠ¨åœ°å’¬äº†å£ç³–è‘«èŠ¦ï¼Œâ€œä¸ç”¨è½¬ç±»å‹ï¼Œä¸ç”¨å†™é¢å¤–åˆ¤æ–­ï¼Œåƒç¨‹å§‘å¨˜ä½ é…è¯ä¸€æ ·ï¼Œæ—¢ç²¾å‡†åˆçœäº‹ï¼â€</p>
<p>ç¨‹çµç´ è¡¥å……é“ï¼šâ€œå®ƒçš„åŸç†å¾ˆç®€å• â€”â€” æ’å€¼æ—¶ Swift ä¼šè‡ªåŠ¨å¤„ç†ç±»å‹è½¬æ¢ï¼ŒæŠŠ<code>Int?</code>å’Œ<code>String</code>çš„é»˜è®¤å€¼â€˜è°ƒå’Œâ€™æˆå­—ç¬¦ä¸²è¾“å‡ºï¼Œå°±åƒæˆ‘é…è¯æ—¶è°ƒå’Œä¸åŒè¯æï¼Œè®©å®ƒä»¬å‘æŒ¥åˆåŠ›ã€‚â€</p>
<p>ä¸ºäº†è®©ä¾¯ä½©å½»åº•æ˜ç™½ï¼Œå¥¹åˆå†™äº†ä¸ª â€œç”¨æˆ·ä¿¡æ¯æ±‡æ€»â€ çš„å®æˆ˜ä¾‹å­ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®ï¼šnameæ˜¯String?ï¼Œageæ˜¯Int?ï¼Œscoreæ˜¯Double?</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>?
    <span class="hljs-keyword">var</span> age: <span class="hljs-type">Int</span>?
    <span class="hljs-keyword">var</span> score: <span class="hljs-type">Double</span>?
}

<span class="hljs-keyword">let</span> user <span class="hljs-operator">=</span> <span class="hljs-type">User</span>(name: <span class="hljs-literal">nil</span>, age: <span class="hljs-literal">nil</span>, score: <span class="hljs-number">89.5</span>)

<span class="hljs-comment">// ç”¨SE-0477ç»Ÿä¸€å¤„ç†æ‰€æœ‰å¯é€‰å€¼çš„é»˜è®¤å€¼ï¼Œç±»å‹äº’ä¸å¹²æ‰°</span>
<span class="hljs-keyword">let</span> userInfo <span class="hljs-operator">=</span> <span class="hljs-string">"""
ç”¨æˆ·æ˜µç§°ï¼š<span class="hljs-subst">\(user.name, <span class="hljs-keyword">default</span>: <span class="hljs-string">"åŒ¿åç”¨æˆ·"</span>)</span>
ç”¨æˆ·å¹´é¾„ï¼š<span class="hljs-subst">\(user.age, <span class="hljs-keyword">default</span>: <span class="hljs-string">"æœªå¡«å†™"</span>)</span>
ç”¨æˆ·åˆ†æ•°ï¼š<span class="hljs-subst">\(user.score, <span class="hljs-keyword">default</span>: <span class="hljs-string">"æš‚æ— æ•°æ®"</span>)</span>
"""</span>

<span class="hljs-built_in">print</span>(userInfo)
<span class="hljs-comment">/* è¾“å‡ºç»“æœï¼š
ç”¨æˆ·æ˜µç§°ï¼šåŒ¿åç”¨æˆ·
ç”¨æˆ·å¹´é¾„ï¼šæœªå¡«å†™
ç”¨æˆ·åˆ†æ•°ï¼š89.5
*/</span>
</code></pre>
<p>â€œä½ çœ‹ï¼Œä¸ç®¡æ˜¯ Stringã€Int è¿˜æ˜¯ Double çš„å¯é€‰å€¼ï¼Œéƒ½èƒ½æŒ‰éœ€æ±‚ç»™ä¸åŒç±»å‹çš„é»˜è®¤å€¼ï¼Œå†ä¹Ÿä¸ç”¨â€˜æ‹†ä¸œè¡¥è¥¿â€™äº†ã€‚â€ ç¨‹çµç´ è¯´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cb570487b6e4580bb15125212f48abd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678794&amp;x-signature=vQeTDhwdYpWbfPvmI5URNY%2FPYvY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©è¿è¿ç‚¹å¤´ï¼Œè¾¹è®°ç¬”è®°è¾¹å˜€å’•ï¼šâ€œè¿™æ‹›æ¯”æˆ‘ä¹‹å‰â€˜å…ˆåˆ¤æ–­ nilï¼Œå†è½¬ç±»å‹ï¼Œå†æ‹¼æ¥â€™çš„ç¬¨åŠæ³•ï¼Œæ•ˆç‡é«˜äº†ä¸æ­¢ä¸€ç‚¹ï¼Œè¿˜èƒ½å°‘å†™å¥½å‡ è¡Œä»£ç  â€”â€” æ¯•ç«Ÿå†™ä»£ç å°±åƒåƒåŒ…å­ï¼Œèƒ½ä¸€å£è§£å†³çš„ï¼Œç»ä¸å’¬ç¬¬äºŒå£ï¼â€</p>
<hr/>
<h2 data-id="heading-4">ğŸš¨ 4. ç»†èŠ‚æé†’ï¼šåˆ«è¸© â€œé»˜è®¤å€¼ç±»å‹â€ çš„å°å‘</h2>
<p>ç¨‹çµç´ çªç„¶è¯é”‹ä¸€è½¬ï¼šâ€œä¸è¿‡æœ‰ä¸ªå°ç»†èŠ‚è¦æ³¨æ„ â€”â€” é»˜è®¤å€¼çš„ç±»å‹å¾—æ˜¯â€˜èƒ½è½¬æˆå­—ç¬¦ä¸²â€™çš„ï¼Œæ¯”å¦‚æ•°å­—ã€å¸ƒå°”å€¼ã€å­—ç¬¦ä¸²éƒ½è¡Œï¼Œä½†è¦æ˜¯ä¼ ä¸ª<code>UIView?</code>è¿™ç§â€˜ä¸å¥½è½¬å­—ç¬¦ä¸²â€™çš„ç±»å‹ï¼Œè¿˜æ˜¯ä¼šæŠ¥é”™ã€‚â€</p>
<p>å¥¹ä¸¾äº†ä¸ªåä¾‹ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit

<span class="hljs-keyword">var</span> view: <span class="hljs-type">UIView</span>? <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>

<span class="hljs-comment">// âŒ ç¼–è¯‘æŠ¥é”™ï¼šUIViewç±»å‹æ— æ³•ç›´æ¥è½¬æˆå­—ç¬¦ä¸²ï¼Œé»˜è®¤å€¼ä¹Ÿå¾—æ˜¯â€œå¯å­—ç¬¦ä¸²åŒ–â€çš„</span>

<span class="hljs-comment">// print("View: \(view, default: "No View")")</span>
</code></pre>
<p>â€œå“¦ï¼è¿™å°±åƒé…è¯ä¸èƒ½æ”¾â€˜ä¸èƒ½å…¥å£â€™çš„è¯æï¼Œå¯¹å§ï¼Ÿâ€ ä¾¯ä½©ç«‹é©¬ get åˆ°ï¼Œâ€œå¾—ç¡®ä¿é»˜è®¤å€¼æœ¬èº«èƒ½â€˜å˜æˆå­—ç¬¦ä¸²â€™ï¼Œä¸ç„¶ Swift ä¹Ÿâ€˜è°ƒä¸åŒ€â€™ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd54c1d7a97d4a3fb4c90dd97f09dcc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678794&amp;x-signature=8uKEbkWwOqJUnvfkotLXap%2FhGtA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç¨‹çµç´ ç¬‘ç€ç‚¹å¤´ï¼šâ€œæ­£æ˜¯è¿™ä¸ªç†ã€‚ä¸è¿‡å¤§éƒ¨åˆ†æ—¥å¸¸å¼€å‘åœºæ™¯ï¼Œæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯ã€æ—¥å¿—æ‰“å°ï¼Œå¸¸ç”¨ç±»å‹éƒ½èƒ½æ”¯æŒï¼Œè¿™æ‹›å·²ç»èƒ½è§£å†³ä¹æˆä»¥ä¸Šçš„æ’å€¼éš¾é¢˜äº†ã€‚â€</p>
<hr/>
<h2 data-id="heading-5">ğŸ”® ç»“å°¾ï¼šå¤æ‚æ’å€¼ç°æ–°ç–‘ï¼Œç§˜ç±æ®‹é¡µè—ç„æœº</h2>
<p>ä¾¯ä½©å½»åº•æŒæ¡äº† â€œè¡¥ä½ç¥æŠ€â€ï¼Œå¼€å¿ƒåœ°æŠŠå‰©ä¸‹çš„ç³–è‘«èŠ¦åƒå®Œï¼Œè¿˜æƒ³è¯•è¯•æ›´å¤æ‚çš„åœºæ™¯ â€”â€” æ¯”å¦‚åœ¨æ’å€¼é‡ŒåŠ è®¡ç®—ï¼Œåƒ<code>\(user.score.map { $0 * 10 }, default: "æš‚æ— ")</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1127128e6dd54304a8043a394f28d145~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678794&amp;x-signature=rhILGmE0PrDD5lqBSN18pS6fxhE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¯åˆšå†™å®Œï¼Œä»–åˆæ„£ä½äº†ï¼šâ€œå“ï¼Ÿè¿™é‡ŒåŠ äº†<code>map</code>å¤„ç†ï¼Œé»˜è®¤å€¼è¿˜èƒ½ç”¨å—ï¼Ÿâ€</p>
<p>ç¨‹çµç´ å‡‘è¿‡æ¥çœ‹äº†çœ‹ï¼ŒæŒ‡äº†æŒ‡ã€ŠSwift æ’å€¼ç§˜ç±ã€‹æœ€åä¸€é¡µçš„æ®‹é¡µï¼šâ€œ<strong>Add Collection conformances for enumerated()</strong>â€</p>
<p>ä¾¯ä½©ç›¯ç€æ®‹é¡µä¸Šæ¨¡ç³Šçš„å­—è¿¹ï¼Œå¥½å¥‡å¿ƒè¢«å‹¾äº†èµ·æ¥ï¼šâ€œéš¾é“è¿˜æœ‰æ›´å‰å®³çš„æ‹›å¼ï¼Ÿä¸‹æ¬¡å’±ä»¬å¯å¾—å¥½å¥½ç ”ç©¶ç ”ç©¶ï¼â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬å››ç¯‡ï¼‰ï¼šenumerated () çš„ â€œé›†åˆç¥åŠŸâ€]]></title>    <link>https://juejin.cn/post/7580374090365059110</link>    <guid>https://juejin.cn/post/7580374090365059110</guid>    <pubDate>2025-12-07T02:22:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580374090365059110" data-draft-id="7580373352420573210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬å››ç¯‡ï¼‰ï¼šenumerated () çš„ â€œé›†åˆç¥åŠŸâ€"/> <meta itemprop="keywords" content="Swift,SwiftUI,Apple"/> <meta itemprop="datePublished" content="2025-12-07T02:22:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬å››ç¯‡ï¼‰ï¼šenumerated () çš„ â€œé›†åˆç¥åŠŸâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:22:04.000Z" title="Sun Dec 07 2025 02:22:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b7daf9b325f4fe49bf37b452b76aa3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678924&amp;x-signature=ytT9mYZmkMEEaCXq26YdKygRmPQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•å­ï¼šSwiftUI åˆ—è¡¨åŠ«ï¼Œç†ŠçŒ«ä¾ ç»•è·¯æ„</h2>
<p>å§‘è‹åŸå¤–çš„ â€œç æ—åˆ«é™¢â€ é‡Œï¼Œå¤§ç†ŠçŒ«ä¾¯ä½©æ­£å¯¹ç€ SwiftUI ä»£ç æŠ“è€³æŒ è…®ï¼Œåœ†æ»šæ»šçš„èº«å­æŠŠæœ¨æ¤…å‹å¾— â€œå±å‘€â€ å“ã€‚</p>
<p>è¿™ä½è‡ªç§° â€œåˆ—è¡¨å°èƒ½æ‰‹ï¼Œå¤´äº®ä¹Ÿä¸ç§ƒâ€ çš„ Swift ç©å®¶ï¼Œæ­¤åˆ»è¢«ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„éœ€æ±‚éš¾ä½ â€”â€” ç»™<code>List</code>é‡Œçš„æ¯ä¸ªåå­—åŠ ä¸ªåºå·ï¼Œæ¯”å¦‚ â€œUser 1: Bernardâ€ã€‚</p>
<p>â€œä¸å°±æ˜¯ç”¨<code>enumerated()</code>æ‹¿ç´¢å¼•å˜›ï¼Œæ€ä¹ˆå°±æŠ¥é”™äº†ï¼Ÿâ€ ä¾¯ä½©æˆ³ç€å±å¹•ä¸Šçš„çº¢è‰²è­¦å‘Šï¼Œå˜´é‡Œè¿˜å¼ç€åŠå—è±†æ²™åŒ…ï¼Œâ€œè¯´ä»€ä¹ˆâ€˜<strong>è¿”å›ç±»å‹ä¸éµå¾ª Collection</strong>â€™ï¼Œéš¾ä¸æˆè¦æˆ‘å…ˆè½¬æˆæ•°ç»„ï¼Œå†å¡ç»™ Listï¼Ÿæˆ‘è·¯ç—´æ‰¾åŒ…å­é“ºéƒ½ä¸ç»•è¿™ä¹ˆå¤§ä¸ªåœˆï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b7e3ed9e45f470e9de33340efc92b46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678924&amp;x-signature=%2F9ZR5gt02huW2LOrlrbXlLdqFNE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åŸæ¥ä»¥å‰<code>enumerated()</code>è¿”å›çš„æ˜¯<code>EnumeratedSequence</code>ï¼Œè¿™ç©æ„å„¿æ²¡åŠ å…¥ â€œé›†åˆé—¨æ´¾â€ï¼ˆä¸éµå¾ª<code>Collection</code>åè®®ï¼‰ï¼ŒSwiftUI çš„<code>List</code>å’Œ<code>ForEach</code>æ ¹æœ¬ä¸è®¤ã€‚</p>
<p>åœ¨æœ¬ç¯‡æ­¦æ—å¥‡é—»ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>å¼•å­ï¼šSwiftUI åˆ—è¡¨åŠ«ï¼Œç†ŠçŒ«ä¾ ç»•è·¯æ„</li>
<li>ğŸ¯ 1. æ–°æ‹›æ­ç§˜ï¼šenumerated () çš„ â€œé—¨æ´¾è®¤è¯â€</li>
<li>âœ¨ 2. å®æˆ˜çˆ½ç‚¹ï¼šSwiftUI é‡Œçš„ â€œä¸€æ­¥åˆ°ä½â€</li>
<li>âš¡ 3. æ€§èƒ½è½»åŠŸï¼šå¸¸æ•°æ—¶é—´çš„ â€œç¬ç§»æœ¯â€</li>
<li>ğŸ® 4. æ›´å¤šç©æ³•ï¼šCollection çš„ â€œå…¨å®¶æ¡¶â€</li>
<li>ğŸ”® ç»“å°¾ï¼šç´¢å¼•é™·é˜±ç°ç«¯å€ªï¼Œä¸‹æ¬¡æ­ç§˜å¾…ä½•æ—¶</li>
</ul>
<p>ä¾¯ä½©æ­£å‡†å¤‡å†™<code>names.enumerated().map { $0 }</code>è¿™ç§ â€œç¬¨åŠæ³•â€ æ—¶ï¼Œé™¢é—¨å¤–ä¼ æ¥è½»æŸ”çš„è„šæ­¥å£° â€”â€” åªè§ç‹è¯­å«£ä¸€èº«ç´ ç™½è¡£è£™ï¼Œæ‰‹é‡Œæ§ç€æœ¬ã€ŠSwift é›†åˆç§˜ç±ã€‹ï¼Œç¬‘ç›ˆç›ˆåœ°èµ°è¿›æ¥ï¼šâ€œä¾¯å¤§ä¾ è«æ€¥ï¼ŒSE-0459 çš„â€˜é›†åˆç¥åŠŸâ€™ï¼Œæ­£å¥½èƒ½è§£ä½ è¿™â€˜ç»•è·¯ä¹‹è‹¦â€™ï¼ˆ<strong>Add Collection conformances for enumerated()</strong>ï¼‰ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab92b039b15d437683d95c2cb0bc10a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678924&amp;x-signature=DP8JQqo2k3UPfV79c%2FZLDpWybLw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ¯ 1. æ–°æ‹›æ­ç§˜ï¼šenumerated () çš„ â€œé—¨æ´¾è®¤è¯â€</h2>
<p>ç‹è¯­å«£ç¿»å¼€ç§˜ç±ï¼ŒæŒ‡ç€ç¬¬ä¸€é¡µçš„é»‘ä½“å­—ï¼šâ€œSE-0459 è¿™é—¨åŠŸæ³•ï¼Œæ ¸å¿ƒå°±ä¸€ä»¶äº‹ â€”â€” ç»™<code>enumerated()</code>çš„è¿”å›å€¼â€˜é¢å‘é—¨æ´¾ä»¤ç‰Œâ€™ï¼Œè®©å®ƒæ­£å¼éµå¾ª <code>Collection</code>åè®® ã€‚â€</p>
<p>ä¾¯ä½©å‡‘è¿‡å»ï¼Œåªè§ç§˜ç±ä¸Šå†™ç€ï¼š<code>EnumeratedSequence</code>ä»æ­¤æ‹¥æœ‰<code>Collection</code>çš„æ‰€æœ‰ â€œç¥é€šâ€â€”â€” èƒ½æŸ¥<code>count</code>ã€èƒ½å–ç´¢å¼•ã€èƒ½æ”¯æŒ<code>prefix</code>/<code>suffix</code>ç­‰æ“ä½œï¼Œå†ä¹Ÿä¸æ˜¯ä»¥å‰é‚£ â€œæ— é—¨æ— æ´¾â€ çš„æ•£ä¿®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d85f93d705824303a92ae2eeab0a588e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678924&amp;x-signature=nL4%2FatehkRPqp6rK0UotQewtoVM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œè¿™â€˜é—¨æ´¾è®¤è¯â€™æœ‰å•¥ç”¨å•Šï¼Ÿâ€ ä¾¯ä½©å’½ä¸‹è±†æ²™åŒ…ï¼ŒæŠ¹äº†æŠ¹å˜´ï¼Œâ€œä¸å°±æ˜¯å¤šäº†å‡ ä¸ªæ–¹æ³•å—ï¼Ÿâ€</p>
<p>ç‹è¯­å«£ç¬‘ç€æ‘‡å¤´ï¼šâ€œç”¨å¤„å¤§ç€å‘¢ï¼ä½ åˆšæ‰æ„çš„<code>List</code>ç”¨ä¸äº†<code>enumerated()</code>ï¼Œå°±æ˜¯å› ä¸º<code>List</code>åªè®¤â€˜é›†åˆé—¨æ´¾â€™çš„å¼Ÿå­ã€‚ç°åœ¨<code>enumerated()</code>æœ‰äº†è®¤è¯ï¼Œå°±èƒ½ç›´æ¥â€˜è¿›é—¨â€™äº†ã€‚â€</p>
<hr/>
<h2 data-id="heading-2">âœ¨ 2. å®æˆ˜çˆ½ç‚¹ï¼šSwiftUI é‡Œçš„ â€œä¸€æ­¥åˆ°ä½â€</h2>
<p>ç‹è¯­å«£æ‹¿èµ·ç¬”ï¼Œåœ¨çº¸ä¸Šå†™ä¸‹ä¾¯ä½©æƒ³è¦çš„ä»£ç ï¼Œçœ‹å¾—ä»–çœ¼ç›éƒ½ç›´äº†ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ContentView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-keyword">var</span> names <span class="hljs-operator">=</span> [<span class="hljs-string">"Bernard"</span>, <span class="hljs-string">"Laverne"</span>, <span class="hljs-string">"Hoagie"</span>] <span class="hljs-comment">// è¦æ˜¾ç¤ºçš„åå­—åˆ—è¡¨</span>

    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-comment">// âœ… Swift 6.2+ï¼šenumerated()è¿”å›å€¼éµå¾ªCollectionï¼Œå¯ç›´æ¥ä¼ List</span>
        <span class="hljs-type">List</span>(names.enumerated(), id: \.offset) { values <span class="hljs-keyword">in</span>
            <span class="hljs-comment">// valuesæ˜¯( offset: ç´¢å¼•, element: å…ƒç´  )çš„å…ƒç»„</span>
            <span class="hljs-type">Text</span>(<span class="hljs-string">"User <span class="hljs-subst">\(values.offset <span class="hljs-operator">+</span> <span class="hljs-number">1</span>)</span>: <span class="hljs-subst">\(values.element)</span>"</span>)
        }
    }
}
</code></pre>
<p>â€œè¿™å°±å®Œäº†ï¼Ÿä¸ç”¨è½¬æ•°ç»„äº†ï¼Ÿâ€ ä¾¯ä½©èµ¶ç´§åœ¨ç”µè„‘ä¸Šè¯•äº†è¯•ï¼Œæœç„¶ç¼–è¯‘é€šè¿‡ï¼Œè¿è¡Œååˆ—è¡¨é‡Œæ•´æ•´é½é½æ˜¾ç¤ºç€å¸¦åºå·çš„åå­—ï¼Œæ¯”ä»–ä¹‹å‰æƒ³çš„ â€œç»•è·¯å†™æ³•â€ çœäº‹å¤ªå¤šã€‚</p>
<p>ç‹è¯­å«£è¡¥å……é“ï¼šâ€œä»¥å‰ä½ å¾—å†™<code>List(names.enumerated().map { $0 }, id: \.offset)</code>ï¼Œå¤šäº†ä¸ª<code>map</code>è½¬æ•°ç»„çš„æ­¥éª¤ï¼Œå°±åƒå»å®¢æ ˆåƒé¥­ï¼Œæ˜æ˜èƒ½ç›´æ¥è¿›é—¨ï¼Œåè¦ç»•å»åé™¢ç¿»çª—æˆ·ã€‚ç°åœ¨æœ‰äº†â€˜é›†åˆè®¤è¯â€™ï¼Œç›´æ¥â€˜æ­£é—¨å…¥å†…â€™ï¼Œäº‹åŠåŠŸå€ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8046055e569741b9b7b0811de15b10f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678924&amp;x-signature=98%2F6C%2FCq5ssKH61NCfb83Oe9tbU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©æ‹ç€å¤§è…¿ï¼šâ€œå¯ä¸æ˜¯å˜›ï¼æˆ‘è¿™å¤´ç»å¯¹ä¸ç§ƒï¼ŒçŠ¯ä¸ç€ä¸ºè¿™ç‚¹ä»£ç æ„æ‰æ¯› â€”â€” æœ‰è¿™åŠŸå¤«ï¼Œæˆ‘è¿˜èƒ½å¤šåƒä¸¤ä¸ªè±†æ²™åŒ…å‘¢ï¼â€</p>
<hr/>
<h2 data-id="heading-3">âš¡ 3. æ€§èƒ½è½»åŠŸï¼šå¸¸æ•°æ—¶é—´çš„ â€œç¬ç§»æœ¯â€</h2>
<p>â€œè¿™â€˜é›†åˆç¥åŠŸâ€™å¯ä¸åªè§£å†³â€˜è¿›é—¨â€™é—®é¢˜ï¼Œè¿˜æœ‰â€˜è½»åŠŸåŠ æŒâ€™å‘¢ã€‚â€ ç‹è¯­å«£ç¿»åˆ°ç§˜ç±çš„ â€œæ€§èƒ½ç¯‡â€ï¼ŒæŒ‡ç€ä¸€è¡Œä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ç”Ÿæˆ1000åˆ°1999çš„èŒƒå›´ï¼ŒåŠ ä¸Šç´¢å¼•ï¼Œå†è·³è¿‡å‰500ä¸ªå…ƒç´ </span>

<span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> (<span class="hljs-number">1000</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">2000</span>).enumerated().dropFirst(<span class="hljs-number">500</span>)
</code></pre>
<p>â€œä»¥å‰<code>dropFirst(500)</code>å¾—â€˜ä¸€æ­¥ä¸€æ­¥èµ°â€™â€”â€” ä»ç¬¬ 1 ä¸ªå…ƒç´ æŸ¥åˆ°ç¬¬ 501 ä¸ªï¼Œè€—æ—¶è·Ÿç€å…ƒç´ æ•°é‡æ¶¨ï¼ˆçº¿æ€§æ—¶é—´ï¼‰ï¼›ç°åœ¨æœ‰äº†<code>Collection</code>è®¤è¯ï¼Œèƒ½ç›´æ¥â€˜ç¬ç§»â€™åˆ°ç¬¬ 501 ä¸ªå…ƒç´ ï¼Œè€—æ—¶è·Ÿå…ƒç´ æ•°é‡æ²¡å…³ç³»ï¼ˆ<strong>å¸¸æ•°æ—¶é—´ï¼Œconstant-time operation</strong>ï¼‰ã€‚â€</p>
<p>ä¾¯ä½©å¬å¾—å’‹èˆŒï¼šâ€œè¿™å°±åƒæ®µèª‰çš„å‡Œæ³¢å¾®æ­¥å•Šï¼ä»¥å‰èµ° 500 æ­¥è¦åŠæŸ±é¦™ï¼Œç°åœ¨ä¸€æ­¥å°±åˆ°ï¼Œå¤ªçˆ½äº†ï¼è¦æ˜¯å¤„ç†ä¸Šä¸‡æ¡æ•°æ®ï¼Œè¿™å·®è·ä¸å¾—ä¸Šå¤©ï¼Ÿâ€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89a517f6503643d2bc6be3f87f763a88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678924&amp;x-signature=klBMj6s0CshTiBGRKqOwty29akM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œæ­£æ˜¯å¦‚æ­¤ã€‚â€ ç‹è¯­å«£ç‚¹å¤´ï¼Œâ€œåƒå¤„ç†æ—¥å¿—ã€æ•°æ®åˆ†é¡µè¿™ç§åœºæ™¯ï¼Œæ€§èƒ½æå‡èƒ½è‚‰çœ¼å¯è§ â€”â€” æ¯•ç«Ÿè°ä¹Ÿä¸æƒ³ç­‰ä»£ç è·‘åŠå¤©ï¼Œè€½è¯¯åƒåŒ…å­çš„æ—¶é—´ã€‚â€</p>
<hr/>
<h2 data-id="heading-4">ğŸ® 4. æ›´å¤šç©æ³•ï¼šCollection çš„ â€œå…¨å®¶æ¡¶â€</h2>
<p>ä¾¯ä½©æ¥äº†å…´è‡´ï¼Œè¿½é—®ï¼šâ€œé™¤äº†<code>dropFirst</code>ï¼Œè¿˜æœ‰å•¥å¥½ç©çš„ï¼Ÿâ€</p>
<p>ç‹è¯­å«£æ‹¿èµ·ç¬”ï¼Œåˆå†™äº†å‡ ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> fruits <span class="hljs-operator">=</span> \[<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"orange"</span>, <span class="hljs-string">"grape"</span>]

<span class="hljs-keyword">let</span> enumeratedFruits <span class="hljs-operator">=</span> fruits.enumerated() <span class="hljs-comment">// æœ‰äº†Collectionè®¤è¯çš„enumeratedåºåˆ—</span>

<span class="hljs-comment">// 1. å–å‰2ä¸ªå…ƒç´ ï¼š(0, "apple"), (1, "banana")</span>

<span class="hljs-keyword">let</span> firstTwo <span class="hljs-operator">=</span> enumeratedFruits.prefix(<span class="hljs-number">2</span>)

<span class="hljs-comment">// 2. å–æœ€å1ä¸ªå…ƒç´ ï¼š(3, "grape")</span>

<span class="hljs-keyword">let</span> lastOne <span class="hljs-operator">=</span> enumeratedFruits.suffix(<span class="hljs-number">1</span>)

<span class="hljs-comment">// 3. æŸ¥æ˜¯å¦åŒ…å«ç´¢å¼•ä¸º2çš„å…ƒç´ ï¼ˆoffset == 2ï¼‰</span>

<span class="hljs-keyword">let</span> hasIndex2 <span class="hljs-operator">=</span> enumeratedFruits.contains { \<span class="hljs-variable">$0</span>.offset <span class="hljs-operator">==</span> <span class="hljs-number">2</span> }
</code></pre>
<p>â€œè¿™äº›éƒ½æ˜¯<code>Collection</code>åè®®çš„â€˜åŸºæœ¬åŠŸâ€™ï¼Œä»¥å‰<code>enumerated()</code>æƒ³éƒ½åˆ«æƒ³ã€‚â€ ç‹è¯­å«£è¯´ï¼Œâ€œæ¯”å¦‚ä½ åšæ°´æœè´­ç‰©è½¦ï¼Œæƒ³æ˜¾ç¤ºå‰ä¸¤ä¸ªåŠ â€˜æ–°å“â€™æ ‡ç­¾ï¼Œç›´æ¥ç”¨<code>prefix(2)</code>å°±è¡Œï¼Œä¸ç”¨å†è‡ªå·±å†™å¾ªç¯åˆ¤æ–­ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9212bc95fe2d4c3aa13194ec08bb56e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678924&amp;x-signature=0muK0nC9l3P4LQb4byJO5ysJZ04%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©è¾¹è®°è¾¹ç¬‘ï¼šâ€œè¿™å“ªæ˜¯â€˜é›†åˆç¥åŠŸâ€™ï¼Œç®€ç›´æ˜¯â€˜<strong>æ‡’äººç¦éŸ³</strong>â€™ï¼ä»¥åå†™ä»£ç èƒ½çœä¸å°‘äº‹ï¼Œå¤šå‡ºæ¥çš„æ—¶é—´è¿˜èƒ½ç ”ç©¶æ–°å£å‘³çš„åŒ…å­ã€‚â€</p>
<hr/>
<h2 data-id="heading-5">ğŸ”® ç»“å°¾ï¼šç´¢å¼•é™·é˜±ç°ç«¯å€ªï¼Œä¸‹æ¬¡æ­ç§˜å¾…ä½•æ—¶</h2>
<p>ä¾¯ä½©å…´è‡´å‹ƒå‹ƒåœ°æµ‹è¯•<code>(1000..&lt;2000).enumerated().dropFirst(500)</code>ï¼Œå‘ç°è¿è¡Œé€Ÿåº¦å¿«å¾—æƒŠäººï¼Œå¿ä¸ä½ç«–èµ·å¤§æ‹‡æŒ‡ï¼šâ€œSE-0459 è¿™æ‹›å¤ªå®ç”¨äº†ï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b211dc02b5a496db30beda42f7f4aa3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678924&amp;x-signature=%2BkVvk9yZz1yWae%2FMAgC876CVycw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç‹è¯­å«£å´çªç„¶è¯é”‹ä¸€è½¬ï¼šâ€œä¸è¿‡ä¾¯å¤§ä¾ ï¼Œè¿™â€˜é›†åˆç¥åŠŸâ€™è¿˜æœ‰ä¸ªéšè—ç»†èŠ‚ â€”â€” è¦æ˜¯ç”¨<code>filter</code>è¿‡æ»¤å…ƒç´ ï¼Œå‰©ä¸‹çš„<code>offset</code>è¿˜æ˜¯åŸæ¥çš„ç´¢å¼•ï¼Œä¼šä¸ä¼šè·Ÿä½ é¢„æœŸçš„â€˜è¿ç»­åºå·â€™å¯¹ä¸ä¸Šï¼Ÿâ€</p>
<p>ä¾¯ä½©ä¸€æ„£ï¼šâ€œå•Šï¼Ÿæ¯”å¦‚è¿‡æ»¤æ‰ç¬¬ 2 ä¸ªå…ƒç´ ï¼Œå‰©ä¸‹çš„ç´¢å¼•æ˜¯ 0ã€1ã€3ï¼Œæ˜¾ç¤ºçš„æ—¶å€™å°±ä¼šè·³å·ï¼Ÿâ€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b31a460751964f7fac9541c38da9a7c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678924&amp;x-signature=eT1Ix3GqEAl2TILQXh7%2BTlpllp0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œæ­£æ˜¯å¦‚æ­¤ã€‚â€ ç‹è¯­å«£åˆä¸Šç§˜ç±ï¼Œâ€œè¿™â€˜ç´¢å¼•æ–­æ¡£â€™çš„é™·é˜±ï¼Œè¿˜æœ‰å¯¹åº”çš„è§£å†³åŠæ³•ï¼Œå’±ä»¬ä¸‹æ¬¡å†ç»†èŠ â€”â€” å¯¹äº†ï¼Œå¬è¯´åŸè¥¿æ–°å¼€äº†å®¶åå« <strong>â€œMethod and Initializer Key Pathsâ€</strong> çš„è±†æ²™åŒ…é“ºï¼Œè¦ä¸è¦ä¸€èµ·å»å°å°ï¼Ÿâ€</p>
<p>ä¾¯ä½©ä¸€å¬ â€œè±†æ²™åŒ…â€ï¼Œçœ¼ç›ç«‹é©¬äº®äº†ï¼šâ€œèµ°ï¼åƒåŒ…å­å»...ç­‰ç­‰ï¼Œè¿™åŒ…å­é“ºçš„åå­—æ€ä¹ˆå¦‚æ­¤å¤æ€ªå•Šï¼Ÿâ€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c22436ead3574e1f8f5d5f1234c7742b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678924&amp;x-signature=g74MYsBsfvpP0Z1BVFAkZMPf%2Fn4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ¬²çŸ¥è¿™åŒ…å­é“ºé‡Œåˆ°åº•æœ‰ä½•ç„æœºï¼Œå„ä½å®å­ä»¬ä¸”å¬ä¸‹å›åˆ†è§£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šåƒç½‘æ–‡æŠ•ç¨¿+AIæ¼«å‰§ç‰ˆæƒï¼æˆ‘ç”¨ n8n+é£ä¹¦æ­äº†ä¸ªâ€œä¸‡å­—çˆ†æ¬¾å°è¯´æµæ°´çº¿â€]]></title>    <link>https://juejin.cn/post/7580378958072610826</link>    <guid>https://juejin.cn/post/7580378958072610826</guid>    <pubDate>2025-12-07T02:21:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580378958072610826" data-draft-id="7580329353353363502" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šåƒç½‘æ–‡æŠ•ç¨¿+AIæ¼«å‰§ç‰ˆæƒï¼æˆ‘ç”¨ n8n+é£ä¹¦æ­äº†ä¸ªâ€œä¸‡å­—çˆ†æ¬¾å°è¯´æµæ°´çº¿â€"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Agent,AIGC"/> <meta itemprop="datePublished" content="2025-12-07T02:21:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åç«¯å°è‚¥è‚ "/> <meta itemprop="url" content="https://juejin.cn/user/2966945320667536"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šåƒç½‘æ–‡æŠ•ç¨¿+AIæ¼«å‰§ç‰ˆæƒï¼æˆ‘ç”¨ n8n+é£ä¹¦æ­äº†ä¸ªâ€œä¸‡å­—çˆ†æ¬¾å°è¯´æµæ°´çº¿â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2966945320667536/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åç«¯å°è‚¥è‚ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:21:39.000Z" title="Sun Dec 07 2025 02:21:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°è‚¥è‚ ï¼ä»Šå¤©æˆ‘ä»¬å°†ç¡¬æ ¸è”åŠ¨ n8n +</strong> <strong>é£ä¹¦</strong> <strong>ï¼Œæ‰“é€ ä¸€å¥—å…¨è‡ªåŠ¨çš„ä¸‡å­—çˆ†æ¬¾å°è¯´ç”Ÿæˆ</strong> <strong>å·¥ä½œæµ</strong> <strong>ã€‚ä»ä¸€ä¸ªæ ‡é¢˜åˆ°ä¸‡å­—å°è¯´ä¸€é”®ç›´è¾¾é£ä¹¦ï¼Œå…¨ç¨‹ä¿å§†çº§æ•™ç¨‹ï¼Œå¿«æ¥ç ä½è·Ÿç»ƒï¼Œæ­å»ºå±äºä½ çš„æ— é™åŸåˆ›å°è¯´æµæ°´çº¿å§~</strong></p>
<h2 data-id="heading-0">1. å‰è¨€</h2>
<p><strong>è¾“å…¥ä¸€ä¸ªæ ‡é¢˜ï¼Œè‡ªåŠ¨ç”Ÿæˆä»»æ„é¢†åŸŸä¸‡å­—çˆ†æ¬¾çŸ­ç¯‡å°è¯´ï¼Œè¿™å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆæ¢¦å¹»ï¼Ÿ</strong></p>
<p>æœ€è¿‘åœ¨å¸¦è¡ŒåŠ¨å®¶ç¤¾ç¾¤åš AI æ¼«å‰§æ—¶ï¼Œç‰ˆæƒé—®é¢˜ä¸€ç›´è®©æˆ‘ä»¬å¾ˆå¤´ç–¼ã€‚ä¸ºäº†å½»åº•è§£å†³æ¼«å‰§çš„<strong>å‰§æœ¬è’</strong>ï¼Œä¹Ÿä¸ºäº†æ»¡è¶³å¤§å®¶åœ¨çŸ¥ä¹ã€ç•ªèŒ„ç­‰å¹³å°æŠ•ç¨¿å†™æ–‡çš„åˆšéœ€ï¼Œæˆ‘ä¸“é—¨å¼€å‘äº†ä¸€å¥— <strong>n8n +</strong> <strong>é£ä¹¦</strong> <strong>+ AI Agent</strong> çš„è¶…çº§å·¥ä½œæµã€‚</p>
<p><strong>æˆ‘å·²ç»æµ‹è¯•äº†å‡ å¤©ï¼Œç”Ÿæˆçš„å°è¯´é€»è¾‘åœ¨çº¿ã€æƒ…èŠ‚ç´§å‡‘ï¼Œç¨ä½œæ”¹åŠ¨å°±èƒ½ç›´æ¥ä½œä¸º AI æ¼«å‰§çš„å®Œç¾å‰§æœ¬ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e0b9c8fd00e4c91a00cefd83b171e49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=gDna8Ov8judBKrNfNwIlnoqub38%3D" alt="" loading="lazy"/></p>
<p>ä»Šå¤©å°±æŠŠè¿™å¥—<strong>ç‹ç‚¸</strong> <strong>å·¥ä½œæµ</strong>æ‹†è§£ç»™å¤§å®¶ã€‚å­¦ä¼šè¿™ä¸€æ‹›ï¼Œä½ ä¸ä»…èƒ½æ‹¥æœ‰æ— é™çš„åŸåˆ›å°è¯´åº“ï¼Œæ›´ä¸ºæ¥ä¸‹æ¥çš„ AI æ¼«å‰§åˆ¶ä½œæ‰“ä¸‹äº†æœ€åšå®çš„åŸºç¡€ã€‚ä¸‹é¢æ­£å¼å¼€å§‹æ•™ç¨‹ï¼Œå·¥ä½œæµä¸€å…±åˆ†ä¸ºä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5ec67efc31b4cafabfe41d9aa7e0831~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=KbdvrMF57wUXUFsV1wtTcAvBzL8%3D" alt="" loading="lazy"/></p>
<p>ç¬¬ä¸€ä¸ªéƒ¨åˆ†æ˜¯å°†æœ¬åœ°å·²ç»æ”¶é›†åˆ°çš„çˆ†æ¬¾çŸ­ç¯‡å°è¯´å†™å…¥åˆ°é£ä¹¦å¤šç»´è¡¨æ ¼ä½œä¸ºå°è¯´å†™ä½œç´ æåº“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93908007e35f4fe1b7bc3c2566006af5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=qEyEFrZHV36m%2BaMWQZtRfLjvzJQ%3D" alt="" loading="lazy"/></p>
<p>ç¬¬äºŒä¸ªéƒ¨åˆ†æ˜¯è¯»å–<strong>é£ä¹¦</strong> <strong>è¡¨æ ¼ç´ æåº“å½“ä¸­çš„å†…å®¹</strong>ç»“åˆ<strong>ç”¨æˆ·æä¾›çš„å°è¯´ä¸»é¢˜</strong>ç”Ÿæˆä¸‡å­—çŸ­ç¯‡å°è¯´å‘é€åˆ°é‚®ç®±/é£ä¹¦ã€‚å†™å…¥qqé‚®ç®±çš„å·¥ä½œæµè®¾è®¡çš„åˆè¡·åªæ˜¯ä¸ºäº†æ–¹ä¾¿å®¡é˜…ï¼Œå†™ä¸€ç‰ˆæœ¬å‡ºæ¥å¯ä»¥å‘ç»™äº²æœ‹å¥½å‹çœ‹çœ‹ï¼Œåå“æ¯”è¾ƒå¥½æˆ‘ä»¬å†å†™é£ä¹¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6161a1ec3b541228bd9e5f16662c85f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=iixraq92CQKoic6u9wNIYrU2JRE%3D" alt="" loading="lazy"/></p>
<p>å†™å…¥é£ä¹¦å·¥ä½œæµå¯ä»¥å°†å°è¯´<strong>åˆ†ç« èŠ‚å†™å…¥åˆ°é£ä¹¦è¡¨æ ¼</strong>ï¼Œè¿™ä¸ªå·¥ä½œæµä¹Ÿæ¯”è¾ƒé€‚é…æˆ‘ä»¬å®é™…åº”ç”¨ç”Ÿäº§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cc5116369ad4f36824cdd5b47d133d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=pB1k0nYq09t7jRwpF1iHUsqjMIw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2. å·¥ä½œæµæ­å»º</h2>
<h3 data-id="heading-2">2.1 è¯»å–æœ¬åœ°å°è¯´ç´ æåˆ°é£ä¹¦è¡¨æ ¼</h3>
<p>å®Œæ•´å·¥ä½œæµå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86c1d63d49bf4bfdaa36af8a6207f43a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=SHmYulfKnQFRejcqLuv73dkNcCs%3D" alt="" loading="lazy"/></p>
<p><strong>å¼€å§‹èŠ‚ç‚¹ï¼š</strong> å¼€å§‹èŠ‚ç‚¹é€‰æ‹©on chat messageï¼Œæ„ä¸ºé€šè¿‡èŠå¤©è§¦å‘å·¥ä½œæµï¼Œé€šè¿‡è¿™ä¸ªèŠ‚ç‚¹æŠŠå°è¯´æ–‡ä»¶è·¯å¾„ä¼ è¾“ç»™åç»­èŠ‚ç‚¹ã€‚</p>
<p><strong>Execute Commandï¼šå¼€å§‹èŠ‚ç‚¹</strong>å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Execute CommandèŠ‚ç‚¹ã€‚</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚ä¸‹å›¾ä¸­æ‰€ç¤ºåœ¨å‰ç½®çš„chatèŠ‚ç‚¹ä¼ å…¥äº†å‘½ä»¤ls -l "/tmp/sangshi"ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±ä¼šæ‰§è¡Œè¿™ä¸ªå‘½ä»¤å»æŸ¥çœ‹æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71997682e17d4405aa16b01dc230b95b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=tozGKUcI8%2FtI7emV6RYvfKD0Mzg%3D" alt="" loading="lazy"/></p>
<p><strong>è·å–æ–‡ä»¶è·¯å¾„ï¼ˆä»£ç ï¼‰ï¼šExecute CommandèŠ‚ç‚¹</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Code in</strong> <strong>JavaScript</strong> <strong>èŠ‚ç‚¹</strong>ã€‚è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯ç»“åˆä»£ç è·å–æ¯ä¸ªå°è¯´æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f18c556d943a40c4aa981a8d2a5120fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=KnF%2FUd30yLnRDRSVn3wbUFfD6yQ%3D" alt="" loading="lazy"/></p>
<p><strong>è¯»å–å°è¯´å†…å®¹ï¼ˆä»£ç ï¼‰ï¼šè·å–æ–‡ä»¶è·¯å¾„ï¼ˆä»£ç ï¼‰</strong> èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Code in</strong> <strong>JavaScript</strong> <strong>èŠ‚ç‚¹ã€‚</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯æ ¹æ®å‰ç½®ä»£ç èŠ‚ç‚¹ä¼ å…¥çš„æ–‡ä»¶è·¯å¾„è·å–å®Œæ•´å°è¯´å†…å®¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c39fcac6c32426792d1a8af414a7d91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=wk4dkqFFBF6MnX7ZHMKCCU2yK1M%3D" alt="" loading="lazy"/></p>
<p><strong>å°†æ•°æ®é€‚é…ä¸ºåŒ¹é…é£ä¹¦è¡¨æ ¼çš„å½¢å¼ï¼ˆä»£ç ï¼‰ï¼šè¯»å–å°è¯´å†…å®¹ï¼ˆä»£ç ï¼‰èŠ‚ç‚¹</strong>å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Code in</strong> <strong>JavaScript</strong> <strong>èŠ‚ç‚¹ã€‚</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯å°†å°è¯´æ•°æ®ä¿®æ”¹ä¸ºé€‚é…é£ä¹¦è¡¨æ ¼çš„å½¢å¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/462df9ef330c40ccb9b5abc1e1dd72ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=w97%2Fbg%2F9kbzsqz4AZVO2262hJJY%3D" alt="" loading="lazy"/></p>
<p><strong>å†™å…¥</strong> <strong>é£ä¹¦</strong> <strong>ï¼š</strong> è¿™æ˜¯n8nç¤¾åŒºèŠ‚ç‚¹ï¼Œè´Ÿè´£å†™å…¥æ•°æ®åˆ°é£ä¹¦è¡¨æ ¼ã€‚èŠ‚ç‚¹å®‰è£…å’Œé…ç½®å‚è€ƒæ–‡ç« <a href="https://link.juejin.cn?target=https%3A%2F%2Fpa23ntdf1gf.feishu.cn%2Fwiki%2FYsXgwixUni3XdGkgU1ncmWaInyb%3Ffrom%3Dfrom_copylink" target="_blank" title="https://pa23ntdf1gf.feishu.cn/wiki/YsXgwixUni3XdGkgU1ncmWaInyb?from=from_copylink" ref="nofollow noopener noreferrer"><strong>n8n+Coze+é£ä¹¦ï¼šå…¬ä¼—å·å¯¹æ ‡æ–‡ç« ä¸€é”®å½•å…¥+æ·±åº¦æ‹†è§£ï¼Œæ‰“é€ ä½ çš„ã€çˆ†æ¬¾ç´ æåº“ã€‘</strong> </a><strong>ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/031317b0e5894d49a51e14593c769735~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=OkVeKZPPQMPJP6jVpZMdEyXKi3Q%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.2. æ ¹æ®é£ä¹¦è¡¨æ ¼ä¸­çš„å°è¯´ç´ æç»“åˆç”¨æˆ·è¾“å…¥ä¸»é¢˜ç¼–å†™ä¸‡å­—çŸ­ç¯‡å°è¯´</h3>
<h3 data-id="heading-4">2.2.1 å†™å…¥é£ä¹¦</h3>
<p>å†™å…¥çŸ­ç¯‡å°è¯´åˆ°é£ä¹¦å¤šç»´è¡¨æ ¼çš„å·¥ä½œæµå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60750f8406b84fee808594e7251dd904~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=dt9yxDs%2FO8PqTx%2FBfqnL1ikJabk%3D" alt="" loading="lazy"/></p>
<p><strong>å¼€å§‹èŠ‚ç‚¹ï¼š</strong> å¼€å§‹èŠ‚ç‚¹é€‰æ‹© On form submissionï¼Œæ„ä¸ºæäº¤è¡¨å•è§¦å‘å·¥ä½œæµã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9387dd30bfe840cfaebb41f78fd6d309~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=WI%2FxWxHajj1Zs16G2sXgBt6bpho%3D" alt="" loading="lazy"/></p>
<p><strong>é£ä¹¦</strong> <strong>èŠ‚ç‚¹(æ ¹æ®é¢†åŸŸå»é£ä¹¦è¡¨æ ¼ä¸­è·å–ç´ æ):å¼€å§‹èŠ‚ç‚¹</strong>å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>æŸ¥è¯¢å¤šç»´è¡¨æ ¼èŠ‚ç‚¹</strong>ï¼ˆç¤¾åŒºèŠ‚ç‚¹ï¼‰ã€‚è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯æŸ¥è¯¢å‡ºé£ä¹¦ä¸­å­˜å‚¨çš„å°è¯´ç´ æä½œä¸ºå†™ä½œå‚è€ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b79fc24e37a4e4c8090e6b27d569563~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=rs03ffNcA8sZ9IRE3vvOezeoL%2FE%3D" alt="" loading="lazy"/></p>
<p><strong>ç¼–å†™å¤§çº²ï¼ˆAI Agentï¼‰ï¼š</strong> <strong>é£ä¹¦</strong> <strong>èŠ‚ç‚¹(æ ¹æ®é¢†åŸŸå»é£ä¹¦è¡¨æ ¼ä¸­è·å–ç´ æ)</strong> èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>AI AgentèŠ‚ç‚¹ã€‚</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯æ ¹æ®<strong>é£ä¹¦è¡¨æ ¼æå–å‡ºçš„å°è¯´ç´ æ</strong>ç»“åˆ<strong>å¼€å§‹èŠ‚ç‚¹ç”¨æˆ·è¾“å…¥çš„ä¸»é¢˜</strong>è¿›è¡Œå°è¯´å¤§çº²çš„ç¼–å†™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e70b872ebbd4896b5d3a472485be0ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=71Zw2TGBC5dryh6AdtpMZq24RHM%3D" alt="" loading="lazy"/></p>
<p><strong>Split Outï¼šç¼–å†™å¤§çº²ï¼ˆAI Agentï¼‰</strong> èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Split OutèŠ‚ç‚¹ã€‚</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯å°†å‰ç½®èŠ‚ç‚¹ç”Ÿæˆçš„ç« èŠ‚åˆ—è¡¨è¿›è¡Œæ‹†åˆ†ï¼Œæˆä¸ºå•ç‹¬çš„ç« èŠ‚å…ƒç´ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f77eb4aa0814b50b265de6d5a040b84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=oyIofk3Kh%2FxS09CaHKHB0zGL0Yk%3D" alt="" loading="lazy"/></p>
<p><strong>åœ¨å¾ªç¯ä¸­å¼€å¯ç« èŠ‚ç¼–å†™ï¼šSplit Out</strong>èŠ‚ç‚¹å‡ºæ¥åå°±è¿›å…¥äº†è¯¦ç»†ç« èŠ‚ç¼–å†™ç¯å¢ƒï¼Œä¸‹å›¾ä¸­åŸºäºå¾ªç¯ç»“åˆ<strong>AI Agent</strong>å®Œæˆäº†æ¯ä¸ªç« èŠ‚çš„ç¼–å†™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf9b0ab6d7344affb57be888537a9bdd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=tqbbgzIE3NhQgqxB%2BPvTekyG55Q%3D" alt="" loading="lazy"/></p>
<p><strong>å°†æ•°æ®æ”¹ä¸ºé€‚é…</strong> <strong>é£ä¹¦</strong> <strong>ï¼š</strong> å°è¯´ç« èŠ‚ç¼–å†™å®Œæ¯•é€€å‡ºå¾ªç¯æ—¶åæ¥<strong>Code in</strong> <strong>JavaScript</strong> <strong>èŠ‚ç‚¹ã€‚</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯å°†å‰ç½®èŠ‚ç‚¹ç”Ÿæˆçš„å°è¯´æ•°æ®ä¿®æ”¹ä¸ºé€‚é…é£ä¹¦å¤šç»´è¡¨æ ¼çš„å½¢å¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8e8762a6b9441aa888c8383b4ebce0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=ccsQMEpLxMuimIdwhuVr%2FbmCafw%3D" alt="" loading="lazy"/></p>
<p><strong>å†™å…¥</strong> <strong>é£ä¹¦</strong> <strong>ï¼š</strong> è¿™æ˜¯n8nç¤¾åŒºèŠ‚ç‚¹ï¼Œè´Ÿè´£å†™å…¥æ•°æ®åˆ°é£ä¹¦è¡¨æ ¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5157a7b377945edbb4b026726b3640d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=Z3CpKQFeTj0wuLmbG9wFpEPzWVE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">2.2.2 å†™å…¥é‚®ç®±</h3>
<p>å®Œæ•´å·¥ä½œæµå¦‚ä¸‹ï¼ŒåŸºæœ¬ä¸å†™å…¥é£ä¹¦çš„å·¥ä½œæµä¸€è‡´ï¼Œä¸åŒçš„æ˜¯æœ€åæ”¹æˆäº†å†™å…¥é‚®ä»¶ï¼Œå°±ä¸å†èµ˜è¿°äº†ï¼Œå†™å…¥é‚®ä»¶æˆ‘è¿™è¾¹ä¹Ÿæœ‰è¯¦ç»†æ•™ç¨‹ï¼Œå¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpa23ntdf1gf.feishu.cn%2Fwiki%2FIJzYwoLlmi54BFkuGGvcPhben9e%3Ffrom%3Dfrom_copylink" target="_blank" title="https://pa23ntdf1gf.feishu.cn/wiki/IJzYwoLlmi54BFkuGGvcPhben9e?from=from_copylink" ref="nofollow noopener noreferrer">å…¬ä¼—å·å¯¹æ ‡è´¦å·æ–‡ç« æ€»é”™è¿‡ï¼Ÿç”¨ WeWe-RSS+ n8nï¼Œå¯¹æ ‡æ–‡ç« å®šæ—¶åˆ°ä½ çš„é‚®ç®±ï¼ˆä¸‹ç¯‡æ•™ç¨‹ï¼‰</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/331bbc44354b45d38131e237ee5c90e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=PpEnDxnaoSSAHiq487u32LMpT3A%3D" alt="" loading="lazy"/></p>
<p>ä»¥ä¸Šå°±æ˜¯æ•´ä¸ªå·¥ä½œæµçš„å®Œæ•´æµç¨‹æ‹†è§£ï¼ŒåŠ¨æ‰‹èƒ½åŠ›å¼ºçš„è¯»è€…å¯ä»¥è·Ÿç€æ•™ç¨‹å®è·µä¸€éã€‚<strong>ä¸Šè¿°å·¥ä½œæµå·²ç»è¢«æ”¶å½•åˆ°äº†å°è‚¥è‚ è¡ŒåŠ¨å®¶ç¤¾ç¾¤ä¸­ï¼Œå¦‚æœæƒ³ç›´æ¥è·å–å·¥ä½œæµåŸä»¶ï¼Œå¯ä»¥åŠ å…¥ç¤¾ç¾¤åæˆ‘æ‹‰ä½ è¿›ç©ºé—´ç›´æ¥å­¦ä¹ ä½¿ç”¨ã€‚</strong></p>
<h2 data-id="heading-6">3. ç»“è¯­</h2>
<p>è‡³æ­¤ï¼Œè¿™å¥—<strong>ä»æ ‡é¢˜åˆ°ä¸‡å­—å°è¯´</strong>çš„ n8n è‡ªåŠ¨åŒ–å·¥ä½œæµå°±æ‹†è§£å®Œæ¯•äº†ã€‚æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ ¸å¿ƒé€»è¾‘ï¼šåˆ©ç”¨ n8n å¼ºå¤§çš„ç¼–æ’èƒ½åŠ›ï¼Œè®© AI Agent åƒä¸€ä¸ªæˆç†Ÿçš„ç½‘æ–‡ä½œè€…ä¸€æ ·ï¼Œå…ˆå­¦ä¹ çˆ†æ¬¾ç´ æï¼ˆé£ä¹¦è¡¨æ ¼ï¼‰ï¼Œå†æ ¹æ®å¤§çº²åˆ†ç« èŠ‚ç”± AI å¾ªç¯å†™ä½œï¼Œæœ€åè‡ªåŠ¨äº¤ä»˜åˆ°ä½ çš„æ‰‹ä¸­ã€‚</p>
<p><strong>å¦‚æœ¬æ¬¡åˆ†äº«å¯¹ä½ æœ‰å¸®åŠ©ï¼Œéº»çƒ¦ä¸€é”®ä¸‰è¿æ”¯æŒä¸€ä¸‹å°è‚¥è‚ ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§~</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca72bcfecb5843329ee284ea3e7d5c55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765678898&amp;x-signature=3GO9UbmD3mNeiRh6FMYksMErOgw%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬äº”ç¯‡ï¼‰ï¼šæ–¹æ³•é”®è·¯å¾„çš„ â€œé€šè„‰å¥‡åŠŸâ€]]></title>    <link>https://juejin.cn/post/7580303864605474825</link>    <guid>https://juejin.cn/post/7580303864605474825</guid>    <pubDate>2025-12-07T02:23:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580303864605474825" data-draft-id="7580374090365075494" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬äº”ç¯‡ï¼‰ï¼šæ–¹æ³•é”®è·¯å¾„çš„ â€œé€šè„‰å¥‡åŠŸâ€"/> <meta itemprop="keywords" content="Swift,Apple,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-07T02:23:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬äº”ç¯‡ï¼‰ï¼šæ–¹æ³•é”®è·¯å¾„çš„ â€œé€šè„‰å¥‡åŠŸâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:23:51.000Z" title="Sun Dec 07 2025 02:23:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45ead9fd2aca4f61807a9dfa6b698eda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679030&amp;x-signature=XwUjUaXlC97gyMkPpb5nXTRgwBo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•å­ï¼šå­—ç¬¦ä¸²è¿·è¸ªé˜µï¼Œç†ŠçŒ«ä¾ å¡å£³è—ç»é˜</h2>
<p>åµ©å±±è—ç»é˜çš„æœ¨æ¶ä¸Šï¼Œå †æ»¡äº†æ³›é»„çš„ã€ŠSwift ç§˜ç±ã€‹ã€‚</p>
<p>å¤§ç†ŠçŒ«ä¾¯ä½©è¹²åœ¨è’²å›¢ä¸Šï¼Œåœ†çˆªå­æç€åŠå—èŠéº»åŒ…ï¼Œç›¯ç€å±å¹•ä¸Šçš„ä»£ç ç›´çš±çœ‰ â€”â€” ä»–æƒ³ç»™æ•°ç»„é‡Œçš„å­—ç¬¦ä¸²éƒ½ç”¨ä¸Š<code>uppercased</code>æ–¹æ³•ï¼Œå¯<code>map(\.uppercased)</code>è·‘å‡ºæ¥çš„ä¸æ˜¯å¤§å†™å­—æ¯ï¼Œè€Œæ˜¯ä¸€ä¸²æ€ªæ¨¡æ€ªæ ·çš„ â€œå‡½æ•°åœ°å€â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b47ac716748949aaa6300b66ee986e21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679030&amp;x-signature=31kTu9o55%2FE7gqhCKYX9qlspwLY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå²‚æœ‰æ­¤ç†ï¼â€ ä¾¯ä½©æŠŠèŠéº»åŒ…å¾€å˜´é‡Œä¸€å¡ï¼Œç²‰æœ«ç°Œç°Œæ‰åœ¨é“è¢ä¸Šï¼Œâ€œå±æ€§èƒ½ç”¨<code>\.capitalized</code>ï¼Œæ–¹æ³•å°±ä¸è¡Œï¼Ÿéš¾ä¸æˆè¿™é”®è·¯å¾„æ˜¯â€˜é‡ç”·è½»å¥³â€™ï¼Œåªè®¤å±æ€§ä¸è®¤æ–¹æ³•ï¼Ÿâ€ ä»–æ‹äº†æ‹å¤´é¡¶çš„ç»’æ¯›ï¼Œåˆå¼ºè°ƒäº†ä¸€éï¼Œâ€œæˆ‘è¿™å¤´ç»å¯¹ä¸ç§ƒï¼ŒçŠ¯ä¸ç€ä¸ºè¿™ç‚¹ä»£ç æ„æ‰æ¯›ï¼â€</p>
<p>åœ¨æœ¬ç¯‡æ­¦æ—ç§˜è¾›ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>å¼•å­ï¼šå­—ç¬¦ä¸²è¿·è¸ªé˜µï¼Œç†ŠçŒ«ä¾ å¡å£³è—ç»é˜</li>
<li>ğŸ¯ 1. æ—§è¯†æ–°äº¤ï¼šé”®è·¯å¾„çš„ â€œç»è„‰æ‰©å®¹â€</li>
<li>âš¡ 2. ç¼“å…µä¹‹è®¡ï¼šæœªè°ƒç”¨å‡½æ•°çš„ â€œç•™æ‰‹æ‹›å¼â€</li>
<li>ğŸ§ 3. åŒåè¾¨æï¼šé‡è½½æ–¹æ³•çš„ â€œè®¤äº²è¯€â€</li>
<li>ğŸš¨ 4. ç¦å¿Œä¹‹æœ¯ï¼šasync/throws æ–¹æ³•çš„ â€œç¦åŒºâ€</li>
<li>ğŸ”® ç»“å°¾ï¼šåˆå§‹åŒ–å™¨çš„ç„æœºï¼Œçƒ§é¥¼é“ºçš„å¯†è¯­</li>
</ul>
<p>å°±åœ¨ä»–å‡†å¤‡å†™ä¸ªå¾ªç¯ â€œç¬¨åŠæ³•â€ æ—¶ï¼Œé˜å¤–ä¼ æ¥é“¶é“ƒèˆ¬çš„ç¬‘å£°ã€‚ä¸€è¢­çº¢è¡£çš„èµµæ•æç€é£Ÿç›’èµ°è¿›æ¥ï¼Œè…°é—´çš„å€šå¤©å‰‘è½»æ™ƒï¼Œå‰‘ç©—ä¸Šçš„çç å®å½“ä½œå“ï¼šâ€œä¾¯å¤§ä¾ åˆ«æ€¥ç€æ‹†é”®ç›˜ï¼ŒSE-0479 çš„â€˜é€šè„‰å¥‡åŠŸâ€™ï¼ˆ<strong>Method and Initializer Key Paths</strong>ï¼‰ï¼Œä¸“è§£è¿™â€˜é”®è·¯å¾„è®¤ç”Ÿâ€™çš„éš¾é¢˜å“¦ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9673c585d66c48749eeb5895721fd694~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679030&amp;x-signature=5IlhntAyCN%2BKrlBW4GlJKB7zyEw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ¯ 1. æ—§è¯†æ–°äº¤ï¼šé”®è·¯å¾„çš„ â€œç»è„‰æ‰©å®¹â€</h2>
<p>èµµæ•æ‰“å¼€é£Ÿç›’ï¼Œé‡Œé¢æ˜¯åˆšå‡ºç‚‰çš„èŒ¯è‹“é¥¼ï¼Œé¦™æ°”ç¬é—´å¼¥æ¼«å¼€æ¥ã€‚</p>
<p>å¥¹æŒ‡ç€ä¾¯ä½©çš„ä»£ç ç¬‘é“ï¼šâ€œä½ ä»¥å‰ç”¨çš„<code>\.capitalized</code>æ˜¯å±æ€§é”®è·¯å¾„ï¼Œå¥½æ¯”æ‰“é€šäº†â€˜ä»»è„‰â€™ï¼›å¦‚ä»Š SE-0479 ç»™é”®è·¯å¾„æ‰©äº†å®¹ï¼Œè¿æ–¹æ³•è¿™æ¡â€˜ç£è„‰â€™ä¹Ÿèƒ½é€šäº† â€”â€” è¿™æ‰æ˜¯çœŸæ­£çš„â€˜æ‰“é€šä»»ç£äºŒè„‰â€™å‘¢ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23a40201e86a44ae8f2b4cb050ae2103~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679030&amp;x-signature=D8DAEVpTf0nmExmtXTd7%2FNUULGw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹æ‹¿èµ·ç¬”ï¼Œå…ˆå†™ä¸‹ä¾¯ä½©ç†Ÿæ‚‰çš„å±æ€§ç”¨æ³•ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> strings <span class="hljs-operator">=</span> [<span class="hljs-string">"Hello"</span>, <span class="hljs-string">"world"</span>]

<span class="hljs-comment">// ç”¨å±æ€§é”®è·¯å¾„è®¿é—®capitalizedï¼Œæ—©å·²æ˜¯åŸºæœ¬åŠŸ</span>

<span class="hljs-keyword">let</span> capitalized <span class="hljs-operator">=</span> strings.map(\.capitalized)

<span class="hljs-built_in">print</span>(capitalized) <span class="hljs-comment">// è¾“å‡ºï¼š["Hello", "World"]</span>
</code></pre>
<p>â€œè¿™å°±åƒç‚¹ç©´ï¼Œä¸€æŒ‡å¤´æˆ³ä¸­â€˜capitalizedâ€™è¿™ä¸ªç©´ä½ï¼Œç«‹é©¬è§æ•ˆã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5664a3ee27ca4013b6c3d247326c59e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679030&amp;x-signature=Uk12s9aflqVc7cq2nAnkixwSRxU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>èµµæ•è¯é”‹ä¸€è½¬ï¼Œåœ¨ä»£ç åæ·»äº†æ–°å†™æ³•ï¼Œâ€œä½†æ–¹æ³•ä¸ä¸€æ ·ï¼Œå¾—â€˜è¿åŠŸå‘åŠ›â€™æ‰è¡Œ â€”â€” ä½ å¾—åœ¨æ–¹æ³•åååŠ æ‹¬å·ï¼Œå‘Šè¯‰ Swiftâ€˜æˆ‘è¦çœŸåŠ¨æ‰‹â€™ã€‚â€</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âœ… æ–°ç‰¹æ€§ï¼šæ–¹æ³•é”®è·¯å¾„ï¼ŒåŠ ()è¡¨ç¤ºç›´æ¥è°ƒç”¨</span>

<span class="hljs-keyword">let</span> uppercased <span class="hljs-operator">=</span> strings.map(\.uppercased())

<span class="hljs-built_in">print</span>(uppercased) <span class="hljs-comment">// è¾“å‡ºï¼š["HELLO", "WORLD"]</span>
</code></pre>
<p>ä¾¯ä½©çœ¼ç›ä¸€äº®ï¼ŒæŠ“èµ·ä¸€å—èŒ¯è‹“é¥¼ï¼šâ€œåŸæ¥å¦‚æ­¤ï¼ä»¥å‰æˆ‘ä»¥ä¸ºæ–¹æ³•å’Œå±æ€§æ˜¯â€˜åŒé—¨å¸ˆå…„å¼Ÿâ€™ï¼Œæ²¡æƒ³åˆ°æ–¹æ³•æ˜¯â€˜å¸¦è‰ºæŠ•å¸ˆâ€™ï¼Œå¾—é¢å¤–æ‰“æ‹›å‘¼æ‰è¡Œã€‚â€</p>
<hr/>
<h2 data-id="heading-2">âš¡ 2. ç¼“å…µä¹‹è®¡ï¼šæœªè°ƒç”¨å‡½æ•°çš„ â€œç•™æ‰‹æ‹›å¼â€</h2>
<p>â€œä¸è¿‡å•Šï¼Œé”®è·¯å¾„ä¹Ÿæ‡‚â€˜ç•™ä¸€æ‰‹â€™ã€‚â€ èµµæ•åˆå†™äº†æ®µä»£ç ï¼Œæ•…æ„æŠŠæ‹¬å·å»æ‰ï¼Œâ€œè¦æ˜¯ä½ æš‚æ—¶ä¸æƒ³è°ƒç”¨æ–¹æ³•ï¼Œæƒ³å…ˆâ€˜è“„åŠ¿â€™ï¼Œä¹Ÿèƒ½æŠŠå‡½æ•°æœ¬èº«å­˜èµ·æ¥ï¼Œå°±åƒæŠŠæ‹›å¼è®°åœ¨è„‘å­é‡Œï¼Œç­‰éœ€è¦æ—¶å†æ‰“å‡ºæ¥ã€‚â€</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä¸åŠ ()ï¼Œå¾—åˆ°çš„æ˜¯æœªè°ƒç”¨çš„å‡½æ•°ï¼ˆç±»ä¼¼â€œæ‹›å¼å›¾è°±â€ï¼‰</span>

<span class="hljs-keyword">let</span> functions <span class="hljs-operator">=</span> strings.map(\.uppercased)

<span class="hljs-built_in">print</span>(functions) <span class="hljs-comment">// è¾“å‡ºï¼š[(Function), (Function)]ï¼ˆå‡½æ•°æ•°ç»„ï¼‰</span>

<span class="hljs-comment">// åç»­éœ€è¦æ—¶å†â€œå‡ºæ‹›â€</span>

<span class="hljs-keyword">for</span> function <span class="hljs-keyword">in</span> functions {

	<span class="hljs-built_in">print</span>(function()) <span class="hljs-comment">// ä¾æ¬¡è¾“å‡ºï¼šHELLOã€WORLD</span>

}
</code></pre>
<p>ä¾¯ä½©åš¼ç€é¥¼ï¼Œè‹¥æœ‰æ‰€æ€ï¼šâ€œè¿™å°±åƒæˆ‘æ£ç€åŒ…å­ä¸èˆå¾—åƒï¼Œå…ˆè—åœ¨æ€€é‡Œï¼Œé¥¿äº†å†æ‹¿å‡ºæ¥ â€”â€” å‡½æ•°è¿˜èƒ½è¿™ä¹ˆâ€˜å­˜ç€æ…¢æ…¢ç”¨â€™ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0e1129a45074869a34e16aa60428da8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679030&amp;x-signature=yVJsjIVQfSAhrRpRnY%2B6GLd3Af8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œæ­£æ˜¯ã€‚â€ èµµæ•ç‚¹å¤´ï¼Œâ€œ<code>functions[0]</code>å°±åƒâ€˜Helloâ€™çš„â€˜ uppercase æ‹›å¼â€™ï¼Œä½ å•¥æ—¶å€™è°ƒç”¨<code>function()</code>ï¼Œå®ƒå•¥æ—¶å€™ç»™ä½ å‡ºâ€˜HELLOâ€™è¿™æ‹›ã€‚è¿™æ‹›åœ¨å»¶è¿Ÿæ‰§è¡Œã€æ‰¹é‡è°ƒåº¦çš„æ—¶å€™ç‰¹åˆ«ç®¡ç”¨ï¼Œå¥½æ¯”ä¸å¸®å¼Ÿå­å…ˆé¢†äº†ä»¤ç‰Œï¼Œåˆ°äº†æ—¶è¾°å†é›†åˆã€‚â€</p>
<hr/>
<h2 data-id="heading-3">ğŸ§ 3. åŒåè¾¨æï¼šé‡è½½æ–¹æ³•çš„ â€œè®¤äº²è¯€â€</h2>
<p>ä¾¯ä½©çªç„¶æƒ³èµ·ä¸ªé—®é¢˜ï¼Œæ‹äº†ä¸‹å¤§è…¿ï¼šâ€œé‚£è¦æ˜¯ä¸¤ä¸ªæ–¹æ³•åŒåï¼Œå°±åƒåŒèƒèƒå…„å¼Ÿï¼Œé”®è·¯å¾„å’‹åŒºåˆ†è°æ˜¯è°ï¼Ÿâ€</p>
<p>èµµæ•æ—©æœ‰å‡†å¤‡ï¼Œå†™ä¸‹<code>Array</code>çš„<code>prefix</code>æ–¹æ³•ä¾‹å­ï¼šâ€œè¿™å°±å¾—ç”¨â€˜è®¤äº²è¯€â€™â€”â€” åŠ ä¸Šå‚æ•°æ ‡ç­¾ï¼Œå¥½æ¯”å–Šâ€˜ç©¿çº¢è¡£æœçš„å°æ˜â€™å’Œâ€˜æˆ´å¸½å­çš„å°æ˜â€™ï¼Œä¸€å‡†é”™ä¸äº†ã€‚â€</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä¸¤ä¸ªprefixæ–¹æ³•åŒåï¼Œç”¨å‚æ•°æ ‡ç­¾åŒºåˆ†</span>

<span class="hljs-keyword">let</span> prefixUpTo <span class="hljs-operator">=</span> <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;.prefix(upTo:)  <span class="hljs-comment">// åˆ°ç´¢å¼•å‰æˆªæ­¢ï¼ˆä¸å«è¯¥ç´¢å¼•ï¼‰</span>

<span class="hljs-keyword">let</span> prefixThrough <span class="hljs-operator">=</span> <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;.prefix(through:)  <span class="hljs-comment">// åˆ°ç´¢å¼•æ­¢ï¼ˆå«è¯¥ç´¢å¼•ï¼‰</span>

<span class="hljs-keyword">let</span> fruits <span class="hljs-operator">=</span> [<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"orange"</span>]

<span class="hljs-built_in">print</span>(fruits[keyPath: prefixUpTo(<span class="hljs-number">2</span>)]) <span class="hljs-comment">// è¾“å‡ºï¼š["apple", "banana"]</span>

<span class="hljs-built_in">print</span>(fruits[keyPath: prefixThrough(<span class="hljs-number">2</span>)]) <span class="hljs-comment">// è¾“å‡ºï¼š["apple", "banana", "orange"]</span>
</code></pre>
<p>â€œå¦™å•Šï¼â€ ä¾¯ä½©ç¬‘å¾—çœ¼ç›çœ¯æˆä¸€æ¡ç¼ï¼Œâ€œä»¥å‰æˆ‘æ€»æ€•åŒåæ–¹æ³•â€˜æ’è¡«â€™ï¼Œç°åœ¨åŠ ä¸ªæ ‡ç­¾ï¼Œå°±åƒç»™å®ƒä»¬æŒ‚äº†ä¸åŒçš„è…°ç‰Œï¼Œä¸€çœ¼å°±èƒ½è®¤å‡ºæ¥ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c98b75d6303d42e588243dd4cb5593fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679030&amp;x-signature=2jaJov0Z6VeF%2FIzWbd0HL2K%2FjA8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4">ğŸš¨ 4. ç¦å¿Œä¹‹æœ¯ï¼šasync/throws æ–¹æ³•çš„ â€œç¦åŒºâ€</h2>
<p>èµµæ•çªç„¶æ”¶èµ·ç¬‘å®¹ï¼Œè¯­æ°”ä¸¥è‚ƒèµ·æ¥ï¼šâ€œä¸è¿‡è¿™â€˜é€šè„‰å¥‡åŠŸâ€™ä¹Ÿæœ‰ç¦åŒº â€”â€” å¸¦<code>async</code>ï¼ˆå¼‚æ­¥ï¼‰æˆ–<code>throws</code>ï¼ˆæŠ›é”™ï¼‰çš„æ–¹æ³•ï¼Œå°±åƒç»ƒäº†â€˜é‚ªæ´¾æ­¦åŠŸâ€™ï¼Œé”®è·¯å¾„ç¢°ä¸å¾—ï¼Œä¸€ç¢°å°±èµ°ç«å…¥é­”ã€‚â€</p>
<p>å¥¹å†™ä¸‹åä¾‹ï¼Œç‰¹æ„æ ‡çº¢ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å‡è®¾æœ‰ä¸ªå¸¦throwsçš„æ–¹æ³•</span>

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">FileHandler</span> {

	<span class="hljs-keyword">func</span> <span class="hljs-title function_">read</span>() <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">String</span> { <span class="hljs-string">"content"</span> }
	
	}

<span class="hljs-comment">// âŒ ç¼–è¯‘æŠ¥é”™ï¼šä¸æ”¯æŒthrowsæ–¹æ³•çš„é”®è·¯å¾„</span>

<span class="hljs-comment">// let readKeyPath = FileHandler.read</span>
</code></pre>
<p>â€œä¸ºå•¥å•Šï¼Ÿâ€ ä¾¯ä½©è¿½é—®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c27af5f84fb421ab9793927d70b8294~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679030&amp;x-signature=VD%2Fr0bL%2FF3CgKOiVdVYIwxcI37E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œ<code>async</code>è¦ç­‰â€˜å¼‚æ­¥çœŸæ°”â€™å›æµï¼Œ<code>throws</code>å¯èƒ½â€˜èµ°ç«å‡ºé­”â€™ï¼Œé”®è·¯å¾„è¿™é—¨åŠŸå¤«è®²ç©¶â€˜ä¸€æ‹›åˆ¶æ•Œâ€™ï¼Œå®¹ä¸å¾—è¿™äº›å˜æ•°ã€‚â€ èµµæ•è§£é‡Šé“ï¼Œâ€œå°±åƒæ­¦å½“æ´¾çš„å¤ªæå‰‘ï¼Œåªèƒ½æ¥æ‹›ä¸èƒ½è€è¯ˆï¼Œå¦åˆ™å°±ç ´äº†ç« æ³•ã€‚â€</p>
<hr/>
<h2 data-id="heading-5">ğŸ”® ç»“å°¾ï¼šåˆå§‹åŒ–å™¨çš„ç„æœºï¼Œçƒ§é¥¼é“ºçš„å¯†è¯­</h2>
<p>ä¾¯ä½©æ€»ç®—æŠŠæ–¹æ³•é”®è·¯å¾„çš„ç”¨æ³•åƒé€ï¼ŒæŠ“èµ·æœ€åä¸€å—èŒ¯è‹“é¥¼å¡è¿›å˜´é‡Œï¼šâ€œè¿™ SE-0479 çœŸæ˜¯â€˜é›ªä¸­é€ç‚­â€™ï¼Œä»¥åå†ä¹Ÿä¸ç”¨ä¸ºæ–¹æ³•è°ƒç”¨ç»•åœˆå­äº† â€”â€” çœä¸‹çš„æ—¶é—´ï¼Œå¤Ÿæˆ‘æ‰¾ä¸‰å®¶çƒ§é¥¼é“ºäº†ï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12b526fbc062435abd61f965883e995e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679030&amp;x-signature=R39NvGnkxdNkOibrv2g7TcXsR4A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>èµµæ•æ”¶æ‹¾ç€çº¸ç¬”ï¼Œçªç„¶ç¬‘é“ï¼šâ€œè¿™è¿˜åªæ˜¯â€˜ä¸Šç¯‡â€™ï¼ŒSE-0479 è¿˜æœ‰â€˜ä¸‹ç¯‡â€™ï¼Œèƒ½ç»™åˆå§‹åŒ–å™¨ä¹Ÿåšé”®è·¯å¾„å‘¢ã€‚æ¯”å¦‚<code>String.init</code>ï¼Œæƒ³æƒ³éƒ½è§‰å¾—å¦™ã€‚â€</p>
<p>â€œåˆå§‹åŒ–å™¨ä¹Ÿèƒ½ï¼Ÿâ€ ä¾¯ä½©çœ¼ç›çªå¾—æºœåœ†ï¼Œâ€œé‚£å²‚ä¸æ˜¯èƒ½åƒè°ƒæ–¹æ³•ä¸€æ ·â€˜æ‰¹é‡é€ å¯¹è±¡â€™ï¼Ÿâ€</p>
<p>è¿™æ—¶ï¼Œè—ç»é˜å¤–ä¼ æ¥ä¸€é˜µè„šæ­¥å£°ï¼Œä¸€ä¸ªå°å’Œå°šæ§ç€ä¸€ä»¶äº”å½©é¥­ç›’è¿›æ¥ï¼šâ€œä¾¯å¤§ä¾ ï¼Œå±±ä¸‹æœ‰ä¸€é»‘è¡£äººæ‰˜æˆ‘å¸¦ç»™ä½ çš„â€ï¼Œé¥­ç›’ä¸Šèµ«ç„¶å†™ç€ï¼š<strong>Opt-in Strict Memory Safety Checking</strong> å‡ ä¸ªå¤§å­—</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a5d493773654e42a8b39ffa42ee66c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679030&amp;x-signature=VPJobnH3Rlyt8VlBkrsvX%2FQSMLE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©ä¸€å¬ â€œé¥­ç›’â€ äºŒå­—ï¼Œé¡¿æ—¶æ¥äº†ç²¾ç¥ï¼ŒæŠ“ä½é¥­ç›’å°±å¾€å¤–è·‘ï¼Œè¾¹è·‘è¾¹å–Šï¼šâ€œæ¥äº†æ¥äº†ï¼è¿™é¥­ç›’ä¸Šçš„å­—å¤Ÿå¤æ€ªï¼Œè‚¯å®šè—ç€å¥½ä¸œè¥¿ â€”â€” èµµæ•å§‘å¨˜ï¼Œç­‰ç­‰æˆ‘ï¼Œæˆ‘è·¯ç—´ï¼â€</p>
<p>èµµæ•æœ›ç€ä»–èå°”ï¼Œå€šå¤©å‰‘è½»åŸï¼Œä»¿ä½›åœ¨è¯´ï¼šè¿™ç†ŠçŒ«çš„è´ªåƒï¼Œå¯æ¯”ä»£ç æ‰§å¿µæ·±å¤šäº†ã€‚</p>
<p>æ¬²çŸ¥è¿™é¥­ç›’é‡Œè—ç€ä»€ä¹ˆç„æœºï¼Œä¸”å¬ä¸‹å›åˆ†è§£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬å…­ç¯‡ï¼‰ï¼šå†…å­˜å®‰å…¨çš„ â€œå³¨çœ‰æˆ’ä»¤â€]]></title>    <link>https://juejin.cn/post/7580373352420589594</link>    <guid>https://juejin.cn/post/7580373352420589594</guid>    <pubDate>2025-12-07T02:25:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580373352420589594" data-draft-id="7580310413754712114" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬å…­ç¯‡ï¼‰ï¼šå†…å­˜å®‰å…¨çš„ â€œå³¨çœ‰æˆ’ä»¤â€"/> <meta itemprop="keywords" content="Swift,ç¼–ç¨‹è¯­è¨€,Apple"/> <meta itemprop="datePublished" content="2025-12-07T02:25:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬å…­ç¯‡ï¼‰ï¼šå†…å­˜å®‰å…¨çš„ â€œå³¨çœ‰æˆ’ä»¤â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:25:48.000Z" title="Sun Dec 07 2025 02:25:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f839415c8734650b80130886cf3f16f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=WVmp50l7%2Bmi6MaULMPhzzSGM1go%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•å­ï¼šä»£ç å´©å¾—çŒä¸åŠé˜²ï¼Œç†ŠçŒ«ä¾ å˜´ç¡¬ â€œå¤´ä¸ç§ƒâ€</h2>
<p>å³¨çœ‰å±±è„šçš„èŒ¶å¯®é‡Œï¼Œå¤§ç†ŠçŒ«ä¾¯ä½©å¯¹ç€ç”µè„‘å±å¹•æŠ“è€³æŒ è…®ï¼Œåœ†è„¸ä¸Šæ²¾äº†åœˆé¥¼å¹²å±‘ â€”â€” ä»–å†™çš„å›¾ç‰‡å¤„ç†ä»£ç åˆšå´©äº†ç¬¬ä¸‰æ¬¡ï¼Œæ§åˆ¶å°çº¢å¾—åƒå³¨çœ‰æ´¾çš„æŒé—¨ä»¤ç‰Œï¼Œæ»¡å±éƒ½æ˜¯ â€œundefined behaviorâ€ï¼ˆæœªå®šä¹‰è¡Œä¸ºï¼‰çš„æŠ¥é”™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed8a5aef4aca44ae910d805ecde77c6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=KqcVr67Ay8SgGdtoWRDer5CVlks%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œé‚ªé—¨äº†ï¼â€ ä¾¯ä½©æŠŠåŠå—æ¡‚èŠ±ç³•å¡è¿›å˜´é‡Œï¼Œå«ç³Šä¸æ¸…åœ°å˜Ÿå›”ï¼Œâ€œä¸å°±æ˜¯ç”¨äº†ä¸ª<code>UnsafeRawPointer</code>å—ï¼Ÿæ€ä¹ˆè·Ÿé—¯äº†å³¨çœ‰ç¦åœ°ä¼¼çš„ï¼Œè¯´å´©å°±å´©ï¼Ÿâ€ ä»–æŠ¬æ‰‹æ‹äº†æ‹å¤´é¡¶è“¬æ¾çš„ç»’æ¯›ï¼Œåˆä¹ æƒ¯æ€§å¼ºè°ƒï¼Œâ€œå¯åˆ«èµ–æˆ‘å¤´ç§ƒï¼Œè¿™ä»£ç é—®é¢˜è·Ÿæˆ‘æ¯›é‡åŠæ¯›é’±å…³ç³»æ²¡æœ‰ â€”â€” æˆ‘è¿™å¤´ç»å¯¹ä¸ç§ƒï¼â€</p>
<p>æœ¬ç¯‡æ­¦æ—ç§˜è¾›å°†ä¸ºä½ æ‹†è§£ï¼š</p>
<ul>
<li>å¼•å­ï¼šä»£ç å´©å¾—çŒä¸åŠé˜²ï¼Œç†ŠçŒ«ä¾ å˜´ç¡¬ â€œå¤´ä¸ç§ƒâ€</li>
<li>ğŸ¤” 1. åˆ†æ¸…é»‘ç™½ï¼šunsafe ä»£ç â‰ å´©æºƒä»£ç </li>
<li>ğŸ“œ 2. ç«‹ä¸‹è§„çŸ©ï¼š@safe ä¸ @unsafe çš„ â€œé—¨æ´¾ä»¤ç‰Œâ€</li>
<li>ğŸ”‘ 3. é€šå…³æ–‡ç‰’ï¼šunsafe å…³é”®å­—çš„ â€œå…¥ç¦æš—å·â€</li>
<li>ğŸ’¡ 4. å¿ƒæ³•æœ¬è´¨ï¼šå…³é”®å­—æ˜¯ â€œåŒé—¨è­¦ç¤ºâ€</li>
<li>ğŸ•µï¸ ç»“å°¾ï¼šç¦åœ°æ·±å¤„çš„ â€œéšè—ç„æœºâ€ï¼Œå³¨çœ‰ç§˜å®çš„çº¿ç´¢</li>
</ul>
<p>è¯éŸ³åˆšè½ï¼ŒèŒ¶å¯®å¤–ä¼ æ¥æ¸…å†·çš„è„šæ­¥å£°ï¼Œä¸€èº«ç´ ç™½é“è¢çš„å‘¨èŠ·è‹¥æç€å‰‘èµ°æ¥ï¼Œè…°é—´æŒ‚ç€å³¨çœ‰æ´¾çš„ç„é“ä»¤ç‰Œï¼šâ€œä¾¯å¤§ä¾ è¿™æ˜¯æ— è§† Swift çš„å†…å­˜æˆ’ä»¤äº†ï¼ŸSE-0458 çš„â€˜å³¨çœ‰æˆ’ä»¤â€™ï¼ˆ<strong>Opt-in Strict Memory Safety Checking</strong>ï¼‰å·²ç°ä¸–ï¼Œè¿˜æ•¢æ“…è‡ªä½¿ç”¨ unsafe ä»£ç ï¼Œå´©æºƒä¹Ÿæ˜¯å’ç”±è‡ªå–å“¦ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecabe5bdc0224bf7950ec373f1ffc8d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=jveVlmo4Eq1wLiUtd8I6I9J6B7o%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ¤” 1. åˆ†æ¸…é»‘ç™½ï¼šunsafe ä»£ç â‰ å´©æºƒä»£ç </h2>
<p>å‘¨èŠ·è‹¥å°†é•¿å‰‘æåœ¨æ¡Œæ¡ˆä¸Šï¼Œä»è¢–ä¸­å–å‡ºä¸€ç›’è²å­ç³•ï¼Œæ·¡æ·¡é“ï¼šâ€œå…ˆåˆ«æ€¥ç€å‘æ€’ï¼Œä½ å¾—å…ˆåˆ†æ¸… â€”â€”<code>unsafe</code>ä»£ç å¹¶éâ€˜å¿…å´©ä»£ç â€™ï¼ŒäºŒè€…å¦‚åŒå³¨çœ‰æ´¾çš„â€˜æ­£é—¨æ­¦å­¦â€™ä¸â€˜æ—é—¨å·¦é“â€™ï¼Œä¸å¯æ··ä¸ºä¸€è°ˆã€‚â€</p>
<p>å¥¹ç”¨æŒ‡å°–ç‚¹äº†ç‚¹å±å¹•ï¼Œé€ä¸€è§£æï¼š</p>
<ul>
<li>
<p><strong>å´©æºƒä»£ç </strong>ï¼šå¥½æ¯”ç»ƒé”™äº†å³¨çœ‰å‰‘æ³•çš„æ‹›å¼ï¼Œæ¯”å¦‚å¼ºè¡Œè§£åŒ…<code>nil</code>ï¼ˆ<code>force unwraps</code>ï¼‰ã€æ•°ç»„è¶Šç•Œè¯»å–ç´¢å¼• - 1ï¼Œè™½ä¼š â€œèµ°ç«å…¥é­”â€ï¼ˆå´©æºƒï¼‰ï¼Œä½†å±äº Swift é¢„åˆ¤èŒƒå›´å†…çš„ â€œå¤±è¯¯â€ï¼Œä¸ç®—è¿è§„ï¼›</p>
</li>
<li>
<p><strong>unsafe ä»£ç </strong>ï¼šè¿™æ‰æ˜¯çœŸæ­£çš„ â€œçŠ¯æˆ’ä¹‹ä¸¾â€â€”â€” ä½ ç»•è¿‡äº† Swift çš„ â€œé˜²æŠ¤ç»“ç•Œâ€ï¼ˆguardrailsï¼‰ï¼Œç›´æ¥çª¥æ¢å†…å­˜ â€œç¦åœ°â€ï¼Œç»“æœå¯èƒ½æ­£å¸¸è¿è¡Œï¼Œä¹Ÿå¯èƒ½ç¬é—´å´©æºƒï¼Œç”šè‡³æ¯æ¬¡è¿è¡Œç»“æœéƒ½ä¸åŒï¼ˆæœªå®šä¹‰è¡Œä¸ºï¼‰ã€‚è¿™ç±»ä»£ç åå­—ä¸­å¤šå¸¦ â€œunsafeâ€ æ ‡è¯†ï¼Œå¦‚<code>UnsafeRawPointer</code>ã€<code>unsafelyUnwrapped</code>ï¼Œæ°ä¼¼ç¦åœ°é—¨å£çš„ â€œç¦å…¥â€ è­¦ç¤ºç‰Œã€‚</p>
</li>
</ul>
<p>â€œæ‰“ä¸ªæ¯”æ–¹ï¼Œâ€ å‘¨èŠ·è‹¥é€’è¿‡ä¸€å—è²å­ç³•ï¼Œâ€œä½ é¥¿äº†æŠ¢é¦’å¤´åƒï¼ˆå´©æºƒä»£ç ï¼‰ï¼Œé¡¶å¤šè¢«åº—å®¶é©±èµ¶ï¼›ä½†ä½ è‹¥ç§é—¯å³¨çœ‰è—ç»é˜ï¼ˆunsafe ä»£ç ï¼‰ï¼Œå³ä¾¿ä¾¥å¹¸æ‹¿åˆ°ç§˜ç±ï¼Œä¹Ÿå¯èƒ½è§¦å‘æœºå…³ï¼Œåæœéš¾æ–™ â€”â€” è¿™ä¾¿æ˜¯â€˜æœªå®šä¹‰è¡Œä¸ºâ€™çš„å‡¶é™©ä¹‹å¤„ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e60a400938fb422aac4feb488dc73b3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=voYX%2BcipL7QrMm%2FnK%2F%2FvTiAuIo4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©åš¼ç€è²å­ç³•å˜Ÿç€å˜´æç„¶å¤§æ‚Ÿï¼šâ€œåŸæ¥æˆ‘ä¹‹å‰æ˜¯æŠŠâ€˜æŠ¢é¦’å¤´â€™å’Œâ€˜é—¯è—ç»é˜â€™æ··ä¸ºä¸€è°ˆäº†ï¼éš¾æ€ªä»£ç å´©å¾—è«åå…¶å¦™ã€‚â€</p>
<hr/>
<h2 data-id="heading-2">ğŸ“œ 2. ç«‹ä¸‹è§„çŸ©ï¼š@safe ä¸ @unsafe çš„ â€œé—¨æ´¾ä»¤ç‰Œâ€</h2>
<p>â€œSE-0458 ä¸ºå†…å­˜æ“ä½œç«‹ä¸‹äº†æ–°è§„çŸ©ã€‚â€ å‘¨èŠ·è‹¥æ”¶èµ·è²å­ç³•ç›’ï¼Œè¯­æ°”ä¸¥è‚ƒï¼Œâ€œå®ƒæ–°å¢äº† <strong>@safe</strong> å’Œ <strong>@unsafe</strong> ä¸¤æšâ€˜é—¨æ´¾ä»¤ç‰Œâ€™ï¼Œæ˜ç¡®ä»£ç çš„â€˜èº«ä»½å±æ€§â€™â€”â€” å“ªäº›æ˜¯â€˜åˆè§„å¼Ÿå­â€™ï¼ˆå®‰å…¨ä»£ç ï¼‰ï¼Œå“ªäº›æ˜¯â€˜çŠ¯æˆ’ä¹‹äººâ€™ï¼ˆä¸å®‰å…¨ä»£ç ï¼‰ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a9f73b830a2448cb647666fa9a2248a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=V9CrkWG5X7BtAOGY5gGhR3%2BgQ9U%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹è¿›ä¸€æ­¥è§£é‡Šï¼šâ€œæ­¤è§„çŸ©é»˜è®¤â€˜äººäººåˆè§„â€™â€”â€” æœªç‰¹æ„æ ‡æ³¨çš„ä»£ç ï¼Œå‡è‡ªå¸¦ @safe ä»¤ç‰Œï¼Œç›¸å½“äº Swift è‡ªåŠ¨å°†å…¶æŠ¤åœ¨å®‰å…¨ç»“ç•Œå†…ã€‚ä»…ä¸¤ç§æƒ…å†µéœ€æ‰‹åŠ¨æ ‡æ³¨ï¼š</p>
<ol>
<li>ç¼–å†™ unsafe ä»£ç æ—¶ï¼Œå¿…é¡»æ ‡æ³¨ @unsafeï¼Œæ˜ç¤ºâ€˜è‡ªæ„¿çŠ¯æˆ’â€™ï¼›</li>
<li>å¤–å±‚ä»£ç æ ‡æ³¨ @unsafeï¼Œä½†å†…éƒ¨æŸæ®µé€»è¾‘å®‰å…¨æ—¶ï¼Œå¯æ ‡æ³¨ @safeï¼Œç›¸å½“äºâ€˜åœ¨ç¦åœ°ä¸­å¼€è¾Ÿå®‰å…¨åŒºåŸŸâ€™ã€‚â€</li>
</ol>
<p>ä¾¯ä½©çªç„¶ä¸¾æ‰‹ï¼šâ€œé‚£æˆ‘ç”¨<code>UnsafeRawPointer</code>å†™çš„ä»£ç ï¼Œæ˜¯ä¸æ˜¯å¾—è´´ @unsafe ä»¤ç‰Œï¼Ÿâ€</p>
<p>â€œæ­£æ˜¯ã€‚â€ å‘¨èŠ·è‹¥ç‚¹å¤´ï¼Œâ€œå¦‚åŒç§é—¯è—ç»é˜éœ€æå‰å‘ŠçŸ¥æŒé—¨ï¼Œä½¿ç”¨ unsafe ä»£ç å¿…é¡»æ ‡æ³¨ @unsafeï¼Œè®©æ‰€æœ‰å¼€å‘è€…çŸ¥æ™“â€˜è¿™æ®µä»£ç å­˜åœ¨é£é™©â€™ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/869ee60c16b947e0b2b82e2dcaf4c53a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=LU5qHTIM5%2FmQBP6WWgu51uivajg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3">ğŸ”‘ 3. é€šå…³æ–‡ç‰’ï¼šunsafe å…³é”®å­—çš„ â€œå…¥ç¦æš—å·â€</h2>
<p>â€œä»…æœ‰ä»¤ç‰Œä¸å¤Ÿï¼Œé—¯ç¦åœ°è¿˜éœ€â€˜å…¥ç¦æš—å·â€™ã€‚â€ å‘¨èŠ·è‹¥è¯´ç€ï¼Œåœ¨çº¸ä¸Šå†™ä¸‹ä¸€æ®µä»£ç ï¼Œâ€œå¯ç”¨â€˜ä¸¥æ ¼å†…å­˜å®‰å…¨æ£€æŸ¥â€™åï¼Œè°ƒç”¨ @unsafe æ ‡æ³¨çš„ä»£ç æ—¶ï¼Œå¿…é¡»åŠ ä¸Š<strong>unsafe å…³é”®å­—</strong>ï¼Œç›¸å½“äºå‘ Swift è¡¨æ˜â€˜çŸ¥æ™“é£é™©ï¼Œè‡ªæ„¿æ‰¿æ‹…åæœâ€™â€”â€” ç¼ºå°‘æš—å·ï¼Œç¼–è¯‘å™¨ä¾¿ä¼šäº®èµ·â€˜è­¦ç¤ºçº¢ç¯â€™ï¼ˆè­¦å‘Šï¼‰ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c970b3ade1254289b2e724ac7138f2c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=Js1mOFuYelLF4o3JC1f3fyYRusY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹å±•ç¤ºäº†æ­£ç¡®ä¸é”™è¯¯çš„å†™æ³•å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>? <span class="hljs-comment">// å®šä¹‰å¯é€‰ç±»å‹å­—ç¬¦ä¸²ï¼Œå¯èƒ½ä¸ºnil</span>

<span class="hljs-comment">// âŒ é”™è¯¯å†™æ³•ï¼šè°ƒç”¨@unsafeä¿®é¥°çš„unsafelyUnwrappedï¼ŒæœªåŠ unsafeå…³é”®å­—ï¼Œç¼–è¯‘å™¨è­¦å‘Š</span>

<span class="hljs-comment">// print(name.unsafelyUnwrapped)</span>

<span class="hljs-comment">// âœ… æ­£ç¡®å†™æ³•ï¼šæ·»åŠ unsafeå…³é”®å­—ï¼Œæ˜ç¡®çŸ¥æ™“æ“ä½œä¸å®‰å…¨</span>

unsafe <span class="hljs-built_in">print</span>(name.unsafelyUnwrapped)

<span class="hljs-comment">// æ³¨ï¼šunsafelyUnwrappedä¸º@unsafeæ–¹æ³•ï¼Œå¼ºåˆ¶è§£åŒ…å¯é€‰å€¼ï¼Œè‹¥ä¸ºnilä¼šè§¦å‘æœªå®šä¹‰è¡Œä¸º</span>
</code></pre>
<p>â€œè¿™æš—å·å¦‚åŒé—¯ç¦åœ°å‰å¯¹å®ˆå«è¯´çš„â€˜å³¨çœ‰å¼Ÿå­ï¼Œç‰¹æ¥é¢†ç½šâ€™ã€‚â€ å‘¨èŠ·è‹¥è¡¥å……é“ï¼Œâ€œç¼–è¯‘å™¨è­¦å‘Šå¹¶éé˜»æ‹¦ï¼Œè€Œæ˜¯æé†’ä½ â€˜ä¸‰æ€è€Œåè¡Œâ€™â€”â€” è‹¥ç¡®æœ‰å¿…è¦ä½¿ç”¨ï¼Œæ·»åŠ  unsafe å³å¯é€šè¿‡ï¼›è‹¥è¯¯å†™ unsafe ä»£ç ï¼Œè­¦å‘Šå¯å¸®ä½ åŠæ—¶ä¿®æ­£ï¼ˆå¦‚æ”¹ç”¨<code>if let</code>å®‰å…¨è§£åŒ…ï¼‰ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c377c87271bc4dccb6c5bc3cf1df3dc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=T59S7bygacIibsde2uhhcdMysB0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©è¯•ç€ä¿®æ”¹ä»£ç ï¼Œæœç„¶æ¶ˆé™¤äº†è­¦å‘Šï¼šâ€œè¿™æš—å·çœŸç®¡ç”¨ï¼ä»¥åå†ä¹Ÿä¸æ€•è¯¯é—¯å†…å­˜ç¦åœ°äº†ã€‚â€</p>
<hr/>
<h2 data-id="heading-4">ğŸ’¡ 4. å¿ƒæ³•æœ¬è´¨ï¼šå…³é”®å­—æ˜¯ â€œåŒé—¨è­¦ç¤ºâ€</h2>
<p>â€œä½ è«è¦ä»¥ä¸º unsafe å…³é”®å­—æ˜¯ç»™ç¼–è¯‘å™¨çœ‹çš„ã€‚â€ å‘¨èŠ·è‹¥è¯é”‹ä¸€è½¬ï¼Œçœ¼ç¥é”åˆ©ï¼Œâ€œå®ƒå®åˆ™æ˜¯ç»™â€˜åŒé—¨å¼€å‘è€…â€™çš„è­¦ç¤º â€”â€” å¦‚åŒ<strong>try</strong>å’Œ<strong>await</strong>ï¼Œæ˜¯å›¢é˜Ÿåä½œçš„â€˜é£é™©å‘Šç¤ºâ€™ã€‚â€</p>
<p>å¥¹ç¼“ç¼“é“æ¥ï¼šâ€œtry å‘ŠçŸ¥é˜Ÿå‹â€˜è¿™æ®µä»£ç å¯èƒ½æŠ›é”™ï¼Œéœ€åšå¥½åº”å¯¹â€™ï¼›await å‘ŠçŸ¥é˜Ÿå‹â€˜è¿™æ®µä»£ç ä¸ºå¼‚æ­¥æ“ä½œï¼Œéœ€è€å¿ƒç­‰å¾…â€™ï¼›è€Œ unsafe å‘ŠçŸ¥é˜Ÿå‹â€˜è¿™æ®µä»£ç ç»•è¿‡å†…å­˜é˜²æŠ¤ï¼Œä¿®æ”¹æ—¶åŠ¡å¿…è°¨æ…ï¼Œéœ€å…ˆæ´æ‚‰å…¶åŸç†â€™ã€‚Swift ç¼–è¯‘å™¨æ—©å·²è¯†åˆ« unsafe ä»£ç ï¼Œå®ƒè¦çš„ä¸æ˜¯â€˜è‡ªæˆ‘çŸ¥æ™“â€™ï¼Œè€Œæ˜¯â€˜å…¨å‘˜è­¦æƒ•â€™â€”â€” å›¢é˜Ÿå¼€å‘ä¸­ï¼Œè‹¥æœ‰äººæœªå¯Ÿè§‰ unsafe ä»£ç çš„é£é™©ï¼Œéšæ„ä¿®æ”¹ï¼Œææ˜“å¼•å‘ä¸¥é‡ bugã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/453a889278df4a7ea8fa265510a0a8ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=pUWYmrc9jTzwA7wYwtlieLBsRFc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©æ‘¸äº†æ‘¸ä¸‹å·´ï¼šâ€œè¿™è¯åœ¨ç†ï¼ä¸Šæ¬¡å¸®å¸ˆå¼Ÿæ”¹ä»£ç ï¼Œå› æœªå‘ç°ä»–å†™çš„ unsafe æ³¨é‡Šï¼Œçæ”¹ä¸€é€šï¼Œç»“æœä¿©äººç†¬å¤œè°ƒè¯•ä¸‰å°æ—¶ â€”â€” æ—©æœ‰ unsafe å…³é”®å­—æé†’ï¼Œä¹Ÿä¸è‡³äºå¦‚æ­¤ç‹¼ç‹ˆã€‚â€</p>
<hr/>
<h2 data-id="heading-5">ğŸ•µï¸ ç»“å°¾ï¼šç¦åœ°æ·±å¤„çš„ â€œéšè—ç„æœºâ€ï¼Œå³¨çœ‰ç§˜å®çš„çº¿ç´¢</h2>
<p>ä¾¯ä½©æ€»ç®—åƒé€ â€œä¸¥æ ¼å†…å­˜å®‰å…¨æ£€æŸ¥â€ çš„è§„çŸ©ï¼ŒæŠ“èµ·æœ€åä¸€å—è²å­ç³•å¡è¿›å˜´é‡Œï¼šâ€œæœ‰äº† @safe/@unsafe ä»¤ç‰Œå’Œ unsafe å…³é”®å­—ï¼Œå†™å†…å­˜æ“ä½œå°±åƒâ€˜æŒä»¤é—¯ç¦åœ°â€™ï¼Œå¿ƒé‡Œè¸å®å¤šäº† â€”â€” çœä¸‹çš„è°ƒè¯•æ—¶é—´ï¼Œå¤Ÿæˆ‘æ‰¾éå³¨çœ‰å±±è„šçš„çƒ§é¥¼é“ºäº†ï¼â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdc5cde999b84176a1581c6360eb752d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=CtbWTW5M6kz%2FBQYTDa5CBfLJPlU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å‘¨èŠ·è‹¥æ”¶èµ·é•¿å‰‘ï¼Œçªç„¶çœ¼ç¥ä¸€åŠ¨ï¼šâ€œè¿™â€˜å†…å­˜æˆ’ä»¤â€™å°šæœ‰â€˜éšè—ç„æœºâ€™â€”â€” å¦‚æœå¯ä»¥è§‚å¯Ÿ App è¿è¡Œæ ˆè°ƒç”¨ç»“æ„ï¼Œåˆæœ‰æ€æ ·çš„ç¥é€šï¼Ÿâ€</p>
<p>ä¾¯ä½©çœ¼ç›ä¸€äº®ï¼šâ€œå¿«æ•™æ•™æˆ‘ï¼â€</p>
<p>â€œæ€¥ä»€ä¹ˆã€‚â€ å‘¨èŠ·è‹¥è½¬èº«å‘å±±è·¯èµ°å»ï¼Œâ€œå³¨çœ‰å±±è—ç»é˜è—æœ‰â€˜ <strong>Swift Backtrace API</strong>â€™ï¼Œä¸Šé¢è®°è½½äº†æ‰€æœ‰è¯€çª â€”â€” ä¸è¿‡è—ç»é˜è·¯å¾„å¤æ‚ï¼Œä½ è¿™è·¯ç—´æ€•æ˜¯éš¾ä»¥å¯»è§…ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cf001cd64404e828a5ba3ad49ac6ee5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=iM%2BJDeyOwQPWhbK7G3R%2BoAXrDm4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©ä¸€å¬ â€œç§˜å·â€ äºŒå­—ï¼Œç«‹é©¬è·³èµ·æ¥ï¼šâ€œæˆ‘æ‰¾å¾—ç€ï¼å¤§ä¸äº†å¤šé—®å‡ ä½å¼Ÿå­ â€”â€” å‘¨èŠ·è‹¥æŒé—¨ç­‰ç­‰æˆ‘ï¼Œæˆ‘å¤´ç»å¯¹ä¸ç§ƒï¼Œè®°æ€§ä¹Ÿä¸å·®ï¼Œè‚¯å®šèƒ½è·Ÿä¸Šï¼â€</p>
<p>å‘¨èŠ·è‹¥æœ›ç€ä»–æ…Œæ…Œå¼ å¼ è¿½æ¥çš„èƒŒå½±ï¼Œå˜´è§’å¾®å¾®ä¸Šæ‰¬ï¼šâ€œè¿™ç†ŠçŒ«çš„æ‰§å¿µï¼Œå€’æ¯”å†…å­˜æ ˆè°ƒç”¨è¿˜åšå®šã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed24080247b141ad9280f72b16a484ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679148&amp;x-signature=062G14SpEHEyTnoEMdk%2FF5ErR%2Fo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ¬²çŸ¥è—ç»é˜çš„ â€œ<strong>Swift Backtrace API</strong>â€ è—ç€ä»€ä¹ˆç§˜è¯€ï¼Œä¸”å¬ä¸‹å›åˆ†è§£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬ä¸ƒç¯‡ï¼‰ï¼šè°ƒç”¨æ ˆçš„â€œå¤å¢“è„‰ç»œæœ¯â€]]></title>    <link>https://juejin.cn/post/7580329353353478190</link>    <guid>https://juejin.cn/post/7580329353353478190</guid>    <pubDate>2025-12-07T02:27:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580329353353478190" data-draft-id="7580303864605491209" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬ä¸ƒç¯‡ï¼‰ï¼šè°ƒç”¨æ ˆçš„â€œå¤å¢“è„‰ç»œæœ¯â€"/> <meta itemprop="keywords" content="Swift,ç¼–ç¨‹è¯­è¨€,Apple"/> <meta itemprop="datePublished" content="2025-12-07T02:27:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬ä¸ƒç¯‡ï¼‰ï¼šè°ƒç”¨æ ˆçš„â€œå¤å¢“è„‰ç»œæœ¯â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:27:39.000Z" title="Sun Dec 07 2025 02:27:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d95ef810d894f0683578f8934cb7030~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=h6JBn4oUYvJBQ51q5LnBS%2FiULwU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•å­ï¼šç»ˆå—è¿·è·¯é™· BUGï¼Œç†ŠçŒ«ä¾ å˜´ç¡¬ â€œå¤´ä¸ç§ƒâ€</h2>
<p>ç»ˆå—å±±çš„äº‘é›¾ç»•ç€å¤å¢“ç¾¤é£˜äº†åŠå®¿ï¼Œå¤§ç†ŠçŒ«ä¾¯ä½©è¹²åœ¨ä¸€å—é’çŸ³æ¿ä¸Šï¼Œæ€€é‡Œæ£ç€åŠå—èŠéº»çƒ§é¥¼ï¼Œç”µè„‘å±å¹•äº®å¾—åˆºçœ¼ â€”â€” ä»–å†™çš„ â€œæ‹›å¼æ¼”ç»ƒç³»ç»Ÿâ€ ä»£ç å´©äº†ï¼Œæ§åˆ¶å°åªè¹¦å‡ºä¸€å¥ â€œæœªçŸ¥é”™è¯¯â€ï¼Œè¿ä¸ªæŠ¥é”™ä½ç½®éƒ½æ²¡æœ‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ec67989a3c34f27ac3a894648440bee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=7NgL4HCK7jjx%2FjUGr%2B%2FopQArVlE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œè¿™å«ä»€ä¹ˆäº‹å„¿ï¼â€ ä¾¯ä½©å’¬äº†å£çƒ§é¥¼ï¼Œç¢å±‘ç²˜åœ¨é“è¢ä¸‹æ‘†ï¼Œâ€œå‡½æ•° A è°ƒ Bï¼ŒB è°ƒ Cï¼ŒC è°ƒ Dï¼Œåˆ°åº•æ˜¯å“ªæ­¥èµ°å²”äº†ï¼Ÿè·Ÿåœ¨ç»ˆå—å±±æ‰¾å¤å¢“ä¼¼çš„ï¼Œç»•æ¥ç»•å»æ‰¾ä¸åˆ°å…¥å£ï¼â€ ä»–æŠ¬æ‰‹æ‰äº†æ‰å¤´é¡¶è“¬æ¾çš„é»‘æ¯›ï¼Œåˆä¹ æƒ¯æ€§æ¢—ç€è„–å­å¼ºè°ƒï¼Œâ€œå¯åˆ«èµ–æˆ‘å¤´ç§ƒè®°ä¸ä½ä»£ç  â€”â€” æˆ‘è¿™å¤´ç»å¯¹ä¸ç§ƒï¼Œæ¯›é‡æ¯”å¤å¢“é‡Œçš„ç‰èœ‚è¿˜å¯†ï¼â€</p>
<p>æœ¬ç¯‡æ­¦æ—ç§˜è¾›ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>å¼•å­ï¼šç»ˆå—è¿·è·¯é™· BUGï¼Œç†ŠçŒ«ä¾ å˜´ç¡¬ â€œå¤´ä¸ç§ƒâ€</li>
<li>ğŸ 1. è„‰ç»œåˆç°ï¼šBacktrace çš„ â€œèœ‚è¿¹è®°å½•ä»ªâ€</li>
<li>âœ¨ 2. è„‰ç»œæ˜¾å½¢ï¼šsymbolicated () çš„ â€œæ‹›å¼æ ‡æ³¨æœ¯â€</li>
<li>ğŸ“ 3. å®æˆ˜æ¼”ç»ƒï¼šâ€œæ‹›å¼é“¾â€ çš„è„‰ç»œæ•è·</li>
<li>ğŸ•µï¸ ç»“å°¾ï¼šè„‰ç»œæœ¯çš„ â€œæ·±å±‚ç„æœºâ€ï¼Œå¤å¢“çš„ â€œèœ‚ç¾¤ç§˜å½•â€</li>
</ul>
<p>è¯éŸ³åˆšè½ï¼Œèº«åä¼ æ¥è½»è‹¥æµäº‘çš„è„šæ­¥å£°ã€‚ä¸€è¢­ç™½è¡£çš„å°é¾™å¥³æç€ç«¹ç¯®èµ°æ¥ï¼Œç¯®é‡Œæ”¾ç€ç‰èœ‚æµ†å’Œå‡ å·å¤ç±ï¼Œå‘é—´åˆ«ç€æ”¯ç´ é“¶ç°ªï¼šâ€œä¾¯å¤§ä¾ è«æ€¥ï¼Œä½ è¿™æ˜¯ä¸¢äº†â€˜æ­¦å­¦è„‰ç»œâ€™ï¼ˆè°ƒç”¨æ ˆï¼‰ã€‚SE-0419 çš„â€˜å¤å¢“è„‰ç»œæœ¯â€™ï¼ˆ<strong>Swift Backtrace API</strong>ï¼‰ï¼Œä¸“è§£â€˜æ‰¾ä¸åˆ°è°ƒç”¨ç—•è¿¹â€™çš„éš¾é¢˜ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c99760c088bf4870bf2259dad32cef4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=LCza8225uDbsF3XznZ9TQ4USL8U%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ 1. è„‰ç»œåˆç°ï¼šBacktrace çš„ â€œèœ‚è¿¹è®°å½•ä»ªâ€</h2>
<p>å°é¾™å¥³åœ¨é’çŸ³æ¿ä¸Šé“ºå¼€å¤ç±ï¼ŒæŒ‡å°–è˜¸äº†ç‚¹ç‰èœ‚æµ†ï¼Œè½»è½»ç‚¹åœ¨çº¸ä¸Šï¼šâ€œä½ ä¸”çœ‹ â€”â€” ç‰èœ‚é‡‡èœœæ—¶ï¼Œä¼šç•™ä¸‹é£è¡Œè½¨è¿¹ï¼Œé¡ºç€è½¨è¿¹èƒ½æ‰¾åˆ°èœ‚å·¢ï¼›ä»£ç è¿è¡Œæ—¶ï¼Œå‡½æ•°è°ƒç”¨ä¹Ÿä¼šç•™ä¸‹â€˜è½¨è¿¹â€™ï¼Œè¿™å°±æ˜¯<strong>è°ƒç”¨æ ˆï¼ˆcall stackï¼‰</strong>ã€‚è€Œ<strong>Backtrace ç»“æ„ä½“</strong>ï¼Œå°±æ˜¯ Swift 6.2 æ–°å‡ºçš„â€˜èœ‚è¿¹è®°å½•ä»ªâ€™ï¼Œèƒ½éšæ—¶æ•æ‰å½“å‰ä»£ç çš„â€˜é£è¡Œè½¨è¿¹â€™ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8260420c74b4151ba6d11a79995a305~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=eZH9IHft5cl9wNBERrLmXdBXLWI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹è§£é‡Šå¾—æ¸…æ¸…æ·¡æ·¡ï¼Œå´å¥å¥åˆ‡ä¸­è¦å®³ï¼šâ€œæ¯”å¦‚ä½ ç»ƒâ€˜ç‰å¥³å¿ƒç»â€™ï¼Œå¾—å…ˆç»ƒâ€˜äº‘æ‰‹â€™ï¼Œå†ç»ƒâ€˜æ‹‚å°˜å¼â€™ï¼Œæœ€åç»ƒâ€˜å‰‘å¿ƒé€šæ˜â€™â€”â€” è¿™ä¸‰æ­¥å°±æ˜¯â€˜æ‹›å¼è°ƒç”¨æ ˆâ€™ã€‚Backtrace èƒ½æŠŠè¿™â€˜è°è°ƒç”¨è°â€™çš„é¡ºåºè®°ä¸‹æ¥ï¼Œå“ªæ€•ä»£ç å´©äº†ï¼Œä¹Ÿèƒ½é¡ºç€â€˜è½¨è¿¹â€™æ‰¾åˆ°å‡ºé”™çš„é‚£ä¸€æ­¥ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ceb804949c544f28ffbedf3216c4969~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=iRiil1UmkUmeTyn0AjJlHyK8dNg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©ç›¯ç€å¤ç±ä¸Šçš„èœ‚è¿¹å›¾æç„¶å¤§æ‚Ÿï¼šâ€œåŸæ¥æˆ‘ä¹‹å‰æ˜¯æ²¡ä¸ªâ€˜è®°å½•ä»ªâ€™ï¼å°±åƒè¿½ç‰èœ‚æ²¡è®°æ–¹å‘ï¼Œé£ä¸¢äº†å°±æ‰¾ä¸ç€åŒ— â€”â€” è¿™ Backtrace å°±æ˜¯æˆ‘çš„â€˜å¯»èœ‚ç½—ç›˜â€™å•Šï¼â€</p>
<p>å°é¾™å¥³é€’è¿‡ä¸€å°ç¢—ç‰èœ‚æµ†ï¼šâ€œå…ˆæ¶¦æ¶¦å–‰ã€‚ä¸è¿‡è¿™â€˜è®°å½•ä»ªâ€™æœ‰ä¸ªè§„çŸ©ï¼šé»˜è®¤åªè®°â€˜è½¨è¿¹â€™ï¼Œä¸æ ‡â€˜èœ‚ç§â€™ï¼ˆå‡½æ•°åï¼‰ï¼Œå¾—å†ç”¨ä¸ªâ€˜æ˜¾å½¢æœ¯â€™æ‰è¡Œã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ac744a4468a4071b0d1295925a9ce85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=sNDCYvvWugr6C9sA2wuS9%2FCndOY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2">âœ¨ 2. è„‰ç»œæ˜¾å½¢ï¼šsymbolicated () çš„ â€œæ‹›å¼æ ‡æ³¨æœ¯â€</h2>
<p>â€œä½ è¯´çš„â€˜æ˜¾å½¢æœ¯â€™ï¼Œå°±æ˜¯<strong>symbolicated () æ–¹æ³•</strong>ï¼Ÿâ€ ä¾¯ä½©å–ç€ç‰èœ‚æµ†ï¼Œçœ¼ç›äº®äº†ã€‚</p>
<p>å°é¾™å¥³ç‚¹å¤´ï¼Œæ‹¿èµ·ç‚­ç¬”åœ¨çº¸ä¸Šç”»äº†ä¸¤é“çº¿ï¼šâ€œæ²¡é”™ã€‚æœªç¬¦å·åŒ–çš„ Backtraceï¼Œå°±åƒåªè®°äº†â€˜èœ‚ç¾¤é£è¿‡â€™ï¼Œå´æ²¡å†™â€˜æ˜¯é‡‡èœœèœ‚è¿˜æ˜¯å®ˆå«èœ‚â€™â€”â€” åªèƒ½çœ‹åˆ°å†…å­˜åœ°å€ï¼Œçœ‹ä¸åˆ°å‡½æ•°åã€æ–‡ä»¶åï¼›è€Œè°ƒç”¨ symbolicated () åï¼Œç›¸å½“äºç»™â€˜èœ‚è¿¹â€™æ ‡æ³¨äº†â€˜èœ‚ç§â€™ï¼Œèƒ½æ¸…æ¸…æ¥šæ¥šçœ‹åˆ°æ¯ä¸€æ­¥è°ƒç”¨çš„å‡½æ•°åã€æ‰€åœ¨æ–‡ä»¶å’Œè¡Œå·ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1aa4aa5f8bf4302a885d572372312d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=pfLCk0LxQLZBJoBEyiWdPAaGTfI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹ä¸¾äº†ä¸ªä¾‹å­ï¼šâ€œæ¯”å¦‚ç‰èœ‚é£è¿‡èŠ±ä¸›ï¼Œæœªç¬¦å·åŒ–çš„è®°å½•æ˜¯â€˜è¾°æ—¶ï¼Œä¸œå—æ–¹å‘ 30 æ­¥â€™ï¼›ç¬¦å·åŒ–åæ˜¯â€˜è¾°æ—¶ï¼Œé‡‡èœœèœ‚ 1 å·ï¼Œé£è¿‡æ¡ƒèŠ±ä¸›ï¼ˆæ–‡ä»¶ï¼šæ¡ƒèŠ±æ¶§.swiftï¼‰ï¼Œåœåœ¨ç¬¬ 15 æœµèŠ±ï¼ˆè¡Œå·ï¼š15ï¼‰â€™â€”â€” è°ƒè¯•æ—¶çœ‹åˆ°è¿™æ ·çš„è®°å½•ï¼Œæ˜¯ä¸æ˜¯ä¸€çœ¼å°±çŸ¥é“é—®é¢˜åœ¨å“ªï¼Ÿâ€</p>
<p>ä¾¯ä½©æ‹ç€å¤§è…¿ç¬‘ï¼šâ€œå¤ªå¯¹äº†ï¼ä¹‹å‰æˆ‘çœ‹é‚£äº›å†…å­˜åœ°å€ï¼Œè·Ÿçœ‹å¤å¢“é‡Œçš„æœºå…³å¯†ç ä¼¼çš„ï¼Œä¸€å¤´é›¾æ°´ï¼›æœ‰äº† symbolicated ()ï¼Œå°±åƒå¾—äº†è§£å¯†é’¥åŒ™ï¼Œæ¸…æ¸…æ¥šæ¥šï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be50e2852f544fbd9982714862eb798b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=DZPnZJRIXHxNZd%2Bdja9roJbrwSM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3">ğŸ“ 3. å®æˆ˜æ¼”ç»ƒï¼šâ€œæ‹›å¼é“¾â€ çš„è„‰ç»œæ•è·</h2>
<p>â€œå…‰è¯´ä¸ç»ƒå‡æŠŠå¼ã€‚â€ å°é¾™å¥³è¯´ç€ï¼Œæ¥è¿‡ä¾¯ä½©çš„ç”µè„‘ï¼Œæ‰‹æŒ‡åœ¨é”®ç›˜ä¸Šè½»æ•²ï¼Œå†™äº†ä¸€æ®µ â€œæ‹›å¼è°ƒç”¨é“¾â€ ä»£ç ï¼Œè¿˜ç‰¹æ„åŠ äº†ä¸­æ–‡æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Runtime <span class="hljs-comment">// å¯¼å…¥Runtimeæ¡†æ¶ï¼ŒBacktraceä¾èµ–æ­¤æ¡†æ¶</span>

<span class="hljs-comment">// æ¨¡æ‹Ÿâ€œç‰å¥³å¿ƒç»â€çš„ä¸‰å±‚æ‹›å¼è°ƒç”¨</span>
<span class="hljs-comment">// æ‹›å¼Aï¼šèµ·æ‰‹å¼ï¼Œè°ƒç”¨æ‹›å¼B</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">functionA</span>() {
    functionB()
}

<span class="hljs-comment">// æ‹›å¼Bï¼šè¿‡æ¸¡å¼ï¼Œè°ƒç”¨æ‹›å¼C</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">functionB</span>() {
    functionC()
}

<span class="hljs-comment">// æ‹›å¼Cï¼šæ”¶å°¾å¼ï¼Œåœ¨æ­¤å¤„æ•è·è°ƒç”¨æ ˆï¼ˆè®°å½•æ‹›å¼è„‰ç»œï¼‰</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">functionC</span>() {
    <span class="hljs-comment">// 1. æ•è·Backtraceï¼ˆè®°å½•èœ‚è¿¹ï¼‰</span>
    <span class="hljs-comment">// 2. è°ƒç”¨symbolicated()ï¼ˆæ ‡æ³¨èœ‚ç§ï¼‰</span>
    <span class="hljs-comment">// 3. å–å‡ºframesï¼ˆè„‰ç»œè¯¦æƒ…ï¼‰</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> frames <span class="hljs-operator">=</span> <span class="hljs-keyword">try?</span> <span class="hljs-type">Backtrace</span>.capture().symbolicated()<span class="hljs-operator">?</span>.frames {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‹›å¼è°ƒç”¨è„‰ç»œï¼š"</span>)
        <span class="hljs-keyword">for</span> (index, frame) <span class="hljs-keyword">in</span> frames.enumerated() {
            <span class="hljs-comment">// æ‰“å°æ¯ä¸€æ­¥çš„å‡½æ•°åã€æ–‡ä»¶ã€è¡Œå·ï¼ˆè„‰ç»œç»†èŠ‚ï¼‰</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¬¬<span class="hljs-subst">\(index<span class="hljs-operator">+</span><span class="hljs-number">1</span>)</span>æ­¥ï¼šå‡½æ•°=<span class="hljs-subst">\(frame.function <span class="hljs-operator">??</span> <span class="hljs-string">"æœªçŸ¥"</span>)</span>ï¼Œæ–‡ä»¶=<span class="hljs-subst">\(frame.file <span class="hljs-operator">??</span> <span class="hljs-string">"æœªçŸ¥"</span>)</span>ï¼Œè¡Œå·=<span class="hljs-subst">\(frame.line <span class="hljs-operator">??</span> <span class="hljs-number">0</span>)</span>"</span>)
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœªèƒ½æ•è·æ‹›å¼è„‰ç»œï¼ˆè·å–Backtraceå¤±è´¥ï¼‰ã€‚"</span>)
    }
}

<span class="hljs-comment">// å¯åŠ¨æ‹›å¼æ¼”ç»ƒï¼ˆä»æ‹›å¼Aå¼€å§‹ï¼‰</span>
functionA()
</code></pre>
<p>è¿è¡Œä»£ç åï¼Œæ§åˆ¶å°ç«‹åˆ»è·³å‡ºä¸€è¡Œè¡Œæ¸…æ™°çš„è®°å½•ï¼š</p>
<blockquote>
<p>æ‹›å¼è°ƒç”¨è„‰ç»œï¼š
[0x000000010cea43e8 [ra], 0x000000010cea4224 [ra], 0x000000010cea4168 [ra], 0x000000010cea401c [ra], 0x0000000102d6bc84 [ra] [0] com.apple.dt.Xcode.PlaygroundStub-macosx playgroundExecutionWillFinish + 4, 0x0000000186f23db4 [ra] [22] CoreFoundation <strong>invoking</strong>_ + 148, 0x0000000186f23c3c [ra] [22] CoreFoundation -[NSInvocation invoke] + 424, 0x000000018705466c [ra] [22] CoreFoundation -[NSInvocation invokeWithTarget:] + 64, 0x00000001911ead60 [ra] [81] ViewBridge __68-[NSVB_ViewServiceImplicitAnimationDecodingProxy forwardInvocation:]_block_invoke_2 + 48, 0x00000001911ae600 [ra] [81] ViewBridge -[NSViewServiceMarshal withHostWindowFrameAnimationInProgress:perform:] + 80, 0x00000001911ead20 [ra] [81] ViewBridge __68-[NSVB_ViewServiceImplicitAnimationDecodingProxy forwardInvocation:]_block_invoke + 124, 0x000000018c10715c [ra] [45] AppKit +[NSAnimationContext runAnimationGroup:] + 56, 0x000000018c107210 [ra] [45] AppKit +[NSAnimationContext runAnimationGroup:completionHandler:] + 100, 0x0000000191208cd4 [ra] [81] ViewBridge runAnimationGroup + 192, 0x00000001911c04d4 [ra] [81] ViewBridge +[NSVB_AnimationFencingSupport _animateWithAttributes:animations:] + 140, 0x00000001911eac6c [ra] [81] ViewBridge -[NSVB_ViewServiceImplicitAnimationDecodingProxy forwardInvocation:] + 156, 0x0000000186f22d38 [ra] [22] CoreFoundation <em><strong>forwarding</strong></em> + 1032, 0x0000000186f22870 [ra] [22] CoreFoundation <em>CF_forwarding_prep_0 + 96, 0x0000000186f23db4 [ra] [22] CoreFoundation <strong>invoking</strong></em> + 148, 0x0000000186f23c3c [ra] [22] CoreFoundation -[NSInvocation invoke] + 424, 0x000000018705466c [ra] [22] CoreFoundation -[NSInvocation invokeWithTarget:] + 64, 0x00000001911afde8 [ra] [81] ViewBridge -[NSVB_QueueingProxy forwardInvocation:] + 308, 0x0000000186f22d38 [ra] [22] CoreFoundation <em><strong>forwarding</strong></em> + 1032, 0x0000000186f22870 [ra] [22] CoreFoundation <em>CF_forwarding_prep_0 + 96, 0x0000000186f23db4 [ra] [22] CoreFoundation <strong>invoking</strong></em> + 148, 0x0000000186f23c3c [ra] [22] CoreFoundation -[NSInvocation invoke] + 424, 0x000000018705466c [ra] [22] CoreFoundation -[NSInvocation invokeWithTarget:] + 64, 0x0000000186f22d38 [ra] [22] CoreFoundation <em><strong>forwarding</strong></em> + 1032, 0x0000000186f22870 [ra] [22] CoreFoundation <em>CF_forwarding_prep_0 + 96, 0x0000000186f23db4 [ra] [22] CoreFoundation <strong>invoking</strong></em> + 148, 0x0000000186f23c3c [ra] [22] CoreFoundation -[NSInvocation invoke] + 424, 0x0000000191178840 [ra] [81] ViewBridge __deferNSXPCInvocationOntoMainThread_block_invoke + 132, 0x0000000191172ae4 [ra] [81] ViewBridge __deferBlockOntoMainThread_block_invoke_2 + 32, 0x000000018e50a494 [ra] [59] HIServices invocation function for block in wrapBlockWithVoucher(void () block_pointer) + 56, 0x000000018e50a034 [ra] [59] HIServices _ZL24deferredBlockOpportunity_block_invoke_2 + 500, 0x0000000186f385f4 [ra] [22] CoreFoundation <strong>CFRUNLOOP_IS_CALLING_OUT_TO_A_BLOCK</strong> + 28, 0x0000000186f38534 [ra] [22] CoreFoundation __CFRunLoopDoBlocks + 396, 0x0000000186f37368 [ra] [22] CoreFoundation __CFRunLoopRun + 804, 0x0000000186ff135c [ra] [22] CoreFoundation _CFRunLoopRunSpecificWithOptions + 532, 0x0000000193992768 [ra] [105] HIToolbox RunCurrentEventLoopInMode + 316, 0x0000000193995a90 [ra] [105] HIToolbox ReceiveNextEventCommon + 488, 0x0000000193b1f308 [ra] [105] HIToolbox _BlockUntilNextEventMatchingListInMode + 48, 0x000000018b81cd50 [ra] [45] AppKit _DPSBlockUntilNextEventMatchingListInMode + 236, 0x000000018b32be34 [ra] [45] AppKit _DPSNextEvent + 588, 0x000000018bcc9748 [ra] [45] AppKit -[NSApplication(NSEventRouting) _nextEventMatchingEventMask:untilDate:inMode:dequeue:] + 688, 0x000000018bcc9454 [ra] [45] AppKit -[NSApplication(NSEventRouting) nextEventMatchingMask:untilDate:inMode:dequeue:] + 72, 0x000000019118aeec [ra] [81] ViewBridge __77-[NSViewServiceApplication vbNextEventMatchingMask:untilDate:inMode:dequeue:]_block_invoke + 148, 0x000000019118ac60 [ra] [81] ViewBridge -[NSViewServiceApplication _withToxicEventMonitorPerform:] + 152, 0x000000019118ae40 [ra] [81] ViewBridge -[NSViewServiceApplication vbNextEventMatchingMask:untilDate:inMode:dequeue:] + 168, 0x000000019118b014 [ra] [81] ViewBridge -[NSViewServiceApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 100, 0x000000018b324780 [ra] [45] AppKit -[NSApplication run] + 368, 0x000000018b3106dc [ra] [45] AppKit NSApplicationMain + 880, 0x0000000186b84e88 [ra] [9] libxpc.dylib _xpc_objc_main + 784, 0x0000000186b96cf8 [ra] [9] libxpc.dylib _xpc_main + 40, 0x0000000186b849d4 [ra] [9] libxpc.dylib xpc_main + 64, 0x0000000191175c84 [ra] [81] ViewBridge -[NSXPCSharedListener resume] + 32, 0x000000019118d538 [ra] [81] ViewBridge NSViewServiceMain + 360, 0x0000000102d6bcac [ra] [0] com.apple.dt.Xcode.PlaygroundStub-macosx main + 40, 0x0000000186ad1d54 [ra] [7] dyld start + 7184, ...]</p>
</blockquote>
<p>â€œä½ çœ‹ã€‚â€ å°é¾™å¥³æŒ‡ç€å±å¹•ï¼Œâ€œè¿™å°±åƒæŠŠâ€˜Aâ†’Bâ†’Câ€™çš„æ‹›å¼è„‰ç»œå…¨è®°ä¸‹æ¥äº†ï¼Œè¿å“ªæ­¥åœ¨å“ªä¸ªæ–‡ä»¶ã€å“ªè¡Œå†™çš„éƒ½æ¸…æ¸…æ¥šæ¥šã€‚è¦æ˜¯ functionC é‡Œå‡ºäº†é”™ï¼Œé¡ºç€è¿™è„‰ç»œæ‰¾ï¼Œä¸€æ‰¾ä¸€ä¸ªå‡†ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e164b8135a074e75ba18c257620bc7b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=2umAexMa4g1N9GbOloMbeRCT9Gc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©å‡‘è¿‡å»çœ‹ï¼Œç¬‘å¾—çœ¼ç›çœ¯æˆç¼ï¼šâ€œè¿™ä¹Ÿå¤ªå¥½ç”¨äº†ï¼ä»¥åå†é‡åˆ°â€˜è°ƒç”¨é“¾ BUGâ€™ï¼Œå†ä¹Ÿä¸ç”¨åƒä¸ªæ²¡å¤´è‹è‡ä¼¼çš„ä¹±æ’ â€”â€” æœ‰è¿™ Backtraceï¼Œè·Ÿæœ‰äº†å°é¾™å¥³ä½ æŒ‡ç‚¹ä¼¼çš„ï¼Œæ‹¨äº‘è§æ—¥ï¼â€</p>
<hr/>
<h2 data-id="heading-4">ğŸ•µï¸ ç»“å°¾ï¼šè„‰ç»œæœ¯çš„ â€œæ·±å±‚ç„æœºâ€ï¼Œå¤å¢“çš„ â€œèœ‚ç¾¤ç§˜å½•â€</h2>
<p>ä¾¯ä½©æ€»ç®—æŠŠ Backtrace API çš„ç”¨æ³•åƒé€ï¼ŒæŠŠæœ€åä¸€å£çƒ§é¥¼å¡è¿›å˜´é‡Œï¼šâ€œæœ‰äº†è¿™â€˜å¤å¢“è„‰ç»œæœ¯â€™ï¼Œä»¥åè°ƒè¯•ä»£ç å°±åƒèµ°å¤å¢“å¯†é“ â€”â€” æœ‰äº†åœ°å›¾ï¼Œå†ä¹Ÿä¸æ€•è¿·è·¯ï¼çœä¸‹çš„æ—¶é—´ï¼Œå¤Ÿæˆ‘æ‰¾éç»ˆå—å±±çš„çƒ§é¥¼é“ºäº†ï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/084603b64b8a474690fe8ccaf75641bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=4WcWR%2F0acKBupLKnMSRPUnKQi2E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å°é¾™å¥³æ”¶æ‹¾å¥½ç«¹ç¯®ï¼ŒæŒ‡å°–è½»è½»æŠšè¿‡ç¯®é‡Œçš„ç‰èœ‚ï¼šâ€œè¿™è¿˜åªæ˜¯â€˜è„‰ç»œæœ¯â€™çš„çš®æ¯›ã€‚ä½ å¯çŸ¥ï¼Œç‰èœ‚é™¤äº†é‡‡èœœï¼Œè¿˜èƒ½ä¼ é€’ä¿¡å·ï¼ŸBacktrace ä¹Ÿä¸€æ · â€”â€” å®ƒä¸ä»…èƒ½æ•è·åŒæ­¥å‡½æ•°çš„è°ƒç”¨æ ˆï¼Œè‹¥é…åˆâ€˜å¼‚æ­¥æ‹›å¼â€™ï¼ˆasync å‡½æ•°ï¼‰ã€‚ä¸è¿‡ï¼Œè®©æˆ‘ä»¬è¿˜æ˜¯æš‚æ—¶åˆ‡æ¢ä¸€ä¸‹è¯é¢˜ï¼Œæ¥èŠèŠ <strong>weak let</strong> çš„ç”¨æ³•å§â€</p>
<p>ä¾¯ä½©ä¸€å¬ â€œ<strong>weak let</strong>â€ï¼Œç«‹é©¬ç›´èµ·èº«å­ï¼šâ€œè¿˜æœ‰è¿™ç­‰å¥½ä¸œè¥¿ï¼Ÿå°é¾™å¥³å§‘å§‘ï¼Œä½ å¿«æ•™æ•™æˆ‘ï¼â€</p>
<p>â€œæ€¥ä»€ä¹ˆã€‚â€ å°é¾™å¥³è½¬èº«å‘å¤å¢“èµ°å»ï¼Œç™½è¡£æ˜ ç€äº‘é›¾ï¼Œâ€œå¤å¢“æ·±å¤„æœ‰é—´â€˜è„‰ç»œé˜â€™ï¼Œè—ç€ weak let çš„â€˜å¿ƒæ³•å¥¥ä¹‰â€™â€”â€” ä¸è¿‡é˜ä¸­è·¯å¾„æ›²æŠ˜ï¼Œä½ è¿™è·¯ç—´ï¼Œæ€•æ˜¯èµ°ä¸åˆ°é—¨å£ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1debcea20f344502ad5cb48fe97b62d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=HLw%2FGG6U%2FoXYq85eo31DiW%2FXqHs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©èµ¶ç´§è¿½ä¸Šå»ï¼Œæ€€é‡Œçš„çƒ§é¥¼è¢‹æ™ƒå¾—å“—å“—å“ï¼šâ€œæˆ‘æ‰¾å¾—ç€ï¼å¤§ä¸äº†è·Ÿç€ç‰èœ‚èµ° â€”â€” å°é¾™å¥³å§‘å§‘ä½ ç­‰ç­‰æˆ‘ï¼Œæˆ‘å¤´ç»å¯¹ä¸ç§ƒï¼Œè®°æ€§ä¹Ÿä¸å·®ï¼Œè‚¯å®šèƒ½è·Ÿä¸Šï¼â€</p>
<p>å°é¾™å¥³æœ›ç€ä»–æ…Œæ…Œå¼ å¼ çš„æ ·å­ï¼Œå˜´è§’éš¾å¾—æ³›èµ·ä¸€ä¸æµ…æ·¡ç¬‘æ„ï¼šâ€œè¿™ç†ŠçŒ«çš„æ‰§å¿µï¼Œå€’æ¯”ç‰èœ‚çš„è½¨è¿¹è¿˜æ‰§ç€ã€‚â€</p>
<p>æ¬²çŸ¥ weak let æ˜¯ä½• â€œå¥¥ä¹‰â€ï¼Œä¸”å¬ä¸‹å›åˆ†è§£ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3825153eccbd41e9943a76b2a21aa797~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679259&amp;x-signature=KBhErwtZTZDCzNksEtSdjejsqUc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬å…«ç¯‡ï¼‰ï¼šweak let çš„æ˜Ÿé™…å®‰å…¨åè®®]]></title>    <link>https://juejin.cn/post/7580378958072643594</link>    <guid>https://juejin.cn/post/7580378958072643594</guid>    <pubDate>2025-12-07T02:29:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580378958072643594" data-draft-id="7580329353353494574" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬å…«ç¯‡ï¼‰ï¼šweak let çš„æ˜Ÿé™…å®‰å…¨åè®®"/> <meta itemprop="keywords" content="ç¼–ç¨‹è¯­è¨€,Swift,Apple"/> <meta itemprop="datePublished" content="2025-12-07T02:29:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬å…«ç¯‡ï¼‰ï¼šweak let çš„æ˜Ÿé™…å®‰å…¨åè®®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:29:23.000Z" title="Sun Dec 07 2025 02:29:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b578d94ff6a5493a8cc91d53ec92b75c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679363&amp;x-signature=KbfBu%2F4oQJ9y48DAQcdQjyhgag0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ¼ å¼•å­ï¼šæ˜Ÿé™…ä»£ç æ•‘æ´åŠ«ï¼Œç†ŠçŒ«ä¾ é™·å¼•ç”¨è¿·å±€</h2>
<p>2147 å¹´ï¼Œâ€œé“¶æ²³ä»£ç æ•‘æ´é˜Ÿâ€ çš„æ——èˆ° â€œç¼–è¯‘è€…å·â€ æ­£æ‚¬æµ®åœ¨ç«æ˜Ÿè½¨é“ã€‚å¤§ç†ŠçŒ«ä¾¯ä½©ç©¿ç€é“¶ç°è‰²å¤ªç©ºæœï¼Œåœ¨å…¨æ¯æ“ä½œå°å‰æŠ“è€³æŒ è…®ï¼Œåœ†æ»šæ»šçš„èº«å­æŠŠåº§æ¤…å‹å¾—å¾®å¾®ä¸‹æ²‰ã€‚è¿™ä½è‡ªç§° â€œæ˜Ÿé™…å¼•ç”¨å¤§å¸ˆï¼Œå¤´äº®å´ä¸ç§ƒâ€ çš„ Swift å·¥ç¨‹å¸ˆï¼Œæ­¤åˆ»æ­£å¤„ç†ä¸€åœºç´§æ€¥äº‹æ•… â€”â€” ç«æ˜Ÿæ®–æ°‘åœ°çš„ â€œå±…æ°‘èº«ä»½ç³»ç»Ÿâ€ å› <code>weak var</code>å¼•å‘çº¿ç¨‹å®‰å…¨æ¼æ´ï¼Œå¯¼è‡´ 300 åå±…æ°‘çš„èº«ä»½æ•°æ®å¡åœ¨ â€œåŠé”€æ¯çŠ¶æ€â€ï¼Œæ—¢åˆ ä¸æ‰ä¹Ÿæ”¹ä¸äº†ï¼Œå¦‚åŒå¹½çµèˆ¬ç›˜è¸åœ¨æ•°æ®åº“ä¸­ã€‚</p>
<p>â€œè¿™<code>weak var</code>å°±æ˜¯é¢—å®šæ—¶ç‚¸å¼¹ï¼â€ ä¾¯ä½©å’¬ç€å¤ªç©ºå‹ç¼©åŒ…å­ï¼Œè±†æ²™é¦…ç²˜åœ¨å¤´ç›”é¢ç½©ä¸Šï¼Œâ€œæƒ³è®©å®ƒå¼±å¼•ç”¨ä¸å èµ„æºï¼Œå°±æ²¡æ³•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼›æƒ³åŠ <code>Sendable</code>åè®®ï¼Œåˆè¢«å®ƒâ€˜å¯ä¿®æ”¹â€™çš„ç‰¹æ€§å¡è„–å­ â€”â€” è¿™æ¯”æˆ‘åœ¨æœˆçƒèƒŒé¢æ‰¾è¡¥ç»™ç«™è¿˜ç¦»è°±ï¼Œè·¯ç—´éƒ½æ²¡è¿™ä¹ˆéš¾ï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2fda190855247aa89131d8eb060b714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679363&amp;x-signature=6HKbtH4a6zOU1oSHPJo%2BGasJ%2BDk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä»–å°è¯•ç”¨ â€œä¸´æ—¶å¼ºå¼•ç”¨ä¸­è½¬â€ çš„ç¬¨åŠæ³•ï¼Œç»“æœåˆšè¿è¡Œä»£ç ï¼Œæ§åˆ¶å°å°±å¼¹å‡º â€œæ•°æ®ç«äº‰è­¦å‘Šâ€ï¼Œç«æ˜Ÿæ®–æ°‘åœ°çš„èº«ä»½ç»ˆç«¯ç¬é—´è“å±ä¸€åŠã€‚å°±åœ¨ä¾¯ä½©å‡†å¤‡å¯åŠ¨ â€œå…¨é‡æ•°æ®å›æ»šâ€ï¼ˆç›¸å½“äºè®©æ®–æ°‘åœ°èº«ä»½ç³»ç»Ÿ â€œé‡å¯ä¸€å¤©â€ï¼‰æ—¶ï¼Œé£èˆ¹çš„å®‰å…¨èˆ±é—¨ç¼“ç¼“æ‰“å¼€ã€‚æ®·ç¦»ä¸€èº«æ·±ç´«è‰²æˆ˜æœ¯æœï¼Œè…°é—´åˆ«ç€æ›¾ç ´è§£è¿‡æ˜Ÿé™…ç—…æ¯’çš„ â€œä»£ç é“¶é­â€ï¼Œæ‰‹é‡Œæ‹¿ç€ä¸€ä»½æ³›é»„çš„äº‹æ•…æŠ¥å‘Š â€”â€” ä½œä¸ºåå¹´å‰ â€œé˜¿å°”æ³•æ˜Ÿç³»æ•°æ®å´©æºƒäº‹ä»¶â€ çš„äº²å†è€…ï¼Œå¥¹å¯¹è¿™ç§ â€œå¼•ç”¨å¤±æ§â€ çš„ç¾éš¾å†ç†Ÿæ‚‰ä¸è¿‡ã€‚</p>
<p>åœ¨æœ¬ç¯‡ç†ŠçŒ«å¤§å†’é™©ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ğŸ¼ å¼•å­ï¼šæ˜Ÿé™…ä»£ç æ•‘æ´åŠ«ï¼Œç†ŠçŒ«ä¾ é™·å¼•ç”¨è¿·å±€</li>
<li>ğŸ¯ 1. æ–°æ‹›æ­ç§˜ï¼šweak let çš„ â€œåŒé‡å®‰å…¨é”â€</li>
<li>âœ¨ 2. å®æˆ˜æ¼”ç»ƒï¼šèº«ä»½ç³»ç»Ÿçš„ â€œæ¼æ´ä¿®å¤æœ¯â€</li>
<li>âš ï¸ 3. å®‰å…¨çº¢çº¿ï¼šä¸å¯è§¦ç¢°çš„ â€œä¿®æ”¹ç¦åŒºâ€</li>
<li>ğŸš€ 4. æ ¸å¿ƒä¼˜åŠ¿ï¼šSendable çš„ â€œæ˜Ÿé™…é€šè¡Œè¯â€</li>
<li>ğŸ”® ç»“å°¾ï¼šæ•°æ®å¼‚åŠ¨ç°ç«¯å€ªï¼Œè§‚æµ‹åŠŸæ³•å¾…æ­ç§˜</li>
</ul>
<p>â€œ<strong>åˆ«å›æ»šã€‚</strong>â€ æ®·ç¦»çš„å£°éŸ³å†·é™å¦‚å†°ï¼Œå°†æŠ¥å‘Šæ‹åœ¨æ“ä½œå°ä¸Šï¼Œâ€œåå¹´å‰æˆ‘å°±æ˜¯é å›æ»šï¼Œè®©ç—…æ¯’è¶è™šè€Œå…¥ï¼Œå¯¼è‡´æ•´ä¸ªæ˜Ÿç³»çš„åŒ»ç–—æ•°æ®ä¸¢å¤±ã€‚ç°åœ¨æœ‰ SE-0481 çš„<code>weak let</code>ï¼Œèƒ½æ¯”å›æ»šæ›´ç¨³å¦¥åœ°è§£å†³é—®é¢˜ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a404b0caae34d62a50c0e15d4bccd69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679363&amp;x-signature=59KRweBtegBZplBq2uKfUjgix0k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ¯ 1. æ–°æ‹›æ­ç§˜ï¼šweak let çš„ â€œåŒé‡å®‰å…¨é”â€</h2>
<p>æ®·ç¦»æŒ‡å°–åˆ’è¿‡å…¨æ¯å±å¹•ï¼Œè°ƒå‡ºå½“å¹´çš„äº‹æ•…ä»£ç ä¸å¦‚ä»Šçš„è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼šâ€œSE-0481 è¿™é—¨æŠ€æœ¯ï¼Œå°±åƒç»™å¼•ç”¨è£…äº†â€˜åŒé‡å®‰å…¨é”â€™â€”â€”<code>weak let</code> æ—¢ä¿ç•™<code>weak</code>çš„â€˜è‡ªåŠ¨é”€æ¯â€™ç‰¹æ€§ï¼ˆå¯¹è±¡æ¶ˆå¤±æ—¶å¼•ç”¨è‡ªåŠ¨ç½®ç©ºï¼Œä¸å èµ„æºï¼‰ï¼ŒåˆåŠ ä¸Š<code>let</code>çš„â€˜ä¸å¯ä¿®æ”¹â€™é™åˆ¶ï¼ˆä¸€æ—¦èµ‹å€¼ï¼Œå†ä¹Ÿä¸èƒ½æ›´æ”¹å¼•ç”¨æŒ‡å‘ï¼‰ã€‚â€</p>
<p>ä¾¯ä½©ç›¯ç€å±å¹•ï¼Œçªç„¶æƒ³èµ·å¤ªç©ºæœçš„å®‰å…¨æ‰£è®¾è®¡ï¼šâ€œè¿™ä¸å°±åƒæˆ‘ä»¬çš„å¤´ç›”é”å—ï¼Ÿæ‰£ä¸Šåå°±æ‹†ä¸å¼€ï¼ˆä¸å¯ä¿®æ”¹ï¼‰ï¼Œä½†é‡åˆ°å±é™©ä¼šè‡ªåŠ¨å¼¹å¼€ï¼ˆè‡ªåŠ¨é”€æ¯ï¼‰ï¼Œæ—¢å®‰å…¨åˆä¸æŸç¼šé€ƒç”Ÿï¼Ÿâ€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8624eaeb0d194f67a33e29d3cd26175e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679363&amp;x-signature=1LeHlWtHjEVcSUfW%2FcGy%2FqZDHUY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œæœ‰ç‚¹é“ç†ã€‚â€ æ®·ç¦»å˜´è§’éš¾å¾—æ³›èµ·ä¸€ä¸å¼§åº¦ï¼Œæ‰‹æŒ‡ç‚¹å‘åå¹´å‰çš„äº‹æ•…ä»£ç ï¼Œâ€œå½“å¹´æˆ‘ç”¨<code>weak var</code>ï¼Œå°±åƒæ²¡é”æ­»çš„å®‰å…¨æ‰£ï¼Œç—…æ¯’è½»æ˜“ç¯¡æ”¹äº†å¼•ç”¨æŒ‡å‘ï¼Œè®©åŒ»ç–—æ•°æ®å˜æˆä¹±ç ã€‚ç°åœ¨<code>weak let</code>é”æ­»äº†ä¿®æ”¹è·¯å¾„ï¼Œå“ªæ€•æœ‰æ¼æ´ï¼Œä¹Ÿä¸ä¼šè®©å¼•ç”¨â€˜å›å˜â€™ã€‚â€ å¥¹é¡¿äº†é¡¿ï¼Œçœ¼ç¥æš—äº†æš—ï¼šâ€œå°±åƒæˆ‘å½“å¹´è¦æ˜¯æ—©ç‚¹æ‡‚è¿™ä¸ªï¼Œå°±ä¸ä¼šæœ‰é‚£ä¹ˆå¤šæ‚£è€…å› ä¸ºæ•°æ®ä¸¢å¤±è€½è¯¯æ²»ç–—ã€‚â€</p>
<hr/>
<h2 data-id="heading-2">âœ¨ 2. å®æˆ˜æ¼”ç»ƒï¼šèº«ä»½ç³»ç»Ÿçš„ â€œæ¼æ´ä¿®å¤æœ¯â€</h2>
<p>æ®·ç¦»æ¥è¿‡æ“ä½œæƒï¼ŒæŒ‡å°–åœ¨è™šæ‹Ÿé”®ç›˜ä¸Šç¿»é£ï¼Œå¦‚åŒæŒ¥èˆé“¶é­èˆ¬åˆ©è½ï¼Œå¾ˆå¿«å†™å‡ºä¿®å¤ä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å±…æ°‘èº«ä»½ç±»ï¼šéµå¾ªSendableï¼Œç¡®ä¿è·¨æ˜Ÿçƒæ•°æ®å®‰å…¨ä¼ è¾“</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MarsResident</span>: <span class="hljs-title class_">Sendable</span> {
    <span class="hljs-keyword">let</span> residentID <span class="hljs-operator">=</span> <span class="hljs-type">UUID</span>() <span class="hljs-comment">// å±…æ°‘å”¯ä¸€æ ‡è¯†ï¼Œå¦‚åŒèº«ä»½è¯å·</span>
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>        <span class="hljs-comment">// å±…æ°‘å§“åï¼Œåˆå§‹åŒ–åå›ºå®š</span>
    <span class="hljs-keyword">init</span>(<span class="hljs-params">name</span>: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.name <span class="hljs-operator">=</span> name
    }
}

<span class="hljs-comment">// èº«ä»½ä¼šè¯ç±»ï¼šè¿æ¥å±…æ°‘æ•°æ®ä¸ç»ˆç«¯ç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å—</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdentitySession</span>: <span class="hljs-title class_">Sendable</span> {
    <span class="hljs-comment">// âœ… weak letï¼šåŒé‡å®‰å…¨é”â€”â€”ä¸å¯ä¿®æ”¹ + è‡ªåŠ¨é”€æ¯</span>
    <span class="hljs-keyword">weak</span> <span class="hljs-keyword">let</span> resident: <span class="hljs-type">MarsResident</span>?
    
    <span class="hljs-keyword">init</span>(<span class="hljs-params">resident</span>: <span class="hljs-type">MarsResident</span>?) {
        <span class="hljs-keyword">self</span>.resident <span class="hljs-operator">=</span> resident <span class="hljs-comment">// åˆå§‹åŒ–æ—¶ç»‘å®šå±…æ°‘ï¼Œæ­¤åä¸å¯æ›´æ”¹</span>
    }
    
    <span class="hljs-comment">// éªŒè¯å±…æ°‘èº«ä»½ï¼Œä¿®å¤æ¼æ´çš„æ ¸å¿ƒæ–¹æ³•</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">getValidIdentity</span>() -&gt; <span class="hljs-type">String</span> {
        <span class="hljs-comment">// è‹¥å±…æ°‘æ•°æ®å·²é”€æ¯ï¼Œè¿”å›â€œæ— æ•ˆèº«ä»½â€ï¼Œé¿å…å¹½çµæ•°æ®</span>
        <span class="hljs-keyword">return</span> resident<span class="hljs-operator">?</span>.name <span class="hljs-operator">??</span> <span class="hljs-string">"æ— æ•ˆèº«ä»½ï¼ˆæ•°æ®å·²æ¸…ç†ï¼‰"</span>
    }
}
</code></pre>
<p>â€œä½ çœ‹ï¼Œè¿™æ ·<code>IdentitySession</code>å°±èƒ½å®‰å…¨è·¨æ˜Ÿçƒä¼ è¾“äº†ã€‚â€ æ®·ç¦»æŒ‡ç€ä»£ç ï¼Œâ€œä»¥å‰ç”¨<code>weak var</code>ï¼Œå°±åƒç»™èº«ä»½ç»ˆç«¯è£…äº†â€˜å¯ç¯¡æ”¹çš„å¤§é—¨â€™ï¼Œçº¿ç¨‹å®‰å…¨åè®®æ ¹æœ¬ä¸æ•¢æ”¾è¡Œï¼›ç°åœ¨<code>weak let</code>é”æ­»äº†ä¿®æ”¹è·¯å¾„ï¼Œ<code>Sendable</code>åè®®ç›´æ¥é€šè¿‡ï¼Œæ•°æ®ä¼ è¾“æ—¶å†ä¹Ÿä¸ä¼šè§¦å‘è“å±ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a91e69effab4e009efaf98698662443~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679363&amp;x-signature=9rGpVXqFfDy4E7VYxvcrI7TkUwY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©è¿«ä¸åŠå¾…åœ°åœ¨æµ‹è¯•ç¯å¢ƒè¿è¡Œä»£ç ï¼ŒåŸæœ¬è“å±çš„ç»ˆç«¯é€æ¸æ¢å¤æ­£å¸¸ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åˆ›å»ºå±…æ°‘æ•°æ®ï¼Œæ¨¡æ‹Ÿæ­£å¸¸ç”¨æˆ·</span>

<span class="hljs-keyword">var</span> alice: <span class="hljs-type">MarsResident</span>? <span class="hljs-operator">=</span> <span class="hljs-type">MarsResident</span>(name: <span class="hljs-string">"Alice"</span>)

<span class="hljs-comment">// ç»‘å®šèº«ä»½ä¼šè¯ï¼Œå»ºç«‹å®‰å…¨è¿æ¥</span>

<span class="hljs-keyword">let</span> aliceSession <span class="hljs-operator">=</span> <span class="hljs-type">IdentitySession</span>(resident: alice)

<span class="hljs-comment">// éªŒè¯èº«ä»½ï¼šè¾“å‡ºâ€œAliceâ€ï¼Œæ•°æ®æ­£å¸¸</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å±…æ°‘èº«ä»½ï¼š<span class="hljs-subst">\\</span>(aliceSession.getValidIdentity())"</span>)

<span class="hljs-comment">// æ¸…ç†è¿‡æœŸå±…æ°‘æ•°æ®ï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ³¨é”€</span>

alice <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>

<span class="hljs-comment">// éªŒè¯èº«ä»½ï¼šè¾“å‡ºâ€œæ— æ•ˆèº«ä»½â€ï¼Œå¼•ç”¨è‡ªåŠ¨ç½®ç©ºï¼Œæ— å¹½çµæ•°æ®</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å±…æ°‘èº«ä»½ï¼š<span class="hljs-subst">\\</span>(aliceSession.getValidIdentity())"</span>)
</code></pre>
<p>â€œå¤ªç‰›äº†ï¼â€ ä¾¯ä½©æ‘˜ä¸‹å¤´ç›”ï¼Œéœ²å‡ºåœ†æ»šæ»šçš„è„‘è¢‹ï¼Œâ€œä»¥å‰æ¸…ç†æ•°æ®å¾—å†™ä¸‰è¡Œåˆ¤æ–­ï¼Œç°åœ¨ä¸€è¡Œ<code>weak let</code>æå®šï¼Œè¿˜ä¸ä¼šè§¦å‘æ¼æ´ â€”â€” æˆ‘è¿™å¤´ç»å¯¹ä¸ç§ƒï¼Œç»ˆäºä¸ç”¨ä¸ºå¼•ç”¨é—®é¢˜æ„æ‰æ¯›äº†ï¼â€</p>
<hr/>
<h2 data-id="heading-3">âš ï¸ 3. å®‰å…¨çº¢çº¿ï¼šä¸å¯è§¦ç¢°çš„ â€œä¿®æ”¹ç¦åŒºâ€</h2>
<p>æ®·ç¦»çªç„¶æŒ‰ä½ä¾¯ä½©å‡†å¤‡æäº¤ä»£ç çš„æ‰‹ï¼Œçœ¼ç¥å˜å¾—é”åˆ©ï¼šâ€œåˆ«ç€æ€¥æäº¤ï¼Œ<code>weak let</code>æœ‰æ¡ç»å¯¹ä¸èƒ½ç¢°çš„çº¢çº¿ â€”â€” åˆå§‹åŒ–åï¼Œç»å¯¹ä¸èƒ½ä¿®æ”¹å¼•ç”¨ï¼Œå“ªæ€•æ˜¯æƒ³æ‰‹åŠ¨ç½®ç©ºä¹Ÿä¸è¡Œã€‚â€</p>
<p>å¥¹è°ƒå‡ºä¸¤æ®µé”™è¯¯ä»£ç ï¼Œçº¢è‰²çš„ç¼–è¯‘è­¦å‘Šå¦‚åŒè­¦ç¤ºç¯èˆ¬åˆºçœ¼ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> bobSession <span class="hljs-operator">=</span> <span class="hljs-type">IdentitySession</span>(resident: <span class="hljs-type">MarsResident</span>(name: <span class="hljs-string">"Bob"</span>))

<span class="hljs-comment">// âŒ ç¼–è¯‘æŠ¥é”™ï¼šweak letä¸å¯ä¿®æ”¹ï¼Œå¦‚åŒé”æ­»çš„å®‰å…¨æ‰£ä¸èƒ½å¼ºè¡Œæ‹†å¼€</span>

<span class="hljs-comment">// bobSession.resident = MarsResident(name: "Charlie")</span>

<span class="hljs-comment">// âŒ ç¼–è¯‘æŠ¥é”™ï¼šå“ªæ€•æ‰‹åŠ¨ç½®ç©ºä¹Ÿä¸è¡Œï¼Œåªèƒ½ç­‰å¯¹è±¡è‡ªç„¶é”€æ¯</span>

<span class="hljs-comment">// bobSession.resident = nil</span>
</code></pre>
<p>â€œè¿™å°±åƒå¤ªç©ºæœçš„æ°§æ°”é˜€ï¼Œä¸€æ—¦è®¾å®šå¥½æµé‡ï¼Œå°±ä¸èƒ½éšä¾¿æ‹§ï¼Œä¸ç„¶è¦ä¹ˆç¼ºæ°§è¦ä¹ˆçˆ†æ‰ã€‚â€ æ®·ç¦»çš„è¯­æ°”å¸¦ç€è­¦å‘Šï¼Œâ€œå½“å¹´æˆ‘å°±æ˜¯å¼ºè¡Œä¿®æ”¹<code>weak var</code>çš„å¼•ç”¨ï¼Œæ‰è®©ç—…æ¯’é’»äº†ç©ºå­ â€”â€” æŠ€æœ¯é‡Œçš„â€˜ä¸èƒ½æ”¹â€™ï¼Œä»æ¥éƒ½ä¸æ˜¯é™åˆ¶ï¼Œè€Œæ˜¯ä¿æŠ¤ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80fb17cc322d494e83c450d1f338207d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679363&amp;x-signature=y46DLI4cXvGdKbMprmFnAGmhc6c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©èµ¶ç´§æŠŠè¿™æ¡è§„åˆ™è®°åœ¨å¤ªç©ºæœçš„å¤‡å¿˜å½•é‡Œï¼šâ€œæ‡‚äº†ï¼è¿™å°±åƒåƒå‹ç¼©åŒ…å­ï¼Œæ‹†å¼€åŒ…è£…å°±å¾—åƒå®Œï¼ˆåˆå§‹åŒ–èµ‹å€¼ï¼‰ï¼Œä¸èƒ½æ¢åˆ«çš„å£å‘³ï¼ˆä¿®æ”¹å¼•ç”¨ï¼‰ï¼Œè¦æ˜¯åƒä¸å®Œåªèƒ½æ‰”ï¼ˆå¯¹è±¡é”€æ¯ï¼‰â€”â€” ä¸è¿‡æˆ‘è‚¯å®šèƒ½è®°ä½ï¼Œæ¯•ç«Ÿæµªè´¹åŒ…å­æ˜¯ç½ªè¿‡ï¼â€</p>
<hr/>
<h2 data-id="heading-4">ğŸš€ 4. æ ¸å¿ƒä¼˜åŠ¿ï¼šSendable çš„ â€œæ˜Ÿé™…é€šè¡Œè¯â€</h2>
<p>â€œ<code>weak let</code>æœ€å¤§çš„ä»·å€¼ï¼Œé™¤äº†å®‰å…¨ï¼Œå°±æ˜¯èƒ½è®©ç±»é¡ºåˆ©æ‹¿åˆ°<code>Sendable</code>çš„â€˜æ˜Ÿé™…é€šè¡Œè¯â€™ã€‚â€ æ®·ç¦»è°ƒå‡ºè·¨æ˜Ÿçƒæ•°æ®ä¼ è¾“çš„æ—¥å¿—ï¼Œâ€œä»¥å‰ç”¨<code>weak var</code>ï¼Œå°±åƒæ²¡æœ‰ç­¾è¯çš„æ¸¸å®¢ï¼Œæ ¹æœ¬æ²¡æ³•é€šè¿‡æ˜Ÿé™…ä»£ç å®‰æ£€ï¼›ç°åœ¨<code>weak let</code>é”æ­»äº†ä¿®æ”¹è·¯å¾„ï¼Œå®‰æ£€ç³»ç»Ÿæ‰ä¼šæ”¾è¡Œã€‚â€</p>
<p>å¥¹è§£é‡Šé“ï¼š<code>Sendable</code>åè®®è¦æ±‚ç±»å‹ â€œçŠ¶æ€ç¨³å®šâ€ï¼Œèƒ½å®‰å…¨è·¨çº¿ç¨‹ã€è·¨è®¾å¤‡ä¼ è¾“ã€‚<code>weak var</code>å› ä¸ºå¯ä»¥éšæ—¶ä¿®æ”¹ï¼Œå°±åƒä¸ª â€œéšæ—¶ä¼šå˜å¦çš„åŒä¼´â€ï¼Œè‡ªç„¶ä¸è¢«ä¿¡ä»»ï¼›è€Œ<code>weak let</code>ä¸€æ—¦èµ‹å€¼å°±ç¨³å®šä¸å˜ï¼Œåªåœ¨å¯¹è±¡é”€æ¯æ—¶ â€œä½“é¢é€€åœºâ€ï¼Œå®Œå…¨ç¬¦åˆ<code>Sendable</code>çš„è¦æ±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51d03884a85a42d0a7c48506e1cfe8fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679363&amp;x-signature=i4TkvvPOOfTbC14w0b9oqH8thlM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œè¿™å¯¹ç«æ˜Ÿæ®–æ°‘åœ°å¤ªé‡è¦äº†ï¼â€ ä¾¯ä½©çœ‹ç€æ¢å¤æ­£å¸¸çš„èº«ä»½ç»ˆç«¯ï¼Œâ€œä»¥åå±…æ°‘æ•°æ®åœ¨åœ°çƒå’Œç«æ˜Ÿä¹‹é—´ä¼ è¾“ï¼Œå†ä¹Ÿä¸ç”¨åå¤æ ¡éªŒï¼Œçœä¸‹æ¥çš„æ—¶é—´èƒ½å¤šé€ä¸¤æ‰¹è¡¥ç»™ â€”â€” è¯´ä¸å®šè¿˜èƒ½å¤šå¸¦ç‚¹åŒ…å­å‘¢ï¼â€</p>
<hr/>
<h2 data-id="heading-5">ğŸ”® ç»“å°¾ï¼šæ•°æ®å¼‚åŠ¨ç°ç«¯å€ªï¼Œè§‚æµ‹åŠŸæ³•å¾…æ­ç§˜</h2>
<p>å°±åœ¨ä¾¯ä½©æäº¤ä¿®å¤ä»£ç ï¼Œç«æ˜Ÿå±…æ°‘çº·çº·æ¢å¤èº«ä»½è®¤è¯æ—¶ï¼Œé£èˆ¹çš„è­¦æŠ¥çªç„¶å“èµ·ã€‚å…¨æ¯å±å¹•ä¸Šï¼Œæ‰€æœ‰å±…æ°‘çš„èº«ä»½æ•°æ®å¼€å§‹é—ªçƒï¼Œè™½ç„¶æ²¡æœ‰å´©æºƒï¼Œä½†æ¯ä¸€æ¬¡é—ªçƒéƒ½ä¼´éšç€ç»†å¾®çš„æ•°å€¼åå·® â€”â€” å°±åƒæœ‰åŒçœ¼ç›åœ¨æš—ä¸­ç›¯ç€æ•°æ®å˜åŒ–ã€‚</p>
<p>â€œæ€ä¹ˆå›äº‹ï¼Ÿâ€ ä¾¯ä½©ç¬é—´ç»·ç´§ç¥ç»ï¼Œæ‰‹æŒ‰åœ¨ç´§æ€¥åˆ¶åŠ¨æŒ‰é’®ä¸Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74d0660c3f1948bba2faabcb6b753d28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679363&amp;x-signature=EeS4o8gH%2BSx0RKlgNieOpOKzmBg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ®·ç¦»ç›¯ç€å±å¹•ä¸Šçš„æ³¢åŠ¨æ›²çº¿ï¼Œçœ‰å¤´ç´§é”ï¼šâ€œæ˜¯æ•°æ®è§‚æµ‹å‡ºäº†é—®é¢˜ã€‚æˆ‘ä»¬ç°åœ¨åªèƒ½è¢«åŠ¨ç­‰æ•°æ®å´©æºƒï¼Œå´æ²¡æ³•å®æ—¶ç›‘æ§å®ƒçš„å˜åŒ– â€”â€” å°±åƒå½“å¹´ç—…æ¯’æ½œä¼æ—¶ï¼Œæˆ‘è¦æ˜¯èƒ½æ—©ç‚¹å‘ç°æ•°æ®å¼‚åŠ¨ï¼Œä¹Ÿä¸ä¼šé…¿æˆå¤§é”™ã€‚â€</p>
<p>å¥¹çªç„¶æƒ³èµ·ä»€ä¹ˆï¼Œä»æˆ˜æœ¯æœçš„å£è¢‹é‡Œæå‡ºä¸€ä»½åŠ å¯†æ–‡ä»¶ï¼šâ€œæˆ‘åœ¨å®‰å…¨å±€è§è¿‡ä¸€ä»½è‰æ¡ˆï¼ŒSE-0475 æœ‰ä¸ª<code>Observations</code>ç»“æ„ä½“ï¼Œèƒ½åƒ SwiftUI ç›‘æ§è§†å›¾é‚£æ ·ï¼Œå®æ—¶è§‚æµ‹æ•°æ®å˜åŒ–ã€‚è¦æ˜¯èƒ½æ‹¿åˆ°è¿™ä»½æŠ€æœ¯ï¼Œä¸‹æ¬¡å†é‡åˆ°è¿™ç§å¼‚åŠ¨ï¼Œæˆ‘ä»¬å°±èƒ½æå‰æ‹¦æˆªã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6a05135ef3a4351a3da705673f87527~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679363&amp;x-signature=y1YwFPk%2Bx2Eqt2uU7rldu7ZzyoA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©çœ‹ç€å±å¹•ä¸Šé—ªçƒçš„æ•°æ®ï¼Œåˆçœ‹äº†çœ‹åŠ å¯†æ–‡ä»¶çš„å°é¢ï¼Œå¥½å¥‡å¿ƒè¢«å½»åº•å‹¾èµ·ï¼šâ€œé‚£è¿˜ç­‰ä»€ä¹ˆï¼Ÿä¸‹æ¬¡å’±ä»¬å°±å»å®‰å…¨å±€æ‹¿è¿™ä»½è‰æ¡ˆï¼ŒæŠŠè¿™â€˜æ•°æ®è§‚æµ‹æœ¯â€™å­¦ä¼š â€”â€” ä¸ç„¶æˆ‘è¿™æ˜Ÿé™…æ•‘æ´é˜Ÿçš„æ‹›ç‰Œï¼Œè¿Ÿæ—©è¦è¢«å¼‚åŠ¨æ•°æ®ç ¸äº†ï¼â€</p>
<p>æ¬²çŸ¥ SE-0475 çš„<code>Observations</code>å¦‚ä½•å®æ—¶ç›‘æ§æ•°æ®å˜åŒ–ï¼Œä¾¯ä½©å’Œæ®·ç¦»åˆèƒ½å¦é¡ºåˆ©æ‹¿åˆ°æŠ€æœ¯è‰æ¡ˆï¼Œä¸”å¬ä¸‹å›åˆ†è§£ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25d6738c31bf479d9bff9cd81baa5c43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679363&amp;x-signature=DLXp1X9e6Zu9fLUl2PxdnX4BkLI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬ä¹ç¯‡ï¼‰ï¼šObservations çš„æ°‘å›½æ¡£æ¡ˆé•‡é‚ªæœ¯]]></title>    <link>https://juejin.cn/post/7580303864605507593</link>    <guid>https://juejin.cn/post/7580303864605507593</guid>    <pubDate>2025-12-07T02:31:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580303864605507593" data-draft-id="7580374090365091878" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬ä¹ç¯‡ï¼‰ï¼šObservations çš„æ°‘å›½æ¡£æ¡ˆé•‡é‚ªæœ¯"/> <meta itemprop="keywords" content="Swift,Apple,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-07T02:31:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬ä¹ç¯‡ï¼‰ï¼šObservations çš„æ°‘å›½æ¡£æ¡ˆé•‡é‚ªæœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:31:24.000Z" title="Sun Dec 07 2025 02:31:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c21e34ea1fd4cf49fd6d9029bb73c4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=CAwkbSAtmdoG9qWyjGFw0Ogy%2FT8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ¼å¼•å­ï¼šæŠ¥ç¤¾æ¡£æ¡ˆè¯¡å˜åŠ«ï¼Œç†ŠçŒ«ä¾ é™·æ•°æ®è¿·é­‚é˜µ</h2>
<p>æ°‘å›½äºŒåäº”å¹´ï¼Œæ²ªä¸Š â€œç”³æŠ¥â€ æŠ¥ç¤¾çš„è€æ¡£æ¡ˆå®¤é‡Œï¼Œç…¤æ²¹ç¯çš„ç«è‹—å¿½æ˜å¿½æš—ï¼Œæ˜ å¾—æ»¡å¢™æ³›é»„çš„æŠ¥çº¸å½±å­å¦‚åŒé¬¼é­…ã€‚å¤§ç†ŠçŒ«ä¾¯ä½©ç¼©åœ¨è—¤æ¤…ä¸Šï¼Œæ‰‹æŒ‡åœ¨è€å¼æ‰“å­—æœºæ”¹é€ çš„ä»£ç ç»ˆç«¯ä¸Šå“†å—¦ï¼Œåœ†æ»šæ»šçš„èº«å­è£¹ç€åšæ£‰è¢„ï¼Œè¿˜æ˜¯å†·å¾—ç›´æ‰“é¢¤ã€‚</p>
<p>è¿™ä½è‡ªç§° â€œæ¡£æ¡ˆæ•´ç†è¾¾äººï¼Œå¤´äº®ç»ä¸ç§ƒâ€ çš„ Swift å·¥ç¨‹å¸ˆï¼Œæ­¤åˆ»æ­£è¢«ä¸€æ¡©è¯¡å¼‚äº‹ä»¶ç¼ ä¸Š â€”â€” ä»–ä»¬æ¥æ‰‹çš„ â€œæ°‘å›½çµå¼‚æ¡ˆä»¶æ¡£æ¡ˆåº“â€ï¼Œå…¶ä¸­ã€Šä¸‰åå¹´ä»£è€å®…é—¹é¬¼æ¡ˆã€‹çš„å…³é”®æ•°æ®é¢‘é¢‘ â€œè‡ªå·±ä¹±åŠ¨â€ï¼šæ˜æ˜åˆšå½•å¥½çš„ â€œæ¡ˆå‘æ—¶é—´â€ æ˜¯ 1932 å¹´ï¼Œä¿å­˜åå†æ‰“å¼€å°±å˜æˆ 1912 å¹´ï¼›â€œå—å®³äººæ•°â€ å¡« 3ï¼Œè½¬çœ¼å°±è·³æˆ 7ï¼Œæ´»åƒæœ‰åŒæ— å½¢çš„æ‰‹åœ¨ç¯¡æ”¹è®°å½•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37a6e97ee7bd441d867c0184a4b9eecd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=h5iuE6ZCDV7e1ewWTOOOlWLfwwY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œè¿™ç ´æ¡£æ¡ˆæ˜¯æ’é‚ªäº†ï¼Ÿâ€ ä¾¯ä½©å’¬ç€åˆšä¹°çš„ç³–ç‚’æ —å­ï¼Œæ —å­å£³æ‰åœ¨ç»ˆç«¯é”®ç›˜ç¼é‡Œï¼Œâ€œç”¨è€åŠæ³•å†™çš„ç›‘å¬ä»£ç ï¼Œè¦ä¹ˆæŠ“ä¸åˆ°ç¯¡æ”¹ç—•è¿¹ï¼Œè¦ä¹ˆä¸€ç›‘å¬å°±æ­»æœºï¼Œæ¯”æˆ‘åœ¨å¼„å ‚é‡Œæ‰¾ç™¾å¹´åŒ…å­é“ºè¿˜éš¾ â€”â€” è·¯ç—´éƒ½æ²¡è¿™ä¹ˆç¦»è°±ï¼â€</p>
<p>ä»–è¯•ç€ç»™æ¡£æ¡ˆæ•°æ®åŠ äº†ä¸¤é“ â€œæ ¡éªŒé”â€ï¼Œç»“æœå½“æ™šç»ˆç«¯çªç„¶è‡ªåŠ¨å¼€æœºï¼Œå±å¹•ä¸Šçš„ã€Šè€å®…é—¹é¬¼æ¡ˆã€‹æ¡£æ¡ˆé¡µåå¤é—ªçƒï¼Œæœ€åä¸€è¡Œå­—æ…¢æ…¢æµ®ç°ï¼šâ€œåˆ«å¤šç®¡é—²äº‹â€ã€‚ä¾¯ä½©å“å¾—å·®ç‚¹æŠŠæ —å­æ‰”å‡ºå»ï¼Œæ­£å‡†å¤‡é”äº†æ¡£æ¡ˆå®¤è·‘è·¯æ—¶ï¼Œæœ¨é—¨ â€œå±å‘€â€ ä¸€å£°è¢«æ¨å¼€ã€‚æ®·ç´ ç´ ä¸€èº«æœˆç™½è‰²æ——è¢ï¼Œæ‰‹é‡Œæ‹ç€ä¸ªè£…ç€ç½—ç›˜å’Œé»„ç¬¦çš„é”¦ç›’ï¼Œèº«åè·Ÿç€ä¸ªæ‹ç…¤æ²¹ç¯çš„å°ä¸«é¬Ÿ â€”â€” ä½œä¸ºä¸‰å¹´å‰ â€œè‹å·è€å®…å·å®—è¯…å’’â€ çš„ç ´è§£è€…ï¼Œå¥¹å¯¹è¿™ç§ â€œæ•°æ®æ²¾é‚ªâ€ çš„æƒ…å†µå†ç†Ÿæ‚‰ä¸è¿‡ã€‚</p>
<p>åœ¨æœ¬æ¬¡ç†ŠçŒ«å¤§å†’é™©ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ğŸ¼å¼•å­ï¼šæŠ¥ç¤¾æ¡£æ¡ˆè¯¡å˜åŠ«ï¼Œç†ŠçŒ«ä¾ é™·æ•°æ®è¿·é­‚é˜µ</li>
<li>ğŸ¯ 1. æ–°æ‹›æ­ç§˜ï¼šObservations çš„ â€œæ•°æ®é•‡é‚ªçœ¼â€</li>
<li>âœ¨ 2. å®æˆ˜æ¼”ç»ƒï¼šçµå¼‚æ¡£æ¡ˆçš„ â€œé•‡é‚ªä»£ç â€</li>
<li>âš ï¸ 3. é•‡é‚ªæˆ’å¾‹ï¼šä¸å¯è¿èƒŒçš„ â€œä½¿ç”¨ç¦å¿Œâ€</li>
<li>ğŸš€ 4. æ ¸å¿ƒä¼˜åŠ¿ï¼šæ— æ‹˜æ— æŸçš„ â€œé•‡é‚ªè‡ªç”±â€</li>
<li>ğŸ”® ç»“å°¾ï¼šå¹¶å‘é‚ªç¥Ÿç°ç«¯å€ªï¼Œå…¨å±€ Actor å¾…é•‡é‚ª</li>
</ul>
<p>â€œåˆ«é”é—¨ã€‚â€ æ®·ç´ ç´ çš„å£°éŸ³æ¸…å†·å¦‚æœˆä¸‹äº•æ°´ï¼Œæ‰‹é‡Œçš„ç½—ç›˜æŒ‡é’ˆç–¯ç‹‚è½¬åŠ¨ï¼Œâ€œä¸‰å¹´å‰æˆ‘å°±æ˜¯é”äº†è‹å·è€å®…çš„æ¡£æ¡ˆå®¤ï¼Œç»“æœæ•´æ ‹æ¥¼çš„å·å®—å…¨è¢«â€˜ç¼ ä¸Šâ€™ï¼Œæœ€åçƒ§äº†åŠæ ‹æ¥¼æ‰å‹ä¸‹å»ã€‚ç°åœ¨æœ‰ SE-0475 çš„<code>Transactional Observation of Values</code>ï¼Œèƒ½æ¯”çƒ§æ¥¼æ›´ç¨³å¦¥åœ°é•‡ä½è¿™â€˜æ•°æ®é‚ªç¥Ÿâ€™ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df3c54c7a1c64d01886d2e99fa398dd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=m5u3jHdOBd3eTKzIYkImSL0tjuw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ¯ 1. æ–°æ‹›æ­ç§˜ï¼šObservations çš„ â€œæ•°æ®é•‡é‚ªçœ¼â€</h2>
<p>æ®·ç´ ç´ æŠŠé”¦ç›’æ”¾åœ¨æ¡Œä¸Šï¼Œæ‰“å¼€åå´æ²¡æ‹¿é»„ç¬¦ï¼Œè€Œæ˜¯æå‡ºä¸€å å†™ç€ä»£ç çš„ç¨¿çº¸ï¼šâ€œSE-0475 è¿™é—¨æŠ€æœ¯ï¼Œå°±åƒç»™æ•°æ®è£…äº†â€˜é˜´é˜³çœ¼â€™â€”â€”<code>Observations</code><strong>ç»“æ„ä½“</strong>ç”¨é—­åŒ…å½“â€˜å¼•é­‚é˜µâ€™ï¼Œèƒ½ç›¯ç€æ‰€æœ‰<code>@Observable</code>æ ‡è®°çš„â€˜çµå¼‚æ•°æ®â€™ï¼Œåªè¦æ•°æ®ä¸€è¢«ç¯¡æ”¹ï¼Œå°±ä¼šé€šè¿‡<code>AsyncSequence</code>â€˜æ˜¾å½¢â€™ï¼ŒæŠŠæ–°å€¼â€˜æŠ¥â€™å‡ºæ¥ã€‚ç®€å•è¯´ï¼Œå®ƒèƒ½åƒé“å£«ç”»ç¬¦é•‡é‚ªä¸€æ ·ï¼Œè®©çœ‹ä¸è§çš„æ•°æ®å˜åŠ¨â€˜ç°åŸå½¢â€™ï¼Œè¿˜ä¸ç”¨é çƒ§çº¸åšæ³•ã€‚â€</p>
<p>ä¾¯ä½©ç›¯ç€ç¨¿çº¸ä¸Šçš„ä»£ç ï¼Œåˆçœ‹äº†çœ‹å±å¹•ä¸Šé—ªçƒçš„æ¡£æ¡ˆï¼Œçªç„¶æƒ³èµ·è¯´ä¹¦å…ˆç”Ÿè®²çš„ â€œå¤©çœ¼é€šâ€ï¼šâ€œè¿™ä¸å°±åƒé“å£«å¼€äº†å¤©çœ¼ï¼Œèƒ½çœ‹è§å¸¸äººçœ‹ä¸è§çš„é¬¼é­‚ï¼Ÿ<code>Observations</code>å°±æ˜¯ç»™ä»£ç å¼€äº†â€˜æ•°æ®å¤©çœ¼â€™ï¼Œèƒ½çœ‹è§æ— å½¢çš„ç¯¡æ”¹ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a00c5202e1e44f8bc67286b35ceec7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=gr8ic40Zqhh%2BE0Q6VUoL0vl3azM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œç®—ä½ æœ‰ç‚¹æ‚Ÿæ€§ã€‚â€ æ®·ç´ ç´ æ‹¿èµ·ä¸€æ”¯æ¯›ç¬”ï¼Œåœ¨ç¨¿çº¸ä¸Šåœˆå‡ºå…³é”®ä»£ç ï¼Œâ€œä¸‰å¹´å‰æˆ‘åœ¨è‹å·è€å®…ï¼Œå°±æ˜¯å› ä¸ºæ²¡â€˜å¼€å¤©çœ¼â€™ï¼Œçœ¼çççœ‹ç€å·å®—æ•°æ®è¢«æ”¹å¾—é¢ç›®å…¨éï¼Œæœ€åè¿˜å¾—é è€é“é•¿çš„ç¬¦çº¸æ‰ç¨³ä½ã€‚ç°åœ¨<code>Observations</code>ä¸ç”¨ç¬¦çº¸ï¼Œé ä»£ç å°±èƒ½â€˜é•‡ä½â€™æ•°æ®ï¼Œæ¯”é“å£«åšæ³•è¿˜é è°±ã€‚â€ å¥¹é¡¿äº†é¡¿ï¼Œçœ¼ç¥æš—äº†æš—ï¼šâ€œå°±åƒå½“å¹´è¦æ˜¯æœ‰è¿™æŠ€æœ¯ï¼Œä¹Ÿä¸ä¼šè®©é‚£æˆ·äººå®¶çš„ç¥–ä¼ è´¦æœ¬è¢«â€˜ç¼ ä¸Šâ€™ï¼Œæœ€åè¿å®¶åº•éƒ½ç®—ä¸æ¸…ã€‚â€</p>
<hr/>
<h2 data-id="heading-2">âœ¨ 2. å®æˆ˜æ¼”ç»ƒï¼šçµå¼‚æ¡£æ¡ˆçš„ â€œé•‡é‚ªä»£ç â€</h2>
<p>æ®·ç´ ç´ æ¥è¿‡ä¾¯ä½©çš„ç»ˆç«¯ï¼Œæ‰‹æŒ‡åœ¨é”®ç›˜ä¸Šæ•²å¾—é£å¿«ï¼Œå£°éŸ³å´ä¾æ—§å¹³ç¨³ï¼šâ€œå…ˆç»™â€˜é—¹é¬¼æ¡£æ¡ˆâ€™å»ºä¸ªâ€˜é•‡é‚ªæ¡†æ¶â€™ï¼Œç”¨<code>@Observable</code>æ ‡è®°å®¹æ˜“è¢«ç¯¡æ”¹çš„æ•°æ®ï¼Œå†ç”¨<code>Observations</code>ç”»â€˜ç›‘æ§ç¬¦â€™ã€‚â€</p>
<p>å¾ˆå¿«ï¼Œå±å¹•ä¸Šå‡ºç°äº†ä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ°‘å›½çµå¼‚æ¡ˆä»¶æ¡£æ¡ˆç±»ï¼š@Observableç›¸å½“äºç»™æ•°æ®è´´äº†â€œé•‡é‚ªç¬¦â€ï¼Œæ ‡è®°éœ€ç›‘æ§çš„å¯¹è±¡</span>
<span class="hljs-meta">@Observable</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GhostCaseRecord</span> {
    <span class="hljs-keyword">var</span> caseYear: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>    <span class="hljs-comment">// æ¡ˆå‘å¹´ä»½ï¼ˆæ˜“è¢«ç¯¡æ”¹çš„å…³é”®æ•°æ®ï¼‰</span>
    <span class="hljs-keyword">var</span> victimCount: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-comment">// å—å®³äººæ•°ï¼ˆæ˜“è¢«ç¯¡æ”¹çš„å…³é”®æ•°æ®ï¼‰</span>
    <span class="hljs-keyword">var</span> caseName: <span class="hljs-type">String</span>     <span class="hljs-comment">// æ¡ˆä»¶åç§°ï¼ˆå›ºå®šä¸å˜ï¼Œæ— éœ€é‡ç‚¹ç›‘æ§ï¼‰</span>
    
    <span class="hljs-keyword">init</span>(<span class="hljs-params">caseName</span>: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.caseName <span class="hljs-operator">=</span> caseName
    }
}

<span class="hljs-comment">// åˆ›å»ºã€Šä¸‰åå¹´ä»£è€å®…é—¹é¬¼æ¡ˆã€‹æ¡£æ¡ˆå®ä¾‹ï¼Œç›¸å½“äºâ€œè¯·å‡ºâ€è¦é•‡é‚ªçš„å·å®—</span>
<span class="hljs-keyword">let</span> oldHouseCase <span class="hljs-operator">=</span> <span class="hljs-type">GhostCaseRecord</span>(caseName: <span class="hljs-string">"ä¸‰åå¹´ä»£è€å®…é—¹é¬¼æ¡ˆ"</span>)
<span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼šå…ˆå¡«æ­£ç¡®çš„åˆå§‹å€¼ï¼Œç›¸å½“äºâ€œç»™å·å®—å¼€å…‰â€</span>
oldHouseCase.caseYear <span class="hljs-operator">=</span> <span class="hljs-number">1932</span>
oldHouseCase.victimCount <span class="hljs-operator">=</span> <span class="hljs-number">3</span>

<span class="hljs-comment">// âœ… ç”¨Observationsç”»â€œç›‘æ§ç¬¦â€ï¼šé—­åŒ…é‡ŒæŒ‡å®šè¦ç›‘æ§çš„â€œé‚ªé—¨æ•°æ®â€</span>
<span class="hljs-comment">// Observations&lt;(Int, Int), Never&gt;ï¼šç›‘æ§ä¸¤ä¸ªIntæ•°æ®ï¼Œä¸æŠ›é”™ï¼ˆNeverï¼‰</span>
<span class="hljs-keyword">let</span> caseMonitor <span class="hljs-operator">=</span> <span class="hljs-type">Observations</span> { (oldHouseCase.caseYear, oldHouseCase.victimCount) }
</code></pre>
<p>â€œä½ çœ‹ï¼Œè¿™æ ·åªè¦æ•°æ®è¢«æ”¹ï¼Œå°±èƒ½å®æ—¶â€˜æŠ“åŒ…â€™ã€‚â€ æ®·ç´ ç´ æŒ‡ç€ä»£ç ï¼Œâ€œä»¥å‰ç”¨æ™®é€šç›‘å¬ï¼Œå°±åƒåœ¨æ¡£æ¡ˆå®¤é—¨å£è´´å¼ â€˜ç¦æ­¢å…¥å†…â€™çš„çº¸æ¡ï¼Œæ ¹æœ¬æ‹¦ä¸ä½â€˜é‚ªç¥Ÿâ€™ï¼›ç°åœ¨<code>caseMonitor</code>å°±æ˜¯â€˜å®ˆé—¨çš„ç¬¦å’’â€™ï¼Œæ•°æ®ä¸€åŠ¨å°±æŠ¥è­¦ï¼Œè¿˜èƒ½è®°ä¸‹ç¯¡æ”¹åçš„æ ·å­ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/524f2e92b5e34842b0025279b3d74227~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=T09zJ6O67BuM4QMoVmL%2BbKw%2F9NU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©èµ¶ç´§æ¨¡æ‹Ÿ â€œæ•°æ®è¢«ç¯¡æ”¹â€ çš„åœºæ™¯ï¼Œåœ¨ç»ˆç«¯é‡ŒåŠ äº†æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ¨¡æ‹Ÿâ€œé‚ªç¥Ÿç¯¡æ”¹â€ï¼šæ¯éš”2ç§’æ”¹ä¸€æ¬¡æ•°æ®ï¼Œæ¨¡ä»¿æ— å½¢ä¹‹æ‰‹çš„æ“ä½œ</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(for: .seconds(<span class="hljs-number">2</span>))
    oldHouseCase.caseYear <span class="hljs-operator">=</span> <span class="hljs-number">1912</span> <span class="hljs-comment">// ç¬¬ä¸€æ¬¡ç¯¡æ”¹å¹´ä»½</span>
    
    <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(for: .seconds(<span class="hljs-number">2</span>))
    oldHouseCase.victimCount <span class="hljs-operator">=</span> <span class="hljs-number">7</span> <span class="hljs-comment">// ç¬¬äºŒæ¬¡ç¯¡æ”¹äººæ•°</span>
    
    <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(for: .seconds(<span class="hljs-number">2</span>))
    oldHouseCase.caseYear <span class="hljs-operator">=</span> <span class="hljs-number">1925</span> <span class="hljs-comment">// ç¬¬ä¸‰æ¬¡ç¯¡æ”¹å¹´ä»½</span>
}

<span class="hljs-comment">// ç”¨for awaitâ€œå®ˆç€ç¬¦å’’â€ï¼šæ•°æ®ä¸€æœ‰å˜åŠ¨å°±â€œæ˜¾å½¢â€æ‰“å°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹ç›‘æ§ã€Šè€å®…é—¹é¬¼æ¡ˆã€‹æ•°æ®ï¼Œå¼‚å¸¸å˜åŠ¨ä¼šå®æ—¶æ˜¾ç¤ºï¼š"</span>)
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (latestYear, latestVictim) <span class="hljs-keyword">in</span> caseMonitor {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸  æ•°æ®å¼‚å¸¸å˜åŠ¨ï¼šæ¡ˆå‘å¹´ä»½=<span class="hljs-subst">\(latestYear)</span>ï¼Œå—å®³äººæ•°=<span class="hljs-subst">\(latestVictim)</span>"</span>)
}
</code></pre>
<p>è¿è¡Œä»£ç çš„ç¬é—´ï¼Œç»ˆç«¯å±å¹•ä¸Šä¾æ¬¡è·³å‡ºä¸‰è¡Œè­¦å‘Šï¼Œç²¾å‡†æŠ“å‡ºäº†æ¯ä¸€æ¬¡ â€œç¯¡æ”¹â€ï¼Œè¿ç¯¡æ”¹åçš„æ•°å€¼éƒ½æ¸…æ¸…æ¥šæ¥šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1aa8e92354c642129f65482540baded3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=xikfSVjf8lfqCeBLv2q9KadlQK8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå¤ªç¥äº†ï¼â€ ä¾¯ä½©æ‹ç€å¤§è…¿ï¼Œæ —å­å£³æ‰äº†ä¸€åœ°ï¼Œâ€œä»¥å‰å¾—ç­‰æ•°æ®æ”¹å®Œæ‰å‘ç°ï¼Œç°åœ¨åˆšæ”¹å°±æŠ“åŒ…ï¼Œæ¯”é“å£«çš„â€˜ç…§å¦–é•œâ€™è¿˜çµ â€”â€” æˆ‘è¿™å¤´ç»å¯¹ä¸ç§ƒï¼Œç»ˆäºä¸ç”¨ä¸ºâ€˜çµå¼‚æ•°æ®â€™æ„æ‰æ¯›äº†ï¼â€</p>
<hr/>
<h2 data-id="heading-3">âš ï¸ 3. é•‡é‚ªæˆ’å¾‹ï¼šä¸å¯è¿èƒŒçš„ â€œä½¿ç”¨ç¦å¿Œâ€</h2>
<p>æ®·ç´ ç´ çªç„¶æŒ‰ä½ä¾¯ä½©å‡†å¤‡å…³é—­ç›‘æ§çš„æ‰‹ï¼Œçœ¼ç¥å˜å¾—ä¸¥è‚ƒï¼šâ€œåˆ«å…³ç›‘æ§ï¼Œ<code>Observations</code>æœ‰å››ä¸ªâ€˜é•‡é‚ªç¦å¿Œâ€™ï¼Œç ´äº†ä¸€ä¸ªï¼Œâ€˜é‚ªç¥Ÿâ€™å°±å¯èƒ½åæ‰‘ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58197f84ee694ff7bf67c390a432c867~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=nJiq14cz4ruw%2FHFn3clC9lguXrg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹ç”¨æ¯›ç¬”åœ¨çº¸ä¸Šå†™ä¸‹å››ä¸ªè¦ç‚¹ï¼Œå­—è¿¹é’åŠ²å¦‚ç¬¦ï¼š</p>
<ol>
<li><strong>åˆå§‹å€¼å¿…æ˜¾å½¢</strong>ï¼š<code>Observations</code>ä¼šå…ˆ â€œæŠ¥â€ ä¸€æ¬¡åˆå§‹å€¼ï¼Œå†æŠ¥åç»­å˜åŠ¨ â€”â€” å°±åƒé“å£«å¼€å›æ—¶è¦å…ˆ â€œè¯·ç¥â€ï¼Œå¾—è®©æ­£å¸¸æ•°æ® â€œäº®ä¸ªç›¸â€ï¼Œæ‰èƒ½åˆ†æ¸…ä»€ä¹ˆæ˜¯ç¯¡æ”¹ã€‚</li>
<li><strong>å¤šç¯¡æ”¹ä¼šåˆå¹¶</strong>ï¼šå¦‚æœçŸ­æ—¶é—´å†…å¤šæ¬¡ç¯¡æ”¹ï¼Œå¯èƒ½ä¼šåˆå¹¶æˆä¸€ä¸ªç»“æœ â€œæŠ¥â€ å‡ºæ¥ã€‚æ¯”å¦‚ä¸€ç§’å†…æ”¹ä¸¤æ¬¡å¹´ä»½ï¼Œå¯èƒ½åªæ˜¾ç¤ºæœ€åä¸€æ¬¡çš„ç»“æœ â€”â€” è¿™æ˜¯ä¸ºäº†é¿å… â€œé‚ªç¥Ÿâ€ ç”¨é«˜é¢‘ç¯¡æ”¹ â€œå†²ä¹±ç¬¦å’’â€ï¼Œä½†è¦æ³¨æ„åç»­éœ€æ ¸å¯¹ â€œè·³è·ƒå¼å˜åŠ¨â€ã€‚</li>
<li><strong>ç›‘æ§ä¸å¯æ–­</strong>ï¼š<code>AsyncSequence</code>ä¼šä¸€ç›´è¿è¡Œï¼Œé™¤éä¸»åŠ¨åœæ­¢ï¼Œå¦åˆ™ä¸èƒ½å¼ºè¡Œä¸­æ–­ â€”â€” å°±åƒç¬¦å’’ä¸èƒ½åŠé€”æ’•ä¸‹æ¥ï¼Œä¸ç„¶ â€œé‚ªç¥Ÿâ€ ä¼šè¶æœºåæ‰‘ï¼Œå¯èƒ½è®©ç»ˆç«¯æ­»æœºã€‚å¿…é¡»æ”¾åœ¨å•ç‹¬çš„ â€œæ³•å›â€ï¼ˆ<code>Task</code>ï¼‰é‡Œï¼Œå†ç”¨ â€œæ”¶å›å’’â€ï¼ˆè®¾<code>nil</code>ï¼‰æ­£å¸¸åœæ­¢ã€‚</li>
<li><strong>æ”¶å›éœ€ç”¨å¯é€‰å€¼</strong>ï¼šæƒ³åœæ­¢ç›‘æ§ï¼Œè¦æŠŠç›‘æ§çš„æ•°æ®æ”¹æˆå¯é€‰ç±»å‹ï¼Œå†è®¾ä¸º<code>nil</code>â€”â€” æ¯”å¦‚æŠŠ<code>caseYear</code>æ”¹æˆ<code>Int?</code>ï¼Œæƒ³åœçš„æ—¶å€™è®¾<code>oldHouseCase.caseYear = nil</code>ï¼Œç›‘æ§æ‰ä¼š â€œå®‰å…¨æ”¶å›â€ï¼Œä¸èƒ½ç›´æ¥å…³ç»ˆç«¯ï¼Œå¦åˆ™ä¼š â€œç•™åé—ç—‡â€ã€‚</li>
</ol>
<p>â€œè¿™å°±åƒé“å£«åšæ³•çš„è§„çŸ©ï¼Œä¸€æ­¥é”™æ­¥æ­¥é”™ã€‚â€ æ®·ç´ ç´ çš„è¯­æ°”å¸¦ç€è­¦å‘Šï¼Œâ€œä¸‰å¹´å‰æˆ‘åœ¨è‹å·è€å®…ï¼Œå°±æ˜¯æ²¡æ³¨æ„â€˜å¤šç¯¡æ”¹åˆå¹¶â€™ï¼Œæ¼çœ‹äº†ä¸¤æ¬¡æ•°æ®å˜åŠ¨ï¼Œç»“æœè®©â€˜é‚ªç¥Ÿâ€™æŠŠè´¦æœ¬æ”¹å¾—ä¸€å¡Œç³Šæ¶‚ï¼Œæœ€åè¿˜å¾—é‡æ–°å¯¹è´¦ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f3864c2d45f4277a889a8727b79c9c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=fPu0z9jHclSoRVUiSJgK0aHSIDY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©èµ¶ç´§æŠŠå››ä¸ªç¦å¿Œè®°åœ¨ç¬”è®°æœ¬ä¸Šï¼Œè¿˜ç”»äº†ä¸ªå°ç¬¦å’’å½“æ ‡è®°ï¼šâ€œæ‡‚äº†ï¼è¿™å°±åƒåƒç³–ç‚’æ —å­ï¼Œå¾—å…ˆå‰¥å£³å†åƒï¼Œä¸èƒ½çå•ƒ â€”â€” ä¸è¿‡æˆ‘è‚¯å®šèƒ½è®°ä½ï¼Œæ¯•ç«Ÿç ´äº†ç¦å¿Œï¼Œâ€˜çµå¼‚æ•°æ®â€™åæ‰‘å°±éº»çƒ¦äº†ï¼â€</p>
<hr/>
<h2 data-id="heading-4">ğŸš€ 4. æ ¸å¿ƒä¼˜åŠ¿ï¼šæ— æ‹˜æ— æŸçš„ â€œé•‡é‚ªè‡ªç”±â€</h2>
<p>â€œ<code>Observations</code>æœ€å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯ä¸ç”¨â€˜æ†ç€æ³•å›â€™ã€‚â€ æ®·ç´ ç´ è°ƒå‡º SwiftUI çš„ç›‘æ§ä»£ç å¯¹æ¯”ï¼Œâ€œSwiftUI çš„<code>@ObservedObject</code>è™½ç„¶ä¹Ÿèƒ½ç›‘æ§ï¼Œä½†å¾—ç»‘å®šç•Œé¢ï¼Œå°±åƒé“å£«åšæ³•è¦å›ºå®šâ€˜æ³•å›â€™ï¼›è€Œ<code>Observations</code>èƒ½è„±ç¦»ç•Œé¢ï¼Œåœ¨æ¡£æ¡ˆå®¤ã€æœåŠ¡å™¨ã€ç”šè‡³åˆ«çš„æŠ¥ç¤¾ç”¨ â€”â€” å°±åƒæˆ‘çš„ç½—ç›˜ï¼Œåœ¨ä¸Šæµ·èƒ½ç”¨æ¥é•‡æ¡£æ¡ˆï¼Œåˆ°è‹å·ä¹Ÿèƒ½ç”¨æ¥ç ´å·å®—è¯…å’’ï¼Œä¸å—åœ°æ–¹é™åˆ¶ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b5ae18691d44f049fc434db231affdf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=vieSEC3suCF5TW3FiH2CBtFjikA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹ä¸¾äº†ä¸ªè·¨æŠ¥ç¤¾åŒæ­¥çš„ä¾‹å­ï¼šâ€œæ¯”å¦‚åŒ—å¹³æŠ¥ç¤¾è¦è°ƒã€Šè€å®…é—¹é¬¼æ¡ˆã€‹çš„æ¡£æ¡ˆï¼Œç”¨<code>Observations</code>èƒ½è®©ä»–ä»¬å®æ—¶çœ‹åˆ°æ•°æ®å˜åŠ¨ï¼Œä¸ç”¨æ¯æ¬¡éƒ½æ´¾äººé€å·å®— â€”â€” è¿™æ¯”ä»¥å‰çš„â€˜ç”µæŠ¥åŒæ­¥â€™çœäº†ä¸‰å¤©æ—¶é—´ï¼Œè¿˜ä¸ä¼šå› ä¸ºç”µæŠ¥è¢«â€˜ç¯¡æ”¹â€™ä¼ é”™æ•°æ®ã€‚â€</p>
<p>ä¾¯ä½©çœ‹ç€å±å¹•ä¸Šä¸å†é—ªçƒçš„æ¡£æ¡ˆï¼Œç»ˆç«¯ä¹Ÿæ²¡å†å‡ºç° â€œåˆ«å¤šç®¡é—²äº‹â€ çš„å­—æ ·ï¼Œå¿ä¸ä½å’‹èˆŒï¼šâ€œå¯ä¸æ˜¯å˜›ï¼ä»¥å‰è·¨æŠ¥ç¤¾ä¼ æ¡£æ¡ˆï¼Œå¾—æ´¾ä¸“äººé€ï¼Œæˆ‘è·¯ç—´è¿˜å®¹æ˜“é€é”™åœ°æ–¹ï¼›ç°åœ¨ç”¨<code>Observations</code>ç›´æ¥åŒæ­¥ï¼Œæ¯”æˆ‘æ‰¾ç™¾å¹´åŒ…å­é“ºçš„è·¯çº¿è¿˜ç®€å• â€”â€” çœä¸‹æ¥çš„æ—¶é—´ï¼Œæˆ‘èƒ½åœ¨æŠ¥ç¤¾é—¨å£æ‘†ä¸ªç³–ç‚’æ —å­æ‘Šï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/288c2e174e1648f08e98b6978aaa3d95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=iX8YeSeuarWZe0RjLL5cw2tYmSE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-5">ğŸ”® ç»“å°¾ï¼šå¹¶å‘é‚ªç¥Ÿç°ç«¯å€ªï¼Œå…¨å±€ Actor å¾…é•‡é‚ª</h2>
<p>å°±åœ¨ä¾¯ä½©å‡†å¤‡æŠŠ â€œé•‡é‚ªä»£ç â€ æ¨å¹¿åˆ°æ•´ä¸ªæ¡£æ¡ˆåº“æ—¶ï¼Œç»ˆç«¯çªç„¶ â€œæ»‹å•¦â€ ä¸€å£°ï¼Œæ»¡å±çš„æ¡£æ¡ˆåŒæ—¶æŠ¥é”™ â€œå¹¶å‘å†²çªâ€ï¼Œè™½ç„¶å¾ˆå¿«æ¢å¤ï¼Œä½†æ®·ç´ ç´ ç›¯ç€ç½—ç›˜ï¼Œå‘ç°æŒ‡é’ˆæŒ‡å‘äº† â€œå¤šä»»åŠ¡å¤„ç†åŒºâ€ï¼Œå˜´é‡Œå–ƒå–ƒé“ï¼šâ€œä¸å¯¹åŠ²ï¼Œè¿™ä¸æ˜¯å•ä¸ªæ•°æ®çš„â€˜é‚ªç¥Ÿâ€™ï¼Œæ˜¯â€˜å¹¶å‘é‚ªç¥Ÿâ€™â€”â€” å¤šä¸ªä»»åŠ¡åŒæ—¶ç¢°æ¡£æ¡ˆï¼Œæ‰å¼•å‡ºæ¥çš„ã€‚â€</p>
<p>â€œä»€ä¹ˆæ˜¯â€˜å¹¶å‘é‚ªç¥Ÿâ€™ï¼Ÿâ€ ä¾¯ä½©å“å¾—èµ¶ç´§å…³æ‰å¤šä»»åŠ¡çª—å£ï¼Œç³–ç‚’æ —å­éƒ½å¿˜äº†åƒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56ed9737797e4dd6abaf1f03d27fca3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=98b0TYaT4l%2BImPXLaTeLzf6OCUo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ®·ç´ ç´ æ”¶èµ·ç½—ç›˜ï¼Œä»é”¦ç›’é‡Œæå‡ºä¸€å¼ æ³›é»„çš„çº¸ï¼Œä¸Šé¢å†™ç€ â€œSE-0470â€ï¼šâ€œè¿™æ˜¯æˆ‘åœ¨è‹å·è€å®…æ‰¾åˆ°çš„â€˜å¤ç±â€™ï¼Œä¸Šé¢è¯´â€˜å…¨å±€ Actor éš”ç¦»â€™èƒ½ç»™æ•°æ®è®¾â€˜ä¸“å±æ³•å›â€™ï¼Œè®©å¤šä¸ªä»»åŠ¡â€˜è½®æµä¸Šé¦™â€™ï¼Œä¸ä¼šå› ä¸ºæŠ¢ç€ç¢°æ•°æ®å¼•â€˜é‚ªç¥Ÿâ€™ã€‚ä¸‹æ¬¡å’±ä»¬å¾—æŠŠè¿™â€˜æ³•æœ¯â€™å­¦ä¼šï¼Œä¸ç„¶æ•´ä¸ªæ¡£æ¡ˆåº“éƒ½å¯èƒ½è¢«â€˜å¹¶å‘é‚ªç¥Ÿâ€™ç¼ ä¸Šã€‚â€</p>
<p>ä¾¯ä½©çœ‹ç€çº¸ä¸Šçš„ â€œSE-0470â€ï¼Œåˆçœ‹äº†çœ‹è¿˜åœ¨å¾®å¾®é—ªçƒçš„ç»ˆç«¯ï¼Œå¥½å¥‡å¿ƒè¢«å½»åº•å‹¾èµ·ï¼šâ€œé‚£è¿˜ç­‰ä»€ä¹ˆï¼Ÿä¸‹æ¬¡å’±ä»¬å°±ç ”ç©¶è¿™â€˜å…¨å±€ Actor éš”ç¦»â€™ï¼ŒæŠŠâ€˜å¹¶å‘é‚ªç¥Ÿâ€™ä¹Ÿé•‡ä½ â€”â€” ä¸ç„¶æˆ‘è¿™æ¡£æ¡ˆæ•´ç†çš„æ´»ï¼Œè¿Ÿæ—©è¦è¢«â€˜é‚ªç¥Ÿâ€™æ…é»„ï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/159e0e55075e4dbbb093b2a624b8403d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679483&amp;x-signature=YquqjMKancnqXR%2BHUhbPuIe5HjE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ¬²çŸ¥ SE-0470 çš„ â€œå…¨å±€ Actor éš”ç¦»â€ å¦‚ä½•é•‡ä½ â€œå¹¶å‘é‚ªç¥Ÿâ€ï¼Œä¾¯ä½©å’Œæ®·ç´ ç´ åˆèƒ½å¦é¡ºåˆ©ç ´è§£æ¡£æ¡ˆåº“å±æœºï¼Œä¸”å¬ä¸‹å›åˆ†è§£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åç¯‡ï¼‰ï¼šæè«æ„çš„åŒç»è§£æ¯’æœ¯ â€”â€” éš”ç¦»èˆ±ä¸å³æ—¶åˆƒ]]></title>    <link>https://juejin.cn/post/7580310413754744882</link>    <guid>https://juejin.cn/post/7580310413754744882</guid>    <pubDate>2025-12-07T02:33:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580310413754744882" data-draft-id="7580374090365108262" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åç¯‡ï¼‰ï¼šæè«æ„çš„åŒç»è§£æ¯’æœ¯ â€”â€” éš”ç¦»èˆ±ä¸å³æ—¶åˆƒ"/> <meta itemprop="keywords" content="Swift,Apple,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-07T02:33:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åç¯‡ï¼‰ï¼šæè«æ„çš„åŒç»è§£æ¯’æœ¯ â€”â€” éš”ç¦»èˆ±ä¸å³æ—¶åˆƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:33:08.000Z" title="Sun Dec 07 2025 02:33:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe2dc10969e644bcaa1eea1fe9e5e5d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679588&amp;x-signature=DNah2Go%2BMnByyQptVf%2FIM5O9N88%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ¼å¼•å­ï¼šæ˜Ÿé™…æ¯’ç†åŠ«ï¼Œç†ŠçŒ«ä¾ é™·åŒç˜¤è¿·å±€</h2>
<p>2247 å¹´ï¼Œé“¶æ²³ç³»è¾¹ç¼˜çš„ â€œæ˜Ÿäº‘æ¯’ç†å®éªŒå®¤â€ï¼Œé€šä½“é“¶ç™½çš„ç¯å½¢å»ºç­‘æ‚¬æµ®åœ¨å°è¡Œæ˜Ÿå¸¦ä¸­ã€‚å¤§ç†ŠçŒ«ä¾¯ä½©ç©¿ç€é˜²è¾å°„å®éªŒæœï¼Œåœ†æ»šæ»šçš„èº«å­è¢«å…¨æ¯æ“ä½œå±ç¯ç»•ï¼Œæ‰‹é‡Œå’¬ç€æ˜Ÿé™…è¥å…»ç³•ï¼ˆè‰è“å‘³ï¼Œæ®è¯´æ˜¯åœ°çƒå¤±ä¼ å·²ä¹…çš„é…æ–¹ï¼‰ï¼Œçœ‰å¤´æ‹§æˆäº†ç–™ç˜© â€”â€” ä»–æ¥æ‰‹çš„ â€œæ˜Ÿé™…æ¯’è‰æ•°æ®å½’æ¡£â€ ä»»åŠ¡ï¼Œæ’ä¸Šäº†ä¸¤ä¸ªè®©å·¥ç¨‹å¸ˆé—»é£ä¸§èƒ†çš„ â€œæ•°æ®æ¯’ç˜¤â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b611836141cd4636be568daa6fa5b6e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679588&amp;x-signature=Blt27fG31xQiIgBMGhtfjVTubgY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç¬¬ä¸€ä¸ªæ˜¯ â€œè·¨èˆ±æ±¡æŸ“ç˜¤â€ï¼šæ ‡æ³¨ â€œå‰§æ¯’çº§â€ çš„ã€Šå¹½å†¥è‰æ¯’ç†æ¡£æ¡ˆã€‹ï¼Œæ˜æ˜è®¾å®šåœ¨ â€œä¸»éš”ç¦»èˆ±â€ï¼ˆ<code>@MainActor</code>ï¼‰ï¼Œå´æ€»è¢«åå° â€œå‰¯èˆ±â€ çš„åˆ†æä»»åŠ¡å·å·è®¿é—®ï¼Œå¯¼è‡´æ•°æ®å‡ºç° â€œæ¯’ç´ æµ“åº¦ä¹±è·³â€ çš„æ±¡æŸ“ï¼Œå°±åƒæ¯’è‰çš„æ±æ¶²æ¸—è¿›äº†æ— å®³æ ·æœ¬ï¼›ç¬¬äºŒä¸ªæ˜¯ â€œå»¶è¿Ÿåæ­»ç˜¤â€ï¼šç´§æ€¥æ¯’ç†åˆ†æä»»åŠ¡æäº¤åï¼Œæ€»è¦æ’é˜Ÿç­‰ â€œä¸‹ä¸€è½®è°ƒåº¦â€ï¼Œä¸Šæ¬¡ä¸€é¢—å¹½å†¥è‰å­¢å­æ³„æ¼ï¼Œåˆ†æç»“æœæ™šäº† 0.5 ç§’ï¼Œå·®ç‚¹è®©å®éªŒèˆ±çš„å‡€åŒ–ç³»ç»Ÿå®•æœºã€‚</p>
<p>â€œè¿™å“ªæ˜¯å½’æ¡£ï¼Œè¿™æ˜¯åœ¨æ‹†ç‚¸å¼¹ï¼â€ ä¾¯ä½©æŠŠè¥å…»ç³•åŒ…è£…çº¸å¡è¿›å®éªŒæœå£è¢‹ï¼ŒæŒ‡å°–åœ¨å±å¹•ä¸Šæˆ³å¾—é£å¿«ï¼Œâ€œç”¨è€åŠæ³•å†™çš„éš”ç¦»ä»£ç ï¼Œè¦ä¹ˆé”æ­»æ•´ä¸ªèˆ±ä½“ï¼Œè¦ä¹ˆæ‹¦ä¸ä½è·¨èˆ±è®¿é—®ï¼›ç´§æ€¥ä»»åŠ¡æ’é˜Ÿå°±åƒæˆ‘åœ¨æ˜Ÿé™…ç©ºé—´ç«™æ‰¾é£Ÿå ‚ï¼Œç»•å…«åœˆæ‰åƒä¸Šé¥­ â€”â€” è·¯ç—´éƒ½æ²¡è¿™ä¹ˆç¦»è°±ï¼â€</p>
<p>ä»–è¯•ç€ç»™æ•°æ®åŠ äº†ä¸‰å±‚ â€œé˜²æŠ¤ç›¾â€ï¼Œç»“æœåˆšè¿è¡Œï¼Œæ§åˆ¶å°å°±å¼¹å‡º â€œå¹¶å‘å†²çªâ€ çš„çŒ©çº¢è­¦æŠ¥ï¼Œå±å¹•ä¸Šçš„å¹½å†¥è‰æ¯’ç´ æµ“åº¦ç¬é—´ä» â€œå±é™©â€ è·³åˆ° â€œæ— å®³â€ï¼ŒåˆçŒ›åœ°é£™å‡åˆ° â€œè‡´å‘½â€ã€‚å°±åœ¨ä¾¯ä½©å‡†å¤‡å¯åŠ¨ â€œå…¨èˆ±æ•°æ®é‡ç½®â€ï¼ˆç›¸å½“äºç»™å®éªŒå®¤ â€œåˆ®éª¨ç–—æ¯’â€ï¼Œè€—æ—¶ä¸‰å°æ—¶ï¼‰æ—¶ï¼Œå®éªŒå®¤çš„ç´§æ€¥é€šé“é—¨ â€œå”°â€ åœ°æ‰“å¼€ï¼Œä¸€èº«é»‘çº¢ç›¸é—´çš„æˆ˜æ–—å‹å®éªŒæœã€è…°é—´åˆ«ç€ â€œæ¯’ç†æ•°æ®åˆƒâ€ï¼ˆå¤–å½¢åƒæ‹‚å°˜ï¼Œå®åˆ™æ˜¯æ•°æ®ä¿®å¤å·¥å…·ï¼‰çš„æè«æ„ï¼Œè¸©ç€æ‚¬æµ®è¸æ¿ç¼“ç¼“é©¶æ¥ã€‚</p>
<p>åœ¨æœ¬æ¬¡æ˜Ÿé™…æ¢é™©ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ğŸ¼å¼•å­ï¼šæ˜Ÿé™…æ¯’ç†åŠ«ï¼Œç†ŠçŒ«ä¾ é™·åŒç˜¤è¿·å±€</li>
<li>ğŸ›¡ï¸ 1. ç¬¬ä¸€ç»ï¼šéš”ç¦»èˆ±ç§˜æœ¯ â€”â€” å…¨å±€ Actor çš„åè®®æ·é”ï¼ˆSE-0470ï¼‰</li>
<li>âš¡ 2. ç¬¬äºŒç»ï¼šå³æ—¶åˆƒç§˜æœ¯ â€”â€”Task.immediate çš„é—ªç”µæ–©ï¼ˆSE-0472ï¼‰</li>
<li>ğŸ”® ç»“å°¾ï¼šééš”ç¦»æ¯’é›¾ç°ï¼Œå¼‚æ­¥è·¨èˆ±åŠ«å°†è‡³</li>
</ul>
<p>å¥¹æ˜¯å®éªŒå®¤çš„ â€œé¦–å¸­è§£æ¯’å®˜â€ï¼Œä¸‰åå¹´å‰æ›¾å›  â€œè·¨èˆ±æ•°æ®æ±¡æŸ“â€ å¯¼è‡´é˜¿å°”æ³•æ˜Ÿç³»çš„æ¯’ç†å®éªŒå®¤çˆ†ç‚¸ï¼Œäº²æ‰‹é”€æ¯äº†è‡ªå·±ç ”ç©¶åå¹´çš„æ¯’è‰æ•°æ®ï¼Œä»æ­¤å¯¹ â€œéš”ç¦»â€ ä¸ â€œå³æ—¶å“åº”â€ æœ‰ç€è¿‘ä¹åæ‰§çš„æ‰§ç€ â€”â€” æ­¤åˆ»å¥¹çš„å…¨æ¯æŠ¤ç›®é•œä¸Šï¼Œæ­£å®æ—¶æ»šåŠ¨ç€ä¾¯ä½©çš„é”™è¯¯æ—¥å¿—ï¼Œè¯­æ°”å†°å†·å¦‚æ¶²æ°®ï¼šâ€œåˆ«é‡ç½®ï¼Œä½ è¿™æ˜¯åœ¨ç»™æ•°æ®æ¯’ç˜¤â€˜å…»ä¼¤â€™ã€‚æˆ‘è¿™æœ‰ä¸¤é—¨â€˜è§£æ¯’åŒç»â€™ï¼Œæ­£å¥½å…‹è¿™ä¸¤ä¸ªé¡½ç–¾ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bef7d2f059e54268859c9367b07c4c64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679588&amp;x-signature=ITPNU8MFRpIacwRM4hNcYdsWuXs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ›¡ï¸ 1. ç¬¬ä¸€ç»ï¼šéš”ç¦»èˆ±ç§˜æœ¯ â€”â€” å…¨å±€ Actor çš„åè®®æ·é”ï¼ˆSE-0470ï¼‰</h2>
<p>æè«æ„æŠ¬æ‰‹ä¸€æŒ¥ï¼Œå…¨æ¯å±å¹•ä¸Šæµ®ç°å‡ºä¸‰åå¹´å‰çš„çˆ†ç‚¸æ®‹éª¸å½±åƒï¼Œè¯­æ°”å¸¦ç€å½»éª¨çš„è­¦ç¤ºï¼šâ€œå½“å¹´æˆ‘å°±æ˜¯æ²¡ç»™åè®®åŠ â€˜éš”ç¦»æ·é”â€™ï¼Œè®©æ ‡æ³¨â€˜ä¸»èˆ±ä¸“å±â€™çš„æ¯’ç†æ•°æ®ï¼Œè¢«å‰¯èˆ±çš„ä»»åŠ¡éšæ„è®¿é—®ï¼Œæœ€åæ¯’ç´ æµ“åº¦è®¡ç®—å‡ºé”™ï¼Œç‚¸äº†åŠè‰˜ç©ºé—´ç«™ã€‚SE-0470 çš„â€˜å…¨å±€ Actor éš”ç¦»åè®®éµå¾ªâ€™ï¼ˆ<strong>Global-actor isolated conformances</strong>ï¼‰ï¼Œå°±æ˜¯ç»™åè®®ä¸Šäº†â€˜ä¸“å±èˆ±é—¨â€™ï¼Œåªæœ‰æŒ‡å®šçš„ Actor èƒ½è§£é”ã€‚â€</p>
<p>ä¾¯ä½©ç›¯ç€å½±åƒï¼Œå’½äº†å£è¥å…»ç³•ï¼šâ€œæ„æ€æ˜¯ï¼Œå°±åƒç»™æ¯’è‰æ ·æœ¬åŠ äº†â€˜ä¸“å±åŸ¹å…»èˆ±â€™ï¼Œåªæœ‰ä¸»èˆ±çš„åˆ†æè®¾å¤‡èƒ½ç¢°ï¼Œå‰¯èˆ±çš„æ‰‹ä¼¸ä¸è¿›æ¥ï¼Ÿâ€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2fd79a18aa0481186ec60d19d79c295~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679588&amp;x-signature=k7QNQ0i7fA5BaxDQELXumHLsosI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œç®—ä½ å¼€çªã€‚â€ æè«æ„æŒ‡å°–æ»‘åŠ¨ï¼Œè°ƒå‡ºæ ¸å¿ƒä»£ç ï¼Œæˆ˜æ–—æœä¸Šçš„çº¢å…‰éšä»£ç æµåŠ¨é—ªçƒï¼Œâ€œä»¥å‰çš„åè®®éµå¾ªæ˜¯â€˜æ— é—¨æ— é”â€™ï¼Œå“ªæ€•ä½ çš„ç±»æ ‡äº†<code>@MainActor</code>ï¼Œåè®®æ–¹æ³•è¿˜æ˜¯å¯èƒ½è·‘åˆ°åˆ«çš„ Actor ä¸Š â€”â€” å°±åƒä½ ç»™æ ·æœ¬åŠ äº†é˜²æŠ¤ç›’ï¼Œå´æ²¡é”ç›’ç›–ã€‚ç°åœ¨ç»™åè®®åŠ ä¸Š<code>@MainActor</code>å‰ç¼€ï¼Œç›¸å½“äºç»™ç›’ç›–ç„Šæ­»äº†â€˜ä¸»èˆ±ä¸“å±é”â€™ã€‚â€</p>
<p>å¥¹å†™ä¸‹å®æˆ˜ä»£ç ï¼Œæ¯ä¸€è¡Œéƒ½é€ç€ä¸å®¹ç½®ç–‘çš„ä¸¥è°¨ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä¸»èˆ±ä¸“å±Actorï¼šç›¸å½“äºâ€œå‰§æ¯’æ ·æœ¬ä¸»åŸ¹å…»èˆ±â€ï¼Œæ‰€æœ‰æ“ä½œå¿…é¡»åœ¨æ­¤æ‰§è¡Œ</span>
<span class="hljs-meta">@MainActor</span>
<span class="hljs-comment">// æ¯’è‰æ•°æ®ç±»ï¼šéµå¾ª@MainActoræ ‡è®°çš„Equatableåè®®â€”â€”åªæœ‰ä¸»èˆ±èƒ½è°ƒç”¨==æ–¹æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VenomGrassData</span>: @<span class="hljs-title class_">MainActor</span> <span class="hljs-title class_">Equatable</span> {
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">UUID</span>
    <span class="hljs-keyword">var</span> toxinConcentration: <span class="hljs-type">Double</span> <span class="hljs-comment">// æ¯’ç´ æµ“åº¦ï¼Œæ ¸å¿ƒæ•°æ®ï¼Œä¸å¯è·¨èˆ±æ±¡æŸ“</span>
    
    <span class="hljs-keyword">init</span>(<span class="hljs-params">toxinConcentration</span>: <span class="hljs-type">Double</span>) {
        <span class="hljs-keyword">self</span>.id <span class="hljs-operator">=</span> <span class="hljs-type">UUID</span>()
        <span class="hljs-keyword">self</span>.toxinConcentration <span class="hljs-operator">=</span> toxinConcentration
    }
    
    <span class="hljs-comment">// åè®®æ–¹æ³•ï¼šåªèƒ½åœ¨@MainActorä¸Šæ‰§è¡Œï¼Œå‰¯èˆ±æ— æ³•è°ƒç”¨</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">==</span>(<span class="hljs-params">lhs</span>: <span class="hljs-type">VenomGrassData</span>, <span class="hljs-params">rhs</span>: <span class="hljs-type">VenomGrassData</span>) -&gt; <span class="hljs-type">Bool</span> {
        lhs.id <span class="hljs-operator">==</span> rhs.id <span class="hljs-comment">// æŒ‰å”¯ä¸€IDåˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€ä»½æ¯’è‰æ•°æ®</span>
    }
}
</code></pre>
<p>â€œä½ çœ‹ï¼Œè¿™æ ·<code>==</code>æ–¹æ³•å°±è¢«é”æ­»åœ¨ä¸»èˆ±äº†ã€‚â€ æè«æ„çš„æŒ‡å°–ç‚¹åœ¨<code>@MainActor Equatable</code>ä¸Šï¼Œâ€œè¦æ˜¯æ²¡åŠ è¿™ä¸ªæ ‡è®°ï¼ŒSwift å¯èƒ½æŠŠæ¯”è¾ƒæ“ä½œæ‰”åˆ°å‰¯èˆ±æ‰§è¡Œï¼Œå¯¼è‡´æ¯’ç´ æµ“åº¦æ•°æ®è¯»å–é”™ä¹± â€”â€” å°±åƒå½“å¹´æˆ‘æ²¡é”ç›’ç›–ï¼Œè®©æ±¡æŸ“çš„æ ·æœ¬æ··è¿›äº†åˆ†ææµç¨‹ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d272199418f946fab89b997590ac0d10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679588&amp;x-signature=HoXyJG2ifVQP6N%2FOw3TNE9fo2ig%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©èµ¶ç´§åœ¨å®éªŒç»ˆç«¯æµ‹è¯•ï¼Œè·¨èˆ±è®¿é—®çš„é”™è¯¯è­¦æŠ¥ç¬é—´æ¶ˆå¤±ï¼Œæ•°æ®æ±¡æŸ“çš„ â€œæ¯’ç˜¤â€ è¢«æˆåŠŸåˆ‡é™¤ï¼šâ€œå¤ªç»äº†ï¼æˆ‘è¿™å¤´ç»å¯¹ä¸ç§ƒï¼Œç»ˆäºä¸ç”¨ä¸ºâ€˜è·¨èˆ±ä¼¸æ‰‹â€™çš„é—®é¢˜æ„æ‰æ¯›äº†ï¼â€</p>
<hr/>
<h2 data-id="heading-2">âš¡ 2. ç¬¬äºŒç»ï¼šå³æ—¶åˆƒç§˜æœ¯ â€”â€”Task.immediate çš„é—ªç”µæ–©ï¼ˆSE-0472ï¼‰</h2>
<p>åˆšè§£å†³æ±¡æŸ“é—®é¢˜ï¼Œå®éªŒå®¤çš„ç´§æ€¥è­¦æŠ¥çªç„¶å“èµ·ï¼šâ€œè­¦å‘Šï¼ç¼–å· 734 çš„å¹½å†¥è‰æ ·æœ¬å­¢å­æ³„æ¼ï¼Œéœ€ç«‹å³åˆ†æè§£æ¯’æµ“åº¦ï¼â€ ä¾¯ä½©åˆšæäº¤åˆ†æä»»åŠ¡ï¼Œå´å‘ç°ä»»åŠ¡è¢«æ’åœ¨äº† â€œå¸¸è§„é˜Ÿåˆ—â€ é‡Œï¼Œé¢„è®¡ç­‰å¾… 1.2 ç§’ â€”â€” è¿™å¯¹å­¢å­æ³„æ¼æ¥è¯´ï¼Œè¶³ä»¥è®©æ±¡æŸ“æ‰©æ•£åˆ°æ•´ä¸ªå®éªŒåŒºã€‚</p>
<p>â€œè¯¥æ­»çš„æ’é˜Ÿæœºåˆ¶ï¼â€ ä¾¯ä½©æ€¥å¾—ç›´è·ºè„šï¼Œè¥å…»ç³•éƒ½æ‰åœ¨äº†æ“ä½œå°ä¸Šï¼Œâ€œå¸¸è§„ä»»åŠ¡åƒæ’é˜Ÿæ‰“é¥­ï¼Œç´§æ€¥ä»»åŠ¡å“ªèƒ½ç­‰ï¼Ÿâ€</p>
<p>æè«æ„å†·ç¬‘ä¸€å£°ï¼ŒæŠ¬æ‰‹æŒ‰ä¸‹æ“ä½œå±ä¸Šçš„ â€œå³æ—¶å“åº”â€ æŒ‰é’®ï¼šâ€œå¸¸è§„<code>Task</code>æ˜¯â€˜æ’é˜Ÿæ–©â€™ï¼Œå†æ€¥ä¹Ÿå¾—ç­‰å‰é¢çš„ä»»åŠ¡åšå®Œï¼›SE-0472 çš„<code>Task.immediate</code>æ˜¯â€˜é—ªç”µæ–©â€™ï¼ˆ<strong>Starting tasks synchronously from caller context</strong>ï¼‰ï¼Œåªè¦ç›®æ ‡æ‰§è¡Œå™¨ç©ºé—²ï¼Œç«‹é©¬åŠ¨æ‰‹ï¼Œç»ä¸æ’é˜Ÿ â€”â€” è¿™æ˜¯æˆ‘å½“å¹´ç‚¸äº†å®éªŒå®¤åï¼ŒèŠ±ä¸‰å¹´æ—¶é—´ä¼˜åŒ–çš„â€˜ç´§æ€¥è§£æ¯’æœ¯â€™ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f62998047e94ac1af13bb679e36d635~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679588&amp;x-signature=DCoi5ELM9CiPmjzBrkegdRH1hyg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹é£å¿«å†™ä¸‹å¯¹æ¯”ä»£ç ï¼Œå±å¹•ä¸Šçš„ä»£ç å¦‚åŒå¥¹çš„æ‹‚å°˜ï¼Œåˆ©è½å¹²è„†ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯åŠ¨ç´§æ€¥è§£æ¯’åˆ†æ"</span>)

<span class="hljs-comment">// å¸¸è§„Taskï¼šæ’é˜Ÿæ‰§è¡Œï¼Œç›¸å½“äºâ€œæ’é˜Ÿæ–©â€</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¸¸è§„åˆ†æå¯åŠ¨ï¼ˆæ’é˜Ÿä¸­ï¼‰"</span>)
}

<span class="hljs-comment">// å³æ—¶Taskï¼šç«‹å³æ‰§è¡Œï¼Œç›¸å½“äºâ€œé—ªç”µæ–©â€</span>
<span class="hljs-type">Task</span>.immediate {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å³æ—¶è§£æ¯’åˆ†æå¯åŠ¨ï¼ˆç´§æ€¥æ‰§è¡Œï¼‰"</span>)
}

<span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ†æä»»åŠ¡æäº¤å®Œæˆ"</span>)
<span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(for: .seconds(<span class="hljs-number">0.1</span>))
</code></pre>
<p>è¿è¡Œç»“æœç¬é—´è·³å‡ºï¼šâ€œå¯åŠ¨ç´§æ€¥è§£æ¯’åˆ†æâ€â†’â€œå³æ—¶è§£æ¯’åˆ†æå¯åŠ¨ï¼ˆç´§æ€¥æ‰§è¡Œï¼‰â€â†’â€œåˆ†æä»»åŠ¡æäº¤å®Œæˆâ€â†’â€œå¸¸è§„åˆ†æå¯åŠ¨ï¼ˆæ’é˜Ÿä¸­ï¼‰â€ã€‚ä¾¯ä½©çœ‹ç€å®æ—¶ç›‘æµ‹çš„æ±¡æŸ“æŒ‡æ•°ï¼Œåœ¨å³æ—¶åˆ†æå®Œæˆåè¿…é€Ÿä¸‹é™ï¼Œæ‚¬ç€çš„å¿ƒç»ˆäºè½åœ°ã€‚</p>
<p>â€œè¿™â€˜é—ªç”µæ–©â€™ä¹Ÿå¤ªé¡¶äº†ï¼â€ ä¾¯ä½©æ¡èµ·è¥å…»ç³•ï¼Œæ‹äº†æ‹ä¸Šé¢çš„ç°å°˜ï¼Œâ€œå¸¸è§„ Task è¦ç­‰é˜Ÿåˆ—æœ‰ç©ºï¼Œå³æ—¶ Task ç›´æ¥æ’é˜Ÿæ‰§è¡Œ â€”â€” å°±åƒç´§æ€¥è§£æ¯’ä¸ç”¨ç­‰æ‰“é¥­ï¼Œç›´æ¥å¼€å°ç¶ï¼â€</p>
<p>æè«æ„è¡¥å……é“ï¼šâ€œ<code>Task.immediate</code>ä¸æ˜¯çæ’é˜Ÿï¼Œè€Œæ˜¯â€˜èƒ½ç«‹å³æ‰§è¡Œå°±ç»ä¸æ’é˜Ÿâ€™ã€‚å®ƒä¼šåœ¨å½“å‰æ‰§è¡Œå™¨ç©ºé—²æ—¶é©¬ä¸Šå¯åŠ¨ï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ª<code>await</code>æ‰å¯èƒ½æš‚åœ â€”â€” å°±åƒæˆ‘çš„æ‹‚å°˜ï¼Œèƒ½ç¬é—´æ–©å‘æ¯’æºï¼Œç»ä¸æ‹–æ³¥å¸¦æ°´ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc2459ebba6c4832a85506a400353128~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679588&amp;x-signature=t27gUatAMAxTmZYzojj%2B29KeU9o%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹åˆè°ƒå‡ºä»»åŠ¡ç»„çš„æ‰©å±•ç”¨æ³•ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä»»åŠ¡ç»„ä¹Ÿæ”¯æŒå³æ—¶å­ä»»åŠ¡ï¼Œé€‚åˆæ‰¹é‡ç´§æ€¥åˆ†æ</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-keyword">await</span> withTaskGroup(of: <span class="hljs-type">Void</span>.<span class="hljs-keyword">self</span>) { group <span class="hljs-keyword">in</span>
        <span class="hljs-comment">// å³æ—¶æ·»åŠ å­ä»»åŠ¡ï¼Œä¸æ’é˜Ÿ</span>
        group.addImmediateTask {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"å­ä»»åŠ¡1ï¼šæ£€æµ‹å­¢å­æ‰©æ•£èŒƒå›´"</span>)
        }
        <span class="hljs-comment">// æœªå–æ¶ˆæ—¶æ·»åŠ å³æ—¶å­ä»»åŠ¡ï¼Œæ›´å®‰å…¨</span>
        group.addImmediateTaskUnlessCancelled {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"å­ä»»åŠ¡2ï¼šè®¡ç®—è§£æ¯’å‰‚æµ“åº¦"</span>)
        }
    }
}
</code></pre>
<p>â€œè¿™äº›æ–¹æ³•èƒ½åº”å¯¹æ‰¹é‡ç´§æ€¥æƒ…å†µï¼Œæ¯”å¦‚å¤šä»½æ ·æœ¬åŒæ—¶æ³„æ¼ã€‚â€ æè«æ„çš„è¯­æ°”ç¼“å’Œäº†äº›ï¼Œâ€œå½“å¹´è¦æ˜¯æœ‰è¿™æŠ€æœ¯ï¼Œæˆ‘ä¹Ÿä¸ç”¨çœ¼çççœ‹ç€æ±¡æŸ“æ‰©æ•£ï¼Œç‚¸æ‰åŠè‰˜ç©ºé—´ç«™ã€‚â€</p>
<hr/>
<h2 data-id="heading-3">ğŸ”® ç»“å°¾ï¼šééš”ç¦»æ¯’é›¾ç°ï¼Œå¼‚æ­¥è·¨èˆ±åŠ«å°†è‡³</h2>
<p>å°±åœ¨ä¾¯ä½©å½»åº•æ¸…ç†å®Œä¸¤ä¸ª â€œæ•°æ®æ¯’ç˜¤â€ï¼Œå‡†å¤‡åº†ç¥åƒè‰è“å‘³è¥å…»ç³•æ—¶ï¼Œå®éªŒå®¤çš„ â€œæ•°æ®çº¯åº¦ç›‘æµ‹ä»ªâ€ çªç„¶æŠ¥è­¦ï¼šâ€œè­¦å‘Šï¼ééš”ç¦»å¼‚æ­¥å‡½æ•°å‡ºç°è·¨èˆ±è®¿é—®ï¼Œæ•°æ®æ¯’é›¾æ»‹ç”Ÿï¼â€</p>
<p>ä¾¯ä½©ç›¯ç€å±å¹•ä¸Šçš„è­¦æŠ¥ï¼Œä¸€è„¸èŒ«ç„¶ï¼šâ€œééš”ç¦»çš„å¼‚æ­¥å‡½æ•°ï¼Ÿæˆ‘æ²¡è®©å®ƒè·¨èˆ±å•Šï¼â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0f66b5e7b8445fba546bf86b50d5a6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679588&amp;x-signature=GyOr1c%2BsMeWOLuwhbikIXHsCenY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æè«æ„çš„æŠ¤ç›®é•œç¬é—´å˜çº¢ï¼Œè¯­æ°”å‡é‡å¦‚é“ï¼šâ€œè¿™æ˜¯æ¯”å‰ä¸¤ä¸ªæ¯’ç˜¤æ›´å‡¶é™©çš„â€˜éšå½¢æ¯’é›¾â€™â€”â€” ééš”ç¦»å¼‚æ­¥å‡½æ•°é»˜è®¤ä¼šè·‘åˆ°åˆ«çš„ Actor ä¸Šï¼Œå“ªæ€•ä½ åœ¨ä¸»èˆ±è°ƒç”¨ï¼Œå®ƒä¹Ÿå¯èƒ½å·å·æºœå»å‰¯èˆ±ï¼Œå¸¦å›å¤´æ±¡æŸ“çš„æ•°æ®ã€‚â€</p>
<p>å¥¹ä»å®éªŒæœçš„å‚¨ç‰©æ ¼ä¸­æå‡ºä¸€ä»½åŠ å¯†æ–‡ä»¶ï¼Œä¸Šé¢æ ‡ç€ â€œSE-0461â€ï¼šâ€œè¿™æ˜¯æˆ‘åˆšä»æ˜Ÿé™…æ•°æ®å®‰å…¨å±€æ‹¿åˆ°çš„â€˜è§£æ¯’é¢„æ¡ˆâ€™ï¼Œèƒ½è®©ééš”ç¦»å¼‚æ­¥å‡½æ•°é»˜è®¤è·Ÿç€è°ƒç”¨è€…çš„ Actor èµ°ï¼Œç›¸å½“äºç»™å®ƒåŠ äº†â€˜è·Ÿå±è™«æ·é”â€™ï¼Œå†ä¹Ÿä¸ä¼šä¹±è·‘ã€‚ä¸‹æ¬¡å’±ä»¬å¿…é¡»æŠŠè¿™é—¨æŠ€æœ¯åƒé€ï¼Œä¸ç„¶è¿™å®éªŒå®¤è¿Ÿæ—©è¦è¢«â€˜éšå½¢æ¯’é›¾â€™å½»åº•æ±¡æŸ“ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecce441f620345eb9d0ca8f0afa830de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679588&amp;x-signature=cWQ84LrRDzlX2wIm%2FrnJGomK5A8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©æ”¥ç´§æ‰‹é‡Œçš„è¥å…»ç³•ï¼Œçœ¼ç¥åšå®šï¼šâ€œéšå½¢æ¯’é›¾ï¼Ÿå†æ¯’ä¹Ÿæ€•ä¸“ä¸šè§£æ¯’æœ¯ï¼ä¸‹æ¬¡å’±ä»¬å°±ç ´è§£ SE-0461ï¼ŒæŠŠè¿™æœ€åä¸€ä¸ªéšæ‚£è¿æ ¹æ‹”èµ· â€”â€” ä¸ç„¶æˆ‘è¿™æ˜Ÿé™…æ¯’ç†å½’æ¡£çš„æ´»ï¼Œè¿Ÿæ—©è¦è¢«è¿™æ¯’é›¾æ…é»„ï¼â€</p>
<p>æ¬²çŸ¥ SE-0461 å¦‚ä½•ç»™ééš”ç¦»å¼‚æ­¥å‡½æ•°åŠ  â€œè·Ÿå±è™«æ·é”â€ï¼Œä¾¯ä½©å’Œæè«æ„åˆèƒ½å¦å½»åº•å‡€åŒ–å®éªŒå®¤çš„ â€œéšå½¢æ¯’é›¾â€ï¼Œä¸”å¬ä¸‹å›åˆ†è§£ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc68d532404e4bb58ac089c51e4b0c4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765679588&amp;x-signature=BWRERW%2FoTC3QGnOF5ZqKcR9s7bg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç å±æœºï¼šæ¢…æ ¹çš„å†…å­˜æ•‘èµ(ä¸Š) â€”â€”Swift Task ä¸­çš„ [weak self] ç»ˆæè§£å¯†]]></title>    <link>https://juejin.cn/post/7580303864605540361</link>    <guid>https://juejin.cn/post/7580303864605540361</guid>    <pubDate>2025-12-07T02:40:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580303864605540361" data-draft-id="7580329353353510958" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç å±æœºï¼šæ¢…æ ¹çš„å†…å­˜æ•‘èµ(ä¸Š) â€”â€”Swift Task ä¸­çš„ [weak self] ç»ˆæè§£å¯†"/> <meta itemprop="keywords" content="Swift,ç¼–ç¨‹è¯­è¨€,Apple"/> <meta itemprop="datePublished" content="2025-12-07T02:40:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç å±æœºï¼šæ¢…æ ¹çš„å†…å­˜æ•‘èµ(ä¸Š) â€”â€”Swift Task ä¸­çš„ [weak self] ç»ˆæè§£å¯†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:40:26.000Z" title="Sun Dec 07 2025 02:40:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68c3b202a8f3442d8521e191af4b892e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=%2BILD4%2Blo52AKw%2B5Vy2iao6wAvT0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸš¨ 0. æ¥”å­ï¼šå³å°†å¼•çˆ†çš„ç³»ç»Ÿæ ¸å¼¹</h2>
<p>2077 å¹´ï¼Œæ–°ç¡…è°·æ ¸å¿ƒæœºæˆ¿å†…ï¼Œå¥³ä¸»<strong>è‰å¨œ</strong>çš„æŒ‡å°–åœ¨å…¨æ¯é”®ç›˜ä¸Šé£é€Ÿè·³è·ƒï¼Œé¢è§’çš„æ±—ç å´é¡ºç€é¬“è§’æ»‘è½ã€‚å¥¹è´Ÿè´£çš„ â€œå¤©ç½‘å“¨å…µâ€ é˜²å¾¡ç³»ç»Ÿçªç„¶å‘å‡ºåˆºè€³è­¦æŠ¥ï¼Œæ ¸å¿ƒæ¨¡å—å“åº”å»¶è¿Ÿé£™å‡è‡³ 10 ç§’ï¼Œå±å¹•ä¸Šçº¢è‰²è­¦å‘Šå¦‚åŒé²œè¡€è”“å»¶ â€”â€”â€œå†…å­˜æ³„æ¼é£é™©ï¼šä¸€çº§è­¦æˆ’â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/991bcc4f70a645598d61ef1c48861e22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=U1q7Zc33GQpJV62t%2BRISZ1TyUBA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç”·ä¸»<strong>æ°å…‹</strong>å†²è¿›æ¥æ—¶ï¼Œè‰å¨œæ­£æ­»æ­»ç›¯ç€ä»£ç æµï¼Œä¸€æ—çš„ AI åŠ©æ‰‹<strong>æ¢…æ ¹</strong>ï¼ˆé€šä½“é“¶ç™½çš„äººå½¢æŠ•å½±ï¼‰æ­£ç”¨å†°å†·çš„ç”µå­éŸ³æ’­æŠ¥ï¼šâ€œæ£€æµ‹åˆ° 37 å¤„ Task ä»»åŠ¡å¼‚å¸¸æŒæœ‰ self å¼•ç”¨ï¼Œç³»ç»Ÿå†…å­˜å‰©ä½™é‡ 12%ï¼Œé¢„è®¡ 15 åˆ†é’Ÿåæ ¸å¿ƒå´©æºƒã€‚â€</p>
<p>åœ¨æœ¬ç¯‡å†…å­˜å±æœºä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ğŸš¨ 0. æ¥”å­ï¼šå³å°†å¼•çˆ†çš„ç³»ç»Ÿæ ¸å¼¹</li>
<li>ğŸ› ï¸ 1. Completion Handler ä¸­ [weak self] çš„ â€œåŸºæœ¬åŠŸå¿ƒæ³•â€</li>
<li>âš¡ 2. Task ä¸­ â€œç«‹å³è§£åŒ… [weak self]â€ çš„è‡´å‘½é™·é˜±</li>
<li>ğŸ’£ 3. Task å¼€å¤´è§£åŒ… self çš„ â€œæ­»äº¡å¾ªç¯â€</li>
<li>ğŸ§© 4. æ‰“ç ´ â€œå¼ºå¼•ç”¨æ·é”â€ çš„ç ´å±€æ€è·¯</li>
<li>ğŸ”„ 5. é•¿æ—¶è¿è¡Œ Task ä¸­çš„ [weak self]â€œæ±‚ç”Ÿæœ¯â€</li>
<li>ğŸ“ 6. ä¸Šé›†å°ç»“ï¼šTask è§£åŒ…çš„ â€œä¸‰å¤§é“å¾‹â€</li>
<li>â³ ä¸‹é›†é¢„å‘Šï¼šå™¬æ ¸è€…çš„ç»ˆææ€æ‹›</li>
</ul>
<p>è‰å¨œçŒ›åœ°æŠ¬å¤´ï¼Œçœ¼ä¸­é—ªè¿‡ä¸€ä¸ç‹ å‰ï¼šâ€œé—®é¢˜å‡ºåœ¨ [weak self] çš„ä½¿ç”¨ä¸Š â€”â€” æˆ‘ä»¬ä¸€ç›´ä»¥ä¸ºçš„â€˜å®‰å…¨æ“ä½œâ€™ï¼Œå…¶å®æ˜¯å¼•çˆ†ç³»ç»Ÿçš„å®šæ—¶ç‚¸å¼¹ã€‚â€</p>
<p>è€Œä»–ä»¬ä¸çŸ¥é“çš„æ˜¯ï¼Œæš—å¤„çš„ç¥ç§˜é»‘å®¢ç»„ç»‡ â€œå™¬æ ¸è€…â€ï¼Œæ­£é€šè¿‡è¿™äº›æ³„æ¼çš„å†…å­˜ç«¯å£ï¼Œæ‚„ç„¶å…¥ä¾µç³»ç»Ÿæ ¸å¿ƒâ€¦â€¦</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3070914c59c1464a91150ad7a952f495~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=ZJVT3WisWY%2FyYdoTdIbAd%2Bb5IX0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ› ï¸ 1. Completion Handler ä¸­ [weak self] çš„ â€œåŸºæœ¬åŠŸå¿ƒæ³•â€</h2>
<p>ä½œä¸ºæµ¸æ·« Swift å¤šå¹´çš„å¼€å‘è€…ï¼Œè‰å¨œå’Œæ°å…‹å¯¹ [weak self] çš„æ“ä½œæ—©è¯¥è¾¾åˆ° â€œè‚Œè‚‰è®°å¿†â€ çš„å¢ƒç•Œ â€”â€” æ¯•ç«Ÿè¿™æ˜¯é¿å… â€œå¾ªç¯å¼•ç”¨â€ è¿™åº§ä»£ç åŸå¢“çš„å…³é”®æ³•é—¨ã€‚</p>
<p>æ¢…æ ¹æ›¾åœ¨ç³»ç»Ÿæ—¥å¿—ä¸­ç•™ä¸‹è¿‡å…³äº [weak self] çš„æ ¸å¿ƒå®šå¾‹ï¼š<strong>é @escaping ä¿®é¥°çš„é—­åŒ…ï¼Œé€šå¸¸æ— éœ€ [weak self]</strong> ã€‚</p>
<p>åŸå› å¾ˆç®€å•ï¼Œè¿™ç±»é—­åŒ…çš„ç”Ÿå‘½å‘¨æœŸä¸ä¼šè¶…è¿‡æ‰€åœ¨å‡½æ•°çš„ä½œç”¨åŸŸï¼Œå°±åƒçŸ­æš‚åœç•™çš„è¿‡å®¢ï¼Œä¸ä¼šèµ–ç€ä¸èµ°é€ æˆå†…å­˜æ‹¥å µã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c2fe8a42cc64a4dbf7991108f49ffc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=%2Fsj01fauqDhhp1x02O9x%2Bw2IOxA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åæ¥ SE-0269 ææ¡ˆçš„å‡ºç°ï¼Œæ›´æ˜¯ç»™è¿™ä¸€å®šå¾‹ä¸Šäº†åŒä¿é™© â€”â€” å®ƒå…è®¸åœ¨é—­åŒ…ä¸è¢«æŒæœ‰ï¼ˆå³ä¸ä¼šå¼•å‘æ³„æ¼ï¼‰çš„åœºæ™¯ä¸‹ï¼Œéšå¼æ•è· selfï¼Œè®©ä»£ç æ›´ç®€æ´çš„åŒæ—¶ï¼Œä¹Ÿé™ä½äº†æ³„æ¼é£é™©ã€‚</p>
<p>ä¸è¿‡ï¼Œåœ¨éœ€è¦ â€œæ­¥æ­¥ä¸ºè¥â€ çš„å¼‚æ­¥æ“ä½œä¸­ï¼Œ[weak self] çš„ â€œå¼ºå¼±è½¬æ¢â€ å°±æˆäº†å¿…ç»ƒå¿ƒæ³•ã€‚</p>
<p>æ¯”å¦‚è‰å¨œæœ€å¸¸å†™çš„åŠ è½½æ•°æ®ä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">loadData { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] data <span class="hljs-keyword">in</span> 
  <span class="hljs-comment">// å…ˆç¡®è®¤selfè¿˜â€œæ´»ç€â€ï¼Œæ­»äº†å°±ç›´æ¥æ’¤é€€</span>
  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

  <span class="hljs-comment">// å®‰å…¨ä½¿ç”¨dataï¼Œæ­¤æ—¶selfæ˜¯å¼ºå¼•ç”¨</span>
  <span class="hljs-keyword">self</span>.handleLoadedData(data)
}
</code></pre>
<p>è¿™ç§æ“ä½œé€»è¾‘æ¸…æ™°å¾—å¦‚åŒæ¢…æ ¹çš„æˆ˜æœ¯è§„åˆ’ï¼šå‘èµ· loadData è¯·æ±‚åï¼Œè‹¥åœ¨æ•°æ®è¿”å›å‰ self å·²è¢«é”€æ¯ï¼ˆæ¯”å¦‚é¡µé¢å…³é—­ï¼‰ï¼Œé—­åŒ…å°±ç›´æ¥ç»ˆæ­¢ï¼Œç»ä¸åšæ— ç”¨åŠŸã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71641bf8b15e47c1a9baeaeb7d8e30fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=8EDYrorrNLAuJbx4TZnwM3EnvwI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å½“å¼‚æ­¥æ“ä½œéœ€è¦ â€œå  buffâ€ï¼ˆå¤šå±‚åµŒå¥—ï¼‰æ—¶ï¼Œè¿™å¥—å¿ƒæ³•æ›´å¾—å±‚å±‚è´¯å½»ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">loadData { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] data <span class="hljs-keyword">in</span> 
  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

  <span class="hljs-comment">// ç¬¬ä¸€å±‚é—­åŒ…æ‹¿åˆ°å¼ºselfåï¼Œè°ƒç”¨processData</span>
  processData(data) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] models <span class="hljs-keyword">in</span> 
    <span class="hljs-comment">// ç¬¬äºŒå±‚é—­åŒ…å¿…é¡»é‡æ–°å¼±å¼•ç”¨selfï¼Œé¿å…æ–°çš„æ³„æ¼</span>
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
    <span class="hljs-keyword">self</span>.updateUI(with: models)
  }
}
</code></pre>
<p>æ°å…‹æ›¾åœ¨è¿™é‡Œæ ½è¿‡è·Ÿå¤´ â€”â€” ä»–ä»¥ä¸ºç¬¬ä¸€å±‚æ‹¿åˆ°å¼º self åï¼Œç¬¬äºŒå±‚å°±èƒ½ â€œé«˜æ•æ— å¿§â€ã€‚ç»“æœæ¢…æ ¹çš„æ£€æµ‹æŠ¥å‘Šç›´æ¥ç»™ä»–ä¸Šäº†ä¸€è¯¾ï¼š<strong>ç¬¬ä¸€å±‚çš„å¼º self ä»…åœ¨å½“å‰é—­åŒ…æœ‰æ•ˆï¼Œç¬¬äºŒå±‚é—­åŒ…è‹¥ä¸é‡æ–°å¼±å¼•ç”¨ï¼Œä¼šæŠŠå¼º self â€œç»‘æ¶â€ åˆ°ä»»åŠ¡ç»“æŸï¼Œå½¢æˆçŸ­æœŸå†…å­˜æ³„æ¼</strong>ã€‚</p>
<p>è€Œå½“ä»–ä»¬æŠŠè¿™å¥— â€œé—­åŒ…å¿ƒæ³•â€ ç…§æ¬åˆ° Task ä»»åŠ¡ä¸­æ—¶ï¼ŒçœŸæ­£çš„å±æœºæ‰åˆšåˆšå¼€å§‹â€¦â€¦</p>
<h2 data-id="heading-2">âš¡ 2. Task ä¸­ â€œç«‹å³è§£åŒ… [weak self]â€ çš„è‡´å‘½é™·é˜±</h2>
<p>ä¸ºäº†ä¿®å¤ç³»ç»Ÿæ¼æ´ï¼Œè‰å¨œå†³å®šå°†åŸæ¥çš„ â€œCompletion Handlerâ€ å¼‚æ­¥é“¾ï¼Œæ”¹é€ ä¸º Swift Concurrency çš„ async/await é£æ ¼ã€‚</p>
<p>å¥¹ä¸‹æ„è¯†åœ°æ²¿ç”¨äº†é—­åŒ…çš„æ€è·¯ï¼Œå†™å‡ºäº†è¿™æ ·çš„ Task ä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
  <span class="hljs-comment">// ä¸€è¿›æ¥å°±å…ˆæŠ“ç‰¢self</span>
  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

  <span class="hljs-comment">// å¼‚æ­¥åŠ è½½æ•°æ®ï¼Œå†å¤„ç†æˆæ¨¡å‹</span>
  <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.loadData()
  <span class="hljs-keyword">let</span> models <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.processData(data)
  <span class="hljs-keyword">self</span>.updateUI(with: models)
}
</code></pre>
<p>å°±åœ¨å¥¹ä»¥ä¸ºè¿™æ˜¯ â€œå®Œç¾è¿ç§»â€ æ—¶ï¼Œæ¢…æ ¹çš„çº¢è‰²è­¦å‘Šçªç„¶ç‚¸å“ï¼šâ€œé”™è¯¯æ“ä½œï¼æ­¤ä»£ç æœªè§£å†³åŸç¤ºä¾‹ä¸­çš„å†…å­˜æ³„æ¼é—®é¢˜ï¼Œåè€ŒåŠ å‰§é£é™©ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd81c23413ce4bb4819d865819307cde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=XKJGL8lycxfzCoGp0o2PBkhgNkM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ°å…‹å‡‘è¿‡æ¥çš±çœ‰ï¼šâ€œæ€ä¹ˆå¯èƒ½ï¼Ÿæˆ‘æ˜æ˜åŠ äº† [weak self]ï¼Œè¿˜è§£åŒ…äº†å•Šã€‚â€</p>
<p>æ¢…æ ¹éšå³è°ƒå‡ºä»£ç æ‰§è¡Œæµç¨‹å›¾ï¼Œæ­ç¤ºäº†å…³é”®çœŸç›¸ï¼š<strong>éç»“æ„åŒ– Taskï¼ˆunstructured Taskï¼‰ä¼š â€œå³åˆ»å¯åŠ¨â€</strong> â€”â€” åªè¦åˆ›å»ºï¼Œå°±ä¼šä»¥æœ€å¿«é€Ÿåº¦å¼€å§‹è¿è¡Œã€‚</p>
<p>æ¯”å¦‚è‰å¨œå†™çš„è¿™ä¸ª loadModels å‡½æ•°ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">loadModels</span>() {
  <span class="hljs-comment">// 1. è¿›å…¥å‡½æ•°ï¼Œåˆ›å»ºTask</span>
  <span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
    <span class="hljs-comment">// 3. å‡½æ•°æ‰§è¡Œåˆ°æœ«å°¾åï¼ŒTaskç«‹å³å¯åŠ¨</span>
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

    <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.loadData()
    <span class="hljs-keyword">let</span> models <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.processData(data)
  }
  <span class="hljs-comment">// 2. å‡½æ•°æ‰§è¡Œåˆ°è¿™é‡Œï¼Œå³å°†ç»“æŸ</span>
}
</code></pre>
<p>â€œç®€å•è¯´ï¼ŒTask çš„å¯åŠ¨é€Ÿåº¦æ¯”ä½ çœ¨çœ¼ç›è¿˜å¿«ï¼Œâ€ è‰å¨œçªç„¶æç„¶å¤§æ‚Ÿï¼Œâ€œå‡½æ•°åˆšè·‘å®Œï¼ŒTask å°±å·²ç»å¼€å§‹å¹²æ´»äº†ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d7f0f6b33db4d62aad4a42563ed0dca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=cygYWmjSOjrg%2F5wndJEejKx99NY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å³ä¾¿åœ¨æ›´å¤æ‚çš„è°ƒç”¨æ ˆä¸­ï¼ŒTask çš„å¯åŠ¨å¯èƒ½ä¼šç¨æœ‰å»¶è¿Ÿï¼Œä½†æ€»ä½“è€Œè¨€ï¼Œå®ƒçš„ â€œè¡ŒåŠ¨åŠ›â€ å ªç§° â€œè¿…é›·ä¸åŠæ©è€³â€ã€‚</p>
<p>è€Œè¿™ï¼Œæ­£æ˜¯ â€œç«‹å³è§£åŒ…â€ åŸ‹ä¸‹çš„ç¬¬ä¸€ä¸ªé›·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83f3e7b80179400fa39197f52bd7a553~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=xDKMe85aD1JyvTJfMf9%2B0lrV%2Biw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-3">ğŸ’£ 3. Task å¼€å¤´è§£åŒ… self çš„ â€œæ­»äº¡å¾ªç¯â€</h2>
<p>æ¢…æ ¹ç”¨å…¨æ¯æŠ•å½±æ¨¡æ‹Ÿå‡º Task çš„è¿è¡Œè¿‡ç¨‹ï¼šç”±äº Task å¯åŠ¨é€Ÿåº¦æå¿«ï¼Œä»åˆ›å»ºåˆ°å¯åŠ¨çš„é—´éš™é‡Œï¼Œself è¢«é”€æ¯çš„æ¦‚ç‡å¾®ä¹å…¶å¾® â€”â€” å°±åƒå­å¼¹åˆšå‡ºè†›ï¼Œç›®æ ‡ä¸å¯èƒ½ç¬é—´æ¶ˆå¤±ã€‚</p>
<p>â€œä¸€æ—¦åœ¨ Task å¼€å¤´ç”¨ guard let self è§£åŒ…ï¼Œâ€ æ¢…æ ¹çš„ç”µå­éŸ³é™¡ç„¶å°–é”ï¼Œâ€œTask å°±ä¼šåƒå™¬æ ¸è€…çš„ç—…æ¯’ä¸€æ ·ï¼Œæ­»æ­»â€˜å’¬ä½â€™self ä¸æ”¾ï¼Œç›´åˆ°ä»»åŠ¡å®Œå…¨ç»“æŸã€‚â€</p>
<p>ä¸ºäº†è®©æ°å…‹å½»åº•æ˜ç™½ï¼Œè‰å¨œæŠŠè¿™æ®µ Task ä»£ç  â€œç¿»è¯‘â€ å›äº†åŸæ¥çš„é—­åŒ…å†™æ³• â€”â€” ç»“æœè®©ä¸¤äººå€’å¸ä¸€å£å‡‰æ°”ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">loadData { data <span class="hljs-keyword">in</span> 
  <span class="hljs-comment">// è¿™é‡Œæ²¡æœ‰[weak self]ï¼Œselfè¢«å¼ºå¼•ç”¨</span>
  <span class="hljs-keyword">self</span>.processData(data) { models <span class="hljs-keyword">in</span> 
    <span class="hljs-comment">// å…¨ç¨‹å¼ºå¼•ç”¨ï¼Œç›´åˆ°ä»»åŠ¡ç»“æŸ</span>
    <span class="hljs-keyword">self</span>.updateUI(with: models)
  }
}
</code></pre>
<p>â€œè¿™ç®€ç›´æ˜¯è£¸å¥”ï¼â€ æ°å…‹æƒŠé“ã€‚</p>
<p>æ²¡é”™ï¼Œè¿™æ®µä»£ç é‡Œæ²¡æœ‰ä»»ä½• [weak self] ä¿æŠ¤ï¼Œself ä¼šè¢«ä¸€è·¯å¼ºå¼•ç”¨åˆ°æœ€åä¸€ä¸ªé—­åŒ…æ‰§è¡Œå®Œæ¯• â€”â€” è€Œè‰å¨œå†™çš„ Task ä»£ç ï¼Œæœ¬è´¨ä¸Šå’Œè¿™ä¸ª â€œè£¸å¥”ç‰ˆâ€ æ¯«æ— åŒºåˆ«ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8eeca62429b4fe8aff5d7151b658dee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=HoNjZZv6f5B0K%2FUGxV3po7U1%2Fg8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è‰å¨œæ‰äº†æ‰çœ‰å¿ƒï¼šâ€œé€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ä¼šç«‹åˆ»ç‚¸é”… â€”â€” ä»»åŠ¡è·‘å®Œ self å°±ä¼šè¢«é‡Šæ”¾ï¼Œé¡¶å¤šè®©å†…å­˜å¤šæ‰›ä¸€ä¼šå„¿ã€‚ä½†ç°åœ¨ç³»ç»Ÿæ­£åœ¨è¢«å…¥ä¾µï¼Œæ¯ä¸€ç§’çš„å†…å­˜å ç”¨éƒ½æ˜¯è‡´å‘½çš„ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œå¦‚æœåœ¨ loadData å’Œ processData ä¹‹é—´ï¼Œself è¢«é”€æ¯äº†ï¼Œæˆ‘ä»¬æ€ä¹ˆé˜»æ­¢ processData ç»§ç»­æ‰§è¡Œå‘¢ï¼Ÿâ€</p>
<p>è¿™æ­£æ˜¯ä»–ä»¬å½“å‰é¢ä¸´çš„æ­»å±€ï¼š<strong>æ—¢è¦è®© Task æ­£å¸¸å¹²æ´»ï¼Œåˆä¸èƒ½è®©å®ƒ â€œç»‘æ¶â€ self å¼•å‘æ³„æ¼ï¼Œæ›´è¦åœ¨ self æ¶ˆå¤±æ—¶åŠæ—¶ç»ˆæ­¢ä»»åŠ¡ã€‚</strong></p>
<h2 data-id="heading-4">ğŸ§© 4. æ‰“ç ´ â€œå¼ºå¼•ç”¨æ·é”â€ çš„ç ´å±€æ€è·¯</h2>
<p>â€œè¦ç ´è§£è¿™ä¸ªå›°å±€ï¼Œæ ¸å¿ƒå°±æ˜¯ â€”â€” ç»ä¸ä¸»åŠ¨æŠ“ç‰¢ selfã€‚â€ æ¢…æ ¹çªç„¶ç»™å‡ºæç¤ºï¼ŒæŠ•å½±ä¸­æµ®ç°å‡ºä¸€æ®µæ–°ä»£ç ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd9fb01b7c434707ac5f456f18b3e7bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=SezkohNARmN2oUVxzz0N%2FkD0tCc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è‰å¨œå’Œæ°å…‹å‡‘è¿‘ä¸€çœ‹ï¼Œè™½ç„¶ä»£ç ç•¥æ˜¾ â€œä¸‘é™‹â€ï¼Œä½†é€»è¾‘å´è±ç„¶å¼€æœ—ï¼šé€šè¿‡å¤šæ¬¡ nil æ£€æŸ¥å’Œå¯é€‰é“¾è°ƒç”¨ï¼Œé¿å…å°† self è½¬ä¸ºå¼ºå¼•ç”¨ï¼Œè®© Task å§‹ç»ˆ â€œè½»è£…ä¸Šé˜µâ€ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
  <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šå…ˆåŠ è½½æ•°æ®ï¼Œæ­¤æ—¶ä¸ä¾èµ–selfï¼Œæ— éœ€è§£åŒ…</span>
  <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.loadData() <span class="hljs-operator">??</span> <span class="hljs-type">Data</span>()
  <span class="hljs-comment">// åŠ è½½å®Œæˆåï¼Œæ£€æŸ¥selfæ˜¯å¦è¿˜åœ¨ï¼Œä¸åœ¨å°±æ’¤é€€</span>
  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">!=</span> <span class="hljs-literal">nil</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

  <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šç”¨å¯é€‰é“¾è°ƒç”¨processDataï¼Œé¿å…å¼ºå¼•ç”¨</span>
  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> models <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.processData(data) <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-comment">// å®‰å…¨ä½¿ç”¨modelsï¼Œæ­¤æ—¶selfä»å¯èƒ½è¢«é‡Šæ”¾ï¼Œä½†modelså·²æ‹¿åˆ°</span>
  <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.updateUI(with: models)
}
</code></pre>
<p>â€œè¿™æ‹›å¤Ÿç‹ ï¼Œâ€ æ°å…‹å’‚èˆŒï¼Œâ€œå…¨ç¨‹ä¸ç¢°å¼º selfï¼Œå°±åƒæ‰“æ¸¸å‡»ä¸€æ ·ï¼Œæ‰“ä¸€ä¸‹å°±è·‘ï¼Œç»ä¸æ‹æˆ˜ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcc55928cac14560bae554b1d515b22d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=0FxIyA8N78mO%2FAn8cZiTalsujPc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä½†æ¢…æ ¹éšå³è¡¥å……ï¼šâ€œè¿™åªæ˜¯åŸºç¡€æ“ä½œã€‚çœŸæ­£çš„è€ƒéªŒï¼Œæ¥è‡ªé‚£äº›â€˜æŒä¹…æˆ˜â€™ä»»åŠ¡ â€”â€” æ¯”å¦‚ç³»ç»Ÿæ­£åœ¨è¿è¡Œçš„â€˜å…¨é‡æ•°æ®åˆ†é¡µåŠ è½½â€™ä»»åŠ¡ï¼Œé‚£æ‰æ˜¯å†…å­˜æ³„æ¼çš„é‡ç¾åŒºã€‚â€</p>
<p>è¯éŸ³åˆšè½ï¼Œæœºæˆ¿çš„è­¦æŠ¥å£°çªç„¶å‡çº§ï¼Œçº¢è‰²ç¯å…‰ç–¯ç‹‚é—ªçƒã€‚å±å¹•ä¸Šæ˜¾ç¤ºï¼šâ€œå™¬æ ¸è€…å·²çªç ´ç¬¬ä¸‰é“é˜²çº¿ï¼Œå…¨é‡åŠ è½½ Task å‡ºç°å¼‚å¸¸å¾ªç¯ï¼Œå†…å­˜å‰©ä½™ 8%ï¼â€</p>
<h2 data-id="heading-5">ğŸ”„ 5. é•¿æ—¶è¿è¡Œ Task ä¸­çš„ [weak self]â€œæ±‚ç”Ÿæœ¯â€</h2>
<p>è‰å¨œç«‹åˆ»è°ƒå‡º â€œå…¨é‡æ•°æ®åˆ†é¡µåŠ è½½â€ çš„ä»£ç  â€”â€” è¿™æ˜¯æ°å…‹æ˜¨å¤©åˆšå†™å®Œçš„åŠŸèƒ½ï¼Œç”¨äºåŒæ­¥äº‘ç«¯çš„é˜²å¾¡æ—¥å¿—ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">loadAllPages</span>() {
  <span class="hljs-comment">// é˜²æ­¢é‡å¤å¯åŠ¨ä»»åŠ¡</span>
  <span class="hljs-keyword">guard</span> fetchPagesTask <span class="hljs-operator">==</span> <span class="hljs-literal">nil</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

  fetchPagesTask <span class="hljs-operator">=</span> <span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
    <span class="hljs-comment">// ä¸€è¿›æ¥å°±è§£åŒ…selfï¼Œè¿™æ˜¯è‡´å‘½é”™è¯¯ï¼</span>
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

    <span class="hljs-keyword">var</span> hasMorePages <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
    <span class="hljs-comment">// å¾ªç¯åŠ è½½æ‰€æœ‰åˆ†é¡µï¼Œç›´åˆ°æ²¡æœ‰æ›´å¤šæ•°æ®æˆ–ä»»åŠ¡è¢«å–æ¶ˆ</span>
    <span class="hljs-keyword">while</span> hasMorePages <span class="hljs-operator">&amp;&amp;</span> <span class="hljs-operator">!</span><span class="hljs-type">Task</span>.isCancelled {
      <span class="hljs-keyword">let</span> page <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.fetchNextPage()
      hasMorePages <span class="hljs-operator">=</span> <span class="hljs-operator">!</span>page.isLastPage
      <span class="hljs-keyword">self</span>.savePageData(page)
    }

    <span class="hljs-comment">// ä»»åŠ¡ç»“æŸï¼Œæ¸…ç©ºå¼•ç”¨</span>
    fetchPagesTask <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span>
  }
}
</code></pre>
<p>â€œé—®é¢˜å°±å‡ºåœ¨å¾ªç¯å¤–é¢çš„è§£åŒ…ä¸Šï¼â€ è‰å¨œä¸€çœ¼çœ‹ç©¿ç—‡ç»“ã€‚å¥¹è®©æ¢…æ ¹éšè—æ— å…³ä»£ç ï¼Œéœ²å‡ºæ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> } <span class="hljs-comment">// ç¥¸æ ¹åœ¨è¿™é‡Œ</span>

  <span class="hljs-keyword">var</span> hasMorePages <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
  <span class="hljs-keyword">while</span> hasMorePages {
    <span class="hljs-keyword">let</span> page <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.fetchNextPage()
    hasMorePages <span class="hljs-operator">=</span> <span class="hljs-operator">!</span>page.isLastPage
  }
}
</code></pre>
<p>â€œè¿™ä¸ª Task ä¸€æ—¦å¯åŠ¨ï¼Œself å°±è¢«å¼ºå¼•ç”¨åˆ°å¾ªç¯ç»“æŸï¼Œâ€ æ°å…‹æ‡Šæ¼åœ°æ‹äº†ä¸‹æ¡Œå­ï¼Œâ€œå¦‚æœåŠ è½½ 100 é¡µæ•°æ®ï¼Œself å°±å¾—è¢«ç»‘ 100 æ¬¡è¯·æ±‚çš„æ—¶é—´ â€”â€” è¦æ˜¯ä¸­é€”é¡µé¢é”€æ¯ï¼Œself æ ¹æœ¬é‡Šæ”¾ä¸äº†ï¼â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ace248401143452b9dea0ad339e7fc51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=bT7D04uhjadxUO3BjFBEdIPooE4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è‰å¨œæ²¡æœ‰è¯´è¯ï¼Œç›´æ¥åŠ¨æ‰‹ä¿®æ”¹ä»£ç ï¼Œåªç§»åŠ¨äº†ä¸€è¡Œï¼Œå°±è®©æ¢…æ ¹çš„è­¦æŠ¥è§£é™¤äº†ä¸€åŠï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
  <span class="hljs-keyword">var</span> hasMorePages <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>

  <span class="hljs-keyword">while</span> hasMorePages {
    <span class="hljs-comment">// æŠŠè§£åŒ…æ¬è¿›å¾ªç¯ï¼Œæ¯æ¬¡è¿­ä»£åªå¼ºå¼•ç”¨ä¸€æ¬¡</span>
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">break</span> }
    <span class="hljs-keyword">let</span> page <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.fetchNextPage()
    hasMorePages <span class="hljs-operator">=</span> <span class="hljs-operator">!</span>page.isLastPage
    <span class="hljs-keyword">self</span>.savePageData(page)
    <span class="hljs-comment">// è¿­ä»£ç»“æŸï¼Œå¼ºselfè‡ªåŠ¨é‡Šæ”¾</span>
  }
}
</code></pre>
<p>â€œå¦™å•Šï¼â€ æ°å…‹çœ¼ç›ä¸€äº®ï¼Œâ€œç°åœ¨æ¯æ¬¡å¾ªç¯åªåœ¨æ‰§è¡Œæ—¶æŠ“ä¸€ä¸‹ selfï¼Œç”¨å®Œå°±æ”¾ã€‚å¦‚æœ self æ²¡äº†ï¼Œç›´æ¥ break è·³å‡ºå¾ªç¯ï¼ŒTask ä¹Ÿè·Ÿç€ç»“æŸ â€”â€” å®Œç¾ï¼â€</p>
<p>æ¢…æ ¹çš„ç”µå­éŸ³ç»ˆäºæ¢å¤å¹³ç¨³ï¼šâ€œå½“å‰å†…å­˜æ³„æ¼é£é™©é™è‡³ 3 çº§ï¼Œå‰©ä½™å†…å­˜ 18%ã€‚ä½†è¯·æ³¨æ„ï¼Œå™¬æ ¸è€…ä»åœ¨åˆ©ç”¨å¦ä¸€å¤„ Task æ¼æ´å…¥ä¾µï¼Œè¯¥æ¼æ´ä¸â€˜ç»“æ„åŒ– Taskâ€™åŠâ€˜Task å–æ¶ˆæœºåˆ¶â€™ç›¸å…³ã€‚â€</p>
<h2 data-id="heading-6">ğŸ“ 6. ä¸Šé›†å°ç»“ï¼šTask è§£åŒ…çš„ â€œä¸‰å¤§é“å¾‹â€</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4f48227cff6460799c0f643e5b5ce81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=UyyCXy6%2FzttejB%2B1Cp8V5ntBsIk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è‰å¨œçœ‹ç€æš‚æ—¶ç¨³å®šçš„ç³»ç»Ÿï¼Œæ€»ç»“å‡º Task ä¸­ä½¿ç”¨ [weak self] çš„æ ¸å¿ƒå‡†åˆ™ï¼ŒæŠ•å½±åœ¨å±å¹•ä¸Šï¼š</p>
<ol>
<li><strong>çŸ­æœŸ Task å¯ â€œèººå¹³â€</strong>ï¼šå¤§å¤šæ•° Task ç”Ÿå‘½å‘¨æœŸæçŸ­ï¼ˆå‡ ç§’å†…å®Œæˆï¼‰ï¼Œå³ä¾¿å¼ºå¼•ç”¨ selfï¼Œä¹Ÿä¸ä¼šé€ æˆä¸¥é‡æ³„æ¼ï¼Œæ— éœ€è¿‡åº¦çº ç»“ [weak self]ã€‚</li>
<li><strong>ä¸¥ç¦ â€œå¼€å¤´è§£åŒ…â€</strong>ï¼šTask å¯åŠ¨é€Ÿåº¦æå¿«ï¼Œå¼€å¤´ç”¨<code>guard let self</code>ä¼šç¬é—´å°†å¼±å¼•ç”¨è½¬ä¸ºå¼ºå¼•ç”¨ï¼Œç­‰åŒäº â€œä¸»åŠ¨ç»‘ç‚¸å¼¹â€ã€‚</li>
<li><strong>æŒ‰éœ€è§£åŒ…ï¼Œç”¨å®Œå³é‡Š</strong>ï¼šéœ€è¦ self æ—¶å†è§£åŒ…ï¼Œä¸”å°½é‡ç¼©çŸ­å¼ºå¼•ç”¨æ—¶é•¿ï¼ˆå¦‚æ”¾åœ¨å¾ªç¯å†…éƒ¨ï¼‰ï¼›ä¹Ÿå¯ç›´æ¥ç”¨<code>self?</code>è°ƒç”¨æ–¹æ³•ï¼Œå…¨ç¨‹é¿å…å¼ºå¼•ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-7">â³ ä¸‹é›†é¢„å‘Šï¼šå™¬æ ¸è€…çš„ç»ˆææ€æ‹›</h2>
<p>å°±åœ¨è‰å¨œå’Œæ°å…‹ä»¥ä¸ºæš‚æ—¶å®‰å…¨æ—¶ï¼Œæ¢…æ ¹çªç„¶å‘å‡ºæœ€é«˜çº§è­¦æŠ¥ï¼šâ€œæ£€æµ‹åˆ°å™¬æ ¸è€…æ³¨å…¥çš„æ¶æ„ Taskâ€”â€” è¯¥ Task é€šè¿‡â€˜ç»“æ„åŒ– Task ç»„â€™ç»‘å®šäº†ç³»ç»Ÿæ ¸å¿ƒå®ä¾‹ï¼Œä¸”æ— æ³•é€šè¿‡å¸¸è§„å–æ¶ˆæœºåˆ¶ç»ˆæ­¢ã€‚å†…å­˜å‰©ä½™é‡ 5%ï¼Œæ ¸å¿ƒæ¨¡å—å³å°†ç¦»çº¿ï¼â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/232889ad4a454cfdbc11ecc36beae5af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=VW3U8pnvzulo6REYCK%2BKmmJkUnw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å±å¹•ä¸Šï¼Œä¸€è¡Œè¯¡å¼‚çš„ä»£ç ç¼“ç¼“æµ®ç°ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">TaskGroup</span> { context <span class="hljs-keyword">in</span>
  <span class="hljs-keyword">for</span> id <span class="hljs-keyword">in</span> taskIds {
    context.addTask { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
      <span class="hljs-comment">// æ¶æ„ä»£ç éšè—å…¶ä¸­</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.maliciousOperation(id)
    }
  }
}
</code></pre>
<p>â€œç»“æ„åŒ– Task ç»„çš„ [weak self] ç”¨æ³•ï¼Œæˆ‘ä»¬è¿˜æ²¡åƒé€â€¦â€¦â€ æ°å…‹çš„å£°éŸ³æœ‰äº›å‘é¢¤ã€‚</p>
<p>è‰å¨œæ¡ç´§æ‹³å¤´ï¼Œçœ¼ä¸­é—ªè¿‡å†³ç»ï¼šâ€œä¸‹ä¸€é›†ï¼Œæˆ‘ä»¬å¿…é¡»ç ´è§£ TaskGroup çš„å¼•ç”¨é™·é˜±ï¼Œè¿˜è¦æŒæ¡ Task å–æ¶ˆçš„â€˜ç»ˆææ€æ‹›â€™â€”â€” è¿™ä¸ä»…æ˜¯æ‹¯æ•‘ç³»ç»Ÿï¼Œæ›´æ˜¯å’Œå™¬æ ¸è€…çš„ç”Ÿæ­»å¯¹å†³ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/677601b597cf42efb8ab9f21e7152578~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680026&amp;x-signature=VMRyOeRTnWbbZxScTvtUJaD%2F%2F%2FM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è€Œæ­¤æ—¶ï¼Œå™¬æ ¸è€…çš„é¦–é¢†åœ¨æš—å¤„å‘å‡ºå†·ç¬‘ï¼šâ€œä»–ä»¬ä»¥ä¸ºè§£å†³äº†å†…å­˜æ³„æ¼å°±èµ¢äº†ï¼Ÿå¤ªå¤©çœŸäº†ã€‚çœŸæ­£çš„é™·é˜±ï¼Œå°±è—åœ¨â€˜éšå¼ self æ•è·â€™å’Œâ€˜Task ä¼˜å…ˆçº§â€™é‡Œâ€¦â€¦â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç å±æœºï¼šæ¢…æ ¹çš„å†…å­˜æ•‘èµ(ä¸‹) â€”â€” TaskGroup çš„ç»ˆæåæ€]]></title>    <link>https://juejin.cn/post/7580310413754794034</link>    <guid>https://juejin.cn/post/7580310413754794034</guid>    <pubDate>2025-12-07T02:42:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580310413754794034" data-draft-id="7580310413754777650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç å±æœºï¼šæ¢…æ ¹çš„å†…å­˜æ•‘èµ(ä¸‹) â€”â€” TaskGroup çš„ç»ˆæåæ€"/> <meta itemprop="keywords" content="Swift,Apple"/> <meta itemprop="datePublished" content="2025-12-07T02:42:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç å±æœºï¼šæ¢…æ ¹çš„å†…å­˜æ•‘èµ(ä¸‹) â€”â€” TaskGroup çš„ç»ˆæåæ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:42:45.000Z" title="Sun Dec 07 2025 02:42:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b5a9500f4c941a69d81fa0803d278e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=MbTaY%2BnnfO9msUcDPdSq5DmXrmc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ”¥ 0. å±æœºå‡çº§ï¼šTaskGroup ä¸­çš„è‡´å‘½é™·é˜±</h2>
<p>â€œå†…å­˜å‰©ä½™ 4%ï¼æ ¸å¿ƒç®—åŠ›è¢«æ¶æ„ Task åå™¬ï¼â€ æ¢…æ ¹çš„æŠ•å½±çªç„¶é—ªçƒçº¢å…‰ï¼Œæ•´ä¸ªæœºæˆ¿çš„åº”æ€¥ç¯éª¤ç„¶äº®èµ·ã€‚è‰å¨œç›¯ç€å±å¹•ä¸Šç–¯ç‹‚æ»šåŠ¨çš„ TaskGroup ä»£ç ï¼ŒæŒ‡å°–å› ç”¨åŠ›è€Œæ³›ç™½ â€”â€” å™¬æ ¸è€…è¿™æ‹› â€œäººæµ·æˆ˜æœ¯â€ å ªç§°æ¯’è¾£ï¼Œç”¨æ•°åä¸ªå­ä»»åŠ¡åŒæ—¶ç»‘å®šç³»ç»Ÿæ ¸å¿ƒï¼Œå¦‚åŒèšç¾¤å•ƒé£Ÿé›„ç‹®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d12d3278d177493c93ca502ea1111cc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=FYFt3YsnTZYZ6eiWR8PnXktNScY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ°å…‹æ€¥å¾—æ»¡å¤´å¤§æ±—ï¼šâ€œç»“æ„åŒ– TaskGroup å’Œä¹‹å‰çš„ Task ä¸ä¸€æ ·ï¼Œå­ä»»åŠ¡å…¨é  context ç®¡ç†ï¼Œ[weak self] åŠ åœ¨å“ªé‡Œéƒ½ä¸å¯¹ï¼â€ è¯éŸ³æœªè½ï¼Œå±å¹•çªç„¶å¼¹å‡ºå™¬æ ¸è€…çš„æŒ‘è¡…ä¿¡æ¯ï¼Œä¼´éšç€æ‰­æ›²çš„ç”µå­ç¬‘å£°ï¼šâ€œä½ ä»¬ä»¥ä¸ºæ‡‚äº† [weak self]ï¼ŸTaskGroup çš„å¼•ç”¨é”é“¾ï¼Œæ‰æ˜¯ä½ ä»¬çš„è‘¬èº«ä¹‹åœ°ï¼â€</p>
<p>åœ¨æœ¬æ¬¡å†…å­˜å±æœºä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ğŸ”¥ 0. å±æœºå‡çº§ï¼šTaskGroup ä¸­çš„è‡´å‘½é™·é˜±</li>
<li>ğŸ§© 1. TaskGroup çš„ [weak self]â€œç ´é“¾å¿ƒæ³•â€</li>
<li>ğŸš« 2. Task å–æ¶ˆçš„ â€œé‡œåº•æŠ½è–ªâ€ ä¹‹è®¡</li>
<li>ğŸ’€ 3. éšå¼ self çš„ â€œç»ˆæéª—å±€â€ ä¸èµ„æºæ¸…ç†</li>
<li>ğŸ”„ 4. å¼‚æ­¥æµä¸­çš„ â€œç»­å‘½â€ æŠ€å·§ä¸ç»ˆæé˜²å¾¡</li>
<li>ğŸ¯ 5. ä¸‹é›†å°ç»“ï¼šTask å†…å­˜ç®¡ç†çš„ â€œä¹é˜³çœŸç»â€</li>
<li>âš¡ ç»ˆå±€ä¹‹æˆ˜ï¼šæ¥è‡ªæœªæ¥çš„è­¦å‘Š</li>
</ul>
<p>æ¢…æ ¹çªç„¶åˆ‡å…¥ç³»ç»Ÿæ—¥å¿—ï¼Œé«˜äº®æ˜¾ç¤ºä¸€è¡Œè‡´å‘½ä»£ç ï¼šâ€œé—®é¢˜ä¸åœ¨å­ä»»åŠ¡ï¼Œè€Œåœ¨éšå¼ self æ•è·ï¼TaskGroup çš„åˆå§‹åŒ–é—­åŒ…é»˜è®¤å¼ºå¼•ç”¨ selfï¼Œè¿™æ˜¯ç¼–è¯‘å™¨çš„â€˜æš—åº¦é™ˆä»“â€™ï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d33dffff9fda4bf584d0dd9b58faa9ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=NRvhya2DskajzXdQvfXvxmY8%2Bhg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ§© 1. TaskGroup çš„ [weak self]â€œç ´é“¾å¿ƒæ³•â€</h2>
<p>è‰å¨œå¼ºè¿«è‡ªå·±å†·é™ä¸‹æ¥ï¼Œè°ƒå‡º TaskGroup çš„åŸºç¡€æ¶æ„ä»£ç  â€”â€” è¿™æ­£æ˜¯å™¬æ ¸è€…ç”¨æ¥å…¥ä¾µçš„æ ¸å¿ƒæ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">startMaliciousAttack</span>() {
  <span class="hljs-type">Task</span> {
    <span class="hljs-comment">// éšå¼å¼ºå¼•ç”¨selfï¼Œç¼–è¯‘å™¨ä¸ä¼šè­¦å‘Šï¼</span>
    <span class="hljs-keyword">await</span> withTaskGroup(of: <span class="hljs-type">Data</span>.<span class="hljs-keyword">self</span>) { context <span class="hljs-keyword">in</span>
      <span class="hljs-keyword">for</span> id <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">50</span> {
        context.addTask { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
          <span class="hljs-comment">// å­ä»»åŠ¡å¼±å¼•ç”¨æ²¡ç”¨ï¼Œå› ä¸ºå¤–å±‚å·²è¢«å¼ºå¼•ç”¨</span>
          <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span><span class="hljs-operator">?</span>.maliciousOperation(id)
        }
      }
      <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰å­ä»»åŠ¡å®Œæˆï¼Œselfè¢«ç»‘åˆ°æœ€åä¸€åˆ»</span>
      <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> result <span class="hljs-keyword">in</span> context {
        <span class="hljs-keyword">self</span>.processLeakedData(result)
      }
    }
  }
}
</code></pre>
<p>â€œç—…æ ¹åœ¨å¤–å±‚ Task çš„é—­åŒ…ï¼â€ è‰å¨œçŒ›åœ°æ‹æ¡Œï¼Œâ€œSE-0269 å¸¦æ¥çš„éšå¼æ•è·åœ¨è¿™é‡Œæˆäº†å‚¬å‘½ç¬¦ï¼â€ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed1be37f4e1947a187fc5a6aeb789e02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=B0kG772gGB9iXi8Or9UrCVgPmGc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹ç«‹åˆ»åŠ¨æ‰‹é‡æ„ï¼Œåœ¨ Task åˆå§‹åŒ–æ—¶å°±åŠ ä¸Š [weak self]ï¼Œå¦‚åŒåœ¨é”é“¾æºå¤´ç ä¸‹ä¸€åˆ€ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">stopAttack</span>() {
  <span class="hljs-comment">// å¤–å±‚Taskå…ˆå¼±å¼•ç”¨selfï¼Œä»æ ¹æºåˆ‡æ–­å¼ºå¼•ç”¨é“¾</span>
  <span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
    
    <span class="hljs-keyword">await</span> withTaskGroup(of: <span class="hljs-type">Data</span>.<span class="hljs-keyword">self</span>) { context <span class="hljs-keyword">in</span>
      <span class="hljs-keyword">for</span> id <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">50</span> {
        <span class="hljs-comment">// å­ä»»åŠ¡æ— éœ€é‡å¤å¼±å¼•ç”¨ï¼Œå¤–å±‚å·²æ§åˆ¶ç”Ÿå‘½å‘¨æœŸ</span>
        context.addTask {
          <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.maliciousOperation(id)
        }
      }
      <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> result <span class="hljs-keyword">in</span> context {
        <span class="hljs-keyword">self</span>.cleanLeakedData(result)
      }
    }
  }
}
</code></pre>
<p>æ¢…æ ¹çš„è­¦æŠ¥å£°ç¬é—´å‡å¼±ï¼šâ€œå†…å­˜æ³„æ¼é€Ÿåº¦ä¸‹é™ 60%ï¼ä½†å­ä»»åŠ¡ä»åœ¨æ¶ˆè€—èµ„æºï¼Œéœ€å¼ºåˆ¶å–æ¶ˆæ¶æ„ä»»åŠ¡ï¼â€</p>
<h2 data-id="heading-2">ğŸš« 2. Task å–æ¶ˆçš„ â€œé‡œåº•æŠ½è–ªâ€ ä¹‹è®¡</h2>
<p>æ°å…‹çªç„¶æƒ³èµ·ä¸Šé›†çš„åˆ†é¡µåŠ è½½ä»£ç ï¼šâ€œTask æœ‰ isCancelled å±æ€§ï¼Œèƒ½ä¸èƒ½ç»™ TaskGroup ä¹ŸåŠ å–æ¶ˆå¼€å…³ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb8270150d2544f29b1f962cebdf7027~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=geoTy9IyLZ62Led%2B8Lm0I7km9PE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è‰å¨œçœ¼å‰ä¸€äº®ï¼Œç«‹åˆ»è®¾è®¡ â€œåŒçº§å–æ¶ˆâ€ æ–¹æ¡ˆ â€”â€” ç”¨ä»»åŠ¡å¥æŸ„æ§åˆ¶å¤–å±‚ Taskï¼Œå†ç”¨ group çš„ cancelAll () ç»ˆç»“å­ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">var</span> attackTask: <span class="hljs-type">Task</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Error</span>&gt;?

<span class="hljs-keyword">func</span> <span class="hljs-title function_">launchDefense</span>() {
  <span class="hljs-comment">// ä¿å­˜å¤–å±‚Taskå¥æŸ„ï¼Œç”¨äºå…¨å±€å–æ¶ˆ</span>
  attackTask <span class="hljs-operator">=</span> <span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
    
    <span class="hljs-keyword">await</span> withTaskGroup(of: <span class="hljs-type">Data</span>.<span class="hljs-keyword">self</span>) { context <span class="hljs-keyword">in</span>
      <span class="hljs-keyword">for</span> id <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">50</span> {
        context.addTask {
          <span class="hljs-comment">// å­ä»»åŠ¡å®šæœŸæ£€æŸ¥å–æ¶ˆçŠ¶æ€ï¼Œé¿å…æ— æ•ˆæ‰§è¡Œ</span>
          <span class="hljs-keyword">guard</span> <span class="hljs-operator">!</span><span class="hljs-type">Task</span>.isCancelled <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-type">Data</span>() }
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.maliciousOperation(id)
        }
      }
      
      <span class="hljs-comment">// ç›‘å¬ç³»ç»ŸçŠ¶æ€ï¼Œä¸€æ—¦å¼‚å¸¸ç«‹å³å–æ¶ˆæ‰€æœ‰å­ä»»åŠ¡</span>
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.systemIsInDanger() {
        context.cancelAll() <span class="hljs-comment">// ä¸€é”®ç»ˆç»“æ‰€æœ‰å­ä»»åŠ¡</span>
        <span class="hljs-keyword">return</span>
      }
      
      <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> result <span class="hljs-keyword">in</span> context {
        <span class="hljs-keyword">self</span>.processSafeData(result)
      }
    }
  }
}

<span class="hljs-comment">// ç´§æ€¥æ—¶åˆ»è°ƒç”¨ï¼Œå¤–å±‚å†…å±‚åŒé‡å‡»æ€</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">emergencyShutdown</span>() {
  attackTask<span class="hljs-operator">?</span>.cancel()
}
</code></pre>
<p>â€œè¿™æ‹›å¤ªç»äº†ï¼â€ æ°å…‹æƒŠå‘¼ï¼Œâ€œå°±åƒå…ˆç‚¸æ‰æ•Œå†›æŒ‡æŒ¥éƒ¨ï¼Œå†ç«¯æ‰å‰çº¿é˜µåœ°ï¼â€ ä½†æ¢…æ ¹çš„è­¦å‘Šå†æ¬¡å“èµ·ï¼šâ€œä»»åŠ¡å·²å–æ¶ˆï¼Œä½†ä¹‹å‰åˆ†é…çš„å†…å­˜æœªé‡Šæ”¾ï¼è¿™æ˜¯â€˜åƒµå°¸èµ„æºâ€™ï¼Œä¼šç»§ç»­èš•é£Ÿç³»ç»Ÿï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5a4d30c5e45407cbb695506fece522e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=44gk8%2FG5A6N9fNMNvjtlEp0PDIE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-3">ğŸ’€ 3. éšå¼ self çš„ â€œç»ˆæéª—å±€â€ ä¸èµ„æºæ¸…ç†</h2>
<p>è‰å¨œçªç„¶æƒ³èµ·æœç´¢åˆ°çš„ HaishinKit æ¡†æ¶æ¼æ´æ¡ˆä¾‹ï¼Œæ‹ç€æ¡Œå­å–Šé“ï¼šâ€œæ˜¯éšå¼ self åœ¨æé¬¼ï¼Task é—­åŒ…ä¼šå·å·æ•è· selfï¼Œå°±ç®—åŠ äº† [weak self] ä¹Ÿæ²¡ç”¨ï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cde72b5352114f7a9075c9bcdeb8f3ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=LiQCzvjBwcMJQ92Q%2FMU4eyWDTgA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹è°ƒå‡ºä¸€æ®µè‡´å‘½ä»£ç ï¼Œçº¢è‰²æ³¢æµªçº¿å¦‚åŒæ¯’è›‡ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// åé¢æ•™æï¼šéšå¼æ•è·çš„é™·é˜±</span>
<span class="hljs-type">Task</span> {
  <span class="hljs-comment">// æ­¤å¤„éšå¼å¼ºå¼•ç”¨selfï¼Œç¼–è¯‘å™¨ä¸æŠ¥é”™ï¼</span>
  <span class="hljs-keyword">await</span> startRunning()
}
</code></pre>
<p>â€œå¿…é¡»æ˜¾å¼å£°æ˜ [weak self]ï¼Œå“ªæ€•é—­åŒ…é‡Œæ²¡å†™ selfï¼â€ è‰å¨œç«‹åˆ»ä¿®æ”¹ä»£ç ï¼ŒåŒæ—¶åŠ å…¥èµ„æºæ¸…ç†é€»è¾‘ â€”â€” å€Ÿé‰´ FreeRTOS çš„ â€œè°ç”³è¯·è°é‡Šæ”¾â€ åŸåˆ™ï¼Œåœ¨ä»»åŠ¡å–æ¶ˆå‰æ‰‹åŠ¨å›æ”¶èµ„æºï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span> <span class="hljs-comment">// æ˜¾å¼å¼±å¼•ç”¨ï¼Œç ´é™¤éšå¼é™·é˜±</span>
  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
  
  <span class="hljs-comment">// æ‰‹åŠ¨ç”³è¯·èµ„æºï¼Œè®°å½•å¥æŸ„</span>
  <span class="hljs-keyword">let</span> buffer <span class="hljs-operator">=</span> malloc(<span class="hljs-number">1024</span> <span class="hljs-operator">*</span> <span class="hljs-number">1024</span>) <span class="hljs-comment">// 1MBç¼“å­˜</span>
  <span class="hljs-keyword">defer</span> {
    <span class="hljs-comment">// æ— è®ºæˆåŠŸå¤±è´¥ï¼Œç¡®ä¿èµ„æºé‡Šæ”¾</span>
    free(buffer)
    <span class="hljs-keyword">self</span>.closeFileHandles()
  }
  
  <span class="hljs-keyword">guard</span> <span class="hljs-operator">!</span><span class="hljs-type">Task</span>.isCancelled <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.startRunning()
}
</code></pre>
<p>æ¢…æ ¹çªç„¶æ¬¢å‘¼ï¼šâ€œå†…å­˜å‰©ä½™å›å‡è‡³ 23%ï¼åƒµå°¸èµ„æºå…¨éƒ¨æ¸…é™¤ï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52c55ad38a374f6da54c2a31f531703b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=XZz%2F301dhzBhFkgSoWm5fjAYZBI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä½†å±å¹•ä¸Šçš„å™¬æ ¸è€…å›¾æ ‡çªç„¶å˜å¤§ï¼Œå‘å‡ºåˆºè€³è­¦å‘Šï¼šâ€œåˆ«é«˜å…´å¤ªæ—©ï¼æˆ‘è¿˜æœ‰æœ€åä¸€æ‹› â€”â€” æ°¸ä¸ç»ˆæ­¢çš„å¼‚æ­¥æµï¼â€</p>
<h2 data-id="heading-4">ğŸ”„ 4. å¼‚æ­¥æµä¸­çš„ â€œç»­å‘½â€ æŠ€å·§ä¸ç»ˆæé˜²å¾¡</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fdd9fac6b2c4cc7a52bf775f286b037~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=otm4aW%2FS%2FCYgSoMa0uOXZ2YIiSE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å±å¹•ä¸Šå‡ºç°ä¸€æ®µææ€–çš„ä»£ç  â€”â€” å™¬æ ¸è€…ç”¨æ— é™å¼‚æ­¥æµç»‘å®š selfï¼Œä¸€æ—¦å¯åŠ¨å°±æ°¸è¿œæ— æ³•é‡Šæ”¾ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å™¬æ ¸è€…çš„ç»ˆææ€æ‹›ï¼šæ— é™å¼‚æ­¥æµ</span>
<span class="hljs-type">Task</span> {
  <span class="hljs-comment">// éšå¼å¼ºå¼•ç”¨selfï¼Œæµä¸åœï¼Œselfä¸æ­»</span>
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> data <span class="hljs-keyword">in</span> infiniteDataStream() {
    <span class="hljs-keyword">self</span>.sendLeakedData(data)
  }
}
</code></pre>
<p>â€œè¿™æ˜¯å…¸å‹çš„â€˜<strong>æ´»é”æ³„æ¼</strong>â€™ï¼â€ è‰å¨œè„¸è‰²å‡é‡ï¼Œâ€œå¼‚æ­¥æµä¼šä¸€ç›´æŒæœ‰ selfï¼Œç›´åˆ°æµç»“æŸ â€”â€” ä½†è¿™æ˜¯æ— é™æµï¼â€ å¥¹çªç„¶æƒ³èµ· inamiy çš„è§£å†³æ–¹æ¡ˆï¼Œç«‹åˆ»åœ¨å¾ªç¯ä¸­åŠ å…¥ self æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> data <span class="hljs-keyword">in</span> infiniteDataStream() {
    <span class="hljs-comment">// æ¯æ¬¡è¿­ä»£éƒ½æ£€æŸ¥selfï¼Œæ²¡äº†å°±ç«‹åˆ»ç»ˆæ­¢</span>
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">break</span> }
    <span class="hljs-keyword">self</span>.processData(data)
    <span class="hljs-comment">// è¿­ä»£ç»“æŸè‡ªåŠ¨é‡Šæ”¾selfï¼Œé¿å…é•¿æœŸæŒæœ‰</span>
  }
}
</code></pre>
<p>å°±åœ¨è¿™æ—¶ï¼Œæ°å…‹çªç„¶å‘ç°å™¬æ ¸è€…çš„æœåŠ¡å™¨ IPï¼šâ€œä»–ä»¬åœ¨åˆ©ç”¨æˆ‘ä»¬çš„å†…å­˜æ³„æ¼ä¼ è¾“æ•°æ®ï¼åªè¦ä¿®å¤æœ€åä¸€ä¸ªæ¼æ´ï¼Œå°±èƒ½åå‘è¿½è¸ªï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27d5c4ec8aad4d278c2be2a8775d78ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=oufdrCxrP68O6VIxEbsvEpe3NTg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è‰å¨œæ¯«ä¸çŠ¹è±«ï¼Œåœ¨ä»£ç ä¸­åŠ å…¥ Task ä¼˜å…ˆçº§æ§åˆ¶ï¼ŒæŠ¢å ç³»ç»Ÿèµ„æºï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span>(priority: .high) { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span> <span class="hljs-comment">// é«˜ä¼˜å…ˆçº§æŠ¢èµ„æº</span>
  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.traceHackerIP()
}
</code></pre>
<h2 data-id="heading-5">ğŸ¯ 5. ä¸‹é›†å°ç»“ï¼šTask å†…å­˜ç®¡ç†çš„ â€œä¹é˜³çœŸç»â€</h2>
<p>å½“å™¬æ ¸è€…çš„ IP è¢«æˆåŠŸé”å®šï¼Œè­¦æ–¹çš„è­¦æŠ¥å£°åœ¨è¿œå¤„å“èµ·æ—¶ï¼Œè‰å¨œç˜«ååœ¨æ¤…å­ä¸Šï¼Œçœ‹ç€æ¢å¤æ­£å¸¸çš„ç³»ç»Ÿå±å¹•ï¼Œæ€»ç»“å‡º Swift Concurrency çš„ç»ˆæé˜²å¾¡å‡†åˆ™ï¼š</p>
<ol>
<li><strong>TaskGroup å¿…åŠ å¤–å±‚å¼±å¼•ç”¨</strong>ï¼šç»“æ„åŒ–ä»»åŠ¡ç»„çš„åˆå§‹åŒ–é—­åŒ…éœ€æ˜¾å¼ [weak self]ï¼Œé¿å…éšå¼æ•è·é…¿æˆå¤§ç¥¸ã€‚</li>
<li><strong>å–æ¶ˆè¦ â€œæ–©è‰é™¤æ ¹â€</strong>ï¼šç”¨ä»»åŠ¡å¥æŸ„æ§åˆ¶å¤–å±‚ï¼Œç”¨ cancelAll () ç»ˆç»“å†…å±‚ï¼ŒåŒé‡ä¿é™©é˜²æ­¢ â€œåƒµå°¸ä»»åŠ¡â€ã€‚</li>
<li><strong>èµ„æºæ¸…ç†é  â€œdeferâ€</strong>ï¼šå€Ÿé‰´ FreeRTOS åŸåˆ™ï¼Œæ‰‹åŠ¨ç”³è¯·çš„èµ„æºå¿…é¡»ç”¨ defer æˆ–é’©å­å‡½æ•°é‡Šæ”¾ï¼Œç»ä¸ä¾èµ–ç³»ç»Ÿè‡ªåŠ¨å›æ”¶ã€‚</li>
<li><strong>å¼‚æ­¥æµè¦ â€œæ­¥æ­¥ä¸ºè¥â€</strong>ï¼šæ— é™æµä¸­æ¯æ¬¡è¿­ä»£éƒ½æ£€æŸ¥ selfï¼Œç”¨å®Œå³é‡Šï¼Œé¿å… â€œæ°¸ä¹…ç»‘å®šâ€ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ca0484af282488cae667035ada9b020~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=UZNKS4OAAx%2FTdgoZUl3SNSVxTWw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-6">âš¡ ç»ˆå±€ä¹‹æˆ˜ï¼šæ¥è‡ªæœªæ¥çš„è­¦å‘Š</h2>
<p>æ­£å½“è‰å¨œå’Œæ°å…‹åº†ç¥èƒœåˆ©æ—¶ï¼Œæ¢…æ ¹çš„æŠ•å½±çªç„¶å˜å¾—æ‰­æ›²ï¼Œå±å¹•ä¸Šå‡ºç°ä¸€è¡Œä¸å±äºè¿™ä¸ªæ—¶ä»£çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// 2087å¹´ï¼Œæ—¶é—´çº¿å´©å¡Œé¢„è­¦</span>
<span class="hljs-type">Task</span> { [<span class="hljs-keyword">unowned</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.fixTimeLeak()
}
</code></pre>
<p>â€œunowned selfï¼Ÿè¿™ä¸æ˜¯æ—©å°±è¢«å¼ƒç”¨çš„å±é™©è¯­æ³•å—ï¼Ÿâ€ æ°å…‹æ»¡è„¸ç–‘æƒ‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/212e488290a242b49d2f304c28d6c7f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=7YkiNl%2B%2BBChaQvhXPz3Fio%2FYq68%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è‰å¨œå´æµ‘èº«å‘å†· â€”â€” å¥¹æƒ³èµ·å¤ç±ä¸­è®°è½½çš„ â€œæ—¶é—´çº¿æ³„æ¼â€ ä¼ è¯´ï¼Œè€Œæ¢…æ ¹çš„ç”µå­éŸ³çªç„¶å˜å¾—è‹è€è€Œæ²™å“‘ï¼š</p>
<p>â€œä½ ä»¬é˜»æ­¢äº†å†…å­˜æ³„æ¼ï¼Œå´æ‰“å¼€äº†æ—¶é—´çš„æ½˜å¤šæ‹‰é­”ç›’ã€‚ä¸‹ä¸€ä¸ªå±æœºï¼Œæ˜¯ self è·¨è¶Šæ—¶ç©ºçš„â€˜å¹½çµå¼•ç”¨â€™â€”â€” è€Œå®ƒçš„é’¥åŒ™ï¼Œå°±åœ¨è¢«ä½ ä»¬é—å¿˜çš„ unowned å…³é”®å­—é‡Œâ€¦â€¦â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf6ffc1469d94159b85a6c2e8348d61f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=cQTslbNnLPh05mBFjZQbE9EuX2A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é‚£ä¹ˆï¼Œæ­£åœ¨ä¸€æ—åƒç“œçš„å®å­ä»¬çœ‹åˆ°è¿™é‡Œåˆä½œä½•æ„Ÿæƒ³å‘¢ï¼Ÿ</p>
<p>æ„Ÿè°¢è§‚èµï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†ä¼šå§ï¼8-)</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d7d9162e5ce4e6abb45e21ce2d82cc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765680165&amp;x-signature=u3Jq7ElJfMuqIAQALV1TtlXkt74%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€åŸºç¡€ã€‘Unityç€è‰²å™¨ç¼–ç¨‹çš„è¯­è¨€å’Œæ•°å­¦åŸºç¡€ä»‹ç»]]></title>    <link>https://juejin.cn/post/7580374090365124646</link>    <guid>https://juejin.cn/post/7580374090365124646</guid>    <pubDate>2025-12-07T02:47:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580374090365124646" data-draft-id="7580310413754761266" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€åŸºç¡€ã€‘Unityç€è‰²å™¨ç¼–ç¨‹çš„è¯­è¨€å’Œæ•°å­¦åŸºç¡€ä»‹ç»"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2025-12-07T02:47:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€åŸºç¡€ã€‘Unityç€è‰²å™¨ç¼–ç¨‹çš„è¯­è¨€å’Œæ•°å­¦åŸºç¡€ä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T02:47:39.000Z" title="Sun Dec 07 2025 02:47:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<h2 data-id="heading-0">ç€è‰²å™¨ç¼–ç¨‹è¯­è¨€åŸºç¡€</h2>
<p>Unity URPï¼ˆUniversal Render Pipelineï¼‰ç®¡çº¿ä¸­ä¸»è¦æ”¯æŒä¸‰ç§ç€è‰²å™¨è¯­è¨€ï¼šGLSLï¼ˆOpenGL Shading Languageï¼‰ã€CGï¼ˆC for Graphicsï¼‰ä»¥åŠHLSLï¼ˆHigh-Level Shading Languageï¼‰ã€‚è¿™äº›è¯­è¨€å‡åŸºäºCè¯­è¨€çš„è¯­æ³•ç»“æ„ï¼Œå¹¶é’ˆå¯¹GPUå¹¶è¡Œè®¡ç®—çš„ç‰¹ç‚¹è¿›è¡Œäº†ä¸“é—¨ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-1">GLSLä¸HLSL/CGçš„å·®å¼‚</h3>
<p>GLSLæ˜¯OpenGLæ ‡å‡†ä¸­ä½¿ç”¨çš„ç€è‰²è¯­è¨€ï¼Œè€ŒHLSLç”±å¾®è½¯ä¸ºDirectXå¹³å°è®¾è®¡ï¼ŒCGåˆ™æ˜¯ç”±NVIDIAæ¨å‡ºçš„è·¨å¹³å°ç€è‰²è¯­è¨€ã€‚Unityæ—©æœŸå¼€å‘ä¸­ä¸»è¦ä½¿ç”¨CGè¯­è¨€ï¼Œä½†éšç€URPç®¡çº¿çš„æ¨å¹¿ï¼ŒHLSLé€æ¸æˆä¸ºæ›´ä¸»æµçš„é€‰æ‹©ã€‚GLSLä¸HLSL/CGåœ¨ä»¥ä¸‹æ–¹é¢å­˜åœ¨å·®å¼‚ï¼š</p>
<ul>
<li>è¯­æ³•ç»†èŠ‚ä¸Šæœ‰æ‰€ä¸åŒ</li>
<li>å†…ç½®å‡½æ•°çš„å‘½åä¸å®ç°æ–¹å¼å­˜åœ¨å·®å¼‚</li>
<li>çŸ©é˜µå­˜å‚¨é¡ºåºä¸åŒï¼šHLSLä¸CGé‡‡ç”¨åˆ—ä¼˜å…ˆï¼ˆcolumn-majorï¼‰ï¼Œè€ŒGLSLä½¿ç”¨è¡Œä¼˜å…ˆï¼ˆrow-majorï¼‰</li>
</ul>
<h3 data-id="heading-2">Shader Graphä¸­çš„è¯­è¨€æŠ½è±¡æœºåˆ¶</h3>
<p>Shader Graphå€ŸåŠ©èŠ‚ç‚¹åŒ–ç³»ç»Ÿå¯¹åº•å±‚ç€è‰²è¯­è¨€è¿›è¡Œäº†æŠ½è±¡å°è£…ï¼Œå¼€å‘è€…æ— éœ€ç›´æ¥ç¼–å†™ä»£ç å³å¯æ„å»ºå¤æ‚çš„ç€è‰²æ•ˆæœã€‚ç„¶è€Œï¼ŒæŒæ¡åº•å±‚è¯­è¨€çŸ¥è¯†å¯¹äºè°ƒè¯•ç€è‰²å™¨ä»¥åŠå®ç°æ›´é«˜çº§çš„å›¾å½¢æ•ˆæœä»ç„¶è‡³å…³é‡è¦ã€‚</p>
<h2 data-id="heading-3">æ•°å­¦åŸºç¡€</h2>
<h3 data-id="heading-4">å‘é‡è¿ç®—</h3>
<p>ç€è‰²å™¨ç¼–ç¨‹ä¸­å¹¿æ³›ä½¿ç”¨å‘é‡è¿ç®—ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>å‘é‡åˆ†é‡è®¿é—®ï¼š<code>float3 v = (1, 2, 3); float x = v.x;</code></li>
<li>å‘é‡ç›¸åŠ ï¼š<code>float3 a + float3 b</code></li>
<li>ç‚¹ç§¯ï¼ˆæ ‡é‡ç§¯ï¼‰ï¼š<code>float d = dot(a, b)</code>ï¼Œå¸¸ç”¨äºè®¡ç®—å…‰ç…§å¼ºåº¦ç­‰åœºæ™¯</li>
</ul>
<h3 data-id="heading-5">åæ ‡ç³»å˜æ¢</h3>
<p>åœ¨URPæ¸²æŸ“ç®¡çº¿ä¸­ï¼Œä¸»è¦æ¶‰åŠä»¥ä¸‹å››ç§åæ ‡ç³»ï¼š</p>
<ul>
<li><strong>ç‰©ä½“ç©ºé—´ï¼ˆObject Spaceï¼‰</strong>ï¼šæ¨¡å‹è‡ªèº«çš„å±€éƒ¨åæ ‡ç³»</li>
<li><strong>ä¸–ç•Œç©ºé—´ï¼ˆWorld Spaceï¼‰</strong>ï¼šæ•´ä¸ªåœºæ™¯çš„å…¨å±€ä¸‰ç»´åæ ‡ç³»</li>
<li><strong>è§‚å¯Ÿç©ºé—´ï¼ˆView Spaceï¼‰</strong>ï¼šä»¥æ‘„åƒæœºä¸ºåŸç‚¹çš„åæ ‡ç³»</li>
<li><strong>è£å‰ªç©ºé—´ï¼ˆClip Spaceï¼‰</strong>ï¼šé¡¶ç‚¹åœ¨æ ‡å‡†åŒ–è®¾å¤‡åæ ‡ä¹‹å‰çš„ç©ºé—´</li>
</ul>
<p>åæ ‡ç³»ä¹‹é—´çš„è½¬æ¢é€šè¿‡çŸ©é˜µè¿ç®—å®ç°ï¼Œä¾‹å¦‚ä½¿ç”¨<code>UnityObjectToWorld</code>å‡½æ•°å¯å°†é¡¶ç‚¹ä»ç‰©ä½“ç©ºé—´å˜æ¢è‡³ä¸–ç•Œç©ºé—´ã€‚</p>
<h2 data-id="heading-6">ç€è‰²å™¨ç±»å‹è¯¦è§£</h2>
<h3 data-id="heading-7">é¡¶ç‚¹ç€è‰²å™¨</h3>
<p>é¡¶ç‚¹ç€è‰²å™¨è´Ÿè´£å¤„ç†æ¯ä¸ªé¡¶ç‚¹çš„æ•°æ®ï¼Œæ‰§è¡Œå‡ ä½•å˜æ¢ä¸åŸºç¡€å…‰ç…§è®¡ç®—ã€‚å…¶å…¸å‹ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">appdata</span> {
    float4 vertex : POSITION;
    float2 uv : TEXCOORD0;
};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">v2f</span> {
    float4 pos : SV_POSITION;
    float2 uv : TEXCOORD0;
};

<span class="hljs-function">v2f <span class="hljs-title">vert</span><span class="hljs-params">(appdata v)</span> </span>{
    v2f o;
    o.pos = <span class="hljs-built_in">UnityObjectToClipPos</span>(v.vertex);
    o.uv = v.uv;
    <span class="hljs-keyword">return</span> o;
}
</code></pre>
<h3 data-id="heading-8">ç‰‡å…ƒç€è‰²å™¨</h3>
<p>ç‰‡å…ƒç€è‰²å™¨ï¼ˆåˆç§°åƒç´ ç€è‰²å™¨ï¼‰å¤„ç†æ¯ä¸ªåƒç´ çš„é¢œè‰²è¾“å‡ºï¼Œç¤ºä¾‹ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-c" lang="c">fixed4 <span class="hljs-title function_">frag</span><span class="hljs-params">(v2f i)</span> : SV_Target {
     fixed4 col = tex2D(_MainTex, i.uv);
     <span class="hljs-keyword">return</span> col;
}
</code></pre>
<h3 data-id="heading-9">å‡ ä½•ç€è‰²å™¨</h3>
<p>å‡ ä½•ç€è‰²å™¨ç”¨äºå¤„ç†å›¾å…ƒï¼ˆç‚¹ã€çº¿ã€ä¸‰è§’å½¢ï¼‰ï¼Œå¹¶èƒ½å¤Ÿç”Ÿæˆæ–°çš„å‡ ä½•ç»“æ„ã€‚åœ¨URPä¸­ä½¿ç”¨æ—¶éœ€æ³¨æ„ï¼š</p>
<ul>
<li>å®šä¹‰ä¸‰ä¸ªç»“æ„ä½“ï¼šè¾“å…¥ï¼ˆappdataï¼‰ã€å‡ ä½•å¤„ç†é˜¶æ®µï¼ˆv2gï¼‰ä¸è¾“å‡ºï¼ˆg2fï¼‰</li>
<li>ä½¿ç”¨<code>#pragma geometry geom</code>æŒ‡ä»¤å£°æ˜å‡ ä½•ç€è‰²å™¨</li>
<li>é€šè¿‡<code>[maxvertexcount]</code>å±æ€§é™åˆ¶è¾“å‡ºçš„æœ€å¤§é¡¶ç‚¹æ•°é‡</li>
</ul>
<h3 data-id="heading-10">è®¡ç®—ç€è‰²å™¨</h3>
<p>è®¡ç®—ç€è‰²å™¨ï¼ˆCompute Shaderï¼‰é€‚ç”¨äºé€šç”¨GPUè®¡ç®—ä»»åŠ¡ï¼Œä¸é™äºå›¾å½¢æ¸²æŸ“ç®¡çº¿ã€‚å…¶ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>åŸºäºçº¿ç¨‹ç»„ï¼ˆThread Groupï¼‰ç»„ç»‡å¹¶è¡Œè®¡ç®—</li>
<li>æ”¯æŒé€šè¿‡<code>RWTexture</code>ç­‰ç±»å‹è¯»å†™çº¹ç†æ•°æ®</li>
<li>é€‚ç”¨äºå¤§è§„æ¨¡å¹¶è¡Œæ•°æ®å¤„ç†åœºæ™¯</li>
</ul>
<h2 data-id="heading-11">Shader Graphçš„æ ¸å¿ƒä¼˜åŠ¿</h2>
<p>Shader Graphä¸ºURPå¼€å‘æä¾›äº†ä»¥ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¯è§†åŒ–ç¼–è¾‘ç¯å¢ƒ</strong>ï¼šé€šè¿‡èŠ‚ç‚¹è¿æ¥å®ç°ç€è‰²å™¨é€»è¾‘ï¼Œé™ä½ç¼–ç é—¨æ§›</li>
<li><strong>å¿«é€ŸåŸå‹è¿­ä»£</strong>ï¼šå®æ—¶é¢„è§ˆç€è‰²æ•ˆæœï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡</li>
<li><strong>è·¨å¹³å°å…¼å®¹æ€§</strong>ï¼šè‡ªåŠ¨é€‚é…ä¸åŒå›¾å½¢APIçš„åº•å±‚å·®å¼‚</li>
<li><strong>ä¸°å¯Œçš„å†…ç½®èŠ‚ç‚¹åº“</strong>ï¼šæä¾›å¸¸ç”¨æ•°å­¦è¿ç®—ã€çº¹ç†æ“ä½œä¸æ•ˆæœèŠ‚ç‚¹</li>
<li><strong>çµæ´»çš„æè´¨å‚æ•°é…ç½®</strong>ï¼šç›´è§‚åœ°æš´éœ²å’Œè°ƒæ•´ç€è‰²å™¨å±æ€§</li>
</ul>
<h2 data-id="heading-12">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
<p>åœ¨URPé¡¹ç›®ä¸­ä¼˜åŒ–ç€è‰²å™¨æ€§èƒ½æ—¶ï¼Œåº”é‡ç‚¹å…³æ³¨ä»¥ä¸‹æ–¹é¢ï¼š</p>
<ul>
<li><strong>å‡å°‘çº¹ç†é‡‡æ ·æ¬¡æ•°</strong>ï¼šå°½å¯èƒ½åˆå¹¶å¤šæ¬¡é‡‡æ ·æ“ä½œ</li>
<li><strong>ç®€åŒ–å…‰ç…§è®¡ç®—æ¨¡å‹</strong>ï¼šç§»åŠ¨ç«¯è®¾å¤‡å»ºè®®ä½¿ç”¨ç®€åŒ–å…‰ç…§</li>
<li><strong>åˆç†é€‰æ‹©æ•°å€¼ç²¾åº¦</strong>ï¼šåœ¨é€‚å½“åœºæ™¯ä¸­ä½¿ç”¨<code>half</code>ç±»å‹æ›¿ä»£<code>float</code></li>
<li><strong>é¿å…å¤æ‚åˆ†æ”¯é€»è¾‘</strong>ï¼šGPUæ‰§è¡Œåˆ†æ”¯å¯èƒ½å¯¼è‡´æ€§èƒ½æ³¢åŠ¨</li>
<li><strong>å®æ–½ç»†èŠ‚å±‚æ¬¡ï¼ˆLODï¼‰</strong>ï¼šä¸ºä¸åŒæ€§èƒ½çš„è®¾å¤‡æä¾›å¤šçº§åˆ«ç€è‰²å™¨ç»†èŠ‚</li>
</ul>
<h2 data-id="heading-13">ç¤ºä¾‹ï¼šURPåŸºç¡€ç€è‰²å™¨å®ç°</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¬¦åˆURPè§„èŒƒçš„ç®€å•ç€è‰²å™¨ä»£ç æ¡†æ¶ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">Shader <span class="hljs-string">"URP/ExampleShader"</span>
{
    Properties
    {
        _MainTex (<span class="hljs-string">"Texture"</span>, <span class="hljs-number">2</span>D) = <span class="hljs-string">"white"</span> {}
        _Color (<span class="hljs-string">"Color"</span>, Color) = (<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
    }

    SubShader
    {
        Tags 
        { 
            <span class="hljs-string">"RenderType"</span> = <span class="hljs-string">"Opaque"</span> 
            <span class="hljs-string">"RenderPipeline"</span> = <span class="hljs-string">"UniversalPipeline"</span> 
        }

        Pass
        {
            HLSLPROGRAM
            <span class="hljs-meta">#<span class="hljs-keyword">pragma</span> vertex vert</span>
            <span class="hljs-meta">#<span class="hljs-keyword">pragma</span> fragment frag</span>
            
            <span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl"</span></span>

            <span class="hljs-built_in">TEXTURE2D</span>(_MainTex);
            <span class="hljs-built_in">SAMPLER</span>(sampler_MainTex);
            float4 _Color;

            <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Attributes</span>
            {
                float4 positionOS : POSITION;
                float2 uv : TEXCOORD0;
            };

            <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Varyings</span>
            {
                float4 positionCS : SV_POSITION;
                float2 uv : TEXCOORD0;
            };

            <span class="hljs-function">Varyings <span class="hljs-title">vert</span><span class="hljs-params">(Attributes input)</span>
            </span>{
                Varyings output;
                output.positionCS = <span class="hljs-built_in">TransformObjectToHClip</span>(input.positionOS);
                output.uv = input.uv;
                <span class="hljs-keyword">return</span> output;
            }

            <span class="hljs-function">half4 <span class="hljs-title">frag</span><span class="hljs-params">(Varyings input)</span> : SV_Target
            {</span>
                half4 texColor = <span class="hljs-built_in">SAMPLE_TEXTURE2D</span>(_MainTex, sampler_MainTex, input.uv);
                <span class="hljs-keyword">return</span> texColor * _Color;
            }
            ENDHLSL
        }
    }
}
</code></pre>
<p>æ­¤ç¤ºä¾‹å±•ç¤ºäº†åœ¨URPä¸­å¦‚ä½•å®šä¹‰ç€è‰²å™¨å±æ€§ã€ç»„ç»‡é¡¶ç‚¹ä¸ç‰‡å…ƒå¤„ç†é€»è¾‘ï¼Œä»¥åŠä½¿ç”¨URPå†…ç½®çš„å®ä¸å‡½æ•°åº“å®ç°åŸºç¡€æ¸²æŸ“æµç¨‹ã€‚</p>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React å²è¯—çº§æ¼æ´ï¼š SSR Server Action åè®®å¯¼è‡´æœåŠ¡å™¨è¿œç¨‹ä»£ç æ‰§è¡Œ]]></title>    <link>https://juejin.cn/post/7580270531469574190</link>    <guid>https://juejin.cn/post/7580270531469574190</guid>    <pubDate>2025-12-06T04:24:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580270531469574190" data-draft-id="7580251192330453038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React å²è¯—çº§æ¼æ´ï¼š SSR Server Action åè®®å¯¼è‡´æœåŠ¡å™¨è¿œç¨‹ä»£ç æ‰§è¡Œ"/> <meta itemprop="keywords" content="React.js,Next.js,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-06T04:24:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Stirner"/> <meta itemprop="url" content="https://juejin.cn/user/3474112476887933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React å²è¯—çº§æ¼æ´ï¼š SSR Server Action åè®®å¯¼è‡´æœåŠ¡å™¨è¿œç¨‹ä»£ç æ‰§è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3474112476887933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Stirner
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T04:24:57.000Z" title="Sat Dec 06 2025 04:24:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    68
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Next.js åœ¨ App Router ä¸­å¼•å…¥çš„ Server Actions åŠŸèƒ½æå¤§åœ°ç®€åŒ–äº†å‰åç«¯äº¤äº’æµç¨‹ï¼Œä½†å…¶åº•å±‚ä½¿ç”¨çš„é€šä¿¡åè®®â€”â€”React Flight åè®®ï¼Œè¢«å‘ç°å­˜åœ¨ä¸¥é‡çš„å®‰å…¨æ¼æ´ã€‚è¯¥æ¼æ´å…è®¸æ”»å‡»è€…é€šè¿‡ç²¾å¿ƒæ„é€ çš„ <strong>Multipart</strong> æ•°æ®åŒ…ï¼Œç»•è¿‡å®‰å…¨æ£€æŸ¥ï¼Œæœ€ç»ˆåœ¨æœåŠ¡å™¨ç«¯å®ç°<strong>è¿œç¨‹ä»£ç æ‰§è¡Œ (RCE)</strong> ã€‚</p>
<p>POC å¤ç° <a href="https://link.juejin.cn?target=https%3A%2F%2Fgist.github.com%2Fmaple3142%2F48bc9393f45e068cf8c90ab865c0f5f3" target="_blank" title="https://gist.github.com/maple3142/48bc9393f45e068cf8c90ab865c0f5f3" ref="nofollow noopener noreferrer">gist.github.com/maple3142/4â€¦</a></p>
<h2 data-id="heading-0">Server Actions ä¸ Flight åè®®æœºåˆ¶</h2>
<p>ä¸ºäº†ç†è§£æ¼æ´ï¼Œé¦–å…ˆéœ€è¦äº†è§£ Server Actions çš„è¿è¡Œæœºåˆ¶ã€‚</p>
<h3 data-id="heading-1">Server Actions çš„è®¾è®¡åˆè¡·</h3>
<p>åœ¨ Next.js 13+ ä¸­ï¼ŒServer Actions å…è®¸å¼€å‘è€…å®šä¹‰æœåŠ¡ç«¯å‡½æ•°ï¼Œå¹¶ç›´æ¥åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­è°ƒç”¨ï¼Œæ— éœ€æ˜¾å¼åˆ›å»º API è·¯ç”±ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// app/actions.js</span>
<span class="hljs-string">'use server'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">submitForm</span>(<span class="hljs-params">formData</span>) {
  <span class="hljs-comment">// è¯¥å‡½æ•°åœ¨æœåŠ¡ç«¯è¿è¡Œ</span>
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">users</span>.<span class="hljs-title function_">create</span>({ <span class="hljs-attr">name</span>: formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">'name'</span>) })
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> }
}

<span class="hljs-comment">// app/page.jsx (å®¢æˆ·ç«¯ç»„ä»¶)</span>
<span class="hljs-keyword">import</span> { submitForm } <span class="hljs-keyword">from</span> <span class="hljs-string">'./actions'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{submitForm}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-2">åº•å±‚é€šä¿¡ï¼šFlight åè®®</h3>
<p>å½“ç”¨æˆ·è§¦å‘ä¸Šè¿°è¡¨å•æ—¶ï¼Œæµè§ˆå™¨å¹¶éå‘é€æ™®é€šçš„ JSON è¯·æ±‚ï¼Œè€Œæ˜¯é€šè¿‡ <strong>React Flight åè®®</strong>è¿›è¡Œé€šä¿¡ã€‚ä¸”å…³é”®åœ¨äºï¼Œä¸ºäº†æ”¯æŒæ–‡ä»¶ä¸Šä¼ ç­‰ç‰¹æ€§ï¼Œä¼ è¾“æ ¼å¼é€šå¸¸ä¸º <strong><code>multipart/form-data</code></strong>ã€‚æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>åºåˆ—åŒ–</strong>ï¼šReact å°†å®¢æˆ·ç«¯æ•°æ®åºåˆ—åŒ–ä¸º Flight åè®®æ ¼å¼ã€‚</li>
<li><strong>ä¼ è¾“</strong>ï¼šé€šè¿‡ HTTP POST è¯·æ±‚å‘é€ï¼Œè¯·æ±‚å¤´åŒ…å« <code>Next-Action</code> æ ‡è¯†ç¬¦ï¼ŒContent-Type ä¸º <code>multipart/form-data</code>ã€‚</li>
<li><strong>ååºåˆ—åŒ–</strong>ï¼šNext.js æœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚ï¼Œè§£æ Multipart æ•°æ®ä¸­çš„ Flight æ ¼å¼ Payloadã€‚</li>
<li><strong>æ‰§è¡Œä¸å“åº”</strong>ï¼šæ‰§è¡ŒæœåŠ¡ç«¯å‡½æ•°ï¼Œå¹¶å°†ç»“æœå†æ¬¡é€šè¿‡ Flight åè®®ç¼–ç è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li>
</ol>
<p>æ¼æ´çš„æ ¸å¿ƒï¼Œæ­£æ˜¯å‡ºç°åœ¨æœåŠ¡ç«¯<strong>è§£æå’Œååºåˆ—åŒ–</strong>è¿™äº› Chunk çš„è¿‡ç¨‹ä¸­ã€‚</p>
<h2 data-id="heading-3">æ¼æ´æˆå› ï¼šæ”»å‡»é“¾çš„ä¸‰ç¯</h2>
<p>è¯¥ RCE æ¼æ´çš„åˆ©ç”¨è¿‡ç¨‹å¹¶éå•ä¸€ç¼ºé™·å¯¼è‡´ï¼Œè€Œæ˜¯ä¸²è”äº†ä¸‰ä¸ªé€»è¾‘æ¼æ´ã€‚</p>
<h3 data-id="heading-4">ç¬¬ä¸€ç¯ï¼šå¼•ç”¨è§£æä¸­çš„è·¯å¾„éå†</h3>
<p>Flight åè®®å…è®¸ä½¿ç”¨å†’å· <code>:</code> å¯¹å¼•ç”¨å¯¹è±¡çš„å±æ€§è¿›è¡ŒåµŒå¥—è®¿é—®ã€‚ä¾‹å¦‚ï¼Œ<code>$0:users:0:name</code> è¡¨ç¤ºè®¿é—® Chunk 0 ä¸­ <code>users</code> æ•°ç»„ç¬¬ 0 é¡¹çš„ <code>name</code> å±æ€§ã€‚</p>
<p>æœåŠ¡ç«¯è§£æé€»è¾‘çš„ç®€åŒ–ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æœåŠ¡ç«¯è§£æé€»è¾‘ç¤ºæ„</span>
<span class="hljs-keyword">let</span> value = chunk.<span class="hljs-property">value</span>;
<span class="hljs-keyword">const</span> path = reference.<span class="hljs-title function_">split</span>(<span class="hljs-string">':'</span>); <span class="hljs-comment">// åˆ†å‰²è·¯å¾„</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; path.<span class="hljs-property">length</span>; i++) {
  value = value[path[i]]; <span class="hljs-comment">// é€å±‚è®¿é—®å±æ€§</span>
}
</code></pre>
<p><strong>æ¼æ´ç‚¹</strong>ï¼šæœåŠ¡ç«¯å¹¶æœªå¯¹è·¯å¾„ä¸­çš„å±æ€§åè¿›è¡Œè¿‡æ»¤æˆ–ç™½åå•éªŒè¯ã€‚</p>
<p>è¿™æ„å‘³ç€æ”»å‡»è€…å¯ä»¥æ„é€ ç‰¹æ®Šè·¯å¾„æ¥è®¿é—® JavaScript å¯¹è±¡çš„åŸå‹é“¾å±æ€§ï¼š</p>
<ul>
<li><code>$1:__proto__:then</code>ï¼šè®¿é—®åŸå‹é“¾ä¸Šçš„ <code>then</code> æ–¹æ³•ï¼Œç”¨äºåŠ«æŒ Promise è§£æã€‚</li>
<li><code>$1:constructor:constructor</code>ï¼šè·å–å¯¹è±¡çš„æ„é€ å‡½æ•°çš„æ„é€ å‡½æ•°ï¼Œå³ <strong><code>Function</code> æ„é€ å‡½æ•°</strong>ã€‚</li>
</ul>
<h3 data-id="heading-5">ç¬¬äºŒç¯ï¼šä¼ªé€  Chunk æ³¨å…¥</h3>
<p>åœ¨ React å†…éƒ¨å®ç°ä¸­ï¼ŒChunk è¢«è§†ä¸ºä¸€ç§ç±»ä¼¼ Promise çš„å¯¹è±¡ã€‚æœåŠ¡ç«¯åœ¨è§£ææ—¶ï¼Œä¼šæ£€æŸ¥å¯¹è±¡çš„ <code>status</code> å±æ€§ã€‚å¦‚æœ <code>status</code> æ ‡è®°ä¸ºå®ŒæˆçŠ¶æ€ï¼ˆå¦‚ <code>"resolved_model"</code>ï¼‰ï¼ŒæœåŠ¡ç«¯ä¼šç›´æ¥è§£æå…¶å†…å®¹ï¼Œè€Œä¸ä¼šéªŒè¯è¯¥å¯¹è±¡æ˜¯å¦ç”±ç³»ç»Ÿç”Ÿæˆã€‚</p>
<p>æ”»å‡»è€…å¯ä»¥æ„é€ ä¸€ä¸ª<strong>ä¼ªé€ çš„ Chunk å¯¹è±¡</strong>ä½œä¸º Payload å‘é€ç»™æœåŠ¡å™¨ã€‚æ ¹æ® PoC æ˜¾ç¤ºï¼Œæ”»å‡»è€…åˆ©ç”¨ <code>value</code> å­—æ®µä½œä¸ºè§¦å‘å™¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// æ”»å‡»è€…æ„é€ çš„æ¶æ„ Chunk (Part "0")</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"then"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$1:__proto__:then"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// 1. åŠ«æŒ then å±æ€§</span>
  <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resolved_model"</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// 2. ä¼ªè£…æˆå·²è§£æçŠ¶æ€</span>
  <span class="hljs-attr">"reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">-1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// 3. å…³é”®è§¦å‘ç‚¹ï¼šValue ä¸­åŒ…å«å¯¹ Blob ($B) çš„å¼•ç”¨</span>
  <span class="hljs-comment">// è¿™ä¼šå¯¼è‡´è§£æå™¨å°è¯•å» "è·å–" è¿™ä¸ª Blobï¼Œä»è€Œè§¦å‘ä¸‹æ–¹è¢«æ›¿æ¢çš„ get æ–¹æ³•</span>
  <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{"</span>then<span class="hljs-string">":"</span>$B1337<span class="hljs-string">"}"</span><span class="hljs-punctuation">,</span> 
  
  <span class="hljs-attr">"_response"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">// 4. æ³¨å…¥æ¶æ„çš„å†…éƒ¨ Response å¯¹è±¡</span>
    <span class="hljs-attr">"_prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"process.mainModule.require('child_process').execSync('xcalc');"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"_formData"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"get"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$1:constructor:constructor"</span> <span class="hljs-punctuation">}</span> <span class="hljs-comment">// å¾…æ›¿æ¢çš„å‡½æ•°å ä½ç¬¦</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç”±äºç¼ºä¹ä¸¥æ ¼çš„ç±»å‹éªŒè¯ï¼ŒæœåŠ¡ç«¯ä¼šæ¥çº³è¿™ä¸ªä¼ªé€ çš„å¯¹è±¡åŠå…¶åŒ…å«çš„æ¶æ„å†…éƒ¨å±æ€§ <code>_response</code>ã€‚</p>
<h3 data-id="heading-6">ç¬¬ä¸‰ç¯ï¼šFunction æ„é€ å‡½æ•°æ³¨å…¥ä¸ä»£ç æ‰§è¡Œ</h3>
<p>æ”»å‡»è€…çš„æœ€ç»ˆç›®æ ‡æ˜¯åˆ©ç”¨ä¸Šè¿°ä¸¤ä¸ªæ¼æ´ï¼Œå°†ä»£ç å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯æ‰§è¡Œå‡½æ•°ã€‚</p>
<ol>
<li><strong>æ›¿æ¢å…³é”®æ–¹æ³•</strong>ï¼šæ”»å‡»è€…åˆ©ç”¨ç¬¬ä¸€ç¯çš„â€œè·¯å¾„éå†â€ï¼Œå°†ä¼ªé€  Chunk ä¸­ <code>_response._formData.get</code> çš„å€¼æŒ‡å‘ <code>$1:constructor:constructor</code>ï¼ˆå³ <code>Function</code> æ„é€ å‡½æ•°ï¼‰ã€‚</li>
<li><strong>è§¦å‘æ‰§è¡Œ</strong>ï¼šæ”»å‡»è€…åœ¨ Payload çš„ <code>value</code> å­—æ®µä¸­åŒ…å«ä¸€ä¸ª <code>$B</code> (Blob) ç±»å‹çš„å¼•ç”¨ã€‚</li>
</ol>
<p>å½“æœåŠ¡ç«¯è§£æ <code>value</code> ä¸­çš„ <code>$B</code> ç±»å‹å¼•ç”¨æ—¶ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹é€»è¾‘ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// React æºç é€»è¾‘ç®€åŒ–</span>
<span class="hljs-keyword">case</span> <span class="hljs-string">'B'</span>: {
  <span class="hljs-keyword">const</span> prefix = response.<span class="hljs-property">_prefix</span>; <span class="hljs-comment">// æ”»å‡»è€…æ³¨å…¥çš„ä»£ç å­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">const</span> blobKey = prefix + id;
  
  <span class="hljs-comment">// å…³é”®ç‚¹ï¼šè°ƒç”¨ _formData.get ä»¥è·å– Blob æ•°æ®</span>
  <span class="hljs-comment">// æ­¤æ—¶ get å·²è¢«æ›¿æ¢ä¸º Function æ„é€ å‡½æ•°</span>
  <span class="hljs-keyword">const</span> backingEntry = response.<span class="hljs-property">_formData</span>.<span class="hljs-title function_">get</span>(blobKey);
  
  <span class="hljs-keyword">return</span> backingEntry;
}
</code></pre>
<p>ä¸Šè¿°ä»£ç å®é™…ä¸Šç­‰æ•ˆäºæ‰§è¡Œäº†ï¼š</p>
<pre><code class="hljs language-json" lang="json">new Function(<span class="hljs-string">"process.mainModule.require('child_process').execSync('xcalc');"</span> + <span class="hljs-string">"1337"</span>)
</code></pre>
<p>è¿™ä¼šåˆ›å»ºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå…¶å‡½æ•°ä½“å³ä¸ºæ”»å‡»è€…æ³¨å…¥çš„ä»£ç ã€‚éšåï¼Œè¯¥å‡½æ•°è¢«ä½œä¸º Promise çš„å›è°ƒæ‰§è¡Œï¼Œä»è€Œåœ¨æœåŠ¡å™¨ç«¯å®Œæˆäº†<strong>è¿œç¨‹ä»£ç æ‰§è¡Œ (RCE)</strong> ã€‚</p>
<h2 data-id="heading-7">æ”»å‡»æµç¨‹æ€»ç»“</h2>
<p>æ•´ä¸ªæ”»å‡»è¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><strong>æ„é€  Payload</strong>ï¼šæ”»å‡»è€…é€šè¿‡ <code>multipart/form-data</code> å‘é€åŒ…å«ä¼ªé€  Chunk çš„æ¶æ„æ•°æ®åŒ…ã€‚</li>
<li><strong>åŸå‹é“¾æ±¡æŸ“</strong>ï¼šåˆ©ç”¨è·¯å¾„éå†æ¼æ´ï¼ˆ<code>__proto__</code>ï¼‰ï¼ŒåŠ«æŒ Promise è§£æè¿‡ç¨‹ã€‚</li>
<li><strong>æ„é€ å‡½æ•°æ›¿æ¢</strong>ï¼šåˆ©ç”¨è·¯å¾„éå†è·å– <code>Function</code> æ„é€ å‡½æ•°ï¼Œæ›¿æ¢æ‰å†…éƒ¨çš„ <code>_formData.get</code> æ–¹æ³•ã€‚</li>
<li><strong>ä¼ªé€ å¯¹è±¡æ³¨å…¥</strong>ï¼šæœåŠ¡å™¨ååºåˆ—åŒ–ä¼ªé€ çš„ Chunkï¼ŒåŠ è½½æ¶æ„çš„ <code>_response</code> å¯¹è±¡ã€‚</li>
<li><strong>ä»£ç ç¼–è¯‘ä¸æ‰§è¡Œ</strong>ï¼šæœåŠ¡å™¨è§£æ <code>value</code> ä¸­çš„ Blob å¼•ç”¨æ—¶ï¼Œé”™è¯¯åœ°è°ƒç”¨ <code>Function</code> æ„é€ å‡½æ•°ï¼Œå°†æ¶æ„å­—ç¬¦ä¸²ç¼–è¯‘ä¸ºå‡½æ•°å¹¶åœ¨æœåŠ¡ç«¯æ‰§è¡Œã€‚</li>
</ol>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>é˜²å¾¡æªæ–½ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Fblog%2F2025%2F12%2F03%2Fcritical-security-vulnerability-in-react-server-components" target="_blank" title="https://react.dev/blog/2025/12/03/critical-security-vulnerability-in-react-server-components" ref="nofollow noopener noreferrer">react.dev/blog/2025/1â€¦</a></p>
<p>æ‰“å¼€è¿™ç¯‡æ–‡ç« å¤åˆ¶è¿› cursor è¯Šæ–­é¡¹ç›®çš„package.json ç”Ÿæˆä¾èµ–å‡çº§å‘½ä»¤</p>
<p>è¯„è®ºï¼š è¿™æ˜¯ FE å‘å±•è‡³ä»Šå¯¹å…¨çƒäº’è”ç½‘å½±å“æœ€å¤§çš„ Bugï¼Œæ— æ•°ä¸€é”®éƒ¨ç½²åˆ° Vercel ï¼ŒNetlify, Cloudflare çš„ NextJS ç½‘ç«™éƒ½æ˜¯ç›´æ¥æš´éœ²çš„å¯æ”»å‡»ç«¯ç‚¹ã€‚</p>
<p><strong>æ‰€å¹¸ NextJS è¿™ä¸€å¥—çº¯ FaaS æ–¹æ¡ˆå…¶å®ç§æœ‰åŒ–éƒ¨ç½²åˆ°è‡ªå·±æœåŠ¡å™¨å¹¶ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥äº’è”ç½‘ä¸Šå¤§éƒ¨åˆ†éƒ½æ˜¯éƒ¨ç½²åˆ° Vercel è‡ªå·±æœåŠ¡æˆ–å…è´¹ FaaSå¹³å°çš„ï¼Œä¹Ÿæ˜¯è‡ªæˆ‘å¾—ä¹‹è‡ªæˆ‘å¤±ä¹‹äº†ã€‚</strong></p>
<p><strong>åå¤„å°±æ˜¯å…è´¹çš„ FaaS æœåŠ¡è¢«å½±å“æœ€å¤§ï¼Œæ¯”å¦‚ CloudFlare åœ¨å¤„ç†æœ¬é—®é¢˜æ—¶ 2025/12/5 åˆå‡ºç°äº†å…¨çƒå®•æœºã€‚è™½ç„¶æˆ‘æ˜¯ CF ç²‰ï¼Œä½†è¿™ä¸ªæ´—ä¸äº†ï¼Œè‚¡ä»·è¿˜æœ‰ä¸‹è·Œç©ºé—´ã€‚</strong></p>
<p>é™„ WAF ä¾§å¦‚ä½•é…ç½®</p>
<h2 data-id="heading-9">Cloudflare WAF ä¸­å®‰å…¨æ‹¦æˆª</h2>
<p>å½“ WAF è¯•å›¾ä½¿ç”¨åŒ…å«å¤§é‡å›æº¯çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆReDoS é£é™©ï¼‰å»åŒ¹é…ä¸€ä¸ªæå…¶å¤æ‚çš„æ¶æ„ Payload æ—¶ï¼ŒCPU ä¼šè¢«ç¬é—´å æ»¡ã€‚å¯¹äº Next.js è¿™ä¸ªæ¼æ´ï¼Œæ”»å‡» Payload ç»“æ„å¤æ‚ä¸”åµŒå¥—æ·±ï¼Œå¦‚æœæˆ‘ä»¬è¯•å›¾ç”¨æ­£åˆ™å»ç²¾å‡†åŒ¹é…æ•´ä¸ª JSON ç»“æ„ï¼Œææ˜“é‡è¹ˆè¦†è¾™ã€‚</p>
<h3 data-id="heading-10">é…ç½®æ€è·¯</h3>
<p>æˆ‘ä»¬ä¸éœ€è¦è§£ææ•´ä¸ª JSONï¼Œåªéœ€è¦æŠ“ä½æ”»å‡»é“¾ä¸­<strong>å¿…ä¸å¯å°‘</strong>çš„ç‰¹å¾å­—ç¬¦ä¸²ã€‚</p>
<ul>
<li>
<p><strong>æµé‡ç­›é€‰</strong>ï¼šä»…æ£€æŸ¥å¸¦æœ‰ <code>Next-Action</code> è¯·æ±‚å¤´çš„ <code>POST</code> è¯·æ±‚ã€‚è¿™èƒ½è¿‡æ»¤æ‰ 99% çš„æ™®é€šæµé‡ï¼Œæå¤§é™ä½ WAF è´Ÿè½½ã€‚</p>
</li>
<li>
<p><strong>ç‰¹å¾è¯†åˆ«</strong>ï¼š</p>
<ul>
<li><code>__proto__</code>ï¼šè¿™æ˜¯åŸå‹é“¾æ±¡æŸ“çš„æ ¸å¿ƒï¼Œæ­£å¸¸ä¸šåŠ¡ä¸­å‡ ä¹ä¸å¯èƒ½åœ¨è¡¨å• Key ä¸­å‡ºç°æ­¤å­—ç¬¦ä¸²ã€‚</li>
<li><code>constructor</code>ï¼šè¿™æ˜¯è·å– Function æ„é€ å‡½æ•°çš„å…³é”®ã€‚çœŸå® PoC æ˜¾ç¤ºæ”»å‡»è€…å¿…é¡»è°ƒç”¨ <code>:constructor</code> æ¥è·å–æ„é€ å™¨ã€‚ä¸ºäº†é˜²æ­¢è¯¯æ€ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ "constructor" å•è¯ï¼‰ï¼Œå»ºè®®åŒ¹é…å¸¦å†’å·çš„å¼•ç”¨æ ¼å¼ï¼ˆ<code>:constructor</code> æˆ– <code>"constructor"</code>ï¼‰ï¼Œä½†åœ¨é«˜å±æ—¶æœŸï¼Œé˜»æ–­è£¸å­—ç¬¦ä¸²æ˜¯æ›´ç¨³å¦¥çš„é€‰æ‹©ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-11">Cloudflare WAF é…ç½®æ­¥éª¤</h3>
<ol>
<li>ç™»å½• Cloudflare æ§åˆ¶å°ï¼Œè¿›å…¥ç›®æ ‡åŸŸåçš„ <strong>Security (å®‰å…¨æ€§)</strong> &gt; <strong>WAF (Web åº”ç”¨ç¨‹åºé˜²ç«å¢™)</strong> ã€‚</li>
<li>ç‚¹å‡» <strong>Create rule (åˆ›å»ºè§„åˆ™)</strong> ã€‚</li>
<li>ç‚¹å‡» <strong>Edit expression (ç¼–è¾‘è¡¨è¾¾å¼)</strong> ï¼Œåˆ‡æ¢åˆ°è¡¨è¾¾å¼æ¨¡å¼ã€‚</li>
<li>å°†ä¸‹æ–¹çš„è¡¨è¾¾å¼ç²˜è´´è¿›å»ï¼š</li>
</ol>
<p>Bash</p>
<pre><code class="hljs language-vbscript" lang="vbscript">(http.<span class="hljs-built_in">request</span>.method eq <span class="hljs-string">"POST"</span> <span class="hljs-keyword">and</span> any(http.<span class="hljs-built_in">request</span>.headers.names[*] eq <span class="hljs-string">"next-action"</span>) <span class="hljs-keyword">and</span> (http.<span class="hljs-built_in">request</span>.body contains <span class="hljs-string">"__proto__"</span> <span class="hljs-keyword">or</span> http.<span class="hljs-built_in">request</span>.body contains <span class="hljs-string">":constructor"</span>))
</code></pre>
<h3 data-id="heading-12">è§„åˆ™è¯¦è§£ä¸å®‰å…¨æ€§åˆ†æ</h3>
<ul>
<li>
<p><code>http.request.method eq "POST"</code>ï¼š</p>
<ul>
<li>é™åˆ¶ä»…æ£€æµ‹ POST è¯·æ±‚ã€‚</li>
</ul>
</li>
<li>
<p><code>any(http.request.headers.names[*] eq "next-action")</code>ï¼š</p>
<ul>
<li>è¿™æ˜¯ Next.js Server Actions çš„ç‰¹å¾æŒ‡çº¹ã€‚å¦‚æœä¸åŒ…å«æ­¤å¤´ï¼Œè¯´æ˜ä¸æ˜¯ Server Action è¯·æ±‚ï¼Œç›´æ¥æ”¾è¡Œã€‚</li>
</ul>
</li>
<li>
<p><code>http.request.body contains "__proto__"</code>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>contains</code> è¿ç®—ç¬¦ã€‚åº•å±‚å®ç°é€šå¸¸æ˜¯ BM ç®—æ³•æˆ–ç±»ä¼¼çš„é«˜æ•ˆå­—ç¬¦ä¸²æŸ¥æ‰¾ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦æ¥è¿‘ O(n)ï¼Œ<strong>ä¸å­˜åœ¨å›æº¯é£é™©</strong>ï¼Œä¸ä¼šå¯¼è‡´ CPU é£™å‡ã€‚</li>
</ul>
</li>
<li>
<p><code>http.request.body contains ":constructor"</code>ï¼š</p>
<ul>
<li>è¿™é‡ŒåŠ äº†ä¸€ä¸ªå†’å· <code>:</code>ã€‚åœ¨ Flight åè®®ä¸­ï¼Œå¼•ç”¨é€šå¸¸é€šè¿‡å†’å·åˆ†éš”ï¼ˆå¦‚ PoC ä¸­çš„ <code>$1:constructor:constructor</code>ï¼‰ã€‚åŠ ä¸Šå†’å·å¯ä»¥æœ‰æ•ˆé¿å…è¯¯ä¼¤æ­£æ–‡ä¸­åŒ…å« "constructor"ï¼ˆå»ºç­‘å•†ï¼‰ç­‰æ™®é€šå•è¯çš„æäº¤ï¼ŒåŒæ—¶åˆèƒ½ç²¾å‡†å‘½ä¸­æ”»å‡» Payloadã€‚</li>
</ul>
</li>
</ul>
<p><strong>é…ç½®å»ºè®®</strong>ï¼šè®¾ç½®å¥½è§„åˆ™åï¼Œå»ºè®®å…ˆå°†åŠ¨ä½œè®¾ç½®ä¸º <strong>Log (è®°å½•)</strong> è§‚å¯Ÿä¸€æ®µæ—¶é—´ï¼Œç¡®è®¤æ²¡æœ‰è¯¯æ‹¦æˆªæ­£å¸¸ä¸šåŠ¡åï¼Œå†è°ƒæ•´ä¸º <strong>Block (é˜»æ–­)</strong> ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§å®¶å¤©å¤©è¯´çš„'é“¶å¼¹'åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿçœ‹å®Œè¿™ç¯‡ä½ å°±æ˜ç™½äº†]]></title>    <link>https://juejin.cn/post/7580233527284629554</link>    <guid>https://juejin.cn/post/7580233527284629554</guid>    <pubDate>2025-12-06T01:28:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580233527284629554" data-draft-id="7580233527284613170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§å®¶å¤©å¤©è¯´çš„'é“¶å¼¹'åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿçœ‹å®Œè¿™ç¯‡ä½ å°±æ˜ç™½äº†"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-06T01:28:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="9å·è¾¾äºº"/> <meta itemprop="url" content="https://juejin.cn/user/2450136052270077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§å®¶å¤©å¤©è¯´çš„'é“¶å¼¹'åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿçœ‹å®Œè¿™ç¯‡ä½ å°±æ˜ç™½äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2450136052270077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    9å·è¾¾äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T01:28:19.000Z" title="Sat Dec 06 2025 01:28:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>"å¾®æœåŠ¡æ˜¯é“¶å¼¹ï¼" "Dockerä¸æ˜¯é“¶å¼¹ï¼" "Reactæ‰æ˜¯çœŸæ­£çš„é“¶å¼¹ï¼" å¤©å¤©åœ¨æ–‡ç« å’Œè¯„è®ºåŒºçœ‹åˆ°è¿™ä¸ªè¯è¯­ï¼Œä»–åˆ°åº•æ˜¯ä¸ªå•¥ï¼Œåˆæ˜¯ä»å“ªé‡Œå¼€å§‹çš„ã€‚ä»Šå¤©ä¸è®²æŠ€æœ¯ï¼ŒèŠä¸€ä¸‹å•¥æ˜¯é“¶å¼¹ã€‚</p>
</blockquote>
<h3 data-id="heading-0">æ¦‚å¿µæ¥æº</h3>
<p>"é“¶å¼¹"ï¼ˆSilver Bulletï¼‰è¿™ä¸ªæ¦‚å¿µæ¥è‡ªäº<strong>å¼—é›·å¾·é‡Œå…‹Â·å¸ƒé²å…‹æ–¯ï¼ˆFred Brooksï¼‰</strong> çš„ç»å…¸è‘—ä½œã€Šäººæœˆç¥è¯ã€‹ï¼ˆThe Mythical Man-Monthï¼‰ã€‚</p>
<p>1986å¹´ï¼Œå¸ƒé²å…‹æ–¯åœ¨è‘—åè®ºæ–‡ã€Šæ²¡æœ‰é“¶å¼¹ï¼šè½¯ä»¶å·¥ç¨‹çš„æœ¬è´¨ä¸å¶ç„¶æ€§ã€‹ä¸­æå‡ºäº†è¿™ä¸ªå½±å“æ·±è¿œçš„è®ºæ–­ï¼š</p>
<blockquote>
<p><strong>åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œæ²¡æœ‰ä»»ä½•æŠ€æœ¯æˆ–æ–¹æ³•èƒ½å¤Ÿåœ¨åå¹´å†…ä½¿ç”Ÿäº§ç‡ã€å¯é æ€§å’Œç®€æ´æ€§æœ‰æ•°é‡çº§çš„æå‡ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-1">ç‹¼äººä¼ è¯´çš„éšå–»</h3>
<p>ä¸ºä»€ä¹ˆè¦ç”¨"é“¶å¼¹"è¿™ä¸ªè¯ï¼Ÿ</p>
<p>è¿™ä¸ªæ¯”å–»æ¥è‡ªç‹¼äººä¼ è¯´ï¼š</p>
<ul>
<li><strong>ç‹¼äºº</strong>ï¼šè¢«è®¤ä¸ºæ˜¯ä¸æ­»çš„ã€æ— åšä¸æ‘§çš„æ€ªç‰©</li>
<li><strong>é“¶å¼¹</strong>ï¼šä¼ è¯´ä¸­å”¯ä¸€èƒ½å¤Ÿæ€æ­»ç‹¼äººçš„æ­¦å™¨</li>
</ul>
<p>å¸ƒé²å…‹æ–¯ç”¨è¿™ä¸ªæ¯”å–»æ¥è¯´æ˜ï¼š</p>
<ul>
<li><strong>è½¯ä»¶å¼€å‘çš„æœ¬è´¨å¤æ‚æ€§</strong> = ç‹¼äººï¼ˆçœ‹ä¼¼ä¸å¯æˆ˜èƒœçš„éš¾é¢˜ï¼‰</li>
<li><strong>ç¥å¥‡çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆ</strong> = é“¶å¼¹ï¼ˆäººä»¬æœŸæœ›çš„ä¸€æ‹›åˆ¶æ•Œçš„åŠæ³•ï¼‰</li>
<li><strong>æ®‹é…·çš„ç°å®</strong> = é“¶å¼¹æ ¹æœ¬ä¸å­˜åœ¨</li>
</ul>
<h3 data-id="heading-2">è½¯ä»¶å›°éš¾çš„åˆ†ç±»</h3>
<p>å¸ƒé²å…‹æ–¯å°†è½¯ä»¶å¼€å‘çš„å›°éš¾åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<h4 data-id="heading-3">æœ¬è´¨æ€§å›°éš¾ï¼ˆEssenceï¼‰</h4>
<p>è¿™äº›æ˜¯è½¯ä»¶å¼€å‘å›ºæœ‰çš„ã€æ— æ³•é¿å…çš„å›°éš¾ï¼š</p>
<ul>
<li><strong>æ¦‚å¿µç»“æ„çš„å¤æ‚æ€§</strong>ï¼šè½¯ä»¶æœ¬èº«çš„æ¦‚å¿µç»“æ„</li>
<li><strong>ä¸å¯è§æ€§</strong>ï¼šè½¯ä»¶æ²¡æœ‰ç‰©ç†å®ä½“ï¼Œæ— æ³•ç›´è§‚æŠŠæ¡</li>
<li><strong>ä¸€è‡´æ€§å’Œå¯å˜æ€§</strong>ï¼šå¿…é¡»é€‚åº”ä¸æ–­å˜åŒ–çš„éœ€æ±‚</li>
<li><strong>ç¦»æ•£æ€§</strong>ï¼šè½¯ä»¶ç³»ç»Ÿçš„çŠ¶æ€ç»„åˆæå…¶åºå¤§</li>
</ul>
<h4 data-id="heading-4">å¶ç„¶æ€§å›°éš¾ï¼ˆAccidentï¼‰</h4>
<p>è¿™äº›æ˜¯ç”±äºå½“å‰å·¥å…·å’ŒæŠ€æœ¯é™åˆ¶é€ æˆçš„å›°éš¾ï¼š</p>
<ul>
<li><strong>å¼€å‘å·¥å…·çš„é™åˆ¶</strong></li>
<li><strong>ç¼–ç¨‹è¯­è¨€çš„å¤æ‚æ€§</strong></li>
<li><strong>ç¡¬ä»¶æ€§èƒ½çº¦æŸ</strong></li>
<li><strong>å›¢é˜Ÿåä½œé—®é¢˜</strong></li>
</ul>
<p>å¸ƒé²å…‹æ–¯çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼š<strong>é“¶å¼¹æœ€å¤šåªèƒ½è§£å†³å¶ç„¶æ€§å›°éš¾ï¼Œä½†æ— æ³•è§¦åŠæœ¬è´¨æ€§å›°éš¾ã€‚</strong> ï¼Œè™½ç„¶æˆ‘æ²¡çœ‹å®Œï¼Œä½†æ€»ç»“ä¸‹æ¥åº”è¯¥å°±æ˜¯è¿™ä¸ªæ„æ€ğŸ˜‚</p>
<h2 data-id="heading-5">2. ç°åœ¨"é“¶å¼¹"çš„å®é™…å«ä¹‰</h2>
<p><strong>é“¶å¼¹ = èƒ½å¤Ÿè§£å†³æ‰€æœ‰é—®é¢˜çš„æŠ€æœ¯ã€æ–¹æ³•æˆ–å·¥å…·</strong></p>
<h3 data-id="heading-6">æŠ€æœ¯åœˆä¸­çš„å…¸å‹ä½¿ç”¨</h3>
<p>å½“æœ‰äººè¯´"xxxæ˜¯é“¶å¼¹"æ—¶ï¼Œé€šå¸¸æ„å‘³ç€ï¼š</p>
<ul>
<li>è¿™ä¸œè¥¿å¤ªå‰å®³äº†ï¼Œèƒ½è§£å†³æˆ‘ä»¬æ‰€æœ‰çš„çƒ¦æ¼</li>
<li>æœ‰äº†å®ƒï¼Œä¹‹å‰çš„æ‰€æœ‰é—®é¢˜éƒ½ä¸æ˜¯é—®é¢˜äº†</li>
<li>åˆ«çš„æŠ€æœ¯éƒ½å¯ä»¥ä¸ç”¨è€ƒè™‘äº†</li>
</ul>
<p><strong>å…¸å‹ä¾‹å­ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â Reactæ´¾</span>
<span class="hljs-keyword">const</span>Â <span class="hljs-title function_">ReactIsSilverBullet</span>Â =Â (<span class="hljs-params"/>)Â =&gt;Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"Reactæ‰æ˜¯çœŸæ­£çš„é“¶å¼¹ï¼Œè§£å†³æ‰€æœ‰å‰ç«¯é—®é¢˜ï¼"</span>;
};

<span class="hljs-comment">//Â Vueæ´¾</span>
<span class="hljs-keyword">const</span>Â <span class="hljs-title function_">VueIsSilverBullet</span>Â =Â (<span class="hljs-params"/>)Â =&gt;Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"Vueæ‰æ˜¯é“¶å¼¹ï¼Œç®€å•æ˜“å­¦ï¼Œæ€§èƒ½æ— æ•Œï¼"</span>;
};

<span class="hljs-comment">//Â å¾®æœåŠ¡æ´¾</span>
<span class="hljs-keyword">const</span>Â <span class="hljs-title function_">MicroservicesAreSilverBullet</span>Â =Â (<span class="hljs-params"/>)Â =&gt;Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"å¾®æœåŠ¡å°±æ˜¯é“¶å¼¹ï¼Œæ‹†åˆ†åæ‰€æœ‰æ‰©å±•é—®é¢˜éƒ½è§£å†³äº†ï¼"</span>;
};

<span class="hljs-comment">//Â Dockeræ´¾</span>
<span class="hljs-keyword">const</span>Â <span class="hljs-title function_">DockerIsSilverBullet</span>Â =Â (<span class="hljs-params"/>)Â =&gt;Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"Dockerå°±æ˜¯é“¶å¼¹ï¼Œä¸€æ¬¡æ„å»ºåˆ°å¤„è¿è¡Œï¼"</span>;
};
</code></pre>
<p>å½“æœ‰äººè¯´"xxxä¸æ˜¯é“¶å¼¹"æ—¶ï¼Œæ„æ€æ˜¯ï¼š</p>
<ul>
<li>è¿™ä¸ªæŠ€æœ¯æœ‰å±€é™æ€§ï¼Œä¸èƒ½è§£å†³æ‰€æœ‰é—®é¢˜</li>
<li>ä¸è¦æŒ‡æœ›å®ƒèƒ½ä¸€åŠ³æ°¸é€¸</li>
<li>è¿˜æ˜¯éœ€è¦é…åˆå…¶ä»–æ–¹æ¡ˆ</li>
</ul>
<p><strong>å…¸å‹ä¾‹å­ï¼š</strong></p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">--Â MySQLä¸æ˜¯é“¶å¼¹</span>
<span class="hljs-deletion">--Â "MySQLè™½ç„¶ä¸é”™ï¼Œä½†é¢å¯¹å¤§æ•°æ®é‡æ—¶è¿˜æ˜¯æœ‰é™åˆ¶ï¼Œä¸æ˜¯é“¶å¼¹ï¼"</span>

<span class="hljs-deletion">--Â K8sä¸æ˜¯é“¶å¼¹</span>
<span class="hljs-deletion">--Â "K8såŠŸèƒ½å¼ºå¤§ï¼Œä½†è¿ç»´å¤æ‚åº¦å¾ˆé«˜ï¼Œä¸æ˜¯é“¶å¼¹ï¼"</span>

<span class="hljs-deletion">--Â æ•æ·å¼€å‘ä¸æ˜¯é“¶å¼¹</span>
<span class="hljs-deletion">--Â "æ•æ·ä¸æ˜¯é“¶å¼¹ï¼Œè¿˜éœ€è¦ç»“åˆå…¶ä»–å·¥ç¨‹å®è·µï¼"</span>
</code></pre>
<h2 data-id="heading-7">3. é“¶å¼¹æ¦‚å¿µçš„ä¼ æ’­è·¯å¾„</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e61ea80b7cdd452aa41a076327cc53cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgOeWPt-i-vuS6ug==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765589299&amp;x-signature=6lFG9ZRXmwxpCROzqqB8qNPUNWY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-8">3. é“¶å¼¹å«ä¹‰çš„æ¼”å˜è¿‡ç¨‹</h2>
<h3 data-id="heading-9">åŸå§‹å«ä¹‰ï¼ˆ1986å¹´ï¼‰</h3>
<p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong> èƒ½å¤Ÿæ•°é‡çº§ï¼ˆ10å€ï¼‰æå‡è½¯ä»¶å¼€å‘ç”Ÿäº§ç‡ã€å¯é æ€§å’Œç®€æ´æ€§çš„æŠ€æœ¯æˆ–æ–¹æ³•</p>
<ul>
<li>è½¯ä»¶å¼€å‘çš„æœ¬è´¨å¤æ‚æ€§</li>
<li>æ˜¯å¦å­˜åœ¨é©å‘½æ€§çš„çªç ´æŠ€æœ¯</li>
<li>è½¯ä»¶å·¥ç¨‹çš„åŸºæœ¬é™åˆ¶</li>
</ul>
<h3 data-id="heading-10">ç°åœ¨çš„æŠ€æœ¯åœˆä¸Šæ™®éçš„å«ä¹‰</h3>
<p>èƒ½å¤Ÿç¥å¥‡å®Œå…¨è§£å†³å…·ä½“åœºæ™¯çš„ä¸€ç³»åˆ—é—®é¢˜çš„æŠ€æœ¯ã€å·¥å…·æˆ–æ–¹æ³•</p>
<ul>
<li>React vs Vue å“ªä¸ªæ›´å¥½</li>
<li>å¾®æœåŠ¡ vs å•ä½“å¦‚ä½•é€‰æ‹©</li>
<li>MySQL vs MongoDB å“ªä¸ªæ›´é€‚åˆ</li>
<li>Docker vs K8s å¦‚ä½•é€‰æ‹©</li>
</ul>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>èƒ½å¾ˆæ¸…æ™°çš„çœ‹åˆ°é“¶å¼¹è¿™ä¸ªè¯ä»æŠ½è±¡çš„æ¶æ„è®¾è®¡ç†å¿µï¼Œæ¼”å˜æˆäº†å…·ä½“çš„å¯¹æŸä»¶æŠ€æœ¯ã€æ¡†æ¶ã€å·¥å…·ã€æ–¹æ³•çš„è¯„ä»·ã€‚</p>
<ul>
<li><strong>åŸæœ¬</strong>ï¼šæŒ‡è½¯ä»¶å·¥ç¨‹ä¸­çš„æ¶æ„è®¾è®¡å’Œæ•´ä½“æ–¹æ³•è®º</li>
<li><strong>ç°åœ¨</strong>ï¼šå˜æˆäº†å¯¹å…·ä½“æŸä¸ªæŠ€æœ¯æ–¹æ¡ˆã€æŠ€æœ¯æ¡†æ¶çš„è¯„ä»·å·¥å…·</li>
</ul>
<h3 data-id="heading-12">å…·ä½“å«ä¹‰å˜åŒ–</h3>
<ul>
<li><strong>åŸå§‹å«ä¹‰</strong>ï¼šå¸ƒé²å…‹æ–¯æŒ‡çš„æ˜¯èƒ½å¦æ ¹æœ¬ä¸Šè§£å†³è½¯ä»¶å¤æ‚æ€§çš„æ¶æ„æ–¹æ³•</li>
<li><strong>ç°åœ¨å«ä¹‰</strong>ï¼šç”¨æ¥è¯„ä»·æŸä¸ªå…·ä½“æŠ€æœ¯ã€æ¡†æ¶ã€å·¥å…·æ˜¯å¦ä¸‡èƒ½</li>
</ul>
<p>ä¹Ÿåæ˜ äº†å¤§å®¶è®¨è®ºæŠ€æœ¯çš„æ—¶å€™ï¼Œè¶Šæ¥è¶Šå…·ä½“ï¼Œè¶Šæ¥è¶Šè½åœ°ã€‚ æ™®é€šäººä¹Ÿå¾ˆéš¾æ¥è§¦åˆ°ä»€ä¹ˆå¤ªæŠ½è±¡ï¼Œå¤ªå®å¤§çš„æ¶æ„è®¾è®¡ï¼Œæˆ‘ä»¬ä¹Ÿæ›´åº”è¯¥å…³å¿ƒæ›´å…·ä½“çš„æ–¹æ¡ˆï¼Œæ¥æ›´å¥½çš„è§£å†³é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-13">å…³æ³¨ã€Œ9å·è¾¾äººã€å…¬ä¼—å·ï¼Œè·å–æ›´å¤šå¹²è´§</h3>
<p>æˆ‘æ˜¯ä¸€åå°å‚ç¨‹åºå‘˜ï¼Œä¸“æ³¨åˆ†äº«<strong>çœŸå®çš„é¡¹ç›®å®æˆ˜ç»éªŒ</strong>å’Œ<strong>æ¥åœ°æ°”çš„æŠ€æœ¯æ€è€ƒ</strong>ã€‚</p>
<p><strong>å…³æ³¨å…¬ä¼—å·ã€Œ9å·è¾¾äººã€</strong></p>
<p><strong>ä¸è®²å¤§è€Œå…¨çš„ç†è®ºï¼ŒåªèŠçœŸå®è¸©è¿‡çš„å‘ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaæ³›å‹é«˜çº§ç©æ³•ï¼šé€šé…ç¬¦ã€ä¸Šä¸‹ç•Œä¸ç±»å‹æ“¦é™¤é¿å‘å®æˆ˜ï¼ˆçº¯å¹²è´§ï¼Œé™„å®Œæ•´å·¥å…·ç±»ï¼‰]]></title>    <link>https://juejin.cn/post/7580202945147551759</link>    <guid>https://juejin.cn/post/7580202945147551759</guid>    <pubDate>2025-12-06T02:36:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580202945147551759" data-draft-id="7580202945147535375" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaæ³›å‹é«˜çº§ç©æ³•ï¼šé€šé…ç¬¦ã€ä¸Šä¸‹ç•Œä¸ç±»å‹æ“¦é™¤é¿å‘å®æˆ˜ï¼ˆçº¯å¹²è´§ï¼Œé™„å®Œæ•´å·¥å…·ç±»ï¼‰"/> <meta itemprop="keywords" content="åç«¯,Java,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-06T02:36:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ä¸˜å±±"/> <meta itemprop="url" content="https://juejin.cn/user/272334615219629"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaæ³›å‹é«˜çº§ç©æ³•ï¼šé€šé…ç¬¦ã€ä¸Šä¸‹ç•Œä¸ç±»å‹æ“¦é™¤é¿å‘å®æˆ˜ï¼ˆçº¯å¹²è´§ï¼Œé™„å®Œæ•´å·¥å…·ç±»ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/272334615219629/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ä¸˜å±±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T02:36:42.000Z" title="Sat Dec 06 2025 02:36:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    18
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åšJavaå¼€å‘çš„æœ‹å‹åº”è¯¥éƒ½æœ‰ä½“ä¼šï¼šæ³›å‹è¿™ä¸œè¥¿å…¥é—¨å®¹æ˜“ï¼ŒçœŸè¦ç”¨åˆ°é¡¹ç›®é‡Œâ€”â€”æ¯”å¦‚å†™ä¸ªé€šç”¨å·¥å…·ç±»ã€å¤„ç†å„ç§ç±»å‹çš„é›†åˆæ—¶ï¼ŒåŠ¨ä¸åŠ¨å°±è¸©å‘ã€‚è¦ä¹ˆé€šé…ç¬¦ç”¨é”™ç¼–è¯‘æŠ¥é”™ï¼Œè¦ä¹ˆç±»å‹æ“¦é™¤å¯¼è‡´è¿è¡Œæ—¶æŠ›ClassCastExceptionï¼Œè¦ä¹ˆæƒ³åˆ›å»ºä¸ªæ³›å‹æ•°ç»„ç›´æ¥ç¼–è¯‘ä¸è¿‡ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä¸è·Ÿå¤§å®¶èŠçº¯æ¦‚å¿µï¼Œå°±ç»“åˆæˆ‘å®é™…å¼€å‘ä¸­è¸©è¿‡çš„å‘ã€å†™è¿‡çš„é€šç”¨æ•°æ®æ ¡éªŒå·¥å…·ç±»ï¼ŒæŠŠæ³›å‹é€šé…ç¬¦ï¼ˆ?ã€? extends Tã€? super Tï¼‰çš„ç”¨æ³•ã€ç±»å‹æ“¦é™¤çš„å‘ï¼Œè¿˜æœ‰é¿å‘çš„å®æ“æŠ€å·§ï¼Œéƒ½è®²æ¸…æ¥šã€‚ä¿è¯éƒ½æ˜¯å®æˆ˜å¹²è´§ï¼Œä»£ç èƒ½ç›´æ¥è·‘ï¼Œçœ‹å®Œå°±èƒ½ç”¨åˆ°è‡ªå·±çš„é¡¹ç›®é‡Œã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ³›å‹é€šé…ç¬¦ï¼š3ç§å†™æ³•çš„å®æˆ˜åŒºåˆ«ï¼ˆPECSåŸåˆ™çœŸçš„å¾ˆå¥½ç”¨ï¼‰</h2>
<p>æ³›å‹é€šé…ç¬¦çš„æ ¸å¿ƒå°±æ˜¯è§£å†³â€œä¸åŒç±»å‹é›†åˆæ€ä¹ˆé€šç”¨å¤„ç†â€çš„é—®é¢˜ï¼Œå¾ˆå¤šäººæä¸æ‡‚ <code>?ã€? extends Tã€? super T</code>çš„åŒºåˆ«ï¼Œå…¶å®è®°ä½<code>PECSåŸåˆ™</code>ï¼ˆç”Ÿäº§è€…ç”¨<code>Extends</code>ï¼Œæ¶ˆè´¹è€…ç”¨<code>Super</code>ï¼‰å°±å¤Ÿäº†ã€‚æˆ‘ç»“åˆè‡ªå·±å†™è¿‡çš„å·¥å…·æ–¹æ³•ï¼Œç»™å¤§å®¶è®²é€æ¯ä¸ªé€šé…ç¬¦çš„ç”¨æ³•å’Œå‘ã€‚</p>
<h3 data-id="heading-1">1. æ— ç•Œé€šé…ç¬¦ ?ï¼šåªåšé€šç”¨è¯»å–ï¼Œåˆ«æƒ³ç€å†™æ•°æ®</h3>
<p>æ— ç•Œé€šé…ç¬¦?å°±æ˜¯åŒ¹é…ä»»æ„ç±»å‹çš„æ³›å‹ï¼Œæˆ‘ä¸€èˆ¬åªç”¨åœ¨â€œåªè¯»å–ä¸å†™å…¥â€çš„é€šç”¨å·¥å…·é‡Œï¼Œæ¯”å¦‚æ‰“å°ä»»æ„é›†åˆã€åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©ºã€‚</p>
<p>æˆ‘å½“åˆè¸©è¿‡ä¸€ä¸ªå‘ï¼šç”¨<code>?</code>å®šä¹‰çš„Listï¼Œæƒ³å¾€é‡Œé¢åŠ ä¸ªå­—ç¬¦ä¸²ï¼Œç»“æœç›´æ¥ç¼–è¯‘æŠ¥é”™ã€‚åæ¥æ‰æ˜ç™½ï¼Œç¼–è¯‘å™¨æ ¹æœ¬ä¸çŸ¥é“è¿™ä¸ªListå…·ä½“å­˜çš„æ˜¯å•¥ç±»å‹ï¼Œä¸ºäº†ä¿è¯ç±»å‹å®‰å…¨ï¼Œé™¤äº†nullï¼Œå•¥éƒ½ä¸è®©åŠ ã€‚</p>
<h4 data-id="heading-2">å®æˆ˜åœºæ™¯ï¼šé€šç”¨é›†åˆæ‰“å°å·¥å…·</h4>
<p>éœ€æ±‚å¾ˆç®€å•ï¼šå†™ä¸ªæ–¹æ³•ï¼Œä¸ç®¡ä¼ è¿‡æ¥çš„æ˜¯Listã€Listè¿˜æ˜¯List&lt;è‡ªå®šä¹‰å¯¹è±¡&gt;ï¼Œéƒ½èƒ½æ‰“å°é‡Œé¢çš„å…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * æ— ç•Œé€šé…ç¬¦å®æˆ˜ï¼šé€šç”¨é›†åˆæ‰“å°å·¥å…·
 * å¿«é€Ÿæ‰“å°é›†åˆï¼Œä¸ç”¨é‡å¤å†™å¾ªç¯
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WildcardDemo</span> {
    <span class="hljs-comment">// æ— ç•Œé€šé…ç¬¦?ï¼ŒåŒ¹é…ä»»æ„ç±»å‹çš„List</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printList</span><span class="hljs-params">(List&lt;?&gt; list)</span> {
        <span class="hljs-keyword">if</span> (list == <span class="hljs-literal">null</span> || list.isEmpty()) {
            System.out.println(<span class="hljs-string">"é›†åˆä¸ºç©º"</span>);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">for</span> (Object obj : list) {
            <span class="hljs-comment">// åªèƒ½è¯»æˆObjectç±»å‹ï¼Œå› ä¸ºä¸çŸ¥é“å…·ä½“æ˜¯å•¥ç±»å‹</span>
            System.out.println(<span class="hljs-string">"å…ƒç´ å€¼ï¼š"</span> + obj);
        }
        
        <span class="hljs-comment">// è¿™é‡Œæ˜¯æˆ‘è¸©è¿‡çš„å‘ï¼šæƒ³åŠ ä¸ªå­—ç¬¦ä¸²ï¼Œç¼–è¯‘ç›´æ¥æŠ¥é”™</span>
        <span class="hljs-comment">// list.add("test"); // ç¼–è¯‘é”™è¯¯ï¼šæ²¡æ³•ç¡®å®šlistçš„å…·ä½“ç±»å‹ï¼Œå†™å…¥ä¼šä¹±å¥—</span>
        <span class="hljs-comment">// å”¯ä¸€èƒ½åŠ çš„åªæœ‰nullï¼Œå› ä¸ºnullæ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»</span>
        list.add(<span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; strList = List.of(<span class="hljs-string">"Java"</span>, <span class="hljs-string">"æ³›å‹"</span>, <span class="hljs-string">"é€šé…ç¬¦"</span>);
        List&lt;Integer&gt; intList = List.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
        
        printList(strList); <span class="hljs-comment">// æ­£å¸¸æ‰“å°å­—ç¬¦ä¸²åˆ—è¡¨</span>
        printList(intList); <span class="hljs-comment">// æ­£å¸¸æ‰“å°æ•´æ•°åˆ—è¡¨</span>
    }
}
</code></pre>
<p><strong>ä¸ºå•¥è¿™ä¹ˆå†™ï¼Ÿ</strong><br/>
æ— ç•Œé€šé…ç¬¦çš„æ ¸å¿ƒå°±æ˜¯â€œé€šç”¨åªè¯»â€ï¼Œæ¯”å¦‚æ‰“å°ã€ç»Ÿè®¡é•¿åº¦ã€åˆ¤ç©ºè¿™äº›æ“ä½œï¼Œä¸ç”¨å…³å¿ƒé›†åˆé‡Œå…·ä½“å­˜çš„æ˜¯å•¥ï¼Œç”¨<code>?</code>å°±å¤Ÿäº†ã€‚ä½†åƒä¸‡åˆ«æƒ³ç€å¾€é‡Œé¢å†™æ•°æ®ï¼Œé™¤äº†nullï¼Œå†™å•¥éƒ½æŠ¥é”™ã€‚</p>
<h3 data-id="heading-3">2. ä¸Šç•Œé€šé…ç¬¦ <code>? extends T</code>ï¼šåªè¯»å–ï¼Œä¸å†™å…¥ï¼ˆç”Ÿäº§è€…åœºæ™¯ï¼‰</h3>
<p><code>? extends T</code>çš„æ„æ€æ˜¯<code>â€œåŒ¹é…Tæˆ–è€…Tçš„å­ç±»â€</code>ï¼Œæˆ‘ä¸€èˆ¬ç”¨åœ¨â€œä»é›†åˆé‡Œè¯»æ•°æ®â€çš„åœºæ™¯ï¼Œæ¯”å¦‚ç»™Integerã€Longã€Doubleè¿™äº›æ•°å€¼ç±»å‹çš„é›†åˆæ±‚å’Œâ€”â€”è¿™äº›é›†åˆéƒ½æ˜¯â€œç”Ÿäº§â€æ•°å€¼çš„ï¼Œæ‰€ä»¥ç”¨<code>extends</code>ã€‚</p>
<p>æˆ‘ä¹‹å‰çŠ¯è¿‡ä¸€ä¸ªé”™ï¼šç”¨<code>? extends Number</code>çš„Listï¼Œæƒ³å¾€é‡ŒåŠ ä¸ªIntegerï¼Œç»“æœç¼–è¯‘æŠ¥é”™ã€‚ç°åœ¨æƒ³é€šäº†ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“è¿™ä¸ªListæ˜¯å­˜Integerã€Longè¿˜æ˜¯Doubleï¼Œè¦æ˜¯åŠ äº†Integerï¼Œä¸‡ä¸€åŸæœ¬æ˜¯Longçš„Listï¼Œä¸å°±ä¹±å¥—äº†ï¼Ÿ</p>
<h4 data-id="heading-4">å®æˆ˜åœºæ™¯ï¼šæ•°å€¼é›†åˆæ±‚å’Œå·¥å…·</h4>
<p>éœ€æ±‚ï¼šå†™ä¸ªæ–¹æ³•ï¼Œèƒ½ç»™Integerã€Longã€Doubleçš„Listæ±‚å’Œï¼Œè¿”å›doubleç±»å‹ç»“æœã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * ä¸Šç•Œé€šé…ç¬¦å®æˆ˜ï¼šæ•°å€¼é›†åˆæ±‚å’Œ
 * åšæŠ¥è¡¨ç»Ÿè®¡æ—¶ç»å¸¸ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¸ç”¨ç»™æ¯ç§æ•°å€¼ç±»å‹éƒ½å†™ä¸€éæ±‚å’Œ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpperBoundDemo</span> {
    <span class="hljs-comment">// ä¸Šç•Œé€šé…ç¬¦ï¼šåŒ¹é…Numberæˆ–å…¶å­ç±»ï¼ˆIntegerã€Longã€Doubleéƒ½ç®—ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(List&lt;? extends Number&gt; numberList)</span> {
        <span class="hljs-type">double</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>;
        <span class="hljs-keyword">for</span> (Number num : numberList) {
            <span class="hljs-comment">// è¯»æ•°æ®ï¼šæ‰€æœ‰å­ç±»éƒ½èƒ½è½¬æˆNumberï¼Œå®‰å…¨</span>
            total += num.doubleValue();
        }
        
        <span class="hljs-comment">// è¸©å‘ç‚¹ï¼šæƒ³åŠ Integerï¼Œç¼–è¯‘æŠ¥é”™</span>
        <span class="hljs-comment">// numberList.add(10); // ç¼–è¯‘å™¨ä¸çŸ¥é“listæ˜¯å­˜Integerè¿˜æ˜¯Longï¼Œä¸æ•¢è®©åŠ </span>
        <span class="hljs-comment">// å°±ç®—åŠ Numberä¹Ÿä¸è¡Œ</span>
        <span class="hljs-comment">// numberList.add(10.0); // åŒæ ·æŠ¥é”™</span>
        
        <span class="hljs-keyword">return</span> total;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;Integer&gt; intList = List.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
        List&lt;Double&gt; doubleList = List.of(<span class="hljs-number">1.5</span>, <span class="hljs-number">2.5</span>);
        
        System.out.println(<span class="hljs-string">"æ•´æ•°åˆ—è¡¨æ±‚å’Œï¼š"</span> + sum(intList)); <span class="hljs-comment">// è¾“å‡º6.0</span>
        System.out.println(<span class="hljs-string">"å°æ•°åˆ—è¡¨æ±‚å’Œï¼š"</span> + sum(doubleList)); <span class="hljs-comment">// è¾“å‡º4.0</span>
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒè¦ç‚¹</strong>ï¼š<br/>
<code>? extends T</code>å°±æ˜¯â€œç”Ÿäº§è€…â€â€”â€”é›†åˆé‡Œçš„å…ƒç´ éƒ½æ˜¯<code>T</code>çš„å­ç±»ï¼Œèƒ½å®‰å…¨è¯»æˆ<code>T</code>ç±»å‹ï¼Œä½†ç»å¯¹ä¸èƒ½å†™ã€‚æ¯”å¦‚æ±‚å’Œã€å¯¼å‡ºæ•°æ®ã€éå†å–å€¼è¿™äº›åœºæ™¯ï¼Œç”¨è¿™ä¸ªé€šé…ç¬¦å‡†æ²¡é”™ã€‚</p>
<h3 data-id="heading-5">3. ä¸‹ç•Œé€šé…ç¬¦ <code>? super T</code>ï¼šåªå†™å…¥ï¼Œè¯»å–åªèƒ½æ‹¿Objectï¼ˆæ¶ˆè´¹è€…åœºæ™¯ï¼‰</h3>
<p><code>? super T</code>çš„æ„æ€æ˜¯<code>â€œåŒ¹é…Tæˆ–è€…Tçš„çˆ¶ç±»â€</code>ï¼Œæˆ‘ä¸€èˆ¬ç”¨åœ¨â€œå¾€é›†åˆé‡Œå†™æ•°æ®â€çš„åœºæ™¯ï¼Œæ¯”å¦‚æ‰¹é‡å¾€Listé‡Œæ’Integerâ€”â€”ä¸ç®¡è¿™ä¸ªListæ˜¯Listã€Listè¿˜æ˜¯Listï¼Œéƒ½èƒ½æ’ï¼Œå› ä¸ºè¿™äº›éƒ½æ˜¯Integerçš„çˆ¶ç±»ã€‚</p><p/>
<p>è¿™é‡Œä¹Ÿæœ‰ä¸ªå‘ï¼šç”¨<code>? super Tçš„List</code>è¯»æ•°æ®æ—¶ï¼Œåªèƒ½è¯»æˆObjectç±»å‹ï¼Œæƒ³è½¬æˆTç±»å‹ä¼šæŠ¥é”™ã€‚å› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“è¿™ä¸ªListæ˜¯å­˜Tçš„å“ªä¸ªçˆ¶ç±»ï¼Œæ²¡æ³•ç¡®å®šç±»å‹ã€‚</p>
<h4 data-id="heading-6">å®æˆ˜åœºæ™¯ï¼šæ•°æ®æ‰¹é‡æ’å…¥å·¥å…·</h4>
<p>éœ€æ±‚ï¼šå†™ä¸ªæ–¹æ³•ï¼Œèƒ½å¾€ä»»æ„â€œèƒ½å­˜Integerâ€çš„é›†åˆé‡Œæ‰¹é‡æ’æ•´æ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * ä¸‹ç•Œé€šé…ç¬¦å®æˆ˜ï¼šæ•°æ®æ‰¹é‡æ’å…¥
 * ç”¨è¿™ä¸ªæ–¹æ³•å¾€ä¸åŒç±»å‹çš„é›†åˆé‡Œæ’æ•°æ®
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LowerBoundDemo</span> {
    <span class="hljs-comment">// ä¸‹ç•Œé€šé…ç¬¦ï¼šåŒ¹é…Integeræˆ–å…¶çˆ¶ç±»ï¼ˆNumberã€Objectï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchAddInteger</span><span class="hljs-params">(List&lt;? <span class="hljs-built_in">super</span> Integer&gt; list, <span class="hljs-type">int</span> count)</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= count; i++) {
            <span class="hljs-comment">// å†™æ•°æ®ï¼šIntegerèƒ½å­˜åˆ°ä»»æ„çˆ¶ç±»é›†åˆé‡Œï¼Œå®‰å…¨</span>
            list.add(i);
        }
        
        <span class="hljs-comment">// è¯»æ•°æ®ï¼šåªèƒ½æ‹¿åˆ°Objectç±»å‹ï¼Œè¿™æ˜¯å‘ç‚¹</span>
        <span class="hljs-keyword">for</span> (Object obj : list) {
            System.out.println(<span class="hljs-string">"æ’å…¥çš„å…ƒç´ ï¼š"</span> + obj);
        }
        
        <span class="hljs-comment">// æˆ‘è¸©è¿‡çš„å‘ï¼šæƒ³ç›´æ¥è¯»æˆIntegerï¼Œç¼–è¯‘æŠ¥é”™</span>
        <span class="hljs-comment">// for (Integer num : list) { // ç¼–è¯‘é”™è¯¯ï¼šlistå¯èƒ½æ˜¯Numberæˆ–Objectç±»å‹ï¼Œæ²¡æ³•è½¬Integer</span>
        <span class="hljs-comment">//     System.out.println(num);</span>
        <span class="hljs-comment">// }</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åœºæ™¯1ï¼šList&lt;Integer&gt;ï¼ˆç›´æ¥å­˜Integerï¼‰</span>
        List&lt;Integer&gt; intList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        batchAddInteger(intList, <span class="hljs-number">3</span>); <span class="hljs-comment">// æ’å…¥1ã€2ã€3</span>
        
        <span class="hljs-comment">// åœºæ™¯2ï¼šList&lt;Number&gt;ï¼ˆIntegerçš„çˆ¶ç±»ï¼‰</span>
        List&lt;Number&gt; numList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        batchAddInteger(numList, <span class="hljs-number">2</span>); <span class="hljs-comment">// æ’å…¥1ã€2</span>
        
        <span class="hljs-comment">// åœºæ™¯3ï¼šList&lt;Object&gt;ï¼ˆIntegerçš„é¡¶çº§çˆ¶ç±»ï¼‰</span>
        List&lt;Object&gt; objList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        batchAddInteger(objList, <span class="hljs-number">1</span>); <span class="hljs-comment">// æ’å…¥1</span>
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒè¦ç‚¹</strong>ï¼š<br/>
<code>? super T</code>å°±æ˜¯â€œæ¶ˆè´¹è€…â€â€”â€”é›†åˆèƒ½æ¥æ”¶Tç±»å‹çš„æ•°æ®ï¼Œæ‰€ä»¥å†™æ•°æ®ç»å¯¹å®‰å…¨ï¼Œä½†è¯»æ•°æ®åªèƒ½æ‹¿Objectã€‚æ¯”å¦‚æ‰¹é‡æ’å…¥ã€æ‰¹é‡èµ‹å€¼ã€æ•°æ®å…¥åº“è¿™äº›åœºæ™¯ï¼Œå°±ç”¨è¿™ä¸ªé€šé…ç¬¦ã€‚</p>
<h3 data-id="heading-7">4. PECSåŸåˆ™é€ŸæŸ¥è¡¨</h3>





























<table><thead><tr><th>é€šé…ç¬¦ç±»å‹</th><th>èƒ½å¹²å˜›</th><th>æˆ‘å¸¸ç”¨çš„åœºæ™¯</th><th>è¯»å†™æ³¨æ„ç‚¹</th></tr></thead><tbody><tr><td>?</td><td>åŒ¹é…ä»»æ„ç±»å‹</td><td>æ‰“å°ã€åˆ¤ç©ºã€ç»Ÿè®¡é•¿åº¦</td><td>è¯»ï¼šåªèƒ½æ‹¿Objectï¼›å†™ï¼šåªèƒ½åŠ null</td></tr><tr><td>? extends T</td><td>åŒ¹é…Tæˆ–å…¶å­ç±»</td><td>æ±‚å’Œã€å¯¼å‡ºæ•°æ®ã€éå†å–å€¼</td><td>è¯»ï¼šèƒ½è½¬Tï¼›å†™ï¼šå•¥éƒ½ä¸èƒ½åŠ ï¼ˆé™¤äº†nullï¼‰</td></tr><tr><td>? super T</td><td>åŒ¹é…Tæˆ–å…¶çˆ¶ç±»</td><td>æ‰¹é‡æ’å…¥ã€æ‰¹é‡èµ‹å€¼ã€æ•°æ®å…¥åº“</td><td>è¯»ï¼šåªèƒ½æ‹¿Objectï¼›å†™ï¼šèƒ½åŠ Tç±»å‹</td></tr></tbody></table>
<h2 data-id="heading-8">äºŒã€ç±»å‹æ“¦é™¤ï¼šæ³›å‹æœ€å‘çš„åœ°æ–¹</h2>
<p>å¾ˆå¤šäººä¸çŸ¥é“ï¼Œ<code>æ³›å‹å…¶å®æ˜¯Javaçš„â€œè¯­æ³•ç³–â€</code>â€”â€”ç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠŠæ‰€æœ‰æ³›å‹ä¿¡æ¯éƒ½æ“¦é™¤æ‰ï¼Œæ¢æˆObjectæˆ–è€…é™å®šç±»å‹ã€‚è¿™å°±å¯¼è‡´äº†ä¸€å †å‘ï¼Œæˆ‘ç»™å¤§å®¶åˆ—å‡ ä¸ªæˆ‘è¸©è¿‡çš„é«˜é¢‘å‘ï¼Œä¸€ä¸ªä¸ªè¯´æ€ä¹ˆè§£å†³ã€‚</p>
<h3 data-id="heading-9">1. å…ˆææ‡‚ç±»å‹æ“¦é™¤æ˜¯å•¥</h3>
<p>ç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠŠæ³›å‹ä»£ç æ”¹æˆâ€œåŸå§‹ä»£ç â€ï¼š</p>
<ul>
<li>Listä¼šè¢«æ“¦æˆListï¼Œè¯»æ•°æ®æ—¶è‡ªåŠ¨åŠ (String)å¼ºåˆ¶è½¬æ¢ï¼›</li>
<li>List&lt;? extends Number&gt;ä¼šè¢«æ“¦æˆListï¼›</li>
<li>æ³›å‹ç±»ã€æ³›å‹æ–¹æ³•é‡Œçš„éƒ½ä¼šè¢«æ“¦æˆObjectï¼ˆæœ‰ä¸Šé™å°±æ“¦æˆä¸Šé™ç±»å‹ï¼‰ã€‚</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå’±ä»¬å†™çš„æ³›å‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¼–è¯‘å‰</span>
List&lt;String&gt; strList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
strList.add(<span class="hljs-string">"Java"</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> strList.get(<span class="hljs-number">0</span>);

<span class="hljs-comment">// ç¼–è¯‘åï¼ˆç¼–è¯‘å™¨è‡ªåŠ¨æ”¹çš„ï¼‰</span>
<span class="hljs-type">List</span> <span class="hljs-variable">strList</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();
strList.add(<span class="hljs-string">"Java"</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> (String) strList.get(<span class="hljs-number">0</span>); <span class="hljs-comment">// è‡ªåŠ¨åŠ äº†å¼ºåˆ¶è½¬æ¢</span>
</code></pre>
<p>çœ‹å‡ºæ¥äº†å§ï¼Ÿæ³›å‹åªåœ¨ç¼–è¯‘æœŸç®¡ç±»å‹å®‰å…¨ï¼Œè¿è¡Œæ—¶JVMæ ¹æœ¬ä¸çŸ¥é“æ³›å‹æ˜¯å•¥ï¼Œè¿™å°±æ˜¯æ‰€æœ‰å‘çš„æ ¹æºã€‚</p>
<h3 data-id="heading-10">2. æˆ‘è¸©è¿‡çš„5ä¸ªé«˜é¢‘å‘ï¼ˆé™„è§£å†³æ–¹æ¡ˆï¼‰</h3>
<h4 data-id="heading-11">å‘1ï¼šæ³›å‹æ•°ç»„åˆ›å»ºå¤±è´¥ï¼ˆæœ€å¸¸è§çš„å‘ï¼‰</h4>
<p>æˆ‘å½“åˆæƒ³åˆ›å»ºä¸€ä¸ªList[]æ•°ç»„ï¼Œç»“æœç¼–è¯‘ç›´æ¥æŠ¥é”™ï¼›åæ¥æƒ³å¼ºè¡Œè½¬ç±»å‹ï¼Œè¿è¡Œæ—¶åˆæŠ›ClassCastExceptionã€‚</p>
<p><strong>è¸©å‘ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æˆ‘è¸©è¿‡çš„å‘ï¼šæ³›å‹æ•°ç»„åˆ›å»ºå¤±è´¥
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeErasureDemo1</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// å‘1ï¼šç›´æ¥åˆ›å»ºæ³›å‹æ•°ç»„ï¼Œç¼–è¯‘æŠ¥é”™</span>
        <span class="hljs-comment">// List&lt;String&gt;[] strArr = new List&lt;String&gt;[10]; // ç¼–è¯‘é”™è¯¯ï¼šGeneric array creation</span>
        
        <span class="hljs-comment">// å‘2ï¼šå¼ºè¡Œè½¬ç±»å‹ï¼Œè¿è¡Œæ—¶æŠ¥é”™</span>
        List&lt;String&gt;[] strArr2 = (List&lt;String&gt;[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">List</span>[<span class="hljs-number">10</span>];
        strArr2[<span class="hljs-number">0</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
        <span class="hljs-comment">// è¿è¡Œæ—¶å‘ï¼šæ•°ç»„å®é™…æ˜¯List[]ï¼Œèƒ½å­˜ä»»æ„List</span>
        List&lt;Integer&gt; intList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        intList.add(<span class="hljs-number">123</span>);
        strArr2[<span class="hljs-number">0</span>] = (List&lt;String&gt;) intList; <span class="hljs-comment">// ç¼–è¯‘è¿‡äº†ï¼Œè¿è¡Œæ—¶æŠ›ClassCastException</span>
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong><br/>
æ•°ç»„æ˜¯â€œåå˜â€çš„ï¼ˆæ¯”å¦‚String[]æ˜¯Object[]çš„å­ç±»ï¼‰ï¼Œä½†æ³›å‹æ˜¯â€œä¸å˜â€çš„ï¼ˆListä¸æ˜¯Listçš„å­ç±»ï¼‰ã€‚ç±»å‹æ“¦é™¤åï¼ŒJVMåˆ†ä¸æ¸…List[]å’ŒList[]ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ç›´æ¥ä¸è®©åˆ›å»ºæ³›å‹æ•°ç»„ã€‚</p><p/>
<p><strong>æˆ‘çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼š<br/>
åˆ«ç”¨æ•°ç»„ï¼Œæ”¹ç”¨List&lt;List&gt;ï¼è¿™æ˜¯æˆ‘ç°åœ¨æœ€å¸¸ç”¨çš„åŠæ³•ï¼Œç®€å•åˆå®‰å…¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼šç”¨Listä»£æ›¿æ³›å‹æ•°ç»„
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeErasureDemo1Fix</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ç”¨List&lt;List&lt;String&gt;&gt;ä»£æ›¿List&lt;String&gt;[]</span>
        List&lt;List&lt;String&gt;&gt; strListContainer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        List&lt;String&gt; strList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        strList.add(<span class="hljs-string">"Java"</span>);
        strListContainer.add(strList);
        
        <span class="hljs-comment">// ç±»å‹å®‰å…¨ï¼šæƒ³å­˜List&lt;Integer&gt;ç›´æ¥ç¼–è¯‘æŠ¥é”™ï¼Œä¸ä¼šæœ‰è¿è¡Œæ—¶é—®é¢˜</span>
        <span class="hljs-comment">// List&lt;Integer&gt; intList = List.of(1);</span>
        <span class="hljs-comment">// strListContainer.add(intList); // ç¼–è¯‘é”™è¯¯ï¼Œç±»å‹å¯¹ä¸ä¸Š</span>
    }
}
</code></pre>
<h4 data-id="heading-12">å‘2ï¼šç”¨instanceofåˆ¤æ–­æ³›å‹ç±»å‹</h4>
<p>æˆ‘å½“åˆæƒ³åˆ¤æ–­ä¸€ä¸ªListæ˜¯ä¸æ˜¯Listï¼Œå†™äº†instanceof Listï¼Œç»“æœç¼–è¯‘æŠ¥é”™ã€‚</p>
<p><strong>è¸©å‘ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æˆ‘è¸©è¿‡çš„å‘ï¼šinstanceofåˆ¤æ–­æ³›å‹ç±»å‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeErasureDemo2</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; strList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// å‘ï¼šinstanceofæ²¡æ³•åˆ¤æ–­æ³›å‹ç±»å‹ï¼Œç¼–è¯‘æŠ¥é”™</span>
        <span class="hljs-comment">// if (strList instanceof List&lt;String&gt;) { // ç¼–è¯‘é”™è¯¯</span>
        
        <span class="hljs-comment">// çœ‹ä¼¼èƒ½å†™ï¼Œä½†æ²¡æ„ä¹‰â€”â€”åªèƒ½åˆ¤æ–­æ˜¯ä¸æ˜¯Listï¼Œæ²¡æ³•åˆ¤æ–­æ³›å‹</span>
        <span class="hljs-keyword">if</span> (strList <span class="hljs-keyword">instanceof</span> List&lt;?&gt;) {
            System.out.println(<span class="hljs-string">"æ˜¯Listï¼Œä½†ä¸çŸ¥é“å­˜çš„æ˜¯å•¥"</span>);
        }
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong><br/>
è¿è¡Œæ—¶æ³›å‹ä¿¡æ¯å·²ç»è¢«æ“¦é™¤äº†ï¼ŒJVMåªçŸ¥é“æ˜¯Listï¼Œä¸çŸ¥é“æ˜¯Listè¿˜æ˜¯Listï¼Œæ‰€ä»¥instanceofæ ¹æœ¬åˆ¤æ–­ä¸äº†ã€‚</p>
<p><strong>æˆ‘çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼š<br/>
ä¼ ä¸ªClassç±»å‹ä»¤ç‰Œï¼Œéå†é›†åˆåˆ¤æ–­æ¯ä¸ªå…ƒç´ çš„ç±»å‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼šç”¨ç±»å‹ä»¤ç‰Œåˆ¤æ–­å…ƒç´ ç±»å‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeErasureDemo2Fix</span> {
    <span class="hljs-comment">// æˆ‘é¡¹ç›®é‡Œçš„é€šç”¨æ–¹æ³•ï¼šåˆ¤æ–­Listé‡Œçš„å…ƒç´ æ˜¯ä¸æ˜¯æŒ‡å®šç±»å‹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-type">boolean</span> <span class="hljs-title function_">isListOfType</span><span class="hljs-params">(List&lt;?&gt; list, Class&lt;T&gt; type)</span> {
        <span class="hljs-keyword">if</span> (list.isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// ç©ºé›†åˆæ²¡æ³•åˆ¤æ–­</span>
        }
        <span class="hljs-keyword">for</span> (Object obj : list) {
            <span class="hljs-keyword">if</span> (!type.isInstance(obj)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; strList = List.of(<span class="hljs-string">"Java"</span>, <span class="hljs-string">"æ³›å‹"</span>);
        List&lt;Integer&gt; intList = List.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
        
        <span class="hljs-comment">// ç”¨ç±»å‹ä»¤ç‰Œåˆ¤æ–­ï¼Œé è°±ï¼</span>
        System.out.println(<span class="hljs-string">"æ˜¯ä¸æ˜¯Stringåˆ—è¡¨ï¼š"</span> + isListOfType(strList, String.class)); <span class="hljs-comment">// true</span>
        System.out.println(<span class="hljs-string">"æ˜¯ä¸æ˜¯Stringåˆ—è¡¨ï¼š"</span> + isListOfType(intList, String.class)); <span class="hljs-comment">// false</span>
    }
}
</code></pre>
<h4 data-id="heading-13">å‘3ï¼šæ³›å‹ç±»é‡Œå®šä¹‰é™æ€æ³›å‹å˜é‡</h4>
<p>æˆ‘å½“åˆåœ¨æ³›å‹ç±»é‡Œå†™äº†ä¸ªstatic T staticValueï¼Œç»“æœç¼–è¯‘ç›´æ¥æŠ¥é”™ï¼Œåæ¥æ‰çŸ¥é“é™æ€å˜é‡å’Œæ³›å‹å®ä¾‹æ²¡å…³ç³»ã€‚</p>
<p><strong>è¸©å‘ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æˆ‘è¸©è¿‡çš„å‘ï¼šæ³›å‹ç±»é‡Œçš„é™æ€å˜é‡ä¸èƒ½ç”¨æ³›å‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeErasureDemo3</span>&lt;T&gt; {
    <span class="hljs-comment">// å‘ï¼šé™æ€å˜é‡ç”¨Tï¼Œç¼–è¯‘æŠ¥é”™</span>
    <span class="hljs-comment">// private static T staticValue; // Compile error: Cannot make a static reference to the non-static type T</span>
    
    <span class="hljs-comment">// å‹‰å¼ºèƒ½å†™ï¼Œä½†æ²¡æ„ä¹‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;?&gt; staticList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong><br/>
é™æ€å˜é‡å±äºâ€œç±»â€ï¼Œä¸æ˜¯å±äºâ€œå®ä¾‹â€ã€‚æ¯”å¦‚æˆ‘åˆ›å»ºTypeErasureDemo3å’ŒTypeErasureDemo3ï¼Œè¿™ä¸¤ä¸ªå®ä¾‹å…±äº«åŒä¸€ä¸ªé™æ€å˜é‡ï¼Œç¼–è¯‘å™¨æ²¡æ³•ç»™é™æ€å˜é‡ç»‘å®šå…·ä½“çš„Tç±»å‹ã€‚</p>
<p><strong>æˆ‘çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼š<br/>
é™æ€æ–¹æ³•å•ç‹¬å®šä¹‰æ³›å‹å‚æ•°ï¼Œåˆ«ç”¨ç±»çš„æ³›å‹å‚æ•°ï¼›é™æ€å˜é‡è¦ä¹ˆç”¨å…·ä½“ç±»å‹ï¼Œè¦ä¹ˆç”¨?ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼šé™æ€æ–¹æ³•è‡ªå·±å®šä¹‰æ³›å‹å‚æ•°
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeErasureDemo3Fix</span> {
    <span class="hljs-comment">// é™æ€å˜é‡ï¼šç”¨å…·ä½“ç±»å‹ï¼Œåˆ«ç”¨æ³›å‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;String&gt; staticStrList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-comment">// é™æ€æ³›å‹æ–¹æ³•ï¼šè‡ªå·±å®šä¹‰&lt;T&gt;ï¼Œå’Œç±»æ— å…³</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">addElement</span><span class="hljs-params">(List&lt;T&gt; list, T element)</span> {
        list.add(element);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; strList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        List&lt;Integer&gt; intList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// é™æ€æ–¹æ³•èƒ½æ”¯æŒä¸åŒç±»å‹ï¼Œå¥½ç”¨ï¼</span>
        addElement(strList, <span class="hljs-string">"Java"</span>);
        addElement(intList, <span class="hljs-number">123</span>);
        
        System.out.println(strList); <span class="hljs-comment">// [Java]</span>
        System.out.println(intList); <span class="hljs-comment">// [123]</span>
    }
}
</code></pre>
<h4 data-id="heading-14">å‘4ï¼štry-catchæ•è·æ³›å‹å¼‚å¸¸</h4>
<p>æˆ‘å½“åˆæƒ³è‡ªå®šä¹‰ä¸€ä¸ªæ³›å‹å¼‚å¸¸ï¼Œç„¶åç”¨catchæ•è·GenericExceptionï¼Œç»“æœç¼–è¯‘æŠ¥é”™ã€‚</p>
<p><strong>è¸©å‘ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æˆ‘è¸©è¿‡çš„å‘ï¼šæ•è·æ³›å‹å¼‚å¸¸
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeErasureDemo4</span> {
    <span class="hljs-comment">// è‡ªå®šä¹‰æ³›å‹å¼‚å¸¸ï¼ˆç¼–è¯‘ä¸æŠ¥é”™ï¼Œä½†ç”¨ä¸äº†ï¼‰</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericException</span>&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Exception</span> {
        <span class="hljs-keyword">private</span> T errorData;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">GenericException</span><span class="hljs-params">(T errorData)</span> {
            <span class="hljs-built_in">this</span>.errorData = errorData;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericException</span>&lt;&gt;(<span class="hljs-string">"æµ‹è¯•å¼‚å¸¸"</span>);
        } <span class="hljs-keyword">catch</span> (GenericException&lt;String&gt; e) { <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼šä¸è®©æ•æ³›å‹å¼‚å¸¸</span>
            e.printStackTrace();
        }
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong><br/>
å¼‚å¸¸å¤„ç†æ˜¯è¿è¡Œæ—¶çš„äº‹ï¼Œç±»å‹æ“¦é™¤åï¼ŒGenericExceptionå’ŒGenericExceptionéƒ½å˜æˆäº†GenericExceptionï¼ŒJVMåˆ†ä¸æ¸…ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ç›´æ¥ä¸è®©æ•ã€‚</p>
<p><strong>æˆ‘çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼š<br/>
åˆ«å®šä¹‰æ³›å‹å¼‚å¸¸ï¼Œæ”¹ç”¨Objectå­˜é”™è¯¯æ•°æ®ï¼Œç„¶åå†™ä¸ªæ³›å‹æ–¹æ³•å–æ•°æ®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼šéæ³›å‹å¼‚å¸¸+æ³›å‹getter
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeErasureDemo4Fix</span> {
    <span class="hljs-comment">// éæ³›å‹å¼‚å¸¸ï¼Œç”¨Objectå­˜ä»»æ„ç±»å‹æ•°æ®</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Exception</span> {
        <span class="hljs-keyword">private</span> Object errorData;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">DataException</span><span class="hljs-params">(Object errorData)</span> {
            <span class="hljs-built_in">this</span>.errorData = errorData;
        }
        
        <span class="hljs-comment">// æ³›å‹æ–¹æ³•ï¼šå®‰å…¨å–æ•°æ®ï¼Œè‡ªå·±æ§åˆ¶ç±»å‹è½¬æ¢</span>
        <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getErrorData</span><span class="hljs-params">(Class&lt;T&gt; type)</span> {
            <span class="hljs-keyword">if</span> (type.isInstance(errorData)) {
                <span class="hljs-keyword">return</span> type.cast(errorData);
            }
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassCastException</span>(<span class="hljs-string">"ç±»å‹å¯¹ä¸ä¸Š"</span>);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataException</span>(<span class="hljs-string">"å­—ç¬¦ä¸²é”™è¯¯"</span>);
            <span class="hljs-comment">// throw new DataException(12345); // ä¹Ÿèƒ½ä¼ æ•´æ•°</span>
        } <span class="hljs-keyword">catch</span> (DataException e) {
            <span class="hljs-comment">// å®‰å…¨å–æ•°æ®ï¼Œä¸ä¼šä¹±è½¬</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">errorMsg</span> <span class="hljs-operator">=</span> e.getErrorData(String.class);
            System.out.println(<span class="hljs-string">"é”™è¯¯ä¿¡æ¯ï¼š"</span> + errorMsg);
        }
    }
}
</code></pre>
<h4 data-id="heading-15">å‘5ï¼šæ³›å‹æ–¹æ³•é‡è½½</h4>
<p>æˆ‘å½“åˆå†™äº†ä¸¤ä¸ªprocessDataæ–¹æ³•ï¼Œä¸€ä¸ªæ¥Listï¼Œä¸€ä¸ªæ¥Listï¼Œç»“æœç¼–è¯‘æŠ¥é”™ï¼Œè¯´æ–¹æ³•ç­¾åé‡å¤ã€‚</p>
<p><strong>è¸©å‘ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æˆ‘è¸©è¿‡çš„å‘ï¼šæ³›å‹æ–¹æ³•é‡è½½å†²çª
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeErasureDemo5</span> {
    <span class="hljs-comment">// æ–¹æ³•1ï¼šå¤„ç†Stringåˆ—è¡¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processData</span><span class="hljs-params">(List&lt;String&gt; list)</span> {
        System.out.println(<span class="hljs-string">"å¤„ç†å­—ç¬¦ä¸²"</span>);
    }
    
    <span class="hljs-comment">// æ–¹æ³•2ï¼šå¤„ç†Integeråˆ—è¡¨ï¼Œç¼–è¯‘æŠ¥é”™</span>
    <span class="hljs-comment">// public static void processData(List&lt;Integer&gt; list) { // ç¼–è¯‘é”™è¯¯ï¼šç­¾åæ“¦é™¤åä¸€æ ·</span>
    <span class="hljs-comment">//     System.out.println("å¤„ç†æ•´æ•°");</span>
    <span class="hljs-comment">// }</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong><br/>
ç±»å‹æ“¦é™¤åï¼ŒListå’ŒListéƒ½å˜æˆäº†Listï¼Œä¸¤ä¸ªæ–¹æ³•çš„ç­¾åéƒ½æ˜¯processData(List)ï¼Œç¼–è¯‘å™¨åˆ†ä¸æ¸…ï¼Œæ‰€ä»¥ä¸è®©é‡è½½ã€‚</p>
<p><strong>æˆ‘çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼š<br/>
è¦ä¹ˆåŠ ä¸ªClasså‚æ•°åŒºåˆ†ç­¾åï¼Œè¦ä¹ˆç›´æ¥æ”¹æ–¹æ³•åã€‚æˆ‘ä¸€èˆ¬åŠ ç±»å‹ä»¤ç‰Œï¼Œä¸ç”¨æ”¹æ–¹æ³•åã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼šåŠ ç±»å‹ä»¤ç‰ŒåŒºåˆ†é‡è½½
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeErasureDemo5Fix</span> {
    <span class="hljs-comment">// é€šç”¨æ–¹æ³•ï¼šåŠ ç±»å‹ä»¤ç‰Œï¼Œåˆ¤æ–­ç±»å‹åå¤„ç†</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">processData</span><span class="hljs-params">(List&lt;T&gt; list, Class&lt;T&gt; type)</span> {
        <span class="hljs-keyword">if</span> (type == String.class) {
            System.out.println(<span class="hljs-string">"å¤„ç†å­—ç¬¦ä¸²åˆ—è¡¨ï¼š"</span> + list);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type == Integer.class) {
            System.out.println(<span class="hljs-string">"å¤„ç†æ•´æ•°åˆ—è¡¨ï¼š"</span> + list);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"å¤„ç†å…¶ä»–ç±»å‹"</span>);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; strList = List.of(<span class="hljs-string">"Java"</span>, <span class="hljs-string">"æ³›å‹"</span>);
        List&lt;Integer&gt; intList = List.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
        
        <span class="hljs-comment">// ä¼ ç±»å‹ä»¤ç‰Œï¼Œå°±èƒ½åŒºåˆ†äº†</span>
        processData(strList, String.class);
        processData(intList, Integer.class);
    }
}
</code></pre>
<h2 data-id="heading-16">ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šé€šç”¨æ•°æ®æ ¡éªŒå·¥å…·ç±»</h2>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ï¼Œæˆ‘æŠŠä¸Šé¢çš„çŸ¥è¯†ç‚¹éƒ½æ‰è¿›ä¸€ä¸ªâ€œé€šç”¨æ•°æ®æ ¡éªŒå·¥å…·ç±»â€é‡Œï¼Œè¿™æ˜¯æˆ‘å®é™…é¡¹ç›®é‡Œç”¨æ¥æ ¡éªŒå„ç§æ•°æ®çš„ï¼Œèƒ½é¿å¼€å‰é¢è¯´çš„æ‰€æœ‰å‘ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥æ‹¿å»æ”¹æ”¹ç”¨ã€‚</p>
<h3 data-id="heading-17">1. éœ€æ±‚è¯´æ˜</h3>
<p>æˆ‘åšçš„è¿™ä¸ªå·¥å…·ç±»ï¼Œè¦å®ç°è¿™å‡ ä¸ªåŠŸèƒ½ï¼š</p>
<ol>
<li>æ ¡éªŒä»»æ„ç±»å‹çš„Listé‡Œçš„å…ƒç´ æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²éç©ºã€æ•°å€¼å¤§äº0ï¼‰ï¼›</li>
<li>æ‰¹é‡æŠŠç¬¦åˆè§„åˆ™çš„æ•°æ®å†™åˆ°å¦ä¸€ä¸ªé›†åˆé‡Œï¼›</li>
<li>èƒ½è·å–æ ¡éªŒå¤±è´¥çš„æ•°æ®ï¼Œè¿˜èƒ½æŠ›å‡ºå¸¦é”™è¯¯æ•°æ®çš„å¼‚å¸¸ï¼›</li>
<li>é¿å¼€æ³›å‹çš„å„ç§å‘ï¼Œä¿è¯ç±»å‹å®‰å…¨ã€‚</li>
</ol>
<h3 data-id="heading-18">2. å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Objects;
<span class="hljs-keyword">import</span> java.util.function.Predicate;

<span class="hljs-comment">/**
 * é€šç”¨æ•°æ®æ ¡éªŒå·¥å…·ç±»
 * åŠŸèƒ½ï¼šæ ¡éªŒä»»æ„ç±»å‹æ•°æ®ã€æ‰¹é‡å†™å…¥æœ‰æ•ˆæ•°æ®ã€è¿”å›æ— æ•ˆæ•°æ®ã€æŠ›å‡ºå¸¦é”™è¯¯ä¿¡æ¯çš„å¼‚å¸¸
 * é¿å‘ç‚¹ï¼šé€šé…ç¬¦ç”¨æ³•ã€ç±»å‹æ“¦é™¤ã€é™æ€æ³›å‹ã€å¼‚å¸¸å¤„ç†
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericDataValidator</span>&lt;T&gt; {
    <span class="hljs-comment">// é™æ€å¸¸é‡ï¼šä¸ç”¨æ³›å‹ï¼Œé¿å…é™æ€æ³›å‹å‘</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_ERROR_MSG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"æ•°æ®æ ¡éªŒå¤±è´¥"</span>;
    <span class="hljs-comment">// ç±»å‹ä»¤ç‰Œï¼šè§£å†³ç±»å‹æ“¦é™¤åæ²¡æ³•åˆ¤æ–­ç±»å‹çš„é—®é¢˜</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Class&lt;T&gt; typeToken;

    <span class="hljs-comment">// æ„é€ æ–¹æ³•ï¼šä¼ å…¥ç±»å‹ä»¤ç‰Œï¼Œå¿…é¡»çš„ï¼</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">GenericDataValidator</span><span class="hljs-params">(Class&lt;T&gt; typeToken)</span> {
        <span class="hljs-built_in">this</span>.typeToken = typeToken;
    }

    <span class="hljs-comment">/**
     * æ ¡éªŒæ‰€æœ‰å…ƒç´ æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼ˆä¸Šç•Œé€šé…ç¬¦ï¼šåªè¯»å–ï¼Œç”Ÿäº§è€…ï¼‰
     * <span class="hljs-doctag">@param</span> dataList å¾…æ ¡éªŒé›†åˆï¼ˆTæˆ–Tçš„å­ç±»ï¼‰
     * <span class="hljs-doctag">@param</span> rule æ ¡éªŒè§„åˆ™ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²éç©ºã€æ•°å€¼å¤§äº0ï¼‰
     * <span class="hljs-doctag">@return</span> true=å…¨éƒ¨ç¬¦åˆï¼Œfalse=æœ‰ä¸ç¬¦åˆçš„
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">validateAll</span><span class="hljs-params">(List&lt;? extends T&gt; dataList, Predicate&lt;T&gt; rule)</span> {
        <span class="hljs-keyword">if</span> (dataList == <span class="hljs-literal">null</span> || dataList.isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">for</span> (T data : dataList) {
            <span class="hljs-comment">// å…ˆåˆ¤æ–­ç±»å‹å¯¹ä¸å¯¹ï¼Œé¿å…ç±»å‹æ“¦é™¤å¯¼è‡´çš„è½¬æ¢å¼‚å¸¸</span>
            <span class="hljs-keyword">if</span> (!typeToken.isInstance(data)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassCastException</span>(<span class="hljs-string">"é›†åˆé‡Œæœ‰ä¸æ˜¯"</span> + typeToken.getName() + <span class="hljs-string">"ç±»å‹çš„æ•°æ®"</span>);
            }
            <span class="hljs-comment">// å†æ ¡éªŒè§„åˆ™</span>
            <span class="hljs-keyword">if</span> (!rule.test(data)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-comment">/**
     * æ‰¹é‡å†™å…¥æœ‰æ•ˆæ•°æ®ï¼ˆä¸‹ç•Œé€šé…ç¬¦ï¼šåªå†™å…¥ï¼Œæ¶ˆè´¹è€…ï¼‰
     * <span class="hljs-doctag">@param</span> targetList ç›®æ ‡é›†åˆï¼ˆTæˆ–Tçš„çˆ¶ç±»ï¼‰
     * <span class="hljs-doctag">@param</span> sourceList æºæ•°æ®é›†åˆ
     * <span class="hljs-doctag">@param</span> rule æ ¡éªŒè§„åˆ™
     * <span class="hljs-doctag">@return</span> æˆåŠŸå†™å…¥çš„æ•°é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addValidData</span><span class="hljs-params">(List&lt;? <span class="hljs-built_in">super</span> T&gt; targetList, List&lt;? extends T&gt; sourceList, Predicate&lt;T&gt; rule)</span> {
        <span class="hljs-comment">// å…ˆåˆ¤ç©ºï¼Œé¿å…ç©ºæŒ‡é’ˆ</span>
        Objects.requireNonNull(targetList, <span class="hljs-string">"ç›®æ ‡é›†åˆä¸èƒ½ä¸ºnull"</span>);
        Objects.requireNonNull(sourceList, <span class="hljs-string">"æºæ•°æ®é›†åˆä¸èƒ½ä¸ºnull"</span>);
        
        <span class="hljs-type">int</span> <span class="hljs-variable">successCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (T data : sourceList) {
            <span class="hljs-keyword">if</span> (rule.test(data)) {
                targetList.add(data); <span class="hljs-comment">// ä¸‹ç•Œé€šé…ç¬¦ï¼Œå†™å…¥å®‰å…¨</span>
                successCount++;
            }
        }
        <span class="hljs-keyword">return</span> successCount;
    }

    <span class="hljs-comment">/**
     * è·å–æ ¡éªŒå¤±è´¥çš„æ•°æ®ï¼ˆé™æ€æ³›å‹æ–¹æ³•ï¼šè‡ªå·±å®šä¹‰&lt;T&gt;ï¼Œé¿å¼€é™æ€æ³›å‹å‘ï¼‰
     * <span class="hljs-doctag">@param</span> dataList å¾…æ ¡éªŒé›†åˆ
     * <span class="hljs-doctag">@param</span> rule æ ¡éªŒè§„åˆ™
     * <span class="hljs-doctag">@param</span> &lt;T&gt; æ•°æ®ç±»å‹
     * <span class="hljs-doctag">@return</span> å¤±è´¥çš„æ•°æ®åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="hljs-title function_">getInvalidData</span><span class="hljs-params">(List&lt;? extends T&gt; dataList, Predicate&lt;T&gt; rule)</span> {
        List&lt;T&gt; invalidList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span> (dataList == <span class="hljs-literal">null</span> || dataList.isEmpty()) {
            <span class="hljs-keyword">return</span> invalidList;
        }
        <span class="hljs-keyword">for</span> (T data : dataList) {
            <span class="hljs-keyword">if</span> (!rule.test(data)) {
                invalidList.add(data);
            }
        }
        <span class="hljs-keyword">return</span> invalidList;
    }

    <span class="hljs-comment">/**
     * è‡ªå®šä¹‰å¼‚å¸¸ï¼šéæ³›å‹ï¼Œç”¨Objectå­˜é”™è¯¯æ•°æ®ï¼ˆé¿å¼€æ³›å‹å¼‚å¸¸å‘ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ValidationException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object invalidData; <span class="hljs-comment">// å­˜ä»»æ„ç±»å‹çš„é”™è¯¯æ•°æ®</span>

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">ValidationException</span><span class="hljs-params">(String message, Object invalidData)</span> {
            <span class="hljs-built_in">super</span>(message);
            <span class="hljs-built_in">this</span>.invalidData = invalidData;
        }

        <span class="hljs-comment">// æ³›å‹æ–¹æ³•ï¼šå®‰å…¨è·å–é”™è¯¯æ•°æ®</span>
        <span class="hljs-keyword">public</span> &lt;E&gt; E <span class="hljs-title function_">getInvalidData</span><span class="hljs-params">(Class&lt;E&gt; type)</span> {
            <span class="hljs-keyword">if</span> (type.isInstance(invalidData)) {
                <span class="hljs-keyword">return</span> type.cast(invalidData);
            }
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassCastException</span>(<span class="hljs-string">"é”™è¯¯æ•°æ®ç±»å‹ä¸å¯¹ï¼Œæƒ³è¦ï¼š"</span> + type.getName());
        }
    }

    <span class="hljs-comment">/**
     * ä¸¥æ ¼æ ¡éªŒï¼šå¤±è´¥å°±æŠ›å¼‚å¸¸
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">strictValidate</span><span class="hljs-params">(List&lt;? extends T&gt; dataList, Predicate&lt;T&gt; rule)</span> {
        List&lt;T&gt; invalidData = getInvalidData(dataList, rule);
        <span class="hljs-keyword">if</span> (!invalidData.isEmpty()) {
            <span class="hljs-comment">// æŠ›éæ³›å‹å¼‚å¸¸ï¼Œå¸¦é”™è¯¯æ•°æ®</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationException</span>(DEFAULT_ERROR_MSG, invalidData.get(<span class="hljs-number">0</span>));
        }
    }

    <span class="hljs-comment">// æµ‹è¯•æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. å­—ç¬¦ä¸²æ ¡éªŒç¤ºä¾‹ï¼ˆæ ¡éªŒéç©ºéç©ºç™½ï¼‰</span>
        GenericDataValidator&lt;String&gt; strValidator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericDataValidator</span>&lt;&gt;(String.class);
        List&lt;String&gt; strList = List.of(<span class="hljs-string">"Java"</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"æ³›å‹"</span>, <span class="hljs-string">"   "</span>, <span class="hljs-string">"é«˜çº§ç‰¹æ€§"</span>);
        <span class="hljs-comment">// æ ¡éªŒè§„åˆ™ï¼šéç©ºä¸”éç©ºç™½</span>
        Predicate&lt;String&gt; strRule = s -&gt; s != <span class="hljs-literal">null</span> &amp;&amp; !s.isBlank();
        
        <span class="hljs-comment">// æ ¡éªŒæ‰€æœ‰æ•°æ®</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">allValid</span> <span class="hljs-operator">=</span> strValidator.validateAll(strList, strRule);
        System.out.println(<span class="hljs-string">"å­—ç¬¦ä¸²æ˜¯å¦å…¨éƒ¨æœ‰æ•ˆï¼š"</span> + allValid); <span class="hljs-comment">// false</span>
        
        <span class="hljs-comment">// è·å–æ— æ•ˆæ•°æ®</span>
        List&lt;String&gt; invalidStr = GenericDataValidator.getInvalidData(strList, strRule);
        System.out.println(<span class="hljs-string">"æ— æ•ˆå­—ç¬¦ä¸²ï¼š"</span> + invalidStr); <span class="hljs-comment">// ["", "   "]</span>
        
        <span class="hljs-comment">// æ‰¹é‡å†™å…¥æœ‰æ•ˆæ•°æ®åˆ°Objecté›†åˆï¼ˆä¸‹ç•Œé€šé…ç¬¦ï¼‰</span>
        List&lt;Object&gt; targetList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-type">int</span> <span class="hljs-variable">successCount</span> <span class="hljs-operator">=</span> strValidator.addValidData(targetList, strList, strRule);
        System.out.println(<span class="hljs-string">"æˆåŠŸå†™å…¥æœ‰æ•ˆå­—ç¬¦ä¸²æ•°é‡ï¼š"</span> + successCount); <span class="hljs-comment">// 3</span>
        System.out.println(<span class="hljs-string">"ç›®æ ‡é›†åˆå†…å®¹ï¼š"</span> + targetList); <span class="hljs-comment">// [Java, æ³›å‹, é«˜çº§ç‰¹æ€§]</span>
        
        <span class="hljs-comment">// ä¸¥æ ¼æ ¡éªŒï¼Œå¤±è´¥æŠ›å¼‚å¸¸</span>
        <span class="hljs-keyword">try</span> {
            strValidator.strictValidate(strList, strRule);
        } <span class="hljs-keyword">catch</span> (ValidationException e) {
            <span class="hljs-type">String</span> <span class="hljs-variable">invalidData</span> <span class="hljs-operator">=</span> e.getInvalidData(String.class);
            System.out.println(<span class="hljs-string">"æ ¡éªŒå¤±è´¥ï¼Œé”™è¯¯æ•°æ®ï¼š"</span> + invalidData); <span class="hljs-comment">// ""</span>
        }

        <span class="hljs-comment">// 2. æ•´æ•°æ ¡éªŒç¤ºä¾‹ï¼ˆæ ¡éªŒå¤§äº0ï¼‰</span>
        GenericDataValidator&lt;Integer&gt; intValidator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericDataValidator</span>&lt;&gt;(Integer.class);
        List&lt;Integer&gt; intList = List.of(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, -<span class="hljs-number">5</span>, <span class="hljs-number">30</span>);
        Predicate&lt;Integer&gt; intRule = num -&gt; num &gt; <span class="hljs-number">0</span>;
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">intAllValid</span> <span class="hljs-operator">=</span> intValidator.validateAll(intList, intRule);
        System.out.println(<span class="hljs-string">"æ•´æ•°æ˜¯å¦å…¨éƒ¨æœ‰æ•ˆï¼š"</span> + intAllValid); <span class="hljs-comment">// false</span>
        List&lt;Integer&gt; invalidInt = GenericDataValidator.getInvalidData(intList, intRule);
        System.out.println(<span class="hljs-string">"æ— æ•ˆæ•´æ•°ï¼š"</span> + invalidInt); <span class="hljs-comment">// [-5]</span>
    }
}
</code></pre>
<h3 data-id="heading-19">3. è¿™ä¸ªå·¥å…·ç±»çš„äº®ç‚¹</h3>
<ol>
<li><strong>é€šé…ç¬¦ç”¨å¾—å¯¹</strong>ï¼šè¯»å–æ•°æ®ç”¨? extends Tï¼Œå†™å…¥æ•°æ®ç”¨? super Tï¼Œä¸¥æ ¼éµå®ˆPECSåŸåˆ™ï¼Œä¸ä¼šæœ‰ç¼–è¯‘æŠ¥é”™ï¼›</li>
<li><strong>é¿å¼€äº†æ‰€æœ‰ç±»å‹æ“¦é™¤çš„å‘</strong>ï¼šç”¨ç±»å‹ä»¤ç‰Œåˆ¤æ–­ç±»å‹ã€é™æ€æ–¹æ³•è‡ªå·±å®šä¹‰æ³›å‹ã€éæ³›å‹å¼‚å¸¸å­˜é”™è¯¯æ•°æ®ã€ç”¨Listä»£æ›¿æ•°ç»„ï¼›</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šæ‰€æœ‰æ“ä½œéƒ½åšäº†ç±»å‹æ ¡éªŒï¼Œä¸ä¼šå‡ºç°è¿è¡Œæ—¶ClassCastExceptionï¼›</li>
<li><strong>å®ç”¨æ€§å¼º</strong>ï¼šæˆ‘åœ¨é¡¹ç›®é‡Œæ ¡éªŒè¡¨å•æ•°æ®ã€æ‰¹é‡å…¥åº“æ•°æ®æ—¶ï¼Œéƒ½æ˜¯ç›´æ¥ç”¨è¿™ä¸ªå·¥å…·ç±»ï¼Œæ”¹æ”¹æ ¡éªŒè§„åˆ™å°±è¡Œã€‚</li>
</ol>
<h2 data-id="heading-20">å››ã€æˆ‘çš„æ³›å‹é¿å‘æ¸…å•</h2>
<p>æœ€åç»™å¤§å®¶æ•´ç†ä¸ªé¿å‘æ¸…å•ï¼Œéƒ½æ˜¯æˆ‘è¸©è¿‡çš„æ•™è®­ï¼Œè®°ä¸‹æ¥èƒ½å°‘èµ°å¾ˆå¤šå¼¯è·¯ï¼š</p>








































<table><thead><tr><th>å‘çš„åœºæ™¯</th><th>ä¸ºå•¥ä¼šå‘</th><th>æˆ‘å’‹è§£å†³çš„</th></tr></thead><tbody><tr><td>æ³›å‹æ•°ç»„åˆ›å»ºå¤±è´¥</td><td>ç±»å‹æ“¦é™¤åæ•°ç»„åˆ†ä¸æ¸…æ³›å‹ç±»å‹</td><td>ç”¨List&lt;List&gt;ä»£æ›¿æ³›å‹æ•°ç»„</td></tr><tr><td>instanceofåˆ¤æ–­æ³›å‹ç±»å‹</td><td>è¿è¡Œæ—¶æ²¡æ³›å‹ä¿¡æ¯</td><td>ä¼ Classç±»å‹ä»¤ç‰Œï¼Œéå†åˆ¤æ–­å…ƒç´ ç±»å‹</td></tr><tr><td>é™æ€å˜é‡ç”¨æ³›å‹</td><td>é™æ€å˜é‡å±äºç±»ï¼Œæ²¡æ³•ç»‘å®šå®ä¾‹æ³›å‹</td><td>é™æ€æ–¹æ³•è‡ªå·±å®šä¹‰æ³›å‹å‚æ•°ï¼Œé™æ€å˜é‡ç”¨å…·ä½“ç±»å‹</td></tr><tr><td>catchæ•è·æ³›å‹å¼‚å¸¸</td><td>è¿è¡Œæ—¶æ³›å‹ä¿¡æ¯è¢«æ“¦é™¤ï¼ŒJVMåˆ†ä¸æ¸…</td><td>ä¸ç”¨æ³›å‹å¼‚å¸¸ï¼Œç”¨Objectå­˜é”™è¯¯æ•°æ®ï¼Œæ‰‹åŠ¨è½¬å‹</td></tr><tr><td>æ³›å‹æ–¹æ³•é‡è½½å†²çª</td><td>æ“¦é™¤åæ–¹æ³•ç­¾åä¸€æ ·</td><td>åŠ Classå‚æ•°åŒºåˆ†ï¼Œæˆ–æ”¹æ–¹æ³•å</td></tr><tr><td>é€šé…ç¬¦å†™å…¥æ•°æ®æŠ¥é”™</td><td>è¿åPECSåŸåˆ™</td><td>è¯»æ•°æ®ç”¨? extends Tï¼Œå†™æ•°æ®ç”¨? super T</td></tr></tbody></table>
<h2 data-id="heading-21">äº”ã€æ€»ç»“</h2>
<p>æ³›å‹è¿™ä¸œè¥¿ï¼ŒçœŸçš„ä¸ç”¨æ­»è®°ç¡¬èƒŒæ¦‚å¿µï¼Œæ ¸å¿ƒå°±ä¸¤ç‚¹ï¼š</p>
<ol>
<li>é€šé…ç¬¦è®°ä½PECSåŸåˆ™â€”â€”ç”Ÿäº§è€…ï¼ˆè¯»æ•°æ®ï¼‰ç”¨extendsï¼Œæ¶ˆè´¹è€…ï¼ˆå†™æ•°æ®ï¼‰ç”¨superï¼›</li>
<li>ç±»å‹æ“¦é™¤è®°ä½â€œç¼–è¯‘æœŸç®¡ç±»å‹ï¼Œè¿è¡Œæ—¶æ²¡æ³›å‹â€ï¼Œé‡åˆ°å‘å°±ç”¨ç±»å‹ä»¤ç‰Œã€Listä»£æ›¿æ•°ç»„ã€éæ³›å‹å¼‚å¸¸è¿™äº›åŠæ³•è¡¥ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3-watchEffect]]></title>    <link>https://juejin.cn/post/7580329353352839214</link>    <guid>https://juejin.cn/post/7580329353352839214</guid>    <pubDate>2025-12-06T13:39:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580329353352839214" data-draft-id="7580270531470393390" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3-watchEffect"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-06T13:39:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="YaeZed"/> <meta itemprop="url" content="https://juejin.cn/user/3977350021390107"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3-watchEffect
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3977350021390107/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    YaeZed
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T13:39:47.000Z" title="Sat Dec 06 2025 13:39:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="gml">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#222;color:silver}.hljs-keyword{color:#ffb871;font-weight:700}.hljs-built_in{color:#ffb871}.hljs-literal{color:#ff8080}.hljs-symbol{color:#58e55a}.hljs-comment{color:#5b995b}.hljs-string{color:#ff0}.hljs-number{color:#ff8080}.hljs-addition,.hljs-attribute,.hljs-bullet,.hljs-code,.hljs-deletion,.hljs-doctag,.hljs-function,.hljs-link,.hljs-meta,.hljs-meta-keyword,.hljs-name,.hljs-quote,.hljs-regexp,.hljs-section,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:silver}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>watchEffect</code> æ˜¯ Vue 3 ç»„åˆå¼ API æä¾›çš„å¦ä¸€ä¸ªä¾¦å¬å™¨ã€‚å®ƒå’Œ <code>watch</code> ç›®æ ‡ä¸€è‡´ï¼ˆåœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå‰¯ä½œç”¨ï¼‰ï¼Œä½†ä½¿ç”¨æ–¹å¼æ›´ç®€æ´ï¼Œå› ä¸ºå®ƒ<strong>ä¼šè‡ªåŠ¨è¿½è¸ªä¾èµ–</strong>ã€‚</p>
<h2 data-id="heading-0">1.æ ¸å¿ƒç†å¿µ</h2>
<p><code>watchEffect</code> çš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š <strong>â€œç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶è‡ªåŠ¨è¿½è¸ªå‡½æ•°å†…éƒ¨ç”¨åˆ°çš„æ‰€æœ‰å“åº”å¼æ•°æ®ï¼Œåœ¨å®ƒä»¬å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œã€‚â€</strong></p>
<p>å®ƒåªéœ€è¦ä¸€ä¸ªå‚æ•°ï¼šä¸€ä¸ªå‡½æ•°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>User ID: {{ userId }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeUser"</span>&gt;</span>åˆ‡æ¢ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, watchEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> userId = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>);

<span class="hljs-comment">// 1. ç«‹å³æ‰§è¡Œï¼š</span>
<span class="hljs-comment">// watchEffect ä¼šåœ¨ &lt;script setup&gt; æ‰§è¡Œåˆ°è¿™é‡Œæ—¶ç«‹å³è¿è¡Œä¸€æ¬¡</span>
<span class="hljs-comment">// å®ƒä¼šè‡ªåŠ¨â€œå‘ç°â€å†…éƒ¨ç”¨åˆ°äº† userId.value</span>
<span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// å½“ watchEffect è¿è¡Œæ—¶ï¼Œå®ƒä¼šè¿½è¸ªæ‰€æœ‰è¢«â€œè¯»å–â€çš„ .value</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`(watchEffect) æ­£åœ¨è·å– ID: <span class="hljs-subst">${userId.value}</span> çš„æ•°æ®...`</span>);
  
  <span class="hljs-comment">// å‡è®¾çš„ API è°ƒç”¨</span>
  <span class="hljs-comment">// fetchUserData(userId.value);</span>
});

<span class="hljs-comment">// 2. è‡ªåŠ¨è¿½è¸ªå˜åŒ–ï¼š</span>
<span class="hljs-comment">// å½“ userId å˜åŒ–æ—¶ï¼Œä¸Šé¢çš„å‡½æ•°ä¼š *è‡ªåŠ¨* é‡æ–°è¿è¡Œ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeUser</span> = (<span class="hljs-params"/>) =&gt; {
  userId.<span class="hljs-property">value</span>++;
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<h2 data-id="heading-1">2.<code>watchEffect</code> ä¸ <code>watch</code> çš„æ ¸å¿ƒåŒºåˆ«</h2>






























<table><thead><tr><th align="center">ç‰¹æ€§</th><th align="center"><code>watch</code></th><th align="center"><code>watchEffect</code></th></tr></thead><tbody><tr><td align="center">ä¾èµ–æº</td><td align="center"><strong>æ‰‹åŠ¨æŒ‡å®š</strong> (å¿…é¡»æ˜ç¡®å‘Šè¯‰å®ƒä¾¦å¬è°)</td><td align="center"><strong>è‡ªåŠ¨è¿½è¸ª</strong> (å®ƒä¼šä¾¦å¬å‡½æ•°ä½“<strong>å†…éƒ¨</strong>ç”¨åˆ°çš„æ‰€æœ‰æ•°æ®)</td></tr><tr><td align="center">ç«‹å³æ‰§è¡Œ</td><td align="center">é»˜è®¤<strong>ä¸ä¼š</strong> (éœ€é…ç½® <code>{ immediate: true }</code>)</td><td align="center"><strong>é»˜è®¤ç«‹å³</strong>æ‰§è¡Œ</td></tr><tr><td align="center">è®¿é—®æ—§å€¼</td><td align="center"><strong>å¯ä»¥</strong> (å›è°ƒå‚æ•° <code>(newVal, oldVal)</code>)</td><td align="center"><strong>ä¸å¯ä»¥</strong> (å›è°ƒä¸æ¥æ”¶ä»»ä½•å‚æ•°)</td></tr><tr><td align="center">ä¾§é‡ç‚¹</td><td align="center">é€‚åˆç²¾ç¡®æ§åˆ¶</td><td align="center">æ›´â€œè½»é‡çº§â€ï¼Œé€‚åˆç®€å•çš„ã€è‡ªåŠ¨åŒ–çš„å‰¯ä½œç”¨</td></tr></tbody></table>
<h2 data-id="heading-2">3.<code>watchEffect</code> çš„é«˜çº§ç”¨æ³•</h2>
<ul>
<li>åœæ­¢ä¾¦å¬ï¼š<code>watchEffect</code> åŒæ ·ä¼šè¿”å›ä¸€ä¸ªâ€œåœæ­¢å¥æŸ„â€ (Stop Handle) å‡½æ•°ã€‚</li>
</ul>
<blockquote>
<p>åœ¨ <code>&lt;script setup&gt;</code> ä¸­ï¼Œå®ƒä¹Ÿä¼šè‡ªåŠ¨ç»‘å®šåˆ°ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶åœ¨ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨åœæ­¢ï¼Œæ‰€ä»¥ä½ é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨åœæ­¢ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { watchEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> stopHandle = <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ...</span>
});

<span class="hljs-comment">// åœ¨æœªæ¥çš„æŸä¸ªæ—¶åˆ»</span>
<span class="hljs-title function_">stopHandle</span>(); <span class="hljs-comment">// åœæ­¢è¿™ä¸ª effect</span>
</code></pre>
<ul>
<li>æ¸…é™¤å‰¯ä½œç”¨ (<code>onInvalidate</code>):<code>watchEffect</code> çš„å›è°ƒå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ª <code>onInvalidate</code> å‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªå‡½æ•°ç”¨äºæ³¨å†Œä¸€ä¸ªâ€œå¤±æ•ˆâ€æ—¶çš„å›è°ƒã€‚</li>
</ul>
<blockquote>
<p>å½“ <code>watchEffect</code> å³å°†<strong>é‡æ–°è¿è¡Œ</strong>æ—¶ï¼ˆæˆ–åœ¨ä¾¦å¬å™¨è¢«<strong>åœæ­¢</strong>æ—¶ï¼‰ï¼Œ<code>onInvalidate</code> æ³¨å†Œçš„å›è°ƒä¼šå…ˆæ‰§è¡Œã€‚è¿™åœ¨å¤„ç†<strong>å¼‚æ­¥æ“ä½œç«æ€</strong>æ—¶éå¸¸æœ‰ç”¨ï¼ˆä¾‹å¦‚ï¼ŒçŸ­æ—¶é—´å†…å¤šæ¬¡è§¦å‘ API è¯·æ±‚ï¼‰ã€‚</p>
<p>ä¸¾ä¸ªæ —å­</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>onInvalidate<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åœ¨æ§åˆ¶å°ä¸­æŸ¥çœ‹æ—¥å¿—ï¼Œå¹¶å¿«é€Ÿè¾“å…¥:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"query"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰æŸ¥è¯¢: {{ query }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, watchEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> query = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'vue'</span>);

<span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">(<span class="hljs-params">onInvalidate</span>) =&gt;</span> {
  <span class="hljs-comment">// 1. åˆ›å»º AbortController</span>
  <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
  <span class="hljs-keyword">const</span> { signal } = controller;

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`(Fetch) æ­£åœ¨æœç´¢: <span class="hljs-subst">${query.value}</span>`</span>);
  
  <span class="hljs-comment">// 2. ä½¿ç”¨ Open Library çš„ API</span>
  <span class="hljs-comment">// å¯¹ URL è¿›è¡Œäº†ç¼–ç  (encodeURIComponent) ä»¥å¤„ç†ç‰¹æ®Šå­—ç¬¦</span>
  <span class="hljs-keyword">const</span> url = <span class="hljs-string">`https://openlibrary.org/search.json?q=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(query.value)}</span>`</span>;

  <span class="hljs-title function_">fetch</span>(url, { signal })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>()) <span class="hljs-comment">// å°†å“åº”è§£æä¸º JSON</span>
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
      <span class="hljs-comment">// 3. æˆåŠŸè·å–æ•°æ®</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`(Success) æˆåŠŸè·å–: <span class="hljs-subst">${query.value}</span>`</span>, data.<span class="hljs-property">docs</span>.<span class="hljs-property">length</span>, <span class="hljs-string">'æ¡ç»“æœ'</span>);
    })
    .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
      <span class="hljs-comment">// 4. æ•è·é”™è¯¯</span>
      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) {
        <span class="hljs-comment">//  é¢„æœŸçš„ä¸­æ­¢é”™è¯¯</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`(Abort) å·²å–æ¶ˆä¸Šä¸€æ¬¡è¯·æ±‚: <span class="hljs-subst">${query.value}</span>`</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å…¶ä»–ç½‘ç»œé”™è¯¯</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Fetch é”™è¯¯:'</span>, err);
      }
    });

  <span class="hljs-comment">// 5. æ³¨å†Œâ€œå¤±æ•ˆâ€å›è°ƒ</span>
  <span class="hljs-title function_">onInvalidate</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'...æŸ¥è¯¢å˜åŒ–å¤ªå¿«ï¼ŒEffect å³å°†å¤±æ•ˆï¼Œä¸­æ­¢ä¸Šä¸€ä¸ªè¯·æ±‚...'</span>);
    <span class="hljs-comment">// 6. ä¸­æ­¢ä¸Šä¸€æ¬¡çš„ fetch è¯·æ±‚</span>
    controller.<span class="hljs-title function_">abort</span>();
  });
});

</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<blockquote>
<p>å½“å¿«é€Ÿè¾“å…¥<code>333</code>æ—¶ï¼Œæ§åˆ¶å°æ‰“å°</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f53d0755d93840f8ab5c6f4b07162e4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWWFlWmVk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765633310&amp;x-signature=dv1SQ8JVXB2TD01M6jsF3lwgH4E%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æ£€æŸ¥ç½‘ç»œï¼Œå‰ä¸¤æ¬¡çš„å¿«é€Ÿè¯·æ±‚éƒ½è¢«å–æ¶ˆäº†ï¼Œåªæœ‰æœ€åä¸€æ¬¡æˆåŠŸ</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43c523dfd0ad4af98a39173b6a5d4deb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWWFlWmVk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765633310&amp;x-signature=JtzSm4YmolEhlXi4BXCWVz8vne0%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">4.æ€»ç»“</h2>
<p><code>onInvalidate</code> é€‚ç”¨äºä»»ä½•<strong>æœ‰â€œæ¸…ç†â€éœ€æ±‚çš„å‰¯ä½œç”¨</strong>ï¼š</p>
<ol>
<li><strong>å–æ¶ˆå¼‚æ­¥è¯·æ±‚</strong>ï¼š(æœ€å¸¸ç”¨) <code>fetch</code>, <code>axios</code> ç­‰ã€‚</li>
<li><strong>æ¸…é™¤å®šæ—¶å™¨</strong>ï¼šæ¸…é™¤ <code>setTimeout</code> æˆ– <code>setInterval</code>ã€‚</li>
<li><strong>è§£ç»‘äº‹ä»¶ç›‘å¬å™¨</strong>ï¼šå¦‚æœåœ¨ <code>watchEffect</code> å†…éƒ¨ç”¨ <code>window.addEventListener</code> åŠ¨æ€æ·»åŠ äº†ä¸€ä¸ªäº‹ä»¶ï¼Œä½ å¯ä»¥åœ¨ <code>onInvalidate</code> ä¸­ç”¨ <code>window.removeEventListener</code> å°†å…¶ç§»é™¤ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</li>
</ol>
<p><strong>ä¸¤ä¸ªå…³é”®åŒºåˆ«ï¼š</strong></p>
<ul>
<li>
<p><strong>é˜²æŠ–/èŠ‚æµ (Debounce/Throttle)</strong> (ç”¨ <code>watch</code>)ï¼š</p>
<ul>
<li>ç›®æ ‡ï¼š<strong>å‡å°‘æ‰§è¡Œæ¬¡æ•°</strong>ã€‚</li>
<li>é€»è¾‘ï¼šâ€œç­‰ä¸€ç­‰å†æ‰§è¡Œâ€ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¸…ç†å‰¯ä½œç”¨ (Cleanup)</strong> (ç”¨ <code>watchEffect</code> + <code>onInvalidate</code>)ï¼š</p>
<ul>
<li>ç›®æ ‡ï¼š<strong>é˜²æ­¢æ—§æ“ä½œå¹²æ‰°æ–°æ“ä½œ</strong>ã€‚</li>
<li>é€»è¾‘ï¼šâ€œå¼€å§‹æ–°çš„ä¹‹å‰ï¼Œå…ˆç¡®ä¿æ—§çš„å·²ç»åœæ­¢äº†â€ã€‚</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Unity3Då­¦ä¹ ç¬”è®°-è·‘é…·ç»ƒä¹ 2]]></title>    <link>https://juejin.cn/post/7580285196693143552</link>    <guid>https://juejin.cn/post/7580285196693143552</guid>    <pubDate>2025-12-06T14:07:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580285196693143552" data-draft-id="7580312375371907112" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Unity3Då­¦ä¹ ç¬”è®°-è·‘é…·ç»ƒä¹ 2"/> <meta itemprop="keywords" content="Unity3D"/> <meta itemprop="datePublished" content="2025-12-06T14:07:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mysterFeng"/> <meta itemprop="url" content="https://juejin.cn/user/4406498335129790"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Unity3Då­¦ä¹ ç¬”è®°-è·‘é…·ç»ƒä¹ 2
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498335129790/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mysterFeng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T14:07:23.000Z" title="Sat Dec 06 2025 14:07:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âš™ï¸ äº”ã€é«˜çº§åŠŸèƒ½ä¸æ¨¡å—åŒ– (29-31 æ­¥)</h2>
<h3 data-id="heading-1">29. å®ç°ç©ºä¸­æ§åˆ¶ (<code>AirControl.cs</code>)</h3>
<p>ä¸ºäº†è®© Level 2 æ›´æœ‰æŒ‘æˆ˜æ€§ï¼Œæˆ‘ä»¬é€šè¿‡ <strong>ç»„ä»¶åŒ–</strong> å®ç°äº†ç©ºä¸­æ§åˆ¶ã€‚</p>
<ul>
<li><strong>æ“ä½œï¼š</strong> åˆ›å»ºç‹¬ç«‹è„šæœ¬ <code>AirControl.cs</code>ã€‚</li>
<li><strong>åŸç†ï¼š</strong> <code>AirControl</code> <strong>æ²¡æœ‰ç»§æ‰¿</strong> <code>PlayerMovement</code>ã€‚å®ƒé€šè¿‡ <code>GetComponent&lt;PlayerMovement&gt;()</code> è·å–ç©å®¶çš„ <code>isGrounded</code> çŠ¶æ€ï¼Œç„¶ååœ¨ç©ºä¸­ç‹¬ç«‹æ–½åŠ ä¿®æ­£åŠ›ã€‚</li>
<li><strong>åº”ç”¨ï¼š</strong> åªå°† <code>AirControl.cs</code> é™„åŠ åˆ° Level 2 çš„ <code>Player</code> å¯¹è±¡ä¸Šã€‚</li>
</ul>
<h4 data-id="heading-2">ğŸ’» æ ¸å¿ƒä»£ç ï¼šç©ºä¸­ä¿®æ­£åŠ›</h4>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-comment">// AirControl.cs</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FixedUpdate</span>()</span>
{
    <span class="hljs-comment">// åªæœ‰å½“ç©å®¶ä¸åœ¨åœ°é¢ä¸Šæ—¶ï¼Œæ‰æ–½åŠ ä¾§å‘ä¿®æ­£åŠ›</span>
    <span class="hljs-keyword">if</span> (playerMovement != <span class="hljs-literal">null</span> &amp;&amp; !playerMovement.isGrounded)
    {
        <span class="hljs-built_in">float</span> horizontalInput = Input.GetAxis(<span class="hljs-string">"Horizontal"</span>);
        <span class="hljs-built_in">float</span> airForce = horizontalInput * airControlForce * Time.deltaTime;
        
        <span class="hljs-comment">// ä½¿ç”¨ VelocityChangeï¼Œç›´æ¥æ”¹å˜ç©å®¶é€Ÿåº¦</span>
        rb.AddForce(airForce, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, ForceMode.VelocityChange);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-3">30. åˆ›å»ºè·³æ¿ (<code>Launcher.cs</code>)</h3>
<p>å¼•å…¥è·³æ¿ä¸ºå…³å¡è®¾è®¡æä¾›äº†å‚ç›´å˜åŒ–ã€‚</p>
<ul>
<li><strong>æ“ä½œï¼š</strong> åˆ›å»º <code>Cube</code>ï¼Œå‹¾é€‰ <strong><code>Is Trigger</code></strong>ï¼Œè®¾ç½® <strong>Tag: <code>LaunchPad</code></strong>ï¼Œé™„åŠ  <code>Launcher.cs</code>ã€‚</li>
</ul>
<h4 data-id="heading-4">ğŸ’» æ ¸å¿ƒä»£ç ï¼šç¬é—´æ¨åŠ›</h4>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-comment">// Launcher.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> launchForce = <span class="hljs-number">1500f</span>; 

<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnTriggerEnter</span>(<span class="hljs-params">Collider other</span>)</span>
{
    <span class="hljs-keyword">if</span> (other.CompareTag(<span class="hljs-string">"Player"</span>))
    {
        Rigidbody rb = other.GetComponent&lt;Rigidbody&gt;();
        <span class="hljs-keyword">if</span> (rb != <span class="hljs-literal">null</span>)
        {
            <span class="hljs-comment">// æ¸…é›¶å‚ç›´é€Ÿåº¦ï¼Œç¡®ä¿è·å¾—æœ€å¤§çš„å‘ä¸Šæ¨åŠ›</span>
            rb.velocity = <span class="hljs-keyword">new</span> Vector3(rb.velocity.x, <span class="hljs-number">0f</span>, rb.velocity.z); 
            
            <span class="hljs-comment">// ä½¿ç”¨ Impulse æ–½åŠ ç¬é—´çš„åŠ›</span>
            rb.AddForce(Vector3.up * launchForce, ForceMode.Impulse);
            
            <span class="hljs-comment">// æ’­æ”¾ç‰¹æ•ˆ</span>
            launchEffect.Play();
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-5">31. åˆ›å»ºåŠ¨æ€é™·é˜± (ç§»åŠ¨ä¸æ—‹è½¬)</h3>
<p>å¼•å…¥ç§»åŠ¨å’Œæ—‹è½¬éšœç¢ç‰©å¢åŠ äº†æ¸¸æˆçš„åŠ¨æ€éš¾åº¦ã€‚</p>
<ul>
<li><strong>ç‰©ç†ä¼˜åŒ–ï¼š</strong> åŠ¨æ€éšœç¢ç‰©çš„ Rigidbody ç»„ä»¶çš„ <strong>Collision Detection</strong> å¿…é¡»è®¾ç½®ä¸º <strong>Continuous</strong>ã€‚</li>
</ul>
<h4 data-id="heading-6">ğŸ’» æ ¸å¿ƒä»£ç ï¼šå¾€å¤ç§»åŠ¨ï¼ˆPingPongï¼‰</h4>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-comment">// MoveBetweenPoints.cs</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span>
{
    <span class="hljs-comment">// Math.PingPong(time, length) ä½¿ time åœ¨ 0 å’Œ length ä¹‹é—´æ¥å›éœ‡è¡</span>
    timeElapsed += Time.deltaTime * speed;
    <span class="hljs-built_in">float</span> t = Mathf.PingPong(timeElapsed, <span class="hljs-number">1f</span>); 

    <span class="hljs-comment">// Lerp(A, B, t) å¹³æ»‘åœ°åœ¨èµ·ç‚¹å’Œç»ˆç‚¹ä¹‹é—´ç§»åŠ¨</span>
    transform.position = Vector3.Lerp(startPosition, endPosition, t);
}
</code></pre>
<h4 data-id="heading-7">ğŸ’» æ ¸å¿ƒä»£ç ï¼šæ’å®šæ—‹è½¬</h4>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-comment">// RotateAroundAxis.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> rotationSpeed = <span class="hljs-number">100f</span>; 
<span class="hljs-keyword">public</span> Vector3 rotationAxis = Vector3.up; 

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span>
{
    <span class="hljs-comment">// å›´ç»•æŒ‡å®šè½´ä»¥æŒ‡å®šé€Ÿåº¦æ—‹è½¬</span>
    transform.Rotate(rotationAxis, rotationSpeed * Time.deltaTime);
}
</code></pre>
<hr/>
<h2 data-id="heading-8">ğŸ—ºï¸ å…­ã€æ¸¸æˆæµç¨‹æ§åˆ¶ä¸å¯åŠ¨ (32-33 æ­¥)</h2>
<h3 data-id="heading-9">32. å¤šåœºæ™¯åˆ‡æ¢ä¸ Build Settings</h3>
<p>å®ç°äº†ä» Level 1 åˆ° Level 2 çš„è‡ªåŠ¨åˆ‡æ¢ï¼Œå¹¶å°†æ‰€æœ‰åœºæ™¯æ•´åˆåˆ°æ¸¸æˆå¯åŠ¨æµç¨‹ä¸­ã€‚</p>
<ul>
<li><strong>æ“ä½œï¼š</strong> åœ¨ <strong>File -&gt; Build Settings</strong> ä¸­ï¼Œå°†æ‰€æœ‰åœºæ™¯æŒ‰é¡ºåºæ·»åŠ åˆ°åˆ—è¡¨ï¼š<code>MainMenu</code> (0) â†’ <code>Level1</code> (1) â†’ <code>Level2</code> (2)ã€‚</li>
</ul>
<h4 data-id="heading-10">ğŸ’» æ ¸å¿ƒä»£ç ï¼šå»¶è¿ŸåŠ è½½ä¸‹ä¸€å…³</h4>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-comment">// GameController.cs</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">GameWon</span>()</span>
{
    <span class="hljs-comment">// åœæ­¢è®¡æ—¶å™¨ï¼Œæ˜¾ç¤º UI</span>
    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">// å»¶è¿Ÿ 3 ç§’åè°ƒç”¨ LoadNextLevel å‡½æ•°</span>
    Invoke(<span class="hljs-string">"LoadNextLevel"</span>, <span class="hljs-number">3f</span>); 
}

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LoadNextLevel</span>()</span>
{
    <span class="hljs-built_in">int</span> nextSceneIndex = SceneManager.GetActiveScene().buildIndex + <span class="hljs-number">1</span>;
    
    <span class="hljs-comment">// ç¡®ä¿ç´¢å¼•æœ‰æ•ˆï¼Œç„¶ååŠ è½½ä¸‹ä¸€ä¸ªåœºæ™¯</span>
    <span class="hljs-keyword">if</span> (nextSceneIndex &lt; SceneManager.sceneCountInBuildSettings)
    {
        SceneManager.LoadScene(nextSceneIndex);
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">// æ¸¸æˆé€šå…³ï¼Œå›åˆ°ä¸»èœå•æˆ–ç¬¬ä¸€å…³</span>
        SceneManager.LoadScene(<span class="hljs-number">0</span>); 
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-11">33. åˆ›å»ºä¸»èœå• (<code>MenuManager.cs</code>)</h3>
<p>ä¸ºä¸»èœå•æ·»åŠ å¯åŠ¨å’Œé€€å‡ºåŠŸèƒ½ï¼Œå®Œæˆæ¸¸æˆçš„å¯åŠ¨å¾ªç¯ã€‚</p>
<h4 data-id="heading-12">ğŸ’» æ ¸å¿ƒä»£ç ï¼šå¯åŠ¨ä¸é€€å‡º</h4>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-keyword">using</span> UnityEngine.SceneManagement; 

<span class="hljs-comment">// MenuManager.cs</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MenuManager</span> : <span class="hljs-title">MonoBehaviour</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">StartGame</span>()</span>
    {
        <span class="hljs-comment">// åŠ è½½ Level 1 åœºæ™¯ (ç´¢å¼• 1)</span>
        SceneManager.LoadScene(<span class="hljs-number">1</span>); 
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">QuitGame</span>()</span>
    {
        <span class="hljs-comment">// é€€å‡ºæ¸¸æˆåº”ç”¨ç¨‹åº</span>
        Application.Quit();

        <span class="hljs-comment">// æç¤ºï¼šåœ¨ Unity ç¼–è¾‘å™¨ä¸­è¿è¡Œæ—¶ï¼Œæ­¤ä»£ç åªä¼šåœ¨æ§åˆ¶å°æ‰“å°æ¶ˆæ¯</span>
        Debug.Log(<span class="hljs-string">"Application Quit!"</span>); 
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-13">âœ… æ€»ç»“ä¸å‘å¸ƒï¼ˆFinal Buildï¼‰</h2>
<ul>
<li><strong>æœ€ç»ˆæ£€æŸ¥ï¼š</strong> ç¡®ä¿æ‰€æœ‰åœºæ™¯å†…å®¹å®Œæ•´ä¸”å·²ä¿å­˜ã€‚</li>
<li><strong>Player Settings é…ç½®ï¼š</strong> è®¾ç½®å…¬å¸åã€äº§å“åå’Œæ¸¸æˆå›¾æ ‡ã€‚</li>
<li><strong>æ‰“åŒ…ï¼š</strong> åœ¨ <strong>Build Settings</strong> ä¸­é€‰æ‹©ç›®æ ‡å¹³å° (PC/Mac/Linux)ï¼Œç‚¹å‡» <strong>Build</strong> å¯¼å‡ºå¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptæµå¼è¾“å‡ºæŠ€æœ¯è¯¦è§£ä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7580310413754236978</link>    <guid>https://juejin.cn/post/7580310413754236978</guid>    <pubDate>2025-12-06T14:29:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580310413754236978" data-draft-id="7580303864605048841" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptæµå¼è¾“å‡ºæŠ€æœ¯è¯¦è§£ä¸å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2025-12-06T14:29:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="UIUV"/> <meta itemprop="url" content="https://juejin.cn/user/1036168457093483"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptæµå¼è¾“å‡ºæŠ€æœ¯è¯¦è§£ä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1036168457093483/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    UIUV
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T14:29:40.000Z" title="Sat Dec 06 2025 14:29:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScriptæµå¼è¾“å‡ºæŠ€æœ¯è¯¦è§£ä¸å®è·µ</h2>
<p>æµå¼è¾“å‡ºæ˜¯ç°ä»£Webå¼€å‘ä¸­æå‡ç”¨æˆ·ä½“éªŒçš„å…³é”®æŠ€æœ¯ï¼Œå®ƒå…è®¸æœåŠ¡å™¨åœ¨ç”Ÿæˆå†…å®¹çš„åŒæ—¶ï¼Œå°†å·²ç”Ÿæˆçš„éƒ¨åˆ†ç«‹å³å‘é€ç»™å®¢æˆ·ç«¯ï¼Œè€Œéç­‰å¾…å®Œæ•´å†…å®¹ç”Ÿæˆåä¸€æ¬¡æ€§ä¼ è¾“ã€‚<strong>è¿™ç§"è¾¹ç”Ÿæˆè¾¹è¿”å›"çš„æ¨¡å¼æ˜¾è‘—é™ä½äº†ç”¨æˆ·ç­‰å¾…æ—¶é—´ï¼Œæä¾›äº†å³æ—¶åé¦ˆï¼Œç‰¹åˆ«é€‚ç”¨äºAIå¯¹è¯ã€å®æ—¶æ—¥å¿—ç›‘æ§ç­‰åœºæ™¯</strong>ã€‚æœ¬å­¦ä¹ ç¬”è®°å°†æ·±å…¥è§£æJavaScriptæµå¼è¾“å‡ºçš„æŠ€æœ¯åŸç†ã€å®ç°æ–¹æ³•åŠåº”ç”¨åœºæ™¯ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡è¿™ä¸€é‡è¦æŠ€æœ¯ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æµå¼è¾“å‡ºæ¦‚å¿µä¸æŠ€æœ¯ä¼˜åŠ¿</h3>
<p>æµå¼è¾“å‡ºï¼Œä¹Ÿç§°ä¸ºæµå¼ä¼ è¾“ï¼Œæ˜¯æŒ‡æœåŠ¡å™¨æŒç»­åœ°å°†æ•°æ®æ¨é€åˆ°å®¢æˆ·ç«¯ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å‘é€å®Œæ¯•  ã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼Œè¿æ¥ä¸€æ—¦å»ºç«‹ï¼ŒæœåŠ¡å™¨å°±èƒ½å®æ—¶åœ°å‘é€æ›´æ–°ç»™å®¢æˆ·ç«¯ã€‚<strong>ä¸ä¼ ç»Ÿçš„ä¸€æ¬¡æ€§åŠ è½½æ–¹å¼ç›¸æ¯”ï¼Œæµå¼è¾“å‡ºåœ¨ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½æ–¹é¢å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿</strong>ã€‚</p>
<p>ä»æŠ€æœ¯è§’åº¦çœ‹ï¼Œæµå¼è¾“å‡ºçš„æ ¸å¿ƒä¼˜åŠ¿ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼šé¦–å…ˆï¼Œå®ƒæä¾›äº†ä½å»¶è¿Ÿç‰¹æ€§ï¼Œå…è®¸å®¢æˆ·ç«¯åœ¨æ•°æ®åˆ°è¾¾æ—¶ç«‹å³æ¸²æŸ“ï¼Œæ— éœ€ç­‰å¾…å®Œæ•´å“åº”  ï¼›å…¶æ¬¡ï¼Œå®ƒå®ç°äº†èµ„æºé«˜æ•ˆåˆ©ç”¨ï¼Œé€šè¿‡é€å—å¤„ç†æ•°æ®ï¼Œå¤§å¹…å‡å°‘å†…å­˜å ç”¨ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†  ï¼›æœ€åï¼Œå®ƒæ”¯æŒæ¸è¿›å¼å†…å®¹æ¸²æŸ“ï¼Œç”¨æˆ·å¯ä»¥ç«‹å³çœ‹åˆ°éƒ¨åˆ†å†…å®¹ï¼Œæå‡äº¤äº’æµç•…åº¦  ã€‚</p>
<p>å…·ä½“å¯¹æ¯”ä¼ ç»Ÿä¸€æ¬¡æ€§åŠ è½½æ–¹å¼ï¼Œæµå¼è¾“å‡ºåœ¨å†…å­˜å ç”¨ã€é¦–å±æ—¶é—´å’Œé€‚ç”¨åœºæ™¯ä¸Šå‡æœ‰æ˜æ˜¾ä¼˜åŠ¿ã€‚ä¼ ç»Ÿæ–¹å¼éœ€è¦ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨æ•°æ®åˆ°å†…å­˜ï¼Œå¯¼è‡´é«˜å†…å­˜å ç”¨ï¼›è€Œæµå¼è¾“å‡ºé€å—å¤„ç†æ•°æ®ï¼Œå†…å­˜å ç”¨ä½  ã€‚ä¼ ç»Ÿæ–¹å¼é¦–å±æ—¶é—´é•¿ï¼Œç”¨æˆ·éœ€è¦ç­‰å¾…å®Œæ•´å†…å®¹åŠ è½½ï¼›è€Œæµå¼è¾“å‡ºé¦–å±æ—¶é—´æçŸ­ï¼Œå†…å®¹å¯è¾¹ç”Ÿæˆè¾¹æ¸²æŸ“  ã€‚é€‚ç”¨åœºæ™¯æ–¹é¢ï¼Œä¼ ç»Ÿæ–¹å¼é€‚åˆå°æ•°æ®é‡é™æ€å†…å®¹ï¼›è€Œæµå¼è¾“å‡ºç‰¹åˆ«é€‚åˆå®æ—¶æ•°æ®/å¤§æ•°æ®é‡åœºæ™¯ï¼Œå¦‚AIå¯¹è¯ã€å®æ—¶æ—¥å¿—ç­‰  ã€‚</p>
<h3 data-id="heading-2">äºŒã€JavaScriptäºŒè¿›åˆ¶æ•°æ®å¤„ç†åŸºç¡€</h3>
<p>åœ¨å®ç°æµå¼è¾“å‡ºæ—¶ï¼ŒJavaScriptæä¾›äº†å¤šç§å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„APIï¼Œå…¶ä¸­ArrayBufferã€Uint8Arrayå’ŒTextEncoder/TextDecoderæ˜¯æ ¸å¿ƒå·¥å…·ã€‚<strong>ç†è§£è¿™äº›APIçš„å·¥ä½œåŸç†å¯¹äºå®ç°é«˜æ•ˆçš„æµå¼è¾“å‡ºè‡³å…³é‡è¦</strong>ã€‚</p>
<p>ArrayBufferæ˜¯JavaScriptä¸­ç”¨äºè¡¨ç¤ºé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºçš„æ•°æ®ç±»å‹  ã€‚å®ƒæœ¬èº«æ˜¯ä¸€ä¸ªè„±ç¦»å®é™…æ•°æ®çš„å®¹å™¨ï¼Œæä¾›äº†ä¸€ç§æœºåˆ¶æ¥è¡¨ç¤ºå›ºå®šå¤§å°çš„è¿ç»­å†…å­˜å—  ã€‚ArrayBufferå¯¹è±¡ä¸èƒ½ç›´æ¥æ“ä½œæ•°æ®ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªè§†å›¾ï¼ˆå¦‚TypedArrayæˆ–DataViewï¼‰æ¥è¯»å–å’Œå¤„ç†æ•°æ®  ã€‚ArrayBufferçš„åˆ›å»ºæ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª12å­—èŠ‚çš„ArrayBuffer</span>
<span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">12</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(buffer byteLength); <span class="hljs-comment">// è¾“å‡ºï¼š12</span>
</code></pre>
<p>Uint8Arrayæ˜¯JavaScriptä¸­çš„ä¸€ç§ç±»å‹åŒ–æ•°ç»„ï¼Œç”¨äºè¡¨ç¤ºä¸€ä¸ª8ä½æ— ç¬¦å·æ•´å‹æ•°ç»„  ã€‚å®ƒæä¾›äº†ä¸€ç§é«˜æ•ˆçš„æ–¹å¼æ¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯”å¸¸è§„çš„JavaScriptæ•°ç»„æ›´åŠ é«˜æ•ˆ  ã€‚Uint8Arrayå¯ä»¥åƒæ™®é€šæ•°ç»„ä¸€æ ·è¿›è¡Œæ“ä½œï¼ŒåŒæ—¶è¿˜æ”¯æŒä¸€äº›é¢å¤–çš„æ–¹æ³•ï¼Œå¦‚set()ã€subarray()å’Œslice()ç­‰  ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»ArrayBufferåˆ›å»ºUint8Arrayè§†å›¾</span>
<span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(view); <span class="hljs-comment">// è¾“å‡ºï¼šUint8Array(12) [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</span>

<span class="hljs-comment">// å¡«å……æ•°æ®</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; view.<span class="hljs-property">length</span>; i++) {
    view[i] = i * <span class="hljs-number">2</span>;
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(view); <span class="hljs-comment">// è¾“å‡ºï¼šUint8Array(12) [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22]</span>
</code></pre>
<p>TextEncoderå’ŒTextDecoderæ˜¯JavaScriptä¸­ç”¨äºå¤„ç†æ–‡æœ¬ä¸äºŒè¿›åˆ¶æ•°æ®è½¬æ¢çš„æ¥å£  ã€‚TextEncoderè´Ÿè´£å°†æ–‡æœ¬ç¼–ç ä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼Œè€ŒTextDecoderåˆ™è´Ÿè´£å°†äºŒè¿›åˆ¶æ•°æ®è§£ç ä¸ºæ–‡æœ¬  ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºç¼–ç å™¨</span>
<span class="hljs-keyword">const</span> encoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(encoder); <span class="hljs-comment">// è¾“å‡ºï¼šTextEncoder {}</span>

<span class="hljs-comment">// ç¼–ç æ–‡æœ¬ä¸ºäºŒè¿›åˆ¶</span>
<span class="hljs-keyword">const</span> myBuffer = encoder.<span class="hljs-title function_">encode</span>(<span class="hljs-string">'ä½ å¥½ HTML5'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myBuffer); <span class="hljs-comment">// è¾“å‡ºï¼šUint8Array(10) [228, 184, 160, 203, 195, 185, 72, 76, 77, 53]</span>

<span class="hljs-comment">// åˆ›å»ºè§£ç å™¨</span>
<span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();

<span class="hljs-comment">// è§£ç äºŒè¿›åˆ¶ä¸ºæ–‡æœ¬</span>
<span class="hljs-keyword">const</span> originalText = decoder.<span class="hljs-title function_">decode</span>(myBuffer);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(originalText); <span class="hljs-comment">// è¾“å‡ºï¼šä½ å¥½ HTML5</span>
</code></pre>
<p><strong>è¿™äº›äºŒè¿›åˆ¶å¤„ç†APIåœ¨æµå¼è¾“å‡ºä¸­æ‰®æ¼”å…³é”®è§’è‰²ï¼Œå› ä¸ºæœåŠ¡å™¨é€šå¸¸ä»¥äºŒè¿›åˆ¶æµçš„å½¢å¼å‘é€æ•°æ®ï¼Œå®¢æˆ·ç«¯éœ€è¦å°†å…¶è½¬æ¢ä¸ºå¯è¯»æ–‡æœ¬</strong>ã€‚ä¾‹å¦‚ï¼Œåœ¨AIå¯¹è¯åœºæ™¯ä¸­ï¼ŒæœåŠ¡å™¨å¯èƒ½ä»¥äºŒè¿›åˆ¶åˆ†å—å½¢å¼å‘é€ç”Ÿæˆçš„æ–‡æœ¬ï¼Œå®¢æˆ·ç«¯éœ€è¦é€šè¿‡TextDecoderé€å—è§£ç å¹¶æ‹¼æ¥ï¼Œæœ€ç»ˆå‘ˆç°ç»™ç”¨æˆ·ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€å‰ç«¯å®ç°æµå¼è¾“å‡ºçš„ä¸‰ç§ä¸»è¦æŠ€æœ¯æ–¹æ¡ˆ</h3>
<p>JavaScriptå‰ç«¯å®ç°æµå¼è¾“å‡ºä¸»è¦æœ‰ä¸‰ç§æŠ€æœ¯æ–¹æ¡ˆï¼šServer-Sent Events (SSE)ã€WebSocketå’ŒFetch API+ readableStreamã€‚<strong>æ¯ç§æŠ€æœ¯æ–¹æ¡ˆéƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯å’Œå®ç°ç‰¹ç‚¹ï¼Œå¼€å‘è€…åº”æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æŠ€æœ¯</strong>ã€‚</p>
<h4 data-id="heading-4">1. Server-Sent Events (SSE)</h4>
<p>SSEæ˜¯ä¸€ç§å…è®¸æœåŠ¡å™¨é€šè¿‡HTTPå‘å®¢æˆ·ç«¯æ¨é€å®æ—¶æ›´æ–°çš„æŠ€æœ¯ï¼Œå®ƒæ˜¯WebSocketsçš„ä¸€ç§æ›´ç®€å•çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä¸“é—¨ç”¨äºå•å‘çš„æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯é€šä¿¡  ã€‚SSEçš„å®ç°åŸºäºEventSource APIå’Œæ–°çš„"äº‹ä»¶æµ"æ•°æ®æ ¼å¼ï¼ˆtext/event-streamï¼‰  ã€‚</p>
<p>åœ¨JavaScriptä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç å®ç°SSEæµå¼è¾“å‡ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºEventSourceå¯¹è±¡</span>
<span class="hljs-keyword">const</span> eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/stream'</span>);

<span class="hljs-comment">// å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯</span>
eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-comment">// è§£ææ•°æ®</span>
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);

    <span class="hljs-comment">// å°†æ•°æ®æ·»åŠ åˆ°é¡µé¢</span>
    <span class="hljs-keyword">const</span> outputDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'output'</span>);
    outputDiv.<span class="hljs-property">innerHTML</span> += data.<span class="hljs-property">content</span> + <span class="hljs-string">'&lt;br&gt;'</span>;
});

<span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SSEè¿æ¥é”™è¯¯:'</span>, error);
});

<span class="hljs-comment">// è¿æ¥å…³é—­å¤„ç†</span>
eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'close'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSEè¿æ¥å·²å…³é—­'</span>);
});
</code></pre>
<p><strong>SSEç‰¹åˆ«é€‚åˆæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å•å‘æ¨é€äº‹ä»¶çš„åœºæ™¯</strong>ï¼Œå¦‚å®æ—¶æ—¥å¿—ç›‘æ§ã€æ–°é—»æ¨é€ç­‰ã€‚å®ƒå®ç°ç®€å•ï¼Œå…¼å®¹æ€§å¥½ï¼Œä½†ä»…æ”¯æŒå•å‘é€šä¿¡ï¼Œä¸”æ— æ³•å‘é€äºŒè¿›åˆ¶æ•°æ®ï¼ˆéœ€ç¼–ç ä¸ºBase64ï¼‰  ã€‚</p>
<h4 data-id="heading-5">2. WebSocket</h4>
<p>WebSocketæ˜¯ä¸€ç§åœ¨å•ä¸ªTCPè¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šè®¯çš„åè®®ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹æŒä¹…çš„è¿æ¥ï¼ŒåŒæ–¹å¯ä»¥éšæ—¶å‘é€å’Œæ¥æ”¶æ•°æ®  ã€‚<strong>WebSocketé€‚åˆéœ€è¦åŒå‘å®æ—¶äº¤äº’çš„åœºæ™¯ï¼Œå¦‚AIå¯¹è¯ã€åœ¨çº¿åä½œç¼–è¾‘ç­‰</strong>ã€‚</p>
<p>å®ç°WebSocketæµå¼è¾“å‡ºçš„JavaScriptä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºWebSocketå¯¹è±¡</span>
<span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">'ws://localhost:8080/chat'</span>);

<span class="hljs-comment">// è¿æ¥å»ºç«‹æˆåŠŸ</span>
ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'open'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocketè¿æ¥å·²å»ºç«‹'</span>);
    <span class="hljs-comment">// å‘é€åˆå§‹æ¶ˆæ¯</span>
    ws.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'login'</span>, <span class="hljs-attr">userId</span>: <span class="hljs-string">'123'</span> }));
});

<span class="hljs-comment">// æ¥æ”¶æ¶ˆæ¯</span>
ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-comment">// è§£ææ•°æ®</span>
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);

    <span class="hljs-comment">// æ ¹æ®æ¶ˆæ¯ç±»å‹å¤„ç†</span>
    <span class="hljs-keyword">switch</span>(data.<span class="hljs-property">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'chunk'</span>:
            <span class="hljs-comment">// å¤„ç†åˆ†å—æ–‡æœ¬</span>
            <span class="hljs-keyword">const</span> outputDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'output'</span>);
            outputDiv.<span class="hljs-property">innerHTML</span> += data.<span class="hljs-property">content</span> + <span class="hljs-string">'&lt;br&gt;'</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'completion'</span>:
            <span class="hljs-comment">// å¤„ç†å®Œæˆä¿¡å·</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å“åº”å·²å®Œæˆ'</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'error'</span>:
            <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æµå¼å“åº”æŠ¥é”™:'</span>, data.<span class="hljs-property">message</span>);
            <span class="hljs-keyword">break</span>;
    }
});

<span class="hljs-comment">// è¿æ¥é”™è¯¯</span>
ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocketé”™è¯¯:'</span>, error);
});

<span class="hljs-comment">// è¿æ¥å…³é—­</span>
ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'close'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocketè¿æ¥å·²å…³é—­'</span>);
});
</code></pre>
<p><strong>WebSocketç›¸æ¯”SSEå…·æœ‰å…¨åŒå·¥é€šä¿¡ã€ä½å»¶è¿Ÿã€æ”¯æŒäºŒè¿›åˆ¶æ•°æ®ä¼ è¾“ç­‰ä¼˜åŠ¿</strong>ï¼Œä½†å®ç°å¤æ‚åº¦æ›´é«˜ï¼Œéœ€è¦å¤„ç†æ›´å¤šè¿æ¥çŠ¶æ€å’Œæ¶ˆæ¯ç±»å‹ã€‚</p>
<h4 data-id="heading-6">3. Fetch API + ReadableStream</h4>
<p>Fetch APIçš„æµå¼å¤„ç†æ˜¯ä¸€ç§åˆ©ç”¨æµè§ˆå™¨åŸç”ŸAPIé€å—è¯»å–å’Œå¤„ç†æ•°æ®çš„æ–¹å¼ã€‚<strong>å®ƒç‰¹åˆ«é€‚åˆéœ€è¦ç²¾ç¡®æ§åˆ¶æ•°æ®æµå¤„ç†çš„åœºæ™¯ï¼Œå¦‚æ–‡ä»¶ä¸‹è½½ã€å¤šåª’ä½“å¤„ç†ç­‰</strong>ã€‚</p>
<p>å®ç°Fetchæµå¼è¾“å‡ºçš„JavaScriptä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchStream</span>(<span class="hljs-params">url</span>) {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);
    <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();

    <span class="hljs-comment">// åˆ›å»ºæ–‡æœ¬è§£ç å™¨</span>
    <span class="hljs-keyword">const</span> textDecoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();

    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-comment">// è¯»å–æ•°æ®å—</span>
        <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();

        <span class="hljs-comment">// å¦‚æœæµå·²ç»“æŸ</span>
        <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;

        <span class="hljs-comment">// å°†å­—èŠ‚è½¬æ¢ä¸ºæ–‡æœ¬</span>
        <span class="hljs-keyword">const</span> chunkText = textDecoder.<span class="hljs-title function_">decode</span>(value);

        <span class="hljs-comment">// å¤„ç†æ–‡æœ¬å—</span>
        <span class="hljs-keyword">const</span> outputDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'output'</span>);
        outputDiv.<span class="hljs-property">innerHTML</span> += chunkText + <span class="hljs-string">'&lt;br&gt;'</span>;
    }
}

<span class="hljs-comment">// è°ƒç”¨æµå¼è·å–å‡½æ•°</span>
<span class="hljs-title function_">fetchStream</span>(<span class="hljs-string">'/api/stream'</span>);
</code></pre>
<p><strong>Fetch API + ReadableStreamæä¾›äº†æœ€å¤§çš„çµæ´»æ€§ï¼Œå…è®¸å¼€å‘è€…ç²¾ç¡®æ§åˆ¶æ•°æ®å—çš„è¯»å–å’Œå¤„ç†è¿‡ç¨‹</strong>ã€‚å®ƒæ”¯æŒæµå¼ä¼ è¾“å„ç§ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€äºŒè¿›åˆ¶å’ŒJSONç­‰ï¼Œé€‚åˆéœ€è¦ç²¾ç»†å¤„ç†æ•°æ®çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-7">å››ã€æµå¼è¾“å‡ºåœ¨å®é™…åº”ç”¨ä¸­çš„åœºæ™¯ä¸æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>
<p>æµå¼è¾“å‡ºæŠ€æœ¯å·²åœ¨å¤šç§å®é™…åœºæ™¯ä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œä¸»è¦åŒ…æ‹¬AIå¯¹è¯ã€å®æ—¶æ—¥å¿—ç›‘æ§ã€åœ¨çº¿åä½œç¼–è¾‘å’Œæ•°æ®ä»ªè¡¨ç›˜ç­‰ã€‚<strong>é’ˆå¯¹ä¸åŒåœºæ™¯ï¼Œéœ€è¦é‡‡å–ç›¸åº”çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œç¡®ä¿æµå¼è¾“å‡ºçš„é«˜æ•ˆç¨³å®š</strong>ã€‚</p>
<h4 data-id="heading-8">1. AIå¯¹è¯åœºæ™¯</h4>
<p>åœ¨AIå¯¹è¯åº”ç”¨ä¸­ï¼Œæµå¼è¾“å‡ºå…è®¸æ¨¡å‹åœ¨ç”Ÿæˆæ–‡æœ¬çš„åŒæ—¶ï¼Œå°†å·²ç”Ÿæˆçš„éƒ¨åˆ†ç«‹å³å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®ç°"æ‰“å­—æœº"æ•ˆæœï¼Œæ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒ  ã€‚ä»¥ä¸‹æ˜¯AIå¯¹è¯åœºæ™¯çš„å…¸å‹å®ç°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å»ºç«‹SSEè¿æ¥</span>
<span class="hljs-keyword">let</span> eventSource = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">const</span> abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();

<span class="hljs-comment">// å¼€å§‹å¯¹è¯</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">startChat</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¸…ç©ºä¹‹å‰çš„è¿æ¥</span>
    <span class="hljs-keyword">if</span> (eventSource) {
        eventSource.<span class="hljs-title function_">close</span>();
    }

    <span class="hljs-comment">// åˆ›å»ºæ–°è¿æ¥</span>
    eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/api/chat'</span>, {
        <span class="hljs-attr">signal</span>: abortController.<span class="hljs-property">signal</span>
    });

    <span class="hljs-comment">// å¤„ç†æ¶ˆæ¯</span>
    eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);

        <span class="hljs-comment">// å¤„ç†åˆ†å—æ–‡æœ¬</span>
        <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">'chunk'</span>) {
            <span class="hljs-keyword">const</span> outputDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'output'</span>);
            outputDiv.<span class="hljs-property">innerHTML</span> += data.<span class="hljs-property">content</span>;
        }

        <span class="hljs-comment">// å¤„ç†å®Œæˆä¿¡å·</span>
        <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">'completion'</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯¹è¯å·²å®Œæˆ'</span>);
        }

        <span class="hljs-comment">// è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">scrollHeight</span>);
    });

    <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
    eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¯¹è¯è¿æ¥é”™è¯¯:'</span>, error);
        <span class="hljs-comment">// å¯èƒ½éœ€è¦é‡æ–°å»ºç«‹è¿æ¥</span>
    });

    <span class="hljs-comment">// è¿æ¥å…³é—­</span>
    eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'close'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯¹è¯è¿æ¥å·²å…³é—­'</span>);
    });
}

<span class="hljs-comment">// åœæ­¢å¯¹è¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">stopChat</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (eventSource) {
        eventSource.<span class="hljs-title function_">close</span>();
    }

    <span class="hljs-keyword">if</span> (abortController) {
        abortController.<span class="hljs-title function_">abort</span>();
    }
}
</code></pre>
<p><strong>AIå¯¹è¯åœºæ™¯çš„ä¼˜åŒ–ç­–ç•¥åŒ…æ‹¬é¦–å­—èŠ‚å¿«é€Ÿè¿”å›ã€åŠ¨æ€æ‰¹å¤„ç†å’Œåå‹æ§åˆ¶</strong>ã€‚é¦–å­—èŠ‚å¿«é€Ÿè¿”å›ï¼ˆFCPï¼‰å¯é™ä½åˆå§‹å“åº”æ—¶é—´ï¼Œè®©ç”¨æˆ·ç«‹å³çœ‹åˆ°å¯¹è¯å¼€å§‹ï¼›åŠ¨æ€æ‰¹å¤„ç†å¯æé«˜æœåŠ¡å™¨ç«¯çš„ç”Ÿæˆæ•ˆç‡ï¼Œå‡å°‘èµ„æºæµªè´¹ï¼›åå‹æ§åˆ¶åˆ™å¯æ ¹æ®ç½‘ç»œçŠ¶å†µåŠ¨æ€è°ƒæ•´æœåŠ¡å™¨çš„ç”Ÿæˆé€Ÿåº¦ï¼Œé¿å…å®¢æˆ·ç«¯æ•°æ®ç§¯å‹  ã€‚</p>
<h4 data-id="heading-9">2. å®æ—¶æ—¥å¿—ç›‘æ§åœºæ™¯</h4>
<p>å®æ—¶æ—¥å¿—ç›‘æ§æ˜¯æµå¼è¾“å‡ºçš„å¦ä¸€é‡è¦åº”ç”¨åœºæ™¯ï¼Œå®ƒå…è®¸å¼€å‘è€…å®æ—¶æŸ¥çœ‹æœåŠ¡å™¨ç”Ÿæˆçš„æ—¥å¿—ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯å®æ—¶æ—¥å¿—ç›‘æ§çš„å…¸å‹å®ç°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºWebSocketè¿æ¥</span>
<span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">'ws://localhost:8080/logs'</span>);

<span class="hljs-comment">// è¿æ¥å»ºç«‹</span>
ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'open'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ—¥å¿—è¿æ¥å·²å»ºç«‹'</span>);
    <span class="hljs-comment">// å¯èƒ½éœ€è¦å‘é€è®¢é˜…è¯·æ±‚</span>
    ws.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'subscribe'</span>, <span class="hljs-attr">logs</span>: [<span class="hljs-string">'app'</span>, <span class="hljs-string">'db'</span>] }));
});

<span class="hljs-comment">// æ¥æ”¶æ—¥å¿—</span>
ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-comment">// è§£ææ—¥å¿—æ•°æ®</span>
    <span class="hljs-keyword">const</span> log = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);

    <span class="hljs-comment">// æ ¹æ®æ—¥å¿—ç±»å‹æ¸²æŸ“</span>
    <span class="hljs-keyword">const</span> logDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'logs'</span>);
    <span class="hljs-keyword">const</span> logElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    logElement.<span class="hljs-property">className</span> = <span class="hljs-string">`log <span class="hljs-subst">${log.level}</span>`</span>;
    logElement.<span class="hljs-property">textContent</span> = <span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(log.timestamp).toLocaleTimeString()}</span>] <span class="hljs-subst">${log.message}</span>`</span>;
    logDiv.<span class="hljs-title function_">appendChild</span>(logElement);

    <span class="hljs-comment">// è‡ªåŠ¨æ»šåŠ¨</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">scrollHeight</span>);
});

<span class="hljs-comment">// å¿ƒè·³æ£€æµ‹</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (ws readyState === <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span>) {
        ws.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ping'</span> }));
    }
}, <span class="hljs-number">30000</span>); <span class="hljs-comment">// æ¯30ç§’å‘é€ä¸€æ¬¡å¿ƒè·³</span>
</code></pre>
<p><strong>å®æ—¶æ—¥å¿—ç›‘æ§åœºæ™¯çš„ä¼˜åŒ–ç­–ç•¥åŒ…æ‹¬å¿ƒè·³æ£€æµ‹ã€ç¼“å†²åŒºç®¡ç†å’Œæ¶ˆæ¯è¿‡æ»¤</strong>ã€‚å¿ƒè·³æ£€æµ‹å¯ç¡®ä¿è¿æ¥çš„ç¨³å®šæ€§ï¼Œå³ä½¿åœ¨ç½‘ç»œä¸ç¨³å®šçš„æƒ…å†µä¸‹ä¹Ÿèƒ½åŠæ—¶æ¢å¤  ï¼›ç¼“å†²åŒºç®¡ç†å¯æ§åˆ¶å†…å­˜ä½¿ç”¨ï¼Œé¿å…å¤§é‡æ—¥å¿—å¯¼è‡´å†…å­˜æº¢å‡ºï¼›æ¶ˆæ¯è¿‡æ»¤åˆ™å¯å‡å°‘ä¸å¿…è¦çš„æ•°æ®ä¼ è¾“ï¼Œæå‡ç³»ç»Ÿæ€§èƒ½ã€‚</p>
<h4 data-id="heading-10">3. æ€§èƒ½ä¼˜åŒ–é€šç”¨ç­–ç•¥</h4>
<p>æ— è®ºå“ªç§æµå¼è¾“å‡ºæŠ€æœ¯ï¼Œéƒ½éœ€è¦è€ƒè™‘ä»¥ä¸‹é€šç”¨ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<p><strong>ç¼“å†²åŒºç®¡ç†</strong>ï¼šé€šè¿‡åˆç†è®¾ç½®ç¼“å†²åŒºå¤§å°ï¼ˆå¦‚highWaterMarkå‚æ•°ï¼‰ï¼Œå¹³è¡¡å†…å­˜å ç”¨å’Œååé‡  ã€‚è¿‡å°çš„ç¼“å†²åŒºä¼šå¢åŠ I/Oå¼€é”€ï¼Œå½±å“æ€§èƒ½ï¼›è¿‡å¤§çš„ç¼“å†²åŒºåˆ™ä¼šå¢åŠ å†…å­˜å‹åŠ›ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨é«˜æ°´ä½çº¿æ§åˆ¶å†…å­˜</span>
<span class="hljs-keyword">const</span> readableStream = response.<span class="hljs-property">body</span>
    . <span class="hljs-title function_">pipeThrough</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TransformStream</span>({
        <span class="hljs-attr">transform</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">chunk,æ§åˆ¶å™¨</span>) {
            <span class="hljs-comment">// å¤„ç†æ•°æ®å—</span>
           æ§åˆ¶å™¨æ§åˆ¶å™¨.<span class="hljs-title function_">write</span>(chunk);
        }
    }), { <span class="hljs-attr">highWaterMark</span>: <span class="hljs-number">16</span> });
</code></pre>
<p><strong>é”™è¯¯å¤„ç†ä¸é‡è¿</strong>ï¼šå®ç°è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼Œç¡®ä¿åœ¨ç½‘ç»œä¸­æ–­åèƒ½å¤Ÿå¿«é€Ÿæ¢å¤  ã€‚å¯¹äºSSEï¼Œå¯ä»¥ç›‘å¬erroräº‹ä»¶å¹¶å°è¯•é‡æ–°è¿æ¥ï¼›å¯¹äºWebSocketï¼Œåˆ™å¯ä»¥å®ç°å¿ƒè·³æ£€æµ‹æœºåˆ¶ï¼Œå®šæœŸæ£€æŸ¥è¿æ¥çŠ¶æ€  ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// SSEè‡ªåŠ¨é‡è¿</span>
<span class="hljs-keyword">let</span> reconnectionInterval = <span class="hljs-number">3000</span>; <span class="hljs-comment">// åˆå§‹é‡è¿é—´éš”3ç§’</span>
<span class="hljs-keyword">let</span> reconnectionCount = <span class="hljs-number">0</span>;

<span class="hljs-comment">// SSEé”™è¯¯å¤„ç†</span>
eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-keyword">if</span> (eventSource readyState === <span class="hljs-title class_">EventSource</span>.<span class="hljs-property">CLOSED</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SSEè¿æ¥å·²å…³é—­ï¼Œå°è¯•é‡æ–°è¿æ¥...'</span>);

        <span class="hljs-comment">// æŒ‡æ•°é€€é¿é‡è¿</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-comment">// åˆ›å»ºæ–°è¿æ¥</span>
            eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/api/stream'</span>, {
                <span class="hljs-attr">withCredentials</span>: <span class="hljs-literal">true</span>
            });

            <span class="hljs-comment">// é‡ç½®é‡è¿è®¡æ•°å™¨</span>
            reconnectionCount = <span class="hljs-number">0</span>;
            reconnectionInterval = <span class="hljs-number">3000</span>;
        }, reconnectionInterval);

        <span class="hljs-comment">// å¢åŠ é‡è¿é—´éš”</span>
        reconnectionInterval *= <span class="hljs-number">2</span>;
        reconnectionCount++;
    }
});
</code></pre>
<p><strong>åˆ†å—ç­–ç•¥ä¼˜åŒ–</strong>ï¼šæ ¹æ®åº”ç”¨åœºæ™¯è°ƒæ•´æ•°æ®å—çš„å¤§å°å’Œå‘é€é¢‘ç‡ï¼Œå¹³è¡¡ä¼ è¾“æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚è¿‡å°çš„æ•°æ®å—ä¼šå¢åŠ ä¼ è¾“å¼€é”€ï¼Œé™ä½æ•ˆç‡ï¼›è¿‡å¤§çš„æ•°æ®å—åˆ™ä¼šå¢åŠ å»¶è¿Ÿï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p><strong>å®¢æˆ·ç«¯æ¸²æŸ“ä¼˜åŒ–</strong>ï¼šé‡‡ç”¨è™šæ‹Ÿæ»šåŠ¨ã€èŠ‚æµæ¸²æŸ“ç­‰æŠ€æœ¯å‡å°‘DOMæ“ä½œå¼€é”€ï¼Œæå‡æ¸²æŸ“æ€§èƒ½ã€‚å¯¹äºå¤§é‡æ•°æ®çš„åœºæ™¯ï¼Œè™šæ‹Ÿæ»šåŠ¨åªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„å†…å®¹ï¼Œå¤§å¹…å‡å°‘å†…å­˜å ç”¨ï¼›èŠ‚æµæ¸²æŸ“åˆ™é™åˆ¶æ¸²æŸ“é¢‘ç‡ï¼Œé¿å…é¢‘ç¹çš„DOMæ›´æ–°ã€‚</p>
<h3 data-id="heading-11">äº”ã€æµå¼è¾“å‡ºçš„å®ç°æµç¨‹ä¸æœ€ä½³å®è·µ</h3>
<p>å®ç°æµå¼è¾“å‡ºéœ€è¦å‰åç«¯ååŒå·¥ä½œï¼Œ<strong>å»ºç«‹å®Œæ•´çš„æµå¼é€šä¿¡æµç¨‹ï¼Œä»è¿æ¥å»ºç«‹ã€æ•°æ®ä¼ è¾“åˆ°æ¸²æŸ“å‘ˆç°</strong>ã€‚ä»¥ä¸‹æ˜¯æµå¼è¾“å‡ºçš„å…¸å‹å®ç°æµç¨‹ï¼š</p>
<h4 data-id="heading-12">1. è¿æ¥å»ºç«‹</h4>
<p>æ— è®ºä½¿ç”¨å“ªç§æŠ€æœ¯ï¼Œé¦–å…ˆéœ€è¦å»ºç«‹å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ã€‚å¯¹äºSSEï¼Œä½¿ç”¨EventSourceå¯¹è±¡ï¼›å¯¹äºWebSocketï¼Œä½¿ç”¨WebSocketå¯¹è±¡ï¼›å¯¹äºFetch APIï¼Œåˆ™éœ€è¦å‘é€è¯·æ±‚å¹¶è·å–å“åº”ä½“çš„Reader  ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// SSEè¿æ¥å»ºç«‹</span>
<span class="hljs-keyword">const</span> eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/api/stream'</span>);

<span class="hljs-comment">// WebSocketè¿æ¥å»ºç«‹</span>
<span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">'ws://localhost:8080/stream'</span>);

<span class="hljs-comment">// Fetch APIè¿æ¥å»ºç«‹</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/stream'</span>, {
    <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
    },
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>
});
<span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
</code></pre>
<h4 data-id="heading-13">2. æ•°æ®ä¼ è¾“</h4>
<p>è¿æ¥å»ºç«‹åï¼ŒæœåŠ¡å™¨å¯ä»¥å¼€å§‹æŒç»­æ¨é€æ•°æ®ã€‚<strong>æ•°æ®é€šå¸¸ä»¥åˆ†å—å½¢å¼ä¼ è¾“ï¼Œæ¯å—åŒ…å«éƒ¨åˆ†ç”Ÿæˆå†…å®¹</strong>ã€‚æœåŠ¡å™¨éœ€è¦ç¡®ä¿æ•°æ®åˆ†å—çš„å¤§å°å’Œé¢‘ç‡åˆç†ï¼Œä»¥å¹³è¡¡ä¼ è¾“æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// SSEæ•°æ®ä¼ è¾“ï¼ˆæœåŠ¡å™¨ç«¯ä¼ªä»£ç ï¼‰</span>
res.<span class="hljs-title function_">writeHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/event-stream'</span>);
res.<span class="hljs-title function_">writeHeader</span>(<span class="hljs-string">'Cache-Control'</span>, <span class="hljs-string">'no-cache'</span>);
res.<span class="hljs-title function_">writeHeader</span>(<span class="hljs-string">'Connection'</span>, <span class="hljs-string">'keep-alive'</span>);

<span class="hljs-comment">// æ¯ç”Ÿæˆä¸€ä¸ªtokenå°±æ¨é€</span>
<span class="hljs-keyword">while</span> (!<span class="hljs-title function_">isGenerationComplete</span>()) {
    <span class="hljs-keyword">const</span> chunk = <span class="hljs-title function_">generateNextChunk</span>();
    res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(chunk)}</span>
`</span>); <span class="hljs-comment">// æ³¨æ„æœ«å°¾çš„ç©ºè¡Œ</span>
}
res.<span class="hljs-title function_">end</span>();

<span class="hljs-comment">// WebSocketæ•°æ®ä¼ è¾“ï¼ˆæœåŠ¡å™¨ç«¯ä¼ªä»£ç ï¼‰</span>
ws.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'chunk'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'è¿™æ˜¯ç¬¬ä¸€éƒ¨åˆ†å†…å®¹'</span> }));
ws.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'chunk'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'è¿™æ˜¯ç¬¬äºŒéƒ¨åˆ†å†…å®¹'</span> }));
ws.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'completion'</span> }));
</code></pre>
<h4 data-id="heading-14">3. æ•°æ®å¤„ç†ä¸æ¸²æŸ“</h4>
<p>å®¢æˆ·ç«¯æ¥æ”¶åˆ°æ•°æ®å—åï¼Œéœ€è¦è¿›è¡Œè§£ç å’Œæ¸²æŸ“ã€‚<strong>å¯¹äºäºŒè¿›åˆ¶æ•°æ®ï¼Œä½¿ç”¨TextDecoderè§£ç ï¼›å¯¹äºæ–‡æœ¬æ•°æ®ï¼Œç›´æ¥è§£æå¹¶æ¸²æŸ“</strong>ã€‚æ¸²æŸ“è¿‡ç¨‹ä¸­éœ€è¦è€ƒè™‘æ€§èƒ½ä¼˜åŒ–ï¼Œé¿å…é¢‘ç¹çš„DOMæ“ä½œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// SSEæ•°æ®å¤„ç†</span>
eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-comment">// è§£ææ•°æ®</span>
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);

    <span class="hljs-comment">// å¤„ç†åˆ†å—å†…å®¹</span>
    <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">'chunk'</span>) {
        <span class="hljs-comment">// ä½¿ç”¨TextDecoderå¤„ç†äºŒè¿›åˆ¶æ•°æ®</span>
        <span class="hljs-keyword">if</span> (data.<span class="hljs-property">content</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Uint8Array</span>) {
            <span class="hljs-keyword">const</span> decodedText = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>().<span class="hljs-title function_">decode</span>(data.<span class="hljs-property">content</span>);
            <span class="hljs-title function_">appendToDOM</span>(decodedText);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title function_">appendToDOM</span>(data.<span class="hljs-property">content</span>);
        }
    }
});

<span class="hljs-comment">// WebSocketæ•°æ®å¤„ç†</span>
ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-comment">// è§£ææ•°æ®</span>
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);

    <span class="hljs-comment">// å¤„ç†åˆ†å—å†…å®¹</span>
    <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">'chunk'</span>) {
        <span class="hljs-comment">// å¤„ç†äºŒè¿›åˆ¶åˆ†å—</span>
        <span class="hljs-keyword">if</span> (data.<span class="hljs-property">content</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Uint8Array</span>) {
            <span class="hljs-keyword">const</span> decodedText = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>().<span class="hljs-title function_">decode</span>(data.<span class="hljs-property">content</span>);
            <span class="hljs-title function_">appendToDOM</span>(decodedText);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¤„ç†æ–‡æœ¬åˆ†å—</span>
            <span class="hljs-title function_">appendToDOM</span>(data.<span class="hljs-property">content</span>);
        }
    }
});

<span class="hljs-comment">// Fetch APIæ•°æ®å¤„ç†</span>
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
    <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;

    <span class="hljs-comment">// å¤„ç†äºŒè¿›åˆ¶æ•°æ®</span>
    <span class="hljs-keyword">const</span> chunkText = textDecoder.<span class="hljs-title function_">decode</span>(value);
    <span class="hljs-title function_">appendToDOM</span>(chunkText);
}
</code></pre>
<h4 data-id="heading-15">4. è¿æ¥å…³é—­ä¸æ¸…ç†</h4>
<p>æµå¼è¾“å‡ºå®Œæˆåï¼Œéœ€è¦æ­£ç¡®å…³é—­è¿æ¥å¹¶æ¸…ç†èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚<strong>å¯¹äºSSEï¼Œä½¿ç”¨close()æ–¹æ³•å…³é—­è¿æ¥ï¼›å¯¹äºWebSocketï¼ŒåŒæ ·ä½¿ç”¨close()æ–¹æ³•ï¼›å¯¹äºFetch APIï¼Œåˆ™ä¸éœ€è¦ç‰¹åˆ«å¤„ç†ï¼Œè¿æ¥ä¼šåœ¨æµç»“æŸåè‡ªåŠ¨å…³é—­</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// SSEè¿æ¥å…³é—­</span>
eventSource.<span class="hljs-title function_">close</span>();

<span class="hljs-comment">// WebSocketè¿æ¥å…³é—­</span>
ws.<span class="hljs-title function_">close</span>();

<span class="hljs-comment">//Fetch APIè‡ªåŠ¨å…³é—­</span>
<span class="hljs-comment">// æ— éœ€ç‰¹åˆ«å¤„ç†ï¼Œæµç»“æŸåè¿æ¥ä¼šè‡ªåŠ¨å…³é—­</span>
</code></pre>
<h3 data-id="heading-16">å…­ã€æµå¼è¾“å‡ºçš„æœªæ¥å‘å±•è¶‹åŠ¿</h3>
<p>éšç€WebæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œæµå¼è¾“å‡ºæŠ€æœ¯ä¹Ÿåœ¨æŒç»­æ¼”è¿›ã€‚<strong>æœªæ¥ï¼Œæµå¼è¾“å‡ºå°†æ›´åŠ æ™ºèƒ½åŒ–ã€é«˜æ•ˆåŒ–å’Œæ ‡å‡†åŒ–</strong>ï¼Œä¸ºå¼€å‘è€…æä¾›æ›´ä¾¿æ·çš„å®ç°æ–¹å¼ã€‚</p>
<p>é¦–å…ˆï¼Œ<strong>Web Componentsçš„æ™®åŠå°†ä½¿å¾—æµå¼è¾“å‡ºç»„ä»¶æ›´å®¹æ˜“å¤ç”¨å’Œæ ‡å‡†åŒ–</strong>ã€‚å¼€å‘è€…å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„æµå¼è¾“å‡ºå…ƒç´ ï¼Œå°è£…è¿æ¥ç®¡ç†ã€æ•°æ®å¤„ç†å’Œæ¸²æŸ“é€»è¾‘ï¼Œç®€åŒ–åº”ç”¨å¼€å‘ã€‚</p>
<p>å…¶æ¬¡ï¼Œ<strong>WebAssemblyçš„æˆç†Ÿå°†ä¸ºæµå¼è¾“å‡ºæä¾›æ›´é«˜æ•ˆçš„äºŒè¿›åˆ¶å¤„ç†èƒ½åŠ›</strong>ã€‚é€šè¿‡WebAssemblyï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œé«˜æ€§èƒ½çš„äºŒè¿›åˆ¶å¤„ç†ç®—æ³•ï¼Œå‡å°‘JavaScriptçš„æ€§èƒ½å¼€é”€ã€‚</p>
<p>æœ€åï¼Œ<strong>æ–°çš„æµå¼é€šä¿¡åè®®çš„å‡ºç°å°†ä¸ºæµå¼è¾“å‡ºæä¾›æ›´ä¸°å¯Œçš„åŠŸèƒ½å’Œæ›´å¥½çš„æ€§èƒ½</strong>ã€‚ä¾‹å¦‚ï¼ŒHTTP/3çš„æ¨å¹¿ä½¿ç”¨å°†å¤§å¹…é™ä½ç½‘ç»œå»¶è¿Ÿï¼Œæå‡æµå¼è¾“å‡ºçš„å®æ—¶æ€§ï¼›è€Œæ–°çš„äº‹ä»¶æµæ ¼å¼å¯èƒ½æ”¯æŒæ›´å¤æ‚çš„æ•°æ®ç»“æ„å’Œæ›´çµæ´»çš„æ¶ˆæ¯ç±»å‹ã€‚</p>
<h3 data-id="heading-17">ä¸ƒã€æ€»ç»“ä¸å»ºè®®</h3>
<p>æµå¼è¾“å‡ºæŠ€æœ¯æ˜¯æå‡Webåº”ç”¨ç”¨æˆ·ä½“éªŒçš„é‡è¦æ‰‹æ®µï¼Œå®ƒé€šè¿‡"è¾¹ç”Ÿæˆè¾¹è¿”å›"çš„æ¨¡å¼ï¼Œæ˜¾è‘—é™ä½äº†ç”¨æˆ·ç­‰å¾…æ—¶é—´ï¼Œæä¾›äº†å³æ—¶åé¦ˆ  ã€‚<strong>æŒæ¡JavaScriptæµå¼è¾“å‡ºæŠ€æœ¯ï¼Œéœ€è¦ç†è§£äºŒè¿›åˆ¶æ•°æ®å¤„ç†åŸºç¡€ï¼Œç†Ÿæ‚‰SSEã€WebSocketå’ŒFetch APIä¸‰ç§å®ç°æ–¹æ¡ˆï¼Œå¹¶æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç­–ç•¥</strong>ã€‚</p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œå»ºè®®ä»ä»¥ä¸‹æ–¹é¢å…¥æ‰‹ï¼š</p>
<ol>
<li>
<p><strong>æ ¹æ®åº”ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„æŠ€æœ¯</strong>ï¼šå¦‚æœä»…éœ€å•å‘æ¨é€ï¼ŒSSEæ˜¯æœ€ä½³é€‰æ‹©ï¼›å¦‚æœéœ€è¦åŒå‘å®æ—¶äº¤äº’ï¼ŒWebSocketæ›´ä¸ºé€‚åˆï¼›å¦‚æœéœ€è¦ç²¾ç»†æ§åˆ¶æ•°æ®æµå¤„ç†è¿‡ç¨‹ï¼ŒFetch API+ readableStreamåˆ™æ˜¯ç†æƒ³é€‰æ‹©ã€‚</p>
</li>
<li>
<p><strong>ä¼˜åŒ–äºŒè¿›åˆ¶æ•°æ®å¤„ç†</strong>ï¼šåˆç†ä½¿ç”¨ArrayBufferã€Uint8Arrayå’ŒTextEncoder/TextDecoderï¼Œå‡å°‘å†…å­˜å ç”¨å’Œè§£ç å¼€é”€ã€‚å¯¹äºå¤§è§„æ¨¡æ•°æ®ï¼Œè€ƒè™‘ä½¿ç”¨ç¼“å†²åŒºç®¡ç†ç­–ç•¥ï¼Œé¿å…å†…å­˜æº¢å‡ºã€‚</p>
</li>
<li>
<p><strong>å®ç°å¯é çš„è¿æ¥ç®¡ç†</strong>ï¼šä¸ºSSEå’ŒWebSocketå®ç°è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼Œç¡®ä¿åœ¨ç½‘ç»œä¸­æ–­åèƒ½å¤Ÿå¿«é€Ÿæ¢å¤ã€‚å¯¹äºWebSocketï¼Œå®šæœŸå‘é€å¿ƒè·³åŒ…æ£€æµ‹è¿æ¥çŠ¶æ€ï¼Œé¿å…é•¿æ—¶é—´æ— å“åº”å¯¼è‡´çš„è¿æ¥å…³é—­ã€‚</p>
</li>
<li>
<p><strong>ä¼˜åŒ–å®¢æˆ·ç«¯æ¸²æŸ“æ€§èƒ½</strong>ï¼šé‡‡ç”¨è™šæ‹Ÿæ»šåŠ¨ã€èŠ‚æµæ¸²æŸ“ç­‰æŠ€æœ¯å‡å°‘DOMæ“ä½œå¼€é”€ï¼Œæå‡æ¸²æŸ“æ€§èƒ½ã€‚å¯¹äºé«˜é¢‘æ›´æ–°çš„åœºæ™¯ï¼Œè€ƒè™‘ä½¿ç”¨Web Workersè¿›è¡Œæ•°æ®å¤„ç†ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
</li>
<li>
<p><strong>å…³æ³¨æœªæ¥æŠ€æœ¯å‘å±•</strong>ï¼šæŒç»­å…³æ³¨Webæ–°æŠ€æœ¯çš„å‘å±•ï¼Œå¦‚WebAssemblyã€HTTP/3ç­‰ï¼Œä¸ºæµå¼è¾“å‡ºæä¾›æ›´é«˜æ•ˆçš„å®ç°æ–¹å¼ã€‚</p>
</li>
</ol>
<p><strong>æµå¼è¾“å‡ºæŠ€æœ¯æ˜¯ç°ä»£Webåº”ç”¨çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œéšç€AIå’Œå®æ—¶äº¤äº’éœ€æ±‚çš„å¢åŠ ï¼Œå…¶é‡è¦æ€§å°†è¿›ä¸€æ­¥æå‡</strong>ã€‚æŒæ¡è¿™ä¸€æŠ€æœ¯ï¼Œå°†å¸®åŠ©å¼€å‘è€…åˆ›å»ºæ›´æµç•…ã€æ›´é«˜æ•ˆçš„Webåº”ç”¨ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥æµ…å‡ºAIæµå¼è¾“å‡ºï¼šä»åŸç†åˆ°Vueå®æˆ˜å®ç°]]></title>    <link>https://juejin.cn/post/7580297762190442537</link>    <guid>https://juejin.cn/post/7580297762190442537</guid>    <pubDate>2025-12-06T14:48:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580297762190442537" data-draft-id="7580297762190426153" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥æµ…å‡ºAIæµå¼è¾“å‡ºï¼šä»åŸç†åˆ°Vueå®æˆ˜å®ç°"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-06T14:48:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ €ç§‹666"/> <meta itemprop="url" content="https://juejin.cn/user/2566698322650307"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥æµ…å‡ºAIæµå¼è¾“å‡ºï¼šä»åŸç†åˆ°Vueå®æˆ˜å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2566698322650307/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ €ç§‹666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T14:48:00.000Z" title="Sat Dec 06 2025 14:48:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥æµ…å‡ºAIæµå¼è¾“å‡ºï¼šä»åŸç†åˆ°Vueå®æˆ˜å®ç°</h2>
<hr/>
<p>åœ¨å½“å‰å¤§æ¨¡å‹ï¼ˆLLMï¼‰å¹¿æ³›åº”ç”¨çš„èƒŒæ™¯ä¸‹ï¼Œç”¨æˆ·å¯¹â€œå“åº”é€Ÿåº¦â€çš„æ„ŸçŸ¥è¶Šæ¥è¶Šæ•æ„Ÿã€‚å½“æˆ‘ä»¬å‘AIæé—®æ—¶ï¼Œä¼ ç»Ÿâ€œç­‰å¾…å®Œæ•´ç»“æœè¿”å›â€çš„æ¨¡å¼å¸¸å¸¸å¸¦æ¥æ•°ç§’ç”šè‡³æ›´ä¹…çš„ç©ºç™½ç•Œé¢â€”â€”è™½ç„¶å®é™…ç½‘ç»œè¯·æ±‚å¯èƒ½åªèŠ±äº†1ç§’ï¼Œä½†ç”¨æˆ·çš„ç„¦è™‘æ„Ÿå´æˆå€æ”¾å¤§ã€‚</p>
<p>è€Œ<strong>æµå¼è¾“å‡ºï¼ˆStreaming Outputï¼‰</strong> æ­£æ˜¯ç ´è§£è¿™ä¸€ç—›ç‚¹çš„å…³é”®æŠ€æœ¯ã€‚å®ƒè®©AIåƒâ€œè¾¹æƒ³è¾¹è¯´â€ä¸€æ ·ï¼ŒæŠŠç”Ÿæˆçš„å†…å®¹é€å­—æ¨é€å‡ºæ¥ï¼Œæå¤§æå‡äº†äº¤äº’çš„æµç•…æ€§ä¸çœŸå®æ„Ÿã€‚</p>
<p>æœ¬æ–‡å°†ä»¥ <strong>Vue 3 + Vite</strong> ä¸ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ å®ç°ä¸€ä¸ªå®Œæ•´çš„ AI æµå¼å¯¹è¯åŠŸèƒ½ï¼Œå¹¶æ·±å…¥å‰–æåº•å±‚åŸç†ï¼ŒåŠ©ä½ åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å¿«é€Ÿè½åœ°ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦æµå¼è¾“å‡ºï¼Ÿå¯¹æ¯”ä¸¤ç§äº¤äº’æ¨¡å¼</h3>
<h4 data-id="heading-2">âŒ ä¼ ç»Ÿæ¨¡å¼ï¼šå…¨é‡å“åº” â†’ ç”¨æˆ·ä½“éªŒå·®</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// éæµå¼è¯·æ±‚</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/llm'</span>, { ... });
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
content.<span class="hljs-property">value</span> = data.<span class="hljs-property">content</span>; <span class="hljs-comment">// ä¸€æ¬¡æ€§èµ‹å€¼</span>
</code></pre>
<ul>
<li>âœ… å®ç°ç®€å•</li>
<li>âŒ ç”¨æˆ·éœ€ç­‰å¾…å…¨éƒ¨å†…å®¹ç”Ÿæˆå®Œæ¯•</li>
<li>âŒ é•¿æ–‡æœ¬åœºæ™¯ä¸‹å®¹æ˜“å‡ºç°â€œå¡æ­»â€é”™è§‰</li>
<li>âŒ è§†è§‰åé¦ˆå»¶è¿Ÿé«˜ï¼Œé™ä½ä¿¡ä»»æ„Ÿ</li>
</ul>
<h4 data-id="heading-3">âœ… æµå¼æ¨¡å¼ï¼šå¢é‡è¿”å› â†’ ç”¨æˆ·ä½“éªŒé£è·ƒ</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æµå¼è¯·æ±‚å¤„ç†</span>
<span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">const</span> { value, done } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
  <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">const</span> text = decoder.<span class="hljs-title function_">decode</span>(value);
  content.<span class="hljs-property">value</span> += <span class="hljs-title function_">parseChunk</span>(text); <span class="hljs-comment">// å®æ—¶æ‹¼æ¥</span>
}
</code></pre>
<ul>
<li>âœ… 1~2ç§’å†…å³å¯çœ‹åˆ°é¦–ä¸ªå­—ç¬¦</li>
<li>âœ… æ–‡å­—â€œæ‰“å­—æœºâ€æ•ˆæœå¢å¼ºæ²‰æµ¸æ„Ÿ</li>
<li>âœ… å®¢æˆ·ç«¯å¯è¾¹æ¥æ”¶è¾¹æ¸²æŸ“ï¼Œèµ„æºåˆ©ç”¨ç‡æ›´é«˜</li>
<li>âœ… æ›´ç¬¦åˆäººç±»å¯¹è¯èŠ‚å¥ï¼Œæå‡äº§å“è´¨æ„Ÿ</li>
</ul>
<blockquote>
<p>ğŸ“Œ <strong>å…³é”®æ´å¯Ÿ</strong>ï¼šç”¨æˆ·å¹¶ä¸å…³å¿ƒâ€œæ˜¯å¦çœŸçš„å¿«äº†â€ï¼Œè€Œæ˜¯å…³å¿ƒâ€œæœ‰æ²¡æœ‰åŠ¨é™â€ã€‚æµå¼è¾“å‡ºçš„æœ¬è´¨æ˜¯<strong>ç”¨å³æ—¶åé¦ˆå¯¹æŠ—ç­‰å¾…ç„¦è™‘</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">äºŒã€æŠ€æœ¯åŸºçŸ³ï¼šHTTP åˆ†å—ä¼ è¾“ä¸æµè§ˆå™¨æµ API</h3>
<h4 data-id="heading-5">2.1 åè®®å±‚æ”¯æŒï¼š<code>Transfer-Encoding: chunked</code></h4>
<p>æµå¼è¾“å‡ºä¾èµ–äº HTTP/1.1 çš„ <strong>åˆ†å—ä¼ è¾“ç¼–ç ï¼ˆChunked Transfer Encodingï¼‰</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨æ— éœ€çŸ¥é“æ€»é•¿åº¦ï¼Œå¯ä»¥ä¸€è¾¹ç”Ÿæˆæ•°æ®ä¸€è¾¹å‘é€</li>
<li>æ•°æ®è¢«åˆ†å‰²ä¸ºå¤šä¸ªâ€œå—â€ï¼ˆchunkï¼‰ï¼Œæ¯ä¸ªå—ç‹¬ç«‹ä¼ è¾“</li>
<li>å“åº”å¤´ä¸­åŒ…å« <code>Transfer-Encoding: chunked</code></li>
<li>æœ€ç»ˆä»¥ä¸€ä¸ªç©ºå—ï¼ˆ<code>0\r\n\r\n</code>ï¼‰è¡¨ç¤ºç»“æŸ</li>
</ul>
<p>è¿™æ˜¯å®ç°æµå¼å“åº”çš„åŸºç¡€åè®®æœºåˆ¶ã€‚</p>
<h4 data-id="heading-6">2.2 å‰ç«¯æ ¸å¿ƒ APIï¼šReadableStream ä¸ TextDecoder</h4>
<p>ç°ä»£æµè§ˆå™¨æä¾›äº†å¼ºå¤§çš„åŸç”Ÿæµå¤„ç†èƒ½åŠ›ï¼š</p>





















<table><thead><tr><th>API</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>response.body</code></td><td>è¿”å›ä¸€ä¸ª <code>ReadableStream&lt;Uint8Array&gt;</code></td></tr><tr><td><code>getReader()</code></td><td>è·å–æµè¯»å–å™¨ï¼Œç”¨äºé€å—è¯»å–</td></tr><tr><td><code>TextDecoder</code></td><td>å°†äºŒè¿›åˆ¶æ•°æ®è§£ç ä¸ºå­—ç¬¦ä¸²ï¼ˆUTF-8ï¼‰</td></tr></tbody></table>
<p>è¿™äº› API ä¸éœ€è¦é¢å¤–å®‰è£…åº“ï¼Œå¼€ç®±å³ç”¨ï¼Œéå¸¸é€‚åˆè½»é‡çº§é›†æˆã€‚</p>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€Vue å®æˆ˜ï¼šä¸€æ­¥æ­¥æ„å»º AI æµå¼å¯¹è¯ç³»ç»Ÿ</h3>
<p>æˆ‘ä»¬ä½¿ç”¨ Vue 3 + Vite æ„å»ºä¸€ä¸ªæç®€çš„ Demoï¼Œæ¥å…¥ DeepSeek API å®ç°æµå¼é—®ç­”ã€‚</p>
<h4 data-id="heading-8">3.1 åˆå§‹åŒ–é¡¹ç›®</h4>
<pre><code class="hljs language-bash" lang="bash">npm create vue@latest stream-demo
<span class="hljs-built_in">cd</span> stream-demo
npm install
</code></pre>
<p>é€‰æ‹©é»˜è®¤é…ç½®å³å¯ï¼Œç¡®ä¿å¯ç”¨ Vue 3 å’Œ JavaScript æ”¯æŒã€‚</p>
<h4 data-id="heading-9">3.2 åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼ˆå®‰å…¨å­˜å‚¨å¯†é’¥ï¼‰</h4>
<pre><code class="hljs language-env" lang="env"># .env
VITE_DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxx
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šä¸è¦æäº¤ <code>.env</code> åˆ° Gitï¼æ·»åŠ åˆ° <code>.gitignore</code>ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-10">3.3 æ ¸å¿ƒé€»è¾‘ï¼šApp.vue</h4>
<h5 data-id="heading-11">ï¼ˆ1ï¼‰å“åº”å¼çŠ¶æ€å®šä¹‰</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref } from 'vue'

// ç”¨æˆ·è¾“å…¥çš„é—®é¢˜
const question = ref('è®²ä¸€ä¸ªå–œç¾Šç¾Šå’Œç°å¤ªç‹¼çš„æ•…äº‹ï¼Œ20å­—')

// æ˜¯å¦å¯ç”¨æµå¼è¾“å‡º
const stream = ref(true)

// å­˜å‚¨å¹¶å±•ç¤ºæ¨¡å‹è¿”å›å†…å®¹
const content = ref('')
&lt;/script&gt;
</code></pre>
<p>åˆ©ç”¨ <code>ref</code> å®ç°å“åº”å¼æ›´æ–°ï¼Œæ¯æ¬¡ <code>content.value += delta</code> éƒ½ä¼šè§¦å‘è§†å›¾é‡ç»˜ã€‚</p>
<hr/>
<h5 data-id="heading-12">ï¼ˆ2ï¼‰å‘é€è¯·æ±‚ &amp; å¤„ç†æµå¼å“åº”</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">askLLM</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!question.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>()) {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·è¾“å…¥é—®é¢˜'</span>)
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-comment">// æ˜¾ç¤ºåŠ è½½æç¤º</span>
  content.<span class="hljs-property">value</span> = <span class="hljs-string">'ğŸ§  æ€è€ƒä¸­...'</span>

  <span class="hljs-keyword">const</span> endpoint = <span class="hljs-string">'https://api.deepseek.com/chat/completions'</span>
  <span class="hljs-keyword">const</span> headers = {
    <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${<span class="hljs-keyword">import</span>.meta.env.VITE_DEEPSEEK_API_KEY}</span>`</span>,
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(endpoint, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      headers,
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>,
        <span class="hljs-attr">stream</span>: stream.<span class="hljs-property">value</span>,
        <span class="hljs-attr">messages</span>: [
          { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: question.<span class="hljs-property">value</span> }
        ]
      })
    })

    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`è¯·æ±‚å¤±è´¥ï¼š<span class="hljs-subst">${response.status}</span>`</span>)
    }

    <span class="hljs-comment">// åŒºåˆ†æµå¼ / éæµå¼</span>
    <span class="hljs-keyword">if</span> (stream.<span class="hljs-property">value</span>) {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">handleStreamResponse</span>(response)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()
      content.<span class="hljs-property">value</span> = data.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>
    }
  } <span class="hljs-keyword">catch</span> (error) {
    content.<span class="hljs-property">value</span> = <span class="hljs-string">`âŒ è¯·æ±‚å¤±è´¥ï¼š<span class="hljs-subst">${error.message}</span>`</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error)
  }
}
</code></pre>
<hr/>
<h5 data-id="heading-13">ï¼ˆ3ï¼‰æµå¼å¤„ç†æ ¸å¿ƒå‡½æ•°</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleStreamResponse</span>(<span class="hljs-params">response</span>) {
  <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>()
  <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>()
  <span class="hljs-keyword">let</span> buffer = <span class="hljs-string">''</span> <span class="hljs-comment">// ç¼“å­˜ä¸å®Œæ•´ JSON ç‰‡æ®µ</span>
  <span class="hljs-keyword">let</span> done = <span class="hljs-literal">false</span>

  <span class="hljs-keyword">while</span> (!done) {
    <span class="hljs-keyword">const</span> { value, <span class="hljs-attr">done</span>: readerDone } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>()
    done = readerDone

    <span class="hljs-comment">// è§£ç äºŒè¿›åˆ¶æ•°æ®</span>
    <span class="hljs-keyword">const</span> chunk = buffer + decoder.<span class="hljs-title function_">decode</span>(value, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> })
    buffer = <span class="hljs-string">''</span>

    <span class="hljs-comment">// æŒ‰è¡Œå¤„ç† SSE æ ¼å¼æ•°æ®</span>
    <span class="hljs-keyword">const</span> lines = chunk.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'data: '</span>))

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> lines) {
      <span class="hljs-keyword">const</span> raw = line.<span class="hljs-title function_">slice</span>(<span class="hljs-number">6</span>).<span class="hljs-title function_">trim</span>() <span class="hljs-comment">// å»é™¤ "data: "</span>

      <span class="hljs-keyword">if</span> (raw === <span class="hljs-string">'[DONE]'</span>) {
        done = <span class="hljs-literal">true</span>
        <span class="hljs-keyword">break</span>
      }

      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(raw)
        <span class="hljs-keyword">const</span> delta = json.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">delta</span>?.<span class="hljs-property">content</span>
        <span class="hljs-keyword">if</span> (delta) {
          content.<span class="hljs-property">value</span> += delta <span class="hljs-comment">// å®æ—¶è¿½åŠ </span>
        }
      } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-comment">// å¯èƒ½æ˜¯ä¸å®Œæ•´çš„ JSONï¼Œç¼“å­˜èµ·æ¥ç­‰ä¸‹ä¸€å¸§</span>
        buffer = <span class="hljs-string">'data:'</span> + raw
      }
    }
  }

  reader.<span class="hljs-title function_">releaseLock</span>()
}
</code></pre>
<p>ğŸ” <strong>é‡ç‚¹è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>decoder.decode(value, { stream: true })</code>ï¼šå¯ç”¨æµå¼è§£ç ï¼Œé˜²æ­¢å¤šå­—èŠ‚å­—ç¬¦è¢«æˆªæ–­</li>
<li><code>buffer</code> ç¼“å­˜æœºåˆ¶ï¼šè§£å†³å›  TCP åˆ†åŒ…å¯¼è‡´çš„ JSON è¢«æ‹†åˆ†é—®é¢˜</li>
<li><code>slice(6)</code> æå–æœ‰æ•ˆæ•°æ®ï¼Œè¿‡æ»¤ <code>data:</code> å‰ç¼€</li>
<li><code>JSON.parse</code> åŠ  <code>try-catch</code> æ˜¯å¿…é¡»çš„ï¼Œé¿å…è§£æå¤±è´¥ä¸­æ–­æ•´ä¸ªæµç¨‹</li>
</ul>
<hr/>
<h4 data-id="heading-14">3.4 æ¨¡æ¿ç»“æ„ï¼šç®€æ´ç›´è§‚çš„ UI</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="container"&gt;
    &lt;!-- è¾“å…¥åŒº --&gt;
    &lt;div class="input-group"&gt;
      &lt;label&gt;é—®é¢˜ï¼š&lt;/label&gt;
      &lt;input v-model="question" placeholder="è¯·è¾“å…¥ä½ æƒ³é—®çš„é—®é¢˜..." /&gt;
      &lt;button @click="askLLM"&gt;å‘é€&lt;/button&gt;
    &lt;/div&gt;

    &lt;!-- æ§åˆ¶å¼€å…³ --&gt;
    &lt;div class="control"&gt;
      &lt;label&gt;
        &lt;input type="checkbox" v-model="stream" /&gt;
        å¯ç”¨æµå¼è¾“å‡º
      &lt;/label&gt;
    &lt;/div&gt;

    &lt;!-- è¾“å‡ºåŒº --&gt;
    &lt;div class="output-box"&gt;
      &lt;h3&gt;AI å›ç­”ï¼š&lt;/h3&gt;
      &lt;p&gt;{{ content }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<hr/>
<h4 data-id="heading-15">3.5 æ ·å¼ç¾åŒ–ï¼ˆå¯é€‰ï¼‰</h4>
<pre><code class="hljs language-css" lang="css">&lt;style scoped&gt;
<span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">40px</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, Roboto, sans-serif;
}

<span class="hljs-selector-class">.input-group</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">"text"</span>]</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
}

<span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#007aff</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#005edc</span>;
}

<span class="hljs-selector-class">.control</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">16px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
}

<span class="hljs-selector-class">.output-box</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f9f9fb</span>;
  <span class="hljs-attribute">white-space</span>: pre-wrap;
  <span class="hljs-attribute">word-wrap</span>: break-word;
}

<span class="hljs-selector-class">.output-box</span> <span class="hljs-selector-tag">p</span> {
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
}
&lt;/style&gt;
</code></pre>
<hr/>
<h3 data-id="heading-16">å››ã€å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–ç­–ç•¥</h3>
<h4 data-id="heading-17">âœ… Q1ï¼šä¸ºä»€ä¹ˆæœ‰æ—¶ä¼šå‡ºç°ä¹±ç æˆ–è§£æé”™è¯¯ï¼Ÿ</h4>
<p><strong>åŸå› </strong>ï¼šç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå®Œæ•´çš„ JSON å­—ç¬¦ä¸²å¯èƒ½è¢«åˆ†æˆä¸¤ä¸ª <code>Uint8Array</code> å‘é€ï¼Œå¯¼è‡´å•æ¬¡ <code>decode</code> å¾—åˆ°çš„æ˜¯åŠæˆªå­—ç¬¦ä¸²ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>buffer</code> ç¼“å­˜æœªå®Œæˆçš„æ•°æ®</li>
<li>åœ¨ä¸‹æ¬¡è¯»å–æ—¶æ‹¼æ¥åé‡æ–°å°è¯•è§£æ</li>
<li>è®¾ç½® <code>stream: true</code> å‚æ•°ç»™ <code>TextDecoder.decode()</code></li>
</ul>
<hr/>
<h4 data-id="heading-18">âœ… Q2ï¼šå¦‚ä½•é˜²æ­¢é¢‘ç¹ DOM æ›´æ–°å½±å“æ€§èƒ½ï¼Ÿ</h4>
<p>è™½ç„¶ Vue çš„å“åº”å¼ç³»ç»Ÿå¾ˆé«˜æ•ˆï¼Œä½†é«˜é¢‘å­—ç¬¦ä¸²æ‹¼æ¥ä»å¯èƒ½å¯¼è‡´é‡æ’ã€‚</p>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä½¿ç”¨ requestAnimationFrame é™åˆ¶æ¸²æŸ“é¢‘ç‡</span>
<span class="hljs-keyword">let</span> pending = <span class="hljs-literal">false</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">scheduleUpdate</span>(<span class="hljs-params">delta</span>) {
  <span class="hljs-keyword">if</span> (!pending) {
    <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
      content.<span class="hljs-property">value</span> += delta
      pending = <span class="hljs-literal">false</span>
    })
  }
}
</code></pre>
<p>é€‚ç”¨äºè¶…é«˜é€Ÿè¾“å‡ºåœºæ™¯ï¼ˆå¦‚ä»£ç ç”Ÿæˆï¼‰ã€‚</p>
<hr/>
<h4 data-id="heading-19">âœ… Q3ï¼šå¦‚ä½•æ”¯æŒå–æ¶ˆè¯·æ±‚ï¼Ÿ</h4>
<p>å¼•å…¥ <code>AbortController</code> å³å¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>()

<span class="hljs-comment">// åœ¨ fetch ä¸­ä¼ å…¥ signal</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, {
  <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span>,
  <span class="hljs-comment">// ...</span>
})

<span class="hljs-comment">// æä¾›å–æ¶ˆæŒ‰é’®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">cancelRequest</span> = (<span class="hljs-params"/>) =&gt; controller.<span class="hljs-title function_">abort</span>()
</code></pre>
<hr/>
<h3 data-id="heading-20">äº”ã€åº”ç”¨åœºæ™¯æ‹“å±•</h3>
<p>æµå¼è¾“å‡ºä¸ä»…é™äº LLM å¯¹è¯ï¼Œè¿˜å¯ç”¨äºï¼š</p>





























<table><thead><tr><th>åœºæ™¯</th><th>åº”ç”¨ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ğŸ¤– èŠå¤©æœºå™¨äºº</td><td>å®æ—¶å¯¹è¯ã€å®¢æœç³»ç»Ÿ</td></tr><tr><td>ğŸ“„ æ–‡æ¡£ç”Ÿæˆ</td><td>æŠ¥å‘Šã€åˆåŒã€æ–‡æ¡ˆè‡ªåŠ¨ç”Ÿæˆ</td></tr><tr><td>ğŸ’¾ æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</td><td>æ˜¾ç¤ºè¿›åº¦æ¡</td></tr><tr><td>ğŸ“Š æ—¥å¿—ç›‘æ§</td><td>å®æ—¶æ—¥å¿—æµå±•ç¤º</td></tr><tr><td>ğŸ§® æ•°æ®åˆ†æ</td><td>å¤§æ‰¹é‡è®¡ç®—ç»“æœé€æ­¥å‘ˆç°</td></tr></tbody></table>
<p>åªè¦æ¶‰åŠâ€œé•¿æ—¶é—´ä»»åŠ¡ + æ¸è¿›å¼ç»“æœâ€ï¼Œéƒ½å¯ä»¥è€ƒè™‘ä½¿ç”¨æµå¼æ€æƒ³ä¼˜åŒ–ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-21">å…­ã€æ€»ç»“ï¼šæŒæ¡æµå¼è¾“å‡ºï¼Œè®©ä½ çš„ AI åº”ç”¨è„±é¢–è€Œå‡º</h3>
<p>æµå¼è¾“å‡ºä¸æ˜¯ç‚«æŠ€ï¼Œè€Œæ˜¯ä¸€ç§<strong>ä»¥äººä¸ºæœ¬çš„è®¾è®¡æ€ç»´</strong>ã€‚å®ƒæŠŠâ€œç­‰å¾…â€å˜æˆäº†â€œå‚ä¸â€ï¼Œè®©ç”¨æˆ·æ„Ÿå—åˆ°ç³»ç»Ÿçš„â€œæ€è€ƒè¿‡ç¨‹â€ï¼Œä»è€Œå»ºç«‹æ›´å¼ºçš„ä¿¡ä»»æ„Ÿã€‚</p>
<p>é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†ï¼š</p>
<h3 data-id="heading-22">âœ… å¦‚ä½•å‘èµ·å¸¦ <code>stream=true</code> çš„ LLM è¯·æ±‚<br/>
âœ… å¦‚ä½•ä½¿ç”¨ <code>ReadableStream</code> å¤„ç†åˆ†å—æ•°æ®<br/>
âœ… å¦‚ä½•ç”¨ <code>TextDecoder</code> å®‰å…¨è§£æäºŒè¿›åˆ¶æµ<br/>
âœ… å¦‚ä½•åœ¨ Vue ä¸­å®ç°å®æ—¶æ¸²æŸ“<br/>
âœ… å¦‚ä½•åº”å¯¹æµå¼ä¸­çš„è¾¹ç•Œæƒ…å†µï¼ˆå¦‚ JSON æˆªæ–­ï¼‰</h3>
<h3 data-id="heading-23">â¤ï¸ å†™åœ¨æœ€å</h3>
<p>éšç€ AIGC çš„æ™®åŠï¼Œå‰ç«¯å·¥ç¨‹å¸ˆçš„è§’è‰²æ­£åœ¨ä»â€œé¡µé¢æ­å»ºè€…â€è½¬å‘â€œæ™ºèƒ½äº¤äº’è®¾è®¡å¸ˆâ€ã€‚æŒæ¡æµå¼è¾“å‡ºè¿™ç±»æ ¸å¿ƒæŠ€æœ¯ï¼Œä¸ä»…èƒ½åšå‡ºæ›´å¥½ç”¨çš„äº§å“ï¼Œä¹Ÿèƒ½åœ¨æœªæ¥çš„æŠ€æœ¯æµªæ½®ä¸­å æ®å…ˆæœºã€‚</p>
<blockquote>
<p><strong>åŠ¨æ‰‹æ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼ã€‚</strong>
æ‰“å¼€ç¼–è¾‘å™¨ï¼Œè¿è¡Œä¸€éè¿™ä¸ª Demoï¼Œäº²è‡ªæ„Ÿå—é‚£ç§â€œæ–‡å­—è·ƒç„¶å±ä¸Šâ€çš„ä¸æ»‘ä½“éªŒå§ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ Next.js æºç ï¼šImage ç»„ä»¶ Color Placeholder å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7580297762190475305</link>    <guid>https://juejin.cn/post/7580297762190475305</guid>    <pubDate>2025-12-06T14:59:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580297762190475305" data-draft-id="7580277964341493770" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ Next.js æºç ï¼šImage ç»„ä»¶ Color Placeholder å®ç°åŸç†"/> <meta itemprop="keywords" content="Next.js"/> <meta itemprop="datePublished" content="2025-12-06T14:59:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bytemanx"/> <meta itemprop="url" content="https://juejin.cn/user/4059855780846936"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ Next.js æºç ï¼šImage ç»„ä»¶ Color Placeholder å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4059855780846936/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bytemanx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T14:59:38.000Z" title="Sat Dec 06 2025 14:59:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥ Next.js æºç ï¼šImage ç»„ä»¶ Color Placeholder å®ç°åŸç†</h2>
<blockquote>
<p>æœ¬æ–‡å°†æ·±å…¥ Next.js æºç ï¼Œè§£æ Image ç»„ä»¶æ˜¯å¦‚ä½•ç”¨ä¸€ä¸ªä»… 35 å­—èŠ‚çš„ 1x1 åƒç´  GIFï¼Œç”Ÿæˆå…¨å°ºå¯¸æ¨¡ç³Šå ä½ç¬¦çš„ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€å¼•è¨€</h3>
<p>åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œå›¾ç‰‡åŠ è½½ä½“éªŒç›´æ¥å½±å“ç”¨æˆ·çš„ç¬¬ä¸€å°è±¡ã€‚å½“ç”¨æˆ·æ‰“å¼€é¡µé¢æ—¶ï¼Œå¦‚æœçœ‹åˆ°çš„æ˜¯ç©ºç™½åŒºåŸŸæˆ–è€…å¸ƒå±€è·³åŠ¨ï¼Œä½“éªŒä¼šå¤§æ‰“æŠ˜æ‰£ã€‚</p>
<p>Next.js çš„ Image ç»„ä»¶æä¾›äº† <code>placeholder="blur"</code> åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å›¾ç‰‡åŠ è½½å®Œæˆå‰æ˜¾ç¤ºä¸€ä¸ªæ¨¡ç³Šçš„å ä½ç¬¦ã€‚å¯¹äºé™æ€å¯¼å…¥çš„å›¾ç‰‡ï¼ŒNext.js ä¼šåœ¨æ„å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆ blurDataURLï¼›è€Œå¯¹äºåŠ¨æ€å›¾ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æä¾›ä¸€ä¸ªçº¯è‰²å ä½ç¬¦ã€‚è¿™å¼ gifæ˜¯3Gç½‘ç»œçŠ¶æ€ä¸‹å½•å±æ•ˆæœã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58710d295b3347c8bd138e27e40cb738~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYnl0ZW1hbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765637977&amp;x-signature=4zi6phC3CyuOk2VdEhyfTF3e%2Fg4%3D" alt="Adobe Express - 4c9a1e5b574e99f432a22cfd68db2fcd.gif" loading="lazy"/></p>
<h3 data-id="heading-2">äºŒã€ä½¿ç”¨ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬å…ˆçœ‹å®˜æ–¹examplesçš„ Color Placeholder <strong>æºç ä½ç½®</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fblob%2Fcanary%2Fexamples%2Fimage-component%2Fapp%2Fcolor%2Fpage.tsx" target="_blank" title="https://github.com/vercel/next.js/blob/canary/examples/image-component/app/color/page.tsx" ref="nofollow noopener noreferrer">examples/image-component/app/color/page.tsx</a></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// app/color/page.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/image"</span>;

<span class="hljs-comment">// ç”Ÿæˆ 1x1 åƒç´  GIF çš„ base64 ç¼–ç </span>
<span class="hljs-keyword">const</span> keyStr =
  <span class="hljs-string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">triplet</span> = (<span class="hljs-params">e1: <span class="hljs-built_in">number</span>, e2: <span class="hljs-built_in">number</span>, e3: <span class="hljs-built_in">number</span></span>) =&gt;
  keyStr.<span class="hljs-title function_">charAt</span>(e1 &gt;&gt; <span class="hljs-number">2</span>) +
  keyStr.<span class="hljs-title function_">charAt</span>(((e1 &amp; <span class="hljs-number">3</span>) &lt;&lt; <span class="hljs-number">4</span>) | (e2 &gt;&gt; <span class="hljs-number">4</span>)) +
  keyStr.<span class="hljs-title function_">charAt</span>(((e2 &amp; <span class="hljs-number">15</span>) &lt;&lt; <span class="hljs-number">2</span>) | (e3 &gt;&gt; <span class="hljs-number">6</span>)) +
  keyStr.<span class="hljs-title function_">charAt</span>(e3 &amp; <span class="hljs-number">63</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">rgbDataURL</span> = (<span class="hljs-params">r: <span class="hljs-built_in">number</span>, g: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) =&gt;
  <span class="hljs-string">`data:image/gif;base64,R0lGODlhAQABAPAA<span class="hljs-subst">${
    triplet(<span class="hljs-number">0</span>, r, g) + triplet(b, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>)
  }</span>/yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==`</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Color</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"Dog"</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">"/dog.jpg"</span>
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"blur"</span>
      <span class="hljs-attr">blurDataURL</span>=<span class="hljs-string">{rgbDataURL(237,</span> <span class="hljs-attr">181</span>, <span class="hljs-attr">6</span>)}  // <span class="hljs-attr">æ©™é»„è‰²</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">{750}</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">{1000}</span>
    /&gt;</span></span>
  );
}
</code></pre>
<p>è¿™æ®µä»£ç åšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li><strong><code>rgbDataURL</code> å‡½æ•°</strong>ï¼šæ ¹æ® RGB å€¼ç”Ÿæˆä¸€ä¸ª 1x1 åƒç´ çš„ GIF Data URL</li>
<li><strong>Image ç»„ä»¶</strong>ï¼šé€šè¿‡ <code>placeholder="blur"</code> å’Œ <code>blurDataURL</code> å±æ€§ï¼Œåœ¨å›¾ç‰‡åŠ è½½å‰æ˜¾ç¤ºè¯¥é¢œè‰²çš„æ¨¡ç³Šå ä½ç¬¦</li>
</ol>
<p>è¿è¡Œåï¼Œä½ ä¼šçœ‹åˆ°å›¾ç‰‡åŠ è½½å‰å…ˆæ˜¾ç¤ºä¸€ä¸ªæ©™é»„è‰²çš„æ¨¡ç³ŠèƒŒæ™¯ï¼ŒåŠ è½½å®Œæˆåå¹³æ»‘è¿‡æ¸¡åˆ°çœŸå®å›¾ç‰‡ï¼Œ å°±åƒä¸Šé¢çš„gifä¸€æ ·ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€1x1 åƒç´  GIF åŸç†</h3>
<h4 data-id="heading-4">3.1 ä¸ºä»€ä¹ˆé€‰æ‹© GIFï¼Ÿ</h4>
<p>åœ¨æ‰€æœ‰å›¾ç‰‡æ ¼å¼ä¸­ï¼ŒGIF æ˜¯ç”Ÿæˆå•åƒç´ å›¾ç‰‡æœ€å°çš„é€‰æ‹©ï¼š</p>

























<table><thead><tr><th>æ ¼å¼</th><th>1x1 åƒç´ å¤§å°</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>GIF</td><td>~35 bytes</td><td>æœ€å°ï¼Œæ”¯æŒé€æ˜</td></tr><tr><td>PNG</td><td>~67 bytes</td><td>è¾ƒå¤§ï¼Œæ— æŸå‹ç¼©</td></tr><tr><td>JPEG</td><td>~134 bytes</td><td>æœ€å¤§ï¼Œæœ‰æŸå‹ç¼©</td></tr></tbody></table>
<h4 data-id="heading-5">3.2 GIF æ–‡ä»¶ç»“æ„</h4>
<p>ä¸€ä¸ªæœ€å°çš„ GIF æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">GIF89a</span>           <span class="hljs-comment">// æ–‡ä»¶å¤´ (6 bytes)</span>
<span class="hljs-selector-attr">[å®½åº¦]</span><span class="hljs-selector-attr">[é«˜åº¦]</span>      <span class="hljs-comment">// é€»è¾‘å±å¹•æè¿°ç¬¦ (7 bytes)</span>
<span class="hljs-selector-attr">[å…¨å±€é¢œè‰²è¡¨]</span>      <span class="hljs-comment">// åŒ…å«æˆ‘ä»¬çš„é¢œè‰² (3 bytes)</span>
<span class="hljs-selector-attr">[å›¾åƒæè¿°ç¬¦]</span>      <span class="hljs-comment">// å›¾åƒå— (10 bytes)</span>
<span class="hljs-selector-attr">[å›¾åƒæ•°æ®]</span>        <span class="hljs-comment">// LZW å‹ç¼©æ•°æ® (è‹¥å¹² bytes)</span>
<span class="hljs-selector-tag">GIF</span> ç»“æŸç¬¦        <span class="hljs-comment">// (1 byte)</span>
</code></pre>
<h3 data-id="heading-6">å››ã€æºç åˆ†æ</h3>
<p>Next.js Image ç»„ä»¶çš„æºç ä½äº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js" target="_blank" title="https://github.com/vercel/next.js" ref="nofollow noopener noreferrer">vercel/next.js</a> ä»“åº“ã€‚æˆ‘ä»¬æŒ‰ç…§è°ƒç”¨é“¾è‡ªé¡¶å‘ä¸‹åˆ†æã€‚</p>
<h4 data-id="heading-7">4.1 Image ç»„ä»¶å…¥å£</h4>
<p><strong>æºç ä½ç½®</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fblob%2Fcanary%2Fpackages%2Fnext%2Fsrc%2Fclient%2Fimage-component.tsx" target="_blank" title="https://github.com/vercel/next.js/blob/canary/packages/next/src/client/image-component.tsx" ref="nofollow noopener noreferrer">packages/next/src/client/image-component.tsx</a></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-string">'use client'</span>

<span class="hljs-keyword">import</span> { useState, useCallback, forwardRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { getImgProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'../shared/lib/get-img-props'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Image</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, forwardedRef</span>) =&gt;</span> {
  <span class="hljs-comment">// 1. çŠ¶æ€ç®¡ç†ï¼šå ä½ç¬¦æ˜¯å¦å®Œæˆ</span>
  <span class="hljs-keyword">const</span> [blurComplete, setBlurComplete] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)
  
  <span class="hljs-comment">// 2. è°ƒç”¨ getImgProps ç”Ÿæˆ &lt;img&gt; çš„æ‰€æœ‰å±æ€§</span>
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">props</span>: imgAttributes, <span class="hljs-attr">meta</span>: imgMeta } = <span class="hljs-title function_">getImgProps</span>(props, {
    defaultLoader,
    <span class="hljs-attr">imgConf</span>: config,
    blurComplete,  <span class="hljs-comment">// ä¼ å…¥å½“å‰çŠ¶æ€</span>
    showAltText
  })

  <span class="hljs-comment">// 3. æ¸²æŸ“ img å…ƒç´ </span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span>
      {<span class="hljs-attr">...imgAttributes</span>}
      <span class="hljs-attr">onLoad</span>=<span class="hljs-string">{(event)</span> =&gt;</span> {
        // 4. å›¾ç‰‡åŠ è½½å®Œæˆåï¼Œç§»é™¤å ä½ç¬¦
        handleLoading(event.currentTarget, placeholder, setBlurComplete)
      }}
      onError={() =&gt; {
        setBlurComplete(true)  // åŠ è½½å¤±è´¥ä¹Ÿç§»é™¤å ä½ç¬¦
      }}
    /&gt;</span>
  )
})
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>'use client'</code> æ ‡è®°ï¼šè¿™æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»„ä»¶ï¼Œä½†æ”¯æŒ SSRï¼ˆ<code>getImgProps</code> åœ¨æœåŠ¡ç«¯ä¹Ÿèƒ½æ‰§è¡Œï¼‰</li>
<li><code>blurComplete</code> çŠ¶æ€ï¼šæ§åˆ¶å ä½ç¬¦çš„æ˜¾ç¤º/éšè—</li>
<li>å›¾ç‰‡åŠ è½½å®Œæˆåè°ƒç”¨ <code>setBlurComplete(true)</code>ï¼Œè§¦å‘é‡æ¸²æŸ“ç§»é™¤å ä½ç¬¦</li>
</ul>
<h4 data-id="heading-8">4.2 å›¾ç‰‡åŠ è½½å¤„ç†</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLoading</span>(<span class="hljs-params">
  img: HTMLImageElement,
  placeholder: <span class="hljs-built_in">string</span>,
  setBlurComplete: (v: <span class="hljs-built_in">boolean</span>) =&gt; <span class="hljs-built_in">void</span>,
</span>) {
  <span class="hljs-comment">// ç­‰å¾…å›¾ç‰‡è§£ç å®Œæˆï¼Œé¿å…é—ªçƒ</span>
  <span class="hljs-keyword">const</span> p = <span class="hljs-string">'decode'</span> <span class="hljs-keyword">in</span> img ? img.<span class="hljs-title function_">decode</span>() : <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>()
  
  p.<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {}).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (placeholder !== <span class="hljs-string">'empty'</span>) {
      <span class="hljs-title function_">setBlurComplete</span>(<span class="hljs-literal">true</span>)  <span class="hljs-comment">// è§¦å‘é‡æ¸²æŸ“</span>
    }
  })
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦ <code>img.decode()</code>ï¼Ÿ</strong></p>
<p>ç›´æ¥åœ¨ <code>onLoad</code> ä¸­ç§»é™¤å ä½ç¬¦å¯èƒ½å¯¼è‡´é—ªçƒâ€”â€”å›¾ç‰‡æ•°æ®è™½ç„¶ä¸‹è½½å®Œæˆï¼Œä½†æµè§ˆå™¨è¿˜æ²¡è§£ç æˆåƒç´ ã€‚<code>img.decode()</code> ç¡®ä¿è§£ç å®Œæˆåå†åˆ‡æ¢ï¼Œè¿‡æ¸¡æ›´å¹³æ»‘ã€‚</p>
<h4 data-id="heading-9">4.3 å±æ€§ç”Ÿæˆé€»è¾‘</h4>
<p><strong>æºç ä½ç½®</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fblob%2Fcanary%2Fpackages%2Fnext%2Fsrc%2Fshared%2Flib%2Fget-img-props.ts" target="_blank" title="https://github.com/vercel/next.js/blob/canary/packages/next/src/shared/lib/get-img-props.ts" ref="nofollow noopener noreferrer">packages/next/src/shared/lib/get-img-props.ts</a></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { getImageBlurSvg } <span class="hljs-keyword">from</span> <span class="hljs-string">'./image-blur-svg'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getImgProps</span>(<span class="hljs-params">props, _state</span>) {
  <span class="hljs-keyword">const</span> { blurComplete } = _state
  
  <span class="hljs-comment">// æ ¸å¿ƒï¼šæ ¹æ®çŠ¶æ€å†³å®šæ˜¯å¦ç”Ÿæˆå ä½ç¬¦èƒŒæ™¯</span>
  <span class="hljs-keyword">const</span> backgroundImage = !blurComplete &amp;&amp; placeholder !== <span class="hljs-string">'empty'</span> 
    ? placeholder === <span class="hljs-string">'blur'</span> 
      <span class="hljs-comment">// è°ƒç”¨ getImageBlurSvg ç”Ÿæˆ SVG æ¨¡ç³Šæ»¤é•œ</span>
      ? <span class="hljs-string">`url("data:image/svg+xml;charset=utf-8,<span class="hljs-subst">${getImageBlurSvg({
          widthInt,
          heightInt,
          blurWidth,
          blurHeight,
          blurDataURL: blurDataURL || <span class="hljs-string">''</span>,
          objectFit: imgStyle.objectFit
        })}</span>")`</span>
      : <span class="hljs-string">`url("<span class="hljs-subst">${placeholder}</span>")`</span>
    : <span class="hljs-literal">null</span>;

  <span class="hljs-comment">// ç”Ÿæˆå ä½ç¬¦æ ·å¼</span>
  <span class="hljs-keyword">let</span> placeholderStyle = backgroundImage ? {
    backgroundSize,
    <span class="hljs-attr">backgroundPosition</span>: imgStyle.<span class="hljs-property">objectPosition</span> || <span class="hljs-string">'50% 50%'</span>,
    <span class="hljs-attr">backgroundRepeat</span>: <span class="hljs-string">'no-repeat'</span>,
    backgroundImage
  } : {};

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: {
      <span class="hljs-attr">style</span>: {
        ...imgStyle,
        ...placeholderStyle,
        <span class="hljs-attr">color</span>: <span class="hljs-string">'transparent'</span>  <span class="hljs-comment">// éšè— alt æ–‡å­—</span>
      },
      <span class="hljs-attr">src</span>: imgAttributes.<span class="hljs-property">src</span>,
      <span class="hljs-attr">srcSet</span>: imgAttributes.<span class="hljs-property">srcSet</span>,
      <span class="hljs-comment">// ...</span>
    }
  }
}
</code></pre>
<p><strong>é€»è¾‘æµç¨‹</strong>ï¼š</p>
<ol>
<li><code>blurComplete === false</code> ä¸” <code>placeholder === 'blur'</code> â†’ ç”Ÿæˆå ä½ç¬¦</li>
<li>è°ƒç”¨ <code>getImageBlurSvg()</code> ç”Ÿæˆ SVG Data URL</li>
<li>å°† SVG ä½œä¸º <code>background-image</code> è®¾ç½®åˆ° <code>&lt;img&gt;</code> å…ƒç´ </li>
<li>å›¾ç‰‡åŠ è½½å®Œæˆå <code>blurComplete</code> å˜ä¸º <code>true</code>ï¼Œé‡æ¸²æŸ“æ—¶ <code>backgroundImage</code> ä¸º <code>null</code></li>
</ol>
<h4 data-id="heading-10">4.4 SVG æ¨¡ç³Šæ»¤é•œç”Ÿæˆ</h4>
<p><strong>æºç ä½ç½®</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fblob%2Fcanary%2Fpackages%2Fnext%2Fsrc%2Fshared%2Flib%2Fimage-blur-svg.ts" target="_blank" title="https://github.com/vercel/next.js/blob/canary/packages/next/src/shared/lib/image-blur-svg.ts" ref="nofollow noopener noreferrer">packages/next/src/shared/lib/image-blur-svg.ts</a></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getImageBlurSvg</span>(<span class="hljs-params">{
  widthInt,
  heightInt,
  blurWidth,
  blurHeight,
  blurDataURL,
  objectFit,
}: {
  widthInt?: <span class="hljs-built_in">number</span>
  heightInt?: <span class="hljs-built_in">number</span>
  blurWidth?: <span class="hljs-built_in">number</span>
  blurHeight?: <span class="hljs-built_in">number</span>
  blurDataURL: <span class="hljs-built_in">string</span>
  objectFit?: <span class="hljs-built_in">string</span>
}</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">const</span> std = <span class="hljs-number">20</span>  <span class="hljs-comment">// é«˜æ–¯æ¨¡ç³Šæ ‡å‡†å·®</span>
  
  <span class="hljs-comment">// å…³é”®ï¼šæ”¾å¤§ 40 å€ï¼Œä¸ºæ¨¡ç³Šæä¾›è¶³å¤Ÿç©ºé—´</span>
  <span class="hljs-keyword">const</span> svgWidth = blurWidth ? blurWidth * <span class="hljs-number">40</span> : widthInt
  <span class="hljs-keyword">const</span> svgHeight = blurHeight ? blurHeight * <span class="hljs-number">40</span> : heightInt

  <span class="hljs-keyword">const</span> viewBox = svgWidth &amp;&amp; svgHeight 
    ? <span class="hljs-string">`viewBox='0 0 <span class="hljs-subst">${svgWidth}</span> <span class="hljs-subst">${svgHeight}</span>'`</span> 
    : <span class="hljs-string">''</span>

  <span class="hljs-comment">// SVG æ»¤é•œç®¡é“</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">`%3Csvg xmlns='http://www.w3.org/2000/svg' <span class="hljs-subst">${viewBox}</span>%3E
    %3Cfilter id='b' color-interpolation-filters='sRGB'%3E
      %3CfeGaussianBlur stdDeviation='<span class="hljs-subst">${std}</span>'/%3E
      %3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E
      %3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E
      %3CfeComposite operator='out' in='s'/%3E
      %3CfeComposite in2='SourceGraphic'/%3E
      %3CfeGaussianBlur stdDeviation='<span class="hljs-subst">${std}</span>'/%3E
    %3C/filter%3E
    %3Cimage width='100%25' height='100%25' x='0' y='0' 
      preserveAspectRatio='none' 
      style='filter: url(%23b);' 
      href='<span class="hljs-subst">${blurDataURL}</span>'/%3E
  %3C/svg%3E`</span>
}
</code></pre>
<p><strong>SVG æ»¤é•œç®¡é“è¯´æ˜</strong>ï¼š</p>

























<table><thead><tr><th>æ»¤é•œ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>feGaussianBlur</code> (ç¬¬ä¸€æ¬¡)</td><td>æ¨¡ç³Šæ‰©æ•£é¢œè‰²ï¼Œä½†è¾¹ç¼˜ä¼šå˜æˆåŠé€æ˜</td></tr><tr><td><code>feColorMatrix</code></td><td>å¤„ç† Alpha é€šé“ï¼Œæ¶ˆé™¤åŠé€æ˜è¾¹ç¼˜</td></tr><tr><td><code>feFlood + feComposite</code></td><td>ç”¨çº¯è‰²å¡«å……è¢«è£å‰ªçš„è¾¹ç¼˜åŒºåŸŸ</td></tr><tr><td><code>feGaussianBlur</code> (ç¬¬äºŒæ¬¡)</td><td>å†æ¬¡æ¨¡ç³Šï¼Œè®©å¡«å……åçš„è¾¹ç¼˜æ›´è‡ªç„¶</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æ”¾å¤§ï¼Ÿ</strong></p>
<p>ä½ å¯èƒ½ä¼šé—®ï¼šSVG æœ¬èº«å°±æ”¯æŒæ— æŸç¼©æ”¾ï¼Œä¸ºä»€ä¹ˆè¿˜è¦åŠ è¿™ä¹ˆå¤šæ»¤é•œï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>è¿™å¥—æœºåˆ¶ä¸åªæ˜¯ä¸ºçº¯è‰² GIF è®¾è®¡çš„ï¼Œè€Œæ˜¯è¦å…¼å®¹çœŸå®å›¾ç‰‡ç¼©ç•¥å›¾</strong>ã€‚
ç”¨ä»¥ä¸‹å¯¹æ¯”å³å¯çœ‹å‡ºåŒºåˆ«
<strong>åœºæ™¯ä¸€ï¼š1Ã—1 çº¯è‰² GIF</strong></p>
<p><span href="https://code.juejin.cn/pen/7580669386227187727" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7580669386227187727" data-src="https://code.juejin.cn/pen/7580669386227187727" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<p><strong>åœºæ™¯äºŒï¼š8Ã—8 çœŸå®ç¼©ç•¥å›¾</strong>
<span href="https://code.juejin.cn/pen/7580703272609644554" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7580703272609644554" data-src="https://code.juejin.cn/pen/7580703272609644554" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h3 data-id="heading-11">äº”ã€è®¾è®¡å†³ç­–</h3>
<h4 data-id="heading-12">5.1 ä¸ºä»€ä¹ˆæ”¾å¤§ 40 å€ï¼Ÿ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> svgWidth = blurWidth ? blurWidth * <span class="hljs-number">40</span> : widthInt
</code></pre>
<p>é«˜æ–¯æ¨¡ç³Šçš„æœ‰æ•ˆèŒƒå›´çº¦ä¸º 3Ïƒï¼ˆ3 å€æ ‡å‡†å·®ï¼‰ã€‚å½“ <code>stdDeviation = 20</code> æ—¶ï¼Œæ¨¡ç³Šä¼šå½±å“å‘¨å›´çº¦ 60 åƒç´ ã€‚å¦‚æœ viewBox å¤ªå°ï¼Œæ¨¡ç³Šä¼š"æº¢å‡º"è¾¹ç•Œå¯¼è‡´è¾¹ç¼˜è¢«æˆªæ–­ã€‚æ”¾å¤§ 40 å€ç¡®ä¿ 1 åƒç´ çš„å›¾ç‰‡ä¹Ÿæœ‰è¶³å¤Ÿç©ºé—´è®©æ¨¡ç³Šæ•ˆæœè‡ªç„¶è¿‡æ¸¡ã€‚</p>
<h4 data-id="heading-13">5.2 ä¸ºä»€ä¹ˆç”¨ SVG è€Œé CSS blurï¼Ÿ</h4>

























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>CSS blur</th><th>SVG æ»¤é•œ</th></tr></thead><tbody><tr><td>è¾¹ç¼˜å¤„ç†</td><td>æ¨¡ç³Šä¼šæº¢å‡ºå®¹å™¨</td><td>å®Œç¾æ§åˆ¶</td></tr><tr><td>é¢å¤– DOM</td><td>éœ€è¦åŒ…è£¹å…ƒç´ </td><td>æ— éœ€é¢å¤–å…ƒç´ </td></tr><tr><td>å®šåˆ¶æ€§</td><td>æœ‰é™</td><td>å¯ç»„åˆå¤šä¸ªæ»¤é•œåŸè¯­</td></tr></tbody></table>
<h4 data-id="heading-14">5.3 æ€§èƒ½è€ƒé‡</h4>
<ul>
<li><strong>Data URL å¤§å°</strong>ï¼šå®Œæ•´ SVG çº¦ 500-600 bytesï¼Œå†…è”åœ¨ HTML ä¸­</li>
<li><strong>é›¶ç½‘ç»œè¯·æ±‚</strong>ï¼šå ä½ç¬¦éš HTML ä¸€èµ·åˆ°è¾¾ï¼Œé¦–å±å³å¯æ¸²æŸ“</li>
<li><strong>GPU åŠ é€Ÿ</strong>ï¼šSVG æ»¤é•œç”±æµè§ˆå™¨ GPU æ¸²æŸ“</li>
<li><strong>è‡ªåŠ¨æ¸…ç†</strong>ï¼šå›¾ç‰‡åŠ è½½åèƒŒæ™¯æ ·å¼è¢«ç§»é™¤ï¼Œä¸å ç”¨é¢å¤–å†…å­˜</li>
</ul>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js" target="_blank" title="https://github.com/vercel/next.js" ref="nofollow noopener noreferrer">Next.js GitHub æºç </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FSVG%2FTutorial%2FFilter_effects" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Filter_effects" ref="nofollow noopener noreferrer">MDN - SVG Filter æ•™ç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fblob%2Fcanary%2Fpackages%2Fnext%2Fsrc%2Fshared%2Flib%2Fimage-blur-svg.ts" target="_blank" title="https://github.com/vercel/next.js/blob/canary/packages/next/src/shared/lib/image-blur-svg.ts" ref="nofollow noopener noreferrer">image-blur-svg.ts æºç </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fstackoverflow.com%2Fa%2F33919020%2F266535" target="_blank" title="https://stackoverflow.com/a/33919020/266535" ref="nofollow noopener noreferrer">Stack Overflow - ç”Ÿæˆ 1x1 åƒç´  GIF</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[jså…¥é—¨æŒ‡å—ä¹‹Promiseï¼šä»''æ‰¿è¯º''åˆ°ç†è§£ï¼Œå‘Šåˆ«å›è°ƒåœ°åŸŸ]]></title>    <link>https://juejin.cn/post/7580310413754335282</link>    <guid>https://juejin.cn/post/7580310413754335282</guid>    <pubDate>2025-12-06T15:18:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580310413754335282" data-draft-id="7580288235030396928" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="jså…¥é—¨æŒ‡å—ä¹‹Promiseï¼šä»''æ‰¿è¯º''åˆ°ç†è§£ï¼Œå‘Šåˆ«å›è°ƒåœ°åŸŸ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-06T15:18:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Neptune1"/> <meta itemprop="url" content="https://juejin.cn/user/1030661718147776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            jså…¥é—¨æŒ‡å—ä¹‹Promiseï¼šä»''æ‰¿è¯º''åˆ°ç†è§£ï¼Œå‘Šåˆ«å›è°ƒåœ°åŸŸ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1030661718147776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Neptune1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T15:18:46.000Z" title="Sat Dec 06 2025 15:18:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:18px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:40px;margin-bottom:20px;color:#007fff;display:flex;align-items:center}.markdown-body h1:hover:before,.markdown-body h2:hover:before,.markdown-body h3:hover:before,.markdown-body h4:hover:before,.markdown-body h5:hover:before,.markdown-body h6:hover:before{transition:All .4s ease-in-out;transform:rotate(1turn)}.markdown-body h1{font-size:30px;background:linear-gradient(#fff 60%,#c6e3ff 0)}.markdown-body h1:before{content:"";display:inline-block;width:32px;height:32px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h2{font-size:24px;background:linear-gradient(#fff 60%,#cce3fb 0)}.markdown-body h2:before{content:"";display:inline-block;width:24px;height:24px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h3{font-size:20px}.markdown-body h3:before{content:"";display:inline-block;width:18px;height:18px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h4{font-size:18px}.markdown-body h4:before{content:"";display:inline-block;width:16px;height:16px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h5{font-size:16px}.markdown-body h5:before{content:"";display:inline-block;width:15px;height:15px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h6{font-size:14px}.markdown-body h6:before{content:"";display:inline-block;width:12px;height:12px;margin-right:10px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC");background-size:100% 100%}.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{border-bottom:2px solid #007fff;color:#007fff;padding-right:10px}.markdown-body p{letter-spacing:1px;line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:10px auto}.markdown-body hr{border:none;border-top:1px dashed #92c8ff}.markdown-body hr:before{content:"âœ‚";display:inline-block;position:relative;top:-12px;left:40px;padding:0 3px;color:#007fff;font-size:18px}.markdown-body hr:after{content:"æŒ‰è™šçº¿å‰ªå¼€";position:relative;top:-15px;left:84%;padding:0 3px;color:#007fff;font-size:12px}.markdown-body del{color:#f44}.markdown-body em{color:#007fff;margin:0 2px}.markdown-body strong{color:#007fff;font-weight:bolder}.markdown-body code{word-break:break-word;border-radius:4px;overflow-x:auto;background-color:#e6f3ff;color:#007fff;font-weight:600;font-size:16px;padding:.065em .4em;border:1px solid #007fff}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:5px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:18px;font-weight:400;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8;border:none}.markdown-body a{text-decoration:none;color:#007fff;border-bottom:1px solid #007fff}.markdown-body a:before{content:"Â¶";margin-right:5px;font-size:22px}.markdown-body a:after{content:"â†·";margin-left:2px;font-size:22px;display:none}.markdown-body a:active,.markdown-body a:hover{color:#275b8c;border-bottom:1px solid #275b8c}.markdown-body a:active:after,.markdown-body a:hover:after{display:inline-block}.markdown-body table{display:inline-block!important;font-size:16px;width:auto;max-width:100%;overflow:auto;border:1px solid #a5d3ff}.markdown-body thead{background:#c6e3ff;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#eef7ff}.markdown-body tbody&gt;tr:nth-child(odd){background-color:#f8fcff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #007fff;background-color:#eef7ff}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#007fff}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="srcery">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1b19;color:#fce8c3}.hljs-emphasis,.hljs-strong{color:#918175}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ff5c8f}.hljs-code,.hljs-selector-class{color:#68a8e4}.hljs-emphasis{font-style:italic}.hljs-attribute,.hljs-keyword,.hljs-section,.hljs-selector-tag,.hljs-variable{color:#ef2f27}.hljs-name,.hljs-title{color:#fbb829}.hljs-params,.hljs-type{color:#0aaeb3}.hljs-string{color:#98bc37}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#c07abe}.hljs-comment,.hljs-deletion,.hljs-meta{color:#918175}</style><p>åœ¨äº†è§£promiseä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç®€å•äº†è§£ä¸€äº›å…³äºå¼‚æ­¥çš„çŸ¥è¯†ï¼Œæ–¹ä¾¿è§£é‡Š<code>promise</code>å…·ä½“åšäº†ä»€ä¹ˆï¼Œèµ·åˆ°ä»€ä¹ˆæ ·çš„ä½œç”¨</p>
<h2 data-id="heading-0">ä¸€ã€å¼‚æ­¥</h2>
<ol>
<li>
<p>jsåœ¨è®¾è®¡ä¹‹åˆæ—¶è¢«ä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€æ¥è®¾è®¡ï¼Œæ‰€ä»¥è¢«è®¾è®¡æˆäº†å•çº¿ç¨‹ä»¥èŠ‚çœç”¨æˆ·çš„æ€§èƒ½</p>
</li>
<li>
<p>jsä»£ç ä¸­å¦‚æœå­˜åœ¨éœ€è¦è€—æ—¶æ‰§è¡Œçš„ä»£ç ï¼ˆå¦‚<code>setTimeout()</code>ï¼‰,åˆ™è¯¥ä»£ç åœ¨v8å¼•æ“æ‰§è¡Œåˆ°è¿™æ—¶ï¼Œä¼šè¢«æš‚æ—¶æŒ‚èµ·ï¼Œè€Œä¼˜å…ˆæ‰§è¡Œåé¢ä¸è€—æ—¶çš„ä»£ç ï¼ˆ<strong>åŒæ­¥ä»£ç </strong>ï¼‰ï¼Œè¿™å°±æ˜¯jsä¸­å¼‚æ­¥çš„ç®€å•ç†è§£</p>
</li>
</ol>
<p>3.é€šè¿‡ä¸€æ®µä»£ç ç›´è§‚äº†è§£å¼‚æ­¥</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-keyword">let</span> a = <span class="hljs-number">1</span>
<span class="hljs-keyword">let</span> b = <span class="hljs-number">2</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a)

},<span class="hljs-number">1000</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b)
   
   
   è¾“å‡ºç»“æœä¸º<span class="hljs-number">2</span>ï¼Œä¸€ç§’åå†è¾“å‡º<span class="hljs-number">1</span>
</code></pre>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ ä¸äº†è§£ä»€ä¹ˆæ˜¯å¼‚æ­¥ï¼Œé‚£ä¹ˆä½ æ˜¯å¦ä¼šè§‰å¾—æ˜¯å‡½æ•°åœ¨è¯»å–åˆ°ç¬¬å››è¡Œä»£ç åï¼Œç­‰å¾…ä¸€ç§’åæ‰“å°1å†æ‰“å°2ï¼Ÿ</p>
<h2 data-id="heading-1">äºŒã€å¦‚ä½•å¤„ç†å¼‚æ­¥</h2>
<p>é€šè¿‡ä¸Šä¸ªæ ‡é¢˜å†…å®¹ï¼Œä½ æ˜¯å¦äº†è§£åˆ°äº†åœ¨v8ä¸­å¼•æ“æ‰§è¡Œçš„é¡ºåºï¼Ÿ é‚£ä¹ˆï¼Œjsä¸­å¼‚æ­¥è¿™ä¸€ç§æƒ…å†µä¼šç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆæ ·çš„é—®é¢˜ä¸å›°å¢ƒå‘¢ï¼Œä¸æ€¥ï¼Œè¯·çœ‹å¦‚ä¸‹æƒ…å½¢ä¸­çš„ä»£ç </p>
<pre><code class="hljs language-scss" lang="scss">let  <span class="hljs-selector-tag">a</span> = <span class="hljs-number">1</span>

function <span class="hljs-built_in">fn</span>(){
    <span class="hljs-built_in">setTimeout</span>(()=&gt;{
    <span class="hljs-selector-tag">a</span> = <span class="hljs-number">2</span>
      console<span class="hljs-selector-class">.log</span>(a)    
    },<span class="hljs-number">1000</span>)
   }

function <span class="hljs-built_in">foo</span>(){
     <span class="hljs-built_in">setTimeout</span>(()=&gt;{
     <span class="hljs-selector-tag">a</span> = <span class="hljs-number">3</span>
    console<span class="hljs-selector-class">.log</span>(a)  
    },<span class="hljs-number">2000</span>)
}

function <span class="hljs-built_in">bar</span>(){
console<span class="hljs-selector-class">.log</span>(a)
   }

<span class="hljs-built_in">foo</span>()
<span class="hljs-built_in">fn</span>()
<span class="hljs-built_in">bar</span>()

</code></pre>
<p><strong>æ­¤æ—¶ç”±äºå¼‚æ­¥çš„å­˜åœ¨ï¼Œä½ ä¼šå‘ç°ï¼Œæ— è®ºä½ å¦‚ä½•è°ƒç”¨fooï¼ˆï¼‰ï¼Œfnï¼ˆï¼‰ï¼Œbarï¼ˆï¼‰ï¼Œéƒ½æ˜¯ä»¥barï¼ˆï¼‰ï¼Œfnï¼ˆï¼‰ï¼Œfooï¼ˆï¼‰è¿™æ ·çš„é¡ºåºä¾æ¬¡æ‰“å°å‡ºæ¥ï¼Œä½¿å¾—ä½ æ— æ³•æ§åˆ¶ä»–ä»¬çš„æ‰§è¡Œé¡ºåº</strong>ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢</p>
<h3 data-id="heading-2">1ã€è§£å†³æ–¹æ³•</h3>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰é€šè¿‡å‡½æ•°åµŒå¥—å›è°ƒè°ƒç”¨ï¼Œæ”¹å˜æ‰§è¡Œé¡ºåºï¼ˆå®¹æ˜“å½¢æˆå±å±±ä»£ç ï¼Œä¸æ¨èï¼‰</h4>
<p>æ­¤æ—¶ä½ æƒ³åˆ°ä¸€ä¸ªåŠæ³•ï¼Œæˆ‘é€šè¿‡å°†ä¸‹ä¸€ä¸ªæ‰§è¡Œçš„å‡½æ•°è°ƒç”¨äºä¸Šä¸€ä¸ªæ‰§è¡Œå‡½æ•°çš„æœ«å°¾ï¼Œä¸å°±èƒ½è§£å†³å¼‚æ­¥çš„é—®é¢˜äº†å—ï¼Œé€šè¿‡è¿™ä¸ªæ‰‹æ®µå°±å¯ä»¥å®ç°æ‰§è¡Œé¡ºåºä¸º<code>bar(),fnï¼ˆï¼‰,barï¼ˆï¼‰</code>äº†ï¼Œäºæ˜¯ä½ å†™å‡ºäº†è¿™æ ·çš„ä»£ç </p>
<pre><code class="hljs language-scss" lang="scss">let  <span class="hljs-selector-tag">a</span> = <span class="hljs-number">1</span>

function <span class="hljs-built_in">fn</span>(){
    <span class="hljs-built_in">setTimeout</span>(()=&gt;{
    <span class="hljs-selector-tag">a</span> = <span class="hljs-number">2</span>
      console<span class="hljs-selector-class">.log</span>(a)    
    },<span class="hljs-number">1000</span>)
    <span class="hljs-built_in">bar</span>()
   }

function <span class="hljs-built_in">foo</span>(){
     <span class="hljs-built_in">setTimeout</span>(()=&gt;{
     <span class="hljs-selector-tag">a</span> = <span class="hljs-number">3</span>
    console<span class="hljs-selector-class">.log</span>(a)
    <span class="hljs-built_in">fn</span>()
    },<span class="hljs-number">2000</span>)
}

function <span class="hljs-built_in">bar</span>(){
console<span class="hljs-selector-class">.log</span>(a)
   }
   
   <span class="hljs-built_in">foo</span>()
</code></pre>
<h5 data-id="heading-4">ç¼ºé™·</h5>
<p>æ­¤æ—¶ä½ ä¾¿æˆåŠŸå®ç°äº†æ‰§è¡Œé¡ºåºä¸º<code>bar(),fnï¼ˆï¼‰,barï¼ˆï¼‰</code>ï¼Œä½†æ˜¯ï¼Œè¿™åˆå¼•å‘äº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œä»”ç»†æ€è€ƒï¼Œè¿™é‡Œæ˜¯ä¸‰ä¸ªå‡½æ•°çš„å›è°ƒï¼Œ</p>
<p>ä½†æ˜¯ä½ è¦æ˜¯æœ‰å¤§é‡çš„å‡½æ•°éœ€è¦å›è°ƒå‘¢ï¼Ÿæ­¤æ—¶ä½ ä¼šå‘ç°è™½ç„¶ä»£ç ä¾ç„¶å¯ä»¥è¿è¡Œï¼Œä¸”æŒ‰ç…§äº†ä½ é¢„æƒ³çš„é¡ºåºæ‰§è¡Œï¼Œä½†æ˜¯ï¼Œä¸€æ—¦å‡ºç°äº†bugï¼Œä½ ä¾¿ä¼šå‘ç°ä¸€ä»¶äº‹ï¼Œé‚£å°±æ˜¯ä½ åªèƒ½åœ¨è¯¥å›è°ƒå‡½æ•°ä¸­ä¸€ä¸ªä¸€ä¸ªå¯»æ‰¾é”™è¯¯ç‚¹ï¼Œ<strong>ä½¿å¾—é¡¹ç›®ä»£ç éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤</strong>ï¼Œ<strong>è®©äººååˆ†éš¾ä»¥è§£å†³è¯¥bug</strong>ï¼Œè¿™å°±æ˜¯å±å±±ä»£ç çš„æ ·å­</p>
<p>å¤§é‡å‡½æ•°ä»£ç çš„å›è°ƒå½¢æˆçš„ç»´æŠ¤å›°éš¾è¿™ä¸€æƒ…å†µï¼Œä¹Ÿç§°ä¹‹ä¸º<strong>å›è°ƒåœ°åŸŸ</strong>ï¼Œæˆ‘ä»¬åœ¨å¹³æ—¶è§£å†³å¼‚æ­¥é—®é¢˜æ—¶ï¼Œè¦é¿å…é€ æˆè¿™ç§æƒ…å†µ</p>
<h4 data-id="heading-5">ï¼ˆ2ï¼‰é€šè¿‡ä½¿ç”¨Promiseçš„é“¾å¼è°ƒç”¨ï¼Œè§£å†³å¼‚æ­¥é—®é¢˜</h4>
<p><strong>è™½ç„¶å‡½æ•°åµŒå¥—å›è°ƒè°ƒç”¨å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯å¸¦æ¥çš„ä»£ç éš¾ä»¥é˜…è¯»ä¸ç»´æŠ¤ï¼Œå¯»æ‰¾é”™è¯¯å›°éš¾çš„é—®é¢˜</strong>ä¹Ÿä¸æ˜¯æˆ‘ä»¬å¸Œæœ›èƒ½çœ‹è§çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æ­¤æ—¶åº”ç”¨<code>Promise</code>è¿™ä¸€å‡½æ•°æ¥è§£å†³å¼‚æ­¥çš„é—®é¢˜</p>
<h5 data-id="heading-6">Promiseçš„æ•‘èµ</h5>
<p>å½“ä½ ç¬¬ä¸€æ¬¡è§åˆ°Promiseï¼Œä½ æˆ–è®¸ä¼šæƒ³ï¼Œè¿™ä¸æ˜¯æ‰¿è¯ºçš„æ„æ€å—ï¼Ÿä»€ä¹ˆæ˜¯æ‰¿è¯ºï¼Ÿ</p>
<p>æˆ‘ä»¬ç»§ç»­é€šè¿‡ä»£ç æ¥ä½¿å¾—æ›´å¥½çš„ç†è§£</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">gohome</span>(<span class="hljs-params"/>){
 <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆåŠŸå›å®¶'</span>)
 
 },<span class="hljs-number">4000</span>)
     }
<span class="hljs-keyword">function</span>  showerï¼ˆï¼‰{
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä½ æ´—æ¾¡äº†'</span>)
    },<span class="hljs-number">1000</span>)

   }
<span class="hljs-keyword">function</span> gosleepï¼ˆï¼‰{
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä½ ä¸ŠåºŠä¼‘æ¯äº†'</span>)
    },<span class="hljs-number">2000</span>)

}

</code></pre>
<p>æ­¤æ—¶ç”±äºä¸‰ä¸ªå‡½æ•°å‡è¦æ¶ˆè€—æ—¶é—´ï¼Œä¸”æ ¹æ®æ‰€éœ€æ¶ˆè€—æ—¶é—´æ¥åˆ¤æ–­ï¼Œæ— è®ºä»€ä¹ˆé¡ºåºè°ƒç”¨å‡½æ•°ï¼Œéƒ½æ˜¯ä»¥showerï¼Œgosleepï¼Œgohomeçš„é¡ºåºæ‰§è¡Œçš„ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¾¿éœ€è¦ä½¿ç”¨Promiseå‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜äº†</p>
<h6 data-id="heading-7">è¡¨è¾¾å¼ä¸€</h6>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">gohome</span>() {
    return new <span class="hljs-built_in">Promise</span>((resolve, reject) =&gt; {
        <span class="hljs-built_in">setTimeout</span>(() =&gt; {
            console<span class="hljs-selector-class">.log</span>('æˆåŠŸå›å®¶')
            <span class="hljs-built_in">resolve</span>()
        }, <span class="hljs-number">4000</span>)
           })
   
}

function <span class="hljs-built_in">shower</span>() {
 return new <span class="hljs-built_in">Promise</span>((resolve, reject) =&gt; {
    <span class="hljs-built_in">setTimeout</span>(() =&gt; {
        console<span class="hljs-selector-class">.log</span>('ä½ æ´—æ¾¡äº†')
        <span class="hljs-built_in">resolve</span>()
    }, <span class="hljs-number">1000</span>)
  })
}
function <span class="hljs-built_in">gosleep</span>() {
    <span class="hljs-built_in">setTimeout</span>(() =&gt; {
        console<span class="hljs-selector-class">.log</span>('ä½ ä¸ŠåºŠä¼‘æ¯äº†')
    }, <span class="hljs-number">2000</span>)

}

<span class="hljs-built_in">gohome</span>()<span class="hljs-selector-class">.then</span>(() =&gt; {
    <span class="hljs-built_in">shower</span>()<span class="hljs-selector-class">.then</span>(() =&gt; {
     <span class="hljs-built_in">gosleep</span>()
    })
})

</code></pre>
<p><strong>è¿è¡Œä»¥ä¸Šä»£ç ï¼Œä½ å°±èƒ½å‘ç°ï¼Œé—®é¢˜è§£å†³ï¼Œä½¿å¾—å‡½æ•°æ„æˆäº†é“¾å¼çš„è°ƒç”¨ï¼Œä¸”ä½¿å¾—ä»£ç æ›´æ‰å¹³ï¼Œæ›´æ˜“ç®¡ç†</strong></p>
<blockquote>
<p>é™¤äº†ä¸Šé¢ä»£ç è¿™ç§æ–¹æ³•ï¼Œpromiseè¿˜æœ‰å¦ä¸€ç§ä½¿ç”¨æ–¹å¼ï¼Œèƒ½ä½¿ä»£ç æ›´ç®€æ´æ˜äº†ï¼Œæ›´åŠ ç›´è§‚</p>
</blockquote>
<h6 data-id="heading-8">è¡¨è¾¾å¼äºŒ</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">gohome</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆåŠŸå›å®¶'</span>)
            <span class="hljs-title function_">resolve</span>()
        }, <span class="hljs-number">4000</span>)
        })
   
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">shower</span>(<span class="hljs-params"/>) {
 <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä½ æ´—æ¾¡äº†'</span>)
        <span class="hljs-title function_">resolve</span>()
    }, <span class="hljs-number">1000</span>)
  })
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">gosleep</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä½ ä¸ŠåºŠä¼‘æ¯äº†'</span>)
    }, <span class="hljs-number">2000</span>)

}

<span class="hljs-title function_">gohome</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">shower</span>()
})
.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span>{
    <span class="hljs-title function_">gosleep</span>()
})
</code></pre>
<h5 data-id="heading-9">è¯¦ç»†è¯´æ˜</h5>
<ol>
<li>
<p>ä½¿ç”¨äº†Promiseå‡½æ•°åï¼ŒåŸå‡½æ•°è·å¾—ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œåªæœ‰ç”±Promiseæ„é€ å‡ºçš„å®ä¾‹å¯¹è±¡åé¢æ‰èƒ½æ¥thenï¼ˆï¼‰</p>
</li>
<li>
<p>Promiseå‡½æ•°è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¼ å…¥çš„è¿™ä¸ªå‡½æ•°è¿˜éœ€è¦æ¥å—ä¸¤ä¸ªå‚æ•°ï¼ˆresolveï¼Œrejectï¼‰ï¼Œåˆ†åˆ«éœ€è¦å†Promiseå‡½æ•°ä¸­è°ƒç”¨ï¼Œç”¨äºè¡¨ç¤ºæˆåŠŸä¸å¤±è´¥è‹¥è¯»å–åˆ°æˆåŠŸï¼Œåˆ™ç«‹å³æ‰§è¡Œå…¶å®ä¾‹å¯¹è±¡æ‰€æ¥åˆ°çš„thenï¼ˆï¼‰å†…éƒ¨çš„å‡½æ•°ï¼Œè‹¥å¤±è´¥åˆ™ä¸æ‰§è¡Œ</p>
</li>
<li>
<p>thenï¼ˆï¼‰åªèƒ½è¢«ç”±Promiseå‡½æ•°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡è°ƒç”¨ï¼ŒåŸå› æ˜¯thenï¼ˆï¼‰å­˜æ”¾åœ¨Promiseï¼ˆï¼‰çš„æ˜¾ç¤ºåŸå‹ä¸Šï¼Œè€Œå…¶
å®ä¾‹å¯¹è±¡çš„éšå¼åŸå‹ç»§æ‰¿äº†å…¶æ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹,thenï¼ˆï¼‰å†…éƒ¨è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå½“å…¶å¾—åˆ°Promiseï¼ˆï¼‰ä¸­resolveï¼ˆï¼‰è¢«æ‰§è¡Œçš„ä¿¡æ¯åï¼Œä¼šç«‹å³æ‰§è¡Œthenï¼ˆï¼‰å†…éƒ¨ä¼ å…¥çš„å‡½æ•°  ï¼ˆè‹¥å¯¹åŸå‹æœ‰ç–‘é—®ï¼Œå‚è€ƒå‰æ–‡<a href="https://juejin.cn/post/7579450578293604394" target="_blank" title="https://juejin.cn/post/7579450578293604394">æ·±å…¥æµ…å‡ºï¼šç†è§£jsçš„â€˜ä¸‡ç‰©çš†å¯¹è±¡â€™ä¸åŸå‹é“¾</a>)</p>
</li>
</ol>
<p>4.åœ¨è¡¨è¾¾å¼äºŒä¸­ï¼Œè¯¥è¡¨è¾¾æ–¹æ³•ä¸­çš„ç¬¬ä¸€ä¸ªthenï¼ˆï¼‰ä¼šé»˜è®¤ç»§æ‰¿ä¸ŠPromiseå†…è¯»å–åˆ°çš„resolveæˆ–reject</p>
<ol start="5">
<li>åœ¨.thenä¸­è¿”å›çš„å€¼ï¼ˆæ— è®ºæ˜¯æ™®é€šå€¼è¿˜æ˜¯æ–°çš„Promiseï¼‰ï¼Œéƒ½ä¼šæˆä¸ºä¸‹ä¸€ä¸ª.thenæ¥å—çš„å‚æ•°ï¼Œæ‰€ä»¥ä¸ºäº†åœ¨ä½¿ç”¨è¡¨è¾¾å¼äºŒä¸­ï¼Œé¿å…åç»­çš„thenå…¨éƒ¨é»˜è®¤æ¥å—åŒä¸€ä¸ªå‚æ•°ï¼Œè®°å¾—ä¸ºæ¯ä¸€ä¸ªthenæ·»åŠ ä¸€ä¸ªè¿”å›å€¼ï¼Œé¿å…å‡ºç°â€˜â€˜æ¼‚æµ®çš„Promiseâ€™â€™</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ UmiJS + Vue 3 é¡¹ç›®ä¸­å®ç° WebP å›¾ç‰‡è‡ªåŠ¨è½¬æ¢å’Œä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7580282751628509225</link>    <guid>https://juejin.cn/post/7580282751628509225</guid>    <pubDate>2025-12-06T15:25:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580282751628509225" data-draft-id="7580295137395015695" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ UmiJS + Vue 3 é¡¹ç›®ä¸­å®ç° WebP å›¾ç‰‡è‡ªåŠ¨è½¬æ¢å’Œä¼˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-06T15:25:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Composure"/> <meta itemprop="url" content="https://juejin.cn/user/3298190615127917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ UmiJS + Vue 3 é¡¹ç›®ä¸­å®ç° WebP å›¾ç‰‡è‡ªåŠ¨è½¬æ¢å’Œä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3298190615127917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Composure
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T15:25:31.000Z" title="Sat Dec 06 2025 15:25:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>WebP æ˜¯ä¸€ç§ç°ä»£å›¾ç‰‡æ ¼å¼ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„ JPG/PNG æ ¼å¼ï¼Œé€šå¸¸å¯ä»¥å‡å°‘ 25-35% çš„æ–‡ä»¶å¤§å°ï¼ŒæŸäº›å›¾ç‰‡ç”šè‡³å¯ä»¥å‡å°‘ 80% ä»¥ä¸Šã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨ UmiJS + Vue 3 é¡¹ç›®ä¸­å®ç° WebP å›¾ç‰‡çš„è‡ªåŠ¨è½¬æ¢å’Œæ™ºèƒ½åŠ è½½ã€‚</p>
<h2 data-id="heading-1">åŠŸèƒ½ç‰¹æ€§</h2>
<ul>
<li>âœ… <strong>æ„å»ºæ—¶è‡ªåŠ¨è½¬æ¢</strong>ï¼šæ„å»ºæ—¶è‡ªåŠ¨å°† JPG/PNG è½¬æ¢ä¸º WebP</li>
<li>âœ… <strong>æ™ºèƒ½æ ¼å¼é€‰æ‹©</strong>ï¼šè‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨æ”¯æŒï¼Œä¼˜å…ˆä½¿ç”¨ WebP</li>
<li>âœ… <strong>è‡ªåŠ¨å›é€€</strong>ï¼šä¸æ”¯æŒçš„æµè§ˆå™¨è‡ªåŠ¨ä½¿ç”¨åŸå§‹æ ¼å¼</li>
<li>âœ… <strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä½¿ç”¨ç¼“å­˜é¿å…é‡å¤æ£€æµ‹å’Œé‡å¤åŠ è½½</li>
<li>âœ… <strong>é›¶é…ç½®ä½¿ç”¨</strong>ï¼šç»„ä»¶åŒ–å°è£…ï¼Œä½¿ç”¨ç®€å•</li>
</ul>
<h2 data-id="heading-2">å®ç°æ­¥éª¤</h2>
<h3 data-id="heading-3">1. å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D imagemin imagemin-webp
</code></pre>
<h3 data-id="heading-4">2. åˆ›å»ºå›¾ç‰‡è½¬æ¢è„šæœ¬</h3>
<p>åˆ›å»º <code>scripts/convert-images.mjs</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> imagemin <span class="hljs-keyword">from</span> <span class="hljs-string">"imagemin"</span>
<span class="hljs-keyword">import</span> imageminWebp <span class="hljs-keyword">from</span> <span class="hljs-string">"imagemin-webp"</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"fs"</span>
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">"url"</span>

<span class="hljs-keyword">const</span> __filename = <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>)
<span class="hljs-keyword">const</span> __dirname = path.<span class="hljs-title function_">dirname</span>(__filename)

<span class="hljs-comment">/**
 * å›¾ç‰‡è½¬ WebP è„šæœ¬
 * å°† src/assets ç›®å½•ä¸‹çš„ jpg/jpeg/png å›¾ç‰‡è½¬æ¢ä¸º webp æ ¼å¼
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">convertImages</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> assetsDir = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"../src/assets"</span>)

  <span class="hljs-comment">// æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨</span>
  <span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(assetsDir)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âš ï¸  assets ç›®å½•ä¸å­˜åœ¨ï¼Œè·³è¿‡å›¾ç‰‡è½¬æ¢"</span>)
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ–¼ï¸  å¼€å§‹è½¬æ¢å›¾ç‰‡ä¸º WebP æ ¼å¼..."</span>)

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> files = <span class="hljs-keyword">await</span> <span class="hljs-title function_">imagemin</span>([<span class="hljs-string">`<span class="hljs-subst">${assetsDir}</span>/*.{jpg,jpeg,png}`</span>], {
      <span class="hljs-attr">destination</span>: assetsDir,
      <span class="hljs-attr">plugins</span>: [
        <span class="hljs-title function_">imageminWebp</span>({
          <span class="hljs-attr">quality</span>: <span class="hljs-number">80</span>, <span class="hljs-comment">// è´¨é‡ 0-100ï¼Œ80 æ˜¯è´¨é‡å’Œæ–‡ä»¶å¤§å°çš„è‰¯å¥½å¹³è¡¡</span>
          <span class="hljs-attr">method</span>: <span class="hljs-number">6</span>, <span class="hljs-comment">// å‹ç¼©æ–¹æ³• 0-6ï¼Œ6 æ˜¯æœ€æ…¢ä½†å‹ç¼©ç‡æœ€é«˜</span>
        }),
      ],
    })

    <span class="hljs-keyword">if</span> (files.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"â„¹ï¸  æ²¡æœ‰æ‰¾åˆ°éœ€è¦è½¬æ¢çš„å›¾ç‰‡"</span>)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ… æˆåŠŸè½¬æ¢ <span class="hljs-subst">${files.length}</span> å¼ å›¾ç‰‡ä¸º WebP æ ¼å¼:`</span>)
      files.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> fileName = path.<span class="hljs-title function_">basename</span>(file.<span class="hljs-property">destinationPath</span>)
        <span class="hljs-keyword">const</span> originalSize = fs.<span class="hljs-title function_">statSync</span>(
          file.<span class="hljs-property">sourcePath</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\.webp$/</span>, path.<span class="hljs-title function_">extname</span>(file.<span class="hljs-property">sourcePath</span>))
        ).<span class="hljs-property">size</span>
        <span class="hljs-keyword">const</span> webpSize = fs.<span class="hljs-title function_">statSync</span>(file.<span class="hljs-property">destinationPath</span>).<span class="hljs-property">size</span>
        <span class="hljs-keyword">const</span> reduction = ((<span class="hljs-number">1</span> - webpSize / originalSize) * <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">1</span>)
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`   - <span class="hljs-subst">${fileName}</span> (å‡å°‘ <span class="hljs-subst">${reduction}</span>%)`</span>)
      })
    }
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"âŒ å›¾ç‰‡è½¬æ¢å¤±è´¥:"</span>, error.<span class="hljs-property">message</span>)
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>)
  }
}

<span class="hljs-comment">// æ‰§è¡Œè½¬æ¢</span>
<span class="hljs-title function_">convertImages</span>()
</code></pre>
<h3 data-id="heading-5">3. åˆ›å»ºå›¾ç‰‡å·¥å…·å‡½æ•°</h3>
<p>åˆ›å»º <code>src/utils/image.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * å›¾ç‰‡å·¥å…·å‡½æ•° - æ”¯æŒ WebP æ ¼å¼
 */</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">WEBP_SUPPORT_CACHE_KEY</span> = <span class="hljs-string">"__webp_support__"</span>

<span class="hljs-comment">/**
 * æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ WebP æ ¼å¼ï¼ˆå¸¦ç¼“å­˜ï¼‰
 * ä½¿ç”¨ localStorage ç¼“å­˜æ£€æµ‹ç»“æœï¼Œé¿å…é‡å¤æ£€æµ‹
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkWebPSupport</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
  <span class="hljs-comment">// å…ˆæ£€æŸ¥ç¼“å­˜</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">"undefined"</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>) {
    <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">WEBP_SUPPORT_CACHE_KEY</span>)
    <span class="hljs-keyword">if</span> (cached !== <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(cached === <span class="hljs-string">"true"</span>)
    }
  }

  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œè¿›è¡Œæ£€æµ‹</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> webP = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>()
    webP.<span class="hljs-property">onload</span> = webP.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> supported = webP.<span class="hljs-property">height</span> === <span class="hljs-number">2</span>
      <span class="hljs-comment">// ç¼“å­˜ç»“æœ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">"undefined"</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>) {
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">WEBP_SUPPORT_CACHE_KEY</span>, <span class="hljs-title class_">String</span>(supported))
      }
      <span class="hljs-title function_">resolve</span>(supported)
    }
    webP.<span class="hljs-property">src</span> =
      <span class="hljs-string">"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"</span>
  })
}

<span class="hljs-comment">/**
 * åŒæ­¥è·å– WebP æ”¯æŒçŠ¶æ€ï¼ˆä»ç¼“å­˜ï¼‰
 * å¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œé»˜è®¤è¿”å› trueï¼ˆç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒï¼‰
 * è¿™æ ·å¯ä»¥é¿å…åˆå§‹åŠ è½½é WebP èµ„æº
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getWebPSupportSync</span>(<span class="hljs-params"/>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">"undefined"</span> || !<span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>) {
    <span class="hljs-comment">// SSR ç¯å¢ƒï¼Œé»˜è®¤è¿”å› true</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }

  <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">WEBP_SUPPORT_CACHE_KEY</span>)
  <span class="hljs-keyword">if</span> (cached !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> cached === <span class="hljs-string">"true"</span>
  }

  <span class="hljs-comment">// æ²¡æœ‰ç¼“å­˜æ—¶ï¼Œé»˜è®¤å‡è®¾æ”¯æŒï¼ˆç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ WebPï¼‰</span>
  <span class="hljs-comment">// å¦‚æœå®é™…ä¸æ”¯æŒï¼Œåç»­æ£€æµ‹ä¼šæ›´æ–°ç¼“å­˜ï¼Œä¸‹æ¬¡å°±ä¼šä½¿ç”¨æ­£ç¡®çš„å€¼</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-comment">/**
 * å°†å›¾ç‰‡ URL è½¬æ¢ä¸º WebP æ ¼å¼
 * æ”¯æŒå¤šç§è½¬æ¢æ–¹å¼ï¼š
 * 1. å†…ç½®å›¾ç‰‡ï¼šç›´æ¥æ›¿æ¢æ‰©å±•å
 * 2. åœ¨çº¿å›¾ç‰‡ï¼šä½¿ç”¨å›¾ç‰‡ä»£ç†æœåŠ¡æˆ– CDN è½¬æ¢
 *
 * <span class="hljs-doctag">@param</span> url åŸå§‹å›¾ç‰‡ URL
 * <span class="hljs-doctag">@param</span> options è½¬æ¢é€‰é¡¹
 * <span class="hljs-doctag">@returns</span> WebP æ ¼å¼çš„ URL
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">convertToWebP</span>(<span class="hljs-params">
  url: <span class="hljs-built_in">string</span>,
  options: {
    // æ˜¯å¦å¼ºåˆ¶ä½¿ç”¨ WebPï¼ˆå³ä½¿æµè§ˆå™¨ä¸æ”¯æŒï¼‰
    force?: <span class="hljs-built_in">boolean</span>
    // å›¾ç‰‡ä»£ç†æœåŠ¡ URLï¼ˆç”¨äºåœ¨çº¿å›¾ç‰‡è½¬æ¢ï¼‰
    proxyUrl?: <span class="hljs-built_in">string</span>
    // CDN è½¬æ¢å‚æ•°ï¼ˆå¦‚è…¾è®¯äº‘ã€é˜¿é‡Œäº‘ç­‰ï¼‰
    cdnParams?: <span class="hljs-built_in">string</span>
  } = {}
</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">const</span> { force = <span class="hljs-literal">false</span>, proxyUrl, cdnParams } = options

  <span class="hljs-comment">// å¦‚æœæ˜¯ data URLï¼Œç›´æ¥è¿”å›</span>
  <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"data:"</span>)) {
    <span class="hljs-keyword">return</span> url
  }

  <span class="hljs-comment">// å¦‚æœæ˜¯å†…ç½®å›¾ç‰‡ï¼ˆç›¸å¯¹è·¯å¾„æˆ– umi å¤„ç†åçš„è·¯å¾„ï¼‰ï¼Œæ›¿æ¢æ‰©å±•å</span>
  <span class="hljs-comment">// æ”¯æŒ umi å¤„ç†åçš„è·¯å¾„æ ¼å¼ï¼š/static/yay.7d162f31.jpg -&gt; /static/yay.7d162f31.webp</span>
  <span class="hljs-keyword">if</span> (
    url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"./"</span>) ||
    url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"../"</span>) ||
    (!url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"http"</span>) &amp;&amp; !url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"data:"</span>))
  ) {
    <span class="hljs-comment">// åŒ¹é… .jpg, .jpeg, .png æ‰©å±•åï¼ˆå¯èƒ½åŒ…å« hashï¼‰</span>
    <span class="hljs-keyword">return</span> url.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\.(jpg|jpeg|png)(\?.*)?$/i</span>, <span class="hljs-string">".webp$2"</span>)
  }

  <span class="hljs-comment">// åœ¨çº¿å›¾ç‰‡å¤„ç†</span>
  <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"http://"</span>) || url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"https://"</span>)) {
    <span class="hljs-comment">// æ–¹å¼1: ä½¿ç”¨å›¾ç‰‡ä»£ç†æœåŠ¡</span>
    <span class="hljs-keyword">if</span> (proxyUrl) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${proxyUrl}</span>?url=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(url)}</span>&amp;format=webp`</span>
    }

    <span class="hljs-comment">// æ–¹å¼2: ä½¿ç”¨ CDN å‚æ•°è½¬æ¢ï¼ˆå¦‚è…¾è®¯äº‘ã€é˜¿é‡Œäº‘ç­‰ï¼‰</span>
    <span class="hljs-keyword">if</span> (cdnParams) {
      <span class="hljs-keyword">const</span> separator = url.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"?"</span>) ? <span class="hljs-string">"&amp;"</span> : <span class="hljs-string">"?"</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${url}</span><span class="hljs-subst">${separator}</span><span class="hljs-subst">${cdnParams}</span>`</span>
    }

    <span class="hljs-comment">// æ–¹å¼3: ä½¿ç”¨åœ¨çº¿å›¾ç‰‡è½¬æ¢æœåŠ¡ï¼ˆå¦‚ Cloudinaryã€ImageKit ç­‰ï¼‰</span>
    <span class="hljs-comment">// è¿™é‡Œæä¾›ä¸€ä¸ªç¤ºä¾‹ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦æ ¹æ®æœåŠ¡å•†è°ƒæ•´</span>
    <span class="hljs-comment">// return `https://your-image-service.com/convert?url=${encodeURIComponent(url)}&amp;format=webp`;</span>

    <span class="hljs-comment">// æ–¹å¼4: ç®€å•æ›¿æ¢æ‰©å±•åï¼ˆå¦‚æœæœåŠ¡å™¨æ”¯æŒï¼‰</span>
    <span class="hljs-keyword">return</span> url.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\.(jpg|jpeg|png)(\?.*)?$/i</span>, <span class="hljs-string">".webp$2"</span>)
  }

  <span class="hljs-keyword">return</span> url
}

<span class="hljs-comment">/**
 * è·å–å›¾ç‰‡çš„æœ€ä½³æ ¼å¼ URL
 * å¦‚æœæµè§ˆå™¨æ”¯æŒ WebPï¼Œè¿”å› WebP æ ¼å¼ï¼›å¦åˆ™è¿”å›åŸå§‹æ ¼å¼
 *
 * <span class="hljs-doctag">@param</span> originalUrl åŸå§‹å›¾ç‰‡ URL
 * <span class="hljs-doctag">@param</span> webpUrl WebP æ ¼å¼çš„ URLï¼ˆå¯é€‰ï¼Œå¦‚æœä¸æä¾›åˆ™è‡ªåŠ¨ç”Ÿæˆï¼‰
 * <span class="hljs-doctag">@param</span> webpSupported æµè§ˆå™¨æ˜¯å¦æ”¯æŒ WebPï¼ˆå¯é€‰ï¼Œå¦‚æœä¸æä¾›åˆ™è‡ªåŠ¨æ£€æµ‹ï¼‰
 * <span class="hljs-doctag">@returns</span> æœ€ä½³æ ¼å¼çš„ URL
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getBestImageUrl</span>(<span class="hljs-params">
  originalUrl: <span class="hljs-built_in">string</span>,
  webpUrl?: <span class="hljs-built_in">string</span>,
  webpSupported?: <span class="hljs-built_in">boolean</span>
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-keyword">const</span> isSupported =
    webpSupported !== <span class="hljs-literal">undefined</span> ? webpSupported : <span class="hljs-keyword">await</span> <span class="hljs-title function_">checkWebPSupport</span>()

  <span class="hljs-keyword">if</span> (isSupported) {
    <span class="hljs-keyword">return</span> webpUrl || <span class="hljs-title function_">convertToWebP</span>(originalUrl)
  }

  <span class="hljs-keyword">return</span> originalUrl
}

<span class="hljs-comment">/**
 * é¢„åŠ è½½å›¾ç‰‡
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">preloadImage</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>()
    img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>()
    img.<span class="hljs-property">onerror</span> = reject
    img.<span class="hljs-property">src</span> = url
  })
}
</code></pre>
<h3 data-id="heading-6">4. åˆ›å»º WebP å›¾ç‰‡ç»„ä»¶</h3>
<p>åˆ›å»º <code>src/components/WebPImage.vue</code>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;picture&gt;
    &lt;!-- å¦‚æœæ”¯æŒ WebPï¼Œä¼˜å…ˆä½¿ç”¨ WebP --&gt;
    &lt;source
      v-if="webpSupported &amp;&amp; webpSrc"
      :srcset="webpSrc"
      type="image/webp"
    /&gt;
    &lt;!-- å›é€€åˆ°åŸå§‹æ ¼å¼ --&gt;
    &lt;img
      :src="fallbackSrc"
      :alt="alt"
      :width="width"
      :height="height"
      :class="imgClass"
      :style="imgStyle"
      :loading="loading"
      @load="handleLoad"
      @error="handleError"
    /&gt;
  &lt;/picture&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref, computed, onMounted } from "vue"
import {
  checkWebPSupport,
  getWebPSupportSync,
  convertToWebP,
} from "../utils/image"

interface Props {
  // åŸå§‹å›¾ç‰‡ URLï¼ˆå¿…éœ€ï¼‰
  src: string
  // WebP æ ¼å¼çš„ URLï¼ˆå¯é€‰ï¼Œå¦‚æœä¸æä¾›åˆ™è‡ªåŠ¨ç”Ÿæˆï¼‰
  webpSrc?: string
  // å›¾ç‰‡æè¿°
  alt?: string
  // å›¾ç‰‡å®½åº¦
  width?: string | number
  // å›¾ç‰‡é«˜åº¦
  height?: string | number
  // CSS ç±»å
  imgClass?: string
  // å†…è”æ ·å¼
  imgStyle?: string | Record&lt;string, any&gt;
  // æ‡’åŠ è½½
  loading?: "lazy" | "eager"
  // å›¾ç‰‡ä»£ç†æœåŠ¡ URLï¼ˆç”¨äºåœ¨çº¿å›¾ç‰‡è½¬æ¢ï¼‰
  proxyUrl?: string
  // CDN è½¬æ¢å‚æ•°
  cdnParams?: string
}

const props = withDefaults(defineProps&lt;Props&gt;(), {
  alt: "",
  loading: "lazy",
})

const emit = defineEmits&lt;{
  load: [event: Event]
  error: [event: Event]
}&gt;()

// ä½¿ç”¨åŒæ­¥æ–¹æ³•è·å–åˆå§‹å€¼ï¼Œé¿å…åˆå§‹åŠ è½½é WebP èµ„æº
// å¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œé»˜è®¤å‡è®¾æ”¯æŒï¼ˆç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒï¼‰
// åç»­å¼‚æ­¥æ£€æµ‹ä¼šæ›´æ–°è¿™ä¸ªå€¼
const webpSupported = ref(getWebPSupportSync())

// è®¡ç®— WebP æ ¼å¼çš„ URL
const webpSrc = computed(() =&gt; {
  // å¦‚æœæ˜ç¡®æä¾›äº† webpSrcï¼Œç›´æ¥ä½¿ç”¨
  if (props.webpSrc) {
    return props.webpSrc
  }

  // å¯¹äºåœ¨çº¿å›¾ç‰‡ï¼Œåªæœ‰åœ¨æä¾›äº†è½¬æ¢æ–¹å¼æ—¶æ‰ç”Ÿæˆ WebP URL
  const isOnlineImage =
    props.src.startsWith("http://") || props.src.startsWith("https://")
  if (isOnlineImage) {
    if (!props.proxyUrl &amp;&amp; !props.cdnParams) {
      // å¦‚æœæ²¡æœ‰æä¾›è½¬æ¢æ–¹å¼ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨åŸå§‹æ ¼å¼
      return ""
    }
    // æœ‰è½¬æ¢æ–¹å¼ï¼Œç”Ÿæˆ WebP URL
    return convertToWebP(props.src, {
      proxyUrl: props.proxyUrl,
      cdnParams: props.cdnParams,
    })
  }

  // å¯¹äºå†…ç½®å›¾ç‰‡ï¼ˆé€šè¿‡ import å¯¼å…¥çš„ï¼‰ï¼Œè‡ªåŠ¨å°è¯•ä½¿ç”¨ WebP ç‰ˆæœ¬
  // æ„å»ºè„šæœ¬ä¼šåœ¨åŒç›®å½•ä¸‹ç”Ÿæˆ .webp æ–‡ä»¶ï¼Œé€šè¿‡æ›¿æ¢æ‰©å±•åæ¥å¼•ç”¨
  // å¦‚æœ webp æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å›é€€åˆ°åŸå§‹å›¾ç‰‡
  return convertToWebP(props.src, {})
})

// å›é€€åˆ°åŸå§‹æ ¼å¼
const fallbackSrc = computed(() =&gt; props.src)

// åœ¨åå°å¼‚æ­¥æ£€æµ‹ WebP æ”¯æŒï¼ˆå¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼‰
// è¿™æ ·å¯ä»¥æ›´æ–°ç¼“å­˜ï¼Œä½†ä¸å½±å“åˆå§‹æ¸²æŸ“
onMounted(async () =&gt; {
  // å¦‚æœå·²ç»æœ‰ç¼“å­˜ï¼Œå°±ä¸éœ€è¦å†æ¬¡æ£€æµ‹
  if (typeof window !== "undefined" &amp;&amp; window.localStorage) {
    const cached = window.localStorage.getItem("__webp_support__")
    if (cached === null) {
      // æ²¡æœ‰ç¼“å­˜ï¼Œè¿›è¡Œæ£€æµ‹å¹¶æ›´æ–°
      const supported = await checkWebPSupport()
      // å¦‚æœæ£€æµ‹ç»“æœä¸åˆå§‹å‡è®¾ä¸åŒï¼Œæ›´æ–°çŠ¶æ€
      // ä½†æ­¤æ—¶å›¾ç‰‡å¯èƒ½å·²ç»åŠ è½½ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨ &lt;picture&gt; æ ‡ç­¾è‡ªåŠ¨é€‰æ‹©
      if (supported !== webpSupported.value) {
        webpSupported.value = supported
      }
    }
  } else {
    // æ²¡æœ‰ localStorageï¼Œç›´æ¥æ£€æµ‹
    webpSupported.value = await checkWebPSupport()
  }
})

const handleLoad = (event: Event) =&gt; {
  emit("load", event)
}

const handleError = (event: Event) =&gt; {
  emit("error", event)
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-7">5. é…ç½® TypeScript ç±»å‹å£°æ˜</h3>
<p>åˆ›å»º <code>src/types/images.d.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * å›¾ç‰‡æ–‡ä»¶ç±»å‹å£°æ˜
 */</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.jpg"</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> content
}

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.jpeg"</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> content
}

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.png"</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> content
}

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.gif"</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> content
}

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.webp"</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> content
}

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.svg"</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> content
}

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.ico"</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> content
}

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">"*.bmp"</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> content
}
</code></pre>
<h3 data-id="heading-8">6. é…ç½® UmiJS</h3>
<p>æ›´æ–° <code>.umirc.ts</code>ï¼Œæ·»åŠ  WebP æ–‡ä»¶æ”¯æŒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"umi"</span>
<span class="hljs-keyword">import</span> { routes } <span class="hljs-keyword">from</span> <span class="hljs-string">"./src/router/index"</span>

<span class="hljs-keyword">const</span> isPrd = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">"production"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">npmClient</span>: <span class="hljs-string">"pnpm"</span>,
  <span class="hljs-attr">presets</span>: [<span class="hljs-built_in">require</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">"@umijs/preset-vue"</span>)],
  <span class="hljs-attr">manifest</span>: {
    <span class="hljs-attr">fileName</span>: <span class="hljs-string">"manifest.json"</span>,
  },
  <span class="hljs-comment">// å¼€å‘ç¯å¢ƒ vite ï¼Œçº¿ä¸Šç¯å¢ƒ webpack æ‰“åŒ…</span>
  <span class="hljs-attr">vite</span>: isPrd ? <span class="hljs-literal">false</span> : {},
  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">config, { webpack }</span>) {
    <span class="hljs-comment">// é…ç½® webp æ–‡ä»¶æ”¯æŒï¼ˆä¸ jpg/png ä¸€æ ·å¤„ç†ï¼‰</span>
    <span class="hljs-comment">// umi é»˜è®¤å·²ç»å¤„ç†å›¾ç‰‡ï¼Œä½†å¯èƒ½ä¸åŒ…å« webpï¼Œè¿™é‡Œç¡®ä¿ webp è¢«æ­£ç¡®å¤„ç†</span>
    <span class="hljs-comment">// ä½¿ç”¨ asset/resource ç±»å‹ï¼Œè®© webpack å°† webp æ–‡ä»¶ä½œä¸ºé™æ€èµ„æºå¤„ç†</span>
    <span class="hljs-keyword">if</span> (!config.<span class="hljs-property">module</span>.<span class="hljs-property">rules</span>.<span class="hljs-title function_">has</span>(<span class="hljs-string">"webp"</span>)) {
      config.<span class="hljs-property">module</span>
        .<span class="hljs-title function_">rule</span>(<span class="hljs-string">"webp"</span>)
        .<span class="hljs-title function_">test</span>(<span class="hljs-regexp">/\.webp$/</span>)
        .<span class="hljs-title function_">type</span>(<span class="hljs-string">"asset/resource"</span>)
        .<span class="hljs-title function_">generator</span>({
          <span class="hljs-attr">filename</span>: <span class="hljs-string">"static/[name].[hash:8][ext]"</span>,
        })
    }

    config.<span class="hljs-property">optimization</span>.<span class="hljs-title function_">runtimeChunk</span>(<span class="hljs-literal">true</span>)
    <span class="hljs-keyword">return</span> config
  },
  <span class="hljs-attr">codeSplitting</span>: {
    <span class="hljs-attr">jsStrategy</span>: <span class="hljs-string">"depPerChunk"</span>,
  },
  <span class="hljs-attr">hash</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">history</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"hash"</span> },
  routes,
})
</code></pre>
<h3 data-id="heading-9">7. æ›´æ–° package.json</h3>
<p>åœ¨ <code>package.json</code> ä¸­æ·»åŠ æ„å»ºè„šæœ¬ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"umi dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm build:images &amp;&amp; umi build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build:prd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm build:images &amp;&amp; UMI_ENV=prd umi build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build:images"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node scripts/convert-images.mjs"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"postinstall"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"umi setup"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"preview"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"umi preview"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"analyze"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ANALYZE=1 umi build"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-10">ä½¿ç”¨æ–¹æ³•</h2>
<h3 data-id="heading-11">åŸºæœ¬ä½¿ç”¨</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import WebPImage from "../components/WebPImage.vue"
import yayImage from "../assets/yay.jpg"
import yayWebpImage from "../assets/yay.webp"
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;!-- æ–¹å¼1: è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ WebP --&gt;
    &lt;WebPImage :src="yayImage" width="388" alt="å›¾ç‰‡" /&gt;

    &lt;!-- æ–¹å¼2: æ‰‹åŠ¨æŒ‡å®š WebP æ–‡ä»¶ --&gt;
    &lt;WebPImage
      :src="yayImage"
      :webp-src="yayWebpImage"
      width="388"
      alt="å›¾ç‰‡"
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-12">åœ¨çº¿å›¾ç‰‡ï¼ˆä½¿ç”¨ CDN è½¬æ¢ï¼‰</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- é˜¿é‡Œäº‘ OSS --&gt;
  &lt;WebPImage
    src="https://your-bucket.oss-cn-hangzhou.aliyuncs.com/image.jpg"
    cdn-params="x-oss-process=image/format,webp"
    width="500"
    alt="CDN å›¾ç‰‡"
  /&gt;

  &lt;!-- è…¾è®¯äº‘ COS --&gt;
  &lt;WebPImage
    src="https://your-bucket.cos.ap-shanghai.myqcloud.com/image.jpg"
    cdn-params="imageMogr2/format/webp"
    width="500"
    alt="CDN å›¾ç‰‡"
  /&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-13">åœ¨çº¿å›¾ç‰‡ï¼ˆä½¿ç”¨ä»£ç†æœåŠ¡ï¼‰</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
const proxyUrl = "https://your-image-proxy.com/convert"
&lt;/script&gt;

&lt;template&gt;
  &lt;WebPImage
    src="https://example.com/image.jpg"
    :proxy-url="proxyUrl"
    width="500"
    alt="åœ¨çº¿å›¾ç‰‡"
  /&gt;
&lt;/template&gt;
</code></pre>
<h2 data-id="heading-14">å·¥ä½œåŸç†</h2>
<h3 data-id="heading-15">1. æ„å»ºæ—¶è½¬æ¢</h3>
<ul>
<li>è¿è¡Œ <code>pnpm build</code> æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œ <code>build:images</code> è„šæœ¬</li>
<li>è„šæœ¬æ‰«æ <code>src/assets</code> ç›®å½•ä¸‹çš„æ‰€æœ‰ JPG/PNG å›¾ç‰‡</li>
<li>ä½¿ç”¨ <code>imagemin-webp</code> è½¬æ¢ä¸º WebP æ ¼å¼</li>
<li>è½¬æ¢åçš„æ–‡ä»¶ä¿å­˜åœ¨åŒä¸€ç›®å½•</li>
</ul>
<h3 data-id="heading-16">2. è¿è¡Œæ—¶åŠ è½½</h3>
<ul>
<li>ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œä½¿ç”¨ <code>getWebPSupportSync()</code> åŒæ­¥è·å– WebP æ”¯æŒçŠ¶æ€</li>
<li>å¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œé»˜è®¤å‡è®¾æ”¯æŒï¼ˆé¿å…é‡å¤åŠ è½½ï¼‰</li>
<li>ä½¿ç”¨ <code>&lt;picture&gt;</code> æ ‡ç­¾ï¼Œæµè§ˆå™¨è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ ¼å¼</li>
<li>åå°å¼‚æ­¥æ£€æµ‹ï¼Œæ›´æ–°ç¼“å­˜ä¾›ä¸‹æ¬¡ä½¿ç”¨</li>
</ul>
<h3 data-id="heading-17">3. æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šä½¿ç”¨ <code>localStorage</code> ç¼“å­˜æ£€æµ‹ç»“æœ</li>
<li><strong>é¿å…é‡å¤åŠ è½½</strong>ï¼šåˆå§‹å€¼ä½¿ç”¨åŒæ­¥æ–¹æ³•è·å–ï¼Œé¿å…å…ˆåŠ è½½åŸå§‹å›¾ç‰‡å†åŠ è½½ WebP</li>
<li><strong>æ™ºèƒ½å›é€€</strong>ï¼šä½¿ç”¨ <code>&lt;picture&gt;</code> æ ‡ç­¾ï¼Œæµè§ˆå™¨è‡ªåŠ¨å¤„ç†å›é€€</li>
</ul>
<h2 data-id="heading-18">æ•ˆæœå¯¹æ¯”</h2>
<p>æµ‹è¯•ç»“æœæ˜¾ç¤ºï¼Œ<code>yay.jpg</code> (177KB) è½¬æ¢ä¸º <code>yay.webp</code> (23KB) åï¼Œæ–‡ä»¶å¤§å°å‡å°‘äº† <strong>87.0%</strong>ï¼</p>
<h2 data-id="heading-19">æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼šå¼€å‘æ—¶ä¸ä¼šè‡ªåŠ¨è½¬æ¢ï¼Œéœ€è¦æ‰‹åŠ¨è¿è¡Œ <code>pnpm build:images</code></li>
<li><strong>Git ç®¡ç†</strong>ï¼šå»ºè®®å°† <code>.webp</code> æ–‡ä»¶æ·»åŠ åˆ° <code>.gitignore</code>ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é€šè¿‡æ„å»ºè„šæœ¬è‡ªåŠ¨ç”Ÿæˆ</li>
<li><strong>è´¨é‡è°ƒæ•´</strong>ï¼šå¯åœ¨ <code>scripts/convert-images.mjs</code> ä¸­è°ƒæ•´è´¨é‡å‚æ•°ï¼ˆé»˜è®¤ 80ï¼‰</li>
<li><strong>æµè§ˆå™¨å…¼å®¹æ€§</strong>ï¼šç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ WebPï¼Œç»„ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å›é€€</li>
</ol>
<h2 data-id="heading-20">æ€»ç»“</h2>
<p>é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p>
<ul>
<li>âœ… æ„å»ºæ—¶è‡ªåŠ¨è½¬æ¢å›¾ç‰‡ä¸º WebP</li>
<li>âœ… æ™ºèƒ½æ ¼å¼é€‰æ‹©å’Œè‡ªåŠ¨å›é€€</li>
<li>âœ… æ€§èƒ½ä¼˜åŒ–ï¼Œé¿å…é‡å¤åŠ è½½</li>
<li>âœ… ç»„ä»¶åŒ–å°è£…ï¼Œä½¿ç”¨ç®€å•</li>
</ul>
<p>è¿™å¥—æ–¹æ¡ˆå¯ä»¥æ˜¾è‘—æå‡é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œç‰¹åˆ«æ˜¯åœ¨å›¾ç‰‡è¾ƒå¤šçš„åœºæ™¯ä¸‹æ•ˆæœæ˜æ˜¾ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JSON è½¬ BPMN å®æˆ˜ï¼šå¦‚ä½•ç”¨ Flowable æŠŠå‰ç«¯æµç¨‹å›¾JSONè½¬æˆ XMLï¼ˆé™„å®Œæ•´ä»£ç ï¼‰]]></title>    <link>https://juejin.cn/post/7580312375372136488</link>    <guid>https://juejin.cn/post/7580312375372136488</guid>    <pubDate>2025-12-06T15:36:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580312375372136488" data-draft-id="7580285196693291008" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JSON è½¬ BPMN å®æˆ˜ï¼šå¦‚ä½•ç”¨ Flowable æŠŠå‰ç«¯æµç¨‹å›¾JSONè½¬æˆ XMLï¼ˆé™„å®Œæ•´ä»£ç ï¼‰"/> <meta itemprop="keywords" content="å·¥ä½œæµå¼•æ“"/> <meta itemprop="datePublished" content="2025-12-06T15:36:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jay672"/> <meta itemprop="url" content="https://juejin.cn/user/4091709122949404"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JSON è½¬ BPMN å®æˆ˜ï¼šå¦‚ä½•ç”¨ Flowable æŠŠå‰ç«¯æµç¨‹å›¾JSONè½¬æˆ XMLï¼ˆé™„å®Œæ•´ä»£ç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4091709122949404/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jay672
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T15:36:32.000Z" title="Sat Dec 06 2025 15:36:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ­¥éª¤æ¦‚è§ˆï¼š</strong></p>
<ol>
<li>å‡†å¤‡ JSON æ•°æ®ç»“æ„</li>
<li>å®šä¹‰ Node æŠ½è±¡ç±»åŠå­ç±»</li>
<li>ä½¿ç”¨ Jackson å¤šæ€è§£æ JSON</li>
<li>å®ç° convert() æ–¹æ³•ç”Ÿæˆ FlowElement</li>
<li>æ„å»º SequenceFlow è¿æ¥èŠ‚ç‚¹</li>
<li>å¯¼å‡º .bpmn20.xml æ–‡ä»¶</li>
</ol>
</blockquote>
<p>å¼€å‘Flowableå®æˆ˜é¡¹ç›®æ—¶ï¼Œéœ€è¦ç”¨åˆ°å·¥ä½œæµçš„å‰ç«¯ç»˜åˆ¶é¡µé¢ï¼Œè€Œè¯¥é¡µé¢è½¬æ¢ä¿å­˜çš„æ•°æ®ä¸ºJsonæ ¼å¼ï¼Œåœ¨Flowableç­‰å·¥ä½œæµå¼•æ“ä¸­å‡ä½¿ç”¨Bpmnæ–‡ä»¶ï¼Œå…¶åç¼€ä¸º<code>.bpmn20.xml</code> æˆ–<code>.bpmn.xml</code> ã€‚é€šè¿‡åç¼€å¯ä»¥çœ‹å‡ºè¯¥æ–‡ä»¶ä¸ºxmlæ–‡æ¡£æ–‡ä»¶ï¼Œç”±æ­¤å®˜æ–¹æä¾›äº†<code>flowable-bpmn-converter</code>çš„Mavenä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥ä¾èµ–å®ç°Jsonè½¬xmlï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.flowable<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>flowable-bpmn-converter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>7.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼Œæ¥ä¸‹æ¥å°±æ˜¯å‡†å¤‡è½¬æ¢çš„Modelï¼Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯å°†Jsonæ˜ å°„åˆ°ä¸åŒçš„ç±»ä¸­ï¼Œå¯¹åº”å¥½ç›¸å…³çš„ç»§æ‰¿å…³ç³»ï¼Œæœ€åä½¿ç”¨ä¾èµ–ä¸­çš„è½¬æ¢å®Œæˆæ–‡ä»¶çš„å¯¼å‡ºã€‚</p>
<blockquote>
<p>æ³¨ï¼šæœ¬æ–‡ä¸­â€œèŠ‚ç‚¹â€æŒ‡ JSON ä¸­çš„æµç¨‹èŠ‚ç‚¹ï¼Œâ€œFlowElementâ€æŒ‡ Flowable ä¸­çš„ BPMN å…ƒç´ ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å‡†å¤‡å·¥ä½œ</h2>
<hr/>
<h3 data-id="heading-1">1.1 æŠ½è±¡ç±»Node</h3>
<p>åœ¨å¼€å§‹ä¹‹å‰å…ˆè¦ç†æ¸…æ¥šæ¯ä¸€ä¸ªå·¥ä½œæµçš„èŠ‚ç‚¹ä»¥åŠä»–ä»¬ä¹‹é—´çš„å…³ç³»ï¼Œéœ€è¦æŠ½è±¡å‡ºæ¥ä¸€ä¸ªæœ€å¼€å§‹çš„NodeèŠ‚ç‚¹ï¼ŒNodeä¸å…¶ç»§æ‰¿ç±»çš„å…³ç³»å¤§è‡´é•¿è¿™ä¸ªæ ·å­ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4046fe6635ce47d5bc95e030e71df2d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF5Njcy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765640192&amp;x-signature=aLhmR%2BQHO6qcmbXByuZZbuPm0ts%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå­ç±»Nodeå‡æœ‰<code>èŠ‚ç‚¹id</code>ã€<code>çˆ¶èŠ‚ç‚¹id</code>ã€<code>èŠ‚ç‚¹åç§°</code>ç­‰ç­‰å…±åŒç‚¹ï¼Œå› æ­¤å¯ä»¥æŠ½è±¡å‡ºæ¥ï¼Œå³ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> String id;          <span class="hljs-comment">// èŠ‚ç‚¹id</span>
<span class="hljs-keyword">private</span> String parentId;    <span class="hljs-comment">// çˆ¶èŠ‚ç‚¹id</span>
<span class="hljs-keyword">private</span> String name;        <span class="hljs-comment">// èŠ‚ç‚¹åç§°</span>
<span class="hljs-keyword">private</span> String type;        <span class="hljs-comment">// èŠ‚ç‚¹ç±»å‹</span>
<span class="hljs-keyword">private</span> Node next;          <span class="hljs-comment">// å­èŠ‚ç‚¹</span>
<span class="hljs-keyword">private</span> JsonNode props;     <span class="hljs-comment">// å±æ€§é…ç½®</span>
<span class="hljs-meta">@JsonIgnore</span>
<span class="hljs-keyword">private</span> String branchId;    <span class="hljs-comment">// åˆ†æ”¯idï¼ˆè¾…åŠ©å±æ€§ï¼‰</span>
</code></pre>
<p>å› ä¸ºåç»­è¿˜æœ‰è½¬æ¢åŠ¨ä½œï¼Œè€Œæ¯ä¸€ä¸ªèŠ‚ç‚¹å‡éœ€è¦è¿›è¡Œè½¬æ¢ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ ä¸€ä¸ª<code>convert()</code>çš„æŠ½è±¡æ–¹æ³•ï¼Œæ–¹ä¾¿åç»­è¿›è¡Œè½¬æ¢ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> List&lt;FlowElement&gt; <span class="hljs-title function_">convert</span><span class="hljs-params">()</span>;
</code></pre>
<h3 data-id="heading-2">1.2 Jacksonçš„å¤šæ€ç±»å‹</h3>
<p>ä¸ºäº†æ–¹ä¾¿åšè½¬æ¢ï¼Œè¿™é‡Œæˆ‘å‡†å¤‡äº†ä¸€æ®µJsonæ•°æ®ï¼Œè¯¥æ•°æ®æ˜¯ç”±<code>wflow-web-next</code> Vue3ç‰ˆæœ¬ç”Ÿæˆï¼Œç¨å¾®åšäº†ä¸€äº›å°è°ƒæ•´ï¼Œæ·»åŠ äº†nextå±æ€§ï¼Œå¹¶å°†å­èŠ‚ç‚¹åµŒå¥—å…¥äº†nextï¼Œåç»­ä½¿ç”¨é€’å½’è½¬æ¢ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼š</p>
<ul>
<li>
<p>ç®€å•çš„Jsonæµ‹è¯•æ•°æ®</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æœªå‘½åæµç¨‹"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"groupId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">222</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"process"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node_root"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Start"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å‘èµ·äºº"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"parentId"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"next"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node_17628242120246176"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Approval"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å®¡æ‰¹äºº"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"parentId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node_root"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"next"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node_end"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"End"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æµç¨‹ç»“æŸ"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"parentId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node_17628242120246176"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"USER"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"ruleType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ROOT_SELF"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"taskMode"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AND"</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"percentage"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"needSign"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"assignUser"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"rootSelect"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"multiple"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"leader"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"level"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"emptySkip"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"leaderTop"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"level"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"toEnd"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"emptySkip"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"assignDept"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"dept"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LEADER"</span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"assignRole"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"noUserHandler"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TO_NEXT"</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"assigned"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"sameRoot"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TO_SELF"</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"assigned"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                    <span class="hljs-attr">"enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"timeUnit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"M"</span><span class="hljs-punctuation">,</span>
                    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TO_PASS"</span>
                <span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"remark"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
<p>Jsonæ•°æ®ä¸­åŒ…å«åµŒå¥—çš„èŠ‚ç‚¹ï¼Œè¿™æ ·å°±å¾ˆæ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨Jacksonçš„å¤šæ€ç±»å‹æ¥è¿›è¡ŒåµŒå¥—çš„è½¬æ¢ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@JsonTypeInfo(use = JsonTypeInfo.Id.NAME,include = JsonTypeInfo.As.PROPERTY,property = "type",defaultImpl = Node.class,visible = true)</span>
<span class="hljs-meta">@JsonSubTypes({
        @JsonSubTypes.Type(value = StartNode.class,name = "Start"),
        @JsonSubTypes.Type(value = ApprovalNode.class, name = "Approval"),
        @JsonSubTypes.Type(value = EndNode.class, name = "End")
})</span>
</code></pre>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ@JsonTypeInfoç”¨æ¥ç¡®å®šæˆ‘ä»¬éœ€è¦è½¬æ¢çš„æ ‡è¯†ï¼Œå¦‚i<code>JsonTypeInfo.As.PROPERTY</code>ä»£è¡¨ä½¿ç”¨çš„æ˜¯å±æ€§çš„åç§°æ¥ç¡®å®šæˆ‘ä»¬éœ€è¦è½¬æ¢çš„ä¸åŒçš„ç±»å‹ï¼Œæ‰€ä»¥åœ¨@JsonSubTypesä¸­å¯ä»¥çœ‹åˆ°å­ç±»å‹çš„æ³¨é‡Šï¼Œå½“å±æ€§<code>type</code>çš„å€¼ä¸º<code>Start</code>æ—¶ï¼ŒæŒ‡å®šè½¬æ¢ä¸º<code>StartNode</code>ç±»çš„å®ä½“ï¼Œå½“æˆ‘ä»¬æœ‰æ›´å¤šä¸åŒçš„èŠ‚ç‚¹æ—¶ï¼Œå°±éœ€è¦åœ¨è¿™é‡Œæ·»åŠ è½¬æ¢çš„æ ‡è¯†äº†ã€‚</p>
<h2 data-id="heading-3">äºŒã€NodeèŠ‚ç‚¹</h2>
<hr/>
<p>åœ¨è½¬æ¢æ—¶éœ€è¦StartEventã€UserTaskã€EndEventè¿™ä¸‰ä¸ªå·¥ä½œæµèŠ‚ç‚¹ï¼Œç°åœ¨æˆ‘ä»¬æ¥åˆ›å»ºä»–ä»¬ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢çš„NodeèŠ‚ç‚¹å…³ç³»å›¾ä¸­çœ‹åˆ°ï¼ŒAssigneeNodeæœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œè¿™æ˜¯å› ä¸ºç”¨æˆ·ä»»åŠ¡å¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€ä¸Šåˆ†æ”¯å‡º<code>Approvalç±»å‹</code>å’Œ<code>æŠ„é€ç±»å‹</code> ï¼Œæœ‰å¤šç§ä¸åŒçš„ç”¨æˆ·æŒ‡æ´¾æ–¹å¼ï¼Œæ‰€ä»¥éœ€è¦å†æ¬¡æŠ½è±¡å‡ºä¸€ä¸ªç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@EqualsAndHashCode(callSuper = true)</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AssigneeNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Node</span> {
    <span class="hljs-comment">// å®¡æ‰¹å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> AssigneeTypeEnum assigneeType;
    <span class="hljs-comment">// è¡¨å•å†…äººå‘˜</span>
    <span class="hljs-keyword">private</span> String formUser;
    <span class="hljs-comment">// è¡¨å•å†…è§’è‰²</span>
    <span class="hljs-keyword">private</span> String formRole;
    <span class="hljs-comment">// å®¡æ‰¹äºº</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; users;
    <span class="hljs-comment">// å®¡æ‰¹äººè§’è‰²</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; roles;
    <span class="hljs-comment">// ä¸»ç®¡</span>
    <span class="hljs-keyword">private</span> Integer leader;
    <span class="hljs-comment">// ç»„ç»‡ä¸»ç®¡</span>
    <span class="hljs-keyword">private</span> Integer orgLeader;
    <span class="hljs-comment">// å‘èµ·äººè‡ªé€‰ï¼štrue-å•é€‰ï¼Œfalse-å¤šé€‰</span>
    <span class="hljs-keyword">private</span> Boolean choice;
    <span class="hljs-comment">// å‘èµ·äººè‡ªå·±</span>
    <span class="hljs-keyword">private</span> Boolean self;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> List&lt;FlowElement&gt; <span class="hljs-title function_">convert</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>Approvalç±»å‹çš„å±æ€§å£°æ˜åŠè½¬æ¢æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@EqualsAndHashCode(callSuper = true)</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@ToString(callSuper = true)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApprovalNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AssigneeNode</span>{

    <span class="hljs-keyword">private</span> ApprovalMultiEnum multi;    <span class="hljs-comment">// å¤šäººå®¡æ‰¹æ–¹å¼</span>
    <span class="hljs-keyword">private</span> BigDecimal multiPercent;    <span class="hljs-comment">// å¤šäººä¼šç­¾é€šè¿‡ç™¾åˆ†æ¯”</span>
    <span class="hljs-keyword">private</span> Node next;                  <span class="hljs-comment">// å­èŠ‚ç‚¹</span>

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;FlowElement&gt; <span class="hljs-title function_">convert</span><span class="hljs-params">()</span> {

        <span class="hljs-comment">// æ‰€æœ‰èŠ‚ç‚¹é›†åˆ</span>
        ArrayList&lt;FlowElement&gt; elements = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-comment">// ç”¨æˆ·èŠ‚ç‚¹</span>
        <span class="hljs-type">UserTask</span> <span class="hljs-variable">userTask</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserTask</span>();
        userTask.setId(<span class="hljs-built_in">this</span>.getId());
        userTask.setName(<span class="hljs-built_in">this</span>.getName());
        <span class="hljs-comment">// å®¡æ‰¹äºº</span>
        <span class="hljs-type">MultiInstanceLoopCharacteristics</span> <span class="hljs-variable">multiInstanceLoopCharacteristics</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MultiInstanceLoopCharacteristics</span>();
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getMulti() == ApprovalMultiEnum.SEQUENTIAL) { <span class="hljs-comment">// å¤šäººå®¡æ‰¹æ–¹å¼-é¡ºåºå®¡æ‰¹</span>
            multiInstanceLoopCharacteristics.setSequential(<span class="hljs-literal">true</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getMulti() == ApprovalMultiEnum.JOINT) { <span class="hljs-comment">// å¤šäººå®¡æ‰¹æ–¹å¼-å¹¶è¡Œå®¡æ‰¹</span>
            multiInstanceLoopCharacteristics.setSequential(<span class="hljs-literal">false</span>);
            <span class="hljs-keyword">if</span> (Objects.nonNull(<span class="hljs-built_in">this</span>.getMultiPercent()) &amp;&amp; <span class="hljs-built_in">this</span>.getMultiPercent().compareTo(BigDecimal.ZERO) &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">percent</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getMultiPercent().divide(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-number">100</span>), <span class="hljs-number">2</span>, RoundingMode.DOWN);
                multiInstanceLoopCharacteristics.setCompletionCondition(String.format(<span class="hljs-string">"${nrOfCompletedInstances/nrOfInstances &gt;= %s}"</span>, percent));
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.getMulti() == ApprovalMultiEnum.SINGLE) { <span class="hljs-comment">// æ­£å¸¸ç­¾å</span>
            multiInstanceLoopCharacteristics.setSequential(<span class="hljs-literal">false</span>);
            multiInstanceLoopCharacteristics.setCompletionCondition(<span class="hljs-string">"${nrOfCompletedInstances &gt; 0}"</span>);
        }

        <span class="hljs-type">String</span> <span class="hljs-variable">variable</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"%sItem"</span>, <span class="hljs-built_in">this</span>.getId());
        multiInstanceLoopCharacteristics.setElementVariable(variable);
        multiInstanceLoopCharacteristics.setInputDataItem(String.format(<span class="hljs-string">"${%sCollection}"</span>, <span class="hljs-built_in">this</span>.getId()));
        userTask.setLoopCharacteristics(multiInstanceLoopCharacteristics);
        userTask.setAssignee(String.format(<span class="hljs-string">"${%s}"</span>, variable));
        elements.add(userTask);
        <span class="hljs-comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„è¿çº¿</span>
        <span class="hljs-type">Node</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getNext();
        <span class="hljs-type">SequenceFlow</span> <span class="hljs-variable">sequenceFlow</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.buildSequence(next);
        elements.add(sequenceFlow);
        <span class="hljs-comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>
        <span class="hljs-keyword">if</span> (Objects.nonNull(next)) {
            next.setBranchId(<span class="hljs-built_in">this</span>.getBranchId());
            List&lt;FlowElement&gt; flowElements = next.convert();
            elements.addAll(flowElements);
        }

        <span class="hljs-keyword">return</span> elements;
    }
}

</code></pre>
<p>StartEventå’ŒEndEventè¾ƒä¸ºç®€å•ï¼Œæ‰€ä»¥åªéœ€å®ç°è½¬æ¢ä»£ç ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StartNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Node</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;FlowElement&gt; <span class="hljs-title function_">convert</span><span class="hljs-params">()</span> {
        ArrayList&lt;FlowElement&gt; elements = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-comment">// åˆ›å»ºå¼€å§‹èŠ‚ç‚¹</span>
        <span class="hljs-type">StartEvent</span> <span class="hljs-variable">startEvent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StartEvent</span>();
        startEvent.setId(<span class="hljs-built_in">this</span>.getId());
        startEvent.setName(<span class="hljs-built_in">this</span>.getName());
        <span class="hljs-comment">// startEvent.setExecutionListeners(this.buidEventListener()); ç›‘å¬å™¨</span>
        <span class="hljs-comment">// æ·»åŠ èŠ‚ç‚¹</span>
        elements.add(startEvent);
        <span class="hljs-comment">// è·å–ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>
        <span class="hljs-type">Node</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getNext();
        <span class="hljs-type">SequenceFlow</span> <span class="hljs-variable">sequenceFlow</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.buildSequence(next);
        elements.add(sequenceFlow);
        <span class="hljs-comment">// é€’å½’ä¸‹ä¸€ä¸ªèŠ‚ç‚¹åŠä¹‹åçš„æ‰€æœ‰èŠ‚ç‚¹</span>
        <span class="hljs-keyword">if</span> (Objects.nonNull(next)) {
            List&lt;FlowElement&gt; flowElements = next.convert();
            elements.addAll(flowElements);
        }
        <span class="hljs-keyword">return</span> elements;
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ToString(callSuper = true)</span>
<span class="hljs-meta">@EqualsAndHashCode(callSuper = true)</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EndNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Node</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;FlowElement&gt; <span class="hljs-title function_">convert</span><span class="hljs-params">()</span> {
        ArrayList&lt;FlowElement&gt; elements = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-comment">// ç»“æŸèŠ‚ç‚¹</span>
        <span class="hljs-type">EndEvent</span> <span class="hljs-variable">endEvent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">EndEvent</span>();
        endEvent.setId(<span class="hljs-built_in">this</span>.getId());
        endEvent.setName(<span class="hljs-built_in">this</span>.getName());
<span class="hljs-comment">//        endEvent.setExecutionListeners(this.buidEventListener());</span>
        elements.add(endEvent);
        <span class="hljs-keyword">return</span> elements;
    }
}
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€æ„å»ºSequenceFlow</h2>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/535ac640dbe747d797f7918b5e4f7534~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF5Njcy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765640192&amp;x-signature=tglcZWo8g9E5Lz6zYN6OpKdpHn0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦ä½¿ç”¨ä¸€ä¸ªSequenceFlowæ¥è¿›è¡Œè¿æ¥ï¼Œå®è´¨ä¸ŠSequenceFlowä¹Ÿæ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤å¯ä»¥åœ¨NodeæŠ½è±¡ç±»ä¸­å¢åŠ <code>buildSequence()</code>æ–¹æ³•ï¼Œè½¬æ¢æ—¶ï¼Œæ„å»ºæ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ºSequenceFlowï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> SequenceFlow <span class="hljs-title function_">buildSequence</span><span class="hljs-params">(Node next)</span> {
        String sourceRef;
        String targetRef;
        <span class="hljs-keyword">if</span> (Objects.nonNull(next)) {
            sourceRef = next.getParentId();
            targetRef = next.getId();
        } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// Try to find branch</span>
            <span class="hljs-keyword">if</span> (StringUtils.isNotBlank(<span class="hljs-built_in">this</span>.branchId)) {
                sourceRef = <span class="hljs-built_in">this</span>.id;
                targetRef = <span class="hljs-built_in">this</span>.branchId;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(String.format(<span class="hljs-string">"èŠ‚ç‚¹ %s çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸èƒ½ä¸ºç©º"</span>, <span class="hljs-built_in">this</span>.id));
            }
        }
        <span class="hljs-comment">// Build SequenceFlow</span>
        <span class="hljs-type">SequenceFlow</span> <span class="hljs-variable">sequenceFlow</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SequenceFlow</span>();
        sequenceFlow.setId(String.format(<span class="hljs-string">"%s-%s"</span>, sourceRef, targetRef));
        sequenceFlow.setSourceRef(sourceRef);
        sequenceFlow.setTargetRef(targetRef);
        <span class="hljs-keyword">return</span> sequenceFlow;
 }
</code></pre>
<h2 data-id="heading-5">å››ã€å®¡æ‰¹æ–¹å¼æšä¸¾</h2>
<p>è¡¥å……ä¸Šé¢ä»£ç çš„å®¡æ‰¹è§’è‰²æšä¸¾ç±»ï¼Œå¦‚æœæœ‰ç‰¹æ®Šçš„éœ€æ±‚å’Œå®¡æ‰¹æ–¹å¼ï¼Œå‡å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ï¼Œåç»­åœ¨è½¬æ¢æ—¶å¯ä»¥æ ¹æ®ç±»å‹è¿›è¡ŒåŠŸèƒ½è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Getter</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">AssigneeTypeEnum</span> {
    USER(<span class="hljs-string">"user"</span>, <span class="hljs-string">"ç”¨æˆ·"</span>),
    ROLE(<span class="hljs-string">"role"</span>, <span class="hljs-string">"è§’è‰²"</span>),
    CHOICE(<span class="hljs-string">"choice"</span>, <span class="hljs-string">"å‘èµ·äººè‡ªé€‰"</span>),
    SELF(<span class="hljs-string">"self"</span>, <span class="hljs-string">"å‘èµ·äººè‡ªå·±"</span>),
    LEADER(<span class="hljs-string">"leader"</span>, <span class="hljs-string">"éƒ¨é—¨ä¸»ç®¡"</span>),
    ORG_LEADER(<span class="hljs-string">"orgLeader"</span>, <span class="hljs-string">"ç»„ç»‡ä¸»ç®¡"</span>),
    FORM_USER(<span class="hljs-string">"formUser"</span>, <span class="hljs-string">"è¡¨å•ç”¨æˆ·"</span>),
    FORM_ROLE(<span class="hljs-string">"formRole"</span>, <span class="hljs-string">"è¡¨å•è§’è‰²"</span>),
    AUTO_REFUSE(<span class="hljs-string">"autoRefuse"</span>, <span class="hljs-string">"è‡ªåŠ¨æ‹’ç»"</span>),
    AUTO_PASS(<span class="hljs-string">"autoPass"</span>, <span class="hljs-string">"è‡ªåŠ¨é€šè¿‡"</span>);

    <span class="hljs-meta">@JsonValue</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String type;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String description;
}
</code></pre>
<p>å®¡æ‰¹æ–¹å¼æšä¸¾</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Getter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ApprovalMultiEnum</span> {
    SEQUENTIAL(<span class="hljs-string">"sequential"</span>, <span class="hljs-string">"å¤šäººå®¡æ‰¹æ–¹å¼-é¡ºåºå®¡æ‰¹"</span>),
    JOINT(<span class="hljs-string">"joint"</span>, <span class="hljs-string">"å¤šäººå®¡æ‰¹æ–¹å¼-å¹¶è¡Œå®¡æ‰¹"</span>),
    SINGLE(<span class="hljs-string">"single"</span>, <span class="hljs-string">"å¤šäººå®¡æ‰¹æ–¹å¼-ä»»ä½•äººå®¡æ‰¹"</span>);

    <span class="hljs-meta">@JsonValue</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String multi;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String description;

    ApprovalMultiEnum(String method, String description) {
        <span class="hljs-built_in">this</span>.multi = method;
        <span class="hljs-built_in">this</span>.description = description;
    }

}
</code></pre>
<h2 data-id="heading-6">äº”ã€å¼€å§‹è½¬æ¢</h2>
<p>å‡†å¤‡å·¥ä½œå·²ç»åšå¥½ï¼Œä½¿ç”¨å‹ç¼©è½¬ä¹‰åçš„Jsonä»£ç è¿›è¡Œè½¬æ¢ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"æœªå‘½åæµç¨‹"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"groupId"</span><span class="hljs-punctuation">:</span><span class="hljs-number">222</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"process"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"node_root"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Start"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"å‘èµ·äºº"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"parentId"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">"next"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"node_17628242120246176"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Approval"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"å®¡æ‰¹äºº"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"parentId"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"node_root"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"next"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"node_end"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"End"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"æµç¨‹ç»“æŸ"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"parentId"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"node_17628242120246176"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"USER"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"ruleType"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"ROOT_SELF"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"taskMode"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"AND"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"percentage"</span><span class="hljs-punctuation">:</span><span class="hljs-number">100</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"needSign"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">"assignUser"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"rootSelect"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"multiple"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"leader"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"level"</span><span class="hljs-punctuation">:</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"emptySkip"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"leaderTop"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"level"</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"toEnd"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">"emptySkip"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"assignDept"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"dept"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"LEADER"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"assignRole"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"noUserHandler"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"TO_NEXT"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"assigned"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"sameRoot"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"TO_SELF"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"assigned"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"enable"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">"time"</span><span class="hljs-punctuation">:</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"timeUnit"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"M"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"TO_PASS"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"remark"</span><span class="hljs-punctuation">:</span><span class="hljs-string">""</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>åœ¨å¼€å§‹è½¬æ¢ä¹‹å‰ï¼Œéœ€è¦å®ä¾‹åŒ–ProcessModelï¼Œç„¶åè¿›è¡Œè½¬æ¢ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ProcessModel</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> objectMapper.readValue(jsonString, ProcessModel.class);
System.out.println(person);

<span class="hljs-type">BpmnModel</span> <span class="hljs-variable">bpmnModel</span> <span class="hljs-operator">=</span> person.toBpmnModel();
<span class="hljs-type">byte</span>[] xmlBytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BpmnXMLConverter</span>().convertToXML(bpmnModel);
</code></pre>
<p>æµ‹è¯•ç»“æœå‡ºæ¥ï¼Œå¦‚æœnextæ²¡æœ‰æ­£å¸¸è¢«è½¬æ¢ï¼Œéœ€è¦æ³¨æ„æ·»åŠ <code>@ToString(callSuper = true)</code>ï¼Œè¿™æ ·åœ¨è½¬æ¢æ—¶ä¼šåŒ…å«çˆ¶ç±»çš„å±æ€§ã€‚æ­£å¸¸è½¬æ¢æ‰“å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-python" lang="python">ProcessModel(<span class="hljs-built_in">id</span>=null, name=æœªå‘½åæµç¨‹, process=Node(<span class="hljs-built_in">id</span>=node_root, parentId=null, name=å‘èµ·äºº, <span class="hljs-built_in">type</span>=Start, <span class="hljs-built_in">next</span>=ApprovalNode(<span class="hljs-built_in">super</span>=AssigneeNode(assigneeType=null, formUser=null, formRole=null, users=null, roles=null, leader=null, orgLeader=null, choice=null, self=null), multi=null, multiPercent=null, <span class="hljs-built_in">next</span>=EndNode(<span class="hljs-built_in">super</span>=Node(<span class="hljs-built_in">id</span>=node_end, parentId=node_17628242120246176, name=æµç¨‹ç»“æŸ, <span class="hljs-built_in">type</span>=End, <span class="hljs-built_in">next</span>=null, props={}, branchId=null))), props={}, branchId=null), groupId=<span class="hljs-number">222</span>, remark=)
</code></pre>
<p>å®Œæ•´Mainæ–¹æ³•æ„å»ºä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
		<span class="hljs-comment">// ä»£ç ä¸­å°±ä¸åštry catchäº†ï¼Œè¾“å‡ºå¤±è´¥ä¼šæ­£å¸¸å‡ºé”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">String</span> <span class="hljs-variable">jsonString</span> <span class="hljs-operator">=</span> <span class="hljs-string">"{\"name\":\"æœªå‘½åæµç¨‹\",\"groupId\":222,\"process\":{\"id\":\"node_root\",\"type\":\"Start\",\"name\":\"å‘èµ·äºº\",\"parentId\":null,\"next\":{\"id\":\"node_17628242120246176\",\"type\":\"Approval\",\"name\":\"å®¡æ‰¹äºº\",\"parentId\":\"node_root\",\"next\":{\"id\":\"node_end\",\"type\":\"End\",\"name\":\"æµç¨‹ç»“æŸ\",\"parentId\":\"node_17628242120246176\",\"props\":{}},\"props\":{\"mode\":\"USER\",\"ruleType\":\"ROOT_SELF\",\"taskMode\":{\"type\":\"AND\",\"percentage\":100},\"needSign\":false,\"assignUser\":[],\"rootSelect\":{\"multiple\":false},\"leader\":{\"level\":1,\"emptySkip\":false},\"leaderTop\":{\"level\":0,\"toEnd\":false,\"emptySkip\":false},\"assignDept\":{\"dept\":[],\"type\":\"LEADER\"},\"assignRole\":[],\"noUserHandler\":{\"type\":\"TO_NEXT\",\"assigned\":[]},\"sameRoot\":{\"type\":\"TO_SELF\",\"assigned\":[]},\"timeout\":{\"enable\":false,\"time\":1,\"timeUnit\":\"M\",\"type\":\"TO_PASS\"}}},\"props\":{}},\"remark\":\"\"}"</span>;

        <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();

        <span class="hljs-comment">// æ–¹å¼ä¸€ï¼šå…ˆè½¬æ¢ä¸ºJsonNodeï¼Œå†è½¬æ¢ä¸ºå®ä½“ç±»</span>
        <span class="hljs-comment">// JsonNode jsonNode = objectMapper.readTree(jsonString);</span>
        <span class="hljs-comment">// ProcessModel person2 = objectMapper.treeToValue(jsonNode, ProcessModel.class);</span>

        <span class="hljs-comment">// æ–¹å¼ä¸€ï¼šç›´æ¥è½¬æ¢ä¸ºå®ä½“ç±»</span>
        <span class="hljs-type">ProcessModel</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> objectMapper.readValue(jsonString, ProcessModel.class);
        System.out.println(person);

        <span class="hljs-type">BpmnModel</span> <span class="hljs-variable">bpmnModel</span> <span class="hljs-operator">=</span> person.toBpmnModel();
        <span class="hljs-type">byte</span>[] xmlBytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BpmnXMLConverter</span>().convertToXML(bpmnModel);

        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">"/Users/macbook/æ–‡ä»¶/Studio/Java/JsonToBpmnDemo/target/test.bpmn20.xml"</span>));
        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(xmlBytes));
        <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">8096</span>];
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> in.read(buffer);
            <span class="hljs-keyword">if</span> (count == -<span class="hljs-number">1</span>) {
                <span class="hljs-keyword">break</span>;
            }
            outputStream.write(buffer, <span class="hljs-number">0</span>, count);
        }

        <span class="hljs-comment">// åˆ·æ–°å¹¶å…³é—­æµ</span>
        outputStream.flush();
        outputStream.close();
    }
}
</code></pre>
<p>è¾“å‡ºæˆåŠŸåï¼Œåœ¨targetæ–‡ä»¶å¤¹æ€»ä¼šæ­£å¸¸å‡ºç°<code>test.bpmn20.xml</code>æ–‡ä»¶ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4380ba7ab2864640ada631d9fb7618b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF5Njcy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765640192&amp;x-signature=Y%2BM81Wqeq4hc2be%2FsVyeOa60pFU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-7">å…­ã€æœ€å</h2>
<p>è¯¥ä»£ç é€‚ç”¨<code>wflow-web-next</code> è®¾è®¡å™¨çš„Jsonæ•°æ®ï¼Œæ„Ÿè°¢<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fwillianfu%2Fwflow-web-next" target="_blank" title="https://gitee.com/willianfu/wflow-web-next" ref="nofollow noopener noreferrer">wflow-web-next: wflow-web</a>ä½œè€…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fwillianfu" target="_blank" title="https://gitee.com/willianfu" ref="nofollow noopener noreferrer">willianfu</a>æä¾›çš„è®¾è®¡å™¨ ï¼Œå¯ä»¥ç»“åˆè¯¥è®¾è®¡å™¨ä½¿ç”¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•ä»¥Flowableä¸ºé¡¹ç›®çš„è®¾è®¡å™¨æ•°æ®ï¼Œæœ¬æ¡ˆä¾‹åªæä¾›å¤§è‡´çš„æ€è·¯ï¼Œå…·ä½“å¯ä»¥å‚è€ƒå¼€æºä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fcai_xiao_feng%2Flowflow-design-converter" target="_blank" title="https://gitee.com/cai_xiao_feng/lowflow-design-converter" ref="nofollow noopener noreferrer">lowflow-design-converter: ä½ä»£ç æµç¨‹è®¾è®¡å™¨è½¬bpmn</a>ï¼Œéå¸¸æ„Ÿè°¢è”¡æ™“å³°è€å¸ˆé¡¹ç›®ï¼Œç»™äº†æˆ‘å¾ˆå¤§çš„å¯å‘ï¼Œåç»­æœ¬é¡¹ç›®å®Œæˆåï¼Œæˆ‘ä¼šå¼€æºå‘å¸ƒåœ¨Githubä¸Šï¼Œæœ¬ç¯‡åšå®¢å¦‚æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿è¯„è®ºåŒºæˆ–ç§ä¿¡å»ºè®®ï¼Œå†æ¬¡æ„Ÿè°¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-176 Elasticsearch Filter DSL å…¨é¢å®æˆ˜ï¼šè¿‡æ»¤æŸ¥è¯¢ã€æ’åºåˆ†é¡µã€é«˜äº®ä¸æ‰¹é‡æ“ä½œ]]></title>    <link>https://juejin.cn/post/7580374090364878886</link>    <guid>https://juejin.cn/post/7580374090364878886</guid>    <pubDate>2025-12-07T01:41:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580374090364878886" data-draft-id="7580374090364862502" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-176 Elasticsearch Filter DSL å…¨é¢å®æˆ˜ï¼šè¿‡æ»¤æŸ¥è¯¢ã€æ’åºåˆ†é¡µã€é«˜äº®ä¸æ‰¹é‡æ“ä½œ"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-07T01:41:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-176 Elasticsearch Filter DSL å…¨é¢å®æˆ˜ï¼šè¿‡æ»¤æŸ¥è¯¢ã€æ’åºåˆ†é¡µã€é«˜äº®ä¸æ‰¹é‡æ“ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T01:41:45.000Z" title="Sun Dec 07 2025 01:41:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šåœ¨æ—¥å¿—æ£€ç´¢ã€ç”µå•†æœç´¢ç­‰åœºæ™¯ä¸­ï¼Œéœ€è¦åœ¨ Elasticsearch ä¸­ç»„åˆè¿‡æ»¤ã€æ’åºã€åˆ†é¡µã€é«˜äº®ä¸æ‰¹é‡æ“ä½œã€‚</li>
<li>ç»“è®ºï¼šFilter DSL è´Ÿè´£â€œæ˜¯å¦åŒ¹é…â€ã€Query è´Ÿè´£â€œåŒ¹é…ç¨‹åº¦â€ï¼Œå†é…åˆ sort/from/size/highlight/_mget/_bulk å½¢æˆä¸€æ•´å¥—æ£€ç´¢å®æˆ˜ç»„åˆæ‹³ã€‚</li>
<li>äº§å‡ºï¼šä¸€ç¯‡è¦†ç›– Filter DSLã€æ’åºåˆ†é¡µã€é«˜äº®å±•ç¤ºä¸æ‰¹é‡è¯»å†™çš„å®æˆ˜ç¬”è®°ï¼Œå¯ç›´æ¥å¥—ç”¨åˆ°çº¿ä¸Šæ£€ç´¢ä¸æ•°æ®å†™å…¥é“¾è·¯ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e2896efda874cd59a3491900ee00de7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765676504&amp;x-signature=bDpPQF8o3KfVOiTaRUaEfO7D0GQ%3D" alt="å¤§æ•°æ®-176 Elasticsearch Filter DSL å…¨é¢å®æˆ˜ï¼šè¿‡æ»¤æŸ¥è¯¢ã€æ’åºåˆ†é¡µã€é«˜äº®ä¸æ‰¹é‡æ“ä½œ" loading="lazy"/></p>
<h2 data-id="heading-1">ç‰ˆæœ¬çŸ©é˜µ</h2>

























<table><thead><tr><th>Elasticsearch ç‰ˆæœ¬</th><th>å·²éªŒè¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>7.xï¼ˆ7.6+ï¼‰</td><td>æ˜¯</td><td>å¼€å‘/æµ‹è¯•ç¯å¢ƒå¸¸è§„ä½¿ç”¨ï¼ŒFilter DSLã€sortã€highlightã€_mgetã€_bulk è¯­æ³•å‡å…¼å®¹å½“å‰ç¤ºä¾‹ã€‚</td></tr><tr><td>8.xï¼ˆ8.0+ï¼‰</td><td>æ˜¯</td><td>å®˜æ–¹ä»å…¼å®¹æœ¬æ–‡çš„ DSL å†™æ³•ï¼Œä¸ªåˆ«é»˜è®¤æ˜ å°„ç­–ç•¥ä¸å®‰å…¨é…ç½®ç•¥æœ‰å˜åŒ–ï¼Œéœ€æŒ‰å®é™…é›†ç¾¤è°ƒæ•´ç´¢å¼•ä¸æƒé™ã€‚</td></tr><tr><td>6.x åŠä»¥ä¸‹</td><td>å¦</td><td>æ ¸å¿ƒæ¦‚å¿µç›¸åŒï¼Œä½†éƒ¨åˆ† REST API è·¯å¾„ä¸å­—æ®µæ˜ å°„ç»†èŠ‚æœ‰å·®å¼‚ï¼Œéœ€ç»“åˆå¯¹åº”ç‰ˆæœ¬å®˜æ–¹æ–‡æ¡£ç¡®è®¤ã€‚</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b31ee8f4629844f48cf87e4a2705a7ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765676504&amp;x-signature=gfy6QfLfduQ92IsWcqBnoNr%2FICw%3D" alt="Elasticsearch" loading="lazy"/></p>
<h2 data-id="heading-2">Filter DSL</h2>
<h3 data-id="heading-3">åŸºæœ¬ä»‹ç»</h3>
<p>Filter DSLï¼šè¿‡æ»¤å™¨æŸ¥è¯¢è¯­è¨€ï¼‰
Filter DSL æ˜¯ Elasticsearch æä¾›çš„ä¸€ç§ç”¨äºæ„å»ºè¿‡æ»¤æŸ¥è¯¢çš„æ–¹å¼ã€‚ä¸ query è¯­å¥ä¸åŒï¼Œè¿‡æ»¤å™¨ä¸ä¼šè®¡ç®—ä¸æ–‡æ¡£ç›¸å…³çš„è¯„åˆ†ï¼Œè€Œæ˜¯ç®€å•åœ°ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚è¿™é€šå¸¸ç”¨äºåªå…³å¿ƒæ˜¯å¦åŒ¹é…è€Œä¸è€ƒè™‘åŒ¹é…åº¦çš„æƒ…å†µï¼Œå¦‚æ—¥å¿—åˆ†æã€æ•°æ®åˆ†ç±»ç­‰åœºæ™¯ã€‚Filter æŸ¥è¯¢æ›´é«˜æ•ˆï¼Œé€‚åˆä¸éœ€è¦è®¡ç®—ç›¸å…³æ€§çš„æ“ä½œã€‚</p>
<h3 data-id="heading-4">å®é™…ä½¿ç”¨</h3>
<p>Elasticsearchä¸­çš„æ‰€æœ‰çš„æŸ¥è¯¢éƒ½ä¼šè§¦å‘ç›¸å…³åº¦å¾—åˆ†è®¡ç®—ï¼Œå¯¹äºé‚£äº›ä¸éœ€è¦ç›¸å…³åº¦å¾—åˆ†çš„åœºæ™¯ä¸‹ï¼ŒElasticsearchä»¥è¿‡æ»¤å™¨çš„å½¢å¼æä¾›äº†å¦ä¸€ç§æŸ¥è¯¢åŠŸèƒ½ï¼Œè¿‡æ»¤å™¨åœ¨æ¦‚å¿µä¸Šç±»ä¼¼äºæŸ¥è¯¢ï¼Œä½†æ˜¯ä»–ä»¬æœ‰éå¸¸å¿«çš„æ‰§è¡Œé€Ÿåº¦ï¼Œæ‰§è¡Œé€Ÿåº¦å¿«ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š</p>
<ul>
<li>è¿‡æ»¤å™¨ä¸ä¼šè®¡ç®—ç›¸å…³åº¦çš„å¾—åˆ†ï¼Œæ‰€ä»¥å®ƒä»¬åœ¨è®¡ç®—ä¸Šæ›´å¿«ä¸€äº›</li>
<li>è¿‡æ»¤å™¨å¯ä»¥è¢«ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œè¿™ä½¿å¾—ä»–åœ¨é‡å¤çš„æœç´¢æŸ¥è¯¢ä¸Šï¼Œå…¶è¦æ¯”ç›¸åº”çš„æŸ¥è¯¢å¿«çš„å¤š</li>
</ul>
<p>ä¸ºäº†ç†è§£è¿‡æ»¤å™¨ï¼Œå¯ä»¥å°†ä¸€ä¸ªæŸ¥è¯¢ï¼ˆåƒæ˜¯match_allï¼Œmatchï¼Œboolç­‰ï¼‰å’Œä¸€ä¸ªè¿‡æ»¤å™¨ç»“åˆèµ·æ¥ï¼Œæˆ‘ä»¬ä»¥èŒƒå›´è¿‡æ»¤å™¨ä¸ºä¾‹ï¼Œå®ƒå…è®¸æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªåŒºé—´å€¼æ¥è¿‡æ»¤æ–‡æ¡£ï¼Œè¿™é€šå¸¸è¢«ç”¨åœ¨æ•°å­—å’Œæ—¥æœŸçš„è¿‡æ»¤ä¸Šï¼Œä¸‹é¢è¿™ä¸ªä¾‹å­ä½¿ç”¨ä¸€ä¸ªè¢«è¿‡æ»¤çš„ æŸ¥è¯¢ï¼Œå…¶è¿”å›å€¼æ˜¯200åˆ°1000ä¹‹é—´ï¼ˆé—­åŒºé—´ï¼‰çš„ä¹¦ï¼š</p>
<pre><code class="hljs language-json" lang="json">POST /book/_search
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"query"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"bool"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"must"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"match_all"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"filter"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"range"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"price"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"gte"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"lte"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1000</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿è¡Œçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5258f261f6d5469781104fdc2df59c65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765676504&amp;x-signature=HorRqbEtTULmBFHEHHNrLPOBeGs%3D" alt="Elasticsearch å®é™…ä½¿ç”¨" loading="lazy"/>
åˆ†è§£ä¸Šé¢çš„ä¾‹å­ï¼Œè¢«è¿‡æ»¤çš„æŸ¥è¯¢åŒ…å«ä¸€ä¸ªmatch_allæŸ¥è¯¢å’Œä¸€ä¸ªè¿‡æ»¤å™¨ã€‚å¯ä»¥åœ¨æŸ¥è¯¢éƒ¨åˆ†æ”¾å…¥å…¶ä»–æŸ¥è¯¢ï¼Œåœ¨Filteréƒ¨åˆ†æ”¾å…¥å…¶ä»–è¿‡æ»¤å™¨ï¼Œåœ¨ä¸Šé¢çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œç”±äºæ‰€æœ‰çš„åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å†…çš„æ–‡æ¡£éƒ½æ˜¯å¹³ç­‰çš„ï¼ˆç›¸å…³åº¦éƒ½ä¸€æ ·ï¼‰ï¼Œæ²¡æœ‰ä¸€ä¸ªæ–‡æ¡£æ¯”å¦ä¸€ä¸ªæ–‡æ¡£æ›´ç›¸å…³ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±è¦ä½¿ç”¨èŒƒå›´è¿‡æ»¤å™¨ã€‚
é€šå¸¸æƒ…å†µä¸‹ï¼Œè¦å†³å®šä½¿ç”¨è¿‡æ»¤å™¨è¿˜æ˜¯æŸ¥è¯¢ï¼Œä½ å°±éœ€è¦é—®è‡ªå·±æ˜¯å¦éœ€è¦ç›¸å…³åº¦å¾—åˆ†ï¼Œå¦‚æœç›¸å…³åº¦ä¸é‡è¦ï¼Œé‚£å°±ä½¿ç”¨è¿‡æ»¤å™¨ï¼Œå¦åˆ™ä½¿ç”¨æŸ¥è¯¢ã€‚æŸ¥è¯¢å’Œè¿‡æ»¤å™¨åœ¨æ¦‚å¿µä¸Šç±»ä¼¼äºSELECT WHEREè¯­å¥ã€‚</p>
<h2 data-id="heading-5">æŸ¥è¯¢æ’åº</h2>
<p>åœ¨ Elasticsearch ä¸­ï¼ŒæŸ¥è¯¢ç»“æœå¯ä»¥æŒ‰ä¸åŒçš„å­—æ®µè¿›è¡Œæ’åºï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯æŒ‰ _scoreï¼ˆç›¸å…³æ€§å¾—åˆ†ï¼‰æ’åºã€‚å¦‚æœæƒ³æ ¹æ®å…¶ä»–å­—æ®µæ’åºï¼Œæ¯”å¦‚æ—¶é—´æˆ³æˆ–ä»·æ ¼ï¼Œå¯ä»¥é€šè¿‡åœ¨æŸ¥è¯¢è¯·æ±‚ä¸­æŒ‡å®š sort å‚æ•°æ¥å®Œæˆã€‚æ’åºå¯ä»¥æ˜¯å‡åºï¼ˆascï¼‰æˆ–é™åºï¼ˆdescï¼‰ï¼Œå¸¸ç”¨äºç”µå•†ã€æ—¥å¿—åˆ†æç­‰éœ€è¦æŒ‰æ—¶é—´æˆ–æ•°å€¼æ’åºçš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-6">ç›¸å…³æ€§è¯„åˆ†</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿”å›çš„ç»“æœéƒ½æ˜¯æŒ‰ç…§ç›¸å…³æ€§è¿›è¡Œæ’åºçš„ï¼Œæœ€ç›¸å…³çš„æ–‡æ¡£æ’åœ¨æœ€å‰é¢ï¼Œé¦–å…ˆçœ‹çœ‹sortå‚æ•°ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒã€‚
ä¸ºäº†æŒ‰ç…§ç›¸å…³æ€§æ¥æ’åºï¼Œéœ€è¦å°†ç›¸å…³æ€§è¡¨ç¤ºä¸ºä¸€ä¸ªæ•°å€¼ï¼Œåœ¨Elasticsearchä¸­ï¼Œç›¸å…³æ€§å¾—åˆ†ç”±ä¸€ä¸ªæµ®ç‚¹æ•°è¿›è¡Œè¡¨ç¤ºï¼Œå¹¶åœ¨æœç´¢ç»“æœä¸­é€šè¿‡_scoreå‚æ•°è¿”å›ï¼Œé»˜è®¤æ’åºæ˜¯_scoreé™åºï¼ŒæŒ‰ç…§ç›¸å…³æ€§è¯„åˆ†å‡åºæ’åºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"># é»˜è®¤æŸ¥è¯¢æ—¶çš„æ’åº
POST /book/_search
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"query"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"match"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"solr"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85be41018c7944ed9c7c176d22e48a88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765676504&amp;x-signature=a36oBj86rjjFqAdtloLHTdmJ1Xc%3D" alt="Elasticsearch æ’åº" loading="lazy"/></p>
<h2 data-id="heading-7">å­—æ®µå€¼æ’åº</h2>
<pre><code class="hljs language-json" lang="json"># æŒ‰ç…§ order å­—æ®µè¿›è¡Œæ’åº
POST /book/_search
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"query"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"match_all"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sort"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"price"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"order"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"desc"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9faac19649c4bd39fcc39a17474a40c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765676504&amp;x-signature=gyCW4soAL2eaebUASXiCgxyKOYc%3D" alt="åœ¨Elasticsearch å­—æ®µå€¼æ’åº" loading="lazy"/></p>
<h3 data-id="heading-8">å¤šçº§æ’åº</h3>
<pre><code class="hljs language-json" lang="json"># å¤šç§æ’åºå­—æ®µ
POST /book/_search
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"query"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"match_all"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sort"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"price"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> 
      <span class="hljs-attr">"order"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"desc"</span> 
    <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> 
      <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> 
        <span class="hljs-attr">"order"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"desc"</span> 
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2564ca02f8d342fd90e7213496f9ca2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765676504&amp;x-signature=ANuSsv5Zp5Uqu0yXcucCmgMnpgU%3D" alt="Elasticsearch å¤šçº§æ’åº" loading="lazy"/></p>
<h2 data-id="heading-9">åˆ†é¡µæŸ¥è¯¢</h2>
<p>Elasticsearchåˆ†é¡µçš„æ–¹å¼æ˜¯éå¸¸ç®€å•çš„ï¼š</p>
<pre><code class="hljs language-json" lang="json"># åˆ†é¡µæŸ¥è¯¢
POST /book/_search
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"query"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"match_all"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sort"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"price"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"order"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"desc"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"from"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/337ba8a3b42241f9b5c1dfed66026539~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765676504&amp;x-signature=Hls%2Br1%2FMiVOA1Ubc7jtVLgbAH3s%3D" alt="Elasticsearch åˆ†é¡µæŸ¥è¯¢" loading="lazy"/></p>
<h2 data-id="heading-10">ç»“æœé«˜äº®</h2>
<p>ç»“æœé«˜äº®åŠŸèƒ½ç”¨äºåœ¨æŸ¥è¯¢ç»“æœä¸­çªå‡ºæ˜¾ç¤ºåŒ¹é…çš„å…³é”®è¯ã€‚å½“ç”¨æˆ·æœç´¢ç‰¹å®šçš„è¯æ—¶ï¼ŒElasticsearch å¯ä»¥åœ¨è¿”å›çš„æ–‡æ¡£ä¸­ç”¨ <code>&lt;em&gt;</code> æ ‡ç­¾æˆ–å…¶ä»– HTML å…ƒç´ å°†åŒ¹é…çš„å…³é”®è¯åŒ…è£¹èµ·æ¥ï¼Œæ–¹ä¾¿å‰ç«¯å±•ç¤ºã€‚è¿™ä¸ªåŠŸèƒ½å¸¸ç”¨äºæœç´¢å¼•æ“æˆ–å…¨æ–‡æ£€ç´¢çš„ç»“æœå±•ç¤ºä¸­ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<pre><code class="hljs language-json" lang="json">POST /book/_search
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"query"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"match"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"elasticsearch"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"highlight"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"pre_tags"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&lt;font color='pink'&gt;"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"post_tags"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&lt;/font&gt;"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"fields"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef98720d9696400fa036a00e326be34b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765676504&amp;x-signature=4649HbEPaDMazTIehU4E2twH99o%3D" alt="Elasticsearch ç»“æœé«˜äº®" loading="lazy"/>
ä½¿ç”¨match æŸ¥è¯¢çš„åŒæ—¶ï¼ŒåŠ ä¸Šä¸€ä¸ªhighlightå±æ€§ï¼š</p>
<ul>
<li>pre_tags å‰ç½®æ ‡ç­¾</li>
<li>post_tags åç½®æ ‡ç­¾</li>
<li>fields éœ€è¦é«˜äº®çš„å­—æ®µï¼Œnameè¿™é‡Œå£°æ˜titleå­—æ®µéœ€è¦é«˜äº®</li>
</ul>
<h2 data-id="heading-11">æ‰¹é‡æ“ä½œ</h2>
<p>Elasticsearch æä¾›äº†æ‰¹é‡æ“ä½œçš„ APIï¼Œç”¨äºä¸€æ¬¡æ€§æ‰§è¡Œå¤šä¸ªæ“ä½œï¼Œå¦‚æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ç­‰ã€‚è¿™ç§æ‰¹é‡æ“ä½œå¯ä»¥æ˜¾è‘—æé«˜å¤„ç†å¤§é‡æ•°æ®çš„æ•ˆç‡ï¼Œå‡å°‘ä¸æœåŠ¡å™¨çš„äº¤äº’æ¬¡æ•°ã€‚Bulk API åœ¨éœ€è¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®å¤„ç†æˆ–æ—¥å¿—æ‰¹é‡å†™å…¥æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<h3 data-id="heading-12">æ‰¹é‡æŸ¥è¯¢</h3>
<p>å¯ä»¥ä½¿ç”¨ mget æä¾›æ‰¹é‡æŸ¥è¯¢
å•æ¡æŸ¥è¯¢IDçš„æ—¶å€™ï¼Œæ¯”å¦‚å¾ˆå¤šä¸ªIDï¼Œä¸€æ¡ä¸€æ¡çš„æŸ¥è¯¢ï¼Œç½‘ç»œå¼€é”€æ˜¯éå¸¸å¤§çš„ã€‚</p>
<pre><code class="hljs language-json" lang="json"># æ‰¹é‡æŸ¥è¯¢
POST /_mget
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"docs"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"_index"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"book"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"_id"</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"_index"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"book"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"_id"</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿è¡Œçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9077ab11467d406a9a018449f74ab227~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765676504&amp;x-signature=aWI2AbXpLXZVjjj%2FNYsj6AaMyi0%3D" alt="Elasticsearch æ‰¹é‡æŸ¥è¯¢" loading="lazy"/></p>
<h3 data-id="heading-13">åŒä¸€ç´¢å¼•æ‰¹é‡æŸ¥è¯¢</h3>
<pre><code class="hljs language-json" lang="json"># bookç´¢å¼•ä¸‹æ£€ç´¢
POST /book/_mget
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"docs"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"_id"</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"_id"</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>

# å½“ç„¶ä¹Ÿæœ‰ä¸€ä¸ªç®€åŒ–çš„å†™æ³•
POST /book/_search
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"query"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"ids"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"values"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"1"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"4"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfdc2a15213d48f291986f49d232fd65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765676504&amp;x-signature=E7EBoach1z%2FcHewWzcPRxPr%2FR2U%3D" alt="Elasticsearch ç´¢å¼•æŸ¥è¯¢" loading="lazy"/></p>
<h3 data-id="heading-14">bulk æ‰¹é‡å¢åˆ æ”¹</h3>
<p>Bulk æ“ä½œè§£é‡Šå°†æ–‡æ¡£çš„å¢åˆ æ”¹æŸ¥ä¸€ç³»åˆ—æ“ä½œï¼Œé€šè¿‡ä¸€æ¬¡è¯·æ±‚å…¨éƒ¨åšå®Œï¼Œå‡å°‘ç½‘ç»œçš„ä¼ è¾“æ¬¡æ•°ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">POST /_bulk
{"action": {"metadata"}}
{"data"}
</code></pre>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ‰¹é‡çš„æ“ä½œï¼Œå¢åˆ æ”¹æŸ¥</span>
POST /_bulk
{ "delete": { "_index": "book", "_id": "1" }}
{ "create": { "_index": "book", "_id": "5" }}
{ "name": "test14","price":100.99 }
{ "update": { "_index": "book", "_id": "2"} }
{ "doc" : {"name" : "test"} }
</code></pre>
<p>åŠŸèƒ½ï¼š</p>
<ul>
<li>delete åˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼Œåªè¦1ä¸ªJSONä¸²å°±å¯ä»¥ åˆ é™¤çš„æ‰¹é‡æ“ä½œä¸éœ€è¦è¯·æ±‚ä½“</li>
<li>create ç›¸å½“äºå¼ºåˆ¶åˆ›å»º PUT /index/type/id/_create</li>
<li>index æ™®é€šçš„putæ“ä½œï¼Œå¯ä»¥æ˜¯åˆ›å»ºæ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¨é‡æ›¿æ¢æ–‡æ¡£</li>
<li>update æ‰§è¡Œçš„æ˜¯å±€éƒ¨æ›´æ–°partial updateæ“ä½œ</li>
</ul>
<p>æ ¼å¼ï¼š</p>
<ul>
<li>æ¯ä¸ªJSONä¸èƒ½æ¢è¡Œï¼Œç›¸é‚»JSONæ¢è¡Œ</li>
</ul>
<p>éš”ç¦»ï¼š</p>
<ul>
<li>æ¯ä¸ªæ“ä½œäº’ä¸å½±å“ï¼Œæ“ä½œå¤±è´¥çš„è¡Œä¼šè¿”å›å…¶å¤±è´¥ä¿¡æ¯</li>
</ul>
<p>å®é™…ç”¨æ³•ï¼š</p>
<ul>
<li>
<p>bulkè¯·æ±‚ä¸€æ¬¡ä¸è¦å¤ªå¤§ï¼Œå¦åˆ™ä¸€ä¸‹ä¼šæŒ¤å‹åˆ°å†…å­˜ä¸­ï¼Œæ€§èƒ½ä¼šä¸‹é™ã€‚</p>
</li>
<li>
<p>ä¸€æ¬¡è¯·æ±‚å‡ åƒä¸ªæ“ä½œï¼Œå¤§å°åœ¨å‡ Mæ­£å¥½</p>
</li>
<li>
<p>bulkä¼šå°†è¦å¤„ç†çš„æ•°æ®è½½å…¥å†…å­˜ä¸­ï¼Œæ‰€ä»¥æ•°æ®é‡æ˜¯æœ‰é™çš„ï¼Œæœ€ä½³çš„æ•°æ®é‡ä¸æ˜¯ä¸€ä¸ªç¡®å®šçš„å€¼ã€‚å–å†³äºä½ çš„ç¡¬ä»¶èƒ½åŠ›ã€æ–‡æ¡£å¤æ‚æ€§ã€ç´¢å¼•ä»¥åŠæœç´¢çš„è´Ÿè½½</p>
</li>
<li>
<p>ä¸€èˆ¬å»ºè®®1ä¸‡-5ä¸‡ä¸ªæ–‡æ¡£ï¼Œå¤§å°å»ºè®®æ˜¯15MBï¼Œé»˜è®¤ä¸èƒ½è¶…è¿‡100MBï¼Œå¯ä»¥åœ¨ï¼ˆESï¼‰ config/elasticsearch.ymlä¸­è¿›è¡Œè®¾ç½® http.max_content_length: 10mb</p>
</li>
</ul>
<h2 data-id="heading-15">é”™è¯¯é€ŸæŸ¥</h2>







































































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› </th><th>å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>bool + filter å†™äº†ä½†â€œçœ‹èµ·æ¥æ²¡ç”Ÿæ•ˆâ€</td><td>è¿‡æ»¤å­—æ®µç±»å‹ä¸åŒ¹é…ï¼ˆå¦‚å­—ç¬¦ä¸²å†™æˆ rangeï¼‰ã€ç´¢å¼•ä¸­æ— æ»¡è¶³æ¡ä»¶æ–‡æ¡£</td><td>ä½¿ç”¨ GET index/_mapping æŸ¥çœ‹å­—æ®µç±»å‹ï¼›ç”¨ term/range å•ç‹¬æµ‹è¯• Filter</td><td>ç¡®è®¤å­—æ®µç±»å‹ä¸ºæ•°å€¼/æ—¥æœŸå†ç”¨ rangeï¼›å­—ç¬¦ä¸²è¿‡æ»¤æ”¹ç”¨ term/terms æˆ– keyword å­—æ®µ</td></tr><tr><td>Filter DSL ä¸ query æ··ç”¨æ—¶ç»“æœæ•°é‡å¼‚å¸¸</td><td>æŠŠæœ¬è¯¥ç”¨ filter çš„æ¡ä»¶å†™è¿› mustï¼Œç›¸å…³åº¦å¯¼è‡´éƒ¨åˆ†ç»“æœè¢«æŒ¤æ‰</td><td>å»æ‰ filter éƒ¨åˆ†ï¼Œä»…ä¿ç•™ must å¯¹æ¯”æ€»å‘½ä¸­æ•°</td><td>å°†â€œçº¯æ¡ä»¶â€é€»è¾‘ï¼ˆçŠ¶æ€ã€åŒºé—´ã€æ ‡ç­¾ï¼‰ç»Ÿä¸€æ”¾åˆ° bool.filter ä¸­ï¼ŒåªæŠŠçœŸæ­£éœ€è¦ç®—ç›¸å…³åº¦çš„æ¡ä»¶ç•™åœ¨ must</td></tr><tr><td>sort æŠ¥é”™æˆ–æ’åºä¸ç¬¦åˆé¢„æœŸ</td><td>æ’åºå­—æ®µä¸º text ç±»å‹ï¼Œæœªä½¿ç”¨ keyword æˆ–æ•°å€¼å­—æ®µ</td><td>GET index/_mapping æŸ¥çœ‹å­—æ®µæ˜¯å¦ä¸º text ä¸”æ—  .keyword</td><td>å¯¹ text å­—æ®µæ”¹ç”¨ field.keyword æ’åºï¼Œæˆ–åœ¨ mapping ä¸­å¢åŠ  keyword å­å­—æ®µï¼›æ•°å€¼/æ—¥æœŸå­—æ®µç”¨åŸå­—æ®µæ’åº</td></tr><tr><td>from/size åˆ†é¡µåˆ°å¤§é¡µæ—¶å˜æ…¢æˆ–è¶…æ—¶</td><td>æ·±åˆ†é¡µï¼Œfrom éå¸¸å¤§ï¼Œå¯¼è‡´ ES éœ€è¦è·³è¿‡å¤§é‡æ–‡æ¡£</td><td>åœ¨å¤§é¡µåœºæ™¯ä¸‹æŠ“æ…¢æŸ¥è¯¢ã€æŸ¥çœ‹ _search è€—æ—¶ä¸èŠ‚ç‚¹ CPU</td><td>è€ƒè™‘ä½¿ç”¨ search_after/scroll æ–¹æ¡ˆæ›¿ä»£ from/size æ·±åˆ†é¡µï¼Œæˆ–é™åˆ¶æœ€å¤§é¡µç ä¸ size</td></tr><tr><td>highlight æ²¡æœ‰ä»»ä½•é«˜äº®è¾“å‡º</td><td>highlight fields æœªåŒ¹é…å®é™…å­—æ®µåï¼Œæˆ–å­—æ®µæœªå‚ä¸ query</td><td>æ£€æŸ¥è¯·æ±‚ä¸­çš„ highlight.fields ä¸ query ä¸­ä½¿ç”¨çš„å­—æ®µæ˜¯å¦ä¸€è‡´</td><td>ç¡®ä¿é«˜äº®å­—æ®µä¸ query å­—æ®µä¸€è‡´ï¼›å¿…è¦æ—¶ä¸ºå­—æ®µå¼€å¯åˆé€‚çš„æ˜ å°„ä¸åˆ†è¯é…ç½®</td></tr><tr><td>highlight HTML æ ‡ç­¾æœªç”Ÿæ•ˆæˆ–è¢«è½¬ä¹‰</td><td>å‰ç«¯æ¨¡æ¿å¯¹è¿”å›çš„ HTML åšäº†è½¬ä¹‰</td><td>åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹åŸå§‹ JSON å“åº”ä¸å‰ç«¯æ¸²æŸ“åçš„ DOM</td><td>å‰ç«¯æ¸²æŸ“æ—¶ä½¿ç”¨â€œä¿¡ä»» HTMLâ€æˆ–å±é™© HTML æ¸²æŸ“æ–¹å¼ï¼ˆè§†æ¡†æ¶è€Œå®šï¼‰ï¼Œç¡®ä¿ /<em> ç­‰æ ‡ç­¾ä¸è¢«äºŒæ¬¡è½¬ä¹‰</em></td></tr><tr><td>_mget è¿”å›éƒ¨åˆ†æ–‡æ¡£ missing</td><td>_index æˆ– _id å¡«å†™é”™è¯¯ï¼Œæˆ–æŒ‡å®šç´¢å¼•ä¸‹æœ¬èº«ä¸å­˜åœ¨è¯¥æ–‡æ¡£</td><td>æ£€æŸ¥ _mget è¯·æ±‚ä½“ä¸­çš„ index ä¸ idï¼›ç”¨å•æ¡ GET index/_doc/id éªŒè¯</td><td>ä¿è¯ç´¢å¼•åã€id ä¸å®é™…å†™å…¥æ—¶ä¸€è‡´ï¼Œè·¨ç´¢å¼•æ—¶æ³¨æ„æ¯æ¡ docs æ˜ç¡® _index</td></tr><tr><td>_bulk è¯·æ±‚è¿”å› 400/æ ¼å¼é”™è¯¯</td><td>è¡Œé—´æ¢è¡Œä¸è§„èŒƒã€JSON å¤šåŠ /å°‘åŠ èŠ±æ‹¬å·ã€ä½¿ç”¨äº†æ³¨é‡Š</td><td>å¯¹æ¯”å®˜æ–¹ç¤ºä¾‹ï¼Œé€è¡Œæ£€æŸ¥ {"action":{}} ä¸ {"doc":{}} æ˜¯å¦ä¸€ä¸€å¯¹åº”</td><td>ä¿è¯â€œåŠ¨ä½œè¡Œâ€å’Œâ€œæ•°æ®è¡Œâ€ä¸¥æ ¼æˆå¯¹ä¸”å„å ä¸€è¡Œï¼Œå»æ‰ä»»ä½•æ³¨é‡Šä¸å¤šä½™ç©ºæ ¼/é€—å·</td></tr><tr><td>_bulk ä¸­åªæœ‰éƒ¨åˆ†æ“ä½œæˆåŠŸ</td><td>bulk ä¸­å•æ¡æ“ä½œå› æ˜ å°„å†²çªã€ç‰ˆæœ¬å†²çªæˆ–éªŒè¯å¤±è´¥</td><td>æŸ¥çœ‹ bulk å“åº”ä¸­çš„ items åˆ—è¡¨ï¼Œé€æ¡æ£€æŸ¥ error å­—æ®µ</td><td>é’ˆå¯¹å¤±è´¥è¡Œå•ç‹¬é‡æ”¾æˆ–ä¿®æ­£æ˜ å°„/æ–‡æ¡£ç»“æ„ï¼›å¤§æ‰¹é‡å¯¼å…¥å‰åœ¨å°æ‰¹æ•°æ®ä¸Šåšé¢„æ¼”</td></tr><tr><td>æ‰¹é‡æ“ä½œæ—¶ ES èŠ‚ç‚¹è´Ÿè½½é£™å‡</td><td>å•æ¬¡ bulk ä½“ç§¯è¿‡å¤§ï¼Œå…¨éƒ¨è¿›å†…å­˜å¯¼è‡´ GC ä¸ IO å‹åŠ›è¿‡é«˜</td><td>ç›‘æ§é›†ç¾¤ JVMã€CPUã€IOï¼Œè§‚å¯Ÿ bulk è¯·æ±‚æ—¶æ®µè´Ÿè½½å˜åŒ–</td><td>æ§åˆ¶æ¯æ¬¡ bulk çš„æ–‡æ¡£æ•°ä¸ä½“ç§¯ï¼ˆå¦‚ 1â€“5 ä¸‡æ–‡æ¡£ã€çº¦ 5â€“15MBï¼‰ï¼ŒæŒ‰æœºå™¨è§„æ ¼è°ƒæ•´å¹¶åšå‹æµ‹å†æ”¾é‡</td></tr></tbody></table>
<h2 data-id="heading-16">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-17">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-18">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-180 Java æ¥å…¥ FastDFSï¼šè‡ªç¼–è¯‘å®¢æˆ·ç«¯ä¸ Maven/Spring Boot å®æˆ˜</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-19">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äº RAGï¼Œæˆ‘çš„å­¦ä¹ è·¯å¾„ä¸è°ƒä¼˜å¿ƒå¾—]]></title>    <link>https://juejin.cn/post/7580282751628394537</link>    <guid>https://juejin.cn/post/7580282751628394537</guid>    <pubDate>2025-12-06T14:07:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580282751628394537" data-draft-id="7580287891273482303" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äº RAGï¼Œæˆ‘çš„å­¦ä¹ è·¯å¾„ä¸è°ƒä¼˜å¿ƒå¾—"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-06T14:07:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯ADIå‘€"/> <meta itemprop="url" content="https://juejin.cn/user/3051900008664382"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äº RAGï¼Œæˆ‘çš„å­¦ä¹ è·¯å¾„ä¸è°ƒä¼˜å¿ƒå¾—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900008664382/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯ADIå‘€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T14:07:42.000Z" title="Sat Dec 06 2025 14:07:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¹´åˆç»™è‡ªå·±å®šäº†ä¸ªå°ç›®æ ‡ï¼šç³»ç»Ÿå­¦ä¸€éå¤§æ¨¡å‹åº”ç”¨å¼€å‘ç›¸å…³çš„ä¸œè¥¿ï¼Œé‡ç‚¹æ”¾åœ¨ MCPã€RAG å’Œ Agent ä¸Šã€‚è¿™ç¯‡æ–‡ç« å°±æ˜¯æˆ‘åœ¨å­¦ä¹  RAG è¿‡ç¨‹ä¸­çš„ä¸€äº›æ•´ç†å’Œæ€è€ƒï¼Œä¹Ÿå½“ä½œå‘å‡ºæ¥å’Œå¤§å®¶ä¸€èµ·äº¤æµã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ RAGï¼Ÿ</h2>
<p>å…ˆæŠ›ä¸ªé—®é¢˜ï¼š
<strong>å¤§æ¨¡å‹è¿™ä¹ˆå¼ºäº†ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ RAG è¿™ç§ç»•ä¸€åœˆçš„æ–¹æ¡ˆï¼Ÿç›´æ¥ä¸¢ç»™ LLM ä¸è¡Œå—ï¼Ÿ</strong></p>
<h3 data-id="heading-1">1. LLM çš„å±€é™æ€§ï¼šå¼ºï¼Œä½†ä¸æ˜¯æ— æ‰€ä¸èƒ½</h3>
<p>ç®€å•æ¥è¯´ï¼ŒLLM åƒä¸€ä¸ªè§å¤šè¯†å¹¿ä½†è®°ä¸ä½ä½ å…¬å¸å…·ä½“ä¸šåŠ¡çš„åŒäº‹ï¼Œä¸»è¦æœ‰å‡ ç±»é™åˆ¶ï¼š</p>
<ul>
<li>
<p><strong>é¢†åŸŸçŸ¥è¯†ç¼ºä¹</strong>
è®­ç»ƒæ•°æ®æ¥æºå¾ˆå¹¿ï¼Œä½†åœ¨åŒ»ç–—ã€æ³•å¾‹ã€é‡‘èã€ç»†åˆ† SaaS ç­‰å‚ç›´é¢†åŸŸï¼Œå¾€å¾€è¦†ç›–ä¸å¤Ÿç»†ï¼Œå›ç­”å®¹æ˜“åœç•™åœ¨æ³›æ³›è€Œè°ˆã€‚</p>
</li>
<li>
<p><strong>å¹»è§‰é—®é¢˜</strong>
ä¹Ÿå°±æ˜¯é‚£ç§ä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ã€‚åœ¨å†™ demoã€å†™ä¸€ç‚¹å°è„šæœ¬æ—¶é—®é¢˜ä¸å¤§ï¼Œä½†ä¸€æ—¦è½åˆ°é£æ§ã€åˆè§„è¿™ç§åœºæ™¯ï¼Œå°±å¾ˆå±é™©äº†ã€‚</p>
</li>
<li>
<p><strong>ä¿¡æ¯è¿‡æ—¶</strong>
æ¨¡å‹çš„çŸ¥è¯†åœåœ¨è®­ç»ƒæ•°æ®çš„æ—¶é—´ç‚¹ã€‚
å¯ä»¥ç†è§£ä¸ºï¼š<strong>å®ƒçš„ä¸–ç•Œè§‚æ˜¯æŸä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§</strong>ï¼Œä¹‹åå‘ç”Ÿçš„æ”¿ç­–è°ƒæ•´ã€ä»·æ ¼å˜åŒ–ã€æŠ€æœ¯æ–¹æ¡ˆæ›´æ–°ï¼Œå®ƒå¤©ç„¶ä¸çŸ¥é“ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®å®‰å…¨</strong>
ä¼ä¸šå†…éƒ¨æ–‡æ¡£ã€ç§æœ‰æ•°æ®åº“ã€ä¸šåŠ¡ç³»ç»Ÿé‡Œçš„æ•°æ®ï¼Œæ²¡æ³•ç›´æ¥æ‹¿å»è®­ç»ƒå…¬æœ‰æ¨¡å‹ã€‚</p>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œå¤§æ¨¡å‹æœ¬èº«æ›´åƒä¸€ä¸ªå¼ºæ¨ç†+å¼ºè¯­è¨€è¡¨è¾¾çš„ç»„ä»¶ï¼Œä¸æ˜¯ä¸€ä¸ªæ°¸è¿œæœ€æ–°ã€æ°¸è¿œæ­£ç¡®çš„çŸ¥è¯†åº“ã€‚</p>
<h3 data-id="heading-2">2. RAG çš„ä»·å€¼ï¼šç»™ LLM è£…ä¸€ä¸ªå¤–æŒ‚è„‘è¢‹</h3>
<p>é‚£ RAG åˆ°åº•è§£å†³äº†ä»€ä¹ˆï¼Ÿ</p>
<p>RAG(Retrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆ)ç®€å•ç†è§£ä¸ºï¼š</p>
<blockquote>
<p><strong>å…ˆä»ä½ çš„çŸ¥è¯†åº“é‡Œç¿»èµ„æ–™ï¼Œå†è®© LLM åŸºäºè¿™äº›èµ„æ–™æ¥å›ç­”é—®é¢˜ã€‚</strong></p>
</blockquote>
<p>å®ƒå¸¦æ¥çš„å‡ ä¸ªç›´æ¥æ”¶ç›Šï¼š</p>
<ul>
<li>
<p><strong>å¼¥è¡¥çŸ¥è¯†çŸ­æ¿</strong>
å¯ä»¥æŠŠä¼ä¸šæ–‡æ¡£ã€ä¸“ä¸šæ‰‹å†Œã€äº§å“çŸ¥è¯†åº“ç­‰ç»Ÿä¸€æ¥åˆ° LLM å‰é¢ï¼Œå˜æˆå®ƒå¯ä»¥å®æ—¶æŸ¥è¯¢çš„å¤–æŒ‚çŸ¥è¯†ã€‚</p>
</li>
<li>
<p><strong>å‡å°‘å¹»è§‰</strong>
æ¨¡å‹ä¸å†å®Œå…¨å‡­å°è±¡å’ŒçŒœæµ‹ä½œç­”ï¼Œè€Œæ˜¯æœ‰æ£€ç´¢åˆ°çš„æ–‡æ¡£åšæ”¯æŒï¼Œå¹»è§‰æ¯”ä¾‹ä¼šæ˜æ˜¾é™ä½ã€‚</p>
</li>
<li>
<p><strong>æ”¯æŒæœ€æ–°ä¿¡æ¯</strong>
çŸ¥è¯†åº“å¯ä»¥éšæ—¶æ›´æ–°(å¢é‡å…¥åº“ã€å®šæœŸåŒæ­¥ç­‰)ï¼Œä¸ç”¨æ¯æ¬¡éƒ½é‡è®­æ¨¡å‹ã€‚</p>
</li>
<li>
<p><strong>é™ä½æˆæœ¬</strong>
ä¸ç”¨æŠŠæ‰€æœ‰å†…å®¹ç¡¬å¡è¿› Promptï¼Œè€Œæ˜¯åªæ£€ç´¢ Top-K ç›¸å…³ç‰‡æ®µé€ç»™æ¨¡å‹ï¼ŒToken èŠ±åœ¨åˆ€åˆƒä¸Šã€‚</p>
</li>
<li>
<p><strong>æ•°æ®å®‰å…¨æ›´å¯æ§</strong>
æ•°æ®ç•™åœ¨è‡ªå·±çš„å‘é‡åº“æˆ–å†…éƒ¨å­˜å‚¨é‡Œï¼Œæ¨¡å‹åªçœ‹åˆ°å¿…è¦ä¸Šä¸‹æ–‡ï¼Œå‡å°‘æ•°æ®è£¸å¥”çš„é£é™©ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">3. RAG vs å¾®è°ƒï¼šæ€ä¹ˆé€‰ï¼Ÿ</h3>
<p>ç»å¸¸æœ‰äººé—®ï¼š<strong>æˆ‘è¦åšçŸ¥è¯†åº“é—®ç­”ï¼Œæ˜¯ç”¨ RAG è¿˜æ˜¯ç›´æ¥å¾®è°ƒï¼Ÿ</strong></p>
<p>å¯ä»¥ç”¨ä¸€å¼ ç®€å•å¯¹æ¯”è¡¨æ¥ç†è§£ï¼š</p>






























<table><thead><tr><th>ç»´åº¦</th><th>RAG</th><th>å¾®è°ƒ(Fine-tuning)</th></tr></thead><tbody><tr><td>çŸ¥è¯†æ›´æ–°</td><td>çµæ´»ï¼Œéšæ”¹éšç”¨</td><td>éœ€è¦é‡æ–°è®­ç»ƒã€éƒ¨ç½²</td></tr><tr><td>æˆæœ¬</td><td>æ£€ç´¢+è°ƒç”¨æˆæœ¬ï¼Œæ•´ä½“å¯æ§</td><td>è®­ç»ƒã€å­˜å‚¨ã€æ¨ç†æˆæœ¬éƒ½åé«˜</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>çŸ¥è¯†åº“é—®ç­”ã€æ–‡æ¡£åŠ©æ‰‹ã€å®æ—¶ä¿¡æ¯æŸ¥è¯¢</td><td>é¢†åŸŸæ¨ç†ã€ç‰¹å®šä»»åŠ¡æ ¼å¼ã€è¡Œä¸ºä¹ æƒ¯è°ƒä¼˜</td></tr><tr><td>æ•°æ®é‡è¦æ±‚</td><td>æ²¡æœ‰ç‰¹åˆ«åˆšæ€§è¦æ±‚</td><td>éœ€è¦å¤§é‡é«˜è´¨é‡æ ·æœ¬</td></tr></tbody></table>
<p><strong>ç®€å•æ¥è¯´ï¼š</strong></p>
<ul>
<li>å¦‚æœä½ è¦åšçš„æ˜¯<strong>åŸºäºæ–‡æ¡£å›ç­”é—®é¢˜</strong>ï¼Œä¼˜å…ˆè€ƒè™‘ RAGï¼›</li>
<li>å¦‚æœä½ è¦å¢å¼ºçš„æ˜¯<strong>æ¨¡å‹çš„è¡Œä¸ºæ¨¡å¼æˆ–æ¨ç†é£æ ¼</strong>(æ¯”å¦‚å·¥å…·è°ƒç”¨ä¹ æƒ¯ã€ç‰¹å®šç»“æ„è¾“å‡º)ï¼Œæ›´é€‚åˆå¾®è°ƒï¼›</li>
<li>å¾ˆå¤šå¤æ‚åœºæ™¯ï¼Œå…¶å®æ˜¯ <strong>RAG + å¾®è°ƒ</strong> ä¸€èµ·ä¸Šï¼š
RAG è´Ÿè´£æ‰¾åˆ°å¯¹çš„èµ„æ–™ï¼Œå¾®è°ƒè´Ÿè´£æ›´èªæ˜åœ°è¯»+æ›´ç¨³å®šåœ°è¾“å‡ºã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">äºŒã€RAG çš„æ ¸å¿ƒæ¦‚å¿µï¼šå‡ ä»¶ç»•ä¸è¿‡å»çš„äº‹</h2>
<p>è¿™éƒ¨åˆ†æˆ‘ä»¬æ¢ä¸ªæ€è·¯ï¼š
<strong>å…ˆé—®é—®é¢˜ï¼Œå†ç»™ä¸€ä¸ªå¯ä»¥ç†è§£ä¸ºçš„è§£é‡Šï¼Œå†è¡¥ä¸€ç‚¹ä¸“ä¸šç»†èŠ‚ã€‚</strong></p>
<h3 data-id="heading-5">1. åµŒå…¥å¼æ¨¡å‹(Embedding Model)ï¼šä¸ºä»€ä¹ˆè¦æŠŠæ–‡æœ¬å˜æˆå‘é‡ï¼Ÿ</h3>
<p>é—®é¢˜ï¼š<strong>ä¸ºä»€ä¹ˆåš RAG ä¸€å®šä¼šæåˆ° Embedding æ¨¡å‹ï¼Ÿ</strong></p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>åµŒå…¥æ¨¡å‹å°±æ˜¯ä¸€ä¸ªæŠŠæ–‡æœ¬æ˜ å°„åˆ°è¯­ä¹‰ç©ºé—´åæ ‡çš„å·¥å…·ã€‚</p>
</blockquote>
<p>ç®€å•æ¥è¯´ï¼š</p>
<ul>
<li>å®ƒæ¥æ”¶ä¸€æ®µæ–‡æœ¬(ç”šè‡³å›¾ç‰‡ã€ä»£ç )</li>
<li>è¾“å‡ºä¸€ä¸²æ•°å­—(å‘é‡)</li>
<li>å‘é‡ä¹‹é—´çš„è·ç¦» = è¯­ä¹‰çš„ç›¸ä¼¼ç¨‹åº¦</li>
</ul>
<p>é€‰æ‹©ä»€ä¹ˆæ ·çš„åµŒå…¥æ¨¡å‹ï¼Œä¼šéå¸¸ç›´æ¥åœ°å½±å“ï¼š</p>
<ul>
<li>å¬å›æ˜¯å¦ç²¾å‡†</li>
<li>æ˜¯å¦èƒ½ç†è§£ä½ çš„ä¸“ä¸šåè¯</li>
<li>å¤šè¯­è¨€åœºæ™¯æ•ˆæœå¥½ä¸å¥½</li>
</ul>
<p>æ‰€ä»¥ï¼Œåœ¨ RAG ç³»ç»Ÿé‡Œï¼Œ<strong>Embedding æ¨¡å‹å‡ ä¹å’Œå¤§æ¨¡å‹æœ¬èº«åŒç­‰é‡è¦</strong>ã€‚</p>
<h3 data-id="heading-6">2. å‘é‡(Vector)ï¼šè¯­ä¹‰åæ ‡</h3>
<p>é—®é¢˜ï¼š<strong>å‘é‡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>ç®€å•æ¥è¯´ï¼š</p>
<blockquote>
<p>å‘é‡å°±æŠŠä¸€å¥è¯å˜æˆäº†ä¸€ä¸²æ•°å­—ï¼Œè¿™ä¸²æ•°å­—æ˜¯å®ƒåœ¨è¯­ä¹‰ç©ºé—´é‡Œçš„åæ ‡ã€‚</p>
</blockquote>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>
<p>è¯­ä¹‰æ¥è¿‘ â‡’ å‘é‡è·ç¦»æ›´è¿‘
æ¯”å¦‚ï¼š</p>
<ul>
<li>è‹¹æœæ‰‹æœº å’Œ iPhone çš„å‘é‡ä¼šå¾ˆè¿‘</li>
<li>è‹¹æœæ‰‹æœº å’Œ æ°´æœè‹¹æœ çš„å‘é‡ä¼šæœ‰è·ç¦»</li>
</ul>
</li>
</ul>
<p>æŠ€æœ¯å®ç°ä¸Šå¯èƒ½æ˜¯å‡ ç™¾ç»´ã€ä¸Šåƒç»´ï¼Œä½†å¯¹æˆ‘ä»¬åšåº”ç”¨å¼€å‘æ¥è¯´ï¼Œ<strong>æŠŠå®ƒå½“æˆè¯­ä¹‰åæ ‡å°±å¤Ÿäº†</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0be386f3e1be43029e39e83637dc7401~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pivQURJ5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765634862&amp;x-signature=tVDEV%2BQr6skeDQG%2BYpqCOshkSfM%3D" alt="vector.png" loading="lazy"/></p>
<h3 data-id="heading-7">3. å‘é‡æ•°æ®åº“(VectorStore)ï¼šä¸ºä»€ä¹ˆéœ€è¦ä¸“é—¨çš„åº“ï¼Ÿ</h3>
<p>é—®é¢˜ï¼š<strong>æˆ‘æœ‰äº†å‘é‡ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ä¸€ä¸ªä¸“é—¨çš„å‘é‡æ•°æ®åº“ï¼Ÿæ™®é€šæ•°æ®åº“ä¸è¡Œå—ï¼Ÿ</strong></p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>å‘é‡æ•°æ®åº“å°±æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨è¯­ä¹‰ç©ºé—´é‡Œåšæœ€è¿‘é‚»æœç´¢çš„æ•°æ®åº“ã€‚</p>
</blockquote>
<p>å¦‚æœä¸ä½¿ç”¨å‘é‡åº“ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿™ä¹ˆåšï¼š</p>
<ul>
<li>æŠŠæ‰€æœ‰æ–‡æ¡£å†…å®¹å¡è¿› Prompt</li>
<li>æˆ–è€…è‡ªå·±ç©·ä¸¾å­—ç¬¦ä¸²åŒ¹é…ã€å…³é”®è¯æœç´¢</li>
</ul>
<p>é—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>å¤§æ¨¡å‹æœ‰ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶ï¼Œå†…å®¹ä¸€å¤šå°±æº¢å‡º</li>
<li>Prompt é‡Œå¡å¤ªå¤šæ— å…³ä¿¡æ¯ï¼Œå¹»è§‰åè€Œæ›´ä¸¥é‡</li>
<li>Token æˆæœ¬ä¹Ÿé¡¶ä¸ä½</li>
</ul>
<p>å‘é‡æ•°æ®åº“ä¸€èˆ¬ä¼šåšå‡ ä»¶äº‹ï¼š</p>
<ol>
<li>é•¿æ–‡æ¡£åˆ†å—(Chunking)ï¼Œæ¯å—ç”Ÿæˆå‘é‡</li>
<li>ä¿å­˜å‘é‡ + åŸæ–‡ + å…ƒæ•°æ®(æ¥æºã€æ—¶é—´ç­‰)</li>
<li>ç”¨æˆ·æé—®æ—¶ï¼ŒæŠŠé—®é¢˜å‘é‡åŒ–</li>
<li>åœ¨å‘é‡ç©ºé—´é‡Œæ‰¾ Top-K æœ€é è¿‘çš„å—è¿”å›</li>
</ol>
<p>è¿™æ ·æˆ‘ä»¬å°±åªéœ€è¦æŠŠè¿™å‡ ä¸ªç›¸å…³ chunk æ”¾è¿› Promptï¼Œå¤§å¤§èŠ‚çœæˆæœ¬ï¼ŒåŒæ—¶ä¿è¯å›ç­”æ›´æœ‰æ ¹æœ‰æ®ã€‚</p>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€RAG æ ‡å‡†æµç¨‹ï¼šä»é—®é¢˜åˆ°ç­”æ¡ˆçš„è·¯å¾„</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4f500d7a6734fd29da45e680dfe0850~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pivQURJ5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765634862&amp;x-signature=Ayx9nciRZnj8TyHTFgwTfD6BZ8w%3D" alt="RAG.png" loading="lazy"/></p>
<p>å¯ä»¥å…ˆæŠŠæ•´ä¸ªæµç¨‹çœ‹æˆä¸€æ¡æµæ°´çº¿ï¼š</p>
<pre><code class="hljs language-text" lang="text">ç”¨æˆ·æé—® â†’ æŸ¥è¯¢å‘é‡åŒ– â†’ å‘é‡æœç´¢ â†’ æ£€ç´¢ Top-K æ–‡æ¡£ â†’ æ„é€  Prompt â†’ LLM ç”Ÿæˆ â†’ è¿”å›ç­”æ¡ˆ
</code></pre>
<p>ä¸€èˆ¬ä¼šåˆ†æˆä¸‰ä¸ªé˜¶æ®µï¼š<strong>ç´¢å¼•(Indexing) â†’ æ£€ç´¢(Retrieval) â†’ ç”Ÿæˆ(Generation)</strong>ã€‚</p>
<h3 data-id="heading-9">1. ç´¢å¼•é˜¶æ®µ(Indexing)ï¼šå…ˆæŠŠèµ„æ–™å˜æˆå¯æ£€ç´¢çš„å½¢æ€</h3>
<p>ç´¢å¼•é˜¶æ®µä¸»è¦åšä¸‰ä»¶äº‹ï¼š</p>
<h4 data-id="heading-10">(1)æ–‡æ¡£è§£æ</h4>
<ul>
<li>æ”¯æŒå¤šç§æ ¼å¼ï¼šPDFã€Wordã€Markdownã€HTMLã€ä»£ç ä»“åº“ç­‰</li>
<li>ç›®æ ‡æ˜¯<strong>æå–å¹²å‡€æ–‡æœ¬</strong>ï¼Œä¸ºåç»­åˆ†å—åšå‡†å¤‡</li>
</ul>
<h4 data-id="heading-11">(2)åˆ†å—(Chunking)</h4>
<p>åˆ†å—å…¶å®æ˜¯ä¸€ä¸ªéå¸¸å…³é”®çš„å†³ç­–ç‚¹ï¼š</p>
<ul>
<li>å—å¤ªå¤§ï¼šå‘é‡è¯­ä¹‰å¤ªæ··ï¼Œæ£€ç´¢å®¹æ˜“ä¸ç²¾ç¡®</li>
<li>å—å¤ªå°ï¼šè¯­ä¹‰è¢«åˆ‡ç¢ï¼Œæ¨¡å‹æ‹¿åˆ°çš„ä¸Šä¸‹æ–‡æ”¯ç¦»ç ´ç¢</li>
</ul>
<p>åé¢æœ‰ä¸€æ•´èŠ‚ä¼šä¸“é—¨å±•å¼€è®²åˆ†å—ç­–ç•¥ã€‚</p>
<h4 data-id="heading-12">(3)å‘é‡åµŒå…¥(Embedding)</h4>
<ul>
<li>æ¯ä¸ªæ–‡æœ¬å—ç”¨åŒä¸€ä¸ªåµŒå…¥æ¨¡å‹ç”Ÿæˆå‘é‡</li>
<li>ä¸€èµ·å†™å…¥å‘é‡æ•°æ®åº“
ä¸€èˆ¬è¿˜ä¼šé™„å¸¦ä¸€äº›å…ƒæ•°æ®(æ–‡æ¡£åã€æ—¶é—´ã€æ¥æºç±»å‹ç­‰)</li>
</ul>
<h3 data-id="heading-13">2. æ£€ç´¢é˜¶æ®µ(Retrieval)ï¼šæŠŠç”¨æˆ·é—®é¢˜æ˜ å°„åˆ°çŸ¥è¯†å—</h3>
<p>æ£€ç´¢é˜¶æ®µä¸²èµ·æ¥å…¶å®å°±æ˜¯ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>æŠŠç”¨æˆ·çš„é—®é¢˜å˜æˆå‘é‡ â†’ å»å‘é‡åº“é‡Œæ‰¾æœ€è¿‘çš„ä¸€äº›å—</strong>ã€‚</p>
</blockquote>
<p>å…·ä½“æ­¥éª¤ï¼š</p>
<ul>
<li>æŸ¥è¯¢å‘é‡åŒ–ï¼š
ç”¨å’Œå…¥åº“æ—¶ç›¸åŒçš„åµŒå…¥æ¨¡å‹ï¼ŒæŠŠç”¨æˆ·é—®é¢˜è½¬æˆå‘é‡</li>
<li>ç›¸ä¼¼åº¦åŒ¹é…(Top-K æ£€ç´¢)ï¼š
å¸¸è§åšæ³•æ˜¯ç”¨ä½™å¼¦ç›¸ä¼¼åº¦ã€ç‚¹ç§¯ç­‰ï¼Œåœ¨å‘é‡åº“é‡Œæ‰¾æœ€ç›¸è¿‘çš„ K ä¸ªæ–‡æœ¬å—</li>
</ul>
<p>è¿™ä¸€æ­¥çš„ç›®æ ‡æ˜¯ï¼š
<strong>ä¿è¯æ‹¿åˆ°çš„æ˜¯å¯¹çš„èµ„æ–™ï¼Œè€Œä¸ä»…ä»…æ˜¯æ‹¿åˆ°äº†èµ„æ–™ã€‚</strong></p>
<h3 data-id="heading-14">3. ç”Ÿæˆé˜¶æ®µ(Generation)ï¼šæŠŠèµ„æ–™è½¬æˆå›ç­”</h3>
<p>è¿™ä¸€æ­¥å°±æ˜¯å¤§å®¶æœ€ç†Ÿæ‚‰çš„ LLM å·¥ä½œæµç¨‹ï¼Œä½†æœ‰ä¸¤ä¸ªç»†èŠ‚å¾ˆé‡è¦ï¼š</p>
<h4 data-id="heading-15">(1)Prompt æ„é€ </h4>
<p>ä¸€ä¸ªæ¯”è¾ƒå¸¸è§ã€ä¹Ÿæ¯”è¾ƒç¨³å¦¥çš„å†™æ³•ï¼š</p>
<pre><code class="hljs language-text" lang="text">System: ä½ æ˜¯ä¸€ä¸ªçŸ¥è¯†åº“åŠ©æ‰‹ï¼Œè¯·æ ¹æ®ä»¥ä¸‹å‚è€ƒèµ„æ–™å›ç­”ç”¨æˆ·é—®é¢˜ã€‚
å¦‚æœå‚è€ƒèµ„æ–™ä¸­æ²¡æœ‰æåˆ°ç›¸å…³ä¿¡æ¯ï¼Œè¯·ç›´æ¥è¯´æ˜åœ¨å½“å‰çŸ¥è¯†åº“ä¸­æœªæ‰¾åˆ°ç›¸å…³ä¿¡æ¯ï¼Œä¸è¦æ ¹æ®å¸¸è¯†æˆ–æƒ³è±¡ç¼–é€ ç­”æ¡ˆã€‚

å‚è€ƒèµ„æ–™ï¼š
{æ£€ç´¢åˆ°çš„æ–‡æ¡£å—1}
{æ£€ç´¢åˆ°çš„æ–‡æ¡£å—2}
...

User: {ç”¨æˆ·åŸå§‹é—®é¢˜}
</code></pre>
<h4 data-id="heading-16">(2)LLM ç”Ÿæˆå›ç­”</h4>
<p>æ¨¡å‹ä¼šåŸºäºï¼š</p>
<ul>
<li>ç”¨æˆ·çš„åŸå§‹é—®é¢˜</li>
<li>æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡</li>
</ul>
<p>ç»¼åˆç”Ÿæˆç­”æ¡ˆã€‚
è¿™ä¸€å±‚çš„æ•ˆæœï¼Œé™¤äº†å’Œæ¨¡å‹æœ¬èº«èƒ½åŠ›æœ‰å…³ï¼Œ<strong>è·Ÿ Prompt è®¾è®¡ä¹Ÿå¼ºç›¸å…³</strong>ï¼Œåé¢æœ‰ä¸“é—¨ä¸€èŠ‚èŠæç¤ºè¯åœ¨ RAG é‡Œçš„ç”¨æ³•ã€‚</p>
<hr/>
<h2 data-id="heading-17">å››ã€åˆ†å—(Chunking)ç­–ç•¥ï¼šRAG çš„ç¬¬ä¸€é“å…³é”®é—¸é—¨</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c957b77366648c48200ffbfb6840e3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pivQURJ5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765634862&amp;x-signature=%2FsyB3Fe7WFEy7BRJY0%2BeoZXJFnw%3D" alt="chunking.png" loading="lazy"/></p>
<p>å¾ˆå¤š RAG é¡¹ç›®æ•ˆæœä¸å¥½ï¼Œå…¶å®å¡åœ¨ç¬¬ä¸€æ­¥â€”â€”<strong>åˆ†å—æ²¡å¤„ç†å¥½</strong>ã€‚</p>
<blockquote>
<p>æ¨èä¸€ä¸ªå¯è§†åŒ–åˆ†å—çš„å°å·¥å…·ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fchunkviz.up.railway.app%2F" target="_blank" title="https://chunkviz.up.railway.app/" ref="nofollow noopener noreferrer">chunkviz.up.railway.app/</a>
å¯ä»¥æ‹–è‡ªå·±çš„æ–‡æ¡£è¿›å»ï¼Œç›´è§‚æ„Ÿå—ä¸åŒç­–ç•¥çš„æ•ˆæœã€‚</p>
</blockquote>
<p>ä¸‹é¢å°±æŒ‰ç…§å¸¸è§å‡ ç§ç­–ç•¥ç®€å•æ‹†ä¸€ä¸‹ã€‚</p>
<h3 data-id="heading-18">1. å›ºå®šå¤§å°åˆ†å—(Fixed Size Chunking)</h3>
<p>é—®é¢˜ï¼š<strong>å¦‚æœæˆ‘ä»€ä¹ˆéƒ½ä¸è°ƒï¼Œç›´æ¥æŒ‰å­—æ•°/Token åˆ‡å¯ä»¥å—ï¼Ÿ</strong></p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>ç”¨ä¸€æŠŠç»Ÿä¸€é•¿åº¦çš„å°ºï¼ŒæŒ‰ 500/1000 å­—è¿™æ ·å¾€ä¸‹åˆ‡ã€‚</p>
</blockquote>





















<table><thead><tr><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>å®ç°ç®€å•ï¼Œå¾ˆå®¹æ˜“ä¸Šæ‰‹</td><td>å®Œå…¨ä¸è€ƒè™‘è¯­ä¹‰è¾¹ç•Œï¼Œå¯èƒ½æŠŠå¥å­åˆ‡æ–­</td></tr><tr><td>åˆ†å—å¤§å°å¯é¢„æœŸï¼Œæ–¹ä¾¿æ§åˆ¶ Token</td><td>æŸäº›å—ä¿¡æ¯å¯†åº¦å¾ˆä½ï¼Œæ˜¾å¾—æµªè´¹</td></tr><tr><td>é€‚åˆæ ¼å¼é«˜åº¦ç»Ÿä¸€çš„æ•°æ®é›†</td><td>å¯¹è¯­ä¹‰ç›¸å…³æ€§æ²¡æœ‰ä¼˜åŒ–</td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
å¿«é€ŸåŸå‹ã€åš baselineã€æ–°é—»/åšå®¢ç­‰ç›¸å¯¹ç»“æ„ç®€å•çš„å†…å®¹ã€‚</p>
<blockquote>
<p>ç®€å•æ¥è¯´ï¼š<strong>å…ˆè·‘èµ·æ¥çš„æ–¹æ¡ˆ</strong>ï¼Œä¸æ˜¯æœ€ä¼˜ï¼Œä½†å®¹æ˜“åšå¯¹ã€‚</p>
</blockquote>
<h3 data-id="heading-19">2. é‡å åˆ†å—(Overlap Chunking)</h3>
<p>é—®é¢˜ï¼š<strong>å¦‚ä½•é™ä½åˆšå¥½åˆ‡åœ¨å…³é”®å¥ä¸­é—´çš„é£é™©ï¼Ÿ</strong></p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>æ¯ä¸ªå—éƒ½è·Ÿä¸Šä¸€ä¸ªå—æœ‰ä¸€éƒ¨åˆ†é‡å ï¼Œç±»ä¼¼æ»‘åŠ¨çª—å£ã€‚</p>
</blockquote>

















<table><thead><tr><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>å…³é”®è¯­ä¹‰åŒæ—¶å‡ºç°åœ¨ç›¸é‚»ä¸¤ä¸ªå—é‡Œï¼Œé™ä½æ–­å¥å¸¦æ¥çš„ä¿¡æ¯ä¸¢å¤±</td><td>å­˜å‚¨é‡å’Œæ£€ç´¢è®¡ç®—æˆæœ¬ä¼šç•¥å¾®ä¸Šå‡</td></tr><tr><td>ä¸Šä¸‹æ–‡è¿è´¯æ€§æ›´å¥½ï¼Œç‰¹åˆ«é€‚åˆé•¿æ®µè§£é‡Šæ€§æ–‡å­—</td><td>å®ç°ç¨å¤æ‚ï¼Œéœ€è¦è°ƒçª—å£å’Œé‡å å¤§å°</td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
åˆåŒã€æ³•å¾‹æ¡æ–‡ã€æŠ€æœ¯æ‰‹å†Œã€è®ºæ–‡ç­‰å¯¹ä¸Šä¸‹æ–‡ä¸€è‡´æ€§è¦æ±‚é«˜çš„å†…å®¹ã€‚</p>
<blockquote>
<p>å¯ä»¥ç†è§£ä¸ºï¼š<strong>å®å¯å¤šå­˜ä¸€ç‚¹ï¼Œä¹Ÿä¸è¦æˆªæ–­å…³é”®ä¿¡æ¯</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-20">3. é€’å½’åˆ†å—(Recursive Chunking)</h3>
<p>é—®é¢˜ï¼š<strong>æœ‰æ²¡æœ‰åŠæ³•æ—¢è€ƒè™‘è¯­ä¹‰ç»“æ„ï¼Œåˆèƒ½æ§åˆ¶å—å¤§å°ï¼Ÿ</strong></p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>å…ˆæŒ‰å¤§ç»“æ„åˆ‡ï¼Œå†åœ¨æ¯ä¸€å—é‡ŒæŒ‰æ›´å°çš„ç»“æ„ç»§ç»­åˆ‡ï¼Œç›´åˆ°æ»¡è¶³é•¿åº¦é™åˆ¶ã€‚</p>
</blockquote>
<p>å…¸å‹åšæ³•ï¼š</p>
<ol>
<li>å…ˆæŒ‰æ®µè½(<code>\n\n</code>)æ‹†</li>
<li>å†æŒ‰å•è¡Œ(<code>\n</code>)ã€å¥å·ã€é€—å·ç­‰è¿›ä¸€æ­¥æ‹†</li>
<li>æ¯ä¸€å±‚éƒ½æ§åˆ¶æœ€å¤§é•¿åº¦</li>
</ol>

















<table><thead><tr><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>èƒ½å¾ˆå¥½åœ°ä¿ç•™åŸæ–‡ç»“æ„ï¼Œæ¯”å¦‚ç« èŠ‚ â†’ æ®µè½ â†’ å¥å­</td><td>å®ç°ä¸Šéœ€è¦é…ç½®è¾ƒå¤šå‚æ•°(åˆ†éš”ç¬¦é¡ºåºã€æœ€å¤§é•¿åº¦ç­‰)</td></tr><tr><td>é€šå¸¸æ¯”çº¯å›ºå®šé•¿åº¦æ›´è´´è¿‘è¯­ä¹‰ç»“æ„</td><td>å¯¹æ ¼å¼è¾ƒæ··ä¹±çš„æ–‡æ¡£ï¼Œæ•ˆæœä¾èµ–åˆ†éš”ç¬¦è´¨é‡</td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
é•¿æŠ¥å‘Šã€ç ”ç©¶æ–‡æ¡£ã€åè®®ç±»æ–‡æœ¬ç­‰ã€‚</p>
<blockquote>
<p>ç®€å•æ¥è¯´ï¼š<strong>å…ˆç²—åç»†ï¼Œé€å±‚æ‹†è§£</strong>ï¼Œæ˜¯å¾ˆå¤šæ¡†æ¶(å¦‚ LangChain)çš„æ¨èé»˜è®¤ç­–ç•¥ã€‚</p>
</blockquote>
<h3 data-id="heading-21">4. æ–‡æ¡£ç‰¹å®šåˆ†å—(Document Specific Chunking)</h3>
<p>é—®é¢˜ï¼š<strong>ä»£ç ã€Markdownã€LaTeX è¿™ç§å¼ºç»“æ„åŒ–å†…å®¹æ€ä¹ˆåˆ‡ï¼Ÿ</strong></p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>åˆ©ç”¨æ–‡æ¡£æœ¬èº«çš„ç»“æ„ä¿¡æ¯å½“ä½œåˆ†éš”ç¬¦ã€‚</p>
</blockquote>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>Markdownï¼šæŒ‰æ ‡é¢˜å±‚çº§ã€åˆ—è¡¨é¡¹æ‹†</li>
<li>Pythonï¼šæŒ‰å‡½æ•°ã€ç±»ã€æ¨¡å—çº§å®šä¹‰åˆ‡</li>
<li>LaTeXï¼šæŒ‰ç« èŠ‚ã€å…¬å¼ã€ç¯å¢ƒåˆ‡</li>
</ul>

















<table><thead><tr><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>éå¸¸è´´åˆåŸå§‹ç»“æ„ï¼Œè¯­ä¹‰å•å…ƒé€šå¸¸å¾ˆå®Œæ•´</td><td>é’ˆå¯¹æ€§å¼ºï¼Œè·¨æ ¼å¼å¤ç”¨æ€§å·®</td></tr><tr><td>å¯¹ä»£ç ã€API æ–‡æ¡£è¿™ç§ç»“æ„åŒ–å†…å®¹æ•ˆæœå¾ˆå¥½</td><td>éœ€è¦ä¸ºä¸åŒæ–‡æ¡£ç±»å‹å†™ä¸åŒé€»è¾‘</td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
ä»£ç ä»“åº“ã€READMEã€API æ–‡æ¡£ã€æŠ€æœ¯åšå®¢ç­‰ã€‚</p>
<blockquote>
<p>å¯ä»¥ç†è§£ä¸ºï¼š<strong>æ ¼å¼å³è¾¹ç•Œ</strong>ï¼Œå°¤å…¶é€‚åˆä»£ç ç±»åœºæ™¯ã€‚</p>
</blockquote>
<h3 data-id="heading-22">5. è¯­ä¹‰åˆ†å—(Semantic Chunking)</h3>
<p>é—®é¢˜ï¼š<strong>èƒ½ä¸èƒ½æ™ºèƒ½åœ°æŒ‰è¯­ä¹‰è¾¹ç•Œåˆ†å—ï¼Ÿ</strong></p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>å€ŸåŠ© NLP å·¥å…·ï¼ŒæŒ‰è¯­ä¹‰è¿è´¯çš„æ®µè½/å¥å­æ¥åˆ‡ï¼Œè€Œä¸æ˜¯ç®€å•çœ‹å­—æ•°ã€‚</p>
</blockquote>
<p>å¸¸ç”¨å·¥å…·ï¼š</p>
<ul>
<li>spaCy</li>
<li>NLTK</li>
<li>ä»¥åŠä¸€äº›ä¸“é—¨åš semantic splitting çš„åº“</li>
</ul>

















<table><thead><tr><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>æ¯ä¸ªå—å†…éƒ¨è¯­ä¹‰é€šå¸¸å¾ˆå®Œæ•´ï¼Œæ£€ç´¢ç›¸å…³æ€§å¾ˆé«˜</td><td>éœ€è¦é¢å¤–è®¡ç®—ï¼Œé¢„å¤„ç†æˆæœ¬æ›´é«˜</td></tr><tr><td>å¯¹ç²¾åº¦è¦æ±‚é«˜çš„é—®ç­”ç³»ç»Ÿæ•ˆæœæ˜æ˜¾</td><td>å®ç°å¤æ‚åº¦é«˜ä¸€äº›</td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
é«˜è¦æ±‚é—®ç­”ç³»ç»Ÿã€éœ€è¦å°½é‡å‡å°‘æ£€ç´¢å‡ºæ¥å´ç”¨ä¸ä¸Šçš„å†—ä½™å—ã€‚</p>
<blockquote>
<p>ç®€å•æ¥è¯´ï¼š<strong>è¯­ä¹‰ä¼˜å…ˆï¼Œæˆæœ¬å…¶æ¬¡</strong> çš„é«˜è´¨é‡ç©æ³•ã€‚</p>
</blockquote>
<h3 data-id="heading-23">6. æ··åˆåˆ†å—(Mix Chunking)</h3>
<p>é—®é¢˜ï¼š<strong>èƒ½ä¸èƒ½æ—¢è¦æ•ˆç‡åˆè¦ç²¾åº¦ï¼Ÿ</strong></p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>æŠŠå‡ ç§ç­–ç•¥æŒ‰å±‚æ¬¡/é˜¶æ®µç»„åˆèµ·æ¥ç”¨ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼š</p>
<ol>
<li>é¦–è½®ï¼šå›ºå®šé•¿åº¦åˆ†å—ï¼Œå¿«é€Ÿå»ºç«‹ä¸€ä¸ªåŸºç¡€å‘é‡åº“</li>
<li>å…³é”®ä¸šåŠ¡æ–‡æ¡£ï¼šå†é¢å¤–åšè¯­ä¹‰åˆ†å—/æ–‡æ¡£ç‰¹å®šåˆ†å—</li>
<li>æ£€ç´¢æ—¶ï¼šé’ˆå¯¹ç‰¹å®šç±»å‹æ–‡æ¡£é€‰ä¸åŒç´¢å¼•</li>
</ol>

















<table><thead><tr><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>å¯ä»¥åœ¨ä¸åŒç±»å‹æ•°æ®ä¸Šç”¨æœ€åˆé€‚çš„ç­–ç•¥</td><td>æ•´ä½“è®¾è®¡å’Œç»´æŠ¤æˆæœ¬æ›´é«˜</td></tr><tr><td>æ›´é€‚åˆçœŸå®å¤æ‚ä¸šåŠ¡åœºæ™¯</td><td>éœ€è¦ç›‘æ§å’Œè°ƒå‚ï¼Œé¿å…ç­–ç•¥æ‰“æ¶</td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
æ•°æ®æ ¼å¼å¤šã€ä¸šåŠ¡å¤æ‚ã€åŒæ—¶è€ƒè™‘ä¸Šçº¿é€Ÿåº¦å’Œæ•ˆæœçš„é¡¹ç›®ã€‚</p>
<blockquote>
<p>å¯ä»¥ç†è§£ä¸ºï¼š<strong>å·¥ç¨‹åŒ–çš„ç°å®è§£</strong>ï¼Œå–é•¿è¡¥çŸ­ã€‚</p>
</blockquote>
<h3 data-id="heading-24">7. å¦‚ä½•é€‰åˆ†å—ç­–ç•¥ï¼Ÿ</h3>
<p>å¯ä»¥å…ˆæŒ‰åœºæ™¯åšä¸€ä¸ªç²—åˆ†ï¼š</p>





























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èç­–ç•¥</th></tr></thead><tbody><tr><td>å¿«é€Ÿ PoC / Demo</td><td>å›ºå®šå¤§å°åˆ†å—</td></tr><tr><td>çŸ¥è¯†åº“ç»“æ„è¾ƒæ¸…æ™°çš„é•¿æ–‡æ¡£</td><td>é€’å½’åˆ†å— + å°‘é‡é‡å </td></tr><tr><td>ä»£ç /Markdown ç­‰ç»“æ„åŒ–å†…å®¹</td><td>æ–‡æ¡£ç‰¹å®šåˆ†å—</td></tr><tr><td>é«˜ç²¾åº¦é—®ç­”ã€å¯¹å¬å›è´¨é‡éå¸¸æ•æ„Ÿ</td><td>è¯­ä¹‰åˆ†å—æˆ–æ··åˆåˆ†å—</td></tr><tr><td>æ•°æ®ç±»å‹æ‚ã€è¿­ä»£æœŸé•¿</td><td>æ··åˆåˆ†å—</td></tr></tbody></table>
<p>ä¸€èˆ¬çš„å®è·µå»ºè®®ï¼š</p>
<blockquote>
<p><strong>ä»é€’å½’åˆ†å—èµ·æ­¥ï¼Œç„¶åæ ¹æ®ä¸šåŠ¡æ•ˆæœå†é€æ­¥ç²¾ç»†åŒ–ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-25">äº”ã€æ£€ç´¢ç­–ç•¥ä¸ä¼˜åŒ–ï¼šä¸ä»…æ˜¯æ‰¾å¾—åˆ°ï¼Œè¿˜è¦æ‰¾å¾—å¥½</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05971fb7729a4fefa0e7be8197da6403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pivQURJ5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765634862&amp;x-signature=%2FQhIamSrj4ZFq8gEEkmcxc0J4Ok%3D" alt="vector search.png" loading="lazy"/></p>
<p>å½“æˆ‘ä»¬è¯´æ£€ç´¢ï¼Œå…¶å®èƒŒåæœ‰ä¸å°‘å¯è°ƒæ§çš„æ–¹æ¡ˆã€‚è¿™é‡ŒæŒ‘å‡ ä¸ªæ ¸å¿ƒç‚¹èŠã€‚</p>
<h3 data-id="heading-26">1. å‘é‡æ£€ç´¢ç±»å‹ï¼šç¨ å¯† / ç¨€ç– / æ··åˆ</h3>
<h4 data-id="heading-27">(1)ç¨ å¯†å‘é‡(Dense Vector)ï¼šè¯­ä¹‰æœç´¢</h4>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>ç”¨åµŒå…¥æ¨¡å‹æŠŠæ–‡æœ¬å˜æˆè¿ç»­å‘é‡ï¼Œå†ç”¨å‘é‡ç›¸ä¼¼åº¦æ‰¾æ„æ€åƒçš„å†…å®¹ã€‚</p>
</blockquote>

















<table><thead><tr><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>èƒ½æ•æ‰ç›¸åŒå«ä¹‰çš„ä¸åŒè¡¨è¿°ï¼Œæ¯”å¦‚ AI ç¼–ç¨‹ vs äººå·¥æ™ºèƒ½ç¨‹åºè®¾è®¡</td><td>å¯¹ç‰¹åˆ«ä¾èµ–å…³é”®è¯ã€å‹å·ã€ä¸“ä¸šç¼©å†™çš„åœºæ™¯ï¼Œè¡¨è¾¾ä¸ä¸€å®šç¨³</td></tr><tr><td>å¯¹æ¨¡ç³ŠæŸ¥è¯¢ã€è‡ªç„¶è¯­è¨€é—®é¢˜è¡¨ç°å¥½</td><td>è°ƒ embedding æ¨¡å‹ã€è°ƒå‚æ•°éœ€è¦ä¸€äº›ç»éªŒ</td></tr></tbody></table>
<h4 data-id="heading-28">(2)ç¨€ç–å‘é‡(Sparse Vector)ï¼šå…³é”®è¯/BM25</h4>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>ç»å…¸æœç´¢å¼•æ“(å¦‚ Elasticsearch)çš„é‚£å¥—ï¼šæ ¹æ®è¯é¢‘ã€é€†æ–‡æ¡£é¢‘ç‡æ‰“åˆ†ã€‚</p>
</blockquote>

















<table><thead><tr><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>å¯¹ç²¾ç¡®å…³é”®è¯ã€äº§å“å‹å·ã€IDã€æœ¯è¯­ç‰¹åˆ«å‹å¥½</td><td>å¯¹è‡ªç„¶è¯­è¨€æé—®ã€è¯´äººè¯çš„é—®é¢˜æ”¯æŒæœ‰é™</td></tr><tr><td>å®ç°æˆç†Ÿï¼Œæ€§èƒ½å’Œå¯è§‚å¯Ÿæ€§éƒ½å¾ˆå¥½</td><td>æ— æ³•è‡ªåŠ¨ç†è§£åŒä¹‰è¯ã€è¿‘ä¹‰è¯</td></tr></tbody></table>
<h4 data-id="heading-29">(3)æ··åˆæœç´¢(Hybrid Search)ï¼šå½“å‰ä¸»æµæ¨è</h4>
<p>å®è·µä¸­ï¼Œ<strong>æœ€ç¨³å¦¥çš„æ–¹æ¡ˆ</strong>å¾€å¾€æ˜¯ï¼š</p>
<ol>
<li>ç¨ å¯† + ç¨€ç–å„è‡ªè·‘ä¸€éæ£€ç´¢</li>
<li>æŠŠç»“æœåˆå¹¶</li>
<li>ç”¨é‡æ’åºæˆ–æ‰“åˆ†èåˆåšä¸€ä¸ªæœ€ç»ˆæ’åº</li>
</ol>
<p>è¿™æ ·å¯ä»¥åŒæ—¶åˆ©ç”¨ï¼š</p>
<ul>
<li>ç¨ å¯†å‘é‡çš„è¯­ä¹‰èƒ½åŠ›</li>
<li>ç¨€ç–å‘é‡çš„å…³é”®è¯ç²¾ç¡®åŒ¹é…èƒ½åŠ›</li>
</ul>
<hr/>
<h2 data-id="heading-30">å…­ã€RAG è°ƒä¼˜å®è·µï¼šä»èƒ½ç”¨åˆ°å¥½ç”¨</h2>
<p>æˆ‘è‡ªå·±åœ¨ä¼˜åŒ– RAG æ—¶ï¼Œä¼šæŠŠè°ƒä¼˜æ‹†æˆä¸‰æ®µï¼š<strong>é¢„å¤„ç† â†’ æ£€ç´¢ â†’ åå¤„ç†</strong>ã€‚</p>
<h3 data-id="heading-31">1. é¢„å¤„ç†ä¼˜åŒ–ï¼šæŠŠè¾“å…¥æå¹²å‡€</h3>
<h4 data-id="heading-32">(1)æ•°æ®æ¸…æ´—</h4>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨å…¥åº“å‰æ´—ä¸ªæ¾¡ï¼š</p>
<ul>
<li>å»æ‰å™ªå£°(å¦‚å¤šä½™é¡µçœ‰é¡µè„šã€æ°´å°)</li>
<li>ç»Ÿä¸€æ ¼å¼(æ ‡ç‚¹ã€ç©ºè¡Œã€ç¼–ç )</li>
<li>æ ‡å‡†åŒ–ä¸€äº›ç‰¹æ®Šç¬¦å·</li>
</ul>
<p>è¿™æ ·åšçš„ç›´æ¥å¥½å¤„ï¼š</p>
<ul>
<li>å‘é‡æ›´å¹²å‡€ï¼Œè¯­ä¹‰æ›´é›†ä¸­</li>
<li>é¿å…æŠŠå¾ˆå¤šåƒåœ¾å†…å®¹å½“æˆçŸ¥è¯†å¡è¿›æ¨¡å‹</li>
</ul>
<h4 data-id="heading-33">(2)åˆ†å—ç­–ç•¥è°ƒä¼˜</h4>
<p>å‰é¢å·²ç»å±•å¼€è®²è¿‡ï¼Œè¿™é‡Œåªè¡¥ä¸€å¥ï¼š</p>
<blockquote>
<p><strong>åˆ†å—ç­–ç•¥æœ¬èº«å°±æ˜¯ä¸€ä¸ªæå…¶é‡è¦çš„è°ƒå‚ç»´åº¦ã€‚</strong></p>
</blockquote>
<p>å¯ä»¥é€šè¿‡ï¼š</p>
<ul>
<li>è°ƒ chunk å¤§å°</li>
<li>è°ƒé‡å æ¯”ä¾‹</li>
<li>é’ˆå¯¹ä¸åŒæ–‡æ¡£ç±»å‹ç”¨ä¸åŒç­–ç•¥</li>
</ul>
<p>æ¥æ…¢æ…¢æ‰¾ä¸€ä¸ªé€‚åˆè‡ªå·±ä¸šåŠ¡çš„å¹³è¡¡ç‚¹ã€‚</p>
<h3 data-id="heading-34">2. æ£€ç´¢ä¼˜åŒ–ï¼šè®©è¯¥æ¥çš„éƒ½æ¥</h3>
<h4 data-id="heading-35">(1)å…ƒæ•°æ®è¿‡æ»¤</h4>
<p>é—®é¢˜ï¼š<strong>åªé å‘é‡ç›¸ä¼¼åº¦å¤Ÿå—ï¼Ÿ</strong></p>
<p>å¾ˆå¤šæ—¶å€™ä¸å¤Ÿï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>åŒä¸€ä¸ªé—®é¢˜ï¼Œä¸åŒå¹´ä»½æ”¿ç­–ç­”æ¡ˆä¸ä¸€æ ·</li>
<li>ä½ åªæƒ³çœ‹æŸä¸ªç³»ç»Ÿ/æŸä¸ªéƒ¨é—¨/æŸä¸ªå›½å®¶çš„æ–‡æ¡£</li>
</ul>
<p>è¿™æ—¶å€™å…ƒæ•°æ®å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ–‡æ¡£æ¥æº</li>
<li>æ—¶é—´</li>
<li>åˆ†ç±»æ ‡ç­¾</li>
<li>ä½œè€…/å›¢é˜Ÿ</li>
</ul>
<p>å¸¸è§ä¸¤ç§ç”¨æ³•ï¼š</p>




















<table><thead><tr><th>ç­–ç•¥</th><th>è¯´æ˜</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>Pre-filtering(é¢„è¿‡æ»¤)</strong></td><td>å…ˆç”¨å…ƒæ•°æ®ç­›å‡ºä¸€ä¸ªå€™é€‰å­é›†ï¼Œå†åšå‘é‡æ£€ç´¢</td><td>æ£€ç´¢é€Ÿåº¦å¿«ï¼Œä½†æœ‰å¯èƒ½æŠŠæœ¬æ¥ç›¸å…³çš„æ–‡æ¡£æå‰æ’é™¤</td></tr><tr><td><strong>Post-filtering(åè¿‡æ»¤)</strong></td><td>å…ˆåšå‘é‡æ£€ç´¢ï¼Œå†åœ¨ Top-K ä¸Šç”¨å…ƒæ•°æ®ç­›é€‰</td><td>å¬å›æ›´å®Œæ•´ï¼Œä½†æ•´ä½“å»¶è¿Ÿå¯èƒ½æ›´é«˜</td></tr></tbody></table>
<p>å¯ä»¥æ ¹æ®ä¸šåŠ¡é€‰æ‹©ï¼šå¾ˆå¤šç³»ç»Ÿæ˜¯ä¸¤ç§ä¼šç»“åˆä½¿ç”¨ã€‚</p>
<h4 data-id="heading-36">(2)æŸ¥è¯¢è½¬æ¢(Query Transformation)</h4>
<p>é—®é¢˜ï¼š<strong>ç”¨æˆ·é—®æ³•å’Œæ–‡æ¡£å†™æ³•ï¼Œå¾€å¾€ä¸ä¸€æ ·æ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>è¿™å°±æ˜¯è®© LLM å¸®å¿™ç¿»è¯‘é—®é¢˜çš„åœºæ™¯ã€‚</p>
<h5 data-id="heading-37">HyDE(Hypothetical Document Embeddings)</h5>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p><strong>è®©æ¨¡å‹å…ˆè„‘è¡¥ä¸€æ®µå¯èƒ½çš„å›ç­”ï¼Œå†ç”¨è¿™æ®µå›ç­”å»åšå‘é‡æ£€ç´¢ã€‚</strong></p>
</blockquote>
<p>æˆ–è€…åƒæ–‡ä¸­é‚£ç§åšæ³•ï¼š
ä¸ºæ¯ä¸ªæ–‡æ¡£å—é¢„å…ˆç”Ÿæˆè¿™ä¸ªæ–‡æ¡£å¯ä»¥å›ç­”å“ªäº›é—®é¢˜ï¼Œå…¥åº“æ—¶æŠŠè¿™äº›é—®é¢˜ä¹ŸåµŒå…¥ã€‚æŸ¥è¯¢æ—¶åšé—®é¢˜-é—®é¢˜çš„åŒ¹é…ï¼Œé€šå¸¸æ•ˆæœæ›´å¥½ã€‚</p>
<h5 data-id="heading-38">å¤šæŸ¥è¯¢æ£€ç´¢(Multi-Query Expansion, MQE)</h5>
<blockquote>
<p>è®©æ¨¡å‹æ ¹æ®ç”¨æˆ·åŸå§‹é—®é¢˜ï¼Œç”Ÿæˆå¤šä¸ªä¸åŒè¡¨è¿°çš„æŸ¥è¯¢ï¼Œä¸€èµ·å»æ£€ç´¢ã€‚</p>
</blockquote>
<p>è¿™æ ·å¯ä»¥è¦†ç›–æ›´å¤šè¯­ä¹‰åŒºåŸŸï¼Œå‡å°‘åˆšå¥½æ²¡ç¢°ä¸Šçš„æƒ…å†µã€‚</p>
<h5 data-id="heading-39">æŸ¥è¯¢æ‰©å±•</h5>
<blockquote>
<p>æŠŠæ ¸å¿ƒå…³é”®è¯çš„åŒä¹‰è¯ã€ç›¸å…³ä¸“ä¸šæœ¯è¯­ã€ä¸Šä¸‹ä½æ¦‚å¿µéƒ½æŒ–å‡ºæ¥ï¼Œç”¨æ¥æ‰©å±•æ£€ç´¢èŒƒå›´ã€‚</p>
</blockquote>
<p>è¿™äº›ç©æ³•æœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨è§£å†³åŒä¸€ä¸ªé—®é¢˜ï¼š
<strong>ç”¨æˆ·æ€ä¹ˆé—® â‰  æ–‡æ¡£æ€ä¹ˆå†™</strong>ã€‚</p>
<h4 data-id="heading-40">(3)è‡ªæŸ¥è¯¢(Self-Query)ï¼šè‡ªåŠ¨æŒ–å‡ºå…ƒæ•°æ®</h4>
<p>æœ‰äº›å…³é”®ä¿¡æ¯å…¶å®åœ¨ç”¨æˆ·é—®é¢˜é‡Œå·²ç»éšå«äº†ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>2023 å¹´ä¹‹åçš„æ”¿ç­–</li>
<li>å…³äº FBA å‘è´§çš„è¦æ±‚</li>
<li>è·¨å¢ƒç”µå•†é‡Œ TikTok çš„ç›¸å…³å†…å®¹</li>
</ul>
<p>å¯ä»¥è®© LLM å¸®ä½ ä»è‡ªç„¶è¯­è¨€é—®é¢˜ä¸­æå–è¿™äº›ç»“æ„åŒ–ä¿¡æ¯ï¼Œæ‹¿å»åšå…ƒæ•°æ®è¿‡æ»¤ã€‚
è¿™æ ·æ£€ç´¢ä¼šæ›´èšç„¦ï¼Œè€Œä¸æ˜¯å®Œå…¨é å‘é‡å»ç›²æ’ã€‚</p>
<h3 data-id="heading-41">3. åå¤„ç†ä¼˜åŒ–ï¼šæŠŠåŸå§‹æ£€ç´¢ç»“æœå˜æˆå¥½ç­”æ¡ˆ</h3>
<h4 data-id="heading-42">(1)æç¤ºå‹ç¼©(Context Compression)</h4>
<p>é—®é¢˜ï¼š<strong>æ£€ç´¢å‡ºæ¥çš„å—å¤ªå¤šï¼ŒPrompt æ”¾ä¸ä¸‹æ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>å…ˆç”¨æ¨¡å‹æˆ–è€…è§„åˆ™ï¼Œåœ¨æ£€ç´¢ç»“æœå†…éƒ¨åšä¸€æ¬¡å†…å®¹ç­›é€‰/æ‘˜è¦ï¼Œåªä¿ç•™å’Œé—®é¢˜æœ€ç›¸å…³çš„éƒ¨åˆ†ã€‚</p>
</blockquote>
<p>å¥½å¤„ï¼š</p>
<ul>
<li>é™ä½ Token æ¶ˆè€—</li>
<li>å‡å°‘æ— å…³å†…å®¹å¯¹å›ç­”çš„å¹²æ‰°</li>
<li>æé«˜å›ç­”çš„èšç„¦åº¦</li>
</ul>
<h4 data-id="heading-43">(2)é‡æ’åº(Reranking)</h4>
<p>å‘é‡æ£€ç´¢å…¶å®æ›´åƒæ˜¯<strong>ç²—æ’</strong>ï¼š</p>
<ul>
<li>é€Ÿåº¦ä¼˜å…ˆ</li>
<li>ä¸ä¿è¯ Top-1 ä¸€å®šæ˜¯æœ€ä½³ç­”æ¡ˆ</li>
</ul>
<p>é‡æ’åºæ¨¡å‹åˆ™æ˜¯<strong>ç²¾æ’</strong>ï¼š</p>
<ul>
<li>é€æ¡ç²¾ç»†åˆ¤æ–­è¿™æ®µå†…å®¹å’Œè¿™ä¸ªé—®é¢˜åˆ°åº•æœ‰å¤šç›¸å…³</li>
</ul>
<p>å¸¸è§é€‰æ‹©ï¼š</p>






























<table><thead><tr><th>æ¨¡å‹</th><th>æè¿°</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Cohere Rerank</td><td>å•†ä¸š APIï¼Œå¼€ç®±å³ç”¨ï¼Œæ•ˆæœä¸é”™</td><td>å•†ä¸šé¡¹ç›®ï¼Œè¿½æ±‚ä¸Šçº¿é€Ÿåº¦</td></tr><tr><td>BGE-Reranker</td><td>å¼€æºï¼Œæ”¯æŒä¸­è‹±åŒè¯­</td><td>ä¸­æ–‡åœºæ™¯ã€ç§æœ‰éƒ¨ç½²</td></tr><tr><td>Cross-Encoder</td><td>åŸºäº BERTï¼Œæ¯æ¬¡å¯¹é—®é¢˜+æ–‡æ¡£ä¸€èµ·ç¼–ç </td><td>ç²¾åº¦ä¼˜å…ˆã€å°è§„æ¨¡æ£€ç´¢</td></tr><tr><td>ColBERT</td><td>åœ¨æ•ˆç‡å’Œç²¾åº¦ä¹‹é—´åšå¹³è¡¡</td><td>å¤§è§„æ¨¡æ£€ç´¢åœºæ™¯</td></tr></tbody></table>
<p>å¦å¤–ä¸€ç§åšæ³•æ˜¯ï¼š</p>
<blockquote>
<p>ç›´æ¥ç”¨å¤§æ¨¡å‹æ¥ç»™æ¯ä¸ªæ–‡æ¡£æ‰“ç›¸å…³æ€§åˆ†ã€‚</p>
</blockquote>

















<table><thead><tr><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th></tr></thead><tbody><tr><td>ä¸ç”¨é¢å¤–éƒ¨ç½²é‡æ’åºæ¨¡å‹</td><td>Token æˆæœ¬å’Œå»¶è¿Ÿéƒ½æ¯”è¾ƒé«˜</td></tr><tr><td>å¯ä»¥çµæ´»å®šä¹‰ç›¸å…³æ€§çš„æ ‡å‡†</td><td>ç»“æœä¼šå— Prompt å’Œæ¨¡å‹çŠ¶æ€å½±å“ï¼Œæ³¢åŠ¨ç•¥å¤§</td></tr></tbody></table>
<p>å®è·µä¸Šï¼Œæˆ‘ä¼šå»ºè®®ï¼š</p>
<ul>
<li>å°è§„æ¨¡ç³»ç»Ÿ / å†…éƒ¨å·¥å…·ï¼šå¯ä»¥å…ˆè¯• LLM é‡æ’åº</li>
<li>çœŸæ­£ä¸Šç”Ÿäº§ï¼šè€ƒè™‘ç”¨ä¸“ä¸šçš„ reranker æ¨¡å‹ï¼Œæ•ˆæœæ›´ç¨³ã€æˆæœ¬å¯æ§</li>
</ul>
<hr/>
<h2 data-id="heading-44">ä¸ƒã€æç¤ºå·¥ç¨‹åœ¨ RAG ä¸­çš„ä½œç”¨</h2>
<p>åœ¨ RAG é‡Œï¼ŒPrompt ä¸æ˜¯æœ€åéšä¾¿å†™ä¸€æ®µï¼Œè€Œæ˜¯<strong>ç³»ç»Ÿæ•ˆæœçš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ä¹‹ä¸€</strong>ã€‚</p>
<p>è¿™é‡Œç”¨ä¸€ä¸ªå…·ä½“åœºæ™¯ï¼š<strong>è·¨å¢ƒç”µå•†é—®ç­”åŠ©æ‰‹</strong>ï¼Œæ¥ä¸²å‡ ä¸ªå¸¸ç”¨æŠ€å·§ã€‚</p>
<h3 data-id="heading-45">1. æç¤ºçš„å››ä¸ªåŸºç¡€å…ƒç´ </h3>
<p>å¯ä»¥ç†è§£ä¸ºï¼Œæ¯ä¸ªæç¤ºè‡³å°‘è¦è¯´æ¸…å››ä»¶äº‹ï¼š</p>






























<table><thead><tr><th>è¦ç´ </th><th>è¯´æ˜</th><th>ç¤ºä¾‹(è·¨å¢ƒç”µå•†)</th></tr></thead><tbody><tr><td>æŒ‡ä»¤(Instruction)</td><td>ä½ è¦å¹²ä»€ä¹ˆ</td><td>ä½ æ˜¯ä¸€ä¸ªäºšé©¬é€Šè¿è¥é¡¾é—®</td></tr><tr><td>ä¸Šä¸‹æ–‡(Context)</td><td>ä½ èƒ½å‚è€ƒçš„èµ„æ–™</td><td>ä»¥ä¸‹æ˜¯ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢åˆ°çš„å¹³å°æ”¿ç­–ç‰‡æ®µ</td></tr><tr><td>è¾“å…¥æ•°æ®(Input)</td><td>ç”¨æˆ·çš„é—®é¢˜æ˜¯ä»€ä¹ˆ</td><td>FBA å‘è´§æœ‰ä»€ä¹ˆè¦æ±‚ï¼Ÿ</td></tr><tr><td>è¾“å‡ºæŒ‡ç¤ºç¬¦(Output Indicator)</td><td>ä½ è¦ä»¥ä»€ä¹ˆå½¢å¼è¾“å‡º</td><td>ç”¨ Markdown åˆ—æ¸…å•ï¼Œåˆ†ç‚¹å›ç­”</td></tr></tbody></table>
<h3 data-id="heading-46">2. ä¸€äº›å®ç”¨çš„å°å¥—è·¯</h3>
<p>è¿™é‡Œå°±å¿«é€Ÿè¿‡ä¸€ä¸‹ï¼Œæ›´å¤šç»†èŠ‚å¯ä»¥æ ¹æ®ä½ è‡ªå·±çš„ä¸šåŠ¡è°ƒæ•´ã€‚</p>
<ul>
<li><strong>å…·ä½“æŒ‡ä»¤</strong>ï¼šå‘Šè¯‰æ¨¡å‹é‡ç‚¹è¯´å•¥ã€ä¸è¯´å•¥</li>
<li><strong>Few-shot ç¤ºä¾‹</strong>ï¼šç”¨ 1-2 ä¸ªä¾‹å­æ•™å®ƒä½ æœŸæœ›çš„å›ç­”é£æ ¼</li>
<li><strong>é»˜è®¤å…œåº•ç­–ç•¥</strong>ï¼š
æ˜ç¡®å†™ä¸Šå¦‚æœçŸ¥è¯†åº“æŸ¥ä¸åˆ°ï¼Œè¯·ç›´æ¥è¯´æŸ¥ä¸åˆ°ï¼Œä¸è¦ççŒœ</li>
<li><strong>è§’è‰²è®¾å®š</strong>ï¼š
æ¯”å¦‚ä½ æ˜¯è·¨å¢ƒè¿è¥é¡¾é—®ï¼Œåªå¯¹äºšé©¬é€Šå¹³å°è´Ÿè´£ï¼Œä¸å›ç­”å…¶ä»–å¹³å°çš„é—®é¢˜ç­‰</li>
<li><strong>å¤šè¯­è¨€æ”¯æŒ</strong>ï¼š
æŒ‡å®šç”¨ç”¨æˆ·æé—®çš„è¯­è¨€å›å¤ï¼Œä¸“ä¸šæœ¯è¯­ä¸­è‹±åŒæ ‡</li>
<li><strong>ç»“æ„åŒ–è¾“å‡º</strong>ï¼š
è¦æ±‚å®ƒç”¨å›ºå®šçš„æ ‡é¢˜/åˆ—è¡¨ç»“æ„è¾“å‡ºï¼Œæ–¹ä¾¿å‰ç«¯æ¸²æŸ“æˆ–åç»­å¤„ç†</li>
</ul>
<p>å¦å¤–ä¸€ä¸ªå¾ˆé‡è¦çš„ç‚¹ï¼š</p>
<blockquote>
<p><strong>æç¤ºè¯æœ¬èº«è¦åšç‰ˆæœ¬ç®¡ç†ã€‚</strong></p>
</blockquote>
<p>å¯ä»¥ç®€å•åšä¸€å¼ è¡¨è®°å½•ï¼š</p>





























<table><thead><tr><th>ç‰ˆæœ¬</th><th>æ—¥æœŸ</th><th>ä¿®æ”¹å†…å®¹</th><th>å¤§è‡´æ•ˆæœ</th></tr></thead><tbody><tr><td>v1.0</td><td>2024-01-01</td><td>åˆå§‹ç‰ˆæœ¬</td><td>ç”¨ä½œ baseline</td></tr><tr><td>v1.1</td><td>2024-01-15</td><td>å¢åŠ è§’è‰²è®¾å®šã€ç¦æ­¢ç¼–é€ </td><td>å›ç­”æ›´ç¨³å®šã€å¹»è§‰å‡å°‘</td></tr><tr><td>v1.2</td><td>2024-02-01</td><td>è¡¥å……å¤šè¯­è¨€å’Œç»“æ„åŒ–è¾“å‡º</td><td>å¯¹æ¥å‰ç«¯æ›´æ–¹ä¾¿</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-47">å…«ã€RAG æ•ˆæœè¯„ä¼°ï¼šæ€ä¹ˆåˆ¤æ–­è¿™å¥—ç³»ç»Ÿåˆ°åº•è¡Œä¸è¡Œ</h2>
<p>æœ€åä¸€ä¸ªå¤§å—ï¼š
<strong>æˆ‘ä»¬å¦‚ä½•çŸ¥é“å½“å‰è¿™å¥— RAG é…ç½®æ˜¯ä¸æ˜¯é è°±çš„ï¼Ÿ</strong></p>
<h3 data-id="heading-48">1. ä¸‰ä¸ªæ ¸å¿ƒæŒ‡æ ‡</h3>
<p>å¯ä»¥ç®€å•è®°æˆä¸‰ä¸ªå­—æ¯ï¼š<strong>CR / AR / F</strong></p>
<ul>
<li>
<p><strong>CR(Context Relevancy)æ£€ç´¢ç›¸å…³æ€§</strong>
æ£€ç´¢å‡ºæ¥çš„å†…å®¹ï¼Œå’Œç”¨æˆ·é—®é¢˜åˆ°åº•æœ‰å¤šç›¸å…³ï¼Ÿ</p>
</li>
<li>
<p><strong>AR(Answer Relevancy)ç­”æ¡ˆç›¸å…³æ€§</strong>
æ¨¡å‹ç»™çš„ç­”æ¡ˆï¼Œæ˜¯å¦çœŸæ­£è§£å†³äº†ç”¨æˆ·çš„æé—®ï¼Ÿ</p>
</li>
<li>
<p><strong>F(Faithfulness)å¯ä¿¡åº¦</strong>
å›ç­”å†…å®¹æ˜¯å¦å¿ äºæ£€ç´¢åˆ°çš„æ–‡æ¡£ï¼Œæœ‰æ²¡æœ‰è‡ªå·±ç¼–æ•…äº‹ï¼Ÿ</p>
</li>
</ul>
<p>RAG æœ€å¤§çš„å–ç‚¹å…¶å®å°±æ˜¯ Fï¼š</p>
<blockquote>
<p>æˆ‘ä¸æ˜¯çº¯é çŒœï¼Œæˆ‘æ˜¯æœ‰æ–‡æ¡£æ”¯æ’‘çš„ã€‚</p>
</blockquote>
<h3 data-id="heading-49">2. å‡ ç§å®æˆ˜è¯„ä¼°æ–¹æ³•</h3>
<h4 data-id="heading-50">(1)äººå·¥æ ‡æ³¨æµ‹è¯•é›†</h4>
<p>è¿™ä¸€æ­¥è™½ç„¶ä¼ ç»Ÿåˆè´¹æ—¶é—´ï¼Œä½†éå¸¸æœ‰ä»·å€¼ï¼š</p>
<ol>
<li>
<p>æ”¶é›†ä¸€æ‰¹çœŸå®ç”¨æˆ·é—®é¢˜(æ¯”å¦‚ 50 ï½ 100 æ¡)</p>
</li>
<li>
<p>ä¸ºæ¯æ¡é—®é¢˜æ ‡æ³¨ï¼š</p>
<ul>
<li>æ ‡å‡†ç­”æ¡ˆ</li>
<li>å¯¹åº”çš„å…³é”®æ–‡æ¡£ç‰‡æ®µ</li>
</ul>
</li>
<li>
<p>è·‘ä½ çš„ RAG ç³»ç»Ÿï¼Œçœ‹ï¼š</p>
<ul>
<li>æ˜¯å¦æ£€ç´¢åˆ°äº†è¿™äº›å…³é”®ç‰‡æ®µ</li>
<li>æ˜¯å¦èƒ½ç”Ÿæˆæ¥è¿‘æ ‡å‡†ç­”æ¡ˆçš„å†…å®¹</li>
</ul>
</li>
</ol>
<p>ä½ èƒ½ä»ä¸­çœ‹åˆ°å¾ˆå¤šé—®é¢˜ï¼š</p>
<ul>
<li>æŸäº›é—®é¢˜æ€»æ˜¯æ£€ç´¢ä¸å‡†</li>
<li>æŸäº›æ–‡æ¡£æ€»æ˜¯è¢«å¿½ç•¥</li>
<li>æŸäº›å›ç­”æ€»æ˜¯é—æ¼å…³é”®ç‚¹</li>
</ul>
<h4 data-id="heading-51">(2)A/B æµ‹è¯•</h4>
<p>å½“ä½ æœ‰å¤šä¸ªç‰ˆæœ¬(æ¯”å¦‚ä¸åŒåˆ†å—ç­–ç•¥ã€ä¸åŒ Top-K è®¾ç½®)æ—¶ï¼š</p>
<ul>
<li>ç”¨åŒä¸€æ‰¹é—®é¢˜åˆ†åˆ«è·‘ A/B ä¸¤å¥—é…ç½®</li>
<li>å¯¹æ¯” CR/AR/Fã€äººå·¥ä¾§æ„Ÿå—ã€ç”¨æˆ·åé¦ˆ</li>
<li>å†å†³å®šä¸Šçº¿å“ªä¸ªç‰ˆæœ¬</li>
</ul>
<h4 data-id="heading-52">(3)LLM-as-Judge(ç”¨å¤§æ¨¡å‹åšè¯„å®¡)</h4>
<p>å¯ä»¥è®©å¦ä¸€ä¸ªæ¨¡å‹æ¥å¸®ä½ æ‰“åˆ†ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>åˆ¤å®šå›ç­”æ˜¯å¦åˆ‡é¢˜</li>
<li>å›ç­”æœ‰æ²¡æœ‰è¿èƒŒæ–‡æ¡£å†…å®¹</li>
<li>æ˜¯å¦å­˜åœ¨æ˜æ˜¾çš„ç¼–é€ </li>
</ul>
<p>è¿™èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸ŠèŠ‚çœäººå·¥è¯„ä¼°çš„æˆæœ¬ã€‚ä¸è¿‡è¦æ³¨æ„ï¼š</p>
<ul>
<li>è¯„å®¡æ¨¡å‹æœ¬èº«ä¹Ÿä¼šæœ‰åå·®</li>
<li>å»ºè®®å’Œäººå·¥è¯„ä¼°ç»“åˆä½¿ç”¨</li>
</ul>
<h4 data-id="heading-53">(4)ç”¨æˆ·åé¦ˆé—­ç¯</h4>
<p>æœ€åä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ¡ï¼š<strong>ç”¨æˆ·ç”¨ç€çˆ½ä¸çˆ½</strong>ã€‚</p>
<p>å¸¸è§åšæ³•ï¼š</p>
<ul>
<li>åœ¨å‰ç«¯åŠ æœ‰ç”¨/æ²¡ç”¨æŒ‰é’®</li>
<li>è®°å½•è¿½é—®(æ¯”å¦‚ä¸ºä»€ä¹ˆè¿™ä¹ˆå›ç­”ã€ä½ æ˜¯ä¸æ˜¯æé”™äº†)</li>
<li>é’ˆå¯¹ bad case åšé›†ä¸­åˆ†æï¼Œåå‘ä¼˜åŒ–åˆ†å—/æ£€ç´¢/Prompt</li>
</ul>
<p>å¯ä»¥é‡ç‚¹å…³æ³¨ï¼š</p>
<ul>
<li>ç”¨æˆ·æ»¡æ„åº¦(thumbs up/down)</li>
<li>è¿½é—®ç‡</li>
<li>éœ€è¦äººå·¥ä»‹å…¥çš„é¢‘ç‡</li>
</ul>
<h3 data-id="heading-54">3. å¸¸è§é—®é¢˜ &amp; ä¼˜åŒ–æ–¹å‘</h3>
<ol>
<li>
<p><strong>æ£€ç´¢ç»“æœä¸ç›¸å…³</strong></p>
<ul>
<li>æ–¹å‘ï¼šè°ƒåˆ†å—ã€æ¢ embeddingã€å¢åŠ å…ƒæ•°æ®è¿‡æ»¤</li>
</ul>
</li>
<li>
<p><strong>æ£€ç´¢å¯¹äº†ï¼Œç­”æ¡ˆå´ç­”åäº†</strong></p>
<ul>
<li>æ–¹å‘ï¼šä¼˜åŒ– Prompt(å¼ºè°ƒåªæ ¹æ®æ–‡æ¡£å›ç­”)ã€å¢åŠ  few-shot</li>
</ul>
</li>
<li>
<p><strong>ç­”æ¡ˆåªå¯¹ä¸€åŠ</strong></p>
<ul>
<li>æ–¹å‘ï¼šè°ƒé«˜ Top-Kã€åšé‡æ’åºã€ä¼˜åŒ–å—ç²’åº¦</li>
</ul>
</li>
<li>
<p><strong>å‡ºç°æ˜æ˜¾å¹»è§‰</strong></p>
<ul>
<li>æ–¹å‘ï¼šåŠ ä¸ŠæŸ¥ä¸åˆ°å°±è¯´æŸ¥ä¸åˆ°çš„å…œåº•ã€æ£€æµ‹ç›¸å…³æ€§ä¸è¶³æ—¶æ‹’ç­”</li>
</ul>
</li>
<li>
<p><strong>æœ¯è¯­å¤„ç†å·®</strong></p>
<ul>
<li>æ–¹å‘ï¼šæœ¯è¯­è¡¨+æŸ¥è¯¢æ‰©å±•ã€è€ƒè™‘é¢†åŸŸä¸“ç”¨ Embedding</li>
</ul>
</li>
<li>
<p><strong>å“åº”å¾ˆæ…¢</strong></p>
<ul>
<li>æ–¹å‘ï¼šä½¿ç”¨æ›´è½»é‡çš„æ¨¡å‹ã€ä¼˜åŒ–ç´¢å¼•ç»“æ„ã€å‡å°‘ä¸å¿…è¦çš„ LLM è°ƒç”¨</li>
</ul>
</li>
<li>
<p><strong>é•¿æ–‡æ¡£æ•ˆæœå·®</strong></p>
<ul>
<li>æ–¹å‘ï¼šå±‚æ¬¡åŒ–ç´¢å¼•(æ‘˜è¦+è¯¦ç»†å—)ã€çˆ¶å­å—ç­–ç•¥</li>
</ul>
</li>
<li>
<p><strong>å¤šè¯­è¨€ä¸ç¨³å®š</strong></p>
<ul>
<li>æ–¹å‘ï¼šå¤šè¯­è¨€ Embeddingã€æŒ‰è¯­è¨€åˆ’åˆ†ç´¢å¼•ã€å¿…è¦æ—¶åšç¿»è¯‘ä¸­è½¬</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-55">å°ç»“ &amp; ä¸€ç‚¹ä¸ªäººæ„Ÿå—</h2>
<p>å¦‚æœç”¨ä¸€å¥è¯æ€»ç»“ RAGï¼š</p>
<blockquote>
<p><strong>RAG æ˜¯è®©å¤§æ¨¡å‹å¸¦ç€ä½ çš„çŸ¥è¯†åº“ä¸€èµ·å·¥ä½œçš„ä¸€å¥—å·¥ç¨‹æ–¹æ¡ˆã€‚</strong></p>
</blockquote>
<p>å®ƒå¹¶ä¸æ˜¯æŸä¸ªå…·ä½“æ¡†æ¶ã€æŸç§å›ºå®šç®—æ³•ï¼Œè€Œæ›´åƒä¸€æ•´æ¡é“¾è·¯ä¸Šçš„ä¸€å †å·¥ç¨‹å†³ç­–ï¼š</p>
<ul>
<li>æ–‡æ¡£æ€ä¹ˆæ¸…æ´—å’Œåˆ†å—</li>
<li>åµŒå…¥æ¨¡å‹æ€ä¹ˆé€‰</li>
<li>æ£€ç´¢æ€ä¹ˆåš(å•å‘é‡/å¤šå‘é‡/æ··åˆ)</li>
<li>Prompt æ€ä¹ˆå†™</li>
<li>æ•ˆæœæ€ä¹ˆè¯„ä¼°å’Œè¿­ä»£</li>
</ul>
<p>æˆ‘ç°åœ¨å¯¹ RAG çš„ç†è§£ä¹Ÿè¿˜åœ¨ä¸æ–­ä¿®æ­£ï¼Œå¾ˆå¤šåœ°æ–¹ä¹Ÿæ˜¯è¾¹åšè¾¹å­¦ã€è¾¹è¸©å‘è¾¹å›å¤´å¤ç›˜ã€‚è¿™ç¯‡æ›´å¤šæ˜¯ä¸€ä¸ªé˜¶æ®µæ€§çš„æ•´ç†ã€‚</p>
<p>å¦‚æœä½ åœ¨å®æˆ˜ä¸­æœ‰æ›´å¥½ç”¨çš„åˆ†å—ç­–ç•¥ã€æ£€ç´¢é…ç½®ã€è¯„ä¼°æ–¹æ³•ï¼Œæˆ–è€…å¯¹æ–‡ä¸­æŸäº›åœ°æ–¹æœ‰ä¸åŒçœ‹æ³•ï¼Œ<strong>éå¸¸æ¬¢è¿ä½ ç•™è¨€/ç§ä¿¡ä¸€èµ·è®¨è®º</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[asyncpg å…¨é¢æ•™ç¨‹ï¼šå¸¸ç”¨ API ä¸²è”ä¸å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7580285196693258240</link>    <guid>https://juejin.cn/post/7580285196693258240</guid>    <pubDate>2025-12-06T15:06:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580285196693258240" data-draft-id="7580295137394982927" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="asyncpg å…¨é¢æ•™ç¨‹ï¼šå¸¸ç”¨ API ä¸²è”ä¸å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,GitHub"/> <meta itemprop="datePublished" content="2025-12-06T15:06:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°jobleap"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147692910"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            asyncpg å…¨é¢æ•™ç¨‹ï¼šå¸¸ç”¨ API ä¸²è”ä¸å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147692910/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°jobleap
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T15:06:53.000Z" title="Sat Dec 06 2025 15:06:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯jobleap.cnçš„å°ä¹ã€‚
asyncpg æ˜¯ Python ç”Ÿæ€ä¸­é«˜æ€§èƒ½çš„å¼‚æ­¥ PostgreSQL å®¢æˆ·ç«¯åº“ï¼ŒåŸç”Ÿæ”¯æŒ <code>async/await</code> è¯­æ³•ï¼Œç›¸æ¯”åŸºäºåŒæ­¥åº“ï¼ˆå¦‚ psycopg2ï¼‰å°è£…çš„å¼‚æ­¥æ–¹æ¡ˆï¼Œæ€§èƒ½æå‡æ˜¾è‘—ï¼Œæ˜¯å¼‚æ­¥ Python é¡¹ç›®æ“ä½œ PostgreSQL çš„é¦–é€‰ã€‚æœ¬æ•™ç¨‹å°†ä»ç¯å¢ƒå‡†å¤‡ã€åŸºç¡€è¿æ¥åˆ°é«˜çº§ç‰¹æ€§ï¼ˆäº‹åŠ¡ã€è¿æ¥æ± ã€æ‰¹é‡æ“ä½œç­‰ï¼‰ï¼Œå…¨é¢ä¸²è” asyncpg æ ¸å¿ƒ APIï¼Œå¹¶é€šè¿‡å®æˆ˜æ¡ˆä¾‹è½åœ°æ‰€æœ‰çŸ¥è¯†ç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-1">1. å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">pip install asyncpg  <span class="hljs-comment"># æ ¸å¿ƒåº“</span>
pip install python-dotenv  <span class="hljs-comment"># å¯é€‰ï¼Œç®¡ç†æ•°æ®åº“é…ç½®ï¼ˆæ¨èï¼‰</span>
</code></pre>
<h3 data-id="heading-2">2. PostgreSQL ç¯å¢ƒå‡†å¤‡</h3>
<p>å…ˆåœ¨ PostgreSQL ä¸­åˆ›å»ºæµ‹è¯•æ•°æ®åº“å’Œè¡¨ï¼ˆå¯é€šè¿‡ <code>psql</code> æˆ– pgAdmin æ‰§è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºæ•°æ®åº“</span>
<span class="hljs-keyword">CREATE</span> DATABASE test_db;

<span class="hljs-comment">-- åˆ‡æ¢åˆ°æµ‹è¯•æ•°æ®åº“</span>
\c test_db;

<span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·è¡¨ï¼ˆåç»­å®æˆ˜ç”¨ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    age <span class="hljs-type">INT</span>,
    profile JSONB,  <span class="hljs-comment">-- PostgreSQL åŸç”Ÿ JSONB ç±»å‹</span>
    created_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);
</code></pre>
<h2 data-id="heading-3">äºŒã€æ ¸å¿ƒ API è¯¦è§£ä¸å®æˆ˜</h2>
<h3 data-id="heading-4">1. åŸºç¡€è¿æ¥ï¼ˆå•ä¸ªè¿æ¥ï¼‰</h3>
<p>asyncpg æœ€åŸºç¡€çš„ç”¨æ³•æ˜¯åˆ›å»ºå•ä¸ªæ•°æ®åº“è¿æ¥ï¼Œæ ¸å¿ƒ API æ˜¯ <code>asyncpg.connect()</code>ã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ä»£ç ï¼š</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> asyncpg
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv  <span class="hljs-comment"># å¯é€‰ï¼Œæ¨èç”¨.envç®¡ç†é…ç½®</span>
<span class="hljs-keyword">import</span> os

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰</span>
load_dotenv()
DB_CONFIG = {
    <span class="hljs-string">"user"</span>: os.getenv(<span class="hljs-string">"DB_USER"</span>, <span class="hljs-string">"postgres"</span>),
    <span class="hljs-string">"password"</span>: os.getenv(<span class="hljs-string">"DB_PASSWORD"</span>, <span class="hljs-string">"123456"</span>),
    <span class="hljs-string">"database"</span>: os.getenv(<span class="hljs-string">"DB_NAME"</span>, <span class="hljs-string">"test_db"</span>),
    <span class="hljs-string">"host"</span>: os.getenv(<span class="hljs-string">"DB_HOST"</span>, <span class="hljs-string">"localhost"</span>),
    <span class="hljs-string">"port"</span>: os.getenv(<span class="hljs-string">"DB_PORT"</span>, <span class="hljs-number">5432</span>),
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">basic_connection</span>():
    <span class="hljs-comment"># 1. å»ºç«‹è¿æ¥</span>
    conn = <span class="hljs-keyword">await</span> asyncpg.connect(**DB_CONFIG)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 2. æ‰§è¡Œç®€å•æŸ¥è¯¢ï¼ˆéªŒè¯è¿æ¥ï¼‰</span>
        version = <span class="hljs-keyword">await</span> conn.fetchval(<span class="hljs-string">"SELECT version();"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"PostgreSQL ç‰ˆæœ¬: <span class="hljs-subst">{version}</span>"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-comment"># 3. å…³é—­è¿æ¥ï¼ˆå¿…é¡»ï¼å¦åˆ™ä¼šæ³„éœ²è¿æ¥ï¼‰</span>
        <span class="hljs-keyword">await</span> conn.close()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(basic_connection())
</code></pre>
<h4 data-id="heading-6">å…³é”® API è¯´æ˜ï¼š</h4>
<ul>
<li><code>asyncpg.connect(**kwargs)</code>ï¼šåˆ›å»ºå•ä¸ªæ•°æ®åº“è¿æ¥ï¼Œè¿”å› <code>Connection</code> å¯¹è±¡ï¼›</li>
<li><code>conn.close()</code>ï¼šå…³é—­è¿æ¥ï¼Œå»ºè®®æ”¾åœ¨ <code>finally</code> å—ä¸­ç¡®ä¿æ‰§è¡Œï¼›</li>
<li><code>conn.fetchval(query)</code>ï¼šæ‰§è¡ŒæŸ¥è¯¢å¹¶è¿”å›<strong>å•ä¸ªå€¼</strong>ï¼ˆç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ï¼‰ï¼Œé€‚åˆ <code>SELECT count(*)</code>, <code>SELECT version()</code> ç­‰åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-7">2. åŸºç¡€ CRUD æ“ä½œ</h3>
<p>asyncpg æä¾›äº†ä¸‰ç±»æ ¸å¿ƒæŸ¥è¯¢ API å¤„ç†ç»“æœï¼Œè¦†ç›–æ‰€æœ‰ CRUD åœºæ™¯ï¼š</p>






























<table><thead><tr><th>API</th><th>ç”¨é€”</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>fetchval(query)</code></td><td>è·å–å•ä¸ªå€¼ï¼ˆç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ï¼‰</td><td>å•ä¸ªå€¼ï¼ˆint/str/Noneç­‰ï¼‰</td></tr><tr><td><code>fetchrow(query)</code></td><td>è·å–å•è¡Œç»“æœ</td><td><code>Record</code> å¯¹è±¡</td></tr><tr><td><code>fetch(query)</code></td><td>è·å–å¤šè¡Œç»“æœ</td><td><code>List[Record]</code> åˆ—è¡¨</td></tr><tr><td><code>execute(query)</code></td><td>æ‰§è¡Œå†™æ“ä½œï¼ˆINSERT/UPDATE/DELETEï¼‰</td><td>å—å½±å“çš„è¡Œæ•°ï¼ˆintï¼‰</td></tr></tbody></table>
<h4 data-id="heading-8">ç¤ºä¾‹ä»£ç ï¼ˆå®Œæ•´ CRUDï¼‰ï¼š</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">crud_operations</span>():
    conn = <span class="hljs-keyword">await</span> asyncpg.connect(**DB_CONFIG)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># ---------------------- 1. æ’å…¥ï¼ˆINSERTï¼‰ ----------------------</span>
        insert_sql = <span class="hljs-string">"""
            INSERT INTO users (username, email, age, profile)
            VALUES ('zhangsan', 'zhangsan@example.com', 25, '{"hobby": "coding"}')
            RETURNING id;  -- è¿”å›æ’å…¥çš„IDï¼ˆPostgreSQL ç‰¹æ€§ï¼‰
        """</span>
        user_id = <span class="hljs-keyword">await</span> conn.fetchval(insert_sql)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ’å…¥ç”¨æˆ·æˆåŠŸï¼ŒID: <span class="hljs-subst">{user_id}</span>"</span>)

        <span class="hljs-comment"># ---------------------- 2. æŸ¥è¯¢ï¼ˆSELECTï¼‰ ----------------------</span>
        <span class="hljs-comment"># å•è¡ŒæŸ¥è¯¢</span>
        single_user = <span class="hljs-keyword">await</span> conn.fetchrow(<span class="hljs-string">"SELECT * FROM users WHERE id = $1"</span>, user_id)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å•è¡Œç”¨æˆ·æ•°æ®: <span class="hljs-subst">{single_user}</span>"</span>)  <span class="hljs-comment"># Record å¯¹è±¡ï¼Œå¯é€šè¿‡é”®è®¿é—®ï¼šsingle_user['username']</span>
        
        <span class="hljs-comment"># å¤šè¡ŒæŸ¥è¯¢</span>
        all_users = <span class="hljs-keyword">await</span> conn.fetch(<span class="hljs-string">"SELECT username, email FROM users WHERE age &gt; $1"</span>, <span class="hljs-number">20</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¤šè¡Œç”¨æˆ·æ•°æ®:"</span>)
        <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> all_users:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”¨æˆ·å: <span class="hljs-subst">{user[<span class="hljs-string">'username'</span>]}</span>, é‚®ç®±: <span class="hljs-subst">{user[<span class="hljs-string">'email'</span>]}</span>"</span>)

        <span class="hljs-comment"># ---------------------- 3. æ›´æ–°ï¼ˆUPDATEï¼‰ ----------------------</span>
        update_sql = <span class="hljs-string">"UPDATE users SET age = $1 WHERE id = $2"</span>
        affected_rows = <span class="hljs-keyword">await</span> conn.execute(update_sql, <span class="hljs-number">26</span>, user_id)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ›´æ–°å—å½±å“è¡Œæ•°: <span class="hljs-subst">{affected_rows}</span>"</span>)  <span class="hljs-comment"># è¿”å›å­—ç¬¦ä¸²å¦‚ "UPDATE 1"ï¼Œå¯è½¬int</span>

        <span class="hljs-comment"># ---------------------- 4. åˆ é™¤ï¼ˆDELETEï¼‰ ----------------------</span>
        delete_sql = <span class="hljs-string">"DELETE FROM users WHERE id = $1"</span>
        affected_rows = <span class="hljs-keyword">await</span> conn.execute(delete_sql, user_id)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ é™¤å—å½±å“è¡Œæ•°: <span class="hljs-subst">{affected_rows}</span>"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-keyword">await</span> conn.close()

asyncio.run(crud_operations())
</code></pre>
<h4 data-id="heading-9">å…³é”®è¯´æ˜ï¼š</h4>
<ul>
<li><strong>å‚æ•°åŒ–æŸ¥è¯¢</strong>ï¼šç¤ºä¾‹ä¸­ç”¨ <code>$1</code>, <code>$2</code> ä½œä¸ºå‚æ•°å ä½ç¬¦ï¼ˆasyncpg æ ‡å‡†ï¼‰ï¼Œè€Œé <code>%s</code>ï¼Œå¯é˜²æ­¢ SQL æ³¨å…¥ï¼›</li>
<li><code>Record</code> å¯¹è±¡ï¼šæŸ¥è¯¢è¿”å›çš„ç»“æœå¯¹è±¡ï¼Œæ”¯æŒå­—å…¸å¼è®¿é—®ï¼ˆ<code>record['key']</code>ï¼‰ã€å±æ€§è®¿é—®ï¼ˆ<code>record.key</code>ï¼‰ï¼Œä¹Ÿå¯é€šè¿‡ <code>dict(record)</code> è½¬æ¢ä¸ºæ™®é€šå­—å…¸ã€‚</li>
</ul>
<h3 data-id="heading-10">3. äº‹åŠ¡å¤„ç†</h3>
<p>PostgreSQL äº‹åŠ¡éµå¾ª ACID åŸåˆ™ï¼Œasyncpg æä¾›ä¸¤ç§äº‹åŠ¡ç”¨æ³•ï¼š<strong>æ‰‹åŠ¨äº‹åŠ¡</strong> å’Œ <strong>ä¸Šä¸‹æ–‡ç®¡ç†å™¨äº‹åŠ¡</strong>ï¼ˆæ¨èï¼‰ã€‚</p>
<h4 data-id="heading-11">ç¤ºä¾‹ 1ï¼šä¸Šä¸‹æ–‡ç®¡ç†å™¨äº‹åŠ¡ï¼ˆç®€æ´å®‰å…¨ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">transaction_context_manager</span>():
    conn = <span class="hljs-keyword">await</span> asyncpg.connect(**DB_CONFIG)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å¼€å¯äº‹åŠ¡ï¼ˆasync with è‡ªåŠ¨å¤„ç† commit/rollbackï¼‰</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> conn.transaction():
            <span class="hljs-comment"># æ‰¹é‡æ’å…¥ä¸¤ä¸ªç”¨æˆ·</span>
            <span class="hljs-keyword">await</span> conn.execute(
                <span class="hljs-string">"INSERT INTO users (username, email) VALUES ($1, $2)"</span>,
                <span class="hljs-string">"lisi"</span>, <span class="hljs-string">"lisi@example.com"</span>
            )
            <span class="hljs-keyword">await</span> conn.execute(
                <span class="hljs-string">"INSERT INTO users (username, email) VALUES ($1, $2)"</span>,
                <span class="hljs-string">"wangwu"</span>, <span class="hljs-string">"wangwu@example.com"</span>
            )
            <span class="hljs-comment"># æ¨¡æ‹Ÿå¼‚å¸¸ï¼ˆå–æ¶ˆæ³¨é‡Šæµ‹è¯•å›æ»šï¼‰</span>
            <span class="hljs-comment"># raise ValueError("æ¨¡æ‹Ÿäº‹åŠ¡å¼‚å¸¸")</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"äº‹åŠ¡æäº¤æˆåŠŸï¼"</span>)
        
        <span class="hljs-comment"># éªŒè¯ç»“æœ</span>
        count = <span class="hljs-keyword">await</span> conn.fetchval(<span class="hljs-string">"SELECT COUNT(*) FROM users"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å½“å‰ç”¨æˆ·æ€»æ•°: <span class="hljs-subst">{count}</span>"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"äº‹åŠ¡å›æ»šï¼ŒåŸå› : <span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-keyword">await</span> conn.close()

asyncio.run(transaction_context_manager())
</code></pre>
<h4 data-id="heading-12">ç¤ºä¾‹ 2ï¼šæ‰‹åŠ¨äº‹åŠ¡ï¼ˆçµæ´»æ§åˆ¶ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">manual_transaction</span>():
    conn = <span class="hljs-keyword">await</span> asyncpg.connect(**DB_CONFIG)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 1. å¼€å¯äº‹åŠ¡</span>
        tx = <span class="hljs-keyword">await</span> conn.transaction()
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">await</span> conn.execute(<span class="hljs-string">"INSERT INTO users (username, email) VALUES ($1, $2)"</span>, <span class="hljs-string">"zhaoliu"</span>, <span class="hljs-string">"zhaoliu@example.com"</span>)
            <span class="hljs-comment"># 2. æäº¤äº‹åŠ¡</span>
            <span class="hljs-keyword">await</span> tx.commit()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰‹åŠ¨äº‹åŠ¡æäº¤æˆåŠŸ"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-comment"># 3. å›æ»šäº‹åŠ¡</span>
            <span class="hljs-keyword">await</span> tx.rollback()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰‹åŠ¨äº‹åŠ¡å›æ»šï¼ŒåŸå› : <span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-keyword">await</span> conn.close()

asyncio.run(manual_transaction())
</code></pre>
<h4 data-id="heading-13">å…³é”® API è¯´æ˜ï¼š</h4>
<ul>
<li><code>conn.transaction()</code>ï¼šåˆ›å»º <code>Transaction</code> å¯¹è±¡ï¼Œå¼€å¯äº‹åŠ¡ï¼›</li>
<li>ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¨¡å¼ï¼š<code>async with</code> å—å†…çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼ˆè‡ªåŠ¨ commitï¼‰ï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼ˆè‡ªåŠ¨ rollbackï¼‰ï¼›</li>
<li>æ‰‹åŠ¨äº‹åŠ¡ï¼šé€šè¿‡ <code>tx.commit()</code> æäº¤ã€<code>tx.rollback()</code> å›æ»šï¼Œé€‚åˆéœ€è¦åˆ†æ­¥æ§åˆ¶çš„åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-14">4. è¿æ¥æ± ï¼ˆç”Ÿäº§ç¯å¢ƒé¦–é€‰ï¼‰</h3>
<p>å•ä¸ªè¿æ¥æ— æ³•åº”å¯¹é«˜å¹¶å‘åœºæ™¯ï¼Œasyncpg æä¾› <code>asyncpg.create_pool()</code> åˆ›å»ºè¿æ¥æ± ï¼Œè‡ªåŠ¨ç®¡ç†è¿æ¥çš„åˆ›å»ºã€å¤ç”¨å’Œé”€æ¯ã€‚</p>
<h4 data-id="heading-15">ç¤ºä¾‹ä»£ç ï¼š</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">pool_operations</span>():
    <span class="hljs-comment"># 1. åˆ›å»ºè¿æ¥æ± ï¼ˆå»ºè®®å…¨å±€å”¯ä¸€ï¼Œå¤ç”¨ï¼‰</span>
    pool = <span class="hljs-keyword">await</span> asyncpg.create_pool(**DB_CONFIG, min_size=<span class="hljs-number">5</span>, max_size=<span class="hljs-number">20</span>)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 2. ä»æ± è·å–è¿æ¥ï¼ˆä¸¤ç§æ–¹å¼ï¼‰</span>
        <span class="hljs-comment"># æ–¹å¼1ï¼šæ‰‹åŠ¨è·å–/é‡Šæ”¾</span>
        conn = <span class="hljs-keyword">await</span> pool.acquire()
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">await</span> conn.execute(<span class="hljs-string">"INSERT INTO users (username, email) VALUES ($1, $2)"</span>, <span class="hljs-string">"pool_test"</span>, <span class="hljs-string">"pool@example.com"</span>)
        <span class="hljs-keyword">finally</span>:
            <span class="hljs-comment"># é‡Šæ”¾è¿æ¥å›æ± ï¼ˆå¿…é¡»ï¼å¦åˆ™æ± ä¼šè€—å°½ï¼‰</span>
            <span class="hljs-keyword">await</span> pool.release(conn)

        <span class="hljs-comment"># æ–¹å¼2ï¼šä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆæ¨èï¼Œè‡ªåŠ¨é‡Šæ”¾ï¼‰</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> pool.acquire() <span class="hljs-keyword">as</span> conn:
            user = <span class="hljs-keyword">await</span> conn.fetchrow(<span class="hljs-string">"SELECT * FROM users WHERE username = $1"</span>, <span class="hljs-string">"pool_test"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿æ¥æ± æŸ¥è¯¢ç»“æœ: <span class="hljs-subst">{user}</span>"</span>)

        <span class="hljs-comment"># 3. æ‰¹é‡æ‰§è¡Œï¼ˆæ± ç›´æ¥æ‰§è¡Œï¼Œæ— éœ€æ‰‹åŠ¨è·å–è¿æ¥ï¼‰</span>
        <span class="hljs-keyword">await</span> pool.execute(<span class="hljs-string">"DELETE FROM users WHERE username = $1"</span>, <span class="hljs-string">"pool_test"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-comment"># 4. å…³é—­è¿æ¥æ± ï¼ˆç¨‹åºé€€å‡ºæ—¶æ‰§è¡Œï¼‰</span>
        <span class="hljs-keyword">await</span> pool.close()

asyncio.run(pool_operations())
</code></pre>
<h4 data-id="heading-16">è¿æ¥æ± æ ¸å¿ƒå‚æ•°ï¼š</h4>
<ul>
<li><code>min_size</code>ï¼šæ± çš„æœ€å°è¿æ¥æ•°ï¼ˆé»˜è®¤ 10ï¼‰ï¼›</li>
<li><code>max_size</code>ï¼šæ± çš„æœ€å¤§è¿æ¥æ•°ï¼ˆé»˜è®¤ 10ï¼‰ï¼›</li>
<li><code>timeout</code>ï¼šè·å–è¿æ¥çš„è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤ 30 ç§’ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-17">ç”Ÿäº§å»ºè®®ï¼š</h4>
<ul>
<li>è¿æ¥æ± åº”å…¨å±€åˆå§‹åŒ–ä¸€æ¬¡ï¼Œè€Œéæ¯æ¬¡è¯·æ±‚åˆ›å»ºï¼›</li>
<li>ä¼˜å…ˆä½¿ç”¨ <code>async with pool.acquire()</code> è¯­æ³•ï¼Œé¿å…å¿˜è®°é‡Šæ”¾è¿æ¥ã€‚</li>
</ul>
<h3 data-id="heading-18">5. é¢„å¤„ç†è¯­å¥ï¼ˆæå‡é‡å¤æŸ¥è¯¢æ€§èƒ½ï¼‰</h3>
<p>å¯¹äºé¢‘ç¹æ‰§è¡Œçš„æŸ¥è¯¢ï¼Œasyncpg æ”¯æŒé¢„å¤„ç†è¯­å¥ï¼ˆPrepared Statementsï¼‰ï¼Œåªéœ€ç¼–è¯‘ä¸€æ¬¡ï¼Œé‡å¤æ‰§è¡Œæ—¶è·³è¿‡è§£æ/ä¼˜åŒ–æ­¥éª¤ï¼Œå¤§å¹…æå‡æ€§èƒ½ã€‚</p>
<h4 data-id="heading-19">ç¤ºä¾‹ä»£ç ï¼š</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">prepared_statements</span>():
    conn = <span class="hljs-keyword">await</span> asyncpg.connect(**DB_CONFIG)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 1. é¢„å¤„ç†è¯­å¥ï¼ˆç¼–è¯‘ä¸€æ¬¡ï¼‰</span>
        stmt = <span class="hljs-keyword">await</span> conn.prepare(<span class="hljs-string">"SELECT * FROM users WHERE age &gt; $1"</span>)
        
        <span class="hljs-comment"># 2. é‡å¤æ‰§è¡Œï¼ˆå¤ç”¨ç¼–è¯‘ç»“æœï¼‰</span>
        <span class="hljs-keyword">for</span> age <span class="hljs-keyword">in</span> [<span class="hljs-number">20</span>, <span class="hljs-number">25</span>, <span class="hljs-number">30</span>]:
            users = <span class="hljs-keyword">await</span> stmt.fetch(age)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹´é¾„å¤§äº <span class="hljs-subst">{age}</span> çš„ç”¨æˆ·: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(users)}</span>"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-keyword">await</span> conn.close()

asyncio.run(prepared_statements())
</code></pre>
<h3 data-id="heading-20">6. æ‰¹é‡æ“ä½œï¼ˆé«˜æ•ˆæ’å…¥/æ›´æ–°ï¼‰</h3>
<h4 data-id="heading-21">6.1 executemanyï¼ˆæ‰¹é‡æ’å…¥ï¼‰</h4>
<p>é€‚åˆä¸­å°æ‰¹é‡æ•°æ®æ’å…¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">batch_insert_executemany</span>():
    conn = <span class="hljs-keyword">await</span> asyncpg.connect(**DB_CONFIG)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># æ‰¹é‡æ•°æ®</span>
        users_data = [
            (<span class="hljs-string">"user1"</span>, <span class="hljs-string">"user1@example.com"</span>, <span class="hljs-number">22</span>),
            (<span class="hljs-string">"user2"</span>, <span class="hljs-string">"user2@example.com"</span>, <span class="hljs-number">23</span>),
            (<span class="hljs-string">"user3"</span>, <span class="hljs-string">"user3@example.com"</span>, <span class="hljs-number">24</span>),
        ]
        <span class="hljs-comment"># æ‰¹é‡æ‰§è¡Œ</span>
        <span class="hljs-keyword">await</span> conn.executemany(
            <span class="hljs-string">"INSERT INTO users (username, email, age) VALUES ($1, $2, $3)"</span>,
            users_data
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¹é‡æ’å…¥ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(users_data)}</span> æ¡æ•°æ®æˆåŠŸ"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-keyword">await</span> conn.close()

asyncio.run(batch_insert_executemany())
</code></pre>
<h4 data-id="heading-22">6.2 copy_records_to_tableï¼ˆè¶…å¤§æ‰¹é‡æ’å…¥ï¼Œæ€§èƒ½æœ€ä¼˜ï¼‰</h4>
<p>é’ˆå¯¹ä¸‡çº§/åä¸‡çº§æ•°æ®æ’å…¥ï¼Œasyncpg æä¾› <code>copy_records_to_table</code>ï¼ŒåŸºäº PostgreSQL çš„ <code>COPY</code> åè®®ï¼Œæ€§èƒ½è¿œè¶… <code>executemany</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">batch_insert_copy</span>():
    conn = <span class="hljs-keyword">await</span> asyncpg.connect(**DB_CONFIG)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># è¶…å¤§æ‰¹é‡æ•°æ®ï¼ˆç¤ºä¾‹1000æ¡ï¼‰</span>
        large_data = [
            (<span class="hljs-string">f"batch_user<span class="hljs-subst">{i}</span>"</span>, <span class="hljs-string">f"batch_user<span class="hljs-subst">{i}</span>@example.com"</span>, <span class="hljs-number">20</span> + i % <span class="hljs-number">10</span>)
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)
        ]
        <span class="hljs-comment"># é«˜æ•ˆæ‰¹é‡æ’å…¥</span>
        <span class="hljs-keyword">await</span> conn.copy_records_to_table(
            <span class="hljs-string">"users"</span>,
            columns=[<span class="hljs-string">"username"</span>, <span class="hljs-string">"email"</span>, <span class="hljs-string">"age"</span>],
            records=large_data
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"COPY æ‰¹é‡æ’å…¥ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(large_data)}</span> æ¡æ•°æ®æˆåŠŸ"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-keyword">await</span> conn.close()

asyncio.run(batch_insert_copy())
</code></pre>
<h3 data-id="heading-23">7. è‡ªå®šä¹‰ç±»å‹å¤„ç†ï¼ˆJSONB ç¤ºä¾‹ï¼‰</h3>
<p>asyncpg åŸç”Ÿæ”¯æŒ PostgreSQL ç‰¹æ®Šç±»å‹ï¼ˆå¦‚ JSONBã€ARRAYã€UUIDï¼‰ï¼Œæ— éœ€é¢å¤–è½¬æ¢ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">jsonb_operations</span>():
    conn = <span class="hljs-keyword">await</span> asyncpg.connect(**DB_CONFIG)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># æ’å…¥ JSONB æ•°æ®ï¼ˆç›´æ¥ä¼  Python å­—å…¸ï¼‰</span>
        profile = {<span class="hljs-string">"hobby"</span>: [<span class="hljs-string">"reading"</span>, <span class="hljs-string">"running"</span>], <span class="hljs-string">"city"</span>: <span class="hljs-string">"Beijing"</span>}
        <span class="hljs-keyword">await</span> conn.execute(
            <span class="hljs-string">"INSERT INTO users (username, email, profile) VALUES ($1, $2, $3)"</span>,
            <span class="hljs-string">"json_user"</span>, <span class="hljs-string">"json@example.com"</span>, profile
        )

        <span class="hljs-comment"># æŸ¥è¯¢ JSONB æ•°æ®ï¼ˆè‡ªåŠ¨è½¬ä¸º Python å­—å…¸ï¼‰</span>
        user = <span class="hljs-keyword">await</span> conn.fetchrow(<span class="hljs-string">"SELECT * FROM users WHERE username = $1"</span>, <span class="hljs-string">"json_user"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"JSONB æ•°æ®: <span class="hljs-subst">{user[<span class="hljs-string">'profile'</span>]}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”¨æˆ·çˆ±å¥½: <span class="hljs-subst">{user[<span class="hljs-string">'profile'</span>][<span class="hljs-string">'hobby'</span>][<span class="hljs-number">0</span>]}</span>"</span>)

        <span class="hljs-comment"># JSONB æ¡ä»¶æŸ¥è¯¢ï¼ˆPostgreSQL åŸç”Ÿè¯­æ³•ï¼‰</span>
        filtered = <span class="hljs-keyword">await</span> conn.fetch(
            <span class="hljs-string">"SELECT username FROM users WHERE profile -&gt;&gt; 'city' = $1"</span>,
            <span class="hljs-string">"Beijing"</span>
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŒ—äº¬ç”¨æˆ·: <span class="hljs-subst">{[u[<span class="hljs-string">'username'</span>] <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> filtered]}</span>"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-keyword">await</span> conn.close()

asyncio.run(jsonb_operations())
</code></pre>
<h3 data-id="heading-24">8. é”™è¯¯å¤„ç†</h3>
<p>asyncpg æŠ›å‡ºçš„å¼‚å¸¸å‡ç»§æ‰¿è‡ª <code>asyncpg.PostgresError</code>ï¼Œå¸¸è§å¼‚å¸¸åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>asyncpg.UniqueViolationError</code>ï¼šå”¯ä¸€é”®å†²çªï¼›</li>
<li><code>asyncpg.ForeignKeyViolationError</code>ï¼šå¤–é”®å†²çªï¼›</li>
<li><code>asyncpg.PostgresSyntaxError</code>ï¼šSQL è¯­æ³•é”™è¯¯ï¼›</li>
<li><code>asyncpg.ConnectionFailureError</code>ï¼šè¿æ¥å¤±è´¥ã€‚</li>
</ul>
<h4 data-id="heading-25">ç¤ºä¾‹ä»£ç ï¼š</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">error_handling</span>():
    conn = <span class="hljs-keyword">await</span> asyncpg.connect(**DB_CONFIG)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># æ•…æ„æ’å…¥é‡å¤ç”¨æˆ·åï¼ˆè§¦å‘å”¯ä¸€é”®å†²çªï¼‰</span>
        <span class="hljs-keyword">await</span> conn.execute(
            <span class="hljs-string">"INSERT INTO users (username, email) VALUES ($1, $2)"</span>,
            <span class="hljs-string">"json_user"</span>, <span class="hljs-string">"duplicate@example.com"</span>
        )
    <span class="hljs-keyword">except</span> asyncpg.UniqueViolationError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å”¯ä¸€é”®å†²çªé”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-keyword">except</span> asyncpg.PostgresError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"PostgreSQL é€šç”¨é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å…¶ä»–é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-keyword">await</span> conn.close()

asyncio.run(error_handling())
</code></pre>
<h2 data-id="heading-26">ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šä¸²è”æ‰€æœ‰ API å®ç°ç”¨æˆ·ç®¡ç†</h2>
<p>ä»¥ä¸‹æ¡ˆä¾‹æ•´åˆè¿æ¥æ± ã€äº‹åŠ¡ã€å‚æ•°åŒ–æŸ¥è¯¢ã€æ‰¹é‡æ“ä½œã€é”™è¯¯å¤„ç†ç­‰æ‰€æœ‰æ ¸å¿ƒ APIï¼Œå®ç°ä¸€ä¸ªå®Œæ•´çš„å¼‚æ­¥ç”¨æˆ·ç®¡ç†åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> asyncpg
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

load_dotenv()
DB_CONFIG = {
    <span class="hljs-string">"user"</span>: os.getenv(<span class="hljs-string">"DB_USER"</span>, <span class="hljs-string">"postgres"</span>),
    <span class="hljs-string">"password"</span>: os.getenv(<span class="hljs-string">"DB_PASSWORD"</span>, <span class="hljs-string">"123456"</span>),
    <span class="hljs-string">"database"</span>: os.getenv(<span class="hljs-string">"DB_NAME"</span>, <span class="hljs-string">"test_db"</span>),
    <span class="hljs-string">"host"</span>: os.getenv(<span class="hljs-string">"DB_HOST"</span>, <span class="hljs-string">"localhost"</span>),
    <span class="hljs-string">"port"</span>: os.getenv(<span class="hljs-string">"DB_PORT"</span>, <span class="hljs-number">5432</span>),
}

<span class="hljs-comment"># å…¨å±€è¿æ¥æ± ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®å•ä¾‹ï¼‰</span>
global_pool = <span class="hljs-literal">None</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">init_pool</span>():
    <span class="hljs-string">"""åˆå§‹åŒ–è¿æ¥æ± """</span>
    <span class="hljs-keyword">global</span> global_pool
    global_pool = <span class="hljs-keyword">await</span> asyncpg.create_pool(**DB_CONFIG, min_size=<span class="hljs-number">5</span>, max_size=<span class="hljs-number">20</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿æ¥æ± åˆå§‹åŒ–æˆåŠŸ"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">close_pool</span>():
    <span class="hljs-string">"""å…³é—­è¿æ¥æ± """</span>
    <span class="hljs-keyword">if</span> global_pool:
        <span class="hljs-keyword">await</span> global_pool.close()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿æ¥æ± å·²å…³é—­"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_user</span>(<span class="hljs-params">username: <span class="hljs-built_in">str</span>, email: <span class="hljs-built_in">str</span>, age: <span class="hljs-built_in">int</span> = <span class="hljs-literal">None</span>, profile: <span class="hljs-built_in">dict</span> = <span class="hljs-literal">None</span></span>):
    <span class="hljs-string">"""åˆ›å»ºå•ä¸ªç”¨æˆ·ï¼ˆå¸¦äº‹åŠ¡å’Œé”™è¯¯å¤„ç†ï¼‰"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> global_pool:
        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"è¿æ¥æ± æœªåˆå§‹åŒ–"</span>)
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> global_pool.acquire() <span class="hljs-keyword">as</span> conn:
            <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> conn.transaction():
                user_id = <span class="hljs-keyword">await</span> conn.fetchval(
                    <span class="hljs-string">"""
                    INSERT INTO users (username, email, age, profile)
                    VALUES ($1, $2, $3, $4)
                    RETURNING id
                    """</span>,
                    username, email, age, profile
                )
                <span class="hljs-keyword">return</span> user_id
    <span class="hljs-keyword">except</span> asyncpg.UniqueViolationError:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ç”¨æˆ·å <span class="hljs-subst">{username}</span> æˆ–é‚®ç®± <span class="hljs-subst">{email}</span> å·²å­˜åœ¨"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">f"åˆ›å»ºç”¨æˆ·å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">batch_create_users</span>(<span class="hljs-params">users_list: <span class="hljs-built_in">list</span></span>):
    <span class="hljs-string">"""æ‰¹é‡åˆ›å»ºç”¨æˆ·ï¼ˆåŸºäº COPY åè®®ï¼‰"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> global_pool:
        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"è¿æ¥æ± æœªåˆå§‹åŒ–"</span>)
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> global_pool.acquire() <span class="hljs-keyword">as</span> conn:
            <span class="hljs-keyword">await</span> conn.copy_records_to_table(
                <span class="hljs-string">"users"</span>,
                columns=[<span class="hljs-string">"username"</span>, <span class="hljs-string">"email"</span>, <span class="hljs-string">"age"</span>, <span class="hljs-string">"profile"</span>],
                records=users_list
            )
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(users_list)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">f"æ‰¹é‡åˆ›å»ºç”¨æˆ·å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_by_id</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">int</span></span>):
    <span class="hljs-string">"""æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> global_pool:
        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"è¿æ¥æ± æœªåˆå§‹åŒ–"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> global_pool.acquire() <span class="hljs-keyword">as</span> conn:
        user = <span class="hljs-keyword">await</span> conn.fetchrow(<span class="hljs-string">"SELECT * FROM users WHERE id = $1"</span>, user_id)
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">dict</span>(user) <span class="hljs-keyword">if</span> user <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">update_user_age</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">int</span>, new_age: <span class="hljs-built_in">int</span></span>):
    <span class="hljs-string">"""æ›´æ–°ç”¨æˆ·å¹´é¾„"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> global_pool:
        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"è¿æ¥æ± æœªåˆå§‹åŒ–"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> global_pool.acquire() <span class="hljs-keyword">as</span> conn:
        affected = <span class="hljs-keyword">await</span> conn.execute(<span class="hljs-string">"UPDATE users SET age = $1 WHERE id = $2"</span>, new_age, user_id)
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(affected.split()[<span class="hljs-number">1</span>])  <span class="hljs-comment"># è½¬æ¢ "UPDATE 1" ä¸º 1</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_user</span>(<span class="hljs-params">user_id: <span class="hljs-built_in">int</span></span>):
    <span class="hljs-string">"""åˆ é™¤ç”¨æˆ·"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> global_pool:
        <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"è¿æ¥æ± æœªåˆå§‹åŒ–"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> global_pool.acquire() <span class="hljs-keyword">as</span> conn:
        affected = <span class="hljs-keyword">await</span> conn.execute(<span class="hljs-string">"DELETE FROM users WHERE id = $1"</span>, user_id)
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(affected.split()[<span class="hljs-number">1</span>])

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°ï¼šä¸²è”æ‰€æœ‰æ“ä½œ"""</span>
    <span class="hljs-comment"># 1. åˆå§‹åŒ–è¿æ¥æ± </span>
    <span class="hljs-keyword">await</span> init_pool()

    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 2. åˆ›å»ºå•ä¸ªç”¨æˆ·</span>
        user_id = <span class="hljs-keyword">await</span> create_user(
            username=<span class="hljs-string">"final_test"</span>,
            email=<span class="hljs-string">"final@example.com"</span>,
            age=<span class="hljs-number">30</span>,
            profile={<span class="hljs-string">"hobby"</span>: <span class="hljs-string">"swimming"</span>, <span class="hljs-string">"city"</span>: <span class="hljs-string">"Shanghai"</span>}
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ›å»ºå•ä¸ªç”¨æˆ·æˆåŠŸï¼ŒID: <span class="hljs-subst">{user_id}</span>"</span>)

        <span class="hljs-comment"># 3. æŸ¥è¯¢ç”¨æˆ·</span>
        user = <span class="hljs-keyword">await</span> get_user_by_id(user_id)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æŸ¥è¯¢ç”¨æˆ·: <span class="hljs-subst">{user}</span>"</span>)

        <span class="hljs-comment"># 4. æ›´æ–°ç”¨æˆ·å¹´é¾„</span>
        update_count = <span class="hljs-keyword">await</span> update_user_age(user_id, <span class="hljs-number">31</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ›´æ–°ç”¨æˆ·å¹´é¾„ï¼Œå—å½±å“è¡Œæ•°: <span class="hljs-subst">{update_count}</span>"</span>)

        <span class="hljs-comment"># 5. æ‰¹é‡åˆ›å»ºç”¨æˆ·</span>
        batch_data = [
            (<span class="hljs-string">"batch_1"</span>, <span class="hljs-string">"batch1@example.com"</span>, <span class="hljs-number">25</span>, {<span class="hljs-string">"city"</span>: <span class="hljs-string">"Guangzhou"</span>}),
            (<span class="hljs-string">"batch_2"</span>, <span class="hljs-string">"batch2@example.com"</span>, <span class="hljs-number">26</span>, {<span class="hljs-string">"city"</span>: <span class="hljs-string">"Shenzhen"</span>}),
        ]
        batch_count = <span class="hljs-keyword">await</span> batch_create_users(batch_data)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¹é‡åˆ›å»º <span class="hljs-subst">{batch_count}</span> ä¸ªç”¨æˆ·æˆåŠŸ"</span>)

        <span class="hljs-comment"># 6. åˆ é™¤ç”¨æˆ·</span>
        delete_count = <span class="hljs-keyword">await</span> delete_user(user_id)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ é™¤ç”¨æˆ·ï¼Œå—å½±å“è¡Œæ•°: <span class="hljs-subst">{delete_count}</span>"</span>)

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ“ä½œå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-comment"># 7. å…³é—­è¿æ¥æ± </span>
        <span class="hljs-keyword">await</span> close_pool()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h2 data-id="heading-27">å››ã€æ€»ç»“ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-28">1. æ ¸å¿ƒ API æ€»ç»“</h3>

































<table><thead><tr><th>åœºæ™¯</th><th>æ ¸å¿ƒ API</th></tr></thead><tbody><tr><td>è¿æ¥ç®¡ç†</td><td><code>asyncpg.connect()</code>, <code>asyncpg.create_pool()</code></td></tr><tr><td>æŸ¥è¯¢ç»“æœ</td><td><code>fetchval()</code>, <code>fetchrow()</code>, <code>fetch()</code></td></tr><tr><td>å†™æ“ä½œ</td><td><code>execute()</code>, <code>executemany()</code></td></tr><tr><td>è¶…å¤§æ‰¹é‡æ’å…¥</td><td><code>copy_records_to_table()</code></td></tr><tr><td>äº‹åŠ¡</td><td><code>conn.transaction()</code>ï¼ˆä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼‰</td></tr><tr><td>é¢„å¤„ç†è¯­å¥</td><td><code>conn.prepare()</code></td></tr></tbody></table>
<h3 data-id="heading-29">2. æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>ç”Ÿäº§ç¯å¢ƒä¼˜å…ˆç”¨è¿æ¥æ± </strong>ï¼šå•ä¸ªè¿æ¥æ— æ³•åº”å¯¹å¹¶å‘ï¼Œè¿æ¥æ± éœ€æ§åˆ¶ <code>max_size</code>ï¼ˆå»ºè®®ä¸è¶…è¿‡ PostgreSQL æœ€å¤§è¿æ¥æ•°çš„ 80%ï¼‰ï¼›</li>
<li><strong>å‚æ•°åŒ–æŸ¥è¯¢å¿…ç”¨</strong>ï¼šé¿å…å­—ç¬¦ä¸²æ‹¼æ¥ SQLï¼Œé˜²æ­¢æ³¨å…¥ï¼Œç»Ÿä¸€ç”¨ <code>$1</code>, <code>$2</code> å ä½ç¬¦ï¼›</li>
<li><strong>äº‹åŠ¡åŒ…è£¹å†™æ“ä½œ</strong>ï¼šINSERT/UPDATE/DELETE å»ºè®®æ”¾åœ¨äº‹åŠ¡ä¸­ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼›</li>
<li><strong>åŠæ—¶é‡Šæ”¾èµ„æº</strong>ï¼šè¿æ¥æ± çš„è¿æ¥éœ€é€šè¿‡ <code>pool.release()</code> æˆ–ä¸Šä¸‹æ–‡ç®¡ç†å™¨é‡Šæ”¾ï¼Œæ± éœ€åœ¨ç¨‹åºé€€å‡ºæ—¶å…³é—­ï¼›</li>
<li><strong>é”™è¯¯å¤„ç†ç²¾ç»†åŒ–</strong>ï¼šé’ˆå¯¹ä¸åŒ PostgreSQL å¼‚å¸¸ï¼ˆå¦‚å”¯ä¸€é”®å†²çªï¼‰åšé’ˆå¯¹æ€§å¤„ç†ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›</li>
<li><strong>è¶…å¤§æ‰¹é‡ç”¨ COPY</strong>ï¼šæ•°æ®é‡ &gt; 1000 æ¡æ—¶ï¼Œä¼˜å…ˆç”¨ <code>copy_records_to_table()</code> è€Œé <code>executemany()</code>ã€‚</li>
</ol>
<p>é€šè¿‡æœ¬æ•™ç¨‹çš„ API è¯¦è§£å’Œå®æˆ˜æ¡ˆä¾‹ï¼Œä½ å·²æŒæ¡ asyncpg æ‰€æœ‰æ ¸å¿ƒç”¨æ³•ï¼Œå¯ç›´æ¥åº”ç”¨äºå¼‚æ­¥ Python é¡¹ç›®ï¼ˆå¦‚ FastAPIã€Sanic ç­‰ï¼‰çš„ PostgreSQL æ“ä½œåœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaåŒ…ï¼ˆPackageï¼‰ï¼šä»£ç çš„"ç»„ç»‡ç®¡ç†å™¨"]]></title>    <link>https://juejin.cn/post/7580287891273138239</link>    <guid>https://juejin.cn/post/7580287891273138239</guid>    <pubDate>2025-12-06T10:28:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580287891273138239" data-draft-id="7580287383787880491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaåŒ…ï¼ˆPackageï¼‰ï¼šä»£ç çš„&quot;ç»„ç»‡ç®¡ç†å™¨&quot;"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-06T10:28:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaåŒ…ï¼ˆPackageï¼‰ï¼šä»£ç çš„"ç»„ç»‡ç®¡ç†å™¨"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T10:28:18.000Z" title="Sat Dec 06 2025 10:28:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>Javaçš„<strong>åŒ…</strong>ï¼ˆ<code>Package</code>ï¼‰å°±æ˜¯ä»£ç ä¸–ç•Œçš„"æ–‡ä»¶å¤¹"ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬æŠŠç›¸å…³çš„ç±»ç»„ç»‡åœ¨ä¸€èµ·ï¼Œè®©ä»£ç ç»“æ„æ¸…æ™°ã€æ˜“äºç®¡ç†</p>
<h2 data-id="heading-0">1.ä¸ºä»€ä¹ˆéœ€è¦åŒ…</h2>
<h3 data-id="heading-1">1.1 é¿å…å‘½åå†²çª</h3>
<p>æ²¡æœ‰åŒ…çš„æƒ…å†µï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// å…¬å¸Açš„ä»£ç </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> { <span class="hljs-comment">/* ... */</span> }

<span class="hljs-comment">// å…¬å¸Bçš„ä»£ç ä¹Ÿç”¨äº†åŒæ ·çš„ç±»å</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> { <span class="hljs-comment">/* ... */</span> } <span class="hljs-comment">// å†²çªï¼æ— æ³•å…±å­˜</span>
</code></pre>
<h3 data-id="heading-2">1.2 æ›´å¥½çš„ç»„ç»‡</h3>
<ul>
<li>æŠŠæ‰€æœ‰ç”¨æˆ·ç›¸å…³çš„ç±»æ”¾åœ¨<code>com.example.user</code>åŒ…</li>
<li>æŠŠæ‰€æœ‰å•†å“ç›¸å…³çš„ç±»æ”¾åœ¨<code>com.example.product</code>åŒ…</li>
<li>æŠŠæ‰€æœ‰è®¢å•ç›¸å…³çš„ç±»æ”¾åœ¨<code>com.example.order</code>åŒ…</li>
</ul>
<h2 data-id="heading-3">2.åŒ…çš„æ¦‚å¿µ</h2>
<p><strong>åŒ…</strong>å°±æ˜¯ä¸€ç»„ç›¸å…³ç±»å’Œæ¥å£çš„é›†åˆã€‚å®ƒå°±åƒï¼š</p>
<ul>
<li>å­¦æ ¡çš„<strong>ç­çº§</strong>ï¼šæŠŠåŒä¸€å­¦ç§‘çš„å­¦ç”Ÿç»„ç»‡åœ¨ä¸€èµ·</li>
<li>å…¬å¸çš„<strong>éƒ¨é—¨</strong>ï¼šæŠŠç›¸åŒèŒèƒ½çš„å‘˜å·¥ç»„ç»‡åœ¨ä¸€èµ·</li>
<li>å›¾ä¹¦é¦†çš„<strong>åˆ†ç±»</strong>ï¼šæŠŠåŒç±»ä¹¦ç±æ”¾åœ¨åŒä¸€ä¹¦æ¶</li>
</ul>
<h2 data-id="heading-4">åŒ…çš„å£°æ˜å’Œå‘½åè§„èŒƒ</h2>
<h3 data-id="heading-5">3.1 å¦‚ä½•å£°æ˜åŒ…</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// åœ¨Javaæ–‡ä»¶çš„ç¬¬ä¸€è¡Œï¼ˆæ³¨é‡Šé™¤å¤–ï¼‰å£°æ˜åŒ…</span>
<span class="hljs-keyword">package</span> com.example.school;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-comment">// ç±»çš„å†…å®¹</span>
}
</code></pre>
<h3 data-id="heading-6">3.2 åŒ…çš„å‘½åè§„èŒƒ</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// 1. ä½¿ç”¨å°å†™å­—æ¯</span>
<span class="hljs-keyword">package</span> com.example.mypackage;  <span class="hljs-comment">// âœ… æ­£ç¡®</span>
<span class="hljs-keyword">package</span> Com.Example.MyPackage;  <span class="hljs-comment">// âŒ é”™è¯¯</span>

<span class="hljs-comment">// 2. ä½¿ç”¨é€†åŸŸåçº¦å®šï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-keyword">package</span> com.google.common;      <span class="hljs-comment">// Googleçš„é€šç”¨åº“</span>
<span class="hljs-keyword">package</span> org.apache.commons;     <span class="hljs-comment">// Apache Commons</span>
<span class="hljs-keyword">package</span> java.util;              <span class="hljs-comment">// Javaæ ‡å‡†åº“</span>

<span class="hljs-comment">// 3. å¤šå±‚åŒ…åç”¨ç‚¹åˆ†éš”</span>
<span class="hljs-keyword">package</span> com.example.project.<span class="hljs-keyword">module</span>.submodule;

<span class="hljs-comment">// 4. åŒ…åè¦æœ‰æ„ä¹‰</span>
<span class="hljs-keyword">package</span> com.shop.user;          <span class="hljs-comment">// ç”¨æˆ·ç›¸å…³</span>
<span class="hljs-keyword">package</span> com.shop.product;       <span class="hljs-comment">// äº§å“ç›¸å…³  </span>
<span class="hljs-keyword">package</span> com.shop.order;         <span class="hljs-comment">// è®¢å•ç›¸å…³</span>
</code></pre>
<h3 data-id="heading-7">3.3 å®é™…ç¤ºä¾‹</h3>
<p>é¡¹ç›®ç»“æ„ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">myproject/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ com/
â”‚   â”‚   â””â”€â”€ example/
â”‚   â”‚       â””â”€â”€ school/
â”‚   â”‚           â”œâ”€â”€ Student.java
â”‚   â”‚           â”œâ”€â”€ Teacher.java
â”‚   â”‚           â””â”€â”€ Course.java
â”‚   â””â”€â”€ Main.java
</code></pre>
<p>Student.java:</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// å£°æ˜åŒ…</span>
<span class="hljs-keyword">package</span> com.example.school;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">introduce</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æˆ‘æ˜¯å­¦ç”Ÿï¼Œæˆ‘å«"</span> + name + <span class="hljs-string">"ï¼Œä»Šå¹´"</span> + age + <span class="hljs-string">"å²"</span>);
    }
}
</code></pre>
<p>Teacher.java:</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">package</span> com.example.school;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Teacher</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String subject;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Teacher</span><span class="hljs-params">(String name, String subject)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.subject = subject;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span> {
        System.out.println(name + <span class="hljs-string">"è€å¸ˆæ­£åœ¨æ•™"</span> + subject);
    }
}
</code></pre>
<h2 data-id="heading-8">4.åŒ…çš„å¯¼å…¥</h2>
<h3 data-id="heading-9">4.1 å¯¼å…¥å•ä¸ªç±»</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// Main.javaï¼ˆä¸åœ¨åŒ…ä¸­ï¼Œæˆ–åœ¨ä¸åŒåŒ…ä¸­ï¼‰</span>
<span class="hljs-keyword">import</span> com.example.school.Student;
<span class="hljs-keyword">import</span> com.example.school.Teacher;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">18</span>);
        <span class="hljs-type">Teacher</span> <span class="hljs-variable">teacher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>(<span class="hljs-string">"æè€å¸ˆ"</span>, <span class="hljs-string">"æ•°å­¦"</span>);
        
        student.introduce();
        teacher.teach();
    }
}
</code></pre>
<h3 data-id="heading-10">4.2 å¯¼å…¥æ•´ä¸ªåŒ…</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// å¯¼å…¥åŒ…ä¸­çš„æ‰€æœ‰ç±»</span>
<span class="hljs-keyword">import</span> com.example.school.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨åŒ…ä¸­çš„æ‰€æœ‰ç±»</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">18</span>);
        <span class="hljs-type">Teacher</span> <span class="hljs-variable">teacher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>(<span class="hljs-string">"æè€å¸ˆ"</span>, <span class="hljs-string">"æ•°å­¦"</span>);
        <span class="hljs-type">Course</span> <span class="hljs-variable">course</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Course</span>(<span class="hljs-string">"Javaç¼–ç¨‹"</span>, <span class="hljs-number">48</span>);
        
        student.introduce();
        teacher.teach();
        course.showInfo();
    }
}
</code></pre>
<h3 data-id="heading-11">4.3 é™æ€å¯¼å…¥</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.PI;      <span class="hljs-comment">// å¯¼å…¥é™æ€å¸¸é‡</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Math.pow;     <span class="hljs-comment">// å¯¼å…¥é™æ€æ–¹æ³•</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.System.out;   <span class="hljs-comment">// å¯¼å…¥é™æ€æˆå‘˜</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticImportDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ä¸ç”¨å†™ Math.PIï¼Œç›´æ¥ä½¿ç”¨ PI</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">radius</span> <span class="hljs-operator">=</span> <span class="hljs-number">5.0</span>;
        <span class="hljs-type">double</span> <span class="hljs-variable">area</span> <span class="hljs-operator">=</span> PI * pow(radius, <span class="hljs-number">2</span>);
        
        <span class="hljs-comment">// ä¸ç”¨å†™ System.outï¼Œç›´æ¥ä½¿ç”¨ out</span>
        out.println(<span class="hljs-string">"åœ†çš„é¢ç§¯: "</span> + area);
        out.println(<span class="hljs-string">"æœ€å¤§å€¼: "</span> + Math.max(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>));  <span class="hljs-comment">// ä¹Ÿå¯ä»¥æ··ç”¨</span>
    }
}
</code></pre>
<h3 data-id="heading-12">4.4 ä¸éœ€è¦å¯¼å…¥çš„æƒ…å†µ</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NoImportNeeded</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. åŒåŒ…ä¸­çš„ç±»ä¸éœ€è¦å¯¼å…¥</span>
        <span class="hljs-comment">// å¦‚æœè¿™ä¸ªç±»å’ŒStudentåœ¨åŒä¸€ä¸ªåŒ…ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</span>
        
        <span class="hljs-comment">// 2. java.langåŒ…ä¸­çš„ç±»è‡ªåŠ¨å¯¼å…¥</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"Hello"</span>);  <span class="hljs-comment">// java.lang.String</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;                  <span class="hljs-comment">// java.lang.Integer</span>
        System.out.println(<span class="hljs-string">"è‡ªåŠ¨å¯¼å…¥"</span>);      <span class="hljs-comment">// java.lang.System</span>
        
        <span class="hljs-comment">// 3. ä½¿ç”¨å®Œå…¨é™å®šåï¼ˆä¸æ¨èï¼Œä»£ç å†—é•¿ï¼‰</span>
        java.util.ArrayList&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.ArrayList&lt;&gt;();
        java.util.<span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.Date();
        
        <span class="hljs-comment">// 4. å¤„ç†åŒåå†²çª</span>
        java.sql.<span class="hljs-type">Date</span> <span class="hljs-variable">sqlDate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.sql.Date(<span class="hljs-number">0</span>);
        java.util.<span class="hljs-type">Date</span> <span class="hljs-variable">utilDate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.Date();
    }
}
</code></pre>
<h2 data-id="heading-13">5.åŒ…ä¸ç›®å½•ç»“æ„</h2>
<h3 data-id="heading-14">5.1 å¿…é¡»åŒ¹é…çš„ç›®å½•ç»“æ„</h3>
<p><strong>è§„åˆ™</strong>ï¼šåŒ…åå¿…é¡»ä¸ç›®å½•ç»“æ„å®Œå…¨ä¸€è‡´ï¼</p>
<pre><code class="hljs language-Java" lang="Java">é¡¹ç›®ç»“æ„ï¼š
src/
â”œâ”€â”€ com/
â”‚   â””â”€â”€ example/
â”‚       â””â”€â”€ school/
â”‚           â”œâ”€â”€ Student.java   (<span class="hljs-keyword">package</span> com.example.school;)
â”‚           â””â”€â”€ Teacher.java   (<span class="hljs-keyword">package</span> com.example.school;)
â””â”€â”€ Main.java                  (æ²¡æœ‰åŒ…å£°æ˜ï¼Œæˆ–ä¸åŒåŒ…)
</code></pre>
<p><strong>ç¼–è¯‘å’Œè¿è¡Œï¼š</strong></p>
<pre><code class="hljs language-Java" lang="Java"># ç¼–è¯‘ï¼ˆåœ¨srcç›®å½•ä¸‹ï¼‰
javac com/example/school/Student.java
javac com/example/school/Teacher.java
javac Main.java

# è¿è¡Œ
java Main
</code></pre>
<h3 data-id="heading-15">5.2 ä½¿ç”¨IDEçš„é¡¹ç›®ç»“æ„</h3>
<p>ç°ä»£IDEï¼ˆå¦‚IntelliJ IDEAã€Eclipseï¼‰ä¼šè‡ªåŠ¨ç®¡ç†åŒ…ç»“æ„ï¼š</p>
<pre><code class="hljs language-Java" lang="Java">myproject/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â””â”€â”€ java/
â”‚           â”œâ”€â”€ com/
â”‚           â”‚   â””â”€â”€ example/
â”‚           â”‚       â”œâ”€â”€ school/
â”‚           â”‚       â”‚   â”œâ”€â”€ Student.java
â”‚           â”‚       â”‚   â””â”€â”€ Teacher.java
â”‚           â”‚       â””â”€â”€ utils/
â”‚           â”‚           â””â”€â”€ StringUtil.java
â”‚           â””â”€â”€ Main.java
â””â”€â”€ pom.xml æˆ– build.gradle
</code></pre>
<h2 data-id="heading-16">6.è®¿é—®æƒé™æ§åˆ¶</h2>
<h3 data-id="heading-17">6.1 Javaçš„å››ç§è®¿é—®ä¿®é¥°ç¬¦</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">package</span> com.example.school;

<span class="hljs-comment">// å…¬å…±ç±»ï¼šæ‰€æœ‰åŒ…éƒ½å¯ä»¥è®¿é—®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-comment">// å…¬å…±å­—æ®µï¼šæ‰€æœ‰åŒ…éƒ½å¯ä»¥è®¿é—®</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-variable">publicField</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å…¬å…±å­—æ®µ"</span>;
    
    <span class="hljs-comment">// å—ä¿æŠ¤å­—æ®µï¼šåŒåŒ…æˆ–å­ç±»å¯ä»¥è®¿é—®</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">String</span> <span class="hljs-variable">protectedField</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å—ä¿æŠ¤å­—æ®µ"</span>;
    
    <span class="hljs-comment">// é»˜è®¤å­—æ®µï¼ˆåŒ…ç§æœ‰ï¼‰ï¼šåªæœ‰åŒåŒ…å¯ä»¥è®¿é—®</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">defaultField</span> <span class="hljs-operator">=</span> <span class="hljs-string">"é»˜è®¤å­—æ®µ"</span>;
    
    <span class="hljs-comment">// ç§æœ‰å­—æ®µï¼šåªæœ‰æœ¬ç±»å¯ä»¥è®¿é—®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">privateField</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ç§æœ‰å­—æ®µ"</span>;
    
    <span class="hljs-comment">// å…¬å…±æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publicMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"å…¬å…±æ–¹æ³•"</span>);
        <span class="hljs-comment">// å¯ä»¥è®¿é—®æ‰€æœ‰å­—æ®µ</span>
        System.out.println(privateField);
    }
    
    <span class="hljs-comment">// å—ä¿æŠ¤æ–¹æ³•</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">protectedMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"å—ä¿æŠ¤æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// é»˜è®¤æ–¹æ³•</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">defaultMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"é»˜è®¤æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// ç§æœ‰æ–¹æ³•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">privateMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ç§æœ‰æ–¹æ³•"</span>);
    }
}
</code></pre>
<h3 data-id="heading-18">6.2 è®¿é—®æƒé™æ€»ç»“è¡¨</h3>








































<table><thead><tr><th>ä¿®é¥°ç¬¦</th><th>åŒç±»</th><th>åŒåŒ…</th><th>å­ç±»</th><th>ä¸åŒåŒ…</th></tr></thead><tbody><tr><td><code>public</code></td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td><code>protected</code></td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ—</td></tr><tr><td>é»˜è®¤ï¼ˆæ— ï¼‰</td><td>âœ“</td><td>âœ“</td><td>âœ—</td><td>âœ—</td></tr><tr><td><code>private</code></td><td>âœ“</td><td>âœ—</td><td>âœ—</td><td>âœ—</td></tr></tbody></table>
<h3 data-id="heading-19">6.3 å®é™…åº”ç”¨ç¤ºä¾‹</h3>
<p>åŒåŒ…è®¿é—®ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// åœ¨ com.example.school åŒ…ä¸­</span>
<span class="hljs-keyword">package</span> com.example.school;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Course</span> {
    <span class="hljs-comment">// å¯ä»¥è®¿é—®åŒåŒ…çš„Studentçš„æ‰€æœ‰éç§æœ‰æˆå‘˜</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAccess</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"æµ‹è¯•"</span>, <span class="hljs-number">20</span>);
        
        System.out.println(student.publicField);      <span class="hljs-comment">// âœ“ å¯ä»¥</span>
        System.out.println(student.protectedField);   <span class="hljs-comment">// âœ“ å¯ä»¥ï¼ˆåŒåŒ…ï¼‰</span>
        System.out.println(student.defaultField);     <span class="hljs-comment">// âœ“ å¯ä»¥ï¼ˆåŒåŒ…ï¼‰</span>
        <span class="hljs-comment">// System.out.println(student.privateField);  // âœ— é”™è¯¯ï¼šç§æœ‰</span>
        
        student.publicMethod();      <span class="hljs-comment">// âœ“ å¯ä»¥</span>
        student.protectedMethod();   <span class="hljs-comment">// âœ“ å¯ä»¥ï¼ˆåŒåŒ…ï¼‰</span>
        student.defaultMethod();     <span class="hljs-comment">// âœ“ å¯ä»¥ï¼ˆåŒåŒ…ï¼‰</span>
        <span class="hljs-comment">// student.privateMethod();  // âœ— é”™è¯¯ï¼šç§æœ‰</span>
    }
}
</code></pre>
<p>ä¸åŒåŒ…è®¿é—®ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// åœ¨ä¸åŒåŒ…ä¸­</span>
<span class="hljs-keyword">package</span> com.example.test;

<span class="hljs-keyword">import</span> com.example.school.Student;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAccess</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"æµ‹è¯•"</span>, <span class="hljs-number">20</span>);
        
        System.out.println(student.publicField);      <span class="hljs-comment">// âœ“ å¯ä»¥</span>
        <span class="hljs-comment">// System.out.println(student.protectedField); // âœ— é”™è¯¯ï¼šä¸åŒåŒ…ä¸”éå­ç±»</span>
        <span class="hljs-comment">// System.out.println(student.defaultField);   // âœ— é”™è¯¯ï¼šä¸åŒåŒ…</span>
        <span class="hljs-comment">// System.out.println(student.privateField);   // âœ— é”™è¯¯ï¼šç§æœ‰</span>
        
        student.publicMethod();      <span class="hljs-comment">// âœ“ å¯ä»¥</span>
        <span class="hljs-comment">// student.protectedMethod(); // âœ— é”™è¯¯ï¼šä¸åŒåŒ…ä¸”éå­ç±»</span>
        <span class="hljs-comment">// student.defaultMethod();   // âœ— é”™è¯¯ï¼šä¸åŒåŒ…</span>
        <span class="hljs-comment">// student.privateMethod();   // âœ— é”™è¯¯ï¼šç§æœ‰</span>
    }
}
</code></pre>
<p>å­ç±»è®¿é—®ï¼ˆè·¨åŒ…ï¼‰ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// åœ¨ä¸åŒåŒ…ä¸­åˆ›å»ºStudentçš„å­ç±»</span>
<span class="hljs-keyword">package</span> com.example.test;

<span class="hljs-keyword">import</span> com.example.school.Student;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GraduateStudent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">GraduateStudent</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">super</span>(name, age);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testProtectedAccess</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„protectedæˆå‘˜</span>
        System.out.println(protectedField);  <span class="hljs-comment">// âœ“ å¯ä»¥ï¼ˆå­ç±»ï¼‰</span>
        protectedMethod();                   <span class="hljs-comment">// âœ“ å¯ä»¥ï¼ˆå­ç±»ï¼‰</span>
        
        <span class="hljs-comment">// ä½†ä¸èƒ½è®¿é—®é»˜è®¤å’Œç§æœ‰æˆå‘˜</span>
        <span class="hljs-comment">// System.out.println(defaultField);  // âœ— é”™è¯¯ï¼šä¸åŒåŒ…</span>
        <span class="hljs-comment">// System.out.println(privateField);  // âœ— é”™è¯¯ï¼šç§æœ‰</span>
    }
}
</code></pre>
<h2 data-id="heading-20">ä¸ƒã€ç»¼åˆç¤ºä¾‹ï¼šå®Œæ•´çš„å­¦æ ¡ç®¡ç†ç³»ç»Ÿ</h2>
<h3 data-id="heading-21">é¡¹ç›®ç»“æ„ï¼š</h3>
<p>text</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-css" lang="css">school-system/
â”œâ”€â”€ <span class="hljs-attribute">src</span>/
â”‚   â”œâ”€â”€ com/
â”‚   â”‚   â””â”€â”€ school/
â”‚   â”‚       â”œâ”€â”€ model/
â”‚   â”‚       â”‚   â”œâ”€â”€ Person<span class="hljs-selector-class">.java</span>
â”‚   â”‚       â”‚   â”œâ”€â”€ Student<span class="hljs-selector-class">.java</span>
â”‚   â”‚       â”‚   â”œâ”€â”€ Teacher<span class="hljs-selector-class">.java</span>
â”‚   â”‚       â”‚   â””â”€â”€ Course<span class="hljs-selector-class">.java</span>
â”‚   â”‚       â”œâ”€â”€ service/
â”‚   â”‚       â”‚   â”œâ”€â”€ StudentService<span class="hljs-selector-class">.java</span>
â”‚   â”‚       â”‚   â””â”€â”€ CourseService<span class="hljs-selector-class">.java</span>
â”‚   â”‚       â”œâ”€â”€ util/
â”‚   â”‚       â”‚   â””â”€â”€ DateUtil<span class="hljs-selector-class">.java</span>
â”‚   â”‚       â””â”€â”€ <span class="hljs-selector-tag">Main</span><span class="hljs-selector-class">.java</span>
â”‚   â””â”€â”€ config<span class="hljs-selector-class">.properties</span>
</code></pre>
<h3 data-id="heading-22">ä»£ç å®ç°ï¼š</h3>
<p><strong>Person.javaï¼ˆåŸºç±»ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.school.model;

<span class="hljs-comment">// äººå‘˜åŸºç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-keyword">protected</span> String id;      <span class="hljs-comment">// å—ä¿æŠ¤ï¼Œå­ç±»å¯ä»¥è®¿é—®</span>
    <span class="hljs-keyword">protected</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;          <span class="hljs-comment">// ç§æœ‰ï¼Œåªæœ‰æœ¬ç±»å¯ä»¥è®¿é—®</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String id, String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.id = id;
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }
    
    <span class="hljs-comment">// å…¬å…±getterå’Œsetter</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-keyword">if</span> (age &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">this</span>.age = age;
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">displayInfo</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ID: "</span> + id + <span class="hljs-string">", å§“å: "</span> + name + <span class="hljs-string">", å¹´é¾„: "</span> + age);
    }
}
</code></pre>
<p><strong>Student.javaï¼ˆå­¦ç”Ÿç±»ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.school.model;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-keyword">private</span> String classId;  <span class="hljs-comment">// ç­çº§ID</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> score;    <span class="hljs-comment">// æˆç»©</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String id, String name, <span class="hljs-type">int</span> age, String classId)</span> {
        <span class="hljs-built_in">super</span>(id, name, age);  <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•</span>
        <span class="hljs-built_in">this</span>.classId = classId;
        <span class="hljs-built_in">this</span>.score = <span class="hljs-number">0.0</span>;
    }
    
    <span class="hljs-comment">// å¯ä»¥è®¿é—®çˆ¶ç±»çš„protectedå­—æ®µ</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getStudentInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"å­¦ç”Ÿ["</span> + name + <span class="hljs-string">"](ID:"</span> + id + <span class="hljs-string">")"</span>;
    }
    
    <span class="hljs-comment">// getterå’Œsetter</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getClassId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> classId;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setClassId</span><span class="hljs-params">(String classId)</span> {
        <span class="hljs-built_in">this</span>.classId = classId;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getScore</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> score;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setScore</span><span class="hljs-params">(<span class="hljs-type">double</span> score)</span> {
        <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">0</span> &amp;&amp; score &lt;= <span class="hljs-number">100</span>) {
            <span class="hljs-built_in">this</span>.score = score;
        }
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">displayInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.displayInfo();
        System.out.println(<span class="hljs-string">"ç­çº§: "</span> + classId + <span class="hljs-string">", æˆç»©: "</span> + score);
    }
}
</code></pre>
<p><strong>Teacher.javaï¼ˆæ•™å¸ˆç±»ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.school.model;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Teacher</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-keyword">private</span> String subject;   <span class="hljs-comment">// æ•™æˆç§‘ç›®</span>
    <span class="hljs-keyword">private</span> String title;     <span class="hljs-comment">// èŒç§°</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Teacher</span><span class="hljs-params">(String id, String name, <span class="hljs-type">int</span> age, String subject, String title)</span> {
        <span class="hljs-built_in">super</span>(id, name, age);
        <span class="hljs-built_in">this</span>.subject = subject;
        <span class="hljs-built_in">this</span>.title = title;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span> {
        System.out.println(title + name + <span class="hljs-string">"æ­£åœ¨æ•™æˆ"</span> + subject);
    }
    
    <span class="hljs-comment">// getterå’Œsetter</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSubject</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> subject;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSubject</span><span class="hljs-params">(String subject)</span> {
        <span class="hljs-built_in">this</span>.subject = subject;
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getTitle</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> title;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTitle</span><span class="hljs-params">(String title)</span> {
        <span class="hljs-built_in">this</span>.title = title;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">displayInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.displayInfo();
        System.out.println(<span class="hljs-string">"ç§‘ç›®: "</span> + subject + <span class="hljs-string">", èŒç§°: "</span> + title);
    }
}
</code></pre>
<p><strong>StudentService.javaï¼ˆæœåŠ¡ç±»ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.school.service;

<span class="hljs-keyword">import</span> com.school.model.Student;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentService</span> {
    <span class="hljs-keyword">private</span> List&lt;Student&gt; students = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-comment">// æ·»åŠ å­¦ç”Ÿ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addStudent</span><span class="hljs-params">(Student student)</span> {
        students.add(student);
        System.out.println(<span class="hljs-string">"æ·»åŠ å­¦ç”Ÿ: "</span> + student.getName());
    }
    
    <span class="hljs-comment">// æŸ¥æ‰¾å­¦ç”Ÿ</span>
    <span class="hljs-keyword">public</span> Student <span class="hljs-title function_">findStudentById</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-keyword">for</span> (Student student : students) {
            <span class="hljs-keyword">if</span> (student.getId().equals(id)) {
                <span class="hljs-keyword">return</span> student;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">// æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">displayAllStudents</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"=== æ‰€æœ‰å­¦ç”Ÿ ==="</span>);
        <span class="hljs-keyword">for</span> (Student student : students) {
            student.displayInfo();
        }
    }
    
    <span class="hljs-comment">// ç»Ÿè®¡å¹³å‡åˆ†</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculateAverageScore</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (students.isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
        }
        
        <span class="hljs-type">double</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>;
        <span class="hljs-keyword">for</span> (Student student : students) {
            total += student.getScore();
        }
        
        <span class="hljs-keyword">return</span> total / students.size();
    }
}
</code></pre>
<p><strong>DateUtil.javaï¼ˆå·¥å…·ç±»ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.school.util;

<span class="hljs-keyword">import</span> java.text.SimpleDateFormat;
<span class="hljs-keyword">import</span> java.util.Date;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DateUtil</span> {
    <span class="hljs-comment">// ç§æœ‰æ„é€ æ–¹æ³•ï¼Œé˜²æ­¢è¢«å®ä¾‹åŒ–</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">DateUtil</span><span class="hljs-params">()</span> {}
    
    <span class="hljs-comment">// è·å–å½“å‰æ—¥æœŸå­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getCurrentDate</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">"yyyy-MM-dd"</span>);
        <span class="hljs-keyword">return</span> sdf.format(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
    }
    
    <span class="hljs-comment">// è·å–å½“å‰æ—¶é—´å­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getCurrentTime</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">"HH:mm:ss"</span>);
        <span class="hljs-keyword">return</span> sdf.format(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
    }
    
    <span class="hljs-comment">// æ ¼å¼åŒ–æ—¥æœŸ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">formatDate</span><span class="hljs-params">(Date date, String pattern)</span> {
        <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(pattern);
        <span class="hljs-keyword">return</span> sdf.format(date);
    }
}
</code></pre>
<p><strong>Main.javaï¼ˆä¸»ç±»ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.school;

<span class="hljs-keyword">import</span> com.school.model.Student;
<span class="hljs-keyword">import</span> com.school.model.Teacher;
<span class="hljs-keyword">import</span> com.school.service.StudentService;
<span class="hljs-keyword">import</span> com.school.util.DateUtil;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"=== å­¦æ ¡ç®¡ç†ç³»ç»Ÿ ==="</span>);
        System.out.println(<span class="hljs-string">"å½“å‰æ—¥æœŸ: "</span> + DateUtil.getCurrentDate());
        System.out.println(<span class="hljs-string">"å½“å‰æ—¶é—´: "</span> + DateUtil.getCurrentTime());
        
        <span class="hljs-comment">// åˆ›å»ºå­¦ç”Ÿ</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"S001"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">18</span>, <span class="hljs-string">"ä¸€ç­"</span>);
        <span class="hljs-type">Student</span> <span class="hljs-variable">student2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"S002"</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-number">19</span>, <span class="hljs-string">"äºŒç­"</span>);
        
        <span class="hljs-comment">// è®¾ç½®æˆç»©</span>
        student1.setScore(<span class="hljs-number">85.5</span>);
        student2.setScore(<span class="hljs-number">92.0</span>);
        
        <span class="hljs-comment">// åˆ›å»ºæ•™å¸ˆ</span>
        <span class="hljs-type">Teacher</span> <span class="hljs-variable">teacher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>(<span class="hljs-string">"T001"</span>, <span class="hljs-string">"ç‹è€å¸ˆ"</span>, <span class="hljs-number">35</span>, <span class="hljs-string">"æ•°å­¦"</span>, <span class="hljs-string">"é«˜çº§æ•™å¸ˆ"</span>);
        
        <span class="hljs-comment">// æ˜¾ç¤ºä¿¡æ¯</span>
        System.out.println(<span class="hljs-string">"\n=== äººå‘˜ä¿¡æ¯ ==="</span>);
        student1.displayInfo();
        student2.displayInfo();
        teacher.displayInfo();
        
        <span class="hljs-comment">// æ•™å¸ˆæˆè¯¾</span>
        System.out.println(<span class="hljs-string">"\n=== æ•™å­¦å®‰æ’ ==="</span>);
        teacher.teach();
        
        <span class="hljs-comment">// ä½¿ç”¨æœåŠ¡ç±»</span>
        System.out.println(<span class="hljs-string">"\n=== å­¦ç”Ÿç®¡ç† ==="</span>);
        <span class="hljs-type">StudentService</span> <span class="hljs-variable">studentService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StudentService</span>();
        studentService.addStudent(student1);
        studentService.addStudent(student2);
        studentService.displayAllStudents();
        
        <span class="hljs-comment">// æŸ¥æ‰¾å­¦ç”Ÿ</span>
        System.out.println(<span class="hljs-string">"\n=== æŸ¥æ‰¾å­¦ç”Ÿ ==="</span>);
        <span class="hljs-type">Student</span> <span class="hljs-variable">found</span> <span class="hljs-operator">=</span> studentService.findStudentById(<span class="hljs-string">"S001"</span>);
        <span class="hljs-keyword">if</span> (found != <span class="hljs-literal">null</span>) {
            System.out.println(<span class="hljs-string">"æ‰¾åˆ°å­¦ç”Ÿ: "</span> + found.getName());
        }
        
        <span class="hljs-comment">// ç»Ÿè®¡å¹³å‡åˆ†</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">average</span> <span class="hljs-operator">=</span> studentService.calculateAverageScore();
        System.out.println(<span class="hljs-string">"\nå¹³å‡åˆ†: "</span> + average);
    }
}
</code></pre>
<h3 data-id="heading-23">Â å¿«é€Ÿè®°å¿†å£è¯€</h3>
<ol>
<li><strong>åŒ…å¦‚æ–‡ä»¶å¤¹</strong>Â â†’ ç»„ç»‡ç®¡ç†ä»£ç æ–‡ä»¶</li>
<li><strong>é€†åŸŸåå‘½å</strong>Â â†’Â <code>com.example.project</code></li>
<li><strong>å¯¼å…¥éœ€å£°æ˜</strong>Â â†’ ä¸åŒåŒ…ç”¨<code>import</code></li>
<li><strong>è®¿é—®æœ‰æƒé™</strong>Â â†’Â <code>public</code>ã€<code>protected</code>ã€é»˜è®¤ã€<code>private</code></li>
</ol>
<h3 data-id="heading-24">æœ€é‡è¦çš„ä¸‰ç‚¹</h3>
<ol>
<li><strong>åŒ…æ˜¯ä»£ç çš„ç»„ç»‡å•ä½</strong>Â â†’ åƒæ–‡ä»¶å¤¹æ•´ç†æ–‡ä»¶ä¸€æ ·æ•´ç†ç±»</li>
<li><strong>åŒ…åå¿…é¡»ä¸ç›®å½•ç»“æ„åŒ¹é…</strong>Â â†’ è¿™æ˜¯Javaçš„ç¡¬æ€§è§„å®š</li>
<li><strong>åˆç†ä½¿ç”¨è®¿é—®ä¿®é¥°ç¬¦</strong>Â â†’ ä¿æŠ¤ä»£ç ï¼Œæ§åˆ¶å¯è§æ€§</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Golang GMP å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7580288235031085056</link>    <guid>https://juejin.cn/post/7580288235031085056</guid>    <pubDate>2025-12-06T20:33:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580288235031085056" data-draft-id="7579494852652892194" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Golang GMP å®ç°åŸç†"/> <meta itemprop="keywords" content="Go"/> <meta itemprop="datePublished" content="2025-12-06T20:33:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»Ÿé‡Œç "/> <meta itemprop="url" content="https://juejin.cn/user/3347330248221928"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Golang GMP å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3347330248221928/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»Ÿé‡Œç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T20:33:58.000Z" title="Sat Dec 06 2025 20:33:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ–‡ç« å¯¼è¯»</h2>
<p>æœ¬æ–‡æ˜¯å¯¹goè¯­è¨€çš„gmpæ¨¡å‹çš„ä¸€ä¸ªæŠ€æœ¯åˆ†äº«ã€‚</p>
<p>æœ¬æ–‡ä¸€å…±åˆ†æˆå››ä¸ªéƒ¨åˆ†å¯¹gmpè¿›è¡Œå­¦ä¹ ï¼š</p>
<ol>
<li>å‰ç½®çŸ¥è¯†ï¼šæ“ä½œç³»ç»Ÿçš„ä¸€äº›æ¦‚å¿µï¼Œåç¨‹ã€çº¿ç¨‹ç­‰çŸ¥è¯†ã€‚</li>
<li>golangçš„gmpæ¨¡å‹ï¼šè¿™æ˜¯goè¯­è¨€çš„æ ¸å¿ƒæ‹¼å›¾ï¼Œç†è§£è¿™å—åº•å±‚çŸ¥è¯†ï¼Œåé¢çš„å­¦ä¹ æ‰ä¼šå¾—å¿ƒåº”æ‰‹ï¼Œè¿™éƒ¨åˆ†æ˜¯ååŸç†æ€§çš„ä»‹ç»ã€‚</li>
<li>æ ¸å¿ƒæ•°æ®ç»“æ„ï¼šè¿™éƒ¨åˆ†ï¼ŒåŸºäºæºç ï¼Œå¯¹goè¯­è¨€çš„æ ‡å‡†åº“runtimeè¿™ä¸ªåŒ…ä¸­gmpæ¶‰åŠåˆ°çš„æ ¸å¿ƒçš„æ•°æ®ç»“æ„çš„ä¸€äº›å®šä¹‰è¿›è¡Œè®¤è¯†ã€‚</li>
<li>åŠ¨æ€çš„è°ƒåº¦æµç¨‹ï¼šå¯¹æ•´ä¸ªgmpçš„è°ƒåº¦çš„é“¾è·¯ï¼Œæºç è¿›è¡Œèµ°è¯»ã€‚</li>
</ol>
<h2 data-id="heading-1">ä¸€. å‰ç½®çŸ¥è¯†</h2>
<h3 data-id="heading-2">1.1 çº¿ç¨‹</h3>
<p>é¦–å…ˆæ˜¯çº¿ç¨‹ï¼Œæ€»æ‰€å‘¨çŸ¥ï¼Œçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿçš„æœ€å°è°ƒåº¦å•å…ƒã€‚</p>
<p>é€šä¹‰ä¸­çš„çº¿ç¨‹ï¼ŒæŒ‡çš„æ˜¯å†…æ ¸çº¿ç¨‹ï¼Œå…¶æ ¸å¿ƒç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ“ä½œç³»ç»Ÿæœ¬èº«æœ‰ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åŒºåˆ†ï¼Œçº¿ç¨‹ä½œä¸ºæœ€å°çš„è°ƒåº¦å•å…ƒï¼Œæ˜¯åœ¨å†…æ ¸æ€çš„è§†è§’ä¹‹ä¸‹çš„ï¼›</li>
<li><strong>åˆ›å»ºã€é”€æ¯ã€è°ƒåº¦å‡ç”±å†…æ ¸å®Œæˆï¼Œcpuéœ€è¦å®Œæˆç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´çš„åˆ‡æ¢</strong>ï¼›</li>
<li>å¯å……åˆ†åˆ©ç”¨å¤šæ ¸å®ç°å¹¶è¡Œï¼›</li>
</ol>
<h3 data-id="heading-3">1.2 åç¨‹</h3>
<p>å‰æ–‡å·²ç»å¼ºè°ƒï¼Œçº¿ç¨‹æ˜¯å†…æ ¸æ€è§†è§’ä¸‹çš„æ˜‚è´µèµ„æºï¼Œé‚£ä¹ˆåç¨‹å’Œçº¿ç¨‹å°±ç›¸å¯¹ï¼Œæ˜¯ç”¨æˆ·æ€è§†è§’ä¸‹çš„ä¸€ä¸ªäº§ç‰©ã€‚</p>
<p>è¿™ä¸¤è€…å¹¶éå¹³çº§ï¼Œåç¨‹æ¯”çº¿ç¨‹ä½ä¸€çº§ï¼Œæ˜¯çº¿ç¨‹çš„å­é›†ï¼Œæ˜¯åœ¨å…ˆæœ‰çº¿ç¨‹çš„åŸºç¡€ä¹‹ä¸Šï¼Œåœ¨ç”¨æˆ·æ€çš„è§†è§’ä¹‹ä¸‹ï¼Œè¿›è¡ŒäºŒæ¬¡åŠ å·¥ï¼ŒäºŒæ¬¡å¼€å‘çš„è¡ç”Ÿäº§ç‰©ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œæœ€ç»ˆåº•å±‚ç‰©ç†æ„ä¹‰ä¸Šï¼Œæœ¬è´¨è¿˜æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿˜æ˜¯ä¸€ä¸ªæœ€å°çš„è°ƒåº¦å•å…ƒã€‚</p>
<p>åç¨‹æœ‰ä»¥ä¸‹æ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ol>
<li>ä¸çº¿ç¨‹å­˜åœ¨æ˜ å°„å…³ç³»ï¼Œä¸ºM:1ï¼Œå¯ä»¥ç†è§£ä¸ºä¾é™„ä¸æŸä¸€ä¸ªçº¿ç¨‹è€Œç”Ÿçš„ï¼Œå¯ä»¥ç†è§£ä¸ºç”¨æˆ·æ€åŸºäºæŸäº›æ“ä½œï¼Œä¾é™„ä¸æŸä¸€ä¸ªå§‹ç»ˆå­˜æ´»å¯è¿è¡Œçš„çº¿ç¨‹ä¹‹ä¸Šçš„ä¸€ä¸ªå­å•å…ƒï¼›</li>
<li>åˆ›å»ºã€é”€æ¯ã€è°ƒåº¦éƒ½æ˜¯åœ¨ç”¨æˆ·æ€å®Œæˆï¼Œæ›´åƒä¸€ç§é€»è¾‘å¤„ç†ï¼Œæ‰€ä»¥æ›´è½»ï¼›</li>
<li>ä»å±äºæŸä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼Œæ— æ³•å¹¶è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªåç¨‹é˜»å¡ï¼Œä»å±äºåŒä¸€ä¸ªçº¿ç¨‹çš„æ‰€æœ‰åç¨‹å°†æ— æ³•è¿è¡Œï¼›</li>
</ol>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ä»å±äºåŒä¸€ä¸ªçº¿ç¨‹</strong>çš„åç¨‹ç»„ï¼Œåœ¨ç”¨æˆ·æ€è§†è§’ä¸‹ï¼Œå®é™…ä¸Šæ˜¯åªèƒ½åšåˆ°å¹¶å‘ã€‚<em><strong>ï¼ˆç¼ºé™·ï¼‰</strong></em></p>
<h3 data-id="heading-4">1.3 goroutine</h3>
<p>å‰æ–‡æåˆ°çš„åç¨‹ä¸»æµå«æ³•å«ï¼šCoroutine</p>
<p>è€Œgoroutineå…¶å®æ˜¯ç»è¿‡goè¯­è¨€ä¼˜åŒ–åçš„ç‰¹æ®Šâ€œCoroutineâ€ï¼Œæ˜¯ç‰¹æŒ‡goä¸–ç•Œä¸­ï¼Œä¼˜åŒ–æ”¹è‰¯åçš„ä¸€ç§åç¨‹ã€‚</p>
<p>å°†goroutineå’Œçº¿ç¨‹ä¹‹é—´çš„å¼ºä¾é™„æ€§ï¼Œå¼ºå…³è”æ€§è§£ç»‘äº†ã€‚</p>
<p>åŠ äº†ä¸€ä¸ªgoè°ƒåº¦å™¨ï¼Œåœ¨ä¸­é—´åŠ¨æ€çš„ç»´æŠ¤goroutineå’Œçº¿ç¨‹ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc4e6e6ba75e46c9ba304853267d7188~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luf6YeM56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765660365&amp;x-signature=wo6b22GiH%2FOKRTMMV9CuSXm1d%2Bk%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ol>
<li>å°†æ˜ å°„å…³ç³»å˜æˆM:Nï¼Œå¯åˆ©ç”¨å¤šä¸ªçº¿ç¨‹ï¼›</li>
<li>åˆ›å»ºã€é”€æ¯ã€è°ƒåº¦ä¹Ÿæ˜¯åœ¨ç”¨æˆ·æ€å®Œæˆï¼Œæè½»ï¼Œåˆå§‹åŒ–æ‰2kbï¼Œæ— éœ€å†…æ ¸æ€çš„ä»‹å…¥ï¼›</li>
<li>èƒ½å¤ŸçœŸæ­£çš„åšåˆ°å¹¶è¡Œï¼›</li>
<li>é€šè¿‡goè°ƒåº¦å™¨çš„æ–¡æ—‹ï¼Œå®ç°å’Œçº¿ç¨‹ä¹‹é—´çš„åŠ¨æ€ç»‘å®šï¼Œä»è€Œæ›´åŠ çµæ´»çš„è°ƒåº¦ï¼›</li>
<li>goroutineæ ˆç©ºé—´å¤§å°å¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œå› åœ°åˆ¶å®œï¼ˆ<strong>åŒºåˆ«äºçº¿ç¨‹æ ˆ</strong>ï¼‰ï¼›</li>
</ol>
<p>ç»¼ä¸Šï¼Œå¯ä»¥çœ‹å‡ºï¼Œgoè¯­è¨€åœ¨è°ƒåº¦åç¨‹ä¸Šåšäº†ä¼˜åŒ–ï¼Œå®ç°äº†â€œçµæ´»è°ƒåº¦â€ï¼Œä½†æ˜¯ï¼Œè¿™å…¶ä¸­ï¼Œé’ˆå¯¹â€œå¦‚ä½•å‡å°‘åŠ é”çš„è¡Œä¸ºâ€ï¼Œâ€œå¦‚ä½•é¿å…èµ„æºåˆ†é…ä¸å‡â€ç­‰é—®é¢˜åˆ°åº•æ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ</p>
<h2 data-id="heading-5">äºŒ. golangçš„gmpæ¨¡å‹</h2>
<p>gmp=goroutine+machine+processor</p>
<p>ä¸‹é¢å•ç‹¬è¯´ä¸€ä¸‹å„ä¸ªç»„ä»¶</p>
<h3 data-id="heading-6">2.1 g</h3>
<p>gå³æ˜¯goroutineï¼Œåœ¨goè¯­è¨€ä¸­ï¼Œæ˜¯å¯¹åç¨‹çš„ä¸€ç§æŠ½è±¡ã€‚</p>
<p>æ¯ä¸€ä¸ªgéƒ½æœ‰è‡ªå·±çš„æ ˆã€çŠ¶æ€å’Œæ‰§è¡Œçš„å‡½æ•°ï¼ˆé€šè¿‡go funcæŒ‡å®šï¼Œåœ¨å †ä¸Šåˆ›å»ºï¼‰</p>
<p><strong>ç”±æ“ä½œç³»ç»Ÿçº¿ç¨‹(M)æ‰§è¡Œï¼Œé€šè¿‡(P)è·å–è¿è¡Œèµ„æºã€‚gåªçŸ¥é“è‡ªå·±åœ¨å“ªä¸ªMä¸Šè¿è¡Œï¼Œä¸çŸ¥é“ä¹Ÿä¸å…³å¿ƒæ˜¯å“ªä¸ªPåœ¨æä¾›èµ„æºã€‚</strong></p>
<h3 data-id="heading-7">2.2 m</h3>
<p>må°±æ˜¯machineï¼Œæ˜¯goè¯­è¨€å¯¹çº¿ç¨‹ä¸€ä¸ªæŠ½è±¡</p>
<p><strong>Mç›´æ¥æ‰§è¡Œå¹¶è®°å½•å½“å‰Gçš„ä¿¡æ¯ï¼ŒPä¸ºMæä¾›è¿è¡Œèµ„æºã€‚Gåœ¨ç”Ÿå‘½å‘¨æœŸå†…å¯ä»¥è¢«ä¸åŒMæ‰§è¡Œï¼Œä½†åŒä¸€æ—¶åˆ»åªèƒ½åœ¨ä¸€ä¸ªMä¸Šè¿è¡Œã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e8cae9e0c8d42b99c0abfc188c773df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luf6YeM56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765660365&amp;x-signature=Aj7qjU5UkDQUrWo5ntm%2BCZW%2FwRM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">2.3 p</h3>
<p>på³æ˜¯processorï¼Œæ˜¯goè¯­è¨€ä¸­ï¼ŒæŠ½è±¡ä¸ºå¯¹åç¨‹çš„ä¸€ä¸ªè°ƒåº¦å™¨ï¼Œgåªæœ‰è¿›å…¥pé˜Ÿåˆ—ï¼Œæ‰èƒ½å¾—ä»¥æ‰§è¡Œ</p>
<p><strong>Pä¸ºMæä¾›Gé˜Ÿåˆ—å’Œè¿è¡Œèµ„æºã€‚Pçš„æ•°é‡é™åˆ¶åŒæ—¶æ‰§è¡Œçš„Gæ•°é‡</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6e50ac08a184f20b396ec0f72c7737c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luf6YeM56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765660365&amp;x-signature=SkAiex%2BPSMFni449knp7J6SZ0Y4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-9">ä¸‰. æ ¸å¿ƒæ•°æ®ç»“æ„</h2>
<h3 data-id="heading-10">3.1 g</h3>
<p>æºç ä½ç½®ï¼š$(go env GOROOT)/src/runtime/runtime2.go</p>
<h4 data-id="heading-11">3.1.1 gçš„ç»“æ„å®šä¹‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> g <span class="hljs-keyword">struct</span> {
    m         *m      <span class="hljs-comment">// å½“å‰äº¤ä¸çš„mçš„æŒ‡é’ˆï¼ˆæ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼‰ï¼Œå¯å˜ï¼Œä¹Ÿå¯ç©º</span>
    sched     gobuf   <span class="hljs-comment">// ä¸“é—¨ç”¨äºåˆ‡æ¢ Goroutine æ—¶ä¿å­˜å’Œæ¢å¤æ‰§è¡Œä¸Šä¸‹æ–‡</span>
    atomicstatus atomic.Uint32  <span class="hljs-comment">// G status å­˜å‚¨ç”Ÿå‘½çŠ¶æ€</span>
    ...
}

<span class="hljs-comment">// Goroutine Bufferï¼ˆGoè¿è¡Œæ—¶ä¸Šä¸‹æ–‡ç¼“å†²åŒºï¼‰</span>
<span class="hljs-keyword">type</span> gobuf <span class="hljs-keyword">struct</span> {
    sp   <span class="hljs-type">uintptr</span>   <span class="hljs-comment">// ä¿å­˜cpuçš„rspå¯„å­˜å™¨çš„å€¼ï¼ŒæŒ‡å‘å‡½æ•°è°ƒç”¨æ ˆçš„æ ˆé¡¶</span>
    pc   <span class="hljs-type">uintptr</span>   <span class="hljs-comment">// ä¿å­˜cpuçš„ripå¯„å­˜å™¨çš„å€¼ï¼ŒæŒ‡å‘ç¨‹åºä¸‹ä¸€æ¡æ‰§è¡ŒæŒ‡ä»¤çš„åœ°å€</span>
    g    guintptr  <span class="hljs-comment">// å½“å‰ Goroutine çš„æŒ‡é’ˆï¼ˆæŒ‡å‘è‡ªå·±ï¼‰</span>
    ret  <span class="hljs-type">uintptr</span>   <span class="hljs-comment">// ä¿å­˜ç³»ç»Ÿè°ƒç”¨çš„è¿”å›å€¼</span>
    bp   <span class="hljs-type">uintptr</span>   <span class="hljs-comment">// ä¿å­˜cpuçš„rbpå¯„å­˜å™¨çš„å€¼ï¼Œå­˜å‚¨å‡½æ•°æ ˆå¸§çš„èµ·å§‹ä½ç½®</span>
    ...
}
</code></pre>
<p>è¿™é‡Œçš„måº”è¯¥æ€ä¹ˆæ¥ç†è§£ï¼Ÿ</p>
<p>è¿™é‡Œçš„mä¸æ˜¯å…·ä½“ç»‘å®šåˆ°æŸä¸€ä¸ªmï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œæ˜¯åŠ¨æ€å¯å˜çš„ï¼Œæ˜¯<strong>è°ƒåº¦å™¨åˆ†é…çš„</strong></p>
<p>å¾ˆæ˜æ˜¾ï¼Œg.schedæ˜¯ä¸“ä¾›è°ƒåº¦å™¨ä½¿ç”¨çš„ï¼Œè°ƒåº¦å™¨éœ€è¦è¿™ä¸ªå­—æ®µæ¥æ‰§è¡ŒÂ <code>g</code>Â çš„åˆ‡æ¢</p>
<p>å› ä¸ºGoroutineéœ€è¦è¢«<strong>æš‚åœå’Œæ¢å¤</strong>ï¼ˆæ¯”å¦‚ç­‰å¾…I/Oæ—¶è®©å‡ºCPUï¼‰ã€‚è°ƒåº¦å™¨æš‚åœä¸€ä¸ªgæ—¶ï¼Œå°±æŠŠCPUçš„spã€pcç­‰å¯„å­˜å™¨å€¼ä¿å­˜åˆ°<code>g.sched</code>é‡Œï¼Œæ¢å¤æ—¶å†ä»<code>g.sched</code>è¯»å‡ºæ¥æ”¾å›CPUå¯„å­˜å™¨ï¼Œgå°±èƒ½æ¥ç€æ‰§è¡Œäº†</p>
<h4 data-id="heading-12">3.1.2 gçš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// g status</span>
<span class="hljs-keyword">const</span> (
        _Gidle = <span class="hljs-literal">iota</span> <span class="hljs-comment">// 0    // åˆšåˆ›å»ºï¼Œè¿˜æ²¡åˆå§‹åŒ–</span>
        _Grunnable <span class="hljs-comment">// 1       // å°±ç»ªæ€ï¼Œéšæ—¶å¯ä»¥è¢«è°ƒåº¦</span>
        _Grunning <span class="hljs-comment">// 2        // è¿è¡Œæ€ï¼Œæ­£åœ¨ CPU ä¸Šæ‰§è¡Œ</span>
        _Gsyscall <span class="hljs-comment">// 3        // ç³»ç»Ÿè°ƒç”¨æ€ï¼Œæ­£åœ¨æ‰§è¡Œç³»ç»Ÿè°ƒç”¨</span>
        _Gwaiting <span class="hljs-comment">// 4        // ç­‰å¾…æ€ï¼Œè¢«é˜»å¡</span>
        _Gdead <span class="hljs-comment">// 6           // æ­»äº¡æ€ï¼Œå·²é€€å‡ºï¼Œè¿˜æ²¡è¢«æ¸…ç†</span>
        _Gcopystack <span class="hljs-comment">// 8      // æ ˆå¤åˆ¶æ€ï¼Œæ­£åœ¨æ‰©å®¹/æ”¶ç¼©æ ˆ</span>
        _Gpreempted <span class="hljs-comment">// 9      // è¢«æŠ¢å æ€ï¼Œè¢«å¼ºåˆ¶è®©å‡ºm</span>
        ...
        <span class="hljs-comment">// è¿™é‡Œæœ‰ä¸ªæœ‰æ„æ€çš„ç‚¹ï¼šä¸ºä»€ä¹ˆå˜é‡çš„å‘½åè¦ä½¿ç”¨ä¸‹åˆ’çº¿å’Œå¤§å†™å­—æ¯</span>
        <span class="hljs-comment">// æ˜æ˜å¦‚æœä¸æƒ³è¢«å¤–éƒ¨åŒ…è®¿é—®ï¼Œç›´æ¥å†™æˆgidle = iotaä¸å°±å¯ä»¥äº†å—ï¼Ÿ</span>
        <span class="hljs-comment">// ä¸»è¦æ˜¯å› ä¸ºï¼š</span>
        <span class="hljs-comment">// å¯è¯»æ€§: _å¼€å¤´=è¿è¡Œæ—¶ç§æœ‰ï¼Œå¤§å†™=å…³è”Gç»“æ„ä½“ï¼ŒåŒ…å¤–ä¸å¯è®¿é—®</span>
        <span class="hljs-comment">// å†å²ä¹ æƒ¯ï¼šæ—©æœŸC/Unixé£æ ¼ï¼Œç³»ç»Ÿçº§ä»£ç ç”¨Â `_`Â å‰ç¼€è¡¨ç¤ºå†…éƒ¨/ç³»ç»Ÿ</span>
        <span class="hljs-comment">// åˆ†ç»„å½’ç±»ï¼šè¿è¡Œæ—¶æœ‰å¾ˆå¤šç§æœ‰å¸¸é‡ï¼Œéœ€è¦åˆ†ç±»ï¼Œä¾‹å¦‚ï¼Œ_Gidleè¡¨ç¤ºGçŠ¶æ€ï¼Œ_Pidleå°±å¯ä»¥è¡¨ç¤ºPçŠ¶æ€äº†ï¼Œå¾ˆæ¸…æ™°</span>
)
</code></pre>
<p>g.atomicstatusç”¨Â <code>atomic.Uint32</code>Â å°±æ˜¯ä¸ºäº†ä¿è¯ï¼šåŸå­æ€§ã€å¯è§æ€§å’Œä¸ç”¨é”ã€‚</p>
<p>ä¾‹å¦‚ï¼šg æ­£ä»Â <code>_Grunning</code>Â åˆ‡æ¢åˆ°Â <code>_Gwaiting</code>ï¼ŒåŒæ—¶åƒåœ¾å›æ”¶å™¨åœ¨æ£€æŸ¥æ‰€æœ‰ G çš„çŠ¶æ€ï¼Œç”¨åŸå­æ“ä½œèƒ½ç¡®ä¿ä¸ä¼šçœ‹åˆ°ä¸­é—´çš„ä¸ä¸€è‡´çŠ¶æ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5e88a1a5b2248ec8765d20f7babf2df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luf6YeM56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765660365&amp;x-signature=Xl2kyVl03h2ybPawGK4bUW7i2Gc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">3.2 m</h3>
<h4 data-id="heading-14">3.2.1 mçš„ç»“æ„å®šä¹‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> m <span class="hljs-keyword">struct</span> {
    g0     *g                <span class="hljs-comment">// goroutine with scheduling stack</span>
    curg   *g                <span class="hljs-comment">// current running goroutine</span>
    tls  [tlsSlots]<span class="hljs-type">uintptr</span> <span class="hljs-comment">// thread-local storage</span>
    
    p      puintptr <span class="hljs-comment">// attached p for executing go code (nil if not executing go code)</span>
    nextp  puintptr
    oldp   puintptr
    ...
}
</code></pre>
<p>è¿™é‡Œçš„g0è¦æ€ä¹ˆç†è§£ï¼Œæ€ä¹ˆçœ‹èµ·æ¥è¿˜æ˜¯mç›´æ¥ç®¡ç†gï¼Ÿ</p>
<p>g0å…¶å®æ˜¯ä¸€ç±»ç‰¹æ®Šçš„åç¨‹ï¼Œç§°ä¸ºå§‹ç¥–åç¨‹ï¼Œæ˜¯<strong>è°ƒåº¦å™¨çš„å·¥ä½œåç¨‹</strong>ï¼Œç”¨æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„åŸç”Ÿæ ˆï¼Œä¸“é—¨å¤„ç†åç¨‹åˆ‡æ¢ï¼Œ<strong>ä¸mçš„å…³ç³»æ˜¯1ï¼š1</strong>ï¼Œè¿™é‡Œçš„g0è™½ç„¶ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œä½†æ˜¯å´æ˜¯ç»‘å®šçš„å…³ç³»</p>
<ul>
<li>pï¼šè¯¥mä¸ºäº†æ‰§è¡Œgoä»£ç æ‰€ä¾é™„çš„pï¼Œæ²¡æœ‰æ‰§è¡Œæ—¶ï¼Œå°±ä¸ºnil</li>
<li>nextpï¼šä¸´æ—¶å­˜æ”¾çš„Pï¼ˆå‡†å¤‡ç»‘å®šï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ªå¯ä»¥ä¾é™„çš„p</li>
<li>oldpï¼šgé€€å‡º_Grunningå‰ä¿å­˜çš„Pï¼Œä¹Ÿå°±æ˜¯på’Œè§£ç»‘æ—¶ä¿å­˜ï¼Œç›´åˆ°æ¢å¤æ—¶ï¼Œp = oldpï¼ˆæ¢å¤ç»‘å®šï¼Œå¦‚æœè¯¥pæ²¡æœ‰æ–°çš„mçš„è¯ï¼‰</li>
</ul>








































<table><thead><tr><th>ç‰¹ç‚¹</th><th>g</th><th>g0</th></tr></thead><tbody><tr><td>è°åˆ›å»º</td><td><code>go func()</code>Â åˆ›å»º</td><td>è¿è¡Œæ—¶åˆ›å»ºï¼ˆçº¿ç¨‹å¯åŠ¨æ—¶ï¼‰</td></tr><tr><td>ç”¨é€”</td><td>æ‰§è¡Œç”¨æˆ·ä»£ç </td><td>æ‰§è¡Œè°ƒåº¦ã€åƒåœ¾å›æ”¶ç­‰ç³»ç»Ÿä»»åŠ¡</td></tr><tr><td>æ•°é‡</td><td>æˆåƒä¸Šä¸‡</td><td>1:1 å¯¹åº”æ¯ä¸ªm</td></tr><tr><td>æ ˆåœ¨å“ª</td><td>å †ä¸Šåˆ†é…çš„æ™®é€šæ ˆ</td><td>æ“ä½œç³»ç»Ÿçº¿ç¨‹æ ˆ</td></tr><tr><td>èƒ½å¦è¢«æŠ¢å </td><td>èƒ½</td><td>ä¸èƒ½ï¼ˆå¿…é¡»ä¸€æ¬¡æ€§æ‰§è¡Œå®Œï¼‰</td></tr><tr><td>ç‰¹æƒ</td><td>ç”¨æˆ·æ€</td><td>å’Œæ™®é€šgä¸€æ ·åœ¨<strong>ç”¨æˆ·æ€</strong>è¿è¡Œ</td></tr></tbody></table>
<h3 data-id="heading-15">3.3 p</h3>
<h4 data-id="heading-16">3.3.1 pçš„ç»“æ„å®šä¹‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> p <span class="hljs-keyword">struct</span> {
    runqhead <span class="hljs-type">uint32</span>         <span class="hljs-comment">// é˜Ÿåˆ—å¤´åœ°å€</span>
    runqtail <span class="hljs-type">uint32</span>         <span class="hljs-comment">// é˜Ÿåˆ—å°¾åœ°å€</span>
    runq     [<span class="hljs-number">256</span>]guintptr  <span class="hljs-comment">// æœ¬åœ°goroutineé˜Ÿåˆ—ï¼Œå›ºå®šæœ€å¤§é•¿åº¦256</span>
    runnext  guintptr       <span class="hljs-comment">// ä¸‹ä¸€ä¸ªå¯æ‰§è¡Œçš„goroutineåœ°å€</span>
    
    status   <span class="hljs-type">uint32</span>         <span class="hljs-comment">// pçš„ç”Ÿå‘½çŠ¶æ€</span>
    m        muintptr       <span class="hljs-comment">// è¯¥pè·å–åˆ°çš„m</span>
    ...
}
</code></pre>
<p>p.runqå°±æ˜¯pæœ¬èº«ç§æœ‰çš„ä¸€ä¸ªgé˜Ÿåˆ—ï¼Œä½†æ˜¯è¿™ä¸ªé˜Ÿåˆ—æ˜¯æœ‰ä¸€ä¸ªæœ€å¤§çš„å®¹é‡çš„</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> schedt <span class="hljs-keyword">struct</span> {
    lock     mutex
    <span class="hljs-comment">// Global runnable queue.</span>
    runq     gQueue
    runqsize <span class="hljs-type">int32</span>
    ...
}
</code></pre>
<p>schedtæ˜¯å¯¹å…¨å±€goroutineé˜Ÿåˆ—çš„å°è£…</p>
<p>lockæ˜¯ä¸€æŠŠ<strong>æ“ä½œå…¨å±€é˜Ÿåˆ—æ—¶ä½¿ç”¨çš„é”</strong>ï¼Œrunqã€runqsizeå³ä¸ºé˜Ÿåˆ—å’Œé˜Ÿåˆ—çš„å®¹é‡</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">const</span> (
    _Pidle     = <span class="hljs-literal">iota</span>  <span class="hljs-comment">// ç©ºé—²ï¼Œç­‰å¾…Mç»‘å®š</span>
    _Prunning          <span class="hljs-comment">// å·²è¢«Mç»‘å®šï¼Œæ­£åœ¨è¿è¡Œ</span>
    _Psyscall          <span class="hljs-comment">// ç»‘å®šMåœ¨ç³»ç»Ÿè°ƒç”¨ï¼Œå¯è¢«å…¶ä»–Må·</span>
    _Pgcstop           <span class="hljs-comment">// æš‚åœï¼ˆGCæ—¶ï¼‰</span>
    _Pdead             <span class="hljs-comment">// é”€æ¯</span>
)
</code></pre>
<p><strong>P çš„çŠ¶æ€å†³å®šè°å¯ä»¥ç»‘å®š</strong></p>
<h3 data-id="heading-17">3.4 ä¸‰è€…çš„å…³ç³»</h3>
<p>ä»ä»¥ä¸Šçš„ç»“æ„å®šä¹‰å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>mä¸­ä¼¼ä¹æœ‰æœ€å…¨çš„ä¿¡æ¯ï¼Œä¸¤ç§gï¼ˆ<em>g0å’Œ</em>curgï¼‰ï¼Œæœ‰pï¼Œnextpï¼Œoldpçš„åœ°å€ï¼›</li>
<li>pä¸­æœ‰gçš„é˜Ÿåˆ—ï¼Œä¹Ÿæœ‰*mï¼›</li>
<li>è€Œgä¸­åªæœ‰*mï¼Œå’Œè‡ªå·±çš„ç›¸å…³ä¿¡æ¯ï¼ˆschedã€statusï¼‰ä¹‹å¤–ï¼Œæ²¡æœ‰pï¼›</li>
</ul>
<p>è¿™ç§è®¾è®¡ï¼Œæ—¢ä½“ç°äº†gå’Œmä¹‹é—´ï¼Œåç¨‹å’Œçº¿ç¨‹ä¹‹é—´æœ¬è´¨çš„å…³ç³»ï¼ˆåç¨‹ä¾æ‰˜äºçº¿ç¨‹æ‰èƒ½æ‰§è¡Œï¼‰ï¼Œåˆè¯æ˜pæ˜¯goè¯­è¨€ä¸­çš„ä¸€ä¸ªä¼˜åŒ–å­˜åœ¨ï¼ŒPäº‹å®ä¸Šæ˜¯ä¸€ä¸ªæŠ½è±¡ç†è§£çš„Â <strong>â€œèµ„æºç®¡ç†è€…â€</strong>ï¼Œæ˜¯gçš„â€œç®¡ç†è€…â€ï¼Œä¹Ÿä½œä¸ºmè·å–gçš„â€œå·¥ä½œå°â€</p>
<pre><code class="hljs language-css" lang="css">å¯åŠ¨é¡ºåºï¼š
<span class="hljs-number">1</span>. è¿›ç¨‹å¯åŠ¨ â†’ åˆ›å»º M0ï¼ˆé™æ€åˆ†é…ï¼Œåç»­åŠ¨æ€åˆ›å»ºï¼‰
<span class="hljs-number">2</span>. runtimeåˆå§‹åŒ– â†’ åˆ›å»º <span class="hljs-selector-tag">P</span>ï¼ˆGOMAXPROCSä¸ªï¼‰
<span class="hljs-number">3</span>. åˆ›å»ºä¸»goroutineï¼ˆ<span class="hljs-selector-tag">main</span>æ–¹æ³•ï¼‰
<span class="hljs-number">4</span>. M0çš„g0å¼€å§‹è°ƒåº¦ï¼Œ<span class="hljs-selector-tag">P</span>ç»‘å®šåˆ°M

æ—¶é—´çº¿ï¼š
M0å­˜åœ¨ â†’ <span class="hljs-selector-tag">P</span>åˆ›å»º â†’ M0ç»‘å®š<span class="hljs-selector-tag">P</span> â†’ å¼€å§‹è°ƒåº¦
</code></pre>
<p>ä»gçš„ç»“æ„ä½“å®šä¹‰å¯ä»¥çœ‹åˆ°ï¼Œgä¸­æ²¡æœ‰på•Šï¼Œé‚£gè¢«åˆ›å»ºå‡ºæ¥åï¼Œæ­¤æ—¶æ²¡æœ‰*mï¼Œç¬¬ä¸€æ¬¡æ˜¯æ€ä¹ˆå…¥é˜Ÿåˆ—çš„ï¼Œå…¥çš„ä»€ä¹ˆé˜Ÿåˆ—ï¼Ÿ</p>
<p>æ–°åˆ›å»ºçš„gæ—¢æ²¡æœ‰mä¹Ÿæ²¡æœ‰pï¼Œå®ƒè¢«æ”¾å…¥åˆ›å»ºå®ƒçš„gçš„pçš„æœ¬åœ°é˜Ÿåˆ—çš„é˜Ÿå°¾</p>
<p>é‚£mainè¿™ä¸ªä¸»goroutineæ˜¯è°åˆ›å»ºçš„ï¼Œæ˜¯ä¸æ˜¯g0ï¼Ÿå› ä¸ºg0æ˜¯ä½¿ç”¨çš„çº¿ç¨‹æ ˆï¼Œé‚£ä¹ˆæ˜¯åˆ›å»ºåœ¨å †ä¸Šï¼Œè¿˜æ˜¯åœ¨çº¿ç¨‹æ ˆä¸Šï¼Ÿ</p>
<p>æ˜¯Â <code>runtime</code>Â è‡ªå·±åˆ›å»ºçš„ï¼Œä¸æ˜¯ g0 ç›´æ¥åˆ›å»ºçš„</p>
<p>è°ƒç”¨é“¾ï¼š<code>runtime.main</code>Â â†’Â <code>newproc()</code>Â â†’ åˆ›å»ºä¸»goroutine â†’ æ”¾å…¥é˜Ÿåˆ—ï¼Œå †ä¸Šï¼æ‰€æœ‰ç”¨æˆ·goroutineçš„æ ˆéƒ½åœ¨å †ä¸Šåˆ†é…ï¼ŒåŒ…æ‹¬mainçš„ä¸»goroutine</p>
<p>ç›´åˆ°mainæ–¹æ³•ç»“æŸï¼Œ<code>exit(0)</code>Â æ˜¯ç²—æš´çš„è¿›ç¨‹ç»ˆæ­¢ï¼Œæ“ä½œç³»ç»Ÿå›æ”¶æ‰€æœ‰èµ„æºã€‚</p>
<h3 data-id="heading-18">3.5 sysmon</h3>
<p><code>sysmon</code>Â ä¸æ˜¯Â <code>m</code>Â ç»“æ„ä½“çš„å­—æ®µï¼Œè€Œæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ä¸“ç”¨Mä¸Šçš„goroutineå‡½æ•°ã€‚è¿™ä¸ªMä¸ç»‘å®šPï¼Œä¸“é—¨æ‰§è¡Œç³»ç»Ÿç›‘æ§ä»»åŠ¡ã€‚è¿è¡Œæ—¶ä¸éœ€è¦åœ¨Â <code>m</code>Â ä¸­æ ‡è®°Â <code>sysmon</code>ï¼Œå› ä¸ºå®ƒæ˜¯é€šè¿‡å¯åŠ¨<strong>ä¸“ç”¨m</strong>æ¥è¿è¡Œçš„ç‹¬ç«‹ç›‘æ§å®ä½“ã€‚ä¸“ç”¨mï¼Œä¹Ÿä¸å‚ä¸pçš„ç»‘å®š</p>
<ol>
<li>ä¸å‚ä¸æ™®é€šè°ƒåº¦</li>
<li>å¯ä»¥çœ‹è§æ‰€æœ‰Pçš„çŠ¶æ€</li>
<li>ä¸ä¼šè¢«ç³»ç»Ÿè°ƒç”¨é˜»å¡å½±å“</li>
</ol>
<h2 data-id="heading-19">å››. åŠ¨æ€çš„è°ƒåº¦æµç¨‹</h2>
<p>æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œè¿½æº¯gmpæ¨¡å‹çš„è°ƒç”¨é“¾è·¯</p>
<h3 data-id="heading-20">4.1 ä¸¤ç§gçš„è½¬æ¢</h3>
<p>å‰é¢3.2ä¸­ï¼Œå¯¹mçš„ç»“æ„å®šä¹‰å­¦ä¹ æ—¶ï¼Œmä¸­ä¸æ­¢æœ‰g0çš„æŒ‡é’ˆï¼Œä¹Ÿæœ‰curgçš„æŒ‡é’ˆï¼Œå¾ˆæ˜æ˜¾curgæŒ‡å‘çš„å°±æ˜¯å½“å‰æ­£åœ¨è¢«må¤„ç†çš„g</p>
<p>ä¸€ä¸ªå®Œæ•´çš„goroutineçš„è°ƒç”¨é“¾è·¯ï¼Œå…¶å®å°±æ˜¯ä¼šæœ‰ä¸€ä¸ªä»g0åˆ°gï¼Œgå†å›å½’g0çš„è¿™æ ·çš„ä¸€ä¸ªé—­ç¯ï¼Œè€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šæœ‰ä¸€ç»„å¯¹å¶çš„å‡½æ•°ï¼Œåˆ†åˆ«æ˜¯<code>func gogo()</code>å’Œ<code>func mcall()</code></p>
<p>æ¥å£è¢«å®šä¹‰åœ¨runtimeåŒ…çš„stubs.goä¸­</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/653fc3b853904e519c89147955cc1b3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luf6YeM56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765660365&amp;x-signature=S2kih3ogbfKHoF%2FTWZEnSJBQLyQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-21">4.2 å‡ ç§è°ƒåº¦ç±»å‹</h3>
<p>æºç åœ¨proc.goæ–‡ä»¶ä¸­ï¼Œä»¥ä¸‹æ–¹æ³•ä¹Ÿéƒ½æ˜¯ç”¨æˆ·gæ¥è°ƒç”¨</p>
<h4 data-id="heading-22">4.2.1 ä¸»åŠ¨è°ƒåº¦</h4>
<p>è¿™é‡Œçš„ä¸»åŠ¨ï¼Œæ˜¯æŒ‡ç”¨æˆ·çš„ä¸»åŠ¨ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·åœ¨ä»£ç ä¸­ä½¿ç”¨runtimeåŒ…å¯¹å¤–æš´éœ²çš„Goschedæ–¹æ³•ï¼Œä½¿å½“å‰çš„gå‡ºè®©æ‰§è¡Œæƒï¼Œä¸»åŠ¨è¿›å…¥<strong>å…¨å±€é˜Ÿåˆ—</strong>ç­‰å¾…ä¸‹æ¬¡è¢«è°ƒåº¦ï¼Œè°ƒç”¨å®ƒçš„ g å˜ä¸ºÂ <code>_Grunnable</code>Â çŠ¶æ€</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Gosched yields the processor, allowing other goroutines to run. It does not</span>
<span class="hljs-comment">// suspend the current goroutine, so execution resumes automatically.</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//go:nosplit</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Gosched</span><span class="hljs-params">()</span></span> {
    checkTimeouts()     <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰è¶…æ—¶çš„timer</span>
    mcall(gosched_m)
}
</code></pre>
<p>æ„æ€å°±æ˜¯ï¼ŒGoschedä¼šè®©å‡ºå¤„ç†å™¨ï¼Œå…è®¸å…¶ä»–åç¨‹è¿è¡Œã€‚å®ƒä¸ä¼šæŒ‚èµ·å½“å‰çš„åç¨‹ï¼Œå› æ­¤æ‰§è¡Œä¼šè‡ªåŠ¨æ¢å¤ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯è¿™é‡Œçš„checkTimeouts()ï¼Œè¿™æ˜¯go14å¼•å…¥çš„å®‰å…¨æœºåˆ¶ï¼Œå› ä¸ºÂ mcallÂ åˆ‡æ¢åˆ°Â gÂ åï¼ŒgÂ æ‰§è¡Œè°ƒåº¦é€»è¾‘ä¹Ÿéœ€è¦æ—¶é—´ï¼å¦‚æœä¸€ç›´Â mcallï¼Œg0Â ä¼šä¸€ç›´å ç”¨CPUï¼Œæ²¡æœºä¼šè°ƒåº¦timer goroutineã€‚</p>
<h4 data-id="heading-23">4.2.2 è¢«åŠ¨è°ƒåº¦</h4>
<p>è¿™ä¸ªå°±ä¸æ˜¯ç”¨æˆ·ä¸»åŠ¨çš„è®©gå‡ºè®©æ‰§è¡Œæƒäº†ï¼Œè€Œæ˜¯ g æœ¬èº«é‡åˆ°äº†æ²¡æœ‰å¿…è¦ç»§ç»­å ç”¨ m çš„æƒ…å†µ</p>
<h5 data-id="heading-24">1) _Gsyscall</h5>
<p><code>entersyscall()</code>ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè®©å½“å‰è¿è¡Œçš„gè¿›å…¥_Gsyscallï¼š</p>
<ol>
<li>mä¼šä¿å­˜gå½“å‰çš„ä¿¡æ¯ï¼ˆg.schedï¼‰</li>
<li>mä¼šå¸¦ç€gè¿›å…¥å†…æ ¸æ€å»æ‰§è¡Œ</li>
<li>å¹¶è®°å½•æ­¤æ—¶çš„påˆ°m.oldp</li>
<li>æ­¤æ—¶på°±ä¼šå’Œmè§£ç»‘ï¼Œå»å¯»æ‰¾å…¶ä»–çš„mï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</li>
<li>gå°±ä¼šç•™åœ¨_Gsyscallï¼Œç›´åˆ°å†…æ ¸æ€ç»“æŸï¼Œè°ƒç”¨exitsyscall()</li>
</ol>
<p><code>exitsyscall()</code>, è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœåŸæ¥çš„ P è¿˜ç©ºé—²ï¼ˆæ²¡æœ‰ç»‘å®šæ–°çš„mï¼‰ï¼Œå°±å¯ä»¥ç›´æ¥æ¢å¤è¿è¡Œæ€ï¼Œå¦åˆ™å°±æ˜¯è¿›å…¥å°±ç»ªæ€ç­‰å¾…æ–°çš„è°ƒåº¦</p>
<h5 data-id="heading-25">2) _Gwaiting</h5>
<p><code>gopark()</code>ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨gé‡åˆ°é˜»å¡æ—¶å°±ä¼šè°ƒç”¨ï¼Œç›®çš„æ˜¯ä¸ºäº†è®©gè¿›å…¥_Gwaitingï¼Œä¾‹å¦‚channerã€selectå’ŒåŒæ­¥é”ç­‰æƒ…å†µï¼Œå’Œå‰è€…ä¸åŒçš„æ˜¯ï¼Œ<strong>mç«‹å³æ‰§è¡Œå…¶ä»–g</strong>ï¼Œä¸Pä¿æŒç»‘å®šï¼Œæ­¤æ—¶çš„gè¿›å…¥çš„æ˜¯ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œç›´åˆ°æœ‰â€œå”¤é†’è€…â€æ‰§è¡Œ<code>goready(*g)</code>ï¼Œè¢«å”¤é†’çš„gä¼šä¼˜å…ˆæ”¾å…¥<strong>å”¤é†’è€…çš„pçš„æœ¬åœ°é˜Ÿåˆ—</strong>ï¼Œè¿™æ ·æ‰å¯èƒ½æ›´å¿«è¢«mæ‰§è¡Œ</p>
<p>è¿™æ˜¯<strong>ä¸ºäº†åˆ©ç”¨CPUç¼“å­˜å±€éƒ¨æ€§ï¼Œå½“å‰CPUæ ¸å¿ƒçš„ç¼“å­˜å¾ˆå¯èƒ½å·²ç»æœ‰è¿™ä¸ªPçš„æ•°æ®ï¼Œå¦‚æœæ”¾åˆ°å…¶ä»–Pçš„é˜Ÿåˆ—ï¼Œéœ€è¦åŒæ­¥ç¼“å­˜ï¼Œå¼€é”€å¤§ï¼Œå‡å°‘è°ƒåº¦å»¶è¿Ÿï¼Œæé«˜æ€§èƒ½ã€‚</strong></p>
<p>å¦‚æœæ­£å¥½é‡åˆ°å”¤é†’è€…æœ¬åœ°é˜Ÿåˆ—æ»¡çš„æƒ…å†µï¼Œåˆ™ä¼šè°ƒç”¨<code>runqputslow()</code>ï¼š</p>
<ol>
<li>ç§»åŠ¨128ä¸ªGåˆ°å…¨å±€é˜Ÿåˆ—</li>
<li>æŠŠæ–°Gï¼ˆè¢«å”¤é†’è€…ï¼‰æ”¾å…¥æœ¬åœ°é˜Ÿåˆ—ç©ºä½</li>
<li>æœ¬åœ°é˜Ÿåˆ—ç°åœ¨æœ‰ 256-128+1 = 129ä¸ªG</li>
</ol>
<p>è¿™æ˜¯ä¸ºäº†é¿å…é¢‘ç¹æ“ä½œå…¨å±€é˜Ÿåˆ—ï¼Œå¦‚æœæ¯æ¬¡æ»¡éƒ½åªæ”¾ä¸€ä¸ªGåˆ°å…¨å±€ï¼Œé¢‘ç¹åŠ é” â†’ æ€§èƒ½å·®</p>
<p>æ€»ä¹‹è¢«å”¤é†’çš„gåªèƒ½æ˜¯å›åˆ°<code>_Grunable</code>ã€‚</p>
<p>è€Œå€¼å¾—æ³¨æ„å¾—æ˜¯ï¼Œæ‰§è¡Œgoreadyçš„gè‡ªå·±å¹¶ä¸ä¼šè¿›å…¥_Gwaitingï¼Œå› ä¸ºè¿™æ ·è®¾è®¡å¯ä»¥é¿å…<code>æ­»é”</code>ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-go" lang="go">ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)  <span class="hljs-comment">// æ— ç¼“å†²</span>

<span class="hljs-comment">// G1: æ¥æ”¶è€…ï¼ˆå…ˆå¯åŠ¨ï¼‰</span>
<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    val := &lt;-ch  <span class="hljs-comment">// é˜»å¡ï¼gopark()åˆ°_Gwaitingï¼Œå¹¶å°†G1è‡ªå·±çš„ä¿¡æ¯å¸¦ç»™ch.recvqï¼Œå› ä¸ºæœŸå¾…chæ¥æ”¶æ•°æ®æ—¶å”¤é†’è‡ªå·±</span>
    fmt.Println(<span class="hljs-string">"æ”¶åˆ°:"</span>, val)
}()

<span class="hljs-comment">// G2: å”¤é†’è€…ï¼ˆåå¯åŠ¨ï¼‰</span>
<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    time.Sleep(time.Second)
    ch &lt;- <span class="hljs-number">42</span>     <span class="hljs-comment">// 1. å‘ç°ch.recvqæœ‰ç­‰å¾…çš„G1</span>
                 <span class="hljs-comment">// 2. è°ƒç”¨ goready(G1) å”¤é†’G1</span>
                 <span class="hljs-comment">// 3. å”¤é†’è€…ç»§ç»­æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç ï¼</span>
    fmt.Println(<span class="hljs-string">"å‘é€å®Œæˆ"</span>)  <span class="hljs-comment">// â† ç«‹å³æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ï¼</span>
}()
</code></pre>
<p>å¦‚æœÂ <code>goready(G1)</code>Â ä¼šé˜»å¡ï¼Œé‚£ä¹ˆÂ <code>fmt.Println("å‘é€å®Œæˆ")</code>Â å°±æ°¸è¿œä¸ä¼šæ‰§è¡Œï¼Œå½¢æˆ<strong>æ­»é”</strong>ï¼</p>
<h5 data-id="heading-26">3) æŠ¢å è°ƒåº¦</h5>
<p>æŠ¢å è°ƒåº¦ = å¼ºåˆ¶æ‰“æ–­æ­£åœ¨è¿è¡Œçš„Goroutineï¼Œä¸è®©å®ƒéœ¸å CPUå¤ªä¹…ã€‚</p>
<p><strong>Go 1.14+ï¼šåŸºäºå¼‚æ­¥ä¿¡å·çš„æŠ¢å ï¼Œä»»ä½•åœ°æ–¹éƒ½å¯èƒ½è¢«ä¸­æ–­ï¼æ‰æ˜¯çœŸæ­£çš„æŠ¢å </strong></p>
<p>æŠ¢å å¦‚ä½•å·¥ä½œï¼Ÿ</p>
<ol>
<li>æ ‡è®°é˜¶æ®µï¼ˆsysmonè´Ÿè´£ï¼‰</li>
</ol>

<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">retake</span><span class="hljs-params">(now <span class="hljs-type">int64</span>)</span></span> {
    <span class="hljs-keyword">for</span> æ¯ä¸ªP {
        <span class="hljs-keyword">if</span> pp.status == _Prunning {
            <span class="hljs-comment">// Gè¿è¡Œè¶…è¿‡10msï¼Ÿ</span>
            <span class="hljs-keyword">if</span> now-pp.schedtick &gt; <span class="hljs-number">10</span>*<span class="hljs-number">1000</span>*<span class="hljs-number">1000</span> {
                preemptone(pp)  <span class="hljs-comment">// æ ‡è®°è¿™ä¸ªPä¸Šçš„Gåº”è¯¥è¢«æŠ¢å </span>
            }
        }
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">preemptone</span><span class="hljs-params">(pp *p)</span></span> <span class="hljs-type">bool</span> {
    gp := pp.curg
    <span class="hljs-keyword">if</span> gp == <span class="hljs-literal">nil</span> || gp == pp.g0 {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    gp.preempt = <span class="hljs-literal">true</span>  <span class="hljs-comment">// â† è®¾ç½®æŠ¢å æ ‡å¿—</span>
    
    <span class="hljs-comment">// å‘Šè¯‰Gï¼š"ä½ è¯¥è®©å‡ºäº†ï¼"</span>
    gp.stackguard0 = stackPreempt
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}
</code></pre>
<p>2.  æ‰§è¡Œé˜¶æ®µï¼ˆGè‡ªå·±æ£€æŸ¥æˆ–ä¿¡å·ä¸­æ–­ï¼‰</p>
<p>å¼‚æ­¥ä¿¡å·ï¼ˆGo 1.14+ï¼‰</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ“ä½œç³»ç»Ÿä¿¡å·ï¼ˆå¦‚SIGURGï¼‰ä¸­æ–­G</span>
<span class="hljs-comment">// åœ¨ä¿¡å·å¤„ç†ç¨‹åºä¸­åˆ‡æ¢åˆ°è°ƒåº¦å™¨</span>
func <span class="hljs-built_in">sighandler</span>(sig int32) {
    if sig == sigPreempt {
        <span class="hljs-comment">// è¢«æŠ¢å ï¼</span>
        <span class="hljs-built_in">doasyncPreempt</span>()  <span class="hljs-comment">// åˆ‡æ¢åˆ°è°ƒåº¦å»æ‰¾ä¸‹ä¸€ä¸ªg</span>
    }
}
</code></pre>
<p>æŠ¢å å®Œæ•´é“¾è·¯</p>
<pre><code class="hljs language-makefile" lang="makefile">æ—¶é—´çº¿ï¼ˆè¯¦ç»†ç‰ˆï¼‰ï¼š
<span class="hljs-section">t0: G1åœ¨CPUä¸Šæ‰§è¡Œ</span>
    â†“
<span class="hljs-section">t1: sysmonè°ƒç”¨ signalM(M1, SIGURG)</span>
    â†“
<span class="hljs-section">t2: å†…æ ¸å‘CPUå‘é€ä¸­æ–­ä¿¡å·</span>
    â†“
<span class="hljs-section">t3: CPUä¸­æ–­å½“å‰æŒ‡ä»¤ï¼Œä¿å­˜å¯„å­˜å™¨</span>
    â†“
<span class="hljs-section">t4: è·³è½¬åˆ°å†…æ ¸ä¿¡å·å¤„ç†ä»£ç ï¼ˆCï¼‰</span>
    â†“
<span class="hljs-section">t5: å†…æ ¸è°ƒç”¨Goæ³¨å†Œçš„sigtrampï¼ˆæ±‡ç¼–ï¼‰</span>
    â†“
<span class="hljs-section">t6: sigtrampä¿å­˜å®Œæ•´ä¸Šä¸‹æ–‡ï¼Œè°ƒç”¨sighandlerï¼ˆGoï¼‰</span>
    â†“  
<span class="hljs-section">t7: sighandlerè¯†åˆ«æ˜¯æŠ¢å ä¿¡å·ï¼Œè°ƒç”¨doasyncPreempt</span>
    â†“
<span class="hljs-section">t8: doasyncPreemptè°ƒç”¨mcall()åˆ‡æ¢åˆ°g0</span>
    â†“
<span class="hljs-section">t9: g0æ‰§è¡Œè°ƒåº¦ï¼Œé€‰G2</span>
</code></pre>
<p>æŠ¢å çš„å±€é™ï¼šå³ä½¿æœ‰æŠ¢å ï¼ŒGoä»ä¸æ˜¯<strong>å®Œå…¨å®æ—¶</strong>çš„</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// è¿™äº›æƒ…å†µå¯èƒ½å»¶è¿ŸæŠ¢å ï¼š</span>
<span class="hljs-number">1.</span> Gåœ¨æ‰§è¡Œä¸å¯æŠ¢å çš„ç³»ç»Ÿè°ƒç”¨
<span class="hljs-number">2.</span> Gåœ¨ä¿®æ”¹è¿è¡Œæ—¶å…³é”®æ•°æ®ç»“æ„ï¼ˆæŒé”ï¼‰
<span class="hljs-number">3.</span> ä¿¡å·è¢«é˜»å¡æˆ–å»¶è¿Ÿä¼ é€’

<span class="hljs-comment">// æ‰€ä»¥Goæ–‡æ¡£è¯´ï¼š</span>
<span class="hljs-comment">// "Goroutinesæ²¡æœ‰è¶…æ—¶æ¦‚å¿µ"</span>
<span class="hljs-comment">// ä¸èƒ½ä¾èµ–æŠ¢å åšè¶…æ—¶æ§åˆ¶</span>
</code></pre>
<p><strong>æ­£ç¡®çš„è¶…æ—¶æ§åˆ¶æ–¹å¼ï¼š</strong></p>
<p>é”™è¯¯æ§åˆ¶</p>
<pre><code class="hljs language-scss" lang="scss">go <span class="hljs-built_in">func</span>() {
    <span class="hljs-built_in">doWork</span>()  <span class="hljs-comment">// å¯èƒ½è¿è¡Œå¾ˆä¹…</span>
    <span class="hljs-comment">// æœŸæœ›1ç§’è¶…æ—¶ï¼Ÿä¸ä¿è¯ï¼</span>
}()
</code></pre>
<p>æ­£ç¡®æ§åˆ¶</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ–¹æ³•1ï¼šcontext.WithTimeout</span>
ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">1</span>*time.Second)
<span class="hljs-keyword">defer</span> cancel()

<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">select</span> {          <span class="hljs-comment">// goroutineå¯åŠ¨ï¼Œç›‘å¬ä¸¤ä¸ªchannel</span>
    <span class="hljs-keyword">case</span> &lt;-ctx.Done():       <span class="hljs-comment">// 1ç§’åctx.Done()å¯è¯»</span>
        <span class="hljs-keyword">return</span>  
    <span class="hljs-keyword">case</span> result := &lt;-doWorkAsync(): <span class="hljs-comment">// å¦‚æœdoWorkAsync()å…ˆè¿”å›ç»“æœ</span>
        <span class="hljs-comment">// æ­£å¸¸å®Œæˆ</span>
    }
}()

<span class="hljs-comment">// æ–¹æ³•2ï¼šå¸¦è¶…æ—¶çš„channelæ“ä½œ</span>
<span class="hljs-keyword">select</span> {
<span class="hljs-keyword">case</span> result := &lt;-ch:
    <span class="hljs-comment">// æ­£å¸¸</span>
<span class="hljs-keyword">case</span> &lt;-time.After(<span class="hljs-number">1</span> * time.Second):
    <span class="hljs-comment">// è¶…æ—¶</span>
}

<span class="hljs-comment">// æ–¹æ³•3ï¼šå®šæœŸæ£€æŸ¥é€€å‡ºæ ‡å¿—</span>
stop := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">bool</span>)
<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">for</span> {
        <span class="hljs-keyword">select</span> {
        <span class="hljs-keyword">case</span> &lt;-stop:
            <span class="hljs-keyword">return</span>
        <span class="hljs-keyword">default</span>:
            doChunkOfWork()   <span class="hljs-comment">// doChunkOfWork()Â æ‰§è¡Œåç«‹å³å†æ¬¡æ£€æŸ¥stop</span>
        }
    }
}()
time.Sleep(<span class="hljs-number">1</span> * time.Second)
<span class="hljs-built_in">close</span>(stop)  <span class="hljs-comment">// è¯·æ±‚åœæ­¢</span>
<span class="hljs-comment">// å…³é—­channelçš„æ•ˆæœï¼š</span>
<span class="hljs-comment">// 1. æ‰€æœ‰ä»è¿™ä¸ªchannelæ¥æ”¶çš„æ“ä½œç«‹å³è¿”å›é›¶å€¼</span>
<span class="hljs-comment">// 2. ä¸å†é˜»å¡</span>
<span class="hljs-comment">// 3. å¯ä»¥é€šçŸ¥å¤šä¸ªæ¥æ”¶è€…</span>
</code></pre>
<h2 data-id="heading-27">äº”. work-stealing</h2>
<p>Work-Stealingæ˜¯Goè°ƒåº¦å™¨çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼šç©ºé—²çš„Pä»å¿™ç¢Œçš„Pçš„æœ¬åœ°é˜Ÿåˆ—å·ä¸€åŠGoroutineè¿‡æ¥æ‰§è¡Œï¼Œå®ç°è‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼Œå‡å°‘ç©ºé—²ï¼Œæé«˜CPUåˆ©ç”¨ç‡ã€‚</p>
<h3 data-id="heading-28">5.1 å·¥ä½œåŸç†ï¼š</h3>
<h4 data-id="heading-29">1) ä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼Ÿ</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findRunnable</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// å½“Pè‡ªå·±çš„é˜Ÿåˆ—ä¸ºç©ºæ—¶...</span>
    <span class="hljs-keyword">if</span> è‡ªå·±é˜Ÿåˆ—ç©º &amp;&amp; å…¨å±€é˜Ÿåˆ—ç©º {
        <span class="hljs-comment">// å°è¯•ä»å…¶ä»–På·å·¥ä½œ</span>
        gp := runqsteal(pp)
        <span class="hljs-keyword">if</span> gp != <span class="hljs-literal">nil</span> {
            <span class="hljs-keyword">return</span> gp  <span class="hljs-comment">// å·åˆ°å·¥ä½œäº†ï¼</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-30">2) æ€ä¹ˆå·ï¼Ÿ</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">runqsteal</span><span class="hljs-params">(pp *p)</span></span> *g {
    <span class="hljs-comment">// 1. éšæœºé€‰ä¸€ä¸ªå…¶ä»–P</span>
    victim := éšæœºé€‰æ‹©ä¸€ä¸ªP
    
    <span class="hljs-comment">// 2. å·å®ƒæœ¬åœ°é˜Ÿåˆ—**ä¸€åŠ**çš„G</span>
    <span class="hljs-comment">//    æ¯”å¦‚ï¼švictimæœ‰10ä¸ªGï¼Œå·5ä¸ªè¿‡æ¥</span>
    half := victimé˜Ÿåˆ—é•¿åº¦ / <span class="hljs-number">2</span>
    
    <span class="hljs-comment">// 3. æŠŠå·æ¥çš„Gæ”¾åˆ°è‡ªå·±é˜Ÿåˆ—</span>
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; half; i++ {
        g := victim.pop()  <span class="hljs-comment">// ä»victimé˜Ÿåˆ—å–</span>
        pp.push(g)         <span class="hljs-comment">// æ”¾åˆ°è‡ªå·±é˜Ÿåˆ—</span>
    }
}
</code></pre>
<h3 data-id="heading-31">5.2 ä¸ºä»€ä¹ˆéœ€è¦Work-Stealingï¼Ÿ</h3>
<pre><code class="hljs language-makefile" lang="makefile">// P3ã€P4ä»P1ã€P2å·å·¥ä½œ
<span class="hljs-section">P1: 10 â†’ 5ä¸ªG  (è¢«å·èµ°5ä¸ª)</span>
<span class="hljs-section">P2: 10 â†’ 5ä¸ªG  (è¢«å·èµ°5ä¸ª)  </span>
<span class="hljs-section">P3: 0 â†’ 5ä¸ªG  (å·äº†P1çš„5ä¸ª)</span>
<span class="hljs-section">P4: 0 â†’ 5ä¸ªG  (å·äº†P2çš„5ä¸ª)</span>
// ç°åœ¨4ä¸ªPéƒ½æœ‰5ä¸ªGï¼Œè´Ÿè½½å‡è¡¡ï¼
</code></pre>
<h3 data-id="heading-32">5.3 Work-Stealingçš„ä¼˜åŠ¿ï¼š</h3>
<h4 data-id="heading-33">1) å‡å°‘é”ç«äº‰</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ¯ä¸ªPæ“ä½œè‡ªå·±çš„é˜Ÿåˆ—ï¼ˆæ— é”ï¼‰</span>
<span class="hljs-comment">// åªæœ‰å·çªƒæ—¶æ‰éœ€è¦é”å…¶ä»–Pçš„é˜Ÿåˆ—</span>
<span class="hljs-comment">// å¤§éƒ¨åˆ†æ—¶é—´æ— ç«äº‰</span>
</code></pre>
<h4 data-id="heading-34">2) åˆ©ç”¨å±€éƒ¨æ€§</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// Gé€šå¸¸åœ¨è‡ªå·±çš„Pä¸Šæ‰§è¡Œ</span>
<span class="hljs-comment">// åªæœ‰Pç©ºé—²æ—¶æ‰å»å·</span>
<span class="hljs-comment">// ä¿æŒCPUç¼“å­˜çƒ­åº¦</span>
</code></pre>
<h4 data-id="heading-35">3) è‡ªé€‚åº”çš„è´Ÿè½½å‡è¡¡</h4>
<pre><code class="hljs language-less" lang="less">/ å¿™çš„<span class="hljs-selector-tag">P</span>ä¸ä¼šè¢«è¿‡åº¦å¹²æ‰°
<span class="hljs-comment">// é—²çš„Pè‡ªåŠ¨æ‰¾æ´»å¹²</span>
<span class="hljs-comment">// æ— éœ€ä¸­å¤®è°ƒåº¦å™¨</span>
</code></pre>
<h2 data-id="heading-36">å…­. påˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿ</h2>
<p>På…¶å®ä¸è°ƒç”¨ä»»ä½•æ–¹æ³•ï¼Œå®ƒåªæ˜¯ä¸ªè¢«æ“ä½œçš„"èµ„æºåŒ…"ã€‚<strong>Pä»€ä¹ˆä¹Ÿä¸å¹²ï¼Œåªæ˜¯è¢«g/g0è¯»å†™çš„æ•°æ®ç»“æ„ã€‚</strong></p>
<p>På°±åƒ"å·¥ä½œå°"ï¼š<strong>å·¥ä½œå°ä¸ä¼šè‡ªå·±å¹²æ´»</strong>ï¼Œå·¥äººï¼ˆgï¼‰ç”¨å·¥å…·ï¼ˆmï¼‰åœ¨å·¥ä½œå°ä¸Šå¹²æ´»</p>
<p>è™½ç„¶Pä¸è°ƒç”¨æ–¹æ³•ï¼Œä½†å®ƒæ˜¯<strong>å…³é”®çš„èµ„æºç®¡ç†è€…</strong>ï¼š<strong>Pæä¾›æœ¬åœ°é˜Ÿåˆ—ã€ç¼“å­˜ç­‰èµ„æºï¼Œä½†æ‰€æœ‰æ“ä½œéƒ½æ˜¯G/g0åœ¨å¯¹Pè¿›è¡Œè¯»å†™ã€‚è¿™æ˜¯Goè°ƒåº¦å™¨"Gä¸­å¿ƒ"è®¾è®¡å“²å­¦çš„ä½“ç°ã€‚</strong></p>
<p>æ—¢ç„¶ï¼Œpè¿™ä¸ªç»“æ„ä½“ï¼Œåªæ˜¯ä¸€ä¸ªè¢«gå’Œg0æ“ä½œçš„æ•°æ®ç»“æ„ï¼Œé‚£ä¸ºå•¥ï¼Œéƒ½è¯´processoræ˜¯gmpä¸­æ ¸å¿ƒçš„è°ƒåº¦å™¨ï¼Œæ˜æ˜å®ƒå•¥ä¹Ÿæ²¡å¹²ï¼Ÿ</p>
<h3 data-id="heading-37">6.1 è¯´Pæ˜¯"æ ¸å¿ƒè°ƒåº¦å™¨"æ˜¯ä»æ¶æ„å’Œæ€§èƒ½è§’åº¦è¯´çš„</h3>
<p>1.Â å¹¶è¡Œåº¦æ§åˆ¶ä¸­å¿ƒ</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ç³»ç»Ÿèƒ½åŒæ—¶è¿è¡Œå¤šå°‘ä¸ªGï¼Ÿç”±Pçš„æ•°é‡å†³å®šï¼</span>
GOMAXPROCS = <span class="hljs-number">4</span>  <span class="hljs-comment">// â† åˆ›å»º4ä¸ªP</span>
<span class="hljs-comment">// æœ€å¤š4ä¸ªGçœŸæ­£å¹¶è¡Œæ‰§è¡Œ</span>
<span class="hljs-comment">// Pæ˜¯å¹¶è¡Œåº¦çš„"é—¸é—¨"</span>
</code></pre>
<p>2.Â æœ¬åœ°åŒ–è°ƒåº¦ä¸­å¿ƒ</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ²¡æœ‰Pï¼šæ‰€æœ‰mç«äº‰ä¸€ä¸ªå…¨å±€é˜Ÿåˆ— â†’ é”ç«äº‰ä¸¥é‡</span>
<span class="hljs-comment">// æœ‰Pï¼šæ¯ä¸ªPæœ‰æœ¬åœ°é˜Ÿåˆ— â†’ å‡å°‘90%é”ç«äº‰</span>

<span class="hljs-comment">// è°ƒåº¦æ€§èƒ½æå‡10å€+çš„å…³é”®ï¼</span>
</code></pre>
<p>3.Â CPUäº²å’Œæ€§é”šç‚¹</p>
<pre><code class="hljs language-go" lang="go">Mæ˜¯æµåŠ¨çš„ï¼ˆçº¿ç¨‹å¯èƒ½è¢«OSè°ƒåº¦åˆ°ä¸åŒCPUæ ¸å¿ƒï¼‰
Pæ˜¯å›ºå®šçš„ï¼ˆæ¯ä¸ªPå°½é‡ç»‘å®šåˆ°å›ºå®šCPUæ ¸å¿ƒï¼‰

G â†’ ç»‘å®šåˆ° â†’ P â†’ äº²å’Œåˆ° â†’ CPUæ ¸å¿ƒ
      (è°ƒåº¦å…³ç³»)   (ç¼“å­˜ä¼˜åŒ–)
</code></pre>
<ol start="4">
<li>å·¥ä½œçªƒå–ï¼ˆWork Stealingï¼‰çš„æ¢çº½</li>
</ol>

<pre><code class="hljs language-css" lang="css">// å½“P1ç©ºé—²æ—¶ï¼Œå®ƒå·è°çš„å·¥ä½œï¼Ÿ
// å·å…¶ä»–<span class="hljs-selector-tag">P</span>çš„é˜Ÿåˆ—ï¼<span class="hljs-selector-tag">P</span>æ˜¯çªƒå–çš„å•ä½

func stealWork(pp *<span class="hljs-selector-tag">p</span>) {
    // éå†å…¶ä»–<span class="hljs-selector-tag">P</span>ï¼Œå·å®ƒä»¬çš„G
    for æ¯ä¸ªå…¶ä»–<span class="hljs-selector-tag">P</span> {
        ä»å…¶ä»–<span class="hljs-selector-tag">P</span><span class="hljs-selector-class">.runq</span>å·ä¸€åŠG
    }
}
</code></pre>
<h3 data-id="heading-38">6.2 Pçš„"è¢«åŠ¨æ ¸å¿ƒ"è®¾è®¡å“²å­¦</h3>
<p>Goè°ƒåº¦å™¨çš„åˆ›æ–°ï¼š</p>
<p>ä¼ ç»Ÿçº¿ç¨‹æ± ï¼š Workerï¼ˆä¸»åŠ¨ï¼‰ + Queueï¼ˆè¢«åŠ¨ï¼‰</p>
<p>Goçš„GMPï¼š     Gï¼ˆä¸»åŠ¨ï¼‰ + Pï¼ˆè¢«åŠ¨+æ™ºèƒ½ï¼‰ + Mï¼ˆæ‰§è¡Œï¼‰</p>
<p>Pçš„"æ™ºèƒ½è¢«åŠ¨"ï¼š</p>
<ol>
<li>æœ¬åœ°é˜Ÿåˆ—(256)       â† æ™ºèƒ½ç¼“å†²ï¼šå‡å°‘ç«äº‰</li>
<li>runnextæ§½ä½        â† æ™ºèƒ½ç¼“å­˜ï¼šä¸‹ä¸€ä¸ªç«‹å³æ‰§è¡Œ</li>
<li>å„ç§å†…å­˜æ±          â† æ™ºèƒ½å¤ç”¨ï¼šå‡å°‘åˆ†é…</li>
<li>çŠ¶æ€æœºç®¡ç†         â† P.status: _Pidle, _Prunning, _Psyscall, _Pdeadï¼Œé€šè¿‡çŠ¶æ€çŸ¥é“Påœ¨å¹²å˜›</li>
</ol>
<p>æ²¡æœ‰Pï¼ˆGo 1.0ä¹‹å‰ï¼‰ ï¼šBenchmarkè°ƒåº¦-4æ ¸: 100ä¸‡æ¬¡åˆ‡æ¢/ç§’</p>
<p>æœ‰Pï¼ˆGo 1.1å¼•å…¥Påï¼‰ï¼šBenchmarkè°ƒåº¦-4æ ¸: 5000ä¸‡æ¬¡åˆ‡æ¢/ç§’ æå‡50å€ï¼</p>
<h3 data-id="heading-39">6.3 è°ƒåº¦å™¨çœŸæ­£çš„å·¥ä½œæµ</h3>
<pre><code class="hljs language-vbnet" lang="vbnet">çœŸæ­£çš„<span class="hljs-string">"è°ƒåº¦å¤§è„‘"</span>æ˜¯ï¼šg0 + Pçš„æ•°æ®

g0ï¼ˆå†³ç­–ï¼‰ + Pï¼ˆæ•°æ®ï¼‰ = å®Œæ•´è°ƒåº¦å™¨
      â†“           â†“
    <span class="hljs-string">"åšä»€ä¹ˆ"</span>     <span class="hljs-string">"ç”¨ä»€ä¹ˆåš"</span>

æ¯”å¦‚ï¼š
<span class="hljs-symbol">g0:</span> <span class="hljs-string">"è¯¥æ‰§è¡Œä¸‹ä¸€ä¸ªGäº†"</span>
    â†“
<span class="hljs-symbol">g0:</span> æŸ¥çœ‹å½“å‰P.runqï¼ˆæ•°æ®åœ¨Pä¸­ï¼‰
    â†“  
<span class="hljs-symbol">g0:</span> å–å‡ºGï¼ˆæ“ä½œPçš„å­—æ®µï¼‰
    â†“
<span class="hljs-symbol">g0:</span> æ‰§è¡ŒG
</code></pre>
<p>Pæä¾›äº†è°ƒåº¦éœ€è¦çš„æ‰€æœ‰æ•°æ®ï¼Œg0æä¾›å†³ç­–é€»è¾‘</p>
<h3 data-id="heading-40">6.4 æ‰€ä»¥ï¼Œä¸åº”è¯¥è¯´"Pæ˜¯æ ¸å¿ƒè°ƒåº¦å™¨"</h3>
<p>æ›´å‡†ç¡®çš„è¯´æ³•ï¼š</p>
<ul>
<li><strong>g0</strong>ï¼šè°ƒåº¦å™¨çš„<strong>é€»è¾‘æ ¸å¿ƒ</strong>ï¼ˆåšå†³ç­–ï¼‰</li>
<li><strong>P</strong>ï¼šè°ƒåº¦å™¨çš„<strong>æ•°æ®æ ¸å¿ƒ</strong>ï¼ˆæä¾›èµ„æºï¼‰</li>
<li><strong>M</strong>ï¼šè°ƒåº¦å™¨çš„<strong>æ‰§è¡Œæ ¸å¿ƒ</strong>ï¼ˆè·‘ä»£ç ï¼‰</li>
<li><strong>G</strong>ï¼šè°ƒåº¦å™¨çš„<strong>ä»»åŠ¡æ ¸å¿ƒ</strong>ï¼ˆè¦æ‰§è¡Œçš„å·¥ä½œï¼‰</li>
</ul>
<h3 data-id="heading-41">6.5 æºç ä¸­çš„ä½“ç°</h3>
<p>åœ¨runtimeåŒ…çš„proc.goæ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// One round of scheduler: find a runnable goroutine and execute it.</span>
<span class="hljs-comment">// Never returns.</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">schedule</span><span class="hljs-params">()</span></span> {
	mp := getg().m

	<span class="hljs-keyword">if</span> mp.locks != <span class="hljs-number">0</span> {
		throw(<span class="hljs-string">"schedule: holding locks"</span>)
	}

	<span class="hljs-keyword">if</span> mp.lockedg != <span class="hljs-number">0</span> {
		stoplockedm()
		execute(mp.lockedg.ptr(), <span class="hljs-literal">false</span>) <span class="hljs-comment">// Never returns.</span>
	}

	<span class="hljs-keyword">if</span> mp.incgo {
		throw(<span class="hljs-string">"schedule: in cgo"</span>)
	}

top:
	pp := mp.p.ptr()
	pp.preempt = <span class="hljs-literal">false</span>

	<span class="hljs-keyword">if</span> mp.spinning &amp;&amp; (pp.runnext != <span class="hljs-number">0</span> || pp.runqhead != pp.runqtail) {
		throw(<span class="hljs-string">"schedule: spinning with local work"</span>)
	}

	gp, inheritTime, tryWakeP := findRunnable() <span class="hljs-comment">// blocks until work is available</span>

	<span class="hljs-keyword">if</span> debug.dontfreezetheworld &gt; <span class="hljs-number">0</span> &amp;&amp; freezing.Load() {
		lock(&amp;deadlock)
		lock(&amp;deadlock)
	}

	<span class="hljs-keyword">if</span> mp.spinning {
		resetspinning()
	}

	<span class="hljs-keyword">if</span> sched.disable.user &amp;&amp; !schedEnabled(gp) {
		lock(&amp;sched.lock)
		<span class="hljs-keyword">if</span> schedEnabled(gp) {
			unlock(&amp;sched.lock)
		} <span class="hljs-keyword">else</span> {
			sched.disable.runnable.pushBack(gp)
			sched.disable.n++
			unlock(&amp;sched.lock)
			<span class="hljs-keyword">goto</span> top
		}
	}

	<span class="hljs-keyword">if</span> tryWakeP {
		wakep()
	}
	<span class="hljs-keyword">if</span> gp.lockedm != <span class="hljs-number">0</span> {
		startlockedm(gp)
		<span class="hljs-keyword">goto</span> top
	}

	execute(gp, inheritTime)
}
</code></pre>
<p><strong>æ•´ä¸ªè°ƒåº¦å¾ªç¯éƒ½å›´ç»•ç€"å½“å‰P"çš„æ•°æ®æ“ä½œï¼</strong></p>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯g0è°ƒç”¨ï¼Œåœ¨go runä¹‹åï¼Œå°±å¼€å§‹å¾ªç¯ï¼Œå…¶ä¸­çš„getg()å°±æ˜¯å–å¾—g0æœ¬èº«</p>
<p>å…·ä½“åˆ°ä»£ç ä¸­çš„å¾ªç¯è·¯å¾„ï¼š</p>
<ol>
<li>æ™®é€šè°ƒåº¦å¾ªç¯</li>
</ol>

<pre><code class="hljs language-scss" lang="scss">func <span class="hljs-built_in">schedule</span>() {
    gp := <span class="hljs-built_in">findRunnable</span>()      // <span class="hljs-number">1</span>. æ‰¾ä¸ªå¯è¿è¡Œçš„G
    <span class="hljs-built_in">execute</span>(gp, inheritTime)  // <span class="hljs-number">2</span>. æ‰§è¡Œå®ƒï¼ˆæ°¸ä¸è¿”å›ï¼ï¼‰
}

func <span class="hljs-built_in">execute</span>(gp *g, inheritTime bool) {
    <span class="hljs-comment">// Mè®¾ç½®å½“å‰G</span>
    _g_<span class="hljs-selector-class">.m</span><span class="hljs-selector-class">.curg</span> = gp  <span class="hljs-comment">// M â† G</span>
    gp<span class="hljs-selector-class">.m</span> = _g_<span class="hljs-selector-class">.m</span>     <span class="hljs-comment">// G â† M    g.må’Œm.gcurgçš„èµ‹å€¼æ˜¯åœ¨executeä¸­å®Œæˆçš„</span>

    <span class="hljs-comment">// Må¼€å§‹æ‰§è¡ŒGçš„ä»£ç </span>
    <span class="hljs-built_in">gogo</span>(&amp;gp.sched)  <span class="hljs-comment">// 3. åˆ‡æ¢åˆ°ç”¨æˆ·Gï¼ˆä¸è¿”å›ï¼ï¼‰äº‹å®ä¸Šgogoåªè´Ÿè´£æ•°æ®æ¢å¤</span>
}

<span class="hljs-comment">// ç”¨æˆ·Gæ‰§è¡Œ...</span>
<span class="hljs-comment">// ç”¨æˆ·Gè°ƒç”¨ runtime.Gosched() æˆ–é˜»å¡æ—¶ï¼š</span>
func <span class="hljs-built_in">gosched_m</span>(gp *g) {
    <span class="hljs-comment">// 4. ç”¨æˆ·Gé€šè¿‡mcall()åˆ‡æ¢åˆ°g0æ‰§è¡Œè¿™ä¸ªå‡½æ•°</span>
    <span class="hljs-built_in">schedule</span>()  <span class="hljs-comment">// 5. é‡æ–°è°ƒåº¦ï¼å›åˆ°æ­¥éª¤1</span>
}
</code></pre>
<p>è¿™é‡Œ<code>execute()</code>Â è°ƒç”¨Â <code>gogo()</code>Â å<strong>ä¸è¿”å›</strong>ï¼æ‰€ä»¥Â <code>schedule()</code>Â ä¹Ÿ<strong>ä¸è¿”å›</strong>ï¼</p>
<p><strong><code>findRunnable()</code>Â æ˜¯è°ƒåº¦å™¨çš„"æ‰¾æ´»å¹²"å‡½æ•°</strong>ï¼Œå®ƒæŒ‰ä¼˜å…ˆçº§ä»å¤šä¸ªåœ°æ–¹å¯»æ‰¾å¯è¿è¡Œçš„Gï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">findRunnable() çš„æŸ¥æ‰¾é¡ºåºï¼š
<span class="hljs-bullet">1.</span> å½“å‰Pçš„runnextï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
<span class="hljs-bullet">2.</span> å½“å‰Pçš„æœ¬åœ°é˜Ÿåˆ—
<span class="hljs-bullet">3.</span> å…¨å±€é˜Ÿåˆ—  
<span class="hljs-bullet">4.</span> ç½‘ç»œè½®è¯¢å™¨ï¼ˆnetpollï¼‰
<span class="hljs-bullet">5.</span> ä»å…¶ä»–På·å·¥ä½œï¼ˆwork stealingï¼‰
<span class="hljs-bullet">6.</span> å¦‚æœè¿˜æ‰¾ä¸åˆ° â†’ ä¼‘çœ ç­‰å¾…
</code></pre>
<p>2.  ä¸¤ç§Â goto topÂ çš„æƒ…å†µ</p>
<p>æƒ…å†µ1ï¼šGè¢«é”å®šåˆ°ç‰¹å®šçš„Mï¼ˆ<code>gp.lockedm != 0</code>ï¼‰</p>
<pre><code class="hljs language-scss" lang="scss">if gp<span class="hljs-selector-class">.lockedm</span> != <span class="hljs-number">0</span> {
    <span class="hljs-comment">// è¿™ä¸ªGå¿…é¡»è¿è¡Œåœ¨ç‰¹å®šçš„Mä¸Š</span>
    <span class="hljs-comment">// æ¯”å¦‚ï¼šcgoå›è°ƒã€æŸäº›ç³»ç»Ÿè°ƒç”¨</span>
    <span class="hljs-built_in">startlockedm</span>(gp)  <span class="hljs-comment">// æŠŠPäº¤ç»™é‚£ä¸ªMï¼Œè‡ªå·±é˜»å¡</span>
    goto <span class="hljs-attribute">top</span>          <span class="hljs-comment">// é‡æ–°æ‰¾å…¶ä»–Gæ‰§è¡Œ</span>
}
</code></pre>
<p>æƒ…å†µ2ï¼šç”¨æˆ·è°ƒåº¦è¢«ç¦ç”¨ï¼ˆ<code>sched.disable.user</code>ï¼‰</p>
<pre><code class="hljs language-scss" lang="scss">if sched<span class="hljs-selector-class">.disable</span><span class="hljs-selector-class">.user</span> &amp;&amp; !<span class="hljs-built_in">schedEnabled</span>(gp) {
    <span class="hljs-comment">// ç”¨æˆ·Gè°ƒåº¦è¢«ä¸´æ—¶ç¦ç”¨ï¼ˆæ¯”å¦‚åœ¨STWåƒåœ¾å›æ”¶ï¼‰</span>
    <span class="hljs-comment">// ä½†GC workerç­‰ç³»ç»ŸGå¯ä»¥è¿è¡Œ</span>
    sched<span class="hljs-selector-class">.disable</span><span class="hljs-selector-class">.runnable</span><span class="hljs-selector-class">.pushBack</span>(gp)  <span class="hljs-comment">// æ”¾å›ç‰¹æ®Šé˜Ÿåˆ—</span>
    goto <span class="hljs-attribute">top</span>  <span class="hljs-comment">// è·³è¿‡è¿™ä¸ªç”¨æˆ·Gï¼Œé‡æ–°æ‰¾</span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·çœ‹æµè§ˆå™¨åå°ï¼Œå‘ç°å®ƒæ¯”æˆ‘å¿™å¤šäº†]]></title>    <link>https://juejin.cn/post/7580263284338311209</link>    <guid>https://juejin.cn/post/7580263284338311209</guid>    <pubDate>2025-12-06T16:07:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580263284338311209" data-draft-id="7580203347703857167" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·çœ‹æµè§ˆå™¨åå°ï¼Œå‘ç°å®ƒæ¯”æˆ‘å¿™å¤šäº†"/> <meta itemprop="keywords" content="å‰ç«¯,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-12-06T16:07:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="T___T"/> <meta itemprop="url" content="https://juejin.cn/user/1599155645973066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·çœ‹æµè§ˆå™¨åå°ï¼Œå‘ç°å®ƒæ¯”æˆ‘å¿™å¤šäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1599155645973066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    T___T
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T16:07:59.000Z" title="Sat Dec 06 2025 16:07:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸ºå•¥ä»¥å‰ IE è€â€œå´©æºƒâ€ï¼Œè€Œç°åœ¨å¼€ä¸€å †æ ‡ç­¾é¡µçš„ Chrome è¿˜èƒ½æ¯”è¾ƒç¨³ï¼Ÿç­”æ¡ˆéƒ½è—åœ¨æµè§ˆå™¨çš„ã€Œè¿›ç¨‹æ¨¡å‹ã€é‡Œã€‚</p>
</blockquote>
<p>ä½œä¸ºä¸€ä¸ªè¿˜åœ¨å­¦ä¹ å‰ç«¯çš„åŒå­¦ï¼Œæˆ‘ç»å¸¸å¬åˆ°å‡ ä¸ªå…³é”®è¯ï¼š<br/>
è¿›ç¨‹ã€çº¿ç¨‹ã€å¤šè¿›ç¨‹æµè§ˆå™¨ã€æ¸²æŸ“è¿›ç¨‹ã€V8ã€äº‹ä»¶å¾ªç¯â€¦â€¦</p>
<p>ä¸‹é¢å°±æ˜¯æˆ‘ç›®å‰çš„ç†è§£ï¼Œç®—æ˜¯ä¸€ç¯‡å­¦ä¹ ç¬”è®°å¼çš„åˆ†äº«</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆæŠŠæ¦‚å¿µæ‹æ¸…ï¼šè¿›ç¨‹ vs çº¿ç¨‹</h2>
<ul>
<li>
<p><strong>è¿›ç¨‹ï¼ˆProcessï¼‰</strong></p>
<ul>
<li>æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•ä½ã€‚</li>
<li>æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€å¥æŸ„ã€æ–‡ä»¶ç­‰èµ„æºã€‚</li>
<li>ä¸åŒè¿›ç¨‹é—´é»˜è®¤äº’ç›¸éš”ç¦»ï¼Œé€šä¿¡è¦é€šè¿‡ IPCã€‚</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹ï¼ˆThreadï¼‰</strong></p>
<ul>
<li>CPUÂ è°ƒåº¦ã€æ‰§è¡Œä»£ç çš„æœ€å°å•ä½ã€‚</li>
<li>å…±äº«æ‰€å±è¿›ç¨‹çš„èµ„æºï¼ˆå†…å­˜ã€æ–‡ä»¶å¥æŸ„ç­‰ï¼‰ã€‚</li>
<li>ä¸€ä¸ªè¿›ç¨‹é‡Œå¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚</li>
</ul>
</li>
</ul>
<p>ç®€å•ç†è§£ï¼š</p>
<ul>
<li><strong>è¿›ç¨‹ = ä¸€ä¸ªâ€œåº”ç”¨å®ä¾‹â€</strong> ï¼ˆå¼€ä¸€ä¸ªæµè§ˆå™¨çª—å£å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼‰ã€‚</li>
<li><strong>çº¿ç¨‹ = åº”ç”¨é‡Œçš„å¾ˆå¤šâ€œå°å·¥äººâ€</strong> ï¼ˆä¸€ä¸ªè´Ÿè´£æ¸²æŸ“é¡µé¢ï¼Œä¸€ä¸ªè´Ÿè´£ç½‘ç»œè¯·æ±‚â€¦â€¦ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€å•è¿›ç¨‹æµè§ˆå™¨ï¼šæ—§æ—¶ä»£çš„ IE æ¨¡å‹</h2>
<p>æ—©æœŸçš„æµè§ˆå™¨ï¼ˆå¦‚æ—§ç‰ˆ IEï¼‰åŸºæœ¬éƒ½æ˜¯<strong>å•è¿›ç¨‹æ¶æ„</strong>ï¼šæ•´ä¸ªæµè§ˆå™¨åªæœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œé‡Œé¢å¼€å¤šä¸ªçº¿ç¨‹æ¥å¹²æ´»ã€‚</p>
<p>å¯ä»¥æƒ³è±¡æˆè¿™æ ·ä¸€å¼ å›¾ï¼ˆå¯¹åº”ä½ ç»™çš„â€œå•è¿›ç¨‹æµè§ˆå™¨â€é‚£å¼ å›¾ï¼‰ï¼š</p>
<ul>
<li>
<p>é¡¶éƒ¨æ˜¯ã€Œä»£ç  / æ•°æ® / æ–‡ä»¶ã€ç­‰èµ„æºã€‚</p>
</li>
<li>
<p>ä¸‹é¢æœ‰å¤šä¸ªçº¿ç¨‹ï¼š</p>
<ul>
<li><strong>é¡µé¢çº¿ç¨‹</strong>ï¼šè´Ÿè´£é¡µé¢æ¸²æŸ“ã€å¸ƒå±€ã€ç»˜åˆ¶ã€‚</li>
<li><strong>ç½‘ç»œçº¿ç¨‹</strong>ï¼šè´Ÿè´£ç½‘ç»œè¯·æ±‚ã€‚</li>
<li><strong>å…¶ä»–çº¿ç¨‹</strong>ï¼šä¾‹å¦‚æ’ä»¶ã€å®šæ—¶ä»»åŠ¡ç­‰ã€‚</li>
</ul>
</li>
<li>
<p>æ‰€æœ‰çº¿ç¨‹å…±äº«åŒä¸€ä»½è¿›ç¨‹èµ„æºã€‚</p>
</li>
</ul>
<p>åœ¨è¿™ä¸ªæ¨¡å‹ä¸‹ï¼š</p>
<ul>
<li>é¡µé¢æ¸²æŸ“ã€JavaScript æ‰§è¡Œã€æ’ä»¶è¿è¡Œï¼Œéƒ½æŒ¤åœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œã€‚</li>
<li>æŸä¸ªæ’ä»¶æˆ–è„šæœ¬ä¸€æ—¦å´©æºƒã€æ­»å¾ªç¯ã€å†…å­˜æ³„æ¼ï¼Œ<strong>æ•´ä¸ªæµè§ˆå™¨éƒ½ä¼šè¢«æ‹–å®</strong>ã€‚</li>
<li>å¤šå¼€å‡ ä¸ªæ ‡ç­¾é¡µï¼Œæœ¬è´¨ä¸Šä¾æ—§æ˜¯åŒä¸€ä¸ªè¿›ç¨‹é‡Œçš„ä¸åŒé¡µé¢çº¿ç¨‹ï¼Œ <strong>â€œä¸€è£ä¿±è£ï¼Œä¸€æŸä¿±æŸâ€</strong> ã€‚</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯å¾ˆå¤šäººå¯¹ IEÂ çš„ç»å…¸å°è±¡ï¼š</p>
<blockquote>
<p>â€œå¤šå¼€å‡ ä¸ªé¡µé¢å°±å¡æ­»ï¼Œå´©ä¸€æ¬¡ï¼Œæ‰€æœ‰æ ‡ç­¾é¡µä¸€èµ·æ¶ˆå¤±â€ã€‚</p>
</blockquote>
<h2 data-id="heading-2">ä¸‰ã€å¤šè¿›ç¨‹æµè§ˆå™¨ï¼šChrome çš„ç°ä»£æ¶æ„</h2>
<p>ChromeÂ é‡‡ç”¨çš„æ˜¯<strong>å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹æ··åˆæ¶æ„</strong>ã€‚æ‰“å¼€æµè§ˆå™¨æ—¶ï¼Œå¤§è‡´ä¼šæ¶‰åŠè¿™äº›è¿›ç¨‹ï¼š</p>
<ul>
<li>
<p><strong>æµè§ˆå™¨ä¸»è¿›ç¨‹ï¼ˆBrowser Processï¼‰</strong></p>
<ul>
<li>è´Ÿè´£æµè§ˆå™¨ UIã€åœ°å€æ ã€ä¹¦ç­¾ã€å‰è¿›åé€€ç­‰ã€‚</li>
<li>ç®¡ç†å’Œè°ƒåº¦å…¶ä»–å­è¿›ç¨‹ï¼ˆç±»ä¼¼ä¸€ä¸ªå¤§ç®¡å®¶ï¼‰ã€‚</li>
<li>è´Ÿè´£éƒ¨åˆ†å­˜å‚¨ã€æƒé™ç®¡ç†ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¸²æŸ“è¿›ç¨‹ï¼ˆRender Processï¼‰</strong></p>
<ul>
<li>æ ¸å¿ƒä»»åŠ¡ï¼šæŠŠÂ HTML / CSS / JavaScript å˜æˆç”¨æˆ·å¯ä»¥äº¤äº’çš„é¡µé¢ã€‚</li>
<li>å¸ƒå±€å¼•æ“ï¼ˆå¦‚ Blinkï¼‰å’Œ JS å¼•æ“ï¼ˆå¦‚ V8ï¼‰éƒ½åœ¨è¿™é‡Œã€‚</li>
<li><strong>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ ‡ç­¾é¡µä¼šå¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“è¿›ç¨‹</strong>ã€‚</li>
</ul>
</li>
<li>
<p><strong>GPU è¿›ç¨‹ï¼ˆGPU Processï¼‰</strong></p>
<ul>
<li>è´Ÿè´£ 2DÂ / 3D ç»˜åˆ¶å’ŒåŠ é€Ÿï¼ˆåŠ¨ç”»ã€3DÂ å˜æ¢ç­‰ï¼‰ã€‚</li>
<li>ç»Ÿä¸€ä¸ºæµè§ˆå™¨å’Œå„æ¸²æŸ“è¿›ç¨‹æä¾›Â GPUÂ æœåŠ¡ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç½‘ç»œè¿›ç¨‹ï¼ˆNetwork Processï¼‰</strong></p>
<ul>
<li>è´Ÿè´£èµ„æºä¸‹è½½ã€ç½‘ç»œè¯·æ±‚ã€ç¼“å­˜ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ’ä»¶è¿›ç¨‹ï¼ˆPlugin Processï¼‰</strong></p>
<ul>
<li>è´Ÿè´£è¿è¡Œå¦‚Â Flashã€æ‰©å±•ç­‰æ’ä»¶ä»£ç ï¼Œé€šå¸¸æ”¾åœ¨æ›´ä¸¥æ ¼çš„æ²™ç®±é‡Œã€‚</li>
</ul>
</li>
</ul>
<p>ä½ ç»™çš„ç¬¬ä¸€å¼ å›¾ï¼Œå…¶å®å°±æ˜¯è¿™ä¹ˆä¸€ä¸ª<strong>å¤šè¿›ç¨‹æ¶æ„ç¤ºæ„å›¾</strong>ï¼šä¸­é—´æ˜¯ä¸»è¿›ç¨‹ï¼Œä¸¤ä¾§æ˜¯æ¸²æŸ“ã€ç½‘ç»œã€GPUã€æ’ä»¶ç­‰å­è¿›ç¨‹ï¼Œæœ‰çš„è¢«æ²™ç®±ä¿æŠ¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e809cf5310ff4cc5bddfb7988f7fb3a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVF9fX1Q=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765642138&amp;x-signature=aspBY1ZhvX7tTKTkp9YS%2B%2FDHTTc%3D" alt="download.png" loading="lazy"/></p>
<h2 data-id="heading-3">å››ã€å•è¿›ç¨‹ vs å¤šè¿›ç¨‹ï¼šæ ¸å¿ƒå·®å¼‚ä¸€è§ˆï¼ˆè¡¨æ ¼å¯¹æ¯”ï¼‰</h2>
<p>ä¸‹é¢è¿™å¼ è¡¨ï¼ŒæŠŠæ—§å¼å•è¿›ç¨‹æµè§ˆå™¨å’Œç°ä»£å¤šè¿›ç¨‹æµè§ˆå™¨çš„å·®å¼‚æ€»ç»“å‡ºæ¥ï¼Œé€‚åˆåœ¨æ–‡ç« ä¸­é‡ç‚¹å±•ç¤ºï¼š</p>













































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>å•è¿›ç¨‹æµè§ˆå™¨ï¼ˆå…¸å‹ï¼šæ—§ç‰ˆ IEï¼‰</th><th>å¤šè¿›ç¨‹æµè§ˆå™¨ï¼ˆå…¸å‹ï¼šChromeï¼‰</th></tr></thead><tbody><tr><td><strong>è¿›ç¨‹æ¨¡å‹</strong></td><td>æ•´ä¸ªæµè§ˆå™¨åŸºæœ¬åªæœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œå¤šæ ‡ç­¾é¡µåªæ˜¯ä¸åŒçº¿ç¨‹</td><td>æµè§ˆå™¨ä¸»è¿›ç¨‹Â + å¤šä¸ªå­è¿›ç¨‹ï¼ˆæ¸²æŸ“ã€ç½‘ç»œã€GPUã€æ’ä»¶â€¦ï¼‰ï¼Œæ ‡ç­¾é¡µé€šå¸¸ç‹¬ç«‹æ¸²æŸ“è¿›ç¨‹</td></tr><tr><td><strong>ç¨³å®šæ€§</strong></td><td>ä»»æ„çº¿ç¨‹ï¼ˆè„šæœ¬ã€æ’ä»¶ï¼‰å´©æºƒï¼Œå¯èƒ½æ‹–å®æ•´ä¸ªè¿›ç¨‹ï¼Œæµè§ˆå™¨æ•´ä½“å´©æºƒ</td><td>æŸä¸ªæ ‡ç­¾é¡µå´©æºƒåªå½±å“å¯¹åº”æ¸²æŸ“è¿›ç¨‹ï¼Œå…¶ä»–é¡µé¢åŸºæœ¬ä¸å—å½±å“</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>ä»£ç éƒ½åœ¨åŒä¸€è¿›ç¨‹è¿è¡Œï¼Œæƒé™è¾¹ç•Œæ¨¡ç³Šï¼Œæ”»å‡»é¢å¤§</td><td>åˆ©ç”¨å¤šè¿›ç¨‹ + æ²™ç®±ï¼šæ¸²æŸ“è¿›ç¨‹ã€æ’ä»¶è¿›ç¨‹è¢«é™åˆ¶è®¿é—®ç³»ç»Ÿèµ„æºï¼Œéœ€è¦é€šè¿‡ä¸»è¿›ç¨‹/IPC</td></tr><tr><td><strong>æ€§èƒ½ä½“éªŒ</strong></td><td>å¤šæ ‡ç­¾å…±äº«èµ„æºï¼ŒæŸä¸ªé¡µé¢å¡é¡¿ï¼Œå®¹æ˜“æ‹–æ…¢æ•´ä½“ï¼›UIÂ å’Œé¡µé¢æ¸²æŸ“è€¦åˆä¸¥é‡</td><td>ä¸åŒè¿›ç¨‹ä¹‹é—´å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨å¤šæ ¸ CPUï¼Œé‡é¡µé¢æ“ä½œä¸ä¼šè½»æ˜“é˜»å¡æ•´ä¸ªæµè§ˆå™¨ UI</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>å•è¿›ç¨‹å†…å­˜ç›¸å¯¹é›†ä¸­ï¼Œä½†ä¸€æ—¦æ³„æ¼éš¾ä»¥å›æ”¶ï¼›å´©æºƒæ—¶æŸå¤±å…¨éƒ¨çŠ¶æ€</td><td>å¤šè¿›ç¨‹ä¼šæœ‰ä¸€å®šå†…å­˜å†—ä½™ï¼Œä½†æŸä¸ªè¿›ç¨‹å…³é—­/å´©æºƒåï¼Œå…¶å†…å­˜å¯è¢«ç³»ç»Ÿç›´æ¥å›æ”¶</td></tr><tr><td><strong>æ’ä»¶å½±å“</strong></td><td>æ’ä»¶å´©æºƒÂ = æµè§ˆå™¨å´©æºƒï¼Œä½“éªŒæå·®</td><td>æ’ä»¶ç‹¬ç«‹è¿›ç¨‹ + æ²™ç®±ï¼Œå´©æºƒå½±å“æœ‰é™ï¼Œå¯ä»¥å•ç‹¬é‡å¯</td></tr><tr><td><strong>ç»´æŠ¤ä¸æ‰©å±•</strong></td><td>æ‰€æœ‰æ¨¡å—è€¦åˆåœ¨ä¸€èµ·ï¼Œæ”¹åŠ¨é£é™©å¤§</td><td>è¿›ç¨‹è¾¹ç•Œå¤©ç„¶åˆ†å±‚ï¼Œæ›´åˆ©äºæ¨¡å—åŒ–æ¼”è¿›å’Œå¤§è§„æ¨¡å·¥ç¨‹åŒ–</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36c471e1f886427a883a73e6bce702c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVF9fX1Q=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765642138&amp;x-signature=IoIhTuWmiOxy9NBMHMVH8SPaL28%3D" alt="download.png" loading="lazy"/></p>
<h2 data-id="heading-4">äº”ã€åˆ«è¢«â€œå¤šè¿›ç¨‹â€éª—äº†ï¼šJS ä¾ç„¶æ˜¯å•çº¿ç¨‹</h2>
<p>èŠåˆ°è¿™é‡Œï¼Œå¾ˆå¤šåŒå­¦å®¹æ˜“æ··æ·†ä¸€ä¸ªç‚¹ï¼š</p>
<blockquote>
<p>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ï¼Œé‚£Â JavaScriptÂ æ˜¯ä¸æ˜¯ä¹Ÿå¤šçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œäº†ï¼Ÿ</p>
</blockquote>
<p>ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼š<strong>ä¸»çº¿ç¨‹ä¸Šçš„ JavaScript ä¾ç„¶æ˜¯å•çº¿ç¨‹æ¨¡å‹</strong>ã€‚åŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li>
<p>åœ¨<strong>æ¸²æŸ“è¿›ç¨‹å†…éƒ¨</strong>ï¼Œæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹è´Ÿè´£ï¼š</p>
<ul>
<li>æ‰§è¡Œ JavaScriptã€‚</li>
<li>é¡µé¢å¸ƒå±€ã€ç»˜åˆ¶ã€‚</li>
<li>å¤„ç†ç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>JS ä»£ç ä»ç„¶éµå¾ªï¼š<strong>åŒæ­¥ä»»åŠ¡ç«‹å³æ‰§è¡Œï¼Œå¼‚æ­¥ä»»åŠ¡ä¸¢è¿›ä»»åŠ¡é˜Ÿåˆ—ï¼Œç”±äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰è°ƒåº¦</strong>ã€‚</p>
</li>
</ul>
<p>ä¸ºä»€ä¹ˆè¦åšæŒå•çº¿ç¨‹ï¼Ÿ</p>
<ul>
<li>DOMÂ æ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶æ”¹ DOMï¼Œé”ä¼šéå¸¸å¤æ‚ã€‚</li>
<li>å‰ç«¯å¼€å‘å¿ƒæ™ºæˆæœ¬å¯æ§ï¼›ä¸å¿…åƒå¤šçº¿ç¨‹è¯­è¨€é‚£æ ·åˆ°å¤„è€ƒè™‘é”å’Œç«æ€æ¡ä»¶ã€‚</li>
</ul>
<p>å¤šè¿›ç¨‹æ¶æ„åªæ˜¯æŠŠï¼š</p>
<ul>
<li>â€œè¿™ä¸ªé¡µé¢çš„ä¸»çº¿ç¨‹Â + æ¸²æŸ“Â +Â JSÂ å¼•æ“â€<br/>
æ”¾åœ¨ä¸€ä¸ª<strong>å•ç‹¬çš„è¿›ç¨‹</strong>é‡Œï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰ã€‚</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼š</p>
<ul>
<li>ä¸€ä¸ªé¡µé¢Â JSÂ å†™äº†æ­»å¾ªç¯ï¼Œä¼šå¡æ­»é‚£ä¸€ä¸ªæ ‡ç­¾é¡µã€‚</li>
<li>ä½†å…¶ä»–æ ‡ç­¾é¡µé€šå¸¸è¿˜èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä»¬åœ¨å®Œå…¨ä¸åŒçš„æ¸²æŸ“è¿›ç¨‹å†…ã€‚</li>
</ul>
<h2 data-id="heading-5">å…­ã€ä»æ¶æ„çœ‹ä½“éªŒï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬æ›´å–œæ¬¢ç°åœ¨çš„æµè§ˆå™¨ï¼Ÿ</h2>
<p>ç«™åœ¨å‰ç«¯å¼€å‘è€…è§’åº¦ï¼Œå¤šè¿›ç¨‹æ¶æ„å¸¦æ¥çš„ç›´æ¥æ”¶ç›Šæœ‰ï¼š</p>
<ul>
<li>
<p><strong>æ›´å¥½çš„å®¹é”™æ€§</strong></p>
</li>
<li>
<p><strong>æ›´é«˜çš„å®‰å…¨ç­‰çº§</strong></p>
</li>
<li>
<p><strong>æ›´é¡ºæ»‘çš„äº¤äº’ä½“éªŒ</strong></p>
</li>
<li>
<p><strong>æ›´å®¹æ˜“å·¥ç¨‹åŒ–æ¼”è¿›</strong></p>
</li>
</ul>
<p>å½“ç„¶ï¼Œä»£ä»·ä¹Ÿå¾ˆç°å®ï¼š<strong>å¤šè¿›ç¨‹ = æ›´é«˜çš„å†…å­˜å ç”¨</strong>ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼š</p>
<ul>
<li>å¤šå¼€å‡ åä¸ªæ ‡ç­¾ï¼Œä»»åŠ¡ç®¡ç†å™¨é‡Œèƒ½çœ‹åˆ°å¾ˆå¤šæµè§ˆå™¨ç›¸å…³è¿›ç¨‹ã€‚</li>
<li>ä½†æ¢æ¥çš„æ˜¯æ›´å¥½çš„ç¨³å®šæ€§ã€å®‰å…¨æ€§å’Œæ‰©å±•æ€§â€”â€”åœ¨ç°ä»£ç¡¬ä»¶ä¸‹ï¼Œè¿™æ˜¯å¯ä»¥æ¥å—çš„Â trade-offã€‚</li>
</ul>
<h2 data-id="heading-6">ä¸ƒã€æ€»ç»“</h2>
<ul>
<li>æ—©æœŸæµè§ˆå™¨é‡‡ç”¨<strong>å•è¿›ç¨‹ + å¤šçº¿ç¨‹</strong>æ¨¡å¼ï¼Œæ‰€æœ‰é¡µé¢ã€è„šæœ¬ã€æ’ä»¶éƒ½åœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œï¼Œä¸€æ—¦å‡ºé—®é¢˜å°±â€œå…¨å†›è¦†æ²¡â€ã€‚</li>
<li>ç°ä»£æµè§ˆå™¨ï¼ˆä»£è¡¨æ˜¯Â Chromeï¼‰ä½¿ç”¨<strong>å¤šè¿›ç¨‹æ¶æ„</strong>ï¼šä¸»è¿›ç¨‹è´Ÿè´£è°ƒåº¦ï¼Œå„ä¸ªæ¸²æŸ“ã€ç½‘ç»œã€GPUã€æ’ä»¶è¿›ç¨‹å„å¸å…¶èŒï¼Œå¹¶é€šè¿‡æ²™ç®±å¼ºåŒ–éš”ç¦»ã€‚</li>
<li>å°½ç®¡æµè§ˆå™¨æ•´ä½“æ˜¯å¤šè¿›ç¨‹çš„ï¼Œä½†<strong>å•ä¸ªé¡µé¢é‡Œçš„ JavaScript ä¾ç„¶æ˜¯å•çº¿ç¨‹ + äº‹ä»¶å¾ªç¯æ¨¡å‹</strong>ï¼Œè¿™ç‚¹æ²¡æœ‰å˜ã€‚</li>
<li>ä»ç”¨æˆ·ä½“éªŒã€å‰ç«¯å¼€å‘ã€å®‰å…¨æ€§ã€ç¨³å®šæ€§æ¥çœ‹ï¼Œå¤šè¿›ç¨‹æ¶æ„å‡ ä¹æ˜¯å…¨é¢ç¢¾å‹æ—§æ—¶ä»£å•è¿›ç¨‹æµè§ˆå™¨çš„ä¸€æ¬¡å‡çº§ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨huskyå’Œfabricè§„èŒƒgitæäº¤çš„æ³¨é‡Š]]></title>    <link>https://juejin.cn/post/7580329353353232430</link>    <guid>https://juejin.cn/post/7580329353353232430</guid>    <pubDate>2025-12-06T16:55:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580329353353232430" data-draft-id="7576978338754199602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨huskyå’Œfabricè§„èŒƒgitæäº¤çš„æ³¨é‡Š"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-06T16:55:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qinyuan15"/> <meta itemprop="url" content="https://juejin.cn/user/1445224471068824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨huskyå’Œfabricè§„èŒƒgitæäº¤çš„æ³¨é‡Š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1445224471068824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qinyuan15
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T16:55:38.000Z" title="Sat Dec 06 2025 16:55:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä¸æ„ä¹‰</h2>
<p>åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰äº›å¼€å‘äººå‘˜æœ‰æ—¶æäº¤gitæ—¶æ³¨é‡Šå†™å¾—å¾ˆéšæ„ï¼Œä¸æ–¹ä¾¿æ—¥åç®¡ç†å’Œé—®é¢˜å›æº¯ã€‚å¯¹äºJavaScripté¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨huskyå’Œfabricè§„èŒƒgitæäº¤çš„æ³¨é‡Šã€‚</p>
<h2 data-id="heading-1">äºŒã€å¼•å…¥gitæ³¨é‡Šæ£€æŸ¥</h2>
<p>åœ¨JavaScripté¡¹ç›®ä¸­ï¼Œå®‰è£…huskyå’Œfabricï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install husky @umijs/fabric --save-dev
</code></pre>
<p>ç„¶ååˆå§‹åŒ–huskyï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx husky install
</code></pre>
<p>è¿è¡Œä¸Šé¢çš„å‘½ä»¤ä¹‹åï¼Œä¼šç”Ÿæˆä¸€ä¸ª .husky ç›®å½•ï¼Œåœ¨ .husky ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªcommit-msgæ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/usr/bin/env sh</span>

<span class="hljs-comment"># Export Git hook params</span>
<span class="hljs-built_in">export</span> GIT_PARAMS=$*

npx --no-install fabric verify-commit
</code></pre>
<p>ç„¶åä½¿ç”¨gitå‘½ä»¤æ‰§è¡Œä»£ç æäº¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git add .
git commit -m <span class="hljs-string">'test'</span>
</code></pre>
<p>æ‰§è¡Œä¸Šè¿°å‘½ä»¤æ—¶ï¼Œå¾—åˆ°çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90ba8e2d5d824cd5861d85011c3f0f9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcWlueXVhbjE1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765644938&amp;x-signature=WOjDtCUdnPXmc5AQRYyETfLEs04%3D" alt="image.png" loading="lazy"/></p>
<p>æ˜¾ç„¶ï¼Œgitæ³¨é‡Šè§„èŒƒå·²ç»ç”Ÿæ•ˆã€‚å¦‚æœæ˜¯æŒ‰ç…§è§„èŒƒçš„æ³¨é‡Šæäº¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git commit -m <span class="hljs-string">'feat: å¼•å…¥huskyä¸fabricå¯¹gitæ³¨é‡Šåšè§„èŒƒ'</span>
</code></pre>
<p>åˆ™å¯ä»¥æäº¤æˆåŠŸã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€è§£å†³ä»£ç åˆå¹¶æ—¶æŠ¥é”™çš„é—®é¢˜</h2>
<p>åœ¨åˆå¹¶ä»£ç æ—¶ï¼Œå…¶è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Šå¹¶ä¸ç¬¦åˆè§„èŒƒï¼Œæ— æ³•é€šè¿‡æ ¡éªŒã€‚<br/>
å‡è®¾å½“å‰æ˜¯masteråˆ†æ”¯ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git checkout -b new_branch1
</code></pre>
<p>ç„¶åéšä¾¿æ·»åŠ ä¸€ä¸ªæäº¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">''</span> &gt; test.txt
git add .
git commit -m <span class="hljs-string">'feat: first commit in new_branch1'</span>
</code></pre>
<p>ç„¶åå†åˆ‡å›åŸæ¥çš„åˆ†æ”¯ï¼Œæ·»åŠ ä¸€ä¸ªæäº¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git checkout master
<span class="hljs-built_in">echo</span> <span class="hljs-string">''</span> &gt; test2.txt
git add .
git commit -m <span class="hljs-string">'feat: first commit in master'</span>
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œå¦‚æœåšåˆ†æ”¯åˆå¹¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git merge new_branch1
</code></pre>
<p>å°†ä¼šæŠ¥é”™ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90ba8e2d5d824cd5861d85011c3f0f9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcWlueXVhbjE1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765644938&amp;x-signature=WOjDtCUdnPXmc5AQRYyETfLEs04%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦åœ¨ .husky ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ prepare-commit-msgï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/sh</span>

<span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$2</span>"</span> <span class="hljs-keyword">in</span>
  merge)
    MERGING_BRANCH_SHA=$(<span class="hljs-built_in">cat</span> <span class="hljs-string">".git/MERGE_HEAD"</span>)
    MERGING_BRANCH_NAME=$(git name-rev --name-only <span class="hljs-string">"<span class="hljs-variable">$MERGING_BRANCH_SHA</span>"</span>)
    MERGE_TARGET=$(git rev-parse --abbrev-ref HEAD)

    <span class="hljs-built_in">cat</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> &lt;&lt;<span class="hljs-string">EOF
feat: åˆå¹¶åˆ†æ”¯ï¼Œå°† "${MERGING_BRANCH_NAME}" åˆ†æ”¯çš„å†…å®¹åˆå¹¶åˆ° "${MERGE_TARGET}" åˆ†æ”¯
EOF</span>
  ;;
<span class="hljs-keyword">esac</span>
</code></pre>
<p>æ¥ä¸‹æ¥ <code>git merge new_branch1</code> æ‰§è¡Œæ—¶å°±ä¸ä¼šæŠ¥é”™ï¼Œåˆå¹¶ä»£ç æ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Šä¸ºï¼š<br/>
feat: åˆå¹¶åˆ†æ”¯ï¼Œå°† "new_branch1" åˆ†æ”¯çš„å†…å®¹åˆå¹¶åˆ° "master" åˆ†æ”¯</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vueä¹Ÿæ”¯æŒå£°æ˜å¼UIäº†ï¼Œå‘ç§»åŠ¨ç«¯kotlinï¼Œswiftçœ‹é½ï¼ŒæŠ›å¼ƒhtmlï¼Œpugå‡çº§ç‰ˆï¼Œè¿›æ¥çœ‹çœ‹æ–°è¯­æ³•å§]]></title>    <link>https://juejin.cn/post/7580287383788585003</link>    <guid>https://juejin.cn/post/7580287383788585003</guid>    <pubDate>2025-12-06T18:48:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580287383788585003" data-draft-id="7580282751628541993" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vueä¹Ÿæ”¯æŒå£°æ˜å¼UIäº†ï¼Œå‘ç§»åŠ¨ç«¯kotlinï¼Œswiftçœ‹é½ï¼ŒæŠ›å¼ƒhtmlï¼Œpugå‡çº§ç‰ˆï¼Œè¿›æ¥çœ‹çœ‹æ–°è¯­æ³•å§"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶,JavaScript"/> <meta itemprop="datePublished" content="2025-12-06T18:48:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="alamhubb"/> <meta itemprop="url" content="https://juejin.cn/user/3263006244085480"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vueä¹Ÿæ”¯æŒå£°æ˜å¼UIäº†ï¼Œå‘ç§»åŠ¨ç«¯kotlinï¼Œswiftçœ‹é½ï¼ŒæŠ›å¼ƒhtmlï¼Œpugå‡çº§ç‰ˆï¼Œè¿›æ¥çœ‹çœ‹æ–°è¯­æ³•å§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3263006244085480/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    alamhubb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T18:48:59.000Z" title="Sat Dec 06 2025 18:48:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¼—æ‰€å‘¨çŸ¥ï¼Œæ–°ç”Ÿä»£çš„uiæ¡†æ¶(å¦‚ï¼škotlinï¼Œswiftï¼Œflutterï¼Œé¸¿è’™ï¼‰éƒ½å·²ç»æŠ›å¼ƒäº†XMLè¿™ç±»çš„ç»“æ„åŒ–æ•°æ®æ ‡è®°è¯­è¨€æ”¹ä¸ºä½¿ç”¨å£°æ˜å¼UI</h3>
<h3 data-id="heading-1">åªæœ‰webç«¯è¿˜æ²¡æœ‰æ”¯æŒæ­¤ç±»uiè¯­æ³•ï¼Œæ­¤æ¬¡æˆ‘å¼€å‘çš„ovsjsä¸ºå‰ç«¯ä¹Ÿå¸¦æ¥äº†æ­¤ç±»å£°æ˜å¼UIè¯­æ³•çš„æ”¯æŒï¼Œè¯­æ³•å¦‚ä¸‹</h3>
<p>é¡¹ç›®åœ°å€</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falamhubb%2Fovsjs%2Fblob%2Fmaster%2Fcreate-ovs%2Ftemplate%2Fsrc%2Fcomponents%2FHelloWorld.ovs" target="_blank" title="https://github.com/alamhubb/ovsjs/blob/master/create-ovs/template/src/components/HelloWorld.ovs" ref="nofollow noopener noreferrer">github.com/alamhubb/ovâ€¦</a></p>
<p>è¯­æ³•æ’ä»¶åœ°å€ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3Dalamhubb.ovs-language" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=alamhubb.ovs-language" ref="nofollow noopener noreferrer">marketplace.visualstudio.com/items?itemNâ€¦</a></p>
<p>æ–°è¯­æ³•å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efc71a9cd726463d9c09dd87ada39af5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWxhbWh1YmI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765651739&amp;x-signature=HytTfoABauafpjfcO3q1QVmynUg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">æˆ‘è®¤ä¸ºæ›´å¼ºçš„åœ°æ–¹æ˜¯æˆ‘çš„æ–°è®¾è®¡é™¤äº†ä¸ºå‰ç«¯å¸¦æ¥äº†å£°æ˜å¼UIï¼Œè¿˜æ”¯æŒäº† #{ } ä¸æ¸²æŸ“ä»£ç å—çš„è®¾è®¡ï¼Œæ”¯æŒåœ¨ å£°æ˜å¼UIä¸­ç¼–å†™ä»£ç ï¼Œè¿™æ ·UIå’Œé€»è¾‘ä¹‹é—´çš„è·ç¦»æ›´è¿‘ï¼Œç»´æŠ¤æ›´æ–¹ä¾¿ï¼ŒæŠ½è±¡ç»„ä»¶ä¹Ÿæ›´å®¹æ˜“</h3>
<h3 data-id="heading-3">å¯¹æ¯”kotlinï¼Œswiftï¼Œflutterï¼Œé¸¿è’™è¯­æ³•å¦‚ä¸‹ï¼š</h3>
<p>kotlinçš„è¯­æ³•</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.browser.*
<span class="hljs-keyword">import</span> kotlinx.html.*
<span class="hljs-keyword">import</span> kotlinx.html.dom.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    document.body!!.append.div {
        h1 {
            +<span class="hljs-string">"Welcome to Kotlin/JS!"</span>
        }
        p {
            +<span class="hljs-string">"Fancy joining this year's "</span>
            a(<span class="hljs-string">"https://kotlinconf.com/"</span>) {
                +<span class="hljs-string">"KotlinConf"</span>
            }
            +<span class="hljs-string">"?"</span>
        }
    }
}
</code></pre>
<p>swiftUIçš„è¯­æ³•</p>
<pre><code class="hljs language-scss" lang="scss">import SwiftUI

struct ContentView: View {
    <span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">body</span>: some View {
        <span class="hljs-built_in">VStack</span>(spacing: <span class="hljs-number">16</span>) {
            Text("Hello SwiftUI")
                <span class="hljs-selector-class">.font</span>(.largeTitle)
                <span class="hljs-selector-class">.fontWeight</span>(.bold)

            Text("Welcome to SwiftUI world")

            <span class="hljs-selector-tag">Button</span>("Click Me") {
                <span class="hljs-built_in">print</span>("Button clicked")
            }
        }
        <span class="hljs-selector-class">.padding</span>()
    }
}
</code></pre>
<p>flutterçš„è¯­æ³•</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">MyApp</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">StatelessWidget</span> {
  <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">MyApp</span>({<span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.key</span>});

  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">MaterialApp</span>(
      <span class="hljs-attribute">home</span>: <span class="hljs-built_in">Scaffold</span>(
        <span class="hljs-attribute">body</span>: <span class="hljs-built_in">Center</span>(
          <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Column</span>(
            <span class="hljs-attribute">mainAxisSize</span>: MainAxisSize.min,
            <span class="hljs-attribute">children</span>: [
              const <span class="hljs-built_in">Text</span>(
                <span class="hljs-string">"Hello Flutter"</span>,
                <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(<span class="hljs-attribute">fontSize</span>: <span class="hljs-number">28</span>, <span class="hljs-attribute">fontWeight</span>: FontWeight.bold),
              ),
              const <span class="hljs-built_in">SizedBox</span>(<span class="hljs-attribute">height</span>: <span class="hljs-number">12</span>),
              const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"Welcome to Flutter world"</span>),
              const <span class="hljs-built_in">SizedBox</span>(<span class="hljs-attribute">height</span>: <span class="hljs-number">16</span>),
              <span class="hljs-built_in">ElevatedButton</span>(
                <span class="hljs-attribute">onPressed</span>: () {
                  <span class="hljs-built_in">print</span>(<span class="hljs-string">"Button clicked"</span>);
                },
                <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"Click Me"</span>),
              )
            ],
          ),
        ),
      ),
    );
  }
}
</code></pre>
<p>é¸¿è’™ arkts</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Entry</span>
<span class="hljs-variable">@Component</span>
struct Index {
  <span class="hljs-variable">@State</span> <span class="hljs-attribute">message</span>: string = <span class="hljs-string">'Hello ArkUI'</span>

  <span class="hljs-built_in">build</span>() {
    <span class="hljs-selector-tag">Column</span>() {
      <span class="hljs-selector-tag">Text</span>(this.message)
        <span class="hljs-selector-class">.fontSize</span>(<span class="hljs-number">28</span>)
        <span class="hljs-selector-class">.fontWeight</span>(FontWeight.Bold)

      <span class="hljs-selector-tag">Text</span>(<span class="hljs-string">'Welcome to HarmonyOS'</span>)
        <span class="hljs-selector-class">.margin</span>({ <span class="hljs-attribute">top</span>: <span class="hljs-number">12</span> })

      <span class="hljs-selector-tag">Button</span>(<span class="hljs-string">'Click Me'</span>)
        <span class="hljs-selector-class">.margin</span>({ <span class="hljs-attribute">top</span>: <span class="hljs-number">16</span> })
        <span class="hljs-selector-class">.onClick</span>(() =&gt; {
          <span class="hljs-selector-tag">console</span><span class="hljs-selector-class">.log</span>(<span class="hljs-string">'Button clicked'</span>)
        })
    }
    <span class="hljs-selector-class">.padding</span>(<span class="hljs-number">20</span>)
  }
}
</code></pre>
<h3 data-id="heading-4">åŸç†å®ç°</h3>
<p>ç®€è¿°ä¸€ä¸‹å®ç°åŸç†ï¼Œå°±æ˜¯é€šè¿‡parseræ”¯æŒäº†æ–°è¯­æ³•ï¼Œç„¶åå°†æ–°è¯­æ³•è½¬ä¹‰ä¸º iifeåŒ…è£¹çš„vueçš„hå‡½æ•°</p>
<p>ä¸ºä»€ä¹ˆè¦iifeåŒ…è£¹</p>
<p>å› ä¸ºè¦æ”¯æŒä¸æ¸²æŸ“ä»£ç å—</p>
<h3 data-id="heading-5">ovså›¾ä¸­çš„ä»£ç å¯¹åº”çš„ç¼–è¯‘åçš„ä»£ç æ˜¯è¿™æ ·çš„</h3>
<pre><code class="hljs language-php" lang="php">import {defineOvsComponent} <span class="hljs-keyword">from</span> <span class="hljs-string">"/@fs/D:/project/qkyproject/test-volar/ovs/ovs-runtime/src/index.ts"</span>;
import {<span class="hljs-variable">$OvsHtmlTag</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">"/@fs/D:/project/qkyproject/test-volar/ovs/ovs-runtime/src/index.ts"</span>;
import {ref} <span class="hljs-keyword">from</span> <span class="hljs-string">"/node_modules/.vite/deps/vue.js?v=76ca4127"</span>;
export <span class="hljs-keyword">default</span> <span class="hljs-title function_ invoke__">defineOvsComponent</span>(props =&gt; {
  <span class="hljs-keyword">const</span> msg = <span class="hljs-string">"You did it!"</span>;
  let count = <span class="hljs-title function_ invoke__">ref</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> timer = <span class="hljs-title function_ invoke__">setInterval</span>(() =&gt; {
    count.value = count.value + <span class="hljs-number">1</span>;
  },<span class="hljs-number">1000</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-variable">$OvsHtmlTag</span>.<span class="hljs-title function_ invoke__">div</span>({<span class="hljs-attr">class</span>:<span class="hljs-string">'greetings'</span>,<span class="hljs-title function_ invoke__">onClick</span>(){
    count.value = <span class="hljs-number">0</span>;
  }},[
    <span class="hljs-variable">$OvsHtmlTag</span>.<span class="hljs-title function_ invoke__">h1</span>({<span class="hljs-attr">class</span>:<span class="hljs-string">'green'</span>},[msg]),
    count,
    <span class="hljs-variable">$OvsHtmlTag</span>.<span class="hljs-title function_ invoke__">h3</span>({},[
      <span class="hljs-string">"You've successfully created a project with "</span>,
      <span class="hljs-variable">$OvsHtmlTag</span>.<span class="hljs-title function_ invoke__">a</span>({<span class="hljs-attr">href</span>:<span class="hljs-string">'https://vite.dev/'</span>,<span class="hljs-attr">target</span>:<span class="hljs-string">'_blank'</span>,<span class="hljs-attr">rel</span>:<span class="hljs-string">'noopener'</span>},[<span class="hljs-string">'Vite'</span>]),
      <span class="hljs-string">' + '</span>,
      <span class="hljs-variable">$OvsHtmlTag</span>.<span class="hljs-title function_ invoke__">a</span>({<span class="hljs-attr">href</span>:<span class="hljs-string">'https://vuejs.org/'</span>,<span class="hljs-attr">target</span>:<span class="hljs-string">'_blank'</span>,<span class="hljs-attr">rel</span>:<span class="hljs-string">'noopener'</span>},[<span class="hljs-string">'Vue 3'</span>]),
      <span class="hljs-string">' + '</span>,
      <span class="hljs-variable">$OvsHtmlTag</span>.<span class="hljs-title function_ invoke__">a</span>({<span class="hljs-attr">href</span>:<span class="hljs-string">'https://github.com/alamhubb/ovsjs'</span>,<span class="hljs-attr">target</span>:<span class="hljs-string">'_blank'</span>,<span class="hljs-attr">rel</span>:<span class="hljs-string">'noopener'</span>},[<span class="hljs-string">'OVS'</span>]),
      <span class="hljs-string">'.'</span>
    ])
  ]);
});
</code></pre>
<p>parseræ˜¯æˆ‘è‡ªå·±å†™çš„ï¼ŒæŠ„äº† chevortain çš„è®¾è®¡ï¼Œå†™äº†ä¸ªsubhutiï¼Œæ”¯æŒå®šä¹‰pegè¯­æ³•</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falamhubb%2Fovsjs%2Ftree%2Fmaster%2Fsubhutigithub.com%2Falamhubb%2Fovsjs%2Ftree%2Fmaster%2Fsubhuti" target="_blank" title="https://github.com/alamhubb/ovsjs/tree/master/subhutigithub.com/alamhubb/ovsjs/tree/master/subhuti" ref="nofollow noopener noreferrer">github.com/alamhubb/ovâ€¦</a></p>
<p>slimeparserï¼Œæ”¯æŒes2025è¯­æ³•çš„parserï¼ŒåŸºäºsubhutiï¼Œå£°æ˜es2025è¯­æ³•å°±è¡Œ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falamhubb%2Fovsjs%2Ftree%2Fmaster%2Fslimegithub.com%2Falamhubb%2Fovsjs%2Ftree%2Fmaster%2Fslime" target="_blank" title="https://github.com/alamhubb/ovsjs/tree/master/slimegithub.com/alamhubb/ovsjs/tree/master/slime" ref="nofollow noopener noreferrer">github.com/alamhubb/ovâ€¦</a></p>
<p>ç„¶åå°±æ˜¯ovsç»§æ‰¿slimeparserï¼Œæ·»åŠ äº†ovsçš„è¯­æ³•æ”¯æŒï¼Œå¹¶ä¸”åœ¨astç”Ÿæˆçš„æ—¶å€™å°†ä»£ç è½¬ä¸ºvueçš„æ¸²æŸ“å‡½æ•°ï¼Œè¿è¡Œæ—¶å°±æ˜¯è¿è¡Œçš„vueçš„æ¸²æŸ“å‡½æ•°çš„ä»£ç ï¼Œæ‰€ä»¥å®Œç¾æ”¯æŒvueçš„ç”Ÿæ€</p>
<p>æ„Ÿå…´è¶£çš„å¯ä»¥è¯•è¯•ï¼Œå…¥é—¨æ•™ç¨‹</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falamhubb%2Fovsjs%2Fblob%2Fmaster%2FREADME.mdgithub.com%2Falamhubb%2Fovsjs%2Fblob%2Fmaster%2FREADME.md" target="_blank" title="https://github.com/alamhubb/ovsjs/blob/master/README.mdgithub.com/alamhubb/ovsjs/blob/master/README.md" ref="nofollow noopener noreferrer">github.com/alamhubb/ovâ€¦</a></p>
<h3 data-id="heading-6">ç”±äºæœ¬äººèƒ½åŠ›æœ‰å…ˆï¼Œæ–‡ä¸­å­˜åœ¨é”™è¯¯ä¸è¶³ä¹‹å¤„ï¼Œè¯·å¤§å®¶æŒ‡æ­£ï¼Œæœ‰å¯¹æ–°è¯­æ³•æ„Ÿå…´è¶£çš„æ¬¢è¿ç•™è¨€å’Œæˆ‘äº¤æµ</h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIçœŸå¥½ç©ç³»åˆ—-Three.jsæ‰‹åŠ¿æ§åˆ¶æ¸¸æˆå¼€å‘æ•™ç¨‹ | Interactive Game Development with Three.js Hand Con]]></title>    <link>https://juejin.cn/post/7580287383788503083</link>    <guid>https://juejin.cn/post/7580287383788503083</guid>    <pubDate>2025-12-06T16:10:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580287383788503083" data-draft-id="7580287383788486699" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIçœŸå¥½ç©ç³»åˆ—-Three.jsæ‰‹åŠ¿æ§åˆ¶æ¸¸æˆå¼€å‘æ•™ç¨‹ | Interactive Game Development with Three.js Hand Con"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-06T16:10:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="tangdou369098655"/> <meta itemprop="url" content="https://juejin.cn/user/1852021345630839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIçœŸå¥½ç©ç³»åˆ—-Three.jsæ‰‹åŠ¿æ§åˆ¶æ¸¸æˆå¼€å‘æ•™ç¨‹ | Interactive Game Development with Three.js Hand Con
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1852021345630839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    tangdou369098655
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T16:10:59.000Z" title="Sat Dec 06 2025 16:10:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‘¨æœ«çš„æ·±å¤œï¼Œç¡ä¸ç€è§‰ï¼Œé—²æ¥æ— äº‹ï¼Œæ‰“å¼€Geminiå“ˆåŸºç±³ç©ä¸€æŠŠï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šå›¾çœ‹æœ€ç»ˆæ•ˆæœ~</p>
<p>ç¢ç¢å¿µï¼šæˆ‘å¾ˆæƒ³ä¸Šä¼ è§†é¢‘ï¼Œä½†æ˜¯å¥½åƒæœ‰çš„åšå®¢ä¸æ”¯æŒï¼Œè¿™é‡Œå…ˆæ”¾ä¸ªå›¾ç‰‡</p>
<p>è§†é¢‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Pt2RB1EkS%3Ft%3D2.4" target="_blank" title="https://www.bilibili.com/video/BV1Pt2RB1EkS?t=2.4" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1Ptâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef70293a8f7f487cbc94404a8e342338~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGFuZ2RvdTM2OTA5ODY1NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765642259&amp;x-signature=vAuLVjwyb75RnPvbbnEGWke7frE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33c40775a9fc46ce88940d38585be56e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGFuZ2RvdTM2OTA5ODY1NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765642259&amp;x-signature=fiBz%2BpODTnpno8UaqHAi52kSptU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ’– æç¤ºè¯</h2>
<pre><code class="hljs language-arduino" lang="arduino">è¯·ä½¿ç”¨Three.jsï¼Œåˆ›å»ºä¸€ä¸ªå®Œæ•´çš„<span class="hljs-string">"æ‰‹åŠ¿ç©æ¸¸æˆ"</span><span class="hljs-number">3</span>Däº¤äº’æ¸¸æˆç½‘é¡µã€‚
</code></pre>
<h2 data-id="heading-1">ğŸ“š é¡¹ç›®ä»£ç ï¼ˆé¡¹ç›®å‰–æå’Œç®€ä»‹éƒ½åœ¨ä¸‹é¢å“¦ï¼‰</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Three.js æ‰‹åŠ¿æ§åˆ¶æ¸¸æˆ - å¤ªç©ºæ•æ‰‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">overflow</span>: hidden; <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#000</span>; <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Arial'</span>, sans-serif; }
        <span class="hljs-selector-id">#canvas-container</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>; <span class="hljs-attribute">display</span>: block; }
        <span class="hljs-selector-id">#video-container</span> {
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">160px</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">120px</span>;
            <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#00ffcc</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
            <span class="hljs-attribute">overflow</span>: hidden;
            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.7</span>;
        }
        <span class="hljs-selector-id">#input-video</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scaleX</span>(-<span class="hljs-number">1</span>); <span class="hljs-comment">/* é•œåƒç¿»è½¬ï¼Œè®©æ“ä½œæ›´ç›´è§‚ */</span>
            <span class="hljs-attribute">object-fit</span>: cover;
        }
        <span class="hljs-selector-id">#ui-layer</span> {
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">right</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
            <span class="hljs-attribute">text-align</span>: right;
            <span class="hljs-attribute">pointer-events</span>: none;
        }
        <span class="hljs-selector-tag">h1</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>; <span class="hljs-attribute">text-transform</span>: uppercase; <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">2px</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#00ffcc</span>; }
        <span class="hljs-selector-id">#score-board</span> { <span class="hljs-attribute">font-size</span>: <span class="hljs-number">40px</span>; <span class="hljs-attribute">font-weight</span>: bold; }
        <span class="hljs-selector-id">#loading</span> {
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>; <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.8</span>);
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
            <span class="hljs-attribute">text-align</span>: center;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•å…¥ Three.js --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¼•å…¥ MediaPipe Hands --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 3D åœºæ™¯å®¹å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas-container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ‘„åƒå¤´é¢„è§ˆ (ç”¨äºç¡®è®¤æ‰‹åŠ¿) --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"video-container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"input-video"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- UI ç•Œé¢ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"ui-layer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Cosmic Catcher<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Score<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"score-board"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"loading"</span>&gt;</span>æ­£åœ¨åŠ è½½ AI æ¨¡å‹å’Œæ‘„åƒå¤´...<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>è¯·å…è®¸æ‘„åƒå¤´æƒé™<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// --- æ¸¸æˆçŠ¶æ€ ---</span>
        <span class="hljs-keyword">let</span> score = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">let</span> gameRunning = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">const</span> sceneWidth = <span class="hljs-number">20</span>; <span class="hljs-comment">// æ¸¸æˆä¸–ç•Œçš„å®½åº¦èŒƒå›´</span>
        <span class="hljs-keyword">const</span> playerY = -<span class="hljs-number">8</span>;
        
        <span class="hljs-comment">// --- 1. Three.js åœºæ™¯è®¾ç½® ---</span>
        <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();
        scene.<span class="hljs-property">background</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">0x1a1a2e</span>);
        <span class="hljs-comment">// æ·»åŠ ä¸€äº›è¿·é›¾å¢åŠ æ·±é‚ƒæ„Ÿ</span>
        scene.<span class="hljs-property">fog</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">FogExp2</span>(<span class="hljs-number">0x1a1a2e</span>, <span class="hljs-number">0.03</span>);

        <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);
        camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">10</span>;
        camera.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-number">2</span>;
        camera.<span class="hljs-title function_">lookAt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

        <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> });
        renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'canvas-container'</span>).<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

        <span class="hljs-comment">// ç¯å…‰</span>
        <span class="hljs-keyword">const</span> ambientLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">AmbientLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">0.5</span>);
        scene.<span class="hljs-title function_">add</span>(ambientLight);
        
        <span class="hljs-keyword">const</span> dirLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">DirectionalLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">0.8</span>);
        dirLight.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>);
        scene.<span class="hljs-title function_">add</span>(dirLight);

        <span class="hljs-comment">// --- 2. åˆ›å»ºæ¸¸æˆå¯¹è±¡ ---</span>
        
        <span class="hljs-comment">// ç©å®¶ (æ»‘å—)</span>
        <span class="hljs-keyword">const</span> playerGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(<span class="hljs-number">3</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>);
        <span class="hljs-keyword">const</span> playerMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshPhongMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ffcc</span>, <span class="hljs-attr">emissive</span>: <span class="hljs-number">0x004444</span> });
        <span class="hljs-keyword">const</span> player = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(playerGeometry, playerMaterial);
        player.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = playerY;
        scene.<span class="hljs-title function_">add</span>(player);

        <span class="hljs-comment">// æ‰è½ç‰©ç®¡ç†å™¨</span>
        <span class="hljs-keyword">const</span> fallingObjects = [];
        <span class="hljs-keyword">const</span> objectGeometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">IcosahedronGeometry</span>(<span class="hljs-number">0.6</span>, <span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> objectMaterial = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshPhongMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-number">0xff0055</span>, <span class="hljs-attr">shininess</span>: <span class="hljs-number">100</span> });

        <span class="hljs-keyword">function</span> <span class="hljs-title function_">spawnObject</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">if</span> (!gameRunning) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(objectGeometry, objectMaterial.<span class="hljs-title function_">clone</span>());
            <span class="hljs-comment">// éšæœºé¢œè‰²</span>
            obj.<span class="hljs-property">material</span>.<span class="hljs-property">color</span>.<span class="hljs-title function_">setHSL</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>(), <span class="hljs-number">1.0</span>, <span class="hljs-number">0.5</span>);
            
            <span class="hljs-comment">// éšæœº X ä½ç½®</span>
            obj.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * sceneWidth; 
            obj.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-number">10</span>; <span class="hljs-comment">// ä»ä¸Šæ–¹æ‰è½</span>
            obj.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">0</span>;
            
            <span class="hljs-comment">// éšæœºæ—‹è½¬é€Ÿåº¦</span>
            obj.<span class="hljs-property">userData</span> = {
                <span class="hljs-attr">rotSpeed</span>: {
                    <span class="hljs-attr">x</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">0.1</span>,
                    <span class="hljs-attr">y</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">0.1</span>
                },
                <span class="hljs-attr">speed</span>: <span class="hljs-number">0.1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">0.1</span> <span class="hljs-comment">// æ‰è½é€Ÿåº¦</span>
            };
            
            scene.<span class="hljs-title function_">add</span>(obj);
            fallingObjects.<span class="hljs-title function_">push</span>(obj);
        }

        <span class="hljs-comment">// --- 3. MediaPipe Hands è®¾ç½® (æ‰‹åŠ¿è¯†åˆ«) ---</span>
        <span class="hljs-keyword">const</span> videoElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'input-video'</span>);
        <span class="hljs-keyword">const</span> loadingElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'loading'</span>);

        <span class="hljs-comment">// æ˜ å°„å‡½æ•°ï¼šå°†è§†é¢‘ä¸­çš„åæ ‡ (0-1) æ˜ å°„åˆ° 3D åœºæ™¯åæ ‡ (-10 åˆ° 10)</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">mapRange</span>(<span class="hljs-params">value, inMin, inMax, outMin, outMax</span>) {
            <span class="hljs-keyword">return</span> (value - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;
        }

        <span class="hljs-keyword">function</span> <span class="hljs-title function_">onResults</span>(<span class="hljs-params">results</span>) {
            loadingElement.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
            <span class="hljs-keyword">if</span> (!gameRunning) gameRunning = <span class="hljs-literal">true</span>;

            <span class="hljs-keyword">if</span> (results.<span class="hljs-property">multiHandLandmarks</span> &amp;&amp; results.<span class="hljs-property">multiHandLandmarks</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-comment">// è·å–ç¬¬ä¸€åªæ‰‹</span>
                <span class="hljs-keyword">const</span> landmarks = results.<span class="hljs-property">multiHandLandmarks</span>[<span class="hljs-number">0</span>];
                
                <span class="hljs-comment">// è·å–é£ŸæŒ‡æŒ‡å°– (ç´¢å¼•ä¸º 8)</span>
                <span class="hljs-keyword">const</span> indexFingerTip = landmarks[<span class="hljs-number">8</span>];
                
                <span class="hljs-comment">// MediaPipe çš„ x åæ ‡æ˜¯ 0(å·¦) åˆ° 1(å³)ã€‚</span>
                <span class="hljs-comment">// æ³¨æ„ï¼šæˆ‘ä»¬åœ¨ CSS é‡Œé•œåƒç¿»è½¬äº†è§†é¢‘ï¼Œä½†æ•°æ®æœ¬èº«æ²¡æœ‰ç¿»è½¬ã€‚</span>
                <span class="hljs-comment">// åœ¨æ¸¸æˆé‡Œï¼Œä¸ºäº†ç›´è§‚ï¼Œå¦‚æœä½ å‘å³ç§»æ‰‹ï¼Œæˆ‘ä»¬å¸Œæœ› x å˜å¤§ã€‚</span>
                <span class="hljs-comment">// åŸç”Ÿæ•°æ®ï¼šå±å¹•å·¦è¾¹æ˜¯0ï¼Œå³è¾¹æ˜¯1ã€‚</span>
                <span class="hljs-comment">// æ˜ å°„åˆ° 3D åœºæ™¯ï¼šx ä» -10 åˆ° 10ã€‚</span>
                
                <span class="hljs-comment">// å¹³æ»‘ç§»åŠ¨ (Lerp) ä»¥å‡å°‘æŠ–åŠ¨</span>
                <span class="hljs-keyword">const</span> targetX = <span class="hljs-title function_">mapRange</span>(<span class="hljs-number">1</span> - indexFingerTip.<span class="hljs-property">x</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -sceneWidth/<span class="hljs-number">2</span>, sceneWidth/<span class="hljs-number">2</span>); <span class="hljs-comment">// 1-x å› ä¸ºè‡ªæ‹æ¨¡å¼é€šå¸¸æ˜¯é•œåƒ</span>
                player.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> += (targetX - player.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>) * <span class="hljs-number">0.2</span>;
            }
        }

        <span class="hljs-keyword">const</span> hands = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hands</span>({<span class="hljs-attr">locateFile</span>: <span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">`https://cdn.jsdelivr.net/npm/@mediapipe/hands/<span class="hljs-subst">${file}</span>`</span>;
        }});

        hands.<span class="hljs-title function_">setOptions</span>({
            <span class="hljs-attr">maxNumHands</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">modelComplexity</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">minDetectionConfidence</span>: <span class="hljs-number">0.5</span>,
            <span class="hljs-attr">minTrackingConfidence</span>: <span class="hljs-number">0.5</span>
        });
        hands.<span class="hljs-title function_">onResults</span>(onResults);

        <span class="hljs-keyword">const</span> cameraUtils = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Camera</span>(videoElement, {
            <span class="hljs-attr">onFrame</span>: <span class="hljs-keyword">async</span> () =&gt; {
                <span class="hljs-keyword">await</span> hands.<span class="hljs-title function_">send</span>({<span class="hljs-attr">image</span>: videoElement});
            },
            <span class="hljs-attr">width</span>: <span class="hljs-number">320</span>,
            <span class="hljs-attr">height</span>: <span class="hljs-number">240</span>
        });
        cameraUtils.<span class="hljs-title function_">start</span>();

        <span class="hljs-comment">// --- 4. æ¸¸æˆä¸»å¾ªç¯ ---</span>
        <span class="hljs-keyword">const</span> scoreEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'score-board'</span>);
        <span class="hljs-keyword">let</span> frameCount = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
            <span class="hljs-title function_">requestAnimationFrame</span>(animate);

            <span class="hljs-keyword">if</span> (gameRunning) {
                frameCount++;
                <span class="hljs-comment">// æ¯ 60 å¸§ç”Ÿæˆä¸€ä¸ªæ–°ç‰©ä½“</span>
                <span class="hljs-keyword">if</span> (frameCount % <span class="hljs-number">60</span> === <span class="hljs-number">0</span>) {
                    <span class="hljs-title function_">spawnObject</span>();
                }

                <span class="hljs-comment">// æ›´æ–°æ‰è½ç‰©</span>
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = fallingObjects.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
                    <span class="hljs-keyword">const</span> obj = fallingObjects[i];
                    obj.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> -= obj.<span class="hljs-property">userData</span>.<span class="hljs-property">speed</span>;
                    obj.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> += obj.<span class="hljs-property">userData</span>.<span class="hljs-property">rotSpeed</span>.<span class="hljs-property">x</span>;
                    obj.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += obj.<span class="hljs-property">userData</span>.<span class="hljs-property">rotSpeed</span>.<span class="hljs-property">y</span>;

                    <span class="hljs-comment">// ç¢°æ’æ£€æµ‹ (ç®€å•çš„ AABB æˆ– è·ç¦»æ£€æµ‹)</span>
                    <span class="hljs-comment">// æ£€æŸ¥ Y è½´é«˜åº¦æ˜¯å¦åˆ°è¾¾ç©å®¶é«˜åº¦</span>
                    <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> &lt; playerY + <span class="hljs-number">1</span> &amp;&amp; obj.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> &gt; playerY - <span class="hljs-number">1</span>) {
                        <span class="hljs-comment">// æ£€æŸ¥ X è½´è·ç¦»</span>
                        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(obj.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> - player.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>) &lt; <span class="hljs-number">2.0</span>) {
                            <span class="hljs-comment">// æ¥ä½äº†ï¼</span>
                            score += <span class="hljs-number">10</span>;
                            scoreEl.<span class="hljs-property">innerText</span> = score;
                            
                            <span class="hljs-comment">// ç‰¹æ•ˆï¼šç©å®¶å‘å…‰ä¸€ä¸‹</span>
                            player.<span class="hljs-property">material</span>.<span class="hljs-property">emissive</span>.<span class="hljs-title function_">setHex</span>(<span class="hljs-number">0xffffff</span>);
                            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> player.<span class="hljs-property">material</span>.<span class="hljs-property">emissive</span>.<span class="hljs-title function_">setHex</span>(<span class="hljs-number">0x004444</span>), <span class="hljs-number">100</span>);

                            <span class="hljs-comment">// ç§»é™¤ç‰©ä½“</span>
                            scene.<span class="hljs-title function_">remove</span>(obj);
                            fallingObjects.<span class="hljs-title function_">splice</span>(i, <span class="hljs-number">1</span>);
                            <span class="hljs-keyword">continue</span>;
                        }
                    }

                    <span class="hljs-comment">// æ‰å‡ºå±å¹•</span>
                    <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> &lt; -<span class="hljs-number">10</span>) {
                        scene.<span class="hljs-title function_">remove</span>(obj);
                        fallingObjects.<span class="hljs-title function_">splice</span>(i, <span class="hljs-number">1</span>);
                    }
                }
            }

            renderer.<span class="hljs-title function_">render</span>(scene, camera);
        }

        <span class="hljs-comment">// çª—å£å¤§å°è°ƒæ•´é€‚é…</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
            camera.<span class="hljs-property">aspect</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
            camera.<span class="hljs-title function_">updateProjectionMatrix</span>();
            renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
        });

        <span class="hljs-title function_">animate</span>();

    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<h2 data-id="heading-2">ğŸŒŸ é¡¹ç›®ç®€ä»‹ | Project Introduction</h2>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºäº Three.js å’Œ MediaPipe Hands æ„å»ºçš„å‰ç«¯äº¤äº’å¼æ¸¸æˆé¡¹ç›®ã€‚é€šè¿‡æ‘„åƒå¤´æ•æ‰ä½ çš„æ‰‹åŠ¿ï¼Œä½ å¯ä»¥ç›´æ¥ç”¨é£ŸæŒ‡æ§åˆ¶å±å¹•ä¸Šçš„å¤ªç©ºé£èˆ¹ï¼Œæ¥ä½ä»å¤©è€Œé™çš„èƒ½é‡çƒæ¥å¾—åˆ†ã€‚æ•´ä¸ªæ¸¸æˆè¿‡ç¨‹æ— éœ€ä»»ä½•ç‰©ç†æ§åˆ¶å™¨ï¼Œåªéœ€è¦ä½ çš„æ‰‹å°±å¯ä»¥å®Œæˆæ‰€æœ‰æ“ä½œï¼Œå¸¦æ¥å‰æ‰€æœªæœ‰çš„æ²‰æµ¸å¼ä½“éªŒï¼ğŸš€</p>
<h2 data-id="heading-3">ğŸ“Œ å‰ææ¡ä»¶ | Prerequisites</h2>
<ol>
<li><strong>ç°ä»£æµè§ˆå™¨</strong>: Chrome/Firefox/Safari æœ€æ–°ç‰ˆ</li>
<li><strong>æ‘„åƒå¤´è®¾å¤‡</strong>: å†…ç½®æˆ–å¤–æ¥æ‘„åƒå¤´</li>
<li><strong>åŸºç¡€ HTML/CSS/JS çŸ¥è¯†</strong>: æœ‰åŠ©äºç†è§£ä»£ç ç»“æ„</li>
</ol>
<h2 data-id="heading-4">ğŸš€ æ ¸å¿ƒæŠ€æœ¯æ ˆ | Core Technologies</h2>

























<table><thead><tr><th>æŠ€æœ¯</th><th>ç”¨é€”</th><th>é“¾æ¥</th></tr></thead><tbody><tr><td>Three.js</td><td>WebGL 3D æ¸²æŸ“å¼•æ“</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fthreejs.org" target="_blank" title="https://threejs.org" ref="nofollow noopener noreferrer">threejs.org</a></td></tr><tr><td>MediaPipe</td><td>æ‰‹éƒ¨å…³é”®ç‚¹è¯†åˆ«</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fmediapipe.dev" target="_blank" title="https://mediapipe.dev" ref="nofollow noopener noreferrer">mediapipe.dev</a></td></tr><tr><td>HTML5 Canvas</td><td>3Dåœºæ™¯æ¸²æŸ“å®¹å™¨</td><td>-</td></tr></tbody></table>
<h2 data-id="heading-5">ğŸ‘ æ‰‹åŠ¿æ§åˆ¶åŸç† | Hand Control Principle</h2>
<p>é€šè¿‡ MediaPipe è·å–æ‰‹éƒ¨ 21 ä¸ªå…³é”®ç‚¹åæ ‡ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨é£ŸæŒ‡æŒ‡å°–(ç´¢å¼•8)çš„ä½ç½®ä¿¡æ¯ï¼Œå°†å…¶æ˜ å°„åˆ°3Dåœºæ™¯åæ ‡ç³»ä¸­ï¼Œå®ç°ç²¾å‡†æ§åˆ¶ã€‚</p>
<ul>
<li><strong>é£ŸæŒ‡æŒ‡å°–(Index Finger Tip)</strong>: ç´¢å¼• 8</li>
<li><strong>åæ ‡æ˜ å°„</strong>: å°†æ‘„åƒå¤´ç”»é¢åæ ‡(0-1)æ˜ å°„åˆ°æ¸¸æˆä¸–ç•Œåæ ‡(-10è‡³10)</li>
</ul>
<h2 data-id="heading-6">ğŸ§© æ ¸å¿ƒä»£ç ç‰‡æ®µ | Core Code Snippets</h2>
<h3 data-id="heading-7">1. æ¸¸æˆåœºæ™¯åˆå§‹åŒ– | Scene Initialization</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();
scene.<span class="hljs-property">background</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">0x1a1a2e</span>);
<span class="hljs-comment">// æ·»åŠ ä¸€äº›è¿·é›¾å¢åŠ æ·±é‚ƒæ„Ÿ</span>
scene.<span class="hljs-property">fog</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">FogExp2</span>(<span class="hljs-number">0x1a1a2e</span>, <span class="hljs-number">0.03</span>);

<span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);
camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">10</span>;
camera.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-number">2</span>;
camera.<span class="hljs-title function_">lookAt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre>
<h3 data-id="heading-8">2. æ‰‹åŠ¿è¯†åˆ«é…ç½® | Hand Detection Configuration</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> hands = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hands</span>({<span class="hljs-attr">locateFile</span>: <span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`https://cdn.jsdelivr.net/npm/@mediapipe/hands/<span class="hljs-subst">${file}</span>`</span>;
}});

hands.<span class="hljs-title function_">setOptions</span>({
    <span class="hljs-attr">maxNumHands</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">modelComplexity</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">minDetectionConfidence</span>: <span class="hljs-number">0.5</span>,
    <span class="hljs-attr">minTrackingConfidence</span>: <span class="hljs-number">0.5</span>
});
hands.<span class="hljs-title function_">onResults</span>(onResults);
</code></pre>
<h3 data-id="heading-9">3. æ‰‹åŠ¿æ§åˆ¶é€»è¾‘ | Hand Control Logic</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">onResults</span>(<span class="hljs-params">results</span>) {
    loadingElement.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
    <span class="hljs-keyword">if</span> (!gameRunning) gameRunning = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (results.<span class="hljs-property">multiHandLandmarks</span> &amp;&amp; results.<span class="hljs-property">multiHandLandmarks</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// è·å–ç¬¬ä¸€åªæ‰‹</span>
        <span class="hljs-keyword">const</span> landmarks = results.<span class="hljs-property">multiHandLandmarks</span>[<span class="hljs-number">0</span>];
        
        <span class="hljs-comment">// è·å–é£ŸæŒ‡æŒ‡å°– (ç´¢å¼•ä¸º 8)</span>
        <span class="hljs-keyword">const</span> indexFingerTip = landmarks[<span class="hljs-number">8</span>];
        
        <span class="hljs-comment">// MediaPipe çš„ x åæ ‡æ˜¯ 0(å·¦) åˆ° 1(å³)ã€‚</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæˆ‘ä»¬åœ¨ CSS é‡Œé•œåƒç¿»è½¬äº†è§†é¢‘ï¼Œä½†æ•°æ®æœ¬èº«æ²¡æœ‰ç¿»è½¬ã€‚</span>
        <span class="hljs-comment">// åœ¨æ¸¸æˆé‡Œï¼Œä¸ºäº†ç›´è§‚ï¼Œå¦‚æœä½ å‘å³ç§»æ‰‹ï¼Œæˆ‘ä»¬å¸Œæœ› x å˜å¤§ã€‚</span>
        <span class="hljs-comment">// åŸç”Ÿæ•°æ®ï¼šå±å¹•å·¦è¾¹æ˜¯0ï¼Œå³è¾¹æ˜¯1ã€‚</span>
        <span class="hljs-comment">// æ˜ å°„åˆ° 3D åœºæ™¯ï¼šx ä» -10 åˆ° 10ã€‚</span>
        
        <span class="hljs-comment">// å¹³æ»‘ç§»åŠ¨ (Lerp) ä»¥å‡å°‘æŠ–åŠ¨</span>
        <span class="hljs-keyword">const</span> targetX = <span class="hljs-title function_">mapRange</span>(<span class="hljs-number">1</span> - indexFingerTip.<span class="hljs-property">x</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -sceneWidth/<span class="hljs-number">2</span>, sceneWidth/<span class="hljs-number">2</span>); <span class="hljs-comment">// 1-x å› ä¸ºè‡ªæ‹æ¨¡å¼é€šå¸¸æ˜¯é•œåƒ</span>
        player.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> += (targetX - player.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>) * <span class="hljs-number">0.2</span>;
    }
}
</code></pre>
<h3 data-id="heading-10">4. æ¸¸æˆä¸»å¾ªç¯ | Main Game Loop</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">requestAnimationFrame</span>(animate);

    <span class="hljs-keyword">if</span> (gameRunning) {
        frameCount++;
        <span class="hljs-comment">// æ¯ 60 å¸§ç”Ÿæˆä¸€ä¸ªæ–°ç‰©ä½“</span>
        <span class="hljs-keyword">if</span> (frameCount % <span class="hljs-number">60</span> === <span class="hljs-number">0</span>) {
            <span class="hljs-title function_">spawnObject</span>();
        }

        <span class="hljs-comment">// æ›´æ–°æ‰è½ç‰©</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = fallingObjects.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            <span class="hljs-keyword">const</span> obj = fallingObjects[i];
            obj.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> -= obj.<span class="hljs-property">userData</span>.<span class="hljs-property">speed</span>;
            obj.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> += obj.<span class="hljs-property">userData</span>.<span class="hljs-property">rotSpeed</span>.<span class="hljs-property">x</span>;
            obj.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += obj.<span class="hljs-property">userData</span>.<span class="hljs-property">rotSpeed</span>.<span class="hljs-property">y</span>;

            <span class="hljs-comment">// ç¢°æ’æ£€æµ‹ (ç®€å•çš„ AABB æˆ– è·ç¦»æ£€æµ‹)</span>
            <span class="hljs-comment">// æ£€æŸ¥ Y è½´é«˜åº¦æ˜¯å¦åˆ°è¾¾ç©å®¶é«˜åº¦</span>
            <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> &lt; playerY + <span class="hljs-number">1</span> &amp;&amp; obj.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> &gt; playerY - <span class="hljs-number">1</span>) {
                <span class="hljs-comment">// æ£€æŸ¥ X è½´è·ç¦»</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(obj.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> - player.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>) &lt; <span class="hljs-number">2.0</span>) {
                    <span class="hljs-comment">// æ¥ä½äº†ï¼</span>
                    score += <span class="hljs-number">10</span>;
                    scoreEl.<span class="hljs-property">innerText</span> = score;
                    
                    <span class="hljs-comment">// ç‰¹æ•ˆï¼šç©å®¶å‘å…‰ä¸€ä¸‹</span>
                    player.<span class="hljs-property">material</span>.<span class="hljs-property">emissive</span>.<span class="hljs-title function_">setHex</span>(<span class="hljs-number">0xffffff</span>);
                    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> player.<span class="hljs-property">material</span>.<span class="hljs-property">emissive</span>.<span class="hljs-title function_">setHex</span>(<span class="hljs-number">0x004444</span>), <span class="hljs-number">100</span>);

                    <span class="hljs-comment">// ç§»é™¤ç‰©ä½“</span>
                    scene.<span class="hljs-title function_">remove</span>(obj);
                    fallingObjects.<span class="hljs-title function_">splice</span>(i, <span class="hljs-number">1</span>);
                    <span class="hljs-keyword">continue</span>;
                }
            }

            <span class="hljs-comment">// æ‰å‡ºå±å¹•</span>
            <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> &lt; -<span class="hljs-number">10</span>) {
                scene.<span class="hljs-title function_">remove</span>(obj);
                fallingObjects.<span class="hljs-title function_">splice</span>(i, <span class="hljs-number">1</span>);
            }
        }
    }

    renderer.<span class="hljs-title function_">render</span>(scene, camera);
}
</code></pre>
<h2 data-id="heading-11">ğŸ® æ¸¸æˆæœºåˆ¶ | Game Mechanics</h2>
<ol>
<li><strong>æ‰‹åŠ¿æ§åˆ¶</strong>: ä½¿ç”¨é£ŸæŒ‡æ§åˆ¶åº•éƒ¨çš„å¤ªç©ºé£èˆ¹å·¦å³ç§»åŠ¨</li>
<li><strong>ç‰©å“æ”¶é›†</strong>: æ¥ä½ä»å¤©è€Œé™çš„èƒ½é‡çƒè·å¾—åˆ†æ•°</li>
<li><strong>è§†è§‰åé¦ˆ</strong>: æˆåŠŸæ¥ä½ç‰©å“æ—¶é£èˆ¹ä¼šå‘å‡ºå…‰èŠ’</li>
<li><strong>å®æ—¶è®¡åˆ†</strong>: å³ä¸Šè§’æ˜¾ç¤ºå½“å‰å¾—åˆ†</li>
</ol>
<h2 data-id="heading-12">ğŸ› ï¸ ä½¿ç”¨æŒ‡å— | Run Guide</h2>
<h3 data-id="heading-13">æœ¬åœ°è¿è¡Œ | Local Run</h3>
<ol>
<li>å°†ä»£ç ä¿å­˜ä¸º demo02.html</li>
<li>ç”¨ç°ä»£æµè§ˆå™¨ç›´æ¥æ‰“å¼€å³å¯ï¼ˆéœ€å…è®¸æ‘„åƒå¤´æƒé™ï¼‰</li>
</ol>
<h2 data-id="heading-14">ğŸ”§ å®šåˆ¶é¡¹ | Customization Options</h2>






























<table><thead><tr><th>é¡¹ç›®</th><th>ä¿®æ”¹æ–¹æ³•</th><th>æ•ˆæœé¢„è§ˆ</th></tr></thead><tbody><tr><td>é£èˆ¹é¢œè‰²</td><td>æ›´æ”¹ <code>color: 0x00ffcc</code></td><td>ğŸŸ¢ é’è‰²é£èˆ¹ â†’ ğŸŸ£ ç´«è‰²é£èˆ¹</td></tr><tr><td>æ‰è½ç‰©æ ·å¼</td><td>ä¿®æ”¹ <code>IcosahedronGeometry</code></td><td>ğŸ”º æ­£äºŒåé¢ä½“ â†’ ğŸˆ çƒä½“</td></tr><tr><td>æ¸¸æˆéš¾åº¦</td><td>è°ƒæ•´ <code>frameCount % 60</code></td><td>ğŸŒ æ…¢é€Ÿ â†’ âš¡ å¿«é€Ÿ</td></tr><tr><td>åœºæ™¯ä¸»é¢˜</td><td>æ›´æ”¹ <code>scene.background</code></td><td>ğŸŒƒ æ·±è“ â†’ ğŸŒŒ é»‘è‰²</td></tr></tbody></table>
<h2 data-id="heading-15">ğŸ› å¸¸è§é—®é¢˜ | Troubleshooting</h2>
<ol>
<li><strong>æ‘„åƒå¤´æ— æ³•å¯åŠ¨ï¼Ÿ</strong>
<ul>
<li>æ£€æŸ¥æµè§ˆå™¨æƒé™è®¾ç½®</li>
<li>ç¡®ä¿æ²¡æœ‰å…¶ä»–ç¨‹åºå ç”¨æ‘„åƒå¤´</li>
</ul>
</li>
<li><strong>æ‰‹åŠ¿è¯†åˆ«ä¸å‡†ç¡®ï¼Ÿ</strong>
<ul>
<li>ä¿æŒæ‰‹éƒ¨åœ¨æ‘„åƒå¤´æ¸…æ™°å¯è§èŒƒå›´å†…</li>
<li>è°ƒæ•´ç¯å¢ƒå…‰çº¿é¿å…è¿‡æš—æˆ–è¿‡æ›</li>
</ul>
</li>
<li><strong>æ¸¸æˆè¿è¡Œå¡é¡¿ï¼Ÿ</strong>
<ul>
<li>é™ä½æ‰è½ç‰©ç”Ÿæˆé¢‘ç‡</li>
<li>å…³é—­å…¶ä»–å ç”¨èµ„æºçš„ç¨‹åº</li>
</ul>
</li>
</ol>
<h2 data-id="heading-16">ğŸ“š æ‰©å±•å­¦ä¹ èµ„æº | Extended Resources</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fthreejs.org%2Fdocs%2F" target="_blank" title="https://threejs.org/docs/" ref="nofollow noopener noreferrer">Three.js å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgoogle.github.io%2Fmediapipe%2Fsolutions%2Fhands.html" target="_blank" title="https://google.github.io/mediapipe/solutions/hands.html" ref="nofollow noopener noreferrer">MediaPipe Hands æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwebglfundamentals.org%2F" target="_blank" title="https://webglfundamentals.org/" ref="nofollow noopener noreferrer">WebGL Fundamentals æ•™ç¨‹</a></li>
</ul>
<h2 data-id="heading-17">Conclusion | ç»“è¯­</h2>
<ul>
<li>
<p>That's all for today~ -  | ä»Šå¤©å°±å†™åˆ°è¿™é‡Œå•¦~</p>
</li>
<li>
<p>Guys, (ï¿£Ï‰ï¿£(ï¿£Ï‰ï¿£ã€ƒ (ï¿£Ï‰ï¿£ã€ƒ)ã‚ See you tomorrow~~  | å°ä¼™ä¼´ä»¬ï¼Œ(ï¿£Ï‰ï¿£(ï¿£Ï‰ï¿£ã€ƒ (ï¿£Ï‰ï¿£ã€ƒ)ã‚æˆ‘ä»¬æ˜å¤©å†è§å•¦~~</p>
</li>
<li>
<p>Everyone, be happy every day! å¤§å®¶è¦å¤©å¤©å¼€å¿ƒå“¦</p>
</li>
<li>
<p>Welcome everyone to point out any mistakes in the article~  | æ¬¢è¿å¤§å®¶æŒ‡å‡ºæ–‡ç« éœ€è¦æ”¹æ­£ä¹‹å¤„~</p>
</li>
<li>
<p>Learning has no end; win-win cooperation | å­¦æ— æ­¢å¢ƒï¼Œåˆä½œå…±èµ¢</p>
</li>
<li>
<p>Welcome all the passers-by, boys and girls, to offer better suggestions! ~~~  | æ¬¢è¿è·¯è¿‡çš„å°å“¥å“¥å°å§å§ä»¬æå‡ºæ›´å¥½çš„æ„è§å“‡~~</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b641ce5f3468410db683abc7358aba82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGFuZ2RvdTM2OTA5ODY1NQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765642259&amp;x-signature=SA755JfWiVtKdLmWz%2FqcezuCmeM%3D" alt="image" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶æ„å»ºVueé¡¹ç›®çš„å®Œå…¨æŒ‡å—ï¼šæ‰‹æŠŠæ‰‹æ‰“é€ ç°ä»£åŒ–å‰ç«¯å·¥ç¨‹]]></title>    <link>https://juejin.cn/post/7580373352420474906</link>    <guid>https://juejin.cn/post/7580373352420474906</guid>    <pubDate>2025-12-07T01:54:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580373352420474906" data-draft-id="7580310413754646578" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶æ„å»ºVueé¡¹ç›®çš„å®Œå…¨æŒ‡å—ï¼šæ‰‹æŠŠæ‰‹æ‰“é€ ç°ä»£åŒ–å‰ç«¯å·¥ç¨‹"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-12-07T01:54:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶æ„å»ºVueé¡¹ç›®çš„å®Œå…¨æŒ‡å—ï¼šæ‰‹æŠŠæ‰‹æ‰“é€ ç°ä»£åŒ–å‰ç«¯å·¥ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T01:54:20.000Z" title="Sun Dec 07 2025 01:54:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»é›¶æ„å»ºVueé¡¹ç›®çš„å®Œå…¨æŒ‡å—ï¼šæ‰‹æŠŠæ‰‹æ‰“é€ ç°ä»£åŒ–å‰ç«¯å·¥ç¨‹</h2>
<h3 data-id="heading-1">ä¸€ã€é¡¹ç›®æ„å»ºæ•´ä½“æµç¨‹å›¾</h3>
<p>è®©æˆ‘ä»¬å…ˆçœ‹çœ‹å®Œæ•´çš„é¡¹ç›®æ„å»ºæµç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56591c1ad30a459c97e4bdce801f6e14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX6L6wYWxr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765677260&amp;x-signature=okZk0SaantPqXaez0eqjnw7rkEQ%3D" alt="deepseek_mermaid_20251207_d1ddc8.png" loading="lazy"/></p>
<h3 data-id="heading-2">äºŒã€è¯¦ç»†æ„å»ºæ­¥éª¤</h3>
<h4 data-id="heading-3">æ­¥éª¤1ï¼šç¯å¢ƒå‡†å¤‡ä¸é¡¹ç›®åˆå§‹åŒ–</h4>
<p>é¦–å…ˆç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒå·²å‡†å¤‡å¥½ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment">#Â æ£€æŸ¥Node.jsç‰ˆæœ¬ï¼ˆå»ºè®®18+ï¼‰</span>
nodeÂ -v

<span class="hljs-comment">#Â æ£€æŸ¥npmç‰ˆæœ¬</span>
npmÂ -v

<span class="hljs-comment">#Â å®‰è£…VueÂ CLIï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰</span>
npmÂ installÂ -gÂ @vue/cli

<span class="hljs-comment">#Â åˆ›å»ºæ–°é¡¹ç›®</span>
vueÂ createÂ <span class="hljs-keyword">my</span>-vue-project

<span class="hljs-comment">#Â é€‰æ‹©é…ç½®ï¼ˆæ¨èæ‰‹åŠ¨é€‰æ‹©ï¼‰</span>
?Â PleaseÂ pickÂ aÂ preset:Â 
Â Â DefaultÂ ([VueÂ <span class="hljs-number">2</span>]Â babel,Â eslint)
Â Â DefaultÂ (VueÂ <span class="hljs-number">3</span>)Â ([VueÂ <span class="hljs-number">3</span>]Â babel,Â eslint)
â¯Â ManuallyÂ <span class="hljs-keyword">select</span>Â features

<span class="hljs-comment">#Â é€‰æ‹©éœ€è¦çš„åŠŸèƒ½</span>
?Â CheckÂ theÂ featuresÂ neededÂ <span class="hljs-keyword">for</span>Â yourÂ project:
Â â—‰Â Babel
Â â—‰Â TypeScript
Â â—‰Â ProgressiveÂ WebÂ AppÂ (PWA)Â Support
Â â—‰Â Router
Â â—‰Â Vuex
Â â—‰Â CSSÂ Pre-processors
â¯â—‰Â LinterÂ /Â Formatter
Â â—¯Â UnitÂ Testing
Â â—¯Â E2EÂ Testing
</code></pre>
<h4 data-id="heading-4">æ­¥éª¤2ï¼šé¡¹ç›®ç›®å½•ç»“æ„è®¾è®¡</h4>
<p>ä¸€ä¸ªè‰¯å¥½çš„ç›®å½•ç»“æ„æ˜¯é¡¹ç›®æˆåŠŸçš„åŸºç¡€ã€‚è¿™æ˜¯æˆ‘æ¨èçš„ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">my-vue-project/
â”œâ”€â”€Â <span class="hljs-keyword">public</span>/Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â é™æ€èµ„æº</span>
â”‚Â Â Â â”œâ”€â”€Â index.html
â”‚Â Â Â â”œâ”€â”€Â favicon.ico
â”‚Â Â Â â””â”€â”€Â robots.txt
â”œâ”€â”€Â src/
â”‚Â Â Â â”œâ”€â”€Â api/Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â APIæ¥å£ç®¡ç†</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â modules/Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â æŒ‰æ¨¡å—åˆ’åˆ†çš„API</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â index.tsÂ Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â APIç»Ÿä¸€å¯¼å‡º</span>
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â request.tsÂ Â Â Â Â Â Â <span class="hljs-meta">#Â è¯·æ±‚å°è£…</span>
â”‚Â Â Â â”œâ”€â”€Â assets/Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â é™æ€èµ„æº</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â images/
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â styles/
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â fonts/
â”‚Â Â Â â”œâ”€â”€Â components/Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â å…¬å…±ç»„ä»¶</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â common/Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â å…¨å±€é€šç”¨ç»„ä»¶</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â business/Â Â Â Â Â Â Â <span class="hljs-meta">#Â ä¸šåŠ¡ç»„ä»¶</span>
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â index.tsÂ Â Â Â Â Â Â Â <span class="hljs-meta">#Â ç»„ä»¶è‡ªåŠ¨æ³¨å†Œ</span>
â”‚Â Â Â â”œâ”€â”€Â composables/Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â ç»„åˆå¼å‡½æ•°</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â useFetch.ts
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â useForm.ts
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â index.ts
â”‚Â Â Â â”œâ”€â”€Â directives/Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â è‡ªå®šä¹‰æŒ‡ä»¤</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â permission.ts
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â index.ts
â”‚Â Â Â â”œâ”€â”€Â layouts/Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â å¸ƒå±€ç»„ä»¶</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â DefaultLayout.vue
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â AuthLayout.vue
â”‚Â Â Â â”œâ”€â”€Â router/Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â è·¯ç”±é…ç½®</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â modules/Â Â Â Â Â Â Â <span class="hljs-meta">#Â è·¯ç”±æ¨¡å—</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â index.ts
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â guard.tsÂ Â Â Â Â Â <span class="hljs-meta">#Â è·¯ç”±å®ˆå«</span>
â”‚Â Â Â â”œâ”€â”€Â store/Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â Vuex/PiniaçŠ¶æ€ç®¡ç†</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â modules/Â Â Â Â Â Â Â <span class="hljs-meta">#Â æ¨¡å—åŒ–store</span>
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â index.ts
â”‚Â Â Â â”œâ”€â”€Â utils/Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â å·¥å…·å‡½æ•°</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â auth.tsÂ Â Â Â Â Â Â Â <span class="hljs-meta">#Â æƒé™ç›¸å…³</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â validate.tsÂ Â Â Â <span class="hljs-meta">#Â éªŒè¯å‡½æ•°</span>
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â index.ts
â”‚Â Â Â â”œâ”€â”€Â views/Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â é¡µé¢ç»„ä»¶</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â Home/
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â User/
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â About/
â”‚Â Â Â â”œâ”€â”€Â types/Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â TypeScriptç±»å‹å®šä¹‰</span>
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â api.d.ts
â”‚Â Â Â â”‚Â Â Â â”œâ”€â”€Â <span class="hljs-keyword">global</span>.d.ts
â”‚Â Â Â â”‚Â Â Â â””â”€â”€Â index.d.ts
â”‚Â Â Â â”œâ”€â”€Â App.vue
â”‚Â Â Â â””â”€â”€Â main.ts
â”œâ”€â”€Â tests/Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â æµ‹è¯•æ–‡ä»¶</span>
â”œâ”€â”€Â .env.*Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â ç¯å¢ƒå˜é‡</span>
â”œâ”€â”€Â vite.config.tsÂ Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â Viteé…ç½®</span>
â”œâ”€â”€Â tsconfig.jsonÂ Â Â Â Â Â Â Â Â Â Â <span class="hljs-meta">#Â TypeScripté…ç½®</span>
â””â”€â”€Â package.json
</code></pre>
<h4 data-id="heading-5">æ­¥éª¤3ï¼šæ ¸å¿ƒé…ç½®è¯¦è§£</h4>
<h5 data-id="heading-6">1. é…ç½®Viteï¼ˆvite.config.tsï¼‰</h5>
<pre><code class="hljs language-php" lang="php">importÂ {Â defineConfigÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vite'</span>
importÂ vueÂ <span class="hljs-keyword">from</span>Â <span class="hljs-string">'@vitejs/plugin-vue'</span>
importÂ pathÂ <span class="hljs-keyword">from</span>Â <span class="hljs-string">'path'</span>

<span class="hljs-title function_ invoke__">exportÂ defaultÂ defineConfig</span>({
<span class="hljs-attr">Â Â plugins</span>:Â [<span class="hljs-title function_ invoke__">vue</span>()],
<span class="hljs-attr">Â Â resolve</span>:Â {
<span class="hljs-attr">Â Â Â Â alias</span>:Â {
Â Â Â Â Â Â <span class="hljs-string">'@'</span>:Â path.<span class="hljs-title function_ invoke__">resolve</span>(__dirname,Â <span class="hljs-string">'src'</span>),
Â Â Â Â Â Â <span class="hljs-string">'@components'</span>:Â path.<span class="hljs-title function_ invoke__">resolve</span>(__dirname,Â <span class="hljs-string">'src/components'</span>),
Â Â Â Â Â Â <span class="hljs-string">'@views'</span>:Â path.<span class="hljs-title function_ invoke__">resolve</span>(__dirname,Â <span class="hljs-string">'src/views'</span>),
Â Â Â Â },
Â Â },
<span class="hljs-attr">Â Â server</span>:Â {
<span class="hljs-attr">Â Â Â Â host</span>:Â <span class="hljs-string">'0.0.0.0'</span>,
<span class="hljs-attr">Â Â Â Â port</span>:Â <span class="hljs-number">3000</span>,
<span class="hljs-attr">Â Â Â Â proxy</span>:Â {
Â Â Â Â Â Â <span class="hljs-string">'/api'</span>:Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â target</span>:Â <span class="hljs-string">'http://localhost:8080'</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â changeOrigin</span>:Â <span class="hljs-literal">true</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â rewrite</span>:Â (path)Â =&gt;Â path.<span class="hljs-title function_ invoke__">replace</span>(/^/api/,Â <span class="hljs-string">''</span>),
Â Â Â Â Â Â },
Â Â Â Â },
Â Â },
Â Â css:Â {
Â Â Â Â preprocessorOptions:Â {
Â Â Â Â Â Â scss:Â {
Â Â Â Â Â Â Â Â additionalData:Â `@importÂ <span class="hljs-string">"@/assets/styles/variables.scss"</span>;`,
Â Â Â Â Â Â },
Â Â Â Â },
Â Â },
})
</code></pre>
<h5 data-id="heading-7">2. è·¯ç”±é…ç½®ï¼ˆrouter/index.tsï¼‰</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span>Â {Â createRouter,Â createWebHistoryÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vue-router'</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-keyword">type</span>Â {Â <span class="hljs-title class_">RouteRecordRaw</span>Â }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">const</span>Â <span class="hljs-attr">routes</span>:Â <span class="hljs-title class_">RouteRecordRaw</span>[]Â =Â [
Â Â {
Â Â Â Â <span class="hljs-attr">path</span>:Â <span class="hljs-string">'/'</span>,
Â Â Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'Home'</span>,
Â Â Â Â <span class="hljs-attr">component</span>:Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-keyword">import</span>(<span class="hljs-string">'@views/Home/Home.vue'</span>),
Â Â Â Â <span class="hljs-attr">meta</span>:Â {
Â Â Â Â Â Â <span class="hljs-attr">title</span>:Â <span class="hljs-string">'é¦–é¡µ'</span>,
Â Â Â Â Â Â <span class="hljs-attr">requiresAuth</span>:Â <span class="hljs-literal">true</span>,
Â Â Â Â },
Â Â },
Â Â {
Â Â Â Â <span class="hljs-attr">path</span>:Â <span class="hljs-string">'/login'</span>,
Â Â Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'Login'</span>,
Â Â Â Â <span class="hljs-attr">component</span>:Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-keyword">import</span>(<span class="hljs-string">'@views/Login/Login.vue'</span>),
Â Â Â Â <span class="hljs-attr">meta</span>:Â {
Â Â Â Â Â Â <span class="hljs-attr">title</span>:Â <span class="hljs-string">'ç™»å½•'</span>,
Â Â Â Â },
Â Â },
Â Â {
Â Â Â Â <span class="hljs-attr">path</span>:Â <span class="hljs-string">'/user/:id'</span>,
Â Â Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'User'</span>,
Â Â Â Â <span class="hljs-attr">component</span>:Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-keyword">import</span>(<span class="hljs-string">'@views/User/User.vue'</span>),
Â Â Â Â <span class="hljs-attr">props</span>:Â <span class="hljs-literal">true</span>,
Â Â },
]

<span class="hljs-keyword">const</span>Â routerÂ =Â <span class="hljs-title function_">createRouter</span>({
Â Â <span class="hljs-attr">history</span>:Â <span class="hljs-title function_">createWebHistory</span>(),
Â Â routes,
})

<span class="hljs-comment">//Â è·¯ç”±å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to,Â <span class="hljs-keyword">from</span>,Â next</span>)Â =&gt;</span>Â {
Â Â <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span>Â =Â to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span>Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">string</span>Â ||Â <span class="hljs-string">'Vueé¡¹ç›®'</span>
Â Â 
Â Â <span class="hljs-comment">//Â æ£€æŸ¥æ˜¯å¦éœ€è¦ç™»å½•</span>
Â Â <span class="hljs-keyword">if</span>Â (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span>Â &amp;&amp;Â !<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>))Â {
Â Â Â Â <span class="hljs-title function_">next</span>(<span class="hljs-string">'/login'</span>)
Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â <span class="hljs-title function_">next</span>()
Â Â }
})

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â router
</code></pre>
<h5 data-id="heading-8">3. çŠ¶æ€ç®¡ç†ï¼ˆä½¿ç”¨Piniaï¼‰</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â store/user.ts</span>
<span class="hljs-keyword">import</span>Â {Â defineStoreÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">interface</span>Â <span class="hljs-title class_">UserState</span>Â {
Â Â <span class="hljs-attr">userInfo</span>:Â {
Â Â Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-built_in">string</span>
Â Â Â Â <span class="hljs-attr">avatar</span>:Â <span class="hljs-built_in">string</span>
Â Â Â Â <span class="hljs-attr">roles</span>:Â <span class="hljs-built_in">string</span>[]
Â Â }Â |Â <span class="hljs-literal">null</span>
}

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">const</span>Â useUserStoreÂ =Â <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>,Â {
Â Â <span class="hljs-attr">state</span>:Â ():Â <span class="hljs-function"><span class="hljs-params">UserState</span>Â =&gt;</span>Â ({
Â Â Â Â <span class="hljs-attr">userInfo</span>:Â <span class="hljs-literal">null</span>,
Â Â }),
Â Â <span class="hljs-attr">actions</span>:Â {
Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">login</span>(<span class="hljs-params">credentials:Â {Â username:Â <span class="hljs-built_in">string</span>;Â password:Â <span class="hljs-built_in">string</span>Â }</span>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â ç™»å½•é€»è¾‘</span>
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â responseÂ =Â <span class="hljs-keyword">await</span>Â api.<span class="hljs-title function_">login</span>(credentials)
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">userInfo</span>Â =Â response.<span class="hljs-property">data</span>
Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>,Â response.<span class="hljs-property">token</span>)
Â Â Â Â },
Â Â Â Â <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">userInfo</span>Â =Â <span class="hljs-literal">null</span>
Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
Â Â Â Â },
Â Â },
Â Â <span class="hljs-attr">getters</span>:Â {
Â Â Â Â <span class="hljs-attr">isLoggedIn</span>:Â <span class="hljs-function">(<span class="hljs-params">state</span>)Â =&gt;</span>Â !!state.<span class="hljs-property">userInfo</span>,
Â Â Â Â <span class="hljs-attr">hasRole</span>:Â <span class="hljs-function">(<span class="hljs-params">state</span>)Â =&gt;</span>Â <span class="hljs-function">(<span class="hljs-params">role:Â <span class="hljs-built_in">string</span></span>)Â =&gt;</span>Â 
Â Â Â Â Â Â state.<span class="hljs-property">userInfo</span>?.<span class="hljs-property">roles</span>.<span class="hljs-title function_">includes</span>(role)Â ||Â <span class="hljs-literal">false</span>,
Â Â },
})
</code></pre>
<h4 data-id="heading-9">æ­¥éª¤4ï¼šæ ¸å¿ƒå·¥å…·åº“å’Œæ’ä»¶é€‰æ‹©</h4>
<p>è¿™æ˜¯æˆ‘åœ¨é¡¹ç›®ä¸­æ¨èä½¿ç”¨çš„åº“ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{
Â Â <span class="hljs-string">"dependencies"</span>:Â {
Â Â Â Â <span class="hljs-string">"vue"</span>:Â <span class="hljs-string">"^3.3.0"</span>,
Â Â Â Â <span class="hljs-string">"vue-router"</span>:Â <span class="hljs-string">"^4.2.0"</span>,
Â Â Â Â <span class="hljs-string">"pinia"</span>:Â <span class="hljs-string">"^2.1.0"</span>,
Â Â Â Â <span class="hljs-string">"axios"</span>:Â <span class="hljs-string">"^1.4.0"</span>,
Â Â Â Â <span class="hljs-string">"element-plus"</span>:Â <span class="hljs-string">"^2.3.0"</span>,
Â Â Â Â <span class="hljs-string">"lodash-es"</span>:Â <span class="hljs-string">"^4.17.21"</span>,
Â Â Â Â <span class="hljs-string">"dayjs"</span>:Â <span class="hljs-string">"^1.11.0"</span>,
Â Â Â Â <span class="hljs-string">"vxe-table"</span>:Â <span class="hljs-string">"^4.0.0"</span>,
Â Â Â Â <span class="hljs-string">"vue-i18n"</span>:Â <span class="hljs-string">"^9.0.0"</span>
Â Â },
Â Â <span class="hljs-string">"devDependencies"</span>:Â {
Â Â Â Â <span class="hljs-string">"@vitejs/plugin-vue"</span>:Â <span class="hljs-string">"^4.2.0"</span>,
Â Â Â Â <span class="hljs-string">"@types/node"</span>:Â <span class="hljs-string">"^20.0.0"</span>,
Â Â Â Â <span class="hljs-string">"sass"</span>:Â <span class="hljs-string">"^1.62.0"</span>,
Â Â Â Â <span class="hljs-string">"eslint"</span>:Â <span class="hljs-string">"^8.0.0"</span>,
Â Â Â Â <span class="hljs-string">"prettier"</span>:Â <span class="hljs-string">"^3.0.0"</span>,
Â Â Â Â <span class="hljs-string">"husky"</span>:Â <span class="hljs-string">"^8.0.0"</span>,
Â Â Â Â <span class="hljs-string">"commitlint"</span>:Â <span class="hljs-string">"^17.0.0"</span>,
Â Â Â Â <span class="hljs-string">"vitest"</span>:Â <span class="hljs-string">"^0.30.0"</span>,
Â Â Â Â <span class="hljs-string">"unplugin-auto-import"</span>:Â <span class="hljs-string">"^0.16.0"</span>,
Â Â Â Â <span class="hljs-string">"unplugin-vue-components"</span>:Â <span class="hljs-string">"^0.25.0"</span>
Â Â }
}
</code></pre>
<h4 data-id="heading-10">æ­¥éª¤5ï¼šå®ç”¨çš„ç»„ä»¶ç¤ºä¾‹</h4>
<h5 data-id="heading-11">1. å…¨å±€è¯·æ±‚å°è£…</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â src/api/request.ts</span>
<span class="hljs-keyword">import</span>Â axiosÂ <span class="hljs-keyword">from</span>Â <span class="hljs-string">'axios'</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-keyword">type</span>Â {Â <span class="hljs-title class_">AxiosRequestConfig</span>,Â <span class="hljs-title class_">AxiosResponse</span>Â }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'axios'</span>
<span class="hljs-keyword">import</span>Â {Â <span class="hljs-title class_">ElMessage</span>Â }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'element-plus'</span>

<span class="hljs-keyword">const</span>Â serviceÂ =Â axios.<span class="hljs-title function_">create</span>({
Â Â <span class="hljs-attr">baseURL</span>:Â <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_BASE_URL</span>,
Â Â <span class="hljs-attr">timeout</span>:Â <span class="hljs-number">10000</span>,
})

<span class="hljs-comment">//Â è¯·æ±‚æ‹¦æˆªå™¨</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
Â Â <span class="hljs-function">(<span class="hljs-params">config</span>)Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â tokenÂ =Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
Â Â Â Â <span class="hljs-keyword">if</span>Â (token)Â {
Â Â Â Â Â Â config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span>Â =Â <span class="hljs-string">`BearerÂ <span class="hljs-subst">${token}</span>`</span>
Â Â Â Â }
Â Â Â Â <span class="hljs-keyword">return</span>Â config
Â Â },
Â Â <span class="hljs-function">(<span class="hljs-params">error</span>)Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
Â Â }
)

<span class="hljs-comment">//Â å“åº”æ‹¦æˆªå™¨</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
Â Â <span class="hljs-function">(<span class="hljs-params">response:Â AxiosResponse</span>)Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â {Â code,Â data,Â messageÂ }Â =Â response.<span class="hljs-property">data</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">if</span>Â (codeÂ ===Â <span class="hljs-number">200</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â data
Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(messageÂ ||Â <span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>)
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Error</span>(message))
Â Â Â Â }
Â Â },
Â Â <span class="hljs-function">(<span class="hljs-params">error</span>)Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (error.<span class="hljs-property">response</span>?.<span class="hljs-property">status</span>Â ===Â <span class="hljs-number">401</span>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â æœªæˆæƒï¼Œè·³è½¬åˆ°ç™»å½•é¡µ</span>
Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
Â Â Â Â Â Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>Â =Â <span class="hljs-string">'/login'</span>
Â Â Â Â }
Â Â Â Â <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(error.<span class="hljs-property">message</span>Â ||Â <span class="hljs-string">'ç½‘ç»œé”™è¯¯'</span>)
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
Â Â }
)

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â service
</code></pre>
<h5 data-id="heading-12">2. è‡ªåŠ¨å¯¼å…¥ç»„ä»¶é…ç½®</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â vite.config.tsÂ è¡¥å……é…ç½®</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-title class_">AutoImport</span>Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'unplugin-auto-import/vite'</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-title class_">Components</span>Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'unplugin-vue-components/vite'</span>
<span class="hljs-keyword">import</span>Â {Â <span class="hljs-title class_">ElementPlusResolver</span>Â }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'unplugin-vue-components/resolvers'</span>

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â <span class="hljs-title function_">defineConfig</span>({
Â Â <span class="hljs-attr">plugins</span>:Â [
Â Â Â Â <span class="hljs-comment">//Â è‡ªåŠ¨å¯¼å…¥API</span>
Â Â Â Â <span class="hljs-title class_">AutoImport</span>({
Â Â Â Â Â Â <span class="hljs-attr">imports</span>:Â [<span class="hljs-string">'vue'</span>,Â <span class="hljs-string">'vue-router'</span>,Â <span class="hljs-string">'pinia'</span>],
Â Â Â Â Â Â <span class="hljs-attr">dts</span>:Â <span class="hljs-string">'src/types/auto-imports.d.ts'</span>,
Â Â Â Â Â Â <span class="hljs-attr">resolvers</span>:Â [<span class="hljs-title class_">ElementPlusResolver</span>()],
Â Â Â Â }),
Â Â Â Â <span class="hljs-comment">//Â è‡ªåŠ¨å¯¼å…¥ç»„ä»¶</span>
Â Â Â Â <span class="hljs-title class_">Components</span>({
Â Â Â Â Â Â <span class="hljs-attr">dts</span>:Â <span class="hljs-string">'src/types/components.d.ts'</span>,
Â Â Â Â Â Â <span class="hljs-attr">resolvers</span>:Â [<span class="hljs-title class_">ElementPlusResolver</span>()],
Â Â Â Â Â Â <span class="hljs-attr">dirs</span>:Â [<span class="hljs-string">'src/components'</span>],
Â Â Â Â }),
Â Â ],
})
</code></pre>
<h5 data-id="heading-13">3. å®ç”¨çš„Vue 3ç»„åˆå¼å‡½æ•°</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â src/composables/useForm.ts</span>
<span class="hljs-keyword">import</span>Â {Â ref,Â reactive,Â computedÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-keyword">type</span>Â {Â <span class="hljs-title class_">Ref</span>Â }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">function</span>Â useForm&lt;TÂ <span class="hljs-keyword">extends</span>Â <span class="hljs-built_in">object</span>&gt;(<span class="hljs-attr">initialData</span>:Â T)Â {
Â Â <span class="hljs-keyword">const</span>Â formDataÂ =Â <span class="hljs-title function_">reactive</span>({Â ...initialDataÂ })Â <span class="hljs-keyword">as</span>Â T
Â Â <span class="hljs-keyword">const</span>Â errorsÂ =Â reactive&lt;<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>,Â <span class="hljs-built_in">string</span>&gt;&gt;({})
Â Â <span class="hljs-keyword">const</span>Â isSubmittingÂ =Â <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)

Â Â <span class="hljs-keyword">const</span>Â validateÂ =Â <span class="hljs-keyword">async</span>Â ():Â <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;Â =&gt;Â {
Â Â Â Â <span class="hljs-comment">//Â è¿™é‡Œå¯ä»¥é›†æˆå…·ä½“çš„éªŒè¯é€»è¾‘</span>
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">true</span>
Â Â }

Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-title function_">submit</span>Â =Â <span class="hljs-keyword">async</span>Â (<span class="hljs-params">submitFn:Â (data:Â T)Â =&gt;Â <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;</span>)Â =&gt;Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (!(<span class="hljs-keyword">await</span>Â <span class="hljs-title function_">validate</span>()))Â <span class="hljs-keyword">return</span>
Â Â Â Â 
Â Â Â Â isSubmitting.<span class="hljs-property">value</span>Â =Â <span class="hljs-literal">true</span>
Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â resultÂ =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">submitFn</span>(formData)
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â result
Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (error)Â {
Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â error
Â Â Â Â }Â <span class="hljs-keyword">finally</span>Â {
Â Â Â Â Â Â isSubmitting.<span class="hljs-property">value</span>Â =Â <span class="hljs-literal">false</span>
Â Â Â Â }
Â Â }

Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-title function_">reset</span>Â =Â (<span class="hljs-params"/>)Â =&gt;Â {
Â Â Â Â <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(formData,Â initialData)
Â Â Â Â <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(errors).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span>Â =&gt;</span>Â {
Â Â Â Â Â Â errors[key]Â =Â <span class="hljs-string">''</span>
Â Â Â Â })
Â Â }

Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â formData,
Â Â Â Â errors,
Â Â Â Â <span class="hljs-attr">isSubmitting</span>:Â <span class="hljs-title function_">computed</span>(<span class="hljs-function">()Â =&gt;</span>Â isSubmitting.<span class="hljs-property">value</span>),
Â Â Â Â validate,
Â Â Â Â submit,
Â Â Â Â reset,
Â Â }
}
</code></pre>
<h4 data-id="heading-14">æ­¥éª¤6ï¼šå¼€å‘è§„èŒƒä¸æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-15">1. ä»£ç æäº¤è§„èŒƒ</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â å®‰è£…Gitæäº¤é’©å­</span>
npxÂ huskyÂ install
npmÂ installÂ -DÂ @commitlint/config-conventionalÂ @commitlint/cli

<span class="hljs-comment">#Â åˆ›å»ºcommitlinté…ç½®</span>
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"module.exportsÂ =Â {Â extends:Â ['@commitlint/config-conventional']Â }"</span>Â &gt;Â .commitlintrc.js

<span class="hljs-comment">#Â åˆ›å»ºæäº¤ä¿¡æ¯è§„èŒƒ</span>
<span class="hljs-comment">#Â feat:Â æ–°åŠŸèƒ½</span>
<span class="hljs-comment">#Â fix:Â ä¿®å¤bug</span>
<span class="hljs-comment">#Â docs:Â æ–‡æ¡£æ›´æ–°</span>
<span class="hljs-comment">#Â style:Â ä»£ç æ ¼å¼</span>
<span class="hljs-comment">#Â refactor:Â é‡æ„</span>
<span class="hljs-comment">#Â test:Â æµ‹è¯•</span>
<span class="hljs-comment">#Â chore:Â æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨</span>
</code></pre>
<h5 data-id="heading-16">2. ç¯å¢ƒå˜é‡é…ç½®</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â .env.development</span>
<span class="hljs-attr">VITE_APP_TITLE</span>=å¼€å‘ç¯å¢ƒ
<span class="hljs-attr">VITE_API_BASE_URL</span>=/api
<span class="hljs-attr">VITE_USE_MOCK</span>=<span class="hljs-literal">true</span>

<span class="hljs-comment">#Â .env.production</span>
<span class="hljs-attr">VITE_APP_TITLE</span>=ç”Ÿäº§ç¯å¢ƒ
<span class="hljs-attr">VITE_API_BASE_URL</span>=https://api.example.com
<span class="hljs-attr">VITE_USE_MOCK</span>=<span class="hljs-literal">false</span>
</code></pre>
<h4 data-id="heading-17">æ­¥éª¤7ï¼šæ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â è·¯ç”±æ‡’åŠ è½½ä¼˜åŒ–</span>
<span class="hljs-keyword">const</span>Â routesÂ =Â [
Â Â {
Â Â Â Â <span class="hljs-attr">path</span>:Â <span class="hljs-string">'/dashboard'</span>,
Â Â Â Â <span class="hljs-attr">component</span>:Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-keyword">import</span>(<span class="hljs-comment">/*Â webpackChunkName:Â "dashboard"Â */</span>Â <span class="hljs-string">'@/views/Dashboard.vue'</span>),
Â Â },
Â Â {
Â Â Â Â <span class="hljs-attr">path</span>:Â <span class="hljs-string">'/settings'</span>,
Â Â Â Â <span class="hljs-attr">component</span>:Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-keyword">import</span>(<span class="hljs-comment">/*Â webpackChunkName:Â "settings"Â */</span>Â <span class="hljs-string">'@/views/Settings.vue'</span>),
Â Â },
]

<span class="hljs-comment">//Â å›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤</span>
<span class="hljs-comment">//Â src/directives/lazyLoad.ts</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-keyword">type</span>Â {Â <span class="hljs-title class_">Directive</span>Â }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span>Â <span class="hljs-attr">lazyLoad</span>:Â <span class="hljs-title class_">Directive</span>Â =Â {
Â Â <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el,Â binding</span>)Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â observerÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span>Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (entry.<span class="hljs-property">isIntersecting</span>)Â {
Â Â Â Â Â Â Â Â Â Â el.<span class="hljs-property">src</span>Â =Â binding.<span class="hljs-property">value</span>
Â Â Â Â Â Â Â Â Â Â observer.<span class="hljs-title function_">unobserve</span>(el)
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â })
Â Â Â Â })
Â Â Â Â observer.<span class="hljs-title function_">observe</span>(el)
Â Â },
}
</code></pre>
<h3 data-id="heading-18">ä¸‰ã€é¡¹ç›®å¯åŠ¨å’Œå¸¸ç”¨å‘½ä»¤</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â Â Â Â <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"vite"</span><span class="hljs-punctuation">,</span>
Â Â Â Â <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"vue-tscÂ &amp;&amp;Â viteÂ build"</span><span class="hljs-punctuation">,</span>
Â Â Â Â <span class="hljs-attr">"preview"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"viteÂ preview"</span><span class="hljs-punctuation">,</span>
Â Â Â Â <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"eslintÂ .Â --extÂ .vue,.js,.jsx,.cjs,.mjs,.ts,.tsx,.cts,.mtsÂ --fix"</span><span class="hljs-punctuation">,</span>
Â Â Â Â <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"prettierÂ --writeÂ src/"</span><span class="hljs-punctuation">,</span>
Â Â Â Â <span class="hljs-attr">"prepare"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"huskyÂ install"</span><span class="hljs-punctuation">,</span>
Â Â Â Â <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"vitest"</span><span class="hljs-punctuation">,</span>
Â Â Â Â <span class="hljs-attr">"test:coverage"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"vitestÂ --coverage"</span>
Â Â <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-19">å››ã€æ€»ç»“ä¸å»ºè®®</h3>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªç°ä»£åŒ–ã€å¯ç»´æŠ¤çš„Vueé¡¹ç›®åŸºç¡€ã€‚è®°ä½å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li>1.Â <strong>ä¿æŒä¸€è‡´æ€§</strong>Â - æ— è®ºæ˜¯å‘½åè§„èŒƒè¿˜æ˜¯ä»£ç é£æ ¼</li>
<li>2.Â <strong>æ¨¡å—åŒ–è®¾è®¡</strong>Â - åŠŸèƒ½è§£è€¦ï¼Œä¾¿äºç»´æŠ¤å’Œæµ‹è¯•</li>
<li>3.Â <strong>ç±»å‹å®‰å…¨</strong>Â - å……åˆ†åˆ©ç”¨TypeScriptçš„ä¼˜åŠ¿</li>
<li>4.Â <strong>è‡ªåŠ¨åŒ–</strong>Â - å°½å¯èƒ½è‡ªåŠ¨åŒ–é‡å¤å·¥ä½œ</li>
<li>5.Â <strong>æ¸è¿›å¼</strong>Â - ä¸è¦ä¸€å¼€å§‹å°±è¿½æ±‚å®Œç¾ï¼Œæ ¹æ®é¡¹ç›®éœ€æ±‚é€æ­¥å®Œå–„</li>
</ol>
<p>é¡¹ç›®ä»£ç å°±åƒä¸€åº§å¤§å¦ï¼Œè‰¯å¥½çš„åŸºç¡€å†³å®šäº†å®ƒçš„ç¨³å›ºæ€§å’Œå¯æ‰©å±•æ€§ã€‚å¸Œæœ›è¿™ç¯‡æŒ‡å—èƒ½å¸®åŠ©ä½ åœ¨Vueé¡¹ç›®å¼€å‘ä¸­å°‘èµ°å¼¯è·¯ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºAIæ™ºèƒ½ä½“ï¼šå››åäº”ã€ä»ä¸“ç”¨æ’ä»¶åˆ°é€šç”¨åè®®ï¼šMCPå¦‚ä½•é‡æ–°å®šä¹‰AIå·¥å…·ç”Ÿæ€]]></title>    <link>https://juejin.cn/post/7580329353353314350</link>    <guid>https://juejin.cn/post/7580329353353314350</guid>    <pubDate>2025-12-07T00:07:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580329353353314350" data-draft-id="7580378958072381450" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºAIæ™ºèƒ½ä½“ï¼šå››åäº”ã€ä»ä¸“ç”¨æ’ä»¶åˆ°é€šç”¨åè®®ï¼šMCPå¦‚ä½•é‡æ–°å®šä¹‰AIå·¥å…·ç”Ÿæ€"/> <meta itemprop="keywords" content="MCP,Python,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-07T00:07:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å½¼å²¸èŠ±å¼€äº†å—"/> <meta itemprop="url" content="https://juejin.cn/user/4153315734334538"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºAIæ™ºèƒ½ä½“ï¼šå››åäº”ã€ä»ä¸“ç”¨æ’ä»¶åˆ°é€šç”¨åè®®ï¼šMCPå¦‚ä½•é‡æ–°å®šä¹‰AIå·¥å…·ç”Ÿæ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4153315734334538/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å½¼å²¸èŠ±å¼€äº†å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T00:07:08.000Z" title="Sun Dec 07 2025 00:07:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€MCPå¦‚æœŸè€Œè‡³</h2>
<p>æ€ä¹ˆç†è§£MCPï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬å®¶é‡Œæœ‰å„ç§æ™ºèƒ½è®¾å¤‡ï¼šç”µè§†ã€ç©ºè°ƒã€éŸ³å“ã€ç¯å…‰ã€‚æ¯ä¸ªè®¾å¤‡éƒ½æœ‰ä¸€ä¸ªä¸“ç”¨é¥æ§å™¨ï¼Œå¦‚æœæˆ‘ä»¬è¦çœ‹ç”µè§†å¾—ç”¨ç”µè§†é¥æ§å™¨ï¼Œè°ƒç©ºè°ƒå¾—ç”¨ç©ºè°ƒé¥æ§å™¨ï¼Œæ“ä½œç¹çåˆå®¹æ˜“ææ··ã€‚è¿™æ—¶å€™ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä¸‡èƒ½é¥æ§å™¨ï¼Œèƒ½å¤Ÿç»Ÿä¸€æ§åˆ¶æ‰€æœ‰è®¾å¤‡ï¼Œé‚£æˆ‘ä»¬çš„ç”Ÿæ´»æ˜¯ä¸æ˜¯ç¬é—´å˜å¾—ç®€å•å¤šäº†ï¼Ÿ</p>
<p>è¿™æ­£æ˜¯ AI ä¸–ç•Œé¢ä¸´çš„å›°å¢ƒï¼Œç°åœ¨çš„ AI æ¨¡å‹å°±åƒèªæ˜çš„å®¶åº­æˆå‘˜ï¼ŒçŸ¥è¯†æ¸Šåšä½†æ‰‹æ— å¯¸é“â€”â€”æœ‰çš„æ¨¡å‹æœ‰è‡ªå·±çš„å·¥å…·é›†ï¼Œæœ‰çš„æ¨¡å‹æœ‰è‡ªå·±çš„æ’ä»¶åº“ï¼Œæ¯ä¸ª AI éƒ½åƒæ‹¥æœ‰ä¸åŒçš„ä¸“ç”¨é¥æ§å™¨ã€‚å¦‚æœä½ æƒ³åŒæ—¶ä½¿ç”¨å¤šä¸ª AI çš„èƒ½åŠ›ï¼Œå°±å¾—åœ¨ä¸åŒçš„"é¥æ§å™¨"é—´æ¥å›åˆ‡æ¢ï¼Œä½“éªŒå‰²è£‚åˆæ•ˆç‡ä½ä¸‹ã€‚</p>
<p>MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰å°±æ˜¯è¿™ä¸ª"ä¸‡èƒ½é¥æ§å™¨"ã€‚å®ƒåˆ¶å®šäº†ä¸€å¥—æ ‡å‡†åè®®ï¼Œè®©æ‰€æœ‰ AI æ¨¡å‹éƒ½èƒ½é€šè¿‡ç»Ÿä¸€çš„æ¥å£è°ƒç”¨å„ç§å·¥å…·ã€‚å°±åƒä¸‡èƒ½é¥æ§å™¨å®šä¹‰äº†çº¢å¤–ä¿¡å·çš„å‘é€è§„åˆ™ä¸€æ ·ï¼ŒMCP å®šä¹‰äº† AI ä¸å·¥å…·ä¹‹é—´çš„"å¯¹è¯è§„åˆ™"ã€‚</p>
<p>æœ‰äº† MCPï¼Œå¼€å‘äººå‘˜åªéœ€è¦å¼€å‘ä¸€æ¬¡å·¥å…·ï¼Œæ‰€æœ‰æ”¯æŒ MCP çš„ AI éƒ½èƒ½ç«‹å³ä½¿ç”¨ï¼›ç”¨æˆ·åªéœ€è¦é¢å¯¹ä¸€ä¸ª AI åŠ©æ‰‹ï¼Œå°±èƒ½äº«å—æ‰€æœ‰å·¥å…·å¸¦æ¥çš„ä¾¿åˆ©ï¼›AI å‚å•†ä¹Ÿèƒ½ä¸“æ³¨äºæ¨¡å‹æœ¬èº«ï¼Œè€Œä¸æ˜¯é‡å¤é€ è½®å­ï¼Œè¿™å°±æ˜¯ MCP å¸¦æ¥çš„æ ¹æœ¬æ€§å˜é©ï¼šä»æ¯ä¸ª AI éƒ½æœ‰è‡ªå·±çš„å°å·¥å…·ç®±å˜ä¸ºæ‰€æœ‰ AI å…±äº«ä¸€ä¸ªå¤§å·¥å…·åº“ï¼Œè®© AI çœŸæ­£æˆä¸ºè¿æ¥æ•°å­—ä¸–ç•Œçš„æ™ºèƒ½æ¢çº½ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ·±åº¦ç†è§£MCP</h2>
<h3 data-id="heading-2">1. åŸºç¡€ä»‹ç»</h3>
<p>MCPï¼ˆModel Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œå®ƒå…è®¸AIæ¨¡å‹ä¸å¤–éƒ¨å·¥å…·ã€æ•°æ®æºå’ŒæœåŠ¡è¿›è¡Œå®‰å…¨ã€æ ‡å‡†åŒ–çš„äº¤äº’ã€‚å®ƒå®šä¹‰äº† AI æ¨¡å‹å¦‚ä½•ä¸å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡è¿›è¡Œæ ‡å‡†åŒ–é€šä¿¡çš„å¼€æ”¾åè®®ï¼Œæ—¨åœ¨ä¸ºAIæ¨¡å‹æä¾›æ ‡å‡†åŒ–çš„å·¥å…·è°ƒç”¨æ¥å£ã€‚å¯ä»¥æŠŠMCPæƒ³è±¡æˆAIæ¨¡å‹çš„â€œä¸‡èƒ½é¥æ§å™¨â€ï¼Œè®©AIèƒ½å¤Ÿä½¿ç”¨å„ç§å¤–éƒ¨å·¥å…·ï¼Œä»è€Œæ‰©å±•å…¶èƒ½åŠ›ã€‚</p>
<p>MCPæ˜¯ AI é¢†åŸŸçš„USB æ ‡å‡†ï¼Œå›å¿†å¾€æ˜”ï¼Œåœ¨æ²¡æœ‰ USB ä¹‹å‰ï¼Œæ¯ä¸ªè®¾å¤‡éƒ½éœ€è¦è‡ªå·±çš„ä¸“ç”¨æ¥å£ï¼›æœ‰äº† USB ä¹‹åï¼Œæ‰€æœ‰è®¾å¤‡éƒ½å¯ä»¥é€šè¿‡ç»Ÿä¸€æ¥å£è¿æ¥ã€‚MCP å°±æ˜¯å¯¹ AI ä¸–ç•Œåšçš„åŒæ ·çš„äº‹æƒ…ã€‚</p>
<h3 data-id="heading-3">2. æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>**å®¢æˆ·ç«¯ï¼š**é€šå¸¸æ˜¯AIæ¨¡å‹ï¼Œå®ƒå‘å‡ºè¯·æ±‚ï¼Œå¸Œæœ›ä½¿ç”¨å·¥å…·æˆ–è·å–æ•°æ®ã€‚<br/>
**æœåŠ¡å™¨ï¼š**æä¾›å·¥å…·æˆ–æ•°æ®çš„æœåŠ¡ç«¯ï¼Œå®ƒå“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚<br/>
**å·¥å…·ï¼š**æœåŠ¡å™¨æä¾›çš„å¯æ‰§è¡Œæ“ä½œï¼Œæ¯”å¦‚è®¡ç®—å™¨ã€æœç´¢å¼•æ“ã€æ•°æ®åº“æŸ¥è¯¢ç­‰ã€‚<br/>
**èµ„æºï¼š**æœåŠ¡å™¨æä¾›çš„æ•°æ®æºï¼Œæ¯”å¦‚æ–‡ä»¶ã€æ•°æ®åº“è¡¨ç­‰ï¼Œå®¢æˆ·ç«¯å¯ä»¥è¯»å–è¿™äº›èµ„æºã€‚<br/>
**åè®®ï¼š**MCPå®šä¹‰äº†ä¸€å¥—é€šä¿¡è§„åˆ™ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æŒ‰ç…§è¿™å¥—è§„åˆ™è¿›è¡Œäº¤äº’ï¼Œç¡®ä¿å®ƒä»¬èƒ½å¤Ÿäº’ç›¸ç†è§£ã€‚</p>
<h3 data-id="heading-4">3. ä¸ºä»€ä¹ˆéœ€è¦MCP</h3>
<p>AIæ¨¡å‹æœ¬èº«æ‹¥æœ‰ä¸°å¯Œçš„çŸ¥è¯†ï¼Œä½†å­˜åœ¨ä¸€äº›å±€é™ï¼š</p>
<ul>
<li>çŸ¥è¯†æˆªæ­¢ï¼šæ¨¡å‹çš„çŸ¥è¯†æœ‰æˆªæ­¢æ—¥æœŸï¼Œæ— æ³•è·å–æœ€æ–°ä¿¡æ¯ã€‚</li>
<li>æ— æ³•æ‰§è¡ŒåŠ¨ä½œï¼šæ¨¡å‹ä¸èƒ½ç›´æ¥æ“ä½œå¤–éƒ¨ç³»ç»Ÿï¼Œå¦‚å‘é€é‚®ä»¶ã€æŸ¥è¯¢æ•°æ®åº“ã€‚</li>
<li>æ— æ³•è®¿é—®ç§æœ‰æ•°æ®ï¼šæ¨¡å‹ä¸èƒ½è®¿é—®ä¸ªäººçš„ç§æœ‰æ•°æ®ï¼Œå¦‚å…¬å¸æ–‡ä»¶ã€ä¸ªäººç¬”è®°ã€‚</li>
</ul>
<p>MCPçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œè®©AIèƒ½å¤Ÿå®‰å…¨ã€å¯æ§åœ°ä½¿ç”¨å¤–éƒ¨å·¥å…·å’Œæ•°æ®ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€MCPçš„æ ¸å¿ƒæ¶æ„</h2>
<p>MCPé‡‡ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dd0e4a1014a4fd4a005ed6e8ec9f293~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765670984&amp;x-signature=rBk23q0KbgVqSUWm%2FwU%2ByyejEGM%3D" alt="" loading="lazy"/></p>
<p>æŠŠ MCP æ¶æ„æƒ³è±¡æˆä¸€å®¶ç°ä»£åŒ–é¤å…ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">é¡¾å®¢ï¼ˆç”¨æˆ·ï¼‰ â†’ æœåŠ¡å‘˜ï¼ˆAIå®¢æˆ·ç«¯ï¼‰ â†’ å¨æˆ¿ï¼ˆMCPæœåŠ¡å™¨ï¼‰ â†’ å¨å¸ˆï¼ˆå·¥å…·æ‰§è¡Œï¼‰
    â†“               â†“                  â†“                  â†“
<span class="hljs-string">"æˆ‘è¦ç‚¹èœ"</span>       <span class="hljs-string">"ç†è§£éœ€æ±‚ï¼Œ          "</span>æ¥æ”¶è®¢å•ï¼Œ         <span class="hljs-string">"çƒ¹é¥ªèœå“ï¼Œ
                ä¸‹å•ç»™å¨æˆ¿"</span>          åˆ†æ´¾ç»™å¨å¸ˆ<span class="hljs-string">"           å®Œæˆåˆ¶ä½œ"</span>
</code></pre>
<h3 data-id="heading-6">1. å®¢æˆ·ç«¯ï¼ˆClientï¼‰ - "æ™ºèƒ½æœåŠ¡å‘˜"</h3>
<ul>
<li>è§’è‰²ï¼šAI æ¨¡å‹</li>
<li>èŒè´£ï¼š
<ul>
<li>ç†è§£ç”¨æˆ·æ„å›¾ï¼šåˆ†æç”¨æˆ·é—®é¢˜ï¼Œåˆ¤æ–­éœ€è¦ä»€ä¹ˆå·¥å…·</li>
<li>ç®¡ç†å·¥å…·èœå•ï¼šçŸ¥é“å¯ç”¨çš„å·¥å…·åŠå…¶åŠŸèƒ½</li>
<li>åˆ†æ´¾ä»»åŠ¡ï¼šé€‰æ‹©åˆé€‚çš„å·¥å…·å¹¶ä¼ é€’å‚æ•°</li>
<li>æ•´åˆç»“æœï¼šå°†å·¥å…·è¿”å›çš„æ•°æ®è½¬åŒ–ä¸ºè‡ªç„¶è¯­è¨€å›ç­”</li>
</ul>
</li>
<li>å·¥ä½œæµç¨‹ï¼š</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34b04455206f4f418708bf741cefbedc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765670984&amp;x-signature=wgXnMGwAUHMEAD4Vz2giPwHoNCI%3D" alt="" loading="lazy"/></p>
<p><strong>ç”¨æˆ·è¾“å…¥ï¼š"æŸ¥ä¸€ä¸‹åŒ—äº¬ä»Šå¤©å¤©æ°”"</strong></p>
<ul>
<li>1. æ„å›¾åˆ†æ â†’ éœ€è¦å¤©æ°”ä¿¡æ¯</li>
<li>2. å·¥å…·é€‰æ‹© â†’ è°ƒç”¨å¤©æ°”æŸ¥è¯¢å·¥å…·</li>
<li>3. å‚æ•°å‡†å¤‡ â†’ {"city": "åŒ—äº¬", "date": "ä»Šå¤©"}</li>
<li>4. å‘é€è¯·æ±‚ â†’ é€šè¿‡MCPåè®®è°ƒç”¨å·¥å…·</li>
<li>5. æ¥æ”¶ç»“æœ â†’ æ¸©åº¦25Â°Cï¼Œæ™´å¤©</li>
<li>6. ç”Ÿæˆå›ç­” â†’ "åŒ—äº¬ä»Šå¤©æ™´å¤©ï¼Œ25æ‘„æ°åº¦"</li>
</ul>
<h3 data-id="heading-7">2. æœåŠ¡å™¨ï¼ˆServerï¼‰- "ä¸“ä¸šå¨æˆ¿"</h3>
<ul>
<li>è§’è‰²ï¼šå·¥å…·æä¾›è€…</li>
<li>èŒè´£ï¼š
<ul>
<li>å·¥å…·ç®¡ç†ï¼šç»´æŠ¤ä¸€ç»„ä¸“ç”¨å·¥å…·</li>
<li>ä»»åŠ¡æ‰§è¡Œï¼šæ¥æ”¶è¯·æ±‚ï¼Œè°ƒç”¨å…·ä½“å·¥å…·</li>
<li>ç»“æœå¤„ç†ï¼šæ ¼å¼åŒ–å·¥å…·è¿”å›çš„æ•°æ®</li>
<li>å®‰å…¨ä¿éšœï¼šæ§åˆ¶å·¥å…·è®¿é—®æƒé™</li>
</ul>
</li>
<li>æœåŠ¡å™¨ç±»å‹ç¤ºä¾‹ï¼š
<ul>
<li>å¤©æ°”æœåŠ¡å™¨ï¼šä¸“é—¨å¤„ç†å¤©æ°”æŸ¥è¯¢</li>
<li>è®¡ç®—æœåŠ¡å™¨ï¼šä¸“é—¨è¿›è¡Œæ•°å­¦è®¡ç®—</li>
<li>æ–‡ä»¶æœåŠ¡å™¨ï¼šä¸“é—¨å¤„ç†æ–‡ä»¶æ“ä½œ</li>
<li>æ•°æ®åº“æœåŠ¡å™¨ï¼šä¸“é—¨è¿›è¡Œæ•°æ®æŸ¥è¯¢</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">3. MCP åè®® - "ç‚¹é¤æ ‡å‡†åŒ–æµç¨‹"</h3>
<ul>
<li>ä½œç”¨ï¼šå®šä¹‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡è§„åˆ™</li>
<li>æ ¸å¿ƒè§„åˆ™ï¼š
<ul>
<li>1. å·¥å…·å‘ç°ï¼šæœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯"æˆ‘æœ‰ä»€ä¹ˆèœï¼ˆå·¥å…·ï¼‰"</li>
<li>2. å·¥å…·è°ƒç”¨ï¼šå®¢æˆ·ç«¯è¯´"æˆ‘è¦ç‚¹è¿™ä¸ªèœï¼ˆè°ƒç”¨å·¥å…·ï¼‰"</li>
<li>3. å‚æ•°ä¼ é€’ï¼šå®¢æˆ·ç«¯è¯´"è¦è¿™æ ·åšæ³•ï¼ˆä¼ é€’å‚æ•°ï¼‰"</li>
<li>4. ç»“æœè¿”å›ï¼šæœåŠ¡å™¨è¯´"èœåšå¥½äº†ï¼ˆè¿”å›ç»“æœï¼‰"</li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">4. æ¶æ„çš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<ul>
<li>èŒè´£åˆ†ç¦»ï¼Œå„å¸å…¶èŒ
<ul>
<li>AIå®¢æˆ·ç«¯ï¼šä¸“æ³¨äºç†è§£è¯­è¨€ã€ç”Ÿæˆå›ç­”</li>
<li>MCPæœåŠ¡å™¨ï¼šä¸“æ³¨äºå·¥å…·æ‰§è¡Œã€æ•°æ®å¤„ç†</li>
<li>ç»“æœï¼šæ¯ä¸ªç»„ä»¶åšè‡ªå·±æœ€æ“…é•¿çš„äº‹</li>
</ul>
</li>
<li>æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•
<ul>
<li>æ·»åŠ æ–°å·¥å…· = å¼€å‘æ–°æœåŠ¡å™¨</li>
<li>ä¸å½±å“ç°æœ‰ç³»ç»Ÿï¼Œæ— éœ€ä¿®æ”¹AIå®¢æˆ·ç«¯</li>
<li>å°±åƒé¤å…å¢åŠ æ–°èœå“ï¼Œä¸éœ€è¦åŸ¹è®­æ–°æœåŠ¡å‘˜</li>
</ul>
</li>
<li>æ ‡å‡†åŒ–æ¥å£ï¼Œäº’æ“ä½œæ€§å¼º
<ul>
<li>æ‰€æœ‰å·¥å…·ä½¿ç”¨ç›¸åŒè°ƒç”¨æ–¹å¼</li>
<li>æ‰€æœ‰AIå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒåè®®</li>
<li>å®ç°çœŸæ­£çš„"å³æ’å³ç”¨"</li>
</ul>
</li>
</ul>
<h3 data-id="heading-10">5. å¸¸ç”¨æ¶æ„ç±»å‹</h3>
<p><strong>1. å•ä¸ªæœåŠ¡å™¨æ¶æ„</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2ce89777ab8490d94979246e78e1bba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765670984&amp;x-signature=u3sQydDuCjtllmfcikLXbmf1tmA%3D" alt="" loading="lazy"/></p>
<p><strong>æ¶æ„è¯´æ˜ï¼š</strong></p>
<p>è¿™ç§æ¶æ„å°±åƒå¿«é€’åˆ†å‘ä¸­å¿ƒï¼š</p>
<ul>
<li>ç”¨æˆ·æ˜¯å¯„ä»¶äººï¼ˆæå‡ºéœ€æ±‚ï¼‰</li>
<li>AIå®¢æˆ·ç«¯æ˜¯å®¢æœï¼ˆç†è§£éœ€æ±‚å¹¶ä¸‹å•ï¼‰</li>
<li>MCPæœåŠ¡å™¨æ˜¯åˆ†æ‹£ä¸­å¿ƒï¼ˆåˆ†é…ä»»åŠ¡ï¼‰</li>
<li>å„ä¸ªå·¥å…·æ˜¯å¿«é€’å‘˜ï¼ˆæ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼‰</li>
<li>æ¯ä¸ªç¯èŠ‚å„å¸å…¶èŒï¼Œé€šè¿‡æ ‡å‡†åŒ–æµç¨‹é«˜æ•ˆåä½œã€‚</li>
</ul>
<p><strong>2. å¤šä¸ªæœåŠ¡å™¨æ¶æ„</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1c6857ecbca4f43bff9755238cd5915~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765670984&amp;x-signature=X31P%2FdVDkBxuy25ue%2B7OAUPMG90%3D" alt="" loading="lazy"/></p>
<p><strong>æ¶æ„è¯´æ˜ï¼š</strong></p>
<ul>
<li>MCPåè®®å±‚ä½œä¸ºæ ¸å¿ƒè°ƒåº¦ä¸­å¿ƒï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰å·¥å…·æœåŠ¡å™¨çš„è¿æ¥</li>
<li>æ¯ä¸ªå·¥å…·æœåŠ¡å™¨ä¸“é—¨è´Ÿè´£ä¸€ç±»åŠŸèƒ½ï¼ŒèŒè´£å•ä¸€æ˜ç¡®</li>
<li>åº•å±‚èµ„æºï¼ˆAPIã€åº“ã€ç³»ç»Ÿï¼‰è¢«å°è£…åœ¨å„è‡ªçš„æœåŠ¡å™¨ä¸­ï¼Œå®ç°éš”ç¦»å’Œå®‰å…¨æ§åˆ¶</li>
</ul>
<p>è¿™ç§è®¾è®¡è®©æ•´ä¸ªç³»ç»Ÿæ›´åŠ æ¨¡å—åŒ–å’Œå¯æ‰©å±•ï¼Œæ–°å¢å·¥å…·åªéœ€å¼€å‘æ–°çš„æœåŠ¡å™¨å³å¯ï¼Œä¸å½±å“ç°æœ‰æ¶æ„ã€‚</p>
<h2 data-id="heading-11">å››ã€MCPçš„å·¥ä½œæµç¨‹</h2>
<h3 data-id="heading-12">1. æµç¨‹å›¾</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea513edd1c90488c98e8ab1f54139531~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765670984&amp;x-signature=8qhFyfSf3HQjtftIfALVK0N%2B0uQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">2. æµç¨‹è¯´æ˜</h3>
<ul>
<li>1. ç”¨æˆ·æé—® â†’ AIæ¥æ”¶é—®é¢˜</li>
<li>2. AIåˆ†æ â†’ åˆ¤æ–­æ˜¯å¦éœ€è¦å·¥å…·ååŠ©</li>
<li>3. è°ƒç”¨å·¥å…· â†’ é€šè¿‡ MCP åè®®å‘é€è¯·æ±‚</li>
<li>4. å·¥å…·æ‰§è¡Œ â†’ MCP æœåŠ¡å™¨å¤„ç†å…·ä½“æ“ä½œ</li>
<li>5. è¿”å›ç»“æœ â†’ å·¥å…·ç»“æœè¿”å›ç»™ AI</li>
<li>6. æ•´åˆå›ç­” â†’ AI å°†ç»“æœè½¬åŒ–ä¸ºè‡ªç„¶è¯­è¨€</li>
<li>7. æœ€ç»ˆå›å¤ â†’ ç”¨æˆ·å¾—åˆ°å®Œæ•´ç­”æ¡ˆ</li>
</ul>
<h3 data-id="heading-14">3. æ‰§è¡Œæ­¥éª¤</h3>
<p>MCPçš„å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>1. å»ºç«‹è¿æ¥ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡MCPåè®®å»ºç«‹è¿æ¥ã€‚</li>
<li>2. å‘ç°èƒ½åŠ›ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯¢é—®ï¼šâ€œä½ æœ‰ä»€ä¹ˆå·¥å…·å’Œèµ„æºï¼Ÿâ€æœåŠ¡å™¨è¿”å›å¯ç”¨å·¥å…·å’Œèµ„æºçš„åˆ—è¡¨ã€‚</li>
<li>3. è°ƒç”¨å·¥å…·ï¼šå®¢æˆ·ç«¯æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„å·¥å…·ï¼Œå‘æœåŠ¡å™¨å‘é€è°ƒç”¨è¯·æ±‚ï¼ˆåŒ…æ‹¬å·¥å…·åç§°å’Œå‚æ•°ï¼‰ã€‚</li>
<li>4. æ‰§è¡Œå·¥å…·ï¼šæœåŠ¡å™¨æ‰§è¡Œå·¥å…·ï¼Œå¹¶è¿”å›ç»“æœã€‚</li>
<li>5. è¯»å–èµ„æºï¼šå®¢æˆ·ç«¯å¯ä»¥è¯·æ±‚è¯»å–èµ„æºï¼ŒæœåŠ¡å™¨è¿”å›èµ„æºå†…å®¹ã€‚</li>
</ul>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼ŒMCPåè®®å°±åƒç¿»è¯‘å®˜ï¼Œç¡®ä¿å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡é¡ºç•…ã€‚</p>
<h2 data-id="heading-15">äº”ã€ä¸Function Callçš„å·®å¼‚</h2>
<p>å¦‚æœå¯¹Function Callæœ‰å°è±¡ï¼Œå‘ç°ä¸¤è€…ä¼¼ä¹å¾ˆæ¥è¿‘ï¼Œå¯èƒ½è¿˜å¹¶æœªå‘ç°å…¶ä¸­å¤§çš„ä¸åŒï¼Œéƒ½æ˜¯è°ƒç”¨å·¥å…·ï¼Œå®è´¨ä¸Šå·¥å…·è°ƒç”¨æŠ€æœ¯å°±æ˜¯ä¸ºAIå®‰è£…æ‰‹è‡‚çš„æ–¹æ³•ï¼Œè€ŒFunction Callå’ŒMCPä»£è¡¨äº†ä¸¤ç§æˆªç„¶ä¸åŒçš„"æ‰‹è‡‚"å®‰è£…æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-16">1. Function Callçš„å·¥ä½œåŸç†ï¼š</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3dd74dc2cc5140549a6ae8134f43d7fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765670984&amp;x-signature=91j3z8ZFmZH8KFSE1QAbII13opA%3D" alt="" loading="lazy"/>â€‹</p>
<h3 data-id="heading-17">2. å·¥ä½œæµç¨‹å¯¹æ¯”</h3>
<p>åŒä¸€é—®é¢˜â€œåŒ—äº¬å¤©æ°”å¦‚ä½•â€ï¼Œå¯¹æ¯”Function Callå’ŒMCPæµç¨‹æ‰§è¡Œçš„å·®å¼‚ï¼š</p>
<p>Function Callå·¥ä½œæµç¨‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5a2963aff614fcdb68810a696cfa00c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765670984&amp;x-signature=wjTUC2mDJKyLWQKpbmaPQTuhoHw%3D" alt="" loading="lazy"/></p>
<p>MCPå·¥ä½œæµç¨‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f990ac17a344d3db178037ed9c8d31b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765670984&amp;x-signature=S1j2iZBcsXsDk4gs2NOPu55onDw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-18">3. æ¶æ„å·®å¼‚å¯¹æ¯”</h3>
<p>ç‰¹æ€§Â  Â  Â  Â  Â  Â  Â  Â FunctionÂ  Â  Â  Â  Â  Â Call MCPÂ </p>
<p>æ¶æ„æ¨¡å¼Â  Â  Â  Â  å•ä½“é›†æˆå¼Â  Â  Â  Â  åˆ†å¸ƒå¼å®¢æˆ·ç«¯-æœåŠ¡å™¨Â </p>
<p>åè®®æ ‡å‡†Â  Â  Â  Â  å‚å•†ç§æœ‰åè®®Â  Â  Â å¼€æ”¾æ ‡å‡†åè®®Â </p>
<p>å·¥å…·ç®¡ç†Â  Â  Â  Â  é™æ€ç»‘å®šÂ  Â  Â  Â  Â  Â  Â åŠ¨æ€å‘ç°Â </p>
<p>è·¨æ¨¡å‹æ”¯æŒ å—æ¨¡å‹æœ¬èº«é™åˆ¶ï¼Œéƒ¨åˆ†ä¸æ”¯æŒÂ  Â æ”¯æŒä»»ä½•å…¼å®¹MCPçš„æ¨¡å‹</p>
<h3 data-id="heading-19">4. é€‰æ‹©æ¨ä»‹</h3>
<p>è€ƒè™‘å› ç´ Â  Â  Â  Â é€‰æ‹©Function CallÂ  Â  Â  Â  Â  Â  Â é€‰æ‹©MCPÂ </p>
<p>é¡¹ç›®è§„æ¨¡Â  Â  Â  Â å°å‹é¡¹ç›®ã€åŸå‹Â  Â  Â  Â  Â  Â  Â ä¸­å¤§å‹é¡¹ç›®ã€ä¼ä¸šåº”ç”¨Â </p>
<p>æ¨¡å‹éœ€æ±‚Â  Â  Â  Â åªä½¿ç”¨OpenAIæ¨¡å‹Â  Â  Â  Â  éœ€è¦å¤šæ¨¡å‹æ”¯æŒÂ </p>
<p>å¼€å‘èµ„æºÂ  Â  Â  èµ„æºæœ‰é™ï¼Œå¿«é€Ÿä¸Šçº¿Â  Â  Â  Â  æœ‰ä¸“é—¨å¼€å‘å›¢é˜ŸÂ </p>
<p>é•¿æœŸç»´æŠ¤Â  Â  Â  çŸ­æœŸé¡¹ç›®Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â é•¿æœŸç»´æŠ¤é¡¹ç›®Â </p>
<p>å·¥å…·å¤æ‚åº¦Â  ç®€å•å·¥å…·ï¼ˆ&lt;5ä¸ªï¼‰Â  Â  Â  Â  Â  Â å¤æ‚å·¥å…·ç”Ÿæ€ç³»ç»Ÿ</p>
<h2 data-id="heading-20">å…­ã€MCPçš„ä¼˜åŠ¿</h2>
<ul>
<li>æ ‡å‡†åŒ–ï¼šMCPæä¾›ç»Ÿä¸€çš„æ ‡å‡†ï¼Œä½¿å¾—ä»»ä½•æ”¯æŒMCPçš„AIæ¨¡å‹éƒ½å¯ä»¥ä½¿ç”¨ä»»ä½•æ”¯æŒMCPçš„å·¥å…·ï¼Œæ— éœ€å•ç‹¬é€‚é…ã€‚</li>
<li>å®‰å…¨æ€§ï¼šMCPå…è®¸ç”¨æˆ·æ§åˆ¶AIæ¨¡å‹å¯ä»¥è®¿é—®å“ªäº›å·¥å…·å’Œæ•°æ®ï¼Œé¿å…æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚</li>
<li>æ‰©å±•æ€§ï¼šå¼€å‘è€…å¯ä»¥è½»æ¾åœ°ä¸ºAIæ¨¡å‹æ·»åŠ æ–°çš„å·¥å…·ï¼Œæ— é™æ‰©å±•AIçš„èƒ½åŠ›ã€‚</li>
<li>äº’æ“ä½œæ€§ï¼šä¸åŒçš„AIæ¨¡å‹å’Œå·¥å…·å¯ä»¥äº’ç›¸åä½œï¼Œæ‰“ç ´ç”Ÿæ€å£å’ã€‚</li>
</ul>
<h2 data-id="heading-21">ä¸ƒã€MCPçš„åº”ç”¨åœºæ™¯</h2>
<ul>
<li>ä¸ªäººåŠ©æ‰‹ï¼šAIå¯ä»¥å¸®ä½ å‘é€é‚®ä»¶ã€ç®¡ç†æ—¥å†ã€æŸ¥è¯¢å¤©æ°”ç­‰ã€‚</li>
<li>ä¼ä¸šåº”ç”¨ï¼šAIå¯ä»¥æŸ¥è¯¢å…¬å¸æ•°æ®åº“ã€ç”ŸæˆæŠ¥å‘Šã€è‡ªåŠ¨åŒ–å·¥ä½œæµã€‚</li>
<li>å¼€å‘å·¥å…·ï¼šAIå¯ä»¥æ‰§è¡Œä»£ç ã€æŸ¥è¯¢æ–‡æ¡£ã€è°ƒè¯•ç¨‹åºã€‚</li>
<li>æ™ºèƒ½å®¶å±…ï¼šAIå¯ä»¥æ§åˆ¶å®¶é‡Œçš„ç¯å…‰ã€ç©ºè°ƒã€éŸ³å“ç­‰ã€‚</li>
</ul>
<h2 data-id="heading-22">å…«ã€ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šè®¡ç®—å™¨</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªAIæ¨¡å‹ï¼ˆå®¢æˆ·ç«¯ï¼‰å’Œä¸€ä¸ªè®¡ç®—å™¨å·¥å…·ï¼ˆæœåŠ¡å™¨ï¼‰ã€‚</p>
<ul>
<li>å·¥å…·æ³¨å†Œï¼šè®¡ç®—å™¨å·¥å…·å‘MCPæœåŠ¡å™¨æ³¨å†Œï¼Œå‘Šè¯‰æœåŠ¡å™¨å®ƒæœ‰ä¸€ä¸ªâ€œcalculateâ€åŠŸèƒ½ï¼Œå¯ä»¥æ¥æ”¶æ•°å­¦è¡¨è¾¾å¼ã€‚</li>
<li>AIå‘ç°å·¥å…·ï¼šAIï¼ˆå¦‚Claudeï¼‰å¯åŠ¨æ—¶è¿æ¥MCPæœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰AIï¼šâ€œæˆ‘æœ‰è¿™äº›å·¥å…·å¯ç”¨ï¼ŒåŒ…æ‹¬è®¡ç®—å™¨ã€‚â€</li>
<li>ç”¨æˆ·æé—®ï¼šç”¨æˆ·é—®AIï¼šâ€œè®¡ç®—(2+3)*4ç­‰äºå¤šå°‘ï¼Ÿâ€</li>
<li>AIè°ƒç”¨å·¥å…·ï¼šAIè¯†åˆ«å‡ºéœ€è¦è®¡ç®—ï¼Œäºæ˜¯é€šè¿‡MCPåè®®å‘è®¡ç®—å™¨å·¥å…·å‘é€è¯·æ±‚ï¼šâ€œè¯·è®¡ç®—(2+3)*4â€ã€‚</li>
<li>å·¥å…·æ‰§è¡Œå¹¶è¿”å›ï¼šè®¡ç®—å™¨è®¡ç®—åè¿”å›ç»“æœï¼š20ã€‚</li>
<li>AIå›å¤ç”¨æˆ·ï¼šAIå°†ç»“æœæ•´åˆæˆè‡ªç„¶è¯­è¨€å›å¤ï¼šâ€œ(2+3)*4ç­‰äº20ã€‚â€</li>
</ul>
<p><strong>æ‰§è¡Œæµç¨‹å›¾ï¼š</strong></p>
<p>ç¬¬ä¸€æ­¥ï¼šå…ˆå»ºç«‹è¿æ¥ï¼Œå‘ç°å·¥å…·</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/925ecb95231d4911846d56422792c687~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765670984&amp;x-signature=il%2BeOq8xv6rycAKbM9erzSYj120%3D" alt="" loading="lazy"/></p>
<p>ç¬¬äºŒæ­¥ï¼šæ ¹æ®å®é™…ä¸šåŠ¡é€‰æ‹©å·¥å…·è¿›è¡Œæ“ä½œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f26df538163d49afa6e0e4dcd57b77a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765670984&amp;x-signature=04Vsb%2FEJ8%2FTa1OSjrfUMl0QY%2Flo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-23">ä¹ã€æ€»ç»“</h2>
<p>MCP ä¸ä»…ä»…æ˜¯æŠ€æœ¯åè®®ï¼Œæ›´æ˜¯AIç”Ÿæ€ç³»ç»Ÿçš„é‡æ„ã€‚å®ƒè§£å†³äº†AIå‘å±•ä¸­çš„æ ¸å¿ƒçŸ›ç›¾ï¼šæ¨¡å‹æ™ºèƒ½ä¸å·¥å…·èƒ½åŠ›ä¹‹é—´çš„å‰²è£‚ã€‚MCPå°±åƒAIæ¨¡å‹çš„æ‰‹å’Œçœ¼ç›ï¼Œè®©AIèƒ½å¤Ÿæ“ä½œå¤–éƒ¨å·¥å…·å’Œè·å–å¤–éƒ¨æ•°æ®ï¼Œä»è€Œçªç ´è‡ªèº«çš„é™åˆ¶ã€‚é€šè¿‡MCPï¼ŒAIæ¨¡å‹å¯ä»¥å˜å¾—æ›´åŠ å¼ºå¤§å’Œå®ç”¨ï¼Œæˆä¸ºæˆ‘ä»¬ç”Ÿæ´»å’Œå·¥ä½œä¸­çœŸæ­£çš„æ™ºèƒ½åŠ©æ‰‹ã€‚</p>
<p>éšç€MCPç”Ÿæ€çš„å‘å±•ï¼Œæˆ‘ä»¬å¯ä»¥é¢„è§ï¼Œæœªæ¥å°†å‡ºç°å„ç§å„æ ·çš„MCPæœåŠ¡å™¨ï¼Œä¸ºAIæ¨¡å‹æä¾›ä¸°å¯Œçš„èƒ½åŠ›ï¼Œè€ŒAIæ¨¡å‹ä¹Ÿå°†é€šè¿‡MCPåè®®æˆä¸ºè¿æ¥æ•°å­—ä¸–ç•Œçš„æ™ºèƒ½æ¢çº½ã€‚ç®€å•æ¥è¯´ï¼šMCPè®©AIä»çŸ¥é“å¾ˆå¤šä½†åšä¸äº†ä»€ä¹ˆçš„å­¦è€…ï¼Œå˜æˆäº†æ—¢æ‡‚çŸ¥è¯†åˆä¼šæ“ä½œçš„å…¨èƒ½åŠ©æ‰‹ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ä¸è¶³åˆ°ç²¾è¿›ï¼šH5å³å¼€å¹¶è¡ŒåŠ è½½æ–¹æ¡ˆçš„æ¼”è¿›ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7579553111472439350</link>    <guid>https://juejin.cn/post/7579553111472439350</guid>    <pubDate>2025-12-04T03:09:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579553111472439350" data-draft-id="7579562420978204713" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ä¸è¶³åˆ°ç²¾è¿›ï¼šH5å³å¼€å¹¶è¡ŒåŠ è½½æ–¹æ¡ˆçš„æ¼”è¿›ä¹‹è·¯"/> <meta itemprop="keywords" content="å®¢æˆ·ç«¯,å‰ç«¯,WebView"/> <meta itemprop="datePublished" content="2025-12-04T03:09:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="vivoäº’è”ç½‘æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/993614243303053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ä¸è¶³åˆ°ç²¾è¿›ï¼šH5å³å¼€å¹¶è¡ŒåŠ è½½æ–¹æ¡ˆçš„æ¼”è¿›ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614243303053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    vivoäº’è”ç½‘æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T03:09:40.000Z" title="Thu Dec 04 2025 03:09:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œè€…ï¼š vivo äº’è”ç½‘å®¢æˆ·ç«¯å›¢é˜Ÿ- Chen Long</p>
<p>å¹¶è¡ŒåŠ è½½æ˜¯ H5 å³å¼€ SDK çš„åŠ é€ŸæŠ€æœ¯ï¼Œé€šè¿‡ native å±‚åœ¨ç”¨æˆ·æ‰“å¼€é¡µé¢æ—¶å¹¶è¡Œè¯·æ±‚å…³é”®èµ„æºï¼ˆå¦‚ index.html å’Œ CSR æ¨¡å¼ APIï¼‰ï¼Œåˆ©ç”¨ webview åˆå§‹åŒ–æ—¶é—´çª—å£æå‰å‘èµ·è¯·æ±‚ï¼Œå‡å°‘åŠ è½½è€—æ—¶ã€‚å…¶æ ¸å¿ƒæŒ‘æˆ˜æ˜¯è§£å†³ webview ä¸å¹¶è¡Œä»»åŠ¡é—´çš„èµ„æºäº¤æ¥é—®é¢˜ã€‚</p>
</blockquote>
<p>1åˆ†é’Ÿçœ‹å›¾æŒæ¡æ ¸å¿ƒè§‚ç‚¹ğŸ‘‡</p>
<p><img src="https://static001.geekbang.org/infoq/86/864acc212c597569642c99466c88b6db.gif" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å¹¶è¡ŒåŠ è½½èƒ½åŠ›æ ¸å¿ƒè§£æ</h2>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯å¹¶è¡ŒåŠ è½½</h3>
<p>å¹¶è¡ŒåŠ è½½æ˜¯H5å³å¼€SDKæä¾›çš„ä¸€é¡¹åŠ é€Ÿèƒ½åŠ›ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯ï¼šåœ¨ç”¨æˆ·æ‰“å¼€é¡µé¢æ—¶ï¼Œé€šè¿‡nativeå±‚å¹¶è¡Œè¯·æ±‚å…³é”®èµ„æºï¼Œå‡å°‘é¡µé¢åŠ è½½è€—æ—¶ã€‚å…¶æœ¬è´¨æ˜¯åˆ©ç”¨webviewåŠnativeé¡µé¢åˆå§‹åŒ–çš„æ—¶é—´çª—å£ï¼Œæå‰å‘èµ·èµ„æºè¯·æ±‚ï¼Œå®ç°"æ—¶é—´å¤ç”¨"ã€‚</p>
<h3 data-id="heading-2">1.2 æ ¸å¿ƒåŠ è½½èµ„æº</h3>
<p>å¹¶è¡ŒåŠ è½½çš„å…³é”®èµ„æºåŒ…å«ä¸¤ç±»ï¼š</p>
<ul>
<li>
<p>H5é¡µé¢é¦–å¸§æ¸²æŸ“ä¾èµ–çš„index.htmlï¼ˆé¦–å¸§èµ„æºï¼ŒåŠ è½½æ—¶æœºææ—©ï¼‰ã€‚</p>
</li>
<li>
<p>CSRæ¨¡å¼ä¸‹é¡µé¢ä¾èµ–çš„APIæ¥å£ï¼ˆé€šå¸¸åœ¨é¦–å¸§æ¸²æŸ“åè°ƒç”¨ï¼ŒåŠ è½½æ—¶æœºè¾ƒæ™šï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">1.3 å·¥ä½œæµç¨‹ç¤ºæ„å›¾</h3>
<p><img src="https://static001.geekbang.org/infoq/57/57de947c06aedc2896d1fff26a5f3859.png" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å³å¼€SDKåœ¨æµç¨‹ä¸­ä¸»è¦å®Œæˆä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>
<p>ç”¨æˆ·æ‰“å¼€URLæ—¶ï¼Œå¹¶è¡Œè¯·æ±‚H5ä¾èµ–çš„APIæ¥å£æˆ–index.htmlæ–‡ä»¶ã€‚</p>
</li>
<li>
<p>æ‹¦æˆªwebviewè¯·æ±‚ï¼Œå°†å¹¶è¡ŒåŠ è½½çš„ç¼“å­˜æ•°æ®å¯¼æµç»™webviewï¼Œå®ç°åŠ é€Ÿã€‚</p>
</li>
</ol>
<h2 data-id="heading-4">äºŒã€å¹¶è¡ŒåŠ è½½çš„æ ¸å¿ƒæŒ‘æˆ˜ï¼šèµ„æºäº¤æ¥åœºæ™¯</h2>
<p>å¹¶è¡ŒåŠ è½½çš„æ ¸å¿ƒé—®é¢˜æ˜¯å¦‚ä½•åœ¨webviewéœ€è¦èµ„æºæ—¶ï¼Œå°†å¹¶è¡Œè¯·æ±‚çš„èµ„æºæ— ç¼äº¤æ¥ã€‚æ ¹æ®èµ„æºçŠ¶æ€å¯åˆ†ä¸º<strong>ä¸‰ç±»åœºæ™¯</strong>ï¼š</p>
<p><img src="https://static001.geekbang.org/infoq/c7/c745f50b16e6a310eed87cf5639df2c7.png" alt="" loading="lazy"/></p>
<p>ä¸‹é¢æˆ‘ä»¬é’ˆå¯¹ä¸‰ä¸ªåœºæ™¯åˆ†åˆ«çœ‹å¤„ç†æ–¹æ¡ˆ</p>
<h3 data-id="heading-5">2.1 åœºæ™¯ä¸€ï¼šç½‘ç»œæ•°æ®å°šæœªå“åº”ï¼Œwebviewå¼€å§‹éœ€è¦èµ„æº</h3>
<p><strong>è§£å†³æ–¹æ¡ˆä¸€</strong></p>
<p>å¿½ç•¥ç½‘ç»œæ•°æ®ï¼Œwebviewè‡ªå·±åŠ è½½èµ„æºã€‚</p>
<p><strong>çŸ›ç›¾ç‚¹ï¼š</strong></p>
<p><strong>å¦‚æœæ˜¯å› ä¸ºæœåŠ¡å™¨å‹åŠ›å¤§ï¼Œç½‘ç»œç¯å¢ƒå·®å¯¼è‡´çš„å“åº”æ…¢ï¼Œwebviewè‡ªå·±å»åŠ è½½ä¹Ÿä¼šé‡åˆ°åŒæ ·çš„é—®é¢˜ï¼Œè€Œä¸”ç›´æ¥æ”¾å¼ƒå·²å¹¶è¡ŒåŠ è½½çš„ä»»åŠ¡ï¼Œç­‰äºæ˜¯æµªè´¹äº†å·²ç»å¤„äºå»ºè”ä¸­ï¼Œå¯èƒ½å·²ç»å®Œæˆäº†ä¸€éƒ¨åˆ†ç­‰å¾…çš„æ—¶é—´ã€‚</strong></p>
<p><strong>è§£å†³æ–¹æ¡ˆäºŒ</strong></p>
<p>webviewç­‰å¾…ç½‘ç»œèµ„æºåŠ è½½æˆåŠŸåï¼Œå†ä½¿ç”¨åŠ è½½æˆåŠŸçš„èµ„æºã€‚</p>
<p><strong>çŸ›ç›¾ç‚¹ï¼š</strong></p>
<p>è®©webviewçš„èµ„æºè·å–çº¿ç¨‹ç­‰å¾…å¹¶è¡Œä»»åŠ¡å“åº”å¹¶è¿”å›ï¼Œé‚£ä¹ˆç­‰å¤šä¹…ï¼Œå¦‚æœæ—¶é—´å¤ªä¹…æ€ä¹ˆåŠï¼Œéœ€è¦è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå¦‚ä½•ç­‰å¾…ï¼Œå¹¶ä¸”åœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­è¿˜è¦ç›‘æ§å¹¶è¡Œä»»åŠ¡æ˜¯å¦å·²ç»è¿”å›ã€‚</p>
<h3 data-id="heading-6">2.2 åœºæ™¯äºŒï¼šç½‘ç»œæ•°æ®å·²å“åº”ï¼Œwebviewå¼€å§‹éœ€è¦èµ„æº</h3>
<p>åœºæ™¯äºŒéœ€è¦è€ƒè™‘<strong>ä¸¤ç§æƒ…å†µ</strong></p>
<p><strong>æƒ…å†µä¸€</strong></p>
<p>åœ¨webvieéœ€è¦æ•°æ®çš„æ—¶å€™ï¼Œç½‘ç»œæ•°æ®æµåˆšå¥½å®Œæˆå»ºè”ï¼Œwebviewå¯ä»¥ç›´æ¥ä½¿ç”¨ç½‘ç»œæ•°æ®æµåŠ è½½ã€‚</p>
<p><strong>æƒ…å†µäºŒ</strong></p>
<p>ç½‘ç»œæ•°æ®æµå»ºè”çš„æ—¶å€™ï¼Œwebviewè¿˜æœªå¼€å§‹éœ€è¦ä½¿ç”¨æ•°æ®ï¼Œå¹¶è¡Œä»»åŠ¡æœ‰æ—¶é—´å°†ç½‘ç»œæ•°æ®æµè¯»å–åˆ°ç¼“å†²åŒºä¸­ï¼Œwebviewåœ¨éœ€è¦æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥è¯»å–ç¼“å†²åŒºçš„æ•°æ®ã€‚</p>
<p><strong>çŸ›ç›¾ç‚¹ï¼š</strong></p>
<p>å¤§å®¶çŸ¥é“ç½‘ç»œæ•°æ®è¯»å–æ˜¯æœ‰å—é™äºç½‘ç»œç¯å¢ƒå½±å“çš„ï¼Œé¢„å…ˆè¿›è¡Œç½‘ç»œçš„æ•°æ®è¯»å–ï¼Œå†äº¤æ¥ç»™webviewï¼Œè‚¯å®šèƒ½æ›´å¤§ç¨‹åº¦ä¸Šé™ä½è¯»å–è€—æ—¶ï¼Œä½†æ˜¯é—®é¢˜åˆæ¥äº†ï¼Œå¦‚æœå¹¶è¡Œä»»åŠ¡åœ¨è¯»å–çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜æ²¡æœ‰è¯»å®Œï¼Œwebviewå°±æ¥è¦æ•°æ®æ€ä¹ˆåŠï¼Œè®©webviewç­‰å¾…å—ï¼Ÿå¦‚æœç­‰å¾…ï¼Œç­‰å¾…å¤šä¹…ï¼Ÿå¦‚æœä¸ç­‰å¾…ï¼Œåˆå¦‚ä½•å°†å·²è¯»å–åœ¨ç¼“å†²åŒºä¸­çš„æ•°æ®å’Œæœªè¯»å–çš„ç½‘ç»œæµæ•°æ®ä¸€èµ·äº¤ç»™webviewå‘¢ã€‚</p>
<h3 data-id="heading-7">2.3 åœºæ™¯ä¸‰ï¼šç½‘ç»œæ•°æ®è¿”å›é”™è¯¯ï¼Œwebviewå¼€å§‹éœ€è¦èµ„æº</h3>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>å¹¶è¡Œä»»åŠ¡å·²å¤±è´¥ï¼Œç›´æ¥åºŸå¼ƒå¹¶è¡Œä»»åŠ¡ï¼Œè®©webviewè‡ªå·±åŠ è½½èµ„æºã€‚</p>
<h2 data-id="heading-8">ä¸‰ã€æ—©æœŸæ–¹æ¡ˆè®¾è®¡ä¸å±€é™</h2>
<p>åœ¨æœ€å¼€å§‹ï¼Œæˆ‘ä»¬å¸Œæœ›å¹¶è¡Œä»»åŠ¡è®¾è®¡çš„è¶³å¤Ÿç®€å•ï¼ŒåŸºäºä»¥ä¸Šæ‰€æœ‰åœºæ™¯ä¸‹çš„ç†è§£ï¼Œæƒè¡¡å¼€å‘éš¾åº¦ï¼Œæˆ‘ä»¬è®¾è®¡äº†ç¬¬ä¸€ä¸ªæ–¹æ¡ˆã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å¸Œæœ›é¿å¼€åœºæ™¯äºŒä¸­ï¼Œç½‘ç»œæ•°æ®æµå·²å»ºè”ï¼Œç½‘ç»œçº¿ç¨‹æ­£åœ¨è¯»å–ç½‘ç»œæµåˆ°ç¼“å†²åŒºï¼Œè¯»åˆ°ä¸€åŠwebviewæ¥å–æ•°æ®çš„åœºæ™¯ï¼Œå› ä¸ºæˆ‘ä»¬è§‰å¾—è¿™ç§åœºæ™¯è¾ƒä¸ºå¤æ‚ï¼Œå¦‚æœè¿”å›æ··åˆæµï¼Œå¯èƒ½ä¼šå‡ºç°æ§åˆ¶ä¸å¥½çš„æƒ…å†µï¼Œè€Œä¸”æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸¤æ¡çº¿ç¨‹å‚ä¸çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œå­˜åœ¨ä¸€ä¸ªä¸­é—´æ€ï¼Œä¹Ÿå°±æ˜¯ç”Ÿäº§è€…ç”Ÿäº§åˆ°ä¸€åŠæ—¶ï¼Œæ¶ˆè´¹è€…è¿‡æ¥è¦æ¶ˆè´¹æ•°æ®ï¼Œç”Ÿäº§è€…è¦ç«‹åˆ»åœæ­¢ç”Ÿäº§ï¼Œå¹¶æŠŠæœªæˆå“äº¤ç»™æ¶ˆè´¹è€…ï¼Œè¿™æ˜¾ç„¶æ¯”å¸¸è§„çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼æ›´åŠ å¤æ‚ï¼Œäºæ˜¯æˆ‘ä»¬å†³å®šç”¨æ›´ç®€å•çš„æ–¹æ³•æ¥å¤„ç†ï¼Œæ–¹æ¡ˆå°±æ˜¯æŠŠè¿™ä¸ªè¾ƒä¸ºå¤æ‚çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…ï¼Œå˜å›ç®€å•çš„å…¸å‹ç”Ÿäº§è€…æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…ä¸èƒ½æ‰“æ–­ç”Ÿäº§è€…çš„ç”Ÿäº§è¿‡ç¨‹ï¼Œè€Œæ˜¯ç­‰å¾…ç”Ÿäº§å®Œæˆï¼Œé¿å…ä¸­é—´æ€ä¸‹çš„å¤æ‚å¤„ç†ï¼Œè™½ç„¶åšäº†å¦¥åï¼Œä½†æ˜¯æˆ‘ä»¬ä¾ç„¶å¸Œæœ›æœ‰è¾ƒå¥½çš„æ€§èƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†index.htmlä»»åŠ¡å’ŒCSRæ¨¡å¼ä¸‹çš„APIä»»åŠ¡åˆ†ä¸ºä¸¤ä¸ªä¸åŒçš„æ–¹å¼æ¥è¿›è¡Œå¤„ç†ã€‚</p>
<h3 data-id="heading-9">3.1 index.htmlé¦–å¸§èµ„æºå¤„ç†</h3>
<p>index.htmlï¼Œè¿™æ˜¯webviewå®Œæˆåˆå§‹åŒ–åç¬¬ä¸€ä¸ªè¦åŠ è½½çš„èµ„æºï¼Œä¿—ç§°é¦–å¸§èµ„æºã€‚å› æ­¤index.htmlçš„ä½¿ç”¨æ—¶æœºå¯ä»¥è¯´æ˜¯éå¸¸çš„é å‰ï¼Œåœ¨å¹¶è¡ŒåŠ è½½ä»»åŠ¡ä¸­ï¼Œå®ƒçš„å¯ç”¨å¹¶è¡ŒåŠ è½½æ—¶é—´ä¹Ÿå¤§è‡´åœ¨100mså·¦å³ï¼Œæˆ‘ä»¬è®¤ä¸ºåœ¨è¿™ä¸ªæ—¶é—´å†…ï¼Œå¹¶è¡Œä»»åŠ¡å¤§æ¦‚ç‡å¯ä»¥å®Œæˆå»ºè”ï¼Œä½†æ˜¯å¯èƒ½æ²¡æœ‰æ—¶é—´å†å®Œæˆæ•°æ®æµçš„è¯»å–ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†streamå¯¹è±¡æ¥ä¿å­˜ç½‘ç»œæ•°æ®æµã€‚</p>
<p>ç”¨æˆ·ç‚¹å‡»H5å…¥å£æŒ‰é’®ï¼Œå¹¶è¡Œindexä»»åŠ¡å‘èµ·ï¼Œè®¿é—®ç½‘ç»œå¼€å§‹å»ºè”ï¼Œä¸€ä½†å®Œæˆæœ‰æ•ˆå»ºè”ï¼Œåˆ™ä¿å­˜ç½‘ç»œstreamå¯¹è±¡ï¼Œå½“webviewéœ€è¦ä½¿ç”¨è¯¥æ•°æ®æµçš„æ—¶å€™ï¼Œåˆ¤å®šstreamå¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç›´æ¥ä½¿ç”¨è¯¥æ•°æ®æµï¼Œå¦‚æœstreamå¯¹è±¡ä¸å­˜åœ¨ï¼Œåˆ™åˆ¤å®šç½‘ç»œè®¿é—®æ˜¯å¦è¿”å›ï¼Œå¦‚æœæ˜¯å› ä¸ºç½‘ç»œè®¿é—®å¤±è´¥å¯¼è‡´streamä¸ºç©ºï¼Œåˆ™è®¤ä¸ºæ˜¯å¹¶è¡Œä»»åŠ¡å¤±è´¥ï¼Œå¦åˆ™ä¼šè¿›å…¥ç­‰å¾…æ¨¡å¼ï¼Œç­‰å¾…æ¨¡å¼ä¸‹ï¼Œçº¿ç¨‹å»ºç«‹ä¸€ä¸ªå¾ªç¯ä½“ï¼Œæ¯éš”5msï¼Œæ¢æµ‹ä¸€æ¬¡streamæ˜¯å¦å­˜åœ¨ï¼Œç½‘ç»œæ˜¯å¦å·²å®Œæˆå»ºè”ï¼Œä¸€ä½†æ¢æµ‹åˆ°ç»“æœï¼Œåˆ™é€€å‡ºå¾ªç¯ä½“ï¼Œå³ä½¿å¤šæ¬¡æ²¡æœ‰æ¢æµ‹åˆ°ç»“æœï¼Œ1500msåä¾ç„¶é€€å‡ºå¾ªç¯ä½“ï¼Œæ­¤æ—¶æ”¾å¼ƒå¹¶è¡Œä»»åŠ¡æ•°æ®ï¼Œæ”¹ä¸ºwebviewè‡ªä¸»åŠ è½½èµ„æºã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ä¸ªæ–¹æ¡ˆ</p>
<p>å¾ªç¯ä½“çš„ç­‰å¾…æœºåˆ¶å®ç°äº†æ¶ˆè´¹è€…ç­‰å¾…ç”Ÿäº§è€…å®Œæˆç”Ÿäº§çš„è¿‡ç¨‹ï¼Œ5msçš„æ£€æµ‹æ—¶æœºï¼Œå®ç°äº†ç”Ÿäº§è€…ç”Ÿäº§å®Œæˆåï¼Œæ¶ˆè´¹è€…çŸ¥æ™“ç”Ÿäº§è€…ç”Ÿäº§çŠ¶æ€çš„èƒ½åŠ›ï¼Œ1500msçš„çš„è¶…æ—¶é€€å‡ºï¼Œè§£å†³äº†ç”Ÿäº§è€…å‡ºç°é—®é¢˜æ—¶ï¼Œæ¶ˆè´¹è€…å›°åœ¨å¾ªç¯ç­‰å¾…ä¸­çš„æƒ…å†µã€‚æ•´ä¸ªæ–¹æ¡ˆï¼Œåªåœ¨ä¿å­˜çš„streamå¯¹è±¡ä¸Šæ·»åŠ volatileå…³é”®å­—ï¼Œå®ç°è½»é‡çš„å¯¹è±¡å¯è§æ€§çº¿ç¨‹åŒæ­¥ã€‚</p>
<p>æ•´ä½“<strong>æ–¹æ¡ˆé€»è¾‘</strong>å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-10">3.1.1 indexå¹¶è¡Œä»»åŠ¡å‘èµ·</h4>
<pre><code class="hljs language-css" lang="css">flowchart <span class="hljs-selector-tag">TD</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[ç”¨æˆ·ç‚¹å‡»H5å…¥å£æŒ‰é’®]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[å¹¶è¡Œå‘èµ·indexä»»åŠ¡]</span>
    <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[nativeè®¿é—®ç½‘ç»œå¼€å§‹å»ºè”]</span>
    C --&gt; D{å»ºè”æˆåŠŸ?}
    D --&gt;|æ˜¯| E<span class="hljs-selector-attr">[ä¿å­˜ç½‘ç»œStreamå¯¹è±¡]</span>
    E --&gt;F<span class="hljs-selector-attr">[è®°å½•ç»“æŸçŠ¶æ€]</span>
    D --&gt;|å¦| F<span class="hljs-selector-attr">[è®°å½•ç»“æŸçŠ¶æ€]</span>
</code></pre>
<p><img src="https://static001.geekbang.org/infoq/44/442a37bb1dcb13fdaaa7aa5717d9e8cf.jpeg" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-11">3.1.2 webviewä½¿ç”¨indexèµ„æº</h4>
<pre><code class="hljs language-css" lang="css">flowchart <span class="hljs-selector-tag">TD</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[ç”¨æˆ·ç‚¹å‡»H5å…¥å£æŒ‰é’®]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[webviewåˆå§‹åŒ–]</span>
    <span class="hljs-selector-tag">B</span> --&gt; C{éœ€è¦ä½¿ç”¨indexæ•°æ®æµ}
    C --&gt;|æ˜¯| D<span class="hljs-selector-attr">[æŸ¥æ‰¾streamå¯¹è±¡æ˜¯å¦å­˜åœ¨]</span>
    D --&gt;|å­˜åœ¨| E<span class="hljs-selector-attr">[ç›´æ¥ä½¿ç”¨æ•°æ®æµ]</span>
    D --&gt;|ä¸å­˜åœ¨| F{ç½‘ç»œè®¿é—®å·²ç»“æŸ?}
    F --&gt;|æ˜¯ä¸”streamä¸ºç©º| G<span class="hljs-selector-attr">[åˆ¤å®šå¹¶è¡Œä»»åŠ¡å¤±è´¥]</span>
    F --&gt;|å¦| H<span class="hljs-selector-attr">[è¿›å…¥ç­‰å¾…æ¨¡å¼]</span>
    H --&gt; <span class="hljs-selector-tag">I</span><span class="hljs-selector-attr">[å»ºç«‹æ¢æµ‹å¾ªç¯ä½“]</span>
    <span class="hljs-selector-tag">I</span> --&gt; J<span class="hljs-selector-attr">[æ¯éš”5msæ¢æµ‹]</span>
    J --&gt; K{streamå­˜åœ¨?}
    K --&gt;|æ˜¯| L<span class="hljs-selector-attr">[ä½¿ç”¨æ•°æ®æµå¹¶é€€å‡ºå¾ªç¯]</span>
    K --&gt;|å¦| M{å¹¶è¡Œä»»åŠ¡å·²ç»“æŸ?}
    M --&gt;|æ˜¯| N<span class="hljs-selector-attr">[æ”¾å¼ƒå¹¶è¡Œä»»åŠ¡å¹¶é€€å‡ºå¾ªç¯]</span>
    M --&gt;|å¦| O{è¾¾åˆ°<span class="hljs-number">1500ms</span>?}
    O --&gt;|æ˜¯| <span class="hljs-selector-tag">P</span><span class="hljs-selector-attr">[è¶…æ—¶é€€å‡ºå¾ªç¯]</span>
    O --&gt;|å¦| J
    <span class="hljs-selector-tag">P</span> --&gt; <span class="hljs-selector-tag">Q</span><span class="hljs-selector-attr">[webviewè‡ªä¸»åŠ è½½èµ„æº]</span>
    N --&gt; <span class="hljs-selector-tag">Q</span>
    L --&gt; R<span class="hljs-selector-attr">[æµç¨‹ç»“æŸ]</span>
    G --&gt; <span class="hljs-selector-tag">Q</span>
    <span class="hljs-selector-tag">Q</span> --&gt; R
</code></pre>
<p><img src="https://static001.geekbang.org/infoq/0f/0f1907c80c44bc440b80b462e90d3305.jpeg" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-12">3.2 API æ¥å£èµ„æºå¤„ç†</h3>
<p>APIæ¥å£é€šå¸¸åœ¨é¡µé¢å®Œæˆç¬¬ä¸€æ¬¡æ¸²æŸ“åï¼Œæ‰å¼€å§‹è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™é¡µé¢å¯èƒ½ä¼šå±•ç¤ºä¸€ä¸ªloadingçŠ¶æ€ï¼Œæˆ–è€…æ˜¯éª¨æ¶å±ï¼Œè¿™ä¸ªæ—¶æœºç›¸å¯¹é åï¼Œå¹¶è¡Œä»»åŠ¡æœ‰å……è¶³çš„æ—¶é—´æ¥å®Œæˆç½‘ç»œçš„å»ºè”ä»»åŠ¡ï¼Œç”šè‡³æœ‰å……è¶³çš„æ—¶é—´å°†ç½‘ç»œæµè¯»å–åˆ°ç¼“å†²åŒºä¸­ã€‚</p>
<p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¿å­˜äº†ä¸€ä¸ªbyteæ•°ç»„ï¼Œå°†ç½‘ç»œæµæ•°æ®è¯»å–åˆ°è¿™ä¸ªbyteæ•°ç»„ä¸­ï¼Œwebviewéœ€è¦ä½¿ç”¨æ•°æ®æ—¶ï¼Œå°†byteæ•°ç»„åŒ…è£…æˆByteArrayInputStreamè¿”å›ã€‚</p>
<p>é€»è¾‘å›¾å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-13">3.2.1 APIå¹¶è¡Œä»»åŠ¡å‘èµ·</h4>
<pre><code class="hljs language-css" lang="css">flowchart <span class="hljs-selector-tag">TD</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[ç”¨æˆ·ç‚¹å‡»H5å…¥å£æŒ‰é’®]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[å¹¶è¡Œå‘èµ·indexä»»åŠ¡]</span>
    <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[nativeè®¿é—®ç½‘ç»œå¼€å§‹å»ºè”]</span>
    C --&gt; D{å»ºè”æˆåŠŸ?}
    D --&gt;|æ˜¯| E<span class="hljs-selector-attr">[è¯»å–ç½‘ç»œstream]</span>
    E --&gt; F<span class="hljs-selector-attr">[ä¿å­˜åˆ°æœ¬åœ°byteæ•°ç»„]</span>
    D --&gt;|å¦| G<span class="hljs-selector-attr">[è®°å½•ç»“æŸçŠ¶æ€]</span>
    F --&gt; H<span class="hljs-selector-attr">[æµç¨‹å®Œæˆ]</span>
    G --&gt; H
</code></pre>
<p><img src="https://static001.geekbang.org/infoq/c5/c54d989c18eadf5111df6e2b141c297b.png" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-14">3.2.2 webviewä½¿ç”¨APIèµ„æº</h4>
<pre><code class="hljs language-css" lang="css">flowchart <span class="hljs-selector-tag">TD</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[ç”¨æˆ·ç‚¹å‡»H5å…¥å£æŒ‰é’®]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[webviewåˆå§‹åŒ–]</span>
    <span class="hljs-selector-tag">B</span> --&gt; C{éœ€è¦ä½¿ç”¨indexæ•°æ®æµ}
    C --&gt;|æ˜¯| D<span class="hljs-selector-attr">[æŸ¥æ‰¾byteæ•°ç»„æ˜¯å¦å­˜åœ¨]</span>
    D --&gt;|å­˜åœ¨| E<span class="hljs-selector-attr">[å°è£…ä¸ºByteArrayInputStreamè¿”å›ç»™webview]</span>
    E --&gt; X<span class="hljs-selector-attr">[æµç¨‹ç»“æŸ]</span>
    
    D --&gt;|ä¸å­˜åœ¨| G{ç½‘ç»œè®¿é—®å·²ç»“æŸ?}
    G --&gt;|æ˜¯ä¸”byteæ•°ç»„ä¸ºç©º| H<span class="hljs-selector-attr">[åˆ¤å®šå¹¶è¡Œä»»åŠ¡å¤±è´¥]</span>
    G --&gt;|å¦| <span class="hljs-selector-tag">I</span><span class="hljs-selector-attr">[è¿›å…¥ç­‰å¾…æ¨¡å¼]</span>
    
    <span class="hljs-selector-tag">I</span> --&gt; J<span class="hljs-selector-attr">[å»ºç«‹æ¢æµ‹å¾ªç¯ä½“]</span>
    J --&gt; K<span class="hljs-selector-attr">[æ¯éš”5msæ¢æµ‹]</span>
    K --&gt; L{byteæ•°ç»„å­˜åœ¨?}
    L --&gt;|æ˜¯| M<span class="hljs-selector-attr">[å°è£…ä½¿ç”¨å¹¶é€€å‡ºå¾ªç¯]</span>
    L --&gt;|å¦| N{å¹¶è¡Œä»»åŠ¡å·²ç»“æŸ?}
    N --&gt;|æ˜¯| O<span class="hljs-selector-attr">[æ”¾å¼ƒå¹¶è¡Œä»»åŠ¡å¹¶é€€å‡º]</span>
    N --&gt;|å¦| <span class="hljs-selector-tag">P</span>{è¾¾åˆ°<span class="hljs-number">1500ms</span>?}
    <span class="hljs-selector-tag">P</span> --&gt;|æ˜¯| <span class="hljs-selector-tag">Q</span><span class="hljs-selector-attr">[è¶…æ—¶é€€å‡º]</span>
    <span class="hljs-selector-tag">P</span> --&gt;|å¦| K
    
    M --&gt; E
    O --&gt; R<span class="hljs-selector-attr">[webviewè‡ªä¸»åŠ è½½]</span>
    <span class="hljs-selector-tag">Q</span> --&gt; R
    H --&gt; R
    R --&gt; X
</code></pre>
<p><img src="https://static001.geekbang.org/infoq/35/3527bfb2a5726d346e1a38d8300a6c3b.png" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»ä¸Šè¿°çš„é€»è¾‘å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä½†ç½‘ç»œå»ºè”çš„æ—¶é—´ä¸è¶³ï¼Œæ•°æ®å“åº”ä¸åŠæ—¶ï¼Œwebviewå°±ä¼šå¤„äºç­‰å¾…çŠ¶æ€ã€‚</p>
<p>æœ‰ä¸¤ç§åœºæ™¯ä¼šå¯¼è‡´webviewå»ºç«‹çº¿ç¨‹å¾ªç¯ä½“ç­‰å¾…èµ„æºï¼š</p>
<p>**åœºæ™¯ä¸€ï¼š**å¹¶è¡Œå‘èµ·çš„ç½‘ç»œè¯·æ±‚ï¼Œå› ä¸ºç½‘ç»œé€Ÿåº¦æ…¢ï¼Œå°šæœªå»ºè”è¿”å›æœ‰æ•ˆçš„ç½‘ç»œstreamã€‚</p>
<p>**åœºæ™¯äºŒï¼š**åœ¨å¹¶è¡ŒAPIçš„åœºæ™¯ä¸‹ï¼Œè™½ç„¶å·²ç»å»ºè”ï¼Œä½†æ˜¯ç½‘ç»œstreamæ•°æ®è¯»å–ä¸­ï¼Œå°šæœªå®Œå…¨è¯»å–åˆ°ç¼“å†²åŒºï¼Œwebviewä¼šç­‰å¾…ç¼“å†²åŒºç¼“å†²å®Œæˆã€‚</p>
<p>è¿™ä¸¤ç§åœºæ™¯ï¼Œéƒ½ä¼šé€ æˆæ—¶é—´çš„æµªè´¹</p>
<p><strong>åœºæ™¯ä¸€</strong>çš„ç­‰å¾…è™½ç„¶ä¸å¯é¿å…ï¼Œä½†æ˜¯webviewçš„å¾ªç¯ä½“æ£€æµ‹æœºåˆ¶ï¼Œæ¯éš”5msæ‰ä¼šæ£€æµ‹ä¸€æ¬¡ï¼Œæœ€å·®çš„æƒ…å†µä¸‹ï¼Œæ— æ•ˆç­‰å¾…æ—¶é—´å¯ä»¥æœ€é•¿è¾¾åˆ°5msï¼ˆä¸Šä¸€æ¬¡å¾ªç¯æ£€æµ‹åˆšç»“æŸï¼Œç½‘ç»œå³å®Œæˆå»ºè”ï¼Œéœ€è¦ä¸‹ä¸€ä¸ª5msä¹‹åæ‰ä¼šå‘èµ·æ£€æµ‹ï¼‰ã€‚</p>
<p><strong>åœºæ™¯äºŒ</strong>çš„æ— æ•ˆç­‰å¾…æ—¶é—´å°±æ›´é•¿äº†ï¼Œå³ä½¿å·²ç»å®Œæˆå»ºè”ï¼Œwebviewä¹Ÿè¦ç­‰å¾…ç¼“å­˜å…¨éƒ¨å®Œæˆï¼Œå¾…ç¼“å­˜å®Œæˆä¹‹åï¼Œwebviewåˆå†æ¬¡ä»ç¼“å†²åŒºè¯»å–ä¸€æ¬¡æ•°æ®ï¼Œå…¨é‡ç¼“å­˜ä¸å°±æµªè´¹äº†æ—¶é—´ï¼Œè¿˜æµªè´¹äº†å†…å­˜ã€‚</p>
<h3 data-id="heading-15">3.3 æ—©æœŸæ–¹æ¡ˆçš„æ ¸å¿ƒå±€é™</h3>
<ul>
<li>
<p><strong>æ—¶é—´æµªè´¹</strong>ï¼šå¾ªç¯æ¢æµ‹ï¼ˆæ¯ 5ms ä¸€æ¬¡ï¼‰å­˜åœ¨æ— æ•ˆç­‰å¾…</p>
</li>
<li>
<p><strong>å†…å­˜æµªè´¹</strong>ï¼šAPI æ¥å£å…¨é‡ç¼“å­˜å ç”¨é¢å¤–å†…å­˜</p>
</li>
<li>
<p><strong>èµ„æºåˆ©ç”¨ç‡ä½</strong>ï¼šæ”¾å¼ƒéƒ¨åˆ†åŠ è½½çš„èµ„æºï¼Œæœªå……åˆ†åˆ©ç”¨å¹¶è¡Œè¯·æ±‚çš„æ—¶é—´çª—å£</p>
</li>
</ul>
<h2 data-id="heading-16">å››ã€æ–¹æ¡ˆæ¼”è¿›ï¼šä¼˜åŒ–æ—¶é—´ä¸å†…å­˜æ¶ˆè€—</h2>
<p>åœ¨åæ€æ—©æœŸæ–¹æ¡ˆçš„å¼Šç«¯ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†å†…å­˜çš„æ¶ˆè€—å’Œæ—¶é—´ä¸Šçš„æµªè´¹ï¼Œé‚£ä¹ˆæ–°æ–¹æ¡ˆçš„ä¼˜åŒ–ä¾§é‡ç‚¹å°±æ˜¯ä¼˜åŒ–å†…å­˜çš„æ¶ˆè€—å’Œå¾ªç¯ç­‰å¾…æ—¶é—´ä¸Šçš„æ¶ˆè€—ï¼Œä¼˜åŒ–è€—æ—¶çš„ä¼˜åŒ–å¤§åˆ€æ˜¯ç›´æ¥å¹²æ‰å¾ªç¯ç­‰å¾…ï¼Œä¼˜åŒ–å†…å­˜æ¶ˆè€—çš„ä¼˜åŒ–å¤§åˆ€æ˜¯å¹²æ‰å…¨é‡çš„ç¼“å­˜å»ºç«‹ï¼Œä½†æ˜¯åšåŠ æ³•ç®€å•ï¼Œåšå‡æ³•å°±æ²¡é‚£ä¹ˆå®¹æ˜“ã€‚</p>
<h3 data-id="heading-17">4.1 ä¼˜åŒ–æ€è·¯</h3>
<p>æ–°æ–¹æ¡ˆçš„æ ¸å¿ƒæ˜¯è§£å†³ä¸­é—´æ€äº¤æ¥é—®é¢˜ï¼Œé€šè¿‡çº¿ç¨‹åŒæ­¥å’Œæµæ¡¥æ¥æŠ€æœ¯å®ç°ä¼˜åŒ–ã€‚</p>
<p>æ•´ä½“çš„æ„æ€å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong>å¹²æ‰å¾ªç¯ç­‰å¾…</strong>ï¼šç”¨çº¿ç¨‹åŒæ­¥æœºåˆ¶æ›¿ä»£è½®è¯¢</p>
</li>
<li>
<p><strong>å¹²æ‰å…¨é‡ç¼“å­˜</strong>ï¼šé‡‡ç”¨åŠç¼“å†²æ¨¡å¼ï¼Œä»…ç¼“å­˜éƒ¨åˆ†æ•°æ®</p>
</li>
<li>
<p><strong>æ”¯æŒä¸­é—´æ€äº¤æ¥</strong>ï¼šå…è®¸ webview æ‰“æ–­å¹¶è¡Œä»»åŠ¡ï¼Œåˆå¹¶å·²ç¼“å†²ä¸æœªç¼“å†²æ•°æ®</p>
</li>
</ul>
<h3 data-id="heading-18">4.2 æŠ€æœ¯å®ç°ï¼šç”Ÿäº§è€… - æ¶ˆè´¹è€…æ¨¡å‹</h3>
<h4 data-id="heading-19">4.2.1 æ ¸å¿ƒé€»è¾‘</h4>
<p>æˆ‘ä»¬æŠŠç½‘ç»œå»ºè”+ç½‘ç»œæ•°æ®è¯»å–åˆ°ç¼“å†²åŒºçš„æ•´ä¸ªè¿‡ç¨‹ï¼Œçœ‹ä½œæ˜¯ç”Ÿäº§è¿‡ç¨‹ï¼Œ ç”¨ä¸€ä¸ªç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹æ¥æè¿°è¿™ä¸ª<strong>è¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li>
<p>ç”Ÿäº§è€…æ¥åˆ°ç”Ÿäº§äº§å“ä»»åŠ¡</p>
</li>
<li>
<p>æ¶ˆè´¹è€…éšæ—¶è¿‡æ¥æ¶ˆè´¹äº§å“</p>
</li>
<li>
<p>å¦‚æœç”Ÿäº§è€…è¿˜æœªå¼€å§‹ç”Ÿäº§ï¼Œæ¶ˆè´¹è€…å¯ä»¥ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯å¦‚æœè¶…æ—¶å°±æ”¾å¼ƒç­‰å¾…</p>
</li>
<li>
<p>å¦‚æœç”Ÿäº§è€…æ­£åœ¨ç”Ÿäº§ï¼Œæ¶ˆè´¹è€…å¯ä»¥éšæ—¶å¯ä»¥æ‰“æ–­ç”Ÿäº§ï¼Œæ‹¿èµ°ç”Ÿäº§äº†ä¸€åŠçš„äº§å“ï¼Œæ¶ˆè´¹è€…å®Œæˆå‰©ä¸‹äº§å“çš„ç”Ÿäº§ä»»åŠ¡</p>
</li>
<li>
<p>å¦‚æœç”Ÿäº§è€…å·²ç»å®Œæˆç”Ÿäº§ï¼Œæ¶ˆè´¹è€…å°±å¯ä»¥æ‹¿èµ°å…¨éƒ¨äº§å“</p>
</li>
</ul>
<p>è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ª<strong>æŠ€æœ¯ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>ç”Ÿäº§è€…åœ¨ç”Ÿäº§è¿‡ç¨‹ä¸­éšæ—¶è¢«æ‰“æ–­</p>
</li>
<li>
<p>ç”Ÿäº§è€…ç”Ÿäº§äº†ä¸€åŠçš„äº§å“å¯ä»¥è¢«ç”¨æ¥ä½¿ç”¨</p>
</li>
</ul>
<p>æˆ‘ä»¬å°è¯•ä½¿ç”¨çº¿ç¨‹é—´åŒæ­¥æœºåˆ¶å’Œæ¡¥æ¥æµæŠ€æœ¯æ¥å®ç°è¿™äº›éœ€æ±‚ï¼š</p>
<h3 data-id="heading-20">4.3 ä»£ç æ ¸å¿ƒå®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.io.*;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;
<span class="hljs-keyword">import</span> java.util.concurrent.atomic.AtomicInteger;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Thread.sleep;


<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main2</span> {

       <span class="hljs-comment">//æ¨¡æ‹Ÿå“åº”ä½“</span>
       <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseBody</span> {
            InputStream stream;

             <span class="hljs-keyword">public</span> <span class="hljs-title function_">ResponseBody</span><span class="hljs-params">(InputStream stream)</span>{
                 <span class="hljs-built_in">this</span>.stream = stream;
            }

            <span class="hljs-keyword">public</span> InputStream <span class="hljs-title function_">byteStream</span><span class="hljs-params">()</span>{
                <span class="hljs-keyword">return</span> stream;
            }
        }


        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SyncLoadResponseBean</span> {

            <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SyncLoadResponseBean"</span>;

            <span class="hljs-comment">// çŠ¶æ€å¸¸é‡å®šä¹‰</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INIT</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">// åˆå§‹çŠ¶æ€</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">READY</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; <span class="hljs-comment">// æ•°æ®å‡†å¤‡å°±ç»ª</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">OFFER</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>; <span class="hljs-comment">// æ•°æ®å·²æä¾›</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">DROP</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;  <span class="hljs-comment">// æ•°æ®å·²ä¸¢å¼ƒ</span>

            <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String mRequestUrl;
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;String, SyncLoadResponseBean&gt; mSyncLoadCache;
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">mStatus</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(INIT); <span class="hljs-comment">// çŠ¶æ€æœº</span>

            <span class="hljs-comment">// æ•°æ®å­˜å‚¨ç›¸å…³</span>
            <span class="hljs-keyword">private</span> Map&lt;String, String&gt; mResponseHeader;
            <span class="hljs-keyword">private</span> ByteArrayOutputStream mBufferStream;
            <span class="hljs-keyword">private</span> InputStream mNetworkStream;
            <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> mResponseTime;


            <span class="hljs-keyword">public</span> <span class="hljs-title function_">SyncLoadResponseBean</span><span class="hljs-params">(String requestUrl, ConcurrentHashMap&lt;String, SyncLoadResponseBean&gt; syncLoadCache)</span>{
                mRequestUrl = requestUrl;
                mSyncLoadCache = syncLoadCache;
                mStatus.set(INIT);
            }

            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">before</span><span class="hljs-params">(<span class="hljs-type">int</span> status)</span>{
               <span class="hljs-keyword">return</span> mStatus.get() &lt; status;
            }

            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">during</span><span class="hljs-params">(<span class="hljs-type">int</span> status)</span>{
                <span class="hljs-keyword">return</span> mStatus.get() == status;
            }

            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">after</span><span class="hljs-params">(<span class="hljs-type">int</span> status)</span>{
                <span class="hljs-keyword">return</span> mStatus.get() &gt;= status;
            }

            <span class="hljs-comment">/**
             * å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹
             * ä½¿ç”¨ tryLock é¿å…é•¿æ—¶é—´é˜»å¡
             */</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">signalAll</span><span class="hljs-params">()</span>{
                <span class="hljs-keyword">synchronized</span> (SyncLoadResponseBean.<span class="hljs-built_in">this</span>) {
                    <span class="hljs-built_in">this</span>.notifyAll();
                }
            }

            <span class="hljs-comment">/**
             * ä¿å­˜å“åº”æ•°æ®å¹¶é¢„å¤„ç†
             * ç½‘ç»œçº¿ç¨‹ä¼šåœ¨å¾—åˆ°å“åº”åè°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¿å­˜æ•°æ®
             */</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveResponse</span><span class="hljs-params">(ResponseBody responseBody, Map&lt;String, String&gt; responseHeader)</span>{
                streamReady(responseBody, responseHeader);
                preReadStream();
            }

             <span class="hljs-comment">/**
             * å‡†å¤‡æ•°æ®æµ
             */</span>
             <span class="hljs-keyword">private</span> voids <span class="hljs-title function_">treamReady</span><span class="hljs-params">(ResponseBody responseBody, Map&lt;String, String&gt; responseHeader)</span>{
                <span class="hljs-keyword">synchronized</span> (SyncLoadResponseBean.<span class="hljs-built_in">this</span>) {
                    TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ å“åº”ä¿å­˜"</span>);
                    mResponseTime = System.currentTimeMillis();
                    mResponseHeader = responseHeader;
                    mBufferStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();
                    <span class="hljs-keyword">if</span> (responseBody != <span class="hljs-literal">null</span>) {
                        mNetworkStream = responseBody.byteStream();
                        <span class="hljs-comment">// æ ¹æ®æµæ˜¯å¦æœ‰æ•ˆè®¾ç½®çŠ¶æ€</span>
                        <span class="hljs-keyword">if</span> (mNetworkStream != <span class="hljs-literal">null</span>) {
                            mStatus.set(READY);
                        } <span class="hljs-keyword">else</span> {
                            drop();
                        }
                    } <span class="hljs-keyword">else</span> {
                        drop();
                    }
                    TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ ä¿å­˜å®Œæˆ é€šçŸ¥æ¶ˆè´¹è€…"</span>);
                    signalAll();
                }
            }


            <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preReadStream</span><span class="hljs-params">()</span>{
                TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ å¼€å§‹"</span>);
                <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">4096</span>];
                <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">while</span> (during(READY)) {
                        <span class="hljs-keyword">synchronized</span> (SyncLoadResponseBean.<span class="hljs-built_in">this</span>) {
                            <span class="hljs-keyword">try</span> {
                                <span class="hljs-comment">//åŒé‡æ ¡éªŒé”</span>
                                <span class="hljs-keyword">if</span> (during(READY)) {
                                   <span class="hljs-comment">// è¯»å–ç½‘ç»œæµæ•°æ®</span>
                                   <span class="hljs-type">int</span> <span class="hljs-variable">bytesRead</span> <span class="hljs-operator">=</span> mNetworkStream.read(buffer);
                                   <span class="hljs-keyword">if</span> (bytesRead == -<span class="hljs-number">1</span>) {
                                        TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ å®Œæˆ "</span> + bytesRead);
                                        closeStream(mNetworkStream);
                                        mNetworkStream = <span class="hljs-literal">null</span>;
                                        <span class="hljs-keyword">return</span>;
                                    }
                                    TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ "</span> + bytesRead);
                                    mBufferStream.write(buffer, <span class="hljs-number">0</span>, bytesRead);
                                }
                            } <span class="hljs-keyword">finally</span> {
                                num++;
                                TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ ç¬¬"</span> + num + <span class="hljs-string">"æ¬¡é€šçŸ¥æ¶ˆè´¹è€…"</span>);
                                signalAll();
                            }
                        }
                    }
                    <span class="hljs-comment">//å·²ç»æä¾›äº†æ•°æ®ï¼Œåˆ™æ‰“å°ä¸ªæ—¥å¿—çœ‹ä¸‹</span>
                    <span class="hljs-keyword">if</span> (after(OFFER)) {
                        TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æ•°æ®æµå·²æä¾› é¢„è¯»ç¼“å­˜ å…³é—­"</span>);
                    }
                } <span class="hljs-keyword">catch</span> (IOException e) {
                    TLog.e(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ å¼‚å¸¸ å…³é—­"</span>, e);
                    <span class="hljs-keyword">synchronized</span> (SyncLoadResponseBean.<span class="hljs-built_in">this</span>) {
                        <span class="hljs-comment">//åœ¨è¯»å–çš„è¿‡ç¨‹ä¸­å‡ºç°äº†å¼‚å¸¸ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰æä¾›æ•°æ®ï¼Œå°±ç›´æ¥dropè°ƒ</span>
                        <span class="hljs-keyword">if</span> (!after(OFFER)) {
                            drop();
                        }
                    }
                }
            }

            <span class="hljs-comment">/**
             * è·å–æ¡¥æ¥æµ
             * æµè§ˆå™¨çº¿ç¨‹è°ƒç”¨è¯¥æ–¹æ³•è·å–æ•°æ®æµ
             */</span>
             <span class="hljs-keyword">public</span> InputStream <span class="hljs-title function_">getBridgedStream</span><span class="hljs-params">()</span>{
                TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ®"</span>);
                <span class="hljs-keyword">synchronized</span> (SyncLoadResponseBean.<span class="hljs-built_in">this</span>) {
                  <span class="hljs-keyword">try</span> {
                       <span class="hljs-keyword">if</span> (before(READY)) {
                            TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿›å…¥ç­‰å¾…çŠ¶æ€"</span>);
                            <span class="hljs-built_in">this</span>.wait(<span class="hljs-number">5000</span>);
                            TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¢«å”¤é†’"</span>);
                        }
                        <span class="hljs-comment">// ç­‰å¾…ç»“æŸï¼Œå†ç¡®è®¤ä¸€æ¬¡çŠ¶æ€æ˜¯å¦å¯ç”¨</span>
                        <span class="hljs-keyword">if</span> (before(READY)) {
                            TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® ä¾æ—§æ²¡æœ‰å¯ç”¨æ•°æ® è¿”å›ç©ºæµ"</span>);
                            drop();
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                        } elseif (after(OFFER)) {
                            TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® æ•°æ®å·²è¢«åºŸå¼ƒæˆ–è€…è¢«ä»–äººè¢«ä½¿ç”¨ è¿”å›ç©ºæµ"</span>);
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                        } elseif (isTimeOut()) {
                            TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® æ•°æ®è¶…æ—¶ è¿”å›ç©ºæµ"</span>);
                            drop();
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-keyword">if</span> (mNetworkStream != <span class="hljs-literal">null</span> &amp;&amp; mBufferStream != <span class="hljs-literal">null</span>) {
                                mStatus.set(OFFER);
                                <span class="hljs-comment">// åˆ›å»ºæ–°çš„æ¡¥æ¥æµå®ä¾‹ï¼ŒåŒ…å«å·²ç¼“å­˜æ•°æ®å’Œå‰©ä½™ç½‘ç»œæµ</span>
                                <span class="hljs-type">ByteArrayInputStream</span> <span class="hljs-variable">cachedStream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(mBufferStream.toByteArray());
                                TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿”å›æ¡¥æ¥æµ"</span>);
                                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SequenceInputStream</span>(cachedStream, mNetworkStream);
                            } elseif (mNetworkStream != <span class="hljs-literal">null</span>) {
                                mStatus.set(OFFER);
                                TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿”å›ç½‘ç»œæµ"</span>);
                                <span class="hljs-keyword">return</span> mNetworkStream;
                            } elseif (mBufferStream != <span class="hljs-literal">null</span>) {
                                mStatus.set(OFFER);
                                <span class="hljs-comment">// åˆ›å»ºæ–°çš„æ¡¥æ¥æµå®ä¾‹ï¼ŒåŒ…å«å·²ç¼“å­˜æ•°æ®å’Œå‰©ä½™ç½‘ç»œæµ</span>
                                TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿”å›ç¼“å­˜æµ"</span>);
                                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(mBufferStream.toByteArray());
                            } <span class="hljs-keyword">else</span> {
                                drop();
                                TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿”å›ç©ºæµ"</span>);
                                 <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                            }
                        }
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        TLog.e(<span class="hljs-string">"TAG"</span>, <span class="hljs-string">"Create bridged stream failed"</span>, e);
                        drop();
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                    }
                }
            }

            <span class="hljs-comment">/**
             * è·å–å“åº”å¤´
             */</span>
             <span class="hljs-keyword">public</span> Map&lt;String, String&gt; <span class="hljs-title function_">getResponseHeader</span><span class="hljs-params">()</span>{
                <span class="hljs-comment">//å¦‚æœè¯·æ±‚é‡Œé¢ä¸å¸¦è·¨åŸŸæ ‡è¯†ï¼Œåˆ™å¸¦ä¸Šè·¨åŸŸæ ‡è¯†</span>
                <span class="hljs-keyword">if</span> (mResponseHeader != <span class="hljs-literal">null</span> &amp;&amp; !mResponseHeader.containsKey(<span class="hljs-string">"Access-Control-Allow-Origin"</span>)) {
                    mResponseHeader.put(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>);
                }
                <span class="hljs-keyword">return</span> mResponseHeader;
            }


            <span class="hljs-comment">/**
             * ç»Ÿä¸€å…³é—­æµèµ„æºæ“ä½œ
             */</span>
             <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">closeStream</span><span class="hljs-params">(Closeable stream)</span>{
<span class="hljs-keyword">if</span> (stream != <span class="hljs-literal">null</span>) {
<span class="hljs-keyword">try</span> {
                        stream.close();
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        TLog.e(TAG, <span class="hljs-string">"å…³é—­æµå¤±è´¥"</span>, e);
                    }
                }
            }


            <span class="hljs-comment">/**
             * åˆ¤æ–­æ•°æ®æœ‰æ²¡æœ‰è¶…æ—¶
             */</span>
             <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isTimeOut</span><span class="hljs-params">()</span>{
                 <span class="hljs-keyword">return</span> Math.abs(mResponseTime - System.currentTimeMillis()) &gt; <span class="hljs-number">5000</span>;
            }

            <span class="hljs-comment">/**
             * ä¸¢å¼ƒæ•°æ®
             */</span>
             <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drop</span><span class="hljs-params">()</span>{
                <span class="hljs-keyword">synchronized</span> (SyncLoadResponseBean.<span class="hljs-built_in">this</span>) {
                    mStatus.set(DROP);
                    mResponseHeader = <span class="hljs-literal">null</span>;
                    mResponseTime = <span class="hljs-number">0</span>;
                    closeStream(mBufferStream);
                    closeStream(mNetworkStream);
                    mBufferStream = <span class="hljs-literal">null</span>;
                    mNetworkStream = <span class="hljs-literal">null</span>;
                    mSyncLoadCache.remove(mRequestUrl);
                    TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ é€Ÿ ç¼“å­˜æ•°æ®ä¸¢å¼ƒ"</span>);
                }
            }
        }


        <span class="hljs-comment">/**
         * ä¸»æ–¹æ³•ï¼Œæµ‹è¯•ç¨‹åºå…¥å£
         */</span>
          <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{

            <span class="hljs-type">SyncLoadResponseBean</span> <span class="hljs-variable">syncLoadResponseBean</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncLoadResponseBean</span>(<span class="hljs-string">"https://www.baidu.com"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;());

            <span class="hljs-comment">//æ¨¡æ‹Ÿç”Ÿäº§è€…çº¿ç¨‹</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                 <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"ç”Ÿäº§è€…å¯åŠ¨"</span>);
                    <span class="hljs-comment">//æ¨¡æ‹Ÿç½‘ç»œå»ºè”</span>
                    sleep(<span class="hljs-number">200</span>);
                    <span class="hljs-comment">//æ¨¡æ‹Ÿç½‘ç»œèµ„æºè¿”å›</span>
                    <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"./xxxx.txt"</span>);
                    <span class="hljs-type">ResponseBody</span> <span class="hljs-variable">responseBody</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseBody</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(file));
                     <span class="hljs-comment">//æ¨¡æ‹Ÿå“åº”</span>
                    syncLoadResponseBean.saveResponse(responseBody, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;());
                } <span class="hljs-keyword">catch</span> (FileNotFoundException e) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
                } <span class="hljs-keyword">finally</span> {
                    System.out.println(<span class="hljs-string">"ç”Ÿäº§çº¿ç¨‹å·¥ä½œå®Œæˆï¼Œå”¤é†’ç­‰å¾…ä¸­çš„æ¶ˆè´¹è€…"</span>);
                    syncLoadResponseBean.signalAll();
                }
            }).start();

              <span class="hljs-comment">//æ¨¡æ‹Ÿæ¶ˆè´¹è€…çº¿ç¨‹1</span>
              <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {

                System.out.println(<span class="hljs-string">"æ¶ˆè´¹è€…å¯åŠ¨"</span>);
                <span class="hljs-comment">//æ¨¡æ‹Ÿè¯»å–</span>
                <span class="hljs-type">InputStream</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> syncLoadResponseBean.getBridgedStream();
                System.out.println(<span class="hljs-string">"æ¶ˆè´¹è€… "</span> + stream);
            }).start();

        }

    }
</code></pre>
<h3 data-id="heading-21">4.4 ä»£ç è§£è¯»</h3>
<p>ä»£ç çš„å·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>
<p>ç”Ÿäº§è€…ç½‘ç»œçº¿ç¨‹å‘èµ·æ•°æ®è¯·æ±‚ã€‚</p>
</li>
<li>
<p>å»ºè”åä¼šç¬¬ä¸€æ¬¡å‘èµ·notifyï¼Œå°è¯•å”¤é†’ç­‰å¾…ä¸­çš„æ¶ˆè´¹è€…webviewçº¿ç¨‹ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™åˆšå¥½æœ‰æ¶ˆè´¹è€…webviewåœ¨ç­‰å¾…ï¼Œè¿˜æœªè½®åˆ°ç”Ÿäº§è€…é¢„è¯»æ•°æ®ï¼Œæ¶ˆè´¹è€…å°±ä¼šæ‹¿èµ°æ•°æ®ã€‚</p>
</li>
<li>
<p>å¦‚æœæ²¡æœ‰æ¶ˆè´¹è€…åœ¨ç­‰å¾…ï¼Œå°±å¼€å§‹é¢„è¯»ï¼Œé¢„è¯»æ˜¯ä¸€ä¸ªå¾ªç¯è¯»å–çš„è¿‡ç¨‹ï¼Œæ¯æ¬¡å¾ªç¯è¯»å–éƒ½ä¼šæœ‰ä¸€ä¸ªåŠ é”-&gt;è¯»å–-&gt;é‡Šæ”¾é”çš„è¿‡ç¨‹ï¼Œä¿è¯æ¶ˆè´¹è€…å¯ä»¥éšæ—¶æ‰“æ–­å¹¶æ‹¿èµ°è¯»å–äº†ä¸€åŠçš„æ•°æ®ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨synchronized(SyncLoadResponse-</p>
<p>Bean.this)æ¥å®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çº¿ç¨‹é—´ååŒå·¥ä½œã€‚</p>
</li>
<li>
<p>ä½¿ç”¨AtomicIntegeræ¥å®ç°çŠ¶æ€æœºçš„çº¿ç¨‹é—´åŒæ­¥ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨äº†wait(long timeoutMillis)æ¥å®ç°äº†ç­‰å¾…å’Œé”çš„è¶…æ—¶é‡Šæ”¾ã€‚</p>
</li>
<li>
<p>preReadStream()æ–¹æ³•åœ¨whileå¾ªç¯ä½“å†…å®ç°äº†è¯»å–æ—¶çš„åŒæ­¥å—ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨SequenceInputStreamå®ç°äº†å·²è¯»ç¼“å†²æµä¸æœªè¯»ç½‘ç»œæµçš„æ¡¥æ¥ã€‚</p>
</li>
<li>
<p>åœ¨æ¶ˆè´¹è€…webviewç­‰å¾…èµ„æºçš„è¿‡ç¨‹ä¸­ï¼Œç”Ÿäº§è€…ä¼šæœ‰å¤šä¸ªæ—¶æœºè®©å‡ºåŒæ­¥é”ï¼Œå¹¶ä¸”å‘èµ·notifyï¼Œé€šçŸ¥æ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹æ•°æ®ï¼š**æ—¶æœºâ‘ ï¼š**ç”Ÿäº§è€…å®Œæˆç½‘ç»œå»ºè”ï¼Œä¿å­˜äº†å“åº”ä½“ï¼Œä½†è¿˜æ²¡æœ‰è¿›è¡Œæ•°æ®é¢„è¯»çš„æ—¶å€™ã€‚**æ—¶æœºâ‘¡ï¼š**ç”Ÿäº§è€…åœ¨ç½‘ç»œæ•°æ®çš„é¢„è¯»è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡è¯»å–4096ä¹‹åéƒ½ä¼šé€šçŸ¥æ¶ˆè´¹è€…ã€‚</p>
</li>
</ul>
<p>åœ¨ä»£ç çš„æœ€ä¸‹é¢ï¼Œæˆ‘ä»¬æä¾›äº†æ ‡å‡†Javaçš„mainå‡½æ•°ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å°è¯•å°†ä»£ç æ‹·è´åˆ°æœ¬åœ°ï¼Œå¹¶ä¸”è¿è¡Œä»–ï¼Œçœ‹ä¸‹æ•ˆæœï¼Œæˆ‘ä»¬è¿™è¾¹ä¹Ÿç›´æ¥æŠŠè¿è¡Œæ•ˆæœè´´å‡ºæ¥ï¼Œçœ‹ä¸‹æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml">    <span class="hljs-string">ç”Ÿäº§è€…å¯åŠ¨</span>
    <span class="hljs-string">æ¶ˆè´¹è€…å¯åŠ¨</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">æŸ¥æ‰¾æµæ•°æ®</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">æŸ¥æ‰¾æµæ•°æ®</span> <span class="hljs-string">è¿›å…¥ç­‰å¾…çŠ¶æ€</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">å“åº”ä¿å­˜</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">ä¿å­˜å®Œæˆ</span> <span class="hljs-string">é€šçŸ¥æ¶ˆè´¹è€…</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">å¼€å§‹</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-number">4096</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">ç¬¬1æ¬¡é€šçŸ¥æ¶ˆè´¹è€…</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-number">4096</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">ç¬¬2æ¬¡é€šçŸ¥æ¶ˆè´¹è€…</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-number">4096</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">ç¬¬3æ¬¡é€šçŸ¥æ¶ˆè´¹è€…</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-number">4096</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">ç¬¬4æ¬¡é€šçŸ¥æ¶ˆè´¹è€…</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-number">4096</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">ç¬¬5æ¬¡é€šçŸ¥æ¶ˆè´¹è€…</span>
    <span class="hljs-string">.......</span>
    <span class="hljs-string">.......</span>
    <span class="hljs-string">.......</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-number">4096</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">ç¬¬360æ¬¡é€šçŸ¥æ¶ˆè´¹è€…</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-number">4096</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">ç¬¬361æ¬¡é€šçŸ¥æ¶ˆè´¹è€…</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-number">4096</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">ç¬¬362æ¬¡é€šçŸ¥æ¶ˆè´¹è€…</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">æŸ¥æ‰¾æµæ•°æ®</span> <span class="hljs-string">è¢«å”¤é†’</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">æŸ¥æ‰¾æµæ•°æ®</span> <span class="hljs-string">è¿”å›æ¡¥æ¥æµ</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">ç¬¬363æ¬¡é€šçŸ¥æ¶ˆè´¹è€…</span>
    <span class="hljs-string">å¹¶è¡ŒåŠ è½½</span> <span class="hljs-string">æ•°æ®æµå·²æä¾›</span> <span class="hljs-string">é¢„è¯»ç¼“å­˜</span> <span class="hljs-string">å…³é—­</span>
    
    <span class="hljs-string">æ¶ˆè´¹è€…</span> <span class="hljs-string">java.io.SequenceInputStream@696759a5</span>
</code></pre>
<h3 data-id="heading-22">4.5 è¿è¡Œç»“æœè§£è¯»</h3>
<p>è¿™æ¬¡çš„testä»£ç è¿è¡Œï¼Œå·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<p>æ¶ˆè´¹è€…webviewéœ€è¦æ•°æ®çš„æ—¶å€™ï¼Œç”Ÿäº§è€…çš„ç”Ÿäº§ä»»åŠ¡è¿˜æ²¡æœ‰è¿”å›ï¼Œæ­¤æ—¶ç”Ÿäº§è€…æ­£åœ¨è¿›è¡Œè™šæ‹Ÿçš„ç½‘ç»œå»ºè”ï¼Œå› æ­¤æ¶ˆè´¹è€…è¿›å…¥äº†ç­‰å¾…çŠ¶æ€ï¼Œç½‘ç»œå»ºè”åï¼Œç”Ÿäº§è€…é¦–æ¬¡å°è¯•å”¤é†’æ¶ˆè´¹è€…ï¼Œä½†æ­£åœ¨ç­‰å¾…ä»»åŠ¡çš„æ¶ˆè´¹è€…å¹¶æ²¡æœ‰è¢«å”¤é†’ï¼Œè¿™é‡Œå·²ç»å¼€å§‹ä¸ç¬¦åˆé¢„æœŸäº†ã€‚äºæ˜¯ç”Ÿäº§è€…ç»§ç»­è¿›è¡Œæ•°æ®é¢„è¯»ï¼Œåœ¨æ•°æ®é¢„è¯»çš„å¾ªç¯ä½“å†…ï¼Œæ¯æ¬¡ä¸€ä¸ªç¼“å†²è¯»å®Œï¼Œç”Ÿäº§è€…éƒ½ä¼šå°è¯•å”¤é†’ä¸€æ¬¡æ¶ˆè´¹è€…ï¼Œä½†æ˜¯æ¶ˆè´¹è€…ç›´åˆ°ç¬¬363æ¬¡notifyçš„æ—¶å€™ï¼Œæ‰è¢«å”¤é†’ï¼Œæ‹¿åˆ°äº†æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬ç»è¿‡å¤šæ¬¡å°è¯•ï¼Œå‘ç°æ¶ˆè´¹è€…è¢«å”¤é†’çš„æ—¶æœºä¸ç¡®å®šï¼Œæœ‰æ—¶å€™æ˜¯åœ¨é¦–æ¬¡å”¤é†’çš„æ—¶å€™å°±èƒ½å¤Ÿå”¤é†’ï¼Œæœ‰æ—¶å€™è¦åœ¨å”¤é†’ç¬¬xxxæ¬¡çš„æ—¶å€™æ‰èƒ½è¢«å”¤é†’ï¼Œè€Œä¸”æ¬¡æ•°è¿˜æ˜¯éšæœºçš„ï¼Œæ˜¾ç„¶è¿™æ ·å»¶é•¿äº†æ¶ˆè´¹è€…ç­‰å¾…çš„æ—¶é—´ï¼Œä¸ç¬¦åˆæˆ‘ä»¬æ—¢å®šçš„æƒ³æ³•ï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥çš„ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-23">äº”ã€æ–¹æ¡ˆæ¼”è¿›ï¼šä¼˜åŒ–åŒæ­¥ç­–ç•¥</h2>
<p>ä»ä¸Šè¿°ä»£ç å®é™…è¿è¡Œçš„ç°è±¡ä¸Šçœ‹ï¼Œç”Ÿäº§è€…é‡Šæ”¾é”ï¼Œå¹¶ä¸”å”¤é†’æ¶ˆè´¹è€…çš„æ—¶å€™ï¼Œçº¿ç¨‹é”å¹¶æ²¡æœ‰äº¤æ¥ç»™æ¶ˆè´¹è€…ï¼Œåè€Œåˆè¢«ç”Ÿäº§è€…çš„é¢„è¯»ä»»åŠ¡ç»™æŠ¢äº†è¿‡æ¥ã€‚</p>
<h3 data-id="heading-24">5.1 é”çš„å…¬å¹³æ€§</h3>
<p>ä»è¿è¡Œçš„ç»“æœæ¥çœ‹ï¼Œé”çš„é‡Šæ”¾å’Œè·å–å¹¶æ²¡æœ‰ç¬¦åˆé¢„æœŸï¼Œæˆ‘ä»¬æœ‰ç†ç”±æ€€ç–‘åœ¨çº¿ç¨‹åŒæ­¥çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›çº¿ç¨‹äº‰æŠ¢èµ„æºå’Œé”çš„æƒ…å†µå‘ç”Ÿï¼Œé€šè¿‡æŸ¥é˜…javaå¤šçº¿ç¨‹ç›¸å…³èµ„æ–™ï¼Œæˆ‘ä»¬äº†è§£åˆ°ä¸€ä¸ªæ¦‚å¿µï¼šçº¿ç¨‹é”çš„å…¬å¹³æ€§ã€‚</p>
<p>çº¿ç¨‹é”çš„å…¬å¹³æ€§æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹ç«äº‰é”æ—¶ï¼Œé”çš„è·å–æ˜¯å¦æŒ‰ç…§è¯·æ±‚é¡ºåºè¿›è¡Œåˆ†é…ï¼ŒåŒæ­¥é”çš„ç±»å‹ç®€å•æ¥è®²å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸¤ç±»ï¼š</p>
<p><strong>éå…¬å¹³é”</strong></p>
<ul>
<li>
<p><strong>ç‰¹ç‚¹</strong>ï¼šå…è®¸çº¿ç¨‹"æ’é˜Ÿ"ï¼Œæ–°è¯·æ±‚é”çš„çº¿ç¨‹å¯èƒ½æ¯”ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹å…ˆè·å–é”</p>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šæ›´é«˜çš„ååé‡ï¼Œå‡å°‘çº¿ç¨‹åˆ‡æ¢å¼€é”€</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šå¯èƒ½å¯¼è‡´æŸäº›çº¿ç¨‹é•¿æ—¶é—´ç­‰å¾…ï¼ˆé¥¥é¥¿ï¼‰</p>
</li>
</ul>
<p><strong>å…¬å¹³é”</strong></p>
<ul>
<li>
<p><strong>ç‰¹ç‚¹</strong>ï¼šä¸¥æ ¼æŒ‰ç…§FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰é¡ºåºåˆ†é…é”</p>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šé¿å…çº¿ç¨‹é¥¥é¥¿ï¼Œè¡Œä¸ºæ›´å¯é¢„æµ‹</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šæ€§èƒ½è¾ƒä½ï¼Œå› ä¸ºéœ€è¦ç»´æŠ¤é˜Ÿåˆ—é¡ºåº</p>
</li>
</ul>
<p>Javaå†…ç½®çš„synchronizedé”å°±æ˜¯æ˜¯<strong>éå…¬å¹³é”</strong>ï¼Œwaitå’Œnotify ä¹Ÿæ˜¯åŸºäºsynchronizedæ¥å®ç°çš„ã€‚</p>
<p>åœ¨ä¸Šè¿°çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å°±æ˜¯éå…¬å¹³é”ï¼Œå¯¼è‡´çº¿ç¨‹ä¹‹é—´å‡ºç°èµ„æºæŠ¢å ï¼Œå‘ç”Ÿäº†ä¸ç¬¦åˆé¢„æœŸçš„æƒ…å†µã€‚</p>
<p><strong>é€‚åˆä½¿ç”¨å…¬å¹³é”çš„åœºæ™¯</strong></p>
<ul>
<li>
<p><strong>ä¸¥æ ¼çš„é¡ºåºè¦æ±‚</strong>ï¼šå½“çº¿ç¨‹æ‰§è¡Œé¡ºåºå¯¹ä¸šåŠ¡é€»è¾‘è‡³å…³é‡è¦æ—¶</p>
</li>
<li>
<p><strong>é¿å…é¥¥é¥¿</strong>ï¼šå½“éœ€è¦ç¡®ä¿æ‰€æœ‰çº¿ç¨‹éƒ½æœ‰æœºä¼šæ‰§è¡Œæ—¶</p>
</li>
</ul>
<p>è™½ç„¶å…¬å¹³é”ä¼šç‰ºç‰²åŒæ­¥æ€§èƒ½ï¼Œä½†æ˜¯åœ¨å½“å‰ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬æ˜¯å¸Œæœ›æ¶ˆè´¹è€…èƒ½å¤Ÿå°½å¿«çš„è·å¾—æ•°æ®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥é€‰æ‹©ä½¿ç”¨å…¬å¹³é”æ¥å®ç°åŒæ­¥ï¼Œåœ¨javaä¸­è¦å®ç°å…¬å¹³é”ï¼Œå°±å¿…é¡»ä½¿ç”¨ReentrantLockï¼Œå¦‚æœè¦å®ç°å…¬å¹³é”çš„ç­‰å¾…ï¼Œå°±è¦ä½¿ç”¨Conditionï¼Œæˆ‘ä»¬ä½¿ç”¨ReentrantLockå’ŒConditionæ¥ä¿®æ”¹ä»£ç ï¼Œå¯¹ä»£ç ä¸­ä¸åŒæ­¥é”ç›¸å…³çš„é€»è¾‘è¿›è¡Œé‡æ„ã€‚</p>
<p><strong>å…¬å¹³é”çš„ä½¿ç”¨æ–¹æ³•</strong></p>
<p>ä½¿ç”¨å…¬å¹³é”æ—¶ï¼Œæ— æ³•åƒä½¿ç”¨synchronizedå…³é”®å­—ä¸€æ ·ç›´æ¥åŠ åœ¨æ–¹æ³•å¤´ä¸Šï¼Œè€Œæ˜¯éœ€è¦æ‰‹åŠ¨è·å¾—é”å’Œé‡Šæ”¾é”ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> final ReentrantLock mLock = <span class="hljs-keyword">new</span> ReentrantLock(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å…¬å¹³é”</span>

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span>{
    <span class="hljs-comment">//ä¸šåŠ¡ä»£ç æ‰§è¡Œå‰è·å¾—é”</span>
    mLock.<span class="hljs-keyword">lock</span>();  
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">//å®é™…æ‰§è¡Œçš„ä¸šåŠ¡ä»£ç </span>
        TLog.d(TAG, <span class="hljs-string">"æ­¤å¤„æ‰§è¡Œä»£ç "</span>);  
    } <span class="hljs-keyword">finally</span> {  
        <span class="hljs-comment">//ä¸šåŠ¡ä»£ç æ‰§è¡Œå®Œæˆåé‡Šæ”¾é”</span>
        mLock.unlock();  
    }  
}
</code></pre>
<p>å¦‚æœéœ€è¦æ‰‹åŠ¨ä½¿çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œåˆ™è§¦å‘ç­‰å¾…å’Œå”¤é†’çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> final ReentrantLock mLock = <span class="hljs-keyword">new</span> ReentrantLock(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å…¬å¹³é”</span>
<span class="hljs-keyword">private</span> final Condition mCondition \= mLock.newCondition(); <span class="hljs-comment">// æ¡ä»¶å˜é‡</span>

<span class="hljs-comment">/**  
 * å”¤é†’ç¤ºä¾‹
 * 
 */</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">signal</span>()</span>{  
    <span class="hljs-keyword">if</span> (mLock.tryLock()) {  
        <span class="hljs-keyword">try</span> {  
            mCondition.signal();  
        } <span class="hljs-keyword">finally</span> {  
            mLock.unlock();  
        }  
    }  
}

<span class="hljs-comment">/**  
 * ç­‰å¾…ç¤ºä¾‹  
 * ç­‰å¾…äº”ç§’é’Ÿåä¸»åŠ¨é‡Šæ”¾
 */</span>  
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span>{  
    mLock.<span class="hljs-keyword">lock</span>();  
    <span class="hljs-keyword">try</span> {  
        TLog.d(TAG, <span class="hljs-string">"å®é™…ä¸šåŠ¡ä»£ç æ‰§è¡Œ"</span>);  
        mCondition.<span class="hljs-keyword">await</span>(<span class="hljs-number">5</span>, TimeUnit.SECONDS);  
        TLog.d(TAG, <span class="hljs-string">"å®é™…ä¸šåŠ¡ä»£ç æ‰§è¡Œ"</span>);  
    } <span class="hljs-keyword">finally</span> {  
        mLock.unlock();  
    }  
}
</code></pre>
<p><strong>è¿™é‡Œçš„ç–‘é—®ï¼Œä¸ºä»€ä¹ˆlockå¹¶ä¸”awaitçš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¾ç„¶å¯ä»¥è·å¾—é”å¹¶å‘èµ·signalï¼Ÿ</strong></p>
<p>æ˜¯å› ä¸ºcondition.await() çš„åŸå­æ“ä½œï¼Œå½“çº¿ç¨‹è°ƒç”¨ condition.await() æ—¶ï¼Œä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼Œç„¶åè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œè¿™æ˜¯åŸå­æ€§æ“ä½œï¼Œä¿è¯åœ¨è¿›å…¥ç­‰å¾…çŠ¶æ€å‰ä¸€å®šä¼šé‡Šæ”¾é”ã€‚</p>
<p>å…¶ä»–çº¿ç¨‹å¯ä»¥è·å–é”ï¼Œæ˜¯å› ä¸ºåŸçº¿ç¨‹å·²ç»åœ¨ condition.await() æ—¶é‡Šæ”¾äº†é”ï¼Œå…¶ä»–çº¿ç¨‹åœ¨è°ƒç”¨ condition.signal() æ—¶å¿…é¡»æŒæœ‰é”ï¼Œå½“ç­‰å¾…ä¸­çš„çº¿ç¨‹è¢« condition.signal() å”¤é†’åï¼Œä¼šé‡æ–°å°è¯•è·å–é”ï¼Œè·å–é”æˆåŠŸåæ‰ä¼šä» condition.await() æ–¹æ³•è¿”å›ã€‚</p>
<h3 data-id="heading-25">5.2 å…¬å¹³é”ä»£ç ç¼–å†™</h3>
<p>ä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">import</span> java.io.*;
    <span class="hljs-keyword">import</span> java.util.HashMap;
    <span class="hljs-keyword">import</span> java.util.Map;
    <span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;
    <span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
    <span class="hljs-keyword">import</span> java.util.concurrent.atomic.AtomicInteger;
    <span class="hljs-keyword">import</span> java.util.concurrent.locks.Condition;
    <span class="hljs-keyword">import</span> java.util.concurrent.locks.ReentrantLock;
    
    <span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> java.lang.Thread.sleep;
    
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseBody</span> {
            InputStream stream;
    
            <span class="hljs-keyword">public</span> <span class="hljs-title function_">ResponseBody</span><span class="hljs-params">(InputStream stream)</span>{
                <span class="hljs-built_in">this</span>.stream = stream;
            }
    
            <span class="hljs-keyword">public</span> InputStream <span class="hljs-title function_">byteStream</span><span class="hljs-params">()</span>{
                <span class="hljs-keyword">return</span> stream;
            }
        }
    
    
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SyncLoadResponseBean</span> {
    
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SyncLoadResponseBean"</span>;
    
            <span class="hljs-comment">// çŠ¶æ€å¸¸é‡å®šä¹‰</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INIT</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">// åˆå§‹çŠ¶æ€</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">READY</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; <span class="hljs-comment">// æ•°æ®å‡†å¤‡å°±ç»ª</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">OFFER</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>; <span class="hljs-comment">// æ•°æ®å·²æä¾›</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">finaint</span> <span class="hljs-variable">DROP</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;  <span class="hljs-comment">// æ•°æ®å·²ä¸¢å¼ƒ</span>
    
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String mRequestUrl;
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;String, SyncLoadResponseBean&gt; mSyncLoadCache;
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">mLock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å…¬å¹³é”</span>
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">mCondition</span> <span class="hljs-operator">=</span> mLock.newCondition();   <span class="hljs-comment">// æ¡ä»¶å˜é‡</span>
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">mStatus</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(INIT); <span class="hljs-comment">// çŠ¶æ€æœº</span>
    
            <span class="hljs-comment">// æ•°æ®å­˜å‚¨ç›¸å…³</span>
            <span class="hljs-keyword">private</span> Map&lt;String, String&gt; mResponseHeader;
            <span class="hljs-keyword">private</span> ByteArrayOutputStream mBufferStream;
            <span class="hljs-keyword">private</span> InputStream mNetworkStream;
            <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> mResponseTime;
    
    
            <span class="hljs-keyword">public</span> <span class="hljs-title function_">SyncLoadResponseBean</span><span class="hljs-params">(String requestUrl, ConcurrentHashMap&lt;String, SyncLoadResponseBean&gt; syncLoadCache)</span>{
                mRequestUrl = requestUrl;
                mSyncLoadCache = syncLoadCache;
                mStatus.set(INIT);
            }
    
            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">before</span><span class="hljs-params">(<span class="hljs-type">int</span> status)</span>{
                <span class="hljs-keyword">return</span> mStatus.get() &lt; status;
            }
    
            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">during</span><span class="hljs-params">(<span class="hljs-type">int</span> status)</span>{
                <span class="hljs-keyword">return</span> mStatus.get() == status;
            }
    
            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">after</span><span class="hljs-params">(<span class="hljs-type">int</span> status)</span>{
                <span class="hljs-keyword">return</span> mStatus.get() &gt;= status;
            }
    
            <span class="hljs-comment">/**
             * å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹
             * ä½¿ç”¨ tryLock é¿å…é•¿æ—¶é—´é˜»å¡
             */</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">signalAll</span><span class="hljs-params">()</span>{
                <span class="hljs-keyword">if</span> (mLock.tryLock()) {
                    <span class="hljs-keyword">try</span> {
                        mCondition.signalAll();
                    } <span class="hljs-keyword">finally</span> {
                        mLock.unlock();
                    }
                }
            }
    
            <span class="hljs-comment">/**
             * ä¿å­˜å“åº”æ•°æ®å¹¶é¢„å¤„ç†
             * ç½‘ç»œçº¿ç¨‹ä¼šåœ¨å¾—åˆ°å“åº”åè°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¿å­˜æ•°æ®
             */</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveResponse</span><span class="hljs-params">(ResponseBody responseBody, Map&lt;String, String&gt; responseHeader)</span>{
                streamReady(responseBody, responseHeader);
                preReadStream();
            }
    
            <span class="hljs-comment">/**
             * å‡†å¤‡æ•°æ®æµ
             */</span>
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">streamReady</span><span class="hljs-params">(ResponseBody responseBody, Map&lt;String, String&gt; responseHeader)</span>{
                mLock.lock();
                <span class="hljs-keyword">try</span> {
                    TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ å“åº”ä¿å­˜"</span>);
                    mResponseTime = System.currentTimeMillis();
                    mResponseHeader = responseHeader;
                    mBufferStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();
                    <span class="hljs-keyword">if</span> (responseBody != <span class="hljs-literal">null</span>) {
                        mNetworkStream = responseBody.byteStream();
                        <span class="hljs-comment">// æ ¹æ®æµæ˜¯å¦æœ‰æ•ˆè®¾ç½®çŠ¶æ€</span>
                        <span class="hljs-keyword">if</span> (mNetworkStream != <span class="hljs-literal">null</span>) {
                            mStatus.set(READY);
                        } <span class="hljs-keyword">else</span> {
                            drop();
                        }
                    } <span class="hljs-keyword">else</span> {
                        drop();
                    }
                } <span class="hljs-keyword">finally</span> {
                    TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ ä¿å­˜å®Œæˆ é€šçŸ¥æ¶ˆè´¹è€…"</span>);
                    mCondition.signalAll();
                    mLock.unlock();
                }
            }
    
    
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preReadStream</span><span class="hljs-params">()</span>{
                <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">4096</span>];
                <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">while</span> (during(READY)) {
                        mLock.lock();
                        <span class="hljs-keyword">try</span> {
                            <span class="hljs-comment">//åŒé‡æ ¡éªŒé”</span>
                            <span class="hljs-keyword">if</span> (during(READY)) {
                                <span class="hljs-comment">// è¯»å–ç½‘ç»œæµæ•°æ®</span>
                                <span class="hljs-type">int</span> <span class="hljs-variable">bytesRead</span> <span class="hljs-operator">=</span> mNetworkStream.read(buffer);
                                <span class="hljs-keyword">if</span> (bytesRead == -<span class="hljs-number">1</span>) {
                                    TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ å®Œæˆ "</span> + bytesRead);
                                    closeStream(mNetworkStream);
                                    mNetworkStream = <span class="hljs-literal">null</span>;
                                    <span class="hljs-keyword">break</span>;
                                }
                                TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ "</span> + bytesRead);
                                mBufferStream.write(buffer, <span class="hljs-number">0</span>, bytesRead);
                            }
                        } <span class="hljs-keyword">finally</span> {
                            num++;
                            TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ ç¬¬"</span> + num + <span class="hljs-string">"æ¬¡é€šçŸ¥æ¶ˆè´¹è€…"</span>);
                            mCondition.signalAll();
                            mLock.unlock();
                        }
                    }
                    <span class="hljs-comment">//å·²ç»æä¾›äº†æ•°æ®ï¼Œåˆ™æ‰“å°ä¸ªæ—¥å¿—çœ‹ä¸‹</span>
                    <span class="hljs-keyword">if</span> (after(OFFER)) {
                        TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æ•°æ®æµå·²æä¾› é¢„è¯»ç¼“å­˜ å…³é—­"</span>);
                    }
                } <span class="hljs-keyword">catch</span> (IOException e) {
                    TLog.e(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ å¼‚å¸¸ å…³é—­"</span>, e);
                    mLock.lock();
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-comment">//åœ¨è¯»å–çš„è¿‡ç¨‹ä¸­å‡ºç°äº†å¼‚å¸¸ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰æä¾›æ•°æ®ï¼Œå°±ç›´æ¥dropè°ƒ</span>
                        <span class="hljs-keyword">if</span> (!after(OFFER)) {
                            drop();
                        }
                    } <span class="hljs-keyword">finally</span> {
                        mLock.unlock();
                    }
                }
            }
    
            <span class="hljs-comment">/**
             * è·å–æ¡¥æ¥æµ
             * æµè§ˆå™¨çº¿ç¨‹è°ƒç”¨è¯¥æ–¹æ³•è·å–æ•°æ®æµ
             */</span>
            <span class="hljs-keyword">public</span> InputStream <span class="hljs-title function_">getBridgedStream</span><span class="hljs-params">()</span>{
                mLock.lock();
                TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ®"</span>);
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">if</span> (before(READY)) {
                        <span class="hljs-type">long</span> <span class="hljs-variable">time1</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
                        TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿›å…¥ç­‰å¾…çŠ¶æ€"</span>);
                        mCondition.await(<span class="hljs-number">5</span>, TimeUnit.SECONDS);
                        <span class="hljs-type">long</span> <span class="hljs-variable">time2</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
                        TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¢«å”¤é†’ ç­‰å¾…æ—¶é•¿ï¼š"</span> + (time2 - time1));
                    }
                    <span class="hljs-comment">// ç­‰å¾…ç»“æŸï¼Œå†ç¡®è®¤ä¸€æ¬¡çŠ¶æ€æ˜¯å¦å¯ç”¨</span>
                    <span class="hljs-keyword">if</span> (before(READY)) {
                        TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® ä¾æ—§æ²¡æœ‰å¯ç”¨æ•°æ® è¿”å›ç©ºæµ"</span>);
                        drop();
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                    } elseif (after(OFFER)) {
                        TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® æ•°æ®å·²è¢«åºŸå¼ƒæˆ–è€…è¢«ä»–äººè¢«ä½¿ç”¨ è¿”å›ç©ºæµ"</span>);
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                    } elseif (isTimeOut()) {
                        TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® æ•°æ®è¶…æ—¶ è¿”å›ç©ºæµ"</span>);
                        drop();
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">if</span> (mNetworkStream != <span class="hljs-literal">null</span> &amp;&amp; mBufferStream != <span class="hljs-literal">null</span>) {
                            mStatus.set(OFFER);
                            <span class="hljs-comment">// åˆ›å»ºæ–°çš„æ¡¥æ¥æµå®ä¾‹ï¼ŒåŒ…å«å·²ç¼“å­˜æ•°æ®å’Œå‰©ä½™ç½‘ç»œæµ</span>
                            <span class="hljs-type">ByteArrayInputStream</span> <span class="hljs-variable">cachedStream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(mBufferStream.toByteArray());
                            TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿”å›æ¡¥æ¥æµ"</span>);
                            returnnew <span class="hljs-title function_">SequenceInputStream</span><span class="hljs-params">(cachedStream, mNetworkStream)</span>;
                        } elseif (mNetworkStream != <span class="hljs-literal">null</span>) {
                            mStatus.set(OFFER);
                            TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿”å›ç½‘ç»œæµ"</span>);
                            <span class="hljs-keyword">return</span> mNetworkStream;
                        } elseif (mBufferStream != <span class="hljs-literal">null</span>) {
                            mStatus.set(OFFER);
                            <span class="hljs-comment">// åˆ›å»ºæ–°çš„æ¡¥æ¥æµå®ä¾‹ï¼ŒåŒ…å«å·²ç¼“å­˜æ•°æ®å’Œå‰©ä½™ç½‘ç»œæµ</span>
                            TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿”å›ç¼“å­˜æµ"</span>);
                            returnnew <span class="hljs-title function_">ByteArrayInputStream</span><span class="hljs-params">(mBufferStream.toByteArray()</span>);
                        } <span class="hljs-keyword">else</span> {
                            drop();
                            TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿”å›ç©ºæµ"</span>);
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                        }
                    }
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    TLog.e(<span class="hljs-string">"TAG"</span>, <span class="hljs-string">"Create bridged stream failed"</span>, e);
                    drop();
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                } <span class="hljs-keyword">finally</span> {
                    mLock.unlock();
                }
            }
    
            <span class="hljs-comment">/**
             * è·å–å“åº”å¤´ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
             */</span>
            <span class="hljs-keyword">public</span> Map&lt;String, String&gt; <span class="hljs-title function_">getResponseHeader</span><span class="hljs-params">()</span>{
                mLock.lock();
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">//å¦‚æœè¯·æ±‚é‡Œé¢ä¸å¸¦è·¨åŸŸæ ‡è¯†ï¼Œåˆ™å¸¦ä¸Šè·¨åŸŸæ ‡è¯†</span>
                    <span class="hljs-keyword">if</span> (mResponseHeader != <span class="hljs-literal">null</span> &amp;&amp; !mResponseHeader.containsKey(<span class="hljs-string">"Access-Control-Allow-Origin"</span>)) {
                        mResponseHeader.put(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>);
                    }
                    <span class="hljs-keyword">return</span> mResponseHeader;
                } <span class="hljs-keyword">finally</span> {
                    mLock.unlock();
                }
            }
    
    
            <span class="hljs-comment">/**
             * ç»Ÿä¸€å…³é—­æµèµ„æºæ“ä½œ
             */</span>
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">closeStream</span><span class="hljs-params">(Closeable stream)</span>{
                <span class="hljs-keyword">if</span> (stream != <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">try</span> {
                        stream.close();
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        TLog.e(TAG, <span class="hljs-string">"å…³é—­æµå¤±è´¥"</span>, e);
                    }
                }
            }
    
    
            <span class="hljs-comment">/**
             * åˆ¤æ–­æ•°æ®æœ‰æ²¡æœ‰è¶…æ—¶
             */</span>
            <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isTimeOut</span><span class="hljs-params">()</span>{
                <span class="hljs-keyword">return</span> Math.abs(mResponseTime - System.currentTimeMillis()) &gt; <span class="hljs-number">5000</span>;
            }
    
            <span class="hljs-comment">/**
             * ä¸¢å¼ƒæ•°æ®
             */</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drop</span><span class="hljs-params">()</span>{
                mLock.lock();
                <span class="hljs-keyword">try</span> {
                    mStatus.set(DROP);
                    mResponseHeader = <span class="hljs-literal">null</span>;
                    mResponseTime = <span class="hljs-number">0</span>;
                    closeStream(mBufferStream);
                    closeStream(mNetworkStream);
                    mBufferStream = <span class="hljs-literal">null</span>;
                    mNetworkStream = <span class="hljs-literal">null</span>;
                    mSyncLoadCache.remove(mRequestUrl);
                    TLog.d(TAG, <span class="hljs-string">"å¹¶è¡ŒåŠ é€Ÿ ç¼“å­˜æ•°æ®ä¸¢å¼ƒ"</span>);
                } <span class="hljs-keyword">finally</span> {
                    mLock.unlock();
                }
            }
    
        }
    
    
        <span class="hljs-comment">/**
         * ä¸»æ–¹æ³•ï¼Œç¨‹åºå…¥å£
         */</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
    
            <span class="hljs-type">SyncLoadResponseBean</span> <span class="hljs-variable">syncLoadResponseBean</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncLoadResponseBean</span>(<span class="hljs-string">"https://www.baidu.com"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;());
    
            <span class="hljs-comment">//æ¨¡æ‹Ÿç”Ÿäº§è€…çº¿ç¨‹</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"ç”Ÿäº§è€…å¯åŠ¨"</span>);
                    <span class="hljs-comment">//æ¨¡æ‹Ÿç½‘ç»œå»ºè”</span>
                    sleep(<span class="hljs-number">200</span>);
                    <span class="hljs-comment">//æ¨¡æ‹Ÿç½‘ç»œèµ„æºè¿”å›</span>
                    <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"./xxxx.txt"</span>);
                    <span class="hljs-type">ResponseBody</span> <span class="hljs-variable">responseBody</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseBody</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(file));
                    <span class="hljs-comment">//æ¨¡æ‹Ÿå“åº”</span>
                    syncLoadResponseBean.saveResponse(responseBody, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;());
                } <span class="hljs-keyword">catch</span> (FileNotFoundException e) {
                    thrownew <span class="hljs-title function_">RuntimeException</span><span class="hljs-params">(e)</span>;
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    thrownew <span class="hljs-title function_">RuntimeException</span><span class="hljs-params">(e)</span>;
                } <span class="hljs-keyword">finally</span> {
                    System.out.println(<span class="hljs-string">"ç”Ÿäº§çº¿ç¨‹å·¥ä½œå®Œæˆï¼Œå”¤é†’ç­‰å¾…ä¸­çš„æ¶ˆè´¹è€…"</span>);
                    syncLoadResponseBean.signalAll();
                }
            }).start();
    
            <span class="hljs-comment">//æ¨¡æ‹Ÿæ¶ˆè´¹è€…çº¿ç¨‹1</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                System.out.println(<span class="hljs-string">"æ¶ˆè´¹è€…å¯åŠ¨"</span>);
                <span class="hljs-comment">//æ¨¡æ‹Ÿè¯»å–</span>
                <span class="hljs-type">InputStream</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> syncLoadResponseBean.getBridgedStream();
                System.out.println(<span class="hljs-string">"æ¶ˆè´¹è€… "</span> + stream);
            }).start();
    
        }
    
    }
</code></pre>
<h3 data-id="heading-26">5.3 å…¬å¹³é”ä»£ç è§£è¯»</h3>
<ul>
<li>
<p>ä½¿ç”¨ReentrantLockå®ç°å…¬å¹³é”</p>
</li>
<li>
<p>ä½¿ç”¨Conditionå®ç°çº¿ç¨‹ç­‰å¾…</p>
<pre><code class="hljs language-css" lang="css">ç”Ÿäº§è€…å¯åŠ¨
æ¶ˆè´¹è€…å¯åŠ¨
å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ®
å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿›å…¥ç­‰å¾…çŠ¶æ€
å¹¶è¡ŒåŠ è½½ å“åº”ä¿å­˜
å¹¶è¡ŒåŠ è½½ ä¿å­˜å®Œæˆ é€šçŸ¥æ¶ˆè´¹è€…
å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¢«å”¤é†’ ç­‰å¾…æ—¶é•¿ï¼š<span class="hljs-number">203</span>
å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿”å›æ¡¥æ¥æµ
æ¶ˆè´¹è€… java<span class="hljs-selector-class">.io</span><span class="hljs-selector-class">.SequenceInputStream</span><span class="hljs-keyword">@4e8de630</span>
å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ ç¬¬<span class="hljs-number">1</span>æ¬¡é€šçŸ¥æ¶ˆè´¹è€…
å¹¶è¡ŒåŠ è½½ æ•°æ®æµå·²æä¾› é¢„è¯»ç¼“å­˜ å…³é—­
ç”Ÿäº§çº¿ç¨‹å·¥ä½œå®Œæˆï¼Œå”¤é†’ç­‰å¾…ä¸­çš„æ¶ˆè´¹è€…
è¿›ç¨‹å·²ç»“æŸï¼Œé€€å‡ºä»£ç ä¸º <span class="hljs-number">0</span>
</code></pre>
</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°åœ¨å»ºè”å®Œæˆï¼Œä¿å­˜å“åº”çš„æ—¶å€™ï¼Œé¦–æ¬¡é€šçŸ¥æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…å°±èƒ½å¤Ÿå‡†ç¡®çš„è¢«å”¤é†’ã€‚</p>
<p>å†é€šè¿‡è°ƒæ•´æµ‹è¯•ä»£ç sleepçš„æ—¶é—´æ¨¡æ‹Ÿæ•°æ®æ­£åœ¨è¢«é¢„è¯»ä¸­ï¼Œæ¶ˆè´¹è€…æ‰“æ–­é¢„è¯»çš„åœºæ™¯ï¼Œæ¶ˆè´¹è€…ä¾ç„¶èƒ½å¤Ÿè¢«å‡†ç¡®çš„å”¤é†’ã€‚</p>
<pre><code class="hljs language-css" lang="css">    ç”Ÿäº§è€…å¯åŠ¨
    æ¶ˆè´¹è€…å¯åŠ¨
    å¹¶è¡ŒåŠ è½½ å“åº”ä¿å­˜
    å¹¶è¡ŒåŠ è½½ ä¿å­˜å®Œæˆ é€šçŸ¥æ¶ˆè´¹è€…
    å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ <span class="hljs-number">4096</span>
    å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ ç¬¬<span class="hljs-number">1</span>æ¬¡é€šçŸ¥æ¶ˆè´¹è€…
    å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ®
    å¹¶è¡ŒåŠ è½½ æŸ¥æ‰¾æµæ•°æ® è¿”å›æ¡¥æ¥æµ
    å¹¶è¡ŒåŠ è½½ é¢„è¯»ç¼“å­˜ ç¬¬<span class="hljs-number">2</span>æ¬¡é€šçŸ¥æ¶ˆè´¹è€…
    å¹¶è¡ŒåŠ è½½ æ•°æ®æµå·²æä¾› é¢„è¯»ç¼“å­˜ å…³é—­
    ç”Ÿäº§çº¿ç¨‹å·¥ä½œå®Œæˆï¼Œå”¤é†’ç­‰å¾…ä¸­çš„æ¶ˆè´¹è€…
    æ¶ˆè´¹è€… java<span class="hljs-selector-class">.io</span><span class="hljs-selector-class">.SequenceInputStream</span><span class="hljs-keyword">@5a40ed62</span>
    è¿›ç¨‹å·²ç»“æŸï¼Œé€€å‡ºä»£ç ä¸º <span class="hljs-number">0</span>
</code></pre>
<p>æ•´ä½“ä»£ç è¿è¡Œç¬¦åˆé¢„æœŸã€‚</p>
<h3 data-id="heading-27">5.4 æ¡¥æ¥æµä»£ç è§£è¯»</h3>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¤šæ¬¡æåˆ°æ¡¥æ¥æµçš„æ¦‚å¿µï¼Œæ¡¥æ¥æµé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å°†å¤šä¸ªæ•°æ®æµæ¥èµ·æ¥ï¼Œå¯ä»¥è®©è¯»æµçš„ç¨‹åºæŒ‰ç…§é¡ºåºå…ˆè¯»ç¬¬ä¸€ä¸ªæµï¼Œè¯»å®Œç¬¬ä¸€ä¸ªå†è¯»ç¬¬äºŒä¸ªæµï¼Œä»¥æ­¤ç±»æ¨ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨äº†javaå®˜æ–¹çš„ä¸€ä¸ªç±»æ¥å®ç°æµçš„æ¡¥æ¥ã€‚</p>
<p>SequenceInputStreamæ˜¯ Java I/O ç±»åº“ä¸­çš„ä¸€ä¸ªè¾“å…¥æµç±»ï¼Œå®ƒå…è®¸ä½ å°†å¤šä¸ªè¾“å…¥æµæŒ‰é¡ºåºè¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªé€»è¾‘ä¸Šçš„è¿ç»­è¾“å…¥æµã€‚</p>
<p>SequenceInputStreamçš„<strong>ä¸»è¦ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p><strong>é¡ºåºè¯»å–</strong>ï¼šå®ƒä¼šæŒ‰é¡ºåºè¯»å–å¤šä¸ªè¾“å…¥æµï¼Œå…ˆè¯»å–ç¬¬ä¸€ä¸ªæµçš„æ‰€æœ‰å†…å®¹ï¼Œç„¶åè‡ªåŠ¨åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªæµï¼Œä¾æ­¤ç±»æ¨ã€‚</p>
</li>
<li>
<p><strong>æµåˆå¹¶</strong>ï¼šå°†å¤šä¸ªç‹¬ç«‹çš„è¾“å…¥æµåˆå¹¶ä¸ºä¸€ä¸ªè¿ç»­çš„è¾“å…¥æµã€‚</p>
</li>
<li>
<p><strong>è‡ªåŠ¨åˆ‡æ¢</strong>ï¼šå½“ä¸€ä¸ªæµè¯»å–å®Œæ¯•æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæµã€‚</p>
</li>
<li>
<p><strong>è‡ªåŠ¨å…³é—­</strong>ï¼šSequenceInputStream å…³é—­æ—¶ä¼šè‡ªåŠ¨å…³é—­æ‰€æœ‰åŒ…å«çš„è¾“å…¥æµ</p>
</li>
</ul>
<p>SequenceInputStreamçš„<strong>ä½¿ç”¨åœºæ™¯</strong></p>
<p>å½“æœ‰å¤šä¸ªæ–‡ä»¶éœ€è¦æŒ‰é¡ºåºè¯»å–ï¼Œä½†å¸Œæœ›åƒè¯»å–å•ä¸ªæ–‡ä»¶ä¸€æ ·å¤„ç†æ—¶ï¼Œåˆå¹¶å¤šä¸ªæ¥æºçš„æ•°æ®æµï¼Œéœ€è¦å°†å¤šä¸ªè¾“å…¥æºä¸²è”èµ·æ¥å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŠŠä¸€ä¸ªæˆ–è€…å¤šä¸ªæµä¸²è”èµ·æ¥æŒ‰é¡ºåºè¯»å–ï¼Œé€šè¿‡è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ç¼“å­˜æµå’Œç½‘ç»œæµçš„æ— ç¼æ¡¥æ¥ã€‚</p>
<h2 data-id="heading-28">å…­ã€æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“</h2>
<p><img src="https://static001.geekbang.org/infoq/69/69d4181a623b821a7e114c8497fe5df3.png" alt="" loading="lazy"/></p>
<p><strong>å…¬å¹³é”æ›¿ä»£éå…¬å¹³é”</strong></p>
<ul>
<li>
<p><strong>é—®é¢˜</strong>ï¼šsynchronizedï¼ˆéå…¬å¹³é”ï¼‰å¯¼è‡´ç”Ÿäº§è€…å¯èƒ½é‡æ–°æŠ¢å é”ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç”¨ReentrantLockï¼ˆå…¬å¹³é”ï¼‰+Conditionå®ç°é¡ºåºè·å–ã€‚</p>
</li>
</ul>
<p><strong>æ¡¥æ¥æµæŠ€æœ¯</strong></p>
<ul>
<li>
<p>ç”¨SequenceInputStreamåˆå¹¶å·²ç¼“å†²æµï¼ˆByteArrayInputStreamï¼‰ä¸ç½‘ç»œæµã€‚</p>
</li>
<li>
<p>å®ç°æ— ç¼è¡”æ¥ï¼Œæ— éœ€ç­‰å¾…å…¨é‡æ•°æ®ã€‚</p>
</li>
</ul>
<p><strong>åŠç¼“å†²æœºåˆ¶</strong></p>
<ul>
<li>
<p>å¹¶è¡Œä»»åŠ¡æ¯æ¬¡è¯»å– 4096 å­—èŠ‚åé‡Šæ”¾é”ï¼Œå…è®¸æ¶ˆè´¹è€…æ‰“æ–­ã€‚</p>
</li>
<li>
<p>å¯ä»¥å¹³è¡¡é¢„è¯»æ•ˆç‡ä¸å†…å­˜å ç”¨ã€‚</p>
</li>
</ul>
<h2 data-id="heading-29">ä¸ƒã€å†™åœ¨æœ€å</h2>
<p>å›é¡¾ä¸Šè¿°æ–¹æ¡ˆï¼Œé‡‡ç”¨åŒæ­¥é”å®ç°ç¼“å†²è¿‡ç¨‹çš„æ‰“æ–­ï¼Œä½¿ç”¨SequenceInputStreamå®ç°æ¡¥æ¥æµï¼Œé¢„è¯»è¿‡ç¨‹çš„æ‰“æ–­æ˜¯é€šè¿‡æµè¯»å–å¾ªç¯ä½“å†…çš„å…¬å¹³é”æ¥å®ç°çš„ï¼Œç›¸æ¯”æœ€åˆçš„å¾ªç¯ç­‰å¾…ï¼Œæ•°æ®è¶…æ—¶åºŸå¼ƒçš„æ¨¡å¼ï¼Œæ–°æ–¹æ¡ˆå®ç°äº†ç½‘ç»œæµå’Œç¼“å­˜æµçš„æ— ç¼åˆ‡æ¢ï¼Œæ•´åˆäº†å¹¶è¡Œè¯·æ±‚çš„èµ„æºï¼Œå……åˆ†åˆ©ç”¨äº†é¡µé¢å¯åŠ¨æ—¶é—´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3.4 æ€§èƒ½ä¼˜åŒ–æ­ç§˜ï¼šè¿™5ä¸ªComposition APIæŠ€å·§è®©æˆ‘çš„åº”ç”¨æé€Ÿ40%]]></title>    <link>https://juejin.cn/post/7580288235031347200</link>    <guid>https://juejin.cn/post/7580288235031347200</guid>    <pubDate>2025-12-07T00:16:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580288235031347200" data-draft-id="7580312375372742696" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3.4 æ€§èƒ½ä¼˜åŒ–æ­ç§˜ï¼šè¿™5ä¸ªComposition APIæŠ€å·§è®©æˆ‘çš„åº”ç”¨æé€Ÿ40%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-07T00:16:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3.4 æ€§èƒ½ä¼˜åŒ–æ­ç§˜ï¼šè¿™5ä¸ªComposition APIæŠ€å·§è®©æˆ‘çš„åº”ç”¨æé€Ÿ40%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T00:16:30.000Z" title="Sun Dec 07 2025 00:16:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue 3.4 æ€§èƒ½ä¼˜åŒ–æ­ç§˜ï¼šè¿™5ä¸ªComposition APIæŠ€å·§è®©æˆ‘çš„åº”ç”¨æé€Ÿ40%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Vue 3.4 çš„å‘å¸ƒå¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ€§èƒ½æ”¹è¿›å’Œæ–°ç‰¹æ€§ï¼Œå°¤å…¶æ˜¯ Composition API çš„è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´å¼ºå¤§çš„å·¥å…·æ¥æ„å»ºé«˜æ€§èƒ½åº”ç”¨ã€‚ä½œä¸ºä¸€åé•¿æœŸä½¿ç”¨ Vue çš„å‰ç«¯å¼€å‘è€…ï¼Œæˆ‘åœ¨æœ€è¿‘çš„é¡¹ç›®ä¸­é€šè¿‡æ·±å…¥ç ”ç©¶å’Œå®è·µï¼Œå‘ç°äº†ä¸€äº›å…³é”®çš„ Composition API æŠ€å·§ï¼ŒæˆåŠŸå°†åº”ç”¨çš„æ€§èƒ½æå‡äº†40%ã€‚æœ¬æ–‡å°†åˆ†äº«è¿™äº›å®æˆ˜ç»éªŒï¼Œå¸®åŠ©ä½ å……åˆ†å‘æŒ¥ Vue 3.4 çš„æ½œåŠ›ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <code>shallowRef</code> vs <code>ref</code>ï¼šç²¾å‡†æ§åˆ¶å“åº”å¼å¼€é”€</h3>
<p>åœ¨ Vue 3 ä¸­ï¼Œ<code>ref</code> å’Œ <code>reactive</code> æ˜¯åˆ›å»ºå“åº”å¼æ•°æ®çš„æ ¸å¿ƒ APIã€‚ç„¶è€Œï¼Œè¿‡åº¦ä½¿ç”¨ <code>ref</code> å¯èƒ½ä¼šå¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚Vue 3.4 è¿›ä¸€æ­¥ä¼˜åŒ–äº† <code>shallowRef</code>ï¼Œä½¿å…¶æˆä¸ºå¤„ç†å¤§å‹å¯¹è±¡æˆ–åµŒå¥—æ•°æ®çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<h4 data-id="heading-4"><strong>é—®é¢˜åœºæ™¯</strong></h4>
<p>å½“æˆ‘ä»¬éœ€è¦è·Ÿè¸ªä¸€ä¸ªå¤§å‹å¯¹è±¡çš„å¼•ç”¨å˜åŒ–ï¼ˆè€Œéå…¶å†…éƒ¨å±æ€§å˜åŒ–ï¼‰æ—¶ï¼Œä½¿ç”¨ <code>ref</code> ä¼šå¯¼è‡´ Vue æ·±åº¦éå†æ•´ä¸ªå¯¹è±¡ä»¥å»ºç«‹å“åº”å¼ä¾èµ–ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> largeObj = <span class="hljs-title function_">ref</span>({ ... }) <span class="hljs-comment">// Vueä¼šé€’å½’éå†æ‰€æœ‰å±æ€§</span>
</code></pre>
<h4 data-id="heading-5"><strong>è§£å†³æ–¹æ¡ˆ</strong></h4>
<p>æ”¹ç”¨ <code>shallowRef</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> largeObj = <span class="hljs-title function_">shallowRef</span>({ ... }) <span class="hljs-comment">// ä»…è·Ÿè¸ªé¡¶å±‚å¼•ç”¨å˜åŒ–</span>
</code></pre>
<h4 data-id="heading-6"><strong>æ€§èƒ½æ”¶ç›Š</strong></h4>
<ul>
<li><strong>å‡å°‘ä»£ç†åˆ›å»º</strong>ï¼šé¿å…å¯¹æ·±å±‚å±æ€§çš„ä¸å¿…è¦ä»£ç†ã€‚</li>
<li><strong>é™ä½å†…å­˜å ç”¨</strong>ï¼šèŠ‚çœçº¦30%çš„å†…å­˜å¼€é”€ï¼ˆå®æµ‹æ•°æ®ï¼‰ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºä¸éœ€è¦å†…éƒ¨å±æ€§å“åº”çš„æ•°æ®ç»“æ„ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“å®ä¾‹ã€å¤§å‹é…ç½®å¯¹è±¡ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-7">2. <code>computed</code> + <code>watchEffect</code>çš„é«˜æ•ˆç»„åˆ</h3>
<p>Vue 3.4å¯¹è®¡ç®—å±æ€§å’Œå‰¯ä½œç”¨è¿½è¸ªè¿›è¡Œäº†åº•å±‚ä¼˜åŒ–ã€‚é€šè¿‡åˆç†ç»„åˆè¿™ä¸¤è€…ï¼Œå¯ä»¥å®ç°æ›´ç²¾ç¡®çš„ä¾èµ–è¿½è¸ªã€‚</p>
<h4 data-id="heading-8"><strong>ç»å…¸æ¨¡å¼çš„é—®é¢˜</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>)
<span class="hljs-title function_">watch</span>(doubleCount, <span class="hljs-function">(<span class="hljs-params">newVal</span>) =&gt;</span> { ... })
</code></pre>
<p>è¿™ç§æ¨¡å¼ä¼šè§¦å‘ä¸¤æ¬¡ä¾èµ–æ”¶é›†ï¼ˆä¸€æ¬¡è®¡ç®—å±æ€§ï¼Œä¸€æ¬¡ä¾¦å¬å™¨ï¼‰ã€‚</p>
<h4 data-id="heading-9"><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong></h4>
<p>ç›´æ¥ä½¿ç”¨ <code>watchEffect</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> {
 <span class="hljs-keyword">const</span> doubled = count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doubled)
})
</code></pre>
<p>æˆ–è€…å¯¹äºçº¯è®¡ç®—åœºæ™¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
 <span class="hljs-keyword">const</span> result = count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>
 <span class="hljs-title function_">trackSideEffect</span>(result) <span class="hljs-comment">// Vue3.4æ–°å¢çš„æ€§èƒ½é’©å­</span>
 <span class="hljs-keyword">return</span> result
})
</code></pre>
<h4 data-id="heading-10"><strong>å®æµ‹ç»“æœ</strong></h4>
<p>åœ¨å¤æ‚è¡¨å•éªŒè¯åœºæ™¯ä¸‹ï¼Œæ­¤ä¼˜åŒ–å‡å°‘äº†15%-20%çš„å†—ä½™è®¡ç®—ã€‚</p>
<h3 data-id="heading-11">3. <code>markRaw</code>çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿</h3>
<p>Vue3.4å¢å¼ºäº†éå“åº”å¼æ•°æ®æ ‡è®°çš„èƒ½åŠ›ã€‚åˆç†ä½¿ç”¨å¯ä»¥é¿å…"å“åº”å¼æ±¡æŸ“"ã€‚</p>
<h4 data-id="heading-12"><strong>å…³é”®æ´å¯Ÿ</strong></h4>
<ul>
<li>Reactivity Transformåœ¨ç¼–è¯‘æ—¶åªèƒ½è§£å†³éƒ¨åˆ†é—®é¢˜ã€‚</li>
<li>Runtimeé˜¶æ®µçš„éå“åº”å¼æ ‡è®°ä»ä¸å¯æ›¿ä»£ã€‚</li>
</ul>
<h4 data-id="heading-13"><strong>å®æˆ˜æ¡ˆä¾‹</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { markRaw } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImmutableConfig</span> {
 <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
   <span class="hljs-title function_">markRaw</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-comment">// Mark the instance as non-reactive</span>
 }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useStore</span> = (<span class="hljs-params"/>) =&gt; {
 <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImmutableConfig</span>()
 <span class="hljs-keyword">return</span> <span class="hljs-title function_">reactive</span>({
   state,
   config <span class="hljs-comment">// Will NOT be converted to reactive proxy</span>
 })
}
</code></pre>
<h4 data-id="heading-14"><strong>æ€§èƒ½å½±å“</strong></h4>
<p>åœ¨åŒ…å«1000+é…ç½®é¡¹çš„åœºæ™¯ä¸­ï¼š</p>
<ul>
<li>Before: ~450msåˆå§‹åŒ–æ—¶é—´</li>
<li>After: ~120msåˆå§‹åŒ–æ—¶é—´</li>
</ul>
<h3 data-id="heading-15">### ### ### ### ###</h3>
<h3 data-id="heading-16">### ### ### ###</h3>
<h3 data-id="heading-17"/>
<h3 data-id="heading-18"/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¬è½½ã€‘æˆ‘æµ‹è¯•äº† Google Antigravity IDEï¼ˆå¹¶å‘ç°äº†çœŸæ­£çš„ Cursor æ€æ‰‹ï¼‰]]></title>    <link>https://juejin.cn/post/7580312375372300328</link>    <guid>https://juejin.cn/post/7580312375372300328</guid>    <pubDate>2025-12-06T18:09:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580312375372300328" data-draft-id="7580278296838078498" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¬è½½ã€‘æˆ‘æµ‹è¯•äº† Google Antigravity IDEï¼ˆå¹¶å‘ç°äº†çœŸæ­£çš„ Cursor æ€æ‰‹ï¼‰"/> <meta itemprop="keywords" content="Google,Gemini"/> <meta itemprop="datePublished" content="2025-12-06T18:09:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¬è½½ã€‘æˆ‘æµ‹è¯•äº† Google Antigravity IDEï¼ˆå¹¶å‘ç°äº†çœŸæ­£çš„ Cursor æ€æ‰‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T18:09:15.000Z" title="Sat Dec 06 2025 18:09:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Fai-software-engineer%2Fi-tested-new-google-antigravity-ide-and-discovered-the-real-cursor-killer-96ffa7e55026" target="_blank" title="https://medium.com/ai-software-engineer/i-tested-new-google-antigravity-ide-and-discovered-the-real-cursor-killer-96ffa7e55026" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<blockquote>
<p>è¯‘è€…æŒ‰ï¼šæ€ä¹ˆè¯´å‘¢ï¼Œcursoræœ€è¿‘çš„æ›´æ–°ï¼Œä»¥åŠantigravityçš„ä¸€äº›ç‰¹æ€§ï¼ˆç‰¹åˆ«æ˜¯agent managerï¼‰éƒ½å€Ÿé‰´äº†TRAEã€‚ä¸€å®šç¨‹åº¦éƒ½è¯´æ˜äº†TRAEçš„è®¾è®¡èƒ½åŠ›ï¼Œä»¥åŠæˆä¸ºå›½é™…ä¸€æµçš„æ½œè´¨ã€‚</p>
<p>è™½ç„¶ä»–è¿˜èƒŒè´Ÿäº†ä¸€ä¸ªä¸­å›½å…¬å¸ä¸èƒ½ç”¨claudeçš„è´Ÿæ‹…ã€‚ä½†å¯èƒ½åœ¨gemini3è¿™ä¹ˆç‰›çš„æƒ…å†µä¸‹ï¼Œçœ‹èµ·æ¥è¿™ä¸ªè´Ÿæ‹…åˆä¸è¿™ä¹ˆé‡äº†ã€‚</p>
<p>æˆ‘åœ¨ç”¨antigravityçš„æ—¶å€™ï¼Œè§‰å¾—æœ€æ£’çš„å…¶å®æœ‰ä¸¤ç‚¹ï¼ˆä¸”ä¸è¯´gemini3é€†å¤©çš„å‰ç«¯èƒ½åŠ›â€”â€”æ˜¯çœŸçš„é€†å¤©ï¼Œæ¯”claudeå¥½å¾—å¤šï¼‰ï¼š</p>
<p>1.antigravityæœ‰å•ç‹¬çš„browser agentï¼Œä¸å…‰æ˜¯å’Œchromeé›†æˆçš„æ›´å¥½ï¼Œè€Œä¸”å¯ä»¥åšå‰ç«¯æµ‹è¯•ã€‚åœ¨ç¼–ç æ•ˆç‡å’Œä½“éªŒä¸Šå®äº†ä¸€ä¸ªå¤§å°é˜¶</p>
<p>2.artifactsï¼Œä¹Ÿå°±æ˜¯antigravityç”Ÿæˆä¸€äº›ä¸­é—´äº§ç‰©ï¼Œæ¯”å¦‚planã€æˆªå›¾ã€å½•å±ç­‰ç­‰ï¼Œæ˜¯æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„geminiæ–‡ä»¶å¤¹ä¸‹çš„ï¼Œå¹¶æ²¡æœ‰æ··åœ¨é¡¹ç›®é‡Œã€‚å¦‚æœç”¨æƒ¯äº†cursorçš„åŒå­¦è‚¯å®šæœ‰è¿™ä¸ªçƒ¦æ¼ï¼šå‡ è½®å¯¹è¯ä¹‹åï¼Œworkspaceé‡Œçš„æ–‡æ¡£æ˜¯æ¸…éƒ½æ¸…ä¸è¿‡æ¥ã€‚antigravityè¿™ä¸ªè®¾è®¡ä¹Ÿè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œç•™ç»™ç”¨æˆ·ä¸€ä¸ªå¹²å‡€çš„workspaceï¼Œé‡Œé¢åªæœ‰ç»“æœï¼Œæ²¡æœ‰è¿‡ç¨‹ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆæ­£ç‰‡å¼€å§‹å§ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40587016dc81433eb8d1ba2dc424d405~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=2KGMXWyfYZIcnzwdSzdMK5Yx4u4%3D" alt="Google Antigravity IDE vs Cursor â€” Featured Image by Author" loading="lazy"/></p>
<p>è®©æˆ‘ä»¬é¢å¯¹ç°å®ï¼ŒCursor ç›®å‰æ˜¯æœ€å¥½çš„ AI ç¼–ç¨‹ IDEï¼Œä½†ç°åœ¨æˆ‘ä»¬æœ‰äº†å…è´¹çš„ Google Antigravityï¼Œ<strong>è™½ç„¶å®ƒæœ‰ä¸€äº›å°é—®é¢˜ï¼Œæˆ‘ç¨åä¼šè°ˆåˆ°ã€‚</strong></p>
<blockquote>
<p><strong>Antigravity æä¾›çš„ AI ç¼–ç¨‹æ¨¡å‹æ¯” Cursor æœ€è¿‘æ„å»ºçš„ Composer è¦å¥½å¾—å¤šã€‚æˆ‘ä»¬è¯´çš„æ˜¯ Gemini 3 Proã€Claude Sonnet 4.5 å’Œ GPT æ¨¡å‹ï¼Œå…¨éƒ¨é›†æˆåœ¨ä¸€ä¸ªç¼–è¾‘å™¨ä¸­ã€‚</strong></p>
</blockquote>
<p>å¦‚æœè¿™è¿˜ä¸èƒ½æ‘§æ¯ Cursor çš„ä¸»å¯¼åœ°ä½ï¼Œé‚£ä»€ä¹ˆéƒ½ä¸ä¼šã€‚</p>
<p><strong>Antigravity ä¸ä»…ä»…åœç•™åœ¨æ¨¡å‹ä¸Šã€‚å®ƒè¿˜å°†æˆ˜ç«æ‰©å±•åˆ°äº†<em>agentic coding</em>é¢†åŸŸã€‚</strong></p>
<p>Cursor æœ€è¿‘ç”¨ä¸€ä¸ªå¤šä»£ç†å¸ƒå±€è®©æˆ‘ä»¬å¤§åƒä¸€æƒŠï¼Œè¯¥å¸ƒå±€å¯ä»¥ç”Ÿæˆå¤šä¸ªå¹¶å‘å·¥ä½œçš„ä»£ç†ã€‚</p>
<p><strong>Antigravity å½»åº•é¢ è¦†äº†è¿™ä¸€ç‚¹ï¼Œå¹¶ä»¥æ›´å¤æ‚å’Œä¼˜é›…çš„æ–¹å¼æ·»åŠ äº†æ›´å¥½çš„æ–¹æ³•ã€‚</strong></p>
<p>å½“æˆ‘ç¬¬ä¸€æ¬¡å°è¯•å®ƒæ—¶ï¼Œå®ƒè¿è¡Œæµç•…ï¼Œä»å¤´åˆ°å°¾ç¼–ç¨‹æ¯«ä¸è´¹åŠ›ï¼Œ<strong>ä½†é‚£ä¸ªæµè§ˆå™¨å­ä»£ç†æœ‰ç‚¹å°é—®é¢˜ä½ ä¼šé‡åˆ°â€”â€”æˆ‘ä¼šåœ¨æœ¬æ–‡æœ«å°¾åˆ†äº«æˆ‘çš„ç»éªŒã€‚</strong></p>
<p>Chrome é›†æˆçš„æµ‹è¯•å°†å…¶æå‡åˆ°äº†ä¸€ä¸ªæ–°æ°´å¹³ã€‚</p>
<blockquote>
<p>Cursor åœ¨ 2.0 ç‰ˆæœ¬ä¸­å¼•å…¥äº†ä¸€ä¸ªæµè§ˆå™¨æµ‹è¯•å·¥å…·ï¼Œè®©æˆ‘ä»¬å…´å¥‹ä¸å·²ã€‚ä½†é‚£ä¸ªåŠŸèƒ½å·²ç»è¢« Antigravity åœ¨ Chrome ä¸Šçš„è‡ªä¸»æµè§ˆå™¨ä½¿ç”¨åŠŸèƒ½ç¨€é‡Šäº†...</p>
</blockquote>
<p><strong>å®ƒçœŸçš„åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨ç¨‹åºï¼Œåˆ›å»ºè´¦æˆ·ï¼Œç™»å½•ï¼Œç”šè‡³æµ‹è¯• CRUD æ“ä½œâ€”â€”åˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤â€”â€”æ¯ä¸ª Web åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚</strong></p>
<p>Antigravity ä¸ Gemini 3.0 ä¸€èµ·å‘å¸ƒï¼Œè®©æ‰€æœ‰äººéƒ½æªæ‰‹ä¸åŠã€‚</p>
<p>ä»é‚£æ—¶èµ·ï¼Œå®ƒä¸€ç›´åœ¨æµè¡Œã€‚</p>
<blockquote>
<p><strong>è¿™æ˜¯ä¸€ä¸ªä»£ç†ç¼–ç¨‹ç¼–è¾‘å™¨ï¼Œå……æ»¡äº†æˆ‘ä»¬åœ¨å…¶ä»– AI ä»£ç ç¼–è¾‘å™¨ä¸­æ²¡æœ‰è§è¿‡çš„åŠŸèƒ½ã€‚ç†Ÿæ‚‰çš„ VS Code é£æ ¼ç•Œé¢ã€‚å¤šæ¨¡å‹è®¿é—®å’Œæµè§ˆå™¨å­ä»£ç†ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-0">å¸ƒå±€</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3178cd624a1435db803009c073fcab3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=Z53rHzEI2brK%2FJXqemRhcTtnUks%3D" alt="" loading="lazy"/></p>
<p>ç•Œé¢åˆ†ä¸ºä¸¤ä¸ªä¸»è¦è§†å›¾ã€‚</p>
<p>ç¼–è¾‘å™¨æ˜¯ä½ çš„ä¼ ç»Ÿç¼–ç¨‹ç¯å¢ƒã€‚</p>
<blockquote>
<p><strong>ä»£ç†ç®¡ç†å™¨æ˜¯ä½ åè°ƒæ‰€æœ‰ AI å¯¹è¯å¹¶æŸ¥çœ‹å·¥ä½œåŒºä¸­å‘ç”Ÿçš„ä¸€åˆ‡çš„åœ°æ–¹ã€‚</strong></p>
</blockquote>
<p>ç”¨ç®€å•çš„é”®ç›˜å¿«æ·é”®åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚</p>
<p>è¿™ä¸æˆ‘ä»¬ä¹‹å‰è§è¿‡çš„ä¸åŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64a75c2582814a87bcd1ce951a52f4d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=QwBVLJHsN5%2Bfw1FfC36c559DWic%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>ä¸ä»…ä»…æ˜¯å¦ä¸€ä¸ªè¯•å›¾æˆä¸º Cursor çš„ AI ä»£ç ç¼–è¾‘å™¨ã€‚è¿™æ˜¯ Google ä»å¤´å¼€å§‹é‡æ–°æ€è€ƒæ•´ä¸ªå·¥ä½œæµç¨‹ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-1">ä¸¤ç§æ¨¡å¼</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50bc9d7b21e843878a376dd143c24df5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=M1NFkQU4rUllUndIqYQoilnSouA%3D" alt="" loading="lazy"/></p>
<p>Antigravity æœ‰ä¸¤ç§ä¸åŒçš„æ¨¡å¼ã€‚</p>
<ul>
<li><strong>è§„åˆ’æ¨¡å¼</strong> - ç”¨äºå¤æ‚ä»»åŠ¡ï¼Œä»£ç†åœ¨æ‰§è¡Œä¹‹å‰è¿›è¡Œè§„åˆ’ã€‚å®ƒå°†å·¥ä½œç»„ç»‡æˆä»»åŠ¡ç»„å¹¶ç”Ÿæˆäº§ç‰©ä»¥è·å¾—æœ€ä½³è´¨é‡ã€‚</li>
<li><strong>å¿«é€Ÿæ¨¡å¼</strong> - ç”¨äºç®€å•ä»»åŠ¡ï¼Œå¦‚é‡å‘½åå˜é‡æˆ–è¿è¡Œå¿«é€Ÿ bash å‘½ä»¤ã€‚åœ¨è¿™é‡Œé€Ÿåº¦æœ€é‡è¦ã€‚</li>
</ul>
<p>ä»£ç†ç³»ç»Ÿä¸æˆ‘ä»¬è§è¿‡çš„ä»»ä½•ä¸œè¥¿éƒ½ä¸åŒã€‚</p>
<blockquote>
<p><strong>å¤šæ­¥æ¨ç†ï¼Œå¯ä»¥å¯¹ä½ ç°æœ‰çš„ä»£ç è¿›è¡Œæ¨ç†ï¼Œä½¿ç”¨å¹¿æ³›çš„å·¥å…·ï¼Œå¹¶å¹¶è¡Œå¯åŠ¨å¤šä¸ªä»£ç†å¯¹è¯ã€‚</strong></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b75d9480e013426cbf7d51d9778c5cdd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=J88A%2Fn21Fa8v45RxF8JyBICDVa0%3D" alt="image.png" loading="lazy"/></p>
<p>æ˜¯çš„ï¼Œå¤šä¸ªä»£ç†åŒæ—¶åœ¨é¡¹ç›®çš„ä¸åŒéƒ¨åˆ†ä¸Šå·¥ä½œã€‚</p>
<h3 data-id="heading-2">æµè§ˆå™¨å­ä»£ç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03546acd4a71439bb3a0fb6ed0907b5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=J3P7gSxc2YkWgdd1iSE53aghT0I%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œå°±æ˜¯ç–¯ç‹‚çš„åœ°æ–¹ã€‚</p>
<blockquote>
<p><strong>Antigravity å¯ä»¥çœŸæ­£æ‰“å¼€ã€è¯»å–å’Œæ§åˆ¶ Chrome æµè§ˆå™¨ã€‚å®ƒæµ‹è¯•ä½ çš„å¼€å‘ç½‘ç«™ï¼Œè¯»å–äº’è”ç½‘æ•°æ®æºï¼Œè‡ªåŠ¨åŒ–æµè§ˆå™¨ä»»åŠ¡ï¼Œå¹¶å°†å…¶æ“ä½œè®°å½•ä¸ºäº§ç‰©ã€‚</strong></p>
</blockquote>
<p>å®ƒåœ¨å•ç‹¬çš„ Chrome é…ç½®æ–‡ä»¶ä¸­è¿è¡Œã€‚</p>
<p>ä¸€åˆ‡éƒ½ä¸ä½ çš„ä¸ªäººæµè§ˆéš”ç¦»ã€‚</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*GdO8M8SDao5-tCMb__uyiQ.png" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/></p>
<p>Cursor åœ¨ 2.0 ç‰ˆæœ¬ä¸­æ·»åŠ äº†æµè§ˆå™¨æ§ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7674243f00c34e418b82d750d3e697c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=eABpUNQ1bXXNje1eDHdPiG0Pvis%3D" alt="" loading="lazy"/></p>
<p>ä½† Antigravity çš„å®ç°æ„Ÿè§‰æ›´åŠ å®Œå–„å’Œè‡ªä¸»ã€‚</p>
<p>ä»£ç†å¯ä»¥ç¼–å†™ä»£ç ï¼Œåœ¨çœŸå®æµè§ˆå™¨ä¸­æµ‹è¯•ï¼Œè¯†åˆ«é—®é¢˜å¹¶ä¿®å¤å®ƒä»¬ã€‚</p>
<p>è®©æˆ‘ä»¬åˆ†æä¸€ä¸‹æ˜¯ä»€ä¹ˆè®©è¿™ä¸ª IDE ç‰¹æ®Šï¼Œä»¥åŠä¸ºä»€ä¹ˆå¼€å‘è€…åº”è¯¥å…³å¿ƒã€‚</p>
<h2 data-id="heading-3">è§„åˆ’æ¨¡å¼ vs å¿«é€Ÿæ¨¡å¼</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bebad0c8e2c443e69c33372a7d228d9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=v0nnd9FYoIsNrT46vapZ%2FLNp%2BwQ%3D" alt="" loading="lazy"/></p>
<p>Cursor 2.0 å¼•å…¥äº†å¹¶è¡Œä»£ç†ã€‚ä¸€æ¬¡å…«ä¸ªï¼ŒåŒæ—¶å·¥ä½œã€‚</p>
<blockquote>
<p><strong>Antigravity è¯´"é‚£å¾ˆå¯çˆ±"å¹¶æ„å»ºäº†æ›´å…·åˆ›æ–°æ€§çš„ä¸œè¥¿ã€‚</strong></p>
</blockquote>
<p>Antigravity ä»£ç†åœ¨è¡ŒåŠ¨ä¹‹å‰ä¼šæ€è€ƒã€‚</p>
<p>å½“ä½ åœ¨ Antigravity ä¸­å¼€å§‹æ–°çš„ä»£ç†å¯¹è¯æ—¶ï¼Œä½ é€‰æ‹©ä½ çš„æ¨¡å¼ï¼š</p>
<ul>
<li><strong>è§„åˆ’æ¨¡å¼</strong> - ä»£ç†åœ¨æ‰§è¡Œå‰è§„åˆ’ã€‚ç”¨äºæ·±åº¦ç ”ç©¶ã€å¤æ‚ä»»åŠ¡å’Œåä½œå·¥ä½œã€‚</li>
<li><strong>å¿«é€Ÿæ¨¡å¼</strong> - ä»£ç†ç›´æ¥æ‰§è¡Œã€‚ç”¨äºéœ€è¦é€Ÿåº¦è€Œéå‘¨å¯†æ€§çš„ç®€å•ä»»åŠ¡ã€‚</li>
</ul>
<p>è¿™ä¸ªé€‰æ‹©æ”¹å˜äº†ä»£ç†å¤„ç†ä½ çš„è¯·æ±‚çš„æ–¹å¼ã€‚</p>
<h3 data-id="heading-4">è§„åˆ’æ¨¡å¼</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01cc8b376ad1480abbda5ac15ca7a5b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=eCTdCS%2BGOUdEKwL9Nkke3LfvSH4%3D" alt="" loading="lazy"/></p>
<p>åœ¨è§„åˆ’æ¨¡å¼ä¸­ï¼Œä»£ç†ä¸ä¼šç«‹å³å¼€å§‹ç¼–ç¨‹ã€‚</p>
<blockquote>
<p><strong>"ä½ è¦æ±‚ä¸€ä¸ªå¸¦æœ‰èº«ä»½éªŒè¯å’Œ React å‰ç«¯çš„å…¨æ ˆä»»åŠ¡ç®¡ç†åº”ç”¨ç¨‹åºã€‚ä¼šå‘ç”Ÿä»€ä¹ˆï¼š"</strong></p>
</blockquote>
<p>ä»£ç†åˆ†æä½ çš„è¯·æ±‚ã€‚å®ƒåˆ†è§£æ¶æ„â€”â€”æ•°æ®åº“æ¨¡å¼ã€API ç«¯ç‚¹å’Œå‰ç«¯ç»„ä»¶ï¼Œéµå¾ªä¸€åˆ‡å¦‚ä½•è¿æ¥ã€‚</p>
<p>ç„¶åå®ƒåˆ›å»ºä¸€ä¸ªè®¡åˆ’ï¼Œè¿™æ˜¯ä¸€ä¸ªä½ å¯ä»¥å®¡æŸ¥å’Œè¯„è®ºçš„äº§ç‰©ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4cae762ed814d5184f50f971e0d0075~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=QA0gaxIlskd0IkbZ%2BJlHcsuZynk%3D" alt="" loading="lazy"/></p>
<p>è®¡åˆ’æ˜¾ç¤ºï¼š</p>
<ul>
<li>é¡¹ç›®ç»“æ„</li>
<li>æŠ€æœ¯é€‰æ‹©</li>
<li>å®æ–½é¡ºåº</li>
<li>æ½œåœ¨æŒ‘æˆ˜</li>
<li>æ¯ä¸ªéƒ¨åˆ†çš„æ—¶é—´ä¼°è®¡</li>
</ul>
<p>ä½ å®¡æŸ¥è®¡åˆ’ï¼Œæ·»åŠ è¯„è®ºï¼Œè¯·æ±‚æ›´æ”¹ï¼Œä»£ç†è¿›è¡Œè°ƒæ•´ã€‚</p>
<p>åªæœ‰åœ¨ä½ æ‰¹å‡†åæ‰å¼€å§‹ç¼–ç¨‹ã€‚</p>
<h2 data-id="heading-5">ä»»åŠ¡ç»„ï¼šç»„ç»‡å±‚</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c280ae15b79417e8de89a7ca1b7c71c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=3iEU8eJLWa3FZ%2Ff1yOBaaJnJr8M%3D" alt="" loading="lazy"/></p>
<p>åœ¨è§„åˆ’æ¨¡å¼ä¸­ï¼Œå·¥ä½œè¢«ç»„ç»‡æˆä»»åŠ¡ç»„ã€‚</p>
<p>æ¯ä¸ªä»»åŠ¡ç»„æœ‰ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ€»ä½“ç›®æ ‡</li>
<li>æ›´æ”¹æ‘˜è¦</li>
<li>æ˜¾ç¤ºä¸ºè¯ä¸¸çš„ç¼–è¾‘æ–‡ä»¶</li>
<li>å¸¦æœ‰è¯¦ç»†æ­¥éª¤çš„å­ä»»åŠ¡</li>
<li>éœ€è¦æ‰¹å‡†çš„å¾…å¤„ç†æ“ä½œ</li>
</ul>
<blockquote>
<p>ç‚¹å‡»ä»»ä½•æ–‡ä»¶è¯ä¸¸æŸ¥çœ‹å½“å‰çŠ¶æ€ã€‚å±•å¼€å­ä»»åŠ¡æŸ¥çœ‹ä»£ç†åšäº†ä»€ä¹ˆã€‚</p>
</blockquote>
<p>ä»£ç†ç³»ç»Ÿåœ°å¤„ç†è¿™äº›ä»»åŠ¡ç»„ã€‚</p>
<p>æ¯ä¸ªéƒ¨åˆ†éƒ½å»ºç«‹åœ¨å‰ä¸€ä¸ªéƒ¨åˆ†çš„åŸºç¡€ä¸Šã€‚ä»£ç†åœ¨æ•´ä¸ªæ„å»ºè¿‡ç¨‹ä¸­ä¿æŒä¸Šä¸‹æ–‡ã€‚</p>
<h2 data-id="heading-6">å¿«é€Ÿæ¨¡å¼</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87181e96b3ee41df8d57bbceb6b01f68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=DKUo7hD63C%2Fh9NluSmXl3Jiek%2FI%3D" alt="" loading="lazy"/></p>
<p>æœ‰æ—¶å€™ä½ ä¸éœ€è¦è§„åˆ’ã€‚ä½ éœ€è¦è¡ŒåŠ¨ã€‚</p>
<blockquote>
<p>é‡å‘½å 20 ä¸ªæ–‡ä»¶ä¸­çš„å˜é‡ã€‚ä¸ºç°æœ‰å‡½æ•°æ·»åŠ é”™è¯¯å¤„ç†ã€‚æ›´æ–°ä¾èµ–é¡¹ã€‚</p>
</blockquote>
<p>å¿«é€Ÿæ¨¡å¼è·³è¿‡è§„åˆ’é˜¶æ®µï¼Œä»£ç†ç›´æ¥æ‰§è¡Œã€‚</p>
<p>å¯¹äºç®€å•çš„ã€æœ¬åœ°åŒ–çš„ä»»åŠ¡ï¼Œè¿™æ˜¯å®Œç¾çš„ã€‚ä»£ç†åœ¨å‡ ç§’å†…å“åº”ï¼Œè¿›è¡Œæ›´æ”¹ï¼Œç„¶åä½ ç»§ç»­ã€‚</p>
<h2 data-id="heading-7">äº§ç‰©å®¡æŸ¥ç­–ç•¥</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/863a9ae27f244e47ae0aec134dfa46c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=%2FFDXZUJPcE32vrOy7fy35%2F5Olg4%3D" alt="" loading="lazy"/></p>
<p>Antigravity è®©ä½ æ§åˆ¶ä»£ç†è¯·æ±‚è®¸å¯çš„ç¨‹åº¦ã€‚</p>
<p>ä¸‰ä¸ªé€‰é¡¹ï¼š</p>
<ul>
<li><strong>å§‹ç»ˆç»§ç»­</strong> - ä»£ç†ä»ä¸è¯·æ±‚å®¡æŸ¥ã€‚å®Œå…¨è‡ªä¸»æ‰§è¡Œã€‚</li>
<li><strong>ä»£ç†å†³å®š</strong> - ä»£ç†ç¡®å®šä½•æ—¶éœ€è¦å®¡æŸ¥ã€‚æ··åˆæ–¹æ³•ã€‚</li>
<li><strong>è¯·æ±‚å®¡æŸ¥</strong> - ä»£ç†åœ¨ç»§ç»­ä¹‹å‰æ€»æ˜¯åœæ­¢å¹¶ç­‰å¾…æ‰¹å‡†ã€‚</li>
</ul>
<p>åœ¨è®¾ç½®ä¸­è®¾ç½®ä¸€æ¬¡ã€‚é€‚ç”¨äºæ‰€æœ‰æœªæ¥çš„å¯¹è¯ã€‚</p>
<p>æˆ‘ä½¿ç”¨ä»£ç†å†³å®šã€‚å¯¹äºç®€å•æ›´æ”¹ï¼Œä»£ç†ç»§ç»­ã€‚å¯¹äºæ¶æ„å†³ç­–ï¼Œå®ƒä¼šè¯¢é—®ã€‚</p>
<h2 data-id="heading-8">å®é™…ç¤ºä¾‹</h2>
<p>æˆ‘è¦æ±‚ Antigravity ç”¨ Node.js åç«¯å’Œ React å‰ç«¯æ„å»ºä¸€ä¸ªä»»åŠ¡ç®¡ç†åº”ç”¨ç¨‹åºã€‚</p>
<p>è§„åˆ’æ¨¡å¼å¯åŠ¨äº†ã€‚ä»£ç†åˆ›å»ºäº†ä¸€ä¸ªæ˜¾ç¤ºä»¥ä¸‹å†…å®¹çš„è®¡åˆ’ï¼š</p>
<ul>
<li>Express æœåŠ¡å™¨è®¾ç½®</li>
<li>MongoDB æ¨¡å¼è®¾è®¡</li>
<li>JWT èº«ä»½éªŒè¯æµç¨‹</li>
<li>REST API ç«¯ç‚¹</li>
<li>React ç»„ä»¶ç»“æ„</li>
<li>çŠ¶æ€ç®¡ç†æ–¹æ³•</li>
</ul>
<p>æˆ‘å®¡æŸ¥äº†è®¡åˆ’ã€‚æ·»åŠ äº†ä¸€æ¡è¯„è®ºï¼š"ç”¨ PostgreSQL æ›¿ä»£ MongoDBã€‚"</p>
<blockquote>
<p><strong>ä»£ç†è°ƒæ•´äº†æ•´ä¸ªè®¡åˆ’ã€‚æ›´æ–°äº†æ¨¡å¼ã€‚æ›´æ”¹äº†æ•°æ®åº“é©±åŠ¨ç¨‹åºã€‚ä¿®æ”¹äº†è¿æ¥é€»è¾‘ã€‚</strong></p>
</blockquote>
<p>ç„¶åå®ƒé—®ï¼š"å‡†å¤‡ç»§ç»­å—ï¼Ÿ"</p>
<p>æˆ‘æ‰¹å‡†äº†ã€‚å®ƒåœ¨ä»»åŠ¡ç»„ä¸­æ„å»ºäº†æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚é¦–å…ˆæ˜¯åç«¯ã€‚å…¶æ¬¡æ˜¯å‰ç«¯ã€‚ç¬¬ä¸‰æ˜¯èº«ä»½éªŒè¯ã€‚</p>
<p>æ¯ä¸ªä»»åŠ¡ç»„éƒ½æ˜¾ç¤ºæ­£åœ¨æ›´æ”¹çš„å†…å®¹å’ŒåŸå› ã€‚</p>
<blockquote>
<p>å½“å®Œæˆæ—¶ï¼Œæˆ‘æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ã€å·¥ä½œä¸­çš„åº”ç”¨ç¨‹åºï¼Œå…·æœ‰æ¸…æ™°çš„æ¶æ„å’Œé€‚å½“çš„å…³æ³¨ç‚¹åˆ†ç¦»ã€‚</p>
</blockquote>
<h2 data-id="heading-9">æµè§ˆå™¨å­ä»£ç†</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa0f4eb9565e410aa592af6b52034e18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=Dctvc3gQU9UjjC8mUDMITK6BYAk%3D" alt="" loading="lazy"/></p>
<p>Cursor 2.0 æ·»åŠ äº†æµè§ˆå™¨æ§ä»¶ã€‚ä»£ç†å¯ä»¥ä¸æµè§ˆå™¨äº¤äº’ï¼Œæµ‹è¯• UI æ›´æ”¹å’Œè°ƒè¯•é—®é¢˜ã€‚</p>
<blockquote>
<p><strong>Antigravity é‡‡ç”¨äº†è¿™ä¸ªæ¦‚å¿µå¹¶æ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„è‡ªä¸»æµ‹è¯•ç³»ç»Ÿã€‚</strong></p>
</blockquote>
<p>Antigravity çš„æµè§ˆå™¨å­ä»£ç†ç‹¬ç«‹å·¥ä½œã€‚</p>
<p>æµè§ˆå™¨å­ä»£ç†å¯ä»¥ï¼š</p>
<ul>
<li>å¯¼èˆªåˆ°ä»»ä½• URL</li>
<li>ç‚¹å‡»å…ƒç´ </li>
<li>å¡«å†™è¡¨å•</li>
<li>æ»šåŠ¨é¡µé¢</li>
<li>è¯»å– DOM ä¿¡æ¯</li>
<li>æˆªå–å±å¹•æˆªå›¾</li>
<li>å½•åˆ¶å…¶æ“ä½œè§†é¢‘</li>
</ul>
<h3 data-id="heading-10">å•ç‹¬çš„ Chrome é…ç½®æ–‡ä»¶</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6722ead5550d4e018b2377f2f6cfca83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=N%2BQQwamUJSri1kT%2FsNDOUBv9L6c%3D" alt="" loading="lazy"/></p>
<p>Antigravity åœ¨å•ç‹¬çš„ Chrome é…ç½®æ–‡ä»¶ä¸­è¿è¡Œã€‚</p>
<blockquote>
<p><strong>ä½ çš„ä¸ªäººæµè§ˆä¿æŒåˆ†ç¦»ã€‚ä½ çš„ cookieã€ç™»å½•ã€å†å²è®°å½•â€”â€”å…¨éƒ¨éš”ç¦»ã€‚</strong></p>
</blockquote>
<p>Antigravity é…ç½®æ–‡ä»¶æ˜¯å®ƒè‡ªå·±çš„ç¯å¢ƒã€‚ç™»å½•ä¸€æ¬¡ï¼Œè¿™äº›è´¦æˆ·åœ¨æœªæ¥çš„ä»£ç†ä¼šè¯ä¸­æŒç»­å­˜åœ¨ã€‚</p>
<blockquote>
<p><strong>å¦‚æœ Chrome å·²ç»æ‰“å¼€ï¼ŒAntigravity æµè§ˆå™¨æ˜¾ç¤ºä¸ºå•ç‹¬çš„åœé å›¾æ ‡ã€‚é€€å‡ºå®ƒè¿”å›åˆ°ä½ çš„æ­£å¸¸ Chromeã€‚</strong></p>
</blockquote>
<p>ä½ å¯ä»¥åœ¨è®¾ç½®ä¸­é…ç½®æ­¤é…ç½®æ–‡ä»¶çš„å­˜å‚¨ä½ç½®ã€‚</p>
<h3 data-id="heading-11">Chrome æ‰©å±•</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fcd43235bd64e3f97ba218a94346d30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=sj4qJFUXirhX58Bt%2BUrGKReCix4%3D" alt="" loading="lazy"/></p>
<p>ç¬¬ä¸€æ¬¡ä½¿ç”¨æµè§ˆå™¨ä»£ç†æ—¶ï¼ŒAntigravity ä¼šå¼•å¯¼ä½ åˆ° Chrome ç½‘ä¸Šåº”ç”¨åº—å®‰è£… Antigravity æµè§ˆå™¨æ‰©å±•ã€‚</p>
<blockquote>
<p><strong>è¿™ä¸ªæ‰©å±•æ˜¯å¿…éœ€çš„ã€‚è¿™æ˜¯ä»£ç†æŸ¥çœ‹å’Œä¸ç½‘ç«™äº¤äº’çš„æ–¹å¼ã€‚</strong></p>
</blockquote>
<p>æ‰©å±•è¿˜è®©ä½ å¯ä»¥ï¼š</p>
<ul>
<li>ä»æµè§ˆå™¨å–æ¶ˆå½“å‰å¯¹è¯</li>
<li>å°†ç„¦ç‚¹åˆ‡æ¢å› Antigravity</li>
<li>ä¸æµè§ˆå™¨ä»£ç†å¹¶è¡Œå·¥ä½œ</li>
</ul>
<h3 data-id="heading-12">å®‰å…¨ï¼šæ‹’ç»åˆ—è¡¨å’Œå…è®¸åˆ—è¡¨</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bce6206f7f14cfd9e81e8fd0383e6fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=BIDVxSmcXpEkxCjwzvWjkf0spJc%3D" alt="" loading="lazy"/></p>
<p>æµè§ˆå™¨ä½¿ç”¨ä¸¤å±‚å®‰å…¨ç³»ç»Ÿã€‚</p>
<ul>
<li><strong>æ‹’ç»åˆ—è¡¨</strong> - ç”± Google çš„ BadUrlsChecker æœåŠ¡ç»´æŠ¤ã€‚é˜»æ­¢å±é™©å’Œæ¶æ„çš„ URL æœåŠ¡å™¨ç«¯ã€‚å¦‚æœæœåŠ¡å™¨ä¸å¯ç”¨ï¼Œé»˜è®¤æ‹’ç»è®¿é—®ã€‚å®‰å…¨ç¬¬ä¸€ã€‚</li>
<li><strong>å…è®¸åˆ—è¡¨</strong> - ä½ æ§åˆ¶çš„æœ¬åœ°æ–‡æœ¬æ–‡ä»¶ã€‚æ˜ç¡®ä¿¡ä»»ç‰¹å®šçš„ URLã€‚</li>
</ul>
<blockquote>
<p><strong>åœ¨å¼•å¯¼è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥ç”¨é»˜è®¤ URL é¢„å¡«å……å…è®¸åˆ—è¡¨ã€‚</strong></p>
</blockquote>
<p>å½“æµè§ˆå™¨å°è¯•è®¿é—®éå…è®¸åˆ—è¡¨ URL æ—¶ï¼Œä½ ä¼šæ”¶åˆ°æç¤ºï¼š"æ€»æ˜¯å…è®¸è¿™ä¸ª URL å—ï¼Ÿ"</p>
<p>URL è¢«æ·»åŠ åˆ°ä½ çš„å…è®¸åˆ—è¡¨ã€‚æµè§ˆå™¨ç°åœ¨å¯ä»¥è‡ªç”±è®¿é—®å®ƒã€‚</p>
<blockquote>
<p><strong>ä½ å¯ä»¥éšæ—¶æ‰‹åŠ¨ç¼–è¾‘å…è®¸åˆ—è¡¨ã€‚ä½†æ‹’ç»åˆ—è¡¨æ€»æ˜¯ä¼˜å…ˆã€‚ä½ ä¸èƒ½å°†æ‹’ç»åˆ—è¡¨çš„ URL åŠ å…¥å…è®¸åˆ—è¡¨ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-13">å®é™…æµ‹è¯•æµç¨‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/937614fba3b345bf87b8bf967d4824df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=nwL54VLpqkeRl4FBNNIV0Ii8USg%3D" alt="" loading="lazy"/></p>
<p>æˆ‘è¦æ±‚ Antigravity æ„å»ºä¸€ä¸ªç”¨æˆ·æ³¨å†Œç³»ç»Ÿå¹¶æµ‹è¯•å®ƒã€‚</p>
<p>ä»£ç†æ„å»ºäº†åç«¯ã€‚åˆ›å»ºäº†å‰ç«¯è¡¨å•ã€‚è®¾ç½®äº†éªŒè¯ã€‚</p>
<p>ç„¶åæˆ‘è¯´ï¼Œ"åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•æ³¨å†Œæµç¨‹ã€‚"</p>
<p>æµè§ˆå™¨å­ä»£ç†å¯åŠ¨äº†ã€‚å¯¼èˆªåˆ° localhostã€‚æ‰¾åˆ°äº†æ³¨å†Œè¡¨å•ã€‚</p>
<p>å¡«å†™æµ‹è¯•æ•°æ®ï¼š</p>
<ul>
<li>é‚®ç®±ï¼š<a href="https://link.juejin.cn?target=mailto%3Atest%40example.com" target="_blank" title="mailto:test@example.com" ref="nofollow noopener noreferrer">test@example.com</a></li>
<li>å¯†ç ï¼šSecurePass123!</li>
<li>ç¡®è®¤å¯†ç ï¼šSecurePass123!</li>
</ul>
<p>ç‚¹å‡»æäº¤ã€‚è§‚å¯Ÿç½‘ç»œè¯·æ±‚ã€‚éªŒè¯æˆåŠŸæ¶ˆæ¯å‡ºç°ã€‚</p>
<p>ç„¶åå®ƒæµ‹è¯•äº†è¾¹ç¼˜æƒ…å†µï¼š</p>
<ul>
<li>å¯†ç ä¸åŒ¹é…</li>
<li>æ— æ•ˆé‚®ç®±æ ¼å¼</li>
<li>é‡å¤é‚®ç®±æ³¨å†Œ</li>
<li>ç©ºå­—æ®µ</li>
</ul>
<p>å¯¹äºæ¯ä¸ªæµ‹è¯•ï¼Œå®ƒè®°å½•äº†æ˜¾ç¤ºéªŒè¯é”™è¯¯çš„å±å¹•æˆªå›¾ã€‚</p>
<blockquote>
<p><strong>å®ƒå‘ç°äº†ä¸€ä¸ªé”™è¯¯ï¼šé‡å¤é‚®ç®±æ£€æŸ¥ä¸èµ·ä½œç”¨ã€‚æ•°æ®åº“çº¦æŸå­˜åœ¨ï¼Œä½†é”™è¯¯æ¶ˆæ¯æ²¡æœ‰æ­£ç¡®æ˜¾ç¤ºã€‚</strong></p>
</blockquote>
<p>ä»£ç†ç«‹å³è·³å›ä»£ç ã€‚ä¿®å¤äº†é”™è¯¯å¤„ç†ã€‚éƒ¨ç½²äº†ä¿®å¤å¹¶å†æ¬¡æµ‹è¯•ã€‚è¿™æ¬¡ï¼Œä¸€åˆ‡éƒ½å·¥ä½œäº†ã€‚</p>
<h2 data-id="heading-14">è§†é¢‘å½•åˆ¶ä½œä¸ºäº§ç‰©</h2>
<p><img src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*4-UknaGNUO16b83IktUD-Q.gif" alt="" loading="lazy"/></p>
<p>æµè§ˆå™¨å­ä»£ç†ä¸ä»…æµ‹è¯•ï¼›å®ƒè¿˜æä¾›åé¦ˆã€‚å®ƒè®°å½•æ–‡æ¡£ã€‚</p>
<p>è¿è¡Œæµ‹è¯•åï¼Œå®ƒåˆ›å»ºäº§ç‰©ï¼š</p>
<ul>
<li>å…³é”®æ—¶åˆ»çš„å±å¹•æˆªå›¾</li>
<li>æµ‹è¯•æµç¨‹çš„è§†é¢‘å½•åˆ¶</li>
<li>æµ‹è¯•ç»“æœæ‘˜è¦</li>
<li>å¸¦æœ‰é‡ç°æ­¥éª¤çš„é”™è¯¯æŠ¥å‘Š</li>
</ul>
<blockquote>
<p><strong>ä½ è·å¾—äº†æµ‹è¯•å†…å®¹å’Œå‘ç°å†…å®¹çš„å®Œæ•´å®¡è®¡è·Ÿè¸ªã€‚</strong></p>
</blockquote>
<h2 data-id="heading-15">ä»£ç†ç®¡ç†å™¨</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88c3c9502a6b48db8560642684d3321d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=MnbP6Qv1pW%2Fnj%2B%2B1Lx9nUinmzpk%3D" alt="" loading="lazy"/></p>
<p>Antigravity å°†ä½ çš„ç¯å¢ƒåˆ†ä¸ºä¸¤ä¸ªä¸åŒçš„ç•Œé¢ã€‚</p>
<ul>
<li><strong>ç¼–è¾‘å™¨</strong> - ä¼ ç»Ÿç¼–ç¨‹ç¯å¢ƒã€‚ç±»ä¼¼ VS Codeã€‚è¯­æ³•é«˜äº®ã€‚æ‰©å±•ã€‚æ–‡ä»¶æµè§ˆã€‚</li>
<li><strong>ä»£ç†ç®¡ç†å™¨</strong> - ä»£ç†ç¼–æ’ä¸­å¿ƒã€‚å¤šä¸ªå¯¹è¯ã€‚å·¥ä½œåŒºç®¡ç†ã€‚å®¡æŸ¥å·¥å…·ã€‚</li>
</ul>
<blockquote>
<p>ç”¨ Cmd+E æˆ– Ctrl+E åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚</p>
</blockquote>
<p>Antigravity çš„ä»£ç†å¯ä»¥åŒæ—¶åœ¨å®Œå…¨ä¸åŒçš„é—®é¢˜ä¸Šå·¥ä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad8f9a3d3f0e405f9fe3ec57164e1fed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=xqZfGUWGibYJDvjlRNdvBqpTOO4%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>ä»£ç† 1ï¼šæ„å»ºèº«ä»½éªŒè¯ç³»ç»Ÿ</strong></p>
<p><strong>ä»£ç† 2ï¼šè®¾ç½® CI/CD ç®¡é“</strong></p>
<p><strong>ä»£ç† 3ï¼šåˆ›å»º API æ–‡æ¡£</strong></p>
<p><strong>ä»£ç† 4ï¼šå®æ–½åˆ†æè·Ÿè¸ª</strong></p>
</blockquote>
<p>æ¯ä¸ªéƒ½åœ¨è‡ªå·±çš„å¯¹è¯å’Œä¸Šä¸‹æ–‡ä¸­ï¼Œæœç€è‡ªå·±çš„ç›®æ ‡å·¥ä½œã€‚</p>
<blockquote>
<p><strong>å®ƒä»¬éƒ½å¯ä»¥è®¿é—®åŒä¸€ä¸ªå·¥ä½œåŒºå¹¶å¯ä»¥åè°ƒæ›´æ”¹ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-16">å·¥ä½œåŒºç®¡ç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e406bf90710143d7847a9628ec4cf19b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=dfscQxjlmsn7tCqH1WQNiepCKZU%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä»£ç†ç®¡ç†å™¨ä¸­ï¼Œä½ åˆ›å»ºå’Œç®¡ç†å·¥ä½œåŒºã€‚</p>
<p>æ¯ä¸ªå·¥ä½œåŒºæ˜¯ä½ ç³»ç»Ÿä¸Šçš„ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚æ¯ä¸ªéƒ½å¯ä»¥æœ‰å¤šä¸ªæ´»åŠ¨çš„ä»£ç†å¯¹è¯ã€‚</p>
<p>ä½¿ç”¨"æ‰“å¼€ç¼–è¾‘å™¨"æŒ‰é’®æ‰“å¼€ç‰¹å®šæ–‡ä»¶æˆ–éƒ¨åˆ†ã€‚</p>
<p>ä»£ç†ç®¡ç†å™¨æ˜¾ç¤ºæ‰€æœ‰å·¥ä½œåŒºä¸­å‘ç”Ÿçš„ä¸€åˆ‡ï¼š</p>
<ul>
<li>æ´»åŠ¨å¯¹è¯</li>
<li>æœ€è¿‘æ–‡ä»¶æ›´æ”¹</li>
<li>å¾…å¤„ç†æ“ä½œ</li>
<li>åˆ›å»ºçš„äº§ç‰©</li>
</ul>
<h3 data-id="heading-17">å®¡æŸ¥æ›´æ”¹çª—æ ¼</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3033059962b14f7baaf7df8d3841f995~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=FcriY04J58IRvnh8zQt8YWTSpL0%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»ä»»ä½•å¯¹è¯å³ä¸Šè§’çš„"å®¡æŸ¥æ›´æ”¹"ã€‚</p>
<blockquote>
<p><strong>ä½ è·å¾—ä¸€ä¸ªç»Ÿä¸€å·®å¼‚è§†å›¾ï¼Œæ˜¾ç¤ºåœ¨è¯¥å¯¹è¯æœŸé—´æ‰€åšçš„æ‰€æœ‰æ›´æ”¹ã€‚</strong></p>
</blockquote>
<p>æ»šåŠ¨æµè§ˆæ›´æ”¹ã€‚åœ¨ç‰¹å®šè¡Œä¸Šç•™ä¸‹è¯„è®ºã€‚è¦æ±‚ä»£ç†ä¿®æ”¹æŸäº›éƒ¨åˆ†ã€‚</p>
<p>å®¡æŸ¥æ›´æ”¹çª—æ ¼è¿˜æœ‰ä¸€ä¸ªæºä»£ç ç®¡ç†é€‰é¡¹å¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5626d2609bb242a8b0083566e8707661~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=cWdLRgtSCbZ2rUr6%2BnuwnjX7dmI%3D" alt="" loading="lazy"/></p>
<p>åœ¨è¿™é‡Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>æŸ¥çœ‹æ‰€æœ‰æ›´æ”¹çš„æ–‡ä»¶</li>
<li>æš‚å­˜æˆ–å–æ¶ˆæš‚å­˜æ›´æ”¹</li>
<li>æäº¤å‰å®¡æŸ¥å·®å¼‚</li>
<li>ç¼–å†™æäº¤æ¶ˆæ¯</li>
<li>æ¨é€åˆ°è¿œç¨‹</li>
</ul>
<blockquote>
<p><strong>å®Œæ•´çš„ Git é›†æˆï¼Œæ— éœ€ç¦»å¼€ä»£ç†ç®¡ç†å™¨ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-18">æ›´æ”¹ä¾§è¾¹æ </h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5436f36017d4b75969bc6ea56ae61ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=SqPTNTWdOWClym7rVKI4NKmHv8I%3D" alt="" loading="lazy"/></p>
<p>æ›´æ”¹ä¾§è¾¹æ ç»™ä½ ä¸€ä¸ªå¿«é€Ÿæ¦‚è§ˆï¼š</p>
<ul>
<li>åˆ›å»ºçš„äº§ç‰©</li>
<li>ä¿®æ”¹çš„æ–‡ä»¶</li>
<li>è‡ªä¸Šæ¬¡å®¡æŸ¥ä»¥æ¥çš„æ–°æ›´æ”¹</li>
</ul>
<p>ç‚¹å‡»ä»»ä½•èµ„æºåœ¨çª—æ ¼ä¸­æ‰“å¼€å…¶å†…å®¹ã€‚</p>
<blockquote>
<p><strong>ä½ æ€»æ˜¯çŸ¥é“ä»£ç†ä¸€ç›´åœ¨å¤„ç†ä»€ä¹ˆä»¥åŠä»€ä¹ˆéœ€è¦ä½ çš„æ³¨æ„ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-19">ç»ˆç«¯é›†æˆ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c220f5185d704709835c27070291649e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649412&amp;x-signature=ZrRsrRsvjpH5HeWL0pUR0pjyMDA%3D" alt="" loading="lazy"/></p>
<p>æŒ‰ Cmd+J æˆ– Ctrl+J åœ¨ä»£ç†ç®¡ç†å™¨åº•éƒ¨æ‰“å¼€ç»ˆç«¯ã€‚</p>
<p>ç»ˆç«¯é™„åŠ åˆ°å·¥ä½œåŒºâ€”â€”å¤šä¸ªç»ˆç«¯ä¼šè¯ã€‚åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚</p>
<blockquote>
<p><strong>ä»£ç†å¯ä»¥ç”Ÿæˆå’Œæ‰§è¡Œç»ˆç«¯å‘½ä»¤ã€‚ä½ çš„è®¾ç½®å†³å®šå®ƒä»¬æ˜¯è‡ªåŠ¨æ‰§è¡Œè¿˜æ˜¯è¯·æ±‚æ‰¹å‡†ã€‚</strong></p>
</blockquote>
<p>ä»£ç†å¯ä»¥è¯»å–å®ƒå¹¶å¯¹é”™è¯¯æˆ–æˆåŠŸæ¶ˆæ¯åšå‡ºååº”ã€‚ä»£ç†ä½¿ç”¨çš„ç»ˆç«¯åœ¨ç¼–è¾‘å™¨çª—å£å†…è¿è¡Œã€‚</p>
<h2 data-id="heading-20">æˆ‘å‘ç°çš„é—®é¢˜</h2>
<p><img src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*ajEuRJxZgM97XBW7_nx7eQ.png" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/></p>
<p>è™½ç„¶ Antigravity æ˜¾ç¤ºäº†ä»¤äººå°è±¡æ·±åˆ»çš„æ½œåŠ›ï¼Œä½†æˆ‘çš„æµ‹è¯•æ­ç¤ºäº†ä¸€äº›ä½ å¯èƒ½é‡åˆ°çš„ä»¤äººæ²®ä¸§çš„é—®é¢˜ã€‚</p>
<ul>
<li><strong>Chrome æ‰©å±•è®¾ç½®é—®é¢˜</strong></li>
</ul>
<p>åœ¨ç¬¬ä¸€æ¬¡å°è¯•ä¸­è®¾ç½® Chrome æ‰©å±•è¯æ˜æœ‰é—®é¢˜ã€‚</p>
<p>æŒä¹…æµè§ˆå™¨ä¼šè¯åŠŸèƒ½ï¼Œæœ¬åº”åœ¨ä»£ç†ä¼šè¯ä¹‹é—´ä¿æŒä½ çš„ç™»å½•çŠ¶æ€ï¼Œç»å¸¸ä¸­æ–­ã€‚</p>
<blockquote>
<p><strong>æˆ‘ä¸å¾—ä¸å¤šæ¬¡é‡æ–°å®‰è£…æ‰©å±•ï¼Œç„¶åå®ƒæ‰èƒ½ä¸€è‡´åœ°å·¥ä½œã€‚</strong></p>
</blockquote>
<h3 data-id="heading-21">2. æ€§èƒ½å’Œå†…å­˜é—®é¢˜</h3>
<p>Antigravity æ¯” Cursor æ›´é¢‘ç¹åœ°å†»ç»“å¹¶æ¶ˆè€—æ›´å¤šå†…å­˜ã€‚</p>
<p>åœ¨å¤æ‚æ“ä½œæœŸé—´ï¼Œç‰¹åˆ«æ˜¯å½“æµè§ˆå™¨å­ä»£ç†æ´»åŠ¨æ—¶ï¼Œæˆ‘çš„ç³»ç»Ÿèµ„æºæ¿€å¢ã€‚</p>
<blockquote>
<p><strong>Cursor å¤„ç†ç±»ä¼¼å·¥ä½œè´Ÿè½½è¦å¥½å¾—å¤šã€‚</strong></p>
</blockquote>
<h3 data-id="heading-22">3. æ¨¡å‹é…é¢é™åˆ¶</h3>
<p>æ¨¡å‹é…é¢ç”¨å¾—éå¸¸å¿«ã€‚ä¸ Cursor çš„å…è´¹å±‚çº§ä¸åŒï¼Œåè€…å¯ä»¥åœ¨ä¸è¾¾åˆ°é™åˆ¶çš„æƒ…å†µä¸‹æ„å»ºå®Œæ•´åº”ç”¨ç¨‹åºï¼ŒAntigravity çš„å…è´¹å±‚çº§å¾ˆå¿«å°±ä¼šç”¨å®Œã€‚</p>
<blockquote>
<p><strong>ä½ ä¼šç»å¸¸é‡åˆ°"é‡åˆ°æ¥è‡ªæ¨¡å‹æä¾›ç¨‹åºçš„å¯é‡è¯•é”™è¯¯"æ¶ˆæ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¾—åˆ°"æ¨¡å‹äº§ç”Ÿç©ºå“åº”"é”™è¯¯ã€‚</strong></p>
</blockquote>
<p>æˆ‘æ‰¾åˆ°äº†è§£å†³æ–¹æ³•ï¼š<strong>ä¸æ–­åœ¨æ¨¡å‹ä¹‹é—´åˆ‡æ¢ã€‚</strong></p>
<blockquote>
<p><strong>å½“ä¸€ä¸ªé…é¢ç”¨å®Œæ—¶ï¼Œä½ éœ€è¦ä»ä¸‹æ‹‰åˆ—è¡¨ä¸­åˆ‡æ¢åˆ°å¦ä¸€ä¸ªæ¨¡å‹â€”â€”åœ¨ Gemini 3 Pro (é«˜)ã€Gemini 3 Pro (ä½)ã€Claude Sonnet 4.5 æˆ– GPT-OSS æ¨¡å‹ä¹‹é—´å¾ªç¯ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-23">æœ€ç»ˆæ€è€ƒ</h2>
<p>Cursor ä¸€ç›´æ˜¯å¯»æ±‚é€Ÿåº¦çš„å¼€å‘è€…çš„é¦–é€‰ AI IDEï¼Œä½†ç°åœ¨ Antigravity ä»¥ç±»ä¼¼çš„åŠŸèƒ½è¿›å…¥åœºæ™¯ï¼Œå…¶æµè§ˆå™¨å­ä»£ç†åŠŸèƒ½æ›´å¥½ã€‚</p>
<blockquote>
<p><strong>è®©è¿™å˜å¾—å¼ºå¤§çš„æ˜¯å®Œæ•´çš„æµ‹è¯•å¾ªç¯â€”â€”ä½ çš„ AI ä»£ç†ç¼–å†™ä»£ç ï¼Œå¯åŠ¨ Chrome å®ä¾‹ï¼Œæµè§ˆä½ çš„åº”ç”¨ç¨‹åºï¼Œæµ‹è¯•ç”¨æˆ·æµç¨‹ï¼Œæ•è·é”™è¯¯ï¼Œå¹¶è¿­ä»£ä¿®å¤ã€‚</strong></p>
</blockquote>
<p>æ‰€æœ‰è¿™ä¸€åˆ‡è‡ªä¸»å‘ç”Ÿï¼ŒåŒæ—¶ç”Ÿæˆæµ‹è¯•è¿è¡Œçš„è§†é¢‘æ–‡æ¡£ã€‚ä½ ç°åœ¨å¯ä»¥ä¸“æ³¨äºæ¶æ„å’Œä¸šåŠ¡é€»è¾‘ï¼Œè€Œä»£ç†å¤„ç†å®æ–½å’Œ QA å‘¨æœŸã€‚</p>
<p>é€šè¿‡å¤šæ¨¡å‹æ”¯æŒå°† Gemini 3 Proã€Claude Sonnet 4.5 å’Œ GPT æ¨¡å‹å¼•å…¥ä¸€ä¸ªç¼–è¾‘å™¨ï¼ŒAntigravity æ­£åœ¨é‡æ–°å®šä¹‰ AI ç¼–ç¨‹ï¼Œä½†è®©æˆ‘ä»¬ç­‰å¾…ä»·æ ¼ï¼Œå› ä¸ºå®ƒè¿˜åœ¨é¢„è§ˆé˜¶æ®µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ168ï¼‰ å¦‚ä½•ä½¿ç”¨Rediså®ç°ä¼šè¯ç®¡ç†ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7580285196693766144</link>    <guid>https://juejin.cn/post/7580285196693766144</guid>    <pubDate>2025-12-06T23:05:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580285196693766144" data-draft-id="7580295137395605519" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ168ï¼‰ å¦‚ä½•ä½¿ç”¨Rediså®ç°ä¼šè¯ç®¡ç†ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-06T23:05:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ168ï¼‰ å¦‚ä½•ä½¿ç”¨Rediså®ç°ä¼šè¯ç®¡ç†ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T23:05:14.000Z" title="Sat Dec 06 2025 23:05:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½¿ç”¨Rediså®ç°ä¼šè¯ç®¡ç†æ˜¯ä¸€ç§å¸¸è§ä¸”æœ‰æ•ˆçš„æ–¹æ³•ï¼Œç‰¹åˆ«é€‚åˆäºåˆ†å¸ƒå¼ç³»ç»Ÿå’Œé«˜å¹¶å‘åœºæ™¯ã€‚Redisçš„é«˜æ€§èƒ½ã€æŒä¹…åŒ–å’Œä¸°å¯Œçš„æ•°æ®ç»“æ„ä½¿å…¶æˆä¸ºä¼šè¯ç®¡ç†çš„ç†æƒ³é€‰æ‹©ã€‚ä¸‹é¢å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨Rediså®ç°ä¼šè¯ç®¡ç†ï¼ŒåŒ…æ‹¬ä¼šè¯çš„åˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤ï¼Œå¹¶ç»“åˆä»£ç ç¤ºä¾‹è¿›è¡Œè®²è§£ã€‚</p>
<h3 data-id="heading-0">1. ä¼šè¯ç®¡ç†çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p>ä¼šè¯ç®¡ç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>ä¼šè¯åˆ›å»º</strong>ï¼šç”¨æˆ·ç™»å½•åï¼Œåˆ›å»ºä¸€ä¸ªä¼šè¯ï¼Œå¹¶å­˜å‚¨ç”¨æˆ·ç›¸å…³ä¿¡æ¯ã€‚</li>
<li><strong>ä¼šè¯è¯»å–</strong>ï¼šåœ¨ç”¨æˆ·è¿›è¡Œåç»­æ“ä½œæ—¶ï¼Œä»ä¼šè¯ä¸­è¯»å–ç”¨æˆ·ä¿¡æ¯ã€‚</li>
<li><strong>ä¼šè¯æ›´æ–°</strong>ï¼šåœ¨ç”¨æˆ·æ“ä½œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½éœ€è¦æ›´æ–°ä¼šè¯ä¿¡æ¯ã€‚</li>
<li><strong>ä¼šè¯åˆ é™¤</strong>ï¼šç”¨æˆ·ç™»å‡ºæˆ–ä¼šè¯è¿‡æœŸæ—¶ï¼Œåˆ é™¤ä¼šè¯ä¿¡æ¯ã€‚</li>
</ol>
<h3 data-id="heading-1">2. ä½¿ç”¨Rediså®ç°ä¼šè¯ç®¡ç†</h3>
<h4 data-id="heading-2">2.1 å¼•å…¥ä¾èµ–</h4>
<p>åœ¨Javaé¡¹ç›®ä¸­ä½¿ç”¨Jedisåº“ä¸Redisè¿›è¡Œäº¤äº’ã€‚åœ¨Mavené¡¹ç›®ä¸­æ·»åŠ Jedisä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">2.2 ä¼šè¯ç®¡ç†åŸºæœ¬æ“ä½œ</h4>
<h5 data-id="heading-4">ç¤ºä¾‹ï¼šä¼šè¯ç®¡ç†ç±»</h5>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªç®€å•çš„ä¼šè¯ç®¡ç†ç±»ï¼Œå¹¶å®ç°ä¼šè¯çš„åˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">import</span> java.util.UUID;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisSessionManager</span> {

    <span class="hljs-keyword">private</span> Jedis jedis;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SESSION_TIMEOUT</span> <span class="hljs-operator">=</span> <span class="hljs-number">1800</span>; <span class="hljs-comment">// ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisSessionManager</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è¿æ¥åˆ°æœ¬åœ°çš„RedisæœåŠ¡</span>
        <span class="hljs-built_in">this</span>.jedis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>);
    }

    <span class="hljs-comment">// åˆ›å»ºä¼šè¯</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">createSession</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionId</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
        jedis.hset(sessionKey, <span class="hljs-string">"userId"</span>, userId);
        jedis.expire(sessionKey, SESSION_TIMEOUT); <span class="hljs-comment">// è®¾ç½®ä¼šè¯è¶…æ—¶æ—¶é—´</span>
        <span class="hljs-keyword">return</span> sessionId;
    }

    <span class="hljs-comment">// è·å–ä¼šè¯</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSession</span><span class="hljs-params">(String sessionId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
        <span class="hljs-keyword">if</span> (jedis.exists(sessionKey)) {
            jedis.expire(sessionKey, SESSION_TIMEOUT); <span class="hljs-comment">// é‡ç½®è¶…æ—¶æ—¶é—´</span>
            <span class="hljs-keyword">return</span> jedis.hget(sessionKey, <span class="hljs-string">"userId"</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// æ›´æ–°ä¼šè¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateSession</span><span class="hljs-params">(String sessionId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
        <span class="hljs-keyword">if</span> (jedis.exists(sessionKey)) {
            jedis.expire(sessionKey, SESSION_TIMEOUT); <span class="hljs-comment">// é‡ç½®è¶…æ—¶æ—¶é—´</span>
        }
    }

    <span class="hljs-comment">// åˆ é™¤ä¼šè¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteSession</span><span class="hljs-params">(String sessionId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
        jedis.del(sessionKey);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
        jedis.close();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">RedisSessionManager</span> <span class="hljs-variable">sessionManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisSessionManager</span>();

        <span class="hljs-comment">// åˆ›å»ºä¼šè¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionId</span> <span class="hljs-operator">=</span> sessionManager.createSession(<span class="hljs-string">"user1"</span>);
        System.out.println(<span class="hljs-string">"Session created: "</span> + sessionId);

        <span class="hljs-comment">// è·å–ä¼šè¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> sessionManager.getSession(sessionId);
        System.out.println(<span class="hljs-string">"User ID from session: "</span> + userId);

        <span class="hljs-comment">// æ›´æ–°ä¼šè¯</span>
        sessionManager.updateSession(sessionId);
        System.out.println(<span class="hljs-string">"Session updated"</span>);

        <span class="hljs-comment">// åˆ é™¤ä¼šè¯</span>
        sessionManager.deleteSession(sessionId);
        System.out.println(<span class="hljs-string">"Session deleted"</span>);

        sessionManager.close();
    }
}
</code></pre>
<h4 data-id="heading-5">2.3 å¤„ç†ä¼šè¯è¶…æ—¶</h4>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>expire</code>å‘½ä»¤è®¾ç½®äº†ä¼šè¯çš„è¶…æ—¶æ—¶é—´ï¼Œå¹¶åœ¨æ¯æ¬¡è¯»å–å’Œæ›´æ–°ä¼šè¯æ—¶é‡ç½®è¶…æ—¶æ—¶é—´ã€‚è¿™ç¡®ä¿äº†ä¼šè¯åœ¨ç”¨æˆ·æŒç»­æ´»åŠ¨æœŸé—´ä¸ä¼šè¿‡æœŸï¼Œä½†å¦‚æœç”¨æˆ·é•¿æ—¶é—´æœªæ´»åŠ¨ï¼Œä¼šè¯å°†è‡ªåŠ¨è¿‡æœŸã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSession</span><span class="hljs-params">(String sessionId)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
    <span class="hljs-keyword">if</span> (jedis.exists(sessionKey)) {
        jedis.expire(sessionKey, SESSION_TIMEOUT); <span class="hljs-comment">// é‡ç½®è¶…æ—¶æ—¶é—´</span>
        <span class="hljs-keyword">return</span> jedis.hget(sessionKey, <span class="hljs-string">"userId"</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<h4 data-id="heading-6">2.4 æ‰©å±•ä¼šè¯ä¿¡æ¯</h4>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦åœ¨ä¼šè¯ä¸­å­˜å‚¨æ›´å¤šä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·è§’è‰²ã€æƒé™ç­‰ã€‚å¯ä»¥ä½¿ç”¨Redisçš„Hashesæ¥å­˜å‚¨è¿™äº›ä¿¡æ¯ã€‚</p>
<h5 data-id="heading-7">ç¤ºä¾‹ï¼šæ‰©å±•ä¼šè¯ä¿¡æ¯</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> String <span class="hljs-title function_">createSession</span><span class="hljs-params">(String userId, String role)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sessionId</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
    <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
    jedis.hset(sessionKey, <span class="hljs-string">"userId"</span>, userId);
    jedis.hset(sessionKey, <span class="hljs-string">"role"</span>, role);
    jedis.expire(sessionKey, SESSION_TIMEOUT); <span class="hljs-comment">// è®¾ç½®ä¼šè¯è¶…æ—¶æ—¶é—´</span>
    <span class="hljs-keyword">return</span> sessionId;
}

<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUserRole</span><span class="hljs-params">(String sessionId)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
    <span class="hljs-keyword">if</span> (jedis.exists(sessionKey)) {
        jedis.expire(sessionKey, SESSION_TIMEOUT); <span class="hljs-comment">// é‡ç½®è¶…æ—¶æ—¶é—´</span>
        <span class="hljs-keyword">return</span> jedis.hget(sessionKey, <span class="hljs-string">"role"</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<h4 data-id="heading-8">2.5 ä½¿ç”¨Redisé›†ç¾¤å®ç°ä¼šè¯ç®¡ç†</h4>
<p>ä¸ºäº†æé«˜å¯ç”¨æ€§å’Œæ‰©å±•æ€§ï¼Œå¯ä»¥ä½¿ç”¨Redisé›†ç¾¤ã€‚Redisé›†ç¾¤å°†æ•°æ®åˆ†ç‰‡å­˜å‚¨åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œå¹¶æä¾›äº†é«˜å¯ç”¨æ€§ã€‚</p>
<h5 data-id="heading-9">ç¤ºä¾‹ï¼šä½¿ç”¨Redisé›†ç¾¤çš„ä¼šè¯ç®¡ç†</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.HostAndPort;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisCluster;

<span class="hljs-keyword">import</span> java.util.HashSet;
<span class="hljs-keyword">import</span> java.util.Set;
<span class="hljs-keyword">import</span> java.util.UUID;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisClusterSessionManager</span> {

    <span class="hljs-keyword">private</span> JedisCluster jedisCluster;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SESSION_TIMEOUT</span> <span class="hljs-operator">=</span> <span class="hljs-number">1800</span>; <span class="hljs-comment">// ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisClusterSessionManager</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// é…ç½®Redisé›†ç¾¤èŠ‚ç‚¹</span>
        Set&lt;HostAndPort&gt; nodes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        nodes.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">7000</span>));
        nodes.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">7001</span>));
        nodes.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">7002</span>));
        <span class="hljs-built_in">this</span>.jedisCluster = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisCluster</span>(nodes);
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">createSession</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionId</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
        jedisCluster.hset(sessionKey, <span class="hljs-string">"userId"</span>, userId);
        jedisCluster.expire(sessionKey, SESSION_TIMEOUT); <span class="hljs-comment">// è®¾ç½®ä¼šè¯è¶…æ—¶æ—¶é—´</span>
        <span class="hljs-keyword">return</span> sessionId;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSession</span><span class="hljs-params">(String sessionId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
        <span class="hljs-keyword">if</span> (jedisCluster.exists(sessionKey)) {
            jedisCluster.expire(sessionKey, SESSION_TIMEOUT); <span class="hljs-comment">// é‡ç½®è¶…æ—¶æ—¶é—´</span>
            <span class="hljs-keyword">return</span> jedisCluster.hget(sessionKey, <span class="hljs-string">"userId"</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateSession</span><span class="hljs-params">(String sessionId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
        <span class="hljs-keyword">if</span> (jedisCluster.exists(sessionKey)) {
            jedisCluster.expire(sessionKey, SESSION_TIMEOUT); <span class="hljs-comment">// é‡ç½®è¶…æ—¶æ—¶é—´</span>
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteSession</span><span class="hljs-params">(String sessionId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"session:"</span> + sessionId;
        jedisCluster.del(sessionKey);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            jedisCluster.close();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">RedisClusterSessionManager</span> <span class="hljs-variable">sessionManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisClusterSessionManager</span>();

        <span class="hljs-comment">// åˆ›å»ºä¼šè¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionId</span> <span class="hljs-operator">=</span> sessionManager.createSession(<span class="hljs-string">"user1"</span>);
        System.out.println(<span class="hljs-string">"Session created: "</span> + sessionId);

        <span class="hljs-comment">// è·å–ä¼šè¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> sessionManager.getSession(sessionId);
        System.out.println(<span class="hljs-string">"User ID from session: "</span> + userId);

        <span class="hljs-comment">// æ›´æ–°ä¼šè¯</span>
        sessionManager.updateSession(sessionId);
        System.out.println(<span class="hljs-string">"Session updated"</span>);

        <span class="hljs-comment">// åˆ é™¤ä¼šè¯</span>
        sessionManager.deleteSession(sessionId);
        System.out.println(<span class="hljs-string">"Session deleted"</span>);

        sessionManager.close();
    }
}
</code></pre>
<h3 data-id="heading-10">æ€»ç»“</h3>
<p>é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Rediså®ç°ä¼šè¯ç®¡ç†ï¼ŒåŒ…æ‹¬ä¼šè¯çš„åˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤ï¼Œå¹¶å¤„ç†ä¼šè¯çš„è¶…æ—¶é—®é¢˜ã€‚æˆ‘ä»¬è¿˜å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Redisé›†ç¾¤æ¥æé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ‰©å±•æ€§ã€‚æ ¹æ®å®é™…éœ€æ±‚ï¼Œå¯ä»¥è¿›ä¸€æ­¥æ‰©å±•å’Œä¼˜åŒ–è¿™äº›åŠŸèƒ½ï¼Œä¾‹å¦‚å®ç°æ›´å¤šå¤æ‚çš„ä¼šè¯ä¿¡æ¯å­˜å‚¨ã€ä¼šè¯åŒæ­¥æœºåˆ¶ç­‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ169ï¼‰å¦‚ä½•ä½¿ç”¨Rediså®ç°æ•°æ®åŒæ­¥ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7580288235031248896</link>    <guid>https://juejin.cn/post/7580288235031248896</guid>    <pubDate>2025-12-06T23:06:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580288235031248896" data-draft-id="7580312375372611624" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ169ï¼‰å¦‚ä½•ä½¿ç”¨Rediså®ç°æ•°æ®åŒæ­¥ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-06T23:06:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ169ï¼‰å¦‚ä½•ä½¿ç”¨Rediså®ç°æ•°æ®åŒæ­¥ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T23:06:03.000Z" title="Sat Dec 06 2025 23:06:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½¿ç”¨Rediså®ç°æ•°æ®åŒæ­¥æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•ï¼Œç‰¹åˆ«é€‚åˆäºéœ€è¦åœ¨å¤šå°æœåŠ¡å™¨ä¹‹é—´ä¿æŒæ•°æ®ä¸€è‡´æ€§çš„åœºæ™¯ã€‚Redisæä¾›äº†å¤šç§æœºåˆ¶æ¥å®ç°æ•°æ®åŒæ­¥ï¼ŒåŒ…æ‹¬ä¸»ä»å¤åˆ¶ã€å‘å¸ƒè®¢é˜…å’ŒRedis Streamsç­‰ã€‚</p>
<h3 data-id="heading-0">1. æ•°æ®åŒæ­¥çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p>æ•°æ®åŒæ­¥ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>æ•°æ®æ”¶é›†å’Œå¤„ç†</strong>ï¼šæ¥æ”¶å¹¶å¤„ç†éœ€è¦åŒæ­¥çš„æ•°æ®ã€‚</li>
<li><strong>æ•°æ®å­˜å‚¨</strong>ï¼šå°†å¤„ç†åçš„æ•°æ®å­˜å‚¨åœ¨Redisä¸­ã€‚</li>
<li><strong>æ•°æ®åŒæ­¥æœºåˆ¶</strong>ï¼šåˆ©ç”¨Redisçš„å¤åˆ¶ã€å‘å¸ƒè®¢é˜…æˆ–Streamsç­‰æœºåˆ¶å®ç°æ•°æ®åŒæ­¥ã€‚</li>
<li><strong>æ•°æ®æ¶ˆè´¹</strong>ï¼šä»Redisä¸­è¯»å–å¹¶å¤„ç†åŒæ­¥çš„æ•°æ®ã€‚</li>
</ol>
<h3 data-id="heading-1">2. ä½¿ç”¨Rediså®ç°æ•°æ®åŒæ­¥</h3>
<h4 data-id="heading-2">2.1 ä½¿ç”¨Redisä¸»ä»å¤åˆ¶</h4>
<p>Redisçš„ä¸»ä»å¤åˆ¶å¯ä»¥å®ç°æ•°æ®åœ¨å¤šä¸ªRediså®ä¾‹ä¹‹é—´çš„åŒæ­¥ã€‚é…ç½®ä¸€ä¸ªRediså®ä¾‹ä¸ºä¸»èŠ‚ç‚¹ï¼Œå…¶ä»–å®ä¾‹ä¸ºä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹ä¼šè‡ªåŠ¨åŒæ­¥ä¸»èŠ‚ç‚¹çš„æ•°æ®ã€‚</p>
<h5 data-id="heading-3">é…ç½®ä¸»ä»å¤åˆ¶</h5>
<ol>
<li><strong>é…ç½®ä¸»èŠ‚ç‚¹</strong>ï¼šä¸»èŠ‚ç‚¹ä¸éœ€è¦é¢å¤–é…ç½®ï¼Œå¯åŠ¨å³å¯ã€‚</li>
<li><strong>é…ç½®ä»èŠ‚ç‚¹</strong>ï¼šåœ¨ä»èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š
<pre><code class="hljs language-plaintext" lang="plaintext">replicaof &lt;master-ip&gt; &lt;master-port&gt;
</code></pre>
</li>
</ol>
<p>å¯åŠ¨Rediså®ä¾‹åï¼Œä»èŠ‚ç‚¹ä¼šè‡ªåŠ¨åŒæ­¥ä¸»èŠ‚ç‚¹çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-4">2.2 ä½¿ç”¨Rediså‘å¸ƒè®¢é˜…</h4>
<p>Redisçš„å‘å¸ƒè®¢é˜…ï¼ˆPub/Subï¼‰æœºåˆ¶æ˜¯ä¸€ç§æ¶ˆæ¯ä¼ é€’æ¨¡å‹ï¼Œå¯ä»¥åœ¨å¤šä¸ªå®¢æˆ·ç«¯ä¹‹é—´ä¼ é€’æ¶ˆæ¯ã€‚å‘å¸ƒè€…å°†æ¶ˆæ¯å‘å¸ƒåˆ°ç‰¹å®šé¢‘é“ï¼Œè®¢é˜…è€…æ¥æ”¶è¯¥é¢‘é“çš„æ¶ˆæ¯ã€‚</p>
<h5 data-id="heading-5">ç¤ºä¾‹ï¼šä½¿ç”¨å‘å¸ƒè®¢é˜…è¿›è¡Œæ•°æ®åŒæ­¥</h5>
<p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Redisçš„å‘å¸ƒè®¢é˜…æœºåˆ¶æ¥å®ç°æ•°æ®åŒæ­¥ã€‚</p>
<h6 data-id="heading-6">å‘å¸ƒè€…ï¼ˆProducerï¼‰</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisPublisher</span> {
    <span class="hljs-keyword">private</span> Jedis jedis;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CHANNEL_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"data_sync_channel"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisPublisher</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.jedis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publishData</span><span class="hljs-params">(String data)</span> {
        jedis.publish(CHANNEL_NAME, data);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
        jedis.close();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">RedisPublisher</span> <span class="hljs-variable">publisher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisPublisher</span>();
        publisher.publishData(<span class="hljs-string">"Hello, Redis!"</span>);
        publisher.close();
    }
}
</code></pre>
<h6 data-id="heading-7">è®¢é˜…è€…ï¼ˆSubscriberï¼‰</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisPubSub;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisSubscriber</span> {
    <span class="hljs-keyword">private</span> Jedis jedis;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CHANNEL_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"data_sync_channel"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisSubscriber</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.jedis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">subscribe</span><span class="hljs-params">()</span> {
        jedis.subscribe(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPubSub</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(String channel, String message)</span> {
                System.out.println(<span class="hljs-string">"Received message: "</span> + message);
            }
        }, CHANNEL_NAME);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
        jedis.close();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">RedisSubscriber</span> <span class="hljs-variable">subscriber</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisSubscriber</span>();
        subscriber.subscribe();
        subscriber.close();
    }
}
</code></pre>
<h4 data-id="heading-8">2.3 ä½¿ç”¨Redis Streams</h4>
<p>Redis Streamsæ˜¯ä¸€ç§é«˜çº§çš„æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºæ—¥å¿—å’Œæ¶ˆæ¯é˜Ÿåˆ—ç­‰åœºæ™¯ï¼Œå¯ä»¥å®ç°æ›´å¤æ‚çš„æ•°æ®åŒæ­¥éœ€æ±‚ã€‚</p>
<h5 data-id="heading-9">ç¤ºä¾‹ï¼šä½¿ç”¨Redis Streamsè¿›è¡Œæ•°æ®åŒæ­¥</h5>
<p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Redis Streamsæ¥å®ç°æ•°æ®åŒæ­¥ã€‚</p>
<h6 data-id="heading-10">æ•°æ®ç”Ÿäº§è€…ï¼ˆProducerï¼‰</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.StreamEntryID;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisStreamProducer</span> {
    <span class="hljs-keyword">private</span> Jedis jedis;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">STREAM_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"data_stream"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisStreamProducer</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.jedis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publishData</span><span class="hljs-params">(String data)</span> {
        Map&lt;String, String&gt; message = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        message.put(<span class="hljs-string">"data"</span>, data);
        jedis.xadd(STREAM_NAME, StreamEntryID.NEW_ENTRY, message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
        jedis.close();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">RedisStreamProducer</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisStreamProducer</span>();
        producer.publishData(<span class="hljs-string">"Hello, Redis Streams!"</span>);
        producer.close();
    }
}
</code></pre>
<h6 data-id="heading-11">æ•°æ®æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.StreamEntry;
<span class="hljs-keyword">import</span> redis.clients.jedis.StreamEntryID;
<span class="hljs-keyword">import</span> redis.clients.jedis.StreamPendingEntry;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisStreamConsumer</span> {
    <span class="hljs-keyword">private</span> Jedis jedis;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">STREAM_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"data_stream"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONSUMER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"data_group"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONSUMER_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"consumer_1"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisStreamConsumer</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.jedis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>);
        createConsumerGroup();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createConsumerGroup</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            jedis.xgroupCreate(STREAM_NAME, CONSUMER_GROUP, StreamEntryID.LAST_ENTRY, <span class="hljs-literal">true</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// Consumer group already exists</span>
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">consumeData</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            List&lt;StreamEntry&gt; entries = jedis.xreadGroup(CONSUMER_GROUP, CONSUMER_NAME, COUNT, <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>, STREAM_NAME, StreamEntryID.UNRECEIVED_ENTRY);
            <span class="hljs-keyword">for</span> (StreamEntry entry : entries) {
                Map&lt;String, String&gt; message = entry.getFields();
                processMessage(message);
                jedis.xack(STREAM_NAME, CONSUMER_GROUP, entry.getID());
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processMessage</span><span class="hljs-params">(Map&lt;String, String&gt; message)</span> {
        System.out.println(<span class="hljs-string">"Received message: "</span> + message.get(<span class="hljs-string">"data"</span>));
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
        jedis.close();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">RedisStreamConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisStreamConsumer</span>();
        consumer.consumeData();
        consumer.close();
    }
}
</code></pre>
<h3 data-id="heading-12">3. ç»¼åˆç¤ºä¾‹ï¼šæ•°æ®åŒæ­¥ç³»ç»Ÿ</h3>
<p>å°†ä¸Šè¿°å„éƒ¨åˆ†ç»“åˆèµ·æ¥ï¼Œå®ç°ä¸€ä¸ªå®Œæ•´çš„æ•°æ®åŒæ­¥ç³»ç»Ÿã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisPubSub;
<span class="hljs-keyword">import</span> redis.clients.jedis.StreamEntryID;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisDataSyncSystem</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CHANNEL_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"data_sync_channel"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">STREAM_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"data_stream"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONSUMER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"data_group"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONSUMER_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"consumer_1"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. å‘å¸ƒè®¢é˜…æœºåˆ¶</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(RedisDataSyncSystem::startSubscriber).start();
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">1000</span>); <span class="hljs-comment">// ç¡®ä¿è®¢é˜…è€…å·²å¯åŠ¨</span>
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                e.printStackTrace();
            }
            startPublisher();
        }).start();

        <span class="hljs-comment">// 2. Redis Streamsæœºåˆ¶</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(RedisDataSyncSystem::startStreamConsumer).start();
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">1000</span>); <span class="hljs-comment">// ç¡®ä¿æ¶ˆè´¹è€…å·²å¯åŠ¨</span>
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                e.printStackTrace();
            }
            startStreamProducer();
        }).start();
    }

    <span class="hljs-comment">// å‘å¸ƒè€…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startPublisher</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>)) {
            jedis.publish(CHANNEL_NAME, <span class="hljs-string">"Hello, Redis Pub/Sub!"</span>);
        }
    }

    <span class="hljs-comment">// è®¢é˜…è€…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startSubscriber</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>)) {
            jedis.subscribe(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPubSub</span>() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(String channel, String message)</span> {
                    System.out.println(<span class="hljs-string">"Received message: "</span> + message);
                }
            }, CHANNEL_NAME);
        }
    }

    <span class="hljs-comment">// æ•°æ®ç”Ÿäº§è€…ï¼ˆStreamsï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startStreamProducer</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>)) {
            Map&lt;String, String&gt; message = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            message.put(<span class="hljs-string">"data"</span>, <span class="hljs-string">"Hello, Redis Streams!"</span>);
            jedis.xadd(STREAM_NAME, StreamEntryID.NEW_ENTRY, message);
        }
    }

    <span class="hljs-comment">// æ•°æ®æ¶ˆè´¹è€…ï¼ˆStreamsï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startStreamConsumer</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>)) {
            createConsumerGroup(jedis);
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                List&lt;StreamEntry&gt; entries = jedis.xreadGroup(CONSUMER_GROUP, CONSUMER_NAME, COUNT, <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>, STREAM_NAME, StreamEntryID.UNRECEIVED_ENTRY);
                <span class="hljs-keyword">for</span> (StreamEntry entry : entries) {
                    Map&lt;String, String&gt; message = entry.getFields();
                    processMessage(message);
                    jedis.xack(STREAM_NAME, CONSUMER_GROUP, entry.getID());
                }
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createConsumerGroup</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-keyword">try</span> {
            jedis.xgroupCreate(STREAM_NAME, CONSUMER_GROUP, StreamEntryID.LAST_ENTRY, <span class="hljs-literal">true</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// Consumer group already exists</span>
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processMessage</span><span class="hljs-params">(Map&lt;String, String&gt; message)</span> {
        System.out.println(<span class="hljs-string">"Received stream message: "</span> + message.get(<span class="hljs-string">"data"</span>));
    }
}
</code></pre>
<h3 data-id="heading-13">æ€»ç»“</h3>
<p>é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Rediså®ç°æ•°æ®åŒæ­¥ï¼ŒåŒ…æ‹¬ä½¿ç”¨Redisçš„ä¸»ä»å¤åˆ¶æœºåˆ¶ã€å‘å¸ƒè®¢é˜…æœºåˆ¶å’ŒRedis Streamsæœºåˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„ Claude Code ä½¿ç”¨å°è®° 2]]></title>    <link>https://juejin.cn/post/7580329353353248814</link>    <guid>https://juejin.cn/post/7580329353353248814</guid>    <pubDate>2025-12-06T19:03:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580329353353248814" data-draft-id="7580310413754531890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„ Claude Code ä½¿ç”¨å°è®° 2"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹,Claude"/> <meta itemprop="datePublished" content="2025-12-06T19:03:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="cos"/> <meta itemprop="url" content="https://juejin.cn/user/1698115646132254"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„ Claude Code ä½¿ç”¨å°è®° 2
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1698115646132254/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    cos
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T19:03:31.000Z" title="Sat Dec 06 2025 19:03:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cosine.ren%2Fpost%2Fmy-claude-code-record-2" target="_blank" title="https://blog.cosine.ren/post/my-claude-code-record-2" ref="nofollow noopener noreferrer">blog.cosine.ren/post/my-claâ€¦</a></p>
</blockquote>
<p>è·ç¦»æˆ‘ 8 æœˆä»½å†™ä¸‹ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cosine.ren%2Fpost%2Fmy-claude-code-record" target="_blank" title="https://blog.cosine.ren/post/my-claude-code-record" ref="nofollow noopener noreferrer">æˆ‘çš„ Claude Code ä½¿ç”¨å°è®°</a>ã€‹å·²ç»è¿‡å»äº†è¿‘ 4 ä¸ªæœˆï¼Œåœ¨è¿™æ®µæ—¶é—´çš„é«˜å¼ºåº¦ä½¿ç”¨åï¼Œæ˜¯æ—¶å€™åˆ†äº«ä¸€äº›æ–°çš„ä½“éªŒäº†ã€‚</p>
<p>å¾ˆçŸ­ï¼Œå¹¶ä¸”æ¯”è¾ƒæ”¯ç¦»ç ´ç¢æµæ°´è´¦ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®°å½•ã€‚</p>
<h2 data-id="heading-0">ä½¿ç”¨æ•°æ®ä¸€è§ˆ</h2>
<p>ç»Ÿè®¡å·¥å…·ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwinfunc%2Fopcode" target="_blank" title="https://github.com/winfunc/opcode" ref="nofollow noopener noreferrer">opcode</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2ea06233f634e8fa091a96c989fec6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=%2Fg7bLkU28XqfLnI%2FkNVnuD4yfgI%3D" alt="20251205-è¿‘ 30 å¤©ç”¨é‡æ˜¾ç¤º 01" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c78bf77a79fc4acca8668dba96e395cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=SHsj3YVEkbbVvtxGEYtM2yMFHxs%3D" alt="" loading="lazy"/></p>
<p>æ•°æ®å¯ä»¥çœ‹å‡ºï¼Œ<strong>è¿‘ 30 å¤©æˆ‘æ¶ˆè€—äº† 743<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>çš„</mtext><mi>T</mi><mi>o</mi><mi>k</mi><mi>e</mi><mi>n</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ï¼Œä½¿ç”¨é‡é›†ä¸­åœ¨å•ä¸ªé¡¹ç›®ä¸Šã€‚èƒŒåçš„åŸå› æ˜¯ï¼šå…¬å¸æŠ¥é”€äº†å‡ ä¸ªæœˆçš„</mtext><mn>100</mn></mrow><annotation encoding="application/x-tex"> çš„ Token**ï¼Œä½¿ç”¨é‡é›†ä¸­åœ¨å•ä¸ªé¡¹ç›®ä¸Šã€‚èƒŒåçš„åŸå› æ˜¯ï¼šå…¬å¸æŠ¥é”€äº†å‡ ä¸ªæœˆçš„ 100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord cjk_fallback">çš„</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ï¼Œä½¿ç”¨é‡é›†ä¸­åœ¨å•ä¸ªé¡¹ç›®ä¸Šã€‚èƒŒåçš„åŸå› æ˜¯ï¼šå…¬å¸æŠ¥é”€äº†å‡ ä¸ªæœˆçš„</span><span class="mord">100</span></span></span></span></span> çš„ Claude Code Maxï¼Œè®©æˆ‘ä»¬å‡ ä½å‰ç«¯å’Œåç«¯å·¥ç¨‹å¸ˆä¸€èµ·å°è¯•</strong>ä»é›¶åˆ°ä¸€æ„å»ºä¸€ä¸ª"ç›¸å¯¹å¤æ‚"çš„ Swift åŸç”ŸéŸ³è§†é¢‘ APP**ã€‚ç°åœ¨ APP å·²ç»æ¥è¿‘ä¸Šæ¶é˜¶æ®µã€‚</p>
<h2 data-id="heading-1">ä½¿ç”¨ä½“éªŒ</h2>
<p>èµ·åˆæˆ‘éå¸¸æ‹…å¿ƒè´¦å·ä¼šè¢«å°ç¦ï¼Œå› ä¸ºç¤¾äº¤åª’ä½“ä¸Šå„ç§å°å·æ¶ˆæ¯å±‚å‡ºä¸ç©·ã€‚ä½†è¿™ 4 ä¸ªæœˆä¸‹æ¥ï¼Œæˆ‘çš„è´¦å·ä¸€ç›´å®‰ç„¶æ— æ™ã€‚é€€ä¸€æ­¥è¯´ï¼Œå³ä½¿çœŸçš„è¢«å°ï¼ŒAnthropic ä¹Ÿä¼šé€€æ¬¾ï¼Œé‡æ–°æ³¨å†Œä¸€ä¸ªè´¦å·å³å¯ç»§ç»­ä½¿ç”¨ã€‚</p>
<p>è€Œè¦æˆ‘è¯´æˆ‘çš„ä½¿ç”¨ä½“éªŒçš„è¯ï¼Œé‚£å°±æ˜¯ï¼š</p>
<blockquote>
<p><strong>æ¯æœˆ 100 ç¾å…ƒçš„ Claude Code Max å¸¦æ¥çš„è¾…åŠ©ä»·å€¼ï¼Œè¿œè¶…è¿™ä¸ªä»·æ ¼æœ¬èº«ã€‚</strong>
å³ä½¿å…¬å¸åç»­ä¸å†æŠ¥é”€ï¼Œæˆ‘ä¹Ÿä¼šè‡ªè´¹ç»§ç»­è®¢é˜…ã€‚</p>
</blockquote>
<p>æœ€è¿‘ 30 å¤©æˆ‘çƒ§æ‰çš„ 743$ çš„ Tokenï¼Œéƒ½æ˜¯æœ‰è®¡åˆ’ã€æœ‰ç›®çš„çš„ä½¿ç”¨ã€‚ç»™å‡ºçš„ç»“æœéƒ½å¾ˆä»¤äººæ»¡æ„ã€‚</p>
<p>åœ¨ä½¿ç”¨ Claude Code CLI çš„åŒæ—¶ï¼Œæˆ‘ä¹Ÿä¸€ç›´è®¢é˜…ç€ Cursorï¼ˆå…¬å¸ä»¥å‰æŠ¥é”€çš„å¹´è´¹ï¼‰å’Œè®¢é˜…äº† 3 ä¸ªæœˆçš„ Codexã€‚ä¸­é—´æœ‰ä¸€æ®µæ—¶é—´ï¼Œä½“æ„Ÿ Claude Code ç¡®å®ç»å†äº†â€œé™æ™ºæœŸâ€ï¼Œå¹¶ä¸”åœ¨ä»–ä»¬ä¿®å¤äº† bug ä¹‹åï¼Œä½“éªŒå°±å¥½èµ·æ¥äº†ï¼Œä½†è‡ªä» <strong>Claude Opus 4.5</strong> å‘å¸ƒåï¼Œå®ƒå°±å¾ˆå°‘è®©æˆ‘å¤±æœ›äº†ï¼ˆå½“ç„¶ï¼Œå¯¹äºé‚£äº›æ˜çŸ¥å®ƒåšä¸æ¥çš„ä»»åŠ¡ï¼Œæˆ‘ä¹Ÿä¸ä¼šå¼ºæ±‚ï¼‰ã€‚</p>
<p>Codex æˆ‘ä½“éªŒçš„æ—¶é—´åˆ™ä¸å¤ªå¤šï¼Œä½“æ„Ÿä¸Šçš„è¯ Codex CLI çš„ä½“éªŒè¿˜æ˜¯æŒºå¥½çš„ï¼Œå°±æ˜¯å¤ªæ…¢äº†ï¼Œå¹¶ä¸” 20$ ç‰¹åˆ«å®¹æ˜“é™é¢ï¼Œè™½è¯´æ…¢å·¥å‡ºç»†æ´»ï¼Œå¯æ˜¯å¤§éƒ¨åˆ†å·¥ä½œè¿˜æ˜¯ç”¨ CC åšã€‚</p>
<p>Claude ä»¥å‰ä¹Ÿæ˜¯ï¼Œä½†å‡ºäº† sonnet å’Œ opus 4.5 ä¹‹ååšåˆ°äº†æœ‰é€Ÿåº¦çš„åŒæ—¶ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸ç”¨æ”¹ï¼Œå°éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘åªéœ€è¦å°æ”¹ä¸€ä¸‹å°±å¯ä»¥ç”¨ï¼Œé‚£å°±æ›´æ²¡æœ‰æƒ³ç”¨ codex çš„ç†ç”±äº†ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒCursor æœ€å¤§çš„ä½œç”¨è¿˜æ˜¯ä»–çš„ Tab è¡¥å…¨ï¼Œä»–çš„ Agent æˆ‘å·²ç»å¾ˆå°‘ç”¨äº†ã€‚</p>
<h2 data-id="heading-2">æˆ‘çš„å·¥ä½œæµ</h2>
<h3 data-id="heading-3">Skills</h3>
<p>Skills æ˜¯ Claude å¯åŠ¨æ€åŠ è½½çš„æŒ‡ä»¤ã€è„šæœ¬å’Œèµ„æºé›†åˆï¼Œç”¨äºæå‡ç‰¹å®šä»»åŠ¡è¡¨ç°ã€‚å®ƒå¸®åŠ© Claude é‡å¤æ‰§è¡Œæ ‡å‡†åŒ–ä»»åŠ¡ï¼Œå¦‚æ–‡æ¡£åˆ¶ä½œã€æ•°æ®åˆ†ææˆ–ä»»åŠ¡è‡ªåŠ¨åŒ–ã€‚</p>
<p>å®˜æ–¹æ–‡ç« ï¼šã€Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.claude.com%2Fen%2Farticles%2F12512176-what-are-skills" target="_blank" title="https://support.claude.com/en/articles/12512176-what-are-skills" ref="nofollow noopener noreferrer">ä»€ä¹ˆæ˜¯æŠ€èƒ½</a>ã€ã€ã€Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.claude.com%2Fen%2Farticles%2F12512180-using-skills-in-claude" target="_blank" title="https://support.claude.com/en/articles/12512180-using-skills-in-claude" ref="nofollow noopener noreferrer">å¦‚ä½•åœ¨ Claude ä¸­ä½¿ç”¨</a>ã€åŠã€Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.claude.com%2Fen%2Farticles%2F12512198-how-to-create-custom-skills" target="_blank" title="https://support.claude.com/en/articles/12512198-how-to-create-custom-skills" ref="nofollow noopener noreferrer">å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½</a>ã€
æ›´å…¨é¢çš„ä¸€ç¯‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.claude.com%2Fdocs%2Fen%2Fskills%23create-a-skill" target="_blank" title="https://code.claude.com/docs/en/skills#create-a-skill" ref="nofollow noopener noreferrer">Agent Skills - Claude Code Docs</a></p>
<p>å¯ä»¥é€šè¿‡åœ¨ Claude Code ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† GitHub å­˜å‚¨åº“æ³¨å†Œä¸º Claude Code æ’ä»¶å¸‚åœºï¼š</p>
<pre><code class="hljs language-plain" lang="plain"># æŠŠ https://github.com/anthropics/skills æ³¨å†Œä¸ºæ’ä»¶å¸‚åœº
/plugin marketplace add anthropics/skills
# å®‰è£… document-skills
/plugin install document-skills@anthropic-agent-skills
</code></pre>
<p>å®‰è£…æ’ä»¶åï¼Œæ‚¨åªéœ€æåŠè¯¥æŠ€èƒ½å³å¯ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®‰è£…äº†Â <code>document-skills</code>Â æ’ä»¶ï¼Œå¯ä»¥è®© Claude Code æ‰§è¡Œç±»ä¼¼è¿™æ ·çš„æ“ä½œï¼šâ€œä½¿ç”¨ PDF æŠ€èƒ½ä»Â <code>path/to/some-file.pdf</code>Â ä¸­æå–è¡¨å•å­—æ®µâ€ã€‚</p>
<h4 data-id="heading-4">åˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½</h4>
<p>åªéœ€åŒ…å«ä¸€ä¸ª <code>SKILL.md</code> æ–‡ä»¶ï¼Œå« YAML æ ¼å¼çš„å‰ç½®ä¿¡æ¯ä¸ä»»åŠ¡æŒ‡ä»¤ã€‚å‰ç½®ä¿¡æ¯éœ€åŒ…å«ä¸¤ä¸ªå­—æ®µï¼š<code>name</code>ï¼ˆå”¯ä¸€æ ‡è¯†ç¬¦ï¼‰å’Œ <code>description</code>ï¼ˆåŠŸèƒ½ä¸ä½¿ç”¨è¯´æ˜ï¼‰ã€‚å®˜æ–¹æœ‰æ¨¡æ¿ç¤ºä¾‹ <code>template-skill</code>ï¼Œå¸®åŠ©å¿«é€Ÿç”Ÿæˆè‡ªå®šä¹‰æŠ€èƒ½ç»“æ„ã€‚</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªè¿›è¡Œæ–° skill çš„åˆ›å»ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-code%2Ftree%2Fmain%2Fplugins%2Fplugin-dev" target="_blank" title="https://github.com/anthropics/claude-code/tree/main/plugins/plugin-dev" ref="nofollow noopener noreferrer">claude-code/plugins/plugin-dev</a></p>
<pre><code class="hljs language-plain" lang="plain">/plugin marketplace add anthropics/claude-code
/plugin install plugin-dev@claude-code-plugins
</code></pre>
<p>è§¦å‘è¯ "create a skill", "add a skill to plugin", "write a new skill", "improve skill description", "organize skill content"</p>
<p>è¿™ä¸ª plugin-dev æŠ€èƒ½å¯ä»¥ç”¨æ¥åˆ›å»º ClaudeCode çš„å„ç§ä¸œè¥¿ï¼Œä¸é™äºé…ç½® Hookã€MCPã€æ’ä»¶ç»“æ„ã€é…ç½®ã€å‘½ä»¤ã€æ™ºèƒ½ä½“ (Agent) åˆ°æŠ€èƒ½ (Skill)</p>
<h4 data-id="heading-5">ç”¨æ¥åšä»€ä¹ˆï¼Ÿ</h4>
<p>å®˜æ–¹æä¾›çš„å‡ ä¸ª Skills ç¤ºä¾‹åœ¨è¿™é‡Œï¼Œå¯ä»¥æŒ‰éœ€é€‰æ‹©ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills%2Fblob%2Fmain%2Fskills%2Falgorithmic-art%2FSKILL.md" target="_blank" title="https://github.com/anthropics/skills/blob/main/skills/algorithmic-art/SKILL.md" ref="nofollow noopener noreferrer">algorithmic-art</a>ï¼šåˆ©ç”¨ p5.js åˆ¶ä½œç®—æ³•è‰ºæœ¯ (generative art)</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills%2Fblob%2Fmain%2Fskills%2Fbrand-guidelines%2FSKILL.md" target="_blank" title="https://github.com/anthropics/skills/blob/main/skills/brand-guidelines/SKILL.md" ref="nofollow noopener noreferrer">brand-guidelines</a>ï¼šå°† Anthropic çš„å®˜æ–¹å“ç‰Œé¢œè‰²å’Œå­—ä½“åº”ç”¨äºä»»ä½•éœ€è¦ Anthropic é£æ ¼å’Œæ„Ÿè§‰çš„ç‰©å“ã€‚å½“éœ€è¦ä½¿ç”¨å“ç‰Œé¢œè‰²æˆ–é£æ ¼æŒ‡å—ã€è§†è§‰æ ¼å¼æˆ–å…¬å¸è®¾è®¡æ ‡å‡†æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills%2Fblob%2Fmain%2Fskills%2Fcanvas-design%2FSKILL.md" target="_blank" title="https://github.com/anthropics/skills/blob/main/skills/canvas-design/SKILL.md" ref="nofollow noopener noreferrer">canvas-design</a>ï¼šè¿ç”¨è®¾è®¡ç†å¿µï¼Œåˆ›ä½œç²¾ç¾çš„ .png å’Œ .pdf æ ¼å¼è§†è§‰ä½œå“ã€‚å½“ç”¨æˆ·è¦æ±‚åˆ›ä½œæµ·æŠ¥ã€è‰ºæœ¯ä½œå“ã€è®¾è®¡æˆ–å…¶ä»–é™æ€ä½œå“æ—¶ï¼Œåº”è¯¥è¿ç”¨è¿™é¡¹æŠ€èƒ½ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills%2Fblob%2Fmain%2Fskills%2Fdoc-coauthoring%2FSKILL.md" target="_blank" title="https://github.com/anthropics/skills/blob/main/skills/doc-coauthoring/SKILL.md" ref="nofollow noopener noreferrer">doc-coauthoring</a>ï¼šå¼•å¯¼ç”¨æˆ·å®Œæˆç»“æ„åŒ–çš„æ–‡æ¡£åä½œå·¥ä½œæµç¨‹ã€‚é€‚ç”¨äºç”¨æˆ·éœ€è¦ç¼–å†™æ–‡æ¡£ã€ææ¡ˆã€æŠ€æœ¯è§„èŒƒã€å†³ç­–æ–‡æ¡£æˆ–ç±»ä¼¼ç»“æ„åŒ–å†…å®¹çš„æƒ…å†µã€‚ç›®æ ‡æ˜¯ç¼–å†™ä¸€ä»½çœŸæ­£å¯¹è¯»è€…æœ‰ç”¨çš„æ–‡æ¡£ã€‚</li>
<li>â€¦â€¦</li>
</ul>
<p>æˆ‘ç”¨åˆ°çš„ Skill ä¸»è¦æ˜¯ä»–çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills%2Fblob%2Fmain%2Fskills%2Ffrontend-design%2FSKILL.md" target="_blank" title="https://github.com/anthropics/skills/blob/main/skills/frontend-design/SKILL.md" ref="nofollow noopener noreferrer">å‰ç«¯è®¾è®¡æŠ€èƒ½</a>ï¼Œç°åœ¨å¯ä»¥ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.claude.com%2Fblog%2Fimproving-frontend-design-through-skills" target="_blank" title="https://www.claude.com/blog/improving-frontend-design-through-skills" ref="nofollow noopener noreferrer">Claude Code çš„ Skill å¼¥è¡¥ä»–çš„å‰ç«¯è®¾è®¡æŠ€èƒ½</a>ï¼Œåœ¨ Claude Code é‡Œç”¨è¿™ä¸¤æ¡å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/plugin marketplace add anthropics/claude-code
<span class="hljs-comment"># å®‰è£… frontend-design æŠ€èƒ½</span>
/plugin install frontend-design@claude-code-plugins
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Ftrq212%2Fstatus%2F1993786550656897491" target="_blank" title="https://x.com/trq212/status/1993786550656897491" ref="nofollow noopener noreferrer">x.com/trq212/statâ€¦</a></p>
<p>å…¶ä»– Claude Code å®˜æ–¹ä½¿ç”¨çš„ Skills å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-code%2Ftree%2Fmain%2Fplugins" target="_blank" title="https://github.com/anthropics/claude-code/tree/main/plugins" ref="nofollow noopener noreferrer">claude-code/plugins</a> ä¸­æ‰¾åˆ°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c341101fddbc4eeeaa71f120fca67861~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=BuWDbHTF2nE7TmnkvhM0%2FkTd0ws%3D" alt="" loading="lazy"/></p>
<p>æ›´ç»†è‡´çš„ï¼Œå°±å…ˆä¸æ·±å…¥è®²äº†ã€‚</p>
<h3 data-id="heading-6">å­¦ä¹ é¡¹ç›®</h3>
<ol>
<li>ä½¿ç”¨ Claude Code çš„ Plan Modeï¼Œä»¥åšå®¢é¡¹ç›®ä¸ºä¾‹å­ï¼Œçœ‹ä¸€ä¸‹ Plan Mode çš„æµç¨‹</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">&gt; æˆ‘éœ€è¦å¯¹è¿™ä¸ªé¡¹ç›®è¿›è¡Œå­¦ä¹ ï¼Œå­¦ä¹ å…¶æ•´ä½“ç»“æ„ä¸æ ¸å¿ƒå®ç°ï¼Œè¾“å‡ºä¸€ç³»åˆ— md æ–‡æ¡£åœ¨ docs æ–‡ä»¶å¤¹ä¸‹ä¾›æˆ‘å‚è€ƒã€‚
</code></pre>
<p>Plan Mode ä¼šè¯¢é—®ä½ ä¸€äº›é—®é¢˜ï¼Œæäº¤åå†ç»§ç»­è¿›è¡Œè§„åˆ’ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41215243a3324ce1afe8a603cef52726~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=pQwrN0Kv6MnD4%2FXkjz1uVMbkRj4%3D" alt="" loading="lazy"/></p>
<p>ç¡®è®¤åï¼Œä»–ä¼šæ¥ç€è¿›è¡Œè¿½é—®è¡¥å……ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/133759836cc2455e83f63d2f0164daa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=EFVJNINOPiD6yvG28mTrRkldGvc%3D" alt="" loading="lazy"/></p>
<p>æœ€åä¼šé—®ä½ æ˜¯è‡ªåŠ¨æ¥å—æ›´æ”¹è¿˜æ˜¯æ‰‹åŠ¨å…è®¸ editï¼Œæœ‰ git è¿›è¡Œç®¡ç†é‚£å½“ç„¶æ˜¯è‡ªåŠ¨æ¥å—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/793f1f99364a48408455e330bd0f0093~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=k38Sn6JLMrM4bilF4CEVOl85JI0%3D" alt="" loading="lazy"/></p>
<p>Claude Code ç‰¹åˆ«å–œæ¬¢ç”»è¿™ç§ ASCII å›¾ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ <code>CLAUDE.md</code> ä¸­ç‰¹åˆ«è¦æ±‚ä»–ä¸ç”»è¿™äº›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1b572055c364e68a38307f39eb6508b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=piW7Uu7t3VJs%2Fkjqwpc4EL2yTrs%3D" alt="" loading="lazy"/></p>
<p>æœ€ç»ˆç”Ÿæˆçš„ç¤ºä¾‹æ–‡æ¡£ï¼Œå¯ä»¥åœ¨è¿™é‡Œè¿›è¡ŒæŸ¥çœ‹ã€‚æ³¨æ„åªæ˜¯ç”¨æ¥åšä¸ªç¤ºä¾‹ï¼Œé¡¹ç›®æœ¬èº«æ˜¯ä¸æ–­å˜åŒ–çš„ï¼Œè¿™ä¸ªæ–‡æ¡£åªæ˜¯é€‚åˆåˆä¸Šæ‰‹æ¥è¿›è¡Œå­¦ä¹ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4151bd6a122349fb89ba22c089bd85ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=asDE0KMBIIlc54ICXQS0rqxznfo%3D" alt="" loading="lazy"/></p>
<p>ç”Ÿæˆçš„æ–‡æ¡£è´¨é‡å˜›ï¼Œè™½ç„¶æœ‰äº›åœ°æ–¹è¿˜æ˜¯ä¼šæœ‰é”™æ¼ï¼Œå¹¶ä¸”ç»å¸¸ä½¿ç”¨å„ç§ ASCII å›¾ï¼Œä½œä¸ºæ–°é¡¹ç›®äº†è§£å­¦ä¹ æ¥è¯´æˆ‘è§‰å¾—æ˜¯å¤Ÿçš„ã€‚ï¼ˆå½“ç„¶ï¼Œä¸è¦å‚»å‚»å‘¼å‘¼çš„è®¤ä¸ºå…¨éƒ½æ˜¯å¯¹çš„ï¼Œå®é™…çœ‹åˆ°å“ªé‡Œè¿˜éœ€è¦ä»¥ä»£ç ä¸ºå‡†ï¼‰</p>
<h3 data-id="heading-7">æ–°åŠŸèƒ½ä» 0 åˆ° 1</h3>
<ol>
<li>ä½¿ç”¨ Claude Code çš„ Plan Modeï¼Œè®©æ¨¡å‹åªè¾“å‡ºâ€œå˜æ›´è®¡åˆ’ï¼ˆå“ªäº›æ–‡ä»¶ã€æ”¹åŠ¨ç‚¹ã€é¢„æœŸ diffï¼‰â€ï¼Œå…ˆä¸å†™ä»£ç ã€‚</li>
<li>ClaudeCode çš„ Plan Mode ä¼šç”Ÿæˆè®¡åˆ’ï¼Œå¹¶è¯¢é—®ä¸€äº›ä½ å¯èƒ½æ²¡è®²æ¸…æ¥šçš„åœ°æ–¹</li>
<li>è¡¥å……å¹¶ Review è®¡åˆ’å®Œæ¯•åè®©ä»–æŒ‰è®¡åˆ’ç”Ÿæˆä»£ç ï¼Œè½åˆ°æœ¬åœ°è·‘ç¼–è¯‘ä¸æœ€å°æ ·ä¾‹ã€‚</li>
<li>å†æ¬¡è¦æ±‚æ¨¡å‹è‡ªæ£€ï¼šåˆ—å‡ºæ½œåœ¨å¤±è´¥åœºæ™¯ã€è¾¹ç•Œæ¡ä»¶å’Œå»ºè®®æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li>åšå°æ”¹åŠ¨å’Œå¯¹æ¥æ‰“ç£¨ï¼Œç„¶å Commit</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ Claude Sonnet 4.5</span>
&gt; @docs/overview/10-markdown-system.md å¼€å§‹è¿›è¡Œä¼˜åŒ–ï¼Œæˆ‘æœ‰ä»¥ä¸‹éœ€æ±‚ï¼š[Image <span class="hljs-comment">#1]</span>
  1. è¡Œå†…ä»£ç  `` è¯­æ³• çš„ä¼˜åŒ–
  2. ä»£ç å— ``` çš„ä¼˜åŒ–ï¼Œå¸Œæœ›åŠ ä¸Šå¤åˆ¶æŒ‰é’®ï¼Œæ¨¡ä»¿ mac çª—å£æ ·å¼ï¼Œå·¦ä¾§ä¸‰ä¸ªåœ†ç‚¹+ä»£ç è¯­è¨€æ˜¾ç¤ºï¼Œå³ä¾§æ˜¯å…¨å±é¢„è§ˆã€å¤åˆ¶æŒ‰é’®
  3. æ ‡é¢˜çš„æ ·å¼ä¼˜åŒ–ï¼Œæ ‡é¢˜åçš„ <span class="hljs-comment"># ä¸æ ‡é¢˜å±…ä¸­å¯¹é½ï¼Œæ ‡é¢˜å‰åŠ ä¸€ä¸ªå¼±åŒ–çš„å° H3 H4 æ ‡ç­¾æ ‡æ˜æ˜¯å‡ çº§æ ‡é¢˜</span>
  4. åˆ—è¡¨æ ·å¼ä¼˜åŒ–ï¼ˆæ— åºå’Œæœ‰åºï¼‰
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cee08ab51fe401abf89aca46d7f0f45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=S2K6goTFaijlU4p8TYbqfe%2B4tPI%3D" alt="" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02938ab2f77644829e6c02b124038934~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=9MsWrs8pIlZTnAMfQJNf80RzmBo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">Bugfix</h3>
<p>è¿™äº›æˆ‘å°±æ‡’å¾—æ”¾ç¤ºä¾‹äº†ï¼Œä¹Ÿæ˜¯åŸºæœ¬ä¸Šä¸€å¥è¯å°±å¯ä»¥ï¼Œæœ‰çš„éœ€è¦æ›´å¤šçš„äººåŠ›ä»‹å…¥ã€‚</p>
<ol>
<li>å–‚ç»™ä»–æŠ¥é”™æ—¥å¿—/æœ€å°å¤ç°å·¥ç¨‹ã€‚</li>
<li>è®©æ¨¡å‹åˆ—å‡ºâ€œå®šä½å‡è¯´æ¸…å•ã€éªŒè¯æ­¥éª¤ã€æœ€å°æ”¹åŠ¨æ–¹æ¡ˆâ€ã€‚</li>
<li>å®ç°ã€è‡ªæ£€</li>
</ol>
<h3 data-id="heading-9">é‡æ„/è¿ç§»</h3>
<ol>
<li>åŒæ · Plan Mode æè¿°é‡æ„éœ€æ±‚ï¼Œè®©å…¶ç”Ÿæˆæ–‡æ¡£è®¡åˆ’ç­‰</li>
<li>è®©æ¨¡å‹å…ˆå†™ codemodï¼Œåªåœ¨å°éƒ¨åˆ†ä¸Šè¯•è·‘ã€‚</li>
<li>è§‚å¯Ÿ diffï¼Œå®šä¹‰åˆ‡åˆ†ç‚¹å’Œéšæ—¶å¯å›æ»šçš„è¾¹ç•Œã€‚</li>
<li>åˆ†æ‰¹æ¨è¿›ï¼Œå¹¶è¿›è¡Œå›å½’æµ‹è¯•ã€‚</li>
</ol>
<h3 data-id="heading-10">æ¨¡å‹ä¸å·¥å…·çš„é€‰å‹ä¸åˆ‡æ¢</h3>
<p>å¥½ç”¨çš„æ¨¡å‹æœ‰å¾ˆå¤šï¼Œæˆæœ¬å’Œä½¿ç”¨åœºæ™¯ä¹Ÿéœ€è¦è€ƒè™‘ï¼Œä»¥ä¸‹æ˜¯æˆ‘é€‰æ¨¡å‹çš„åŸºå‡†ï¼š</p>
<ul>
<li>é‡è¦çš„æ¶æ„è®¾è®¡/å¤§é‡æ„ï¼šç”¨å¼ºæ¨¡å‹ï¼ˆè´¨é‡ä¼˜å…ˆï¼‰ã€‚</li>
<li>æ‰¹é‡ç”Ÿæˆæµ‹è¯•/æ ·ä¾‹ï¼šç”¨ä¾¿å®œæ¨¡å‹ï¼ˆæˆæœ¬ä¼˜å…ˆï¼‰ã€‚</li>
<li>è¯» log / å†™å°è„šæœ¬/æ‘˜è¦ï¼šç”¨æ›´å¿«æ¨¡å‹ï¼ˆé€Ÿåº¦ä¼˜å…ˆï¼‰ã€‚</li>
<li>å°æ¨¡å‹å¯ä»¥ç”¨ Plan Mode å…ˆç”Ÿäº§ â€œå˜æ›´è®¡åˆ’ + éªŒæ”¶ç”¨ä¾‹â€ çš„ PRDï¼Œspec é©±åŠ¨å¼€å‘ï¼Œè€Œå¤§æ¨¡å‹è´Ÿè´£å®ç°ã€‚</li>
</ul>
<h3 data-id="heading-11">Happy</h3>
<p>æœ€è¿‘åœ¨å°è¯• <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fslopus%2Fhappy" target="_blank" title="https://github.com/slopus/happy" ref="nofollow noopener noreferrer">happy</a>ï¼Œç›¸å½“å¥½ç”¨ï¼Œå¯ä»¥æ‰‹æœºæˆ–å¹³æ¿éšæ—¶éšåœ°è®¿é—®å®¶é‡Œæˆ–è€…æœåŠ¡å™¨ä¸Šçš„ Claude Code å†™ä»£ç ã€‚</p>
<p>æ˜¯å› ä¸ºçœ‹åˆ°äº†è¿™æ¡ Tweet æ‰å†³å®šä½¿ç”¨ä¸€ä¸‹ä½“éªŒçš„ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Ftwsxtd%2Fstatus%2F1995826728972026168" target="_blank" title="https://x.com/twsxtd/status/1995826728972026168" ref="nofollow noopener noreferrer">x.com/twsxtd/statâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhappy.engineering%2Fdocs%2Fuse-cases%2Fhemingway-technique%2F" target="_blank" title="https://happy.engineering/docs/use-cases/hemingway-technique/" ref="nofollow noopener noreferrer">happy.engineering/docs/use-caâ€¦</a></p>
<blockquote>
<p>æ¬§å†…æ–¯ç‰¹Â·æµ·æ˜å¨åœ¨å†™ä½œæ—¶ä½¿ç”¨äº†ä¸€ä¸ªèªæ˜çš„æŠ€å·§ã€‚ä»–ä¼šè¯´åˆ°ä¸€åŠå°±åœä¸‹æ¥ï¼Œæˆ–è€…åœ¨ä»–çŸ¥é“æ¥ä¸‹æ¥è¦è¯´ä»€ä¹ˆçš„æ—¶å€™åœä¸‹æ¥ã€‚è¿™æ ·ç¬¬äºŒå¤©å†å¼€å§‹å†™å°±å®¹æ˜“å¤šäº†ã€‚ä»–ä¸éœ€è¦è€ƒè™‘ä»å“ªé‡Œå¼€å§‹ã€‚è¿™ä¸ªæƒ³æ³•å¾ˆç®€å•ï¼šé€šè¿‡å‡†å¤‡å¥½æ¸…æ™°çš„ä¸‹ä¸€æ­¥æ¥ä¿æŒä½ çš„åŠ¨åŠ›ã€‚</p>
<p>ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œæˆ‘å¬è¯´è¿‡æŠŠæœªå®Œæˆçš„å·¥ä½œç•™åˆ°ç¬¬äºŒå¤©æ—©ä¸Šå†ç»§ç»­ã€‚ä½†è¿™ç§æé«˜æ•ˆç‡çš„æŠ€å·§å¯¹æˆ‘æ¥è¯´ä»æ¥æ²¡ç”¨ã€‚å®‰æ’ä¸€é¡¹æœ‰æ„ä¹‰çš„ä»»åŠ¡éœ€è¦ 10 åˆ° 20 åˆ†é’Ÿï¼Œè¿™å¯¹äºå³å…´å‘æŒ¥æ¥è¯´å¤ªé•¿äº†ã€‚å°¤å…¶æ˜¯åœ¨æˆ‘å·²ç»åŠ ç­åˆ°å¾ˆæ™šçš„æ—¶å€™ï¼Œæˆ‘æœ€ä¸æƒ³åšçš„å°±æ˜¯å†èŠ± 20 åˆ†é’Ÿä¸ºæ˜å¤©çš„å·¥ä½œåšå‡†å¤‡ã€‚</p>
<p>ç°åœ¨æœ‰äº† Claude Code å’Œ MCP å·¥å…·ï¼ˆé€‚ç”¨äº JIRA æˆ– Linearï¼‰ï¼Œä¸€åˆ‡éƒ½æ”¹å˜äº†ã€‚æˆ‘å¯ä»¥èººåœ¨åºŠä¸Šè¿è¡Œè‡ªå®šä¹‰çš„ç¡å‰ä»»åŠ¡ï¼Œè€Œä¸æ˜¯åˆ· Reddit æˆ– Instagramã€‚æˆ‘å·²ç»è®¾ç½®äº†Â <code>~/.claude/agents/bedtime.md</code>Â æ–‡ä»¶ï¼Œç”¨æ¥æŸ¥æ‰¾ç®€å•çš„ä»»åŠ¡ã€‚è¿™äº›ä»»åŠ¡æˆ‘ä»Šæ™šå¯ä»¥å¼€å§‹ï¼Œæ˜å¤©å°±èƒ½å®Œæˆã€‚</p>
<p>æˆ‘æè¿°ä¸€ä¸‹æˆ‘æƒ³è¦çš„åŠŸèƒ½æˆ–è€…æˆ‘æ­£åœ¨æ€è€ƒçš„é—®é¢˜ã€‚ç„¶åæˆ‘å’Œå…‹åŠ³å¾·ä¸€èµ·èŠ±å¤§çº¦ 5 åˆ†é’Ÿæ—¶é—´è¿›è¡Œè§„åˆ’ã€‚æˆ‘ä»¬åˆ¶å®šäº†ä¸€ä¸ªæˆ‘æ»¡æ„çš„å®æ–½æ–¹æ¡ˆã€‚æ–¹æ¡ˆç»æˆ‘æ‰¹å‡†åï¼Œå…‹åŠ³å¾·å°±å¼€å§‹ç€æ‰‹å®æ–½ã€‚æˆ‘æŠŠæ‰‹æœºæ’ä¸Šå……ç”µå™¨ï¼Œç„¶åç¡è§‰ã€‚</p>
<p>æˆ‘é†’æ¥æ—¶ï¼ŒHappy å‘æ¥ä¸€æ¡é€šçŸ¥ï¼šâ€œ4 ä¸ªæ–‡ä»¶å¾…å®¡æ ¸ï¼Œæ–°å¢ 237 è¡Œä»£ç â€ã€‚è¿™ä»¶å°äº‹è®©æˆ‘ä¸€å¤©æœ‰ä¸ªç¾å¥½çš„å¼€å§‹ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeafc72abfc546f5a81324cb6b0d3f9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=CnCOA%2FD9TM9TdvE%2BgHeIzfPJvm4%3D" alt="" loading="lazy"/></p>
<p>æ³¨é‡éšç§çš„è¯ï¼Œå¯ä»¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1951677637014561414" target="_blank" title="https://zhuanlan.zhihu.com/p/1951677637014561414" ref="nofollow noopener noreferrer">è‡ªéƒ¨ç½² happy server è¿œç¨‹æ“æ§ claude code ä»¥åŠ codex</a>ï¼Œå®˜æ–¹ä¹Ÿéƒ½æä¾›<a href="https://link.juejin.cn?target=https%3A%2F%2Fhappy.engineering%2Fdocs%2Fguides%2Fself-hosting%2F" target="_blank" title="https://happy.engineering/docs/guides/self-hosting/" ref="nofollow noopener noreferrer">æ•™ç¨‹</a>ï¼Œå¯ä»¥è¯´æ˜¯å¾ˆè´´å¿ƒäº†ã€‚</p>
<h2 data-id="heading-12">FAQ</h2>
<p>Qï¼šæˆ‘è¯¥å¦‚ä½•çŸ¥é“å“ªä¸ªæ¨¡å‹ç¼–ç¨‹æ€§èƒ½æœ€å¥½ï¼Ÿ
Aï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flmarena.ai%2Fleaderboard%2Fwebdev" target="_blank" title="https://lmarena.ai/leaderboard/webdev" ref="nofollow noopener noreferrer">WebDev Leaderboard | LMArena</a> å¯ä»¥ä½œä¸ºä¸€éƒ¨åˆ†å‚è€ƒï¼Œä½†æ˜¯æ›´å¤šçš„è¿˜æ˜¯è¦é è‡ªå·±å¯¹æ€§èƒ½ã€æˆæœ¬çš„è€ƒè™‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f122db2bf21b42b7854a9dc48aa0b99f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765652610&amp;x-signature=r%2FVj0b0WdmeAoFWoNPEwyQ9LNWw%3D" alt="2025-11-29 æ•°æ®" loading="lazy"/></p>
<p>Qï¼šä»€ä¹ˆæ—¶å€™ä¸è¦ç”¨ AIï¼Ÿ<br/>
Aï¼šæŠ€æœ¯å€ºåŠ¡æé‡ã€é€»è¾‘åˆ°å¤„ä¹±é£çš„å¤§å‹è€é¡¹ç›®ï¼Œæƒ³è¦ç”¨ AI ä¸€å®šä¸èƒ½ç›´æ¥â€œç»™æˆ‘å®ç° XXXâ€ï¼Œå¯ä»¥ç”¨å®ƒå…ˆæ¢³ç†ä¸€éè€é¡¹ç›®çš„å‘ï¼Œå¹¶è‡ªå·±åŠ ä»¥è¡¥å……ï¼Œå†è¿›è¡Œå®ç°ã€‚å¼ºçƒˆæ¨èçœ‹ä¸‹é¢çš„æ–‡ç« ã€‚</p>
<h2 data-id="heading-13">æ–‡ç« æ¨è</h2>
<p>å…³äº Claude Code ä»¥åŠ AI è¾…åŠ©ç¼–ç¨‹ï¼Œä»¥ä¸‹è¿™äº›æ–‡ç« æ¨èé˜…è¯»ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fy0usali%2Fstatus%2F1993276386963079478" target="_blank" title="https://x.com/y0usali/status/1993276386963079478" ref="nofollow noopener noreferrer">x.com/y0usali/staâ€¦</a></p>
<ol>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyousali.com%2Fposts%2F20251124-how-to-coding-with-ai%2F" target="_blank" title="https://yousali.com/posts/20251124-how-to-coding-with-ai/" ref="nofollow noopener noreferrer">ä»ã€Œå†™ä»£ç ã€åˆ°ã€ŒéªŒä»£ç ã€ï¼šAI æ­æ¡£å†™èµ° 3 å¹´ï¼Œæˆ‘è¸©å‡ºæ¥çš„åä½œè·¯çº¿å›¾</a>ï¼šåœ¨æ¨ä¸Šçœ‹åˆ°ä¸€ç¯‡å¥½æ–‡ç« ï¼Œå†™ç»™å·²ç»åœ¨æˆ–å‡†å¤‡åœ¨çœŸå®ç”Ÿäº§é¡¹ç›®é‡Œç”¨ AI Coding çš„åç«¯ / å…¨æ ˆå·¥ç¨‹å¸ˆå’ŒæŠ€æœ¯ç®¡ç†è€…ã€‚å®ƒä¸ä¼šæ•™ä½ ã€ŒæŒ‰é’®åœ¨å“ªé‡Œã€ã€Œå“ªä¸ª prompt æœ€ç¥ã€ï¼Œè€Œæ˜¯æƒ³åœ¨å¤§çº¦ 15 åˆ†é’Ÿé‡Œï¼Œå¸®ä½ ææ¸…æ¥šä¸‰ä»¶äº‹ï¼šå“ªäº›ä»»åŠ¡äº¤ç»™ AI æœ€ã€Œåˆ’ç®—ã€ï¼›æ€ä¹ˆè®©é¡¹ç›®æœ¬èº«å˜å¾—æ›´ã€ŒAI å‹å¥½ã€ï¼Œæé«˜ä¸€æ¬¡å‘½ä¸­ç‡ï¼›å½“ç”Ÿæˆä¸å†æ˜¯ç“¶é¢ˆæ—¶ï¼Œå·¥ç¨‹å¸ˆåº”è¯¥å¦‚ä½•è®¾è®¡éªŒè¯æµç¨‹ï¼ŒæŠŠæ—¶é—´èŠ±åœ¨çœŸæ­£å€¼é’±çš„åœ°æ–¹ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Feliocapella.com%2Fblog%2Fai-library-migration-guide%2F" target="_blank" title="https://eliocapella.com/blog/ai-library-migration-guide/" ref="nofollow noopener noreferrer">Migrating 6000 React tests using AI Agents and ASTs</a>ï¼šå¥½æ–‡ç« ï¼Œå…³äºä½¿ç”¨ AI è¿›è¡Œé‡æ„è¿ç§»çš„æ•™ç§‘ä¹¦å¼æ–‡ç« ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhyf.me%2Fblog%2Fclaude-code-in-rolldown" target="_blank" title="https://hyf.me/blog/claude-code-in-rolldown" ref="nofollow noopener noreferrer">æˆ‘ä½¿ç”¨ Claude Code å¼€å‘ Rolldown çš„ä½“éªŒ</a>ï¼šåœ¨ Rolldown å¼€å‘ä¸­é«˜å¼ºåº¦ä½¿ç”¨ Claude Code è¿›è¡ŒçœŸå®å¼€å‘çš„æ€è€ƒä¸ç»éªŒåˆ†äº«ã€‚</p>
<blockquote>
<p>å‡ ä¸ªæœˆå‰ï¼Œæˆ‘è‡ªè®¤ä¸ºå¯¹ AI è®¤çŸ¥æ˜¯æ¯”è¾ƒè´´åˆ‡ï¼Œèƒ½å†™ç‚¹è„šæœ¬ã€åšä¸‹ç½‘é¡µå¼€å‘ï¼Œä½†å¤„ç†ä¸äº† Rolldown è¿™ç§å¤æ‚åº¦çš„é¡¹ç›®ã€‚
è€Œç°åœ¨ï¼Œè¿‡å»ä¸¤å‘¨é‡Œï¼Œå®ƒå‡ ä¹æ›¿æˆ‘å†™äº†æ‰€æœ‰çš„ä»£ç ã€‚æ•´ä¸ªæµç¨‹æ²¡æœ‰é­”æ³•ï¼Œåªæœ‰è·Ÿç€å®˜æ–¹æ–‡æ¡£ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Fclaude-code-best-practices" target="_blank" title="https://www.anthropic.com/engineering/claude-code-best-practices" ref="nofollow noopener noreferrer">Claude Code: Best practices for agentic coding</a>ã€‹çš„ç¬¨æ‹™ä½¿ç”¨ï¼Œä»…ä»…æ˜¯è¿™æ ·ï¼Œå°±å·²ç»é¢ è¦†äº†æˆ‘çš„è®¤çŸ¥ã€‚</p>
</blockquote>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.pseudoyu.com%2Fposts%2Fweekly_review_102" target="_blank" title="https://www.pseudoyu.com/posts/weekly_review_102" ref="nofollow noopener noreferrer">å‘¨æŠ¥ #102 - æˆ‘æ˜¯å¦‚ä½•ä½¿ç”¨ AI çš„</a>ï¼šä½œè€…åˆ†äº«äº†è‡ªå·±åœ¨å¼€å‘ã€æ–‡æ¡£å’Œæ—¥ç¨‹ç®¡ç†ä¸­å¦‚ä½•é«˜é¢‘ä½¿ç”¨ AI å·¥å…·çš„å®æˆ˜ç»éªŒï¼Œ</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fguangzhengli.com%2Fblog%2Fzh%2Fvibe-coding-and-context-coding" target="_blank" title="https://guangzhengli.com/blog/zh/vibe-coding-and-context-coding" ref="nofollow noopener noreferrer">è°ˆè°ˆ AI ç¼–ç¨‹å·¥å…·çš„è¿›åŒ–ä¸ Vibe Coding</a>ï¼šâ€œæ°›å›´ç¼–ç¨‹ï¼ˆVibe Codingï¼‰â€ çš„å®é™…å«ä¹‰æ˜¯è®© AI å…¨æµç¨‹å†™ä»£ç ï¼Œå¼€å‘è€…å‡ ä¹ä¸å¹²é¢„ã€‚å½“å‰è¢«æ³›åŒ–ä¸ºæ‰€æœ‰ AI è¾…åŠ©ç¼–ç¨‹å½¢å¼ï¼Œä½†ä½œè€…ä¸»å¼ åº”å°†å®ƒä¸ä¸ Context Coding åŒºåˆ†</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Foverreacted.io%2Fhow-to-fix-any-bug%2F" target="_blank" title="https://overreacted.io/how-to-fix-any-bug/" ref="nofollow noopener noreferrer">How to Fix Any Bug</a>ï¼šå°‘æœ‰çš„è®²è¿°ã€Œåœ¨ vibe coding ä¸­å¦‚ä½•è°ƒè¯•é—®é¢˜ã€çš„æ–‡ç« ï½å½“ç„¶ä¹Ÿé€‚åˆæ­£å¸¸çš„ bugfixã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fai-and-ml%2Fgithub-copilot%2Fhow-to-write-a-great-agents-md-lessons-from-over-2500-repositories%2F" target="_blank" title="https://github.blog/ai-and-ml/github-copilot/how-to-write-a-great-agents-md-lessons-from-over-2500-repositories/" ref="nofollow noopener noreferrer">How to write a great agents.md: Lessons from over 2,500 repositories</a>ï¼šGitHub åˆ†æäº†è¶…è¿‡ 2500 ä¸ªå…¬å¼€ä»“åº“ä¸­çš„ agents.md æ–‡ä»¶ï¼Œå½’çº³å‡ºä¼˜ç§€ <code>agents.md</code> çš„å†™æ³•ï¼ˆè¿™ä¸ªå¾ˆæœ‰ç”¨ï¼‰</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2F4ark.me%2Fposts%2F2025-11-04-openspec%2F%233-%25E5%2588%259B%25E5%25BB%25BA%25E6%258F%2590%25E6%25A1%2588" target="_blank" title="https://4ark.me/posts/2025-11-04-openspec/#3-%E5%88%9B%E5%BB%BA%E6%8F%90%E6%A1%88" ref="nofollow noopener noreferrer">OpenSpec ä½¿ç”¨å¿ƒå¾—</a>ï¼šå®‰åˆ©äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFission-AI%2FOpenSpec" target="_blank" title="https://github.com/Fission-AI/OpenSpec" ref="nofollow noopener noreferrer">OpenSpec</a> é©±åŠ¨å¼€å‘</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.humanlayer.dev%2Fblog%2Fwriting-a-good-claude-md" target="_blank" title="https://www.humanlayer.dev/blog/writing-a-good-claude-md" ref="nofollow noopener noreferrer">Writing a good CLAUDE.md</a>ï¼šä¸€ç¯‡æ•™ä½ å¦‚ä½•å†™å‡ºæ—¢æ¸…æ™°åˆé«˜æ•ˆçš„ CLAUDE.md çš„æ–‡ç« ã€‚</p>
</li>
</ol>
<p>æˆ‘è§‰å¾—è¿™ç¯‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fguangzhengli.com%2Fblog%2Fzh%2Fvibe-coding-and-context-coding" target="_blank" title="https://guangzhengli.com/blog/zh/vibe-coding-and-context-coding" ref="nofollow noopener noreferrer">è°ˆè°ˆ AI ç¼–ç¨‹å·¥å…·çš„è¿›åŒ–ä¸ Vibe Coding</a>é‡Œçš„ä¸€æ®µè¯è¯´å¾—å¾ˆå¥½ï¼š</p>
<blockquote>
<p>ä»è¿™ä¸ªé˜¶æ®µå¼€å§‹ï¼Œæ°´å¹³ä¸€èˆ¬çš„ç¨‹åºå‘˜çš„æ•°é‡ä¼šå¼€å§‹å‡å°‘ç›´åˆ°æ¶ˆäº¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸å…¶è¯´æ˜¯ AI æŠ¢èµ°äº†å·¥ä½œé¥­ç¢—ï¼Œä¸å¦‚è¯´æ˜¯è¢«ä¼˜ç§€çš„ç¨‹åºå‘˜æŠ¢èµ°äº†å·¥ä½œé¥­ç¢—ï¼Œå¹¶ä¸”è¿™ä¸¤è€…çš„æ”¶å…¥åœ¨è¿™ä¸ªé˜¶æ®µçš„å·®è·ä¹Ÿä¼šä¸æ–­åŠ å¤§ã€‚</p>
</blockquote>
<blockquote>
<p>æ—¶ä»£çš„å¤§æ½®æµ©æµ©è¡è¡ï¼Œæˆ‘å¹¶ä¸æƒ³æŠŠæœªæ¥æƒ³çš„è¿‡äºæ‚²è§‚ï¼Œä¹Ÿä¸æƒ³æŠŠäº‹æƒ…è®²çš„è¿‡äºæ®‹é…·ï¼Œä½†åœ¨å·¥ä¸šæœºå™¨çš„è½°é¸£ä¸‹ï¼Œæ²¡æœ‰äººä¼šçœŸçš„åœ¨æ„é‚£äº›å¤æ³•æ‰‹å·¥åˆ¶ä½œè€…çš„å£°éŸ³ã€‚åœ¨è®¡ç®—æœºå‡ºç°ä¹‹å‰ï¼Œä½ ä¹Ÿéš¾ä»¥æƒ³è±¡å”®ç¥¨å‘˜ã€ç”µè¯æ¥çº¿å‘˜æ˜¯å¤šä¹ˆåºå¤§çš„ä¸€ä¸ªç¾¤ä½“ã€‚</p>
</blockquote>
<blockquote>
<p>å½“ç„¶ï¼Œæˆ‘å¹¶ä¸æ˜¯è¯´ç¼–ç¨‹æ°´å¹³ä¸€èˆ¬çš„ç¨‹åºå‘˜å°±æ‰¾ä¸åˆ°å‡ºè·¯äº†ï¼Œå®é™…ä¸Šåœ¨ AI çš„åŠ æŒä¸‹ï¼Œä¸€ä¸ªç¼–ç¨‹æ°´å¹³ä¸€èˆ¬çš„ç¨‹åºå‘˜ï¼Œå¦‚æœæœ‰ä¸é”™çš„å•†ä¸šå—…è§‰ï¼ŒåŠ ä¸Šä¸€å®šçš„è¥é”€èƒ½åŠ›ï¼Œåˆ›é€ çš„å•†ä¸šä»·å€¼è¿œæ¯”åœ¨ç¤¾ä¼šåˆ†å·¥ä¸­å½“ä¸ªèºä¸é’‰è¦å¤§çš„å¤šã€‚</p>
</blockquote>
<blockquote>
<p>è¿‡å»å¯èƒ½éœ€è¦å¾ˆå¤šäººç›¸äº’åä½œæ‰èƒ½å®Œæˆçš„å·¥ä½œï¼Œåˆ©ç”¨ AI çš„æ æ†å¯ä»¥å¤§å¤§çš„ç¼©å‡å·¥ä½œæ—¶é—´å’Œäººå‘˜è§„æ¨¡ï¼Œæœªæ¥çš„ç‹¬ç«‹å¼€å‘å’Œå°è§„æ¨¡çš„å›¢é˜Ÿåä½œä¸€å®šä¼šå˜å¾—æ›´åŠ ä¸»æµã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[# Vue æ¸²æŸ“ç³»ç»Ÿçš„å››ä¸ªå…³é”®é˜¶æ®µï¼šä»æ¨¡æ¿ç¼–è¯‘åˆ°æ–°æ—§ VDOM Patch çš„å®Œæ•´æœºåˆ¶è§£æ]]></title>    <link>https://juejin.cn/post/7580310413754564658</link>    <guid>https://juejin.cn/post/7580310413754564658</guid>    <pubDate>2025-12-06T23:55:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580310413754564658" data-draft-id="7580277964342345738" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="# Vue æ¸²æŸ“ç³»ç»Ÿçš„å››ä¸ªå…³é”®é˜¶æ®µï¼šä»æ¨¡æ¿ç¼–è¯‘åˆ°æ–°æ—§ VDOM Patch çš„å®Œæ•´æœºåˆ¶è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-06T23:55:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            # Vue æ¸²æŸ“ç³»ç»Ÿçš„å››ä¸ªå…³é”®é˜¶æ®µï¼šä»æ¨¡æ¿ç¼–è¯‘åˆ°æ–°æ—§ VDOM Patch çš„å®Œæ•´æœºåˆ¶è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T23:55:49.000Z" title="Sat Dec 06 2025 23:55:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç°ä»£ UI æ¡†æ¶çš„æ ¸å¿ƒç›®æ ‡æ˜¯åœ¨æ•°æ®å˜åŒ–æ—¶ä»¥æœ€å°ä»£ä»·æ›´æ–°è§†å›¾ã€‚Vue é€šè¿‡å°†æ•´ä¸ªæ¸²æŸ“æµç¨‹æ‹†åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œä½¿å¾— UI æ¶æ„å…·å¤‡å¯æ“ä½œæ€§ã€å¯ç»´æŠ¤æ€§ä¸é«˜æ€§èƒ½ã€‚æœ¬æ–‡å°†ç³»ç»Ÿä»‹ç» Vue ä¸­ï¼š</p>
<ul>
<li>æ¨¡æ¿å¦‚ä½•ç”Ÿæˆæ¸²æŸ“é€»è¾‘</li>
<li>ç»„ä»¶å¦‚ä½•ç»„ç»‡æ¸²æŸ“è¿‡ç¨‹</li>
<li>å“åº”å¼ç³»ç»Ÿå¦‚ä½•è§¦å‘æ›´æ–°</li>
<li>æ–°æ—§ VDOM å¦‚ä½•å¯¹æ¯”å’Œæ›´æ–° DOM</li>
</ul>
<p>ä½ å°†æ¸…æ¥šç†è§£ <strong>æ¸²æŸ“å‡½æ•°æ¥è‡ªå“ªé‡Œï¼Œæ¸²æŸ“ effect å¦‚ä½•è¢«è§¦å‘ï¼Œä»¥åŠæ–°æ—§ VDOM åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­å¦‚ä½•è¢«è·å–å’Œä½¿ç”¨ã€‚</strong></p>
<hr/>
<h2 data-id="heading-0"><strong>ç¬¬ä¸€é˜¶æ®µï¼šæ¨¡æ¿ç¼–è¯‘ï¼ˆTemplate Compilationï¼‰â€”â€”ä»é™æ€æ¨¡æ¿åˆ°å¯æ‰§è¡Œæ¸²æŸ“é€»è¾‘</strong></h2>
<p>æ‰€æœ‰ Vue ç»„ä»¶éƒ½ä» template å¼€å§‹ï¼Œä½†æ¨¡æ¿æœ¬è´¨ä¸Šåªæ˜¯å­—ç¬¦ä¸²ï¼ŒVue æ— æ³•ç›´æ¥æ‰§è¡Œï¼Œå› æ­¤ç¼–è¯‘é˜¶æ®µè´Ÿè´£å°†æ¨¡æ¿è½¬åŒ–ä¸ºæœ€ç»ˆçš„æ¸²æŸ“å‡½æ•°ï¼ˆrenderï¼‰ã€‚</p>
<p>ä»¥ä¸€ä¸ªç®€å•æ¨¡æ¿ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span>&gt;{{ count }}&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<p>ç¼–è¯‘å™¨ä¼šå°†å…¶è§£æä¸º ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Œå†è½¬æ¢ä¸ºå…·æœ‰ç»“æ„åŒ–æ„ä¹‰çš„æ¸²æŸ“ä»£ç ï¼Œæœ€ç»ˆç”Ÿæˆçš„æ¸²æŸ“å‡½æ•°ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">_ctx</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createElementBlock</span>(<span class="hljs-string">"div"</span>, <span class="hljs-literal">null</span>, _ctx.<span class="hljs-property">count</span>, <span class="hljs-number">1</span> <span class="hljs-comment">/* TEXT */</span>)
}
</code></pre>
<p>åœ¨è¿™ä¸€é˜¶æ®µï¼Œæœ‰ä¸‰é¡¹å…³é”®ä¼˜åŒ–èƒ½åŠ›ï¼š</p>
<h4 data-id="heading-1"><strong>1. é™æ€ä¸åŠ¨æ€èŠ‚ç‚¹åŒºåˆ†</strong></h4>
<p>é™æ€èŠ‚ç‚¹è¢«æå‡ï¼Œåªç”Ÿæˆä¸€æ¬¡ï¼›åŠ¨æ€èŠ‚ç‚¹ä¼šå¸¦æœ‰ PatchFlagï¼Œå¦‚ TEXTã€PROPS ç­‰ï¼Œç”¨äºç²¾ç¡®æ›´æ–°ã€‚</p>
<h4 data-id="heading-2"><strong>2. æ¸²æŸ“å‡½æ•°æ˜¯çº¯ JSï¼Œä¸åŒ…å« DOM æ“ä½œ</strong></h4>
<p>æ¸²æŸ“å‡½æ•°åªä¼šæ„å»º VNodeï¼ˆè™šæ‹Ÿ DOMï¼‰ï¼Œä¸ä¼šç›´æ¥è®¿é—®æµè§ˆå™¨ DOMã€‚</p>
<h4 data-id="heading-3"><strong>3. ç»“æ„åŒ–ä¿¡æ¯ä¸ºåç»­çš„ diff æä¾›ä¼˜åŠ¿</strong></h4>
<p>ç¼–è¯‘åçš„ä»£ç æ¯”è¿è¡Œæ—¶è§£é‡Šæ¨¡æ¿æ›´å¿«ï¼Œå¯ç›´æ¥å‚ä¸ diff è®¡ç®—ã€‚</p>
<blockquote>
<p><strong>ç¼–è¯‘é˜¶æ®µçš„äº§ç‰© render() æ˜¯ UI æ¸²æŸ“çš„æ ¸å¿ƒå…¥å£ï¼Œä¹Ÿæ˜¯æ‰€æœ‰ VDOM çš„å”¯ä¸€æ¥æºã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-4"><strong>ç¬¬äºŒé˜¶æ®µï¼šç»„ä»¶æ¸²æŸ“ effectï¼ˆRender Effectï¼‰â€”â€”æ¸²æŸ“å‡½æ•°çš„æ‰§è¡Œä¸ VDOM çš„ç”Ÿæˆè€…</strong></h2>
<p>æ¯ä¸ª Vue ç»„ä»¶å®ä¾‹åœ¨åˆæ¬¡æŒ‚è½½æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ª <strong>æ¸²æŸ“ effect</strong>ã€‚è¿™æ˜¯ Vue ä¸­çœŸæ­£è´Ÿè´£â€œæ¸²æŸ“ UIâ€ä¸â€œå“åº”å¼é©±åŠ¨æ›´æ–°â€çš„æ ¸å¿ƒå•å…ƒã€‚</p>
<p>Vue å†…éƒ¨ä¼šæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">instance.update</span> = effect(() =&gt; {
  const <span class="hljs-attr">subTree</span> = render(instance.ctx)
  patch(instance.vnode, subTree)
  <span class="hljs-attr">instance.vnode</span> = subTree
})
</code></pre>
<p>è¿™ä¸ªæ¸²æŸ“ effect å…·å¤‡ä»¥ä¸‹èŒè´£ï¼š</p>
<h4 data-id="heading-5"><strong>1. æ‰§è¡Œæ¸²æŸ“å‡½æ•°å¹¶ç”Ÿæˆæ–°çš„ VNodeï¼ˆæ–° VDOMï¼‰</strong></h4>
<p>æ¸²æŸ“å‡½æ•°è®¿é—® ctx ä¸­çš„å“åº”å¼æ•°æ®ï¼Œä»è€Œç”Ÿæˆä¸€å¥—å…¨æ–°çš„è™šæ‹Ÿ DOM æ ‘ã€‚</p>
<h4 data-id="heading-6"><strong>2. patch è´Ÿè´£å‘çœŸå® DOM æäº¤å˜åŒ–</strong></h4>
<p>æ¸²æŸ“ effect æœ¬èº«ä¸å¤„ç† DOMï¼Œå®ƒåªæ˜¯è´Ÿè´£è°ƒç”¨ patch è®© DOM æ›´æ–°ã€‚</p>
<h4 data-id="heading-7"><strong>3. effect ä¼šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è®°å½•ä¾èµ–</strong></h4>
<p>è®¿é—® <code>_ctx.xxx</code> æ—¶ï¼Œå“åº”å¼ getter ä¼šæ‰§è¡Œ trackï¼Œå°†æ¸²æŸ“ effect ä¸æ•°æ®ç»‘å®šã€‚</p>
<h4 data-id="heading-8"><strong>4. æ¸²æŸ“ effect æ˜¯ç»„ä»¶çº§è€ŒéèŠ‚ç‚¹çº§</strong></h4>
<p>æ— è®ºæ¨¡æ¿å¤šå¤§ï¼Œç»„ä»¶å§‹ç»ˆåªæœ‰ä¸€ä¸ªæ¸²æŸ“ effectã€‚</p>
<blockquote>
<p><strong>æ¸²æŸ“ effect æ˜¯â€œæ–° VDOM çš„æ¥æºè€…â€ï¼Œå¹¶åŒæ—¶ä¿å­˜ä¸Šä¸€æ¬¡æ¸²æŸ“çš„æ—§ VDOMã€‚</strong></p>
</blockquote>
<p>è¿™ä¸€ç‚¹éå¸¸å…³é”®ï¼Œä¸‹ä¸€é˜¶æ®µæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åˆ©ç”¨å®ƒã€‚</p>
<hr/>
<h2 data-id="heading-9"><strong>ç¬¬ä¸‰é˜¶æ®µï¼šå“åº”å¼è§¦å‘ï¼ˆReactive Triggerï¼‰â€”â€”æ•°æ®å˜åŒ–é©±åŠ¨é‡æ–°æ¸²æŸ“çš„æœºåˆ¶æ ¸å¿ƒ</strong></h2>
<p>å½“å“åº”å¼æ•°æ®ä¿®æ”¹æ—¶ï¼š</p>
<pre><code class="hljs">state.count++
</code></pre>
<p>Vue çš„å“åº”å¼ç³»ç»Ÿä¼šæ‰§è¡Œï¼š</p>
<h4 data-id="heading-10"><strong>1. setter â†’ trigger(target, key)</strong></h4>
<p>æ‰¾åˆ°ä¾èµ–è¯¥ key çš„æ‰€æœ‰ effectï¼Œæ­¤å¤„å³ <strong>æ¸²æŸ“ effect</strong>ã€‚</p>
<h4 data-id="heading-11"><strong>2. è°ƒåº¦æ¸²æŸ“ effect è¿›å…¥é˜Ÿåˆ—ï¼ˆschedulerï¼‰</strong></h4>
<p>Vue ä¸ä¼šç«‹å³é‡æ–°æ¸²æŸ“ï¼Œè€Œæ˜¯è¿›è¡Œæ‰¹å¤„ç†ï¼Œä»¥ä¼˜åŒ–æ€§èƒ½ã€‚</p>
<h4 data-id="heading-12"><strong>3. ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯æ‰§è¡Œæ¸²æŸ“ effect</strong></h4>
<p>é‡æ–°æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">render</span>(ctx)
<span class="hljs-built_in">patch</span>(oldVNode, newVNode)
</code></pre>
<p>è¿™æ˜¯ä¸€æ¬¡å®Œæ•´çš„ UI æ›´æ–°åŠ¨ä½œï¼š</p>
<ul>
<li>è·å–æ–° VDOMï¼ˆæ–° vnodeï¼‰</li>
<li>ä¸æ—§ VDOMï¼ˆä¸Šæ¬¡ vnodeï¼‰è¿›è¡Œ diff</li>
<li>å°†çœŸå® DOM å±€éƒ¨æ›´æ–°åˆ°æœ€æ–°çŠ¶æ€</li>
</ul>
<blockquote>
<p><strong>å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒä½œç”¨ä¸æ˜¯æ›´æ–° DOMï¼Œè€Œæ˜¯è§¦å‘æ¸²æŸ“ effectã€‚</strong></p>
</blockquote>
<p>DOM æ›´æ–°å‘ç”Ÿåœ¨ä¸‹ä¸€é˜¶æ®µã€‚</p>
<hr/>
<h2 data-id="heading-13"><strong>ç¬¬å››é˜¶æ®µï¼šè™šæ‹Ÿ DOM Diff ä¸ DOM Patch â€”â€” æ–°æ—§ VDOM çš„æ¥æºä¸äº¤æ›¿</strong></h2>
<p>è¿™éƒ¨åˆ†æ˜¯ä½ æœ€å…³å¿ƒçš„ï¼šâ€œæ–°æ—§ VDOM åˆ†åˆ«ä»å“ªé‡Œæ¥ï¼ŸVue æ˜¯å¦‚ä½•è·å–å®ƒä»¬å¹¶åš diff çš„ï¼Ÿâ€</p>
<p>æˆ‘ä»¬å…ˆç»™å‡ºç­”æ¡ˆï¼š</p>
<hr/>
<h3 data-id="heading-14"><strong>æ–° VDOM çš„æ¥æºï¼šç”±å½“å‰æ‰§è¡Œçš„ render() ç”Ÿæˆ</strong></h3>
<p>åœ¨æ¸²æŸ“ effect å†…ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">newVNode</span> = render(instance.ctx)
</code></pre>
<p>æ¯æ¬¡æ‰§è¡Œ renderï¼Œéƒ½ä¼šè¿”å›ä¸€æ£µå…¨æ–°çš„ VNode æ ‘ï¼Œè¿™å°±æ˜¯ <strong>æ–° VDOM</strong>ã€‚</p>
<p>å®ƒä¸æ¥è‡ªç¼“å­˜ã€ä¸æ¥è‡ª DOMï¼Œè€Œæ˜¯ render çš„ç›´æ¥äº§ç‰©ã€‚</p>
<hr/>
<h3 data-id="heading-15"><strong>æ—§ VDOM çš„æ¥æºï¼šç»„ä»¶å®ä¾‹ instance.vnode ä¸­ä¿å­˜çš„ä¸Šä¸€æ¬¡ç»“æœ</strong></h3>
<p>ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼ŒVue ä¼šæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-scss" lang="scss">instance<span class="hljs-selector-class">.vnode</span> = <span class="hljs-built_in">render</span>(instance.ctx)
<span class="hljs-built_in">patch</span>(null, instance.vnode)
</code></pre>
<p>ç¬¬äºŒæ¬¡æ›´æ–°æ—¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">newVNode</span> = render(ctx)
patch(instance.vnode, newVNode)
<span class="hljs-attr">instance.vnode</span> = newVNode
</code></pre>
<p>å¯ä»¥æ€»ç»“ï¼š</p>
<ul>
<li><strong>æ—§ VDOM</strong> = ä¸Šä¸€æ¬¡æ¸²æŸ“å‡½æ•°ç”Ÿæˆçš„ VNodeï¼Œè¢« Vue å­˜å‚¨åœ¨ <code>instance.vnode</code> æˆ– <code>instance.subTree</code> ä¸­</li>
<li><strong>æ–° VDOM</strong> = å½“å‰æ¸²æŸ“å‡½æ•°ç”Ÿæˆçš„ VNode</li>
</ul>
<p>å®ƒä»¬éƒ½æ¥è‡ªæ¸²æŸ“å‡½æ•°ï¼Œä¸é€šè¿‡ DOM æŸ¥è¯¢è·å¾—ã€‚</p>
<h4 data-id="heading-16"><strong>å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç»“æ„å¦‚ä¸‹ï¼š</strong></h4>
<pre><code class="hljs language-scss" lang="scss">ç¬¬ä¸€æ¬¡ï¼š
newVNode = <span class="hljs-built_in">render</span>()
<span class="hljs-built_in">patch</span>(null, newVNode)
oldVNode â† newVNode

ç¬¬äºŒæ¬¡ï¼š
newVNode = <span class="hljs-built_in">render</span>()
<span class="hljs-built_in">patch</span>(oldVNode, newVNode)
oldVNode â† newVNode

ç¬¬ä¸‰æ¬¡ï¼š
newVNode = <span class="hljs-built_in">render</span>()
<span class="hljs-built_in">patch</span>(oldVNode, newVNode)
oldVNode â† newVNode
</code></pre>
<p>å®ƒä»¬åœ¨æ¯æ¬¡æ›´æ–°ä¸­ä¸æ–­äº¤æ›¿ï¼Œåƒæ¥åŠ›æ£’ä¸€æ ·ä¼ é€’ã€‚</p>
<hr/>
<h2 data-id="heading-17"><strong>æ€»ç»“ï¼šVue æ¸²æŸ“ç³»ç»Ÿçš„å®Œæ•´å››é˜¶æ®µé“¾è·¯</strong></h2>
<p>æœ€ç»ˆæˆ‘ä»¬å¯ä»¥å°† Vue çš„æ¸²æŸ“ç®¡çº¿æŠ½è±¡ä¸ºå››ä¸ªè¿ç»­çš„å¤§é˜¶æ®µï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-number">1</span>) Template Compile
   æ¨¡æ¿ â†’ æ¸²æŸ“å‡½æ•°ï¼ˆçº¯ JSã€æ—  DOMï¼‰

<span class="hljs-number">2</span>) Render Effect
   æ‰§è¡Œæ¸²æŸ“å‡½æ•° â†’ å¾—åˆ°æ–° VDOM
   ä¿å­˜æ—§ VDOM â†’ instance<span class="hljs-selector-class">.vnode</span>

<span class="hljs-number">3</span>) Reactivity Trigger
   æ•°æ®å˜åŒ– â†’ è§¦å‘æ¸²æŸ“ effect é‡æ–°æ‰§è¡Œ

<span class="hljs-number">4</span>) Patch (Diff â†’ DOM Update)
   <span class="hljs-built_in">patch</span>(oldVNode, newVNode)
   æœ€å°æˆæœ¬æ›´æ–°çœŸå® DOM
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><strong>æ–° VDOM æ¥è‡ª render()</strong></li>
<li><strong>æ—§ VDOM æ¥è‡ªç»„ä»¶å®ä¾‹ä¿å­˜çš„ä¸Šä¸€æ¬¡ render() ç»“æœ</strong></li>
<li><strong>patch æ˜¯æœ€ç»ˆè½å® DOM æ›´æ–°çš„å”¯ä¸€é˜¶æ®µ</strong></li>
</ul>
<p>è¿™å°±æ˜¯ Vue æ•°æ®å˜åŒ–åè‡ªåŠ¨æ›´æ–° UI çš„çœŸæ­£å†…éƒ¨æœºåˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ“ é«˜æ ¡ä¸ä¼ä¸šåˆä½œï¼šWebAIGCå‰æ²¿æŠ€æœ¯çš„äº§å­¦ç ”è½¬åŒ–è·¯å¾„]]></title>    <link>https://juejin.cn/post/7580303864605360137</link>    <guid>https://juejin.cn/post/7580303864605360137</guid>    <pubDate>2025-12-07T00:00:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580303864605360137" data-draft-id="7580303864605343753" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ“ é«˜æ ¡ä¸ä¼ä¸šåˆä½œï¼šWebAIGCå‰æ²¿æŠ€æœ¯çš„äº§å­¦ç ”è½¬åŒ–è·¯å¾„"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-07T00:00:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ“ é«˜æ ¡ä¸ä¼ä¸šåˆä½œï¼šWebAIGCå‰æ²¿æŠ€æœ¯çš„äº§å­¦ç ”è½¬åŒ–è·¯å¾„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T00:00:35.000Z" title="Sun Dec 07 2025 00:00:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒ ä¸€ã€å¼•å­ï¼šå½“â€œç”Ÿæˆâ€é‡ä¸Šâ€œåº”ç”¨â€</h2>
<p>åœ¨è¿‡å»åå¹´ä¸­ï¼ŒAIä»ä¸€ä¸ªâ€œç†è®ºç‰©ç§â€é€æ¸è¿›åŒ–æˆäº†â€œç”Ÿäº§åŠ›ç”Ÿç‰©â€ã€‚å¦‚æœè¯´æœ€æ—©çš„äººå·¥æ™ºèƒ½è¿˜åœ¨â€œè®¤çŸ¥â€ä¸–ç•Œï¼Œé‚£ä¹ˆç°ä»£çš„AIGCï¼ˆAI Generated Contentï¼‰å·²ç»åœ¨<strong>åˆ›é€ </strong>ä¸–ç•Œã€‚</p>
<p>è€ŒWebAIGCâ€”â€”å³å°†AIGCèƒ½åŠ›åµŒå…¥Webç”Ÿæ€ä¸­â€”â€”ä¾¿æ˜¯æ•°å­—æ—¶ä»£çš„â€œå°åˆ·æœ¯2.0â€ã€‚<br/>
ç„¶è€Œï¼Œè®¸å¤šé«˜æ ¡ä»åœç•™åœ¨å®éªŒå®¤çš„â€œè±¡ç‰™å¡”â€ï¼Œè€Œä¼ä¸šæ—©å·²åœ¨å¸‚åœºä¸­æ‹¼æ€æˆâ€œæœºå™¨å­¦ä¹ ç‰ˆçš„é¥•é¤®â€ã€‚<br/>
äºæ˜¯é—®é¢˜æ¥äº†ï¼š<br/>
ğŸ¯ <strong>é«˜æ ¡å¦‚ä½•è®©ç§‘ç ”åŠ›é‡çœŸæ­£è½åœ°ï¼Ÿä¼ä¸šåˆå¦‚ä½•å¸æ”¶å­¦æœ¯å…»åˆ†æŒç»­åˆ›æ–°ï¼Ÿ</strong></p>
<p>è¿™ï¼Œæ­£æ˜¯æˆ‘ä»¬ä»Šå¤©è¦èŠçš„â€”â€”<strong>WebAIGCæ—¶ä»£çš„äº§å­¦ç ”è½¬åŒ–è·¯å¾„</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ« äºŒã€ä»å®éªŒå®¤åˆ°æµè§ˆå™¨ï¼šç§‘ç ”æˆæœçš„â€œä¸‹å‡¡ä¹‹è·¯â€</h2>
<h3 data-id="heading-2">ğŸ§© 1. æŠ€æœ¯æºå¤´ï¼šæ¨¡å‹ä¸ç®—æ³•çš„å­¦æœ¯æ¸©åºŠ</h3>
<p>é«˜æ ¡çš„åŠ›é‡åœ¨äºã€ŒåŸç†åˆ›æ–°ã€â€”â€”å¦‚è‡ªæ³¨æ„åŠ›æœºåˆ¶ã€æ‰©æ•£æ¨¡å‹ã€WebAssemblyå¹¶è¡Œæ¨ç†æ¡†æ¶ç­‰ã€‚<br/>
è¿™äº›å¬ä¸Šå»åƒåŒ–å­¦å®éªŒçš„åè¯ï¼Œæ­£æ˜¯WebAIGCçš„çµé­‚ã€‚<br/>
é«˜æ ¡æ“…é•¿å›ç­”**â€œä¸ºä»€ä¹ˆèƒ½åšåˆ°â€ <strong>ï¼Œä¼ä¸šåˆ™æ›´å…³å¿ƒ</strong>â€œæ€ä¹ˆå–å¾—å‡ºå»â€**ã€‚</p>
<h3 data-id="heading-3">ğŸš€ 2. å·¥ç¨‹åŒ–è½åœ°ï¼šWebç«¯çš„â€œç‚¼é‡‘æœ¯â€</h3>
<p>WebAIGCçš„é­…åŠ›åœ¨äº<strong>æµè§ˆå™¨å³å¹³å°</strong>ï¼Œç”¨æˆ·æ— éœ€å®‰è£…Appï¼Œå°±èƒ½ä½“éªŒAIç”ŸæˆåŠŸèƒ½ã€‚<br/>
åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼ä¸šéœ€è¦åšçš„å°±æ˜¯<strong>æŠŠAIå¡è¿›ç½‘é¡µé‡Œï¼Œè¿˜å¾—è®©å®ƒè·‘å¾—æ¯”çŒ«å¿«ã€ç®—å¾—æ¯”ç‹—å‡†</strong>ã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸€ä¸ªé«˜æ ¡çš„Transformerç ”ç©¶å›¢é˜Ÿï¼Œä¸ä¼ä¸šåˆä½œè®¾è®¡äº†Webç«¯è½»é‡ç‰ˆæ¨ç†æ¡†æ¶ğŸ‘‡</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ¤– ä¸€ä¸ªæç®€ WebAIGC æ¨ç†å¼•æ“ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebAIGCEngine</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">modelUrl</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">modelUrl</span> = modelUrl;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">load</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ§  æ­£åœ¨åŠ è½½AIGCæ¨¡å‹..."</span>);
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">modelUrl</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">arrayBuffer</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… æ¨¡å‹åŠ è½½å®Œæˆï¼"</span>);
  }

  <span class="hljs-title function_">generate</span>(<span class="hljs-params">prompt</span>) {
    <span class="hljs-keyword">const</span> hash = prompt.<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">h, c</span>) =&gt;</span> h + c.<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>), <span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> randomSeed = hash % <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`âœ¨ [AIç”Ÿæˆå†…å®¹#<span class="hljs-subst">${randomSeed}</span>]ï¼š<span class="hljs-subst">${prompt}</span> çš„çµæ„Ÿç»“æœ`</span>;
  }
}

(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> engine = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebAIGCEngine</span>(<span class="hljs-string">"https://ai.university/model.bin"</span>);
  <span class="hljs-keyword">await</span> engine.<span class="hljs-title function_">load</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(engine.<span class="hljs-title function_">generate</span>(<span class="hljs-string">"WebAIGCå¦‚ä½•æ¨åŠ¨æ•™è‚²åˆ›æ–°ï¼Ÿ"</span>));
})();
</code></pre>
<p>è¿™æ®µä»£ç è™½ç„¶åªæ˜¯ä¸ªå¹½é»˜çš„ä¾‹å­ï¼Œä½†æ¼”ç¤ºäº†ä»<strong>ç®—æ³•ç ”ç©¶</strong>åˆ°<strong>å‰ç«¯äº¤äº’</strong>çš„æ ¸å¿ƒé€»è¾‘è·¯å¾„ï¼š</p>
<blockquote>
<p>ç†è®º â†’ æ¡†æ¶ â†’ åº”ç”¨ â†’ äº§å“ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ğŸ¢ ä¸‰ã€ä¼ä¸šçš„èˆå°ï¼šåˆ›æ–°ã€èµ„æœ¬ä¸ç®—åŠ›çš„ä¸‰é‡å¥</h2>
<p>åœ¨ä¼ä¸šå†…éƒ¨ï¼ŒAIGCé¡¹ç›®çš„ç”Ÿå‘½å‘¨æœŸè¿œä¸æ­¢â€œéƒ¨ç½²æ¨¡å‹â€è¿™ä¹ˆç®€å•ã€‚å®ƒæ˜¯ä¸€åœºèµ„æºé…ç½®çš„èŠ­è•¾èˆâ€”â€”</p>
<p>ğŸ’° <strong>èµ„æœ¬é©±åŠ¨åˆ›æ–°</strong>ï¼Œå†³å®šäº†é¡¹ç›®èƒ½å¦ä»åŸå‹èµ°å‘é‡äº§ã€‚<br/>
ğŸŒ©ï¸ <strong>ç®—åŠ›æ”¯æŒéƒ¨ç½²</strong>ï¼Œç¡®ä¿AIèƒ½åœ¨æµ·é‡ç”¨æˆ·åŒæ—¶è®¿é—®æ—¶ç¨³å®šè¾“å‡ºã€‚<br/>
ğŸ§© <strong>APIç”Ÿæ€äº’è”</strong>ï¼Œè®©AIèƒ½åŠ›ä»¥â€œæ’ä»¶åŒ–â€çš„æ–¹å¼æŒ¤è¿›å„ç§Webæ¡†æ¶ä¸­ã€‚</p>
<p>ä¼ä¸šæœ€æ“…é•¿çš„ï¼Œæ˜¯è®©æŠ€æœ¯å˜ç°ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å°†é«˜æ ¡æ–°ç®—æ³•å°è£…æˆWebSDKï¼›</li>
<li>å¼€æºéƒ¨åˆ†æ ¸å¿ƒæ¨¡å—å¸å¼•å¼€å‘è€…ç¤¾åŒºï¼›</li>
<li>ä¸é«˜æ ¡å…±å»ºâ€œæ™ºæ…§Webä½“éªŒå®éªŒå®¤â€ã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œé«˜æ ¡é€ â€œè„‘â€ï¼Œä¼ä¸šé€ â€œä½“â€ï¼Œäº§ä¸šé€ â€œåœºâ€ï¼Œæœ€ç»ˆå®ç° <strong>â€œå­¦ä»¥è‡´ç”¨Â·ç”¨ä»¥ä¿ƒå­¦â€</strong> çš„æŠ€æœ¯ååˆå¾ªç¯ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ§ª å››ã€â€œäº§å­¦ç ”â€çš„ç†æƒ³å½¢æ€ï¼šåƒGitHubä¸€æ ·åä½œçš„æœªæ¥</h2>
<p>æˆ‘ä»¬å¯ä»¥æŠŠç†æƒ³çš„äº§å­¦ç ”åˆä½œæµç¨‹æƒ³è±¡æˆä¸€ä¸ªå¼€æ”¾çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼š</p>



































<table><thead><tr><th>é˜¶æ®µ</th><th>é«˜æ ¡è´¡çŒ®</th><th>ä¼ä¸šè§’è‰²</th><th>äº§å‡ºå½¢å¼</th></tr></thead><tbody><tr><td>ç†è®ºç ”ç©¶</td><td>æå‡ºæ–°ç®—æ³•ã€æ¨¡å‹æœºåˆ¶</td><td>æä¾›æ•°æ®ã€ç®—åŠ›æ”¯æŒ</td><td>è®ºæ–‡ / ä¸“åˆ©</td></tr><tr><td>å·¥ç¨‹éªŒè¯</td><td>ååŒä¼˜åŒ–ä»£ç æ¡†æ¶</td><td>æ¶æ„æ•´åˆä¸æ€§èƒ½æµ‹è¯•</td><td>SDK / æ¡†æ¶</td></tr><tr><td>å®é™…åº”ç”¨</td><td>æä¾›å®éªŒéªŒè¯åœºåŸŸ</td><td>å¯¼å…¥äº§å“ç”Ÿæ€</td><td>å•†ä¸šäº§å“ / Webå·¥å…·</td></tr><tr><td>æŒç»­åé¦ˆ</td><td>è·Ÿè¸ªæ–°å…´é—®é¢˜</td><td>åå“ºå­¦æœ¯ç ”ç©¶</td><td>æ–°æ¨¡å‹ / æ–°æ ‡å‡†</td></tr></tbody></table>
<p>è¿™ç§åˆä½œé€»è¾‘çŠ¹å¦‚ä¸€ä¸ª<strong>AIç”Ÿæ€GitHub</strong>ï¼š<br/>
æ¯ä¸€æ¬¡commitä¸æ˜¯ä»£ç çš„æ›´æ–°ï¼Œè€Œæ˜¯çŸ¥è¯†çš„æµè½¬ã€‚<br/>
æ¯ä¸€æ¬¡mergeä¸æ˜¯åˆ†æ”¯çš„åˆå¹¶ï¼Œè€Œæ˜¯å­¦æœ¯ä¸å•†ä¸šçš„ç›¸é‡ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ’¡ äº”ã€æ€»ç»“ï¼šè®©AIGCæˆä¸ºæ–°æ—¶ä»£çš„â€œçŸ¥è¯†å…±åˆ›å¼•æ“â€</h2>
<p>è®©æˆ‘ä»¬å›å¤´çœ‹çœ‹â€”â€”</p>
<ul>
<li>é«˜æ ¡ï¼Œæ˜¯ç‡ƒçƒ§ç†è®ºä¹‹ç«çš„åœ°æ–¹ï¼›</li>
<li>ä¼ä¸šï¼Œæ˜¯é”¤ç‚¼ç°å®ä¹‹é“çš„å·¥åŠï¼›</li>
<li>è€ŒWebAIGCï¼Œåˆ™æ˜¯é“¾æ¥ä¸¤è€…çš„â€œæ•°å­—ç‚¼é‡‘ç‚‰â€ã€‚</li>
</ul>
<p>ğŸ”¥ å½“æµè§ˆå™¨çš„æ¯ä¸€æ¬¡åˆ·æ–°ï¼Œå°±æ„å‘³ç€ä¸€æ¬¡æ™ºèƒ½ç”Ÿæˆï¼›<br/>
ğŸ’¬ å½“è¯¾å ‚çš„æ¯ä¸€æ¬¡äº’åŠ¨ï¼Œä¹Ÿèƒ½å€ŸåŠ©AIæ›´å…·å¯å‘æ€§ï¼›<br/>
é‚£æ—¶ï¼Œæˆ‘ä»¬æ‰èƒ½è¯´ï¼š<strong>äº§å­¦ç ”èåˆï¼Œä¸ä»…æ˜¯æ¡¥æ¢ï¼Œæ›´æ˜¯è¿›åŒ–çš„å¼•æ“</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¤– AI æ—¶ä»£ï¼Œå¤§æ¨¡å‹ä¸ç³»ç»Ÿçš„å¯èåˆåœºæ™¯æ¶æ„çŒœæƒ³]]></title>    <link>https://juejin.cn/post/7580374090364796966</link>    <guid>https://juejin.cn/post/7580374090364796966</guid>    <pubDate>2025-12-07T00:02:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580374090364796966" data-draft-id="7580378958072397834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¤– AI æ—¶ä»£ï¼Œå¤§æ¨¡å‹ä¸ç³»ç»Ÿçš„å¯èåˆåœºæ™¯æ¶æ„çŒœæƒ³"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å‰ç«¯æ¡†æ¶,æ“ä½œç³»ç»Ÿ"/> <meta itemprop="datePublished" content="2025-12-07T00:02:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¤– AI æ—¶ä»£ï¼Œå¤§æ¨¡å‹ä¸ç³»ç»Ÿçš„å¯èåˆåœºæ™¯æ¶æ„çŒœæƒ³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-07T00:02:37.000Z" title="Sun Dec 07 2025 00:02:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒŒ ä¸€ã€å‰è¨€ï¼šå¤§æ¨¡å‹ä¸å†æ˜¯â€œå•æœºç©å®¶â€</h2>
<p>æˆ‘ä»¬æ›¾ä»¥ä¸ºï¼Œå¤§æ¨¡å‹çš„å¥‡è¿¹åªå‘ç”Ÿåœ¨GPUæ•°æ®ä¸­å¿ƒçš„é»‘ç›’é‡Œã€‚<br/>
ä½†AIæ­£åœ¨ç»å†ä¸€æ¬¡â€œç³»ç»Ÿå­¦è¿å¾™â€â€”â€”å®ƒä¸å†å­¤ç«‹ï¼Œè€Œæ˜¯è¿›å…¥æ“ä½œç³»ç»Ÿã€æ•°æ®åº“ã€ç½‘ç»œã€ç‰©è”ç½‘ä¹ƒè‡³æµè§ˆå™¨ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li>æ“ä½œç³»ç»Ÿçš„ä»»åŠ¡è°ƒåº¦å™¨ä¼šâ€œé¢„æµ‹ç”¨æˆ·æ„å›¾â€ï¼›</li>
<li>ç½‘ç»œåè®®æ ˆæ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨ä¼˜åŒ–æµé‡è·¯å¾„ï¼›</li>
<li>æ•°æ®åº“èƒ½æ ¹æ®é—®é¢˜è‡ªåŠ¨ç”ŸæˆSQLç”šè‡³é€»è¾‘æ¨ç†æ ‘ï¼›</li>
<li>ç»ˆç«¯æµè§ˆå™¨è‡ªå·±å†³å®šä½•æ—¶å‹ç¼©ã€ç¼“å­˜æˆ–ç”Ÿæˆå†…å®¹ã€‚</li>
</ul>
<p>è¿™ä¸æ˜¯é­”æ³•ï¼Œè€Œæ˜¯<strong>å¤§æ¨¡å‹ä¸ç³»ç»Ÿçš„æ·±åº¦å¯èåˆæ¶æ„</strong>ã€‚<br/>
ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p>AIä¸æ˜¯å¤–æŒ‚ï¼Œè€Œæ˜¯å†…æ ¸ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">âš™ï¸ äºŒã€å¤§æ¨¡å‹ + ç³»ç»Ÿï¼šä»å¹¶è¡Œåˆ°å…±ç”Ÿ</h2>
<p>åœ¨ä¼ ç»Ÿç³»ç»Ÿè®¾è®¡ä¸­ï¼Œæˆ‘ä»¬è®²ç©¶çš„æ˜¯ï¼š</p>
<blockquote>
<p>æ¨¡å—åˆ†å±‚ã€èŒè´£éš”ç¦»ã€é€»è¾‘ç¡®å®šã€‚</p>
</blockquote>
<p>è€Œå¤§æ¨¡å‹çš„é€»è¾‘æ˜¯ï¼š</p>
<blockquote>
<p>æ¨¡ç³Šæ¨ç†ã€è¯­ä¹‰ç†è§£ã€ä¸Šä¸‹æ–‡é©±åŠ¨ã€‚</p>
</blockquote>
<p>äºŒè€…åƒä¸€å¯¹æ€§æ ¼è¿¥å¼‚çš„å®¤å‹ï¼š<br/>
ç³»ç»Ÿæ˜¯ä¸¥è°¨çš„æœºæ¢°å·¥ç¨‹å¸ˆï¼Œè€Œæ¨¡å‹æ˜¯çŠ€åˆ©çš„è‰ºæœ¯å®¶ã€‚<br/>
ä½†å½“ä»–ä»¬å­¦ä¼šäº’ç›¸å€¾å¬ï¼Œå°±èƒ½æ„é€ å‡ºä»¤äººæƒŠå¹çš„ã€Œå…±ç”Ÿç³»ç»Ÿã€â€”â€”AIæˆä¸ºç³»ç»Ÿçš„â€œè®¤çŸ¥ä¸­æ¢â€ï¼Œç³»ç»Ÿæˆä¸ºAIçš„â€œç‰©è´¨è½½ä½“â€ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ§© ä¸‰ã€å…¸å‹èåˆåœºæ™¯è®¾æƒ³</h2>









































<table><thead><tr><th>åœºæ™¯</th><th>ç³»ç»Ÿå±‚è§’è‰²</th><th>å¤§æ¨¡å‹è§’è‰²</th><th>é¢„æœŸæ•ˆæœ</th></tr></thead><tbody><tr><td>ğŸ§  æ™ºèƒ½æ“ä½œç³»ç»Ÿ</td><td>è°ƒåº¦ã€é©±åŠ¨ã€å®‰å…¨ç®¡ç†</td><td>ç”¨æˆ·æ„å›¾é¢„æµ‹ã€ä»»åŠ¡ä¸Šä¸‹æ–‡ç†è§£</td><td>â€œä¼šæ€è€ƒâ€çš„ä»»åŠ¡ç®¡ç†</td></tr><tr><td>ğŸ—‚ï¸ æ•°æ®åº“ç³»ç»Ÿ</td><td>å­˜å‚¨ä¸ç´¢å¼•ä¼˜åŒ–</td><td>è¯­ä¹‰æŸ¥è¯¢ç”Ÿæˆã€æ¨¡å¼è¯†åˆ«</td><td>è‡ªä¼˜åŒ–çš„æ•°æ®åº“</td></tr><tr><td>â˜ï¸ äº‘åŸç”ŸåŸºç¡€è®¾æ–½</td><td>æœåŠ¡ç¼–æ’ã€èµ„æºåˆ†é…</td><td>å·¥ä½œè´Ÿè½½é¢„æµ‹ã€å¼‚å¸¸æ£€æµ‹</td><td>è‡ªåŠ¨å¼¹æ€§ä¼¸ç¼©ä¸æ™ºèƒ½è‡ªæ²»</td></tr><tr><td>ğŸ•¸ï¸ Web å‰ç«¯</td><td>æ¸²æŸ“ä¸äº¤äº’æ§åˆ¶</td><td>æ–‡æœ¬ã€è§†è§‰ã€UI è‡ªç”Ÿæˆ</td><td>â€œå¯æ„ŸçŸ¥â€çš„åŠ¨æ€ç•Œé¢</td></tr><tr><td>ğŸ¤– IoT / è¾¹ç¼˜ç³»ç»Ÿ</td><td>ä½åŠŸè€—è®¾å¤‡æ§åˆ¶</td><td>æ¨¡å‹å‰ªæã€è‡ªé€‚åº”å­¦ä¹ </td><td>è¾¹ç¼˜ç«¯æ™ºèƒ½è¿›åŒ–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-3">ğŸš€ å››ã€æ¶æ„çŒœæƒ³ï¼šå¤§æ¨¡å‹-ç³»ç»Ÿèåˆçš„æœªæ¥å½¢æ€</h2>
<p>è®©æˆ‘ä»¬å°è¯•ç”»å‡ºè¿™ç§æœªæ¥æ¶æ„çš„é€»è¾‘å±‚æ¬¡ï¼Œç”¨æ€æƒ³çš„ASCIIçº¿æ¡æ‹¼ä¸€ä¸ªç®€åŒ–ç‰ˆğŸ‘‡</p>
<pre><code class="hljs language-css" lang="css">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         ç”¨æˆ·äº¤äº’å±‚          â•‘ â† è‡ªç„¶è¯­è¨€ / å¤šæ¨¡æ€æ¥å£
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘      AIGC åº”ç”¨ååŒå±‚        â•‘ â† Promptä»£ç† / å†…å®¹è°ƒåº¦
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘   å¤§æ¨¡å‹æœåŠ¡ä¸è®¤çŸ¥å†…æ ¸å±‚    â•‘ â† å¤šæ¨¡å‹åä½œ / çŸ¥è¯†å›¾è°±æ¥å£
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘      ç³»ç»Ÿèåˆé€‚é…å±‚          â•‘ â† API Hook / <span class="hljs-selector-tag">I</span>/O Semantic Adapter
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘   æ“ä½œç³»ç»Ÿä¸åº•å±‚èµ„æºå±‚       â•‘ â† CPU/GPUè°ƒåº¦ / å†…å­˜ä¸Šä¸‹æ–‡å¢å¼º
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre>
<p>ğŸ¯ <strong>å…³é”®è¯è§£é‡Šï¼š</strong></p>
<ul>
<li><em>è®¤çŸ¥å†…æ ¸å±‚</em>ï¼šè´Ÿè´£è¯­è¨€æ¨ç†ã€ä¸–ç•Œå»ºæ¨¡ä¸ç­–ç•¥ç”Ÿæˆã€‚</li>
<li><em>é€‚é…å±‚</em>ï¼šæ˜¯AIä¸ç³»ç»Ÿé€šä¿¡çš„æ¡¥æ¢ï¼Œæ¯”å¦‚AI Hook APIã€‚</li>
<li><em>ååŒå±‚</em>ï¼šè°ƒåº¦å¤šä¸ªAI Agentåä½œï¼Œä¾‹å¦‚å†…å®¹ç”Ÿæˆã€æ¨ç†æœåŠ¡ã€ç”¨æˆ·æ„å›¾è§£æã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">ğŸ’¡ äº”ã€èåˆçš„å…³é”®æœºåˆ¶</h2>
<ol>
<li>
<p><strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼ˆContext Injectionï¼‰</strong><br/>
ç³»ç»Ÿé€šè¿‡å…±äº«è¿è¡Œæ€ä¿¡æ¯ï¼ˆCPUè´Ÿè½½ã€ç½‘ç»œå»¶è¿Ÿã€ç”¨æˆ·äº¤äº’ï¼‰ä¾›æ¨¡å‹æ¨ç†ï¼Œä½¿AIå†³ç­–â€œæœ‰åœ°æ°”â€ã€‚</p>
</li>
<li>
<p><strong>è¯­ä¹‰ä¸­é—´ä»¶ï¼ˆSemantic Middlewareï¼‰</strong><br/>
å¼•å…¥è¯­è¨€å±‚APIï¼Œå°†ç³»ç»Ÿè°ƒç”¨å°è£…ä¸ºè‡ªç„¶è¯­è¨€æ„å›¾æ¥å£ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ğŸ§  è¯­ä¹‰è°ƒç”¨ç¤ºä¾‹ï¼šAI è®©æ“ä½œç³»ç»Ÿåšäº‹</span>
<span class="hljs-keyword">await</span> OS.semanticCall(<span class="hljs-string">"ä¼˜åŒ–æœ¬åœ°æ–‡ä»¶ç´¢å¼•"</span>, { priority: <span class="hljs-string">"low"</span> });
</code></pre>
</li>
<li>
<p><strong>æ¨¡å‹ç³»ç»ŸååŒè°ƒåº¦ï¼ˆCo-schedulingï¼‰</strong><br/>
æ¨¡å‹ä»»åŠ¡æˆä¸ºç³»ç»Ÿè¿›ç¨‹çš„ä¸€ç­‰å…¬æ°‘ï¼Œç”±æ“ä½œç³»ç»Ÿåè°ƒèµ„æºï¼Œè€Œéç”±å¤–å±‚ç¨‹åºä¸´æ—¶è°ƒç”¨ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®â€”æ¨¡å‹å¾ªç¯ï¼ˆFeedback Loopï¼‰</strong><br/>
ç³»ç»Ÿé‡‡é›†è¿è¡Œæ•°æ® â†’ æ¨¡å‹ä¼˜åŒ–ç­–ç•¥ â†’ å†è°ƒæ•´ç³»ç»Ÿè¡Œä¸ºï¼Œå¦‚åŒè‡ªå­¦ä¹ ç”Ÿæ€ä½“ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-5">ğŸ§± å…­ã€ä¸€ä¸ªç®€åŒ–çš„èåˆåŸå‹â€”â€”â€œæ™ºèƒ½ç³»ç»Ÿè°ƒåº¦å™¨â€</h2>
<p>è®©æˆ‘ä»¬æ¥æ®µå¹½é»˜çš„ä¼ªä»£ç ï¼Œè®¾æƒ³ä¸€ä¸ªç³»ç»Ÿå†…æ ¸ä¸­çš„AIä»£ç†ï¼Œå®ƒä¼šè‡ªåŠ¨å†³å®šæ˜¯ä¸æ˜¯è¯¥å¼€é£æ‰‡ ğŸ˜†</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸŒ¡ï¸ æ™ºèƒ½ç³»ç»Ÿè°ƒåº¦å™¨åŸå‹ï¼ˆèåˆAIå†³ç­–ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AwareScheduler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">model</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = model;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">observeSystem</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">cpuUsage</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">100</span>,
      <span class="hljs-attr">temp</span>: <span class="hljs-number">36</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">20</span>,
      <span class="hljs-attr">runningTasks</span>: [<span class="hljs-string">"AI_render"</span>, <span class="hljs-string">"data_sync"</span>, <span class="hljs-string">"web_server"</span>]
    };
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">decide</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> context = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observeSystem</span>();
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">generate</span>(<span class="hljs-string">`
      å½“å‰CPUä½¿ç”¨ç‡ä¸º<span class="hljs-subst">${context.cpuUsage.toFixed(<span class="hljs-number">1</span>)}</span>%ï¼Œæ¸©åº¦ä¸º<span class="hljs-subst">${context.temp.toFixed(<span class="hljs-number">1</span>)}</span>â„ƒï¼Œ
      è¿è¡Œä»»åŠ¡ä¸º<span class="hljs-subst">${context.runningTasks.join(<span class="hljs-string">"ã€"</span>)}</span>
      è¯¥å¦‚ä½•è°ƒåº¦ä»»åŠ¡ä¸é£æ‰‡è½¬é€Ÿï¼Ÿè¯·è¾“å‡ºæŒ‡ä»¤å­—ç¬¦ä¸²ã€‚
    `</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ§  æ¨¡å‹ç­–ç•¥è¾“å‡ºï¼š"</span>, response);
  }
}

<span class="hljs-comment">// æ¨¡å‹ï¼ˆç®€åŒ–ç‰ˆï¼Œå¤§æ¦‚åªä¼šèƒ¡è¯´å…«é“ï¼‰</span>
<span class="hljs-keyword">const</span> fakeModel = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">generate</span>(<span class="hljs-params">prompt</span>) {
    <span class="hljs-keyword">if</span> (prompt.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"æ¸©åº¦ä¸º"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">"å¼€é£æ‰‡åŠ å¼ºå†·å´ï¼Œå¹¶é™ä½AI_renderè¿›ç¨‹æƒé‡ã€‚"</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç³»ç»Ÿç¨³å®šï¼Œç»§ç»­è¿è¡Œã€‚"</span>;
  }
};

<span class="hljs-comment">// å¯åŠ¨AIå†…æ ¸çš„è°ƒåº¦å™¨</span>
<span class="hljs-keyword">const</span> scheduler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AwareScheduler</span>(fakeModel);
scheduler.<span class="hljs-title function_">decide</span>();
</code></pre>
<p>è¿™è™½æ˜¯ç©ç¬‘ï¼Œä½†å±•ç¤ºäº†â€œå¤§æ¨¡å‹å†…åµŒç³»ç»Ÿâ€ï¼Œé€šè¿‡è¯­ä¹‰é€»è¾‘æ§åˆ¶ä½å±‚æ“ä½œçš„è½®å»“ã€‚<br/>
æœªæ¥æ“ä½œç³»ç»Ÿçš„æ—¥å¿—æˆ–è®¸é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">[<span class="hljs-symbol">AI_DECISION</span>]: <span class="hljs-link">é™ä½GPUè°ƒåº¦ä¼˜å…ˆçº§ï¼Œæ£€æµ‹é£å™ªï¼Œç”¨æˆ·åœ¨è§†é¢‘é€šè¯ä¸­ã€‚  </span>
[<span class="hljs-symbol">SYS_ACTION</span>]: <span class="hljs-link">å·²è°ƒæ•´é£æ‰‡é€Ÿç‡è‡³é™éŸ³æ¨¡å¼ã€‚</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">ğŸŒ ä¸ƒã€ä¼¦ç†ä¸æ²»ç†ï¼šæ™ºèƒ½å†…æ ¸ä¸æ˜¯ä¸»å®°ï¼Œè€Œæ˜¯ä¼™ä¼´</h2>
<p>å½“æˆ‘ä»¬è°ˆâ€œAIåµŒå…¥ç³»ç»Ÿâ€ï¼ŒåŒæ—¶ä¹Ÿè¦é¢å¯¹<strong>å®‰å…¨ä¸è´£ä»»è¾¹ç•Œ</strong>ï¼š</p>
<ul>
<li>âœ… <strong>å¯è§£é‡Šæ€§</strong>ï¼šAIçš„æ¯æ¬¡ç³»ç»Ÿè°ƒç”¨éƒ½å¿…é¡»æœ‰å†³ç­–ä¾æ®ã€‚</li>
<li>ğŸ”’ <strong>å®‰å…¨ç½‘å…³</strong>ï¼šé¿å…AIç›´æ¥è®¿é—®å†…æ ¸çº§èµ„æºï¼Œæ— äººç›‘ç£è¡Œä¸ºã€‚</li>
<li>ğŸ§­ <strong>æ²»ç†æ¥å£</strong>ï¼šä¸ºAIå†³ç­–æ„å»ºå®¡è®¡ä¸äººå·¥å¹²é¢„æœºåˆ¶ã€‚</li>
</ul>
<p>åªæœ‰åœ¨äººç±»ä»æ˜¯ç³»ç»Ÿâ€œæœ€ç»ˆè§£é‡Šè€…â€çš„å‰æä¸‹ï¼Œå¤§æ¨¡å‹èåˆæ‰æ˜¯æ–‡æ˜çš„ï¼Œè€Œéé£é™©çš„ã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸŒˆ å…«ã€ç»“è¯­ï¼šç³»ç»Ÿåœ¨å˜èªæ˜ï¼ŒAIåœ¨å˜è„šè¸å®åœ°</h2>
<p>æœªæ¥çš„æ¶æ„ä¸ä¼šå†æœ‰æ¸…æ™°çš„è¾¹ç•Œâ€”â€”<br/>
æ“ä½œç³»ç»Ÿä¼šâ€œè¯´è¯â€ï¼Œå¤§æ¨¡å‹ä¼šâ€œè°ƒåº¦â€ï¼Œè®¡ç®—æœºå°†é€æ¸æ¼”åŒ–ä¸ºã€Œè®¤çŸ¥ç”Ÿæ€ã€ã€‚</p>
<p>æˆ–è®¸æœ‰ä¸€å¤©ï¼Œæˆ‘ä»¬å†™ä¸‹è¿™æ ·çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">await</span> System.think(<span class="hljs-string">"æˆ‘æ˜¯ä¸æ˜¯è¯¥ä¼˜åŒ–è‡ªå·±äº†ï¼Ÿ"</span>);
</code></pre>
<p>è€Œæ§åˆ¶å°æ·¡å®šåœ°å›å¤ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">ğŸ§  æˆ‘åˆšå®Œæˆä¸€æ¬¡è‡ªç›‘ç£è°ƒä¼˜ï¼Œæ€§èƒ½æå‡<span class="hljs-number">12</span><span class="hljs-comment">%ï¼Œè°¢è°¢ä½ çš„å…³å¿ƒã€‚</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨‹åºå‘˜ä»å¤§å‚å›é‡åº†å·¥ä½œä¸€å¹´]]></title>    <link>https://juejin.cn/post/7580285196693471232</link>    <guid>https://juejin.cn/post/7580285196693471232</guid>    <pubDate>2025-12-06T18:16:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580285196693471232" data-draft-id="7580295137395343375" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨‹åºå‘˜ä»å¤§å‚å›é‡åº†å·¥ä½œä¸€å¹´"/> <meta itemprop="keywords" content="Java,åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-06T18:16:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uzong"/> <meta itemprop="url" content="https://juejin.cn/user/372082495985181"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨‹åºå‘˜ä»å¤§å‚å›é‡åº†å·¥ä½œä¸€å¹´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/372082495985181/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uzong
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T18:16:13.000Z" title="Sat Dec 06 2025 18:16:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.6em;font-weight:400;font-size:15px;overflow-x:hidden;color:#303133;font-family:Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,å¾®è½¯é›…é»‘,Arial,sans-serif}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.6em;margin:1.3em 0}.markdown-body h1{font-size:30px;margin-top:50px;margin-bottom:10px}.markdown-body h2{margin-top:45px;margin-bottom:10px;font-size:26px}.markdown-body h3{margin-top:40px;margin-bottom:10px;font-size:22px}.markdown-body h4{font-size:18px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:15px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:1.6em;margin-bottom:1.6em}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#e96900;font-size:.87em;margin:0 2px;padding:3px 5px;white-space:pre-wrap}.markdown-body .markdown-section&gt;:not(h1):not(h2):not(h3):not(h4):not(h5):not(h6) code{font-size:.8rem;font-family:Roboto Mono,Monaco,courier,monospace}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;border-radius:4px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#42b983;line-height:1.2em}.markdown-body a:active,.markdown-body a:hover{color:rgba(66,185,131,.85);border-bottom:1px solid rgba(66,185,131,.6)}.markdown-body table{display:inline-block!important;font-size:12px;max-width:100%;overflow:auto;border:1px solid #f6f6f6;border-collapse:collapse}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fafafa}.markdown-body td,.markdown-body th{padding:12px 6px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:rgba(52,73,94,.95);padding:1px 23px;margin:22px 0;border-left:4px solid #42b983;background-color:rgba(66,185,131,.1)}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ä»å¤§å‚è£¸è¾å›é‡åº†å·¥ä½œï¼Œæ•´æ•´ä¸€å¹´äº†ã€‚</strong></p>
<hr/>
<p>æ—¶é—´å¿«å¾—è®©äººå¿ƒæƒŠã€‚åœä¸‹å›æœ›ï¼Œä»è£¸è¾ã€å½’ä¹¡ã€æ±‚èŒåˆ°é€‚åº”ï¼Œå†åˆ°è§’è‰²è½¬æ¢ï¼Œç§ç§å¿ƒç»ªï¼Œæ„Ÿæ…¨é¢‡å¤šã€‚</p>
<hr/>
<h4 data-id="heading-0"><strong>ä¸€ã€ç¦»å¼€æ—¶ï¼Œé‚£å¥è¯æˆäº†ç§å­</strong></h4>
<p>æœ€åä¸€ä¸ªå·¥ä½œæ—¥çš„ä¸‹åˆï¼Œé¢†å¯¼æŠŠæˆ‘å«åˆ°æ¥¼é“ï¼Œåšäº†ä¸€æ¬¡ä¸´åˆ«äº¤è°ˆã€‚</p>
<p>ä»–æœ‰ä¸€å¥è¯ï¼Œæˆ‘è‡³ä»Šè®°å¾—æ¸…æ¸…æ¥šæ¥šï¼šâ€œä»¥åå‡ºå»ï¼Œä¸€å®šè¦æƒ³åŠæ³•èµ°å‘ç®¡ç†å²—ä½ï¼Œé‚£æ˜¯å®Œå…¨ä¸åŒçš„ç«äº‰åŠ›ã€‚â€</p>
<p>å½“æ—¶åªæ˜¯è®°ä¸‹ã€‚<strong>ä¸€å¹´åçš„ä»Šå¤©ï¼Œå½“æˆ‘å¼€å§‹å¸¦é¢†ä¸€ä¸ªå°å›¢é˜Ÿæ—¶ï¼Œè¿™å¥è¯çªç„¶åœ¨å¿ƒé‡Œå‘äº†èŠ½ã€‚</strong> å®ƒåƒä¸€é¢—æå‰åŸ‹ä¸‹çš„ç§å­ï¼Œåœ¨åˆé€‚çš„æ—¶èŠ‚æ‚„ç„¶ç”Ÿé•¿ã€‚</p>
<h4 data-id="heading-1"><strong>äºŒã€è£¸è¾å›æ¸ï¼šä¸€åœºæ°å¦‚å…¶åˆ†çš„â€œä»»æ€§â€</strong></h4>
<p>å›é‡åº†æ˜¯è£¸è¾çš„ã€‚æ‰€æœ‰äººéƒ½åŠæˆ‘â€œæ‰¾åˆ°å·¥ä½œå†å›â€ï¼Œä½†æˆ‘è¿˜æ˜¯ä»»æ€§äº†ä¸€æ¬¡ã€‚</p>
<p>å…ˆå‡ºå»æ¼«æ¸¸äº†ä¸¤ä¸ªæœˆï¼Œç›´åˆ°èº«å¿ƒä¿±ç–²ï¼ŒåŒ—æ–¹çš„ç§‹å‡‰æ¸èµ·ï¼Œæ‰å›åˆ°è€å®¶ã€‚é™ªå®¶äººï¼Œç»™çˆ¶äº²è¿‡äº†å…­åå²ç”Ÿæ—¥ã€‚ç„¶åï¼Œå®‰é™åœ°å¼€å§‹å‡†å¤‡é¢è¯•ã€‚</p>
<p><strong>å¦‚ä»Šæƒ³æ¥ï¼Œè¿™æ®µâ€œé—´éš”æœŸâ€å¹¶éç©ºç™½ï¼Œè€Œæ˜¯ä¸€æ¬¡å¿…è¦çš„æ¸…ç©ºä¸æ ¡å‡†ã€‚</strong> ä¸€åˆ‡è¡”æ¥å¾—æ°å¦‚å…¶åˆ†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fe0442708ef4544aeb6b5252e63c0b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649772&amp;x-signature=LW5fmQ%2FOtJXp3VQwAr7wQoxfVxA%3D" alt="" loading="lazy"/></p>
<p>æ‹æ‘„äºä¸€ä¸ªä¸‹åˆ</p>
<h4 data-id="heading-2"><strong>ä¸‰ã€é€‰æ‹©å°å…¬å¸ï¼šæ¥å—å¦ä¸€ç§ä»·å€¼åºåˆ—</strong></h4>
<p>é‡åº†çš„äº’è”ç½‘åœŸå£¤ï¼Œä¸ä¸€çº¿åŸå¸‚ä¸åŒã€‚å¤´éƒ¨å…¬å¸å±ˆæŒ‡å¯æ•°ï¼Œæœºä¼šçª—å£ä¹Ÿå¾ˆæœ‰é™ã€‚ç»“åˆè‡ªèº«æƒ³åœ¨å°å¹³å°æ·±è€•å‡ å¹´çš„æ„æ„¿ï¼Œæˆ‘æœ€ç»ˆåŠ å…¥äº†ä¸€å®¶æˆé•¿å‹å…¬å¸ã€‚</p>
<p>è–ªèµ„ç¦åˆ©ç›¸æ¯”ä¹‹å‰è‡ªç„¶æ˜¯â€œéª¨æŠ˜ä»·â€ï¼Œè¿™æ˜¯æˆ‘æ—©æœ‰çš„é¢„æœŸã€‚****<br/>
<strong>å¯¹äºæƒ³ä»ä¸€çº¿å›æ¥çš„æœ‹å‹ï¼Œæˆ‘çš„ä½“ä¼šæ˜¯ï¼šå¹´è½»æ—¶å¯å¤šåœ¨å¤–ç§¯ç´¯ç¡¬å®åŠ›ï¼Œä½†åˆ‡å¿Œæ··æ—¥å­ã€‚</strong> æƒ³æ¸…æ¥šè‡ªå·±è¦ä»€ä¹ˆï¼Œå†å†³å®šä½•æ—¶å½’æ¥ã€‚</p>
<p>å¦‚ä»Šï¼Œè™½ç„¶æ”¶å…¥ä¸åŠä»å‰ï¼Œä½†å¿ƒå¢ƒå´æ„ˆå‘<strong>ä»å®¹ã€è½åœ°</strong>ã€‚å°‘äº†ä¸€ä»½åœ¨å¤§å¹³å°å…‰ç¯ä¸‹çš„â€œé£˜é£˜ç„¶â€ï¼Œå¤šäº†ä¸€ç§åƒèˆ¹åªè£…ä¸Šâ€œå‹èˆ±çŸ³â€èˆ¬çš„ç¨³å®šæ„Ÿã€‚</p>
<h4 data-id="heading-3"><strong>å››ã€ç«™ä¸Šè®²å°ï¼Œæ‰çœ‹æ‡‚å½“å¹´çš„è‡ªå·±</strong></h4>
<p>è¿™ä¸€å¹´ï¼Œæœ€å¤§çš„å˜åŒ–æ˜¯<strong>å¿ƒæ€</strong>ã€‚ä»è¢«åŠ¨æ¥å—åˆ°ä¸»åŠ¨è´Ÿè´£ï¼Œä»å…³æ³¨äº‹åˆ°å…³æ³¨äººã€‚</p>
<p>ä»¥å‰æ€»è§‰å¾—ï¼ŒæŠŠåˆ†é…çš„ä»»åŠ¡å®Œæˆå°±è¶³å¤Ÿäº†ã€‚ç°åœ¨æ˜ç™½ï¼Œè¿™å›ºç„¶æ²¡é”™ï¼Œä½†ä¹Ÿä¼šå› æ­¤é”™å¤±ä¸¤ç§æœ€å®è´µçš„æ”¶è·ï¼š<strong>å¿«é€Ÿçš„æˆé•¿ï¼Œå’Œç­‰ä»·çš„æŠ¥é…¬ã€‚</strong></p>
<p>è¿™è®©æˆ‘æƒ³èµ·å­¦ç”Ÿæ—¶ä»£ï¼šååœ¨è®²å°ä¸‹æ—¶ï¼Œæ€»è§‰å¾—è€å¸ˆçœ‹ä¸åˆ°è‡ªå·±çš„å°åŠ¨ä½œï¼›ç›´åˆ°æœ‰ä¸€å¤©è‡ªå·±ç«™ä¸Šè®²å°ï¼Œæ‰ç¬é—´æ˜ç™½â€”â€”å°ä¸‹çš„ä¸€åˆ‡ï¼Œå…¶å®å°½æ”¶çœ¼åº•ã€‚</p>
<p><strong>ä»Šå¤©åšç®¡ç†ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</strong> è°åœ¨ç”¨å¿ƒï¼Œè°åœ¨æ•·è¡ï¼Œè°æœ‰æ½œåŠ›ï¼Œè°åœ¨æ‘¸é±¼ï¼Œæ¸…æ™°å¾—åƒä¸€å¼ ç”»ã€‚<strong>è§†è§’çš„è½¬æ¢ï¼Œå¸¦æ¥çš„æ˜¯â€œé™ç»´â€èˆ¬çš„æ´å¯ŸåŠ›ã€‚</strong> è¿™ä¹Ÿæ—¶åˆ»åé—®æˆ‘è‡ªå·±ï¼šæ­¤åˆ»ï¼Œæˆ‘åˆè¢«ç¦é”¢åœ¨å“ªä¸ªâ€œä½ç»´â€è§†è§’é‡Œè€Œä¸è‡ªçŸ¥ï¼Ÿ</p>
<h4 data-id="heading-4"><strong>äº”ã€åœ¨ä¸‹å±èº«ä¸Šï¼Œç…§è§è‡ªå·±çš„è¿‡å»</strong></h4>
<p>æˆ‘çš„æ‹–å»¶ç—‡æ”¹å–„äº†ä¸å°‘ã€‚å› ä¸ºæˆ‘åœ¨ä¸‹å±èº«ä¸Šï¼Œçœ‹åˆ°äº†å¤ªå¤šè‡ªå·±è¿‡å»çš„å½±å­ï¼š</p>
<ul>
<li>å†…å‘ï¼Œä¸çˆ±ä¸»åŠ¨æ²Ÿé€šï¼›</li>
<li>ä¸å‚¬ä¸åŠ¨ï¼Œç¼ºä¹è‡ªé©±åŠ›ï¼›</li>
<li>æŠŠå·¥ä½œä¸¥æ ¼æ¡†å®šåœ¨8å°æ—¶å†…ï¼›</li>
<li>æŠŠâ€œå®Œæˆä»»åŠ¡â€ç­‰åŒäºâ€œå·¥ä½œå…¨éƒ¨â€â€¦â€¦</li>
</ul>
<p>æ¯æ¯çœ‹åˆ°è¿™äº›ï¼Œå¿ƒä¸­å¹¶æ— æ‰¹è¯„ï¼Œåªæœ‰æ„Ÿæ…¨ä¸è­¦é†’ã€‚<strong>ä»–ä»¬å°±åƒä¸€é¢é•œå­ï¼Œè®©æˆ‘çœ‹åˆ°æ¥è·¯ï¼Œä¹Ÿæ›´æ˜ç¡®è¯¥å»å‘ä½•æ–¹ã€‚</strong></p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b18498a69bcf4ae0b6c4c8ccdc79d95d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649772&amp;x-signature=avjsjbCeh0BZ2t%2Fj2dHrtmnpgp0%3D" alt="" loading="lazy"/></p>
<p>ä¸‹å®Œé›¨çš„é‡åº†å¤œæ™¯</p>
<h4 data-id="heading-5"><strong>å…­ã€ç®¡ç†ç¬¬ä¸€è¯¾ï¼šæ”¶èµ·â€œè¿‡åº¦è´£ä»»æ„Ÿâ€</strong></h4>
<p>æˆ‘æ›¾è¿«åˆ‡åœ°å¸Œæœ›å›¢é˜Ÿé‡Œæ¯ä¸ªäººéƒ½èƒ½å¿«é€Ÿæˆé•¿ï¼Œä¸ºæ­¤è€—è´¹å¤§é‡å¿ƒåŠ›ã€‚åæ¥å‘ç°ï¼Œè¿™æ˜¯<strong>ä¸€ç§â€œè¿‡åº¦è´Ÿè´£â€</strong> ã€‚</p>
<p>ç®¡ç†è€…çš„è´£ä»»å¿ƒï¼Œæ²¡æœ‰æ ‡å‡†åˆ»åº¦ã€‚åƒç­ä¸»ä»»ä¸€æ ·ï¼Œå¯ä»¥ç®¡å¾—æ— å¾®ä¸è‡³ï¼Œä¹Ÿå¯ä»¥æŠ“å¤§æ”¾å°ã€‚<strong>è¯•å›¾ä¸ºæ‰€æœ‰äººçš„æˆé•¿å…œåº•ï¼Œæœ€ç»ˆåªä¼šå‹å®è‡ªå·±ã€‚</strong></p>
<p>æˆ‘é€æ¸è®¤æ¸…ï¼š<strong>æ¯ä¸ªäººéƒ½æ˜¯è‡ªå·±æˆé•¿çš„ç¬¬ä¸€è´£ä»»äººã€‚</strong> ç®¡ç†è€…çš„èŒè´£ï¼Œæ˜¯æä¾›æœºä¼šã€æŒ‡æ˜æ–¹å‘ã€åšå¥½ç­›é€‰ï¼Œè€Œä¸æ˜¯â€œä¸€ç¢—æ°´ç«¯å¹³â€åœ°å¹³å‡ç”¨åŠ›ã€‚æƒ³é€šè¿™ä¸€ç‚¹ï¼Œä¾¿ä¸å†çº ç»“â€”â€”èŒåœºï¼Œæœ¬å°±ä¸æ˜¯å®Œå…¨å…¬å¹³çš„ã€‚</p>
<h4 data-id="heading-6"><strong>ä¸ƒã€æˆå¹´äººçš„å­¦ä¹ ï¼šåªèƒ½å’Œè‡ªå·±è¾ƒåŠ²</strong></h4>
<p>ç¦»å¼€å­¦æ ¡åï¼Œå­¦ä¹ å˜æˆäº†çº¯ç²¹ä¸ºè‡ªå·±çš„äº‹ä¸šã€‚<strong>å¯¹çŸ¥è¯†çš„æ¸´æœ›ï¼Œä»æœªå¦‚æ­¤å¼ºçƒˆå’Œå…·ä½“ã€‚</strong> å­¦ä¹ ã€æ€»ç»“ã€æ€è€ƒã€æ¨¡ä»¿ã€è¡ŒåŠ¨ã€å¤ç›˜â€”â€”è¿™æ˜¯æ™®é€šäººè¿›é˜¶æœ€æ‰å®çš„è·¯å¾„ã€‚è‹¥æœ‰é«˜äººæŒ‡ç‚¹ï¼Œåˆ™æ˜¯å¹¸è¿ã€‚</p>
<p>æ›´æ·±çš„æ„Ÿè§¦æ˜¯ï¼Œ<strong>æˆå¹´åï¼Œä½ å·²ç»æ²¡æœ‰æ˜ç¡®çš„å¯¹æ‰‹äº†ã€‚</strong> çœŸæ­£çš„ç«èµ›ï¼Œæ˜¯ä¸è‡ªå·±çš„è¾ƒé‡ï¼šå’Œè¿‡å»çš„è®¤çŸ¥è¾ƒé‡ï¼Œå’Œç°åœ¨çš„æƒ°æ€§è¾ƒé‡ã€‚è¿™ç§â€œè‡ªå·±é€¼è‡ªå·±â€çš„æ„Ÿè§‰ï¼Œè¶Šå‘å¼ºçƒˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/694b43293d8f42e983755cf6870fc854~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649772&amp;x-signature=VG0RFqHu6PSbD3ueNm38xQjGSZw%3D" alt="" loading="lazy"/></p>
<p>è€å®¶çš„å¤§å±±</p>
<h4 data-id="heading-7"><strong>å…«ã€ç ´è§£ç„¦è™‘çš„å”¯ä¸€æ³•é—¨ï¼šç«‹å³è¡ŒåŠ¨</strong></h4>
<p>äº‹ä¸€å¤šï¼Œå°±æ˜“ç„¦è™‘ã€‚æˆ‘æœ€è¿‘æ‰å½»åº•é¢†æ‚Ÿï¼š<strong>ç„¦è™‘çš„æ ¹æºï¼Œå¾€å¾€æ˜¯â€œæœªå¼€å§‹â€</strong> ã€‚</p>
<p>æ¯”å¦‚ä¸€ä»¶å‘¨å››è¦äº¤å·®çš„äº‹ï¼Œå¦‚æœå‘¨ä¸€ä¸åŠ¨ï¼Œé‚£ä¹ˆç„¦è™‘æ„Ÿå°±ä¼šä»å‘¨ä¸€æŒç»­åˆ°å‘¨å››ã€‚å¦‚æœåœ¨å‘¨ä¸€å°±å…¨åŠ›å®Œæˆï¼Œé‚£ä¹ˆå‰©ä¸‹çš„ä¸‰å¤©å°±æ˜¯å®Œå…¨çš„è½»æ¾ã€‚</p>
<p><strong>æ‹–å»¶ä¼šæ”¾å¤§ç„¦è™‘ï¼Œè€Œè¡ŒåŠ¨æ˜¯å”¯ä¸€çš„è§£è¯ã€‚</strong> è¿™ä¹Ÿå¯ä»¥ç†è§£ä¸ºæœ€æœ´ç´ çš„â€œæ‰§è¡ŒåŠ›â€æˆ–â€œçŸ¥è¡Œåˆä¸€â€ã€‚äº‹åœ¨äººä¸ºï¼Œåšåˆ™å¿…è¾¾ã€‚</p>
<h4 data-id="heading-8"><strong>ä¹ã€æŒèˆµçš„å‹åŠ›ï¼šæ²¡æœ‰å›å¤´è·¯</strong></h4>
<p>å¸¦å›¢é˜Ÿåï¼Œæ‰çŸ¥â€œå¤§å¤´å…µâ€çš„å¹¸ç¦ã€‚å†™ä»£ç æ˜¯å¤šä¹ˆå•çº¯å¿«ä¹çš„äº‹ï¼Œåªéœ€è¦å¯¹ä»£ç è´Ÿè´£ã€‚</p>
<p>ä½†æˆ‘æ¸…æ¥šï¼Œ<strong>åªåšæ‰§è¡Œè€…ï¼Œå·²ä¸æ˜¯æˆ‘è¿™ä¸ªé˜¶æ®µçš„æœ€ä¼˜è§£ã€‚</strong> æˆ‘å¿…é¡»å­¦ä¹ æŒèˆµã€‚å‹åŠ›å½“ç„¶æ›´å¤§ï¼Œè¦é¢å¯¹æ— æ•°å·²çŸ¥å’ŒæœªçŸ¥çš„é—®é¢˜ã€‚ç¼ºä¹æ–¹æ³•è®ºï¼Œå°±åªèƒ½å¤šæ€»ç»“ã€å¤šå­¦ä¹ ã€‚<strong>åŸåœ°è¸æ­¥ï¼Œåœ¨ç®¡ç†å²—ä½ä¸Šæ„å‘³ç€å¿«é€Ÿå€’é€€ã€‚</strong></p>
<h4 data-id="heading-9"><strong>åã€ä¸€äº›æ¨¡ç³Šçš„ç›´è§‰ï¼Œå€¼å¾—è¢«é‡è§†</strong></h4>
<p>æˆ‘å¶å°”ä¼šæ•é”åœ°å¯Ÿè§‰åˆ°é¡¹ç›®ä¸­æŸäº›æ½œåœ¨é£é™©æˆ–æœºä¼šï¼Œä½†æœ‰æ—¶å› è§‰å¾—â€œä¸ä¸€å®šå‘ç”Ÿâ€æˆ–â€œä¸æ˜ç¡®â€è€Œæç½®ï¼Œæœ€ç»ˆé”™å¤±è‰¯æœºã€‚</p>
<p>è¿™æˆ–è®¸æ˜¯ä¸€ç§ç®¡ç†çš„â€œå¢¨è²å®šå¾‹â€ï¼š<strong>ä½ æ¨¡ç³Šæ‹…å¿§çš„åäº‹ï¼Œå¾€å¾€çœŸçš„ä¼šå‘ç”Ÿã€‚</strong> é‚£äº›éšçº¦çš„ç›´è§‰ï¼Œæˆ–è®¸æ˜¯åŸºäºç»éªŒçš„æ½œåœ¨åˆ¤æ–­ï¼Œå€¼å¾—è¢«æ›´è®¤çœŸåœ°å¯¹å¾…å’ŒéªŒè¯ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e22fee8fed5480082f6e445b5d7524e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649772&amp;x-signature=v%2FhRwN1Y7lTcHxTL4QEIPhTTbcY%3D" alt="" loading="lazy"/></p>
<p>å¤œæ™¯æ´ªå´–æ´ï¼Œå’ŒåŒäº‹ä¸‹ç­å»æ‹æ‘„çš„</p>
<h4 data-id="heading-10"><strong>å†™åœ¨æœ€åï¼šä¸€å¹´æ¥çš„è‡ªæˆ‘æ‰“ç ´</strong></h4>
<p>è¿™ä¸€å¹´ï¼Œæˆ‘ä¸»åŠ¨æ‰“ç ´äº†è®¸å¤šâ€œè‡ªæˆ‘è®¾é™â€ã€‚</p>
<p>æ¯”å¦‚ï¼Œæ›¾åšä¿¡è‡ªå·±â€œå†…å‘â€ï¼Œå› è€Œé€ƒé¿æ‰€æœ‰å…¬å¼€è¡¨è¾¾ã€‚åæ¥å‘ç°ï¼Œè¿™ä¸è¿‡æ˜¯è‡ªæˆ‘ç¦é”¢çš„å£³ã€‚<strong>äººçš„æ€§æ ¼æ˜¯æµåŠ¨çš„ï¼Œåˆ«ç”¨æ ‡ç­¾é”æ­»è‡ªå·±ã€‚</strong></p>
<p><strong>å‡ ä¸ªè®©æˆ‘å—ç”¨çš„ä¿¡å¿µï¼Œä¹Ÿåˆ†äº«ç»™ä½ ï¼š</strong></p>
<ol>
<li>ä¸–ç•Œæ˜¯ä¸ªâ€œå·¨å¤§çš„è‰å°ç­å­â€ï¼Œå‹‡æ•¢ä¸€ç‚¹ã€‚</li>
<li>ç»å¸¸é—®è‡ªå·±ï¼šâ€œä½ è¦æ˜¯ä¸è¡Œï¼Œè°è¿˜è¡Œï¼Ÿâ€</li>
<li><strong>å°±äº‹è®ºäº‹ï¼Œå¯¹äº‹ä¸å¯¹äººã€‚</strong> è¿™æ˜¯è®©è‡ªå·±æƒ…ç»ªç¨³å®šã€ä¸“ä¸šé«˜æ•ˆçš„é‡è¦æ³•åˆ™ã€‚</li>
</ol>
<p>å¦‚æœæ—©äº›æ‡‚å¾—è¿™äº›ï¼Œæˆ‘çš„èŒä¸šè·¯å¾„æˆ–è®¸ä¼šæ›´å¼€é˜”ã€‚</p>
<p><strong>æ—¢å¾€ä¸æ‹ï¼Œå½“ä¸‹ä¸æ‚ï¼Œæœªæ¥ä¸è¿ã€‚</strong></p>
<p>å†™ä¸‹è¿™äº›ï¼Œä½œä¸ºä¸€å‘¨å¹´çš„çºªå¿µã€‚å·¥ä½œè¿‘åå¹´ï¼Œè¶Šå‘æ„Ÿåˆ°ï¼š<strong>ä¸å…¶è¢«äººæ¨ç€èµ°ï¼Œä¸å¦‚è‡ªå·±æŒå¥½èˆµã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de35999a94a8410ab5198c9108624621~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdXpvbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765649772&amp;x-signature=n9fxYTpIa6y3uNlzW%2FDVnXdQ52I%3D" alt="" loading="lazy"/></p>
<p>é‡åº†å¤œæ™¯è¿˜æ˜¯å¾ˆæ¼‚äº®ï¼Œçƒ­çˆ±å·¥ä½œçƒ­çˆ±ç”Ÿæ´»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é•¿æ—¶é—´è¿è¡Œ agents çš„æœ‰æ•ˆ harness]]></title>    <link>https://juejin.cn/post/7580312375372218408</link>    <guid>https://juejin.cn/post/7580312375372218408</guid>    <pubDate>2025-12-06T17:15:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580312375372218408" data-draft-id="7580278296837914658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é•¿æ—¶é—´è¿è¡Œ agents çš„æœ‰æ•ˆ harness"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2025-12-06T17:15:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é•¿æ—¶é—´è¿è¡Œ agents çš„æœ‰æ•ˆ harness
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T17:15:27.000Z" title="Sat Dec 06 2025 17:15:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Feffective-harnesses-for-long-running-agents" target="_blank" title="https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<blockquote>
<p>HarnessåŸæ„æ˜¯é©¬å…·ï¼Œä»é©¬å…·æ§åˆ¶é©¬åŒ¹ï¼Œå¼•ç”³ä¸ºä¸€ä¸ªæ§åˆ¶å’Œç®¡ç†æ¡†æ¶ï¼Œç”¨äºå°è£…ã€å¼•å¯¼å’Œç›‘ç£AIä»£ç†çš„è¡Œä¸ºã€‚åæ–‡ä¸ºäº†ä¿æŒåŸæ„ï¼Œä½œä¸ºä¸“æœ‰åè¯ä¸ç¿»è¯‘äº†ã€‚</p>
</blockquote>
<p>éšç€ AI agents å˜å¾—æ›´åŠ å¼ºå¤§ï¼Œå¼€å‘è€…è¶Šæ¥è¶Šå¤šåœ°è¦æ±‚å®ƒä»¬æ‰¿æ‹…éœ€è¦è·¨è¶Šæ•°å°æ—¶ç”šè‡³æ•°å¤©å·¥ä½œçš„å¤æ‚ä»»åŠ¡ã€‚ç„¶è€Œï¼Œè®© agents åœ¨å¤šä¸ªä¸Šä¸‹æ–‡çª—å£ä¸­ä¿æŒä¸€è‡´çš„è¿›å±•ä»ç„¶æ˜¯ä¸€ä¸ªæ‚¬è€Œæœªå†³çš„é—®é¢˜ã€‚</p>
<p>é•¿æ—¶é—´è¿è¡Œ agents çš„æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºï¼Œå®ƒä»¬å¿…é¡»åœ¨ç¦»æ•£çš„ä¼šè¯ä¸­å·¥ä½œï¼Œè€Œæ¯ä¸ªæ–°ä¼šè¯å¼€å§‹æ—¶å¯¹ä¹‹å‰å‘ç”Ÿçš„äº‹æƒ…æ²¡æœ‰ä»»ä½•è®°å¿†ã€‚æƒ³è±¡ä¸€ä¸ªç”±è½®ç­å·¥ç¨‹å¸ˆç»„æˆçš„è½¯ä»¶é¡¹ç›®ï¼Œæ¯ä¸ªæ–°æ¥çš„å·¥ç¨‹å¸ˆå¯¹ä¸Šä¸€ä¸ªç­æ¬¡å‘ç”Ÿçš„äº‹æƒ…æ¯«æ— è®°å¿†ã€‚ç”±äºä¸Šä¸‹æ–‡çª—å£æœ‰é™ï¼Œä¸”å¤§å¤šæ•°å¤æ‚é¡¹ç›®æ— æ³•åœ¨å•ä¸ªçª—å£å†…å®Œæˆï¼Œagents éœ€è¦ä¸€ç§æ–¹æ³•æ¥å¼¥åˆç¼–ç ä¼šè¯ä¹‹é—´çš„å·®è·ã€‚</p>
<p>æˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªåŒé‡è§£å†³æ–¹æ¡ˆï¼Œä½¿ Claude Agent SDK èƒ½å¤Ÿåœ¨è®¸å¤šä¸Šä¸‹æ–‡çª—å£ä¸­æœ‰æ•ˆå·¥ä½œï¼šä¸€ä¸ª<strong>initializer agent</strong>ï¼ˆåˆå§‹åŒ– agentï¼‰åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶è®¾ç½®ç¯å¢ƒï¼Œä»¥åŠä¸€ä¸ª<strong>coding agent</strong>ï¼ˆç¼–ç  agentï¼‰åœ¨æ¯ä¸ªä¼šè¯ä¸­å–å¾—å¢é‡è¿›å±•ï¼ŒåŒæ—¶ä¸ºä¸‹ä¸€ä¸ªä¼šè¯ç•™ä¸‹æ¸…æ™°çš„å·¥ä»¶ã€‚æ‚¨å¯ä»¥åœ¨é™„å¸¦çš„å¿«é€Ÿå…¥é—¨æŒ‡å—ä¸­æ‰¾åˆ°ä»£ç ç¤ºä¾‹ã€‚</p>
<h2 data-id="heading-0">é•¿æ—¶é—´è¿è¡Œ agent çš„é—®é¢˜</h2>
<p>Claude Agent SDK æ˜¯ä¸€ä¸ªå¼ºå¤§ã€é€šç”¨çš„ agent harnessï¼Œä¸ä»…æ“…é•¿ç¼–ç ï¼Œè¿˜æ“…é•¿å…¶ä»–éœ€è¦æ¨¡å‹ä½¿ç”¨å·¥å…·æ¥æ”¶é›†ä¸Šä¸‹æ–‡ã€è§„åˆ’å’Œæ‰§è¡Œçš„ä»»åŠ¡ã€‚å®ƒå…·å¤‡ä¸Šä¸‹æ–‡ç®¡ç†åŠŸèƒ½ï¼Œå¦‚å‹ç¼©ï¼ˆcompactionï¼‰ï¼Œè¿™ä½¿å¾— agent èƒ½å¤Ÿåœ¨ä¸è€—å°½ä¸Šä¸‹æ–‡çª—å£çš„æƒ…å†µä¸‹ç»§ç»­å·¥ä½œã€‚ç†è®ºä¸Šï¼Œåœ¨è¿™ç§è®¾ç½®ä¸‹ï¼Œagent åº”è¯¥èƒ½å¤ŸæŒç»­è¿›è¡Œæœ‰ç”¨çš„å·¥ä½œï¼Œæ—¶é—´å¯é•¿è¾¾ä»»æ„ç¨‹åº¦ã€‚</p>
<p>ç„¶è€Œï¼Œä»…é å‹ç¼©æ˜¯ä¸å¤Ÿçš„ã€‚å¼€ç®±å³ç”¨çš„æƒ…å†µä¸‹ï¼Œå³ä½¿æ˜¯åƒ Opus 4.5 è¿™æ ·çš„å‰æ²¿ç¼–ç æ¨¡å‹ï¼Œåœ¨ Claude Agent SDK ä¸Šè·¨å¤šä¸ªä¸Šä¸‹æ–‡çª—å£å¾ªç¯è¿è¡Œæ—¶ï¼Œå¦‚æœåªç»™å®ƒä¸€ä¸ªé«˜çº§æç¤ºï¼Œå¦‚"æ„å»ºä¸€ä¸ª claude.ai çš„å…‹éš†ç‰ˆ"ï¼Œä¹Ÿæ— æ³•æ„å»ºå‡ºç”Ÿäº§è´¨é‡çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚</p>
<p>Claude çš„å¤±è´¥è¡¨ç°ä¸ºä¸¤ç§æ¨¡å¼ã€‚é¦–å…ˆï¼Œagent å€¾å‘äºä¸€æ¬¡æ€§åšå¤ªå¤šäº‹æƒ…â€”â€”æœ¬è´¨ä¸Šæ˜¯è¯•å›¾ä¸€ä¸¾å®Œæˆæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚è¿™å¾€å¾€å¯¼è‡´æ¨¡å‹åœ¨å®ç°è¿‡ç¨‹ä¸­è€—å°½ä¸Šä¸‹æ–‡ï¼Œç•™ç»™ä¸‹ä¸€ä¸ªä¼šè¯ä¸€ä¸ªåŠŸèƒ½åŠå®ç°ä¸”æœªè®°å½•çš„æ··ä¹±çŠ¶æ€ã€‚ç„¶åï¼Œagent å¿…é¡»çŒœæµ‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå¹¶èŠ±è´¹å¤§é‡æ—¶é—´è¯•å›¾è®©åŸºæœ¬åº”ç”¨ç¨‹åºé‡æ–°è¿è¡Œã€‚å³ä½¿æœ‰å‹ç¼©åŠŸèƒ½ï¼Œè¿™ç§æƒ…å†µä¾ç„¶ä¼šå‘ç”Ÿï¼Œå› ä¸ºå‹ç¼©å¹¶ä¸æ€»æ˜¯èƒ½å‘ä¸‹ä¸€ä¸ª agent ä¼ é€’å®Œå…¨æ¸…æ™°çš„æŒ‡ä»¤ã€‚</p>
<p>ç¬¬äºŒç§å¤±è´¥æ¨¡å¼é€šå¸¸åœ¨é¡¹ç›®åæœŸå‡ºç°ã€‚åœ¨å·²ç»æ„å»ºäº†ä¸€äº›åŠŸèƒ½åï¼Œåç»­çš„ agent å®ä¾‹ä¼šç¯é¡¾å››å‘¨ï¼Œçœ‹åˆ°å·²ç»å–å¾—äº†è¿›å±•ï¼Œå°±è‰ç‡åœ°å®£å¸ƒä»»åŠ¡å®Œæˆã€‚</p>
<p>è¿™æŠŠé—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªåˆå§‹ç¯å¢ƒï¼Œä¸ºç»™å®šæç¤ºæ‰€éœ€çš„<strong>æ‰€æœ‰</strong>åŠŸèƒ½å¥ å®šåŸºç¡€ï¼Œè¿™ä¸º agent é€æ­¥ã€é€ä¸ªåŠŸèƒ½åœ°å·¥ä½œåšå¥½äº†å‡†å¤‡ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬åº”è¯¥æç¤ºæ¯ä¸ª agent æœç€å…¶ç›®æ ‡å–å¾—å¢é‡è¿›å±•ï¼ŒåŒæ—¶åœ¨ä¼šè¯ç»“æŸæ—¶å°†ç¯å¢ƒä¿æŒåœ¨å¹²å‡€çŠ¶æ€ã€‚æ‰€è°“"å¹²å‡€çŠ¶æ€"ï¼Œæˆ‘ä»¬æŒ‡çš„æ˜¯é€‚åˆåˆå¹¶åˆ°ä¸»åˆ†æ”¯çš„ä»£ç ï¼šæ²¡æœ‰é‡å¤§é”™è¯¯ï¼Œä»£ç æœ‰åºä¸”æ–‡æ¡£å®Œå–„ï¼Œæ€»ä½“ä¸Šï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾å¼€å§‹æ–°åŠŸèƒ½çš„å·¥ä½œï¼Œè€Œæ— éœ€å…ˆæ¸…ç†æ— å…³çš„é—ç•™é—®é¢˜ã€‚</p>
<p>åœ¨å†…éƒ¨å®éªŒæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤éƒ¨åˆ†è§£å†³æ–¹æ¡ˆè§£å†³äº†è¿™äº›é—®é¢˜ï¼š</p>
<ol>
<li><strong>Initializer agent</strong>ï¼šç¬¬ä¸€ä¸ª agent ä¼šè¯ä½¿ç”¨ä¸“é—¨çš„æç¤ºï¼Œè¦æ±‚æ¨¡å‹è®¾ç½®åˆå§‹ç¯å¢ƒï¼šä¸€ä¸ª <code>init.sh</code> è„šæœ¬ã€ä¸€ä¸ªè®°å½• agents æ‰€åšå·¥ä½œçš„ claude-progress.txt æ–‡ä»¶ï¼Œä»¥åŠä¸€ä¸ªæ˜¾ç¤ºæ·»åŠ äº†ä»€ä¹ˆæ–‡ä»¶çš„åˆå§‹ git æäº¤ã€‚</li>
<li><strong>Coding agent</strong>ï¼šæ¯ä¸ªåç»­ä¼šè¯è¦æ±‚æ¨¡å‹å–å¾—å¢é‡è¿›å±•ï¼Œç„¶åç•™ä¸‹ç»“æ„åŒ–æ›´æ–°ã€‚</li>
</ol>
<p>è¿™é‡Œçš„å…³é”®æ´å¯Ÿåœ¨äºæ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œè®© agents åœ¨ä»å¤´å¼€å§‹çš„ä¸Šä¸‹æ–‡çª—å£ä¸­èƒ½å¤Ÿå¿«é€Ÿç†è§£å·¥ä½œçŠ¶æ€ï¼Œè¿™é€šè¿‡ claude-progress.txt æ–‡ä»¶ä¸ git å†å²è®°å½•é…åˆå®ç°ã€‚è¿™äº›å®è·µçš„çµæ„Ÿæ¥æºäºäº†è§£ä¼˜ç§€è½¯ä»¶å·¥ç¨‹å¸ˆçš„æ—¥å¸¸å·¥ä½œä¹ æƒ¯ã€‚</p>
<h2 data-id="heading-1">ç¯å¢ƒç®¡ç†</h2>
<p>åœ¨æ›´æ–°çš„ Claude 4 æç¤ºæŒ‡å—ä¸­ï¼Œæˆ‘ä»¬åˆ†äº«äº†ä¸€äº›å¤šä¸Šä¸‹æ–‡çª—å£å·¥ä½œæµç¨‹çš„æœ€ä½³å®è·µï¼ŒåŒ…æ‹¬ä¸€ä¸ªä½¿ç”¨"å¯¹ç¬¬ä¸€ä¸ªä¸Šä¸‹æ–‡çª—å£ä½¿ç”¨ä¸åŒæç¤º"çš„ harness ç»“æ„ã€‚è¿™ä¸ª"ä¸åŒæç¤º"è¦æ±‚ initializer agent è®¾ç½®ç¯å¢ƒï¼ŒåŒ…å«æœªæ¥ coding agents æœ‰æ•ˆå·¥ä½œæ‰€éœ€çš„æ‰€æœ‰å¿…è¦ä¸Šä¸‹æ–‡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨è¿™ç§ç¯å¢ƒçš„ä¸€äº›å…³é”®ç»„ä»¶ã€‚</p>
<h3 data-id="heading-2">åŠŸèƒ½åˆ—è¡¨</h3>
<p>ä¸ºäº†è§£å†³ agent è¯•å›¾ä¸€æ¬¡æ€§å®Œæˆåº”ç”¨ç¨‹åºæˆ–è¿‡æ—©è®¤ä¸ºé¡¹ç›®å®Œæˆçš„é—®é¢˜ï¼Œæˆ‘ä»¬æç¤º initializer agent ç¼–å†™ä¸€ä¸ªå…¨é¢çš„åŠŸèƒ½éœ€æ±‚æ–‡ä»¶ï¼Œæ‰©å±•ç”¨æˆ·çš„åˆå§‹æç¤ºã€‚åœ¨ claude.ai å…‹éš†ç¤ºä¾‹ä¸­ï¼Œè¿™æ„å‘³ç€è¶…è¿‡ 200 ä¸ªåŠŸèƒ½ï¼Œå¦‚"ç”¨æˆ·å¯ä»¥æ‰“å¼€æ–°èŠå¤©ã€è¾“å…¥æŸ¥è¯¢ã€æŒ‰å›è½¦é”®å¹¶çœ‹åˆ° AI å“åº”"ã€‚è¿™äº›åŠŸèƒ½æœ€åˆéƒ½æ ‡è®°ä¸º"å¤±è´¥"ï¼Œä»¥ä¾¿åç»­çš„ coding agents èƒ½å¤Ÿæ¸…æ¥šåœ°äº†è§£å®Œæ•´åŠŸèƒ½åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"functional"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"New chat button creates a fresh conversation"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"steps"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"Navigate to main interface"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"Click the 'New Chat' button"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"Verify a new conversation is created"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"Check that chat area shows welcome state"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"Verify conversation appears in sidebar"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"passes"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
  <span class="hljs-punctuation">}</span>
</code></pre>
<p>æˆ‘ä»¬æç¤º coding agents ä»…é€šè¿‡æ›´æ”¹ <code>passes</code> å­—æ®µçš„çŠ¶æ€æ¥ç¼–è¾‘æ­¤æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨æªè¾å¼ºçƒˆçš„æŒ‡ä»¤ï¼Œå¦‚"åˆ é™¤æˆ–ç¼–è¾‘æµ‹è¯•æ˜¯ä¸å¯æ¥å—çš„ï¼Œå› ä¸ºè¿™å¯èƒ½å¯¼è‡´åŠŸèƒ½ç¼ºå¤±æˆ–é”™è¯¯"ã€‚ç»è¿‡ä¸€äº›å®éªŒï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ JSON æ ¼å¼ï¼Œå› ä¸ºä¸ Markdown æ–‡ä»¶ç›¸æ¯”ï¼Œæ¨¡å‹ä¸å¤ªå¯èƒ½ä¸å½“æ›´æ”¹æˆ–è¦†ç›– JSON æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-3">å¢é‡è¿›å±•</h3>
<p>åŸºäºè¿™ç§åˆå§‹ç¯å¢ƒè„šæ‰‹æ¶ï¼Œcoding agent çš„åç»­è¿­ä»£è¢«è¦æ±‚ä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªåŠŸèƒ½ã€‚è¿™ç§å¢é‡æ–¹æ³•è¢«è¯æ˜æ˜¯è§£å†³ agent å€¾å‘äºä¸€æ¬¡æ€§åšå¤ªå¤šé—®é¢˜çš„å…³é”®ã€‚</p>
<p>ä¸€æ—¦å¼€å§‹å¢é‡å·¥ä½œï¼Œæ¨¡å‹åœ¨è¿›è¡Œä»£ç æ›´æ”¹åä»éœ€è¦å°†ç¯å¢ƒä¿æŒåœ¨å¹²å‡€çŠ¶æ€ï¼Œè¿™ä¸€ç‚¹ä»ç„¶è‡³å…³é‡è¦ã€‚åœ¨æˆ‘ä»¬çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬å‘ç°å¼•å‘è¿™ç§è¡Œä¸ºçš„æœ€æœ‰æ•ˆæ–¹å¼æ˜¯è¦æ±‚æ¨¡å‹å°†å…¶è¿›å±•ä»¥æè¿°æ€§çš„æäº¤æ¶ˆæ¯æäº¤åˆ° gitï¼Œå¹¶åœ¨è¿›åº¦æ–‡ä»¶ä¸­å†™ä¸‹å·¥ä½œæ‘˜è¦ã€‚è¿™ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿä½¿ç”¨ git æ¥æ¢å¤é”™è¯¯çš„ä»£ç æ›´æ”¹å¹¶æ¢å¤ä»£ç åº“çš„å·¥ä½œçŠ¶æ€ã€‚</p>
<p>è¿™äº›æ–¹æ³•è¿˜æé«˜äº†æ•ˆç‡ï¼Œå› ä¸ºå®ƒä»¬æ¶ˆé™¤äº† agent çŒœæµ‹å‘ç”Ÿäº†ä»€ä¹ˆå¹¶èŠ±è´¹æ—¶é—´è¯•å›¾è®©åŸºæœ¬åº”ç”¨ç¨‹åºé‡æ–°è¿è¡Œçš„éœ€è¦ã€‚</p>
<h3 data-id="heading-4">æµ‹è¯•</h3>
<p>æˆ‘ä»¬è§‚å¯Ÿåˆ°çš„æœ€åä¸€ä¸ªä¸»è¦å¤±è´¥æ¨¡å¼æ˜¯ Claude åœ¨æ²¡æœ‰é€‚å½“æµ‹è¯•çš„æƒ…å†µä¸‹å°±å°†åŠŸèƒ½æ ‡è®°ä¸ºå®Œæˆçš„å€¾å‘ã€‚åœ¨æ²¡æœ‰æ˜ç¡®æç¤ºçš„æƒ…å†µä¸‹ï¼ŒClaude å€¾å‘äºè¿›è¡Œä»£ç æ›´æ”¹ï¼Œç”šè‡³é€šè¿‡å•å…ƒæµ‹è¯•æˆ–é’ˆå¯¹å¼€å‘æœåŠ¡å™¨çš„ <code>curl</code> å‘½ä»¤è¿›è¡Œæµ‹è¯•ï¼Œä½†æœªèƒ½è¯†åˆ«åŠŸèƒ½ç«¯åˆ°ç«¯ä¸å·¥ä½œçš„é—®é¢˜ã€‚</p>
<p>åœ¨æ„å»ºç½‘ç»œåº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹ï¼Œä¸€æ—¦æ˜ç¡®æç¤ºä½¿ç”¨æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·å¹¶åƒäººç±»ç”¨æˆ·ä¸€æ ·è¿›è¡Œæ‰€æœ‰æµ‹è¯•ï¼ŒClaude åœ¨ç«¯åˆ°ç«¯éªŒè¯åŠŸèƒ½æ–¹é¢è¡¨ç°è‰¯å¥½ã€‚</p>
<p><img src="https://www.anthropic.com/_next/image?url=https%3A%2F%2Fwww-cdn.anthropic.com%2Fimages%2F4zrzovbb%2Fwebsite%2Ff94c2257964fb2d623f1e81f874977ebfc0986bc-1920x1080.gif&amp;w=3840&amp;q=75" alt="" loading="lazy"/></p>
<p>Claude é€šè¿‡ Puppeteer MCP æœåŠ¡å™¨æµ‹è¯• claude.ai å…‹éš†æ—¶æ‹æ‘„çš„æˆªå›¾ã€‚</p>
<p>ä¸º Claude æä¾›è¿™äº›ç±»å‹çš„æµ‹è¯•å·¥å…·æ˜¾è‘—æé«˜äº†æ€§èƒ½ï¼Œå› ä¸º agent èƒ½å¤Ÿè¯†åˆ«å¹¶ä¿®å¤ä»ä»£ç æœ¬èº«çœ‹ä¸å‡ºçš„é”™è¯¯ã€‚</p>
<p>ä»ç„¶å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ Claude è§†è§‰èƒ½åŠ›å’Œæµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·çš„å±€é™æ€§ï¼Œä½¿å…¶éš¾ä»¥è¯†åˆ«æ¯ç§ç±»å‹çš„é”™è¯¯ã€‚ä¾‹å¦‚ï¼ŒClaude æ— æ³•é€šè¿‡ Puppeteer MCP çœ‹åˆ°æµè§ˆå™¨åŸç”Ÿçš„è­¦å‘Šæ¨¡æ€æ¡†ï¼Œä¾èµ–è¿™äº›æ¨¡æ€æ¡†çš„åŠŸèƒ½å› æ­¤å¾€å¾€å­˜åœ¨æ›´å¤šé”™è¯¯ã€‚</p>
<h2 data-id="heading-5">å¿«é€Ÿäº†è§£æƒ…å†µ</h2>
<p>æœ‰äº†ä»¥ä¸Šæ‰€æœ‰è®¾ç½®ï¼Œæ¯ä¸ª coding agent éƒ½è¢«æç¤ºè¿è¡Œä¸€ç³»åˆ—æ­¥éª¤æ¥äº†è§£æƒ…å†µï¼Œæœ‰äº›æ­¥éª¤ç›¸å½“åŸºæœ¬ä½†ä»ç„¶æœ‰å¸®åŠ©ï¼š</p>
<ol>
<li><strong>è¿è¡Œ <code>pwd</code> æŸ¥çœ‹æ‚¨æ­£åœ¨å·¥ä½œçš„ç›®å½•ã€‚æ‚¨åªèƒ½ç¼–è¾‘æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚</strong></li>
<li><strong>é˜…è¯» git æ—¥å¿—å’Œè¿›åº¦æ–‡ä»¶ï¼Œä»¥äº†è§£æœ€è¿‘çš„å·¥ä½œè¿›å±•ã€‚</strong></li>
<li><strong>é˜…è¯»åŠŸèƒ½åˆ—è¡¨æ–‡ä»¶ï¼Œé€‰æ‹©å°šæœªå®Œæˆçš„æœ€é«˜ä¼˜å…ˆçº§åŠŸèƒ½æ¥å¤„ç†ã€‚</strong></li>
</ol>
<p>è¿™ç§æ–¹æ³•ä¸º Claude åœ¨æ¯ä¸ªä¼šè¯ä¸­èŠ‚çœäº†ä¸€äº›ä»¤ç‰Œï¼Œå› ä¸ºå®ƒä¸å¿…é‡æ–°æ‘¸ç´¢å¦‚ä½•æµ‹è¯•ä»£ç ã€‚è¿˜æœ‰åŠ©äºè¦æ±‚ initializer agent ç¼–å†™ä¸€ä¸ªå¯ä»¥è¿è¡Œå¼€å‘æœåŠ¡å™¨çš„ <code>init.sh</code> è„šæœ¬ï¼Œç„¶ååœ¨å®ç°æ–°åŠŸèƒ½ä¹‹å‰è¿è¡ŒåŸºæœ¬çš„ç«¯åˆ°ç«¯æµ‹è¯•ã€‚</p>
<p>åœ¨ claude.ai å…‹éš†çš„æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€ agent æ€»æ˜¯å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨å¹¶ä½¿ç”¨ Puppeteer MCP å¼€å§‹æ–°èŠå¤©ã€å‘é€æ¶ˆæ¯å¹¶æ¥æ”¶å“åº”ã€‚è¿™ç¡®ä¿äº† Claude èƒ½å¤Ÿå¿«é€Ÿè¯†åˆ«åº”ç”¨ç¨‹åºæ˜¯å¦å¤„äºæŸåçŠ¶æ€ï¼Œå¹¶ç«‹å³ä¿®å¤ä»»ä½•ç°æœ‰é”™è¯¯ã€‚å¦‚æœ agent åè€Œå¼€å§‹å®ç°æ–°åŠŸèƒ½ï¼Œå¾ˆå¯èƒ½ä¼šä½¿é—®é¢˜æ¶åŒ–ã€‚</p>
<p>è€ƒè™‘åˆ°æ‰€æœ‰è¿™äº›ï¼Œå…¸å‹çš„ä¼šè¯ä»¥ä»¥ä¸‹åŠ©æ‰‹æ¶ˆæ¯å¼€å§‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Assistant</span>] æˆ‘å°†é¦–å…ˆäº†è§£æƒ…å†µå¹¶ç†è§£é¡¹ç›®çš„å½“å‰çŠ¶æ€ã€‚
[<span class="hljs-meta">Tool Use</span>] &lt;bash - pwd&gt;
[<span class="hljs-meta">Tool Use</span>] &lt;read - claude-progress.txt&gt;
[<span class="hljs-meta">Tool Use</span>] &lt;read - feature_list.json&gt;
[<span class="hljs-meta">Assistant</span>] è®©æˆ‘æ£€æŸ¥ git æ—¥å¿—ä»¥æŸ¥çœ‹æœ€è¿‘çš„å·¥ä½œã€‚
[<span class="hljs-meta">Tool Use</span>] &lt;bash - git log --oneline <span class="hljs-number">-20</span>&gt;
[<span class="hljs-meta">Assistant</span>] ç°åœ¨è®©æˆ‘æ£€æŸ¥æ˜¯å¦æœ‰ <span class="hljs-keyword">init</span>.sh è„šæœ¬æ¥é‡å¯æœåŠ¡å™¨ã€‚
&lt;Starts the development server&gt;
[<span class="hljs-meta">Assistant</span>] å¤ªå¥½äº†ï¼ç°åœ¨è®©æˆ‘å¯¼èˆªåˆ°åº”ç”¨ç¨‹åºå¹¶éªŒè¯ä¸€äº›åŸºæœ¬åŠŸèƒ½æ˜¯å¦ä»åœ¨å·¥ä½œã€‚
&lt;Tests basic functionality&gt;
[<span class="hljs-meta">Assistant</span>] åŸºäºæˆ‘çš„éªŒè¯æµ‹è¯•ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°åŸºæœ¬åŠŸèƒ½è¿è¡Œè‰¯å¥½ã€‚æ ¸å¿ƒèŠå¤©åŠŸèƒ½ã€ä¸»é¢˜åˆ‡æ¢ã€ä¼šè¯åŠ è½½å’Œé”™è¯¯å¤„ç†éƒ½æ­£å¸¸å·¥ä½œã€‚ç°åœ¨è®©æˆ‘æ›´å…¨é¢åœ°æŸ¥çœ‹ tests.json æ–‡ä»¶ï¼Œä»¥äº†è§£æ¥ä¸‹æ¥éœ€è¦å®ç°ä»€ä¹ˆã€‚
&lt;Starts work <span class="hljs-keyword">on</span> a <span class="hljs-keyword">new</span> feature&gt;
</code></pre>
<h3 data-id="heading-6">Agent å¤±è´¥æ¨¡å¼å’Œè§£å†³æ–¹æ¡ˆ</h3>






























<table><thead><tr><th><strong>é—®é¢˜</strong></th><th><strong>Initializer Agent è¡Œä¸º</strong></th><th><strong>Coding Agent è¡Œä¸º</strong></th></tr></thead><tbody><tr><td>Claude è¿‡æ—©å®£å¸ƒæ•´ä¸ªé¡¹ç›®èƒœåˆ©ã€‚</td><td>è®¾ç½®åŠŸèƒ½åˆ—è¡¨æ–‡ä»¶ï¼šåŸºäºè¾“å…¥è§„èŒƒï¼Œå»ºç«‹ä¸€ä¸ªåŒ…å«ç«¯åˆ°ç«¯åŠŸèƒ½æè¿°åˆ—è¡¨çš„ç»“æ„åŒ– JSON æ–‡ä»¶ã€‚</td><td>åœ¨ä¼šè¯å¼€å§‹æ—¶é˜…è¯»åŠŸèƒ½åˆ—è¡¨æ–‡ä»¶ã€‚é€‰æ‹©å•ä¸ªåŠŸèƒ½å¼€å§‹å¤„ç†ã€‚</td></tr><tr><td>Claude å°†ç¯å¢ƒç•™åœ¨æœ‰é”™è¯¯æˆ–æœªè®°å½•è¿›å±•çš„çŠ¶æ€ã€‚</td><td>ç¼–å†™ä¸€ä¸ªåˆå§‹ git ä»“åº“å’Œè¿›åº¦ç¬”è®°æ–‡ä»¶ã€‚</td><td>åœ¨ä¼šè¯å¼€å§‹æ—¶é˜…è¯»è¿›åº¦ç¬”è®°æ–‡ä»¶å’Œ git æäº¤æ—¥å¿—ï¼Œå¹¶åœ¨å¼€å‘æœåŠ¡å™¨ä¸Šè¿è¡ŒåŸºæœ¬æµ‹è¯•ä»¥æ•è·ä»»ä½•æœªè®°å½•çš„é”™è¯¯ã€‚åœ¨ä¼šè¯ç»“æŸæ—¶ç¼–å†™ git æäº¤å’Œè¿›åº¦æ›´æ–°ã€‚</td></tr><tr><td>Claude è¿‡æ—©å°†åŠŸèƒ½æ ‡è®°ä¸ºå®Œæˆã€‚</td><td>è®¾ç½®åŠŸèƒ½åˆ—è¡¨æ–‡ä»¶ã€‚</td><td>è‡ªæˆ‘éªŒè¯æ‰€æœ‰åŠŸèƒ½ã€‚åªæœ‰åœ¨ä»”ç»†æµ‹è¯•åæ‰å°†åŠŸèƒ½æ ‡è®°ä¸º"é€šè¿‡"ã€‚</td></tr><tr><td>Claude å¿…é¡»èŠ±æ—¶é—´å¼„æ¸…æ¥šå¦‚ä½•è¿è¡Œåº”ç”¨ç¨‹åºã€‚</td><td>ç¼–å†™ä¸€ä¸ªå¯ä»¥è¿è¡Œå¼€å‘æœåŠ¡å™¨çš„ <code>init.sh</code> è„šæœ¬ã€‚</td><td>åœ¨ä¼šè¯å¼€å§‹æ—¶é˜…è¯» <code>init.sh</code>ã€‚</td></tr></tbody></table>
<p>æ€»ç»“äº†é•¿æ—¶é—´è¿è¡Œ AI agents ä¸­å››ç§å¸¸è§å¤±è´¥æ¨¡å¼å’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-7">æœªæ¥å·¥ä½œ</h2>
<p>è¿™é¡¹ç ”ç©¶å±•ç¤ºäº†åœ¨é•¿æ—¶é—´è¿è¡Œ agent harness ä¸­ä¸€å¥—å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿåœ¨è®¸å¤šä¸Šä¸‹æ–‡çª—å£ä¸­å–å¾—å¢é‡è¿›å±•ã€‚ç„¶è€Œï¼Œä»ç„¶å­˜åœ¨æœªè§£å†³çš„é—®é¢˜ã€‚</p>
<p>æœ€å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç›®å‰ä»ä¸æ¸…æ¥šå•ä¸€çš„é€šç”¨ coding agent æ˜¯å¦åœ¨æ‰€æœ‰ä¸Šä¸‹æ–‡ä¸­è¡¨ç°æœ€ä½³ï¼Œæˆ–è€…æ˜¯å¦å¯ä»¥é€šè¿‡å¤š agent æ¶æ„è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚çœ‹èµ·æ¥åˆç†çš„æƒ³æ³•æ˜¯ï¼Œä¸“é—¨çš„ agentsï¼Œå¦‚æµ‹è¯• agentã€è´¨é‡ä¿è¯ agent æˆ–ä»£ç æ¸…ç† agentï¼Œå¯ä»¥åœ¨è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„å­ä»»åŠ¡ä¸Šåšå¾—æ›´å¥½ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿™ä¸ªæ¼”ç¤ºé’ˆå¯¹å…¨æ ˆç½‘ç»œåº”ç”¨ç¨‹åºå¼€å‘è¿›è¡Œäº†ä¼˜åŒ–ã€‚æœªæ¥çš„ä¸€ä¸ªæ–¹å‘æ˜¯å°†è¿™äº›å‘ç°æ¨å¹¿åˆ°å…¶ä»–é¢†åŸŸã€‚è¿™äº›æ•™è®­ä¸­çš„ä¸€äº›æˆ–å…¨éƒ¨å¾ˆå¯èƒ½å¯ä»¥åº”ç”¨äºï¼Œä¾‹å¦‚ï¼Œç§‘å­¦ç ”ç©¶æˆ–é‡‘èå»ºæ¨¡ä¸­éœ€è¦çš„é•¿æ—¶é—´è¿è¡Œ agent ä»»åŠ¡ç±»å‹ã€‚</p>
<h3 data-id="heading-8">è‡´è°¢</h3>
<p>ç”± Justin Young æ’°å†™ã€‚ç‰¹åˆ«æ„Ÿè°¢ David Hersheyã€Prithvi Rajasakeranã€Jeremy Hadfieldã€Naia Bouscalã€Michael Tingleyã€Jesse Muã€Jake Eatonã€Marius Buleandaraã€Maggie Voã€Pedram Navidã€Nadine Yasser å’Œ Alex Notov çš„è´¡çŒ®ã€‚</p>
<p>è¿™é¡¹å·¥ä½œåæ˜ äº† Anthropic å¤šä¸ªå›¢é˜Ÿçš„é›†ä½“åŠªåŠ›ï¼Œè¿™äº›å›¢é˜Ÿä½¿ Claude èƒ½å¤Ÿå®‰å…¨åœ°è¿›è¡Œé•¿æ—¶ç¨‹è‡ªä¸»è½¯ä»¶å·¥ç¨‹ï¼Œç‰¹åˆ«æ˜¯ä»£ç  RL å’Œ Claude Code å›¢é˜Ÿã€‚æ¬¢è¿æœ‰å…´è¶£åšå‡ºè´¡çŒ®çš„å€™é€‰äººç”³è¯· anthropic.com/careersã€‚</p>
<h3 data-id="heading-9">è„šæ³¨</h3>
<ol>
<li>æˆ‘ä»¬åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­ç§°å®ƒä»¬ä¸ºç‹¬ç«‹çš„ agentsï¼Œä»…ä»…æ˜¯å› ä¸ºå®ƒä»¬æœ‰ä¸åŒçš„åˆå§‹ç”¨æˆ·æç¤ºã€‚ç³»ç»Ÿæç¤ºã€å·¥å…·é›†å’Œæ•´ä½“ agent harness åœ¨å…¶ä»–æ–¹é¢æ˜¯ç›¸åŒçš„ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude å¼€å‘è€…å¹³å°æ¨å‡ºé«˜çº§å·¥å…·ä½¿ç”¨åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7580295137395130383</link>    <guid>https://juejin.cn/post/7580295137395130383</guid>    <pubDate>2025-12-06T16:12:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580295137395130383" data-draft-id="7580312375372103720" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude å¼€å‘è€…å¹³å°æ¨å‡ºé«˜çº§å·¥å…·ä½¿ç”¨åŠŸèƒ½"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2025-12-06T16:12:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude å¼€å‘è€…å¹³å°æ¨å‡ºé«˜çº§å·¥å…·ä½¿ç”¨åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T16:12:36.000Z" title="Sat Dec 06 2025 16:12:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Fadvanced-tool-use" target="_blank" title="https://www.anthropic.com/engineering/advanced-tool-use" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p>AI agents çš„æœªæ¥æ˜¯æ¨¡å‹èƒ½å¤Ÿæ— ç¼åœ°è·¨è¶Šæ•°ç™¾ç”šè‡³æ•°åƒä¸ªå·¥å…·è¿›è¡Œå·¥ä½œã€‚ä¸€ä¸ªé›†æˆäº† git æ“ä½œã€æ–‡ä»¶æ“ä½œã€åŒ…ç®¡ç†å™¨ã€æµ‹è¯•æ¡†æ¶å’Œéƒ¨ç½²æµæ°´çº¿çš„ IDE åŠ©æ‰‹ã€‚ä¸€ä¸ªåŒæ—¶è¿æ¥ Slackã€GitHubã€Google Driveã€Jiraã€å…¬å¸æ•°æ®åº“å’Œæ•°åä¸ª MCP æœåŠ¡å™¨çš„è¿è¥åè°ƒå™¨ã€‚</p>
<p>ä¸ºäº†æ„å»ºæœ‰æ•ˆçš„ agentsï¼Œå®ƒä»¬éœ€è¦èƒ½å¤Ÿä½¿ç”¨æ— é™çš„å·¥å…·åº“ï¼Œè€Œæ— éœ€é¢„å…ˆå°†æ¯ä¸ªå®šä¹‰éƒ½å¡«å……åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚æˆ‘ä»¬å…³äºä½¿ç”¨ MCP æ‰§è¡Œä»£ç çš„åšå®¢æ–‡ç« è®¨è®ºäº†å·¥å…·ç»“æœå’Œå®šä¹‰æœ‰æ—¶ä¼šåœ¨ agent è¯»å–è¯·æ±‚ä¹‹å‰æ¶ˆè€— 50,000+ ä¸ª tokenã€‚Agents åº”è¯¥æŒ‰éœ€å‘ç°å’ŒåŠ è½½å·¥å…·ï¼Œåªä¿ç•™ä¸å½“å‰ä»»åŠ¡ç›¸å…³çš„å†…å®¹ã€‚</p>
<p>Agents è¿˜éœ€è¦ä»ä»£ç ä¸­è°ƒç”¨å·¥å…·çš„èƒ½åŠ›ã€‚å½“ä½¿ç”¨è‡ªç„¶è¯­è¨€å·¥å…·è°ƒç”¨æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦å®Œæ•´çš„æ¨ç†è¿‡ç¨‹ï¼Œä¸­é—´ç»“æœæ— è®ºæ˜¯å¦æœ‰ç”¨éƒ½ä¼šåœ¨ä¸Šä¸‹æ–‡ä¸­å †ç§¯ã€‚ä»£ç æ˜¯ç¼–æ’é€»è¾‘çš„è‡ªç„¶é€‰æ‹©ï¼Œä¾‹å¦‚å¾ªç¯ã€æ¡ä»¶å’Œæ•°æ®è½¬æ¢ã€‚Agents éœ€è¦æ ¹æ®æ‰‹å¤´çš„ä»»åŠ¡çµæ´»é€‰æ‹©ä»£ç æ‰§è¡Œå’Œæ¨ç†ã€‚</p>
<p>Agents è¿˜éœ€è¦ä»ç¤ºä¾‹ä¸­å­¦ä¹ æ­£ç¡®çš„å·¥å…·ä½¿ç”¨æ–¹æ³•ï¼Œè€Œä¸ä»…ä»…æ˜¯æ¨¡å¼å®šä¹‰ã€‚JSON æ¨¡å¼å®šä¹‰äº†ç»“æ„ä¸Šæœ‰æ•ˆçš„å†…å®¹ï¼Œä½†æ— æ³•è¡¨è¾¾ä½¿ç”¨æ¨¡å¼ï¼šä½•æ—¶åŒ…å«å¯é€‰å‚æ•°ã€å“ªäº›ç»„åˆæœ‰æ„ä¹‰ï¼Œæˆ–è€…æ‚¨çš„ API æœŸæœ›ä»€ä¹ˆçº¦å®šã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬æ¨å‡ºäº†ä¸‰ä¸ªå®ç°è¿™ä¸€ç›®æ ‡çš„åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>å·¥å…·æœç´¢å·¥å…·</strong>ï¼šå…è®¸ Claude ä½¿ç”¨æœç´¢å·¥å…·è®¿é—®æ•°åƒä¸ªå·¥å…·è€Œä¸ä¼šæ¶ˆè€—å…¶ä¸Šä¸‹æ–‡çª—å£</li>
<li><strong>ç¨‹åºåŒ–å·¥å…·è°ƒç”¨</strong>ï¼šå…è®¸ Claude åœ¨ä»£ç æ‰§è¡Œç¯å¢ƒä¸­è°ƒç”¨å·¥å…·ï¼Œå‡å°‘å¯¹æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£çš„å½±å“</li>
<li><strong>å·¥å…·ä½¿ç”¨ç¤ºä¾‹</strong>ï¼šä¸ºæ¼”ç¤ºå¦‚ä½•æœ‰æ•ˆä½¿ç”¨ç‰¹å®šå·¥å…·æä¾›äº†é€šç”¨æ ‡å‡†</li>
</ul>
<p>åœ¨å†…éƒ¨æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å‘ç°è¿™äº›åŠŸèƒ½å¸®åŠ©æˆ‘ä»¬æ„å»ºäº†ä½¿ç”¨ä¼ ç»Ÿå·¥å…·ä½¿ç”¨æ¨¡å¼æ— æ³•å®ç°çš„ä¸œè¥¿ã€‚ä¾‹å¦‚ï¼Œ<strong>Claude for Excel</strong> ä½¿ç”¨ç¨‹åºåŒ–å·¥å…·è°ƒç”¨è¯»å–å’Œä¿®æ”¹åŒ…å«æ•°åƒè¡Œçš„ç”µå­è¡¨æ ¼ï¼Œè€Œä¸ä¼šè¿‡è½½æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£ã€‚</p>
<p>åŸºäºæˆ‘ä»¬çš„ç»éªŒï¼Œæˆ‘ä»¬ç›¸ä¿¡è¿™äº›åŠŸèƒ½ä¸ºæ‚¨å¯ä»¥ç”¨ Claude æ„å»ºçš„ä¸œè¥¿å¼€è¾Ÿäº†æ–°çš„å¯èƒ½æ€§ã€‚</p>
<h2 data-id="heading-0">å·¥å…·æœç´¢å·¥å…·</h2>
<h3 data-id="heading-1">æŒ‘æˆ˜</h3>
<p>MCP å·¥å…·å®šä¹‰æä¾›äº†é‡è¦çš„ä¸Šä¸‹æ–‡ï¼Œä½†éšç€æ›´å¤šæœåŠ¡å™¨çš„è¿æ¥ï¼Œè¿™äº› token ä¼šç´¯ç§¯èµ·æ¥ã€‚è€ƒè™‘ä¸€ä¸ªäº”æœåŠ¡å™¨è®¾ç½®ï¼š</p>
<ul>
<li>GitHubï¼š35 ä¸ªå·¥å…·ï¼ˆçº¦ 26K tokensï¼‰</li>
<li>Slackï¼š11 ä¸ªå·¥å…·ï¼ˆçº¦ 21K tokensï¼‰</li>
<li>Sentryï¼š5 ä¸ªå·¥å…·ï¼ˆçº¦ 3K tokensï¼‰</li>
<li>Grafanaï¼š5 ä¸ªå·¥å…·ï¼ˆçº¦ 3K tokensï¼‰</li>
<li>Splunkï¼š2 ä¸ªå·¥å…·ï¼ˆçº¦ 2K tokensï¼‰</li>
</ul>
<p>è¿™æ˜¯ 58 ä¸ªå·¥å…·åœ¨å¯¹è¯å¼€å§‹å‰æ¶ˆè€—çº¦ 55K tokensã€‚æ·»åŠ æ›´å¤šæœåŠ¡å™¨å¦‚ Jiraï¼ˆä»…å®ƒå°±ä½¿ç”¨çº¦ 17K tokensï¼‰ï¼Œæ‚¨å¾ˆå¿«å°±ä¼šæ¥è¿‘ 100K+ token çš„å¼€é”€ã€‚åœ¨ Anthropicï¼Œæˆ‘ä»¬çœ‹åˆ°ä¼˜åŒ–å‰å·¥å…·å®šä¹‰æ¶ˆè€—äº† 134K tokensã€‚</p>
<p>ä½† token æˆæœ¬ä¸æ˜¯å”¯ä¸€çš„é—®é¢˜ã€‚æœ€å¸¸è§çš„å¤±è´¥æ˜¯é”™è¯¯çš„å·¥å…·é€‰æ‹©å’Œä¸æ­£ç¡®çš„å‚æ•°ï¼Œç‰¹åˆ«æ˜¯å½“å·¥å…·æœ‰ç›¸ä¼¼åç§°æ—¶ï¼Œå¦‚ <code>notification-send-user</code> vs <code>notification-send-channel</code>ã€‚</p>
<h3 data-id="heading-2">æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ</h3>
<p>å·¥å…·æœç´¢å·¥å…·ä¸æ˜¯é¢„å…ˆåŠ è½½æ‰€æœ‰å·¥å…·å®šä¹‰ï¼Œè€Œæ˜¯æŒ‰éœ€å‘ç°å·¥å…·ã€‚Claude åªçœ‹åˆ°å®ƒå½“å‰ä»»åŠ¡å®é™…éœ€è¦çš„å·¥å…·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7bd2974ddf24aae8dcc59d00b29f821~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765642355&amp;x-signature=Zlhngw%2BL93tiIGHup6XT6542a7E%3D" alt="image.png" loading="lazy"/></p>
<p><em>ä¸ Claude ä¼ ç»Ÿæ–¹æ³•çš„ 122,800 tokens ç›¸æ¯”ï¼Œå·¥å…·æœç´¢å·¥å…·ä¿ç•™äº† 191,300 tokens çš„ä¸Šä¸‹æ–‡ã€‚</em></p>
<p>ä¼ ç»Ÿæ–¹æ³•ï¼š</p>
<ul>
<li>æ‰€æœ‰å·¥å…·å®šä¹‰é¢„å…ˆåŠ è½½ï¼ˆ50+ MCP å·¥å…·çº¦ 72K tokensï¼‰</li>
<li>å¯¹è¯å†å²å’Œç³»ç»Ÿæç¤ºç«äº‰å‰©ä½™ç©ºé—´</li>
<li>æ€»ä¸Šä¸‹æ–‡æ¶ˆè€—ï¼šå¼€å§‹ä»»ä½•å·¥ä½œå‰çº¦ 77K tokens</li>
</ul>
<p>ä½¿ç”¨å·¥å…·æœç´¢å·¥å…·ï¼š</p>
<ul>
<li>ä»…å·¥å…·æœç´¢å·¥å…·é¢„å…ˆåŠ è½½ï¼ˆçº¦ 500 tokensï¼‰</li>
<li>å·¥å…·æŒ‰éœ€å‘ç°ï¼ˆ3-5 ä¸ªç›¸å…³å·¥å…·ï¼Œçº¦ 3K tokensï¼‰</li>
<li>æ€»ä¸Šä¸‹æ–‡æ¶ˆè€—ï¼šçº¦ 8.7K tokensï¼Œä¿ç•™ 95% çš„ä¸Šä¸‹æ–‡çª—å£</li>
</ul>
<p>è¿™ä»£è¡¨äº† 85% çš„ token ä½¿ç”¨å‡å°‘ï¼ŒåŒæ—¶ä¿æŒå¯¹å®Œæ•´å·¥å…·åº“çš„è®¿é—®ã€‚å†…éƒ¨æµ‹è¯•æ˜¾ç¤ºï¼Œåœ¨ä½¿ç”¨å¤§å‹å·¥å…·åº“æ—¶ï¼ŒMCP è¯„ä¼°çš„å‡†ç¡®æ€§æ˜¾è‘—æé«˜ã€‚Opus 4 ä» 49% æé«˜åˆ° 74%ï¼ŒOpus 4.5 ä» 79.5% æé«˜åˆ° 88.1%ã€‚</p>
<h3 data-id="heading-3">å·¥å…·æœç´¢å·¥å…·çš„å·¥ä½œåŸç†</h3>
<p>å·¥å…·æœç´¢å·¥å…·è®© Claude åŠ¨æ€å‘ç°å·¥å…·ï¼Œè€Œä¸æ˜¯é¢„å…ˆåŠ è½½æ‰€æœ‰å®šä¹‰ã€‚æ‚¨å‘ API æä¾›æ‰€æœ‰å·¥å…·å®šä¹‰ï¼Œä½†ä½¿ç”¨ <code>defer_loading: true</code> æ ‡è®°å·¥å…·ä½¿å…¶å¯æŒ‰éœ€å‘ç°ã€‚å»¶è¿Ÿå·¥å…·æœ€åˆä¸ä¼šåŠ è½½åˆ° Claude çš„ä¸Šä¸‹æ–‡ä¸­ã€‚Claude åªçœ‹åˆ°å·¥å…·æœç´¢å·¥å…·æœ¬èº«ä»¥åŠä»»ä½•å¸¦æœ‰ <code>defer_loading: false</code> çš„å·¥å…·ï¼ˆæ‚¨æœ€å…³é”®ã€æœ€å¸¸ä½¿ç”¨çš„å·¥å…·ï¼‰ã€‚</p>
<p>å½“ Claude éœ€è¦ç‰¹å®šåŠŸèƒ½æ—¶ï¼Œå®ƒä¼šæœç´¢ç›¸å…³å·¥å…·ã€‚å·¥å…·æœç´¢å·¥å…·è¿”å›åŒ¹é…å·¥å…·çš„å¼•ç”¨ï¼Œè¿™äº›å¼•ç”¨ä¼šåœ¨ Claude çš„ä¸Šä¸‹æ–‡ä¸­å±•å¼€ä¸ºå®Œæ•´å®šä¹‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœ Claude éœ€è¦ä¸ GitHub äº¤äº’ï¼Œå®ƒä¼šæœç´¢ "github"ï¼Œåªæœ‰ <code>github.createPullRequest</code> å’Œ <code>github.listIssues</code> ä¼šè¢«åŠ è½½â€”â€”è€Œä¸æ˜¯æ‚¨æ¥è‡ª Slackã€Jira å’Œ Google Drive çš„å…¶ä»– 50+ å·¥å…·ã€‚</p>
<p>è¿™æ ·ï¼ŒClaude å¯ä»¥è®¿é—®æ‚¨çš„å®Œæ•´å·¥å…·åº“ï¼Œè€Œåªéœ€ä¸ºå…¶å®é™…éœ€è¦çš„å·¥å…·æ”¯ä»˜ token æˆæœ¬ã€‚</p>
<p><strong>æç¤ºç¼“å­˜è¯´æ˜ï¼š</strong> å·¥å…·æœç´¢å·¥å…·ä¸ä¼šç ´åæç¤ºç¼“å­˜ï¼Œå› ä¸ºå»¶è¿Ÿå·¥å…·å®Œå…¨ä»åˆå§‹æç¤ºä¸­æ’é™¤ã€‚å®ƒä»¬åªåœ¨ Claude æœç´¢å®ƒä»¬åæ‰æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œå› æ­¤æ‚¨çš„ç³»ç»Ÿæç¤ºå’Œæ ¸å¿ƒå·¥å…·å®šä¹‰ä¿æŒå¯ç¼“å­˜ã€‚</p>
<p><strong>å®ç°æ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-comment">// åŒ…å«å·¥å…·æœç´¢å·¥å…·ï¼ˆregexã€BM25 æˆ–è‡ªå®šä¹‰ï¼‰</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tool_search_tool_regex_20251119"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tool_search_tool_regex"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>

    <span class="hljs-comment">// æ ‡è®°å·¥å…·ä»¥æŒ‰éœ€å‘ç°</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"github.createPullRequest"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Create a pull request"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"input_schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"defer_loading"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
    <span class="hljs-punctuation">}</span>
    <span class="hljs-comment">// ... æ•°ç™¾ä¸ªå¸¦æœ‰ defer_loading: true çš„å»¶è¿Ÿå·¥å…·</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¯¹äº MCP æœåŠ¡å™¨ï¼Œæ‚¨å¯ä»¥å»¶è¿ŸåŠ è½½æ•´ä¸ªæœåŠ¡å™¨ï¼ŒåŒæ—¶ä¿æŒç‰¹å®šé«˜ä½¿ç”¨å·¥å…·çš„åŠ è½½ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mcp_toolset"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"mcp_server_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"google-drive"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"default_config"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"defer_loading"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> # å»¶è¿ŸåŠ è½½æ•´ä¸ªæœåŠ¡å™¨
  <span class="hljs-attr">"configs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"search_files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
<span class="hljs-attr">"defer_loading"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
    <span class="hljs-punctuation">}</span>  <span class="hljs-comment">// ä¿æŒæœ€å¸¸ç”¨çš„å·¥å…·åŠ è½½</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Claude å¼€å‘è€…å¹³å°å¼€ç®±å³ç”¨åœ°æä¾›åŸºäº regex å’Œ BM25 çš„æœç´¢å·¥å…·ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨åµŒå…¥æˆ–å…¶ä»–ç­–ç•¥å®ç°è‡ªå®šä¹‰æœç´¢å·¥å…·ã€‚</p>
<h3 data-id="heading-4">ä½•æ—¶ä½¿ç”¨å·¥å…·æœç´¢å·¥å…·</h3>
<p>åƒä»»ä½•æ¶æ„å†³ç­–ä¸€æ ·ï¼Œå¯ç”¨å·¥å…·æœç´¢å·¥å…·æ¶‰åŠæƒè¡¡ã€‚è¯¥åŠŸèƒ½åœ¨å·¥å…·è°ƒç”¨ä¹‹å‰æ·»åŠ äº†æœç´¢æ­¥éª¤ï¼Œå› æ­¤å½“ä¸Šä¸‹æ–‡èŠ‚çœå’Œå‡†ç¡®æ€§æ”¹è¿›è¶…è¿‡é¢å¤–å»¶è¿Ÿæ—¶ï¼Œå®ƒæä¾›æœ€ä½³ ROIã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å·¥å…·å®šä¹‰æ¶ˆè€— &gt;10K tokens</li>
<li>ç»å†å·¥å…·é€‰æ‹©å‡†ç¡®æ€§é—®é¢˜</li>
<li>æ„å»ºå…·æœ‰å¤šä¸ªæœåŠ¡å™¨çš„ MCP é©±åŠ¨ç³»ç»Ÿ</li>
<li>æœ‰ 10+ ä¸ªå¯ç”¨å·¥å…·</li>
</ul>
<p><strong>ä¸å¤ªé€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å°å‹å·¥å…·åº“ï¼ˆ&lt;10 ä¸ªå·¥å…·ï¼‰</li>
<li>æ‰€æœ‰å·¥å…·åœ¨æ¯ä¸ªä¼šè¯ä¸­é¢‘ç¹ä½¿ç”¨</li>
<li>å·¥å…·å®šä¹‰ç´§å‡‘</li>
</ul>
<h2 data-id="heading-5">ç¨‹åºåŒ–å·¥å…·è°ƒç”¨</h2>
<h3 data-id="heading-6">æŒ‘æˆ˜</h3>
<p>ä¼ ç»Ÿå·¥å…·è°ƒç”¨åœ¨å·¥ä½œæµå˜å¾—æ›´å¤æ‚æ—¶äº§ç”Ÿä¸¤ä¸ªåŸºæœ¬é—®é¢˜ï¼š</p>
<ul>
<li><strong>ä¸­é—´ç»“æœæ±¡æŸ“ä¸Šä¸‹æ–‡</strong>ï¼šå½“ Claude åˆ†æ 10MB æ—¥å¿—æ–‡ä»¶çš„é”™è¯¯æ¨¡å¼æ—¶ï¼Œæ•´ä¸ªæ–‡ä»¶è¿›å…¥å…¶ä¸Šä¸‹æ–‡çª—å£ï¼Œå°½ç®¡ Claude åªéœ€è¦é”™è¯¯é¢‘ç‡çš„æ‘˜è¦ã€‚å½“è·å–è·¨å¤šä¸ªè¡¨çš„å®¢æˆ·æ•°æ®æ—¶ï¼Œæ¯æ¡è®°å½•åœ¨ä¸Šä¸‹æ–‡ä¸­ç´¯ç§¯ï¼Œæ— è®ºç›¸å…³æ€§å¦‚ä½•ã€‚è¿™äº›ä¸­é—´ç»“æœæ¶ˆè€—å¤§é‡ token é¢„ç®—ï¼Œå¹¶å¯èƒ½å®Œå…¨å°†é‡è¦ä¿¡æ¯æ¨å‡ºä¸Šä¸‹æ–‡çª—å£ã€‚</li>
<li><strong>æ¨ç†å¼€é”€å’Œæ‰‹åŠ¨ç»¼åˆ</strong>ï¼šæ¯ä¸ªå·¥å…·è°ƒç”¨éœ€è¦å®Œæ•´çš„æ¨¡å‹æ¨ç†è¿‡ç¨‹ã€‚æ”¶åˆ°ç»“æœåï¼ŒClaude å¿…é¡»"ç›®è§†æ£€æŸ¥"æ•°æ®ä»¥æå–ç›¸å…³ä¿¡æ¯ï¼Œæ¨ç†å„éƒ¨åˆ†å¦‚ä½•ç»„åˆï¼Œå¹¶å†³å®šä¸‹ä¸€æ­¥åšä»€ä¹ˆâ€”â€”æ‰€æœ‰è¿™äº›éƒ½é€šè¿‡è‡ªç„¶è¯­è¨€å¤„ç†ã€‚äº”å·¥å…·å·¥ä½œæµæ„å‘³ç€äº”æ¬¡æ¨ç†è¿‡ç¨‹åŠ ä¸Š Claude è§£ææ¯ä¸ªç»“æœã€æ¯”è¾ƒå€¼å’Œç»¼åˆç»“è®ºã€‚è¿™æ—¢æ…¢åˆå®¹æ˜“å‡ºé”™ã€‚</li>
</ul>
<h3 data-id="heading-7">æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ</h3>
<p>ç¨‹åºåŒ–å·¥å…·è°ƒç”¨ä½¿ Claude èƒ½å¤Ÿé€šè¿‡ä»£ç è€Œä¸æ˜¯é€šè¿‡å•ç‹¬çš„ API å¾€è¿”æ¥ç¼–æ’å·¥å…·ã€‚Claude ä¸æ˜¯é€ä¸€è¯·æ±‚å·¥å…·ï¼Œæ¯ä¸ªç»“æœéƒ½è¿”å›åˆ°å…¶ä¸Šä¸‹æ–‡ï¼Œè€Œæ˜¯ç¼–å†™è°ƒç”¨å¤šä¸ªå·¥å…·ã€å¤„ç†å®ƒä»¬çš„è¾“å‡ºå¹¶æ§åˆ¶å“ªäº›ä¿¡æ¯å®é™…è¿›å…¥å…¶ä¸Šä¸‹æ–‡çª—å£çš„ä»£ç ã€‚</p>
<p>Claude æ“…é•¿ç¼–å†™ä»£ç ï¼Œé€šè¿‡è®©å®ƒç”¨ Python è€Œä¸æ˜¯é€šè¿‡è‡ªç„¶è¯­è¨€å·¥å…·è°ƒç”¨æ¥è¡¨è¾¾ç¼–æ’é€»è¾‘ï¼Œæ‚¨è·å¾—æ›´å¯é ã€ç²¾ç¡®çš„æ§åˆ¶æµã€‚å¾ªç¯ã€æ¡ä»¶ã€æ•°æ®è½¬æ¢å’Œé”™è¯¯å¤„ç†éƒ½åœ¨ä»£ç ä¸­æ˜ç¡®ï¼Œè€Œä¸æ˜¯åœ¨ Claude çš„æ¨ç†ä¸­éšå«ã€‚</p>
<h4 data-id="heading-8">ç¤ºä¾‹ï¼šé¢„ç®—åˆè§„æ£€æŸ¥</h4>
<p>è€ƒè™‘ä¸€ä¸ªå¸¸è§çš„ä¸šåŠ¡ä»»åŠ¡ï¼š"å“ªäº›å›¢é˜Ÿæˆå‘˜è¶…å‡ºäº†ä»–ä»¬çš„ Q3 å·®æ—…é¢„ç®—ï¼Ÿ"</p>
<p>æ‚¨æœ‰ä¸‰ä¸ªå¯ç”¨å·¥å…·ï¼š</p>
<ul>
<li><code>get_team_members(department)</code> - è¿”å›å›¢é˜Ÿæˆå‘˜åˆ—è¡¨ï¼ŒåŒ…å« ID å’Œçº§åˆ«</li>
<li><code>get_expenses(user_id, quarter)</code> - è¿”å›ç”¨æˆ·çš„è´¹ç”¨è¡Œé¡¹ç›®</li>
<li><code>get_budget_by_level(level)</code> - è¿”å›å‘˜å·¥çº§åˆ«çš„é¢„ç®—é™åˆ¶</li>
</ul>
<p><strong>ä¼ ç»Ÿæ–¹æ³•</strong>ï¼š</p>
<ul>
<li>è·å–å›¢é˜Ÿæˆå‘˜ â†’ 20 äºº</li>
<li>å¯¹æ¯ä¸ªäººï¼Œè·å–ä»–ä»¬çš„ Q3 è´¹ç”¨ â†’ 20 æ¬¡å·¥å…·è°ƒç”¨ï¼Œæ¯æ¬¡è¿”å› 50-100 ä¸ªè¡Œé¡¹ç›®ï¼ˆèˆªç­ã€é…’åº—ã€é¤é£Ÿã€æ”¶æ®ï¼‰</li>
<li>æŒ‰å‘˜å·¥çº§åˆ«è·å–é¢„ç®—é™åˆ¶</li>
<li>æ‰€æœ‰è¿™äº›éƒ½è¿›å…¥ Claude çš„ä¸Šä¸‹æ–‡ï¼š2000+ è´¹ç”¨è¡Œé¡¹ç›®ï¼ˆ50 KB+ï¼‰</li>
<li>Claude æ‰‹åŠ¨æ±‡æ€»æ¯ä¸ªäººçš„è´¹ç”¨ï¼ŒæŸ¥æ‰¾ä»–ä»¬çš„é¢„ç®—ï¼Œæ¯”è¾ƒè´¹ç”¨ä¸é¢„ç®—é™åˆ¶</li>
<li>æ›´å¤šçš„æ¨¡å‹å¾€è¿”ï¼Œæ˜¾è‘—çš„ä¸Šä¸‹æ–‡æ¶ˆè€—</li>
</ul>
<p><strong>ä½¿ç”¨ç¨‹åºåŒ–å·¥å…·è°ƒç”¨</strong>ï¼š</p>
<p>æ¯ä¸ªå·¥å…·ç»“æœä¸æ˜¯è¿”å›åˆ° Claudeï¼ŒClaude ç¼–å†™ç¼–æ’æ•´ä¸ªå·¥ä½œæµçš„ Python è„šæœ¬ã€‚è„šæœ¬åœ¨ä»£ç æ‰§è¡Œå·¥å…·ï¼ˆæ²™ç›’ç¯å¢ƒï¼‰ä¸­è¿è¡Œï¼Œå½“éœ€è¦æ¥è‡ªæ‚¨çš„å·¥å…·çš„ç»“æœæ—¶æš‚åœã€‚å½“æ‚¨é€šè¿‡ API è¿”å›å·¥å…·ç»“æœæ—¶ï¼Œå®ƒä»¬ç”±è„šæœ¬å¤„ç†ï¼Œè€Œä¸æ˜¯ç”±æ¨¡å‹æ¶ˆè´¹ã€‚è„šæœ¬ç»§ç»­æ‰§è¡Œï¼ŒClaude åªçœ‹åˆ°æœ€ç»ˆè¾“å‡ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/732ab5c8b9a84f498bdf9147dc038d30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765642355&amp;x-signature=sQo8jJAegkIAL1cfMH%2BUxDp1TAQ%3D" alt="" loading="lazy"/></p>
<p>ç¨‹åºåŒ–å·¥å…·è°ƒç”¨ä½¿ Claude èƒ½å¤Ÿé€šè¿‡ä»£ç è€Œä¸æ˜¯é€šè¿‡å•ç‹¬çš„ API å¾€è¿”æ¥ç¼–æ’å·¥å…·ï¼Œå…è®¸å¹¶è¡Œå·¥å…·æ‰§è¡Œã€‚</p>
<p>ä»¥ä¸‹æ˜¯ Claude ç”¨äºé¢„ç®—åˆè§„ä»»åŠ¡çš„ç¼–æ’ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python">team = <span class="hljs-keyword">await</span> get_team_members(<span class="hljs-string">"engineering"</span>)

<span class="hljs-comment"># ä¸ºæ¯ä¸ªå”¯ä¸€çº§åˆ«è·å–é¢„ç®—</span>
levels = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(m[<span class="hljs-string">"level"</span>] <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> team))
budget_results = <span class="hljs-keyword">await</span> asyncio.gather(*[
    get_budget_by_level(level) <span class="hljs-keyword">for</span> level <span class="hljs-keyword">in</span> levels
])

<span class="hljs-comment"># åˆ›å»ºæŸ¥æ‰¾å­—å…¸ï¼š{"junior": budget1, "senior": budget2, ...}</span>
budgets = {level: budget <span class="hljs-keyword">for</span> level, budget <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(levels, budget_results)}

<span class="hljs-comment"># å¹¶è¡Œè·å–æ‰€æœ‰è´¹ç”¨</span>
expenses = <span class="hljs-keyword">await</span> asyncio.gather(*[
    get_expenses(m[<span class="hljs-string">"id"</span>], <span class="hljs-string">"Q3"</span>) <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> team
])

<span class="hljs-comment"># æ‰¾å‡ºå·®æ—…é¢„ç®—è¶…æ”¯çš„å‘˜å·¥</span>
exceeded = []
<span class="hljs-keyword">for</span> member, exp <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(team, expenses):
    budget = budgets[member[<span class="hljs-string">"level"</span>]]
    total = <span class="hljs-built_in">sum</span>(e[<span class="hljs-string">"amount"</span>] <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> exp)
    <span class="hljs-keyword">if</span> total &gt; budget[<span class="hljs-string">"travel_limit"</span>]:
        exceeded.append({
            <span class="hljs-string">"name"</span>: member[<span class="hljs-string">"name"</span>],
            <span class="hljs-string">"spent"</span>: total,
            <span class="hljs-string">"limit"</span>: budget[<span class="hljs-string">"travel_limit"</span>]
        })

<span class="hljs-built_in">print</span>(json.dumps(exceeded))
</code></pre>
<p>Claude çš„ä¸Šä¸‹æ–‡åªæ¥æ”¶æœ€ç»ˆç»“æœï¼šä¸¤åˆ°ä¸‰ä¸ªé¢„ç®—è¶…æ”¯çš„äººã€‚2000+ è¡Œé¡¹ç›®ã€ä¸­é—´æ±‡æ€»å’Œé¢„ç®—æŸ¥æ‰¾ä¸ä¼šå½±å“ Claude çš„ä¸Šä¸‹æ–‡ï¼Œå°†æ¶ˆè€—ä» 200KB åŸå§‹è´¹ç”¨æ•°æ®å‡å°‘åˆ°ä»… 1KB ç»“æœã€‚</p>
<p>æ•ˆç‡æ”¶ç›Šæ˜¯å·¨å¤§çš„ï¼š</p>
<ul>
<li><strong>Token èŠ‚çœ</strong>ï¼šé€šè¿‡ä¿æŒä¸­é—´ç»“æœä¸åœ¨ Claude çš„ä¸Šä¸‹æ–‡ä¸­ï¼ŒPTC æ˜¾è‘—å‡å°‘ token æ¶ˆè€—ã€‚å¤æ‚ç ”ç©¶ä»»åŠ¡çš„å¹³å‡ä½¿ç”¨é‡ä» 43,588 ä¸ª token ä¸‹é™åˆ° 27,297 ä¸ª tokenï¼Œå‡å°‘äº† 37%ã€‚</li>
<li><strong>å‡å°‘å»¶è¿Ÿ</strong>ï¼šæ¯æ¬¡ API å¾€è¿”éœ€è¦æ¨¡å‹æ¨ç†ï¼ˆå‡ ç™¾æ¯«ç§’åˆ°å‡ ç§’ï¼‰ã€‚å½“ Claude åœ¨å•ä¸ªä»£ç å—ä¸­ç¼–æ’ 20+ å·¥å…·è°ƒç”¨æ—¶ï¼Œæ‚¨æ¶ˆé™¤äº† 19+ æ¬¡æ¨ç†è¿‡ç¨‹ã€‚API å¤„ç†å·¥å…·æ‰§è¡Œè€Œæ— éœ€æ¯æ¬¡è¿”å›æ¨¡å‹ã€‚</li>
<li><strong>æé«˜å‡†ç¡®æ€§</strong>ï¼šé€šè¿‡ç¼–å†™æ˜ç¡®çš„ç¼–æ’é€»è¾‘ï¼ŒClaude æ¯”ç”¨è‡ªç„¶è¯­è¨€å¤„ç†å¤šä¸ªå·¥å…·ç»“æœæ—¶çŠ¯æ›´å°‘çš„é”™è¯¯ã€‚å†…éƒ¨çŸ¥è¯†æ£€ç´¢ä» 25.6% æé«˜åˆ° 28.5%ï¼›GIA åŸºå‡†ä» 46.5% æé«˜åˆ° 51.2%ã€‚</li>
</ul>
<p>ç”Ÿäº§å·¥ä½œæµæ¶‰åŠå¤æ‚çš„æ•°æ®ã€æ¡ä»¶é€»è¾‘å’Œéœ€è¦æ‰©å±•çš„æ“ä½œã€‚ç¨‹åºåŒ–å·¥å…·è°ƒç”¨è®© Claude ä»¥ç¼–ç¨‹æ–¹å¼å¤„ç†è¯¥å¤æ‚æ€§ï¼ŒåŒæ—¶ä¿æŒå…¶å¯¹å¯æ“ä½œç»“æœçš„å…³æ³¨ï¼Œè€Œä¸æ˜¯åŸå§‹æ•°æ®å¤„ç†ã€‚</p>
<h3 data-id="heading-9">ç¨‹åºåŒ–å·¥å…·è°ƒç”¨çš„å·¥ä½œåŸç†</h3>
<h4 data-id="heading-10">1. å°†å·¥å…·æ ‡è®°ä¸ºå¯ä»ä»£ç è°ƒç”¨</h4>
<p>å‘å·¥å…·æ·»åŠ  code_executionï¼Œå¹¶è®¾ç½® allowed_callers ä»¥é€‰æ‹©åŠ å…¥ç¨‹åºåŒ–æ‰§è¡Œçš„å·¥å…·ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"code_execution_20250825"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"code_execution"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_team_members"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Get all members of a department..."</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"input_schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"allowed_callers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"code_execution_20250825"</span><span class="hljs-punctuation">]</span> # é€‰æ‹©åŠ å…¥ç¨‹åºåŒ–å·¥å…·è°ƒç”¨
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_expenses"</span><span class="hljs-punctuation">,</span>
	...
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_budget_by_level"</span><span class="hljs-punctuation">,</span>
	...
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>API å°†è¿™äº›å·¥å…·å®šä¹‰è½¬æ¢ä¸º Claude å¯ä»¥è°ƒç”¨çš„ Python å‡½æ•°ã€‚</p>
<h4 data-id="heading-11">2. Claude ç¼–å†™ç¼–æ’ä»£ç </h4>
<p>Claude ä¸æ˜¯é€ä¸€è¯·æ±‚å·¥å…·ï¼Œè€Œæ˜¯ç”Ÿæˆ Python ä»£ç ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"server_tool_use"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"srvtoolu_abc"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"code_execution"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"input"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"team = get_team_members('engineering')\n..."</span> # ä¸Šé¢çš„ä»£ç ç¤ºä¾‹
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-12">3. å·¥å…·æ‰§è¡Œè€Œä¸å½±å“ Claude çš„ä¸Šä¸‹æ–‡</h4>
<p>å½“ä»£ç è°ƒç”¨ get_expenses() æ—¶ï¼Œæ‚¨æ”¶åˆ°å¸¦æœ‰ caller å­—æ®µçš„å·¥å…·è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tool_use"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"toolu_xyz"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_expenses"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"input"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"user_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"emp_123"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"quarter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Q3"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"caller"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"code_execution_20250825"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tool_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"srvtoolu_abc"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‚¨æä¾›ç»“æœï¼Œè¯¥ç»“æœåœ¨ä»£ç æ‰§è¡Œç¯å¢ƒä¸­å¤„ç†ï¼Œè€Œä¸æ˜¯åœ¨ Claude çš„ä¸Šä¸‹æ–‡ä¸­ã€‚æ­¤è¯·æ±‚-å“åº”å¾ªç¯å¯¹ä»£ç ä¸­çš„æ¯ä¸ªå·¥å…·è°ƒç”¨é‡å¤ã€‚</p>
<h4 data-id="heading-13">4. åªæœ‰æœ€ç»ˆè¾“å‡ºè¿›å…¥ä¸Šä¸‹æ–‡</h4>
<p>å½“ä»£ç å®Œæˆè¿è¡Œæ—¶ï¼Œåªæœ‰ä»£ç çš„ç»“æœè¿”å›ç»™ Claudeï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"code_execution_tool_result"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"tool_use_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"srvtoolu_abc"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"stdout"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"[{\"name\": \"Alice\", \"spent\": 12500, \"limit\": 10000}...]"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™å°±æ˜¯ Claude çœ‹åˆ°çš„å…¨éƒ¨å†…å®¹ï¼Œè€Œä¸æ˜¯æ²¿è·¯å¤„ç†çš„ 2000+ è´¹ç”¨è¡Œé¡¹ç›®ã€‚</p>
<h3 data-id="heading-14">ä½•æ—¶ä½¿ç”¨ç¨‹åºåŒ–å·¥å…·è°ƒç”¨</h3>
<p>ç¨‹åºåŒ–å·¥å…·è°ƒç”¨ä¸ºå·¥ä½œæµæ·»åŠ äº†ä»£ç æ‰§è¡Œæ­¥éª¤ã€‚å½“ token èŠ‚çœã€å»¶è¿Ÿæ”¹è¿›å’Œå‡†ç¡®æ€§æ”¶ç›Šæ˜¾è‘—æ—¶ï¼Œè¿™ç§é¢å¤–å¼€é”€å¾—åˆ°å›æŠ¥ã€‚</p>
<p><strong>æœ€ä½³é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å¤„ç†å¤§å‹æ•°æ®é›†ï¼Œåªéœ€è¦èšåˆæˆ–æ‘˜è¦</li>
<li>è¿è¡Œå…·æœ‰ä¸‰ä¸ªæˆ–æ›´å¤šä¾èµ–å·¥å…·è°ƒç”¨çš„å¤šæ­¥éª¤å·¥ä½œæµ</li>
<li>åœ¨ Claude çœ‹åˆ°ä¹‹å‰è¿‡æ»¤ã€æ’åºæˆ–è½¬æ¢å·¥å…·ç»“æœ</li>
<li>å¤„ç†ä¸­é—´æ•°æ®ä¸åº”å½±å“ Claude æ¨ç†çš„ä»»åŠ¡</li>
<li>åœ¨è®¸å¤šé¡¹ç›®ä¸Šè¿è¡Œå¹¶è¡Œæ“ä½œï¼ˆä¾‹å¦‚ï¼Œæ£€æŸ¥ 50 ä¸ªç«¯ç‚¹ï¼‰</li>
</ul>
<p><strong>ä¸å¤ªæœ‰ç›Šæ—¶ï¼š</strong></p>
<ul>
<li>è¿›è¡Œç®€å•çš„å•å·¥å…·è°ƒç”¨</li>
<li>Claude åº”è¯¥çœ‹åˆ°å¹¶æ¨ç†æ‰€æœ‰ä¸­é—´ç»“æœçš„ä»»åŠ¡</li>
<li>è¿è¡Œå…·æœ‰å°å“åº”çš„å¿«é€ŸæŸ¥æ‰¾</li>
</ul>
<h2 data-id="heading-15">å·¥å…·ä½¿ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-16">æŒ‘æˆ˜</h3>
<p>JSON Schema æ“…é•¿å®šä¹‰ç»“æ„â€”â€”ç±»å‹ã€å¿…å¡«å­—æ®µã€å…è®¸çš„æšä¸¾â€”â€”ä½†å®ƒæ— æ³•è¡¨è¾¾ä½¿ç”¨æ¨¡å¼ï¼šä½•æ—¶åŒ…å«å¯é€‰å‚æ•°ã€å“ªäº›ç»„åˆæœ‰æ„ä¹‰ï¼Œæˆ–è€…æ‚¨çš„ API æœŸæœ›ä»€ä¹ˆçº¦å®šã€‚</p>
<p>è€ƒè™‘æ”¯æŒå·¥å• APIï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"create_ticket"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"input_schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"enum"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"low"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"medium"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"critical"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"labels"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"array"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"items"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"reporter"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"contact"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"email"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"phone"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"due_date"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"escalation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"level"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"integer"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"notify_manager"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"boolean"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"sla_hours"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"integer"</span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"title"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ¨¡å¼å®šä¹‰äº†ä»€ä¹ˆæ˜¯æœ‰æ•ˆçš„ï¼Œä½†ç•™ä¸‹äº†å…³é”®é—®é¢˜æœªå›ç­”ï¼š</p>
<ul>
<li><strong>æ ¼å¼æ­§ä¹‰</strong>ï¼š<code>due_date</code> åº”è¯¥ä½¿ç”¨ "2024-11-06"ã€"Nov 6, 2024" è¿˜æ˜¯ "2024-11-06T00:00:00Z"ï¼Ÿ</li>
<li><strong>ID çº¦å®š</strong>ï¼š<code>reporter.id</code> æ˜¯ UUIDã€"USR-12345" è¿˜æ˜¯åªæ˜¯ "12345"ï¼Ÿ</li>
<li><strong>åµŒå¥—ç»“æ„ä½¿ç”¨</strong>ï¼šClaude åº”è¯¥ä½•æ—¶å¡«å…… <code>reporter.contact</code>ï¼Ÿ</li>
<li><strong>å‚æ•°ç›¸å…³æ€§</strong>ï¼š<code>escalation.level</code> å’Œ <code>escalation.sla_hours</code> ä¸ priority å¦‚ä½•ç›¸å…³ï¼Ÿ</li>
</ul>
<p>è¿™äº›æ­§ä¹‰å¯èƒ½å¯¼è‡´æ ¼å¼é”™è¯¯çš„å·¥å…·è°ƒç”¨å’Œä¸ä¸€è‡´çš„å‚æ•°ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-17">æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ</h3>
<p>å·¥å…·ä½¿ç”¨ç¤ºä¾‹è®©æ‚¨å¯ä»¥ç›´æ¥åœ¨å·¥å…·å®šä¹‰ä¸­æä¾›ç¤ºä¾‹å·¥å…·è°ƒç”¨ã€‚è€Œä¸æ˜¯ä»…ä¾èµ–æ¨¡å¼ï¼Œæ‚¨å‘ Claude å±•ç¤ºå…·ä½“çš„ä½¿ç”¨æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"create_ticket"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"input_schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-comment">/* ä¸ä¸Šé¢ç›¸åŒçš„æ¨¡å¼ */</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"input_examples"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Login page returns 500 error"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"priority"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"critical"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"labels"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"bug"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"authentication"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"production"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"reporter"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"USR-12345"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Jane Smith"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"contact"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"email"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"jane@acme.com"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"phone"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"+1-555-0123"</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"due_date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-06"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"escalation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"level"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"notify_manager"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"sla_hours"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Add dark mode support"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"labels"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"feature-request"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"ui"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"reporter"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"USR-67890"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Alex Chen"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Update API documentation"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
</code></pre>
<p>ä»è¿™ä¸‰ä¸ªç¤ºä¾‹ä¸­ï¼ŒClaude å­¦ä¹ åˆ°ï¼š</p>
<ul>
<li><strong>æ ¼å¼çº¦å®š</strong>ï¼šæ—¥æœŸä½¿ç”¨ YYYY-MM-DDï¼Œç”¨æˆ· ID éµå¾ª USR-XXXXXï¼Œæ ‡ç­¾ä½¿ç”¨ kebab-case</li>
<li><strong>åµŒå¥—ç»“æ„æ¨¡å¼</strong>ï¼šå¦‚ä½•æ„é€ å¸¦æœ‰åµŒå¥—è”ç³»äººå¯¹è±¡çš„æŠ¥å‘Šè€…å¯¹è±¡</li>
<li><strong>å¯é€‰å‚æ•°ç›¸å…³æ€§</strong>ï¼šå…³é”®é”™è¯¯æœ‰å®Œæ•´è”ç³»äººä¿¡æ¯ + å…·æœ‰ç´§ SLA çš„å‡çº§ï¼›åŠŸèƒ½è¯·æ±‚æœ‰æŠ¥å‘Šè€…ä½†æ²¡æœ‰è”ç³»äºº/å‡çº§ï¼›å†…éƒ¨ä»»åŠ¡åªæœ‰æ ‡é¢˜</li>
</ul>
<p>åœ¨æˆ‘ä»¬è‡ªå·±çš„å†…éƒ¨æµ‹è¯•ä¸­ï¼Œå·¥å…·ä½¿ç”¨ç¤ºä¾‹åœ¨å¤æ‚å‚æ•°å¤„ç†ä¸Šå°†å‡†ç¡®æ€§ä» 72% æé«˜åˆ° 90%ã€‚</p>
<h3 data-id="heading-18">ä½•æ—¶ä½¿ç”¨å·¥å…·ä½¿ç”¨ç¤ºä¾‹</h3>
<p>å·¥å…·ä½¿ç”¨ç¤ºä¾‹ä¸ºæ‚¨çš„å·¥å…·å®šä¹‰æ·»åŠ  tokensï¼Œå› æ­¤å½“å‡†ç¡®æ€§æ”¹è¿›è¶…è¿‡é¢å¤–æˆæœ¬æ—¶ï¼Œå®ƒä»¬æœ€æœ‰ä»·å€¼ã€‚</p>
<p><strong>æœ€ä½³é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å¤æ‚åµŒå¥—ç»“æ„ï¼Œå…¶ä¸­æœ‰æ•ˆ JSON ä¸æ„å‘³ç€æ­£ç¡®ä½¿ç”¨</li>
<li>å…·æœ‰è®¸å¤šå¯é€‰å‚æ•°ä¸”åŒ…å«æ¨¡å¼å¾ˆé‡è¦çš„å·¥å…·</li>
<li>å…·æœ‰æ¨¡å¼æœªæ•è·çš„ç‰¹å®šé¢†åŸŸçº¦å®šçš„ API</li>
<li>ç›¸ä¼¼å·¥å…·ï¼Œå…¶ä¸­ç¤ºä¾‹é˜æ˜ä½¿ç”¨å“ªä¸€ä¸ªï¼ˆä¾‹å¦‚ï¼Œ<code>create_ticket</code> vs <code>create_incident</code>ï¼‰</li>
</ul>
<p><strong>ä¸å¤ªæœ‰ç›Šæ—¶ï¼š</strong></p>
<ul>
<li>å…·æœ‰æ˜æ˜¾ä½¿ç”¨çš„ç®€å•å•å‚æ•°å·¥å…·</li>
<li>Claude å·²ç†è§£çš„æ ‡å‡†æ ¼å¼ï¼Œå¦‚ URL æˆ–ç”µå­é‚®ä»¶</li>
<li>æ›´é€‚åˆç”± JSON Schema çº¦æŸå¤„ç†çš„éªŒè¯é—®é¢˜</li>
</ul>
<h2 data-id="heading-19">æœ€ä½³å®è·µ</h2>
<p>æ„å»ºé‡‡å–ç°å®ä¸–ç•Œè¡ŒåŠ¨çš„ agents æ„å‘³ç€åŒæ—¶å¤„ç†è§„æ¨¡ã€å¤æ‚æ€§å’Œç²¾ç¡®æ€§ã€‚è¿™ä¸‰ä¸ªåŠŸèƒ½å…±åŒè§£å†³å·¥å…·ä½¿ç”¨å·¥ä½œæµä¸­çš„ä¸åŒç“¶é¢ˆã€‚ä»¥ä¸‹æ˜¯æœ‰æ•ˆç»“åˆå®ƒä»¬çš„æ–¹æ³•ã€‚</p>
<h3 data-id="heading-20">æˆ˜ç•¥æ€§åœ°åˆ†å±‚åŠŸèƒ½</h3>
<p>å¹¶éæ¯ä¸ª agent éƒ½éœ€è¦ä¸ºç»™å®šä»»åŠ¡ä½¿ç”¨æ‰€æœ‰ä¸‰ä¸ªåŠŸèƒ½ã€‚ä»æ‚¨æœ€å¤§çš„ç“¶é¢ˆå¼€å§‹ï¼š</p>
<ul>
<li>å·¥å…·å®šä¹‰çš„ä¸Šä¸‹æ–‡è†¨èƒ€ â†’ å·¥å…·æœç´¢å·¥å…·</li>
<li>å¤§å‹ä¸­é—´ç»“æœæ±¡æŸ“ä¸Šä¸‹æ–‡ â†’ ç¨‹åºåŒ–å·¥å…·è°ƒç”¨</li>
<li>å‚æ•°é”™è¯¯å’Œæ ¼å¼é”™è¯¯çš„è°ƒç”¨ â†’ å·¥å…·ä½¿ç”¨ç¤ºä¾‹</li>
</ul>
<p>è¿™ç§ä¸“æ³¨çš„æ–¹æ³•è®©æ‚¨è§£å†³é™åˆ¶ agent æ€§èƒ½çš„ç‰¹å®šçº¦æŸï¼Œè€Œä¸æ˜¯é¢„å…ˆæ·»åŠ å¤æ‚æ€§ã€‚</p>
<p>ç„¶åæ ¹æ®éœ€è¦åˆ†å±‚é™„åŠ åŠŸèƒ½ã€‚å®ƒä»¬æ˜¯äº’è¡¥çš„ï¼šå·¥å…·æœç´¢å·¥å…·ç¡®ä¿æ‰¾åˆ°æ­£ç¡®çš„å·¥å…·ï¼Œç¨‹åºåŒ–å·¥å…·è°ƒç”¨ç¡®ä¿é«˜æ•ˆæ‰§è¡Œï¼Œå·¥å…·ä½¿ç”¨ç¤ºä¾‹ç¡®ä¿æ­£ç¡®è°ƒç”¨ã€‚</p>
<h3 data-id="heading-21">è®¾ç½®å·¥å…·æœç´¢å·¥å…·ä»¥æ›´å¥½åœ°å‘ç°</h3>
<p>å·¥å…·æœç´¢åŒ¹é…åç§°å’Œæè¿°ï¼Œå› æ­¤æ¸…æ™°ã€æè¿°æ€§çš„å®šä¹‰æé«˜å‘ç°å‡†ç¡®æ€§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¥½çš„</span>
{
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"search_customer_orders"</span>,
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"Search for customer orders by date range, status, or total amount. Returns order details including items, shipping, and payment info."</span>
}

<span class="hljs-comment">// åçš„</span>
{
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"query_db_orders"</span>,
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"Execute order query"</span>
}
</code></pre>
<p>æ·»åŠ ç³»ç»Ÿæç¤ºæŒ‡å¯¼ï¼Œä»¥ä¾¿ Claude çŸ¥é“å¯ç”¨çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-text" lang="text">æ‚¨æœ‰æƒè®¿é—® Slack æ¶ˆæ¯ã€Google Drive æ–‡ä»¶ç®¡ç†ã€
Jira å·¥å•è·Ÿè¸ªå’Œ GitHub ä»“åº“æ“ä½œçš„å·¥å…·ã€‚ä½¿ç”¨å·¥å…·æœç´¢
æŸ¥æ‰¾ç‰¹å®šåŠŸèƒ½ã€‚
</code></pre>
<p>ä¿æŒæ‚¨æœ€å¸¸ç”¨çš„ä¸‰åˆ°äº”ä¸ªå·¥å…·å§‹ç»ˆåŠ è½½ï¼Œå»¶è¿Ÿå…¶ä½™çš„ã€‚è¿™å¹³è¡¡äº†å¸¸è§æ“ä½œçš„å³æ—¶è®¿é—®å’Œå…¶ä»–ä¸€åˆ‡çš„æŒ‰éœ€å‘ç°ã€‚</p>
<h3 data-id="heading-22">è®¾ç½®ç¨‹åºåŒ–å·¥å…·è°ƒç”¨ä»¥æ­£ç¡®æ‰§è¡Œ</h3>
<p>ç”±äº Claude ç¼–å†™ä»£ç æ¥è§£æå·¥å…·è¾“å‡ºï¼Œè¯·æ¸…æ¥šåœ°è®°å½•è¿”å›æ ¼å¼ã€‚è¿™æœ‰åŠ©äº Claude ç¼–å†™æ­£ç¡®çš„è§£æé€»è¾‘ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_orders"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Retrieve orders for a customer.
Returns:
    List of order objects, each containing:
    - id (str): Order identifier
    - total (float): Order total in USD
    - status (str): One of 'pending', 'shipped', 'delivered'
    - items (list): Array of {sku, quantity, price}
    - created_at (str): ISO 8601 timestamp"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¯·å‚é˜…ä¸‹é¢é€‰æ‹©åŠ å…¥çš„ç¨‹åºåŒ–ç¼–æ’å—ç›Šçš„å·¥å…·ï¼š</p>
<ul>
<li>å¯ä»¥å¹¶è¡Œè¿è¡Œçš„å·¥å…·ï¼ˆç‹¬ç«‹æ“ä½œï¼‰</li>
<li>å¯å®‰å…¨é‡è¯•çš„æ“ä½œï¼ˆå¹‚ç­‰ï¼‰</li>
</ul>
<h3 data-id="heading-23">è®¾ç½®å·¥å…·ä½¿ç”¨ç¤ºä¾‹ä»¥è·å¾—å‚æ•°å‡†ç¡®æ€§</h3>
<p>ä¸ºè¡Œä¸ºæ¸…æ™°åº¦ç²¾å¿ƒè®¾è®¡ç¤ºä¾‹ï¼š</p>
<ul>
<li>ä½¿ç”¨çœŸå®æ•°æ®ï¼ˆçœŸå®åŸå¸‚åç§°ã€åˆç†ä»·æ ¼ï¼Œè€Œä¸æ˜¯ "string" æˆ– "value"ï¼‰</li>
<li>å±•ç¤ºæœ€å°‘ã€éƒ¨åˆ†å’Œå®Œæ•´è§„èŒƒæ¨¡å¼çš„å¤šæ ·æ€§</li>
<li>ä¿æŒç®€æ´ï¼šæ¯ä¸ªå·¥å…· 1-5 ä¸ªç¤ºä¾‹</li>
<li>å…³æ³¨æ­§ä¹‰ï¼ˆä»…åœ¨æ­£ç¡®ä½¿ç”¨ä»æ¨¡å¼ä¸­ä¸æ˜æ˜¾çš„åœ°æ–¹æ·»åŠ ç¤ºä¾‹ï¼‰</li>
</ul>
<h2 data-id="heading-24">å¼€å§‹ä½¿ç”¨</h2>
<p>è¿™äº›åŠŸèƒ½åœ¨ beta ä¸­å¯ç”¨ã€‚è¦å¯ç”¨å®ƒä»¬ï¼Œæ·»åŠ  beta æ ‡é¢˜å¹¶åŒ…å«æ‚¨éœ€è¦çš„å·¥å…·ï¼š</p>
<pre><code class="hljs language-python" lang="python">client.beta.messages.create(
    betas=[<span class="hljs-string">"advanced-tool-use-2025-11-20"</span>],
    model=<span class="hljs-string">"claude-sonnet-4-5-20250929"</span>,
    max_tokens=<span class="hljs-number">4096</span>,
    tools=[
        {<span class="hljs-string">"type"</span>: <span class="hljs-string">"tool_search_tool_regex_20251119"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"tool_search_tool_regex"</span>},
        {<span class="hljs-string">"type"</span>: <span class="hljs-string">"code_execution_20250825"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"code_execution"</span>},
        <span class="hljs-comment"># æ‚¨çš„å¸¦æœ‰ defer_loadingã€allowed_callers å’Œ input_examples çš„å·¥å…·</span>
    ]
)
</code></pre>
<p>æœ‰å…³è¯¦ç»†çš„ API æ–‡æ¡£å’Œ SDK ç¤ºä¾‹ï¼Œè¯·å‚é˜…ï¼š</p>
<ul>
<li>å·¥å…·æœç´¢å·¥å…·çš„æ–‡æ¡£å’Œ cookbook</li>
<li>ç¨‹åºåŒ–å·¥å…·è°ƒç”¨çš„æ–‡æ¡£å’Œ cookbook</li>
<li>å·¥å…·ä½¿ç”¨ç¤ºä¾‹çš„æ–‡æ¡£</li>
</ul>
<p>è¿™äº›åŠŸèƒ½å°†å·¥å…·ä½¿ç”¨ä»ç®€å•çš„å‡½æ•°è°ƒç”¨è½¬å‘æ™ºèƒ½ç¼–æ’ã€‚å½“ agents å¤„ç†è·¨è¶Šæ•°åä¸ªå·¥å…·å’Œå¤§å‹æ•°æ®é›†çš„æ›´å¤æ‚å·¥ä½œæµæ—¶ï¼ŒåŠ¨æ€å‘ç°ã€é«˜æ•ˆæ‰§è¡Œå’Œå¯é è°ƒç”¨æˆä¸ºåŸºç¡€ã€‚</p>
<p>æˆ‘ä»¬æœŸå¾…çœ‹åˆ°æ‚¨æ„å»ºçš„ä¸œè¥¿ã€‚</p>
<h2 data-id="heading-25">è‡´è°¢</h2>
<p>ç”± Bin Wu æ’°å†™ï¼ŒAdam Jonesã€Artur Renaultã€Henry Tayã€Jake Nobleã€Nathan McCandlishã€Noah Picardã€Sam Jiang å’Œ Claude å¼€å‘è€…å¹³å°å›¢é˜Ÿè´¡çŒ®ã€‚è¿™é¡¹å·¥ä½œå»ºç«‹åœ¨ Chris Gorgolewskiã€Daniel Jiangã€Jeremy Fox å’Œ Mike Lambert çš„åŸºç¡€ç ”ç©¶ä¹‹ä¸Šã€‚æˆ‘ä»¬ä¹Ÿä»æ•´ä¸ª AI ç”Ÿæ€ç³»ç»Ÿä¸­æ±²å–çµæ„Ÿï¼ŒåŒ…æ‹¬ Joel Pobar çš„ LLMVMã€Cloudflare çš„ä»£ç æ¨¡å¼å’Œä»£ç æ‰§è¡Œä½œä¸º MCPã€‚ç‰¹åˆ«æ„Ÿè°¢ Andy Schumeisterã€Hamish Kerrã€Keir Bradwellã€Matt Bleifer å’Œ Molly Vorwerck çš„æ”¯æŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251201-251205ï¼‰]]></title>    <link>https://juejin.cn/post/7580278296837996578</link>    <guid>https://juejin.cn/post/7580278296837996578</guid>    <pubDate>2025-12-06T17:02:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580278296837996578" data-draft-id="7580288235030855680" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251201-251205ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-06T17:02:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ"/> <meta itemprop="url" content="https://juejin.cn/user/2831954919569245"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251201-251205ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2831954919569245/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T17:02:12.000Z" title="Sat Dec 06 2025 17:02:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»31åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">From Code Foundation Models to Agents and Applications: A Practical Guide to Code Intelligence</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.18538" target="_blank" title="https://arxiv.org/abs/2511.18538" ref="nofollow noopener noreferrer">ä»ä»£ç åŸºç¡€æ¨¡å‹åˆ°æ™ºèƒ½ä½“ä¸åº”ç”¨ï¼šä»£ç æ™ºèƒ½å®ç”¨æŒ‡å—</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹ (LLMs) ä»æ ¹æœ¬ä¸Šæ”¹å˜äº†è‡ªåŠ¨åŒ–è½¯ä»¶å¼€å‘ï¼Œå®ç°äº†å°†è‡ªç„¶è¯­è¨€æè¿°ç›´æ¥è½¬æ¢ä¸ºåŠŸèƒ½ä»£ç ï¼Œå¹¶é€šè¿‡è¯¸å¦‚ GitHub Copilot (Microsoft)ã€Cursor (Anysphere)ã€Trae (ByteDance) å’Œ Claude Code (Anthropic) ç­‰å·¥å…·æ¨åŠ¨äº†å•†ä¸šåº”ç”¨ã€‚è¯¥é¢†åŸŸå·²ä»åŸºäºè§„åˆ™çš„ç³»ç»Ÿæ¼”è¿›ä¸ºåŸºäº Transformer çš„æ¶æ„ï¼Œåœ¨ HumanEval ç­‰åŸºå‡†æµ‹è¯•ä¸Šçš„æ€§èƒ½ä»ä¸ªä½æ•°æˆåŠŸç‡æå‡è‡³è¶…è¿‡ 95%ã€‚åœ¨æœ¬å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä»½å…³äºä»£ç å¤§è¯­è¨€æ¨¡å‹çš„å…¨é¢ç»¼è¿°ä¸å®ç”¨æŒ‡å—ï¼ˆåŒ…å«ä¸€ç³»åˆ—åˆ†æå’Œæ¢ç´¢æ€§å®éªŒï¼‰ï¼Œç³»ç»Ÿæ€§åœ°å®¡è§†äº†ä»æ•°æ®ç®¡ç†åˆ°åè®­ç»ƒçš„å®Œæ•´æ¨¡å‹ç”Ÿå‘½å‘¨æœŸï¼Œæ¶‰åŠé«˜çº§æç¤ºèŒƒå¼ã€ä»£ç é¢„è®­ç»ƒã€ç›‘ç£å¾®è°ƒã€å¼ºåŒ–å­¦ä¹ ä»¥åŠè‡ªä¸»ç¼–ç æ™ºèƒ½ä½“ã€‚æˆ‘ä»¬è¯„ä¼°äº†é€šç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆGPT-4ã€Claudeã€LLaMAï¼‰ä¸ä»£ç ä¸“ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆStarCoderã€Code LLaMAã€DeepSeek-Coderã€QwenCoderï¼‰çš„ä»£ç èƒ½åŠ›ï¼Œå¹¶æ‰¹åˆ¤æ€§åœ°æ¢è®¨äº†ç›¸å…³æŠ€æœ¯ã€è®¾è®¡å†³ç­–åŠå…¶æƒè¡¡ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬é˜æ˜äº†å­¦æœ¯ç ”ç©¶ï¼ˆä¾‹å¦‚åŸºå‡†æµ‹è¯•ä¸ä»»åŠ¡ï¼‰ä¸å®é™…éƒ¨ç½²ï¼ˆä¾‹å¦‚è½¯ä»¶ç›¸å…³çš„ä»£ç ä»»åŠ¡ï¼‰ä¹‹é—´çš„å·®è·ï¼Œæ¶µç›–ä»£ç æ­£ç¡®æ€§ã€å®‰å…¨æ€§ã€å¤§å‹ä»£ç åº“çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥ä»¥åŠä¸å¼€å‘å·¥ä½œæµçš„é›†æˆï¼Œå¹¶å°†æœ‰å‰æ™¯çš„ç ”ç©¶æ–¹å‘ä¸å®é™…éœ€æ±‚ç›¸å…³è”ã€‚æœ€åï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ç³»åˆ—å®éªŒï¼Œå¯¹ä»£ç é¢„è®­ç»ƒã€ç›‘ç£å¾®è°ƒå’Œå¼ºåŒ–å­¦ä¹ è¿›è¡Œäº†å…¨é¢åˆ†æï¼Œå†…å®¹æ¶µç›–ç¼©æ”¾å®šå¾‹ã€æ¡†æ¶é€‰æ‹©ã€è¶…å‚æ•°æ•æ„Ÿæ€§ã€æ¨¡å‹æ¶æ„å’Œæ•°æ®é›†æ¯”è¾ƒã€‚</p>
<h2 data-id="heading-1">DeepSeek-V3.2: Pushing the Frontier of Open Large Language Models</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.02556" target="_blank" title="https://arxiv.org/abs/2512.02556" ref="nofollow noopener noreferrer">DeepSeek-V3.2: æ¨åŠ¨å¼€æºå¤§è¯­è¨€æ¨¡å‹çš„å‰æ²¿</a></p>
<p>æˆ‘ä»¬æ¨å‡º DeepSeek-V3.2ï¼Œè¿™æ˜¯ä¸€ä¸ªå°†é«˜æ•ˆè®¡ç®—ä¸å“è¶Šçš„æ¨ç†åŠæ™ºèƒ½ä½“æ€§èƒ½èä¸ºä¸€ä½“çš„æ¨¡å‹ã€‚DeepSeek-V3.2 çš„å…³é”®æŠ€æœ¯çªç ´å¦‚ä¸‹ï¼š(1) DeepSeek ç¨€ç–æ³¨æ„åŠ› (DSA)ï¼šæˆ‘ä»¬å¼•å…¥äº† DSAï¼Œè¿™æ˜¯ä¸€ç§é«˜æ•ˆçš„æ³¨æ„åŠ›æœºåˆ¶ï¼Œèƒ½åœ¨é•¿ä¸Šä¸‹æ–‡åœºæ™¯ä¸­æ˜¾è‘—é™ä½è®¡ç®—å¤æ‚åº¦ï¼ŒåŒæ—¶ä¿æŒæ¨¡å‹æ€§èƒ½ã€‚(2) å¯æ‰©å±•çš„å¼ºåŒ–å­¦ä¹ æ¡†æ¶ï¼šé€šè¿‡é‡‡ç”¨ç¨³å¥çš„å¼ºåŒ–å­¦ä¹ åè®®å¹¶æ‰©å±•åè®­ç»ƒé˜¶æ®µçš„è®¡ç®—è§„æ¨¡ï¼ŒDeepSeek-V3.2 çš„æ€§èƒ½ä¸ GPT-5 ç›¸å½“ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬çš„é«˜è®¡ç®—é…ç½®å˜ä½“ DeepSeek-V3.2-Speciale è¶…è¶Šäº† GPT-5ï¼Œå…¶æ¨ç†èƒ½åŠ›ä¸ Gemini-3.0-Pro å¹¶é©¾é½é©±ï¼Œåœ¨ 2025 å¹´å›½é™…æ•°å­¦å¥¥æ—åŒ¹å…‹ç«èµ› (IMO) å’Œå›½é™…ä¿¡æ¯å­¦å¥¥æ—åŒ¹å…‹ç«èµ› (IOI) ä¸­å‡å–å¾—äº†é‡‘ç‰Œçº§åˆ«çš„æˆç»©ã€‚(3) å¤§è§„æ¨¡é¢å‘æ™ºèƒ½ä½“çš„ä»»åŠ¡åˆæˆæµæ°´çº¿ï¼šä¸ºäº†å°†æ¨ç†èƒ½åŠ›èå…¥å·¥å…·ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ç§æ–°é¢–çš„åˆæˆæµæ°´çº¿ï¼Œèƒ½å¤Ÿç³»ç»Ÿæ€§åœ°å¤§è§„æ¨¡ç”Ÿæˆè®­ç»ƒæ•°æ®ã€‚è¯¥æ–¹æ³•æ”¯æŒå¯æ‰©å±•çš„æ™ºèƒ½ä½“åè®­ç»ƒï¼Œä»è€Œåœ¨å¤æ‚ã€äº¤äº’å¼çš„ç¯å¢ƒä¸­ï¼Œæ˜¾è‘—æå‡äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å’Œéµå¾ªæŒ‡ä»¤çš„é²æ£’æ€§ã€‚</p>
<h2 data-id="heading-2">LongVT: é€šè¿‡åŸç”Ÿå·¥å…·è°ƒç”¨å®ç°â€œé•¿è§†é¢‘æ€ç»´â€</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.20785" target="_blank" title="https://arxiv.org/abs/2511.20785" ref="nofollow noopener noreferrer">LongVT: é€šè¿‡åŸç”Ÿå·¥å…·è°ƒç”¨å®ç°â€œé•¿è§†é¢‘æ€ç»´â€</a></p>
<p>å¤§æ¨¡æ€æ¨¡å‹ (Large Multimodal Models, LMMs) åœ¨ç»“åˆæ–‡æœ¬æ€ç»´é“¾è¿›è¡Œè§†é¢‘æ¨ç†æ–¹é¢å±•ç°å‡ºå·¨å¤§æ½œåŠ›ã€‚ç„¶è€Œï¼Œå®ƒä»¬ä»æ˜“äº§ç”Ÿå¹»è§‰ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†é‚£äº›è¯æ®ç¨€ç–ä¸”æ—¶é—´åˆ†å¸ƒåˆ†æ•£çš„é•¿è§†é¢‘æ—¶ã€‚å—äººç±»ç†è§£é•¿è§†é¢‘æ–¹å¼ï¼ˆå…ˆå…¨å±€æ¦‚è§ˆï¼Œå†ç»†æŸ¥ç›¸å…³ç‰‡æ®µï¼‰çš„å¯å‘ï¼Œæˆ‘ä»¬æå‡ºäº† LongVTï¼Œä¸€ä¸ªç«¯åˆ°ç«¯çš„æ™ºèƒ½ä½“æ¡†æ¶ã€‚è¯¥æ¡†æ¶é€šè¿‡äº¤é”™è¿›è¡Œçš„â€œå¤šæ¨¡æ€å·¥å…·è°ƒç”¨æ€ç»´é“¾â€ï¼Œå®ç°äº†â€œç”¨é•¿è§†é¢‘è¿›è¡Œæ€è€ƒâ€ã€‚å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬å°† LMMs å›ºæœ‰çš„æ—¶é—´å®šä½èƒ½åŠ›ä½œä¸ºä¸€ç§åŸç”Ÿè§†é¢‘è£å‰ªå·¥å…·ï¼Œç”¨äºèšç„¦ç‰¹å®šè§†é¢‘ç‰‡æ®µå¹¶é‡æ–°é‡‡æ ·æ›´ç»†ç²’åº¦çš„è§†é¢‘å¸§ã€‚è¿™ç§ä»å…¨å±€åˆ°å±€éƒ¨çš„æ¨ç†å¾ªç¯ä¼šæŒç»­è¿›è¡Œï¼Œç›´è‡³ç­”æ¡ˆèƒ½å¤ŸåŸºäºæ£€ç´¢åˆ°çš„è§†è§‰è¯æ®å¾—åˆ°ç¡®è®¤ã€‚é’ˆå¯¹é•¿è§†é¢‘æ¨ç†ä»»åŠ¡ä¸­ç»†ç²’åº¦é—®ç­” (QA) æ•°æ®ç¨€ç¼ºçš„é—®é¢˜ï¼Œæˆ‘ä»¬æ„å»ºå¹¶å°†å‘å¸ƒä¸€ä¸ªåä¸º VideoSIAH çš„æ•°æ®å¥—ä»¶ï¼Œä»¥æ”¯æŒæ¨¡å‹çš„è®­ç»ƒä¸è¯„ä¼°ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬çš„è®­ç»ƒæ•°æ®é›†åŒ…å«ï¼š24.79 ä¸‡ä¸ªç”¨äºå·¥å…·é›†æˆå†·å¯åŠ¨ç›‘ç£å¾®è°ƒçš„æ ·æœ¬ã€1600 ä¸ªç”¨äºæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ çš„æ ·æœ¬ï¼Œä»¥åŠ 1.54 ä¸‡ä¸ªç”¨äºæ™ºèƒ½ä½“å¼ºåŒ–å¾®è°ƒçš„æ ·æœ¬ã€‚æˆ‘ä»¬çš„è¯„ä¼°åŸºå‡†åŒ…å« 1280 ä¸ª QA å¯¹ï¼Œè¿™äº›æ•°æ®é€šè¿‡ä¸€ä¸ªåŠè‡ªåŠ¨çš„æ•°æ®æµæ°´çº¿ç²¾å¿ƒæ„å»ºï¼Œå¹¶ç»è¿‡äº†äººå·¥éªŒè¯ã€‚é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„ä¸‰é˜¶æ®µè®­ç»ƒç­–ç•¥å’Œå¹¿æ³›çš„å®è¯è¯„ä¼°ï¼ŒLongVT åœ¨å››ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„é•¿è§†é¢‘ç†è§£ä¸æ¨ç†åŸºå‡†æµ‹è¯•ä¸­ï¼Œå‡æŒç»­è¶…è¶Šç°æœ‰çš„å¼ºåŸºçº¿æ¨¡å‹ã€‚æˆ‘ä»¬çš„ä»£ç ã€æ•°æ®åŠæ¨¡å‹æ£€æŸ¥ç‚¹å‡å·²å…¬å¼€ï¼Œåœ°å€ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FEvolvingLMMs-Lab%2FLongVT%25E3%2580%2582" target="_blank" title="https://github.com/EvolvingLMMs-Lab/LongVT%E3%80%82" ref="nofollow noopener noreferrer">github.com/EvolvingLMMâ€¦</a></p>
<h2 data-id="heading-3">Z-Image: An Efficient Image Generation Foundation Model with Single-Stream Diffusion Transformer</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.22699" target="_blank" title="https://arxiv.org/abs/2511.22699" ref="nofollow noopener noreferrer">Z-Image: åŸºäºå•æµæ‰©æ•£Transformerçš„é«˜æ•ˆå›¾åƒç”ŸæˆåŸºç¡€æ¨¡å‹</a></p>
<p>å½“å‰ï¼Œé«˜æ€§èƒ½å›¾åƒç”Ÿæˆé¢†åŸŸä¸»è¦ç”±ä¸“æœ‰ç³»ç»Ÿä¸»å¯¼ï¼Œä¾‹å¦‚ Nano Banana Pro å’Œ Seedream 4.0ã€‚è€Œé¢†å…ˆçš„å¼€æºæ›¿ä»£æ–¹æ¡ˆï¼Œå¦‚ Qwen-Imageã€Hunyuan-Image-3.0 å’Œ FLUX.2ï¼Œåˆ™æ™®éå‚æ•°é‡åºå¤§ (200äº¿è‡³800äº¿)ï¼Œå¯¼è‡´å…¶åœ¨æ¶ˆè´¹çº§ç¡¬ä»¶ä¸Šè¿›è¡Œæ¨ç†å’Œå¾®è°ƒéƒ½æä¸ç°å®ã€‚ä¸ºå¼¥è¡¥è¿™ä¸€ç©ºç™½ï¼Œæˆ‘ä»¬æå‡ºäº† Z-Imageï¼Œè¿™æ˜¯ä¸€ä¸ªå‚æ•°è§„æ¨¡ä¸º 60äº¿ çš„é«˜æ•ˆåŸºç¡€ç”Ÿæˆæ¨¡å‹ã€‚å®ƒåŸºäºå¯æ‰©å±•å•æµæ‰©æ•£Transformer (Scalable Single-Stream Diffusion Transformer, S3-DiT) æ¶æ„æ„å»ºï¼Œæ—¨åœ¨æŒ‘æˆ˜â€œä¸è®¡æˆæœ¬å †å è§„æ¨¡â€çš„è¡Œä¸šèŒƒå¼ã€‚é€šè¿‡å¯¹æ•´ä¸ªæ¨¡å‹ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç³»ç»Ÿæ€§ä¼˜åŒ–â€”â€”ä»ç²¾å¿ƒæ„å»ºçš„æ•°æ®åŸºç¡€è®¾æ–½åˆ°é«˜æ•ˆç²¾ç®€çš„è®­ç»ƒæ–¹æ¡ˆâ€”â€”æˆ‘ä»¬ä»…æ¶ˆè€—äº† 31.4ä¸‡ H800 GPU å°æ—¶ (çº¦åˆ 63ä¸‡ç¾å…ƒ) ä¾¿å®Œæˆäº†å®Œæ•´çš„è®­ç»ƒæµç¨‹ã€‚æˆ‘ä»¬ç»“åˆå¥–åŠ±åè®­ç»ƒçš„å°‘æ­¥è’¸é¦æ–¹æ¡ˆè¿›ä¸€æ­¥å¾—åˆ°äº† Z-Image-Turboï¼Œè¯¥ç‰ˆæœ¬ä¸ä»…èƒ½åœ¨ä¼ä¸šçº§ H800 GPU ä¸Šå®ç°äºšç§’çº§æ¨ç†å»¶è¿Ÿï¼Œè¿˜èƒ½å…¼å®¹æ˜¾å­˜å°äº 16GB çš„æ¶ˆè´¹çº§ç¡¬ä»¶ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„å…¨é¢„è®­ç»ƒèŒƒå¼ä¹Ÿæ”¯æŒé«˜æ•ˆè®­ç»ƒå‡º Z-Image-Editï¼Œè¿™æ˜¯ä¸€ä¸ªå…·å¤‡å‡ºè‰²æŒ‡ä»¤éµå¾ªèƒ½åŠ›çš„å›¾åƒç¼–è¾‘æ¨¡å‹ã€‚å®šæ€§ä¸å®šé‡å®éªŒå‡è¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ¨¡å‹åœ¨å¤šä¸ªç»´åº¦ä¸Šçš„æ€§èƒ½å‡å¯æ¯”è‚©ä¹ƒè‡³è¶…è¶Šé¢†å…ˆçš„ç«äº‰å¯¹æ‰‹ã€‚å°¤ä¸ºçªå‡ºçš„æ˜¯ï¼ŒZ-Image åœ¨ç”Ÿæˆé€¼çœŸå›¾åƒå’Œæ¸²æŸ“åŒè¯­æ–‡æœ¬æ–¹é¢è¡¨ç°å“è¶Šï¼Œå…¶æ•ˆæœè¶³ä»¥åª²ç¾é¡¶å°–çš„å•†ä¸šæ¨¡å‹ã€‚è¿™è¯æ˜äº†ï¼Œå³ä½¿å¤§å¹…é™ä½è®¡ç®—å¼€é”€ï¼ŒåŒæ ·èƒ½å¤Ÿå®ç°æœ€å…ˆè¿›çš„æ€§èƒ½ã€‚ä¸ºä¿ƒè¿›å¯è·å–ã€ä½æˆæœ¬ä¸”æ€§èƒ½é¢†å…ˆçš„ç”Ÿæˆæ¨¡å‹å‘å±•ï¼Œæˆ‘ä»¬å·²å…¬å¼€ä»£ç ã€æ¨¡å‹æƒé‡å¹¶æä¾›åœ¨çº¿æ¼”ç¤ºã€‚</p>
<h2 data-id="heading-4">Live Avatar: æµå¼å®æ—¶éŸ³é¢‘é©±åŠ¨çš„æ— é™é•¿åº¦è™šæ‹Ÿå½¢è±¡ç”Ÿæˆ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.04677" target="_blank" title="https://arxiv.org/abs/2512.04677" ref="nofollow noopener noreferrer">Live Avatar: æµå¼å®æ—¶éŸ³é¢‘é©±åŠ¨çš„æ— é™é•¿åº¦è™šæ‹Ÿå½¢è±¡ç”Ÿæˆ</a></p>
<p>ç°æœ‰åŸºäºæ‰©æ•£æ¨¡å‹çš„è§†é¢‘ç”Ÿæˆæ–¹æ³•ï¼Œä»æ ¹æœ¬ä¸Šå—é™äºé¡ºåºè®¡ç®—å’Œé•¿æ—¶ä¸ä¸€è‡´æ€§é—®é¢˜ï¼Œåˆ¶çº¦äº†å…¶åœ¨å®æ—¶æµå¼éŸ³é¢‘é©±åŠ¨è™šæ‹Ÿå½¢è±¡åˆæˆä¸­çš„å®é™…é‡‡ç”¨ã€‚æˆ‘ä»¬æå‡ºäº† Live Avatarï¼Œä¸€ä¸ªç®—æ³•-ç³»ç»ŸååŒè®¾è®¡æ¡†æ¶ï¼Œèƒ½å¤Ÿåˆ©ç”¨ä¸€ä¸ª 140 äº¿å‚æ•°çš„æ‰©æ•£æ¨¡å‹ï¼Œå®ç°é«˜æ•ˆã€é«˜ä¿çœŸä¸”æ— é™é•¿åº¦çš„è™šæ‹Ÿå½¢è±¡ç”Ÿæˆã€‚æˆ‘ä»¬çš„æ–¹æ³•å¼•å…¥äº†æ—¶é—´æ­¥å¼ºåˆ¶æµæ°´çº¿å¹¶è¡Œ (Timestep-forcing Pipeline Parallelism, TPP)ï¼Œè¿™æ˜¯ä¸€ç§åˆ†å¸ƒå¼æ¨ç†èŒƒå¼ï¼Œå®ƒè·¨å¤šä¸ª GPU å¯¹å»å™ªæ­¥éª¤è¿›è¡Œæµæ°´çº¿å¤„ç†ï¼Œä»è€Œæœ‰æ•ˆæ‰“ç ´è‡ªå›å½’ç“¶é¢ˆï¼Œç¡®ä¿ç¨³å®šã€ä½å»¶è¿Ÿçš„å®æ—¶æµç”Ÿæˆã€‚ä¸ºäº†è¿›ä¸€æ­¥å¢å¼ºæ—¶é—´ä¸€è‡´æ€§ï¼Œå¹¶ç¼“è§£èº«ä»½æ¼‚ç§»å’Œé¢œè‰²ä¼ªå½±é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†æ»šåŠ¨é”šå®šå¸§æœºåˆ¶ (Rolling Sink Frame Mechanism, RSFM)ï¼Œè¯¥æœºåˆ¶é€šè¿‡åˆ©ç”¨ç¼“å­˜çš„å‚è€ƒå›¾åƒåŠ¨æ€é‡æ ¡å‡†å¤–è§‚ï¼Œä»¥ç»´æŒåºåˆ—ä¿çœŸåº¦ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬é‡‡ç”¨è‡ªå¼ºåˆ¶åˆ†å¸ƒåŒ¹é…è’¸é¦æŠ€æœ¯ï¼Œåœ¨ä¸ç‰ºç‰²è§†è§‰è´¨é‡çš„å‰æä¸‹ï¼Œå®ç°äº†å¤§è§„æ¨¡æ¨¡å‹çš„å› æœæ€§ã€å¯æµå¼åŒ–é€‚é…ã€‚Live Avatar å±•ç°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ï¼Œåœ¨ 5 å— H800 GPU ä¸Šå®ç°äº† 20 FPS çš„ç«¯åˆ°ç«¯ç”Ÿæˆé€Ÿåº¦ã€‚æ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œè¿™æ˜¯é¦–ä¸ªåœ¨æ­¤å‚æ•°é‡çº§ä¸Šå®ç°å®ç”¨åŒ–ã€å®æ—¶ã€é«˜ä¿çœŸè™šæ‹Ÿå½¢è±¡ç”Ÿæˆçš„å·¥ä½œã€‚æˆ‘ä»¬çš„ç ”ç©¶ä¸ºåœ¨å·¥ä¸šçº§é•¿è§†é¢‘åˆæˆåº”ç”¨ä¸­éƒ¨ç½²å…ˆè¿›æ‰©æ•£æ¨¡å‹ç¡®ç«‹äº†ä¸€ç§æ–°èŒƒå¼ã€‚</p>
<h2 data-id="heading-5">DAComp: å…¨æ•°æ®æ™ºèƒ½ç”Ÿå‘½å‘¨æœŸæ•°æ®æ™ºèƒ½ä½“åŸºå‡†æµ‹è¯•</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.04324" target="_blank" title="https://arxiv.org/abs/2512.04324" ref="nofollow noopener noreferrer">DAComp: å…¨æ•°æ®æ™ºèƒ½ç”Ÿå‘½å‘¨æœŸæ•°æ®æ™ºèƒ½ä½“åŸºå‡†æµ‹è¯•</a></p>
<p>ç°å®ä¸­çš„ä¼ä¸šæ•°æ®æ™ºèƒ½å·¥ä½œæµæ¶µç›–ä¸¤å¤§ç¯èŠ‚ï¼šä¸€æ˜¯å°†åŸå§‹æ•°æ®æºè½¬åŒ–ä¸ºå¯ä¾›åˆ†æè¡¨æ ¼çš„<strong>æ•°æ®å·¥ç¨‹</strong>ï¼ŒäºŒæ˜¯å°†è¿™äº›è¡¨æ ¼è½¬åŒ–ä¸ºå†³ç­–æ´å¯Ÿçš„<strong>æ•°æ®åˆ†æ</strong>ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†DACompåŸºå‡†ï¼Œå®ƒåŒ…å«210ä¸ªä»»åŠ¡ï¼Œæ—¨åœ¨æ¨¡æ‹Ÿè¿™äº›å¤æ‚çš„å·¥ä½œæµã€‚æ•°æ®å·¥ç¨‹ï¼ˆDEï¼‰ä»»åŠ¡è¦æ±‚å¯¹å·¥ä¸šçº§æ•°æ®æ¨¡å¼è¿›è¡Œä»“åº“å±‚é¢çš„å·¥ç¨‹æ“ä½œï¼ŒåŒ…æ‹¬ä»é›¶å¼€å§‹è®¾è®¡å’Œæ„å»ºå¤šé˜¶æ®µSQLç®¡é“ï¼Œä»¥åŠåœ¨éœ€æ±‚æ¼”è¿›æ—¶å¯¹ç°æœ‰ç³»ç»Ÿè¿›è¡Œæ”¹é€ ã€‚æ•°æ®åˆ†æï¼ˆDAï¼‰ä»»åŠ¡åˆ™æå‡ºå¼€æ”¾å¼çš„ä¸šåŠ¡é—®é¢˜ï¼Œè¦æ±‚è¿›è¡Œæˆ˜ç•¥è§„åˆ’ã€é€šè¿‡è¿­ä»£ç¼–ç è¿›è¡Œæ¢ç´¢æ€§åˆ†æã€è§£è¯»ä¸­é—´ç»“æœï¼Œå¹¶æœ€ç»ˆç»¼åˆå‡ºå¯æ‰§è¡Œçš„å»ºè®®ã€‚å·¥ç¨‹ç±»ä»»åŠ¡é‡‡ç”¨åŸºäºæ‰§è¡Œçš„å¤šæŒ‡æ ‡è¯„ä¼°ä½“ç³»è¿›è¡Œè¯„åˆ†ã€‚å¼€æ”¾å¼ä»»åŠ¡åˆ™ç”±ä¸€ä¸ªç»è¿‡å®éªŒéªŒè¯çš„ã€å¯é çš„LLM-judgeè¿›è¡Œè¯„ä¼°ï¼Œè¯¥è¯„ä¼°å™¨éµå¾ªä¸€å¥—åˆ†å±‚ä¸”ç²¾å¿ƒè®¾è®¡çš„è¯„åˆ†æ ‡å‡†ã€‚</p>
<p>æˆ‘ä»¬çš„å®éªŒè¡¨æ˜ï¼Œå³ä½¿æ˜¯å½“å‰æœ€å…ˆè¿›çš„AIæ™ºèƒ½ä½“åœ¨DACompä¸Šä¹Ÿè¡¨ç°æ¬ ä½³ã€‚æ•°æ®å·¥ç¨‹ä»»åŠ¡çš„è¡¨ç°å°¤å…¶ä½ä¸‹ï¼ŒæˆåŠŸç‡ä¸è¶³20%ï¼Œè¿™æš´éœ²äº†åœ¨æ•´ä½“ç®¡é“ç¼–æ’ï¼ˆè€Œä¸ä»…ä»…æ˜¯ä»£ç ç”Ÿæˆï¼‰æ–¹é¢å­˜åœ¨å…³é”®ç“¶é¢ˆã€‚æ•°æ®åˆ†æä»»åŠ¡çš„å¹³å‡å¾—åˆ†ä¹Ÿä½äº40%ï¼Œçªæ˜¾äº†æ™ºèƒ½ä½“åœ¨å¼€æ”¾å¼æ¨ç†æ–¹é¢å­˜åœ¨ä¸¥é‡ä¸è¶³ï¼Œå¹¶è¯æ˜å·¥ç¨‹èƒ½åŠ›ä¸åˆ†æèƒ½åŠ›æ˜¯ä¸¤ç§æˆªç„¶ä¸åŒçš„æŠ€èƒ½ã€‚é€šè¿‡æ¸…æ™°åœ°è¯Šæ–­è¿™äº›å±€é™ï¼ŒDACompä¸ºå¼€å‘çœŸæ­£é€‚ç”¨äºä¼ä¸šç¯å¢ƒçš„ã€èƒ½åŠ›å…¨é¢çš„è‡ªä¸»æ•°æ®æ™ºèƒ½ä½“æä¾›äº†ä¸€ä¸ªä¸¥è°¨ä¸”è´´è¿‘ç°å®çš„æµ‹è¯•å¹³å°ã€‚æˆ‘ä»¬çš„æ•°æ®ä¸ä»£ç å…¬å¼€äº <a href="https://link.juejin.cn?target=https%3A%2F%2Fda-comp.github.io%25E3%2580%2582" target="_blank" title="https://da-comp.github.io%E3%80%82" ref="nofollow noopener noreferrer">da-comp.github.ioã€‚</a></p>
<h2 data-id="heading-6">Qwen3-VL Technical Report</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.21631" target="_blank" title="https://arxiv.org/abs/2511.21631" ref="nofollow noopener noreferrer">Qwen3-VL æŠ€æœ¯æŠ¥å‘Š</a></p>
<p>æˆ‘ä»¬æ¨å‡º Qwen3-VLï¼Œè¿™æ˜¯ Qwen ç³»åˆ—è¿„ä»Šä¸ºæ­¢èƒ½åŠ›æœ€å¼ºçš„è§†è§‰è¯­è¨€æ¨¡å‹ (Vision-Language Model)ï¼Œåœ¨å¹¿æ³›çš„å¤šæ¨¡æ€åŸºå‡†æµ‹è¯•ä¸­å‡å–å¾—äº†å“è¶Šæ€§èƒ½ã€‚è¯¥æ¨¡å‹åŸç”Ÿæ”¯æŒé«˜è¾¾ 256K token çš„äº¤é”™å¤šæ¨¡æ€ä¸Šä¸‹æ–‡ï¼Œèƒ½å¤Ÿæ— ç¼èåˆæ–‡æœ¬ã€å›¾åƒä¸è§†é¢‘è¾“å…¥ã€‚æ¨¡å‹ç³»åˆ—åŒ…å«å¯†é›† (2B/4B/8B/32B) ä¸ä¸“å®¶æ··åˆ (Mixture-of-Experts, MoE) (30B-A3B/235B-A22B) ä¸¤ç§æ¶æ„å˜ä½“ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹å¯¹å»¶è¿Ÿä¸è´¨é‡çš„æƒè¡¡éœ€æ±‚ã€‚Qwen3-VL çš„æ ¸å¿ƒä¼˜åŠ¿ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š(i) æ˜¾è‘—å¢å¼ºçš„çº¯æ–‡æœ¬ç†è§£èƒ½åŠ›ï¼Œåœ¨å¤šé¡¹æµ‹è¯•ä¸­è¶…è¶Šäº†åŒç­‰è§„æ¨¡çš„çº¯æ–‡æœ¬éª¨å¹²æ¨¡å‹ï¼›(ii) å¼ºå¤§çš„é•¿ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›ï¼Œå…¶åŸç”Ÿ 256K token çª—å£åŒæ—¶æ”¯æŒçº¯æ–‡æœ¬åŠäº¤é”™çš„å¤šæ¨¡æ€è¾“å…¥ï¼Œå¯å¯¹é•¿æ–‡æ¡£å’Œè§†é¢‘å†…å®¹å®ç°å‡†ç¡®çš„ä¿¡æ¯ä¿æŒã€æ£€ç´¢ä¸äº¤å‰å¼•ç”¨ï¼›(iii) å…ˆè¿›çš„è·¨æ¨¡æ€æ¨ç†èƒ½åŠ›ï¼Œåœ¨å•å›¾ã€å¤šå›¾åŠè§†é¢‘ä»»åŠ¡ä¸Šå‡è¡¨ç°ä¼˜å¼‚ï¼Œåœ¨ MMMU åŠè§†è§‰æ•°å­¦åŸºå‡† (å¦‚ MathVista å’Œ MathVision) ç­‰ç»¼åˆè¯„ä¼°ä¸­å–å¾—äº†é¢†å…ˆçš„æ€§èƒ½è¡¨ç°ã€‚åœ¨æ¨¡å‹æ¶æ„å±‚é¢ï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸‰é¡¹å…³é”®å‡çº§ï¼š(i) å¼•å…¥å¢å¼ºå‹äº¤é”™-MRoPE (interleaved-MRoPE)ï¼Œä»¥æå‡å¯¹å›¾åƒä¸è§†é¢‘çš„æ—¶ç©ºå»ºæ¨¡èƒ½åŠ›ï¼›(ii) é›†æˆ DeepStack æ¨¡å—ï¼Œé€šè¿‡æœ‰æ•ˆåˆ©ç”¨å¤šå±‚æ¬¡ ViT ç‰¹å¾æ¥å¼ºåŒ–è§†è§‰ä¸è¯­è¨€çš„å¯¹é½ï¼›(iii) ä¸ºè§†é¢‘ä»»åŠ¡è®¾è®¡äº†åŸºäºæ–‡æœ¬çš„æ—¶é—´å¯¹é½æœºåˆ¶ï¼Œä» T-RoPE æ¼”è¿›ä¸ºæ˜¾å¼çš„æ–‡æœ¬æ—¶é—´æˆ³å¯¹é½ï¼Œä»è€Œå®ç°æ›´ç²¾å‡†çš„æ—¶åºå®šä½ã€‚åœ¨ç›¸è¿‘çš„ token é¢„ç®—ä¸å»¶è¿Ÿçº¦æŸä¸‹ï¼ŒQwen3-VL åœ¨å¯†é›†ä¸ MoE æ¶æ„ä¸­å‡å±•ç°å‡ºå“è¶Šçš„æ€§èƒ½ã€‚æˆ‘ä»¬æœŸå¾… Qwen3-VL èƒ½å¤Ÿæˆä¸ºå®é™…å·¥ä½œæµä¸­ï¼Œæ”¯æ’‘å›¾åƒæ¨ç†ã€æ™ºèƒ½ä½“å†³ç­–ä»¥åŠå¤šæ¨¡æ€ä»£ç æ™ºèƒ½çš„åŸºç¡€å¼•æ“ã€‚</p>
<h2 data-id="heading-7">ToolOrchestra: é€šè¿‡é«˜æ•ˆçš„æ¨¡å‹ä¸å·¥å…·ç¼–æ’å¢å¼ºæ™ºèƒ½</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.21689" target="_blank" title="https://arxiv.org/abs/2511.21689" ref="nofollow noopener noreferrer">ToolOrchestra: é€šè¿‡é«˜æ•ˆçš„æ¨¡å‹ä¸å·¥å…·ç¼–æ’å¢å¼ºæ™ºèƒ½</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹ (LLM) æ˜¯å¼ºå¤§çš„é€šç”¨ç³»ç»Ÿï¼Œä½†åœ¨è§£å†³è¯¸å¦‚â€œäººç±»ç»ˆæè€ƒè¯•â€ (Humanity's Last Exam, HLE) è¿™ç±»æ·±åˆ»ä¸”å¤æ‚çš„é—®é¢˜æ—¶ï¼Œä»é¢ä¸´æ¦‚å¿µä¸Šçš„æŒ‘æˆ˜å’Œè¾ƒé«˜çš„è®¡ç®—æˆæœ¬ã€‚æˆ‘ä»¬çš„ç ”ç©¶è¡¨æ˜ï¼Œé€šè¿‡å°å‹ç¼–æ’å™¨æ¥ç®¡ç†å…¶ä»–æ¨¡å‹ä¸å¤šæ ·åŒ–å·¥å…·ï¼Œä¸ä»…èƒ½å¤Ÿçªç ´æ™ºèƒ½æ°´å¹³çš„æé™ï¼Œè¿˜èƒ½æå‡è§£å†³å¤æ‚ AI æ™ºèƒ½ä½“ (AI Agent) ä»»åŠ¡çš„æ•ˆç‡ã€‚æœ¬æ–‡æå‡ºäº† ToolOrchestraï¼Œä¸€ç§ç”¨äºè®­ç»ƒå°å‹ç¼–æ’å™¨ä»¥åè°ƒæ™ºèƒ½å·¥å…·çš„æ–¹æ³•ã€‚è¯¥æ–¹æ³•æ˜ç¡®é‡‡ç”¨å¼ºåŒ–å­¦ä¹ ï¼Œå¹¶è®¾è®¡äº†åŸºäºç»“æœã€æ•ˆç‡å’Œç”¨æˆ·åå¥½çš„å¥–åŠ±æœºåˆ¶ã€‚åŸºäº ToolOrchestraï¼Œæˆ‘ä»¬è®­ç»ƒå‡ºäº† Orchestratorï¼Œè¿™æ˜¯ä¸€ä¸ªæ‹¥æœ‰ 80 äº¿å‚æ•°çš„æ¨¡å‹ã€‚å¯¹äºç»™å®šçš„æŸ¥è¯¢ï¼ŒOrchestrator èƒ½ä»¥æ¯”ä»¥å¾€çš„å·¥å…·ä½¿ç”¨æ™ºèƒ½ä½“æ›´ä½çš„æˆæœ¬è·å¾—æ›´é«˜çš„å‡†ç¡®ç‡ï¼ŒåŒæ—¶å…¶å·¥å…·é€‰æ‹©è¡Œä¸ºèƒ½ä¸ç”¨æˆ·åå¥½ä¿æŒä¸€è‡´ã€‚åœ¨ HLE åŸºå‡†æµ‹è¯•ä¸­ï¼ŒOrchestrator å–å¾—äº† 37.1% çš„å¾—åˆ†ï¼Œè¶…è¶Šäº† GPT-5 (35.1%)ï¼Œå¹¶ä¸”æ•ˆç‡æ˜¯åè€…çš„ 2.5 å€ã€‚åœ¨ tau2-Bench å’Œ FRAMES åŸºå‡†ä¸Šï¼ŒOrchestrator ä»¥æ˜¾è‘—ä¼˜åŠ¿é¢†å…ˆäº GPT-5ï¼Œè€Œæˆæœ¬ä»…çº¦ä¸ºåè€…çš„ 30%ã€‚æ·±å…¥åˆ†æè¡¨æ˜ï¼ŒOrchestrator åœ¨å¤šé¡¹æŒ‡æ ‡ä¸‹å®ç°äº†æ€§èƒ½ä¸æˆæœ¬çš„æœ€ä½³æƒè¡¡ï¼Œå¹¶ä¸”å¯¹æœªè§è¿‡çš„å·¥å…·å±•ç°å‡ºå¼ºå¤§çš„æ³›åŒ–èƒ½åŠ›ã€‚è¿™äº›ç»“æœè¯æ˜ï¼Œåˆ©ç”¨è½»é‡çº§ç¼–æ’æ¨¡å‹ç»„åˆå¤šæ ·åŒ–å·¥å…·ï¼Œç›¸æ¯”ç°æœ‰æ–¹æ³•ä¸ä»…æ•ˆç‡æ›´é«˜ï¼Œè€Œä¸”æ•ˆæœæ›´å¥½ï¼Œä»è€Œä¸ºæ„å»ºå®ç”¨ã€å¯æ‰©å±•çš„å·¥å…·å¢å¼ºæ¨ç†ç³»ç»Ÿé“ºå¹³äº†é“è·¯ã€‚</p>
<h2 data-id="heading-8">Envision: é¢å‘å› æœä¸–ç•Œè¿‡ç¨‹æ´å¯Ÿçš„ç»Ÿä¸€ç†è§£ä¸ç”ŸæˆåŸºå‡†</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.01816" target="_blank" title="https://arxiv.org/abs/2512.01816" ref="nofollow noopener noreferrer">Envision: é¢å‘å› æœä¸–ç•Œè¿‡ç¨‹æ´å¯Ÿçš„ç»Ÿä¸€ç†è§£ä¸ç”ŸæˆåŸºå‡†</a></p>
<p>å½“å‰çš„å¤šæ¨¡æ€æ¨¡å‹æ—¨åœ¨é€šè¿‡ç»Ÿä¸€ç†è§£ä¸ç”Ÿæˆæ¥å…‹æœå•æ¨¡æ€è¡¨ç¤ºçš„å±€é™ï¼Œé€šå¸¸é‡‡ç”¨æ–‡æœ¬åˆ°å›¾åƒ (T2I) ä»»åŠ¡æ¥ç¡®ä¿è¯­ä¹‰ä¸€è‡´æ€§ã€‚ç„¶è€Œï¼Œå…¶åœ¨è®­ç»ƒå’Œè¯„ä¼°ä¸­å¯¹é™æ€å•å›¾åƒç”Ÿæˆçš„ä¾èµ–ï¼Œå¯¼è‡´äº†å¯¹é™æ€æ¨¡å¼åŒ¹é…ä¸è¯­ä¹‰èåˆçš„è¿‡æ‹Ÿåˆï¼ŒåŒæ—¶ä¹Ÿä»æ ¹æœ¬ä¸Šé™åˆ¶äº†æ¨¡å‹å¯¹éšæ—¶é—´æ¼”å˜çš„åŠ¨æ€è¿‡ç¨‹è¿›è¡Œå»ºæ¨¡çš„èƒ½åŠ›ã€‚ä¸ºåº”å¯¹è¿™äº›å±€é™ï¼Œæˆ‘ä»¬æå‡ºäº† Envisionâ€”â€”ä¸€ä¸ªç”¨äºé“¾å¼æ–‡æœ¬åˆ°å¤šå›¾åƒç”Ÿæˆçš„å› æœäº‹ä»¶è¿›å±•åŸºå‡†ã€‚è¯¥åŸºå‡†åŸºäºä¸–ç•ŒçŸ¥è¯†ï¼Œå¹¶ä»¥æ—¶ç©ºå› æœå…³ç³»ä¸ºç»“æ„ï¼Œå®ƒæ•´åˆäº†ç°æœ‰çš„è¯„ä¼°ç»´åº¦ï¼Œå¹¶åŒ…å«äº†æ¶µç›–å…­ä¸ªç§‘å­¦ä¸äººæ–‡é¢†åŸŸçš„ 1000 ä¸ªå››é˜¶æ®µæç¤ºã€‚ä¸ºäº†å°†è¯„ä¼°ä»å•å›¾åƒæ‰©å±•åˆ°åºåˆ—å¸§ï¼Œå¹¶æ£€éªŒæ¨¡å‹æ˜¯å¦åœ¨éµå¾ªå› æœ-æ—¶é—´çº¦æŸçš„åŒæ—¶çœŸæ­£å†…åŒ–äº†ä¸–ç•ŒçŸ¥è¯†ï¼Œæˆ‘ä»¬å¼•å…¥äº† Envision-Scoreï¼Œè¿™æ˜¯ä¸€ä¸ªç»¼åˆäº†å¤šç»´ä¸€è‡´æ€§ã€ç‰©ç†åˆç†æ€§ä¸ç¾å­¦è´¨é‡çš„æ•´ä½“è¯„ä¼°æŒ‡æ ‡ã€‚å¯¹ 15 ä¸ªæ¨¡å‹ (10 ä¸ªä¸“ç”¨ T2I æ¨¡å‹ï¼Œ5 ä¸ªç»Ÿä¸€æ¨¡å‹) çš„å…¨é¢è¯„ä¼°è¡¨æ˜ï¼šä¸“ç”¨ T2I æ¨¡å‹åœ¨ç¾å­¦æ¸²æŸ“ä¸Šè¡¨ç°ç†Ÿç»ƒï¼Œä½†ç¼ºä¹æ·±å±‚çš„ä¸–ç•ŒçŸ¥è¯†ã€‚ç»Ÿä¸€å¤šæ¨¡æ€æ¨¡å‹åˆ™å¼¥è¡¥äº†è¿™ä¸€ä¸è¶³ï¼Œåœ¨å› æœå™äº‹è¿è´¯æ€§ä¸ŠæŒç»­ä¼˜äºä¸“ç”¨æ¨¡å‹ã€‚ç„¶è€Œï¼Œå³ä¾¿æ˜¯è¿™äº›ç»Ÿä¸€æ¶æ„ï¼Œå…¶æ€§èƒ½ä»è½åäºé—­æºæ¨¡å‹ï¼Œä¸”éš¾ä»¥å…‹æœæ—¶ç©ºä¸€è‡´æ€§çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚è¿™è¡¨æ˜ï¼Œä¸“æ³¨äºå› æœå­¤ç«‹çš„å•å›¾åƒä¼šé˜»ç¢å¤šå¸§æ¨ç†ä¸ç”Ÿæˆï¼Œå¯¼è‡´æ¨¡å‹åå‘äºé™æ€æ¨¡å¼åŒ¹é…è€ŒéåŠ¨æ€ä¸–ç•Œå»ºæ¨¡ï¼Œæœ€ç»ˆé™åˆ¶äº†ä¸–ç•ŒçŸ¥è¯†çš„å†…åŒ–ä¸å†…å®¹çš„ç”Ÿæˆã€‚</p>
<h2 data-id="heading-9">Stabilizing Reinforcement Learning with LLMs: Formulation and Practices</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.01374" target="_blank" title="https://arxiv.org/abs/2512.01374" ref="nofollow noopener noreferrer">ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ç¨³å®šå¼ºåŒ–å­¦ä¹ ï¼šå…¬å¼åŒ–ä¸æ–¹æ³•</a></p>
<p>æœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäºå¤§è¯­è¨€æ¨¡å‹ (LLM) çš„å¼ºåŒ–å­¦ä¹  (RL) æ–°å…¬å¼ï¼Œé˜é‡Šäº†ä¸ºä½•ä»¥åŠä½•ç§æ¡ä»¶ä¸‹ï¼Œå¯ä»¥é€šè¿‡ REINFORCE ç­‰ç­–ç•¥æ¢¯åº¦æ–¹æ³•ä¸­çš„ä»£ç† token çº§åˆ«ç›®æ ‡å‡½æ•°æ¥ä¼˜åŒ–çœŸå®çš„åºåˆ—çº§åˆ«å¥–åŠ±ã€‚å…·ä½“è€Œè¨€ï¼Œé€šè¿‡ä¸€é˜¶è¿‘ä¼¼åˆ†æï¼Œæˆ‘ä»¬è¯æ˜ï¼Œåªæœ‰å½“è®­ç»ƒ-æ¨æ–­å·®å¼‚ä¸ç­–ç•¥æ»åæ€§å‡è¢«æœ€å°åŒ–æ—¶ï¼Œè¯¥ä»£ç†ç›®æ ‡å‡½æ•°çš„æœ‰æ•ˆæ€§æ‰èƒ½å¾—åˆ°ä¿è¯ã€‚è¿™ä¸€è§è§£ä»åŸç†ä¸Šè§£é‡Šäº†å‡ ç§å¹¿æ³›é‡‡ç”¨çš„ RL è®­ç»ƒç¨³å®šåŒ–æŠ€æœ¯çš„å…³é”®ä½œç”¨ï¼ŒåŒ…æ‹¬é‡è¦æ€§é‡‡æ ·æ ¡æ­£ã€æ¢¯åº¦è£å‰ªï¼Œä»¥åŠç‰¹åˆ«é’ˆå¯¹æ··åˆä¸“å®¶ (Mixture-of-Experts, MoE) æ¨¡å‹çš„è·¯ç”±é‡æ”¾ã€‚é€šè¿‡åœ¨ä¸€ä¸ªæ€»è®¡æ¶ˆè€—æ•°åä¸‡ GPU å°æ—¶çš„ 300 äº¿å‚æ•° MoE æ¨¡å‹ä¸Šè¿›è¡Œå¤§é‡å®éªŒï¼Œæˆ‘ä»¬å‘ç°ï¼šå¯¹äºåŒç­–ç•¥ (on-policy) è®­ç»ƒï¼Œå¸¦æœ‰é‡è¦æ€§é‡‡æ ·æ ¡æ­£çš„åŸºæœ¬ç­–ç•¥æ¢¯åº¦ç®—æ³•èƒ½å®ç°æœ€é«˜çš„è®­ç»ƒç¨³å®šæ€§ã€‚è€Œå½“å¼•å…¥å¼‚ç­–ç•¥ (off-policy) æ›´æ–°ä»¥åŠ é€Ÿæ”¶æ•›æ—¶ï¼Œç»“åˆæ¢¯åº¦è£å‰ªä¸è·¯ç”±é‡æ”¾å¯¹äºç¼“è§£å› ç­–ç•¥æ»åæ€§å¼•èµ·çš„ä¸ç¨³å®šæ€§è‡³å…³é‡è¦ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦è®­ç»ƒè¶‹äºç¨³å®šï¼Œæ— è®ºé‡‡ç”¨ä½•ç§å†·å¯åŠ¨åˆå§‹åŒ–æ–¹å¼ï¼ŒæŒç»­ä¼˜åŒ–æ€»èƒ½è·å¾—ç›¸å½“çš„æœ€ç»ˆæ€§èƒ½ã€‚æˆ‘ä»¬å¸Œæœ›ï¼Œæ‰€åˆ†äº«çš„è§è§£ä¸å¼€å‘çš„ç¨³å®š RL è®­ç»ƒæ–¹æ¡ˆèƒ½ä¿ƒè¿›æœªæ¥çš„ç ”ç©¶ã€‚</p>
<h2 data-id="heading-10">DeepSeekMath-V2: Towards Self-Verifiable Mathematical Reasoning</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.22570" target="_blank" title="https://arxiv.org/abs/2511.22570" ref="nofollow noopener noreferrer">DeepSeekMath-V2: è¿ˆå‘å¯è‡ªæˆ‘éªŒè¯çš„æ•°å­¦æ¨ç†</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹åœ¨æ•°å­¦æ¨ç†æ–¹é¢å–å¾—äº†æ˜¾è‘—è¿›å±•ã€‚æ•°å­¦æ¨ç†æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªé‡è¦æµ‹è¯•å¹³å°ï¼Œå…¶è¿›ä¸€æ­¥å‘å±•å¯èƒ½å½±å“ç§‘å­¦ç ”ç©¶ã€‚é€šè¿‡é‡‡ç”¨å¥–åŠ±æœ€ç»ˆæ­£ç¡®ç­”æ¡ˆçš„å¼ºåŒ–å­¦ä¹ æ¥æ‰©å±•æ¨ç†èƒ½åŠ›ï¼Œå¤§è¯­è¨€æ¨¡å‹åœ¨ä¸€å¹´å†…ä»æ€§èƒ½ä¸ä½³æå‡åˆ°åœ¨ AIMEã€HMMT ç­‰å®šé‡æ¨ç†ç«èµ›ä¸­è¾¾åˆ°æ€§èƒ½é¥±å’Œã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å­˜åœ¨æ ¹æœ¬æ€§å±€é™ã€‚è¿½æ±‚æ›´é«˜çš„æœ€ç»ˆç­”æ¡ˆå‡†ç¡®ç‡æ— æ³•è§£å†³ä¸€ä¸ªå…³é”®é—®é¢˜ï¼šæ­£ç¡®ç­”æ¡ˆå¹¶ä¸èƒ½ä¿è¯æ¨ç†è¿‡ç¨‹æ­£ç¡®ã€‚æ­¤å¤–ï¼Œè®¸å¤šæ•°å­¦ä»»åŠ¡ï¼ˆå¦‚å®šç†è¯æ˜ï¼‰éœ€è¦ä¸¥æ ¼çš„é€æ­¥æ¨å¯¼ï¼Œè€Œéä»…ä»…ç»™å‡ºæ•°å€¼ç­”æ¡ˆï¼Œè¿™ä½¿å¾—åŸºäºæœ€ç»ˆç­”æ¡ˆçš„å¥–åŠ±æœºåˆ¶æ— æ³•é€‚ç”¨ã€‚ä¸ºäº†çªç ´æ·±åº¦æ¨ç†çš„ç“¶é¢ˆï¼Œæˆ‘ä»¬è®¤ä¸ºæœ‰å¿…è¦å¯¹æ•°å­¦æ¨ç†çš„å…¨é¢æ€§å’Œä¸¥è°¨æ€§è¿›è¡ŒéªŒè¯ã€‚è‡ªæˆ‘éªŒè¯å¯¹äºæ‰©å±•æµ‹è¯•é˜¶æ®µçš„è®¡ç®—èµ„æºå°¤ä¸ºé‡è¦ï¼Œç‰¹åˆ«æ˜¯å¯¹äºé‚£äº›æ²¡æœ‰å·²çŸ¥è§£çš„å¼€æ”¾æ€§é—®é¢˜ã€‚ä¸ºå®ç°å¯è‡ªæˆ‘éªŒè¯çš„æ•°å­¦æ¨ç†ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•è®­ç»ƒä¸€ä¸ªå‡†ç¡®ã€å¯é çš„å¤§è¯­è¨€æ¨¡å‹éªŒè¯å™¨ç”¨äºå®šç†è¯æ˜ã€‚æ¥ç€ï¼Œæˆ‘ä»¬ä»¥è¯¥éªŒè¯å™¨ä½œä¸ºå¥–åŠ±æ¨¡å‹æ¥è®­ç»ƒä¸€ä¸ªè¯æ˜ç”Ÿæˆå™¨ï¼Œå¹¶æ¿€åŠ±ç”Ÿæˆå™¨åœ¨æœ€ç»ˆç¡®å®šè¯æ˜å‰ï¼Œå°½å¯èƒ½å¤šåœ°è¯†åˆ«å¹¶è§£å†³è‡ªèº«è¯æ˜ä¸­çš„é—®é¢˜ã€‚ä¸ºé˜²æ­¢ç”Ÿæˆå™¨èƒ½åŠ›å¢å¼ºå¯¼è‡´ç”Ÿæˆä¸éªŒè¯ä¹‹é—´çš„å·®è·ç¼©å°ï¼Œæˆ‘ä»¬æå‡ºé€šè¿‡å¢åŠ éªŒè¯é˜¶æ®µçš„è®¡ç®—èµ„æºï¼Œè‡ªåŠ¨æ ‡æ³¨æ–°äº§ç”Ÿçš„ã€éš¾ä»¥éªŒè¯çš„è¯æ˜ï¼Œä»è€Œåˆ›å»ºè®­ç»ƒæ•°æ®ä»¥æŒç»­æ”¹è¿›éªŒè¯å™¨ã€‚ç”±æ­¤å¾—åˆ°çš„æ¨¡å‹ DeepSeekMath-V2 å±•ç°å‡ºå¼ºå¤§çš„å®šç†è¯æ˜èƒ½åŠ›ï¼šåœ¨å¢åŠ æµ‹è¯•é˜¶æ®µè®¡ç®—èµ„æºçš„æƒ…å†µä¸‹ï¼Œå®ƒåœ¨ IMO 2025 å’Œ CMO 2024 ä¸Šè·å¾—äº†é‡‘ç‰Œçº§åˆ†æ•°ï¼Œå¹¶åœ¨ Putnam 2024 ä¸Šå–å¾—äº†æ¥è¿‘æ»¡åˆ†çš„ 118/120 åˆ†ã€‚</p>
<h2 data-id="heading-11">Nex-N1: é€šè¿‡å¤§è§„æ¨¡ç¯å¢ƒæ„å»ºçš„ç»Ÿä¸€ç”Ÿæ€ç³»ç»Ÿè®­ç»ƒçš„æ™ºèƒ½ä½“æ¨¡å‹</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.04987" target="_blank" title="https://arxiv.org/abs/2512.04987" ref="nofollow noopener noreferrer">Nex-N1: é€šè¿‡å¤§è§„æ¨¡ç¯å¢ƒæ„å»ºçš„ç»Ÿä¸€ç”Ÿæ€ç³»ç»Ÿè®­ç»ƒçš„æ™ºèƒ½ä½“æ¨¡å‹</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹ (LLMs) ä»è¢«åŠ¨å“åº”è€…å‘è‡ªä¸»æ™ºèƒ½ä½“çš„æ¼”è¿›ï¼Œè¦æ±‚å­¦ä¹ èŒƒå¼å‘ç”Ÿæ ¹æœ¬æ€§è½¬å˜â€”â€”å³ä»é™æ€æ¨¡ä»¿è½¬å‘æ¿€åŠ±é©±åŠ¨çš„å†³ç­–ã€‚ç„¶è€Œï¼Œç”±äºç¼ºä¹èƒ½å¤Ÿä¸ºæœ‰æ•ˆç­–ç•¥å­¦ä¹ ç”Ÿæˆé«˜è´¨é‡äº¤äº’ä¿¡å·çš„å¯æ‰©å±•åŸºç¡€è®¾æ–½ï¼Œè¿™ä¸€è½¬å˜å—åˆ°äº†ä¸¥é‡é˜»ç¢ã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§ç»¼åˆæ€§æ–¹æ³•ï¼Œæ—¨åœ¨ç³»ç»ŸåŒ–åœ°æå‡äº¤äº’ç¯å¢ƒçš„å¤šæ ·æ€§å’Œå¤æ‚æ€§ã€‚è¯¥æ–¹æ³•é€šè¿‡è§£å†³ä¸‰ä¸ªç›¸äº’ç‹¬ç«‹ä¸”äº’è¡¥çš„ç»´åº¦æ¥å®ç°è§„æ¨¡åŒ–æ„å»ºï¼š(1) å¤æ‚æ€§ï¼šNexAUï¼Œä¸€ä¸ªçµæ´»çš„æ™ºèƒ½ä½“æ¡†æ¶ï¼Œæ”¯æŒé€šè¿‡ç®€å•é…ç½®æ„å»ºå¤æ‚çš„æ™ºèƒ½ä½“å±‚æ¬¡ç»“æ„ï¼›(2) å¤šæ ·æ€§ï¼šNexA4A èƒ½å¤Ÿä»è‡ªç„¶è¯­è¨€è‡ªåŠ¨ç”Ÿæˆå¤šæ ·åŒ–çš„æ™ºèƒ½ä½“å±‚æ¬¡ç»“æ„ï¼Œä»è€Œè¦†ç›–æ— é™é¢†åŸŸï¼›(3) ä¿çœŸåº¦ï¼šNexGAP é€šè¿‡é›†æˆåŠ¨æ€çš„çœŸå®ä¸–ç•Œç¯å¢ƒæ¥åˆæˆå…·èº«è½¨è¿¹ï¼Œä»¥æ­¤å¼¥åˆä»¿çœŸä¸ç°å®ä¹‹é—´çš„é¸¿æ²Ÿã€‚æˆ‘ä»¬åŸºäºè¯¥åŸºç¡€è®¾æ–½æ‰€å»ºç«‹çš„å¤šæ ·ä¸”å¤æ‚çš„äº¤äº’ç¯å¢ƒå¯¹ Nex-N1 è¿›è¡Œäº†è®­ç»ƒã€‚åœ¨ SWE-bench å’Œ tau2 ç­‰åŸºå‡†æµ‹è¯•ä¸Šçš„å®è¯ç»“æœè¡¨æ˜ï¼ŒNex-N1 å§‹ç»ˆä¼˜äºæœ€å…ˆè¿›çš„å¼€æºæ¨¡å‹ï¼Œå¹¶ä¸”åœ¨å¤æ‚çš„æ™ºèƒ½ä½“ä»»åŠ¡ä¸Šï¼Œå…¶æ€§èƒ½å¯ä¸å‰æ²¿çš„ä¸“æœ‰æ¨¡å‹ç›¸ç«äº‰ã€‚æˆ‘ä»¬å¼€æºäº† Nex ç”Ÿæ€ç³»ç»ŸåŠæ¨¡å‹æƒé‡ï¼Œä»¥æ¨åŠ¨ç›¸å…³é¢†åŸŸçš„è¿›ä¸€æ­¥ç ”ç©¶ã€‚</p>
<h2 data-id="heading-12">MultiShotMaster: å¯æ§å¤šé•œå¤´è§†é¢‘ç”Ÿæˆæ¡†æ¶</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.03041" target="_blank" title="https://arxiv.org/abs/2512.03041" ref="nofollow noopener noreferrer">MultiShotMaster: å¯æ§å¤šé•œå¤´è§†é¢‘ç”Ÿæˆæ¡†æ¶</a></p>
<p>å½“å‰çš„è§†é¢‘ç”ŸæˆæŠ€æœ¯æ“…é•¿ç”Ÿæˆå•é•œå¤´ç‰‡æ®µï¼Œä½†éš¾ä»¥ç”Ÿæˆå…·æœ‰å™äº‹æ€§çš„å¤šé•œå¤´è§†é¢‘ã€‚è¿™ç±»è§†é¢‘éœ€è¦çµæ´»çš„é•œå¤´å®‰æ’ã€è¿è´¯çš„å™äº‹é€»è¾‘ä»¥åŠè¶…è¶Šæ–‡æœ¬æè¿°çš„æ§åˆ¶èƒ½åŠ›ã€‚ä¸ºåº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æå‡ºäº† MultiShotMasterï¼Œä¸€ä¸ªå…·å¤‡é«˜å¯æ§æ€§çš„å¤šé•œå¤´è§†é¢‘ç”Ÿæˆæ¡†æ¶ã€‚æˆ‘ä»¬é€šè¿‡é›†æˆä¸¤ç§æ–°é¢–çš„ RoPE (Rotary Position Embedding) å˜ä½“ï¼Œæ‰©å±•äº†ä¸€ä¸ªé¢„è®­ç»ƒçš„å•é•œå¤´æ¨¡å‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¼•å…¥äº†å¤šé•œå¤´å™äº‹ RoPEï¼Œå®ƒåœ¨é•œå¤´åˆ‡æ¢æ—¶æ–½åŠ æ˜¾å¼çš„ç›¸ä½åç§»ï¼Œä»è€Œåœ¨ç»´æŒæ—¶åºå™äº‹çš„å‰æä¸‹å®ç°çµæ´»çš„é•œå¤´ç¼–æ’ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬è®¾è®¡äº†æ—¶ç©ºä½ç½®æ„ŸçŸ¥ RoPEï¼Œä»¥èå…¥å‚è€ƒ token å’Œ grounding (æ¥åœ°) ä¿¡å·ï¼Œä»è€Œå®ç°åŸºäºæ—¶ç©ºä½ç½®çš„å‚è€ƒä¿¡æ¯æ³¨å…¥ã€‚æ­¤å¤–ï¼Œä¸ºå…‹æœæ•°æ®ç¨€ç¼ºé—®é¢˜ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€å¥—è‡ªåŠ¨åŒ–æ•°æ®æ ‡æ³¨æµæ°´çº¿ï¼Œç”¨äºä»è§†é¢‘æ•°æ®ä¸­è§£æå‡ºå¤šé•œå¤´è§†é¢‘ç‰‡æ®µã€å¯¹åº”å­—å¹•ã€è·¨é•œå¤´ grounding ä¿¡å·ä»¥åŠå‚è€ƒå›¾åƒã€‚æˆ‘ä»¬çš„æ¡†æ¶åˆ©ç”¨å…¶å†…åœ¨çš„æ¶æ„ç‰¹æ€§æ¥æ”¯æŒå¤šé•œå¤´è§†é¢‘ç”Ÿæˆï¼Œä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼šæ–‡æœ¬é©±åŠ¨çš„é•œå¤´é—´ä¸€è‡´æ€§ã€æ”¯æŒè¿åŠ¨æ§åˆ¶çš„è‡ªå®šä¹‰ä¸»ä½“ï¼ˆå¦‚ç‰©ä½“æˆ–è§’è‰²ï¼‰ï¼Œä»¥åŠèƒŒæ™¯é©±åŠ¨çš„è‡ªå®šä¹‰åœºæ™¯ã€‚é•œå¤´æ•°é‡å’Œæ—¶é•¿å‡å¯çµæ´»é…ç½®ã€‚å¤§é‡å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ¡†æ¶åœ¨æ€§èƒ½å’Œå¯æ§æ€§æ–¹é¢å‡è¡¨ç°ä¼˜å¼‚ã€‚</p>
<h2 data-id="heading-13">Deep Research: A Systematic Survey</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.02038" target="_blank" title="https://arxiv.org/abs/2512.02038" ref="nofollow noopener noreferrer">æ·±åº¦ç ”ç©¶ï¼šä¸€é¡¹ç³»ç»Ÿæ€§ç»¼è¿°</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰å·²è¿…é€Ÿä»æ–‡æœ¬ç”Ÿæˆå·¥å…·æ¼”å˜ä¸ºå¼ºå¤§çš„é—®é¢˜æ±‚è§£å™¨ã€‚ç„¶è€Œï¼Œè®¸å¤šå¼€æ”¾æ€§ä»»åŠ¡è¦æ±‚å…·å¤‡æ‰¹åˆ¤æ€§æ€ç»´ã€æ•´åˆå¤šæºä¿¡æ¯å¹¶äº§ç”Ÿå¯éªŒè¯çš„è¾“å‡ºï¼Œè¿™è¶…å‡ºäº†å•æ¬¡æç¤ºï¼ˆsingle-shot promptingï¼‰æˆ–æ ‡å‡†æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰çš„èƒ½åŠ›èŒƒå›´ã€‚è¿‘æœŸï¼Œå¤§é‡ç ”ç©¶å¼€å§‹æ¢ç´¢æ·±åº¦ç ”ç©¶ï¼ˆDeep Researchï¼Œ DRï¼‰ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯å°†å¤§è¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ä¸æœç´¢å¼•æ“ç­‰å¤–éƒ¨å·¥å…·ç›¸ç»“åˆï¼Œä»è€Œèµ‹èƒ½å¤§è¯­è¨€æ¨¡å‹æˆä¸ºèƒ½å¤Ÿå®Œæˆå¤æ‚ã€å¼€æ”¾å¼ä»»åŠ¡çš„ç ”ç©¶æ™ºèƒ½ä½“ï¼ˆresearch agentsï¼‰ã€‚æœ¬ç»¼è¿°å¯¹æ·±åº¦ç ”ç©¶ç³»ç»Ÿè¿›è¡Œäº†å…¨é¢è€Œç³»ç»Ÿçš„æ¢³ç†ï¼Œå†…å®¹æ¶µç›–æ¸…æ™°çš„è·¯çº¿å›¾ã€åŸºç¡€ç»„ä»¶ã€å®é™…å®ç°æŠ€æœ¯ã€å…³é”®æŒ‘æˆ˜ä»¥åŠæœªæ¥æ–¹å‘ã€‚å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬çš„ä¸»è¦è´¡çŒ®å¦‚ä¸‹ï¼šï¼ˆiï¼‰å½¢å¼åŒ–äº†ä¸€ä¸ªä¸‰é˜¶æ®µè·¯çº¿å›¾ï¼Œå¹¶æ˜ç¡®äº†æ·±åº¦ç ”ç©¶ä¸ç›¸å…³èŒƒå¼çš„åŒºåˆ«ï¼›ï¼ˆiiï¼‰ä»‹ç»äº†å››ä¸ªå…³é”®ç»„ä»¶ï¼šæŸ¥è¯¢è§„åˆ’ã€ä¿¡æ¯è·å–ã€è®°å¿†ç®¡ç†ä¸ç­”æ¡ˆç”Ÿæˆï¼Œå¹¶ä¸ºæ¯ä¸ªç»„ä»¶æä¾›äº†ç»†ç²’åº¦çš„å­ç±»åˆ«åˆ’åˆ†ï¼›ï¼ˆiiiï¼‰æ€»ç»“äº†åŒ…æ‹¬æç¤ºå·¥ç¨‹ã€ç›‘ç£å¾®è°ƒä»¥åŠæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ åœ¨å†…çš„ä¼˜åŒ–æŠ€æœ¯ï¼›ï¼ˆivï¼‰æ•´åˆäº†ç›¸å…³çš„è¯„ä¼°æ ‡å‡†ä¸å¼€æ”¾æŒ‘æˆ˜ï¼Œæ—¨åœ¨ä¸ºæœªæ¥çš„å‘å±•æä¾›æŒ‡å¯¼ä¸ä¾¿åˆ©ã€‚é‰´äºæ·±åº¦ç ”ç©¶é¢†åŸŸæ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œæˆ‘ä»¬å°†æŒç»­ç»´æŠ¤å¹¶æ›´æ–°æœ¬ç»¼è¿°ï¼Œä»¥åŒæ­¥åæ˜ è¯¥é¢†åŸŸçš„æœ€æ–°è¿›å±•ã€‚</p>
<h2 data-id="heading-14">How Far Are We from Genuinely Useful Deep Research Agents?</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.01948" target="_blank" title="https://arxiv.org/abs/2512.01948" ref="nofollow noopener noreferrer">æˆ‘ä»¬è·ç¦»çœŸæ­£æœ‰ç”¨çš„æ·±åº¦ç ”ç©¶æ™ºèƒ½ä½“è¿˜æœ‰å¤šè¿œï¼Ÿ</a></p>
<p>æ·±åº¦ç ”ç©¶æ™ºèƒ½ä½“ (Deep Research Agents, DRAs) æ—¨åœ¨é€šè¿‡è¿­ä»£çš„ä¿¡æ¯æ£€ç´¢ä¸ç»¼åˆï¼Œè‡ªåŠ¨ç”Ÿæˆåˆ†æå¸ˆçº§åˆ«çš„æŠ¥å‘Šã€‚ç„¶è€Œï¼Œç°æœ‰çš„å¤§å¤šæ•° DRAs ä»…åœ¨é—®ç­”åŸºå‡†ä¸Šè¿›è¡ŒéªŒè¯ï¼Œè€Œç”Ÿæˆç»¼åˆæ€§æŠ¥å‘Šçš„ç ”ç©¶ä»è¢«å¿½è§†ã€‚æ›´ä¸¥é‡çš„æ˜¯ï¼Œå½“å‰ç”¨äºæŠ¥å‘Šç»¼åˆçš„åŸºå‡†å­˜åœ¨ä»»åŠ¡å¤æ‚æ€§å’Œè¯„ä¼°æŒ‡æ ‡ä¸»è§‚æ€§å¼ºçš„é—®é¢˜ï¼Œè¿™æ—¢æ— æ³•åæ˜ çœŸå®ç”¨æˆ·éœ€æ±‚ï¼Œä¹Ÿé™åˆ¶äº†ç”ŸæˆæŠ¥å‘Šçš„å®é™…æ•ˆç”¨ã€‚ä¸ºå¼¥è¡¥è¿™äº›ä¸è¶³ï¼Œæˆ‘ä»¬æå‡ºäº†ç»†ç²’åº¦æ·±åº¦ç ”ç©¶åŸºå‡† (Fine-grained DEepResearch bench, FINDER)ã€‚è¯¥åŸºå‡†ç»è¿‡å¢å¼ºï¼ŒåŒ…å« 100 ä¸ªäººå·¥ç²¾å¿ƒç­–åˆ’çš„ç ”ç©¶ä»»åŠ¡ï¼Œå¹¶é…æœ‰ 419 ä¸ªç»“æ„åŒ–æ£€æŸ¥é¡¹ï¼Œç”¨ä»¥æ ‡å‡†åŒ–æŠ¥å‘Šçš„ç»“æ„ã€åˆ†ææ·±åº¦å’Œäº‹å®ä¾æ®ã€‚åŸºäºä¸»æµ DRAs ç”Ÿæˆçš„å¤§çº¦ 1,000 ä»½æŠ¥å‘Šï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥æå‡ºäº†æ·±åº¦ç ”ç©¶å¤±è´¥åˆ†ç±»æ³• (Deep rEsearch Failure Taxonomy, DEFT)ï¼Œè¿™æ˜¯é¦–ä¸ªä¸“é—¨é’ˆå¯¹æ·±åº¦ç ”ç©¶æ™ºèƒ½ä½“çš„å¤±è´¥æ¨¡å¼åˆ†ç±»ä½“ç³»ã€‚DEFT æ¶µç›–äº†æ¨ç†ã€æ£€ç´¢å’Œç”Ÿæˆä¸‰ä¸ªæ–¹é¢çš„ 14 ç§ç»†ç²’åº¦å¤±è´¥æ¨¡å¼ï¼Œå…¶æ„å»ºåŸºäºæ‰æ ¹ç†è®ºï¼Œå¹¶é‡‡ç”¨äº†äººå·¥ä¸å¤§è¯­è¨€æ¨¡å‹ååŒæ ‡æ³¨ä»¥åŠæ ‡æ³¨è€…é—´ä¸€è‡´æ€§æ£€éªŒã€‚æˆ‘ä»¬çš„å®éªŒç»“æœè¡¨æ˜ï¼Œå½“å‰ DRAs çš„ä¸»è¦æŒ‘æˆ˜å¹¶éä»»åŠ¡ç†è§£ï¼Œè€Œæ˜¯è¯æ®æ•´åˆã€éªŒè¯ä»¥åŠåœ¨æ¨ç†è¿‡ç¨‹ä¸­ä¿æŒç¨³å¥çš„è§„åˆ’èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-15">TUNA: æ„å»ºç»Ÿä¸€è§†è§‰è¡¨ç¤ºä»¥å®ç°åŸç”Ÿç»Ÿä¸€å¤šæ¨¡æ€æ¨¡å‹</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.02014" target="_blank" title="https://arxiv.org/abs/2512.02014" ref="nofollow noopener noreferrer">TUNA: æ„å»ºç»Ÿä¸€è§†è§‰è¡¨ç¤ºä»¥å®ç°åŸç”Ÿç»Ÿä¸€å¤šæ¨¡æ€æ¨¡å‹</a></p>
<p>ç»Ÿä¸€å¤šæ¨¡æ€æ¨¡å‹ (UMMs) æ—¨åœ¨å•ä¸ªæ¡†æ¶å†…åŒæ—¶å®ç°å¤šæ¨¡æ€ç†è§£ä¸ç”Ÿæˆã€‚æˆ‘ä»¬æå‡ºäº† TUNAï¼Œä¸€ä¸ªåŸç”Ÿ UMMï¼Œå®ƒé€šè¿‡å°† VAE ç¼–ç å™¨ä¸è¡¨ç¤ºç¼–ç å™¨çº§è”ï¼Œæ„å»ºäº†ä¸€ä¸ªç»Ÿä¸€çš„è¿ç»­è§†è§‰è¡¨ç¤ºã€‚è¿™ä¸€ç»Ÿä¸€çš„è¡¨ç¤ºç©ºé—´æ”¯æŒå¯¹å›¾åƒå’Œè§†é¢‘è¿›è¡Œç«¯åˆ°ç«¯å¤„ç†ï¼Œä»¥åŒæ—¶æœåŠ¡äºç†è§£å’Œç”Ÿæˆä»»åŠ¡ã€‚ä¸å…ˆå‰é‡‡ç”¨è§£è€¦è¡¨ç¤ºçš„ UMMs ç›¸æ¯”ï¼ŒTUNA çš„ç»Ÿä¸€è§†è§‰ç©ºé—´é¿å…äº†å› ä½¿ç”¨ç‹¬ç«‹ç¼–ç å™¨è€Œå¯¼è‡´çš„è¡¨ç¤ºæ ¼å¼ä¸åŒ¹é…é—®é¢˜ï¼Œä»è€Œåœ¨ç†è§£å’Œç”Ÿæˆä»»åŠ¡ä¸Šå‡ä¼˜äºè§£è€¦æ–¹æ¡ˆã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ€§èƒ½æ›´å¼ºçš„é¢„è®­ç»ƒè¡¨ç¤ºç¼–ç å™¨èƒ½å¤Ÿåœ¨æ‰€æœ‰å¤šæ¨¡æ€ä»»åŠ¡ä¸ŠæŒç»­å¸¦æ¥æ›´ä¼˜çš„æ€§èƒ½ï¼Œè¿™å‡¸æ˜¾äº†è¡¨ç¤ºç¼–ç å™¨çš„é‡è¦æ€§ã€‚æœ€åï¼Œåœ¨è¿™ç§ç»Ÿä¸€æ¡†æ¶ä¸‹ï¼Œè”åˆä½¿ç”¨ç†è§£å’Œç”Ÿæˆæ•°æ®è¿›è¡Œè®­ç»ƒï¼Œèƒ½ä½¿ä¸¤é¡¹ä»»åŠ¡ç›¸äº’ä¿ƒè¿›è€Œéç›¸äº’å¹²æ‰°ã€‚æˆ‘ä»¬åœ¨å¤šæ¨¡æ€ç†è§£ä¸ç”ŸæˆåŸºå‡†æµ‹è¯•ä¸Šè¿›è¡Œäº†å¤§é‡å®éªŒï¼Œç»“æœè¡¨æ˜ï¼ŒTUNA åœ¨å›¾åƒä¸è§†é¢‘ç†è§£ã€å›¾åƒä¸è§†é¢‘ç”Ÿæˆä»¥åŠå›¾åƒç¼–è¾‘ä»»åŠ¡ä¸Šå‡å–å¾—äº†æœ€å…ˆè¿›çš„æ€§èƒ½ï¼Œå……åˆ†è¯æ˜äº†å…¶ç»Ÿä¸€è¡¨ç¤ºè®¾è®¡çš„æœ‰æ•ˆæ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<h2 data-id="heading-16">å¼•å¯¼å¼å¤§è¯­è¨€æ¨¡å‹è‡ªè¿›åŒ–ï¼šæœ€å°åŒ–äººç±»ç›‘ç£</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.02472" target="_blank" title="https://arxiv.org/abs/2512.02472" ref="nofollow noopener noreferrer">å¼•å¯¼å¼å¤§è¯­è¨€æ¨¡å‹è‡ªè¿›åŒ–ï¼šæœ€å°åŒ–äººç±»ç›‘ç£</a></p>
<p>äººå·¥æ™ºèƒ½ (AI) è‡ªè¿›åŒ– (self-evolution) ä¸€ç›´è¢«è§†ä½œé€šå‘è¶…çº§æ™ºèƒ½çš„é€”å¾„ï¼Œå³æ¨¡å‹èƒ½å¤Ÿä»å…¶è‡ªèº«å­¦ä¹ ç»éªŒä¸­è‡ªä¸»åœ°è·å–ã€ä¼˜åŒ–å¹¶å†…åŒ–çŸ¥è¯†ã€‚ç„¶è€Œï¼Œå®é™…åº”ç”¨ä¸­ï¼Œæ— å¼•å¯¼çš„è‡ªè¿›åŒ–ç³»ç»Ÿå¾€å¾€å¾ˆå¿«é™·å…¥æ€§èƒ½å¹³å°æœŸï¼Œç”šè‡³åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å‘ç”Ÿé€€åŒ–ã€‚è¿™äº›å¤±è´¥æºäºæ¦‚å¿µæ¼‚ç§» (concept drift)ã€å¤šæ ·æ€§å´©æºƒ (diversity collapse) å’Œé”™è¯¯è¿›åŒ– (mis-evolution) ç­‰é—®é¢˜ï¼Œå› ä¸ºæ¨¡å‹ä¼šä¸æ–­å¼ºåŒ–è‡ªèº«åè§ï¼Œå¹¶æ”¶æ•›åˆ°ä½ç†µ (low-entropy) è¡Œä¸ºã€‚ä¸ºäº†åœ¨æœ€å°åŒ–å¯¹äººç±»ç›‘ç£ä¾èµ–çš„åŒæ—¶ï¼Œå®ç°æ¨¡å‹ç¨³å®šã€å¯æ§çš„è‡ªè¿›åŒ–ï¼Œæˆ‘ä»¬æå‡ºäº† R-Fewï¼šä¸€ä¸ªå¼•å¯¼å¼çš„è‡ªæˆ‘å¯¹å¼ˆ (Self-Play) æŒ‘æˆ˜è€…-æ±‚è§£å™¨ (Challenger-Solver) æ¡†æ¶ã€‚è¯¥æ¡†æ¶é€šè¿‡åŸºäºä¸Šä¸‹æ–‡çš„é”šå®š (in-context grounding) å’Œæ··åˆè®­ç»ƒ (mixed training)ï¼Œå¼•å…¥äº†è½»é‡çº§çš„äººç±»ç›‘ç£ã€‚åœ¨æ¯ä¸€è½®è¿­ä»£ä¸­ï¼ŒæŒ‘æˆ˜è€… (Challenger) ä¼šé‡‡æ ·ä¸€å°éƒ¨åˆ†äººå·¥æ ‡æ³¨çš„ç¤ºä¾‹ï¼Œç”¨ä»¥æŒ‡å¯¼åˆæˆé—®é¢˜çš„ç”Ÿæˆï¼›è€Œæ±‚è§£å™¨ (Solver) åˆ™éµå¾ªä¸€ä¸ªåŸºäºéš¾åº¦çš„åœ¨çº¿è¯¾ç¨‹å­¦ä¹  (online, difficulty-based curriculum) ç­–ç•¥ï¼Œå¯¹äººå·¥ç¤ºä¾‹å’Œåˆæˆç¤ºä¾‹è¿›è¡Œè”åˆè®­ç»ƒã€‚åœ¨æ•°å­¦å’Œé€šç”¨æ¨ç†åŸºå‡†æµ‹è¯•ä¸­ï¼ŒR-Few å®ç°äº†æŒç»­ä¸”è¿­ä»£çš„æ€§èƒ½æå‡ã€‚ä¾‹å¦‚ï¼ŒQwen3-8B-Base æ¨¡å‹åœ¨æ•°å­¦ä»»åŠ¡ä¸Šæ¯” R-Zero æå‡äº† 3.0 åˆ†ï¼Œå…¶æ€§èƒ½ä¸ General-Reasoner ç›¸å½“ï¼Œè€Œåè€…çš„è®­ç»ƒä½¿ç”¨äº†å¤šè¾¾ 20 å€ä»¥ä¸Šçš„äººå·¥æ ‡æ³¨æ•°æ®ã€‚æ¶ˆèç ”ç©¶ (Ablation studies) è¯å®äº†åŸºäºé”šå®šçš„æŒ‘æˆ˜è€…è®­ç»ƒ (grounded challenger training) å’ŒåŸºäºè¯¾ç¨‹çš„æ±‚è§£å™¨è®­ç»ƒ (curriculum-based solver training) å…·æœ‰äº’è¡¥ä½œç”¨ï¼›è¿›ä¸€æ­¥åˆ†æè¡¨æ˜ï¼ŒR-Few æœ‰æ•ˆç¼“è§£äº†æ¦‚å¿µæ¼‚ç§»ï¼Œä»è€Œäº§ç”Ÿäº†æ›´ç¨³å®šã€æ›´å¯æ§çš„ååŒè¿›åŒ– (co-evolutionary) åŠ¨æ€ã€‚</p>
<h2 data-id="heading-17">MG-Nav: Dual-Scale Visual Navigation via Sparse Spatial Memory</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.22609" target="_blank" title="https://arxiv.org/abs/2511.22609" ref="nofollow noopener noreferrer">MG-Navï¼šåŸºäºç¨€ç–ç©ºé—´è®°å¿†çš„åŒå°ºåº¦è§†è§‰å¯¼èˆª</a></p>
<p>æˆ‘ä»¬æå‡ºäº† MG-Nav (Memory-Guided Navigationï¼Œè®°å¿†å¼•å¯¼å¯¼èˆª)ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºé›¶æ ·æœ¬è§†è§‰å¯¼èˆªçš„åŒå°ºåº¦æ¡†æ¶ï¼Œå®ƒå°†å…¨å±€è®°å¿†å¼•å¯¼è§„åˆ’ä¸å±€éƒ¨å‡ ä½•å¢å¼ºæ§åˆ¶ç›¸ç»Ÿä¸€ã€‚å…¶æ ¸å¿ƒæ˜¯ç¨€ç–ç©ºé—´è®°å¿†å›¾ (Sparse Spatial Memory Graph, SMG)ï¼Œè¿™æ˜¯ä¸€ç§ç´§å‡‘çš„ã€ä»¥åŒºåŸŸä¸ºä¸­å¿ƒçš„è®°å¿†ç»“æ„ã€‚å…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹èšåˆäº†å¤šè§†è§’å…³é”®å¸§å’Œå¯¹è±¡è¯­ä¹‰ä¿¡æ¯ï¼Œä¸ä»…èƒ½æ•è·å¤–è§‚ä¸ç©ºé—´ç»“æ„ï¼Œè¿˜ä¿ç•™äº†è§†è§’å¤šæ ·æ€§ã€‚åœ¨å…¨å±€å±‚é¢ï¼Œæ™ºèƒ½ä½“é¦–å…ˆåœ¨ SMG ä¸Šè¿›è¡Œå®šä½ï¼Œç„¶åé€šè¿‡å›¾åƒåˆ°å®ä¾‹çš„æ··åˆæ£€ç´¢ï¼Œè§„åˆ’å‡ºä¸€æ¡ä»¥ç›®æ ‡ä¸ºæ¡ä»¶çš„èŠ‚ç‚¹è·¯å¾„ï¼Œä»è€Œç”Ÿæˆä¸€ç³»åˆ—å¯è¾¾çš„è·¯å¾„ç‚¹ï¼Œä¸ºé•¿ç¨‹å¯¼èˆªæä¾›å¼•å¯¼ã€‚åœ¨å±€éƒ¨å±‚é¢ï¼Œä¸€ä¸ªå¯¼èˆªåŸºç¡€ç­–ç•¥ä»¥ç‚¹ç›®æ ‡æ¨¡å¼æ‰§è¡Œè¿™äº›è·¯å¾„ç‚¹ï¼Œå¹¶é‡‡ç”¨éšœç¢ç‰©æ„ŸçŸ¥æ§åˆ¶ï¼›å½“ä»æœ€ç»ˆèŠ‚ç‚¹å‘è§†è§‰ç›®æ ‡å¯¼èˆªæ—¶ï¼Œåˆ™åˆ‡æ¢è‡³å›¾åƒç›®æ ‡æ¨¡å¼ã€‚ä¸ºäº†è¿›ä¸€æ­¥æå‡è§†è§’å¯¹é½å’Œç›®æ ‡è¯†åˆ«çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¼•å…¥äº† VGGT-adapterã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäºé¢„è®­ç»ƒ VGGT æ¨¡å‹æ„å»ºçš„è½»é‡çº§å‡ ä½•æ¨¡å—ï¼Œèƒ½å¤Ÿåœ¨å…±äº«çš„ 3D æ„ŸçŸ¥ç©ºé—´ä¸­å¯¹é½è§‚æµ‹ç‰¹å¾ä¸ç›®æ ‡ç‰¹å¾ã€‚MG-Nav ä»¥ä¸åŒçš„é¢‘ç‡æ‰§è¡Œå…¨å±€è§„åˆ’å’Œå±€éƒ¨æ§åˆ¶ï¼Œå¹¶åˆ©ç”¨å‘¨æœŸæ€§çš„é‡æ–°å®šä½æ¥çº æ­£è¯¯å·®ã€‚åœ¨ HM3D Instance-Image-Goal å’Œ MP3D Image-Goal åŸºå‡†æµ‹è¯•ä¸Šçš„å®éªŒè¡¨æ˜ï¼ŒMG-Nav å®ç°äº†æœ€å…ˆè¿›çš„é›¶æ ·æœ¬æ€§èƒ½ï¼Œå¹¶ä¸”åœ¨åŠ¨æ€åœºæ™¯é‡æ’å’Œæœªè§è¿‡çš„åœºæ™¯æ¡ä»¶ä¸‹ä»èƒ½ä¿æŒé²æ£’æ€§ã€‚</p>
<h2 data-id="heading-18">è§†é¢‘ç”Ÿæˆä¸­çš„é‡åŠ›é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿåˆ©ç”¨å¯éªŒè¯å¥–åŠ±å¯¹æ¨¡å‹è¿›è¡Œç‰›é¡¿å®šå¾‹åè®­ç»ƒ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.00425" target="_blank" title="https://arxiv.org/abs/2512.00425" ref="nofollow noopener noreferrer">è§†é¢‘ç”Ÿæˆä¸­çš„é‡åŠ›é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿåˆ©ç”¨å¯éªŒè¯å¥–åŠ±å¯¹æ¨¡å‹è¿›è¡Œç‰›é¡¿å®šå¾‹åè®­ç»ƒ</a></p>
<p>å½“å‰çš„è§†é¢‘æ‰©æ•£æ¨¡å‹è™½èƒ½ç”Ÿæˆè§†è§‰ä¸Šé€¼çœŸçš„ç‰‡æ®µï¼Œå´å¸¸å¸¸è¿èƒŒåŸºæœ¬ç‰©ç†å®šå¾‹ï¼Œä¾‹å¦‚ç‰©ä½“æ¼‚æµ®ã€åŠ é€Ÿåº¦å¼‚å¸¸ã€ç¢°æ’è¡Œä¸ºä¸ä¸€è‡´ç­‰ï¼Œè¿™æ­ç¤ºäº†è§†è§‰çœŸå®æ„Ÿä¸ç‰©ç†çœŸå®æ„Ÿä¹‹é—´å­˜åœ¨çš„æŒç»­å·®è·ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡ºäº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">NewtonRewards</mtext></mrow><annotation encoding="application/x-tex">\texttt{NewtonRewards}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6111em;"/><span class="mord text"><span class="mord texttt">NewtonRewards</span></span></span></span></span></span>ï¼Œè¿™æ˜¯é¦–ä¸ªåŸºäº <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">å¯éªŒè¯å¥–åŠ±</mtext></mrow><annotation encoding="application/x-tex">\textit{å¯éªŒè¯å¥–åŠ±}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord textit cjk_fallback">å¯éªŒè¯å¥–åŠ±</span></span></span></span></span></span>ã€ä»¥ç‰©ç†å­¦åŸç†ä¸ºæ ¹åŸºçš„è§†é¢‘ç”Ÿæˆåè®­ç»ƒæ¡†æ¶ã€‚è¯¥æ¡†æ¶ä¸ä¾èµ–äººç±»æˆ–è§†è§‰è¯­è¨€æ¨¡å‹ (VLM) çš„åé¦ˆï¼Œè€Œæ˜¯åˆ©ç”¨å†»ç»“çš„å·¥å…·æ¨¡å‹ä»ç”Ÿæˆè§†é¢‘ä¸­æå– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="italic">å¯æµ‹é‡çš„ä»£ç†é‡</mtext></mrow><annotation encoding="application/x-tex">\textit{å¯æµ‹é‡çš„ä»£ç†é‡}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord textit cjk_fallback">å¯æµ‹é‡çš„ä»£ç†é‡</span></span></span></span></span></span>ï¼šä»¥å…‰æµä½œä¸ºé€Ÿåº¦çš„ä»£ç†ï¼Œä»¥é«˜çº§å¤–è§‚ç‰¹å¾ä½œä¸ºè´¨é‡çš„ä»£ç†ã€‚åŸºäºè¿™äº›ä»£ç†é‡ï¼Œæˆ‘ä»¬é€šè¿‡ä¸¤ç§äº’è¡¥çš„å¥–åŠ±æœºåˆ¶æ¥æ˜¾å¼åœ°å¼ºåŒ–ç‰›é¡¿åŠ›å­¦ç»“æ„ï¼šä¸€æ˜¯å¼ºåˆ¶æ‰§è¡Œæ’å®šåŠ é€Ÿåº¦åŠ¨åŠ›å­¦çš„ç‰›é¡¿è¿åŠ¨å­¦çº¦æŸå¥–åŠ±ï¼ŒäºŒæ˜¯é˜²æ­¢å‡ºç°å¹³å‡¡é€€åŒ–è§£çš„è´¨é‡å®ˆæ’å¥–åŠ±ã€‚æˆ‘ä»¬ä½¿ç”¨æ–°æ„å»ºçš„å¤§è§„æ¨¡åŸºå‡†æ•°æ®é›† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">NewtonBench-60K</mtext></mrow><annotation encoding="application/x-tex">\texttt{NewtonBench-60K}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6111em;"/><span class="mord text"><span class="mord texttt">NewtonBench-60K</span></span></span></span></span></span>ï¼Œåœ¨äº”ç§ç‰›é¡¿è¿åŠ¨åŸºå…ƒï¼ˆè‡ªç”±è½ä½“ã€æ°´å¹³æŠ›å°„ã€æŠ›ç‰©çº¿æŠ›å°„ã€æ–œå¡ä¸‹æ»‘ä¸ä¸Šæ»‘ï¼‰ä¸Šå¯¹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">NewtonRewards</mtext></mrow><annotation encoding="application/x-tex">\texttt{NewtonRewards}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6111em;"/><span class="mord text"><span class="mord texttt">NewtonRewards</span></span></span></span></span></span> è¿›è¡Œäº†è¯„ä¼°ã€‚åœ¨æ‰€æœ‰åŸºå…ƒçš„è§†è§‰ä¸ç‰©ç†æŒ‡æ ‡ä¸Šï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">NewtonRewards</mtext></mrow><annotation encoding="application/x-tex">\texttt{NewtonRewards}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6111em;"/><span class="mord text"><span class="mord texttt">NewtonRewards</span></span></span></span></span></span> å‡èƒ½æŒç»­æå‡ç”Ÿæˆè§†é¢‘çš„ç‰©ç†åˆç†æ€§ã€è¿åŠ¨å¹³æ»‘åº¦ä¸æ—¶é—´è¿è´¯æ€§ï¼Œæ•ˆæœä¼˜äºå·²æœ‰çš„åè®­ç»ƒæ–¹æ³•ã€‚æ­¤å¤–ï¼Œåœ¨é«˜åº¦ã€é€Ÿåº¦ã€æ‘©æ“¦åŠ›ç­‰å‚æ•°å‘ç”Ÿåˆ†å¸ƒå¤–åç§»æ—¶ï¼Œè¯¥æ–¹æ³•ä¾ç„¶èƒ½ä¿æŒå¼ºåŠ²çš„æ€§èƒ½ã€‚æˆ‘ä»¬çš„ç ”ç©¶ç»“æœè¡¨æ˜ï¼ŒåŸºäºç‰©ç†å­¦çš„å¯éªŒè¯å¥–åŠ±ä¸ºå®ç°ç‰©ç†æ„ŸçŸ¥çš„è§†é¢‘ç”Ÿæˆæä¾›äº†ä¸€æ¡å¯æ‰©å±•çš„è·¯å¾„ã€‚</p>
<h2 data-id="heading-19">REASONEDIT: é¢å‘æ¨ç†å¢å¼ºçš„å›¾åƒç¼–è¾‘æ¨¡å‹</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.22625" target="_blank" title="https://arxiv.org/abs/2511.22625" ref="nofollow noopener noreferrer">REASONEDIT: é¢å‘æ¨ç†å¢å¼ºçš„å›¾åƒç¼–è¾‘æ¨¡å‹</a></p>
<p>å›¾åƒç¼–è¾‘æ¨¡å‹è¿‘æœŸå–å¾—äº†æ˜¾è‘—è¿›å±•ã€‚ä¸€ç§å¸¸è§çš„æ¶æ„è®¾è®¡æ˜¯å°†å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ (Multimodal Large Language Model, MLLM) ç¼–ç å™¨ä¸æ‰©æ•£è§£ç å™¨ç›¸ç»“åˆï¼Œä¾‹å¦‚ Step1X-Edit å’Œ Qwen-Image-Edit ç­‰ç³»ç»Ÿã€‚åœ¨è¿™äº›ç³»ç»Ÿä¸­ï¼ŒMLLM è´Ÿè´£ç¼–ç å‚è€ƒå›¾åƒå’Œç¼–è¾‘æŒ‡ä»¤ï¼Œä½†å…¶å‚æ•°åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¿æŒå†»ç»“ã€‚æœ¬å·¥ä½œè¡¨æ˜ï¼Œé‡Šæ”¾ MLLM çš„æ¨ç†èƒ½åŠ›å¯ä»¥è¿›ä¸€æ­¥æ‹“å±•å›¾åƒç¼–è¾‘æ¨¡å‹çš„æ€§èƒ½è¾¹ç•Œã€‚å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬æ¢ç´¢äº†ä¸¤ç§æ¨ç†æœºåˆ¶â€”â€”æ€ç»´ (Thinking) ä¸åæ€ (Reflection)ï¼Œä»¥æå‡æ¨¡å‹å¯¹æŒ‡ä»¤çš„ç†è§£èƒ½åŠ›å’Œç¼–è¾‘å‡†ç¡®æ€§ã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªæ€ç»´-ç¼–è¾‘-åæ€å¾ªç¯æ¡†æ¶ï¼šæ€ç»´æœºåˆ¶åˆ©ç”¨ MLLM çš„ä¸–ç•ŒçŸ¥è¯†æ¥è§£ææŠ½è±¡æŒ‡ä»¤ï¼Œè€Œåæ€æœºåˆ¶åˆ™è¯„ä¼°ç¼–è¾‘ç»“æœã€è‡ªåŠ¨çº æ­£éé¢„æœŸçš„ä¿®æ”¹ï¼Œå¹¶ç¡®å®šåœæ­¢è¿­ä»£çš„æ—¶æœºã€‚å¤§é‡å®éªŒéªŒè¯äº†æˆ‘ä»¬æ¨ç†æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚å½“åŸºäº Step1X-Edit åˆå§‹åŒ–æˆ‘ä»¬çš„ DiT æ¨¡å‹ (å³ ReasonEdit-S) æ—¶ï¼Œåœ¨ ImgEdit (+4.3%)ã€GEdit (+4.7%) å’Œ Kris (+8.2%) åŸºå‡†ä¸Šå‡å–å¾—äº†æ˜¾è‘—æå‡ã€‚æ­¤å¤–ï¼Œå½“ä¸ Qwen-Image-Edit ç»“åˆæ„å»º ReasonEdit-Q æ—¶ï¼Œå…¶åœ¨ GEdit å’Œ Kris åŸºå‡†ä¸Šçš„è¡¨ç°ä¹Ÿè¶…è¶Šäº†æ­¤å‰æ‰€æœ‰çš„å¼€æºæ–¹æ³•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šç±»å‹å®‰å…¨çš„å¤šç»´å·¥å…·]]></title>    <link>https://juejin.cn/post/7580310413754318898</link>    <guid>https://juejin.cn/post/7580310413754318898</guid>    <pubDate>2025-12-06T15:11:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580310413754318898" data-draft-id="7580329353353068590" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šç±»å‹å®‰å…¨çš„å¤šç»´å·¥å…·"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-06T15:11:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šç±»å‹å®‰å…¨çš„å¤šç»´å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T15:11:50.000Z" title="Sat Dec 06 2025 15:11:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨C++ä¸­ï¼Œç±»å‹è½¬æ¢æ˜¯å°†ä¸€ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹çš„è¿‡ç¨‹ã€‚ä¸Cè¯­è¨€ç®€å•çš„<code>(type)value</code>å¼ºåˆ¶è½¬æ¢ä¸åŒï¼ŒC++æä¾›äº†å››ç§ä¸“é—¨çš„å¼ºåˆ¶ç±»å‹è½¬æ¢è¿ç®—ç¬¦ï¼Œå®ƒä»¬ä¸ä»…æ‰§è¡Œè½¬æ¢ï¼Œè¿˜æä¾›äº†ç¼–è¯‘æ—¶æ£€æŸ¥å’Œæ›´æ˜ç¡®çš„è¯­ä¹‰ã€‚è¿™ä½“ç°äº†C++"ç±»å‹å®‰å…¨"çš„è®¾è®¡å“²å­¦ã€‚</p>
<h2 data-id="heading-0">C++å››ç§å¼ºåˆ¶ç±»å‹è½¬æ¢è¿ç®—ç¬¦</h2>
<h3 data-id="heading-1">1. static_cast - é™æ€ç±»å‹è½¬æ¢</h3>
<p><code>static_cast</code>æ˜¯æœ€å¸¸ç”¨çš„è½¬æ¢è¿ç®—ç¬¦ï¼Œç”¨äºç¼–è¯‘æ—¶å·²çŸ¥çš„ã€ç›¸å¯¹å®‰å…¨çš„ç±»å‹è½¬æ¢ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">static_cast</span>&lt;new_type&gt;(expression)
</code></pre>
<p><strong>å…¸å‹åº”ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åŸºæœ¬ç±»å‹è½¬æ¢</span>
<span class="hljs-type">float</span> f = <span class="hljs-number">3.14</span>;
<span class="hljs-type">int</span> i = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(f);  <span class="hljs-comment">// 3</span>

<span class="hljs-comment">// ç›¸å…³ç±»å±‚æ¬¡ç»“æ„ä¸­çš„å‘ä¸Šè½¬æ¢ï¼ˆå®‰å…¨ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {};
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {};
Derived d;
Base* b = <span class="hljs-built_in">static_cast</span>&lt;Base*&gt;(&amp;d);  <span class="hljs-comment">// å‘ä¸Šè½¬æ¢ï¼Œå®‰å…¨</span>

<span class="hljs-comment">// void*åˆ°å…·ä½“æŒ‡é’ˆç±»å‹çš„è½¬æ¢</span>
<span class="hljs-type">void</span>* p = <span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>));
<span class="hljs-type">int</span>* ip = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>*&gt;(p);
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹å…¼å®¹æ€§</li>
<li>ä¸èƒ½ç§»é™¤const/volatileé™å®šç¬¦</li>
<li>ä¸èƒ½ç”¨äºæ— å…³ç±»å‹æŒ‡é’ˆé—´çš„è½¬æ¢</li>
</ul>
<h3 data-id="heading-2">2. dynamic_cast - åŠ¨æ€ç±»å‹è½¬æ¢</h3>
<p><code>dynamic_cast</code>ä¸“é—¨ç”¨äºå¤„ç†å¤šæ€ç±»å‹ï¼Œåœ¨è¿è¡Œæ—¶æ£€æŸ¥è½¬æ¢çš„å®‰å…¨æ€§ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">dynamic_cast</span>&lt;new_type&gt;(expression)
</code></pre>
<p><strong>å…¸å‹åº”ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> { <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span> </span>{} };  <span class="hljs-comment">// å¿…é¡»æœ‰è™šå‡½æ•°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {};

Base* b = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Derived</span>();

<span class="hljs-comment">// å‘ä¸‹è½¬æ¢ï¼ˆè¿è¡Œæ—¶æ£€æŸ¥ï¼‰</span>
Derived* d = <span class="hljs-built_in">dynamic_cast</span>&lt;Derived*&gt;(b);
<span class="hljs-keyword">if</span> (d != <span class="hljs-literal">nullptr</span>) {
    <span class="hljs-comment">// è½¬æ¢æˆåŠŸ</span>
}

<span class="hljs-comment">// äº¤å‰è½¬æ¢ï¼ˆå¤šé‡ç»§æ‰¿åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> { <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span> </span>{} };
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> { <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">bar</span><span class="hljs-params">()</span> </span>{} };
<span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> : <span class="hljs-keyword">public</span> A, <span class="hljs-keyword">public</span> B {};

A* a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">C</span>();
B* b = <span class="hljs-built_in">dynamic_cast</span>&lt;B*&gt;(a);  <span class="hljs-comment">// æ­£ç¡®çš„äº¤å‰è½¬æ¢</span>
</code></pre>
<p><strong>é‡è¦ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥</li>
<li>å¤±è´¥æ—¶è¿”å›nullptrï¼ˆæŒ‡é’ˆï¼‰æˆ–æŠ›å‡ºstd::bad_castå¼‚å¸¸ï¼ˆå¼•ç”¨ï¼‰</li>
<li>åªé€‚ç”¨äºå«è™šå‡½æ•°çš„ç±»ï¼ˆå¤šæ€ç±»å‹ï¼‰</li>
<li>æ€§èƒ½å¼€é”€è¾ƒå¤§</li>
</ul>
<h3 data-id="heading-3">3. const_cast - å¸¸é‡æ€§è½¬æ¢</h3>
<p><code>const_cast</code>ä¸“é—¨ç”¨äºä¿®æ”¹ç±»å‹çš„constæˆ–volatileé™å®šç¬¦ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">const_cast</span>&lt;new_type&gt;(expression)
</code></pre>
<p><strong>å…¸å‹åº”ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç§»é™¤consté™å®šç¬¦</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> ci = <span class="hljs-number">10</span>;
<span class="hljs-type">int</span>* modifiable = <span class="hljs-built_in">const_cast</span>&lt;<span class="hljs-type">int</span>*&gt;(&amp;ci);
<span class="hljs-comment">// æ³¨æ„ï¼šä¿®æ”¹åŸconstå¯¹è±¡æ˜¯æœªå®šä¹‰è¡Œä¸º</span>

<span class="hljs-comment">// åœ¨å·²çŸ¥å¯¹è±¡å®é™…éå¸¸é‡æ—¶çš„åˆæ³•ä½¿ç”¨</span>
<span class="hljs-type">int</span> actual_var = <span class="hljs-number">20</span>;
<span class="hljs-type">const</span> <span class="hljs-type">int</span>* pc = &amp;actual_var;
<span class="hljs-type">int</span>* p = <span class="hljs-built_in">const_cast</span>&lt;<span class="hljs-type">int</span>*&gt;(pc);  <span class="hljs-comment">// åˆæ³•ï¼Œactual_varæœ¬å°±ä¸æ˜¯const</span>

<span class="hljs-comment">// ç”¨äºè°ƒç”¨æ—§çš„Cé£æ ¼API</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">legacy_api</span><span class="hljs-params">(<span class="hljs-type">char</span>* str)</span></span>;
<span class="hljs-type">const</span> <span class="hljs-type">char</span>* msg = <span class="hljs-string">"Hello"</span>;
<span class="hljs-built_in">legacy_api</span>(<span class="hljs-built_in">const_cast</span>&lt;<span class="hljs-type">char</span>*&gt;(msg));
</code></pre>
<p><strong>å®‰å…¨è­¦å‘Šï¼š</strong></p>
<ul>
<li>ä¸èƒ½ç”¨äºæ”¹å˜å®é™…ç±»å‹</li>
<li>ä¿®æ”¹åŸconstå¯¹è±¡æ˜¯æœªå®šä¹‰è¡Œä¸º</li>
<li>åº”è°¨æ…ä½¿ç”¨ï¼Œé€šå¸¸è¡¨ç¤ºè®¾è®¡æœ‰é—®é¢˜</li>
</ul>
<h3 data-id="heading-4">4. reinterpret_cast - é‡æ–°è§£é‡Šè½¬æ¢</h3>
<p><code>reinterpret_cast</code>æä¾›ä½å±‚æ¬¡çš„é‡æ–°è§£é‡Šï¼Œæ˜¯æœ€å±é™©çš„è½¬æ¢ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">reinterpret_cast</span>&lt;new_type&gt;(expression)
</code></pre>
<p><strong>å…¸å‹åº”ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æŒ‡é’ˆä¸æ•´æ•°é—´çš„è½¬æ¢</span>
<span class="hljs-type">intptr_t</span> address = <span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">intptr_t</span>&gt;(&amp;obj);

<span class="hljs-comment">// æ— å…³æŒ‡é’ˆç±»å‹é—´çš„è½¬æ¢</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Data</span> { <span class="hljs-type">int</span> x; <span class="hljs-type">double</span> y; };
Data* data = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Data</span>();
<span class="hljs-type">char</span>* buffer = <span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">char</span>*&gt;(data);  <span class="hljs-comment">// ç”¨äºåºåˆ—åŒ–</span>

<span class="hljs-comment">// å‡½æ•°æŒ‡é’ˆè½¬æ¢</span>
<span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*FuncPtr)</span><span class="hljs-params">()</span></span>;
FuncPtr fp = <span class="hljs-built_in">reinterpret_cast</span>&lt;FuncPtr&gt;(<span class="hljs-number">0x12345678</span>);  <span class="hljs-comment">// å±é™©ï¼</span>
</code></pre>
<p><strong>å±é™©ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>å‡ ä¹ä¸è¿›è¡Œä»»ä½•è¿è¡Œæ—¶æ£€æŸ¥</li>
<li>æ»¥ç”¨ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸º</li>
<li>é€šå¸¸æ˜¯å¹³å°ç›¸å…³çš„</li>
<li>åº”ä½œä¸ºæœ€åæ‰‹æ®µä½¿ç”¨</li>
</ul>
<h2 data-id="heading-5">å¯¹æ¯”åˆ†æ</h2>



































<table><thead><tr><th>è½¬æ¢ç±»å‹</th><th>æ£€æŸ¥æ—¶æœº</th><th>å®‰å…¨æ€§</th><th>å…¸å‹ç”¨é€”</th></tr></thead><tbody><tr><td>static_cast</td><td>ç¼–è¯‘æ—¶</td><td>è¾ƒé«˜</td><td>ç›¸å…³ç±»å‹è½¬æ¢ã€æ•°å€¼è½¬æ¢</td></tr><tr><td>dynamic_cast</td><td>è¿è¡Œæ—¶</td><td>é«˜</td><td>å¤šæ€ç±»å‹å‘ä¸‹/äº¤å‰è½¬æ¢</td></tr><tr><td>const_cast</td><td>ç¼–è¯‘æ—¶</td><td>ä½</td><td>æ·»åŠ /ç§»é™¤const/volatile</td></tr><tr><td>reinterpret_cast</td><td>æ— æ£€æŸ¥</td><td>æä½</td><td>ä½å±‚äºŒè¿›åˆ¶æ“ä½œ</td></tr></tbody></table>
<h2 data-id="heading-6">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-7">1. è½¬æ¢é€‰æ‹©æŒ‡å—</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨static_castè¿›è¡Œç›¸å…³ç±»å‹è½¬æ¢</span>
<span class="hljs-type">double</span> d = <span class="hljs-number">3.14</span>;
<span class="hljs-type">int</span> i = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(d);  <span class="hljs-comment">// æ¨è</span>
<span class="hljs-comment">// int i = (int)d;            // Cé£æ ¼ï¼Œä¸æ¨è</span>

<span class="hljs-comment">// å¤šæ€ç±»å‹ä½¿ç”¨dynamic_cast</span>
Base* base = <span class="hljs-built_in">getObject</span>();
<span class="hljs-keyword">if</span> (Derived* derived = <span class="hljs-built_in">dynamic_cast</span>&lt;Derived*&gt;(base)) {
    <span class="hljs-comment">// å®‰å…¨åœ°ä½¿ç”¨derived</span>
}

<span class="hljs-comment">// é¿å…const_castï¼Œé™¤éå¿…è¦</span>
<span class="hljs-comment">// é€šå¸¸æ„å‘³ç€APIè®¾è®¡æœ‰é—®é¢˜</span>
</code></pre>
<h3 data-id="heading-8">2. è®¾è®¡è€ƒè™‘</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨è™šå‡½æ•°ä»£æ›¿dynamic_cast</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">makeSound</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¤šæ€è®¾è®¡</span>
    <span class="hljs-comment">// ä¼˜äºä½¿ç”¨dynamic_castæ£€æŸ¥ç±»å‹</span>
};

<span class="hljs-comment">// ä½¿ç”¨æ¨¡æ¿é¿å…ç±»å‹è½¬æ¢</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
T* <span class="hljs-title">safe_cast</span><span class="hljs-params">(Base* base)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">dynamic_cast</span>&lt;T*&gt;(base);
}
</code></pre>
<h3 data-id="heading-9">3. ç°ä»£C++çš„æ”¹è¿›</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++17çš„std::anyå’Œstd::variant</span>
std::any anything = <span class="hljs-number">42</span>;
<span class="hljs-keyword">try</span> {
    <span class="hljs-type">int</span> i = std::<span class="hljs-built_in">any_cast</span>&lt;<span class="hljs-type">int</span>&gt;(anything);
} <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::bad_any_cast&amp; e) {
    <span class="hljs-comment">// ç±»å‹å®‰å…¨</span>
}

<span class="hljs-comment">// std::variantç±»å‹å®‰å…¨è®¿é—®</span>
std::variant&lt;<span class="hljs-type">int</span>, std::string&gt; v = <span class="hljs-string">"hello"</span>;
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span>* p = std::<span class="hljs-built_in">get_if</span>&lt;std::string&gt;(&amp;v)) {
    <span class="hljs-comment">// ç±»å‹å®‰å…¨è®¿é—®</span>
}
</code></pre>
<h2 data-id="heading-10">ä¸Cé£æ ¼è½¬æ¢çš„å¯¹æ¯”</h2>
<p>Cé£æ ¼è½¬æ¢<code>(type)value</code>çš„é—®é¢˜ï¼š</p>
<ol>
<li>æ„å›¾ä¸æ˜ç¡®</li>
<li>å¯èƒ½æ‰§è¡Œå¤šç§ä¸åŒè½¬æ¢</li>
<li>éš¾ä»¥æœç´¢å’Œé‡æ„</li>
<li>ç¼ºä¹ç±»å‹å®‰å…¨æ£€æŸ¥</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¸æ˜ç¡®çš„Cé£æ ¼è½¬æ¢</span>
Base* b = (Base*)ptr;  <span class="hljs-comment">// è¿™æ˜¯ä»€ä¹ˆè½¬æ¢ï¼Ÿstaticï¼Ÿreinterpretï¼Ÿ</span>

<span class="hljs-comment">// æ˜ç¡®çš„C++è½¬æ¢</span>
Base* b1 = <span class="hljs-built_in">static_cast</span>&lt;Base*&gt;(ptr);     <span class="hljs-comment">// æ˜ç¡®æ˜¯static_cast</span>
Base* b2 = <span class="hljs-built_in">dynamic_cast</span>&lt;Base*&gt;(ptr);    <span class="hljs-comment">// æ˜ç¡®æ˜¯dynamic_cast</span>
Base* b3 = <span class="hljs-built_in">reinterpret_cast</span>&lt;Base*&gt;(ptr); <span class="hljs-comment">// æ˜ç¡®æ˜¯reinterpret_cast</span>
</code></pre>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>C++çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ç³»ç»Ÿæä¾›äº†æ¯”Cè¯­è¨€æ›´å®‰å…¨ã€æ›´æ˜ç¡®çš„ç±»å‹è½¬æ¢æœºåˆ¶ã€‚æ­£ç¡®ä½¿ç”¨è¿™äº›è½¬æ¢è¿ç®—ç¬¦å¯ä»¥æé«˜ä»£ç çš„ï¼š</p>
<ol>
<li><strong>ç±»å‹å®‰å…¨æ€§</strong>ï¼šå‡å°‘è¿è¡Œæ—¶é”™è¯¯</li>
<li><strong>å¯è¯»æ€§</strong>ï¼šæ˜ç¡®è¡¨è¾¾è½¬æ¢æ„å›¾</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šæ˜“äºæœç´¢å’Œé‡æ„</li>
<li><strong>æ€§èƒ½</strong>ï¼šé€‚å½“çš„ç¼–è¯‘æ—¶ä¼˜åŒ–</li>
</ol>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨C++é£æ ¼è½¬æ¢</li>
<li>é€‰æ‹©æœ€å…·ä½“ã€æœ€å®‰å…¨çš„è½¬æ¢ç±»å‹</li>
<li>å°½é‡é¿å…ä½¿ç”¨reinterpret_castå’Œconst_cast</li>
<li>è€ƒè™‘ä½¿ç”¨å¤šæ€ã€æ¨¡æ¿ç­‰è®¾è®¡æ›¿ä»£ç±»å‹è½¬æ¢</li>
<li>åœ¨å¿…é¡»è½¬æ¢æ—¶æ·»åŠ å……åˆ†çš„æ³¨é‡Šå’Œé”™è¯¯å¤„ç†</li>
</ul>
<p>é€šè¿‡åˆç†ä½¿ç”¨è¿™äº›å·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥åœ¨éœ€è¦ç±»å‹è½¬æ¢çš„åœºåˆæ—¢ä¿æŒçµæ´»æ€§ï¼Œåˆç»´æŠ¤ç±»å‹å®‰å…¨ï¼Œè¿™æ˜¯C++ä½œä¸ºç³»ç»Ÿçº§è¯­è¨€çš„é‡è¦ä¼˜åŠ¿ä¹‹ä¸€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ç²¾åã€‘C++æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨å®Œå…¨æŒ‡å—ï¼šä¸ºä»€ä¹ˆã€ä½•æ—¶ä»¥åŠå¦‚ä½•æ­£ç¡®ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7580373352420179994</link>    <guid>https://juejin.cn/post/7580373352420179994</guid>    <pubDate>2025-12-06T15:13:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7580373352420179994" data-draft-id="7580329353353084974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ç²¾åã€‘C++æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨å®Œå…¨æŒ‡å—ï¼šä¸ºä»€ä¹ˆã€ä½•æ—¶ä»¥åŠå¦‚ä½•æ­£ç¡®ä½¿ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-06T15:13:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ç²¾åã€‘C++æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨å®Œå…¨æŒ‡å—ï¼šä¸ºä»€ä¹ˆã€ä½•æ—¶ä»¥åŠå¦‚ä½•æ­£ç¡®ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-06T15:13:43.000Z" title="Sat Dec 06 2025 15:13:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡æ˜¯æˆ‘æ”’ç»™è‡ªå·±çš„é¢è¯•å‰å¿…çœ‹æ–‡ç« ä¹‹ä¸€ï¼Œå±äºç§è—ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ä¸ªå¸¸è§çš„è¯¯è§£</h2>
<p>è®¸å¤šC++åˆå­¦è€…ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šâ€œä¸ºä»€ä¹ˆæˆ‘éœ€è¦åœ¨æ„é€ å‡½æ•°åé¢åŠ ä¸ªå†’å·æ¥åˆå§‹åŒ–æˆå‘˜ï¼Ÿåœ¨æ„é€ å‡½æ•°ä½“å†…èµ‹å€¼ä¸è¡Œå—ï¼Ÿâ€æœ¬æ–‡å°†é€šè¿‡æ·±å…¥åˆ†æC++å¯¹è±¡æ„é€ æœºåˆ¶ï¼Œå½»åº•è§£ç­”è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€åˆå§‹åŒ–åˆ—è¡¨çš„åŸºæœ¬è¯­æ³•</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> {
    <span class="hljs-type">int</span> a;
    std::string str;
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨</span>
    <span class="hljs-built_in">Example</span>(<span class="hljs-type">int</span> x, <span class="hljs-type">const</span> std::string&amp; s) : <span class="hljs-built_in">a</span>(x), <span class="hljs-built_in">str</span>(s) {
        <span class="hljs-comment">// æ„é€ å‡½æ•°ä½“</span>
    }
    
    <span class="hljs-comment">// æ„é€ å‡½æ•°å†…èµ‹å€¼ï¼ˆå¯¹æ¯”ï¼‰</span>
    <span class="hljs-built_in">Example</span>(<span class="hljs-type">int</span> x, <span class="hljs-type">const</span> std::string&amp; s) {
        a = x;
        str = s;
    }
};
</code></pre>
<h2 data-id="heading-2">äºŒã€åˆå§‹åŒ– vs èµ‹å€¼çš„æœ¬è´¨åŒºåˆ«</h2>
<h3 data-id="heading-3">2.1 å¯¹è±¡æ„é€ çš„æ—¶é—´çº¿</h3>
<pre><code class="hljs language-markdown" lang="markdown">å¯¹è±¡æ„é€ çš„å®Œæ•´æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> åˆ†é…å¯¹è±¡å†…å­˜
<span class="hljs-bullet">2.</span> æ‰§è¡Œçˆ¶ç±»æ„é€ ï¼ˆå¦‚æœæœ‰ï¼‰
<span class="hljs-bullet">3.</span> æ‰§è¡Œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨
<span class="hljs-bullet">   -</span> æŒ‰å£°æ˜é¡ºåºåˆå§‹åŒ–æ‰€æœ‰æˆå‘˜
<span class="hljs-bullet">   -</span> æœªåœ¨åˆ—è¡¨ä¸­çš„æˆå‘˜ä½¿ç”¨é»˜è®¤åˆå§‹åŒ–
<span class="hljs-bullet">4.</span> æ‰§è¡Œæ„é€ å‡½æ•°ä½“
</code></pre>
<h3 data-id="heading-4">2.2 å…³é”®ç†è§£ï¼šæ‰€æœ‰æˆå‘˜éƒ½ä¼šè¢«åˆå§‹åŒ–</h3>
<p><strong>é‡è¦åŸåˆ™</strong>ï¼šæ— è®ºæ˜¯å¦å‡ºç°åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼Œæ‰€æœ‰æˆå‘˜å˜é‡éƒ½ä¼šåœ¨è¿›å…¥æ„é€ å‡½æ•°ä½“ä¹‹å‰è¢«åˆå§‹åŒ–ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
    <span class="hljs-type">int</span> x;      <span class="hljs-comment">// å£°æ˜1</span>
    std::string s; <span class="hljs-comment">// å£°æ˜2</span>
    <span class="hljs-type">int</span> y;      <span class="hljs-comment">// å£°æ˜3</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Demo</span>() : <span class="hljs-built_in">y</span>(<span class="hljs-number">30</span>) {
        <span class="hljs-comment">// å®é™…æ‰§è¡Œé¡ºåºï¼š</span>
        <span class="hljs-comment">// 1. x: ä¸åœ¨åˆ—è¡¨ä¸­ â†’ é»˜è®¤åˆå§‹åŒ–ï¼ˆéšæœºå€¼ï¼‰</span>
        <span class="hljs-comment">// 2. s: ä¸åœ¨åˆ—è¡¨ä¸­ â†’ è°ƒç”¨std::string()é»˜è®¤æ„é€ å‡½æ•°</span>
        <span class="hljs-comment">// 3. y: åœ¨åˆ—è¡¨ä¸­ â†’ y = 30</span>
        <span class="hljs-comment">// 4. è¿›å…¥æ„é€ å‡½æ•°ä½“</span>
    }
};
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€å¿…é¡»ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨çš„å››ç§æƒ…å†µ</h2>
<h3 data-id="heading-6">3.1 constæˆå‘˜å˜é‡</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConstMember</span> {
    <span class="hljs-type">const</span> <span class="hljs-type">int</span> id;  <span class="hljs-comment">// constæˆå‘˜</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å¿…é¡»ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨</span>
    <span class="hljs-built_in">ConstMember</span>(<span class="hljs-type">int</span> value) : <span class="hljs-built_in">id</span>(value) { }
    
    <span class="hljs-comment">// é”™è¯¯ï¼constæˆå‘˜ä¸èƒ½åœ¨æ„é€ å‡½æ•°ä½“å†…èµ‹å€¼</span>
    <span class="hljs-comment">// ConstMember(int value) { id = value; }  // ç¼–è¯‘é”™è¯¯ï¼</span>
};
</code></pre>
<h3 data-id="heading-7">3.2 å¼•ç”¨æˆå‘˜å˜é‡</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RefMember</span> {
    <span class="hljs-type">int</span>&amp; ref;  <span class="hljs-comment">// å¼•ç”¨æˆå‘˜</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å¿…é¡»ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨</span>
    <span class="hljs-built_in">RefMember</span>(<span class="hljs-type">int</span>&amp; r) : <span class="hljs-built_in">ref</span>(r) { }
    
    <span class="hljs-comment">// é”™è¯¯ï¼å¼•ç”¨å¿…é¡»åœ¨åˆå§‹åŒ–æ—¶ç»‘å®š</span>
    <span class="hljs-comment">// RefMember(int&amp; r) { ref = r; }  // ç¼–è¯‘é”™è¯¯ï¼</span>
};
</code></pre>
<h3 data-id="heading-8">3.3 æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»æˆå‘˜</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NoDefault</span> {
    <span class="hljs-type">int</span> value;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">NoDefault</span>(<span class="hljs-type">int</span> v) : <span class="hljs-built_in">value</span>(v) { }  <span class="hljs-comment">// åªæœ‰å¸¦å‚æ„é€ å‡½æ•°</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šæ²¡æœ‰ NoDefault() é»˜è®¤æ„é€ å‡½æ•°ï¼</span>
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Container</span> {
    NoDefault obj;  <span class="hljs-comment">// éœ€è¦åˆå§‹åŒ–çš„æˆå‘˜</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å¿…é¡»ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨</span>
    <span class="hljs-built_in">Container</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">obj</span>(val) { }
    
    <span class="hljs-comment">// é”™è¯¯ï¼ç¼–è¯‘å™¨å°è¯•è°ƒç”¨obj.NoDefault()ä½†ä¸å­˜åœ¨</span>
    <span class="hljs-comment">// Container(int val) { obj = NoDefault(val); }  // ç¼–è¯‘é”™è¯¯ï¼</span>
};
</code></pre>
<h3 data-id="heading-9">3.4 çˆ¶ç±»æ„é€ å‡½æ•°è°ƒç”¨</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
    <span class="hljs-type">int</span> baseValue;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Base</span>(<span class="hljs-type">int</span> v) : <span class="hljs-built_in">baseValue</span>(v) { }  <span class="hljs-comment">// æœ‰å‚æ„é€ å‡½æ•°</span>
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {
    <span class="hljs-type">int</span> derivedValue;
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å¿…é¡»ç”¨åˆå§‹åŒ–åˆ—è¡¨è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span>
    <span class="hljs-built_in">Derived</span>(<span class="hljs-type">int</span> b, <span class="hljs-type">int</span> d) : <span class="hljs-built_in">Base</span>(b), <span class="hljs-built_in">derivedValue</span>(d) { }
    
    <span class="hljs-comment">// é”™è¯¯ï¼Baseæ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°</span>
    <span class="hljs-comment">// Derived(int b, int d) { derivedValue = d; }  // ç¼–è¯‘é”™è¯¯ï¼</span>
};
</code></pre>
<h2 data-id="heading-10">å››ã€åˆå§‹åŒ–åˆ—è¡¨çš„æ€§èƒ½ä¼˜åŠ¿</h2>
<h3 data-id="heading-11">4.1 ç±»ç±»å‹æˆå‘˜çš„æ€§èƒ½å·®å¼‚</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceDemo</span> {
    std::string data;
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// ä½æ•ˆæ–¹å¼ï¼šé»˜è®¤æ„é€  + èµ‹å€¼</span>
    <span class="hljs-built_in">PerformanceDemo</span>(<span class="hljs-type">const</span> std::string&amp; s) {
        data = s;  <span class="hljs-comment">// æ‰§è¡Œäº†ä¸¤æ¬¡æ“ä½œï¼š</span>
                   <span class="hljs-comment">// 1. é»˜è®¤æ„é€ ç©ºå­—ç¬¦ä¸²</span>
                   <span class="hljs-comment">// 2. èµ‹å€¼ï¼ˆå¯èƒ½æ¶‰åŠå†…å­˜åˆ†é…å’Œå¤åˆ¶ï¼‰</span>
    }
    
    <span class="hljs-comment">// é«˜æ•ˆæ–¹å¼ï¼šç›´æ¥æ„é€ </span>
    <span class="hljs-built_in">PerformanceDemo</span>(<span class="hljs-type">const</span> std::string&amp; s) : <span class="hljs-built_in">data</span>(s) { }
    <span class="hljs-comment">// åªæ‰§è¡Œä¸€æ¬¡ï¼šç›´æ¥æ‹·è´æ„é€ </span>
};
</code></pre>
<h3 data-id="heading-12">4.2 æ€§èƒ½å½±å“çš„å®é™…æµ‹è¯•</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ›å»º10000ä¸ªå¯¹è±¡çš„æ—¶é—´å¯¹æ¯”ï¼š</span>
<span class="hljs-comment">// ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼š185ms</span>
<span class="hljs-comment">// æ„é€ å‡½æ•°å†…èµ‹å€¼ï¼š245ms</span>
<span class="hljs-comment">// æ€§èƒ½æå‡çº¦24.5%</span>
</code></pre>
<h2 data-id="heading-13">äº”ã€åˆå§‹åŒ–é¡ºåºçš„é‡è¦è§„åˆ™</h2>
<h3 data-id="heading-14">5.1 é¡ºåºç”±å£°æ˜é¡ºåºå†³å®š</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderMatters</span> {
    <span class="hljs-type">int</span> x;    <span class="hljs-comment">// å£°æ˜1</span>
    <span class="hljs-type">int</span> y;    <span class="hljs-comment">// å£°æ˜2</span>
    <span class="hljs-type">int</span> z;    <span class="hljs-comment">// å£°æ˜3</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// åˆå§‹åŒ–åˆ—è¡¨é¡ºåºï¼šz, x, y</span>
    <span class="hljs-comment">// ä½†å®é™…æ‰§è¡Œé¡ºåºï¼šx â†’ y â†’ zï¼ˆå£°æ˜é¡ºåºï¼ï¼‰</span>
    <span class="hljs-built_in">OrderMatters</span>() : <span class="hljs-built_in">z</span>(<span class="hljs-number">10</span>), <span class="hljs-built_in">x</span>(<span class="hljs-number">20</span>), <span class="hljs-built_in">y</span>(<span class="hljs-number">30</span>) { }
};
</code></pre>
<h3 data-id="heading-15">5.2 é¡ºåºä¸ä¸€è‡´çš„é™·é˜±</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dangerous</span> {
    <span class="hljs-type">int</span> a;
    <span class="hljs-type">int</span> b;
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// âŒ å±é™©çš„åˆå§‹åŒ–é¡ºåº</span>
    <span class="hljs-built_in">Dangerous</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">b</span>(val), <span class="hljs-built_in">a</span>(b * <span class="hljs-number">2</span>) {
        <span class="hljs-comment">// å®é™…æ‰§è¡Œï¼šaå…ˆåˆå§‹åŒ–ï¼ˆä½¿ç”¨æœªåˆå§‹åŒ–çš„bï¼ï¼‰</span>
        <span class="hljs-comment">// bååˆå§‹åŒ–ä¸ºval</span>
        <span class="hljs-comment">// ç»“æœæ˜¯æœªå®šä¹‰è¡Œä¸ºï¼</span>
    }
    
    <span class="hljs-comment">// âœ… æ­£ç¡®çš„åˆå§‹åŒ–é¡ºåº</span>
    <span class="hljs-built_in">Dangerous</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">a</span>(val * <span class="hljs-number">2</span>), <span class="hljs-built_in">b</span>(val) {
        <span class="hljs-comment">// æ‰§è¡Œé¡ºåºï¼ša â†’ bï¼Œéƒ½ä½¿ç”¨valåˆå§‹åŒ–</span>
    }
};
</code></pre>
<h2 data-id="heading-16">å…­ã€æœ€ä½³å®è·µæŒ‡å—</h2>
<h3 data-id="heading-17">6.1 æ€»æ˜¯ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// âœ… æ¨èï¼šåˆå§‹åŒ–æ‰€æœ‰æˆå‘˜</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BestPractice</span> {
    <span class="hljs-type">const</span> <span class="hljs-type">int</span> id;
    std::string name;
    <span class="hljs-type">int</span> age;
    std::vector&lt;<span class="hljs-type">double</span>&gt; scores;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">BestPractice</span>(<span class="hljs-type">int</span> i, <span class="hljs-type">const</span> std::string&amp; n, <span class="hljs-type">int</span> a, <span class="hljs-type">const</span> std::vector&lt;<span class="hljs-type">double</span>&gt;&amp; s)
        : <span class="hljs-built_in">id</span>(i)        <span class="hljs-comment">// constæˆå‘˜</span>
        , <span class="hljs-built_in">name</span>(n)      <span class="hljs-comment">// ç±»ç±»å‹</span>
        , <span class="hljs-built_in">age</span>(a)       <span class="hljs-comment">// åŸºæœ¬ç±»å‹</span>
        , <span class="hljs-built_in">scores</span>(s) {  <span class="hljs-comment">// å®¹å™¨ç±»</span>
        <span class="hljs-comment">// æ‰€æœ‰æˆå‘˜éƒ½å·²æ­£ç¡®åˆå§‹åŒ–</span>
    }
};
</code></pre>
<h3 data-id="heading-18">6.2 ä¿æŒå£°æ˜é¡ºåºä¸åˆå§‹åŒ–é¡ºåºä¸€è‡´</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WellStructured</span> {
    <span class="hljs-comment">// 1. æŒ‰é€»è¾‘åˆ†ç»„å£°æ˜æˆå‘˜</span>
    <span class="hljs-type">const</span> <span class="hljs-type">int</span> id;          <span class="hljs-comment">// å¸¸é‡åœ¨å‰</span>
    std::string name;      <span class="hljs-comment">// ç„¶åæ˜¯ä¸»è¦æ•°æ®æˆå‘˜</span>
    
    <span class="hljs-comment">// 2. ç›¸å…³æˆå‘˜æ”¾åœ¨ä¸€èµ·</span>
    <span class="hljs-type">int</span> age;
    <span class="hljs-type">double</span> salary;
    
    <span class="hljs-comment">// 3. è¾…åŠ©æˆå‘˜åœ¨å</span>
    <span class="hljs-keyword">mutable</span> <span class="hljs-type">int</span> accessCount;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">WellStructured</span>(<span class="hljs-type">int</span> i, <span class="hljs-type">const</span> std::string&amp; n, <span class="hljs-type">int</span> a, <span class="hljs-type">double</span> s)
        : <span class="hljs-built_in">id</span>(i)           <span class="hljs-comment">// ä¸å£°æ˜é¡ºåºä¸€è‡´</span>
        , <span class="hljs-built_in">name</span>(n)
        , <span class="hljs-built_in">age</span>(a)
        , <span class="hljs-built_in">salary</span>(s)
        , <span class="hljs-built_in">accessCount</span>(<span class="hljs-number">0</span>) {  <span class="hljs-comment">// è¾…åŠ©æˆå‘˜æœ€å</span>
    }
};
</code></pre>
<h3 data-id="heading-19">6.3 åŸºæœ¬ç±»å‹ä¹Ÿè¦åˆå§‹åŒ–</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CompleteInitialization</span> {
    <span class="hljs-type">int</span> width;     <span class="hljs-comment">// åŸºæœ¬ç±»å‹</span>
    <span class="hljs-type">int</span> height;    <span class="hljs-comment">// åŸºæœ¬ç±»å‹</span>
    std::string title;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// âœ… å³ä½¿åŸºæœ¬ç±»å‹ä¹Ÿæ˜ç¡®åˆå§‹åŒ–</span>
    <span class="hljs-built_in">CompleteInitialization</span>(<span class="hljs-type">int</span> w, <span class="hljs-type">int</span> h, <span class="hljs-type">const</span> std::string&amp; t)
        : <span class="hljs-built_in">width</span>(w), <span class="hljs-built_in">height</span>(h), <span class="hljs-built_in">title</span>(t) { }
    
    <span class="hljs-comment">// âŒ é¿å…æœªåˆå§‹åŒ–</span>
    <span class="hljs-built_in">CompleteInitialization</span>(<span class="hljs-type">const</span> std::string&amp; t) : <span class="hljs-built_in">title</span>(t) {
        <span class="hljs-comment">// widthå’Œheightæ˜¯éšæœºå€¼ï¼</span>
    }
};
</code></pre>
<h2 data-id="heading-20">ä¸ƒã€å¸¸è§é—®é¢˜è§£ç­”</h2>
<h3 data-id="heading-21">Q1ï¼šä¸ºä»€ä¹ˆæˆ‘çš„ä»£ç æ²¡æœ‰ç¼–è¯‘é”™è¯¯ï¼Ÿ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> {
    std::string name;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Example</span>(<span class="hljs-type">const</span> std::string&amp; n) {
        name = n;  <span class="hljs-comment">// ä¸ä¼šç¼–è¯‘é”™è¯¯ï¼</span>
    }
};
</code></pre>
<p><strong>A</strong>ï¼šå¯¹äºæœ‰é»˜è®¤æ„é€ å‡½æ•°çš„ç±»ï¼ˆå¦‚<code>std::string</code>ï¼‰ï¼Œæ„é€ å‡½æ•°å†…èµ‹å€¼æ˜¯åˆæ³•çš„ï¼Œä½†<strong>æ€§èƒ½è¾ƒä½</strong>ã€‚</p>
<h3 data-id="heading-22">Q2ï¼šä»€ä¹ˆæ—¶å€™ä¼šçœŸæ­£ç¼–è¯‘é”™è¯¯ï¼Ÿ</h3>
<p><strong>A</strong>ï¼šå½“ç±»æˆå‘˜<strong>æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°</strong>ä¸”<strong>ä¸åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­</strong>æ—¶ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NoDefault</span> { <span class="hljs-built_in">NoDefault</span>(<span class="hljs-type">int</span>); };
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> { NoDefault obj; };
<span class="hljs-built_in">Example</span>() { }  <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼</span>
</code></pre>
<h3 data-id="heading-23">Q3ï¼šå§”æ‰˜æ„é€ å‡½æ•°å¦‚ä½•ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼Ÿ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    std::string name;
    <span class="hljs-type">int</span> age;
    std::string address;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å§”æ‰˜æ„é€ å‡½æ•°</span>
    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> std::string&amp; n, <span class="hljs-type">int</span> a)
        : <span class="hljs-built_in">Person</span>(n, a, <span class="hljs-string">"Unknown"</span>) { }  <span class="hljs-comment">// å§”æ‰˜ç»™ä¸‰å‚æ•°ç‰ˆæœ¬</span>
    
    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> std::string&amp; n, <span class="hljs-type">int</span> a, <span class="hljs-type">const</span> std::string&amp; addr)
        : <span class="hljs-built_in">name</span>(n), <span class="hljs-built_in">age</span>(a), <span class="hljs-built_in">address</span>(addr) { }
};
</code></pre>
<h2 data-id="heading-24">å…«ã€æ ¸å¿ƒåŸåˆ™</h2>
<ol>
<li><strong>åˆå§‹åŒ– â‰  èµ‹å€¼</strong>ï¼šåˆå§‹åŒ–åˆ—è¡¨æ˜¯çœŸæ­£çš„åˆå§‹åŒ–ï¼Œæ„é€ å‡½æ•°ä½“å†…çš„æ˜¯èµ‹å€¼</li>
<li><strong>æ‰€æœ‰æˆå‘˜éƒ½ä¼šåˆå§‹åŒ–</strong>ï¼šæ— è®ºæ˜¯å¦åœ¨åˆ—è¡¨ä¸­ï¼Œéƒ½ä¼šåœ¨è¿›å…¥æ„é€ å‡½æ•°ä½“å‰åˆå§‹åŒ–</li>
<li><strong>é¡ºåºå¾ˆé‡è¦</strong>ï¼šåˆå§‹åŒ–é¡ºåºåªå–å†³äºå£°æ˜é¡ºåº</li>
<li><strong>ä¸€è‡´æ€§æ˜¯å…³é”®</strong>ï¼šæ€»æ˜¯ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–æ‰€æœ‰æˆå‘˜</li>
<li><strong>æ€§èƒ½å¾ˆé‡è¦</strong>ï¼šå¯¹äºç±»ç±»å‹ï¼Œç›´æ¥åˆå§‹åŒ–æ¯”é»˜è®¤æ„é€ +èµ‹å€¼æ›´é«˜æ•ˆ</li>
</ol>
<h2 data-id="heading-25">ä¹ã€æœ€åçš„å»ºè®®</h2>
<p>å…»æˆä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨çš„ä¹ æƒ¯ï¼Œå³ä½¿å¯¹äºåŸºæœ¬ç±»å‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™ä¸ä»…æ˜¯è‰¯å¥½çš„ç¼–ç¨‹é£æ ¼ï¼Œè¿˜èƒ½ï¼š</p>
<ul>
<li>é¿å…æœªåˆå§‹åŒ–å˜é‡</li>
<li>æé«˜ä»£ç æ€§èƒ½</li>
<li>ç¡®ä¿constå’Œå¼•ç”¨æˆå‘˜æ­£ç¡®åˆå§‹åŒ–</li>
<li>ä½¿ä»£ç æ›´æ˜“ç»´æŠ¤å’Œç†è§£</li>
</ul>
<p>è®°ä½ï¼š<strong>åœ¨C++ä¸­ï¼Œåˆå§‹åŒ–æ€»æ˜¯ä¼˜äºèµ‹å€¼</strong>ã€‚æŒæ¡åˆå§‹åŒ–åˆ—è¡¨çš„ä½¿ç”¨ï¼Œæ˜¯æˆä¸ºé«˜æ•ˆC++ç¨‹åºå‘˜çš„é‡è¦ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>