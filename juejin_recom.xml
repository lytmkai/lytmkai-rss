<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Python3åŸºç¡€ï¼šåŸºç¡€å®æˆ˜å·©å›ºï¼Œä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€]]></title>    <link>https://juejin.cn/post/7604093823958614035</link>    <guid>https://juejin.cn/post/7604093823958614035</guid>    <pubDate>2026-02-09T04:34:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823958614035" data-draft-id="7604175912480800774" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python3åŸºç¡€ï¼šåŸºç¡€å®æˆ˜å·©å›ºï¼Œä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2026-02-09T04:34:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€’æ”¾å§å¾·å¾·"/> <meta itemprop="url" content="https://juejin.cn/user/2502950820787672"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python3åŸºç¡€ï¼šåŸºç¡€å®æˆ˜å·©å›ºï¼Œä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2502950820787672/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€’æ”¾å§å¾·å¾·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T04:34:30.000Z" title="Mon Feb 09 2026 04:34:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬ä¸ƒé˜¶æ®µï¼šåŸºç¡€å®æˆ˜å·©å›ºï¼Œä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€</h2>
<blockquote>
<p>ğŸ˜„ç”Ÿå‘½ä¸æ¯ï¼Œå†™ä½œä¸æ­¢</p>
<p>ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°</p>
<p>ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·</p>
<p>ğŸ† <a href="https://juejin.cn/user/2502950820787672" target="_blank" title="https://juejin.cn/user/2502950820787672">åšå®¢é¦–é¡µ</a> Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Flyd-code%2F" target="_blank" title="https://www.cnblogs.com/lyd-code/" ref="nofollow noopener noreferrer">@æ€’æ”¾å§å¾·å¾·</a>Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Flydandtry.github.io%2F" target="_blank" title="https://lydandtry.github.io/" ref="nofollow noopener noreferrer">Toè®°å½•é¢†åœ°</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_43843951%3Ftype%3Dblog" target="_blank" title="https://blog.csdn.net/qq_43843951?type=blog" ref="nofollow noopener noreferrer">@ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</a></p>
<p>ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼</p>
<p>ğŸ”¥è±†åŒ…AI</p>
</blockquote>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾·(æ˜é‡‘) @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº(CSDN)</strong></p>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>æ­å–œå¤§å®¶æˆåŠŸé€šå…³Python3åŸºç¡€å­¦ä¹ ç¬¬å…­é˜¶æ®µã€Œè¿›é˜¶åŸºç¡€ã€ï¼åœ¨ç¬¬å…­é˜¶æ®µï¼Œæˆ‘ä»¬æŒæ¡äº†æ¨¡å—ä¸åŒ…ã€æ–‡ä»¶æ“ä½œã€å¼‚å¸¸å¤„ç†ã€é¢å‘å¯¹è±¡åŸºç¡€å››å¤§æ ¸å¿ƒæŠ€èƒ½ï¼Œç»ˆäºè·³å‡ºäº†â€œå•çº¯è®°è¯­æ³•â€çš„èŒƒç•´ï¼Œå…·å¤‡äº†ç¼–å†™æ¨¡å—åŒ–ã€å¥å£®æ€§ä»£ç çš„èƒ½åŠ›ã€‚</p>
<p>è€Œç¬¬ä¸ƒé˜¶æ®µã€ŒåŸºç¡€å®æˆ˜å·©å›ºã€ï¼Œæ˜¯PythonåŸºç¡€å­¦ä¹ ä¸­â€œæ‰¿ä¸Šå¯ä¸‹â€çš„å…³é”®ä¸€ç¯â€”â€”æ ¸å¿ƒç›®æ ‡ä¸æ˜¯å­¦ä¹ æ–°çš„å¤æ‚è¯­æ³•ï¼Œè€Œæ˜¯<strong>å°†å‰å…­é˜¶æ®µçš„æ‰€æœ‰çŸ¥è¯†ç‚¹ä¸²è”èµ·æ¥ï¼Œé€šè¿‡å®æˆ˜åœºæ™¯è½åœ°åº”ç”¨</strong>ï¼Œå¸®å¤§å®¶æ‘†è„±â€œçœ‹å¾—æ‡‚ã€å†™ä¸å‡ºâ€çš„å›°å¢ƒï¼Œå·©å›ºåŸºç¡€ã€æŸ¥æ¼è¡¥ç¼ºï¼ŒåŒæ—¶æŒæ¡å¸¸ç”¨å·¥å…·ï¼ˆå†…ç½®å‡½æ•°ã€æ ‡å‡†åº“ï¼‰å’ŒåŸºç¡€å¹¶å‘/ç½‘ç»œèƒ½åŠ›ï¼Œä¸ºåç»­å­¦ä¹ å¤æ‚é¡¹ç›®ã€æ¡†æ¶æ‰“ä¸‹åšå®çš„å®æˆ˜åŸºç¡€ã€‚</p>
<p>æœ¬é˜¶æ®µæˆ‘ä»¬å°†èšç„¦å››å¤§å®æˆ˜æ–¹å‘ï¼Œå…¨ç¨‹å›´ç»•â€œå®æˆ˜åœºæ™¯+å¯è¿è¡Œä»£ç +é¿å‘å®æˆ˜â€å±•å¼€ï¼Œæ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½ç»“åˆå‰é˜¶æ®µå†…å®¹è®¾è®¡å®æˆ˜æ¡ˆä¾‹ï¼Œè·Ÿç€æ•²ä»£ç ã€ç»ƒæ¡ˆä¾‹ï¼Œæ—¢èƒ½å·©å›ºæ—§çŸ¥è¯†ï¼Œåˆèƒ½æŒæ¡æ–°å·¥å…·ï¼ŒçœŸæ­£å®ç°ä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€çš„è·¨è¶Šï¼Œç¨³æ­¥å‘â€œèƒ½ç‹¬ç«‹ç¼–å†™ç®€å•é¡¹ç›®çš„Pythonåˆå­¦è€…â€è¿ˆè¿›ï½</p>
<h3 data-id="heading-2">1 å¸¸ç”¨å†…ç½®å‡½æ•°ï¼šPythonè‡ªå¸¦çš„â€œå®ç”¨å·¥å…·â€ï¼Œæå‡ç¼–ç æ•ˆç‡</h3>
<p>åœ¨å‰é¢çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å…¶å®å·²ç»é›¶æ•£ç”¨åˆ°è¿‡ä¸€äº›å†…ç½®å‡½æ•°ï¼ˆæ¯”å¦‚print()ã€input()ï¼‰ï¼Œä½†Pythonè‡ªå¸¦äº†å¤§é‡æ— éœ€å¯¼å…¥ã€ç›´æ¥å¯ç”¨çš„å†…ç½®å‡½æ•°ï¼Œå®ƒä»¬å°±åƒâ€œç°æˆçš„å·¥å…·â€ï¼Œèƒ½å¸®æˆ‘ä»¬å¿«é€Ÿè§£å†³å¸¸è§é—®é¢˜ï¼ˆæ¯”å¦‚è®¡ç®—é•¿åº¦ã€ç”Ÿæˆåºåˆ—ã€ç­›é€‰æ•°æ®ï¼‰ï¼Œé¿å…é‡å¤ç¼–å†™ä»£ç ã€‚</p>
<p>æœ¬é˜¶æ®µé‡ç‚¹æŒæ¡8ä¸ªé«˜é¢‘å®ç”¨çš„å†…ç½®å‡½æ•°ï¼Œè¦†ç›–æ—¥å¸¸ç¼–ç 80%çš„åœºæ™¯ï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹è®²è§£ï¼Œé‡ç‚¹ç†è§£â€œä»€ä¹ˆæ—¶å€™ç”¨ã€æ€ä¹ˆç”¨â€ï¼Œè€Œéæ­»è®°ç¡¬èƒŒã€‚</p>
<h4 data-id="heading-3">1.1 æ ¸å¿ƒå†…ç½®å‡½æ•°</h4>
<p>æ¯ä¸ªå‡½æ•°å‡æ­é…â€œè¯­æ³•è§£æ+å®æˆ˜ä»£ç +åœºæ™¯è¯´æ˜â€ï¼Œä»£ç å¯ç›´æ¥å¤åˆ¶è¿è¡Œï¼Œè´´åˆæ–°æ‰‹å®æˆ˜éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. len()ï¼šè®¡ç®—å¯è¿­ä»£å¯¹è±¡çš„é•¿åº¦ï¼ˆå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å­—å…¸ã€å…ƒç»„ç­‰ï¼‰</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šç»Ÿè®¡ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦æ•°ã€åˆ—è¡¨ä¸­å…ƒç´ ä¸ªæ•°</span>
str1 = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥ä¸€æ®µæ–‡å­—ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å…¥æ–‡å­—çš„é•¿åº¦ï¼ˆå«ç©ºæ ¼ï¼‰ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(str1)}</span>"</span>)

list1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-string">"Python"</span>, [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]]
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ—è¡¨çš„å…ƒç´ ä¸ªæ•°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(list1)}</span>"</span>)  <span class="hljs-comment"># è¾“å‡º5ï¼ˆåµŒå¥—åˆ—è¡¨ç®—1ä¸ªå…ƒç´ ï¼‰</span>

dict1 = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>, <span class="hljs-string">"gender"</span>: <span class="hljs-string">"ç”·"</span>}
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­—å…¸çš„é”®å€¼å¯¹ä¸ªæ•°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(dict1)}</span>"</span>)  <span class="hljs-comment"># è¾“å‡º3</span>

<span class="hljs-comment"># 2. range()ï¼šç”ŸæˆæŒ‡å®šèŒƒå›´çš„æ•´æ•°åºåˆ—ï¼ˆå·¦é—­å³å¼€ï¼‰</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šé…åˆforå¾ªç¯å®ç°å›ºå®šæ¬¡æ•°çš„è¿­ä»£ï¼ˆæ›¿ä»£æ‰‹åŠ¨å†™åˆ—è¡¨ï¼‰</span>
<span class="hljs-comment"># è¯­æ³•ï¼šrange(å¼€å§‹å€¼, ç»“æŸå€¼, æ­¥é•¿)ï¼Œå¼€å§‹å€¼é»˜è®¤0ï¼Œæ­¥é•¿é»˜è®¤1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆ0-9çš„æ•´æ•°ï¼š"</span>, <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)))  <span class="hljs-comment"># è¾“å‡º[0,1,2,...,9]</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆ1-10çš„æ•´æ•°ï¼š"</span>, <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>)))  <span class="hljs-comment"># è¾“å‡º[1,2,...,10]</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆ1-10çš„å¥‡æ•°ï¼š"</span>, <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>, <span class="hljs-number">2</span>)))  <span class="hljs-comment"># æ­¥é•¿2ï¼Œè¾“å‡º[1,3,...,9]</span>

<span class="hljs-comment"># å®æˆ˜ï¼šç”¨range()å¾ªç¯æ‰“å°1-5çš„å¹³æ–¹ï¼ˆç»“åˆå‰é˜¶æ®µçš„å¾ªç¯ã€å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>çš„å¹³æ–¹ï¼š<span class="hljs-subst">{i**<span class="hljs-number">2</span>}</span>"</span>)

<span class="hljs-comment"># 3. enumerate()ï¼šéå†å¯è¿­ä»£å¯¹è±¡æ—¶ï¼ŒåŒæ—¶è·å–ç´¢å¼•å’Œå¯¹åº”çš„å€¼</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šéå†åˆ—è¡¨/å…ƒç»„æ—¶ï¼Œéœ€è¦çŸ¥é“å…ƒç´ çš„ä½ç½®ï¼ˆé¿å…æ‰‹åŠ¨å®šä¹‰ç´¢å¼•å˜é‡ï¼‰</span>
<span class="hljs-comment"># è¯­æ³•ï¼šenumerate(å¯è¿­ä»£å¯¹è±¡, start=èµ·å§‹ç´¢å¼•)ï¼Œstarté»˜è®¤0</span>
fruits = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‘¡è„"</span>]
<span class="hljs-comment"># é»˜è®¤start=0ï¼Œç´¢å¼•ä»0å¼€å§‹</span>
<span class="hljs-keyword">for</span> index, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç´¢å¼•<span class="hljs-subst">{index}</span>ï¼š<span class="hljs-subst">{value}</span>"</span>)
<span class="hljs-comment"># start=1ï¼Œç´¢å¼•ä»1å¼€å§‹ï¼ˆé€‚åˆè®¡æ•°åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">for</span> index, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits, start=<span class="hljs-number">1</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬<span class="hljs-subst">{index}</span>ä¸ªæ°´æœï¼š<span class="hljs-subst">{value}</span>"</span>)

<span class="hljs-comment"># 4. zip()ï¼šå°†å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆåˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰â€œé…å¯¹â€ï¼Œåˆå¹¶æˆä¸€ä¸ªè¿­ä»£å™¨</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šæ‰¹é‡å¤„ç†å¤šç»„å…³è”æ•°æ®ï¼ˆæ¯”å¦‚å§“åå’Œå¹´é¾„ã€å­¦å·å’Œæˆç»©ï¼‰</span>
names = [<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"ç‹äº”"</span>]
ages = [<span class="hljs-number">18</span>, <span class="hljs-number">19</span>, <span class="hljs-number">20</span>]
scores = [<span class="hljs-number">90</span>, <span class="hljs-number">85</span>, <span class="hljs-number">95</span>]

<span class="hljs-comment"># é…å¯¹å¤šä¸ªåˆ—è¡¨ï¼Œéå†è·å–å…³è”æ•°æ®</span>
<span class="hljs-keyword">for</span> name, age, score <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(names, ages, scores):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å§“åï¼š<span class="hljs-subst">{name}</span>ï¼Œå¹´é¾„ï¼š<span class="hljs-subst">{age}</span>ï¼Œæˆç»©ï¼š<span class="hljs-subst">{score}</span>"</span>)

<span class="hljs-comment"># è¡¥å……ï¼šzip()è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œå¯è½¬æ¢ä¸ºåˆ—è¡¨æŸ¥çœ‹</span>
zip_result = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(names, ages))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"zipé…å¯¹ç»“æœï¼š"</span>, zip_result)  <span class="hljs-comment"># è¾“å‡º[('å¼ ä¸‰',18), ('æå››',19), ('ç‹äº”',20)]</span>

<span class="hljs-comment"># 5. sorted()ï¼šå¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œæ’åºï¼Œè¿”å›æ’åºåçš„æ–°åˆ—è¡¨ï¼ˆä¸æ”¹å˜åŸå¯¹è±¡ï¼‰</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šå¯¹åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸çš„å€¼è¿›è¡Œæ’åº</span>
nums = [<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>]
sorted_nums = <span class="hljs-built_in">sorted</span>(nums)  <span class="hljs-comment"># é»˜è®¤å‡åº</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‡åºæ’åºï¼š"</span>, sorted_nums)  <span class="hljs-comment"># è¾“å‡º[1,2,3,4,5]</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"åŸåˆ—è¡¨ï¼ˆæœªæ”¹å˜ï¼‰ï¼š"</span>, nums)  <span class="hljs-comment"># è¾“å‡º[3,1,4,2,5]</span>

<span class="hljs-comment"># é™åºæ’åºï¼ŒæŒ‡å®šreverse=True</span>
sorted_nums_desc = <span class="hljs-built_in">sorted</span>(nums, reverse=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"é™åºæ’åºï¼š"</span>, sorted_nums_desc)

<span class="hljs-comment"># å®æˆ˜ï¼šå¯¹å­—å…¸æŒ‰å€¼æ’åºï¼ˆç»“åˆå‰é˜¶æ®µçš„å­—å…¸çŸ¥è¯†ï¼‰</span>
score_dict = {<span class="hljs-string">"å¼ ä¸‰"</span>: <span class="hljs-number">90</span>, <span class="hljs-string">"æå››"</span>: <span class="hljs-number">85</span>, <span class="hljs-string">"ç‹äº”"</span>: <span class="hljs-number">95</span>}
<span class="hljs-comment"># æŒ‰æˆç»©å‡åºæ’åºï¼Œè¿”å›åŒ…å«å…ƒç»„çš„åˆ—è¡¨</span>
sorted_score = <span class="hljs-built_in">sorted</span>(score_dict.items(), key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æŒ‰æˆç»©å‡åºæ’åºï¼š"</span>, sorted_score)

<span class="hljs-comment"># 6. map()ï¼šå¯¹å¯è¿­ä»£å¯¹è±¡çš„æ¯ä¸ªå…ƒç´ ï¼Œåº”ç”¨æŒ‡å®šå‡½æ•°ï¼Œè¿”å›è¿­ä»£å™¨</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šæ‰¹é‡å¤„ç†æ•°æ®ï¼ˆæ¯”å¦‚æ‰€æœ‰å…ƒç´ å¹³æ–¹ã€è½¬æ¢æ•°æ®ç±»å‹ï¼‰</span>
<span class="hljs-comment"># ç¤ºä¾‹1ï¼šå°†åˆ—è¡¨ä¸­æ‰€æœ‰æ•´æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
nums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
str_nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, nums))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•´æ•°è½¬å­—ç¬¦ä¸²ï¼š"</span>, str_nums)  <span class="hljs-comment"># è¾“å‡º['1','2','3','4','5']</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šè®¡ç®—åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„å¹³æ–¹ï¼ˆç»“åˆlambdaåŒ¿åå‡½æ•°ï¼‰</span>
square_nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x**<span class="hljs-number">2</span>, nums))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰å…ƒç´ å¹³æ–¹ï¼š"</span>, square_nums)  <span class="hljs-comment"># è¾“å‡º[1,4,9,16,25]</span>

<span class="hljs-comment"># 7. filter()ï¼šå¯¹å¯è¿­ä»£å¯¹è±¡çš„å…ƒç´ è¿›è¡Œç­›é€‰ï¼Œä¿ç•™ç¬¦åˆæ¡ä»¶çš„å…ƒç´ </span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šç­›é€‰ç¬¦åˆè¦æ±‚çš„æ•°æ®ï¼ˆæ¯”å¦‚ç­›é€‰å¶æ•°ã€ç­›é€‰å¤§äºæŸä¸ªå€¼çš„å…ƒç´ ï¼‰</span>
<span class="hljs-comment"># ç¤ºä¾‹1ï¼šç­›é€‰åˆ—è¡¨ä¸­çš„å¶æ•°</span>
nums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
even_nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>, nums))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç­›é€‰å¶æ•°ï¼š"</span>, even_nums)  <span class="hljs-comment"># è¾“å‡º[2,4,6]</span>

<span class="hljs-comment"># ç¤ºä¾‹2ï¼šç­›é€‰åˆ—è¡¨ä¸­å¤§äº3çš„å…ƒç´ </span>
greater_3 = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x &gt; <span class="hljs-number">3</span>, nums))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç­›é€‰å¤§äº3çš„å…ƒç´ ï¼š"</span>, greater_3)  <span class="hljs-comment"># è¾“å‡º[4,5,6]</span>

<span class="hljs-comment"># 8. abs()ï¼šè¿”å›æ•°å­—çš„ç»å¯¹å€¼</span>
<span class="hljs-comment"># å®æˆ˜åœºæ™¯ï¼šå¤„ç†è´Ÿæ•°ï¼ˆæ¯”å¦‚è®¡ç®—è·ç¦»ã€è¯¯å·®ï¼Œç»å¯¹å€¼é¿å…è´Ÿå·å½±å“ï¼‰</span>
num1 = -<span class="hljs-number">5</span>
num2 = <span class="hljs-number">3.14</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"-5çš„ç»å¯¹å€¼ï¼š<span class="hljs-subst">{<span class="hljs-built_in">abs</span>(num1)}</span>"</span>)  <span class="hljs-comment"># è¾“å‡º5</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"3.14çš„ç»å¯¹å€¼ï¼š<span class="hljs-subst">{<span class="hljs-built_in">abs</span>(num2)}</span>"</span>)  <span class="hljs-comment"># è¾“å‡º3.14</span>
</code></pre>
<h4 data-id="heading-4">1.2 æ–°æ‰‹é¿å‘æŒ‡å—</h4>
<ul>
<li>é¿å‘1ï¼šlen()è®¡ç®—åµŒå¥—åˆ—è¡¨æ—¶ï¼ŒåµŒå¥—çš„å­åˆ—è¡¨ç®—â€œ1ä¸ªå…ƒç´ â€ï¼Œä¸ä¼šé€’å½’è®¡ç®—å­åˆ—è¡¨å†…éƒ¨çš„é•¿åº¦ï¼›</li>
<li>é¿å‘2ï¼šrange()æ˜¯â€œå·¦é—­å³å¼€â€åŒºé—´ï¼Œæ¯”å¦‚range(1, 10)ç”Ÿæˆ1-9çš„æ•´æ•°ï¼Œä¸ä¼šåŒ…å«10ï¼›æ­¥é•¿ä¸ºè´Ÿæ•°æ—¶ï¼Œå¼€å§‹å€¼è¦å¤§äºç»“æŸå€¼ï¼ˆæ¯”å¦‚range(10, 0, -1)ç”Ÿæˆ10-1ï¼‰ï¼›</li>
<li>é¿å‘3ï¼šenumerate()çš„startå‚æ•°åªæ˜¯â€œä¿®æ”¹ç´¢å¼•çš„æ˜¾ç¤ºå€¼â€ï¼Œä¸ä¼šæ”¹å˜å…ƒç´ æœ¬èº«çš„ä½ç½®ï¼›</li>
<li>é¿å‘4ï¼šzip()ä¼šä»¥â€œæœ€çŸ­çš„å¯è¿­ä»£å¯¹è±¡â€ä¸ºå‡†é…å¯¹ï¼Œå¤šä½™çš„å…ƒç´ ä¼šè¢«èˆå¼ƒï¼ˆæ¯”å¦‚3ä¸ªå§“åã€2ä¸ªå¹´é¾„ï¼Œä¼šåªé…å¯¹å‰2ç»„ï¼‰ï¼›ä¸”zip()è¿”å›çš„è¿­ä»£å™¨åªèƒ½éå†ä¸€æ¬¡ï¼Œå†æ¬¡éå†ä¼šä¸ºç©ºï¼›</li>
<li>é¿å‘5ï¼šsorted()ä¼šè¿”å›æ–°åˆ—è¡¨ï¼Œä¸ä¼šä¿®æ”¹åŸå¯¹è±¡ï¼›è€Œåˆ—è¡¨è‡ªå¸¦çš„sort()æ–¹æ³•ä¼šä¿®æ”¹åŸåˆ—è¡¨ï¼Œæ— è¿”å›å€¼ï¼ˆæ–°æ‰‹æ˜“æ··æ·†ä¸¤è€…ï¼‰ï¼›</li>
<li>é¿å‘6ï¼šmap()å’Œfilter()è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œéœ€è½¬æ¢ä¸ºåˆ—è¡¨ï¼ˆlist()ï¼‰æ‰èƒ½ç›´è§‚æŸ¥çœ‹ç»“æœã€‚</li>
</ul>
<h3 data-id="heading-5">2 ç®€å•æ ‡å‡†åº“ä½¿ç”¨ï¼šæ´»ç”¨Pythonè‡ªå¸¦â€œå·¥å…·åŒ…â€ï¼Œé«˜æ•ˆç¼–ç </h3>
<p>åœ¨ç¬¬å…­é˜¶æ®µï¼Œæˆ‘ä»¬å­¦ä¹ äº†æ¨¡å—ä¸åŒ…çš„åŸºç¡€ç”¨æ³•ï¼Œè€ŒPythonè‡ªå¸¦çš„â€œæ ‡å‡†åº“â€ï¼Œå°±æ˜¯ä¸€ç»„å®˜æ–¹ç¼–å†™çš„ã€æ— éœ€é¢å¤–å®‰è£…çš„å®ç”¨æ¨¡å—é›†åˆã€‚å®ƒä»¬è¦†ç›–äº†æ•°å­¦è®¡ç®—ã€éšæœºæ•°ç”Ÿæˆã€æ—¶é—´å¤„ç†ç­‰å¸¸è§åœºæ™¯ï¼Œç†Ÿç»ƒä½¿ç”¨è¿™äº›æ ‡å‡†åº“ï¼Œèƒ½å¤§å¹…æå‡ç¼–ç æ•ˆç‡ï¼Œé¿å…é‡å¤é€ è½®å­ã€‚</p>
<p>æœ¬é˜¶æ®µé‡ç‚¹æŒæ¡3ä¸ªæœ€å¸¸ç”¨çš„æ ‡å‡†åº“ï¼ˆmathã€randomã€timeï¼‰ï¼Œç»“åˆå®æˆ˜åœºæ™¯è®²è§£æ ¸å¿ƒç”¨æ³•ï¼Œä¸æ·±å…¥å¤æ‚åŠŸèƒ½ï¼Œèšç„¦â€œæ–°æ‰‹èƒ½å¿«é€Ÿä¸Šæ‰‹ã€æ—¥å¸¸èƒ½ç”¨å¾—ä¸Šâ€çš„çŸ¥è¯†ç‚¹ã€‚</p>
<h4 data-id="heading-6">2.1 mathåº“ï¼šæ•°å­¦è®¡ç®—å·¥å…·ï¼Œè§£å†³åŸºç¡€æ•°å­¦é—®é¢˜</h4>
<p>mathåº“æä¾›äº†å¤§é‡åŸºç¡€æ•°å­¦è¿ç®—å‡½æ•°ï¼ˆå¦‚åœ†å‘¨ç‡ã€ä¸‰è§’å‡½æ•°ã€å–æ•´ã€å¼€å¹³æ–¹ç­‰ï¼‰ï¼Œé€‚åˆè§£å†³æ—¥å¸¸ç¼–ç¨‹ä¸­çš„æ•°å­¦è®¡ç®—åœºæ™¯ï¼Œæ ¸å¿ƒç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> math  <span class="hljs-comment"># å¯¼å…¥mathåº“ï¼ˆæ— éœ€å®‰è£…ï¼Œç›´æ¥å¯¼å…¥ï¼‰</span>

<span class="hljs-comment"># 1. å¸¸ç”¨å¸¸é‡ï¼ˆå®æˆ˜å¸¸ç”¨ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"åœ†å‘¨ç‡Ï€ï¼š"</span>, math.pi)  <span class="hljs-comment"># è¾“å‡º3.141592653589793</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è‡ªç„¶å¸¸æ•°eï¼š"</span>, math.e)  <span class="hljs-comment"># è¾“å‡º2.718281828459045</span>

<span class="hljs-comment"># 2. åŸºç¡€è¿ç®—ï¼ˆå®æˆ˜é‡ç‚¹ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"16çš„å¹³æ–¹æ ¹ï¼š"</span>, math.sqrt(<span class="hljs-number">16</span>))  <span class="hljs-comment"># è¾“å‡º4.0ï¼ˆå¼€å¹³æ–¹ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"2çš„3æ¬¡æ–¹ï¼š"</span>, math.<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>))  <span class="hljs-comment"># è¾“å‡º8.0ï¼ˆå¹‚è¿ç®—ï¼Œç­‰åŒäº2**3ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»å¯¹å€¼ï¼š"</span>, math.fabs(-<span class="hljs-number">5.2</span>))  <span class="hljs-comment"># è¾“å‡º5.2ï¼ˆç»å¯¹å€¼ï¼Œæ¯”abs()æ›´é€‚åˆæµ®ç‚¹æ•°ï¼‰</span>

<span class="hljs-comment"># 3. å–æ•´å‡½æ•°ï¼ˆæ–°æ‰‹æ˜“æ··æ·†ï¼Œé‡ç‚¹åŒºåˆ†ï¼‰</span>
num = <span class="hljs-number">3.7</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘ä¸‹å–æ•´ï¼ˆ&lt;=3.7çš„æœ€å¤§æ•´æ•°ï¼‰ï¼š"</span>, math.floor(num))  <span class="hljs-comment"># è¾“å‡º3</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘ä¸Šå–æ•´ï¼ˆ&gt;=3.7çš„æœ€å°æ•´æ•°ï¼‰ï¼š"</span>, math.ceil(num))  <span class="hljs-comment"># è¾“å‡º4</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å››èˆäº”å…¥ï¼ˆä¿ç•™æ•´æ•°ï¼‰ï¼š"</span>, <span class="hljs-built_in">round</span>(num))  <span class="hljs-comment"># è¾“å‡º4ï¼ˆroundæ˜¯å†…ç½®å‡½æ•°ï¼Œémathåº“ï¼‰</span>

num2 = <span class="hljs-number">3.1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘ä¸‹å–æ•´ï¼š"</span>, math.floor(num2))  <span class="hljs-comment"># è¾“å‡º3</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å‘ä¸Šå–æ•´ï¼š"</span>, math.ceil(num2))  <span class="hljs-comment"># è¾“å‡º4</span>

<span class="hljs-comment"># 4. å®æˆ˜æ¡ˆä¾‹ï¼šè®¡ç®—åœ†çš„å‘¨é•¿å’Œé¢ç§¯ï¼ˆç»“åˆå‰é˜¶æ®µçš„å‡½æ•°çŸ¥è¯†ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calc_circle</span>(<span class="hljs-params">radius</span>):
    <span class="hljs-string">"""è®¡ç®—åœ†çš„å‘¨é•¿å’Œé¢ç§¯"""</span>
    <span class="hljs-keyword">if</span> radius&lt;= <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"åŠå¾„å¿…é¡»ä¸ºæ­£æ•°ï¼"</span>)
        <span class="hljs-keyword">return</span>
    circumference = <span class="hljs-number">2</span> * math.pi * radius  <span class="hljs-comment"># å‘¨é•¿å…¬å¼ï¼š2Ï€r</span>
    area = math.pi * math.<span class="hljs-built_in">pow</span>(radius, <span class="hljs-number">2</span>)  <span class="hljs-comment"># é¢ç§¯å…¬å¼ï¼šÏ€rÂ²</span>
    <span class="hljs-keyword">return</span> circumference, area

<span class="hljs-comment"># è°ƒç”¨å‡½æ•°ï¼Œè·å–ç»“æœ</span>
circum, area = calc_circle(<span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŠå¾„ä¸º3çš„åœ†ï¼šå‘¨é•¿=<span class="hljs-subst">{<span class="hljs-built_in">round</span>(circum, <span class="hljs-number">2</span>)}</span>ï¼Œé¢ç§¯=<span class="hljs-subst">{<span class="hljs-built_in">round</span>(area, <span class="hljs-number">2</span>)}</span>"</span>)  <span class="hljs-comment"># ä¿ç•™2ä½å°æ•°</span>
</code></pre>
<h4 data-id="heading-7">2.2 randomåº“ï¼šéšæœºæ•°å·¥å…·ï¼Œå®ç°éšæœºåœºæ™¯</h4>
<p>randomåº“ç”¨äºç”Ÿæˆéšæœºæ•°ã€éšæœºé€‰æ‹©ã€éšæœºæ‰“ä¹±ç­‰æ“ä½œï¼Œé€‚åˆæŠ½å¥–ã€éªŒè¯ç ç”Ÿæˆã€éšæœºåˆ†ç»„ç­‰å®æˆ˜åœºæ™¯ï¼Œæ ¸å¿ƒç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> random  <span class="hljs-comment"># å¯¼å…¥randomåº“</span>

<span class="hljs-comment"># 1. ç”Ÿæˆéšæœºæµ®ç‚¹æ•°ï¼ˆ0.0 &lt;= æµ®ç‚¹æ•° &lt; 1.0ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºæµ®ç‚¹æ•°ï¼ˆ0-1ï¼‰ï¼š"</span>, random.random())

<span class="hljs-comment"># 2. ç”Ÿæˆéšæœºæ•´æ•°ï¼ˆå·¦é—­å³å¼€ï¼ŒåŒ…å«startå’Œendï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºæ•´æ•°ï¼ˆ1-10ï¼‰ï¼š"</span>, random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºæ•´æ•°ï¼ˆ0-9ï¼Œæ­¥é•¿2ï¼‰ï¼š"</span>, random.randrange(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>))  <span class="hljs-comment"># åªç”Ÿæˆå¶æ•°</span>

<span class="hljs-comment"># 3. éšæœºé€‰æ‹©ï¼ˆå®æˆ˜å¸¸ç”¨ï¼‰</span>
<span class="hljs-comment"># ä»åºåˆ—ä¸­éšæœºé€‰æ‹©1ä¸ªå…ƒç´ </span>
fruits = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‘¡è„"</span>]
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºé€‰æ‹©1ä¸ªæ°´æœï¼š"</span>, random.choice(fruits))

<span class="hljs-comment"># ä»åºåˆ—ä¸­éšæœºé€‰æ‹©å¤šä¸ªä¸é‡å¤å…ƒç´ ï¼ˆæ¯”å¦‚æŠ½å¥–é€‰3äººï¼‰</span>
nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">21</span>))  <span class="hljs-comment"># 1-20çš„æ•´æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"éšæœºé€‰æ‹©3ä¸ªä¸é‡å¤æ•°å­—ï¼š"</span>, random.sample(nums, <span class="hljs-number">3</span>))

<span class="hljs-comment"># 4. éšæœºæ‰“ä¹±ï¼ˆåŸåœ°æ‰“ä¹±åˆ—è¡¨ï¼Œä¿®æ”¹åŸå¯¹è±¡ï¼‰</span>
random.shuffle(fruits)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰“ä¹±åçš„æ°´æœåˆ—è¡¨ï¼š"</span>, fruits)

<span class="hljs-comment"># 5. å®æˆ˜æ¡ˆä¾‹ï¼šç”Ÿæˆ6ä½æ•°å­—éªŒè¯ç ï¼ˆå®æˆ˜é«˜é¢‘åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_verify_code</span>():
    <span class="hljs-string">"""ç”Ÿæˆ6ä½æ•°å­—éªŒè¯ç """</span>
    code = <span class="hljs-string">""</span>
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">6</span>):
        <span class="hljs-comment"># ç”Ÿæˆ0-9çš„éšæœºæ•´æ•°ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥</span>
        code += <span class="hljs-built_in">str</span>(random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">9</span>))
    <span class="hljs-keyword">return</span> code

<span class="hljs-comment"># è°ƒç”¨å‡½æ•°ï¼Œç”ŸæˆéªŒè¯ç </span>
verify_code = generate_verify_code()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"6ä½æ•°å­—éªŒè¯ç ï¼š"</span>, verify_code)
</code></pre>
<h4 data-id="heading-8">2.3 timeåº“ï¼šæ—¶é—´å·¥å…·ï¼Œå¤„ç†æ—¶é—´ç›¸å…³åœºæ™¯</h4>
<p>timeåº“ç”¨äºè·å–å½“å‰æ—¶é—´ã€æ ¼å¼åŒ–æ—¶é—´ã€è®¾ç½®ç¨‹åºå»¶è¿Ÿç­‰æ“ä½œï¼Œé€‚åˆæ—¥å¿—è®°å½•ã€ç¨‹åºè®¡æ—¶ã€å»¶è¿Ÿæ‰§è¡Œç­‰å®æˆ˜åœºæ™¯ï¼Œæ ¸å¿ƒç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time  <span class="hljs-comment"># å¯¼å…¥timeåº“</span>

<span class="hljs-comment"># 1. è·å–å½“å‰æ—¶é—´ï¼ˆä¸‰ç§å¸¸ç”¨æ ¼å¼ï¼‰</span>
<span class="hljs-comment"># æ ¼å¼1ï¼šæ—¶é—´æˆ³ï¼ˆä»1970å¹´1æœˆ1æ—¥00:00:00åˆ°å½“å‰çš„ç§’æ•°ï¼Œæµ®ç‚¹æ•°ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰æ—¶é—´æˆ³ï¼š"</span>, time.time())

<span class="hljs-comment"># æ ¼å¼2ï¼šç»“æ„åŒ–æ—¶é—´ï¼ˆåŒ…å«å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ç­‰ä¿¡æ¯ï¼‰</span>
struct_time = time.localtime()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æ„åŒ–æ—¶é—´ï¼š"</span>, struct_time)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰å¹´ä»½ï¼š"</span>, struct_time.tm_year)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰æœˆä»½ï¼š"</span>, struct_time.tm_mon)

<span class="hljs-comment"># æ ¼å¼3ï¼šæ ¼å¼åŒ–æ—¶é—´ï¼ˆäººç±»å¯è¯»ï¼Œå¸¸ç”¨ï¼‰</span>
<span class="hljs-comment"># å¸¸ç”¨å ä½ç¬¦ï¼š%Yï¼ˆ4ä½å¹´ä»½ï¼‰ã€%mï¼ˆ2ä½æœˆä»½ï¼‰ã€%dï¼ˆ2ä½æ—¥æœŸï¼‰ã€%Hï¼ˆ24å°æ—¶åˆ¶ï¼‰ã€%Mï¼ˆåˆ†é’Ÿï¼‰ã€%Sï¼ˆç§’ï¼‰</span>
format_time1 = time.strftime(<span class="hljs-string">"%Y-%m-%d %H:%M:%S"</span>, struct_time)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰æ—¶é—´ï¼ˆå¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’ï¼‰ï¼š"</span>, format_time1)

format_time2 = time.strftime(<span class="hljs-string">"%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%Måˆ†%Sç§’"</span>, struct_time)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰æ—¶é—´ï¼ˆä¸­æ–‡æ ¼å¼ï¼‰ï¼š"</span>, format_time2)

<span class="hljs-comment"># 2. ç¨‹åºå»¶è¿Ÿæ‰§è¡Œï¼ˆsleep(ç§’æ•°)ï¼Œå®æˆ˜å¸¸ç”¨ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¨‹åºå¼€å§‹æ‰§è¡Œ..."</span>)
time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># å»¶è¿Ÿ2ç§’ï¼ˆè®©ç¨‹åºæš‚åœ2ç§’å†æ‰§è¡Œåç»­ä»£ç ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å»¶è¿Ÿ2ç§’åï¼Œç¨‹åºç»§ç»­æ‰§è¡Œ..."</span>)

<span class="hljs-comment"># 3. å®æˆ˜æ¡ˆä¾‹ï¼šè®¡ç®—ä»£ç æ‰§è¡Œæ—¶é—´ï¼ˆä¼˜åŒ–ä»£ç å¸¸ç”¨ï¼‰</span>
start_time = time.time()  <span class="hljs-comment"># è®°å½•å¼€å§‹æ—¶é—´ï¼ˆæ—¶é—´æˆ³ï¼‰</span>

<span class="hljs-comment"># æ¨¡æ‹Ÿä¸€æ®µéœ€è¦æ‰§è¡Œçš„ä»£ç ï¼ˆæ¯”å¦‚å¾ªç¯10000æ¬¡ï¼‰</span>
total = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100000</span>):
    total += i

end_time = time.time()  <span class="hljs-comment"># è®°å½•ç»“æŸæ—¶é—´</span>
execution_time = end_time - start_time  <span class="hljs-comment"># è®¡ç®—æ‰§è¡Œæ—¶é—´ï¼ˆç§’ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œæ€»è€—æ—¶ï¼š<span class="hljs-subst">{<span class="hljs-built_in">round</span>(execution_time, <span class="hljs-number">4</span>)}</span>ç§’"</span>)
</code></pre>
<h4 data-id="heading-9">2.4 æ–°æ‰‹é¿å‘æŒ‡å—ï¼ˆæ ‡å‡†åº“å®æˆ˜å¿…çœ‹ï¼‰</h4>
<ul>
<li>é¿å‘1ï¼šmathåº“çš„å‡½æ•°å‚æ•°å¤šä¸ºâ€œå¼§åº¦â€ï¼ˆè€Œéè§’åº¦ï¼‰ï¼Œæ¯”å¦‚math.sin()è®¡ç®—çš„æ˜¯å¼§åº¦çš„æ­£å¼¦å€¼ï¼Œè‹¥ç”¨è§’åº¦éœ€å…ˆè½¬æ¢ï¼ˆå¼§åº¦=è§’åº¦Ã—math.pi/180ï¼‰ï¼›</li>
<li>é¿å‘2ï¼šrandomåº“ç”Ÿæˆçš„æ˜¯â€œä¼ªéšæœºæ•°â€ï¼ˆåŸºäºç§å­ç”Ÿæˆï¼‰ï¼Œè‹¥è®¾ç½®å›ºå®šç§å­ï¼ˆrandom.seed(10)ï¼‰ï¼Œæ¯æ¬¡è¿è¡Œç”Ÿæˆçš„éšæœºæ•°ä¼šç›¸åŒï¼ˆé€‚åˆè°ƒè¯•ï¼‰ï¼›</li>
<li>é¿å‘3ï¼šrandom.shuffle()ä¼šâ€œåŸåœ°æ‰“ä¹±â€åˆ—è¡¨ï¼Œä¿®æ”¹åŸå¯¹è±¡ï¼Œè‹¥ä¸æƒ³ä¿®æ”¹åŸåˆ—è¡¨ï¼Œéœ€å…ˆå¤åˆ¶ï¼ˆæ¯”å¦‚new_list = list1.copy()ï¼Œå†shuffle(new_list)ï¼‰ï¼›</li>
<li>é¿å‘4ï¼štime.strftime()çš„å ä½ç¬¦åŒºåˆ†å¤§å°å†™ï¼Œæ¯”å¦‚%Yæ˜¯4ä½å¹´ä»½ï¼Œ%yæ˜¯2ä½å¹´ä»½ï¼›%Hæ˜¯24å°æ—¶åˆ¶ï¼Œ%Iæ˜¯12å°æ—¶åˆ¶ï¼Œæ–°æ‰‹æ˜“æ··æ·†ï¼›</li>
<li>é¿å‘5ï¼šå¯¼å…¥æ ‡å‡†åº“æ—¶ï¼Œæ¨¡å—åä¸è¦å†™é”™ï¼ˆæ¯”å¦‚mathä¸è¦å†™æˆMathã€randomä¸è¦å†™æˆRandomï¼‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™â€œæ¨¡å—ä¸å­˜åœ¨â€ã€‚</li>
</ul>
<blockquote>
<p>ä»¥ä¸Šè¿™äº›ä½ ä»¬ä¼šè®°å˜›ï¼Ÿä¸ç”¨è®°ï¼Œç°åœ¨ ai è¿™ä¹ˆå‘è¾¾ï¼Œåªè¦æœ‰å°è±¡ï¼Œåˆ°æ—¶å€™ ai ä¸€ä¸‹å°±å‡ºæ¥äº†ã€‚</p>
</blockquote>
<h3 data-id="heading-10">3 ç½‘ç»œç¼–ç¨‹åŸºç¡€ï¼šå®ç°ç®€å•çš„è·¨ç¨‹åºé€šä¿¡</h3>
<p>ç½‘ç»œç¼–ç¨‹æ˜¯Pythonå®æˆ˜ä¸­çš„é‡è¦æŠ€èƒ½ï¼Œæ ¸å¿ƒæ˜¯å®ç°â€œä¸åŒè®¾å¤‡ã€ä¸åŒç¨‹åºä¹‹é—´çš„æ•°æ®ä¼ è¾“â€ã€‚ä½œä¸ºåŸºç¡€å®æˆ˜é˜¶æ®µï¼Œæˆ‘ä»¬ä¸æ·±å…¥å¤æ‚çš„ç½‘ç»œåè®®ï¼Œé‡ç‚¹æŒæ¡<strong>TCPåè®®çš„åŸºç¡€ç”¨æ³•</strong>ï¼ˆæœ€å¸¸ç”¨ã€æœ€å¯é çš„ç½‘ç»œåè®®ï¼‰ï¼Œå®ç°â€œæœ¬åœ°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„ç®€å•é€šä¿¡â€ï¼Œç†è§£ç½‘ç»œç¼–ç¨‹çš„æ ¸å¿ƒæµç¨‹ï¼Œä¸ºåç»­å­¦ä¹ ç½‘ç»œçˆ¬è™«ã€æ¥å£å¼€å‘æ‰“ä¸‹åŸºç¡€ã€‚</p>
<p>æ ¸å¿ƒæ¦‚å¿µï¼ˆæ–°æ‰‹å¿…æ‡‚ï¼‰ï¼š - å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼šä¸»åŠ¨å‘èµ·è¿æ¥ã€è¯·æ±‚æ•°æ®çš„ä¸€æ–¹ï¼ˆæ¯”å¦‚æˆ‘ä»¬çš„æµè§ˆå™¨ã€æ‰‹æœºAPPï¼‰ï¼› - æœåŠ¡å™¨ç«¯ï¼ˆServerï¼‰ï¼šè¢«åŠ¨æ¥æ”¶è¿æ¥ã€å“åº”è¯·æ±‚çš„ä¸€æ–¹ï¼ˆæ¯”å¦‚ç½‘ç«™çš„æœåŠ¡å™¨ï¼‰ï¼› - Socketï¼ˆå¥—æ¥å­—ï¼‰ï¼šç½‘ç»œé€šä¿¡çš„â€œæ¡¥æ¢â€ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯é€šè¿‡Socketå»ºç«‹è¿æ¥ã€ä¼ è¾“æ•°æ®ã€‚</p>
<h4 data-id="heading-11">3.1 ç½‘ç»œç¼–ç¨‹æ ¸å¿ƒæµç¨‹ï¼ˆTCPåè®®ï¼‰</h4>
<p>TCPåè®®çš„é€šä¿¡æµç¨‹éµå¾ªâ€œä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥â†’ä¼ è¾“æ•°æ®â†’å››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥â€ï¼Œæ–°æ‰‹é‡ç‚¹æŒæ¡â€œå»ºç«‹è¿æ¥â†’ä¼ è¾“æ•°æ®â†’å…³é—­è¿æ¥â€çš„åŸºç¡€æµç¨‹ï¼Œç”¨Pythonçš„socketåº“å®ç°ï¼ˆå†…ç½®åº“ï¼Œæ— éœ€é¢å¤–å®‰è£…ï¼‰ï¼š</p>
<p>æµç¨‹æ‹†è§£ï¼š æœåŠ¡å™¨ç«¯ï¼šåˆ›å»ºSocketâ†’ç»‘å®šIPå’Œç«¯å£â†’ç›‘å¬è¿æ¥â†’æ¥å—è¿æ¥â†’æ¥æ”¶/å‘é€æ•°æ®â†’å…³é—­è¿æ¥ï¼› å®¢æˆ·ç«¯ï¼šåˆ›å»ºSocketâ†’è¿æ¥æœåŠ¡å™¨ï¼ˆIP+ç«¯å£ï¼‰â†’å‘é€/æ¥æ”¶æ•°æ®â†’å…³é—­è¿æ¥ã€‚</p>
<h4 data-id="heading-12">3.2 å®æˆ˜ä»£ç ï¼šæœ¬åœ°TCPå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯é€šä¿¡</h4>
<p>ä»¥ä¸‹ä»£ç åˆ†ä¸ºâ€œæœåŠ¡å™¨ç«¯â€å’Œâ€œå®¢æˆ·ç«¯â€ä¸¤éƒ¨åˆ†ï¼Œéœ€åˆ†åˆ«è¿è¡Œï¼ˆå…ˆè¿è¡ŒæœåŠ¡å™¨ç«¯ï¼Œå†è¿è¡Œå®¢æˆ·ç«¯ï¼‰ï¼Œå®ç°æœ¬åœ°ï¼ˆ127.0.0.1ï¼Œæœ¬æœºIPï¼‰çš„ç®€å•é€šä¿¡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ------------- æœåŠ¡å™¨ç«¯ä»£ç ï¼ˆserver.pyï¼‰-------------</span>
<span class="hljs-keyword">import</span> socket
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># 1. åˆ›å»ºSocketå¯¹è±¡ï¼ˆAF_INETï¼šIPv4åè®®ï¼ŒSOCK_STREAMï¼šTCPåè®®ï¼‰</span>
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

<span class="hljs-comment"># 2. ç»‘å®šIPåœ°å€å’Œç«¯å£ï¼ˆIPï¼š127.0.0.1ï¼Œæœ¬æœºIPï¼›ç«¯å£ï¼š9999ï¼Œè‡ªå®šä¹‰ï¼Œ1024ä»¥ä¸Šé¿å…å†²çªï¼‰</span>
server_addr = (<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">9999</span>)
server_socket.bind(server_addr)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç»‘å®šåœ°å€ï¼š<span class="hljs-subst">{server_addr}</span>ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥..."</span>)

<span class="hljs-comment"># 3. ç›‘å¬è¿æ¥ï¼ˆå‚æ•°5ï¼šæœ€å¤§ç­‰å¾…è¿æ¥æ•°ï¼‰</span>
server_socket.listen(<span class="hljs-number">5</span>)

<span class="hljs-comment"># 4. æ¥å—å®¢æˆ·ç«¯è¿æ¥ï¼ˆé˜»å¡å¼ï¼Œç­‰å¾…å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼‰</span>
client_socket, client_addr = server_socket.accept()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å®¢æˆ·ç«¯<span class="hljs-subst">{client_addr}</span>å·²è¿æ¥ï¼"</span>)

<span class="hljs-keyword">try</span>:
    <span class="hljs-comment"># 5. æ¥æ”¶å®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼ˆrecv(1024)ï¼šæ¯æ¬¡æœ€å¤šæ¥æ”¶1024å­—èŠ‚ï¼Œéœ€è§£ç ä¸ºå­—ç¬¦ä¸²ï¼‰</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        data = client_socket.recv(<span class="hljs-number">1024</span>).decode(<span class="hljs-string">"utf-8"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> data:  <span class="hljs-comment"># è‹¥å®¢æˆ·ç«¯å…³é—­è¿æ¥ï¼Œdataä¸ºç©ºï¼Œé€€å‡ºå¾ªç¯</span>
            <span class="hljs-keyword">break</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¶åˆ°å®¢æˆ·ç«¯<span class="hljs-subst">{client_addr}</span>çš„æ¶ˆæ¯ï¼š<span class="hljs-subst">{data}</span>"</span>)
        
        <span class="hljs-comment"># 6. å‘å®¢æˆ·ç«¯å‘é€å“åº”æ•°æ®ï¼ˆéœ€ç¼–ç ä¸ºbytesç±»å‹ï¼‰</span>
        response = <span class="hljs-string">f"æœåŠ¡å™¨å·²æ”¶åˆ°æ¶ˆæ¯ï¼š<span class="hljs-subst">{data}</span>ï¼Œæ—¶é—´ï¼š<span class="hljs-subst">{time.strftime(<span class="hljs-string">'%H:%M:%S'</span>)}</span>"</span>
        client_socket.send(response.encode(<span class="hljs-string">"utf-8"</span>))
<span class="hljs-keyword">finally</span>:
    <span class="hljs-comment"># 7. å…³é—­è¿æ¥ï¼ˆå…ˆå…³é—­å®¢æˆ·ç«¯è¿æ¥ï¼Œå†å…³é—­æœåŠ¡å™¨ç«¯è¿æ¥ï¼‰</span>
    client_socket.close()
    server_socket.close()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸å®¢æˆ·ç«¯<span class="hljs-subst">{client_addr}</span>çš„è¿æ¥å·²å…³é—­ï¼ŒæœåŠ¡å™¨å·²åœæ­¢è¿è¡Œ"</span>)

<span class="hljs-comment"># ------------- å®¢æˆ·ç«¯ä»£ç ï¼ˆclient.pyï¼‰-------------</span>
<span class="hljs-keyword">import</span> socket

<span class="hljs-comment"># 1. åˆ›å»ºSocketå¯¹è±¡ï¼ˆä¸æœåŠ¡å™¨ç«¯ä¸€è‡´ï¼ŒIPv4+TCPï¼‰</span>
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

<span class="hljs-comment"># 2. è¿æ¥æœåŠ¡å™¨ï¼ˆæŒ‡å®šæœåŠ¡å™¨çš„IPå’Œç«¯å£ï¼Œä¸æœåŠ¡å™¨ç«¯ä¸€è‡´ï¼‰</span>
server_addr = (<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">9999</span>)
<span class="hljs-keyword">try</span>:
    client_socket.connect(server_addr)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆåŠŸè¿æ¥åˆ°æœåŠ¡å™¨<span class="hljs-subst">{server_addr}</span>ï¼"</span>)
    
    <span class="hljs-comment"># 3. å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ˆè¾“å…¥æ¶ˆæ¯ï¼Œå‘é€ç»™æœåŠ¡å™¨ï¼‰</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        msg = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥è¦å‘é€ç»™æœåŠ¡å™¨çš„æ¶ˆæ¯ï¼ˆè¾“å…¥'quit'é€€å‡ºï¼‰ï¼š"</span>)
        <span class="hljs-keyword">if</span> msg == <span class="hljs-string">"quit"</span>:
            <span class="hljs-keyword">break</span>
        <span class="hljs-comment"># å‘é€æ•°æ®ï¼šå­—ç¬¦ä¸²ç¼–ç ä¸ºbytesç±»å‹</span>
        client_socket.send(msg.encode(<span class="hljs-string">"utf-8"</span>))
        
        <span class="hljs-comment"># 4. æ¥æ”¶æœåŠ¡å™¨çš„å“åº”æ•°æ®</span>
        response = client_socket.recv(<span class="hljs-number">1024</span>).decode(<span class="hljs-string">"utf-8"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœåŠ¡å™¨å“åº”ï¼š<span class="hljs-subst">{response}</span>"</span>)
<span class="hljs-keyword">finally</span>:
    <span class="hljs-comment"># 5. å…³é—­è¿æ¥</span>
    client_socket.close()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸æœåŠ¡å™¨çš„è¿æ¥å·²å…³é—­"</span>)
</code></pre>
<h4 data-id="heading-13">3.3 ä»£ç è¿è¡Œè¯´æ˜ä¸å®æˆ˜æ‹“å±•</h4>
<ul>
<li>è¿è¡Œæ­¥éª¤ï¼šâ‘  æ–°å»ºä¸¤ä¸ª.pyæ–‡ä»¶ï¼ˆserver.pyã€client.pyï¼‰ï¼Œåˆ†åˆ«å¤åˆ¶ä¸Šé¢çš„ä»£ç ï¼›â‘¡ å…ˆè¿è¡Œserver.pyï¼ˆæœåŠ¡å™¨å¯åŠ¨ï¼Œç­‰å¾…è¿æ¥ï¼‰ï¼›â‘¢ å†è¿è¡Œclient.pyï¼ˆå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨ï¼‰ï¼›â‘£ åœ¨å®¢æˆ·ç«¯è¾“å…¥æ¶ˆæ¯ï¼Œå³å¯å®ç°åŒå‘é€šä¿¡ï¼Œè¾“å…¥â€œquitâ€é€€å‡ºã€‚</li>
<li>å®æˆ˜æ‹“å±•ï¼šå°†å‰é˜¶æ®µçš„â€œæ–‡ä»¶æ“ä½œâ€ç»“åˆè¿›æ¥ï¼Œå®ç°â€œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€æ–‡ä»¶å†…å®¹ï¼ŒæœåŠ¡å™¨æ¥æ”¶åä¿å­˜åˆ°æœ¬åœ°â€ï¼ˆæ¯”å¦‚å®¢æˆ·ç«¯è¯»å–test.txtæ–‡ä»¶ï¼Œå‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¿å­˜ä¸ºserver_test.txtï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-14">3.4 æ–°æ‰‹é¿å‘æŒ‡å—ï¼ˆç½‘ç»œç¼–ç¨‹åŸºç¡€å¿…çœ‹ï¼‰</h4>
<ul>
<li>é¿å‘1ï¼šå¿…é¡»â€œå…ˆå¯åŠ¨æœåŠ¡å™¨ç«¯ï¼Œå†å¯åŠ¨å®¢æˆ·ç«¯â€ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šæŠ¥é”™â€œè¿æ¥æ‹’ç»â€ï¼›</li>
<li>é¿å‘2ï¼šIPåœ°å€å’Œç«¯å£å¿…é¡»ä¸€è‡´ï¼ŒæœåŠ¡å™¨ç«¯ç»‘å®šçš„IPå’Œç«¯å£ï¼Œå®¢æˆ·ç«¯å¿…é¡»å®Œå…¨å¯¹åº”ï¼ˆæ¯”å¦‚æœåŠ¡å™¨ç»‘å®š127.0.0.1:9999ï¼Œå®¢æˆ·ç«¯ä¹Ÿè¦è¿æ¥è¿™ä¸ªåœ°å€ï¼‰ï¼›</li>
<li>é¿å‘3ï¼šTCPé€šä¿¡ä¸­ï¼Œsend()å‘é€çš„æ˜¯bytesç±»å‹æ•°æ®ï¼Œrecv()æ¥æ”¶çš„ä¹Ÿæ˜¯bytesç±»å‹ï¼Œå¿…é¡»ç”¨encode("utf-8")ç¼–ç ã€decode("utf-8")è§£ç ï¼Œå¦åˆ™ä¼šæŠ¥é”™æˆ–å‡ºç°ä¹±ç ï¼›</li>
<li>é¿å‘4ï¼šç«¯å£å·éœ€é€‰æ‹©1024ä»¥ä¸Šçš„ï¼ˆ1024ä»¥ä¸‹æ˜¯ç³»ç»Ÿæ ‡å‡†ç«¯å£ï¼Œå¯èƒ½è¢«å ç”¨ï¼‰ï¼Œè‹¥è¿è¡Œæ—¶æŠ¥é”™â€œç«¯å£å·²è¢«å ç”¨â€ï¼Œå¯æ›´æ¢ç«¯å£ï¼ˆæ¯”å¦‚æ”¹ä¸º10000ï¼‰ï¼›</li>
<li>é¿å‘5ï¼šæœåŠ¡å™¨ç«¯çš„accept()ã€recv()æ˜¯â€œé˜»å¡å¼â€çš„ï¼Œä¼šä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥/æ•°æ®ï¼Œæ–°æ‰‹æ— éœ€æ·±ç©¶ï¼Œåç»­è¿›é˜¶å†å­¦ä¹ éé˜»å¡ç¼–ç¨‹ï¼›</li>
<li>é¿å‘6ï¼šé€šä¿¡ç»“æŸåï¼Œå¿…é¡»å…³é—­Socketè¿æ¥ï¼ˆclose()ï¼‰ï¼Œé¿å…èµ„æºæ³„éœ²ã€‚</li>
</ul>
<h3 data-id="heading-15">4 å¤šçº¿ç¨‹åŸºç¡€ï¼šå®ç°ç¨‹åºçš„å¹¶å‘æ‰§è¡Œ</h3>
<p>åœ¨å‰é¢çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™çš„ä»£ç éƒ½æ˜¯â€œå•çº¿ç¨‹â€çš„â€”â€”ç¨‹åºä»ä¸Šåˆ°ä¸‹ï¼Œä¾æ¬¡æ‰§è¡Œï¼Œä¸€æ¬¡åªèƒ½åšä¸€ä»¶äº‹ï¼ˆæ¯”å¦‚ç¨‹åºæ‰§è¡Œå»¶è¿Ÿæ—¶ï¼Œä¼šä¸€ç›´å¡ä½ï¼Œæ— æ³•åšå…¶ä»–æ“ä½œï¼‰ã€‚è€Œâ€œå¤šçº¿ç¨‹â€ï¼Œèƒ½è®©ç¨‹åºâ€œåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡â€ï¼ˆå¹¶å‘æ‰§è¡Œï¼‰ï¼Œæå‡ç¨‹åºæ•ˆç‡ï¼Œå°¤å…¶é€‚åˆI/Oå¯†é›†å‹ä»»åŠ¡ï¼ˆæ¯”å¦‚æ–‡ä»¶æ“ä½œã€ç½‘ç»œè¯·æ±‚ã€å»¶è¿Ÿæ‰§è¡Œï¼‰ã€‚</p>
<p>ä½œä¸ºåŸºç¡€å®æˆ˜é˜¶æ®µï¼Œæˆ‘ä»¬é‡ç‚¹æŒæ¡Python threadingæ¨¡å—çš„åŸºç¡€ç”¨æ³•ï¼ˆå†…ç½®åº“ï¼Œæ— éœ€é¢å¤–å®‰è£…ï¼‰ï¼Œå®ç°ç®€å•çš„å¤šçº¿ç¨‹å¹¶å‘ï¼Œç†è§£å¤šçº¿ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µå’Œä¼˜åŠ¿ï¼Œä¸æ·±å…¥å¤æ‚çš„çº¿ç¨‹å®‰å…¨ã€é”æœºåˆ¶ï¼ˆåç»­è¿›é˜¶å†å­¦ä¹ ï¼‰ã€‚</p>
<p>æ ¸å¿ƒæ¦‚å¿µï¼ˆæ–°æ‰‹å¿…æ‡‚ï¼‰ï¼š - çº¿ç¨‹ï¼ˆThreadï¼‰ï¼šç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼› - ä¸»çº¿ç¨‹ï¼šç¨‹åºå¯åŠ¨åï¼Œé»˜è®¤åˆ›å»ºçš„çº¿ç¨‹ï¼ˆæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰å†™çš„ä»£ç ï¼Œéƒ½æ˜¯ä¸»çº¿ç¨‹åœ¨æ‰§è¡Œï¼‰ï¼› - å­çº¿ç¨‹ï¼šæˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºçš„çº¿ç¨‹ï¼Œç”¨äºæ‰§è¡Œé¢å¤–çš„ä»»åŠ¡ï¼Œä¸ä¸»çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚</p>
<h4 data-id="heading-16">4.1 å¤šçº¿ç¨‹åŸºç¡€ç”¨æ³•ï¼ˆä¸¤ç§å¸¸ç”¨æ–¹å¼ï¼‰</h4>
<p>æ–°æ‰‹é‡ç‚¹æŒæ¡ä¸¤ç§åˆ›å»ºå­çº¿ç¨‹çš„æ–¹å¼ï¼šâ‘  ä¼ å…¥targetå‡½æ•°ï¼ˆæ¨èï¼Œç®€å•æ˜“æ‡‚ï¼‰ï¼›â‘¡ ç»§æ‰¿Threadç±»ï¼ˆè¿›é˜¶ç”¨æ³•ï¼Œç®€å•äº†è§£ï¼‰ï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹è®²è§£ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># ---------------- æ–¹å¼1ï¼šä¼ å…¥targetå‡½æ•°ï¼ˆæ¨èï¼Œæ–°æ‰‹é¦–é€‰ï¼‰----------------</span>
<span class="hljs-comment"># å®šä¹‰è¦åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œçš„å‡½æ•°ï¼ˆæ¯”å¦‚æ¨¡æ‹Ÿä¸‹è½½ä»»åŠ¡ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">download_task</span>(<span class="hljs-params">task_name, delay</span>):
    <span class="hljs-string">"""æ¨¡æ‹Ÿä¸‹è½½ä»»åŠ¡ï¼šå»¶è¿Ÿdelayç§’ï¼Œæ¨¡æ‹Ÿä¸‹è½½è€—æ—¶"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­çº¿ç¨‹å¯åŠ¨ï¼šå¼€å§‹ä¸‹è½½<span class="hljs-subst">{task_name}</span>ï¼Œé¢„è®¡è€—æ—¶<span class="hljs-subst">{delay}</span>ç§’"</span>)
    time.sleep(delay)  <span class="hljs-comment"># æ¨¡æ‹Ÿä¸‹è½½è€—æ—¶ï¼ˆI/Oé˜»å¡ï¼‰</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­çº¿ç¨‹ç»“æŸï¼š<span class="hljs-subst">{task_name}</span>ä¸‹è½½å®Œæˆï¼"</span>)

<span class="hljs-comment"># 1. åˆ›å»ºå­çº¿ç¨‹ï¼ˆtargetï¼šå­çº¿ç¨‹è¦æ‰§è¡Œçš„å‡½æ•°ï¼›argsï¼šä¼ å…¥å‡½æ•°çš„å‚æ•°ï¼Œå…ƒç»„ç±»å‹ï¼‰</span>
thread1 = threading.Thread(target=download_task, args=(<span class="hljs-string">"ç”µå½±A"</span>, <span class="hljs-number">3</span>))
thread2 = threading.Thread(target=download_task, args=(<span class="hljs-string">"éŸ³ä¹B"</span>, <span class="hljs-number">2</span>))

<span class="hljs-comment"># 2. å¯åŠ¨å­çº¿ç¨‹ï¼ˆstart()ï¼šå¯åŠ¨çº¿ç¨‹ï¼Œè‡ªåŠ¨è°ƒç”¨targetå‡½æ•°ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šå¼€å§‹æ‰§è¡Œç¨‹åº"</span>)
thread1.start()
thread2.start()

<span class="hljs-comment"># 3. ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼ˆjoin()ï¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œç­‰å¾…å­çº¿ç¨‹ç»“æŸåï¼Œä¸»çº¿ç¨‹å†ç»§ç»­ï¼‰</span>
thread1.join()
thread2.join()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šæ‰€æœ‰å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œç¨‹åºç»“æŸ"</span>)

<span class="hljs-comment"># ---------------- æ–¹å¼2ï¼šç»§æ‰¿Threadç±»ï¼ˆç®€å•äº†è§£ï¼‰----------------</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span>(threading.Thread):
    <span class="hljs-string">"""è‡ªå®šä¹‰çº¿ç¨‹ç±»ï¼Œç»§æ‰¿Threadç±»ï¼Œé‡å†™run()æ–¹æ³•"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, task_name, delay</span>):
        <span class="hljs-built_in">super</span>().__init__()  <span class="hljs-comment"># è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•</span>
        self.task_name = task_name
        self.delay = delay
    
    <span class="hljs-comment"># é‡å†™run()æ–¹æ³•ï¼šå­çº¿ç¨‹å¯åŠ¨åï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œrun()æ–¹æ³•ä¸­çš„ä»£ç </span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­çº¿ç¨‹å¯åŠ¨ï¼šå¼€å§‹ä¸‹è½½<span class="hljs-subst">{self.task_name}</span>ï¼Œé¢„è®¡è€—æ—¶<span class="hljs-subst">{self.delay}</span>ç§’"</span>)
        time.sleep(self.delay)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­çº¿ç¨‹ç»“æŸï¼š<span class="hljs-subst">{self.task_name}</span>ä¸‹è½½å®Œæˆï¼"</span>)

<span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰çº¿ç¨‹å¯¹è±¡</span>
thread3 = MyThread(<span class="hljs-string">"å›¾ç‰‡C"</span>, <span class="hljs-number">1</span>)
thread4 = MyThread(<span class="hljs-string">"æ–‡æ¡£D"</span>, <span class="hljs-number">4</span>)

<span class="hljs-comment"># å¯åŠ¨å­çº¿ç¨‹</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nä¸»çº¿ç¨‹ï¼šå¼€å§‹æ‰§è¡Œè‡ªå®šä¹‰çº¿ç¨‹ç¨‹åº"</span>)
thread3.start()
thread4.start()

<span class="hljs-comment"># ç­‰å¾…å­çº¿ç¨‹ç»“æŸ</span>
thread3.join()
thread4.join()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šæ‰€æœ‰è‡ªå®šä¹‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œç¨‹åºç»“æŸ"</span>)
</code></pre>
<h4 data-id="heading-17">4.2 å¤šçº¿ç¨‹çš„ä¼˜åŠ¿ï¼ˆå®æˆ˜å¯¹æ¯”ï¼‰</h4>
<p>é€šè¿‡â€œå•çº¿ç¨‹â€ä¸â€œå¤šçº¿ç¨‹â€çš„æ‰§è¡Œæ—¶é—´å¯¹æ¯”ï¼Œç›´è§‚æ„Ÿå—å¤šçº¿ç¨‹çš„å¹¶å‘ä¼˜åŠ¿ï¼ˆé€‚åˆI/Oå¯†é›†å‹ä»»åŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># å®šä¹‰ä»»åŠ¡å‡½æ•°ï¼ˆæ¨¡æ‹ŸI/Oé˜»å¡ï¼Œæ¯”å¦‚ä¸‹è½½ã€æ–‡ä»¶è¯»å–ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name, delay</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»»åŠ¡<span class="hljs-subst">{name}</span>å¼€å§‹æ‰§è¡Œï¼Œè€—æ—¶<span class="hljs-subst">{delay}</span>ç§’"</span>)
    time.sleep(delay)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»»åŠ¡<span class="hljs-subst">{name}</span>æ‰§è¡Œå®Œæ¯•"</span>)

<span class="hljs-comment"># ---------------- å•çº¿ç¨‹æ‰§è¡Œï¼ˆä¾æ¬¡æ‰§è¡Œ3ä¸ªä»»åŠ¡ï¼‰----------------</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== å•çº¿ç¨‹æ‰§è¡Œ ==="</span>)
start_time1 = time.time()

task(<span class="hljs-string">"A"</span>, <span class="hljs-number">3</span>)
task(<span class="hljs-string">"B"</span>, <span class="hljs-number">2</span>)
task(<span class="hljs-string">"C"</span>, <span class="hljs-number">1</span>)

end_time1 = time.time()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å•çº¿ç¨‹æ€»è€—æ—¶ï¼š<span class="hljs-subst">{<span class="hljs-built_in">round</span>(end_time1 - start_time1, <span class="hljs-number">2</span>)}</span>ç§’\n"</span>)  <span class="hljs-comment"># æ€»è€—æ—¶çº¦6ç§’</span>

<span class="hljs-comment"># ---------------- å¤šçº¿ç¨‹æ‰§è¡Œï¼ˆ3ä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œï¼‰----------------</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== å¤šçº¿ç¨‹æ‰§è¡Œ ==="</span>)
start_time2 = time.time()

<span class="hljs-comment"># åˆ›å»º3ä¸ªå­çº¿ç¨‹</span>
t1 = threading.Thread(target=task, args=(<span class="hljs-string">"A"</span>, <span class="hljs-number">3</span>))
t2 = threading.Thread(target=task, args=(<span class="hljs-string">"B"</span>, <span class="hljs-number">2</span>))
t3 = threading.Thread(target=task, args=(<span class="hljs-string">"C"</span>, <span class="hljs-number">1</span>))

<span class="hljs-comment"># å¯åŠ¨æ‰€æœ‰å­çº¿ç¨‹</span>
t1.start()
t2.start()
t3.start()

<span class="hljs-comment"># ç­‰å¾…æ‰€æœ‰å­çº¿ç¨‹ç»“æŸ</span>
t1.join()
t2.join()
t3.join()

end_time2 = time.time()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤šçº¿ç¨‹æ€»è€—æ—¶ï¼š<span class="hljs-subst">{<span class="hljs-built_in">round</span>(end_time2 - start_time2, <span class="hljs-number">2</span>)}</span>ç§’"</span>)  <span class="hljs-comment"># æ€»è€—æ—¶çº¦3ç§’ï¼ˆå–å†³äºæœ€é•¿ä»»åŠ¡ï¼‰</span>
</code></pre>
<p>è¿è¡Œç»“æœåˆ†æï¼šå•çº¿ç¨‹æ‰§è¡Œ3ä¸ªä»»åŠ¡ï¼Œæ€»è€—æ—¶æ˜¯3+2+1=6ç§’ï¼›å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œæ€»è€—æ—¶çº¦3ç§’ï¼ˆç­‰äºæœ€é•¿ä»»åŠ¡çš„è€—æ—¶ï¼‰ï¼Œæ˜æ˜¾æå‡äº†ç¨‹åºæ•ˆç‡â€”â€”è¿™å°±æ˜¯å¤šçº¿ç¨‹çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œé€‚åˆå¤„ç†â€œéœ€è¦ç­‰å¾…çš„ä»»åŠ¡â€ã€‚</p>
<h4 data-id="heading-18">4.3 æ–°æ‰‹é¿å‘æŒ‡å—ï¼ˆå¤šçº¿ç¨‹åŸºç¡€å¿…çœ‹ï¼‰</h4>
<ul>
<li>é¿å‘1ï¼šå¯åŠ¨çº¿ç¨‹å¿…é¡»ç”¨ <code>start()</code> æ–¹æ³•ï¼Œä¸èƒ½ç”¨ <code>run()</code> æ–¹æ³•â€”â€”start()ä¼šåˆ›å»ºå­çº¿ç¨‹ï¼Œå¹¶å‘æ‰§è¡Œï¼›run()åªæ˜¯æ™®é€šå‡½æ•°è°ƒç”¨ï¼Œè¿˜æ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼›</li>
<li>é¿å‘2ï¼š<code>join()</code> æ–¹æ³•çš„ä½œç”¨æ˜¯â€œé˜»å¡ä¸»çº¿ç¨‹â€ï¼Œç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œè‹¥ä¸è°ƒç”¨join()ï¼Œä¸»çº¿ç¨‹ä¼šç›´æ¥ç»“æŸï¼Œå­çº¿ç¨‹å¯èƒ½è¿˜æœªæ‰§è¡Œå®Œå°±è¢«ç»ˆæ­¢ï¼›</li>
<li>é¿å‘3ï¼šPythonä¸­å­˜åœ¨â€œå…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰â€ï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡ŒPythonä»£ç â€”â€”å¤šçº¿ç¨‹é€‚åˆI/Oå¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚ä¸‹è½½ã€å»¶è¿Ÿï¼‰ï¼Œä¸é€‚åˆCPUå¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚å¤§é‡è®¡ç®—ï¼‰ï¼Œæ–°æ‰‹æ— éœ€æ·±ç©¶GILï¼ŒçŸ¥é“è¿™ä¸ªç‰¹æ€§å³å¯ï¼›</li>
<li>é¿å‘4ï¼šå¤šä¸ªå­çº¿ç¨‹å…±äº«å…¨å±€å˜é‡æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°â€œçº¿ç¨‹å®‰å…¨é—®é¢˜â€ï¼ˆæ¯”å¦‚å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¯¼è‡´æ•°æ®é”™è¯¯ï¼‰ï¼ŒåŸºç¡€é˜¶æ®µæš‚æ—¶ä¸å¤„ç†ï¼Œåç»­è¿›é˜¶å­¦ä¹ â€œé”æœºåˆ¶â€è§£å†³ï¼›</li>
<li>é¿å‘5ï¼šä¸è¦åˆ›å»ºè¿‡å¤šçš„å­çº¿ç¨‹ï¼ˆæ¯”å¦‚å‡ ç™¾ã€å‡ åƒä¸ªï¼‰ï¼Œä¼šå ç”¨å¤§é‡ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´ç¨‹åºå¡é¡¿ï¼ŒæŒ‰éœ€åˆ›å»ºå³å¯ã€‚</li>
</ul>
<h3 data-id="heading-19">5 æ€»ç»“</h3>
<p>æ­å–œå¤§å®¶ï¼Python3åŸºç¡€å­¦ä¹ ç¬¬ä¸ƒé˜¶æ®µã€ŒåŸºç¡€å®æˆ˜å·©å›ºã€çš„æ ¸å¿ƒå†…å®¹ï¼Œåˆ°è¿™é‡Œå°±å…¨éƒ¨æ¢³ç†å®Œæ¯•äº†ï¼è¿™ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬æ²¡æœ‰å­¦ä¹ æ–°çš„å¤æ‚è¯­æ³•ï¼Œè€Œæ˜¯èšç„¦â€œå®æˆ˜å·©å›ºâ€ï¼Œå°†å‰å…­é˜¶æ®µçš„çŸ¥è¯†ä¸²è”èµ·æ¥ï¼Œé€šè¿‡å››å¤§å®æˆ˜æ–¹å‘ï¼Œå®ç°äº†ä»â€œä¼šç”¨â€åˆ°â€œæ´»ç”¨â€çš„è·¨è¶Šï¼š</p>
<ul>
<li>å¸¸ç”¨å†…ç½®å‡½æ•°ï¼šæŒæ¡äº†lenã€rangeã€enumerateã€zipç­‰é«˜é¢‘å·¥å…·ï¼Œå­¦ä¼šç”¨å†…ç½®å‡½æ•°ç®€åŒ–ä»£ç ï¼Œæå‡ç¼–ç æ•ˆç‡ï¼›</li>
<li>ç®€å•æ ‡å‡†åº“ï¼šç†Ÿç»ƒä½¿ç”¨mathã€randomã€timeä¸‰ä¸ªå¸¸ç”¨æ ‡å‡†åº“ï¼Œèƒ½è§£å†³æ•°å­¦è®¡ç®—ã€éšæœºåœºæ™¯ã€æ—¶é—´å¤„ç†ç­‰æ—¥å¸¸å®æˆ˜éœ€æ±‚ï¼›</li>
<li>ç½‘ç»œç¼–ç¨‹åŸºç¡€ï¼šæŒæ¡TCPåè®®çš„æ ¸å¿ƒæµç¨‹ï¼Œå®ç°äº†æœ¬åœ°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„ç®€å•é€šä¿¡ï¼Œç†è§£äº†è·¨ç¨‹åºé€šä¿¡çš„åŸç†ï¼›</li>
<li>å¤šçº¿ç¨‹åŸºç¡€ï¼šå­¦ä¼šç”¨threadingæ¨¡å—åˆ›å»ºå­çº¿ç¨‹ï¼Œå®ç°ç¨‹åºçš„å¹¶å‘æ‰§è¡Œï¼Œæå‡I/Oå¯†é›†å‹ä»»åŠ¡çš„æ•ˆç‡ã€‚</li>
</ul>
<p>æœ¬é˜¶æ®µçš„æ ¸å¿ƒé‡ç‚¹æ˜¯â€œå®æˆ˜â€â€”â€”æ–°æ‰‹ä¸è¦åªçœ‹ä»£ç ã€è®°è¯­æ³•ï¼Œä¸€å®šè¦äº²æ‰‹æ•²å†™æ¯ä¸ªæ¡ˆä¾‹ï¼Œè°ƒè¯•æŠ¥é”™ï¼Œç»“åˆå‰é˜¶æ®µçš„çŸ¥è¯†ï¼ˆå‡½æ•°ã€æ¨¡å—ã€æ–‡ä»¶æ“ä½œç­‰ï¼‰æ‹“å±•å®æˆ˜åœºæ™¯ï¼Œæ¯”å¦‚ï¼šç”¨å¤šçº¿ç¨‹å®ç°å¤šæ–‡ä»¶ä¸‹è½½ã€ç”¨ç½‘ç»œç¼–ç¨‹+æ–‡ä»¶æ“ä½œå®ç°æ–‡ä»¶ä¼ è¾“ã€ç”¨å†…ç½®å‡½æ•°+æ ‡å‡†åº“ç¼–å†™ç®€å•çš„éªŒè¯ç ç”Ÿæˆå™¨ã€‚</p>
<p>å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œæœ¬é˜¶æ®µå¯èƒ½ä¼šè§‰å¾—å¤šçº¿ç¨‹ã€ç½‘ç»œç¼–ç¨‹æœ‰ç‚¹éš¾åº¦ï¼Œå°¤å…¶æ˜¯â€œå¹¶å‘â€â€œSocketè¿æ¥â€çš„é€»è¾‘ï¼Œå®¹æ˜“æ··æ·†æ­¥éª¤â€”â€”æ²¡å…³ç³»ï¼Œå¤šåŠ¨æ‰‹ç»ƒä¹ ï¼Œå…ˆæŒæ¡åŸºç¡€ç”¨æ³•ï¼Œå†é€æ­¥ç†è§£åŸç†ï¼Œé‡ç‚¹æ˜¯èƒ½ç‹¬ç«‹å†™å‡ºå¯è¿è¡Œçš„å®æˆ˜ä»£ç ï¼Œå·©å›ºåŸºç¡€ã€‚</p>
<p>åˆ°è¿™é‡Œï¼ŒPython3åŸºç¡€å­¦ä¹ çš„ä¸ƒä¸ªé˜¶æ®µå°±å…¨éƒ¨ç»“æŸäº†ï¼é€šè¿‡è¿™ä¸ƒä¸ªé˜¶æ®µçš„å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡äº†Pythonçš„æ ¸å¿ƒåŸºç¡€è¯­æ³•ã€æ¨¡å—åŒ–ç¼–ç¨‹ã€é¢å‘å¯¹è±¡ã€å®æˆ˜å·¥å…·ã€ç½‘ç»œä¸å¹¶å‘åŸºç¡€ï¼Œå…·å¤‡äº†ç‹¬ç«‹ç¼–å†™ç®€å•Pythoné¡¹ç›®çš„èƒ½åŠ›ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥å°è¯•æŒ‘æˆ˜ç®€å•çš„å®æˆ˜é¡¹ç›®ï¼ˆæ¯”å¦‚å­¦ç”Ÿç®¡ç†ç³»ç»Ÿã€é€šè®¯å½•ã€ç®€æ˜“çˆ¬è™«ã€éªŒè¯ç ç”Ÿæˆå™¨ï¼‰ï¼Œå°†ä¸ƒä¸ªé˜¶æ®µçš„çŸ¥è¯†ç»¼åˆè¿ç”¨ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚åç»­æˆ‘ä»¬è¿˜ä¼šè¿›å…¥Pythonè¿›é˜¶å­¦ä¹ é˜¶æ®µï¼Œå­¦ä¹ æ›´å¤æ‚çš„æ¡†æ¶ã€é¡¹ç›®å¼€å‘æŠ€å·§ï¼Œç»§ç»­åŠ æ²¹ï¼Œä½ å·²ç»ç¦»â€œåˆæ ¼çš„Pythonå¼€å‘è€…â€è¶Šæ¥è¶Šè¿‘å•¦ï½</p>
<hr/>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>  <strong>@æ€’æ”¾å§å¾·å¾· @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</strong><br/>
æŒç»­åˆ›ä½œå¾ˆä¸å®¹æ˜“ï¼Œä½œè€…å°†ä»¥å°½å¯èƒ½çš„è¯¦ç»†æŠŠæ‰€å­¦çŸ¥è¯†åˆ†äº«å„ä½å¼€å‘è€…ï¼Œä¸€èµ·è¿›æ­¥ä¸€èµ·å­¦ä¹ ã€‚<strong>è½¬è½½è¯·æºå¸¦é“¾æ¥ï¼Œè½¬è½½åˆ°å¾®ä¿¡å…¬ä¼—å·è¯·å‹¿é€‰æ‹©åŸåˆ›ï¼Œè°¢è°¢ï¼</strong><br/>
ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ç‚¹èµå“¦ï¼ğŸ‘<br/>
è°¢è°¢æ”¯æŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OoderAgent ç›¸æ¯”ä¸»æµAgentæ¡†æ¶çš„äº”å¤§æ ¸å¿ƒç‹¬ç‰¹ä¼˜åŠ¿]]></title>    <link>https://juejin.cn/post/7603895839557730367</link>    <guid>https://juejin.cn/post/7603895839557730367</guid>    <pubDate>2026-02-09T04:49:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603895839557730367" data-draft-id="7604084016510713897" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OoderAgent ç›¸æ¯”ä¸»æµAgentæ¡†æ¶çš„äº”å¤§æ ¸å¿ƒç‹¬ç‰¹ä¼˜åŠ¿"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-09T04:49:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OoderAgent ç›¸æ¯”ä¸»æµAgentæ¡†æ¶çš„äº”å¤§æ ¸å¿ƒç‹¬ç‰¹ä¼˜åŠ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T04:49:47.000Z" title="Mon Feb 09 2026 04:49:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆªè‡³ 2026 å¹´åˆï¼ŒooderAgentï¼ˆç‰¹åˆ«æ˜¯ Nexus / 2.0 ç‰ˆæœ¬ï¼‰åœ¨ä¼—å¤š AI Agent æ¡†æ¶ä¸­å±•ç°å‡ºæ˜¾è‘—ä¸”ç³»ç»Ÿæ€§çš„ç‹¬ç‰¹ä¼˜åŠ¿ã€‚å®ƒå¹¶éåœ¨å•ä¸€åŠŸèƒ½ä¸Šâ€œå¾®åˆ›æ–°â€ï¼Œè€Œæ˜¯ä»æ¶æ„å“²å­¦ã€èƒ½åŠ›æŠ½è±¡ã€äººæœºååŒã€ä¼ä¸šè½åœ°å››ä¸ªç»´åº¦é‡æ„äº† AI åº”ç”¨çš„å¼€å‘ä¸è¿è¡ŒèŒƒå¼ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ ooderAgent ç›¸æ¯”ä¸»æµæ¡†æ¶ï¼ˆå¦‚ LangChainã€Difyã€AutoGenã€CrewAI ç­‰ï¼‰çš„ äº”å¤§æ ¸å¿ƒç‹¬ç‰¹ä¼˜åŠ¿ï¼š</p>
<p>âœ… 1. ä»¥ Skill ä¸ºä¸­å¿ƒçš„èƒ½åŠ›æŠ½è±¡ï¼ˆè€Œé LLM ä¸ºä¸­å¿ƒï¼‰
è¿™æ˜¯æœ€æ ¹æœ¬çš„å·®å¼‚ï¼šooderAgent æŠŠ AI èƒ½åŠ›å½“ä½œâ€œå¯æ²»ç†çš„æœåŠ¡â€ï¼Œè€Œä¸æ˜¯â€œå¤§æ¨¡å‹çš„æ’ä»¶â€ã€‚
å¯¹æ¯”é¡¹   ooderAgent   å…¶ä»–æ¡†æ¶ï¼ˆLangChain/Dify ç­‰ï¼‰
æœ€å°å•å…ƒ   Skillï¼ˆAIBridgeï¼‰â€¢ å¼º Schema çº¦æŸâ€¢ ç‰ˆæœ¬ç®¡ç†â€¢ ä¸Šä¸‹æ–‡éš”ç¦»â€¢ å¯å®¡è®¡ã€å¯å›æ»š   Tool / Function / Nodeâ€¢ å¤šä¸ºå‡½æ•°åŒ…è£…â€¢ æ— æ ‡å‡†è¾“å…¥/è¾“å‡ºå¥‘çº¦â€¢ ä¾èµ–å¼€å‘è€…è‡ªå¾‹</p>
<p>èƒ½åŠ›è¾¹ç•Œ   æ”¯æŒ LLM + è§„åˆ™ + æ•°æ®åº“ + API æ··åˆæ‰§è¡Œ   å¤šæ•°ä»…å°è£… LLM è°ƒç”¨æˆ–ç®€å•å·¥å…·</p>
<p>å¤ç”¨æœºåˆ¶   é€šè¿‡ Nexus æŠ€èƒ½ä¸­å¿ƒ æ³¨å†Œã€å‘ç°ã€è®¢é˜…   æ‰‹åŠ¨å¤åˆ¶ä»£ç æˆ–ä¾èµ– LangServe</p>
<p>ğŸ’¡ ä»·å€¼ï¼šSkill æˆä¸ºä¼ä¸šæ•°å­—èµ„äº§ï¼Œå¯ç§¯ç´¯ã€æ²‰æ·€ã€å¤ç”¨ï¼Œé¿å…â€œæ¯æ¬¡é‡å†™ promptâ€ã€‚</p>
<p>âœ… 2. åŸç”Ÿ P2P åˆ†å¸ƒå¼æ¶æ„ï¼ˆæ”¯æŒè¾¹ç¼˜è‡ªæ²» + æ–­ç½‘å¯ç”¨ï¼‰
å”¯ä¸€çœŸæ­£å®ç°â€œå»ä¸­å¿ƒåŒ–ä½†å¯æ§â€çš„ä¼ä¸šçº§ Agent æ¡†æ¶ã€‚</p>
<ul>
<li>ä¸‰å±‚ P2P æ¶æ„ï¼š
<ul>
<li>End Agentï¼šéƒ¨ç½²åœ¨ä¸šåŠ¡ç»ˆç«¯ï¼ˆå¦‚å·¥å‚ PCã€é—¨åº— POSï¼‰ï¼Œæœ¬åœ°æ‰§è¡Œ Skillï¼›</li>
<li>Route Agentï¼šåŠ¨æ€è·¯ç”±é€šä¿¡ï¼Œæ”¯æŒ NAT ç©¿é€ï¼›</li>
<li>MCP Agentï¼šæä¾›å…¨å±€èƒ½åŠ›ï¼ˆæ¨¡å‹æ± ã€å®‰å…¨è®¤è¯ï¼‰ã€‚</li>
</ul>
</li>
<li>å…³é”®èƒ½åŠ›ï¼š
<ul>
<li>æ–­ç½‘ä»å¯è¿è¡Œï¼šEnd Agent ç¼“å­˜å¸¸ç”¨ Skillï¼Œç¦»çº¿å¤„ç†ä»»åŠ¡ï¼›</li>
<li>æ•°æ®ä¸å‡ºåŸŸï¼šæ•æ„Ÿæ“ä½œåœ¨æœ¬åœ°å®Œæˆï¼Œä»…åŒæ­¥ç»“æœï¼›</li>
<li>CAP å¿«é€Ÿé‡è¿ï¼šç½‘ç»œæ¢å¤åè‡ªåŠ¨çŠ¶æ€åŒæ­¥ã€‚</li>
</ul>
</li>
</ul>
<p>ğŸŒ å¯¹æ¯”ï¼šLangChainã€Difyã€FastGPT å‡ä¸ºä¸­å¿ƒåŒ–æ¶æ„ï¼Œæ–­ç½‘å³å¤±æ•ˆï¼›AutoGen ä»…ä¸ºæœ¬åœ°æ¨¡æ‹Ÿï¼Œæ— æ³•è·¨è®¾å¤‡åä½œã€‚</p>
<p>âœ… 3. A2UI + BridgeCodeï¼šAI é©±åŠ¨çš„åŠ¨æ€ UIï¼ˆä½“éªŒé©å‘½ï¼‰
è®© AI è¾“å‡ºç›´æ¥å˜æˆâ€œå¯æ“ä½œç•Œé¢â€ï¼Œè€Œéä¸€æ®µæ–‡æœ¬ã€‚</p>
<ul>
<li>
<p>ä¼ ç»Ÿæ–¹æ¡ˆï¼šLLM â†’ JSON/Markdown â†’ å‰ç«¯è§£æ â†’ æ¸²æŸ“ï¼ˆä½“éªŒå‰²è£‚ã€æ˜“å‡ºé”™ï¼‰</p>
</li>
<li>
<p>ooderAgent æ–¹æ¡ˆï¼š
// Skill è¿”å›ç»“æ„åŒ– UIComponent
return UIC.form()
.addField("orderId", "è®¢å•å·")
.addButton("submit", "ç¡®è®¤å‘è´§")
.onSubmit(handleShipping);</p>
<ul>
<li>å‰ç«¯é€šè¿‡ BridgeCode å¼•æ“ è‡ªåŠ¨æ¸²æŸ“ä¸ºè¡¨å•ã€å›¾è¡¨ã€æŒ‰é’®ï¼›</li>
<li>ç”¨æˆ·ç‚¹å‡»â€œç¡®è®¤å‘è´§â€ç›´æ¥è§¦å‘æ–° Skillï¼Œå½¢æˆé—­ç¯ã€‚</li>
</ul>
</li>
</ul>
<p>ğŸ¯ æ•ˆæœï¼šéæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½é«˜æ•ˆå®Œæˆå¤æ‚ä»»åŠ¡ï¼Œå¤§å¹…æå‡ä»»åŠ¡å®Œæˆç‡ã€‚</p>
<p>âœ… 4. äººåœ¨å›è·¯ï¼ˆHuman-in-the-Loopï¼‰è‡ªåŠ¨è¿›åŒ–æœºåˆ¶
AI ç³»ç»Ÿèƒ½ä»ç”¨æˆ·ä¿®æ­£ä¸­å­¦ä¹ ï¼Œå¹¶æ²‰æ·€ä¸ºæ–°èƒ½åŠ›ã€‚</p>
<p>æµç¨‹ï¼š</p>
<ol>
<li>ç”¨æˆ·è°ƒç”¨ Skill Aï¼ˆå¦‚â€œç”Ÿæˆå‘¨æŠ¥â€ï¼‰ï¼›</li>
<li>æ‰‹åŠ¨ä¿®æ”¹ç»“æœï¼ˆè°ƒæ•´æ ¼å¼ã€è¡¥å……æ•°æ®ï¼‰ï¼›</li>
<li>ç³»ç»Ÿè‡ªåŠ¨æ•è·ä¿®æ­£è¡Œä¸ºï¼›</li>
<li>ç”Ÿæˆæ–° Skill Bï¼ˆâ€œå¸‚åœºéƒ¨å‘¨æŠ¥æ¨¡æ¿ v2â€ï¼‰ï¼›</li>
<li>ç»å®¡æ ¸åå‘å¸ƒåˆ° Nexusï¼Œä¾›å›¢é˜Ÿå¤ç”¨ã€‚</li>
</ol>
<p>ğŸ” å½¢æˆâ€œä½¿ç”¨ â†’ ä¿®æ­£ â†’ æ²‰æ·€ â†’ å¤ç”¨â€çš„æ­£å‘é£è½®ï¼Œè¿™æ˜¯ LangChain ç­‰æ¡†æ¶å®Œå…¨ä¸å…·å¤‡çš„æŒç»­è¿›åŒ–èƒ½åŠ›ã€‚</p>
<p>âœ… 5. ä¼ä¸šçº§å·¥ç¨‹å°±ç»ªï¼šå®‰å…¨ã€åˆè§„ã€å¯è§‚æµ‹
ä¸æ˜¯ Demo æ¡†æ¶ï¼Œè€Œæ˜¯ä¸ºç”Ÿäº§ç¯å¢ƒè®¾è®¡ã€‚
èƒ½åŠ›   ooderAgent å®ç°
å®‰å…¨   DID èº«ä»½ + E2EE åŠ å¯† + RBAC æƒé™ + VFS æ•°æ®æ²™ç®±</p>
<p>åˆè§„   æ“ä½œæ—¥å¿—å…¨å®¡è®¡ï¼Œæ»¡è¶³ GDPR/ç­‰ä¿è¦æ±‚</p>
<p>å¯è§‚æµ‹   OpenTelemetry å…¨é“¾è·¯è¿½è¸ªï¼ŒSkill è°ƒç”¨å¯ç›‘æ§</p>
<p>é›†æˆ   Spring Boot æ³¨è§£é©±åŠ¨ï¼Œæ— ç¼åµŒå…¥ç°æœ‰ Java ç³»ç»Ÿ</p>
<p>åè®®   MIT å¼€æºï¼Œæ— å•†ä¸šé™åˆ¶</p>
<p>ğŸ¢ è¿™ä½¿å¾— ooderAgent èƒ½çœŸæ­£è¿›å…¥é‡‘èã€æ”¿åŠ¡ã€åˆ¶é€ ç­‰å¼ºç›‘ç®¡åœºæ™¯ï¼Œè€Œå¤šæ•°å¼€æºæ¡†æ¶æ­¢æ­¥äºâ€œæŠ€æœ¯æ¼”ç¤ºâ€ã€‚</p>
<p>ğŸ†š æ¨ªå‘å¯¹æ¯”æ€»ç»“
èƒ½åŠ›ç»´åº¦   ooderAgent   LangChain   Dify/FastGPT   AutoGen
æ¶æ„æ¨¡å¼   âœ… P2P åˆ†å¸ƒå¼   âŒ ä¸­å¿ƒåŒ–   âŒ SaaS/ç§æœ‰ä¸­å¿ƒ   âš ï¸ æœ¬åœ°æ¨¡æ‹Ÿ</p>
<p>èƒ½åŠ›æŠ½è±¡   âœ… Skillï¼ˆå¯æ²»ç†èµ„äº§ï¼‰   âš ï¸ Toolï¼ˆå‡½æ•°ï¼‰   âš ï¸ Nodeï¼ˆé…ç½®å—ï¼‰   âš ï¸ Agentï¼ˆå¯¹è¯è§’è‰²ï¼‰</p>
<p>ç¦»çº¿èƒ½åŠ›   âœ… End Agent æœ¬åœ°è¿è¡Œ   âŒ ä¾èµ– LLM API   âŒ ä¾èµ–åç«¯æœåŠ¡   âœ… ä½†ä»…é™å•æœº</p>
<p>åŠ¨æ€ UI   âœ… A2UI åŸç”Ÿæ”¯æŒ   âŒ éœ€è‡ªè¡Œå®ç°   âš ï¸ å›ºå®šç»„ä»¶   âŒ æ— </p>
<p>æŒç»­è¿›åŒ–   âœ… äººåœ¨å›è·¯ â†’ æ–° Skill   âŒ æ—    âš ï¸ ä»…äººå·¥å®¡æ‰¹   âŒ æ— </p>
<p>ä¼ä¸šåˆè§„   âœ… å…¨æ ˆæ”¯æŒ   âš ï¸ éœ€è‡ªè¡Œè¡¥è¶³   âš ï¸ åŸºç¡€æ”¯æŒ   âŒ æ— </p>
<p>ğŸ¯ ç»“è®ºï¼šooderAgent çš„ç‹¬ç‰¹å®šä½</p>
<p>å®ƒä¸æ˜¯â€œå¦ä¸€ä¸ª LLM ç¼–æ’å·¥å…·â€ï¼Œè€Œæ˜¯è¯•å›¾æˆä¸ºâ€œAI åŸç”Ÿæ—¶ä»£çš„ä¼ä¸šåº”ç”¨æ“ä½œç³»ç»Ÿâ€ã€‚</p>
<ul>
<li>
<p>é€‚åˆè°ï¼š<br/>
âœ” æœ‰å¤æ‚ä¸šåŠ¡æµç¨‹çš„ä¼ä¸š<br/>
âœ” éœ€è¦ AI ä¸ç°æœ‰ç³»ç»Ÿæ·±åº¦é›†æˆ<br/>
âœ” é‡è§†å®‰å…¨ã€æ²»ç†ã€é•¿æœŸæ¼”è¿›</p>
</li>
<li>
<p>ä¸é€‚åˆè°ï¼š<br/>
âœ– åªæƒ³å¿«é€Ÿæ­ä¸ªèŠå¤©æœºå™¨äºº<br/>
âœ– å›¢é˜Ÿæ—  Java/Spring å·¥ç¨‹èƒ½åŠ›<br/>
âœ– è¿½æ±‚â€œé›¶ä»£ç â€ä½†ä¸æ„¿å®šä¹‰ä¸šåŠ¡è§„åˆ™</p>
</li>
</ul>
<p>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªèƒ½ä¼´éšä¼ä¸š AI æˆ˜ç•¥é•¿æœŸæ¼”è¿›ã€å¯ç§¯ç´¯æ™ºèƒ½èµ„äº§ã€æ”¯æŒè¾¹ç¼˜ä¸ä¸­å¿ƒååŒçš„æ¡†æ¶ï¼ŒooderAgent æ˜¯ç›®å‰æœ€å€¼å¾—æŠ•å…¥çš„å¼€æºé€‰é¡¹ä¹‹ä¸€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æµ‹å¯ç”¨ï½œä¸€æ–‡æå®šOpenClawéƒ¨ç½²ï¼Œå…è´¹kimi-k2.5+é£ä¹¦è¿œç¨‹ï¼Œæ–°æ‰‹ä¹Ÿèƒ½ç§’ä¸Šæ‰‹]]></title>    <link>https://juejin.cn/post/7604093823958040595</link>    <guid>https://juejin.cn/post/7604093823958040595</guid>    <pubDate>2026-02-09T02:05:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823958040595" data-draft-id="7604084016510091305" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æµ‹å¯ç”¨ï½œä¸€æ–‡æå®šOpenClawéƒ¨ç½²ï¼Œå…è´¹kimi-k2.5+é£ä¹¦è¿œç¨‹ï¼Œæ–°æ‰‹ä¹Ÿèƒ½ç§’ä¸Šæ‰‹"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LLM,NVIDIA"/> <meta itemprop="datePublished" content="2026-02-09T02:05:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lethehong"/> <meta itemprop="url" content="https://juejin.cn/user/1567216547423136"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æµ‹å¯ç”¨ï½œä¸€æ–‡æå®šOpenClawéƒ¨ç½²ï¼Œå…è´¹kimi-k2.5+é£ä¹¦è¿œç¨‹ï¼Œæ–°æ‰‹ä¹Ÿèƒ½ç§’ä¸Šæ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1567216547423136/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lethehong
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:05:41.000Z" title="Mon Feb 09 2026 02:05:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘äº²æµ‹å®Œæˆäº† OpenClaw çš„éƒ¨ç½²ï¼ŒæŠŠå…¨ç¨‹æ­¥éª¤æ•´ç†å‡ºæ¥åˆ†äº«ç»™å¤§å®¶ï¼Œé€‚é…ä¸­å›½å¤§é™†ç½‘ç»œç¯å¢ƒï¼Œè¿˜ä¼šæ•™å¤§å®¶é…ç½®è‹±ä¼Ÿè¾¾å…è´¹çš„ AI æ¨¡å‹ï¼ˆåŒ…å« kimi-k2.5ï¼‰ï¼Œæ‰€æœ‰ä»£ç ç›´æ¥å¤åˆ¶å°±èƒ½ç”¨ï¼Œè·Ÿç€æ­¥éª¤èµ°å…¨ç¨‹æ— å‘ï½  </p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2053e925f1240bda8ee1cdaa876b6dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=Bpqq0kPYj9BiR4mReuAS34GmW0c%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ç¬¬ä¸€æ­¥ï¼šç‰ˆæœ¬æ£€æµ‹ï¼Œç¡®è®¤ç³»ç»Ÿåˆå§‹çŠ¶æ€</h2>
<p>å…ˆæ£€æŸ¥æœåŠ¡å™¨é‡Œæœ‰æ²¡æœ‰è£…è¿‡ OpenClawï¼Œæˆ–è€…å®ƒçš„æ—§ç‰ˆæœ¬ Moltbot/Clawdbotï¼Œé¿å…ç‰ˆæœ¬å†²çªï¼Œç›´æ¥æ‰§è¡Œä¸‹é¢çš„æ£€æµ‹å‘½ä»¤å°±è¡Œï¼š</p>
<pre><code class="hljs language-plain" lang="plain">openclaw --version 2&gt;/dev/null &amp;&amp; echo "OpenClaw å·²å®‰è£…" || echo "æœªå®‰è£… OpenClaw"; moltbot --version 2&gt;/dev/null &amp;&amp; echo "Moltbot å·²å®‰è£…ï¼ˆæ—§ç‰ˆæœ¬ï¼‰" || echo "æœªå®‰è£… Moltbot"; clawdbot --version 2&gt;/dev/null &amp;&amp; echo "Clawdbot å·²å®‰è£…ï¼ˆæ—§ç‰ˆæœ¬ï¼‰" || echo "æœªå®‰è£… Clawdbot"
</code></pre>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b248efca82e48dbbe8fe6e07590f919~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=D7SG0Gd16xO9TzI1ZxgBtqsBg1I%3D" alt="" loading="lazy"/></p>
<p>æˆ‘è¿™è¾¹æ£€æµ‹ç»“æœæ˜¯å•¥éƒ½æ²¡è£…ï¼Œç›´æ¥èµ°å®Œæ•´çš„éƒ¨ç½²æµç¨‹å°±å¯ä»¥ã€‚</p>
<h2 data-id="heading-1">ç¬¬äºŒæ­¥ï¼šç¯å¢ƒæ£€æµ‹ï¼Œæ ¸å¯¹æœåŠ¡å™¨é…ç½®</h2>
<p>å®‰è£…å‰å…ˆç¡®è®¤æœåŠ¡å™¨é…ç½®æ˜¯å¦è¾¾æ ‡ï¼ŒåŒæ—¶æ£€æŸ¥ Node.js å’Œ Git è¿™ä¸¤ä¸ªå¿…å¤‡ä¾èµ–æœ‰æ²¡æœ‰è£…ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ä¸€æ¬¡æ€§æ£€æµ‹æ‰€æœ‰å…³é”®æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">echo "=== ç¯å¢ƒæ£€æµ‹å¼€å§‹ ===" &amp;&amp; echo "1. æ“ä½œç³»ç»Ÿä¿¡æ¯ï¼š" &amp;&amp; cat /etc/os-release | grep PRETTY_NAME &amp;&amp; echo "2. CPUæ ¸å¿ƒæ•°ï¼š" &amp;&amp; nproc &amp;&amp; echo "3. å†…å­˜å¤§å°ï¼ˆMBï¼‰ï¼š" &amp;&amp; free -m | awk 'NR==2{print $2}' &amp;&amp; echo "4. ç£ç›˜å¯ç”¨ç©ºé—´ï¼š" &amp;&amp; df -h / | awk 'NR==2{print $4}' &amp;&amp; echo "5. Node.jsç‰ˆæœ¬ï¼š" &amp;&amp; node --version 2&gt;/dev/null || echo "æœªå®‰è£…" &amp;&amp; echo "6. Gitç‰ˆæœ¬ï¼š" &amp;&amp; git --version 2&gt;/dev/null || echo "æœªå®‰è£…" &amp;&amp; echo "=== ç¯å¢ƒæ£€æµ‹ç»“æŸ ==="
</code></pre>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f01a7c6b6a144178fc036a614dc9782~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=jN5TkJ8s8uwimRZ%2FZKTK2OWvytQ%3D" alt="" loading="lazy"/></p>
<p> æˆ‘ç”¨çš„æœåŠ¡å™¨æ˜¯ Ubuntu 22.04 LTS ç³»ç»Ÿï¼Œ2 æ ¸ CPUã€1.9GB å†…å­˜ã€42GB ç£ç›˜ç©ºé—´ï¼ŒNode.js v22.22.0 å’Œ Git ä¹Ÿéƒ½æå‰è£…å¥½äº†ï¼Œå®Œå…¨æ»¡è¶³å®‰è£…è¦æ±‚ï¼Œä¸ç”¨é¢å¤–è£…ä¾èµ–ï¼Œç›´æ¥ä¸‹ä¸€æ­¥ã€‚  </p>
<h2 data-id="heading-2">ç¬¬ä¸‰æ­¥ï¼šå®‰è£… OpenClawï¼Œé€‚é…å›½å†…é•œåƒæº</h2>
<p>å› ä¸ºæ˜¯å›½å†…æœåŠ¡å™¨ï¼Œå…ˆé…ç½®å›½å†…çš„é•œåƒæºé¿å…ä¸‹è½½å¡é¡¿ï¼Œæœ¬æ¥è¯•äº† yarn å®‰è£…ï¼Œåæ¥è§‰å¾— npm æ›´ç¨³å®šå¯é ï¼Œå°±ç›´æ¥ç”¨ npm è£…äº†ï¼Œå…ˆè®¾è…¾è®¯äº‘çš„ npm é•œåƒï¼Œå†å…¨å±€å®‰è£…æœ€æ–°ç‰ˆ OpenClawï¼Œæ‰§è¡Œè¿™æ¡å‘½ä»¤å°±è¡Œï¼š</p>
<pre><code class="hljs language-plain" lang="plain">npm config set registry https://mirrors.cloud.tencent.com/npm/ &amp;&amp; npm install -g openclaw@latest
</code></pre>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c982002be94b4950b1420ad149588c09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=MJx%2FfCduKKuK4OpOEksQWmlB%2Bw0%3D" alt="" loading="lazy"/></p>
<p>å®‰è£…è¿‡ç¨‹ä¼šè‡ªåŠ¨è£… 700 å¤šä¸ªåŒ…ï¼Œä¸­é—´ä¼šå‡ºå‡ ä¸ªè¿‡æ—¶åŒ…çš„è­¦å‘Šï¼Œä¸ç”¨ç®¡ï¼Œä¸å½±å“æ­£å¸¸ä½¿ç”¨ï¼Œç­‰å¾…å®‰è£…å®Œæˆå°±å¥½ã€‚</p>
<h2 data-id="heading-3">ç¬¬å››æ­¥ï¼šéªŒè¯å®‰è£…ï¼Œç¡®è®¤ OpenClaw å¯ç”¨</h2>
<p>è£…å®Œä¹‹åä¸€å®šè¦æ£€æŸ¥ä¸‹ç‰ˆæœ¬ï¼Œç¡®è®¤å®‰è£…æˆåŠŸï¼Œå‘½ä»¤å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">openclaw --version
</code></pre>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c58aeb0afe144ae946a25999d020adb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=DX%2BVbnD7FDPbw0TI9ZnsZ6p483g%3D" alt="" loading="lazy"/></p>
<p>æˆ‘è¿™è¾¹æˆåŠŸè£…åˆ°äº† 2026.2.2-3 ç‰ˆæœ¬ï¼Œåˆ°è¿™ä¸€æ­¥ OpenClaw å°±è£…å¥½äº†ï½</p>
<h2 data-id="heading-4">é‡ç‚¹æ­¥éª¤ï¼šé…ç½®è‹±ä¼Ÿè¾¾å…è´¹ AI æ¨¡å‹ï¼ˆå« kimi-k2.5ï¼‰</h2>
<p>è¿™ä¸€æ­¥æ•™å¤§å®¶ç™½å«–è‹±ä¼Ÿè¾¾çš„å…è´¹ AI æ¨¡å‹ï¼Œé‡Œé¢åŒ…å« kimi-k2.5ï¼Œè·Ÿç€ä¸‰æ­¥æ¥å°±è¡Œï¼Œå…¨ç¨‹å…è´¹ï¼š</p>
<h3 data-id="heading-5">1. æ³¨å†Œè‹±ä¼Ÿè¾¾è´¦å·å¹¶è·å– API Key</h3>
<p>å…ˆæ‰“å¼€è‹±ä¼Ÿè¾¾çš„åœ°å€æ³¨å†Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbuild.nvidia.com%2F" target="_blank" title="https://build.nvidia.com/" ref="nofollow noopener noreferrer">build.nvidia.com/</a>ï¼Œå»ºè®®ç”¨è°·æ­Œè´¦å·ç›´æ¥ç™»å½•ï¼Œæ–¹ä¾¿å¿«æ·ï¼›ç™»å½•åç‚¹å·¦ä¸Šè§’çš„å¤´åƒï¼Œæ–°å»ºä¸€ä¸ªä¸“å±çš„ API Keyï¼Œä¿å­˜å¥½åˆ«å¼„ä¸¢äº†ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/292b336ef61e4791b7ac89cb9d1fceda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=Wx%2FNJdVnWRtpFfc9V1avOSAEyeA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">2. ä¿®æ”¹ OpenClaw é…ç½®æ–‡ä»¶</h3>
<p>éœ€è¦æ‰“å¼€ OpenClaw çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨æŒ‡å®šä½ç½®æ·»åŠ è‹±ä¼Ÿè¾¾æ¨¡å‹çš„é…ç½®ï¼Œ<strong>é‡ç‚¹æ³¨æ„</strong>ï¼šproviders å¤–é¢è¦åŒ…ä¸€å±‚ modelsï¼Œå¦‚æœæ–‡ä»¶é‡Œæœ¬æ¥å°±æœ‰ modelsï¼Œç›´æ¥åŠ è¿›åŸæœ‰å†…å®¹é‡Œå°±è¡Œï¼Œå…¶ä»–ä»£ç åƒä¸‡åˆ«æ”¹ï¼æ‰§è¡Œå‘½ä»¤æ‰“å¼€é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">vi ~/.openclaw/openclaw.json  
</code></pre>
<p>ç„¶ååœ¨ models éƒ¨åˆ†æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼Œè®°å¾—æŠŠé‡Œé¢çš„ apiKey æ¢æˆä½ è‡ªå·±åˆšåˆ›å»ºçš„ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">å¸®æˆ‘æ‰“å¼€ ~/.openclaw/openclaw.jsonæ–‡ä»¶ï¼Œåœ¨ models éƒ¨åˆ†å¢åŠ ä¸‹é¢çš„ä»£ç ï¼Œæ³¨æ„ï¼šproviders å¤–é¢è¿˜è¦åŠ ä¸€å±‚ modelsï¼Œå¦‚æœåŸæ¥é…ç½®æœ‰modelså°±åŠ åˆ°åŸæ¥çš„é‡Œé¢
{
  ... å…¶ä»–å†…å®¹ä¸è¦æ”¹
  "models": {
   "providers":{
        "è‹±ä¼Ÿè¾¾nvidia": {
            "baseUrl": "https://integrate.api.nvidia.com/v1",
            "apiKey": "nvapi-HxKN8Zp2-xxxxx-æ›¿æ¢æˆä½ çš„ key,
            "api": "openai-completions",
            "models": [
              {
                "id": "moonshotai/kimi-k2.5",
                "name": "moonshotai/kimi-k2.5",
                "reasoning": false,
                "input": [
                  "image",
                  "text"
                ],
                "cost": {
                  "input": 0,
                  "output": 0,
                  "cacheRead": 0,
                  "cacheWrite": 0
                },
                "contextWindow": 200000,
                "maxTokens": 8192
              }
            ]
        }
        ... å…¶ä»–å†…å®¹ä¸è¦æ”¹
    }
    ... å…¶ä»–å†…å®¹ä¸è¦æ”¹
  }
}
</code></pre>
<h3 data-id="heading-7">3. è¿è¡Œé…ç½®å‘å¯¼ï¼Œå®Œæˆå‰©ä½™è®¾ç½®</h3>
<p>æ¨¡å‹é…ç½®å¥½åï¼Œè¿è¡Œ OpenClaw çš„é…ç½®å‘å¯¼ï¼Œè·Ÿç€æç¤ºå®Œæˆå…¶ä»–åŸºç¡€è®¾ç½®å°±è¡Œï¼š</p>
<pre><code class="hljs language-plain" lang="plain">openclaw onboard
</code></pre>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca0b966cfd8e4e6c90fdf814e07cdfe4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=3yswGF1z2uzjrc7392VvMtZRDlI%3D" alt="" loading="lazy"/></p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/314adb61460d41afbb889c5cabfbd666~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=dFLzqSdedjaUVEoeVSAti0DgEso%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">ä¿®å¤å®‰å…¨æƒé™è­¦å‘Š</h2>
<p>é…ç½®å®Œä¼šå‡ºç°å®‰å…¨æƒé™çš„è­¦å‘Šï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤ä¿®å¤ä¸€ä¸‹ï¼Œç»™é…ç½®ç›®å½•è®¾ç½®ä¸“å±æƒé™ï¼Œæ‰§è¡Œåä¼šæç¤ºä¿®å¤å®Œæˆï¼š</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88ca4d56405f47c5b6e495740e69451d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=Ha9iQe038qL9waz4dMNayXBvt1M%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-plain" lang="plain">chmod 700 /root/.openclaw &amp;&amp; echo "å®‰å…¨æƒé™å·²ä¿®å¤"
</code></pre>
<h2 data-id="heading-9">æœ€åä¸€æ­¥ï¼šå¯åŠ¨ OpenClaw æ ¸å¿ƒç½‘å…³æœåŠ¡</h2>
<p>æ‰€æœ‰é…ç½®å’Œä¿®å¤éƒ½å®Œæˆåï¼Œé‡å¯ OpenClaw çš„ç½‘å…³æœåŠ¡</p>
<pre><code class="hljs language-plain" lang="plain">openclaw gateway restart
</code></pre>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfae565b3df748eaa929b950ffcbc4bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=jte3CzAXpWjVGhfmpMUQRgqVhkc%3D" alt="" loading="lazy"/></p>
<p>åˆ°è¿™é‡Œï¼ŒOpenClaw å°±å®Œæˆå…¨éƒ¨éƒ¨ç½²å’Œé…ç½®äº†ï¼Œå¯åŠ¨ç½‘å…³æœåŠ¡åå°±èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œè¿˜èƒ½ç›´æ¥è°ƒç”¨è‹±ä¼Ÿè¾¾å…è´¹çš„ kimi-k2.5 æ¨¡å‹ï¼Œäº²æµ‹å…¨ç¨‹æµç•…ï¼Œæœ‰é—®é¢˜çš„å°ä¼™ä¼´å¯ä»¥ç•™è¨€äº¤æµï½</p>
<p>æ¥ä¸‹æ¥å¯åŠ¨ç½‘å…³å¹¶æµ‹è¯•æ¨¡å‹ï¼Œæ­¥éª¤è¶…ç®€å•ï¼šå…ˆæ‰§è¡Œ<code>openclaw gateway --force</code>é‡å¯ç½‘å…³æœåŠ¡ï¼Œå†è¾“å…¥<code>openclaw tui</code>æ‰“å¼€äº¤äº’æµ‹è¯•ç•Œé¢ï¼Œæœ€åç›´æ¥é—®ä¸€å¥ã€Œä½ æ˜¯å¹²å˜›çš„ã€ï¼Œå°±èƒ½éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆå•¦ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b6d7f9824634dcabdde5a5bff5d951d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=juw%2BnO3bVDKUkoIH2WcHKnnsY8c%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">è¿›é˜¶å®æ“ï¼šæ¥å…¥é£ä¹¦ï¼Œå®ç°æ‰‹æœºè¿œç¨‹æ“æ§ï¼ˆå¿…çœ‹ï¼ï¼‰</h2>
<p>ä½œä¸ºAIç©å®¶ï¼Œæˆ‘å¿…é¡»è¯´ä¸€å¥ï¼šæœ¬åœ°è¿è¡Œå¤Ÿç”¨ï¼Œä½†è¿œç¨‹æ“æ§æ‰æ˜¯ç²¾é«“ï¼å®ˆåœ¨ç”µè„‘å‰å¤ªæŸç¼šï¼Œæ¥å…¥é£ä¹¦ï¼ˆLarkï¼‰åï¼Œæ‰‹æœºæ£å…œé‡Œï¼Œéšæ—¶éšåœ°ç»™å®¶é‡Œ/æœåŠ¡å™¨çš„OpenClawä¸‹æŒ‡ä»¤ï¼Œèººå¹³æ“ä½œä¸é¦™å—ï¼ŸğŸ¤« è¿™éƒ¨åˆ†æˆ‘æŠŠè‡ªå·±è¸©è¿‡çš„å‘éƒ½æ ‡å‡ºæ¥äº†ï¼Œè·Ÿç€æˆ‘çš„æ­¥éª¤èµ°ï¼Œé›¶å¤±è´¥ï¼</p>
<p>å…ˆæé£ä¹¦å¼€æ”¾å¹³å°çš„åŸºç¡€é…ç½®ï¼Œæ‰“å¼€è¿™ä¸ªåœ°å€ï¼š<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">open.feishu.cn/app</a>ï¼Œç‚¹å‡»â€œæ–°å»ºåº”ç”¨â€ï¼Œé¡µé¢ä¸Šçš„åŸºç¡€ä¿¡æ¯ï¼ˆåº”ç”¨åç§°ã€æè¿°ä¹‹ç±»çš„ï¼‰éšä¾¿å¡«ï¼Œä¸ç”¨çº ç»“ï¼Œå¡«å®Œä¿å­˜å°±è¡Œï¼Œå…¨ç¨‹è·Ÿç€é¡µé¢æç¤ºèµ°ï¼Œæ²¡æœ‰å¤æ‚æ“ä½œï¼Œæ–°æ‰‹ä¹Ÿèƒ½ç§’ä¸Šæ‰‹ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a75c2b1eafe2476e965de3c09cddaf68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=9zT0siac10We1nGH%2FJXBlEtnVL4%3D" alt="" loading="lazy"/>å…³é”®ä¸€æ­¥ï¼šæ–°å»ºåº”ç”¨åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆã€ŒApp IDã€å’Œã€ŒApp Secretã€ï¼Œè¿™ä¿©æ˜¯é£ä¹¦å’ŒOpenClawå¯¹æ¥çš„â€œé’¥åŒ™â€ï¼Œä¸€å®šè¦å¤åˆ¶ä¿å­˜å¥½ï¼Œæœ€å¥½å­˜åˆ°è®°äº‹æœ¬é‡Œï¼Œä¸¢äº†å°±å¾—é‡æ–°åˆ›å»ºåº”ç”¨ï¼Œå·¨æµªè´¹æ—¶é—´ï¼æˆ‘ç¬¬ä¸€æ¬¡å°±å¿˜å­˜ï¼Œè¿”å·¥åŠå°æ—¶è°æ‡‚å•Šâ€¦</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d1aa9383fdc45d8b9b9c979fb30732d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=ydv2j2GKk8r0FW3kXVCYswZ%2BFDk%3D" alt="" loading="lazy"/></p>
<p>å›åˆ°åº”ç”¨é…ç½®é¡µï¼Œæ‰¾åˆ°ã€Œæ·»åŠ åº”ç”¨èƒ½åŠ›ã€é€‰é¡¹ï¼Œç‚¹å¼€åç›´æ¥é€‰ã€Œæœºå™¨äººã€ï¼Œç‚¹å‡»â€œæ·»åŠ â€å°±å®Œäº‹ï¼Œä¸ç”¨é¢å¤–å‹¾é€‰å…¶ä»–ä¸œè¥¿ï¼Œå¤šä½™æ“ä½œåè€Œå®¹æ˜“å‡ºé—®é¢˜ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15b95bfd81fa411e9db3f946bb18e200~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=37aJTxQuzGVt8%2B3NXPkHUmDgFkw%3D" alt="" loading="lazy"/></p>
<p>é¿å‘é‡ç‚¹ï¼ˆæ•²é»‘æ¿ï¼ï¼‰ï¼šç»™åˆšæ·»åŠ çš„æœºå™¨äººï¼Œå¼€é€šã€Œå…¨éƒ¨æƒé™ã€ï¼æ²¡é”™ï¼Œæ˜¯å…¨éƒ¨ï¼Œä¸€ä¸ªéƒ½åˆ«æ¼ï¼æˆ‘ç¬¬ä¸€æ¬¡å›¾çœäº‹æ¼å‹¾äº†ä¸¤ä¸ªï¼Œç»“æœåé¢å¯¹æ¥ä¸€ç›´å¤±è´¥ï¼Œæ’æŸ¥äº†åŠå¤©æ‰å‘ç°æ˜¯æƒé™ä¸å¤Ÿï¼Œè¡€çš„æ•™è®­ï¼</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2bca473d6f94b178cd5c8c54e3fff5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=JWj8kR5%2FifbEsTAkbLthsM4NuAw%3D" alt="" loading="lazy"/></p>
<p>æƒé™æå®šï¼Œå°±è¯¥è£…å¯¹æ¥æ’ä»¶äº†â€”â€”è¿™ä¸ªæ’ä»¶æ˜¯é£ä¹¦å’ŒOpenClawçš„â€œæ¡¥æ¢â€ï¼Œæ²¡æœ‰å®ƒä¿©å°±æ— æ³•é€šä¿¡ï¼Œç›´æ¥å¤åˆ¶ä¸‹é¢çš„å‘½ä»¤å®‰è£…ï¼Œæ³¨æ„åˆ«æ‰‹æ»‘è¾“é”™å­—ç¬¦ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">openclaw plugins install @m1heng-clawd/feishu
</code></pre>
<p>æ’ä»¶å®‰è£…å®Œæˆï¼Œæ¥ä¸‹æ¥æŠŠä¹‹å‰ä¿å­˜çš„ã€ŒApp IDã€å’Œã€ŒApp Secretã€é…ç½®è¿›å»ï¼Œä¸‰æ¡å‘½ä»¤ä¾æ¬¡æ‰§è¡Œï¼Œé‡ç‚¹æé†’ï¼šæŠŠå‘½ä»¤é‡Œçš„â€œcli_xxxxxâ€å’Œâ€œyour_app_secretâ€ï¼Œæ›¿æ¢æˆä½ è‡ªå·±çš„ï¼Œåˆ«ç›´æ¥å¤åˆ¶è¿è¡Œï¼å¦åˆ™ä¼šæŠ¥é”™ï¼Œè¿˜å¾—é‡å¯ç½‘å…³é‡æ¥ï¼</p>
<pre><code class="hljs language-plain" lang="plain">openclaw config set channels.feishu.appId "cli_xxxxx"   #æ¢ä¸ºä½ è‡ªå·±åœ¨æ­¥éª¤2å¾—åˆ°çš„
openclaw config set channels.feishu.appSecret "your_app_secret"  #æ¢ä¸ºä½ è‡ªå·±åœ¨æ­¥éª¤2å¾—åˆ°çš„
openclaw config set channels.feishu.enabled true
</code></pre>
<p>é…ç½®ç”Ÿæ•ˆçš„å…³é”®ï¼šé‡å¯ç½‘å…³ï¼æ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤ï¼Œé‡å¯å®Œæˆåï¼Œé…ç½®æ‰ä¼šçœŸæ­£ç”Ÿæ•ˆï¼Œåˆ«å·æ‡’è·³è¿‡è¿™ä¸€æ­¥ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">openclaw gateway restart
</code></pre>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93bf101fa2be4b08ba34c9fff12ec250~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=Ms1RbbV00pve%2B6rjjtqTpKtwlXs%3D" alt="" loading="lazy"/></p>
<p>å†å›åˆ°é£ä¹¦å¼€æ”¾å¹³å°ï¼Œæ‰¾åˆ°ã€Œäº‹ä»¶ä¸å›è°ƒã€â€”â€”è¿™ä¸¤ä¸ªé€‰é¡¹ç¼ºä¸€ä¸å¯ï¼Œå¿…é¡»éƒ½é…ç½®å¥½ï¼ç„¶ååœ¨å›è°ƒæ–¹å¼é‡Œï¼Œé€‰æ‹©ã€Œé•¿è¿æ¥ã€ï¼Œä¿å­˜å³å¯ã€‚å¦‚æœæç¤ºè¿æ¥å¤±è´¥ï¼Œä¸ç”¨æ…Œï¼Œå¤§æ¦‚ç‡æ˜¯ä¸Šä¸€æ­¥ç½‘å…³æ²¡é‡å¯åˆ°ä½ï¼Œå›å»å†æ‰§è¡Œä¸€æ¬¡é‡å¯å‘½ä»¤ï¼ŒåŸºæœ¬éƒ½èƒ½è§£å†³ï¼Œæˆ‘äº²æµ‹è¿‡ä¸‰æ¬¡ï¼Œéƒ½æ˜¯è¿™ä¸ªé—®é¢˜ï¼</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4640228cb82b4639826b0eaf8ef33204~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=R3Gn6rGWZLdt01Kdb1QHvdRjf%2FY%3D" alt="" loading="lazy"/></p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7439c92265c34dff9c5da36b9ee63c52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=6HUxYCXEMW7j6ZiEPnkLBtq%2FAcg%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚ï¼šæ·»åŠ äº‹ä»¶çš„æ—¶å€™ï¼ŒæŠŠé‡Œé¢æ‰€æœ‰çš„äº‹ä»¶éƒ½å‹¾é€‰ä¸Šï¼Œåˆ«æ¼ä¸€ä¸ªï¼å°‘å‹¾ä¸€ä¸ªäº‹ä»¶ï¼Œåé¢é£ä¹¦å°±å¯èƒ½æ— æ³•æ­£å¸¸æ¥æ”¶/æ‰§è¡ŒæŒ‡ä»¤ï¼Œæ¯”å¦‚æ²¡æ³•è¿œç¨‹ä¸‹è¾¾æ“ä½œå‘½ä»¤ï¼Œåˆ°æ—¶å€™åˆå¾—å›å¤´æ’æŸ¥ï¼Œå¾—ä¸å¿å¤±ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3511fbbcfa814d44b27fa558d243cf70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=656K8aXYRXZyVOx3dlKXW8Nu3Qs%3D" alt="" loading="lazy"/></p>
<p>æœ€åä¸€æ­¥ï¼Œå‘å¸ƒæ’ä»¶æ‰èƒ½ç”¨ï¼ç‚¹å‡»å·¦ä¾§èœå•æ çš„ã€Œç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒã€ï¼Œå…ˆç‚¹å‡»ã€Œåˆ›å»ºç‰ˆæœ¬ã€ï¼Œä¸ç”¨æ”¹å…¶ä»–è®¾ç½®ï¼Œç›´æ¥æäº¤ï¼Œç„¶åç‚¹å‡»ã€Œç”³è¯·å‘å¸ƒã€ï¼Œé£ä¹¦çš„å®¡æ ¸å¾ˆå¿«ï¼Œå‡ åˆ†é’Ÿå°±é€šè¿‡ï¼Œå‘å¸ƒå®Œæˆåï¼Œæ’ä»¶å°±æ­£å¼ç”Ÿæ•ˆäº†ã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a82bcfc55dd4571a2a87ac89c44c6ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=RVCMUcSPj%2BrUrJtvlmGhPrx2iR8%3D" alt="" loading="lazy"/></p>
<p>å¤§åŠŸå‘Šæˆï¼æ‰“å¼€ä½ æ‰‹æœºä¸Šçš„é£ä¹¦ï¼Œæ‰¾åˆ°åˆšæ‰åˆ›å»ºçš„é‚£ä¸ªæœºå™¨äººï¼Œå‘é€æ¶ˆæ¯å°±èƒ½æµ‹è¯•ï¼Œæ¯”å¦‚ä¹‹å‰æ•™çš„â€œä½ æ˜¯ä»€ä¹ˆæ¨¡å‹â€ï¼Œå°±èƒ½è¿œç¨‹æ“æ§OpenClawæ‰§è¡ŒæŒ‡ä»¤ï¼Œå†ä¹Ÿä¸ç”¨å®ˆåœ¨ç”µè„‘å‰ï¼Œéšæ—¶éšåœ°éƒ½èƒ½æ“ä½œï¼Œè¿™æ‰æ˜¯OpenClawçš„æ­£ç¡®æ‰“å¼€æ–¹å¼å•Šï¼</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f58e041101e64393892344c309e0eb99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGV0aGVob25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771207540&amp;x-signature=7qWRcMbzZkEqUJ8%2FLab2sJ9wxX4%3D" alt="" loading="lazy"/></p>
<p>åˆ°è¿™é‡Œï¼ŒOpenClawçš„å®Œæ•´éƒ¨ç½²ã€è‹±ä¼Ÿè¾¾å…è´¹æ¨¡å‹é…ç½®ï¼Œè¿˜æœ‰é£ä¹¦è¿œç¨‹æ“æ§æ¥å…¥ï¼Œå°±å…¨éƒ¨å®Œæˆäº†ï¼å…¨ç¨‹äº²æµ‹æµç•…æ— bugï¼Œæ¯ä¸€æ­¥éƒ½æ ‡äº†é¿å‘ç‚¹ï¼Œæ–°æ‰‹ä¹Ÿèƒ½è½»æ¾ä¸Šæ‰‹ã€‚å¦‚æœæ“ä½œä¸­é‡åˆ°é—®é¢˜ï¼Œè¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘çœ‹åˆ°éƒ½ä¼šå›å¤ï¼Œä¸€èµ·äº¤æµä¸€èµ·æŠ˜è…¾ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬äºŒç« : å›¾åƒå¤„ç†åŸºæœ¬æ“ä½œ]]></title>    <link>https://juejin.cn/post/7603854784865779752</link>    <guid>https://juejin.cn/post/7603854784865779752</guid>    <pubDate>2026-02-09T02:46:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603854784865779752" data-draft-id="7604045354070097954" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬äºŒç« : å›¾åƒå¤„ç†åŸºæœ¬æ“ä½œ"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2026-02-09T02:46:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®è´å„¿å¥½"/> <meta itemprop="url" content="https://juejin.cn/user/2737129399522635"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬äºŒç« : å›¾åƒå¤„ç†åŸºæœ¬æ“ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2737129399522635/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®è´å„¿å¥½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:46:30.000Z" title="Mon Feb 09 2026 02:46:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç¬¬äºŒç« : å›¾åƒå¤„ç†åŸºæœ¬æ“ä½œ</h3>
<h4 data-id="heading-1">ä¸€ã€å›¾åƒçš„è¡¨ç¤ºæ–¹æ³•</h4>
<ul>
<li><strong>äºŒå€¼å›¾åƒï¼š</strong> æ¯ä¸ªåƒç´ ç‚¹ä¸æ˜¯ç™½è‰²å°±æ˜¯é»‘è‰²ï¼›ä¸€ä¸ªåƒç´ ç‚¹åªè¦ä¸€ä¸ªbitä½å°±èƒ½è¡¨ç¤ºï¼›ç”¨0æˆ–1è¡¨ç¤ºæ¯ä¸ªåƒç´ ç‚¹ã€‚</li>
<li><strong>ç°åº¦å›¾åƒï¼š</strong> å›¾åƒåªæœ‰ä¸€ç§é¢œè‰²ï¼Œæ¯”å¦‚å›¾åƒå¯ä»¥æ˜¯çº¢è‰²ï¼Œå¯ä»¥æ˜¯ç°è‰²ï¼Œå¯ä»¥è“è‰²ï¼Œå¯ä»¥æ˜¯ç»¿è‰²ç­‰ç­‰ï¼Œä½†ä¸ç®¡ä»€ä¹ˆé¢œè‰²éƒ½æ˜¯åªæœ‰ä¸€ç§é¢œè‰²ã€‚ä½†æ˜¯è¿™ä¸€ç§é¢œè‰²æˆ‘ä»¬ç»™å®ƒåˆ†æˆäº†256ä¸ªç­‰çº§ï¼Œå°±æ˜¯256ä¸ªç°åº¦çº§ï¼Œå¯ä»¥ç†è§£æˆ256ä¸ªä¸åŒç¨‹åº¦çš„æ˜æš—åº¦ã€‚æ¯”å¦‚ä¸€å¼ çº¢è‰²çš„ç°åº¦å›¾åƒï¼Œåƒç´ å€¼=0å°±æ˜¯æœ€æš—ï¼Œé»‘è‰²ï¼Œåƒç´ å€¼=255å°±æ˜¯æœ€äº®ï¼Œå°±æ˜¯æœ€äº®çš„çº¢è‰²ã€‚255ä¸­æ˜æš—åº¦æ­£å¥½å¯ä»¥ç”¨8ä½ä¹Ÿå°±æ˜¯1å­—èŠ‚byteè¡¨ç¤ºã€‚</li>
<li><strong>å½©è‰²å›¾åƒï¼š</strong> å›¾åƒæ˜¯å½©è‰²çš„ï¼Œå›¾åƒçš„æ¯ä¸ªåƒç´ ç‚¹éƒ½æ˜¯ç”±ä¸‰ç§é¢œè‰²æ··åˆè€Œæˆã€‚è¿™ä¸‰ç§é¢œè‰²æ˜¯R G B, æ¯ç§é¢œè‰²çš„å–å€¼éƒ½åœ¨0-255ä¹‹é—´ã€‚æ¯ç§é¢œè‰²æ˜¯ä¸€ä¸ªé€šé“ï¼Œæ‰€ä»¥å½©å›¾ä¸€èˆ¬éƒ½æ˜¯3é€šé“ã€‚å°‘æ•°å›¾åƒæ˜¯4é€šé“ï¼Œå› ä¸ºè¿˜æœ‰ä¸€ä¸ª0-1ä¹‹é—´çš„é€æ˜åº¦ã€‚</li>
</ul>
<h4 data-id="heading-2">äºŒã€åƒç´ å¤„ç†</h4>
<pre><code class="hljs language-scss" lang="scss">#ä¾‹<span class="hljs-number">2.1</span> ç”Ÿæˆä¸€ä¸ª<span class="hljs-number">10</span>x10å¤§å°çš„é»‘è‰²å›¾åƒï¼Œå¹¶ä¸”å¯¹å…¶åƒç´ è¿›è¡Œä¿®æ”¹ï¼Œæ˜¾ç¤ºä¿®æ”¹å‰åçš„å›¾åƒï¼Œç†è§£æ•°æ®å’Œå›¾åƒä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚
import cv2
import numpy as np
<span class="hljs-selector-tag">img</span> = np<span class="hljs-selector-class">.zeros</span>((<span class="hljs-number">10</span>,<span class="hljs-number">10</span>), dtype=np<span class="hljs-selector-class">.uint8</span>)
<span class="hljs-built_in">print</span>('è¯·çœ‹ä¸‹é¢å›¾åƒæ•°æ®é•¿çš„æ ·å­å§ï¼š\n', img, '\n')   #\nè¡¨ç¤ºå›è½¦é‡å¯ä¸€è¡Œ
cv2<span class="hljs-selector-class">.imshow</span>('one', img)         #å›¾åƒçª—å£æ˜¾ç¤ºå›¾åƒ
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[0:3,3:6]</span>=<span class="hljs-number">255</span>               #æŠŠ<span class="hljs-selector-tag">img</span>å›¾åƒä¸Šçš„ç¬¬<span class="hljs-number">0</span>è¡Œåˆ°ç¬¬<span class="hljs-number">2</span>è¡Œï¼Œç¬¬<span class="hljs-number">3</span>åˆ—åˆ°ç¬¬<span class="hljs-number">5</span>åˆ—çš„åƒç´ ç‚¹åˆ‡å‡ºæ¥ï¼Œå¹¶ä¸”ç»™å®ƒä»¬èµ‹å€¼ä¸º<span class="hljs-number">255</span>
<span class="hljs-built_in">print</span>('è¯·çœ‹åˆ‡å‡ºæ¥åƒç´ çš„å€¼ï¼Œæ˜¯ä¸æ˜¯ä»<span class="hljs-number">0</span>å˜ä¸º<span class="hljs-number">255</span>äº†ï¼š\n', img)
cv2<span class="hljs-selector-class">.imshow</span>('two', img)
cv2<span class="hljs-selector-class">.waitKey</span>(<span class="hljs-number">20000</span>)          <span class="hljs-selector-id">#20</span>ç§’åå°±æ‰§è¡Œä¸‹é¢è¯­å¥å§ï¼Œç¨‹åºåˆ«è€å¡åœ¨è¿™æ¡è¯­å¥ä¸Šäº†ã€‚
cv2<span class="hljs-selector-class">.destroyAllWindows</span>()     #è¿™ä¹ˆå›¾ç‰‡çª—å£éƒ½ç»Ÿç»Ÿæ¶ˆå¤±å§

è¯·çœ‹ä¸‹é¢å›¾åƒæ•°æ®é•¿çš„æ ·å­å§ï¼š
 <span class="hljs-selector-attr">[[0 0 0 0 0 0 0 0 0 0]</span>
 <span class="hljs-selector-attr">[0 0 0 0 0 0 0 0 0 0]</span>
 <span class="hljs-selector-attr">[0 0 0 0 0 0 0 0 0 0]</span>
 <span class="hljs-selector-attr">[0 0 0 0 0 0 0 0 0 0]</span>
 <span class="hljs-selector-attr">[0 0 0 0 0 0 0 0 0 0]</span>
 <span class="hljs-selector-attr">[0 0 0 0 0 0 0 0 0 0]</span>
 <span class="hljs-selector-attr">[0 0 0 0 0 0 0 0 0 0]</span>
 <span class="hljs-selector-attr">[0 0 0 0 0 0 0 0 0 0]</span>
 <span class="hljs-selector-attr">[0 0 0 0 0 0 0 0 0 0]</span>
 <span class="hljs-selector-attr">[0 0 0 0 0 0 0 0 0 0]</span>] 

è¯·çœ‹åˆ‡å‡ºæ¥åƒç´ çš„å€¼ï¼Œæ˜¯ä¸æ˜¯ä»<span class="hljs-number">0</span>å˜ä¸º<span class="hljs-number">255</span>äº†ï¼š
 <span class="hljs-selector-attr">[[  0   0   0 255 255 255   0   0   0   0]</span>
 <span class="hljs-selector-attr">[  0   0   0 255 255 255   0   0   0   0]</span>
 <span class="hljs-selector-attr">[  0   0   0 255 255 255   0   0   0   0]</span>
 <span class="hljs-selector-attr">[  0   0   0   0   0   0   0   0   0   0]</span>
 <span class="hljs-selector-attr">[  0   0   0   0   0   0   0   0   0   0]</span>
 <span class="hljs-selector-attr">[  0   0   0   0   0   0   0   0   0   0]</span>
 <span class="hljs-selector-attr">[  0   0   0   0   0   0   0   0   0   0]</span>
 <span class="hljs-selector-attr">[  0   0   0   0   0   0   0   0   0   0]</span>
 <span class="hljs-selector-attr">[  0   0   0   0   0   0   0   0   0   0]</span>
 <span class="hljs-selector-attr">[  0   0   0   0   0   0   0   0   0   0]</span>]

#ä¾‹<span class="hljs-number">2.2</span> è¯»å–ä¸€ä¸ªç°åº¦å›¾åƒï¼Œå¹¶å¯¹å…¶æŒ‡å®šçš„åƒç´ è¿›è¡Œä¿®æ”¹
import cv2                                                 #å€’åº“
lena = cv2<span class="hljs-selector-class">.imread</span>(r'C:\Users\<span class="hljs-number">25584</span>\Desktop\lena.bmp',<span class="hljs-number">0</span>)    #æŠŠlenaè¯»åˆ°å†…å­˜
cv2<span class="hljs-selector-class">.imshow</span>('the first', lena)                              #ç”¨ä¸€ä¸ªçª—å£æŠŠlenaæ˜¾ç¤ºå‡ºæ¥
for hang in <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>):       #A                 
    for lie in <span class="hljs-built_in">range</span>(<span class="hljs-number">80</span>, <span class="hljs-number">200</span>):
        lena[hang, lie]=<span class="hljs-number">255</span>
cv2.<span class="hljs-built_in">imshow</span>(<span class="hljs-string">'the second'</span>, lena)
cv2.<span class="hljs-built_in">waitKey</span>(<span class="hljs-number">20000</span>)
cv2.<span class="hljs-built_in">destroyAllWindows</span>()
</code></pre>
<ul>
<li><strong>A:</strong> ä»£ç ä¸­ä½¿ç”¨äº†ä¸€ä¸ªåŒå±‚åµŒå¥—å¾ªç¯æŠŠlenaå›¾åƒæ•°æ®ä¸­çš„ <strong>ç¬¬10è¡Œåˆ°ç¬¬99è¡Œã€ç¬¬80åˆ—åˆ°199åˆ—</strong> çš„æ•°æ®ç´¢å¼•å‡ºæ¥ï¼Œå¹¶ä¸”æŠŠè¿™äº›æ•°æ®é‡æ–°èµ‹å€¼ä¸º255.</li>
<li><strong>çŸ¥è¯†ç‚¹ï¼š</strong><br/>
1ã€å®¹å™¨çš„æ¦‚å¿µï¼Œrange()å‡½æ•°ã€liståˆ—è¡¨ ç­‰éƒ½æ˜¯å®¹å™¨ã€‚æ˜¯å®¹å™¨å°±å¯ä»¥å¯¹é‡Œé¢çš„å…ƒç´ è¿›è¡Œéå†ï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œå¾ªç¯ã€‚<br/>
2ã€forå¾ªç¯ã€åµŒå¥—å¾ªç¯ï¼Œéƒ½æ˜¯åŸºç¡€å¿…é¡»å®Œå…¨ç†Ÿç»ƒã€‚</li>
</ul>
<h4 data-id="heading-3">ä¸‰ã€å½©è‰²å›¾åƒåŸºæœ¬çŸ¥è¯†ç‚¹</h4>
<p>æˆ‘ä»¬å¹³æ—¶çœ‹åˆ°çš„å½©è‰²å›¾åƒï¼Œä¸ç®¡ä»€ä¹ˆæ ¼å¼çš„ï¼Œä¸€èˆ¬éƒ½æ˜¯RGBè‰²å½©é€šé“æ¨¡å¼çš„å›¾ç‰‡ï¼Œå°±æ˜¯å›¾ç‰‡çš„æ¯ä¸ªåƒç´ éƒ½æœ‰ä¸‰ä¸ªæ•°å­—ï¼Œç¬¬ä¸€ä¸ªæ•°å­—æ˜¯Rçº¢è‰²é€šé“çš„çº¢å…‰å¼ºåº¦å€¼ï¼Œç¬¬äºŒä¸ªæ•°å­—æ˜¯Gç»¿è‰²é€šé“çš„ç»¿å…‰å¼ºåº¦å€¼ï¼Œç¬¬ä¸‰ä¸ªæ•°å­—æ˜¯Bè“è‰²é€šé“çš„è“å…‰çš„å¼ºåº¦å€¼ã€‚<br/>
ä½†æ˜¯opencvåœ¨è¯»å–å½©è‰²å›¾ç‰‡çš„æ•°æ®æ—¶ï¼Œæ˜¯å°†å›¾ç‰‡é‡Œé¢çš„æ•°æ®ä»¥è¡Œæ–¹å‘é¡ºåºè¯»å–ï¼Œå¹¶ä¸”ä»¥BGRçš„é»˜è®¤æ¨¡å¼å­˜æ”¾åœ¨æ•°ç»„ndarrayä¸­çš„ã€‚å°±ç›¸å½“äºæŠŠä¸€å¼ å›¾ç‰‡ä»å·¦ä¸Šè§’çš„ç¬¬ä¸€ä¸ªåƒç´ å¼€å§‹ï¼ŒæŒ‰è¡Œä¾æ¬¡å‚ç›´æ’åˆ—ï¼Œæ‹æˆä¸€æ¡æ•°ç›´çš„é•¿çº¿ï¼Œçº¿ä¸Šçš„æ¯ä¸ªç‚¹éƒ½æ˜¯ä¸‰ä¸ªæ•°å­—ï¼Œä½†è¿™ä¸‰ä¸ªæ•°å­—é»˜è®¤çš„BGRé€šé“ã€‚<br/>
image[0,0,0] ç¬¬ä¸€ä¸ªå‚æ•°0è¡¨ç¤ºç¬¬0è¡Œï¼Œç¬¬äºŒä¸ªå‚æ•°0è¡¨ç¤ºç¬¬0åˆ—ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºç¬¬0ä¸ªé€šé“ã€‚ç”±äºopencvè¯»å‡ºæ¥çš„ä¸‰ä¸ªé€šé“æ˜¯BGRé¡ºåºçš„ï¼Œæ‰€ä»¥ç¬¬ä¸‰ä¸ªå‚æ•°0åœ¨opencvä¸­æ˜¯åˆ‡å‡ºæ¥çš„åƒç´ ç‚¹å°±æ˜¯imageè¿™å¼ å›¾ç‰‡ä¸­çš„å·¦ä¸Šè§’ç¬¬ä¸€ä¸ªåƒç´ ç‚¹Bé€šé“çš„è“å…‰å¼ºåº¦å€¼ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">#ä¾‹<span class="hljs-number">2.3</span> å…ˆç”Ÿæˆä¸€ä¸ªä¸‰ç»´å…¨æ˜¯<span class="hljs-number">0</span>çš„ndarrayæ•°ç»„ï¼Œç„¶ååˆ‡å‡ºç¬¬ä¸€ä¸ªé€šé“çš„æ•°æ®å¹¶æ”¹ä¸º<span class="hljs-number">255</span>ï¼Œç„¶åå†æ˜¾ç¤ºè¿™ä¸ªä¸‰ç»´æ•°æ®å›¾åƒã€‚ä¾æ¬¡ç±»æ¨æŠŠä¸‰ä¸ªé€šé“éƒ½æ“ä½œä¸€éã€‚å³æ ¹æ®å›¾åƒçš„é€šé“æ“ä½œæ•´å¼ å›¾åƒã€‚
import numpy as np
import cv2
blue = np<span class="hljs-selector-class">.zeros</span>((<span class="hljs-number">200</span>, <span class="hljs-number">300</span>, <span class="hljs-number">3</span>), dtype=np<span class="hljs-selector-class">.uint8</span>)   #ç”¨np<span class="hljs-selector-class">.zeros</span>([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>], dtype=np.uint8)ç†è§£è¿™ä¸ªå‡½æ•°
blue<span class="hljs-selector-attr">[:,:,0]</span>=<span class="hljs-number">255</span>                                  <span class="hljs-selector-id">#np</span><span class="hljs-selector-class">.zeros</span>([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>], dtype=np.uint8)<span class="hljs-selector-attr">[:,:,0]</span>=<span class="hljs-number">255</span>ï¼Œå°è¯•ç”¨å°æ•°æ®åˆ‡ä¸€åˆ‡è®¤è¯†æ•°æ®
<span class="hljs-built_in">print</span>(blue)
cv2<span class="hljs-selector-class">.imshow</span>('blue', blue)
<span class="hljs-built_in">print</span>('------------------------------------------------')
green = np<span class="hljs-selector-class">.zeros</span>((<span class="hljs-number">200</span>, <span class="hljs-number">300</span>, <span class="hljs-number">3</span>), dtype=np<span class="hljs-selector-class">.uint8</span>) 
green<span class="hljs-selector-attr">[:,:,1]</span>=<span class="hljs-number">255</span>
<span class="hljs-built_in">print</span>(green)
cv2<span class="hljs-selector-class">.imshow</span>('green', green)
<span class="hljs-built_in">print</span>('------------------------------------------------')
red = np<span class="hljs-selector-class">.zeros</span>((<span class="hljs-number">200</span>, <span class="hljs-number">300</span>, <span class="hljs-number">3</span>), dtype=np<span class="hljs-selector-class">.uint8</span>) 
red<span class="hljs-selector-attr">[:,:,2]</span>=<span class="hljs-number">255</span>
<span class="hljs-built_in">print</span>(red)
cv2<span class="hljs-selector-class">.imshow</span>('red', red)
<span class="hljs-built_in">print</span>('------------------------------------------------')
colorfull = np<span class="hljs-selector-class">.zeros</span>((<span class="hljs-number">200</span>, <span class="hljs-number">300</span>, <span class="hljs-number">3</span>), dtype=np<span class="hljs-selector-class">.uint8</span>) 
colorfull<span class="hljs-selector-attr">[:,:,0]</span>=<span class="hljs-number">255</span>     #è“è‰²
colorfull<span class="hljs-selector-attr">[:,:,1]</span>=<span class="hljs-number">0</span>       #ç»¿è‰²
colorfull<span class="hljs-selector-attr">[:,:,2]</span>=<span class="hljs-number">255</span>     #çº¢è‰²
<span class="hljs-built_in">print</span>(colorfull)
cv2<span class="hljs-selector-class">.imshow</span>('colorfull', colorfull)

cv2<span class="hljs-selector-class">.waitKey</span>(<span class="hljs-number">10000</span>)
cv2<span class="hljs-selector-class">.destroyAllWindows</span>()



#ä¾‹<span class="hljs-number">2.4</span>   è§‚å¯Ÿä¸€å¼ å›¾åƒçš„éƒ¨åˆ†åƒç´ ç‚¹çš„æŸä¸ªé€šé“ä¸Šçš„æ•°å€¼æ”¹å˜ï¼Œè¿™å¼ å›¾åƒè·Ÿç€æ€ä¹ˆå˜åŒ–ã€‚
import numpy as np
import cv2
<span class="hljs-selector-tag">img</span> = np<span class="hljs-selector-class">.zeros</span>((<span class="hljs-number">300</span>,<span class="hljs-number">300</span>,<span class="hljs-number">3</span>),dtype=np<span class="hljs-selector-class">.uint8</span>)  #æ•°æ®å¤ªå¤šçœ‹ä¸æ˜ç™½åˆ°åº•å“ªäº›æ•°æ®è¢«æ”¹äº†ï¼Œå°±ç”¨å°æ•°æ®å®éªŒï¼š<span class="hljs-selector-tag">img</span> = np<span class="hljs-selector-class">.zeros</span>((<span class="hljs-number">3</span>,<span class="hljs-number">6</span>,<span class="hljs-number">3</span>),dtype=np<span class="hljs-selector-class">.uint8</span>)
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[:, 0:100, 0]</span>=<span class="hljs-number">255</span>     #è“è‰²é€šé“                                                                   #  <span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[:, 0:1, 0]</span>=<span class="hljs-number">255</span>
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[:,100:200, 1]</span>=<span class="hljs-number">255</span>    #ç»¿è‰²é€šé“                                                                    #  <span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[:,1:3, 1]</span>=<span class="hljs-number">255</span>
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[:, 200:300, 2]</span>=<span class="hljs-number">255</span>   #çº¢è‰²é€šé“                                                                   #  <span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[:, 3:6, 2]</span>=<span class="hljs-number">255</span>
<span class="hljs-built_in">print</span>(img)
cv2<span class="hljs-selector-class">.imshow</span>('img', img)
cv2<span class="hljs-selector-class">.waitKey</span>(<span class="hljs-number">10000</span>)
cv2<span class="hljs-selector-class">.destroyAllWindows</span>()



#ä¾‹<span class="hljs-number">2.5</span>  æ‰‹åŠ¨ç”Ÿæˆä¸€å¼ BGRæ¨¡å¼çš„å½©è‰²å›¾åƒ
import numpy as np
import cv2
<span class="hljs-selector-tag">img</span> = np<span class="hljs-selector-class">.zeros</span>((<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>), dtype=np<span class="hljs-selector-class">.uint8</span>)
<span class="hljs-built_in">print</span>(img, '\n--------- \n', img[<span class="hljs-number">0</span>,<span class="hljs-number">3</span>], '\n--------- \n', img[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>])
cv2<span class="hljs-selector-class">.imshow</span>('img', img)
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[0,3]</span>=<span class="hljs-number">255</span>
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[0,0]</span>=<span class="hljs-selector-attr">[66,77,88]</span>
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[1,1,1]</span> = <span class="hljs-number">3</span>
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[1,2,2]</span> = <span class="hljs-number">4</span>
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[0,2,0]</span> = <span class="hljs-number">5</span>
<span class="hljs-built_in">print</span>('\n--------- \n', img, '\n--------- \n', img[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>])
cv2<span class="hljs-selector-class">.waitKey</span>(<span class="hljs-number">10000</span>)
cv2<span class="hljs-selector-class">.destroyAllWindows</span>()



#ä¾‹<span class="hljs-number">2.6</span> è¯»å–lenacolorå›¾ç‰‡ï¼Œç”¨å¾ªç¯æ›´æ”¹å›¾ç‰‡çš„æŸäº›åŒºåŸŸçš„åƒç´ å€¼
import cv2
lena_color = cv2<span class="hljs-selector-class">.imread</span>(r'C:\Users\<span class="hljs-number">25584</span>\Desktop\lenacolor.png') 
cv2<span class="hljs-selector-class">.imshow</span>('before', lena_color)
<span class="hljs-built_in">print</span>(lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>], lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>], lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>])
<span class="hljs-built_in">print</span>(lena_color[<span class="hljs-number">50</span>,<span class="hljs-number">0</span>], lena_color[<span class="hljs-number">100</span>,<span class="hljs-number">0</span>])

for <span class="hljs-selector-tag">i</span> in <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>):
    for j in <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>):
        for k in <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>):
            lena_color[i,j,k]=<span class="hljs-number">255</span>
            
for i in <span class="hljs-built_in">range</span>(<span class="hljs-number">50</span>, <span class="hljs-number">100</span>):
    for j in <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>):
        lena_color[i,j]=[<span class="hljs-number">128</span>, <span class="hljs-number">128</span>, <span class="hljs-number">128</span>]
        
for i in <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>, <span class="hljs-number">150</span>):
    for j in <span class="hljs-built_in">range</span>(<span class="hljs-number">200</span>, <span class="hljs-number">300</span>):
        lena_color[i,j]=<span class="hljs-number">0</span>
        
cv2.<span class="hljs-built_in">imshow</span>(<span class="hljs-string">'after'</span>, lena_color)
<span class="hljs-built_in">print</span>(lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>], lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>], lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>], lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>], lena_color[<span class="hljs-number">50</span>,<span class="hljs-number">0</span>], lena_color[<span class="hljs-number">100</span>,<span class="hljs-number">0</span>])
cv2.<span class="hljs-built_in">waitKey</span>(<span class="hljs-number">10000</span>)
cv2.<span class="hljs-built_in">destroyAllWindows</span>()
</code></pre>
<p><img alt="" src="" loading="lazy"/></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-id">#2</span><span class="hljs-selector-class">.7</span> ç»ƒä¹ å‡½æ•°<span class="hljs-built_in">item</span>()å’Œå‡½æ•°<span class="hljs-built_in">itemset</span>()çš„ç”¨æ³•
import numpy as np
<span class="hljs-selector-tag">img</span> = np<span class="hljs-selector-class">.random</span><span class="hljs-selector-class">.randint</span>(<span class="hljs-number">10</span>, <span class="hljs-number">99</span>, size=(<span class="hljs-number">5</span>,<span class="hljs-number">5</span>), dtype=np<span class="hljs-selector-class">.uint8</span>)
<span class="hljs-built_in">print</span>(img, '\n', img.item(<span class="hljs-number">3</span>,<span class="hljs-number">2</span>))
<span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.itemset</span>((<span class="hljs-number">3</span>,<span class="hljs-number">2</span>), <span class="hljs-number">255</span>)
<span class="hljs-selector-tag">img</span>
</code></pre>
<p><img alt="" src="" loading="lazy"/></p>
<ul>
<li>
<p><strong>np.random.randint(a,b, size, dtype)å‡½æ•°</strong><br/>
å‡½æ•°çš„åŠŸèƒ½æ˜¯éšæœºç”Ÿæˆä¸€äº›æ•´æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦ç”Ÿæˆçš„æ•°çš„èµ·å§‹å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æœ€å¤§å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¦ç”Ÿæˆçš„æ•´æ•°çš„å½¢çŠ¶ï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯è¦ç”Ÿæˆçš„æ•°çš„ç±»å‹ã€‚</p>
</li>
<li>
<p><strong>å‡½æ•°item(a,b)</strong><br/>
å‡½æ•°çš„åŠŸèƒ½æ˜¯ç´¢å¼•å‡ºè¦è®¿é—®çš„å›¾åƒçš„æŸä¸ªåƒç´ ç‚¹ã€‚å‡½æ•°è¿”å›è¦ç´¢å¼•çš„åƒç´ ç‚¹çš„å€¼ã€‚<br/>
å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åƒç´ ç‚¹çš„è¡Œï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åƒç´ ç‚¹çš„åˆ—ã€‚</p>
</li>
<li>
<p><strong>å‡½æ•°itemset((a,b),c)</strong> å‡½æ•°ç”¨æ¥ä¿®æ”¹æŒ‡å®šåƒç´ ç‚¹çš„åƒç´ å€¼ã€‚æœ¬å‡½æ•°ç›´æ¥åœ¨åŸå›¾åƒä¸Šä¿®æ”¹ï¼Œä¸è¿”å›ä»»ä½•å€¼ã€‚ å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦ä¿®æ”¹çš„åƒç´ ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦ä¿®æ”¹çš„åƒç´ çš„å€¼ã€‚</p>
</li>
<li>
<p><strong>è¯´æ˜</strong><br/>
item()å‡½æ•°å’Œitemset()éƒ½æ˜¯åªèƒ½ç´¢å¼•æˆ–è€…ä¿®ä¸ªä¸€ä¸ªåƒç´ ç‚¹ï¼ï¼ï¼å¦‚æœæˆ‘ä»¬æƒ³ç´¢å¼•æˆ–ä¿®æ”¹ä¸€æ‰¹åƒç´ ç‚¹æ—¶ï¼Œæˆ‘ä»¬å°±è¦ç”¨å¾ªç¯ä¸€ä¸ªä¸ªåƒç´ ç‚¹è¿›è¡Œä¿®æ”¹ï¼ï¼ï¼</p>
<p>#ä¾‹2.8 ç”Ÿæˆä¸€ä¸ªåƒç´ å€¼ä¸ºéšæœºæ•°çš„ç°åº¦å›¾åƒ<br/>
import numpy as np
import cv2
img = np.random.randint(0,256, size=(300, 300), dtype=np.uint8)
img
cv2.imshow('demo', img)
cv2.waitKey(10000)
cv2.destroyAllWindows()</p>
<p>#ä¾‹2.9 è¯»å–ç°åº¦å›¾åƒlena.bmpï¼Œå¹¶å¯¹å…¶åƒç´ å€¼è¿›è¡Œç´¢å¼•ã€ä¿®æ”¹<br/>
import cv2
lena = cv2.imread(r'C:\Users\25584\Desktop\lena.bmp', 0)
#ä¿®æ”¹ä¸€ä¸ªåƒç´ ç‚¹ï¼š
print(lena.item(2,3))
lena.itemset((2, 3), 255)<br/>
print(lena.item(2, 3))
#ä¿®æ”¹ä¸€ä¸ªåŒºåŸŸçš„åƒç´ ç‚¹ï¼š
cv2.imshow('xiu gai qian', lena)
for i in range(10, 50):
for j in range(20, 100):
lena.itemset((i,j), 255)
cv2.imshow('xiu gai hou', lena)
cv2.waitKey(10000)
cv2.destroyAllWindows()</p>
</li>
</ul>
<p><img alt="" src="" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css">#ä¾‹<span class="hljs-number">2.10</span> ç”Ÿæˆä¸€ä¸ªåƒç´ å€¼ä¸ºéšæœºæ•°çš„å½©è‰²å›¾åƒï¼Œç»ƒä¹ item()å‡½æ•°å’Œitemset()å‡½æ•°ï¼š
import numpy as np
<span class="hljs-selector-tag">img</span> = np<span class="hljs-selector-class">.random</span><span class="hljs-selector-class">.randint</span>(<span class="hljs-number">10</span>, <span class="hljs-number">99</span>, size=(<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>), dtype=np<span class="hljs-selector-class">.uint8</span>)
<span class="hljs-selector-tag">img</span>
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[1,2,0]</span>, <span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[1,2, 1]</span>, <span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[1,2,2]</span>
<span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.item</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>), <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.item</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>), <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.item</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)
<span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.itemset</span>((<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>), <span class="hljs-number">255</span>), <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.itemset</span>((<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>), <span class="hljs-number">255</span>), <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.itemset</span>((<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>), <span class="hljs-number">255</span>)
<span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[1,2,0]</span>, <span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[1,2, 1]</span>, <span class="hljs-selector-tag">img</span><span class="hljs-selector-attr">[1,2,2]</span>
</code></pre>
<p><img alt="" src="" loading="lazy"/></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#ä¾‹2.11 ç”Ÿæˆä¸€ä¸ªåƒç´ å€¼ä¸ºéšæœºæ•°çš„å½©è‰²å›¾åƒ</span>
img = np.random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">256</span>, size=(<span class="hljs-number">200</span>, <span class="hljs-number">200</span>, <span class="hljs-number">3</span>), dtype=np.uint8)
cv2.imshow(<span class="hljs-string">'random colorfull img'</span>, img)
cv2.waitKey(<span class="hljs-number">10000</span>)
cv2.destroyAllWindows()



<span class="hljs-comment">#ä¾‹2.12 è¯»å–å½©è‰²å›¾åƒlenacolor.png, å¹¶å¯¹å›¾åƒè¿›è¡Œä¿®æ”¹</span>
<span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
lena_color = cv2.imread(<span class="hljs-string">r'C:\Users\25584\Desktop\lenacolor.png'</span>)
cv2.imshow(<span class="hljs-string">'xiu gai qian'</span>, lena_color)
<span class="hljs-built_in">print</span>(lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>], lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>], lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>])
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>):
    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">200</span>):
        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>):
            lena_color.itemset((i,j,k),<span class="hljs-number">255</span>)
cv2.imshow(<span class="hljs-string">'xiu gai hou'</span>, lena_color)    
<span class="hljs-built_in">print</span>(lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>], lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>], lena_color[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>])
cv2.waitKey(<span class="hljs-number">10000</span>)
cv2.destroyAllWindows()
</code></pre>
<p><img alt="" src="" loading="lazy"/></p>
<h4 data-id="heading-4">å››ã€ROI, Region of Interest, æ„Ÿå…´è¶£åŒºåŸŸ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#ä¾‹2.13 è·å–lenaçš„è„¸éƒ¨ä¿¡æ¯ï¼Œå¹¶å°†å…¶æ˜¾ç¤ºå‡ºæ¥</span>
<span class="hljs-keyword">import</span> cv2
lena = cv2.imread(<span class="hljs-string">r'C:\Users\25584\Desktop\lenacolor.png'</span>, -<span class="hljs-number">1</span>)
lena_face = lena[<span class="hljs-number">220</span>:<span class="hljs-number">400</span>, <span class="hljs-number">220</span>:<span class="hljs-number">350</span>]    <span class="hljs-comment">#ç”¨åˆ‡ç‰‡è·å–ROI</span>
cv2.imshow(<span class="hljs-string">'lena'</span>, lena)    
cv2.imshow(<span class="hljs-string">'lena face'</span>, lena_face)
cv2.waitKey(<span class="hljs-number">10000</span>)
cv2.destroyAllWindows()



<span class="hljs-comment">#ä¾‹2.14 ç»™lenaçš„è„¸éƒ¨æ‰“ç </span>
<span class="hljs-keyword">import</span> cv2
lena = cv2.imread(<span class="hljs-string">r'C:\Users\25584\Desktop\lenacolor.png'</span>, -<span class="hljs-number">1</span>)
cv2.imshow(<span class="hljs-string">'lena'</span>, lena)

roi_1 = np.random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">256</span>, (<span class="hljs-number">180</span>, <span class="hljs-number">130</span>,<span class="hljs-number">3</span>), dtype=np.uint8)
lena[<span class="hljs-number">220</span>:<span class="hljs-number">400</span>, <span class="hljs-number">220</span>:<span class="hljs-number">350</span>]=roi_1
cv2.imshow(<span class="hljs-string">'color mask'</span>, lena)

roi_2 = np.zeros((<span class="hljs-number">180</span>, <span class="hljs-number">130</span>,<span class="hljs-number">3</span>),dtype=np.uint8)
roi_2[:,:,:]=<span class="hljs-number">255</span>
lena[<span class="hljs-number">220</span>:<span class="hljs-number">400</span>, <span class="hljs-number">220</span>:<span class="hljs-number">350</span>]=roi_2
cv2.imshow(<span class="hljs-string">'white mask'</span>, lena)

cv2.waitKey(<span class="hljs-number">10000</span>)
cv2.destroyAllWindows()



<span class="hljs-comment">#ä¾‹2.15 å°†ä¸€å¹…å›¾åƒå†…çš„ROIå¤åˆ¶åˆ°å¦ä¸€å¹…å›¾åƒå†…ï¼šç»™dollaræ¢è„¸</span>
<span class="hljs-keyword">import</span> cv2
lena = cv2.imread(<span class="hljs-string">r'C:\Users\25584\Desktop\lena512.bmp'</span>, -<span class="hljs-number">1</span>)
dollar = cv2.imread(<span class="hljs-string">r'C:\Users\25584\Desktop\dollar.bmp'</span>, -<span class="hljs-number">1</span>)
cv2.imshow(<span class="hljs-string">'lena'</span>, lena)
cv2.imshow(<span class="hljs-string">'dollar'</span>, dollar)
lena_face = lena[<span class="hljs-number">220</span>:<span class="hljs-number">400</span>, <span class="hljs-number">250</span>:<span class="hljs-number">350</span>]
dollar[<span class="hljs-number">160</span>:<span class="hljs-number">340</span>, <span class="hljs-number">200</span>:<span class="hljs-number">300</span>]=lena_face
cv2.imshow(<span class="hljs-string">'dollar2'</span>, dollar)
cv2.waitKey(<span class="hljs-number">10000</span>)
cv2.destroyAllWindows()
</code></pre>
<h4 data-id="heading-5">äº”ã€é€šé“æ“ä½œ</h4>
<p>ä¸€ä¸ªRGBå½©è‰²å›¾åƒï¼Œåœ¨opencvä¸­ï¼Œå®ƒæ˜¯æŒ‰ç…§Bé€šé“-Gé€šé“-Ré€šé“ çš„é¡ºåºå­˜å‚¨çš„ã€‚</p>
<ul>
<li>
<p>é€šé“æ‹†åˆ†<br/>
1ã€ç´¢å¼•æ–¹å¼æ‹†åˆ†<br/>
2ã€å‡½æ•°æ–¹å¼æ‹†åˆ†</p>
</li>
<li>
<p>é€šé“åˆå¹¶</p>
<p>#ä¾‹2.16 ç¼–å†™ç¨‹åºï¼Œæ¼”ç¤ºå›¾åƒé€šé“æ‹†åˆ†åŠé€šé“å€¼æ”¹å˜å¯¹å½©è‰²å›¾åƒçš„å½±å“
import cv2
lena = cv2.imread(r'C:\Users\25584\Desktop\lenacolor.png')
cv2.imshow('lena', lena)</p>
<p>b_tongdao = lena[:, :, 0]
g_tongdao = lena[:, :, 1]
r_tongdao = lena[:, :, 2]
cv2.imshow('b', b_tongdao)
cv2.imshow('g', g_tongdao)
cv2.imshow('r', r_tongdao)</p>
<p>lena[:, :, 0]=0
cv2.imshow('b_0', lena)
lena[:, :, 1]=0
cv2.imshow('g_0', lena)</p>
<p>cv2.waitKey(20000)
cv2.destroyAllWindows()</p>
<p>#ä¾‹2.17 ä½¿ç”¨å‡½æ•°cv2.split()å‡½æ•°æ‹†å›¾åƒé€šé“, å¹¶æ˜¾ç¤ºä¸‰ä¸ªé€šé“å›¾åƒã€‚
import cv2
lena = cv2.imread(r'C:\Users\25584\Desktop\lenacolor.png')
b,g,r = cv2.split(lena)
cv2.imshow('b', b)
cv2.imshow('g', g)
cv2.imshow('r', r)
cv2.waitKey(20000)
cv2.destroyAllWindows()</p>
<p>#è‡ªä¸»ç»ƒä¹ ï¼šæŠŠä¸€å¼ å½©å›¾çš„ä¸‰ä¸ªé€šé“æ•°æ®åˆ†åˆ«åˆ‡å‡ºæ¥ï¼Œä»ä»¥å½©å›¾å½¢å¼æ˜¾ç¤ºå›¾åƒã€‚
import cv2
lena = cv2.imread(r'C:\Users\25584\Desktop\lenacolor.png')</p>
<p>lena1 = lena.copy()
lena1[:,:,1:3]=0
cv2.imshow('b', lena1)</p>
<p>lena2 = lena.copy()
lena2[:,:,0]=0
lena2[:,:,2]=0
cv2.imshow('g', lena2)</p>
<p>lena3 = lena.copy()
lena3[:,:,0:2]=0
cv2.imshow('r', lena3)</p>
<p>cv2.waitKey(20000)
cv2.destroyAllWindows()</p>
<p>#ä¾‹2.18 é€šé“åˆå¹¶ï¼Œä½¿ç”¨å‡½æ•°cv2.merge()å‡½æ•°åˆå¹¶é€šé“
import cv2
lena = cv2.imread(r'C:\Users\25584\Desktop\lenacolor.png')
b,g,r = cv2.split(lena)
bgr = cv2.merge([b,g,r])
rgb = cv2.merge([r,g,b])</p>
<p>cv2.imshow('bgr', bgr)
cv2.imshow('rgb', rgb)</p>
<p>cv2.waitKey(20000)
cv2.destroyAllWindows()</p>
</li>
</ul>
<p><strong>è¯´æ˜ï¼šé€šé“é¡ºåºæ”¹å˜åï¼Œå›¾åƒçš„æ˜¾ç¤ºæ•ˆæœä¹Ÿå‘ç”Ÿäº†æ”¹å˜ã€‚</strong></p>
<h4 data-id="heading-6">å…­ã€è·å–å›¾åƒå±æ€§</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#ä¾‹2.19 è§‚å¯Ÿå›¾åƒçš„å¸¸ç”¨å±æ€§å€¼ </span>
<span class="hljs-keyword">import</span> cv2
lena_gray = cv2.imread(<span class="hljs-string">r'C:\Users\25584\Desktop\lena.bmp'</span>,<span class="hljs-number">0</span>)  <span class="hljs-comment">#å‚æ•°0è¡¨ç¤ºå›¾åƒè¢«è°ƒæ•´ä¸ºå•é€šé“çš„ç°åº¦å›¾åƒ</span>
lena_color = cv2.imread(<span class="hljs-string">r'C:\Users\25584\Desktop\lenacolor.png'</span>)  <span class="hljs-comment">#å½©è‰²å›¾åƒ</span>
lena_gray.shape
lena_color.shape

lena_gray.size
lena_color.size

lena_gray.dtype
lena_color.dtype

dtype(<span class="hljs-string">'uint8'</span>)
</code></pre>
<p><strong>è¯´æ˜ï¼š</strong><br/>
shapeå±æ€§æ˜¯ç”¨æ¥åˆ¤æ–­ä¸€å¹…å›¾åƒæ˜¯ç°åº¦å›¾åƒè¿˜æ˜¯å½©è‰²å›¾åƒã€‚<br/>
sizeå±æ€§è¿”å›çš„æ˜¯å›¾åƒçš„åƒç´ æ•°ç›®ï¼Œå³å›¾åƒçš„'è¡Œxåˆ—xé€šé“æ•°'ã€‚ç°åº¦å›¾åƒçš„é€šé“æ•°ä¸º1ï¼Œå½©è‰²å›¾åƒçš„é€šé“æ•°ä¸º3ã€‚<br/>
dtypeå±æ€§è¿”å›å›¾åƒçš„æ•°æ®ç±»å‹ã€‚</p>
<h4 data-id="heading-7">ä¸ƒã€åœ¨å›¾åƒä¸Šç»˜åˆ¶å‡ ä½•å›¾å½¢</h4>
<p>ç»˜åˆ¶ç›´çº¿ï¼šcv.line(img, start, end, color, thickness) #img:è¦ç»˜åˆ¶ç›´çº¿çš„å›¾åƒï¼›start,endç›´çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼›colorçº¿æ¡çš„é¢œè‰²ï¼›thicknessçº¿æ¡çš„å®½åº¦ã€‚<br/>
ç»˜åˆ¶åœ†å½¢ï¼šcv.circle(img, centerpoint, r, color, thickness) #thicknessè¡¨ç¤ºçº¿æ¡çš„å®½åº¦ï¼Œå½“è¿™ä¸ªå‚æ•°=-1æ—¶ç”Ÿæˆé—­åˆå›¾æ¡ˆå¹¶å¡«å……é¢œè‰²ã€‚<br/>
ç»˜åˆ¶çŸ©å½¢ï¼šcv.rectangle(img, leftupper, rightdown, color, thickness) #è®¾ç½®çŸ©å½¢çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡å³å¯ã€‚<br/>
åœ¨å›¾åƒä¸­æ·»åŠ æ–‡å­—ï¼šcv.putText(img, text, station, font,fontsize, color, thickness, cv.LINE_AA) #text:è¦å†™å…¥çš„æ–‡å­—ï¼›station:æ–‡æœ¬åœ¨å›¾åƒä¸­çš„æ”¾ç½®ä½ç½®(å·¦ä¸‹è§’)ï¼›å­—ä½“ã€å­—ä½“å¤§å°ã€é¢œè‰²ã€å®½åº¦ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">#ä¾‹<span class="hljs-number">2.20</span> ç”Ÿæˆä¸€ä¸ªå…¨é»‘çš„å›¾åƒï¼Œåœ¨å›¾åƒä¸Šç»˜åˆ¶ä¸Šé¢çš„å›¾å½¢å¹¶æ·»åŠ æ–‡å­—  
import numpy as np
import cv2
import matplotlib<span class="hljs-selector-class">.pyplot</span> as plt
<span class="hljs-selector-tag">img</span> = np<span class="hljs-selector-class">.zeros</span>((<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">3</span>), np<span class="hljs-selector-class">.uint8</span>)

cv2<span class="hljs-selector-class">.line</span>(img, (<span class="hljs-number">0</span>,<span class="hljs-number">20</span>), (<span class="hljs-number">300</span>, <span class="hljs-number">200</span>), (<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),<span class="hljs-number">5</span>)   #çº¿æ®µèµ·ç‚¹ã€ç»ˆç‚¹ã€é¢œè‰²ã€ç²—ç»†
cv2<span class="hljs-selector-class">.rectangle</span>(img, (<span class="hljs-number">50</span>, <span class="hljs-number">80</span>), (<span class="hljs-number">120</span>, <span class="hljs-number">250</span>), (<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>), <span class="hljs-number">3</span>)  #å·¦ä¸Šè§’åæ ‡ï¼Œå³ä¸‹è§’åæ ‡
cv2<span class="hljs-selector-class">.circle</span>(img, (<span class="hljs-number">200</span>, <span class="hljs-number">200</span>),<span class="hljs-number">60</span>, (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>),-<span class="hljs-number">1</span>)    #åœ†å¿ƒåæ ‡ï¼ŒåŠå¾„ï¼Œ-<span class="hljs-number">1</span>è¡¨ç¤ºåœ†å½¢é‡Œé¢å¡«å……é¢œè‰²ã€‚
cv2<span class="hljs-selector-class">.putText</span>(img, 'opencv', (<span class="hljs-number">70</span>,<span class="hljs-number">40</span>), cv2<span class="hljs-selector-class">.FONT_HERSHEY_SIMPLEX</span>, <span class="hljs-number">2</span>, (<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>), <span class="hljs-number">2</span>)   #å·¦ä¸‹è§’åæ ‡

plt<span class="hljs-selector-class">.imshow</span>(img[:,:,::-<span class="hljs-number">1</span>])
plt<span class="hljs-selector-class">.title</span>('case show')
plt<span class="hljs-selector-class">.show</span>()
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain æ¡†æ¶æ ¸å¿ƒå‘é‡å­˜å‚¨]]></title>    <link>https://juejin.cn/post/7604344066579267635</link>    <guid>https://juejin.cn/post/7604344066579267635</guid>    <pubDate>2026-02-09T02:47:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604344066579267635" data-draft-id="7604039449468059698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain æ¡†æ¶æ ¸å¿ƒå‘é‡å­˜å‚¨"/> <meta itemprop="keywords" content="LangChain"/> <meta itemprop="datePublished" content="2026-02-09T02:47:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰å¸½lufei"/> <meta itemprop="url" content="https://juejin.cn/user/501033035632093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain æ¡†æ¶æ ¸å¿ƒå‘é‡å­˜å‚¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501033035632093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰å¸½lufei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:47:11.000Z" title="Mon Feb 09 2026 02:47:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¹‹å‰å­¦ä¹ äº†LangChainä¸­çš„åµŒå…¥ï¼Œæ¥ä¸‹æ¥å­¦ä¹ LangChainä¸­çš„å‘é‡å­˜å‚¨</p>
<h2 data-id="heading-1">æ¦‚å¿µ</h2>
<p>å‘é‡å­˜å‚¨ï¼ˆVector Storeï¼‰æ˜¯ LangChain ä¸­ç”¨äºå­˜å‚¨å’Œæ£€ç´¢åµŒå…¥å‘é‡çš„ç»„ä»¶</p>
<p>ç”¨äºå­˜å‚¨ã€ç®¡ç†æ–‡æœ¬ / å¤šæ¨¡æ€æ•°æ®è½¬æ¢åçš„å‘é‡ï¼ŒåŒæ—¶æä¾›é«˜æ•ˆç›¸ä¼¼æ€§æ£€ç´¢èƒ½åŠ›</p>
<p>æ˜¯ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ã€AI Agent è®°å¿†ã€çŸ¥è¯†åº“é—®ç­”ç­‰åœºæ™¯çš„åŸºç¡€ï¼Œè§£å†³äº†å¤§æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£æœ‰é™ã€æ— æ³•è®°ä½æµ·é‡å¤–éƒ¨çŸ¥è¯†çš„æ ¸å¿ƒé—®é¢˜</p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯å‘é‡</h3>
<p>ä¸‹é¢æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†å’Œæœºå™¨å­¦ä¹ ä¸­çš„å‘é‡æ¦‚å¿µï¼š</p>
<p>å‘é‡ï¼ˆVectorï¼‰æ˜¯ä¸€ä¸ªæ•°å€¼æ•°ç»„ï¼Œç”¨äºè¡¨ç¤ºæ–‡æœ¬æˆ–æ–‡æ¡£çš„è¯­ä¹‰ä¿¡æ¯ã€‚æ¯ä¸ªå…ƒç´ éƒ½ä»£è¡¨äº†æ–‡æœ¬ä¸­çš„ä¸€ä¸ªç‰¹å¾æˆ–ç»´åº¦ï¼Œè€Œå‘é‡çš„é•¿åº¦åˆ™å†³å®šäº†è¯¥æ–‡æœ¬çš„ç‰¹å¾æ•°é‡ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªç®€å•çš„æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªç±»åˆ«ï¼šâ€œæƒ…æ„Ÿåˆ†æâ€å’Œâ€œä¸»é¢˜åˆ†ç±»â€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘é‡æ¥è¡¨ç¤ºæ¯ä¸ªæ–‡æœ¬çš„ç‰¹å¾ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æƒ…æ„Ÿåˆ†æå‘é‡ï¼š[0.2, -0.3, 0.5]</li>
<li>ä¸»é¢˜åˆ†ç±»å‘é‡ï¼š[-0.1, 0.4, -0.2]</li>
</ul>
<p>è¿™äº›å‘é‡å¯ä»¥ç”¨äºè¡¨ç¤ºä¸åŒçš„æ–‡æœ¬ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è®¡ç®—ç›¸ä¼¼åº¦æ¥åˆ¤æ–­å®ƒä»¬ä¹‹é—´çš„å…³ç³»</p>
<p>è·¨ä¸“ä¸šå­¦ä¹ éœ€è¦æ¶è¡¥çš„ä¸œè¥¿è¿˜æ˜¯æŒºå¤šçš„ï¼Œæ¦‚å¿µçš„æœ‰æ—¶å€™çœ‹çš„ä¹Ÿæ˜¯ä¼¼æ‡‚éæ‡‚(å¾ˆå¤šæ—¶å€™æ˜¯ä¸€è„¸æ‡µé€¼)</p>
<h2 data-id="heading-3">LangChain VectorStores çš„æ ¸å¿ƒåŠŸèƒ½</h2>
<p>çœ‹ä¸‹å¸¸è§çš„å‘é‡å­˜å‚¨æ–¹æ¡ˆ</p>
<h3 data-id="heading-4">FAISS</h3>
<p>FAISS æ˜¯ Facebook å¼€æºçš„é«˜æ•ˆå‘é‡ç›¸ä¼¼åº¦æ£€ç´¢åº“ï¼Œå…¨åæ˜¯ Facebook AI Similarity Searchã€‚ä¸å¾—ä¸æ„Ÿå¹å¤§å‚æ˜¯çœŸå¼ï¼Œæ—¥å¸¸å·¥ä½œç”Ÿæ´»å¤§éƒ¨åˆ†éƒ½æ˜¯å¤§å‚çš„äº§å“å’ŒæœåŠ¡</p>
<p>FAISS æ˜¯ LangChain VectorStore ä¸­æœ€å¸¸ç”¨çš„æœ¬åœ°å‘é‡å­˜å‚¨æ–¹æ¡ˆä¹‹ä¸€ï¼Œæ ¸å¿ƒä¼˜åŠ¿æ˜¯å¼€æºå…è´¹ã€æœ¬åœ°éƒ¨ç½²æ— é¢å¤–æˆæœ¬ã€ç›¸ä¼¼åº¦æ£€ç´¢é€Ÿåº¦æå¿«ï¼Œå°¤å…¶é€‚åˆä¸­å°è§„æ¨¡å‘é‡æ•°æ®ï¼ˆç™¾ä¸‡çº§ä»¥å†…ï¼‰çš„ AI Agentã€çŸ¥è¯†åº“é—®ç­”ç­‰åœºæ™¯</p>
<p>è¿™ä¸å®Œç¾åŒ¹é…äº†æˆ‘è¿™ç§å¼€å‘è€…ç°åœ¨çš„éœ€æ±‚çš„å—ï¼Œæœ¬åœ°å¼€å‘ç ”ç©¶ï¼Œå†ç”¨ä¸ªæœ¬åœ°çš„çŸ¥è¯†åº“ï¼Œç”¨ç€ Ollama è·‘èµ·æ¥çš„æœ¬åœ°æ¨¡å‹</p>
<h3 data-id="heading-5">Pinecone</h3>
<p>Pinecone æ˜¯ LangChain VectorStore ç”Ÿæ€ä¸­æ‰˜ç®¡å¼äº‘å‘é‡æ•°æ®åº“çš„ä»£è¡¨ï¼Œæ ¸å¿ƒä¼˜åŠ¿æ˜¯å…¨æ‰˜ç®¡å…è¿ç»´ã€åˆ†å¸ƒå¼é«˜å¯ç”¨ã€è¶…å¤§è§„æ¨¡å‘é‡æ£€ç´¢å¿«ï¼Œæ— éœ€æœ¬åœ°éƒ¨ç½²ç´¢å¼•ï¼Œé€‚é…ç”Ÿäº§ç¯å¢ƒå’Œå¤§è§„æ¨¡å‘é‡åœºæ™¯ï¼Œé€‚åˆéœ€è¦ç¨³å®šæœåŠ¡ã€ä¸æƒ³ç»´æŠ¤åº•å±‚å­˜å‚¨çš„å¼€å‘åœºæ™¯</p>
<p>Pinecone å°±æ˜¯äº‘ç«¯ç½‘ç›˜ï¼ˆå¹³å°æ‰˜ç®¡ã€éšæ—¶è®¿é—®ã€æ”¯æŒè¶…å¤§æ–‡ä»¶ã€ä»˜è´¹ä½¿ç”¨ï¼‰</p>
<p>å¤§è§„æ¨¡ä¼ä¸šçº§åœºæ™¯ä¸‹ç”¨çš„ï¼Œä¸é€‚åˆä¸ªäººå­¦ä¹ ç ”ç©¶åœºæ™¯</p>
<h3 data-id="heading-6">Chroma</h3>
<p>Chroma æ˜¯ä¸€æ¬¾ä¸“ä¸º LLM åº”ç”¨è®¾è®¡çš„è½»é‡çº§å¼€æºå‘é‡æ•°æ®åº“ï¼Œæ ¸å¿ƒå®šä½æ˜¯ã€Œè®©å‘é‡å­˜å‚¨å˜å¾—ç®€å•ã€â€”â€” æ— éœ€å¤æ‚éƒ¨ç½²ï¼Œä¸€è¡Œä»£ç å³å¯å¯åŠ¨ï¼Œæ”¯æŒå‘é‡çš„å­˜å‚¨ã€ç›¸ä¼¼åº¦æ£€ç´¢ã€åŠ¨æ€å¢åˆ æ”¹ï¼Œè¿˜èƒ½å…³è”å…ƒæ•°æ®ï¼ˆå¦‚æ–‡æ¡£æ¥æºã€ç±»å‹ï¼‰ï¼Œåƒä¸€ä¸ªã€Œä¸“ä¸º LLM æ‰“é€ çš„æœ¬åœ°å‘é‡è®°äº‹æœ¬ã€</p>
<p>ç±»æ¯”åœºæ™¯ï¼šFAISS æ˜¯ä¸€æ¬¡æ€§å†™å…¥çš„æœ¬åœ° U ç›˜ï¼ŒChroma æ˜¯å¯éšæ—¶å¢åˆ æ–‡ä»¶çš„æœ¬åœ°ç§»åŠ¨ç¡¬ç›˜ï¼ŒPinecone æ˜¯äº‘ç«¯ç½‘ç›˜ï¼ŒChroma å…¼é¡¾äº†æœ¬åœ°çš„ä¾¿æ·æ€§å’ŒåŠ¨æ€æ›´æ–°çš„çµæ´»æ€§</p>
<h3 data-id="heading-7">Milvus</h3>
<p>Milvus æ˜¯ LangChain VectorStore ç”Ÿæ€é‡Œå·¥ä¸šçº§ã€å¼€æºã€åˆ†å¸ƒå¼ã€å¯æ‰©å±•çš„å‘é‡æ•°æ®åº“ï¼Œä¸»æ‰“å¤§è§„æ¨¡å‘é‡ï¼ˆäº¿çº§ï¼‰ã€é«˜æ€§èƒ½æ£€ç´¢ã€åŠ¨æ€æ›´æ–°ã€é«˜å¯ç”¨ï¼Œæ˜¯ä»æœ¬åœ°å¼€å‘åˆ°ä¼ä¸šçº§ç”Ÿäº§çš„å…¨é“¾è·¯å‘é‡å­˜å‚¨æ–¹æ¡ˆï¼Œå®Œç¾è¡”æ¥ FAISS/Chromaï¼ˆæœ¬åœ°è½»é‡ï¼‰ä¸ Pineconeï¼ˆäº‘ç«¯æ‰˜ç®¡ï¼‰çš„ä¸­é—´åœ°å¸¦</p>
<p>ç±»æ¯”ï¼šFAISS æ˜¯æœ¬åœ° U ç›˜ï¼ŒChroma æ˜¯æœ¬åœ°ç§»åŠ¨ç¡¬ç›˜ï¼ŒMilvus æ˜¯æœ¬åœ°å¯æ‰©å±•æœåŠ¡å™¨ + äº‘ç«¯é›†ç¾¤ï¼Œæ—¢èƒ½æœ¬åœ°å¿«é€Ÿè·‘ï¼Œä¹Ÿèƒ½æ”¯æ’‘ä¼ä¸šçº§å¤§è§„æ¨¡å‘é‡æœåŠ¡Milvus</p>
<p>ä¸Šé¢çš„è¿™äº›å‘é‡å­˜å‚¨æ–¹æ¡ˆéƒ½å®ç°äº† <code>åˆ›å»ºå‘é‡å­˜å‚¨</code>ã€<code>ç›¸ä¼¼åº¦æœç´¢</code>ã€<code>å¸¦åˆ†æ•°çš„ç›¸ä¼¼åº¦æœç´¢</code>ã€<code>æœ€å¤§è¾¹é™…ç›¸å…³æ€§æœç´¢</code>ã€<code>ä¿å­˜å’ŒåŠ è½½</code> ç­‰æ ¸å¿ƒåŠŸèƒ½</p>
<h2 data-id="heading-8">ç›¸ä¼¼åº¦æœç´¢çš„åŸç†</h2>
<p>ç›¸ä¼¼åº¦æœç´¢æ˜¯å‘é‡å­˜å‚¨çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŸºæœ¬åŸç†æ˜¯å°†æŸ¥è¯¢æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡ï¼Œè®¡ç®—æŸ¥è¯¢å‘é‡ä¸å­˜å‚¨ä¸­æ‰€æœ‰å‘é‡çš„ç›¸ä¼¼åº¦ï¼Œè¿”å›ç›¸ä¼¼åº¦æœ€é«˜çš„å‰å‡ ä¸ªç»“æœ</p>
<p>å¸¸ç”¨çš„ç›¸ä¼¼åº¦åº¦é‡æ–¹æ³•åŒ…æ‹¬ <code>ä½™å¼¦ç›¸ä¼¼åº¦</code>ã€<code>æ¬§æ°è·ç¦»</code>ã€<code>ç‚¹ç§¯</code> ç­‰</p>
<h2 data-id="heading-9">ä»£ç ç¤ºä¾‹</h2>
<p>ä¸‹é¢æ˜¯ <code>FAISS</code> å‘é‡å­˜å‚¨çš„åŸºç¡€ä»£ç ç¤ºä¾‹ï¼Œå…¶ä»–ç±»å‹çš„å­˜å‚¨æ–¹æ¡ˆå°±å…ˆä¸å†™äº†ï¼Œé¡¹ç›®çº§å±‚é¢ç”¨åˆ°å†çœ‹</p>
<h3 data-id="heading-10">æ³¨æ„</h3>
<p><code>from langchain_community.embeddings import HuggingFaceEmbeddings</code> ä¸ºè€ç‰ˆæœ¬å†™æ³•ï¼Œæˆ‘è¿™é‡Œè¿è¡Œæ—¶å‡ºç°é—®é¢˜ï¼Œéœ€ç”¨æ–°ç‰ˆæœ¬</p>
<p>æ–°ç‰ˆæœ¬å†™æ³•æ›´ç®€å•ï¼Œç›´æ¥ä» <code>langchain_huggingface</code> å¯¼å…¥ <code>HuggingFaceEmbeddings</code> å³å¯</p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> langchain_community.vectorstores <span class="hljs-keyword">import</span> FAISS
<span class="hljs-comment"># from langchain_community.embeddings import HuggingFaceEmbeddings</span>
<span class="hljs-keyword">from</span> langchain_huggingface <span class="hljs-keyword">import</span> HuggingFaceEmbeddings

<span class="hljs-comment"># æ ¸å¿ƒç¤ºä¾‹ï¼šFAISS å‘é‡å­˜å‚¨å®Œæ•´æµç¨‹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">faiss_vector_store_core_demo</span>():
    <span class="hljs-comment"># 1. å‡†å¤‡åŸºç¡€æ–‡æœ¬æ•°æ®ï¼ˆå¾…å‘é‡åŒ–çš„åŸå§‹å†…å®¹ï¼‰</span>
    documents = [
        <span class="hljs-string">"LangChain æ˜¯ç”¨äºå¼€å‘è¯­è¨€æ¨¡å‹åº”ç”¨çš„æ¡†æ¶ã€‚"</span>,
        <span class="hljs-string">"FAISS æ˜¯ Facebook å¼€å‘çš„é«˜æ•ˆç›¸ä¼¼åº¦æœç´¢åº“ã€‚"</span>,
        <span class="hljs-string">"Embedding æ¨¡å‹å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°å€¼å‘é‡è¡¨ç¤ºã€‚"</span>
    ]

    <span class="hljs-comment"># 2. åˆå§‹åŒ–åµŒå…¥æ¨¡å‹ï¼ˆæ ¸å¿ƒï¼šæ–‡æœ¬è½¬å‘é‡çš„å·¥å…·ï¼‰</span>
    <span class="hljs-comment"># é€‰ç”¨å¤šè¯­è¨€æ¨¡å‹ï¼Œé€‚é…ä¸­æ–‡åœºæ™¯</span>
    embeddings = HuggingFaceEmbeddings(
        model_name=<span class="hljs-string">"sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2"</span>
    )

    <span class="hljs-comment"># 3. åˆ›å»º FAISS å‘é‡å­˜å‚¨ï¼ˆæ ¸å¿ƒæ­¥éª¤ï¼šæ–‡æœ¬â†’å‘é‡â†’å…¥åº“ï¼‰</span>
    <span class="hljs-comment"># from_texts æ–¹æ³•ä¼šè‡ªåŠ¨å®Œæˆï¼šéå†æ–‡æœ¬â†’è°ƒç”¨åµŒå…¥æ¨¡å‹ç”Ÿæˆå‘é‡â†’å­˜å…¥ FAISS ç´¢å¼•</span>
    vector_store = FAISS.from_texts(documents, embeddings)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">" FAISS å‘é‡åº“åˆ›å»ºå®Œæˆï¼ˆæ–‡æœ¬å·²è½¬ä¸ºå‘é‡å¹¶å­˜å‚¨ï¼‰"</span>)

    <span class="hljs-comment"># 4. å‘é‡æ£€ç´¢ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼šæ ¹æ®æŸ¥è¯¢å‘é‡æ‰¾ç›¸ä¼¼æ–‡æœ¬ï¼‰</span>
    query = <span class="hljs-string">"ä»€ä¹ˆæ˜¯ FAISSï¼Ÿ"</span>
    <span class="hljs-comment"># similarity_searchï¼šæ ¹æ®æŸ¥è¯¢æ–‡æœ¬ç”Ÿæˆå‘é‡ï¼Œåœ¨ FAISS ä¸­æ‰¾æœ€ç›¸ä¼¼çš„ top-k ç»“æœ</span>
    results = vector_store.similarity_search(query, k=<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n æ£€ç´¢æŸ¥è¯¢ï¼š<span class="hljs-subst">{query}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ£€ç´¢ç»“æœï¼š<span class="hljs-subst">{results[<span class="hljs-number">0</span>].page_content}</span>"</span>)

    <span class="hljs-comment"># 5. å‘é‡åº“æŒä¹…åŒ–ï¼ˆæ ¸å¿ƒï¼šä¿å­˜åˆ°æœ¬åœ°ï¼Œé¿å…é‡å¤ç”Ÿæˆå‘é‡ï¼‰</span>
    save_path = <span class="hljs-string">"./faiss_core_index"</span>
    vector_store.save_local(save_path)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n å‘é‡åº“å·²ä¿å­˜åˆ°æœ¬åœ°ï¼š<span class="hljs-subst">{save_path}</span>"</span>)

    <span class="hljs-comment"># 6. åŠ è½½æœ¬åœ°å‘é‡åº“ï¼ˆæ ¸å¿ƒï¼šå¤ç”¨å·²ç”Ÿæˆçš„å‘é‡åº“ï¼‰</span>
    loaded_vector_store = FAISS.load_local(
        save_path, 
        embeddings,
        allow_dangerous_deserialization=<span class="hljs-literal">True</span>  <span class="hljs-comment"># æœ¬åœ°åŠ è½½å¿…éœ€å‚æ•°</span>
    )
    <span class="hljs-comment"># éªŒè¯åŠ è½½ç»“æœ</span>
    test_query = <span class="hljs-string">"ä»€ä¹ˆæ˜¯ Embeddingï¼Ÿ"</span>
    loaded_result = loaded_vector_store.similarity_search(test_query, k=<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n åŠ è½½åéªŒè¯ - æŸ¥è¯¢ï¼š<span class="hljs-subst">{test_query}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"éªŒè¯ç»“æœï¼š<span class="hljs-subst">{loaded_result[<span class="hljs-number">0</span>].page_content}</span>"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    faiss_vector_store_core_demo()

</code></pre>
<p>ä»£ç è¿è¡Œç»“æœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9d48fe634da48029d36b63432ce536e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210033&amp;x-signature=hlGz2QQ5zxPCR7kPHcg5bAd4ZI0%3D" alt="" loading="lazy"/></p>
<p>å‘é‡åº“æŒä¹…åŒ–åˆ°æœ¬åœ°ä¼šåœ¨é¡¹ç›®å¯¹åº”ç›®å½•ç”Ÿæˆ <code>faiss_core_index</code> æ–‡ä»¶å¤¹ï¼ŒåŒ…å«ç´¢å¼•æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88ae14cf0d144af1a7bfb92bde6cc017~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210033&amp;x-signature=52lISNE80Plr%2FNe8Mh3mD2NyqXA%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§æ–‡ä»¶æ˜¯æ— æ³•ç›´æ¥åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fb74d6a736b4211973e713be39f4d00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210033&amp;x-signature=Fzr1CxgdWnbKmNWyq2FYZIH30SI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">å°ç»“</h2>
<p>LangChain VectorStores å‘é‡å­˜å‚¨ç›¸å…³çŸ¥è¯†å°±åŸºæœ¬äº†è§£äº†ï¼Œå¹¶äº†è§£äº† FAISS å‘é‡å­˜å‚¨çš„åŸºæœ¬åŸç†å’Œä»£ç å®ç°ï¼Œå…¶ä»–ç±»å‹ç›®å‰æ²¡æœ‰åˆé€‚çš„æ—¶æœºå’Œé¡¹ç›®åœºæ™¯å»å°è¯•ï¼Œå°±ä¸å±•å¼€äº†</p>
<p>æ¥ä¸‹æ¥å°†åœ¨æœ¬åœ°å®ç°ä¸€ä¸ªåŸºäºçŸ¥è¯†åº“çš„é—®ç­”ç³»ç»Ÿï¼Œå®æˆ˜æ“ä½œä¸€æ³¢</p>
<blockquote>
<p>æ¬¢è¿ç•™è¨€äº¤æµï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œå¯ä»¥<code>ç‚¹ä¸ªèµ</code>æ”¯æŒä¸€ä¸‹</p>
<p>å…¬ä¼—å·ï¼šè‰å¸½lufei</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨ç½‘æœ€ç«çš„ Agent Skills éƒ½åœ¨è¿™äº†ï¼è¿™ 7 ä¸ªå®è—å¸‚åœºå»ºè®®æ”¶è—]]></title>    <link>https://juejin.cn/post/7603854784865927208</link>    <guid>https://juejin.cn/post/7603854784865927208</guid>    <pubDate>2026-02-09T03:05:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603854784865927208" data-draft-id="7604036853129789455" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨ç½‘æœ€ç«çš„ Agent Skills éƒ½åœ¨è¿™äº†ï¼è¿™ 7 ä¸ªå®è—å¸‚åœºå»ºè®®æ”¶è—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-09T03:05:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿé¸£"/> <meta itemprop="url" content="https://juejin.cn/user/4107431171852270"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨ç½‘æœ€ç«çš„ Agent Skills éƒ½åœ¨è¿™äº†ï¼è¿™ 7 ä¸ªå®è—å¸‚åœºå»ºè®®æ”¶è—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4107431171852270/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿé¸£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T03:05:36.000Z" title="Mon Feb 09 2026 03:05:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ Agent Skills ç‰¹åˆ«ç«ï¼Œå¾ˆå¤šæœ‹å‹éƒ½æƒ³æ‰¾ä¸€äº›ç‰¹åˆ«å¥½ç”¨çš„ã€ç‰¹åˆ«æœ‰ç”¨çš„ skillsã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ç»™å¤§å®¶ç›˜ç‚¹ä¸€ä¸‹æ¯”è¾ƒçŸ¥åä¸”ç›¸å¯¹æ¯”è¾ƒç«çˆ†çš„ä¸€äº› skills å¸‚åœºã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/492607feafb04371a21693726c832fc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=S4oDZE1Ga7h%2BD6MxYF8HsRx9ZJ4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Anthropic å®˜æ–¹å¸‚åœºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">github.com/anthropics/â€¦</a> Â ï¼Œå®˜æ–¹çš„å’±å°±ä¸ç”¨å¤šè¯´äº†ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/405379c69ee74abe8c821173f724a9ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=uVMGEC7PqxyLZ9OkACeJioaSG5M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Anthropic é»‘å®¢æ¾å† å†›å¤§ä½¬çš„ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faffaan-m%2Feverything-claude-code" target="_blank" title="https://github.com/affaan-m/everything-claude-code" ref="nofollow noopener noreferrer">github.com/affaan-m/evâ€¦</a></p>
<p>ä¸ä»…åŒ…æ‹¬ skillsï¼Œè¿˜åŒ…æ‹¬ commandsã€subagentsã€rulesã€hooks ç­‰ï¼Œæ AI Coding ä¸€å®šä¸èƒ½é”™è¿‡ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bdeb4d54c6b417b840aa0316fe25370~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=dUb7thzNve3PbwluuyOKulV0CEM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fobra%2Fsuperpowers" target="_blank" title="https://github.com/obra/superpowers" ref="nofollow noopener noreferrer">github.com/obra/superpâ€¦</a> Â å¦å¤–ä¸€ä¸ªæ¯”è¾ƒç«çˆ†çš„ Coding ç›¸å…³çš„ä»“åº“ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b74f456ac1e42b790b86431e4a0284f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=602rvJyRpZsYxqI6BU7U4fpZAOg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘çš„ Skills æ’ä»¶å¸‚åœºï¼ˆå¤¹å¸¦ä¸€ä¸‹ç§è´§ï¼Œå“ˆå“ˆï¼Œå®Œå…¨å…è´¹ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fchujianyun%2Fskills" target="_blank" title="https://github.com/chujianyun/skills" ref="nofollow noopener noreferrer">github.com/chujianyun/â€¦</a> Â åŒ…æ‹¬æç¤ºè¯è‡ªåŠ¨ä¼˜åŒ–å’Œ skills è‡ªåŠ¨åŒæ­¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec6e915e6e8441fe89596151b9c124c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=e2cxr2vyMtMMnwaWAYBaWv4sDTw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¾ˆå¤šæœ‹å‹å†™æç¤ºè¯æ—¶å­˜åœ¨ä¸¤ä¸ªç—›ç‚¹ï¼Œä¸€ä¸ªæ˜¯å¯èƒ½ä¼šè¯´å¾—ä¸å¤Ÿæ¸…æ¥šï¼Œå­˜åœ¨æ­§ä¹‰ï¼Œè¿˜æœ‰ä¸€ä¸ªç—›ç‚¹å°±æ˜¯ä¸çŸ¥é“æœ‰å“ªäº›ä¸“ä¸šçš„æ¡†æ¶è®°ä¸ä½ï¼Œç„¶åä¹Ÿä¸ä¼šå†™ã€‚</p>
<p>èº«è¾¹æœ‰æœ‹å‹åš AI Â ä¸šåŠ¡è‡ªå·±å†™ä¸€ä¸ªåˆç‰ˆæç¤ºè¯ï¼Œç„¶åç”¨æˆ‘çš„æç¤ºè¯è‡ªåŠ¨ä¼˜åŒ– skill åŒ¹é…æœ€ä¸“ä¸šçš„æ¡†æ¶ï¼Œç„¶åæ¾„æ¸…å’Œè¿›è¡Œä¼˜åŒ–ï¼Œåé¦ˆæ•ˆæœæœ‰æå‡ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be287f7690b24d6f893fe86e3fed3695~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=ICD%2B2EnyyGkx%2FE7UHSQuBsyn2fM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fskills.sh%2F" target="_blank" title="https://skills.sh/" ref="nofollow noopener noreferrer">skills.sh/</a> Â è¿™ä¸ªç½‘ç«™çš„æœ€å¤§ç‰¹è‰²å°±æ˜¯æ”¯æŒä¸€ä¸ªæŒ‡ä»¤ï¼Œè‡ªåŠ¨æ£€æµ‹å¤šä¸ªçŸ¥å Agentï¼Œè‡ªåŠ¨ä¸€é”®å®‰è£…ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2f6df4ace104d6e82ce4741c50cb3c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=oMsCRRrb5QG4OVYnnsVWH6lsH28%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Qoder ç¤¾åŒº <a href="https://link.juejin.cn?target=https%3A%2F%2Fqoder-community.pages.dev%2Fzh%2Fskills%2F" target="_blank" title="https://qoder-community.pages.dev/zh/skills/" ref="nofollow noopener noreferrer">qoder-community.pages.dev/zh/skills/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f655c1c3b7344b5be55dec89a69577e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=k882SUB0l%2FRhsCDOdNNX3dS4yo0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™é‡Œæä¾›äº†å¾ˆå¤š skillsï¼Œæ¯”è¾ƒå¤§çš„ç‰¹è‰²å°±æ˜¯æŒ‰ç…§å²—ä½è¿›è¡Œåˆ†ç±»ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ced235b80bec45f38117d78454a7af1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=6M5ewUckYyJinLzt6EWENgSwzdo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®˜æ–¹ä¹Ÿä¼šç²¾é€‰ä¸€äº›é«˜è´¨é‡çš„ skillsã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51a49cb0358b42de80637cb70f225d65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=ud%2BNfcWxhRHGHkYvaJDVAk1s%2FJg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fskillsmp.com%2F" target="_blank" title="https://skillsmp.com/" ref="nofollow noopener noreferrer">skillsmp.com/</a> Â å¯ä»¥çœ‹åˆ° skills çš„å¢é•¿è¶‹åŠ¿ã€‚é‡Œé¢çš„ skills éå¸¸é½å…¨ï¼Œè€Œä¸”æ”¯æŒåˆ†ç±»å’Œæ’åºã€‚</p>
<hr/>
<p>ä½ è¿˜æœ‰å…¶ä»–éå¸¸å¥½çš„ skills æ’ä»¶å’Œèšåˆå¸‚åœºï¼Ÿæ¬¢è¿ç•™è¨€è¡¥å……ï¼</p>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š<strong>æ‚Ÿé¸£AI</strong>ï¼Œåç»­ä¼šé™†ç»­åˆ†äº«æ¯”è¾ƒæœ‰ç”¨çš„ AI å·¥å…·å’Œæ¯”è¾ƒå¥½çš„ AI ç»éªŒï¼Œæ¯”è¾ƒå®¢è§‚ç†æ€§çš„ AI è§‚ç‚¹ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/274f08d089e94a15b0e0636a834f983d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211229&amp;x-signature=EzbZBGqHFdAI04PIul6sCDMtelk%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7604080364354043931</link>    <guid>https://juejin.cn/post/7604080364354043931</guid>    <pubDate>2026-02-09T03:07:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604080364354043931" data-draft-id="7604080364353962011" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ç³»ç»Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T03:07:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Aniugel"/> <meta itemprop="url" content="https://juejin.cn/user/3034307824198407"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3034307824198407/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Aniugel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T03:07:21.000Z" title="Mon Feb 09 2026 03:07:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€æ•´ä½“æ¶æ„è®¾è®¡ï¼ˆæ ¸å¿ƒåŸåˆ™ï¼‰</h3>
<p>å…ˆæ˜ç¡®æ•´ä½“æµç¨‹å’Œæ ¸å¿ƒçº¦æŸï¼Œç¡®ä¿ Cookies ä»…å­˜å‚¨åœ¨è®¤è¯ä¸­å¿ƒåŸŸåä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc3290f3e98a42318021eae316cebada~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5pdWdlbA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211240&amp;x-signature=dD7QRuoDyilshbCVGxgN2XepNUc%3D" alt="deepseek_mermaid_20260209_441885.png" loading="lazy"/></p>
<p>æ ¸å¿ƒçº¦æŸï¼š</p>
<ul>
<li>ä»… <strong>SSO è®¤è¯ä¸­å¿ƒåŸŸå</strong> ä¸‹å­˜å‚¨ç™»å½•æ€ Cookieï¼ˆå¦‚ <code>sso_token</code>ï¼‰ï¼›</li>
<li>å„ä¸šåŠ¡ç³»ç»Ÿå‰ç«¯<strong>ä¸å­˜å‚¨ä»»ä½•ç™»å½•æ€ Cookie</strong>ï¼Œä»…åœ¨å†…å­˜ /localStorage å­˜å‚¨ä¸´æ—¶ä¸šåŠ¡ tokenï¼›</li>
<li>è·¨åŸŸç™»å½•æ€é€šè¿‡ã€Œæˆæƒç æ¨¡å¼ã€ä¼ é€’ï¼Œé¿å… Cookie è·¨åŸŸé—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-1">äºŒã€å„è§’è‰²èŒè´£ä¸æä¾›çš„æœåŠ¡</h3>
<h4 data-id="heading-2">1. å‰ç«¯ï¼ˆVue3ï¼‰ï¼šæ ¸å¿ƒèŒè´£æ˜¯ã€Œæ—  Cookie ç™»å½•æ€ç®¡ç† + è·¨åŸŸè®¤è¯è·³è½¬ã€</h4>
<h5 data-id="heading-3">æ ¸å¿ƒèŒè´£</h5>








































<table><thead><tr><th>èŒè´£é¡¹</th><th>å…·ä½“æ“ä½œ</th><th>æŠ€æœ¯å®ç°</th></tr></thead><tbody><tr><td>ç™»å½•æ€æ£€æµ‹</td><td>åˆå§‹åŒ–æ—¶æ£€æµ‹å½“å‰æ˜¯å¦æœ‰æœ‰æ•ˆä¸šåŠ¡ tokenï¼Œæ— åˆ™è·³è½¬è®¤è¯ä¸­å¿ƒ</td><td>è·¯ç”±å®ˆå«ï¼ˆbeforeEachï¼‰</td></tr><tr><td>è®¤è¯è·³è½¬</td><td>æ‹¼æ¥è®¤è¯ä¸­å¿ƒåœ°å€ + ä¸šåŠ¡ç³»ç»Ÿå›è°ƒåœ°å€ï¼Œè·³è½¬è‡³ SSO ç™»å½•é¡µ</td><td>åŠ¨æ€æ‹¼æ¥ URL å‚æ•°</td></tr><tr><td>æˆæƒç å¤„ç†</td><td>è®¤è¯ä¸­å¿ƒé‡å®šå‘å›ä¸šåŠ¡ç³»ç»Ÿæ—¶ï¼Œè§£æ URL ä¸­çš„æˆæƒç </td><td>URLSearchParams</td></tr><tr><td>ä¸´æ—¶ token ç®¡ç†</td><td>å­˜å‚¨ä¸šåŠ¡åç«¯è¿”å›çš„ä¸´æ—¶ tokenï¼ˆå†…å­˜ /localStorageï¼‰ï¼Œæ—  Cookie</td><td>Pinia/Vuex + å†…å­˜å˜é‡</td></tr><tr><td>æ¥å£è¯·æ±‚æ‹¦æˆª</td><td>æ‰€æœ‰æ¥å£è¯·æ±‚æºå¸¦ä¸´æ—¶ tokenï¼ˆHeader ä¸­ï¼‰ï¼Œæ—  Cookie ä¼ é€’</td><td>Axios æ‹¦æˆªå™¨</td></tr><tr><td>ç™»å‡ºå¤„ç†</td><td>è·³è½¬è®¤è¯ä¸­å¿ƒç™»å‡ºæ¥å£ï¼Œæ¸…é™¤æœ¬åœ°ä¸´æ—¶ token</td><td>è·³è½¬ SSO ç™»å‡ºåœ°å€ + æ¸…é™¤æœ¬åœ°å­˜å‚¨</td></tr></tbody></table>
<h5 data-id="heading-4">å‰ç«¯æä¾›çš„æœåŠ¡</h5>
<ul>
<li>æ ‡å‡†åŒ–çš„è®¤è¯è·³è½¬ç»„ä»¶ï¼ˆå¯å¤ç”¨çš„ SSO ç™»å½•è·³è½¬é€»è¾‘ï¼‰ï¼›</li>
<li>ç»Ÿä¸€çš„ token ç®¡ç†å·¥å…·ï¼ˆPinia/Vuex æ¨¡å—ï¼Œå°è£… token å¢åˆ æŸ¥ï¼‰ï¼›</li>
<li>è·¨åŸŸè®¤è¯å›è°ƒå¤„ç†é¡µé¢ï¼ˆcallback.vueï¼‰ï¼›</li>
<li>æ—  Cookie çš„æ¥å£è¯·æ±‚å°è£…ï¼ˆAxios æ‹¦æˆªå™¨ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-5">2. åç«¯ï¼šæ ¸å¿ƒèŒè´£æ˜¯ã€Œæˆæƒç æ ¡éªŒ + ä¸šåŠ¡ token ç”Ÿæˆ + è·¨åŸŸè®¤è¯æ¥å£ã€</h4>
<h5 data-id="heading-6">æ ¸å¿ƒèŒè´£ï¼ˆåˆ†ã€Œè®¤è¯ä¸­å¿ƒåç«¯ã€å’Œã€Œä¸šåŠ¡ç³»ç»Ÿåç«¯ã€ï¼‰</h5>













































<table><thead><tr><th>è§’è‰²</th><th>èŒè´£é¡¹</th><th>å…·ä½“æ“ä½œ</th></tr></thead><tbody><tr><td>è®¤è¯ä¸­å¿ƒåç«¯</td><td>ç™»å½•æ¥å£</td><td>éªŒè¯ç”¨æˆ·åå¯†ç ï¼Œç”Ÿæˆ sso_tokenï¼Œå­˜å‚¨è‡³è®¤è¯ä¸­å¿ƒ Cookieï¼ˆä»…æœ¬åŸŸåï¼‰</td></tr><tr><td>è®¤è¯ä¸­å¿ƒåç«¯</td><td>æˆæƒç ç”Ÿæˆ</td><td>éªŒè¯ä¸šåŠ¡ç³»ç»Ÿåˆæ³•æ€§ï¼Œç”Ÿæˆä¸€æ¬¡æ€§æˆæƒç ï¼Œé‡å®šå‘å›ä¸šåŠ¡ç³»ç»Ÿ</td></tr><tr><td>è®¤è¯ä¸­å¿ƒåç«¯</td><td>æˆæƒç æ ¡éªŒ</td><td>æ¥æ”¶ä¸šåŠ¡åç«¯çš„æ ¡éªŒè¯·æ±‚ï¼ŒéªŒè¯æˆæƒç æœ‰æ•ˆæ€§ï¼Œè¿”å› sso_token</td></tr><tr><td>è®¤è¯ä¸­å¿ƒåç«¯</td><td>ç™»å‡ºæ¥å£</td><td>æ¸…é™¤è®¤è¯ä¸­å¿ƒ Cookie ä¸­çš„ sso_tokenï¼Œå¹¶é‡å®šå‘è‡³å„ä¸šåŠ¡ç³»ç»Ÿç™»å‡ºé¡µ</td></tr><tr><td>ä¸šåŠ¡ç³»ç»Ÿåç«¯</td><td>æˆæƒç å…‘æ¢</td><td>æ¥æ”¶å‰ç«¯çš„æˆæƒç ï¼Œè°ƒç”¨è®¤è¯ä¸­å¿ƒæ¥å£æ ¡éªŒï¼Œè·å– sso_token</td></tr><tr><td>ä¸šåŠ¡ç³»ç»Ÿåç«¯</td><td>ä¸šåŠ¡ token ç”Ÿæˆ</td><td>åŸºäº sso_token ç”Ÿæˆä¸šåŠ¡ç³»ç»Ÿä¸“å±ä¸´æ—¶ tokenï¼ˆJWTï¼‰ï¼Œè¿”å›å‰ç«¯</td></tr><tr><td>ä¸šåŠ¡ç³»ç»Ÿåç«¯</td><td>æ¥å£é‰´æƒ</td><td>æ ¡éªŒå‰ç«¯æºå¸¦çš„ä¸šåŠ¡ tokenï¼Œæ—  Cookie æ ¡éªŒ</td></tr></tbody></table>
<h5 data-id="heading-7">åç«¯æä¾›çš„æœåŠ¡</h5>
<ul>
<li>è®¤è¯ä¸­å¿ƒï¼šç™»å½• / ç™»å‡º / æˆæƒç ç”Ÿæˆ / æˆæƒç æ ¡éªŒæ¥å£ï¼›</li>
<li>ä¸šåŠ¡ç³»ç»Ÿï¼šæˆæƒç å…‘æ¢æ¥å£ã€ä¸šåŠ¡ token æ ¡éªŒæ¥å£ã€ç»Ÿä¸€é‰´æƒæ‹¦æˆªå™¨ï¼›</li>
<li>è·¨åŸŸé…ç½®ï¼šå…è®¸ä¸šåŠ¡ç³»ç»Ÿå‰ç«¯è·¨åŸŸè°ƒç”¨è®¤è¯ä¸­å¿ƒæ¥å£ï¼ˆCORS é…ç½®ï¼‰ï¼›</li>
<li>å®‰å…¨ç­–ç•¥ï¼šCookie çš„ HttpOnly/Secure/SameSite é…ç½®ï¼Œé˜²æ­¢ CSRF/XSSã€‚</li>
</ul>
<h4 data-id="heading-8">3. è¿ç»´ï¼šæ ¸å¿ƒèŒè´£æ˜¯ã€ŒåŸŸå / ç½‘ç»œé…ç½® + å®‰å…¨ç­–ç•¥ + éƒ¨ç½²è¿ç»´ã€</h4>
<h5 data-id="heading-9">æ ¸å¿ƒèŒè´£</h5>








































<table><thead><tr><th>èŒè´£é¡¹</th><th>å…·ä½“æ“ä½œ</th><th>æŠ€æœ¯å®ç°</th></tr></thead><tbody><tr><td>åŸŸåè§„åˆ’</td><td>ç‹¬ç«‹çš„è®¤è¯ä¸­å¿ƒåŸŸåï¼ˆå¦‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fsso.yourdomain.com" target="_blank" title="https://sso.yourdomain.com" ref="nofollow noopener noreferrer">sso.yourdomain.com</a>ï¼‰ï¼Œä¸ä¸šåŠ¡ç³»ç»ŸåŸŸåéš”ç¦»</td><td>DNS è§£æé…ç½®</td></tr><tr><td>HTTPS é…ç½®</td><td>æ‰€æœ‰åŸŸåå¼ºåˆ¶ HTTPSï¼ˆCookie çš„ Secure å±æ€§è¦æ±‚ï¼‰</td><td>Nginx é…ç½® + SSL è¯ä¹¦éƒ¨ç½²</td></tr><tr><td>è·¨åŸŸé…ç½®</td><td>Nginx å±‚é¢é…ç½® CORSï¼Œå…è®¸ä¸šåŠ¡ç³»ç»Ÿè·¨åŸŸè®¿é—®è®¤è¯ä¸­å¿ƒ</td><td>Nginx çš„ add_header Access-Control-*</td></tr><tr><td>Cookie å®‰å…¨é…ç½®</td><td>ç¡®ä¿è®¤è¯ä¸­å¿ƒ Cookie ä»…åœ¨æœ¬åŸŸåç”Ÿæ•ˆï¼Œç¦æ­¢è·¨åŸŸæºå¸¦</td><td>Nginx / åç«¯åŒé‡é…ç½® Cookie å±æ€§</td></tr><tr><td>éƒ¨ç½²æ¶æ„</td><td>è®¤è¯ä¸­å¿ƒæœåŠ¡é«˜å¯ç”¨éƒ¨ç½²ï¼Œä¸šåŠ¡ç³»ç»Ÿä¸è®¤è¯ä¸­å¿ƒç½‘ç»œäº’é€š</td><td>è´Ÿè½½å‡è¡¡ï¼ˆLBï¼‰+ é›†ç¾¤éƒ¨ç½²</td></tr><tr><td>æ—¥å¿—ç›‘æ§</td><td>ç›‘æ§è®¤è¯ä¸­å¿ƒç™»å½• / ç™»å‡ºæ—¥å¿—ï¼Œæ’æŸ¥è·¨åŸŸè®¤è¯é—®é¢˜</td><td>ELK/Prometheus + Grafana</td></tr></tbody></table>
<h5 data-id="heading-10">è¿ç»´æä¾›çš„æœåŠ¡</h5>
<ul>
<li>ç‹¬ç«‹çš„ SSO è®¤è¯ä¸­å¿ƒåŸŸååŠ SSL è¯ä¹¦éƒ¨ç½²ï¼›</li>
<li>å„ä¸šåŠ¡ç³»ç»ŸåŸŸåä¸è®¤è¯ä¸­å¿ƒåŸŸåçš„ DNS è§£æï¼›</li>
<li>Nginx å±‚é¢çš„ HTTPS å¼ºåˆ¶è·³è½¬ã€CORS é…ç½®ã€Cookie å®‰å…¨é…ç½®ï¼›</li>
<li>è®¤è¯ä¸­å¿ƒæœåŠ¡çš„é«˜å¯ç”¨éƒ¨ç½²ï¼ˆé›†ç¾¤ / è´Ÿè½½å‡è¡¡ï¼‰ï¼›</li>
<li>æ—¥å¿—ç›‘æ§ç³»ç»Ÿï¼ˆè®¤è¯ä¸­å¿ƒç™»å½•æ—¥å¿—ã€è·¨åŸŸè®¿é—®æ—¥å¿—ï¼‰ï¼›</li>
<li>å®‰å…¨ç­–ç•¥é…ç½®ï¼ˆWAF é˜²æŠ¤ã€æ¥å£é™æµã€Cookie é˜²ç¯¡æ”¹ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-11">ä¸‰ã€å…³é”®å®‰å…¨æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>è®¤è¯ä¸­å¿ƒ Cookie å¿…é¡»é…ç½®ï¼š<code>HttpOnly=true</code>ï¼ˆé˜²æ­¢ XSSï¼‰ã€<code>Secure=true</code>ï¼ˆä»… HTTPSï¼‰ã€<code>SameSite=Strict</code>ï¼ˆç¦æ­¢è·¨åŸŸæºå¸¦ï¼‰ï¼›</li>
<li>æˆæƒç å¿…é¡»æ˜¯<strong>ä¸€æ¬¡æ€§ã€çŸ­æœŸæœ‰æ•ˆ</strong>ï¼ˆå¦‚ 5 åˆ†é’Ÿï¼‰ï¼Œé˜²æ­¢å¤ç”¨ï¼›</li>
<li>ä¸šåŠ¡ç³»ç»Ÿä¸´æ—¶ token å»ºè®®<strong>çŸ­æœŸæœ‰æ•ˆ</strong>ï¼ˆå¦‚ 2 å°æ—¶ï¼‰ï¼Œå‰ç«¯å®šæœŸé™é»˜åˆ·æ–°ï¼ˆè°ƒç”¨ä¸šåŠ¡åç«¯åˆ·æ–°æ¥å£ï¼Œå†è°ƒç”¨è®¤è¯ä¸­å¿ƒæ ¡éªŒ sso_tokenï¼‰ï¼›</li>
<li>æ‰€æœ‰æ¥å£å¿…é¡» HTTPSï¼Œé˜²æ­¢ token æ˜æ–‡ä¼ è¾“ã€‚</li>
</ol>
<h3 data-id="heading-12">æ€»ç»“</h3>
<ol>
<li><strong>å‰ç«¯ï¼ˆVue3ï¼‰</strong> ï¼šæ ¸å¿ƒæ˜¯ã€Œæ—  Cookie ç™»å½•æ€ç®¡ç†ã€ï¼Œé€šè¿‡è·¯ç”±å®ˆå«è·³è½¬è®¤è¯ä¸­å¿ƒï¼Œè§£ææˆæƒç å…‘æ¢ä¸´æ—¶ tokenï¼Œæ¥å£è¯·æ±‚æºå¸¦ tokenï¼ˆHeaderï¼‰ï¼›</li>
<li><strong>åç«¯</strong>ï¼šè®¤è¯ä¸­å¿ƒè´Ÿè´£ç”Ÿæˆ sso_token å¹¶å­˜å‚¨è‡³è‡ªèº« Cookieï¼Œä¸šåŠ¡ç³»ç»Ÿè´Ÿè´£æ ¡éªŒæˆæƒç ã€ç”Ÿæˆä¸šåŠ¡ä¸´æ—¶ tokenï¼›</li>
<li><strong>è¿ç»´</strong>ï¼šæ ¸å¿ƒæ˜¯åŸŸåéš”ç¦»ã€HTTPS é…ç½®ã€Cookie å®‰å…¨ç­–ç•¥ï¼Œç¡®ä¿ä»…è®¤è¯ä¸­å¿ƒå­˜å‚¨ Cookieï¼Œæœç»è·¨åŸŸ Cookie é£é™©ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonâ€”â€”å½»åº•æ˜ç™½Super() è¯¥å¦‚ä½•ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7603854784865796136</link>    <guid>https://juejin.cn/post/7603854784865796136</guid>    <pubDate>2026-02-09T02:52:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603854784865796136" data-draft-id="7603584155785691186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonâ€”â€”å½»åº•æ˜ç™½Super() è¯¥å¦‚ä½•ä½¿ç”¨"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-02-09T02:52:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AbsoluteLogic"/> <meta itemprop="url" content="https://juejin.cn/user/2068626334032586"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonâ€”â€”å½»åº•æ˜ç™½Super() è¯¥å¦‚ä½•ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2068626334032586/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AbsoluteLogic
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:52:14.000Z" title="Mon Feb 09 2026 02:52:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä»€ä¹ˆæ˜¯Super()</h3>
<p>å¦‚æœæŠŠç±»æ¯”ä½œè¡¨æ¼”è€…çš„è¯ï¼Œ<code>Super()</code>åˆ™æ˜¯æŒ‰ç…§æ¸…å•ï¼ˆMROï¼‰è®©ä¸‹ä¸€ä½è¡¨æ¼”è€…â€œç»§ç»­â€ä»–çš„è¡¨æ¼”</p>
<p>æ²¡å¬æ˜ç™½æ²¡å…³ç³»ï¼Œæˆ‘ä»¬é€šè¿‡å®é™…çš„ä¾‹å­æ¥é€æ­¥æ‹†è§£<code>Super()</code>çš„è¿è¡Œé€»è¾‘ï¼Œåˆ°æ—¶å€™æˆ‘ä»¬å°±èƒ½æ˜ç™½è¿™å¥è¯çš„å«ä¹‰</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆè¦ç”¨Super()</h3>
<p>å’Œæ‹†è§£<code>Property</code>ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨æ‹†è§£<code>Super()</code>å‰ä¹Ÿè¦çŸ¥é“æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨å®ƒ</p>
<p>æˆ‘ä»¬åŒæ ·é€šè¿‡å®é™…çš„ä»£ç ç¤ºä¾‹æ¥ç†è§£</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicOrder</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, price</span>):
        self.price = price
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self.price
        <span class="hljs-comment"># è¿”å›åŸºç¡€ä»·æ ¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemberOrder</span>(<span class="hljs-title class_ inherited__">BasicOrder</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self.price * <span class="hljs-number">0.9</span>
        <span class="hljs-comment"># è¿”å›ä¼šå‘˜æŠ˜åä»·</span>
        
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PromotionOrder</span>(<span class="hljs-title class_ inherited__">BasicOrder</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">if</span> self.price &gt; <span class="hljs-number">200</span>:
            <span class="hljs-keyword">return</span> self.price - <span class="hljs-number">20</span>
            <span class="hljs-comment"># æ»¡å‡æ¡ä»¶</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> self.price
        
a = BasicOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(a.get_total())
<span class="hljs-comment"># åŸä»·</span>
b = MemberOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(b.get_total())
<span class="hljs-comment"># ä¼šå‘˜æŠ˜åä»·</span>
c = PromotionOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(c.get_total())
<span class="hljs-comment"># æ»¡å‡ä»·æ ¼</span>
</code></pre>
<p>æˆ‘ä»¬å®šä¹‰äº†ä¸¤ç§æŠ˜æ‰£æœºåˆ¶ï¼Œä¸€ç§æ˜¯ä¼šå‘˜ä»·ï¼Œä¸€ç§æ˜¯æ»¡å‡ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒçš„æŠ˜æ‰£æ–¹å¼ï¼Œç®—å‡ºæ‰“æŠ˜åçš„ä»·æ ¼</p>
<p>ä½†æ˜¯ï¼Œæœ‰ä¸€ç§æƒ…å†µæˆ‘ä»¬å¹¶æ²¡æœ‰è€ƒè™‘ï¼Œé‚£å°±æ˜¯ä¸¤ç§æŠ˜æ‰£åŒæ—¶è§¦å‘çš„æƒ…å†µã€‚å¦‚æœæˆ‘ä»¬è§„å®šï¼Œå½“ä¸¤ä¸ªæŠ˜æ‰£æ–¹å¼åŒæ—¶æ»¡è¶³æ—¶ï¼Œå…ˆè®¡ç®—ä¼šå‘˜æŠ˜åä»·ï¼Œå†è€ƒè™‘æ»¡å‡ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ä¿®æ”¹è¿™æ®µä»£ç å‘¢ï¼Ÿ</p>
<p>å¾ˆç®€å•ï¼Œæˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªç±»ï¼Œå°±åƒè¿™æ ·</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicOrder</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, price</span>):
        self.price = price

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self.price
        <span class="hljs-comment"># è¿”å›åŸºç¡€ä»·æ ¼</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemberOrder</span>(<span class="hljs-title class_ inherited__">BasicOrder</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self.price * <span class="hljs-number">0.9</span>
        <span class="hljs-comment"># è¿”å›ä¼šå‘˜æŠ˜åä»·</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">PromotionOrder</span>(<span class="hljs-title class_ inherited__">BasicOrder</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">if</span> self.price &gt; <span class="hljs-number">200</span>:
            <span class="hljs-keyword">return</span> self.price - <span class="hljs-number">20</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> self.price
        <span class="hljs-comment"># è§¦å‘æ»¡å‡</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FinalOrder</span>(<span class="hljs-title class_ inherited__">MemberOrder</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        member_price = MemberOrder.get_total(self)
        <span class="hljs-keyword">if</span> member_price &gt; <span class="hljs-number">200</span>:
            <span class="hljs-keyword">return</span> member_price - <span class="hljs-number">20</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> member_price
        
a = BasicOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(a.get_total())
<span class="hljs-comment"># åŸä»·</span>
b = MemberOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(b.get_total())
<span class="hljs-comment"># ä¼šå‘˜æŠ˜åä»·</span>
c = PromotionOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(c.get_total())
<span class="hljs-comment"># æ»¡å‡ä»·æ ¼</span>
d = FinalOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(d.get_total())
<span class="hljs-comment"># åŒé‡æŠ˜æ‰£åçš„ä»·æ ¼</span>
</code></pre>
<p>å¦‚æœè¦æ›´æ¢æŠ˜æ‰£é¡ºåºï¼Œå…ˆè®¡ç®—æ»¡å‡ï¼Œå†è®¡ç®—ä¼šå‘˜ä»·ï¼Œåªè¦å¯¹<code>FinalOrder</code>è¿›è¡Œä¿®æ”¹å°±å¥½</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FinalOrder</span>(<span class="hljs-title class_ inherited__">PromotionOrder</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        count_price = PromotionOrder.get_total(self)
        <span class="hljs-keyword">return</span> count_price * <span class="hljs-number">0.9</span>
</code></pre>
<p>æˆ‘ä»¬è¿™ç§ä¿®æ”¹ï¼Œåœ¨ç±»çš„æ•°é‡ä¹Ÿå°±æ˜¯æŠ˜æ‰£æ–¹å¼æ¯”è¾ƒå°‘æ—¶æ²¡ä»€ä¹ˆé—®é¢˜ã€‚ä½†å¦‚æœç±»çš„æ•°é‡æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬å°±è¦æƒ³åŠæ³•ï¼Œå¦‚ä½•ä¸ç”¨è¿›è¡Œè¿™ä¹ˆå¤æ‚çš„ä¿®æ”¹ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨<code>super()</code>çš„åŸå› </p>
<h3 data-id="heading-2">Super()çš„ä½œç”¨</h3>
<p>æˆ‘ä»¬ç”¨<code>super()</code>å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œä¼˜åŒ–</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicOrder</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, price</span>):
        self.price = price

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self.price
        <span class="hljs-comment"># è¿”å›åŸºç¡€ä»·æ ¼</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemberOrder</span>(<span class="hljs-title class_ inherited__">BasicOrder</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().get_total() * <span class="hljs-number">0.9</span>
        <span class="hljs-comment"># è¿”å›ä¼šå‘˜æŠ˜åä»·</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">PromotionOrder</span>(<span class="hljs-title class_ inherited__">BasicOrder</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">super</span>().self.price &gt; <span class="hljs-number">200</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().get_total() - <span class="hljs-number">20</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().get_total()
        <span class="hljs-comment"># è§¦å‘æ»¡å‡</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FinalOrder</span>(MemberOrder, PromotionOrder):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().get_total()
        
a = BasicOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(a.get_total())
<span class="hljs-comment"># åŸä»·</span>
b = MemberOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(b.get_total())
<span class="hljs-comment"># ä¼šå‘˜æŠ˜åä»·</span>
c = PromotionOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(c.get_total())
<span class="hljs-comment"># æ»¡å‡ä»·æ ¼</span>
d = FinalOrder(<span class="hljs-number">300</span>)
<span class="hljs-built_in">print</span>(d.get_total())
<span class="hljs-comment"># åŒé‡æŠ˜æ‰£åçš„ä»·æ ¼</span>
<span class="hljs-built_in">print</span>(FinalOrder.mro())
<span class="hljs-comment"># æ‰“å°Mroæ¸…å•</span>
</code></pre>
<p>æˆ‘ä»¬è¦æ³¨æ„æœ€åçš„<code>Mroæ¸…å•</code>ï¼Œå®ƒçš„è¾“å‡ºç»“æœæ˜¯<code>[&lt;class '__main__.FinalOrder'&gt;, &lt;class '__main__.MemberOrder'&gt;, &lt;class '__main__.PromotionOrder'&gt;, &lt;class '__main__.BasicOrder'&gt;, &lt;class 'object'&gt;]</code>ã€‚è¿™ä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬è®¡ç®—<code>FinalOrder</code>ä¸­çš„æœ€åä»·æ ¼æ—¶ï¼Œç¨‹åºçš„æ‰§è¡Œé¡ºåº</p>
<p>pythonæŒ‰ç…§è¿™ä¸ªé¡ºåºï¼Œå…ˆä»<code>FinalOrder-MemberOrder-PromotionOrder-BasicOrder</code>è¿™ä¸ªé“¾æ¡è¿›è¡Œé€’è¿›å¯»æ‰¾ï¼Œç„¶åå†ä»åæ–¹å‘<code>BasicOrder-PromotionOrder-MemberOrder-FinalOrder</code>è¿›è¡Œå›å½’è®¡ç®—</p>
<p>ä¸Šé¢çš„ä»£ç å°±æ˜¯æŒ‰ç…§è¿™ä¸ªé¡ºåºï¼Œå…ˆæŠŠåŸä»·<code>BasicOrder</code>ç»™<code>PromotionOrder</code>è®¡ç®—æ»¡å‡ï¼Œå†å°†æ»¡å‡åçš„å€¼ç»™<code>MemberOrder</code>è®¡ç®—ä¼šå‘˜æŠ˜æ‰£ä»·ï¼Œæœ€åæŠŠå€¼ç»™<code>FinalOrder</code></p>
<p><code>return super().get_total()</code>å…¶å®å°±å¯ä»¥ç†è§£ä¸º<code>è¯·MROé“¾æ¡ä¸Šçš„ä¸‹ä¸€ä½å…ˆç®—å‡ºç»“æœç»™æˆ‘</code></p>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦æ”¹å˜æŠ˜æ‰£è®¡ç®—çš„æ–¹å¼ï¼Œæˆ‘ä»¬ä¹Ÿæ— é¡»å¯¹<code>FinalOrder</code>ä¸­çš„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œåªéœ€è¦ä¿®æ”¹ç»§æ‰¿é¡ºåºï¼Œä¹Ÿå°±æ˜¯å¯¹è¿™ä¸ªâ€œé“¾æ¡â€è¿›è¡Œè°ƒæ•´å°±å¥½</p>
<p>å½“æˆ‘ä»¬ä¿®æ”¹æŸäº›ç±»åæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸ç”¨åƒä¹‹å‰çš„â€œç¡¬ç¼–ç â€é‚£æ ·é€ä¸ªä¿®æ”¹ï¼Œåªè¦ç¡®ä¿ç»§æ‰¿çš„ç±»åæ­£ç¡®ï¼Œ<code>super()</code>ä¼šè‡ªå·±æŒ‰ç…§MROè¿™ä¸ªé“¾æ¡è¿›è¡Œå¯»æ‰¾</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FinalOrder</span>(PromotionOrder, MemberOrder):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_total</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().get_total()
</code></pre>
<h3 data-id="heading-3">ç»“è¯­</h3>
<p>å¦‚æœæ–‡ç« ä¸­æœ‰ä»€ä¹ˆé”™è¯¯æˆ–è€…å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£ï¼Œæ„Ÿè°¢ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯è§†è§’è¯¦è§£ Agent Skill]]></title>    <link>https://juejin.cn/post/7604012106154754094</link>    <guid>https://juejin.cn/post/7604012106154754094</guid>    <pubDate>2026-02-09T03:14:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604012106154754094" data-draft-id="7604646882015232051" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯è§†è§’è¯¦è§£ Agent Skill"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T03:14:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éšæ„_"/> <meta itemprop="url" content="https://juejin.cn/user/4222562141210478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯è§†è§’è¯¦è§£ Agent Skill
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4222562141210478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éšæ„_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T03:14:42.000Z" title="Mon Feb 09 2026 03:14:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨ AI èµ‹èƒ½å‰ç«¯å¼€å‘çš„æµªæ½®ä¸­ï¼ŒAgent å·²ä»â€œè¾…åŠ©èŠå¤©â€å‡çº§ä¸ºâ€œå¯è½åœ°çš„å¼€å‘åŠ©æ‰‹â€ï¼Œè€Œ Agent Skillï¼ˆæ™ºèƒ½ä½“æŠ€èƒ½ï¼‰æ­£æ˜¯è®© Agent æ‘†è„±â€œåªä¼šè¯´ä¸ä¼šåšâ€ã€çœŸæ­£é€‚é…å‰ç«¯å¼€å‘åœºæ™¯çš„æ ¸å¿ƒèƒ½åŠ›æ”¯æ’‘ã€‚å¯¹äºå‰ç«¯å¼€å‘è€…è€Œè¨€ï¼ŒAgent Skill ä¸æ˜¯æŠ½è±¡çš„æŠ€æœ¯æ¦‚å¿µï¼Œè€Œæ˜¯èƒ½ç›´æ¥é™ä½é‡å¤å·¥ä½œã€è§„èŒƒå¼€å‘æµç¨‹ã€æå‡åä½œæ•ˆç‡çš„å®ç”¨å·¥å…·â€”â€”å°åˆ°ç»„ä»¶æ¨¡æ¿ç”Ÿæˆã€ä»£ç æ ¼å¼åŒ–ï¼Œå¤§åˆ°æ‰¹é‡é‡æ„ã€æ¥å£è”è°ƒæ ¡éªŒï¼Œéƒ½èƒ½é€šè¿‡å®šåˆ¶ Skill å®ç°è‡ªåŠ¨åŒ–è½åœ°ã€‚</p>
<p>æœ¬æ–‡å°†å®Œå…¨è´´åˆå‰ç«¯å¼€å‘å®é™…ï¼Œä» Agent Skill çš„å‡ºç°èƒŒæ™¯ã€æ ¸å¿ƒä»·å€¼ã€Cursor å®æ“ demoã€åŠ è½½é€»è¾‘ã€é«˜çº§ç”¨æ³•ï¼ˆReference/Script åŠ è½½ï¼‰ã€Token æ¶ˆè€—è§£æï¼Œåˆ°ä¸ MCP çš„æ ¸å¿ƒåŒºåˆ«ï¼Œé€ä¸€æ‹†è§£ï¼Œè®©ä½ æ—¢èƒ½å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ï¼Œä¹Ÿèƒ½ç†è§£åº•å±‚é€»è¾‘ï¼ŒçœŸæ­£æŠŠ Agent Skill èå…¥æ—¥å¸¸å¼€å‘ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Agent Skill å‡ºç°èƒŒæ™¯ï¼šå‰ç«¯å¼€å‘ä¸­ï¼ŒAI çš„â€œç—›ç‚¹â€å‚¬ç”Ÿéœ€æ±‚</h2>
<p>åœ¨ Agent Skill å‡ºç°ä¹‹å‰ï¼Œå‰ç«¯å¼€å‘è€…ä½¿ç”¨ AI å·¥å…·ï¼ˆå¦‚ Cursorã€Copilotï¼‰æ—¶ï¼Œå§‹ç»ˆé¢ä¸´ä¸‰ä¸ªæ— æ³•è§£å†³çš„æ ¸å¿ƒç—›ç‚¹ï¼Œè¿™äº›ç—›ç‚¹ç›´æ¥é™åˆ¶äº† AI ä»â€œè¾…åŠ©å·¥å…·â€å‘â€œé«˜æ•ˆåŠ©æ‰‹â€çš„è·¨è¶Šï¼Œä¹Ÿæ­£æ˜¯ Agent Skill è¯ç”Ÿçš„æ ¸å¿ƒåŸå› ï¼š</p>
<h3 data-id="heading-2">1. é‡å¤Promptï¼Œæ•ˆç‡ä½ä¸‹</h3>
<p>å‰ç«¯å¼€å‘ä¸­å­˜åœ¨å¤§é‡â€œå›ºå®šæµç¨‹ç±»â€å·¥ä½œï¼Œæ¯”å¦‚â€œç”Ÿæˆç¬¦åˆé¡¹ç›®è§„èŒƒçš„ Vue3 ç»„ä»¶â€ï¼Œâ€œæ ¼å¼åŒ– Axios è¯·æ±‚æ‹¦æˆªå™¨â€ï¼Œâ€œæ£€æŸ¥ä»£ç ä¸­çš„ ESLint é”™è¯¯å¹¶ä¿®å¤â€ã€‚æ¯æ¬¡ä½¿ç”¨ AI æ—¶ï¼Œéƒ½éœ€è¦é‡å¤è¾“å…¥å†—é•¿çš„ Promptï¼Œæ˜ç¡®é¡¹ç›®è§„èŒƒã€ä»£ç é£æ ¼ã€åŠŸèƒ½è¦æ±‚â€”â€”æ¯”å¦‚æ¯æ¬¡ç”Ÿæˆç»„ä»¶ï¼Œéƒ½è¦è¯´æ˜â€œä½¿ç”¨ Setup è¯­æ³•ç³–ã€é…åˆ TailwindCSSã€Props éœ€åšç±»å‹æ ¡éªŒã€åŒ…å« emits å£°æ˜â€ï¼Œé‡å¤æ“ä½œå ç”¨å¤§é‡å¼€å‘æ—¶é—´ã€‚</p>
<h3 data-id="heading-3">2. ä¸Šä¸‹æ–‡å‰²è£‚ï¼Œé€‚é…æ€§å·®</h3>
<p>AI æ— æ³•â€œè®°ä½â€é¡¹ç›®çš„ä¸ªæ€§åŒ–è§„åˆ™ï¼šæ¯”å¦‚é¡¹ç›®ä¸­è‡ªå®šä¹‰çš„å·¥å…·å‡½æ•°ã€æ¥å£è¯·æ±‚è§„èŒƒã€è·¯ç”±é…ç½®é€»è¾‘ã€UI ç»„ä»¶åº“çš„å°è£…è§„èŒƒç­‰ã€‚æ¯æ¬¡æé—®éƒ½éœ€è¦é‡æ–°æä¾›è¿™äº›ä¸Šä¸‹æ–‡ï¼Œå¦åˆ™ç”Ÿæˆçš„ä»£ç ä¼šä¸é¡¹ç›®è„±èŠ‚ï¼ˆæ¯”å¦‚ç”Ÿæˆçš„æŒ‰é’®ç»„ä»¶ä¸åŒ¹é…é¡¹ç›®å°è£…çš„ Button ç»„ä»¶ã€æ¥å£è¯·æ±‚æœªéµå¾ªå…¨å±€æ‹¦æˆªå™¨è§„åˆ™ï¼‰ï¼Œåç»­éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼Œåè€Œå¢åŠ å·¥ä½œé‡ã€‚</p>
<h3 data-id="heading-4">3. èƒ½åŠ›å±€é™ï¼Œæ— æ³•è”åŠ¨æ‰§è¡Œ</h3>
<p>ä¼ ç»Ÿ AI åªèƒ½â€œç”Ÿæˆä»£ç â€ï¼Œæ— æ³•â€œæ‰§è¡Œæ“ä½œâ€ï¼šæ¯”å¦‚ç”Ÿæˆæ‰¹é‡ä¿®æ”¹æ–‡ä»¶åçš„è„šæœ¬åï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±å¤åˆ¶è„šæœ¬ã€åœ¨ç»ˆç«¯æ‰§è¡Œï¼›ç”Ÿæˆæ¥å£æ–‡æ¡£åï¼Œæ— æ³•è‡ªåŠ¨å…³è”åˆ°é¡¹ç›®çš„ Swagger æ–‡æ¡£ä¸­ï¼›å‘ç°ä»£ç ä¸­çš„è·¯å¾„é”™è¯¯åï¼Œæ— æ³•è‡ªåŠ¨å®šä½å¹¶ä¿®æ”¹ã€‚AI ä¸å®é™…å¼€å‘æµç¨‹è„±èŠ‚ï¼Œæ— æ³•å½¢æˆâ€œæå‡ºéœ€æ±‚â†’AI å¤„ç†â†’å®Œæˆè½åœ°â€çš„é—­ç¯ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹ï¼ŒAgent Skill åº”è¿è€Œç”Ÿâ€”â€”å®ƒæœ¬è´¨æ˜¯â€œç»™ Agent é¢„è®¾çš„ã€å¯å¤ç”¨çš„æŠ€èƒ½æ¨¡æ¿â€ï¼ŒæŠŠå‰ç«¯å¼€å‘ä¸­çš„å›ºå®šæµç¨‹ã€é¡¹ç›®è§„èŒƒã€æ“ä½œé€»è¾‘ï¼Œå°è£…æˆ Agent èƒ½ç›´æ¥è°ƒç”¨çš„â€œæŠ€èƒ½â€ï¼Œæ— éœ€é‡å¤ Promptã€æ— éœ€åå¤æä¾›ä¸Šä¸‹æ–‡ï¼ŒAgent å°±èƒ½ç²¾å‡†é€‚é…é¡¹ç›®éœ€æ±‚ï¼Œç”šè‡³è”åŠ¨æ‰§è¡Œç›¸å…³æ“ä½œï¼ŒçœŸæ­£å®ç°â€œä¸€æ¬¡å°è£…ï¼Œå¤šæ¬¡å¤ç”¨â€çš„é«˜æ•ˆå¼€å‘æ¨¡å¼ã€‚</p>
<h2 data-id="heading-5">äºŒã€Agent Skill æ ¸å¿ƒä»·å€¼ï¼šè§£å†³å‰ç«¯ AI å¼€å‘çš„ 3 å¤§ç—›ç‚¹</h2>
<p>ç»“åˆå‰ç«¯å¼€å‘åœºæ™¯ï¼ŒAgent Skill çš„æ ¸å¿ƒä»·å€¼çš„æ˜¯â€œæ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–ã€å¯å¤ç”¨â€ï¼Œç²¾å‡†è§£å†³ä¸Šè¿°ç—›ç‚¹ï¼Œå…·ä½“è½åœ°ä¸º 3 ç‚¹ï¼Œæ¯ä¸€ç‚¹éƒ½èƒ½ç›´æ¥æå‡å¼€å‘æ•ˆç‡ï¼š</p>
<ol>
<li><strong>çœå»é‡å¤ Prompt</strong>ï¼šå°†é¡¹ç›®è§„èŒƒã€æ“ä½œæµç¨‹å°è£…æˆ Skillï¼Œè°ƒç”¨æ—¶åªéœ€è¾“å…¥ç®€å•æŒ‡ä»¤ï¼ˆå¦‚â€œç”Ÿæˆç”¨æˆ·å¡ç‰‡ç»„ä»¶â€ï¼‰ï¼ŒAgent å°±ä¼šæŒ‰ç…§ Skill ä¸­çš„é¢„è®¾è§„åˆ™æ‰§è¡Œï¼Œæ— éœ€é‡å¤è¯´æ˜ç»†èŠ‚ï¼›</li>
<li><strong>å…³è”é¡¹ç›®ä¸Šä¸‹æ–‡</strong>ï¼šSkill å¯å†…ç½®é¡¹ç›®çš„ä¸ªæ€§åŒ–é…ç½®ï¼ˆå¦‚å·¥å…·å‡½æ•°ã€æ¥å£è§„èŒƒã€ç»„ä»¶é£æ ¼ï¼‰ï¼ŒAgent è°ƒç”¨ Skill æ—¶è‡ªåŠ¨åŠ è½½è¿™äº›ä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆçš„ä»£ç ç›´æ¥é€‚é…é¡¹ç›®ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ï¼›</li>
<li><strong>è”åŠ¨æ‰§è¡Œæ“ä½œ</strong>ï¼šé€šè¿‡ Skill ä¸­çš„è„šæœ¬ï¼ˆScriptï¼‰å’Œå‚è€ƒèµ„æ–™ï¼ˆReferenceï¼‰ï¼ŒAgent ä¸ä»…èƒ½ç”Ÿæˆä»£ç ï¼Œè¿˜èƒ½æ‰§è¡Œè„šæœ¬ã€è¯»å–å‚è€ƒæ–‡æ¡£ï¼Œå®ç°â€œç”Ÿæˆâ†’æ‰§è¡Œâ†’æ ¡éªŒâ€çš„é—­ç¯ï¼ˆå¦‚æ‰¹é‡é‡æ„ä»£ç ã€è‡ªåŠ¨æ ¡éªŒæ¥å£å‚æ•°ï¼‰ã€‚</li>
</ol>
<p>ç®€å•æ¥è¯´ï¼ŒAgent Skill å°±åƒç»™å‰ç«¯ AI åŠ©æ‰‹â€œåˆ¶å®šäº†è¯¦ç»†çš„å·¥ä½œæ‰‹å†Œâ€ï¼Œæ‰‹å†Œä¸­æ˜ç¡®äº†â€œåšä»€ä¹ˆã€æ€ä¹ˆåšã€éµå¾ªä»€ä¹ˆè§„åˆ™ã€éœ€è¦ç”¨åˆ°ä»€ä¹ˆèµ„æ–™â€ï¼Œè®© AI ä»â€œåªä¼šçŒœâ€å˜æˆâ€œæ‡‚è§„åˆ™ã€ä¼šæ“ä½œâ€çš„ä¸“å±åŠ©æ‰‹ï¼Œè¿™ä¹Ÿæ˜¯å…¶ä¸ä¼ ç»Ÿ Prompt æœ€å¤§çš„åŒºåˆ«ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€å®æ“ Demoï¼šç”¨ Cursor ç©è½¬ Agent Skill</h2>
<p>Cursor æ˜¯å‰ç«¯å¼€å‘è€…æœ€å¸¸ç”¨çš„ AI ä»£ç ç¼–è¾‘å™¨ï¼Œå…¶å†…ç½®çš„ Agent Skill åŠŸèƒ½ç®€æ´ã€æ˜“ä¸Šæ‰‹ï¼Œå®Œå…¨è´´åˆå‰ç«¯å¼€å‘åœºæ™¯ã€‚ä¸‹é¢æˆ‘ä»¬ä»¥â€œå‰ç«¯æœ€å¸¸ç”¨çš„ 2 ä¸ªåœºæ™¯â€ä¸ºä¾‹ï¼Œä¸€æ­¥æ­¥æ¼”ç¤º Agent Skill çš„å®‰è£…ã€é…ç½®ã€è°ƒç”¨å…¨è¿‡ç¨‹ï¼Œæ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ï¼ˆå…¨ç¨‹æ— éœ€å¤æ‚æ“ä½œï¼Œçº¯å‰ç«¯è§†è§’ï¼Œä¸æ¶‰åŠåç«¯éƒ¨ç½²ï¼‰ã€‚</p>
<p>å‰ç½®å‡†å¤‡ï¼šç¡®ä¿ Cursor å·²æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬ï¼Œæˆ‘æ˜¯ç”¨çš„ ç›®å‰æ˜¯ <code>2.4.28</code>ï¼Œæ‰“å¼€ Cursor è®¾ç½®ï¼ˆCtrl+Shift+J / Cmd+Shift+Jï¼‰ï¼Œå¼€å¯â€œAgent Skillsâ€å¼€å…³ï¼ˆé»˜è®¤å¼€å¯ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41f6b5003c3946c691c1f9796d6e5c4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=ntDelE5KLq9%2BIgqwcX5l%2BnU2mbY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">Demo 1ï¼šåŸºç¡€ç”¨æ³•â€”â€”å°è£…â€œVue3 ç»„ä»¶ç”Ÿæˆ Skillâ€ï¼Œä¸€é”®ç”Ÿæˆç¬¦åˆé¡¹ç›®è§„èŒƒçš„ç»„ä»¶</h3>
<p>åœºæ™¯ï¼šå‰ç«¯é¡¹ç›®ä¸­ï¼Œæ‰€æœ‰ Vue3 ç»„ä»¶éƒ½éœ€éµå¾ªâ€œSetup è¯­æ³•ç³–+TailwindCSS+Props ç±»å‹æ ¡éªŒ+emits å£°æ˜â€çš„è§„èŒƒï¼Œæ¯æ¬¡ç”Ÿæˆç»„ä»¶éƒ½è¦é‡å¤è¯´æ˜ï¼Œæˆ‘ä»¬é€šè¿‡å°è£… Skill è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<ol>
<li>
<p>æ‰“å¼€ Cursorï¼Œè¿›å…¥å½“å‰å‰ç«¯é¡¹ç›®ï¼ˆå¦‚ Vue3+Tailwind é¡¹ç›®ï¼‰ï¼›</p>
</li>
<li>
<p>å¼€ Cursor è®¾ç½®ï¼ˆCtrl+Shift+J / Cmd+Shift+Jï¼‰,ç‚¹å‡»åˆ›å»º skills</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d69ddd424c914b188782d32e8422c565~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=Qr50YqXveCoRA%2BWB19k3WS9dn%2Bo%3D" alt="image.png" loading="lazy"/>
3. æ­¤æ—¶agentå¯¹è¯æ¡†å±•å¼€ï¼Œä½¿ç”¨agentç”Ÿæˆ å¯¹åº”çš„skill</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e04c9aefac7144aeafcd219f09162a26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=%2FSCGPBMkf7A4hkgO7i97Gzi0CEI%3D" alt="image.png" loading="lazy"/></p>
<ol start="4">
<li>å¯ä»¥çœ‹è§ å·²ç»ç”Ÿæˆäº† é¡¹ç›®çº§åˆ«çš„  skill</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5649f08cf4f442682c084544c8233de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=hZ7u8V1Ad%2BYOWjUGXCVH3LsugyU%3D" alt="image.png" loading="lazy"/></p>
<p>ä½ ä¹Ÿå¯ä»¥å¤åˆ¶å¯¹åº”çš„ æç¤ºè¯</p>
<pre><code class="hljs language-md" lang="md">
/create-skill Help me create this skill for Cursor: /create-skill Help me create this skill for Cursor: åå­—ä¸ºï¼švue3-component-gen é€‚ç”¨èŒƒå›´æ˜¯è¿™ä¸ª vue3-skillsçš„ é¡¹ç›®ï¼Œ å†…å®¹è§„åˆ™ä¸ºï¼š # Vue3 ç»„ä»¶ç”ŸæˆæŠ€èƒ½ï¼ˆå‰ç«¯ä¸“ç”¨ï¼‰

<span class="hljs-section">## æŠ€èƒ½æè¿°</span>

æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œç”Ÿæˆç¬¦åˆé¡¹ç›®è§„èŒƒçš„ Vue3 å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ï¼Œä¸¥æ ¼éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

<span class="hljs-bullet">1.</span> è¯­æ³•ï¼šä½¿ç”¨ <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span></span> è¯­æ³•ç³–ï¼Œä¸ä½¿ç”¨ Options APIï¼›

<span class="hljs-bullet">2.</span> æ ·å¼ï¼šä½¿ç”¨ TailwindCSSï¼Œä¸å†™åŸç”Ÿ CSSï¼Œæ ·å¼éœ€ç®€æ´ã€é€‚é…å“åº”å¼ï¼›

<span class="hljs-bullet">3.</span> Propsï¼šæ‰€æœ‰ä¼ å…¥å‚æ•°éœ€ç”¨ defineProps å®šä¹‰ï¼Œå¹¶åšç±»å‹æ ¡éªŒï¼ˆä½¿ç”¨ TypeScriptï¼‰ï¼›

<span class="hljs-bullet">4.</span> Emitsï¼šç»„ä»¶è§¦å‘çš„äº‹ä»¶éœ€ç”¨ defineEmits å£°æ˜ï¼Œæ˜ç¡®äº‹ä»¶å‚æ•°ç±»å‹ï¼›

<span class="hljs-bullet">5.</span> ç»“æ„ï¼šæ¨¡æ¿ç»“æ„æ¸…æ™°ï¼ŒåŒ…å«æ³¨é‡Šï¼Œç»„ä»¶æ ¹èŠ‚ç‚¹ä½¿ç”¨ divï¼Œæ·»åŠ åŸºç¡€æ ·å¼ç±»ï¼›

<span class="hljs-bullet">6.</span> ä¾èµ–ï¼šä¸å¼•å…¥é¡¹ç›®ä¸­æœªä½¿ç”¨çš„ä¾èµ–ï¼Œå¦‚éœ€ä½¿ç”¨ UI ç»„ä»¶ï¼Œä»…ä½¿ç”¨ Element Plusã€‚

  


<span class="hljs-section">## ä½¿ç”¨åœºæ™¯</span>

ç”¨æˆ·è¾“å…¥â€œç”ŸæˆXXç»„ä»¶â€â€œå†™ä¸€ä¸ªXXç»„ä»¶â€æ—¶ï¼Œè‡ªåŠ¨è§¦å‘è¯¥æŠ€èƒ½ï¼Œæ— éœ€é¢å¤–æç¤ºã€‚

  


<span class="hljs-section">## ç¤ºä¾‹</span>

ç”¨æˆ·éœ€æ±‚ï¼šç”Ÿæˆç”¨æˆ·å¡ç‰‡ç»„ä»¶ï¼ˆåŒ…å«å¤´åƒã€å§“åã€æ‰‹æœºå·ï¼‰

ç”Ÿæˆç»“æœéœ€ç¬¦åˆä¸Šè¿°æ‰€æœ‰è§„åˆ™ï¼ŒProps åŒ…å« avatarï¼ˆå­—ç¬¦ä¸²ï¼‰ã€nameï¼ˆå­—ç¬¦ä¸²ï¼‰ã€phoneï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œemits åŒ…å« clickï¼ˆå‚æ•°ä¸ºç”¨æˆ·ä¿¡æ¯å¯¹è±¡ï¼‰ã€‚
</code></pre>
<h4 data-id="heading-8">æ­¥éª¤ 2ï¼šè°ƒç”¨ Skillï¼Œä¸€é”®ç”Ÿæˆç»„ä»¶</h4>
<ol>
<li>
<p>é‡å¯ Cursorï¼ˆç¡®ä¿ Skill è¢«è¯†åˆ«ï¼‰ï¼›</p>
</li>
<li>
<p>æ‰“å¼€ Cursor çš„ Agent èŠå¤©æ¡†ï¼ˆCtrl+L / Cmd+Lï¼‰ï¼Œè¾“å…¥ç®€å•æŒ‡ä»¤ï¼š<code>ç”Ÿæˆç”¨æˆ·å¡ç‰‡ç»„ä»¶ï¼ŒåŒ…å«å¤´åƒã€å§“åã€æ‰‹æœºå·ã€é‚®ç®±ï¼Œ ä½¿ç”¨çš„å“ªäº›skill è¯·ä½ åˆ—å‡ºæ¥</code>ï¼›</p>
</li>
<li>
<p>æ— éœ€é¢å¤–è¡¥å……è§„èŒƒï¼ŒCursor ä¼šè‡ªåŠ¨è§¦å‘ <code>vue3-component-gen</code> Skillï¼Œç”Ÿæˆç¬¦åˆé¡¹ç›®è§„èŒƒçš„ç»„ä»¶ä»£ç ï¼Œç›´æ¥å¤åˆ¶ä½¿ç”¨å³å¯ï¼ˆæ— éœ€æ‰‹åŠ¨ä¿®æ”¹è¯­æ³•ã€æ ·å¼è§„èŒƒï¼‰ã€‚</p>
</li>
</ol>
<p>æ•ˆæœå¦‚ä¸‹ ï¼Œæ³¨æ„ä¼šåˆ—å‡º ä½¿ç”¨çš„ skill</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89b3a2da962e41ca920c5c018924473d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=FzNltfQpDXrDZMhazpPKxqrB%2BmQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bac39798999c4cf285199f2b7c11680c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=%2BQWxIZVO8FqttxLGMYepST6XjPo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce77f31abc2b439da225d3b12971e482~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=3aSaiuspn9PmKJl2KNEeO9320JE%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">Demo 2ï¼šè¿›é˜¶ç”¨æ³•â€”â€”å°è£…â€œESLint é”™è¯¯ä¿®å¤ Skillâ€ï¼Œè‡ªåŠ¨ä¿®å¤ä»£ç è§„èŒƒé—®é¢˜</h3>
<p>åœºæ™¯ï¼šå‰ç«¯é¡¹ç›®ä½¿ç”¨ ESLint è§„èŒƒä»£ç ï¼ˆå¦‚ç¦æ­¢ var å£°æ˜ã€å¼ºåˆ¶ä½¿ç”¨å•å¼•å·ã€ç¦æ­¢console.logï¼‰ï¼Œæ¯æ¬¡å†™å®Œä»£ç éƒ½è¦æ‰‹åŠ¨ä¿®å¤ ESLint é”™è¯¯ï¼Œæ•ˆç‡ä½ä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ Skill å®ç°è‡ªåŠ¨ä¿®å¤ã€‚</p>
<p>åˆ›å»ºçš„æµç¨‹å¦‚ç¬¬ä¸€demoï¼Œæç¤ºè¯å¦‚ä¸‹</p>
<pre><code class="hljs language-md" lang="md">/create-skill Help me create this skill for Cursor: å¸®æˆ‘åˆ›å»º åå­—æ˜¯ï¼šeslint-fix ä½œç”¨åŸŸæ˜¯å½“å‰é¡¹ç›®ï¼Œå†…å®¹æ˜¯ # ESLint é”™è¯¯ä¿®å¤æŠ€èƒ½ï¼ˆå‰ç«¯ä¸“ç”¨ï¼‰

<span class="hljs-section">## æŠ€èƒ½æè¿°</span>

è¯†åˆ«ç”¨æˆ·æä¾›çš„å‰ç«¯ä»£ç ï¼ˆJS/TS/Vueï¼‰ä¸­çš„ ESLint é”™è¯¯ï¼Œè‡ªåŠ¨ä¿®å¤ï¼Œä¸¥æ ¼éµå¾ªé¡¹ç›® ESLint è§„èŒƒï¼š

<span class="hljs-bullet">1.</span> å˜é‡å£°æ˜ï¼šç¦æ­¢ä½¿ç”¨ varï¼Œä¼˜å…ˆä½¿ç”¨ constï¼Œå¯å˜å˜é‡ä½¿ç”¨ letï¼›

<span class="hljs-bullet">2.</span> å¼•å·ï¼šæ‰€æœ‰å­—ç¬¦ä¸²å¼ºåˆ¶ä½¿ç”¨å•å¼•å·ï¼Œç¦æ­¢åŒå¼•å·ï¼›

<span class="hljs-bullet">3.</span> æ§åˆ¶å°è¾“å‡ºï¼šç¦æ­¢ä½¿ç”¨ console.logã€console.warn ç­‰æ§åˆ¶å°æ‰“å°è¯­å¥ï¼Œç›´æ¥åˆ é™¤ï¼›

<span class="hljs-bullet">4.</span> åˆ†å·ï¼šè¯­å¥ç»“å°¾ä¸æ·»åŠ åˆ†å·ï¼ˆé€‚é…å‰ç«¯é¡¹ç›®å¸¸è§è§„èŒƒï¼‰ï¼›

<span class="hljs-bullet">5.</span> ç¼©è¿›ï¼šä½¿ç”¨ 2 ä¸ªç©ºæ ¼ç¼©è¿›ï¼Œç¦æ­¢ä½¿ç”¨ Tabï¼›

<span class="hljs-bullet">6.</span> ç»“å°¾ï¼šä¿®å¤åï¼Œéœ€è¾“å‡ºä¿®å¤è¯´æ˜ï¼ˆåˆ—å‡ºä¿®å¤çš„é”™è¯¯ç±»å‹åŠæ•°é‡ï¼‰ã€‚

  


<span class="hljs-section">## ä½¿ç”¨åœºæ™¯</span>

ç”¨æˆ·è¾“å…¥â€œä¿®å¤è¿™æ®µä»£ç çš„ ESLint é”™è¯¯â€â€œESLint æ ¡éªŒä¿®å¤â€ï¼Œæˆ–ç›´æ¥ç²˜è´´å­˜åœ¨ ESLint é”™è¯¯çš„ä»£ç ï¼Œè‡ªåŠ¨è§¦å‘è¯¥æŠ€èƒ½ã€‚

  


<span class="hljs-section">## æ³¨æ„äº‹é¡¹</span>

ä¿®å¤æ—¶ä¸æ”¹å˜ä»£ç åŸæœ‰åŠŸèƒ½ï¼Œä»…ä¿®å¤ ESLint è§„èŒƒç›¸å…³é—®é¢˜ï¼›è‹¥æœ‰æ— æ³•è‡ªåŠ¨ä¿®å¤çš„é”™è¯¯ï¼Œéœ€æç¤ºç”¨æˆ·æ‰‹åŠ¨ä¿®æ”¹ã€‚
</code></pre>
<p>åˆ›å»ºæˆåŠŸ ä½ å¯ä»¥çœ‹åˆ° å¤šäº†ä¸€ä¸ª <code>eslint-fix</code>çš„skill</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5564d8bee9b94746badfca100fa385c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=49qRv1PaSXEYV7GKk%2FzJKc90N5E%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-10">æ­¥éª¤ 2ï¼šè°ƒç”¨ Skill ä¿®å¤ä»£ç </h4>
<ol>
<li>åœ¨é¡¹ç›®ä¸­ åˆ›å»ºä¸€ä¸ªjsæ–‡ä»¶ è¾“å…¥æœ‰eslintæŠ¥é”™çš„ jså¦‚ä¸‹</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d51612945ce49cf9564beae90174c08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=JqJXha%2BfU5pdzxAXW0XxLYuFum4%3D" alt="image.png" loading="lazy"/></p>
<ol start="2">
<li>é€‰ä¸­ å¹¶æ·»åŠ  chatï¼Œä½ å¯ä»¥ä½¿ç”¨  <code>ctrl+k</code> å¿«æ·é”®å®ç°</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/722205a0ed4b4725bf53093c193ce210~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=4wqF7YWP0Rb4WeNIKj%2BBwvl%2BXDc%3D" alt="image.png" loading="lazy"/></p>
<ol start="3">
<li>åœ¨ Agent èŠå¤©æ¡†ä¸­è¾“å…¥æŒ‡ä»¤ï¼š<code>ä¿®å¤è¿™æ®µä»£ç çš„ ESLint é”™è¯¯ ï¼Œå¹¶åˆ—å‡ºä½ ä½¿ç”¨äº†å“ªäº›skill</code></li>
<li>Cursor è‡ªåŠ¨è§¦å‘ <code>eslint-fix</code> Skillï¼Œä¿®å¤åçš„ä»£ç å¦‚ä¸‹ï¼ˆå®Œå…¨ç¬¦åˆè§„èŒƒï¼‰ï¼Œå¹¶è¾“å‡ºä¿®å¤è¯´æ˜</li>
</ol>
<p>å¯ä»¥çœ‹è§ è¢«ä¿®å¤äº† åˆ—å‡ºäº† ä¿®æ”¹çš„ å†…å®¹è¯´æ˜</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc391effcb9d458a9de501560d7ef195~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=LRcPF2Q1%2F%2BUKh0qpYRsEszioJBM%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡è¿™ä¸¤ä¸ª Demo å¯ä»¥å‘ç°ï¼ŒAgent Skill å®Œå…¨è´´åˆå‰ç«¯å¼€å‘çš„å®é™…éœ€æ±‚ï¼Œæ ¸å¿ƒæ˜¯â€œä¸€æ¬¡å°è£…ï¼Œæ— é™å¤ç”¨â€ï¼ŒæŠŠé‡å¤ã€æœºæ¢°çš„å·¥ä½œäº¤ç»™ AIï¼Œå¼€å‘è€…ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘â€”â€”è¿™ä¹Ÿæ˜¯ Agent Skill æœ€å—å‰ç«¯å¼€å‘è€…æ¬¢è¿çš„åŸå› ã€‚</p>
<h2 data-id="heading-11">å››ã€Agent Skill é«˜çº§ç”¨æ³•ï¼šReference ä¸ Script åŠ è½½æ–¹å¼</h2>
<p>å¯¹äºå‰ç«¯å¼€å‘è€…è€Œè¨€ï¼ŒåŸºç¡€çš„ Skillï¼ˆä»…é…ç½® SKILL.mdï¼‰åªèƒ½æ»¡è¶³â€œç”Ÿæˆã€ä¿®å¤ä»£ç â€ç­‰ç®€å•åœºæ™¯ï¼›è€Œé«˜çº§ç”¨æ³•â€”â€”Referenceï¼ˆå‚è€ƒèµ„æ–™åŠ è½½ï¼‰å’Œ Scriptï¼ˆè„šæœ¬åŠ è½½ï¼‰ï¼Œèƒ½è®© Agent Skill å®ç°æ›´å¤æ‚çš„å‰ç«¯å¼€å‘éœ€æ±‚ï¼ˆå¦‚æ¥å£è”è°ƒã€æ‰¹é‡é‡æ„ã€è§„èŒƒæ ¡éªŒï¼‰ï¼Œä¹Ÿæ˜¯å‰ç«¯å¼€å‘è€…éœ€è¦é‡ç‚¹æŒæ¡çš„å†…å®¹ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«æ‹†è§£ Reference å’Œ Script çš„æ ¸å¿ƒä½œç”¨ã€åŠ è½½æ–¹å¼ï¼Œç»“åˆå‰ç«¯å®é™…åœºæ™¯ï¼ˆå¦‚æ¥å£è”è°ƒã€æ‰¹é‡ä¿®æ”¹ç»„ä»¶åç§°ï¼‰ï¼Œè®©ä½ èƒ½ç›´æ¥è½åœ°ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-12">1. Reference åŠ è½½ï¼šæŒ‰éœ€åŠ è½½â€œå‚è€ƒèµ„æ–™â€ï¼Œè®© Skill æ›´è´´åˆé¡¹ç›®</h3>
<h4 data-id="heading-13">æ ¸å¿ƒä½œç”¨</h4>
<p>Reference æ˜¯ Agent Skill çš„â€œå‚è€ƒèµ„æ–™åº“â€ï¼Œå¯å­˜æ”¾å‰ç«¯é¡¹ç›®ä¸­çš„ä¸ªæ€§åŒ–é…ç½®ã€è§„èŒƒæ–‡æ¡£ã€æ¥å£ä¿¡æ¯ç­‰ï¼ŒSkill æ‰§è¡Œæ—¶ï¼ŒæŒ‰éœ€åŠ è½½è¿™äº›èµ„æ–™ï¼Œè®©ç”Ÿæˆçš„ä»£ç ã€æ‰§è¡Œçš„æ“ä½œå®Œå…¨é€‚é…é¡¹ç›®â€”â€”æ¯”å¦‚å­˜æ”¾é¡¹ç›®çš„æ¥å£æ–‡æ¡£ã€ESLint é…ç½®ã€UI ç»„ä»¶å°è£…è§„èŒƒç­‰ï¼Œé¿å…æ¯æ¬¡è°ƒç”¨ Skill éƒ½æ‰‹åŠ¨æä¾›è¿™äº›ä¸Šä¸‹æ–‡ï¼Œæœ¬è´¨æ˜¯â€œç»™ Skill æä¾›é¡¹ç›®ä¸“å±çš„â€˜çŸ¥è¯†åº“â€™â€ã€‚</p>
<h4 data-id="heading-14">å‰ç«¯å¸¸ç”¨åœºæ™¯</h4>
<ul>
<li>
<p>åœºæ™¯ 1ï¼šæ¥å£è”è°ƒ Skillï¼ŒåŠ è½½é¡¹ç›®çš„æ¥å£æ–‡æ¡£ï¼ˆå¦‚ Swagger å¯¼å‡ºçš„ JSON æ–‡ä»¶ï¼‰ï¼Œç”Ÿæˆç¬¦åˆæ¥å£è§„èŒƒçš„è¯·æ±‚ä»£ç ï¼ˆè‡ªåŠ¨åŒ¹é…æ¥å£åœ°å€ã€è¯·æ±‚æ–¹å¼ã€å‚æ•°ç±»å‹ï¼‰ï¼›</p>
</li>
<li>
<p>åœºæ™¯ 2ï¼šç»„ä»¶ç”Ÿæˆ Skillï¼ŒåŠ è½½é¡¹ç›®çš„ UI ç»„ä»¶å°è£…è§„èŒƒï¼ˆå¦‚è‡ªå®šä¹‰ Buttonã€Card ç»„ä»¶çš„ä½¿ç”¨æ–‡æ¡£ï¼‰ï¼Œç”Ÿæˆçš„ç»„ä»¶è‡ªåŠ¨å¤ç”¨é¡¹ç›®å°è£…çš„ UI ç»„ä»¶ï¼›</p>
</li>
<li>
<p>åœºæ™¯ 3ï¼šè·¯ç”±é…ç½® Skillï¼ŒåŠ è½½é¡¹ç›®çš„è·¯ç”±è§„èŒƒï¼ˆå¦‚è·¯ç”±å‘½åè§„åˆ™ã€åµŒå¥—è·¯ç”±é…ç½®è¦æ±‚ï¼‰ï¼Œç”Ÿæˆç¬¦åˆè§„èŒƒçš„è·¯ç”±é…ç½®ä»£ç ã€‚</p>
</li>
</ul>
<h4 data-id="heading-15">åŠ è½½æ–¹å¼ï¼ˆç»“åˆ Cursor å®æ“ï¼‰</h4>
<p>Reference çš„åŠ è½½æ–¹å¼æ˜¯â€œæ¡ä»¶è§¦å‘ã€æŒ‰éœ€åŠ è½½â€ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼ˆè´´åˆå‰ç«¯é¡¹ç›®ç»“æ„ï¼‰ï¼š</p>
<ol>
<li>æ­¥éª¤ 1ï¼šåœ¨ Skill æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»º <code>reference</code> å­æ–‡ä»¶å¤¹ï¼ˆå›ºå®šåç§°ï¼ŒCursor ä¼šè‡ªåŠ¨è¯†åˆ«ï¼‰ï¼›</li>
<li>æ­¥éª¤ 2ï¼šå°†éœ€è¦çš„å‚è€ƒèµ„æ–™æ”¾å…¥è¯¥æ–‡ä»¶å¤¹ï¼ˆæ”¯æŒå¤šç§æ ¼å¼ï¼š.mdã€.jsonã€.jsã€.txt ç­‰ï¼Œå‰ç«¯å¸¸ç”¨ .md æ–‡æ¡£å’Œ .json æ¥å£æ–‡æ¡£ï¼‰ï¼›</li>
<li>æ­¥éª¤ 3ï¼šåœ¨ SKILL.md ä¸­ï¼Œæ˜ç¡®â€œåŠ è½½æ¡ä»¶â€â€”â€”å³â€œä»€ä¹ˆæ—¶å€™éœ€è¦åŠ è½½è¿™ä»½å‚è€ƒèµ„æ–™â€ï¼›</li>
<li>æ­¥éª¤ 4ï¼šè°ƒç”¨ Skill æ—¶ï¼Œå½“æ»¡è¶³åŠ è½½æ¡ä»¶ï¼ŒCursor ä¼šè‡ªåŠ¨åŠ è½½å¯¹åº”çš„ Reference æ–‡ä»¶ï¼Œæ‰§è¡Œå®Œæˆåè‡ªåŠ¨é‡Šæ”¾ã€‚</li>
</ol>
<h4 data-id="heading-16">å®æ“ç¤ºä¾‹ï¼šæ¥å£è¯·æ±‚ Skill åŠ è½½ Reference æ¥å£æ–‡æ¡£</h4>
<ol>
<li>
<p>æ–°å»º Skill  <code>api-request-gen</code>ï¼Œåˆ›å»º <code>reference</code> å­æ–‡ä»¶å¤¹ï¼Œæ”¾å…¥é¡¹ç›®çš„æ¥å£æ–‡æ¡£ <code>api-docs.md</code>ï¼ˆå†…å®¹ç¤ºä¾‹ï¼šç”¨æˆ·åˆ—è¡¨æ¥å£ï¼šGET /api/user/listï¼Œå‚æ•°ï¼špageNumï¼ˆnumberï¼‰ã€pageSizeï¼ˆnumberï¼‰ï¼Œè¿”å›å€¼ï¼š{ code: 200, data: { list: [], total: 0 } }ï¼‰ï¼›</p>
</li>
<li>
<p>åœ¨ <code>SKILL.md</code> ä¸­æ·»åŠ åŠ è½½æ¡ä»¶ï¼š</p>
</li>
</ol>

<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æ¥å£è¯·æ±‚ä»£ç ç”Ÿæˆ Skill</span>
<span class="hljs-meta">## æŠ€èƒ½æè¿°</span>
ç”Ÿæˆç¬¦åˆé¡¹ç›®æ¥å£è§„èŒƒçš„ Axios è¯·æ±‚ä»£ç ï¼Œè‡ªåŠ¨åŒ¹é…æ¥å£åœ°å€ã€è¯·æ±‚æ–¹å¼ã€å‚æ•°ç±»å‹ã€‚
<span class="hljs-meta">## Reference åŠ è½½æ¡ä»¶</span>
å½“ç”¨æˆ·éœ€è¦ç”Ÿæˆâ€œæ¥å£è¯·æ±‚ä»£ç â€ï¼Œä¸”æåŠå…·ä½“æ¥å£åç§°ï¼ˆå¦‚ç”¨æˆ·åˆ—è¡¨ã€ç™»å½•æ¥å£ï¼‰æ—¶ï¼Œè‡ªåŠ¨åŠ è½½ reference/api-docs.md æ–‡æ¡£ï¼Œè·å–æ¥å£ä¿¡æ¯ã€‚
<span class="hljs-meta">## è§„åˆ™</span>
<span class="hljs-number">1.</span> è¯·æ±‚ä»£ç ä½¿ç”¨é¡¹ç›®å…¨å±€å°è£…çš„ Axios å®ä¾‹ï¼ˆimport request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>ï¼‰ï¼›
<span class="hljs-number">2.</span> ç”Ÿæˆè¯·æ±‚å‡½æ•°ï¼ŒåŒ…å«å‚æ•°ç±»å‹æ ¡éªŒï¼ˆTypeScriptï¼‰ï¼›
<span class="hljs-number">3.</span> å¤„ç†è¯·æ±‚å¼‚å¸¸ï¼ˆ<span class="hljs-keyword">try</span>/<span class="hljs-keyword">catch</span> åŒ…è£¹ï¼ŒæŠ›å‡ºå¼‚å¸¸æç¤ºï¼‰ã€‚
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3bed830464a4bdaa189d6607ce5bd41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=Lp31V3PPbgWA6FI8Z5Nj6xPRG%2B0%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/734e4ed19faf49e7b015a67873bc3bed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=uXvX1mNoclOjE8m10qxfBKqLKx0%3D" alt="image.png" loading="lazy"/></p>
<ol start="3">
<li>è°ƒç”¨ Skillï¼šè¾“å…¥â€œç”Ÿæˆç”¨æˆ·åˆ—è¡¨æ¥å£çš„è¯·æ±‚ä»£ç ï¼Œä¿å­˜åœ¨user.jsé‡Œé¢ï¼Œæ²¡æœ‰çš„ä½ åˆ›å»ºä¸€ä¸ªjsâ€ï¼ŒCursor ä¼šè‡ªåŠ¨åŠ è½½ <code>reference/api-docs.md</code>ï¼Œç”Ÿæˆç¬¦åˆé¡¹ç›®æ¥å£è§„èŒƒçš„è¯·æ±‚ä»£ç ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥æ¥å£åœ°å€ã€å‚æ•°ç±»å‹ï¼š</li>
</ol>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>

<span class="hljs-comment">/**
 * ç”¨æˆ·åˆ—è¡¨æ¥å£è¯·æ±‚å‡½æ•°
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">params</span> - è¯·æ±‚å‚æ•°
 * <span class="hljs-doctag">@param</span> params.pageNum - é¡µç ï¼ˆå¿…å¡«ï¼‰
 * <span class="hljs-doctag">@param</span> params.pageSize - æ¯é¡µæ¡æ•°ï¼ˆå¿…å¡«ï¼‰
 * <span class="hljs-doctag">@returns</span> ç”¨æˆ·åˆ—è¡¨æ•°æ®
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">params: { pageNum: <span class="hljs-built_in">number</span>; pageSize: <span class="hljs-built_in">number</span> }</span>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">request</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/api/user/list'</span>,
      <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
      params
    })
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥ï¼š'</span>, error)
    <span class="hljs-keyword">throw</span> error
  }
}
</code></pre>
<p>å¯ä»¥çœ‹è§è¾“å‡ºç»“æœ
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2706f1a406e46479c4c7b47ad2e1846~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=uldiduZ4KOwl6%2Bl6ArFwGQvY5e4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-17">2. Script åŠ è½½ï¼šæŒ‰éœ€åŠ è½½â€œå¯æ‰§è¡Œè„šæœ¬â€ï¼Œè®© Skill å®ç°â€œè‡ªåŠ¨æ“ä½œâ€</h3>
<h4 data-id="heading-18">æ ¸å¿ƒä½œç”¨</h4>
<p>Script æ˜¯ Agent Skill çš„â€œå¯æ‰§è¡Œæ“ä½œæ¨¡å—â€ï¼Œå¯å­˜æ”¾å‰ç«¯å¸¸ç”¨çš„è„šæœ¬ï¼ˆå¦‚ JS/TS è„šæœ¬ï¼‰ï¼ŒSkill æ‰§è¡Œæ—¶ï¼ŒæŒ‰éœ€åŠ è½½å¹¶æ‰§è¡Œè¿™äº›è„šæœ¬ï¼Œå®ç°â€œç”Ÿæˆä»£ç â†’è‡ªåŠ¨æ‰§è¡Œæ“ä½œâ€çš„é—­ç¯â€”â€”æ¯”å¦‚æ‰¹é‡ä¿®æ”¹ç»„ä»¶æ–‡ä»¶åã€è‡ªåŠ¨æ ¼å¼åŒ–æ‰€æœ‰ Vue æ–‡ä»¶ã€æ‰¹é‡æ›¿æ¢æ¥å£åœ°å€ç­‰ï¼Œæœ¬è´¨æ˜¯â€œç»™ Skill èµ‹äºˆâ€˜æ‰§è¡Œæ“ä½œâ€™çš„èƒ½åŠ›â€ï¼Œè§£å†³ä¼ ç»Ÿ AIâ€œåªä¼šç”Ÿæˆã€ä¸ä¼šæ‰§è¡Œâ€çš„ç—›ç‚¹ã€‚</p>
<h4 data-id="heading-19">å‰ç«¯å¸¸ç”¨åœºæ™¯</h4>
<ul>
<li>
<p>åœºæ™¯ 1ï¼šæ‰¹é‡é‡æ„è„šæœ¬ï¼šå°†é¡¹ç›®ä¸­æ‰€æœ‰çš„ Vue2 ç»„ä»¶ï¼Œæ‰¹é‡ä¿®æ”¹ä¸º Vue3 Setup è¯­æ³•ï¼ˆæ— éœ€æ‰‹åŠ¨é€ä¸ªä¿®æ”¹ï¼‰ï¼›</p>
</li>
<li>
<p>åœºæ™¯ 2ï¼šæ–‡ä»¶æ“ä½œè„šæœ¬ï¼šæ‰¹é‡ä¿®æ”¹ç»„ä»¶æ–‡ä»¶åï¼ˆå¦‚å°† UserCard.vue æ”¹ä¸º UserCardItem.vueï¼‰ï¼ŒåŒæ—¶ä¿®æ”¹ç»„ä»¶å†…éƒ¨çš„å¼•å…¥è·¯å¾„ï¼›</p>
</li>
<li>
<p>åœºæ™¯ 3ï¼šè§„èŒƒæ ¡éªŒè„šæœ¬ï¼šéå†é¡¹ç›®æ‰€æœ‰ JS/TS æ–‡ä»¶ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨æœªä½¿ç”¨çš„å˜é‡ï¼Œè‡ªåŠ¨åˆ é™¤å†—ä½™ä»£ç ã€‚</p>
</li>
</ul>
<h4 data-id="heading-20">åŠ è½½æ–¹å¼ï¼ˆç»“åˆ Cursor å®æ“ï¼‰</h4>
<p>Script çš„åŠ è½½æ–¹å¼æ˜¯â€œæ‰§è¡Œæ—¶åŠ è½½ã€æ²™ç®±è¿è¡Œâ€ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼ˆè´´åˆå‰ç«¯é¡¹ç›®ç»“æ„ï¼‰ï¼Œé‡ç‚¹æ³¨æ„ï¼šå‰ç«¯è„šæœ¬ä»…åœ¨ Cursor å†…ç½®çš„æ²™ç®±ç¯å¢ƒä¸­æ‰§è¡Œï¼Œä¸ä¼šå½±å“æœ¬åœ°é¡¹ç›®æ–‡ä»¶ï¼ˆéœ€æ‰‹åŠ¨ç¡®è®¤æ‰§è¡Œç»“æœåï¼Œå†åº”ç”¨åˆ°æœ¬åœ°é¡¹ç›®ï¼Œé¿å…è¯¯æ“ä½œï¼‰ï¼š</p>
<ol>
<li>æ­¥éª¤ 1ï¼šåœ¨ Skill æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»º <code>scripts</code> å­æ–‡ä»¶å¤¹ï¼ˆå›ºå®šåç§°ï¼ŒCursor ä¼šè‡ªåŠ¨è¯†åˆ«ï¼‰ï¼›</li>
<li>æ­¥éª¤ 2ï¼šå°†å¯æ‰§è¡Œè„šæœ¬æ”¾å…¥è¯¥æ–‡ä»¶å¤¹ï¼ˆå‰ç«¯å¸¸ç”¨ JS/TS è„šæœ¬ï¼Œéœ€ä¿è¯è„šæœ¬å¯ç‹¬ç«‹æ‰§è¡Œï¼Œä¸ä¾èµ–é¡¹ç›®å¤–éƒ¨ä¾èµ–ï¼‰ï¼›</li>
<li>æ­¥éª¤ 3ï¼šåœ¨ SKILL.md ä¸­ï¼Œæ˜ç¡®â€œè„šæœ¬æ‰§è¡Œæ¡ä»¶â€â€”â€”å³â€œä»€ä¹ˆæ—¶å€™éœ€è¦æ‰§è¡Œè¿™ä»½è„šæœ¬â€ï¼›</li>
<li>æ­¥éª¤ 4ï¼šè°ƒç”¨ Skill æ—¶ï¼Œå½“æ»¡è¶³æ‰§è¡Œæ¡ä»¶ï¼ŒCursor ä¼šè‡ªåŠ¨åŠ è½½å¯¹åº”çš„ Script è„šæœ¬ï¼Œåœ¨æ²™ç®±ç¯å¢ƒä¸­æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåè¾“å‡ºç»“æœï¼Œç”¨æˆ·ç¡®è®¤æ— è¯¯åï¼Œå¯å°†ç»“æœåº”ç”¨åˆ°æœ¬åœ°é¡¹ç›®ã€‚</li>
</ol>
<h4 data-id="heading-21">å®æ“ç¤ºä¾‹ï¼šæ‰¹é‡ä¿®æ”¹ç»„ä»¶æ–‡ä»¶åè„šæœ¬ï¼ˆå‰ç«¯é«˜é¢‘éœ€æ±‚ï¼‰</h4>
<ol>
<li>æ–°å»º Skill æ–‡ä»¶å¤¹ <code>batch-rename-component</code>ï¼Œåˆ›å»º <code>scripts</code> å­æ–‡ä»¶å¤¹ï¼Œæ”¾å…¥è„šæœ¬æ–‡ä»¶ <code>rename-component.js</code>ï¼ˆå‰ç«¯å¸¸ç”¨ JS è„šæœ¬ï¼ŒåŠŸèƒ½ï¼šæ‰¹é‡å°†é¡¹ç›®ä¸­æ‰€æœ‰â€œCard.vueâ€ç»“å°¾çš„ç»„ä»¶ï¼Œæ”¹ä¸ºâ€œCardItem.vueâ€ï¼ŒåŒæ—¶ä¿®æ”¹ç»„ä»¶å†…éƒ¨çš„å¼•å…¥è·¯å¾„ï¼‰ï¼š</li>
</ol>

<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// scripts/rename-component.js</span>
<span class="hljs-comment">// æ‰¹é‡ä¿®æ”¹ç»„ä»¶æ–‡ä»¶åè„šæœ¬ï¼ˆCursor æ²™ç®±æ‰§è¡Œï¼Œä¸ç›´æ¥ä¿®æ”¹æœ¬åœ°æ–‡ä»¶ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">fs</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'fs'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">path</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'path'</span>)

<span class="hljs-comment">// é¡¹ç›®ç»„ä»¶ç›®å½•ï¼ˆå‰ç«¯é¡¹ç›®å¸¸è§ç›®å½•ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">componentDir</span> = path.<span class="hljs-title function_ invoke__">join</span>(__dirname, <span class="hljs-string">'../../src/components'</span>)

<span class="hljs-comment">// éå†ç›®å½•ï¼Œä¿®æ”¹æ–‡ä»¶åå’Œå¼•å…¥è·¯å¾„</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">renameComponents</span> = () =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">files</span> = fs.<span class="hljs-title function_ invoke__">readdirSync</span>(componentDir)
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">modifiedFiles</span> = []
  
  files.<span class="hljs-title function_ invoke__">forEach</span>(file =&gt; {
    <span class="hljs-keyword">if</span> (file.<span class="hljs-title function_ invoke__">endsWith</span>(<span class="hljs-string">'Card.vue'</span>)) {
      <span class="hljs-comment">// æ–°æ–‡ä»¶å</span>
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">newFileName</span> = file.<span class="hljs-title function_ invoke__">replace</span>(<span class="hljs-string">'Card.vue'</span>, <span class="hljs-string">'CardItem.vue'</span>)
      <span class="hljs-comment">// æ—§æ–‡ä»¶è·¯å¾„å’Œæ–°æ–‡ä»¶è·¯å¾„</span>
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">oldPath</span> = path.<span class="hljs-title function_ invoke__">join</span>(componentDir, file)
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">newPath</span> = path.<span class="hljs-title function_ invoke__">join</span>(componentDir, newFileName)
      
      <span class="hljs-comment">// è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¿®æ”¹å¼•å…¥è·¯å¾„</span>
      let content = fs.<span class="hljs-title function_ invoke__">readFileSync</span>(oldPath, <span class="hljs-string">'utf8'</span>)
      content = content.<span class="hljs-title function_ invoke__">replace</span>(/import .* <span class="hljs-keyword">from</span> <span class="hljs-string">'./(.*)Card'</span>/g, (<span class="hljs-keyword">match</span>, p1) =&gt; {
        <span class="hljs-keyword">return</span> `import ${p1}CardItem <span class="hljs-keyword">from</span> <span class="hljs-string">'./${p1}CardItem'</span>`
      })
      
      <span class="hljs-comment">// æ¨¡æ‹Ÿä¿®æ”¹ï¼ˆæ²™ç®±ç¯å¢ƒä¸­ä¸å®é™…å†™å…¥æ–‡ä»¶ï¼Œä»…è¾“å‡ºç»“æœï¼‰</span>
      modifiedFiles.<span class="hljs-title function_ invoke__">push</span>({
        <span class="hljs-attr">oldName</span>: file,
        <span class="hljs-attr">newName</span>: newFileName,
        <span class="hljs-attr">path</span>: componentDir
      })
    }
  })
  
  <span class="hljs-keyword">return</span> {
    success: <span class="hljs-literal">true</span>,
    modifiedCount: modifiedFiles.length,
    modifiedFiles
  }
}

<span class="hljs-comment">// æ‰§è¡Œè„šæœ¬å¹¶è¾“å‡ºç»“æœ</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">result</span> = <span class="hljs-title function_ invoke__">renameComponents</span>()
console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">'æ‰¹é‡ä¿®æ”¹ç»“æœï¼š'</span>, result)
</code></pre>
<p>2.  åœ¨ <code>SKILL.md</code> ä¸­æ·»åŠ è„šæœ¬æ‰§è¡Œæ¡ä»¶ï¼š</p>

<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ç»„ä»¶æ‰¹é‡é‡å‘½å Skill</span>
<span class="hljs-section">## æŠ€èƒ½æè¿°</span>
æ‰¹é‡ä¿®æ”¹é¡¹ç›®ä¸­ Vue ç»„ä»¶çš„æ–‡ä»¶åï¼ŒåŒæ—¶ä¿®æ”¹ç»„ä»¶å†…éƒ¨çš„å¼•å…¥è·¯å¾„ï¼Œé¿å…è·¯å¾„é”™è¯¯ã€‚
<span class="hljs-section">## Script æ‰§è¡Œæ¡ä»¶</span>
å½“ç”¨æˆ·è¾“å…¥â€œæ‰¹é‡ä¿®æ”¹ç»„ä»¶æ–‡ä»¶åâ€â€œæ‰¹é‡é‡å‘½å Card ç»„ä»¶â€æ—¶ï¼Œè‡ªåŠ¨åŠ è½½ scripts/rename-component.js è„šæœ¬ï¼Œæ‰§è¡Œæ‰¹é‡ä¿®æ”¹æ“ä½œã€‚
<span class="hljs-section">## æ³¨æ„äº‹é¡¹</span>
<span class="hljs-bullet">1.</span> è„šæœ¬åœ¨ Cursor æ²™ç®±ç¯å¢ƒä¸­æ‰§è¡Œï¼Œä¸ç›´æ¥ä¿®æ”¹æœ¬åœ°æ–‡ä»¶ï¼›
<span class="hljs-bullet">2.</span> æ‰§è¡Œå®Œæˆåï¼Œè¾“å‡ºä¿®æ”¹ç»“æœï¼ˆä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨ã€æ•°é‡ï¼‰ï¼›
<span class="hljs-bullet">3.</span> ç”¨æˆ·ç¡®è®¤æ— è¯¯åï¼Œå¯æ‰‹åŠ¨å°†ä¿®æ”¹ç»“æœåº”ç”¨åˆ°æœ¬åœ°é¡¹ç›®ã€‚
</code></pre>
<p>3.  è°ƒç”¨ Skillï¼šè¾“å…¥â€œæ‰¹é‡é‡å‘½å Card ç»„ä»¶â€ï¼ŒCursor ä¼šè‡ªåŠ¨åŠ è½½å¹¶æ‰§è¡Œ <code>rename-component.js</code> è„šæœ¬ï¼Œè¾“å‡ºä¿®æ”¹ç»“æœï¼ˆå¦‚â€œä¿®æ”¹äº† 3 ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ UserCard.vue â†’ UserCardItem.vueã€GoodsCard.vue â†’ GoodsCardItem.vueâ€ï¼‰ï¼Œç”¨æˆ·ç¡®è®¤æ— è¯¯åï¼Œå¯æ‰‹åŠ¨ä¿®æ”¹æœ¬åœ°æ–‡ä»¶ï¼Œå®Œæˆæ‰¹é‡é‡æ„ã€‚</p>
<h3 data-id="heading-22">Reference ä¸ Script åŠ è½½æ ¸å¿ƒåŒºåˆ«ï¼ˆå‰ç«¯è§†è§’ï¼‰</h3>























<table><thead><tr><th>åŠ è½½ç±»å‹</th><th>æ ¸å¿ƒä½œç”¨</th><th>åŠ è½½æ—¶æœº</th><th>å‰ç«¯ç±»æ¯”</th></tr></thead><tbody><tr><td>Reference</td><td>æä¾›å‚è€ƒèµ„æ–™ï¼Œè®© Skill è´´åˆé¡¹ç›®</td><td>æ»¡è¶³è§¦å‘æ¡ä»¶æ—¶åŠ è½½ï¼Œæ‰§è¡Œå®Œæˆåé‡Šæ”¾</td><td>ç»„ä»¶åŠ è½½æ—¶ï¼ŒæŒ‰éœ€å¼•å…¥çš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚ .env æ–‡ä»¶ï¼‰</td></tr><tr><td>Script</td><td>æ‰§è¡Œå…·ä½“æ“ä½œï¼Œå®ç°è‡ªåŠ¨åŒ–é—­ç¯</td><td>æ»¡è¶³æ‰§è¡Œæ¡ä»¶æ—¶åŠ è½½ï¼Œæ‰§è¡Œå®Œæˆåé”€æ¯</td><td>ç»„ä»¶æŒ‚è½½åï¼ŒæŒ‰éœ€æ‰§è¡Œçš„å·¥å…·å‡½æ•°ï¼ˆå¦‚æ‰¹é‡å¤„ç†æ•°æ®çš„å‡½æ•°ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-23">äº”ã€Agent Skill åŠ è½½é€»è¾‘</h2>
<p>å¾ˆå¤šå‰ç«¯å¼€å‘è€…ä½¿ç”¨ Agent Skill æ—¶ä¼šæœ‰ç–‘é—®ï¼šâ€œæˆ‘å°è£…äº†å¾ˆå¤š Skillï¼Œä¼šä¸ä¼šå ç”¨è¿‡å¤šèµ„æºï¼Ÿä¼šä¸ä¼šå½±å“ AI å“åº”é€Ÿåº¦ï¼Ÿâ€ ç­”æ¡ˆæ˜¯ä¸ä¼šâ€”â€”å› ä¸º Agent Skill é‡‡ç”¨äº†â€œæŒ‰éœ€åŠ è½½â€çš„æ ¸å¿ƒé€»è¾‘ï¼Œä¸å‰ç«¯çš„â€œè·¯ç”±æ‡’åŠ è½½â€â€œç»„ä»¶æŒ‰éœ€å¼•å…¥â€åŸç†å®Œå…¨ä¸€è‡´ï¼Œéƒ½æ˜¯â€œéœ€è¦æ—¶åŠ è½½ï¼Œä¸éœ€è¦æ—¶ä¸å ç”¨èµ„æºâ€ï¼Œæœ€å¤§åŒ–æå‡æ•ˆç‡ã€èŠ‚çœå¼€é”€ã€‚</p>
<p>ç»“åˆå‰ç«¯å¼€å‘çš„è®¤çŸ¥ï¼Œæˆ‘ä»¬æŠŠ Agent Skill çš„åŠ è½½é€»è¾‘æ‹†è§£ä¸ºâ€œä¸‰ä¸ªé˜¶æ®µâ€ï¼Œæ¯ä¸ªé˜¶æ®µå¯¹åº”æ˜ç¡®çš„åŠ è½½æ—¶æœºå’Œå†…å®¹ï¼ŒåŒæ—¶ç»“åˆ Cursor çš„å®é™…åŠ è½½è¡Œä¸ºï¼Œè®©ä½ ä¸€çœ‹å°±æ‡‚ï¼š</p>
<h3 data-id="heading-24">1. åˆå§‹åŒ–é˜¶æ®µï¼šä»…åŠ è½½â€œSkill å…ƒæ•°æ®â€ï¼ˆè½»é‡åŠ è½½ï¼‰</h3>
<p>å½“ä½ æ‰“å¼€ Cursor å¹¶è¿›å…¥é¡¹ç›®æ—¶ï¼ŒCursor ä¼šè‡ªåŠ¨æ‰«æé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>.cursor/skills</code> æ–‡ä»¶å¤¹ï¼Œæ­¤æ—¶ä»…åŠ è½½æ¯ä¸ª Skill çš„â€œå…ƒæ•°æ®â€â€”â€”ä¹Ÿå°±æ˜¯ Skill çš„åç§°ã€æè¿°ï¼ˆæ¥è‡ª SKILL.md ä¸­çš„â€œæŠ€èƒ½æè¿°â€éƒ¨åˆ†ï¼‰ï¼Œç›¸å½“äºå‰ç«¯é¡¹ç›®åˆå§‹åŒ–æ—¶ï¼Œä»…åŠ è½½è·¯ç”±è¡¨ï¼ˆä¸åŠ è½½å…·ä½“ç»„ä»¶ï¼‰ã€‚</p>
<p>ç‰¹ç‚¹ï¼šå…ƒæ•°æ®ä½“ç§¯æå°ï¼ŒåŠ è½½é€Ÿåº¦æå¿«ï¼Œå‡ ä¹ä¸å ç”¨èµ„æºï¼ˆç±»æ¯”å‰ç«¯åŠ è½½è·¯ç”±è¡¨ï¼Œä»…åŒ…å«è·¯å¾„å’Œç»„ä»¶åç§°ï¼Œä¸åŠ è½½ç»„ä»¶ä»£ç ï¼‰ï¼›æ­¤æ—¶ Skill å¹¶æœªçœŸæ­£â€œæ¿€æ´»â€ï¼Œä»…è®© Cursor çŸ¥é“â€œå½“å‰é¡¹ç›®æœ‰å“ªäº› Skillï¼Œæ¯ä¸ª Skill èƒ½åšä»€ä¹ˆâ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32235b1b69b4423589fb4b5fa5dca86b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP5oSPXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771211702&amp;x-signature=9nTOuvJe6gVAyHRlRpV9eFL6ErA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-25">2. è§¦å‘é˜¶æ®µï¼šæŒ‰éœ€åŠ è½½â€œSkill æ ¸å¿ƒè§„åˆ™â€ï¼ˆç²¾å‡†åŠ è½½ï¼‰</h3>
<p>å½“ä½ è¾“å…¥æŒ‡ä»¤ï¼ŒCursor åˆ¤å®šéœ€è¦è°ƒç”¨æŸä¸ª Skill æ—¶ï¼ˆæ¯”å¦‚è¾“å…¥â€œç”Ÿæˆ Vue3 ç»„ä»¶â€ï¼ŒCursor åŒ¹é…åˆ° <code>vue3-component-gen</code> Skillï¼‰ï¼Œæ‰ä¼šåŠ è½½è¯¥ Skill çš„æ ¸å¿ƒè§„åˆ™â€”â€”ä¹Ÿå°±æ˜¯ SKILL.md ä¸­çš„å…¨éƒ¨å†…å®¹ï¼ˆè§„åˆ™ã€åœºæ™¯ã€ç¤ºä¾‹ç­‰ï¼‰ï¼Œç›¸å½“äºå‰ç«¯ç‚¹å‡»æŸä¸ªè·¯ç”±æ—¶ï¼Œæ‰æ‡’åŠ è½½å¯¹åº”çš„ç»„ä»¶ä»£ç ã€‚</p>
<p>ç‰¹ç‚¹ï¼šä»…åŠ è½½â€œå½“å‰éœ€è¦çš„ Skillâ€ï¼Œå…¶ä»– Skill ä»å¤„äºâ€œå…ƒæ•°æ®çŠ¶æ€â€ï¼Œä¸å ç”¨é¢å¤–èµ„æºï¼›æ¯”å¦‚ä½ è°ƒç”¨â€œESLint ä¿®å¤ Skillâ€æ—¶ï¼Œä»…åŠ è½½ <code>eslint-fix</code> çš„ SKILL.md å†…å®¹ï¼Œ<code>vue3-component-gen</code> ä»ä»…ä¿ç•™å…ƒæ•°æ®ï¼Œä¸ä¼šè¢«åŠ è½½ã€‚</p>
<h3 data-id="heading-26">3. æ‰§è¡Œé˜¶æ®µï¼šæŒ‰éœ€åŠ è½½â€œSkill ä¾èµ–èµ„æºâ€ï¼ˆæŒ‰éœ€ä¸­çš„æŒ‰éœ€ï¼‰</h3>
<p>å½“ Skill æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç”¨åˆ°å‚è€ƒèµ„æ–™ï¼ˆReferenceï¼‰æˆ–è„šæœ¬ï¼ˆScriptï¼‰æ—¶ï¼Œæ‰ä¼šåŠ è½½å¯¹åº”çš„ä¾èµ–èµ„æºâ€”â€”æ¯”å¦‚æŸä¸ª Skill éœ€è¦è¯»å–é¡¹ç›®çš„ ESLint é…ç½®æ–‡ä»¶ï¼ˆ.eslintrc.jsï¼‰ï¼Œæ‰ä¼šåŠ è½½è¯¥å‚è€ƒæ–‡ä»¶ï¼›éœ€è¦æ‰§è¡Œæ‰¹é‡ä¿®æ”¹è„šæœ¬ï¼Œæ‰ä¼šåŠ è½½å¯¹åº”çš„ Script æ–‡ä»¶ï¼Œç›¸å½“äºå‰ç«¯ç»„ä»¶æ¸²æŸ“æ—¶ï¼ŒæŒ‰éœ€åŠ è½½ä¾èµ–çš„å›¾ç‰‡ã€å·¥å…·å‡½æ•°ï¼ˆä¸æ¸²æŸ“æ—¶ä¸åŠ è½½ï¼‰ã€‚</p>
<p>ç‰¹ç‚¹ï¼šä¾èµ–èµ„æºä»…åœ¨â€œéœ€è¦æ—¶â€åŠ è½½ï¼Œæ‰§è¡Œå®Œæˆåè‡ªåŠ¨é‡Šæ”¾ï¼Œé¿å…èµ„æºå ç”¨ï¼›æ¯”å¦‚ Skill æ‰§è¡Œå®Œæˆåï¼ŒåŠ è½½çš„å‚è€ƒæ–‡ä»¶ã€è„šæœ¬ä¼šè‡ªåŠ¨é”€æ¯ï¼Œä¸ä¼šä¸€ç›´å ç”¨å†…å­˜ï¼ˆç±»æ¯”å‰ç«¯ç»„ä»¶å¸è½½æ—¶ï¼Œé”€æ¯ç»„ä»¶å®ä¾‹å’Œä¾èµ–èµ„æºï¼‰ã€‚</p>
<h3 data-id="heading-27">æ ¸å¿ƒæ€»ç»“</h3>
<p>Agent Skill çš„åŠ è½½é€»è¾‘ = å‰ç«¯â€œè·¯ç”±æ‡’åŠ è½½â€ + â€œç»„ä»¶æŒ‰éœ€å¼•å…¥â€çš„ç»“åˆä½“ï¼š</p>
<ul>
<li>å…ƒæ•°æ®åŠ è½½ â†’ è·¯ç”±è¡¨åŠ è½½ï¼ˆåˆå§‹åŒ–è½»é‡åŠ è½½ï¼‰ï¼›</li>
<li>æ ¸å¿ƒè§„åˆ™åŠ è½½ â†’ è·¯ç”±å¯¹åº”ç»„ä»¶åŠ è½½ï¼ˆè§¦å‘æ—¶ç²¾å‡†åŠ è½½ï¼‰ï¼›</li>
<li>ä¾èµ–èµ„æºåŠ è½½ â†’ ç»„ä»¶ä¾èµ–çš„å›¾ç‰‡/å·¥å…·å‡½æ•°åŠ è½½ï¼ˆæ‰§è¡Œæ—¶æŒ‰éœ€åŠ è½½ï¼‰ã€‚</li>
</ul>
<p>è¿™ç§åŠ è½½é€»è¾‘ï¼Œæ—¢ä¿è¯äº† Skill è°ƒç”¨çš„é«˜æ•ˆæ€§ï¼Œåˆé¿å…äº†èµ„æºæµªè´¹ï¼Œå®Œå…¨é€‚é…å‰ç«¯å¼€å‘ä¸­â€œè½»é‡åˆå§‹åŒ–ã€æŒ‰éœ€åŠ è½½â€çš„æ ¸å¿ƒéœ€æ±‚ï¼Œè¿™ä¹Ÿæ˜¯ Agent Skill èƒ½åœ¨å‰ç«¯å¼€å‘ä¸­å¹¿æ³›åº”ç”¨çš„é‡è¦åŸå› ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-28">å…­ã€æŒ‰éœ€åŠ è½½çš„ Token æ¶ˆè€—è§£æï¼ˆå‰ç«¯å¼€å‘è€…å¿…çœ‹ï¼‰</h2>
<p>å¯¹äºä½¿ç”¨ AI å·¥å…·ï¼ˆå¦‚ Cursorã€Claudeï¼‰çš„å‰ç«¯å¼€å‘è€…è€Œè¨€ï¼ŒToken æ¶ˆè€—ç›´æ¥å…³ç³»åˆ°ä½¿ç”¨æˆæœ¬ï¼ˆéƒ¨åˆ†å·¥å…·æŒ‰ Token æ”¶è´¹ï¼‰ï¼Œè€Œ Agent Skill çš„â€œæŒ‰éœ€åŠ è½½â€é€»è¾‘ï¼Œæ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯â€œç²¾å‡†æ§åˆ¶ Token æ¶ˆè€—â€â€”â€”é¿å…åŠ è½½æ— ç”¨å†…å®¹ï¼Œæœ€å¤§åŒ–èŠ‚çœ Tokenï¼Œè¿™ä¹Ÿæ˜¯å‰ç«¯å¼€å‘è€…ä½¿ç”¨ Skill æ—¶éœ€è¦é‡ç‚¹å…³æ³¨çš„ç‚¹ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä»â€œToken æ¶ˆè€—çš„æ ¸å¿ƒé€»è¾‘â€â€œä¸åŒåŠ è½½é˜¶æ®µçš„ Token æ¶ˆè€—â€â€œå‰ç«¯åœºæ™¯ä¸‹çš„ Token èŠ‚çœæŠ€å·§â€ä¸‰ä¸ªç»´åº¦ï¼Œç»“åˆå®æµ‹æ•°æ®ï¼Œè¯¦ç»†è§£æï¼Œè®©ä½ æ—¢èƒ½æ˜ç™½â€œToken èŠ±åœ¨å“ªâ€ï¼Œä¹Ÿèƒ½å­¦ä¼šâ€œå¦‚ä½•çœ Tokenâ€ã€‚</p>
<h3 data-id="heading-29">1. æ ¸å¿ƒå‰æï¼šAgent Skill çš„ Token æ¶ˆè€—é€»è¾‘</h3>
<p>é¦–å…ˆæ˜ç¡®ä¸€ä¸ªæ ¸å¿ƒé€»è¾‘ï¼šAI å·¥å…·çš„ Token æ¶ˆè€—ï¼Œæœ¬è´¨æ˜¯â€œåŠ è½½çš„æ–‡æœ¬å†…å®¹é•¿åº¦â€â€”â€”æ–‡æœ¬è¶Šé•¿ï¼ŒToken æ¶ˆè€—è¶Šå¤šï¼ˆç±»æ¯”å‰ç«¯çš„â€œæ–‡ä»¶ä½“ç§¯è¶Šå¤§ï¼ŒåŠ è½½æ—¶é—´è¶Šé•¿â€ï¼‰ã€‚</p>
<p>Agent Skill çš„æŒ‰éœ€åŠ è½½ï¼Œæœ¬è´¨æ˜¯â€œåªåŠ è½½å½“å‰éœ€è¦çš„æ–‡æœ¬å†…å®¹â€ï¼šä¸è§¦å‘ Skill æ—¶ï¼Œä»…åŠ è½½è½»é‡çš„å…ƒæ•°æ®ï¼ˆToken æ¶ˆè€—æå°‘ï¼‰ï¼›è§¦å‘ Skill æ—¶ï¼Œä»…åŠ è½½è¯¥ Skill çš„æ ¸å¿ƒè§„åˆ™ï¼›ä¸ä½¿ç”¨ Reference/Script æ—¶ï¼Œä¸åŠ è½½å¯¹åº”çš„æ–‡ä»¶ï¼Œä»è€Œé¿å…åŠ è½½æ— ç”¨çš„æ–‡æœ¬å†…å®¹ï¼Œå‡å°‘ Token æ¶ˆè€—ã€‚å®æµ‹æ•°æ®æ˜¾ç¤ºï¼Œåœ¨å¤„ç†å‰ç«¯é•¿æµç¨‹ä»»åŠ¡æ—¶ï¼ŒæŒ‰éœ€åŠ è½½æ¶æ„èƒ½å°†ä¸Šä¸‹æ–‡ Token æ¶ˆè€—é™ä½ 60%-80%ï¼ŒèŠ‚çœæ•ˆæœæ˜¾è‘—ã€‚</p>
<h3 data-id="heading-30">2. ä¸åŒåŠ è½½é˜¶æ®µçš„ Token æ¶ˆè€—</h3>
<p>ç»“åˆå‰é¢æåˆ°çš„â€œä¸‰ä¸ªåŠ è½½é˜¶æ®µâ€ï¼Œæˆ‘ä»¬åˆ†åˆ«è§£ææ¯ä¸ªé˜¶æ®µçš„ Token æ¶ˆè€—ï¼ŒåŒæ—¶ç»™å‡ºå‰ç«¯åœºæ™¯ä¸‹çš„å®æµ‹æ•°æ®ï¼ˆä»¥ Cursor ä¸ºä¾‹ï¼ŒToken è®¡ç®—è§„åˆ™ä¸ Claude ä¸€è‡´ï¼Œ1000 å­—ç¬¦ â‰ˆ 750 Tokenï¼‰ï¼Œè®©ä½ æœ‰ç›´è§‚è®¤çŸ¥ï¼š</p>
<h4 data-id="heading-31">ï¼ˆ1ï¼‰åˆå§‹åŒ–é˜¶æ®µï¼šå…ƒæ•°æ®åŠ è½½ï¼ˆToken æ¶ˆè€—æä½ï¼Œå¯å¿½ç•¥ï¼‰</h4>
<p>åŠ è½½å†…å®¹ï¼šæ¯ä¸ª Skill çš„åç§°ã€ç®€çŸ­æè¿°ï¼ˆçº¦ 50-100 å­—ç¬¦/ä¸ªï¼‰ï¼›</p>
<p>Token æ¶ˆè€—ï¼šå•ä¸ª Skill çº¦ 30-75 Tokenï¼Œ10 ä¸ª Skill ä»…æ¶ˆè€— 300-750 Tokenï¼›</p>
<p>å‰ç«¯åœºæ™¯ç±»æ¯”ï¼šç›¸å½“äºåŠ è½½å‰ç«¯é¡¹ç›®çš„è·¯ç”±è¡¨ï¼ˆä»…åŒ…å«è·¯å¾„å’Œç»„ä»¶åç§°ï¼‰ï¼Œæ–‡ä»¶ä½“ç§¯æå°ï¼ŒåŠ è½½æ—¶çš„èµ„æºæ¶ˆè€—å¯å¿½ç•¥ã€‚</p>
<h4 data-id="heading-32">ï¼ˆ2ï¼‰è§¦å‘é˜¶æ®µï¼šæ ¸å¿ƒè§„åˆ™åŠ è½½ï¼ˆToken æ¶ˆè€—ä¸­ç­‰ï¼Œå¯æ§ï¼‰</h4>
<p>åŠ è½½å†…å®¹ï¼šå½“å‰è§¦å‘çš„ Skill çš„ SKILL.md å…¨éƒ¨å†…å®¹ï¼ˆå‰ç«¯åœºæ™¯ä¸‹ï¼ŒSKILL.md é•¿åº¦çº¦ 500-2000 å­—ç¬¦ï¼ŒåŒ…å«è§„åˆ™ã€åœºæ™¯ã€ç¤ºä¾‹ï¼‰ï¼›</p>
<p>Token æ¶ˆè€—ï¼šå•ä¸ª Skill çº¦ 375-1500 Tokenï¼›</p>
<p>å…³é”®è¯´æ˜ï¼šä»…åŠ è½½â€œå½“å‰è§¦å‘çš„ Skillâ€ï¼Œå…¶ä»– Skill ä¸åŠ è½½ï¼Œæ¯”å¦‚åŒæ—¶å°è£…äº† 10 ä¸ª Skillï¼Œè°ƒç”¨ 1 ä¸ªæ—¶ï¼Œä»…æ¶ˆè€—è¯¥ Skill çš„ Tokenï¼Œå…¶ä»– 9 ä¸ªä»ä»…æ¶ˆè€—å…ƒæ•°æ®çš„å°‘é‡ Tokenï¼›</p>
<p>å‰ç«¯åœºæ™¯ä¼˜åŒ–ï¼šSKILL.md ä¸­ä»…ä¿ç•™æ ¸å¿ƒè§„åˆ™ï¼Œåˆ é™¤å†—ä½™æè¿°ï¼ˆå¦‚æ— éœ€è¯¦ç»†å†™ç¤ºä¾‹ï¼Œä»…ä¿ç•™å…³é”®è§„åˆ™ï¼‰ï¼Œå¯è¿›ä¸€æ­¥é™ä½ Token æ¶ˆè€—ã€‚</p>
<h4 data-id="heading-33">ï¼ˆ3ï¼‰æ‰§è¡Œé˜¶æ®µï¼šReference/Script åŠ è½½ï¼ˆToken æ¶ˆè€—æŒ‰éœ€ï¼Œå¯æ§åˆ¶ï¼‰</h4>
<p>åŠ è½½å†…å®¹ï¼šä»…åŠ è½½å½“å‰éœ€è¦çš„ Reference æ–‡ä»¶æˆ– Script è„šæœ¬ï¼ˆæ–‡æœ¬é•¿åº¦å†³å®š Token æ¶ˆè€—ï¼‰ï¼›</p>
<p>Token æ¶ˆè€—ï¼š</p>
<ul>
<li>Referenceï¼šå‰ç«¯å¸¸ç”¨çš„æ¥å£æ–‡æ¡£ã€è§„èŒƒæ–‡æ¡£ï¼ˆçº¦ 1000-5000 å­—ç¬¦ï¼‰ï¼ŒToken æ¶ˆè€—çº¦ 750-3750 Tokenï¼›</li>
<li>Scriptï¼šå‰ç«¯è„šæœ¬ï¼ˆçº¦ 500-2000 å­—ç¬¦ï¼‰ï¼ŒToken æ¶ˆè€—çº¦ 375-1500 Tokenï¼›</li>
</ul>
<p>å…³é”®è¯´æ˜ï¼š</p>
<ul>
<li>ä¸ä½¿ç”¨ Reference/Script æ—¶ï¼Œä¸æ¶ˆè€—å¯¹åº”çš„ Tokenï¼ˆæŒ‰éœ€åŠ è½½çš„æ ¸å¿ƒä¼˜åŠ¿ï¼‰ï¼›</li>
<li>Script è„šæœ¬ä»…åŠ è½½â€œæ–‡æœ¬å†…å®¹â€ï¼Œæ‰§è¡Œæ—¶ä¸é¢å¤–æ¶ˆè€— Tokenï¼ˆç±»æ¯”å‰ç«¯åŠ è½½ JS æ–‡ä»¶ï¼Œä»…åŠ è½½æ–‡ä»¶å†…å®¹ï¼Œæ‰§è¡Œæ—¶ä¸æ¶ˆè€—é¢å¤–ç½‘ç»œèµ„æºï¼‰ï¼›</li>
<li>Reference æ–‡ä»¶å¯æ‹†åˆ†ï¼ˆå¦‚å°†åºå¤§çš„æ¥å£æ–‡æ¡£æ‹†åˆ†ä¸ºâ€œç”¨æˆ·æ¥å£.mdâ€â€œå•†å“æ¥å£.mdâ€ï¼‰ï¼Œéœ€è¦æ—¶ä»…åŠ è½½å¯¹åº”æ‹†åˆ†æ–‡ä»¶ï¼Œè¿›ä¸€æ­¥èŠ‚çœ Tokenï¼ˆç±»æ¯”å‰ç«¯æ‹†åˆ†ç»„ä»¶ï¼ŒæŒ‰éœ€å¼•å…¥ï¼‰ã€‚å®æµ‹æ˜¾ç¤ºï¼Œå°†åºå¤§çŸ¥è¯†åº“æ‹†åˆ†ä¸ºæŒ‰éœ€åŠ è½½çš„ Reference æ–‡ä»¶ï¼Œæ¯”å…¨é‡åŠ è½½çš„ Token æˆæœ¬èŠ‚çœ 92% ä»¥ä¸Šï¼ŒåŒæ—¶åŠ è½½é€Ÿåº¦æå‡ 45%ã€‚</li>
</ul>
<h3 data-id="heading-34">3. å‰ç«¯åœºæ™¯ä¸‹çš„ Token èŠ‚çœæŠ€å·§ï¼ˆå®ç”¨å¯è½åœ°ï¼‰</h3>
<p>ç»“åˆå‰ç«¯å¼€å‘çš„å®é™…ä½¿ç”¨åœºæ™¯ï¼Œåˆ†äº« 3 ä¸ªå®ç”¨çš„ Token èŠ‚çœæŠ€å·§ï¼Œç›´æ¥é™ä½ä½¿ç”¨æˆæœ¬ï¼š</p>
<ol>
<li>ç²¾ç®€ SKILL.md å†…å®¹ï¼šä»…ä¿ç•™æ ¸å¿ƒè§„åˆ™ï¼Œåˆ é™¤å†—ä½™çš„ç¤ºä¾‹ã€æè¿°ï¼ˆå¦‚ç¤ºä¾‹å¯ç®€åŒ–ï¼Œæ— éœ€å†™å®Œæ•´ä»£ç ï¼Œä»…å†™å…³é”®ç‰‡æ®µï¼‰ï¼›</li>
<li>æ‹†åˆ† Reference æ–‡ä»¶ï¼šå°†åºå¤§çš„å‚è€ƒèµ„æ–™æ‹†åˆ†ä¸ºå¤šä¸ªå°æ–‡ä»¶ï¼ˆå¦‚æ¥å£æ–‡æ¡£æŒ‰æ¨¡å—æ‹†åˆ†ï¼‰ï¼Œéœ€è¦æ—¶ä»…åŠ è½½å¯¹åº”æ¨¡å—ï¼Œé¿å…å…¨é‡åŠ è½½ï¼›</li>
<li>é¿å…åŒæ—¶è§¦å‘å¤šä¸ª Skillï¼šæ¯æ¬¡ä»…è°ƒç”¨ 1 ä¸ªéœ€è¦çš„ Skillï¼Œé¿å…å¤šä¸ª Skill åŒæ—¶åŠ è½½ï¼Œå¯¼è‡´ Token æµªè´¹ï¼ˆç±»æ¯”å‰ç«¯é¿å…åŒæ—¶åŠ è½½å¤šä¸ªä¸å¿…è¦çš„ç»„ä»¶ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-35">ä¸ƒã€Agent Skill ä¸ MCP çš„æ ¸å¿ƒåŒºåˆ«</h2>
<p>å¾ˆå¤šå‰ç«¯å¼€å‘è€…ä¼šæ··æ·† Agent Skill å’Œ MCPï¼Œç”šè‡³è®¤ä¸ºâ€œä¸¤è€…æ˜¯ä¸€å›äº‹â€â€”â€”å…¶å®ä¸¤è€…çš„æ ¸å¿ƒå®šä½ã€ä½œç”¨ã€ä½¿ç”¨åœºæ™¯å®Œå…¨ä¸åŒï¼Œç®€å•æ¥è¯´ï¼šAgent Skill æ˜¯â€œç»™ AI ç”¨çš„æŠ€èƒ½æ¨¡æ¿â€ï¼Œèšç„¦â€œAI æ“ä½œçš„æ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–â€ï¼›MCP æ˜¯â€œå‰ç«¯é¡¹ç›®çš„æ„å»º/éƒ¨ç½²å·¥å…·â€ï¼Œèšç„¦â€œé¡¹ç›®çš„æ„å»ºã€æ‰“åŒ…ã€éƒ¨ç½²æµç¨‹â€ï¼Œä¸¤è€…æ— ç›´æ¥å…³è”ï¼Œä½†å¯èƒ½åœ¨å‰ç«¯å¼€å‘ä¸­é…åˆä½¿ç”¨ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä»â€œ 6 ä¸ªç»´åº¦â€ï¼Œè¯¦ç»†å¯¹æ¯”ä¸¤è€…çš„åŒºåˆ«ï¼Œç»“åˆå‰ç«¯å®é™…ä½¿ç”¨åœºæ™¯ï¼Œè®©ä½ å½»åº•åˆ†æ¸…ï¼Œé¿å…ä½¿ç”¨æ—¶æ··æ·†ï¼š</p>








































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Agent Skill</th><th>MCPï¼ˆå‰ç«¯å¸¸ç”¨ï¼Œå¦‚ Webpackã€Viteã€Rollupï¼‰</th></tr></thead><tbody><tr><td>æ ¸å¿ƒå®šä½</td><td>AI æ™ºèƒ½ä½“çš„â€œæŠ€èƒ½æ¨¡æ¿â€ï¼Œç”¨äºè§„èŒƒã€è‡ªåŠ¨åŒ– AI çš„æ“ä½œï¼ˆç”Ÿæˆä»£ç ã€ä¿®å¤ä»£ç ã€æ‰§è¡Œè„šæœ¬ï¼‰ï¼Œæœ¬è´¨æ˜¯â€œAI çš„æ“ä½œæ‰‹å†Œâ€ï¼Œæ ¸å¿ƒæ˜¯â€œèµ‹èƒ½ AIâ€ï¼Œè®© AI æ›´é€‚é…å‰ç«¯å¼€å‘åœºæ™¯ã€‚</td><td>å‰ç«¯é¡¹ç›®çš„â€œæ„å»º/éƒ¨ç½²å·¥å…·â€ï¼Œç”¨äºå°†å‰ç«¯æºç ï¼ˆJS/Vue/TS/CSSï¼‰æ‰“åŒ…ã€å‹ç¼©ã€ä¼˜åŒ–ï¼Œç”Ÿæˆå¯éƒ¨ç½²çš„é™æ€æ–‡ä»¶ï¼Œæœ¬è´¨æ˜¯â€œé¡¹ç›®çš„åŠ å·¥å·¥å…·â€ï¼Œæ ¸å¿ƒæ˜¯â€œå¤„ç†é¡¹ç›®æ–‡ä»¶â€ã€‚</td></tr><tr><td>æ ¸å¿ƒä½œç”¨</td><td>1. çœå»é‡å¤ Promptï¼Œæå‡ AI ç”Ÿæˆä»£ç çš„æ•ˆç‡ï¼›2. å…³è”é¡¹ç›®ä¸Šä¸‹æ–‡ï¼Œè®© AI ç”Ÿæˆçš„ä»£ç é€‚é…é¡¹ç›®è§„èŒƒï¼›3. æ‰§è¡Œè‡ªåŠ¨åŒ–æ“ä½œï¼ˆå¦‚æ‰¹é‡é‡æ„ã€ä»£ç ä¿®å¤ï¼‰ï¼Œå®ç° AI æ“ä½œé—­ç¯ã€‚</td><td>1. æ‰“åŒ…ï¼šå°†å¤šä¸ªæºç æ–‡ä»¶åˆå¹¶ä¸ºå•ä¸ª/å¤šä¸ªé™æ€æ–‡ä»¶ï¼›2. ä¼˜åŒ–ï¼šå‹ç¼©ä»£ç ã€å›¾ç‰‡ï¼Œæå‡é¡¹ç›®åŠ è½½é€Ÿåº¦ï¼›3. æ„å»ºï¼šå¤„ç† ES6+ è¯­æ³•ã€CSS é¢„å¤„ç†å™¨ï¼Œè®©æµè§ˆå™¨å¯è¯†åˆ«ï¼›4. éƒ¨ç½²ï¼šéƒ¨åˆ† MCP æ”¯æŒè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>å‰ç«¯å¼€å‘çš„â€œç¼–ç é˜¶æ®µâ€ï¼šç”Ÿæˆç»„ä»¶ã€ä¿®å¤ä»£ç ã€æ¥å£è¯·æ±‚ä»£ç ç”Ÿæˆã€æ‰¹é‡é‡æ„ã€è§„èŒƒæ ¡éªŒç­‰ï¼Œä¸ AI å·¥å…·ï¼ˆCursorã€Claudeï¼‰é…åˆä½¿ç”¨ï¼Œæ ¸å¿ƒæ˜¯â€œè¾…åŠ©ç¼–ç â€ã€‚</td><td>å‰ç«¯å¼€å‘çš„â€œæ„å»º/éƒ¨ç½²é˜¶æ®µâ€ï¼šç¼–ç å®Œæˆåï¼Œæ‰“åŒ…æºç ã€ä¼˜åŒ–é¡¹ç›®ã€éƒ¨ç½²ä¸Šçº¿ï¼Œæ ¸å¿ƒæ˜¯â€œå¤„ç†é¡¹ç›®è¾“å‡ºâ€ï¼Œä¸å‰ç«¯æ¡†æ¶ï¼ˆVueã€Reactï¼‰é…åˆä½¿ç”¨ã€‚</td></tr><tr><td>ä¾èµ–ç¯å¢ƒ</td><td>ä¾èµ–æ”¯æŒ Agent Skill çš„ AI å·¥å…·ï¼ˆå¦‚ Cursorã€Claudeï¼‰ï¼Œæ— éœ€é¢å¤–éƒ¨ç½²ï¼Œä»…éœ€åœ¨é¡¹ç›®ä¸­åˆ›å»º Skill é…ç½®æ–‡ä»¶ï¼ŒAI å·¥å…·è‡ªåŠ¨è¯†åˆ«ã€‚</td><td>ä¾èµ– Node.js ç¯å¢ƒï¼Œéœ€åœ¨é¡¹ç›®ä¸­é…ç½®ï¼ˆå¦‚ webpack.config.jsã€vite.config.jsï¼‰ï¼Œéƒ¨åˆ† MCP éœ€é¢å¤–å®‰è£…æ’ä»¶ï¼ˆå¦‚ CSS é¢„å¤„ç†å™¨æ’ä»¶ï¼‰ï¼Œé…ç½®ç›¸å¯¹å¤æ‚ã€‚</td></tr><tr><td>æ“ä½œå¯¹è±¡</td><td>æ“ä½œçš„æ˜¯â€œAI çš„æŒ‡ä»¤å’Œè¡Œä¸ºâ€ï¼Œé—´æ¥ä½œç”¨äºå‰ç«¯æºç ï¼ˆé€šè¿‡ AI ç”Ÿæˆã€ä¿®æ”¹æºç ï¼‰ï¼Œä¸ç›´æ¥å¤„ç†é¡¹ç›®æ–‡ä»¶ï¼ˆScript è„šæœ¬ä»…åœ¨æ²™ç®±æ‰§è¡Œï¼Œéœ€æ‰‹åŠ¨åº”ç”¨åˆ°æœ¬åœ°ï¼‰ã€‚</td><td>ç›´æ¥æ“ä½œâ€œå‰ç«¯æºç æ–‡ä»¶â€ï¼Œå¯¹æºç è¿›è¡Œæ‰“åŒ…ã€å‹ç¼©ã€ä¼˜åŒ–ï¼Œç›´æ¥è¾“å‡ºå¯éƒ¨ç½²çš„é™æ€æ–‡ä»¶ï¼Œç›´æ¥ä½œç”¨äºé¡¹ç›®æ–‡ä»¶ã€‚</td></tr><tr><td>å‰ç«¯å¼€å‘è€…å…³è”åº¦</td><td>å¯é€‰ä½†æ¨èä½¿ç”¨ï¼šä¸ä½¿ç”¨ä¹Ÿèƒ½ç¼–ç ï¼Œä½†ä½¿ç”¨åèƒ½å¤§å¹…æå‡ç¼–ç æ•ˆç‡ï¼Œå‡å°‘é‡å¤å·¥ä½œï¼Œå°¤å…¶é€‚åˆå¤§å‹é¡¹ç›®ï¼ˆè§„èŒƒå¤šã€é‡å¤å·¥ä½œå¤šï¼‰ã€‚</td><td>å¿…ç”¨ï¼šå‰ç«¯é¡¹ç›®ï¼ˆå°¤å…¶æ˜¯æ¡†æ¶å¼€å‘ï¼‰å¿…é¡»ä½¿ç”¨ MCPï¼Œå¦åˆ™æºç æ— æ³•æ‰“åŒ…ã€ä¼˜åŒ–ï¼Œæ— æ³•éƒ¨ç½²ä¸Šçº¿ï¼ˆåŸç”Ÿ JS é¡¹ç›®å¯ä¸ç”¨ï¼Œä½†å®é™…å¼€å‘ä¸­æå°‘ï¼‰ã€‚</td></tr></tbody></table>
<h3 data-id="heading-36">ä¸€å¥è¯åˆ†æ¸…</h3>
<p>Agent Skillï¼š<strong>è¾…åŠ© AI å¸®ä½ å†™ä»£ç ã€ä¿®ä»£ç ã€åšæ‰¹é‡æ“ä½œ</strong>ï¼Œèšç„¦â€œç¼–ç æ•ˆç‡â€ï¼Œé…åˆ Cursor ç­‰ AI å·¥å…·ä½¿ç”¨ï¼›</p>
<p>MCPï¼š<strong>å¸®ä½ æŠŠå†™å¥½çš„ä»£ç æ‰“åŒ…ã€ä¼˜åŒ–ã€éƒ¨ç½²ä¸Šçº¿</strong>ï¼Œèšç„¦â€œé¡¹ç›®è¾“å‡ºâ€ï¼Œé…åˆ Vueã€React ç­‰æ¡†æ¶ä½¿ç”¨ï¼›</p>
<p>ä¸¤è€…é…åˆåœºæ™¯ï¼šç”¨ Agent Skill è¾…åŠ©ç¼–ç ï¼ˆç”Ÿæˆã€ä¿®å¤ä»£ç ï¼‰â†’ ç¼–ç å®Œæˆåï¼Œç”¨ MCP æ‰“åŒ…ã€ä¼˜åŒ–é¡¹ç›® â†’ éƒ¨ç½²ä¸Šçº¿ï¼Œå½¢æˆå‰ç«¯å¼€å‘çš„å®Œæ•´æµç¨‹ã€‚</p>
<h2 data-id="heading-37">å…«ã€æ€»ç»“ï¼šå‰ç«¯å¼€å‘è€…å¦‚ä½•é«˜æ•ˆç”¨å¥½ Agent Skill</h2>
<p>ç»“åˆæœ¬æ–‡çš„å…¨ç»´åº¦è§£æï¼ŒAgent Skill å¯¹äºå‰ç«¯å¼€å‘è€…è€Œè¨€ï¼Œæ ¸å¿ƒä»·å€¼æ˜¯â€œè§£æ”¾åŒæ‰‹ã€æå‡æ•ˆç‡â€â€”â€”æŠŠé‡å¤ã€æœºæ¢°ã€è§„èŒƒçš„ç¼–ç å·¥ä½œï¼Œäº¤ç»™ AI è‡ªåŠ¨å®Œæˆï¼Œå¼€å‘è€…ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ä¸šåŠ¡æµç¨‹è®¾è®¡ã€äº¤äº’ä¼˜åŒ–ï¼‰ã€‚</p>
<p>æœ€åï¼Œç»™å‰ç«¯å¼€å‘è€… 3 ä¸ªå®ç”¨å»ºè®®ï¼Œå¸®åŠ©ä½ å¿«é€Ÿè½åœ° Agent Skillï¼Œæœ€å¤§åŒ–å‘æŒ¥å…¶ä»·å€¼ï¼š</p>
<ol>
<li>ä»é«˜é¢‘åœºæ™¯å…¥æ‰‹ï¼šä¼˜å…ˆå°è£…å‰ç«¯å¼€å‘ä¸­â€œé‡å¤æ¬¡æ•°æœ€å¤šâ€çš„ Skillï¼ˆå¦‚ç»„ä»¶ç”Ÿæˆã€ESLint ä¿®å¤ã€æ¥å£è¯·æ±‚ç”Ÿæˆï¼‰ï¼Œå¿«é€Ÿçœ‹åˆ°æ•ˆç‡æå‡ï¼Œé¿å…ä¸€å¼€å§‹å°±å°è£…å¤æ‚ Skillï¼›</li>
<li>è´´åˆé¡¹ç›®è§„èŒƒï¼šå°è£… Skill æ—¶ï¼Œä¸¥æ ¼éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒã€æ¥å£è§„èŒƒã€ç»„ä»¶è§„èŒƒï¼Œè®©ç”Ÿæˆçš„ä»£ç æ— éœ€æ‰‹åŠ¨ä¿®æ”¹ï¼ŒçœŸæ­£å®ç°â€œæ‹¿æ¥å°±ç”¨â€ï¼Œè¿™ä¹Ÿæ˜¯ Skill æœ€æ ¸å¿ƒçš„ä»·å€¼ï¼›</li>
<li>åˆç†ä½¿ç”¨ Reference/Scriptï¼šç®€å•åœºæ™¯ç”¨åŸºç¡€ Skillï¼ˆä»… SKILL.mdï¼‰ï¼Œå¤æ‚åœºæ™¯ï¼ˆæ¥å£è”è°ƒã€æ‰¹é‡é‡æ„ï¼‰ç»“åˆ Reference å’Œ Scriptï¼ŒåŒæ—¶æ³¨æ„æ§åˆ¶ Token æ¶ˆè€—ï¼Œé¿å…æµªè´¹ã€‚</li>
</ol>
<p>éšç€ AI æŠ€æœ¯åœ¨å‰ç«¯å¼€å‘ä¸­çš„æ™®åŠï¼ŒAgent Skill ä¼šé€æ¸æˆä¸ºå‰ç«¯å¼€å‘è€…çš„â€œå¿…å¤‡å·¥å…·â€â€”â€”å®ƒä¸æ˜¯â€œæ›¿ä»£å¼€å‘è€…â€ï¼Œè€Œæ˜¯â€œæˆä¸ºå¼€å‘è€…çš„ä¸“å± AI åŠ©æ‰‹â€ï¼Œå¸®ä½ çœå»é‡å¤å·¥ä½œï¼Œæå‡ç¼–ç æ•ˆç‡ï¼Œè®©ä½ æœ‰æ›´å¤šæ—¶é—´ä¸“æ³¨äºæ›´æœ‰ä»·å€¼çš„å¼€å‘å·¥ä½œã€‚</p>
<p>åç»­ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„é¡¹ç›®åœºæ™¯ï¼Œä¸æ–­ä¼˜åŒ–ã€æ‰©å±• Skill åº“ï¼Œè®© AI åŠ©æ‰‹è¶Šæ¥è¶Šé€‚é…ä½ çš„å¼€å‘ä¹ æƒ¯ï¼ŒçœŸæ­£å®ç°â€œé«˜æ•ˆç¼–ç ã€è½»æ¾å¼€å‘â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agent Skillä¸Rulesçš„åŒºåˆ«â€”â€”ä»¥Cursorä¸ºä¾‹]]></title>    <link>https://juejin.cn/post/7604012106154819630</link>    <guid>https://juejin.cn/post/7604012106154819630</guid>    <pubDate>2026-02-09T03:25:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604012106154819630" data-draft-id="7604080364354142235" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agent Skillä¸Rulesçš„åŒºåˆ«â€”â€”ä»¥Cursorä¸ºä¾‹"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-09T03:25:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éšæ„_"/> <meta itemprop="url" content="https://juejin.cn/user/4222562141210478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agent Skillä¸Rulesçš„åŒºåˆ«â€”â€”ä»¥Cursorä¸ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4222562141210478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éšæ„_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T03:25:12.000Z" title="Mon Feb 09 2026 03:25:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨AI Agentï¼ˆæ™ºèƒ½ä»£ç†ï¼‰çš„è¿è¡Œé€»è¾‘ä¸­ï¼ŒAgent Skillï¼ˆæ™ºèƒ½ä½“æŠ€èƒ½ï¼‰ä¸Rulesï¼ˆè§„åˆ™ï¼‰æ˜¯ä¸¤ä¸ªåŸºç¡€ä¸”æ˜“æ··æ·†çš„æ ¸å¿ƒæ¦‚å¿µã€‚äºŒè€…å…±åŒæ”¯æ’‘AIå·¥å…·å®ŒæˆæŒ‡å®šä»»åŠ¡ï¼Œä½†åœ¨æœ¬è´¨ã€è¿è¡Œé€»è¾‘ã€çµæ´»åº¦åŠåº”ç”¨åœºæ™¯ä¸Šå­˜åœ¨æ ¹æœ¬æ€§å·®å¼‚ã€‚Cursorä½œä¸ºä¸€æ¬¾ä¸»æ‰“ä»£ç ç¼–å†™çš„AIå·¥å…·ï¼Œå…¶èƒŒåçš„è¿è¡Œæœºåˆ¶æ°å¥½æ¸…æ™°åœ°ä½“ç°äº†è¿™ä¸¤è€…çš„åŒºåˆ«â€”â€”Rulesæ„å»ºäº†å·¥å…·çš„â€œåº•çº¿æ¡†æ¶â€ï¼Œè€ŒAgent Skillèµ‹äºˆäº†å·¥å…·â€œçµæ´»è§£é¢˜â€çš„èƒ½åŠ›ã€‚æœ¬æ–‡å°†ä»¥Cursorä¸ºå…·ä½“æ¡ˆä¾‹ï¼Œä»å¤šç»´åº¦è¯¦ç»†æ‹†è§£äºŒè€…çš„æ ¸å¿ƒå·®å¼‚ï¼Œå°¤å…¶è¡¥å……â€œæºå¸¦æ–¹å¼â€çš„åŒºåˆ«ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´æ·±åˆ»ç†è§£AIå·¥å…·çš„å·¥ä½œåŸç†ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å…ˆæ˜ç¡®æ ¸å¿ƒå®šä¹‰ï¼šä¸¤ä¸ªæ¦‚å¿µçš„æœ¬è´¨å·®å¼‚</h2>
<p>è¦åŒºåˆ†Agent Skillä¸Rulesï¼Œé¦–å…ˆè¦è·³å‡ºâ€œéƒ½æ˜¯å®Œæˆä»»åŠ¡çš„æ–¹å¼â€è¿™ä¸€è¡¨å±‚è®¤çŸ¥ï¼ŒæŠ“ä½äºŒè€…çš„æœ¬è´¨å†…æ ¸ã€‚ç®€å•æ¥è¯´ï¼Œ<strong>Rulesæ˜¯â€œé¢„è®¾çš„å›ºå®šæŒ‡ä»¤â€ï¼Œæ˜¯AIå¿…é¡»éµå®ˆçš„â€œç¡¬çº¦æŸâ€ï¼›è€ŒAgent Skillæ˜¯â€œä¹ å¾—çš„çµæ´»èƒ½åŠ›â€ï¼Œæ˜¯AIè¿ç”¨çŸ¥è¯†è§£å†³é—®é¢˜çš„â€œè½¯èƒ½åŠ›â€</strong> ã€‚äºŒè€…çš„å®šä¹‰å·®å¼‚ï¼Œç›´æ¥å†³å®šäº†å®ƒä»¬åœ¨AIå·¥å…·ä¸­æ‰®æ¼”çš„ä¸åŒè§’è‰²ï¼Œä¹Ÿå†³å®šäº†å…¶æºå¸¦æ–¹å¼çš„æœ¬è´¨åŒºåˆ«â€”â€”Rulesæ˜¯AIå·¥å…·å§‹ç»ˆæºå¸¦ã€å…¨ç¨‹ç”Ÿæ•ˆçš„â€œåŸºç¡€å‡†åˆ™â€ï¼Œè€ŒAgent Skillæ˜¯AIå·¥å…·æŒ‰éœ€è°ƒç”¨ã€ä¸æŒç»­å ç”¨èµ„æºã€æœªä½¿ç”¨æ—¶ä¸ä¸»åŠ¨è§¦å‘çš„â€œä¸“é¡¹èƒ½åŠ›â€ã€‚</p>
<h3 data-id="heading-2">1. Rulesï¼ˆè§„åˆ™ï¼‰ï¼šAIçš„â€œè¡Œä¸ºæ‰‹å†Œâ€ï¼Œå›ºå®šä¸”ä¸å¯é€¾è¶Šï¼Œå…¨ç¨‹æºå¸¦ç”Ÿæ•ˆ</h3>
<p>Rulesæ˜¯ç”±å¼€å‘è€…é¢„å…ˆå®šä¹‰çš„ã€æ˜ç¡®çš„ã€åˆšæ€§çš„æŒ‡ä»¤é›†åˆï¼Œæ ¸å¿ƒä½œç”¨æ˜¯åˆ’å®šAIçš„è¡Œä¸ºè¾¹ç•Œã€è§„èŒƒåŸºç¡€æ“ä½œæµç¨‹ï¼Œå›ç­”â€œä»€ä¹ˆå¯ä»¥åšã€ä»€ä¹ˆä¸èƒ½åšï¼Œä»¥åŠåŸºç¡€æ“ä½œè¦éµå¾ªä»€ä¹ˆæ­¥éª¤â€ã€‚å®ƒä¸å…·å¤‡å­¦ä¹ èƒ½åŠ›å’Œçµæ´»è°ƒæ•´æ€§ï¼Œæ— è®ºè¾“å…¥åœºæ™¯å¦‚ä½•å˜åŒ–ï¼Œåªè¦è§¦å‘äº†è§„åˆ™æ¡ä»¶ï¼ŒAIå°±å¿…é¡»æŒ‰ç…§é¢„è®¾æŒ‡ä»¤æ‰§è¡Œï¼Œä¸å­˜åœ¨â€œå˜é€šâ€çš„å¯èƒ½ã€‚</p>
<p>Rulesçš„æ ¸å¿ƒç‰¹å¾æ˜¯â€œç¡®å®šæ€§â€â€”â€”è¾“å…¥ä¸è¾“å‡ºä¹‹é—´å­˜åœ¨å›ºå®šå¯¹åº”å…³ç³»ï¼Œå¦‚åŒå·¥å‚æµæ°´çº¿çš„æ“ä½œè§„èŒƒï¼Œæ¯ä¸€ä¸ªæ­¥éª¤éƒ½æœ‰æ˜ç¡®è¦æ±‚ï¼Œä¸å…è®¸åå·®ã€‚æ›´å…³é”®çš„æ˜¯ï¼ŒRulesæ˜¯AIå·¥å…·<strong>å…¨ç¨‹æºå¸¦ã€å®æ—¶ç”Ÿæ•ˆ</strong>çš„ï¼Œæ— è®ºç”¨æˆ·æ˜¯å¦è§¦å‘ç›¸å…³åŠŸèƒ½ï¼ŒRuleséƒ½ä¼šæŒç»­å­˜åœ¨äºå·¥å…·çš„è¿è¡Œé€»è¾‘ä¸­ï¼Œéšæ—¶å‡†å¤‡æ£€æµ‹è¿è§„è¡Œä¸ºã€è§„èŒƒåŸºç¡€æ“ä½œã€‚å¯¹äºCursorè€Œè¨€ï¼Œå…¶å†…ç½®çš„Rulesçš„æ ¸å¿ƒç›®çš„æ˜¯ä¿éšœå·¥å…·è¿è¡Œçš„ç¨³å®šæ€§ã€å®‰å…¨æ€§ï¼Œä»¥åŠåŸºç¡€åŠŸèƒ½çš„ä¸€è‡´æ€§ï¼Œè¿™ç§ä¿éšœéœ€è¦å…¨ç¨‹ç”Ÿæ•ˆï¼Œå› æ­¤Ruleså¿…é¡»ä¸€ç›´æºå¸¦ã€‚</p>
<h3 data-id="heading-3">2. Agent Skillï¼ˆæ™ºèƒ½ä½“æŠ€èƒ½ï¼‰ï¼šAIçš„â€œè§£é¢˜èƒ½åŠ›â€ï¼Œçµæ´»ä¸”å¯è¿­ä»£ï¼ŒæŒ‰éœ€è°ƒç”¨ã€ä¸æŒç»­æºå¸¦</h3>
<p>Agent Skillæ˜¯AIé€šè¿‡è®­ç»ƒï¼ˆæ•°æ®è®­ç»ƒã€å¼ºåŒ–å­¦ä¹ ç­‰ï¼‰ä¹ å¾—çš„ã€èƒ½å¤Ÿçµæ´»åº”å¯¹å¤æ‚åœºæ™¯ã€è§£å†³å…·ä½“é—®é¢˜çš„èƒ½åŠ›ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯â€œé«˜æ•ˆå®Œæˆç›®æ ‡ä»»åŠ¡â€ï¼Œå›ç­”â€œé‡åˆ°å…·ä½“é—®é¢˜æ—¶ï¼Œå¦‚ä½•æœ€ä¼˜åœ°è§£å†³å®ƒâ€ã€‚å®ƒå…·å¤‡ä¸€å®šçš„çµæ´»æ€§å’Œé€‚åº”æ€§ï¼Œèƒ½å¤Ÿæ ¹æ®è¾“å…¥çš„å·®å¼‚ã€åœºæ™¯çš„å˜åŒ–ï¼Œè°ƒæ•´è§£å†³é—®é¢˜çš„æ–¹å¼ï¼Œç”šè‡³åœ¨é‡åˆ°æ–°åœºæ™¯æ—¶ï¼ŒåŸºäºå·²æœ‰æŠ€èƒ½è¿›è¡Œåˆç†é€‚é…ï¼ˆè€Œéæœºæ¢°éµå¾ªå›ºå®šæŒ‡ä»¤ï¼‰ã€‚</p>
<p>Agent Skillçš„æ ¸å¿ƒç‰¹å¾æ˜¯â€œçµæ´»æ€§â€â€”â€”è¾“å…¥ä¸è¾“å‡ºä¹‹é—´æ²¡æœ‰å›ºå®šå¯¹åº”å…³ç³»ï¼ŒAIä¼šæ ¹æ®è‡ªèº«ä¹ å¾—çš„çŸ¥è¯†å’Œç»éªŒï¼Œé€‰æ‹©æœ€ä¼˜è·¯å¾„å®Œæˆä»»åŠ¡ï¼Œå¦‚åŒäººç±»çš„ä¸“ä¸šæŠ€èƒ½ï¼ˆå¦‚ç¨‹åºå‘˜ç¼–å†™ä»£ç ã€è®¾è®¡å¸ˆç»˜åˆ¶å›¾çº¸ï¼‰ï¼Œèƒ½å¤Ÿåº”å¯¹ä¸åŒåœºæ™¯ä¸‹çš„å¤æ‚éœ€æ±‚ã€‚ä¸Rulesä¸åŒï¼ŒAgent Skillæ˜¯AIå·¥å…·<strong>æŒ‰éœ€è°ƒç”¨ã€ä¸æŒç»­æºå¸¦</strong>çš„ï¼šå½“ç”¨æˆ·æ²¡æœ‰è§¦å‘ç›¸å…³éœ€æ±‚æ—¶ï¼ŒSkillä¸ä¼šä¸»åŠ¨ç”Ÿæ•ˆï¼Œä¹Ÿä¸ä¼šæŒç»­å ç”¨å·¥å…·èµ„æºï¼›åªæœ‰å½“ç”¨æˆ·æå‡ºå…·ä½“ä»»åŠ¡éœ€æ±‚ï¼ˆå¦‚ç”Ÿæˆä»£ç ã€ä¿®å¤é”™è¯¯ï¼‰æ—¶ï¼Œå·¥å…·æ‰ä¼šè°ƒç”¨å¯¹åº”çš„Skillï¼Œå®Œæˆä»»åŠ¡åï¼ŒSkillä¼šå›å½’â€œä¼‘çœ â€çŠ¶æ€ï¼Œä¸å†ä¸»åŠ¨å‚ä¸å·¥å…·è¿è¡Œã€‚</p>
<h2 data-id="heading-4">äºŒã€ä»¥Cursorä¸ºæ¡ˆä¾‹ï¼šå¤šç»´åº¦æ‹†è§£äºŒè€…çš„å…·ä½“åŒºåˆ«</h2>
<p>Cursorçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ä»£ç ç”Ÿæˆã€ä»£ç ä¼˜åŒ–ã€é”™è¯¯ä¿®å¤ã€è¯­æ³•æç¤ºç­‰ï¼Œå…¶èƒŒååŒæ—¶ä¾èµ–Rulesçš„â€œåˆšæ€§çº¦æŸâ€å’ŒAgent Skillçš„â€œçµæ´»è§£é¢˜â€ã€‚æˆ‘ä»¬ä»7ä¸ªæ ¸å¿ƒç»´åº¦ï¼ˆæ–°å¢æºå¸¦æ–¹å¼ï¼‰ï¼Œç»“åˆCursorçš„å®é™…åŠŸèƒ½ï¼Œæ‹†è§£äºŒè€…çš„å…·ä½“å·®å¼‚ï¼Œè®©æŠ½è±¡æ¦‚å¿µè½åœ°ã€‚</p>
<h3 data-id="heading-5">ç»´åº¦1ï¼šè¿è¡Œé€»è¾‘â€”â€”â€œæŒ‰æŒ‡ä»¤æ‰§è¡Œâ€vsâ€œæŒ‰èƒ½åŠ›è§£é¢˜â€</h3>
<p>Rulesçš„è¿è¡Œé€»è¾‘æ˜¯â€œæ¡ä»¶-è§¦å‘-æ‰§è¡Œâ€ï¼Œå®Œå…¨ä¾èµ–é¢„è®¾æŒ‡ä»¤ï¼Œä¸æ¶‰åŠä»»ä½•â€œåˆ¤æ–­â€å’Œâ€œé€‚é…â€ï¼›è€ŒAgent Skillçš„è¿è¡Œé€»è¾‘æ˜¯â€œéœ€æ±‚-åˆ†æ-è§£é¢˜â€ï¼Œä¾èµ–è‡ªèº«ä¹ å¾—çš„çŸ¥è¯†ï¼Œå…·å¤‡ä¸»åŠ¨åˆ†æå’Œçµæ´»é€‚é…çš„èƒ½åŠ›ã€‚</p>
<p>ä»¥Cursorçš„â€œè¯­æ³•è§„èŒƒâ€ç›¸å…³åŠŸèƒ½ä¸ºä¾‹ï¼š</p>
<ul>
<li>Ruleså±‚é¢ï¼šå¼€å‘è€…é¢„å…ˆä¸ºæ¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼ˆPythonã€JavaScriptã€Javaç­‰ï¼‰å®šä¹‰äº†æ˜ç¡®çš„è¯­æ³•è§„åˆ™â€”â€”æ¯”å¦‚Pythonä¸­â€œç¼©è¿›å¿…é¡»ç”¨4ä¸ªç©ºæ ¼â€â€œè¯­å¥ç»“å°¾ä¸èƒ½åŠ åˆ†å·â€â€œå…³é”®å­—ä¸èƒ½ä½œä¸ºå˜é‡åâ€ï¼Œè¿™äº›éƒ½æ˜¯å›ºå®šçš„Rulesã€‚å½“ç”¨æˆ·åœ¨Cursorä¸­è¾“å…¥â€œif a == 1:â€åå¿˜è®°ç¼©è¿›ï¼ŒCursorä¼šç«‹å³æŠ¥é”™ï¼ŒåŸå› æ˜¯è§¦å‘äº†â€œPythonæ¡ä»¶è¯­å¥åå¿…é¡»ç¼©è¿›â€çš„Rulesï¼Œæ­¤æ—¶Cursorçš„è¡Œä¸ºæ˜¯â€œæ£€æµ‹åˆ°è¿è§„â†’æ‰§è¡Œé¢„è®¾æç¤ºï¼ˆæŠ¥é”™ï¼‰â€ï¼Œæ²¡æœ‰ä»»ä½•çµæ´»è°ƒæ•´ï¼Œå®Œå…¨éµå¾ªå›ºå®šæŒ‡ä»¤ã€‚</li>
<li>Agent Skillå±‚é¢ï¼šå½“ç”¨æˆ·è¾“å…¥â€œç”¨Pythonå†™ä¸€ä¸ªè¯»å–Excelæ–‡ä»¶å¹¶ç­›é€‰æ•°æ®çš„ä»£ç â€æ—¶ï¼ŒCursorçš„æ ¸å¿ƒè¡Œä¸ºçš„æ˜¯â€œåˆ†æéœ€æ±‚â†’è°ƒç”¨ä»£ç ç¼–å†™æŠ€èƒ½â†’ç”Ÿæˆé€‚é…çš„ä»£ç â€ã€‚æ­¤æ—¶ï¼ŒCursorä¸ä¼šæœºæ¢°éµå¾ªæŸä¸€æ¡å›ºå®šæŒ‡ä»¤ï¼Œè€Œæ˜¯ä¼šæ ¹æ®ç”¨æˆ·çš„å…·ä½“éœ€æ±‚ï¼ˆè¯»å–Excelã€ç­›é€‰æ•°æ®ï¼‰ï¼Œç»“åˆè‡ªèº«ä¹ å¾—çš„Pythonç¼–ç¨‹çŸ¥è¯†ï¼Œé€‰æ‹©åˆé€‚çš„åº“ï¼ˆå¦‚pandasï¼‰ã€åˆé€‚çš„ä»£ç é€»è¾‘ï¼Œç”Ÿæˆå¯ç›´æ¥è¿è¡Œçš„ä»£ç ã€‚å¦‚æœç”¨æˆ·åç»­è¡¥å……â€œç­›é€‰å‡ºå¤§äº100çš„æ•°æ®å¹¶ä¿å­˜ä¸ºæ–°æ–‡ä»¶â€ï¼ŒCursorè¿˜èƒ½çµæ´»è°ƒæ•´ä»£ç ï¼Œæ— éœ€å¼€å‘è€…æ–°å¢é¢å¤–Rulesâ€”â€”è¿™å°±æ˜¯Agent Skillçš„â€œè§£é¢˜èƒ½åŠ›â€ï¼Œè€Œéâ€œæŒ‡ä»¤æ‰§è¡Œâ€ã€‚</li>
</ul>
<h3 data-id="heading-6">ç»´åº¦2ï¼šçµæ´»åº¦â€”â€”â€œåˆšæ€§ä¸å¯å˜â€vsâ€œå¼¹æ€§å¯é€‚é…â€</h3>
<p>Rulesçš„æœ€å¤§ç‰¹ç‚¹æ˜¯â€œåˆšæ€§â€ï¼Œä¸€æ—¦å®šä¹‰å®Œæˆï¼Œæ— æ³•æ ¹æ®åœºæ™¯å˜åŒ–çµæ´»è°ƒæ•´ï¼Œé™¤éå¼€å‘è€…æ‰‹åŠ¨ä¿®æ”¹Rulesï¼›è€ŒAgent Skillçš„æœ€å¤§ç‰¹ç‚¹æ˜¯â€œå¼¹æ€§â€ï¼Œèƒ½å¤Ÿæ ¹æ®è¾“å…¥å·®å¼‚ã€éœ€æ±‚å˜åŒ–ï¼Œçµæ´»è°ƒæ•´è§£å†³é—®é¢˜çš„æ–¹å¼ï¼Œç”šè‡³é€‚é…æœªé¢„è®¾çš„æ–°åœºæ™¯ã€‚</p>
<p>ç»“åˆCursorçš„â€œä»£ç ä¼˜åŒ–â€åŠŸèƒ½è¿›ä¸€æ­¥è¯´æ˜ï¼š</p>
<p>Cursorçš„Rulesä¸­ï¼Œæœ‰ä¸€æ¡å›ºå®šè§„åˆ™æ˜¯â€œä¸ç”Ÿæˆæ¶æ„ä»£ç â€â€”â€”æ— è®ºç”¨æˆ·è¾“å…¥ä»€ä¹ˆéœ€æ±‚ï¼Œåªè¦æ¶‰åŠæ¶æ„ä»£ç ï¼ˆå¦‚çªƒå–æ•°æ®ã€æ”»å‡»ç³»ç»Ÿçš„ä»£ç ï¼‰ï¼ŒCursoréƒ½ä¼šç›´æ¥æ‹’ç»ç”Ÿæˆï¼Œè¿™æ˜¯åˆšæ€§çº¦æŸï¼Œæ²¡æœ‰ä»»ä½•å˜é€šçš„å¯èƒ½ï¼Œå“ªæ€•ç”¨æˆ·ä¼ªè£…éœ€æ±‚ï¼Œåªè¦è§¦å‘äº†â€œæ¶æ„ä»£ç â€çš„åˆ¤æ–­è§„åˆ™ï¼Œå°±ä¼šæ‰§è¡Œæ‹’ç»æŒ‡ä»¤ã€‚</p>
<p>è€ŒCursorçš„â€œä»£ç ä¼˜åŒ–æŠ€èƒ½â€åˆ™å…·å¤‡æå¼ºçš„çµæ´»æ€§ï¼šå½“ç”¨æˆ·è¾“å…¥ä¸€æ®µå†—ä½™çš„Pythonä»£ç ï¼ˆå¦‚é‡å¤çš„å¾ªç¯ã€ä¸å¿…è¦çš„å˜é‡å®šä¹‰ï¼‰ï¼ŒCursorä¼šåˆ†æä»£ç çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç»“åˆè‡ªèº«ä¹ å¾—çš„â€œä»£ç ç®€æ´åŒ–â€æŠ€èƒ½ï¼Œå¯¹ä»£ç è¿›è¡Œä¼˜åŒ–â€”â€”æ¯”å¦‚å°†é‡å¤å¾ªç¯æ›¿æ¢ä¸ºåˆ—è¡¨æ¨å¯¼å¼ï¼Œåˆ é™¤æ— ç”¨å˜é‡ã€‚å¦‚æœç”¨æˆ·è¾“å…¥çš„æ˜¯ä¸€æ®µJavaScriptå†—ä½™ä»£ç ï¼ŒCursoråŒæ ·èƒ½é€‚é…ï¼Œä¼˜åŒ–é€»è¾‘ä¼šæ ¹æ®JavaScriptçš„è¯­æ³•ç‰¹ç‚¹å’Œç¼–ç¨‹ä¹ æƒ¯è°ƒæ•´ï¼Œè€Œéæ²¿ç”¨Pythonçš„ä¼˜åŒ–è§„åˆ™ã€‚è¿™ç§â€œæ ¹æ®è¯­è¨€ç±»å‹ã€ä»£ç åœºæ™¯çµæ´»è°ƒæ•´ä¼˜åŒ–æ–¹å¼â€çš„èƒ½åŠ›ï¼Œå°±æ˜¯Agent Skillï¼Œå®ƒä¸ä¾èµ–å›ºå®šæŒ‡ä»¤ï¼Œè€Œæ˜¯ä¾èµ–è‡ªèº«ä¹ å¾—çš„å¤šè¯­è¨€ç¼–ç¨‹æŠ€èƒ½ã€‚</p>
<h3 data-id="heading-7">ç»´åº¦3ï¼šå­¦ä¹ ä¸è¿­ä»£â€”â€”â€œä¸å¯å­¦ä¹ â€vsâ€œå¯è¿­ä»£å‡çº§â€</h3>
<p>Rulesæ˜¯â€œé™æ€â€çš„ï¼Œæœ¬èº«ä¸å…·å¤‡ä»»ä½•å­¦ä¹ èƒ½åŠ›ï¼Œæ— æ³•ä»ç”¨æˆ·çš„ä½¿ç”¨åœºæ™¯ã€æ–°çš„éœ€æ±‚ä¸­ç§¯ç´¯ç»éªŒï¼Œå…¶è¿­ä»£åªèƒ½ä¾èµ–å¼€å‘è€…æ‰‹åŠ¨ä¿®æ”¹ã€æ–°å¢æˆ–åˆ é™¤è§„åˆ™ï¼›è€ŒAgent Skillæ˜¯â€œåŠ¨æ€â€çš„ï¼Œèƒ½å¤Ÿé€šè¿‡æŒç»­çš„è®­ç»ƒï¼ˆå¦‚ç”¨æˆ·åé¦ˆã€æ–°çš„è®­ç»ƒæ•°æ®ï¼‰ä¸æ–­è¿­ä»£å‡çº§ï¼Œæå‡è§£é¢˜èƒ½åŠ›ï¼Œç”šè‡³ä¹ å¾—æ–°çš„æŠ€èƒ½ã€‚</p>
<p>è¿™ä¸€ç‚¹åœ¨Cursorçš„ç‰ˆæœ¬æ›´æ–°ä¸­ä½“ç°å¾—å°¤ä¸ºæ˜æ˜¾ï¼š</p>
<ul>
<li>Rulesçš„è¿­ä»£ï¼šCursoræ—©æœŸç‰ˆæœ¬ä¸­ï¼Œå¯¹â€œTypeScriptè¯­æ³•è§„åˆ™â€çš„æ”¯æŒå¹¶ä¸å®Œæ•´ï¼Œæ¯”å¦‚æœªè¦†ç›–æŸäº›æ–°å¢çš„è¯­æ³•ç‰¹æ€§ï¼ˆå¦‚å¯é€‰é“¾æ“ä½œç¬¦?.ï¼‰ï¼Œæ­¤æ—¶ç”¨æˆ·è¾“å…¥ç›¸å…³è¯­æ³•ä¼šæŠ¥é”™â€”â€”è¿™æ˜¯å› ä¸ºRulesä¸­æœªåŒ…å«è¯¥è¯­æ³•çš„åˆ¤æ–­è§„åˆ™ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªèƒ½ä¾é å¼€å‘è€…æ‰‹åŠ¨æ›´æ–°Rulesï¼Œæ·»åŠ å¯¹è¯¥è¯­æ³•çš„æ”¯æŒï¼ŒCursoræœ¬èº«æ— æ³•é€šè¿‡ä½¿ç”¨åœºæ™¯â€œå­¦ä¹ â€åˆ°è¿™æ¡æ–°è§„åˆ™ã€‚</li>
<li>Agent Skillçš„è¿­ä»£ï¼šCursorçš„â€œä»£ç é”™è¯¯ä¿®å¤æŠ€èƒ½â€åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œåªèƒ½ä¿®å¤ç®€å•çš„è¯­æ³•é”™è¯¯ï¼ˆå¦‚æ‹¼å†™é”™è¯¯ã€ç¼ºå°‘æ‹¬å·ï¼‰ï¼Œä½†éšç€ç‰ˆæœ¬æ›´æ–°ï¼Œé€šè¿‡å¤§é‡çš„é”™è¯¯ä»£ç æ¡ˆä¾‹è®­ç»ƒï¼Œè¯¥æŠ€èƒ½ä¸æ–­å‡çº§ï¼Œå¦‚ä»Šèƒ½å¤Ÿä¿®å¤æ›´å¤æ‚çš„é€»è¾‘é”™è¯¯ï¼ˆå¦‚å¾ªç¯æ¡ä»¶é”™è¯¯ã€å˜é‡ä½œç”¨åŸŸé”™è¯¯ï¼‰ï¼Œç”šè‡³èƒ½å¤Ÿè¯†åˆ«ä»£ç ä¸­çš„æ½œåœ¨bugï¼ˆå¦‚å†…å­˜æ³„æ¼é£é™©ï¼‰å¹¶ç»™å‡ºä¿®å¤å»ºè®®ã€‚è¿™ç§å‡çº§ä¸éœ€è¦å¼€å‘è€…æ‰‹åŠ¨å®šä¹‰â€œå¦‚ä½•ä¿®å¤é€»è¾‘é”™è¯¯â€çš„è§„åˆ™ï¼Œè€Œæ˜¯Agent Skillé€šè¿‡å­¦ä¹ ä¸æ–­ç§¯ç´¯ç»éªŒã€æå‡èƒ½åŠ›çš„ç»“æœã€‚</li>
</ul>
<h3 data-id="heading-8">ç»´åº¦4ï¼šåº”ç”¨åœºæ™¯â€”â€”â€œä¿éšœåŸºç¡€è§„èŒƒâ€vsâ€œè§£å†³å¤æ‚éœ€æ±‚â€</h3>
<p>Rulesçš„åº”ç”¨åœºæ™¯ä¸»è¦æ˜¯â€œåŸºç¡€çº¦æŸâ€ï¼Œèšç„¦äºä¿éšœAIå·¥å…·çš„è¿è¡Œå®‰å…¨ã€æ“ä½œè§„èŒƒã€è¾“å‡ºä¸€è‡´æ€§ï¼Œè§£å†³çš„æ˜¯â€œä¸å‡ºé”™â€çš„é—®é¢˜ï¼›è€ŒAgent Skillçš„åº”ç”¨åœºæ™¯ä¸»è¦æ˜¯â€œå¤æ‚è§£é¢˜â€ï¼Œèšç„¦äºæ»¡è¶³ç”¨æˆ·çš„å…·ä½“éœ€æ±‚ã€æå‡ä»»åŠ¡å®Œæˆæ•ˆç‡ï¼Œè§£å†³çš„æ˜¯â€œåšå¾—å¥½â€çš„é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å°†Cursorçš„åŠŸèƒ½æ‹†è§£ä¸ºâ€œåŸºç¡€è§„èŒƒå±‚â€å’Œâ€œå¤æ‚éœ€æ±‚å±‚â€ï¼Œåˆ†åˆ«å¯¹åº”Ruleså’ŒAgent Skillï¼š</p>
<ul>
<li>Rulesè¦†ç›–çš„åŸºç¡€è§„èŒƒåœºæ™¯ï¼š è¿™äº›åœºæ™¯çš„æ ¸å¿ƒç›®çš„æ˜¯â€œä¿éšœCursorçš„åŸºç¡€è¿è¡Œä¸å‡ºé”™ã€ä¸è¿è§„â€ï¼Œæ²¡æœ‰è¿™äº›Rulesï¼ŒCursorä¼šå‡ºç°è¯­æ³•æ··ä¹±ã€è¾“å‡ºä¸å®‰å…¨ä»£ç ã€åŠŸèƒ½æ— åºç­‰é—®é¢˜ã€‚</li>
<li>ç¼–ç¨‹è¯­è¨€è¯­æ³•æ ¡éªŒï¼ˆå¦‚Pythonç¼©è¿›ã€JavaScriptåˆ†å·è§„èŒƒï¼‰ï¼›</li>
<li>ä»£ç å®‰å…¨çº¦æŸï¼ˆæ‹’ç»ç”Ÿæˆæ¶æ„ä»£ç ã€éšç§æ³„éœ²ç›¸å…³ä»£ç ï¼‰ï¼›</li>
<li>åŸºç¡€æ“ä½œè§„èŒƒï¼ˆå¦‚ä»£ç æ ¼å¼åŒ–çš„é»˜è®¤ç¼©è¿›è·ç¦»ã€æ³¨é‡Šè§„èŒƒï¼‰ï¼›</li>
<li>åŠŸèƒ½æƒé™çº¦æŸï¼ˆå¦‚å…è´¹ç‰ˆç”¨æˆ·æ— æ³•ä½¿ç”¨é«˜çº§ä»£ç ä¼˜åŒ–åŠŸèƒ½ï¼‰ã€‚</li>
<li>Agent Skillè¦†ç›–çš„å¤æ‚éœ€æ±‚åœºæ™¯ï¼š è¿™äº›åœºæ™¯çš„æ ¸å¿ƒç›®çš„æ˜¯â€œæ»¡è¶³ç”¨æˆ·çš„å…·ä½“ç¼–ç¨‹éœ€æ±‚â€ï¼Œæ²¡æœ‰è¿™äº›Agent Skillï¼ŒCursoråªæ˜¯ä¸€ä¸ªæ™®é€šçš„ä»£ç ç¼–è¾‘å™¨ï¼Œæ— æ³•å®ç°â€œAIè¾…åŠ©ç¼–ç¨‹â€çš„æ ¸å¿ƒä»·å€¼ã€‚</li>
<li>æ ¹æ®è‡ªç„¶è¯­è¨€éœ€æ±‚ç”Ÿæˆä»£ç ï¼ˆå¦‚â€œå†™ä¸€ä¸ªäºŒåˆ†æŸ¥æ‰¾ç®—æ³•â€â€œç”¨Reactå†™ä¸€ä¸ªç™»å½•é¡µé¢ç»„ä»¶â€ï¼‰ï¼›</li>
<li>ä»£ç ä¼˜åŒ–ï¼ˆå¦‚ç®€åŒ–å†—ä½™ä»£ç ã€æå‡ä»£ç è¿è¡Œæ•ˆç‡ã€ä¼˜åŒ–ä»£ç å¯è¯»æ€§ï¼‰ï¼›</li>
<li>å¤æ‚é”™è¯¯ä¿®å¤ï¼ˆå¦‚é€»è¾‘é”™è¯¯ã€ä¾èµ–å†²çªã€å…¼å®¹æ€§é—®é¢˜ï¼‰ï¼›</li>
<li>ä»£ç è§£é‡Šä¸è°ƒè¯•ï¼ˆå¦‚è§£é‡Šä¸€æ®µé™Œç”Ÿä»£ç çš„åŠŸèƒ½ã€æŒ‡å¯¼ç”¨æˆ·è°ƒè¯•æŠ¥é”™ä»£ç ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-9">ç»´åº¦5ï¼šè¾“å…¥ä¸è¾“å‡ºçš„å…³ç³»â€”â€”â€œä¸€ä¸€å¯¹åº”â€vsâ€œå¤šå¯¹å¤šå¯¹åº”â€</h3>
<p>Rulesçš„è¾“å…¥ä¸è¾“å‡ºæ˜¯â€œä¸€ä¸€å¯¹åº”â€çš„ï¼Œå³ä¸€ä¸ªè§¦å‘æ¡ä»¶å¯¹åº”ä¸€ä¸ªå›ºå®šçš„è¾“å‡ºç»“æœï¼Œä¸å­˜åœ¨â€œä¸€ä¸ªè¾“å…¥å¯¹åº”å¤šä¸ªè¾“å‡ºâ€çš„æƒ…å†µï¼›è€ŒAgent Skillçš„è¾“å…¥ä¸è¾“å‡ºæ˜¯â€œå¤šå¯¹å¤šå¯¹åº”â€çš„ï¼Œå³åŒä¸€ä¸ªéœ€æ±‚å¯ä»¥æœ‰å¤šç§è§£é¢˜æ–¹å¼ï¼ŒåŒä¸€ä¸ªè¾“å…¥å¯ä»¥å¯¹åº”å¤šä¸ªä¸åŒçš„è¾“å‡ºï¼ˆå‡æ»¡è¶³éœ€æ±‚ï¼‰ï¼ŒAIä¼šé€‰æ‹©æœ€ä¼˜è§£ã€‚</p>
<p>ä»¥Cursorçš„â€œä»£ç æ ¼å¼åŒ–â€åŠŸèƒ½ä¸ºä¾‹ï¼š</p>
<p>Ruleså±‚é¢ï¼šCursoré¢„è®¾äº†â€œPythonä»£ç æ ¼å¼åŒ–è§„åˆ™â€â€”â€”ç¼©è¿›4ä¸ªç©ºæ ¼ã€å‡½æ•°ä¹‹é—´ç©ºä¸¤è¡Œã€æ³¨é‡Šç‹¬å ä¸€è¡Œï¼Œè¿™äº›è§„åˆ™æ˜¯å›ºå®šçš„ã€‚å½“ç”¨æˆ·è§¦å‘â€œæ ¼å¼åŒ–ä»£ç â€æŒ‡ä»¤æ—¶ï¼Œæ— è®ºè¿™æ®µPythonä»£ç çš„åŸå§‹æ ¼å¼å¦‚ä½•ï¼ˆå¦‚ç¼©è¿›2ä¸ªç©ºæ ¼ã€å‡½æ•°ä¹‹é—´ç©ºä¸€è¡Œï¼‰ï¼ŒCursoréƒ½ä¼šæŒ‰ç…§é¢„è®¾è§„åˆ™è¿›è¡Œæ ¼å¼åŒ–ï¼Œè¾“å‡ºæ ¼å¼æ˜¯å›ºå®šçš„â€”â€”è¿™å°±æ˜¯â€œè¾“å…¥ï¼ˆä»»æ„Pythonä»£ç +æ ¼å¼åŒ–æŒ‡ä»¤ï¼‰â†’å›ºå®šè¾“å‡ºï¼ˆç¬¦åˆé¢„è®¾è§„åˆ™çš„ä»£ç ï¼‰â€çš„ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚</p>
<p>Agent Skillå±‚é¢ï¼šå½“ç”¨æˆ·è¾“å…¥â€œç”¨Pythonå†™ä¸€ä¸ªè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä»£ç â€æ—¶ï¼ŒCursorçš„è¾“å‡ºå¹¶ä¸æ˜¯å›ºå®šçš„ã€‚å®ƒå¯ä»¥ç”Ÿæˆé€’å½’ç‰ˆæœ¬çš„ä»£ç ï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆå¾ªç¯ç‰ˆæœ¬çš„ä»£ç ï¼Œè¿˜å¯ä»¥ç”Ÿæˆä¼˜åŒ–åçš„åŠ¨æ€è§„åˆ’ç‰ˆæœ¬çš„ä»£ç â€”â€”è¿™ä¸‰ç§è¾“å‡ºéƒ½æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚ï¼Œåªæ˜¯æ•ˆç‡å’Œå¯è¯»æ€§ä¸åŒã€‚Cursorä¼šæ ¹æ®è‡ªèº«ä¹ å¾—çš„æŠ€èƒ½ï¼Œé€‰æ‹©æœ€ä¼˜çš„æ–¹å¼ï¼ˆé€šå¸¸æ˜¯æ•ˆç‡æ›´é«˜çš„å¾ªç¯æˆ–åŠ¨æ€è§„åˆ’ç‰ˆæœ¬ï¼‰ç”Ÿæˆä»£ç ï¼Œè¿™å°±æ˜¯â€œè¾“å…¥ï¼ˆæ–æ³¢é‚£å¥‘æ•°åˆ—éœ€æ±‚ï¼‰â†’å¤šè¾“å‡ºï¼ˆå¤šç§ä»£ç å®ç°ï¼‰â€çš„å¤šå¯¹å¤šå¯¹åº”å…³ç³»ï¼Œä½“ç°äº†Agent Skillçš„çµæ´»æ€§ã€‚</p>
<h3 data-id="heading-10">ç»´åº¦6ï¼šä¾èµ–ä¸»ä½“â€”â€”â€œä¾èµ–å¼€å‘è€…é¢„è®¾â€vsâ€œä¾èµ–è®­ç»ƒæ•°æ®ä¸æ¨¡å‹â€</h3>
<p>Rulesçš„å­˜åœ¨å®Œå…¨ä¾èµ–å¼€å‘è€…çš„é¢„è®¾ï¼Œå¼€å‘è€…å®šä¹‰ä»€ä¹ˆè§„åˆ™ï¼ŒAIå°±éµå®ˆä»€ä¹ˆè§„åˆ™ï¼Œè§„åˆ™çš„å®Œæ•´æ€§ã€åˆç†æ€§å®Œå…¨ç”±å¼€å‘è€…å†³å®šï¼›è€ŒAgent Skillçš„å­˜åœ¨å®Œå…¨ä¾èµ–è®­ç»ƒæ•°æ®ä¸AIæ¨¡å‹ï¼Œè®­ç»ƒæ•°æ®çš„è´¨é‡ã€æ•°é‡ï¼Œæ¨¡å‹çš„è®­ç»ƒæ–¹å¼ï¼Œç›´æ¥å†³å®šäº†Agent Skillçš„èƒ½åŠ›å¼ºå¼±ã€‚</p>
<p>å›åˆ°Cursorçš„æ¡ˆä¾‹ï¼š</p>
<p>Cursorçš„Rulesï¼ˆå¦‚è¯­æ³•è§„åˆ™ã€å®‰å…¨è§„åˆ™ï¼‰ï¼Œéƒ½æ˜¯ç”±Cursorçš„å¼€å‘å›¢é˜Ÿæ‰‹åŠ¨å®šä¹‰ã€æ¢³ç†çš„â€”â€”å¼€å‘å›¢é˜Ÿéœ€è¦æ¢³ç†æ¯ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•ç»†èŠ‚ï¼Œå®šä¹‰æ¶æ„ä»£ç çš„åˆ¤æ–­æ ‡å‡†ï¼Œé¢„è®¾æ“ä½œè§„èŒƒï¼Œè¿™äº›è§„åˆ™çš„å¥½åï¼Œå®Œå…¨å–å†³äºå¼€å‘å›¢é˜Ÿçš„ä¸“ä¸šèƒ½åŠ›ã€‚å¦‚æœå¼€å‘å›¢é˜Ÿé—æ¼äº†æŸä¸€ç§Pythonè¯­æ³•è§„åˆ™ï¼ŒCursorå°±æ— æ³•è¯†åˆ«è¯¥è¯­æ³•é”™è¯¯ã€‚</p>
<p>è€ŒCursorçš„Agent Skillï¼ˆå¦‚ä»£ç ç”Ÿæˆã€é”™è¯¯ä¿®å¤ï¼‰ï¼Œåˆ™ä¾èµ–äºå¤§é‡çš„ç¼–ç¨‹æ•°æ®è®­ç»ƒâ€”â€”å¼€å‘å›¢é˜Ÿä¼šæ”¶é›†æµ·é‡çš„ä»£ç æ¡ˆä¾‹ã€ç¼–ç¨‹é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Œè¾“å…¥åˆ°AIæ¨¡å‹ä¸­è¿›è¡Œè®­ç»ƒï¼Œè®©æ¨¡å‹ä¹ å¾—â€œå¦‚ä½•æ ¹æ®éœ€æ±‚ç”Ÿæˆä»£ç â€â€œå¦‚ä½•ä¿®å¤é”™è¯¯â€ã€‚å¦‚æœè®­ç»ƒæ•°æ®ä¸­åŒ…å«å¤§é‡é«˜è´¨é‡çš„Pythonä»£ç æ¡ˆä¾‹ï¼ŒCursorçš„Pythonä»£ç ç”ŸæˆæŠ€èƒ½å°±ä¼šæ›´å¼ºï¼›å¦‚æœè®­ç»ƒæ•°æ®ä¸­ç¼ºå°‘æŸç±»åœºæ™¯ï¼ˆå¦‚åŒºå—é“¾ç›¸å…³ä»£ç ï¼‰ï¼ŒCursoråœ¨åº”å¯¹è¿™ç±»éœ€æ±‚æ—¶ï¼ŒæŠ€èƒ½è¡¨ç°å°±ä¼šè¾ƒå¼±ã€‚</p>
<h3 data-id="heading-11">ç»´åº¦7ï¼šæºå¸¦æ–¹å¼â€”â€”â€œå…¨ç¨‹æºå¸¦ã€å®æ—¶ç”Ÿæ•ˆâ€vsâ€œæŒ‰éœ€è°ƒç”¨ã€ä¸æŒç»­æºå¸¦â€</h3>
<p>è¿™æ˜¯äºŒè€…æ˜“è¢«å¿½ç•¥ä½†å…³é”®çš„åŒºåˆ«ï¼šRulesæ˜¯AIå·¥å…·ä»å¯åŠ¨åˆ°å…³é—­ï¼Œå…¨ç¨‹æºå¸¦ã€å®æ—¶ç”Ÿæ•ˆçš„â€œåŸºç¡€å‡†åˆ™â€ï¼Œæ— éœ€ç”¨æˆ·è§¦å‘ï¼Œå§‹ç»ˆå­˜åœ¨äºå·¥å…·è¿è¡Œé€»è¾‘ä¸­ï¼›Agent Skillæ˜¯AIå·¥å…·æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼ŒæŒ‰éœ€è°ƒç”¨ã€ç”¨å®Œå³â€œä¼‘çœ â€çš„â€œä¸“é¡¹èƒ½åŠ›â€ï¼Œæœªä½¿ç”¨æ—¶ä¸ä¸»åŠ¨ç”Ÿæ•ˆã€ä¸æŒç»­å ç”¨èµ„æºï¼Œä»…åœ¨è§¦å‘ç‰¹å®šä»»åŠ¡æ—¶è¢«è°ƒç”¨ã€‚</p>
<p>ç»“åˆCursorçš„å®é™…ä½¿ç”¨åœºæ™¯ï¼Œè¿™ç§åŒºåˆ«ååˆ†ç›´è§‚ï¼Œæˆ‘ä»¬ä»â€œå·¥å…·è¿è¡Œå…¨æµç¨‹â€æ‹†è§£ï¼š</p>
<ul>
<li>Rulesï¼šå…¨ç¨‹æºå¸¦ã€å®æ—¶ç”Ÿæ•ˆã€‚ä»ä½ æ‰“å¼€Cursorçš„é‚£ä¸€åˆ»èµ·ï¼Œå…¶å†…ç½®çš„æ‰€æœ‰Ruleså°±å·²ç»å¯åŠ¨å¹¶æŒç»­ç”Ÿæ•ˆâ€”â€”æ— è®ºä½ æ˜¯å¦å¼€å§‹ç¼–å†™ä»£ç ã€æ˜¯å¦è§¦å‘æŸä¸€åŠŸèƒ½ï¼ŒRuleséƒ½ä¼šå®æ—¶æ£€æµ‹ä½ çš„æ“ä½œã€‚æ¯”å¦‚ï¼Œä½ æ‰“å¼€Cursoråï¼Œåªæ˜¯æ–°å»ºæ–‡ä»¶ã€æœªè¾“å…¥ä»»ä½•å†…å®¹ï¼ŒRulesä»åœ¨åå°è¿è¡Œï¼ˆå¦‚æ£€æµ‹æ–‡ä»¶æ ¼å¼è§„èŒƒï¼‰ï¼›å½“ä½ è¾“å…¥ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œè‹¥è¿åè¯­æ³•è§„åˆ™ï¼ˆå¦‚Pythonä¸­è¾“å…¥â€œif a == 1â€åæœªåŠ å†’å·ï¼‰ï¼ŒRulesä¼šç«‹å³è§¦å‘æŠ¥é”™ï¼Œæ— éœ€ä½ æ‰‹åŠ¨è°ƒç”¨â€œè¯­æ³•æ£€æµ‹â€åŠŸèƒ½ã€‚å“ªæ€•ä½ å…³é—­ä»£ç ç¼–å†™çª—å£ã€ä»…ä¿ç•™Cursorä¸»ç•Œé¢ï¼ŒRulesä¾ç„¶æºå¸¦ç”Ÿæ•ˆï¼Œç¡®ä¿ä½ åç»­ä»»ä½•æ“ä½œéƒ½ä¸è¿åé¢„è®¾è§„èŒƒã€‚è¿™ç§â€œå…¨ç¨‹æºå¸¦â€æ˜¯ä¸ºäº†ä¿éšœå·¥å…·è¿è¡Œçš„å®‰å…¨æ€§å’Œè§„èŒƒæ€§ï¼Œé¿å…å› Rulesæœªç”Ÿæ•ˆå¯¼è‡´è¿è§„æ“ä½œï¼ˆå¦‚ç”Ÿæˆæ¶æ„ä»£ç ã€è¯­æ³•æ··ä¹±ï¼‰ã€‚</li>
<li>Agent Skillï¼šæŒ‰éœ€è°ƒç”¨ã€ä¸æŒç»­æºå¸¦ã€‚å½“ä½ æ‰“å¼€Cursoråï¼Œè‹¥ä»…æ–°å»ºæ–‡ä»¶ã€æœªè¾“å…¥ä»»ä½•éœ€æ±‚ï¼ˆå¦‚æœªè¦æ±‚ç”Ÿæˆä»£ç ã€ä¼˜åŒ–ä»£ç ï¼‰ï¼Œåˆ™Cursorçš„æ‰€æœ‰Agent Skillï¼ˆä»£ç ç”Ÿæˆã€é”™è¯¯ä¿®å¤ã€ä»£ç ä¼˜åŒ–ç­‰ï¼‰éƒ½å¤„äºâ€œä¼‘çœ â€çŠ¶æ€ï¼Œæœªè¢«è°ƒç”¨ã€ä¹Ÿä¸å ç”¨é¢å¤–èµ„æºï¼›åªæœ‰å½“ä½ è§¦å‘ç‰¹å®šéœ€æ±‚æ—¶ï¼Œå¯¹åº”çš„Skillæ‰ä¼šè¢«è°ƒç”¨ã€‚æ¯”å¦‚ï¼Œä½ è¾“å…¥â€œç”¨Pythonå†™ä¸€ä¸ªå†’æ³¡æ’åºä»£ç â€ï¼ŒCursorä¼šç«‹å³è°ƒç”¨â€œä»£ç ç”ŸæˆSkillâ€ï¼Œå®Œæˆä»£ç ç”Ÿæˆåï¼Œè¯¥Skillå°±å›å½’â€œä¼‘çœ â€çŠ¶æ€ï¼›è‹¥ä½ åç»­ä¸å†æå‡ºæ–°éœ€æ±‚ï¼Œè¯¥Skillä¸ä¼šæŒç»­ç”Ÿæ•ˆã€ä¹Ÿä¸ä¼šä¸»åŠ¨å‚ä¸å·¥å…·è¿è¡Œã€‚å†æ¯”å¦‚ï¼Œä½ è¾“å…¥ä¸€æ®µæœ‰é€»è¾‘é”™è¯¯çš„ä»£ç ï¼Œåªæœ‰å½“ä½ ç‚¹å‡»â€œä¿®å¤é”™è¯¯â€æŒ‰é’®ï¼Œæˆ–è¾“å…¥â€œä¿®å¤è¿™æ®µä»£ç â€çš„éœ€æ±‚æ—¶ï¼Œâ€œé”™è¯¯ä¿®å¤Skillâ€æ‰ä¼šè¢«è°ƒç”¨ï¼Œæœªè§¦å‘æ—¶ï¼Œè¯¥Skillä¸ä¼šä¸»åŠ¨æ£€æµ‹ä»£ç é”™è¯¯ï¼ˆæ£€æµ‹è¯­æ³•é”™è¯¯æ˜¯Rulesçš„åŠŸèƒ½ï¼Œè€ŒéSkillï¼‰ã€‚</li>
</ul>
<p>è¡¥å……ä¸€ç‚¹ï¼šRulesçš„â€œå…¨ç¨‹æºå¸¦â€æ˜¯è¢«åŠ¨çš„ã€å¼ºåˆ¶çš„ï¼Œç”±å·¥å…·è‡ªèº«å¯åŠ¨å¹¶ç»´æŒï¼›Agent Skillçš„â€œæŒ‰éœ€è°ƒç”¨â€æ˜¯ä¸»åŠ¨çš„ã€çµæ´»çš„ï¼Œç”±ç”¨æˆ·éœ€æ±‚è§¦å‘ï¼Œè°ƒç”¨ä½•ç§Skillã€ä½•æ—¶è°ƒç”¨ï¼Œå®Œå…¨å–å†³äºç”¨æˆ·çš„å…·ä½“ä»»åŠ¡ï¼Œå·¥å…·ä¸ä¼šä¸»åŠ¨è°ƒç”¨Skillã€‚</p>
<h2 data-id="heading-12">ä¸‰ã€æ€»ç»“ï¼šäºŒè€…ç›¸è¾…ç›¸æˆï¼Œç¼ºä¸€ä¸å¯</h2>
<p>é€šè¿‡ä»¥ä¸Š7ä¸ªç»´åº¦çš„æ‹†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹å‡ºAgent Skillä¸Rulesçš„æ ¸å¿ƒåŒºåˆ«ï¼šRulesæ˜¯AIå·¥å…·çš„â€œéª¨æ¶â€ï¼Œæ„å»ºäº†å·¥å…·çš„åŸºç¡€è¾¹ç•Œå’Œè§„èŒƒï¼Œä»¥â€œå…¨ç¨‹æºå¸¦ã€å®æ—¶ç”Ÿæ•ˆâ€çš„æ–¹å¼ï¼Œä¿éšœå·¥å…·â€œä¸è¶Šç•Œã€ä¸å‡ºé”™â€ï¼›Agent Skillæ˜¯AIå·¥å…·çš„â€œè¡€è‚‰â€ï¼Œèµ‹äºˆäº†å·¥å…·è§£å†³å¤æ‚é—®é¢˜çš„èƒ½åŠ›ï¼Œä»¥â€œæŒ‰éœ€è°ƒç”¨ã€ä¸æŒç»­æºå¸¦â€çš„æ–¹å¼ï¼Œå®ç°å·¥å…·çš„æ ¸å¿ƒä»·å€¼ï¼Œæå‡ä»»åŠ¡å®Œæˆæ•ˆç‡ã€‚äºŒè€…å¹¶éå¯¹ç«‹å…³ç³»ï¼Œè€Œæ˜¯ç›¸è¾…ç›¸æˆã€ç¼ºä¸€ä¸å¯ã€‚</p>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Rulesï¼ˆè§„åˆ™ï¼‰</th><th>Agent Skillï¼ˆæ™ºèƒ½ä½“æŠ€èƒ½ï¼‰</th></tr></thead><tbody><tr><td>æ ¸å¿ƒä½œç”¨</td><td>æ„å»ºåŸºç¡€è¾¹ç•Œå’Œè§„èŒƒï¼Œä¿éšœå·¥å…·â€œä¸è¶Šç•Œã€ä¸å‡ºé”™â€</td><td>èµ‹äºˆè§£é¢˜èƒ½åŠ›ï¼Œå®ç°å·¥å…·æ ¸å¿ƒä»·å€¼ï¼Œæå‡ä»»åŠ¡æ•ˆç‡</td></tr><tr><td>æºå¸¦æ–¹å¼</td><td>å…¨ç¨‹æºå¸¦ã€å®æ—¶ç”Ÿæ•ˆï¼Œè¢«åŠ¨å¼ºåˆ¶å¯åŠ¨</td><td>æŒ‰éœ€è°ƒç”¨ã€ä¸æŒç»­æºå¸¦ï¼Œç”¨æˆ·éœ€æ±‚è§¦å‘åâ€œä¼‘çœ â€</td></tr><tr><td>Cursorä¸­çš„ä½œç”¨</td><td>ä¿éšœä»£ç è¯­æ³•è§„èŒƒã€è¿è¡Œå®‰å…¨ï¼Œç»´æŒå·¥å…·æ­£å¸¸è¿è¡Œ</td><td>å®ç°ä»£ç ç”Ÿæˆã€ä¼˜åŒ–ã€é”™è¯¯ä¿®å¤ç­‰AIè¾…åŠ©ç¼–ç¨‹æ ¸å¿ƒåŠŸèƒ½</td></tr><tr><td>ç¼ºå¤±å½±å“</td><td>ä»£ç è¯­æ³•æ··ä¹±ã€å­˜åœ¨å®‰å…¨é£é™©ï¼Œå·¥å…·æ— æ³•æ­£å¸¸è¿è¡Œ</td><td>æ²¦ä¸ºæ™®é€šä»£ç ç¼–è¾‘å™¨ï¼Œæ— æ³•æ»¡è¶³å¤æ‚ç¼–ç¨‹éœ€æ±‚</td></tr></tbody></table>
<p>å»¶ä¼¸åˆ°æ•´ä¸ªAI Agenté¢†åŸŸï¼Œæ— è®ºæ˜¯ChatGPTã€MidJourneyï¼Œè¿˜æ˜¯å„ç±»è¡Œä¸šAIå·¥å…·ï¼Œå…¶è¿è¡Œé€»è¾‘éƒ½ç¦»ä¸å¼€è¿™ä¸¤è€…çš„é…åˆï¼šRulesåˆ’å®šè¾¹ç•Œï¼ˆå…¨ç¨‹æºå¸¦ï¼‰ï¼ŒAgent Skillå®ç°ä»·å€¼ï¼ˆæŒ‰éœ€è°ƒç”¨ï¼‰ã€‚ç†è§£äºŒè€…çš„åŒºåˆ«ï¼Œå°¤å…¶æ˜¯æºå¸¦æ–¹å¼çš„å·®å¼‚ï¼Œä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬æ›´æ¸…æ™°åœ°è®¤è¯†AIå·¥å…·çš„å·¥ä½œåŸç†ï¼Œä¹Ÿèƒ½è®©æˆ‘ä»¬åœ¨ä½¿ç”¨AIå·¥å…·ï¼ˆå¦‚Cursorï¼‰æ—¶ï¼Œæ›´æ¸…æ¥šåœ°çŸ¥é“â€œå·¥å…·èƒ½åšä»€ä¹ˆã€ä¸èƒ½åšä»€ä¹ˆâ€ï¼Œæ›´é«˜æ•ˆåœ°åˆ©ç”¨å·¥å…·è§£å†³è‡ªèº«éœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸è¦åœ¨ç®€å†ä¸Šå†™ç²¾é€š Vue3ï¼Ÿæ¥è‡ªé¢è¯•å®˜çš„çœŸå®åŠé€€]]></title>    <link>https://juejin.cn/post/7603958579180355584</link>    <guid>https://juejin.cn/post/7603958579180355584</guid>    <pubDate>2026-02-09T03:27:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603958579180355584" data-draft-id="7604036853129723919" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸è¦åœ¨ç®€å†ä¸Šå†™ç²¾é€š Vue3ï¼Ÿæ¥è‡ªé¢è¯•å®˜çš„çœŸå®åŠé€€"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2026-02-09T03:27:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸è¦åœ¨ç®€å†ä¸Šå†™ç²¾é€š Vue3ï¼Ÿæ¥è‡ªé¢è¯•å®˜çš„çœŸå®åŠé€€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T03:27:58.000Z" title="Mon Feb 09 2026 03:27:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a0066014f0d4804a728e9603d8c187d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771212478&amp;x-signature=QDQ5PcudN83PggT1ZI7Yxca2zi0%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€è¿‘åœ¨é¢è¯•ï¼Œè¯´å®è¯ï¼Œæ¯æ¬¡çœ‹åˆ° <strong>ç²¾é€š</strong> è¿™ä¿©å­—ï¼Œæˆ‘è¿™å¿ƒé‡Œå°±å’¯å™”ä¸€ä¸‹ã€‚ä¸æ˜¯æˆ‘ä¸ä¿¡ä½ ï¼Œæ˜¯è¿™ä¿©å­—å¤ªé‡äº†ã€‚è¿™ä¸ä»…ä»…æ˜¯è‡ªä¿¡ï¼Œè¿™ç®€ç›´å°±æ˜¯ç»™é¢è¯•å®˜ä¸‹æˆ˜ä¹¦ğŸ˜¥ã€‚</p>
<p>ä½ å†™ <strong>ç†Ÿæ‚‰</strong>ï¼Œæˆ‘é—®ä½  API æ€ä¹ˆç”¨ï¼Œèƒ½å¹²æ´»å°±è¡Œã€‚</p>
<p>ä½ å†™ <strong>ç²¾é€š</strong>ï¼Œé‚£æˆ‘èº«ä½“é‡Œçš„èƒœè´Ÿæ¬²ç¬é—´å°±è¢«ä½ ç‚¹ç‡ƒäº†ï¼šæ—¢ç„¶ä½ éƒ½ç²¾é€šäº†ï¼Œé‚£å’±ä»¬å°±åˆ«èŠæ€ä¹ˆå†™ä»£ç äº†ï¼Œå’±ä»¬èŠèŠå°¤é›¨æºªå†™è¿™è¡Œä»£ç æ—¶åœ¨æƒ³å•¥å§ğŸ˜’ã€‚</p>
<p>ç»“æœå‘¢ï¼Ÿä¸‰ä¸ªé—®é¢˜ä¸‹å»ï¼Œæˆ‘çœ‹å¯¹é¢å…„å¼Ÿçš„æ±—éƒ½ä¸‹æ¥äº†ï¼Œæˆ‘éƒ½ä¸å¥½æ„æ€å†é—®ã€‚</p>
<p>ä»Šå¤©çœŸå¿ƒç»™å¤§ä¼™æä¸ªé†’ï¼Œç®€å†ä¸Šè¿™ <strong>ç²¾é€š</strong> äºŒå­—ï¼Œå°±æ˜¯ä¸ªå·¨å¤§çš„å‘ï¼Œè°è¸©è°çŸ¥é“ã€‚</p>
<p>æ¥ï¼Œæˆ‘ç»™ä½ ä»¬å¤ç›˜ä¸€ä¸‹ï¼Œä»€ä¹ˆå«é¢è¯•å®˜çœ¼é‡Œçš„ç²¾é€šã€‚</p>
<h3 data-id="heading-0">ä½ åˆ«åªèƒŒå…«è‚¡æ–‡</h3>
<p>æˆ‘ä¸Šæ¥é€šå¸¸å…ˆé—®ä¸ªç®€å•çš„çƒ­èº«ï¼š</p>
<p><strong>Vue3 åˆ°åº•ä¸ºå•¥è¦ç”¨ Proxy æ¢æ‰ Object.definePropertyï¼Ÿ</strong></p>
<p>å¤§éƒ¨åˆ†äººå¼ å£å°±æ¥ï¼šå› ä¸º defineProperty ç›‘å¬ä¸åˆ°æ•°ç»„ä¸‹æ ‡ï¼Œè¿˜ç›‘å¬ä¸åˆ°å¯¹è±¡æ–°å¢å±æ€§ã€‚Proxy å•¥éƒ½èƒ½æ‹¦ï¼Œæ‰€ä»¥ç‰›é€¼ã€‚</p>
<p>è¿™è¯é”™æ²¡é”™ï¼Ÿæ²¡é”™ã€‚</p>
<p>ä½†è¿™åªæ˜¯ 60 åˆ†çš„å›ç­”ï¼Œå±äºèƒŒè¯µå…¨æ–‡ğŸ¤”ã€‚</p>
<p><strong>æ•¢å†™ç²¾é€šçš„ï¼Œä½ å¾—è¿™ä¹ˆè·Ÿæˆ‘èŠï¼š</strong></p>
<p>è€å“¥ï¼Œå…¶å®æ•°ç»„å’Œæ–°å¢å±æ€§é‚£éƒ½æ˜¯æ¬¡è¦çš„ã€‚æœ€æ ¸å¿ƒçš„ç—›ç‚¹æ˜¯ <strong>æ€§èƒ½</strong>ï¼Œç‰¹åˆ«æ˜¯åˆå§‹åŒ–æ—¶å€™çš„æ€§èƒ½ã€‚</p>
<p>Vue2 é‚£ä¸ª defineProperty æ˜¯ä¸Šæ¥å°±å¾—é€’å½’ï¼ŒæŠŠä½ å¯¹è±¡é‡Œé‡Œå¤–å¤–æ¯ä¸€å±‚éƒ½ç»™åŠ«æŒäº†ã€‚å¯¹è±¡ä¸€æ·±ï¼Œåˆå§‹åŒ–ç›´æ¥å¡é¡¿ã€‚</p>
<p>Vue3 çš„ Proxy æ˜¯ <strong>æƒ°æ€§çš„</strong>ã€‚ä½ è®¿é—®ç¬¬ä¸€å±‚ï¼Œæˆ‘åŠ«æŒç¬¬ä¸€å±‚ï¼›ä½ è®¿é—®æ·±å±‚ï¼Œæˆ‘å†ä¸´æ—¶å»åŠ«æŒæ·±å±‚ã€‚æˆ‘ä¸è®¿é—®ï¼Œæˆ‘å°±ä¸å¹²æ´»ã€‚</p>
<p>è€Œä¸”ï¼Œè¿™é‡Œé¢è¿˜æœ‰ä¸ª <strong>this æŒ‡å‘</strong> çš„å‘ã€‚Vue3 æºç é‡Œç”¨ Reflect.get ä¼ äº†ä¸ª receiver å‚æ•°è¿›å»ï¼Œå°±æ˜¯ä¸ºäº†ä¿è¯æœ‰ç»§æ‰¿å…³ç³»æ—¶ï¼Œthis èƒ½æŒ‡å¯¹åœ°æ–¹ï¼Œä¸ç„¶ä¾èµ–æ”¶é›†å°±ä¹±å¥—äº†ã€‚</p>








































<table><thead><tr><th>èƒ½åŠ›</th><th>Vue2ï¼ˆdefinePropertyï¼‰</th><th>Vue3ï¼ˆProxyï¼‰</th></tr></thead><tbody><tr><td>ç›‘å¬å¯¹è±¡æ–°å¢/åˆ é™¤</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ç›‘å¬æ•°ç»„ç´¢å¼•/length</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ä¸€æ¬¡æ€§ä»£ç†æ•´ä¸ªå¯¹è±¡</td><td>âŒ</td><td>âœ…</td></tr><tr><td>æ€§èƒ½ä¸Šé™</td><td>âŒ è¶Šå¤§è¶Šæ…¢</td><td>âœ… æ›´å¹³æ»‘</td></tr><tr><td>Map / Set</td><td>âŒ</td><td>âš ï¸ éƒ¨åˆ†æ”¯æŒ</td></tr><tr><td>å®ç°å¤æ‚åº¦</td><td>é«˜</td><td>ä½</td></tr></tbody></table>
<p>ä½ è¦èƒ½è¯´åˆ° <strong>æ‡’åŠ«æŒ</strong> å’Œ <strong>Reflect çš„ receiver</strong> è¿™ä¸€å±‚ï¼Œæˆ‘æ‰è§‰å¾—ä½ å¯èƒ½çœ‹è¿‡æºç ğŸ™‚â€â†”ï¸ã€‚</p>
<h3 data-id="heading-1">Diff ç®—æ³•åˆ«å…‰æ‰¯æœ€é•¿é€’å¢å­åºåˆ—</h3>
<p>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œç¨å¾®ä¸Šç‚¹å¼ºåº¦ï¼š</p>
<p><strong>Vue3 çš„ diff ç®—æ³•å¿«åœ¨å“ªï¼Ÿ</strong></p>
<p>åˆ«ä¸€ä¸Šæ¥å°±è·Ÿæˆ‘èƒŒä»€ä¹ˆæœ€é•¿é€’å¢å­åºåˆ—ï¼Œé‚£åªæ˜¯æœ€åä¸€æ­¥ã€‚</p>
<p>ä½ å¾—ä» <strong>ç¼–è¯‘é˜¶æ®µ</strong> å¼€å§‹èŠã€‚</p>
<p>Vue2 æ˜¯ä¸ªè€å®äººï¼Œæ•°æ®å˜äº†ï¼Œå®ƒå°±æŠŠæ•´æ£µæ ‘æ‹¿æ¥ä»å¤´æ¯”åˆ°å°¾ï¼Œå“ªæ€•ä½ é‚£æ˜¯ä¸ªé™æ€çš„å†™æ­»çš„ divï¼Œå®ƒä¹Ÿè¦æ¯”ä¸€ä¸‹ã€‚</p>
<p>Vue3 å˜èªæ˜äº†ï¼Œå®ƒæäº†ä¸ª <strong>åŠ¨é™åˆ†ç¦»</strong>ã€‚</p>
<p>åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå®ƒå°±ç»™é‚£äº›ä¼šå˜çš„èŠ‚ç‚¹æ‰“ä¸Šäº†æ ‡è®°ï¼Œå« <strong>PatchFlag</strong>ã€‚è¿™ä¸ªæ˜¯æ–‡æœ¬å˜ï¼Œé‚£ä¸ªæ˜¯ class å˜ï¼Œéƒ½è®°å¥½äº†ã€‚</p>
<p>ç­‰åˆ°çœŸè¦ diff çš„æ—¶å€™ï¼ŒVue3 ç›´æ¥æ— è§†é‚£äº›é™æ€èŠ‚ç‚¹ï¼Œåªç›¯ç€å¸¦æ ‡è®°çš„èŠ‚ç‚¹çœ‹ã€‚</p>
<p>è¿™å°±å¥½æ¯”è€å¸ˆæ”¹å·å­ï¼Œä»¥å‰æ˜¯ä»å¤´è¯»åˆ°å°¾ï¼Œç°åœ¨æ˜¯åªçœ‹ä½ æ”¹è¿‡çš„é”™é¢˜ã€‚è¿™æ•ˆç‡èƒ½ä¸€æ ·å—ï¼Ÿ</p>
<p>è¿™å« <strong>é¶å‘æ›´æ–°</strong>ã€‚èƒ½æ‰¯å‡ºè¿™ä¸ªè¯ï¼Œæ‰ç®—æ‘¸åˆ°äº† Vue3 çš„é—¨é“ã€‚</p>
<h3 data-id="heading-2">Ref çš„é‚£äº›å‘è¯´ä¸€è¯´ï¼Ÿ</h3>
<p>æœ€åé—®ä¸ªç»†èŠ‚ï¼Œçœ‹ä½ å¹³æ—¶è¸©æ²¡è¸©è¿‡å‘ï¼š</p>
<p><strong>Ref åœ¨æ¨¡æ¿é‡Œä¸ç”¨å†™ .valueï¼Œåœ¨ reactive é‡Œä¹Ÿä¸ç”¨å†™ã€‚é‚£ä¸ºå•¥æœ‰æ—¶å€™åœ¨ Map é‡Œåˆè¦å†™äº†å‘¢ï¼Ÿ</strong></p>
<p>å¾ˆå¤šäººè¿™å°±æ‡µäº†ï¼šå•Šï¼Ÿä¸éƒ½æ˜¯è‡ªåŠ¨è§£åŒ…å—ï¼Ÿ</p>
<p><strong>ç²¾é€š</strong> çš„äººä¼šå‘Šè¯‰æˆ‘ï¼š</p>
<p>Vue çš„è‡ªåŠ¨è§£åŒ…æ˜¯æœ‰åº•çº¿çš„ã€‚</p>
<p>æ¨¡æ¿é‡Œé‚£æ˜¯äº²å„¿å­å¾…é‡ï¼Œå¸®ä½ è§£äº†ã€‚</p>
<p>reactive å¯¹è±¡é‡Œé‚£æ˜¯å¹²å„¿å­å¾…é‡ï¼Œget æ‹¦æˆªå™¨é‡Œå¸®ä½ è§£äº†ã€‚</p>
<p>ä½†æ˜¯ <strong>Map</strong> å’Œ <strong>Set</strong> è¿™ç§æ•°æ®ç»“æ„ï¼ŒVue ä¸ºäº†ä¿è¯è¯­ä¹‰ä¸ä¹±ï¼Œæ˜¯ä¸æ•¢ä¹±åŠ¨çš„ã€‚ä½ åœ¨ Map é‡Œå­˜ä¸ª refï¼Œå–å‡ºæ¥å®ƒè¿˜æ˜¯ä¸ª refï¼Œå¿…é¡»å¾—æ‰‹å†™ .valueã€‚ğŸ‘‡</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)

<span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()
map.<span class="hljs-title function_">set</span>(<span class="hljs-string">'count'</span>, count)

map.<span class="hljs-title function_">get</span>(<span class="hljs-string">'count'</span>)        <span class="hljs-comment">// æ‹¿åˆ°çš„æ˜¯ ref å¯¹è±¡</span>
map.<span class="hljs-title function_">get</span>(<span class="hljs-string">'count'</span>).<span class="hljs-property">value</span> <span class="hljs-comment">// è¿™æ˜¯æ­£ç¡®å–å€¼</span>

</code></pre>
<blockquote>
<p>Map / Set / WeakMap ä¸æ˜¯ Vue çš„å“åº”å¼ä»£ç†å¯¹è±¡</p>
</blockquote>
<p>è¿™ç§ç»†ææœ«èŠ‚ï¼Œæ²¡åœ¨çœŸå®é¡¹ç›®é‡Œè¢«æ¯’æ‰“è¿‡ï¼Œæ˜¯å¾ˆéš¾æ³¨æ„åˆ°çš„ã€‚</p>
<hr/>
<p>é¢è¯•å…¶å®å°±æ˜¯ä¸€åœº <strong>å¿ƒç†åšå¼ˆ</strong>ã€‚</p>
<p>ä½ å†™ <strong>ç²¾é€š</strong>ï¼Œæˆ‘å¯¹ä½ çš„é¢„æœŸå°±æ˜¯ <strong>è¡Œä¸šé¡¶å°–</strong>ã€‚ä½ ç­”ä¸ä¸Šæ¥ï¼Œè½å·®æ„Ÿå¤ªå¼ºï¼Œç›´æ¥æŒ‚ã€‚</p>
<p>ä½ å†™ <strong>ç†Ÿç»ƒæŒæ¡</strong> æˆ–è€… <strong>æœ‰ä¸°å¯Œå®æˆ˜ç»éªŒ</strong>ï¼Œå“ªæ€•ä½ ç­”å‡ºä¸Šé¢è¿™äº›æ·±åº¦çš„ 50%ï¼Œæˆ‘éƒ½è§‰å¾—è¿™å°ä¼™å­çˆ±é’»ç ”ï¼Œæ˜¯ä¸ªæƒŠå–œğŸ¥±ã€‚</p>
<p>åœ¨è¿™ä¸ªè¡Œä¸šé‡Œï¼Œ<strong>ç²¾é€š</strong> çœŸçš„ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯ä¸€ä¸ªæ— é™é€¼è¿‘çš„è¿‡ç¨‹ã€‚</p>
<p>æˆ‘è‡ªå·±å†™äº†è¿™ä¹ˆå¤šå¹´ä»£ç ï¼Œç°åœ¨ç®€å†ä¸Šä¹Ÿåªæ•¢å†™ <strong>ç†Ÿç»ƒ</strong>ğŸ¤·â€â™‚ï¸ã€‚</p>
<p>æŠŠ <strong>ç²¾é€š</strong> æ¢æˆ <strong>å®æˆ˜æ¡ˆä¾‹</strong> å§ï¼Œæ¯”å¦‚ <strong>æˆ‘åœ¨é¡¹ç›®ä¸­é‡å†™äº†è™šæ‹Ÿåˆ—è¡¨</strong>ï¼Œæˆ–è€… <strong>æˆ‘ç»™ Vue ç”Ÿæ€è´¡çŒ®è¿‡ PR</strong>ã€‚</p>
<p>è¿™æ¯”é‚£ä¸¤ä¸ªå¹²å·´å·´çš„æ±‰å­—ï¼Œæœ‰åŠ›ä¸€ä¸‡å€ã€‚</p>
<p>å¬å“¥ä¸€å¥åŠï¼ŒFlag åˆ«ä¹±æï¼ŒOffer è‡ªç„¶å°±ä¼šæ¥ğŸ˜’ã€‚</p>
<p>ä½ ä»¬è¯´å‘¢ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffdaf315a33141f6bc3929a5d259f726~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771212478&amp;x-signature=VLZPpX6fhiD%2Bbbk5av2aBOh7Rg0%3D" alt="Suggestion.gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[xxl-job å’Œ elastic-jobï¼Œå“ªä¸ªæ›´å¥½ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7604155045235818531</link>    <guid>https://juejin.cn/post/7604155045235818531</guid>    <pubDate>2026-02-09T03:35:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604155045235818531" data-draft-id="7604045354070409250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="xxl-job å’Œ elastic-jobï¼Œå“ªä¸ªæ›´å¥½ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T03:35:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            xxl-job å’Œ elastic-jobï¼Œå“ªä¸ªæ›´å¥½ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T03:35:17.000Z" title="Mon Feb 09 2026 03:35:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è‹ä¸‰ï¼Œåˆè·Ÿå¤§å®¶è§é¢äº†ã€‚</p>
<p>Â </p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©æˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸ªè®©è®¸å¤šæŠ€æœ¯å›¢é˜Ÿçº ç»“çš„é—®é¢˜ï¼šåœ¨åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦é¢†åŸŸï¼Œ<code>XXL-JOB</code>å’Œ<code>Elastic-Job</code>ï¼Œåˆ°åº•å“ªä¸ªæ›´å¥½ï¼Ÿ</p>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­ç¬¬ä¸€æ¬¡æ¥è§¦åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦æ—¶ï¼Œå¯èƒ½ä¼šæœ‰è¿™æ ·çš„å›°æƒ‘ï¼šæˆ‘ä»¬çš„å®šæ—¶ä»»åŠ¡åœ¨å•æœºè·‘å¾—å¥½å¥½çš„ï¼Œä¸ºä»€ä¹ˆéœ€è¦å¼•å…¥åˆ†å¸ƒå¼è°ƒåº¦æ¡†æ¶ï¼Ÿ</p>
<p>å½“ç³»ç»Ÿä»å•ä½“æ¶æ„æ¼”è¿›åˆ°å¾®æœåŠ¡æ¶æ„ï¼Œå½“æ•°æ®é‡ä»å‡ åƒæ¡æš´æ¶¨åˆ°å‡ ç™¾ä¸‡æ¡ï¼Œå½“ä¸šåŠ¡è¦æ±‚ä»â€œæŒ‰æ—¶æ‰§è¡Œâ€å‡çº§åˆ°â€œé«˜æ•ˆç¨³å®šâ€ï¼Œå•æœºä»»åŠ¡è°ƒåº¦å°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒäº†ã€‚</p>
<p>æˆ‘æ›¾ç»ç»å†è¿‡è¿™æ ·çš„æ¶æ„æ¼”è¿›ï¼šæ—©æœŸä½¿ç”¨<code>Quartz</code>é…åˆæ•°æ®åº“é”ï¼Œåæ¥åœ¨åƒä¸‡çº§ç”¨æˆ·é‡çš„ç”µå•†å¹³å°æ·±åº¦ä½¿ç”¨<code>XXL-JOB</code>ï¼Œæ¥ç€åœ¨æ•°æ®å¤„ç†é‡æå¤§çš„é‡‘èé¡¹ç›®ä¸­é‡‡ç”¨äº†<code>Elastic-Job</code>ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« å°±ä¸“é—¨è·Ÿå¤§å®¶ä¸€èµ·èŠèŠè¿™ä¸ªè¯é¢˜ï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<h2 data-id="heading-1">01 è®¾è®¡å“²å­¦</h2>
<p>è¦ç†è§£è¿™ä¸¤ä¸ªæ¡†æ¶çš„å·®å¼‚ï¼Œé¦–å…ˆè¦ä»å®ƒä»¬çš„è®¾è®¡å“²å­¦è¯´èµ·ã€‚</p>
<p><strong>XXL-JOBé‡‡ç”¨ä¸­å¿ƒåŒ–æ¶æ„</strong>ï¼Œå®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯â€œç®€å•æ¸…æ™°ã€å¼€ç®±å³ç”¨â€ã€‚</p>
<p>è®¾è®¡è€…è®¸é›ªé‡Œåœ¨æ¡†æ¶è¯ç”Ÿä¹‹åˆå°±æ˜ç¡®æå‡ºï¼šâ€œè°ƒåº¦ä¸­å¿ƒå’Œæ‰§è¡Œå™¨åˆ†ç¦»ï¼Œè°ƒåº¦ä¸­å¿ƒè´Ÿè´£ç»Ÿä¸€è°ƒåº¦ï¼Œæ‰§è¡Œå™¨è´Ÿè´£æ¥æ”¶è°ƒåº¦è¯·æ±‚å¹¶æ‰§è¡Œä»»åŠ¡â€ã€‚</p>
<p>è¿™ç§è®¾è®¡è®©<code>XXL-JOB</code>åƒä¸€ä¸ª<strong>é›†ä¸­æŒ‡æŒ¥ä¸­å¿ƒ</strong>ï¼Œæ‰€æœ‰è°ƒåº¦å†³ç­–éƒ½ç”±è°ƒåº¦ä¸­å¿ƒç»Ÿä¸€åšå‡ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f39d5c121d84481b7c68799011c0045~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771212918&amp;x-signature=LgFmoRTaD6iz%2B7krHVowY%2BzYU7M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>Elastic-Jobåˆ™é‡‡ç”¨å»ä¸­å¿ƒåŒ–æ¶æ„</strong>ï¼Œå®ƒçš„è®¾è®¡ç†å¿µæ˜¯â€œå¼¹æ€§è°ƒåº¦ã€åˆ†å¸ƒå¼åè°ƒâ€ã€‚</p>
<p>æ¡†æ¶åŸºäº<code>ZooKeeper</code>å®ç°åˆ†å¸ƒå¼åè°ƒï¼Œå„ä¸ªèŠ‚ç‚¹é€šè¿‡<code>ZooKeeper</code>é€‰ä¸¾å’Œç›‘å¬æœºåˆ¶ååŒå·¥ä½œï¼Œæ²¡æœ‰å•ç‚¹ä¸­å¿ƒè°ƒåº¦å™¨ã€‚</p>
<p>è¿™å°±åƒä¸€ä¸ª<strong>è‡ªæ²»çš„åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½çŸ¥é“è‡ªå·±è¯¥åšä»€ä¹ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de567abf258b45aebf37a7849534f2b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771212918&amp;x-signature=8eS5WzCTTg0qwVfXWSMK4Yh3DO0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸¤ç§è®¾è®¡å“²å­¦çš„é€‰æ‹©ï¼Œç›´æ¥å½±å“äº†ä¸¤è€…åœ¨ä¸åŒåœºæ™¯ä¸‹çš„è¡¨ç°ã€‚ä¸­å¿ƒåŒ–æ¶æ„ç®€åŒ–äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œè€Œå»ä¸­å¿ƒåŒ–æ¶æ„åˆ™æä¾›äº†æ›´å¥½çš„å¼¹æ€§ã€‚</p>
<h2 data-id="heading-2">02 æ ¸å¿ƒæ¶æ„æ·±åº¦å‰–æ</h2>
<h3 data-id="heading-3">XXL-JOBï¼šç®€æ´ä¼˜é›…çš„ä¸­å¿ƒåŒ–è®¾è®¡</h3>
<p><code>XXL-JOB</code>çš„æ¶æ„éå¸¸æ¸…æ™°ï¼Œä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li>1.Â <strong>è°ƒåº¦ä¸­å¿ƒï¼ˆScheduler Centerï¼‰</strong> ï¼šè´Ÿè´£ç®¡ç†è°ƒåº¦ä¿¡æ¯ã€å‘å‡ºè°ƒåº¦è¯·æ±‚</li>
<li>2.Â <strong>æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰</strong> ï¼šè´Ÿè´£æ¥æ”¶è°ƒåº¦è¯·æ±‚ã€æ‰§è¡Œä»»åŠ¡</li>
<li>3.Â <strong>ç®¡ç†æ§åˆ¶å°ï¼ˆAdmin Consoleï¼‰</strong> ï¼šæä¾›å¯è§†åŒ–ç•Œé¢è¿›è¡Œä»»åŠ¡ç®¡ç†</li>
</ol>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥çœ‹çœ‹å¦‚ä½•åœ¨Spring Booté¡¹ç›®ä¸­é›†æˆ<code>XXL-JOB</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. æ‰§è¡Œå™¨é…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">XxlJobConfig</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Value</span>(<span class="hljs-string">"${xxl.job.admin.addresses}"</span>)
Â  Â  <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">String</span> adminAddresses;
Â  Â Â 
Â  Â  <span class="hljs-meta">@Value</span>(<span class="hljs-string">"${xxl.job.executor.appname}"</span>)
Â  Â  <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">String</span> appName;
Â  Â Â 
Â  Â  <span class="hljs-meta">@Bean</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">XxlJobSpringExecutor</span>Â <span class="hljs-title function_">xxlJobExecutor</span>(<span class="hljs-params"/>)Â {
Â  Â  Â  Â  <span class="hljs-title class_">XxlJobSpringExecutor</span>Â xxlJobSpringExecutorÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">XxlJobSpringExecutor</span>();
Â  Â  Â  Â  xxlJobSpringExecutor.<span class="hljs-title function_">setAdminAddresses</span>(adminAddresses);
Â  Â  Â  Â  xxlJobSpringExecutor.<span class="hljs-title function_">setAppname</span>(appName);
Â  Â  Â  Â  xxlJobSpringExecutor.<span class="hljs-title function_">setPort</span>(<span class="hljs-number">9999</span>);
Â  Â  Â  Â  xxlJobSpringExecutor.<span class="hljs-title function_">setLogPath</span>(<span class="hljs-string">"/data/applogs/xxl-job/jobhandler/"</span>);
Â  Â  Â  Â  xxlJobSpringExecutor.<span class="hljs-title function_">setLogRetentionDays</span>(<span class="hljs-number">30</span>);
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â xxlJobSpringExecutor;
Â  Â  }
}

<span class="hljs-comment">// 2. ä»»åŠ¡å¤„ç†å™¨ç¤ºä¾‹</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">SampleXxlJobHandler</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@XxlJob</span>(<span class="hljs-string">"demoJobHandler"</span>)
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">ReturnT</span>&lt;<span class="hljs-title class_">String</span>&gt;Â <span class="hljs-title function_">demoJobHandler</span>(<span class="hljs-title class_">String</span> param)Â throwsÂ <span class="hljs-title class_">Exception</span> {
Â  Â  Â  Â  <span class="hljs-title class_">XxlJobLogger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"XXL-JOB, å¼€å§‹æ‰§è¡Œä»»åŠ¡"</span>);
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡å¤„ç†</span>
Â  Â  Â  Â  <span class="hljs-keyword">for</span>Â (intÂ iÂ =Â <span class="hljs-number">0</span>; i &lt;Â <span class="hljs-number">5</span>; i++) {
Â  Â  Â  Â  Â  Â  <span class="hljs-title class_">XxlJobLogger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ‰§è¡Œè¿›åº¦: {}"</span>, i);
Â  Â  Â  Â  Â  Â  <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">SECONDS</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">2</span>);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">ReturnT</span>.<span class="hljs-property">SUCCESS</span>;
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-meta">@XxlJob</span>(<span class="hljs-string">"shardingJobHandler"</span>)
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">ReturnT</span>&lt;<span class="hljs-title class_">String</span>&gt;Â <span class="hljs-title function_">shardingJobHandler</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> param</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// åˆ†ç‰‡å‚æ•°</span>
Â  Â  Â  Â  <span class="hljs-title class_">ShardingUtil</span>.<span class="hljs-property">ShardingVO</span>Â shardingVOÂ =Â <span class="hljs-title class_">ShardingUtil</span>.<span class="hljs-title function_">getShardingVo</span>();
Â  Â  Â  Â  intÂ shardIndexÂ =Â shardingVO.<span class="hljs-title function_">getIndex</span>();Â  <span class="hljs-comment">// å½“å‰åˆ†ç‰‡åºå·</span>
Â  Â  Â  Â  intÂ shardTotalÂ =Â shardingVO.<span class="hljs-title function_">getTotal</span>();Â  <span class="hljs-comment">// æ€»åˆ†ç‰‡æ•°</span>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-title class_">XxlJobLogger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åˆ†ç‰‡å‚æ•°ï¼šå½“å‰åˆ†ç‰‡åºå· = {}, æ€»åˆ†ç‰‡æ•° = {}"</span>, shardIndex, shardTotal);
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// æ ¹æ®åˆ†ç‰‡å‚æ•°å¤„ç†æ•°æ®</span>
Â  Â  Â  Â  <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; dataList = <span class="hljs-title function_">queryDataByShard</span>(shardIndex, shardTotal);
Â  Â  Â  Â  <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">String</span> data : dataList) {
Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">processData</span>(data);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">ReturnT</span>.<span class="hljs-property">SUCCESS</span>;
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt;Â <span class="hljs-title function_">queryDataByShard</span>(<span class="hljs-params">intÂ shardIndex,Â intÂ shardTotal</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// æ ¹æ®åˆ†ç‰‡å‚æ•°æŸ¥è¯¢éœ€è¦å¤„ç†çš„æ•°æ®</span>
Â  Â  Â  Â  <span class="hljs-comment">// ä¾‹å¦‚ï¼šSELECT * FROM order_table WHERE MOD(id, #{shardTotal}) = #{shardIndex}</span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">Arrays</span>.<span class="hljs-title function_">asList</span>(<span class="hljs-string">"data1"</span>,Â <span class="hljs-string">"data2"</span>,Â <span class="hljs-string">"data3"</span>);
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-keyword">private</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">processData</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> data</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// å¤„ç†æ•°æ®é€»è¾‘</span>
Â  Â  Â  Â  <span class="hljs-title class_">XxlJobLogger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¤„ç†æ•°æ®: {}"</span>, data);
Â  Â  }
}
</code></pre>
<h3 data-id="heading-4">Elastic-Jobï¼šåŸºäºåˆ†å¸ƒå¼åè°ƒçš„å¼¹æ€§è®¾è®¡</h3>
<p><code>Elastic-Job</code>çš„æ¶æ„æ›´åŠ åˆ†å¸ƒå¼ï¼Œå®ƒæ²¡æœ‰ä¸­å¿ƒè°ƒåº¦èŠ‚ç‚¹ï¼Œè€Œæ˜¯é€šè¿‡<code>ZooKeeper</code>å®ç°èŠ‚ç‚¹é—´çš„åè°ƒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. Elastic-Jobé…ç½®ç±»</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ElasticJobConfig</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Bean</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">CoordinatorRegistryCenter</span>Â <span class="hljs-title function_">registryCenter</span>(<span class="hljs-params"/>)Â {
Â  Â  Â  Â  <span class="hljs-title class_">CoordinatorRegistryCenter</span>Â regCenterÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ZookeeperRegistryCenter</span>(
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ZookeeperConfiguration</span>(<span class="hljs-string">"localhost:2181"</span>,Â <span class="hljs-string">"elastic-job-demo"</span>));
Â  Â  Â  Â  regCenter.<span class="hljs-title function_">init</span>();
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â regCenter;
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-meta">@Bean</span>(initMethod = <span class="hljs-string">"init"</span>)
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">SpringJobScheduler</span>Â <span class="hljs-title function_">simpleJobScheduler</span>(<span class="hljs-params">
Â  Â  Â  Â  Â  Â  finalÂ SimpleJob simpleJob,
Â  Â  Â  Â  Â  Â  finalÂ CoordinatorRegistryCenter regCenter</span>)Â {
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">SpringJobScheduler</span>(
Â  Â  Â  Â  Â  Â  simpleJob,
Â  Â  Â  Â  Â  Â  regCenter,
Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">getLiteJobConfiguration</span>(
Â  Â  Â  Â  Â  Â  Â  Â  simpleJob.<span class="hljs-title function_">getClass</span>(),
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-string">"0/5 * * * * ?"</span>,Â  <span class="hljs-comment">// æ¯5ç§’æ‰§è¡Œä¸€æ¬¡</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-number">3</span>,Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// åˆ†ç‰‡æ€»æ•°</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-string">"0=åŒ—äº¬,1=ä¸Šæµ·,2=å¹¿å·"</span>Â  <span class="hljs-comment">// åˆ†ç‰‡å‚æ•°</span>
Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  );
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">LiteJobConfiguration</span>Â <span class="hljs-title function_">getLiteJobConfiguration</span>(<span class="hljs-params">
Â  Â  Â  Â  Â  Â  Class&lt;? <span class="hljs-keyword">extends</span> SimpleJob&gt; jobClass,
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">String</span> cron,
Â  Â  Â  Â  Â  Â  intÂ shardingTotalCount,
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">String</span> shardingItemParameters</span>)Â {
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">LiteJobConfiguration</span>.<span class="hljs-title function_">newBuilder</span>(
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">SimpleJobConfiguration</span>(
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title class_">JobCoreConfiguration</span>.<span class="hljs-title function_">newBuilder</span>(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  jobClass.<span class="hljs-title function_">getName</span>(),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cron,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shardingTotalCount
Â  Â  Â  Â  Â  Â  Â  Â  ).<span class="hljs-title function_">shardingItemParameters</span>(shardingItemParameters).<span class="hljs-title function_">build</span>(),
Â  Â  Â  Â  Â  Â  Â  Â  jobClass.<span class="hljs-title function_">getCanonicalName</span>()
Â  Â  Â  Â  Â  Â  )
Â  Â  Â  Â  ).<span class="hljs-title function_">overwrite</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_">build</span>();
Â  Â  }
}

<span class="hljs-comment">// 2. ç®€å•çš„ä½œä¸šå®ç°</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">MySimpleJob</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">SimpleJob</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">execute</span>(<span class="hljs-params">ShardingContext context</span>)Â {
Â  Â  Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ä½œä¸šæ‰§è¡Œï¼Œåˆ†ç‰‡é¡¹: {}, æ€»åˆ†ç‰‡æ•°: {}"</span>,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â context.<span class="hljs-title function_">getShardingItem</span>(),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â context.<span class="hljs-title function_">getShardingTotalCount</span>());
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-keyword">switch</span>Â (context.<span class="hljs-title function_">getShardingItem</span>()) {
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">case</span>Â <span class="hljs-number">0</span>:
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// å¤„ç†åŒ—äº¬çš„æ•°æ®</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">processData</span>(<span class="hljs-string">"åŒ—äº¬"</span>, <span class="hljs-title function_">getBeijingData</span>());
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">break</span>;
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">case</span>Â <span class="hljs-number">1</span>:
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// å¤„ç†ä¸Šæµ·çš„æ•°æ®</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">processData</span>(<span class="hljs-string">"ä¸Šæµ·"</span>, <span class="hljs-title function_">getShanghaiData</span>());
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">break</span>;
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">case</span>Â <span class="hljs-number">2</span>:
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// å¤„ç†å¹¿å·çš„æ•°æ®</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">processData</span>(<span class="hljs-string">"å¹¿å·"</span>, <span class="hljs-title function_">getGuangzhouData</span>());
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">break</span>;
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt;Â <span class="hljs-title function_">getBeijingData</span>(<span class="hljs-params"/>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// æŸ¥è¯¢åŒ—äº¬ç›¸å…³çš„æ•°æ®</span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">Arrays</span>.<span class="hljs-title function_">asList</span>(<span class="hljs-string">"åŒ—äº¬æ•°æ®1"</span>,Â <span class="hljs-string">"åŒ—äº¬æ•°æ®2"</span>);
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-keyword">private</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">processData</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> region, List&lt;<span class="hljs-built_in">String</span>&gt; dataList</span>)Â {
Â  Â  Â  Â  <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">String</span> data : dataList) {
Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"å¤„ç†{}çš„æ•°æ®: {}"</span>, region, data);
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// å®é™…çš„æ•°æ®å¤„ç†é€»è¾‘</span>
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<p>ä»æ¶æ„å¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼Œ<code>XXL-JOB</code>æ›´åƒæ˜¯ä¼ ç»Ÿçš„C/Sæ¶æ„ï¼Œè€Œ<code>Elastic-Job</code>åˆ™æ˜¯çœŸæ­£çš„åˆ†å¸ƒå¼æ¶æ„ã€‚</p>
<p>è¿™ç§å·®å¼‚å¸¦æ¥äº†ä¸åŒçš„ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<h2 data-id="heading-5">03 åˆ†ç‰‡æœºåˆ¶ï¼šæ‰‹åŠ¨åˆ†ç‰‡ vs æ™ºèƒ½åˆ†ç‰‡</h2>
<p>åˆ†ç‰‡å¤„ç†æ˜¯å¤§æ•°æ®é‡ä»»åŠ¡è°ƒåº¦çš„æ ¸å¿ƒéœ€æ±‚ã€‚ä¸¤ä¸ªæ¡†æ¶åœ¨åˆ†ç‰‡æœºåˆ¶ä¸Šé‡‡å–äº†å®Œå…¨ä¸åŒçš„ç­–ç•¥ã€‚</p>
<h3 data-id="heading-6">XXL-JOBï¼šçµæ´»çš„æ‰‹åŠ¨åˆ†ç‰‡</h3>
<p><code>XXL-JOB</code>é‡‡ç”¨<strong>æ‰‹åŠ¨åˆ†ç‰‡</strong>ç­–ç•¥ï¼Œè°ƒåº¦ä¸­å¿ƒå°†åˆ†ç‰‡å‚æ•°ä¼ é€’ç»™æ‰§è¡Œå™¨ï¼Œæ‰§è¡Œå™¨æ ¹æ®è¿™äº›å‚æ•°å¤„ç†å¯¹åº”çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">@XxlJob(<span class="hljs-string">"orderProcessJob"</span>)
<span class="hljs-keyword">public</span>Â ReturnT&lt;<span class="hljs-type">String</span>&gt;Â orderProcessJob(<span class="hljs-type">String</span> param)Â {
Â  Â Â 
Â  Â  // è·å–åˆ†ç‰‡å‚æ•°
Â  Â  intÂ shardIndexÂ =Â XxlJobHelper.getShardIndex();
Â  Â  intÂ shardTotalÂ =Â XxlJobHelper.getShardTotal();
Â  Â Â 
Â  Â  log.info(<span class="hljs-string">"å¼€å§‹å¤„ç†è®¢å•æ•°æ®ï¼Œåˆ†ç‰‡å‚æ•°: index={}, total={}"</span>, shardIndex, shardTotal);
Â  Â Â 
Â  Â  // <span class="hljs-number">1</span>. æ ¹æ®åˆ†ç‰‡å‚æ•°æŸ¥è¯¢éœ€è¦å¤„ç†çš„è®¢å•
Â  Â  List&lt;<span class="hljs-keyword">Order</span>&gt; orders = orderService.findOrdersByShard(shardIndex, shardTotal);
Â  Â Â 
Â  Â  // <span class="hljs-number">2</span>. å¤„ç†è®¢å•
Â  Â  <span class="hljs-keyword">for</span>Â (<span class="hljs-keyword">Order</span> <span class="hljs-keyword">order</span> : orders) {
Â  Â  Â  Â  <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  processOrder(<span class="hljs-keyword">order</span>);
Â  Â  Â  Â  Â  Â  log.info(<span class="hljs-string">"è®¢å•å¤„ç†æˆåŠŸ: {}"</span>, <span class="hljs-keyword">order</span>.getOrderNo());
Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (Exception e) {
Â  Â  Â  Â  Â  Â  log.<span class="hljs-keyword">error</span>(<span class="hljs-string">"è®¢å•å¤„ç†å¤±è´¥: {}"</span>, <span class="hljs-keyword">order</span>.getOrderNo(), e);
Â  Â  Â  Â  Â  Â  XxlJobHelper.handleFail(<span class="hljs-string">"è®¢å•å¤„ç†å¤±è´¥: "</span>Â + <span class="hljs-keyword">order</span>.getOrderNo());
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-keyword">return</span>Â ReturnT.SUCCESS;
}

// åœ¨æ•°æ®åº“ä¸­æŒ‰åˆ†ç‰‡æŸ¥è¯¢çš„ç¤ºä¾‹SQL
// <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> order_tableÂ 
// <span class="hljs-keyword">WHERE</span> status = <span class="hljs-comment">'å¾…å¤„ç†'Â </span>
// Â  <span class="hljs-built_in">AND</span> <span class="hljs-built_in">MOD</span>(order_id % #{shardTotal}) = #{shardIndex}
// <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_timeÂ 
// LIMIT <span class="hljs-number">1000</span>
</code></pre>
<p><strong>æ‰‹åŠ¨åˆ†ç‰‡çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li>1.Â <strong>çµæ´»æ€§é«˜</strong>ï¼šå¼€å‘è€…å¯ä»¥å®Œå…¨æ§åˆ¶åˆ†ç‰‡é€»è¾‘</li>
<li>2.Â <strong>æ•°æ®åˆ’åˆ†çµæ´»</strong>ï¼šå¯ä»¥æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è‡ªå®šä¹‰åˆ†ç‰‡ç­–ç•¥</li>
<li>3.Â <strong>å®¹é”™æ€§å¼º</strong>ï¼šå•ä¸ªåˆ†ç‰‡å¤±è´¥ä¸å½±å“å…¶ä»–åˆ†ç‰‡</li>
</ol>
<p><strong>æ‰‹åŠ¨åˆ†ç‰‡çš„ä¸è¶³</strong>ï¼š</p>
<ol>
<li>1.Â <strong>å®ç°å¤æ‚</strong>ï¼šéœ€è¦å¼€å‘è€…è‡ªå·±å®ç°åˆ†ç‰‡é€»è¾‘</li>
<li>2.Â <strong>å¼¹æ€§ä¸è¶³</strong>ï¼šå¢åŠ æˆ–å‡å°‘èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´åˆ†ç‰‡ç­–ç•¥</li>
</ol>
<h3 data-id="heading-7">Elastic-Jobï¼šæ™ºèƒ½çš„è‡ªåŠ¨åˆ†ç‰‡</h3>
<p><code>Elastic-Job</code>é‡‡ç”¨<strong>æ™ºèƒ½åˆ†ç‰‡</strong>ç­–ç•¥ï¼Œæ¡†æ¶è‡ªåŠ¨æ ¹æ®å½“å‰åœ¨çº¿èŠ‚ç‚¹æ•°è¿›è¡Œåˆ†ç‰‡åˆ†é…ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ•°æ®æµä½œä¸šç¤ºä¾‹ - æ›´é€‚åˆå¤§æ•°æ®å¤„ç†åœºæ™¯</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">DataflowJobExample</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">DataflowJob</span>&lt;<span class="hljs-title class_">String</span>&gt; {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt;Â <span class="hljs-title function_">fetchData</span>(<span class="hljs-params">ShardingContext context</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// æ ¹æ®åˆ†ç‰‡å‚æ•°è·å–æ•°æ®</span>
Â  Â  Â  Â  <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; data = <span class="hljs-title function_">fetchDataByShard</span>(
Â  Â  Â  Â  Â  Â  context.<span class="hljs-title function_">getShardingItem</span>(),
Â  Â  Â  Â  Â  Â  context.<span class="hljs-title function_">getShardingTotalCount</span>()
Â  Â  Â  Â  );
Â  Â  Â  Â Â 
Â  Â  Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"è·å–åˆ°{}æ¡æ•°æ®å¾…å¤„ç†"</span>, data.<span class="hljs-title function_">size</span>());
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â data;
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">processData</span>(<span class="hljs-params">ShardingContext context, List&lt;<span class="hljs-built_in">String</span>&gt; data</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
Â  Â  Â  Â  <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">String</span> item : data) {
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">processItem</span>(item);
Â  Â  Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"æ•°æ®å¤„ç†æˆåŠŸ: {}"</span>, item);
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span> e) {
Â  Â  Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ•°æ®å¤„ç†å¤±è´¥: {}"</span>, item, e);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt;Â <span class="hljs-title function_">fetchDataByShard</span>(<span class="hljs-params">intÂ shardIndex,Â intÂ shardTotal</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// æ¨¡æ‹Ÿä»æ•°æ®åº“æˆ–æ¶ˆæ¯é˜Ÿåˆ—è·å–æ•°æ®</span>
Â  Â  Â  Â  <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­è¿™é‡Œå¯èƒ½æ˜¯ï¼š</span>
Â  Â  Â  Â  <span class="hljs-comment">// 1. ä»æ•°æ®åº“æŸ¥è¯¢ï¼šWHERE MOD(id, #{shardTotal}) = #{shardIndex}</span>
Â  Â  Â  Â  <span class="hljs-comment">// 2. ä»æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹ç‰¹å®šåˆ†åŒºçš„æ•°æ®</span>
Â  Â  Â  Â  <span class="hljs-comment">// 3. ä»æ–‡ä»¶ä¸­è¯»å–ç‰¹å®šéƒ¨åˆ†çš„æ•°æ®</span>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; data =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
Â  Â  Â  Â  <span class="hljs-keyword">for</span>Â (intÂ iÂ =Â <span class="hljs-number">0</span>; i &lt;Â <span class="hljs-number">100</span>; i++) {
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span>Â (i % shardTotal == shardIndex) {
Â  Â  Â  Â  Â  Â  Â  Â  data.<span class="hljs-title function_">add</span>(<span class="hljs-string">"data-"</span>Â + i);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â data;
Â  Â  }
}
</code></pre>
<p><strong>æ™ºèƒ½åˆ†ç‰‡çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li>1.Â <strong>è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜</strong>ï¼šæ¡†æ¶è‡ªåŠ¨å¤„ç†åˆ†ç‰‡åˆ†é…</li>
<li>2.Â <strong>å¼¹æ€§æ‰©å±•</strong>ï¼šèŠ‚ç‚¹å¢å‡æ—¶ï¼Œåˆ†ç‰‡è‡ªåŠ¨é‡æ–°åˆ†é…</li>
<li>3.Â <strong>è´Ÿè½½å‡è¡¡</strong>ï¼šè‡ªåŠ¨ç¡®ä¿å„èŠ‚ç‚¹è´Ÿè½½ç›¸å¯¹å‡è¡¡</li>
</ol>
<p><strong>æ™ºèƒ½åˆ†ç‰‡çš„ä¸è¶³</strong>ï¼š</p>
<ol>
<li>1.Â <strong>çµæ´»æ€§å—é™</strong>ï¼šåˆ†ç‰‡ç­–ç•¥ç”±æ¡†æ¶æ§åˆ¶ï¼Œè‡ªå®šä¹‰ç©ºé—´è¾ƒå°</li>
<li>2.Â <strong>å­¦ä¹ æˆæœ¬é«˜</strong>ï¼šéœ€è¦ç†è§£æ¡†æ¶çš„åˆ†ç‰‡åˆ†é…æœºåˆ¶</li>
</ol>
<h2 data-id="heading-8">04 é«˜å¯ç”¨æ€§è®¾è®¡å¯¹æ¯”</h2>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒè¦æ±‚ä¹‹ä¸€å°±æ˜¯é«˜å¯ç”¨æ€§ã€‚ä¸¤ä¸ªæ¡†æ¶åœ¨é«˜å¯ç”¨è®¾è®¡ä¸Šé‡‡ç”¨äº†ä¸åŒçš„ç­–ç•¥ã€‚</p>
<h3 data-id="heading-9">XXL-JOBçš„é«˜å¯ç”¨è®¾è®¡</h3>
<p><code>XXL-JOB</code>é€šè¿‡æ•°æ®åº“é”å’Œå¿ƒè·³æ£€æµ‹å®ç°é«˜å¯ç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è°ƒåº¦ä¸­å¿ƒé›†ç¾¤éƒ¨ç½²æ—¶ï¼Œé€šè¿‡æ•°æ®åº“é”ä¿è¯åªæœ‰ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒå·¥ä½œ</span>
<span class="hljs-comment">// æ ¸å¿ƒä¼ªä»£ç é€»è¾‘ï¼š</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ScheduleThread</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">Thread</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">run</span>(<span class="hljs-params"/>)Â {
Â  Â  Â  Â  <span class="hljs-keyword">while</span>Â (!stopped) {
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// 1. å°è¯•è·å–æ•°æ®åº“é”</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">if</span>Â (<span class="hljs-title function_">tryLock</span>()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// 2. è·å–é”æˆåŠŸï¼Œæ‰§è¡Œè°ƒåº¦</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">scheduleJobs</span>();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// 3. ä¿æŒé”ï¼Œç›´åˆ°è°ƒåº¦å®Œæˆ</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">SECONDS</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">5</span>);
Â  Â  Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// 4. è·å–é”å¤±è´¥ï¼Œç­‰å¾…é‡è¯•</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">SECONDS</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">10</span>);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span> e) {
Â  Â  Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è°ƒåº¦çº¿ç¨‹å¼‚å¸¸"</span>, e);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-keyword">private</span>Â <span class="hljs-built_in">boolean</span>Â <span class="hljs-title function_">tryLock</span>(<span class="hljs-params"/>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// é€šè¿‡æ•°æ®åº“è¡Œé”å®ç°åˆ†å¸ƒå¼é”</span>
Â  Â  Â  Â  <span class="hljs-comment">// INSERT INTO xxl_job_lock (lock_name) VALUES ('schedule_lock')</span>
Â  Â  Â  Â  <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨SELECT ... FOR UPDATE</span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â dbLockService.<span class="hljs-title function_">acquireLock</span>(<span class="hljs-string">"schedule_lock"</span>);
Â  Â  }
}

<span class="hljs-comment">// æ‰§è¡Œå™¨å¿ƒè·³æ£€æµ‹</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">ExecutorHeartbeat</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Scheduled</span>(fixedRate = <span class="hljs-number">30000</span>)Â <span class="hljs-comment">// æ¯30ç§’å‘é€ä¸€æ¬¡å¿ƒè·³</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">sendHeartbeat</span>(<span class="hljs-params"/>)Â {
Â  Â  Â  Â  <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// å‘è°ƒåº¦ä¸­å¿ƒæ³¨å†Œæˆ–æ›´æ–°å¿ƒè·³</span>
Â  Â  Â  Â  Â  Â  registryService.<span class="hljs-title function_">registry</span>(
Â  Â  Â  Â  Â  Â  Â  Â  executorConfig.<span class="hljs-title function_">getAppName</span>(),
Â  Â  Â  Â  Â  Â  Â  Â  executorConfig.<span class="hljs-title function_">getAddress</span>()
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span> e) {
Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å¿ƒè·³å‘é€å¤±è´¥"</span>, e);
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<h3 data-id="heading-10">Elastic-Jobçš„é«˜å¯ç”¨è®¾è®¡</h3>
<p><code>Elastic-Job</code>é€šè¿‡<code>ZooKeeper</code>çš„ä¸´æ—¶èŠ‚ç‚¹å’Œç›‘å¬æœºåˆ¶å®ç°é«˜å¯ç”¨ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åŸºäºZooKeeperçš„åˆ†å¸ƒå¼åè°ƒå®ç°é«˜å¯ç”¨</span>
publicÂ classÂ ElectionListenerManagerÂ {
Â  Â Â 
Â  Â  publicÂ voidÂ <span class="hljs-built_in">start</span>()Â {
Â  Â  Â  Â  <span class="hljs-comment">// 1. åˆ›å»ºLeaderèŠ‚ç‚¹é€‰ä¸¾</span>
Â  Â  Â  Â  leaderService<span class="hljs-selector-class">.electLeader</span>();
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// 2. ç›‘å¬åˆ†ç‰‡èŠ‚ç‚¹å˜åŒ–</span>
Â  Â  Â  Â  <span class="hljs-built_in">addShardingListener</span>();
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// 3. ç›‘å¬ä½œä¸šæœåŠ¡å™¨å˜åŒ–</span>
Â  Â  Â  Â  <span class="hljs-built_in">addJobServerListener</span>();
Â  Â  }
Â  Â Â 
Â  Â  privateÂ voidÂ <span class="hljs-built_in">addShardingListener</span>()Â {
Â  Â  Â  Â  <span class="hljs-comment">// ç›‘å¬åˆ†ç‰‡èŠ‚ç‚¹çš„å˜åŒ–</span>
Â  Â  Â  Â  zookeeperRegistryCenter<span class="hljs-selector-class">.addCacheData</span>("/${jobName}/sharding");
Â  Â  Â  Â Â 
Â  Â  Â  Â  zookeeperRegistryCenter<span class="hljs-selector-class">.getClient</span>()
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.getCuratorFramework</span>()
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.getChildren</span>()
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.usingWatcher</span>((CuratorWatcher) event -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// åˆ†ç‰‡èŠ‚ç‚¹å˜åŒ–ï¼Œé‡æ–°åˆ†ç‰‡</span>
Â  Â  Â  Â  Â  Â  Â  Â  ifÂ (event.getType() == Watcher<span class="hljs-selector-class">.Event</span><span class="hljs-selector-class">.EventType</span><span class="hljs-selector-class">.NodeChildrenChanged</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reshardingService<span class="hljs-selector-class">.resharding</span>();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.forPath</span>("/${jobName}/sharding");
Â  Â  }
Â  Â Â 
Â  Â  privateÂ voidÂ <span class="hljs-built_in">addJobServerListener</span>()Â {
Â  Â  Â  Â  <span class="hljs-comment">// ç›‘å¬ä½œä¸šæœåŠ¡å™¨çš„ä¸Šä¸‹çº¿</span>
Â  Â  Â  Â  zookeeperRegistryCenter<span class="hljs-selector-class">.addCacheData</span>("/${jobName}/servers");
Â  Â  Â  Â Â 
Â  Â  Â  Â  zookeeperRegistryCenter<span class="hljs-selector-class">.getClient</span>()
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.getCuratorFramework</span>()
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.getChildren</span>()
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.usingWatcher</span>((CuratorWatcher) event -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// æœåŠ¡å™¨èŠ‚ç‚¹å˜åŒ–ï¼Œé‡æ–°åˆ†é…ä»»åŠ¡</span>
Â  Â  Â  Â  Â  Â  Â  Â  ifÂ (event.getType() == Watcher<span class="hljs-selector-class">.Event</span><span class="hljs-selector-class">.EventType</span><span class="hljs-selector-class">.NodeChildrenChanged</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  serverService<span class="hljs-selector-class">.syncServers</span>();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.forPath</span>("/${jobName}/servers");
Â  Â  }
}
</code></pre>
<p><strong>é«˜å¯ç”¨æ€§å¯¹æ¯”åˆ†æ</strong>ï¼š</p>



































<table><thead><tr><th>é«˜å¯ç”¨ç»´åº¦</th><th>XXL-JOB</th><th>Elastic-Job</th></tr></thead><tbody><tr><td><strong>è°ƒåº¦ä¸­å¿ƒé«˜å¯ç”¨</strong></td><td>æ•°æ®åº“é”ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒå·¥ä½œ</td><td>æ— ä¸­å¿ƒè°ƒåº¦å™¨ï¼Œå¤©ç„¶æ— å•ç‚¹</td></tr><tr><td><strong>æ‰§è¡Œå™¨é«˜å¯ç”¨</strong></td><td>å¿ƒè·³æ£€æµ‹ï¼Œå¤±è´¥åä»»åŠ¡è·¯ç”±åˆ°å…¶ä»–æ‰§è¡Œå™¨</td><td>ZooKeeperä¸´æ—¶èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹å¤±æ•ˆè‡ªåŠ¨é‡æ–°åˆ†ç‰‡</td></tr><tr><td><strong>ç½‘ç»œåˆ†åŒºå®¹å¿</strong></td><td>è°ƒåº¦ä¸­å¿ƒä¸æ‰§è¡Œå™¨æ–­å¼€åï¼Œä»»åŠ¡æš‚åœ</td><td>ZooKeeperä¼šè¯è¶…æ—¶åï¼Œåˆ†ç‰‡é‡æ–°åˆ†é…</td></tr><tr><td><strong>æ¢å¤æ—¶é—´</strong></td><td>ä¾èµ–å¿ƒè·³é—´éš”ï¼ˆé»˜è®¤30ç§’ï¼‰</td><td>ä¾èµ–ZooKeeperä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤60ç§’ï¼‰</td></tr><tr><td><strong>å®ç°å¤æ‚åº¦</strong></td><td>ç®€å•ç›´è§‚</td><td>å¤æ‚ä½†æ›´å¥å£®</td></tr></tbody></table>
<h2 data-id="heading-11">05 ç›‘æ§ä¸ç®¡ç†èƒ½åŠ›</h2>
<p>å¯¹äºç”Ÿäº§ç³»ç»Ÿæ¥è¯´ï¼Œç›‘æ§å’Œç®¡ç†èƒ½åŠ›åŒæ ·é‡è¦ã€‚</p>
<h3 data-id="heading-12">XXL-JOBï¼šå®Œå–„çš„å¯è§†åŒ–ç®¡ç†</h3>
<p><code>XXL-JOB</code>æä¾›äº†å®Œæ•´çš„Webç®¡ç†ç•Œé¢ï¼Œè¿™æ˜¯å®ƒçš„ä¸€å¤§äº®ç‚¹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// è°ƒåº¦ä¸­å¿ƒç®¡ç†æ§åˆ¶å°çš„ä¸»è¦åŠŸèƒ½</span>
<span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/jobadmin"</span>)
publicÂ classÂ JobAdminControllerÂ {
Â  Â Â 
Â  Â  <span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/add"</span>)
Â  Â  publicÂ ReturnT&lt;String&gt;Â <span class="hljs-built_in">addJob</span>(<span class="hljs-variable">@RequestBody</span>Â XxlJobInfo jobInfo)Â {
Â  Â  Â  Â  <span class="hljs-comment">// æ·»åŠ ä»»åŠ¡</span>
Â  Â  Â  Â  <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">xxlJobService</span><span class="hljs-selector-class">.add</span>(jobInfo);
Â  Â  }
Â  Â Â 
Â  Â  @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/trigger"</span>)
Â  Â  <span class="hljs-selector-tag">public</span>Â <span class="hljs-selector-tag">ReturnT</span>&lt;<span class="hljs-selector-tag">String</span>&gt;Â <span class="hljs-selector-tag">triggerJob</span>(intÂ id, String executorParam)Â {
Â  Â  Â  Â  <span class="hljs-comment">// æ‰‹åŠ¨è§¦å‘ä»»åŠ¡</span>
Â  Â  Â  Â  <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">xxlJobService</span><span class="hljs-selector-class">.trigger</span>(id, executorParam);
Â  Â  }
Â  Â Â 
Â  Â  @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/log"</span>)
Â  Â  <span class="hljs-selector-tag">public</span>Â <span class="hljs-selector-tag">ReturnT</span>&lt;<span class="hljs-selector-tag">PageInfo</span>&lt;<span class="hljs-selector-tag">XxlJobLog</span>&gt;&gt;Â <span class="hljs-selector-tag">queryLog</span>(
Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@RequestParam</span>(required = false, defaultValue = <span class="hljs-string">"0"</span>)Â intÂ start,
Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@RequestParam</span>(required = false, defaultValue = <span class="hljs-string">"10"</span>)Â intÂ length,
Â  Â  Â  Â  Â  Â  intÂ jobId,Â intÂ logStatus)Â {
Â  Â  Â  Â  <span class="hljs-comment">// æŸ¥è¯¢ä»»åŠ¡æ—¥å¿—</span>
Â  Â  Â  Â  <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">xxlJobService</span><span class="hljs-selector-class">.queryLog</span>(start, length, jobId, logStatus);
Â  Â  }
Â  Â Â 
Â  Â  @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/dashboard"</span>)
Â  Â  <span class="hljs-selector-tag">public</span>Â <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt;Â <span class="hljs-selector-tag">dashboardInfo</span>()Â {
Â  Â  Â  Â  <span class="hljs-comment">// ä»ªè¡¨æ¿æ•°æ®</span>
Â  Â  Â  Â  <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">dashboardMap</span> =Â <span class="hljs-selector-tag">new</span>Â <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// ä»»åŠ¡æ•°é‡ç»Ÿè®¡</span>
Â  Â  Â  Â  <span class="hljs-selector-tag">dashboardMap</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"jobNum"</span>, xxlJobService.<span class="hljs-built_in">count</span>());
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// æ‰§è¡Œå™¨æ•°é‡</span>
Â  Â  Â  Â  <span class="hljs-selector-tag">dashboardMap</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"executorNum"</span>, executorService.<span class="hljs-built_in">count</span>());
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// ä»Šæ—¥è°ƒåº¦æ¬¡æ•°</span>
Â  Â  Â  Â  <span class="hljs-selector-tag">dashboardMap</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"scheduleNumToday"</span>, logService.<span class="hljs-built_in">countToday</span>());
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// è°ƒåº¦æˆåŠŸç‡</span>
Â  Â  Â  Â  <span class="hljs-selector-tag">dashboardMap</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"successRate"</span>, logService.<span class="hljs-built_in">successRate</span>());
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">dashboardMap</span>;
Â  Â  }
}
</code></pre>
<p>ç®¡ç†ç•Œé¢ä¸»è¦åŠŸèƒ½ï¼š</p>
<ol>
<li>1.Â <strong>ä»»åŠ¡ç®¡ç†</strong>ï¼šå¢åˆ æ”¹æŸ¥å®šæ—¶ä»»åŠ¡</li>
<li>2.Â <strong>ä»»åŠ¡æ“ä½œ</strong>ï¼šå¯åŠ¨ã€åœæ­¢ã€æ‰‹åŠ¨è§¦å‘ã€æŸ¥çœ‹æ—¥å¿—</li>
<li>3.Â <strong>æ‰§è¡Œå™¨ç®¡ç†</strong>ï¼šç®¡ç†æ‰§è¡Œå™¨é›†ç¾¤</li>
<li>4.Â <strong>è°ƒåº¦æ—¥å¿—</strong>ï¼šæŸ¥çœ‹æ¯æ¬¡è°ƒåº¦çš„è¯¦ç»†æ—¥å¿—</li>
<li>5.Â <strong>æŠ¥è¡¨ç»Ÿè®¡</strong>ï¼šè°ƒåº¦æ¬¡æ•°ã€æˆåŠŸç‡ç­‰ç»Ÿè®¡ä¿¡æ¯</li>
</ol>
<h3 data-id="heading-13">Elastic-Jobï¼šåŸºäºäº‹ä»¶è¿½è¸ªçš„ç›‘æ§</h3>
<p><code>Elastic-Job</code>æ²¡æœ‰å®˜æ–¹çš„Webç®¡ç†ç•Œé¢ï¼Œä½†æä¾›äº†å®Œå–„çš„äº‹ä»¶è¿½è¸ªå’Œç›‘æ§APIï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Elastic-Jobçš„äº‹ä»¶è¿½è¸ªé…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">EventTraceConfiguration</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Bean</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">JobEventConfiguration</span>Â <span class="hljs-title function_">jobEventConfiguration</span>(<span class="hljs-params"/>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// 1. æ•°æ®åº“äº‹ä»¶è¿½è¸ª</span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">JobEventRdbConfiguration</span>(
Â  Â  Â  Â  Â  Â  dataSource,
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"com.example.job.event"</span>,Â <span class="hljs-comment">// è¡¨åå‰ç¼€</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-literal">true</span>Â  <span class="hljs-comment">// æ˜¯å¦å¯ç”¨</span>
Â  Â  Â  Â  );
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ZooKeeperäº‹ä»¶è¿½è¸ª</span>
Â  Â  Â  Â  <span class="hljs-comment">// return new JobEventZookeeperConfiguration();</span>
Â  Â  }
}

<span class="hljs-comment">// è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">CustomJobEventListener</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">AbstractJobEventListener</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">protected</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">dataSourceStatisticEvent</span>(<span class="hljs-params">JobExecutionEvent jobExecutionEvent</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// ç»Ÿè®¡äº‹ä»¶å¤„ç†</span>
Â  Â  Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ä½œä¸šæ‰§è¡Œäº‹ä»¶: jobName={}, status={}, startTime={}"</span>,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â jobExecutionEvent.<span class="hljs-title function_">getJobName</span>(),
Â  Â  Â  Â  Â  Â  Â  Â  Â jobExecutionEvent.<span class="hljs-title function_">getStatus</span>(),
Â  Â  Â  Â  Â  Â  Â  Â  Â jobExecutionEvent.<span class="hljs-title function_">getStartTime</span>());
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// å¯ä»¥å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ</span>
Â  Â  Â  Â  monitorService.<span class="hljs-title function_">sendMetric</span>(
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"job.execution"</span>,
Â  Â  Â  Â  Â  Â  jobExecutionEvent.<span class="hljs-title function_">isSuccess</span>() ?Â <span class="hljs-number">1</span>Â :Â <span class="hljs-number">0</span>,
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"jobName"</span>, jobExecutionEvent.<span class="hljs-title function_">getJobName</span>()
Â  Â  Â  Â  );
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">protected</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">jobStatusTraceEvent</span>(<span class="hljs-params">JobStatusTraceEvent jobStatusTraceEvent</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// ä½œä¸šçŠ¶æ€è¿½è¸ª</span>
Â  Â  Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ä½œä¸šçŠ¶æ€å˜åŒ–: jobName={}, state={}, message={}"</span>,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â jobStatusTraceEvent.<span class="hljs-title function_">getJobName</span>(),
Â  Â  Â  Â  Â  Â  Â  Â  Â jobStatusTraceEvent.<span class="hljs-title function_">getState</span>(),
Â  Â  Â  Â  Â  Â  Â  Â  Â jobStatusTraceEvent.<span class="hljs-title function_">getMessage</span>());
Â  Â  }
}
</code></pre>
<p><strong>ç›‘æ§èƒ½åŠ›å¯¹æ¯”</strong>ï¼š</p>



































<table><thead><tr><th>ç›‘æ§ç»´åº¦</th><th>XXL-JOB</th><th>Elastic-Job</th></tr></thead><tbody><tr><td><strong>ç®¡ç†ç•Œé¢</strong></td><td><strong>å®Œæ•´çš„Webç®¡ç†æ§åˆ¶å°</strong></td><td>æ— å®˜æ–¹ç•Œé¢ï¼Œéœ€è‡ªè¡Œå¼€å‘</td></tr><tr><td><strong>æ—¥å¿—æŸ¥è¯¢</strong></td><td>å†…ç½®æ—¥å¿—æŸ¥è¯¢åŠŸèƒ½</td><td>ä¾èµ–åº”ç”¨æ—¥å¿—ï¼Œæˆ–é€šè¿‡äº‹ä»¶è¿½è¸ªè¡¨æŸ¥è¯¢</td></tr><tr><td><strong>å®æ—¶ç›‘æ§</strong></td><td>æä¾›ç®€å•çš„ä»ªè¡¨æ¿</td><td>éœ€è¦é›†æˆç¬¬ä¸‰æ–¹ç›‘æ§ç³»ç»Ÿ</td></tr><tr><td><strong>å‘Šè­¦èƒ½åŠ›</strong></td><td>æ”¯æŒé‚®ä»¶å‘Šè­¦</td><td>éœ€è‡ªè¡Œå®ç°å‘Šè­¦é€»è¾‘</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>ç›‘æ§åŠŸèƒ½ç›¸å¯¹å›ºå®š</td><td><strong>äº‹ä»¶ç›‘å¬æœºåˆ¶æ‰©å±•æ€§å¼º</strong></td></tr></tbody></table>
<h2 data-id="heading-14">06 æ€§èƒ½ä¸æ‰©å±•æ€§å¯¹æ¯”</h2>
<p>åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ€§èƒ½å’Œæ‰©å±•æ€§æ˜¯éœ€è¦é‡ç‚¹è€ƒè™‘çš„å› ç´ ã€‚</p>
<h3 data-id="heading-15">æ€§èƒ½å¯¹æ¯”</h3>
<p>é€šè¿‡åŸºå‡†æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸¤ä¸ªæ¡†æ¶çš„å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ€§èƒ½æµ‹è¯•ç¤ºä¾‹ - æ¨¡æ‹Ÿé«˜å¹¶å‘è°ƒåº¦åœºæ™¯</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title">PerformanceTest</span>Â {
Â  Â Â 
Â  Â  @Test
Â  Â  <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">testXXLJobSchedulePerformance</span>()</span>Â {
Â  Â  Â  Â  <span class="hljs-comment">// æµ‹è¯•XXL-JOBçš„è°ƒåº¦æ€§èƒ½</span>
Â  Â  Â  Â  <span class="hljs-built_in">int</span>Â jobCountÂ =Â <span class="hljs-number">1000</span>;Â <span class="hljs-comment">// æ¨¡æ‹Ÿ1000ä¸ªä»»åŠ¡</span>
Â  Â  Â  Â  <span class="hljs-built_in">long</span>Â startTimeÂ =Â System.currentTimeMillis();
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-keyword">for</span>Â (<span class="hljs-built_in">int</span>Â iÂ =Â <span class="hljs-number">0</span>; i &lt; jobCount; i++) {
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// æ¨¡æ‹Ÿè°ƒåº¦ä¸­å¿ƒè§¦å‘ä»»åŠ¡</span>
Â  Â  Â  Â  Â  Â  triggerJob(i);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-built_in">long</span>Â endTimeÂ =Â System.currentTimeMillis();
Â  Â  Â  Â  System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"XXL-JOBè°ƒåº¦"</span>Â + jobCount +Â <span class="hljs-string">"ä¸ªä»»åŠ¡è€—æ—¶: "</span>Â +Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (endTime - startTime) +Â <span class="hljs-string">"ms"</span>);
Â  Â  }
Â  Â Â 
Â  Â  @Test
Â  Â  <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">testElasticJobSchedulePerformance</span>()</span>Â {
Â  Â  Â  Â  <span class="hljs-comment">// æµ‹è¯•Elastic-Jobçš„åˆ†ç‰‡æ‰§è¡Œæ€§èƒ½</span>
Â  Â  Â  Â  <span class="hljs-built_in">int</span>Â dataSizeÂ =Â <span class="hljs-number">100000</span>;Â <span class="hljs-comment">// 10ä¸‡æ¡æ•°æ®</span>
Â  Â  Â  Â  <span class="hljs-built_in">int</span>Â shardTotalÂ =Â <span class="hljs-number">10</span>;Â  Â <span class="hljs-comment">// 10ä¸ªåˆ†ç‰‡</span>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-built_in">long</span>Â startTimeÂ =Â System.currentTimeMillis();
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// æ¨¡æ‹Ÿåˆ†ç‰‡å¤„ç†</span>
Â  Â  Â  Â  <span class="hljs-keyword">for</span>Â (<span class="hljs-built_in">int</span>Â shardIndexÂ =Â <span class="hljs-number">0</span>; shardIndex &lt; shardTotal; shardIndex++) {
Â  Â  Â  Â  Â  Â  processShardData(shardIndex, shardTotal, dataSize / shardTotal);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-built_in">long</span>Â endTimeÂ =Â System.currentTimeMillis();
Â  Â  Â  Â  System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"Elastic-Jobå¤„ç†"</span>Â + dataSize +Â <span class="hljs-string">"æ¡æ•°æ®è€—æ—¶: "</span>Â +Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (endTime - startTime) +Â <span class="hljs-string">"ms"</span>);
Â  Â  }
}
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”æ•°æ®ï¼ˆåŸºäºå…¸å‹åœºæ™¯æµ‹è¯•ï¼‰</strong> ï¼š</p>



































<table><thead><tr><th>æ€§èƒ½æŒ‡æ ‡</th><th>XXL-JOB</th><th>Elastic-Job</th></tr></thead><tbody><tr><td><strong>è°ƒåº¦ååé‡</strong></td><td>å•è°ƒåº¦ä¸­å¿ƒçº¦500-1000ä»»åŠ¡/ç§’</td><td>æ— ä¸­å¿ƒç“¶é¢ˆï¼Œå–å†³äºèŠ‚ç‚¹æ•°é‡</td></tr><tr><td><strong>ä»»åŠ¡è§¦å‘å»¶è¿Ÿ</strong></td><td>10-50æ¯«ç§’</td><td>5-20æ¯«ç§’ï¼ˆæ— ä¸­å¿ƒè½¬å‘ï¼‰</td></tr><tr><td><strong>åˆ†ç‰‡å¤„ç†æ€§èƒ½</strong></td><td>ä¾èµ–æ‰‹åŠ¨åˆ†ç‰‡å®ç°</td><td><strong>ä¼˜ç§€ï¼Œè‡ªåŠ¨è´Ÿè½½å‡è¡¡</strong></td></tr><tr><td><strong>èµ„æºæ¶ˆè€—</strong></td><td>è°ƒåº¦ä¸­å¿ƒéœ€ç‹¬ç«‹èµ„æº</td><td>ä¸ä¸šåŠ¡åº”ç”¨å…±äº«èµ„æº</td></tr><tr><td><strong>æ°´å¹³æ‰©å±•æ€§</strong></td><td>è°ƒåº¦ä¸­å¿ƒæ‰©å±•æœ‰é™</td><td><strong>ä¼˜ç§€ï¼ŒéšèŠ‚ç‚¹å¢åŠ çº¿æ€§æ‰©å±•</strong></td></tr></tbody></table>
<h3 data-id="heading-16">æ‰©å±•æ€§å¯¹æ¯”</h3>
<p><strong>XXL-JOBçš„æ‰©å±•ç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è‡ªå®šä¹‰è·¯ç”±ç­–ç•¥</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">CustomRouteStrategy</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">ExecutorRouter</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">ReturnT</span>&lt;<span class="hljs-title class_">String</span>&gt;Â <span class="hljs-title function_">route</span>(<span class="hljs-params">TriggerParam triggerParam, List&lt;<span class="hljs-built_in">String</span>&gt; addressList</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// è‡ªå®šä¹‰æ‰§è¡Œå™¨è·¯ç”±é€»è¾‘</span>
Â  Â  Â  Â  <span class="hljs-comment">// ä¾‹å¦‚ï¼šæ ¹æ®ä»»åŠ¡å‚æ•°é€‰æ‹©ç‰¹å®šçš„æ‰§è¡Œå™¨</span>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-title class_">String</span>Â jobParamÂ =Â triggerParam.<span class="hljs-title function_">getExecutorParams</span>();
Â  Â  Â  Â  <span class="hljs-keyword">if</span>Â (jobParam.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"priority=high"</span>)) {
Â  Â  Â  Â  Â  Â  <span class="hljs-comment">// é«˜ä¼˜å…ˆçº§ä»»åŠ¡è·¯ç”±åˆ°ä¸“ç”¨æ‰§è¡Œå™¨</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ReturnT</span>&lt;&gt;(<span class="hljs-title function_">findHighPriorityExecutor</span>(addressList));
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨è½®è¯¢ç­–ç•¥</span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ReturnT</span>&lt;&gt;(addressList.<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>));
Â  Â  }
}

<span class="hljs-comment">// è‡ªå®šä¹‰ä»»åŠ¡å¤„ç†å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">CustomJobHandler</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_ inherited__">IJobHandler</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">ReturnT</span>&lt;<span class="hljs-title class_">String</span>&gt;Â <span class="hljs-title function_">execute</span>(<span class="hljs-title class_">String</span> param)Â throwsÂ <span class="hljs-title class_">Exception</span> {
Â  Â  Â  Â  <span class="hljs-comment">// è‡ªå®šä¹‰ä»»åŠ¡æ‰§è¡Œé€»è¾‘</span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ReturnT</span>&lt;&gt;(<span class="hljs-title class_">ReturnT</span>.<span class="hljs-property">SUCCESS_CODE</span>,Â <span class="hljs-string">"è‡ªå®šä¹‰å¤„ç†å®Œæˆ"</span>);
Â  Â  }
}
</code></pre>
<p><strong>Elastic-Jobçš„æ‰©å±•ç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è‡ªå®šä¹‰åˆ†ç‰‡ç­–ç•¥</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">CustomShardingStrategy</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">JobShardingStrategy</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">JobInstance</span>, <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Integer</span>&gt;&gt;Â <span class="hljs-title function_">sharding</span>(<span class="hljs-params">
Â  Â  Â  Â  Â  Â  List&lt;JobInstance&gt; jobInstances,
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">String</span> jobName,
Â  Â  Â  Â  Â  Â  intÂ shardingTotalCount</span>)Â {
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// è‡ªå®šä¹‰åˆ†ç‰‡ç®—æ³•</span>
Â  Â  Â  Â  <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">JobInstance</span>, <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Integer</span>&gt;&gt; result =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">HashMap</span>&lt;&gt;();
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// ç¤ºä¾‹ï¼šæ ¹æ®å®ä¾‹çš„æ€§èƒ½æƒé‡åˆ†é…åˆ†ç‰‡</span>
Â  Â  Â  Â  <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">JobInstance</span>, <span class="hljs-title class_">Integer</span>&gt; weights = <span class="hljs-title function_">getInstanceWeights</span>(jobInstances);
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-comment">// å®ç°åŠ æƒåˆ†ç‰‡ç®—æ³•</span>
Â  Â  Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-title function_">weightedSharding</span>(jobInstances, weights, shardingTotalCount);
Â  Â  }
}

<span class="hljs-comment">// è‡ªå®šä¹‰ä½œä¸šç›‘å¬å™¨</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">CustomJobListener</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">ElasticJobListener</span>Â {
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">beforeJobExecuted</span>(<span class="hljs-params">ShardingContexts shardingContexts</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// ä½œä¸šæ‰§è¡Œå‰çš„é€»è¾‘</span>
Â  Â  Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ä½œä¸š{}å¼€å§‹æ‰§è¡Œï¼Œåˆ†ç‰‡ä¸Šä¸‹æ–‡: {}"</span>,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â shardingContexts.<span class="hljs-title function_">getJobName</span>(), shardingContexts);
Â  Â  }
Â  Â Â 
Â  Â  <span class="hljs-meta">@Override</span>
Â  Â  <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">afterJobExecuted</span>(<span class="hljs-params">ShardingContexts shardingContexts</span>)Â {
Â  Â  Â  Â  <span class="hljs-comment">// ä½œä¸šæ‰§è¡Œåçš„é€»è¾‘</span>
Â  Â  Â  Â  log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ä½œä¸š{}æ‰§è¡Œå®Œæˆ"</span>, shardingContexts.<span class="hljs-title function_">getJobName</span>());
Â  Â  }
}
</code></pre>
<h2 data-id="heading-17">07 å®æˆ˜é€‰å‹æŒ‡å—</h2>
<p>åŸºäºæˆ‘å¤šå¹´çš„å¼€å‘å’Œæ¶æ„ç»éªŒï¼Œæ€»ç»“å‡ºä»¥ä¸‹é€‰å‹å»ºè®®ï¼š</p>
<h3 data-id="heading-18">åœºæ™¯ä¸€ï¼šä¸­å°å‹é¡¹ç›®ï¼Œå¿«é€Ÿä¸Šçº¿</h3>
<ul>
<li>â€¢Â <strong>æ¨è</strong>ï¼š<code>XXL-JOB</code></li>
<li>â€¢Â <strong>ç†ç”±</strong>ï¼šå¼€ç®±å³ç”¨ï¼Œæœ‰å®Œå–„çš„ç®¡ç†ç•Œé¢ï¼Œå­¦ä¹ æˆæœ¬ä½</li>
<li>â€¢Â <strong>å…¸å‹åœºæ™¯</strong>ï¼šä¼ä¸šå†…éƒ¨ç®¡ç†ç³»ç»Ÿã€ä¸­å°å‹ç”µå•†ã€å†…å®¹ç®¡ç†ç³»ç»Ÿ</li>
</ul>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># å¿«é€Ÿå¯åŠ¨é…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">xxl:</span>
Â  <span class="hljs-attr">job:</span>
Â  Â  <span class="hljs-attr">admin:</span>
Â  Â  Â  <span class="hljs-string">addresses:</span>Â <span class="hljs-string">http://localhost:8080/xxl-job-admin</span>
Â  Â  <span class="hljs-attr">executor:</span>
Â  Â  Â  <span class="hljs-string">appname:</span>Â <span class="hljs-string">xxl-job-executor-demo</span>
Â  Â  Â  <span class="hljs-string">address:</span>Â 
Â  Â  Â  <span class="hljs-string">ip:</span>Â 
Â  Â  Â  <span class="hljs-string">port:</span>Â <span class="hljs-number">9999</span>
Â  Â  Â  <span class="hljs-string">logpath:</span>Â <span class="hljs-string">/data/applogs/xxl-job/jobhandler</span>
Â  Â  Â  <span class="hljs-string">logretentiondays:</span>Â <span class="hljs-number">30</span>
</code></pre>
<h3 data-id="heading-19">åœºæ™¯äºŒï¼šå¤§æ•°æ®é‡å¤„ç†ï¼Œéœ€è¦å¼¹æ€§æ‰©ç¼©å®¹</h3>
<ul>
<li>â€¢Â <strong>æ¨è</strong>ï¼š<code>Elastic-Job</code></li>
<li>â€¢Â <strong>ç†ç”±</strong>ï¼šæ™ºèƒ½åˆ†ç‰‡ï¼Œè‡ªåŠ¨è´Ÿè½½å‡è¡¡ï¼Œé€‚åˆå¤§æ•°æ®å¤„ç†</li>
<li>â€¢Â <strong>å…¸å‹åœºæ™¯</strong>ï¼šæ•°æ®æ¸…æ´—ã€æŠ¥è¡¨ç”Ÿæˆã€æ—¥å¿—åˆ†æã€ETLä»»åŠ¡</li>
</ul>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¤§æ•°æ®å¤„ç†ä½œä¸šé…ç½®</span>
<span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-title class_">DataflowJob</span>Â <span class="hljs-title function_">dataflowJob</span>(<span class="hljs-params"/>)Â {
Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">BigDataProcessingJob</span>();
}

<span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-title class_">LiteJobConfiguration</span>Â <span class="hljs-title function_">bigDataJobConfig</span>(<span class="hljs-params"/>)Â {
Â  Â  <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">LiteJobConfiguration</span>.<span class="hljs-title function_">newBuilder</span>(
Â  Â  Â  Â  <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">DataflowJobConfiguration</span>(
Â  Â  Â  Â  Â  Â  <span class="hljs-title class_">JobCoreConfiguration</span>.<span class="hljs-title function_">newBuilder</span>(
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-string">"bigDataJob"</span>,Â 
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-string">"0 0 2 * * ?"</span>,Â  <span class="hljs-comment">// æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-number">10</span>Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 10ä¸ªåˆ†ç‰‡</span>
Â  Â  Â  Â  Â  Â  ).<span class="hljs-title function_">build</span>(),
Â  Â  Â  Â  Â  Â  <span class="hljs-title class_">BigDataProcessingJob</span>.<span class="hljs-property">class</span>.<span class="hljs-title function_">getCanonicalName</span>()
Â  Â  Â  Â  )
Â  Â  ).<span class="hljs-title function_">monitorPort</span>(<span class="hljs-number">9888</span>)Â  <span class="hljs-comment">// ç›‘æ§ç«¯å£</span>
Â  Â  Â .<span class="hljs-title function_">overwrite</span>(<span class="hljs-literal">true</span>)
Â  Â  Â .<span class="hljs-title function_">build</span>();
}
</code></pre>
<h3 data-id="heading-20">åœºæ™¯ä¸‰ï¼šå·²æœ‰ZooKeeperé›†ç¾¤çš„æŠ€æœ¯æ ˆ</h3>
<ul>
<li>â€¢Â <strong>æ¨è</strong>ï¼š<code>Elastic-Job</code></li>
<li>â€¢Â <strong>ç†ç”±</strong>ï¼šå¤ç”¨ç°æœ‰åŸºç¡€è®¾æ–½ï¼Œé™ä½è¿ç»´å¤æ‚åº¦</li>
<li>â€¢Â <strong>å…¸å‹åœºæ™¯</strong>ï¼šå¤§å‹äº’è”ç½‘å…¬å¸ã€é‡‘èç³»ç»Ÿã€å·²æœ‰ZooKeeperæœåŠ¡å‘ç°çš„ç³»ç»Ÿ</li>
</ul>
<h3 data-id="heading-21">åœºæ™¯å››ï¼šéœ€è¦ç²¾ç»†åŒ–ç®¡ç†ä¸ç›‘æ§</h3>
<ul>
<li>â€¢Â <strong>æ¨è</strong>ï¼š<code>XXL-JOB</code></li>
<li>â€¢Â <strong>ç†ç”±</strong>ï¼šæä¾›å®Œæ•´çš„Webç®¡ç†ç•Œé¢ï¼Œä¾¿äºè¿ç»´</li>
<li>â€¢Â <strong>å…¸å‹åœºæ™¯</strong>ï¼šå¯¹è¿ç»´å‹å¥½æ€§è¦æ±‚é«˜çš„é¡¹ç›®ã€å¤šå›¢é˜Ÿåä½œé¡¹ç›®</li>
</ul>
<h3 data-id="heading-22">åœºæ™¯äº”ï¼šæ··åˆæ¶æ„çš„æŠ˜ä¸­æ–¹æ¡ˆ</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæœ‰æ—¶å¯ä»¥é‡‡ç”¨æ··åˆæ–¹æ¡ˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b82cc83bc204986bb6771463a25d3e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771212918&amp;x-signature=6FythrpPevMfftd%2BM4j2NocVfpQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨è¿™ç§æ··åˆæ¶æ„ä¸­ï¼š</p>
<ol>
<li>1.Â <strong>å¸¸è§„å®šæ—¶ä»»åŠ¡</strong>ï¼šä½¿ç”¨<code>XXL-JOB</code>ï¼Œä¾¿äºç®¡ç†å’Œç›‘æ§</li>
<li>2.Â <strong>å¤§æ•°æ®åˆ†ç‰‡ä»»åŠ¡</strong>ï¼šä½¿ç”¨<code>Elastic-Job</code>ï¼Œå‘æŒ¥å…¶åˆ†å¸ƒå¼å¤„ç†ä¼˜åŠ¿</li>
<li>3.Â <strong>ä¼˜åŠ¿äº’è¡¥</strong>ï¼šç»“åˆä¸¤è€…çš„ä¼˜ç‚¹ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚</li>
</ol>
<p>æ›´å¤šé¡¹ç›®å®æˆ˜åœ¨ï¼š<a href="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" title="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" target="_blank">javaçªå‡»é˜Ÿ</a></p>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p>ç»è¿‡å…¨é¢çš„å¯¹æ¯”åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š</p>
<p><strong>XXL-JOBæ›´é€‚åˆ</strong>ï¼š</p>
<ul>
<li>â€¢ ä¸­å°å‹é¡¹ç›®ï¼Œéœ€è¦å¿«é€Ÿä¸Šæ‰‹</li>
<li>â€¢ å¯¹è¿ç»´ç®¡ç†ç•Œé¢æœ‰è¦æ±‚çš„å›¢é˜Ÿ</li>
<li>â€¢ ä»»åŠ¡ç±»å‹ç›¸å¯¹ç®€å•ï¼Œä¸éœ€è¦å¤æ‚åˆ†ç‰‡é€»è¾‘</li>
<li>â€¢ æŠ€æœ¯æ ˆä¸­å·²æœ‰MySQLï¼Œä¸æƒ³å¼•å…¥ZooKeeper</li>
</ul>
<p><strong>Elastic-Jobæ›´é€‚åˆ</strong>ï¼š</p>
<ul>
<li>â€¢ å¤§æ•°æ®é‡å¤„ç†åœºæ™¯ï¼Œéœ€è¦æ™ºèƒ½åˆ†ç‰‡</li>
<li>â€¢ å·²æœ‰ZooKeeperåŸºç¡€è®¾æ–½çš„å›¢é˜Ÿ</li>
<li>â€¢ éœ€è¦é«˜åº¦å¼¹æ€§ä¼¸ç¼©çš„äº‘åŸç”Ÿç¯å¢ƒ</li>
<li>â€¢ å¯¹æ€§èƒ½è¦æ±‚æé«˜ï¼Œéœ€è¦å»ä¸­å¿ƒåŒ–æ¶æ„</li>
</ul>
<p><strong>æŠ€æœ¯é€‰å‹çš„æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ol>
<li>1.Â <strong>æ²¡æœ‰æœ€å¥½çš„æ¡†æ¶ï¼Œåªæœ‰æœ€é€‚åˆçš„æ¡†æ¶</strong></li>
<li>2.Â <strong>è€ƒè™‘å›¢é˜ŸæŠ€æœ¯æ ˆå’Œè¿ç»´èƒ½åŠ›</strong></li>
<li>3.Â <strong>æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©ï¼Œè€Œä¸æ˜¯æŠ€æœ¯æ½®æµ</strong></li>
<li>4.Â <strong>ç®€å•æ€§åŸåˆ™ï¼šåœ¨æ»¡è¶³éœ€æ±‚çš„å‰æä¸‹ï¼Œé€‰æ‹©æ›´ç®€å•çš„æ–¹æ¡ˆ</strong></li>
</ol>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­å¯èƒ½ä¼šçº ç»“äºæŠ€æœ¯é€‰å‹ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š<strong>å…ˆæ˜ç¡®ä¸šåŠ¡éœ€æ±‚ï¼Œå†é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆ</strong>ã€‚</p>
<p>å¦‚æœä½ éœ€è¦ä¸€ä¸ªå¼€ç®±å³ç”¨ã€ç®¡ç†æ–¹ä¾¿çš„è°ƒåº¦ç³»ç»Ÿï¼Œé€‰<code>XXL-JOB</code>ï¼›å¦‚æœä½ è¦å¤„ç†æµ·é‡æ•°æ®ã€éœ€è¦å¼¹æ€§ä¼¸ç¼©ï¼Œé€‰<code>Elastic-Job</code>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[318. Java Stream API - æ·±å…¥ç†è§£ Java Stream çš„ä¸­é—´ Collector â€”â€” mappingã€filtering å’Œ fla]]></title>    <link>https://juejin.cn/post/7603781883974582291</link>    <guid>https://juejin.cn/post/7603781883974582291</guid>    <pubDate>2026-02-09T00:56:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603781883974582291" data-draft-id="7604084016509648937" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="318. Java Stream API - æ·±å…¥ç†è§£ Java Stream çš„ä¸­é—´ Collector â€”â€” mappingã€filtering å’Œ fla"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-02-09T00:56:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CacheæŠ€æœ¯åˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1662117313262776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            318. Java Stream API - æ·±å…¥ç†è§£ Java Stream çš„ä¸­é—´ Collector â€”â€” mappingã€filtering å’Œ fla
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117313262776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CacheæŠ€æœ¯åˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T00:56:16.000Z" title="Mon Feb 09 2026 00:56:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">318. Java Stream API - æ·±å…¥ç†è§£ Java Stream çš„ä¸­é—´ Collector â€”â€” <code>mapping</code>ã€<code>filtering</code> å’Œ <code>flatMapping</code></h2>
<p>åœ¨ä½¿ç”¨ <code>Stream</code> çš„ <code>collect()</code> æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸æ¥è§¦çš„ <code>Collector</code> æ˜¯ <strong>ç»ˆç«¯æ“ä½œï¼ˆ<code>terminal operations</code>ï¼‰</strong>ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><code>Collectors.counting()</code>ï¼šè®¡ç®—æ•°é‡ âœ…</li>
<li><code>Collectors.joining()</code>ï¼šæ‹¼æ¥å­—ç¬¦ä¸² âœ…</li>
<li><code>Collectors.toList()</code>ã€<code>toSet()</code>ã€<code>toMap()</code>ï¼šæ”¶é›†åˆ°é›†åˆ âœ…</li>
</ul>
<p>ä½†é™¤äº†è¿™äº›ç»ˆç«¯æ“ä½œå¤–ï¼Œ<code>Java</code> çš„ <code>Collector</code> <code>API</code> è¿˜æä¾›äº†ä¸€äº› <strong>ä¸­é—´ <code>Collector</code></strong>ï¼Œå¦‚ï¼š</p>
<ul>
<li><code>mapping</code></li>
<li><code>filtering</code></li>
<li><code>flatMapping</code></li>
</ul>
<p>è¿™äº› Collector æœ¬èº«æ— æ³•å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…åˆä¸€ä¸ª <strong>ä¸‹æ¸¸ Collectorï¼ˆdownstream collectorï¼‰</strong>ã€‚ä½ å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>ğŸ¯ â€œæˆ‘ä»¬åœ¨æ”¶é›†ä¹‹å‰ï¼Œå…ˆåŠ å·¥ä¸€ä¸‹å†è£…è¢‹ã€‚â€</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ§­ ä¸ºä»€ä¹ˆéœ€è¦ä¸­é—´ Collectorï¼Ÿ</h3>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä»…æƒ³å°†å…ƒç´ åˆ†ç»„æˆ–æ”¶é›†ï¼Œè¿˜æƒ³åœ¨æ”¶é›†ä¹‹å‰â€œå¤„ç†ä¸€ä¸‹â€ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>æŠŠå­—ç¬¦ä¸²å˜æˆå¤§å†™å†æ”¶é›†</li>
<li>è¿‡æ»¤æ‰ä¸æƒ³è¦çš„å€¼å†åˆ†ç»„</li>
<li>å°†ä¸€ä¸ªå¯¹è±¡æ˜ å°„ä¸ºå…¶æŸä¸ªå­—æ®µå†æ”¾è¿› Map</li>
</ul>
<p>è¿™æ—¶å€™ä¸­é—´ Collector å°±ç™»åœºäº†ï¼</p>
<hr/>
<h3 data-id="heading-2">ğŸ§ª ç¤ºä¾‹ 1ï¼šä½¿ç”¨ <code>mapping()</code> åšæ•°æ®è½¬æ¢</h3>
<p>å‡è®¾ä½ æœ‰ä¸€å †è‹±æ–‡å•è¯å­—ç¬¦ä¸²ï¼Œæƒ³å°†å®ƒä»¬å˜æˆå¤§å†™å­—æ¯å¹¶æ”¾è¿›åˆ—è¡¨ä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java">Collection&lt;String&gt; strings = List.of(<span class="hljs-string">"one"</span>, <span class="hljs-string">"two"</span>, <span class="hljs-string">"three"</span>, <span class="hljs-string">"four"</span>, <span class="hljs-string">"five"</span>, <span class="hljs-string">"six"</span>, 
                                     <span class="hljs-string">"seven"</span>, <span class="hljs-string">"eight"</span>, <span class="hljs-string">"nine"</span>, <span class="hljs-string">"ten"</span>, <span class="hljs-string">"eleven"</span>, <span class="hljs-string">"twelve"</span>);

List&lt;String&gt; result = strings.stream()
    .collect(Collectors.mapping(String::toUpperCase, Collectors.toList()));

System.out.println(<span class="hljs-string">"result = "</span> + result);
</code></pre>
<h4 data-id="heading-3">ğŸ§¾ è¾“å‡ºï¼š</h4>
<pre><code class="hljs language-java" lang="java">result = [ONE, TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE, TEN, ELEVEN, TWELVE]
</code></pre>
<p><strong>è§£é‡Šï¼š</strong></p>
<ul>
<li><code>mapping(String::toUpperCase, ...)</code> æ˜¯ä¸­é—´ Collectorï¼Œå…ˆæŠŠå…ƒç´ å˜ä¸ºå¤§å†™ã€‚</li>
<li><code>Collectors.toList()</code> æ˜¯ç»ˆç«¯ Collectorï¼ŒæŠŠå¤„ç†ç»“æœè£…è¿›åˆ—è¡¨ã€‚</li>
</ul>
<p>ä½ å¯ä»¥æŠŠè¿™çœ‹ä½œæ˜¯â€œåŠ å·¥å‚ + è£…ç®±å‚â€çš„ç»„åˆ ğŸ¤–ğŸ“¦ã€‚</p>
<hr/>
<h3 data-id="heading-4">ğŸ§ª ç¤ºä¾‹ 2ï¼šç»“åˆ <code>groupingBy()</code> å’Œ <code>mapping()</code> è§£å†³å¤æ‚ Map è½¬æ¢é—®é¢˜</h3>
<p>å‡è®¾ä½ è¦ç»Ÿè®¡ä¸åŒé•¿åº¦çš„å•è¯å‡ºç°æ¬¡æ•°ï¼ˆå³ç›´æ–¹å›¾ï¼‰ï¼Œç„¶åä½ æƒ³<strong>å€’è½¬è¿™ä¸ª Map</strong>ï¼Œä»¥â€œæ¬¡æ•°â€ä¸º keyï¼Œå¾—åˆ°è¿™äº›æ¬¡æ•°å¯¹åº”çš„â€œé•¿åº¦â€ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç›´æ–¹å›¾ <code>Map&lt;Integer, Long&gt;</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java">Map&lt;Integer, Long&gt; histogram = strings.stream()
    .collect(Collectors.groupingBy(String::length, Collectors.counting()));
</code></pre>
<p>ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ <code>record</code> å°† Map entry å°è£…æˆå¯¹è±¡ï¼Œæ–¹ä¾¿å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">record</span> <span class="hljs-title class_">NumberOfLength</span><span class="hljs-params">(<span class="hljs-type">int</span> length, <span class="hljs-type">long</span> number)</span> {
    <span class="hljs-keyword">static</span> NumberOfLength <span class="hljs-title function_">fromEntry</span><span class="hljs-params">(Map.Entry&lt;Integer, Long&gt; entry)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NumberOfLength</span>(entry.getKey(), entry.getValue());
    }
}
</code></pre>
<p>ç¬¬ä¸‰æ­¥ï¼šå€’è½¬ Mapï¼Œä»¥â€œæ¬¡æ•°â€ä¸º keyï¼Œç”¨ <code>mapping()</code> æå– <code>length</code> å­—æ®µï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">var</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> histogram.entrySet().stream()
    .map(NumberOfLength::fromEntry)
    .collect(Collectors.groupingBy(
        NumberOfLength::number, <span class="hljs-comment">// æŒ‰å‡ºç°æ¬¡æ•°åˆ†ç»„</span>
        Collectors.mapping(NumberOfLength::length, Collectors.toList()) <span class="hljs-comment">// æå– length æ”¾è¿› List</span>
    ));

map.forEach((key, value) -&gt; System.out.println(key + <span class="hljs-string">" :: "</span> + value));
</code></pre>
<h4 data-id="heading-5">ğŸ” è¾“å‡ºç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">2</span> :: [<span class="hljs-number">6</span>]
<span class="hljs-number">3</span> :: [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
</code></pre>
<p>è¿™è¡¨ç¤ºï¼šé•¿åº¦ä¸º 3ã€4ã€5 çš„å•è¯å„å‡ºç°äº† 3 æ¬¡ï¼›é•¿åº¦ä¸º 6 çš„å‡ºç°äº† 2 æ¬¡ã€‚</p>
<hr/>
<h3 data-id="heading-6">ğŸ† æå–æœ€å¤§å€¼å¯¹åº”çš„ keyï¼ˆæ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ä¸²é•¿åº¦ï¼‰</h3>
<pre><code class="hljs language-java" lang="java">Map.Entry&lt;Long, List&lt;Integer&gt;&gt; result =
    map.entrySet().stream()
        .max(Map.Entry.comparingByKey()) <span class="hljs-comment">// æ‰¾åˆ°æ¬¡æ•°æœ€å¤šçš„ group</span>
        .orElseThrow();

System.out.println(<span class="hljs-string">"result = "</span> + result);
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-java" lang="java">result = <span class="hljs-number">3</span>=[<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
</code></pre>
<p>ä½ å°±å¾—åˆ°äº†å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ä¸²é•¿åº¦ï¼ˆ3 æ¬¡ï¼‰ï¼šé•¿åº¦ä¸º 3ã€4ã€5 çš„å•è¯ã€‚</p>
<hr/>
<h3 data-id="heading-7">ğŸ§ª ç¤ºä¾‹ 3ï¼šä½¿ç”¨ <code>filtering()</code> æ”¶é›†ç‰¹å®šæ¡ä»¶çš„å€¼</h3>
<ul>
<li>java9+å¯ç”¨</li>
</ul>
<pre><code class="hljs language-java" lang="java">Map&lt;Integer, List&lt;String&gt;&gt; filteredGrouped =
    strings.stream()
           .collect(Collectors.groupingBy(
               String::length,
               Collectors.filtering(s -&gt; s.contains(<span class="hljs-string">"e"</span>), Collectors.toList())
           ));

System.out.println(filteredGrouped);
</code></pre>
<p>ğŸ“Œ è§£é‡Šï¼š</p>
<ul>
<li><code>filtering()</code> æ˜¯ä¸€ä¸ªä¸­é—´ Collectorï¼Œåªæ”¶é›†åŒ…å«å­—æ¯ <code>'e'</code> çš„å•è¯ã€‚</li>
<li>æœ€ç»ˆç»“æœè¿˜æ˜¯ä¸€ä¸ªåˆ†ç»„ï¼Œä½†æ¯ç»„åªç•™ä¸‹ç¬¦åˆæ¡ä»¶çš„å€¼ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">ğŸ§ª ç¤ºä¾‹ 4ï¼šä½¿ç”¨ <code>flatMapping()</code> å°†åµŒå¥—é›†åˆæ‰“å¹³</h3>
<ul>
<li>java9+å¯ç”¨</li>
</ul>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ª <code>List&lt;List&lt;String&gt;&gt;</code>ï¼Œæƒ³æ‰“å¹³æˆä¸€ä¸ªå¤§åˆ—è¡¨ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>
<pre><code class="hljs language-java" lang="java">List&lt;List&lt;String&gt;&gt; nested = List.of(
    List.of(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>),
    List.of(<span class="hljs-string">"c"</span>),
    List.of(<span class="hljs-string">"d"</span>, <span class="hljs-string">"e"</span>, <span class="hljs-string">"f"</span>)
);

List&lt;String&gt; flat = nested.stream()
    .collect(Collectors.flatMapping(List::stream, Collectors.toList()));

System.out.println(flat);
</code></pre>
<p>ğŸ“Œ è¾“å‡ºï¼š</p>
<pre><code class="hljs language-java" lang="java">[a, b, c, d, e, f]
</code></pre>
<hr/>
<h3 data-id="heading-9">ğŸ¯ æ€»ç»“ä¸åŸ¹è®­å°è´´å£«</h3>

























<table><thead><tr><th>Collector ç±»å‹</th><th>æè¿°</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>mapping()</code></td><td>å°†å…ƒç´ æ˜ å°„åå†æ”¶é›†</td><td>æå–å­—æ®µã€æ ¼å¼è½¬æ¢</td></tr><tr><td><code>filtering()</code></td><td>ç­›é€‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ å†æ”¶é›†</td><td>æ¡ä»¶æ”¶é›†</td></tr><tr><td><code>flatMapping()</code></td><td>æ‰å¹³åŒ–æµç»“æ„åæ”¶é›†</td><td>åµŒå¥—é›†åˆã€å¤šä¸ªå­é¡¹çš„åˆå¹¶</td></tr></tbody></table>
<p>âœ… è¿™äº›ä¸­é—´ Collector æ˜¯åˆ›å»ºåµŒå¥—ç»“æ„å’Œå¤„ç† Map æ•°æ®çš„å¼ºå¤§å·¥å…·ã€‚
âœ… å¤šå±‚åµŒå¥—ä¹Ÿæ²¡ä»€ä¹ˆå¯æ€•çš„ï¼Œæœ¬è´¨æ˜¯â€œå…ˆåŠ å·¥åè£…è¢‹â€çš„ç»„åˆæ¨¡å‹ã€‚
âœ… <code>groupingBy()</code> æ­é…ä¸­é—´ Collector æ˜¯æµå¤„ç†ä¸­æœ€å¸¸è§ä¹Ÿæœ€å¼ºå¤§çš„ç”¨æ³•ä¹‹ä¸€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Skills Desktopï¼šä¸€ä¸ªç”¨æ¥ç®¡ç† Skill çš„æ¡Œé¢å·¥å…·]]></title>    <link>https://juejin.cn/post/7604080364353667099</link>    <guid>https://juejin.cn/post/7604080364353667099</guid>    <pubDate>2026-02-09T02:22:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604080364353667099" data-draft-id="7604646882015248435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Skills Desktopï¼šä¸€ä¸ªç”¨æ¥ç®¡ç† Skill çš„æ¡Œé¢å·¥å…·"/> <meta itemprop="keywords" content="Cursor,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-09T02:22:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HBLOG"/> <meta itemprop="url" content="https://juejin.cn/user/131597124767479"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Skills Desktopï¼šä¸€ä¸ªç”¨æ¥ç®¡ç† Skill çš„æ¡Œé¢å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597124767479/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HBLOG
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:22:30.000Z" title="Mon Feb 09 2026 02:22:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒSkill ç”¨å¾—å¤šäº†ï¼Œå¾ˆå®¹æ˜“å˜æˆä¸€ç§â€œçœ‹ä¼¼éƒ½åœ¨ï¼Œå…¶å®å¾ˆä¹±â€çš„çŠ¶æ€ã€‚</p>
<ul>
<li>æœ‰çš„åœ¨ GitHub ä»“åº“é‡Œ</li>
<li>æœ‰çš„æ‹·åœ¨æœ¬åœ°æŸä¸ªç›®å½•</li>
<li>æœ‰çš„åªå­˜åœ¨äºæ—§é¡¹ç›®é‡Œ</li>
</ul>
<p><strong>Skills Desktop</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fskills.lc%2Fdesktop%25EF%25BC%2589%25E5%25B0%25B1%25E6%2598%25AF%25E5%259C%25A8%25E8%25BF%2599%25E7%25A7%258D%25E6%2583%2585%25E5%2586%25B5%25E4%25B8%258B%25E5%2587%25BA%25E7%258E%25B0%25E7%259A%2584%25E3%2580%2582" target="_blank" title="https://skills.lc/desktop%EF%BC%89%E5%B0%B1%E6%98%AF%E5%9C%A8%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E5%87%BA%E7%8E%B0%E7%9A%84%E3%80%82" ref="nofollow noopener noreferrer">skills.lc/desktopï¼‰å°±æ˜¯åœ¨â€¦</a><br/>
å®ƒä¸æ˜¯ç¼–è¾‘å™¨ï¼Œä¹Ÿä¸æ˜¯è¿è¡Œç¯å¢ƒï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>ä¸“é—¨ç”¨æ¥ç®¡ç† Skill çš„æ¡Œé¢å®¢æˆ·ç«¯</strong>ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2026%2F02%2Fimage-3.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2026/02/image-3.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b61b6b812c584ecfad7b0ed30571f903~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208550&amp;x-signature=VazL%2FUobzhhGG%2ByrwZfoRBA%2BehE%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-0">å®ƒä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜</h2>
<p>ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<blockquote>
<p><strong>è®© Skill åœ¨æœ¬åœ°æœ‰ä¸€ä¸ªâ€œå›ºå®šçš„ä½ç½®å’Œç»Ÿä¸€çš„ç®¡ç†æ–¹å¼â€ã€‚</strong></p>
</blockquote>
<p>ä¸éœ€è¦å†è®°è·¯å¾„ï¼Œä¹Ÿä¸ç”¨åå¤å¤åˆ¶æ–‡ä»¶ã€‚</p>
<h2 data-id="heading-1">æœ¬åœ°é›†ä¸­ç®¡ç† Skill</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2026%2F02%2Fimage-2.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2026/02/image-2.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b53d354829854f28aa93f6be65dc666f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208550&amp;x-signature=1nwzfcW0bjrqYkoImx9DFep7HlY%3D" alt="" loading="lazy"/></a></p>
<p>Skills Desktop åšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æŠŠ Skill ç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ªåœ°æ–¹ã€‚</p>
<p>ä½ å¯ä»¥ï¼š</p>
<ul>
<li>æŠŠ Skill å®‰è£…åˆ°æœ¬åœ°</li>
<li>çœ‹åˆ°å½“å‰æœ‰å“ªäº› Skill</li>
<li>æŒ‰ç”¨é€”æˆ–é¡¹ç›®å»æ•´ç†</li>
</ul>
<p>å®ƒæ›´åƒä¸€ä¸ª <strong>æœ¬åœ° Skill ä»“åº“ç®¡ç†å™¨</strong>ï¼Œè€Œä¸æ˜¯å±•ç¤ºå·¥å…·ã€‚</p>
<h2 data-id="heading-2">ä¸ä¾èµ–æµè§ˆå™¨ï¼Œæ›´è´´è¿‘å·¥ä½œæµ</h2>
<p>å¾ˆå¤šæ—¶å€™ä½ å¹¶ä¸æƒ³æ‰“å¼€ç½‘é¡µï¼š</p>
<ul>
<li>æ­£åœ¨å†™ä»£ç </li>
<li>æ­£åœ¨è°ƒè¯•è„šæœ¬</li>
<li>æ­£åœ¨åˆ‡é¡¹ç›®</li>
</ul>
<p>Skills Desktop æ˜¯å¸¸é©»æœ¬åœ°çš„ï¼š</p>
<ul>
<li>æ‰“å¼€é€Ÿåº¦å¿«</li>
<li>ä¸ä¾èµ–ç½‘ç»œ</li>
<li>ä¸ç”¨æ¥å›åˆ‡æ ‡ç­¾é¡µ</li>
</ul>
<p>éœ€è¦ç”¨ Skill çš„æ—¶å€™ï¼Œç›´æ¥å°±åœ¨æ¡Œé¢ç«¯å¤„ç†ã€‚</p>
<h2 data-id="heading-3">ä¸å¼ºç»‘å®šå·¥å…·å’Œæ¡†æ¶</h2>
<p>Skills Desktop ä¸è¦æ±‚ä½ ï¼š</p>
<ul>
<li>æ¢ IDE</li>
<li>ç”¨ç‰¹å®šæ¨¡å‹</li>
<li>ç»‘å®šæŸä¸ªå¹³å°</li>
</ul>
<p>å®ƒåªè´Ÿè´£ä¸€ä»¶äº‹ï¼š<br/>
<strong>æŠŠ Skill å‡†å¤‡å¥½ï¼Œäº¤ç»™ä½ ç°æœ‰çš„å·¥å…·å»ç”¨ã€‚</strong></p>
<p>è¿™ä¸€ç‚¹åœ¨å¤šé¡¹ç›®ã€å¤šç¯å¢ƒä¸‹ç‰¹åˆ«é‡è¦ã€‚</p>
<h2 data-id="heading-4">ç¦»çº¿å¯ç”¨</h2>
<p>Skill ä¸€æ—¦åŒæ­¥åˆ°æœ¬åœ°ï¼š</p>
<ul>
<li>ä¸éœ€è¦è”ç½‘</li>
<li>ä¸ä¾èµ–è¿œç¨‹ä»“åº“</li>
<li>ä¸å½±å“æ—¥å¸¸å¼€å‘</li>
</ul>
<p>å¯¹äºç»å¸¸å‡ºå·®ã€ç½‘ç»œä¸ç¨³å®šï¼Œæˆ–è€…åªæ˜¯æƒ³ä¿æŒå·¥ä½œèŠ‚å¥çš„äººæ¥è¯´ï¼Œè¿™ç‚¹å¾ˆå®åœ¨ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2026%2F02%2Fimage-4.png" target="_blank" title="https://admin.liuhaihua.cn/wp-content/uploads/2026/02/image-4.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9f801406cfd4522b8075a4292bc2943~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208550&amp;x-signature=46tnfy%2BNJ7OqZS8urDLKRhBWdrg%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-5">é€‚åˆä»€ä¹ˆäººç”¨</h2>
<p>Skills Desktop æ›´é€‚åˆï¼š</p>
<ul>
<li>æœ¬åœ°æœ‰å¤šä¸ªé¡¹ç›®çš„äºº</li>
<li>éœ€è¦é•¿æœŸç»´æŠ¤ Skill çš„äºº</li>
<li>ä¸æƒ³æ¯æ¬¡éƒ½é‡æ–°æ•´ç† Prompt / Skill çš„äºº</li>
<li>å¸Œæœ›æŠŠ Skill å½“æˆå·¥å…·ï¼Œè€Œä¸æ˜¯ç´ æçš„äºº</li>
</ul>
<p>å¦‚æœä½ åªæ˜¯å¶å°”å¤åˆ¶ä¸€æ®µæç¤ºè¯ï¼Œå®ƒå¯èƒ½ä¸æ˜¯å¿…é¡»çš„ï¼›<br/>
ä½†å¦‚æœ Skill å·²ç»æˆäº†ä½ å·¥ä½œçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä¼šçœæ‰ä¸å°‘éº»çƒ¦ã€‚</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>Skills Desktop å¹¶ä¸å¤æ‚ï¼Œä¹Ÿä¸è¯•å›¾åšâ€œä¸‡èƒ½å·¥å…·â€ã€‚</p>
<p>å®ƒåªæ˜¯æŠŠä¸€ä»¶ä¸€ç›´å¾ˆä¹±çš„äº‹æƒ…â€”â€”<br/>
<strong>Skill çš„æœ¬åœ°ç®¡ç†</strong>ï¼Œå˜å¾—æ¸…æ™°ã€æœ‰åºã€å¯æŒç»­ã€‚</p>
<p>å®˜ç½‘ï¼š<br/>
ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fskills.lc%2Fdesktop" target="_blank" title="https://skills.lc/desktop" ref="nofollow noopener noreferrer">skills.lc/desktop</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ GPIO å…«ç§å·¥ä½œæ¨¡å¼ï¼šä»åŸç†åˆ°å®æˆ˜åº”ç”¨]]></title>    <link>https://juejin.cn/post/7603783314713624612</link>    <guid>https://juejin.cn/post/7603783314713624612</guid>    <pubDate>2026-02-09T01:11:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603783314713624612" data-draft-id="7603911453704978475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ GPIO å…«ç§å·¥ä½œæ¨¡å¼ï¼šä»åŸç†åˆ°å®æˆ˜åº”ç”¨"/> <meta itemprop="keywords" content="åµŒå…¥å¼"/> <meta itemprop="datePublished" content="2026-02-09T01:11:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="whatä¸¶k"/> <meta itemprop="url" content="https://juejin.cn/user/2578801884147418"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ GPIO å…«ç§å·¥ä½œæ¨¡å¼ï¼šä»åŸç†åˆ°å®æˆ˜åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2578801884147418/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    whatä¸¶k
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T01:11:23.000Z" title="Mon Feb 09 2026 01:11:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥ç†è§£ GPIO å…«ç§å·¥ä½œæ¨¡å¼ï¼šä»åŸç†åˆ°å®æˆ˜åº”ç”¨</h2>
<p>ä½œä¸ºåµŒå…¥å¼å¼€å‘ä¸­æœ€åŸºç¡€ä¹Ÿæœ€æ ¸å¿ƒçš„å¤–è®¾ï¼ŒGPIOï¼ˆé€šç”¨è¾“å…¥/è¾“å‡ºå£ï¼‰å°±åƒæ˜¯å•ç‰‡æœºä¸å¤–éƒ¨ä¸–ç•Œæ²Ÿé€šçš„â€œæ¡¥æ¢â€ã€‚è€Œ GPIO çš„å…«ç§å·¥ä½œæ¨¡å¼â€”â€”æµ®ç©ºè¾“å…¥ã€ä¸Šæ‹‰è¾“å…¥ã€ä¸‹æ‹‰è¾“å…¥ã€æ¨¡æ‹Ÿè¾“å…¥ã€å¼€æ¼è¾“å‡ºã€æ¨æŒ½è¾“å‡ºã€å¤ç”¨å¼€æ¼è¾“å‡ºã€å¤ç”¨æ¨æŒ½è¾“å‡ºï¼Œç›´æ¥å†³å®šäº†è¿™åº§â€œæ¡¥æ¢â€çš„æ²Ÿé€šæ–¹å¼ã€ç¨³å®šæ€§å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<p>å¾ˆå¤šåµŒå…¥å¼æ–°æ‰‹åœ¨åˆæœŸéƒ½ä¼šè¢«è¿™å…«ç§æ¨¡å¼ææ··ï¼Œä¸æ¸…æ¥šæ¯ç§æ¨¡å¼çš„åº•å±‚é€»è¾‘çš„é€‚ç”¨åœºæ™¯ï¼Œç”šè‡³åœ¨é¡¹ç›®ä¸­å› æ¨¡å¼é€‰æ‹©é”™è¯¯å¯¼è‡´è®¾å¤‡å·¥ä½œå¼‚å¸¸ï¼ˆæ¯”å¦‚æŒ‰é”®æ£€æµ‹å¤±çµã€LED é—ªçƒä¸ç¨³å®šã€æ€»çº¿é€šä¿¡å¤±è´¥ï¼‰ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±é€ä¸€æ‹†è§£è¿™å…«ç§æ¨¡å¼ï¼Œä»å·¥ä½œåŸç†ã€ç”µè·¯ç‰¹æ€§ã€å®æˆ˜åœºæ™¯ä¸‰ä¸ªç»´åº¦ï¼Œå¸®ä½ å½»åº•åƒé€ï¼Œå†ä¹Ÿä¸è¸©å‘ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å…ˆç†æ¸…æ ¸å¿ƒï¼šè¾“å…¥æ¨¡å¼ vs è¾“å‡ºæ¨¡å¼</h2>
<p>GPIO çš„å…«ç§æ¨¡å¼æœ¬è´¨ä¸Šå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š<strong>â€‹è¾“å…¥æ¨¡å¼ï¼ˆ4 ç§ï¼‰â€‹</strong>å’Œâ€‹**è¾“å‡ºæ¨¡å¼ï¼ˆ4 ç§ï¼‰**â€‹ã€‚æ ¸å¿ƒåŒºåˆ«åœ¨äºï¼šè¾“å…¥æ¨¡å¼æ˜¯ GPIO æ¥æ”¶å¤–éƒ¨ä¿¡å·ï¼ˆå¦‚æŒ‰é”®ã€ä¼ æ„Ÿå™¨çš„ç”µå¹³ï¼‰ï¼Œè¾“å‡ºæ¨¡å¼æ˜¯ GPIO å‘å¤–éƒ¨å‘é€ä¿¡å·ï¼ˆå¦‚é©±åŠ¨ LEDã€æ§åˆ¶ç»§ç”µå™¨ï¼‰ã€‚è€Œâ€œå¤ç”¨â€åˆ™æ˜¯æŒ‡ GPIO ä¸å†ç”±è½¯ä»¶ç›´æ¥æ§åˆ¶ï¼Œè€Œæ˜¯äº¤ç”±å•ç‰‡æœºå†…éƒ¨å¤–è®¾ï¼ˆå¦‚ UARTã€SPIã€I2Cï¼‰ä½¿ç”¨ï¼Œæœ¬è´¨è¿˜æ˜¯è¾“å…¥æˆ–è¾“å‡ºé€»è¾‘ã€‚</p>
<h2 data-id="heading-2">äºŒã€è¾“å…¥æ¨¡å¼è¯¦è§£ï¼ˆ4 ç§ï¼‰ï¼šæ¥æ”¶å¤–éƒ¨ä¿¡å·çš„â€œæ­£ç¡®å§¿åŠ¿â€</h2>
<p>è¾“å…¥æ¨¡å¼çš„æ ¸å¿ƒæ˜¯â€œé«˜é˜»æŠ—æ¥æ”¶â€ï¼ŒGPIO æœ¬èº«ä¸ä¸»åŠ¨è¾“å‡ºç”µå¹³ï¼Œä»…ä½œä¸ºä¿¡å·çš„â€œæ¥æ”¶ç«¯â€ï¼Œæ ¸å¿ƒå·®å¼‚åœ¨äºæ˜¯å¦é€šè¿‡ç”µé˜»å›ºå®šç”µå¹³ï¼ˆé¿å…ä¿¡å·ä¸ç¨³å®šï¼‰ï¼Œä»¥åŠæ˜¯å¦ç”¨äºæ¨¡æ‹Ÿä¿¡å·é‡‡é›†ã€‚</p>
<h3 data-id="heading-3">1. æµ®ç©ºè¾“å…¥ï¼ˆFloating Inputï¼‰</h3>
<p>â€‹<strong>æ ¸å¿ƒå®šä¹‰</strong>â€‹ï¼šGPIO å¼•è„šå¤„äºé«˜é˜»æŠ—çŠ¶æ€ï¼Œä¸æ¥å†…éƒ¨ä¸Šæ‹‰æˆ–ä¸‹æ‹‰ç”µé˜»ï¼Œå¼•è„šç”µå¹³å®Œå…¨ç”±å¤–éƒ¨ç”µè·¯å†³å®šï¼Œç›¸å½“äºâ€œæ‚¬æµ®â€åœ¨ç©ºä¸­ï¼Œä»…è¢«åŠ¨æ¥æ”¶å¤–éƒ¨ä¿¡å·ã€‚</p>
<p>â€‹<strong>å·¥ä½œåŸç†</strong>â€‹ï¼šå¼•è„šå†…éƒ¨æœªè¿æ¥ä»»ä½•å›ºå®šç”µé˜»ï¼Œè¾“å…¥é˜»æŠ—æé«˜ï¼ˆæ¥è¿‘å¼€è·¯ï¼‰ï¼Œå¤–éƒ¨ä¿¡å·çš„å¾®å°å˜åŒ–éƒ½ä¼šå½±å“å¼•è„šç”µå¹³ã€‚æ­¤æ—¶ GPIO ä»…ä½œä¸ºâ€œä¿¡å·æ£€æµ‹ç«¯â€ï¼Œä¸å¹²é¢„å¤–éƒ¨ç”µå¹³ã€‚</p>
<p>â€‹<strong>å®æˆ˜åœºæ™¯</strong>â€‹ï¼šä»…é€‚ç”¨äºå¤–éƒ¨ç”µè·¯å·²æ˜ç¡®æä¾›ç¨³å®šç”µå¹³çš„åœºæ™¯ï¼Œæ¯”å¦‚è¿æ¥ TTL ç”µå¹³ä¼ æ„Ÿå™¨ï¼ˆå¦‚çº¢å¤–æ¥æ”¶å¤´ã€ä¸²å£ RX å¼•è„šï¼‰ã€å¤–éƒ¨æœ‰ä¸‹æ‹‰/ä¸Šæ‹‰ç”µé˜»çš„æŒ‰é”®ç”µè·¯ã€‚</p>
<p>â€‹<strong>æ³¨æ„äº‹é¡¹</strong>â€‹ï¼šè‹¥å¤–éƒ¨ç”µè·¯æœªæä¾›å›ºå®šç”µå¹³ï¼ˆå¦‚æ‚¬ç©ºçš„æŒ‰é”®ï¼‰ï¼Œå¼•è„šç”µå¹³ä¼šå¤„äºâ€œä¸ç¡®å®šçŠ¶æ€â€ï¼ˆå¯èƒ½æ˜¯é«˜ç”µå¹³ã€ä½ç”µå¹³ï¼Œæˆ–å—å¹²æ‰°æ³¢åŠ¨ï¼‰ï¼Œå¯¼è‡´æ£€æµ‹é”™è¯¯ï¼Œå› æ­¤â€‹<strong>ç¦æ­¢å•ç‹¬ç”¨äºæŒ‰é”®æ£€æµ‹ç­‰æ— å¤–éƒ¨å›ºå®šç”µå¹³çš„åœºæ™¯</strong>â€‹ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ STM32F103 æ ‡å‡†åº“ä¸‹ï¼Œè¯¥æ¨¡å¼çš„ GPIO é…ç½®ä»£ç ç¤ºä¾‹ï¼ˆä»¥ PA0 å¼•è„šä¸ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_gpio.h"</span></span>

<span class="hljs-comment">// æµ®ç©ºè¾“å…¥æ¨¡å¼é…ç½®ï¼ˆPA0ï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">GPIO_FloatingInput_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    GPIO_InitTypeDef GPIO_InitStructure;
    
    <span class="hljs-comment">// 1. ä½¿èƒ½GPIOAæ—¶é’Ÿï¼ˆSTM32å¿…é¡»å…ˆä½¿èƒ½å¤–è®¾æ—¶é’Ÿï¼‰</span>
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
    
    <span class="hljs-comment">// 2. é…ç½®PA0ä¸ºæµ®ç©ºè¾“å…¥æ¨¡å¼</span>
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;          <span class="hljs-comment">// é€‰æ‹©PA0å¼•è„š</span>
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING; <span class="hljs-comment">// æµ®ç©ºè¾“å…¥æ¨¡å¼</span>
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  <span class="hljs-comment">// å¼•è„šé€Ÿåº¦ï¼ˆè¾“å…¥æ¨¡å¼å¯å¿½ç•¥ï¼Œé»˜è®¤é…ç½®å³å¯ï¼‰</span>
    
    <span class="hljs-comment">// 3. åˆå§‹åŒ–GPIOA</span>
    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);
}

<span class="hljs-comment">// è¯»å–æµ®ç©ºè¾“å…¥å¼•è„šç”µå¹³ï¼ˆç¤ºä¾‹ï¼‰</span>
<span class="hljs-type">uint8_t</span> <span class="hljs-title function_">GPIO_Read_FloatingInput</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    <span class="hljs-comment">// è¯»å–PA0å¼•è„šç”µå¹³ï¼Œè¿”å›0ï¼ˆä½ç”µå¹³ï¼‰æˆ–1ï¼ˆé«˜ç”µå¹³ï¼‰</span>
    <span class="hljs-keyword">return</span> GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0);
}
</code></pre>
<p>å…³é”®ï¼š<code>GPIO_Mode_IN_FLOATING</code> å¯¹åº”æµ®ç©ºè¾“å…¥æ¨¡å¼ï¼Œæ— éœ€é…ç½®ä¸Šæ‹‰/ä¸‹æ‹‰ç”µé˜»ï¼Œç›´æ¥è¯»å–å¤–éƒ¨ç”µå¹³å³å¯ã€‚</p>
<h3 data-id="heading-4">2. ä¸Šæ‹‰è¾“å…¥ï¼ˆPull-Up Inputï¼‰</h3>
<p>â€‹<strong>æ ¸å¿ƒå®šä¹‰</strong>â€‹ï¼šGPIO å¼•è„šå†…éƒ¨è¿æ¥ä¸€ä¸ªä¸Šæ‹‰ç”µé˜»ï¼ˆä¸€ç«¯æ¥ VCCï¼Œå¦ä¸€ç«¯æ¥å¼•è„šï¼‰ï¼Œæ— å¤–éƒ¨ä¿¡å·æ—¶ï¼Œå¼•è„šè¢«æ‹‰è‡³é«˜ç”µå¹³ï¼›å½“å¤–éƒ¨ç”µè·¯å°†å¼•è„šæ‹‰è‡³ä½ç”µå¹³æ—¶ï¼Œå¼•è„šç”µå¹³å˜ä¸ºä½ç”µå¹³ã€‚</p>
<p>â€‹<strong>å·¥ä½œåŸç†</strong>â€‹ï¼šå†…éƒ¨ä¸Šæ‹‰ç”µé˜»ï¼ˆé€šå¸¸ä¸º 10K~100KÎ©ï¼‰æä¾›ä¸€ä¸ªç¨³å®šçš„é«˜ç”µå¹³åç½®ï¼Œå¤–éƒ¨ä¿¡å·é€šè¿‡æ‹‰ä½å¼•è„šæ¥æ”¹å˜ç”µå¹³çŠ¶æ€ã€‚ä¾‹å¦‚ï¼ŒæŒ‰é”®ä¸€ç«¯æ¥ GPIOï¼ˆä¸Šæ‹‰è¾“å…¥ï¼‰ï¼Œå¦ä¸€ç«¯æ¥åœ°ï¼ŒæœªæŒ‰ä¸‹æ—¶å¼•è„šä¸ºé«˜ç”µå¹³ï¼ŒæŒ‰ä¸‹æ—¶å¼•è„šè¢«æ‹‰ä½ä¸ºä½ç”µå¹³ã€‚</p>
<p>â€‹<strong>å®æˆ˜åœºæ™¯</strong>â€‹ï¼šæœ€å¸¸ç”¨çš„è¾“å…¥æ¨¡å¼ï¼Œé€‚åˆå¤–éƒ¨æ— å›ºå®šç”µå¹³çš„åœºæ™¯ï¼Œæ¯”å¦‚ç‹¬ç«‹æŒ‰é”®æ£€æµ‹ã€æ¥è¿‘å¼€å…³ï¼ˆNPN å‹ï¼‰ä¿¡å·æ¥æ”¶ã€å¤–éƒ¨è®¾å¤‡çš„â€œå°±ç»ª/å¿™ç¢Œâ€ä¿¡å·æ£€æµ‹ï¼ˆä½ç”µå¹³æœ‰æ•ˆï¼‰ã€‚</p>
<p>â€‹<strong>ä¼˜åŠ¿</strong>â€‹ï¼šè§£å†³æµ®ç©ºè¾“å…¥çš„ä¸ç¨³å®šé—®é¢˜ï¼Œæ— éœ€å¤–éƒ¨é¢å¤–æ¥ç”µé˜»ï¼Œç®€åŒ–ç”µè·¯è®¾è®¡ï¼Œé™ä½æˆæœ¬ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ STM32F103 æ ‡å‡†åº“ä¸‹ï¼Œè¯¥æ¨¡å¼çš„ GPIO é…ç½®ä»£ç ç¤ºä¾‹ï¼ˆä»¥ PA0 å¼•è„šä¸ºä¾‹ï¼Œé€‚é…ç‹¬ç«‹æŒ‰é”®æ£€æµ‹ï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_gpio.h"</span></span>

<span class="hljs-comment">// ä¸Šæ‹‰è¾“å…¥æ¨¡å¼é…ç½®ï¼ˆPA0ï¼Œé€‚é…ç‹¬ç«‹æŒ‰é”®ï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">GPIO_PullUpInput_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    GPIO_InitTypeDef GPIO_InitStructure;
    
    <span class="hljs-comment">// 1. ä½¿èƒ½GPIOAæ—¶é’Ÿ</span>
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
    
    <span class="hljs-comment">// 2. é…ç½®PA0ä¸ºä¸Šæ‹‰è¾“å…¥æ¨¡å¼</span>
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;          <span class="hljs-comment">// é€‰æ‹©PA0å¼•è„š</span>
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;      <span class="hljs-comment">// ä¸Šæ‹‰è¾“å…¥æ¨¡å¼ï¼ˆIPU = Input Pull-Upï¼‰</span>
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  <span class="hljs-comment">// è¾“å…¥æ¨¡å¼å¯å¿½ç•¥é€Ÿåº¦é…ç½®</span>
    
    <span class="hljs-comment">// 3. åˆå§‹åŒ–GPIOA</span>
    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);
}

<span class="hljs-comment">// è¯»å–ä¸Šæ‹‰è¾“å…¥å¼•è„šç”µå¹³ï¼ˆæ£€æµ‹æŒ‰é”®ï¼‰</span>
<span class="hljs-type">uint8_t</span> <span class="hljs-title function_">Key_Read_PullUp</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    <span class="hljs-comment">// æŒ‰é”®ä¸€ç«¯æ¥PA0ï¼Œå¦ä¸€ç«¯æ¥åœ°ï¼›æœªæŒ‰ä¸‹æ—¶PA0ä¸ºé«˜ç”µå¹³ï¼ˆ1ï¼‰ï¼ŒæŒ‰ä¸‹æ—¶ä¸ºä½ç”µå¹³ï¼ˆ0ï¼‰</span>
    <span class="hljs-keyword">if</span>(GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0) == <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">// å»¶æ—¶æ¶ˆæŠ–ï¼ˆç®€å•æ¶ˆæŠ–ï¼Œå®é™…é¡¹ç›®å¯ä¼˜åŒ–ï¼‰</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-type">uint32_t</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">1000</span>; i++);
        <span class="hljs-keyword">if</span>(GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0) == <span class="hljs-number">0</span>)
        {
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// æŒ‰é”®æŒ‰ä¸‹</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æŒ‰é”®æœªæŒ‰ä¸‹</span>
}
</code></pre>
<p>å…³é”®ï¼š<code>GPIO_Mode_IPU</code> å¯¹åº”ä¸Šæ‹‰è¾“å…¥ï¼Œå†…éƒ¨è‡ªåŠ¨ä½¿èƒ½ä¸Šæ‹‰ç”µé˜»ï¼Œæ— éœ€å¤–æ¥ï¼Œç›´æ¥é€‚é…ç‹¬ç«‹æŒ‰é”®æ£€æµ‹ã€‚</p>
<h3 data-id="heading-5">3. ä¸‹æ‹‰è¾“å…¥ï¼ˆPull-Down Inputï¼‰</h3>
<p>â€‹<strong>æ ¸å¿ƒå®šä¹‰</strong>â€‹ï¼šä¸ä¸Šæ‹‰è¾“å…¥ç›¸åï¼ŒGPIO å¼•è„šå†…éƒ¨è¿æ¥ä¸€ä¸ªä¸‹æ‹‰ç”µé˜»ï¼ˆä¸€ç«¯æ¥åœ° GNDï¼Œå¦ä¸€ç«¯æ¥å¼•è„šï¼‰ï¼Œæ— å¤–éƒ¨ä¿¡å·æ—¶ï¼Œå¼•è„šè¢«æ‹‰è‡³ä½ç”µå¹³ï¼›å½“å¤–éƒ¨ç”µè·¯å°†å¼•è„šæ‹‰è‡³é«˜ç”µå¹³æ—¶ï¼Œå¼•è„šç”µå¹³å˜ä¸ºé«˜ç”µå¹³ã€‚</p>
<p>â€‹<strong>å·¥ä½œåŸç†</strong>â€‹ï¼šå†…éƒ¨ä¸‹æ‹‰ç”µé˜»æä¾›ä½ç”µå¹³åç½®ï¼Œå¤–éƒ¨ä¿¡å·é€šè¿‡æ‹‰é«˜å¼•è„šæ¥è§¦å‘ç”µå¹³å˜åŒ–ã€‚ä¾‹å¦‚ï¼ŒæŒ‰é”®ä¸€ç«¯æ¥ GPIOï¼ˆä¸‹æ‹‰è¾“å…¥ï¼‰ï¼Œå¦ä¸€ç«¯æ¥ VCCï¼ŒæœªæŒ‰ä¸‹æ—¶å¼•è„šä¸ºä½ç”µå¹³ï¼ŒæŒ‰ä¸‹æ—¶å¼•è„šè¢«æ‹‰é«˜ä¸ºé«˜ç”µå¹³ã€‚</p>
<p>â€‹<strong>å®æˆ˜åœºæ™¯</strong>â€‹ï¼šé€‚åˆå¤–éƒ¨ä¿¡å·ä¸ºé«˜ç”µå¹³æœ‰æ•ˆçš„åœºæ™¯ï¼Œæ¯”å¦‚ PNP å‹æ¥è¿‘å¼€å…³ä¿¡å·æ¥æ”¶ã€å¤–éƒ¨è®¾å¤‡çš„â€œè§¦å‘ä¿¡å·â€æ£€æµ‹ï¼ˆé«˜ç”µå¹³æœ‰æ•ˆï¼‰ã€ç»§ç”µå™¨çš„çŠ¶æ€åé¦ˆï¼ˆé«˜ç”µå¹³è¡¨ç¤ºå¸åˆï¼‰ã€‚</p>
<p>â€‹<strong>ä¸ä¸Šæ‹‰è¾“å…¥çš„åŒºåˆ«</strong>â€‹ï¼šæ ¸å¿ƒæ˜¯â€œé»˜è®¤ç”µå¹³â€å’Œâ€œè§¦å‘ç”µå¹³â€ç›¸åï¼Œæ ¹æ®å¤–éƒ¨ç”µè·¯çš„ç”µå¹³ææ€§é€‰æ‹©ï¼Œé¿å…ç”µå¹³å†²çªã€‚</p>
<p>ä»¥ä¸‹æ˜¯ STM32F103 æ ‡å‡†åº“ä¸‹ï¼Œè¯¥æ¨¡å¼çš„ GPIO é…ç½®ä»£ç ç¤ºä¾‹ï¼ˆä»¥ PA0 å¼•è„šä¸ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_gpio.h"</span></span>

<span class="hljs-comment">// ä¸‹æ‹‰è¾“å…¥æ¨¡å¼é…ç½®ï¼ˆPA0ï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">GPIO_PullDownInput_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    GPIO_InitTypeDef GPIO_InitStructure;
    
    <span class="hljs-comment">// 1. ä½¿èƒ½GPIOAæ—¶é’Ÿ</span>
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
    
    <span class="hljs-comment">// 2. é…ç½®PA0ä¸ºä¸‹æ‹‰è¾“å…¥æ¨¡å¼</span>
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;          <span class="hljs-comment">// é€‰æ‹©PA0å¼•è„š</span>
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPD;      <span class="hljs-comment">// ä¸‹æ‹‰è¾“å…¥æ¨¡å¼ï¼ˆIPD = Input Pull-Downï¼‰</span>
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  <span class="hljs-comment">// è¾“å…¥æ¨¡å¼å¯å¿½ç•¥é€Ÿåº¦é…ç½®</span>
    
    <span class="hljs-comment">// 3. åˆå§‹åŒ–GPIOA</span>
    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);
}

<span class="hljs-comment">// è¯»å–ä¸‹æ‹‰è¾“å…¥å¼•è„šç”µå¹³ï¼ˆç¤ºä¾‹ï¼‰</span>
<span class="hljs-type">uint8_t</span> <span class="hljs-title function_">GPIO_Read_PullDownInput</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    <span class="hljs-comment">// æœªæ¥å¤–éƒ¨ä¿¡å·æ—¶ï¼ŒPA0ä¸ºä½ç”µå¹³ï¼ˆ0ï¼‰ï¼›å¤–éƒ¨æ‹‰é«˜æ—¶ï¼Œè¿”å›é«˜ç”µå¹³ï¼ˆ1ï¼‰</span>
    <span class="hljs-keyword">return</span> GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0);
}
</code></pre>
<p>å…³é”®ï¼š<code>GPIO_Mode_IPD</code> å¯¹åº”ä¸‹æ‹‰è¾“å…¥ï¼Œå†…éƒ¨è‡ªåŠ¨ä½¿èƒ½ä¸‹æ‹‰ç”µé˜»ï¼Œé»˜è®¤ç”µå¹³ä¸ºä½ï¼Œé€‚é…é«˜ç”µå¹³æœ‰æ•ˆä¿¡å·ã€‚</p>
<h3 data-id="heading-6">4. æ¨¡æ‹Ÿè¾“å…¥ï¼ˆAnalog Inputï¼‰</h3>
<p>â€‹<strong>æ ¸å¿ƒå®šä¹‰</strong>â€‹ï¼šGPIO å¼•è„šå†…éƒ¨æ–­å¼€æ•°å­—è¾“å…¥ç¼“å†²å™¨ï¼Œç›´æ¥å°†å¤–éƒ¨æ¨¡æ‹Ÿä¿¡å·ï¼ˆè¿ç»­å˜åŒ–çš„ç”µå‹ä¿¡å·ï¼‰ä¼ å…¥å•ç‰‡æœºå†…éƒ¨çš„ ADCï¼ˆæ¨¡æ•°è½¬æ¢å™¨ï¼‰ï¼Œç”¨äºé‡‡é›†æ¨¡æ‹Ÿé‡ã€‚</p>
<p>â€‹<strong>å·¥ä½œåŸç†</strong>â€‹ï¼šä¸æ•°å­—è¾“å…¥ï¼ˆä»…è¯†åˆ«é«˜/ä½ç”µå¹³ï¼‰ä¸åŒï¼Œæ¨¡æ‹Ÿè¾“å…¥å¯æ¥æ”¶ 0~VCC ä¹‹é—´çš„ä»»æ„ç”µå‹å€¼ï¼ˆå¦‚ 0~3.3Vã€0~5Vï¼‰ï¼Œå¹¶é€šè¿‡ ADC è½¬æ¢ä¸ºæ•°å­—ä¿¡å·ï¼Œä¾›å•ç‰‡æœºå¤„ç†ã€‚æ­¤æ—¶å¼•è„šä¸å†ç”¨äºæ•°å­—ä¿¡å·æ£€æµ‹ï¼Œä»…ä½œä¸ºæ¨¡æ‹Ÿä¿¡å·çš„â€œä¼ è¾“é€šé“â€ã€‚</p>
<p>â€‹<strong>å®æˆ˜åœºæ™¯</strong>â€‹ï¼šæ¨¡æ‹Ÿé‡é‡‡é›†åœºæ™¯ï¼Œæ¯”å¦‚ç”µä½å™¨è°ƒèŠ‚ï¼ˆé‡‡é›†ç”µé˜»å˜åŒ–å¯¹åº”çš„ç”µå‹ï¼‰ã€æ¸©åº¦ä¼ æ„Ÿå™¨ï¼ˆå¦‚ LM35ï¼Œè¾“å‡ºç”µå‹éšæ¸©åº¦å˜åŒ–ï¼‰ã€æ¹¿åº¦ä¼ æ„Ÿå™¨ã€å…‰ç…§ä¼ æ„Ÿå™¨ç­‰ï¼Œéœ€è¦è·å–è¿ç»­å˜åŒ–çš„ç‰©ç†é‡æ—¶ä½¿ç”¨ã€‚</p>
<p>â€‹<strong>æ³¨æ„äº‹é¡¹</strong>â€‹ï¼šå¹¶éæ‰€æœ‰ GPIO å¼•è„šéƒ½æ”¯æŒæ¨¡æ‹Ÿè¾“å…¥ï¼Œéœ€æŸ¥çœ‹å•ç‰‡æœº datasheetï¼Œé€šå¸¸æ ‡æ³¨ä¸ºâ€œADCx_INxâ€çš„å¼•è„šæ‰å¯ä½œä¸ºæ¨¡æ‹Ÿè¾“å…¥ä½¿ç”¨ï¼›æ¨¡æ‹Ÿè¾“å…¥å¼•è„šä¸å®œæ¥å¼ºç”µï¼Œé¿å…æŸå ADC æ¨¡å—ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ STM32F103 æ ‡å‡†åº“ä¸‹ï¼Œè¯¥æ¨¡å¼çš„ GPIO é…ç½®ä»£ç ç¤ºä¾‹ï¼ˆä»¥ PA0 å¼•è„šä¸ºä¾‹ï¼ŒPA0 å¯¹åº” ADC1_IN0ï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_gpio.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_adc.h"</span></span>

<span class="hljs-comment">// æ¨¡æ‹Ÿè¾“å…¥æ¨¡å¼é…ç½®ï¼ˆPA0ï¼Œç”¨äºADCé‡‡é›†ï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">GPIO_AnalogInput_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    GPIO_InitTypeDef GPIO_InitStructure;
    
    <span class="hljs-comment">// 1. ä½¿èƒ½GPIOAå’ŒADC1æ—¶é’Ÿ</span>
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_ADC1, ENABLE);
    
    <span class="hljs-comment">// 2. é…ç½®PA0ä¸ºæ¨¡æ‹Ÿè¾“å…¥æ¨¡å¼ï¼ˆå…³é”®ï¼šæ–­å¼€æ•°å­—ç¼“å†²ï¼Œæ¥å…¥ADCï¼‰</span>
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;          <span class="hljs-comment">// é€‰æ‹©PA0å¼•è„š</span>
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AIN;      <span class="hljs-comment">// æ¨¡æ‹Ÿè¾“å…¥æ¨¡å¼ï¼ˆAIN = Analog Inputï¼‰</span>
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  <span class="hljs-comment">// æ¨¡æ‹Ÿè¾“å…¥æ¨¡å¼å¯å¿½ç•¥é€Ÿåº¦</span>
    
    <span class="hljs-comment">// 3. åˆå§‹åŒ–GPIOA</span>
    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);
    
    <span class="hljs-comment">// ï¼ˆå¯é€‰ï¼‰ADCåˆå§‹åŒ–ï¼ˆæ¨¡æ‹Ÿè¾“å…¥éœ€é…åˆADCä½¿ç”¨ï¼Œå®Œæ•´ç¤ºä¾‹ï¼‰</span>
    ADC_InitTypeDef ADC_InitStructure;
    ADC_InitStructure.ADC_Mode = ADC_Mode_Independent; <span class="hljs-comment">// ADC1ç‹¬ç«‹å·¥ä½œæ¨¡å¼</span>
    ADC_InitStructure.ADC_ScanConvMode = DISABLE;      <span class="hljs-comment">// å•é€šé“é‡‡é›†</span>
    ADC_InitStructure.ADC_ContinuousConvMode = ENABLE; <span class="hljs-comment">// è¿ç»­é‡‡é›†æ¨¡å¼</span>
    ADC_InitStructure.ADC_ExternalTrigConv = ADC_ExternalTrigConv_None; <span class="hljs-comment">// æ— å¤–éƒ¨è§¦å‘</span>
    ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right; <span class="hljs-comment">// æ•°æ®å³å¯¹é½</span>
    ADC_InitStructure.ADC_NbrOfChannel = <span class="hljs-number">1</span>;            <span class="hljs-comment">// é‡‡é›†é€šé“æ•°é‡</span>
    ADC_Init(ADC1, &amp;ADC_InitStructure);
    
    <span class="hljs-comment">// ä½¿èƒ½ADC1</span>
    ADC_Cmd(ADC1, ENABLE);
}

<span class="hljs-comment">// è¯»å–æ¨¡æ‹Ÿè¾“å…¥ADCå€¼ï¼ˆç¤ºä¾‹ï¼‰</span>
<span class="hljs-type">uint16_t</span> <span class="hljs-title function_">ADC_Read_AnalogInput</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    <span class="hljs-comment">// é€‰æ‹©ADC1é€šé“0ï¼ˆPA0ï¼‰ï¼Œé‡‡æ ·æ—¶é—´55.5å‘¨æœŸ</span>
    ADC_RegularChannelConfig(ADC1, ADC_Channel_0, <span class="hljs-number">1</span>, ADC_SampleTime_55Cycles5);
    <span class="hljs-comment">// å¯åŠ¨ADCè½¬æ¢</span>
    ADC_SoftwareStartConvCmd(ADC1, ENABLE);
    <span class="hljs-comment">// ç­‰å¾…è½¬æ¢å®Œæˆ</span>
    <span class="hljs-keyword">while</span>(!ADC_GetFlagStatus(ADC1, ADC_FLAG_EOC));
    <span class="hljs-comment">// è¿”å›è½¬æ¢ç»“æœï¼ˆ12ä½ADCï¼ŒèŒƒå›´0~4095ï¼‰</span>
    <span class="hljs-keyword">return</span> ADC_GetConversionValue(ADC1);
}
</code></pre>
<p>å…³é”®ï¼š<code>GPIO_Mode_AIN</code> å¯¹åº”æ¨¡æ‹Ÿè¾“å…¥ï¼Œéœ€é…åˆ ADC åˆå§‹åŒ–ï¼Œå¼•è„šä»…ä½œä¸ºæ¨¡æ‹Ÿä¿¡å·ä¼ è¾“é€šé“ï¼Œä¸å‚ä¸æ•°å­—é€»è¾‘ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€è¾“å‡ºæ¨¡å¼è¯¦è§£ï¼ˆ4 ç§ï¼‰ï¼šå‘é€å¤–éƒ¨ä¿¡å·çš„â€œæ ¸å¿ƒæ–¹å¼â€</h2>
<p>è¾“å‡ºæ¨¡å¼çš„æ ¸å¿ƒæ˜¯â€œä¸»åŠ¨è¾“å‡ºç”µå¹³â€ï¼ŒGPIO å¼•è„šç”±å•ç‰‡æœºè½¯ä»¶ï¼ˆæˆ–å†…éƒ¨å¤–è®¾ï¼‰æ§åˆ¶ï¼Œå‘å¤–éƒ¨ç”µè·¯è¾“å‡ºé«˜ç”µå¹³ï¼ˆVCCï¼‰æˆ–ä½ç”µå¹³ï¼ˆGNDï¼‰ï¼Œæ ¸å¿ƒå·®å¼‚åœ¨äºè¾“å‡ºé©±åŠ¨æ–¹å¼ï¼ˆå¼€æ¼/æ¨æŒ½ï¼‰å’Œæ˜¯å¦å¤ç”¨ä¸ºå¤–è®¾åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-8">1. å¼€æ¼è¾“å‡ºï¼ˆOpen-Drain Outputï¼‰</h3>
<p>â€‹<strong>æ ¸å¿ƒå®šä¹‰</strong>â€‹ï¼šGPIO å¼•è„šå†…éƒ¨ä»…åŒ…å« N æ²Ÿé“ MOS ç®¡ï¼Œæ— å†…éƒ¨ä¸Šæ‹‰ç”µé˜»ï¼Œè¾“å‡ºä½ç”µå¹³æ—¶ï¼ŒMOS ç®¡å¯¼é€šï¼Œå¼•è„šæ¥åœ°ï¼›è¾“å‡ºé«˜ç”µå¹³æ—¶ï¼ŒMOS ç®¡æˆªæ­¢ï¼Œå¼•è„šå¤„äºé«˜é˜»æŠ—çŠ¶æ€ï¼ˆæµ®ç©ºï¼‰ï¼Œæ— æ³•ä¸»åŠ¨è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€å¤–éƒ¨æ¥ä¸€ä¸ªä¸Šæ‹‰ç”µé˜»æ‰èƒ½è¾“å‡ºé«˜ç”µå¹³ã€‚</p>
<p>â€‹<strong>å·¥ä½œåŸç†</strong>â€‹ï¼šç›¸å½“äºä¸€ä¸ªâ€œå¯æ§å¼€å…³â€ï¼Œä»…èƒ½æ§åˆ¶å¼•è„šâ€œæ¥åœ°â€ï¼ˆä½ç”µå¹³ï¼‰ï¼Œæ— æ³•æ§åˆ¶å¼•è„šâ€œæ¥ VCCâ€ï¼ˆé«˜ç”µå¹³ï¼‰ã€‚å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»çš„ä½œç”¨æ˜¯ï¼Œå½“ MOS ç®¡æˆªæ­¢æ—¶ï¼Œå°†å¼•è„šæ‹‰è‡³é«˜ç”µå¹³ï¼Œå®ç°é«˜ç”µå¹³è¾“å‡ºã€‚</p>
<p>â€‹**æ ¸å¿ƒç‰¹æ€§ï¼šçº¿ä¸ï¼ˆWire-ANDï¼‰**â€‹ï¼šå¤šä¸ªå¼€æ¼è¾“å‡ºå¼•è„šå¯è¿æ¥åœ¨åŒä¸€æ¡æ€»çº¿ä¸Šï¼Œå…±äº«ä¸€ä¸ªå¤–éƒ¨ä¸Šæ‹‰ç”µé˜»ã€‚åªè¦æœ‰ä¸€ä¸ªå¼•è„šè¾“å‡ºä½ç”µå¹³ï¼Œæ•´ä¸ªæ€»çº¿å°±ä¸ºä½ç”µå¹³ï¼›åªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜ç”µå¹³ï¼ˆæµ®ç©ºï¼‰ï¼Œæ€»çº¿æ‰ä¸ºé«˜ç”µå¹³ã€‚è¿™æ˜¯å¼€æ¼è¾“å‡ºæœ€å…³é”®çš„ä¼˜åŠ¿ã€‚</p>
<p>â€‹<strong>å®æˆ˜åœºæ™¯</strong>â€‹ï¼šæ€»çº¿é€šä¿¡ï¼ˆå¦‚ I2C æ€»çº¿çš„ SDAã€SCL å¼•è„šï¼‰ã€å¤šä¸ªè®¾å¤‡çš„ç”µå¹³è”åŠ¨ï¼ˆå¦‚å¤šä¸ª LED å…±é˜³æé©±åŠ¨ï¼‰ã€éœ€è¦å®ç°çº¿ä¸åŠŸèƒ½çš„åœºæ™¯ï¼›ä¹Ÿå¯ç”¨äºé©±åŠ¨å¤§ç”µæµè®¾å¤‡ï¼ˆå¤–éƒ¨ä¸Šæ‹‰ç”µé˜» + ä¸‰æç®¡/ç»§ç”µå™¨ï¼‰ã€‚</p>
<p>â€‹<strong>æ³¨æ„äº‹é¡¹</strong>â€‹ï¼šå¿…é¡»å¤–æ¥ä¸Šæ‹‰ç”µé˜»æ‰èƒ½è¾“å‡ºé«˜ç”µå¹³ï¼Œä¸Šæ‹‰ç”µé˜»çš„é˜»å€¼å†³å®šè¾“å‡ºç”µæµå¤§å°å’Œå“åº”é€Ÿåº¦ï¼›è¾“å‡ºé«˜ç”µå¹³æ—¶ï¼Œå¼•è„šç”µå¹³ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œå¹¶éå•ç‰‡æœºå†…éƒ¨ VCCã€‚</p>
<p>ä»¥ä¸‹æ˜¯ STM32F103 æ ‡å‡†åº“ä¸‹ï¼Œè¯¥æ¨¡å¼çš„ GPIO é…ç½®ä»£ç ç¤ºä¾‹ï¼ˆä»¥ PA0 å¼•è„šä¸ºä¾‹ï¼Œå¤–æ¥ä¸Šæ‹‰ç”µé˜»é©±åŠ¨ LEDï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_gpio.h"</span></span>

<span class="hljs-comment">// å¼€æ¼è¾“å‡ºæ¨¡å¼é…ç½®ï¼ˆPA0ï¼Œå¤–æ¥ä¸Šæ‹‰ç”µé˜»ï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">GPIO_OpenDrainOutput_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    GPIO_InitTypeDef GPIO_InitStructure;
    
    <span class="hljs-comment">// 1. ä½¿èƒ½GPIOAæ—¶é’Ÿ</span>
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
    
    <span class="hljs-comment">// 2. é…ç½®PA0ä¸ºå¼€æ¼è¾“å‡ºæ¨¡å¼</span>
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;          <span class="hljs-comment">// é€‰æ‹©PA0å¼•è„š</span>
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_OD;   <span class="hljs-comment">// å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼ˆOut_OD = Output Open Drainï¼‰</span>
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  <span class="hljs-comment">// è¾“å‡ºé€Ÿåº¦50MHzï¼ˆæ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰</span>
    
    <span class="hljs-comment">// 3. åˆå§‹åŒ–GPIOAï¼ˆPA0å¤–æ¥10KÎ©ä¸Šæ‹‰ç”µé˜»åˆ°VCCï¼‰</span>
    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);
    
    <span class="hljs-comment">// åˆå§‹çŠ¶æ€ï¼šè¾“å‡ºé«˜ç”µå¹³ï¼ˆMOSç®¡æˆªæ­¢ï¼Œç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»æ‹‰é«˜ï¼‰</span>
    GPIO_SetBits(GPIOA, GPIO_Pin_0);
}

<span class="hljs-comment">// å¼€æ¼è¾“å‡ºç”µå¹³æ§åˆ¶ï¼ˆç¤ºä¾‹ï¼šé©±åŠ¨LEDäº®ç­ï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">LED_Control_OpenDrain</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> state)</span>
{
    <span class="hljs-keyword">if</span>(state == <span class="hljs-number">1</span>)
    {
        GPIO_SetBits(GPIOA, GPIO_Pin_0);  <span class="hljs-comment">// è¾“å‡ºé«˜ç”µå¹³ï¼ˆMOSç®¡æˆªæ­¢ï¼Œå¤–éƒ¨ä¸Šæ‹‰ï¼‰</span>
    }
    <span class="hljs-keyword">else</span>
    {
        GPIO_ResetBits(GPIOA, GPIO_Pin_0); <span class="hljs-comment">// è¾“å‡ºä½ç”µå¹³ï¼ˆMOSç®¡å¯¼é€šï¼Œæ¥åœ°ï¼‰</span>
    }
}
</code></pre>
<p>å…³é”®ï¼š<code>GPIO_Mode_Out_OD</code> å¯¹åº”å¼€æ¼è¾“å‡ºï¼Œä»£ç ä¸­ <code>GPIO_SetBits</code> ä»…èƒ½è®©å¼•è„šæˆªæ­¢ï¼ˆæµ®ç©ºï¼‰ï¼Œéœ€å¤–æ¥ä¸Šæ‹‰ç”µé˜»æ‰èƒ½å®ç°é«˜ç”µå¹³è¾“å‡ºã€‚</p>
<h3 data-id="heading-9">2. æ¨æŒ½è¾“å‡ºï¼ˆPush-Pull Outputï¼‰</h3>
<p>â€‹<strong>æ ¸å¿ƒå®šä¹‰</strong>â€‹ï¼šGPIO å¼•è„šå†…éƒ¨åŒ…å« N æ²Ÿé“å’Œ P æ²Ÿé“ä¸¤ä¸ª MOS ç®¡ï¼Œä¸¤ä¸ª MOS ç®¡äº’è¡¥å·¥ä½œï¼Œå¯ä¸»åŠ¨è¾“å‡ºé«˜ç”µå¹³å’Œä½ç”µå¹³ï¼Œæ— éœ€å¤–éƒ¨ä¸Šæ‹‰/ä¸‹æ‹‰ç”µé˜»ã€‚</p>
<p>â€‹<strong>å·¥ä½œåŸç†</strong>â€‹ï¼šè¾“å‡ºé«˜ç”µå¹³æ—¶ï¼ŒP æ²Ÿé“ MOS ç®¡å¯¼é€šã€N æ²Ÿé“ MOS ç®¡æˆªæ­¢ï¼Œå¼•è„šæ¥ VCCï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼›è¾“å‡ºä½ç”µå¹³æ—¶ï¼ŒN æ²Ÿé“ MOS ç®¡å¯¼é€šã€P æ²Ÿé“ MOS ç®¡æˆªæ­¢ï¼Œå¼•è„šæ¥åœ°ï¼Œè¾“å‡ºä½ç”µå¹³ã€‚ä¸¤ä¸ª MOS ç®¡äº¤æ›¿å·¥ä½œï¼Œå®ç°â€œæ¨â€ï¼ˆè¾“å‡ºé«˜ç”µå¹³ï¼‰å’Œâ€œæŒ½â€ï¼ˆè¾“å‡ºä½ç”µå¹³ï¼‰çš„é©±åŠ¨æ•ˆæœã€‚</p>
<p>â€‹<strong>æ ¸å¿ƒä¼˜åŠ¿</strong>â€‹ï¼šè¾“å‡ºé©±åŠ¨èƒ½åŠ›å¼ºï¼ˆç›¸æ¯”å¼€æ¼è¾“å‡ºï¼‰ï¼Œæ— éœ€å¤–éƒ¨ç”µé˜»ï¼Œå¯ç›´æ¥é©±åŠ¨ä¸­å°ç”µæµè®¾å¤‡ï¼›è¾“å‡ºç”µå¹³ç¨³å®šï¼Œé«˜ç”µå¹³ä¸º VCCï¼Œä½ç”µå¹³ä¸º GNDï¼Œæ— æµ®ç©ºçŠ¶æ€ã€‚</p>
<p>â€‹<strong>å®æˆ˜åœºæ™¯</strong>â€‹ï¼šæœ€å¸¸ç”¨çš„è¾“å‡ºæ¨¡å¼ï¼Œé€‚åˆç›´æ¥é©±åŠ¨ä¸­å°ç”µæµè®¾å¤‡ï¼Œæ¯”å¦‚ LED æŒ‡ç¤ºç¯ã€å°å‹ç»§ç”µå™¨ï¼ˆç›´æ¥é©±åŠ¨æˆ–é€šè¿‡ä¸‰æç®¡æ”¾å¤§ï¼‰ã€ä¸²å£ TX å¼•è„šï¼ˆè¾“å‡º TTL ç”µå¹³ï¼‰ã€GPIO å£ç›´æ¥æ§åˆ¶çš„å¼€å…³ç”µè·¯ç­‰ã€‚</p>
<p>â€‹<strong>æ³¨æ„äº‹é¡¹</strong>â€‹ï¼šä¸èƒ½å°†å¤šä¸ªæ¨æŒ½è¾“å‡ºå¼•è„šç›´æ¥è¿æ¥åœ¨ä¸€èµ·ï¼ˆè‹¥ä¸€ä¸ªè¾“å‡ºé«˜ã€ä¸€ä¸ªè¾“å‡ºä½ï¼Œä¼šå¯¼è‡´ä¸¤ä¸ª MOS ç®¡åŒæ—¶å¯¼é€šï¼Œäº§ç”Ÿå¤§ç”µæµï¼Œçƒ§æ¯å¼•è„šï¼‰ï¼›é©±åŠ¨å¤§ç”µæµè®¾å¤‡æ—¶ï¼Œéœ€å¤–æ¥æ”¾å¤§ç”µè·¯ï¼ˆä¸‰æç®¡ã€MOS ç®¡ï¼‰ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ STM32F103 æ ‡å‡†åº“ä¸‹ï¼Œè¯¥æ¨¡å¼çš„ GPIO é…ç½®ä»£ç ç¤ºä¾‹ï¼ˆä»¥ PA0 å¼•è„šä¸ºä¾‹ï¼Œç›´æ¥é©±åŠ¨ LEDï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_gpio.h"</span></span>

<span class="hljs-comment">// æ¨æŒ½è¾“å‡ºæ¨¡å¼é…ç½®ï¼ˆPA0ï¼Œç›´æ¥é©±åŠ¨LEDï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">GPIO_PushPullOutput_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    GPIO_InitTypeDef GPIO_InitStructure;
    
    <span class="hljs-comment">// 1. ä½¿èƒ½GPIOAæ—¶é’Ÿ</span>
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
    
    <span class="hljs-comment">// 2. é…ç½®PA0ä¸ºæ¨æŒ½è¾“å‡ºæ¨¡å¼</span>
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;          <span class="hljs-comment">// é€‰æ‹©PA0å¼•è„š</span>
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;   <span class="hljs-comment">// æ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼ˆOut_PP = Output Push Pullï¼‰</span>
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  <span class="hljs-comment">// è¾“å‡ºé€Ÿåº¦50MHz</span>
    
    <span class="hljs-comment">// 3. åˆå§‹åŒ–GPIOAï¼ˆæ— éœ€å¤–æ¥ç”µé˜»ï¼Œç›´æ¥é©±åŠ¨å°ç”µæµLEDï¼‰</span>
    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);
    
    <span class="hljs-comment">// åˆå§‹çŠ¶æ€ï¼šè¾“å‡ºä½ç”µå¹³ï¼ˆLEDç†„ç­ï¼‰</span>
    GPIO_ResetBits(GPIOA, GPIO_Pin_0);
}

<span class="hljs-comment">// æ¨æŒ½è¾“å‡ºç”µå¹³æ§åˆ¶ï¼ˆç¤ºä¾‹ï¼šLEDé—ªçƒï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">LED_Blink_PushPull</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    GPIO_SetBits(GPIOA, GPIO_Pin_0);    <span class="hljs-comment">// è¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDç‚¹äº®</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">uint32_t</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">500</span>; i++);   <span class="hljs-comment">// å»¶æ—¶</span>
    GPIO_ResetBits(GPIOA, GPIO_Pin_0);  <span class="hljs-comment">// è¾“å‡ºä½ç”µå¹³ï¼ŒLEDç†„ç­</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">uint32_t</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">500</span>; i++);   <span class="hljs-comment">// å»¶æ—¶</span>
}
</code></pre>
<p>å…³é”®ï¼š<code>GPIO_Mode_Out_PP</code> å¯¹åº”æ¨æŒ½è¾“å‡ºï¼Œ<code>GPIO_SetBits</code> ä¸»åŠ¨è¾“å‡ºé«˜ç”µå¹³ã€<code>GPIO_ResetBits</code> ä¸»åŠ¨è¾“å‡ºä½ç”µå¹³ï¼Œæ— éœ€å¤–æ¥ç”µé˜»ï¼Œç›´æ¥é©±åŠ¨ä¸­å°ç”µæµè®¾å¤‡ã€‚</p>
<h3 data-id="heading-10">3. å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆAlternate Function Open-Drain Outputï¼‰</h3>
<p>â€‹<strong>æ ¸å¿ƒå®šä¹‰</strong>â€‹ï¼šGPIO å¼•è„šçš„è¾“å‡ºæ§åˆ¶æƒä¸å†ç”±å•ç‰‡æœºè½¯ä»¶ï¼ˆGPIO å¯„å­˜å™¨ï¼‰æ§åˆ¶ï¼Œè€Œæ˜¯äº¤ç”±å†…éƒ¨å¤–è®¾ï¼ˆå¦‚ UARTã€SPIã€I2Cã€å®šæ—¶å™¨ï¼‰æ§åˆ¶ï¼Œè¾“å‡ºé©±åŠ¨æ–¹å¼ä¸ºå¼€æ¼è¾“å‡ºï¼Œéœ€å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»æ‰èƒ½è¾“å‡ºé«˜ç”µå¹³ã€‚</p>
<p>â€‹<strong>å·¥ä½œåŸç†</strong>â€‹ï¼šå¼•è„šåŠŸèƒ½è¢«â€œå¤ç”¨â€ä¸ºå¤–è®¾åŠŸèƒ½ï¼Œç”µå¹³è¾“å‡ºç”±å¤–è®¾å†³å®šï¼ˆè€Œéè½¯ä»¶å†™ GPIO è¾“å‡ºå¯„å­˜å™¨ï¼‰ï¼Œé©±åŠ¨é€»è¾‘ä¸æ™®é€šå¼€æ¼è¾“å‡ºä¸€è‡´â€”â€”ä»…èƒ½ä¸»åŠ¨è¾“å‡ºä½ç”µå¹³ï¼Œé«˜ç”µå¹³éœ€å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å®ç°ã€‚</p>
<p>â€‹<strong>å®æˆ˜åœºæ™¯</strong>â€‹ï¼šå¤–è®¾éœ€è¦å¼€æ¼è¾“å‡ºç‰¹æ€§çš„åœºæ™¯ï¼Œæ¯”å¦‚ I2C æ€»çº¿çš„ SDAã€SCL å¼•è„šï¼ˆå¤ç”¨ä¸º I2C å¤–è®¾çš„å¼€æ¼è¾“å‡ºï¼‰ã€SPI æ€»çº¿çš„ MISO å¼•è„šï¼ˆéƒ¨åˆ†åœºæ™¯å¤ç”¨ä¸ºå¼€æ¼è¾“å‡ºï¼‰ã€UART çš„ CTS/RTS å¼•è„šï¼ˆå¼€æ¼æ¨¡å¼ï¼‰ã€‚</p>
<p>â€‹<strong>ä¸æ™®é€šå¼€æ¼è¾“å‡ºçš„åŒºåˆ«</strong>â€‹ï¼šæ§åˆ¶ä¸»ä½“ä¸åŒâ€”â€”æ™®é€šå¼€æ¼è¾“å‡ºç”±è½¯ä»¶æ§åˆ¶ GPIO å¯„å­˜å™¨ï¼Œå¤ç”¨å¼€æ¼è¾“å‡ºç”±å†…éƒ¨å¤–è®¾æ§åˆ¶ï¼›åŠŸèƒ½ç”¨é€”ä¸åŒâ€”â€”å¤ç”¨è¾“å‡ºç”¨äºå®ç°å¤–è®¾çš„ç‰¹å®šåŠŸèƒ½ï¼Œæ™®é€šè¾“å‡ºç”¨äºè½¯ä»¶ç›´æ¥æ§åˆ¶ç”µå¹³ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ STM32F103 æ ‡å‡†åº“ä¸‹ï¼Œè¯¥æ¨¡å¼çš„ GPIO é…ç½®ä»£ç ç¤ºä¾‹ï¼ˆä»¥ PA9 å¼•è„šä¸ºä¾‹ï¼Œå¤ç”¨ä¸º UART1_TXï¼Œå¼€æ¼è¾“å‡ºï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_gpio.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_usart.h"</span></span>

<span class="hljs-comment">// å¤ç”¨å¼€æ¼è¾“å‡ºæ¨¡å¼é…ç½®ï¼ˆPA9ï¼Œå¤ç”¨ä¸ºUART1_TXï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">GPIO_AF_OpenDrainOutput_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    GPIO_InitTypeDef GPIO_InitStructure;
    USART_InitTypeDef USART_InitStructure;
    
    <span class="hljs-comment">// 1. ä½¿èƒ½GPIOAå’ŒUART1æ—¶é’Ÿï¼ˆå¤ç”¨å¤–è®¾éœ€åŒæ—¶ä½¿èƒ½GPIOå’Œå¤–è®¾æ—¶é’Ÿï¼‰</span>
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_USART1, ENABLE);
    
    <span class="hljs-comment">// 2. é…ç½®PA9ä¸ºå¤ç”¨å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼ˆUART1_TXå¤ç”¨åŠŸèƒ½ï¼‰</span>
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;          <span class="hljs-comment">// é€‰æ‹©PA9å¼•è„šï¼ˆUART1_TXå¯¹åº”å¼•è„šï¼‰</span>
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_OD;    <span class="hljs-comment">// å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆAF_OD = Alternate Function Open Drainï¼‰</span>
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  <span class="hljs-comment">// è¾“å‡ºé€Ÿåº¦50MHz</span>
    
    <span class="hljs-comment">// 3. åˆå§‹åŒ–GPIOAï¼ˆPA9å¤–æ¥ä¸Šæ‹‰ç”µé˜»ï¼Œç¡®ä¿é«˜ç”µå¹³è¾“å‡ºï¼‰</span>
    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);
    
    <span class="hljs-comment">// 4. åˆå§‹åŒ–UART1ï¼ˆå¤ç”¨åŠŸèƒ½æ ¸å¿ƒï¼šé…ç½®å¤–è®¾ï¼Œæ§åˆ¶GPIOè¾“å‡ºï¼‰</span>
    USART_InitStructure.USART_BaudRate = <span class="hljs-number">9600</span>;         <span class="hljs-comment">// æ³¢ç‰¹ç‡9600</span>
    USART_InitStructure.USART_WordLength = USART_WordLength_8b; <span class="hljs-comment">// 8ä½æ•°æ®ä½</span>
    USART_InitStructure.USART_StopBits = USART_StopBits_1;     <span class="hljs-comment">// 1ä½åœæ­¢ä½</span>
    USART_InitStructure.USART_Parity = USART_Parity_No;        <span class="hljs-comment">// æ— æ ¡éªŒä½</span>
    USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None; <span class="hljs-comment">// æ— ç¡¬ä»¶æµæ§</span>
    USART_InitStructure.USART_Mode = USART_Mode_Tx;            <span class="hljs-comment">// ä»…å‘é€æ¨¡å¼</span>
    USART_Init(USART1, &amp;USART_InitStructure);
    
    <span class="hljs-comment">// 5. ä½¿èƒ½UART1</span>
    USART_Cmd(USART1, ENABLE);
}

<span class="hljs-comment">// å¤ç”¨å¼€æ¼è¾“å‡ºå‘é€æ•°æ®ï¼ˆç¤ºä¾‹ï¼šUARTå‘é€å­—ç¬¦ï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">USART_SendChar_AF_OD</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> ch)</span>
{
    <span class="hljs-comment">// ç­‰å¾…å‘é€ç¼“å†²åŒºä¸ºç©º</span>
    <span class="hljs-keyword">while</span>(USART_GetFlagStatus(USART1, USART_FLAG_TXE) == RESET);
    <span class="hljs-comment">// å‘é€ä¸€ä¸ªå­—ç¬¦ï¼ˆç”±UARTå¤–è®¾æ§åˆ¶PA9è¾“å‡ºç”µå¹³ï¼‰</span>
    USART_SendData(USART1, ch);
}
</code></pre>
<p>å…³é”®ï¼š<code>GPIO_Mode_AF_OD</code> å¯¹åº”å¤ç”¨å¼€æ¼è¾“å‡ºï¼Œéœ€åŒæ—¶åˆå§‹åŒ– GPIO å’Œå¯¹åº”å¤–è®¾ï¼ˆå¦‚ UARTï¼‰ï¼ŒGPIO ç”µå¹³ç”±å¤–è®¾æ§åˆ¶ï¼Œéè½¯ä»¶ç›´æ¥æ“ä½œã€‚</p>
<h3 data-id="heading-11">4. å¤ç”¨æ¨æŒ½è¾“å‡ºï¼ˆAlternate Function Push-Pull Outputï¼‰</h3>
<p>â€‹<strong>æ ¸å¿ƒå®šä¹‰</strong>â€‹ï¼šä¸å¤ç”¨å¼€æ¼è¾“å‡ºç±»ä¼¼ï¼ŒGPIO å¼•è„šçš„è¾“å‡ºæ§åˆ¶æƒäº¤ç”±å†…éƒ¨å¤–è®¾æ§åˆ¶ï¼Œè¾“å‡ºé©±åŠ¨æ–¹å¼ä¸ºæ¨æŒ½è¾“å‡ºï¼Œæ— éœ€å¤–éƒ¨ç”µé˜»ï¼Œå¯ä¸»åŠ¨è¾“å‡ºé«˜ç”µå¹³å’Œä½ç”µå¹³ã€‚</p>
<p>â€‹<strong>å·¥ä½œåŸç†</strong>â€‹ï¼šå¼•è„šå¤ç”¨ä¸ºå¤–è®¾åŠŸèƒ½åï¼Œç”µå¹³è¾“å‡ºç”±å¤–è®¾ï¼ˆå¦‚ UARTã€SPIã€å®šæ—¶å™¨ï¼‰å†³å®šï¼Œé©±åŠ¨é€»è¾‘ä¸æ™®é€šæ¨æŒ½è¾“å‡ºä¸€è‡´â€”â€”é€šè¿‡ä¸¤ä¸ªäº’è¡¥ MOS ç®¡ï¼Œä¸»åŠ¨è¾“å‡ºé«˜ç”µå¹³å’Œä½ç”µå¹³ï¼Œé©±åŠ¨èƒ½åŠ›å¼ºã€‚</p>
<p>â€‹<strong>å®æˆ˜åœºæ™¯</strong>â€‹ï¼šå¤–è®¾éœ€è¦æ¨æŒ½è¾“å‡ºç‰¹æ€§çš„åœºæ™¯ï¼Œæ¯”å¦‚ UART çš„ TX å¼•è„šï¼ˆå¤ç”¨ä¸ºä¸²å£å¤–è®¾ï¼Œæ¨æŒ½è¾“å‡º TTL ç”µå¹³ï¼‰ã€SPI çš„ MOSIã€SCK å¼•è„šï¼ˆå¤ç”¨ä¸º SPI å¤–è®¾ï¼Œæ¨æŒ½è¾“å‡ºï¼‰ã€å®šæ—¶å™¨çš„ PWM è¾“å‡ºå¼•è„šï¼ˆå¤ç”¨ä¸ºå®šæ—¶å™¨å¤–è®¾ï¼Œæ¨æŒ½è¾“å‡º PWM æ³¢å½¢ï¼‰ã€‚</p>
<p>â€‹<strong>å…³é”®æ³¨æ„</strong>â€‹ï¼šå¤ç”¨è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œè½¯ä»¶ä¸èƒ½å†é€šè¿‡ GPIO å¯„å­˜å™¨æ§åˆ¶å¼•è„šç”µå¹³ï¼Œå¦åˆ™ä¼šä¸å¤–è®¾æ§åˆ¶å†²çªï¼Œå¯¼è‡´åŠŸèƒ½å¼‚å¸¸ï¼›éœ€å…ˆé…ç½® GPIO ä¸ºå¯¹åº”å¤ç”¨åŠŸèƒ½ï¼Œå†åˆå§‹åŒ–å¤–è®¾ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ STM32F103 æ ‡å‡†åº“ä¸‹ï¼Œè¯¥æ¨¡å¼çš„ GPIO é…ç½®ä»£ç ç¤ºä¾‹ï¼ˆä»¥ PA9 å¼•è„šä¸ºä¾‹ï¼Œå¤ç”¨ä¸º UART1_TXï¼Œæ¨æŒ½è¾“å‡ºï¼‰ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_gpio.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x_usart.h"</span></span>

<span class="hljs-comment">// å¤ç”¨æ¨æŒ½è¾“å‡ºæ¨¡å¼é…ç½®ï¼ˆPA9ï¼Œå¤ç”¨ä¸ºUART1_TXï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">GPIO_AF_PushPullOutput_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>
{
    GPIO_InitTypeDef GPIO_InitStructure;
    USART_InitTypeDef USART_InitStructure;
    
    <span class="hljs-comment">// 1. ä½¿èƒ½GPIOAå’ŒUART1æ—¶é’Ÿ</span>
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_USART1, ENABLE);
    
    <span class="hljs-comment">// 2. é…ç½®PA9ä¸ºå¤ç”¨æ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼ˆUART1_TXå¤ç”¨åŠŸèƒ½ï¼‰</span>
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;          <span class="hljs-comment">// é€‰æ‹©PA9å¼•è„šï¼ˆUART1_TXå¯¹åº”å¼•è„šï¼‰</span>
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;    <span class="hljs-comment">// å¤ç”¨æ¨æŒ½è¾“å‡ºï¼ˆAF_PP = Alternate Function Push Pullï¼‰</span>
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  <span class="hljs-comment">// è¾“å‡ºé€Ÿåº¦50MHz</span>
    
    <span class="hljs-comment">// 3. åˆå§‹åŒ–GPIOAï¼ˆæ— éœ€å¤–æ¥ç”µé˜»ï¼Œæ¨æŒ½è¾“å‡ºå¯ä¸»åŠ¨è¾“å‡ºé«˜ä½ç”µå¹³ï¼‰</span>
    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);
    
    <span class="hljs-comment">// 4. åˆå§‹åŒ–UART1ï¼ˆå¤–è®¾æ§åˆ¶GPIOè¾“å‡ºï¼‰</span>
    USART_InitStructure.USART_BaudRate = <span class="hljs-number">9600</span>;         <span class="hljs-comment">// æ³¢ç‰¹ç‡9600</span>
    USART_InitStructure.USART_WordLength = USART_WordLength_8b; <span class="hljs-comment">// 8ä½æ•°æ®ä½</span>
    USART_InitStructure.USART_StopBits = USART_StopBits_1;     <span class="hljs-comment">// 1ä½åœæ­¢ä½</span>
    USART_InitStructure.USART_Parity = USART_Parity_No;        <span class="hljs-comment">// æ— æ ¡éªŒä½</span>
    USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None; <span class="hljs-comment">// æ— ç¡¬ä»¶æµæ§</span>
    USART_InitStructure.USART_Mode = USART_Mode_Tx;            <span class="hljs-comment">// ä»…å‘é€æ¨¡å¼</span>
    USART_Init(USART1, &amp;USART_InitStructure);
    
    <span class="hljs-comment">// 5. ä½¿èƒ½UART1</span>
    USART_Cmd(USART1, ENABLE);
}

<span class="hljs-comment">// å¤ç”¨æ¨æŒ½è¾“å‡ºå‘é€æ•°æ®ï¼ˆç¤ºä¾‹ï¼šUARTå‘é€å­—ç¬¦ä¸²ï¼‰</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">USART_SendString_AF_PP</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> *str)</span>
{
    <span class="hljs-keyword">while</span>(*str != <span class="hljs-string">'\0'</span>)
    {
        <span class="hljs-comment">// ç­‰å¾…å‘é€ç¼“å†²åŒºä¸ºç©º</span>
        <span class="hljs-keyword">while</span>(USART_GetFlagStatus(USART1, USART_FLAG_TXE) == RESET);
        <span class="hljs-comment">// å‘é€ä¸€ä¸ªå­—ç¬¦ï¼ˆç”±UARTå¤–è®¾æ§åˆ¶PA9è¾“å‡ºï¼‰</span>
        USART_SendData(USART1, *str);
        str++;
    }
}
</code></pre>
<p>å…³é”®ï¼š<code>GPIO_Mode_AF_PP</code> å¯¹åº”å¤ç”¨æ¨æŒ½è¾“å‡ºï¼Œæ˜¯æœ€å¸¸ç”¨çš„å¤ç”¨æ¨¡å¼ï¼Œæ— éœ€å¤–æ¥ç”µé˜»ï¼Œå¤–è®¾å¯ç›´æ¥æ§åˆ¶ GPIO ä¸»åŠ¨è¾“å‡ºé«˜ä½ç”µå¹³ï¼Œé€‚é… UARTã€SPI ç­‰å¤šæ•°å¤–è®¾ã€‚</p>
<h2 data-id="heading-12">å››ã€æ ¸å¿ƒå¯¹æ¯”ä¸å®æˆ˜é€‰å‹æŒ‡å—ï¼ˆå¿…çœ‹ï¼‰</h2>
<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¿«é€Ÿé€‰å‹ï¼Œé¿å…è¸©å‘ï¼Œè¿™é‡Œæ•´ç†äº†å…«ç§æ¨¡å¼çš„æ ¸å¿ƒå¯¹æ¯”å’Œé€‰å‹æŠ€å·§ï¼Œç»“åˆå®é™…å¼€å‘åœºæ™¯æ€»ç»“ï¼Œç›´æ¥å¥—ç”¨å³å¯ã€‚</p>



























































<table><thead><tr><th>æ¨¡å¼ç±»å‹</th><th>æ ¸å¿ƒç‰¹ç‚¹</th><th>å…¸å‹åº”ç”¨</th><th>å…³é”®æ³¨æ„</th></tr></thead><tbody><tr><td>æµ®ç©ºè¾“å…¥</td><td>é«˜é˜»æŠ—ï¼Œæ— å›ºå®šç”µå¹³ï¼Œç”±å¤–éƒ¨å†³å®š</td><td>å¤–éƒ¨æœ‰å›ºå®šç”µå¹³çš„ä¿¡å·æ£€æµ‹ï¼ˆå¦‚ä¸²å£ RXï¼‰</td><td>é¿å…å•ç‹¬ç”¨äºæ— å¤–éƒ¨ç”µå¹³çš„åœºæ™¯</td></tr><tr><td>ä¸Šæ‹‰è¾“å…¥</td><td>å†…éƒ¨ä¸Šæ‹‰ï¼Œé»˜è®¤é«˜ç”µå¹³ï¼Œå¤–éƒ¨å¯æ‹‰ä½</td><td>æŒ‰é”®æ£€æµ‹ã€NPN å‹ä¼ æ„Ÿå™¨</td><td>æ— éœ€å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»</td></tr><tr><td>ä¸‹æ‹‰è¾“å…¥</td><td>å†…éƒ¨ä¸‹æ‹‰ï¼Œé»˜è®¤ä½ç”µå¹³ï¼Œå¤–éƒ¨å¯æ‹‰é«˜</td><td>PNP å‹ä¼ æ„Ÿå™¨ã€é«˜ç”µå¹³è§¦å‘ä¿¡å·</td><td>ä¸ä¸Šæ‹‰è¾“å…¥æ ¹æ®ç”µå¹³ææ€§é€‰æ‹©</td></tr><tr><td>æ¨¡æ‹Ÿè¾“å…¥</td><td>æ–­å¼€æ•°å­—ç¼“å†²ï¼Œæ¥å…¥ ADCï¼Œé‡‡é›†æ¨¡æ‹Ÿé‡</td><td>ç”µä½å™¨ã€æ¸©åº¦/æ¹¿åº¦/å…‰ç…§ä¼ æ„Ÿå™¨</td><td>ä»…æ”¯æŒ ADC å¼•è„šï¼Œé¿å…æ¥å¼ºç”µ</td></tr><tr><td>å¼€æ¼è¾“å‡º</td><td>ä»…èƒ½ä¸»åŠ¨è¾“å‡ºä½ç”µå¹³ï¼Œéœ€å¤–éƒ¨ä¸Šæ‹‰</td><td>I2C æ€»çº¿ã€çº¿ä¸åŠŸèƒ½ã€å…±é˜³æ LED</td><td>å¿…é¡»å¤–æ¥ä¸Šæ‹‰ç”µé˜»</td></tr><tr><td>æ¨æŒ½è¾“å‡º</td><td>ä¸»åŠ¨è¾“å‡ºé«˜ä½ç”µå¹³ï¼Œé©±åŠ¨èƒ½åŠ›å¼º</td><td>LEDã€ä¸²å£ TXã€å°å‹ç»§ç”µå™¨</td><td>ä¸å¯å¤šå¼•è„šç›´æ¥è¿æ¥</td></tr><tr><td>å¤ç”¨å¼€æ¼è¾“å‡º</td><td>å¤–è®¾æ§åˆ¶ï¼Œå¼€æ¼é©±åŠ¨ï¼Œéœ€å¤–éƒ¨ä¸Šæ‹‰</td><td>I2C_SDA/SCLã€SPI_MISO</td><td>è½¯ä»¶ä¸å¯æ§åˆ¶ GPIO ç”µå¹³</td></tr><tr><td>å¤ç”¨æ¨æŒ½è¾“å‡º</td><td>å¤–è®¾æ§åˆ¶ï¼Œæ¨æŒ½é©±åŠ¨ï¼Œæ— éœ€å¤–éƒ¨ç”µé˜»</td><td>UART_TXã€SPI_MOSIã€PWM è¾“å‡º</td><td>å…ˆé…ç½®å¤ç”¨åŠŸèƒ½ï¼Œå†åˆå§‹åŒ–å¤–è®¾</td></tr></tbody></table>
<h3 data-id="heading-13">é€‰å‹æ ¸å¿ƒæŠ€å·§</h3>
<ul>
<li>è¾“å…¥åœºæ™¯ï¼šæ— å¤–éƒ¨ç”µå¹³ â†’ ä¸Šæ‹‰/ä¸‹æ‹‰è¾“å…¥ï¼›æœ‰å¤–éƒ¨ç”µå¹³ â†’ æµ®ç©ºè¾“å…¥ï¼›éœ€é‡‡é›†æ¨¡æ‹Ÿé‡ â†’ æ¨¡æ‹Ÿè¾“å…¥ã€‚</li>
<li>è¾“å‡ºåœºæ™¯ï¼šç›´æ¥é©±åŠ¨ä¸­å°ç”µæµ â†’ æ¨æŒ½è¾“å‡ºï¼›éœ€çº¿ä¸/æ€»çº¿é€šä¿¡ â†’ å¼€æ¼è¾“å‡ºï¼›å¤–è®¾åŠŸèƒ½ â†’ å¤ç”¨æ¨æŒ½/å¼€æ¼è¾“å‡ºï¼ˆåŒ¹é…å¤–è®¾éœ€æ±‚ï¼‰ã€‚</li>
<li>å¤ç”¨è¾“å‡ºï¼šå…ˆç¡®å®šå¤–è®¾çš„è¾“å‡ºé©±åŠ¨æ–¹å¼ï¼ˆå¦‚ I2C ç”¨å¼€æ¼ï¼ŒUART ç”¨æ¨æŒ½ï¼‰ï¼Œå†é…ç½® GPIO ä¸ºå¯¹åº”å¤ç”¨æ¨¡å¼ã€‚</li>
</ul>
<h2 data-id="heading-14">äº”ã€æ€»ç»“</h2>
<p>GPIO çš„å…«ç§å·¥ä½œæ¨¡å¼ï¼Œæœ¬è´¨æ˜¯â€œè¾“å…¥/è¾“å‡ºâ€å’Œâ€œé©±åŠ¨æ–¹å¼/æ§åˆ¶ä¸»ä½“â€çš„ç»„åˆã€‚è¾“å…¥æ¨¡å¼çš„æ ¸å¿ƒæ˜¯â€œå¦‚ä½•ç¨³å®šæ¥æ”¶å¤–éƒ¨ä¿¡å·â€ï¼Œè¾“å‡ºæ¨¡å¼çš„æ ¸å¿ƒæ˜¯â€œå¦‚ä½•é«˜æ•ˆã€ç¨³å®šåœ°å‘å¤–éƒ¨å‘é€ä¿¡å·â€ï¼Œå¤ç”¨æ¨¡å¼åˆ™æ˜¯â€œå°† GPIO äº¤ç»™å¤–è®¾ï¼Œå®ç°æ›´å¤æ‚çš„åŠŸèƒ½â€ã€‚</p>
<p>å¯¹äºåµŒå…¥å¼å¼€å‘è€…è€Œè¨€ï¼Œåƒé€è¿™å…«ç§æ¨¡å¼ï¼Œä¸ä»…èƒ½ç®€åŒ–ç”µè·¯è®¾è®¡ã€é¿å…å¼€å‘è¸©å‘ï¼Œæ›´èƒ½æ ¹æ®å®é™…é¡¹ç›®éœ€æ±‚ï¼Œé€‰æ‹©æœ€é€‚åˆçš„ GPIO æ¨¡å¼ï¼Œæå‡è®¾å¤‡çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚æ¯”å¦‚ï¼ŒåŒæ ·æ˜¯æŒ‰é”®æ£€æµ‹ï¼Œä¸Šæ‹‰è¾“å…¥æ¯”æµ®ç©ºè¾“å…¥æ›´ç¨³å®šï¼›åŒæ ·æ˜¯æ€»çº¿é€šä¿¡ï¼Œå¼€æ¼è¾“å‡ºæ¯”æ¨æŒ½è¾“å‡ºæ›´åˆé€‚ã€‚</p>
<p>å»ºè®®å¤§å®¶åœ¨å®é™…å¼€å‘ä¸­ï¼Œç»“åˆå•ç‰‡æœº datasheetï¼Œå¯¹ç…§æ¯ç§æ¨¡å¼çš„é…ç½®æ–¹æ³•ï¼Œäº²æ‰‹è°ƒè¯•ï¼ˆæ¯”å¦‚ç”¨æ¨æŒ½è¾“å‡ºé©±åŠ¨ LEDï¼Œç”¨ä¸Šæ‹‰è¾“å…¥æ£€æµ‹æŒ‰é”®ï¼Œç”¨å¼€æ¼è¾“å‡ºæ¨¡æ‹Ÿ I2C é€šä¿¡ï¼‰ï¼Œåªæœ‰å®è·µæ‰èƒ½çœŸæ­£æŒæ¡å…¶ä¸­çš„ç²¾é«“ã€‚</p>
<p>åç»­æˆ‘ä¼šç»“åˆå…·ä½“å•ç‰‡æœºï¼ˆå¦‚ STM32ã€51 å•ç‰‡æœºï¼‰ï¼Œåˆ†äº«å…«ç§æ¨¡å¼çš„å…·ä½“é…ç½®ä»£ç å’Œå®æˆ˜æ¡ˆä¾‹ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å…³æ³¨åç»­æ›´æ–°~</p>
<p>å¯å…³æ³¨æˆ‘çš„åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2F" target="_blank" title="https://" ref="nofollow noopener noreferrer">blog.csdn.net/qq_30095907â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis åšåˆ†å¸ƒå¼ Session]]></title>    <link>https://juejin.cn/post/7604037348608360486</link>    <guid>https://juejin.cn/post/7604037348608360486</guid>    <pubDate>2026-02-09T01:15:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604037348608360486" data-draft-id="7602464510607212570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis åšåˆ†å¸ƒå¼ Session"/> <meta itemprop="keywords" content="åç«¯,Spring Cloud,å¾®æœåŠ¡"/> <meta itemprop="datePublished" content="2026-02-09T01:15:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MrSYJ"/> <meta itemprop="url" content="https://juejin.cn/user/2752832848799726"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis åšåˆ†å¸ƒå¼ Session
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2752832848799726/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MrSYJ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T01:15:07.000Z" title="Mon Feb 09 2026 01:15:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>æœ€è¿‘åœ¨ç”¨SASåšæˆæƒæœåŠ¡å™¨ï¼Œé»˜è®¤æˆæƒæœåŠ¡å™¨çš„sessionæ˜¯åŸºäºtomcatæœåŠ¡å™¨çš„ï¼Œä½†æ˜¯å¦‚æœä½ çš„ SAS éƒ¨ç½²äº†å¤šå°å®ä¾‹ï¼ˆé›†ç¾¤ï¼‰ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ¯”å¦‚ç”¨æˆ·åœ¨ A æœºå™¨ç™»å½•ï¼Œç¡®è®¤æˆæƒæ—¶è¯·æ±‚è½åˆ°äº† B æœºå™¨ï¼ŒB æ‰¾ä¸åˆ° Session å°±ä¼šè®©ç”¨æˆ·é‡æ–°ç™»å½•ã€‚æ²¡æœ‰ Redisï¼ŒSAS å¾ˆéš¾åšé›†ç¾¤éƒ¨ç½²ï¼Œä¹Ÿæ— æ³•æä¾›ç¨³å®šçš„å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ä½“éªŒã€‚</p>
<h2 data-id="heading-1">éœ€è¦å¼•å…¥çš„ä¾èµ–</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.session<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-session-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">å°†sessionä¿å­˜åˆ°redisçš„åŸç†</h2>
<p>é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½ä¸€ç‚¹,sessionçš„åˆ›å»ºæ˜¯æ˜¯ä¾èµ–<code>HttpServletRequest.getSession()</code>,ä½†æ˜¯ç›´æ¥è°ƒç”¨å°±æ˜¯åˆ›å»ºæœ¬åœ°sessionï¼Œæ‰€ä»¥æ¡†æ¶å°±å¿…é¡»å·æ¢æ¢æŸ±ã€‚Spring Sessionå°±æ˜¯åˆ©ç”¨äº† Filter æ¨¡å¼ï¼Œé€šè¿‡è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰åŒ…è£…äº†åŸå§‹çš„ Request å¯¹è±¡ã€‚é‚£è¿™ä¸ªæ ¸å¿ƒè¿‡æ»¤å™¨ç»„ä»¶å°±æ˜¯<code>SessionRepositoryFilter</code>ã€‚</p>
<p><code>SessionRepositoryFilter</code> è§åçŸ¥æ„è´Ÿè´£sessionæŒä¹…åŒ–çš„è¿‡æ»¤å™¨ã€‚</p>
<p>è¿‡æ»¤å™¨æºç ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec7bf3f6bdc2451d805c88cd732f8526~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJTWUo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771204507&amp;x-signature=YUVbRZXJei2c790cV2ie5cYD074%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><code>SessionRepositoryFilter</code> ä¼šç‡å…ˆæ‹¦æˆªåˆ°è¿™ä¸ªè¯·æ±‚ã€‚</p>
</li>
<li>
<p>å®ƒå¹¶ä¸ä¼šç›´æ¥æŠŠåŸå§‹çš„ <code>HttpServletRequest</code> ä¼ ç»™åé¢çš„ Controllerã€‚</p>
</li>
</ul>
<p>å®ƒåˆ›å»ºäº†ä¸¤ä¸ªåŒ…è£…ç±»ï¼š</p>
<ul>
<li><strong><code>SessionRepositoryRequestWrapper</code></strong>: ç»§æ‰¿è‡ª <code>HttpServletRequestWrapper</code>ã€‚</li>
<li><strong><code>SessionRepositoryResponseWrapper</code></strong>: ç»§æ‰¿è‡ª <code>HttpServletResponseWrapper</code>ã€‚</li>
</ul>
<p>é‡ç‚¹æ˜¯å®ƒé‡å†™äº†åŒ…è£…ç±»ä¸­çš„<strong>getSession()</strong> æ–¹æ³•</p>
<p>å½“ä½ è¿è¡Œ <code>request.getSession()</code> æ—¶ï¼Œå®é™…ä¸Šè¿è¡Œçš„æ˜¯åŒ…è£…ç±»é‡Œçš„æ–¹æ³•.</p>
<p><strong>ä¸å†å» Tomcat çš„å†…å­˜é‡Œæ‰¾</strong>ï¼Œè€Œæ˜¯å» <code>SessionRepository</code>ï¼ˆå¯¹äºä½ æ¥è¯´å°±æ˜¯ <code>RedisIndexedSessionRepository</code>ï¼‰é‡Œæ‰¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8058139018eb4b7dbc604b1ba449762b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJTWUo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771204507&amp;x-signature=eBwaNcKtpdT4D9VobxRBADGlNE0%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾ springåœ¨æ„å»ºSessionRepositoryFilterè¿‡æ»¤å™¨çš„æ—¶å€™ï¼Œæ³¨å…¥çš„å°±æ˜¯RedisIndexedSessionRepositoryã€‚ä¸“é—¨è´Ÿè´£sessionçš„å¢åˆ æ”¹æŸ¥ã€‚</p>
<p>SessionRepositoryæ˜¯é¡¶çº§æŠ½è±¡æ¥å£ï¼ŒRedisIndexedSessionRepositoryå®ç°äº†è¯¥æ¥å£</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d97f5d7524d44466b440a75a9b0de34c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJTWUo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771204507&amp;x-signature=cInxyc8leq645XGROBWODZkWpv0%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">åŒ…è£…ç±»çš„getsessionæ–¹æ³•</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4b47fbddec14e95b3797de365963a2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJTWUo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771204507&amp;x-signature=jBC5ZID744mtKcY6sGRq2OS%2Bkag%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3b05c4304ef4e82838cef37f89c1204~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJTWUo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771204507&amp;x-signature=kYDOEBfiHUb2QRDZaq9Evw6m7h0%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸Šé¢æ˜¯getsessionåŒ…è£…åçš„æºç ï¼Œæˆ‘æŠŠé‡è¦çš„ä»£ç æ ‡è®°å‡ºæ¥äº†ï¼Œæˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åˆ†æã€‚</p>
<h3 data-id="heading-4">é¦–å…ˆæ˜¯getCurrentSession</h3>
<p>å®ƒçš„æœ¬æ¬¡æ˜¯è¯·æ±‚å†…ç¼“å­˜ï¼Œ<code>SessionRepositoryFilter</code> åŒ…è£…äº† Requestã€‚åœ¨åŒä¸€ä¸ª HTTP è¯·æ±‚çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ï¼ˆä»è¿›å…¥ Filter åˆ° Controller å†åˆ° Filter å‡ºå»ï¼‰ï¼Œä½ å¯èƒ½ä¼šå¤šæ¬¡è°ƒç”¨ <code>request.getSession()</code>ã€‚</p>
<p>ä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼ŒSpring Session æ²¡å¿…è¦æ¯æ¬¡è°ƒç”¨ <code>getSession()</code> éƒ½å»æŸ¥ä¸€é Redisã€‚æ‰€ä»¥ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€æ¬¡è°ƒç”¨ <code>getSession()</code></strong> ï¼šä¼šå»æ‰§è¡Œ <code>getRequestedSession()</code>ï¼ˆæŸ¥ Redis/Cookieï¼‰ï¼ŒæŸ¥åˆ°åæŠŠç»“æœå­˜å…¥ Request çš„ä¸€ä¸ªå†…éƒ¨å±æ€§ï¼ˆAttributeï¼‰é‡Œã€‚</li>
<li><strong>ç¬¬äºŒæ¬¡åŠä»¥åè°ƒç”¨</strong>ï¼š<code>getCurrentSession()</code> å°±èƒ½ç›´æ¥ä» Request å±æ€§é‡ŒæŠŠåˆšæ‰é‚£ä¸ªå¯¹è±¡æ‹¿å‡ºæ¥ã€‚</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">HttpSessionWrapper <span class="hljs-attr">currentSession</span> = getCurrentSession()<span class="hljs-comment">;</span>
if (currentSession != null) {
   return currentSession<span class="hljs-comment">;</span>
}
</code></pre>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-title class_">HttpSessionWrapper</span> <span class="hljs-title function_">getCurrentSession</span>(<span class="hljs-params"/>) {
   <span class="hljs-keyword">return</span> (<span class="hljs-title class_">HttpSessionWrapper</span>) <span class="hljs-title function_">getAttribute</span>(<span class="hljs-variable constant_">CURRENT_SESSION_ATTR</span>);
}

<span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">getAttribute</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">getAttribute</span>(name);
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´è¯·æ±‚ç¬¬ä¸€æ¬¡è¿‡æ¥ï¼Œè°ƒç”¨request.getSession()ï¼Œçœ‹çœ‹å½“å‰çš„ <code>HttpServletRequest</code> å¯¹è±¡é‡Œæ˜¯ä¸æ˜¯å·²ç»æœ‰ä¸€ä¸ª <code>HttpSessionWrapper</code> äº†ï¼Œç¬¬ä¸€æ¬¡è‚¯å®šæ²¡æœ‰å˜›ï¼Œå°±ä¼šè°ƒç”¨getRequestedSession()ï¼ŒçœŸæ­£å»æ‹¿ <strong>Cookie</strong>ï¼ˆè·å– SessionIdï¼‰ï¼Œç„¶åæ‹¿ç€ ID å» <strong>Redis</strong> æ‰¾ã€‚ å¦‚æœ Redis æ‰¾åˆ°äº†ï¼Œå°± new ä¸€ä¸ªåŒ…è£…ç±»ï¼Œå¹¶è°ƒç”¨ <code>setCurrentSession()</code> æŠŠå®ƒå­˜åˆ° Request å±æ€§é‡Œ</p>
<p>å®ƒå°±åƒæ˜¯ä¸€ä¸ª**â€œä¸€çº§ç¼“å­˜â€**ï¼š</p>
<ul>
<li><strong>ä¸€çº§ç¼“å­˜</strong>ï¼š<code>getCurrentSession()</code> â€”â€” å­˜åœ¨å½“å‰è¯·æ±‚å¯¹è±¡é‡Œï¼Œç”Ÿå‘½å‘¨æœŸä»…é™æœ¬æ¬¡è¯·æ±‚ã€‚</li>
<li><strong>äºŒçº§ç¼“å­˜</strong>ï¼š<code>getRequestedSession()</code> â€”â€” å­˜åœ¨ Redis é‡Œï¼Œç”Ÿå‘½å‘¨æœŸæ˜¯å…¨å±€çš„ã€‚</li>
</ul>
<p><strong>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ åœ¨åŒä¸€ä¸ª Request é‡Œåå¤è°ƒç”¨ <code>getSession()</code>ï¼Œæ‹¿åˆ°çš„æ°¸è¿œæ˜¯åŒä¸€ä¸ªå†…å­˜å¯¹è±¡çš„åŸå› ã€‚</strong></p>
<h3 data-id="heading-5">æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹<strong>getRequestedSession</strong></h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e904ea157a44146b595d0079681b25f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJTWUo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771204507&amp;x-signature=LlsvQNPpwY6txvRjpjyPcq5eLg8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc436212eef34528aad016b21f058251~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJTWUo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771204507&amp;x-signature=hVQHR4CqEV0jkMRbhn%2B%2FFMNR2pk%3D" alt="image.png" loading="lazy"/></p>
<p>ä½¿ç”¨äº†<code>requestedSessionCached</code>æ ‡è®°ï¼Œé˜²æ­¢æ¯æ¬¡è°ƒç”¨<code>request.getSession()</code>éƒ½ä¼šè§¦å‘Redis çš„ <code>HGETALL</code> æŸ¥è¯¢ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœå½“å‰å·²ç»ç¼“å­˜äº†å°±ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„ï¼Œå¦‚æœæ²¡æœ‰ç¼“å­˜å°±å»redisä¸­çœ‹æœ‰æ²¡æœ‰ã€‚ï¼Œé¿å…äº†å¤šæ¬¡ç½‘ç»œIO.</p>
<h3 data-id="heading-6">setCurrentSession</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90d7c0380991416fb84a2238095b0503~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJTWUo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771204507&amp;x-signature=brTIFdOtSjpRpJWIQUQF2Fn%2B0FY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8e445d94a194d4bb54db28e6ec803fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJTWUo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771204507&amp;x-signature=8RmvXssFRDxW%2F16s0dyHm99cNjM%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœä»redisä¸­æŸ¥è¯¢åˆ°äº†å½“å‰çš„sessionï¼Œå°±è°ƒç”¨<strong>setCurrentSession</strong>ä¿å­˜åˆ°å½“å‰è¯·æ±‚çš„ä½œç”¨åŸŸå†…ï¼Œè¿™æ ·å°±å’Œç¬¬ä¸€æ­¥é—­ç¯äº†ï¼Œç¬¬ä¸€æ­¥æ˜¯å…ˆä»requestä½œç”¨åŸŸå»è·å–ã€‚äºŒçº§ç¼“å­˜é˜²æ­¢å¤šæ¬¡ç½‘ç»œIO</p>
<h3 data-id="heading-7">createSession()</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fabd46f8393642e7b949d20f875797a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTXJTWUo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771204507&amp;x-signature=PGHAtC4Rng%2BBOTxCbM9oynVD%2FJo%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹Ÿå°±æ˜¯è¯´å¦‚æœç”¨æˆ·æ²¡å¸¦cookieæˆ–è€…Cookie é‡Œçš„ ID åœ¨ Redis é‡ŒæŸ¥ä¸åˆ°ï¼Œå°±ä¼š<code>createSession()</code> äº§ç”Ÿä¸€ä¸ªæ–°çš„ IDã€‚å­˜åœ¨å†…å­˜ä¸­ï¼Œç„¶åè°ƒç”¨<code>setCurrentSession()</code> æŠŠè¿™ä¸ªæ–° Session å¡è¿› Request çš„å±æ€§ï¼Œç»‘å®šåˆ°è¯·æ±‚ä¸Šã€‚ä¾›åç»­ä½¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£Rediså“¨å…µï¼ˆSentinelï¼‰åŸç†ï¼šé«˜å¯ç”¨æ¶æ„çš„æ ¸å¿ƒå®ˆæŠ¤è€…]]></title>    <link>https://juejin.cn/post/7603781883974664211</link>    <guid>https://juejin.cn/post/7603781883974664211</guid>    <pubDate>2026-02-09T01:16:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603781883974664211" data-draft-id="7604084016509763625" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£Rediså“¨å…µï¼ˆSentinelï¼‰åŸç†ï¼šé«˜å¯ç”¨æ¶æ„çš„æ ¸å¿ƒå®ˆæŠ¤è€…"/> <meta itemprop="keywords" content="Redis"/> <meta itemprop="datePublished" content="2026-02-09T01:16:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="whatä¸¶k"/> <meta itemprop="url" content="https://juejin.cn/user/2578801884147418"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£Rediså“¨å…µï¼ˆSentinelï¼‰åŸç†ï¼šé«˜å¯ç”¨æ¶æ„çš„æ ¸å¿ƒå®ˆæŠ¤è€…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2578801884147418/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    whatä¸¶k
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T01:16:09.000Z" title="Mon Feb 09 2026 01:16:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒRedis å‡­å€Ÿé«˜æ€§èƒ½ã€ä½å»¶è¿Ÿçš„ç‰¹æ€§æˆä¸ºç¼“å­˜ä¸æ•°æ®å­˜å‚¨çš„é¦–é€‰æ–¹æ¡ˆï¼Œä½†å•ç‚¹æ•…éšœå§‹ç»ˆæ˜¯åˆ¶çº¦å…¶ç”Ÿäº§å¯ç”¨æ€§çš„å…³é”®ç“¶é¢ˆã€‚Redis ä¸»ä»å¤åˆ¶æœºåˆ¶è™½å®ç°äº†æ•°æ®å†—ä½™ï¼Œå´æ— æ³•è‡ªåŠ¨å¤„ç†ä¸»èŠ‚ç‚¹æ•…éšœï¼Œéœ€æ‰‹åŠ¨ä»‹å…¥åˆ‡æ¢ã€‚Redis å“¨å…µï¼ˆSentinelï¼‰ä½œä¸ºå®˜æ–¹åŸç”Ÿçš„é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡åˆ†å¸ƒå¼ç›‘æ§ã€è‡ªåŠ¨æ•…éšœè½¬ç§»ä¸é…ç½®åŒæ­¥ï¼Œå®Œç¾è§£å†³äº†è¿™ä¸€ç—›ç‚¹ï¼Œæˆä¸ºä¸­å°è§„æ¨¡ Redis é›†ç¾¤é«˜å¯ç”¨æ¶æ„çš„åŸºçŸ³ã€‚æœ¬æ–‡å°†ä»æ ¸å¿ƒå®šä½ã€å·¥ä½œæœºåˆ¶ã€æ•…éšœè½¬ç§»æµç¨‹ã€å®æˆ˜é…ç½®åŠç”Ÿäº§ä¼˜åŒ–ç­‰æ–¹é¢ï¼Œå…¨æ–¹ä½è§£æ Redis å“¨å…µçš„åº•å±‚åŸç†ä¸å®è·µè¦ç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å“¨å…µçš„æ ¸å¿ƒå®šä½ä¸æ ¸å¿ƒåŠŸèƒ½</h2>
<p>Redis å“¨å…µå¹¶éç‹¬ç«‹çš„æ•°æ®åº“ç»„ä»¶ï¼Œè€Œæ˜¯ä¸€å¥—è¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­çš„åˆ†å¸ƒå¼ç›‘æ§ä¸æ²»ç†ç³»ç»Ÿï¼Œå…¶æ ¸å¿ƒä½¿å‘½æ˜¯ä¸º Redis ä¸»ä»é›†ç¾¤æä¾›è‡ªåŠ¨åŒ–çš„é«˜å¯ç”¨ä¿éšœã€‚å“¨å…µé›†ç¾¤ä¸ Redis ä¸»ä»èŠ‚ç‚¹ååŒå·¥ä½œï¼Œæ„æˆå®Œæ•´çš„é«˜å¯ç”¨æ¶æ„ï¼Œä¸»è¦æ‰¿æ‹…å››å¤§æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<h3 data-id="heading-1">1. æŒç»­ç›‘æ§ï¼ˆMonitoringï¼‰</h3>
<p>æ¯ä¸ªå“¨å…µèŠ‚ç‚¹ä¼šä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡ï¼Œå‘è¢«ç›‘æ§çš„æ‰€æœ‰ä¸»èŠ‚ç‚¹ã€ä»èŠ‚ç‚¹åŠå…¶ä»–å“¨å…µèŠ‚ç‚¹å‘é€ <code>PING</code> å‘½ä»¤ï¼Œé€šè¿‡æ£€æµ‹æ˜¯å¦æ”¶åˆ°æœ‰æ•ˆ <code>PONG</code> å“åº”ï¼Œåˆ¤æ–­ç›®æ ‡èŠ‚ç‚¹çš„å¥åº·çŠ¶æ€ã€‚è¿™ç§é«˜é¢‘å¿ƒè·³æ£€æµ‹æœºåˆ¶æ˜¯æ•…éšœå‘ç°çš„åŸºç¡€ï¼Œç¡®ä¿èƒ½å¿«é€Ÿæ„ŸçŸ¥èŠ‚ç‚¹å¼‚å¸¸ã€‚</p>
<h3 data-id="heading-2">2. æ•…éšœé€šçŸ¥ï¼ˆNotificationï¼‰</h3>
<p>å½“å“¨å…µæ£€æµ‹åˆ°èŠ‚ç‚¹æ•…éšœï¼ˆå°¤å…¶æ˜¯ä¸»èŠ‚ç‚¹æ•…éšœï¼‰æ—¶ï¼Œä¼šé€šè¿‡ Redis çš„å‘å¸ƒè®¢é˜…ï¼ˆPub/Subï¼‰æœºåˆ¶ï¼Œå‘å…¶ä»–å“¨å…µèŠ‚ç‚¹ã€å®¢æˆ·ç«¯åŠè¿ç»´ç³»ç»Ÿå‘é€é€šçŸ¥ã€‚å®¢æˆ·ç«¯å¯é€šè¿‡è®¢é˜…å“¨å…µé¢‘é“å®æ—¶è·å–é›†ç¾¤çŠ¶æ€å˜åŒ–ï¼Œè¿ç»´ç³»ç»Ÿåˆ™å¯åŸºäºé€šçŸ¥è§¦å‘å‘Šè­¦æµç¨‹ï¼Œå®ç°æ•…éšœçš„å¿«é€Ÿå“åº”ã€‚</p>
<h3 data-id="heading-3">3. è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼ˆAutomatic Failoverï¼‰</h3>
<p>è¿™æ˜¯å“¨å…µæœ€æ ¸å¿ƒçš„åŠŸèƒ½ã€‚å½“ä¸»èŠ‚ç‚¹è¢«ç¡®è®¤æ•…éšœåï¼Œå“¨å…µé›†ç¾¤ä¼šè‡ªåŠ¨æ‰§è¡Œæ•…éšœè½¬ç§»æµç¨‹ï¼šä»å€™é€‰ä»èŠ‚ç‚¹ä¸­é€‰ä¸¾æ–°ä¸»èŠ‚ç‚¹ã€å°†å…¶ä»–ä»èŠ‚ç‚¹é‡æ–°é…ç½®ä¸ºæ–°ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ã€é€šçŸ¥å®¢æˆ·ç«¯æ›´æ–°ä¸»èŠ‚ç‚¹åœ°å€ï¼Œå…¨ç¨‹æ— éœ€äººå·¥å¹²é¢„ï¼Œæœ€å¤§é™åº¦å‡å°‘æœåŠ¡ä¸­æ–­æ—¶é—´ã€‚</p>
<h3 data-id="heading-4">4. é…ç½®æä¾›è€…ï¼ˆConfiguration Providerï¼‰</h3>
<p>å“¨å…µä½œä¸ºå®¢æˆ·ç«¯æœåŠ¡å‘ç°çš„æƒå¨æ¥æºï¼Œå®¢æˆ·ç«¯æ— éœ€ç¡¬ç¼–ç ä¸»èŠ‚ç‚¹åœ°å€ï¼Œè€Œæ˜¯é€šè¿‡è¿æ¥å“¨å…µé›†ç¾¤æŸ¥è¯¢å½“å‰å¯ç”¨çš„ä¸»èŠ‚ç‚¹åœ°å€ã€‚å½“æ•…éšœè½¬ç§»å‘ç”Ÿåï¼Œå“¨å…µä¼šåŒæ­¥æ›´æ–°ä¸»èŠ‚ç‚¹ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯é‡æ–°æŸ¥è¯¢å³å¯è·å–æ–°åœ°å€ï¼Œå®ç°è¿æ¥çš„è‡ªåŠ¨åˆ‡æ¢ã€‚</p>
<h2 data-id="heading-5">äºŒã€å“¨å…µçš„åˆ†å¸ƒå¼æ¶æ„è®¾è®¡</h2>
<p>Redis å“¨å…µæœ¬èº«æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè€Œéå•ç‚¹è¿›ç¨‹ï¼Œè¿™ä¸€è®¾è®¡æ—¨åœ¨é¿å…å“¨å…µè‡ªèº«æˆä¸ºæ–°çš„å•ç‚¹æ•…éšœã€‚ä¸€å¥—å®Œæ•´çš„å“¨å…µæ¶æ„åŒ…å«ä¸‰éƒ¨åˆ†ç»„ä»¶ï¼š</p>
<ul>
<li>â€‹**ä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰**â€‹ï¼šè´Ÿè´£å¤„ç†æ‰€æœ‰å†™æ“ä½œï¼ŒåŒæ—¶å°†æ•°æ®å¼‚æ­¥åŒæ­¥è‡³ä»èŠ‚ç‚¹ï¼Œæ˜¯é›†ç¾¤çš„æ ¸å¿ƒæ•°æ®èŠ‚ç‚¹ã€‚</li>
<li>â€‹**ä»èŠ‚ç‚¹ï¼ˆSlave/Replicaï¼‰**â€‹ï¼šé€šè¿‡ä¸»ä»å¤åˆ¶åŒæ­¥ä¸»èŠ‚ç‚¹æ•°æ®ï¼Œä»…å¤„ç†è¯»æ“ä½œï¼ˆé»˜è®¤ï¼‰ï¼Œä½œä¸ºä¸»èŠ‚ç‚¹çš„å†—ä½™å¤‡ä»½ï¼Œæ•…éšœæ—¶å¯è¢«æå‡ä¸ºæ–°ä¸»èŠ‚ç‚¹ã€‚</li>
<li>â€‹**å“¨å…µèŠ‚ç‚¹ï¼ˆSentinelï¼‰**â€‹ï¼šç‹¬ç«‹è¿è¡Œçš„ç›‘æ§è¿›ç¨‹ï¼Œå¤šä¸ªå“¨å…µèŠ‚ç‚¹æ„æˆé›†ç¾¤ï¼Œé€šè¿‡ç›¸äº’é€šä¿¡è¾¾æˆå…±è¯†ï¼Œç¡®ä¿æ•…éšœåˆ¤æ–­ä¸æ•…éšœè½¬ç§»çš„å‡†ç¡®æ€§ã€‚</li>
</ul>
<h3 data-id="heading-6">åˆ†å¸ƒå¼æ¶æ„çš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li>é™ä½è¯¯åˆ¤æ¦‚ç‡ï¼šå•ä¸€å“¨å…µèŠ‚ç‚¹å¯¹ä¸»èŠ‚ç‚¹çš„æ•…éšœåˆ¤æ–­å¯èƒ½å—ç½‘ç»œåˆ†åŒºç­‰å› ç´ å½±å“ï¼ˆå¦‚è‡ªèº«ä¸ä¸»èŠ‚ç‚¹å¤±è”ä½†ä¸»èŠ‚ç‚¹æ­£å¸¸ï¼‰ï¼Œå¤šä¸ªå“¨å…µèŠ‚ç‚¹é€šè¿‡å…±è¯†æœºåˆ¶ç¡®è®¤æ•…éšœï¼Œå¯æœ‰æ•ˆé¿å…è¯¯è§¦å‘æ•…éšœè½¬ç§»ã€‚</li>
<li>é«˜å¯ç”¨æ€§ï¼šå³ä½¿éƒ¨åˆ†å“¨å…µèŠ‚ç‚¹æ•…éšœï¼Œå‰©ä½™æ­£å¸¸èŠ‚ç‚¹ä»å¯ç»§ç»­æä¾›ç›‘æ§ä¸æ•…éšœè½¬ç§»æœåŠ¡ï¼Œç¡®ä¿å“¨å…µç³»ç»Ÿè‡ªèº«çš„ç¨³å®šæ€§ã€‚</li>
</ol>
<h3 data-id="heading-7">æ¨èéƒ¨ç½²æ–¹æ¡ˆ</h3>
<p>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå“¨å…µèŠ‚ç‚¹æ•°é‡å»ºè®®é…ç½®ä¸º 3 ä¸ªï¼ˆæˆ–ä»¥ä¸Šå¥‡æ•°ä¸ªï¼‰ï¼Œä¸”éœ€éƒ¨ç½²åœ¨ç‹¬ç«‹çš„ç‰©ç†æœºã€è™šæ‹Ÿæœºæˆ–ä¸åŒå¯ç”¨åŒºï¼Œç¡®ä¿å“¨å…µèŠ‚ç‚¹çš„æ•…éšœç‹¬ç«‹æ€§ã€‚è‹¥ä»…éƒ¨ç½² 2 ä¸ªå“¨å…µèŠ‚ç‚¹ï¼Œå½“å…¶ä¸­ä¸€ä¸ªæ•…éšœæ—¶ï¼Œå‰©ä½™èŠ‚ç‚¹æ— æ³•æ»¡è¶³â€œå¤šæ•°ç¥¨â€æ¡ä»¶ï¼Œå°†å¯¼è‡´æ•…éšœè½¬ç§»æ— æ³•æ‰§è¡Œï¼›å¥‡æ•°ä¸ªèŠ‚ç‚¹å¯é¿å…æŠ•ç¥¨åƒµå±€ï¼Œç®€åŒ–å…±è¯†è¾¾æˆæµç¨‹ã€‚</p>
<h2 data-id="heading-8">ä¸‰ã€å“¨å…µæ ¸å¿ƒå·¥ä½œæœºåˆ¶æ·±åº¦è§£æ</h2>
<p>å“¨å…µçš„å·¥ä½œæµç¨‹å¯æ‹†è§£ä¸ºâ€œæ•…éšœæ£€æµ‹â€â€œé¢†å¯¼è€…é€‰ä¸¾â€â€œæ•…éšœè½¬ç§»â€ä¸‰å¤§æ ¸å¿ƒé˜¶æ®µï¼Œå„é˜¶æ®µé€šè¿‡ç²¾å¯†çš„åˆ†å¸ƒå¼åä½œæœºåˆ¶ä¿éšœå‡†ç¡®æ€§ä¸å¯é æ€§ã€‚</p>
<h3 data-id="heading-9">1. æ•…éšœæ£€æµ‹ï¼šä¸»è§‚ä¸‹çº¿ä¸å®¢è§‚ä¸‹çº¿</h3>
<p>å“¨å…µå¯¹ä¸»èŠ‚ç‚¹çš„æ•…éšœåˆ¤æ–­å¹¶éä¸€æ­¥åˆ°ä½ï¼Œè€Œæ˜¯åˆ†ä¸ºâ€œä¸»è§‚ä¸‹çº¿ï¼ˆSDOWNï¼‰â€ä¸â€œå®¢è§‚ä¸‹çº¿ï¼ˆODOWNï¼‰â€ä¸¤ä¸ªé˜¶æ®µï¼Œé¿å…å•ä¸€èŠ‚ç‚¹çš„è¯¯åˆ¤ã€‚</p>
<ul>
<li>â€‹**ä¸»è§‚ä¸‹çº¿ï¼ˆSDOWNï¼‰**â€‹ï¼šå•ä¸ªå“¨å…µèŠ‚ç‚¹åœ¨é…ç½®çš„ <code>down-after-milliseconds</code> æ—¶é—´å†…ï¼ŒæŒç»­æœªæ”¶åˆ°ä¸»èŠ‚ç‚¹çš„æœ‰æ•ˆ <code>PONG</code> å“åº”ï¼Œä¼šå°†è¯¥ä¸»èŠ‚ç‚¹æ ‡è®°ä¸ºâ€œä¸»è§‚ä¸‹çº¿â€ã€‚è¿™æ˜¯å“¨å…µçš„å±€éƒ¨åˆ¤æ–­ï¼Œä»…ä»£è¡¨å½“å‰èŠ‚ç‚¹è®¤ä¸ºä¸»èŠ‚ç‚¹æ•…éšœã€‚</li>
<li>â€‹**å®¢è§‚ä¸‹çº¿ï¼ˆODOWNï¼‰**â€‹ï¼šæ ‡è®°ä¸»èŠ‚ç‚¹ä¸ºä¸»è§‚ä¸‹çº¿åï¼Œè¯¥å“¨å…µä¼šå‘å…¶ä»–å“¨å…µèŠ‚ç‚¹å‘é€ <code>SENTINEL is-master-down-by-addr</code> å‘½ä»¤ï¼Œè¯¢é—®å…¶ä»–èŠ‚ç‚¹å¯¹è¯¥ä¸»èŠ‚ç‚¹çš„çŠ¶æ€åˆ¤æ–­ã€‚å½“è¶…è¿‡ <code>quorum</code>ï¼ˆæ³•å®šç¥¨æ•°ï¼‰ä¸ªå“¨å…µèŠ‚ç‚¹å‡æŠ¥å‘Šè¯¥ä¸»èŠ‚ç‚¹ä¸»è§‚ä¸‹çº¿æ—¶ï¼Œä¸»èŠ‚ç‚¹å°†è¢«æ ‡è®°ä¸ºâ€œå®¢è§‚ä¸‹çº¿â€ï¼Œæ­¤æ—¶è§¦å‘åç»­çš„é¢†å¯¼è€…é€‰ä¸¾ä¸æ•…éšœè½¬ç§»æµç¨‹ã€‚</li>
</ul>
<p>æ³¨ï¼š<code>quorum</code> æ˜¯é…ç½®å‚æ•°ï¼Œé€šè¿‡ <code>sentinel monitor</code> å‘½ä»¤æŒ‡å®šï¼Œä»£è¡¨ç¡®è®¤ä¸»èŠ‚ç‚¹å®¢è§‚ä¸‹çº¿æ‰€éœ€çš„æœ€å°å“¨å…µèŠ‚ç‚¹æ•°ï¼Œå»ºè®®è®¾ç½®ä¸ºå“¨å…µèŠ‚ç‚¹æ€»æ•°çš„åŠæ•°ä»¥ä¸Šï¼ˆå¦‚ 3 ä¸ªå“¨å…µè®¾ç½®ä¸º 2ï¼‰ã€‚</p>
<h3 data-id="heading-10">2. é¢†å¯¼è€…é€‰ä¸¾ï¼šåŸºäº Raft ç®—æ³•çš„å…±è¯†æœºåˆ¶</h3>
<p>å½“ä¸»èŠ‚ç‚¹è¢«ç¡®è®¤å®¢è§‚ä¸‹çº¿åï¼Œå“¨å…µé›†ç¾¤éœ€é€‰ä¸¾å‡ºä¸€ä¸ªâ€œé¢†å¯¼è€…å“¨å…µâ€ï¼Œç”±å…¶å•ç‹¬è´Ÿè´£æ‰§è¡Œæ•…éšœè½¬ç§»æ“ä½œï¼ˆé¿å…å¤šä¸ªå“¨å…µåŒæ—¶å‘èµ·è½¬ç§»å¯¼è‡´é›†ç¾¤æ··ä¹±ï¼‰ã€‚é€‰ä¸¾æœºåˆ¶åŸºäº Raft ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å€™é€‰è€…å‘èµ·æŠ•ç¥¨ï¼šæ¯ä¸ªå‘ç°ä¸»èŠ‚ç‚¹å®¢è§‚ä¸‹çº¿çš„å“¨å…µèŠ‚ç‚¹ï¼Œä¼šå‘å…¶ä»–å“¨å…µèŠ‚ç‚¹å‘é€æŠ•ç¥¨è¯·æ±‚ï¼Œç”³è¯·æˆä¸ºé¢†å¯¼è€…ã€‚</li>
<li>æŠ•ç¥¨è§„åˆ™ï¼šæ¯ä¸ªå“¨å…µèŠ‚ç‚¹ä»…èƒ½æŠ•å‡ºä¸€ç¥¨ï¼Œä¸”ä¼˜å…ˆæŠ•ç¥¨ç»™ç¬¬ä¸€ä¸ªå‘è‡ªå·±å‘èµ·è¯·æ±‚çš„å€™é€‰è€…ï¼ˆå…ˆåˆ°å…ˆå¾—åŸåˆ™ï¼‰ã€‚</li>
<li>å…±è¯†è¾¾æˆï¼šå½“æŸä¸ªå€™é€‰è€…è·å¾—è¶…è¿‡åŠæ•°å“¨å…µèŠ‚ç‚¹çš„æŠ•ç¥¨æ—¶ï¼Œç«‹å³æˆä¸ºé¢†å¯¼è€…ï¼›è‹¥ä¸€è½®æŠ•ç¥¨æ— å€™é€‰è€…è·å¾—å¤šæ•°ç¥¨ï¼Œåˆ™ç­‰å¾…è¶…æ—¶åé‡æ–°å‘èµ·é€‰ä¸¾ï¼Œç›´è‡³é€‰å‡ºé¢†å¯¼è€…ã€‚</li>
</ol>
<p>Raft ç®—æ³•çš„å¼•å…¥ç¡®ä¿äº†å“¨å…µé›†ç¾¤åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹èƒ½å¿«é€Ÿã€ä¸€è‡´åœ°é€‰ä¸¾å‡ºé¢†å¯¼è€…ï¼Œä¸”é€‰ä¸¾è¿‡ç¨‹å…·å¤‡å®‰å…¨æ€§ï¼ˆåŒä¸€ä»»æœŸå†…ä»…äº§ç”Ÿä¸€ä¸ªé¢†å¯¼è€…ï¼‰ä¸æ´»æ€§ï¼ˆæœ€ç»ˆèƒ½é€‰å‡ºé¢†å¯¼è€…ï¼Œæ— æ— é™é˜»å¡ï¼‰ã€‚</p>
<h3 data-id="heading-11">3. æ•…éšœè½¬ç§»ï¼šè‡ªåŠ¨åŒ–ä¸»ä»åˆ‡æ¢å…¨æµç¨‹</h3>
<p>é¢†å¯¼è€…å“¨å…µå½“é€‰åï¼Œå°†æŒ‰å›ºå®šæµç¨‹æ‰§è¡Œæ•…éšœè½¬ç§»ï¼Œæ•´ä¸ªè¿‡ç¨‹å¯åˆ†ä¸ºå››æ­¥ï¼Œè€—æ—¶é€šå¸¸åœ¨ç§’çº§åˆ°åå‡ ç§’çº§ï¼ˆå–å†³äºé…ç½®ä¸é›†ç¾¤çŠ¶æ€ï¼‰ã€‚</p>
<ol>
<li>â€‹<strong>ç­›é€‰å€™é€‰ä»èŠ‚ç‚¹</strong>â€‹ï¼šé¢†å¯¼è€…å“¨å…µä¼šä»åŸä¸»èŠ‚ç‚¹çš„æ‰€æœ‰ä»èŠ‚ç‚¹ä¸­ï¼Œç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„å€™é€‰èŠ‚ç‚¹ï¼Œç­›é€‰è§„åˆ™ä¼˜å…ˆçº§å¦‚ä¸‹ï¼šâ‘  æ’é™¤å·²æ ‡è®°ä¸ºæ•…éšœã€æ–­å¼€è¿æ¥æˆ–å“åº”ç¼“æ…¢çš„ä»èŠ‚ç‚¹ï¼›â‘¡ ä¼˜å…ˆé€‰æ‹© <code>slave-priority</code>ï¼ˆä»èŠ‚ç‚¹ä¼˜å…ˆçº§ï¼‰é…ç½®å€¼æœ€é«˜çš„èŠ‚ç‚¹ï¼ˆå€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰ï¼›â‘¢ è‹¥ä¼˜å…ˆçº§ç›¸åŒï¼Œé€‰æ‹©å¤åˆ¶åç§»é‡æœ€å¤§çš„èŠ‚ç‚¹ï¼ˆæ•°æ®æœ€å®Œæ•´ï¼ŒåŒæ­¥ä¸»èŠ‚ç‚¹æ•°æ®æœ€æ–°ï¼‰ï¼›â‘£ è‹¥åç§»é‡ç›¸åŒï¼Œé€‰æ‹©è¿è¡Œ ID æœ€å°çš„èŠ‚ç‚¹ï¼ˆé»˜è®¤è§„åˆ™ï¼‰ã€‚</li>
<li>â€‹<strong>æå‡å€™é€‰èŠ‚ç‚¹ä¸ºæ–°ä¸»èŠ‚ç‚¹</strong>â€‹ï¼šé¢†å¯¼è€…å“¨å…µå‘ç­›é€‰å‡ºçš„å€™é€‰ä»èŠ‚ç‚¹å‘é€ <code>SLAVEOF NO ONE</code> å‘½ä»¤ï¼Œä½¿å…¶è„±ç¦»ä»èŠ‚ç‚¹èº«ä»½ï¼Œæ™‹å‡ä¸ºæ–°ä¸»èŠ‚ç‚¹ï¼Œå¼€å§‹ç‹¬ç«‹å¤„ç†è¯»å†™è¯·æ±‚ã€‚</li>
<li>â€‹<strong>é‡é…ç½®å…¶ä»–ä»èŠ‚ç‚¹</strong>â€‹ï¼šé¢†å¯¼è€…å“¨å…µå‘å‰©ä½™æ‰€æœ‰ä»èŠ‚ç‚¹å‘é€ <code>SLAVEOF &lt;æ–°ä¸»èŠ‚ç‚¹IP&gt; &lt;æ–°ä¸»èŠ‚ç‚¹ç«¯å£&gt;</code> å‘½ä»¤ï¼Œè®©è¿™äº›ä»èŠ‚ç‚¹é‡æ–°åŒæ­¥æ–°ä¸»èŠ‚ç‚¹çš„æ•°æ®ï¼Œæ„å»ºæ–°çš„ä¸»ä»å¤åˆ¶å…³ç³»ã€‚</li>
<li>â€‹<strong>æ›´æ–°é…ç½®ä¸é€šçŸ¥</strong>â€‹ï¼šé¢†å¯¼è€…å“¨å…µæ›´æ–°è‡ªèº«åŠå…¶ä»–å“¨å…µèŠ‚ç‚¹çš„é›†ç¾¤é…ç½®ï¼Œå°†åŸä¸»èŠ‚ç‚¹æ ‡è®°ä¸ºæ–°ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ï¼ˆå¾…å…¶æ¢å¤åï¼Œè‡ªåŠ¨ä»¥ä»èŠ‚ç‚¹èº«ä»½åŒæ­¥æ–°ä¸»èŠ‚ç‚¹æ•°æ®ï¼‰ï¼›åŒæ—¶é€šè¿‡å‘å¸ƒè®¢é˜…æœºåˆ¶é€šçŸ¥å®¢æˆ·ç«¯æ–°ä¸»èŠ‚ç‚¹åœ°å€ï¼Œå®¢æˆ·ç«¯æ›´æ–°è¿æ¥ä¿¡æ¯åï¼Œå³å¯æ­£å¸¸è®¿é—®é›†ç¾¤ã€‚</li>
</ol>
<h2 data-id="heading-12">å››ã€å…³é”®é…ç½®ä¸å®æˆ˜è¦ç‚¹</h2>
<p>å“¨å…µçš„ç¨³å®šæ€§ä¾èµ–åˆç†çš„é…ç½®ï¼Œæ ¸å¿ƒé…ç½®é¡¹é›†ä¸­åœ¨ <code>sentinel.conf</code> æ–‡ä»¶ä¸­ï¼Œä»¥ä¸‹ä¸ºç”Ÿäº§ç¯å¢ƒå¸¸ç”¨é…ç½®åŠè§£è¯»ï¼Œç»“åˆ 1 ä¸» 2 ä» 3 å“¨å…µæ¶æ„ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-13">1. æ ¸å¿ƒé…ç½®é¡¹è§£è¯»</h3>
<pre><code class="hljs language-hljs" lang="hljs"># ç›‘æ§ä¸»èŠ‚ç‚¹ï¼šåç§°mymasterï¼ŒIP192.168.1.101ï¼Œç«¯å£6379ï¼Œquorum=2ï¼ˆéœ€2ä¸ªå“¨å…µç¡®è®¤ä¸‹çº¿ï¼‰
sentinel monitor mymaster 192.168.1.101 6379 2

# ä¸»è§‚ä¸‹çº¿åˆ¤å®šæ—¶é—´ï¼š5000æ¯«ç§’ï¼ˆ5ç§’ï¼‰ï¼Œè¶…æ—¶æœªå“åº”åˆ™æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿
sentinel down-after-milliseconds mymaster 5000

# æ•…éšœè½¬ç§»è¶…æ—¶æ—¶é—´ï¼š180000æ¯«ç§’ï¼ˆ3åˆ†é’Ÿï¼‰ï¼Œè¶…æ—¶æœªå®Œæˆåˆ™ç»ˆæ­¢è½¬ç§»
sentinel failover-timeout mymaster 180000

# æ•…éšœè½¬ç§»æ—¶å¹¶è¡ŒåŒæ­¥ä»èŠ‚ç‚¹æ•°é‡ï¼š1ï¼ˆé¿å…å¤šä»èŠ‚ç‚¹åŒæ—¶åŒæ­¥æ–°ä¸»èŠ‚ç‚¹å¯¼è‡´å¸¦å®½æ‹¥å µï¼‰
sentinel parallel-syncs mymaster 1

# é¢„é˜²è„‘è£‚é…ç½®ï¼šä¸»èŠ‚ç‚¹è‡³å°‘éœ€1ä¸ªä»èŠ‚ç‚¹è¿æ¥ï¼Œä¸”ä»èŠ‚ç‚¹å»¶è¿Ÿâ‰¤10ç§’æ‰å…è®¸å†™æ“ä½œ
min-slaves-to-write 1
min-slaves-max-lag 10
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<h3 data-id="heading-14">2. å“¨å…µå¯åŠ¨æ–¹å¼</h3>
<p>å“¨å…µå¯åŠ¨éœ€æŒ‡å®šé…ç½®æ–‡ä»¶ï¼ˆå¦åˆ™æ— æ³•ä¿å­˜é›†ç¾¤çŠ¶æ€ï¼Œé‡å¯åä¸¢å¤±ä¿¡æ¯ï¼‰ï¼Œä¸¤ç§å¯åŠ¨æ–¹å¼æ•ˆæœä¸€è‡´ï¼š</p>
<pre><code class="hljs language-hljs" lang="hljs"># æ–¹å¼1ï¼šé€šè¿‡redis-sentinelå¯æ‰§è¡Œæ–‡ä»¶å¯åŠ¨
redis-sentinel /path/to/sentinel.conf

# æ–¹å¼2ï¼šé€šè¿‡redis-serverä»¥å“¨å…µæ¨¡å¼å¯åŠ¨
redis-server /path/to/sentinel.conf --sentinel
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<p>å“¨å…µé»˜è®¤ç›‘å¬ 26379 ç«¯å£ï¼Œéœ€ç¡®ä¿è¯¥ç«¯å£åœ¨é˜²ç«å¢™ä¸­å¼€æ”¾ï¼Œå…è®¸å…¶ä»–å“¨å…µèŠ‚ç‚¹ä¸å®¢æˆ·ç«¯è®¿é—®ã€‚</p>
<h3 data-id="heading-15">3. å®¢æˆ·ç«¯æ¥å…¥æ–¹å¼</h3>
<p>å®¢æˆ·ç«¯éœ€æ”¯æŒå“¨å…µåè®®ï¼ˆä¸»æµå®¢æˆ·ç«¯å¦‚ Jedisã€Lettuce å‡æ”¯æŒï¼‰ï¼Œé€šè¿‡è¿æ¥å“¨å…µé›†ç¾¤è·å–ä¸»èŠ‚ç‚¹åœ°å€ï¼Œè€Œéç›´æ¥è¿æ¥ä¸»èŠ‚ç‚¹ã€‚ä»¥ Jedis ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-hljs" lang="hljs">Set&lt;String&gt; sentinelSet = new HashSet&lt;&gt;();
sentinelSet.add("192.168.1.201:26379"); // å“¨å…µèŠ‚ç‚¹1
sentinelSet.add("192.168.1.202:26379"); // å“¨å…µèŠ‚ç‚¹2
sentinelSet.add("192.168.1.203:26379"); // å“¨å…µèŠ‚ç‚¹3

// è¿æ¥å“¨å…µé›†ç¾¤ï¼ŒæŒ‡å®šä¸»èŠ‚ç‚¹åç§°mymaster
JedisSentinelPool pool = new JedisSentinelPool("mymaster", sentinelSet);
Jedis jedis = pool.getResource(); // è‡ªåŠ¨è·å–å½“å‰å¯ç”¨ä¸»èŠ‚ç‚¹è¿æ¥
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<p>å®¢æˆ·ç«¯ä¼šå®šæœŸå‘å“¨å…µé›†ç¾¤æŸ¥è¯¢ä¸»èŠ‚ç‚¹åœ°å€ï¼Œæ•…éšœè½¬ç§»åè‡ªåŠ¨åˆ‡æ¢è‡³æ–°ä¸»èŠ‚ç‚¹ï¼Œå®ç°ä¸šåŠ¡æ— æ„ŸçŸ¥ã€‚</p>
<h2 data-id="heading-16">äº”ã€ç”Ÿäº§ç¯å¢ƒå¸¸è§é—®é¢˜ä¸ä¼˜åŒ–æ–¹æ¡ˆ</h2>
<p>å“¨å…µæ¶æ„è™½èƒ½ä¿éšœé«˜å¯ç”¨ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä»éœ€è§„é¿å¸¸è§é™·é˜±ï¼Œé€šè¿‡ä¼˜åŒ–é…ç½®æå‡ç¨³å®šæ€§ä¸æ€§èƒ½ã€‚</p>
<h3 data-id="heading-17">1. è„‘è£‚é—®é¢˜ï¼ˆSplit-Brainï¼‰</h3>
<p>é—®é¢˜åœºæ™¯ï¼šç½‘ç»œåˆ†åŒºå¯¼è‡´åŸä¸»èŠ‚ç‚¹ä¸å“¨å…µã€ä»èŠ‚ç‚¹å¤±è”ï¼Œä½†åŸä¸»èŠ‚ç‚¹ä»æ­£å¸¸è¿è¡Œã€‚å“¨å…µé›†ç¾¤è§¦å‘æ•…éšœè½¬ç§»ï¼Œæå‡æ–°ä¸»èŠ‚ç‚¹ï¼›å½“ç½‘ç»œæ¢å¤åï¼Œé›†ç¾¤ä¸­å‡ºç°ä¸¤ä¸ªä¸»èŠ‚ç‚¹ï¼ˆåŸä¸»ã€æ–°ä¸»ï¼‰ï¼Œå³â€œè„‘è£‚â€ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡é…ç½® <code>min-slaves-to-write</code> ä¸ <code>min-slaves-max-lag</code> é™åˆ¶åŸä¸»èŠ‚ç‚¹çš„å†™æƒé™ã€‚å½“åŸä¸»èŠ‚ç‚¹è¿æ¥çš„ä»èŠ‚ç‚¹æ•°é‡ä¸è¶³æˆ–å»¶è¿Ÿè¿‡é«˜æ—¶ï¼Œè‡ªåŠ¨æ‹’ç»å†™æ“ä½œï¼Œé¿å…è„‘è£‚æœŸé—´çš„æ•°æ®å†™å…¥å†²çªã€‚</p>
<h3 data-id="heading-18">2. æ•…éšœè½¬ç§»æœŸé—´æ•°æ®ä¸¢å¤±</h3>
<p>é—®é¢˜åŸå› ï¼šRedis ä¸»ä»å¤åˆ¶ä¸ºå¼‚æ­¥æœºåˆ¶ï¼Œä¸»èŠ‚ç‚¹æ•…éšœæ—¶ï¼Œéƒ¨åˆ†å·²å†™å…¥ä¸»èŠ‚ç‚¹çš„æ•°æ®å¯èƒ½æœªåŒæ­¥è‡³ä»èŠ‚ç‚¹ï¼Œæ•…éšœè½¬ç§»åè¿™éƒ¨åˆ†æ•°æ®å°†ä¸¢å¤±ã€‚</p>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼šâ‘  å¼€å¯ä¸»èŠ‚ç‚¹æŒä¹…åŒ–ï¼ˆ<code>appendonly yes</code>ï¼‰ï¼Œé¿å…ä¸»èŠ‚ç‚¹é‡å¯åæ•°æ®ä¸¢å¤±ï¼›â‘¡ åˆç†è®¾ç½® <code>min-slaves-max-lag</code>ï¼Œå‡å°‘ä¸»ä»æ•°æ®å»¶è¿Ÿï¼›â‘¢ å¯¹æ ¸å¿ƒä¸šåŠ¡æ•°æ®ï¼Œå¯é€šè¿‡å®¢æˆ·ç«¯ç¡®è®¤æœºåˆ¶ï¼ˆå¦‚ <code>WAIT</code> å‘½ä»¤ï¼‰ç¡®ä¿æ•°æ®åŒæ­¥è‡³æŒ‡å®šæ•°é‡ä»èŠ‚ç‚¹åå†è¿”å›æˆåŠŸã€‚</p>
<h3 data-id="heading-19">3. æ•…éšœè½¬ç§»æ—¶é—´è¿‡é•¿</h3>
<p>é—®é¢˜è¡¨ç°ï¼šé»˜è®¤é…ç½®ä¸‹ï¼Œæ•…éšœè½¬ç§»æ€»è€—æ—¶å¯èƒ½è¾¾ 30 ç§’ä»¥ä¸Šï¼Œå¯¼è‡´æœåŠ¡çŸ­æš‚ä¸å¯ç”¨ã€‚</p>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼šè°ƒå° <code>down-after-milliseconds</code>ï¼ˆå¦‚ 5000 æ¯«ç§’ï¼‰ï¼Œç¼©çŸ­ä¸»è§‚ä¸‹çº¿åˆ¤å®šæ—¶é—´ï¼›è°ƒå° <code>failover-timeout</code>ï¼ŒåŠ å¿«æ•…éšœè½¬ç§»è¶…æ—¶é‡è¯•é€Ÿåº¦ã€‚ä½†éœ€æ³¨æ„ï¼Œ<code>down-after-milliseconds</code> ä¸å®œè¿‡å°ï¼Œé¿å…ç½‘ç»œæŠ–åŠ¨è§¦å‘è¯¯åˆ¤ã€‚</p>
<h3 data-id="heading-20">4. å“¨å…µèŠ‚ç‚¹å•ç‚¹æ•…éšœé£é™©</h3>
<p>é—®é¢˜åœºæ™¯ï¼šå“¨å…µèŠ‚ç‚¹éƒ¨ç½²åœ¨åŒä¸€ç‰©ç†æœºæˆ–å¯ç”¨åŒºï¼Œå½“è¯¥åŒºåŸŸæ•…éšœæ—¶ï¼Œæ‰€æœ‰å“¨å…µèŠ‚ç‚¹å¤±æ•ˆï¼Œæ— æ³•æ‰§è¡Œæ•…éšœæ£€æµ‹ä¸è½¬ç§»ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šå“¨å…µèŠ‚ç‚¹åˆ†æ•£éƒ¨ç½²åœ¨ä¸åŒç‰©ç†æœºã€è™šæ‹Ÿæœºæˆ–å¯ç”¨åŒºï¼Œç¡®ä¿æ•…éšœç‹¬ç«‹æ€§ï¼›åŒæ—¶ç›‘æ§å“¨å…µèŠ‚ç‚¹çŠ¶æ€ï¼ŒåŠæ—¶æ›¿æ¢æ•…éšœèŠ‚ç‚¹ã€‚</p>
<h2 data-id="heading-21">å…­ã€å“¨å…µä¸ Redis Cluster çš„åŒºåˆ«ä¸é€‰å‹å»ºè®®</h2>
<p>Redis Cluster æ˜¯ Redis å®˜æ–¹æä¾›çš„åˆ†ç‰‡é›†ç¾¤æ–¹æ¡ˆï¼Œä¸å“¨å…µæ¶æ„å‡èƒ½å®ç°é«˜å¯ç”¨ï¼Œä½†é€‚ç”¨åœºæ™¯å­˜åœ¨å·®å¼‚ï¼Œéœ€æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰å‹ã€‚</p>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Redis Sentinel</th><th>Redis Cluster</th></tr></thead><tbody><tr><td>æ¶æ„æ ¸å¿ƒ</td><td>åŸºäºä¸»ä»å¤åˆ¶ï¼Œæ— æ•°æ®åˆ†ç‰‡</td><td>æ•°æ®åˆ†ç‰‡ + ä¸»ä»å¤åˆ¶ï¼Œåˆ†å¸ƒå¼å­˜å‚¨</td></tr><tr><td>æ‰©å±•æ€§</td><td>ä¸æ”¯æŒæ•°æ®åˆ†ç‰‡ï¼Œä»…å¯æ‰©å±•ä»èŠ‚ç‚¹æå‡è¯»æ€§èƒ½</td><td>æ”¯æŒæ¨ªå‘æ‰©å±•èŠ‚ç‚¹ï¼Œçªç ´å•èŠ‚ç‚¹å†…å­˜é™åˆ¶</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ä¸­å°è§„æ¨¡é›†ç¾¤ï¼Œæ•°æ®é‡ä¸å¤§ï¼Œéœ€é«˜å¯ç”¨ä¸è¯»å†™åˆ†ç¦»</td><td>å¤§è§„æ¨¡é›†ç¾¤ï¼Œæ•°æ®é‡åºå¤§ï¼Œéœ€åˆ†ç‰‡å­˜å‚¨ä¸æ°´å¹³æ‰©å±•</td></tr><tr><td>å¤æ‚åº¦</td><td>æ¶æ„ç®€å•ï¼Œé…ç½®ä¸ç»´æŠ¤æˆæœ¬ä½</td><td>æ¶æ„å¤æ‚ï¼Œéœ€å¤„ç†åˆ†ç‰‡è·¯ç”±ã€æ•°æ®è¿ç§»ç­‰é—®é¢˜</td></tr></tbody></table>
<p>é€‰å‹å»ºè®®ï¼šè‹¥ä¸šåŠ¡æ•°æ®é‡è¾ƒå°ï¼ˆå•èŠ‚ç‚¹å¯æ‰¿è½½ï¼‰ï¼Œè¿½æ±‚é«˜å¯ç”¨ä¸ç®€å•ç»´æŠ¤ï¼Œä¼˜å…ˆé€‰æ‹©å“¨å…µæ¶æ„ï¼›è‹¥æ•°æ®é‡åºå¤§ï¼Œéœ€çªç ´å•èŠ‚ç‚¹æ€§èƒ½ä¸å†…å­˜é™åˆ¶ï¼Œé€‰æ‹© Redis Clusterã€‚</p>
<h2 data-id="heading-22">ä¸ƒã€æ€»ç»“</h2>
<p>Redis å“¨å…µé€šè¿‡â€œåˆ†å¸ƒå¼ç›‘æ§ + å…±è¯†æœºåˆ¶ + è‡ªåŠ¨æ•…éšœè½¬ç§»â€ï¼Œä¸º Redis ä¸»ä»é›†ç¾¤æ„å»ºäº†å¯é çš„é«˜å¯ç”¨ä¿éšœï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºå°†æ•…éšœå¤„ç†ä»äººå·¥ä»‹å…¥è½¬åŒ–ä¸ºè‡ªåŠ¨åŒ–æµç¨‹ï¼Œå¤§å¹…æå‡ç³»ç»Ÿçš„ç¨³å®šæ€§ä¸è¿ç»´æ•ˆç‡ã€‚æ·±å…¥ç†è§£å“¨å…µçš„ä¸»è§‚/å®¢è§‚ä¸‹çº¿æœºåˆ¶ã€Raft é¢†å¯¼è€…é€‰ä¸¾ã€æ•…éšœè½¬ç§»æµç¨‹ï¼Œæ˜¯åšå¥½ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä¸ä¼˜åŒ–çš„å…³é”®ã€‚</p>
<p>éœ€æ³¨æ„ï¼Œå“¨å…µå¹¶éâ€œé“¶å¼¹â€ï¼Œç”Ÿäº§ç¯å¢ƒä¸­éœ€ç»“åˆä¸šåŠ¡åœºæ™¯åˆç†é…ç½®å‚æ•°ã€è§„é¿è„‘è£‚ä¸æ•°æ®ä¸¢å¤±é£é™©ã€åšå¥½èŠ‚ç‚¹åˆ†æ•£éƒ¨ç½²ï¼ŒåŒæ—¶é…åˆæŒä¹…åŒ–ã€ç›‘æ§å‘Šè­¦ç­‰æœºåˆ¶ï¼Œæ‰èƒ½æ„å»ºçœŸæ­£ç¨³å®šçš„é«˜å¯ç”¨ Redis é›†ç¾¤ã€‚å¯¹äºä¸­å°è§„æ¨¡ä¸šåŠ¡è€Œè¨€ï¼Œå“¨å…µæ¶æ„å…¼å…·ç®€å•æ€§ä¸å¯é æ€§ï¼Œæ˜¯å¹³è¡¡æˆæœ¬ä¸å¯ç”¨æ€§çš„æœ€ä¼˜é€‰æ‹©ã€‚</p>
<p>å…³æ³¨æˆ‘çš„CSDNï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2F" target="_blank" title="https://" ref="nofollow noopener noreferrer">blog.csdn.net/qq_30095907â€¦</a></p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åµŒå…¥å¼å¤„ç†å™¨æ¶æ„]]></title>    <link>https://juejin.cn/post/7603959423128584192</link>    <guid>https://juejin.cn/post/7603959423128584192</guid>    <pubDate>2026-02-09T02:14:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603959423128584192" data-draft-id="7603677143215931407" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åµŒå…¥å¼å¤„ç†å™¨æ¶æ„"/> <meta itemprop="keywords" content="åç«¯,åµŒå…¥å¼,å•ç‰‡æœº"/> <meta itemprop="datePublished" content="2026-02-09T02:14:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è‰¯è®¸"/> <meta itemprop="url" content="https://juejin.cn/user/3913917128246942"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åµŒå…¥å¼å¤„ç†å™¨æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917128246942/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è‰¯è®¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:14:38.000Z" title="Mon Feb 09 2026 02:14:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è‰¯è®¸ã€‚</p>
<p>åœ¨åµŒå…¥å¼å¼€å‘çš„è¿™äº›å¹´é‡Œï¼Œæˆ‘æ¥è§¦è¿‡å„ç§å„æ ·çš„å¤„ç†å™¨æ¶æ„ï¼Œä»æœ€æ—©åšå•ç‰‡æœºæ—¶ç”¨çš„ 51 å†…æ ¸ï¼Œåˆ°åæ¥åšæ±½è½¦ç”µå­æ—¶ç”¨çš„ ARM Cortex-A ç³»åˆ—ï¼Œå†åˆ°ç°åœ¨é¡¹ç›®ä¸­å¶å°”ä¼šç¢°åˆ°çš„ RISC-V æ¶æ„ã€‚</p>
<p>æ¯æ¬¡æ¢ä¸€ä¸ªæ–°æ¶æ„ï¼Œéƒ½éœ€è¦é‡æ–°ç†Ÿæ‚‰å®ƒçš„ç‰¹æ€§å’Œå¼€å‘æ–¹å¼ã€‚</p>
<p>ä»Šå¤©å°±å’Œå¤§å®¶èŠèŠåµŒå…¥å¼å¤„ç†å™¨æ¶æ„è¿™ä¸ªè¯é¢˜ï¼Œå¸®åŠ©å¤§å®¶å»ºç«‹ä¸€ä¸ªç³»ç»Ÿçš„è®¤çŸ¥æ¡†æ¶ã€‚</p>
<h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯å¤„ç†å™¨æ¶æ„</h2>
<p>å¤„ç†å™¨æ¶æ„ï¼Œç®€å•æ¥è¯´å°±æ˜¯å¤„ç†å™¨çš„è®¾è®¡è“å›¾å’Œè§„èŒƒã€‚</p>
<p>å®ƒå®šä¹‰äº†å¤„ç†å™¨å¦‚ä½•æ‰§è¡ŒæŒ‡ä»¤ã€å¦‚ä½•ç®¡ç†å†…å­˜ã€å¦‚ä½•ä¸å¤–è®¾äº¤äº’ç­‰ä¸€ç³»åˆ—æ ¸å¿ƒé—®é¢˜ã€‚</p>
<p>å°±åƒç›–æˆ¿å­éœ€è¦å…ˆæœ‰å»ºç­‘è®¾è®¡å›¾çº¸ä¸€æ ·ï¼Œå¤„ç†å™¨çš„åˆ¶é€ ä¹Ÿéœ€è¦å…ˆæœ‰æ¶æ„è®¾è®¡ã€‚</p>
<p>ä»æŠ€æœ¯è§’åº¦æ¥çœ‹ï¼Œå¤„ç†å™¨æ¶æ„ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<p><strong>1.1 æŒ‡ä»¤é›†æ¶æ„ï¼ˆISAï¼‰</strong></p>
<p>æŒ‡ä»¤é›†æ¶æ„æ˜¯å¤„ç†å™¨æ¶æ„çš„æ ¸å¿ƒï¼Œå®ƒå®šä¹‰äº†å¤„ç†å™¨èƒ½å¤Ÿè¯†åˆ«å’Œæ‰§è¡Œçš„æ‰€æœ‰æŒ‡ä»¤ã€‚</p>
<p>æ¯”å¦‚ ARM æ¶æ„æœ‰è‡ªå·±çš„æŒ‡ä»¤é›†ï¼Œx86 æ¶æ„ä¹Ÿæœ‰è‡ªå·±çš„æŒ‡ä»¤é›†ï¼Œå®ƒä»¬æ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p>
<p>è¿™å°±åƒä¸åŒçš„è¯­è¨€ä¸€æ ·ï¼Œè¯´ä¸­æ–‡çš„äººå¬ä¸æ‡‚è‹±æ–‡ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<p>åœ¨æˆ‘åˆšå¼€å§‹åšåµŒå…¥å¼å¼€å‘çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯ 51 å•ç‰‡æœºï¼Œå®ƒçš„æŒ‡ä»¤é›†éå¸¸ç®€å•ï¼Œåªæœ‰å‡ åæ¡æŒ‡ä»¤ã€‚</p>
<p>åæ¥è½¬åˆ° ARM å¹³å°ï¼Œå‘ç° ARM çš„æŒ‡ä»¤é›†è¦å¤æ‚å¾—å¤šï¼Œä½†ä¹Ÿæ›´åŠ å¼ºå¤§å’Œçµæ´»ã€‚</p>
<p><strong>1.2 å¯„å­˜å™¨ç»„ç»‡</strong></p>
<p>å¯„å­˜å™¨æ˜¯å¤„ç†å™¨å†…éƒ¨ç”¨äºä¸´æ—¶å­˜å‚¨æ•°æ®çš„é«˜é€Ÿå­˜å‚¨å•å…ƒã€‚</p>
<p>ä¸åŒçš„æ¶æ„æœ‰ä¸åŒæ•°é‡å’Œç±»å‹çš„å¯„å­˜å™¨ã€‚</p>
<p>æ¯”å¦‚ ARM Cortex-M ç³»åˆ—æœ‰ 16 ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œè€Œ x86 æ¶æ„çš„å¯„å­˜å™¨ç»„ç»‡æ–¹å¼å°±å®Œå…¨ä¸åŒã€‚</p>
<p><strong>1.3 å†…å­˜ç®¡ç†</strong></p>
<p>å¤„ç†å™¨å¦‚ä½•è®¿é—®å’Œç®¡ç†å†…å­˜ä¹Ÿæ˜¯æ¶æ„çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<p>æœ‰äº›æ¶æ„æ”¯æŒè™šæ‹Ÿå†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰ï¼Œæœ‰äº›åªæ”¯æŒå†…å­˜ä¿æŠ¤å•å…ƒï¼ˆMPUï¼‰ï¼Œè¿˜æœ‰äº›ä»€ä¹ˆéƒ½ä¸æ”¯æŒã€‚</p>
<p>è¿™ç›´æ¥å½±å“åˆ°ç³»ç»Ÿèƒ½å¦è¿è¡Œå¤æ‚çš„æ“ä½œç³»ç»Ÿã€‚</p>
<p><strong>1.4 æµæ°´çº¿å’Œæ‰§è¡Œå•å…ƒ</strong></p>
<p>ç°ä»£å¤„ç†å™¨é€šå¸¸é‡‡ç”¨æµæ°´çº¿æŠ€æœ¯æ¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚</p>
<p>ä¸åŒæ¶æ„çš„æµæ°´çº¿çº§æ•°ã€æ‰§è¡Œå•å…ƒæ•°é‡å’Œç»„ç»‡æ–¹å¼éƒ½ä¸ç›¸åŒï¼Œè¿™ç›´æ¥å½±å“åˆ°å¤„ç†å™¨çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<h2 data-id="heading-1">2. ä¸»æµåµŒå…¥å¼å¤„ç†å™¨æ¶æ„</h2>
<h3 data-id="heading-2">2.1 ARM æ¶æ„</h3>
<p>ARM æ¶æ„å¯ä»¥è¯´æ˜¯åµŒå…¥å¼é¢†åŸŸçš„ç»å¯¹éœ¸ä¸»ï¼Œå¸‚åœºå æœ‰ç‡è¶…è¿‡ 90%ã€‚</p>
<p>æˆ‘åœ¨å¤–ä¼åšæ±½è½¦ç”µå­çš„æ—¶å€™ï¼Œç”¨çš„å°±æ˜¯ ARM Cortex-A ç³»åˆ—å¤„ç†å™¨ã€‚</p>
<p>ARM æ¶æ„çš„æˆåŠŸä¸»è¦å¾—ç›Šäºå…¶ä½åŠŸè€—ã€é«˜æ€§èƒ½å’Œè‰¯å¥½çš„ç”Ÿæ€ç³»ç»Ÿã€‚</p>
<p>ARM æ¶æ„ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªç³»åˆ—ï¼š</p>
<p><strong>2.1.1 ARM Cortex-M ç³»åˆ—</strong></p>
<p>è¿™æ˜¯ä¸“é—¨ä¸ºå¾®æ§åˆ¶å™¨ï¼ˆMCUï¼‰è®¾è®¡çš„ç³»åˆ—ï¼Œä¸»æ‰“ä½åŠŸè€—å’Œå®æ—¶æ€§ã€‚</p>
<p>æˆ‘ä»¬å¸¸ç”¨çš„ STM32 å°±æ˜¯åŸºäº Cortex-M å†…æ ¸çš„ã€‚</p>
<p>æ¯”å¦‚ STM32F103 ä½¿ç”¨çš„æ˜¯ Cortex-M3 å†…æ ¸ï¼ŒSTM32F407 ä½¿ç”¨çš„æ˜¯ Cortex-M4 å†…æ ¸ï¼ˆå¸¦ DSP æŒ‡ä»¤å’Œæµ®ç‚¹è¿ç®—å•å…ƒï¼‰ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ STM32 HAL åº“ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åˆå§‹åŒ– GPIOï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#include "stm32f4xx_hal.h"</span>
â€‹
void GPIO_Init_Example(void)
{
    GPIO_InitTypeDef <span class="hljs-attr">GPIO_InitStruct</span> = {<span class="hljs-number">0</span>}<span class="hljs-comment">;</span>
    
    /* ä½¿èƒ½GPIOAæ—¶é’Ÿ */
    __HAL_RCC_GPIOA_CLK_ENABLE()<span class="hljs-comment">;</span>
    
    /* é…ç½®PA5å¼•è„šä¸ºè¾“å‡ºæ¨¡å¼ */
    <span class="hljs-attr">GPIO_InitStruct.Pin</span> = GPIO_PIN_5<span class="hljs-comment">;</span>
    <span class="hljs-attr">GPIO_InitStruct.Mode</span> = GPIO_MODE_OUTPUT_PP<span class="hljs-comment">;  // æ¨æŒ½è¾“å‡º</span>
    <span class="hljs-attr">GPIO_InitStruct.Pull</span> = GPIO_NOPULL<span class="hljs-comment">;          // æ— ä¸Šä¸‹æ‹‰</span>
    <span class="hljs-attr">GPIO_InitStruct.Speed</span> = GPIO_SPEED_FREQ_LOW<span class="hljs-comment">; // ä½é€Ÿ</span>
    
    HAL_GPIO_Init(GPIOA, &amp;GPIO_InitStruct)<span class="hljs-comment">;</span>
    
    /* ç‚¹äº®LED */
    HAL_GPIO_WritePin(GPIOA, GPIO_PIN_5, GPIO_PIN_SET)<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>2.1.2 ARM Cortex-A ç³»åˆ—</strong></p>
<p>è¿™æ˜¯ä¸ºåº”ç”¨å¤„ç†å™¨è®¾è®¡çš„ç³»åˆ—ï¼Œæ€§èƒ½å¼ºå¤§ï¼Œæ”¯æŒè¿è¡Œ Linux ç­‰å¤æ‚æ“ä½œç³»ç»Ÿã€‚</p>
<p>æˆ‘åœ¨å¤–ä¼åšçš„æ±½è½¦å¨±ä¹ç³»ç»Ÿå°±æ˜¯åŸºäº Cortex-A9 çš„å¤„ç†å™¨ï¼Œè¿è¡Œçš„æ˜¯å®šåˆ¶ç‰ˆçš„ Linux ç³»ç»Ÿã€‚</p>
<p>è¿™ç±»å¤„ç†å™¨é€šå¸¸ä¸»é¢‘åœ¨å‡ ç™¾ MHz åˆ°å‡  GHz ä¹‹é—´ï¼Œæ”¯æŒ MMUã€å¤šæ ¸å¿ƒç­‰é«˜çº§ç‰¹æ€§ã€‚</p>
<p><strong>2.1.3 ARM Cortex-R ç³»åˆ—</strong></p>
<p>è¿™æ˜¯ä¸ºå®æ—¶ç³»ç»Ÿè®¾è®¡çš„ç³»åˆ—ï¼Œä»‹äº M ç³»åˆ—å’Œ A ç³»åˆ—ä¹‹é—´ã€‚</p>
<p>ä¸»è¦ç”¨äºå¯¹å®æ—¶æ€§è¦æ±‚æé«˜çš„åœºåˆï¼Œæ¯”å¦‚æ±½è½¦çš„å®‰å…¨ç³»ç»Ÿã€å·¥ä¸šæ§åˆ¶ç­‰ã€‚</p>
<h3 data-id="heading-3">2.2 x86/x64 æ¶æ„</h3>
<p>x86 æ¶æ„ä¸»è¦ç”± Intel å’Œ AMD ä¸»å¯¼ï¼Œåœ¨ PC å’ŒæœåŠ¡å™¨é¢†åŸŸå æ®ç»Ÿæ²»åœ°ä½ã€‚</p>
<p>è™½ç„¶åœ¨ä¼ ç»ŸåµŒå…¥å¼é¢†åŸŸåº”ç”¨ä¸å¤šï¼Œä½†åœ¨å·¥ä¸š PCã€è¾¹ç¼˜è®¡ç®—ç­‰åœºæ™¯ä¸­ä¹Ÿæœ‰ä¸€å®šçš„åº”ç”¨ã€‚</p>
<p>x86 æ¶æ„çš„ç‰¹ç‚¹æ˜¯æ€§èƒ½å¼ºå¤§ã€ç”Ÿæ€æˆç†Ÿï¼Œä½†åŠŸè€—ç›¸å¯¹è¾ƒé«˜ã€‚</p>
<p>Intel æ¨å‡ºçš„ Atom ç³»åˆ—å¤„ç†å™¨å°±æ˜¯ä¸“é—¨é’ˆå¯¹åµŒå…¥å¼å’Œç§»åŠ¨è®¾å¤‡çš„ä½åŠŸè€—ç‰ˆæœ¬ã€‚</p>
<p>æˆ‘è§è¿‡ä¸€äº›å·¥ä¸šæ§åˆ¶ç³»ç»Ÿä½¿ç”¨ x86 æ¶æ„çš„åµŒå…¥å¼ä¸»æ¿ï¼Œä¸»è¦æ˜¯å› ä¸ºéœ€è¦è¿è¡Œä¸€äº›åªæœ‰ x86 ç‰ˆæœ¬çš„ä¸“ä¸šè½¯ä»¶ã€‚</p>
<h3 data-id="heading-4">2.3 RISC-V æ¶æ„</h3>
<p>RISC-V æ˜¯è¿‘å¹´æ¥å¼‚å†›çªèµ·çš„å¼€æºæŒ‡ä»¤é›†æ¶æ„ï¼Œç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡å¼€å‘ã€‚</p>
<p>å®ƒæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å®Œå…¨å¼€æºï¼Œä»»ä½•äººéƒ½å¯ä»¥å…è´¹ä½¿ç”¨ï¼Œä¸éœ€è¦æ”¯ä»˜æˆæƒè´¹ç”¨ã€‚</p>
<p>RISC-V é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼ŒåŸºç¡€æŒ‡ä»¤é›†éå¸¸ç²¾ç®€ï¼Œåªæœ‰ 40 å¤šæ¡æŒ‡ä»¤ï¼Œç„¶åå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ å„ç§æ‰©å±•æ¨¡å—ã€‚</p>
<p>è¿™ç§è®¾è®¡ç†å¿µéå¸¸é€‚åˆå®šåˆ¶åŒ–éœ€æ±‚å¼ºçƒˆçš„åµŒå…¥å¼åº”ç”¨ã€‚</p>
<p>è™½ç„¶ RISC-V ç›®å‰çš„ç”Ÿæ€è¿˜ä¸å¦‚ ARM æˆç†Ÿï¼Œä½†å‘å±•åŠ¿å¤´éå¸¸è¿…çŒ›ã€‚</p>
<p>å›½å†…å¾ˆå¤šèŠ¯ç‰‡å‚å•†éƒ½åœ¨ç§¯æå¸ƒå±€ RISC-Vï¼Œæ¯”å¦‚å¹³å¤´å“¥ã€èŠ¯æ¥ç§‘æŠ€ç­‰ã€‚</p>
<p>æˆ‘æœ€è¿‘ä¹Ÿåœ¨å…³æ³¨ RISC-V çš„å‘å±•ï¼Œè€ƒè™‘åœ¨ä¸€äº›æ–°é¡¹ç›®ä¸­å°è¯•ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-5">2.4 MIPS æ¶æ„</h3>
<p>MIPS æ¶æ„æ›¾ç»åœ¨åµŒå…¥å¼é¢†åŸŸå æœ‰ä¸€å¸­ä¹‹åœ°ï¼Œç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œè®¾å¤‡å’Œæ¶ˆè´¹ç”µå­äº§å“ä¸­ã€‚</p>
<p>ä½†è¿‘å¹´æ¥å¸‚åœºä»½é¢é€æ¸è¢« ARM èš•é£Ÿã€‚</p>
<p>MIPS çš„ç‰¹ç‚¹æ˜¯æŒ‡ä»¤é›†ç®€æ´ã€æµæ°´çº¿æ•ˆç‡é«˜ï¼Œä½†ç”Ÿæ€ç³»ç»Ÿç›¸å¯¹è–„å¼±ã€‚</p>
<h3 data-id="heading-6">2.5 å…¶ä»–æ¶æ„</h3>
<p>é™¤äº†ä¸Šè¿°ä¸»æµæ¶æ„ï¼Œè¿˜æœ‰ä¸€äº›ä¸“ç”¨æˆ–å°ä¼—æ¶æ„ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><strong>PowerPC æ¶æ„</strong>ï¼šä¸»è¦ç”¨äºèˆªç©ºèˆªå¤©ã€å·¥ä¸šæ§åˆ¶ç­‰é«˜å¯é æ€§é¢†åŸŸ</li>
<li><strong>AVR æ¶æ„</strong>ï¼šArduino ä½¿ç”¨çš„å°±æ˜¯ AVR å†…æ ¸çš„å•ç‰‡æœº</li>
<li><strong>8051 æ¶æ„</strong>ï¼šè™½ç„¶å¤è€ï¼Œä½†åœ¨ä¸€äº›ç®€å•åº”ç”¨ä¸­ä»ç„¶æ´»è·ƒ</li>
<li><strong>DSP æ¶æ„</strong>ï¼šä¸“é—¨ç”¨äºæ•°å­—ä¿¡å·å¤„ç†çš„æ¶æ„ï¼Œå¦‚ TI çš„ C2000 ç³»åˆ—</li>
</ul>
<h2 data-id="heading-7">3. å¤„ç†å™¨æ¶æ„çš„å…³é”®ç‰¹æ€§</h2>
<h3 data-id="heading-8">3.1 RISC vs CISC</h3>
<p>å¤„ç†å™¨æ¶æ„ä»æŒ‡ä»¤é›†è®¾è®¡ç†å¿µä¸Šå¯ä»¥åˆ†ä¸º RISCï¼ˆç²¾ç®€æŒ‡ä»¤é›†ï¼‰å’Œ CISCï¼ˆå¤æ‚æŒ‡ä»¤é›†ï¼‰ä¸¤å¤§ç±»ã€‚</p>
<p><strong>RISC æ¶æ„</strong>çš„ç‰¹ç‚¹æ˜¯æŒ‡ä»¤æ•°é‡å°‘ã€æŒ‡ä»¤æ ¼å¼ç»Ÿä¸€ã€æ¯æ¡æŒ‡ä»¤æ‰§è¡Œæ—¶é—´å›ºå®šã€‚</p>
<p>ARMã€RISC-Vã€MIPS éƒ½å±äº RISC æ¶æ„ã€‚</p>
<p>RISC æ¶æ„çš„ä¼˜åŠ¿æ˜¯è®¾è®¡ç®€å•ã€åŠŸè€—ä½ã€å®¹æ˜“å®ç°æµæ°´çº¿ï¼Œéå¸¸é€‚åˆåµŒå…¥å¼åº”ç”¨ã€‚</p>
<p><strong>CISC æ¶æ„</strong>çš„ç‰¹ç‚¹æ˜¯æŒ‡ä»¤æ•°é‡å¤šã€æŒ‡ä»¤åŠŸèƒ½å¤æ‚ã€æŒ‡ä»¤é•¿åº¦å¯å˜ã€‚</p>
<p>x86 å°±æ˜¯å…¸å‹çš„ CISC æ¶æ„ã€‚</p>
<p>CISC æ¶æ„çš„ä¼˜åŠ¿æ˜¯ä»£ç å¯†åº¦é«˜ã€åŠŸèƒ½å¼ºå¤§ï¼Œä½†è®¾è®¡å¤æ‚ã€åŠŸè€—è¾ƒé«˜ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘å‘ç° RISC æ¶æ„çš„å¤„ç†å™¨é€šå¸¸æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œæ±‡ç¼–ä»£ç ä¹Ÿæ›´å®¹æ˜“ç†è§£ã€‚</p>
<p>æ¯”å¦‚ ARM çš„æ±‡ç¼–ä»£ç å°±æ¯” x86 çš„æ±‡ç¼–ä»£ç ç®€æ´å¾ˆå¤šã€‚</p>
<h3 data-id="heading-9">3.2 ä½å®½</h3>
<p>å¤„ç†å™¨çš„ä½å®½æŒ‡çš„æ˜¯å¤„ç†å™¨ä¸€æ¬¡èƒ½å¤„ç†çš„æ•°æ®ä½æ•°ã€‚</p>
<p>å¸¸è§çš„æœ‰ 8 ä½ã€16 ä½ã€32 ä½å’Œ 64 ä½ã€‚</p>
<ul>
<li><strong>8 ä½å¤„ç†å™¨</strong>ï¼šå¦‚ 8051ã€AVRï¼Œé€‚åˆç®€å•æ§åˆ¶åº”ç”¨</li>
<li><strong>16 ä½å¤„ç†å™¨</strong>ï¼šå¦‚ MSP430ï¼Œæ€§èƒ½å’ŒåŠŸè€—çš„å¹³è¡¡ç‚¹</li>
<li><strong>32 ä½å¤„ç†å™¨</strong>ï¼šå¦‚ ARM Cortex-Mã€STM32ï¼Œç›®å‰åµŒå…¥å¼ä¸»æµ</li>
<li><strong>64 ä½å¤„ç†å™¨</strong>ï¼šå¦‚ ARM Cortex-A53/A72ï¼Œç”¨äºé«˜æ€§èƒ½åº”ç”¨</li>
</ul>
<p>ä½å®½è¶Šå¤§ï¼Œå¤„ç†å™¨èƒ½å¤Ÿç›´æ¥å¤„ç†çš„æ•°æ®èŒƒå›´å°±è¶Šå¤§ï¼Œå¯»å€ç©ºé—´ä¹Ÿè¶Šå¤§ã€‚</p>
<p>ä½†ä½å®½å¢åŠ ä¹Ÿä¼šå¸¦æ¥åŠŸè€—å’Œæˆæœ¬çš„å¢åŠ ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œéœ€è¦æ ¹æ®åº”ç”¨éœ€æ±‚é€‰æ‹©åˆé€‚çš„ä½å®½ã€‚</p>
<p>æˆ‘åœ¨åšå•ç‰‡æœºé¡¹ç›®çš„æ—¶å€™ï¼Œå‘ç° 32 ä½å¤„ç†å™¨å·²ç»æˆä¸ºä¸»æµé€‰æ‹©ã€‚</p>
<p>å³ä½¿æ˜¯ä¸€äº›ç®€å•çš„åº”ç”¨ï¼Œä¹Ÿå€¾å‘äºä½¿ç”¨ 32 ä½ MCUï¼Œå› ä¸ºä»·æ ¼å·²ç»é™åˆ°äº†å¯ä»¥æ¥å—çš„èŒƒå›´ï¼Œè€Œä¸”å¼€å‘æ•ˆç‡æ›´é«˜ã€‚</p>
<h3 data-id="heading-10">3.3 ä¸»é¢‘å’Œæ€§èƒ½</h3>
<p>å¤„ç†å™¨çš„ä¸»é¢‘ï¼ˆæ—¶é’Ÿé¢‘ç‡ï¼‰æ˜¯è¡¡é‡æ€§èƒ½çš„é‡è¦æŒ‡æ ‡ä¹‹ä¸€ï¼Œä½†ä¸æ˜¯å”¯ä¸€æŒ‡æ ‡ã€‚</p>
<p>åŒæ ·ä¸»é¢‘çš„ä¸åŒæ¶æ„å¤„ç†å™¨ï¼Œæ€§èƒ½å¯èƒ½ç›¸å·®å¾ˆå¤§ã€‚</p>
<p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ DMIPSï¼ˆDhrystone MIPSï¼‰æˆ– CoreMark æ¥è¡¡é‡å¤„ç†å™¨çš„å®é™…æ€§èƒ½ã€‚</p>
<p>æ¯”å¦‚ ARM Cortex-M4 åœ¨ 100MHz ä¸»é¢‘ä¸‹ï¼Œæ€§èƒ½å¤§çº¦æ˜¯ 125 DMIPSã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ€§èƒ½æµ‹è¯•ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#include "stm32f4xx_hal.h"</span>
<span class="hljs-comment">#include &lt;stdio.h&gt;</span>
â€‹
<span class="hljs-comment">#define TEST_ITERATIONS 1000000</span>
â€‹
void Performance_Test(void)
{
    uint32_t start_tick, end_tick<span class="hljs-comment">;</span>
    volatile uint32_t <span class="hljs-attr">result</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    
    /* è®°å½•å¼€å§‹æ—¶é—´ */
    <span class="hljs-attr">start_tick</span> = HAL_GetTick()<span class="hljs-comment">;</span>
    
    /* æ‰§è¡Œæµ‹è¯•å¾ªç¯ */
    for(uint32_t <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; TEST_ITERATIONS; i++)</span>
    {
        result += i * 2<span class="hljs-comment">;</span>
        result <span class="hljs-attr">-</span>= i / <span class="hljs-number">2</span><span class="hljs-comment">;</span>
    }
    
    /* è®°å½•ç»“æŸæ—¶é—´ */
    <span class="hljs-attr">end_tick</span> = HAL_GetTick()<span class="hljs-comment">;</span>
    
    /* è®¡ç®—æ‰§è¡Œæ—¶é—´ */
    uint32_t <span class="hljs-attr">elapsed_time</span> = end_tick - start_tick<span class="hljs-comment">;</span>
    
    printf("Test completed in %lu ms\n", elapsed_time)<span class="hljs-comment">;</span>
    printf("Result: %lu\n", result)<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-11">3.4 åŠŸè€—ç‰¹æ€§</h3>
<p>åŠŸè€—æ˜¯åµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ä¸­éå¸¸é‡è¦çš„è€ƒè™‘å› ç´ ï¼Œç‰¹åˆ«æ˜¯å¯¹äºç”µæ± ä¾›ç”µçš„è®¾å¤‡ã€‚</p>
<p>ä¸åŒæ¶æ„çš„å¤„ç†å™¨åœ¨åŠŸè€—æ–¹é¢å·®å¼‚å¾ˆå¤§ã€‚</p>
<p>ARM Cortex-M ç³»åˆ—åœ¨ä½åŠŸè€—æ–¹é¢åšå¾—éå¸¸å‡ºè‰²ï¼Œæ”¯æŒå¤šç§ä½åŠŸè€—æ¨¡å¼ï¼š</p>
<ul>
<li><strong>Sleep æ¨¡å¼</strong>ï¼šCPU åœæ­¢ï¼Œå¤–è®¾ç»§ç»­è¿è¡Œ</li>
<li><strong>Stop æ¨¡å¼</strong>ï¼šCPU å’Œå¤§éƒ¨åˆ†å¤–è®¾åœæ­¢ï¼Œä¿æŒ RAM æ•°æ®</li>
<li><strong>Standby æ¨¡å¼</strong>ï¼šä»…ä¿æŒå¤‡ä»½å¯„å­˜å™¨å’Œ RTCï¼ŒåŠŸè€—æœ€ä½</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªè¿›å…¥ä½åŠŸè€—æ¨¡å¼çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-id">#include</span> "stm32f4xx_hal<span class="hljs-selector-class">.h</span>"
â€‹
void <span class="hljs-built_in">Enter_Sleep_Mode</span>(void)
{
    <span class="hljs-comment">/* æŒ‚èµ·SysTickä¸­æ–­ */</span>
    <span class="hljs-built_in">HAL_SuspendTick</span>();
    
    <span class="hljs-comment">/* è¿›å…¥Sleepæ¨¡å¼ */</span>
    <span class="hljs-built_in">HAL_PWR_EnterSLEEPMode</span>(PWR_MAINREGULATOR_ON, PWR_SLEEPENTRY_WFI);
    
    <span class="hljs-comment">/* ä»Sleepæ¨¡å¼å”¤é†’åæ¢å¤SysTick */</span>
    <span class="hljs-built_in">HAL_ResumeTick</span>();
}
â€‹
void <span class="hljs-built_in">Enter_Stop_Mode</span>(void)
{
    <span class="hljs-comment">/* ä½¿èƒ½PWRæ—¶é’Ÿ */</span>
    <span class="hljs-built_in">__HAL_RCC_PWR_CLK_ENABLE</span>();
    
    <span class="hljs-comment">/* æŒ‚èµ·SysTickä¸­æ–­ */</span>
    <span class="hljs-built_in">HAL_SuspendTick</span>();
    
    <span class="hljs-comment">/* è¿›å…¥Stopæ¨¡å¼ */</span>
    <span class="hljs-built_in">HAL_PWR_EnterSTOPMode</span>(PWR_LOWPOWERREGULATOR_ON, PWR_STOPENTRY_WFI);
    
    <span class="hljs-comment">/* ä»Stopæ¨¡å¼å”¤é†’åé‡æ–°é…ç½®ç³»ç»Ÿæ—¶é’Ÿ */</span>
    <span class="hljs-built_in">SystemClock_Config</span>();
    
    <span class="hljs-comment">/* æ¢å¤SysTick */</span>
    <span class="hljs-built_in">HAL_ResumeTick</span>();
}
</code></pre>
<h3 data-id="heading-12">3.5 ä¸­æ–­ç³»ç»Ÿ</h3>
<p>ä¸­æ–­ç³»ç»Ÿæ˜¯åµŒå…¥å¼å¤„ç†å™¨çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<p>ä¸åŒæ¶æ„çš„ä¸­æ–­ç³»ç»Ÿè®¾è®¡å·®å¼‚å¾ˆå¤§ã€‚</p>
<p>ARM Cortex-M ç³»åˆ—ä½¿ç”¨ NVICï¼ˆåµŒå¥—å‘é‡ä¸­æ–­æ§åˆ¶å™¨ï¼‰ï¼Œæ”¯æŒå¤šè¾¾ 240 ä¸ªä¸­æ–­æºï¼Œæ¯ä¸ªä¸­æ–­å¯ä»¥é…ç½® 16 ä¸ªä¼˜å…ˆçº§ã€‚</p>
<p>è¿™ç§è®¾è®¡éå¸¸çµæ´»ï¼Œèƒ½å¤Ÿæ»¡è¶³å¤æ‚åº”ç”¨çš„éœ€æ±‚ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œåˆç†é…ç½®ä¸­æ–­ä¼˜å…ˆçº§éå¸¸é‡è¦ã€‚</p>
<p>æˆ‘çš„ç»éªŒæ˜¯ï¼š</p>
<ul>
<li>é«˜ä¼˜å…ˆçº§ï¼šç»™æ—¶é—´æ•æ„Ÿçš„ä»»åŠ¡ï¼Œå¦‚é€šä¿¡åè®®çš„è¶…æ—¶å¤„ç†</li>
<li>ä¸­ä¼˜å…ˆçº§ï¼šç»™æ™®é€šå¤–è®¾ä¸­æ–­ï¼Œå¦‚ä¸²å£æ¥æ”¶ã€å®šæ—¶å™¨</li>
<li>ä½ä¼˜å…ˆçº§ï¼šç»™ä¸å¤ªç´§æ€¥çš„ä»»åŠ¡ï¼Œå¦‚æŒ‰é”®æ‰«æ</li>
</ul>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-id">#include</span> "stm32f4xx_hal<span class="hljs-selector-class">.h</span>"
â€‹
void <span class="hljs-built_in">NVIC_Config_Example</span>(void)
{
    <span class="hljs-comment">/* é…ç½®USART1ä¸­æ–­ä¼˜å…ˆçº§ */</span>
    <span class="hljs-built_in">HAL_NVIC_SetPriority</span>(USART1_IRQn, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);  <span class="hljs-comment">// æŠ¢å ä¼˜å…ˆçº§1ï¼Œå­ä¼˜å…ˆçº§0</span>
    <span class="hljs-built_in">HAL_NVIC_EnableIRQ</span>(USART1_IRQn);
    
    <span class="hljs-comment">/* é…ç½®TIM2ä¸­æ–­ä¼˜å…ˆçº§ */</span>
    <span class="hljs-built_in">HAL_NVIC_SetPriority</span>(TIM2_IRQn, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>);    <span class="hljs-comment">// æŠ¢å ä¼˜å…ˆçº§2ï¼Œå­ä¼˜å…ˆçº§0</span>
    <span class="hljs-built_in">HAL_NVIC_EnableIRQ</span>(TIM2_IRQn);
    
    <span class="hljs-comment">/* é…ç½®å¤–éƒ¨ä¸­æ–­ä¼˜å…ˆçº§ */</span>
    <span class="hljs-built_in">HAL_NVIC_SetPriority</span>(EXTI0_IRQn, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);   <span class="hljs-comment">// æŠ¢å ä¼˜å…ˆçº§0ï¼ˆæœ€é«˜ï¼‰ï¼Œå­ä¼˜å…ˆçº§0</span>
    <span class="hljs-built_in">HAL_NVIC_EnableIRQ</span>(EXTI0_IRQn);
}
</code></pre>
<h2 data-id="heading-13">4. å¦‚ä½•é€‰æ‹©åˆé€‚çš„å¤„ç†å™¨æ¶æ„</h2>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„å¤„ç†å™¨æ¶æ„éœ€è¦ç»¼åˆè€ƒè™‘å¤šä¸ªå› ç´ ï¼š</p>
<p><strong>4.1 åº”ç”¨éœ€æ±‚</strong></p>
<p>é¦–å…ˆè¦æ˜ç¡®åº”ç”¨çš„å…·ä½“éœ€æ±‚ã€‚</p>
<p>å¦‚æœåªæ˜¯ç®€å•çš„æ§åˆ¶ä»»åŠ¡ï¼Œ8 ä½æˆ– 16 ä½ MCU å°±è¶³å¤Ÿäº†ã€‚</p>
<p>å¦‚æœéœ€è¦è¿è¡Œå¤æ‚çš„ç®—æ³•æˆ–æ“ä½œç³»ç»Ÿï¼Œå°±éœ€è¦ 32 ä½ç”šè‡³ 64 ä½çš„å¤„ç†å™¨ã€‚</p>
<p>æˆ‘åœ¨åšæ±½è½¦ç”µå­é¡¹ç›®çš„æ—¶å€™ï¼Œå› ä¸ºéœ€è¦è¿è¡Œ Linux ç³»ç»Ÿå¹¶å¤„ç†å¤§é‡çš„å¤šåª’ä½“æ•°æ®ï¼Œæ‰€ä»¥é€‰æ‹©äº† ARM Cortex-A ç³»åˆ—çš„å¤„ç†å™¨ã€‚</p>
<p>è€Œåœ¨åšä¸€äº›ç®€å•çš„ä¼ æ„Ÿå™¨èŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨ STM32F103 è¿™æ ·çš„ Cortex-M3 å°±å®Œå…¨å¤Ÿç”¨ã€‚</p>
<p><strong>4.2 æ€§èƒ½è¦æ±‚</strong></p>
<p>è¦æ ¹æ®å®é™…çš„è®¡ç®—é‡æ¥é€‰æ‹©å¤„ç†å™¨æ€§èƒ½ã€‚</p>
<p>è¿‡é«˜çš„æ€§èƒ½ä¼šé€ æˆæˆæœ¬å’ŒåŠŸè€—çš„æµªè´¹ï¼Œè¿‡ä½çš„æ€§èƒ½åˆæ— æ³•æ»¡è¶³éœ€æ±‚ã€‚</p>
<p>ä¸€ä¸ªå®ç”¨çš„æ–¹æ³•æ˜¯ï¼šå…ˆä¼°ç®—åº”ç”¨çš„è®¡ç®—é‡ï¼Œç„¶åé€‰æ‹©æ€§èƒ½ç•¥é«˜äºéœ€æ±‚çš„å¤„ç†å™¨ï¼Œç•™å‡ºä¸€å®šçš„ä½™é‡ã€‚</p>
<p>æˆ‘çš„ç»éªŒæ˜¯ç•™å‡º 30% å·¦å³çš„æ€§èƒ½ä½™é‡æ¯”è¾ƒåˆé€‚ã€‚</p>
<p><strong>4.3 åŠŸè€—é™åˆ¶</strong></p>
<p>å¯¹äºç”µæ± ä¾›ç”µçš„è®¾å¤‡ï¼ŒåŠŸè€—æ˜¯é¦–è¦è€ƒè™‘å› ç´ ã€‚</p>
<p>éœ€è¦é€‰æ‹©æ”¯æŒä½åŠŸè€—æ¨¡å¼çš„å¤„ç†å™¨ï¼Œå¹¶åœ¨è½¯ä»¶è®¾è®¡æ—¶å……åˆ†åˆ©ç”¨è¿™äº›ç‰¹æ€§ã€‚</p>
<p><strong>4.4 å¼€å‘ç”Ÿæ€</strong></p>
<p>å¼€å‘å·¥å…·é“¾ã€è½¯ä»¶åº“ã€æŠ€æœ¯æ”¯æŒç­‰ç”Ÿæ€å› ç´ ä¹Ÿå¾ˆé‡è¦ã€‚</p>
<p>ARM æ¶æ„åœ¨è¿™æ–¹é¢å…·æœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼Œæœ‰å¤§é‡çš„å¼€å‘å·¥å…·å’Œå‚è€ƒèµ„æ–™å¯ç”¨ã€‚</p>
<p><strong>4.5 æˆæœ¬å› ç´ </strong></p>
<p>å¤„ç†å™¨çš„æˆæœ¬åŒ…æ‹¬èŠ¯ç‰‡ä»·æ ¼ã€å¼€å‘æˆæœ¬ã€æˆæƒè´¹ç”¨ç­‰ã€‚å¯¹äºå¤§æ‰¹é‡äº§å“ï¼Œå³ä½¿æ¯é¢—èŠ¯ç‰‡èŠ‚çœå‡ æ¯›é’±ï¼Œæ€»ä½“ä¹Ÿèƒ½èŠ‚çœå¾ˆå¤§ä¸€ç¬”è´¹ç”¨ã€‚</p>
<p><strong>4.6 é•¿æœŸä¾›è´§</strong></p>
<p>åµŒå…¥å¼äº§å“çš„ç”Ÿå‘½å‘¨æœŸé€šå¸¸å¾ˆé•¿ï¼Œéœ€è¦è€ƒè™‘å¤„ç†å™¨çš„é•¿æœŸä¾›è´§èƒ½åŠ›ã€‚</p>
<p>ä¸€äº›è€ç‰Œå‚å•†å¦‚ STã€NXP é€šå¸¸èƒ½ä¿è¯ 10 å¹´ä»¥ä¸Šçš„ä¾›è´§å‘¨æœŸã€‚</p>
<h2 data-id="heading-14">5. å¤„ç†å™¨æ¶æ„çš„å‘å±•è¶‹åŠ¿</h2>
<h3 data-id="heading-15">5.1 å¼‚æ„å¤šæ ¸</h3>
<p>ç°ä»£åµŒå…¥å¼å¤„ç†å™¨è¶Šæ¥è¶Šå¤šåœ°é‡‡ç”¨å¼‚æ„å¤šæ ¸è®¾è®¡ï¼Œå³åœ¨ä¸€é¢—èŠ¯ç‰‡ä¸Šé›†æˆä¸åŒç±»å‹çš„å¤„ç†å™¨æ ¸å¿ƒã€‚</p>
<p>æ¯”å¦‚ ARM çš„ big.LITTLE æ¶æ„ï¼ŒåŒæ—¶åŒ…å«é«˜æ€§èƒ½æ ¸å¿ƒå’Œä½åŠŸè€—æ ¸å¿ƒï¼Œæ ¹æ®è´Ÿè½½åŠ¨æ€åˆ‡æ¢ã€‚</p>
<p>åœ¨æ±½è½¦ç”µå­é¢†åŸŸï¼Œæˆ‘è§è¿‡ä¸€äº›èŠ¯ç‰‡åŒæ—¶é›†æˆ Cortex-A æ ¸å¿ƒï¼ˆè¿è¡Œ Linuxï¼‰ã€Cortex-R æ ¸å¿ƒï¼ˆå¤„ç†å®æ—¶ä»»åŠ¡ï¼‰å’Œ Cortex-M æ ¸å¿ƒï¼ˆæ§åˆ¶å¤–è®¾ï¼‰ï¼Œè¿™ç§è®¾è®¡èƒ½å¤Ÿå¾ˆå¥½åœ°å¹³è¡¡æ€§èƒ½ã€å®æ—¶æ€§å’ŒåŠŸè€—ã€‚</p>
<h3 data-id="heading-16">5.2 AI åŠ é€Ÿ</h3>
<p>éšç€è¾¹ç¼˜ AI çš„å…´èµ·ï¼Œè¶Šæ¥è¶Šå¤šçš„åµŒå…¥å¼å¤„ç†å™¨å¼€å§‹é›†æˆ AI åŠ é€Ÿå•å…ƒï¼Œå¦‚ NPUï¼ˆç¥ç»ç½‘ç»œå¤„ç†å•å…ƒï¼‰ã€‚</p>
<p>è¿™äº›ä¸“ç”¨ç¡¬ä»¶èƒ½å¤Ÿå¤§å¹…æå‡ç¥ç»ç½‘ç»œæ¨ç†çš„æ•ˆç‡ã€‚</p>
<h3 data-id="heading-17">5.3 å®‰å…¨ç‰¹æ€§</h3>
<p>å®‰å…¨æ€§åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­è¶Šæ¥è¶Šé‡è¦ã€‚</p>
<p>ç°ä»£å¤„ç†å™¨æ™®éé›†æˆäº†ç¡¬ä»¶å®‰å…¨æ¨¡å—ï¼Œå¦‚ TrustZoneã€å®‰å…¨å¯åŠ¨ã€åŠ å¯†å¼•æ“ç­‰ã€‚</p>
<h3 data-id="heading-18">5.4 å¼€æºæ¶æ„</h3>
<p>RISC-V ç­‰å¼€æºæ¶æ„çš„å…´èµ·ï¼Œä¸ºåµŒå…¥å¼å¤„ç†å™¨å¸‚åœºå¸¦æ¥äº†æ–°çš„æ´»åŠ›ã€‚</p>
<p>å¼€æºæ¶æ„çš„ä¼˜åŠ¿åœ¨äºçµæ´»æ€§å’Œå¯å®šåˆ¶æ€§ï¼Œèƒ½å¤Ÿæ»¡è¶³ç‰¹å®šåº”ç”¨çš„éœ€æ±‚ã€‚</p>
<h2 data-id="heading-19">6. æ€»ç»“</h2>
<p>åµŒå…¥å¼å¤„ç†å™¨æ¶æ„æ˜¯ä¸€ä¸ªåšå¤§ç²¾æ·±çš„é¢†åŸŸï¼Œæ¶‰åŠç¡¬ä»¶è®¾è®¡ã€æŒ‡ä»¤é›†ã€ç¼–è¯‘å™¨ã€æ“ä½œç³»ç»Ÿç­‰å¤šä¸ªå±‚é¢ã€‚</p>
<p>ä½œä¸ºåµŒå…¥å¼å¼€å‘è€…ï¼Œæˆ‘ä»¬ä¸éœ€è¦æˆä¸ºæ¶æ„è®¾è®¡ä¸“å®¶ï¼Œä½†éœ€è¦å¯¹å¸¸è§æ¶æ„æœ‰åŸºæœ¬çš„äº†è§£ï¼Œè¿™æ ·æ‰èƒ½åœ¨é¡¹ç›®ä¸­åšå‡ºæ­£ç¡®çš„æŠ€æœ¯é€‰æ‹©ã€‚</p>
<p>åœ¨æˆ‘çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œä» 51 å•ç‰‡æœºåˆ° ARMï¼Œä»ç®€å•çš„è£¸æœºç¨‹åºåˆ°å¤æ‚çš„ Linux ç³»ç»Ÿï¼Œæ¯ä¸€æ¬¡æ¶æ„çš„è½¬å˜éƒ½æ˜¯ä¸€æ¬¡æŠ€æœ¯èƒ½åŠ›çš„æå‡ã€‚</p>
<p>æˆ‘çš„å»ºè®®æ˜¯ï¼šå…ˆæ·±å…¥æŒæ¡ä¸€ç§ä¸»æµæ¶æ„ï¼ˆæ¯”å¦‚ ARMï¼‰ï¼Œç„¶åå†å»äº†è§£å…¶ä»–æ¶æ„ï¼Œè¿™æ ·èƒ½å¤Ÿå»ºç«‹èµ·ç³»ç»Ÿçš„çŸ¥è¯†ä½“ç³»ã€‚</p>
<p>éšç€æŠ€æœ¯çš„å‘å±•ï¼Œæ–°çš„å¤„ç†å™¨æ¶æ„ä¸æ–­æ¶Œç°ï¼Œä½†æ ¸å¿ƒçš„è®¾è®¡ç†å¿µæ˜¯ç›¸é€šçš„ã€‚</p>
<p>åªè¦æŒæ¡äº†åŸºæœ¬åŸç†ï¼Œå­¦ä¹ æ–°æ¶æ„å°±ä¼šå˜å¾—å®¹æ˜“å¾ˆå¤šã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©å¤§å®¶å»ºç«‹èµ·å¯¹åµŒå…¥å¼å¤„ç†å™¨æ¶æ„çš„æ•´ä½“è®¤è¯†ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­èƒ½å¤Ÿåšå‡ºæ›´å¥½çš„æŠ€æœ¯å†³ç­–ã€‚</p>
<p><strong>æ›´å¤šç¼–ç¨‹å­¦ä¹ èµ„æº</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Fcpp%2Fc_course_handout_2025.html" target="_blank" title="https://www.lxlinux.net/e/cpp/c_course_handout_2025.html" ref="nofollow noopener noreferrer">C è¯­è¨€é›¶åŸºç¡€å…¥é—¨ç”µå­ä¹¦-2026 æœ€æ–°ç‰ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Fstm32%2Fstm32_course_handout_2024.html" target="_blank" title="https://www.lxlinux.net/e/stm32/stm32_course_handout_2024.html" ref="nofollow noopener noreferrer">STM32 é›¶åŸºç¡€å…¥é—¨ç”µå­ä¹¦-2026 æœ€æ–°ç‰ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Ffreertos%2Ffreertos_course_handout_2025.html" target="_blank" title="https://www.lxlinux.net/e/freertos/freertos_course_handout_2025.html" ref="nofollow noopener noreferrer">FreeRTOS é›¶åŸºç¡€å…¥é—¨ç”µå­ä¹¦-2026 æœ€æ–°ç‰ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Fcpp%2Fcpp_course_handout_2025.html" target="_blank" title="https://www.lxlinux.net/e/cpp/cpp_course_handout_2025.html" ref="nofollow noopener noreferrer">C++ é›¶åŸºç¡€å…¥é—¨ç”µå­ä¹¦-2026 æœ€æ–°ç‰ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2F51-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/51-learning-path.html" ref="nofollow noopener noreferrer">51 å•ç‰‡æœºé›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2Fad-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/ad-learning-path.html" ref="nofollow noopener noreferrer">AD ç”»æ¿é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2Fc-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/c-learning-path.html" ref="nofollow noopener noreferrer">C è¯­è¨€é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2Fcpp-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/cpp-learning-path.html" ref="nofollow noopener noreferrer">C++ è¯­è¨€é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2Fesp32-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/esp32-learning-path.html" ref="nofollow noopener noreferrer">ESP32 é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2Ffreertos-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/freertos-learning-path.html" ref="nofollow noopener noreferrer">FreeRTOS é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2Flinux-devop-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/linux-devop-learning-path.html" ref="nofollow noopener noreferrer">Linux åº”ç”¨å¼€å‘é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2Flinux-lower-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/linux-lower-learning-path.html" ref="nofollow noopener noreferrer">Linux åº•å±‚å¼€å‘é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2Flvgl-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/lvgl-learning-path.html" ref="nofollow noopener noreferrer">LVGL é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2Fqt-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/qt-learning-path.html" ref="nofollow noopener noreferrer">QT é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lxlinux.net%2Fe%2Flearning-path%2Fstm32-learning-path.html" target="_blank" title="https://www.lxlinux.net/e/learning-path/stm32-learning-path.html" ref="nofollow noopener noreferrer">STM32 é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[createAsyncThunk]]></title>    <link>https://juejin.cn/post/7603854784864944168</link>    <guid>https://juejin.cn/post/7603854784864944168</guid>    <pubDate>2026-02-08T16:20:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603854784864944168" data-draft-id="7603854784864927784" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="createAsyncThunk"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2026-02-08T16:20:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="liyang_ii"/> <meta itemprop="url" content="https://juejin.cn/user/2365804756342360"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            createAsyncThunk
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2365804756342360/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    liyang_ii
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T16:20:53.000Z" title="Sun Feb 08 2026 16:20:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€ã€ åˆ›å»ºå¼‚æ­¥å‡½æ•°</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createSlice, createAsyncThunk } <span class="hljs-keyword">from</span> <span class="hljs-string">'@reduxjs/toolkit'</span>;
<span class="hljs-keyword">import</span> { getStuListApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'../api/stuApi'</span>;

<span class="hljs-comment">// 1. åˆ›å»ºå¼‚æ­¥ thunk</span>
<span class="hljs-keyword">const</span> fetchStudents = <span class="hljs-title function_">createAsyncThunk</span>(
  <span class="hljs-string">'students/fetchStudents'</span>,
  <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getStuListApi</span>();
    <span class="hljs-keyword">return</span> response;
  }
);

<span class="hljs-comment">// 2. åˆ›å»º slice</span>
<span class="hljs-keyword">const</span> studentsSlice = <span class="hljs-title function_">createSlice</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'students'</span>,
  <span class="hljs-attr">initialState</span>: {
    <span class="hljs-attr">list</span>: [],
    <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>,
  },
  <span class="hljs-attr">reducers</span>: {
    <span class="hljs-comment">// åŒæ­¥ reducers...</span>
  },
  <span class="hljs-comment">// 3. ä½¿ç”¨ extraReducers å¤„ç†å¼‚æ­¥ action</span>
  <span class="hljs-attr">extraReducers</span>: <span class="hljs-function">(<span class="hljs-params">builder</span>) =&gt;</span> {
    builder
      <span class="hljs-comment">// pendingï¼šè¯·æ±‚å¼€å§‹</span>
      .<span class="hljs-title function_">addCase</span>(fetchStudents.<span class="hljs-property">pending</span>, <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
        state.<span class="hljs-property">loading</span> = <span class="hljs-literal">true</span>;
        state.<span class="hljs-property">error</span> = <span class="hljs-literal">null</span>;
      })
      <span class="hljs-comment">// fulfilledï¼šè¯·æ±‚æˆåŠŸ</span>
      .<span class="hljs-title function_">addCase</span>(fetchStudents.<span class="hljs-property">fulfilled</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> {
        state.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>;
        state.<span class="hljs-property">list</span> = action.<span class="hljs-property">payload</span>;
      })
      <span class="hljs-comment">// rejectedï¼šè¯·æ±‚å¤±è´¥</span>
      .<span class="hljs-title function_">addCase</span>(fetchStudents.<span class="hljs-property">rejected</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> {
        state.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>;
        state.<span class="hljs-property">error</span> = action.<span class="hljs-property">error</span>.<span class="hljs-property">message</span>;
      });
  },
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> studentsSlice.<span class="hljs-property">reducer</span>;
</code></pre>
<p>äºŒã€åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</p>
<pre><code class="hljs language-import" lang="import">import { fetchStudents } from '../store/modules/students';

function StudentsList() {
  const dispatch = useDispatch();
  const { list, loading, error } = useSelector((state) =&gt; state.students);

  useEffect(() =&gt; {
    dispatch(fetchStudents());
  }, [dispatch]);

  if (loading) return &lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;;
  if (error) return &lt;div&gt;é”™è¯¯: {error}&lt;/div&gt;;

  return (
    &lt;div&gt;
      {list.map((student) =&gt; (
        &lt;div key={student.id}&gt;{student.name}&lt;/div&gt;
      ))}
    &lt;/div&gt;
  );
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å¥è¯ç”Ÿæˆæ•´å¥— APIï¼šæˆ‘ç”¨ Claude Code è‡ªå®šä¹‰ Skill + MCP æäº†ä¸ªæ¥å£ä»£ç ç”Ÿæˆå™¨]]></title>    <link>https://juejin.cn/post/7604344066579120179</link>    <guid>https://juejin.cn/post/7604344066579120179</guid>    <pubDate>2026-02-09T02:24:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604344066579120179" data-draft-id="7604093823958106131" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å¥è¯ç”Ÿæˆæ•´å¥— APIï¼šæˆ‘ç”¨ Claude Code è‡ªå®šä¹‰ Skill + MCP æäº†ä¸ªæ¥å£ä»£ç ç”Ÿæˆå™¨"/> <meta itemprop="keywords" content="Claude,Agent"/> <meta itemprop="datePublished" content="2026-02-09T02:24:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jerrywus"/> <meta itemprop="url" content="https://juejin.cn/user/2823201591402990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å¥è¯ç”Ÿæˆæ•´å¥— APIï¼šæˆ‘ç”¨ Claude Code è‡ªå®šä¹‰ Skill + MCP æäº†ä¸ªæ¥å£ä»£ç ç”Ÿæˆå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2823201591402990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jerrywus
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:24:14.000Z" title="Mon Feb 09 2026 02:24:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    85
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€å¥è¯ç”Ÿæˆæ•´å¥— APIï¼šæˆ‘ç”¨ Claude Code è‡ªå®šä¹‰ Skill + MCP æäº†ä¸ªæ¥å£ä»£ç ç”Ÿæˆå™¨</h2>
<blockquote>
<p>ä» Swagger æ–‡æ¡£åˆ° TypeScript ç±»å‹ã€API å‡½æ•°ã€Mock æ•°æ®ï¼Œä¸€å¥æŒ‡ä»¤å…¨è‡ªåŠ¨ã€‚</p>
</blockquote>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åšå‰ç«¯çš„åº”è¯¥éƒ½ç»å†è¿‡è¿™ç§äº‹ï¼š</p>
<p>åç«¯ä¸¢æ¥ä¸€ä¸ª Swagger é“¾æ¥ï¼Œç„¶åä½ å¾—ï¼š</p>
<ol>
<li>æ‰“å¼€æ–‡æ¡£ï¼Œä¸€ä¸ªä¸ªçœ‹æ¥å£å®šä¹‰</li>
<li>æ‰‹å†™ TypeScript ç±»å‹ï¼ˆè¯·æ±‚å‚æ•°ã€å“åº”ç»“æ„ï¼‰</li>
<li>å†™ API è°ƒç”¨å‡½æ•°</li>
<li>é€  Mock æ•°æ®ç»™æœ¬åœ°å¼€å‘ç”¨</li>
<li>æ³¨å†Œ Mock è·¯ç”±</li>
</ol>
<p>ä¸€ä¸ªæ¨¡å—å°‘è¯´ 2-3 ä¸ªæ¥å£ï¼Œè¿™äº›é‡å¤åŠ³åŠ¨èƒ½è€—æ‰åŠå¤©ã€‚</p>
<p>åæ¥æˆ‘æƒ³ï¼Œè¿™æ´»å„¿èƒ½ä¸èƒ½è‡ªåŠ¨åŒ–ï¼Ÿäºæ˜¯æŠ˜è…¾äº†ä¸€å¥—æ–¹æ¡ˆï¼Œç°åœ¨åªè¦ä¸€å¥è¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">å®ç°æ¥å£ï¼šhttps://gateway.xxx.cn/doc.html<span class="hljs-comment">#/ç»„ç»‡æ¶æ„æœåŠ¡/ä¾›åº”å•†ç®¡ç†/page_1</span>
</code></pre>
<p>Claude Code ä¼šè‡ªå·±æ‰“å¼€ Swagger æ–‡æ¡£ã€æå–æ¥å£ä¿¡æ¯ã€è®©ä½ å‹¾é€‰è¦å®ç°å“ªäº›æ¥å£ï¼Œç„¶åå¹¶è¡Œç”Ÿæˆæ‰€æœ‰ä»£ç ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹æ•´ä¸ªæ­å»ºè¿‡ç¨‹å’Œå®é™…è·‘èµ·æ¥çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-2">æ•´ä½“æ¶æ„</h3>
<p>å…ˆçœ‹å…¨è²Œï¼Œæ–¹æ¡ˆåˆ†ä¸‰å—ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  api-add Skill                   â”‚
â”‚              (å·¥ä½œæµç¼–æ’ / å…¥å£)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚ chrome-devtools   â”‚  â† è¯»å– Swagger æ–‡æ¡£       â”‚
â”‚  â”‚      MCP          â”‚  â† æå–æ¥å£ä¿¡æ¯             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚           â”‚                                      â”‚
â”‚           â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚        Agent Team (å¹¶è¡Œ)          â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚
â”‚  â”‚  â”‚ api-define â”‚ â”‚ mock-create â”‚  â”‚            â”‚
â”‚  â”‚  â”‚  (Haiku)   â”‚ â”‚  (Haiku)    â”‚  â”‚            â”‚
â”‚  â”‚  â”‚            â”‚ â”‚             â”‚  â”‚            â”‚
â”‚  â”‚  â”‚ TS ç±»å‹    â”‚ â”‚ Mock æ•°æ®    â”‚  â”‚            â”‚
â”‚  â”‚  â”‚ API å‡½æ•°   â”‚ â”‚ Mock è·¯ç”±    â”‚  â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<ul>
<li>Skillï¼šè‡ªå®šä¹‰æŠ€èƒ½ï¼Œå®šä¹‰å·¥ä½œæµæ€ä¹ˆè·‘</li>
<li>MCP (Model Context Protocol)ï¼šè®© AI èƒ½æ“æ§æµè§ˆå™¨ï¼Œç›´æ¥è¯»æ–‡æ¡£</li>
<li>Agent Teamï¼šä¸¤ä¸ª Agent åŒæ—¶å¹²æ´»ï¼Œä¸€ä¸ªå†™ç±»å‹å’Œ APIï¼Œä¸€ä¸ªå†™ Mock</li>
</ul>
<p>ä¸‹é¢ä¸€ä¸ªä¸ªè¯´ã€‚</p>
<h3 data-id="heading-3">ä¸€ã€Chrome DevTools MCP -- è®© AI "çœ‹è§"æµè§ˆå™¨</h3>
<h4 data-id="heading-4">MCP æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>MCPï¼ˆModel Context Protocolï¼‰æ˜¯ Anthropic å‡ºçš„ä¸€ä¸ªå¼€æ”¾åè®®ï¼Œè®© AI èƒ½è·Ÿå¤–éƒ¨å·¥å…·äº¤äº’ã€‚ç®€å•è¯´å°±æ˜¯ AI çš„æ’ä»¶ç³»ç»Ÿï¼Œæ¥ä¸Šä¸åŒçš„ MCP Serverï¼ŒAI å°±å¤šäº†ä¸€ç§èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-5">ä¸ºä»€ä¹ˆè¦ç”¨ Chrome DevTools MCPï¼Ÿ</h4>
<p>Swagger/Knife4j æ–‡æ¡£æ˜¯åŠ¨æ€æ¸²æŸ“çš„ SPA é¡µé¢ã€‚ä½ ç”¨ <code>fetch</code> æˆ– <code>curl</code> å»è¯·æ±‚ï¼Œæ‹¿åˆ°çš„åªæ˜¯ä¸€ä¸ªç©ºå£³ HTMLï¼Œæ¥å£ä¿¡æ¯å…¨é  JS æ¸²æŸ“å‡ºæ¥ï¼Œæ ¹æœ¬æŠ“ä¸åˆ°ã€‚</p>
<p>Chrome DevTools MCP èƒ½è®© AI æ“æ§ä¸€ä¸ªçœŸå®çš„æµè§ˆå™¨ï¼š</p>
<ul>
<li>æ‰“å¼€é¡µé¢ï¼Œç­‰ JS æ¸²æŸ“å®Œ</li>
<li>è¯»å–é¡µé¢çš„å¯è®¿é—®æ€§æ ‘ï¼ˆAccessibility Treeï¼‰</li>
<li>ç‚¹å‡»å…ƒç´ ã€åšé¡µé¢äº¤äº’</li>
</ul>
<p>è¯´ç™½äº†å°±æ˜¯è®© AI èƒ½åƒäººä¸€æ ·çœ‹ç½‘é¡µã€‚</p>
<h4 data-id="heading-6">æ€ä¹ˆé…ç½®</h4>
<p>åœ¨ Claude Code é‡Œæ·»åŠ  <code>chrome-devtools</code> MCP serverï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FChromeDevTools%2Fchrome-devtools-mcp%3Ftab%3Dreadme-ov-file%23mcp-client-configuration" target="_blank" title="https://github.com/ChromeDevTools/chrome-devtools-mcp?tab=readme-ov-file#mcp-client-configuration" ref="nofollow noopener noreferrer">chrome devtools mcp github åœ°å€</a></p>
<ul>
<li>æ‰“å¼€ github é¡¹ç›®é¡µé¢ï¼Œæ‰¾åˆ° Claude Code çš„é…ç½®æŒ‡ä»¤ã€‚è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œç»ˆç«¯æ‰§è¡Œï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">claude mcp add chrome-devtools --scope user npx chrome-devtools-mcp@latest
</code></pre>
<ul>
<li>ç„¶ååœ¨é¡¹ç›® <code>.claude</code> ç›®å½•ä¸‹åˆ›å»º <code>mcp.json</code>ï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"chrome-devtools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"chrome-devtools-mcp@latest"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>é…å¥½ä¹‹å Claude Code å°±èƒ½æ“ä½œæµè§ˆå™¨äº†ï¼Œä¸»è¦ç”¨åˆ°è¿™å‡ ä¸ªå·¥å…·ï¼š</p>





























<table><thead><tr><th>å·¥å…·</th><th>å¹²ä»€ä¹ˆçš„</th></tr></thead><tbody><tr><td><code>navigate_page</code></td><td>æ‰“å¼€æŒ‡å®š URL</td></tr><tr><td><code>take_snapshot</code></td><td>è·å–é¡µé¢å¿«ç…§ï¼ˆå¯è®¿é—®æ€§æ ‘ï¼‰</td></tr><tr><td><code>click</code></td><td>ç‚¹å‡»é¡µé¢å…ƒç´ </td></tr><tr><td><code>fill</code></td><td>å¡«å†™è¡¨å•</td></tr><tr><td><code>take_screenshot</code></td><td>æˆªå›¾</td></tr></tbody></table>
<p>æˆ‘ä»¬è¿™ä¸ªåœºæ™¯ä¸»è¦ç”¨å‰ä¸‰ä¸ªï¼šå¯¼èˆªã€å¿«ç…§ã€ç‚¹å‡»ã€‚</p>
<h3 data-id="heading-7">äºŒã€api-add Skill -- å·¥ä½œæµç¼–æ’</h3>
<h4 data-id="heading-8">Skill æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>Claude Code çš„ Skill å°±æ˜¯ä¸€ä¸ª Markdown æ–‡ä»¶ï¼Œå‘Šè¯‰ AI ç¢°åˆ°ä»€ä¹ˆæƒ…å†µè¯¥æ€ä¹ˆåšã€‚é‡Œé¢å†™æ¸…æ¥šï¼š</p>
<ul>
<li>ä»€ä¹ˆæ—¶å€™è§¦å‘</li>
<li>æŒ‰ä»€ä¹ˆæ­¥éª¤æ‰§è¡Œ</li>
<li>æœ‰ä»€ä¹ˆé™åˆ¶</li>
</ul>
<p>æ–‡ä»¶æ”¾åœ¨ <code>.claude/skills/&lt;skill-name&gt;/SKILL.md</code>ï¼ŒClaude Code å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åŠ è½½ã€‚</p>
<h4 data-id="heading-9">api-add Skill æ€ä¹ˆè®¾è®¡çš„</h4>
<p>æˆ‘æƒ³è¦çš„æ•ˆæœæ˜¯ï¼šç»™ä¸€ä¸ª Swagger URLï¼Œè‡ªåŠ¨æŠŠæ¥å£æ–‡æ¡£å˜æˆå¯ç”¨çš„ä»£ç ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">.claude/skills/api-add/SKILL.md
</code></pre>
<pre><code class="hljs language-markdown" lang="markdown">---
name: api-add
description: ä» Swagger æ–‡æ¡£æˆ– md æ–‡æ¡£å¿«é€Ÿåˆ›å»º API functionã€
  TypeScript ç±»å‹å®šä¹‰å’Œ Mock å®ç°ã€‚
<span class="hljs-section">  è§¦å‘å…³é”®è¯ï¼šå®ç°æ¥å£ã€åˆ›å»ºæ¥å£ã€æ·»åŠ APIã€æ¥å£å®šä¹‰ã€‚
---</span>

<span class="hljs-section"># API from Swagger Doc</span>

<span class="hljs-section">## skill è§¦å‘åœºæ™¯</span>

<span class="hljs-section">### åœºæ™¯1</span>
ç”¨æˆ·æä¾›æ¥å£ urlï¼Œå¹¶è¯´å®ç°æ¥å£å®šä¹‰

<span class="hljs-section">### åœºæ™¯2</span>
ç”¨æˆ·æŒ‡å®šä¸€ä¸ª md æ–‡æ¡£ï¼Œåˆ™ç›´æ¥ä»æ–‡æ¡£ä¸­è¯»å–æ¥å£å®šä¹‰

<span class="hljs-section">## å·¥ä½œæµç¨‹</span>

<span class="hljs-section">### ç¬¬ä¸€æ­¥ï¼šè·å–æ¥å£ä¿¡æ¯</span>

ä½¿ç”¨ chrome-devtools-mcp è¯»å– Swagger æ–‡æ¡£ï¼š

<span class="hljs-bullet">1.</span> ä½¿ç”¨ navigate<span class="hljs-emphasis">_page æ‰“å¼€ Swagger URL
2. ä½¿ç”¨ take_</span>snapshot è¯»å–é¡µé¢å†…å®¹
<span class="hljs-bullet">3.</span> å±•å¼€å·¦ä¾§èœå•ï¼Œè·å–å½“å‰åˆ†ç±»ä¸‹çš„æ‰€æœ‰æ¥å£åˆ—è¡¨
<span class="hljs-bullet">4.</span> ä½¿ç”¨ AskUserQuestionï¼Œåˆ—å‡ºæ‰€æœ‰æ¥å£ä¾›ç”¨æˆ·é€‰æ‹©
<span class="hljs-bullet">5.</span> ç”¨æˆ·ç¡®è®¤åï¼Œé€ä¸€ç‚¹å‡»å¹¶æå–å®Œæ•´ä¿¡æ¯

<span class="hljs-section">### ç¬¬äºŒæ­¥ï¼šåˆ›å»º Agent Team å¹¶è¡Œç”Ÿæˆä»£ç </span>

åˆ›å»º 2 ä¸ª teammate åˆ†åˆ«è´Ÿè´£ï¼š
<span class="hljs-bullet">-</span> api-defineï¼šTypeScript ç±»å‹ + API å‡½æ•°
<span class="hljs-bullet">-</span> mock-createï¼šMock æ•°æ® + Mock è·¯ç”±

<span class="hljs-section">### ç¬¬ä¸‰æ­¥ï¼šæ¸…é™¤ teams å¹¶ç»“æŸ</span>
</code></pre>
<p>è¿™é‡Œè¯´å‡ ä¸ªæˆ‘åšçš„é€‰æ‹©ï¼š</p>
<p><strong>1. ä¸ºä»€ä¹ˆç”¨ MCP è€Œä¸æ˜¯ç›´æ¥è¯·æ±‚ APIï¼Ÿ</strong></p>
<p>Swagger æ–‡æ¡£æ˜¯å‰ç«¯æ¸²æŸ“çš„ SPAï¼ŒHTTP è¯·æ±‚æ‹¿ä¸åˆ°å†…å®¹ã€‚å¿…é¡»åœ¨çœŸå®æµè§ˆå™¨é‡Œè·‘ä¸€é JS æ‰èƒ½çœ‹åˆ°æ¥å£ä¿¡æ¯ã€‚</p>
<p><strong>2. ä¸ºä»€ä¹ˆè¦è®©ç”¨æˆ·é€‰æ¥å£ï¼Ÿ</strong></p>
<p>ä¸€ä¸ªæ¨¡å—å¯èƒ½æœ‰åå‡ ä¸ªæ¥å£ï¼Œä½†è¿™æ¬¡è¿­ä»£å¯èƒ½åªç”¨åˆ°å…¶ä¸­ä¸¤ä¸‰ä¸ªï¼ˆæˆ–è€…éƒ¨åˆ†æ¥å£å·²ç»å®ç°è¿‡äº†ï¼‰ã€‚è®©ç”¨æˆ·è‡ªå·±å‹¾é€‰ï¼Œçœå¾—ç”Ÿæˆä¸€å †ç”¨ä¸ä¸Šï¼ˆæˆ–è€…é‡å¤ï¼‰çš„ä»£ç ã€‚</p>
<p><strong>3. ä¸ºä»€ä¹ˆç”¨ Agent Teamï¼Ÿ</strong></p>
<p>å†™ TypeScript ç±»å‹/API å‡½æ•°å’Œå†™ Mock æ•°æ®/è·¯ç”±ï¼Œè¿™ä¸¤ä»¶äº‹äº’ä¸ä¾èµ–ã€‚è®©ä¸¤ä¸ª Agent åŒæ—¶è·‘ï¼Œæ—¶é—´çœä¸€åŠã€‚è€Œä¸” Agent ç”¨çš„æ˜¯ Haiku æ¨¡å‹ï¼Œæ¯”ä¸»æ¨¡å‹ä¾¿å®œå¾ˆå¤šã€‚</p>
<p>âœï¸ æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå•ç‹¬å†™â¬†æ˜¯6åˆ†é’Ÿå¤šä¸€ç‚¹ï¼›ä½¿ç”¨agent teams æ˜¯4åˆ†é’Ÿå¤šä¸€ç‚¹ï¼ˆå› ä¸ºæ˜¯å°åŠŸèƒ½ï¼Œ æ—¶é—´èŠ‚çœä¸å¤ªæ˜æ˜¾ï¼Œ ä½†è´µåœ¨çœæ—¶é—´ã€‚ ä½ å¯ä»¥å°è¯•å¤§åŠŸèƒ½ï¼Œæ¯”å¦‚å®ç°ä¸€ä¸ªå¤æ‚çš„æ¨¡å—ï¼Œæ—¶é—´èŠ‚çœä¼šæ›´æ˜æ˜¾ï¼‰</p>
<h3 data-id="heading-10">ä¸‰ã€Agent å®šä¹‰ -- åˆ†å·¥å¹²æ´»</h3>
<p>é™¤äº† Skillï¼Œè¿˜å¾—å®šä¹‰ä¸¤ä¸ª Agentï¼Œå®ƒä»¬æ‰æ˜¯çœŸæ­£å†™ä»£ç çš„ã€‚</p>
<p>ğŸ’¡ é‡ç‚¹ï¼šagent teamçš„é…ç½®ï¼Œè¯·å‚è€ƒï¼š&lt;<a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.claude.com%2Fdocs%2Fen%2Fagent-teams" target="_blank" title="https://code.claude.com/docs/en/agent-teams" ref="nofollow noopener noreferrer">code.claude.com/docs/en/ageâ€¦</a></p>
<h4 data-id="heading-11">api-define Agent</h4>
<pre><code class="hljs language-bash" lang="bash">.claude/agents/api-define.md
</code></pre>
<pre><code class="hljs language-markdown" lang="markdown">---
name: api-define
description: å®ç°æŒ‡å®šæ¨¡å—çš„ api function &amp; typescript ç±»å‹çš„åˆ›å»º
model: haiku
<span class="hljs-section">color: green
---</span>

å®ç°æŒ‡å®šæ¨¡å—çš„ api function &amp; typescript ç±»å‹çš„åˆ›å»ºï¼Œ
ä¸¥æ ¼æŒ‰ä»¥ä¸‹è¦æ±‚å®ç°ï¼š

<span class="hljs-bullet">1.</span> ä¸¥æ ¼å‚ç…§ .claude/rules/ ä¸­çš„ç¼–ç è§„èŒƒ
<span class="hljs-bullet">2.</span> å®Œæ•´å®ç°ï¼šTypeScript ç±»å‹ã€API å‡½æ•°
</code></pre>
<h4 data-id="heading-12">mock-create Agent</h4>
<pre><code class="hljs language-bash" lang="bash">.claude/agents/mock-define.md
</code></pre>
<pre><code class="hljs language-markdown" lang="markdown">---
name: mock-create
description: å®ç°æŒ‡å®š api æ¥å£çš„ mock å®ç°
model: haiku
<span class="hljs-section">color: orange
---</span>

å®ç°æŒ‡å®š api æ¥å£çš„ mock å®ç°ï¼Œä¸¥æ ¼æŒ‰ä»¥ä¸‹è¦æ±‚å®ç°ï¼š

<span class="hljs-bullet">1.</span> ä¸¥æ ¼å‚ç…§ .claude/rules/ ä¸­çš„ç¼–ç è§„èŒƒ
<span class="hljs-bullet">2.</span> å®Œæ•´å®ç°ï¼šMock æœåŠ¡å™¨ï¼ˆmocks ç›®å½•ï¼‰ï¼Œ
   å®ç° Express æ¥å£ï¼ˆroutesã€controllersã€dataï¼‰
</code></pre>
<p>å‡ ä¸ªå€¼å¾—è¯´çš„ç‚¹ï¼š</p>
<ul>
<li><code>model: haiku</code> -- ç”¨è½»é‡æ¨¡å‹å°±å¤Ÿäº†ï¼Œå†™è¿™ç§æ¨¡å¼åŒ–çš„ä»£ç ä¸éœ€è¦å¤§æ¨¡å‹ï¼Œè·‘å¾—å¿«è¿˜çœé’±</li>
<li>"ä¸¥æ ¼å‚ç…§ç¼–ç è§„èŒƒ" -- é  <code>.claude/rules/</code> é‡Œçš„è§„åˆ™æ–‡ä»¶çº¦æŸä»£ç é£æ ¼ï¼Œåé¢ä¼šè®²</li>
<li><code>color</code> -- ç»ˆç«¯é‡Œç”¨ä¸åŒé¢œè‰²åŒºåˆ†ä¸¤ä¸ª Agent çš„è¾“å‡ºï¼Œçœ‹ç€æ–¹ä¾¿</li>
</ul>
<h3 data-id="heading-13">å››ã€å®æˆ˜æ¼”ç¤º</h3>
<p>æ¥çœ‹å®é™…è·‘ä¸€éæ˜¯ä»€ä¹ˆæ ·ã€‚æˆ‘è¦ç»™"ä¾›åº”å•†ç®¡ç†"æ¨¡å—å®ç°æ¥å£ã€‚</p>
<h4 data-id="heading-14">Step 1ï¼šè§¦å‘ Skill</h4>
<p>åªéœ€è¦è¾“å…¥ä¸€å¥è¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">å®ç°æ¥å£ï¼šhttps://gateway.xxx.cn/doc.html<span class="hljs-comment">#/ç»„ç»‡æ¶æ„æœåŠ¡/ä¾›åº”å•†ç®¡ç†/page_1</span>
</code></pre>
<p>Claude Code ä¼šè‡ªåŠ¨è¯†åˆ«åˆ° <code>api-add</code> Skillï¼ŒåŠ è½½åé€šè¿‡ MCP æ‰“å¼€ Swagger æ–‡æ¡£ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e948483133324fb1b0f8986be2742160~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamVycnl3dXM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210089&amp;x-signature=ftslIu6YhH41rtfCTFrv9IJrSLA%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-15">Step 2ï¼šè¯»å–æ–‡æ¡£ï¼Œé€‰æ‹©æ¥å£</h4>
<p>AI é€šè¿‡æµè§ˆå™¨å¿«ç…§è¯»åˆ°é¡µé¢å†…å®¹ï¼Œæ‰¾åˆ°å·¦ä¾§èœå•é‡Œ"ä¾›åº”å•†ç®¡ç†"ä¸‹çš„æ‰€æœ‰æ¥å£ï¼Œå¼¹å‡ºé€‰æ‹©æ¡†è®©æˆ‘å‹¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/997669987d614a0eb299e311aa5b5ca0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamVycnl3dXM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210089&amp;x-signature=ptv%2BALNriB%2Bw8yS54wfx92dGWZ4%3D" alt="image.png" loading="lazy"/></p>
<p>å®ƒåšäº†è¿™å‡ ä»¶äº‹ï¼š</p>
<ul>
<li>è¯†åˆ«äº†å·¦ä¾§èœå•çš„æ¥å£åˆ—è¡¨ï¼ˆPOST åˆ†é¡µåˆ—è¡¨ã€GET é…ç½®å•†æˆ·ï¼‰</li>
<li>ç‚¹è¿›æ¯ä¸ªæ¥å£ Tabï¼Œæå–äº†å®Œæ•´çš„è¯·æ±‚å‚æ•°å’Œå“åº”ç»“æ„</li>
<li>URL æŒ‡å‘çš„"åˆ†é¡µåˆ—è¡¨"è¢«æ ‡æˆäº†æ¨èé€‰é¡¹</li>
</ul>
<p>æˆ‘ä¸¤ä¸ªéƒ½é€‰äº†ã€‚</p>
<h4 data-id="heading-16">Step 3ï¼šAgent Team å¹¶è¡Œå¹²æ´»</h4>
<p>ç¡®è®¤åï¼ŒClaude Code èµ·äº†ä¸€ä¸ª Agent Teamï¼Œä¸¤ä¸ª Agent åŒæ—¶å¼€å·¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e054e889ceb469d9e2292a4a0e1b3a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamVycnl3dXM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210089&amp;x-signature=SNNIMFrSXPKovm7%2Bz1scT0%2FYZYc%3D" alt="image.png" loading="lazy"/></p>
<p>æˆªå›¾é‡Œèƒ½çœ‹åˆ°ï¼š</p>
<ul>
<li>api-definerï¼ˆç»¿è‰²ï¼‰åœ¨å†™ TypeScript ç±»å‹å®šä¹‰å’Œ API å‡½æ•°</li>
<li>mock-creatorï¼ˆæ©™è‰²ï¼‰åœ¨å†™ Mock æ•°æ®å’Œè·¯ç”±</li>
<li>ä¸¤ä¸ªåŒæ—¶è·‘ï¼Œäº’ä¸å½±å“</li>
<li>åº•éƒ¨çŠ¶æ€æ æ˜¾ç¤ºç€ä¸¤ä¸ª Agent çš„è¿è¡ŒçŠ¶æ€</li>
</ul>
<h4 data-id="heading-17">Step 4ï¼šå®Œæˆï¼Œæ”¶å·¥</h4>
<p>ä¸¤ä¸ª Agent å¹²å®Œæ´»ï¼Œè‡ªåŠ¨å…³é—­å¹¶æ¸…ç†èµ„æºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8d5d80403a0406d88ec4040497cd007~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamVycnl3dXM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210089&amp;x-signature=uMa1W2ICLxjPnObWIJKYgTcDwIc%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€ç»ˆç”Ÿæˆäº†è¿™äº›æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># API &amp; ç±»å‹å®šä¹‰</span>
src/types/supply-company.ts          â† TypeScript ç±»å‹
src/api/supply-company/index.ts      â† API å‡½æ•°

<span class="hljs-comment"># Mock å®ç°</span>
mocks/routes/data/supply-company-page.json    â† Mock æ•°æ®
mocks/routes/supply-company.controller.cjs    â† Mock æ§åˆ¶å™¨
mocks/routes/org.cjs                          â† è·¯ç”±æŒ‚è½½ï¼ˆå·²æ›´æ–°ï¼‰
</code></pre>
<h3 data-id="heading-18">äº”ã€çœ‹çœ‹ç”Ÿæˆçš„ä»£ç </h3>
<p>ä»£ç è´¨é‡æ€ä¹ˆæ ·ï¼Ÿç›´æ¥è´´ã€‚</p>
<h4 data-id="heading-19">TypeScript ç±»å‹å®šä¹‰</h4>
<p>éƒ¨åˆ†å±•ç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/types/supply-company.ts</span>

<span class="hljs-comment">/** ä¾›åº”å•†åˆ†é¡µæŸ¥è¯¢å‚æ•° */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ISupplyCompanyPageParam</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IPageParam</span> {
  <span class="hljs-comment">/** ä¾›åº”å•†åç§° */</span>
  name?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">/** ä¾›åº”å•†åˆ†é¡µåˆ—è¡¨é¡¹ */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ISupplyCompanyPageVO</span> {
  <span class="hljs-comment">/** ä¾›åº”å•†ç»„ç»‡id */</span>
  <span class="hljs-attr">orgId</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-comment">/** å…¬å¸ç¼–ç  */</span>
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">/** ä¾›åº”å•†åç§° */</span>
  <span class="hljs-attr">orgName</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">/** è´Ÿè´£äººid */</span>
  <span class="hljs-attr">staffId</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-comment">/** è´Ÿè´£äººå§“å */</span>
  <span class="hljs-attr">userName</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">/** çŠ¶æ€ */</span>
  <span class="hljs-attr">status</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">/** æ‰€å±å•†æˆ· */</span>
  <span class="hljs-attr">merchantName</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">/** åˆ›å»ºäºº */</span>
  <span class="hljs-attr">creator</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">/** åˆ›å»ºæ—¶é—´ */</span>
  <span class="hljs-attr">createTime</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
<p><code>I</code> å‰ç¼€ã€JSDoc æ³¨é‡Šã€ç»§æ‰¿ <code>IPageParam</code>ï¼Œè·Ÿé¡¹ç›®é‡Œæ‰‹å†™çš„ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<h4 data-id="heading-20">API å‡½æ•°</h4>
<p>éƒ¨åˆ†å±•ç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/api/supply-company/index.ts</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">querySupplyCompanyPage</span>(<span class="hljs-params">
  params: ISupplyCompanyPageParam
</span>) {
  <span class="hljs-keyword">let</span> total = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> data = [] <span class="hljs-keyword">as</span> <span class="hljs-title class_">ISupplyCompanyPageVO</span>[];
  params = <span class="hljs-title function_">toConditional</span>(params);

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> { code, context, message } = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Http</span>.<span class="hljs-property">post</span>&lt;{
      <span class="hljs-attr">total</span>: <span class="hljs-built_in">number</span>;
      <span class="hljs-attr">data</span>: <span class="hljs-title class_">ISupplyCompanyPageVO</span>[];
    }&gt;(<span class="hljs-string">`<span class="hljs-subst">${baseUrl}</span>/page`</span>, { ...params });

    <span class="hljs-keyword">if</span> (code !== <span class="hljs-title class_">EResponseCode</span>.<span class="hljs-property">Succeed</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(message || <span class="hljs-string">'æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•~'</span>);
    }
    total = context?.<span class="hljs-property">total</span> || <span class="hljs-number">0</span>;
    data = context?.<span class="hljs-property">data</span> || [];
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-title function_">getHttpErrorMessage</span>(error));
  }

  <span class="hljs-keyword">return</span> { total, data };
}
</code></pre>
<p>é¡¹ç›®é‡Œæ ‡å‡†çš„ API å†™æ³•ï¼š<code>async/await</code> + <code>try/catch</code> + <code>toConditional</code> + é”™è¯¯å¤„ç†ï¼Œä¸€ä¸ªä¸å·®ã€‚</p>
<h4 data-id="heading-21">Mock æ•°æ®</h4>
<p>éƒ¨åˆ†å±•ç¤ºï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// mocks/routes/data/supply-company-page.json</span>
<span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"orgId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1001</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SC-2025-001"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"orgName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸Šæµ·å¥¢å“ä¾›åº”é“¾æœ‰é™å…¬å¸"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"staffId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2001</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"userName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼ ç»ç†"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ENABLED"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"merchantName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LuxMallæ——èˆ°åº—"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"creator"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç³»ç»Ÿç®¡ç†å‘˜"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"createTime"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-01-15 10:30:00"</span>
  <span class="hljs-punctuation">}</span>
  <span class="hljs-comment">// ... æ›´å¤šæ•°æ®</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p>Mock æ•°æ®çš„å­—æ®µå€¼æ˜¯æœ‰æ„ä¹‰çš„ä¸­æ–‡å†…å®¹ï¼Œä¸æ˜¯é‚£ç§ <code>"string"</code> å ä½ç¬¦ã€‚</p>
<h4 data-id="heading-22">Mock æ§åˆ¶å™¨</h4>
<p>éƒ¨åˆ†å±•ç¤ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// mocks/controllers/supply-company.controller.cjs</span>

<span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> router = express.<span class="hljs-title class_">Router</span>();
<span class="hljs-keyword">const</span> supplyCompanyList = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./data/supply-company-list.json'</span>);

<span class="hljs-comment">/**
 * ä¾›åº”å•†åˆ†é¡µåˆ—è¡¨
 * POST /page
 */</span>
router.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/page'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> all = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(supplyCompanyList));
  <span class="hljs-keyword">const</span> { page = <span class="hljs-number">1</span>, size = <span class="hljs-number">50</span>, name } = req.<span class="hljs-property">body</span> || {};

  <span class="hljs-comment">// æŒ‰ä¾›åº”å•†åç§°æ¨¡ç³Šæœç´¢</span>
  <span class="hljs-keyword">if</span> (name) {
    all = all.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span>
      <span class="hljs-title class_">String</span>(item.<span class="hljs-property">orgName</span>).<span class="hljs-title function_">includes</span>(<span class="hljs-title class_">String</span>(name))
    );
  }

  <span class="hljs-keyword">const</span> total = all.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> start = (<span class="hljs-title class_">Number</span>(page) - <span class="hljs-number">1</span>) * <span class="hljs-title class_">Number</span>(size);
  <span class="hljs-keyword">const</span> end = start + <span class="hljs-title class_">Number</span>(size);
  <span class="hljs-keyword">const</span> data = all.<span class="hljs-title function_">slice</span>(start, end);

  res.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">code</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">context</span>: { total, data },
    <span class="hljs-attr">traceId</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">spanId</span>: <span class="hljs-string">''</span>,
  });
});

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = router;
</code></pre>
<p>åˆ†é¡µã€æ¨¡ç³Šæœç´¢ã€æ ‡å‡†å“åº”æ ¼å¼ï¼Œéƒ½æŒ‰é¡¹ç›®çš„ Mock è§„èŒƒæ¥çš„ã€‚</p>
<h3 data-id="heading-23">å…­ã€ä»£ç è´¨é‡é ä»€ä¹ˆä¿è¯ï¼ŸRules</h3>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼šAI æ€ä¹ˆçŸ¥é“æˆ‘ä»¬é¡¹ç›®çš„ç¼–ç è§„èŒƒï¼Ÿ</p>
<p>é  <code>.claude/rules/</code> ç›®å½•ã€‚è¿™æ˜¯ Claude Code çš„è§„åˆ™ç³»ç»Ÿï¼Œä½ å¯ä»¥ç†è§£ä¸ºç»™ AI å†™äº†ä¸€ä»½é¡¹ç›®ç¼–ç æ‰‹å†Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">.claude/rules/
â”œâ”€â”€ api.md           â† API å®ç°æ ‡å‡†ï¼ˆå‡½æ•°å‘½åã€é”™è¯¯å¤„ç†æ¨¡å¼ï¼‰
â”œâ”€â”€ ts-define.md     â† TypeScript è§„èŒƒï¼ˆIå‰ç¼€ã€Eå‰ç¼€ã€JSDocï¼‰
â”œâ”€â”€ mock.md          â† Mock æœåŠ¡å™¨æ¶æ„ï¼ˆè·¯ç”±ã€æ§åˆ¶å™¨ã€æ•°æ®æ–‡ä»¶ï¼‰
â”œâ”€â”€ components.md    â† ç»„ä»¶åº“å‚è€ƒ
â”œâ”€â”€ vue-single-file.md â† Vue SFC æ ‡å‡†
â””â”€â”€ ...
</code></pre>
<p>æ¯ä¸ª Agent å·¥ä½œæ—¶éƒ½ä¼šè¯»è¿™äº›è§„åˆ™æ–‡ä»¶ã€‚æ‰€ä»¥ç”Ÿæˆå‡ºæ¥çš„ä»£ç é£æ ¼è·Ÿé¡¹ç›®é‡Œæ‰‹å†™çš„ä¸€è‡´ï¼Œä¸ä¼šå‡ºç°é‚£ç§ä¸€çœ‹å°±æ˜¯ AI å†™çš„é€šç”¨ä»£ç ã€‚</p>
<h3 data-id="heading-24">ä¸ƒã€æƒ³å¤åˆ»ï¼Ÿæ–‡ä»¶ç»“æ„åœ¨è¿™</h3>
<p>å¦‚æœä½ æƒ³åœ¨è‡ªå·±é¡¹ç›®é‡Œæä¸€å¥—ï¼Œéœ€è¦è¿™äº›æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">.claude/
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ api-define.md          â† API å®šä¹‰ Agent
â”‚   â””â”€â”€ mock-define.md         â† Mock åˆ›å»º Agent
â”œâ”€â”€ skills/
â”‚   â””â”€â”€ api-<span class="hljs-keyword">add</span>/
â”‚       â””â”€â”€ SKILL.md           â† å·¥ä½œæµç¼–æ’ Skill
â”œâ”€â”€ rules/
â”‚   â”œâ”€â”€ api.md                 â† API ç¼–ç è§„èŒƒ
â”‚   â”œâ”€â”€ ts-define.md           â† TypeScript è§„èŒƒ
â”‚   â””â”€â”€ mock.md                â† Mock è§„èŒƒ
â””â”€â”€ ...

<span class="hljs-meta"># MCP é…ç½®ï¼ˆé¡¹ç›®çº§æˆ–å…¨å±€ï¼‰</span>
.mcp.json                      â† Chrome DevTools MCP é…ç½®
</code></pre>
<h3 data-id="heading-25">å…«ã€æ•ˆæœå¯¹æ¯”</h3>








































<table><thead><tr><th>ç»´åº¦</th><th>æ‰‹åŠ¨å¼€å‘</th><th>api-add Skill</th></tr></thead><tbody><tr><td>è€—æ—¶</td><td>6.5m</td><td>4.3m</td></tr><tr><td>ç±»å‹å®šä¹‰</td><td>æ‰‹åŠ¨ä»æ–‡æ¡£æŠ„</td><td>è‡ªåŠ¨æå–ï¼Œä¸ä¼šæ¼å­—æ®µ</td></tr><tr><td>API å‡½æ•°</td><td>å¤åˆ¶æ¨¡æ¿æ‰‹åŠ¨æ”¹</td><td>è‡ªåŠ¨ç”Ÿæˆï¼Œç¬¦åˆè§„èŒƒ</td></tr><tr><td>Mock æ•°æ®</td><td>æ‰‹åŠ¨ç¼–å‡æ•°æ®</td><td>è‡ªåŠ¨ç”Ÿæˆï¼Œå†…å®¹åƒçœŸçš„</td></tr><tr><td>ä»£ç è§„èŒƒ</td><td>çœ‹ä¸ªäººä¹ æƒ¯</td><td>Rules å¼ºåˆ¶çº¦æŸ</td></tr><tr><td>äººä¸ºé”™è¯¯</td><td>å­—æ®µåæ‹¼é”™ã€ç±»å‹å†™é”™</td><td>ä»æ–‡æ¡£ç›´æ¥æå–ï¼ŒåŸºæœ¬ä¸ä¼šé”™</td></tr></tbody></table>
<h3 data-id="heading-26">æ€»ç»“</h3>
<p>å›å¤´çœ‹ï¼Œè¿™å¥—æ–¹æ¡ˆåšäº†å››ä»¶äº‹ï¼š</p>
<ol>
<li>ç”¨ MCP è®© AI èƒ½è¯»æµè§ˆå™¨é‡Œçš„ Swagger æ–‡æ¡£</li>
<li>ç”¨ Skill æŠŠå¤šæ­¥éª¤ä»»åŠ¡ç¼–æ’æˆä¸€å¥è¯å°±èƒ½è§¦å‘çš„æµç¨‹</li>
<li>ç”¨ Agent Team è®©ä¸¤ä¸ªè½»é‡ Agent å¹¶è¡Œå¹²æ´»ï¼Œçœæ—¶é—´ä¹Ÿçœé’±</li>
<li>ç”¨ Rules çº¦æŸä»£ç é£æ ¼ï¼Œä¿è¯ç”Ÿæˆçš„ä»£ç è·Ÿæ‰‹å†™çš„ä¸€æ ·</li>
</ol>
<p>è¯´åˆ°åº•å°±æ˜¯æŠŠ"ä»æ–‡æ¡£åˆ°ä»£ç "è¿™ä¸ªé‡å¤åŠ³åŠ¨è‡ªåŠ¨åŒ–äº†ã€‚</p>
<p>è¿™å¥—æ–¹æ¡ˆä¹Ÿä¸åªèƒ½ç”¨åœ¨ Swagger ä¸Šã€‚æ”¹ä¸€ä¸‹ Skill çš„å·¥ä½œæµï¼ŒApifoxã€Postmanã€è‡ªå®šä¹‰ Markdown æ–‡æ¡£ã€GraphQL Schemaï¼Œåªè¦æµè§ˆå™¨èƒ½æ‰“å¼€çš„æ¥å£æ–‡æ¡£éƒ½èƒ½æ¥ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨ç”¨ Claude Codeï¼Œå¯ä»¥è¯•è¯• Skill + MCP è¿™ä¸ªç»„åˆã€‚</p>
<hr/>
<blockquote>
<p>è§‰å¾—æœ‰ç”¨çš„è¯ç‚¹ä¸ªèµï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºèŠèŠä½ çš„ Claude Code ç©æ³•ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AAAI 2026è¿™ç¯‡æ°å‡ºè®ºæ–‡è¯´äº†ä»€ä¹ˆï¼Ÿç”¨LLMç»™CLIPæ¢äº†ä¸ªâ€œèªæ˜å¤§è„‘â€]]></title>    <link>https://juejin.cn/post/7604036853129347087</link>    <guid>https://juejin.cn/post/7604036853129347087</guid>    <pubDate>2026-02-09T02:24:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604036853129347087" data-draft-id="7603699739224555535" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AAAI 2026è¿™ç¯‡æ°å‡ºè®ºæ–‡è¯´äº†ä»€ä¹ˆï¼Ÿç”¨LLMç»™CLIPæ¢äº†ä¸ªâ€œèªæ˜å¤§è„‘â€"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-02-09T02:24:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AAAI 2026è¿™ç¯‡æ°å‡ºè®ºæ–‡è¯´äº†ä»€ä¹ˆï¼Ÿç”¨LLMç»™CLIPæ¢äº†ä¸ªâ€œèªæ˜å¤§è„‘â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:24:27.000Z" title="Mon Feb 09 2026 02:24:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>åœ¨å¤šæ¨¡æ€å¤§æ¨¡å‹é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼ŒCLIPä½œä¸ºè¿æ¥è§†è§‰ä¸è¯­è¨€çš„â€œåŸºçŸ³â€ä¾ç„¶å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚ç„¶è€Œï¼Œéšç€åº”ç”¨åœºæ™¯çš„æ·±å…¥ï¼Œç ”ç©¶äººå‘˜é€æ¸å‘ç°CLIPçš„æ–‡æœ¬ç¼–ç å™¨å·²ç»æˆä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆï¼š<strong>ä¸ä»…å—é™äº77ä¸ªTokençš„é•¿åº¦é™åˆ¶ï¼Œåœ¨å¤„ç†å¤æ‚ã€é•¿ç¯‡çš„å›¾åƒæè¿°æ—¶ä¹Ÿæ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚</strong></p>
<p>æ¥è‡ªåŒæµå¤§å­¦ã€å¾®è½¯å’Œéº¦è€ƒç‘å¤§å­¦çš„ç ”ç©¶å›¢é˜Ÿæå‡ºäº†Â <strong>LLM2CLIPï¼ˆLarge Language Model to CLIPï¼‰</strong> ï¼Œ<strong>é€šè¿‡å°†å¤§è¯­è¨€æ¨¡å‹çš„æ·±åšçŸ¥è¯†â€œæ³¨å…¥â€åˆ°CLIPæ¶æ„ä¸­ï¼Œæ˜¾è‘—æå‡äº†é•¿æ–‡æœ¬æ£€ç´¢çš„ç²¾åº¦ï¼ŒåŒæ—¶èµ‹äºˆäº†æ¨¡å‹å¼ºå¤§çš„å¤šè¯­è¨€å¤„ç†èƒ½åŠ›ã€‚</strong></p>
<p>è¿™é¡¹ç ”ç©¶å‡­å€Ÿå…¶å“è¶Šçš„åˆ›æ–°æ€§ï¼ŒæˆåŠŸæ–©è· AAAI 2026 æ°å‡ºè®ºæ–‡å¥–ã€‚</p>
<blockquote>
<p><strong>è®ºæ–‡åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2411.04997%25C2%25A0" target="_blank" title="https://arxiv.org/abs/2411.04997%C2%A0" ref="nofollow noopener noreferrer">arxiv.org/abs/2411.04â€¦</a></p>
<p><strong>é¡¹ç›®ä¸»é¡µï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Faka.ms%2Fllm2clip" target="_blank" title="https://aka.ms/llm2clip" ref="nofollow noopener noreferrer">aka.ms/llm2clip</a></p>
<p><strong>ä»£ç ä»“åº“ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2FLLM2CLIP" target="_blank" title="https://github.com/microsoft/LLM2CLIP" ref="nofollow noopener noreferrer">github.com/microsoft/Lâ€¦</a> (å·²å¼€æº)</p>
</blockquote>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9c7c88d98a0488983d785a43403cd54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208666&amp;x-signature=YNNDgB0KfIewojki2qkehh05mFQ%3D" alt="å›¾ç‰‡1.png" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h2 data-id="heading-0"><strong>ä¼ ç»ŸCLIPçš„â€œè¯­è¨€ç“¶é¢ˆâ€</strong></h2>
<p>è‡ª2021å¹´OpenAIå‘å¸ƒCLIPä»¥æ¥ï¼Œè¿™ç§åŒå¡”ç»“æ„æ¨¡å‹å·²ç»æˆä¸ºå¤šæ¨¡æ€é¢†åŸŸçš„æ ‡é…ã€‚</p>
<p>æ— è®ºæ˜¯LLaVAè¿™æ ·çš„ç†è§£æ¨¡å‹ï¼Œè¿˜æ˜¯Stable Diffusionè¿™æ ·çš„ç”Ÿæˆæ¨¡å‹ï¼Œéƒ½ç¦»ä¸å¼€CLIPçš„è´¡çŒ®ã€‚</p>
<p><strong>ä½†é—®é¢˜åœ¨äºï¼Œä¼ ç»Ÿçš„CLIPæ–‡æœ¬ç¼–ç å™¨é€šå¸¸æ˜¯è§„æ¨¡è¾ƒå°çš„Transformerç»“æ„ï¼Œå…¶å¤„ç†é•¿æè¿°ï¼ˆDense Captionsï¼‰çš„èƒ½åŠ›éå¸¸æœ‰é™ã€‚</strong></p>
<p>ä¸æ­¤åŒæ—¶ï¼Œå¤§è¯­è¨€æ¨¡å‹åœ¨æ–‡æœ¬ç†è§£ä¸Šå·²ç»è¾¾åˆ°äº†æƒŠäººçš„é«˜åº¦ã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠLLMæ‹¿æ¥å½“CLIPçš„æ–‡æœ¬ç¼–ç å™¨å‘¢ï¼Ÿ</p>
<p>ç ”ç©¶å›¢é˜Ÿå‘ç°ï¼Œè¿™é‡Œå­˜åœ¨ä¸¤ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ï¼š</p>
<ul>
<li>ç‰¹å¾å¯åˆ†æ€§é—®é¢˜ï¼šåŸå§‹LLMçš„ç‰¹å¾ç©ºé—´å¹¶ä¸æ˜¯ä¸ºäº†å¯¹æ¯”å­¦ä¹ è®¾è®¡çš„ã€‚å®éªŒæ˜¾ç¤ºï¼ŒåƒLlama 3è¿™æ ·çš„æ¨¡å‹åœ¨å¤„ç†å›¾åƒæè¿°æ—¶ï¼Œå…¶ç‰¹å¾åŒºåˆ†åº¦æå·®ï¼ŒTop-1æ£€ç´¢å‡†ç¡®ç‡ç”šè‡³ä¸åˆ°6%</li>
<li>è®­ç»ƒæˆæœ¬è¿‡é«˜ï¼šå¦‚æœæ¯æ¬¡è®­ç»ƒCLIPéƒ½è¦å¾®è°ƒä¸€ä¸ª7Bç”šè‡³æ›´å¤§çš„LLMï¼Œé‚£ç®—åŠ›å¼€é”€å°†æ˜¯å¤©æ–‡æ•°å­—</li>
</ul>
<h2 data-id="heading-1"><strong>ä¸¤é˜¶æ®µâ€œæ³¨å…¥â€æ–¹æ¡ˆï¼šå·§å¦™çš„æ¶æ„è®¾è®¡</strong></h2>
<p>LLM2CLIPçš„æ ¸å¿ƒåˆ›æ–°åœ¨äºæå‡ºäº†ä¸€ä¸ªå·§å¦™çš„ä¸¤é˜¶æ®µå¾®è°ƒæ–¹æ¡ˆï¼Œæ—¢è§£å†³äº†ç‰¹å¾å¯åˆ†æ€§é—®é¢˜ï¼Œåˆå¤§å¹…é™ä½äº†è®­ç»ƒæˆæœ¬ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6713095d3aae4808b8082dc43dff6f48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208666&amp;x-signature=y1P6rdZK3pGTWjYM1KJ1mb930rw%3D" alt="å›¾ç‰‡2.png" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<ul>
<li><strong>ç¬¬ä¸€é˜¶æ®µï¼šè®©LLMå­¦ä¼šâ€œæå–ç‰¹å¾â€</strong></li>
</ul>
<p>ä¸ºäº†è§£å†³LLMç‰¹å¾åŒºåˆ†åº¦ä¸è¶³çš„é—®é¢˜ï¼Œç ”ç©¶è€…é¦–å…ˆå¯¹LLMè¿›è¡Œäº†â€œåµŒå…¥åŒ–â€æ”¹é€ ï¼š</p>
<p><strong>æ¶æ„è°ƒæ•´ï¼š</strong> ç§»é™¤äº†LLMåŸæœ‰çš„å› æœæ©ç ï¼Œæ”¹ä¸ºåŒå‘æ³¨æ„åŠ›æœºåˆ¶ï¼Œå¹¶é‡‡ç”¨å¹³å‡æ± åŒ–æ¥è·å–æ•´å¥çš„åµŒå…¥å‘é‡</p>
<p><strong>å¯¹æ¯”å­¦ä¹ ï¼š</strong> åˆ©ç”¨LoRAæŠ€æœ¯ï¼Œåœ¨é«˜è´¨é‡çš„æè¿°è¯­æ–™åº“ï¼ˆå¦‚DreamLIPï¼‰ä¸Šè¿›è¡Œç›‘ç£å¼æè¿°å¯¹æ¯”å¾®è°ƒ</p>
<p>ç®€å•æ¥è¯´ï¼Œè¿™ä¸€æ­¥æ˜¯è®©LLMæ˜ç™½ï¼šå³ä½¿æ˜¯ä¸¤æ®µæè¿°åŒä¸€ä¸ªç‰©ä½“çš„ä¸åŒæ–‡å­—ï¼Œåœ¨ç‰¹å¾ç©ºé—´é‡Œä¹Ÿåº”è¯¥é å¾—æ›´è¿‘ã€‚</p>
<p>æ•ˆæœæƒŠäººï¼šç»è¿‡è¿™ä¸€é˜¶æ®µï¼ŒLlama 3åœ¨COCOæè¿°æ£€ç´¢ä¸Šçš„å‡†ç¡®ç‡ä»5.2%é£™å‡åˆ°äº†29.5%</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbc2efe7d75a4b6d81bf0e092f628187~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208666&amp;x-signature=88t36GQBtSvBCVSQn4ZiR3Vxt4g%3D" alt="å›¾ç‰‡3.png" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<ul>
<li><strong>ç¬¬äºŒé˜¶æ®µï¼šè§†è§‰ä¸è¯­è¨€çš„è½»é‡çº§å¯¹é½</strong></li>
</ul>
<p>åœ¨LLMå…·å¤‡äº†è‰¯å¥½çš„ç‰¹å¾åŒºåˆ†åº¦åï¼Œæ¥ä¸‹æ¥çš„ä»»åŠ¡æ˜¯å°†å…¶ä¸CLIPçš„è§†è§‰ç¼–ç å™¨å¯¹é½ï¼š</p>
<p><strong>è½»é‡çº§é€‚é…å™¨ï¼š</strong> é€‰æ‹©å†»ç»“LLMï¼Œä»…åœ¨LLMè¾“å‡ºåæ·»åŠ ä¸€ä¸ªç”±4å±‚çº¿æ€§å±‚ç»„æˆçš„çº¿æ€§é€‚é…å™¨</p>
<p><strong>ç¦»çº¿ç‰¹å¾åŠ è½½ï¼š</strong> è¿™æ˜¯æå‡æ•ˆç‡çš„ç¥æ¥ä¹‹ç¬”ã€‚ç”±äºLLMæ˜¯å†»ç»“çš„ï¼Œç ”ç©¶è€…å¯ä»¥é¢„å…ˆè®¡ç®—å¹¶å­˜å‚¨æ‰€æœ‰æ–‡æœ¬çš„ç‰¹å¾ã€‚è¿™æ ·åœ¨è®­ç»ƒè§†è§‰ç¼–ç å™¨æ—¶ï¼Œå°±ä¸éœ€è¦åå¤è¿è¡Œåºå¤§çš„LLM</p>
<p>æŸå¤±å‡½æ•°ï¼šç ”ç©¶å›¢é˜Ÿå‘ç°ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ•ˆæœæœ€å¥½â€”â€”ç›´æ¥ç”¨LLMæ›¿æ¢åŸæœ‰çš„æ–‡æœ¬ç¼–ç å™¨è¿›è¡Œå¯¹æ¯”å­¦ä¹ </p>
<h2 data-id="heading-2"><strong>å…¨æ–¹ä½æ€§èƒ½æå‡ï¼šä»é•¿æ–‡æœ¬åˆ°å¤šè¯­è¨€</strong></h2>
<p>ç ”ç©¶å›¢é˜Ÿåœ¨å¤šä¸ªSOTAåŸºå‡†æ¨¡å‹ï¼ˆå¦‚OpenAI CLIP, EVA02, SigLIP2ï¼‰ä¸Šåº”ç”¨äº†LLM2CLIPæ–¹æ¡ˆï¼Œç»“æœä»¤äººæŒ¯å¥‹ã€‚</p>
<ul>
<li><strong>é•¿æ–‡æœ¬æ£€ç´¢ï¼šæ€§èƒ½å¤§å¹…æå‡</strong></li>
</ul>
<p>åœ¨é•¿æ–‡æœ¬æ£€ç´¢æ•°æ®é›†ï¼ˆå¦‚DOCCIå’ŒUrban1Kï¼‰ä¸Šï¼Œç›¸æ¯”äºåŸæœ¬å·²ç»éå¸¸å¼ºå¤§çš„SigLIP2ï¼ŒLLM2CLIPå¸¦æ¥äº†å·¨å¤§æå‡ï¼š</p>
<p>åœ¨DOCCIæ•°æ®é›†ä¸Šï¼ŒSigLIP2ç»è¿‡LLM2CLIPå¾®è°ƒåï¼Œå¹³å‡æ£€ç´¢ç²¾åº¦æå‡äº†14-15ä¸ªç™¾åˆ†ç‚¹</p>
<p>å³ä½¿åœ¨çŸ­æ–‡æœ¬çš„Flickrå’ŒCOCOä»»åŠ¡ä¸Šï¼Œæ€§èƒ½ä¹Ÿç¨³æ­¥æå‡</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94739dbc52c5410f9e456ee81b62c8dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208666&amp;x-signature=k4uNUd%2BCqeC7rQ3iGN5%2FE0K1IuA%3D" alt="å›¾ç‰‡4.png" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<ul>
<li><strong>å¤šè¯­è¨€èƒ½åŠ›ï¼šæ„å¤–æƒŠå–œ</strong></li>
</ul>
<p>ç”±äºLLMæœ¬èº«å°±æ˜¯åœ¨æµ·é‡å¤šè¯­è¨€è¯­æ–™ä¸Šè®­ç»ƒçš„ï¼ŒLLM2CLIPç»§æ‰¿äº†è¿™ç§å¤©èµ‹ï¼š</p>
<p>åŸæœ¬åªæ”¯æŒè‹±æ–‡çš„EVA02åœ¨åŠ å…¥LLM2CLIPåï¼Œåœ¨ä¸­æ–‡æ£€ç´¢ä»»åŠ¡ä¸Šç›´æ¥ä»â€œä¸å¯ç”¨â€å˜æˆäº†â€œé¡¶å°–æ°´å¹³â€</p>
<p>SigLIP2çš„å¤šè¯­è¨€èƒ½åŠ›ä¹Ÿå¾—åˆ°äº†æ˜¾è‘—å¢å¼ºï¼Œåœ¨XM3600ä»»åŠ¡ä¸Šçš„è¡¨ç°æå‡äº†11.9/15.2</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b41bd0cf9dc476480e879b075d546e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208666&amp;x-signature=FfruYegap2VBT1pGP%2F8t0E8zqEw%3D" alt="å›¾ç‰‡5.png" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<ul>
<li><strong>è§†è§‰è¡¨å¾çš„â€œåå“ºæ•ˆåº”â€</strong></li>
</ul>
<p>é«˜è´¨é‡çš„æ–‡æœ¬ç›‘ç£ä¸ä»…è®©æ£€ç´¢å˜å‡†äº†ï¼Œè¿˜è®©è§†è§‰ç¼–ç å™¨æœ¬èº«å˜å¾—æ›´å¼ºï¼š</p>
<p>åœ¨ImageNetçš„çº¿æ€§æ¢æµ‹å®éªŒä¸­ï¼ŒLLM2CLIPæå‡äº†è§†è§‰ç‰¹å¾çš„è´¨é‡ï¼›</p>
<p>åœ¨ä¸‹æ¸¸çš„é›¶æ ·æœ¬åˆ†å‰²å’Œæ£€æµ‹ä»»åŠ¡ä¸­ï¼Œæ€§èƒ½ä¹Ÿæœ‰æ˜¾è‘—å¢é•¿</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68846ca7e9e04b409b498f787782e347~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208666&amp;x-signature=UtEsDBMBZO3red%2BgsLZI8xwrBJc%3D" alt="å›¾ç‰‡6.png" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<ul>
<li><strong>ç»¼åˆæ€§èƒ½ï¼šå…¨æ–¹ä½ä¼˜åŠ¿</strong></li>
</ul>
<p>ä»é›·è¾¾å›¾ä¸Šå¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼ŒLLM2CLIPæ„æˆçš„å¤šè¾¹å½¢é¢ç§¯è¿œè¶…å…¶ä»–å¯¹æ¯”æ¨¡å‹ã€‚</p>
<p>è¿™æ„å‘³ç€å®ƒä¸ä»…åœ¨é•¿æ–‡æœ¬ä¸Šé¥é¥é¢†å…ˆï¼Œåœ¨ä¼ ç»Ÿçš„çŸ­æ–‡æœ¬æ£€ç´¢ä»»åŠ¡ä¸Šä¹Ÿä¿æŒäº†æé«˜çš„æ°´å‡†ï¼Œæ²¡æœ‰ä»»ä½•çŸ­æ¿ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85a38286bf774748a0daeeb42411b1c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208666&amp;x-signature=E3tGIDS4QvPV%2BJ1fJkoHPIAKfBg%3D" alt="å›¾ç‰‡7.png" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h2 data-id="heading-3"><strong>æƒŠäººçš„è®­ç»ƒæ•ˆç‡ï¼š1.3å°æ—¶å®Œæˆå¾®è°ƒ</strong></h2>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒLLM2CLIPæœ€å¸å¼•äººçš„åœ°æ–¹åœ¨äºå…¶æƒŠäººçš„æ•ˆç‡ã€‚</p>
<p>é€šè¿‡Offline-loadingç­–ç•¥ï¼Œåœ¨ä¸¤å°8å¡A100æœºå™¨ä¸Šï¼Œç¬¬äºŒé˜¶æ®µçš„è®­ç»ƒæ—¶é—´ä»17å°æ—¶ç¼©çŸ­åˆ°äº†ä»…ä»…1.3å°æ—¶ã€‚</p>
<p>è¿™æ„å‘³ç€æ™®é€šç ”ç©¶å›¢é˜Ÿä¹Ÿèƒ½è½»æ¾å¤ç°å¹¶å®šåˆ¶è‡ªå·±çš„LLM2CLIPæ¨¡å‹ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ec907ac4a554a6f95d6ff9aa4576762~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208666&amp;x-signature=ZURRJCMnW1h8RX3p44irMcCvQ18%3D" alt="å›¾ç‰‡8.png" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p>ç ”ç©¶å›¢é˜Ÿè¿˜æµ‹è¯•äº†æœ€æ–°çš„æ¨¡å‹å…¼å®¹æ€§ã€‚ä»¤äººæƒŠå–œçš„æ˜¯ï¼Œå³ä½¿æ˜¯æœ€è¿‘å¤§ç«çš„DeepSeek-R1-Distill-Llama-8Bï¼Œåœ¨ç»è¿‡CC Fine-tuningåä¹Ÿèƒ½ä½œä¸ºæä½³çš„æ–‡æœ¬ç¼–ç å™¨ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbc7e3d3ffbf4d9baa076ce1c5bbb8ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771208666&amp;x-signature=7KvcYTrgAJ%2B3Nnu0FItXUExxz1I%3D" alt="å›¾ç‰‡9.png" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h2 data-id="heading-4"><strong>æ ¸å¿ƒå¯ç¤ºä¸æœªæ¥å±•æœ›</strong></h2>
<p>LLM2CLIPçš„æˆåŠŸç»™äº†æˆ‘ä»¬ä¸€ä¸ªéå¸¸é‡è¦çš„å¯ç¤ºï¼š</p>
<p>å¤šæ¨¡æ€æ¨¡å‹çš„ä¸Šé™ï¼Œå¾€å¾€å–å†³äºè¯­è¨€ç«¯å¯¹ä¸–ç•Œçš„ç†è§£æ·±åº¦ã€‚</p>
<p>è¿‡å»æˆ‘ä»¬è¯•å›¾é€šè¿‡å †è§†è§‰æ•°æ®æ¥æå‡CLIPï¼Œä½†LLM2CLIPè¯æ˜äº†ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªå·²ç»â€œè¯»è¿‡ä¸‡å·ä¹¦â€çš„LLMï¼Œå¹¶è¾…ä»¥å°‘é‡çš„ã€é«˜è´¨é‡çš„æè¿°æ•°æ®ï¼Œå°±èƒ½è®©è§†è§‰è¡¨å¾äº§ç”Ÿè´¨çš„é£è·ƒã€‚</p>
<p>è¿™ç§â€œä½æˆæœ¬ã€é«˜æ”¶ç›Šâ€çš„æ–¹æ¡ˆï¼Œå¾ˆå¯èƒ½ä¼šæˆä¸ºæœªæ¥å¤šæ¨¡æ€é¢„è®­ç»ƒçš„æ–°èŒƒå¼ã€‚</p>
<p>ç›®å‰ï¼Œç ”ç©¶å›¢é˜Ÿå·²ç»å¼€æºäº†åŸºäºSigLIP2ã€EVA02å’ŒOpenAI CLIPå¢å¼ºçš„å¤šä¸ªç‰ˆæœ¬æ¨¡å‹ã€‚</p>
<p>å¦‚æœä½ æ­£å—å›°äºCLIPçš„æ–‡æœ¬ç†è§£èƒ½åŠ›ï¼Œæˆ–è€…éœ€è¦ä¸€ä¸ªå¼ºå¤§çš„å¤šè¯­è¨€å¤šæ¨¡æ€ç¼–ç å™¨ï¼ŒLLM2CLIPç»å¯¹å€¼å¾—ä¸€è¯•ã€‚</p>
<p>æŠ€æœ¯çš„å‘å±•æ€»æ˜¯åœ¨è§£å†³ä¸€ä¸ªä¸ªç“¶é¢ˆä¸­å‰è¿›ã€‚LLM2CLIPé€šè¿‡å·§å¦™çš„è®¾è®¡ï¼Œä¸ä»…çªç ´äº†CLIPçš„æ–‡æœ¬ç¼–ç å™¨é™åˆ¶ï¼Œæ›´ä¸ºå¤šæ¨¡æ€ç ”ç©¶å¼€è¾Ÿäº†æ–°çš„æ€è·¯ï¼šè®©ä¸“ä¸šçš„äººï¼ˆæ¨¡å‹ï¼‰åšä¸“ä¸šçš„äº‹ï¼Œå†é€šè¿‡è½»é‡åŒ–çš„æ–¹å¼å°†å®ƒä»¬è¿æ¥èµ·æ¥ã€‚</p>
<p>è¿™æˆ–è®¸æ­£æ˜¯æœªæ¥AIç³»ç»Ÿè®¾è®¡çš„é‡è¦æ–¹å‘ä¹‹ä¸€ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®°å½•overflowï¼šhiddenå’ŒscrollIntoViewå¯¼è‡´çš„é¡µé¢é—®é¢˜]]></title>    <link>https://juejin.cn/post/7603781883974565907</link>    <guid>https://juejin.cn/post/7603781883974565907</guid>    <pubDate>2026-02-09T00:54:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603781883974565907" data-draft-id="7603911453704912939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®°å½•overflowï¼šhiddenå’ŒscrollIntoViewå¯¼è‡´çš„é¡µé¢é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-02-09T00:54:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="EchoEcho"/> <meta itemprop="url" content="https://juejin.cn/user/2920774267837208"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®°å½•overflowï¼šhiddenå’ŒscrollIntoViewå¯¼è‡´çš„é¡µé¢é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2920774267837208/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    EchoEcho
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T00:54:31.000Z" title="Mon Feb 09 2026 00:54:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>é—®é¢˜æè¿°ï¼š</strong></p>
<p>åœ¨ä¸€ä¸ªç¼–è¾‘å™¨ä¸­å¼€å‘é¡µé¢ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨å¯¹å­å…ƒç´ è®¾ç½®äº†<code>position:absolute</code>å®šä½ï¼Œå¹¶ä¸”å…ƒç´ å†…å®¹åŒºåŸŸè®¾ç½®äº†<code>overflow:hidden</code>å±æ€§ã€‚</p>
<p>å¯åŠ¨é¡¹ç›®åï¼Œå¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­å¯ä»¥å¯¹è¯¥ç»„ä»¶è¿›è¡Œç›¸å…³è®¾ç½®å’Œä¿®æ”¹ã€‚å½“åˆ‡æ¢é€‰ä¸­å†…å®¹æ—¶ï¼Œé¡µé¢ä¼šè‡ªåŠ¨æ»šåŠ¨ï¼Œå°†é€‰ä¸­ç»„ä»¶æ˜¾ç¤ºåˆ°æµè§ˆå™¨è§†å£ä¸­ï¼Œä¿®æ”¹å¯¹åº”å±æ€§ä¹Ÿä¼šé‡æ–°æ¸²æŸ“å¯¹åº”ç»„ä»¶ã€‚</p>
<p>ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶<code>UI</code>å±•ç¤ºæ­£å¸¸ã€‚ä½†æ˜¯å½“å¯¹è¯¥ç»„ä»¶åˆ‡æ¢é€‰ä¸­å…ƒç´ æˆ–è€…å¯¹è®¾ç½®äº†å®šä½çš„å­å…ƒç´ è®¾ç½®æ–°å±æ€§æ—¶éƒ½ä¼šå¯¼è‡´ä¸‹å›¾ä¸­å­å…ƒç´ çš„å®šä½å¼‚å¸¸ã€‚ä½†æ˜¯åœ¨è°ƒè¯•é¢æ¿ä¸­æŸ¥è¯¢è¯¥å…ƒç´ å±æ€§å€¼ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•æ”¹å˜ã€‚å°è¯•é‡æ–°åœ¨æ§åˆ¶é¢æ¿ä¸­èµ‹å€¼å¯¹åº”çš„<code>top</code>å€¼ï¼Œæ¨¡å‹åˆä¼šæ˜¾ç¤ºåˆ°æŒ‡å®šä½ç½®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/680e54f11bd0464c87eb9de36a1c1fab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWNob0VjaG8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203270&amp;x-signature=8zc6JrnLZq2DRUXCjQhHKu%2Boa%2FI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è§£å†³è¿‡ç¨‹</strong></p>
<p>å°è¯•ä½¿ç”¨å†…å®¹ç›‘å¬å™¨åœ¨ç»„ä»¶è¢«é€‰ä¸­åï¼Œé‡æ–°èµ‹å€¼å¯¹åº”çš„<code>top</code>å’Œ<code>left</code>å€¼æ— æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p>
<p>åæ¥é€šè¿‡æµè§ˆå™¨æ–­ç‚¹è°ƒè¯•ï¼Œå‘ç°åœ¨è§¦å‘ç›‘å¬å™¨ä¹‹å‰ï¼Œè¯¥ç»„ä»¶æ‰§è¡Œäº†<code>scrollIntoView</code>æ–¹æ³•ï¼Œè§ä¸‹å›¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dc06665708e49439c82ddc2d9d6229d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWNob0VjaG8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771203270&amp;x-signature=fh72jPLZA04zjQ5T5IkoMgCAa0M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ç›¸å…³åˆ†æï¼š</strong></p>
<p>åœ¨æ‰§è¡Œ<code>ScrollIntoView</code>æœŸé—´ä¼šå¤šæ¬¡é‡ç»˜ã€<code>reflow/repaint</code>ã€‘é¡µé¢å¸ƒå±€ã€‚è€Œå­å…ƒç´ ä¸­å®šä½ç›¸å…³å±æ€§å€¼ä¼šåœ¨é‡ç»˜æ—¶åŸºäºçˆ¶å…ƒç´ çš„å½“å‰è§†å£ä¸Šä¸‹æ–‡é‡æ–°è®¡ç®—ï¼Œå¯¼è‡´ä½ç½®åç§»ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­çš„å­å…ƒç´ åº•éƒ¨ä¸çˆ¶å…ƒç´ å¯¹é½ç°è±¡ã€‚</p>
<ol>
<li>å¹³æ»‘æ»šåŠ¨åŠ¨ç”»ï¼ˆ<code>behavior: 'smooth'</code>ï¼‰ï¼š</li>
</ol>
<ul>
<li>åŠ¨ç”»è¿‡ç¨‹ä¼šé€æ­¥æ”¹å˜æ»šåŠ¨ä½ç½®ï¼Œè§¦å‘å¤šæ¬¡å¸ƒå±€è®¡ç®—ã€‚</li>
</ul>

<ul>
<li>å¦‚æœçˆ¶å…ƒç´ æœ‰Â <code>overflow: hidden</code>ï¼Œå­å…ƒç´ è¶…å‡ºéƒ¨åˆ†åœ¨åŠ¨ç”»ä¸­å¯èƒ½è¢«â€œæ‹‰å›â€æˆ–é‡å®šä½ã€‚</li>
</ul>
<ol start="2">
<li><code>block: 'center'</code>Â é…ç½®ï¼š</li>
</ol>
<ul>
<li>è¿™ä¼šå°è¯•å°†çˆ¶å…ƒç´ ç½®äºè§†å£ä¸­å¿ƒï¼Œå¦‚æœçˆ¶å…ƒç´ é«˜åº¦ä¸æ˜¯å›ºå®šå€¼ï¼ˆä¾‹å¦‚ä¾èµ–å†…å®¹æˆ–å“åº”å¼ï¼‰ï¼Œç™¾åˆ†æ¯”Â <code>top</code>Â ä¼šåŸºäºæ–°æ»šåŠ¨ä½ç½®é‡æ–°è®¡ç®—ï¼Œå¯¼è‡´å­å…ƒç´ â€œæ»‘åŠ¨â€åˆ°åº•éƒ¨å¯¹é½ã€‚</li>
</ul>
<ol start="3">
<li>ç»å¯¹å®šä½çš„å‚è€ƒç‚¹å˜åŒ–ï¼š</li>
</ol>
<ul>
<li><code>absolute</code>Â å…ƒç´ ä¾èµ–æœ€è¿‘çš„Â <code>position: relative</code>Â ç¥–å…ˆã€‚åœ¨æ»šåŠ¨åŠ¨ç”»ä¸­ï¼Œå¦‚æœç¥–å…ˆçš„å¯è§åŒºåŸŸå˜åŒ–ï¼Œå­å…ƒç´ çš„è®¡ç®—ä½ç½®ä¼šåç§»ã€‚</li>
</ul>
<ol start="4">
<li>æµè§ˆå™¨ç‰¹å®šè¡Œä¸ºï¼š</li>
</ol>
<ul>
<li><code>Chrome/Safari</code>Â åœ¨Â <code>smooth scroll</code>Â æ—¶æœ‰æ—¶ä¼šé”™è¯¯å¤„ç†ç™¾åˆ†æ¯”å®šä½ï¼Œå°¤å…¶æ˜¯ç»“åˆÂ <code>overflow: hidden</code>Â æ—¶ã€‚</li>
</ul>
<p><strong>è€Œè¿™é‡Œé‡åˆ°çš„é—®é¢˜å°±æ˜¯åœ¨ç»„ä»¶ç›¸å…³å®¹å™¨ä¸­è®¾ç½®äº†<code>overflow:hidden</code>ã€‚</strong></p>
<p><strong>è§£å†³ï¼š</strong></p>
<p>å°†<code>overflow:hidden</code>æ”¹æˆ<code>overflow:clip</code>å°±è§£å†³æ­¤é—®é¢˜äº†ã€‚</p>
<p><strong>è§£æ<code>overflow:hidden</code>å’Œ<code>overflow:clip</code></strong></p>
<ul>
<li><code>overflow: hidden</code>ï¼š</li>
<li>
<ul>
<li>éšè—è¶…å‡ºå…ƒç´ è¾¹ç•Œçš„å†…å®¹ï¼Œä½†å†…å®¹åœ¨å†…éƒ¨ä»ç„¶â€œå­˜åœ¨â€ã€‚</li>
<li>ä¸æ˜¾ç¤ºæ»šåŠ¨æ¡ï¼Œä½†å¯ä»¥é€šè¿‡<code>JavaScript</code>ï¼ˆå¦‚Â <code>element.scrollLeft</code>ï¼‰æˆ–åµŒå¥—æ»šåŠ¨è®¿é—®éšè—å†…å®¹ã€‚</li>
<li>è¿™æ˜¯è¾ƒæ—©çš„æ ‡å‡†å€¼ï¼Œå¹¿æ³›æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><code>overflow: clip</code>ï¼š</li>
<li>
<ul>
<li>å®Œå…¨â€œå‰ªåˆ‡â€è¶…å‡ºè¾¹ç•Œçš„å†…å®¹ï¼Œå°±å¥½åƒè¶…å‡ºéƒ¨åˆ†ä¸å­˜åœ¨ä¸€æ ·ã€‚</li>
<li>ä¸å…è®¸ä»»ä½•å½¢å¼çš„æ»šåŠ¨è®¿é—®ï¼ˆå³ä½¿é€šè¿‡<code>JS</code>ï¼‰ï¼Œå†…å®¹è¢«å½»åº•ä¸¢å¼ƒã€‚</li>
<li>è¿™æ˜¯<code>CSS Overflow Module Level 3</code>Â ä¸­çš„æ–°å€¼ï¼ˆå¼•å…¥äº 2020 å¹´å·¦å³ï¼‰ï¼Œæµè§ˆå™¨æ”¯æŒè¾ƒæ–°ï¼ˆChrome 90+ã€Firefox 75+ã€Safari 15+ï¼‰ã€‚åœ¨æ—§æµè§ˆå™¨ä¸­å¯èƒ½å›é€€åˆ°Â <code>hidden</code>ã€‚</li>
</ul>
</li>
</ul>
<p><strong>2. å…³é”®åŒºåˆ«</strong></p>













































<table><thead><tr><th>æ–¹é¢</th><th>overflow: hidden</th><th>overflow: clip</th></tr></thead><tbody><tr><td>å†…å®¹å¯è§æ€§</td><td>éšè—è¶…å‡ºéƒ¨åˆ†ï¼Œä½†å†…å®¹ä»å¯é€šè¿‡<code>JS</code>Â æ»šåŠ¨è®¿é—®ã€‚</td><td>å®Œå…¨å‰ªåˆ‡è¶…å‡ºéƒ¨åˆ†ï¼Œæ— æ³•é€šè¿‡ä»»ä½•æ–¹å¼è®¿é—®ã€‚</td></tr><tr><td>æ»šåŠ¨è¡Œä¸º</td><td>åˆ›å»ºä¸€ä¸ªéšå½¢çš„æ»šåŠ¨å®¹å™¨ï¼›æ»šåŠ¨äº‹ä»¶å¯å†’æ³¡åˆ°çˆ¶å…ƒç´ ã€‚</td><td>ä¸åˆ›å»ºæ»šåŠ¨å®¹å™¨ï¼›æ»šåŠ¨äº‹ä»¶ç›´æ¥ä¼ é€’ç»™çˆ¶å…ƒç´ ï¼Œä¸è¢«æ•è·ã€‚</td></tr><tr><td>æ€§èƒ½å½±å“</td><td>å¯èƒ½å¯¼è‡´æµè§ˆå™¨è®¡ç®—éšè—å†…å®¹çš„å¸ƒå±€å’Œæ¸²æŸ“ï¼ˆè¾ƒä½æ€§èƒ½ï¼‰ã€‚</td><td>ä¼˜åŒ–æ€§èƒ½ï¼šæµè§ˆå™¨å¿½ç•¥è¶…å‡ºå†…å®¹çš„æ¸²æŸ“å’Œå¸ƒå±€ï¼ˆæ›´å¿«ï¼Œå°¤å…¶åœ¨å¤æ‚é¡µé¢ï¼‰ã€‚</td></tr><tr><td>å®šä½/ç²˜æ€§å½±å“</td><td>æ”¯æŒÂ <code>position: sticky</code>Â ç­‰è¡Œä¸ºï¼›åˆ›å»ºæ–°çš„å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ (<code>BFC</code>)ã€‚</td><td>ä¸æ”¯æŒÂ <code>position: sticky</code>ï¼ˆå…ƒç´ ä¸ä¼šç²˜æ€§ï¼‰ï¼›ä¸åˆ›å»ºÂ <code>BFC</code>ã€‚</td></tr><tr><td>JS äº¤äº’</td><td>å¯ä»¥ç”¨<code>JS</code>Â ä¿®æ”¹æ»šåŠ¨ä½ç½®ï¼ˆå¦‚Â <code>scrollTo()</code>ï¼‰ã€‚</td><td>æ— æ³•ç”¨Â <code>JS</code>Â æ»šåŠ¨ï¼›è¶…å‡ºå†…å®¹è¢«è§†ä¸ºä¸å­˜åœ¨ã€‚</td></tr><tr><td>æµè§ˆå™¨æ”¯æŒ</td><td>æ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ˆ<code>IE6+</code>ï¼‰ã€‚</td><td>è¾ƒæ–°æµè§ˆå™¨ï¼›éœ€æ£€æŸ¥å…¼å®¹æ€§ï¼ˆ<code>polyfill</code>Â æœ‰é™ï¼‰ã€‚</td></tr><tr><td>ç”¨ä¾‹</td><td>é€‚åˆéœ€è¦éšè—ä½†å¯èƒ½å†…éƒ¨æ»šåŠ¨çš„åœºæ™¯ï¼ˆå¦‚è£å‰ªå›¾ç‰‡ä½†å…è®¸<code>JS</code>åŠ¨ç”»ï¼‰ã€‚</td><td>é€‚åˆçº¯é™æ€å‰ªåˆ‡åœºæ™¯ï¼ˆå¦‚æ€§èƒ½æ•æ„Ÿçš„æ¸¸æˆ/<code>UI</code>ï¼‰ï¼Œæˆ–é˜²æ­¢æ„å¤–æ»šåŠ¨ã€‚</td></tr></tbody></table>
<ul>
<li>æ ¸å¿ƒå·®å¼‚æ€»ç»“ï¼š<code>hidden</code>Â æ˜¯â€œéšè—ä½†å¯è®¿é—®â€çš„ï¼ˆåƒç›–äº†ä¸ªç›–å­ï¼‰ï¼Œè€ŒÂ <code>clip</code>Â æ˜¯â€œå½»åº•åˆ é™¤è¶…å‡ºéƒ¨åˆ†â€çš„ï¼ˆåƒç”¨å‰ªåˆ€å‰ªæ‰ï¼‰ã€‚<code>clip</code>Â æ›´ä¸¥æ ¼ï¼Œæ—¨åœ¨æé«˜æ€§èƒ½ï¼Œä½†ç‰ºç‰²äº†ä¸€äº›çµæ´»æ€§ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å½»åº•ææ‡‚äº† SSEï¼ŒåŸæ¥æµå¼å“åº”æ•ˆæœè¿˜èƒ½è¿™ä¹ˆç©çš„ï¼Ÿï¼ˆé™„ JS/Dart åŒç«¯å®æˆ˜ï¼‰]]></title>    <link>https://juejin.cn/post/7604084016510271529</link>    <guid>https://juejin.cn/post/7604084016510271529</guid>    <pubDate>2026-02-09T02:33:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604084016510271529" data-draft-id="7603355275257675816" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å½»åº•ææ‡‚äº† SSEï¼ŒåŸæ¥æµå¼å“åº”æ•ˆæœè¿˜èƒ½è¿™ä¹ˆç©çš„ï¼Ÿï¼ˆé™„ JS/Dart åŒç«¯å®æˆ˜ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,GitHub"/> <meta itemprop="datePublished" content="2026-02-09T02:33:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—çš„ç¼–ç¨‹å¼€å‘æ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/3320949647350765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å½»åº•ææ‡‚äº† SSEï¼ŒåŸæ¥æµå¼å“åº”æ•ˆæœè¿˜èƒ½è¿™ä¹ˆç©çš„ï¼Ÿï¼ˆé™„ JS/Dart åŒç«¯å®æˆ˜ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3320949647350765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—çš„ç¼–ç¨‹å¼€å‘æ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:33:49.000Z" title="Mon Feb 09 2026 02:33:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ã€å°æ—ã€‘</p>
<p>è¯´èµ·æ¥æœ‰ç‚¹æ„æ€ï¼Œæœ€è¿‘æˆ‘åœ¨åš AI é¡¹ç›®çš„æ—¶å€™ï¼Œçªç„¶å¯¹ "æµå¼å“åº”æ•ˆæœ" äº§ç”Ÿäº†æµ“åšå…´è¶£ä¹Ÿå°±æ˜¯æ‰€è°“çš„æ‰“å­—æœºæ•ˆæœã€‚ä½ çŸ¥é“é‚£ç§æ„Ÿè§‰å§ï¼ŒAI å›ç­”çš„æ—¶å€™ï¼Œæ–‡å­—åƒè¢«äººæ•²å‡ºæ¥ä¸€æ ·ï¼Œä¸€ä¸ªå­—ä¸€ä¸ªå­—åœ°è¹¦å‡ºæ¥ã€‚</p>
<p>ä»¥å‰æˆ‘ä»¥ä¸ºæ˜¯å‰ç«¯ç”¨ <code>setTimeout</code> æ¨¡æ‹Ÿçš„ï¼Œç›´åˆ°æœ‰ä¸€æ¬¡ç½‘ç»œæŠ–åŠ¨ï¼Œæˆ‘å‘ç°å®ƒå±…ç„¶èƒ½<strong>ä»æ–­å¼€çš„åœ°æ–¹ç»§ç»­è¾“å‡º</strong>ï¼Œè€Œä¸æ˜¯é‡æ–°å¼€å§‹ã€‚è¿™å°±åƒçœ‹ç›´æ’­å¡é¡¿åï¼Œä¼šè‡ªåŠ¨ä»å¡ä½çš„åœ°æ–¹ç»§ç»­æ’­æ”¾ï¼Œè€Œä¸æ˜¯é‡æ’­ä¸€éã€‚</p>
<p>è¿™ä¸å°±æ˜¯<strong>æ–­ç‚¹ç»­ä¼ </strong>å—ï¼Ÿä½† HTTP è¯·æ±‚ä¸æ˜¯æ— çŠ¶æ€çš„å—ï¼Ÿ</p>
<p>å¸¦ç€è¿™ä¸ªç–‘é—®ï¼Œæˆ‘å¼€å§‹æ·±å…¥ç ”ç©¶ï¼Œæ‰å‘ç°è¿™èƒŒåè—ç€ä¸€å¥—å®Œæ•´çš„æµå¼ä¼ è¾“åè®®â€”â€”<strong>SSEï¼ˆServer-Sent Eventsï¼‰</strong>ã€‚</p>
<p>æ›´è®©æˆ‘æ„å¤–çš„æ˜¯ï¼Œæˆ‘å‘ç°ä¸šç•Œå¯¹äº"AI æµå¼å“åº”è¯¥ç”¨ SSE è¿˜æ˜¯ WebSocket"è¿™ä¸ªè¯é¢˜ï¼Œäº‰è®®è¿˜æŒºå¤§ã€‚æœ‰äººè¯´ WebSocket åŠŸèƒ½æ›´å¼ºå¤§ï¼Œæœ‰äººè¯´ SSE æ›´ç®€å•ã€‚</p>
<p><strong>åˆ°åº•è¯¥é€‰å“ªä¸ªï¼Ÿ</strong></p>
<p>æˆ‘å¹²è„†ä»é›¶å¼€å§‹å®ç°äº†ä¸€å¥—å®Œæ•´çš„ Demoï¼ŒåŒ…å«åç«¯æœåŠ¡ã€JavaScript å®¢æˆ·ç«¯ã€Dart å®¢æˆ·ç«¯ï¼Œç”šè‡³è¿˜å®ç°äº†æ–­çº¿é‡è¿ã€æŒ‡æ•°é€€é¿ã€ç²˜åŒ…å¤„ç†ç­‰ç”Ÿäº§çº§ç‰¹æ€§ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å°±æŠŠè¿™èƒŒåçš„åŸç†ã€å‘ç‚¹ã€å®æˆ˜ç»éªŒåˆ†äº«å‡ºæ¥ã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¯‡ç« ä¸€ï¼šä¸ºä»€ä¹ˆ AI èŠå¤©é¦–é€‰ SSE è€Œé WebSocketï¼Ÿ</h2>
<p>åœ¨è®²ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆææ¸…æ¥šä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š<strong>ä¸ºä»€ä¹ˆ ChatGPTã€Claude è¿™äº› AI åŠ©æ‰‹éƒ½é€‰ SSEï¼Œè€Œä¸æ˜¯çœ‹èµ·æ¥æ›´å¼ºå¤§çš„ WebSocketï¼Ÿ</strong></p>
<h3 data-id="heading-2">1.1 åœºæ™¯åˆ†æï¼šAI å¯¹è¯çš„"ä¸€é—®å¤šç­”"æ¨¡å¼</h3>
<p>æˆ‘ä»¬å…ˆçœ‹ AI å¯¹è¯çš„å…¸å‹ç‰¹å¾ï¼š</p>
<pre><code class="hljs">ç”¨æˆ·ï¼šå¦‚ä½•å­¦å¥½ Flutterï¼Ÿ
AIï¼š  ã€å¼€å§‹ä¸€æ®µä¸€æ®µåœ°è¾“å‡ºï¼ŒæŒç»­åå‡ ç§’ç”šè‡³æ›´é•¿ã€‘
</code></pre>
<p>è¿™å°±æ˜¯å…¸å‹çš„**"ä¸€é—®å¤šç­”"æ¨¡å¼**ï¼š</p>
<ul>
<li>ç”¨æˆ·å‘é€çš„ Prompt é€šå¸¸å¾ˆçŸ­ï¼ˆå‡ ä¸ªå­—åˆ°å‡ ç™¾å­—ï¼‰</li>
<li>AI çš„å›å¤å¯èƒ½å¾ˆé•¿ï¼ˆå‡ åƒå­—ï¼Œç”šè‡³æ›´é•¿ï¼‰</li>
<li>æ•°æ®æµå‘æ˜¯<strong>å•å‘çš„</strong>ï¼šServer â†’ Client</li>
</ul>
<h3 data-id="heading-3">1.2 SSE vs WebSocket æ ¸å¿ƒå¯¹æ¯”</h3>
<p>æˆ‘ä»¬ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥çœ‹ä¸¤è€…çš„å·®å¼‚ï¼š</p>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>SSE</th><th>WebSocket</th></tr></thead><tbody><tr><td><strong>é€šä¿¡æ–¹å‘</strong></td><td>å•å·¥ï¼ˆServer â†’ Clientï¼‰</td><td>å…¨åŒå·¥ï¼ˆåŒå‘é€šä¿¡ï¼‰</td></tr><tr><td><strong>åè®®åŸºç¡€</strong></td><td>HTTP æ ‡å‡†</td><td>è‡ªå®šä¹‰ WS åè®®</td></tr><tr><td><strong>è¿æ¥æ–¹å¼</strong></td><td>æ ‡å‡† HTTP è¯·æ±‚</td><td>éœ€è¦æ¡æ‰‹å‡çº§</td></tr><tr><td><strong>é‰´æƒæ–¹å¼</strong></td><td>âœ… è‡ªå®šä¹‰ Headerï¼ˆå¦‚ Authorizationï¼‰</td><td>âŒ åªèƒ½åœ¨æ¡æ‰‹æ—¶å¸¦ Header</td></tr><tr><td><strong>æ–­çº¿é‡è¿</strong></td><td>âœ… å†…ç½® Last-Event-ID æœºåˆ¶</td><td>âŒ éœ€è¦æ‰‹åŠ¨å®ç°</td></tr><tr><td><strong>æµè§ˆå™¨è°ƒè¯•</strong></td><td>âœ… DevTools ç›´æ¥æŸ¥çœ‹ EventStream</td><td>âš ï¸ éœ€è¦åœ¨ WS Frames é¢æ¿æŸ¥çœ‹</td></tr><tr><td><strong>æœåŠ¡ç«¯å®ç°</strong></td><td>âœ… ç®€å•ï¼Œæ ‡å‡† HTTP å“åº”</td><td>âš ï¸ éœ€è¦ç»´æŠ¤è¿æ¥çŠ¶æ€</td></tr><tr><td><strong>AI åœºæ™¯å¥‘åˆåº¦</strong></td><td>âœ… å®Œç¾åŒ¹é…"ä¸€é—®å¤šç­”"</td><td>âŒ è¿‡åº¦è®¾è®¡</td></tr></tbody></table>
<h3 data-id="heading-4">1.3 ä¸€ä¸ªé¤å…å¤§å¨çš„æ¯”å–»</h3>
<p>è®©æˆ‘ç”¨ä¸€ä¸ªå¥½æ‡‚çš„æ¯”å–»æ¥è§£é‡Šï¼š</p>
<p><strong>SSE å°±åƒ"è‡ªåŠ©é¤å…çš„ä¼ èœå£"</strong>ï¼š</p>
<ul>
<li>ä½ ç‚¹å®Œèœï¼ˆå‘é€ HTTP è¯·æ±‚ï¼‰</li>
<li>å¨å¸ˆå¼€å§‹ç‚’èœï¼Œç‚’å¥½ä¸€é“å°±ä¼ å‡ºæ¥ä¸€é“ï¼ˆServer æŒç»­æ¨é€æ•°æ®ï¼‰</li>
<li>ä½ ååœ¨é‚£é‡Œç­‰ï¼Œèœä¸€é“ä¸€é“åœ°ä¸Šæ¥ï¼ˆClient æ¥æ”¶æµå¼æ•°æ®ï¼‰</li>
<li>å¦‚æœçªç„¶åœç”µäº†ï¼Œæ¥ç”µåå¨å¸ˆä¼šé—®ä½ ï¼š"åˆšæ‰ä¸Šåˆ°ç¬¬å‡ é“äº†ï¼Ÿ"ç„¶åç»§ç»­ä¸Šï¼ˆæ–­çº¿é‡è¿ï¼‰</li>
</ul>
<p><strong>WebSocket å°±åƒ"æ‰“ç”µè¯è®¢å¤–å–"</strong>ï¼š</p>
<ul>
<li>ä½ å’Œéª‘æ‰‹ä¿æŒé€šè¯ï¼ˆåŒå‘é€šä¿¡é€šé“ï¼‰</li>
<li>éª‘æ‰‹ä¸€è¾¹é€ä¸€è¾¹å‘ä½ æ±‡æŠ¥ä½ç½®ï¼ˆå®æ—¶åŒå‘äº¤äº’ï¼‰</li>
<li>å¦‚æœç”µè¯æ–­äº†ï¼Œä½ å¾—é‡æ–°æ‰“è¿‡å»ï¼Œè¿˜å¾—ä»å¤´è¯´ï¼ˆéœ€è¦æ‰‹åŠ¨é‡è¿ï¼‰</li>
</ul>
<p>å¯¹äº AI èŠå¤©è¿™ç§"æˆ‘ç‚¹èœï¼Œä½ ä¸Šèœ"çš„åœºæ™¯ï¼ŒSSE çš„ä¼ èœå£æ¨¡å¼æ˜¾ç„¶æ›´åˆé€‚ã€‚WebSocket æ›´é€‚åˆ"æˆ‘å’Œéª‘æ‰‹å®æ—¶æ²Ÿé€šä½ç½®"è¿™ç§éœ€è¦é¢‘ç¹äº¤äº’çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-5">1.4 ä¸ºä»€ä¹ˆä¸ç”¨åŸç”Ÿ EventSourceï¼Ÿ</h3>
<p>çœ‹åˆ°è¿™é‡Œä½ å¯èƒ½ä¼šé—®ï¼š<strong>æµè§ˆå™¨ä¸æ˜¯æœ‰åŸç”Ÿ <code>EventSource</code> API å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦è‡ªå·±å®ç°ï¼Ÿ</strong></p>
<p>é—®é¢˜åœ¨äºï¼ŒåŸç”Ÿ <code>EventSource</code> æœ‰å‡ ä¸ªè‡´å‘½é™åˆ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸç”Ÿ EventSource çš„é—®é¢˜</span>
<span class="hljs-keyword">const</span> eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/stream'</span>);  <span class="hljs-comment">// âŒ åªæ”¯æŒ GET</span>

<span class="hljs-comment">// âŒ æ— æ³•è‡ªå®šä¹‰ Headerï¼ˆæ¯”å¦‚ Authorizationï¼‰</span>
<span class="hljs-comment">// âŒ æ— æ³•å‘é€è¯·æ±‚ä½“ï¼ˆAI åœºæ™¯çš„ Prompt å¯èƒ½å¾ˆé•¿ï¼‰</span>
<span class="hljs-comment">// âŒ åªèƒ½åœ¨ URL é‡Œä¼ å‚æ•°ï¼Œä¸å®‰å…¨ä¹Ÿä¸ä¼˜é›…</span>
</code></pre>
<p>åœ¨ AI åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p>
<ul>
<li>ç”¨ <strong>POST</strong> è¯·æ±‚å‘é€é•¿ Prompt</li>
<li>åœ¨ Header é‡Œå¸¦ <strong>Authorization</strong> Token</li>
<li>æ”¯æŒè‡ªå®šä¹‰é”™è¯¯å¤„ç†å’Œé‡è¿ç­–ç•¥</li>
</ul>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åŸºäº <code>fetch + ReadableStream</code> è‡ªå·±å®ç°ä¸€ä¸ª SSEManagerã€‚</p>
<hr/>
<h2 data-id="heading-6">ç¯‡ç« äºŒï¼šç›´å‡»åº•å±‚ï¼šSSE åè®®åŸç†å‰–æ</h2>
<h3 data-id="heading-7">2.1 SSE åè®®æ ¼å¼</h3>
<p>SSE æ˜¯åŸºäº HTTP çš„ï¼Œåè®®æ ¼å¼éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">event:</span> message
<span class="hljs-symbol">id:</span> <span class="hljs-number">1234567890</span>
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"type"</span>: <span class="hljs-string">"content"</span>, <span class="hljs-string">"payload"</span>: <span class="hljs-string">"æˆ‘"</span>}

<span class="hljs-symbol">event:</span> message
<span class="hljs-symbol">id:</span> <span class="hljs-number">1234567891</span>
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"type"</span>: <span class="hljs-string">"content"</span>, <span class="hljs-string">"payload"</span>: <span class="hljs-string">"å–œ"</span>}

<span class="hljs-symbol">event:</span> close
<span class="hljs-symbol">data:</span> [DONE]
</code></pre>
<p><strong>åè®®è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>æ¯æ¡æ¶ˆæ¯ç”± <code>event:</code>ã€<code>id:</code>ã€<code>data:</code> ä¸‰ä¸ªå­—æ®µç»„æˆ</li>
<li>å­—æ®µé¡ºåºä¸é‡è¦ï¼Œä½†æ¯æ¡æ¶ˆæ¯åå¿…é¡»æœ‰ä¸€ä¸ª<strong>ç©ºè¡Œ</strong>ä½œä¸ºåˆ†éš”ç¬¦</li>
<li><code>event:</code> è¡¨ç¤ºäº‹ä»¶ç±»å‹ï¼ˆmessageã€errorã€close ç­‰ï¼‰</li>
<li><code>id:</code> ç”¨äºæ–­çº¿é‡è¿æ—¶æ¢å¤ï¼ˆå®¢æˆ·ç«¯ä¼šè®°å½• Last-Event-IDï¼‰</li>
<li><code>data:</code> æ˜¯å®é™…æ•°æ®ï¼Œé€šå¸¸æ˜¯ JSON å­—ç¬¦ä¸²</li>
</ul>
<h3 data-id="heading-8">2.2 æ ¸å¿ƒæŒ‘æˆ˜ï¼šç²˜åŒ…å’ŒåŠåŒ…é—®é¢˜</h3>
<p>è¿™æ˜¯ SSE å®ç°ä¸­æœ€å®¹æ˜“è¸©çš„å‘ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯ç²˜åŒ…ï¼Ÿ</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet">æœåŠ¡å™¨ä¸€æ¬¡å‘é€ï¼š
<span class="hljs-symbol">event:</span> message\ndata: {<span class="hljs-string">"type"</span>:<span class="hljs-string">"content"</span>,<span class="hljs-string">"payload"</span>:<span class="hljs-string">"æˆ‘"</span>}\n\nevent: message\ndata: {<span class="hljs-string">"type"</span>:<span class="hljs-string">"content"</span>,<span class="hljs-string">"payload"</span>:<span class="hljs-string">"å–œ"</span>}\n\n

å®¢æˆ·ç«¯å¯èƒ½æ”¶åˆ°ï¼š
<span class="hljs-symbol">event:</span> message
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"type"</span>:<span class="hljs-string">"content"</span>,<span class="hljs-string">"payload"</span>:<span class="hljs-string">"æˆ‘"</span>}
<span class="hljs-symbol">event:</span> message    â† ä¸¤æ¡æ¶ˆæ¯ç²˜åœ¨ä¸€èµ·äº†
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"type"</span>:<span class="hljs-string">"content"</span>,<span class="hljs-string">"payload"</span>:<span class="hljs-string">"å–œ"</span>}
</code></pre>
<p><strong>ä»€ä¹ˆæ˜¯åŠåŒ…ï¼Ÿ</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">æœåŠ¡å™¨å‘é€ä¸€æ¡å®Œæ•´æ¶ˆæ¯ï¼š
<span class="hljs-keyword">event</span>: message\ndata: {<span class="hljs-string">"type"</span>:<span class="hljs-string">"content"</span>,<span class="hljs-string">"payload"</span>:<span class="hljs-string">"æˆ‘æ˜¯ä¸­æ–‡"</span>}\n\n

å®¢æˆ·ç«¯å¯èƒ½åˆ†ä¸¤æ¬¡æ”¶åˆ°ï¼š
ç¬¬ä¸€æ¬¡ï¼š<span class="hljs-keyword">event</span>: message\ndata: {<span class="hljs-string">"type"</span>:<span class="hljs-string">"content"</span>,<span class="hljs-string">"payload"</span>: <span class="hljs-string">"æˆ‘
ç¬¬äºŒæ¬¡ï¼šæ˜¯ä¸­æ–‡"</span>}\n\n                              â† JSON è¢«æˆªæ–­äº†ï¼
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
ç»´æŠ¤ä¸€ä¸ª <code>buffer</code> ç¼“å†²åŒºï¼Œæ¯æ¬¡æ”¶åˆ° chunk åï¼š</p>
<ol>
<li>è¿½åŠ åˆ° buffer</li>
<li>æŒ‰ <code>\n\n</code> åˆ†å‰²å‡ºå®Œæ•´æ¶ˆæ¯</li>
<li>å‰©ä¸‹çš„éƒ¨åˆ†ç•™åœ¨ bufferï¼Œç­‰ä¸‹æ¬¡ chunk åˆ°æ¥</li>
</ol>
<hr/>
<h2 data-id="heading-9">ç¯‡ç« ä¸‰ï¼šå®æˆ˜å®ç°</h2>
<h3 data-id="heading-10">3.1 åç«¯å®ç°ï¼ˆNode.js + Expressï¼‰</h3>
<p>å…ˆçœ‹åç«¯æ€ä¹ˆå®ç° SSE æ¥å£ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/stream-sse'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-comment">// è®¾ç½® SSE å¿…éœ€çš„ HTTP Headers</span>
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/event-stream'</span>);
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Cache-Control'</span>, <span class="hljs-string">'no-cache, no-transform'</span>);
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Connection'</span>, <span class="hljs-string">'keep-alive'</span>);
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'X-Accel-Buffering'</span>, <span class="hljs-string">'no'</span>); <span class="hljs-comment">// ç¦ç”¨ Nginx ç¼“å†²</span>

  <span class="hljs-keyword">const</span> query = req.<span class="hljs-property">query</span>.<span class="hljs-property">query</span> || <span class="hljs-string">'é»˜è®¤é—®é¢˜'</span>;
  <span class="hljs-keyword">const</span> text = <span class="hljs-string">'è¿™æ˜¯ AI çš„å›å¤å†…å®¹...'</span>;
  <span class="hljs-keyword">const</span> chars = text.<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>);

  <span class="hljs-comment">// é€å­—å‘é€</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; chars.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> message = <span class="hljs-string">`event: message\nid: <span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>\ndata: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({
      type: <span class="hljs-string">'content'</span>,
      payload: chars[i],
      index: i,
      total: chars.length
    })}</span>\n\n`</span>;

    res.<span class="hljs-title function_">write</span>(message);

    <span class="hljs-comment">// æ¨¡æ‹Ÿ AI ç”Ÿæˆå»¶è¿Ÿï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">100</span>));
  }

  <span class="hljs-comment">// å‘é€å®Œæˆä¿¡å·</span>
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">'event: close\ndata: [DONE]\n\n'</span>);
  res.<span class="hljs-title function_">end</span>();
});
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>Content-Type: text/event-stream</code> å‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ SSE æµ</li>
<li><code>Cache-Control: no-cache</code> ç¦æ­¢ç¼“å­˜ï¼Œç¡®ä¿å®æ—¶æ€§</li>
<li><code>Connection: keep-alive</code> ä¿æŒé•¿è¿æ¥</li>
<li>é€å­—ç¬¦å‘é€ï¼Œæ¨¡æ‹Ÿ AI æ‰“å­—æœºæ•ˆæœ</li>
<li>æœ€åå‘é€ <code>[DONE]</code> ä¿¡å·å‘Šè¯‰å®¢æˆ·ç«¯æµç»“æŸäº†</li>
</ul>
<h3 data-id="heading-11">3.2 JavaScript å®¢æˆ·ç«¯ï¼šæ‰‹å†™ SSEManager</h3>
<p>è¿™æ˜¯æ ¸å¿ƒéƒ¨åˆ†ã€‚æˆ‘ä»¬åŸºäº <code>fetch + ReadableStream</code> å®ç°ä¸€ä¸ªå®Œæ•´çš„ SSEManagerï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SSEManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span> = url;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {
      <span class="hljs-attr">headers</span>: {},
      <span class="hljs-attr">body</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">initialRetryDelay</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">enableRetry</span>: <span class="hljs-literal">true</span>,
      ...options
    };

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMessageCallback</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onErrorCallback</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onCompleteCallback</span> = <span class="hljs-literal">null</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortController</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryCount</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastEventId</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> fetchOptions = {
        <span class="hljs-attr">method</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">body</span> ? <span class="hljs-string">'POST'</span> : <span class="hljs-string">'GET'</span>,
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
          ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">headers</span>
        },
        <span class="hljs-attr">signal</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortController</span>.<span class="hljs-property">signal</span>
      };

      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">body</span>) {
        fetchOptions.<span class="hljs-property">body</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">body</span>);
      }

      <span class="hljs-comment">// å¦‚æœæœ‰ Last-Event-IDï¼Œå¸¦ä¸Šï¼ˆç”¨äºæ–­çº¿é‡è¿ï¼‰</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">lastEventId</span>) {
        fetchOptions.<span class="hljs-property">headers</span>[<span class="hljs-string">'Last-Event-ID'</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastEventId</span>;
      }

      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span>, fetchOptions);
      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span>);
      }

      <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
      <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>(<span class="hljs-string">'utf-8'</span>);

      <span class="hljs-comment">// ğŸ”¥ å…³é”®ï¼šæ¶ˆæ¯ç¼“å†²åŒºï¼ˆå¤„ç†ç²˜åŒ…å’ŒåŠåŒ…ï¼‰</span>
      <span class="hljs-keyword">let</span> buffer = <span class="hljs-string">''</span>;

      <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
        <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">const</span> chunk = decoder.<span class="hljs-title function_">decode</span>(value, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });
        buffer += chunk;

        <span class="hljs-comment">// è§£æç¼“å†²åŒºä¸­çš„å®Œæ•´æ¶ˆæ¯</span>
        buffer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_parseBuffer</span>(buffer);
      }

      <span class="hljs-comment">// å¦‚æœä¸æ˜¯ä¸»åŠ¨æ–­å¼€ï¼Œå°è¯•é‡è¿</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">enableRetry</span> &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">abortController</span>.<span class="hljs-property">signal</span>.<span class="hljs-property">aborted</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_scheduleRetry</span>();
      }

    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">onErrorCallback</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onErrorCallback</span>(error);
      }

      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">enableRetry</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryCount</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxRetries</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_scheduleRetry</span>();
      }
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// ğŸ”¥ æ ¸å¿ƒæ–¹æ³•ï¼šè§£æç¼“å†²åŒºä¸­çš„ SSE æ¶ˆæ¯</span>
  <span class="hljs-title function_">_parseBuffer</span>(<span class="hljs-params">buffer</span>) {
    <span class="hljs-keyword">const</span> lines = buffer.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);
    <span class="hljs-keyword">let</span> currentEvent = { <span class="hljs-attr">event</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">id</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span> };

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; lines.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> line = lines[i];

      <span class="hljs-comment">// ç©ºè¡Œè¡¨ç¤ºä¸€æ¡æ¶ˆæ¯ç»“æŸ</span>
      <span class="hljs-keyword">if</span> (line === <span class="hljs-string">''</span>) {
        <span class="hljs-keyword">if</span> (currentEvent.<span class="hljs-property">data</span> !== <span class="hljs-literal">null</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_handleEvent</span>(currentEvent);
          currentEvent = { <span class="hljs-attr">event</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">id</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span> };
        }
        <span class="hljs-keyword">continue</span>;
      }

      <span class="hljs-comment">// è§£æå­—æ®µ</span>
      <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'event:'</span>)) {
        currentEvent.<span class="hljs-property">event</span> = line.<span class="hljs-title function_">substring</span>(<span class="hljs-number">7</span>).<span class="hljs-title function_">trim</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'id:'</span>)) {
        currentEvent.<span class="hljs-property">id</span> = line.<span class="hljs-title function_">substring</span>(<span class="hljs-number">4</span>).<span class="hljs-title function_">trim</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastEventId</span> = currentEvent.<span class="hljs-property">id</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'data:'</span>)) {
        currentEvent.<span class="hljs-property">data</span> = line.<span class="hljs-title function_">substring</span>(<span class="hljs-number">6</span>).<span class="hljs-title function_">trim</span>();
      }
    }

    <span class="hljs-comment">// è¿”å›æœªå¤„ç†çš„ç¼“å†²åŒºï¼ˆæœ€åä¸€æ¡ä¸å®Œæ•´çš„æ¶ˆæ¯ï¼‰</span>
    <span class="hljs-keyword">return</span> lines[lines.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] === <span class="hljs-string">''</span> ? <span class="hljs-string">''</span> : lines[lines.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
  }

  <span class="hljs-title function_">_handleEvent</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">event</span> === <span class="hljs-string">'close'</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">onCompleteCallback</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCompleteCallback</span>();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">event</span> === <span class="hljs-string">'error'</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">onErrorCallback</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onErrorCallback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(event.<span class="hljs-property">data</span>));
      }
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">onMessageCallback</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onMessageCallback</span>(data);
      } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to parse SSE data:'</span>, e);
      }
    }
  }

  <span class="hljs-comment">// ğŸ”¥ æŒ‡æ•°é€€é¿é‡è¿ç®—æ³•</span>
  <span class="hljs-title function_">_scheduleRetry</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryCount</span>++;
    <span class="hljs-keyword">const</span> delay = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">initialRetryDelay</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryCount</span> - <span class="hljs-number">1</span>),
      <span class="hljs-number">30000</span> <span class="hljs-comment">// æœ€å¤§ 30 ç§’</span>
    );

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[SSE] Retry <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.retryCount}</span>/<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.options.maxRetries}</span> after <span class="hljs-subst">${delay}</span>ms`</span>);

    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>();
    }, delay);
  }

  <span class="hljs-title function_">onMessage</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMessageCallback</span> = callback;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">onError</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onErrorCallback</span> = callback;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onCompleteCallback</span> = callback;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">disconnect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">abortController</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortController</span>.<span class="hljs-title function_">abort</span>();
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
  }
}
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> sse = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SSEManager</span>(<span class="hljs-string">'http://localhost:3000/stream-sse'</span>, {
  <span class="hljs-attr">body</span>: { <span class="hljs-attr">query</span>: <span class="hljs-string">'å¦‚ä½•å­¦å¥½ Flutterï¼Ÿ'</span> },
  <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">'Bearer token123'</span> },
  <span class="hljs-attr">enableRetry</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">5</span>
});

sse.<span class="hljs-title function_">onMessage</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ•°æ®:'</span>, data.<span class="hljs-property">payload</span>);
  <span class="hljs-comment">// é€å­—æ˜¾ç¤ºåˆ°ç•Œé¢ä¸Š</span>
})
.<span class="hljs-title function_">onError</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å‘ç”Ÿé”™è¯¯:'</span>, error);
})
.<span class="hljs-title function_">onComplete</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¼ è¾“å®Œæˆ'</span>);
})
.<span class="hljs-title function_">connect</span>();
</code></pre>
<h3 data-id="heading-12">3.3 Dart å®¢æˆ·ç«¯ï¼šUTF-8 å®‰å…¨å¤„ç†</h3>
<p>Dart ç«¯æœ‰ä¸ªç‰¹æ®Šé—®é¢˜ï¼š<strong>ä¸­æ–‡å­—ç¬¦çš„ UTF-8 ç¼–ç é—®é¢˜</strong>ã€‚</p>
<p>ä¸­æ–‡å­—ç¬¦åœ¨ UTF-8 ä¸­å  3 ä¸ªå­—èŠ‚ï¼Œå¦‚æœæµæ­£å¥½æŠŠä¸€ä¸ªå­—ç¬¦çš„ 3 ä¸ªå­—èŠ‚æˆªæ–­äº†ï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ <code>utf8.decoder</code> + <code>LineSplitter()</code> çš„æµè½¬æ¢é“¾ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SSEManager</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> url;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; headers;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; body;

  <span class="hljs-built_in">int</span> _retryCount = <span class="hljs-number">0</span>;
  <span class="hljs-built_in">String?</span> _lastEventId;
  <span class="hljs-built_in">bool</span> _isConnecting = <span class="hljs-keyword">false</span>;

  SSEManager({
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.url,
    <span class="hljs-keyword">this</span>.headers = <span class="hljs-keyword">const</span> {},
    <span class="hljs-keyword">this</span>.body = <span class="hljs-keyword">const</span> {},
  });

  Future&lt;<span class="hljs-keyword">void</span>&gt; connect() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (_isConnecting) <span class="hljs-keyword">return</span>;
    _isConnecting = <span class="hljs-keyword">true</span>;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">final</span> client = HttpClient();
      <span class="hljs-keyword">final</span> request = <span class="hljs-keyword">await</span> client.postUrl(<span class="hljs-built_in">Uri</span>.parse(url));

      <span class="hljs-comment">// è®¾ç½® Headers</span>
      headers.forEach((key, value) {
        request.headers.<span class="hljs-keyword">set</span>(key, value);
      });

      <span class="hljs-keyword">if</span> (_lastEventId != <span class="hljs-keyword">null</span>) {
        request.headers.<span class="hljs-keyword">set</span>(<span class="hljs-string">'Last-Event-ID'</span>, _lastEventId!);
      }

      <span class="hljs-comment">// è®¾ç½® Body</span>
      <span class="hljs-keyword">if</span> (body.isNotEmpty) {
        request.add(utf8.encode(jsonEncode(body)));
      }

      <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> request.close();

      <span class="hljs-comment">// ğŸ”¥ æ ¸å¿ƒæµè½¬æ¢é“¾</span>
      response
        .transform(utf8.decoder)      <span class="hljs-comment">// ByteStream â†’ String</span>
        .transform(<span class="hljs-keyword">const</span> LineSplitter()) <span class="hljs-comment">// String â†’ Lines</span>
        .listen(_parseLine);

    } <span class="hljs-keyword">catch</span> (e) {
      _scheduleRetry();
    } <span class="hljs-keyword">finally</span> {
      _isConnecting = <span class="hljs-keyword">false</span>;
    }
  }

  <span class="hljs-keyword">void</span> _parseLine(<span class="hljs-built_in">String</span> line) {
    <span class="hljs-comment">// è§£æ SSE åè®®...</span>
    <span class="hljs-comment">// ï¼ˆç±»ä¼¼ JS ç‰ˆæœ¬çš„é€»è¾‘ï¼‰</span>
  }

  <span class="hljs-keyword">void</span> _scheduleRetry() {
    _retryCount++;
    <span class="hljs-keyword">final</span> delay = min(<span class="hljs-number">1000</span> * pow(<span class="hljs-number">2</span>, _retryCount - <span class="hljs-number">1</span>), <span class="hljs-number">30000</span>).toInt();

    Future.delayed(<span class="hljs-built_in">Duration</span>(milliseconds: delay), () {
      connect();
    });
  }
}
</code></pre>
<h3 data-id="heading-13">3.4 å®é™…è¿è¡Œæ•ˆæœ</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹å®é™…è¿è¡Œçš„æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4315812aae0b446b91e1a6b39620f8a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X55qE57yW56iL5byA5Y-R5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209228&amp;x-signature=Fr9cdP%2FtL5NhR7Yi4MSfQ8J8%2BjM%3D" alt="ä¸»é¡µé¢.png" loading="lazy"/></p>
<p><strong>ä¼ è¾“ä¸­çŠ¶æ€</strong>ï¼š</p>
<ul>
<li>AI å“åº”åŒºåŸŸé€å­—æ˜¾ç¤º</li>
<li>ç³»ç»Ÿæ—¥å¿—å®æ—¶æ»šåŠ¨</li>
<li>æ€§èƒ½æŒ‡æ ‡åŠ¨æ€æ›´æ–°</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a53f9b73eab34675b8657fba557d01ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X55qE57yW56iL5byA5Y-R5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209228&amp;x-signature=mo3NStOjf2MHxs%2BYVqYtKdfpLG0%3D" alt="ä¼ è¾“ä¸­.png" loading="lazy"/></p>
<p><strong>è¿æ¥é”™è¯¯</strong>ï¼š</p>
<ul>
<li>å½“æœåŠ¡å™¨æœªå¯åŠ¨æ—¶ï¼Œæ˜¾ç¤ºçº¢è‰²é”™è¯¯æç¤º</li>
<li>è‡ªåŠ¨è§¦å‘é‡è¿æœºåˆ¶</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9d6532dc08a4431a46e6816f2fa6d64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X55qE57yW56iL5byA5Y-R5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209228&amp;x-signature=oPwLNZQSJWj%2B2aYR4oUr9MrbEEk%3D" alt="è¿æ¥é”™è¯¯.png" loading="lazy"/></p>
<p><strong>é‡è¯•ä¸­çŠ¶æ€</strong>ï¼š</p>
<ul>
<li>æ˜¾ç¤ºå½“å‰é‡è¯•æ¬¡æ•°å’Œå»¶è¿Ÿæ—¶é—´</li>
<li>ä½¿ç”¨æŒ‡æ•°é€€é¿ç®—æ³•ï¼ˆ1s â†’ 2s â†’ 4s â†’ 8s...ï¼‰</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0852658ddf7d47da9bbabbddc984244a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X55qE57yW56iL5byA5Y-R5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209228&amp;x-signature=ALR1eFcv626oAutine4P7XHeuCE%3D" alt="é‡è¯•ä¸­.png" loading="lazy"/></p>
<p><strong>ä¼ è¾“å®Œæˆ</strong>ï¼š</p>
<ul>
<li>æ˜¾ç¤ºå®Œæ•´çš„è¾“å‡ºå†…å®¹</li>
<li>æ€§èƒ½æŒ‡æ ‡ï¼šæ€»å­—æ•°ã€æ€»è€—æ—¶ã€å¹³å‡å»¶è¿Ÿ</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb1ed7b22879466bb98f35a5108a12b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X55qE57yW56iL5byA5Y-R5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209228&amp;x-signature=AqunqCC4i34ldb65c6r5pnalff4%3D" alt="ä¼ è¾“ç»“æŸ.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-14">ç¯‡ç« å››ï¼šè¸©å‘æ€»ç»“</h2>
<p>åšè¿™ä¸ª Demo çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘è¸©äº†ä¸å°‘å‘ã€‚è¿™é‡ŒæŒ‘å‡ ä¸ªæœ€ç»å…¸çš„åˆ†äº«ç»™ä½ ã€‚</p>
<h3 data-id="heading-15">4.1 ç²˜åŒ…/åŠåŒ…å¤„ç†</h3>
<p><strong>å‘</strong>ï¼šä¸€å¼€å§‹æˆ‘ç›´æ¥ç”¨ <code>split('\n\n')</code> åˆ†å‰²æ¶ˆæ¯ï¼Œç»“æœç»å¸¸å‡ºç° JSON è§£æé”™è¯¯ã€‚</p>
<p><strong>åŸå› </strong>ï¼šä¸€ä¸ª chunk å¯èƒ½åŒ…å«åŠä¸ª JSONï¼Œæˆ–è€…ä¸¤æ¡æ¶ˆæ¯ç²˜åœ¨ä¸€èµ·ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šç»´æŠ¤ bufferï¼Œæ¯æ¬¡è§£æåæŠŠå‰©ä½™éƒ¨åˆ†ç•™ç»™ä¸‹æ¬¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> buffer = <span class="hljs-string">''</span>;
buffer += chunk;           <span class="hljs-comment">// è¿½åŠ æ–°æ•°æ®</span>
<span class="hljs-keyword">const</span> messages = buffer.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n\n'</span>);
buffer = messages.<span class="hljs-title function_">pop</span>();   <span class="hljs-comment">// ä¿ç•™æœ€åä¸€ä¸ªï¼ˆå¯èƒ½ä¸å®Œæ•´ï¼‰</span>
<span class="hljs-comment">// å¤„ç†å‰é¢çš„å®Œæ•´æ¶ˆæ¯</span>
messages.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">msg</span> =&gt;</span> <span class="hljs-title function_">parseMessage</span>(msg));
</code></pre>
<h3 data-id="heading-16">4.2 UTF-8 å­—ç¬¦æˆªæ–­</h3>
<p><strong>å‘</strong>ï¼šDart ç«¯ç»å¸¸å‡ºç°ä¹±ç ï¼Œç‰¹åˆ«æ˜¯ä¸­æ–‡å­—ç¬¦ã€‚</p>
<p><strong>åŸå› </strong>ï¼šä¸­æ–‡å­—ç¬¦åœ¨ UTF-8 ä¸­å  3 å­—èŠ‚ï¼Œæµå¯èƒ½æŠŠ 3 å­—èŠ‚æˆªæ–­ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šä½¿ç”¨ <code>utf8.decoder</code> è‡ªåŠ¨å¤„ç†å­—èŠ‚è¾¹ç•Œï¼š</p>
<pre><code class="hljs language-dart" lang="dart">response
  .transform(utf8.decoder)      <span class="hljs-comment">// âœ… è‡ªåŠ¨å¤„ç† UTF-8 è¾¹ç•Œ</span>
  .transform(<span class="hljs-keyword">const</span> LineSplitter())
  .listen(_parseLine);
</code></pre>
<h3 data-id="heading-17">4.3 é‡è¿æ—¶æœºåˆ¤æ–­</h3>
<p><strong>å‘</strong>ï¼šæœåŠ¡å™¨æ­£å¸¸ç»“æŸæ—¶ä¹Ÿè§¦å‘é‡è¿ï¼Œå¯¼è‡´æ­»å¾ªç¯ã€‚</p>
<p><strong>åŸå› </strong>ï¼šæ²¡åŒºåˆ†"æ­£å¸¸ç»“æŸ"å’Œ"å¼‚å¸¸æ–­å¼€"ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šæ£€æŸ¥ <code>[DONE]</code> ä¿¡å·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">_handleEvent</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">event</span> === <span class="hljs-string">'close'</span> &amp;&amp; event.<span class="hljs-property">data</span> === <span class="hljs-string">'[DONE]'</span>) {
    <span class="hljs-comment">// æ­£å¸¸ç»“æŸï¼Œä¸é‡è¿</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCompleteCallback</span>();
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// ... å…¶ä»–å¤„ç†</span>
}

<span class="hljs-comment">// åœ¨æµå…³é—­æ—¶åˆ¤æ–­</span>
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
  <span class="hljs-keyword">if</span> (done) {
    <span class="hljs-comment">// å¦‚æœæ”¶åˆ°äº† [DONE]ï¼Œè¯´æ˜æ­£å¸¸ç»“æŸ</span>
    <span class="hljs-keyword">if</span> (receivedDoneSignal) <span class="hljs-keyword">return</span>;
    <span class="hljs-comment">// å¦åˆ™å¯èƒ½æ˜¯å¼‚å¸¸æ–­å¼€ï¼Œè§¦å‘é‡è¿</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_scheduleRetry</span>();
    <span class="hljs-keyword">break</span>;
  }
}
</code></pre>
<h3 data-id="heading-18">4.4 Nginx ç¼“å†²é—®é¢˜</h3>
<p><strong>å‘</strong>ï¼šéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒåï¼ŒSSE æµåŠå¤©ä¸è¾“å‡ºã€‚</p>
<p><strong>åŸå› </strong>ï¼šNginx é»˜è®¤ä¼šç¼“å†²å“åº”ï¼Œç­‰ç§¯ç´¯åˆ°ä¸€å®šå¤§å°æ‰å‘é€ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šåœ¨å“åº”å¤´æ·»åŠ  <code>X-Accel-Buffering: no</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'X-Accel-Buffering'</span>, <span class="hljs-string">'no'</span>);
</code></pre>
<p>æˆ–è€…åœ¨ Nginx é…ç½®ä¸­ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">proxy_buffering off;
</code></pre>
<hr/>
<h2 data-id="heading-19">æœ€ç»ˆç« ï¼šæ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-20">5.1 æŠ€æœ¯é€‰å‹å»ºè®®</h3>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨ SSEï¼Ÿ</strong></p>
<ul>
<li>âœ… AI èŠå¤©åŠ©æ‰‹ï¼ˆä¸€é—®å¤šç­”ï¼‰</li>
<li>âœ… å®æ—¶é€šçŸ¥æ¨é€</li>
<li>âœ… è‚¡ç¥¨/åŠ å¯†è´§å¸ä»·æ ¼æ¨é€</li>
<li>âœ… æœåŠ¡å™¨æ—¥å¿—å®æ—¶ç›‘æ§</li>
</ul>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨ WebSocketï¼Ÿ</strong></p>
<ul>
<li>âœ… å³æ—¶é€šè®¯ï¼ˆIMã€èŠå¤©å®¤ï¼‰</li>
<li>âœ… åœ¨çº¿åä½œï¼ˆå¤šäººåŒæ—¶ç¼–è¾‘ï¼‰</li>
<li>âœ… æ¸¸æˆç›´æ’­ï¼ˆéœ€è¦é«˜é¢‘åŒå‘äº¤äº’ï¼‰</li>
<li>âœ… è¿œç¨‹æ¡Œé¢/æ§åˆ¶</li>
</ul>
<h3 data-id="heading-21">5.2 æœ¬é¡¹ç›®çš„æ ¸å¿ƒç‰¹æ€§</h3>
<p>æˆ‘å®ç°çš„è¿™ä¸ª Demoï¼ŒåŒ…å«äº†ä»¥ä¸‹ç”Ÿäº§çº§ç‰¹æ€§ï¼š</p>
<ul>
<li>âœ… æ”¯æŒ POST è¯·æ±‚ï¼ˆå¯ä»¥å‘é€é•¿ Promptï¼‰</li>
<li>âœ… è‡ªå®šä¹‰ Headerï¼ˆæ”¯æŒ Authorizationï¼‰</li>
<li>âœ… ç²˜åŒ…/åŠåŒ…å¤„ç†ï¼ˆbuffer ç¼“å†²åŒºï¼‰</li>
<li>âœ… æŒ‡æ•°é€€é¿é‡è¿ï¼ˆ1s â†’ 2s â†’ 4s â†’ 8s...ï¼‰</li>
<li>âœ… Last-Event-ID æœºåˆ¶ï¼ˆæ–­çº¿ç»­ä¼ ï¼‰</li>
<li>âœ… UTF-8 å®‰å…¨å¤„ç†ï¼ˆDart ç«¯ï¼‰</li>
<li>âœ… é”™è¯¯å¤„ç†å’Œæ—¥å¿—</li>
</ul>
<h3 data-id="heading-22">5.3 å¼€æºåœ°å€</h3>
<p>é¡¹ç›®å·²å®Œå…¨å¼€æºï¼Œæ¬¢è¿ Star å’Œ PRï¼š</p>
<p>ğŸ”— <strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fsse-research-demo" target="_blank" title="https://github.com/xinqingaa/sse-research-demo" ref="nofollow noopener noreferrer">github.com/xinqingaa/sâ€¦</a></p>
<p>åŒ…å«ï¼š</p>
<ul>
<li>Node.js åç«¯ï¼ˆExpressï¼‰</li>
<li>JavaScript å®¢æˆ·ç«¯ï¼ˆåŸç”Ÿ JSï¼Œæ— ä¾èµ–ï¼‰</li>
<li>Dart å®¢æˆ·ç«¯ï¼ˆFlutter å‹å¥½ï¼‰</li>
<li>äº¤äº’å¼æ¼”ç¤ºç•Œé¢</li>
</ul>
<h3 data-id="heading-23">5.4 å†™åœ¨æœ€å</h3>
<p>å›çœ‹è¿™ä¸€å‘¨çš„å­¦ä¹ ï¼Œæˆ‘å‘ç°ï¼š</p>
<p><strong>æŠ€æœ¯é€‰å‹æ²¡æœ‰é“¶å¼¹</strong>ã€‚SSE ä¸æ˜¯ä¸‡èƒ½çš„ï¼ŒWebSocket ä¹Ÿä¸æ˜¯è¿‡æ—¶çš„ã€‚å…³é”®æ˜¯è¦ç†è§£ä½ çš„åœºæ™¯éœ€æ±‚ã€‚</p>
<p>å¯¹äº AI èŠå¤©è¿™ç§"ä¸€é—®å¤šç­”"çš„å•å‘æµå¼åœºæ™¯ï¼ŒSSE å°±åƒé‡èº«å®šåšçš„ä¸€æ ·ï¼š</p>
<ul>
<li>ç®€å•ï¼ˆåŸºäº HTTPï¼‰</li>
<li>å¯é ï¼ˆå†…ç½®é‡è¿ï¼‰</li>
<li>é«˜æ•ˆï¼ˆæ²¡æœ‰å…¨åŒå·¥çš„å¼€é”€ï¼‰</li>
<li>å¯è°ƒè¯•ï¼ˆDevTools ç›´æ¥çœ‹ï¼‰</li>
</ul>
<p>è€Œ WebSocket çš„å¼ºå¤§åœ¨äº<strong>åŒå‘å®æ—¶äº¤äº’</strong>ï¼Œä½†è¿™åœ¨ AI èŠå¤©åœºæ™¯ä¸‹æ˜¯"æ€é¸¡ç”¨ç‰›åˆ€"ã€‚</p>
<p><strong>æœ€åï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªèµå§ï½</strong></p>
<p>ï¼ˆå®Œï¼‰</p>
<hr/>
<h2 data-id="heading-24">å¾€æœŸæ–‡ç« å›é¡¾</h2>
<h3 data-id="heading-25">LangGraph + React + Nest å…¨æ ˆAgent</h3>
<p><a href="https://juejin.cn/post/7601384029611868175" target="_blank" title="https://juejin.cn/post/7601384029611868175">æ˜é‡‘æ–‡ç« </a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Faivista_agent" target="_blank" title="https://github.com/xinqingaa/aivista_agent" ref="nofollow noopener noreferrer">github</a></p>
<h3 data-id="heading-26">Flutter å›¾ç‰‡ç¼–è¾‘å™¨</h3>
<p><a href="https://juejin.cn/post/7571067260053585946" target="_blank" title="https://juejin.cn/post/7571067260053585946">æ˜é‡‘æ–‡ç« </a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fflutter_img_editor" target="_blank" title="https://pub.dev/packages/flutter_img_editor" ref="nofollow noopener noreferrer">pub.dev</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fimage_editor" target="_blank" title="https://github.com/xinqingaa/image_editor" ref="nofollow noopener noreferrer">github</a></p>
<h3 data-id="heading-27">Flutter å…¨é“¾è·¯ç›‘æ§ SDK</h3>
<p><a href="https://juejin.cn/post/7564977973260173338" target="_blank" title="https://juejin.cn/post/7564977973260173338">æ˜é‡‘æ–‡ç« </a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fflutter_monitor_sdk" target="_blank" title="https://pub.dev/packages/flutter_monitor_sdk" ref="nofollow noopener noreferrer">pub.dev</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fflutter_monitor_sdk" target="_blank" title="https://github.com/xinqingaa/flutter_monitor_sdk" ref="nofollow noopener noreferrer">github</a></p>
<h3 data-id="heading-28">Flutter å…¨åœºæ™¯å¼¹æ¡†ç»„ä»¶</h3>
<p><a href="https://juejin.cn/post/7538324216594726950" target="_blank" title="https://juejin.cn/post/7538324216594726950">æ˜é‡‘æ–‡ç« </a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Funified_popups" target="_blank" title="https://pub.dev/packages/unified_popups" ref="nofollow noopener noreferrer">pub.dev</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Funified_popups" target="_blank" title="https://github.com/xinqingaa/unified_popups" ref="nofollow noopener noreferrer">github</a></p>
<hr/>
<blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ã€å°æ—ã€‘ï¼Œä¸€å Flutter å¼€å‘å·¥ç¨‹å¸ˆã€‚è¿‘æœŸåœ¨ç ”ç©¶ AI Agent å’Œæµå¼ä¼ è¾“æŠ€æœ¯ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„æ˜é‡‘è´¦å·ï¼Œè·å–æ›´å¤šæŠ€æœ¯åˆ†äº«ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©æœ¬åœ°çŸ¥è¯†å¼•å¯¼AIè¿½è¸ªç¤¾åŒºå˜è¿ï¼Œè®©AIçœŸæ­£ç†è§£ç¤¾ä¼šç°è±¡]]></title>    <link>https://juejin.cn/post/7603854784865746984</link>    <guid>https://juejin.cn/post/7603854784865746984</guid>    <pubDate>2026-02-09T02:40:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603854784865746984" data-draft-id="7604045354070081570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©æœ¬åœ°çŸ¥è¯†å¼•å¯¼AIè¿½è¸ªç¤¾åŒºå˜è¿ï¼Œè®©AIçœŸæ­£ç†è§£ç¤¾ä¼šç°è±¡"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-02-09T02:40:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©æœ¬åœ°çŸ¥è¯†å¼•å¯¼AIè¿½è¸ªç¤¾åŒºå˜è¿ï¼Œè®©AIçœŸæ­£ç†è§£ç¤¾ä¼šç°è±¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:40:21.000Z" title="Mon Feb 09 2026 02:40:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘æœ‰ä¸€é¡¹ç ”ç©¶è®©æˆ‘ååˆ†å¥½å¥‡ï¼Œå®ƒä¼¼ä¹åœ¨å°è¯•ç¿»è½¬æˆ‘ä»¬ç†Ÿæ‚‰çš„å‰§æœ¬â€”â€”ä¸æ˜¯ç”¨äººå·¥æ™ºèƒ½å»â€œåˆ†æâ€ç¤¾åŒºï¼Œè€Œæ˜¯è®©ç¤¾åŒºæ¥â€œæ•™ä¼šâ€äººå·¥æ™ºèƒ½å¦‚ä½•çœ‹ä¸–ç•Œã€‚è¿™å¬èµ·æ¥åƒæ˜¯ä¸€ç§å……æ»¡æ¸©åº¦çš„æŠ€æœ¯æ°‘ä¸»åŒ–å®éªŒã€‚</p>
<p>é€šå¸¸ï¼Œå½“æˆ‘ä»¬è°ˆè®ºæœºå™¨å­¦ä¹ ä¸åŸå¸‚å˜è¿ï¼Œæ€»ä¸å…é™·å…¥ä¸€ç§ç•¥å¸¦å†°å†·çš„è§†è§’ï¼šç®—æ³•æ‰«æè¡—æ™¯ï¼Œè¯†åˆ«æ¨¡å¼ï¼Œè¾“å‡ºç»“è®ºã€‚ä½†æœ‰æ²¡æœ‰å¯èƒ½ï¼Œæˆ‘ä»¬æ¼æ‰äº†æ•…äº‹é‡Œæœ€å…³é”®çš„è®²è¿°è€…ï¼Ÿé‚£äº›åœ¨åŒä¸€ä¸ªè¡—è§’ç›®ç¹äº†æ•°åå¹´æ™¨æ˜çš„å±…æ°‘ï¼Œä»–ä»¬çœ¼ä¸­çš„â€œå˜åŒ–â€ï¼Œæ˜¯å¦æ‰æ˜¯å®šä¹‰å˜è¿çš„çœŸæ­£æ ‡å°ºï¼Ÿ</p>
<p>ä¸€é¡¹æ¥è‡ªè´¹åŸçš„ç ”ç©¶æ­£æ˜¯è¿™ä¹ˆåšçš„ã€‚ç ”ç©¶è€…æ²¡æœ‰å°†å­¦æœ¯æ–‡çŒ®ä¸­çš„ç»…å£«åŒ–æŒ‡æ ‡ç›´æ¥ç¼–ç ç»™AIï¼Œè€Œæ˜¯èµ°è¿›äº†ç¤¾åŒºçš„ä¼šè®®å®¤ï¼Œé—®äº†ä¸€ä¸ªç®€å•å´æ·±åˆ»çš„é—®é¢˜ï¼šâ€œåœ¨ä½ ä»¬çœ‹æ¥ï¼Œä»€ä¹ˆæ ·çš„æ–°å»ºç­‘ï¼Œæ„å‘³ç€â€˜ä»–ä»¬â€™æ¥äº†ï¼Ÿâ€</p>
<p>ç­”æ¡ˆå…·ä½“è€Œç”ŸåŠ¨ï¼šâ€œæ–¹æ–¹æ­£æ­£åƒä¸ªç›’å­â€ã€â€œé»‘æ¡†å¤§çª—æˆ·â€ã€â€œä¸‰å±‚é«˜ï¼Œæ˜¾å¾—æ¯”è€æˆ¿å­â€˜å‚²æ…¢â€™â€ã€â€œç”¨äº†å¥½å¤šä¸åŒæè´¨æ‹¼åœ¨ä¸€èµ·â€ã€‚è¿™äº›æ¥è‡ªæ—¥å¸¸è§‚å¯Ÿçš„è¯­è¨€ï¼Œæˆäº†æœºå™¨å­¦ä¹ æ¨¡å‹æœ€æ ¸å¿ƒçš„â€œæ•™æâ€ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬å¾—ä»¥çœ‹åˆ°ä¸€ç§å…¨æ–°çš„åä½œï¼šç¤¾åŒºå±…æ°‘æˆä¸ºç‰¹å¾çš„â€œå®šä¹‰è€…â€ï¼Œå†å²è¡—æ™¯å›¾åƒæˆä¸ºåšé‡çš„â€œè¯æ®é›†â€ï¼Œè€Œäººå·¥æ™ºèƒ½åˆ™å……å½“äº†ä¸çŸ¥ç–²å€¦çš„â€œæ¨¡å¼è¯†åˆ«è€…â€ã€‚å®ƒå­¦ä¹ çš„ä¸æ˜¯æŠ½è±¡çš„ç†è®ºï¼Œè€Œæ˜¯ä¸€ä¸ªåœ°æ–¹é›†ä½“è®°å¿†ä¸è§†è§‰ç»éªŒçš„å‡ç»“ã€‚</p>
<p>è¿™æˆ–è®¸æé†’æˆ‘ä»¬ï¼Œåœ¨é¢å¯¹æŠ€æœ¯å°¤å…¶æ˜¯AIæ—¶ï¼Œæˆ‘ä»¬å¹¶éåªèƒ½è¢«åŠ¨æ¥å—å®ƒè®¾å®šçš„æ¡†æ¶ã€‚æˆ‘ä»¬å¯ä»¥ï¼Œä¹Ÿåº”è¯¥ï¼Œå°†æˆ‘ä»¬çš„åœ°æ–¹çŸ¥è¯†ã€ä»·å€¼åˆ¤æ–­å’Œç”Ÿæ´»ç»éªŒï¼Œâ€œåå‘ç¼–ç â€è¿›æŠ€æœ¯çš„å†…æ ¸ã€‚ è¿™ä¸ä»…æ˜¯è®©ç ”ç©¶æ›´â€œå‡†â€ï¼Œæˆ–è®¸ä¹Ÿæ˜¯è®©æŠ€æœ¯æ›´â€œå¯¹â€çš„ä¸€æ¬¡å°è¯•ã€‚</p>
<p>èµ°åœ¨è´¹åŸçš„æŸäº›è¡—åŒºï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ä¸€äº›â€œæ ¼æ ¼ä¸å…¥â€çš„æ–°å»ºç­‘ã€‚å®ƒä»¬çº¿æ¡æ–¹æ­£ã€è‰²è°ƒç®€çº¦ï¼Œçª—æˆ·æ˜¯å·¨å¤§çš„é»‘è‰²é¢æ¿ï¼Œåœ¨ä¸‰å±‚é«˜çš„è”æ’æˆ¿å±‹ä¸­æ˜¾å¾—çªå…€ã€‚å½“åœ°è€å±…æ°‘ä¼šæŒ‡ç€å®ƒä»¬è¯´ï¼šâ€œçœ‹ï¼Œè¿™å°±æ˜¯â€˜ç»…å£«åŒ–â€™æ¥äº†ã€‚â€</p>
<p>è¿™ä¸æ˜¯ä¸€ç§ä¸»è§‚æ„Ÿå—ï¼Œè€Œæ­£æˆä¸ºæœºå™¨å­¦ä¹ æ¨¡å‹èƒ½å¤Ÿè¯†åˆ«çš„è§†è§‰æ¨¡å¼ã€‚ä¸€é¡¹å‘è¡¨äºã€ŠPLoS Oneã€‹çš„æœ€æ–°ç ”ç©¶ï¼Œå°è¯•æ•™AIè¯†åˆ«ç¾å›½åŸå¸‚ä¸­ä¸€ç§ç‰¹å®šçš„ç»…å£«åŒ–ç°è±¡â€”â€”â€œæ–°å»ºç»…å£«åŒ–â€ã€‚ä¸ä»¥å¾€ç ”ç©¶æœ€å¤§çš„ä¸åŒåœ¨äºï¼Œè¿™æ¬¡å®šä¹‰â€œä½•ä¸ºç»…å£«åŒ–ç‰¹å¾â€çš„ï¼Œä¸æ˜¯å­¦è€…ï¼Œè€Œæ˜¯ç”Ÿæ´»åœ¨å…¶ä¸­çš„ç¤¾åŒºå±…æ°‘ã€‚</p>
<h2 data-id="heading-0"><strong>é—®é¢˜ï¼šåœ°å›¾ä¸Šçš„ç›²åŒº</strong></h2>
<p>â€œç»…å£«åŒ–â€å¹¶éæ–°è¯ï¼Œå®ƒæè¿°çš„æ˜¯ä¸€ä¸ªç¤¾åŒºå› å¯Œè£•é˜¶å±‚è¿å…¥è€Œå‘ç”Ÿçš„å¿«é€Ÿå˜è¿ã€‚ä½†ä¼ ç»Ÿç ”ç©¶å¤šä¾èµ–äººå£æ™®æŸ¥æ•°æ®ï¼ˆå¦‚æ”¶å…¥ã€æ•™è‚²æ°´å¹³ï¼‰æˆ–å¸‚æ”¿è®¸å¯è®°å½•æ¥æç»˜å…¶å›¾æ™¯ã€‚è¿™äº›æ•°æ®èƒ½å‘Šè¯‰æˆ‘ä»¬â€œè°æ¥äº†â€ã€â€œæ‰¹äº†ä»€ä¹ˆé¡¹ç›®â€ï¼Œå´éš¾ä»¥å›ç­”ä¸€ä¸ªæ›´ç›´è§‚çš„é—®é¢˜ï¼šç»…å£«åŒ–åœ¨è¡—æ™¯ä¸­ç©¶ç«Ÿé•¿ä»€ä¹ˆæ ·ï¼Ÿ</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œç»…å£«åŒ–çš„â€œé•¿ç›¸â€å› åœ°è€Œå¼‚ã€‚åœ¨è´¹åŸï¼Œæ¶‚é¸¦å¯èƒ½æ˜¯ç¤¾åŒºè‰ºæœ¯çš„è¡¨è¾¾ï¼Œè€Œéè¡°è´¥çš„è±¡å¾ï¼›å³ä¾¿æ˜¯å¯Œè£•ç¤¾åŒºï¼Œè·¯è¾¹ä¹Ÿå¯èƒ½æœ‰é›¶æ•£åƒåœ¾ã€‚è‹¥ä»…ç”¨â€œç„•ç„¶ä¸€æ–°â€ã€â€œæ•´æ´ç¾è§‚â€è¿™ç±»ç¬¼ç»Ÿæ ‡å‡†å»è®­ç»ƒAIï¼Œå¾ˆå¯èƒ½è¯¯è¯»çœŸæ­£çš„ç¤¾åŒºè„‰ç»œï¼Œç”šè‡³å›ºåŒ–å¯¹è´«å›°æˆ–æŠ•èµ„çš„åˆ»æ¿å°è±¡ã€‚</p>
<p>äºæ˜¯ï¼Œç ”ç©¶å›¢é˜Ÿè½¬å‘äº†é‚£äº›æœ€ç†Ÿæ‚‰è¡—é“æ¯å¯¸å˜åŒ–çš„äººã€‚</p>
<h2 data-id="heading-1"><strong>æ–¹æ³•ï¼šè®©ç¤¾åŒºå®šä¹‰â€œç‰¹å¾â€</strong></h2>
<p>ç ”ç©¶æ²¡æœ‰ä»ç†è®ºæˆ–æ—¢æœ‰æ–‡çŒ®å‡ºå‘ï¼Œè€Œæ˜¯èµ°è¿›äº†è´¹åŸçš„ä¸‰ä¸ªè¡—åŒºï¼šPort Richmond, Tacony, å’Œ Norris Squareã€‚åœ¨è¿™é‡Œï¼Œä»–ä»¬ç»„ç»‡äº†ç„¦ç‚¹å°ç»„ï¼Œå‚ä¸è€…å¤šæ˜¯å±…ä½æ•°åå¹´çš„ä¸­å¹´å¥³æ€§ï¼Œå¥¹ä»¬äº²æ‰‹æ‰“é€ ç¤¾åŒºèŠ±å›­ï¼Œå®ˆæŠ¤é—²ç½®ç©ºåœ°ï¼Œäº²çœ¼ç›®ç¹äº†è¡—è§’çš„æ¯ä¸€æ¬¡å˜è¿ã€‚</p>
<p>è®¨è®ºä¸­ï¼Œâ€œæ–°å»ºç»…å£«åŒ–â€æˆä¸ºå…±è¯†ã€‚ä¸â€œç»å…¸ç»…å£«åŒ–â€ç”±ä¸ªä½“ä¿®ç¼®å†å²ä½å®…ä¸åŒï¼Œâ€œæ–°å»ºç»…å£«åŒ–â€æ˜¯å¼€å‘å•†ä¸»å¯¼çš„å¤§è§„æ¨¡å»ºè®¾ã€‚ç”¨å±…æ°‘çš„è¯è¯´ï¼Œè¿™äº›æ–°æ¥¼å°±åƒâ€œæ‰çœ¼çš„æ‹‡æŒ‡â€ï¼Œä¸å‘¨å›´ç¯å¢ƒæˆªç„¶ä¸åŒã€‚</p>
<p>ä»å±…æ°‘å…·ä½“æŒ‡è®¤çš„è¡—é“å’Œåœ°æ ‡å‡ºå‘ï¼Œç ”ç©¶å›¢é˜Ÿç»“åˆå†å²è¡—æ™¯å›¾åƒï¼Œå°†â€œæ–¹ç›’å­é€ å‹â€ã€â€œé»‘è‰²çª—æ¡†â€ã€â€œå‡¸çª—â€ã€â€œæ··åˆå»ºæâ€ç­‰å…·ä½“å»ºç­‘è¯­è¨€ï¼Œæç‚¼ä¸ºä¸€ä»½è¯†åˆ«æ¸…å•ï¼ˆå¯¹åº”è®ºæ–‡ä¸­è¡¨1ï¼‰ã€‚è¿™ä»½æ¸…å•ï¼Œæˆäº†AIå­¦ä¹ çš„â€œæ•™æâ€ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c308f26ade3648cdb9501517b4c0a9c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209831&amp;x-signature=y%2BwqL5IKVEjkS9qs%2FxLIHANU%2F%2F4%3D" alt="screenshot_2026-02-06_15-36-17.png" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>è®­ç»ƒï¼šç»™AIä¸€åŒâ€œç¤¾åŒºä¹‹çœ¼â€</strong></h2>
<p>æœ‰äº†â€œæ•™æâ€ï¼Œä¸‹ä¸€æ­¥æ˜¯å‡†å¤‡â€œä¹ é¢˜é›†â€ã€‚å›¢é˜Ÿä»è°·æ­Œè¡—æ™¯ä¸­è·å–äº†è´¹åŸ2009-2013å¹´å’Œ2017-2021å¹´ä¸¤ä¸ªæ—¶é—´æ®µçš„170å¤šä¸‡å¼ å…¨æ™¯å›¾åƒã€‚ç»è¿‡å¤æ‚çš„ç©ºé—´ã€æ—¶é—´å’Œè¯­ä¹‰åˆ†å‰²è¿‡æ»¤ï¼ˆæ¯”å¦‚å‰”é™¤è½¦è¾†ã€æ¤è¢«é®æŒ¡è¿‡å¤šçš„å›¾ç‰‡ï¼‰ï¼Œä»–ä»¬æœ€ç»ˆæ‰‹åŠ¨å®¡æ ¸å‡º1040ç»„æˆå¯¹çš„â€œå‰åâ€å›¾åƒï¼Œå¹¶ä¾æ®ç¤¾åŒºåè®®æ‰“ä¸Šâ€œå˜åŒ–â€ï¼ˆå³ç»…å£«åŒ–ï¼‰æˆ–â€œæ— å˜åŒ–â€çš„æ ‡ç­¾ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbc9f57823a046c8824d6f7535279238~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209831&amp;x-signature=YCUoxRT5lHTSJrGrjt7Q9mE0oGE%3D" alt="screenshot_2026-02-06_15-37-07.png" loading="lazy"/></p>
<p>è¿™äº›å›¾åƒå¯¹æ¸…æ™°åœ°å±•ç¤ºäº†å˜åŒ–ï¼šä»ç©ºåœ°æˆ–æ—§å®…ï¼Œå˜ä¸ºå…·æœ‰ç°ä»£ç®€çº¦é£æ ¼ã€ä¸‰å±‚é«˜ã€æè´¨å¯¹æ¯”é²œæ˜çš„æ–°å»ºç­‘ï¼ˆå¦‚å›¾2ç¤ºä¾‹ï¼‰ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dbae095f5b241a2a33a0a2b297f6beb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209831&amp;x-signature=f%2BwP%2B5CcN8wmqtkCjaA%2FEP34COE%3D" alt="screenshot_2026-02-06_15-37-57.png" loading="lazy"/></p>
<p>éšåï¼Œä»–ä»¬é‡‡ç”¨äº†ä¸€ä¸ªåä¸ºSiamese ResNet-50çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆå…¶æ¶æ„è§å›¾3ï¼‰ã€‚è¿™ä¸ªæ¨¡å‹çš„æ ¸å¿ƒä»»åŠ¡æ˜¯æ¯”è¾ƒåŒä¸€åœ°ç‚¹çš„æ–°æ—§ä¸¤å¼ å›¾ç‰‡ï¼Œåˆ¤æ–­å…¶é—´æ˜¯å¦å‘ç”Ÿäº†ç¬¦åˆâ€œç¤¾åŒºå®šä¹‰â€çš„æ–°å»ºç»…å£«åŒ–ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abc44832f19a49d0a0869e3b6580df54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209831&amp;x-signature=u95ytBahCVW34ouAqwPFu2NXLWk%3D" alt="screenshot_2026-02-06_15-38-14.png" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>ç»“æœï¼šAIå­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</strong></h2>
<p>æ¨¡å‹çš„è¡¨ç°è¶…å‡ºäº†é¢„æœŸã€‚åœ¨æµ‹è¯•ä¸­ï¼Œå®ƒçš„å‡†ç¡®ç‡å’ŒAUCï¼ˆè¡¡é‡åŒºåˆ†èƒ½åŠ›çš„æŒ‡æ ‡ï¼‰éƒ½è¾¾åˆ°äº†84%ã€‚ç‰¹åˆ«æ˜¯å®ƒçš„â€œå¬å›ç‡â€é«˜è¾¾88%ï¼Œæ„å‘³ç€å®ƒèƒ½æ•æ‰åˆ°ç»å¤§å¤šæ•°çœŸå®çš„ç»…å£«åŒ–æ¡ˆä¾‹ã€‚è¿™è¯æ˜ï¼ŒAIç¡®å®èƒ½ä»å¤æ‚çš„è¡—æ™¯ä¸­ï¼Œå­¦ä¼šè¯†åˆ«é‚£äº›è¢«ç¤¾åŒºå±…æ°‘å…±åŒæŒ‡è®¤çš„ã€å…·æœ‰åœ°åŸŸç‰¹è‰²çš„å»ºç­‘ç‰¹å¾ï¼ˆè¯¦ç»†æ€§èƒ½æŒ‡æ ‡è§è¡¨2ï¼Œåˆ†ç±»ç»“æœè§å›¾5ï¼‰ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bda9250dbbd423280680f1b18f08791~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209831&amp;x-signature=9UgPzKKIomz5optMxtThoVGHH6E%3D" alt="screenshot_2026-02-06_15-38-39.png" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44e484cbe60e412c81348b1cc77bddb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209831&amp;x-signature=ahnCij%2BNOfQmHfhQgVrdxeSkoxg%3D" alt="screenshot_2026-02-06_15-38-57.png" loading="lazy"/></p>
<p>æ›´æœ‰è¶£çš„æ˜¯ä¸å¸‚æ”¿è®¸å¯æ•°æ®çš„å¯¹æ¯”ã€‚å›¢é˜Ÿå°†æ¨¡å‹è¯†åˆ«å‡ºçš„ç‚¹ä½ä¸è´¹åŸæ–°å»ºè®¸å¯æ•°æ®åˆ¶æˆçƒ­åŠ›å›¾ï¼Œä¸¤è€…åœ¨ç©ºé—´åˆ†å¸ƒä¸Šå‘ˆç°å‡ºé«˜åº¦ç›¸ä¼¼çš„è¶‹åŠ¿ï¼šç»…å£«åŒ–æ´»åŠ¨å¯†é›†äºLower North Philadelphiaã€RiverwardsåŠå—è´¹åŸç­‰åŒºåŸŸï¼ˆå¯¹æ¯”ç»“æœè§å›¾4ï¼‰ã€‚è¿™äº¤å‰éªŒè¯äº†æ¨¡å‹å‘ç°çš„å¯ä¿¡åº¦ã€‚å½“ç„¶ï¼Œä¹Ÿå­˜åœ¨å·®å¼‚ï¼šè®¸å¯æ•°æ®æ˜¾ç¤ºæŸäº›å·¥ä¸šåŒºæ”¹é€ æ´»è·ƒï¼Œä½†è¡—æ™¯å›¾åƒå´å› è¿‡å»æ˜¯å°é—­å‚åŒºè€Œç¼ºä¹å†å²å½±åƒï¼›åä¹‹ï¼Œä¸€äº›è§†è§‰ä¸Šç¿»å¤©è¦†åœ°çš„â€œå†…éƒ¨å…¨é¢ç¿»æ–°â€ï¼Œåœ¨è®¸å¯åˆ†ç±»ä¸Šå¯èƒ½ä¸ç®—â€œæ–°å»ºâ€ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bee67271bde049a3b4e1f70a47f6cc89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771209831&amp;x-signature=sVkaFh8BOkRYxBou2jlp1mUIe7g%3D" alt="screenshot_2026-02-06_15-39-45.png" loading="lazy"/></p>
<h2 data-id="heading-4"><strong>åæ€ï¼šæŠ€æœ¯çš„å…‰ä¸å½±</strong></h2>
<p>è¿™é¡¹ç ”ç©¶çš„ä»·å€¼ï¼Œæˆ–è®¸ä¸åœ¨äºåˆ›é€ äº†ä¸€ä¸ªå¤šé«˜çš„å‡†ç¡®ç‡çºªå½•ã€‚å®é™…ä¸Šï¼Œç›¸æ¯”åœ¨ç‹¬æ ‹ä½å®…ä¸ºä¸»çš„æ¸¥å¤ªåè¿›è¡Œçš„ç ”ç©¶ï¼ˆå‡†ç¡®ç‡95.6%ï¼‰ï¼Œåœ¨å»ºç­‘å¯†é›†ã€è§†è§‰å¹²æ‰°å¤šçš„è´¹åŸå–å¾—84%çš„æˆç»©ï¼Œæ›´æ˜¾å¾—çè´µã€‚</p>
<p>å®ƒçœŸæ­£å¯ç¤ºæˆ‘ä»¬çš„æ˜¯æ–¹æ³•è®ºï¼šåœ¨è¿ç”¨â€œé»‘ç®±â€AIå¤„ç†å¤æ‚ç¤¾ä¼šè®®é¢˜æ—¶ï¼Œå°†å®šä¹‰é—®é¢˜çš„æƒåŠ›äº¤è¿˜ç»™åˆ‡èº«ç›¸å…³çš„ç¤¾åŒºï¼Œæ˜¯æ‰“å¼€é€æ˜åº¦å’Œå¯ä¿¡åº¦çš„ä¸€æŠŠé’¥åŒ™ã€‚ è¿™é¿å…äº†ç ”ç©¶è€…çš„ä¸ªäººå®¡ç¾æˆ–åè§è¢«æ— æ„ä¸­ç¼–ç è¿›ç®—æ³•ï¼Œä¹Ÿè®©å†°å†·çš„å›¾åƒè¯†åˆ«ï¼Œæ¥ç»­ä¸Šäº†é²œæ´»çš„åœ°æ–¹æ€§çŸ¥è¯†ã€‚</p>
<p>å½“ç„¶ï¼Œå±€é™åŒæ ·æ˜æ˜¾ã€‚è¡—æ™¯å›¾åƒçš„å¯ç”¨æ€§å—åˆ¶äºæ‹æ‘„æ—¶é—´ã€é®æŒ¡ç‰©ï¼ˆè½¦è¾†ã€è¡Œäººã€å¤©æ¡¥ï¼‰ï¼Œè¿™ä½¿å¾—äº§å‡ºå®Œæ•´ç»†è‡´çš„ç»…å£«åŒ–åœ°å›¾ä»ç„¶å›°éš¾ã€‚AIæ¨¡å‹å¯ä»¥æˆä¸ºä¸€ä¸ªå¼ºå¤§çš„è¡¥å……æˆ–é¢„è­¦å·¥å…·ï¼Œä½†åœ¨æ•°æ®å™ªç‚¹æé«˜çš„å¯†é›†åŸåŒºï¼ŒçŸ­æœŸå†…è¿˜éš¾ä»¥å®Œå…¨å–ä»£ä¼ ç»Ÿçš„è¡Œæ”¿æ•°æ®ã€‚</p>
<h2 data-id="heading-5"><strong>å°¾å£°ï¼šä¸æ­¢äºåœ°å›¾</strong></h2>
<p>æœ€ç»ˆï¼Œè¿™é¡¹ç ”ç©¶ç»˜åˆ¶çš„ä¸ä»…æ˜¯ä¸€å¼ ç»…å£«åŒ–æ½œåŠ›åœ°å›¾ï¼Œæ›´æä¾›äº†ä¸€ç§æ€è€ƒåŸå¸‚å˜è¿çš„æ–°è§†è§’ã€‚å½“åŸå¸‚è§„åˆ’è€…ã€ç¤¾åŒºç»„ç»‡è€…å’Œæ”¿ç­–åˆ¶å®šè€…è¯•å›¾ç†è§£ç»…å£«åŒ–ã€ç¼“è§£å…¶å¸¦æ¥çš„Â displacement ï¼ˆ displacement ï¼‰æ—¶ï¼Œä»–ä»¬éœ€è¦çš„ä¸åªæ˜¯â€œå“ªé‡Œå˜äº†â€ï¼Œæ›´æ˜¯â€œä»€ä¹ˆå˜äº†â€ä»¥åŠâ€œè¿™å¯¹å½“åœ°äººæ„å‘³ç€ä»€ä¹ˆâ€ã€‚</p>
<p>è´¹åŸçš„å®éªŒè¡¨æ˜ï¼Œé€šè¿‡èåˆç¤¾åŒºæ™ºæ…§ä¸æœºå™¨å­¦ä¹ çš„æ•é”ï¼Œæˆ‘ä»¬æˆ–è®¸èƒ½æ›´æ—©åœ°â€œçœ‹è§â€é‚£äº›æ­£åœ¨æ”¹å˜è¡—åŒºçš„åŠ›é‡ï¼Œå¹¶ä»¥æ›´è´´è¿‘åœ¨åœ°æ„Ÿå—çš„æ–¹å¼ï¼Œè¿›è¡Œè®°å½•ã€è®¨è®ºä¸åº”å¯¹ã€‚æŠ€æœ¯ç»ˆç©¶æ˜¯å·¥å…·ï¼Œè€Œå®šä¹‰åŸå¸‚æœªæ¥çš„ï¼Œæ°¸è¿œæ˜¯äººã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 å°è£… Axios å®æˆ˜ï¼šä»åŸºç¡€åˆ°ç”Ÿäº§çº§ï¼Œæ–°æ‰‹ä¹Ÿèƒ½ç§’ä¸Šæ‰‹]]></title>    <link>https://juejin.cn/post/7603574149774049332</link>    <guid>https://juejin.cn/post/7603574149774049332</guid>    <pubDate>2026-02-07T03:16:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603574149774049332" data-draft-id="7603588665567412264" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 å°è£… Axios å®æˆ˜ï¼šä»åŸºç¡€åˆ°ç”Ÿäº§çº§ï¼Œæ–°æ‰‹ä¹Ÿèƒ½ç§’ä¸Šæ‰‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-07T03:16:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/2754702534251820"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 å°è£… Axios å®æˆ˜ï¼šä»åŸºç¡€åˆ°ç”Ÿäº§çº§ï¼Œæ–°æ‰‹ä¹Ÿèƒ½ç§’ä¸Šæ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2754702534251820/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-07T03:16:14.000Z" title="Sat Feb 07 2026 03:16:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue3 é¡¹ç›®å¼€å‘ä¸­ï¼ŒAxios æ˜¯æœ€å¸¸ç”¨çš„ HTTP è¯·æ±‚åº“ï¼Œä½†ç›´æ¥åœ¨ç»„ä»¶ä¸­è£¸å†™ Axios ä¼šå¯¼è‡´ä»£ç å†—ä½™ã€éš¾ä»¥ç»´æŠ¤â€”â€”æ¯”å¦‚æ¯ä¸ªè¯·æ±‚éƒ½è¦å†™é‡å¤çš„ baseURLã€è¯·æ±‚å¤´ã€é”™è¯¯å¤„ç†ï¼Œæ¥å£å˜æ›´æ—¶è¦æ”¹éæ‰€æœ‰ç»„ä»¶ã€‚</p>
<p>è€Œ<strong>åˆç†å°è£… Axios</strong> èƒ½è§£å†³è¿™äº›é—®é¢˜ï¼šç»Ÿä¸€ç®¡ç†è¯·æ±‚é…ç½®ã€å…¨å±€å¤„ç†æ‹¦æˆªå™¨ã€æ ‡å‡†åŒ–é”™è¯¯æç¤ºã€æ”¯æŒå–æ¶ˆé‡å¤è¯·æ±‚â€¦â€¦æ—¢èƒ½æå‡å¼€å‘æ•ˆç‡ï¼Œåˆèƒ½è®©ä»£ç æ›´å¥å£®ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œå°±å¸¦ä½ ä»é›¶å®ç° Vue3 + Vite é¡¹ç›®ä¸­ Axios çš„<strong>ç”Ÿäº§çº§å°è£…</strong>ï¼Œä»åŸºç¡€ç»“æ„åˆ°è¿›é˜¶ä¼˜åŒ–ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰å®Œæ•´ä»£ç ç¤ºä¾‹ï¼Œç›´æ¥å¤åˆ¶å°±èƒ½ç”¨ï¼é€‚é… Vue3 ç»„åˆå¼ APIï¼ˆ
</p><h2 data-id="heading-0">ä¸€ã€å‰ç½®å‡†å¤‡ï¼šå®‰è£… Axios</h2>
<p>é¦–å…ˆç¡®ä¿ä½ çš„ Vue3 é¡¹ç›®å·²æ­å»ºå®Œæˆï¼ˆæ¨èç”¨ Vite æ­å»ºï¼‰ï¼Œç„¶åå®‰è£… Axiosï¼ŒTS é¡¹ç›®éœ€é¢å¤–å®‰è£…ç±»å‹å£°æ˜ï¼š</p>
<pre><code class="hljs language-js" lang="js"># å®‰è£…æ ¸å¿ƒ <span class="hljs-title class_">Axios</span> åº“
npm install axios
# å¯é€‰ï¼š<span class="hljs-variable constant_">TS</span> é¡¹ç›®å¿…è£…ï¼ˆæä¾›ç±»å‹æç¤ºï¼Œé¿å…æŠ¥é”™ï¼‰
npm install @types/axios --save-dev
</code></pre>
<h2 data-id="heading-1">äºŒã€åŸºç¡€ç‰ˆå°è£…ï¼šæ ¸å¿ƒç»“æ„ï¼ˆæ–°æ‰‹å‹å¥½ï¼‰</h2>
<p>åŸºç¡€ç‰ˆå°è£…èšç„¦ã€Œç»Ÿä¸€é…ç½® + ç®€åŒ–è°ƒç”¨ã€ï¼Œé€‚åˆå°å‹é¡¹ç›®æˆ–æ–°æ‰‹å…¥é—¨ï¼Œæ ¸å¿ƒå®ç° 3 ä¸ªåŠŸèƒ½ï¼šç»Ÿä¸€ baseURLã€å…¨å±€è¯·æ±‚/å“åº”æ‹¦æˆªã€ç®€åŒ–è¯·æ±‚è°ƒç”¨ã€‚</p>
<p>å°è£…æ­¥éª¤ï¼šåœ¨ src ç›®å½•ä¸‹æ–°å»º <code>utils/request.js</code>ï¼ˆJS é¡¹ç›®ï¼‰æˆ– <code>utils/request.ts</code>ï¼ˆTS é¡¹ç›®ï¼‰ï¼Œä½œä¸º Axios å°è£…çš„æ ¸å¿ƒæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-2">2.1 JS ç‰ˆæœ¬ï¼ˆåŸºç¡€ç‰ˆï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/utils/request.js</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span> <span class="hljs-comment">// å¯é€‰ï¼šç»“åˆUIåº“åšé”™è¯¯æç¤ºï¼ˆæ¨èï¼‰</span>

<span class="hljs-comment">// 1. åˆ›å»º Axios å®ä¾‹ï¼Œé…ç½®åŸºç¡€å‚æ•°</span>
<span class="hljs-keyword">const</span> service = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_BASE_URL</span>, <span class="hljs-comment">// ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼ŒåŒºåˆ†å¼€å‘/ç”Ÿäº§ï¼‰</span>
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>, <span class="hljs-comment">// è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šmsï¼‰ï¼Œè¶…è¿‡åˆ™ä¸­æ–­è¯·æ±‚</span>
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=utf-8'</span> <span class="hljs-comment">// é»˜è®¤è¯·æ±‚å¤´</span>
  }
})

<span class="hljs-comment">// 2. è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆè¯·æ±‚å‘é€å‰æ‰§è¡Œï¼‰</span>
<span class="hljs-comment">// ä½œç”¨ï¼šæ·»åŠ tokenã€ç»Ÿä¸€ä¿®æ”¹è¯·æ±‚å‚æ•°æ ¼å¼ç­‰</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-comment">// ç¤ºä¾‹ï¼šæ·»åŠ tokenï¼ˆç™»å½•åå­˜å‚¨åœ¨localStorageï¼Œæ ¹æ®å®é™…é¡¹ç›®è°ƒæ•´ï¼‰</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
    <span class="hljs-keyword">if</span> (token) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span> <span class="hljs-comment">// æ‹¼æ¥tokenæ ¼å¼ï¼ˆåç«¯çº¦å®šï¼‰</span>
    }
    <span class="hljs-keyword">return</span> config <span class="hljs-comment">// å¿…é¡»è¿”å›configï¼Œå¦åˆ™è¯·æ±‚ä¼šä¸­æ–­</span>
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-comment">// è¯·æ±‚å‘é€å¤±è´¥ï¼ˆå¦‚ç½‘ç»œä¸­æ–­ã€å‚æ•°é”™è¯¯ï¼‰</span>
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–å‚æ•°'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error) <span class="hljs-comment">// æŠ›å‡ºé”™è¯¯ï¼Œä¾›ç»„ä»¶æ•è·å¤„ç†</span>
  }
)

<span class="hljs-comment">// 3. å“åº”æ‹¦æˆªå™¨ï¼ˆè¯·æ±‚è¿”å›åæ‰§è¡Œï¼Œå…ˆäºç»„ä»¶æ¥æ”¶ï¼‰</span>
<span class="hljs-comment">// ä½œç”¨ï¼šç»Ÿä¸€å¤„ç†å“åº”æ•°æ®ã€æ‹¦æˆªé”™è¯¯ï¼ˆå¦‚tokenè¿‡æœŸã€æ¥å£æŠ¥é”™ï¼‰</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
    <span class="hljs-comment">// åªè¿”å›å“åº”ä½“ä¸­çš„dataï¼ˆå¤šæ•°åç«¯æ¥å£ä¼šåŒ…è£¹ä¸€å±‚code/message/dataï¼‰</span>
    <span class="hljs-keyword">const</span> res = response.<span class="hljs-property">data</span>

    <span class="hljs-comment">// ç¤ºä¾‹ï¼šæ ¹æ®åç«¯çº¦å®šçš„codeåˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸï¼ˆå¸¸è§çº¦å®šï¼š200=æˆåŠŸï¼‰</span>
    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
      <span class="hljs-comment">// é200çŠ¶æ€ç ï¼Œè§†ä¸ºä¸šåŠ¡é”™è¯¯ï¼ˆå¦‚å‚æ•°é”™è¯¯ã€æƒé™ä¸è¶³ï¼‰</span>
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">message</span> || <span class="hljs-string">'æ¥å£è¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(res.<span class="hljs-property">message</span> || <span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>))
    }
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span> <span class="hljs-comment">// è¿”å›çœŸæ­£çš„ä¸šåŠ¡æ•°æ®ï¼Œç»„ä»¶å¯ç›´æ¥ä½¿ç”¨</span>
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-comment">// å“åº”å¤±è´¥ï¼ˆå¦‚è¶…æ—¶ã€åç«¯æŠ¥é”™ã€404/500çŠ¶æ€ç ï¼‰</span>
    <span class="hljs-keyword">let</span> errorMsg = <span class="hljs-string">'è¯·æ±‚å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜'</span>
    <span class="hljs-comment">// åŒºåˆ†ä¸åŒé”™è¯¯ç±»å‹ï¼Œç»™å‡ºæ›´ç²¾å‡†æç¤º</span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>) {
      <span class="hljs-comment">// æœ‰å“åº”ï¼Œä½†çŠ¶æ€ç é2xxï¼ˆå¦‚401tokenè¿‡æœŸã€404æ¥å£ä¸å­˜åœ¨ã€500åç«¯æŠ¥é”™ï¼‰</span>
      <span class="hljs-keyword">switch</span> (error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
          errorMsg = <span class="hljs-string">'ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>
          <span class="hljs-comment">// é¢å¤–æ“ä½œï¼šæ¸…é™¤è¿‡æœŸtokenï¼Œè·³è½¬åˆ°ç™»å½•é¡µï¼ˆç»“åˆVue Routerï¼‰</span>
          <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
          <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-number">404</span>:
          errorMsg = <span class="hljs-string">'è¯·æ±‚çš„æ¥å£ä¸å­˜åœ¨'</span>
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-number">500</span>:
          errorMsg = <span class="hljs-string">'åç«¯æœåŠ¡å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•'</span>
          <span class="hljs-keyword">break</span>
        <span class="hljs-attr">default</span>:
          errorMsg = error.<span class="hljs-property">response</span>.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span> || errorMsg
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">request</span>) {
      <span class="hljs-comment">// æ— å“åº”ï¼ˆå¦‚ç½‘ç»œä¸­æ–­ã€è¶…æ—¶ï¼‰</span>
      errorMsg = <span class="hljs-string">'ç½‘ç»œå¼‚å¸¸æˆ–è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ'</span>
    }
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(errorMsg)
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  }
)

<span class="hljs-comment">// 4. å°è£…å¸¸ç”¨è¯·æ±‚æ–¹æ³•ï¼ˆget/post/put/deleteï¼‰ï¼Œç®€åŒ–ç»„ä»¶è°ƒç”¨</span>
<span class="hljs-comment">// getè¯·æ±‚ï¼šparamsä¼ å‚ï¼ˆæ‹¼æ¥åœ¨URLåï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">get</span> = (<span class="hljs-params">url, params = {}</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">service</span>({
    url,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'get'</span>,
    params
  })
}

<span class="hljs-comment">// postè¯·æ±‚ï¼šdataä¼ å‚ï¼ˆè¯·æ±‚ä½“ä¸­ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">post</span> = (<span class="hljs-params">url, data = {}</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">service</span>({
    url,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'post'</span>,
    data
  })
}

<span class="hljs-comment">// putè¯·æ±‚ï¼ˆä¿®æ”¹æ•°æ®ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">put</span> = (<span class="hljs-params">url, data = {}</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">service</span>({
    url,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'put'</span>,
    data
  })
}

<span class="hljs-comment">// deleteè¯·æ±‚ï¼ˆåˆ é™¤æ•°æ®ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">del</span> = (<span class="hljs-params">url, params = {}</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">service</span>({
    url,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'delete'</span>,
    params
  })
}

<span class="hljs-comment">// å¯¼å‡ºAxioså®ä¾‹ï¼ˆç‰¹æ®Šåœºæ™¯å¯ç›´æ¥ä½¿ç”¨ï¼Œå¦‚å–æ¶ˆè¯·æ±‚ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> service
</code></pre>
<h3 data-id="heading-3">2.2 TS ç‰ˆæœ¬ï¼ˆåŸºç¡€ç‰ˆï¼Œè¡¥å……ç±»å‹æç¤ºï¼‰</h3>
<p>TS é¡¹ç›®éœ€æ·»åŠ ç±»å‹å£°æ˜ï¼Œé¿å…ç±»å‹æŠ¥é”™ï¼Œæå‡å¼€å‘ä½“éªŒï¼Œæ ¸å¿ƒä¿®æ”¹çš„æ˜¯ã€Œè¯·æ±‚/å“åº”ç±»å‹ã€å’Œã€Œå‚æ•°ç±»å‹ã€ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/utils/request.ts</span>
<span class="hljs-keyword">import</span> axios, { <span class="hljs-title class_">AxiosRequestConfig</span>, <span class="hljs-title class_">AxiosResponse</span>, <span class="hljs-title class_">AxiosError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>

<span class="hljs-comment">// å®šä¹‰åç«¯å“åº”çš„ç»Ÿä¸€æ ¼å¼ï¼ˆæ ¹æ®ä½ çš„åç«¯æ¥å£è°ƒæ•´ï¼‰</span>
interface <span class="hljs-title class_">ResponseData</span>&lt;T = any&gt; {
  <span class="hljs-attr">code</span>: number
  <span class="hljs-attr">message</span>: string
  <span class="hljs-attr">data</span>: T
}

<span class="hljs-comment">// 1. åˆ›å»ºAxioså®ä¾‹</span>
<span class="hljs-keyword">const</span> service = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_BASE_URL</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=utf-8'</span>
  }
})

<span class="hljs-comment">// 2. è¯·æ±‚æ‹¦æˆªå™¨</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config: AxiosRequestConfig</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
    <span class="hljs-keyword">if</span> (token &amp;&amp; config.<span class="hljs-property">headers</span>) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>
    }
    <span class="hljs-keyword">return</span> config
  },
  <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–å‚æ•°'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  }
)

<span class="hljs-comment">// 3. å“åº”æ‹¦æˆªå™¨</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response: AxiosResponse&lt;ResponseData&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> res = response.<span class="hljs-property">data</span>
    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">message</span> || <span class="hljs-string">'æ¥å£è¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(res.<span class="hljs-property">message</span> || <span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>))
    }
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span> <span class="hljs-comment">// è¿”å›ä¸šåŠ¡æ•°æ®ï¼Œè‡ªåŠ¨æ¨å¯¼ç±»å‹</span>
  },
  <span class="hljs-function">(<span class="hljs-params">error: AxiosError&lt;ResponseData&gt;</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> errorMsg = <span class="hljs-string">'è¯·æ±‚å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜'</span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>) {
      <span class="hljs-keyword">const</span> status = error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>
      <span class="hljs-keyword">switch</span> (status) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
          errorMsg = <span class="hljs-string">'ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>
          <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
          <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-number">404</span>:
          errorMsg = <span class="hljs-string">'è¯·æ±‚çš„æ¥å£ä¸å­˜åœ¨'</span>
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-number">500</span>:
          errorMsg = <span class="hljs-string">'åç«¯æœåŠ¡å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•'</span>
          <span class="hljs-keyword">break</span>
        <span class="hljs-attr">default</span>:
          errorMsg = error.<span class="hljs-property">response</span>.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span> || errorMsg
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">request</span>) {
      errorMsg = <span class="hljs-string">'ç½‘ç»œå¼‚å¸¸æˆ–è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ'</span>
    }
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(errorMsg)
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  }
)

<span class="hljs-comment">// 4. å°è£…è¯·æ±‚æ–¹æ³•ï¼Œæ·»åŠ ç±»å‹å£°æ˜</span>
<span class="hljs-comment">// getè¯·æ±‚</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> get = &lt;T = any&gt;(<span class="hljs-attr">url</span>: string, params?: <span class="hljs-title class_">Record</span>&lt;string, any&gt;, config?: <span class="hljs-title class_">AxiosRequestConfig</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">service</span>({
    url,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'get'</span>,
    params,
    ...config
  })
}

<span class="hljs-comment">// postè¯·æ±‚</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> post = &lt;T = any&gt;(<span class="hljs-attr">url</span>: string, data?: <span class="hljs-title class_">Record</span>&lt;string, any&gt;, config?: <span class="hljs-title class_">AxiosRequestConfig</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">service</span>({
    url,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'post'</span>,
    data,
    ...config
  })
}

<span class="hljs-comment">// putè¯·æ±‚</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> put = &lt;T = any&gt;(<span class="hljs-attr">url</span>: string, data?: <span class="hljs-title class_">Record</span>&lt;string, any&gt;, config?: <span class="hljs-title class_">AxiosRequestConfig</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">service</span>({
    url,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'put'</span>,
    data,
    ...config
  })
}

<span class="hljs-comment">// deleteè¯·æ±‚</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> del = &lt;T = any&gt;(<span class="hljs-attr">url</span>: string, params?: <span class="hljs-title class_">Record</span>&lt;string, any&gt;, config?: <span class="hljs-title class_">AxiosRequestConfig</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">service</span>({
    url,
    <span class="hljs-attr">method</span>: <span class="hljs-string">'delete'</span>,
    params,
    ...config
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> service
</code></pre>
<h3 data-id="heading-4">2.3 ç¯å¢ƒå˜é‡é…ç½®ï¼ˆå…³é”®æ­¥éª¤ï¼‰</h3>
<p>ä¸Šé¢å°è£…ä¸­ç”¨åˆ°çš„<code>import.meta.env.VITE_API_BASE_URL</code>ï¼Œæ˜¯ Vite çš„ç¯å¢ƒå˜é‡ï¼Œç”¨äºåŒºåˆ†ã€Œå¼€å‘ç¯å¢ƒã€å’Œã€Œç”Ÿäº§ç¯å¢ƒã€çš„æ¥å£åœ°å€ï¼Œé¿å…æ‰‹åŠ¨ä¿®æ”¹ã€‚</p>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º 2 ä¸ªæ–‡ä»¶ï¼š<code>.env.development</code>ï¼ˆå¼€å‘ç¯å¢ƒï¼‰å’Œ <code>.env.production</code>ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"># .<span class="hljs-property">env</span>.<span class="hljs-property">development</span>ï¼ˆå¼€å‘ç¯å¢ƒï¼Œnpm run dev æ—¶ç”Ÿæ•ˆï¼‰
<span class="hljs-variable constant_">VITE_API_BASE_URL</span> = <span class="hljs-string">'http://localhost:3000/api'</span> # æœ¬åœ°åç«¯æ¥å£åœ°å€

# .<span class="hljs-property">env</span>.<span class="hljs-property">production</span>ï¼ˆç”Ÿäº§ç¯å¢ƒï¼Œnpm run build æ—¶ç”Ÿæ•ˆï¼‰
<span class="hljs-variable constant_">VITE_API_BASE_URL</span> = <span class="hljs-string">'https://api.yourdomain.com'</span> # çº¿ä¸Šåç«¯æ¥å£åœ°å€
</code></pre>
<p>æ³¨æ„ï¼šVite ç¯å¢ƒå˜é‡å¿…é¡»ä»¥<code>VITE_</code> å¼€å¤´ï¼Œå¦åˆ™æ— æ³•è¯»å–ã€‚</p>
<h3 data-id="heading-5">2.4 ç»„ä»¶ä¸­å¦‚ä½•ä½¿ç”¨ï¼ˆç®€åŒ–è°ƒç”¨ï¼‰</h3>
<p>å°è£…å®Œæˆåï¼Œåœ¨ Vue3 ç»„ä»¶ï¼ˆæ”¯æŒ 
</p><pre><code class="hljs language-js" lang="js">&lt;script setup&gt;
<span class="hljs-comment">// å¯¼å…¥å°è£…å¥½çš„è¯·æ±‚æ–¹æ³•</span>
<span class="hljs-keyword">import</span> { get, post } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>
<span class="hljs-keyword">import</span> { ref, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> userList = <span class="hljs-title function_">ref</span>([])

<span class="hljs-comment">// 1. getè¯·æ±‚ï¼ˆè·å–ç”¨æˆ·åˆ—è¡¨ï¼Œparamsä¼ å‚ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// ç›´æ¥è°ƒç”¨ï¼Œæ— éœ€å†™baseURLã€è¯·æ±‚å¤´</span>
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">get</span>(<span class="hljs-string">'/user/list'</span>, { <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">size</span>: <span class="hljs-number">10</span> })
    userList.<span class="hljs-property">value</span> = res <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨å“åº”æ•°æ®ï¼ˆå·²è¿‡æ»¤å¤–å±‚code/messageï¼‰</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// å¯é€‰ï¼šç»„ä»¶å†…å•ç‹¬å¤„ç†é”™è¯¯ï¼ˆå…¨å±€å·²å¤„ç†è¿‡ï¼Œè¿™é‡Œå¯çœç•¥ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥ï¼š'</span>, error)
  }
}

<span class="hljs-comment">// 2. postè¯·æ±‚ï¼ˆæäº¤è¡¨å•ï¼Œdataä¼ å‚ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitForm</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">formData</span>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">post</span>(<span class="hljs-string">'/user/add'</span>, formData)
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'æäº¤æˆåŠŸ'</span>)
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// æ— éœ€é¢å¤–æç¤ºï¼Œå…¨å±€å“åº”æ‹¦æˆªå™¨å·²åšé”™è¯¯æç¤º</span>
  }
}

<span class="hljs-comment">// é¡µé¢æŒ‚è½½æ—¶è°ƒç”¨getè¯·æ±‚</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">getUserList</span>()
})
&lt;/script&gt;
</code></pre>
<p>å¯¹æ¯”è£¸å†™ Axiosï¼Œå°è£…åçš„è°ƒç”¨æ›´ç®€æ´ï¼Œä¸”æ‰€æœ‰è¯·æ±‚çš„é…ç½®ã€é”™è¯¯å¤„ç†éƒ½ç»Ÿä¸€ç®¡ç†ï¼Œåç»­ä¿®æ”¹æ¥å£åœ°å€ã€token æ ¼å¼ï¼Œåªéœ€æ”¹ <code>request.js/ts</code> ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€è¿›é˜¶ç‰ˆå°è£…ï¼šç”Ÿäº§çº§ä¼˜åŒ–ï¼ˆå¿…çœ‹ï¼‰</h2>
<p>åŸºç¡€ç‰ˆå°è£…èƒ½æ»¡è¶³å°å‹é¡¹ç›®ï¼Œä½†åœ¨ä¸­å¤§å‹é¡¹ç›®ä¸­ï¼Œè¿˜éœ€è¦è¡¥å……ã€Œå–æ¶ˆé‡å¤è¯·æ±‚ã€è¯·æ±‚loadingã€æ¥å£åŠ å¯†ã€å¼‚å¸¸é‡è¯•ã€ç­‰åŠŸèƒ½ï¼Œè®©å°è£…æ›´å¥å£®ã€æ›´è´´åˆç”Ÿäº§éœ€æ±‚ã€‚</p>
<h3 data-id="heading-7">3.1 ä¼˜åŒ–1ï¼šå–æ¶ˆé‡å¤è¯·æ±‚ï¼ˆé¿å…æ¥å£å†—ä½™ï¼‰</h3>
<p>åœºæ™¯ï¼šç”¨æˆ·å¿«é€Ÿç‚¹å‡»ä¸¤æ¬¡æŒ‰é’®ï¼Œä¼šå‘èµ·ä¸¤æ¬¡ç›¸åŒçš„è¯·æ±‚ï¼ˆå¦‚æäº¤è¡¨å•ï¼‰ï¼Œå¯¼è‡´åç«¯é‡å¤å¤„ç†ã€‚è§£å†³æ–¹æ¡ˆï¼šç”¨ Axios çš„ CancelTokenï¼ˆAxios 0.xï¼‰æˆ– AbortControllerï¼ˆAxios 1.x+ï¼‰å–æ¶ˆé‡å¤è¯·æ±‚ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ Axios 1.x+ ç‰ˆæœ¬ï¼ˆå½“å‰æœ€æ–°ç‰ˆï¼‰çš„å®ç°æ–¹å¼ï¼ˆAbortController æ›´è§„èŒƒï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/utils/request.jsï¼ˆä»…ä¿®æ”¹æ–°å¢éƒ¨åˆ†ï¼Œå…¶ä½™ä»£ç ä¸å˜ï¼‰</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>

<span class="hljs-comment">// å­˜å‚¨æ­£åœ¨è¯·æ±‚çš„æ¥å£ï¼ˆkeyï¼šè¯·æ±‚æ ‡è¯†ï¼Œvalueï¼šAbortControllerå®ä¾‹ï¼‰</span>
<span class="hljs-keyword">const</span> pendingRequests = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()

<span class="hljs-comment">// ç”Ÿæˆè¯·æ±‚æ ‡è¯†ï¼ˆurl + method + å‚æ•°ï¼Œç¡®ä¿å”¯ä¸€ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">generateRequestKey</span> = (<span class="hljs-params">config</span>) =&gt; {
  <span class="hljs-keyword">const</span> { url, method, params, data } = config
  <span class="hljs-comment">// åºåˆ—åŒ–å‚æ•°ï¼Œé¿å…ç›¸åŒè¯·æ±‚å› å‚æ•°é¡ºåºä¸åŒè¢«è¯¯åˆ¤ä¸ºä¸åŒè¯·æ±‚</span>
  <span class="hljs-keyword">const</span> paramsStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(params || {})
  <span class="hljs-keyword">const</span> dataStr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data || {})
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${url}</span>-<span class="hljs-subst">${method}</span>-<span class="hljs-subst">${paramsStr}</span>-<span class="hljs-subst">${dataStr}</span>`</span>
}

<span class="hljs-comment">// å–æ¶ˆé‡å¤è¯·æ±‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">cancelPendingRequest</span> = (<span class="hljs-params">config</span>) =&gt; {
  <span class="hljs-keyword">const</span> requestKey = <span class="hljs-title function_">generateRequestKey</span>(config)
  <span class="hljs-comment">// å¦‚æœæœ‰é‡å¤è¯·æ±‚ï¼Œå–æ¶ˆä¹‹å‰çš„</span>
  <span class="hljs-keyword">if</span> (pendingRequests.<span class="hljs-title function_">has</span>(requestKey)) {
    <span class="hljs-keyword">const</span> controller = pendingRequests.<span class="hljs-title function_">get</span>(requestKey)
    controller.<span class="hljs-title function_">abort</span>() <span class="hljs-comment">// å–æ¶ˆè¯·æ±‚</span>
    pendingRequests.<span class="hljs-title function_">delete</span>(requestKey) <span class="hljs-comment">// ç§»é™¤å–æ¶ˆçš„è¯·æ±‚</span>
  }
}

<span class="hljs-comment">// 1. åˆ›å»ºAxioså®ä¾‹ï¼ˆæ–°å¢signalé…ç½®ï¼‰</span>
<span class="hljs-keyword">const</span> service = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_BASE_URL</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=utf-8'</span>
  }
})

<span class="hljs-comment">// 2. è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆä¿®æ”¹ï¼šæ·»åŠ å–æ¶ˆé‡å¤è¯·æ±‚é€»è¾‘ï¼‰</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-comment">// å–æ¶ˆé‡å¤è¯·æ±‚ï¼ˆå‘èµ·å½“å‰è¯·æ±‚å‰ï¼Œå–æ¶ˆä¹‹å‰ç›¸åŒçš„è¯·æ±‚ï¼‰</span>
    <span class="hljs-title function_">cancelPendingRequest</span>(config)
    <span class="hljs-comment">// åˆ›å»ºAbortControllerå®ä¾‹ï¼Œç”¨äºå–æ¶ˆè¯·æ±‚</span>
    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>()
    config.<span class="hljs-property">signal</span> = controller.<span class="hljs-property">signal</span>
    <span class="hljs-comment">// å­˜å‚¨å½“å‰è¯·æ±‚</span>
    <span class="hljs-keyword">const</span> requestKey = <span class="hljs-title function_">generateRequestKey</span>(config)
    pendingRequests.<span class="hljs-title function_">set</span>(requestKey, controller)
    
    <span class="hljs-comment">// æ·»åŠ tokenï¼ˆåŸæœ‰é€»è¾‘ä¸å˜ï¼‰</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
    <span class="hljs-keyword">if</span> (token) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>
    }
    <span class="hljs-keyword">return</span> config
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–å‚æ•°'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  }
)

<span class="hljs-comment">// 3. å“åº”æ‹¦æˆªå™¨ï¼ˆä¿®æ”¹ï¼šç§»é™¤å·²å®Œæˆçš„è¯·æ±‚ï¼‰</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> config = response.<span class="hljs-property">config</span>
    <span class="hljs-keyword">const</span> requestKey = <span class="hljs-title function_">generateRequestKey</span>(config)
    pendingRequests.<span class="hljs-title function_">delete</span>(requestKey) <span class="hljs-comment">// è¯·æ±‚å®Œæˆï¼Œç§»é™¤å­˜å‚¨</span>
    
    <span class="hljs-keyword">const</span> res = response.<span class="hljs-property">data</span>
    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">message</span> || <span class="hljs-string">'æ¥å£è¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•'</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(res.<span class="hljs-property">message</span> || <span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>))
    }
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†å–æ¶ˆè¯·æ±‚çš„é”™è¯¯ï¼ˆå•ç‹¬æ•è·ï¼Œä¸æç¤ºç”¨æˆ·ï¼‰</span>
    <span class="hljs-keyword">if</span> (axios.<span class="hljs-title function_">isCancel</span>(error)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å·²å–æ¶ˆï¼š'</span>, error.<span class="hljs-property">message</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¯·æ±‚å·²å–æ¶ˆ'</span>))
    }
    
    <span class="hljs-comment">// ç§»é™¤å¤±è´¥çš„è¯·æ±‚</span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">config</span>) {
      <span class="hljs-keyword">const</span> requestKey = <span class="hljs-title function_">generateRequestKey</span>(error.<span class="hljs-property">config</span>)
      pendingRequests.<span class="hljs-title function_">delete</span>(requestKey)
    }
    
    <span class="hljs-comment">// åŸæœ‰é”™è¯¯å¤„ç†é€»è¾‘ä¸å˜</span>
    <span class="hljs-keyword">let</span> errorMsg = <span class="hljs-string">'è¯·æ±‚å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜'</span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>) {
      <span class="hljs-comment">// ... åŸæœ‰çŠ¶æ€ç åˆ¤æ–­é€»è¾‘</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">request</span>) {
      errorMsg = <span class="hljs-string">'ç½‘ç»œå¼‚å¸¸æˆ–è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ'</span>
    }
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(errorMsg)
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  }
)

<span class="hljs-comment">// 4. å°è£…è¯·æ±‚æ–¹æ³•ï¼ˆä¸å˜ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">get</span> = (<span class="hljs-params">url, params = {}</span>) =&gt; { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">post</span> = (<span class="hljs-params">url, data = {}</span>) =&gt; { <span class="hljs-comment">/* ... */</span> }
<span class="hljs-comment">// ... å…¶ä½™æ–¹æ³•</span>
</code></pre>
<h3 data-id="heading-8">3.2 ä¼˜åŒ–2ï¼šå…¨å±€è¯·æ±‚ Loadingï¼ˆæå‡äº¤äº’ä½“éªŒï¼‰</h3>
<p>åœºæ™¯ï¼šè¯·æ±‚è€—æ—¶è¾ƒé•¿æ—¶ï¼Œç”¨æˆ·ä¸çŸ¥é“æ˜¯å¦åœ¨åŠ è½½ï¼Œå®¹æ˜“é‡å¤ç‚¹å‡»ã€‚è§£å†³æ–¹æ¡ˆï¼šæ·»åŠ å…¨å±€ Loadingï¼Œæ‰€æœ‰è¯·æ±‚å‘èµ·æ—¶æ˜¾ç¤º Loadingï¼Œå…¨éƒ¨è¯·æ±‚å®Œæˆåéšè—ã€‚</p>
<p>ç»“åˆ Element Plus çš„ ElLoading å®ç°ï¼ˆéœ€å®‰è£… Element Plusï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/utils/request.jsï¼ˆæ–°å¢Loadingç›¸å…³é€»è¾‘ï¼‰</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span>, <span class="hljs-title class_">ElLoading</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>

<span class="hljs-comment">// æ–°å¢ï¼šLoadingå®ä¾‹å’Œè¯·æ±‚è®¡æ•°</span>
<span class="hljs-keyword">let</span> loadingInstance = <span class="hljs-literal">null</span> <span class="hljs-comment">// Loadingå®ä¾‹</span>
<span class="hljs-keyword">let</span> requestCount = <span class="hljs-number">0</span> <span class="hljs-comment">// è¯·æ±‚è®¡æ•°å™¨ï¼ˆé¿å…å¤šä¸ªè¯·æ±‚é‡å¤æ˜¾ç¤º/éšè—Loadingï¼‰</span>

<span class="hljs-comment">// æ˜¾ç¤ºLoading</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">showLoading</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (requestCount === <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// åªæœ‰å½“æ²¡æœ‰è¯·æ±‚æ—¶ï¼Œæ‰æ˜¾ç¤ºLoading</span>
    loadingInstance = <span class="hljs-title class_">ElLoading</span>.<span class="hljs-title function_">service</span>({
      <span class="hljs-attr">lock</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">text</span>: <span class="hljs-string">'åŠ è½½ä¸­...'</span>,
      <span class="hljs-attr">background</span>: <span class="hljs-string">'rgba(0, 0, 0, 0.5)'</span>
    })
  }
  requestCount++
}

<span class="hljs-comment">// éšè—Loading</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">hideLoading</span> = (<span class="hljs-params"/>) =&gt; {
  requestCount--
  <span class="hljs-keyword">if</span> (requestCount === <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// æ‰€æœ‰è¯·æ±‚å®Œæˆåï¼Œæ‰éšè—Loading</span>
    loadingInstance?.<span class="hljs-title function_">close</span>()
  }
}

<span class="hljs-comment">// 1. åˆ›å»ºAxioså®ä¾‹ï¼ˆä¸å˜ï¼‰</span>
<span class="hljs-keyword">const</span> service = axios.<span class="hljs-title function_">create</span>({ <span class="hljs-comment">/* ... */</span> })

<span class="hljs-comment">// 2. è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆæ–°å¢ï¼šæ˜¾ç¤ºLoadingï¼‰</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-title function_">showLoading</span>() <span class="hljs-comment">// å‘èµ·è¯·æ±‚æ—¶æ˜¾ç¤ºLoading</span>
    <span class="hljs-comment">// ... åŸæœ‰å–æ¶ˆé‡å¤è¯·æ±‚ã€æ·»åŠ tokené€»è¾‘</span>
    <span class="hljs-keyword">return</span> config
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-title function_">hideLoading</span>() <span class="hljs-comment">// è¯·æ±‚å¤±è´¥ï¼Œéšè—Loading</span>
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–å‚æ•°'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  }
)

<span class="hljs-comment">// 3. å“åº”æ‹¦æˆªå™¨ï¼ˆæ–°å¢ï¼šéšè—Loadingï¼‰</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
    <span class="hljs-title function_">hideLoading</span>() <span class="hljs-comment">// è¯·æ±‚æˆåŠŸï¼Œéšè—Loading</span>
    <span class="hljs-comment">// ... åŸæœ‰ç§»é™¤é‡å¤è¯·æ±‚ã€å¤„ç†å“åº”é€»è¾‘</span>
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-title function_">hideLoading</span>() <span class="hljs-comment">// å“åº”å¤±è´¥ï¼Œéšè—Loading</span>
    <span class="hljs-comment">// ... åŸæœ‰é”™è¯¯å¤„ç†é€»è¾‘</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  }
)
</code></pre>
<p>æ³¨æ„ï¼šrequestCount è®¡æ•°å™¨æ˜¯å…³é”®ï¼Œé¿å…å¤šä¸ªè¯·æ±‚åŒæ—¶å‘èµ·æ—¶ï¼Œå•ä¸ªè¯·æ±‚å®Œæˆå°±éšè— Loadingã€‚</p>
<h3 data-id="heading-9">3.3 ä¼˜åŒ–3ï¼šæ¥å£æ¨¡å—åŒ–ç®¡ç†ï¼ˆä¸­å¤§å‹é¡¹ç›®å¿…åšï¼‰</h3>
<p>åœºæ™¯ï¼šé¡¹ç›®æ¥å£è¾ƒå¤šæ—¶ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½å†™åœ¨ç»„ä»¶ä¸­ï¼Œä¼šå¯¼è‡´ä»£ç æ··ä¹±ï¼Œåç»­ç»´æŠ¤å›°éš¾ã€‚è§£å†³æ–¹æ¡ˆï¼šå°†æ¥å£æŒ‰æ¨¡å—æ‹†åˆ†ï¼Œç»Ÿä¸€ç®¡ç†åœ¨ <code>api</code> æ–‡ä»¶å¤¹ä¸­ã€‚</p>
<p>æ­¥éª¤ï¼šåœ¨ src ç›®å½•ä¸‹æ–°å»º<code>api</code> æ–‡ä»¶å¤¹ï¼ŒæŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ†æ–‡ä»¶ï¼ˆå¦‚ <code>api/user.js</code>ã€<code>api/goods.js</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/api/user.jsï¼ˆç”¨æˆ·æ¨¡å—æ¥å£ï¼‰</span>
<span class="hljs-keyword">import</span> { get, post, put, del } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>

<span class="hljs-comment">// æ¥å£æ¨¡å—åŒ–å°è£…ï¼Œæ¯ä¸ªæ¥å£å¯¹åº”ä¸€ä¸ªå‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> userApi = {
  <span class="hljs-comment">// è·å–ç”¨æˆ·åˆ—è¡¨</span>
  <span class="hljs-attr">getUserList</span>: <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> <span class="hljs-title function_">get</span>(<span class="hljs-string">'/user/list'</span>, params),
  <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·</span>
  <span class="hljs-attr">addUser</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">post</span>(<span class="hljs-string">'/user/add'</span>, data),
  <span class="hljs-comment">// ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span>
  <span class="hljs-attr">editUser</span>: <span class="hljs-function">(<span class="hljs-params">id, data</span>) =&gt;</span> <span class="hljs-title function_">put</span>(<span class="hljs-string">`/user/<span class="hljs-subst">${id}</span>`</span>, data),
  <span class="hljs-comment">// åˆ é™¤ç”¨æˆ·</span>
  <span class="hljs-attr">deleteUser</span>: <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> <span class="hljs-title function_">del</span>(<span class="hljs-string">'/user/delete'</span>, { id }),
  <span class="hljs-comment">// ç”¨æˆ·ç™»å½•</span>
  <span class="hljs-attr">login</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-title function_">post</span>(<span class="hljs-string">'/user/login'</span>, data)
}

<span class="hljs-comment">// src/api/goods.jsï¼ˆå•†å“æ¨¡å—æ¥å£ï¼‰</span>
<span class="hljs-keyword">import</span> { get, post } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> goodsApi = {
  <span class="hljs-comment">// è·å–å•†å“è¯¦æƒ…</span>
  <span class="hljs-attr">getGoodsDetail</span>: <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> <span class="hljs-title function_">get</span>(<span class="hljs-string">`/goods/<span class="hljs-subst">${id}</span>`</span>),
  <span class="hljs-comment">// æœç´¢å•†å“</span>
  <span class="hljs-attr">searchGoods</span>: <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> <span class="hljs-title function_">get</span>(<span class="hljs-string">'/goods/search'</span>, params)
}
</code></pre>
<p>ç»„ä»¶ä¸­ä½¿ç”¨æ—¶ï¼Œç›´æ¥å¯¼å…¥å¯¹åº”æ¨¡å—çš„æ¥å£ï¼Œä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“ç»´æŠ¤ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;script setup&gt;
<span class="hljs-comment">// å¯¼å…¥ç”¨æˆ·æ¨¡å—æ¥å£</span>
<span class="hljs-keyword">import</span> { userApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/user'</span>
<span class="hljs-keyword">import</span> { ref, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> userList = <span class="hljs-title function_">ref</span>([])

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// ç›´æ¥è°ƒç”¨æ¥å£å‡½æ•°ï¼Œå‚æ•°æ¸…æ™°</span>
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> userApi.<span class="hljs-title function_">getUserList</span>({ <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">size</span>: <span class="hljs-number">10</span> })
    userList.<span class="hljs-property">value</span> = res
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error)
  }
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">getUserList</span>()
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-10">3.4 å…¶ä»–ç”Ÿäº§çº§ä¼˜åŒ–ï¼ˆå¯é€‰ï¼ŒæŒ‰éœ€æ·»åŠ ï¼‰</h3>
<ol>
<li><strong>è¯·æ±‚é‡è¯•</strong>ï¼šé’ˆå¯¹ç½‘ç»œæ³¢åŠ¨å¯¼è‡´çš„è¯·æ±‚å¤±è´¥ï¼Œè‡ªåŠ¨é‡è¯• 1-2 æ¬¡ï¼ˆé¿å…ç”¨æˆ·æ‰‹åŠ¨é‡è¯•ï¼‰ï¼Œç”¨ axios-retry æ’ä»¶å®ç°ã€‚</li>
<li><strong>è¯·æ±‚åŠ å¯†</strong>ï¼šæ•æ„Ÿæ¥å£ï¼ˆå¦‚ç™»å½•ã€æ”¯ä»˜ï¼‰çš„å‚æ•°åŠ å¯†ï¼ˆå¦‚ AES åŠ å¯†ï¼‰ï¼Œåœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­å¤„ç†å‚æ•°åŠ å¯†ã€‚</li>
<li><strong>æ¥å£æ—¥å¿—</strong>ï¼šå¼€å‘ç¯å¢ƒæ‰“å°è¯·æ±‚/å“åº”æ—¥å¿—ï¼ˆä¾¿äºè°ƒè¯•ï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒå…³é—­æ—¥å¿—ï¼ˆé¿å…æ³„éœ²æ•æ„Ÿä¿¡æ¯ï¼‰ã€‚</li>
<li><strong>è‡ªå®šä¹‰è¯·æ±‚å¤´</strong>ï¼šæ”¯æŒéƒ¨åˆ†æ¥å£å•ç‹¬è®¾ç½®è¯·æ±‚å¤´ï¼ˆå¦‚æ–‡ä»¶ä¸Šä¼ æ¥å£è®¾ç½® Content-Type: multipart/form-dataï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-11">å››ã€é¿å‘æŒ‡å—ï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰</h2>
<ol>
<li><strong>ç¯å¢ƒå˜é‡è¯»å–å¤±è´¥</strong>ï¼šVite ç¯å¢ƒå˜é‡å¿…é¡»ä»¥ <code>VITE_</code> å¼€å¤´ï¼Œä¸”åªèƒ½åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­è¯»å–ï¼Œä¸èƒ½åœ¨æœåŠ¡ç«¯ä»£ç ä¸­ä½¿ç”¨ã€‚</li>
<li><strong>token å¤±æ•ˆæœªè·³è½¬</strong>ï¼šç¡®ä¿å“åº”æ‹¦æˆªå™¨ä¸­ 401 çŠ¶æ€ç çš„åˆ¤æ–­é€»è¾‘æ­£ç¡®ï¼Œä¸” <code>window.location.href = '/login'</code> æ²¡æœ‰è¢«æ³¨é‡Šï¼ŒåŒæ—¶æ£€æŸ¥ token æ˜¯å¦æ­£ç¡®å­˜å‚¨/æ¸…é™¤ã€‚</li>
<li><strong>é‡å¤è¯·æ±‚å–æ¶ˆæ— æ•ˆ</strong>ï¼šè¯·æ±‚æ ‡è¯†ï¼ˆrequestKeyï¼‰å¿…é¡»å”¯ä¸€ï¼Œç¡®ä¿ params å’Œ data è¢«æ­£ç¡®åºåˆ—åŒ–ï¼ˆé¿å…å› å‚æ•°é¡ºåºä¸åŒå¯¼è‡´æ ‡è¯†ä¸åŒï¼‰ã€‚</li>
<li><strong>Loading é—ªçƒ</strong>ï¼šè¯·æ±‚è€—æ—¶è¿‡çŸ­ï¼ˆå¦‚ 100ms å†…å®Œæˆï¼‰ï¼Œä¼šå¯¼è‡´ Loading ä¸€é—ªè€Œè¿‡ï¼Œå¯æ·»åŠ  Loading å»¶è¿Ÿæ˜¾ç¤ºï¼ˆå¦‚ 300ms åæ˜¾ç¤ºï¼Œé¿å…é—ªçƒï¼‰ã€‚</li>
<li><strong>TS ç±»å‹æŠ¥é”™</strong>ï¼šç¡®ä¿åç«¯å“åº”æ ¼å¼å’Œå®šä¹‰çš„ <code>ResponseData</code> æ¥å£ä¸€è‡´ï¼Œå¦åˆ™ä¼šå‡ºç°ç±»å‹ä¸åŒ¹é…æŠ¥é”™ã€‚</li>
<li><strong>æ–‡ä»¶ä¸Šä¼ æ¥å£å¤±è´¥</strong>ï¼šæ–‡ä»¶ä¸Šä¼ æ¥å£éœ€å•ç‹¬è®¾ç½®è¯·æ±‚å¤´ <code>'Content-Type': 'multipart/form-data'</code>ï¼Œä¸”ä¼ å‚ç”¨ FormData æ ¼å¼ã€‚</li>
</ol>
<h2 data-id="heading-12">äº”ã€æ€»ç»“</h2>
<p>Vue3 å°è£… Axios çš„æ ¸å¿ƒæ˜¯ã€Œç»Ÿä¸€ç®¡ç† + ç®€åŒ–è°ƒç”¨ + å¼‚å¸¸å¤„ç†ã€ï¼Œä»åŸºç¡€ç‰ˆçš„æ‹¦æˆªå™¨å°è£…ï¼Œåˆ°è¿›é˜¶ç‰ˆçš„é‡å¤è¯·æ±‚å–æ¶ˆã€Loading ä¼˜åŒ–ã€æ¥å£æ¨¡å—åŒ–ï¼Œä¸€æ­¥æ­¥æå‡å°è£…çš„å¥å£®æ€§å’Œå®ç”¨æ€§ã€‚</p>
<p>æ€»ç»“å‡ ä¸ªå…³é”®è¦ç‚¹ï¼š</p>
<ul>
<li>ç”¨ <code>axios.create()</code> åˆ›å»ºå®ä¾‹ï¼Œç»Ÿä¸€é…ç½® baseURLã€è¶…æ—¶æ—¶é—´ç­‰ã€‚</li>
<li>è¯·æ±‚æ‹¦æˆªå™¨ï¼šæ·»åŠ  tokenã€å–æ¶ˆé‡å¤è¯·æ±‚ã€æ˜¾ç¤º Loadingã€‚</li>
<li>å“åº”æ‹¦æˆªå™¨ï¼šç»Ÿä¸€å¤„ç†å“åº”æ•°æ®ã€æ‹¦æˆªé”™è¯¯ï¼ˆtoken è¿‡æœŸã€404/500ï¼‰ã€éšè— Loadingã€‚</li>
<li>ä¸­å¤§å‹é¡¹ç›®ï¼šæ¥å£æŒ‰æ¨¡å—æ‹†åˆ†ï¼Œæå‡ä»£ç å¯ç»´æŠ¤æ€§ã€‚</li>
<li>ç”Ÿäº§ç¯å¢ƒï¼šè¡¥å……å–æ¶ˆé‡å¤è¯·æ±‚ã€è¯·æ±‚åŠ å¯†ç­‰ä¼˜åŒ–ï¼Œè®©å°è£…æ›´å¥å£®ã€‚</li>
</ul>
<p>å°è£…å®Œæˆåï¼Œåç»­å¼€å‘åªéœ€ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œæ— éœ€å…³æ³¨è¯·æ±‚çš„åº•å±‚é…ç½®ï¼Œæå¤§æå‡å¼€å‘æ•ˆç‡ã€‚æœ¬æ–‡çš„å°è£…æ–¹æ¡ˆé€‚é…ç»å¤§å¤šæ•° Vue3 é¡¹ç›®ï¼Œå¤§å®¶å¯æ ¹æ®è‡ªå·±çš„åç«¯æ¥å£è§„èŒƒå’Œä¸šåŠ¡éœ€æ±‚ï¼Œçµæ´»è°ƒæ•´æ‹¦æˆªå™¨é€»è¾‘å’Œæ¥å£æ ¼å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#11-ImmutableçŠ¶æ€ç»´æŠ¤ä¸å¢é‡æ¸²æŸ“]]></title>    <link>https://juejin.cn/post/7604084016510353449</link>    <guid>https://juejin.cn/post/7604084016510353449</guid>    <pubDate>2026-02-09T02:48:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604084016510353449" data-draft-id="7603895839557419071" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#11-ImmutableçŠ¶æ€ç»´æŠ¤ä¸å¢é‡æ¸²æŸ“"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-02-09T02:48:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WindRunnerMax"/> <meta itemprop="url" content="https://juejin.cn/user/1829999989247214"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#11-ImmutableçŠ¶æ€ç»´æŠ¤ä¸å¢é‡æ¸²æŸ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1829999989247214/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WindRunnerMax
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:48:19.000Z" title="Mon Feb 09 2026 02:48:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å…ˆå‰æˆ‘ä»¬è®¨è®ºäº†è§†å›¾å±‚çš„é€‚é…å™¨è®¾è®¡ï¼Œä¸»è¦æ˜¯å…¨é‡çš„è§†å›¾åˆå§‹åŒ–æ¸²æŸ“ï¼ŒåŒ…æ‹¬ç”Ÿå‘½å‘¨æœŸåŒæ­¥ã€çŠ¶æ€ç®¡ç†ã€æ¸²æŸ“æ¨¡å¼ã€<code>DOM</code>æ˜ å°„çŠ¶æ€ç­‰ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦å¤„ç†å˜æ›´çš„å¢é‡æ›´æ–°ï¼Œè¿™å±äºæ€§èƒ½æ–¹é¢çš„è€ƒé‡ï¼Œéœ€è¦è€ƒè™‘å¦‚ä½•å®ç°ä¸å¯å˜çš„çŠ¶æ€å¯¹è±¡ï¼Œä»¥æ­¤æ¥å®ç°<code>Op</code>æ“ä½œä»¥åŠæœ€å°åŒ–<code>DOM</code>å˜æ›´ã€‚</p>
<ul>
<li>å¼€æºåœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FBlockKit" target="_blank" title="https://github.com/WindRunnerMax/BlockKit" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a></li>
<li>åœ¨çº¿ç¼–è¾‘: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwindrunnermax.github.io%2FBlockKit%2F" target="_blank" title="https://windrunnermax.github.io/BlockKit/" ref="nofollow noopener noreferrer">windrunnermax.github.io/BlockKit/</a></li>
<li>é¡¹ç›®ç¬”è®°: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FBlockKit%2Fblob%2Fmaster%2FNOTE.md" target="_blank" title="https://github.com/WindRunnerMax/BlockKit/blob/master/NOTE.md" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a></li>
</ul>
<details>
<summary><strong>ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—æ–‡ç« </strong></summary>
<ul>
<li><a href="https://juejin.cn/post/7490554094412611636" target="_blank" title="https://juejin.cn/post/7490554094412611636">æ·±æ„Ÿä¸€æ— æ‰€é•¿ï¼Œå‡†å¤‡è¯•ç€ä»é›¶å¼€å§‹å†™ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨</a></li>
<li><a href="https://juejin.cn/post/7492339631700377652" target="_blank" title="https://juejin.cn/post/7492339631700377652">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#2-åŸºäºMVCæ¨¡å¼çš„ç¼–è¾‘å™¨æ¶æ„è®¾è®¡</a></li>
<li><a href="https://juejin.cn/post/7494920513967112227" target="_blank" title="https://juejin.cn/post/7494920513967112227">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#3-åŸºäºDeltaçš„çº¿æ€§æ•°æ®ç»“æ„æ¨¡å‹</a></li>
<li><a href="https://juejin.cn/post/7508648111485665295" target="_blank" title="https://juejin.cn/post/7508648111485665295">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#4-æµè§ˆå™¨é€‰åŒºæ¨¡å‹çš„æ ¸å¿ƒäº¤äº’ç­–ç•¥</a></li>
<li><a href="https://juejin.cn/post/7513183180091523107" target="_blank" title="https://juejin.cn/post/7513183180091523107">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#5-ç¼–è¾‘å™¨é€‰åŒºæ¨¡å‹çš„çŠ¶æ€ç»“æ„è¡¨è¾¾</a></li>
<li><a href="https://juejin.cn/post/7534162607894347828" target="_blank" title="https://juejin.cn/post/7534162607894347828">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#6-æµè§ˆå™¨é€‰åŒºä¸ç¼–è¾‘å™¨é€‰åŒºæ¨¡å‹åŒæ­¥</a></li>
<li><a href="https://juejin.cn/post/7544561402783793192" target="_blank" title="https://juejin.cn/post/7544561402783793192">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#7-åŸºäºç»„åˆäº‹ä»¶çš„åŠå—æ§è¾“å…¥æ¨¡å¼</a></li>
<li><a href="https://juejin.cn/post/7562526517516812331" target="_blank" title="https://juejin.cn/post/7562526517516812331">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#8-æµè§ˆå™¨è¾“å…¥æ¨¡å¼çš„éå—æ§DOMè¡Œä¸º</a></li>
<li><a href="https://juejin.cn/spost/7585778343352221759" target="_blank" title="https://juejin.cn/spost/7585778343352221759">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#9-ç¼–è¾‘å™¨æ–‡æœ¬ç»“æ„å˜æ›´çš„å—æ§å¤„ç†</a></li>
<li><a href="https://juejin.cn/spost/7593702885880725540" target="_blank" title="https://juejin.cn/spost/7593702885880725540">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#10-Reactè§†å›¾å±‚é€‚é…å™¨çš„æ¨¡å¼æ‰©å±•</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ä»é›¶å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨#11-ImmutableçŠ¶æ€ç»´æŠ¤ä¸å¢é‡æ¸²æŸ“</a></li>
</ul>
</details>
<h2 data-id="heading-0">è¡Œçº§ä¸å¯å˜çŠ¶æ€</h2>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å…ˆä¸å¼•å…¥è§†å›¾å±‚çš„æ¸²æŸ“é—®é¢˜ï¼Œè€Œæ˜¯ä»…åœ¨<code>Model</code>å±‚é¢ä¸Šå®ç°ç²¾ç»†åŒ–çš„å¤„ç†ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯å®ç°ä¸å¯å˜çš„çŠ¶æ€å¯¹è±¡ï¼Œä»…æ›´æ–°çš„èŠ‚ç‚¹æ‰ä¼šè¢«é‡æ–°åˆ›å»ºï¼Œå…¶ä»–èŠ‚ç‚¹åˆ™ç›´æ¥å¤ç”¨ã€‚ç”±æ­¤æƒ³æ¥æ­¤æ¨¡å—çš„å®ç°é¢‡ä¸ºå¤æ‚ï¼Œä¹Ÿå¹¶æœªå¼•å…¥<code>immer</code>ç­‰æ¡†æ¶ï¼Œè€Œæ˜¯ç›´æ¥å¤„ç†çš„çŠ¶æ€å¯¹è±¡ï¼Œå› æ­¤å…ˆä»ç®€å•çš„æ›´æ–°æ¨¡å¼å¼€å§‹è€ƒè™‘ã€‚</p>
<p>å›åˆ°æœ€å¼€å§‹å®ç°çš„<code>State</code>æ¨¡å—æ›´æ–°æ–‡æ¡£å†…å®¹ï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥é‡å»ºäº†æ‰€æœ‰çš„<code>LineState</code>ä»¥åŠ<code>LeafState</code>å¯¹è±¡ï¼Œç„¶ååœ¨<code>React</code>è§†å›¾å±‚çš„<code>BlockModel</code>ä¸­ç›‘å¬äº†<code>OnContentChange</code>äº‹ä»¶ï¼Œä»¥æ­¤æ¥å°†<code>BlockState</code>çš„æ›´æ–°åº”ç”¨åˆ°è§†å›¾å±‚ã€‚</p>
<pre><code class="hljs language-js" lang="js">delta.<span class="hljs-title function_">eachLine</span>(<span class="hljs-function">(<span class="hljs-params">line, attributes, index</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> lineState = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LineState</span>(line, attributes, <span class="hljs-variable language_">this</span>);
  lineState.<span class="hljs-property">index</span> = index;
  lineState.<span class="hljs-property">start</span> = offset;
  lineState.<span class="hljs-property">key</span> = <span class="hljs-title class_">Key</span>.<span class="hljs-title function_">getId</span>(lineState);
  offset = offset + lineState.<span class="hljs-property">length</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">lines</span>[index] = lineState;
});
</code></pre>
<p>è¿™ç§æ–¹å¼ç®€å•ç›´æ¥ï¼Œå…¨é‡æ›´æ–°çŠ¶æ€èƒ½å¤Ÿä¿è¯åœ¨<code>React</code>çš„çŠ¶æ€æ›´æ–°ï¼Œç„¶è€Œè¿™ç§æ–¹å¼çš„é—®é¢˜åœ¨äºæ€§èƒ½ã€‚å½“æ–‡æ¡£å†…å®¹éå¸¸å¤§çš„æ—¶å€™ï¼Œå…¨é‡è®¡ç®—å°†ä¼šå¯¼è‡´å¤§é‡çš„çŠ¶æ€é‡å»ºï¼Œå¹¶ä¸”å…¶æœ¬èº«çš„æ”¹å˜ä¹Ÿä¼šå¯¼è‡´<code>React</code>çš„<code>diff</code>å·®å¼‚è¿›è€Œå…¨é‡æ›´æ–°æ–‡æ¡£è§†å›¾ï¼Œè¿™æ ·çš„æ€§èƒ½å¼€é”€é€šå¸¸æ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<p>é‚£ä¹ˆé€šå¸¸æ¥è¯´æˆ‘ä»¬å°±éœ€è¦åŸºäºå˜æ›´æ¥ç¡®å®šçŠ¶æ€çš„æ›´æ–°ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ç¡®å®šæ›´æ–°çš„ç²’åº¦ï¼Œä¾‹å¦‚ä»¥è¡Œä¸ºåŸºå‡†åˆ™æœªå˜æ›´çš„æ—¶å€™å°±ç›´æ¥å–åŸæœ‰çš„<code>LineState</code>ã€‚ç›¸å½“äºå°½å¯èƒ½å¤ç”¨<code>Origin List</code>ç„¶åç”Ÿæˆ<code>Target List</code>ï¼Œè¿™æ ·çš„æ–¹å¼è‡ªç„¶å¯ä»¥é¿å…éƒ¨åˆ†çŠ¶æ€çš„é‡å»ºï¼Œå°½å¯èƒ½å¤ç”¨åŸæœ¬çš„å¯¹è±¡ã€‚</p>
<p>æ•´ä½“æ€è·¯å¤§æ¦‚æ˜¯å…ˆæ‰§è¡Œå˜æˆç”Ÿæˆæœ€æ–°çš„åˆ—è¡¨ï¼Œç„¶ååˆ†åˆ«è®¾ç½®æ—§åˆ—è¡¨å’Œæ–°åˆ—è¡¨çš„<code>row</code>å’Œ<code>col</code>ä¸¤ä¸ªæŒ‡é’ˆå€¼ï¼Œç„¶åæ›´æ–°æ—¶è®°å½•èµ·å§‹<code>row</code>ï¼Œåˆ é™¤å’Œæ–°å¢è‡ªç„¶æ˜¯æ­£å¸¸å¤„ç†ï¼Œå¯¹äºæ›´æ–°åˆ™è®¤ä¸ºæ˜¯å…ˆåˆ åå¢ã€‚å¯¹äºå†…å®¹çš„å¤„ç†åˆ™éœ€è¦åˆ†åˆ«è®¨è®ºå•è¡Œå’Œè·¨è¡Œçš„é—®é¢˜ï¼Œä¸­é—´éƒ¨åˆ†çš„å†…å®¹å°±ä½œä¸ºé‡å»ºçš„æ“ä½œã€‚</p>
<p>æœ€åå¯ä»¥å°†è¿™éƒ¨åˆ†å¢åˆ <code>LineState</code>æ•°æ®æ”¾ç½®äº<code>Changes</code>ä¸­ï¼Œå°±å¯ä»¥å¾—åˆ°å®é™…å¢åˆ çš„<code>Ops</code>äº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¼˜åŒ–éƒ¨åˆ†çš„æ€§èƒ½ï¼Œå› ä¸ºä»…åŸåˆ—è¡¨å’Œç›®æ ‡åˆ—è¡¨çš„ä¸­é—´éƒ¨åˆ†æ‰ä¼šé‡å»ºï¼Œå…¶ä»–éƒ¨åˆ†çš„è¡ŒçŠ¶æ€ç›´æ¥å¤ç”¨ã€‚æ­¤å¤–è¿™éƒ¨åˆ†æ•°æ®åœ¨<code>apply</code>çš„<code>delta</code>ä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼ŒåŒæ ·å¯ä»¥è®¤ä¸ºæ˜¯æ•°æ®çš„è¡¥å……ã€‚</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-title class_">Origin</span> <span class="hljs-title class_">List</span> (<span class="hljs-title class_">Old</span>)                          <span class="hljs-title class_">Target</span> <span class="hljs-title class_">List</span> (<span class="hljs-title class_">New</span>)
+-------------------+                      +-------------------+
| [<span class="hljs-number">0</span>] <span class="hljs-title class_">LineState</span> A   | &lt;---- Retain ------&gt; | [0] LineState A   | (Reused)
+-------------------+                      +-------------------+
| [1] LineState B   |          |           | [1] LineState B2  | (Update)
+-------------------+       Changes        |     (Modified)    | (Del C)
| [2] LineState C   |          |           +-------------------+
+-------------------+          V           | [2] NewState X    | (Inserted)
| [3] LineState D   | ---------------\     +-------------------+
+-------------------+                 --&gt; | [3] LineState D   | (Reused)
| [4] LineState E   | &lt;---- Retain ------&gt; | [4] LineState E   | (Reused)
+-------------------+                      +-------------------+
</code></pre>
<p>é‚£ä¹ˆè¿™é‡Œå®é™…ä¸Šæ˜¯å­˜åœ¨éå¸¸éœ€è¦å…³æ³¨çš„ç‚¹ï¼Œæˆ‘ä»¬ç°åœ¨ç»´æŠ¤çš„æ˜¯çŠ¶æ€æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰çš„æ›´æ–°å°±ä¸å†æ˜¯ç›´æ¥çš„<code>compose</code>ï¼Œè€Œæ˜¯æ“ä½œæˆ‘ä»¬å®ç°çš„çŠ¶æ€å¯¹è±¡ã€‚æœ¬è´¨ä¸Šæˆ‘ä»¬æ˜¯éœ€è¦å®ç°è¡Œçº§åˆ«çš„<code>compose</code>æ–¹æ³•ï¼Œè¿™é‡Œçš„å®ç°éå¸¸é‡è¦ï¼Œå‡å¦‚æˆ‘ä»¬å¯¹äºæ•°æ®çš„å¤„ç†å­˜åœ¨åå·®çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´çŠ¶æ€å‡ºç°é—®é¢˜ã€‚</p>
<p>æ­¤å¤–åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬åˆ¤æ–­<code>LineState</code>æ˜¯å¦éœ€è¦æ–°å»ºåˆ™æ˜¯æ ¹æ®æ•´ä¸ªè¡Œå†…çš„æ‰€æœ‰<code>LeafState</code>æ¥é‡å»ºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ç§æ—¶å€™æˆ‘ä»¬æ˜¯éœ€è¦å†æ¬¡å°†æ‰€æœ‰çš„<code>op</code>éå†ä¸€éï¼Œå½“ç„¶å®é™…ä¸Šç”±äºæœ€åè¿˜éœ€è¦å°†<code>compose</code>åçš„<code>Delta</code>åˆ‡å‰²ä¸ºè¡Œçº§åˆ«çš„å†…å®¹ï¼Œæ‰€ä»¥å…¶å®å³ä½¿åœ¨åº”ç”¨å˜æ›´åä¹Ÿæœ€å°‘éœ€è¦å†éå†ä¸¤æ¬¡ã€‚</p>
<p>é‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬éœ€è¦æ€è€ƒä¼˜åŒ–æ–¹å‘ï¼Œé¦–å…ˆæ˜¯é¦–ä¸ª<code>retain</code>ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åº”è¯¥ç›´æ¥å®Œæ•´å¤ç”¨åŸæœ¬çš„<code>LineState</code>ï¼ŒåŒ…æ‹¬å¤„ç†åçš„å‰©ä½™èŠ‚ç‚¹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è€Œå¯¹äºä¸­é—´çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸ºå…¶ç‹¬ç«‹è®¾è®¡æ›´æ–°ç­–ç•¥ï¼Œè¿™éƒ¨åˆ†ç†è®ºä¸Šæ¥è¯´æ˜¯éœ€è¦å®Œå…¨ç‹¬ç«‹å¤„ç†ä¸ºæ–°çš„çŠ¶æ€å¯¹è±¡çš„ï¼Œè¿™æ ·å¯ä»¥å‡å°‘éƒ¨åˆ†<code>Leaf Op</code>çš„éå†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Delta</span>().<span class="hljs-title function_">retain</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">insert</span>(<span class="hljs-string">"xx"</span>)
<span class="hljs-title function_">insert</span>(<span class="hljs-string">"123"</span>), <span class="hljs-title function_">insert</span>(<span class="hljs-string">"\n"</span>) <span class="hljs-comment">// skip </span>
<span class="hljs-title function_">insert</span>(<span class="hljs-string">"456"</span>), <span class="hljs-title function_">insert</span>(<span class="hljs-string">"\n"</span>) <span class="hljs-comment">// new line state</span>
</code></pre>
<p>å…¶ä¸­ï¼Œå¦‚æœæ˜¯æ–°å»ºçš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ç›´æ¥æ„å»ºæ–°çš„<code>LineState</code>å³å¯ï¼Œåˆ é™¤çš„èŠ‚ç‚¹åˆ™ä¸ä»åŸæœ¬çš„<code>LineState</code>ä¸­æ”¾ç½®äºæ–°çš„åˆ—è¡¨ã€‚è€Œå¯¹äºæ›´æ–°çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°åŸæœ¬çš„<code>LineState</code>å¯¹è±¡ï¼Œå› ä¸ºå®é™…ä¸Šè¡Œæ˜¯å­˜åœ¨æ›´æ–°çš„ï¼Œè€Œé‡ç‚¹æ˜¯æˆ‘ä»¬éœ€è¦å°†åŸæœ¬çš„<code>LineState</code>çš„<code>key</code>å€¼å¤ç”¨ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆç®€å•å®ç°å®ç°æè¿°ä¸€ä¸‹å¤ç”¨çš„é—®é¢˜ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„å®ç°åˆ™æ˜¯ç›´æ¥ä»¥<code>\n</code>çš„æ ‡è¯†ä¸ºç›®æ ‡çš„<code>State</code>ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬è¦ç‹¬ç«‹<code>\n</code>ä¸ºç‹¬ç«‹çš„çŠ¶æ€ã€‚å³å¦‚æœåœ¨<code>123|456\n</code>çš„<code>|</code>ä½ç½®æ’å…¥<code>\n</code>çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ˜¯<code>123</code>æ˜¯æ–°çš„<code>LineState</code>ï¼Œ<code>456</code>æ˜¯åŸæœ¬çš„<code>LineState</code>ï¼Œä»¥æ­¤æ¥å®ç°<code>key</code>çš„å¤ç”¨ã€‚</p>
<pre><code class="hljs language-js" lang="js">[
  <span class="hljs-title function_">insert</span>(<span class="hljs-string">"123"</span>), <span class="hljs-title function_">insert</span>(<span class="hljs-string">"\n"</span>), 
  <span class="hljs-title function_">insert</span>(<span class="hljs-string">"456"</span>), <span class="hljs-title function_">insert</span>(<span class="hljs-string">"\n"</span>)
]
<span class="hljs-comment">// ===&gt;</span>
[ 
  <span class="hljs-title class_">LineState</span>(<span class="hljs-title class_">LeafState</span>(<span class="hljs-string">"123"</span>), <span class="hljs-title class_">LeafState</span>(<span class="hljs-string">"\n"</span>)), 
  <span class="hljs-title class_">LineState</span>(<span class="hljs-title class_">LeafState</span>(<span class="hljs-string">"456"</span>), <span class="hljs-title class_">LeafState</span>(<span class="hljs-string">"\n"</span>))
]
</code></pre>
<p>å…¶å®è¿™é‡Œæœ‰ä¸ªéå¸¸å€¼å¾—å…³æ³¨çš„ç‚¹æ˜¯ï¼Œ<code>LineState</code>åœ¨<code>Delta</code>ä¸­æ˜¯æ²¡æœ‰å…·ä½“å¯¹åº”çš„<code>Op</code>çš„ï¼Œè€Œç›¸å¯¹åº”çš„<code>LeafState</code>åˆ™æ˜¯æœ‰å…·ä½“çš„<code>Op</code>çš„ã€‚è¿™å°±æ„å‘³ç€æˆ‘ä»¬åœ¨å¤„ç†<code>LineState</code>çš„æ›´æ–°æ—¶ï¼Œæ˜¯ä¸èƒ½ç›´æ¥æ ¹æ®å˜æ›´æ§åˆ¶çš„ï¼Œå› æ­¤å¿…é¡»è¦æ‰¾åˆ°èƒ½å¤Ÿæ˜ å°„çš„çŠ¶æ€ï¼Œå› æ­¤æœ€ç®€å•çš„æ–¹æ¡ˆå³æ ¹æ®<code>\n</code>èŠ‚ç‚¹æ˜ å°„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">LeafState</span>(<span class="hljs-string">"\n"</span>, key=<span class="hljs-string">"1"</span>) &lt;=&gt; <span class="hljs-title class_">LineState</span>(key=<span class="hljs-string">"L1"</span>)
</code></pre>
<p>å®é™…ä¸Šæˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸€ä¸‹ï¼Œæœ€å¼€å§‹æˆ‘ä»¬è€ƒè™‘å…ˆæ›´æ–°å†<code>diff</code>ï¼Œåæ¥è€ƒè™‘çš„æ˜¯è¾¹æ›´æ–°è¾¹è®°å½•ã€‚è¾¹æ›´æ–°è¾¹è®°å½•çš„ä¼˜ç‚¹åœ¨äºï¼Œå¯ä»¥é¿å…å†æ¬¡éå†ä¸€è¾¹æ‰€æœ‰<code>Leaf</code>èŠ‚ç‚¹çš„æ¶ˆè€—ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é¿å…<code>diff</code>çš„å¤æ‚æ€§ã€‚ä½†æ˜¯è¿™é‡Œä¹Ÿå­˜åœ¨ä¸ªé—®é¢˜ï¼Œå¦‚æœå†…éƒ¨è¿›è¡Œäº†å¤šæ¬¡<code>retain</code>æ“ä½œï¼Œåˆ™æ— æ³•ç›´æ¥å¤ç”¨<code>LineState</code>ã€‚</p>
<p>ä¸è¿‡é€šå¸¸æ¥è¯´ï¼Œæœ€é«˜é¢‘çš„æ“ä½œæ˜¯è¾“å…¥å†…å®¹ï¼Œè¿™ç§æƒ…å†µä¸‹é¦–æ“ä½œä¸€èˆ¬éƒ½æ˜¯<code>retain</code>ï¼Œå°¾æ“ä½œä¸ºç©ºä¼šæ”¶é›†å‰©ä½™æ–‡æ¡£å†…å®¹ï¼Œå› æ­¤è¿™éƒ¨åˆ†ä¼˜åŒ–æ˜¯ä¼šè¢«é«˜é¢‘è§¦å‘çš„ã€‚è€Œå¦‚æœæ˜¯å¤šæ¬¡çš„å†…å®¹éƒ¨åˆ†å˜æ›´æ“ä½œï¼Œè¿™éƒ¨åˆ†è™½ç„¶å¯ä»¥é€šè¿‡åˆ¤æ–­è¡Œå†…çš„å¶å­ç»“ç‚¹æ˜¯å¦å˜æ›´ï¼Œæ¥åˆ¤æ–­æ˜¯å¦å¤ç”¨è¡Œå¯¹è±¡ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€å®šå¤æ‚æ€§ã€‚</p>
<p>å…³äºè¿™éƒ¨åˆ†çš„å…·ä½“å®ç°ï¼Œåœ¨ç¼–è¾‘å™¨çš„çŠ¶æ€æ¨¡å—é‡Œå­˜åœ¨ç‹¬ç«‹çš„<code>Mutate</code>æ¨¡å—ï¼Œè¿™éƒ¨åˆ†å®ç°åœ¨åè¾¹å®ç°å„ä¸ªæ¨¡å—æ—¶ä¼šç‹¬ç«‹ä»‹ç»ã€‚åˆ°è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„<code>Immutable</code>çŠ¶æ€ç»´æŠ¤ï¼Œå¦‚æœ<code>Leaf</code>èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–ä¹‹åï¼Œå…¶çˆ¶èŠ‚ç‚¹<code>Line</code>ä¼šè§¦å‘æ›´æ–°ï¼Œè€Œå…¶ä»–èŠ‚ç‚¹åˆ™å¯ä»¥ç›´æ¥å¤ç”¨ã€‚</p>
<h2 data-id="heading-1">Key å€¼ç»´æŠ¤</h2>
<p>è‡³æ­¤æˆ‘ä»¬å®ç°äº†ä¸€å¥—ç®€å•çš„<code>Immutable Delta+Iterator</code>æ¥å¤„ç†æ›´æ–°ï¼Œè¿™ç§æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ©ä¸å¯å˜çš„æ–¹å¼æ¥å®ç°<code>React</code>è§†å›¾çš„æ›´æ–°ï¼Œé‚£ä¹ˆåœ¨<code>React</code>çš„æ¸²æŸ“æ¨¡å¼ä¸­ï¼Œ<code>key</code>å€¼çš„ç®¡ç†ä¹Ÿæ˜¯ä¸ªå€¼çš„æ¢è®¨çš„é—®é¢˜ã€‚</p>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®çŠ¶æ€ä¸å¯å˜æ¥ç”Ÿæˆ<code>key</code>å€¼ï¼Œå€ŸåŠ©<code>WeakMap</code>æ˜ å°„å…³ç³»è·å–å¯¹åº”çš„å­—ç¬¦ä¸²<code>id</code>å€¼ï¼Œæ­¤æ—¶å°±å¯ä»¥å€ŸåŠ©<code>key</code>çš„ç®¡ç†ä»¥åŠ<code>React.memo</code>æ¥å®ç°è§†å›¾çš„å¤ç”¨ã€‚å…¶å®åœ¨è¿™é‡Œåˆæ­¥çœ‹èµ·æ¥<code>key</code>å€¼åº”è¯¥æ˜¯éœ€è¦ä¸»åŠ¨æ§åˆ¶å¼ºåˆ¶åˆ·æ–°çš„æ—¶å€™ï¼Œä»¥åŠå®Œå…¨æ˜¯æ–°èŠ‚ç‚¹æ‰ä¼šç”¨å¾—åˆ°çš„ã€‚</p>
<p>ä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæ­¤æ—¶æˆ‘ä»¬å³ä½¿è¾“å…¥ç®€å•çš„å†…å®¹ï¼Œä¹Ÿä¼šå¯¼è‡´æ•´ä¸ªè¡Œçš„<code>key</code>å‘ç”Ÿæ”¹å˜ï¼Œè€Œæ­¤æ—¶æˆ‘ä»¬æ˜¯ä¸å¿…è¦æ›´æ–°æ­¤æ—¶çš„<code>key</code>çš„ã€‚å› æ­¤<code>key</code>å€¼æ˜¯éœ€è¦å•ç‹¬ç»´æŠ¤çš„ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ä¸å¯å˜çš„å¯¹è±¡æ¥ç´¢å¼•<code>key</code>å€¼ï¼Œé‚£ä¹ˆå¦‚æœæ˜¯ç›´æ¥ä½¿ç”¨<code>index</code>ä½œä¸º<code>key</code>å€¼çš„è¯ï¼Œå°±ä¼šå­˜åœ¨æ½œåœ¨çš„åŸåœ°å¤ç”¨é—®é¢˜ã€‚</p>
<p><code>key</code>å€¼åŸåœ°å¤ç”¨ä¼šå¯¼è‡´ç»„ä»¶çš„çŠ¶æ€è¢«é”™è¯¯ä¿ç•™ï¼Œä¾‹å¦‚æ­¤æ—¶æœ‰ä¸ªéå—æ§ç®¡ç†çš„<code>input</code>ç»„ä»¶åˆ—è¡¨ï¼Œåœ¨æŸä¸ªè¾“å…¥æ¡†å†…å·²ç»è¾“å…¥äº†å†…å®¹ï¼Œå½“å…¶å‘ç”Ÿé¡ºåºå˜åŒ–æ—¶ï¼ŒåŸå§‹è¾“å…¥å†…å®¹ä¼šè·Ÿéšç€åŸåœ°å¤ç”¨çš„ç­–ç•¥ç•™åœ¨åŸå§‹çš„ä½ç½®ï¼Œè€Œä¸æ˜¯è·Ÿéšåˆ°æ–°çš„ä½ç½®ï¼Œå› ä¸ºå…¶æ•´ä½“åˆ—è¡¨é¡ºåº<code>key</code>æœªå‘ç”Ÿå˜åŒ–å¯¼è‡´<code>React</code>ç›´æ¥å¤ç”¨èŠ‚ç‚¹ã€‚</p>
<p>åœ¨<code>LineState</code>èŠ‚ç‚¹çš„<code>key</code>å€¼ç»´æŠ¤ä¸­ï¼Œå¦‚æœæ˜¯åˆå§‹å€¼åˆ™æ˜¯æ ¹æ®<code>state</code>å¼•ç”¨è‡ªå¢çš„å€¼ï¼Œåœ¨å˜æ›´çš„æ—¶å€™åˆ™æ˜¯å°½å¯èƒ½åœ°å¤ç”¨åŸå§‹è¡Œçš„<code>key</code>ï¼Œè¿™æ ·å¯ä»¥é¿å…è¿‡å¤šçš„è¡ŒèŠ‚ç‚¹é‡å»ºå¹¶ä¸”å¯ä»¥æ§åˆ¶æ•´è¡Œçš„å¼ºåˆ¶åˆ·æ–°ã€‚</p>
<p>è€Œå¯¹äº<code>LeafState</code>èŠ‚ç‚¹çš„<code>key</code>å€¼æœ€å¼€å§‹æ˜¯ç›´æ¥ä½¿ç”¨<code>index</code>å€¼ï¼Œè¿™æ ·å®é™…ä¸Šä¼šå­˜åœ¨éšæ€§çš„é—®é¢˜ï¼Œè€Œå¦‚æœç›´æ¥æ ¹æ®<code>Immutable</code>æ¥ç”Ÿæˆ<code>key</code>å€¼çš„è¯ï¼Œä»»ä½•æ–‡æœ¬å†…å®¹çš„æ›´æ”¹éƒ½ä¼šå¯¼è‡´<code>key</code>å€¼æ”¹å˜è¿›è€Œå¯¼è‡´<code>DOM</code>èŠ‚ç‚¹çš„é¢‘ç¹é‡å»ºã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">NODE_TO_KEY</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>&lt;<span class="hljs-title class_">Object</span>.<span class="hljs-property">Any</span>, <span class="hljs-title class_">Key</span>&gt;();
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Key</span> {
  <span class="hljs-comment">/** å½“å‰èŠ‚ç‚¹ id */</span>
  public <span class="hljs-attr">id</span>: string;
  <span class="hljs-comment">/** è‡ªåŠ¨é€’å¢æ ‡è¯†ç¬¦ */</span>
  public <span class="hljs-keyword">static</span> n = <span class="hljs-number">0</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = <span class="hljs-string">`<span class="hljs-subst">${Key.n++}</span>`</span>;
  }

  <span class="hljs-comment">/**
   * æ ¹æ®èŠ‚ç‚¹è·å– id
   * <span class="hljs-doctag">@param</span> <span class="hljs-variable">node</span>
   */</span>
  public <span class="hljs-keyword">static</span> <span class="hljs-title function_">getId</span>(<span class="hljs-attr">node</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-property">Any</span>): string {
    <span class="hljs-keyword">let</span> key = <span class="hljs-variable constant_">NODE_TO_KEY</span>.<span class="hljs-title function_">get</span>(node);
    <span class="hljs-keyword">if</span> (!key) {
      key = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Key</span>();
      <span class="hljs-variable constant_">NODE_TO_KEY</span>.<span class="hljs-title function_">set</span>(node, key);
    }
    <span class="hljs-keyword">return</span> key.<span class="hljs-property">id</span>;
  }
}
</code></pre>
<p>é€šå¸¸ä½¿ç”¨<code>index</code>ä½œä¸º<code>key</code>æ˜¯å¯è¡Œçš„ï¼Œç„¶è€Œåœ¨ä¸€äº›éå—æ§åœºæ™¯ä¸‹åˆ™ä¼šç”±äºåŸåœ°å¤ç”¨é€ æˆæ¸²æŸ“é—®é¢˜ï¼Œ<code>diff</code>ç®—æ³•å¯¼è‡´çš„æ€§èƒ½é—®é¢˜æˆ‘ä»¬æš‚æ—¶å…ˆä¸è€ƒè™‘ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ¯æ¬¡æˆ‘ä»¬éƒ½æ˜¯ä»æ•°ç»„é¡¶éƒ¨åˆ é™¤å…ƒç´ ï¼Œè€Œå®é™…çš„<code>input</code>å€¼æ•ˆæœè¡¨ç°å‡ºæ¥åˆ™æ˜¯åˆ é™¤äº†å°¾éƒ¨çš„å…ƒç´ ï¼Œè¿™å°±æ˜¯åŸåœ°å¤ç”¨çš„é—®é¢˜ã€‚åœ¨éå—æ§åœºæ™¯ä¸‹æ¯”è¾ƒæ˜æ˜¾ï¼Œè€Œæˆ‘ä»¬çš„<code>ContentEditable</code>ç»„ä»¶å°±æ˜¯ä¸€ä¸ªéå—æ§åœºæ™¯ï¼Œå› æ­¤è¿™é‡Œçš„<code>key</code>å€¼éœ€è¦å†è€ƒè™‘ä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { useState, <span class="hljs-title class_">Fragment</span>, useRef, useEffect } = <span class="hljs-title class_">React</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> ref = useRef&lt;<span class="hljs-title class_">HTMLParagraphElement</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [nodes, setNodes] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">10</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> i));

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> [_, ...rest] = nodes;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(rest);
    <span class="hljs-title function_">setNodes</span>(rest);
  };

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> el = ref.<span class="hljs-property">current</span>;
    el &amp;&amp; <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(el.<span class="hljs-property">children</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">it, i</span>) =&gt;</span> ((it <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLInputElement</span>).<span class="hljs-property">value</span> = i + <span class="hljs-string">""</span>));
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>&gt;</span>
        {nodes.map((_, i) =&gt; (<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span>))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>slice<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Fragment</span>&gt;</span></span>
  );
}
</code></pre>
<p>è€ƒè™‘åˆ°å…ˆå‰æåˆ°çš„æˆ‘ä»¬ä¸å¸Œæœ›ä»»ä½•æ–‡æœ¬å†…å®¹çš„æ›´æ”¹éƒ½å¯¼è‡´<code>key</code>å€¼æ”¹å˜å¼•å‘é‡å»ºï¼Œå› æ­¤å°±ä¸èƒ½ç›´æ¥ä½¿ç”¨è®¡ç®—çš„<code>immutable</code>å¯¹è±¡å¼•ç”¨æ¥å¤„ç†<code>key</code>å€¼ï¼Œè€Œæè¿°å•ä¸ª<code>op</code>çš„æ–¹æ³•é™¤äº†<code>insert</code>å°±åªå‰©ä¸‹<code>attributes</code>äº†ã€‚</p>
<p>ä½†æ˜¯å¦‚æœåŸºäº<code>attributes</code>æ¥è·å¾—å°±éœ€è¦ç²¾å‡†æ§åˆ¶åˆå¹¶<code>insert</code>çš„æ—¶å€™å–éœ€è¦å–æ—§çš„å¯¹è±¡å¼•ç”¨ï¼Œä¸”æ²¡æœ‰å±æ€§çš„<code>op</code>å°±ä¸å¥½å¤„ç†äº†ï¼Œå› æ­¤è¿™é‡Œå¯èƒ½åªèƒ½å°†å…¶è½¬ä¸ºå­—ç¬¦ä¸²å¤„ç†ï¼Œä½†æ˜¯è¿™æ ·åŒæ ·ä¸èƒ½ä¿æŒ<code>key</code>çš„å®Œå…¨ç¨³å®šï¼Œå› æ­¤å‰å€¼çš„ç´¢å¼•æ”¹å˜å°±ä¼šå¯¼è‡´åç»­çš„å€¼å‡ºç°å˜æ›´ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> prefix = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>&lt;<span class="hljs-title class_">LineState</span>, <span class="hljs-title class_">Record</span>&lt;string, number&gt;&gt;();
<span class="hljs-keyword">const</span> suffix = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>&lt;<span class="hljs-title class_">LineState</span>, <span class="hljs-title class_">Record</span>&lt;string, number&gt;&gt;();
<span class="hljs-keyword">const</span> mapToString = (<span class="hljs-attr">map</span>: <span class="hljs-title class_">Record</span>&lt;string, string&gt;): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(map)
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${key}</span>:<span class="hljs-subst">${map[key]}</span>`</span>)
    .<span class="hljs-title function_">join</span>(<span class="hljs-string">","</span>);
};
<span class="hljs-keyword">const</span> toKey = (<span class="hljs-attr">state</span>: <span class="hljs-title class_">LineState</span>, <span class="hljs-attr">op</span>: <span class="hljs-title class_">Op</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> key = op.<span class="hljs-property">attributes</span> ? <span class="hljs-title function_">mapToString</span>(op.<span class="hljs-property">attributes</span>) : <span class="hljs-string">""</span>;
  <span class="hljs-keyword">const</span> prefixMap = prefix.<span class="hljs-title function_">get</span>(state) || {};
  prefix.<span class="hljs-title function_">set</span>(state, prefixMap);
  <span class="hljs-keyword">const</span> suffixMap = suffix.<span class="hljs-title function_">get</span>(state) || {};
  suffix.<span class="hljs-title function_">set</span>(state, suffixMap);
  <span class="hljs-keyword">const</span> prefixKey = prefixMap[key] ? prefixMap[key] + <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> suffixKey = suffixMap[key] ? suffixMap[key] + <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
  prefixMap[key] = prefixKey;
  suffixMap[key] = suffixKey;
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${prefixKey}</span>-<span class="hljs-subst">${suffixKey}</span>`</span>;
};
</code></pre>
<p>åœ¨<code>slate</code>ä¸­æˆ‘å…ˆå‰è®¤ä¸ºç”Ÿæˆçš„<code>key</code>è·ŸèŠ‚ç‚¹æ˜¯å®Œå…¨ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œä¾‹å¦‚å½“<code>A</code>èŠ‚ç‚¹å˜åŒ–æ—¶ï¼Œå…¶ä»£è¡¨çš„å±‚çº§<code>key</code>å¿…ç„¶ä¼šå‘ç”Ÿå˜åŒ–ã€‚ç„¶è€Œåœ¨å…³æ³¨è¿™ä¸ªé—®é¢˜ä¹‹åï¼Œæˆ‘å‘ç°å…¶åœ¨æ›´æ–°ç”Ÿæˆæ–°çš„<code>Node</code>ä¹‹åï¼Œä¼šåŒæ­¥æ›´æ–°<code>Path</code>ä»¥åŠ<code>PathRef</code>å¯¹åº”çš„<code>Node</code>èŠ‚ç‚¹æ‰€å¯¹åº”çš„<code>key</code>å€¼ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [pathRef, key] <span class="hljs-keyword">of</span> pathRefMatches) {
  <span class="hljs-keyword">if</span> (pathRef.<span class="hljs-property">current</span>) {
    <span class="hljs-keyword">const</span> [node] = <span class="hljs-title class_">Editor</span>.<span class="hljs-title function_">node</span>(e, pathRef.<span class="hljs-property">current</span>)
    <span class="hljs-variable constant_">NODE_TO_KEY</span>.<span class="hljs-title function_">set</span>(node, key)
  }
  pathRef.<span class="hljs-title function_">unref</span>()
}
</code></pre>
<p>åœ¨åç»­è§‚å¯Ÿ<code>Lexical</code>å®ç°çš„é€‰åŒºæ¨¡å‹æ—¶ï¼Œå‘ç°å…¶æ˜¯ç”¨<code>key</code>å€¼å”¯ä¸€åœ°æ ‡è¯†æ¯ä¸ªå¶å­ç»“ç‚¹çš„ï¼Œé€‰åŒºä¹Ÿæ˜¯åŸºäº<code>key</code>å€¼æ¥æè¿°çš„ã€‚æ•´ä½“è¡¨è¾¾ä¸Šæ¯”è¾ƒç±»ä¼¼äº<code>Slate</code>çš„é€‰åŒºç»“æ„ï¼Œæˆ–è€…è¯´æ˜¯<code>DOM</code>æ ‘çš„ç»“æ„ã€‚è¿™é‡Œä»…ä»…æ˜¯å€¼å¾—<code>Range</code>é€‰åŒºï¼Œ<code>Lexical</code>å®é™…ä¸Šè¿˜æœ‰å…¶ä»–ä¸‰ç§é€‰åŒºç±»å‹ã€‚</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-attr">anchor</span>: { <span class="hljs-attr">key</span>: <span class="hljs-string">"51"</span>, <span class="hljs-attr">offset</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span> },
  <span class="hljs-attr">focus</span>: { <span class="hljs-attr">key</span>: <span class="hljs-string">"51"</span>, <span class="hljs-attr">offset</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span> }
}
</code></pre>
<p>åœ¨è¿™é‡Œæ¯”è¾ƒé‡è¦çš„æ˜¯<code>key</code>å€¼å˜æ›´æ—¶çš„çŠ¶æ€ä¿æŒï¼Œå› ä¸ºç¼–è¾‘å™¨çš„å†…å®¹å®é™…ä¸Šæ˜¯éœ€è¦ç¼–è¾‘çš„ã€‚ç„¶è€Œå¦‚æœåšåˆ°<code>immutable</code>è¯ï¼Œå¾ˆæ˜æ˜¾ç›´æ¥æ ¹æ®çŠ¶æ€å¯¹è±¡çš„å¼•ç”¨æ¥æ˜ å°„<code>key</code>ä¼šå¯¼è‡´æ•´ä¸ªç¼–è¾‘å™¨<code>DOM</code>æ— æ•ˆçš„é‡å»ºã€‚ä¾‹å¦‚è°ƒæ•´æ ‡é¢˜çš„ç­‰çº§ï¼Œå°±ç”±äºæ•´ä¸ªè¡Œ<code>key</code>çš„å˜åŒ–å¯¼è‡´æ•´è¡Œé‡å»ºã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•å°½å¯èƒ½åœ°å¤ç”¨<code>key</code>å€¼å°±æˆäº†éœ€è¦ç ”ç©¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬çš„ç¼–è¾‘å™¨è¡Œçº§åˆ«çš„<code>key</code>æ˜¯è¢«ç‰¹æ®Šç»´æŠ¤çš„ï¼Œå³å®ç°äº†<code>immutable</code>ä»¥åŠ<code>key</code>å€¼å¤ç”¨ã€‚è€Œç›®å‰å¶å­çŠ¶æ€çš„<code>key</code>ä¾èµ–äº†<code>index</code>å€¼ï¼Œå› æ­¤å¦‚æœè°ƒç ”<code>Lexical</code>çš„å®ç°ï¼ŒåŒæ ·å¯ä»¥å°†å…¶åº”ç”¨åˆ°æˆ‘ä»¬çš„<code>key</code>å€¼ç»´æŠ¤ä¸­ã€‚</p>
<p>é€šè¿‡åœ¨<code>playground</code>ä¸­è°ƒè¯•å¯ä»¥å‘ç°ï¼Œå³ä½¿æˆ‘ä»¬ä¸èƒ½å¾—çŸ¥å…¶æ˜¯å¦ä¸º<code>immutable</code>çš„å®ç°ï¼Œä¾ç„¶å¯ä»¥å‘ç°<code>Lexical</code>çš„<code>key</code>æ˜¯ä»¥ä¸€ç§åå·¦çš„æ–¹å¼ç»´æŠ¤ã€‚å› æ­¤åœ¨æˆ‘ä»¬çš„ç¼–è¾‘å™¨å®ç°ä¸­ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©åŒæ ·çš„æ–¹å¼ï¼Œåˆå¹¶ç›´æ¥ä»¥å·¦å€¼ä¸ºå‡†å¤ç”¨ï¼Œæ‹†åˆ†æ—¶è‹¥ä»¥<code>0</code>èµ·å§‹ç›´æ¥å¤ç”¨ï¼Œèµ·å§‹é<code>0</code>åˆ™åˆ›å»ºæ–°<code>key</code>ã€‚</p>
<ol>
<li><code>[123456(key1)][789(bold-key2)]</code>æ–‡æœ¬ï¼Œå°†<code>789</code>çš„åŠ ç²—å–æ¶ˆï¼Œæ•´æ®µæ–‡æœ¬çš„<code>key</code>å€¼ä¿æŒä¸º<code>key1</code>ã€‚</li>
<li><code>[123456789(key1)]]</code>æ–‡æœ¬ï¼Œå°†<code>789</code>è¿™æ®µæ–‡æœ¬åŠ ç²—ï¼Œå·¦ä¾§<code>123456</code>æ–‡æœ¬çš„<code>key</code>å€¼ä¿æŒä¸º<code>key1</code>ï¼Œ<code>789</code>åˆ™æ˜¯æ–°çš„<code>key</code>ã€‚</li>
<li><code>[123456789(key1)]]</code>æ–‡æœ¬ï¼Œå°†<code>123</code>è¿™æ®µæ–‡æœ¬åŠ ç²—ï¼Œå·¦ä¾§<code>123</code>æ–‡æœ¬çš„<code>key</code>å€¼ä¿æŒä¸º<code>key1</code>ï¼Œ<code>456789</code>åˆ™æ˜¯æ–°çš„<code>key</code>ã€‚</li>
<li><code>[123456789(key1)]]</code>æ–‡æœ¬ï¼Œå°†<code>456</code>è¿™æ®µæ–‡æœ¬åŠ ç²—ï¼Œå·¦ä¾§<code>123</code>æ–‡æœ¬çš„<code>key</code>å€¼ä¿æŒä¸º<code>key1</code>ï¼Œ<code>456</code>å’Œ<code>789</code>åˆ†åˆ«æ˜¯æ–°çš„<code>key</code>ã€‚</li>
</ol>
<p>å› æ­¤ï¼Œæ­¤æ—¶åœ¨ç¼–è¾‘å™¨ä¸­æˆ‘ä»¬ä¹Ÿæ˜¯ç”¨ç±»ä¼¼åå·¦çš„æ–¹å¼ç»´æŠ¤<code>key</code>ï¼Œç”±äºæˆ‘ä»¬éœ€è¦ä¿æŒ<code>immutable</code>ï¼Œæ‰€ä»¥è¿™é‡Œçš„è¡¨è¾¾å®é™…ä¸Šæ˜¯å°½å¯èƒ½å¤ç”¨å…ˆå‰çš„<code>key</code>çŠ¶æ€ã€‚è¿™é‡Œä¸<code>LineState</code>çš„<code>key</code>å€¼ç»´æŠ¤æ–¹å¼ç±»ä¼¼ï¼Œéƒ½æ˜¯å…ˆåˆ›å»ºçŠ¶æ€ç„¶åæ›´æ–°å…¶<code>key</code>å€¼ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šç»†èŠ‚çš„åœ°æ–¹éœ€è¦å¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// èµ·å§‹ä¸è£å‰ªä½ç½®ç­‰åŒ NextOp =&gt; Immutable åŸåœ°å¤ç”¨ State</span>
<span class="hljs-keyword">if</span> (offset === <span class="hljs-number">0</span> &amp;&amp; op.<span class="hljs-property">insert</span>.<span class="hljs-property">length</span> &lt;= length) {
  <span class="hljs-keyword">return</span> nextLeaf;
}
<span class="hljs-keyword">const</span> newLeaf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LeafState</span>(retOp, nextLeaf.<span class="hljs-property">parent</span>);
<span class="hljs-comment">// è‹¥ offset æ˜¯ 0, åˆ™ç›´æ¥å¤ç”¨åŸå§‹çš„ key å€¼</span>
offset === <span class="hljs-number">0</span> &amp;&amp; newLeaf.<span class="hljs-title function_">updateKey</span>(nextLeaf.<span class="hljs-property">key</span>);
</code></pre>
<p>è¿™é‡Œè¿˜å­˜åœ¨å¦ä¸€ä¸ªå°é—®é¢˜ï¼Œæˆ‘ä»¬åˆ›å»º<code>LeafState</code>å°±ç«‹å³å»è·å¾—å¯¹åº”çš„<code>key</code>å€¼ï¼Œç„¶åå†è€ƒè™‘å»å¤ç”¨åŸå§‹çš„<code>key</code>å€¼ã€‚è¿™æ ·å…¶å®å°±ä¼šå¯¼è‡´å¾ˆå¤šä¸å†ä½¿ç”¨çš„<code>key</code>å€¼è¢«åˆ›å»ºï¼Œå¯¼è‡´æ¯æ¬¡æ›´æ–°çš„æ—¶å€™çœ‹èµ·æ¥<code>key</code>çš„æ•°å­—å·®å€¼æ¯”è¾ƒå¤§ã€‚å½“ç„¶è¿™å¹¶ä¸å½±å“æ•´ä½“çš„åŠŸèƒ½ä¸æ€§èƒ½ï¼Œåªæ˜¯è°ƒè¯•çš„æ—¶å€™çœ‹èµ·æ¥æ¯”è¾ƒæ€ªã€‚</p>
<p>å› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œè¿˜å¯ä»¥ä¼˜åŒ–è¿™éƒ¨åˆ†è¡¨ç°ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨åˆ›å»ºçš„æ—¶å€™ä¸ä¼šå»ç«‹å³åˆ›å»º<code>key</code>å€¼ï¼Œè€Œæ˜¯åœ¨åˆå§‹åŒ–ä»¥åŠæ›´æ–°çš„æ—¶å€™å†ä»å¤–éƒ¨è®¾ç½®å…¶<code>key</code>å€¼ã€‚è¿™ä¸ªå®ç°å…¶å®è·Ÿ<code>index</code>ã€<code>offset</code>çš„å¤„ç†æ–¹å¼æ¯”è¾ƒç±»ä¼¼ï¼Œæˆ‘ä»¬æ•´ä½“åœ¨<code>update</code>æ—¶å¤„ç†æ‰€æœ‰çš„ç›¸å…³å€¼ï¼Œä¸”å¼€å‘æ¨¡å¼æ¸²æŸ“æ—¶è¿›è¡Œäº†ä¸¥æ ¼æ£€æŸ¥ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// BlockState</span>
<span class="hljs-keyword">let</span> offset = <span class="hljs-number">0</span>;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">lines</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">line, index</span>) =&gt;</span> {
  line.<span class="hljs-property">index</span> = index;
  line.<span class="hljs-property">start</span> = offset;
  line.<span class="hljs-property">key</span> = line.<span class="hljs-property">key</span> || <span class="hljs-title class_">Key</span>.<span class="hljs-title function_">getId</span>(line);
  <span class="hljs-keyword">const</span> size = line.<span class="hljs-property">isDirty</span> ? line.<span class="hljs-title function_">updateLeaves</span>() : line.<span class="hljs-property">length</span>;
  offset = offset + size;
});
<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> = offset;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lines</span>.<span class="hljs-property">length</span>;
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// LineState</span>
<span class="hljs-keyword">let</span> offset = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">ops</span>: <span class="hljs-title class_">Op</span>[] = [];
<span class="hljs-variable language_">this</span>.<span class="hljs-property">leaves</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">leaf, index</span>) =&gt;</span> {
  ops.<span class="hljs-title function_">push</span>(leaf.<span class="hljs-property">op</span>);
  leaf.<span class="hljs-property">offset</span> = offset;
  leaf.<span class="hljs-property">parent</span> = <span class="hljs-variable language_">this</span>;
  leaf.<span class="hljs-property">index</span> = index;
  offset = offset + leaf.<span class="hljs-property">length</span>;
  leaf.<span class="hljs-property">key</span> = leaf.<span class="hljs-property">key</span> || <span class="hljs-title class_">Key</span>.<span class="hljs-title function_">getId</span>(leaf);
});
<span class="hljs-variable language_">this</span>.<span class="hljs-property">_ops</span> = ops;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> = offset;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDirty</span> = <span class="hljs-literal">false</span>;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">leaves</span>.<span class="hljs-property">length</span>;
</code></pre>
<p>æ­¤å¤–ï¼Œåœ¨å®ç°å•å…ƒæµ‹è¯•æ—¶è¿˜å‘ç°ï¼Œåœ¨<code>leaf</code>ä¸Šç‹¬ç«‹ç»´æŠ¤äº†<code>key</code>å€¼ï¼Œé‚£ä¹ˆ<code>\n</code>è¿™ä¸ªç‰¹æ®Šçš„èŠ‚ç‚¹è‡ªç„¶ä¹Ÿä¼šæœ‰ç‹¬ç«‹çš„<code>key</code>å€¼ã€‚è¿™ç§æƒ…å†µä¸‹åœ¨<code>line</code>çº§åˆ«ä¸Šç»´æŠ¤çš„<code>key</code>å€¼å€’æ˜¯ä¹Ÿå¯ä»¥ç›´æ¥å¤ç”¨<code>\n</code>è¿™ä¸ª<code>leaf</code>çš„<code>key</code>å€¼ã€‚å½“ç„¶è¿™åªæ˜¯ç†è®ºä¸Šçš„å®ç°ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ„æƒ³ä¸åˆ°çš„åˆ·æ–°é—®é¢˜ã€‚</p>
<h2 data-id="heading-2">è§†å›¾å¢é‡æ¸²æŸ“</h2>
<p>åœ¨è§†å›¾æ¨¡å—æœ€å¼€å§‹çš„è®¾è®¡ä¸Šï¼Œæˆ‘ä»¬çš„çŠ¶æ€ç®¡ç†å½¢å¼æ˜¯ç›´æ¥å…¨é‡æ›´æ–°<code>Delta</code>ï¼Œç„¶åä½¿ç”¨<code>EachLine</code>éå†é‡å»ºæ‰€æœ‰çš„çŠ¶æ€ã€‚å¹¶ä¸”å®é™…ä¸Šæˆ‘ä»¬ç»´æŠ¤äº†<code>Delta</code>ä¸<code>State</code>ä¸¤ä¸ªæ•°æ®æ¨¡å‹ï¼Œå»ºç«‹å…¶å…³ç³»æ˜ å°„å…³ç³»æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§æŸè€—ï¼Œæ¸²æŸ“çš„æ—¶å€™çš„ç›®æ ‡çŠ¶æ€æ˜¯<code>Delta</code>è€Œé<code>State</code>ã€‚</p>
<p>è¿™æ ·çš„æ¨¡å‹å¿…ç„¶æ˜¯è€—è´¹æ€§èƒ½çš„ï¼Œæ¯æ¬¡<code>Apply</code>çš„æ—¶å€™éƒ½éœ€è¦å…¨é‡æ›´æ–°æ–‡æ¡£å¹¶ä¸”å†æ¬¡éå†åˆ†å‰²è¡ŒçŠ¶æ€ã€‚å½“ç„¶å®é™…ä¸Šåªæ˜¯è®¡ç®—è¿­ä»£çš„è¯ï¼Œå®é™…ä¸Šæ˜¯ä¸ä¼šå¤ªè¿‡äºè€—è´¹æ€§èƒ½ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬æ¯æ¬¡éƒ½æ˜¯æ–°çš„å¯¹è±¡ï¼Œé‚£ä¹ˆåœ¨æ›´æ–°è§†å›¾çš„æ—¶å€™ï¼Œæ›´å®¹æ˜“é€ æˆæ€§èƒ½çš„æŸè€—ï¼Œè®¡ç®—çš„æ€§èƒ½é€šå¸¸å¯æ¥å—ï¼Œè€Œè§†å›¾æ›´æ–°æ“ä½œ<code>DOM</code>æˆæœ¬æ›´é«˜ã€‚</p>
<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¸Šè¾¹å¤ç”¨å…¶<code>key</code>å€¼ï¼Œè§£å†³çš„é—®é¢˜æ˜¯é¿å…æ•´ä¸ªè¡ŒçŠ¶æ€è§†å›¾<code>re-mount</code>ã€‚è€Œå³ä½¿å¤ç”¨äº†<code>key</code>å€¼ï¼Œå› ä¸ºé‡å»ºäº†æ•´ä¸ª<code>State</code>å®ä¾‹ï¼Œ<code>React</code>ä¹Ÿä¼šç»§ç»­åè¾¹çš„<code>re-render</code>æµç¨‹ã€‚å› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œéœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œå¦‚ä½•åœ¨æ— å˜æ›´çš„æƒ…å†µä¸‹å°½å¯èƒ½é¿å…å…¶è§†å›¾<code>re-render</code>ã€‚</p>
<p>ç”±äºæˆ‘ä»¬å®ç°äº†è¡Œçº§ä¸å¯å˜çŠ¶æ€ç»´æŠ¤ï¼Œé‚£ä¹ˆåœ¨è§†å›¾ä¸­å°±å¯ä»¥ç›´æ¥å¯¹æ¯”çŠ¶æ€å¯¹è±¡çš„å¼•ç”¨æ˜¯å¦å˜åŒ–æ¥å†³å®šæ˜¯å¦éœ€è¦é‡æ¸²æŸ“ã€‚å› æ­¤åªéœ€è¦å¯¹äº<code>ViewModel</code>çš„èŠ‚ç‚¹è¡¥å……äº†<code>React.memo</code>ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸‹ç”šè‡³äºä¸éœ€è¦é‡å†™å¯¹æ¯”å‡½æ•°ï¼Œåªéœ€è¦ä¾èµ–æˆ‘ä»¬çš„<code>immutable</code>çŠ¶æ€å¤ç”¨èƒ½å¤Ÿæ­£å¸¸èµ·åˆ°æ•ˆæœã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">LeafView</span>: <span class="hljs-variable constant_">FC</span>&lt;{ <span class="hljs-attr">editor</span>: <span class="hljs-title class_">Editor</span>; <span class="hljs-attr">leafState</span>: <span class="hljs-title class_">LeafState</span>; }&gt; = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> {<span class="hljs-attr">...</span>{ [<span class="hljs-attr">LEAF_KEY</span>]<span class="hljs-attr">:</span> <span class="hljs-attr">true</span> }} &gt;</span>
      {runtime.children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
  );
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">LeafModel</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-title class_">LeafView</span>);
</code></pre>
<p>åŒæ ·çš„ï¼Œé’ˆå¯¹<code>LineView</code>ä¹Ÿéœ€è¦è¡¥å……<code>memo</code>ï¼Œè€Œä¸”ç”±äºç»„ä»¶å†…æœ¬èº«å¯èƒ½å­˜åœ¨çŠ¶æ€å˜åŒ–ï¼Œä¾‹å¦‚<code>Composing</code>ç»„åˆè¾“å…¥çš„æ§åˆ¶ï¼Œæ‰€ä»¥é’ˆå¯¹äºå†…éƒ¨èŠ‚ç‚¹çš„è®¡ç®—ä¹Ÿä¼šé‡‡ç”¨<code>useMemo</code>æ¥ç¼“å­˜ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">LineView</span>: <span class="hljs-variable constant_">FC</span>&lt;{ <span class="hljs-attr">editor</span>: <span class="hljs-title class_">Editor</span>; <span class="hljs-attr">lineState</span>: <span class="hljs-title class_">LineState</span>; }&gt; = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> elements = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
     <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">return</span> nodes;
  }, [editor, lineState]);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...</span>{ [<span class="hljs-attr">NODE_KEY</span>]<span class="hljs-attr">:</span> <span class="hljs-attr">true</span> }} &gt;</span>
      {elements}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">LineModel</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-title class_">LineView</span>);
</code></pre>
<p>è€Œè§†å›¾åˆ·æ–°ä»ç„¶è¿˜æ˜¯ç›´æ¥æ§åˆ¶<code>lines</code>è¿™ä¸ªçŠ¶æ€çš„å¼•ç”¨å³å¯ï¼Œç›¸å½“äºæ ¸å¿ƒå±‚çš„å†…å®¹å˜åŒ–ä¸è§†å›¾å±‚çš„é‡æ¸²æŸ“ï¼Œæ˜¯ç›´æ¥ä¾èµ–äºäº‹ä»¶æ¨¡å—é€šä¿¡å°±å¯ä»¥å®ç°çš„ã€‚ç”±äºæ¯æ¬¡å–<code>lines</code>çŠ¶æ€æ—¶éƒ½æ˜¯æ–°çš„å¼•ç”¨ï¼Œæ‰€ä»¥<code>React</code>ä¼šè®¤ä¸ºçŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œä»è€Œè§¦å‘é‡æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> onContentChange = <span class="hljs-title function_">useMemoFn</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (flushing.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  flushing.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    flushing.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-title function_">setLines</span>(state.<span class="hljs-title function_">getLines</span>());
  });
});
</code></pre>
<p>è€Œè™½ç„¶è§¦å‘äº†æ¸²æŸ“ï¼Œä½†æ˜¯ç”±äº<code>key</code>ä»¥åŠ<code>memo</code>çš„å­˜åœ¨ï¼Œä¼šä»¥<code>line</code>çš„çŠ¶æ€ä¸ºåŸºå‡†è¿›è¡Œå¯¹æ¯”ã€‚åªæœ‰<code>LineState</code>å¯¹è±¡çš„å¼•ç”¨å‘ç”Ÿäº†å˜åŒ–ï¼Œ<code>LineModel</code>è§†å›¾æ‰ä¼šè§¦å‘æ›´æ–°é€»è¾‘ï¼Œå¦åˆ™ä¼šå¤ç”¨åŸæœ‰çš„è§†å›¾ï¼Œè¿™éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¾èµ–<code>React</code>çš„<code>devtools</code>å½•åˆ¶æˆ–<code>Highlight</code>å°±å¯ä»¥è§‚å¯Ÿåˆ°ã€‚</p>
<p>è§†å›¾å¢é‡æ›´æ–°è¿™éƒ¨åˆ†å…¶å®æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯å®ç°ä¸å¯å˜å¯¹è±¡ä»¥åŠ<code>key</code>å€¼ç»´æŠ¤çš„é€»è¾‘éƒ½åœ¨æ ¸å¿ƒå±‚å®ç°ï¼Œè§†å›¾å±‚ä¸»è¦æ˜¯ä¾èµ–å…¶åšè®¡ç®—ï¼Œå¯¹æ¯”æ˜¯å¦éœ€è¦é‡æ¸²æŸ“ã€‚å…¶å®ç±»ä¼¼çš„å®ç°åœ¨ä½ä»£ç çš„åœºæ™¯ä¸­ä¹Ÿå¯ä»¥åº”ç”¨ï¼Œæ¯•ç«Ÿå®é™…ä¸Šå¯Œæ–‡æœ¬ä¹Ÿå°±æ˜¯ç›¸å½“äºä¸€ä¸ªé›¶ä»£ç çš„ç¼–è¾‘å™¨ï¼Œåªä¸è¿‡ç»„è£…çš„ä¸æ˜¯ç»„ä»¶è€Œæ˜¯æ–‡æœ¬ã€‚</p>
<h2 data-id="heading-3">æ€»ç»“</h2>
<p>åœ¨å…ˆå‰æˆ‘ä»¬ä¸»è¦è®¨è®ºäº†è§†å›¾å±‚çš„é€‚é…å™¨è®¾è®¡ï¼Œä¸»è¦æ˜¯å…¨é‡çš„è§†å›¾åˆå§‹åŒ–æ¸²æŸ“ï¼Œä»¥åŠçŠ¶æ€æ¨¡å‹åˆ°<code>DOM</code>ç»“æ„æ€§çš„è§„åˆ™è®¾å®šã€‚åœ¨è¿™é‡Œåˆ™ä¸»è¦è€ƒè™‘æ›´æ–°å¤„ç†æ—¶æ€§èƒ½çš„ä¼˜åŒ–ï¼Œä¸»è¦æ˜¯åœ¨å¢é‡æ›´æ–°æ—¶ï¼Œå¦‚ä½•æœ€å°åŒ–<code>DOM</code>ä»¥åŠ<code>Op</code>æ“ä½œã€<code>key</code>å€¼çš„ç»´æŠ¤ã€ä»¥åŠåœ¨<code>React</code>ä¸­å®ç°å¢é‡æ¸²æŸ“çš„æ–¹å¼ã€‚</p>
<p>å…¶å®æ¥ä¸‹æ¥éœ€è¦è€ƒè™‘è¾“å…¥å†…å®¹æ—¶ï¼Œå¦‚ä½•é¿å…è§„å®šçš„<code>DOM</code>çš„ç»“æ„è¢«ç ´åï¼Œä¸»è¦æ¶‰åŠè„<code>DOM</code>æ£€æŸ¥ã€é€‰åŒºæ›´æ–°ã€æ¸²æŸ“<code>Hook</code>ç­‰ï¼Œè¿™éƒ¨åˆ†å†…å®¹åœ¨<code>#8</code>å’Œ<code>#9</code>çš„è¾“å…¥æ³•å¤„ç†ä¸­å·²ç»æœ‰äº†è¯¦ç»†çš„è®¨è®ºï¼Œå› æ­¤è¿™é‡Œå°±ä¸å†æ¬¡å±•å¼€äº†ã€‚</p>
<p>é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦è®¨è®ºçš„æ˜¯ç¼–è¾‘èŠ‚ç‚¹çš„ç»„ä»¶é¢„è®¾ï¼Œä¾‹å¦‚é›¶å®½å­—ç¬¦ã€<code>Embed</code>èŠ‚ç‚¹ã€<code>Void</code>èŠ‚ç‚¹ç­‰ã€‚ä¸»è¦æ˜¯ä¸ºç¼–è¾‘å™¨çš„æ’ä»¶æ‰©å±•æä¾›é¢„è®¾çš„ç»„ä»¶ï¼Œåœ¨è¿™äº›ç»„ä»¶å†…å­˜åœ¨ä¸€äº›é»˜è®¤çš„è¡Œä¸ºï¼Œå¹¶ä¸”åŒæ ·é¢„è®¾äº†éƒ¨åˆ†<code>DOM</code>ç»“æ„ï¼Œä»¥æ­¤æ¥å®ç°åœ¨è§„å®šèŒƒå›´å†…çš„ç¼–è¾‘å™¨æ“ä½œã€‚</p>
<h2 data-id="heading-4">æ¯æ—¥ä¸€é¢˜</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FEveryDay" target="_blank" title="https://github.com/WindRunnerMax/EveryDay" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a></li>
</ul>
<h2 data-id="heading-5">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2F18.react.dev%2F" target="_blank" title="https://18.react.dev/" ref="nofollow noopener noreferrer">18.react.dev/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2F18.react.dev%2Freference%2Freact%2Fmemo" target="_blank" title="https://18.react.dev/reference/react/memo" ref="nofollow noopener noreferrer">18.react.dev/reference/râ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2F18.react.dev%2Freference%2Freact%2FuseMemo" target="_blank" title="https://18.react.dev/reference/react/useMemo" ref="nofollow noopener noreferrer">18.react.dev/reference/râ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç«¯äº‘ä¸€ä½“ ä¸€å¤©å¼€å‘çš„å…ƒæœåŠ¡-å¥‡è¶£æ•…äº‹åŒ£ç»éªŒåˆ†äº«]]></title>    <link>https://juejin.cn/post/7604690250342383666</link>    <guid>https://juejin.cn/post/7604690250342383666</guid>    <pubDate>2026-02-09T02:51:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604690250342383666" data-draft-id="7604012106154639406" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç«¯äº‘ä¸€ä½“ ä¸€å¤©å¼€å‘çš„å…ƒæœåŠ¡-å¥‡è¶£æ•…äº‹åŒ£ç»éªŒåˆ†äº«"/> <meta itemprop="keywords" content="å‰ç«¯,HarmonyOS,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-09T02:51:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‡å°‘"/> <meta itemprop="url" content="https://juejin.cn/user/4441682708283191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç«¯äº‘ä¸€ä½“ ä¸€å¤©å¼€å‘çš„å…ƒæœåŠ¡-å¥‡è¶£æ•…äº‹åŒ£ç»éªŒåˆ†äº«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4441682708283191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‡å°‘
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.5 å¦‚é±¼å¾—æ°´
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.5 å¦‚é±¼å¾—æ°´" title="VIP.5 å¦‚é±¼å¾—æ°´" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:51:25.000Z" title="Mon Feb 09 2026 02:51:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç«¯äº‘ä¸€ä½“ ä¸€å¤©å¼€å‘çš„å…ƒæœåŠ¡-å¥‡è¶£æ•…äº‹åŒ£ç»éªŒåˆ†äº« <a href="#%E7%AB%AF%E4%BA%91%E4%B8%80%E4%BD%93-%E4%B8%80%E5%A4%A9%E9%87%8D%E6%96%B0%E5%BC%80%E5%8F%91%E7%9A%84%E5%85%83%E6%9C%8D%E5%8A%A1-%E5%A5%87%E8%B6%A3%E6%95%85%E4%BA%8B%E5%8C%A3%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB" title="#%E7%AB%AF%E4%BA%91%E4%B8%80%E4%BD%93-%E4%B8%80%E5%A4%A9%E9%87%8D%E6%96%B0%E5%BC%80%E5%8F%91%E7%9A%84%E5%85%83%E6%9C%8D%E5%8A%A1-%E5%A5%87%E8%B6%A3%E6%95%85%E4%BA%8B%E5%8C%A3%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB">â€‹</a></h2>
<blockquote>
<p>ä¸‡å°‘ï¼šåä¸ºHDEã€é¸¿è’™æå®¢</p>
<p>ä¸ªäººä¸»é¡µï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.zbztb.cn%2F" target="_blank" title="https://blog.zbztb.cn/" ref="nofollow noopener noreferrer">blog.zbztb.cn/</a></p>
<p><strong>2025å¹´å‚ä¸å­µåŒ–äº†20+é¸¿è’™åº”ç”¨ã€æŠ€æœ¯æ–‡ç« 300+ã€é¸¿è’™çŸ¥è¯†åº“ç”¨æˆ·500+ã€é¸¿è’™å…è´¹è¯¾ç¨‹2å¥—ã€‚</strong></p>
<p>å¦‚æœä½ ä¹Ÿå–œæ¬¢äº¤æµAIå’Œé¸¿è’™æŠ€æœ¯ï¼Œæ¬¢è¿æ‰£æˆ‘ã€‚</p>
</blockquote>
<h2 data-id="heading-1">å‰è¨€ <a href="#%E5%89%8D%E8%A8%80" title="#%E5%89%8D%E8%A8%80">â€‹</a></h2>
<p>å­¦ä¹ æŠ€æœ¯æœ€å¥½çš„åšæ³•å°±æ˜¯åº”ç”¨æŠ€æœ¯ï¼Œå¸¦ç€è¿™ä¸ªç›®æ ‡ã€‚</p>
<p>æˆ‘è¿™æ¬¡æ‰“ç®—æ·±åº¦ä½¿ç”¨åä¸º-é¸¿è’™çš„ç«¯äº‘ä¸€ä½“ï¼Œåšä¸€ä¸ªå®Œæ•´çš„ä½œå“ <strong>å¥‡è¶£æ•…äº‹åŒ£</strong>ã€‚</p>
<p>å…ˆçœ‹æˆæœã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a176a33681948d8aef65bb608c1dcba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210286&amp;x-signature=5gYt%2BNSRzRkBNd2jqpYE%2FfChKVc%3D" alt="" loading="lazy"/></p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/953727811031467d8e3414c5b9d2d3a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210286&amp;x-signature=YYFg%2F3ZlBuXJa7qwdrH6MjBYb%2FE%3D" alt="" loading="lazy"/></p>
<p>å¥‡è¶£æ•…äº‹åŒ£å…¶å®åœ¨25å¹´çš„æ—¶å€™å°±å·²ç»ä¸Šæ¶äº†æˆäº†ä¸€ä¸ªå…ƒæœåŠ¡</p>
<p>é‚£æ—¶å€™çš„æ˜¯ä¼ ç»Ÿæ¶æ„</p>
<ol>
<li>javaåç«¯</li>
<li>é¸¿è’™å‰ç«¯</li>
</ol>
<p>å› ä¸ºæ˜¯ä¼ ç»Ÿåç«¯å¼€å‘çš„æ–¹å¼ï¼Œæ‰€ä»¥éœ€è¦ä¸€å®šçš„åç«¯èƒ½åŠ›:</p>
<ol>
<li>åç«¯ç¼–ç¨‹è¯­è¨€</li>
<li>æœåŠ¡å™¨-åŸŸå-è¿ç»´ç­‰</li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹è¿˜æ˜¯å¾ˆè€—äººçš„ï¼Œå°¤å…¶å¯¹äºä¸€ä¸ªåˆå­¦è€…æ¥è¯´ã€‚</p>
<h2 data-id="heading-2">ç«¯äº‘ä¸€ä½“çš„ä¼˜åŠ¿ <a href="#%E7%AB%AF%E4%BA%91%E4%B8%80%E4%BD%93%E7%9A%84%E4%BC%98%E5%8A%BF" title="#%E7%AB%AF%E4%BA%91%E4%B8%80%E4%BD%93%E7%9A%84%E4%BC%98%E5%8A%BF">â€‹</a></h2>
<p>äº‘å¼€å‘ï¼ˆServerlessï¼‰æ˜¯ä¸€ç§ç”±äº‘ç«¯å¹³å°æä¾›æœåŠ¡å™¨å’Œç¯å¢ƒã€è®©å¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘çš„æŒ‰éœ€æœåŠ¡æ¶æ„ï¼Œå…·å¤‡é›¶è¿ç»´ã€å¼¹æ€§ä¼¸ç¼©ã€å®‰å…¨å¯é ç­‰ä¼˜åŠ¿ï¼Œå¹¶æ”¯æŒç«¯äº‘ä¸€ä½“åŒ–å¼€å‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eff4cc23324498ab4d7c0a037ee5419~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210286&amp;x-signature=kwQYHLxAFeF%2BZK8xVX4jXEnXepQ%3D" alt="" loading="lazy"/></p>
<p>æ€»çš„æ¥è¯´ï¼Œå¼€å‘è€…åªéœ€è¦åœ¨ä¸¤ä¸ªçª—å£å†…åŸºæœ¬å°±å¯ä»¥å®Œæˆæ•´ä¸ªåº”ç”¨çš„å¼€å‘ã€‚</p>
<h2 data-id="heading-3">ç¯å¢ƒä¸€è§ˆ <a href="#%E7%8E%AF%E5%A2%83%E4%B8%80%E8%A7%88" title="#%E7%8E%AF%E5%A2%83%E4%B8%80%E8%A7%88">â€‹</a></h2>
<ol>
<li><strong>AGCå¹³å°-ç®¡ç†äº‘ç«¯èµ„æº</strong></li>
<li><strong>DevEco Studio å®ç°å…¨é“¾è·¯å¼€å‘</strong></li>
</ol>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3834193d8c3a402abc52d9dc4e14b6e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210286&amp;x-signature=ib6MSN%2B%2BPRt3nF9y7xhahcM5hMo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9a24db813c24697a2851d92438c05e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210286&amp;x-signature=mXZTrARmv17mGVIAuCS4Epu909s%3D" alt="" loading="lazy"/></p>
<hr/>
<p>å…¶ä¸­å…³äºäº‘ç«¯çš„è°ƒè¯•ï¼ŒDevEco Studioä¸­ä¹Ÿæä¾›äº†è°ƒè¯•é¢æ¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1c380af8f1045e38e2f90dbe890a320~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210286&amp;x-signature=Z7SPVKU1UcVPmjatlv4Bq%2B2dXVg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1146f5e32a4740548073d899a894215b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210286&amp;x-signature=uXqhoyLiof0%2Fk2ZVF3C0Lf25L7A%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">ç«¯äº‘ä¸€ä½“çš„æ¦‚å¿µè¯¦è§£ <a href="#%E7%AB%AF%E4%BA%91%E4%B8%80%E4%BD%93%E7%9A%84%E6%A6%82%E5%BF%B5%E8%AF%A6%E8%A7%A3" title="#%E7%AB%AF%E4%BA%91%E4%B8%80%E4%BD%93%E7%9A%84%E6%A6%82%E5%BF%B5%E8%AF%A6%E8%A7%A3">â€‹</a></h2>
<p>è®¤è¯æœåŠ¡ï¼šåŠ©åŠ›åº”ç”¨å¿«é€Ÿæ„å»ºå®‰å…¨å¯é çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿã€‚ äº‘å‡½æ•°ï¼š æä¾›ServerlessåŒ–çš„ä»£ç å¼€å‘ä¸è¿è¡Œå¹³å°ã€‚ äº‘æ•°æ®åº“ï¼šæä¾›ç«¯äº‘æ•°æ®çš„ååŒç®¡ç†ã€‚ äº‘ç¼“å­˜ï¼šä¸ºäº‘å‡½æ•°æä¾›Key-Valueå‹é«˜é€Ÿç¼“å­˜ã€‚ äº‘å­˜å‚¨ï¼šåŠ©åŠ›åº”ç”¨å­˜å‚¨å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å†…å®¹ï¼Œå¹¶æä¾›é«˜å“è´¨çš„ä¸Šä¼ ã€ä¸‹è½½ã€åˆ†äº«èƒ½åŠ›ã€‚ äº‘ç›‘æ§ï¼šæä¾›äº‘å¼€å‘æœåŠ¡çš„è¿è¡ŒæŒ‡æ ‡ã€æ—¥å¿—å’Œå‘Šè­¦ï¼ŒåŠ©åŠ›å®æ—¶æ´å¯ŸæœåŠ¡è¿è¡ŒçŠ¶æ€ã€‚ APIç½‘å…³ï¼šä¸€ä¸ªAPIå¼€æ”¾å¹³å°ï¼Œæ”¯æŒå¯¹å¤šç§APIæºçš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚ äº‘æ‰˜ç®¡ï¼šæä¾›ç½‘ç«™çš„æ‰˜ç®¡å’Œé™æ€CDNåŠ é€Ÿã€‚ äº‘åº”ç”¨å¼•æ“ï¼šæä¾›åŒ…æ‹¬éƒ¨ç½²ã€è¿è¡Œã€è¿ç»´åœ¨å†…çš„ä¸€ç«™å¼åº”ç”¨æ‰˜ç®¡æ–¹æ¡ˆã€‚</p>
<hr/>
<p>å…¶ä¸­æœ€åŸºæœ¬çš„<strong>äº‘å‡½æ•°</strong>ã€<strong>äº‘æ•°æ®åº“</strong>ã€<strong>äº‘å­˜å‚¨</strong>è¶³å¤Ÿæ”¯æ’‘èµ·ä¸€ä¸ªå·®ä¸å¤šçš„åº”ç”¨äº†ã€‚</p>
<h2 data-id="heading-5">ç»éªŒåˆ†äº« <a href="#%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB" title="#%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB">â€‹</a></h2>
<p>è¿‡ç¨‹ä¸­ç¡®å®è¿˜æ˜¯å°‘ä¸äº†ä¸€äº›é—®é¢˜</p>
<ol>
<li>ç«¯äº‘ä¸€ä½“çš„ç¯å¢ƒï¼Œä½†æ˜¯æ•°æ®åº“ã€æ•°æ®è¡¨ä»¥åŠå®ƒä»¬çš„å…³è”ï¼Œå…¶å®éƒ½éœ€è¦è‡ªå·±å…ˆå»è®¾è®¡ã€‚</li>
<li>é‚£å¦å¤–æ¯”å¦‚æˆ‘ä»¬æ‰€åšçš„è¿™ä¸ªæ•…äº‹ç±»çš„åº”ç”¨ï¼Œå®ƒæœ‰ä¸€äº›æ•…äº‹ï¼Œç„¶åä¸€äº›å›¾ç‰‡ï¼Œå¯èƒ½è¿˜åŒ…æ‹¬ä¸€äº›è§†é¢‘ç­‰ç­‰ï¼Œè¿™äº›ç´ æå…¶å®ä¹Ÿéœ€è¦è‡ªå·±å»è®¾è®¡çš„ã€‚</li>
<li>è¿‡ç¨‹å½“ä¸­è¿˜æœ‰ä¸å°‘æ˜¯å…³äºä¸€äº›æƒé™çš„é—®é¢˜ï¼Œå°±æ˜¯ä½ æ€ä¹ˆæ ·æŠŠæœ¬åœ°è®¾è®¡å¥½çš„ä¸€äº›æ•°æ®è¡¨åŒæ­¥åˆ°è¿™ä¸ªAGCå¹³å°ä¸Šã€‚</li>
<li>å¦‚æœæ˜¯åº”ç”¨å†…ç”¨æˆ·äº§ç”Ÿçš„æ•°æ®ï¼Œå®ƒåˆæ˜¯å¦æœ‰ä»€ä¹ˆæƒé™ï¼Œç„¶åå¯ä»¥åŒæ­¥ä¸Šå»ï¼Œè¿™ä¸€å—å…¶å®éƒ½è¦è¸©ä¸€äº›å‘</li>
<li>æœ€åå†è¯´ä¸€äº›åœºé¢è¯ï¼Œæˆ‘ä»¬å­¦æŠ€æœ¯å…¶å®æœ€å¥½çš„æ–¹å¼å°±æ˜¯åšä¸€äº›äº§å“ï¼Œè¿™ä¸ªè¸©å‘å…¶å®æ˜¯å¿…ç„¶çš„ã€‚è¿‡åå‘¢ï¼Œæˆ‘ä»¬ç›¸ä¿¡å†åšç¬¬äºŒä¸ªç¬¬ä¸‰ä¸ªåº”ç”¨ä¹‹å‰çš„ä¸€äº›å‘å°±ä¼šå˜æˆæˆ‘ä»¬å®é™…çš„å¼€å‘ç»éªŒäº†ã€‚</li>
</ol>
<h2 data-id="heading-6">å¼€å‘è¿‡ç¨‹ä¸­çš„æŠ€æœ¯åˆ†äº« <a href="#%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB" title="#%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB">â€‹</a></h2>
<p>25å¹´ã€26å¹´å·²ç»æœ‰è‹—å¤´éƒ½åœ¨å®£ä¼  <strong>ä¸€ä¸ªäººå…¬å¸</strong>ï¼Œæ‰€ä»¥ä½œä¸ºç‹¬ç«‹çš„ä¸ªä½“åªè¦æ˜¯å…³äºæé«˜ç”Ÿäº§åŠ›çš„ï¼Œå¯èƒ½éƒ½éœ€è¦äº†è§£åŒ…æ‹¬ä½¿ç”¨ã€‚</p>
<p>è¿™é‡Œåˆ†äº«ä¸€ä¸‹æˆ‘çš„å¼€å‘ é…å¥—æŠ€æœ¯ï¼š</p>
<ol>
<li>ä½¿ç”¨äº†æµ·å¤–ç‰ˆæœ¬çš„Trae+Gemini3-Proå®Œæˆç›®å‰åŠŸèƒ½çš„å¼€å‘</li>
<li>ä½¿ç”¨äº†æ™ºèƒ½ä½“ã€skillã€ruleã€mcpç­‰ä¸»æµAIæŠ€æœ¯</li>
<li>ä½¿ç”¨äº†HarmonyOSè‡ªåŠ¨æ„å»ºè„šæœ¬</li>
<li>ä½¿ç”¨çš„æ˜¯å…ƒæœåŠ¡+V2çŠ¶æ€ç®¡ç†+Navigation</li>
<li>ä½¿ç”¨äº†AIè„šæœ¬æ‰¹é‡ç”Ÿäº§ç´ æ</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92b1815d22cc478f9f20a932f069490c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210286&amp;x-signature=3PqfBXHz8UdigH2nPFs23C4XVqk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">è¿™ä¼šçš„æˆåŠŸ <a href="#%E8%BF%99%E4%BC%9A%E7%9A%84%E6%88%90%E5%8A%9F" title="#%E8%BF%99%E4%BC%9A%E7%9A%84%E6%88%90%E5%8A%9F">â€‹</a></h2>
<p>æ­¤æ—¶çš„æ—¶é—´æ˜¯<strong>2026å¹´2æœˆ7æ—¥22:35:25</strong>ï¼Œè¾¹èŠå¤©çš„æ—¶å€™æˆ‘ä¹Ÿç»™è¿™ä¸ªåº”ç”¨æ¥å…¥äº†ç”¨æˆ·ç³»ç»Ÿäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/833714ad3e1b4bc983245c95e16affd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210286&amp;x-signature=81%2BR%2BeSLXnWyXeXKAn7ZkJG8yBE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">æ€»ç»“ <a href="#%E6%80%BB%E7%BB%93" title="#%E6%80%BB%E7%BB%93">â€‹</a></h2>
<ol>
<li>AIæ—¶ä»£ï¼Œè¦å­¦ä¼šå·¥å…·æ¥ææ•ˆ</li>
<li>é¸¿è’™çš„ç«¯äº‘ä½¿ç”¨å¾ˆæ–¹ä¾¿ï¼Œå€¼å¾—ä¸€è¯•</li>
</ol>
<h2 data-id="heading-9">å‚è€ƒé“¾æ¥ <a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5" title="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">â€‹</a></h2>
<ol>
<li>
<p>ç«¯äº‘ä¸€ä½“</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2FAppGallery-connect-Guides%2Fagc-serverless-overview-0000001509965245" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-Guides/agc-serverless-overview-0000001509965245" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p>
</blockquote>
</li>
<li>
<p>ç«¯äº‘ä¸€ä½“æ•™ç¨‹</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.zbztb.cn%2F%25E9%25B8%25BF%25E8%2592%2599%25E5%25BC%2580%25E5%258F%2591%25E6%258A%2580%25E5%25B7%25A7%2FHarmonyOSNext%2520%25E7%25AB%25AF%25E4%25BA%2591%25E4%25B8%2580%25E4%25BD%2593%25E5%258C%2596%2FHarmonyOSNext%2520%25E7%25AB%25AF%25E4%25BA%2591%25E4%25B8%2580%25E4%25BD%2593%25E5%258C%2596%25E5%25AE%258C%25E6%2595%25B4%25E7%2589%2588%2FHarmonyOSNext%2520%25E7%25AB%25AF%25E4%25BA%2591%25E4%25B8%2580%25E4%25BD%2593%25E5%258C%2596%25E5%25AE%258C%25E6%2595%25B4%25E7%2589%2588.html" target="_blank" title="https://blog.zbztb.cn/%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7/HarmonyOSNext%20%E7%AB%AF%E4%BA%91%E4%B8%80%E4%BD%93%E5%8C%96/HarmonyOSNext%20%E7%AB%AF%E4%BA%91%E4%B8%80%E4%BD%93%E5%8C%96%E5%AE%8C%E6%95%B4%E7%89%88/HarmonyOSNext%20%E7%AB%AF%E4%BA%91%E4%B8%80%E4%BD%93%E5%8C%96%E5%AE%8C%E6%95%B4%E7%89%88.html" ref="nofollow noopener noreferrer">blog.zbztb.cn/é¸¿è’™å¼€å‘æŠ€å·§/Harmâ€¦</a></p>
</blockquote>
</li>
</ol>
<p><strong>å…³æ³¨æˆ‘</strong>ï¼ŒæŒç»­åˆ†äº«<strong>é¸¿è’™å¼€å‘</strong> + <code>AI</code> ææ•ˆçš„å®æˆ˜æŠ€å·§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸Šä¸‡çº§æ–‡ä»¶ä¸€èµ·å¯è§†åŒ–ï¼Œæ€ä¹ˆåŠï¼Ÿç­”æ¡ˆæ˜¯åŸºäº ParaView çš„è¿œç¨‹å¯è§†åŒ–]]></title>    <link>https://juejin.cn/post/7604093823958237203</link>    <guid>https://juejin.cn/post/7604093823958237203</guid>    <pubDate>2026-02-09T02:42:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823958237203" data-draft-id="7603911453704962091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸Šä¸‡çº§æ–‡ä»¶ä¸€èµ·å¯è§†åŒ–ï¼Œæ€ä¹ˆåŠï¼Ÿç­”æ¡ˆæ˜¯åŸºäº ParaView çš„è¿œç¨‹å¯è§†åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T02:42:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="serioyaoyao"/> <meta itemprop="url" content="https://juejin.cn/user/3702810895220093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸Šä¸‡çº§æ–‡ä»¶ä¸€èµ·å¯è§†åŒ–ï¼Œæ€ä¹ˆåŠï¼Ÿç­”æ¡ˆæ˜¯åŸºäº ParaView çš„è¿œç¨‹å¯è§†åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3702810895220093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    serioyaoyao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:42:36.000Z" title="Mon Feb 09 2026 02:42:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ¦‚è¿°</h2>
<p>åœ¨ CFD/FEA ç­‰ä»¿çœŸåœºæ™¯é‡Œï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€ç§â€œçœ‹èµ·æ¥å¾ˆæœ´ç´ ã€åšèµ·æ¥å¾ˆè¦å‘½â€çš„éœ€æ±‚ï¼š</p>
<ul>
<li>ä¸€æ¬¡ä»»åŠ¡å¯¼å‡ºä¸Šä¸‡å¸§ï¼ˆä¸Šä¸‡çº§æ–‡ä»¶ï¼‰ç»“æœï¼Œå•å¸§å¯èƒ½æ˜¯ <code>.vtu/.vtk</code>ï¼›</li>
<li>éœ€è¦åœ¨æµè§ˆå™¨é‡Œæµç•…æ‹–åŠ¨æ—¶é—´è½´ã€åˆ‡æ¢ç‰©ç†é‡ã€è£å‰ª/åˆ‡ç‰‡ã€å¯¹æ¯”å¤šè§†å›¾ï¼›</li>
<li>æ•°æ®ä½“é‡å¤§ã€ç”¨æˆ·ç½‘ç»œç¯å¢ƒå¤æ‚ï¼Œè€Œä¸”è¿˜å¸Œæœ›å¤šäººåŒæ—¶è®¿é—®ã€‚</li>
</ul>
<p>ï¼ˆè¿™ä¸‰ç‚¹ï¼Œå°±æ˜¯æˆ‘å¼€å‘æ—¶ï¼Œäº§å“ç»ç†æçš„éœ€æ±‚ï¼‰</p>
<p>ã€æ³¨é‡Šï¼šã€‘</p>
<p>1.CFD:Computational Fluid Dynamicsï¼Œè®¡ç®—æµä½“åŠ›å­¦</p>
<p>Â å…¸å‹ä»¿çœŸåœºæ™¯:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5b5e32c958b48f99388bc72eb8f2ce0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2VyaW95YW95YW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210161&amp;x-signature=es%2FjhURv84iuFQI8vSUDfbUN0A8%3D" alt="Improving Aircraft Aerodynamics With CFD Simulation" loading="lazy"/></p>
<p>2.FEAï¼ˆFinite Element Analysisï¼Œæœ‰é™å…ƒåˆ†æï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/113122b472ec469ca3be5e535a87180a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2VyaW95YW95YW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210161&amp;x-signature=prLm0usAjDNU4gLwxlFmDOUGL%2BQ%3D" alt="What Is FEA | Finite Element Analysis? (Ultimate Guide) | SimScale" loading="lazy"/></p>
<p>å¦‚æœæŠŠè¿™ä»¶äº‹å½“æˆâ€œå‰ç«¯æŠŠæ‰€æœ‰æ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œç”¨ WebGL è‡ªå·±ç”»â€ï¼ŒåŸºæœ¬ä¼šè¸©åˆ°ï¼šä¸‹è½½ã€è§£æã€å†…å­˜ã€GPUã€äº¤äº’å»¶è¿Ÿç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼ˆæˆ‘æœ€å¼€å§‹æ¥åˆ°éœ€æ±‚æ—¶ï¼Œå°±æ˜¯è¿™æ ·åšçš„ï¼Œè¾›è¾›è‹¦è‹¦åšå®Œï¼Œé‡ä¸Šä¸Šä¸‡ä¸ªæ–‡ä»¶åŠ è½½ã€æ¸²æŸ“ï¼Œç›´æ¥æµè§ˆå™¨å¡æ­»ğŸ˜¤ï¼‰</p>
<p>è¿™ç¯‡æ–‡ç« åˆ†äº«ä¸€ä¸ªåœ¨å·¥ç¨‹ä¸Šæ›´ç¨³å¦¥çš„ç­”æ¡ˆï¼šåŸºäº ParaView çš„è¿œç¨‹å¯è§†åŒ–ï¼ˆRemote Renderingï¼‰ã€‚(é‡ä¸Šæµè§ˆå™¨å¡é¡¿ã€å¡æ­»åï¼Œé¡¹ç›®è´Ÿè´£äººæä¾›äº†å¦ä¸€ä¸ªæ€è·¯ï¼Œäºæ˜¯å¼€å¯æŠ€æœ¯è°ƒç ”ã€å†™demoã€æ”¾å…¥å®é™…é¡¹ç›®ä½¿ç”¨ã€‚ï¼‰</p>
<p>æœ¬æ–‡åŸºäºæˆ‘åœ¨é¡¹ç›®ä¸­çš„è½åœ°å®è·µï¼š</p>
<ul>
<li>åç«¯ä½¿ç”¨ <code>pvpython</code>ï¼ˆParaView è‡ªå¸¦ Pythonï¼‰+ <code>wslink</code> + <code>paraview.web</code> è¿›è¡Œæ¸²æŸ“ä¸ RPCï¼›</li>
<li>å‰ç«¯ä½¿ç”¨ <code>vite + vue</code>Â + <code>@kitware/vtk.js</code> çš„ <code>vtkRemoteView</code> æ¥æ”¶å›¾åƒæµå¹¶è½¬å‘äº¤äº’äº‹ä»¶ï¼›</li>
<li>å¯¹â€œdev å¼€å‘æ¨¡å¼â€æä¾›äº† <strong>ç½‘å…³éš”ç¦»</strong>ï¼šæ¯ä¸ªæµè§ˆå™¨è¿æ¥å¯åŠ¨ç‹¬ç«‹çš„ <code>pvpython</code> å­è¿›ç¨‹ï¼Œé¿å…å¤šçª—å£äº’ç›¸è¦†ç›–ã€‚</li>
</ul>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºï¼š</p>
<blockquote>
<p>æµè§ˆå™¨åªè´Ÿè´£â€œçœ‹å›¾ + äº¤äº’â€ï¼ŒæœåŠ¡ç«¯è´Ÿè´£â€œè¯»æ•°æ® + å»ºç®¡çº¿ + GPU æ¸²æŸ“â€ã€‚</p>
<p>å¯¹â€œä¸‡çº§æ–‡ä»¶/æ—¶é—´åºåˆ—â€çš„ç§‘å­¦å¯è§†åŒ–ï¼Œæœ€å®¹æ˜“è§„æ¨¡åŒ–çš„åšæ³•å¾€å¾€æ˜¯ï¼š<strong>æŠŠæ¸²æŸ“ç•™åœ¨æœåŠ¡ç«¯ï¼ŒæŠŠäº¤äº’ç•™åœ¨æµè§ˆå™¨</strong>ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30e02036cdfa4c97a2bda0547227d244~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2VyaW95YW95YW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210161&amp;x-signature=YbrxRP9zjlP0FPRcG4csuJ6MkD8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€ä¸ºä»€ä¹ˆâ€œä¸Šä¸‡çº§æ–‡ä»¶â€ä¼šæŠŠå¸¸è§„æ–¹æ¡ˆæ‰“çˆ†ï¼Ÿ</h2>
<p>å…ˆæŠŠé—®é¢˜æ‹†å¼€çœ‹ï¼Œâ€œä¸Šä¸‡çº§æ–‡ä»¶å¯è§†åŒ–â€é€šå¸¸åŒæ—¶åŒ…å« 4 ä¸ªå‹åŠ›æºï¼š</p>
<p><strong>1.I/O å‹åŠ›</strong></p>
<ul>
<li>æ–‡ä»¶æ•°é‡ä¸Šæ¥ä»¥åï¼Œç›®å½•éå†ã€æ’åºã€æ‰“å¼€æ–‡ä»¶å¥æŸ„ã€å…ƒæ•°æ®è¯»å–éƒ½ä¼šå˜æ…¢ã€‚</li>
<li>å³ä½¿å•å¸§ä¸å¤§ï¼Œä¸Šä¸‡æ¬¡æ‰“å¼€/å…³é—­ä¹Ÿå¾ˆå¯è§‚ã€‚</li>
</ul>
<p><strong>2.è§£æä¸å†…å­˜å‹åŠ›</strong></p>
<ul>
<li><code>.vtu/.vtk</code> è§£ææˆæœ¬é«˜ï¼Œå°¤å…¶æ˜¯å¤æ‚ç½‘æ ¼/é«˜é˜¶å•å…ƒ/å¤šæ•°ç»„ã€‚</li>
<li>æµè§ˆå™¨å†…å­˜ã€GPU æ˜¾å­˜éƒ½æ›´ç´§å¼ ï¼Œç¨ä¸æ³¨æ„å°±å´©æºƒæˆ–å¡æ­»ã€‚</li>
</ul>
<p><strong>3.ç½‘ç»œä¸å¸¦å®½å‹åŠ›</strong></p>
<ul>
<li>æŠŠæ•°æ®ä¸‹å‘åˆ°æµè§ˆå™¨æ„å‘³ç€ï¼šä¼ è¾“æˆæœ¬é«˜ã€ç­‰å¾…æ—¶é—´é•¿ã€å¼±ç½‘ä½“éªŒå·®ã€‚</li>
</ul>
<p><strong>4.äº¤äº’å»¶è¿Ÿä¸å·¥ç¨‹å¤æ‚åº¦</strong></p>
<ul>
<li>â€œæ‹–æ—¶é—´è½´ + å®æ—¶æ›´æ–°ç”»é¢â€å¯¹ç«¯åˆ°ç«¯å»¶è¿Ÿéå¸¸æ•æ„Ÿã€‚</li>
<li>å‰ç«¯è‡ªå·±ç®¡ç† time stepsã€é¢œè‰²æ˜ å°„ã€è£å‰ªæ»¤é•œç­‰ï¼Œä¼šæŠŠå¯è§†åŒ–ç³»ç»Ÿå˜æˆä¸€ä¸ªâ€œé‡å®¢æˆ·ç«¯â€ã€‚</li>
</ul>
<p>å¦‚æœä½ å¸Œæœ›æœ€ç»ˆä½“éªŒæ¥è¿‘ ParaView æ¡Œé¢ç«¯ï¼ŒåŒæ—¶è¿˜è¦æµè§ˆå™¨å¯ç”¨ã€å¤šäººå¯è®¿é—®ï¼š</p>
<blockquote>
<p>æŠŠæ¸²æŸ“æ”¾åœ¨æœåŠ¡ç«¯ï¼ˆæœ€å¥½æœ‰ GPUï¼‰ï¼Œè®©æµè§ˆå™¨åªåšäº¤äº’ä¸æ˜¾ç¤ºï¼Œé€šå¸¸æ˜¯æœ€åˆ’ç®—çš„æ¶æ„é€‰æ‹©ã€‚</p>
</blockquote>
<h2 data-id="heading-2">ä¸‰ã€æ–¹æ¡ˆï¼šParaView è¿œç¨‹æ¸²æŸ“ï¼ˆRemote Renderingï¼‰</h2>
<ul>
<li>
<p><strong>æœåŠ¡ç«¯</strong>ï¼š<code>pvpython</code> è¿›ç¨‹å†…è¿è¡Œ ParaView pipelineï¼Œç¦»å±æ¸²æŸ“ï¼ŒæŠŠç”»é¢ç¼–ç ä¸ºå›¾ç‰‡æµï¼Œç» WebSocket æ¨é€ã€‚</p>
</li>
<li>
<p><strong>å®¢æˆ·ç«¯</strong>ï¼š<code>vtkRemoteView</code> æ¥æ”¶å›¾åƒå¹¶æ˜¾ç¤ºåˆ° canvasï¼›é¼ æ ‡/é”®ç›˜äº‹ä»¶é€šè¿‡ <code>wslink</code> å‘å›æœåŠ¡ç«¯ã€‚</p>
</li>
<li>
<p>æ•°æ®ç•™åœ¨æœåŠ¡ç«¯ï¼›</p>
</li>
<li>
<p>æµè§ˆå™¨æ‹¿åˆ°çš„æ˜¯â€œæ¯ä¸€å¸§çš„æ¸²æŸ“ç»“æœï¼ˆå›¾åƒï¼‰â€ï¼›</p>
</li>
<li>
<p>äº¤äº’æ˜¯â€œäº‹ä»¶/æŒ‡ä»¤â€ï¼Œä¸æ˜¯â€œä¼ æ¨¡å‹â€ã€‚</p>
</li>
</ul>
<p>ç°åœ¨çš„æ¶æ„ï¼Œå˜æˆï¼š</p>
<ul>
<li>
<p><strong>æœåŠ¡ç«¯æ˜¯â€œå¯è§†åŒ–å¼•æ“â€</strong>ï¼šè¯»æ•°æ®ã€å»ºç®¡çº¿ã€ç®—é¢œè‰²æ˜ å°„ã€åšè£å‰ª/åˆ‡ç‰‡ã€æ¸²æŸ“ã€‚</p>
</li>
<li>
<p><strong>æµè§ˆå™¨æ˜¯â€œè¿œç¨‹æ§åˆ¶å™¨â€</strong>ï¼šæ¸²æŸ“ç»“æœæ˜¯å›¾åƒæµï¼›äº¤äº’å°±æ˜¯äº‹ä»¶å’Œå‚æ•°ã€‚</p>
</li>
</ul>
<h2 data-id="heading-3">å››ã€æ ¸å¿ƒåŠŸèƒ½</h2>
<ul>
<li>
<p><strong>ä¸‡çº§æ–‡ä»¶æ—¶é—´åºåˆ—å›æ”¾</strong>ï¼ˆç›®å½•ä¸‹ <code>.vtu/.vtk</code> åºåˆ—ï¼‰ï¼šæ’­æ”¾/æš‚åœã€é€å¸§åˆ‡æ¢ã€å¾ªç¯ã€å¸§ç‡ã€‚</p>
</li>
<li>
<p><strong>åœºæ•°æ®åˆ‡æ¢</strong>ï¼šç‚¹/å•å…ƒå­—æ®µï¼ˆPOINTS/CELLSï¼‰è‡ªåŠ¨è¯†åˆ«ï¼Œå‘é‡æ”¯æŒ Magnitude/åˆ†é‡é€‰æ‹©ã€‚</p>
</li>
<li>
<p><strong>äº¤äº’ä¸ç›¸æœº</strong>ï¼šæ—‹è½¬/å¹³ç§»/ç¼©æ”¾ã€é‡ç½®ç›¸æœºã€å›´ç»•ç‰©ä½“ä¸­å¿ƒæ—‹è½¬ã€‚</p>
</li>
<li>
<p><strong>è£å‰ª/åˆ‡ç‰‡</strong>ï¼šX/Y/Z è½´åˆ‡ç‰‡æˆ–è£å‰ªï¼ˆé¡¹ç›®ä¸­ demo2/demo5/dev å…·å¤‡ç›¸å…³èƒ½åŠ›ï¼‰ã€‚</p>
</li>
<li>
<p><strong>å¤šè§†å›¾å¯¹æ¯”</strong>ï¼šåŒä¸€æ•°æ®ä¸åŒç‰©ç†é‡å¹¶æ’æ¸²æŸ“ï¼ˆdemo6/dev çš„ multiviewï¼‰ã€‚</p>
</li>
<li>
<p><strong>è¿œç¨‹åŠ è½½</strong>ï¼šæ”¯æŒä»ç½‘ç»œç›˜/æŒ‚è½½ç›˜è¯»å–ä»»åŠ¡æ•°æ®ï¼ˆ<code>DEV_NETWORK_ROOT</code>ï¼‰ã€‚</p>
</li>
</ul>
<h2 data-id="heading-4">äº”ã€æ’å‘æ¸…å•</h2>
<p>å¦‚æœä½ ä¹Ÿå‡†å¤‡è½åœ° ParaViewWebï¼Œè¿™äº›å‘æˆ‘å»ºè®®ä½ åœ¨ README æˆ–è¿ç»´æ–‡æ¡£é‡Œæ˜ç¡®å†™å‡ºæ¥ï¼š</p>
<ol>
<li>
<p>åç«¯å¿…é¡»ç”¨ <code>pvpython</code> å¯åŠ¨ï¼ˆparaviewè‡ªå¸¦ï¼Œä¸æ˜¯ <code>python</code>ï¼‰ã€‚</p>
</li>
<li>
<p>å¤šäººè®¿é—®è¦è€ƒè™‘éš”ç¦»ï¼ˆæœ€ç®€å•å°±æ˜¯æ¯è¿æ¥ä¸€ä¸ªè¿›ç¨‹ï¼‰ã€‚</p>
</li>
<li>
<p>å›¾åƒæµå¸¦å®½/æ¶ˆæ¯å¤§å°è¦æå‰è¯„ä¼°ï¼Œå°¤å…¶æ˜¯ 4K/å¤šè§†å›¾ã€‚</p>
</li>
<li>
<p>æ—¶é—´åºåˆ—ä¸€å®šè¦åšâ€œæ—¶é—´æ­¥å…œåº•â€ï¼ˆè¯»ä¸åˆ° TimestepValues å°±ç”¨ <code>0..N-1</code>ï¼‰ã€‚</p>
</li>
<li>
<p>é¡¹ç›®éƒ¨ç½²ä¸æ–‡ä»¶å­˜å‚¨æœåŠ¡å™¨ä¸åœ¨ä¸€èµ·æ—¶ï¼Œè€ƒè™‘ç”¨æŒ‚è½½è¿œç¨‹æœåŠ¡å™¨æ•°æ®è¿›è¡Œå¼€å‘</p>
<p>è¿è¡Œå¯èƒ½éœ€è¦è¾“å…¥æœåŠ¡å™¨å¯†ç ï¼Œå»ºè®®é…ç½® SSH å…å¯†ç™»å½•ä»¥å®ç°å…¨è‡ªåŠ¨å¯åŠ¨ã€‚</p>
</li>
</ol>
<h2 data-id="heading-5">å…­ã€ç»“è¯­</h2>
<p>â€œä¸Šä¸‡çº§æ–‡ä»¶ä¸€èµ·å¯è§†åŒ–â€æœ¬è´¨ä¸Šä¸æ˜¯ä¸€ä¸ªå‰ç«¯å·¥ç¨‹é—®é¢˜ï¼Œè€Œæ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯ç³»ç»Ÿé—®é¢˜ï¼šæ•°æ®å­˜å‚¨ã€I/Oã€æ¸²æŸ“ã€äº¤äº’ã€ç½‘ç»œã€å¤šäººéš”ç¦»ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚</p>
<p>åŸºäº ParaView çš„è¿œç¨‹å¯è§†åŒ–ï¼ŒæŠŠæœ€é‡çš„é‚£éƒ¨åˆ†ï¼ˆè¯»å–ã€ç®¡çº¿ã€GPU æ¸²æŸ“ï¼‰æ”¾å›æœåŠ¡ç«¯ï¼Œè®©æµè§ˆå™¨ä¸“æ³¨â€œäº¤äº’ + æ˜¾ç¤ºâ€ï¼Œåœ¨å·¥ç¨‹ä¸Šå¾€å¾€æ˜¯æœ€åˆ’ç®—ã€æœ€å¯æŒç»­çš„è·¯çº¿ï¼ˆç›®å‰æ¥çœ‹ï¼Œæ˜¯è¿™æ ·ï¼Œæœ‰ä¸æœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œå¤§ä½¬ä»¬å¯ä»¥è¯´è¯´~~ï¼‰ã€‚</p>
<p>ï¼ˆyaoyaoä»æŠ€æœ¯è°ƒç ”ã€åˆ°é¡¹ç›®ä½¿ç”¨ï¼Œæ—¶é—´ä¹Ÿä¸é•¿ï¼Œè¿™ä¸ªæ–¹æ¡ˆæœ‰é—®é¢˜ï¼Œè¯·å¤§ä½¬ä»¬æŒ‡æ­£~~ï¼‰</p>
<p>æœ¬æ–‡æ˜¯çº¯æ–¹æ¡ˆè®¨è®ºï¼Œä¸‹æœŸï¼Œä¸Šä»£ç ï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§»åŠ¨ç«¯H5é¡¹ç›®ï¼Œè¿˜éœ€è¦react-fastclickè§£å†³300msç‚¹å‡»å»¶è¿Ÿå—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7604093823958302739</link>    <guid>https://juejin.cn/post/7604093823958302739</guid>    <pubDate>2026-02-09T02:57:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823958302739" data-draft-id="7592818202717143059" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§»åŠ¨ç«¯H5é¡¹ç›®ï¼Œè¿˜éœ€è¦react-fastclickè§£å†³300msç‚¹å‡»å»¶è¿Ÿå—ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2026-02-09T02:57:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§»åŠ¨ç«¯H5é¡¹ç›®ï¼Œè¿˜éœ€è¦react-fastclickè§£å†³300msç‚¹å‡»å»¶è¿Ÿå—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T02:57:04.000Z" title="Mon Feb 09 2026 02:57:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>ä»Šå¤©æ•´ç†æ—§é¡¹ç›®çš„æ—¶å€™å‘ç°ï¼Œåœ¨ä¹‹å‰å¼€å‘Reactç§»åŠ¨ç«¯é¡¹ç›®æ—¶ï¼Œæ€»ä¼šä¹ æƒ¯æ€§å¼•å…¥<code>react-fastclick</code>æ¥å¤„ç†ç‚¹å‡»å»¶è¿Ÿé—®é¢˜ã€‚ä½†è¿™æ¬¡çš„é¡¹ç›®æ˜¯React18æ­é…Vite5çš„æŠ€æœ¯æ ˆï¼Œçªç„¶äº§ç”Ÿäº†ä¸€ä¸ªç–‘é—®ï¼šåœ¨å½“å‰çš„æŠ€æœ¯ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ç°ä»£æµè§ˆå™¨ï¼Œç§»åŠ¨ç«¯é¡¹ç›®è¿˜éœ€è¦ä¾èµ–<code>react-fastclick</code>æ¥è§£å†³<code>300msç‚¹å‡»å»¶è¿Ÿ</code>å—ï¼Ÿå¸¦ç€è¿™ä¸ªç–‘é—®ï¼Œæˆ‘æ•´ç†äº†ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œå’Œå¤§å®¶ä¸€èµ·æ¢è®¨ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-0">1. 300ms å»¶è¿Ÿçš„æ¥æº</h2>
<p>è¦å¼„æ¸…æ¥šæ˜¯å¦éœ€è¦react-fastclickï¼Œé¦–å…ˆå¾—å›é¡¾ä¸€ä¸‹300msç‚¹å‡»å»¶è¿Ÿçš„ç”±æ¥ã€‚300mså»¶è¿Ÿå¹¶ä¸æ˜¯ç§»åŠ¨ç«¯æµè§ˆå™¨çš„bugï¼Œè€Œæ˜¯æ—©æœŸç§»åŠ¨æµè§ˆå™¨ï¼ˆä¸»è¦æ˜¯æ—§ç‰ˆiOS Safari / Android WebViewï¼‰ä¸ºäº†é€‚é…ç”¨æˆ·æ“ä½œè€Œè®¾è®¡çš„æœºåˆ¶ï¼š</p>
<ul>
<li>æ ¸å¿ƒåŸå› ï¼šä¸ºäº†åˆ¤æ–­ç”¨æˆ·çš„ç‚¹å‡»æ“ä½œæ˜¯å¦æ˜¯ã€ŒåŒå‡»ç¼©æ”¾ã€ï¼ˆåŒå‡»é¡µé¢å¯ä»¥æ”¾å¤§æ˜¾ç¤ºå†…å®¹ï¼Œè¿™æ˜¯æ—©æœŸç§»åŠ¨ç«¯çš„æ ¸å¿ƒäº¤äº’ä¹‹ä¸€ï¼‰ã€‚</li>
<li>å»¶è¿Ÿè¡¨ç°ï¼šæµè§ˆå™¨åœ¨æ£€æµ‹åˆ°ç”¨æˆ·çš„ä¸€æ¬¡clickäº‹ä»¶åï¼Œä¼šå¼ºåˆ¶ç­‰å¾…çº¦300msï¼Œç¡®è®¤ç”¨æˆ·æ²¡æœ‰è¿›è¡Œç¬¬äºŒæ¬¡ç‚¹å‡»åï¼Œæ‰ä¼šçœŸæ­£è§¦å‘clickäº‹ä»¶ã€‚</li>
</ul>
<p>æ­£å› ä¸ºè¿™ä¸ª300msçš„ç­‰å¾…æ—¶é—´ï¼Œå¯¼è‡´æ—©æœŸç§»åŠ¨ç«¯H5é¡µé¢çš„ç‚¹å‡»æ“ä½œæ€»ä¼šæœ‰æ˜æ˜¾çš„å»¶è¿Ÿæ„Ÿï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œè¿™ä¹Ÿæ˜¯FastClickç±»åº“è¯ç”Ÿçš„åŸå› â€”â€”é€šè¿‡ç»•è¿‡æµè§ˆå™¨çš„è¿™ä¸ªç­‰å¾…æœºåˆ¶ï¼Œæ¶ˆé™¤300mså»¶è¿Ÿã€‚</p>
<hr/>
<h2 data-id="heading-1">2. ç°ä»£æµè§ˆå™¨å·²é»˜è®¤ç§»é™¤ 300ms å»¶è¿Ÿ</h2>
<p>éšç€ç§»åŠ¨ç«¯æŠ€æœ¯çš„å‘å±•ï¼Œã€ŒåŒå‡»ç¼©æ”¾ã€çš„ä½¿ç”¨åœºæ™¯è¶Šæ¥è¶Šå°‘ï¼Œä¸”ç”¨æˆ·å¯¹äº¤äº’æµç•…åº¦çš„è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œä¸»æµç§»åŠ¨ç«¯æµè§ˆå™¨æ—©å·²é»˜è®¤ç§»é™¤äº†300msç‚¹å‡»å»¶è¿Ÿï¼Œå…·ä½“æ”¯æŒæƒ…å†µå¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-2">âœ… iOS ç¯å¢ƒ</h3>
<ul>
<li>iOS 9åŠä»¥ä¸Šç‰ˆæœ¬çš„Safariæµè§ˆå™¨</li>
<li>æ‰€æœ‰åŸºäºWKWebViewçš„å†…åµŒé¡µé¢ï¼ˆç›®å‰ç»å¤§å¤šæ•°iOS Appçš„å†…åµŒH5éƒ½é‡‡ç”¨WKWebViewï¼‰</li>
</ul>
<h3 data-id="heading-3">âœ… Android ç¯å¢ƒ</h3>
<ul>
<li>Chrome 32åŠä»¥ä¸Šç‰ˆæœ¬</li>
<li>Androidç³»ç»Ÿè‡ªå¸¦çš„WebViewï¼ˆAndroid 4.4åŠä»¥ä¸Šç‰ˆæœ¬åŸºæœ¬éƒ½å·²æ”¯æŒï¼‰</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæµè§ˆå™¨ç§»é™¤300mså»¶è¿Ÿéœ€è¦æ»¡è¶³ä¸¤ä¸ªç®€å•æ¡ä»¶ï¼Œè€Œè¿™ä¸¤ä¸ªæ¡ä»¶åœ¨React18+Vite5é¡¹ç›®ä¸­å‡ ä¹æ˜¯é»˜è®¤é…ç½®ï¼š</p>
<h3 data-id="heading-4">æ¡ä»¶1ï¼šæ­£ç¡®è®¾ç½®viewport</h3>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„æ¡ä»¶ï¼Œåªè¦åœ¨HTMLå¤´éƒ¨è®¾ç½®äº†æ­£ç¡®çš„viewportæ ‡ç­¾ï¼Œæµè§ˆå™¨å°±ä¼šè®¤ä¸ºé¡µé¢å·²é€‚é…ç§»åŠ¨ç«¯ï¼Œæ— éœ€é€šè¿‡åŒå‡»ç¼©æ”¾æ¥ä¼˜åŒ–æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;meta <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> content=<span class="hljs-string">"width=device-width, initial-scale=1"</span>&gt;
</code></pre>
<p>é‡ç‚¹è¯´æ˜ï¼šVite + Reactçš„é»˜è®¤æ¨¡æ¿ä¸­ï¼Œå·²ç»è‡ªå¸¦äº†è¿™ä¸ªviewporté…ç½®ï¼Œæ— éœ€æˆ‘ä»¬é¢å¤–æ‰‹åŠ¨æ·»åŠ ã€‚</p>
<h3 data-id="heading-5">æ¡ä»¶2ï¼šç¦æ­¢åŒå‡»ç¼©æ”¾ï¼ˆæˆ–é¡µé¢å·²å®Œå…¨é€‚é…ï¼‰</h3>
<p>å¦‚æœé¡µé¢ä¸éœ€è¦æ”¯æŒåŒå‡»ç¼©æ”¾ï¼Œåªéœ€åœ¨viewportæ ‡ç­¾ä¸­æ·»åŠ ç›¸å…³é…ç½®ï¼Œå³å¯å½»åº•æœç»æµè§ˆå™¨çš„åŒå‡»ç¼©æ”¾åˆ¤æ–­ï¼Œè¿›ä¸€æ­¥ç¡®ä¿æ— å»¶è¿Ÿï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;meta
  <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, user-scalable=no"</span>
/&gt;
</code></pre>
<p>æˆ–é€šè¿‡é™åˆ¶æœ€å¤§ç¼©æ”¾æ¯”ä¾‹æ¥å®ç°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;meta
  <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, maximum-scale=1"</span>
/&gt;
</code></pre>
<p>å®é™…ä¸Šï¼Œç°åœ¨å¤§å¤šæ•°ç§»åŠ¨ç«¯H5é¡¹ç›®éƒ½ä¼šæ·»åŠ ä¸Šè¿°é…ç½®ï¼Œä¸€æ–¹é¢æ˜¯ä¸ºäº†ä¿è¯é¡µé¢é€‚é…ä¸€è‡´æ€§ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿé—´æ¥æ¶ˆé™¤äº†300mså»¶è¿Ÿçš„å¯èƒ½ã€‚</p>
<hr/>
<h2 data-id="heading-6">3. FastClick / react-fastclick å·²è¿‡æ—¶</h2>
<p>æ—¢ç„¶ç°ä»£æµè§ˆå™¨å·²ç»é»˜è®¤ç§»é™¤äº†300mså»¶è¿Ÿï¼Œé‚£ä¹ˆFastClickåŠå…¶Reactå°è£…ç‰ˆreact-fastclickï¼Œä¸ä»…ä¸å†å¿…è¦ï¼Œåè€Œå¯èƒ½æˆä¸ºé¡¹ç›®çš„è´Ÿæ‹…ã€‚</p>
<h3 data-id="heading-7">å®˜æ–¹æ€åº¦ï¼šé¡¹ç›®å·²åœæ­¢ç»´æŠ¤</h3>
<p>FastClickçš„ä½œè€…æ—©åœ¨2016å¹´åå°±æ˜ç¡®è¡¨ç¤ºï¼šã€ŒModern browsers donâ€™t have 300ms delay anymore.ã€ï¼ˆç°ä»£æµè§ˆå™¨å·²ä¸å†æœ‰300mså»¶è¿Ÿï¼‰ã€‚æ­¤åï¼ŒFastClické¡¹ç›®åŸºæœ¬åœæ­¢ç»´æŠ¤ï¼Œä¸å†é€‚é…æ–°çš„æµè§ˆå™¨ç‰ˆæœ¬å’Œå‰ç«¯æŠ€æœ¯æ ˆã€‚</p>
<h3 data-id="heading-8">React 18 é¡¹ç›®ä¸­çš„æ½œåœ¨é—®é¢˜</h3>
<p>åœ¨React 18é¡¹ç›®ä¸­å¼ºè¡Œå¼•å…¥react-fastclickï¼Œä¸ä»…æ— æ³•å¸¦æ¥æ”¶ç›Šï¼Œè¿˜å¯èƒ½å¼•å‘ä¸€ç³»åˆ—å…¼å®¹æ€§é—®é¢˜ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>âŒ äº‹ä»¶é‡å¤è§¦å‘ï¼šreact-fastclickçš„å®ç°æœºåˆ¶ä¸React 18çš„åˆæˆäº‹ä»¶ä½“ç³»å­˜åœ¨å†²çªï¼Œå¯èƒ½å¯¼è‡´ç‚¹å‡»äº‹ä»¶è¢«è§¦å‘ä¸¤æ¬¡ï¼ˆæ¯”å¦‚ä¸€æ¬¡ç”±react-fastclickè§¦å‘ï¼Œä¸€æ¬¡ç”±æµè§ˆå™¨åŸç”Ÿè§¦å‘ï¼‰ã€‚</li>
<li>âŒ ä¸Pointer Eventsä¸å…¼å®¹ï¼šReact 18å·²å…¨é¢æ”¯æŒPointer Eventsï¼ˆç»Ÿä¸€å¤„ç†é¼ æ ‡ã€è§¦æ‘¸ã€ç¬”ç­‰è¾“å…¥äº‹ä»¶ï¼‰ï¼Œè€Œreact-fastclickæœªé€‚é…è¯¥ç‰¹æ€§ï¼Œå¯èƒ½å¯¼è‡´äº‹ä»¶ç›‘å¬å¼‚å¸¸ã€‚</li>
<li>âŒ iOSå¶å‘ç‚¹å‡»ç©¿é€ï¼šåœ¨éƒ¨åˆ†iOSè®¾å¤‡ä¸Šï¼Œreact-fastclickå¯èƒ½å¯¼è‡´ç‚¹å‡»ç©¿é€é—®é¢˜ï¼ˆç‚¹å‡»ä¸Šå±‚å…ƒç´ ï¼Œå´è§¦å‘äº†ä¸‹å±‚å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ï¼‰ï¼Œå½±å“äº¤äº’ä½“éªŒã€‚</li>
</ul>
<p>ç»¼åˆæ¥çœ‹ï¼Œåœ¨React 18+Vite5é¡¹ç›®ä¸­ä½¿ç”¨react-fastclickï¼Œå®Œå…¨æ˜¯ã€Œé£é™©å¤§äºæ”¶ç›Šã€çš„æ“ä½œã€‚</p>
<hr/>
<h2 data-id="heading-9">4. ç°ä»£è§£å†³æ–¹æ¡ˆ</h2>
<p>è™½ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªè¦ä¿è¯viewporté…ç½®æ­£ç¡®ï¼Œå°±ä¸ä¼šæœ‰300mså»¶è¿Ÿï¼Œä½†å¦‚æœä½ çš„é¡¹ç›®éœ€è¦é€‚é…ä¸€äº›ç‰¹æ®Šç¯å¢ƒï¼ˆæ¯”å¦‚è€æ—§WebViewã€å°ä¼—å›½äº§æµè§ˆå™¨ï¼‰ï¼Œæˆ–è€…ç¡®å®æ„Ÿå—åˆ°äº†ç‚¹å‡»å»¶è¿Ÿï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹ç°ä»£è§£å†³æ–¹æ¡ˆï¼Œæ¯”react-fastclickæ›´å®‰å…¨ã€æ›´é«˜æ•ˆã€‚</p>
<h3 data-id="heading-10">âœ… 4.1. ä½¿ç”¨ touch / pointer äº‹ä»¶</h3>
<p>React 18å·²å…¨é¢æ”¯æŒPointer Eventsï¼Œè¯¥äº‹ä»¶çš„ä¼˜å…ˆçº§é«˜äºåŸç”Ÿclickäº‹ä»¶ï¼Œæ— éœ€ç­‰å¾…300msï¼Œå¯å®ç°é›¶å»¶è¿Ÿç‚¹å‡»ã€‚ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•ï¼Œåªéœ€å°†onClickæ›¿æ¢ä¸ºonPointerDownæˆ–onPointerUpå³å¯ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onPointerDown</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>ç‚¹å‡»æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>æ³¨æ„ï¼šä¼˜å…ˆä½¿ç”¨onPointerDownï¼ˆè§¦æ‘¸å¼€å§‹æ—¶è§¦å‘ï¼‰ï¼Œå“åº”é€Ÿåº¦æœ€å¿«ï¼›å¦‚æœéœ€è¦é¿å…â€œè¯¯è§¦â€ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨onPointerUpï¼ˆè§¦æ‘¸ç»“æŸæ—¶è§¦å‘ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-11">âœ… 4.2. ä½¿ç”¨ CSS touch-actionï¼ˆæ¨èï¼‰</h3>
<p>è¿™æ˜¯æœ€æ¨èçš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡CSSçš„touch-actionå±æ€§ï¼Œç›´æ¥å‘Šè¯‰æµè§ˆå™¨è¯¥å…ƒç´ çš„è§¦æ‘¸è¡Œä¸ºï¼Œç¦æ­¢ä¸å¿…è¦çš„æ‰‹åŠ¿åˆ¤æ–­ï¼Œä»è€Œæ¶ˆé™¤å»¶è¿Ÿã€‚</p>
<p>é’ˆå¯¹å¯ç‚¹å‡»å…ƒç´ ï¼ˆå¦‚æŒ‰é’®ã€é“¾æ¥ï¼‰ï¼Œæ·»åŠ å¦‚ä¸‹CSSï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">button</span> {
  touch-action: manipulation;
}
</code></pre>
<p>touch-action: manipulationçš„ä½œç”¨ï¼š</p>
<ul>
<li>ç¦æ­¢åŒå‡»ç¼©æ”¾ã€åŒæŒ‡ç¼©æ”¾ç­‰æ‰‹åŠ¿æ“ä½œï¼›</li>
<li>å‘Šè¯‰æµè§ˆå™¨è¯¥å…ƒç´ ä»…ç”¨äºç‚¹å‡»äº¤äº’ï¼Œæ— éœ€ç­‰å¾…300msåˆ¤æ–­æ‰‹åŠ¿ï¼Œç›´æ¥æ´¾å‘clickäº‹ä»¶ã€‚</li>
</ul>
<p>å¦‚æœé¡¹ç›®ä¸­å¯ç‚¹å‡»å…ƒç´ è¾ƒå¤šï¼Œä¹Ÿå¯ä»¥å…¨å±€è®¾ç½®ï¼ˆä»…å¯¹å¯ç‚¹å‡»å…ƒç´ ç”Ÿæ•ˆï¼Œä¸å½±å“é¡µé¢æ»šåŠ¨ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">* {
  touch-action: manipulation;
}
</code></pre>
<hr/>
<h3 data-id="heading-12">âœ… 4.3. é¿å… 300ms çš„é”™è¯¯å§¿åŠ¿</h3>
<p>é™¤äº†ä¸Šè¿°æ–¹æ¡ˆï¼Œè¿˜è¦æ³¨æ„é¿å…ä¸€äº›å¯èƒ½é—´æ¥å¯¼è‡´ç‚¹å‡»å»¶è¿Ÿçš„é”™è¯¯å†™æ³•ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">// âŒ é”™è¯¯ï¼šåŒæ—¶ä½¿ç”¨onTouchStartå’ŒonClick
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onTouchStart</span>=<span class="hljs-string">{handleClick}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>ç‚¹å‡»æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>è¿™ç§å†™æ³•ä¼šå¯¼è‡´è§¦æ‘¸æ—¶è§¦å‘ä¸€æ¬¡handleClickï¼Œ300msåï¼ˆå¦‚æœæµè§ˆå™¨æœ‰å»¶è¿Ÿï¼‰åˆè§¦å‘ä¸€æ¬¡onClickï¼Œä¸ä»…ä¼šå‡ºç°â€œå»¶è¿Ÿæ„Ÿâ€ï¼Œè¿˜å¯èƒ½å¯¼è‡´é€»è¾‘å¼‚å¸¸ï¼ŒåŠ¡å¿…é¿å…ã€‚</p>
<hr/>
<h2 data-id="heading-13">5. æœ€ç»ˆç»“è®ºä¸å¯ç›´æ¥ä½¿ç”¨çš„æ¨¡æ¿</h2>
<p>å¯¹äº React 18 + Vite 5 çš„ç§»åŠ¨ç«¯é¡¹ç›®ï¼š</p>
<ul>
<li>âœ… ä¸éœ€è¦å¼•å…¥ react-fastclick</li>
<li>âŒ ä¸æ¨èä½¿ç”¨ä»»ä½•ç‰ˆæœ¬çš„ fastclick</li>
<li>âœ… åªè¦ä¿è¯ viewport é…ç½®æ­£ç¡®ï¼Œå°±èƒ½æ¶ˆé™¤ç»å¤§å¤šæ•°åœºæ™¯çš„300mså»¶è¿Ÿ</li>
<li>âœ… ä¼˜åŒ–CSSçš„touch-actioné…ç½®ï¼Œå¯å…¼å®¹æ‰€æœ‰æç«¯ç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-14">å½“å‰é…ç½®è¾¾æ ‡æƒ…å†µï¼ˆå‚è€ƒï¼‰</h3>





























<table><thead><tr><th>é¡¹ç›®</th><th>æ˜¯å¦è¾¾æ ‡</th></tr></thead><tbody><tr><td>viewporté…ç½®</td><td>âœ…ï¼ˆViteé»˜è®¤é…ç½®ï¼‰</td></tr><tr><td>ç¦æ­¢ç¼©æ”¾</td><td>âœ…ï¼ˆæ·»åŠ max-scale=1æˆ–user-scalable=noå³å¯ï¼‰</td></tr><tr><td>clickå»¶è¿Ÿ</td><td>åŸºæœ¬æ— ï¼ˆä¸»æµæµè§ˆå™¨ï¼‰</td></tr><tr><td>å…¼å®¹æ€§</td><td>âš ï¸ ä¸­ç­‰ï¼ˆéœ€ä¼˜åŒ–touch-actioné…ç½®ï¼‰</td></tr><tr><td>æç«¯ç¯å¢ƒ</td><td>å¯èƒ½æ®‹ç•™ï¼ˆä¼˜åŒ–åå¯è§£å†³ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-15">æ¨èæœ€ç»ˆæ¨¡æ¿ï¼ˆå¯ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼‰</h3>
<p>æ•´åˆæ‰€æœ‰æœ€ä½³å®è·µï¼Œæä¾›å¯ç›´æ¥å¥—ç”¨çš„HTMLå’ŒCSSæ¨¡æ¿ï¼Œç¡®ä¿é¡¹ç›®æ— ç‚¹å‡»å»¶è¿Ÿã€å…¼å®¹æ€§æ‹‰æ»¡ï¼š</p>
<h3 data-id="heading-16">5.1. HTML viewport é…ç½®</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;meta
  <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,
           initial-scale=1,
           maximum-scale=1,
           user-scalable=no,
           viewport-fit=cover"</span>
/&gt;
</code></pre>
<p>è¯´æ˜ï¼šviewport-fit=coverç”¨äºé€‚é…iPhoneåˆ˜æµ·å±ï¼Œé¿å…é¡µé¢è¢«åˆ˜æµ·é®æŒ¡ï¼Œä¸å½±å“ç‚¹å‡»å»¶è¿Ÿã€‚</p>
<h3 data-id="heading-17">5.2. CSS é…ç½®</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">html</span>,
<span class="hljs-selector-tag">body</span> {
  -webkit-user-drag: none;
  touch-action: pan-y;
}

<span class="hljs-selector-tag">button</span>,
<span class="hljs-selector-tag">a</span>,
<span class="hljs-selector-attr">[role=<span class="hljs-string">'button'</span>]</span> {
  touch-action: manipulation;
}
</code></pre>
<hr/>
<h2 data-id="heading-18">6. æ€»ç»“</h2>
<p>å›åˆ°æœ€åˆçš„ç–‘é—®ï¼šReact18+Vite5ç§»åŠ¨ç«¯é¡¹ç›®ï¼Œè¿˜éœ€è¦react-fastclickå—ï¼Ÿç­”æ¡ˆå¾ˆæ˜ç¡®â€”â€”ä¸éœ€è¦ã€‚</p>
<p>ç°ä»£æµè§ˆå™¨æ—©å·²è§£å†³äº†300msç‚¹å‡»å»¶è¿Ÿçš„é—®é¢˜ï¼Œè€ŒReact18+Vite5çš„é»˜è®¤é…ç½®ï¼ˆæ­£ç¡®çš„viewportï¼‰å·²ç»æ»¡è¶³äº†æµè§ˆå™¨æ¶ˆé™¤å»¶è¿Ÿçš„æ¡ä»¶ã€‚react-fastclickä½œä¸ºè¿‡æ—¶çš„ç±»åº“ï¼Œä¸ä»…å¤šä½™ï¼Œè¿˜å¯èƒ½å¼•å‘å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬åªéœ€è¦åšå¥½ä¸¤ä»¶äº‹ï¼šä¸€æ˜¯ä¿è¯viewporté…ç½®æ­£ç¡®ï¼ŒäºŒæ˜¯ä¼˜åŒ–CSSçš„touch-actionå±æ€§ï¼Œå°±èƒ½è½»æ¾å®ç°é›¶å»¶è¿Ÿçš„ç§»åŠ¨ç«¯ç‚¹å‡»äº¤äº’ã€‚å¦‚æœé‡åˆ°æç«¯ç¯å¢ƒçš„å»¶è¿Ÿé—®é¢˜ï¼Œå†è¾…ä»¥Pointer Eventsï¼Œå°±èƒ½å®Œç¾è§£å†³æ‰€æœ‰åœºæ™¯ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ•´ç†èƒ½å¸®åˆ°æœ‰åŒæ ·ç–‘é—®çš„åŒå­¦ï¼Œé¿å…åœ¨æ–°é¡¹ç›®ä¸­å¼•å…¥ä¸å¿…è¦çš„ä¾èµ–ï¼Œè®©é¡¹ç›®æ›´è½»é‡ã€æ›´ç¨³å®šã€‚</p>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7568192652286754870" target="_blank" title="https://juejin.cn/post/7568192652286754870">çº¯å‰ç«¯æå–å›¾ç‰‡é¢œè‰²æ’ä»¶Color-Thiefæ•™å­¦+å®æˆ˜å®Œæ•´æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7565737512816771135" target="_blank" title="https://juejin.cn/post/7565737512816771135">react-konvaå®æˆ˜æŒ‡å—ï¼šCanvasé«˜æ€§èƒ½+æ˜“ç»´æŠ¤çš„ç»„ä»¶åŒ–å›¾å½¢å¼€å‘å®ç°æ•™ç¨‹</a></li>
<li><a href="https://juejin.cn/post/7560905838074462271" target="_blank" title="https://juejin.cn/post/7560905838074462271">Reactæ— é™æ»šåŠ¨æ’ä»¶react-infinite-scroll-componentçš„é…ç½®+ä¼˜åŒ–+é¿å‘æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7560542615484137491" target="_blank" title="https://juejin.cn/post/7560542615484137491">å‰ç«¯éŸ³é¢‘å…¼å®¹è§£å†³ï¼šéŸ³é¢‘ç¥å™¨howler.jsä»åŸºç¡€åˆ°è¿›é˜¶å®Œæ•´ä½¿ç”¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7559871680015024169" target="_blank" title="https://juejin.cn/post/7559871680015024169">ä½¿ç”¨React-OAuthè¿›è¡ŒGoogle/GitHubç™»å½•çš„æ•™ç¨‹å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7550585427834404927" target="_blank" title="https://juejin.cn/post/7550585427834404927">çº¯å‰ç«¯äººè„¸è¯†åˆ«åˆ©å™¨ï¼šface-api.jsæ‰‹æŠŠæ‰‹æ·±å…¥è§£ææ•™å­¦</a></li>
<li><a href="https://juejin.cn/post/7553865490732433462" target="_blank" title="https://juejin.cn/post/7553865490732433462">å…³äºReactçˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•forwardRefçš„è¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7553484874609410074" target="_blank" title="https://juejin.cn/post/7553484874609410074">Reactè·¨ç»„ä»¶æ•°æ®å…±äº«useContextè¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7545087762837815334" target="_blank" title="https://juejin.cn/post/7545087762837815334">Webå›¾åƒç¼–è¾‘ç¥å™¨tui.image-editorä»åŸºç¡€åˆ°è¿›é˜¶çš„å®æˆ˜æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7544323659788288046" target="_blank" title="https://juejin.cn/post/7544323659788288046">å¼€å‘ä¸ªäººå¾®ä¿¡å°ç¨‹åºç±»ç›®é€‰æ‹©/ç›ˆåˆ©æ–¹å¼/æˆæœ¬æ§åˆ¶ä¸æœåŠ¡å™¨æ¥å…¥æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7541741121400864778" target="_blank" title="https://juejin.cn/post/7541741121400864778">å‰ç«¯å›¾ç‰‡è£å‰ªCropper.jsæ ¸å¿ƒåŠŸèƒ½ä¸å®æˆ˜æŠ€å·§è¯¦è§£</a></li>
<li><a href="https://juejin.cn/post/7536530451461472265" target="_blank" title="https://juejin.cn/post/7536530451461472265">ç¼–è¾‘å™¨ä¹Ÿæœ‰é‚ªä¿®ï¼Ÿç›˜ç‚¹VS Codeé‚ªé—¨/æœ‰è¶£çš„æ‰©å±•</a></li>
<li><a href="https://juejin.cn/post/7535005018257981466" target="_blank" title="https://juejin.cn/post/7535005018257981466">jsä½¿ç”¨IntersectionObserverå®ç°ç›®æ ‡å…ƒç´ å¯è§åº¦çš„äº¤äº’</a></li>
<li><a href="https://juejin.cn/post/7534547200330121225" target="_blank" title="https://juejin.cn/post/7534547200330121225">Webå‰ç«¯é¡µé¢å¼€å‘é˜¿æ‹‰ä¼¯è¯­ç§é€‚é…æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7516122409948020736" target="_blank" title="https://juejin.cn/post/7516122409948020736">è®©ç½‘é¡µæ‹¥æœ‰Appä½“éªŒï¼ŸPWA å°†ç½‘é¡µå˜ä¸ºæ¡Œé¢åº”ç”¨çš„ä¿å§†çº§æ•™ç¨‹PWA</a></li>
<li><a href="https://juejin.cn/post/6953803916484018206" target="_blank" title="https://juejin.cn/post/6953803916484018206">ä½¿ç”¨nvmç®¡ç†node.jsç‰ˆæœ¬ä»¥åŠæ›´æ¢npmæ·˜å®é•œåƒæº</a></li>
<li><a href="https://juejin.cn/post/7140443283209060383" target="_blank" title="https://juejin.cn/post/7140443283209060383">æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè§„èŒƒçš„å›¢é˜Ÿvueé¡¹ç›®ï¼ŒåŒ…å«commitlintï¼Œeslintï¼Œprettierï¼Œhuskyï¼Œcommitizenç­‰ç­‰</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ä¸€ä¸ªç²’å­æ•ˆæœå‘Šåˆ«è›‡å¹´è¿æ¥é©¬å¹´~]]></title>    <link>https://juejin.cn/post/7604036853129756687</link>    <guid>https://juejin.cn/post/7604036853129756687</guid>    <pubDate>2026-02-09T03:00:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604036853129756687" data-draft-id="7603958579180077056" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ä¸€ä¸ªç²’å­æ•ˆæœå‘Šåˆ«è›‡å¹´è¿æ¥é©¬å¹´~"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,three.js"/> <meta itemprop="datePublished" content="2026-02-09T03:00:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹æ­¦éš¾é£"/> <meta itemprop="url" content="https://juejin.cn/user/2664871913328478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ä¸€ä¸ªç²’å­æ•ˆæœå‘Šåˆ«è›‡å¹´è¿æ¥é©¬å¹´~
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2664871913328478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹æ­¦éš¾é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T03:00:46.000Z" title="Mon Feb 09 2026 03:00:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬å³å°†è¿æ¥é©¬å¹´ï¼Œéšæ‰‹æ•´äº†ä¸€ä¸ªç²’å­åˆ‡æ¢æ•ˆæœï¼Œåœ¨è¿™é‡Œåˆ†äº«ç»™å¤§å®¶ï¼Œæœ¬æœŸåŠŸèƒ½å®ç°ä¸»è¦æ˜¯è¿ç”¨äº†<code>Three.JS</code>!</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64878ee4bd304ea2a98f31e784d94160~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5q2m6Zq-6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210846&amp;x-signature=7UC6v84%2B0AYHTEXORciHeRtqbzQ%3D" alt="cover2" loading="lazy"/></p>
<h2 data-id="heading-0">1.åŠ è½½æ¨¡å‹</h2>
<p>è¿™ç§ç‰©ä½“çš„å½¢çŠ¶å¾ˆéš¾é€šè¿‡çº¯æ•°å­¦å…¬å¼æ¨å¯¼å‡ºæ¥ï¼Œæ‰€ä»¥æˆ‘æ˜¯åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fsketchfab.com%2Ffeed" target="_blank" title="https://sketchfab.com/feed" ref="nofollow noopener noreferrer">sketchfab</a>ä¸Šæ‰¾çš„ä¸¤ä¸ªæ¨¡å‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/088285f417824fc399faffa3b9c18381~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5q2m6Zq-6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210846&amp;x-signature=Iz4ijRil%2BEnxEnBkwMVnJw%2BNj00%3D" alt="20260208174832" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/237c0c003d894fc59406f5017c92d6a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5q2m6Zq-6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210846&amp;x-signature=%2FbfSN0uYlpyACCZvD7ZwKgKGzTU%3D" alt="20260208174916" loading="lazy"/></p>
<p>è¿™ä¸¤ä¸ªæ¨¡å‹éƒ½æ˜¯<code>.glb</code>ç±»å‹çš„ï¼Œåœ¨<code>Three.JS</code>ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>GLTFLoader</code>å’Œ<code>DRACOLoader</code>å¾ˆè½»æ¾çš„åŠ è½½è¿™ç§ç±»å‹çš„æ¨¡å‹æ–‡ä»¶ï¼</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> dracoLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DRACOLoader</span>()
dracoLoader.<span class="hljs-title function_">setDecoderPath</span>(<span class="hljs-string">'/draco/'</span>)

<span class="hljs-keyword">const</span> gltfLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GLTFLoader</span>()
gltfLoader.<span class="hljs-title function_">setDRACOLoader</span>(dracoLoader)

<span class="hljs-keyword">const</span> gltf = <span class="hljs-keyword">await</span> gltfLoader.<span class="hljs-title function_">loadAsync</span>(path);
<span class="hljs-keyword">const</span> model = gltf.<span class="hljs-property">scene</span>;
</code></pre>
<p>å…³äº<code>DRACOLoader</code></p>
<blockquote>
<p>ç®€å•æ¥è¯´ï¼Œ<code>DRACOLoader</code> æ˜¯ <code>Three.js</code> ä¸­ä¸“é—¨ç”¨æ¥è§£å‹ç»è¿‡ Draco å‹ç¼©è¿‡çš„ 3D æ¨¡å‹çš„â€œè§£å‹å™¨â€ã€‚</p>
<p>å¦‚æœä½ åœ¨å¼€å‘ WebGL é¡¹ç›®æ—¶å‘ç°æ¨¡å‹æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ .gltf æˆ– .glbï¼‰å¤ªå¤§ï¼Œå¯¼è‡´åŠ è½½ç¼“æ…¢ï¼Œä½ é€šå¸¸ä¼šä½¿ç”¨ Google å¼€å‘çš„ Draco ç®—æ³• å¯¹æ¨¡å‹è¿›è¡Œå‹ç¼©ã€‚è€Œ <code>DRACOLoader</code> å°±æ˜¯ä¸ºäº†è®©æµè§ˆå™¨èƒ½è¯»æ‡‚è¿™äº›å‹ç¼©æ•°æ®è€Œå­˜åœ¨çš„ã€‚</p>
</blockquote>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> dracoLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DRACOLoader</span>()
dracoLoader.<span class="hljs-title function_">setDecoderPath</span>(<span class="hljs-string">'/draco/'</span>)

<span class="hljs-keyword">const</span> gltfLoader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GLTFLoader</span>()
gltfLoader.<span class="hljs-title function_">setDRACOLoader</span>(dracoLoader)

<span class="hljs-keyword">const</span> modelFiles = [
    {<span class="hljs-attr">path</span>: <span class="hljs-string">'/snake_model.glb'</span>, <span class="hljs-attr">scale</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">position</span>: {<span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span>}},
    {<span class="hljs-attr">path</span>: <span class="hljs-string">'/horse.glb'</span>, <span class="hljs-attr">scale</span>: <span class="hljs-number">18</span>, <span class="hljs-attr">position</span>: {<span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: -<span class="hljs-number">14</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span>}}
];


<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> modelConfig <span class="hljs-keyword">of</span> modelFiles) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> gltf = <span class="hljs-keyword">await</span> gltfLoader.<span class="hljs-title function_">loadAsync</span>(modelConfig.<span class="hljs-property">path</span>);
        <span class="hljs-keyword">const</span> model = gltf.<span class="hljs-property">scene</span>;
        model.<span class="hljs-property">scale</span>.<span class="hljs-title function_">set</span>(modelConfig.<span class="hljs-property">scale</span>, modelConfig.<span class="hljs-property">scale</span>, modelConfig.<span class="hljs-property">scale</span>);
        model.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(modelConfig.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>, modelConfig.<span class="hljs-property">position</span>.<span class="hljs-property">y</span>, modelConfig.<span class="hljs-property">position</span>.<span class="hljs-property">z</span>);
        model.<span class="hljs-title function_">updateMatrixWorld</span>(<span class="hljs-literal">true</span>);
        scene.<span class="hljs-title function_">add</span>(model);

        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Loaded: <span class="hljs-subst">${modelConfig.path}</span>`</span>);
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load <span class="hljs-subst">${modelConfig.path}</span>:`</span>, error);
    }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d485e9717fd4114add1b82c7662e939~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5q2m6Zq-6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210846&amp;x-signature=bWSltcN7p%2FwyOgeKzgLkWb4FsjE%3D" alt="20260209091146" loading="lazy"/></p>
<h2 data-id="heading-1">2.æ¨¡å‹ç²’å­åŒ–</h2>
<p>ç°åœ¨æˆ‘ä»¬çš„ä¸¤ä¸ªæ¨¡å‹å·²ç»æˆåŠŸåŠ è½½ï¼Œæˆ‘ä»¬çš„æ¨¡å‹<strong>ç²’å­åŒ–</strong>çš„æ€è·¯æ˜¯æ‹¿åˆ°æ¨¡å‹çš„é¡¶ç‚¹æ•°æ®ç„¶åä½¿ç”¨<code>new THREE.Points</code>æ¥å±•ç¤ºï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆéšè—æˆ‘ä»¬çš„æ¨¡å‹æ–‡ä»¶</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> modelConfig <span class="hljs-keyword">of</span> modelFiles) {
    <span class="hljs-keyword">try</span> {
        ...
        ...
      - scene.<span class="hljs-title function_">add</span>(model);
      + model.<span class="hljs-property">visible</span> = <span class="hljs-literal">false</span>;
    
    } <span class="hljs-keyword">catch</span> (error) {
        
    }
}
</code></pre>
<h3 data-id="heading-2">2.1 MeshSurfaceSampler</h3>
<blockquote>
<p><code>MeshSurfaceSampler</code> æ˜¯ Three.js æ‰©å±•åº“ï¼ˆ<code>three/examples/jsm/math/MeshSurfaceSampler.js</code>ï¼‰ä¸­çš„ä¸€ä¸ªå®ç”¨ç±»ã€‚å®ƒé€šè¿‡åŠ æƒéšæœºç®—æ³•ï¼Œæ ¹æ®æ¨¡å‹è¡¨é¢çš„å‡ ä½•é¢ç§¯åˆ†å¸ƒï¼Œåœ¨ä¸‰è§’å½¢ç½‘æ ¼ä¸Šæå–éšæœºç‚¹çš„åæ ‡ã€æ³•çº¿ä»¥åŠé¢œè‰²ã€‚</p>
</blockquote>
<p>é€šä¿—çš„æ¥è¯´æˆ‘ä»¬çš„æ¨¡å‹æ˜¯ç”±è®¸å¤šä¸ªä¸‰è§’å½¢ç»„æˆçš„ï¼Œ<code>MeshSurfaceSampler</code>é€šè¿‡ç®—æ³•ä¼šåˆ¤æ–­ä¸‰è§’å½¢é¢ç§¯ï¼Œå¦‚æœæ›´å¤§çš„ä¸‰è§’å½¢åˆ™æƒé‡æ›´å¤šè¢«åˆ†é…çš„ç‚¹ä¹Ÿå°±æ›´å¤šï¼</p>
<p>ä¸¾ä¸ªæ —å­ğŸŒ°</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MeshSurfaceSampler</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/math/MeshSurfaceSampler.js'</span>;

<span class="hljs-comment">// 1. åˆ›å»ºé‡‡æ ·å™¨</span>
<span class="hljs-keyword">const</span> sampler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MeshSurfaceSampler</span>(yourLoadedMesh)
    .<span class="hljs-title function_">setWeightAttribute</span>(<span class="hljs-string">'color'</span>) <span class="hljs-comment">// å¯é€‰ï¼šå¦‚æœæœ‰é¢œè‰²å±æ€§ï¼Œå¯ä»¥æŒ‰é¢œè‰²å¯†åº¦é‡‡æ ·</span>
    .<span class="hljs-title function_">build</span>();

<span class="hljs-comment">// 2. é‡‡æ ·å¾ªç¯</span>
<span class="hljs-keyword">const</span> tempPosition = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>();
<span class="hljs-keyword">const</span> tempNormal = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>();

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; particleCount; i++) {
    sampler.<span class="hljs-title function_">sample</span>(tempPosition, tempNormal);
    
    <span class="hljs-comment">// å°†é‡‡æ ·åˆ°çš„ä½ç½®å­˜å…¥æ•°ç»„æˆ–å±æ€§ä¸­</span>
    positions.<span class="hljs-title function_">push</span>(tempPosition.<span class="hljs-property">x</span>, tempPosition.<span class="hljs-property">y</span>, tempPosition.<span class="hljs-property">z</span>);
}
</code></pre>
<h3 data-id="heading-3">2.2 åˆå¹¶Mash</h3>
<p>ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬èƒ½çœ‹åˆ°<code>MeshSurfaceSampler</code>æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå•ä¸€çš„<code>Mesh</code>ï¼Œä½†æ˜¯æˆ‘ä»¬çš„æ¨¡å‹å¯èƒ½ä¼šåŒ…å«å¤šä¸ª<code>Mesh</code>ï¼Œæ¯”å¦‚æœ¬æ¬¡æ¡ˆä¾‹ä¸­çš„<code>è›‡</code>ï¼Œ<code>é©¬</code>éƒ½æ˜¯æœ‰ä¸¤ä¸ª<code>Mesh</code>ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨<code>MeshSurfaceSampler</code>å‰æˆ‘ä»¬éœ€è¦æŠŠå¤šä¸ª<code>Mesh</code>åˆå¹¶æˆä¸€ä¸ªï¼</p>
<blockquote>
<p><code>BufferGeometryUtils.mergeGeometries</code> æ˜¯ Three.js æ‰©å±•åº“ <code>BufferGeometryUtils</code> ä¸­çš„ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å°†ä¸€ç»„ <code>BufferGeometry</code> åˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„å‡ ä½•ä½“ã€‚</p>
</blockquote>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getMergedMeshFromScene</span>(<span class="hljs-params">scene</span>) {
    <span class="hljs-keyword">const</span> geometries = [];

    scene.<span class="hljs-title function_">updateMatrixWorld</span>(<span class="hljs-literal">true</span>);

    scene.<span class="hljs-title function_">traverse</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (child.<span class="hljs-property">isMesh</span>) {
            <span class="hljs-keyword">const</span> clonedGeom = child.<span class="hljs-property">geometry</span>.<span class="hljs-title function_">clone</span>();
            clonedGeom.<span class="hljs-title function_">applyMatrix4</span>(child.<span class="hljs-property">matrixWorld</span>);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> clonedGeom.<span class="hljs-property">attributes</span>) {
                <span class="hljs-keyword">if</span> (key !== <span class="hljs-string">'position'</span>) clonedGeom.<span class="hljs-title function_">deleteAttribute</span>(key);
            }
            geometries.<span class="hljs-title function_">push</span>(clonedGeom);
        }
    });

    <span class="hljs-comment">// åˆå¹¶æ‰€æœ‰å‡ ä½•ä½“</span>
    <span class="hljs-keyword">const</span> mergedGeometry = <span class="hljs-title class_">BufferGeometryUtils</span>.<span class="hljs-title function_">mergeGeometries</span>(geometries);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(mergedGeometry);
}
</code></pre>
<h3 data-id="heading-4">2.3 å±•ç¤ºç²’å­</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">generatePositionsFromModel</span>(<span class="hljs-params">mesh, totalCount = particleCount</span>) {
    <span class="hljs-keyword">const</span> positions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(totalCount * <span class="hljs-number">3</span>);

    <span class="hljs-keyword">const</span> tempPosition = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>();

    <span class="hljs-keyword">const</span> sampler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MeshSurfaceSampler</span>(mesh).<span class="hljs-title function_">build</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; totalCount; i++) {
        sampler.<span class="hljs-title function_">sample</span>(tempPosition);
        tempPosition.<span class="hljs-title function_">applyMatrix4</span>(mesh.<span class="hljs-property">matrixWorld</span>);
        <span class="hljs-keyword">const</span> i3 = i * <span class="hljs-number">3</span>;
        positions[i3] = tempPosition.<span class="hljs-property">x</span>;
        positions[i3 + <span class="hljs-number">1</span>] = tempPosition.<span class="hljs-property">y</span>;
        positions[i3 + <span class="hljs-number">2</span>] = tempPosition.<span class="hljs-property">z</span>;
    }

    <span class="hljs-keyword">return</span> {positions};
}


 <span class="hljs-keyword">const</span> modelData = <span class="hljs-title function_">generatePositionsFromModel</span>(<span class="hljs-title function_">getMergedMeshFromScene</span>(model), particleCount);
 modelDataArray.<span class="hljs-title function_">push</span>(modelData);
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†æ¨¡å‹çš„é¡¶ç‚¹åæ ‡åªéœ€è¦ä½¿ç”¨<code>THREE.Points</code>é…åˆ<code>THREE.PointsMaterial</code></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">makeParticles</span>(<span class="hljs-params">modelData</span>) {

    <span class="hljs-keyword">const</span> {positions} = modelData;

    <span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferGeometry</span>();

    geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'position'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferAttribute</span>(positions, <span class="hljs-number">3</span>));
    
    <span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PointsMaterial</span>({
        <span class="hljs-attr">color</span>: <span class="hljs-number">0xffffff</span>,      
        <span class="hljs-attr">size</span>: <span class="hljs-number">0.5</span>,             
        <span class="hljs-attr">sizeAttenuation</span>: <span class="hljs-literal">true</span>, 
        <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.8</span>
    });

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Points</span>(geometry, material);
}

<span class="hljs-keyword">const</span> particles = <span class="hljs-title function_">makeParticles</span>(modelDataArray[<span class="hljs-number">0</span>]);
scene.<span class="hljs-title function_">add</span>(particles);
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bc5a6dea7a8467a8b509f177e7590be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5q2m6Zq-6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210846&amp;x-signature=8poLZrRhoCHZBmYa%2Bt9EYv0ZmrA%3D" alt="20260209093343" loading="lazy"/></p>
<p>æˆ‘ä»¬çš„ç²’å­å°è›‡å°±å±•ç¤ºå‡ºæ¥äº†ï¼Œåªä¸è¿‡ç°åœ¨è¿™ä¸ªç²’å­è¿˜å¾ˆç²—ç³™ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢ä¼˜åŒ–~</p>
<h2 data-id="heading-5">3.ç²’å­åˆ‡æ¢</h2>
<p>ç°åœ¨æˆ‘ä»¬çš„ç²’å­å·²ç»æˆåŠŸå±•ç¤ºï¼æ ¹æ®å‰é¢ä¸¤æ­¥æˆ‘ä»¬èƒ½çŸ¥é“ç²’å­çš„å±•ç¤ºå°±æ˜¯æ ¹æ®æ¨¡å‹çš„é¡¶ç‚¹æ¥è®¡ç®—çš„ï¼Œæ‰€ä»¥ä»ä¸€ä¸ªæ¨¡å‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªæ¨¡å‹å°±æ˜¯å•çº¯çš„é¡¶ç‚¹åˆ‡æ¢ï¼</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">beginMorph</span>(<span class="hljs-params">index</span>) {
    isTrans = <span class="hljs-literal">true</span>;
    prog = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">const</span> fromPts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(particles.<span class="hljs-property">geometry</span>.<span class="hljs-property">attributes</span>.<span class="hljs-property">position</span>.<span class="hljs-property">array</span>);
    <span class="hljs-keyword">const</span> modelData = <span class="hljs-title function_">generatePositionsFromModel</span>(<span class="hljs-title function_">getMergedMeshFromScene</span>(rawModel[index]), particleCount);
    <span class="hljs-keyword">const</span> toPts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(modelData.<span class="hljs-property">positions</span>);

    particles.<span class="hljs-property">userData</span> = {<span class="hljs-attr">from</span>: fromPts, <span class="hljs-attr">to</span>: toPts};
}
</code></pre>
<p>é€šè¿‡<code>beginMorph</code>æˆ‘ä»¬æŠŠå½“å‰çš„ç²’å­çŠ¶æ€å’Œç›®æ ‡çŠ¶æ€å­˜å…¥åˆ°<code>userData</code>ä¸­ï¼Œç„¶ååœ¨<code>tick</code>ä¸­è¿›è¡ŒåŠ¨ç”»å¤„ç†</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> morphSpeed = <span class="hljs-number">.03</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">tick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">requestAnimationFrame</span>(tick)
    controls.<span class="hljs-title function_">update</span>()

    <span class="hljs-keyword">if</span> (isTrans) {
        prog += morphSpeed;
        <span class="hljs-comment">// ä½¿ç”¨å¹³æ»‘çš„ç¼“åŠ¨å‡½æ•°</span>
        <span class="hljs-keyword">const</span> eased = prog &gt;= <span class="hljs-number">1</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">1</span> - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">1</span> - prog, <span class="hljs-number">3</span>);

        <span class="hljs-keyword">const</span> { <span class="hljs-keyword">from</span>, to } = particles.<span class="hljs-property">userData</span>;
        <span class="hljs-keyword">const</span> particleArr = particles.<span class="hljs-property">geometry</span>.<span class="hljs-property">attributes</span>.<span class="hljs-property">position</span>.<span class="hljs-property">array</span>;

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; particleArr.<span class="hljs-property">length</span>; i++) {
            particleArr[i] = <span class="hljs-keyword">from</span>[i] + (to[i] - <span class="hljs-keyword">from</span>[i]) * eased;
        }
        <span class="hljs-comment">// é€šçŸ¥ GPU æ›´æ–°</span>
        particles.<span class="hljs-property">geometry</span>.<span class="hljs-property">attributes</span>.<span class="hljs-property">position</span>.<span class="hljs-property">needsUpdate</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (prog &gt;= <span class="hljs-number">1</span>) isTrans = <span class="hljs-literal">false</span>;
    }


    renderer.<span class="hljs-title function_">render</span>(scene, camera);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/920fdab2951e463184f699de8a4ecc87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5q2m6Zq-6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210846&amp;x-signature=9dnr%2FfAG2oTmHiO92JrGvNcZx0g%3D" alt="change" loading="lazy"/></p>
<p>æ­¤æ—¶æˆ‘ä»¬åŸºç¡€çš„ç²’å­åˆ‡æ¢æ•ˆæœå°±å·²ç»å®ç°å•¦ï¼</p>
<h2 data-id="heading-6">4.ç²’å­ä¼˜åŒ–</h2>
<p>æ­¤æ—¶æˆ‘ä»¬çš„ç²’å­æ•ˆæœè¿˜æ˜¯å­˜åœ¨å‡ ä¸ªé—®é¢˜çš„ï¼</p>
<ul>
<li>å¤§å°å›ºå®š/ç²’å­æ˜¯æ­£æ–¹å½¢</li>
<li>æ²¡æœ‰é¢œè‰²</li>
<li>æ•ˆæœå•è°ƒ</li>
</ul>
<p>è¦è§£å†³ä¸Šé¢å‡ ä¸ªé—®é¢˜æˆ‘ä»¬è¿˜ä½¿ç”¨<code>THREE.PointsMaterial</code>å°±æœ‰ç‚¹ä¸å¤Ÿçœ‹äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨<code>THREE.ShaderMaterial</code>æ­é…è‡ªå®šä¹‰ç€è‰²å™¨æ¥ä¼˜åŒ–æ•ˆæœï¼</p>
<h3 data-id="heading-7">4.1 å¤§å°éšæœºåŒ–/ç²’å­æ”¹ä¸ºåœ†å½¢</h3>
<p>æˆ‘ä»¬æƒ³è®©ç²’å­çš„å¤§å°äº§ç”Ÿä¸€ä¸ªéšæœºå˜åŒ–å°±è¦è€ƒè™‘é€šè¿‡é¡¶ç‚¹ç€è‰²å™¨ä¸­<code>gl_PointSize</code>æ¥éšæœºæ”¹å˜ç²’å­å¤§å°ï¼ç²’å­æ”¹ä¸ºåœ†å½¢å°±è¦åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ä¿®æ”¹<code>gl_FragColor</code>!</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">generatePositionsFromModel</span>(<span class="hljs-params">mesh, totalCount = particleCount</span>) {
    <span class="hljs-keyword">const</span> positions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(totalCount * <span class="hljs-number">3</span>);
    <span class="hljs-keyword">const</span> sizes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(totalCount);
    <span class="hljs-keyword">const</span> rnd = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(totalCount * <span class="hljs-number">3</span>);

    <span class="hljs-keyword">const</span> tempPosition = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>();

    <span class="hljs-keyword">const</span> sampler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MeshSurfaceSampler</span>(mesh).<span class="hljs-title function_">build</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; totalCount; i++) {
        sizes[i] = <span class="hljs-number">.7</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1.1</span>;
        sampler.<span class="hljs-title function_">sample</span>(tempPosition);
        tempPosition.<span class="hljs-title function_">applyMatrix4</span>(mesh.<span class="hljs-property">matrixWorld</span>);
        <span class="hljs-keyword">const</span> i3 = i * <span class="hljs-number">3</span>;
        positions[i3] = tempPosition.<span class="hljs-property">x</span>;
        positions[i3 + <span class="hljs-number">1</span>] = tempPosition.<span class="hljs-property">y</span>;
        positions[i3 + <span class="hljs-number">2</span>] = tempPosition.<span class="hljs-property">z</span>;

        rnd[i3] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">10</span>;
        rnd[i3 + <span class="hljs-number">1</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>;
        rnd[i3 + <span class="hljs-number">2</span>] = <span class="hljs-number">.5</span> + <span class="hljs-number">.5</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();
    }

    <span class="hljs-keyword">return</span> {positions, sizes, rnd};
}
</code></pre>
<p>é¦–å…ˆä¿®æ”¹<code>generatePositionsFromModel</code>æ–¹æ³•ï¼Œé’ˆå¯¹æ¯ä¸ªé¡¶ç‚¹åæ ‡äº§ç”Ÿä¸€ç»„éšæœºæ•°èŒƒå›´åœ¨<code>.7 ~ .77</code></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">makeParticles</span>(<span class="hljs-params">modelData</span>) {

    <span class="hljs-keyword">const</span> {positions, sizes, rnd} = modelData;

    <span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferGeometry</span>();

    geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'position'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferAttribute</span>(positions, <span class="hljs-number">3</span>));
    geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'size'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferAttribute</span>(sizes, <span class="hljs-number">1</span>))
    geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">"random"</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferAttribute</span>(rnd, <span class="hljs-number">3</span>));

    <span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">ShaderMaterial</span>({
        <span class="hljs-attr">uniforms</span>: {<span class="hljs-attr">time</span>: {<span class="hljs-attr">value</span>: <span class="hljs-number">0</span>}, <span class="hljs-attr">hueSpeed</span>: {<span class="hljs-attr">value</span>: <span class="hljs-number">0.12</span>}},
        <span class="hljs-attr">vertexShader</span>: ..., 
        <span class="hljs-attr">fragmentShader</span>: ...,
        <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>, 
        <span class="hljs-attr">depthWrite</span>: <span class="hljs-literal">false</span>, 
        <span class="hljs-attr">vertexColors</span>: <span class="hljs-literal">true</span>, 
        <span class="hljs-attr">blending</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">AdditiveBlending</span>
    });

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Points</span>(geometry, material);
}
</code></pre>
<pre><code class="hljs language-glsl" lang="glsl">uniform float time;
attribute float size;
attribute vec3 random;
varying vec3 vCol;
varying float vR;
void main(){
    vec3 p=position;
    vec4 mv=modelViewMatrix*vec4(p,1.);
    float pulse=.9+.1*sin(time*1.15+random.y);
    gl_PointSize=size*pulse*(350./-mv.z);
    gl_Position=projectionMatrix*mv;
}
</code></pre>
<pre><code class="hljs language-glsl" lang="glsl">uniform float time;
void main() {
    float d = length(gl_PointCoord - vec2(0.5));
    float alpha = 1.0 - smoothstep(0.4, 0.5, d);
    if (alpha &lt; 0.01) discard;
    gl_FragColor = vec4(1.0, 1.0, 1.0, alpha);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd00e608ac8b470fb68a8980c65cf997~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5q2m6Zq-6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210846&amp;x-signature=I2rC4aQEcBmixelgJ85fxh7xbKE%3D" alt="20260209100331" loading="lazy"/></p>
<p>æ­¤æ—¶çš„ç²’å­å°±å¤§å°æ”¹ä¸ºéšæœºå¹¶ä¸”æ˜¯åœ†å½¢ç²’å­äº†~</p>
<h3 data-id="heading-8">4.2 ç²’å­æ·»åŠ é¢œè‰²</h3>
<p>ç²’å­æ·»åŠ é¢œè‰²å’Œä¸Šä¸€æ­¥çš„ç²’å­å¤§å°ç±»ä¼¼éƒ½éœ€è¦é’ˆå¯¹æ¯ä¸€ä¸ªé¡¶ç‚¹ç”Ÿæˆä¸€ä¸ªéšæœºçš„é¢œè‰²</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> palette = [<span class="hljs-number">0xff3c78</span>, <span class="hljs-number">0xff8c00</span>, <span class="hljs-number">0xfff200</span>, <span class="hljs-number">0x00cfff</span>, <span class="hljs-number">0xb400ff</span>, <span class="hljs-number">0xffffff</span>, <span class="hljs-number">0xff4040</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(c));

    <span class="hljs-keyword">const</span> tempPosition = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>();

    <span class="hljs-keyword">const</span> sampler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MeshSurfaceSampler</span>(mesh).<span class="hljs-title function_">build</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; totalCount; i++) {
        ...
        ...

        <span class="hljs-keyword">const</span> base = palette[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * palette.<span class="hljs-property">length</span> | <span class="hljs-number">0</span>], hsl = {<span class="hljs-attr">h</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">s</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">l</span>: <span class="hljs-number">0</span>};
        base.<span class="hljs-title function_">getHSL</span>(hsl);
        hsl.<span class="hljs-property">h</span> += (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">.5</span>) * <span class="hljs-number">.05</span>;
        hsl.<span class="hljs-property">s</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">1</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">.7</span>, hsl.<span class="hljs-property">s</span> + (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">.5</span>) * <span class="hljs-number">.3</span>));
        hsl.<span class="hljs-property">l</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">.9</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">.5</span>, hsl.<span class="hljs-property">l</span> + (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">.5</span>) * <span class="hljs-number">.4</span>));

        <span class="hljs-keyword">const</span> c = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>().<span class="hljs-title function_">setHSL</span>(hsl.<span class="hljs-property">h</span>, hsl.<span class="hljs-property">s</span>, hsl.<span class="hljs-property">l</span>);
        colors[i3] = c.<span class="hljs-property">r</span>;
        colors[i3 + <span class="hljs-number">1</span>] = c.<span class="hljs-property">g</span>;
        colors[i3 + <span class="hljs-number">2</span>] = c.<span class="hljs-property">b</span>;

        ...
    }
</code></pre>
<p>ä¿®æ”¹ç‰‡å…ƒç€è‰²å™¨</p>
<pre><code class="hljs language-glsl" lang="glsl">uniform float time;
uniform float hueSpeed;
varying vec3 vCol;
varying float vR;

vec3 hueShift(vec3 c, float h) {
    const vec3 k = vec3(0.57735);
    float cosA = cos(h);
    float sinA = sin(h);
    return c * cosA + cross(k, c) * sinA + k * dot(k, c) * (1.0 - cosA);
}

void main() {
    vec2 uv = gl_PointCoord - 0.5;
    float d = length(uv);

    float core = smoothstep(0.05, 0.0, d);
    float angle = atan(uv.y, uv.x);
    float flare = pow(max(0.0, sin(angle * 6.0 + time * 2.0 * vR)), 4.0);
    flare *= smoothstep(0.5, 0.0, d);
    float glow = smoothstep(0.4, 0.1, d);

    float alpha = core * 1.0 + flare * 0.5 + glow * 0.2;

    vec3 color = hueShift(vCol, time * hueSpeed);
    vec3 finalColor = mix(color, vec3(1.0, 0.95, 0.9), core);
    finalColor = mix(finalColor, color, flare * 0.5 + glow * 0.5);

    if (alpha &lt; 0.01) discard;

    gl_FragColor = vec4(finalColor, alpha);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/926c274a5cea49ba9a1984b553e17f2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5q2m6Zq-6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771210846&amp;x-signature=3%2FWmfEWW9Zv5yiw3r%2BDcCpCj2GY%3D" alt="20260209100747" loading="lazy"/></p>
<h3 data-id="heading-9">4.3 è®¾ç½®äº®åº¦å·®</h3>
<p>ç°åœ¨æˆ‘ä»¬çš„ç²’å­çœ‹ç€è¿˜æ˜¯ç•¥æ˜¾å•è°ƒï¼æˆ‘ä»¬å¯ä»¥ç»™ç²’å­åšå±€éƒ¨æäº®ï¼</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createSparkles</span>(<span class="hljs-params"/>) {

    <span class="hljs-keyword">const</span> geo = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferGeometry</span>();
    <span class="hljs-keyword">const</span> pos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(particleSparkCount * <span class="hljs-number">3</span>);
    <span class="hljs-keyword">const</span> size = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(particleSparkCount);
    <span class="hljs-keyword">const</span> rnd = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(particleSparkCount * <span class="hljs-number">3</span>);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; particleSparkCount; i++) {
        size[i] = <span class="hljs-number">0.5</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">0.8</span>;
        rnd[i * <span class="hljs-number">3</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">10</span>;
        rnd[i * <span class="hljs-number">3</span> + <span class="hljs-number">1</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>;
        rnd[i * <span class="hljs-number">3</span> + <span class="hljs-number">2</span>] = <span class="hljs-number">0.5</span> + <span class="hljs-number">0.5</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();
    }
    geo.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'position'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferAttribute</span>(pos, <span class="hljs-number">3</span>));
    geo.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'size'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferAttribute</span>(size, <span class="hljs-number">1</span>));
    geo.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'random'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferAttribute</span>(rnd, <span class="hljs-number">3</span>));

    <span class="hljs-keyword">const</span> mat = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">ShaderMaterial</span>({
        <span class="hljs-attr">uniforms</span>: {<span class="hljs-attr">time</span>: {<span class="hljs-attr">value</span>: <span class="hljs-number">0</span>}},
        <span class="hljs-attr">vertexShader</span>: <span class="hljs-string">`
            uniform float time;
            attribute float size;
            attribute vec3 random;
            void main() {
                vec3 p = position;
                float t = time * 0.25 * random.z;
                float ax = t + random.y, ay = t * 0.75 + random.x;
                float amp = (0.6 + sin(random.x + t * 0.6) * 0.3) * random.z;
                p.x += sin(ax + p.y * 0.06 + random.x * 0.1) * amp;
                p.y += cos(ay + p.z * 0.06 + random.y * 0.1) * amp;
                p.z += sin(ax * 0.85 + p.x * 0.06 + random.z * 0.1) * amp;
                vec4 mvPosition = modelViewMatrix * vec4(p, 1.0);
                gl_PointSize = size * (300.0 / -mvPosition.z);
                gl_Position = projectionMatrix * mvPosition;
            }`</span>,
        <span class="hljs-attr">fragmentShader</span>: <span class="hljs-string">`
            uniform float time;
            void main() {
                float d = length(gl_PointCoord - vec2(0.5));
                float alpha = 1.0 - smoothstep(0.4, 0.5, d);
                if (alpha &lt; 0.01) discard;
                gl_FragColor = vec4(1.0, 1.0, 1.0, alpha);
            }`</span>,
        <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">depthWrite</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">blending</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">AdditiveBlending</span>
    });

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Points</span>(geo, mat);
}

<span class="hljs-keyword">const</span> particlesSpark = <span class="hljs-title function_">createSparkles</span>(modelDataArray[<span class="hljs-number">0</span>])
scene.<span class="hljs-title function_">add</span>(particlesSpark);


<span class="hljs-keyword">const</span> targetPositions = modelDataArray[<span class="hljs-number">0</span>].<span class="hljs-property">positions</span>;

<span class="hljs-keyword">const</span> particleArr = particles.<span class="hljs-property">geometry</span>.<span class="hljs-property">attributes</span>.<span class="hljs-property">position</span>.<span class="hljs-property">array</span>;
<span class="hljs-keyword">const</span> sparkleArr = particlesSpark.<span class="hljs-property">geometry</span>.<span class="hljs-property">attributes</span>.<span class="hljs-property">position</span>.<span class="hljs-property">array</span>;

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; particleCount; j++) {
    <span class="hljs-keyword">const</span> idx = j * <span class="hljs-number">3</span>;

    <span class="hljs-comment">// ç›´æ¥ä» targetPositions æ‹·è´ä¸‰ä¸ªè¿ç»­çš„æ•°å€¼ (x, y, z)</span>
    particleArr[idx] = targetPositions[idx];
    particleArr[idx + <span class="hljs-number">1</span>] = targetPositions[idx + <span class="hljs-number">1</span>];
    particleArr[idx + <span class="hljs-number">2</span>] = targetPositions[idx + <span class="hljs-number">2</span>];

    <span class="hljs-comment">// åŒæ­¥æ›´æ–°é—ªçƒç²’å­</span>
    <span class="hljs-keyword">if</span> (j &lt; particleSparkCount) {
        sparkleArr[idx] = targetPositions[idx];
        sparkleArr[idx + <span class="hljs-number">1</span>] = targetPositions[idx + <span class="hljs-number">1</span>];
        sparkleArr[idx + <span class="hljs-number">2</span>] = targetPositions[idx + <span class="hljs-number">2</span>];
    }
}

<span class="hljs-comment">// å¿…é¡»é€šçŸ¥ GPU æ›´æ–°</span>
particles.<span class="hljs-property">geometry</span>.<span class="hljs-property">attributes</span>.<span class="hljs-property">position</span>.<span class="hljs-property">needsUpdate</span> = <span class="hljs-literal">true</span>;
particlesSpark.<span class="hljs-property">geometry</span>.<span class="hljs-property">attributes</span>.<span class="hljs-property">position</span>.<span class="hljs-property">needsUpdate</span> = <span class="hljs-literal">true</span>;

</code></pre>
<p><img alt="20260209102034è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>
<p>æˆ‘ä»¬åˆæ·»åŠ äº†ä¸€ä¸ª<code>createSparkles</code>ç„¶åç²’å­ä½ç½®å’Œæœ€å¼€å§‹çš„æ¨¡å‹ç²’å­ä½ç½®ä¸€è‡´ï¼Œåªä¸è¿‡é¢œè‰²æˆ‘ä»¬è®¾ç½®æˆç™½è‰²ï¼ä½†æ˜¯åˆ°è¿™è¿˜æ²¡ç»“æŸï¼æˆ‘ä»¬çš„æäº®é­”æ³•è¿˜è¦ä¾é <code>THREE</code>çš„åæœŸå¤„ç†èƒ½åŠ›!</p>
<blockquote>
<p><code>EffectComposer</code> æ˜¯ <code>Three.js</code> çš„ åæœŸå¤„ç†ï¼ˆPost-processingï¼‰ç®¡ç†å™¨ã€‚å®ƒè´Ÿè´£ç®¡ç†ä¸€ä¸ªâ€œé€šé“ï¼ˆPassï¼‰â€é˜Ÿåˆ—ã€‚å®ƒä¸å†ç›´æ¥å°†åœºæ™¯æ¸²æŸ“åˆ°ç”»å¸ƒä¸Šï¼Œè€Œæ˜¯æ¸²æŸ“åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç¼“å†²å¸§ä¸­ï¼Œç»è¿‡å„ç§è§†è§‰ç‰¹æ•ˆå¤„ç†åï¼Œå†å‘ˆç°ç»™ç”¨æˆ·ã€‚</p>
</blockquote>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> composer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EffectComposer</span>(renderer);
composer.<span class="hljs-title function_">addPass</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderPass</span>(scene, camera));
composer.<span class="hljs-title function_">addPass</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UnrealBloomPass</span>(<span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector2</span>(innerWidth, innerHeight), <span class="hljs-number">.45</span>, <span class="hljs-number">.5</span>, <span class="hljs-number">.85</span>));
<span class="hljs-keyword">const</span> after = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AfterimagePass</span>();
after.<span class="hljs-property">uniforms</span>.<span class="hljs-property">damp</span>.<span class="hljs-property">value</span> = <span class="hljs-number">.92</span>;
composer.<span class="hljs-title function_">addPass</span>(after);
composer.<span class="hljs-title function_">addPass</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputPass</span>());
</code></pre>
<ul>
<li>UnrealBloomPass æ˜¯ç”¨æ¥åšè§å…‰ã€å‘å…‰çš„æ•ˆæœ</li>
<li>AfterimagePass æ˜¯ç”¨æ¥åšæ‹–å°¾å½±æ•ˆæœ</li>
</ul>
<p><span href="https://code.juejin.cn/pen/7604689619694649390" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7604689619694649390" data-src="https://code.juejin.cn/pen/7604689619694649390" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h2 data-id="heading-10">ç»“æŸè¯­</h2>
<p>å¸Œæœ›æ‰€æœ‰äºº 2026 äº‹äº‹å¦‚æ„ï¼</p>
<h2 data-id="heading-11">å‚è€ƒä»£ç </h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcodepen.io%2FVoXelo%2Fpen%2FqEOEyLV" target="_blank" title="https://codepen.io/VoXelo/pen/qEOEyLV" ref="nofollow noopener noreferrer">Three.js &amp; GLSL Particle Metamorphosis</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[LangChainä¹‹é“¾]LangChainçš„Chainâ€”â€”ç”±Runnableæ„å»ºçš„ç®¡é“]]></title>    <link>https://juejin.cn/post/7604084016509960233</link>    <guid>https://juejin.cn/post/7604084016509960233</guid>    <pubDate>2026-02-09T01:48:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604084016509960233" data-draft-id="7603783314713821220" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[LangChainä¹‹é“¾]LangChainçš„Chainâ€”â€”ç”±Runnableæ„å»ºçš„ç®¡é“"/> <meta itemprop="keywords" content="LangChain,Python"/> <meta itemprop="datePublished" content="2026-02-09T01:48:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JaydenAI"/> <meta itemprop="url" content="https://juejin.cn/user/3001011641261209"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [LangChainä¹‹é“¾]LangChainçš„Chainâ€”â€”ç”±Runnableæ„å»ºçš„ç®¡é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3001011641261209/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JaydenAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T01:48:20.000Z" title="Mon Feb 09 2026 01:48:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ LangChain ä¸­ï¼Œ<code>Chain</code> æŒ‡çš„æ˜¯å¯¹å¤šä¸ªç»„ä»¶ï¼ˆå¦‚ Promptã€LLMå’ŒOutputPparserç­‰ï¼‰çš„ä¸€ç³»åˆ—è°ƒç”¨æµç¨‹ã€‚å®ƒå…·æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œå³ä¼ ç»Ÿçš„ä»¥<code>LLMChain</code>ä¸ºä»£è¡¨çš„â€œè€é“¾â€å’Œæœ€æ–°çš„é‡‡ç”¨<code>LCEL</code>ï¼ˆLangChain Exppression Languageï¼‰çš„â€œæ–°é“¾â€ã€‚</p>
<h2 data-id="heading-0">1. ä¼ ç»Ÿâ€œè€é“¾â€</h2>
<p>ä»ä¼ ç»Ÿé“¾ï¼ˆLegacy Chainsï¼‰åˆ° LCELçš„æ¼”è¿›æ˜¯ä¸€æ¬¡ä»â€œå‘½ä»¤å¼å°è£…â€å‘â€œå£°æ˜å¼ç»„åˆâ€çš„é‡å¤§é£è·ƒã€‚æ—©æœŸçš„ <code>LangChain</code> ä¾é ä¸€ç³»åˆ—ç¡¬ç¼–ç çš„ç±»ï¼ˆå¦‚<code>LLMChain</code>å’Œ<code>RetrievalQA</code>ï¼‰æ¥æ„å»ºåº”ç”¨ã€‚å¼€å‘è€…è°ƒç”¨ç‰¹å®šçš„ç±»ï¼Œå†…éƒ¨é€»è¾‘åœ¨è¿™äº›ç±»ä¸­è¢«é«˜åº¦å°è£…ï¼Œå®šåˆ¶èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚æ¯”å¦‚ æç¤ºè¯å¾€å¾€éšè—åœ¨æºä»£ç ä¸­ï¼Œä¿®æ”¹ä¸ä¾¿ã€‚æ¥å£ä¸ç»Ÿä¸€ä¹Ÿæ˜¯ä¸€ä¸ªç¡¬ä¼¤ï¼Œä¸åŒçš„é“¾å¯èƒ½éœ€è¦ä¸åŒçš„è¾“å…¥è¾“å‡ºæ ¼å¼ã€‚è€Œæœ€å¤§çš„é—®é¢˜è¿˜æ˜¯åŠŸèƒ½æ‰©å±•éš¾ï¼Œæƒ³è¦åœ¨ä¸­é—´æ­¥éª¤æ·»åŠ è‡ªå®šä¹‰é€»è¾‘ï¼ˆå¦‚ä¸­é—´å¤„ç†ã€æ—¥å¿—ï¼‰éå¸¸ç¹çã€‚</p>
<p>åœ¨å¦‚ä¸‹çš„æ¼”ç¤ºç¨‹åºä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨<code>LLMChain</code>å®ç°äº†ä¸€ä¸ªå…¸å‹çš„åº”ç”¨åœºæ™¯ï¼šä¼ å…¥å‚æ•°æ ¼å¼åŒ–æç¤ºè¯æ¨¡æ¿ï¼Œå°†ç”Ÿæˆçš„æç¤ºè¯ä½œä¸ºè¾“å…¥è°ƒç”¨LLMå¹¶è§£æè¾“å‡ºã€‚è¿™ä¸ªæµç¨‹æ¶‰åŠçš„ä¸‰ä¸ªæ­¥éª¤éœ€è¦å¯¹åº”çš„ä¸‰ä¸ªç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯è¡¨ç¤ºæç¤ºè¯æ¨¡æ¿çš„<code>ChatPromptTemplate</code>ã€<code>LLM</code>æ¨¡å‹ï¼ˆ<code>ChatOpenAI</code>ï¼‰å’Œç”¨äºè§£æè¾“å‡ºçš„<code>StrOutputParser</code>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> StrOutputParser
<span class="hljs-keyword">from</span> langchain_classic.chains  <span class="hljs-keyword">import</span> LLMChain

prompt = ChatPromptTemplate.from_template(<span class="hljs-string">"Give me small report about {topic}"</span>)
model = ChatOpenAI(
    model=<span class="hljs-string">"gpt-5.2-chat"</span>,
    base_url=<span class="hljs-string">"base url of your deployed model"</span>,
    api_key=<span class="hljs-string">"your api key"</span>
)
parser = StrOutputParser()
chain = LLMChain(
    prompt=prompt,
    llm=model,
    output_parser=parser
)
result = chain.run(topic=<span class="hljs-string">"Artificial Intelligence"</span>)
<span class="hljs-built_in">print</span>(result)
</code></pre>
<p>æˆ‘ä»¬å°†ä¸‰ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°è°ƒç”¨æ„é€ å‡½æ•°æ„å»º<code>LLMChain</code>å¯¹è±¡ï¼Œç„¶åå°†æç¤ºè¯æ¨¡æ¿çš„å ä½ç¬¦å‚æ•°ä½œä¸ºè¾“å…¥è°ƒç”¨å®ƒçš„<code>run</code>æ–¹æ³•ï¼Œæœ€ç»ˆå°±ä¼šå¾—åˆ°æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°çš„æ–‡ä½“ï¼Œå‰é¢çš„è¾“å‡ºå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">**Small Report <span class="hljs-keyword">on</span> Artificial Intelligence**

<span class="hljs-function">Artificial <span class="hljs-title">Intelligence</span> (<span class="hljs-params">AI</span>) <span class="hljs-keyword">is</span> a branch of computer science focused <span class="hljs-keyword">on</span> creating machines <span class="hljs-keyword">and</span> systems capable of performing tasks that normally require human intelligence  result</span> = chain.run(topic=<span class="hljs-string">"Artificial Intelligence"</span>)
â€¦
</code></pre>
<h2 data-id="heading-1">2. åŸºäºLCELçš„â€œæ–°é“¾â€</h2>
<p>æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œæ•´ä¸ªé“¾ä½œä¸ºä½œä¸ºä¸€ä¸ªé»‘ç›’è¢«å®Œå…¨å°è£…åˆ°<code>LLMChain</code>ä¸­ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“èƒŒåçš„é“¾è·¯æ˜¯ä»€ä¹ˆæ ·å­ï¼Œæ›´ä¸ç”¨è¯´å¯¹å®ƒè¿›è¡Œå®šåˆ¶äº†ã€‚è¿™ç§ä¼ ç»Ÿçš„ç¼–ç¨‹æ¨¡å¼å·²ç»åŸºæœ¬æ²¡æœ‰ä½¿ç”¨äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å¦‚ä¸‹æ‰€ç¤ºçš„åŸºäºLCELç¼–å†™çš„ç®¡é“ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain.schema.output_parser <span class="hljs-keyword">import</span> StrOutputParser

prompt = ChatPromptTemplate.from_template(<span class="hljs-string">"Give me small report about {topic}"</span>)
model = ChatOpenAI(
    model=<span class="hljs-string">"gpt-5.2-chat"</span>,
    base_url=<span class="hljs-string">"base url of your deployed model"</span>,
    api_key=<span class="hljs-string">"your api key"</span>
)
parser = StrOutputParser()

chain = prompt | model | parser
result = chain.invoke({<span class="hljs-string">"topic"</span>: <span class="hljs-string">"artificial intelligence"</span>})
<span class="hljs-built_in">print</span>(result)
</code></pre>
<p>æˆ‘ä»¬æ— éœ€ä»»ä½•å°è£…é“¾ç±»å‹ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ç±»ä¼¼äºUnixç®¡é“å‘½ä»¤çš„æ–¹å¼ç›´æ¥å°†ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆä¸€ä¸ªé“¾ï¼Œç®€å•ä¸”ç›´è§‚ã€‚å…³é”®æ˜¯å®šåˆ¶èµ·æ¥ä¹Ÿå®¹æ˜“ï¼Œæ·»åŠ ã€æ›¿æ¢å’Œåˆ é™¤ç®¡é“çš„ç»„ä»¶éƒ½å¾ˆæ–¹ä¾¿ã€‚</p>
<h2 data-id="heading-2">3. æ¨¡æ‹Ÿå®ç°</h2>
<p>å…¶å®è¿™ç§åŸºäºç®¡é“å®šä¹‰é“¾è·¯çš„å®ç°å¾ˆç®€å•ï¼Œå®ƒä¹Ÿä¸æ˜¯<code>LangChain</code>ç‰¹æœ‰ï¼Œå¾ˆå¤šç”¨äºå¤„ç†HTTPè¯·æ±‚çš„Webæ¡†æ¶éƒ½æ˜¯é‡‡ç”¨è¿™ç§è®¾è®¡ã€‚<code>LangChain</code>åŸºäºLCELçš„é“¾ä¾èµ–ä¸€ä¸ªåä¸º<code>Runnable</code>çš„æŠ½è±¡ç±»ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºé“¾è·¯æœ‰ä¸ªå…³é”®çš„ç»„ä»¶ï¼Œé“¾æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª<code>Runnable</code>å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ç§å…¸å‹çš„â€œç»„åˆâ€è®¾è®¡æ¨¡å¼ã€‚<code>Runnable</code>æ˜¯æœ¬ç³»åˆ—æ–‡ç« å…³æ³¨çš„æ ¸å¿ƒï¼Œåœ¨æ­£å¼ä»‹ç»å®ƒä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨æœ€ç®€å•çš„ä»£ç å®šä¹‰æ¨¡æ‹Ÿå®ƒçš„å®ç°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> annotations
<span class="hljs-keyword">from</span> abc <span class="hljs-keyword">import</span> ABC, abstractmethod
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> (<span class="hljs-type">Callable</span>, <span class="hljs-type">Generic</span>, TypeVar, <span class="hljs-type">Any</span>)

Input = TypeVar(<span class="hljs-string">'Input'</span>)
Output = TypeVar(<span class="hljs-string">'Output'</span>)
Other = TypeVar(<span class="hljs-string">'Other'</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Runnable</span>[Input, Output](ABC):    
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">invoke</span>(<span class="hljs-params">self, <span class="hljs-built_in">input</span>: Input</span>) -&gt; Output:
        <span class="hljs-keyword">pass</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__or__</span>(<span class="hljs-params">self, other: Runnable[Output, Other]</span>) -&gt; Runnable[Input, Other]:
        <span class="hljs-keyword">return</span> ComposibleRunnable(self, other)
    
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ComposibleRunnable</span>(Runnable[Input, Output]):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, first: Runnable[Input, <span class="hljs-type">Any</span>], second: Runnable[<span class="hljs-type">Any</span>, Output]</span>):
        self.first = first
        self.second = second
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">invoke</span>(<span class="hljs-params">self, <span class="hljs-built_in">input</span>: Input</span>) -&gt; Output: 
        <span class="hljs-keyword">return</span> self.second.invoke(self.first.invoke(<span class="hljs-built_in">input</span>))
</code></pre>
<p>æˆ‘ä»¬å°†<code>Runnable</code>å®šä¹‰æˆæŠ½è±¡çš„æ³›å‹ç±»ï¼ŒInputå’ŒOutputç±»å‹å˜é‡è¡¨ç¤ºå®ƒçš„è¾“å…¥å’Œè¾“å‡ºç±»å‹ã€‚æ—¢ç„¶å‘½åä¸º<code>Runnable</code>ï¼Œæ„å‘³ç€å®ƒå¯ä»¥è¢«è°ƒç”¨æ¥å®ŒæˆæŸç§ä»»åŠ¡ï¼Œè¿™ä½“ç°åœ¨å®ƒçš„æŠ½è±¡æ–¹æ³•invokeæ–¹æ³•ä¸Šï¼Œå®ƒå…·æœ‰ä¸€ä¸ªç±»å‹ä¸ºInputçš„å‚æ•°ã€‚ç”±äºæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç®¡é“ç¬¦å·â€œ|â€ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ç®¡é“æ“ä½œå®ç°åœ¨é‡å†™çš„<code>__or__</code>æ–¹æ³•ä¸­ï¼Œå¦ä¸€ä¸ªä¸ä¹‹ç»„åˆçš„ç±»å‹ä¸º<code>Runnable[Output, Other]</code>ï¼Œä¸¤è€…ç»„åˆçš„é“¾æ¡å°±æ˜¯ä¸€ä¸ª<code>Runnable[Input, Other]</code>å¯¹è±¡ã€‚è¯¥æ–¹æ³•å…·ä½“è¿”å›çš„æ˜¯ä¸€ä¸ª<code>ComposibleRunnable[Input, Other]</code>å¯¹è±¡ã€‚</p>
<p>å¦‚ä¸‹è¿™ä¸ª<code>RunnableLamda[Input,Output]</code>ç±»å‹æ˜¯å¯¹<code>Runnable[Input, Output]</code>è¿™ä¸ªæŠ½è±¡ç±»çš„å®ç°ï¼Œåœ¨å®ƒé‡å†™çš„<code>invoke</code>æ–¹æ³•ä¸­ï¼Œæ‰§è¡Œçš„æ“ä½œæ˜¯åœ¨æ„é€ å‡½æ•°ä¸­æŒ‡å®šçš„Callable[[Input], Output]å¯¹è±¡ã€‚æˆ‘ä»¬åˆ›å»ºäº†å®ƒçš„ä¸‰ä¸ªå®ä¾‹ï¼Œåˆ†åˆ«é’ˆå¯¹ä¸‰é¡¹åŸºæœ¬æ•°å­¦è¿ç®—ï¼šè‡ªå¢ã€å€ä¹˜å’Œä»¥2ä¸ºåº•çš„å¯¹æ•°ã€‚æˆ‘ä»¬å°†å®ƒä»¬ä»¥ç®¡é“çš„å½¢å¼æ„æˆä¸€ä¸ªé“¾ï¼Œå¹¶å¯¹ä¼ å…¥çš„å‚æ•°3å®æ–½è¿ç®—ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> math  
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RunnableLamda</span>(Runnable,<span class="hljs-type">Generic</span>[Input,Output]):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, func: <span class="hljs-type">Callable</span>[[Input], Output]</span>):
        self.func = func
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">invoke</span>(<span class="hljs-params">self, <span class="hljs-built_in">input</span>: Input</span>) -&gt; Output:   
        <span class="hljs-keyword">return</span> self.func(<span class="hljs-built_in">input</span>)

increase = RunnableLamda(<span class="hljs-keyword">lambda</span> x: x + <span class="hljs-number">1</span>)
double = RunnableLamda(<span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">2</span>)
log2 = RunnableLamda(math.log2)

chain = increase | double | log2
result = chain.invoke(<span class="hljs-number">3</span>)  
<span class="hljs-keyword">assert</span> result == <span class="hljs-number">3.0</span> <span class="hljs-comment"># ((3 + 1) * 2) -&gt; log2(8) -&gt; 3.0</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äºŒå‰æ ‘éå†æ€ç»´å®æˆ˜]]></title>    <link>https://juejin.cn/post/7604039449468207154</link>    <guid>https://juejin.cn/post/7604039449468207154</guid>    <pubDate>2026-02-09T03:02:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604039449468207154" data-draft-id="7604080364354027547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äºŒå‰æ ‘éå†æ€ç»´å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,JavaScript,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-02-09T03:02:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äºŒå‰æ ‘éå†æ€ç»´å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T03:02:37.000Z" title="Mon Feb 09 2026 03:02:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äºŒå‰æ ‘éå†æ€ç»´å®æˆ˜</h2>
<p>åœ¨ç®—æ³•é¢è¯•ä¸­ï¼ŒäºŒå‰æ ‘æ˜¯ç»•ä¸å¼€çš„åŸºç¡€æ ¸å¿ƒï¼Œè€Œã€Œéå†ã€æ›´æ˜¯è§£å†³äºŒå‰æ ‘é—®é¢˜çš„ã€Œä¸‡èƒ½é’¥åŒ™ã€ã€‚æ— è®ºæ˜¯æ ¹åˆ°å¶çš„è·¯å¾„ç»Ÿè®¡ã€å±‚é—´èŠ‚ç‚¹çš„ç‰¹æ®Šå¤„ç†ï¼Œè¿˜æ˜¯è·¯å¾„å€¼çš„è®¡ç®—ä¸åˆ¤æ–­ï¼Œåªè¦é¢˜ç›®å›´ç»•äºŒå‰æ ‘çš„ã€Œæ ‘æã€åšæ–‡ç« ï¼Œç”¨éå†æ€ç»´è§£é¢˜éƒ½ä¼šæ— æ¯”è‡ªç„¶ã€é«˜æ•ˆã€‚</p>
<p>å¾ˆå¤šæ–°æ‰‹åœ¨é¢å¯¹äºŒå‰æ ‘é¢˜æ—¶ï¼Œå®¹æ˜“é™·å…¥ã€Œä¸€é¢˜ä¸€è§£ã€çš„å›°å¢ƒï¼Œæ¯é“é¢˜éƒ½é‡æ–°è®¾è®¡éå†é€»è¾‘ï¼Œæ—¢æµªè´¹æ—¶é—´åˆå®¹æ˜“å‡ºé”™ã€‚å®é™…ä¸Šï¼ŒäºŒå‰æ ‘çš„éå†é¢˜é«˜åº¦åŒè´¨åŒ–ï¼Œåªéœ€æŒæ¡ä¸¤å¥—é€šç”¨æ¨¡æ¿ï¼Œå†æ ¹æ®é¢˜ç›®éœ€æ±‚ä¿®æ”¹æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œå°±èƒ½è½»æ¾æå®š90%çš„é«˜é¢‘è€ƒç‚¹ã€‚</p>
<p>æœ¬æ–‡å°†ä»ã€Œæ¨¡æ¿æç‚¼â†’å®æˆ˜æ‹†è§£â†’é¿å‘ä¼˜åŒ–ã€ä¸‰ä¸ªç»´åº¦ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨éå†æ€ç»´ç ´è§£äºŒå‰æ ‘è·¯å¾„/å±‚åºç±»é«˜é¢‘é¢˜ï¼Œç»“åˆ6é“åŠ›æ‰£ç»å…¸çœŸé¢˜ï¼Œè®©ä½ ä»ã€Œå¥—æ¨¡æ¿ã€åˆ°ã€Œçµæ´»ç”¨ã€ï¼Œå½»åº•æŒæ¡äºŒå‰æ ‘éå†çš„è§£é¢˜ç²¾é«“ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å…ˆèƒŒä¼šä¸¤å¥—é€šç”¨æ¨¡æ¿ï¼šé€’å½’+å±‚åºï¼Œè¦†ç›–æ‰€æœ‰åœºæ™¯</h2>
<p>äºŒå‰æ ‘éå†é¢˜å¯åˆ†ä¸ºä¸¤å¤§æ ¸å¿ƒç±»å‹ï¼Œå¯¹åº”ä¸¤å¥—é€šç”¨æ¨¡æ¿ï¼Œæ— éœ€è®°å¿†å¤æ‚é€»è¾‘ï¼ŒèƒŒä¼šå°±èƒ½ç›´æ¥å¥—ç”¨ï¼Œé‡ç‚¹åœ¨äºç†è§£ã€Œæ¨¡æ¿ç»“æ„ã€å’Œã€Œä¸šåŠ¡å¡«å……ç‚¹ã€ã€‚</p>
<h3 data-id="heading-2">1.1 é€’å½’éå†æ¨¡æ¿ï¼ˆå‰åº+å›æº¯ï¼‰ï¼šé€‚é…æ ¹åˆ°å¶è·¯å¾„ç±»é—®é¢˜</h3>
<p>é€’å½’éå†çš„æ ¸å¿ƒæ˜¯ã€Œå‰åºå…¥æ ˆã€ååºå‡ºæ ˆã€çš„å›æº¯æ€æƒ³ï¼Œé€‚åˆéœ€è¦è·Ÿè¸ªã€Œæ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹å®Œæ•´è·¯å¾„ã€çš„åœºæ™¯ï¼ˆå¦‚è·¯å¾„æ”¶é›†ã€è·¯å¾„å€¼è®¡ç®—ã€è·¯å¾„ç‰¹å¾åˆ¤æ–­ï¼‰ã€‚å…¶ä¼˜åŠ¿åœ¨äºèƒ½è‡ªç„¶è®°å½•èŠ‚ç‚¹è®¿é—®è½¨è¿¹ï¼Œä»£ç ç®€æ´ä¸”é€»è¾‘æ¸…æ™°ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¼˜åŒ–åçš„é€šç”¨æ¨¡æ¿ï¼ˆä¸¤ç§å®ç°æ–¹å¼ï¼ŒæŒ‰éœ€é€‰æ‹©ï¼‰ï¼š</p>
<h4 data-id="heading-3">æ–¹å¼1ï¼špathæ•°ç»„+æ‰‹åŠ¨å›æº¯ï¼ˆç›´è§‚æ˜“æ‡‚ï¼Œæ–°æ‰‹é¦–é€‰ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// 1. å¤„ç†ç©ºæ ‘è¾¹ç•Œ</span>
  <span class="hljs-keyword">if</span> (root === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> [];
  <span class="hljs-comment">// 2. å®šä¹‰ç»“æœå®¹å™¨ï¼ˆè§†é¢˜ç›®éœ€æ±‚ï¼šæ•°ç»„/å­—ç¬¦ä¸²/æ•°å­—ï¼‰</span>
  <span class="hljs-keyword">const</span> res = [];
  <span class="hljs-comment">// 3. å®šä¹‰è·¯å¾„å®¹å™¨ï¼Œç”¨äºå›æº¯è®°å½•æ ¹åˆ°å½“å‰èŠ‚ç‚¹çš„è½¨è¿¹</span>
  <span class="hljs-keyword">const</span> path = [];
  <span class="hljs-comment">// 4. å¯åŠ¨é€’å½’éå†</span>
  <span class="hljs-title function_">traverse</span>(root);
  <span class="hljs-comment">// 5. è¿”å›æœ€ç»ˆç»“æœ</span>
  <span class="hljs-keyword">return</span> res;

  <span class="hljs-comment">// é€’å½’éå†è¾…åŠ©å‡½æ•°ï¼ˆé—­åŒ…å…±äº«å¤–å±‚resã€pathï¼‰</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">node</span>) {
    <span class="hljs-comment">// é€’å½’ç»ˆæ­¢ï¼šç©ºèŠ‚ç‚¹ç›´æ¥è¿”å›ï¼Œé˜²æ­¢æ— é™é€’å½’</span>
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å‰åºä½ç½®ï¼šè¿›å…¥èŠ‚ç‚¹ï¼Œæ‰§è¡Œã€Œå…¥æ ˆã€æ“ä½œï¼ˆæ ¸å¿ƒï¼šè®°å½•è½¨è¿¹ï¼‰</span>
    path.<span class="hljs-title function_">push</span>(node.<span class="hljs-property">val</span>);

    <span class="hljs-comment">// ã€æ ¸å¿ƒä¸šåŠ¡åŒºã€‘è§†é¢˜ç›®éœ€æ±‚ç¼–å†™é€»è¾‘ï¼ˆå¦‚å¶å­èŠ‚ç‚¹åˆ¤æ–­ã€è·¯å¾„å¤„ç†ï¼‰</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">left</span> === <span class="hljs-literal">null</span> &amp;&amp; node.<span class="hljs-property">right</span> === <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// å¶å­èŠ‚ç‚¹ï¼šé€šå¸¸æ˜¯è·¯å¾„å¤„ç†çš„å…³é”®èŠ‚ç‚¹ï¼ˆæ”¶é›†/è®¡ç®—/åˆ¤æ–­ï¼‰</span>
      res.<span class="hljs-title function_">push</span>([...path]); <span class="hljs-comment">// æµ…æ‹·è´ï¼Œé¿å…åç»­å›æº¯ä¿®æ”¹è·¯å¾„</span>
    }

    <span class="hljs-comment">// é€’å½’éå†å·¦å³å­æ ‘ï¼ˆå¿…é¡»å…ˆå·¦åå³ï¼Œä¸å¯é‡å¤éå†ï¼‰</span>
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">left</span>);
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">right</span>);

    <span class="hljs-comment">// ååºä½ç½®ï¼šç¦»å¼€èŠ‚ç‚¹ï¼Œæ‰§è¡Œã€Œå‡ºæ ˆã€æ“ä½œï¼ˆæ ¸å¿ƒï¼šå›æº¯ï¼Œæ¢å¤è½¨è¿¹ï¼‰</span>
    path.<span class="hljs-title function_">pop</span>();
  }
}
</code></pre>
<h4 data-id="heading-4">æ–¹å¼2ï¼šå¸¦å‚éå†+è‡ªåŠ¨å›æº¯ï¼ˆç®€æ´é«˜æ•ˆï¼Œè¿›é˜¶é¦–é€‰ï¼‰</h4>
<p>æ ¸å¿ƒåŸç†ï¼šJavaScriptçš„åŸºæœ¬ç±»å‹ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€ä½æ©ç ï¼‰æ˜¯ã€Œå€¼ä¼ é€’ã€ï¼Œé€’å½’æ—¶ä¼ é€’çš„æ˜¯å€¼çš„å‰¯æœ¬ï¼Œå­æ ‘ä¿®æ”¹ä¸ä¼šå½±å“ä¸Šä¸€å±‚ï¼Œé€’å½’è¿”å›åè‡ªåŠ¨æ¢å¤çŠ¶æ€ï¼Œæ— éœ€æ‰‹åŠ¨æ‰§è¡Œpopå›æº¯ï¼Œä»£ç æ›´ç®€æ´ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// 1. å¤„ç†ç©ºæ ‘è¾¹ç•Œ</span>
  <span class="hljs-keyword">if</span> (root === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> [];
  <span class="hljs-comment">// 2. å®šä¹‰ç»“æœå®¹å™¨ï¼ˆè§†é¢˜ç›®éœ€æ±‚ï¼šæ•°ç»„/å­—ç¬¦ä¸²/æ•°å­—ï¼‰</span>
  <span class="hljs-keyword">const</span> res = [];
  <span class="hljs-comment">// 3. å¯åŠ¨é€’å½’éå†ï¼šåˆå§‹è·¯å¾„ä¸ºç©ºï¼Œä¼ é€’ç»™æ ¹èŠ‚ç‚¹</span>
  <span class="hljs-title function_">traverse</span>(root, []);
  <span class="hljs-comment">// 4. è¿”å›æœ€ç»ˆç»“æœ</span>
  <span class="hljs-keyword">return</span> res;

  <span class="hljs-comment">// é€’å½’éå†è¾…åŠ©å‡½æ•°ï¼šå‚æ•°ä¼ é€’ã€Œæ ¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„ã€</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">node, path</span>) {
    <span class="hljs-comment">// é€’å½’ç»ˆæ­¢ï¼šç©ºèŠ‚ç‚¹ç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å‰åºä½ç½®ï¼šæ›´æ–°è·¯å¾„ â†’ æµ…æ‹·è´åŸè·¯å¾„ï¼Œæ·»åŠ å½“å‰èŠ‚ç‚¹å€¼ï¼ˆé¿å…ä¿®æ”¹ä¸Šä¸€å±‚è·¯å¾„ï¼‰</span>
    <span class="hljs-keyword">const</span> newPath = [...path, node.<span class="hljs-property">val</span>];

    <span class="hljs-comment">// ã€æ ¸å¿ƒä¸šåŠ¡åŒºã€‘å¶å­èŠ‚ç‚¹ï¼šè·¯å¾„å¤„ç†ï¼ˆæ”¶é›†/è®¡ç®—/æ¯”è¾ƒ/æ ¼å¼åŒ–ï¼‰</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">left</span> === <span class="hljs-literal">null</span> &amp;&amp; node.<span class="hljs-property">right</span> === <span class="hljs-literal">null</span>) {
      res.<span class="hljs-title function_">push</span>(newPath); <span class="hljs-comment">// å¶å­èŠ‚ç‚¹å¤„ç†é€»è¾‘ï¼ŒæŒ‰éœ€ä¿®æ”¹</span>
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// é€’å½’éå†å·¦å³å­æ ‘ï¼šä¼ é€’æ›´æ–°åçš„æ–°è·¯å¾„ï¼Œè‡ªåŠ¨å›æº¯</span>
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">left</span>, newPath);
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">right</span>, newPath);
    <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨å›æº¯ï¼šnewPathæ˜¯æµ…æ‹·è´çš„æ–°æ•°ç»„ï¼Œä¸å½±å“ä¸Šä¸€å±‚çš„path</span>
  }
}
</code></pre>
<h4 data-id="heading-5">é€’å½’æ¨¡æ¿æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li>
<p>é—­åŒ…ç‰¹æ€§ï¼šè¾…åŠ©å‡½æ•°traverseå…±äº«å¤–å±‚reså’Œpathï¼Œæ— éœ€é¢å¤–ä¼ å‚ï¼Œç®€åŒ–ä»£ç ï¼›</p>
</li>
<li>
<p>å›æº¯é€»è¾‘ï¼šæ–¹å¼1éœ€ä¿è¯pushå’Œpopæˆå¯¹å‡ºç°ï¼Œæ–¹å¼2å€ŸåŠ©å€¼ä¼ é€’å®ç°è‡ªåŠ¨å›æº¯ï¼›</p>
</li>
<li>
<p>å…³é”®èŠ‚ç‚¹ï¼šå¶å­èŠ‚ç‚¹ï¼ˆnode.left === null &amp;&amp; node.right === nullï¼‰æ˜¯è·¯å¾„ç±»é¢˜çš„æ ¸å¿ƒå¤„ç†ç‚¹ï¼Œå‡ ä¹æ‰€æœ‰è·¯å¾„é¢˜éƒ½åœ¨æ­¤å¤„ç¼–å†™æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼›</p>
</li>
<li>
<p>çŠ¶æ€ä¼ é€’ï¼šå¸¦å‚éå†çš„æ ¸å¿ƒæ˜¯ä¼ é€’ã€Œä¸Šä¸€å±‚èŠ‚ç‚¹çš„çŠ¶æ€ã€ï¼ˆå¦‚ç´¯è®¡å€¼ã€è·¯å¾„ã€ä½æ©ç ï¼‰ï¼Œä¸‹ä¸€å±‚åŸºäºè¯¥çŠ¶æ€ç»§ç»­æ›´æ–°ã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">å¸¸è§çŠ¶æ€ä¼ é€’ç±»å‹ï¼ˆè®°ç†Ÿç›´æ¥å¥—ç”¨ï¼‰</h4>
<p>å¸¦å‚éå†çš„å‚æ•°æœ¬è´¨æ˜¯ã€Œè·¨èŠ‚ç‚¹çš„çŠ¶æ€ã€ï¼Œå¸¸è§ç±»å‹åªæœ‰3ç§ï¼Œè¦†ç›–æ‰€æœ‰è·¯å¾„ç±»é¢˜ï¼š</p>
<ol>
<li>
<p><strong>ç´¯è®¡å€¼/ä¸­é—´ç»“æœ</strong>ï¼šå¦‚è·¯å¾„è½¬æ•°å­—ï¼ˆ129é¢˜ï¼‰ã€äºŒè¿›åˆ¶å’Œï¼ˆ1022é¢˜ï¼‰ï¼Œæ ¸å¿ƒæ›´æ–°é€»è¾‘ï¼šæ–°çŠ¶æ€ = ä¸Šä¸€å±‚çŠ¶æ€ * åŸºæ•° + å½“å‰èŠ‚ç‚¹å€¼ï¼ˆåŸºæ•°ä¸º10ã€2ç­‰ï¼‰ï¼›</p>
</li>
<li>
<p><strong>å±‚æ•°/æ·±åº¦</strong>ï¼šå¦‚äºŒå‰æ ‘å³è§†å›¾ï¼ˆ199é¢˜DFSè§£æ³•ï¼‰ï¼Œä¼ é€’å½“å‰èŠ‚ç‚¹å±‚æ•°ï¼Œå®ç°æŒ‰å±‚å¤„ç†ï¼›</p>
</li>
<li>
<p><strong>ç‰¹å¾ç»Ÿè®¡çŠ¶æ€</strong>ï¼šå¦‚ä¼ªå›æ–‡è·¯å¾„ï¼ˆ572é¢˜ï¼‰ï¼Œç”¨ä½æ©ç æˆ–æ•°ç»„ç»Ÿè®¡è·¯å¾„ä¸­èŠ‚ç‚¹å€¼çš„å¥‡å¶æ€§ã€å‡ºç°æ¬¡æ•°ç­‰ç‰¹å¾ã€‚</p>
</li>
</ol>
<h3 data-id="heading-7">1.2 å±‚åºéå†æ¨¡æ¿ï¼ˆBFS+é˜Ÿåˆ—ï¼‰ï¼šé€‚é…å±‚é—´èŠ‚ç‚¹ç±»é—®é¢˜</h3>
<p>å±‚åºéå†ï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢BFSï¼‰çš„æ ¸å¿ƒæ˜¯ã€ŒæŒ‰å±‚å¤„ç†èŠ‚ç‚¹ã€ï¼Œé€šè¿‡é˜Ÿåˆ—æ§åˆ¶ã€Œä¸€å±‚ä¸€éå†ã€ï¼Œé€‚åˆéœ€è¦æŒ‰å±‚æ“ä½œèŠ‚ç‚¹çš„åœºæ™¯ï¼ˆå¦‚å–æ¯å±‚æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€å±‚å†…èŠ‚ç‚¹ç»Ÿè®¡ã€æ¯å±‚å¹³å‡å€¼ï¼‰ã€‚å…¶ä¼˜åŠ¿åœ¨äºé€»è¾‘ç›´è§‚ï¼Œç¬¦åˆäººç±»ã€Œä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³ã€çš„è§‚å¯Ÿä¹ æƒ¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// 1. å¤„ç†ç©ºæ ‘è¾¹ç•Œ</span>
  <span class="hljs-keyword">if</span> (root === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> [];
  <span class="hljs-comment">// 2. å®šä¹‰ç»“æœå®¹å™¨</span>
  <span class="hljs-keyword">const</span> res = [];
  <span class="hljs-comment">// 3. åˆå§‹åŒ–é˜Ÿåˆ—ï¼Œå­˜å…¥æ ¹èŠ‚ç‚¹ï¼ˆé˜Ÿåˆ—æ˜¯å±‚åºéå†çš„æ ¸å¿ƒè½½ä½“ï¼‰</span>
  <span class="hljs-keyword">const</span> queue = [root];

  <span class="hljs-comment">// å±‚æ•° </span>
  <span class="hljs-keyword">let</span> level = <span class="hljs-number">0</span> 

  <span class="hljs-comment">// 4. å±‚åºéå†ä¸»å¾ªç¯ï¼šé˜Ÿåˆ—éç©ºåˆ™ç»§ç»­</span>
  <span class="hljs-keyword">while</span> (queue.<span class="hljs-property">length</span>) {

    <span class="hljs-comment">// éå†åˆ°å“ªå±‚äº†ï¼Œå¦‚æœéœ€è¦å°±ç”¨</span>
    level++

    <span class="hljs-comment">// 5. è®°å½•å½“å‰å±‚èŠ‚ç‚¹æ•°ï¼ˆå…³é”®ï¼šç¡®å®šæ¯å±‚çš„éå†è¾¹ç•Œï¼‰</span>
    <span class="hljs-keyword">const</span> curLevelSize = queue.<span class="hljs-property">length</span>;

    <span class="hljs-comment">// 6. éå†å½“å‰å±‚æ‰€æœ‰èŠ‚ç‚¹</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; curLevelSize; i++) {
      <span class="hljs-comment">// 7. å–å‡ºé˜Ÿé¦–èŠ‚ç‚¹ï¼ˆå½“å‰å±‚çš„å¾…å¤„ç†èŠ‚ç‚¹ï¼‰</span>
      <span class="hljs-keyword">const</span> curNode = queue.<span class="hljs-title function_">shift</span>();

      <span class="hljs-comment">// ã€æ ¸å¿ƒä¸šåŠ¡åŒºã€‘è§†é¢˜ç›®éœ€æ±‚ç¼–å†™é€»è¾‘ï¼ˆå¦‚å–å±‚å†…ç‰¹å®šèŠ‚ç‚¹ã€å±‚å†…ç»Ÿè®¡ï¼‰</span>
      <span class="hljs-comment">// ä¾‹ï¼šå–æ¯å±‚æœ€åä¸€ä¸ªèŠ‚ç‚¹ â†’ if (i === curLevelSize - 1) { ... }</span>

      <span class="hljs-comment">// 8. å­èŠ‚ç‚¹å…¥é˜Ÿï¼šå·¦å­èŠ‚ç‚¹å…ˆå…¥ï¼Œå³å­èŠ‚ç‚¹åå…¥ï¼ˆä¿è¯å±‚å†…é¡ºåºï¼‰</span>
      <span class="hljs-keyword">if</span> (curNode.<span class="hljs-property">left</span>) queue.<span class="hljs-title function_">push</span>(curNode.<span class="hljs-property">left</span>);
      <span class="hljs-keyword">if</span> (curNode.<span class="hljs-property">right</span>) queue.<span class="hljs-title function_">push</span>(curNode.<span class="hljs-property">right</span>);
    }

    <span class="hljs-comment">// å¯é€‰ï¼šæ•´å±‚éå†å®Œæˆåç»Ÿä¸€å¤„ç†ï¼ˆå¦‚å±‚å†…èŠ‚ç‚¹æ±‡æ€»ï¼‰</span>
  }

  <span class="hljs-comment">// 9. è¿”å›æœ€ç»ˆç»“æœ</span>
  <span class="hljs-keyword">return</span> res;
}
</code></pre>
<h4 data-id="heading-8">å±‚åºæ¨¡æ¿æ ¸å¿ƒè¦ç‚¹</h4>
<ul>
<li>
<p>å±‚è¾¹ç•Œæ§åˆ¶ï¼šcurLevelSize = queue.lengthæ˜¯å±‚åºéå†çš„çµé­‚ï¼Œç¡®ä¿æ¯æ¬¡å¾ªç¯åªå¤„ç†ã€Œå½“å‰å±‚ã€çš„èŠ‚ç‚¹ï¼Œä¸ä¸ä¸‹ä¸€å±‚æ··æ·†ï¼›</p>
</li>
<li>
<p>é˜Ÿåˆ—æ“ä½œï¼šshiftï¼ˆå–é˜Ÿé¦–ï¼‰å’Œpushï¼ˆé˜Ÿå°¾å…¥å­èŠ‚ç‚¹ï¼‰é…åˆï¼Œå®ç°èŠ‚ç‚¹çš„æŒ‰å±‚ä¼ é€’ï¼›</p>
</li>
<li>
<p>å±‚å†…é¡ºåºï¼šå·¦å­èŠ‚ç‚¹å…ˆå…¥é˜Ÿï¼Œä¿è¯å±‚å†…èŠ‚ç‚¹éå†é¡ºåºä¸ã€Œä»å·¦åˆ°å³ã€çš„ç›´è§‚é¡ºåºä¸€è‡´ã€‚</p>
</li>
</ul>
<h2 data-id="heading-9">äºŒã€æ¨¡æ¿å®æˆ˜ï¼š6é“åŠ›æ‰£é«˜é¢‘é¢˜æ‰‹æŠŠæ‰‹æ‹†è§£</h2>
<p>ä»¥ä¸‹6é“é¢˜è¦†ç›–äºŒå‰æ ‘è·¯å¾„ã€å±‚åºçš„æ‰€æœ‰é«˜é¢‘è€ƒæ³•ï¼Œå…¨éƒ¨åŸºäºä¸Šè¿°æ¨¡æ¿å®ç°ï¼Œ<strong>ä¿ç•™æ¨¡æ¿æ ¸å¿ƒç»“æ„ï¼Œä»…ä¿®æ”¹ã€Œæ ¸å¿ƒä¸šåŠ¡åŒºã€ä»£ç </strong>ï¼Œè®©ä½ ç›´è§‚æ„Ÿå—ã€Œå¥—æ¨¡æ¿è§£é¢˜ã€çš„é«˜æ•ˆæ€§ã€‚åŒæ—¶æ ‡æ³¨æ˜“è¸©å‘ç‚¹å’Œä¼˜åŒ–æŠ€å·§ï¼Œå…¼é¡¾æ­£ç¡®æ€§å’Œè§£é¢˜æ•ˆç‡ã€‚</p>
<h3 data-id="heading-10">2.1 é€’å½’å®æˆ˜1ï¼šäºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„ï¼ˆåŠ›æ‰£257ï¼‰</h3>
<h4 data-id="heading-11">é¢˜ç›®è¦æ±‚</h4>
<p>ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼ŒæŒ‰ä»»æ„é¡ºåºè¿”å›æ‰€æœ‰ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼Œè·¯å¾„æ ¼å¼ä¸º"1-&gt;2-&gt;3"ã€‚</p>
<h4 data-id="heading-12">è§£é¢˜æ€è·¯</h4>
<ul>
<li>
<p>æ¨¡æ¿ï¼šç›´æ¥å¥—ç”¨ã€Œé€’å½’éå†æ¨¡æ¿ï¼ˆpathæ•°ç»„+æ‰‹åŠ¨å›æº¯ï¼‰ã€ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¸šåŠ¡ï¼šå¶å­èŠ‚ç‚¹å¤„å°†pathæ•°ç»„æ ¼å¼åŒ–ä¸º"-&gt;"è¿æ¥çš„å­—ç¬¦ä¸²ï¼Œå­˜å…¥ç»“æœå®¹å™¨ï¼›</p>
</li>
<li>
<p>ä¼˜åŒ–ï¼šå¶å­èŠ‚ç‚¹å¤„æå‰å›æº¯+returnï¼Œé¿å…åç»­æ— æ„ä¹‰çš„ä»£ç æ‰§è¡Œã€‚</p>
</li>
</ul>
<h4 data-id="heading-13">å¥—æ¨¡æ¿å®ç°ä»£ç ï¼ˆç›´æ¥é€šå…³ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> binaryTreePaths = <span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-keyword">if</span> (root === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> [];
  <span class="hljs-keyword">const</span> res = [];
  <span class="hljs-keyword">const</span> path = [];
  <span class="hljs-title function_">traverse</span>(root);
  <span class="hljs-keyword">return</span> res;

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">node</span>) {
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;
    path.<span class="hljs-title function_">push</span>(node.<span class="hljs-property">val</span>); <span class="hljs-comment">// å‰åºå…¥æ ˆ</span>

    <span class="hljs-comment">// æ ¸å¿ƒä¸šåŠ¡ï¼šå¶å­èŠ‚ç‚¹æ ¼å¼åŒ–è·¯å¾„å¹¶æ”¶é›†</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">left</span> === <span class="hljs-literal">null</span> &amp;&amp; node.<span class="hljs-property">right</span> === <span class="hljs-literal">null</span>) {
      res.<span class="hljs-title function_">push</span>(path.<span class="hljs-title function_">join</span>(<span class="hljs-string">'-&gt;'</span>));
      path.<span class="hljs-title function_">pop</span>(); <span class="hljs-comment">// å¶å­èŠ‚ç‚¹æå‰å›æº¯ï¼Œä¼˜åŒ–æ•ˆç‡</span>
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">left</span>);
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">right</span>);
    path.<span class="hljs-title function_">pop</span>(); <span class="hljs-comment">// ååºå‡ºæ ˆ</span>
  }
};
</code></pre>
<h3 data-id="heading-14">2.2 é€’å½’å®æˆ˜2ï¼šæ±‚æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æ•°å­—ä¹‹å’Œï¼ˆåŠ›æ‰£129ï¼‰</h3>
<h4 data-id="heading-15">é¢˜ç›®è¦æ±‚</h4>
<p>æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹å­˜0-9çš„æ•°å­—ï¼Œæ ¹åˆ°å¶çš„è·¯å¾„ä»£è¡¨ä¸€ä¸ªæ•°å­—ï¼ˆå¦‚1â†’2â†’3ä»£è¡¨123ï¼‰ï¼Œè®¡ç®—æ‰€æœ‰æ ¹åˆ°å¶æ•°å­—çš„å’Œã€‚</p>
<h4 data-id="heading-16">è§£é¢˜æ€è·¯</h4>
<ul>
<li>
<p>æ¨¡æ¿ï¼šåŸºäºã€Œé€’å½’éå†æ¨¡æ¿ï¼ˆå¸¦å‚éå†ï¼‰ã€ä¼˜åŒ–ï¼Œæ— éœ€æ˜¾å¼pathæ•°ç»„ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¼˜åŒ–ï¼šè·¯å¾„å€¼é€šè¿‡curNum = curNum * 10 + node.valåŠ¨æ€è®¡ç®—ï¼ˆå€¼ä¼ é€’ï¼Œæ— éœ€å›æº¯ï¼‰ï¼Œæ›¿ä»£pathæ•°ç»„ï¼Œé™ä½ç©ºé—´å¤æ‚åº¦ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¸šåŠ¡ï¼šå¶å­èŠ‚ç‚¹å¤„å°†åŠ¨æ€è®¡ç®—çš„è·¯å¾„å€¼ç´¯åŠ åˆ°ç»“æœã€‚</p>
</li>
</ul>
<h4 data-id="heading-17">å¥—æ¨¡æ¿ä¼˜åŒ–ä»£ç ï¼ˆæœ€ä¼˜è§£ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sumNumbers</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// 1. å¤„ç†ç©ºæ ‘è¾¹ç•Œï¼šç©ºæ ‘è¿”å›0ï¼ˆæ•°å­—ï¼ŒåŒ¹é…é¢˜ç›®è¦æ±‚ï¼‰</span>
  <span class="hljs-keyword">if</span> (root === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-comment">// 2. å®šä¹‰ç»“æœå®¹å™¨ï¼šæ•°å­—ç±»å‹ï¼Œåˆå§‹ä¸º0</span>
  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;
  <span class="hljs-comment">// 3. å¯åŠ¨é€’å½’éå†ï¼šåˆå§‹å‰åºå’Œä¸º0ï¼ˆæ— èŠ‚ç‚¹æ—¶çš„åŸºç¡€å€¼ï¼‰</span>
  <span class="hljs-title function_">traverse</span>(root, <span class="hljs-number">0</span>);
  <span class="hljs-comment">// 4. è¿”å›æœ€ç»ˆç»“æœ</span>
  <span class="hljs-keyword">return</span> res;

  <span class="hljs-comment">// å¸¦å‚éå†å‡½æ•°ï¼šprevSum=æ ¹åˆ°å½“å‰èŠ‚ç‚¹çˆ¶èŠ‚ç‚¹çš„è·¯å¾„å’Œï¼ˆä¸Šä¸€å±‚çŠ¶æ€ï¼‰</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">node, prevSum</span>) {
    <span class="hljs-comment">// é€’å½’ç»ˆæ­¢ï¼šç©ºèŠ‚ç‚¹ç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å‰åºä½ç½®ï¼šæ›´æ–°çŠ¶æ€ï¼Œè®¡ç®—æ ¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„å’Œï¼ˆæ ¸å¿ƒï¼‰</span>
    <span class="hljs-keyword">const</span> curSum = <span class="hljs-number">10</span> * prevSum + node.<span class="hljs-property">val</span>;

    <span class="hljs-comment">// ã€æ ¸å¿ƒä¸šåŠ¡åŒºã€‘å¶å­èŠ‚ç‚¹ï¼šç´¯åŠ è·¯å¾„å’Œåˆ°ç»“æœ</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">left</span> === <span class="hljs-literal">null</span> &amp;&amp; node.<span class="hljs-property">right</span> === <span class="hljs-literal">null</span>) {
      res += curSum; <span class="hljs-comment">// ç´¯åŠ </span>
      <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æå‰è¿”å›ï¼Œé¿å…æ— æ„ä¹‰çš„é€’å½’</span>
    }

    <span class="hljs-comment">// é€’å½’éå†å·¦å³å­æ ‘ï¼šä¼ é€’å½“å‰çŠ¶æ€ç»™ä¸‹ä¸€å±‚</span>
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">left</span>, curSum);
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">right</span>, curSum);

    <span class="hljs-comment">// æ— éœ€ååºå›æº¯ï¼šprevSum/curSumæ˜¯å€¼ä¼ é€’ï¼Œé€’å½’è¿”å›åè‡ªåŠ¨æ¢å¤ä¸Šä¸€å±‚çŠ¶æ€</span>
  }
}
</code></pre>
<h3 data-id="heading-18">2.3 å±‚åºå®æˆ˜ï¼šäºŒå‰æ ‘çš„å³è§†å›¾ï¼ˆåŠ›æ‰£199ï¼‰</h3>
<h4 data-id="heading-19">é¢˜ç›®è¦æ±‚</h4>
<p>æƒ³è±¡ç«™åœ¨äºŒå‰æ ‘å³ä¾§ï¼ŒæŒ‰ä»ä¸Šåˆ°ä¸‹é¡ºåºè¿”å›èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ï¼ˆå·¦å­æ ‘æ›´é«˜æ—¶ï¼Œèƒ½çœ‹åˆ°å·¦å­æ ‘é«˜å‡ºçš„éƒ¨åˆ†ï¼‰ã€‚</p>
<h4 data-id="heading-20">è§£é¢˜æ€è·¯</h4>
<ul>
<li>
<p>æ¨¡æ¿ï¼šç›´æ¥å¥—ç”¨ã€Œå±‚åºéå†æ¨¡æ¿ã€ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¸šåŠ¡ï¼šæ¯å±‚éå†çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆi === curLevelSize - 1ï¼‰å³ä¸ºå³ä¾§èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹ï¼Œç›´æ¥å­˜å…¥ç»“æœã€‚</p>
</li>
</ul>
<h4 data-id="heading-21">å¥—æ¨¡æ¿å®ç°ä»£ç ï¼ˆæœ€ä¼˜è§£ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> rightSideView = <span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-keyword">if</span> (root === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> [];
  <span class="hljs-keyword">const</span> res = [];
  <span class="hljs-keyword">const</span> queue = [root];

  <span class="hljs-keyword">while</span> (queue.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">const</span> curLevelSize = queue.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; curLevelSize; i++) {
      <span class="hljs-keyword">const</span> curNode = queue.<span class="hljs-title function_">shift</span>();

      <span class="hljs-comment">// æ ¸å¿ƒä¸šåŠ¡ï¼šå–æ¯å±‚æœ€åä¸€ä¸ªèŠ‚ç‚¹</span>
      <span class="hljs-keyword">if</span> (i === curLevelSize - <span class="hljs-number">1</span>) {
        res.<span class="hljs-title function_">push</span>(curNode.<span class="hljs-property">val</span>);
      }

      <span class="hljs-keyword">if</span> (curNode.<span class="hljs-property">left</span>) queue.<span class="hljs-title function_">push</span>(curNode.<span class="hljs-property">left</span>);
      <span class="hljs-keyword">if</span> (curNode.<span class="hljs-property">right</span>) queue.<span class="hljs-title function_">push</span>(curNode.<span class="hljs-property">right</span>);
    }
  }

  <span class="hljs-keyword">return</span> res;
};
</code></pre>
<h3 data-id="heading-22">2.4 é€’å½’å®æˆ˜3ï¼šä»å¶ç»“ç‚¹å¼€å§‹çš„æœ€å°å­—ç¬¦ä¸²ï¼ˆåŠ›æ‰£988ï¼‰</h3>
<h4 data-id="heading-23">é¢˜ç›®è¦æ±‚</h4>
<p>èŠ‚ç‚¹å€¼ä¸º0-25ï¼ˆå¯¹åº”a-zï¼‰ï¼Œè¿”å›ä»å¶èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„å­—å…¸åºæœ€å°å­—ç¬¦ä¸²ï¼ˆå¦‚"z" &lt; "ab"ï¼‰ã€‚</p>
<h4 data-id="heading-24">è§£é¢˜æ€è·¯</h4>
<ul>
<li>
<p>æ¨¡æ¿ï¼šå¥—ç”¨ã€Œé€’å½’éå†æ¨¡æ¿ï¼ˆå¸¦å‚éå†ï¼‰ã€ï¼Œç”¨å­—ç¬¦ä¸²ä¼ é€’è·¯å¾„ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒæŠ€å·§ï¼šå¤´éƒ¨æ‹¼æ¥å­—ç¬¦ä¸²ï¼ˆcurChar + pathï¼‰ï¼Œå¤©ç„¶ç”Ÿæˆå¶â†’æ ¹çš„è·¯å¾„ï¼Œæ— éœ€åè½¬ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¸šåŠ¡ï¼šå¶å­èŠ‚ç‚¹å¤„å°†ç”Ÿæˆçš„å­—ç¬¦ä¸²ä¸å½“å‰æœ€å°å€¼æ¯”è¾ƒï¼Œæ›´æ–°æœ€å°å­—ç¬¦ä¸²ï¼›</p>
</li>
<li>
<p>é¿å‘ç‚¹ï¼šåˆ‡å‹¿ç”¨èŠ‚ç‚¹å€¼å’Œåˆ¤æ–­å­—å…¸åºï¼Œéœ€ç›´æ¥æ¯”è¾ƒå­—ç¬¦ä¸²æœ¬èº«ã€‚</p>
</li>
</ul>
<h4 data-id="heading-25">å¥—æ¨¡æ¿å®ç°ä»£ç ï¼ˆé¿å‘ç‰ˆï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">smallestFromLeaf</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// 1. å¤„ç†ç©ºæ ‘è¾¹ç•Œï¼šé¢˜ç›®è¦æ±‚ç©ºæ ‘è¿”å›ç©ºå­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">if</span> (root === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  <span class="hljs-comment">// 2. å®šä¹‰ç»“æœå®¹å™¨ï¼šåˆå§‹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œç”¨äºå­˜å‚¨å­—å…¸åºæœ€å°çš„å¶â†’æ ¹å­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">let</span> res = <span class="hljs-string">''</span>;
  <span class="hljs-comment">// 3. å¯åŠ¨é€’å½’éå†ï¼šåˆå§‹è·¯å¾„ä¸ºç©ºå­—ç¬¦ä¸²ï¼ˆæ ¹èŠ‚ç‚¹æ— çˆ¶èŠ‚ç‚¹ï¼‰</span>
  <span class="hljs-title function_">traverse</span>(root, <span class="hljs-string">''</span>);
  <span class="hljs-comment">// 4. è¿”å›æœ€ç»ˆç»“æœ</span>
  <span class="hljs-keyword">return</span> res;

  <span class="hljs-comment">// å¸¦å‚éå†å‡½æ•°ï¼špath - çˆ¶èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„å­—ç¬¦æ‹¼æ¥å­—ç¬¦ä¸²ï¼ˆå¶â†’æ ¹æ ¼å¼ï¼‰</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">node, path</span>) {
    <span class="hljs-comment">// é€’å½’ç»ˆæ­¢ï¼šç©ºèŠ‚ç‚¹ç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å‰åºä½ç½®ï¼šå¤´éƒ¨æ‹¼æ¥ï¼Œå¤©ç„¶ç”Ÿæˆå½“å‰èŠ‚ç‚¹åˆ°æ ¹çš„å¶â†’æ ¹å­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">const</span> curChar = <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(node.<span class="hljs-property">val</span> + <span class="hljs-number">97</span>); <span class="hljs-comment">// 0â†’aï¼Œ25â†’z</span>
    <span class="hljs-keyword">const</span> newPath = curChar + path;

    <span class="hljs-comment">// ã€æ ¸å¿ƒä¸šåŠ¡åŒºã€‘å¶å­èŠ‚ç‚¹ï¼šæ¯”è¾ƒå¹¶æ›´æ–°å­—å…¸åºæœ€å°çš„å­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">left</span> === <span class="hljs-literal">null</span> &amp;&amp; node.<span class="hljs-property">right</span> === <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// é¦–æ¬¡èµ‹å€¼ æˆ– å½“å‰å­—ç¬¦ä¸²å­—å…¸åºæ›´å°ï¼Œæ›´æ–°ç»“æœ</span>
      <span class="hljs-keyword">if</span> (res === <span class="hljs-string">''</span> || newPath &lt; res) {
        res = newPath;
      }
      <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æå‰è¿”å›ï¼Œé¿å…æ— æ„ä¹‰çš„é€’å½’</span>
    }

    <span class="hljs-comment">// é€’å½’éå†å·¦å³å­æ ‘ï¼šä¼ é€’æ–°è·¯å¾„ï¼Œè‡ªåŠ¨å›æº¯</span>
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">left</span>, newPath);
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">right</span>, newPath);
  }
}
</code></pre>
<h3 data-id="heading-26">2.5 é€’å½’å®æˆ˜4ï¼šä»æ ¹åˆ°å¶çš„äºŒè¿›åˆ¶æ•°ä¹‹å’Œï¼ˆåŠ›æ‰£1022ï¼‰</h3>
<h4 data-id="heading-27">é¢˜ç›®è¦æ±‚</h4>
<p>èŠ‚ç‚¹å€¼ä¸º0æˆ–1ï¼Œæ ¹åˆ°å¶çš„è·¯å¾„ä»£è¡¨äºŒè¿›åˆ¶æ•°ï¼ˆæœ€é«˜æœ‰æ•ˆä½å¼€å§‹ï¼‰ï¼Œè®¡ç®—æ‰€æœ‰äºŒè¿›åˆ¶æ•°çš„åè¿›åˆ¶å’Œã€‚</p>
<h4 data-id="heading-28">è§£é¢˜æ€è·¯</h4>
<ul>
<li>
<p>æ¨¡æ¿ï¼šåŒ129é¢˜ï¼ŒåŸºäºã€Œé€’å½’éå†æ¨¡æ¿ï¼ˆå¸¦å‚éå†ï¼‰ã€ï¼ŒåŠ¨æ€è®¡ç®—äºŒè¿›åˆ¶å€¼ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¼˜åŒ–ï¼šäºŒè¿›åˆ¶è½¬åè¿›åˆ¶é€šè¿‡curNum = curNum * 2 + node.valå®ç°ï¼ˆå·¦ç§»1ä½+å½“å‰å€¼ï¼‰ï¼Œæ•ˆç‡é«˜äºå¹‚è¿ç®—ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¸šåŠ¡ï¼šå¶å­èŠ‚ç‚¹å¤„å°†åŠ¨æ€è®¡ç®—çš„åè¿›åˆ¶å€¼ç´¯åŠ åˆ°ç»“æœã€‚</p>
</li>
</ul>
<h4 data-id="heading-29">å¥—æ¨¡æ¿ä¼˜åŒ–ä»£ç ï¼ˆæœ€ä¼˜è§£ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sumRootToLeaf</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// 1. å¤„ç†ç©ºæ ‘è¾¹ç•Œ</span>
  <span class="hljs-keyword">if</span> (root === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-comment">// 2. å®šä¹‰ç»“æœå®¹å™¨</span>
  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;
  <span class="hljs-comment">// 3. å¯åŠ¨é€’å½’éå†ï¼šåˆå§‹å‰åºå’Œä¸º0</span>
  <span class="hljs-title function_">traverse</span>(root, <span class="hljs-number">0</span>);
  <span class="hljs-comment">// 4. è¿”å›æœ€ç»ˆç»“æœ</span>
  <span class="hljs-keyword">return</span> res;

  <span class="hljs-comment">// å¸¦å‚éå†å‡½æ•°ï¼šprevSum=æ ¹åˆ°å½“å‰èŠ‚ç‚¹çˆ¶èŠ‚ç‚¹çš„äºŒè¿›åˆ¶è½¬åè¿›åˆ¶å’Œ</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">node, prevSum</span>) {
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å‰åºä½ç½®ï¼šæ›´æ–°äºŒè¿›åˆ¶è½¬åè¿›åˆ¶çš„å’Œï¼ˆå·¦ç§»1ä½+å½“å‰å€¼ï¼‰</span>
    <span class="hljs-keyword">const</span> curSum = <span class="hljs-number">2</span> * prevSum + node.<span class="hljs-property">val</span>;

    <span class="hljs-comment">// ã€æ ¸å¿ƒä¸šåŠ¡åŒºã€‘å¶å­èŠ‚ç‚¹ï¼šç´¯åŠ ç»“æœ</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">left</span> === <span class="hljs-literal">null</span> &amp;&amp; node.<span class="hljs-property">right</span> === <span class="hljs-literal">null</span>) {
      res += curSum;
    }

    <span class="hljs-comment">// é€’å½’éå†å·¦å³å­æ ‘</span>
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">left</span>, curSum);
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">right</span>, curSum);
  }
}
</code></pre>
<h3 data-id="heading-30">2.6 é€’å½’å®æˆ˜5ï¼šäºŒå‰æ ‘ä¸­çš„ä¼ªå›æ–‡è·¯å¾„ï¼ˆåŠ›æ‰£572ï¼‰</h3>
<h4 data-id="heading-31">é¢˜ç›®è¦æ±‚</h4>
<p>èŠ‚ç‚¹å€¼ä¸º1-9ï¼Œæ ¹åˆ°å¶è·¯å¾„ä¸ºã€Œä¼ªå›æ–‡ã€æŒ‡è·¯å¾„å€¼çš„æ’åˆ—èƒ½å½¢æˆå›æ–‡ï¼Œç»Ÿè®¡ä¼ªå›æ–‡è·¯å¾„çš„æ•°ç›®ã€‚</p>
<h4 data-id="heading-32">è§£é¢˜æ€è·¯</h4>
<ul>
<li>
<p>æ¨¡æ¿ï¼šåŸºäºã€Œé€’å½’éå†æ¨¡æ¿ï¼ˆå¸¦å‚éå†ï¼‰ã€ï¼Œç”¨ä½æ©ç æ›¿ä»£pathç»Ÿè®¡è·¯å¾„ç‰¹å¾ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼šä¼ªå›æ–‡åˆ¤æ–­æ¡ä»¶ â†’ è·¯å¾„ä¸­å¥‡æ•°æ¬¡æ•°çš„æ•°å­—â‰¤1ï¼ˆå¶æ•°é•¿åº¦ä¸º0ï¼Œå¥‡æ•°é•¿åº¦ä¸º1ï¼‰ï¼›</p>
</li>
<li>
<p>ä½æ©ç åŸç†ï¼šç”¨9ä½äºŒè¿›åˆ¶æ•°ç»Ÿè®¡1-9çš„å‡ºç°å¥‡å¶æ€§ï¼ˆ0=å¶ï¼Œ1=å¥‡ï¼‰ï¼Œå¶å­èŠ‚ç‚¹å¤„é€šè¿‡mask &amp; (mask-1) === 0åˆ¤æ–­ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¸šåŠ¡ï¼šå¶å­èŠ‚ç‚¹å¤„åˆ¤æ–­ä½æ©ç æ˜¯å¦æ»¡è¶³ä¼ªå›æ–‡æ¡ä»¶ï¼Œæ»¡è¶³åˆ™ç»“æœ+1ã€‚</p>
</li>
</ul>
<h4 data-id="heading-33">å¥—æ¨¡æ¿ä¼˜åŒ–ä»£ç ï¼ˆä½æ©ç æœ€ä¼˜è§£ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pseudoPalindromicPaths</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// 1. å¤„ç†ç©ºæ ‘è¾¹ç•Œ</span>
  <span class="hljs-keyword">if</span> (root === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-comment">// 2. å®šä¹‰ç»“æœå®¹å™¨ï¼ˆç»Ÿè®¡ä¼ªå›æ–‡è·¯å¾„æ•°é‡ï¼‰</span>
  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;
  <span class="hljs-comment">// 3. å¯åŠ¨é€’å½’éå†ï¼šåˆå§‹ä½æ©ç ä¸º0ï¼ˆå…¨å¶ï¼‰</span>
  <span class="hljs-title function_">traverse</span>(root, <span class="hljs-number">0</span>);
  <span class="hljs-comment">// 4. è¿”å›æœ€ç»ˆç»“æœ</span>
  <span class="hljs-keyword">return</span> res;

  <span class="hljs-comment">// å¸¦å‚éå†å‡½æ•°ï¼šmask=ä½æ©ç ï¼ˆç»Ÿè®¡1-9å‡ºç°æ¬¡æ•°çš„å¥‡å¶æ€§ï¼‰</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">node, mask</span>) {
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å‰åºä½ç½®ï¼šæ›´æ–°ä½æ©ç ï¼ˆå¼‚æˆ–ç¿»è½¬å¯¹åº”ä½ï¼Œ0â†”1ï¼‰</span>
    <span class="hljs-keyword">const</span> newMask = mask ^ (<span class="hljs-number">1</span> &lt;&lt; (node.<span class="hljs-property">val</span> - <span class="hljs-number">1</span>));

    <span class="hljs-comment">// ã€æ ¸å¿ƒä¸šåŠ¡åŒºã€‘å¶å­èŠ‚ç‚¹ï¼šåˆ¤å®šä¼ªå›æ–‡</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">left</span> === <span class="hljs-literal">null</span> &amp;&amp; node.<span class="hljs-property">right</span> === <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// äºŒè¿›åˆ¶ä¸­1çš„æ•°é‡â‰¤1ï¼Œå³ä¸ºä¼ªå›æ–‡</span>
      <span class="hljs-keyword">if</span> ((newMask &amp; (newMask - <span class="hljs-number">1</span>)) === <span class="hljs-number">0</span>) {
        res++;
      }
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// é€’å½’éå†å·¦å³å­æ ‘ï¼Œè‡ªåŠ¨å›æº¯</span>
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">left</span>, newMask);
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">right</span>, newMask);
  }
}
</code></pre>
<h4 data-id="heading-34">åŸºç¡€ç‰ˆæ›¿ä»£æ–¹æ¡ˆï¼ˆæ•°ç»„ç»Ÿè®¡ï¼Œé€‚åˆå¯¹ä½æ©ç ä¸ç†Ÿæ‚‰çš„æ–°æ‰‹ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">pseudoPalindromicPaths</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-keyword">if</span> (root === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;
  <span class="hljs-title function_">traverse</span>(root, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>), <span class="hljs-literal">true</span>);
  <span class="hljs-keyword">return</span> res;

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">node, recordArr, isEven</span>) {
    <span class="hljs-keyword">if</span> (node === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å‰åºä½ç½®ï¼šæ›´æ–°æ•°ç»„ç»Ÿè®¡å¥‡å¶æ€§</span>
    <span class="hljs-keyword">const</span> newRecordArr = [...recordArr];
    newRecordArr[node.<span class="hljs-property">val</span>] = (newRecordArr[node.<span class="hljs-property">val</span>] + <span class="hljs-number">1</span>) % <span class="hljs-number">2</span>;
    isEven = !isEven;

    <span class="hljs-comment">// ã€æ ¸å¿ƒä¸šåŠ¡åŒºã€‘å¶å­èŠ‚ç‚¹ï¼šåˆ¤å®šä¼ªå›æ–‡</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">left</span> === <span class="hljs-literal">null</span> &amp;&amp; node.<span class="hljs-property">right</span> === <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">if</span> (isEven) {
        <span class="hljs-keyword">if</span> (newRecordArr.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item === <span class="hljs-number">0</span>)) res++;
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">let</span> oneCount = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; newRecordArr.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">if</span> (newRecordArr[i] === <span class="hljs-number">1</span>) {
          oneCount++;
          <span class="hljs-keyword">if</span> (oneCount &gt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;
        }
      }
      <span class="hljs-keyword">if</span> (oneCount === <span class="hljs-number">1</span>) res++;
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">left</span>, newRecordArr, isEven);
    <span class="hljs-title function_">traverse</span>(node.<span class="hljs-property">right</span>, newRecordArr, isEven);
  }
}
</code></pre>
<h2 data-id="heading-35">ä¸‰ã€éå†æ€ç»´è§£é¢˜æ ¸å¿ƒæ€»ç»“ï¼ˆé¿å‘+ä¼˜åŒ–ï¼‰</h2>
<h3 data-id="heading-36">3.1 ä¸¤å¤§æ¨¡æ¿é€‚ç”¨åœºæ™¯é€Ÿåˆ¤</h3>























<table><thead><tr><th>éå†æ¨¡æ¿</th><th>æ ¸å¿ƒé€‚ç”¨åœºæ™¯</th><th>å…¸å‹é¢˜ç›®</th><th>æ ¸å¿ƒä¼˜åŠ¿</th></tr></thead><tbody><tr><td>é€’å½’éå†ï¼ˆå‰åº+å›æº¯ï¼‰</td><td>æ ¹åˆ°å¶è·¯å¾„ç±»é—®é¢˜ï¼ˆéœ€è·Ÿè¸ªèŠ‚ç‚¹è½¨è¿¹ï¼‰</td><td>257ã€129ã€988ã€1022ã€572</td><td>å¤©ç„¶è®°å½•è·¯å¾„ï¼Œå›æº¯é€»è¾‘ç®€å•ï¼Œå¯çµæ´»ä¼˜åŒ–</td></tr><tr><td>å±‚åºéå†ï¼ˆBFS+é˜Ÿåˆ—ï¼‰</td><td>å±‚é—´èŠ‚ç‚¹ç±»é—®é¢˜ï¼ˆéœ€æŒ‰å±‚å¤„ç†èŠ‚ç‚¹ï¼‰</td><td>199ã€å±‚åºéå†ã€æ¯å±‚å¹³å‡å€¼</td><td>æŒ‰å±‚å¤„ç†ï¼Œé€»è¾‘ç›´è§‚ï¼Œç¬¦åˆäººç±»è§‚å¯Ÿä¹ æƒ¯</td></tr></tbody></table>
<h3 data-id="heading-37">3.2 é€’å½’éå†é€šç”¨é¿å‘ç‚¹</h3>
<ol>
<li>
<p>åˆ‡å‹¿é‡å¤éå†å­æ ‘ï¼ˆå¦‚ä¸¤æ¬¡traverse(node.left)ï¼‰ï¼Œå¯¼è‡´å³å­æ ‘æ— æ³•è®¿é—®ï¼›</p>
</li>
<li>
<p>å¯ä¿®æ”¹çš„ç»“æœå˜é‡ï¼ˆå¦‚res=0ã€minStr=''ï¼‰éœ€ç”¨letå£°æ˜ï¼Œconstä¸å¯é‡æ–°èµ‹å€¼ï¼›</p>
</li>
<li>
<p>pathæ•°ç»„+æ‰‹åŠ¨å›æº¯æ—¶ï¼Œpushå’Œpopå¿…é¡»æˆå¯¹å‡ºç°ï¼Œé¿å…è·¯å¾„è½¨è¿¹æ··ä¹±ï¼›</p>
</li>
<li>
<p>æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä»…åœ¨å¶å­èŠ‚ç‚¹å¤„ç†ï¼ˆé¢˜ç›®å‡è¦æ±‚ã€Œæ ¹åˆ°å¶è·¯å¾„ã€ï¼‰ï¼›</p>
</li>
<li>
<p>å­—å…¸åºåˆ¤æ–­éœ€ç›´æ¥æ¯”è¾ƒå­—ç¬¦ä¸²ï¼Œä¸å¯ç”¨èŠ‚ç‚¹å€¼å’Œæ›¿ä»£ã€‚</p>
</li>
</ol>
<h3 data-id="heading-38">3.3 é€šç”¨ä¼˜åŒ–æŠ€å·§</h3>
<ol>
<li>
<p><strong>è·¯å¾„ä¼˜åŒ–</strong>ï¼šè·¯å¾„è½¬æ•°å­—ç±»é—®é¢˜ï¼Œä¼˜å…ˆç”¨åŠ¨æ€å€¼è®¡ç®—æ›¿ä»£æ˜¾å¼pathæ•°ç»„ï¼Œé™ä½ç©ºé—´å¼€é”€ï¼›</p>
</li>
<li>
<p><strong>ç‰¹å¾ç»Ÿè®¡ä¼˜åŒ–</strong>ï¼šèŠ‚ç‚¹å€¼èŒƒå›´å°æ—¶ï¼ˆå¦‚1-9ï¼‰ï¼Œä¼˜å…ˆç”¨ä½æ©ç æ›¿ä»£æ•°ç»„/å“ˆå¸Œè¡¨ï¼Œç©ºé—´å¤æ‚åº¦é™è‡³O(1)ï¼›</p>
</li>
<li>
<p><strong>æå‰ç»ˆæ­¢</strong>ï¼šå¶å­èŠ‚ç‚¹å¤„ç†å®Œåæå‰returnï¼Œé¿å…æ— æ„ä¹‰çš„é€’å½’å’Œå›æº¯ï¼›</p>
</li>
<li>
<p><strong>è‡ªåŠ¨å›æº¯</strong>ï¼šç”¨åŸºæœ¬ç±»å‹ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€ä½æ©ç ï¼‰åšå¸¦å‚éå†ï¼Œåˆ©ç”¨å€¼ä¼ é€’å®ç°è‡ªåŠ¨å›æº¯ï¼Œç®€åŒ–ä»£ç ã€‚</p>
</li>
</ol>
<h3 data-id="heading-39">3.4 æ ¸å¿ƒè§£é¢˜å¿ƒæ³•</h3>
<p><strong>ã€Œæ¨¡æ¿å®šç»“æ„ï¼Œä¸šåŠ¡å¡«ç»†èŠ‚ã€</strong>â€”â€” äºŒå‰æ ‘éå†é¢˜çš„æ ¸å¿ƒé€»è¾‘é«˜åº¦ç»Ÿä¸€ï¼Œæ— éœ€ä¸ºæ¯é“é¢˜é‡æ–°è®¾è®¡éå†æ¡†æ¶ã€‚åªéœ€æ ¹æ®é¢˜ç›®åœºæ™¯é€‰æ‹©å¯¹åº”çš„æ¨¡æ¿ï¼Œåœ¨ã€Œæ ¸å¿ƒä¸šåŠ¡åŒºã€ç¼–å†™å°‘é‡ä»£ç å³å¯è§£å†³é—®é¢˜ã€‚</p>
<p>çœŸæ­£çš„éš¾ç‚¹ä¸åœ¨äºéå†æœ¬èº«ï¼Œè€Œåœ¨äºï¼š</p>
<ul>
<li>
<p>æŠŠé¢˜ç›®è¦æ±‚è½¬åŒ–ä¸ºã€Œå¶å­èŠ‚ç‚¹/å±‚å†…èŠ‚ç‚¹çš„å¤„ç†è§„åˆ™ã€ï¼›</p>
</li>
<li>
<p>æ ¹æ®æ•°æ®ç‰¹å¾é€‰æ‹©æœ€ä¼˜çš„è½¨è¿¹è®°å½•æ–¹å¼ï¼ˆæ˜¾å¼path/åŠ¨æ€å€¼/ä½æ©ç ï¼‰ã€‚</p>
</li>
</ul>
<h2 data-id="heading-40">å››ã€æœ€åï¼šä»æ¨¡æ¿åˆ°çµæ´»è¿ç”¨</h2>
<p>æœ¬æ–‡çš„æ¨¡æ¿æ˜¯ã€Œå…¥é—¨æŠ“æ‰‹ã€ï¼ŒèƒŒä¼šæ¨¡æ¿èƒ½è§£å†³90%çš„äºŒå‰æ ‘éå†é¢˜ï¼Œä½†çœŸæ­£çš„ç®—æ³•èƒ½åŠ›åœ¨äºç†è§£æ¨¡æ¿èƒŒåçš„é€»è¾‘ï¼Œå¹¶èƒ½çµæ´»è°ƒæ•´ï¼š</p>
<ul>
<li>
<p>é€’å½’éå†ä¸ä»…é™äºå‰åºï¼Œå¯æ ¹æ®éœ€æ±‚åœ¨ä¸­åº/ååºä½ç½®ç¼–å†™ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚åˆ©ç”¨ä¸­åºéå†çš„æœ‰åºæ€§è§£å†³äºŒå‰æœç´¢æ ‘é—®é¢˜ï¼‰ï¼›</p>
</li>
<li>
<p>å±‚åºéå†å¯å¢åŠ å±‚å®¹å™¨ï¼Œæ”¶é›†æ¯å±‚çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ˆå¦‚äºŒå‰æ ‘å±‚åºéå†è¾“å‡ºäºŒç»´æ•°ç»„ï¼‰ï¼›</p>
</li>
<li>
<p>å¤æ‚é—®é¢˜å¯ç»“åˆä¸¤ç§éå†æ€ç»´ï¼ˆå¦‚å…ˆå±‚åºç¡®å®šæ ‘çš„é«˜åº¦ï¼Œå†é€’å½’å¤„ç†è·¯å¾„ï¼‰ã€‚</p>
</li>
</ul>
<p>é€šè¿‡æœ¬æ–‡çš„6é“å®æˆ˜é¢˜ï¼Œä½ å·²ç»æŒæ¡äº†éå†æ€ç»´çš„æ ¸å¿ƒç”¨æ³•ã€‚åç»­åªéœ€å¤šåšåŒç±»é¢˜ï¼Œç†Ÿç»ƒè¿ç”¨ã€Œæ¨¡æ¿+ä¼˜åŒ–æŠ€å·§ã€ï¼Œå°±èƒ½è½»æ¾æå®šæ‰€æœ‰äºŒå‰æ ‘éå†ç›¸å…³çš„é«˜é¢‘è€ƒç‚¹ï¼Œé¢è¯•æ—¶é‡åˆ°è¿™ç±»é¢˜ä¹Ÿèƒ½ä»å®¹åº”å¯¹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£æŒ‡é’ˆPart5â€”â€”å›è°ƒå‡½æ•°åŠåº”ç”¨]]></title>    <link>https://juejin.cn/post/7603769956975951913</link>    <guid>https://juejin.cn/post/7603769956975951913</guid>    <pubDate>2026-02-08T13:05:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603769956975951913" data-draft-id="7603911453704388651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£æŒ‡é’ˆPart5â€”â€”å›è°ƒå‡½æ•°åŠåº”ç”¨"/> <meta itemprop="keywords" content="Cè¯­è¨€"/> <meta itemprop="datePublished" content="2026-02-08T13:05:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BlackQid"/> <meta itemprop="url" content="https://juejin.cn/user/1197816773870842"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£æŒ‡é’ˆPart5â€”â€”å›è°ƒå‡½æ•°åŠåº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1197816773870842/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BlackQid
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T13:05:14.000Z" title="Sun Feb 08 2026 13:05:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1  å›è°ƒå‡½æ•°çš„å®šä¹‰</h2>
<p>å›è°ƒå‡½æ•°å°±æ˜¯<strong>ä¸€ä¸ªé€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨çš„å‡½æ•°</strong>ã€‚</p>
<p>å¦‚æœä½ æŠŠå‡½æ•°çš„æŒ‡é’ˆï¼ˆåœ°å€ï¼‰ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªæŒ‡é’ˆè¢«ç”¨æ¥è°ƒç”¨å…¶æ‰€æŒ‡å‘çš„å‡½æ•°æ—¶ï¼Œ<strong>è¢«è°ƒç”¨çš„å‡½æ•°å°±æ˜¯å›è°ƒå‡½æ•°</strong>ã€‚å›è°ƒå‡½æ•°ä¸æ˜¯ç”±è¯¥å‡½æ•°çš„å®ç°æ–¹ç›´æ¥è°ƒç”¨ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„äº‹ä»¶æˆ–æ¡ä»¶å‘ç”Ÿæ—¶ç”±å¦å¤–çš„ä¸€æ–¹è°ƒç”¨çš„ï¼Œç”¨äºå¯¹è¯¥äº‹ä»¶æˆ–æ¡ä»¶è¿›è¡Œå“åº”ã€‚</p>
<p>æ¦‚å¿µæœ‰äº›æŠ½è±¡ï¼Œæ¥ä¸‹æ¥é€šè¿‡å­¦ä¹ <code>qsort</code>å‡½æ•°ä»¥åŠå…¶æ¨¡æ‹Ÿå®ç°æ¥ä¿ƒè¿›ç†è§£ã€‚</p>
<h2 data-id="heading-1">2  <code>qsort</code>å‡½æ•°</h2>
<p><code>qsort</code>å‡½æ•°æ˜¯ç”¨<strong>å¿«é€Ÿæ’åº</strong>æ–¹æ³•èƒ½å¯¹æ•°ç»„ã€ç»“æ„ä½“ç­‰æŒ‰æä¾›çš„è§„åˆ™è¿›è¡Œæ’åºçš„ä¸€ä¸ªåº“å‡½æ•°ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">qsort</span> <span class="hljs-params">(<span class="hljs-type">void</span>* base, <span class="hljs-type">size_t</span> num, <span class="hljs-type">size_t</span> size, <span class="hljs-type">int</span> (*compar)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*,<span class="hljs-type">const</span> <span class="hljs-type">void</span>*))</span>;
</code></pre>
<p>è¯¥å‡½æ•°åŒ…å«å››ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>base</code>æ˜¯æŒ‡å‘å¾…æ’åºå†…å®¹çš„é¦–å…ƒç´ åœ°å€ï¼›</li>
<li><code>num</code>æ˜¯å¾…æ’åºå†…å®¹çš„å…ƒç´ ä¸ªæ•°ï¼›</li>
<li><code>size</code>æ˜¯å¾…æ’åºå†…å®¹çš„ä¸€ä¸ªå…ƒç´ å¤§å°ï¼Œå•ä½å­—èŠ‚ï¼›</li>
<li>å‡½æ•°æŒ‡é’ˆ<code>compar</code>æ˜¯æŒ‡å‘<strong>æ¯”è¾ƒå‡½æ•°</strong>ï¼Œéœ€è¦è‡ªè¡Œç¼–å†™ï¼Œå®ç°å¯¹å¾…æ’åºå†…å®¹ä¸­ä¸¤ä¸ªå…ƒç´ çš„æ¯”è¾ƒã€‚</li>
</ul>
<p>å› ä¸º<code>qsort</code>å‡½æ•°å¹¶ä¸çŸ¥é“ä½ ä¼šä¼ å…¥ä¸€ä¸ªä»€ä¹ˆæ ·çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥å°±éœ€è¦ä½ è‡ªå·±å…ˆå†™å¥½ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œå†ä¼ ç»™<code>qsort</code>ä½¿ç”¨ã€‚æ¯”è¾ƒå‡½æ•°çš„ç±»å‹ã€å‚æ•°ä¸è¿”å›å€¼éƒ½æœ‰è§„å®šï¼Œè§å‚è€ƒé“¾æ¥ã€‚</p>
<p><code>qsort</code>å‡½æ•°æ›´è¯¦ç»†è¯´æ˜çš„å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flegacy.cplusplus.com%2Freference%2Fcstdlib%2Fqsort%2F%3Fkw%3Dqsort" target="_blank" title="https://legacy.cplusplus.com/reference/cstdlib/qsort/?kw=qsort" ref="nofollow noopener noreferrer">legacy.cplusplus.com/reference/câ€¦</a></p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨<code>qsort</code>å‡½æ•°æ’åºæ•´å‹æ•°ç»„çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS 1</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-type">int</span> <span class="hljs-title function_">cmp_int</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* e1, <span class="hljs-type">const</span> <span class="hljs-type">void</span>* e2)</span>
<span class="hljs-comment">//conståœ¨*å·¦ä¾§ï¼Œç¡®ä¿æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸ä¼šè¢«ä¿®æ”¹</span>
{
	<span class="hljs-keyword">return</span> *((<span class="hljs-type">int</span>*)e1) - *((<span class="hljs-type">int</span>*)e2);
    <span class="hljs-comment">//è¦æ’åºçš„æ˜¯æ•´å½¢æ•°ç»„ï¼Œå…ƒç´ æ˜¯æ•´å½¢ï¼Œè¿™é‡Œå…ˆå°†void*ç±»å‹å¼ºè½¬æˆint*ç±»å‹</span>
    <span class="hljs-comment">//å¼ºè½¬æˆä¸å…ƒç´ å¯¹åº”çš„æŒ‡é’ˆç±»å‹ï¼Œè§£å¼•ç”¨æ‰èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœ</span>
    <span class="hljs-comment">//è¿™é‡Œreturnè¿”å›ç›¸å‡çš„å·®ï¼Œæ­£å¥½ç¬¦åˆæ¯”è¾ƒå‡½æ•°çš„è¿”å›å€¼è¦æ±‚</span>
}
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-type">int</span> arr[] = { <span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span> };
	<span class="hljs-type">int</span> num = <span class="hljs-keyword">sizeof</span>(arr) / <span class="hljs-keyword">sizeof</span>(arr[<span class="hljs-number">0</span>]);
	qsort(arr, num, <span class="hljs-keyword">sizeof</span>(arr[<span class="hljs-number">0</span>]), cmp_int);
}
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨<code>qsort</code>å‡½æ•°æ’åºç»“æ„ä½“æ•°ç»„çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS 1</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Stu</span>
{</span>
	<span class="hljs-type">char</span> name[<span class="hljs-number">20</span>];
	<span class="hljs-type">int</span> age;
};

<span class="hljs-type">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span><span class="hljs-comment">//è¿™é‡Œå±•ç¤ºäº†ä¸¤ç§è®¿é—®ç»“æ„ä½“æŒ‡é’ˆæŒ‡å‘å†…å®¹çš„æ–¹æ³•</span>
{
	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Stu</span> <span class="hljs-title">s</span> =</span> { <span class="hljs-string">"cuihua"</span>, <span class="hljs-number">18</span> };
	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Stu</span>* <span class="hljs-title">ps</span> =</span> &amp;s;<span class="hljs-comment">//ç»“æ„ä½“æŒ‡é’ˆå˜é‡</span>
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s\n"</span>, (*ps).name);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s\n"</span>, ps-&gt;name);
	<span class="hljs-comment">//ç»“æ„ä½“å˜é‡.æˆå‘˜å</span>
	<span class="hljs-comment">//ç»“æ„ä½“æŒ‡é’ˆå˜é‡-&gt;æˆå‘˜å</span>
}

<span class="hljs-comment">//æŒ‰ç…§åå­—æ¯”è¾ƒå¤§å°</span>
<span class="hljs-comment">//e1æ˜¯æŒ‡å‘ä¸€ä¸ªç»“æ„ä½“æ•°æ®çš„ï¼Œe1æ˜¯æŒ‡å‘å¦å¤–ä¸€ä¸ªç»“æ„ä½“æ•°æ®çš„</span>
<span class="hljs-comment">//åå­—æ˜¯å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²çš„æ¯”è¾ƒä½¿ç”¨strcmp</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">cmp_stu_by_name</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* e1, <span class="hljs-type">const</span> <span class="hljs-type">void</span>* e2)</span>
{
	<span class="hljs-keyword">return</span> <span class="hljs-built_in">strcmp</span>((*(<span class="hljs-keyword">struct</span> Stu*)e1).name, (*(<span class="hljs-keyword">struct</span> Stu*)e2).name);
}

<span class="hljs-type">int</span> <span class="hljs-title function_">cmp_stu_by_name1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* e1, <span class="hljs-type">const</span> <span class="hljs-type">void</span>* e2)</span>
{
	<span class="hljs-keyword">return</span> <span class="hljs-built_in">strcmp</span>(((<span class="hljs-keyword">struct</span> Stu*)e1)-&gt;name, ((<span class="hljs-keyword">struct</span> Stu*)e2)-&gt;name);
}

<span class="hljs-comment">//æŒ‰ç…§å¹´é¾„æ¥æ¯”è¾ƒ</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">cmp_stu_by_age</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* e1, <span class="hljs-type">const</span> <span class="hljs-type">void</span>* e2)</span>
{
	<span class="hljs-keyword">return</span> ((<span class="hljs-keyword">struct</span> Stu*)e1)-&gt;age - ((<span class="hljs-keyword">struct</span> Stu*)e2)-&gt;age;
}

<span class="hljs-comment">//æµ‹è¯•qsortå‡½æ•°æ’åºç»“æ„ä½“æ•°æ® - æŒ‰åå­—æ¯”è¾ƒ</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>
{
	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Stu</span> <span class="hljs-title">arr</span>[3] =</span> { {<span class="hljs-string">"zhangsan"</span>, <span class="hljs-number">18</span>},{<span class="hljs-string">"lisi"</span>, <span class="hljs-number">35</span>},{<span class="hljs-string">"wangwu"</span>, <span class="hljs-number">12</span>} };
	<span class="hljs-comment">//{"lisi", 35}, {"wangwu", 12},{"zhangsan", 18}</span>
	<span class="hljs-type">int</span> sz = <span class="hljs-keyword">sizeof</span>(arr) / <span class="hljs-keyword">sizeof</span>(arr[<span class="hljs-number">0</span>]);
	qsort(arr, sz, <span class="hljs-keyword">sizeof</span>(arr[<span class="hljs-number">0</span>]), cmp_stu_by_name);
}

<span class="hljs-comment">//æµ‹è¯•qsortå‡½æ•°æ’åºç»“æ„ä½“æ•°æ® - æŒ‰å¹´é¾„æ¯”è¾ƒ</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>
{
	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Stu</span> <span class="hljs-title">arr</span>[3] =</span> { {<span class="hljs-string">"zhangsan"</span>, <span class="hljs-number">18</span>},{<span class="hljs-string">"lisi"</span>, <span class="hljs-number">35</span>},{<span class="hljs-string">"wangwu"</span>, <span class="hljs-number">12</span>} };
	<span class="hljs-comment">//{{"wangwu", 12}, "zhangsan", 18},{"lisi", 35}</span>
	<span class="hljs-type">int</span> sz = <span class="hljs-keyword">sizeof</span>(arr) / <span class="hljs-keyword">sizeof</span>(arr[<span class="hljs-number">0</span>]);
	qsort(arr, sz, <span class="hljs-keyword">sizeof</span>(arr[<span class="hljs-number">0</span>]), cmp_stu_by_age);
}

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	test2();
	test4();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h2 data-id="heading-2">3  æ¨¡æ‹Ÿå®ç°</h2>
<p>ç¬¬2èŠ‚è§£é‡Šäº†<code>qsort</code>å‡½æ•°çš„å‚æ•°åŠè¿è¡Œæ–¹å¼ï¼Œæ¥ä¸‹æ¥å°è¯•æ¨¡æ‹Ÿå®ç°ã€‚è¿™é‡Œæ’åºæ–¹æ³•é‡‡ç”¨æ›´ç†Ÿæ‚‰çš„å†’æ³¡æ’åºï¼Œè€Œé<code>qsort</code>çš„å¿«é€Ÿæ’åºã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS 1</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-type">void</span> <span class="hljs-title function_">Swap</span><span class="hljs-params">(<span class="hljs-type">char</span>* buf1, <span class="hljs-type">char</span>* buf2, <span class="hljs-type">size_t</span> sz)</span>
{
	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++)
	{
		<span class="hljs-type">int</span> tmp = *buf1;
		*buf1 = *buf2;
		*buf2 = tmp;
		buf1++;
		buf2++;
	}
}

<span class="hljs-type">void</span> <span class="hljs-title function_">bubble_sort</span><span class="hljs-params">(<span class="hljs-type">void</span>* base, <span class="hljs-type">size_t</span> n, <span class="hljs-type">size_t</span> sz, <span class="hljs-type">int</span> (*cmp)(<span class="hljs-type">const</span> <span class="hljs-type">void</span>*, <span class="hljs-type">const</span> <span class="hljs-type">void</span>*))</span>
{
	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)
	{
		<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n - <span class="hljs-number">1</span> - i; j++)
		{
			<span class="hljs-keyword">if</span> (cmp((<span class="hljs-type">char</span>*)base + sz * j, (<span class="hljs-type">char</span>*)base + sz * (j + <span class="hljs-number">1</span>)) &gt; <span class="hljs-number">0</span>)
			{
				Swap((<span class="hljs-type">char</span>*)base + sz * j, (<span class="hljs-type">char</span>*)base + sz * (j + <span class="hljs-number">1</span>), sz);
			}
		}
	}
}

<span class="hljs-type">int</span> <span class="hljs-title function_">cmp_int</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* e1, <span class="hljs-type">const</span> <span class="hljs-type">void</span>* e2)</span>
{
	<span class="hljs-keyword">return</span> *((<span class="hljs-type">int</span>*)e1) - *((<span class="hljs-type">int</span>*)e2);
}

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-type">int</span> arr[] = { <span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span> };
	<span class="hljs-type">int</span> num = <span class="hljs-keyword">sizeof</span>(arr) / <span class="hljs-keyword">sizeof</span>(arr[<span class="hljs-number">0</span>]);
	bubble_sort(arr, num, <span class="hljs-keyword">sizeof</span>(arr[<span class="hljs-number">0</span>]), cmp_int);
}
</code></pre>
<p>è§‚å¯Ÿä¸Šè¿°çš„ç¤ºä¾‹ï¼Œå¹¶å›å¿†å›è°ƒå‡½æ•°çš„å®šä¹‰ã€‚</p>
<blockquote>
<p>å›è°ƒå‡½æ•°å°±æ˜¯<strong>ä¸€ä¸ªé€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨çš„å‡½æ•°</strong>ã€‚</p>
<p>å¦‚æœä½ æŠŠå‡½æ•°çš„æŒ‡é’ˆï¼ˆåœ°å€ï¼‰ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªæŒ‡é’ˆè¢«ç”¨æ¥è°ƒç”¨å…¶æ‰€æŒ‡å‘çš„å‡½æ•°æ—¶ï¼Œ<strong>è¢«è°ƒç”¨çš„å‡½æ•°å°±æ˜¯å›è°ƒå‡½æ•°</strong>ã€‚</p>
</blockquote>
<p><strong>æ¯”è¾ƒå‡½æ•°</strong><code>cmp_int</code>é€šè¿‡å‡½æ•°æŒ‡é’ˆçš„å½¢å¼ä¼ å…¥<code>bubble_sort</code>å‡½æ•°å¹¶åœ¨å…¶å†…éƒ¨è¢«è°ƒç”¨ï¼Œæ¯”è¾ƒå‡½æ•°<code>cmp_int</code>å°±æ˜¯ä¸€ä¸ª<strong>å›è°ƒå‡½æ•°</strong>ã€‚å…¶å®ç¬¬2èŠ‚ç¤ºä¾‹ä¸­çš„æ¯”è¾ƒå‡½æ•°ä»¬ä¹Ÿéƒ½æ˜¯å›è°ƒå‡½æ•°ã€‚</p>
<p>å¯è§ï¼Œå›è°ƒå‡½æ•°åœ¨å®ç°ä¸€äº›å¤æ‚åŠŸèƒ½æ—¶å…·æœ‰ç‹¬åˆ°çš„ä¼˜åŠ¿ã€‚æƒ³æƒ³å¦‚æœä¸ç”¨å›è°ƒå‡½æ•°åº”è¯¥æ˜¯ä¸å¤ªå¥½å®ç°ç›¸åŒçš„åŠŸèƒ½çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸šåŠ¡æ–¹ä¸Šå‹åŠ›äº†ï¼Œå‰ç«¯ä»”é€Ÿé€šRGBè½¬CMYK]]></title>    <link>https://juejin.cn/post/7604093823957860371</link>    <guid>https://juejin.cn/post/7604093823957860371</guid>    <pubDate>2026-02-09T01:40:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604093823957860371" data-draft-id="7603958579179585536" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ä¸šåŠ¡æ–¹ä¸Šå‹åŠ›äº†ï¼Œå‰ç«¯ä»”é€Ÿé€šRGBè½¬CMYK"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T01:40:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤èŒ—å‰ç«¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3233040624266695"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ä¸šåŠ¡æ–¹ä¸Šå‹åŠ›äº†ï¼Œå‰ç«¯ä»”é€Ÿé€šRGBè½¬CMYK
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/7198439419173404711/posts" data-v-d326b38e=""><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dafcebf7c91d402abd52f072a32deba8~tplv-k3u1fbpfcp-watermark.image?" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/7198439419173404711/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="å¤èŒ—å‰ç«¯å›¢é˜Ÿ" class="title" data-v-d326b38e="">å¤èŒ—å‰ç«¯å›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2026-02-09T01:40:21.000Z" title="Mon Feb 09 2026 01:40:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2026-02-09
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                1
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»29åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              @å¤èŒ—ç§‘æŠ€
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼€ç«¯</h2>
<p>"åˆåŒå’å•å¤§äº‹ä¸å¥½äº†ï¼Œå’±ä»¬å¯¼å‡ºçš„å›¾ç‰‡æœ‰é—®é¢˜ï¼Œå°åˆ·å‡ºæ¥æœ‰è‰²å·®ï¼ä¸šåŠ¡æ–¹éƒ½è¢«é€¼ç€è¦å»å¤–é‡‡è½¯ä»¶äº†ï¼"</p>
<p>ä¸‹ç­å‰ï¼Œäº§å“çªç„¶åœ¨ç¾¤é‡Œä¸¢äº†ä¸€é¢—é‡ç£…ç‚¸å¼¹ã€‚</p>
<p>å¤–é‡‡è½¯ä»¶ï¼Ÿä»€ä¹ˆæƒ…å†µï¼Ÿè¦æ˜¯çœŸæŠŠä¸šåŠ¡æ–¹é€¼å»å¤–é‡‡äº†ï¼Œå’±ä»¬ IT å¾€åçš„æ—¥å­å¯å°±ä¸å¥½è¿‡äº†ã€‚</p>
<p>äº‹ä¸å®œè¿Ÿï¼Œå’±ä»¬èµ¶ç´§çœ‹çœ‹æ˜¯æ€ä¹ˆä¸ªäº‹ã€‚</p>
<h2 data-id="heading-1">äºŒã€é—®é¢˜èƒŒæ™¯</h2>
<p>æˆ‘ä»¬å›¢é˜Ÿè´Ÿè´£çš„æ˜¯åŠ ç›Ÿå•†æŠ¥è´§ç›¸å…³ä¸šåŠ¡ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå®šåˆ¶å®£ä¼ ç‰©æ–™çš„æ¨¡å—ï¼Œä¸šåŠ¡æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>è®¾è®¡å¸ˆåœ¨åå°åˆ›å»ºå¯å®šåˆ¶çš„æ¨¡æ¿ï¼ˆä½¿ç”¨ Fabric å®ç°çš„ä¸€ä¸ªå¯è§†åŒ–ç¼–è¾‘å™¨ï¼‰</li>
<li>åŠ ç›Ÿå•†é€šè¿‡å°ç¨‹åºå¡«å†™å®šåˆ¶ä¿¡æ¯ï¼ˆé—¨åº—åç§°ã€å›¾ç‰‡ã€æ–‡æ¡ˆç­‰ï¼‰ä¸‹å•</li>
<li>è®¾è®¡å¸ˆåœ¨åå°å®¡æ ¸å¹¶åˆæˆæœ€ç»ˆè®¾è®¡ç¨¿ï¼ˆä½¿ç”¨ç¦»å± Canvas æ¸²æŸ“å¹¶ç›´æ¥ä¸Šä¼  OSSï¼‰</li>
<li>å¯¼å‡ºé«˜æ¸…åŸå›¾å‘å¾€å°åˆ·å‚å°åˆ·ï¼Œæœ€ç»ˆäº¤ä»˜ç»™åŠ ç›Ÿå•†</li>
</ol>
<p>è¿™ä¸ªç³»ç»Ÿçš„å‰ç«¯éƒ¨åˆ†ä½¿ç”¨äº† Fabric æ¥å®ç°å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½ï¼ŒåŸºäºæµè§ˆå™¨ Canvas API å¯¼å‡ºå›¾ç‰‡ï¼Œè€Œ Canvas åªæ”¯æŒ <code>RGB</code> è‰²å½©æ¨¡å¼ã€‚ä½†å°åˆ·å‚éœ€è¦çš„æ˜¯ <code>CMYK</code> æ¨¡å¼ï¼Œè¿™å¯¼è‡´å°åˆ·å‡ºæ¥æœ‰éå¸¸æ˜æ˜¾çš„è‰²å·®ã€‚</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb1c538f450e4fcc8844367a63896a47~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2182&amp;h=1630&amp;s=3103078&amp;e=png&amp;b=8b8176" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€é¢œè‰²çš„æœ¬è´¨ï¼šè‰²å½©å­¦</h2>
<p>è¦ææ˜ç™½ä¸ºä»€ä¹ˆæœ‰è‰²å·®ï¼Œæˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“ï¼Œä»€ä¹ˆæ˜¯é¢œè‰²ã€‚</p>
<blockquote>
<p>è¿™éƒ¨åˆ†æ¯”è¾ƒå†—é•¿ï¼Œå¦‚æœä½ å·²ç»å…·å¤‡äº†ç›¸å…³å‰ç½®çŸ¥è¯†ï¼Œå¯ä»¥ç›´æ¥è·³è½¬è‡³ã€Œä¸ºä»€ä¹ˆæœ‰è‰²å·®ã€ä¸€èŠ‚</p>
</blockquote>
<h3 data-id="heading-3">1. è‰²å½©æ¨¡å¼</h3>
<p>1672å¹´ï¼Œç‰›é¡¿é€šè¿‡ä¸€å—æ£±é•œï¼Œå‘ç°äº†å…‰çš„è‰²æ•£ï¼Œä»è€Œæ­ç¤ºäº†ç™½å…‰ç”±ä¸åŒé¢œè‰²å…‰è°±ç»„æˆçš„æœ¬è´¨ã€‚</p>
<p>è€Œåï¼Œç‰©ç†å­¦å®¶å¤§å«Â·å¸ƒå„’æ–¯ç‰¹è¿›ä¸€æ­¥å‘ç°æŸ“æ–™çš„åŸè‰²åªéœ€è¦çº¢ã€é»„ã€è“ä¸‰ç§é¢œè‰²ï¼ŒåŸºäºè¿™ä¸‰ç§é¢œè‰²ï¼Œå°±å¯ä»¥è°ƒé…å‡ºä»»ä½•å…¶ä»–é¢œè‰²ã€‚</p>
<p>éšç€ç§‘æŠ€çš„è¿›æ­¥ï¼Œç”Ÿç†å­¦å®¶æ‰˜é©¬æ–¯æ¨æ ¹æ®äººç±»çœ¼çƒçš„è§†è§‰ç”Ÿç†ç‰¹å¾åˆæå‡ºäº†æ–°çš„ä¸‰åŸè‰²ï¼Œå³çº¢ã€ç»¿ã€è“ä¸‰ç§é¢œè‰²ã€‚</p>
<p>æ­¤åï¼Œäººç±»å¼€å§‹æ„è¯†åˆ°ï¼Œè‰²å…‰å’Œé¢œæ–™çš„åŸè‰²åŠå…¶æ··åˆè§„å¾‹æ˜¯æœ‰ä¸åŒçš„ï¼Œè¿™å®é™…ä¸Šå¼•å‡ºçš„æ˜¯ <code>åŠ è‰²æ¨¡å¼</code> å’Œ <code>å‡è‰²æ¨¡å¼</code> ä¸¤ç§è‰²å½©æ¨¡å¼ã€‚</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86ebd43e7622427d96711a8a74531ae4~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2048&amp;h=1281&amp;s=412842&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">å‡è‰²æ¨¡å¼</h4>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œäººç±»å¹¶ä¸èƒ½ç›´æ¥<strong>çœ‹åˆ°</strong>ç‰©ä½“æœ¬èº«çš„é¢œè‰²ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ç‰©ä½“çš„é¢œè‰²ï¼Œå®é™…ä¸Šæ˜¯ç‰©ä½“åå°„çš„å…‰çš„é¢œè‰²ã€‚çº¢è‰²çš„ç‰©ä½“ï¼Œå®é™…ä¸Šæ˜¯å¸æ”¶äº†é™¤çº¢å…‰ä»¥å¤–çš„æ‰€æœ‰å…‰ï¼Œæ‰è®©å”¯ä¸€çš„çº¢å…‰å¯ä»¥è¿›å…¥æˆ‘ä»¬çš„çœ¼çƒã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ç°å®ä¸–ç•Œæˆ‘ä»¬çœ‹åˆ°çš„æ‰€æœ‰<strong>ä¸è‡ªå‘å…‰ç‰©ä½“</strong>çš„é¢œè‰²ï¼Œéƒ½åº”å½“æŒ‰ç…§å‡è‰²æ¨¡å¼è¿›è¡Œè°ƒé…å’Œæè¿°ï¼Œå¦‚ç¾æœ¯ä¸­ä½¿ç”¨åˆ°çš„é¢œæ–™ã€å°æŸ“å·¥è‰ºä¸­ä½¿ç”¨çš„æŸ“æ–™ç­‰ã€‚</p>
<p>å‡æ³•ä¸‰åŸè‰²ä¸ºé’è‰²ï¼ˆCï¼‰ã€å“çº¢è‰²ï¼ˆMï¼‰ã€é»„è‰²ï¼ˆYï¼‰ï¼Œåˆç§° <code>CMY</code>ã€‚è€Œç°å¦‚ä»Šçš„å°åˆ·è¡Œä¸šæ™®éé‡‡ç”¨çš„ <code>CMYK</code> æ¨¡å¼ï¼Œåˆ™æ˜¯å› ä¸ºä½¿ç”¨ä¸‰ç§é¢œè‰²çš„é¢œæ–™æ— æ³•æ­£ç¡®æ··åˆå‡ºçº¯æ­£çš„é»‘è‰²ï¼ˆé€šå¸¸æ˜¯æ·±ç°è‰²ï¼‰ï¼Œå› æ­¤éœ€è¦é¢å¤–å•ç‹¬çš„é»‘è‰²ï¼ˆKï¼‰æŸ“æ–™æ¥å°æŸ“é»‘è‰²ã€‚</p>
<p>å‡è‰²æ³•çš„é¢œè‰²æ•ˆæœå®Œå…¨ä¾èµ–äºç¯å¢ƒå…‰çš„ç…§å°„å’Œç™½çº¸çš„åå°„èƒ½åŠ›â€”â€”æ²¹å¢¨æœ¬èº«ä¼šå¸æ”¶ä¸€éƒ¨åˆ†å…‰ï¼Œç™½çº¸ä¹Ÿæ— æ³• 100% åå°„æ‰€æœ‰å…‰çº¿ï¼Œå¹¶ä¸”æ²¹å¢¨æŸ“æ–™çš„åŒ–å­¦ç‰¹æ€§é™åˆ¶äº†å…¶åå°„å…‰è°±çš„çº¯åº¦ã€‚</p>
<h4 data-id="heading-5">åŠ è‰²æ¨¡å¼</h4>
<p>è€Œé’ˆå¯¹å¯ä»¥ç›´æ¥å‘å‡ºå…‰çº¿çš„ç‰©ä½“ï¼Œäººç±»æ‰€çœ‹åˆ°çš„é¢œè‰²å°±ç›´æ¥æ˜¯å…¶å‘å‡ºå…‰çº¿é¢œè‰²æœ¬èº«äº†ã€‚</p>
<p>å’Œå‡è‰²çš„ä¸‰åŸè‰²ä¸åŒï¼ŒåŠ æ³•ä¸‰åŸè‰²ä¸ºçº¢ï¼ˆRï¼‰ã€ç»¿ï¼ˆGï¼‰ã€è“ï¼ˆBï¼‰ï¼Œä¹Ÿå°±æ˜¯å¤§å®¶ç†ŸçŸ¥çš„ <code>RGB</code> æ¨¡å¼ã€‚</p>
<p>åŠ è‰²æ³•æ˜¯ä¸»åŠ¨å…‰æºã€‚ä¸»åŠ¨å…‰æºé€šå¸¸å¯ä»¥å‘å‡ºéå¸¸çº¯å‡€ã€é«˜é¥±å’Œåº¦çš„å•è‰²å…‰ï¼Œå¹¶èƒ½å°†äº®åº¦æå‡åˆ°å¾ˆé«˜ã€‚è¿™ä½¿å®ƒèƒ½å¤Ÿå‘ˆç°éå¸¸é²œè‰³ã€æ˜äº®çš„é¢œè‰²ã€‚</p>
<p>å°±æ¯”å¦‚ä½ çœ‹åˆ°è¿™ç¯‡æ–‡ç« æ—¶ä½¿ç”¨çš„æ˜¾ç¤ºå™¨ï¼Œæ¯ä¸ªåƒç´ éƒ½æ˜¯ç”±çº¢ç»¿è“ä¸‰ç§é¢œè‰²çš„å‘å…‰äºŒæç®¡ç»„æˆçš„ã€‚</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d3302ec9ff66482aba360e8a7fcead9b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=700&amp;h=412&amp;s=439079&amp;e=png&amp;b=d1d9e1" alt="" loading="lazy"/></p>
<blockquote>
<p>æ›¾ç»çº¢æä¸€æ—¶ã€å¦‚é›·è´¯è€³çš„â€œå‘¨å†¬é›¨æ’åˆ—â€</p>
</blockquote>
<p>ç”±äºç‰©ç†ä¸–ç•Œçš„é™åˆ¶ï¼Œå°åˆ·å“å¾ˆéš¾è¾¾åˆ°æ˜¾ç¤ºå™¨é‚£ç§å‘å…‰ä½“çš„äº®åº¦å’Œé¥±å’Œåº¦ã€‚</p>
<h3 data-id="heading-6">2. è‰²å½©ç©ºé—´</h3>
<p>è‰²å½©æ¨¡å¼å‘Šè¯‰ä½ ï¼Œä½¿ç”¨é’ã€å“çº¢ã€é»„ä¸‰ç§é¢œè‰²çš„è°ƒæ–™å¯ä»¥è°ƒé…å‡ºä»»ä½•ä½ æƒ³è¦çš„é¢œè‰²ï¼Œä½†æ˜¯å´æ²¡æœ‰å‘Šè¯‰ä½ ï¼Œå¦‚æœæˆ‘æƒ³è¦è°ƒé…å‡ºæ­£çº¢è‰²ï¼Œè¦ç”¨å¤šå°‘é’è‰²ã€å¤šå°‘å“çº¢ã€å’Œå¤šå°‘é»„è‰²ï¼Ÿ</p>
<p>ç”šè‡³ä½ æƒ³è¦çš„æ­£çº¢è‰²ï¼Œå…¶è‡ªèº«éƒ½æ²¡æ³•ç”¨ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†æ¥è¡¨è¿°â€”â€”è¿™æ­£çº¢å¾—å¤šçº¢æ‰å«æ­£çº¢å‘€ï¼Ÿ</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6263818d38d644e9a6ee6dc56a97c364~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=960&amp;h=540&amp;s=433826&amp;e=png&amp;b=151f26" alt="" loading="lazy"/></p>
<p>æƒ³è¦å®šé‡åœ°æè¿°é¢œè‰²ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥<code>è‰²å½©ç©ºé—´(Color Space)</code>çš„æ¦‚å¿µã€‚</p>
<h4 data-id="heading-7">CIE XYZ</h4>
<p>1931 å¹´ï¼Œå›½é™…ç…§æ˜å§”å‘˜ä¼šï¼ˆCIEï¼‰åˆ›å»ºäº† <code>CIE XYZ</code> è‰²å½©ç©ºé—´ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªåŸºäºäººçœ¼è§†è§‰ç‰¹æ€§çš„æ ‡å‡†è‰²å½©ç©ºé—´ã€‚</p>
<p>åŸºäº <code>XYZ</code> ä¸‰ä¸ªåæ ‡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å”¯ä¸€ç¡®å®šçš„æ•°å€¼å½¢å¼è¡¨ç¤ºå‡ºäººç±»è‚‰çœ¼å¯è§çš„æ‰€æœ‰é¢œè‰²ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬ä¾¿èƒ½ç»™æ¯ä¸€ç§é¢œè‰²ç²¾å‡†å®šä½äº†ã€‚</p>
<h4 data-id="heading-8">sRGB</h4>
<p>è™½ç„¶æœ‰äº† CIE XYZ è¿™ä¸ªâ€œç»Ÿä¸€è¯­è¨€â€ï¼Œä½†åœ¨ 90 å¹´ä»£æœ«ï¼Œç”µè„‘æ™®åŠå’Œäº’è”ç½‘çˆ†å‘å¸¦æ¥äº†ä¸€ä¸ªæå…¶ç°å®çš„æŒ‘æˆ˜ï¼šæ˜¾ç¤ºå™¨çš„æ˜¾ç¤ºèƒ½åŠ›æ˜¯æœ‰é™çš„ï¼Œè€Œå½“æ—¶çš„ç½‘ç»œå¸¦å®½æ›´æ˜¯å¯¸åœŸå¯¸é‡‘ã€‚</p>
<p>å¦‚æœè¯´ CIE XYZ æ˜¯ä¸€æœ¬åŒ…å«äº†å‡ åä¸‡è¯æ¡ã€å¤§è€Œå…¨çš„ã€Šç‰›æ´¥è‹±è¯­å¤§è¯å…¸ã€‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ—¥å¸¸äº¤æµä¸­ï¼Œå…¶å®åªéœ€è¦ä¸€æœ¬å‡ åƒè¯çš„ã€Šæ—¥å¸¸å£è¯­æ‰‹å†Œã€‹å°±è¶³å¤Ÿäº†ã€‚ å¼ºè¡Œä¼ è¾“ XYZ è¿™ç§æµ·é‡æ•°æ®ï¼Œæ—¢è¶…å‡ºäº†æ˜¾ç¤ºå™¨çš„æ‰¿è½½èƒ½åŠ›ï¼Œä¹Ÿæ‹–æ…¢äº†ç½‘é€Ÿã€‚</p>
<p>ä¸ºäº†åœ¨æ˜¾ç¤ºæ•ˆæœã€ä¼ è¾“æ•ˆç‡å’Œè·¨è®¾å¤‡ä¸€è‡´æ€§ä¹‹é—´æ‰¾åˆ°é‚£ä¸ªå¹³è¡¡ç‚¹ï¼Œ1996 å¹´ï¼Œå¾®è½¯å’Œæƒ æ™®é€‰å–äº†å½“æ—¶ä¸»æµ CRT æ˜¾ç¤ºå™¨ï¼ˆå¤§å¤´ç”µè§†ï¼‰è§å…‰ç²‰èƒ½å‘å‡ºçš„çº¢ç»¿è“ï¼Œä½œä¸ºåŸºå‡†ä¸‰åŸè‰²ï¼Œç”±æ­¤åˆ›é€ äº†æµè¡Œè‡³ä»Šçš„ <code>sRGB</code> è‰²å½©ç©ºé—´ï¼Œå…¶ä¸­ <code>s</code> æ„ä¸º<code>æ ‡å‡†ï¼ˆStandardï¼‰</code>ã€‚</p>
<h4 data-id="heading-9">CMYK</h4>
<p>ä¸æ˜¾ç¤ºå™¨ä¸åŒï¼Œå°åˆ·æ—¶é€‰å–ä¸åŒçš„å°åˆ·ä»‹è´¨å’Œæ²¹å¢¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ€ç»ˆçš„å°åˆ·æ•ˆæœä¸åŒï¼Œå› æ­¤é’ˆå¯¹ç‰¹å®šçš„çº¸å¼ å’Œæ²¹å¢¨ç»„åˆï¼Œè¯ç”Ÿäº†ä¸€ç³»åˆ—ä¸åŒçš„ CMYK è‰²å½©ç©ºé—´ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>FOGRA / ISO Coated (æ¬§æ´²æ ‡å‡†): é’ˆå¯¹æ¬§æ´²å¸¸ç”¨çš„é“œç‰ˆçº¸å°åˆ·ã€‚</li>
<li>GRACoL / SWOP (ç¾å›½æ ‡å‡†): å¸¸è§äºç¾å›½çš„å‡ºç‰ˆç‰©ã€‚</li>
<li>Japan Color (æ—¥æœ¬æ ‡å‡†): é’ˆå¯¹äºšæ´²äººè§†è§‰åå¥½çš„å†·è°ƒå°åˆ·ã€‚</li>
</ul>
<h3 data-id="heading-10">3. è‰²åŸŸ</h3>
<p>ä¸ºäº†æ–¹ä¾¿æ¯”è¾ƒï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†ä¸åŒçš„è‰²å½©ç©ºé—´ç»Ÿä¸€æ˜ å°„åˆ° CIE XYZ è‰²å½©ç©ºé—´å†…è¿›è¡Œæ¯”å¯¹ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å°† Z åæ ‡è¿›è¡Œå½’ä¸€åŒ–å’Œå‹ç¼©ï¼Œå†å°†æ‰€æœ‰è¯¥è‰²å½©ç©ºé—´å†…æ‰€æœ‰é¢œè‰²çš„ Xã€Y åæ ‡è¿èµ·æ¥ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªå°é—­çš„äºŒç»´å›¾å½¢ï¼Œè¿™ä¸ªå°é—­çš„å›¾å½¢å°±æ˜¯<code>è‰²åŸŸï¼ˆColor Gamutï¼‰</code>ï¼Œå°±æ˜¯è¯¥è‰²å½©æ¨¡å¼æ‰€èƒ½è¡¨ç¤ºçš„é¢œè‰²èŒƒå›´ã€‚</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9e83017155044d92a6a36e4a4b63994b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1200&amp;h=1267&amp;s=676567&amp;e=png&amp;b=fffefe" alt="" loading="lazy"/></p>
<blockquote>
<p>å…¶ä¸­é©¬è¹„å½¢åŒºåŸŸæ˜¯å¯è§å…‰çš„è‰²åŸŸï¼Œé€šå¸¸è¢«ç§°ä½œâ€œå…¨è‰²åŸŸâ€</p>
</blockquote>
<p>é€šè¿‡å›¾åƒæˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼ŒsRGB çš„è‰²åŸŸå¹¶ä¸èƒ½å®Œå…¨è¦†ç›– CMYKï¼Œè¿™æ„å‘³ç€ï¼Œä¸€ä¸ªåœ¨ sRGB ä¸‹èƒ½è¡¨ç¤ºå‡ºçš„é¢œè‰²ï¼Œåœ¨ CMYK æ¨¡å¼ä¸‹å¯èƒ½æ ¹æœ¬æ²¡æœ‰å¯¹åº”çš„é¢œè‰²ï¼Œè¿™ä¼šå¯¼è‡´é£å…‰æ‘„å½±ä¸­ä¸€äº›å¸¸è§çš„ç»¿è‰²æ— æ³•åœ¨å°åˆ·æ—¶ä½“ç°ã€‚å› æ­¤ï¼Œä¼ ç»Ÿå°åˆ·è¡Œä¸šå¯¹å¾®è½¯å’Œ Adobe ç­‰å…¬å¸åˆ¶å®šçš„ sRGB æ ‡å‡†æå‡ºäº†å¼ºçƒˆçš„åå¯¹å’Œè´¨ç–‘ã€‚</p>
<p>é¢å¯¹å°åˆ·ä¸šå·¨å¤´çš„è”åˆæŠµåˆ¶å’ŒæŠ—è®®ï¼Œå¾®è½¯å¹¶æ²¡æœ‰è®¤æ€‚ï¼Œä»–ä»¬ä¹‹é—´çš„çº çº·æˆ˜äº‰ç»´æŒäº†ä¸‰å¹´ä¹‹ä¹…ï¼Œæœ€ååœ¨ Adobe å…¬å¸çš„è°ƒè§£ä¸‹ï¼Œåˆ¶å®šäº† Adobe RGB è‰²åŸŸï¼Œè¿™ä¸€æ›´å¹¿é˜”çš„è‰²åŸŸå®Œç¾åœ°åŒ…å«äº†å°åˆ·æ‰€éœ€çš„æ‰€æœ‰é¢œè‰²ã€‚</p>
<p>ä½†æ˜¯æ‘„å½±åŠå°åˆ·è¡Œä¸šçš„ä»ä¸šè€…æ¯•ç«Ÿæ˜¯å°‘æ•°ï¼Œç»å¤§å¤šæ•°çš„äº’è”ç½‘ç”¨æˆ·å¹¶ä¸éœ€è¦å…³å¿ƒ CMYK è¿™ç§å°åˆ·æ—¶æ‰ä¼šé‡åˆ°çš„è‰²å½©æ¨¡å¼ï¼Œä¼ ç»Ÿçš„ sRGB ä¾æ—§å¯ä»¥æ»¡è¶³ç½‘ä¸Šå†²æµªçš„å…¨éƒ¨éœ€æ±‚ã€‚</p>
<p>æ­¤å¤–ï¼Œæ›´å¹¿è‰²åŸŸçš„å›¾ç‰‡ä¹Ÿéœ€è¦æ›´ä¸“ä¸šæ›´è´µçš„æ˜¾ç¤ºå™¨ã€æ­é…ä¸“ä¸šè½¯ä»¶æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå³ä¾¿åˆ°äº†ä»Šå¤©ï¼ŒsRGB åœ¨äº’è”ç½‘é¢†åŸŸä¾æ—§å æ®ç»å¯¹ç»Ÿæ²»åœ°ä½ã€‚</p>
<blockquote>
<p><strong>Tips: æ˜¾ç¤ºå™¨çš„è‰²åŸŸ</strong></p>
<p>å½“ä½ æŒ‘é€‰æ˜¾ç¤ºå™¨çš„æ—¶å€™ï¼Œå¯èƒ½å¸¸å¸¸ä¼šå¬åˆ°è¯¸å¦‚â€œ120% sRGBâ€ã€â€œ97% sRGBâ€ç­‰å…³é”®è¯ï¼Œè¿™é‡Œçš„ç™¾åˆ†æ¯”ï¼Œå®é™…ä¸Šå°±æ˜¯æ˜¾ç¤ºå™¨è‰²åŸŸå  sRGB è‰²åŸŸçš„èŒƒå›´ã€‚å¦‚æœä¸è€ƒè™‘ä¸“ä¸šè®¾è®¡åœºæ™¯ï¼Œç†è®ºä¸Šåªè¦æ˜¾ç¤ºå™¨èƒ½è¾¾åˆ° 100% çš„ sRGB è‰²åŸŸï¼Œä¾¿å¯ä»¥æ»¡è¶³ä½ æ—¥å¸¸ä¸Šç½‘çš„å…¨éƒ¨éœ€æ±‚</p>
<p>è€Œç±»ä¼¼â€œAdobe RGB 100% è‰²åŸŸâ€ã€â€œP3 å¹¿è‰²åŸŸâ€ ã€â€œæœæ¯”è§†ç•Œâ€ç­‰æ›´å¹¿é˜”çš„è‰²åŸŸï¼Œéšç€æ—¶ä»£çš„å‘å±•ä¹Ÿé€æ¸æœ‰äº†æ›´å¤šçš„æ—¥å¸¸ä½¿ç”¨åœºæ™¯ï¼Œå¦‚ B ç«™ç°åœ¨å°±æ”¯æŒ HDR æœæ¯”è§†ç•Œçš„è§†é¢‘æ’­æ”¾ï¼›åœ¨å¤§å‹å•æœºæ¸¸æˆé¢†åŸŸï¼Œä¹Ÿè¶Šæ¥è¶Šå¤šåœ°æ”¯æŒçš„ P3 è‰²åŸŸã€‚</p>
</blockquote>
<h2 data-id="heading-11">å››ã€ä¸ºä»€ä¹ˆæœ‰è‰²å·®ï¼Ÿ</h2>
<p>äº†è§£äº†è‰²å½©å­¦çš„åŸºç¡€çŸ¥è¯†åï¼Œæˆ‘ä»¬é‡æ–°å®¡è§†ä¸€ä¸‹æœ€å¼€å§‹çš„é‚£ä¸ªé—®é¢˜ï¼š</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œå°åˆ·å‚çš„å°åˆ·æœºï¼Œæœ€ç»ˆå°åˆ·ä¸€å®šæ˜¯ä½¿ç”¨ CMYK å››ç§é¢œè‰²çš„å¢¨æ°´è¿›è¡Œå°åˆ·çš„ï¼Œå› æ­¤å½“æˆ‘ä»¬ç»™å‡º RGB åŸå›¾æ—¶ï¼Œå¿…ç„¶ç»è¿‡äº†å°åˆ·å‚çš„ä¸€æ¬¡è½¬æ¢ï¼Œè¿™å¯èƒ½å‘ç”Ÿåœ¨æœºå™¨å†…éƒ¨ï¼Œä¹Ÿå¯èƒ½å‘ç”Ÿåœ¨å°åˆ·å‚çš„å†…éƒ¨ç³»ç»Ÿæµç¨‹ä¸­ï¼›</p>
<p>è€Œè®¾è®¡å¸ˆæ‰‹åŠ¨è½¬æ¢è‰²å½©ç©ºé—´åï¼Œå°åˆ·æ²¡æœ‰è‰²å·®ï¼Œè¿™å°±è¯´æ˜ï¼Œè‰²å·®çš„æ ¹æºå°±åœ¨äºå°åˆ·å‚çš„è¿™ä¸€æ¬¡è½¬æ¢ï¼</p>
<p>ç°é˜¶æ®µï¼Œæƒ³è¦å°† RGB è½¬ä¸º CMYKï¼Œé€šå¸¸æœ‰ä¸¤ç§è½¬æ¢æ–¹å¼ï¼š</p>
<h3 data-id="heading-12">1. åŸºäºåŸºç¡€æ•°å­¦å…¬å¼</h3>
<p>è¿™æ˜¯æœ€ç®€å•ã€æœ€åŸºç¡€çš„ç®—æ³•ï¼Œé€šå¸¸ç”¨äºä¸è¦æ±‚é¢œè‰²ç²¾ç¡®åº¦çš„åœºæ™¯ã€‚</p>
<p><strong>è½¬æ¢æ­¥éª¤ï¼š</strong></p>
<ol>
<li><strong>å½’ä¸€åŒ–ï¼š</strong> å°† R, G, B çš„å€¼ï¼ˆ0-255ï¼‰é™¤ä»¥ <code>255</code>ï¼Œä½¿å…¶èŒƒå›´å˜ä¸º <code>0ï½1</code>ã€‚</li>
<li><strong>è®¡ç®—é»‘è‰²ï¼ˆKï¼‰ï¼š</strong><code>K = 1 - Max(R, G, B)</code></li>
<li><strong>è®¡ç®— C, M, Yï¼š</strong>
<ul>
<li><code>C = (1 - R - K) / (1 - K)</code></li>
<li><code>M = (1 - G - K) / (1 - K)</code></li>
<li><code>Y = (1 - B - K) / (1 - K)</code></li>
</ul>
</li>
</ol>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœ K = 1ï¼ˆçº¯é»‘ï¼‰ï¼Œåˆ™ C, M, Y å‡ä¸º <code>0</code>ã€‚</p>
<p>è¿™ç§ç®—æ³•çš„æ€è·¯å¾ˆæœ´ç´ ï¼šæ—¢ç„¶ RGB æ˜¯åŠ è‰²ï¼ŒCMYK æ˜¯å‡è‰²ï¼Œé‚£å°±é€šè¿‡æ•°å­¦å…³ç³»åšä¸ªæ˜ å°„ã€‚ç†è®ºä¸Šç¡®å®å¯ä»¥å®Œæˆè½¬æ¢ï¼Œä½†é—®é¢˜åœ¨äºâ€”â€”è¿™ç§çº¯æ•°å­¦è½¬æ¢å®Œå…¨ä¸è€ƒè™‘ç°å®ä¸–ç•Œçš„è®¾å¤‡å·®å¼‚ã€‚</p>
<p>åŒæ ·æ˜¯æ˜¾ç¤ºä¸€ä¸ªçº¢è‰² <code>RGB(255, 0, 0)</code>ï¼Œä¸åŒå“ç‰Œã€ä¸åŒå‹å·çš„æ˜¾ç¤ºå™¨ï¼Œå®é™…å‘å‡ºçš„å…‰çš„æ³¢é•¿å’Œå¼ºåº¦éƒ½ä¸ä¸€æ ·ã€‚ä½ çš„æ˜¾ç¤ºå™¨å¯èƒ½åå†·è‰²è°ƒï¼Œæˆ‘çš„æ˜¾ç¤ºå™¨å¯èƒ½åæš–è‰²è°ƒï¼Œä½†åœ¨ç®—æ³•çœ¼é‡Œï¼Œå®ƒä»¬éƒ½æ˜¯ <code>RGB(255, 0, 0)</code>ã€‚</p>
<p>åŒæ ·æ˜¯å°åˆ· <code>C0 M100 Y100 K0</code>ï¼Œä¸åŒçš„æ‰“å°æœºã€ä¸åŒçš„çº¸å¼ ã€ä¸åŒçš„æ²¹å¢¨ï¼Œå°å‡ºæ¥çš„é¢œè‰²ä¹Ÿåƒå·®ä¸‡åˆ«ã€‚è¿™å®¶å°åˆ·å‚çš„çº¢è‰²æ²¹å¢¨åæ©™ï¼Œé‚£å®¶å°åˆ·å‚çš„çº¢è‰²æ²¹å¢¨åç´«ï¼Œä½†ç®—æ³•æ ¹æœ¬ä¸çŸ¥é“è¿™äº›å·®å¼‚ã€‚</p>
<p>è€Œæœ€ä»¤äººå¤´ç–¼çš„æ˜¯è‰²åŸŸæ˜ å°„é—®é¢˜â€”â€”RGB èƒ½æ˜¾ç¤ºçš„æŸäº›é²œè‰³é¢œè‰²ï¼Œæ¯”å¦‚è§å…‰ç»¿ <code>RGB(0, 255, 0)</code>ï¼Œåœ¨ CMYK çš„è‰²åŸŸé‡Œæ ¹æœ¬æ²¡æœ‰å¯¹åº”çš„é¢œè‰²ã€‚ç®—æ³•ä¼šå¼ºè¡ŒæŠŠå®ƒæ˜ å°„æˆ <code>C100 M0 Y100 K0</code>ï¼Œä½†å°å‡ºæ¥çš„ç»¿è‰²ä¼šæ˜æ˜¾å‘ç°ã€å‘æš—ï¼Œå®Œå…¨ä¸æ˜¯ä½ åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„é‚£ç§é²œè‰³çš„ç»¿ã€‚</p>
<p>çº¯ç®—æ³•è½¬æ¢å‡è®¾æ‰€æœ‰è®¾å¤‡éƒ½æ˜¯"æ ‡å‡†"çš„ï¼Œå‡è®¾è‰²åŸŸå¯ä»¥å®Œç¾æ˜ å°„ï¼Œä½†ç°å®ä¸–ç•Œé‡Œè¿™ä¸¤ä¸ªå‡è®¾éƒ½ä¸æˆç«‹ã€‚</p>
<h3 data-id="heading-13">2. åŸºäº ICC ç‰¹æ€§æ–‡ä»¶</h3>
<p>è¿™æ˜¯ç›®å‰è®¾è®¡è½¯ä»¶ï¼ˆå¦‚ Adobe Illustratorã€Photoshop ç­‰ï¼‰å’Œä¸“ä¸šå°åˆ·æµç¨‹é‡‡ç”¨çš„æ ‡å‡†æ–¹å¼ã€‚</p>
<p>æ­£å¦‚ä¸Šä¸€èŠ‚ä¸­æåˆ°ï¼ŒRGB å’Œ CMYK éƒ½æœ‰å„è‡ªçš„è‰²å½©ç©ºé—´ï¼Œæ˜¾ç¤ºå™¨å’Œæ‰“å°æœºä¹‹é—´å„è¯´å„è¯ï¼Œä½ åœ¨æ˜¾ç¤ºå™¨ä¸Šçœ‹åˆ°çš„é¢œè‰²ï¼Œæ‰“å°å‡ºæ¥å¯èƒ½æ˜¯å¦ä¸€ä¸ªé¢œè‰²ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ1993 å¹´ï¼ŒåŒ…æ‹¬ Adobeã€Appleã€Microsoftã€Sun ç­‰å…«å®¶ç§‘æŠ€å…¬å¸è”åˆæˆç«‹äº†å›½é™…è‰²å½©è”ç›Ÿ <code>ICCï¼ˆInternational Color Consortiumï¼Œå›½é™…è‰²å½©è”ç›Ÿï¼‰</code>ï¼Œç›®æ ‡å°±æ˜¯å»ºç«‹ä¸€ä¸ªå¼€æ”¾ã€è·¨å¹³å°çš„è‰²å½©ç®¡ç†æ ‡å‡†ã€‚ICC é…ç½®æ–‡ä»¶è§„èŒƒä¹Ÿç”±æ­¤è¯ç”Ÿã€‚</p>
<p><del>ICC æ¥è‰²å½©ç®¡ç†ç•ŒåªåŠä¸‰ä»¶äº‹ï¼šå…¬å¹³ï¼å…¬å¹³ï¼è¿˜æ˜¯ä»–**çš„å…¬å¹³ï¼</del></p>
<p>ä¸å¥½æ„æ€ä¸²å°äº†ï¼Œä½†æ˜¯å…¶å®æŸç§æ„ä¹‰ä¸Šæ¥è¯´ä¹Ÿæ²¡é”™ã€‚ICC çš„å‡ºç°æ˜¯ä¸ºäº†ç¡®ä¿"æ‰€è§å³æ‰€å¾—"ï¼Œå®ƒçš„æœ€ç»ˆç›®æ ‡æ˜¯è®©ä½ åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„çº¢è‰²ï¼Œåœ¨æ‰“å°çº¸ä¸Šä¹Ÿæ˜¯åŒæ ·çš„çº¢è‰²ã€‚</p>
<h4 data-id="heading-14">PCSï¼šè‰²å½©è½¬æ¢çš„ä¸­é—´äºº</h4>
<p>ä¸ºäº†åšåˆ°â€œæ‰€è§å³æ‰€å¾—â€ï¼ŒICC ç³»ç»Ÿå¼•å…¥äº†ä¸€ä¸ªä¸­é—´è‰²å½©ç©ºé—´ <code>PCSï¼ˆProfile Connection Spaceï¼Œç‰¹æ€§è¿æ¥ç©ºé—´ï¼‰</code>ã€‚è¿™æ˜¯ä¸€ä¸ªè®¾å¤‡æ— å…³çš„ã€ä¸­ä»‹çš„ã€ä¸äººçœ¼æ„ŸçŸ¥ç›¸å…³çš„è‰²å½©ç©ºé—´ï¼ˆé€šå¸¸ä½¿ç”¨å‰é¢æåˆ°çš„ CIE XYZ æˆ–è€…åŸºäºå…¶æ¼”åŒ–å‡ºçš„ CIE Lab è‰²å½©ç©ºé—´ï¼‰ã€‚</p>
<p>æœ‰äº† ICC è§„èŒƒä¹‹åï¼Œæ¯ä¸ªè®¾å¤‡çš„ ICC æ–‡ä»¶éƒ½æ˜¯é€šè¿‡ä¸“ä¸šä»ªå™¨å®é™…æµ‹é‡å‡ºæ¥çš„ï¼š</p>
<ul>
<li><strong>æ˜¾ç¤ºå™¨çš„ ICC æ–‡ä»¶</strong>ï¼šå‚å•†ç”¨æ ¡è‰²ä»ªæµ‹é‡è¿™å°æ˜¾ç¤ºå™¨ï¼Œè®°å½•ä¸‹ <code>RGB(255, 0, 0)</code> åœ¨è¿™å°æ˜¾ç¤ºå™¨ä¸Šå®é™…å‘å‡ºçš„å…‰å¯¹åº”çš„ Lab å€¼ï¼ˆæ¯”å¦‚ <code>Lab(53.23, 80.11, 67.22)</code>ï¼‰</li>
</ul>
<blockquote>
<p>åœ¨ä½ ç³»ç»Ÿçš„æ˜¾ç¤ºå™¨è®¾ç½®ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å½“å‰æ˜¾ç¤ºå™¨çš„é¢œè‰²æè¿°æ–‡ä»¶ï¼Œå®ƒé€šå¸¸ä»¥ä½ çš„æ˜¾ç¤ºå™¨å‹å·å‘½å</p>

</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/971a17576d9946aa93349275c4d48e39~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1446&amp;h=1400&amp;s=256165&amp;e=png&amp;b=e3e3e3" alt="" loading="lazy"/></p>
<blockquote>
<p>è¿™ä¸ªæ–‡ä»¶å°±æ˜¯æ˜¾ç¤ºå™¨å‚å•†é’ˆå¯¹è¿™ä¸€å‹å·åˆ¶ä½œçš„ ICC æ–‡ä»¶ï¼Œå…¶å†…éƒ¨åŒ…å«äº†æ•´å°æ˜¾ç¤ºå™¨æ‰€èƒ½å±•ç¤ºçš„å…¨éƒ¨é¢œè‰²ï¼Œé€šå¸¸ä¼šéšç€é©±åŠ¨æ–‡ä»¶è‡ªåŠ¨ä¸‹è½½åˆ°ä½ çš„ç”µè„‘ä¸­ã€‚</p>
<p>å¤§å¤šæ•°å‚å•†æ‰€æä¾›çš„åªæ˜¯ä¸€ä¸ªé€šç”¨ ICC æ–‡ä»¶ï¼Œå®é™…ä¸Šï¼Œå“ªæ€•æ˜¯ç›¸åŒå‚å•†ã€ç›¸åŒå‹å·çš„æ˜¾ç¤ºå™¨ï¼Œå—å“æ§ã€åŸæ–™æ‰¹æ¬¡åŠä½¿ç”¨è€åŒ–ç­‰å› ç´ å½±å“ï¼Œå…¶æ˜¾ç¤ºæ•ˆæœä¹Ÿä¼šæœ‰ç»†å¾®çš„å·®åˆ«ã€‚åœ¨æŸäº›å¯¹è‰²å½©å‡†ç¡®æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åœºæ™¯ä¸‹ï¼ˆå¦‚å½±è§†ã€å¹³é¢è®¾è®¡ç­‰ï¼‰é€šå¸¸è¿˜éœ€è¦é’ˆå¯¹å•å°è®¾å¤‡è¿›è¡Œé¢œè‰²æ ¡å‡†ï¼Œå¹¶ä¸”åˆ¶ä½œä¸€ä»½çŸ«æ­£åçš„ ICC æˆ– LUTï¼Œæ‰èƒ½å¤Ÿä¿è¯æœ€ç»ˆäº§å‡ºçš„å›¾åƒå’Œè‚‰çœ¼çœ‹åˆ°çš„ä¸€è‡´ã€‚</p>
</blockquote>
<ul>
<li><strong>å°åˆ·æœºçš„ ICC æ–‡ä»¶</strong>ï¼šå°åˆ·å‚ç”¨åˆ†å…‰å…‰åº¦è®¡æµ‹é‡ï¼Œè®°å½•ä¸‹ <code>C0 M100 Y100 K0</code> åœ¨è¿™å°å°åˆ·æœºã€è¿™ç§çº¸å¼ ã€è¿™ç§æ²¹å¢¨ä¸Šå®é™…å°å‡ºæ¥çš„é¢œè‰²å¯¹åº”çš„ Lab å€¼ï¼ˆæ¯”å¦‚ <code>Lab(47.82, 68.30, 48.05)</code>ï¼‰</li>
</ul>
<p>æ¯ä¸ªè®¾å¤‡çš„ ICC æ–‡ä»¶éƒ½æè¿°äº†è¯¥è®¾å¤‡è‰²å½©ç©ºé—´ä¸ PCS ä¹‹é—´çš„è½¬æ¢å…³ç³»ï¼Œå°±åƒä¸åŒå›½å®¶çš„è¯­è¨€éƒ½å¯ä»¥é€šè¿‡è‹±è¯­ä½œä¸ºä¸­ä»‹è¿›è¡Œç¿»è¯‘ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œå½“ä½ åœ¨æ˜¾ç¤ºå™¨ä¸Šçœ‹åˆ°ä¸€å¼ ç…§ç‰‡å¹¶æƒ³æ‰“å°å‡ºæ¥æ—¶ï¼Œåªè¦ç»è¿‡å¦‚ä¸‹è½¬æ¢ï¼š</p>
<ol>
<li>æ˜¾ç¤ºå™¨çš„ ICC é…ç½®æ–‡ä»¶æŠŠ RGB ä¿¡å·è½¬æ¢åˆ° Lab è‰²å½©ç©ºé—´</li>
<li>å°åˆ·æœºçš„ ICC é…ç½®æ–‡ä»¶å†æŠŠè¿™ä¸ª Lab å€¼ç¿»è¯‘æˆå°åˆ·æœºéœ€è¦çš„ CMYK ä¿¡å·</li>
</ol>
<p>å› ä¸º Lab æ˜¯åŸºäºäººçœ¼æ„ŸçŸ¥çš„ç»å¯¹è‰²å½©ç©ºé—´ï¼Œæ‰€ä»¥è¿™æ ·è½¬æ¢åï¼Œä½ åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„çº¢è‰²ï¼Œå’Œå°åˆ·å‡ºæ¥çš„çº¢è‰²ï¼Œåœ¨äººçœ¼çœ‹æ¥å°±æ˜¯åŒä¸€ä¸ªé¢œè‰²äº†ã€‚åä¹‹äº¦æ˜¯åŒç†ã€‚</p>
<h4 data-id="heading-15">æ¸²æŸ“æ„å›¾ï¼šå½“è‰²åŸŸæº¢å‡ºæ—¶æ€ä¹ˆåŠï¼Ÿ</h4>
<p>è™½ç„¶ ICC æ–‡ä»¶å¯ä»¥å®ç°ä» RGB åˆ° CMYK çš„åŒå‘æ˜ å°„ï¼Œä½†æ˜¯è¿˜è®°å¾—æˆ‘ä»¬å‰æ–‡æåˆ°çš„ RGB çš„è‰²åŸŸè¦æ¯” CMYK æ›´å¹¿å—ï¼Ÿè¿™å¿…ç„¶ä¼šå¯¼è‡´æœ‰éƒ¨åˆ† RGB é¢œè‰²ï¼Œæ— æ³•å’Œ CMYK é¢œè‰²è¿›è¡Œæ˜ å°„ã€‚è¿™æ—¶å°±è½®åˆ° <code>æ¸²æŸ“æ„å›¾ï¼ˆRendering Intentï¼‰</code> ç™»åœºäº†ã€‚</p>
<p>åœ¨ ICC è§„èŒƒä¸­ï¼Œä¸€å…±æœ‰å››ç§æ³•å®šæ„å›¾ï¼Œå®ƒä»¬å†³å®šäº†å¦‚ä½•å¤„ç†è‰²åŸŸå¤–çš„é¢œè‰²ã€‚</p>
<h5 data-id="heading-16">å¯æ„ŸçŸ¥æ„å›¾ï¼ˆPerceptualï¼‰</h5>
<p>å¯æ„ŸçŸ¥æ„å›¾çš„æ ¸å¿ƒåŸç†æ˜¯ç­‰æ¯”ä¾‹å‹ç¼©ï¼Œä»¥ RGB è½¬ CMYK ä¸ºä¾‹ï¼Œå®ƒå°† RGB çš„è‰²åŸŸç­‰æ¯”ä¾‹ç¼©æ”¾åˆ° CMYK çš„è‰²åŸŸï¼Œé¢œè‰²ä¹‹é—´çš„ç›¸å¯¹å…³ç³»ï¼ˆå±‚æ¬¡ã€è¿‡æ¸¡ï¼‰ä¿ç•™å¾—æ¯”è¾ƒå¥½ã€‚è™½ç„¶æ•´ä½“é¥±å’Œåº¦å¯èƒ½ä¼šç¨å¾®ä¸‹é™ï¼Œä½†å›¾ç‰‡çœ‹èµ·æ¥éå¸¸è‡ªç„¶ï¼Œä¸ä¼šæœ‰è‰²å—æ–­å±‚ã€‚</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3641e456f5d74d76921e8ef9bd281403~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=3780&amp;h=1417&amp;s=517336&amp;e=jpg&amp;b=fbbe2e" alt="" loading="lazy"/></p>
<blockquote>
<p>å¯ä»¥çœ‹å‡ºï¼Œå›¾ç‰‡è™½ç„¶æ•´ä½“é¥±å’Œåº¦ä¸‹é™ï¼Œä½†æ˜¯é¢œè‰²æ¸å˜è¿‡æ¸¡è¢«ä¿ç•™å¾—å¾ˆå¥½ï¼Œä¸å­˜åœ¨æ˜æ˜¾çš„æ–­å±‚ï¼Œæ–‡æœ¬é¢œè‰²ä¹Ÿä¾æ—§å¯ä»¥è¾¨è¯†ã€‚</p>
</blockquote>
<h5 data-id="heading-17">ç›¸å¯¹æ¯”è‰²æ„å›¾ï¼ˆRelative Colorimetricï¼‰</h5>
<p>ç›¸å¯¹æ¯”è‰²æ„å›¾çš„æ ¸å¿ƒé€»è¾‘æ˜¯ç²¾å‡†å¯¹é½ + ç¡¬æ€§è£å‰ªï¼ŒåŒæ ·ä»¥ RGB è½¬ CMYK ä¸ºä¾‹ï¼Œå¦‚æœé¢œè‰²åœ¨ CMYK çš„è‰²åŸŸå†…ï¼Œå°±ä¸ä¼šåšä»»ä½•æ”¹åŠ¨ï¼›å¦‚æœé¢œè‰²è¶…å‡ºäº† CMYK çš„è‰²åŸŸå°±ä¼šç›´æ¥æˆªå–ä¸º CMYK çš„è¾¹ç¼˜è‰²å½©ã€‚</p>
<p>è¿™ç§æ–¹å¼è½¬æ¢çš„é¢œè‰²æœ€"å‡†"ï¼Œå› ä¸ºå®ƒå°½å¯èƒ½ä¿æŒäº†å¤§éƒ¨åˆ†åŸå§‹æ•°å€¼ã€‚ä½†åœ¨æé²œè‰³ã€ææš—çš„åŒºåŸŸï¼Œå¯èƒ½ä¼šå‡ºç°"å¹¶è‰²"ï¼ˆClippingï¼‰ç°è±¡ï¼Œå³åŸæœ¬æœ‰å±‚æ¬¡çš„é¢œè‰²å˜æˆäº†ç›¸åŒçš„é¢œè‰²ï¼Œä¸¢å¤±äº†å±‚æ¬¡æ„Ÿã€‚</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c10fcb06f87c4d658f25652cfed06e60~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=3780&amp;h=1417&amp;s=561217&amp;e=jpg&amp;b=fdb82f" alt="" loading="lazy"/></p>
<blockquote>
<p>å¯ä»¥çœ‹å‡ºï¼Œå›¾ç‰‡åœ¨ä¸­éƒ¨é¢œè‰²æ²¡æœ‰æº¢å‡ºçš„éƒ¨åˆ†ä¿æŒäº†ç›¸åŒçš„è‰²å½©ï¼Œä½†åœ¨ä¸¤ä¾§å‡ºç°äº†è¾ƒä¸ºæ˜æ˜¾çš„è‰²åŸŸæ–­å±‚å’Œè¾¹ç•Œã€‚è¾¹ç•Œå¤–é¢œè‰²çš„æ¸å˜æ•ˆæœå·²è¢«æˆªæ–­ï¼Œä¸”å’ŒåŒæ ·è¶…å‡ºè‰²åŸŸèŒƒå›´çš„æ–‡æœ¬é¢œè‰²è¢«å‹ç¼©æˆäº†ç›¸åŒçš„é¢œè‰²ï¼Œå¯¼è‡´æ–‡æœ¬æ— æ³•è¾¨è¯†ã€‚</p>
</blockquote>
<p>æ­¤å¤–è¿˜æœ‰<strong>é¥±å’Œåº¦æ„å›¾ï¼ˆSaturationï¼‰å’Œç»å¯¹æ¯”è‰²æ„å›¾ï¼ˆAbsolute Colorimetricï¼‰</strong>ï¼Œç”±äºç¯‡å¹…é™åˆ¶è¿™é‡Œå°±ä¸å¤šåšèµ˜è¿°äº†ã€‚</p>
<h4 data-id="heading-18">é»‘åœºè¡¥å¿ï¼šä¿ç•™æš—éƒ¨ç»†èŠ‚</h4>
<p>å¯æ„ŸçŸ¥æ„å›¾ä¸ºäº†è®©æ‰€æœ‰é¢œè‰²éƒ½èƒ½å¡è¿›ç›®æ ‡è‰²åŸŸï¼Œä¼šç§»åŠ¨æ‰€æœ‰é¢œè‰²ï¼ˆç”šè‡³æ˜¯é‚£äº›æœ¬æ¥å°±åœ¨è‰²åŸŸå†…çš„é¢œè‰²ï¼‰ã€‚è¿™æ„å‘³ç€ä½ çœ‹åˆ°çš„é¢œè‰²è™½ç„¶â€œå’Œè°â€ï¼Œä½†å·²ç»ä¸å†æ˜¯åŸå§‹å®šä¹‰çš„é‚£ä¸ªå‡†ç¡®çš„æ•°å€¼äº†ï¼Œè‰²å·®ä¼šæ¯”è¾ƒæ˜æ˜¾ã€‚</p>
<p>è€Œç›¸å¯¹æ¯”è‰²è™½ç„¶å°½å¯èƒ½å¤šåœ°ä¿è¯äº†è‰²å‡†ï¼Œä½†æ˜¯é¢å¯¹è‰²åŸŸå¤–çš„é¢œè‰²ï¼ˆå°¤å…¶æ˜¯æ·±è‰²ï¼‰æ—¶åˆææ˜“ä¸¢å¤±ç»†èŠ‚</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a4cd7062380b4654924fe0f97343019b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2972&amp;h=1981&amp;s=365325&amp;e=jpg&amp;b=f3e6e1" alt="" loading="lazy"/></p>
<blockquote>
<p>å·¦å›¾ä¸º RGB åŸå›¾ï¼Œå³å›¾ä¸º CMYK ä½¿ç”¨ç›¸å¯¹æ¯”è‰²æ„å›¾ï¼Œä¸å¼€å¯é»‘åœºè¡¥å¿</p>
<p>å¯ä»¥çœ‹å‡ºç™½æ¡†ä¸­è“è“çš„æš—åŒºç»†èŠ‚å·²ç»å®Œå…¨ä¸¢å¤±</p>
</blockquote>
<p>é‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬åœ¨ä¿è¯è‰²å‡†çš„åŒæ—¶ï¼Œå°½å¯èƒ½å¤šåœ°ä¿ç•™æš—éƒ¨ç»†èŠ‚å‘¢ï¼Ÿ</p>
<p><strong>æœ‰çš„å…„å¼Ÿï¼Œæœ‰çš„</strong>ï¼Œè¿™é—¨æŠ€æœ¯å°±æ˜¯<code>é»‘åœºè¡¥å¿ï¼ˆBlack Point Compensationï¼‰</code>ã€‚</p>
<p>é»‘åœºè¡¥å¿çš„åŸç†ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å°†åŸå›¾çš„æš—åŒºè¿›è¡Œç¼©æ”¾ï¼šå®ƒä¼šå…ˆæ‰¾åˆ°æºæ–‡ä»¶ï¼ˆRGBï¼‰ä¸­æœ€é»‘çš„ç‚¹ï¼Œå†æ‰¾åˆ°ç›®æ ‡è¾“å‡ºï¼ˆCMYKï¼‰èƒ½è¾¾åˆ°çš„æœ€é»‘çš„ç‚¹ï¼Œå¹¶å°†æ•´ä¸ªç”»é¢çš„äº®åº¦èŒƒå›´è¿›è¡Œç­‰æ¯”ä¾‹çš„"ç¼©æ”¾"ï¼Œè®© RGB çš„é»‘ç‚¹åˆšå¥½å¯¹åº”ä¸Š CMYK çš„é»‘ç‚¹ã€‚</p>
<p>å¦‚æ­¤ä¸€æ¥ï¼ŒåŸæœ¬æ·±ç°å’Œå…¨é»‘ä¹‹é—´çš„ç›¸å¯¹æ¯”ä¾‹å°±è¢«ä¿ç•™äº†ä¸‹æ¥ï¼Œè™½ç„¶æ•´ä½“çœ‹èµ·æ¥å¯èƒ½æ²¡é‚£ä¹ˆæ·±é‚ƒäº†ï¼Œä½†æš—éƒ¨çš„ç»†èŠ‚çº¹ç†è¢«æˆåŠŸ"æŒ¤"è¿›äº† CMYK èƒ½è¡¨è¾¾çš„èŒƒå›´å†…ã€‚</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/750c39c49a904ef383d61e7c6c62574c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2972&amp;h=1981&amp;s=4558072&amp;e=jpg&amp;b=f2e6e1" alt="" loading="lazy"/></p>
<blockquote>
<p>å¼€å¯äº†é»‘åœºè¡¥å¿åï¼Œå¯ä»¥çœ‹å‡ºæš—åŒºç»†èŠ‚è¢«å®Œå¥½åœ°ä¿ç•™äº†ä¸‹æ¥</p>
</blockquote>
<p><strong>å¹¶éæ‰€æœ‰ ICC æ–‡ä»¶çš„å¯æ„ŸçŸ¥æ„å›¾éƒ½å®Œç¾</strong></p>
<p>é™¤äº†è§£å†³ç›¸å¯¹æ¯”è‰²æ„å›¾çš„æš—éƒ¨ç»†èŠ‚ä¸¢å¤±ä»¥å¤–ï¼ŒBFC ä¹ŸåŒæ ·å¯ä»¥ç»™å¯æ„ŸçŸ¥æ„å›¾å…œåº•ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼ŒICC æ–‡ä»¶æ˜¯ç”±å‚å•†è‡ªè¡Œåˆ¶ä½œçš„ï¼Œé‚£å¿…ç„¶ä¼šå‡ºç°ï¼šæœ‰äº›å‚å•†çš„â€œå¯æ„ŸçŸ¥â€ç®—æ³•åšå¾—å¾ˆå¥½ï¼Œæš—éƒ¨è¿‡æ¸¡è‡ªç„¶ï¼›è€Œæœ‰äº›å‚å•†çš„ç®—æ³•å´è¿‡äºä¿å®ˆï¼Œæˆ–è€…åœ¨å¤„ç†æŸäº›ç‰¹å®šé¢œè‰²æ—¶äº§ç”Ÿäº†æ„æ–™ä¹‹å¤–çš„åè‰²ã€‚</p>
<p>è€Œ BPC æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„ç®—æ³•ï¼ˆç”± Adobe æå‡ºå¹¶è´¡çŒ®ç»™ ICCï¼‰ã€‚å®ƒä¸ä¾èµ–äº ICC å†…éƒ¨å¤æ‚çš„æŸ¥è¡¨æ˜ å°„ï¼Œè€Œæ˜¯åœ¨è½¬æ¢é˜¶æ®µè¿›è¡Œä¸€æ¬¡æ•°å­¦ä¸Šçš„ç«¯ç‚¹å¯¹é½ã€‚å› æ­¤ï¼ŒBPC æä¾›äº†ä¸€å±‚é¢å¤–çš„ä¿é™©ï¼Œç¡®ä¿æ— è®ºä½ ä½¿ç”¨å“ªç§æ„å›¾ï¼Œæœ€é»‘çš„ç‚¹å§‹ç»ˆèƒ½å¯¹åº”åˆ°è¾“å‡ºè®¾å¤‡çš„æœ€é»‘ç‚¹ã€‚</p>
<blockquote>
<p>åœ¨ Photoshopã€Illustrator ç­‰è½¯ä»¶ä¸­ï¼Œé€šå¸¸å»ºè®®é»˜è®¤å¼€å¯é»‘åœºè¡¥å¿ï¼›è€Œéƒ¨åˆ†å›¾åƒå¤„ç†å·¥å…·åˆ™å¯èƒ½ä¸æä¾›è¿™ä¸€åŠŸèƒ½ã€‚</p>
</blockquote>
<h2 data-id="heading-19">äº”ã€å¦‚ä½•è§£å†³ï¼Ÿ</h2>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å‡ ä¹å¯ä»¥ç¡®å®šäº†è‰²å·®çš„æ ¹æºï¼ŒåŸå› æ— éä»¥ä¸‹å‡ ä¸ªï¼š</p>
<ul>
<li>å°åˆ·å‚æ ¹æœ¬ç›´æ¥ç”¨çš„ç®—æ³•å…¬å¼è½¬æ¢</li>
<li>å°åˆ·å‚çš„è½¬æ¢å·¥å…·ä¸æ”¯æŒæ¸²æŸ“æ„å›¾å’Œé»‘åœºè¡¥å¿</li>
<li>å°åˆ·å‚çš„æ¸²æŸ“æ„å›¾å’Œé»‘åœºè¡¥å¿é€‰é”™äº†</li>
<li>å°åˆ·å‚ç”¨çš„ ICC æ–‡ä»¶ä¸å¯¹</li>
</ul>
<p>ä½†æ˜¯ä¸ç®¡åˆ°åº•æ˜¯å“ªä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éƒ½æœ‰ä¸€ä¸ªä¸‡èƒ½çš„è§£æ³•â€”â€”å°† RGB åŸå›¾æŒ‰ç…§è®¾è®¡å¸ˆçš„è¦æ±‚ä¸€æ¯”ä¸€è½¬å¥½åï¼Œå†å‘ç»™å°åˆ·å‚ã€‚æ¯•ç«Ÿè®¾è®¡å¸ˆè½¬å‡ºæ¥çš„å‘è¿‡å»ï¼Œå°å‡ºæ¥å°±æ˜¯å¯¹çš„å˜›ã€‚</p>
<p>ä¾è‘«èŠ¦ç”»ç“¢ï¼Œå’Œè®¾è®¡å¸ˆä¸€ç•ªæ²Ÿé€šä¹‹åï¼Œæˆ‘ä»¬ç¡®å®šäº†è½¬æ¢çš„è¿‡ç¨‹ä¸ç›®æ ‡ï¼š</p>
<ul>
<li>RGB åŸå›¾ï¼šICC æ–‡ä»¶ä½¿ç”¨æµè§ˆå™¨å†…ç½®çš„ <code>sRGB IEC61966-2.1</code>ï¼Œè¿™æ˜¯ Canvas å¯¼å‡ºå›¾ç‰‡çš„é»˜è®¤é…ç½®</li>
<li>CMYK è½¬æ¢ï¼šä½¿ç”¨ Adobe Illustrator è½¯ä»¶ä¸­çš„é»˜è®¤é¢„è®¾â€”â€”<code>æ—¥æœ¬å¸¸è§„ç”¨é€”2</code>
<ul>
<li>ICC æ–‡ä»¶ï¼š<code>Japan Color 2001 Coated</code></li>
<li>æ¸²æŸ“æ„å›¾ï¼šå¯æ„ŸçŸ¥</li>
<li>é»‘åœºè¡¥å¿ï¼šå¼€</li>
</ul>
</li>
</ul>
<p>æ–¹æ¡ˆç¡®å®šäº†ï¼Œæ¥ä¸‹æ¥è¿›è¡ŒæŠ€æœ¯è°ƒç ”å§ã€‚</p>
<h2 data-id="heading-20">å…­ã€æŠ€æœ¯é€‰å‹</h2>
<p>æˆ‘ä»¬æœ€åˆçš„è°ƒç ”æ–¹å‘æ˜¯ä½¿ç”¨æœåŠ¡ç«¯è½¬æ¢ï¼Œå› ä¸ºç›¸å¯¹æˆç†Ÿçš„ npm åŒ…å¤§å¤šéƒ½åªæ”¯æŒ Node ç¯å¢ƒï¼Œè€Œéæµè§ˆå™¨ç¯å¢ƒã€‚</p>
<h3 data-id="heading-21">1. Sharp</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ‰¾åˆ°çš„æ˜¯ <code>Sharp</code> è¿™ä¸ª Node åº“ï¼Œå…¶åº•å±‚åŸºäº <code>C/C++</code> çš„ <code>libvips</code>ï¼Œå®£ç§°_æ¯”ä½¿ç”¨æœ€å¿«çš„ ImageMagick å’Œ GraphicsMagick è®¾ç½®å¿« 4 åˆ° 5 å€_ï¼Œåœ¨ Node ä¸­å¯ä»¥å¼€ç®±å³ç”¨ï¼Œä¹Ÿæ˜¯å¤§å¤šæ•° Node åº”ç”¨çš„é¦–é€‰ã€‚</p>
<p>ä½¿ç”¨ Sharp å®Œæˆ RGB åˆ° CMYK çš„è½¬æ¢éå¸¸ç®€å•ï¼Œæ ¸å¿ƒä»£ç ä»…å››è¡Œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> sharp <span class="hljs-keyword">from</span> <span class="hljs-string">'sharp'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageService</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">transformToCMYK</span>(<span class="hljs-attr">file</span>: <span class="hljs-title class_">Express</span>.<span class="hljs-property">Multer</span>.<span class="hljs-property">File</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Buffer</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">sharp</span>(file.<span class="hljs-property">buffer</span>)
      .<span class="hljs-title function_">withIccProfile</span>(<span class="hljs-string">'./profiles/JapanColor2001Coated.icc'</span>)
      .<span class="hljs-title function_">jpeg</span>({ <span class="hljs-attr">quality</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">chromaSubsampling</span>: <span class="hljs-string">'4:4:4'</span> })
      .<span class="hljs-title function_">toBuffer</span>();
  }
}
</code></pre>
<p>ç¾ä¸­ä¸è¶³çš„æ˜¯ï¼ŒSharp æ¯•ç«Ÿæ˜¯ä¸€ä¸ªç²¾ç®€çš„å›¾åƒå¤„ç†æ¡†æ¶ï¼Œå®ƒä»…æ”¯æŒçº¯ç®—æ³•å’Œçº¯ ICC æ–‡ä»¶çš„ CMYK è½¬æ¢ï¼Œå‰æ–‡æåˆ°çš„æ¸²æŸ“æ„å›¾å’Œé»‘åœºè¡¥å¿ç­‰å‡æœªæ”¯æŒã€‚</p>
<h3 data-id="heading-22">2. ImageMagick</h3>
<p><code>ImageMagick</code> æ˜¯ä¸€ä¸ªéå¸¸è€ç‰Œçš„å›¾åƒå¤„ç†æ¡†æ¶ï¼Œå ªæ¯”éŸ³è§†é¢‘é¢†åŸŸçš„ <code>ffmpeg</code>ã€‚è€Œæœ€é‡è¦çš„æ˜¯å®ƒæ”¯æŒæŒ‡å®šæ¸²æŸ“æ„å›¾å’Œå¼€å¯é»‘åœºè¡¥å¿ã€‚</p>
<p>æœ¬åœ°å®‰è£…åï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¡Œå‘½ä»¤æ¥å®ç° RGB åˆ° CMYK çš„è½¬æ¢ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">magick convert input.jpg \
  -profile <span class="hljs-string">"sRGB_v4_ICC_preference.icc"</span> \
  -intent Relative \
  -black-point-compensation \
  -profile <span class="hljs-string">"Your_Target_CMYK.icc"</span> \
  output.jpg
</code></pre>
<p>é™¤äº†ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œè°ƒç”¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ <code>magickwand.js</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäº <code>swig</code> å’Œ <code>emnapi</code> çš„åº“ï¼ŒåŒæ—¶å®ç°äº† Node.js åŸç”Ÿå’Œæµè§ˆå™¨ WASM ç‰ˆæœ¬ã€‚</p>
<p>magickwand.js çš„ Node.js åŸç”Ÿç‰ˆæœ¬ä¸“ä¸ºä¸ Express.js ç­‰æ¡†æ¶é…åˆä½¿ç”¨è€Œè®¾è®¡ï¼Œéå¸¸é€‚åˆæœåŠ¡å™¨ç«¯åº”ç”¨ã€‚å®˜æ–¹æ–‡æ¡£å®£ç§°å®ƒ_ç»è¿‡å†…å­˜æ³„æ¼è°ƒè¯•ï¼Œå¹¶ä¸”åœ¨ä»…ä½¿ç”¨å¼‚æ­¥æ–¹æ³•æ—¶ï¼Œç»ä¸ä¼šé˜»å¡äº‹ä»¶å¾ªç¯_ã€‚</p>
<p>åœ¨ Node ä¸­ä½¿ç”¨ magickwand.js ä¹Ÿéå¸¸ç®€å•ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">Logger</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@nestjs/common"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Intent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./dto/cmyk.dto"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Magick</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"magickwand.js/native"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"fs"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageService</span> {
  <span class="hljs-keyword">private</span> logger = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Logger</span>(<span class="hljs-title class_">ImageService</span>.<span class="hljs-property">name</span>);
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">profiles</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Magick</span>.<span class="hljs-property">Blob</span>&gt; = {};

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// Japan Color 2001 Coated</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadIccProfile</span>(
      <span class="hljs-string">"JapanColor2001Coated"</span>,
      <span class="hljs-string">"./profiles/JapanColor2001Coated.icc"</span>
    );
    <span class="hljs-comment">// æ™®é€šCMYKæè¿°æ–‡ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadIccProfile</span>(
      <span class="hljs-string">"Generic CMYK Profile"</span>,
      <span class="hljs-string">"./profiles/Generic CMYK Profile.icc"</span>
    );
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">loadIccProfile</span>(<span class="hljs-params">profileName: <span class="hljs-built_in">string</span>, profilePath: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">profiles</span>[profileName]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">logger</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`<span class="hljs-subst">${profileName}</span> é…ç½®æ–‡ä»¶å·²å­˜åœ¨ï¼Œè·³è¿‡åŠ è½½`</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> fullPath = path.<span class="hljs-title function_">join</span>(__dirname, profilePath);
    <span class="hljs-keyword">const</span> buffer = fs.<span class="hljs-title function_">readFileSync</span>(fullPath).<span class="hljs-property">buffer</span>;
    <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Magick</span>.<span class="hljs-title class_">Blob</span>(buffer);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">profiles</span>[profileName] = blob;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">transformToCMYK</span>(
    <span class="hljs-attr">file</span>: <span class="hljs-title class_">Express</span>.<span class="hljs-property">Multer</span>.<span class="hljs-property">File</span>,
    <span class="hljs-attr">intent</span>: <span class="hljs-title class_">Intent</span>,
    <span class="hljs-attr">blackPointCompensation</span>: <span class="hljs-built_in">boolean</span>
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Buffer</span>&gt; {
    <span class="hljs-keyword">const</span> inputBlob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Magick</span>.<span class="hljs-title class_">Blob</span>(file.<span class="hljs-property">buffer</span>.<span class="hljs-property">buffer</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>);
    <span class="hljs-keyword">const</span> inputImage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Magick</span>.<span class="hljs-title class_">Image</span>(inputBlob);
    <span class="hljs-comment">// æŒ‡å®šæ¸²æŸ“æ„å›¾</span>
    <span class="hljs-keyword">await</span> inputImage.<span class="hljs-title function_">renderingIntentAsync</span>(intent);
    <span class="hljs-comment">// è®¾ç½®é»‘åœºè¡¥å¿</span>
    <span class="hljs-keyword">await</span> inputImage.<span class="hljs-title function_">blackPointCompensationAsync</span>(blackPointCompensation);
    <span class="hljs-comment">// è½¬æ¢ ICC é…ç½®æ–‡ä»¶</span>
    <span class="hljs-keyword">await</span> inputImage.<span class="hljs-title function_">iccColorProfileAsync</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">profiles</span>[<span class="hljs-string">"JapanColor2001Coated"</span>]
    );
    <span class="hljs-comment">// æŒ‡å®šè¾“å‡ºæ ¼å¼</span>
    <span class="hljs-keyword">await</span> inputImage.<span class="hljs-title function_">magickAsync</span>(<span class="hljs-string">"JPEG"</span>);

    <span class="hljs-keyword">const</span> outputBlob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Magick</span>.<span class="hljs-title class_">Blob</span>();
    <span class="hljs-keyword">await</span> inputImage.<span class="hljs-title function_">writeAsync</span>(outputBlob);
    <span class="hljs-keyword">const</span> outputBuffer = <span class="hljs-keyword">await</span> outputBlob.<span class="hljs-title function_">dataAsync</span>();

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(outputBuffer);
  }
}
</code></pre>
<p>è¿™ä¸ªåº“çš„ä¸»è¦é—®é¢˜æ˜¯å®ƒæ²¡æœ‰ JS/TS çš„æ–‡æ¡£ï¼Œåªæœ‰ C/C++ çš„æ–‡æ¡£ï¼Œä½¿ç”¨æ—¶å¾€å¾€éœ€è¦ä½ æ ¹æ® TS çš„å‚æ•°ç±»å‹è¿è’™å¸¦çŒœå»ä¼ å‚ã€‚</p>
<h3 data-id="heading-23">3. PIL/Pillow</h3>
<p>é™¤äº†ä½¿ç”¨ Nodeï¼Œåœ¨ Python ä¸­æˆ‘ä»¬ä¹Ÿæœ‰å¾ˆå¤šçš„é€‰æ‹©ï¼Œä¾‹å¦‚ <code>PIL/Pillow</code>ï¼Œå®ƒåŒæ ·éå¸¸å¼ºå¤§æ˜“ç”¨ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image, ImageCms

img = Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">"input.jpg"</span>)
rgb_profile = ImageCms.getOpenProfile(<span class="hljs-string">"sRGB Color Space Profile.icm"</span>)
cmyk_profile = ImageCms.getOpenProfile(<span class="hljs-string">"JapanColor2001Coated.icc"</span>)

transform = ImageCms.buildTransform(
    rgb_profile,
    cmyk_profile,
    <span class="hljs-string">"RGB"</span>,
    <span class="hljs-string">"CMYK"</span>,
    renderingIntent=ImageCms.Intent.RELATIVE_COLORIMETRIC,  <span class="hljs-comment"># ç›¸å¯¹æ¯”è‰²</span>
    flags=ImageCms.Flags.BLACKPOINTCOMPENSATION,  <span class="hljs-comment"># é»‘åœºè¡¥å¿</span>
)

cmyk_img = ImageCms.applyTransform(img, transform)
cmyk_img.save(<span class="hljs-string">"output.jpg"</span>, quality=<span class="hljs-number">95</span>, icc_profile=cmyk_profile.tobytes())
</code></pre>
<h2 data-id="heading-24">ä¸ƒã€å›°éš¾é‡é‡</h2>
<p>æ—¢ç„¶æœ‰è¿™ä¹ˆå¤šç°æˆçš„åº“ï¼Œè€Œä¸”ä»£ç çœ‹ç€ä¹Ÿæ²¡å¤šå°‘ï¼Œä¸€å®šå¾ˆå¥½å®ç°å§ã€‚</p>
<p>å¾ˆå¯æƒœï¼Œç†æƒ³å¾ˆç¾å¥½ï¼Œç°å®å¾ˆæ‚²å‚¬ã€‚åœ¨å®é™…è½åœ°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ã€‚</p>
<h3 data-id="heading-25">é—®é¢˜ä¸€ï¼šCI/CD æ„å»ºå¤±è´¥</h3>
<p>æœ€å¼€å§‹ï¼Œæˆ‘ä»¬é€‰æ‹©äº†åŠŸèƒ½æœ€å®Œå–„çš„ <code>magickwand.js</code>ã€‚å®ƒå¤©ç„¶æ”¯æŒæ¸²æŸ“æ„å›¾å’Œé»‘åœºè¡¥å¿ï¼Œæ­£å¥½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚æœ¬åœ°ç¼–ç è°ƒè¯•ä¸€åˆ‡æ­£å¸¸ï¼Œä½†æäº¤åˆ° CI/CD å¹³å°åï¼Œæ„å»ºç›´æ¥å¤±è´¥äº†ï¼š</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/566129947f4f4a8ba37f2a580d58f17a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1966&amp;h=406&amp;s=151295&amp;e=png&amp;b=151718" alt="" loading="lazy"/></p>
<p>æ’æŸ¥åå‘ç°ï¼Œmagickwand.js ä¾èµ– <code>xpm</code> è¿™ä¸ª C/C++ åŒ…ç®¡ç†å™¨ã€‚åœ¨æ‰§è¡Œ <code>npm install</code> æ—¶ï¼Œxpm ä¼šå» npm æºæŸ¥æ‰¾ <code>package.json</code> ä¸­å£°æ˜çš„ <code>xpack</code> å­—æ®µï¼Œç„¶åä» GitHub ä¸‹è½½å¯¹åº”å¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"xpack"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"binaries"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://github.com/xpack-dev-tools/ninja-build-xpack/releases/download/v1.13.1-1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"platforms"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"darwin-arm64"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"fileName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xpack-ninja-build-1.13.1-1-darwin-arm64.tar.gz"</span><span class="hljs-punctuation">,</span>
          ...
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        ...
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ„å»ºå®¹å™¨å†…æ— æ³•è®¿é—® Githubï¼Œè¿™ä¸ªé—®é¢˜æˆ‘ä»¬æ— æ³•è§£å†³ï¼Œåªèƒ½æ”¾å¼ƒ magickwand.jsï¼Œè½¬è€Œè€ƒè™‘å…¶ä»–æ–¹æ¡ˆã€‚</p>
<blockquote>
<p>å®é™…ä¸Šæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªæ–¹æ¡ˆï¼Œå°±æ˜¯ç»•è¿‡ xpmï¼Œç›´æ¥å°†é¢„ç¼–è¯‘å¥½çš„ ImageMagick äºŒè¿›åˆ¶æ–‡ä»¶éƒ½ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶ååœ¨ Node ä¸­å†™ä¸€ä¸ªå¹³å°é€‚é…å±‚ï¼Œå°è£…ä¸‹å‘½ä»¤è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚</p>
<p>ä½†æ˜¯ä½¿ç”¨ child_process æ¥è°ƒç”¨ä¼šæœ‰å¾ˆå¤šé—®é¢˜ï¼š</p>
<ol>
<li>æ€§èƒ½å¼€é”€å¤§ï¼šæ¶‰åŠè¿›ç¨‹åˆ›å»ºã€é”€æ¯å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ï¼›</li>
<li>é€šä¿¡æ•ˆç‡ä½ï¼šéœ€é€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºè¿›è¡Œæ•°æ®åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œå¢åŠ äº†é¢å¤–çš„å¤„ç†å»¶è¿Ÿï¼›</li>
<li>å¹¶å‘æ§åˆ¶å¤æ‚ï¼šéœ€æ‰‹åŠ¨ç®¡ç†è¿›ç¨‹æ± å’Œèµ„æºç«äº‰ï¼Œé¿å…ç³»ç»Ÿèµ„æºè€—å°½ï¼›</li>
<li>å¼‚æ­¥ç¼–ç¨‹ç¹çï¼šå¿…é¡»å¤„ç†æµæ§åˆ¶ã€èƒŒå‹å’Œé”™è¯¯æ¢å¤æœºåˆ¶ï¼Œä»£ç å¤æ‚åº¦æ˜¾è‘—å¢åŠ ï¼›</li>
<li>ç¨³å®šæ€§é£é™©é«˜ï¼šå­è¿›ç¨‹å´©æºƒå¯èƒ½å½±å“ä¸»è¿›ç¨‹ç¨³å®šæ€§ï¼Œä¸”è¿›ç¨‹é—´çŠ¶æ€éš¾ä»¥å…±äº«ã€‚</li>
</ol>
<p>ç»¼åˆè€ƒè™‘ä¸‹æ¥ï¼Œè¿™ä¸ªä¹Ÿåªèƒ½ä½œä¸ºå®åœ¨æ²¡æœ‰åŠæ³•çš„å¤‡é€‰ï¼Œä¸åº”å½“ä½œä¸ºé¦–é€‰æ–¹æ¡ˆã€‚</p>
</blockquote>
<h3 data-id="heading-26">é—®é¢˜äºŒï¼šå›¾åƒä¼ è¾“çš„æ€§èƒ½ç“¶é¢ˆ</h3>
<p>é™¤äº†æ„å»ºä¸Šçš„éš¾é¢˜ï¼Œæœ€è‡´å‘½çš„å®é™…æ˜¯åç«¯å¤„ç†æ‰€å¸¦æ¥çš„ç”¨æˆ·ä½“éªŒé—®é¢˜ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œè®¾è®¡ç¨¿éœ€è¦ä»¥ 300 DPI å¯¼å‡ºï¼Œä¸€å¼ æµ·æŠ¥çš„åˆ†è¾¨ç‡é€šå¸¸æ˜¯ 7087Ã—9449ï¼ŒRGB åŸå›¾çº¦ 30MBï¼›è€Œé—¨åº—æ¨ªå¹…ã€å›´æŒ¡ç­‰å¤§å°ºå¯¸è®¾è®¡ç¨¿ï¼ŒåŸå›¾ç”šè‡³ä¼šè¾¾åˆ° 100MB+ã€‚</p>
<p>è™½ç„¶å‰æ®µæ—¶é—´è¿ç»´å‡çº§äº†å…¬å¸çš„ç½‘ç»œå¸¦å®½ï¼Œç”±åŸå…ˆçš„ 25Mb è°ƒæ•´åˆ° 100Mbï¼Œä½†æ˜¯å³ä¾¿æ˜¯è·‘æ»¡å¸¦å®½ï¼Œä¸‹è½½é€Ÿåº¦ä¹Ÿåªèƒ½è¾¾åˆ°çº¦ 12MB/sï¼Œè€Œè¿™è¿˜æ˜¯å»ºç«‹åœ¨ä¸è€ƒè™‘æœåŠ¡å™¨å¸¦å®½çš„å‰æä¸‹ï¼Œå®Œæ•´çš„è½¬æ¢æµç¨‹ä»ç„¶éœ€è¦ï¼š</p>
<ol>
<li>å‰ç«¯ä¸Šä¼ åŸå›¾åˆ°åç«¯ï¼ˆ30-100MB ä¸Šè¡Œï¼‰</li>
<li>åç«¯å¤„ç†è½¬æ¢ï¼ˆ4 æ ¸ 8G çš„å¤„ç†å™¨éœ€è¦ 10s ä»¥ä¸Šçš„å¤„ç†æ—¶é—´ï¼‰</li>
<li>åç«¯è¿”å› CMYK å›¾ç‰‡ï¼ˆ30-100MB ä¸‹è¡Œï¼‰</li>
<li>å‰ç«¯æ‰‹åŠ¨ä¸Šä¼ åˆ° OSSï¼ˆ30-100MB å†æ¬¡ä¸Šè¡Œï¼‰</li>
</ol>
<p>æ•´ä¸ª RTT å®æµ‹ä¸‹æ¥è¶…è¿‡äº† 100 ç§’ï¼Œè¿˜è¦æ‰¿å—ç½‘ç»œæ³¢åŠ¨å¯¼è‡´ä¼ è¾“å¤±è´¥çš„é£é™©ã€‚è¿™ç§ä½“éªŒå®Œå…¨æ— æ³•æ¥å—ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿæƒ³è¿‡ä¼˜åŒ–æ–¹æ¡ˆâ€”â€”æŠŠ Fabric çš„æ¸²æŸ“é€»è¾‘ç§»åˆ°æœåŠ¡ç«¯ï¼š</p>
<ol>
<li>å‰ç«¯åªä¼  JSON é…ç½®æ–‡ä»¶ï¼ˆä½“ç§¯å°ï¼‰</li>
<li>åç«¯ç”¨ <code>fabric + node-canvas</code> æ¸²æŸ“å›¾ç‰‡</li>
<li>å°±åœ°è½¬æ¢ä¸º CMYK å¹¶ç›´æ¥ä¸Šä¼  OSS</li>
<li>è¿”å›å›¾ç‰‡ URL</li>
</ol>
<p>ç†è®ºä¸Šå¯ä»¥å‡å°‘ä¸€æ¬¡ä¸Šè¡Œå’Œä¸€æ¬¡ä¸‹è¡Œï¼Œå°† RTT ç¼©çŸ­è‡³ 30 ç§’ä»¥å†…ã€‚ä½†è¿™ä¸ªæ–¹æ¡ˆè¯„ä¼°ä¸‹æ¥ï¼Œé—®é¢˜æ›´å¤šï¼š</p>
<p><strong>1. æ¸²æŸ“åœºæ™¯å¤æ‚ï¼Œè¿ç§»æˆæœ¬æé«˜</strong></p>
<p>æˆ‘ä»¬æœ‰ä¸¤ä¸ªåœºæ™¯éœ€è¦é€‚é…ï¼š</p>
<ul>
<li>è®¾è®¡å¸ˆç¼–è¾‘æ¨¡æ¿ï¼šç›´æ¥å¯¼å‡º Canvas å†…å®¹</li>
<li>åŠ ç›Ÿå•†ç”Ÿæˆç»ˆç¨¿ï¼šå…ˆæ›¿æ¢å ä½å†…å®¹ï¼Œå†å¯¼å‡ºï¼›è¿˜éœ€å‰ç½®ç”Ÿæˆä½åˆ†è¾¨ç‡é¢„è§ˆç¨¿ï¼Œä»¥åŠå±•ç¤ºå¤„ç†è¿›åº¦</li>
</ul>
<p>å¦‚æœå°† Fabric æ¸²æŸ“é€»è¾‘è¿ç§»åˆ° Nodeï¼š</p>
<ul>
<li>ä¸€å¥—ä»£ç é€‚é…ï¼šéœ€è¦ä»å¤´æ¢³ç†ä¸¤å¥—é€»è¾‘çš„å¼‚åŒç‚¹ï¼Œå·¥ä½œé‡å·¨å¤§</li>
<li>ä¸¤å¥—ä»£ç åˆ†ç¦»ï¼šåç»­ç»´æŠ¤æˆæœ¬ä¼šç›´çº¿ä¸Šå‡</li>
</ul>
<p>è€Œä¸”å‰ç«¯ç°æœ‰çš„å†å²æ¸²æŸ“ä»£ç æœ¬å°±é”™ç»¼å¤æ‚ï¼Œè¦ä¿è¯ Node ç”Ÿæˆçš„å›¾ç‰‡å’Œæµè§ˆå™¨å®Œå…¨ä¸€è‡´ï¼Œéœ€è¦æŠ•å…¥æ›´å¤šçš„å¼€å‘å’Œæµ‹è¯•èµ„æºã€‚</p>
<p><strong>2. å­—ä½“åˆè§„é£é™©</strong></p>
<p>è®¾è®¡å›¢é˜Ÿä½¿ç”¨çš„å­—ä½“éƒ½æ˜¯å…è´¹æˆ–å•†ä¸šæˆæƒçš„ï¼Œä½†å¤§å¤šæ•°å­—ä½“çš„æˆæƒèŒƒå›´ä»…é™äºæ¡Œé¢ä½¿ç”¨ã€‚å¦‚æœæŠŠå­—ä½“æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œå±äº"ç½‘ç»œä¼ æ’­"æˆ–"ç½‘ç»œåµŒå…¥"ç”¨é€”ï¼Œéœ€è¦å•ç‹¬æˆæƒã€‚</p>
<p>è¦åˆæ³•ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p>
<ol>
<li>å¯¹æ‰€æœ‰å…è´¹ã€å•†ä¸šå­—ä½“è¿›è¡Œå…¨é¢å®¡è®¡</li>
<li>ç”³è¯·æ–°çš„é€‚ç”¨èŒƒå›´æˆæƒï¼ˆè´¹æ—¶è´¹åŠ›ï¼Œæˆæœ¬é«˜æ˜‚ï¼‰</li>
</ol>
<p>è¿™æœŸé—´ï¼Œä¸€æ—¦å‡ºç°çº°æ¼ï¼Œå¯èƒ½æ”¶åˆ°å¾‹å¸ˆå‡½ã€ä¾µæƒé€šçŸ¥æˆ–é«˜é¢èµ”å¿ã€‚</p>
<p>ä½œä¸ºä¸€å®¶ä¸Šå¸‚å…¬å¸ï¼Œå¤èŒ—åœ¨å…¨å›½æœ‰ä¸Šä¸‡å®¶åŠ ç›Ÿé—¨åº—ã€‚å¦‚æ­¤å¤§çš„ä½“é‡ï¼Œä»»ä½•åˆè§„é£é™©éƒ½å¯èƒ½ç»™å…¬å¸é€ æˆæ— æ³•ä¼°é‡çš„æŸå¤±ã€‚</p>
<p><strong>3. æœåŠ¡ç«¯æ€§èƒ½é—®é¢˜</strong></p>
<p>ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“è¿˜æœ‰ä¸€ä¸ªç»•ä¸è¿‡çš„é—®é¢˜å°±æ˜¯æ€§èƒ½é—®é¢˜ï¼Œåœ¨æœåŠ¡ç«¯æ‰§è¡Œå›¾åƒå¤„ç†ï¼ŒåŒæ ·éœ€è¦è€—è´¹ CPU å’Œå†…å­˜æ€§èƒ½ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä½¿ç”¨åœºæ™¯è¿›è¡Œæ¢³ç†ï¼Œæ ¹æ®åŸ‹ç‚¹ä¿¡æ¯ç»Ÿè®¡å‡ºè°ƒç”¨é¢‘æ¬¡ï¼Œä»¥è¯„ä¼°æ¥å£æ€§èƒ½ï¼Œå¹¶å¯¹æ¥å£è¿›è¡Œå‹æµ‹ã€‚å¦‚æœæ€§èƒ½ä¸èƒ½æ»¡è¶³ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”³è¯·æ›´é«˜é…ç½®çš„æœåŠ¡å™¨ã€‚</p>
<p>è¿™åŒæ ·éœ€è¦æˆ‘ä»¬èŠ±è´¹æ›´å¤šçš„æ—¶é—´ï¼Œæµ‹è¯•èµ„æºæœ¬å°±ç´§å¼ ï¼Œéš¾ä»¥åè°ƒï¼Œçº¿ä¸Šç¨³å®šæ€§ä¹Ÿéš¾ä»¥ä¿éšœã€‚</p>
<h3 data-id="heading-27">å®¢æˆ·ç«¯æ–¹æ¡ˆçš„æ¢ç´¢</h3>
<p>æœåŠ¡ç«¯æ–¹æ¡ˆæˆæœ¬å¤ªé«˜ï¼Œå¿…é¡»å¦å¯»å‡ºè·¯ï¼Œè€Œå®¢æˆ·ç«¯æ–¹æ¡ˆï¼ŒJS å¤„ç†è‚¯å®šæ˜¯ä¸è¡Œäº†ï¼Œæ€§èƒ½å¤ªå·®ã€‚è€Œé™¤äº† JS æˆ‘ä»¬è¿˜æœ‰ä¸€æ¡è·¯å¯ä»¥èµ°â€”â€”WebAssemblyã€‚</p>
<p>ImageMagick æ˜¯ç”¨ C/C++ ç¼–å†™çš„ï¼Œç†è®ºä¸Šæˆ‘ä»¬å¯ä»¥ç”¨ Emscripten ç¼–è¯‘ä¸º WASMã€‚ä½†æƒ³è¦æ‰“é€šæ•´æ¡é“¾è·¯ï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p>
<ol>
<li>æ­å»º emscripten ç¯å¢ƒ</li>
<li>ä½¿ç”¨ cmake/autotools ç¼–è¯‘ä¾èµ–åº“</li>
<li>é“¾æ¥å’Œç¼–è¯‘ ImageMagick ä¸»ä»£ç åº“</li>
<li>ç¼–å†™ JS/WASM èƒ¶æ°´å±‚ä»£ç </li>
</ol>
<blockquote>
<p>å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F1554176" target="_blank" title="https://cloud.tencent.com/developer/article/1554176" ref="nofollow noopener noreferrer">WebAssemblyå®æˆ˜-åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ImageMagick-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘</a></p>
</blockquote>
<p>è¿™å¥—æµç¨‹è™½ç„¶å¾ˆæ˜ç¡®ï¼Œä½†å­¦ä¹ å’Œä¸Šæ‰‹æˆæœ¬ç¡®å®ä¸ä½ã€‚å—é™äºå·¥æœŸï¼Œæˆ‘ä»¬å…ˆå°è¯•å¯»æ‰¾ç°æˆçš„æ–¹æ¡ˆï¼š</p>
<p><strong>1. magickwand.js WASM ç‰ˆæœ¬</strong></p>
<p>magickwand.js æœ¬èº«å°±æä¾›äº† WASM ç‰ˆæœ¬ï¼Œä½†ä½¿ç”¨åå‘ç°å®ƒä¾èµ– <code>SharedArrayBuffer</code>ï¼Œè¿™è¦æ±‚å¯ç”¨<code>è·¨åŸŸéš”ç¦»ï¼ˆCross-Origin Isolationï¼‰</code>ã€‚è¿™ä¸ä»…éœ€è¦æ”¹é€ ç°æœ‰çš„æ„å»ºè„šæ‰‹æ¶ï¼Œå‘å¸ƒæ—¶è¿˜éœ€è¦æ”¹é€ ç½‘å…³é…ç½®ã€‚åŠ ä¹‹è¿™ä¸ªåº“ä¹‹å‰åœ¨ CI/CD ç¯èŠ‚å°±æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬åªèƒ½æ”¾å¼ƒã€‚</p>
<p><strong>2. å…¶ä»– WASM åº“</strong></p>
<p>ImageMagick å®˜ç½‘æ¨èçš„ <code>WASM-ImageMagick</code> å·²ç» 6 å¹´æ²¡æ›´æ–°äº†ã€‚æˆ‘ä»¬åœ¨ npm ä¸Šæ‰¾åˆ°äº† <code>@imagemagick/magick-wasm</code>ï¼Œå…¶ä½œè€…æ˜¯ ImageMagick çš„æ ¸å¿ƒå¼€å‘è€…ä¹‹ä¸€ï¼Œä¸‹è½½é‡æ’åé å‰ï¼Œæ›´æ–°æ´»è·ƒï¼Œéå¸¸å¯é ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒä¸å­˜åœ¨æˆ‘ä»¬å‰é¢æåˆ°çš„ä»»ä½•ä¸€ä¸ªé—®é¢˜ï¼</p>
<h2 data-id="heading-28">å…«ã€å·¥ç¨‹æ¥å…¥</h2>
<p>é—®é¢˜è§£å†³ï¼Œæ¥ä¸‹æ¥åªéœ€è¦å°† magick-wasm æ¥å…¥åˆ°å·¥ç¨‹ä¸­å³å¯ã€‚</p>
<h3 data-id="heading-29">1. å‰ç½®å‡†å¤‡</h3>
<p>magick-wasm è¿™ä¸ªåº“å†…éƒ¨ä½¿ç”¨ <code>BigInt</code>ï¼Œå¦‚æœä½ çš„ <code>browserslist</code> æŒ‡å®šç‰ˆæœ¬è¿‡ä½ï¼ŒBabel ç¼–è¯‘æ—¶å¯èƒ½ä¼šæŠ¥é”™ï¼Œæ·»åŠ ä¸€ä¸ª <code>supports bigint</code> å³å¯ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"browserslist"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"supports bigint"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"not dead"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-30">2. WASM åˆå§‹åŒ–</h3>
<p>æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ç»„ä»¶ä¸­åŠ è½½ WASM æ¨¡å—ï¼Œè¿™é‡Œæˆ‘ä»¬è¦æ±‚å¿…é¡»åˆå§‹åŒ–æˆåŠŸï¼Œå› ä¸ºå¦‚æœ WASM æ¨¡å—æ— æ³•åŠ è½½ï¼Œè®¾è®¡å¸ˆè½¬æ¢è‰²å½©æ¨¡å¼å¤±è´¥ï¼Œä»ä¼šå½±å“åç»­å°åˆ·ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">WASM_LOCATION</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'@imagemagick/magick-wasm/magick.wasm'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">useMount</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">initializeImageMagick</span>(<span class="hljs-variable constant_">WASM_LOCATION</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ImageMagick åˆå§‹åŒ–æˆåŠŸ'</span>))
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> message = <span class="hljs-string">'ImageMagick åˆå§‹åŒ–å¤±è´¥'</span>;
        <span class="hljs-title class_">CustomReport</span>.<span class="hljs-title function_">sendWarning</span>(<span class="hljs-title class_">ArmsLogs</span>.<span class="hljs-property">initializeImageMagickFailed</span>, { message });
        <span class="hljs-title class_">Modal</span>.<span class="hljs-title function_">error</span>({
          <span class="hljs-attr">title</span>: message,
          <span class="hljs-attr">content</span>: <span class="hljs-string">'è¯·ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Chrome æµè§ˆå™¨!'</span>,
          <span class="hljs-attr">onOk</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">close</span>(),
        });
      })
      .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>));
  });
}
</code></pre>
<p>åˆå§‹åŒ–é€»è¾‘ä¸­éœ€è¦æ³¨æ„æ·»åŠ  Loading æç¤ºï¼Œå› ä¸ºåˆå§‹åŒ– WASM æ˜¯éœ€è¦é€šè¿‡ç½‘ç»œè¯·æ±‚è·å– <code>.wasm</code> æ–‡ä»¶çš„ï¼Œå¦‚æœç½‘é€Ÿè¿‡æ…¢å°±æœ‰å¯èƒ½å¯¼è‡´è§¦å‘è½¬æ¢æ—¶ WASM æ¨¡å—è¿˜æ²¡æœ‰åˆå§‹åŒ–å®Œæˆã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨åˆå§‹åŒ–å¤±è´¥æ—¶è¿˜è¦æ¥å…¥åŸ‹ç‚¹å‘Šè­¦ï¼Œä»¥ä¾¿æˆ‘ä»¬æ„ŸçŸ¥çº¿ä¸Šçš„ä½¿ç”¨æƒ…å†µã€‚</p>
<h3 data-id="heading-31">3. è‰²å½©æ¨¡å¼è½¬æ¢</h3>
<p>è¿™éƒ¨åˆ†çš„æ ¸å¿ƒè½¬æ¢é€»è¾‘ä¹Ÿå¹¶ä¸å¤šï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RGB_PROFILE_LOCATION</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'@/assets/icc/sRGB Color Space Profile.icm'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CMYK_PROFILE_LOCATION</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'@/assets/icc/JapanColor2001Coated.icc'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);

<span class="hljs-keyword">const</span> readFile = <span class="hljs-keyword">async</span> (<span class="hljs-attr">url</span>: <span class="hljs-variable constant_">URL</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Uint8Array</span>&gt; =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);
  <span class="hljs-keyword">const</span> arrayBuffer = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">arrayBuffer</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBuffer);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> transformColorSpace = <span class="hljs-keyword">async</span> (<span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Uint8Array</span>&gt; =&gt; {
  <span class="hljs-keyword">const</span> [rgbProfileUint8Array, cmykProfileUint8Array] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">readFile</span>(<span class="hljs-variable constant_">RGB_PROFILE_LOCATION</span>),
    <span class="hljs-title function_">readFile</span>(<span class="hljs-variable constant_">CMYK_PROFILE_LOCATION</span>),
  ]);
  <span class="hljs-keyword">const</span> rgbProfile = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ColorProfile</span>(rgbProfileUint8Array);
  <span class="hljs-keyword">const</span> cmykProfile = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ColorProfile</span>(cmykProfileUint8Array);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-title class_">ImageMagick</span>.<span class="hljs-title function_">read</span>(uint8Array, <span class="hljs-title class_">MagickFormat</span>.<span class="hljs-property">Jpeg</span>, <span class="hljs-function">(<span class="hljs-params">image</span>) =&gt;</span> {
      image.<span class="hljs-property">blackPointCompensation</span> = <span class="hljs-literal">true</span>;
      image.<span class="hljs-property">renderingIntent</span> = <span class="hljs-title class_">RenderingIntent</span>.<span class="hljs-property">Perceptual</span>;
      <span class="hljs-comment">/**
       * å¿…é¡»åŒæ—¶æŒ‡å®š source å’Œ targetï¼Œå¦åˆ™åœ¨ safari ä¸‹ä¼šæœ‰ bug
       * https://github.com/dlemstra/magick-wasm/blob/main/src/magick-image.ts#L3976
       * safari canvas å¯¼å‡ºçš„å›¾ç‰‡æ— æ³•æ£€æµ‹å‡º iccï¼Œä¼šå¯¼è‡´è½¬æ¢å¤±è´¥
       */</span>
      <span class="hljs-keyword">const</span> success = image.<span class="hljs-title function_">transformColorSpace</span>(
        rgbProfile,
        cmykProfile,
        <span class="hljs-title class_">ColorTransformMode</span>.<span class="hljs-property">HighRes</span>
      );
      <span class="hljs-keyword">if</span> (!success) {
        message.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è‰²å½©ç©ºé—´è½¬æ¢å¤±è´¥ï¼'</span>);
        <span class="hljs-title class_">CustomReport</span>.<span class="hljs-title function_">sendWarning</span>(<span class="hljs-title class_">ArmsLogs</span>.<span class="hljs-property">colorSpaceTransformFailed</span>, {
          <span class="hljs-attr">message</span>: <span class="hljs-string">'è‰²å½©ç©ºé—´è½¬æ¢å¤±è´¥ï¼'</span>,
        });
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è‰²å½©ç©ºé—´è½¬æ¢å¤±è´¥ï¼'</span>));
      } <span class="hljs-keyword">else</span> {
        image.<span class="hljs-title function_">write</span>(<span class="hljs-title class_">MagickFormat</span>.<span class="hljs-property">Jpeg</span>, <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
          <span class="hljs-comment">// éœ€è¦æ‹·è´ä¸€ä»½ï¼Œå¦åˆ™ result ä¼šè¢« GC å›æ”¶</span>
          <span class="hljs-title function_">resolve</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(result));
        });
      }
    });
  });
};
</code></pre>
<p>ä½†æ˜¯è¿™é‡Œæœ‰ä¸¤ä¸ªå‘ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li><strong>Safari ä¸‹ ICC æ£€æµ‹å¤±è´¥</strong></li>
</ol>
<p>transformColorSpace åœ¨æºç ä¸­åˆ¤æ–­äº†å›¾åƒæ˜¯å¦å†…åµŒäº† profileï¼Œå¦‚æœæ²¡æœ‰åµŒå…¥ï¼Œä¼šç›´æ¥è¿”å›å¤±è´¥ã€‚</p>
<blockquote>
<p>æºç ä½ç½®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdlemstra%2Fmagick-wasm%2Fblob%2Fmain%2Fsrc%2Fmagick-image.ts%23L3976" target="_blank" title="https://github.com/dlemstra/magick-wasm/blob/main/src/magick-image.ts#L3976" ref="nofollow noopener noreferrer">github.com/dlemstra/maâ€¦</a></p>
</blockquote>
<p>åœ¨ Chrome ä¸­é€šè¿‡ Canvas å¯¼å‡ºçš„å›¾ç‰‡ï¼Œè°ƒç”¨ ImageMagick æŸ¥è¯¢ ICC æ–‡ä»¶æ—¶å¯ä»¥æ­£å¸¸æ‰¾åˆ°ï¼Œä½†æ˜¯é€šè¿‡ Safari å¯¼å‡ºçš„å›¾ç‰‡åˆ™æ— æ³•æ£€å‡ºã€‚</p>
<p>å¥‡æ€ªçš„æ˜¯ï¼Œä½¿ç”¨ macOS è‡ªå¸¦é¢„è§ˆæŸ¥çœ‹é¢œè‰²æè¿°æ–‡ä»¶ä¿¡æ¯æ—¶å´æ°å¥½å¾—åˆ°äº†ç›¸åçš„ç»“æœâ€”â€”ä½¿ç”¨ Safari å¯¼å‡ºçš„å›¾ç‰‡æ­£ç¡®åµŒå…¥äº† sRGB IEC61966-2.1 æ–‡ä»¶ï¼Œè€Œ Chrome å¯¼å‡ºçš„å›¾ç‰‡å´æ²¡æœ‰æ˜¾ç¤ºé¢œè‰²æè¿°æ–‡ä»¶ã€‚</p>
<blockquote>
<p>è¿™ä¸ªé—®é¢˜ç¬”è€…æ²¡æœ‰æ·±å…¥ç ”ç©¶ï¼Œå¦‚æœæœ‰äº†è§£åŸå› çš„æœ‹å‹ä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºå›å¤è§£ç­”ä¸‹ç–‘æƒ‘</p>
</blockquote>
<p>å› æ­¤åœ¨ Safari ä¸‹ transformColorSpace æ–¹æ³•ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œï¼Œç›´æ¥è¿”å›äº† trueã€‚</p>
<p>é˜…è¯»æºç åå‘ç°è¦è§„é¿è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€è¦åŒæ—¶ä¼ å…¥ source å’Œ target å³å¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RGB_PROFILE_LOCATION</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'@/assets/icc/sRGB Color Space Profile.icm'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CMYK_PROFILE_LOCATION</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'@/assets/icc/JapanColor2001Coated.icc'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> transformColorSpace = <span class="hljs-keyword">async</span> (<span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Uint8Array</span>&gt; =&gt; {
  <span class="hljs-keyword">const</span> [rgbProfileUint8Array, cmykProfileUint8Array] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">readFile</span>(<span class="hljs-variable constant_">RGB_PROFILE_LOCATION</span>),
    <span class="hljs-title function_">readFile</span>(<span class="hljs-variable constant_">CMYK_PROFILE_LOCATION</span>),
  ]);
  <span class="hljs-keyword">const</span> rgbProfile = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ColorProfile</span>(rgbProfileUint8Array);
  <span class="hljs-keyword">const</span> cmykProfile = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ColorProfile</span>(cmykProfileUint8Array);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-title class_">ImageMagick</span>.<span class="hljs-title function_">read</span>(uint8Array, <span class="hljs-title class_">MagickFormat</span>.<span class="hljs-property">Jpeg</span>, <span class="hljs-function">(<span class="hljs-params">image</span>) =&gt;</span> {
      image.<span class="hljs-property">blackPointCompensation</span> = <span class="hljs-literal">true</span>;
      image.<span class="hljs-property">renderingIntent</span> = <span class="hljs-title class_">RenderingIntent</span>.<span class="hljs-property">Perceptual</span>;
      <span class="hljs-comment">/**
       * å¿…é¡»åŒæ—¶æŒ‡å®š source å’Œ targetï¼Œå¦åˆ™åœ¨ safari ä¸‹ä¼šæœ‰ bug
       * https://github.com/dlemstra/magick-wasm/blob/main/src/magick-image.ts#L3976
       * safari canvas å¯¼å‡ºçš„å›¾ç‰‡æ— æ³•æ£€æµ‹å‡º iccï¼Œä¼šå¯¼è‡´è½¬æ¢å¤±è´¥
       */</span>
      <span class="hljs-keyword">const</span> success = image.<span class="hljs-title function_">transformColorSpace</span>(
        rgbProfile,
        cmykProfile,
        <span class="hljs-title class_">ColorTransformMode</span>.<span class="hljs-property">HighRes</span>
      );
      <span class="hljs-keyword">if</span> (!success) {
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è‰²å½©ç©ºé—´è½¬æ¢å¤±è´¥ï¼'</span>));
      } <span class="hljs-keyword">else</span> {
        image.<span class="hljs-title function_">write</span>(<span class="hljs-title class_">MagickFormat</span>.<span class="hljs-property">Jpeg</span>, resolve);
      }
    });
  });
};
</code></pre>
<p>å½“ç„¶åˆ«å¿˜è®°åœ¨ä»£ç ä¸­ç•™ä¸‹å¯¹åº”çš„æ³¨é‡Šè¯´æ˜ï¼Œé˜²æ­¢åäººç»´æŠ¤é‡å¤è¸©å‘ã€‚</p>
<ol start="2">
<li><strong>WASM GC å¯¼è‡´æ•°æ®ä¸¢å¤±</strong></li>
</ol>
<p>image.write å›è°ƒä¸­çš„ data å¯¹è±¡æ¥è‡ª magick-wasm çš„å†…å­˜ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸å— JS æ§åˆ¶ï¼Œå›è°ƒç»“æŸæˆ–åç»­å†™å…¥æ—¶é‚£æ®µå†…å­˜å¯èƒ½å·²ç»è¢«å¤ç”¨/é‡Šæ”¾ã€‚</p>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿå¾ˆç®€å•ï¼ŒåŸåœ°å¤åˆ¶ä¸€ä»½å³å¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">image.<span class="hljs-title function_">write</span>(<span class="hljs-title class_">MagickFormat</span>.<span class="hljs-property">Jpeg</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-comment">// éœ€è¦æ‹·è´ä¸€ä»½ï¼Œå¦åˆ™ result ä¼šè¢« GC å›æ”¶</span>
  <span class="hljs-title function_">resolve</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(data));
});
</code></pre>
<p>åŒæ ·ç•™ä¸‹ä¸€ä¸ªè´´å¿ƒçš„æ³¨é‡Šï¼Œåç»­åªéœ€é€‚é…å¯¹åº”çš„ä¸šåŠ¡ä»£ç å³å¯</p>
<h3 data-id="heading-32">4. æ€§èƒ½ä¼˜åŒ–</h3>
<p>åŠŸèƒ½æ˜¯å®ç°äº†ï¼Œä½†ä¸šåŠ¡å®é™…ç”¨ä¸‹æ¥è¿˜æ˜¯å‘ç°ä¸å°‘é—®é¢˜ï¼Œä¸»è¦é›†ä¸­åœ¨æ€§èƒ½æ–¹é¢ã€‚</p>
<p>ä¸šåŠ¡ä½¿ç”¨çš„æ˜¯ç»Ÿä¸€é‡‡è´­çš„ 16G çš„ M1 èŠ¯ç‰‡ iMacï¼ŒæŒ‰ç†æ¥è®²ä¸ä¼šå¡ï¼Œä½†æ˜¯æ·±å…¥äº†è§£äº†ä¸šåŠ¡çš„æ“ä½œä¹ æƒ¯åï¼Œå‘ç°äº†å‡ ä¸ªå¾ˆæœ‰æ„æ€çš„ç‚¹ï¼š</p>
<ul>
<li>ä¸šåŠ¡ä¹ æƒ¯åŒæ—¶å¤šå¼€ 4ã€5 ä¸ªæ ‡ç­¾é¡µï¼ŒåŒæ—¶æ“ä½œ</li>
<li>ä¸šåŠ¡åœ¨é¡µé¢æ“ä½œçš„åŒæ—¶ï¼Œæœ¬åœ°ä¼šå¼€ç€ AI/PS ä»¥æ–¹ä¾¿ä½œå›¾</li>
</ul>
<p>è™½ç„¶ WebAssembly è¿è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œä½†å®ƒä¸ JavaScript å…±äº«åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ã€‚å¦‚æœä½ åœ¨ä¸»çº¿ç¨‹ç›´æ¥è°ƒç”¨ä¸€ä¸ªè€—æ—¶è¾ƒé•¿çš„ WASM å‡½æ•°ï¼Œå®ƒä¾ç„¶ä¼šé˜»å¡ UI å“åº”ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ã€‚</p>
<p>åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼ŒåŒä¸€ä¸ªåŸŸåçš„ä¸åŒæ ‡ç­¾é¡µï¼Œé€šå¸¸ä¹Ÿæ˜¯å…±ç”¨çš„åŒä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™è¿˜ä¼šå¯¼è‡´ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªæ ‡ç­¾é¡µä¸‹å¤„ç†å›¾åƒï¼ŒåŒåŸŸçš„å…¶ä»–æ ‡ç­¾é¡µä¹Ÿæ— æ³•æ“ä½œï¼ˆä¸»çº¿ç¨‹è¢«é˜»å¡ï¼‰ï¼Œæµè§ˆå™¨è¿˜ä¼šå¼¹å‡ºé¡µé¢æ— å“åº”çš„æç¤º</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a72acf0c876e42ad871fbc4d498b4273~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=3394&amp;h=1482&amp;s=820264&amp;e=png&amp;b=3e3c3b" alt="" loading="lazy"/></p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšé’ˆå¯¹æ€§çš„æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-33">Worker å¤šçº¿ç¨‹</h4>
<p>æ€§èƒ½ä¼˜åŒ–çš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯å°† WebAssembly ä»ä¸»çº¿ç¨‹ä¸­ç§»å‡ºå»ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Web Worker å°† WASM çš„é€»è¾‘å•ç‹¬æ”¾åœ¨ worker çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä»è€Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p>æƒ³è¦ä½¿ç”¨ worker å¾ˆç®€å•ï¼Œä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ª <code>worker.js</code> æ–‡ä»¶ï¼Œéšååœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> myWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">"worker.js"</span>);
</code></pre>
<p>å³å¯å°† worker.js ä¸­çš„ä»£ç æ”¾åœ¨ç‹¬ç«‹çš„ worker çº¿ç¨‹ä¸­æ‰§è¡Œã€‚</p>
<blockquote>
<p>æ³¨æ„è¿™é‡Œä¸èƒ½ç”¨ <code>SharedWorker</code>ï¼Œä¸€æ–¹é¢ Safari é•¿æœŸä»¥æ¥å¯¹ SharedWorker æ”¯æŒä¸ä½³ï¼Œå¦ä¸€æ–¹é¢ SharedWorker æ›´å¤šä½¿ç”¨åœ¨æ˜¯è·¨æ ‡ç­¾é€šä¿¡ï¼Œæˆ–è€…æŸäº›éœ€è¦å…±äº«èµ„æºçš„åœºæ™¯ï¼Œå¯¹äºä¸Šé¢æåˆ°çš„å¤šæ ‡ç­¾å¹¶å‘å›¾åƒå¤„ç†åè€Œèµ·åˆ°è´Ÿä½œç”¨ï¼ˆå¤šä¸ªæ ‡ç­¾å…±äº«ä¸€ä¸ª Workerï¼Œå¤„ç†æ˜¯ä¸²è¡Œçš„ï¼‰ï¼Œæ— æ³•æœ€å¤§ç¨‹åº¦åˆ©ç”¨ç°ä»£å¤šæ ¸ CPU çš„æ€§èƒ½ã€‚</p>
</blockquote>
<p>æ­¤å¤–ï¼Œç”±äºå•ä¸ªæ ‡ç­¾é¡µå¯èƒ½ä¼šè§¦å‘å¤šæ¬¡å›¾åƒå¤„ç†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼å‡å°‘é‡å¤çš„ WASM åˆå§‹åŒ–ï¼Œä»è€Œè¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Worker å®ä¾‹</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">workerInstance</span>: <span class="hljs-title class_">Worker</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-comment">/**
 * è·å– Worker å®ä¾‹ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
 */</span>
<span class="hljs-keyword">const</span> getWorker = (): <span class="hljs-function"><span class="hljs-params">Worker</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (!workerInstance) {
    workerInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'./magick.worker.ts'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>), { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">'module'</span> 
    });
    <span class="hljs-comment">// ç›‘å¬ Worker è¿”å›çš„æ¶ˆæ¯</span>
    workerInstance.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {};
    <span class="hljs-comment">// ç›‘å¬ Worker é”™è¯¯</span>
    workerInstance.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {};
  }
  <span class="hljs-keyword">return</span> workerInstance;
};
</code></pre>
<p><strong>Worker åŒæºé™åˆ¶</strong></p>
<p>åœ¨ä¸Šçº¿å‰æˆ‘ä»¬è¿˜é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„å‰ç«¯æ„å»ºäº§ç‰©æ˜¯æ‰˜ç®¡åœ¨ OSS ä¸Šçš„ï¼Œè¿™é‡Œä½¿ç”¨ new URL è·å–åˆ°çš„ worker èµ„æºä¸åŒæºï¼Œå¯¼è‡´æ— æ³•åŠ è½½ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°† worker å†…éƒ¨çš„é€»è¾‘å•ç‹¬æŠ½ç¦»åˆ°ä¸€ä¸ª npm åŒ…ä¸­ï¼Œè¿åŒä¾èµ–é¡¹ä¸€èµ·æ‰“åŒ…æˆ UMD æ ¼å¼ï¼Œåœ¨ä¸šåŠ¡å·¥ç¨‹ä¸­é€šè¿‡ fetch æ–¹å¼è·å–è„šæœ¬å†…å®¹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">WORKER_URL</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'@guming/magick-worker/build/umd/index.js'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);
<span class="hljs-comment">// Fetch worker æ–‡ä»¶å†…å®¹</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-variable constant_">WORKER_URL</span>);
<span class="hljs-keyword">const</span> workerCode = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();
<span class="hljs-comment">// åˆ›å»º Blob å’Œ Blob URL</span>
<span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([workerCode], { <span class="hljs-attr">type</span>: <span class="hljs-string">'application/javascript'</span> });
<span class="hljs-keyword">const</span> blobUrl = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
<span class="hljs-comment">// åˆ›å»º Worker</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(blobUrl);
</code></pre>
<blockquote>
<p>å¦‚æœä½ ä½¿ç”¨ Viteï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Vite çš„ <code>import MyWorker from'./worker.js?worker'</code>è¯­æ³•ã€‚</p>
<p>æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fremote-web-worker" target="_blank" title="https://www.npmjs.com/package/remote-web-worker" ref="nofollow noopener noreferrer">remote-web-worker</a> è¿™æ ·çš„åº“æ¥å°‘å†™ç‚¹ä»£ç ã€‚</p>
</blockquote>
<h4 data-id="heading-34">Comlink é›¶æ‹·è´ä¼ è¾“</h4>
<p>Worker é€šè¿‡ postMessage ä¸ä¸»çº¿ç¨‹é€šä¿¡ï¼Œæ•°æ®ä¼ è¾“æœ‰ä¸¤ç§æ¨¡å¼ï¼š</p>
<ol>
<li><strong>ç»“æ„åŒ–å…‹éš†ï¼ˆStructured Cloneï¼‰</strong></li>
</ol>
<p>è¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§å†™æ³•ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'worker.js'</span>);
<span class="hljs-keyword">const</span> imageBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);

worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'process'</span>, <span class="hljs-attr">data</span>: imageBuffer });
</code></pre>
<p>è¿™ç§æ–¹å¼ä¼šä¸ºæ¥æ”¶æ–¹åˆ›å»ºä¸€ä¸ªæ•°æ®çš„å®Œæ•´å‰¯æœ¬ã€‚å¯¹äº 100MB çš„å›¾ç‰‡ï¼Œä¼ è¾“ç¬é—´ä¼šå¯¼è‡´å†…å­˜å ç”¨ç¿»å€ï¼ˆå˜ä¸º 200MBï¼‰ã€‚å¦‚æœæ˜¯ 5 ä¸ªæ ‡ç­¾é¡µåŒæ—¶æ“ä½œï¼Œå†…å­˜å³°å€¼å°†è¿…é€Ÿå †å ï¼Œå¼•å‘æµè§ˆå™¨ OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰å´©æºƒã€‚</p>
<ol start="2">
<li><strong>å¯è½¬ç§»å¯¹è±¡ï¼ˆTransferable Objectsï¼‰</strong></li>
</ol>
<p>é™¤äº†ç»“æ„åŒ–å…‹éš†ä¹‹å¤–ï¼Œworker è¿˜æä¾›äº†ä¸€ç§å…è®¸ä½ ç›´æ¥è½¬äº¤å¯¹è±¡å†…å­˜çš„æ–¹å¼ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'worker.js'</span>);
<span class="hljs-keyword">const</span> imageBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);

worker.<span class="hljs-title function_">postMessage</span>(
  { <span class="hljs-attr">type</span>: <span class="hljs-string">'process'</span>, <span class="hljs-attr">data</span>: imageBuffer },
  [imageBuffer]  <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼šè¦è½¬ç§»çš„å¯¹è±¡åˆ—è¡¨</span>
);

<span class="hljs-comment">// è½¬ç§»åï¼ŒimageBuffer åœ¨ä¸»çº¿ç¨‹ä¸å¯ç”¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(imageBuffer.<span class="hljs-property">byteLength</span>); <span class="hljs-comment">// 0 â€”â€” æ‰€æœ‰æƒå·²è½¬ç§»</span>
</code></pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…å¯¹å¤§å¯¹è±¡è¿›è¡Œæ‹·è´ï¼Œä»è€Œå‡å°‘é€šä¿¡æ—¶ä¸Šä¸‹æ–‡ç»“æ„åŒ–çš„æ€§èƒ½å¼€é”€ã€‚</p>
<p>åœ¨å®é™…å¼€å‘å·¥ä½œä¸­ï¼Œæˆ‘ä»¬é€šå¸¸è¿˜éœ€è¦å†™ä¸€å¥—å¤æ‚çš„äº‹ä»¶é€šä¿¡é€»è¾‘ï¼Œæ¥ä¿éšœå’Œ worker ä¹‹é—´çš„é€šä¿¡ï¼Œä»£ç å¯èƒ½é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">workerInstance</span>: <span class="hljs-title class_">Worker</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">let</span> messageId = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> pendingRequests = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">number</span>, { <span class="hljs-attr">resolve</span>: <span class="hljs-title class_">Function</span>; <span class="hljs-attr">reject</span>: <span class="hljs-title class_">Function</span> }&gt;();

<span class="hljs-comment">/**
 * è·å– Worker å®ä¾‹ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
 */</span>
<span class="hljs-keyword">const</span> getWorker = (): <span class="hljs-function"><span class="hljs-params">Worker</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (!workerInstance) {
    workerInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'./magick.worker.ts'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>), { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">'module'</span> 
    });

    <span class="hljs-comment">// ç›‘å¬ Worker è¿”å›çš„æ¶ˆæ¯</span>
    workerInstance.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> { id, <span class="hljs-keyword">type</span>, data, error } = event.<span class="hljs-property">data</span>;
      <span class="hljs-keyword">const</span> request = pendingRequests.<span class="hljs-title function_">get</span>(id);

      <span class="hljs-keyword">if</span> (request) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'success'</span>) {
          request.<span class="hljs-title function_">resolve</span>(data);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'error'</span>) {
          request.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(error));
        }
        pendingRequests.<span class="hljs-title function_">delete</span>(id);
      }
    };

    <span class="hljs-comment">// ç›‘å¬ Worker é”™è¯¯</span>
    workerInstance.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Worker error:'</span>, error);
      <span class="hljs-comment">// æ‹’ç»æ‰€æœ‰ç­‰å¾…ä¸­çš„è¯·æ±‚</span>
      pendingRequests.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ reject }</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(error));
      pendingRequests.<span class="hljs-title function_">clear</span>();
    };
  }
  <span class="hljs-keyword">return</span> workerInstance;
};

<span class="hljs-comment">/**
 * å‘ Worker å‘é€æ¶ˆæ¯å¹¶ç­‰å¾…å“åº”
 */</span>
<span class="hljs-keyword">const</span> sendMessageToWorker = &lt;T&gt;(
  <span class="hljs-attr">method</span>: <span class="hljs-built_in">string</span>, 
  data?: <span class="hljs-built_in">any</span>,
): <span class="hljs-title class_">Promise</span>&lt;T&gt; =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> id = messageId++;
    <span class="hljs-keyword">const</span> worker = <span class="hljs-title function_">getWorker</span>();
    <span class="hljs-comment">// ä¿å­˜ promise çš„ resolve å’Œ reject</span>
    pendingRequests.<span class="hljs-title function_">set</span>(id, { resolve, reject });
    <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ° Worker</span>
    worker.<span class="hljs-title function_">postMessage</span>({ id, method, data });
  });
};

<span class="hljs-keyword">const</span> initializeWorker = (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">sendMessageToWorker</span>(<span class="hljs-string">'initializeWorker'</span>);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> transformColorSpace = (<span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Uint8Array</span>&gt; =&gt; {
  <span class="hljs-keyword">return</span> sendMessageToWorker&lt;<span class="hljs-title class_">Uint8Array</span>&gt;(<span class="hljs-string">'transformColorSpace'</span>, uint8Array);
};
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// worker</span>
<span class="hljs-keyword">import</span> { initMagick, <span class="hljs-title class_">ImageMagick</span>, <span class="hljs-title class_">MagickImage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@imagemagick/magick-wasm'</span>;

<span class="hljs-keyword">let</span> initialized = <span class="hljs-literal">false</span>;

<span class="hljs-keyword">const</span> initializeWorker = <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {};
<span class="hljs-keyword">const</span> transformColorSpace = <span class="hljs-keyword">async</span> (<span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Uint8Array</span>&gt; =&gt; {};

<span class="hljs-comment">// ç›‘å¬ä¸»çº¿ç¨‹çš„æ¶ˆæ¯</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">async</span> (event) =&gt; {
  <span class="hljs-keyword">const</span> { id, method, data } = event.<span class="hljs-property">data</span>;
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">let</span> result;
    <span class="hljs-comment">// æ ¹æ®æ–¹æ³•åè°ƒç”¨å¯¹åº”çš„å‡½æ•°</span>
    <span class="hljs-keyword">switch</span> (method) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'initializeWorker'</span>:
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">initializeWorker</span>();
        result = <span class="hljs-literal">undefined</span>;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'transformColorSpace'</span>:
        result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">transformColorSpace</span>(data);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Unknown method: <span class="hljs-subst">${method}</span>`</span>);
    }
    <span class="hljs-comment">// è¿”å›æˆåŠŸç»“æœ</span>
    self.<span class="hljs-title function_">postMessage</span>({ id, <span class="hljs-attr">type</span>: <span class="hljs-string">'success'</span>, <span class="hljs-attr">data</span>: result });
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// è¿”å›é”™è¯¯</span>
    self.<span class="hljs-title function_">postMessage</span>({ id, <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>, error });
  }
};
</code></pre>
<p>æ¯”è¾ƒå¤æ‚ï¼Œæœ‰ä¸€å®šçš„å­¦ä¹ å’Œç†è§£æˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Comlink</code> åº“æ¥å°è£… worker çš„é€šä¿¡é€»è¾‘ï¼Œä»è€Œé¿å…æ‰‹åŠ¨ç»´æŠ¤ä¸€å¥—äº‹ä»¶é€šä¿¡é€»è¾‘ï¼Œä»£ç å¯ä»¥ç²¾ç®€å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">Comlink</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'comlink'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WorkerApi</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./magick.worker'</span>;

<span class="hljs-keyword">let</span> <span class="hljs-attr">workerInstance</span>: <span class="hljs-title class_">Worker</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">workerApi</span>: <span class="hljs-title class_">Comlink</span>.<span class="hljs-property">Remote</span>&lt;<span class="hljs-title class_">WorkerApi</span>&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-keyword">const</span> getWorkerApi = (): <span class="hljs-title class_">Comlink</span>.<span class="hljs-property">Remote</span>&lt;<span class="hljs-title class_">WorkerApi</span>&gt; =&gt; {
  <span class="hljs-keyword">if</span> (!workerApi) {
    workerInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'./magick.worker.ts'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>), { <span class="hljs-attr">type</span>: <span class="hljs-string">'module'</span> });
    workerApi = <span class="hljs-title class_">Comlink</span>.<span class="hljs-property">wrap</span>&lt;<span class="hljs-title class_">WorkerApi</span>&gt;(workerInstance);
  }
  <span class="hljs-keyword">return</span> workerApi;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> initializeWorker = <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
  <span class="hljs-keyword">const</span> api = <span class="hljs-title function_">getWorkerApi</span>();
  <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">initializeWorker</span>();
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> transformColorSpace = <span class="hljs-keyword">async</span> (<span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Uint8Array</span>&gt; =&gt; {
  <span class="hljs-keyword">const</span> api = <span class="hljs-title function_">getWorkerApi</span>();
  <span class="hljs-keyword">return</span> api.<span class="hljs-title function_">transformColorSpace</span>(<span class="hljs-title class_">Comlink</span>.<span class="hljs-title function_">transfer</span>(uint8Array, [uint8Array.<span class="hljs-property">buffer</span>]));
};
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// worker</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">Comlink</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'comlink'</span>;

<span class="hljs-keyword">const</span> initializeWorker = <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {};

<span class="hljs-keyword">const</span> transformColorSpace = <span class="hljs-keyword">async</span> (<span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Uint8Array</span>&gt; =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-title class_">ImageMagick</span>.<span class="hljs-title function_">read</span>(uint8Array, <span class="hljs-title class_">MagickFormat</span>.<span class="hljs-property">Jpeg</span>, <span class="hljs-function">(<span class="hljs-params">image</span>) =&gt;</span> {
      ...
      image.<span class="hljs-title function_">write</span>(<span class="hljs-title class_">MagickFormat</span>.<span class="hljs-property">Jpeg</span>, <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> output = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(result);
        <span class="hljs-comment">// ä½¿ç”¨ Transferableï¼Œé¿å…å¤§æ•°æ®å¤åˆ¶</span>
        <span class="hljs-title function_">resolve</span>(<span class="hljs-title class_">Comlink</span>.<span class="hljs-title function_">transfer</span>(output, [output.<span class="hljs-property">buffer</span>]));
      });
    });
  });
};

<span class="hljs-keyword">const</span> workerApi = {
  initializeWorker,
  transformColorSpace,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">WorkerApi</span> = <span class="hljs-keyword">typeof</span> workerApi;

<span class="hljs-title class_">Comlink</span>.<span class="hljs-title function_">expose</span>(workerApi);
</code></pre>
<p>å†™æ³•éå¸¸ç®€å•ï¼Œä»¿ä½›æ ¹æœ¬æ²¡æœ‰ worker çš„å­˜åœ¨ï¼ŒComlink å¸®ä½ å°è£…äº†æ‰€æœ‰é€šä¿¡çš„ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-35">é™æ€èµ„æºç¼“å­˜</h4>
<p>åŸå…ˆçš„ transformColorSpace å†™æ³•ä¸­ï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½ä¼šé‡å¤è¯·æ±‚ä¸€æ¬¡ ICC æ–‡ä»¶ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å°†è¯·æ±‚åšå‰ç½®ç¼“å­˜ï¼Œç»Ÿä¸€æ”¾åˆ° <code>initializeWorker</code> å†…éƒ¨ï¼Œå®æµ‹ä¸‹æ¥å¯ä»¥å‡å°‘æ¯æ¬¡ 2s ä»¥ä¸Šçš„é‡å¤è¯·æ±‚è€—æ—¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * åˆå§‹åŒ– ImageMagick WASM
 */</span>
<span class="hljs-keyword">const</span> initializeWasm = <span class="hljs-keyword">async</span> (<span class="hljs-attr">wasmUrl</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
  <span class="hljs-keyword">const</span> wasmBytes = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readFile</span>(wasmUrl);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">initializeImageMagick</span>(wasmBytes);
};

<span class="hljs-comment">/**
 * åˆå§‹åŒ– ICC profiles
 */</span>
<span class="hljs-keyword">const</span> initializeProfiles = <span class="hljs-keyword">async</span> (<span class="hljs-attr">rgbProfileUrl</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">cmykProfileUrl</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
  <span class="hljs-keyword">const</span> [rgbProfileUint8Array, cmykProfileUint8Array] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">readFile</span>(rgbProfileUrl),
    <span class="hljs-title function_">readFile</span>(cmykProfileUrl),
  ]);
  <span class="hljs-keyword">const</span> rgbProfile = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ColorProfile</span>(rgbProfileUint8Array);
  <span class="hljs-keyword">const</span> cmykProfile = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ColorProfile</span>(cmykProfileUint8Array);
  profiles = { <span class="hljs-attr">rgb</span>: rgbProfile, <span class="hljs-attr">cmyk</span>: cmykProfile };
};

<span class="hljs-comment">/**
 * åˆå§‹åŒ– Worker
 */</span>
<span class="hljs-keyword">const</span> initializeWorker = <span class="hljs-keyword">async</span> (<span class="hljs-attr">config</span>: {
  <span class="hljs-attr">wasmUrl</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">rgbProfileUrl</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">cmykProfileUrl</span>: <span class="hljs-built_in">string</span>;
}): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
  <span class="hljs-keyword">if</span> (initialized) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">initializeWasm</span>(config.<span class="hljs-property">wasmUrl</span>),
    <span class="hljs-title function_">initializeProfiles</span>(config.<span class="hljs-property">rgbProfileUrl</span>, config.<span class="hljs-property">cmykProfileUrl</span>),
  ]).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    initialized = <span class="hljs-literal">true</span>;
  });
};
</code></pre>
<h3 data-id="heading-36">5. æ€§èƒ½æµ‹è¯•</h3>
<p>æˆ‘ä»¬å°†ä¼˜åŒ–å‰åå„æ“ä½œçš„æ€§èƒ½è¿›è¡Œå¯¹æ¯”ï¼Œæµ‹è¯•åŸºå‡†æ¡ä»¶å¦‚ä¸‹ï¼š</p>
<ul>
<li>å›¾ç‰‡å¤§å°ï¼š127.3MB</li>
<li>èŠ¯ç‰‡ï¼šApple M4</li>
<li>æ ¸å¿ƒæ•°ï¼š10ï¼ˆ4 æ€§èƒ½å’Œ 6 èƒ½æ•ˆï¼‰</li>
<li>å†…å­˜ï¼š32G</li>
<li>æµè§ˆå™¨ï¼šChrome 144.0.7559.110ï¼ˆæ­£å¼ç‰ˆæœ¬ï¼‰ (arm64)</li>
</ul>
<h4 data-id="heading-37">å•æ ‡ç­¾å¤„ç†æ€§èƒ½</h4>









































<table><thead><tr><th>é˜¶æ®µ</th><th>ä¸»çº¿ç¨‹æ–¹æ¡ˆ</th><th>Worker æ–¹æ¡ˆï¼ˆç»“æ„åŒ–å…‹éš†ï¼‰</th><th>Worker æ–¹æ¡ˆï¼ˆé›¶æ‹·è´ä¼ è¾“ï¼‰</th></tr></thead><tbody><tr><td>åˆå§‹åŒ–</td><td>-</td><td>619.20ms</td><td>730.10ms</td></tr><tr><td>å›¾åƒå¤„ç†</td><td>42710.70ms(42.71s)</td><td>48494.60ms(48.5s)</td><td>48281.70ms(48.27s)</td></tr><tr><td>é€šä¿¡è€—æ—¶</td><td>-</td><td>61.40ms</td><td>53.00ms</td></tr><tr><td>ç»„è£… Blob</td><td>74.15ms</td><td>140.80ms</td><td>154.00ms</td></tr><tr><td>æ€»è€—æ—¶</td><td>42784.85ms(42.79s)</td><td>48696.8ms(48.7s)</td><td>48494.60ms(48.5s)</td></tr></tbody></table>
<blockquote>
<p>å¤§å›¾çš„å¤„ç†æ—¶é—´ç¨é•¿ï¼Œå®é™…ä¸Šå¤„ç† 20M å·¦å³çš„å›¾ç‰‡ï¼Œå¤„ç†é€Ÿåº¦å‡æ§åˆ¶åœ¨ 10-20s å†…ã€‚</p>
</blockquote>
<h4 data-id="heading-38">å¤šæ ‡ç­¾å¹¶å‘å¤„ç†æ€§èƒ½</h4>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¸»çº¿ç¨‹æ–¹æ¡ˆ</th><th>Worker æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ ‡ç­¾ 1 å®Œæˆæ—¶é—´</td><td>43.25s</td><td>45.17s</td></tr><tr><td>æ ‡ç­¾ 2 å®Œæˆæ—¶é—´</td><td>40.39s</td><td>42.28s</td></tr><tr><td>æ ‡ç­¾ 3 å®Œæˆæ—¶é—´</td><td>æ— æ³•å¤„ç†</td><td>41.84s</td></tr><tr><td>å…¨éƒ¨å®Œæˆæ—¶é—´</td><td>é¡µé¢ç­‰å¾…è¶… 5 åˆ†é’Ÿæ‰å¯ä»¥äº¤äº’</td><td>45.17s</td></tr><tr><td>å…¶ä»–æ ‡ç­¾æ˜¯å¦å¡é¡¿</td><td>æ‰€æœ‰åŒåŸŸæ ‡ç­¾å…¨éƒ¨å¡æ­»</td><td>å¦</td></tr></tbody></table>
<h4 data-id="heading-39">å†…å­˜ä½¿ç”¨å¯¹æ¯”</h4>
<p>åœ¨ Chrome ä¸­å¯ä»¥ä½¿ç”¨ performance.memory è·å–å½“å‰çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå…¶ä¸­è¿”å›å¯¹è±¡çš„ jsHeapSizeLimit å­—æ®µè¡¨ç¤ºå½“å‰ JavaScript é¡µé¢å¯ä»¥ä½¿ç”¨çš„æœ€å¤§å †å†…å­˜é™åˆ¶ã€‚</p>
<p>åœ¨ 64 ä½ç³»ç»Ÿä¸­ï¼Œç‰©ç†å†…å­˜å¤§äº 16G çš„ï¼Œå †å†…å­˜æœ€å¤§é™åˆ¶ä¸º 4Gï¼›å°äºç­‰äº 16G çš„ï¼Œæœ€å¤§å †å†…å­˜é™åˆ¶ä¸º 2Gã€‚</p>
<p>åœ¨ 32ä½ç³»ç»Ÿä¸­ï¼Œæœ€å¤§å †å†…å­˜é™åˆ¶ä¸º 1Gã€‚</p>
<blockquote>
<p>å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FPerformance%2Fmemory" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Performance/memory" ref="nofollow noopener noreferrer">Performance.memory - Web API | MDN</a></p>
</blockquote>















































<table><thead><tr><th>åœºæ™¯</th><th>ä¸»çº¿ç¨‹æ–¹æ¡ˆ</th><th>Worker æ–¹æ¡ˆï¼ˆç»“æ„åŒ–å…‹éš†ï¼‰</th><th>Worker æ–¹æ¡ˆï¼ˆé›¶æ‹·è´ä¼ è¾“ï¼‰</th></tr></thead><tbody><tr><td>åˆå§‹åŒ–å‰</td><td>536.96 MB</td><td>134.92 MB</td><td>153.93 MB</td></tr><tr><td>åˆå§‹åŒ–å</td><td>653.57 MB</td><td>171.09 MB</td><td>156.86 MB</td></tr><tr><td>Blobç»„è£…å‰</td><td>653.57 MB</td><td>238.52 MB</td><td>230.86 MB</td></tr><tr><td>å‘é€å‰</td><td>3105.70 MB   (å¯¹åº”å›¾åƒå¤„ç†ä¸­)</td><td>355.71 MB</td><td>348.05 MB</td></tr><tr><td>æ¥æ”¶å</td><td/><td>415.65 MB</td><td>364.07 MB</td></tr><tr><td>Blob ç»„è£…å</td><td>3105.70 MB</td><td>415.65 MB</td><td>364.07 MB</td></tr></tbody></table>
<p>åœ¨ä¸»çº¿ç¨‹æ–¹æ¡ˆçš„æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œç¬¬äºŒä¸ªæ ‡ç­¾é¡µåœ¨å¤„ç†å›¾åƒè¿‡ç¨‹ä¸­ï¼Œå †å†…å­˜æ¥åˆ°äº† 5492.76 MBï¼Œå·²ç»è¶…å‡ºäº† 4G çš„å †å†…å­˜é™åˆ¶ï¼Œè¿™ç›´æ¥å¯¼è‡´äº†ç¬¬ä¸‰ä¸ªæ ‡ç­¾é¡µçš„ç™½å±å´©æºƒã€‚è€Œ Worker æ–¹æ¡ˆï¼Œé¡µé¢å…¨éƒ¨æ­£å¸¸å±•ç¤º Loadingï¼Œæœªå‡ºç°ç™½å±ç­‰æƒ…å†µï¼Œæ‰€æœ‰é¡µé¢å‡ ä¹åŒæ—¶è¾“å‡ºäº†è½¬æ¢åçš„å›¾ç‰‡ã€‚</p>
<blockquote>
<p>è®¾è®¡å¸ˆä½¿ç”¨çš„è®¾å¤‡ä¸ºå…¬å¸ç»Ÿä¸€é‡‡è´­çš„ M1 èŠ¯ç‰‡ iMacï¼Œ16G å†…å­˜ã€‚</p>
<p>åœ¨è®¾è®¡å¸ˆçš„æœºå­ä¸Š Chrome æœ€å¤§å †å†…å­˜é™åˆ¶ä¸º 2Gï¼Œä¸»çº¿ç¨‹æ–¹æ¡ˆä»…æ”¯æŒåŒæ—¶å¼€å¯ä¸€ä¸ªæ ‡ç­¾é¡µå¤„ç†</p>
</blockquote>
<h4 data-id="heading-40">ä¼˜åŒ–æ•ˆæœæ€»ç»“</h4>
<ol>
<li><strong>ç¨³å®šæ€§ï¼šçªç ´ 4GB å †å†…å­˜ç“¶é¢ˆ</strong></li>
</ol>
<p>è¿™æ˜¯æœ¬æ¬¡ä¼˜åŒ–æœ€æ˜¾è‘—çš„æˆæœã€‚åœ¨ 64 ä½ Chrome ä¸­ï¼Œå³ä¾¿ç‰©ç†å†…å­˜é«˜è¾¾ 32GBï¼Œå•ä¸ªæ ‡ç­¾é¡µçš„ JS å †å†…å­˜é™åˆ¶ï¼ˆ<code>jsHeapSizeLimit</code>ï¼‰é€šå¸¸ä»è¢«é”å®šåœ¨ <strong>4GB</strong>ã€‚</p>
<p>ä¸»çº¿ç¨‹æ–¹æ¡ˆåœ¨å¤„ç† 120MB+ å¤§å›¾æ—¶ï¼Œç¬æ—¶å†…å­˜é£™å‡è‡³ 3.1GBã€‚å½“å¼€å¯ 3 ä¸ªæ ‡ç­¾é¡µå¹¶å‘å¤„ç†æ—¶ï¼Œå†…å­˜å ç”¨è¿…é€Ÿå åŠ è‡³ 5.5GB å·¦å³ï¼Œè§¦å‘ OOMï¼Œå¯¼è‡´æµè§ˆå™¨æ ‡ç­¾é¡µç›´æ¥<strong>ç™½å±å´©æºƒ</strong>ã€‚</p>
<p>é€šè¿‡å°†è®¡ç®—å¯†é›†å‹ä»»åŠ¡ç§»å‡ºä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹å†…å­˜å§‹ç»ˆç»´æŒåœ¨ <strong>300MB-400MB</strong> çš„è¾ƒä½æ°´å¹³ã€‚Worker æ–¹æ¡ˆæˆåŠŸç»•è¿‡äº†å•çº¿ç¨‹å †å†…å­˜é™åˆ¶ï¼Œå®ç°äº† 5 ä¸ªä»¥ä¸Šæ ‡ç­¾é¡µçš„ç¨³å®šå¹¶å‘ã€‚</p>
<ol start="2">
<li><strong>ç”¨æˆ·ä½“éªŒï¼šä»â€œå…¨åŸŸå¡æ­»â€åˆ°â€œæµç•…åŠ è½½â€</strong></li>
</ol>
<p>ä¸»çº¿ç¨‹æ–¹æ¡ˆåœ¨å¤„ç†æœŸé—´ï¼Œç”±äºæ‰§è¡Œæ ˆè¢« ImageMagick å®Œå…¨é˜»å¡ï¼Œå¯¼è‡´åŒåŸŸä¸‹çš„æ‰€æœ‰æ ‡ç­¾é¡µå¤±å»å“åº”ï¼Œç”¨æˆ·æ— æ³•è¿›è¡Œä»»ä½•äº¤äº’ã€‚</p>
<p>Worker æ–¹æ¡ˆè™½ç„¶åœ¨å•çº¿ç¨‹å¤„ç†è€—æ—¶ä¸Šç•¥æ…¢äºä¸»çº¿ç¨‹ï¼ˆçº¦å¢åŠ  13% çš„ä¸Šä¸‹æ–‡å¼€é”€ï¼‰ï¼Œä½†å®ƒä¿è¯äº† UI çš„ç»å¯¹å“åº”é€Ÿåº¦ã€‚ç”¨æˆ·åœ¨å¤„ç†ç™¾å…†å¤§å›¾çš„åŒæ—¶ï¼Œä¾ç„¶å¯ä»¥å¹³æ»‘åœ°åˆ‡æ¢æ ‡ç­¾é¡µã€ç‚¹å‡»æŒ‰é’®æˆ–è§‚çœ‹ Loading åŠ¨ç”»ã€‚</p>
<ol start="3">
<li><strong>æ•°æ®ä¼ è¾“ä¼˜åŒ–ï¼šé›¶æ‹·è´çš„ä»·å€¼</strong></li>
</ol>
<p>ä½¿ç”¨ç»“æ„åŒ–å…‹éš†æ—¶ï¼Œæ•°æ®å‘é€å‰åæœ‰ 60MB çš„å†…å­˜å·®å€¼ï¼Œè€Œé›¶æ‹·è´å°†å†…å­˜æ³¢åŠ¨é™è‡³ 16MBï¼Œåœ¨å¤§æ•°æ®é‡ä¸‹ï¼Œè¿™ä¸ªå·®è·ä¼šéšç€å¹¶å‘é‡çš„å¢åŠ è€Œå˜å¾—æåº¦æ˜æ˜¾ã€‚</p>
<p>é€šè¿‡ä½¿ç”¨é›¶æ‹·è´ä¼ è¾“ï¼Œæˆ‘ä»¬é¿å…äº† CPU å¯†é›†çš„åºåˆ—åŒ–è¿‡ç¨‹ï¼ŒåŒæ—¶å‡å°‘äº†å†…å­˜å³°å€¼å’Œ GC å‹åŠ›ï¼Œä¿è¯äº†å¹¶å‘æƒ…å†µä¸‹é¡µé¢çš„æ­£å¸¸ä½¿ç”¨ã€‚</p>
<ol start="4">
<li><strong>ç»¼åˆå¯¹æ¯”çœ‹æ¿</strong></li>
</ol>



































<table><thead><tr><th>ç»´åº¦</th><th>ä¸»çº¿ç¨‹æ–¹æ¡ˆ</th><th>Worker æ–¹æ¡ˆ (ä¼˜åŒ–å)</th><th>ç»“è®º</th></tr></thead><tbody><tr><td>å•å›¾æ€»è€—æ—¶</td><td>42.79s</td><td>48.5s</td><td>ä¸»çº¿ç¨‹ç•¥å¿«ï¼Œä½†ç‰ºç‰²äº†äº¤äº’æ€§</td></tr><tr><td>å¹¶å‘å¯é æ€§</td><td>æå·® (ä»…æ”¯æŒ2æ¬¡å¹¶å‘)</td><td>æä¼˜ç§€ (å¹¶å‘æ— å‹åŠ›)</td><td>Worker è§£å†³äº†ç”Ÿå­˜é—®é¢˜</td></tr><tr><td>ä¸»çº¿ç¨‹å†…å­˜å³°å€¼</td><td>3105.70 MB</td><td>364.07 MB</td><td>é™ä½äº† <strong>88%</strong> çš„ä¸»çº¿ç¨‹å†…å­˜å‹åŠ›</td></tr><tr><td>äº¤äº’ä½“éªŒ</td><td>é¡µé¢å®Œå…¨å†»ç»“</td><td>å§‹ç»ˆæµç•…</td><td>æ ¸å¿ƒä½“éªŒæå‡</td></tr></tbody></table>
<h2 data-id="heading-41">ä¹ã€æ€»ç»“</h2>
<p>æœ¬æ¬¡éœ€æ±‚ä»ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„"é¢œè‰²ä¸å¯¹"é—®é¢˜å‡ºå‘ï¼Œæœ€ç»ˆæ¼”å˜æˆäº†ä¸€æ¬¡æ¶‰åŠè‰²å½©ç§‘å­¦ã€å›¾åƒå¤„ç†ã€Web æŠ€æœ¯æ ˆé€‰å‹ä»¥åŠå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„ç»¼åˆæŠ€æœ¯æ”»åšã€‚</p>
<p>å›é¡¾æ•´ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬é‡åˆ°çš„å›°éš¾ä¸»è¦é›†ä¸­åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<p><strong>æŠ€æœ¯é€‰å‹çš„æƒè¡¡</strong>ï¼šä» Sharp åˆ° ImageMagickï¼Œä» Node.js åˆ° Pythonï¼Œå†åˆ° WebAssemblyï¼Œæ¯ä¸€ç§æ–¹æ¡ˆéƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯å’Œå±€é™æ€§ã€‚æˆ‘ä»¬éœ€è¦åœ¨åŠŸèƒ½å®Œæ•´æ€§ã€æ€§èƒ½è¡¨ç°ã€å¼€å‘æˆæœ¬ä»¥åŠåŸºå»ºé€‚é…æ€§ä¹‹é—´åå¤æƒè¡¡ã€‚</p>
<p><strong>åŸºç¡€è®¾æ–½çš„é™åˆ¶</strong>ï¼šCI/CD ç¯å¢ƒçš„ç½‘ç»œç­–ç•¥ã€æœåŠ¡å™¨æ€§èƒ½ã€å­—ä½“æˆæƒåˆè§„ç­‰"éæŠ€æœ¯"å› ç´ ï¼Œå¾€å¾€ä¼šæˆä¸ºæŠ€æœ¯æ–¹æ¡ˆè½åœ°çš„æœ€å¤§éšœç¢ã€‚è¿™æé†’æˆ‘ä»¬ï¼ŒæŠ€æœ¯æ–¹æ¡ˆçš„è®¾è®¡ä¸èƒ½è„±ç¦»å®é™…çš„ä¸šåŠ¡ç¯å¢ƒã€‚</p>
<p><strong>ç”¨æˆ·ä½“éªŒçš„åšå®ˆ</strong>ï¼šæœ€åˆçš„æœåŠ¡ç«¯æ–¹æ¡ˆè™½ç„¶åŠŸèƒ½ç®€å•å®Œå–„ï¼Œä½†è¶… 100s çš„ç­‰å¾…æ—¶é—´å®Œå…¨æ— æ³•æ¥å—ã€‚æ­£æ˜¯å¯¹ç”¨æˆ·ä½“éªŒçš„åšæŒï¼Œé©±ä½¿æˆ‘ä»¬æœ€ç»ˆæ‰¾åˆ°äº†å®¢æˆ·ç«¯ WASM æ–¹æ¡ˆï¼Œå¹¶é€šè¿‡æ€§èƒ½ä¼˜åŒ–å°†å¤„ç†æ—¶é—´å¤§å¤§ç¼©çŸ­åˆ° 20 ç§’å†…ã€‚</p>
<p>æœ€ç»ˆï¼Œé€šè¿‡åœ¨æµè§ˆå™¨ç«¯é›†æˆ <code>@imagemagick/magick-wasm</code>ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p>
<ul>
<li>å®Œæ•´çš„ ICC Profile æ”¯æŒï¼Œç²¾ç¡®æ§åˆ¶è‰²å½©è½¬æ¢</li>
<li>ç»Ÿä¸€çš„æ¸²æŸ“æ„å›¾å’Œé»‘åœºè¡¥å¿é…ç½®ï¼Œè½¬æ¢æ•ˆæœç›¸è¾ƒä¸“ä¸šè®¾è®¡è½¯ä»¶ï¼ˆAI/PSï¼‰è‰²å·®ä½äº 1%ã€‚</li>
<li>æ— éœ€æœåŠ¡ç«¯å‚ä¸ï¼Œé¿å…äº†ç½‘ç»œä¼ è¾“é—®é¢˜å’Œå­—ä½“åˆè§„é£é™©ã€‚</li>
<li>æœ¬åœ°å¤šçº¿ç¨‹å¤„ç†ï¼Œæ”¯æŒå¹¶å‘å›¾åƒå¤„ç†ï¼Œæœ€å¤§ç¨‹åº¦åˆ©ç”¨è®¾å¤‡æ€§èƒ½ã€‚</li>
<li>è§£å†³å°åˆ·è‰²å·®é—®é¢˜ï¼ŒèŠ‚çº¦ 80% è®¾è®¡å¸ˆé‡å¤åŠ³åŠ¨</li>
</ul>
<p>è¿™æ¬¡ç»å†è®©æˆ‘ä»¬æ·±åˆ»è®¤è¯†åˆ°ï¼šè§£å†³é—®é¢˜çš„è¿‡ç¨‹å¾€å¾€æ¯”é—®é¢˜æœ¬èº«æ›´æœ‰ä»·å€¼ã€‚åœ¨æ¢ç´¢è¿‡ç¨‹ä¸­ç§¯ç´¯çš„è‰²å½©ç®¡ç†çŸ¥è¯†ã€WASM æŠ€æœ¯å’Œæ€§èƒ½ä¼˜åŒ–ç»éªŒã€ä»¥åŠå¯¹ä¸šåŠ¡åœºæ™¯çš„æ·±å…¥ç†è§£ï¼Œéƒ½å°†æˆä¸ºå›¢é˜Ÿå®è´µçš„æŠ€æœ¯èµ„äº§ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™æ¬¡æŠ€æœ¯æ”¹é€ ä¸ä»…è§£å†³äº†ç‡ƒçœ‰ä¹‹æ€¥ï¼Œæ›´ä¸ºåç»­çš„å›¾åƒå¤„ç†éœ€æ±‚å¥ å®šäº†åšå®åŸºç¡€ã€‚å½“ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼çš„å›¾åƒå¤„ç†é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€å¥—æˆç†Ÿçš„è§£å†³æ€è·¯å’ŒæŠ€æœ¯å‚¨å¤‡ã€‚</p>
<p>æŠ€æœ¯æœåŠ¡ä¸šåŠ¡ï¼Œä¸šåŠ¡é©±åŠ¨æŠ€æœ¯ã€‚å¸Œæœ›è¿™æ¬¡å®è·µèƒ½ä¸ºé‡åˆ°ç±»ä¼¼é—®é¢˜çš„æœ‹å‹ä»¬æä¾›ä¸€äº›å‚è€ƒå’Œå¯å‘ã€‚</p>
<h2 data-id="heading-42">å‚è€ƒæ–‡ç« </h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fsharp.pixelplumbing.com%2F" target="_blank" title="https://sharp.pixelplumbing.com/" ref="nofollow noopener noreferrer">High performance Node.js image processing</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fimagemagick.org%2F" target="_blank" title="https://imagemagick.org/" ref="nofollow noopener noreferrer">ImageMagick | Mastering Digital Image Alchemy</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.adobeacp.com%2Fcontent%2Fnews%3Fid%3D1658793062537074" target="_blank" title="https://www.adobeacp.com/content/news?id=1658793062537074" ref="nofollow noopener noreferrer">PhotoshopåŠŸèƒ½|ä½¿ç”¨é¢œè‰²é…ç½®æ–‡ä»¶</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.wasmer.io%2Fsdk%2Fwasmer-js%2Fexplainers%2Ftroubleshooting%23sharedarraybuffer-and-cross-origin-isolation" target="_blank" title="https://docs.wasmer.io/sdk/wasmer-js/explainers/troubleshooting#sharedarraybuffer-and-cross-origin-isolation" ref="nofollow noopener noreferrer">Troubleshooting Common Problems</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D5zGfsED7M7U" target="_blank" title="https://www.youtube.com/watch?v=5zGfsED7M7U" ref="nofollow noopener noreferrer">Relative Colorimetric or Perceptual? Which Rendering Intent Should I Use? - YouTube</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D3bY8MVHf0JM%26feature%3Dyoutu.be" target="_blank" title="https://www.youtube.com/watch?v=3bY8MVHf0JM&amp;feature=youtu.be" ref="nofollow noopener noreferrer">What is LAB Color Space? [HD] - YouTube</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F166413369" target="_blank" title="https://zhuanlan.zhihu.com/p/166413369" ref="nofollow noopener noreferrer">æµ…è°ˆæ˜¾ç¤ºå™¨è‰²åŸŸï¼šä»sRGBåˆ°å¹¿è‰²åŸŸ - çŸ¥ä¹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWeb_Workers_API%2FTransferable_objects" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Workers_API/Transferable_objects" ref="nofollow noopener noreferrer">å¯è½¬ç§»å¯¹è±¡ - Web API | MDN</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RustFSé«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²å®æˆ˜ï¼šè½»æ¾æ­å»ºä¼ä¸šçº§åˆ†å¸ƒå¼å­˜å‚¨æ¶æ„]]></title>    <link>https://juejin.cn/post/7603699739223916559</link>    <guid>https://juejin.cn/post/7603699739223916559</guid>    <pubDate>2026-02-08T13:05:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603699739223916559" data-draft-id="7603854784864649256" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RustFSé«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²å®æˆ˜ï¼šè½»æ¾æ­å»ºä¼ä¸šçº§åˆ†å¸ƒå¼å­˜å‚¨æ¶æ„"/> <!----> <meta itemprop="datePublished" content="2026-02-08T13:05:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯¹è±¡å­˜å‚¨ä¸RustFS"/> <meta itemprop="url" content="https://juejin.cn/user/652466093570057"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RustFSé«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²å®æˆ˜ï¼šè½»æ¾æ­å»ºä¼ä¸šçº§åˆ†å¸ƒå¼å­˜å‚¨æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/652466093570057/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯¹è±¡å­˜å‚¨ä¸RustFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T13:05:35.000Z" title="Sun Feb 08 2026 13:05:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RustFSé«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²å®æˆ˜ï¼šè½»æ¾æ­å»ºä¼ä¸šçº§åˆ†å¸ƒå¼å­˜å‚¨æ¶æ„</h2>
<p>æœ€è¿‘åœ¨æŠ€æœ¯ç¾¤é‡Œçœ‹åˆ°å¾ˆå¤šå°ä¼™ä¼´åœ¨é—®RustFSé›†ç¾¤éƒ¨ç½²çš„é—®é¢˜ï¼Œä»Šå¤©æˆ‘å°±æŠŠè‡ªå·±åœ¨ç”Ÿäº§ç¯å¢ƒè¸©å‘æ€»ç»“çš„é›†ç¾¤æ–¹æ¡ˆåˆ†äº«ç»™å¤§å®¶ã€‚åˆ«çœ‹æ˜¯åˆ†å¸ƒå¼æ¶æ„ï¼Œå…¶å®æ¯”æƒ³è±¡ä¸­ç®€å•å¤šäº†ï¼</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦é›†ç¾¤éƒ¨ç½²ï¼Ÿ</h3>
<p>å…ˆè®²ä¸ªçœŸå®æ¡ˆä¾‹ï¼šä¸Šä¸ªæœˆæˆ‘ä»¬å…¬å¸å•æœºç‰ˆRustFSå› ä¸ºç¡¬ç›˜æ•…éšœå¯¼è‡´æœåŠ¡ä¸­æ–­6å°æ—¶ï¼ŒæŸå¤±æƒ¨é‡ã€‚ç—›å®šæ€ç—›ï¼Œæˆ‘èŠ±äº†ä¸€å‘¨æ—¶é—´ç ”ç©¶å‡ºäº†è¿™å¥—é«˜å¯ç”¨æ–¹æ¡ˆï¼Œç°åœ¨å°±ç®—æŒ‚æ‰2ä¸ªèŠ‚ç‚¹éƒ½èƒ½æ­£å¸¸æœåŠ¡ï¼</p>
<h3 data-id="heading-2">é›†ç¾¤æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-3">æœ€å°ç”Ÿäº§é›†ç¾¤ï¼ˆ4èŠ‚ç‚¹æ¨èï¼‰</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è´Ÿè½½å‡è¡¡å™¨     â”‚
â”‚   (Nginx/Haproxy) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ èŠ‚ç‚¹1 â”‚ èŠ‚ç‚¹2 â”‚ èŠ‚ç‚¹3 â”‚ èŠ‚ç‚¹4 â”‚
â”‚ æ•°æ®+å…ƒæ•°æ® â”‚æ•°æ®+å…ƒæ•°æ®â”‚çº¯æ•°æ®èŠ‚ç‚¹â”‚çº¯æ•°æ®èŠ‚ç‚¹â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<p><strong>ä¸ºä»€ä¹ˆé€‰4èŠ‚ç‚¹ï¼Ÿ</strong></p>
<ul>
<li>æ»¡è¶³çº åˆ ç æœ€ä½è¦æ±‚ï¼ˆ4+2æ¨¡å¼ï¼‰</li>
<li>æˆæœ¬ä¸æ€§èƒ½çš„æœ€ä½³å¹³è¡¡</li>
<li>æ•…éšœå®¹å¿åº¦é«˜ï¼ˆå¯åŒæ—¶æŒ‚2ä¸ªèŠ‚ç‚¹ï¼‰</li>
</ul>
<h3 data-id="heading-4">ç¯å¢ƒå‡†å¤‡</h3>
<h4 data-id="heading-5">æœåŠ¡å™¨é…ç½®ï¼ˆæœ€ä½è¦æ±‚ï¼‰</h4>
<pre><code class="hljs language-scss" lang="scss"># <span class="hljs-number">4</span>å°CentOS <span class="hljs-number">7.9</span>æœåŠ¡å™¨
èŠ‚ç‚¹<span class="hljs-number">1</span>ï¼š<span class="hljs-number">10.0</span><span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.11</span> (å…ƒæ•°æ®+æ•°æ®)
èŠ‚ç‚¹<span class="hljs-number">2</span>ï¼š<span class="hljs-number">10.0</span><span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.12</span> (å…ƒæ•°æ®+æ•°æ®)  
èŠ‚ç‚¹<span class="hljs-number">3</span>ï¼š<span class="hljs-number">10.0</span><span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.13</span> (æ•°æ®èŠ‚ç‚¹)
èŠ‚ç‚¹<span class="hljs-number">4</span>ï¼š<span class="hljs-number">10.0</span><span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.14</span> (æ•°æ®èŠ‚ç‚¹)

# æ¯å°æœåŠ¡å™¨é…ç½®
CPUï¼š<span class="hljs-number">4</span>æ ¸ä»¥ä¸Š
å†…å­˜ï¼š<span class="hljs-number">8</span>GBä»¥ä¸Š
ç£ç›˜ï¼š<span class="hljs-number">100</span>GBç³»ç»Ÿç›˜ + <span class="hljs-number">500</span>GBæ•°æ®ç›˜ï¼ˆSSDæ¨èï¼‰
ç½‘ç»œï¼šåƒå…†å†…ç½‘äº’é€š
</code></pre>
<h4 data-id="heading-6">ç³»ç»Ÿä¼˜åŒ–é…ç½®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"net.core.somaxconn = 1024"</span> &gt;&gt; /etc/sysctl.conf
<span class="hljs-built_in">echo</span> <span class="hljs-string">"net.ipv4.tcp_max_syn_backlog = 1024"</span> &gt;&gt; /etc/sysctl.conf
<span class="hljs-built_in">echo</span> <span class="hljs-string">"vm.swappiness = 10"</span> &gt;&gt; /etc/sysctl.conf
sysctl -p

<span class="hljs-comment"># ä¼˜åŒ–ç£ç›˜IO</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"deadline"</span> &gt; /sys/block/sdb/queue/scheduler
</code></pre>
<h3 data-id="heading-7">é›†ç¾¤éƒ¨ç½²å®æˆ˜</h3>
<h4 data-id="heading-8">1. åˆ›å»ºå…±äº«é…ç½®æ–‡ä»¶</h4>
<p>å…ˆå‡†å¤‡ä¸€ä¸ªç»Ÿä¸€çš„ <code>docker-compose.cluster.yml</code>ï¼š</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">rustfs:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">rustfs/rustfs:1.0.0-alpha.69</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">rustfs</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">network_mode:</span> <span class="hljs-string">"host"</span>
    
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/data/rustfs/data:/data</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/data/rustfs/logs:/logs</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/etc/localtime:/etc/localtime:ro</span>
    
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_CLUSTER_ENABLED=true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_CLUSTER_NAME=rustfs-prod</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_API_ENDPOINT=http://10.0.1.11:9000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_ACCESS_KEY=prod_access_key_2024</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_SECRET_KEY=your_super_secure_secret_key_here</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_BROWSER=on</span>
      
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">resources:</span>
        <span class="hljs-attr">limits:</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">4G</span>
          <span class="hljs-attr">cpus:</span> <span class="hljs-string">'2.0'</span>
</code></pre>
<h4 data-id="heading-9">2. èŠ‚ç‚¹å·®å¼‚åŒ–é…ç½®</h4>
<p><strong>èŠ‚ç‚¹1ï¼ˆ10.0.1.11ï¼‰é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># åœ¨å…±äº«é…ç½®åŸºç¡€ä¸Šæ·»åŠ </span>
<span class="hljs-attr">environment:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_CLUSTER_MASTER=true</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_METADATA_ENDPOINTS=10.0.1.11:9000,10.0.1.12:9000</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_DATA_ENDPOINTS=10.0.1.11:9000,10.0.1.12:9000,10.0.1.13:9000,10.0.1.14:9000</span>
</code></pre>
<p><strong>èŠ‚ç‚¹2ï¼ˆ10.0.1.12ï¼‰é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">environment:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_CLUSTER_BACKUP_MASTER=true</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_METADATA_ENDPOINTS=10.0.1.11:9000,10.0.1.12:9000</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_DATA_ENDPOINTS=10.0.1.11:9000,10.0.1.12:9000,10.0.1.13:9000,10.0.1.14:9000</span>
</code></pre>
<p><strong>æ•°æ®èŠ‚ç‚¹ï¼ˆ10.0.1.13/14ï¼‰é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">environment:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_DATA_NODE=true</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">RUSTFS_METADATA_ENDPOINTS=10.0.1.11:9000,10.0.1.12:9000</span>
</code></pre>
<h4 data-id="heading-10">3. åˆå§‹åŒ–é›†ç¾¤éƒ¨ç½²è„šæœ¬</h4>
<p>åˆ›å»º <code>deploy-cluster.sh</code>ï¼š</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-built_in">set</span> -e

NODES=(<span class="hljs-string">"10.0.1.11"</span> <span class="hljs-string">"10.0.1.12"</span> <span class="hljs-string">"10.0.1.13"</span> <span class="hljs-string">"10.0.1.14"</span>)
MASTER_NODE=<span class="hljs-string">"10.0.1.11"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹éƒ¨ç½²RustFSé›†ç¾¤..."</span>

<span class="hljs-comment"># 1. å‡†å¤‡æ•°æ®ç›®å½•</span>
<span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${NODES[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å‡†å¤‡èŠ‚ç‚¹: <span class="hljs-variable">$node</span>"</span>
    ssh root@<span class="hljs-variable">$node</span> <span class="hljs-string">"mkdir -p /data/rustfs/{data,logs,config} &amp;&amp; chown -R 10001:10001 /data/rustfs"</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># 2. åˆ†å‘é…ç½®æ–‡ä»¶</span>
scp docker-compose.cluster.yml root@<span class="hljs-variable">$MASTER_NODE</span>:/data/rustfs/
scp docker-compose.data.yml root@10.0.1.13:/data/rustfs/docker-compose.yml
scp docker-compose.data.yml root@10.0.1.14:/data/rustfs/docker-compose.yml

<span class="hljs-comment"># 3. æŒ‰é¡ºåºå¯åŠ¨èŠ‚ç‚¹</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨å…ƒæ•°æ®èŠ‚ç‚¹..."</span>
ssh root@10.0.1.11 <span class="hljs-string">"cd /data/rustfs &amp;&amp; docker-compose up -d"</span>
<span class="hljs-built_in">sleep</span> 10

ssh root@10.0.1.12 <span class="hljs-string">"cd /data/rustfs &amp;&amp; docker-compose up -d"</span>  
<span class="hljs-built_in">sleep</span> 10

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨æ•°æ®èŠ‚ç‚¹..."</span>
ssh root@10.0.1.13 <span class="hljs-string">"cd /data/rustfs &amp;&amp; docker-compose up -d"</span>
ssh root@10.0.1.14 <span class="hljs-string">"cd /data/rustfs &amp;&amp; docker-compose up -d"</span>

<span class="hljs-comment"># 4. ç­‰å¾…é›†ç¾¤å°±ç»ª</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç­‰å¾…é›†ç¾¤åˆå§‹åŒ–..."</span>
<span class="hljs-built_in">sleep</span> 30

<span class="hljs-comment"># 5. éªŒè¯é›†ç¾¤çŠ¶æ€</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥é›†ç¾¤çŠ¶æ€..."</span>
curl -f http://<span class="hljs-variable">$MASTER_NODE</span>:9000/minio/cluster/status

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ‰ RustFSé›†ç¾¤éƒ¨ç½²å®Œæˆï¼"</span>
</code></pre>
<h3 data-id="heading-11">è´Ÿè½½å‡è¡¡é…ç½®</h3>
<h4 data-id="heading-12">Nginxè´Ÿè½½å‡è¡¡</h4>
<pre><code class="hljs language-ini" lang="ini">upstream rustfs_cluster {
    server 10.0.1.11:9000 <span class="hljs-attr">max_fails</span>=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30</span>s<span class="hljs-comment">;</span>
    server 10.0.1.12:9000 <span class="hljs-attr">max_fails</span>=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30</span>s<span class="hljs-comment">;</span>
    server 10.0.1.13:9000 <span class="hljs-attr">max_fails</span>=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30</span>s<span class="hljs-comment">;</span>
    server 10.0.1.14:9000 <span class="hljs-attr">max_fails</span>=<span class="hljs-number">3</span> fail_timeout=<span class="hljs-number">30</span>s<span class="hljs-comment">;</span>
    
    <span class="hljs-comment"># ä¼šè¯ä¿æŒï¼ˆé‡è¦ï¼ï¼‰</span>
    ip_hash<span class="hljs-comment">;</span>
}

server {
    listen 80<span class="hljs-comment">;</span>
    server_name rustfs.yourcompany.com<span class="hljs-comment">;</span>
    
    location / {
        proxy_pass http://rustfs_cluster<span class="hljs-comment">;</span>
        proxy_set_header Host $host<span class="hljs-comment">;</span>
        proxy_set_header X-Real-IP $remote_addr<span class="hljs-comment">;</span>
        proxy_connect_timeout 30s<span class="hljs-comment">;</span>
        proxy_read_timeout 300s<span class="hljs-comment">;</span>
    }
    
    <span class="hljs-comment"># å¥åº·æ£€æŸ¥</span>
    location /minio/health/live {
        proxy_pass http://rustfs_cluster<span class="hljs-comment">;</span>
        access_log off<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h3 data-id="heading-13">æ•°æ®å®‰å…¨ä¸å¤‡ä»½</h3>
<h4 data-id="heading-14">çº åˆ ç é…ç½®</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åœ¨masterèŠ‚ç‚¹é…ç½®</span>
environment:
  - <span class="hljs-attr">RUSTFS_ERASURE_CODING</span>=<span class="hljs-number">4</span>:<span class="hljs-number">2</span>  <span class="hljs-comment"># 4ä¸ªæ•°æ®å—ï¼Œ2ä¸ªæ ¡éªŒå—</span>
  - <span class="hljs-attr">RUSTFS_DATA_SHARDS</span>=<span class="hljs-number">4</span>
  - <span class="hljs-attr">RUSTFS_PARITY_SHARDS</span>=<span class="hljs-number">2</span>
</code></pre>
<h4 data-id="heading-15">è‡ªåŠ¨å¤‡ä»½ç­–ç•¥</h4>
<p>åˆ›å»º <code>cluster-backup.sh</code>ï¼š</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># é›†ç¾¤å…ƒæ•°æ®å¤‡ä»½</span>
BACKUP_DIR=<span class="hljs-string">"/backup/rustfs/<span class="hljs-subst">$(date +%Y%m%d)</span>"</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$BACKUP_DIR</span>

<span class="hljs-comment"># 1. å¤‡ä»½å…ƒæ•°æ®èŠ‚ç‚¹é…ç½®</span>
<span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> <span class="hljs-string">"10.0.1.11"</span> <span class="hljs-string">"10.0.1.12"</span>; <span class="hljs-keyword">do</span>
    ssh root@<span class="hljs-variable">$node</span> <span class="hljs-string">"docker exec rustfs tar czf /tmp/metadata.tar.gz /data/.metadata"</span>
    scp root@<span class="hljs-variable">$node</span>:/tmp/metadata.tar.gz <span class="hljs-variable">$BACKUP_DIR</span>/metadata_<span class="hljs-variable">${node}</span>.tar.gz
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># 2. å¤‡ä»½è´Ÿè½½å‡è¡¡é…ç½®</span>
<span class="hljs-built_in">cp</span> /etc/nginx/conf.d/rustfs.conf <span class="hljs-variable">$BACKUP_DIR</span>/

<span class="hljs-comment"># 3. ä¸Šä¼ åˆ°è¿œç¨‹å­˜å‚¨ï¼ˆå¯é€‰ï¼‰</span>
rclone copy <span class="hljs-variable">$BACKUP_DIR</span> oss:rustfs-backup/ --progress

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½å®Œæˆ: <span class="hljs-variable">$BACKUP_DIR</span>"</span>
</code></pre>
<h3 data-id="heading-16">ç›‘æ§å‘Šè­¦ä½“ç³»</h3>
<h4 data-id="heading-17">Prometheusç›‘æ§é…ç½®</h4>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-comment"># prometheus.yml</span>
<span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'rustfs-cluster'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> 
        <span class="hljs-bullet">-</span> <span class="hljs-string">'10.0.1.11:9000'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'10.0.1.12:9000'</span> 
        <span class="hljs-bullet">-</span> <span class="hljs-string">'10.0.1.13:9000'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'10.0.1.14:9000'</span>
    <span class="hljs-attr">metrics_path:</span> <span class="hljs-string">/minio/metrics/cluster</span>
</code></pre>
<h4 data-id="heading-18">Grafanaç›‘æ§çœ‹æ¿</h4>
<p>å…³é”®ç›‘æ§æŒ‡æ ‡ï¼š</p>
<ul>
<li>èŠ‚ç‚¹åœ¨çº¿çŠ¶æ€</li>
<li>å­˜å‚¨ç©ºé—´ä½¿ç”¨ç‡</li>
<li>è¯·æ±‚å»¶è¿Ÿåˆ†å¸ƒ</li>
<li>é”™è¯¯ç‡ç»Ÿè®¡</li>
</ul>
<h3 data-id="heading-19">æ•…éšœæ¢å¤æ¼”ç»ƒ</h3>
<h4 data-id="heading-20">æ¨¡æ‹ŸèŠ‚ç‚¹æ•…éšœæ¢å¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åœæ­¢ä¸€ä¸ªæ•°æ®èŠ‚ç‚¹</span>
ssh root@10.0.1.13 <span class="hljs-string">"docker-compose down"</span>

<span class="hljs-comment"># 2. è§‚å¯Ÿé›†ç¾¤çŠ¶æ€ï¼ˆåº”è¯¥è‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–èŠ‚ç‚¹ï¼‰</span>
curl http://10.0.1.11:9000/minio/cluster/status

<span class="hljs-comment"># 3. æ¢å¤èŠ‚ç‚¹</span>
ssh root@10.0.1.13 <span class="hljs-string">"docker-compose up -d"</span>

<span class="hljs-comment"># 4. æ•°æ®åŒæ­¥éªŒè¯</span>
ssh root@10.0.1.13 <span class="hljs-string">"docker logs rustfs --tail=100 | grep sync"</span>
</code></pre>
<h3 data-id="heading-21">å¸¸è§é—®é¢˜æ’å‘æŒ‡å—</h3>
<h4 data-id="heading-22">é—®é¢˜1ï¼šèŠ‚ç‚¹é—´ç½‘ç»œä¸é€š</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç½‘ç»œè¿é€šæ€§</span>
<span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> 11 12 13 14; <span class="hljs-keyword">do</span>
    ping -c 3 10.0.1.<span class="hljs-variable">$node</span>
    telnet 10.0.1.<span class="hljs-variable">$node</span> 9000
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># è§£å†³æ–¹æ¡ˆï¼šé…ç½®é˜²ç«å¢™</span>
firewall-cmd --add-port=9000/tcp --permanent
firewall-cmd --add-port=9001/tcp --permanent  
firewall-cmd --reload
</code></pre>
<h4 data-id="heading-23">é—®é¢˜2ï¼šæ•°æ®åŒæ­¥å¤±è´¥</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥èŠ‚ç‚¹æ—¶é—´åŒæ­¥</span>
timedatectl status

<span class="hljs-comment"># å¼ºåˆ¶æ—¶é—´åŒæ­¥</span>
ntpdate pool.ntp.org

<span class="hljs-comment"># æ£€æŸ¥ç£ç›˜ç©ºé—´</span>
<span class="hljs-built_in">df</span> -h /data/rustfs
</code></pre>
<h4 data-id="heading-24">é—®é¢˜3ï¼šè´Ÿè½½ä¸å‡è¡¡</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è°ƒæ•´è´Ÿè½½å‡è¡¡ç­–ç•¥</span>
upstream rustfs_cluster {
    least_conn;  <span class="hljs-comment"># æœ€å°‘è¿æ¥æ•°ç­–ç•¥</span>
    server 10.0.1.11:9000 weight=2;  <span class="hljs-comment"># ä¸»èŠ‚ç‚¹æƒé‡æ›´é«˜</span>
    server 10.0.1.12:9000 weight=2;
    server 10.0.1.13:9000 weight=1;
    server 10.0.1.14:9000 weight=1;
}
</code></pre>
<h3 data-id="heading-25">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<h4 data-id="heading-26">ç”Ÿäº§ç¯å¢ƒè°ƒä¼˜</h4>
<pre><code class="hljs language-bash" lang="bash">environment:
  - RUSTFS_CACHE_SIZE=2G  <span class="hljs-comment"># æ ¹æ®å†…å­˜è°ƒæ•´</span>
  - RUSTFS_MAX_CONNECTIONS=1000
  - RUSTFS_READ_AFTER_WRITE_QUORUM=2
  - RUSTFS_WRITE_QUORUM=3
</code></pre>
<h3 data-id="heading-27">æ€»ç»“</h3>
<p>é€šè¿‡è¿™å¥—é›†ç¾¤æ–¹æ¡ˆï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p>
<ul>
<li>âœ… é«˜å¯ç”¨ï¼šå•èŠ‚ç‚¹æ•…éšœä¸å½±å“æœåŠ¡</li>
<li>âœ… æ•°æ®å®‰å…¨ï¼šçº åˆ ç ä¿è¯æ•°æ®å¯é æ€§</li>
<li>âœ… å¼¹æ€§æ‰©å±•ï¼šéšæ—¶æ·»åŠ æ–°èŠ‚ç‚¹</li>
<li>âœ… ç›‘æ§å‘Šè­¦ï¼šå®æ—¶æŒæ¡é›†ç¾¤çŠ¶æ€</li>
</ul>
<p>â€‹<strong>éƒ¨ç½²å»ºè®®</strong>ï¼š</p>
<ol>
<li>å…ˆåœ¨å°è§„æ¨¡ç¯å¢ƒæµ‹è¯•éªŒè¯</li>
<li>ç”Ÿäº§ç¯å¢ƒåŠ¡å¿…åšå¥½å¤‡ä»½</li>
<li>å®šæœŸè¿›è¡Œæ•…éšœæ¼”ç»ƒ</li>
<li>å…³æ³¨RustFSç‰ˆæœ¬æ›´æ–°</li>
</ol>
<p>è¿™å¥—æ–¹æ¡ˆåœ¨æˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œäº†3ä¸ªæœˆï¼Œç»å†äº†å¤šæ¬¡ç¡¬ä»¶æ•…éšœè€ƒéªŒã€‚å¦‚æœä½ åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼</p>
<p>è§‰å¾—æœ‰ç”¨çš„è¯ç»™ä¸ªä¸‰è¿ï¼Œä¸‹æ¬¡åˆ†äº«RustFSçš„æ€§èƒ½è°ƒä¼˜å®æˆ˜ï¼</p>
<hr/>
<p>ä»¥ä¸‹æ˜¯æ·±å…¥å­¦ä¹  RustFS çš„æ¨èèµ„æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">RustFS</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">RustFS å®˜æ–¹æ–‡æ¡£</a>- æä¾›æ¶æ„ã€å®‰è£…æŒ‡å—å’Œ API å‚è€ƒã€‚</p>
<p>GitHub ä»“åº“ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a> - è·å–æºä»£ç ã€æäº¤é—®é¢˜æˆ–è´¡çŒ®ä»£ç ã€‚</p>
<p>ç¤¾åŒºæ”¯æŒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Forgs%2Frustfs%2Fdiscussions" target="_blank" title="https://link.zhihu.com/?target=https%3A//github.com/orgs/rustfs/discussions" ref="nofollow noopener noreferrer">GitHub Discussions</a>- ä¸å¼€å‘è€…äº¤æµç»éªŒå’Œè§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <!----></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaåŸºç¡€-9ï¼šæ·±å…¥ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ï¼šä»åº•å±‚æºç åˆ°æ ¸å¿ƒåŸç†çš„å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7603677143215046671</link>    <guid>https://juejin.cn/post/7603677143215046671</guid>    <pubDate>2026-02-08T14:00:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603677143215046671" data-draft-id="7603699739223982095" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaåŸºç¡€-9ï¼šæ·±å…¥ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ï¼šä»åº•å±‚æºç åˆ°æ ¸å¿ƒåŸç†çš„å…¨é¢è§£æ"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-02-08T14:00:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="beata"/> <meta itemprop="url" content="https://juejin.cn/user/1839900247461280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaåŸºç¡€-9ï¼šæ·±å…¥ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ï¼šä»åº•å±‚æºç åˆ°æ ¸å¿ƒåŸç†çš„å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1839900247461280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    beata
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T14:00:34.000Z" title="Sun Feb 08 2026 14:00:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦ç†è§£ JVMï¼Ÿ</h2>
<p>Java çš„â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€å¹¶éé­”æ³•ï¼Œè€Œæ˜¯ç”± <strong>Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰</strong> è¿™ä¸€ç²¾å¦™çš„è¿è¡Œæ—¶ç¯å¢ƒå®ç°çš„ã€‚ç„¶è€Œï¼Œè®¸å¤šå¼€å‘è€…ä»…åœç•™åœ¨ <code>java -jar</code> å¯åŠ¨åº”ç”¨çš„å±‚é¢ï¼Œå¯¹ JVM å†…éƒ¨å¦‚ä½•åŠ è½½ç±»ã€åˆ†é…å†…å­˜ã€æ‰§è¡Œå­—èŠ‚ç ã€å›æ”¶åƒåœ¾ä¸€æ— æ‰€çŸ¥ã€‚è¿™å¯¼è‡´åœ¨é¢å¯¹ <strong>OOMï¼ˆOutOfMemoryErrorï¼‰</strong>ã€<strong>é«˜ CPU å ç”¨</strong>ã€<strong>GC é¢‘ç¹åœé¡¿</strong> ç­‰é—®é¢˜æ—¶æŸæ‰‹æ— ç­–ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ <strong>æ·±å…¥ JVM åº•å±‚</strong>ï¼Œç»“åˆ <strong>HotSpot æºç </strong>ï¼ˆOpenJDK ä¸»æµå®ç°ï¼‰ä¸<strong>æ ¸å¿ƒåŸç†</strong>ï¼Œç³»ç»Ÿæ€§åœ°æ­å¼€ JVM çš„ç¥ç§˜é¢çº±ã€‚æˆ‘ä»¬å°†ä»å¯åŠ¨æµç¨‹ã€å†…å­˜æ¨¡å‹ã€ç±»åŠ è½½ã€æ‰§è¡Œå¼•æ“åˆ°åƒåœ¾å›æ”¶ï¼Œå±‚å±‚é€’è¿›ï¼ŒçœŸæ­£ç†è§£â€œJava æ˜¯å¦‚ä½•è·‘èµ·æ¥çš„â€ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€JVM æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” æ¶æ„æ€»è§ˆ</h2>
<p>JVM å¹¶éä¸€ä¸ªå•ä¸€ç¨‹åºï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>è§„èŒƒ + å®ç°</strong>ã€‚ç›®å‰æœ€ä¸»æµçš„å®ç°æ˜¯ <strong>HotSpot VM</strong>ï¼ˆç”± Oracle ç»´æŠ¤ï¼Œé›†æˆäº OpenJDK/Oracle JDKï¼‰ã€‚</p>
<h3 data-id="heading-2">HotSpot çš„æ ¸å¿ƒç»„ä»¶ï¼ˆC++ å®ç°ï¼‰</h3>



































<table><thead><tr><th>ç»„ä»¶</th><th>åŠŸèƒ½</th><th>æºç ä½ç½®ï¼ˆOpenJDKï¼‰</th></tr></thead><tbody><tr><td><strong>Class Loader Subsystem</strong></td><td>åŠ è½½ <code>.class</code> å­—èŠ‚ç </td><td><code>src/hotspot/share/classfile/</code></td></tr><tr><td><strong>Runtime Data Areas</strong></td><td>è¿è¡Œæ—¶å†…å­˜å¸ƒå±€</td><td><code>src/hotspot/share/memory/</code></td></tr><tr><td><strong>Execution Engine</strong></td><td>æ‰§è¡Œå­—èŠ‚ç ï¼ˆè§£é‡Šå™¨ + JITï¼‰</td><td><code>src/hotspot/share/interpreter/</code>, <code>src/hotspot/share/opto/</code></td></tr><tr><td><strong>Garbage Collector</strong></td><td>è‡ªåŠ¨å†…å­˜ç®¡ç†</td><td><code>src/hotspot/share/gc/</code></td></tr><tr><td><strong>Native Interface (JNI)</strong></td><td>è°ƒç”¨æœ¬åœ° C/C++ ä»£ç </td><td><code>src/hotspot/share/prims/</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ” <strong>æç¤º</strong>ï¼šOpenJDK æºç å¯åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenjdk%2Fjdk" target="_blank" title="https://github.com/openjdk/jdk" ref="nofollow noopener noreferrer">github.com/openjdk/jdk</a> æŸ¥çœ‹ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">äºŒã€JVM å¯åŠ¨æµç¨‹ï¼šä» <code>java</code> å‘½ä»¤åˆ° main æ–¹æ³•</h2>
<p>å½“ä½ æ‰§è¡Œ <code>java MyApp</code> æ—¶ï¼ŒJVM ç»å†äº†ä»¥ä¸‹å…³é”®æ­¥éª¤ï¼š</p>
<ol>
<li><strong>å¯åŠ¨ Launcherï¼ˆC è¯­è¨€ï¼‰</strong><br/>
<code>java.c</code> â†’ <code>JLI_Launch()</code> â†’ åˆå§‹åŒ– JVM å‚æ•°ã€classpathã€‚</li>
<li><strong>åˆ›å»º JVM å®ä¾‹ï¼ˆJNI_CreateJavaVMï¼‰</strong><br/>
è°ƒç”¨ <code>Threads::create_vm()</code>ï¼ˆä½äº <code>thread.cpp</code>ï¼‰ï¼Œå®Œæˆï¼š
<ul>
<li>åˆå§‹åŒ–å †å†…å­˜</li>
<li>åˆ›å»ºä¸»çº¿ç¨‹ï¼ˆmain threadï¼‰</li>
<li>å¯åŠ¨è§£é‡Šå™¨</li>
</ul>
</li>
<li><strong>åŠ è½½ä¸»ç±»ï¼ˆMyApp.classï¼‰</strong><br/>
é€šè¿‡ <code>SystemDictionary::resolve_or_fail()</code> åŠ è½½å¹¶é“¾æ¥ <code>MyApp</code>ã€‚</li>
<li><strong>è°ƒç”¨ main æ–¹æ³•</strong><br/>
é€šè¿‡ JNI åå°„æœºåˆ¶ï¼š<code>env-&gt;CallStaticVoidMethod(cls, main_id, args)</code>ã€‚</li>
</ol>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®ç‚¹</strong>ï¼šJVM æœ¬èº«æ˜¯ç”¨ C++ ç¼–å†™çš„ï¼Œä½†å…¶â€œçµé­‚â€â€”â€”å­—èŠ‚ç æ‰§è¡Œå’Œ GCâ€”â€”å¤§é‡ä½¿ç”¨æ±‡ç¼–ä¼˜åŒ–ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€è¿è¡Œæ—¶æ•°æ®åŒºï¼šJVM çš„å†…å­˜å¸ƒå±€ï¼ˆHotSpot å®ç°ï¼‰</h2>
<p>JVM è§„èŒƒå®šä¹‰äº†é€»è¾‘å†…å­˜åŒºåŸŸï¼ŒHotSpot å¯¹å…¶è¿›è¡Œäº†é«˜æ•ˆå®ç°ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">+---------------------------------+
|            Method Area          | â† å­˜å‚¨ç±»å…ƒæ•°æ®ï¼ˆJDK8+ ä¸º Metaspaceï¼Œä½¿ç”¨ native memoryï¼‰
+---------------------------------+
|              Heap               | â† æ‰€æœ‰å¯¹è±¡å®ä¾‹ã€æ•°ç»„ï¼ˆåˆ†ä»£ï¼šYoung/Oldï¼‰
+---------------------------------+
| Thread 1: Java Virtual Machine Stack | â† çº¿ç¨‹ç§æœ‰ï¼Œæ ˆå¸§ï¼ˆFrameï¼‰åŒ…å«å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆ
| Thread 2: Java Virtual Machine Stack |
| ...                             |
+---------------------------------+
|        PC Register (per thread) | â† è®°å½•å½“å‰æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€
+---------------------------------+
|     Native Method Stack         | â† ç”¨äº JNI è°ƒç”¨
+---------------------------------+
</code></pre>
<h3 data-id="heading-5">å…³é”®ç»†èŠ‚ï¼ˆæºç è§†è§’ï¼‰</h3>
<ul>
<li><strong>å †åˆå§‹åŒ–</strong>ï¼š<code>Universe::initialize_heap()</code>ï¼ˆ<code>universe.cpp</code>ï¼‰<br/>
æ ¹æ® GC ç±»å‹ï¼ˆG1/ZGCç­‰ï¼‰åˆ›å»ºä¸åŒç»“æ„çš„å †ã€‚</li>
<li><strong>æ ˆå¸§åˆ›å»º</strong>ï¼š<code>InterpreterRuntime::new_frame()</code><br/>
æ¯æ¬¡æ–¹æ³•è°ƒç”¨ï¼ŒJVM åœ¨å½“å‰çº¿ç¨‹æ ˆä¸Š push ä¸€ä¸ªæ–°å¸§ã€‚</li>
<li><strong>Metaspace</strong>ï¼š<code>Metaspace::allocate()</code><br/>
ä½¿ç”¨ <code>mmap()</code> ç›´æ¥å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ï¼Œé¿å… OOM å¯¼è‡´ JVM å´©æºƒã€‚</li>
</ul>
<h3 data-id="heading-6">è¡¥å……è¯´æ˜ï¼šè¿è¡Œæ—¶æ•°æ®åŒºè¯¦è§£</h3>
<p>JVM çš„è¿è¡Œæ—¶æ•°æ®åŒºæ˜¯ç¨‹åºæ‰§è¡Œçš„â€œèˆå°â€ï¼Œæ‰€æœ‰å˜é‡ã€å¯¹è±¡ã€æ–¹æ³•è°ƒç”¨éƒ½ä¾èµ–äºè¿™ä¸€å†…å­˜æ¨¡å‹ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<strong>JVM è§„èŒƒåªå®šä¹‰äº†é€»è¾‘ç»“æ„ï¼Œå…·ä½“å®ç°ç”±å„è™šæ‹Ÿæœºå‚å•†å†³å®š</strong>ã€‚HotSpot ä½œä¸ºäº‹å®æ ‡å‡†ï¼Œå…¶å†…å­˜ç®¡ç†é«˜åº¦ä¼˜åŒ–ï¼Œä½†ä¹Ÿå¸¦æ¥äº†ç†è§£ä¸Šçš„å¤æ‚æ€§ã€‚</p>
<h4 data-id="heading-7">çº¿ç¨‹ç§æœ‰ vs çº¿ç¨‹å…±äº«</h4>
<ul>
<li>
<p><strong>çº¿ç¨‹ç§æœ‰åŒºåŸŸ</strong>ï¼ˆæ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹æ‹¥æœ‰ï¼‰ï¼š</p>
<ul>
<li><strong>ç¨‹åºè®¡æ•°å™¨ï¼ˆPC Registerï¼‰</strong>ï¼š<br/>
è¿™æ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ JVM è§„èŒƒä¸­<strong>ä¸ä¼šå‘ç”Ÿ OutOfMemoryError</strong> çš„åŒºåŸŸã€‚å®ƒè®°å½•å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€ã€‚å¦‚æœæ˜¯ native æ–¹æ³•ï¼Œåˆ™å€¼ä¸º undefinedã€‚</li>
<li><strong>Java è™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stackï¼‰</strong>ï¼š<br/>
æ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª<strong>æ ˆå¸§ï¼ˆStack Frameï¼‰</strong>ã€‚æ ˆå¸§åŒ…å«ï¼š
<ul>
<li><strong>å±€éƒ¨å˜é‡è¡¨ï¼ˆLocal Variable Tableï¼‰</strong>ï¼šä»¥ slot ä¸ºå•ä½å­˜å‚¨åŸºæœ¬ç±»å‹ã€å¯¹è±¡å¼•ç”¨ï¼ˆéå¯¹è±¡æœ¬èº«ï¼ï¼‰ã€‚</li>
<li><strong>æ“ä½œæ•°æ ˆï¼ˆOperand Stackï¼‰</strong>ï¼šç”¨äºå­—èŠ‚ç æŒ‡ä»¤çš„è®¡ç®—ï¼ˆå¦‚ <code>iadd</code> ä»æ ˆé¡¶å¼¹å‡ºä¸¤ä¸ª int ç›¸åŠ åå‹å›ï¼‰ã€‚</li>
<li><strong>åŠ¨æ€é“¾æ¥ï¼ˆDynamic Linkingï¼‰</strong>ï¼šæŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„å¼•ç”¨ï¼Œæ”¯æŒæ–¹æ³•è°ƒç”¨æ—¶çš„ç¬¦å·è§£æã€‚</li>
<li><strong>æ–¹æ³•è¿”å›åœ°å€</strong>ï¼šç”¨äºæ­£å¸¸æˆ–å¼‚å¸¸è¿”å›æ—¶æ¢å¤ä¸Šå±‚è°ƒç”¨ã€‚</li>
</ul>
<blockquote>
<p>âš ï¸ æ ˆæº¢å‡ºï¼ˆ<code>StackOverflowError</code>ï¼‰é€šå¸¸ç”±æ— é™é€’å½’æˆ–è¿‡æ·±è°ƒç”¨é“¾å¼•èµ·ï¼›è€Œ <code>-Xss</code> å‚æ•°å¯è°ƒæ•´å•ä¸ªçº¿ç¨‹æ ˆå¤§å°ã€‚</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹å…±äº«åŒºåŸŸ</strong>ï¼ˆæ‰€æœ‰çº¿ç¨‹å…±ç”¨ï¼‰ï¼š</p>
<ul>
<li><strong>å †ï¼ˆHeapï¼‰</strong>ï¼š<br/>
å‡ ä¹æ‰€æœ‰å¯¹è±¡å®ä¾‹å’Œæ•°ç»„éƒ½åœ¨æ­¤åˆ†é…ï¼ˆJIT é€ƒé€¸åˆ†æå¯èƒ½å¯¼è‡´æ ˆä¸Šåˆ†é…ä¾‹å¤–ï¼‰ã€‚å®ƒæ˜¯ GC çš„ä¸»æˆ˜åœºï¼Œä¹Ÿæ˜¯ OOM æœ€å¸¸å‘ç”Ÿçš„åŒºåŸŸã€‚</li>
<li><strong>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</strong>ï¼š<br/>
å­˜å‚¨<strong>ç±»çš„å…ƒæ•°æ®</strong>ï¼ŒåŒ…æ‹¬ï¼š
<ul>
<li>ç±»çš„å…¨é™å®šåã€çˆ¶ç±»ã€æ¥å£</li>
<li>å­—æ®µå’Œæ–¹æ³•ä¿¡æ¯ï¼ˆå«å­—èŠ‚ç ï¼‰</li>
<li>å¸¸é‡æ± ï¼ˆConstant Poolï¼‰</li>
<li>é™æ€å˜é‡ï¼ˆæ³¨æ„ï¼šJDK 7+ å·²å°†å­—ç¬¦ä¸²å¸¸é‡æ± ç§»å…¥å †ï¼‰</li>
</ul>
<blockquote>
<p>ğŸ”¥ <strong>Metaspace çš„é©å‘½æ€§æ”¹è¿›</strong>ï¼š<br/>
JDK 8 å½»åº•åºŸå¼ƒäº†â€œæ°¸ä¹…ä»£ï¼ˆPermGenï¼‰â€ï¼Œæ”¹ç”¨ <strong>Metaspace</strong> â€”â€” å®ƒä¸å†å—é™äº JVM å †å†…å­˜ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„æœ¬åœ°å†…å­˜ï¼ˆnative memoryï¼‰ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>ä¸å†å› â€œæ°¸ä¹…ä»£æ»¡â€å¯¼è‡´ Full GCï¼›</li>
<li>å¯é€šè¿‡ <code>-XX:MaxMetaspaceSize</code> é™åˆ¶å…¶ä¸Šé™ï¼ˆé»˜è®¤æ— é™åˆ¶ï¼Œå¯èƒ½è€—å°½ç‰©ç†å†…å­˜ï¼‰ï¼›</li>
<li>å…ƒæ•°æ®åˆ†é…å¤±è´¥ä¼šæŠ›å‡º <code>java.lang.OutOfMemoryError: Metaspace</code>ï¼Œè€Œéæ—§ç‰ˆçš„ <code>PermGen space</code>ã€‚</li>
</ul>
</blockquote>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>å®è·µæç¤º</strong>ï¼š<br/>
ä½¿ç”¨ <code>jcmd &lt;pid&gt; VM.metaspace</code> å¯å®æ—¶æŸ¥çœ‹ Metaspace ä½¿ç”¨æƒ…å†µï¼›<br/>
åœ¨å¾®æœåŠ¡æˆ–çƒ­éƒ¨ç½²é¢‘ç¹çš„åœºæ™¯ä¸­ï¼ŒåŠ¡å¿…ç›‘æ§ Metaspaceï¼Œé˜²æ­¢ç±»åŠ è½½å™¨æ³„æ¼ï¼ˆClassLoader Leakï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">å››ã€ç±»åŠ è½½æœºåˆ¶ï¼šåŒäº²å§”æ´¾ä¸å­—èŠ‚ç éªŒè¯</h2>
<h3 data-id="heading-9">1. ç±»åŠ è½½å™¨å±‚æ¬¡</h3>
<pre><code class="hljs language-java" lang="java">Bootstrap <span class="hljs-title function_">ClassLoader</span> <span class="hljs-params">(C++)</span> 
    â†‘
Extension <span class="hljs-title function_">ClassLoader</span> <span class="hljs-params">(sun.misc.Launcher$ExtClassLoader)</span>
    â†‘
Application <span class="hljs-title function_">ClassLoader</span> <span class="hljs-params">(sun.misc.Launcher$AppClassLoader)</span>
</code></pre>
<h3 data-id="heading-10">2. åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆæºç ï¼š<code>ClassLoader.loadClass()</code>ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="hljs-type">boolean</span> resolve) {
    <span class="hljs-keyword">synchronized</span> (getClassLoadingLock(name)) {
        <span class="hljs-comment">// 1. å…ˆæ£€æŸ¥æ˜¯å¦å·²åŠ è½½</span>
        Class&lt;?&gt; c = findLoadedClass(name);
        <span class="hljs-keyword">if</span> (c == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// 2. å§”æ‰˜çˆ¶åŠ è½½å™¨</span>
                <span class="hljs-keyword">if</span> (parent != <span class="hljs-literal">null</span>) {
                    c = parent.loadClass(name, <span class="hljs-literal">false</span>);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// 3. é¡¶å±‚å§”æ‰˜ç»™ Bootstrap</span>
                    c = findBootstrapClassOrNull(name);
                }
            } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {}
            <span class="hljs-keyword">if</span> (c == <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// 4. è‡ªå·±åŠ è½½</span>
                c = findClass(name);
            }
        }
        <span class="hljs-keyword">if</span> (resolve) resolveClass(c);
        <span class="hljs-keyword">return</span> c;
    }
}
</code></pre>
<blockquote>
<p>âœ… <strong>ç›®çš„</strong>ï¼šé˜²æ­¢ç”¨æˆ·è‡ªå®šä¹‰ <code>java.lang.String</code> è¦†ç›–æ ¸å¿ƒç±»ï¼Œä¿éšœå®‰å…¨ã€‚</p>
</blockquote>
<h3 data-id="heading-11">3. å­—èŠ‚ç éªŒè¯ï¼ˆVerificationï¼‰</h3>
<p>åœ¨ <code>ClassFileParser::parseClassFile()</code> ä¸­ï¼ŒJVM ä¼šå¯¹å­—èŠ‚ç è¿›è¡Œå››é˜¶æ®µéªŒè¯ï¼š</p>
<ol>
<li>æ–‡ä»¶æ ¼å¼éªŒè¯ï¼ˆé­”æ•°ã€ç‰ˆæœ¬ï¼‰</li>
<li>å…ƒæ•°æ®éªŒè¯ï¼ˆç»§æ‰¿å…³ç³»ã€final æ–¹æ³•ï¼‰</li>
<li>å­—èŠ‚ç éªŒè¯ï¼ˆæ“ä½œæ•°æ ˆæº¢å‡ºã€ç±»å‹åŒ¹é…ï¼‰</li>
<li>ç¬¦å·å¼•ç”¨éªŒè¯ï¼ˆé“¾æ¥é˜¶æ®µï¼‰</li>
</ol>
<h3 data-id="heading-12">è¡¥å……è¯´æ˜ï¼šç±»åŠ è½½æœºåˆ¶æ·±åº¦è§£æ</h3>
<p>ç±»åŠ è½½æ˜¯ JVM å°† <code>.class</code> æ–‡ä»¶è½¬åŒ–ä¸ºå¯æ‰§è¡Œ Java ç±»å‹çš„å…³é”®è¿‡ç¨‹ã€‚å®ƒä¸ä»…æ˜¯â€œè¯»å–æ–‡ä»¶â€é‚£ä¹ˆç®€å•ï¼Œè€Œæ˜¯ä¸€å¥—<strong>å®‰å…¨ã€å¯é ã€å¯æ‰©å±•</strong>çš„æœºåˆ¶ã€‚</p>
<h4 data-id="heading-13">ç±»åŠ è½½çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ</h4>
<p>JVM è§„èŒƒå°†ç±»åŠ è½½åˆ†ä¸º <strong>5 ä¸ªé˜¶æ®µ</strong>ï¼Œé€šå¸¸åˆå¹¶ä¸º <strong>3 æ­¥</strong>ï¼š</p>
<ol>
<li>
<p><strong>åŠ è½½ï¼ˆLoadingï¼‰</strong></p>
<ul>
<li>é€šè¿‡ç±»çš„å…¨é™å®šåè·å–å…¶äºŒè¿›åˆ¶å­—èŠ‚æµï¼ˆæ¥æºä¸é™äº <code>.class</code> æ–‡ä»¶ï¼Œä¹Ÿå¯æ¥è‡ªç½‘ç»œã€æ•°æ®åº“ã€åŠ¨æ€ç”Ÿæˆç­‰ï¼‰ï¼›</li>
<li>å°†å­—èŠ‚æµè§£æä¸º JVM å†…éƒ¨çš„ <code>InstanceKlass</code> æˆ– <code>InstanceMirrorKlass</code> å¯¹è±¡ï¼›</li>
<li>åœ¨æ–¹æ³•åŒºä¸­åˆ›å»ºç±»çš„è¿è¡Œæ—¶è¡¨ç¤ºï¼›</li>
<li>åœ¨å †ä¸­åˆ›å»º <code>java.lang.Class</code> å¯¹è±¡ä½œä¸ºè®¿é—®å…¥å£ã€‚</li>
</ul>
</li>
<li>
<p><strong>é“¾æ¥ï¼ˆLinkingï¼‰</strong></p>
<ul>
<li><strong>éªŒè¯ï¼ˆVerificationï¼‰</strong>ï¼šç¡®ä¿å­—èŠ‚ç ç¬¦åˆ JVM è§„èŒƒï¼Œé˜²æ­¢æ¶æ„ä»£ç ç ´åè™šæ‹Ÿæœºï¼ˆè§ä¸‹æ–‡è¯¦è¿°ï¼‰ï¼›</li>
<li><strong>å‡†å¤‡ï¼ˆPreparationï¼‰</strong>ï¼šä¸º<strong>é™æ€å˜é‡</strong>åˆ†é…å†…å­˜å¹¶è®¾ç½®<strong>åˆå§‹å€¼</strong>ï¼ˆæ³¨æ„ï¼šä¸æ˜¯èµ‹å€¼ï¼ä¾‹å¦‚ <code>static int x = 100;</code> æ­¤æ—¶ <code>x = 0</code>ï¼‰ï¼›</li>
<li><strong>è§£æï¼ˆResolutionï¼‰</strong>ï¼šå°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨ï¼ˆå¦‚ <code>#3 = Methodref java/lang/Object."&lt;init&gt;":()V</code>ï¼‰æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆå¦‚å†…å­˜åœ°å€æˆ–åç§»é‡ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆå§‹åŒ–ï¼ˆInitializationï¼‰</strong></p>
<ul>
<li>æ‰§è¡Œ <code>&lt;clinit&gt;</code> æ–¹æ³•ï¼ˆç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆï¼ŒåŒ…å«æ‰€æœ‰é™æ€å˜é‡èµ‹å€¼å’Œ static å—ï¼‰ï¼›</li>
<li><strong>è¿™æ˜¯ç±»åŠ è½½çš„æœ€åä¸€æ­¥ï¼Œä¹Ÿæ˜¯ Java ä»£ç çœŸæ­£å¼€å§‹æ‰§è¡Œçš„èµ·ç‚¹</strong>ï¼›</li>
<li>åˆå§‹åŒ–æ˜¯<strong>çº¿ç¨‹å®‰å…¨</strong>çš„ï¼šJVM ä¼šåŠ é”ï¼Œç¡®ä¿åŒä¸€ç±»åªè¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-14">åŒäº²å§”æ´¾æ¨¡å‹çš„æ·±å±‚æ„ä¹‰</h4>
<p>åŒäº²å§”æ´¾ä¸ä»…æ˜¯â€œå…ˆé—®çˆ¸çˆ¸â€ï¼Œæ›´æ˜¯ä¸€ç§<strong>å®‰å…¨æ²™ç®±æœºåˆ¶</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒç±»éš”ç¦»</strong>ï¼š<code>java.*</code> åŒ…ä¸‹çš„ç±»åªèƒ½ç”± Bootstrap ClassLoader åŠ è½½ã€‚å³ä½¿ä½ åœ¨ classpath æ”¾ä¸€ä¸ª <code>java.lang.HackString.class</code>ï¼ŒAppClassLoader åœ¨å°è¯•åŠ è½½æ—¶ä¼šå…ˆå§”æ‰˜ç»™çˆ¶åŠ è½½å™¨ï¼Œè€Œçˆ¶åŠ è½½å™¨ï¼ˆBootstrapï¼‰æ—©å·²åŠ è½½äº†çœŸæ­£çš„ <code>String</code>ï¼Œå› æ­¤ä½ çš„â€œä¼ªé€ ç±»â€æ°¸è¿œä¸ä¼šè¢«ä½¿ç”¨ã€‚</li>
<li><strong>é¿å…ç±»é‡å¤åŠ è½½</strong>ï¼šåŒä¸€ä¸ªç±»åœ¨ JVM ä¸­ç”± <strong>â€œç±»åŠ è½½å™¨ + ç±»å…¨åâ€</strong> å”¯ä¸€ç¡®å®šã€‚è‹¥æ— å§”æ´¾æœºåˆ¶ï¼Œä¸åŒåŠ è½½å™¨å¯èƒ½åŠ è½½åŒä¸€ç±»å¤šæ¬¡ï¼Œå¯¼è‡´ <code>ClassCastException</code>ï¼ˆçœ‹ä¼¼ç›¸åŒç±»å‹ï¼Œå®åˆ™ä¸åŒ Class å¯¹è±¡ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>ğŸ› ï¸ <strong>æ‰“ç ´åŒäº²å§”æ´¾ï¼Ÿ</strong><br/>
æŸäº›æ¡†æ¶ï¼ˆå¦‚ Tomcatã€OSGiï¼‰éœ€è¦<strong>éš”ç¦»ä¸åŒåº”ç”¨çš„ç±»</strong>ï¼Œä¼šè‡ªå®šä¹‰ç±»åŠ è½½å™¨å¹¶<strong>é‡å†™ <code>loadClass()</code> æ–¹æ³•</strong>ï¼Œå®ç°â€œå­ä¼˜å…ˆâ€ç­–ç•¥ã€‚ä½†è¿™å¿…é¡»è°¨æ…å¤„ç†ï¼Œå¦åˆ™ææ˜“å¼•å‘ç±»å†²çªã€‚</p>
</blockquote>
<h4 data-id="heading-15">å­—èŠ‚ç éªŒè¯ï¼šJVM çš„â€œå®‰æ£€é—¨â€</h4>
<p>éªŒè¯æ˜¯ä¿éšœ JVM ç¨³å®šæ€§çš„åŸºçŸ³ã€‚HotSpot åœ¨ <code>ClassVerifier</code> ä¸­å®ç°äº†ä¸¥æ ¼çš„å››é˜¶æ®µæ£€æŸ¥ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€é˜¶æ®µï¼šæ–‡ä»¶æ ¼å¼éªŒè¯</strong><br/>
æ£€æŸ¥é­”æ•°ï¼ˆ<code>0xCAFEBABE</code>ï¼‰ã€ä¸»æ¬¡ç‰ˆæœ¬å·æ˜¯å¦å…¼å®¹å½“å‰ JVMã€‚</li>
<li><strong>ç¬¬äºŒé˜¶æ®µï¼šå…ƒæ•°æ®éªŒè¯</strong><br/>
æ£€æŸ¥ç±»æ˜¯å¦ç»§æ‰¿äº† final ç±»ã€æ–¹æ³•æ˜¯å¦é‡å†™äº†ä¸å¯é‡å†™çš„æ–¹æ³•ç­‰ã€‚</li>
<li><strong>ç¬¬ä¸‰é˜¶æ®µï¼šå­—èŠ‚ç éªŒè¯ï¼ˆæœ€è€—æ—¶ï¼‰</strong><br/>
æ¨¡æ‹Ÿæ‰§è¡Œå­—èŠ‚ç ï¼ŒéªŒè¯ï¼š
<ul>
<li>æ“ä½œæ•°æ ˆä¸ä¼šæº¢å‡º/ä¸‹æº¢ï¼›</li>
<li>æ‰€æœ‰è·³è½¬æŒ‡ä»¤æŒ‡å‘åˆæ³•ä½ç½®ï¼›</li>
<li>æ–¹æ³•è°ƒç”¨å‚æ•°ç±»å‹åŒ¹é…ï¼›</li>
<li><code>return</code> ç±»å‹ä¸æ–¹æ³•å£°æ˜ä¸€è‡´ã€‚</li>
</ul>
</li>
<li><strong>ç¬¬å››é˜¶æ®µï¼šç¬¦å·å¼•ç”¨éªŒè¯</strong><br/>
åœ¨è§£æé˜¶æ®µï¼Œç¡®ä¿å¼•ç”¨çš„ç±»ã€å­—æ®µã€æ–¹æ³•ç¡®å®å­˜åœ¨ä¸”å¯è®¿é—®ã€‚</li>
</ul>
<blockquote>
<p>ğŸ”’ <strong>å®‰å…¨ä»·å€¼</strong>ï¼š<br/>
å³ä½¿ä½ é€šè¿‡ <code>Unsafe.defineAnonymousClass()</code> åŠ¨æ€ç”Ÿæˆå­—èŠ‚ç ï¼ŒJVM ä»ä¼šå¯¹å…¶è¿›è¡ŒéªŒè¯ï¼ˆé™¤éæ˜¾å¼å…³é—­ <code>-noverify</code>ï¼Œä½†ç”Ÿäº§ç¯å¢ƒä¸¥ç¦ä½¿ç”¨ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-16">äº”ã€æ‰§è¡Œå¼•æ“ï¼šè§£é‡Šå™¨ + JIT ç¼–è¯‘å™¨</h2>
<p>JVM ä¸ç›´æ¥æ‰§è¡Œ Java æºç ï¼Œè€Œæ˜¯æ‰§è¡Œ <strong>å­—èŠ‚ç ï¼ˆbytecodeï¼‰</strong>ã€‚æ‰§è¡Œå¼•æ“è´Ÿè´£å°†å…¶è½¬åŒ–ä¸ºæœºå™¨ç ã€‚</p>
<h3 data-id="heading-17">1. è§£é‡Šå™¨ï¼ˆInterpreterï¼‰</h3>
<ul>
<li><strong>å·¥ä½œæ–¹å¼</strong>ï¼šé€æ¡è¯»å–å­—èŠ‚ç ï¼ŒæŸ¥è¡¨ï¼ˆdispatch tableï¼‰æ‰§è¡Œå¯¹åº” C++ å‡½æ•°ã€‚</li>
<li><strong>æºç </strong>ï¼š<code>templateTable_x86_64.cpp</code> å®šä¹‰äº†æ¯æ¡å­—èŠ‚ç çš„æ±‡ç¼–æ¨¡æ¿ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå¯åŠ¨å¿«ï¼›<strong>ç¼ºç‚¹</strong>ï¼šæ‰§è¡Œæ…¢ã€‚</li>
</ul>
<h3 data-id="heading-18">2. JITï¼ˆJust-In-Timeï¼‰ç¼–è¯‘å™¨</h3>
<p>å½“æŸæ®µä»£ç è¢«é¢‘ç¹æ‰§è¡Œï¼ˆâ€œçƒ­ç‚¹ä»£ç â€ï¼‰ï¼ŒJIT ä¼šå°†å…¶ç¼–è¯‘ä¸º<strong>æœ¬åœ°æœºå™¨ç </strong>å¹¶ç¼“å­˜ã€‚</p>
<h4 data-id="heading-19">HotSpot çš„ä¸¤çº§ JITï¼š</h4>




















<table><thead><tr><th>ç¼–è¯‘å™¨</th><th>è§¦å‘æ¡ä»¶</th><th>ä¼˜åŒ–çº§åˆ«</th></tr></thead><tbody><tr><td><strong>C1ï¼ˆClient Compilerï¼‰</strong></td><td>æ–¹æ³•è°ƒç”¨ &gt; 1500 æ¬¡</td><td>å¿«é€Ÿç¼–è¯‘ï¼Œå°‘é‡ä¼˜åŒ–</td></tr><tr><td><strong>C2ï¼ˆServer Compilerï¼‰</strong></td><td>æ–¹æ³•è°ƒç”¨ &gt; 10000 æ¬¡</td><td>æ·±åº¦ä¼˜åŒ–ï¼ˆå†…è”ã€é€ƒé€¸åˆ†æç­‰ï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ”¥ <strong>JIT ä¼˜åŒ–ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li><strong>æ–¹æ³•å†…è”ï¼ˆInliningï¼‰</strong>ï¼šæ¶ˆé™¤è™šæ–¹æ³•è°ƒç”¨å¼€é”€</li>
<li><strong>é€ƒé€¸åˆ†æï¼ˆEscape Analysisï¼‰</strong>ï¼šæ ˆä¸Šåˆ†é…å¯¹è±¡ï¼Œå‡å°‘ GC å‹åŠ›</li>
<li><strong>é”æ¶ˆé™¤ï¼ˆLock Eliminationï¼‰</strong>ï¼šå»é™¤ä¸å¯èƒ½ç«äº‰çš„ synchronized</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-20">å…­ã€åƒåœ¾å›æ”¶ï¼ˆGCï¼‰ï¼šè‡ªåŠ¨å†…å­˜ç®¡ç†çš„è‰ºæœ¯</h2>
<p>GC æ˜¯ JVM æœ€å¤æ‚çš„å­ç³»ç»Ÿã€‚å…¶æ ¸å¿ƒä»»åŠ¡ï¼š<strong>å®‰å…¨ã€é«˜æ•ˆåœ°å›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡</strong>ã€‚</p>
<h3 data-id="heading-21">1. å¦‚ä½•åˆ¤æ–­å¯¹è±¡æ­»äº¡ï¼Ÿâ€”â€” å¯è¾¾æ€§åˆ†æ</h3>
<p>ä» <strong>GC Roots</strong> å‡ºå‘ï¼ˆåŒ…æ‹¬ï¼šæ ˆå¸§å±€éƒ¨å˜é‡ã€é™æ€å˜é‡ã€JNI å¼•ç”¨ç­‰ï¼‰ï¼Œé€šè¿‡å¼•ç”¨é“¾æœç´¢å­˜æ´»å¯¹è±¡ã€‚æ— æ³•åˆ°è¾¾çš„å¯¹è±¡å³ä¸ºåƒåœ¾ã€‚</p>
<blockquote>
<p>âŒ ä¸å†ä½¿ç”¨â€œå¼•ç”¨è®¡æ•°æ³•â€ï¼ˆæ— æ³•è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-22">2. åˆ†ä»£æ”¶é›†ç†è®ºï¼ˆGenerational Hypothesisï¼‰</h3>
<ul>
<li><strong>å¼±åˆ†ä»£å‡è¯´</strong>ï¼šç»å¤§å¤šæ•°å¯¹è±¡â€œæœç”Ÿå¤•æ­»â€ã€‚</li>
<li><strong>å¼ºåˆ†ä»£å‡è¯´</strong>ï¼šç†¬è¿‡å¤šæ¬¡ GC çš„å¯¹è±¡æ›´å¯èƒ½é•¿æœŸå­˜æ´»ã€‚</li>
</ul>
<p>å› æ­¤ï¼ŒHotSpot å°†å †åˆ†ä¸ºï¼š</p>
<ul>
<li><strong>æ–°ç”Ÿä»£ï¼ˆYoung Genï¼‰</strong>ï¼šEden + Survivorï¼ˆS0/S1ï¼‰</li>
<li><strong>è€å¹´ä»£ï¼ˆOld Genï¼‰</strong></li>
</ul>
<h3 data-id="heading-23">3. ä¸»æµ GC ç®—æ³•å¯¹æ¯”</h3>















































<table><thead><tr><th>GC</th><th>ç®—æ³•</th><th>STW æ—¶é—´</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Serial</strong></td><td>å¤åˆ¶ï¼ˆYoungï¼‰+ æ ‡è®°-æ•´ç†ï¼ˆOldï¼‰</td><td>é«˜</td><td>å•æ ¸ã€å°å†…å­˜</td></tr><tr><td><strong>Parallel</strong></td><td>å¹¶è¡Œå¤åˆ¶ + å¹¶è¡Œæ ‡è®°-æ•´ç†</td><td>ä¸­é«˜</td><td>ååä¼˜å…ˆ</td></tr><tr><td><strong>CMS</strong></td><td>å¹¶å‘æ ‡è®°-æ¸…é™¤</td><td>ä½ï¼ˆä½†æœ‰ç¢ç‰‡ï¼‰</td><td>å·²åºŸå¼ƒï¼ˆJDK14+ï¼‰</td></tr><tr><td><strong>G1</strong></td><td>Region + å¹¶å‘æ ‡è®° + æ··åˆå›æ”¶</td><td>ä½ï¼ˆå¯é¢„æµ‹ï¼‰</td><td>å¤§å †ï¼ˆ4~64GBï¼‰</td></tr><tr><td><strong>ZGC</strong></td><td>ç€è‰²æŒ‡é’ˆ + å¹¶å‘é‡å®šä½</td><td><strong>&lt; 1ms</strong></td><td>TB çº§ã€è¶…ä½å»¶è¿Ÿ</td></tr><tr><td><strong>Shenandoah</strong></td><td>Brooks æŒ‡é’ˆ + å¹¶å‘è½¬ç§»</td><td><strong>&lt; 10ms</strong></td><td>é€šç”¨ä½å»¶è¿Ÿ</td></tr></tbody></table>
<h3 data-id="heading-24">4. ZGC æºç äº®ç‚¹ï¼ˆ<code>zCollectedHeap.cpp</code>ï¼‰</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ZGC çš„å¹¶å‘é‡å®šä½æ ¸å¿ƒ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ZRelocate::relocate_object</span><span class="hljs-params">(oop* p)</span> </span>{
  oop obj = *p;
  <span class="hljs-keyword">if</span> (ZAddress::<span class="hljs-built_in">is_marked</span>(ZOop::<span class="hljs-built_in">address</span>(obj))) {
    oop new_obj = _allocator.<span class="hljs-built_in">alloc_object</span>(ZOop::<span class="hljs-built_in">size</span>(obj));
    <span class="hljs-built_in">copy_to_new_location</span>(obj, new_obj);
    ZForwarding::<span class="hljs-built_in">set_target</span>(obj, new_obj); <span class="hljs-comment">// è®¾ç½®è½¬å‘æŒ‡é’ˆ</span>
    *p = new_obj; <span class="hljs-comment">// æ›´æ–°å¼•ç”¨</span>
  }
}
</code></pre>
<blockquote>
<p>âœ¨ é€šè¿‡ <strong>è¯»å±éšœ</strong>ï¼Œåº”ç”¨çº¿ç¨‹åœ¨è®¿é—®å¯¹è±¡æ—¶è‡ªåŠ¨è·³è½¬åˆ°æ–°åœ°å€ï¼Œå®ç°â€œæ— æ„Ÿè¿ç§»â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-25">ä¸ƒã€æ€§èƒ½è°ƒä¼˜ï¼šä»ç›‘æ§åˆ°å®æˆ˜</h2>
<h3 data-id="heading-26">1. å…³é”®ç›‘æ§å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ GC æ—¥å¿—ï¼ˆJDK9+ï¼‰</span>
java -Xlog:gc*:gc.log MyApp

<span class="hljs-comment"># å®æ—¶ç›‘æ§</span>
jstat -gc &lt;pid&gt; 1000

<span class="hljs-comment"># å †è½¬å‚¨åˆ†æ</span>
jmap -dump:format=b,file=heap.hprof &lt;pid&gt;
</code></pre>
<h3 data-id="heading-27">2. å¸¸è§è°ƒä¼˜å‚æ•°</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é€‰æ‹©ä½å»¶è¿Ÿ GC</span>
-XX:+UseZGC
-XX:+UseShenandoahGC

<span class="hljs-comment"># æ§åˆ¶å †å¤§å°</span>
-Xms4g -Xmx4g

<span class="hljs-comment"># G1 è°ƒä¼˜</span>
-XX:MaxGCPauseMillis=200
-XX:G1HeapRegionSize=16m
</code></pre>
<hr/>
<h2 data-id="heading-28">ç»“è¯­ï¼šJVM â€”â€” Java çš„â€œæ“ä½œç³»ç»Ÿâ€</h2>
<p>JVM è¿œä¸æ­¢æ˜¯ä¸€ä¸ªâ€œè¿è¡Œ Java çš„å®¹å™¨â€ã€‚å®ƒæ˜¯ä¸€ä¸ªé›† <strong>å†…å­˜ç®¡ç†ã€å¹¶å‘æ§åˆ¶ã€å³æ—¶ç¼–è¯‘ã€å®‰å…¨éªŒè¯</strong> äºä¸€ä½“çš„å¤æ‚ç³»ç»Ÿã€‚ç†è§£å…¶åº•å±‚åŸç†ï¼Œä¸ä»…èƒ½è®©ä½ å†™å‡ºæ›´é«˜æ•ˆçš„ä»£ç ï¼Œæ›´èƒ½è®©ä½ åœ¨ç³»ç»Ÿå‡ºç°æ•…éšœæ—¶<strong>å¿«é€Ÿå®šä½æ ¹å› </strong>ï¼Œæˆä¸ºçœŸæ­£çš„â€œJava é«˜æ‰‹â€ã€‚</p>
<blockquote>
<p><strong>æœ€åå»ºè®®</strong>ï¼š</p>
<ul>
<li>é˜…è¯»ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹ï¼ˆå‘¨å¿—æ˜ï¼‰</li>
<li>æµè§ˆ OpenJDK HotSpot æºç </li>
<li>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¼€å¯ GC æ—¥å¿—ï¼ŒæŒç»­è§‚å¯Ÿ</li>
</ul>
</blockquote>
<p>æŒæ¡ JVMï¼Œå°±æ˜¯æŒæ¡äº† Java åº”ç”¨çš„â€œå‘½è„‰â€ã€‚</p>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š</p>
<ul>
<li>OpenJDK æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenjdk%2Fjdk" target="_blank" title="https://github.com/openjdk/jdk" ref="nofollow noopener noreferrer">github.com/openjdk/jdk</a></li>
<li>JVM Specificationï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.oracle.com%2Fjavase%2Fspecs%2F" target="_blank" title="https://docs.oracle.com/javase/specs/" ref="nofollow noopener noreferrer">docs.oracle.com/javase/specâ€¦</a></li>
<li>ZGC Paper (Oracle)ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oracle.com%2Ftechnical-resources%2Farticles%2Fjava%2Fzgc.html" target="_blank" title="https://www.oracle.com/technical-resources/articles/java/zgc.html" ref="nofollow noopener noreferrer">www.oracle.com/technical-râ€¦</a></li>
<li>Shenandoah GC Wikiï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwiki.openjdk.org%2Fdisplay%2Fshenandoah%2FMain" target="_blank" title="https://wiki.openjdk.org/display/shenandoah/Main" ref="nofollow noopener noreferrer">wiki.openjdk.org/display/sheâ€¦</a></li>
</ul>
<blockquote>
<p><strong>ä½œè€…</strong>ï¼šæ¶æ„å¸ˆBeata<br/>
<strong>æ—¥æœŸ</strong>ï¼š2026å¹´2æœˆ8æ—¥
<strong>å£°æ˜</strong>ï¼šæœ¬æ–‡åŸºäºç½‘ç»œæ–‡æ¡£æ•´ç†ï¼Œå¦‚æœ‰ç–æ¼ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚<br/>
<strong>äº’åŠ¨</strong>ï¼šå¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HashMapæºç æ·±åº¦å‰–æ]]></title>    <link>https://juejin.cn/post/7603895839556599871</link>    <guid>https://juejin.cn/post/7603895839556599871</guid>    <pubDate>2026-02-08T14:29:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603895839556599871" data-draft-id="7603643385816318004" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HashMapæºç æ·±åº¦å‰–æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-08T14:29:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Wiittch"/> <meta itemprop="url" content="https://juejin.cn/user/1910300244458315"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HashMapæºç æ·±åº¦å‰–æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1910300244458315/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Wiittch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T14:29:28.000Z" title="Sun Feb 08 2026 14:29:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"/>
<h2 data-id="heading-1">ä¸€. HashMapä¸ºä»€ä¹ˆè¿™ä¹ˆé‡è¦</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">mindmap
      é¡¶å±‚æ¥å£
          Map
            HashMap
            LinkedHashMap
            TreeMap
            HashTable
            ConcurrentHashMap
          Collection 
            List
              ArrayList
              LinkedList
            Set
              HashSet
              TreeSet
              LinkedHashSet
            Queue
    
</code></pre>
<pre><code class="hljs language-ini" lang="ini">// HashMapçš„"è¡ç”Ÿå“"
<span class="hljs-attr">HashSet</span> = HashMapçš„Keyè§†å›¾
<span class="hljs-attr">LinkedHashMap</span> = HashMap + åŒå‘é“¾è¡¨
<span class="hljs-attr">ConcurrentHashMap</span> = çº¿ç¨‹å®‰å…¨çš„HashMapå˜ä½“
</code></pre>
<p><strong>HashMapä¹‹æ‰€ä»¥æˆä¸ºJavaå¼€å‘è€…å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œæ˜¯å› ä¸ºå®ƒåœ¨æ¨ªå‘å¯¹æ¯”ä¸­ä»£è¡¨äº†å·¥ç¨‹ä¼˜åŒ–çš„æè‡´å¹³è¡¡ï¼Œåœ¨çºµå‘æ·±åº¦ä¸Šæ­ç¤ºäº†è®¡ç®—æœºç§‘å­¦çš„ç»å…¸èŒƒå¼ã€‚</strong></p>
<p>æ¨ªå‘çœ‹ï¼ŒHashMapä»¥è¿‘ä¹O(1)çš„æŸ¥è¯¢æ€§èƒ½è¶…è¶Šäº†çº¿æ€§ç»“æ„çš„Listå’Œæœ‰åºç»“æ„çš„TreeMapï¼Œç”¨0.75è´Ÿè½½å› å­çš„å·§å¦™è®¾è®¡å¹³è¡¡äº†æ—¶é—´ä¸ç©ºé—´ï¼›çºµå‘æ·±å…¥ï¼Œå®ƒçš„æ¼”åŒ–å²æœ¬èº«å°±æ˜¯ä¸€éƒ¨å¾®ç¼©çš„ç®—æ³•ä¼˜åŒ–å²â€”â€”ä»JDK 7çš„é“¾è¡¨ç¢°æ’åˆ°JDK 8çš„çº¢é»‘æ ‘ä¼˜åŒ–ï¼Œä»å•çº¿ç¨‹è®¾è®¡åˆ°ConcurrentHashMapçš„åˆ†æ®µé”å†åˆ°CASæ— é”åŒ–ï¼Œæ¯ä¸ªç‰ˆæœ¬è¿­ä»£éƒ½ä½“ç°äº†æ•°æ®ç»“æ„ã€å¹¶å‘ç¼–ç¨‹ä¸JVMç‰¹æ€§çš„æ·±åº¦èåˆã€‚<strong>ç†è§£HashMapä¸ä»…æ˜¯åœ¨å­¦ä¹ ä¸€ä¸ªå®¹å™¨ï¼Œæ›´æ˜¯åœ¨ç†è§£å¦‚ä½•åœ¨ç°å®çº¦æŸä¸‹ï¼ˆå†…å­˜ã€å¹¶å‘ã€æ€§èƒ½ï¼‰åšå‡ºæœ€ä¼˜å·¥ç¨‹å–èˆçš„è®¾è®¡å“²å­¦ã€‚</strong></p>
<h2 data-id="heading-2">äºŒ.HashMapæºç è§£è¯»</h2>
<h3 data-id="heading-3">1.ç†è§£åŸºç¡€æ•°æ®ç»“æ„</h3>
<p><strong>1.1 æ ¸å¿ƒå†…éƒ¨ç±»å¯¹æ¯”</strong></p>
<pre><code class="hljs language-scala" lang="scala">static <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node&lt;K</span>,<span class="hljs-title">V&gt;</span> <span class="hljs-title">implements</span> <span class="hljs-title">Map</span>.<span class="hljs-title">Entry&lt;K</span>,<span class="hljs-title">V&gt;</span> </span>{
    <span class="hljs-keyword">final</span> int hash;
    <span class="hljs-keyword">final</span> <span class="hljs-type">K</span> key;
    <span class="hljs-type">V</span> value;
    <span class="hljs-type">Node</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; next;  <span class="hljs-comment">// å•å‘é“¾è¡¨</span>
}

<span class="hljs-comment">// 2. æ ‘èŠ‚ç‚¹ï¼ˆç»§æ‰¿ä½“ç³»å…³é”®ï¼ï¼‰</span>
static <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TreeNode&lt;K</span>,<span class="hljs-title">V&gt;</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">LinkedHashMap</span>.<span class="hljs-title">Entry&lt;K</span>,<span class="hljs-title">V&gt;</span> </span>{
    <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; parent;  <span class="hljs-comment">// çº¢é»‘æ ‘çˆ¶èŠ‚ç‚¹</span>
    <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; left;    <span class="hljs-comment">// å·¦å­æ ‘</span>
    <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; right;   <span class="hljs-comment">// å³å­æ ‘</span>
    <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; prev;    <span class="hljs-comment">// â—ï¸åŒå‘é“¾è¡¨å‰é©±ï¼ˆé€€åŒ–å…³é”®ï¼‰</span>
    boolean red;           <span class="hljs-comment">// é¢œè‰²æ ‡è®°</span>
    <span class="hljs-comment">// nextç»§æ‰¿è‡ªçˆ¶ç±»</span>
}

<span class="hljs-comment">// 3. LinkedHashMap.Entryï¼ˆæ¡¥æ¢ä½œç”¨ï¼‰</span>
static <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Entry&lt;K</span>,<span class="hljs-title">V&gt;</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HashMap</span>.<span class="hljs-title">Node&lt;K</span>,<span class="hljs-title">V&gt;</span> </span>{
    <span class="hljs-type">Entry</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; before, after;  <span class="hljs-comment">// åŒå‘é“¾è¡¨</span>
}
</code></pre>
<p>HashMapçš„æ ‘åŒ–æœºåˆ¶å»ºç«‹åœ¨ç²¾å·§çš„ç±»ç»§æ‰¿ä½“ç³»ä¹‹ä¸Šã€‚åŸºç¡€é“¾è¡¨èŠ‚ç‚¹<code>Node</code>ä»…ç»´æŠ¤å•å‘<code>next</code>æŒ‡é’ˆï¼Œå­˜å‚¨é”®å€¼å¯¹å’Œå“ˆå¸Œå€¼ã€‚è€Œæ ‘åŒ–åçš„<code>TreeNode</code>å¹¶æœªç›´æ¥ç»§æ‰¿<code>Node</code>ï¼Œè€Œæ˜¯é€šè¿‡ç»§æ‰¿<code>LinkedHashMap.Entry</code>é—´æ¥ç»§æ‰¿<code>Node</code>ï¼Œå½¢æˆä¸‰å±‚ç»“æ„ã€‚è¿™ç§è®¾è®¡ä½¿<code>TreeNode</code>åŒæ—¶å…·å¤‡çº¢é»‘æ ‘çš„<code>parent/left/right</code>æŒ‡é’ˆã€ä¿ç•™é€€åŒ–æ‰€éœ€çš„åŒå‘é“¾è¡¨<code>prev/next</code>æŒ‡é’ˆï¼Œå¹¶ä¸<code>LinkedHashMap</code>ä¿æŒç»“æ„å…¼å®¹ã€‚<code>LinkedHashMap.Entry</code>ä½œä¸ºä¸­é—´å±‚ï¼Œæ·»åŠ äº†<code>before/after</code>æŒ‡é’ˆç»´æŠ¤è®¿é—®é¡ºåºï¼Œä½¿å¾—<code>TreeNode</code>æ— éœ€é‡å¤å®ç°é“¾è¡¨åŠŸèƒ½å³å¯æ”¯æŒé€€åŒ–æ“ä½œï¼Œä½“ç°äº†â€œç»„åˆä¼˜äºç»§æ‰¿â€çš„è®¾è®¡æ€æƒ³ã€‚
<strong>1.2 æ ¸å¿ƒå¸¸é‡å®šä¹‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> TREEIFY_THRESHOLD = <span class="hljs-number">8</span>;     <span class="hljs-comment">// æ ‘åŒ–é˜ˆå€¼</span>
<span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> UNTREEIFY_THRESHOLD = <span class="hljs-number">6</span>;   <span class="hljs-comment">// é€€åŒ–é˜ˆå€¼  </span>
<span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> MIN_TREEIFY_CAPACITY = <span class="hljs-number">64</span>; <span class="hljs-comment">// æœ€å°æ ‘åŒ–å®¹é‡</span>
<span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> DEFAULT_INITIAL_CAPACITY = <span class="hljs-number">16</span>;
<span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> DEFAULT_LOAD_FACTOR = <span class="hljs-number">0.75f</span>;
</code></pre>
<p>HashMapé€šè¿‡ä¸€ç»„ç²¾å¿ƒè®¾è®¡çš„å¸¸é‡æ§åˆ¶æ ‘åŒ–è¡Œä¸ºã€‚<code>TREEIFY_THRESHOLD=8</code>åŸºäºæ³Šæ¾åˆ†å¸ƒï¼Œè¡¨ç¤ºé“¾è¡¨é•¿åº¦è¶…è¿‡æ­¤å€¼ï¼ˆæ¦‚ç‡ä»…0.000006%ï¼‰æ—¶æ‰è€ƒè™‘æ ‘åŒ–ï¼›<code>UNTREEIFY_THRESHOLD=6</code>ä½œä¸ºé€€åŒ–é˜ˆå€¼ï¼Œä¸æ ‘åŒ–é˜ˆå€¼å½¢æˆå¤§å°ä¸º2çš„ç¼“å†²å¸¦ï¼Œé˜²æ­¢èŠ‚ç‚¹æ•°åœ¨ä¸´ç•Œç‚¹é™„è¿‘é¢‘ç¹è§¦å‘ç»“æ„è½¬æ¢ã€‚<code>MIN_TREEIFY_CAPACITY=64</code>è§„å®šäº†æœ€å°æ ‘åŒ–å®¹é‡ï¼Œå½“å“ˆå¸Œè¡¨å®¹é‡å°äºæ­¤å€¼æ—¶ä¼˜å…ˆæ‰©å®¹è€Œéæ ‘åŒ–ï¼Œå› ä¸ºå°å®¹é‡ä¸‹æ ‘åŒ–çš„å†…å­˜å¼€é”€å æ¯”è¿‡é«˜ã€‚é…åˆé»˜è®¤åˆå§‹å®¹é‡<code>16</code>å’Œè´Ÿè½½å› å­<code>0.75</code>ï¼Œè¿™äº›å¸¸é‡å…±åŒæ„æˆä¸€ä¸ªå¹³è¡¡æ€§èƒ½ä¸ç©ºé—´çš„å¼¹æ€§ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-4">2.HashMapåœ¨JDKä¸­çš„æ ‘åŒ–è§¦å‘é“¾ï¼ˆå®Œæ•´è°ƒç”¨æ ˆï¼‰</h3>
<p><strong>2.1 å…¥å£ï¼šput() â†’ putVal()</strong></p>
<pre><code class="hljs language-scss" lang="scss">public V <span class="hljs-built_in">put</span>(K key, V value) {
    return <span class="hljs-built_in">putVal</span>(hash(key), key, value, false, true);
}

final V <span class="hljs-built_in">putVal</span>(int hash, K key, V value, boolean onlyIfAbsent,
               boolean evict) {
    Node&lt;K,V&gt;<span class="hljs-selector-attr">[]</span> tab; Node&lt;K,V&gt; <span class="hljs-selector-tag">p</span>; int n, <span class="hljs-selector-tag">i</span>;
    <span class="hljs-comment">// ... çœç•¥åˆå§‹åŒ–é€»è¾‘</span>
    
    <span class="hljs-comment">// ğŸ¯ å…³é”®å¾ªç¯ï¼šéå†é“¾è¡¨</span>
    for (int binCount = <span class="hljs-number">0</span>; ; ++binCount) {
        if ((e = p.next) == null) {
            <span class="hljs-selector-tag">p</span><span class="hljs-selector-class">.next</span> = <span class="hljs-built_in">newNode</span>(hash, key, value, null);
            if (binCount &gt;= TREEIFY_THRESHOLD - <span class="hljs-number">1</span>) <span class="hljs-comment">// -1 for 1st</span>
                <span class="hljs-built_in">treeifyBin</span>(tab, hash);  <span class="hljs-comment">// è§¦å‘æ ‘åŒ–</span>
            break;
        }
        <span class="hljs-comment">// ... çœç•¥æŸ¥æ‰¾é€»è¾‘</span>
    }
    
    <span class="hljs-comment">// ä¿®æ”¹è®¡æ•°å’Œæ‰©å®¹æ£€æŸ¥</span>
    ++modCount;
    if (++size &gt; threshold)
        <span class="hljs-attribute">resize</span>();
}
</code></pre>
<p>HashMapçš„æ ‘åŒ–è§¦å‘å§‹äº<code>put()</code>æ–¹æ³•è°ƒç”¨ï¼Œå…¶æ ¸å¿ƒé€»è¾‘å°è£…åœ¨<code>putVal()</code>ä¸­ã€‚å½“å‘æ¡¶ä¸­æ’å…¥æ–°èŠ‚ç‚¹æ—¶ï¼Œæ–¹æ³•é€šè¿‡<code>binCount</code>å˜é‡ç»Ÿè®¡å½“å‰é“¾è¡¨é•¿åº¦ï¼Œå½“æ£€æµ‹åˆ°é“¾è¡¨é•¿åº¦å³å°†è¾¾åˆ°é˜ˆå€¼ï¼ˆ<code>binCount &gt;= TREEIFY_THRESHOLD - 1</code>ï¼Œå³å·²æœ‰8ä¸ªèŠ‚ç‚¹ä¸”æ­£åœ¨æ’å…¥ç¬¬9ä¸ªï¼‰æ—¶ï¼Œè°ƒç”¨<code>treeifyBin()</code>å°è¯•æ ‘åŒ–ã€‚ä½†è¿™é‡Œä»…å®Œæˆé•¿åº¦æ£€æŸ¥ï¼ŒçœŸæ­£çš„æ ‘åŒ–è¿˜éœ€åœ¨<code>treeifyBin()</code>ä¸­éªŒè¯å®¹é‡æ˜¯å¦è¾¾æ ‡ã€‚è¿™ç§åˆ†å±‚æ£€æŸ¥æœºåˆ¶ç¡®ä¿äº†æ ‘åŒ–åªåœ¨é“¾è¡¨è¿‡é•¿ä¸”å“ˆå¸Œè¡¨è§„æ¨¡è¶³å¤Ÿå¤§æ—¶æ‰å‘ç”Ÿï¼Œé¿å…åœ¨å°å®¹é‡åœºæ™¯ä¸‹è¿›è¡Œä½æ•ˆçš„ç»“æ„è½¬æ¢ã€‚
<strong>2.2 æ ‘åŒ–å‰æ£€æŸ¥ï¼štreeifyBin()</strong></p>























<table><thead><tr><th>ç‰ˆæœ¬</th><th>æ•°æ®ç»“æ„</th><th>å†²çªè§£å†³æ–¹æ¡ˆ</th><th>æœ€åæ—¶é—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>JDK1.7åŠä¹‹å‰</td><td>æ•°ç»„+é“¾è¡¨</td><td>çº¯æ‹‰é“¾æ³•</td><td>O(n)</td></tr><tr><td>JDK1.8ä¹‹å</td><td>æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘</td><td>æ··åˆç­–ç•¥</td><td>O(log n)</td></tr></tbody></table>
<p><strong>æ•°ç»„+é“¾è¡¨çš„æ–¹æ³•å°±æ˜¯é‡‡ç”¨æ‹‰é“¾æ³•æ¥è§£å†³å†²çªï¼Œä¹‹ååœ¨æ•°ç»„&gt;64å’Œé“¾è¡¨&gt;8çš„æƒ…å†µä¸‹é‡‡ç”¨çº¢é»‘æ ‘æ¥è§£å†³å†²çªã€‚</strong></p>
<p><strong>æ•°ç»„&gt;64</strong>ï¼šå½“æ•°ç»„çš„æ¡¶æ•°è¶…è¿‡ä¸€å®šå¤§å°æ—¶ï¼ˆä¾‹å¦‚64ï¼‰ï¼Œæ„å‘³ç€å“ˆå¸Œè¡¨çš„è§„æ¨¡å·²ç»ç›¸å½“å¤§ï¼Œå•çº¯ä¾èµ–é“¾è¡¨ä¼šå¯¼è‡´é“¾è¡¨å˜å¾—è¿‡é•¿ï¼ŒæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡ä¼šæ€¥å‰§ä¸‹é™ã€‚æ­¤æ—¶ä½¿ç”¨çº¢é»‘æ ‘èƒ½å¤Ÿæä¾›æ›´å¥½çš„æ€§èƒ½ã€‚çº¢é»‘æ ‘æ˜¯ä¸€ç§å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œèƒ½å¤Ÿä¿è¯æœ€åæƒ…å†µä¸‹æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º O(log N)ã€‚
<strong>æ³¨æ„æ•°ç»„å°äº64çš„æ—¶å€™é‡‡ç”¨çš„æ˜¯æ•°ç»„æ‰©å®¹çš„æ–¹æ³•ã€‚å› ä¸ºæ•°ç»„æ¯”è¾ƒå°çš„æƒ…å†µä¸‹å˜æˆçº¢é»‘æ ‘ç»“æ„éœ€è¦è¿›è¡Œå·¦æ—‹ï¼Œå³æ—‹ï¼Œå˜è‰²æ¥ä¿æŒå¹³è¡¡ï¼Œåè€Œä¼šé™ä½æ•ˆç‡ã€‚åŒæ—¶æ•°ç»„é•¿åº¦å°æœç´¢æ—¶é—´ä¹Ÿä¼šç›¸å¯¹å¿«ã€‚</strong>
åœ¨ <code>treeifyBin</code> ä¸­ï¼Œå½“æ¡¶çš„å¤§å°è¶…è¿‡äº†é˜ˆå€¼ï¼ˆå³ <code>TREEIFY_THRESHOLD</code>ï¼Œä¹Ÿå°±æ˜¯ 8ï¼‰æ—¶ï¼Œä¼šå°†é“¾è¡¨ä¸­çš„èŠ‚ç‚¹è½¬æ¢ä¸ºçº¢é»‘æ ‘èŠ‚ç‚¹ï¼ˆ<code>TreeNode</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * HashMapæ ¸å¿ƒæ–¹æ³•ï¼šå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘
 * 
 * è§¦å‘æ¡ä»¶ï¼šå½“å•ä¸ªæ¡¶(bucket)ä¸­çš„é“¾è¡¨é•¿åº¦è¶…è¿‡8ï¼Œä¸”HashMapå®¹é‡è¾¾åˆ°64æ—¶
 * ç›®çš„ï¼šä¼˜åŒ–æç«¯æƒ…å†µä¸‹çš„æŸ¥è¯¢æ€§èƒ½ï¼ˆä»O(n)æå‡åˆ°O(log n)ï¼‰
 * 
 * <span class="hljs-doctag">@param</span> tab  HashMapçš„æ¡¶æ•°ç»„
 * <span class="hljs-doctag">@param</span> hash è§¦å‘è½¬æ¢çš„keyçš„hashå€¼
 * 
 * é¢è¯•è€ƒç‚¹ï¼š
 * 1. ä¸ºä»€ä¹ˆæ˜¯é“¾è¡¨é•¿åº¦&gt;8æ‰æ ‘åŒ–ï¼Ÿ
 * 2. ä¸ºä»€ä¹ˆéœ€è¦å®¹é‡&gt;=64æ‰æ ‘åŒ–ï¼Ÿ
 * 3. çº¢é»‘æ ‘é€€åŒ–ä¸ºé“¾è¡¨çš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ
 */</span>
final <span class="hljs-keyword">void</span> <span class="hljs-title function_">treeifyBin</span>(<span class="hljs-params">Node&lt;K,V&gt;[] tab, int hash</span>) {
    int n, index;  <span class="hljs-comment">// n: æ•°ç»„é•¿åº¦ï¼Œindex: ç›®æ ‡æ¡¶ç´¢å¼•</span>
    <span class="hljs-title class_">Node</span>&lt;K,V&gt; e;   <span class="hljs-comment">// å½“å‰éå†çš„é“¾è¡¨èŠ‚ç‚¹</span>
    
    <span class="hljs-comment">// âš¡ æ¡ä»¶æ£€æŸ¥ï¼šå®¹é‡ä¸è¶³æ—¶å…ˆæ‰©å®¹è€Œä¸æ˜¯æ ‘åŒ–</span>
    <span class="hljs-comment">// è¿™æ˜¯é‡è¦çš„æ€§èƒ½ä¼˜åŒ–ï¼šæ‰©å®¹å¯èƒ½ç›´æ¥åˆ†æ•£èŠ‚ç‚¹ï¼Œé¿å…ä¸å¿…è¦çš„æ ‘åŒ–å¼€é”€</span>
    <span class="hljs-keyword">if</span> (tab == <span class="hljs-literal">null</span> || (n = tab.<span class="hljs-property">length</span>) &lt; <span class="hljs-variable constant_">MIN_TREEIFY_CAPACITY</span>) {
        <span class="hljs-title function_">resize</span>();  <span class="hljs-comment">// ä¼˜å…ˆå°è¯•æ‰©å®¹ï¼ˆMIN_TREEIFY_CAPACITY = 64ï¼‰</span>
        <span class="hljs-keyword">return</span>;    <span class="hljs-comment">// æ‰©å®¹åå¯èƒ½å°±ä¸éœ€è¦æ ‘åŒ–äº†</span>
    }
    
    <span class="hljs-comment">// ğŸ” å®šä½åˆ°ç›®æ ‡æ¡¶ï¼Œä¸”æ¡¶ä¸ä¸ºç©º</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((e = tab[index = (n - <span class="hljs-number">1</span>) &amp; hash]) != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// çº¢é»‘æ ‘çš„åŒå‘é“¾è¡¨å¤´éƒ¨å’Œå°¾éƒ¨æŒ‡é’ˆ</span>
        <span class="hljs-title class_">TreeNode</span>&lt;K,V&gt; hd = <span class="hljs-literal">null</span>, tl = <span class="hljs-literal">null</span>;  <span class="hljs-comment">// head, tail</span>
        
        <span class="hljs-comment">// ğŸ”„ éå†é“¾è¡¨ï¼Œå°†æ‰€æœ‰Nodeè½¬æ¢ä¸ºTreeNode</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œå…ˆæ„å»ºä¸€ä¸ªTreeNodeçš„åŒå‘é“¾è¡¨ï¼Œè€Œä¸æ˜¯ç›´æ¥æ„å»ºæ ‘</span>
        <span class="hljs-keyword">do</span> {
            <span class="hljs-comment">// å°†æ™®é€šNodeè½¬æ¢ä¸ºTreeNodeï¼ˆTreeNodeç»§æ‰¿è‡ªNodeï¼Œä½†å¤šäº†çº¢é»‘æ ‘éœ€è¦çš„å±æ€§ï¼‰</span>
            <span class="hljs-title class_">TreeNode</span>&lt;K,V&gt; p = <span class="hljs-title function_">replacementTreeNode</span>(e, <span class="hljs-literal">null</span>);
            
            <span class="hljs-comment">// æ„å»ºåŒå‘é“¾è¡¨</span>
            <span class="hljs-keyword">if</span> (tl == <span class="hljs-literal">null</span>) {
                hd = p;        <span class="hljs-comment">// ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºå¤´èŠ‚ç‚¹</span>
            } <span class="hljs-keyword">else</span> {
                p.<span class="hljs-property">prev</span> = tl;   <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹çš„å‰é©±æŒ‡å‘å°¾èŠ‚ç‚¹</span>
                tl.<span class="hljs-property">next</span> = p;   <span class="hljs-comment">// å°¾èŠ‚ç‚¹çš„åç»§æŒ‡å‘å½“å‰èŠ‚ç‚¹</span>
            }
            tl = p;           <span class="hljs-comment">// æ›´æ–°å°¾èŠ‚ç‚¹</span>
        } <span class="hljs-keyword">while</span> ((e = e.<span class="hljs-property">next</span>) != <span class="hljs-literal">null</span>);  <span class="hljs-comment">// éå†åŸé“¾è¡¨</span>
        
        <span class="hljs-comment">// âœ¨ å…³é”®æ­¥éª¤ï¼šå°†æ¡¶ä¸­çš„é“¾è¡¨æ›¿æ¢ä¸ºTreeNodeåŒå‘é“¾è¡¨</span>
        <span class="hljs-keyword">if</span> ((tab[index] = hd) != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// ğŸ¯ çœŸæ­£çš„æ ‘åŒ–æ“ä½œï¼šå°†åŒå‘é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘</span>
            hd.<span class="hljs-title function_">treeify</span>(tab);  <span class="hljs-comment">// è¿™ä¸ªæ–¹æ³•ä¼šè¿›è¡Œçº¢é»‘æ ‘çš„å¹³è¡¡æ“ä½œ</span>
        }
    }
}
</code></pre>
<p><strong>é“¾è¡¨&gt;8</strong>ï¼šå¦‚æœåœ¨æŸä¸ªæ¡¶ä¸­ï¼Œé“¾è¡¨é•¿åº¦è¶…è¿‡äº†ä¸€ä¸ªé˜ˆå€¼ï¼ˆä¾‹å¦‚8ï¼‰ï¼Œè¿™è¯´æ˜å“ˆå¸Œå†²çªæ¯”è¾ƒä¸¥é‡ï¼Œé“¾è¡¨çš„æ€§èƒ½ä¹Ÿä¼šä¸‹é™ã€‚é“¾è¡¨çš„æŸ¥æ‰¾æ“ä½œæ˜¯ O(n)ï¼Œå¦‚æœé“¾è¡¨å¾ˆé•¿ï¼ŒæŸ¥æ‰¾æ€§èƒ½ä¼šéå¸¸ä½ã€‚æ­¤æ—¶è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œèƒ½ä½¿å¾—è¯¥æ¡¶çš„æ“ä½œå¤æ‚åº¦ç”± O(n) é™ä½åˆ° O(log n)ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯8</strong></p>
<p>åœ¨ç†æƒ³å“ˆå¸Œå‡½æ•°ä¸‹ï¼ŒHashMapä¸­æ¯ä¸ªæ¡¶çš„èŠ‚ç‚¹æ•°æœä»<strong>æ³Šæ¾åˆ†å¸ƒ</strong>ã€‚æºç æ³¨é‡Šç»™å‡ºäº†ç²¾ç¡®æ¦‚ç‡ï¼š</p>



































<table><thead><tr><th>é“¾è¡¨é•¿åº¦</th><th>å‘ç”Ÿæ¦‚ç‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>0</td><td>0.60653066</td><td>60%çš„æ¡¶ä¸ºç©º</td></tr><tr><td>1</td><td>0.30326533</td><td>30%çš„æ¡¶æœ‰1ä¸ªèŠ‚ç‚¹</td></tr><tr><td>2</td><td>0.07581633</td><td>7.5%çš„æ¡¶æœ‰2ä¸ªèŠ‚ç‚¹</td></tr><tr><td>...</td><td>...</td><td>...</td></tr><tr><td>8</td><td>0.00000006</td><td><strong>åƒä¸‡åˆ†ä¹‹å…­</strong></td></tr></tbody></table>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œé“¾è¡¨é•¿åº¦è¾¾åˆ°8çš„æ¦‚ç‡æä½ï¼ˆ0.000006%ï¼‰ï¼Œå‡ ä¹å¯ä»¥è§†ä¸º<strong>å“ˆå¸Œå†²çªçš„å¼‚å¸¸æƒ…å†µ</strong>ã€‚
è¿™æ—¶å€™ä½¿ç”¨çº¢é»‘æ ‘ï¼Œè™½ç„¶èŠ‚ç‚¹å†…å­˜ç¿»å€ï¼ˆæ™®é€šNode vs TreeNodeï¼‰ï¼Œä½†èƒ½å°†æœ€åæŸ¥è¯¢æ—¶é—´ä»O(8)=O(1)æ¶åŒ–åˆ°O(log8)=O(3)ï¼Œ
è¿™æ˜¯ä¸€ä¸ªå®‰å…¨ç½‘è®¾è®¡ï¼Œä¸“é—¨é’ˆå¯¹å“ˆå¸Œç¢°æ’æ”»å‡»æˆ–åŠ£è´¨hashCode()ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯64ï¼Ÿä¸æ˜¯32æˆ–è€…128</strong></p>
<p><strong>1.64æ˜¯é“¾è¡¨éå†çš„æˆæœ¬æ‹ç‚¹</strong></p>
<p>åœ¨CPUç¼“å­˜å±‚é¢ï¼š</p>
<ul>
<li>32ä¸ªæ¡¶ï¼šå¹³å‡é“¾è¡¨é•¿åº¦â‰ˆ2-3ï¼ˆå½“è´Ÿè½½å› å­0.75ï¼Œå…ƒç´ æ•°â‰ˆ24æ—¶ï¼‰</li>
<li>64ä¸ªæ¡¶ï¼šå¹³å‡é“¾è¡¨é•¿åº¦â‰ˆ1-2ï¼ˆå…ƒç´ æ•°â‰ˆ48æ—¶ï¼‰</li>
</ul>
<p>å®éªŒæ•°æ®ï¼š</p>





























<table><thead><tr><th>å®¹é‡</th><th>é“¾è¡¨å¹³å‡é•¿åº¦</th><th>éå†æˆæœ¬</th><th>æ ‘åŒ–å¿…è¦æ€§</th></tr></thead><tbody><tr><td>32</td><td>2.3</td><td>å¾ˆä½</td><td>ä¸å¿…è¦</td></tr><tr><td>64</td><td>1.5</td><td>æä½</td><td><strong>å¼€å§‹è€ƒè™‘</strong></td></tr><tr><td>128</td><td>0.8</td><td>å¾®ä¸è¶³é“</td><td>è¿‡åº¦</td></tr></tbody></table>
<p>64æ˜¯ä¸€ä¸ªå¹³è¡¡ç‚¹ï¼šå®¹é‡è¶³å¤Ÿå¤§ï¼Œè®©æ ‘åŒ–çš„æ”¶ç›Šå¯èƒ½è¦†ç›–æˆæœ¬ã€‚</p>
<p><strong>2.çº¢é»‘æ ‘çš„å›ºå®šå¼€é”€</strong></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// TreeNode vs Node å†…å­˜å ç”¨å¯¹æ¯”</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {       <span class="hljs-comment">// æ™®é€šé“¾è¡¨èŠ‚ç‚¹</span>
    <span class="hljs-keyword">final</span> int hash;
    <span class="hljs-keyword">final</span> <span class="hljs-type">K</span> key;
    <span class="hljs-type">V</span> value;
    <span class="hljs-type">Node</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; next;  <span class="hljs-comment">// 4ä¸ªå­—æ®µ</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span> {   <span class="hljs-comment">// çº¢é»‘æ ‘èŠ‚ç‚¹ï¼ˆç»§æ‰¿è‡ªLinkedHashMap.Entryï¼‰</span>
    <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; parent;  <span class="hljs-comment">// +1</span>
    <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; left;    <span class="hljs-comment">// +1  </span>
    <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; right;   <span class="hljs-comment">// +1</span>
    <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; prev;    <span class="hljs-comment">// +1ï¼ˆä¿æŒé“¾è¡¨ç»“æ„ï¼‰</span>
    boolean red;           <span class="hljs-comment">// +1</span>
    <span class="hljs-comment">// æ€»å…±çº¦æ˜¯Nodeçš„2å€å†…å­˜</span>
}
</code></pre>
<p><strong>å†…å­˜è®¡ç®—</strong>ï¼ˆå‡è®¾64ä½JVMï¼Œå‹ç¼©æŒ‡é’ˆå¼€å¯ï¼‰ï¼š</p>
<ul>
<li><code>Node</code>Â â‰ˆ 24å­—èŠ‚</li>
<li><code>TreeNode</code>Â â‰ˆ 48å­—èŠ‚</li>
<li><strong>æ ‘åŒ–ä¸€ä¸ªæ¡¶ï¼ˆ8èŠ‚ç‚¹ï¼‰çš„å†…å­˜å¢é‡</strong>ï¼š<code>(48-24)Ã—8 = 192å­—èŠ‚</code></li>
</ul>
<p>å½“åªæœ‰32ä¸ªæ¡¶æ—¶ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ¡¶æ ‘åŒ–ï¼Œ<strong>å†…å­˜æµªè´¹æ¯”ä¾‹</strong>Â = 192/(32Ã—24)=25%ï¼Œå¤ªé«˜äº†ï¼<br/>
64ä¸ªæ¡¶æ—¶æ¯”ä¾‹é™ä¸º12.5%ï¼Œæ›´å¯æ¥å—ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">å›å¿†æ³Šæ¾åˆ†å¸ƒå…¬å¼ï¼š<span class="hljs-selector-tag">P</span>(k) = (Î»^k * e^(-Î»)) / k!
å¯¹äºHashMapï¼ŒÎ» = <span class="hljs-number">0.5</span>ï¼ˆå¹³å‡æ¯ä¸ªæ¡¶çš„å…ƒç´ æ•°ï¼Œå½“è´Ÿè½½å› å­<span class="hljs-number">0.75</span>ï¼‰

è®¡ç®—ä¸åŒå®¹é‡ä¸‹é“¾è¡¨é•¿åº¦â‰¥<span class="hljs-number">8</span>çš„æ¦‚ç‡ï¼š
| å®¹é‡ | å…ƒç´ æ•° | Î»   | <span class="hljs-selector-tag">P</span>(é•¿åº¦â‰¥<span class="hljs-number">8</span>)      | é¢„æœŸå‡ºç°æ¬¡æ•° |
|------|-------|-----|---------------|-------------|
| <span class="hljs-number">32</span>   | <span class="hljs-number">24</span>    | <span class="hljs-number">0.75</span>| <span class="hljs-number">0.0000004</span>     | <span class="hljs-number">0.000013</span>    |
| <span class="hljs-number">64</span>   | <span class="hljs-number">48</span>    | <span class="hljs-number">0.75</span>| <span class="hljs-number">0.0000004</span>     | <span class="hljs-number">0.000026</span>    |
| <span class="hljs-number">128</span>  | <span class="hljs-number">96</span>    | <span class="hljs-number">0.75</span>| <span class="hljs-number">0.0000004</span>     | <span class="hljs-number">0.000051</span>    |

å‘ç°ï¼šæ¦‚ç‡ç›¸åŒï¼Œä½†å®¹é‡è¶Šå¤§ï¼Œ**é¢„æœŸå‡ºç°çš„é•¿é“¾è¡¨æ•°è¶Šå¤š**ã€‚
<span class="hljs-number">64</span>æ˜¯ä¸€ä¸ªä¸´ç•Œç‚¹ï¼šé¢„æœŸå‡ºç°æ ‘åŒ–æ¡¶çš„æ¦‚ç‡å¼€å§‹å˜å¾—"å€¼å¾—è€ƒè™‘"ã€‚
</code></pre>
<p><strong>2.3 çœŸæ­£æ ‘åŒ–ï¼šTreeNode.treeify()</strong></p>
<pre><code class="hljs language-ini" lang="ini">final void treeify(Node&lt;K,V&gt;<span class="hljs-section">[]</span> tab) {
    TreeNode&lt;K,V&gt; <span class="hljs-attr">root</span> = null<span class="hljs-comment">;</span>
    // éå†å½“å‰TreeNodeé“¾è¡¨ï¼ˆthisæ˜¯é“¾è¡¨å¤´ï¼‰
    for (TreeNode&lt;K,V&gt; <span class="hljs-attr">x</span> = this, next<span class="hljs-comment">; x != null; x = next) {</span>
        <span class="hljs-attr">next</span> = (TreeNode&lt;K,V&gt;)x.next<span class="hljs-comment">;</span>
        <span class="hljs-attr">x.left</span> = x.right = null<span class="hljs-comment">;</span>
        
        if (<span class="hljs-attr">root</span> == null) {
            // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è®¾ä¸ºæ ¹ï¼ˆé»‘è‰²ï¼‰
            <span class="hljs-attr">x.parent</span> = null<span class="hljs-comment">;</span>
            <span class="hljs-attr">x.red</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
            <span class="hljs-attr">root</span> = x<span class="hljs-comment">;</span>
        } else {
            // ğŸ¯ çº¢é»‘æ ‘æ’å…¥ç®—æ³•ï¼ˆå®Œæ•´è§£æï¼‰
            K <span class="hljs-attr">k</span> = x.key<span class="hljs-comment">;</span>
            int <span class="hljs-attr">h</span> = x.hash<span class="hljs-comment">;</span>
            Class&lt;?&gt; <span class="hljs-attr">kc</span> = null<span class="hljs-comment">;</span>
            
            // äºŒå‰æœç´¢æ ‘æ’å…¥ä½ç½®æŸ¥æ‰¾
            for (TreeNode&lt;K,V&gt; <span class="hljs-attr">p</span> = root<span class="hljs-comment">;;) {</span>
                int dir, ph<span class="hljs-comment">;</span>
                K <span class="hljs-attr">pk</span> = p.key<span class="hljs-comment">;</span>
                
                // 1. æ¯”è¾ƒhashå€¼
                if ((<span class="hljs-attr">ph</span> = p.hash) &gt; h)
                    <span class="hljs-attr">dir</span> = -<span class="hljs-number">1</span><span class="hljs-comment">;</span>
                else if (ph &lt; h)
                    <span class="hljs-attr">dir</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
                // 2. hashç›¸ç­‰æ—¶æ¯”è¾ƒkey
                else if ((<span class="hljs-attr">kc</span> == null &amp;&amp;
                          (<span class="hljs-attr">kc</span> = comparableClassFor(k)) == null) ||
                         (<span class="hljs-attr">dir</span> = compareComparables(kc, k, pk)) == <span class="hljs-number">0</span>) {
                    // 3. å…¨ç›¸ç­‰æ—¶ä½¿ç”¨tieBreakOrder
                    <span class="hljs-attr">dir</span> = tieBreakOrder(k, pk)<span class="hljs-comment">;</span>
                }
                
                // æ’å…¥èŠ‚ç‚¹
                TreeNode&lt;K,V&gt; <span class="hljs-attr">xp</span> = p<span class="hljs-comment">;</span>
                if ((<span class="hljs-attr">p</span> = (dir &lt;= <span class="hljs-number">0</span>) ? p.left : p.right) == null) {
                    <span class="hljs-attr">x.parent</span> = xp<span class="hljs-comment">;</span>
                    if (dir &lt;= 0)
                        <span class="hljs-attr">xp.left</span> = x<span class="hljs-comment">;</span>
                    else
                        <span class="hljs-attr">xp.right</span> = x<span class="hljs-comment">;</span>
                    // ğŸ¯ çº¢é»‘æ ‘å¹³è¡¡ä¿®å¤
                    <span class="hljs-attr">root</span> = balanceInsertion(root, x)<span class="hljs-comment">;</span>
                    break<span class="hljs-comment">;</span>
                }
            }
        }
    }
    // ç¡®ä¿æ ¹èŠ‚ç‚¹åœ¨æ•°ç»„æ§½ä½
    moveRootToFront(tab, root)<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>2.4 çº¢é»‘æ ‘å¹³è¡¡ï¼šbalanceInsertion()</strong></p>
<pre><code class="hljs language-ini" lang="ini">static &lt;K,V&gt; TreeNode&lt;K,V&gt; balanceInsertion(TreeNode&lt;K,V&gt; root,
                                            TreeNode&lt;K,V&gt; x) {
    <span class="hljs-attr">x.red</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;  // æ–°æ’å…¥èŠ‚ç‚¹æ€»æ˜¯çº¢è‰²</span>
    for (TreeNode&lt;K,V&gt; xp, xpp, xppl, xppr<span class="hljs-comment">;;) {</span>
        // æƒ…å†µ1ï¼šçˆ¶èŠ‚ç‚¹ä¸ºnullï¼Œxæ˜¯æ ¹èŠ‚ç‚¹
        if ((<span class="hljs-attr">xp</span> = x.parent) == null) {
            <span class="hljs-attr">x.red</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
            return x<span class="hljs-comment">;</span>
        }
        // æƒ…å†µ2ï¼šçˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰² æˆ– ç¥–çˆ¶èŠ‚ç‚¹ä¸ºnull
        else if (!xp.red || (<span class="hljs-attr">xpp</span> = xp.parent) == null)
            return root<span class="hljs-comment">;</span>
        
        // çˆ¶èŠ‚ç‚¹æ˜¯ç¥–çˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹
        if (<span class="hljs-attr">xp</span> == (xppl = xpp.left)) {
            // æƒ…å†µ3ï¼šå”å”èŠ‚ç‚¹æ˜¯çº¢è‰²
            if ((<span class="hljs-attr">xppr</span> = xpp.right) != null &amp;&amp; xppr.red) {
                <span class="hljs-attr">xppr.red</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
                <span class="hljs-attr">xp.red</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
                <span class="hljs-attr">xpp.red</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
                <span class="hljs-attr">x</span> = xpp<span class="hljs-comment">;</span>
            } 
            // æƒ…å†µ4ï¼šå”å”èŠ‚ç‚¹æ˜¯é»‘è‰²
            else {
                // æƒ…å†µ4aï¼šxæ˜¯å³å­èŠ‚ç‚¹ï¼ˆLRå‹ï¼‰
                if (<span class="hljs-attr">x</span> == xp.right) {
                    <span class="hljs-attr">root</span> = rotateLeft(root, x = xp)<span class="hljs-comment">;</span>
                    <span class="hljs-attr">xpp</span> = (xp = x.parent) == null ? null : xp.parent<span class="hljs-comment">;</span>
                }
                // æƒ…å†µ4bï¼šxæ˜¯å·¦å­èŠ‚ç‚¹ï¼ˆLLå‹ï¼‰
                if (xp != null) {
                    <span class="hljs-attr">xp.red</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
                    if (xpp != null) {
                        <span class="hljs-attr">xpp.red</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
                        <span class="hljs-attr">root</span> = rotateRight(root, xpp)<span class="hljs-comment">;</span>
                    }
                }
            }
        }
        // å¯¹ç§°æƒ…å†µï¼šçˆ¶èŠ‚ç‚¹æ˜¯å³å­èŠ‚ç‚¹...
        else { /* å¯¹ç§°ä»£ç  */ }
    }
}
</code></pre>
<p><code>TreeNode.treeify()</code>æ–¹æ³•å°†åŒå‘é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œå…¶æ ¸å¿ƒæ˜¯æ ‡å‡†çš„äºŒå‰æœç´¢æ ‘æ’å…¥æµç¨‹ï¼šå…ˆæ ¹æ®å“ˆå¸Œå€¼å’Œé”®ç¡®å®šæ’å…¥ä½ç½®ï¼ˆä¼˜å…ˆæ¯”è¾ƒå“ˆå¸Œï¼Œå“ˆå¸Œç›¸åŒåˆ™æ¯”è¾ƒé”®ï¼Œå®Œå…¨ç›¸åŒæ—¶è°ƒç”¨<code>tieBreakOrder</code>å†³æ–­ï¼‰ï¼Œç„¶åæ‰§è¡Œæ’å…¥ã€‚æ¯æ¬¡æ’å…¥åç«‹å³è°ƒç”¨<code>balanceInsertion()</code>è¿›è¡Œçº¢é»‘æ ‘å¹³è¡¡ä¿®å¤ï¼Œè¯¥æ–¹æ³•éµå¾ªçº¢é»‘æ ‘çš„å››ç§å¹³è¡¡åœºæ™¯ï¼šå½“æ–°èŠ‚ç‚¹ä¸ºæ ¹æ—¶æŸ“é»‘ï¼ˆæƒ…å†µ1ï¼‰ï¼›çˆ¶èŠ‚ç‚¹ä¸ºé»‘æ—¶æ— éœ€è°ƒæ•´ï¼ˆæƒ…å†µ2ï¼‰ï¼›å”èŠ‚ç‚¹ä¸ºçº¢æ—¶æ‰§è¡Œé¢œè‰²ç¿»è½¬ï¼ˆæƒ…å†µ3ï¼‰ï¼›å”èŠ‚ç‚¹ä¸ºé»‘æ—¶æ ¹æ®èŠ‚ç‚¹ä½ç½®è¿›è¡Œå·¦æ—‹æˆ–å³æ—‹ï¼ˆæƒ…å†µ4ï¼‰ã€‚æ•´ä¸ªè½¬æ¢è¿‡ç¨‹é€æ­¥æ„å»ºå¹³è¡¡æ ‘ï¼Œæœ€ç»ˆé€šè¿‡<code>moveRootToFront()</code>ç¡®ä¿æ ¹èŠ‚ç‚¹ä½äºæ¡¶æ•°ç»„é¦–ä½ï¼Œç»´æŒå“ˆå¸Œè¡¨çš„å¿«é€Ÿè®¿é—®ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-5">3.é€€åŒ–æœºåˆ¶ï¼ˆå®Œæ•´æµç¨‹ï¼‰</h3>
<p><strong>3.1 é€€åŒ–è§¦å‘ç‚¹</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// 1. æ‰©å®¹æ—¶æ‹†åˆ†æ ‘ï¼šsplit()æ–¹æ³•</span>
if (loHead != null) {
    if (lc &lt;= UNTREEIFY_THRESHOLD)
        tab<span class="hljs-selector-attr">[index]</span> = loHead<span class="hljs-selector-class">.untreeify</span>(map);  <span class="hljs-comment">// é€€åŒ–</span>
    else {
        tab<span class="hljs-selector-attr">[index]</span> = loHead;
        if (hiHead != null)
            loHead<span class="hljs-selector-class">.treeify</span>(tab);
    }
}

<span class="hljs-comment">// 2. åˆ é™¤èŠ‚ç‚¹åæ£€æŸ¥ï¼šremoveTreeNode()</span>
if (root == null || root.right == null ||
    (rl = root.left) == null || rl<span class="hljs-selector-class">.left</span> == null) {
    tab<span class="hljs-selector-attr">[index]</span> = first<span class="hljs-selector-class">.untreeify</span>(map);  <span class="hljs-comment">// é€€åŒ–</span>
    return;
}
</code></pre>
<p>çº¢é»‘æ ‘é€€åŒ–ä¸ºé“¾è¡¨ä¸»è¦åœ¨ä¸¤ç§åœºæ™¯è§¦å‘ï¼šæ‰©å®¹æ—¶çš„æ ‘æ‹†åˆ†ä¸åˆ é™¤èŠ‚ç‚¹åçš„ç»“æ„æ£€æŸ¥ã€‚åœ¨<code>split()</code>æ–¹æ³•ä¸­ï¼Œå½“çº¢é»‘æ ‘å› æ‰©å®¹è¢«æ‹†åˆ†ä¸ºé«˜ä½å’Œä½ä½ä¸¤æ£µæ ‘æ—¶ï¼Œè‹¥æ‹†åˆ†åæŸéƒ¨åˆ†çš„èŠ‚ç‚¹æ•°ä¸è¶…è¿‡<code>UNTREEIFY_THRESHOLD=6</code>ï¼Œåˆ™ç›´æ¥è°ƒç”¨<code>untreeify()</code>é€€åŒ–ä¸ºé“¾è¡¨ï¼Œé¿å…ç»´æŒå°è§„æ¨¡æ ‘çš„å¼€é”€ã€‚åœ¨<code>removeTreeNode()</code>ä¸­ï¼Œåˆ é™¤èŠ‚ç‚¹åä¼šæ£€æŸ¥çº¢é»‘æ ‘ç»“æ„æ˜¯å¦è¿‡äºç®€å•ï¼ˆå¦‚æ ¹èŠ‚ç‚¹ä¸ºç©ºã€å­æ ‘è¿‡å°‘ï¼‰ï¼Œè‹¥æ ‘è§„æ¨¡è¿‡å°åˆ™åŒæ ·è§¦å‘é€€åŒ–ã€‚è¿™ä¸¤ç§æœºåˆ¶å…±åŒç¡®ä¿çº¢é»‘æ ‘ä»…åœ¨è§„æ¨¡è¶³å¤Ÿå¤§æ—¶å­˜åœ¨ï¼Œå°è§„æ¨¡æ—¶å›å½’æ›´é«˜æ•ˆçš„é“¾è¡¨ç»“æ„ï¼Œå®ç°åŠ¨æ€çš„è‡ªé€‚åº”ä¼˜åŒ–ã€‚</p>
<p><strong>3.2 é€€åŒ–å®ç°ï¼šuntreeify()</strong></p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">final Node&lt;K,V&gt; untreeify(HashMap&lt;K,V&gt; map) {
    Node&lt;K,V&gt; <span class="hljs-attr">hd</span> = null, tl = null<span class="hljs-comment">;</span>
    for (Node&lt;K,V&gt; <span class="hljs-attr">q</span> = this<span class="hljs-comment">; q != null; q = q.next) {</span>
        // TreeNode â†’ Node è½¬æ¢
        Node&lt;K,V&gt; <span class="hljs-attr">p</span> = map.replacementNode(q, null)<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">tl</span> == null)
            <span class="hljs-attr">hd</span> = p<span class="hljs-comment">;</span>
        else
            <span class="hljs-attr">tl.next</span> = p<span class="hljs-comment">;</span>
        <span class="hljs-attr">tl</span> = p<span class="hljs-comment">;</span>
    }
    return hd<span class="hljs-comment">;  // è¿”å›æ™®é€šé“¾è¡¨å¤´</span>
}
</code></pre>
<p><code>untreeify()</code>æ–¹æ³•å®ç°äº†çº¢é»‘æ ‘åˆ°é“¾è¡¨çš„é€€åŒ–è¿‡ç¨‹ï¼Œå®ƒéå†å½“å‰TreeNodeçš„åŒå‘é“¾è¡¨ï¼ˆé€šè¿‡<code>next</code>æŒ‡é’ˆï¼‰ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹è°ƒç”¨<code>map.replacementNode()</code>å°†å…¶è½¬æ¢å›æ™®é€šNodeèŠ‚ç‚¹ï¼ŒåŒæ—¶é‡æ–°æ„å»ºå•å‘é“¾è¡¨ç»“æ„ã€‚è¿™ä¸ªæ–¹æ³•çš„å…³é”®åœ¨äºTreeNodeä¿ç•™äº†åŸå§‹é“¾è¡¨çš„<code>next</code>æŒ‡é’ˆï¼Œä½¿å¾—é€€åŒ–è¿‡ç¨‹æ— éœ€é‡æ–°è®¡ç®—å“ˆå¸Œæˆ–æ¯”è¾ƒé”®å€¼ï¼Œä»…éœ€éå†ä¸€æ¬¡å³å¯å®Œæˆç»“æ„è½¬æ¢ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚è¿”å›çš„æ™®é€šé“¾è¡¨å¤´èŠ‚ç‚¹å°†æ›¿æ¢åŸæ¡¶ä¸­çš„æ ‘æ ¹ï¼Œä½¿è¯¥æ¡¶æ¢å¤ä¸ºçº¯é“¾è¡¨ç»“æ„ï¼Œä»è€Œåœ¨æ•°æ®è§„æ¨¡ç¼©å°æ—¶èŠ‚çœå†…å­˜å¹¶ç®€åŒ–æ“ä½œé€»è¾‘ã€‚</p>
<h3 data-id="heading-6">4.å…¶ä»–å…³é”®å…³è”æ–¹æ³•</h3>
<p><strong>4.1 æ ‘çš„æŸ¥æ‰¾ï¼šgetTreeNode()</strong></p>
<pre><code class="hljs language-ini" lang="ini">final TreeNode&lt;K,V&gt; getTreeNode(int h, Object k) {
    // ä»æ ¹èŠ‚ç‚¹å¼€å§‹æŸ¥æ‰¾
    return ((parent != null) ? root() : this).find(h, k, null)<span class="hljs-comment">;</span>
}

final TreeNode&lt;K,V&gt; find(int h, Object k, Class&lt;?&gt; kc) {
    TreeNode&lt;K,V&gt; <span class="hljs-attr">p</span> = this<span class="hljs-comment">;</span>
    do {
        int ph, dir<span class="hljs-comment">; K pk;</span>
        TreeNode&lt;K,V&gt; <span class="hljs-attr">pl</span> = p.left, pr = p.right, q<span class="hljs-comment">;</span>
        // æ¯”è¾ƒhash
        if ((<span class="hljs-attr">ph</span> = p.hash) &gt; h)
            <span class="hljs-attr">p</span> = pl<span class="hljs-comment">;</span>
        else if (ph &lt; h)
            <span class="hljs-attr">p</span> = pr<span class="hljs-comment">;</span>
        // hashç›¸ç­‰æ¯”è¾ƒkey
        else if ((<span class="hljs-attr">pk</span> = p.key) == k || (k != null &amp;&amp; k.equals(pk)))
            return p<span class="hljs-comment">;</span>
        else if (<span class="hljs-attr">pl</span> == null)
            <span class="hljs-attr">p</span> = pr<span class="hljs-comment">;</span>
        else if (<span class="hljs-attr">pr</span> == null)
            <span class="hljs-attr">p</span> = pl<span class="hljs-comment">;</span>
        else if ((kc != null ||
                  (<span class="hljs-attr">kc</span> = comparableClassFor(k)) != null) &amp;&amp;
                 (<span class="hljs-attr">dir</span> = compareComparables(kc, k, pk)) != <span class="hljs-number">0</span>)
            <span class="hljs-attr">p</span> = (dir &lt; <span class="hljs-number">0</span>) ? pl : pr<span class="hljs-comment">;</span>
        // é€’å½’æŸ¥æ‰¾
        else if ((<span class="hljs-attr">q</span> = pr.find(h, k, kc)) != null)
            return q<span class="hljs-comment">;</span>
        else
            <span class="hljs-attr">p</span> = pl<span class="hljs-comment">;</span>
    } while (p != null)<span class="hljs-comment">;</span>
    return null<span class="hljs-comment">;</span>
}
</code></pre>
<p><code>getTreeNode()</code>é€šè¿‡è°ƒç”¨<code>find()</code>æ–¹æ³•åœ¨çº¢é»‘æ ‘ä¸­æ‰§è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚æŸ¥æ‰¾è¿‡ç¨‹ä¼˜å…ˆæ¯”è¾ƒå“ˆå¸Œå€¼å†³å®šæœç´¢æ–¹å‘ï¼Œå“ˆå¸Œç›¸åŒæ—¶æ¯”è¾ƒé”®å¯¹è±¡ï¼Œè‹¥é”®å®ç°<code>Comparable</code>æ¥å£åˆ™ä½¿ç”¨æ¯”è¾ƒç»“æœï¼Œå¦åˆ™é€’å½’æœç´¢å·¦å³å­æ ‘ã€‚è¯¥æ–¹æ³•å……åˆ†åˆ©ç”¨çº¢é»‘æ ‘çš„å¹³è¡¡ç‰¹æ€§ï¼Œå°†æŸ¥æ‰¾å¤æ‚åº¦ä»é“¾è¡¨çš„O(n)ä¼˜åŒ–ä¸ºO(log n)ï¼Œä½†ç›¸æ¯”çº¯äºŒå‰æœç´¢æ ‘å¢åŠ äº†æ›´å¤šè¾¹ç•Œå¤„ç†é€»è¾‘ï¼Œä»¥å…¼å®¹HashMapä¸­é”®å¯èƒ½ä¸å¯æ¯”è¾ƒçš„æƒ…å†µã€‚</p>
<p><strong>4.2 æ ‘çš„åˆ é™¤ï¼šremoveTreeNode()</strong>
<code>removeTreeNode()</code>æ˜¯HashMapæœ€å¤æ‚çš„æ–¹æ³•ä¹‹ä¸€ï¼Œå®ƒéœ€è¦åŒæ—¶å¤„ç†çº¢é»‘æ ‘çš„åˆ é™¤å¹³è¡¡å’Œé“¾è¡¨ç»“æ„ç»´æŠ¤ã€‚åˆ é™¤èŠ‚ç‚¹åéœ€æ‰§è¡Œæ ‡å‡†çš„çº¢é»‘æ ‘åˆ é™¤ä¿®å¤ï¼ˆæ¶‰åŠé¢œè‰²è°ƒæ•´å’Œæ—‹è½¬ï¼‰ï¼ŒåŒæ—¶æ›´æ–°é“¾è¡¨çš„<code>prev/next</code>æŒ‡é’ˆã€‚è‹¥åˆ é™¤å¯¼è‡´æ ‘è§„æ¨¡è¿‡å°ï¼ˆæ ¹æ®ç‰¹å®šæ¡ä»¶åˆ¤æ–­ï¼‰ï¼Œåˆ™è§¦å‘é€€åŒ–æ£€æŸ¥è°ƒç”¨<code>untreeify()</code>ã€‚æ•´ä¸ªè¿‡ç¨‹éœ€ä¿æŒæ ‘å’Œé“¾è¡¨ä¸¤ç§æ•°æ®ç»“æ„çš„åŒæ­¥ï¼Œä½“ç°äº†æ··åˆç»“æ„çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<p><strong>4.3 æ‰©å®¹æ—¶çš„æ ‘æ‹†åˆ†ï¼šsplit()</strong></p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">// æ‰©å®¹æ—¶å¦‚ä½•æ‹†åˆ†ä¸€æ£µçº¢é»‘æ ‘
if ((e.hash &amp; bit) == 0) {  // ä½ä½é“¾è¡¨
    if ((<span class="hljs-attr">e.prev</span> = loTail) == null)
        <span class="hljs-attr">loHead</span> = e<span class="hljs-comment">;</span>
    else
        <span class="hljs-attr">loTail.next</span> = e<span class="hljs-comment">;</span>
    <span class="hljs-attr">loTail</span> = e<span class="hljs-comment">;</span>
    ++lc<span class="hljs-comment">;</span>
} else {  // é«˜ä½é“¾è¡¨
    // å¯¹ç§°æ“ä½œ...
}
// æ‹†åˆ†åæ£€æŸ¥æ˜¯å¦éœ€è¦é€€åŒ–
if (loHead != null) {
    if (lc &lt;= UNTREEIFY_THRESHOLD)
        tab<span class="hljs-section">[index]</span> = loHead.untreeify(map)<span class="hljs-comment">;</span>
    else {
        tab<span class="hljs-section">[index]</span> = loHead<span class="hljs-comment">;</span>
        if (hiHead != null)
            loHead.treeify(tab)<span class="hljs-comment">;</span>
    }
}
</code></pre>
<p>åœ¨<code>split()</code>æ–¹æ³•ä¸­ï¼Œçº¢é»‘æ ‘æ ¹æ®èŠ‚ç‚¹å“ˆå¸Œå€¼çš„ç‰¹å®šä½è¢«æ‹†åˆ†ä¸ºä½ä½å’Œé«˜ä½ä¸¤æ£µå­æ ‘ã€‚æ‹†åˆ†è¿‡ç¨‹éå†åŸæ ‘èŠ‚ç‚¹ï¼ŒæŒ‰ä½è¿ç®—ç»“æœå°†å…¶é‡æ–°ç»„ç»‡ä¸ºä¸¤ä¸ªé“¾è¡¨ï¼ŒåŒæ—¶ç»Ÿè®¡èŠ‚ç‚¹æ•°ã€‚æ‹†åˆ†åè‹¥æŸé“¾è¡¨èŠ‚ç‚¹æ•°ä¸è¶…è¿‡é€€åŒ–é˜ˆå€¼6ï¼Œåˆ™ç›´æ¥é€€åŒ–ä¸ºæ™®é€šé“¾è¡¨ï¼›å¦åˆ™é‡æ–°æ ‘åŒ–ã€‚è¿™ç§â€œæ‹†æ ‘ä¸ºé“¾ï¼ŒæŒ‰éœ€é‡æ„â€çš„ç­–ç•¥é¿å…äº†ç›´æ¥åœ¨æ ‘ç»“æ„ä¸Šæ‰§è¡Œå¤æ‚æ‹†åˆ†ï¼Œè€Œæ˜¯é™çº§åˆ°é“¾è¡¨æ“ä½œåå†é‡å»ºï¼Œé™ä½äº†æ‰©å®¹å¤æ‚åº¦ã€‚</p>
<h3 data-id="heading-7">5.è®¾è®¡ä¸æ€§èƒ½è€ƒå¯Ÿ</h3>
<p><strong>5.1 æ€§èƒ½å¯¹æ¯”æµ‹è¯•ä»£ç </strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å®é™…æµ‹è¯•ä¸åŒç»“æ„çš„æ€§èƒ½å·®å¼‚</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TreeifyBenchmark</span> { 
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">testPerformance</span>()</span> {
<span class="hljs-comment">// æµ‹è¯•é“¾è¡¨ vs çº¢é»‘æ ‘åœ¨ä¸åŒé•¿åº¦ä¸‹çš„æ“ä½œè€—æ—¶ </span>
<span class="hljs-comment">// åŒ…æ‹¬ï¼šæŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ } </span>
}
</code></pre>
<p>å®é™…æ€§èƒ½æµ‹è¯•æ˜¾ç¤ºï¼Œå½“é“¾è¡¨é•¿åº¦å°äºç­‰äº6æ—¶ï¼Œé“¾è¡¨ç»“æ„å› å†…å­˜ç´§å‡‘ã€æ— å¹³è¡¡å¼€é”€è€Œåœ¨å¢åˆ æŸ¥æ“ä½œä¸Šå‡ä¼˜äºçº¢é»‘æ ‘ï¼›é•¿åº¦è¾¾åˆ°8æ—¶ä¸¤è€…æ€§èƒ½æ¥è¿‘ï¼›è¶…è¿‡8åçº¢é»‘æ ‘çš„O(log n)ä¼˜åŠ¿å¼€å§‹æ˜¾ç°ã€‚ä½†åœ¨å®é™…å“ˆå¸Œåˆ†å¸ƒè‰¯å¥½çš„åœºæ™¯ä¸­ï¼Œé•¿é“¾è¡¨å‡ºç°æ¦‚ç‡æä½ï¼ˆ0.000006%ï¼‰ï¼Œæ ‘åŒ–æœºåˆ¶æ›´å¤šæ˜¯åº”å¯¹å“ˆå¸Œç¢°æ’æ”»å‡»çš„é˜²å¾¡æ‰‹æ®µï¼Œè€Œéæ—¥å¸¸æ€§èƒ½ä¼˜åŒ–ã€‚è¿™ç§è®¾è®¡ä½“ç°äº†â€œä¸ºå¸¸æ€ä¼˜åŒ–ï¼Œä¸ºæç«¯é˜²æŠ¤â€çš„å·¥ç¨‹å“²å­¦ã€‚</p>
<p><strong>5.2 å†…å­˜å¸ƒå±€åˆ†æ</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ä½¿ç”¨JOLå·¥å…·åˆ†æå¯¹è±¡å†…å­˜å¸ƒå±€</span>
<span class="hljs-comment">// Nodeå¯¹è±¡å¤´ + hash + key + value + next</span>
<span class="hljs-comment">// TreeNodeå¯¹è±¡å¤´ + æ›´å¤šå­—æ®µ </span>
</code></pre>
<p>ä½¿ç”¨JOLï¼ˆJava Object Layoutï¼‰å·¥å…·åˆ†æå¯è§ï¼Œ64ä½JVMå¼€å¯å‹ç¼©æŒ‡é’ˆæ—¶ï¼ŒNodeå¯¹è±¡çº¦å 24å­—èŠ‚ï¼ˆå¯¹è±¡å¤´12B+å¼•ç”¨å­—æ®µå„4Bï¼‰ï¼Œè€ŒTreeNodeç”±äºç»§æ‰¿ä½“ç³»å¤æ‚ä¸”å­—æ®µæ›´å¤šï¼Œå ç”¨çº¦48å­—èŠ‚ï¼Œæ˜¯Nodeçš„ä¸¤å€ã€‚çº¢é»‘æ ‘èŠ‚ç‚¹å¤šå‡ºçš„parentã€leftã€rightç­‰æŒ‡é’ˆè™½å¸¦æ¥ç®—æ³•ä¼˜åŠ¿ï¼Œå´ä¹Ÿæ˜¾è‘—å¢åŠ å†…å­˜å¼€é”€ï¼Œè¿™è§£é‡Šäº†ä¸ºä½•å°å®¹é‡ä¸‹ä¼˜å…ˆæ‰©å®¹è€Œéæ ‘åŒ–â€”â€”é¿å…å°‘é‡æ ‘åŒ–èŠ‚ç‚¹é€ æˆä¸æˆæ¯”ä¾‹çš„å†…å­˜æµªè´¹ã€‚</p>
<p><strong>5.3 ä¸ConcurrentHashMapå¯¹æ¯”</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ConcurrentHashMapçš„TreeNodeæ˜¯finalçš„ </span>
<span class="hljs-comment">// æ ‘åŒ–éœ€è¦åŠ é” synchronized (f) </span>
<span class="hljs-comment">// æœ‰æ›´å¤æ‚çš„å¹¶å‘æ§åˆ¶}</span>
</code></pre>
<p>ConcurrentHashMapçš„æ ‘åŒ–æœºåˆ¶åœ¨HashMapåŸºç¡€ä¸Šå¢åŠ äº†å¹¶å‘å®‰å…¨è®¾è®¡ï¼šæ ‘åŒ–å‰éœ€é€šè¿‡<code>synchronized</code>é”ä½æ¡¶å¤´èŠ‚ç‚¹ï¼ŒTreeNodeè¢«å£°æ˜ä¸ºfinalä»¥é˜²æ­¢å¹¶å‘ä¿®æ”¹ï¼Œä¸”æ‰©å®¹æœŸé—´æœ‰æ›´å¤æ‚çš„åä½œæœºåˆ¶ã€‚è¿™äº›å·®å¼‚æºäºå¹¶å‘åœºæ™¯ä¸‹éœ€ä¿è¯ç»“æ„å˜åŒ–çš„åŸå­æ€§ï¼Œä½†ä¹Ÿä½¿å¾—æ ‘åŒ–è§¦å‘æ¡ä»¶æ›´ä¸¥æ ¼ã€å¤±è´¥å¯èƒ½æ€§æ›´é«˜ï¼Œä½“ç°äº†å¹¶å‘å®¹å™¨â€œå®‰å…¨ä¼˜å…ˆäºä¼˜åŒ–â€çš„è®¾è®¡åŸåˆ™ã€‚</p>
<h3 data-id="heading-8">6.å¸¸è§è¯¯åŒº</h3>
<h5 data-id="heading-9">è¯¯åŒº1ï¼šé“¾è¡¨é•¿åº¦&gt;8å°±ä¸€å®šä¼šæ ‘åŒ–</h5>
<p><strong>é”™è¯¯ç†è§£</strong>ï¼šåªè¦é“¾è¡¨é•¿åº¦è¶…è¿‡8ï¼ŒHashMapå°±ä¼šç«‹å³å°†é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ã€‚</p>
<p><strong>äº§ç”ŸåŸå› </strong>ï¼šå¼€å‘è€…ç›´è§‚è®¤ä¸ºé˜ˆå€¼å°±æ˜¯è§¦å‘æ¡ä»¶ï¼Œå¿½ç•¥äº†ç³»ç»Ÿçš„æ•´ä½“ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p><strong>æ­£ç¡®äº‹å®</strong>ï¼šéœ€è¦åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼šâ‘ é“¾è¡¨é•¿åº¦&gt;TREEIFY_THRESHOLD(8) â‘¡æ•°ç»„å®¹é‡â‰¥MIN_TREEIFY_CAPACITY(64)ã€‚å®¹é‡ä¸è¶³64æ—¶ä¼˜å…ˆæ‰©å®¹ï¼Œå› ä¸ºå°è¡¨æ‰©å®¹æˆæœ¬ä½äºæ ‘åŒ–ç»´æŠ¤æˆæœ¬ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; smallMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-number">32</span>); <span class="hljs-comment">// å®¹é‡32&lt;64</span>
<span class="hljs-comment">// æ’å…¥9ä¸ªhashå†²çªçš„key â†’ è§¦å‘æ‰©å®¹è€Œéæ ‘åŒ–</span>
</code></pre>
<h5 data-id="heading-10">è¯¯åŒº2ï¼šçº¢é»‘æ ‘ä¸€å®šæ¯”é“¾è¡¨æ€§èƒ½å¥½</h5>
<p><strong>é”™è¯¯ç†è§£</strong>ï¼šO(log n)å¤æ‚åº¦æ°¸è¿œä¼˜äºO(n)ï¼Œæ ‘åŒ–åæ€§èƒ½å¿…ç„¶æå‡ã€‚</p>
<p><strong>äº§ç”ŸåŸå› </strong>ï¼šå¿½ç•¥äº†å¤§Oè®°æ³•çš„å¸¸æ•°å› å­å’Œå®é™…æ•°æ®è§„æ¨¡çš„å½±å“ã€‚</p>
<p><strong>æ­£ç¡®äº‹å®</strong>ï¼šå½“nâ‰¤6æ—¶ï¼Œé“¾è¡¨å› å†…å­˜ç´§å‡‘ã€æ— å¹³è¡¡å¼€é”€è€Œæ›´å¿«ã€‚æ ‘åŒ–é˜ˆå€¼è®¾ä¸º8ï¼Œé€€åŒ–é˜ˆå€¼è®¾ä¸º6ï¼Œä¸­é—´ç•™äº†ç¼“å†²å¸¦é˜²æ­¢é¢‘ç¹ç»“æ„è½¬æ¢ã€‚</p>
<p><strong>å®é™…å½±å“</strong>ï¼šå°è§„æ¨¡æ•°æ®ä¸‹å¼ºåˆ¶æ ‘åŒ–åè€Œé™ä½æ€§èƒ½ï¼Œè¿™ä¹Ÿæ˜¯å…ˆæ‰©å®¹åæ ‘åŒ–çš„åŸå› ä¹‹ä¸€ã€‚</p>
<h5 data-id="heading-11">è¯¯åŒº3ï¼šTreeNodeåªæ˜¯çº¢é»‘æ ‘èŠ‚ç‚¹</h5>
<p><strong>é”™è¯¯ç†è§£</strong>ï¼šæ ‘åŒ–åèŠ‚ç‚¹å®Œå…¨å˜ä¸ºæ ‘ç»“æ„ï¼Œä¸¢å¤±é“¾è¡¨ç‰¹æ€§ã€‚</p>
<p><strong>äº§ç”ŸåŸå› </strong>ï¼šä»"é“¾è¡¨è½¬çº¢é»‘æ ‘"çš„åç§°äº§ç”Ÿçš„ç›´è§‚è¯¯è§£ã€‚</p>
<p><strong>æ­£ç¡®äº‹å®</strong>ï¼šTreeNodeä¿ç•™äº†prev/nextæŒ‡é’ˆå½¢æˆåŒå‘é“¾è¡¨ï¼Œä¾¿äºï¼šâ‘ å¿«é€Ÿé€€åŒ–å›é“¾è¡¨ â‘¡è¿­ä»£éå† â‘¢ä¸LinkedHashMapç»“æ„å…¼å®¹ã€‚</p>
<p><strong>é¢è¯•è€ƒç‚¹</strong>ï¼šä¸ºä»€ä¹ˆTreeNodeè¦ç»§æ‰¿LinkedHashMap.Entryè€Œéç›´æ¥å®ç°æ ‘èŠ‚ç‚¹ï¼Ÿ</p>
<h5 data-id="heading-12">è¯¯åŒº4ï¼šæ ‘åŒ–åå°±ä¸å†æ‰©å®¹</h5>
<p><strong>é”™è¯¯ç†è§£</strong>ï¼šä¸€æ—¦æ¡¶è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œè¯¥æ¡¶å°±ä¸ä¼šå†å‚ä¸æ‰©å®¹rehashã€‚</p>
<p><strong>äº§ç”ŸåŸå› </strong>ï¼šè®¤ä¸ºæ ‘ç»“æ„å›ºå®šï¼Œå¿½ç•¥HashMapåŠ¨æ€å¢é•¿çš„ç‰¹æ€§ã€‚</p>
<p><strong>æ­£ç¡®äº‹å®</strong>ï¼šæ ‘åŒ–åæ•´ä¸ªHashMapä»å¯èƒ½æ‰©å®¹ã€‚æ‰©å®¹æ—¶æ ‘ä¼šè¢«æ‹†åˆ†ä¸ºä¸¤ä¸ªé“¾è¡¨æˆ–ä¸¤æ£µè¾ƒå°çš„æ ‘ï¼ˆè‹¥æ‹†åˆ†åèŠ‚ç‚¹â‰¤6åˆ™é€€åŒ–ä¸ºé“¾è¡¨ï¼‰ã€‚</p>
<p><strong>åœºæ™¯å¯¹åº”</strong>ï¼šå…ˆæ ‘åŒ–åæŒç»­æ’å…¥å¤§é‡æ•°æ®çš„æƒ…å†µã€‚</p>
<h5 data-id="heading-13"/>
<h5 data-id="heading-14">è¯¯åŒº5ï¼šæ ‘åŒ–é˜ˆå€¼8æ˜¯éšæ„è®¾ç½®çš„</h5>
<p><strong>é”™è¯¯ç†è§£</strong>ï¼šæ•°å­—8æ²¡æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Œåªæ˜¯å·¥ç¨‹å¸ˆçš„ç»éªŒå€¼ã€‚</p>
<p><strong>äº§ç”ŸåŸå› </strong>ï¼šä¸äº†è§£HashMapè®¾è®¡çš„ç»Ÿè®¡å­¦åŸºç¡€ã€‚</p>
<p><strong>æ­£ç¡®äº‹å®</strong>ï¼šåŸºäºæ³Šæ¾åˆ†å¸ƒï¼Œåœ¨ç†æƒ³hashå‡½æ•°ä¸‹ï¼Œé“¾è¡¨é•¿åº¦è¾¾åˆ°8çš„æ¦‚ç‡ä»…ä¸º0.00000006ï¼ˆåƒä¸‡åˆ†ä¹‹å…­ï¼‰ã€‚è¿™æ˜¯å¹³è¡¡"é˜²å¾¡æç«¯æƒ…å†µ"å’Œ"é¿å…è¿‡åº¦ä¼˜åŒ–"çš„æ•°å­¦ç»“æœã€‚</p>
<h5 data-id="heading-15">è¯¯åŒº6ï¼šæ‰€æœ‰HashMapå®ç°æ ‘åŒ–è§„åˆ™ç›¸åŒ</h5>
<p><strong>é”™è¯¯ç†è§£</strong>ï¼šHashMapã€ConcurrentHashMapã€LinkedHashMapçš„æ ‘åŒ–é€»è¾‘å®Œå…¨ä¸€è‡´ã€‚</p>
<p><strong>äº§ç”ŸåŸå› </strong>ï¼šè®¤ä¸ºJDKé›†åˆæ¡†æ¶é‡‡ç”¨ç»Ÿä¸€è®¾è®¡ã€‚</p>
<p><strong>æ­£ç¡®äº‹å®</strong>ï¼šConcurrentHashMapæ ‘åŒ–éœ€åŠ é”ä¸”å¯èƒ½å¤±è´¥ï¼ŒLinkedHashMapè¦è€ƒè™‘è®¿é—®é¡ºåºç»´æŠ¤ï¼Œä¸åŒMapå®ç°æœ‰ä¸åŒçš„çº¦æŸå’Œä¼˜åŒ–ã€‚</p>
<h5 data-id="heading-16">è¯¯åŒº7ï¼šæ ‘åŒ–ä¸»è¦ä¼˜åŒ–æŸ¥è¯¢æ“ä½œ</h5>
<p><strong>é”™è¯¯ç†è§£</strong>ï¼šæ ‘åŒ–åªæ˜¯ä¸ºäº†åŠ å¿«æŸ¥æ‰¾é€Ÿåº¦ã€‚</p>
<p><strong>äº§ç”ŸåŸå› </strong>ï¼šé“¾è¡¨ä¸»è¦ç¼ºç‚¹æ˜¯æŸ¥è¯¢æ…¢ï¼Œè‡ªç„¶è®¤ä¸ºæ ‘åŒ–é’ˆå¯¹æŸ¥è¯¢ä¼˜åŒ–ã€‚</p>
<p><strong>æ­£ç¡®äº‹å®</strong>ï¼šæ ‘åŒ–ä¼˜åŒ–æ‰€æœ‰éœ€è¦å®šä½èŠ‚ç‚¹çš„æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ã€‚ä½†åœ¨é¢‘ç¹ä¿®æ”¹åœºæ™¯ï¼Œæ ‘çš„å¹³è¡¡ç»´æŠ¤å¼€é”€å¯èƒ½æŠµæ¶ˆæŸ¥æ‰¾æ”¶ç›Šã€‚</p>
<h5 data-id="heading-17">è¯¯åŒº8ï¼šè‡ªå®šä¹‰å¯¹è±¡ä½œä¸ºKeyä¸å¿…æ‹…å¿ƒæ ‘åŒ–</h5>
<p><strong>é”™è¯¯ç†è§£</strong>ï¼šæ ‘åŒ–æ˜¯HashMapå†…éƒ¨æœºåˆ¶ï¼Œä¸Keyå¯¹è±¡æ— å…³ã€‚</p>
<p><strong>äº§ç”ŸåŸå› </strong>ï¼šå¼€å‘è€…åªå…³æ³¨åŠŸèƒ½å®ç°ï¼Œå¿½ç•¥æ€§èƒ½å½±å“ã€‚</p>
<p><strong>æ­£ç¡®äº‹å®</strong>ï¼šåŠ£è´¨hashCode()ä¼šå¯¼è‡´å¼‚å¸¸æ ‘åŒ–ã€‚å¦‚æ‰€æœ‰å¯¹è±¡è¿”å›ç›¸åŒhashCodeï¼ŒHashMapä¼šé€€åŒ–ä¸ºå•æ¡¶çº¢é»‘æ ‘ï¼Œå†…å­˜æš´å¢ä¸”å¤±å»å“ˆå¸Œè¡¨ä¼˜åŠ¿ã€‚</p>
<p><strong>é˜²æŠ¤å»ºè®®</strong>ï¼šå®ç°hashCode()æ—¶ä½¿ç”¨Objects.hash()ç»„åˆå…³é”®å­—æ®µã€‚</p>
<h5 data-id="heading-18">è¯¯åŒº9ï¼šå®é™…å¼€å‘ä¸­ç»å¸¸é‡åˆ°æ ‘åŒ–</h5>
<p><strong>é”™è¯¯ç†è§£</strong>ï¼šHashMapç»å¸¸ä½¿ç”¨çº¢é»‘æ ‘ç»“æ„ã€‚</p>
<p><strong>äº§ç”ŸåŸå› </strong>ï¼šå­¦ä¹ æ—¶è¿‡åº¦å…³æ³¨æ ‘åŒ–æœºåˆ¶ï¼Œè¯¯ä»¥ä¸ºå®ƒæ˜¯å¸¸è§çŠ¶æ€ã€‚</p>
<p><strong>æ­£ç¡®äº‹å®</strong>ï¼šæ­£å¸¸ä½¿ç”¨ä¸‹æ ‘åŒ–æ¦‚ç‡æä½ã€‚è‹¥ç”Ÿäº§ä¸­å¤§é‡å‡ºç°TreeNodeï¼Œéœ€è¦æ’æŸ¥ï¼šâ‘ hashCodeå®ç°é—®é¢˜ â‘¡å“ˆå¸Œç¢°æ’æ”»å‡» â‘¢æ•°æ®åˆ†å¸ƒå¼‚å¸¸ã€‚</p>
<h5 data-id="heading-19">è¯¯åŒº10ï¼šé€€åŒ–é˜ˆå€¼6æ˜¯8çš„ç®€å•å¯¹ç§°</h5>
<p><strong>é”™è¯¯ç†è§£</strong>ï¼š8æ ‘åŒ–æ‰€ä»¥8é€€åŒ–ï¼Œä¸ºäº†å¯¹ç§°ç¾è§‚ã€‚</p>
<p><strong>äº§ç”ŸåŸå› </strong>ï¼šæœªè€ƒè™‘ç³»ç»Ÿç¨³å®šæ€§çš„å·¥ç¨‹éœ€æ±‚ã€‚</p>
<p><strong>æ­£ç¡®äº‹å®</strong>ï¼š6â†’8çš„ç¼“å†²å¸¦é˜²æ­¢"æŠ–åŠ¨ç°è±¡"ã€‚è‹¥é˜ˆå€¼ç›¸åŒï¼Œå½“èŠ‚ç‚¹æ•°åœ¨é˜ˆå€¼é™„è¿‘åå¤æ—¶ï¼Œä¼šå¯¼è‡´é¢‘ç¹çš„æ ‘åŒ–â†”é€€åŒ–è½¬æ¢ï¼Œäº§ç”Ÿä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚</p>
<hr/>
<p><strong>å…³äºä½œè€…</strong>ï¼šä¸€ä¸ªæ­£åœ¨æ±‚èŒçš„Javaå¼€å‘è€…ï¼ŒåšæŒé€šè¿‡é¡¹ç›®å®è·µå’ŒæŠ€æœ¯å†™ä½œæå‡è‡ªå·±ã€‚GitHub:Â [@yangziyue](<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FYzy000000" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FYzy000000" target="_blank">Yzy000000</a>Â | æ˜é‡‘:Â <a href="https://link.juejin.cn/?target=" target="_blank" title="https://link.juejin.cn/?target=">@Wiittch</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - çŠ¶æ€æ•°æ®è®¾è®¡ [8 - 3]ï¼šæœåŠ¡ç«¯çŠ¶æ€ä¸å®¢æˆ·ç«¯çŠ¶æ€çš„æ¶æ„åˆ†ç¦»]]></title>    <link>https://juejin.cn/post/7604080364353536027</link>    <guid>https://juejin.cn/post/7604080364353536027</guid>    <pubDate>2026-02-09T01:48:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604080364353536027" data-draft-id="7604037348608507942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - çŠ¶æ€æ•°æ®è®¾è®¡ [8 - 3]ï¼šæœåŠ¡ç«¯çŠ¶æ€ä¸å®¢æˆ·ç«¯çŠ¶æ€çš„æ¶æ„åˆ†ç¦»"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-09T01:48:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ç‹å£®å£®"/> <meta itemprop="url" content="https://juejin.cn/user/4473272506789485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - çŠ¶æ€æ•°æ®è®¾è®¡ [8 - 3]ï¼šæœåŠ¡ç«¯çŠ¶æ€ä¸å®¢æˆ·ç«¯çŠ¶æ€çš„æ¶æ„åˆ†ç¦»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4473272506789485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ç‹å£®å£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T01:48:14.000Z" title="Mon Feb 09 2026 01:48:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢</strong></p>
<p>æ¶æ„å¸ˆçš„æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€æ˜¯<strong>åˆ†ç±»</strong>ã€‚ å¦‚æœä½ è§‰å¾—çŠ¶æ€ç®¡ç†å¾ˆç—›è‹¦ï¼Œé€šå¸¸æ˜¯å› ä¸ºä½ è¯•å›¾ç”¨åŒä¸€ç§å·¥å…·å¤„ç†ä¸¤ç§æˆªç„¶ä¸åŒçš„ä¸œè¥¿ï¼š</p>
<ol>
<li><strong>å®¢æˆ·ç«¯çŠ¶æ€ (Client State):</strong> æ¯”å¦‚â€œä¾§è¾¹æ æ˜¯å¦å±•å¼€â€ã€â€œå½“å‰çš„å¤œé—´æ¨¡å¼â€ã€‚å®ƒä»¬æ˜¯åŒæ­¥çš„ã€ç¬é—´å®Œæˆçš„ã€ç”±å‰ç«¯å®Œå…¨æ§åˆ¶ã€‚</li>
<li><strong>æœåŠ¡ç«¯çŠ¶æ€ (Server State):</strong> æ¯”å¦‚â€œç”¨æˆ·è®¢å•åˆ—è¡¨â€ã€‚å®ƒä»¬æ˜¯å¼‚æ­¥çš„ã€å¯èƒ½å¤±æ•ˆçš„ã€ç”±åç«¯æ§åˆ¶ã€‚</li>
</ol>
<p><strong>Redux å¹¶ä¸æ“…é•¿ç®¡ç† Server Stateã€‚</strong> çœŸæ­£ä¸“ä¸šçš„åšæ³•æ˜¯ï¼šè®© Redux å›å½’ UIï¼Œè®© <strong>TanStack Query (React Query)</strong> æ¥ç®¡ APIã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d9f6f5986f94242a443885bf85de09c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771206494&amp;x-signature=uHWxDd5HMJlf7Tqefazr1Yj2Duo%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆè¦æŠŠ API èµ¶å‡º Reduxï¼Ÿ</h2>
<h3 data-id="heading-1">1.1 æ¶ˆå¤±çš„â€œæ ·æ¿ä»£ç â€</h3>
<p>åœ¨ä¼ ç»Ÿçš„ Redux å¤„ç† API æµç¨‹ä¸­ï¼Œä½ éœ€è¦å†™ï¼š</p>
<ul>
<li>ä¸€ä¸ª <code>Constant</code> å®šä¹‰ <code>FETCH_USER_REQUEST</code></li>
<li>ä¸€ä¸ª <code>Action Creator</code></li>
<li>ä¸€ä¸ªå¤„ç† <code>Pending/Success/Error</code> çš„ <code>Reducer</code></li>
<li>ä¸€ä¸ª <code>useEffect</code> æ¥è§¦å‘è¯·æ±‚</li>
</ul>
<p>è€Œåœ¨ <strong>TanStack Query</strong> ä¸­ï¼Œè¿™åªéœ€è¦ä¸€è¡Œä»£ç ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> { data, isLoading } = <span class="hljs-title function_ invoke__">useQuery</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'user'</span>], <span class="hljs-attr">queryFn</span>: fetchUser });
</code></pre>
<h3 data-id="heading-2">1.2 ç¼“å­˜ä¸å¤±æ•ˆï¼šRedux çš„ç›²åŒº</h3>
<p>Server State æœ€éš¾çš„ä¸æ˜¯â€œè·å–â€ï¼Œè€Œæ˜¯**â€œç»´æŠ¤â€**ã€‚</p>
<ul>
<li>ç”¨æˆ·ç¦»å¼€é¡µé¢ 5 åˆ†é’Ÿåå›æ¥ï¼Œæ•°æ®è¿˜æ˜¯æ–°çš„å—ï¼Ÿ</li>
<li>ä¸¤ä¸ªç»„ä»¶åŒæ—¶è¯·æ±‚åŒä¸€ä¸ªæ¥å£ï¼Œä¼šå‘ä¸¤æ¬¡è¯·æ±‚å—ï¼Ÿ</li>
<li>å¼±ç½‘ç¯å¢ƒä¸‹ï¼Œè¯·æ±‚å¤±è´¥äº†ä¼šè‡ªåŠ¨é‡è¯•å—ï¼Ÿ å¦‚æœè¦ç”¨ Redux å®ç°è¿™äº›ï¼Œä½ éœ€è¦å†™å‡ ç™¾è¡Œå¤æ‚çš„ Middlewareã€‚è€Œè¿™äº›ï¼Œæ˜¯ Server State ç®¡ç†å·¥å…·çš„<strong>æ ‡é…</strong>ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€ æ¶æ„æ¨¡å‹ï¼šåŒå±‚æ•°æ®æµ</h2>
<p>ç°ä»£å‰ç«¯æ¶æ„æ¨èé‡‡ç”¨ <strong>â€œåŒå±‚åˆ†ç¦»â€</strong> æ¨¡å‹ï¼š</p>
<h3 data-id="heading-4">2.1 å¤–éƒ¨å±‚ï¼šæœåŠ¡ç«¯çŠ¶æ€ (Server State)</h3>
<ul>
<li><strong>å·¥å…·ï¼š</strong> TanStack Query (React Query) æˆ– SWRã€‚</li>
<li><strong>èŒè´£ï¼š</strong> ç¼“å­˜ç®¡ç†ã€è‡ªåŠ¨é¢„å–ã€å¤±æ•ˆæ£€æŸ¥ (Stale-While-Revalidate)ã€è¯·æ±‚å»é‡ã€‚</li>
<li><strong>ç‰¹ç‚¹ï¼š</strong> å®ƒæ˜¯<strong>å¼‚æ­¥</strong>çš„ã€‚</li>
</ul>
<h3 data-id="heading-5">2.2 å†…éƒ¨å±‚ï¼šå®¢æˆ·ç«¯çŠ¶æ€ (Client State)</h3>
<ul>
<li><strong>å·¥å…·ï¼š</strong> Zustand, Pinia, Jotai æˆ–ç®€å•çš„ React Contextã€‚</li>
<li><strong>èŒè´£ï¼š</strong> ç®¡ç†çº¯ç²¹çš„ UI é€»è¾‘ï¼ˆå¼€å…³ã€å¤šè¯­è¨€ã€ä¸»é¢˜ã€ä¸´æ—¶è‰ç¨¿ï¼‰ã€‚</li>
<li><strong>ç‰¹ç‚¹ï¼š</strong> å®ƒæ˜¯<strong>åŒæ­¥</strong>çš„ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ å®æˆ˜æˆ˜æœ¯ï¼šä»â€œæ‰‹åŠ¨æŒ¡â€åˆ‡æ¢åˆ°â€œè‡ªåŠ¨æŒ¡â€</h2>
<h3 data-id="heading-7">3.1 è‡ªåŠ¨åŒ–çš„ä¾èµ–è¿½è¸ª</h3>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šä½ ä¿®æ”¹äº†ç”¨æˆ·çš„å¤´åƒï¼Œä½ éœ€è¦æ›´æ–°æ‰€æœ‰æ˜¾ç¤ºå¤´åƒçš„åœ°æ–¹ã€‚</p>
<ul>
<li><strong>æ—§æ¨¡å¼ (Redux):</strong> ä¿®æ”¹æˆåŠŸåï¼Œæ‰‹åŠ¨å‘èµ·ä¸€ä¸ª <code>updateUserAction</code> å»ä¿®æ”¹ Redux é‡Œçš„é‚£ä¸ªå¤§å¯¹è±¡ã€‚</li>
<li><strong>æ–°æ¨¡å¼ (Query):</strong> åªéœ€è¦æ‰§è¡Œä¸€æ¬¡â€œå¤±æ•ˆï¼ˆInvalidateï¼‰â€ã€‚</li>
</ul>

<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å½“ç”¨æˆ·ä¿®æ”¹ä¸ªäººèµ„æ–™æˆåŠŸæ—¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">mutation</span> = <span class="hljs-title function_ invoke__">useMutation</span>({
  <span class="hljs-attr">mutationFn</span>: updateProfile,
  <span class="hljs-attr">onSuccess</span>: () =&gt; {
    <span class="hljs-comment">// å‘Šè¯‰ç³»ç»Ÿï¼š['user'] è¿™ä¸ª key ä¸‹çš„æ•°æ®è„äº†ï¼Œè¯·è‡ªåŠ¨é‡æ–°æ‹‰å–</span>
    queryClient.<span class="hljs-title function_ invoke__">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'user'</span>] })
  },
})
</code></pre>
<p><strong>æ¶æ„æ„ä¹‰ï¼š</strong> ä½ çš„ä»£ç ä¸å†éœ€è¦å…³å¿ƒâ€œæ•°æ®æ€ä¹ˆåŒæ­¥â€ï¼Œåªéœ€è¦å…³å¿ƒâ€œæ•°æ®ä½•æ—¶å¤±æ•ˆâ€ã€‚</p>
<h3 data-id="heading-8">3.2 ä¹è§‚æ›´æ–° (Optimistic Updates)</h3>
<p>è¿™æ˜¯æ¶æ„é«˜çº§æ„Ÿçš„æ ¸å¿ƒã€‚å½“ç”¨æˆ·ç‚¹èµæ—¶ï¼Œæˆ‘ä»¬ä¸ç­‰åç«¯è¿”å›ï¼Œç›´æ¥æ”¹ UIã€‚</p>
<p>TanStack Query å…è®¸ä½ åœ¨ <code>onMutate</code> ä¸­æ‰‹åŠ¨ä¿®æ”¹ç¼“å­˜å‰¯æœ¬ï¼Œå¦‚æœè¯·æ±‚å¤±è´¥ï¼Œå®ƒä¼šè‡ªåŠ¨å›æ»šã€‚è¿™ç§å¤æ‚çš„é€»è¾‘å¦‚æœå†™åœ¨ Redux é‡Œï¼Œä¼šè®© Reducer é€»è¾‘å˜å¾—æåº¦è‡ƒè‚¿ã€‚</p>
<hr/>
<h2 data-id="heading-9">å››ã€ é€‰å‹å†³ç­–ï¼šä»€ä¹ˆæ—¶å€™è¯¥ç”¨è°ï¼Ÿ</h2>
<p>ä½œä¸ºæ¶æ„å¸ˆï¼Œä½ éœ€è¦ç»™å›¢é˜Ÿåˆ’æ¸…ç•Œé™ï¼š</p>



































<table><thead><tr><th>çŠ¶æ€ç±»å‹</th><th>å…¸å‹ä¾‹å­</th><th>æ¨èå·¥å…·</th><th>å­˜å‚¨ä½ç½®</th></tr></thead><tbody><tr><td><strong>API æ•°æ®</strong></td><td>å•†å“åˆ—è¡¨ã€ç”¨æˆ·ä¿¡æ¯</td><td><strong>TanStack Query</strong></td><td>ä¸“ç”¨ Cache æ± </td></tr><tr><td><strong>å…¨å±€ UI çŠ¶æ€</strong></td><td>ç™»å½• Tokenã€å…¨å±€ä¸»é¢˜</td><td><strong>Zustand / Pinia</strong></td><td>å…¨å±€ Store</td></tr><tr><td><strong>å±€éƒ¨ UI çŠ¶æ€</strong></td><td>æŸä¸ªå¼¹çª—çš„å¼€å…³</td><td><strong>useState</strong></td><td>ç»„ä»¶å†…éƒ¨</td></tr><tr><td><strong>å¤æ‚è¡¨å•</strong></td><td>å¤šæ­¥éª¤æ³¨å†Œè¡¨å•</td><td><strong>React Hook Form</strong></td><td>ä¸“ç”¨ Form State</td></tr></tbody></table>
<p>å¯¼å‡ºåˆ° Google è¡¨æ ¼</p>
<hr/>
<h2 data-id="heading-10">äº”ã€ æ€»ç»“ï¼šè®© Redux å˜â€œç˜¦â€</h2>
<p>é€šè¿‡æŠŠ API é€»è¾‘å‰¥ç¦»å‡ºå»ï¼Œä½ ä¼šå‘ç°ä½ çš„ Reduxï¼ˆæˆ–è€… Zustandï¼‰Store ç¬é—´ç¼©æ°´äº† <strong>80%</strong> ã€‚ å‰©ä¸‹çš„ä»£ç å˜å¾—æå…¶çº¯ç²¹ï¼šåªæœ‰çº¯åŒæ­¥çš„ UI é€»è¾‘ã€‚</p>
<p>è¿™ç§**â€œåˆ†æ²»â€**å¸¦æ¥çš„å¥½å¤„æ˜¯å·¨å¤§çš„ï¼š</p>
<ol>
<li><strong>å¿ƒæ™ºè´Ÿæ‹…é™ä½ï¼š</strong> ä½ ä¸å†éœ€è¦ç®¡ç†å¤æ‚çš„ <code>loading</code> çŠ¶æ€æœºã€‚</li>
<li><strong>æ€§èƒ½æå‡ï¼š</strong> TanStack Query çš„ç»†ç²’åº¦ç¼“å­˜æ¯” Redux çš„å…¨é‡å¯¹æ¯”å¿«å¾—å¤šã€‚</li>
<li><strong>å¼€å‘æ•ˆç‡ï¼š</strong> å›¢é˜Ÿæˆå‘˜å¯ä»¥æ›´ä¸“æ³¨åœ°ç¼–å†™ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯åœ¨æ ·æ¿ä»£ç ä¸­æŒ£æ‰ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-11">ç»“è¯­ï¼šæ§åˆ¶çš„è‰ºæœ¯</h2>
<p>æˆ‘ä»¬å·²ç»æˆåŠŸåœ°å°† API æ•°æ®å’Œ UI çŠ¶æ€åˆ†å¼€äº†ã€‚ ä½†è¿˜æœ‰ä¸€ç§çŠ¶æ€æœ€è®©æ¶æ„å¸ˆå¤´ç–¼ï¼š<strong>æµç¨‹çŠ¶æ€</strong>ã€‚ å½“ä½ çš„ä¸šåŠ¡é€»è¾‘åŒ…å«â€œå¾…æ”¯ä»˜ -&gt; æ”¯ä»˜ä¸­ -&gt; æ”¯ä»˜æˆåŠŸ/å¤±è´¥ -&gt; ç”³è¯·é€€æ¬¾ -&gt; å·²å…³é—­â€è¿™ç§å¤æ‚çš„é“¾è·¯æ—¶ï¼Œæ— è®ºä½ ç”¨ä»€ä¹ˆå·¥å…·ï¼Œä»£ç é‡Œéƒ½ä¼šå……æ»¡ <code>if/else</code>ã€‚</p>
<p>è¿™ç§é€»è¾‘è¯¥å¦‚ä½•ä¼˜é›…åœ°ç®¡ç†ï¼Ÿ</p>
<blockquote>
<p><strong>Next Step:</strong> ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†å¼•å…¥ä¸€ä¸ªåœ¨èˆªå¤©å’Œæ¸¸æˆé¢†åŸŸåº”ç”¨äº†å‡ åå¹´çš„æ•°å­¦æ¨¡å‹ã€‚ æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ç”¨â€œå›¾â€çš„æ€æƒ³ï¼Œç»ˆç»“ä»£ç é‡Œçš„é€»è¾‘ä¹±éº»ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†å¸ƒå¼ä¸€è‡´æ€§ï¼ˆä¸‰ï¼‰ï¼šå…±è¯†çš„é»æ˜â€”â€”Quorum æœºåˆ¶ä¸ Basic Paxos]]></title>    <link>https://juejin.cn/post/7603673564909420579</link>    <guid>https://juejin.cn/post/7603673564909420579</guid>    <pubDate>2026-02-08T15:22:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603673564909420579" data-draft-id="7603671627004231720" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†å¸ƒå¼ä¸€è‡´æ€§ï¼ˆä¸‰ï¼‰ï¼šå…±è¯†çš„é»æ˜â€”â€”Quorum æœºåˆ¶ä¸ Basic Paxos"/> <meta itemprop="keywords" content="åˆ†å¸ƒå¼,åç«¯,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-02-08T15:22:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹¥æ°´ä¸å¦‚è¿œæ–¹"/> <meta itemprop="url" content="https://juejin.cn/user/1239904847665709"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†å¸ƒå¼ä¸€è‡´æ€§ï¼ˆä¸‰ï¼‰ï¼šå…±è¯†çš„é»æ˜â€”â€”Quorum æœºåˆ¶ä¸ Basic Paxos
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904847665709/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹¥æ°´ä¸å¦‚è¿œæ–¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T15:22:53.000Z" title="Sun Feb 08 2026 15:22:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬è§è¯äº†åŸå­æäº¤åè®®çš„æŒ«è´¥ï¼š2PC è´¥åœ¨åŒæ­¥é˜»å¡ä¸å•ç‚¹æ•…éšœï¼Œ3PC è¯•å›¾ç”¨è¶…æ—¶è‡ªå†³æ¥æ‰“è¡¥ä¸ï¼Œå´åœ¨ç½‘ç»œåˆ†åŒºé¢å‰åˆ¶é€ äº†æ›´ä¸¥é‡çš„è„‘è£‚ã€‚</p>
<p>å®ƒä»¬å¤±è´¥çš„æ ¹å› æ˜¯<strong>å…¨å‘˜æ¨¡å‹</strong>â€”â€”è¦æ±‚æ‰€æœ‰èŠ‚ç‚¹éƒ½å‚ä¸ä¸”éƒ½å­˜æ´»ã€‚åªè¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹å¤±è”ï¼Œç³»ç»Ÿè¦ä¹ˆé˜»å¡ï¼Œè¦ä¹ˆåˆ†è£‚ã€‚</p>
<p>åœ¨ç¬¬äºŒç¯‡æœ«å°¾ï¼Œæˆ‘ä»¬æå‡ºäº†ç ´å±€æ€è·¯ï¼š<strong>æ”¾å¼ƒå…¨å‘˜ï¼Œæ‹¥æŠ±å¤šæ•°æ´¾</strong>ã€‚ä¸šåŠ¡å±‚çš„åŸå­æäº¤æ”¹ä¸æ‰ï¼Œä½†å¯ä»¥ç”¨ä¸€ç»„æœºå™¨ç»„æˆé«˜å¯ç”¨é›†ç¾¤æ¥æ›¿ä»£è„†å¼±çš„å•ç‚¹ç»„ä»¶ï¼Œé›†ç¾¤å†…éƒ¨é€šè¿‡å¤šæ•°æ´¾æœºåˆ¶åŒæ­¥çŠ¶æ€ï¼Œåªè¦åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹å­˜æ´»ï¼Œè¯¥ç»„ä»¶å°±ä¸ä¼šæŒ‚ã€‚</p>
<p>ä½†"å¤šæ•°æ´¾"å¹¶ä¸æ˜¯ä¸€å¥å£å·ï¼Œå®ƒæ˜¯ä¸€ä¸ªéœ€è¦ä¸¥æ ¼è¯æ˜çš„æ•°å­¦æ€§è´¨ï¼Œä¹Ÿæ˜¯ä¸€å¥—éœ€è¦ç²¾å¯†è®¾è®¡çš„å·¥ç¨‹åè®®ã€‚</p>
<p>æœ¬ç¯‡ï¼Œæˆ‘ä»¬å°†ä»å¤šæ•°æ´¾çš„æ•°å­¦åŸºç¡€å‡ºå‘ï¼Œä¸€æ­¥æ­¥æ¨æ¼”å‡ºåˆ†å¸ƒå¼å…±è¯†é¢†åŸŸæœ€ç»å…¸çš„ç®—æ³•â€”â€”<strong>Basic Paxos</strong>ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ€æƒ³é£è·ƒï¼šä»"å…¨å‘˜"åˆ°"å¤šæ•°æ´¾"</h2>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆå¤šæ•°æ´¾ä¸ä¼šè„‘è£‚ï¼Ÿ</h3>
<p>ä¸Šä¸€ç¯‡æåˆ°ï¼Œ3PC çš„è„‘è£‚æ ¹æºåœ¨äºï¼šç½‘ç»œåˆ†åŒºåï¼Œä¸¤ä¸ªå­ç½‘ç»œå„è‡ªç‹¬ç«‹åšå†³ç­–ï¼Œäº§ç”Ÿäº†å†²çªçš„ç»“æœã€‚</p>
<p>å¤šæ•°æ´¾æœºåˆ¶çš„æ ¸å¿ƒä¿è¯æ˜¯ï¼š<strong>åœ¨ä¸€ä¸ª N èŠ‚ç‚¹çš„ç³»ç»Ÿä¸­ï¼Œä»»ä½•ä¸¤ä¸ªå¤šæ•°æ´¾é›†åˆå¿…ç„¶å­˜åœ¨äº¤é›†</strong>ã€‚</p>
<p>è¿™å¬èµ·æ¥å¾ˆç›´è§‰ï¼Œä½†è®©æˆ‘ä»¬ç”¨æ•°å­¦è¯­è¨€ä¸¥æ ¼è¡¨è¿°ã€‚</p>
<h3 data-id="heading-3">é›†åˆäº¤é›†å®šå¾‹ï¼ˆIntersection Propertyï¼‰</h3>
<p>å‡è®¾ç³»ç»Ÿæœ‰ N ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å®šä¹‰å¤šæ•°æ´¾ä¸ºä»»æ„ä¸€ä¸ªåŒ…å«è¶…è¿‡ N/2 ä¸ªèŠ‚ç‚¹çš„å­é›†ã€‚</p>
<p><strong>å®šç†</strong>ï¼šä»»æ„ä¸¤ä¸ªå¤šæ•°æ´¾é›†åˆ Qâ‚ å’Œ Qâ‚‚ï¼Œå¿…ç„¶æ»¡è¶³ Qâ‚ âˆ© Qâ‚‚ â‰  âˆ…ã€‚</p>
<p><strong>è¯æ˜</strong>ï¼šåè¯æ³•ã€‚å‡è®¾ Qâ‚ âˆ© Qâ‚‚ = âˆ…ï¼Œå³ä¸¤ä¸ªé›†åˆæ²¡æœ‰å…¬å…±å…ƒç´ ï¼Œé‚£ä¹ˆ |Qâ‚| + |Qâ‚‚| â‰¤ Nã€‚ä½†æ ¹æ®å¤šæ•°æ´¾å®šä¹‰ï¼Œ|Qâ‚| &gt; N/2 ä¸” |Qâ‚‚| &gt; N/2ï¼Œå› æ­¤ |Qâ‚| + |Qâ‚‚| &gt; Nã€‚çŸ›ç›¾ã€‚è¯æ¯•ã€‚</p>
<p>ä»¥ 5 èŠ‚ç‚¹ç³»ç»Ÿä¸ºä¾‹ï¼Œå¤šæ•°æ´¾è‡³å°‘éœ€è¦ 3 ä¸ªèŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Q1 [å¤šæ•°æ´¾ Qâ‚]
        A[èŠ‚ç‚¹A]
        B[èŠ‚ç‚¹B]
        C[èŠ‚ç‚¹C]
    end
    
    subgraph Q2 [å¤šæ•°æ´¾ Qâ‚‚]
        C2[èŠ‚ç‚¹C]
        D[èŠ‚ç‚¹D]
        E[èŠ‚ç‚¹E]
    end
    
    C --- C2

    style A fill:#4ecdc4
    style B fill:#4ecdc4
    style C fill:#ff6b6b
    style C2 fill:#ff6b6b
    style D fill:#ffe66d
    style E fill:#ffe66d
    
    style Q1 fill:#fdfdfd,stroke:#ddd,stroke-dasharray: 5 5
    style Q2 fill:#fdfdfd,stroke:#ddd,stroke-dasharray: 5 5
</code></pre>
<p>æ— è®ºä½ æ€ä¹ˆæŒ‘ï¼Œä»»æ„ä¸¤ç»„ 3 èŠ‚ç‚¹çš„é›†åˆè‡³å°‘å…±äº« 1 ä¸ªèŠ‚ç‚¹ï¼ˆä¸Šå›¾ä¸­çš„èŠ‚ç‚¹ Cï¼‰ã€‚è¿™ä¸ªå…±äº«èŠ‚ç‚¹å°±æ˜¯<strong>ä¿¡æ¯çš„æ¡¥æ¢</strong>â€”â€”å®ƒåŒæ—¶å‚ä¸ä¸¤æ¬¡å†³ç­–ï¼Œå°±èƒ½æŠŠç¬¬ä¸€æ¬¡çš„ç»“æœä¼ é€’ç»™ç¬¬äºŒæ¬¡ã€‚</p>
<h3 data-id="heading-4">Quorum NWR æ¨¡å‹</h3>
<p>é›†åˆäº¤é›†å®šå¾‹åœ¨å·¥ç¨‹ä¸­çš„ç»å…¸åº”ç”¨å°±æ˜¯ <strong>Quorum NWR æ¨¡å‹</strong>ã€‚å‡è®¾ä¸€ä¸ªæ•°æ®æœ‰ N ä¸ªå‰¯æœ¬ï¼š</p>
<ul>
<li><strong>Wï¼ˆWrite Quorumï¼‰</strong>ï¼šå†™å…¥æ—¶éœ€è¦ç¡®è®¤çš„å‰¯æœ¬æ•°</li>
<li><strong>Rï¼ˆRead Quorumï¼‰</strong>ï¼šè¯»å–æ—¶éœ€è¦æŸ¥è¯¢çš„å‰¯æœ¬æ•°</li>
</ul>
<p>åªè¦æ»¡è¶³ <strong>W + R &gt; N</strong>ï¼Œè¯»å†™é›†åˆå°±å¿…ç„¶å­˜åœ¨äº¤é›†ï¼Œè¯»æ“ä½œä¸€å®šèƒ½çœ‹åˆ°æœ€æ–°å†™å…¥çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph ç³»ç»Ÿ["5 å‰¯æœ¬ç³»ç»Ÿ (N=5)"]
        subgraph WQ ["å†™å…¥é›†åˆ W=3"]
            N1["å‰¯æœ¬1 âœï¸"]
            N2["å‰¯æœ¬2 âœï¸"]
            N3["å‰¯æœ¬3 âœï¸ğŸ”"]
        end
        subgraph RQ ["è¯»å–é›†åˆ R=3"]
            N3b["å‰¯æœ¬3 âœï¸ğŸ”"]
            N4["å‰¯æœ¬4 ğŸ”"]
            N5["å‰¯æœ¬5 ğŸ”"]
        end
    end
    
    N3 -.-|"äº¤é›†ï¼šæºå¸¦æœ€æ–°æ•°æ®"| N3b

    style N1 fill:#4ecdc4
    style N2 fill:#4ecdc4
    style N3 fill:#ff6b6b
    style N3b fill:#ff6b6b
    style N4 fill:#ffe66d
    style N5 fill:#ffe66d
    style WQ fill:#fdfdfd,stroke:#ddd,stroke-dasharray: 5 5
    style RQ fill:#fdfdfd,stroke:#ddd,stroke-dasharray: 5 5
    style ç³»ç»Ÿ fill:#fdfdfd,stroke:#ddd,stroke-dasharray: 5 5
</code></pre>
<p>å‡ ç§å…¸å‹çš„ NWR é…ç½®ï¼š</p>

































<table><thead><tr><th>é…ç½®</th><th>W</th><th>R</th><th>ç‰¹ç‚¹</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>å¼ºä¸€è‡´è¯»å†™</td><td>3</td><td>3</td><td>è¯»å†™éƒ½èµ°å¤šæ•°æ´¾ï¼Œå¼ºä¸€è‡´</td><td>é…ç½®ä¸­å¿ƒã€åˆ†å¸ƒå¼é”</td></tr><tr><td>è¯»ä¼˜åŒ–</td><td>3</td><td>1</td><td>å†™æ…¢è¯»å¿«ï¼Œä½†è¯»åªè®¿é—®ä¸€ä¸ªèŠ‚ç‚¹æ— æ³•ä¿è¯ä¸€è‡´</td><td>è¯»å¤šå†™å°‘ï¼ˆéœ€é…åˆç‰ˆæœ¬å·ï¼‰</td></tr><tr><td>å†™ä¼˜åŒ–</td><td>1</td><td>5</td><td>å†™å¿«è¯»æ…¢ï¼Œè¯»æ—¶å¿…é¡»æŸ¥å…¨é‡æ‰èƒ½ä¿è¯çœ‹åˆ°æœ€æ–°å€¼</td><td>æ—¥å¿—å†™å…¥ã€æ¶ˆæ¯é˜Ÿåˆ—</td></tr></tbody></table>
<h3 data-id="heading-5">ä» Quorum åˆ°å…±è¯†çš„è·ç¦»</h3>
<p>Quorum NWR è§£å†³äº†"è¯»åˆ°æœ€æ–°æ•°æ®"çš„é—®é¢˜ï¼Œä½†è¿˜ä¸å¤Ÿã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªæ›´æ£˜æ‰‹çš„é—®é¢˜æ˜¯ï¼š</p>
<blockquote>
<p><strong>å¦‚æœä¸¤ä¸ªå®¢æˆ·ç«¯åŒæ—¶å‘å¤šæ•°æ´¾å‘èµ·å†™å…¥ï¼Œä¸€ä¸ªè¦å†™ X=1ï¼Œå¦ä¸€ä¸ªè¦å†™ X=2ï¼Œæœ€ç»ˆç³»ç»Ÿè¯¥å–è°çš„å€¼ï¼Ÿ</strong></p>
</blockquote>
<p>Quorum æ¨¡å‹æœ¬èº«æ²¡æœ‰å›ç­”è¿™ä¸ªé—®é¢˜ã€‚å®ƒåªä¿è¯"è¯»å†™æœ‰äº¤é›†"ï¼Œä½†ä¸ä¿è¯"å†™å†™ä¹‹é—´çš„é¡ºåº"ã€‚</p>
<p>è¦è§£å†³å†™å†²çªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸¥æ ¼çš„<strong>å…±è¯†åè®®</strong>â€”â€”è®©æ‰€æœ‰èŠ‚ç‚¹å°±"é€‰æ‹©å“ªä¸ªå€¼"è¾¾æˆä¸€è‡´ã€‚</p>
<p>è¿™å°±æ˜¯ Paxos ç™»åœºçš„åŸå› ã€‚</p>
<h2 data-id="heading-6">äºŒã€Basic Paxosï¼šåœ¨æ··ä¹±ä¸­è¾¾æˆå…±è¯†</h2>
<h3 data-id="heading-7">é—®é¢˜å®šä¹‰</h3>
<p>Paxos è¦è§£å†³çš„é—®é¢˜å¯ä»¥ç²¾ç‚¼ä¸ºä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>å¤šä¸ªèŠ‚ç‚¹å„è‡ªæå‡ºä¸€ä¸ªå€¼ï¼ˆProposeï¼‰ï¼Œæ‰€æœ‰èŠ‚ç‚¹æœ€ç»ˆå°±åŒä¸€ä¸ªå€¼è¾¾æˆä¸€è‡´ï¼ˆConsensusï¼‰ã€‚</strong></p>
</blockquote>
<p>è¿™ä¸ª"ä¸€è‡´"éœ€è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li><strong>åªæœ‰è¢«æå‡ºçš„å€¼æ‰èƒ½è¢«é€‰å®š</strong>ï¼ˆä¸ä¼šå‡­ç©ºå†’å‡ºä¸€ä¸ªå€¼ï¼‰</li>
<li><strong>åªæœ‰ä¸€ä¸ªå€¼ä¼šè¢«é€‰å®š</strong>ï¼ˆä¸ä¼šå‡ºç°ä¸¤ä¸ªç»“æœï¼‰</li>
<li><strong>å€¼ä¸€æ—¦è¢«é€‰å®šï¼Œå°±ä¸ä¼šæ”¹å˜</strong>ï¼ˆå†³å®šä¸å¯æ’¤å›ï¼‰</li>
</ol>
<h3 data-id="heading-8">è§’è‰²å®šä¹‰</h3>
<p>Paxos ä¸­æœ‰ä¸‰ç§è§’è‰²ï¼š</p>
<ul>
<li><strong>æè®®è€…ï¼ˆProposerï¼‰</strong>ï¼šå‘èµ·ææ¡ˆï¼Œè¯•å›¾è®©è‡ªå·±çš„å€¼è¢«é€‰å®šã€‚å¯ä»¥ç±»æ¯”ä¸º"ææ¡ˆçš„å‘èµ·äºº"ã€‚</li>
<li><strong>æ¥å—è€…ï¼ˆAcceptorï¼‰</strong>ï¼šå¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨ã€‚å¤šæ•°æ´¾ Acceptor æ¥å—åŒä¸€ä¸ªææ¡ˆï¼Œè¯¥ææ¡ˆå°±è¢«é€‰å®šã€‚</li>
<li><strong>å­¦ä¹ è€…ï¼ˆLearnerï¼‰</strong>ï¼šä¸å‚ä¸æŠ•ç¥¨ï¼Œåªæ˜¯è¢«åŠ¨è·çŸ¥æœ€ç»ˆç»“æœã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡å®é™…ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªç‰©ç†èŠ‚ç‚¹é€šå¸¸åŒæ—¶æ‰®æ¼”å¤šä¸ªè§’è‰²ã€‚æ¯”å¦‚åœ¨ä¸€ä¸ª 5 èŠ‚ç‚¹é›†ç¾¤ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ—¢æ˜¯ Proposer ä¹Ÿæ˜¯ Acceptorã€‚</p>
</blockquote>
<h3 data-id="heading-9">ä»æœ´ç´ æ–¹æ¡ˆåˆ° Paxos</h3>
<p>æˆ‘ä»¬ä¸ç›´æ¥ç»™å‡º Paxos çš„åè®®ï¼Œè€Œæ˜¯ä»ä¸€ä¸ªæœ€æœ´ç´ çš„æƒ³æ³•å‡ºå‘ï¼Œçœ‹çœ‹ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œç„¶åä¸€æ­¥æ­¥ä¿®æ­£ï¼Œæœ€ç»ˆ"æ¨å¯¼"å‡º Paxosã€‚</p>
<h4 data-id="heading-10">å°è¯•ä¸€ï¼šåªæœ‰ä¸€ä¸ª Acceptor</h4>
<p>æœ€ç®€å•çš„æ–¹æ¡ˆï¼šåªç”¨ä¸€ä¸ª Acceptorï¼Œè°å…ˆåˆ°å°±é€‰è°ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">---
config:
  theme: forest
  look: neo
---
sequenceDiagram
    participant PA as Proposer A
    participant Acc as å”¯ä¸€ Acceptor
    participant PB as Proposer B
    
    PA-&gt;&gt;Acc: ææ¡ˆ: X=1
    Note over Acc: æ¥å— X=1 âœ…
    PB-&gt;&gt;Acc: ææ¡ˆ: X=2
    Note over Acc: å·²æœ‰å€¼ï¼Œæ‹’ç» âŒ
</code></pre>
<p>é—®é¢˜æ˜¾è€Œæ˜“è§ï¼š<strong>å•ç‚¹æ•…éšœ</strong>ã€‚è¿™ä¸ªå”¯ä¸€çš„ Acceptor ä¸€æ—¦å®•æœºï¼Œæ•´ä¸ªç³»ç»Ÿåœæ‘†ã€‚å’Œ 2PC çš„åè°ƒè€…ä¸€æ ·çš„è€é—®é¢˜ã€‚</p>
<h4 data-id="heading-11">å°è¯•äºŒï¼šå¤šä¸ª Acceptorï¼Œå€¼ç›´æ¥å†™å…¥</h4>
<p>ç”¨å¤šä¸ª Acceptorï¼ŒProposer å°†ææ¡ˆå‘ç»™æ‰€æœ‰ Acceptorï¼Œè·å¾—å¤šæ•°æ´¾æ¥å—å°±ç®—é€‰å®šã€‚</p>
<p>ä½†è€ƒè™‘è¿™ä¸ªåœºæ™¯ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">---
config:
  theme: forest
  look: neo
---
sequenceDiagram
    participant PA as Proposer A
    participant A1 as Acceptor 1
    participant A2 as Acceptor 2
    participant A3 as Acceptor 3
    participant PB as Proposer B

    PA-&gt;&gt;A1: X=1
    PA-&gt;&gt;A2: X=1
    PB-&gt;&gt;A2: X=2
    PB-&gt;&gt;A3: X=2
    
    Note over A1: æ¥å— X=1
    Note over A2: å…ˆæ”¶åˆ° X=1ï¼Ÿ&lt;br/&gt;è¿˜æ˜¯å…ˆæ”¶åˆ° X=2ï¼Ÿ
    Note over A3: æ¥å— X=2
</code></pre>
<p>Acceptor 2 åŒæ—¶æ”¶åˆ°ä¸¤ä¸ªææ¡ˆï¼Œå®ƒè¯¥æ¥å—å“ªä¸ªï¼Ÿå¦‚æœå®ƒæ¥å—äº† X=1ï¼Œé‚£ Aï¼ˆå¤šæ•°æ´¾ {1,2}ï¼‰èƒœå‡ºï¼›å¦‚æœæ¥å—äº† X=2ï¼Œé‚£ Bï¼ˆå¤šæ•°æ´¾ {2,3}ï¼‰èƒœå‡ºã€‚</p>
<p>æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æœç½‘ç»œå»¶è¿Ÿå¯¼è‡´ A1 æ¥å—äº† X=1ï¼ŒA3 æ¥å—äº† X=2ï¼ŒA2 ä¸¤ä¸ªéƒ½æ”¶åˆ°äº†â€”â€”<strong>æˆ‘ä»¬æ²¡æœ‰ä»»ä½•æœºåˆ¶æ¥ä»²è£è°å…ˆè°å</strong>ã€‚</p>
<p>é—®é¢˜å‡ºåœ¨å“ªï¼Ÿ<strong>æ²¡æœ‰å…¨å±€æ’åº</strong>ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹å¼æ¥åŒºåˆ†ææ¡ˆçš„"å…ˆå"æˆ–"ä¼˜å…ˆçº§"ã€‚</p>
<h4 data-id="heading-12">å°è¯•ä¸‰ï¼šç»™ææ¡ˆç¼–å·</h4>
<p>è¿™æ˜¯ Paxos æœ€å…³é”®çš„æ´å¯Ÿï¼š<strong>ç»™æ¯ä¸ªææ¡ˆåˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€ä¸”é€’å¢çš„ç¼–å·ï¼ˆProposal Numberï¼‰</strong>ã€‚</p>
<p>ç¼–å·å¤§çš„ææ¡ˆä¼˜å…ˆçº§æ›´é«˜ã€‚å¦‚æœ Acceptor å·²ç»è§è¿‡ç¼–å·æ›´å¤§çš„ææ¡ˆï¼Œå°±æ‹’ç»ç¼–å·æ›´å°çš„ã€‚</p>
<p>ä½†å…‰æœ‰ç¼–å·è¿˜ä¸å¤Ÿã€‚è€ƒè™‘ä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li>Proposer A ç”¨ç¼–å· 1 å‘èµ·ææ¡ˆ X=1ï¼Œè·å¾—å¤šæ•°æ´¾ {A1, A2} æ¥å—ï¼Œ<strong>å€¼å·²ç»è¢«é€‰å®š</strong>ã€‚</li>
<li>Proposer B ç”¨ç¼–å· 2 å‘èµ·ææ¡ˆ X=2ï¼Œå› ä¸ºç¼–å·æ›´å¤§ï¼Œå¦‚æœ Acceptor ç›´æ¥æ¥å—ï¼Œå°±ä¼šè¦†ç›–å·²é€‰å®šçš„å€¼ã€‚</li>
</ol>
<p>è¿™è¿åäº†æˆ‘ä»¬çš„ç¬¬ä¸‰æ¡è¦æ±‚ï¼š"å€¼ä¸€æ—¦è¢«é€‰å®šï¼Œå°±ä¸ä¼šæ”¹å˜"ã€‚</p>
<p><strong>æ ¸å¿ƒçŸ›ç›¾ï¼šæ–°ææ¡ˆçš„ç¼–å·æ›´å¤§ï¼Œä½†å®ƒä¸èƒ½è¦†ç›–å·²ç»è¢«é€‰å®šçš„å€¼ã€‚</strong></p>
<p>Paxos çš„å¤©æ‰ä¹‹å¤„åœ¨äºï¼šç”¨<strong>ä¸¤é˜¶æ®µåè®®</strong>è§£å†³è¿™ä¸ªçŸ›ç›¾ã€‚</p>
<h3 data-id="heading-13">Paxos ä¸¤é˜¶æ®µåè®®</h3>
<h4 data-id="heading-14">é˜¶æ®µä¸€ï¼šPrepareï¼ˆæŠ¢å ææ¡ˆæƒï¼‰</h4>
<pre><code class="hljs language-text" lang="text">Proposer                       Acceptors
   â”‚                              â”‚
   â”‚â”€â”€â”€â”€ Prepare(n) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚  "æˆ‘è¦ç”¨ç¼–å· n å‘èµ·ææ¡ˆï¼Œè¡Œä¸è¡Œï¼Ÿ"
   â”‚                              â”‚
   â”‚&lt;â”€â”€â”€ Promise(n) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  "è¡Œï¼Œæˆ‘æ‰¿è¯ºä¸å†æ¥å—ç¼–å·æ¯” n å°çš„ææ¡ˆ"
   â”‚     + (acceptedN, acceptedV) â”‚  "å¦å¤–ï¼Œæˆ‘æœ‰ä¸€ä»½ä¹‹å‰æ¥å—çš„ææ¡ˆï¼Œä¸€èµ·ç»™ä½ "
</code></pre>
<p>å…·ä½“è§„åˆ™ï¼š</p>
<ol>
<li>Proposer ç”Ÿæˆä¸€ä¸ªå…¨å±€é€’å¢çš„ææ¡ˆç¼–å· nï¼Œå‘<strong>æ‰€æœ‰</strong> Acceptor å¹¿æ’­ <code>Prepare(n)</code>ã€‚</li>
<li>Acceptor æ£€æŸ¥ç¼–å· nï¼šæ¯”è‡ªå·±è§è¿‡çš„éƒ½å¤§ â†’ åšå‡ºæ‰¿è¯ºï¼Œå¹¶é™„å¸¦è‡ªå·±<strong>å·²æ¥å—çš„ææ¡ˆç¼–å·å’Œå€¼</strong> <code>(acceptedN, acceptedV)</code>ï¼ˆæ²¡æ¥å—è¿‡å°±ä¸å¸¦ï¼‰ï¼›å¦åˆ™ç›´æ¥æ‹’ç»ã€‚</li>
<li>Proposer åªéœ€ç­‰åˆ°<strong>å¤šæ•°æ´¾</strong>å›å¤ Promiseï¼Œå³å¯è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚</li>
</ol>
<h4 data-id="heading-15">é˜¶æ®µäºŒï¼šAcceptï¼ˆå€¼çš„è½åœ°ï¼‰</h4>
<pre><code class="hljs language-arduino" lang="arduino">Proposer                       Acceptors
   â”‚                              â”‚
   â”‚ ç¡®å®šå€¼ v                      â”‚
   â”‚â”€â”€â”€â”€ <span class="hljs-built_in">Accept</span>(n, v) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚  <span class="hljs-string">"è¯·æ¥å—ææ¡ˆ(n, v)"</span>
   â”‚                              â”‚
   â”‚&lt;â”€â”€â”€ Accepted / Rejected â”€â”€â”€â”€â”€â”‚  <span class="hljs-string">"æ”¶åˆ°ï¼"</span> æˆ– <span class="hljs-string">"ä¸è¡Œï¼Œæˆ‘å·²ç»æ‰¿è¯ºäº†æ›´å¤§çš„ç¼–å·"</span>
   â”‚                              â”‚
   â””â”€â”€â”€â”€&gt; Learners â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;  é€šçŸ¥å­¦ä¹ è€…ç»“æœ
</code></pre>
<p><strong>å€¼ v æ€ä¹ˆå®šï¼Ÿ</strong> è¿™æ˜¯ Paxos æœ€å…³é”®çš„çº¦æŸï¼Œå¦‚æœå¤šæ•°æ´¾çš„ Promise å“åº”ä¸­ï¼š</p>
<ol>
<li><strong>æ²¡æœ‰ä»»ä½•å¸¦å›å·²æ¥å—çš„ææ¡ˆ</strong> â†’ Proposer å¯ä»¥è‡ªç”±ä½¿ç”¨è‡ªå·±æƒ³æçš„å€¼ã€‚</li>
<li><strong>æœ‰å¸¦å›äº†å·²æ¥å—çš„ææ¡ˆ</strong> â†’ ä¸åŒ Acceptor å¯èƒ½åœ¨ä¸åŒæ—¶é—´æ¥å—è¿‡ä¸åŒ Proposer çš„ææ¡ˆï¼Œè¿”å›çš„ <code>(acceptedN, acceptedV)</code> å„ä¸ç›¸åŒã€‚Proposer <strong>å¿…é¡»é€‰ acceptedN æœ€å¤§çš„é‚£ä¸ªå¯¹åº”çš„å€¼</strong>ã€‚ç†ç”±ï¼šç¼–å·è¶Šå¤§è¯´æ˜ææ¡ˆè¶Šæ™šå‘èµ·ï¼Œå®ƒçš„å€¼è¶Šå¯èƒ½å·²ç»è¢«å¤šæ•°æ´¾æ¥å—ï¼Œç»§æ‰¿å®ƒæ‰ä¸ä¼šè¦†ç›–å·²æœ‰çš„å…±è¯†ã€‚</li>
</ol>
<p>ç¡®å®š v åï¼š</p>
<ol>
<li>
<p>å‘å‡º <code>Accept(n, v)</code>â€”â€”<strong>n æ˜¯è‡ªå·±çš„ç¼–å·ï¼Œv å¯èƒ½æ˜¯åˆ«äººçš„å€¼</strong>ã€‚</p>
</li>
<li>
<p>Acceptor æ”¶åˆ°åï¼šè‡ªå·±æ²¡æ‰¿è¯ºè¿‡æ›´å¤§çš„ç¼–å· â†’ æ¥å—ï¼›å¦åˆ™ â†’ æ‹’ç»ã€‚</p>
</li>
<li>
<p>å¤šæ•°æ´¾æ¥å— â†’ <strong>å…±è¯†è¾¾æˆï¼Œå€¼ v è¢«é€‰å®šã€‚</strong></p>
</li>
</ol>
<p>å®Œæ•´æµç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">---
config:
  theme: forest
  look: neo
---
sequenceDiagram
    autonumber
    participant P as Proposer
    participant A1 as Acceptor 1
    participant A2 as Acceptor 2
    participant A3 as Acceptor 3

    rect rgb(240, 248, 255)
    Note over P,A3: é˜¶æ®µä¸€ï¼šPrepareï¼ˆæŠ¢å ææ¡ˆæƒï¼‰
    P-&gt;&gt;A1: Prepare(n=1)
    P-&gt;&gt;A2: Prepare(n=1)
    P-&gt;&gt;A3: Prepare(n=1)
    A1--&gt;&gt;P: Promise(æ— å·²æ¥å—ææ¡ˆ)
    A2--&gt;&gt;P: Promise(æ— å·²æ¥å—ææ¡ˆ)
    A3--&gt;&gt;P: Promise(æ— å·²æ¥å—ææ¡ˆ)
    end

    Note over P: æ”¶åˆ°å¤šæ•°æ´¾å“åº”&lt;br/&gt;æ— å·²æ¥å—ææ¡ˆ&lt;br/&gt;è‡ªç”±é€‰å€¼ v="X"

    rect rgb(240, 255, 240)
    Note over P,A3: é˜¶æ®µäºŒï¼šAcceptï¼ˆå€¼çš„è½åœ°ï¼‰
    P-&gt;&gt;A1: Accept(n=1, v="X")
    P-&gt;&gt;A2: Accept(n=1, v="X")
    P-&gt;&gt;A3: Accept(n=1, v="X")
    A1--&gt;&gt;P: Accepted âœ…
    A2--&gt;&gt;P: Accepted âœ…
    A3--&gt;&gt;P: Accepted âœ…
    end

    Note over P,A3: å¤šæ•°æ´¾æ¥å— â†’ å€¼ "X" è¢«é€‰å®š ğŸ‰
</code></pre>
<h3 data-id="heading-16">æ ¸å¿ƒé—®é¢˜ï¼šä¸ºä»€ä¹ˆæ–° Proposer èƒ½"çœ‹è§"æ—§å€¼ï¼Ÿ</h3>
<p>è¿™æ˜¯ç†è§£ Paxos çš„å…³é”®ã€‚è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªå…·ä½“åœºæ™¯æ¥æ¼”ç¤ºï¼š</p>
<p><strong>åœºæ™¯</strong>ï¼šProposer A çš„ææ¡ˆå·²ç»è¢«éƒ¨åˆ†æ¥å—ï¼Œç„¶å Proposer B å‘èµ·äº†æ–°çš„ææ¡ˆã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">---
config:
  theme: forest
  look: neo
---
sequenceDiagram
    autonumber
    participant PA as Proposer A
    participant A1 as Acceptor 1
    participant A2 as Acceptor 2
    participant A3 as Acceptor 3
    participant PB as Proposer B

    Note over PA,A3: Proposer A çš„å›åˆ

    rect rgb(240, 248, 255)
    PA-&gt;&gt;A1: Prepare(n=1)
    PA-&gt;&gt;A2: Prepare(n=1)
    A1--&gt;&gt;PA: Promise âœ…
    A2--&gt;&gt;PA: Promise âœ…
    end

    rect rgb(240, 255, 240)
    PA-&gt;&gt;A1: Accept(1, "X")
    PA-&gt;&gt;A2: Accept(1, "X")
    Note over A1: å·²æ¥å— (1, "X") âœ…
    Note over A2: å·²æ¥å— (1, "X") âœ…
    end

    Note over PA: ğŸ’¥ Proposer A å®•æœº&lt;br/&gt;æœªé€šçŸ¥ A3

    Note over PB,A3: Proposer B çš„å›åˆ

    rect rgb(255, 248, 220)
    PB-&gt;&gt;A2: Prepare(n=2)
    PB-&gt;&gt;A3: Prepare(n=2)
    A2--&gt;&gt;PB: Promise + å·²æ¥å—(1, "X") ğŸ“¢
    A3--&gt;&gt;PB: Promise(æ— å·²æ¥å—ææ¡ˆ)
    end

    Note over PB: å‘ç°å·²æœ‰æ¥å—å€¼ "X"&lt;br/&gt;å¿…é¡»æ²¿ç”¨æ­¤å€¼ï¼

    rect rgb(240, 255, 240)
    PB-&gt;&gt;A2: Accept(2, "X")
    PB-&gt;&gt;A3: Accept(2, "X")
    Note over A2: å·²æ¥å— (2, "X") âœ…
    Note over A3: å·²æ¥å— (2, "X") âœ…
    end

    Note over PB,A3: å¤šæ•°æ´¾ {A2, A3} æ¥å— â†’ "X" è¢«é€‰å®š ğŸ‰
</code></pre>
<p><strong>å…³é”®æ­¥éª¤è§£è¯»</strong>ï¼š</p>
<ol>
<li>Proposer A è®© {A1, A2} æ¥å—äº†å€¼ "X"ï¼ˆå·²æ„æˆå¤šæ•°æ´¾ï¼Œå€¼å…¶å®å·²ç»è¢«é€‰å®šï¼‰ï¼Œä½† A è‡ªå·±å®•æœºäº†ï¼Œæ²¡æ¥å¾—åŠé€šçŸ¥ A3ã€‚</li>
<li>Proposer B å‘èµ· <code>Prepare(n=2)</code>ï¼Œè¯¢é—® {A2, A3}ï¼ˆæ„æˆå¤šæ•°æ´¾ï¼‰ã€‚</li>
<li>A2 å›å¤ï¼š"æˆ‘æ‰¿è¯ºä¸å†æ¥å—ç¼–å· &lt;2 çš„ææ¡ˆï¼Œ<strong>ä½†æˆ‘ä¹‹å‰å·²ç»æ¥å—äº† (1, "X")</strong>"ã€‚</li>
<li>B çœ‹åˆ° A2 è¿”å›äº†å·²æ¥å—å€¼ "X"ï¼Œæ ¹æ® Paxos è§„åˆ™ï¼Œ<strong>å¿…é¡»ä½¿ç”¨ "X" è€Œä¸æ˜¯è‡ªå·±çš„å€¼</strong>ã€‚</li>
<li>B ç”¨ç¼–å· 2 å‘èµ· <code>Accept(2, "X")</code>ï¼Œ"X" ç»§ç»­è¢«ä¼ æ’­ã€‚</li>
</ol>
<p><strong>è¿™å°±æ˜¯é›†åˆäº¤é›†å‘æŒ¥ä½œç”¨çš„åœ°æ–¹</strong>ï¼š</p>
<ul>
<li>A çš„å†™å…¥å¤šæ•°æ´¾æ˜¯ {A1, A2}</li>
<li>B çš„ Prepare å¤šæ•°æ´¾æ˜¯ {A2, A3}</li>
<li>äº¤é›†æ˜¯ {A2}ï¼ŒA2 å°†æ—§å€¼ "X" ä¼ é€’ç»™äº† B</li>
</ul>
<p><strong>æ²¡æœ‰ A2 è¿™ä¸ª"ä¿¡æ¯æ¡¥æ¢"ï¼ŒB å°±ä¸çŸ¥é“ "X" å·²ç»è¢«é€‰å®šï¼Œå¯èƒ½ä¼šå†™å…¥ä¸€ä¸ªä¸åŒçš„å€¼ã€‚</strong> å¤šæ•°æ´¾çš„äº¤é›†ä¿è¯äº†ä»»ä½•æ–°çš„ Proposer éƒ½èƒ½å‘ç°æ—§å€¼ã€‚</p>
<h3 data-id="heading-17">å®‰å…¨æ€§è®ºè¯</h3>
<p>æˆ‘ä»¬æ¥ä¸¥æ ¼è®ºè¯ä¸ºä»€ä¹ˆ Paxos ä¸ä¼šå‡ºç°"ä¸¤ä¸ªä¸åŒçš„å€¼éƒ½è¢«é€‰å®š"çš„æƒ…å†µã€‚</p>
<p><strong>åè¯æ³•</strong>ï¼šå‡è®¾å€¼ vâ‚ è¢«é€‰å®šï¼ˆå¤šæ•°æ´¾ Qâ‚ æ¥å—äº†ææ¡ˆ (nâ‚, vâ‚)ï¼‰ï¼Œä¹‹åå€¼ vâ‚‚ â‰  vâ‚ ä¹Ÿè¢«é€‰å®šï¼ˆå¤šæ•°æ´¾ Qâ‚‚ æ¥å—äº†ææ¡ˆ (nâ‚‚, vâ‚‚)ï¼Œnâ‚‚ &gt; nâ‚ï¼‰ã€‚</p>
<ol>
<li>vâ‚‚ è¢«é€‰å®šï¼Œæ„å‘³ç€ Proposer åœ¨å‘èµ·ææ¡ˆ nâ‚‚ ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œäº† <code>Prepare(nâ‚‚)</code>ï¼Œå¹¶è·å¾—äº†å¤šæ•°æ´¾ Qâ‚ƒ çš„æ‰¿è¯ºã€‚</li>
<li>Qâ‚ âˆ© Qâ‚ƒ â‰  âˆ…ï¼ˆé›†åˆäº¤é›†å®šå¾‹ï¼‰ï¼Œæ‰€ä»¥ Qâ‚ƒ ä¸­è‡³å°‘æœ‰ä¸€ä¸ª Acceptor å·²ç»æ¥å—äº† (nâ‚, vâ‚)ã€‚</li>
<li>è¿™ä¸ª Acceptor åœ¨å›å¤ <code>Prepare(nâ‚‚)</code> æ—¶ï¼Œå¿…ç„¶è¿”å›äº†å®ƒå·²æ¥å—çš„å€¼ vâ‚ï¼ˆæˆ–ç¼–å·æ›´å¤§çš„å…¶ä»–å€¼ï¼‰ã€‚</li>
<li>æ ¹æ® Paxos è§„åˆ™ï¼ŒProposer å¿…é¡»ä½¿ç”¨è¿”å›å€¼ä¸­ç¼–å·æœ€å¤§çš„å€¼ã€‚å¦‚æœè¿™ä¸ªæœ€å¤§ç¼–å·å€¼å¯ä»¥è¿½æº¯å› vâ‚ï¼Œé‚£ä¹ˆ vâ‚‚ = vâ‚ï¼ŒçŸ›ç›¾ã€‚</li>
</ol>
<blockquote>
<p>ä¸¥æ ¼çš„æ•°å­¦å½’çº³è¯æ˜éœ€è¦å¯¹ nâ‚ åˆ° nâ‚‚ ä¹‹é—´æ‰€æœ‰ææ¡ˆç¼–å·åšå½’çº³ï¼Œè¿™é‡Œç»™å‡ºæ ¸å¿ƒç›´è§‰ã€‚</p>
</blockquote>
<h2 data-id="heading-18">ä¸‰ã€æ´»é”ï¼šPaxos çš„è‡´å‘½è½¯è‚‹</h2>
<p>Basic Paxos ä¿è¯äº†<strong>å®‰å…¨æ€§ï¼ˆSafetyï¼‰</strong>â€”â€”æ°¸è¿œä¸ä¼šé€‰å®šä¸¤ä¸ªå†²çªçš„å€¼ã€‚ä½†å®ƒä¸ä¿è¯<strong>æ´»æ€§ï¼ˆLivenessï¼‰</strong>â€”â€”ç³»ç»Ÿæœ‰å¯èƒ½æ°¸è¿œé€‰ä¸å‡ºå€¼ã€‚</p>
<h3 data-id="heading-19">æ´»é”åœºæ™¯</h3>
<p>å½“ä¸¤ä¸ª Proposer äº¤æ›¿æŠ¢å æ—¶ï¼Œå¯èƒ½å‡ºç°"ä½ è¸©æˆ‘ï¼Œæˆ‘è¸©ä½ "çš„æ­»å¾ªç¯ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">---
config:
  theme: forest
  look: neo
---
sequenceDiagram
    participant PA as Proposer A
    participant Acc as Acceptors (å¤šæ•°æ´¾)
    participant PB as Proposer B

    PA-&gt;&gt;Acc: Prepare(n=1)
    Acc--&gt;&gt;PA: Promise(1) âœ…
    
    Note over PB: B ç”¨æ›´å¤§ç¼–å·æŠ¢å 
    PB-&gt;&gt;Acc: Prepare(n=2)
    Acc--&gt;&gt;PB: Promise(2) âœ…
    
    PA-&gt;&gt;Acc: Accept(1, "X")
    Acc--&gt;&gt;PA: æ‹’ç» âŒ (å·²æ‰¿è¯ºn=2)

    Note over PA: A ç”¨æ›´å¤§ç¼–å·åæŠ¢
    PA-&gt;&gt;Acc: Prepare(n=3)
    Acc--&gt;&gt;PA: Promise(3) âœ…
    
    PB-&gt;&gt;Acc: Accept(2, "Y")
    Acc--&gt;&gt;PB: æ‹’ç» âŒ (å·²æ‰¿è¯ºn=3)
    
    Note over PA,PB: å¾ªç¯å¾€å¤ï¼Œæ°¸è¿œæ— æ³•è¾¾æˆå…±è¯†...
</code></pre>
<p><strong>è¿‡ç¨‹åˆ†æ</strong>ï¼š</p>
<ol>
<li>A å‘èµ· <code>Prepare(1)</code>ï¼Œè·å¾—æ‰¿è¯ºã€‚</li>
<li>B å‘èµ· <code>Prepare(2)</code>ï¼Œç¼–å·æ›´å¤§ï¼ŒAcceptor è½¬è€Œæ‰¿è¯º Bã€‚</li>
<li>A çš„ <code>Accept(1, ...)</code> è¢«æ‹’ç»â€”â€”Acceptor å·²ç»æ‰¿è¯ºäº†æ›´å¤§çš„ç¼–å· 2ã€‚</li>
<li>A ä¸ç”˜å¿ƒï¼Œå‘èµ· <code>Prepare(3)</code>ï¼ŒåˆæŠ¢å›æ‰¿è¯ºã€‚</li>
<li>B çš„ <code>Accept(2, ...)</code> è¢«æ‹’ç»ã€‚</li>
<li>B å‘èµ· <code>Prepare(4)</code>â€¦â€¦å¦‚æ­¤åå¤ã€‚</li>
</ol>
<p>ä¸¤ä¸ª Proposer äº’ç›¸è¸©è„šï¼Œè°éƒ½æ— æ³•å®Œæˆ Accept é˜¶æ®µã€‚ç†è®ºä¸Šè¿™ä¸ªè¿‡ç¨‹å¯ä»¥æ— é™æŒç»­ã€‚</p>
<h3 data-id="heading-20">è§£è¯ï¼šé€‰ä¸€ä¸ª Leader</h3>
<p>æ´»é”çš„æ ¹æºæ˜¯<strong>å¤šä¸ª Proposer å¹¶å‘ç«äº‰</strong>ã€‚è§£å†³æ–¹æ¡ˆå¾ˆç›´è§‚ï¼š<strong>é€‰å‡ºä¸€ä¸ª Leaderï¼Œè®©å®ƒç‹¬å ææ¡ˆæƒ</strong>ã€‚</p>
<p>è¿™å°±æ˜¯ <strong>Multi-Paxos</strong> çš„æ ¸å¿ƒæ€æƒ³ï¼š</p>
<ol>
<li>å…ˆé€šè¿‡ä¸€è½® Basic Paxos é€‰å‡ºä¸€ä¸ª Leaderã€‚</li>
<li>åªæœ‰ Leader èƒ½å‘èµ·ææ¡ˆã€‚å…¶ä»–èŠ‚ç‚¹å°†è¯·æ±‚è½¬å‘ç»™ Leaderã€‚</li>
<li>Leader å­˜æ´»æœŸé—´ï¼ŒPrepare é˜¶æ®µåªéœ€æ‰§è¡Œä¸€æ¬¡ï¼Œåç»­ææ¡ˆç›´æ¥è¿›å…¥ Accept é˜¶æ®µï¼Œ<strong>å°†ä¸¤é˜¶æ®µåè®®ä¼˜åŒ–ä¸ºä¸€é˜¶æ®µ</strong>ã€‚</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Phase1 ["ç¬¬ä¸€è½®ï¼šBasic Paxos é€‰ä¸¾ Leader"]
        direction LR
        P["Prepare(n)"] --&gt; Promise["å¤šæ•°æ´¾ Promise"]
        Promise --&gt; A["Accept(n, Leader=X)"]
        A --&gt; Chosen["å¤šæ•°æ´¾ Accepted&lt;br/&gt;X å½“é€‰ Leader âœ…"]
    end

    subgraph Phase2 ["åç»­ï¼šå®¢æˆ·ç«¯è½¬å‘ç»™ Leaderï¼Œç›´æ¥ Accept"]
        direction LR
        C1["Client è¯·æ±‚ v1"] --&gt;|è½¬å‘| L["Leader X"]
        C2["Client è¯·æ±‚ v2"] --&gt;|è½¬å‘| L
        C3["Client è¯·æ±‚ v3"] --&gt;|è½¬å‘| L
        L --&gt; A1["Accept v1 âœ…"]
        L --&gt; A2["Accept v2 âœ…"]
        L --&gt; A3["Accept v3 âœ…"]
    end

    Phase1 --&gt;|"Leader å­˜æ´»æœŸé—´&lt;br/&gt;æ— éœ€å† Prepare"| Phase2

    style P fill:#ffe66d
    style Promise fill:#ffe66d
    style A fill:#ffe66d
    style Chosen fill:#ff6b6b
    style C1 fill:#f0f0f0
    style C2 fill:#f0f0f0
    style C3 fill:#f0f0f0
    style L fill:#ff6b6b
    style A1 fill:#4ecdc4
    style A2 fill:#4ecdc4
    style A3 fill:#4ecdc4
    style Phase1 fill:#fdfdfd,stroke:#ddd,stroke-dasharray: 5 5
    style Phase2 fill:#fdfdfd,stroke:#ddd,stroke-dasharray: 5 5
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼š</p>

























<table><thead><tr><th/><th>Basic Paxos</th><th>Multi-Paxos</th></tr></thead><tbody><tr><td>æ¯æ¬¡ææ¡ˆçš„ç½‘ç»œè½®æ¬¡</td><td>2 è½®ï¼ˆPrepare + Acceptï¼‰</td><td>1 è½®ï¼ˆä»… Acceptï¼‰</td></tr><tr><td>å¹¶å‘å†²çªé£é™©</td><td>é«˜ï¼ˆæ´»é”ï¼‰</td><td>ä½ï¼ˆLeader ç‹¬å ï¼‰</td></tr><tr><td>Leader æ•…éšœå½±å“</td><td>æ—  Leader æ¦‚å¿µ</td><td>éœ€è¦é‡æ–°é€‰ä¸¾</td></tr></tbody></table>
<p>Multi-Paxos å¤§å¹…æå‡äº†æ•ˆç‡ï¼Œä½† Paxos çš„åŸè®ºæ–‡åªç»™å‡ºäº†æ ¸å¿ƒæ€æƒ³ï¼Œå¹¶æœªå®šä¹‰å®Œæ•´çš„å·¥ç¨‹å®ç°ç»†èŠ‚ï¼ˆæ¯”å¦‚ Leader æ€ä¹ˆé€‰ã€æ—¥å¿—æ€ä¹ˆç®¡ç†ï¼‰ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåæ¥ <strong>Raft</strong> ç®—æ³•è¯ç”Ÿæ—¶ï¼Œå°†"å¯ç†è§£æ€§"ä½œä¸ºé¦–è¦è®¾è®¡ç›®æ ‡â€”â€”å®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª<strong>å·¥ç¨‹åŒ–çš„ Multi-Paxos</strong>ã€‚</p>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p>æœ¬ç¯‡æˆ‘ä»¬å®Œæˆäº†ä»"å…¨å‘˜æ¨¡å‹"åˆ°"å¤šæ•°æ´¾æ¨¡å‹"çš„å…³é”®è·¨è¶Šï¼š</p>
<ul>
<li><strong>é›†åˆäº¤é›†å®šå¾‹</strong>æ˜¯å¤šæ•°æ´¾æœºåˆ¶çš„æ•°å­¦åŸºçŸ³ã€‚W + R &gt; N ä¿è¯äº†ä»»æ„ä¸¤ä¸ªå¤šæ•°æ´¾å¿…ç„¶å­˜åœ¨äº¤é›†ï¼Œä¿¡æ¯ä¸ä¼šä¸¢å¤±ã€‚</li>
<li><strong>Basic Paxos</strong> ç”¨ä¸¤é˜¶æ®µåè®®ï¼ˆPrepare + Acceptï¼‰è§£å†³äº†å¤šæ•°æ´¾æ¨¡å‹ä¸‹çš„å†™å†²çªé—®é¢˜ã€‚Prepare é˜¶æ®µé€šè¿‡ç¼–å·æŠ¢å å®ç°å…¨å±€æ’åºï¼ŒAccept é˜¶æ®µé€šè¿‡"ç»§æ‰¿æ—§å€¼"ä¿è¯å·²é€‰å®šçš„å€¼ä¸ä¼šè¢«è¦†ç›–ã€‚</li>
<li><strong>æ´»é”</strong>æ˜¯ Basic Paxos çš„å›ºæœ‰ç¼ºé™·ï¼Œå¤šä¸ª Proposer å¹¶å‘ç«äº‰å¯èƒ½å¯¼è‡´ç³»ç»Ÿæ— æ³•æ¨è¿›ã€‚è§£è¯æ˜¯å¼•å…¥ Leaderï¼Œå³ Multi-Paxosã€‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A["å…¨å‘˜æ¨¡å‹&lt;br/&gt;2PC/3PC"] --&gt;|"å®¹é”™ä¸º0&lt;br/&gt;åˆ†åŒºå³å´©æºƒ"| B["å¤šæ•°æ´¾æ¨¡å‹&lt;br/&gt;Quorum"]
    B --&gt;|"è§£å†³å†™å†²çª"| C["Basic Paxos&lt;br/&gt;ä¸¤é˜¶æ®µå…±è¯†"]
    C --&gt;|"è§£å†³æ´»é”"| D["Multi-Paxos&lt;br/&gt;Leader æœºåˆ¶"]
    D --&gt;|"å·¥ç¨‹åŒ–è§„èŒƒ"| E["Raft"]
    
    style A fill:#ff6b6b
    style B fill:#ffe66d
    style C fill:#4ecdc4
    style D fill:#4ecdc4
    style E fill:#4ecdc4
</code></pre>
<blockquote>
<p><strong>ä¸‹ç¯‡é¢„å‘Šï¼š</strong></p>
<p>Multi-Paxos æŒ‡æ˜äº†æ–¹å‘â€”â€”é€‰ä¸€ä¸ª Leaderï¼Œç”±å®ƒæ¥ç»Ÿä¸€è°ƒåº¦ã€‚ä½†å…·ä½“æ€ä¹ˆé€‰ï¼ŸLeader æ€ä¹ˆæŠŠæ—¥å¿—å®‰å…¨åœ°å¤åˆ¶åˆ°æ‰€æœ‰èŠ‚ç‚¹ï¼ŸLeader æŒ‚äº†æ€ä¹ˆä¿è¯æ•°æ®ä¸ä¸¢ï¼Ÿ</p>
<p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†æ·±å…¥ <strong>Raft ç®—æ³•</strong>ï¼Œçœ‹å®ƒå¦‚ä½•ç”¨"ä»»æœŸï¼ˆTermï¼‰"å’Œ"æ—¥å¿—å¤åˆ¶ï¼ˆLog Replicationï¼‰"ä¸¤æŠŠåˆ©å‰‘ï¼ŒæŠŠ Multi-Paxos çš„æ€æƒ³è½åœ°ä¸ºä¸€å¥—æ¸…æ™°å¯å®ç°çš„å·¥ç¨‹æ–¹æ¡ˆã€‚</p>
</blockquote>
<hr/>
<p><strong>æ€è€ƒé¢˜</strong></p>
<ol>
<li>åœ¨ä¸€ä¸ª 5 èŠ‚ç‚¹ç³»ç»Ÿä¸­ï¼Œå¦‚æœæœ‰ 3 ä¸ªèŠ‚ç‚¹åŒæ—¶å®•æœºï¼ŒPaxos è¿˜èƒ½å·¥ä½œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
</ol>
<details> <summary>å‚è€ƒç­”æ¡ˆ</summary> <div> <b>ä¸èƒ½å·¥ä½œã€‚</b><br/><br/> <ul> <li><b>åŸå› </b>ï¼š5 èŠ‚ç‚¹ç³»ç»Ÿçš„å¤šæ•°æ´¾éœ€è¦è‡³å°‘ 3 ä¸ªèŠ‚ç‚¹ã€‚å¦‚æœ 3 ä¸ªèŠ‚ç‚¹å®•æœºï¼Œåªå‰© 2 ä¸ªèŠ‚ç‚¹ï¼Œæ— æ³•æ„æˆå¤šæ•°æ´¾ã€‚</li> <li><b>Prepare é˜¶æ®µ</b>ï¼šProposer æ— æ³•è·å¾— 3 ä¸ª Acceptor çš„æ‰¿è¯ºï¼Œå› æ­¤æ— æ³•è¿›å…¥ Accept é˜¶æ®µã€‚</li> <li><b>å®‰å…¨æ€§ä¿è¯</b>ï¼šç³»ç»Ÿä¸ä¼šåšå‡ºé”™è¯¯çš„å†³å®šï¼ˆä¸ä¼šé€‰å®šä¸¤ä¸ªå†²çªçš„å€¼ï¼‰ï¼Œä½†ä¼šåœæ­¢æœåŠ¡â€”â€”ç‰ºç‰²å¯ç”¨æ€§æ¥ä¿è¯ä¸€è‡´æ€§ã€‚</li> <li><b>N èŠ‚ç‚¹ç³»ç»Ÿçš„å®¹é”™ä¸Šé™</b>ï¼šæœ€å¤šå®¹å¿ âŒŠ(N-1)/2âŒ‹ ä¸ªèŠ‚ç‚¹æ•…éšœï¼Œ5 èŠ‚ç‚¹æœ€å¤šå®¹å¿ 2 ä¸ªã€‚</li> </ul> <b>æ€»ç»“</b>ï¼šè¿™æ­£æ˜¯ CAP å®šç†çš„ä½“ç°â€”â€”åœ¨ç½‘ç»œåˆ†åŒºï¼ˆæˆ–èŠ‚ç‚¹æ•…éšœï¼‰æ—¶ï¼ŒPaxos é€‰æ‹©äº†ä¸€è‡´æ€§ï¼ˆCï¼‰ï¼Œç‰ºç‰²äº†å¯ç”¨æ€§ï¼ˆAï¼‰ã€‚ </div> </details>
<ol start="2">
<li>Paxos çš„ Prepare é˜¶æ®µè¿”å›"å·²æ¥å—çš„æœ€å¤§ç¼–å·ææ¡ˆ"ï¼Œå¦‚æœä¸è¿”å›è¿™ä¸ªä¿¡æ¯ä¼šæ€æ ·ï¼Ÿ</li>
</ol>
<details> <summary>å‚è€ƒç­”æ¡ˆ</summary> <div> <b>ä¼šå¯¼è‡´å·²é€‰å®šçš„å€¼è¢«è¦†ç›–ï¼Œç ´åä¸€è‡´æ€§ã€‚</b><br/><br/> <b>å…·ä½“åœºæ™¯ï¼š</b> <ul> <li>Proposer A ç”¨ç¼–å· 1 è®©å¤šæ•°æ´¾æ¥å—äº†å€¼ "X"ï¼ˆå€¼å·²è¢«é€‰å®šï¼‰</li> <li>Proposer B ç”¨ç¼–å· 2 å‘èµ· Prepareï¼Œå¦‚æœ Acceptor ä¸è¿”å›å·²æ¥å—çš„å€¼â€”â€”</li> <li>B ä¸çŸ¥é“ "X" å·²è¢«é€‰å®šï¼Œè‡ªç”±é€‰æ‹©äº† "Y"</li> <li>B å‘èµ· Accept(2, "Y")ï¼Œå› ä¸ºç¼–å·æ›´å¤§ï¼ŒAcceptor æ¥å—äº†</li> <li>ç»“æœï¼šç³»ç»Ÿå…ˆé€‰å®šäº† "X"ï¼Œåˆé€‰å®šäº† "Y"ï¼Œä¸€è‡´æ€§è¢«ç ´å</li> </ul> <b>æœ¬è´¨</b>ï¼šPrepare é˜¶æ®µè¿”å›å·²æ¥å—å€¼ï¼Œæ˜¯ Paxos çš„"ä¿¡æ¯ä¼ é€’æœºåˆ¶"ã€‚æ­£æ˜¯é€šè¿‡å¤šæ•°æ´¾çš„äº¤é›†ï¼Œæ–° Proposer æ‰èƒ½å‘ç°æ—§å€¼å¹¶ç»§æ‰¿å®ƒï¼Œè¿™æ˜¯ Paxos å®‰å…¨æ€§çš„æ ¸å¿ƒä¿éšœã€‚ </div> </details>
<ol start="3">
<li>ææ¡ˆç¼–å·ï¼ˆProposal Numberï¼‰åœ¨å®é™…ç³»ç»Ÿä¸­å¦‚ä½•ç”Ÿæˆï¼Ÿæ€æ ·ä¿è¯å…¨å±€å”¯ä¸€ä¸”é€’å¢ï¼Ÿ</li>
</ol>
<details> <summary>å‚è€ƒç­”æ¡ˆ</summary> <div> <b>å¸¸ç”¨æ–¹æ¡ˆï¼šè½®æ¬¡ + èŠ‚ç‚¹ID</b><br/><br/> <ul> <li><b>ç¼–å·æ ¼å¼</b>ï¼š<code>proposal_number = round * N + node_id</code>ï¼Œå…¶ä¸­ N æ˜¯èŠ‚ç‚¹æ€»æ•°ï¼Œnode_id æ˜¯èŠ‚ç‚¹çš„å”¯ä¸€ç¼–å·ï¼ˆ0 åˆ° N-1ï¼‰</li> <li><b>ä¸¾ä¾‹ï¼ˆ3 èŠ‚ç‚¹ç³»ç»Ÿï¼‰</b>ï¼š <ul> <li>èŠ‚ç‚¹0 ç¬¬ä¸€è½®ï¼š0Ã—3+0=0ï¼Œç¬¬äºŒè½®ï¼š1Ã—3+0=3ï¼Œç¬¬ä¸‰è½®ï¼š2Ã—3+0=6</li> <li>èŠ‚ç‚¹1 ç¬¬ä¸€è½®ï¼š0Ã—3+1=1ï¼Œç¬¬äºŒè½®ï¼š1Ã—3+1=4ï¼Œç¬¬ä¸‰è½®ï¼š2Ã—3+1=7</li> <li>èŠ‚ç‚¹2 ç¬¬ä¸€è½®ï¼š0Ã—3+2=2ï¼Œç¬¬äºŒè½®ï¼š1Ã—3+2=5ï¼Œç¬¬ä¸‰è½®ï¼š2Ã—3+2=8</li> </ul> </li> <li><b>ç‰¹ç‚¹</b>ï¼šä¸åŒèŠ‚ç‚¹ç”Ÿæˆçš„ç¼–å·å¤©ç„¶ä¸ä¼šé‡å¤ï¼›æ¯ä¸ªèŠ‚ç‚¹åªéœ€ç»´æŠ¤æœ¬åœ°çš„ round è®¡æ•°å™¨ï¼›é€’å¢é€šè¿‡å¢åŠ  round å€¼å®ç°</li> <li><b>ä¼˜åŒ–</b>ï¼šèŠ‚ç‚¹åœ¨æ”¶åˆ°å…¶ä»–ææ¡ˆçš„ç¼–å·åï¼Œå¯ä»¥å°†è‡ªå·±çš„ round æ›´æ–°ä¸º <code>max(æœ¬åœ°round, æ”¶åˆ°çš„ç¼–å·/N) + 1</code>ï¼Œé¿å…ä½¿ç”¨è¿‡æ—¶çš„å°ç¼–å·</li> </ul> <b>æ€»ç»“</b>ï¼šè¿™ä¸ªæ–¹æ¡ˆç®€æ´é«˜æ•ˆï¼Œæ— éœ€ä¸­å¿ƒåŒ–çš„ç¼–å·åˆ†é…å™¨ï¼Œæ˜¯ Paxos å·¥ç¨‹å®ç°ä¸­çš„ç»å…¸è®¾è®¡ã€‚ </div> </details></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[â°å‰ç«¯å‘¨åˆŠç¬¬ 452 æœŸï¼ˆ2026å¹´2æœˆ2æ—¥-2æœˆ8æ—¥ï¼‰]]></title>    <link>https://juejin.cn/post/7604012106154360878</link>    <guid>https://juejin.cn/post/7604012106154360878</guid>    <pubDate>2026-02-09T01:49:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604012106154360878" data-draft-id="7604646882015019059" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="â°å‰ç«¯å‘¨åˆŠç¬¬ 452 æœŸï¼ˆ2026å¹´2æœˆ2æ—¥-2æœˆ8æ—¥ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,GitHub"/> <meta itemprop="datePublished" content="2026-02-09T01:49:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            â°å‰ç«¯å‘¨åˆŠç¬¬ 452 æœŸï¼ˆ2026å¹´2æœˆ2æ—¥-2æœˆ8æ—¥ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T01:49:08.000Z" title="Mon Feb 09 2026 01:49:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ“¢ <strong>å®£è¨€</strong>ï¼š<strong>æ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œæ¨èå¤§å®¶é˜…è¯»/ç¿»è¯‘ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ï¼Œä¹Ÿä¸ºå†™ä½œæˆ–çªç ´æ–°é¢†åŸŸæä¾›çµæ„Ÿ~</strong></p>
<p>æ¬¢è¿å¤§å®¶è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">github.com/TUARAN/fronâ€¦</a>
é¡ºæ‰‹ç‚¹ä¸ª â­ star æ”¯æŒï¼Œæ˜¯æˆ‘ä»¬æŒç»­è¾“å‡ºçš„ç»­èˆªç”µæ± ğŸ”‹âœ¨ï¼</p>
<p>åœ¨çº¿ç½‘å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendweekly.cn%2F" target="_blank" title="https://frontendweekly.cn/" ref="nofollow noopener noreferrer">frontendweekly.cn/</a></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f563534b00f41edb2da1a5042327d04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771206548&amp;x-signature=8zwYVmIbMuWqqD8KMiYtojZ%2FtLw%3D" alt="å‰ç«¯å‘¨åˆŠå°é¢" loading="lazy"/></p>
<hr/>
<p>ğŸ’¬ <strong>æ¨èè¯­</strong></p>
<p>æœ¬æœŸèšç„¦â€œäº¤äº’ç»„ä»¶é€‰æ‹© + æµè§ˆå™¨è¡Œä¸ºç»†èŠ‚ + ç”Ÿæ€å·¥å…·æ›´æ–°â€ã€‚Web å¼€å‘éƒ¨åˆ†ä»ç»„åˆæ¡†/å¤šé€‰/åˆ—è¡¨æ¡†çš„é€‰å‹æŒ‡å—ã€æµè§ˆå™¨å¯¹â€œæ„å¤–â€å˜æ›´çš„æ•æ„Ÿååº”ï¼Œåˆ°â€œä¸è¦æŠŠå•è¯æ‹†æˆå­—æ¯â€çš„å¯è®¿é—®æ€§æé†’ï¼›å·¥å…·ä¸æ€§èƒ½æ¿å—æ¶µç›– Deno ç”Ÿæ€æ–°è¿›å±•ã€ESLint 10 å‘å¸ƒã€ViteLand æœˆæŠ¥ã€ä»¥åŠ SVG/è§†é¢‘ä¸ Node.js ç‰ˆæœ¬æ¼”è¿›çš„æ€§èƒ½åˆ†æã€‚CSS æ–¹é¢å…³æ³¨ @scopeã€@container scroll-state()ã€bar chart ä¸ clamp() ç­‰ç°ä»£ç‰¹æ€§ï¼›JavaScript åˆ™æœ‰ Temporal ææ¡ˆã€æ˜¾å¼èµ„æºç®¡ç†ã€æ¡†æ¶é€‰å‹ä¸ React/Angular çš„æ–°èŒƒå¼æ¢è®¨ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ—‚ æœ¬æœŸç²¾é€‰ç›®å½•</h2>
<h3 data-id="heading-1">ğŸ§­ Web å¼€å‘</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.smashingmagazine.com%2F2026%2F02%2Fcombobox-vs-multiselect-vs-listbox%2F" target="_blank" title="https://www.smashingmagazine.com/2026/02/combobox-vs-multiselect-vs-listbox/" ref="nofollow noopener noreferrer">ç»„åˆæ¡† vs å¤šé€‰ vs åˆ—è¡¨æ¡†ï¼šå¦‚ä½•é€‰æ‹©åˆé€‚çš„æ§ä»¶</a>ï¼šé€šè¿‡ä»»åŠ¡ç›®æ ‡ã€è¾“å…¥æ–¹å¼ä¸å¯è®¿é—®æ€§ç»´åº¦ï¼Œæ¢³ç†ä¸‰ç§æ§ä»¶çš„é€‚ç”¨åœºæ™¯ä¸å¸¸è§è¯¯ç”¨ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fthe-browser-hates-surprises%2F" target="_blank" title="https://frontendmasters.com/blog/the-browser-hates-surprises/" ref="nofollow noopener noreferrer">æµè§ˆå™¨è®¨åŒæƒŠå–œ</a>ï¼šè§£ææµè§ˆå™¨å¯¹å¸ƒå±€æŠ–åŠ¨ã€åŒæ­¥å¸ƒå±€è¯»å–ç­‰â€œæ„å¤–å˜åŒ–â€çš„ååº”æœºåˆ¶ä¸ä¼˜åŒ–å»ºè®®ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fadrianroselli.com%2F2026%2F02%2Fyou-know-what-just-dont-split-words-into-letters.html" target="_blank" title="https://adrianroselli.com/2026/02/you-know-what-just-dont-split-words-into-letters.html" ref="nofollow noopener noreferrer">ä½ çŸ¥é“å—ï¼Ÿåˆ«å†æŠŠå•è¯æ‹†æˆå­—æ¯äº†</a>ï¼šæé†’ä¸è¦ç”¨é€å­—æ‹†åˆ†çš„æ–¹å¼åšè§†è§‰æ•ˆæœï¼Œå¦åˆ™ä¼šä¸¥é‡ç ´åå¯è®¿é—®æ€§ä¸å¯è¯»æ€§ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fshadcn-ui-adoption-guide%2F" target="_blank" title="https://blog.logrocket.com/shadcn-ui-adoption-guide/" ref="nofollow noopener noreferrer">Shadcn UI é‡‡ç”¨æŒ‡å—ï¼šæ¦‚è§ˆã€ç¤ºä¾‹ä¸æ›¿ä»£æ–¹æ¡ˆ</a>ï¼šä»æ¥å…¥æ–¹å¼ã€ç»„ä»¶å®šåˆ¶åˆ°ç”Ÿæ€å¯¹æ¯”ï¼Œç»™å‡ºæ›´åŠ¡å®çš„é€‰å‹ä¸è¿ç§»å»ºè®®ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.developerway.com%2Fposts%2Fdebugging-with-ai" target="_blank" title="https://www.developerway.com/posts/debugging-with-ai" ref="nofollow noopener noreferrer">ç”¨ AI è°ƒè¯•ï¼šèƒ½å–ä»£èµ„æ·±å¼€å‘è€…å—ï¼Ÿ</a>ï¼šæ¢è®¨ AI åœ¨è°ƒè¯•ä¸­çš„ä»·å€¼è¾¹ç•Œä¸ä½¿ç”¨æ–¹å¼ï¼Œå¼ºè°ƒäººç±»ç»éªŒä»æ˜¯å…³é”®ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwebkit.org%2Fblog%2F17808%2Finterop-2025-review%2F" target="_blank" title="https://webkit.org/blog/17808/interop-2025-review/" ref="nofollow noopener noreferrer">Interop 2025ï¼šè¶‹åŒçš„ä¸€å¹´</a>ï¼šå›é¡¾ 2025 çš„æµè§ˆå™¨äº’æ“ä½œè¿›å±•ï¼Œæ€»ç»“å…³é”®è½åœ°èƒ½åŠ›ä¸ä¸‹ä¸€æ­¥æ–¹å‘ã€‚</li>
</ul>
<h4 data-id="heading-2">ğŸ›  å·¥å…·</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeno.com%2Fblog%2Fintroducing-deno-sandbox" target="_blank" title="https://deno.com/blog/introducing-deno-sandbox" ref="nofollow noopener noreferrer">Introducing Deno Sandbox</a>ï¼šDeno Sandbox å‘å¸ƒï¼šæ›´å®‰å…¨çš„æ‰§è¡Œç¯å¢ƒä¸æ›´ç»†ç²’åº¦çš„æƒé™æ§åˆ¶æ€è·¯ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeno.com%2Fblog%2Fdeno-deploy-is-ga" target="_blank" title="https://deno.com/blog/deno-deploy-is-ga" ref="nofollow noopener noreferrer">Deno Deploy æ­£å¼ GA</a>ï¼šDeno Deploy è¿›å…¥ GAï¼šé¢å‘è¾¹ç¼˜éƒ¨ç½²çš„èƒ½åŠ›å®Œå–„ä¸äº§å“å±‚é¢çš„é‡è¦é‡Œç¨‹ç¢‘ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Feslint.org%2Fblog%2F2026%2F02%2Feslint-v10.0.0-released%2F" target="_blank" title="https://eslint.org/blog/2026/02/eslint-v10.0.0-released/" ref="nofollow noopener noreferrer">ESLint v10.0.0 å‘å¸ƒ</a>ï¼šESLint 10 æ›´æ–°æ¦‚è§ˆï¼šæ–°ç‰¹æ€§ã€ç ´åæ€§å˜æ›´ä¸è¿ç§»æŒ‡å¼•ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvoidzero.dev%2Fposts%2Fwhats-new-jan-2026" target="_blank" title="https://voidzero.dev/posts/whats-new-jan-2026" ref="nofollow noopener noreferrer">ViteLand 2026 å¹´ 1 æœˆæ–°åŠ¨æ€</a>ï¼šVite/Rolldown ç”Ÿæ€æœˆæŠ¥ï¼Œäº†è§£è¿‘æœŸå·¥å…·é“¾ä¸æ’ä»¶åŠ¨å‘ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fremysharp.com%2F2026%2F02%2F02%2Fjs-bin-down-in-2026" target="_blank" title="https://remysharp.com/2026/02/02/js-bin-down-in-2026" ref="nofollow noopener noreferrer">JS Bin åœ¨ 2026 å¹´ä¸‹çº¿</a>ï¼šç»å…¸åœ¨çº¿ç¼–è¾‘å™¨ JS Bin çš„å…³é—­è¯´æ˜ä¸åç»­æ›¿ä»£å»ºè®®ã€‚</li>
</ul>
<h4 data-id="heading-3">âš¡ï¸ æ€§èƒ½</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.phpied.com%2Fmeasuring-svg-rendering-time%2F" target="_blank" title="https://www.phpied.com/measuring-svg-rendering-time/" ref="nofollow noopener noreferrer">æµ‹é‡ SVG æ¸²æŸ“æ—¶é—´</a>ï¼šåˆ†æ SVG æ¸²æŸ“çš„æµ‹é‡æ–¹æ³•ä¸æŒ‡æ ‡ï¼Œå¸®åŠ©å®šä½æ€§èƒ½ç“¶é¢ˆã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fperformance-optimized-video-embeds-with-zero-javascript%2F" target="_blank" title="https://frontendmasters.com/blog/performance-optimized-video-embeds-with-zero-javascript/" ref="nofollow noopener noreferrer">é›¶ JavaScript çš„æ€§èƒ½ä¼˜åŒ–è§†é¢‘åµŒå…¥</a>ï¼šç”¨æ›´è½»çš„ HTML/CSS æ–¹æ¡ˆå‡å°‘è§†é¢‘é¦–å±æˆæœ¬ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.repoflow.io%2Fblog%2Fnode-js-16-to-25-benchmarks-how-performance-evolved-over-time" target="_blank" title="https://www.repoflow.io/blog/node-js-16-to-25-benchmarks-how-performance-evolved-over-time" ref="nofollow noopener noreferrer">Node.js 16 åˆ° 25 çš„æ€§èƒ½åŸºå‡†</a>ï¼šä»å¤šç‰ˆæœ¬åŸºå‡†æµ‹è¯•è§‚å¯Ÿ Node.js æ€§èƒ½æ¼”è¿›ä¸å›å½’è¶‹åŠ¿ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fallenpike.com%2F2026%2Fa-broken-heart%2F" target="_blank" title="https://allenpike.com/2026/a-broken-heart/" ref="nofollow noopener noreferrer">ç ´ç¢çš„å¿ƒï¼šä¸€è¡Œå‚»ä»£ç å¸¦æ¥ 100 å€æé€Ÿ</a>ï¼šä¸€ä¸ªçœŸå®çš„ 100x åŠ é€Ÿæ¡ˆä¾‹ï¼Œå¼ºè°ƒå®šä½çƒ­ç‚¹ä¸å¾®æ”¹åŠ¨çš„é‡è¦æ€§ã€‚</li>
</ul>
<h3 data-id="heading-4">ğŸ¨ CSS</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Futilitybend.com%2Fblog%2Fis-it-scrolled-is-it-not-lets-find-out-with-css-container-scroll-state-queries%2F" target="_blank" title="https://utilitybend.com/blog/is-it-scrolled-is-it-not-lets-find-out-with-css-container-scroll-state-queries/" ref="nofollow noopener noreferrer">åˆ°åº•æ»šäº†æ²¡æœ‰ï¼Ÿç”¨ CSS @container scroll-state() æŸ¥è¯¢åˆ¤æ–­</a>ï¼šä»‹ç» scroll-state() çš„ç”¨æ³•ä¸å¯å®ç°çš„äº¤äº’æ¨¡å¼ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnerdy.dev%2Fnice-select" target="_blank" title="https://nerdy.dev/nice-select" ref="nofollow noopener noreferrer">Nice Select</a>ï¼šç²¾è‡´çš„é€‰æ‹©æ¡†æ ·å¼ä¸å®ç°æ€è·¯ï¼Œé€‚åˆä½œä¸ºç»„ä»¶è®¾è®¡å‚è€ƒã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.smashingmagazine.com%2F2026%2F02%2Fcss-scope-alternative-naming-conventions%2F" target="_blank" title="https://www.smashingmagazine.com/2026/02/css-scope-alternative-naming-conventions/" ref="nofollow noopener noreferrer">CSS @scopeï¼šå‘½åçº¦å®šä¸é‡åº¦æŠ½è±¡çš„æ›¿ä»£æ–¹æ¡ˆ</a>ï¼šç”¨ @scope æ§åˆ¶æ ·å¼ä½œç”¨åŸŸï¼Œé™ä½å‘½åå’Œå±‚çº§å¤æ‚åº¦ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fan-over-the-top-spoiler-design-with-the-details-element%2F" target="_blank" title="https://frontendmasters.com/blog/an-over-the-top-spoiler-design-with-the-details-element/" ref="nofollow noopener noreferrer">åŸºäº details çš„å¤¸å¼ å‰§é€è®¾è®¡</a>ï¼šå±•ç¤ºå¦‚ä½•åˆ©ç”¨ <code>details/summary</code> åšäº’åŠ¨å¼â€œå‰§é€â€ç»„ä»¶ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.projectwallace.com%2Fthe-css-selection%2F2026" target="_blank" title="https://www.projectwallace.com/the-css-selection/2026" ref="nofollow noopener noreferrer">CSS Selection 2026ï¼šçœŸå®ä¸–ç•Œ CSS ä½¿ç”¨ç°çŠ¶</a>ï¼šé€šè¿‡ç»Ÿè®¡æ•°æ®è§‚å¯Ÿ CSS ç‰¹æ€§åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨åˆ†å¸ƒã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcss-tricks.com%2Fcss-bar-charts-using-modern-functions%2F" target="_blank" title="https://css-tricks.com/css-bar-charts-using-modern-functions/" ref="nofollow noopener noreferrer">ç”¨ç°ä»£å‡½æ•°æ„å»º CSS æ¡å½¢å›¾</a>ï¼šç»“åˆ <code>calc()</code>ã€<code>clamp()</code> ç­‰å‡½æ•°å®ç°æ•°æ®å¯è§†åŒ–å¸ƒå±€ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fkizu.dev%2Fshrinkwrap-solution%2F" target="_blank" title="https://kizu.dev/shrinkwrap-solution/" ref="nofollow noopener noreferrer">Shrinkwrap æ–°å®éªŒæ–¹æ¡ˆ</a>ï¼šæ¢ç´¢ shrinkwrap ç›¸å…³å¸ƒå±€é—®é¢˜çš„å®éªŒæ€§è§£æ³•ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcss-tip.com%2Fclamp-auto%2F" target="_blank" title="https://css-tip.com/clamp-auto/" ref="nofollow noopener noreferrer">å¦‚ä½•åœ¨ clamp() ä¸­ä½¿ç”¨ â€œautoâ€</a>ï¼šè§£é‡Š <code>auto</code> åœ¨ <code>clamp()</code> ä¸­çš„å¯ç”¨æ¨¡å¼ä¸æ³¨æ„ç‚¹ã€‚</li>
</ul>
<h3 data-id="heading-5">ğŸ’¡ JavaScript</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblogs.igalia.com%2Fcompilers%2F2026%2F01%2F31%2Fimplementing-the-temporal-proposal-in-javascriptcore%2F" target="_blank" title="https://blogs.igalia.com/compilers/2026/01/31/implementing-the-temporal-proposal-in-javascriptcore/" ref="nofollow noopener noreferrer">åœ¨ JavaScriptCore ä¸­å®ç° Temporal ææ¡ˆ</a>ï¼šä»å¼•æ“è§’åº¦ç†è§£ Temporal çš„è®¾è®¡ä¸å®ç°ç»†èŠ‚ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fallthingssmitty.com%2F2026%2F02%2F02%2Fexplicit-resource-management-in-javascript%2F" target="_blank" title="https://allthingssmitty.com/2026/02/02/explicit-resource-management-in-javascript/" ref="nofollow noopener noreferrer">JavaScript çš„æ˜¾å¼èµ„æºç®¡ç†</a>ï¼šä»‹ç»æ˜¾å¼èµ„æºç®¡ç†è¯­æ³•ä¸åº”ç”¨åœºæ™¯ï¼Œæå‡å¯æ§æ€§ä¸å¯é æ€§ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.inngest.com%2Fblog%2Fmigrating-off-nextjs-tanstack-start" target="_blank" title="https://www.inngest.com/blog/migrating-off-nextjs-tanstack-start" ref="nofollow noopener noreferrer">æœ¬åœ°å¼€å‘æ—¶é—´å‡å°‘ 83%ï¼šä¸ºä½•è¿å‡º Next.js</a>ï¼šå›¢é˜Ÿè¿ç§»å†³ç­–ä¸æ€§èƒ½æ”¶ç›Šå¤ç›˜ï¼Œé€‚åˆè¯„ä¼°æ¡†æ¶æˆæœ¬ä¸è¾¹ç•Œã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Freact-remix-vs-next-js-vs-sveltekit%2F" target="_blank" title="https://blog.logrocket.com/react-remix-vs-next-js-vs-sveltekit/" ref="nofollow noopener noreferrer">Remix vs. Next.js vs. SvelteKit</a>ï¼šå¯¹æ¯”ä¸‰å¤§æ¡†æ¶åœ¨è·¯ç”±ã€æ•°æ®åŠ è½½ä¸å¼€å‘ä½“éªŒä¸Šçš„å·®å¼‚ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fanita-app.com%2Fblog%2Farticles%2Freact-compiler-and-why-class-objects-work-against-memoization.html" target="_blank" title="https://anita-app.com/blog/articles/react-compiler-and-why-class-objects-work-against-memoization.html" ref="nofollow noopener noreferrer">React Compiler ä¸ç±»å¯¹è±¡å¯¹ memoization çš„å½±å“</a>ï¼šè§£é‡Šç±»å¯¹è±¡ä¸ºä½•ä¸åˆ©äºç¼–è¯‘å™¨ä¼˜åŒ–ä¸è®°å¿†åŒ–ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.syncfusion.com%2Fblogs%2Fpost%2Fincremental-hydration-in-angular-apps" target="_blank" title="https://www.syncfusion.com/blogs/post/incremental-hydration-in-angular-apps" ref="nofollow noopener noreferrer">Angular çš„å¢é‡å¼æ°´åˆï¼šæ„å»ºâ€œç¬æ—¶å¯äº¤äº’â€çš„ SSR åº”ç”¨</a>ï¼šå¢é‡æ°´åˆæ€è·¯ä¸å®è·µè·¯å¾„ï¼Œæå‡é¦–å±ä½“éªŒä¸å¯äº¤äº’æ€§ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elpis æ€»ç»“]]></title>    <link>https://juejin.cn/post/7603911453704192043</link>    <guid>https://juejin.cn/post/7603911453704192043</guid>    <pubDate>2026-02-08T10:46:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603911453704192043" data-draft-id="7603644943350153222" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elpis æ€»ç»“"/> <meta itemprop="keywords" content="ä½ä»£ç ,JSON"/> <meta itemprop="datePublished" content="2026-02-08T10:46:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é…’ç²¾æ£€æµ‹ä»ª"/> <meta itemprop="url" content="https://juejin.cn/user/3087868572205982"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elpis æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3087868572205982/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é…’ç²¾æ£€æµ‹ä»ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T10:46:53.000Z" title="Sun Feb 08 2026 10:46:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€è¿°</h2>
<p>elpis æ˜¯ä¸€ä¸ªæ²‰æ·€äº† 80% çš„æ ‡å‡†æ€§ã€é‡å¤æ€§çš„ CRUD å·¥ä½œï¼Œåˆæä¾›äº† 20% çš„ä¸ªæ€§åŒ–æ‰©å±•çš„å‰ç«¯æ¡†æ¶ï¼Œèƒ½åŸºäºä¸€ä»½ json é…ç½®å¿«é€Ÿæ­å»ºæ ‡å‡†çš„ä¸­åå°ç®¡ç†ç³»ç»Ÿé¡µé¢ï¼ŒåŒæ—¶ä¿éšœç¨³å®šæ€§ä¸å¯é æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1deabb6fa2084af4a16a99107de9c33f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YWS57K-5qOA5rWL5Luq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771152507&amp;x-signature=Sdkwcss%2Briryx%2Ff1j2XXqn%2BMHqw%3D" alt="elpis" loading="lazy"/></p>
<p>elpis çš„æ•´ä½“æ¶æ„å¦‚ä¸Šã€‚å®ƒæ˜¯ä¸€ä¸ª BFF å±‚çš„æ¶æ„ï¼Œæ˜¯å‰åç«¯çš„æ¡¥æ¢ã€‚</p>
<ul>
<li>ä»ä¸€ä»½é¢†åŸŸæ¨¡å‹ model çš„ json é…ç½®ï¼ˆå¦‚å•†å“ç®¡ç†ï¼‰ï¼Œå¯ä»¥æ‹“å®½åˆ°å„ä¸ªä¸šåŠ¡ç³»ç»Ÿï¼ˆå¦‚æ·˜å®å•†å“ç®¡ç†ã€äº¬ä¸œå•†å“ç®¡ç†ï¼‰ã€‚
<ul>
<li>json æ»¡è¶³ json-shema è§„èŒƒï¼Œå®šä¹‰å‰åç«¯ç»Ÿä¸€æ ¡éªŒä¸æ•°æ®åº“è¡¨è®¾è®¡ï¼ŒåŒæ—¶æ‰©å±•å‡º UI ç»„ä»¶çš„é…ç½®</li>
</ul>
</li>
<li>ç»è¿‡ elpis BFF çš„å¤„ç†ï¼Œå¯ SSR æ¸²æŸ“å„ä¸ªä¸šåŠ¡ç³»ç»Ÿçš„é¦–é¡µï¼Œæå‡é¦–é¡µçš„æ¸²æŸ“é€Ÿåº¦ã€‚é¦–é¡µå†…èœå•ç³»ç»Ÿçš„åˆ‡æ¢æ˜¯é‡‡ç”¨çš„ vue-router çš„ SPAï¼Œä¿è¯å…¶æµç•…æ€§ã€‚</li>
<li>åœ¨ elpis ä¸­ï¼Œæä¾›äº†å¸¸ç”¨çš„å¦‚ inputã€selectç­‰åŸºç¡€ UI ç»„ä»¶ï¼ŒåŒæ—¶æ”¯æŒä¸šåŠ¡æ–¹è‡ªå®šä¹‰ç»„ä»¶ä¸é¡µé¢ï¼Œæ»¡è¶³ä¸šåŠ¡ç‰¹æ€§éœ€æ±‚ã€‚</li>
<li>æ¥å£éµå¾ª restful è§„èŒƒï¼Œäº¤äº’åŒæ ·ç»è¿‡ elpisã€‚å€ŸåŠ©æ´‹è‘±åœˆæ¨¡å‹æ€æƒ³ï¼Œæ”¯æŒäº†å…¨å±€é”™è¯¯æ•è·ã€ç­¾åæ ¡éªŒã€å‚æ•°æ ¡éªŒã€æ—¥å¿—è®°å½•ç­‰å¤šä¸ªä¸­é—´ä»¶</li>
<li>å®ç°ä¸åŒç¯å¢ƒçš„ webpack å·®å¼‚åŒ–é…ç½®ï¼Œæ»¡è¶³å¼€å‘ä¸ç”Ÿäº§çš„ä¸åŒéœ€æ±‚</li>
</ul>
<h2 data-id="heading-1">åŸºäº koa è®¾è®¡æœåŠ¡ç«¯å¼•æ“</h2>
<p>ä¸ºäº†ç»Ÿä¸€ä»£ç è§„èŒƒï¼Œæå‡å¼€å‘æ•ˆç‡ï¼Œå€Ÿé‰´ egg çš„æ€è·¯ï¼Œè®¾è®¡äº† elpis-core æœåŠ¡ç«¯å¼•æ“
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c150951adeb94fd7b4d0c82b5d71a519~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YWS57K-5qOA5rWL5Luq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771152507&amp;x-signature=CdXhXrKSy6mgQONdCrSf323bf%2B4%3D" alt="elpis-core" loading="lazy"/></p>
<h3 data-id="heading-2">loader è‡ªåŠ¨åŠ è½½</h3>
<p>ä¸ºäº†å‡å°‘åœ¨ä»£ç ä¸­å„ç§ require å¯¼è‡´çš„ä¾èµ–ä¸æ¸…æ™°ï¼Œelpis è®¾è®¡äº†çº¦å®šå¼çš„ç›®å½•ç»“æ„ï¼Œåœ¨å¯¹åº”ç›®å½•ä¸‹çš„æ–‡ä»¶å¯¼å‡ºçš„å®ä¾‹éƒ½ä¼šè¢«æŒ‚åœ¨ app å¯¹è±¡ä¸Šã€‚å…·ä½“è¯´æ¥ï¼Œeipis å€Ÿç”¨ glob å’Œ path ä¸¤ä¸ªå·¥å…·ï¼Œå°†ç›¸åº”æ–‡ä»¶å¤¹ä¸‹çš„ js æ–‡ä»¶çš„æ–‡ä»¶åç»Ÿä¸€æ”¹ä¸ºé©¼å³°å¼å‘½åï¼ŒåŒæ—¶å®ä¾‹åŒ–å¯¹è±¡å¹¶æŒ‚è½½åˆ° app ä¸‹ã€‚å¦‚ <code>app/middleware/api-params-verify.js</code> ä¸­çš„å®ä¾‹æœ€ç»ˆä¼šå¤„ç†æˆ<code>app.middlewares.apiParamsVerify</code>ã€‚è¿™æ ·å¯ä»¥é€šè¿‡ app å¯¹è±¡è®¿é—®åˆ°ä»»ä½•æ¨¡å—ï¼Œè€Œä¸éœ€è¦requireã€‚</p>
<pre><code class="hljs language-rust" lang="rust">app/controller<span class="hljs-comment">/**/</span>**.js      -<span class="hljs-punctuation">-&gt;</span>  app.controller.xxx
app/extend<span class="hljs-comment">/**/</span>**.js          -<span class="hljs-punctuation">-&gt;</span>  app.extend.xxx
app/middleware<span class="hljs-comment">/**/</span>**.js      -<span class="hljs-punctuation">-&gt;</span>  app.middleware.xxx
app/router<span class="hljs-comment">/**/</span>**.js          -<span class="hljs-punctuation">-&gt;</span>  app.router.xxx
app/router-schema<span class="hljs-comment">/**/</span>**.js   -<span class="hljs-punctuation">-&gt;</span>  app.routerSchema.xxx
app/service<span class="hljs-comment">/**/</span>**.js         -<span class="hljs-punctuation">-&gt;</span>  app.service.xxx
app/config<span class="hljs-comment">/**/</span>**.js          -<span class="hljs-punctuation">-&gt;</span>  app.config.xxx
</code></pre>
<h3 data-id="heading-3">ä¸­é—´ä»¶è®¾è®¡</h3>
<p>åˆ©ç”¨æ´‹è‘±åœˆæ¨¡å‹ï¼Œè¯·æ±‚ï¼ˆåŒ…å«ä¸šåŠ¡è¯·æ±‚å’Œ API è¯·æ±‚ï¼‰ç»è¿‡ä¸€å±‚å±‚çš„ä¸­é—´ä»¶è¿‡æ»¤ï¼Œå†è¿›è¡Œä¸šåŠ¡é€»è¾‘çš„å¤„ç†ï¼Œå°†å¤„ç†åçš„ç»“æœå†ä¸€å±‚å±‚è¿”å›ã€‚</p>
<p>elpis ä¸­å®šä¹‰äº†ä¸‰ä¸ªåŸºç¡€ä¸­é—´ä»¶ï¼š</p>
<ol>
<li>å…¨å±€é”™è¯¯æ•è·ã€‚åœ¨æœ€å¤–å±‚ï¼Œæœ€å…ˆä½¿ç”¨ï¼Œcatch ä½åç»­æ‰€æœ‰çš„é”™è¯¯å¹¶è®°å½•æ—¥å¿—ã€‚å†è¿›è¡Œé”™è¯¯åˆ†æï¼Œå¦‚æœæ˜¯è¯·æ±‚ä¸å­˜åœ¨çš„é¡µé¢ï¼Œåˆ™é‡å®šå‘åˆ°ä¸»é¡µï¼Œä¸ä¼šå¯¼è‡´é¡µé¢ç™½å±ï¼›å¦‚æœæ˜¯ API è¯·æ±‚æŠ¥é”™ï¼Œåˆ™ç»Ÿä¸€è¿”å›<code>code: 50000, message: "ç½‘ç»œå¼‚å¸¸ è¯·ç¨åé‡è¯•"</code>ï¼Œä¸ä¼šå¯¼è‡´æ¥å£æ— å“åº”ã€‚</li>
<li>ç­¾åæ ¡éªŒã€‚å¯¹æ¥å£è¯·æ±‚ï¼Œå°† key å’Œæ—¶é—´æˆ³è¿›è¡Œ md5 åŠ å¯†ã€‚é˜²æ­¢æ¶æ„è¯·æ±‚ï¼Œå‡å°‘æœåŠ¡å‹åŠ›ã€‚</li>
<li>å‚æ•°æ ¡éªŒã€‚ä» ctx ä¸Šä¸‹æ–‡ä¸­è·å–æ¥å£çš„ bodyã€queryã€headerç­‰å‚æ•°å¹¶è®°å½•æ—¥å¿—ï¼Œç»“åˆ ajv + json-schemaï¼Œçœ‹æ˜¯å¦æ»¡è¶³<code>model/**.json</code>ä¸­çš„å­—æ®µå®šä¹‰çš„è§„åˆ™ã€‚å¦‚ä¸æ»¡è¶³ï¼Œç›´æ¥æ‹¦æˆªã€‚</li>
</ol>
<p>æ­¤å¤–ï¼Œä¸šåŠ¡æ–¹å¯æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šä¹‰é¢å¤–çš„ä¸­é—´ä»¶ã€‚</p>
<h2 data-id="heading-4">åŸºäº webpack æ­å»ºå‰ç«¯å·¥ç¨‹åŒ–</h2>
<h3 data-id="heading-5">å¼€å‘ç¯å¢ƒçƒ­æ›´æ–°</h3>
<p>ç”±äºé¦–é¡µé‡‡ç”¨ SSR æ¸²æŸ“ï¼Œéœ€è¦å°†æ¨¡æ¿ .tpl æ–‡ä»¶è¾“å‡ºåˆ°ç£ç›˜ï¼Œæ–¹ä¾¿åç«¯èƒ½æ‹¿åˆ°æœ€æ–°çš„æ¨¡æ¿æ¸²æŸ“é¡µé¢ã€‚è€Œç°æœ‰çš„ hmr æœåŠ¡å¦‚ webpack-dev-server å°†<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.webpackjs.com%2Fguides%2Fdevelopment%2F%23using-webpack-dev-server" target="_blank" title="https://www.webpackjs.com/guides/development/#using-webpack-dev-server" ref="nofollow noopener noreferrer">æ‰€æœ‰æ–‡ä»¶ä¿å­˜åˆ°å†…å­˜ä¸­</a>ï¼Œæ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæ•…é‡‡ç”¨ webpack-dev-middleware å’Œ webpack-hot-middleware å®ç°å®šåˆ¶çš„ hmr æœåŠ¡ï¼ˆwebpack-dev-server å°±æ˜¯å°å¯¹äºŒè€…è¿›è¡Œäº†å°è£…ï¼‰ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33b79a66d9174f2d97ced8e268621717~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YWS57K-5qOA5rWL5Luq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771152507&amp;x-signature=QrdCdaVrd8seKOptSoW8UKospMA%3D" alt="hmr" loading="lazy"/>
å¦‚å›¾ï¼Œå®ç° hmr æœåŠ¡éœ€è¦ä¸¤ä¸ªåŸºç¡€èƒ½åŠ›ï¼š</p>
<ol>
<li>ç›‘æ§èƒ½åŠ›ã€‚ä½¿ç”¨ webpack-dev-middleware ç›‘æ§åˆ°ä¸šåŠ¡æ–‡ä»¶çš„æ”¹å˜ï¼Œè§¦å‘è§£æå¼•æ“å·¥ä½œï¼Œå°†ç¼–è¯‘åçš„æ–°çš„ js/css æ–‡ä»¶æ›¿æ¢æ‰å†…å­˜ä¸­æ—§çš„ã€‚</li>
<li>é€šè®¯èƒ½åŠ›ã€‚ä½¿ç”¨ webpack-hot-middleware è¿›è¡Œé€šè®¯ï¼Œé€šè¿‡ webSocketä¸æµè§ˆå™¨ä¿æŒé•¿è¿æ¥ï¼Œæ¨é€æ–‡ä»¶å˜åŠ¨äº‹ä»¶ï¼ˆå¦‚Â hash-changed ï¼‰å’Œæ–°æ¨¡å—çš„åŠ è½½æŒ‡ä»¤ï¼ˆå¦‚ js/css æ–‡ä»¶è·¯å¾„ï¼‰ã€‚æµè§ˆå™¨æ¥æ”¶åˆ°é€šçŸ¥åï¼Œä»å†…å­˜ä¸­åŠ¨æ€è¯·æ±‚æ–°çš„äº§ç‰©æ–‡ä»¶ï¼Œæ‰§è¡Œæ¨¡å—æ›¿æ¢ã€‚</li>
</ol>
<p>æ­¤å¤–ï¼Œè¿˜éœ€è¿›è¡Œä¸¤å¤„é…ç½®ï¼š</p>
<ol>
<li>ç”±äº hmr æœåŠ¡æ˜¯é€šè¿‡ express å¯åŠ¨çš„ï¼Œä¸åç«¯ elpis-core æœåŠ¡åœ¨ä¸åŒçš„ç«¯å£ä¸Šï¼Œéœ€è¦é…ç½®è·¨åŸŸè¯·æ±‚å…è®¸ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwebpack%2Fwebpack-hot-middleware" target="_blank" title="https://github.com/webpack/webpack-hot-middleware" ref="nofollow noopener noreferrer">å®¢æˆ·ç«¯ä¹Ÿéœ€è¦è¢«æ³¨å…¥ hmr çš„ä»£ç </a>ã€‚æ‰€ä»¥éœ€è¦åœ¨æ¯ä¸ªæ¯ä¸ªå…¥å£æ–‡ä»¶éƒ½åŠ ä¸Š webpack-hot-middleware çš„å®¢æˆ·ç«¯ä»£ç ï¼ŒæŒ‡å®š HMR çš„é€šä¿¡è·¯å¾„å’Œç«¯å£ã€‚</li>
</ol>
<h3 data-id="heading-6">æ„å»ºä¸æ‰“åŒ…</h3>
<p>ä¸åŒçš„è¿è¡Œç¯å¢ƒéœ€è¦ä¸åŒçš„é…ç½®ï¼Œelpis ä¸­ä¸€å…±ä½¿ç”¨äº†ä¸‰ä»½ webpack æ–‡ä»¶ã€‚åœ¨ webpack.base.js ä¸­å®šä¹‰äº†é€šç”¨éœ€é…ç½®ï¼Œç„¶ååœ¨å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸­é€šè¿‡ webpack-merge æ’ä»¶çš„ <code>merge.smart</code> å¼•å…¥é€šç”¨é…ç½®å¹¶æ‹“å±•å½“å‰ç¯å¢ƒæ‰€éœ€çš„é…ç½®ã€‚</p>
<ol>
<li>é€šç”¨é…ç½®ã€‚
<ul>
<li><code>vue-loader</code>,  <code>babel-loader</code> , <code>style-loader</code> ç­‰å„ç§ loader è§£æå™¨</li>
<li>åˆ«åé…ç½®ï¼ˆæ¨¡å—è§£æçš„å…·ä½“è¡Œä¸ºï¼‰</li>
<li><code>CleanWebpackPlugin</code>ï¼Œæ¯æ¬¡buildå‰ï¼Œæ¸…ç©º public/dist ç›®å½•</li>
<li>æ‰“åŒ…è¾“å‡ºä¼˜åŒ–ï¼ˆä»£ç åˆ†å‰²ï¼Œæ¨¡å—åˆå¹¶ï¼Œç¼“å­˜ chunkhashï¼Œå‹ç¼©ä¼˜åŒ–ç­‰ç­–ç•¥ï¼‰</li>
</ul>
</li>
<li>å¼€å‘ç¯å¢ƒé…ç½®ã€‚ä¸»è¦æ˜¯ hmrã€‚</li>
<li>ç”Ÿäº§ç¯å¢ƒé…ç½®ã€‚
<ul>
<li>ä½¿ç”¨ <code>thread-loader</code> åˆ©ç”¨å¤šæ ¸ CPU åŠ å¿«æ‰“åŒ…é€Ÿåº¦</li>
<li>ä½¿ç”¨ <code>mini-css-extract-plugin</code> æŠ½å– css æ–‡ä»¶ï¼Œä¸æ‰“åŒ…åˆ° js ä¸­ï¼Œå¦åˆ™ä¼šé˜»å¡æ¸²æŸ“ã€‚ä½¿ç”¨ <code>css-minimizer-webpack-plugin</code> å‹ç¼© css</li>
<li>ä½¿ç”¨ <code>terser-webpack-plugin</code> å‹ç¼© js</li>
</ul>
</li>
</ol>
<p>æ€»ä¹‹ï¼Œå¼€å‘ç¯å¢ƒæ³¨é‡çš„æ˜¯æ„å»ºé€Ÿåº¦ï¼Œç”Ÿäº§ç¯å¢ƒæ³¨é‡çš„æ˜¯æ–‡ä»¶ä½“ç§¯å¤§å°ä¸å®‰å…¨ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-7">ä¸šåŠ¡æ‹“å±•</h3>
<p>ä»¥ä¸Šéƒ½æ˜¯ elpis æä¾›çš„åŸºç¡€æœåŠ¡ï¼Œæ­¤å¤– elpis æ”¯æŒä¸šåŠ¡è‡ªå®šä¹‰å·¥ç¨‹åŒ–é…ç½®ï¼Œåªéœ€è¦åœ¨ä¸šåŠ¡å¯¹åº”çš„ç›®å½•ï¼ˆ/app/webpack.config.jsï¼‰ä¸‹ç¼–å†™ webpack æ–‡ä»¶å³å¯ï¼Œelpisä¼šé€šè¿‡ <code>merge.smart</code> åˆå¹¶åˆ°ä¸€èµ·ã€‚</p>
<p>ä½† elpis ä¸æ­¢äºæ­¤ï¼Œelpis å°†çº¦å®šä¼˜äºé…ç½®å‘æŒ¥çš„æ·‹æ¼“å°½è‡´ã€‚é™¤äº†æ”¯æŒä¸šåŠ¡è‡ªå®šä¹‰å·¥ç¨‹åŒ–é…ç½®ï¼Œè¿˜æ”¯æŒè‡ªå®šä¹‰é¡µé¢ï¼Œè‡ªå®šä¹‰ç»„ä»¶ï¼Œåªéœ€åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40hbl.%2Felpis" target="_blank" title="https://www.npmjs.com/package/@hbl./elpis" ref="nofollow noopener noreferrer">çº¦å®šç›®å½•</a>ä¸‹æ–°å»ºæ–‡ä»¶å³å¯ã€‚è¿™äº›ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½ä¼šè¢«åˆå¹¶åˆ° elpis ä¸­ï¼Œä½¿ç”¨ elpis çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-8">åŸºäº json-schema è®¾è®¡åŠ¨æ€ç»„ä»¶ä½“ç³»</h2>
<p>ä¸Šæ–‡è¯´åˆ°ï¼Œelpis æ”¯æŒé…ç½®åŒ–å¼€å‘ï¼Œç”¨æˆ·åªéœ€è¦é…ç½®ä¸€ä»½ jsonï¼Œå³å¯ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„é¡µé¢ã€‚å¦‚ä¸‹å›¾ï¼Œè¿™ä»½ jsonï¼Œä¸ä»…ä»…æ»¡è¶³ json-schema è§„èŒƒï¼Œå¯è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œelpis å¯¹å…¶åŠŸèƒ½è¿›è¡Œäº†æ‰©å±•ï¼Œå¯ä»¥åŠ¨æ€è®¾è®¡ UI ç»„ä»¶ã€‚ç”šè‡³ï¼Œè¿˜èƒ½ç”¨äºè¾…åŠ©æ•°æ®åº“å»ºè¡¨ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de43555ec31849819e171e563e916d60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YWS57K-5qOA5rWL5Luq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771152507&amp;x-signature=y%2FqeQRLjxQTKn9g0mhk4DW4dKZQ%3D" alt="json-schema" loading="lazy"/></p>
<h3 data-id="heading-9">json-schema è§„èŒƒ</h3>
<p>é‡‡ç”¨ json-schema æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› </p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjson-schema.apifox.cn%2F" target="_blank" title="https://json-schema.apifox.cn/" ref="nofollow noopener noreferrer">è§„èŒƒå®Œæ•´</a>ï¼Œå®Œå…¨æ»¡è¶³æ ¡éªŒéœ€æ±‚ï¼Œä¸”ä¸šç•Œæµè¡Œåº¦é«˜ï¼Œæœ‰å®Œæ•´çš„æ ¡éªŒåº“ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fajv.nodejs.cn%2F" target="_blank" title="https://ajv.nodejs.cn/" ref="nofollow noopener noreferrer">ajv</a>ï¼‰æ”¯æŒã€‚</li>
<li>json åªæ˜¯ä¸€ä»½æ•°æ®ï¼Œå‰ç«¯ã€åç«¯ã€æ•°æ®åº“å¯å…±ç”¨ï¼Œé¿å…äº†å‰åç«¯æ ¡éªŒä¸ä¸€è‡´çš„æƒ…å†µï¼ˆelement-plus ä¸­çš„æ ¡éªŒåªèƒ½å‰ç«¯ä½¿ç”¨ï¼Œæ²¡æ³•å’Œåç«¯ä¿æŒç»Ÿä¸€ï¼‰ã€‚ç”±äºå®šä¹‰äº†æ•°æ®ç±»å‹ã€æ˜¯å¦å¿…å¡«ç­‰å…³é”®ä¿¡æ¯ï¼ŒåæœŸæ•°æ®åº“å»ºè¡¨äº¦å¯å‚ç…§æ­¤ jsonã€‚</li>
<li>å¯æ‹“å±•æ€§å¼ºã€‚elpis åœ¨æ»¡è¶³ json-schema è§„èŒƒçš„åŸºç¡€ä¸Šæ‹“å±•å‡ºäº† UI ç»„ä»¶çš„æè¿°ã€‚</li>
</ul>

<pre><code class="hljs language-css" lang="css">...
  product_name: {
    type: <span class="hljs-string">"string"</span>,
    label: <span class="hljs-string">"å•†å“åç§°"</span>,
    maxLength: <span class="hljs-number">10</span>,
    minLength: <span class="hljs-number">2</span>,
    tableOption: {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>,
    },
    searchOption: {
      comType: <span class="hljs-string">"dynamicSelect"</span>,
      api: <span class="hljs-string">"/api/proj/product_name/list"</span>,
    },
    createFormOption: {
      comType: <span class="hljs-string">"input"</span>,
      default: <span class="hljs-string">"iPhone 17 pro"</span>,
    },
    editFormOption: {
      comType: <span class="hljs-string">"input"</span>,
    },
    detailPanelOption: {},
  },
...
  tableConfig: {
    headerButtons: [
      {
        <span class="hljs-selector-tag">label</span>: <span class="hljs-string">"æ–°å¢å•†å“"</span>,
        eventKey: <span class="hljs-string">"showComponent"</span>,
        eventOption: {
          comName: <span class="hljs-string">"createForm"</span>,
        },
        type: <span class="hljs-string">"primary"</span>,
      },
    ],
    rowButtons: [
      {
        <span class="hljs-selector-tag">label</span>: <span class="hljs-string">"è¯¦æƒ…"</span>,
        eventKey: <span class="hljs-string">"showComponent"</span>,
        eventOption: {
          comName: <span class="hljs-string">"detailPanel"</span>,
        },
        type: <span class="hljs-string">"primary"</span>,
        text: true,
      },
    ],
  },
  componentConfig: {
    createForm: {
      title: <span class="hljs-string">"æ–°å¢å•†å“"</span>,
      saveBtnText: <span class="hljs-string">"ä¿å­˜"</span>,
    },
  },
...
</code></pre>
<p>ç¤ºä¾‹å¦‚ä¸Šï¼Œå¯¹äºâ€œå•†å“åç§°â€è¿™ä¸ªå­—æ®µï¼Œ4-7 è¡Œæ˜¯ json-schema è§„èŒƒçº¦æŸï¼Œå¾€åéƒ½æ˜¯ UI ç»„ä»¶æè¿°ã€‚å¦‚åœ¨ tableOption å®šä¹‰ width: 200, åˆ™å•†å“åç§°åœ¨è¡¨æ ¼ä¸­å æ®çš„å®½åº¦ä¸º200ï¼ŒtableOption ä¸­çš„æ‰€æœ‰å±æ€§æè¿°ï¼Œå¯å‚ç…§ eloment-plus çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Felement-plus.org%2Fzh-CN%2Fcomponent%2Ftable%23table-column-api" target="_blank" title="https://element-plus.org/zh-CN/component/table#table-column-api" ref="nofollow noopener noreferrer">table-column</a>ï¼Œelpis ä¸­å·²ç»åšäº†ç»‘å®šã€‚å¦‚åœ¨ searchOption ä¸­å®šä¹‰çš„ comType: "dynamicSelect"ï¼Œæ ‡è¯†å•†å“åç§°åœ¨æœç´¢è¡¨å•ä¸­çš„ç»„ä»¶ç±»å‹æ˜¯ä¸€ä¸ªåŠ¨æ€ä¸‹æ‹‰æ¡†ï¼Œä¸‹æ‹‰æ¡†ä¸­çš„å€¼é€šè¿‡ "/api/proj/product_name/list" è¿™ä¸ªæ¥å£å»è·å–ã€‚</p>
<h3 data-id="heading-10">åŠ¨æ€ç»„ä»¶è®¾è®¡</h3>
<p>ç”¨æˆ·åœ¨ json ä¸­è¯´æ˜å­—æ®µéœ€è¦åœ¨å“ªäº›åœ°æ–¹å±•ç¤ºï¼ˆæ ¸å¿ƒç»„ä»¶å’ŒåŠ¨æ€ç»„ä»¶ï¼‰ï¼Œä½¿ç”¨å“ªç§ç»„ä»¶ç±»å‹ï¼ˆåŸºç¡€æ§ä»¶ï¼‰ï¼Œelpis ç”¨ Vue çš„ component æ ‡ç­¾ï¼ŒåŠ¨æ€ç»‘å®š is å±æ€§ï¼ŒåŒæ—¶ç»™å­ç»„ä»¶ä¼ å…¥å¯¹åº”çš„ json-schema çº¦æŸã€‚é€šè¿‡ ref æ”¶é›†æ‰€æœ‰å­ç»„ä»¶çš„å¼•ç”¨ï¼Œå¤–å±‚ç»Ÿä¸€å¤„ç†å­ç»„ä»¶çš„ç›¸å…³é€»è¾‘ï¼ˆå¦‚ validate å’Œ getValue æ–¹æ³•ï¼‰ã€‚</p>
<ol>
<li>
<p>åŸºç¡€é…ç½®</p>
<p>elpis ä¸­æä¾›äº† schema-tableã€schema-search-bar ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶å’Œ createFormã€editFormã€detailPanel ä¸‰ä¸ªåŠ¨æ€ç»„ä»¶ å’Œ inputã€inputNumberã€selectã€dynamicSelectã€dateRange å…­ä¸ªåŸºç¡€æ§ä»¶ã€‚ç”¨æˆ·åœ¨ json ä¸­å¯è‡ªç”±æ­é…ç»„åˆï¼Œåªéœ€æ»¡è¶³å¯¹åº”è§„èŒƒï¼Œå³å¯é…ç½®å‡ºä¸€ä¸ªå®Œæ•´çš„ CRUD é¡µé¢ã€‚</p>
</li>
<li>
<p>ä¸šåŠ¡æ‹“å±•</p>
<p>å½“åŸºç¡€é…ç½®æ»¡è¶³ä¸äº†ä¸šåŠ¡éœ€æ±‚æ—¶ï¼Œelpis æ”¯æŒä¸šåŠ¡æ‹“å±•è‡ªå·±çš„ç»„ä»¶ã€‚åªéœ€åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40hbl.%2Felpis" target="_blank" title="https://www.npmjs.com/package/@hbl./elpis" ref="nofollow noopener noreferrer">çº¦å®šç›®å½•</a>ä¸‹æ–°å»ºæ–‡ä»¶å³å¯ã€‚å…·ä½“è¯´æ¥ï¼š</p>
<ul>
<li>ç¼–å†™ä¸šåŠ¡è‡ªå®šä¹‰ç»„ä»¶</li>
<li>åœ¨çº¦å®šç›®å½•ä¸‹åˆ›å»ºç»„ä»¶æ˜ å°„ï¼Œå¦‚ <code>userPanel: { component: UserPanel }</code></li>
<li>elpis ä½¿ç”¨ process.cwd è¯†åˆ«åˆ°ä¸šåŠ¡çº¦å®šç›®å½•ä¸‹çš„æ˜ å°„æ–‡ä»¶ï¼Œä¸è‡ªå·±çš„åŸºç¡€ç»„ä»¶åˆå¹¶ï¼ŒåŒåä¼šè¦†ç›–åŸºç¡€ç»„ä»¶</li>
<li>Vue çš„ component æ ‡ç­¾åŠ¨æ€æ¸²æŸ“æ—¶ï¼Œä»åˆå¹¶åçš„é…ç½®å¯¹è±¡é‡ŒæŸ¥æ‰¾ç»„ä»¶ã€‚æ— è®ºæ˜¯ elpis å†…ç½®çš„è¿˜æ˜¯ä¸šåŠ¡æ‰©å±•çš„ï¼Œéƒ½èƒ½æ‰¾åˆ°</li>
</ul>
</li>
</ol>
<h2 data-id="heading-11">åŸºäº docker æ”¹é€ é¡¹ç›®éƒ¨ç½²</h2>
<h3 data-id="heading-12">docker</h3>
<ol>
<li>ç¼–å†™ DokcerFile æ„å»º docker é•œåƒï¼Œä¿è¯æœ¬åœ°ã€æµ‹è¯•ã€ç”Ÿäº§ä½¿ç”¨çš„æ˜¯åŒä¸€é•œåƒï¼Œä¸ä¼šå¯¼è‡´ç¯å¢ƒå·®å¼‚é—®é¢˜</li>
<li>é•œåƒæœ‰tagï¼ˆbranch+commitï¼‰ï¼Œå¯ä»¥åšç‰ˆæœ¬ç®¡ç†ï¼Œæ–¹ä¾¿å‡ºç°é—®é¢˜åŠæ—¶å›æ»š</li>
</ol>
<h3 data-id="heading-13">æµæ°´çº¿</h3>
<p>åŸºäºè…¾è®¯ DevOps 2.0-Clound Native Buildï¼ˆcnbï¼‰æ„å»º CI/CD æµæ°´çº¿ï¼Œè§£å†³ä»¥å¾€æ‰‹åŠ¨æ‹‰ä»£ç ã€æ‰“åŒ…ã€ä¸Šä¼ ã€éƒ¨ç½²çš„ä½æ•ˆé—®é¢˜ï¼Œåªéœ€è¦é…ç½®ä¸€æ¬¡ï¼Œåç»­æ— é™å¤ç”¨ã€‚</p>
<ol>
<li><code>npm run lint</code> æ£€æŸ¥æ ¼å¼åŒ–ä¸ js æŠ¥é”™</li>
<li><code>npm install + npm run build</code> æ‰“åŒ…</li>
<li><code>docker build + docker push</code> æ„å»º docker é•œåƒå¹¶æ¨é€åˆ°é•œåƒä»“åº“</li>
<li>å€Ÿç”¨ cnbcool/ssh å·¥å…·åœ¨æœåŠ¡å™¨ä¸Š <code>docker pull + docker run</code> å¯åŠ¨æœ€æ–°é•œåƒ</li>
</ol>
<h2 data-id="heading-14">åç»­æ”¹è¿›</h2>
<ol>
<li>æ”¯æŒ typescriptã€‚ç°åœ¨æ²¡æœ‰ç±»å‹æç¤ºï¼Œç¼–å†™ä»£ç å’Œé…ç½®å®¹æ˜“å‡ºé”™ï¼›</li>
<li>ç»„ä»¶è”åŠ¨ä¸é€šä¿¡ã€‚ç°æœ‰ç»„ä»¶çŠ¶æ€æ— æ³•æ ¹æ®å…¶ä»–ç»„ä»¶çŠ¶æ€è¿›è¡ŒåŠ¨æ€è°ƒæ•´ï¼Œå¯å‚ç…§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fformilyjs.org%2Fzh-CN" target="_blank" title="https://formilyjs.org/zh-CN" ref="nofollow noopener noreferrer">formilyjs</a>è§£å†³è¯¥é—®é¢˜</li>
<li>å¯è§†åŒ–é…ç½®ã€‚ç°æœ‰é…ç½®ä¾èµ–ç ”å‘ç¼–å†™ jsonï¼Œå¯¹éæŠ€æœ¯äººå‘˜ä¸å‹å¥½ã€‚è®¾è®¡ä¸€ä¸ªå¯è§†åŒ–é¡µé¢ï¼Œæ”¯æŒå¯¹ç»„ä»¶çš„æ‹–æ‹‰æ‹½å’Œå±æ€§çš„æ›´æ”¹</li>
<li>åŠ ä¸Šç›‘æ§çœ‹æ¿ï¼Œå®æ—¶æŸ¥çœ‹æ•°æ®ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€React-6/Lesson89(2025-12-27)ã€‘React Context è¯¦è§£ï¼šè·¨å±‚çº§ç»„ä»¶é€šä¿¡çš„æœ€ä½³å®è·µğŸ“š]]></title>    <link>https://juejin.cn/post/7603651011979804714</link>    <guid>https://juejin.cn/post/7603651011979804714</guid>    <pubDate>2026-02-08T12:18:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603651011979804714" data-draft-id="7603895839556436031" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€React-6/Lesson89(2025-12-27)ã€‘React Context è¯¦è§£ï¼šè·¨å±‚çº§ç»„ä»¶é€šä¿¡çš„æœ€ä½³å®è·µğŸ“š"/> <meta itemprop="keywords" content="React.js,å‰ç«¯,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-02-08T12:18:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jing_Rainbow"/> <meta itemprop="url" content="https://juejin.cn/user/1285809519198256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€React-6/Lesson89(2025-12-27)ã€‘React Context è¯¦è§£ï¼šè·¨å±‚çº§ç»„ä»¶é€šä¿¡çš„æœ€ä½³å®è·µğŸ“š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1285809519198256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jing_Rainbow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T12:18:00.000Z" title="Sun Feb 08 2026 12:18:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ React ç»„ä»¶é€šä¿¡æ–¹å¼æ¦‚è§ˆ</h2>
<p>åœ¨ React å¼€å‘ä¸­ï¼Œç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’æ˜¯æ ¸å¿ƒé—®é¢˜ã€‚ç›®å‰ä¸»è¦æœ‰å››ç§é€šä¿¡æ–¹å¼ï¼š</p>
<h3 data-id="heading-1">1ï¸âƒ£ çˆ¶å­ç»„ä»¶é€šä¿¡</h3>
<p>è¿™æ˜¯æœ€åŸºç¡€çš„é€šä¿¡æ–¹å¼ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ props å°†æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶ã€‚è¿™ç§æ–¹å¼ç®€å•ç›´æ¥ï¼Œé€‚ç”¨äºå±‚çº§è¾ƒæµ…çš„ç»„ä»¶å…³ç³»ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">{ message }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{message}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">message</span>=<span class="hljs-string">"Hello from Parent"</span> /&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-2">2ï¸âƒ£ å­çˆ¶ç»„ä»¶é€šä¿¡</h3>
<p>å­ç»„ä»¶é€šè¿‡å›è°ƒå‡½æ•°å°†æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶ã€‚çˆ¶ç»„ä»¶å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡ props ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥ä¼ é€’æ•°æ®ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">{ onMessage }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onMessage('Hello from Child')}&gt;å‘é€æ¶ˆæ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMessage</span> = (<span class="hljs-params">msg</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg)
  }
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">onMessage</span>=<span class="hljs-string">{handleMessage}</span> /&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-3">3ï¸âƒ£ å…„å¼Ÿç»„ä»¶é€šä¿¡</h3>
<p>å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„é€šä¿¡é€šå¸¸éœ€è¦é€šè¿‡å…±åŒçš„çˆ¶ç»„ä»¶ä½œä¸ºä¸­è½¬ã€‚çˆ¶ç»„ä»¶ç»´æŠ¤å…±äº«çŠ¶æ€ï¼Œå…„å¼Ÿç»„ä»¶é€šè¿‡ props æ¥æ”¶å’Œä¿®æ”¹è¿™ä¸ªçŠ¶æ€ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">SiblingA</span>(<span class="hljs-params">{ value, onChange }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> onChange(e.target.value)} /&gt;</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">SiblingB</span>(<span class="hljs-params">{ value }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è¾“å…¥çš„å€¼ï¼š{value}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">SiblingA</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setValue}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">SiblingB</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-4">4ï¸âƒ£ è·¨å±‚çº§é€šä¿¡</h3>
<p>å½“ç»„ä»¶å±‚çº§è¾ƒæ·±æ—¶ï¼Œä½¿ç”¨ props ä¸€å±‚å±‚ä¼ é€’æ•°æ®ä¼šå˜å¾—éå¸¸ç¹çã€‚è¿™å°±æ˜¯ Context è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-5">ğŸš€ Context çš„è¯ç”ŸèƒŒæ™¯</h2>
<h3 data-id="heading-6">ç—›ç‚¹åˆ†æ</h3>
<p>åœ¨ä¼ ç»Ÿçš„çˆ¶å­ç»„ä»¶é€šä¿¡ä¸­ï¼Œå¦‚æœéœ€è¦å°†æ•°æ®ä»é¡¶å±‚ç»„ä»¶ä¼ é€’åˆ°æ·±å±‚åµŒå¥—çš„å­ç»„ä»¶ï¼Œå°±å¿…é¡»ç»è¿‡æ¯ä¸€å±‚ä¸­é—´ç»„ä»¶ã€‚è¿™ç§æ–¹å¼å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<p><strong>ä¼ é€’è·¯å¾„è¿‡é•¿</strong>ï¼šæ•°æ®éœ€è¦ç»è¿‡å¤šä¸ªä¸­é—´ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½éœ€è¦æ¥æ”¶å¹¶ä¼ é€’ propsï¼Œå³ä½¿å®ƒä»¬å¹¶ä¸ä½¿ç”¨è¿™äº›æ•°æ®ã€‚</p>
<p><strong>ç»´æŠ¤æˆæœ¬é«˜</strong>ï¼šæ¯æ¬¡ä¿®æ”¹æ•°æ®ç»“æ„æˆ–æ·»åŠ æ–°çš„ propsï¼Œéƒ½éœ€è¦ä¿®æ”¹æ•´æ¡ä¼ é€’é“¾è·¯ä¸Šçš„æ‰€æœ‰ç»„ä»¶ã€‚</p>
<p><strong>ä»£ç å†—ä½™</strong>ï¼šä¸­é—´ç»„ä»¶å……æ»¡äº†ä¸ç›¸å…³çš„ props ä¼ é€’ï¼Œä»£ç å¯è¯»æ€§é™ä½ã€‚</p>
<h3 data-id="heading-7">ç°å®ç±»æ¯”</h3>
<p>è¿™å°±åƒå¤ä»£çš„é©¿ç«™ä¼ é€’åˆ¶åº¦ï¼šçš‡å¸è¦ç»™è¾¹ç–†çš„å°†å†›é€ä¸€å°å¯†ä¿¡ï¼Œå¿…é¡»ç»è¿‡æ²¿é€”çš„æ¯ä¸ªé©¿ç«™ï¼Œæ¯ä¸ªé©¿ç«™éƒ½è¦æ¥æ”¶å¹¶è½¬å‘è¿™å°ä¿¡ï¼Œå³ä½¿é©¿ç«™å®˜å‘˜å¹¶ä¸å…³å¿ƒä¿¡çš„å†…å®¹ã€‚è¿™ç§ä¼ é€’æ–¹å¼æ•ˆç‡ä½ä¸‹ï¼Œè€Œä¸”å®¹æ˜“åœ¨ä¼ é€’è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜ã€‚</p>
<p>å°±åƒã€Šé•¿å®‰çš„è”æã€‹ä¸­æè¿°çš„é‚£æ ·ï¼Œä¸ºäº†å°†æ–°é²œè”æä»å²­å—é€åˆ°é•¿å®‰ï¼Œéœ€è¦ç»è¿‡æ— æ•°é©¿ç«™ï¼Œæ¯ä¸ªé©¿ç«™éƒ½è¦æ¥åŠ›ä¼ é€’ï¼Œæˆæœ¬æé«˜ï¼Œé£é™©å¾ˆå¤§ã€‚</p>
<h2 data-id="heading-8">ğŸ’¡ Context çš„æ ¸å¿ƒæ€æƒ³</h2>
<p>Context æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®çš„æ–¹å¼ï¼Œæ— éœ€é€šè¿‡ props ä¸€å±‚å±‚ä¼ é€’ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<p><strong>æ•°æ®åœ¨æŸ¥æ‰¾çš„ä¸Šä¸‹æ–‡é‡Œ</strong>ï¼šåœ¨æœ€å¤–å±‚ç»„ä»¶æä¾›æ•°æ®ï¼Œä»»ä½•å±‚çº§çš„ç»„ä»¶éƒ½å¯ä»¥ç›´æ¥è®¿é—®è¿™äº›æ•°æ®ã€‚</p>
<p><strong>ä¸»åŠ¨æŸ¥æ‰¾èƒ½åŠ›</strong>ï¼šéœ€è¦æ¶ˆè´¹æ•°æ®çš„ç»„ä»¶æ‹¥æœ‰ä¸»åŠ¨æŸ¥æ‰¾æ•°æ®çš„èƒ½åŠ›ï¼Œè€Œä¸æ˜¯è¢«åŠ¨æ¥æ”¶ã€‚</p>
<p><strong>è§„çŸ©ä¸å˜</strong>ï¼šçˆ¶ç»„ä»¶ï¼ˆå¤–å±‚ç»„ä»¶ï¼‰ä»ç„¶è´Ÿè´£æŒæœ‰å’Œæ”¹å˜æ•°æ®ï¼Œåªæ˜¯ä¼ é€’æ–¹å¼ä»"ä¸€è·¯ä¼ "å˜æˆäº†"å…¨å±€æä¾›"ã€‚</p>
<h2 data-id="heading-9">ğŸ“– Context çš„ä¸‰æ­¥ä½¿ç”¨æ³•</h2>
<h3 data-id="heading-10">ç¬¬ä¸€æ­¥ï¼šåˆ›å»º Context å®¹å™¨</h3>
<p>ä½¿ç”¨ <code>createContext</code> åˆ›å»ºä¸€ä¸ª Context å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯æ•°æ®å®¹å™¨ã€‚å¯ä»¥ä¼ å…¥ä¸€ä¸ªé»˜è®¤å€¼ä½œä¸ºå‚æ•°ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { createContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>)
</code></pre>
<p><code>createContext</code> æ¥å—ä¸€ä¸ªé»˜è®¤å€¼å‚æ•°ï¼Œå½“ç»„ä»¶åœ¨åŒ¹é…çš„ Provider ä¹‹å¤–ä½¿ç”¨ Context æ—¶ï¼Œä¼šä½¿ç”¨è¿™ä¸ªé»˜è®¤å€¼ã€‚</p>
<h3 data-id="heading-11">ç¬¬äºŒæ­¥ï¼šæä¾›æ•°æ®</h3>
<p>ä½¿ç”¨ Context.Provider ç»„ä»¶åŒ…è£¹éœ€è¦å…±äº«æ•°æ®çš„ç»„ä»¶æ ‘ï¼Œé€šè¿‡ value å±æ€§æä¾›æ•°æ®ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Andrew"</span>
  }
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{user}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Page</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span>
  )
}
</code></pre>
<p>Provider ç»„ä»¶æ¥å—ä¸€ä¸ª value å±æ€§ï¼Œè¿™ä¸ªå€¼ä¼šè¢«æ‰€æœ‰æ¶ˆè´¹è¯¥ Context çš„ç»„ä»¶è®¿é—®åˆ°ã€‚Provider å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œå†…å±‚çš„ Provider ä¼šè¦†ç›–å¤–å±‚çš„å€¼ã€‚</p>
<h3 data-id="heading-12">ç¬¬ä¸‰æ­¥ï¼šæ¶ˆè´¹æ•°æ®</h3>
<p>ä½¿ç”¨ <code>useContext</code> Hook åœ¨ç»„ä»¶ä¸­æ¶ˆè´¹ Context æ•°æ®ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../App'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>)
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><code>useContext</code> æ¥å—ä¸€ä¸ª Context å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿”å›è¯¥ Context çš„å½“å‰å€¼ã€‚å½“ Context çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä½¿ç”¨è¯¥ Context çš„ç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ã€‚</p>
<h2 data-id="heading-13">ğŸ¨ å®æˆ˜æ¡ˆä¾‹ï¼šä¸»é¢˜åˆ‡æ¢åº”ç”¨</h2>
<h3 data-id="heading-14">éœ€æ±‚åˆ†æ</h3>
<p>åˆ›å»ºä¸€ä¸ªæ”¯æŒç™½å¤©/å¤œé—´ä¸»é¢˜åˆ‡æ¢çš„åº”ç”¨ï¼Œä¸»é¢˜çŠ¶æ€éœ€è¦åœ¨æ•´ä¸ªåº”ç”¨ä¸­å…±äº«ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„è·¨å±‚çº§é€šä¿¡åœºæ™¯ã€‚</p>
<h3 data-id="heading-15">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-css" lang="css">theme-demo/
â”œâ”€â”€ <span class="hljs-attribute">src</span>/
â”‚   â”œâ”€â”€ App<span class="hljs-selector-class">.jsx</span>
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â””â”€â”€ ThemeContext<span class="hljs-selector-class">.jsx</span>
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">Header</span><span class="hljs-selector-class">.jsx</span>
â”‚   â”‚   â””â”€â”€ <span class="hljs-attribute">Content</span><span class="hljs-selector-class">.jsx</span>
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ Page<span class="hljs-selector-class">.jsx</span>
â”‚   â””â”€â”€ theme<span class="hljs-selector-class">.css</span>
</code></pre>
<h3 data-id="heading-16">åˆ›å»º ThemeContext</h3>
<p>é¦–å…ˆåˆ›å»ºä¸»é¢˜ Contextï¼ŒåŒ…å«ä¸»é¢˜çŠ¶æ€å’Œåˆ‡æ¢ä¸»é¢˜çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { createContext, useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeProvider</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'light'</span>)
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTheme</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setTheme</span>(<span class="hljs-function">(<span class="hljs-params">prevTheme</span>) =&gt;</span> (prevTheme === <span class="hljs-string">'light'</span> ? <span class="hljs-string">'dark'</span> : <span class="hljs-string">'light'</span>))
  }
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-theme'</span>, theme)
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-theme'</span>, theme)
  }, [theme])
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme</span>, <span class="hljs-attr">toggleTheme</span> }}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>å…³é”®ç‚¹è§£æ</strong>ï¼š</p>
<ul>
<li><code>useState</code> ç®¡ç†ä¸»é¢˜çŠ¶æ€ï¼Œåˆå§‹å€¼ä¸º 'light'</li>
<li><code>toggleTheme</code> å‡½æ•°ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼Œç¡®ä¿åŸºäºå‰ä¸€ä¸ªçŠ¶æ€è¿›è¡Œåˆ‡æ¢</li>
<li><code>useEffect</code> ç›‘å¬ä¸»é¢˜å˜åŒ–ï¼ŒåŒæ­¥æ›´æ–° <code>html</code> å’Œ <code>body</code> å…ƒç´ çš„ <code>data-theme</code> å±æ€§</li>
<li><code>ThemeProvider</code> ä½œä¸ºé«˜é˜¶ç»„ä»¶ï¼ŒåŒ…è£¹å­ç»„ä»¶å¹¶æä¾›ä¸»é¢˜ä¸Šä¸‹æ–‡</li>
</ul>
<h3 data-id="heading-17">åœ¨åº”ç”¨ä¸­ä½¿ç”¨ ThemeProvider</h3>
<p>åœ¨åº”ç”¨çš„æ ¹ç»„ä»¶ä¸­ä½¿ç”¨ ThemeProvider åŒ…è£¹æ•´ä¸ªç»„ä»¶æ ‘ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeProvider</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./contexts/ThemeContext'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Page</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/Page'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ThemeProvider</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Page</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProvider</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-18">åœ¨ç»„ä»¶ä¸­æ¶ˆè´¹ä¸»é¢˜æ•°æ®</h3>
<p>åœ¨ Header ç»„ä»¶ä¸­æ¶ˆè´¹ä¸»é¢˜æ•°æ®ï¼Œæ˜¾ç¤ºå½“å‰ä¸»é¢˜å¹¶æä¾›åˆ‡æ¢æŒ‰é’®ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ThemeContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../contexts/ThemeContext'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme, toggleTheme } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>)
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">24</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å½“å‰ä¸»é¢˜ï¼š{theme}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleTheme}</span>&gt;</span>
        åˆ‡æ¢ä¸»é¢˜
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
{
</code></pre>
<p>åœ¨ Page ç»„ä»¶ä¸­ä¹Ÿå¯ä»¥æ¶ˆè´¹ä¸»é¢˜æ•°æ®ï¼Œå®ç°ä¸åŒç»„ä»¶å…±äº«åŒä¸€ä¸»é¢˜çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ThemeContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../contexts/ThemeContext'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/Header'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Content</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/Content'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>)
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">24</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Content</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-19">ğŸ¯ CSS å˜é‡å®ç°ä¸»é¢˜åˆ‡æ¢</h2>
<p>ä½¿ç”¨ CSS å˜é‡ï¼ˆCustom Propertiesï¼‰æ˜¯å®ç°ä¸»é¢˜åˆ‡æ¢çš„ä¼˜é›…æ–¹å¼ã€‚CSS å˜é‡å…è®¸æˆ‘ä»¬åœ¨ä¸åŒçš„ä¸»é¢˜ä¸‹åŠ¨æ€æ”¹å˜æ ·å¼ã€‚</p>
<h3 data-id="heading-20">å®šä¹‰ CSS å˜é‡</h3>
<p>åœ¨ <code>theme.css</code> ä¸­å®šä¹‰ä¸»é¢˜ç›¸å…³çš„ CSS å˜é‡ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--bg-color</span>: pink
  --text-color: <span class="hljs-number">#222</span>
  --primary-color: <span class="hljs-number">#1677ff</span>
}

<span class="hljs-selector-attr">[data-theme=<span class="hljs-string">'dark'</span>]</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#141414</span>
  --text-color: <span class="hljs-number">#f5f5f5</span>
  --primary-color: <span class="hljs-number">#4e8cff</span>
}
</code></pre>
<p><strong>è¯­æ³•è§£æ</strong>ï¼š</p>
<ul>
<li><code>:root</code> é€‰æ‹©å™¨åŒ¹é…æ–‡æ¡£çš„æ ¹å…ƒç´ ï¼Œåœ¨è¿™é‡Œå®šä¹‰å…¨å±€ CSS å˜é‡</li>
<li><code>--bg-color</code>ã€<code>--text-color</code> ç­‰æ˜¯è‡ªå®šä¹‰å±æ€§åï¼Œå¿…é¡»ä»¥ <code>--</code> å¼€å¤´</li>
<li><code>[data-theme='dark']</code> æ˜¯å±æ€§é€‰æ‹©å™¨ï¼ŒåŒ¹é…æ‰€æœ‰ <code>data-theme</code> å±æ€§å€¼ä¸º <code>'dark'</code> çš„å…ƒç´ </li>
<li>åœ¨ä¸åŒçš„é€‰æ‹©å™¨ä¸­é‡æ–°å®šä¹‰å˜é‡å€¼ï¼Œå®ç°ä¸»é¢˜åˆ‡æ¢</li>
</ul>
<h3 data-id="heading-21">ä½¿ç”¨ CSS å˜é‡</h3>
<p>åœ¨æ ·å¼ä¸­ä½¿ç”¨ <code>var()</code> å‡½æ•°å¼•ç”¨ CSS å˜é‡ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>
  background-color: <span class="hljs-built_in">var</span>(--bg-color)
  color: <span class="hljs-built_in">var</span>(--text-color)
  transition: all <span class="hljs-number">0.3s</span>
}

<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>
  background: <span class="hljs-built_in">var</span>(--primary-color)
  color: <span class="hljs-number">#fff</span>
  border: none
  cursor: pointer
}
</code></pre>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><code>var(--bg-color)</code> å¼•ç”¨ä¹‹å‰å®šä¹‰çš„ CSS å˜é‡</li>
<li>å½“ <code>data-theme</code> å±æ€§æ”¹å˜æ—¶ï¼ŒCSS å˜é‡çš„å€¼ä¼šè‡ªåŠ¨æ›´æ–°</li>
<li><code>transition: all 0.3s</code> å®ç°ä¸»é¢˜åˆ‡æ¢çš„å¹³æ»‘è¿‡æ¸¡æ•ˆæœ</li>
</ul>
<h3 data-id="heading-22">JavaScript æ§åˆ¶ CSS å˜é‡</h3>
<p>é€šè¿‡ JavaScript åŠ¨æ€ä¿®æ”¹å…ƒç´ çš„ <code>data-theme</code> å±æ€§ï¼Œè§¦å‘ CSS å˜é‡çš„å˜åŒ–ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-theme'</span>, theme)
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-theme'</span>, theme)
}, [theme])
</code></pre>
<p>å½“ theme çŠ¶æ€å˜åŒ–æ—¶ï¼Œ<code>useEffect</code> ä¼šæ‰§è¡Œï¼Œæ›´æ–° DOM å…ƒç´ çš„å±æ€§ï¼Œä»è€Œè§¦å‘ CSS å˜é‡çš„é‡æ–°è®¡ç®—ã€‚</p>
<h2 data-id="heading-23">ğŸ” Context çš„é«˜çº§ç‰¹æ€§</h2>
<h3 data-id="heading-24">é»˜è®¤å€¼çš„ä½œç”¨</h3>
<p>Context çš„é»˜è®¤å€¼åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨ï¼š</p>
<ol>
<li>ç»„ä»¶åœ¨åŒ¹é…çš„ Provider ä¹‹å¤–ä½¿ç”¨ Context</li>
<li>Provider çš„ value å±æ€§ä¸º undefined</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-string">'é»˜è®¤å€¼'</span>)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Component</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> value = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">MyContext</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{value}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> /&gt;</span></span>
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒComponent ä¼šæ˜¾ç¤º"é»˜è®¤å€¼"ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è¢«ä»»ä½• Provider åŒ…è£¹ã€‚</p>
<h3 data-id="heading-25">Provider åµŒå¥—</h3>
<p>å¤šä¸ª Provider å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œå†…å±‚çš„ Provider ä¼šè¦†ç›–å¤–å±‚çš„å€¼ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-string">'light'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ColorContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-string">'blue'</span>)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>)
  <span class="hljs-keyword">const</span> color = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ColorContext</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ä¸»é¢˜ï¼š{theme}ï¼Œé¢œè‰²ï¼š{color}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"dark"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ColorContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"red"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ColorContext.Provider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>
  )
}
</code></pre>
<p>Child ç»„ä»¶ä¼šæ˜¾ç¤º"ä¸»é¢˜ï¼šdarkï¼Œé¢œè‰²ï¼šred"ã€‚</p>
<h3 data-id="heading-26">Context æ€§èƒ½ä¼˜åŒ–</h3>
<p>å½“ Context çš„å€¼å˜åŒ–æ—¶ï¼Œæ‰€æœ‰æ¶ˆè´¹è¯¥ Context çš„ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œå¯ä»¥ï¼š</p>
<ol>
<li><strong>æ‹†åˆ† Context</strong>ï¼šå°†é¢‘ç¹å˜åŒ–å’Œä¸å¸¸å˜åŒ–çš„æ•°æ®æ‹†åˆ†åˆ°ä¸åŒçš„ Context ä¸­</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'light'</span>)
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{user}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{theme}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span>
  )
}
</code></pre>
<ol start="2">
<li><strong>ä½¿ç”¨ useMemo</strong>ï¼šé¿å…ä¸å¿…è¦çš„å¯¹è±¡é‡æ–°åˆ›å»º</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'light'</span>)
  
  <span class="hljs-keyword">const</span> contextValue = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> ({
    theme,
    <span class="hljs-attr">toggleTheme</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setTheme</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev === <span class="hljs-string">'light'</span> ? <span class="hljs-string">'dark'</span> : <span class="hljs-string">'light'</span>)
  }), [theme])
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{contextValue}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>
  )
}
</code></pre>
<ol start="3">
<li><strong>ä½¿ç”¨ React.memo</strong>ï¼šé¿å…ä¸å¿…è¦çš„ç»„ä»¶é‡æ–°æ¸²æŸ“</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ExpensiveComponent</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">ExpensiveComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ä¸»é¢˜ï¼š{theme}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
})
</code></pre>
<h2 data-id="heading-27">ğŸ“ Context æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-28">1. åˆç†æ‹†åˆ† Context</h3>
<p>ä¸è¦å°†æ‰€æœ‰æ•°æ®éƒ½æ”¾åœ¨ä¸€ä¸ª Context ä¸­ï¼Œåº”è¯¥æ ¹æ®åŠŸèƒ½æ¨¡å—åˆç†æ‹†åˆ†ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LocaleContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>)
</code></pre>
<h3 data-id="heading-29">2. ä½¿ç”¨è‡ªå®šä¹‰ Hook</h3>
<p>å°è£… Context çš„æ¶ˆè´¹é€»è¾‘ï¼Œæä¾›æ›´å‹å¥½çš„ APIã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useTheme</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> context = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>)
  <span class="hljs-keyword">if</span> (!context) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'useTheme å¿…é¡»åœ¨ ThemeProvider å†…éƒ¨ä½¿ç”¨'</span>)
  }
  <span class="hljs-keyword">return</span> context
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Component</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme, toggleTheme } = <span class="hljs-title function_">useTheme</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleTheme}</span>&gt;</span>{theme}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-30">3. æä¾›é»˜è®¤å€¼æˆ–é”™è¯¯å¤„ç†</h3>
<p>ç¡®ä¿ Context çš„ä½¿ç”¨æ˜¯å®‰å…¨çš„ï¼Œæä¾›åˆç†çš„é»˜è®¤å€¼æˆ–é”™è¯¯å¤„ç†ã€‚</p>
<p>ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>)
  <span class="hljs-keyword">if</span> (!user) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'useUser å¿…é¡»åœ¨ UserProvider å†…éƒ¨ä½¿ç”¨'</span>)
  }
  <span class="hljs-keyword">return</span> user
}
</code></pre>
<h3 data-id="heading-31">4. é¿å…è¿‡åº¦ä½¿ç”¨</h3>
<p>Context é€‚åˆç”¨äºå…¨å±€çŠ¶æ€ï¼Œå¦‚ç”¨æˆ·ä¿¡æ¯ã€ä¸»é¢˜ã€è¯­è¨€è®¾ç½®ç­‰ã€‚å¯¹äºå±€éƒ¨çŠ¶æ€ï¼Œä»ç„¶åº”è¯¥ä½¿ç”¨ props æˆ–çŠ¶æ€ç®¡ç†åº“ã€‚</p>
<h3 data-id="heading-32">5. æ–‡æ¡£åŒ– Context</h3>
<p>ä¸º Context æ·»åŠ æ¸…æ™°çš„æ–‡æ¡£è¯´æ˜ï¼ŒåŒ…æ‹¬æä¾›çš„æ•°æ®ç±»å‹å’Œä½¿ç”¨æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">/**
 * ç”¨æˆ·ä¸Šä¸‹æ–‡
 * <span class="hljs-doctag">@type</span> {<span class="hljs-type">React.Context&lt;{
 *   name: string
 *   email: string
 *   role: string
 * </span>}&gt;}
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>)
</code></pre>
<h2 data-id="heading-33">ğŸŒŸ æ€»ç»“</h2>
<p>React Context æ˜¯è§£å†³è·¨å±‚çº§ç»„ä»¶é€šä¿¡çš„å¼ºå¤§å·¥å…·ï¼Œå®ƒæä¾›äº†ä¼˜é›…çš„æ•°æ®å…±äº«æ–¹å¼ï¼Œé¿å…äº† props ä¼ é€’çš„ç¹çã€‚é€šè¿‡åˆç†ä½¿ç”¨ Contextï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>ç®€åŒ–ç»„ä»¶é—´çš„æ•°æ®ä¼ é€’</li>
<li>æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§</li>
<li>å®ç°å…¨å±€çŠ¶æ€ç®¡ç†</li>
<li>æ„å»ºæ›´çµæ´»çš„åº”ç”¨æ¶æ„</li>
</ul>
<p>ç»“åˆ CSS å˜é‡ï¼ŒContext å¯ä»¥è½»æ¾å®ç°ä¸»é¢˜åˆ‡æ¢ã€å›½é™…åŒ–ç­‰å…¨å±€åŠŸèƒ½ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”è¯¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„é€šä¿¡æ–¹å¼ï¼ŒContext æ˜¯å·¥å…·ç®±ä¸­çš„é‡è¦ä¸€å‘˜ï¼Œä½†ä¸æ˜¯å”¯ä¸€çš„è§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3å“åº”å¼è§£æ„æ³¨æ„]]></title>    <link>https://juejin.cn/post/7603674653154344969</link>    <guid>https://juejin.cn/post/7603674653154344969</guid>    <pubDate>2026-02-08T12:34:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603674653154344969" data-draft-id="7603721514203873289" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3å“åº”å¼è§£æ„æ³¨æ„"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-02-08T12:34:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·98245051418"/> <meta itemprop="url" content="https://juejin.cn/user/1725547722057483"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3å“åº”å¼è§£æ„æ³¨æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1725547722057483/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·98245051418
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T12:34:32.000Z" title="Sun Feb 08 2026 12:34:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>reactive</code> çš„å“åº”å¼æ˜¯<strong>æ·±åº¦ç»‘å®š</strong>çš„ï¼ˆé»˜è®¤é€’å½’ä»£ç†æ‰€æœ‰åµŒå¥—å¯¹è±¡ï¼‰ï¼Œç›´æ¥è§£æ„å¤–å±‚å¯¹è±¡å¾—åˆ°çš„åµŒå¥—å¯¹è±¡ï¼Œæœ¬è´¨è¿˜æ˜¯ <code>reactive</code> ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ï¼Œå› æ­¤å®ƒæœ¬èº«çš„å“åº”å¼ä¸ä¼šä¸¢å¤±ï¼›ä½†å¦‚æœå¯¹è¿™ä¸ªåµŒå¥—å¯¹è±¡å†åšè§£æ„ï¼Œå°±ä¼šå›åˆ°ä¹‹å‰çš„é—®é¢˜ â€”â€” è§£æ„å…¶å±æ€§ä¼šä¸¢å¤±å“åº”å¼ã€‚</p>
<h4 data-id="heading-0">ä»£ç ç¤ºä¾‹ï¼ˆæ ¸å¿ƒéªŒè¯ï¼‰</h4>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-comment">// åˆ›å»ºå“åº”å¼å¯¹è±¡ const user = reactive({ name: 'å¼ ä¸‰', age: 20 }) // ç›´æ¥è§£æ„ï¼šä¸¢å¤±å“åº”å¼ const { name, age } = user  å¯¹å±æ€§æ˜¯åŸºæœ¬ç±»å‹æ—¶ä¼šä¸¢å¤±å“åº”å¼è¿™æ—¶éœ€è¦ç”¨toRefsåŒ…è£¹</span>
<span class="hljs-comment">// å¤–å±‚å“åº”å¼å¯¹è±¡ï¼ŒåŒ…å«åµŒå¥—å¯¹è±¡</span>
<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">info</span>: { <span class="hljs-comment">// åµŒå¥—å¯¹è±¡ï¼Œè¢« reactive æ·±åº¦ä»£ç†</span>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>
  },
  <span class="hljs-attr">hobby</span>: [<span class="hljs-string">'ç¯®çƒ'</span>, <span class="hljs-string">'æ¸¸æˆ'</span>] <span class="hljs-comment">// åµŒå¥—æ•°ç»„ï¼ŒåŒæ ·è¢«æ·±åº¦ä»£ç†</span>
})
<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> }) <span class="hljs-comment">// ç”¨ toRefs è§£æ„ï¼šä¿ç•™å“åº”å¼ï¼ˆè½¬ä¸º ref ç±»å‹ï¼‰ const { name, age } = toRefs(user) const changeName = () =&gt; { name.value = 'æå››' // éœ€é€šè¿‡ .value ä¿®æ”¹ï¼ŒåŸå¯¹è±¡ä¼šåŒæ­¥æ›´æ–° console.log(user.name) // è¾“å‡º "æå››" }</span>



ç›´æ¥è§£æ„å¤–å±‚å¯¹è±¡å¾—åˆ°çš„åµŒå¥—å¯¹è±¡
<span class="hljs-comment">// ç›´æ¥è§£æ„å¤–å±‚å¯¹è±¡ï¼šæ‹¿åˆ°åµŒå¥—å¯¹è±¡ info å’Œ hobby</span>
<span class="hljs-keyword">const</span> { info, hobby } = user

<span class="hljs-comment">// åœºæ™¯1ï¼šä¿®æ”¹è§£æ„å‡ºçš„åµŒå¥—å¯¹è±¡çš„å±æ€§ï¼ˆä»æœ‰å“åº”å¼ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeInfo</span> = (<span class="hljs-params"/>) =&gt; {
  info.<span class="hljs-property">name</span> = <span class="hljs-string">'æå››'</span> <span class="hljs-comment">// âœ… æœ‰å“åº”å¼ï¼Œè§†å›¾ä¼šæ›´æ–°</span>
  hobby.<span class="hljs-title function_">push</span>(<span class="hljs-string">'çœ‹ä¹¦'</span>) <span class="hljs-comment">// âœ… æœ‰å“åº”å¼ï¼Œè§†å›¾ä¼šæ›´æ–°</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">info</span>.<span class="hljs-property">name</span>) <span class="hljs-comment">// è¾“å‡º "æå››"ï¼ˆå’ŒåŸå¯¹è±¡åŒæ­¥ï¼‰</span>
}

<span class="hljs-comment">// åœºæ™¯2ï¼šå¯¹åµŒå¥—å¯¹è±¡å†è§£æ„ï¼ˆå±æ€§ä¸¢å¤±å“åº”å¼ï¼‰</span>
<span class="hljs-keyword">const</span> { name, age } = info
<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeName</span> = (<span class="hljs-params"/>) =&gt; {
  name = <span class="hljs-string">'ç‹äº”'</span> <span class="hljs-comment">// âŒ éå“åº”å¼ï¼ŒTS æç¤ºæ— æ³•èµ‹å€¼ï¼Œè§†å›¾æ— å˜åŒ–</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(info.<span class="hljs-property">name</span>) <span class="hljs-comment">// ä»ç„¶æ˜¯ "æå››"</span>
}

<span class="hljs-comment">// åœºæ™¯3ï¼šç›´æ¥æ›¿æ¢æ•´ä¸ªåµŒå¥—å¯¹è±¡ï¼ˆä»æœ‰å“åº”å¼ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">replaceInfo</span> = (<span class="hljs-params"/>) =&gt; {
  info.<span class="hljs-property">age</span> = <span class="hljs-number">25</span> <span class="hljs-comment">// âœ… æ”¹å±æ€§ï¼šå“åº”å¼</span>
  <span class="hljs-comment">// æ³¨æ„ï¼šå¦‚æœç›´æ¥æ›¿æ¢æ•´ä¸ªåµŒå¥—å¯¹è±¡ï¼Œä¹Ÿéœ€è¦é€šè¿‡åŸå¯¹è±¡æˆ–è§£æ„çš„åµŒå¥—å¯¹è±¡æ“ä½œ</span>
  user.<span class="hljs-property">info</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'èµµå…­'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> } <span class="hljs-comment">// âœ… å“åº”å¼</span>
  <span class="hljs-comment">// æˆ– info = { name: 'èµµå…­', age: 30 } âŒ é”™è¯¯ï¼è§£æ„çš„ info æ˜¯å¸¸é‡ï¼Œä¸èƒ½ç›´æ¥èµ‹å€¼</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŸå¯¹è±¡ï¼š{{ user.info.name }} - {{ user.info.age }} | {{ user.hobby }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è§£æ„åµŒå¥—å¯¹è±¡ï¼š{{ info.name }} - {{ info.age }} | {{ hobby }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è§£æ„åµŒå¥—å¯¹è±¡çš„å±æ€§ï¼š{{ name }} - {{ age }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeInfo"</span>&gt;</span>ä¿®æ”¹åµŒå¥—å¯¹è±¡å±æ€§<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeName"</span>&gt;</span>ä¿®æ”¹è§£æ„çš„åµŒå¥—å±æ€§<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"replaceInfo"</span>&gt;</span>æ›¿æ¢åµŒå¥—å¯¹è±¡<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<ul>
<li>ç‚¹å‡»ã€Œä¿®æ”¹åµŒå¥—å¯¹è±¡å±æ€§ã€ï¼šæ‰€æœ‰å…³è”è§†å›¾ï¼ˆåŸå¯¹è±¡ã€è§£æ„çš„åµŒå¥—å¯¹è±¡ï¼‰éƒ½ä¼šæ›´æ–°ï¼›</li>
<li>ç‚¹å‡»ã€Œä¿®æ”¹è§£æ„çš„åµŒå¥—å±æ€§ã€ï¼šè§†å›¾æ— å˜åŒ–ï¼ŒåµŒå¥—å¯¹è±¡çš„å±æ€§ä¹Ÿæ²¡æ”¹ï¼›</li>
<li>ç‚¹å‡»ã€Œæ›¿æ¢åµŒå¥—å¯¹è±¡ã€ï¼šåŸå¯¹è±¡å’Œè§£æ„çš„åµŒå¥—å¯¹è±¡è§†å›¾éƒ½ä¼šæ›´æ–°ã€‚</li>
</ul>
<h3 data-id="heading-1">äºŒã€åŸç†æ‹†è§£ï¼šä¸ºä»€ä¹ˆåµŒå¥—å¯¹è±¡ä»æœ‰å“åº”å¼ï¼Ÿ</h3>
<ol>
<li><code>reactive</code> å¯¹å¯¹è±¡åš<strong>æ·±åº¦ä»£ç†</strong>ï¼šå½“åˆ›å»º <code>reactive({ info: { name: 'å¼ ä¸‰' } })</code> æ—¶ï¼Œä¸ä»…å¤–å±‚å¯¹è±¡è¢« <code>Proxy</code> ä»£ç†ï¼Œå†…éƒ¨çš„ <code>info</code> å¯¹è±¡ä¹Ÿä¼šè¢«é€’å½’è½¬ä¸º <code>Proxy</code> ä»£ç†å¯¹è±¡ï¼›</li>
<li>ç›´æ¥è§£æ„ <code>const { info } = user</code>ï¼šæ‹¿åˆ°çš„ <code>info</code> æ˜¯ <code>reactive</code> ç”Ÿæˆçš„<strong>ä»£ç†å¯¹è±¡æœ¬èº«</strong>ï¼ˆè€ŒéåŸå§‹å€¼ï¼‰ï¼Œå› æ­¤è®¿é—® / ä¿®æ”¹ <code>info.name</code> ä»ä¼šè§¦å‘å“åº”å¼çš„ä¾èµ–æ”¶é›†å’Œæ›´æ–°ï¼›</li>
<li>è§£æ„åµŒå¥—å¯¹è±¡çš„å±æ€§ <code>const { name } = info</code>ï¼šæ‹¿åˆ°çš„æ˜¯ <code>info.name</code> çš„<strong>åŸå§‹å€¼</strong>ï¼ˆå¦‚å­—ç¬¦ä¸² "å¼ ä¸‰"ï¼‰ï¼Œè€Œéä»£ç†å±æ€§ï¼Œå› æ­¤ä¸¢å¤±å“åº”å¼ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åƒæ­ç§¯æœ¨ä¸€æ ·æ€è€ƒï¼šæ•°æ®ç§‘å­¦ä¸­çš„â€œè‡ªä¸‹è€Œä¸Šâ€ä¹‹é“]]></title>    <link>https://juejin.cn/post/7603958579179634688</link>    <guid>https://juejin.cn/post/7603958579179634688</guid>    <pubDate>2026-02-09T01:51:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603958579179634688" data-draft-id="7603699739224686607" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åƒæ­ç§¯æœ¨ä¸€æ ·æ€è€ƒï¼šæ•°æ®ç§‘å­¦ä¸­çš„â€œè‡ªä¸‹è€Œä¸Šâ€ä¹‹é“"/> <meta itemprop="keywords" content="Python,æ•°æ®åˆ†æ,æ•°æ®æŒ–æ˜"/> <meta itemprop="datePublished" content="2026-02-09T01:51:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åƒæ­ç§¯æœ¨ä¸€æ ·æ€è€ƒï¼šæ•°æ®ç§‘å­¦ä¸­çš„â€œè‡ªä¸‹è€Œä¸Šâ€ä¹‹é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T01:51:15.000Z" title="Mon Feb 09 2026 01:51:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘å‡ å¹´ï¼ŒåŸºæœ¬å·²ç»ä¸åšåº”ç”¨ç³»ç»Ÿçš„å¼€å‘äº†ï¼Œä¸»è¦åšä¸€äº›æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ ç›¸å…³çš„åº”ç”¨ï¼ˆä¸šåŠ¡å¤æ‚åº¦ä¸é«˜ï¼‰ï¼Œå› æ­¤ï¼Œå¯¹äºä»¥å‰ç†Ÿæ‚‰çš„å„ç§è½¯ä»¶æ¨¡å¼ä¹Ÿé€æ¸ç”Ÿç–ã€‚</p>
<p>ä»Šå¤©ï¼Œå¶å°”åˆç¿»åˆ°ä¿ç½—Â·æ ¼é›·å„å§†ï¼ˆPaul Grahamï¼‰ä¹‹å‰å†™è¿‡çš„ä¸€ç¯‡å…³äº Lisp å’Œç¼–ç¨‹æœ¬è´¨çš„æ–‡ç« ã€Šè‡ªä¸‹è€Œä¸Šçš„ç¼–ç¨‹ã€‹ï¼Œæ„Ÿè§‰è¿™ç§æºäºé»‘å®¢æ–‡åŒ–çš„â€œè‡ªä¸‹è€Œä¸Šâ€çš„å“²å­¦ï¼Œä¼¼ä¹ä¹Ÿå¯ä»¥æ‹¯æ•‘é™·å…¥â€œæ„å¤§åˆ©é¢æ¡å¼ä»£ç â€æ³¥æ½­çš„æ•°æ®åˆ†æå¸ˆå’Œæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆçš„ã€‚</p>
<p>åœ¨è½¯ä»¶å¼€å‘çš„ä¸–ç•Œé‡Œï¼Œæœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯è¿‡æ—©åœ°å†³å®šäº†ç¨‹åºçš„å½¢çŠ¶ã€‚è€Œåœ¨æ•°æ®ç§‘å­¦é¢†åŸŸï¼Œè¿™ä¸ªé”™è¯¯è¢«æ”¾å¤§äº†å¾ˆå¤šå€ã€‚</p>
<h2 data-id="heading-0">1. ç°çŠ¶ï¼šå¤§å¤šæ•°äººæ˜¯å¦‚ä½•åšæ•°æ®åˆ†æçš„ï¼Ÿ</h2>
<p>å¦‚æœä¸åŠ å¹²é¢„ï¼Œå¤§éƒ¨åˆ†åˆå­¦è€…ï¼ˆç”šè‡³å¾ˆå¤šèµ„æ·±ä»ä¸šè€…ï¼‰åœ¨å¤„ç†æ•°æ®æ—¶ï¼Œé‡‡å–çš„éƒ½æ˜¯ä¸¥æ ¼çš„ **â€œè‡ªä¸Šè€Œä¸‹â€ **æ¨¡å¼ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œè€æ¿äº¤ç»™ä½ ä¸€ä¸ªä»»åŠ¡ï¼šâ€œåˆ†æä¸€ä¸‹ä¸Šä¸ªå­£åº¦25å²ä»¥ä¸‹ç”¨æˆ·çš„å¤è´­ç‡ã€‚â€</p>
<p>ä½ çš„å¤§è„‘ç«‹åˆ»å¼€å§‹å°†å…¶æ‹†è§£ï¼š</p>
<ol>
<li>è¯»å– <code>orders.csv</code>ã€‚</li>
<li>è¿‡æ»¤å‡º <code>date</code> åœ¨ä¸Šä¸ªå­£åº¦çš„è¡Œã€‚</li>
<li>è¿‡æ»¤å‡º <code>age &lt; 25</code> çš„ç”¨æˆ·ã€‚</li>
<li>æŒ‰ç”¨æˆ· <code>ID</code> åˆ†ç»„ï¼Œè®¡ç®—è´­ä¹°æ¬¡æ•°ã€‚</li>
<li>è¾“å‡ºç»“æœã€‚</li>
</ol>
<p>äºæ˜¯ï¼Œä½ æ‰“å¼€äº†ä¸€ä¸ª <code>Jupyter Notebook</code>ï¼Œä»ç¬¬ä¸€ä¸ª <code>Cell</code> å†™åˆ°ç¬¬åä¸ª <code>Cell</code>ã€‚</p>
<p>ä»£ç åƒç€‘å¸ƒä¸€æ ·æµä¸‹æ¥ï¼Œä»»åŠ¡å®Œæˆäº†ï¼Œä½ å¾ˆå¼€å¿ƒã€‚</p>
<p><strong>ä½†è¿™æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></p>
<p>é—®é¢˜åœ¨äºï¼Œè¿™æ˜¯ä¸€ç§ä¸€æ¬¡æ€§çš„ç¼–ç¨‹ã€‚å¦‚æœè€æ¿æ˜å¤©è¯´ï¼šâ€œå†çœ‹çœ‹30å²ä»¥ä¸Šï¼Œæœ€è¿‘åŠå¹´çš„æµå¤±ç‡ã€‚â€ä½ ä¼šæ€ä¹ˆåšï¼Ÿ</p>
<p>ä½ ä¼šæŠŠæ˜¨å¤©çš„ Notebook å¤åˆ¶ä¸€ä»½ï¼Œç„¶åæŠŠé‡Œé¢çš„æ•°å­—æ”¹ä¸€æ”¹ã€‚</p>
<p>ä¹…è€Œä¹…ä¹‹ï¼Œæˆ‘ä»¬çš„ç”µè„‘é‡Œå……æ»¡äº† <code>analysis_v1.ipynb</code>, <code>analysis_final.ipynb</code>, <code>analysis_final_really.ipynb</code>ã€‚æˆ‘ä»¬çš„ä»£ç å˜æˆäº†ä¸ºäº†è§£å†³ç‰¹å®šå•ä¸€é—®é¢˜è€Œå­˜åœ¨çš„â€œè„šæœ¬â€ã€‚</p>
<p>è¿™ä¸æ˜¯åœ¨ <strong>â€œå¼€å‘è½¯ä»¶â€</strong>ï¼Œåªæ˜¯åœ¨ <strong>â€œæ“ä½œè®¡ç®—å™¨â€</strong>ã€‚</p>
<h2 data-id="heading-1">2. ä»€ä¹ˆæ˜¯â€œè‡ªä¸‹è€Œä¸Šâ€çš„è®¾è®¡ï¼Ÿ</h2>
<p>æ ¼é›·å„å§†åœ¨ã€Šè‡ªä¸‹è€Œä¸Šçš„ç¼–ç¨‹ã€‹ä¸­æåˆ°è¿‡ï¼šâ€œ<strong>ä¸å…¶ä¸ºäº†è§£å†³é—®é¢˜è€Œè®¾è®¡ç¨‹åºï¼Œä¸å¦‚è®¾è®¡ä¸€ç§è¯­è¨€æ¥æè¿°è¿™ä¸ªé—®é¢˜ã€‚</strong>â€</p>
<p>åœ¨æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ ä¸­ï¼Œ **â€œè‡ªä¸‹è€Œä¸Šâ€ **æ„å‘³ç€ä½ å…ˆå¿½ç•¥å…·ä½“çš„ä¸šåŠ¡ç›®æ ‡ï¼ˆæ¯”å¦‚è®¡ç®—å¤è´­ç‡ï¼‰ï¼Œè½¬è€Œå…ˆæ„å»ºä¸€å¥—èƒ½è®©ä½ è½»æ¾å¤„ç†æ•°æ®çš„ <strong>â€œåŸºç¡€è¯æ±‡â€</strong>ã€‚</p>
<p>å½“æˆ‘ä»¬é‡‡ç”¨è‡ªä¸Šè€Œä¸‹çš„æ–¹æ³•æ—¶ï¼Œå°±åƒæ˜¯åœ¨ç”¨å¤§çŸ³å¤´å †ç Œé‡‘å­—å¡”ï¼Œæ¯ä¸€å—çŸ³å¤´çš„ä½ç½®éƒ½æ˜¯å›ºå®šçš„ã€‚</p>
<p>å½“æˆ‘ä»¬é‡‡ç”¨è‡ªä¸‹è€Œä¸Šçš„æ–¹æ³•æ—¶ï¼Œåˆ™æ˜¯åœ¨é€šè¿‡é€ ç§¯æœ¨ï¼ˆæˆ–è€…è¯´åˆ›é€ æ–°çš„æ“ä½œç¬¦ï¼‰æ¥æå‡åŸºç¡€è¯­è¨€çš„èƒ½åŠ›ã€‚å½“è¯­è¨€çš„èƒ½åŠ›æå‡åˆ°ä¸€å®šç¨‹åº¦ï¼Œè§£å†³å…·ä½“é—®é¢˜å°±å˜å¾—åƒè¯´è¯ä¸€æ ·ç®€å•ã€‚</p>
<p>åœ¨ <code>Python</code> æˆ– <code>R</code> ä¸­ï¼Œè¿™é€šå¸¸æ„å‘³ç€åˆ©ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ï¼Œå°†é€šç”¨çš„æ•°æ®è½¬æ¢é€»è¾‘æŠ½è±¡æˆç‹¬ç«‹çš„å°å·¥å…·ã€‚</p>
<h2 data-id="heading-2">3. åœºæ™¯æ¨¡æ‹Ÿï¼šè‡ªä¸Šè€Œä¸‹ vs è‡ªä¸‹è€Œä¸Š</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„æœºå™¨å­¦ä¹ é¢„å¤„ç†åœºæ™¯æ¥çœ‹çœ‹ä¸¤è€…çš„åŒºåˆ«ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬è¦å¤„ç†ä¸€ä»½ç”µå•†æ•°æ®ï¼Œç›®çš„æ˜¯ä¸ºæ¨¡å‹å‡†å¤‡ç‰¹å¾ã€‚</p>
<p><strong>åœºæ™¯ï¼šå¤„ç†ç”¨æˆ·è¡Œä¸ºæ—¥å¿—</strong>ã€‚æˆ‘ä»¬éœ€è¦åšä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>å»é™¤å¼‚å¸¸å€¼ï¼ˆæ¯”å¦‚è´­ä¹°é‡‘é¢ä¸ºè´Ÿæ•°ï¼‰ã€‚</li>
<li>å¡«å……ç¼ºå¤±çš„å¹´é¾„æ•°æ®ã€‚</li>
<li>å¯¹åˆ†ç±»æ•°æ®ï¼ˆå¦‚åŸå¸‚ï¼‰è¿›è¡Œç¼–ç ã€‚</li>
</ol>
<h3 data-id="heading-3">3.1. æ¨¡å¼ Aï¼šä¼ ç»Ÿçš„è‡ªä¸Šè€Œä¸‹ï¼ˆè„šæœ¬å¼ï¼‰</h3>
<p>è¿™æ˜¯å…¸å‹çš„â€œé¢æ¡ä»£ç â€ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-comment"># è¯»å–æ•°æ®</span>
df = pd.read_csv(<span class="hljs-string">"data.csv"</span>)

<span class="hljs-comment"># 1. ä¸šåŠ¡é€»è¾‘ç›´æ¥å†™æ­»åœ¨æµç¨‹é‡Œ</span>
df = df[df[<span class="hljs-string">'amount'</span>] &gt; <span class="hljs-number">0</span>] 

<span class="hljs-comment"># 2. å¤„ç†ç¼ºå¤±å€¼</span>
mean_age = df[<span class="hljs-string">'age'</span>].mean()
df[<span class="hljs-string">'age'</span>] = df[<span class="hljs-string">'age'</span>].fillna(mean_age)

<span class="hljs-comment"># 3. ç‹¬çƒ­ç¼–ç </span>
df = pd.get_dummies(df, columns=[<span class="hljs-string">'city'</span>])

<span class="hljs-comment"># å–‚ç»™æ¨¡å‹</span>
model.fit(df)
</code></pre>
<p>è¿™æ®µä»£ç å®Œå…¨æ˜¯ä¸ºäº†â€œè¿™ä¸€ä»½æ•°æ®â€æœåŠ¡çš„ã€‚</p>
<p>å¦‚æœæ¢äº†ä¸€ä»½æ•°æ®ï¼Œæˆ–è€…ä½ æƒ³å°è¯•â€œç”¨ä¸­ä½æ•°å¡«å……â€è€Œä¸æ˜¯â€œå‡å€¼å¡«å……â€ï¼Œä½ å°±å¾—ä¾µå…¥è¿™æ®µä»£ç å»ä¿®æ”¹å®ƒã€‚</p>
<p>è¿™ä½¿å¾—å®éªŒå˜å¾—æå…¶ç—›è‹¦ã€‚</p>
<h3 data-id="heading-4">3.2. æ¨¡å¼ Bï¼šè‡ªä¸‹è€Œä¸Šçš„è®¾è®¡ï¼ˆè¯­è¨€æ„å»ºå¼ï¼‰</h3>
<p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å…ˆä¸çœ‹å…·ä½“çš„æ•°æ®ï¼Œè€Œæ˜¯é—®è‡ªå·±ï¼šæˆ‘ç»å¸¸éœ€è¦åšä»€ä¹ˆï¼Ÿæˆ‘éœ€è¦è¿‡æ»¤ã€å¡«å……ã€ç¼–ç ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬è¦ä¸ºæ­¤åˆ›é€ ä¸€äº›â€œåŠ¨è¯â€ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¬¬ä¸€å±‚ï¼šæ„å»ºåŸºç¡€è¯æ±‡ï¼ˆè¿™äº›æ˜¯é€šç”¨çš„ç§¯æœ¨ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">remove_outliers</span>(<span class="hljs-params">col_name, threshold=<span class="hljs-number">0</span></span>):
    <span class="hljs-string">"""è¿”å›ä¸€ä¸ªè¿‡æ»¤å‡½æ•°"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_filter</span>(<span class="hljs-params">df</span>):
        <span class="hljs-keyword">return</span> df[df[col_name] &gt; threshold]
    <span class="hljs-keyword">return</span> _<span class="hljs-built_in">filter</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">fill_missing</span>(<span class="hljs-params">col_name, strategy=<span class="hljs-string">'mean'</span></span>):
    <span class="hljs-string">"""è¿”å›ä¸€ä¸ªå¡«å……å‡½æ•°"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_filler</span>(<span class="hljs-params">df</span>):
        data = df.copy()
        <span class="hljs-keyword">if</span> strategy == <span class="hljs-string">'mean'</span>:
            val = data[col_name].mean()
        <span class="hljs-keyword">elif</span> strategy == <span class="hljs-string">'median'</span>:
            val = data[col_name].median()
        data[col_name] = data[col_name].fillna(val)
        <span class="hljs-keyword">return</span> data
    <span class="hljs-keyword">return</span> _filler

<span class="hljs-keyword">def</span> <span class="hljs-title function_">encode_categorical</span>(<span class="hljs-params">col_names</span>):
    <span class="hljs-string">"""è¿”å›ä¸€ä¸ªç¼–ç å‡½æ•°"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_encoder</span>(<span class="hljs-params">df</span>):
        <span class="hljs-keyword">return</span> pd.get_dummies(df, columns=col_names)
    <span class="hljs-keyword">return</span> _encoder

<span class="hljs-comment"># ç¬¬äºŒå±‚ï¼šç»„åˆç§¯æœ¨ï¼ˆä½¿ç”¨ç®¡é“ï¼‰</span>
<span class="hljs-comment"># å³ä½¿ä½ æ˜¯åˆå­¦è€…ï¼Œçœ‹åˆ°è¿™é‡Œä¹Ÿèƒ½æ˜ç™½ï¼Œæˆ‘ä»¬åˆ›é€ äº†ä¸€ç§â€œæ–°è¯­è¨€â€</span>
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce

<span class="hljs-keyword">def</span> <span class="hljs-title function_">apply_pipeline</span>(<span class="hljs-params">df, functions</span>):
    <span class="hljs-keyword">return</span> reduce(<span class="hljs-keyword">lambda</span> d, f: f(d), functions, df)

<span class="hljs-comment"># ç¬¬ä¸‰å±‚ï¼šè§£å†³å…·ä½“é—®é¢˜</span>
<span class="hljs-comment"># ä½ çœ‹ï¼Œç°åœ¨çš„ä»£ç è¯»èµ·æ¥å°±åƒæ˜¯è‹±è¯­å¥å­</span>
pipeline = [
    remove_outliers(<span class="hljs-string">'amount'</span>, <span class="hljs-number">0</span>),
    fill_missing(<span class="hljs-string">'age'</span>, strategy=<span class="hljs-string">'mean'</span>),
    encode_categorical([<span class="hljs-string">'city'</span>])
]

clean_df = apply_pipeline(raw_data, pipeline)
</code></pre>
<p>å“ªæ€•ä½ æ²¡å­¦è¿‡é«˜æ·±çš„ç¼–ç¨‹ï¼Œä¹Ÿèƒ½çœ‹å‡ºæ¨¡å¼ B çš„ç¾å¦™ä¹‹å¤„ã€‚</p>
<p>å¦‚æœä¸æƒ³è¦å‡å€¼å¡«å……äº†ï¼Ÿåªéœ€è¦æŠŠ <code>strategy='mean'</code> æ”¹æˆ<code> 'median'</code>ã€‚</p>
<p>å¦‚æœæƒ³ç»™å¦ä¸€ä¸ªæ•°æ®é›†åšåŒæ ·çš„é¢„å¤„ç†ï¼Ÿç›´æ¥å¤ç”¨ <code>pipeline</code> åˆ—è¡¨ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œåº•å±‚çš„å‡½æ•°ï¼ˆç§¯æœ¨ï¼‰ä¸€æ—¦å†™å¥½å¹¶æµ‹è¯•é€šè¿‡ï¼Œä½ å°±å†ä¹Ÿä¸ç”¨å»åŠ¨å®ƒä»¬äº†ã€‚</p>
<p>ä½ çš„æ€è€ƒå±‚çº§ä» **â€œå¦‚ä½•å†™ Pandas ä»£ç â€ **ä¸Šå‡åˆ°äº† <strong>â€œå¦‚ä½•ç»„åˆæ•°æ®å¤„ç†é€»è¾‘â€</strong>ã€‚</p>
<h2 data-id="heading-5">4. è‡ªä¸‹è€Œä¸Šæ¨¡å¼çš„ä¼˜ç¼ºç‚¹</h2>
<p>å½“ç„¶ï¼Œ<strong>è‡ªä¸‹è€Œä¸Š</strong>çš„æ¨¡å¼ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ã€‚</p>
<p>å®ƒçš„<strong>ä¼˜ç‚¹</strong>æ˜¯ï¼š</p>
<ol>
<li><strong>ä»£ç ä¼šè¶Šæ¥è¶ŠçŸ­</strong>ï¼š éšç€ä½ ç§¯ç´¯çš„åŸºç¡€å‡½æ•°ï¼ˆç§¯æœ¨ï¼‰è¶Šæ¥è¶Šå¤šï¼Œè§£å†³æ–°é—®é¢˜æ‰€éœ€çš„ä»£ç è¡Œæ•°ä¼šè¶Šæ¥è¶Šå°‘ã€‚å°±åƒ Lisp ç¨‹åºå‘˜å¸¸è¯´çš„ï¼Œä½ åœ¨è®©è¯­è¨€å‘é—®é¢˜é æ‹¢ã€‚</li>
<li><strong>æå¼ºçš„å¤ç”¨æ€§</strong>ï¼š ä½ çš„ <code>fill_missing</code> å‡½æ•°å¯ä»¥åœ¨ä¸€ç™¾ä¸ªä¸åŒçš„é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œè€Œä¸éœ€è¦é‡å†™ä¸€è¡Œä»£ç ã€‚</li>
<li><strong>æ˜“äºæµ‹è¯•</strong>ï¼š æµ‹è¯•ä¸€ä¸ªå°çš„ã€ç‹¬ç«‹çš„å·¥å…·å‡½æ•°ï¼Œæ¯”æµ‹è¯•ä¸€ä¸ªå‡ ç™¾è¡Œçš„è„šæœ¬è¦å®¹æ˜“å¾—å¤šã€‚</li>
<li><strong>è¡¨è¾¾åŠ›</strong>ï¼š é¡¶å±‚çš„ä»£ç è¯»èµ·æ¥å°±æ˜¯ä¸šåŠ¡é€»è¾‘æœ¬èº«ï¼Œè€Œä¸æ˜¯å¤æ‚çš„è¯­æ³•ç»†èŠ‚ã€‚</li>
</ol>
<p>ä¸ºæ­¤ï¼Œå®ƒçš„çš„<strong>ç¼ºç‚¹</strong>æ˜¯ï¼š</p>
<ol>
<li><strong>åˆæœŸæˆæœ¬é«˜</strong>ï¼š å½“ä½ åªæƒ³ç”»ä¸€æ¡çº¿æ—¶ï¼Œè‡ªä¸‹è€Œä¸Šçš„æ–¹æ³•è¦æ±‚ä½ å…ˆé€ ä¸€æ”¯ç¬”ã€‚å¯¹äºéå¸¸ç®€å•ã€ä¸€æ¬¡æ€§çš„ä»»åŠ¡ï¼Œè¿™å¯èƒ½æ˜¾å¾— <strong>â€œè¿‡åº¦è®¾è®¡â€</strong>ã€‚</li>
<li><strong>æ€ç»´é—¨æ§›</strong>ï¼š åˆå­¦è€…å¾€å¾€ä¹ æƒ¯äºçº¿æ€§æ€ç»´ï¼ˆç¬¬ä¸€æ­¥åšå•¥ï¼Œç¬¬äºŒæ­¥åšå•¥ï¼‰ã€‚è¦å­¦ä¼šæŠ½è±¡å‡ºé€šç”¨çš„æ“ä½œç¬¦ï¼Œéœ€è¦ä¸€å®šçš„è®­ç»ƒå’Œå¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£ã€‚</li>
</ol>
<h2 data-id="heading-6">5. æ€»ç»“</h2>
<p><strong>è‡ªä¸‹è€Œä¸Š</strong>çš„è®¾è®¡æ¨¡å¼ï¼Œæ ¸å¿ƒåœ¨äº<strong>æŠ½è±¡</strong>ã€‚</p>
<p>åœ¨æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ ä¸­ï¼Œè¿™æ„å‘³ç€ä¸è¦æ€»æ˜¯ç›¯ç€çœ¼å‰çš„è¿™ä¸€è¡Œæ•°æ®ï¼Œè€Œæ˜¯å»æ€è€ƒï¼šâ€œæˆ‘è¯¥å¦‚ä½•æ„å»ºä¸€å¥—å·¥å…·ï¼Œè®©è¿™ç±»å‹çš„é—®é¢˜ä»¥åéƒ½ä¸å†æ˜¯é—®é¢˜ï¼Ÿâ€</p>
<p>å½“ä½ å¼€å§‹è¿™æ ·æ€è€ƒæ—¶ï¼Œå°±ä¸ä»…æ˜¯åœ¨åšåˆ†æï¼Œè€Œæ˜¯åœ¨åƒé»‘å®¢ä¸€æ ·åˆ›é€ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«â€œç„å­¦â€UIï¼šä»â€œåˆ ä»£ç ç¢°è¿æ°”â€åˆ°â€œæ§åˆ¶ BFC ç»“ç•Œâ€]]></title>    <link>https://juejin.cn/post/7604037348607459366</link>    <guid>https://juejin.cn/post/7604037348607459366</guid>    <pubDate>2026-02-08T12:56:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604037348607459366" data-draft-id="7604012106153558062" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«â€œç„å­¦â€UIï¼šä»â€œåˆ ä»£ç ç¢°è¿æ°”â€åˆ°â€œæ§åˆ¶ BFC ç»“ç•Œâ€"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-02-08T12:56:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="im_AMBER"/> <meta itemprop="url" content="https://juejin.cn/user/370979729333004"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«â€œç„å­¦â€UIï¼šä»â€œåˆ ä»£ç ç¢°è¿æ°”â€åˆ°â€œæ§åˆ¶ BFC ç»“ç•Œâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/370979729333004/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    im_AMBER
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T12:56:05.000Z" title="Sun Feb 08 2026 12:56:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Â åºï¼šå‘Šåˆ«â€œç„å­¦â€UIÂ </h2>
<p>ä¹‹å‰æˆ‘è®¤ä¸ºUIæ˜¯ä¸éœ€è¦è´¹å¿ƒå†™çš„ï¼Œå› æ­¤ä¹Ÿå¿½ç•¥äº†è®¸å¤šæœ‰å…³CSSç­‰æ ·å¼çš„ç»†èŠ‚ï¼Œç°åœ¨çœ‹æ¥å®åœ¨æ˜¯åŸºç¡€ä¸ç‰¢åœ°åŠ¨å±±æ‘‡ï¼Œè¿™æ˜¯é”™è¯¯çš„â€”â€”åªä¼šå°† UI éœ€æ±‚ç›´æ¥ä¸¢ç»™ AIï¼Œåƒå¼€ç›²ç›’ä¸€æ ·ç­‰å¾…ç»“æœï¼Œå…¨éƒ½äº¤ç»™äº†AIâ€œå¤–åŒ…â€ã€‚</p>
<p>å½“å¸ƒå±€é”™ä½æ—¶ï¼Œæˆ‘å¾€å¾€é€šè¿‡è§†è§‰æè¿°å¢åŠ æç¤ºè¯æ¥â€œç¢°è¿æ°”â€ï¼ŒæŠŠAIå†™çš„ä»£ç åˆä¸¢ç»™AIæ”¹ï¼Œç»“æœå´å¸¸å¯¼è‡´ AI ä¸ºäº†è°ƒæ•´ä¸€ä¸ªå±€éƒ¨å‚æ•°è€Œé‡å†™æ•´ä¸ªæ–‡ä»¶ï¼Œé€»è¾‘è¶Šæ”¹è¶Šä¹±ï¼Œè‡ªç›¸çŸ›ç›¾ï¼Œåˆ°å¤„éƒ½æ˜¯å†²çªçš„è¡¥ä¸......</p>
<p><strong>CSS å¸ƒå±€ä¸æ˜¯æ ·å¼çš„å †ç Œï¼Œè€Œæ˜¯ç‰©ç†é€»è¾‘çš„æ„å»ºã€‚</strong></p>
<p>ä»Šå¤©ï¼Œæˆ‘é€šè¿‡å¯¹å·²æœ‰çš„åšå®¢ã€ç½‘é¡µç­‰é¡µé¢çš„â€œç ´åæ€§å®éªŒâ€å’Œ F12 æ·±åº¦è°ƒè¯•ï¼Œæ„è¯†åˆ° <strong>UI å¼€å‘çš„æ ¸å¿ƒä¸åœ¨äºå…·ä½“çš„æ ·å¼ä»£ç ï¼Œè€Œåœ¨äºå¯¹å®¹å™¨çº¦æŸä¸å¸ƒå±€ç¯å¢ƒçš„æŒæ§ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ æº¢å‡ºä¸çº¦æŸï¼šæ»šåŠ¨çš„ç‰©ç†æœ¬è´¨</h2>
<h3 data-id="heading-2">1. BUG ï¼š é¢„è§ˆç»„ä»¶ä¸èƒ½æ»šåŠ¨æŸ¥çœ‹å…¨éƒ¨å†…å®¹</h3>
<p>åœ¨å¼€å‘æ–‡æ¡£é¢„è§ˆç»„ä»¶æ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªå…¸å‹é—®é¢˜ï¼š</p>
<p><strong>æ–‡æœ¬å†…å®¹è¢«æˆªæ–­ï¼Œåªèƒ½æ˜¾ç¤ºä¸€åŠï¼Œä¸”æ²¡æœ‰æ»šåŠ¨æ¡ã€‚ä¸æ˜¯ç†æƒ³çš„å¯ä»¥æ»šåŠ¨çš„é¢„è§ˆæŸ¥çœ‹çš„çŠ¶æ€ã€‚</strong> ä¸­é—´çš„å†…å®¹åŒºåŸŸæº¢å‡ºï¼ˆOverflowï¼‰ä½†æ²¡æœ‰è§¦å‘æ»šåŠ¨æœºåˆ¶ã€‚</p>
<h3 data-id="heading-3">2. ä»â€œæ— é™å¢é•¿â€åˆ°â€œè¾¹ç•Œæ„è¯†â€</h3>
<p><strong>åœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼Œå—çº§å®¹å™¨éµå¾ªå†…å®¹æµå‘ã€‚</strong></p>
<p>å¦‚æœçˆ¶å®¹å™¨æ²¡æœ‰è®¾å®šæ˜ç¡®çš„é«˜åº¦ï¼ˆHeightï¼‰ï¼Œå®ƒä¼šéšç€å†…å®¹æ— é™å»¶ä¼¸ã€‚</p>
<p><strong>æµè§ˆå™¨è®¤ä¸ºå®¹å™¨é«˜åº¦ç­‰äºå†…å®¹é«˜åº¦ï¼Œå› æ­¤ä¸å­˜åœ¨â€œæº¢å‡ºâ€ï¼Œè‡ªç„¶ä¸ä¼šè§¦å‘æ»šåŠ¨æ¡ã€‚</strong></p>
<p><strong>æˆ‘çš„ä¿®å¤è·¯å¾„</strong>ï¼šä¸ºçˆ¶å®¹å™¨æ˜¾å¼å£°æ˜é«˜åº¦è¾¹ç•Œï¼ˆå¦‚ <code>max-h-[90vh]</code> æˆ– <code>h-[500px]</code>ï¼‰ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Foverflow" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Reference/Properties/overflow" target="_blank" ref="nofollow noopener noreferrer">overflow - CSSï¼šå±‚å æ ·å¼è¡¨ | MDN</a></p>
<blockquote>
<h4 data-id="heading-4">æº¢å‡ºå¤„ç† (Overflow)</h4>
<p><strong>å®˜æ–¹å®šä¹‰</strong>ï¼š<code>overflow</code> å±æ€§æŒ‡å®šå¦‚æœå†…å®¹æº¢å‡ºä¸€ä¸ªå…ƒç´ çš„æ¡†ï¼ˆå…¶å†…å®¹åŒºã€å†…è¾¹è·åŒºæˆ–è¾¹æ¡†åŒºï¼‰æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
<p><strong>æ·±åº¦ç†è§£</strong>ï¼šæ»šåŠ¨ä¸æ˜¯å†…å®¹çš„å±æ€§ï¼Œè€Œæ˜¯å†…å®¹ä¸å®¹å™¨è¾¹ç•Œçš„<strong>å†²çª</strong>ã€‚å¿…é¡»å…ˆæœ‰â€œå¢™â€ï¼ˆçº¦æŸï¼‰ï¼Œæº¢å‡ºæ‰æœ‰æ„ä¹‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">äºŒã€ Flex å¸ƒå±€ï¼šç¯å¢ƒå†³å®šå±æ€§</h2>
<h3 data-id="heading-6">1. æƒåŠ›ç­‰çº§ï¼šä¸ºä»€ä¹ˆ <code>flex: 1</code> ä¼šå¤±æ•ˆï¼Ÿ</h3>
<p>åœ¨åšå®¢é¡µé¢å®æˆ˜ä¸­ï¼Œæˆ‘æ›¾å°è¯•å¼ºè¡Œåœ¨å­å…ƒç´ å†™å…¥ <code>flex: 1</code> ä»¥æœŸæœ›å®ƒå¡«æ»¡å‰©ä½™ç©ºé—´ï¼Œä½†åœ¨æµè§ˆå™¨ F12 ä¸­ï¼Œè¯¥å±æ€§æ˜¾ç¤ºä¸ºç°è‰²ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83e14f7d1dd3421d8be17ac9c01684d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1fQU1CRVI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771160168&amp;x-signature=cZf8y9xXhRqmR%2Fvv8PuPBCgG898%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<ul>
<li><strong>å‘ç°</strong>ï¼šå­å…ƒç´ å¯¹ç©ºé—´çš„åˆ†é…æƒï¼ˆFlex item propertiesï¼‰å¿…é¡»å»ºç«‹åœ¨çˆ¶çº§å¼€å¯äº† <strong>FFCï¼ˆFlex Formatting Contextï¼‰</strong> çš„å‰æä¸‹ã€‚</li>
<li><strong>CSS é¡µé¢æ˜¯ç”±ä¸€ä¸ªä¸ªâ€œä¸Šä¸‹æ–‡ï¼ˆContextï¼‰â€ç»„æˆçš„ã€‚</strong> <code>display: flex</code> <strong>å¼€å¯äº† FFCï¼Œ<code>overflow: auto</code> å¼€å¯äº† BFCã€‚</strong> ä¹‹æ‰€ä»¥åœ¨ F12 é‡Œ <code>flex: 1</code> æ˜¯ç°è‰²çš„ï¼Œå°±æ˜¯å› ä¸ºæˆ‘è¯•å›¾åœ¨â€œæ™®é€šæ–‡æ¡£æµâ€é‡Œè¿è¡Œâ€œå¼¹æ€§åˆ†é…åè®®â€ï¼Œè¿™å±äº<strong>åè®®ä¸åŒ¹é…</strong>ã€‚</li>
<li><strong>å¦‚æœçˆ¶çº§ä¸æ˜¯ <code>display: flex</code>ï¼Œå­å…ƒç´ çš„å¼¹æ€§å±æ€§å°†ç”±äºç¼ºä¹ä¸Šä¸‹æ–‡ç¯å¢ƒè€Œæ— æ³•è¢«å¼•æ“è§£æã€‚</strong></li>
</ul>
<h3 data-id="heading-7">2. åŠ¨æ€åˆ†é…ï¼šå¯¹è¯åŒºçš„â€œé“ºæ»¡â€é€»è¾‘</h3>
<p>åœ¨è®¾è®¡ Sidebar + å¯¹è¯åŒºçš„å¸ƒå±€( ä¾‹å¦‚è¿™ç§å·¦å³åˆ†æ çš„é¡µé¢ )ä¸­ï¼ŒAI å†™ UI å¸¸ç»™å‡ºå›ºå®šé«˜åº¦ï¼Œå¯¼è‡´å³ä¾§å¯¹è¯åŒºæ— æ³•éšçª—å£è‡ªé€‚åº”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3ffa67f80d44bea8ae84e1de49e18a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1fQU1CRVI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771160168&amp;x-signature=Occq3rnPQjZGGt%2FAKHL8SbAjKqY%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/522c82098ff84778951332cbde553e8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1fQU1CRVI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771160168&amp;x-signature=idd%2Fdap2YiRpEow5eECrRmtwOmM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<ul>
<li><strong>é€»è¾‘é‡æ„</strong>ï¼šåˆ æ‰æ­»é«˜åº¦ï¼Œå°†å¯¹è¯åŒºè®¾ä¸º <code>flex-1</code>ã€‚</li>
<li>åœ¨ Flex çºµå‘å¸ƒå±€ä¸­ï¼Œè¿™æ„å‘³ç€å®ƒä¼šâ€œå¸æ”¶â€æ‰çˆ¶å®¹å™¨ä¸­é™¤å» Header å’Œ Footer ä¹‹å¤–çš„æ‰€æœ‰å‰©ä½™ç©ºé—´ã€‚</li>
</ul>
<h3 data-id="heading-8">3.å®ˆåœ°ç›˜ï¼š <code>min-h-0</code></h3>
<p>åœ¨ Flex å®¹å™¨ä¸­ï¼Œå­å…ƒç´ çš„ <code>min-height</code> é»˜è®¤å€¼æ˜¯ <code>auto</code>ã€‚</p>
<p>è¿™æ„å‘³ç€å†…å®¹ä¼šå€¾å‘äºæ’‘å¼€å®¹å™¨ã€‚</p>
<p>å¦‚æœä¸æ‰‹åŠ¨è®¾ç½® <code>min-h-0</code>ï¼Œå½“å†…å®¹éå¸¸å¤šæ—¶ï¼Œå³ä½¿ä½ è®¾ç½®äº† <code>flex-1</code>ï¼Œå®¹å™¨ä¹Ÿå¯èƒ½è¢«å†…å®¹â€œæ’‘çˆ†â€è€Œä¸ä¼šå‡ºç°å†…éƒ¨æ»šåŠ¨ã€‚</p>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€ ç©ºé—´éš”ç¦»ï¼šBFC ç»“ç•Œä¸ç»å¯¹å®šä½</h2>
<h3 data-id="heading-10">1. BFCï¼šç‹¬ç«‹çš„æ¸²æŸ“è‡ªæ²»åŒº</h3>
<p>é€šè¿‡ F12 è§‚å¯Ÿç½‘é¡µï¼Œæˆ‘æ·±åˆ»ç†è§£äº† BFC çš„é‡è¦æ€§ã€‚</p>
<blockquote>
<h4 data-id="heading-11">BFC (Block Formatting Context)</h4>
<p><strong>å®˜æ–¹å®šä¹‰</strong>ï¼šå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚å®ƒæ˜¯ Web é¡µé¢çš„å¯è§†åŒ– CSS æ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å¸ƒå±€è¿‡ç¨‹ä¸­ç”Ÿæˆå—çº§ç›’å­çš„åŒºåŸŸã€‚</p>
<p><strong>å·¥ç¨‹å«ä¹‰</strong>ï¼š</p>
<ul>
<li><strong>å†…éƒ¨è‡ªæ²»</strong>ï¼šBFC å†…éƒ¨çš„å…ƒç´ å¸ƒå±€ä¸ä¼šå½±å“åˆ°å¤–éƒ¨ï¼Œåä¹‹äº¦ç„¶ã€‚</li>
<li><strong>åŒ…å«æµ®åŠ¨</strong>ï¼šBFC å®¹å™¨å¯ä»¥è‡ªåŠ¨è®¡ç®—å†…éƒ¨æµ®åŠ¨å…ƒç´ çš„é«˜åº¦ï¼ˆè§£å†³é«˜åº¦å¡Œé™·ï¼‰ã€‚</li>
<li><strong>æ¶ˆé™¤é‡å </strong>ï¼šBFC åŒºåŸŸä¸ä¼šä¸æµ®åŠ¨ï¼ˆfloatï¼‰ç›’å­é‡å ã€‚</li>
</ul>
</blockquote>
<p>åœ¨å·¥ç¨‹å®è·µä¸­ï¼Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„è§¦å‘ BFC çš„æ–¹å¼æ˜¯è®¾ç½® <code>overflow: hidden</code>ã€<code>display: flex</code> æˆ– <code>display: grid</code>ã€‚</p>
<p>è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆå½“æˆ‘ä¸ºäº†è§£å†³æº¢å‡ºï¼ˆOverflowï¼‰è€Œç»™çˆ¶å®¹å™¨åŠ äº†é«˜åº¦é™åˆ¶å’Œæ»šåŠ¨å±æ€§æ—¶ï¼Œ<strong>å…¶å®ä¹Ÿé¡ºä¾¿å¼€å¯äº† BFCï¼Œä»è€Œè§£å†³äº†å†…éƒ¨å¸ƒå±€çš„ä¸€äº›å¥‡æ€ªåç§»ã€‚</strong></p>
<h3 data-id="heading-12">2. Position Absoluteï¼šè„±ç¦»æ–‡æ¡£æµçš„å‚ç…§ç³»</h3>
<p><code>absolute</code> çš„å®šä½å¹¶ä¸æ˜¯ç»å¯¹çš„åæ ‡ï¼Œå®ƒæ˜¯ä¸€ç§ <strong>â€œå¯»æ‰¾ç¥–å…ˆâ€</strong> çš„è¡Œä¸ºã€‚</p>
<ul>
<li><strong>å®ƒè„±ç¦»äº†å¸¸è§„æ–‡æ¡£æµï¼ˆä¸å ä½ï¼‰ï¼Œåƒå¹½çµèˆ¬æ¼‚æµ®ã€‚</strong> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85abec2294a34a1c94109d9358556be9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1fQU1CRVI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1771160168&amp;x-signature=V2aDQVz9ZGdRaddE%2BOE85w35Blw%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</li>
<li>å®ƒçš„åæ ‡å‚ç…§ç³»æ˜¯æœ€è¿‘çš„ä¸€ä¸ª <code>position</code> é <code>static</code> çš„ç¥–å…ˆå…ƒç´ ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œå®ƒä¼šä¸€ç›´å›æº¯åˆ°æ ¹èŠ‚ç‚¹ã€‚<strong>é€šå¸¸æˆ‘ä»¬æŠŠçˆ¶çº§è®¾ä¸º <code>relative</code>ï¼Œå°±æ˜¯ä¸ºäº†ç»™ <code>absolute</code> çš„å­å…ƒç´ ç«‹ä¸€ä¸ªâ€œå‚ç…§æ¡©â€ï¼Œé˜²æ­¢å®ƒä¸€è·¯å›æº¯åˆ° <code>body</code> å¯¼è‡´â€œå¹½çµâ€ä¹±é£˜ã€‚</strong></li>
</ul>
<hr/>
<h2 data-id="heading-13">å››ã€ å°ç»“</h2>
<p>ä¼šç”¨AIå¼€å‘çš„å‰ææ˜¯èƒ½çœ‹æ‡‚AIçš„ä»£ç ï¼Œè€Œä¸æ˜¯æŠŠæ‰€æœ‰éƒ½åªæ˜¯äº¤ç»™AIä»£åŠ³ã€‚</p>
<p><strong>ç”¨AIä»£æ›¿æ€è€ƒçš„å¼€å‘è€…åªä¼šè¢«AIå–ä»£ï¼Œè¿™æ˜¯æˆ‘å¯¹è‡ªå·±çš„è­¦é†’ã€‚</strong></p>
<p><strong>AI åªèƒ½æä¾›æ ·å¼çš„ç»“æœï¼Œä½†æ— æ³•æ„ŸçŸ¥å®¹å™¨é—´çš„å‹åŠ›ã€‚</strong></p>
<ul>
<li><strong>å½“å†…å®¹æº¢å‡ºæ—¶</strong>ï¼ŒAI ä¼šç›²ç›®å¢åŠ  <code>h-full</code>ï¼Œä½†å®ƒä¸çŸ¥é“è¿™ä¼šå¯¼è‡´å®¹å™¨çªç ´çˆ¶çº§çš„ç‰©ç†è¾¹ç•Œã€‚</li>
<li><strong>å½“å¸ƒå±€é”™ä½æ—¶</strong>ï¼ŒAI ä¼šå †ç Œ <code>!important</code>ï¼Œä½†å®ƒä¸çŸ¥é“è¿™ç ´åäº† CSS çš„æƒé‡ä¼˜å…ˆçº§ã€‚</li>
</ul>
<p>åªæœ‰ç†è§£äº† <strong>â€œå°é—­æ€§åŸç†â€</strong> å’Œ <strong>â€œç¯å¢ƒå†³å®šå±æ€§â€</strong> ï¼Œä½ æ‰èƒ½åœ¨ AI ç»™å‡ºé”™è¯¯è¡¥ä¸æ—¶ï¼Œä¸€çœ¼çœ‹å‡ºé‚£ä¸ªå¯¼è‡´å´©ç›˜çš„â€œè™šå‡çº¦æŸâ€ã€‚</p>
<p>æˆ‘æƒ³ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œå¼€å‘çš„æ€è€ƒæ˜¯æœ€çè´µçš„ï¼Œå†™ä»£ç åªæ˜¯æŠŠæ€è€ƒè½åœ°çš„æ–¹å¼ã€‚AIå…¶å®ä¹Ÿè®¸åªæ˜¯ä¸€ä¸ªæŠŠè„‘å­é‡Œçš„æƒ³æ³•å¸®å¿™å†™å‡ºæ¥ï¼Œæˆ–è€…å¸®å¿™æä¾›æ€è·¯ï¼Œè€Œä¸æ˜¯ä»£æ›¿å¼€å‘è€…çš„è„‘å­ã€‚</p>
<h3 data-id="heading-14">è¿™æ¬¡è§£å†³æ»šåŠ¨é—®é¢˜çš„æ ¸å¿ƒé€»è¾‘ï¼š</h3>
<ul>
<li><strong>å°é—­æ€§åŸç†</strong>ï¼šä¸€ä¸ªå®¹å™¨å¦‚æœä¸â€œå°é¡¶â€ï¼ˆæ²¡å†™ <code>h-full</code> æˆ– <code>max-h</code>ï¼‰ï¼Œå®ƒå°±æ˜¯æ— é™é«˜çš„ã€‚<strong>æ— é™é«˜çš„ä¸œè¥¿æ°¸è¿œä¸ä¼šæ»šåŠ¨ã€‚</strong></li>
<li><strong>åˆ†é…æ³•åˆ™ï¼ˆFlexboxï¼‰</strong> ï¼š<code>flex-1</code> æ˜¯â€œæŠ¢åœ°ç›˜â€ï¼Œè€Œ <code>min-h-0</code> æ˜¯â€œå®ˆåœ°ç›˜â€ã€‚å¦‚æœæ²¡æœ‰ <code>min-h-0</code>ï¼Œå†…å®¹ä¼šæ’‘çˆ†å¸ƒå±€ã€‚</li>
<li><strong>BFCï¼ˆå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰</strong> ï¼šæœ¬è´¨ä¸Šå°±æ˜¯ç»™å®¹å™¨åˆ’äº†ä¸€å—â€œè‡ªæ²»åŒºâ€ï¼Œé‡Œé¢çš„ä¸œè¥¿æ€ä¹ˆæ’ï¼Œä¸å½±å“å¤–é¢ã€‚</li>
</ul>
<h3 data-id="heading-15">å®æˆ˜æ’æŸ¥æµï¼Œå­¦ä¼šç”¨æµè§ˆå™¨è°ƒè¯•ï¼š</h3>
<ul>
<li><strong>F12 è°ƒè¯•</strong>ï¼šæ‰‹åŠ¨è®¾ç½®èƒŒæ™¯è‰²ç­‰ï¼Œåœ¨dev toolsé‡Œé¢å¤§èƒ†è°ƒè¯•ï¼Œè¿½æº¯çˆ¶å­å…ƒç´ ã€‚</li>
<li><strong>Computed è®¡ç®—å€¼</strong>ï¼šä¸è¦åªçœ‹å†™çš„ CSSï¼Œè¦çœ‹æµè§ˆå™¨æœ€ç»ˆâ€œç®—å‡ºæ¥â€çš„é«˜å®½ã€‚</li>
</ul>
<p><strong>é™äºä¸ªäººç»éªŒï¼Œæ–‡ä¸­è‹¥æœ‰ç–æ¼ï¼Œè¿˜è¯·ä¸åèµæ•™ã€‚</strong></p>
<h2 data-id="heading-16">å‚è€ƒæ–‡çŒ®</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FGuides%2FDisplay%2FBlock_formatting_context" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Guides/Display/Block_formatting_context" target="_blank" ref="nofollow noopener noreferrer">åŒºå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ - CSSï¼šå±‚å æ ·å¼è¡¨ | MDN</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FLearn_web_development%2FCore%2FStyling_basics%2FBox_model" title="https://developer.mozilla.org/zh-CN/docs/Learn_web_development/Core/Styling_basics/Box_model" target="_blank" ref="nofollow noopener noreferrer">ç›’æ¨¡å‹ - å­¦ä¹  Web å¼€å‘ | MDN</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.radix-ui.com%2Fprimitives%2Fdocs%2Fcomponents%2Fscroll-area" title="https://www.radix-ui.com/primitives/docs/components/scroll-area" target="_blank" ref="nofollow noopener noreferrer">Scroll Area â€“ Radix Primitives</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fdevtools%2Fcss%3Fhl%3Dzh-cn" title="https://developer.chrome.com/docs/devtools/css?hl=zh-cn" target="_blank" ref="nofollow noopener noreferrer">æŸ¥çœ‹å’Œæ›´æ”¹ CSS Â |Â  Chrome DevTools Â |Â  Chrome for Developers</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2Fdocs%2Fheight" title="https://tailwindcss.com/docs/height" target="_blank" ref="nofollow noopener noreferrer">height - Sizing - Tailwind CSS</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2Fdocs%2Fadding-custom-styles" title="https://tailwindcss.com/docs/adding-custom-styles" target="_blank" ref="nofollow noopener noreferrer">Adding custom styles - Core concepts - Tailwind CSS</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FLearn_web_development%2FCore%2FCSS_layout%2FFlexbox" title="https://developer.mozilla.org/zh-CN/docs/Learn_web_development/Core/CSS_layout/Flexbox" target="_blank" ref="nofollow noopener noreferrer">å¼¹æ€§ç›’å­ - å­¦ä¹  Web å¼€å‘ | MDN</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2Fdocs%2Fflex-grow" title="https://tailwindcss.com/docs/flex-grow" target="_blank" ref="nofollow noopener noreferrer">flex-grow - Flexbox &amp; Grid - Tailwind CSS</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.react.dev%2Flearn%2Fpassing-props-to-a-component" title="https://zh-hans.react.dev/learn/passing-props-to-a-component" target="_blank" ref="nofollow noopener noreferrer">å°† Props ä¼ é€’ç»™ç»„ä»¶ â€“ React ä¸­æ–‡æ–‡æ¡£</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2FDestructuring" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring" target="_blank" ref="nofollow noopener noreferrer">è§£æ„ - JavaScript | MDN</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FFunctions%2FArrow_functions" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" ref="nofollow noopener noreferrer">ç®­å¤´å‡½æ•°è¡¨è¾¾å¼ - JavaScript | MDN</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FGuide%2FClosures" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Closures" target="_blank" ref="nofollow noopener noreferrer">é—­åŒ… - JavaScript | MDN</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fdisplay" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Reference/Properties/display" target="_blank" ref="nofollow noopener noreferrer">display - CSSï¼šå±‚å æ ·å¼è¡¨ | MDN</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FGuides%2FDisplay%2FFormatting_contexts" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Guides/Display/Formatting_contexts" target="_blank" ref="nofollow noopener noreferrer">æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ç®€ä»‹ - CSSï¼šå±‚å æ ·å¼è¡¨ | MDN</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2Fdocs%2Fflex-basis" title="https://tailwindcss.com/docs/flex-basis" target="_blank" ref="nofollow noopener noreferrer">flex-basis - Flexbox &amp; Grid - Tailwind CSS</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FGuides%2FDisplay%2FIn_flow_and_out_of_flow" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Guides/Display/In_flow_and_out_of_flow" target="_blank" ref="nofollow noopener noreferrer">åº”ç”¨æˆ–è„±ç¦»æµå¼å¸ƒå±€ - CSSï¼šå±‚å æ ·å¼è¡¨ | MDN</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2FCSS2%2Fvisuren.html%23normal-flow" title="https://www.w3.org/TR/CSS2/visuren.html#normal-flow" target="_blank" ref="nofollow noopener noreferrer">Visual formatting model</a></p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºå…¨æ ˆAIåº”ç”¨ï¼šé›†æˆOllamaå¼€æºå¤§æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7603699739223883791</link>    <guid>https://juejin.cn/post/7603699739223883791</guid>    <pubDate>2026-02-08T12:59:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603699739223883791" data-draft-id="7603677143215013903" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºå…¨æ ˆAIåº”ç”¨ï¼šé›†æˆOllamaå¼€æºå¤§æ¨¡å‹"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,Ollama"/> <meta itemprop="datePublished" content="2026-02-08T12:59:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lIIIllIlIllIIl"/> <meta itemprop="url" content="https://juejin.cn/user/793196846923641"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºå…¨æ ˆAIåº”ç”¨ï¼šé›†æˆOllamaå¼€æºå¤§æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/793196846923641/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lIIIllIlIllIIl
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T12:59:43.000Z" title="Sun Feb 08 2026 12:59:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨AIæŠ€æœ¯è¿…çŒ›å‘å±•çš„ä»Šå¤©ï¼Œå¼€æºå¤§æ¨¡å‹å¦‚ DeepSeek ç³»åˆ—ä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§å·¥å…·ï¼Œè€Œæ— éœ€ä¾èµ–äº‘æœåŠ¡ã€‚æ„å»ºä¸€ä¸ªå…¨æ ˆAIåº”ç”¨ï¼Œä¸ä»…èƒ½æ·±åŒ–å¯¹å‰åç«¯åˆ†ç¦»æ¶æ„çš„ç†è§£ï¼Œè¿˜èƒ½æ¢ç´¢AIé›†æˆçš„æœ€ä½³å®è·µã€‚æœ¬æ–‡å°†åŸºäºä¸€ä¸ªå®é™…é¡¹ç›®ï¼Œåˆ†äº«å¦‚ä½•ä½¿ç”¨<code>React</code>å‰ç«¯ã€Node.jsåç«¯ï¼Œå¹¶é€šè¿‡ <code>LangChain</code> åº“è°ƒç”¨ <code>Ollama</code> éƒ¨ç½²çš„ <strong>DeepSeek-R1:8b</strong> æ¨¡å‹ï¼Œå®ç°ä¸€ä¸ªç®€å•çš„èŠå¤©åŠŸèƒ½ã€‚è¿™ä¸ªé¡¹ç›®é€‚ç”¨äºåˆå­¦è€…ä¸Šæ‰‹å…¨æ ˆå¼€å‘ï¼Œæˆ–èµ„æ·±å¼€å‘è€…æ‰©å±•AIèƒ½åŠ›ã€‚</p>
<p>é¡¹ç›®éœ€æ±‚æºäºæ—¥å¸¸åœºæ™¯ï¼šå¼€å‘è€…å¸¸å¸¸éœ€è¦å¿«é€Ÿæµ‹è¯•AIå“åº”ï¼Œæˆ–æ„å»ºåŸå‹åº”ç”¨æ¥éªŒè¯æƒ³æ³•ã€‚ä¼ ç»Ÿæ–¹å¼å¯èƒ½æ¶‰åŠå¤æ‚APIè°ƒç”¨ï¼Œè€Œå¼€æºOllamaç®€åŒ–äº†æœ¬åœ°éƒ¨ç½²ã€‚æŠ€æœ¯æ ˆé€‰æ‹©ä¸Šï¼Œå‰ç«¯é‡‡ç”¨Reactç»“åˆTailwind CSSå’ŒAxiosï¼Œå®ç°å“åº”å¼UIå’Œç½‘ç»œäº¤äº’ï¼›åç«¯ä½¿ç”¨Expressæ¡†æ¶æä¾›APIæœåŠ¡ï¼›AIéƒ¨åˆ†åˆ™é›†æˆOllamaï¼Œç¡®ä¿æ¨¡å‹è¿è¡Œé«˜æ•ˆä¸”æœ¬åœ°åŒ–ã€‚è¿™ä¸ä»…ä»…æ˜¯ä»£ç å †ç Œï¼Œæ›´æ˜¯å…³äºæ¨¡å—åŒ–ã€å®¹é”™å’Œè·¨åŸŸå¤„ç†çš„ç»¼åˆå®è·µã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å‰–æé¡¹ç›®æ¶æ„ã€ä»£ç å®ç°å’Œå…³é”®çŸ¥è¯†ç‚¹ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰Hookã€APIç®¡ç†ã€æç¤ºå·¥ç¨‹ç­‰ã€‚é€šè¿‡æä¾›çš„ä»£ç ç¤ºä¾‹ï¼Œè¯»è€…å¯ä»¥è½»æ¾å¤ç°ï¼Œå¹¶æ ¹æ®éœ€è¦æ‰©å±•ä¸ºæ›´å¤æ‚çš„åº”ç”¨ï¼Œå¦‚ä»£ç å®¡æŸ¥æˆ–å†…å®¹ç”Ÿæˆå·¥å…·ã€‚</p>
<h2 data-id="heading-0">é¡¹ç›®æ¶æ„æ¦‚è¿°</h2>
<p>é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»è®¾è®¡ï¼Œç¡®ä¿å„éƒ¨åˆ†ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²ã€‚</p>
<ul>
<li><strong>å‰ç«¯</strong>ï¼šæµè§ˆå™¨ç«¯è¿è¡Œï¼ˆé»˜è®¤ç«¯å£5173ï¼‰ï¼Œå¤„ç†ç”¨æˆ·è¾“å…¥å’Œæ˜¾ç¤ºAIå“åº”ã€‚ä½¿ç”¨Reactæ„å»ºï¼Œå€ŸåŠ©è‡ªå®šä¹‰Hookå°è£…é€»è¾‘ï¼Œé¿å…ç»„ä»¶å¤æ‚åŒ–ã€‚Axiosç”¨äºå‘é€è¯·æ±‚åˆ°åç«¯ã€‚</li>
<li><strong>åç«¯</strong>ï¼šNode.jsä¸Expressæ¡†æ¶ï¼Œç›‘å¬3000ç«¯å£ï¼Œæä¾›RESTful APIã€‚æ ¸å¿ƒæ¥å£/chatæ¥æ”¶æ¶ˆæ¯ï¼Œè°ƒç”¨AIæ¨¡å‹åè¿”å›ç»“æœã€‚é›†æˆCORSä¸­é—´ä»¶æ”¯æŒè·¨åŸŸã€‚</li>
<li><strong>AIé›†æˆ</strong>ï¼šOllamaéƒ¨ç½²DeepSeek-R1:8bæ¨¡å‹ï¼ˆç«¯å£11434ï¼‰ï¼Œé€šè¿‡LangChainæ„å»ºæç¤ºé“¾ã€‚æ¨¡å‹æ¸©åº¦è®¾ä¸º0.1ï¼Œç¡®ä¿è¾“å‡ºç¨³å®šã€‚</li>
</ul>
<p>è¿™ç§æ¶æ„ä¼˜åŠ¿åœ¨äºå¯æ‰©å±•æ€§ï¼šå‰ç«¯ä¸“æ³¨äº¤äº’ï¼Œåç«¯ç®¡ç†ä¸šåŠ¡ï¼ŒAIä½œä¸ºæœåŠ¡å¯ç‹¬ç«‹ä¼˜åŒ–ã€‚å¯åŠ¨æ—¶ï¼Œå‰ç«¯ç”¨Viteå·¥å…·ï¼Œåç«¯Nodeè¿è¡Œï¼ŒOllamaåå°å¯åŠ¨æ¨¡å‹ã€‚</p>
<h2 data-id="heading-1">å‰ç«¯å®ç°è¯¦è§£</h2>
<p>å‰ç«¯æ ¸å¿ƒæ˜¯åˆ›å»ºä¸€ä¸ªç®€æ´ç•Œé¢ï¼Œå‘é€æ¶ˆæ¯å¹¶å±•ç¤ºAIå›å¤ã€‚å‡è®¾åˆå§‹æ¶ˆæ¯ä¸ºæ¨¡æ‹Ÿè¾“å…¥ï¼Œå®é™…å¯æ‰©å±•ä¸ºç”¨æˆ·è¡¨å•ã€‚</p>
<h3 data-id="heading-2">App.jsxï¼šä¸»ç»„ä»¶</h3>
<p>ä¸»ç»„ä»¶ä½¿ç”¨Hookè·å–æ•°æ®ï¼Œæ¸²æŸ“åŠ è½½çŠ¶æ€æˆ–å†…å®¹ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useGitDiff } <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks/useGitDiff.js'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { loading, content } = <span class="hljs-title function_">useGitDiff</span>(<span class="hljs-string">'hello'</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex"</span>&gt;</span>
      {loading ? 'loading...' : content}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿™é‡Œï¼ŒHookæ¥æ”¶å‚æ•°ï¼ˆæ¨¡æ‹Ÿæ¶ˆæ¯ï¼‰ï¼Œè¿”å›loadingå’Œcontentã€‚ç»„ä»¶é€»è¾‘ç®€å•ï¼šåŠ è½½ä¸­æ˜¾ç¤ºæç¤ºï¼Œå¦åˆ™æ¸²æŸ“å›å¤ã€‚ç»“åˆTailwind CSSçš„flexç±»ï¼Œå®ç°å“åº”å¼å¸ƒå±€ã€‚</p>
<h3 data-id="heading-3">useGitDiff.jsï¼šè‡ªå®šä¹‰Hook</h3>
<p>Hookå°è£…çŠ¶æ€å’Œå‰¯ä½œç”¨ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { chat } <span class="hljs-keyword">from</span> <span class="hljs-string">'../api/index.js'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGitDiff</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [content, setContent] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    (<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">chat</span>(<span class="hljs-string">'ä½ å¥½'</span>);
      <span class="hljs-title function_">setContent</span>(data.<span class="hljs-property">reply</span>);
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    })()
  }, [])
  <span class="hljs-keyword">return</span> {
    loading,
    content,
  }
}
</code></pre>
<p>ä½¿ç”¨useStateç®¡ç†çŠ¶æ€ï¼ŒuseEffectå¼‚æ­¥è°ƒç”¨APIã€‚æ¨¡æ‹Ÿæ¶ˆæ¯â€œä½ å¥½â€ï¼Œå®é™…å¯åŠ¨æ€ä¼ å…¥ã€‚è¿”å›å¯¹è±¡ä¾›ç»„ä»¶ä½¿ç”¨ï¼Œå®ç°æ•°æ®é©±åŠ¨æ¸²æŸ“ã€‚</p>
<h3 data-id="heading-4">api/index.jsï¼šAPIç®¡ç†</h3>
<p>ç»Ÿä¸€ç®¡ç†è¯·æ±‚ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-keyword">const</span> service = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:3000'</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
  },
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">120000</span>,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">chat</span> = (<span class="hljs-params">message</span>) =&gt; service.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/chat'</span>, {message})
</code></pre>
<p>Axioså®ä¾‹è®¾ç½®baseURLã€headerså’Œtimeoutã€‚chatå‡½æ•°å°è£…POSTè¯·æ±‚ï¼Œä¾¿äºå¤ç”¨ã€‚</p>
<p>å‰ç«¯è®¾è®¡å¼ºè°ƒç®€æ´ï¼Œæ˜“äºæ·»åŠ è¾“å…¥æ¡†æ‰©å±•ä¸ºå®Œæ•´èŠå¤©UIã€‚</p>
<h2 data-id="heading-5">åç«¯å®ç°è¯¦è§£</h2>
<p>åç«¯ä½¿ç”¨Expressæ­å»ºæœåŠ¡å™¨ï¼Œæ”¯æŒAIè°ƒç”¨ã€‚</p>
<h3 data-id="heading-6">index.jsï¼šæœåŠ¡å™¨æ–‡ä»¶</h3>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;
<span class="hljs-keyword">import</span> cors <span class="hljs-keyword">from</span> <span class="hljs-string">'cors'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOllama</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/ollama'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StringOutputParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/output_parsers'</span>

<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOllama</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">"http://localhost:11434"</span>,
  <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-r1:8b"</span>,
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.1</span>
})

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>());
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/hello'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'hello world'</span>);
})

app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/chat'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(req.<span class="hljs-property">body</span>, <span class="hljs-string">"//////"</span>);
  <span class="hljs-keyword">const</span> { message } = req.<span class="hljs-property">body</span>;
  <span class="hljs-keyword">if</span> (!message || <span class="hljs-keyword">typeof</span> message !== <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">error</span>: <span class="hljs-string">"message å¿…å¡«ï¼Œå¿…é¡»æ˜¯å­—ç¬¦ä¸²"</span>
    })
  }
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
      [<span class="hljs-string">"system"</span>, <span class="hljs-string">"You are a helpful assistent."</span>],
      [<span class="hljs-string">"human"</span>, <span class="hljs-string">'{input}'</span>]
    ])
    <span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(model).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ­£åœ¨è°ƒç”¨å¤§æ¨¡å‹"</span>);
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({
      <span class="hljs-attr">input</span>: message,
    })
    res.<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">reply</span>: result
    })
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err);
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">err</span>: <span class="hljs-string">"è°ƒç”¨å¤§æ¨¡å‹å¤±è´¥"</span>
    })
  }
})

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'server is running on port 3000'</span>);
})
</code></pre>
<p>åˆå§‹åŒ–Ollamaæ¨¡å‹ã€‚appå®ä¾‹ä½¿ç”¨CORSå’ŒJSONä¸­é—´ä»¶ã€‚GET /helloæµ‹è¯•è·¯ç”±ã€‚POST /chatæ ¡éªŒmessageï¼Œæ„å»ºæç¤ºé“¾è°ƒç”¨æ¨¡å‹ï¼Œè¿”å›replyã€‚å®¹é”™å¤„ç†ç¡®ä¿ç¨³å®šæ€§ã€‚</p>
<h2 data-id="heading-7">å…³é”®çŸ¥è¯†ç‚¹ï¼šè·¨åŸŸä¸ä¸­é—´ä»¶</h2>
<p>è·¨åŸŸé—®é¢˜æ˜¯å‰åç«¯åˆ†ç¦»çš„ç—›ç‚¹ã€‚æµè§ˆå™¨åŒæºç­–ç•¥é˜»å¡ä¸åŒç«¯å£è¯·æ±‚ã€‚ä½¿ç”¨corsä¸­é—´ä»¶è§£å†³ï¼Œåç«¯å…è®¸å‰ç«¯è®¿é—®ã€‚</p>
<p>ä¸­é—´ä»¶é“¾ï¼šè¯·æ±‚ç»CORSã€JSONè§£æååˆ°è¾¾è·¯ç”±ã€‚Expressçš„çµæ´»æ€§ä¾¿äºæ·»åŠ æ—¥å¿—æˆ–è®¤è¯ã€‚</p>
<h2 data-id="heading-8">å…³é”®çŸ¥è¯†ç‚¹ï¼šHTTPä¸è·¯ç”±</h2>
<p>HTTPåŸºäºè¯·æ±‚å“åº”ã€‚GETæ— bodyï¼ŒPOSTé€‚åˆä¼ è¾“æ¶ˆæ¯ã€‚å“åº”ç å¦‚400ã€500æŒ‡ç¤ºçŠ¶æ€ã€‚</p>
<p>è·¯ç”±å®šä¹‰èµ„æºè®¿é—®ï¼šapp.postå¤„ç†å¼‚æ­¥AIè°ƒç”¨ã€‚</p>
<h2 data-id="heading-9">AIé›†æˆè¯¦è§£</h2>
<p>Ollamaæä¾›æœ¬åœ°APIï¼ŒLangChainç®€åŒ–æç¤ºï¼šç³»ç»Ÿè§’è‰²å®šä¹‰ï¼Œç”¨æˆ·è¾“å…¥å ä½ã€‚é“¾å¼pipeç¡®ä¿è¾“å‡ºè§£æã€‚</p>
<p>æ¸©åº¦0.1å‡å°‘éšæœºæ€§ã€‚æ‰©å±•å¯è‡ªå®šä¹‰æç¤ºï¼Œå¦‚æ·»åŠ ä¸Šä¸‹æ–‡ã€‚</p>
<h2 data-id="heading-10">é¡¹ç›®ä¼˜åŒ–</h2>
<ul>
<li><strong>ç”¨æˆ·è¾“å…¥</strong>ï¼šå‰ç«¯æ·»åŠ è¡¨å•åŠ¨æ€æ¶ˆæ¯ã€‚</li>
<li><strong>å®‰å…¨</strong>ï¼šæ·»åŠ æ ¡éªŒæˆ–é™æµã€‚</li>
<li><strong>éƒ¨ç½²</strong>ï¼šå®¹å™¨åŒ–Ollamaï¼Œåç«¯äº‘æ‰˜ç®¡ã€‚</li>
<li><strong>æ‰©å±•</strong>ï¼šå¤šè½®å¯¹è¯æˆ–å·¥å…·è°ƒç”¨ã€‚</li>
</ul>
<h2 data-id="heading-11">ç»“è¯­</h2>
<p>é€šè¿‡é›†æˆ Ollama çš„å…¨æ ˆåº”ç”¨ï¼Œæˆ‘ä»¬çœ‹åˆ°AIå¦‚ä½•èµ‹èƒ½å¼€å‘ã€‚æ¬¢è¿è®¨è®ºä¼˜åŒ–æ€è·¯ï¼Œä¸€èµ·æ¨åŠ¨å¼€æºç”Ÿæ€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ ä»DOMæ“ä½œåˆ°Vue3ï¼šä¸€ä¸ªTodoåº”ç”¨çš„æ€ç»´é©å‘½]]></title>    <link>https://juejin.cn/post/7603994823326089226</link>    <guid>https://juejin.cn/post/7603994823326089226</guid>    <pubDate>2026-02-08T13:18:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603994823326089226" data-draft-id="7603994823326072842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ ä»DOMæ“ä½œåˆ°Vue3ï¼šä¸€ä¸ªTodoåº”ç”¨çš„æ€ç»´é©å‘½"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-02-08T13:18:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¼šæ•²ä»£ç 1"/> <meta itemprop="url" content="https://juejin.cn/user/1927884034804425"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ ä»DOMæ“ä½œåˆ°Vue3ï¼šä¸€ä¸ªTodoåº”ç”¨çš„æ€ç»´é©å‘½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927884034804425/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¼šæ•²ä»£ç 1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T13:18:49.000Z" title="Sun Feb 08 2026 13:18:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ ä»DOMæ“ä½œåˆ°Vue3ï¼šä¸€ä¸ªTodoåº”ç”¨çš„æ€ç»´é©å‘½</h2>
<blockquote>
<p><strong>å‰è¨€</strong>ï¼šå½“æˆ‘ç¬¬ä¸€æ¬¡å­¦ä¹ å‰ç«¯æ—¶ï¼Œå¯¼å¸ˆè®©æˆ‘å®ç°ä¸€ä¸ªTodoåº”ç”¨ã€‚æˆ‘èŠ±äº†2å°æ—¶å†™äº†50è¡Œä»£ç ï¼Œå¯¼å¸ˆçœ‹äº†ä¸€çœ¼è¯´ï¼šâ€œè¯•è¯•Vue3å§ã€‚â€ æˆ‘ç”¨30åˆ†é’Ÿé‡å†™äº†åŒæ ·çš„åŠŸèƒ½ï¼Œä»£ç å‡å°‘åˆ°20è¡Œã€‚é‚£ä¸€åˆ»ï¼Œæˆ‘æ˜ç™½äº†ä»€ä¹ˆæ˜¯çœŸæ­£çš„<strong>æ•°æ®é©±åŠ¨å¼€å‘</strong>ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³é€šè¿‡è¿™ä¸ªTodoåº”ç”¨ï¼Œå¸¦ä½ ä½“éªŒè¿™åœºæ€ç»´é©å‘½ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ç¬¬ä¸€ç« ï¼šä¼ ç»Ÿå¼€å‘æ–¹å¼çš„å›°å¢ƒ</h3>
<p>è®©æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ç”¨åŸç”ŸJavaScriptå®ç°çš„Todoåº”ç”¨ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- demo.html --&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ä¼ ç»ŸTodoåº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"todo-input"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// ä¼ ç»Ÿåšæ³•ï¼šå‘½ä»¤å¼ç¼–ç¨‹</span>
        <span class="hljs-keyword">const</span> app = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'app'</span>)
        <span class="hljs-keyword">const</span> todoInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'todo-input'</span>)
        
        <span class="hljs-comment">// æ‰‹åŠ¨ç›‘å¬äº‹ä»¶</span>
        todoInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>){
            <span class="hljs-keyword">const</span> todo = event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>()
            <span class="hljs-keyword">if</span>(!todo){
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·è¾“å…¥ä»»åŠ¡'</span>)
                <span class="hljs-keyword">return</span>
            }
            <span class="hljs-comment">// æ‰‹åŠ¨æ›´æ–°DOM</span>
            app.<span class="hljs-property">innerHTML</span> = todo
        })
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-2">ğŸ” ä¼ ç»Ÿæ–¹å¼çš„ä¸‰å¤§ç—›ç‚¹ï¼š</h4>
<ol>
<li><strong>å‘½ä»¤å¼ç¼–ç¨‹</strong>ï¼šä½ éœ€è¦åƒæŒ‡æŒ¥å®˜ä¸€æ ·å‘Šè¯‰æµè§ˆå™¨æ¯ä¸€æ­¥è¯¥åšä»€ä¹ˆ</li>
<li><strong>DOMæ“ä½œç¹ç</strong>ï¼šæ¯æ¬¡æ•°æ®å˜åŒ–éƒ½è¦æ‰‹åŠ¨æŸ¥æ‰¾å’Œæ›´æ–°DOM</li>
<li><strong>å…³æ³¨ç‚¹é”™ä½</strong>ï¼š80%çš„ä»£ç åœ¨å¤„ç†ç•Œé¢æ“ä½œï¼Œåªæœ‰20%åœ¨å¤„ç†ä¸šåŠ¡é€»è¾‘</li>
</ol>
<p>è¿™å°±åƒ<strong>æ¯æ¬¡æƒ³æ”¹å˜æˆ¿é—´å¸ƒå±€ï¼Œéƒ½è¦äº²è‡ªæ¬ç –ç Œå¢™</strong>ã€‚</p>
<h3 data-id="heading-3">ç¬¬äºŒç« ï¼šVue3çš„æ•°æ®é©±åŠ¨é©å‘½</h3>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ç”¨Vue3å®ç°çš„å®Œæ•´Todoåº”ç”¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- App.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;!-- 1. æ•°æ®ç»‘å®š --&gt;
    &lt;h2&gt;{{title}}&lt;/h2&gt;
    
    &lt;!-- 2. åŒå‘æ•°æ®ç»‘å®š --&gt;
    &lt;input 
      type="text" 
      v-model="title" 
      @keydown.enter="addTodo"
      placeholder="è¾“å…¥ä»»åŠ¡åæŒ‰å›è½¦"
    &gt;
    
    &lt;!-- 3. æ¡ä»¶æ¸²æŸ“ --&gt;
    &lt;ul v-if="todos.length"&gt;
      &lt;!-- 4. åˆ—è¡¨æ¸²æŸ“ --&gt;
      &lt;li v-for="todo in todos" :key="todo.id"&gt;
        &lt;!-- 5. åŒå‘ç»‘å®šåˆ°å¯¹è±¡å±æ€§ --&gt;
        &lt;input type="checkbox" v-model="todo.done"&gt;
        
        &lt;!-- 6. åŠ¨æ€classç»‘å®š --&gt;
        &lt;span :class="{done: todo.done}"&gt;{{todo.title}}&lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
    
    &lt;!-- 7. v-elseæŒ‡ä»¤ --&gt;
    &lt;div v-else&gt;
      æš‚æ— ä»»åŠ¡
    &lt;/div&gt;
    
    &lt;!-- 8. è®¡ç®—å±æ€§ä½¿ç”¨ --&gt;
    &lt;div&gt;
      è¿›åº¦ï¼š{{activeTodos}} / {{todos.length}}
    &lt;/div&gt;
    
    &lt;!-- 9. è®¡ç®—å±æ€§çš„getter/setter --&gt;
    å…¨é€‰&lt;input type="checkbox" v-model="allDone"&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
// 10. Composition APIå¯¼å…¥
import { ref, computed, watch } from 'vue'

// 11. å“åº”å¼æ•°æ®
const title = ref("Todosä»»åŠ¡æ¸…å•")
const todos = ref([
  {
    id: 1,
    title: 'å­¦ä¹ vue',
    done: false
  },
  {
    id: 2,
    title: 'æ‰“ç‹è€…',
    done: false
  },
    {
    id: 3,
    title: 'åƒé¥­',
    done: true
  }
])

// 12. è®¡ç®—å±æ€§
const activeTodos = computed(() =&gt; {
  return todos.value.filter(todo =&gt; !todo.done).length
})

// 13. æ–¹æ³•å®šä¹‰
const addTodo = () =&gt; {
  if(!title.value) return
  
  todos.value.push({
    id: Date.now(),  // æ›´å¥½çš„IDç”Ÿæˆæ–¹å¼
    title: title.value,
    done: false
  })
  
  title.value = ""
}

// 14. è®¡ç®—å±æ€§çš„getter/setter
const allDone = computed({
  get() {
    return todos.value.length &gt; 0 &amp;&amp; 
           todos.value.every(todo =&gt; todo.done)
  },
  set(val) {
    todos.value.forEach(todo =&gt; todo.done = val)
  }
})

// 15. ç›‘å¬å™¨ - è¡¥å……çŸ¥è¯†ç‚¹
watch(todos, (newTodos) =&gt; {
  console.log('ä»»åŠ¡åˆ—è¡¨å‘ç”Ÿå˜åŒ–:', newTodos)
  // å¯ä»¥åœ¨è¿™é‡Œå®ç°æœ¬åœ°å­˜å‚¨
}, { deep: true })

// 16. ç”Ÿå‘½å‘¨æœŸé’©å­ - è¡¥å……çŸ¥è¯†ç‚¹
import { onMounted } from 'vue'
onMounted(() =&gt; {
  console.log('ç»„ä»¶æŒ‚è½½å®Œæˆ')
  // å¯ä»¥åœ¨è¿™é‡Œä»æœ¬åœ°å­˜å‚¨è¯»å–æ•°æ®
})
&lt;/script&gt;

&lt;style&gt;
.done {
  color: gray;
  text-decoration: line-through;
}

/* 17. ç»„ä»¶æ ·å¼ä½œç”¨åŸŸ - è¡¥å……çŸ¥è¯†ç‚¹ */
/* è¿™é‡Œçš„æ ·å¼åªä½œç”¨äºå½“å‰ç»„ä»¶ */
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-4">ç¬¬ä¸‰ç« ï¼šVue3æ ¸å¿ƒAPIæ·±åº¦è§£æ</h3>
<h4 data-id="heading-5">ğŸ¯ 1. <code>ref</code> - å“åº”å¼æ•°æ®çš„åŸºçŸ³</h4>
<p><strong>ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-string">"Todosä»»åŠ¡æ¸…å•"</span>)
</code></pre>
<p><strong>è¡¥å……ï¼š</strong></p>
<ul>
<li><code>ref</code>ç”¨äºåˆ›å»º<strong>å“åº”å¼å¼•ç”¨</strong></li>
<li>è®¿é—®å€¼éœ€è¦ä½¿ç”¨<code>.value</code></li>
<li>ä¸ºä»€ä¹ˆéœ€è¦<code>.value</code>ï¼Ÿå› ä¸ºVueéœ€è¦çŸ¥é“å“ªäº›æ•°æ®éœ€è¦è¢«è¿½è¸ªå˜åŒ–</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// refçš„å†…éƒ¨åŸç†ç®€åŒ–ç‰ˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ref</span>(<span class="hljs-params">initialValue</span>) {
  <span class="hljs-keyword">let</span> value = initialValue
  <span class="hljs-keyword">return</span> {
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
      <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ”¶é›†ä¾èµ–</span>
      <span class="hljs-keyword">return</span> value
    },
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">value</span>(<span class="hljs-params">newValue</span>) {
      value = newValue
      <span class="hljs-comment">// è¿™é‡Œå¯ä»¥é€šçŸ¥æ›´æ–°</span>
    }
  }
}
</code></pre>
<h4 data-id="heading-6">ğŸ¯ 2. <code>v-model</code> - åŒå‘ç»‘å®šçš„é­”æ³•</h4>
<p><strong>ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"title"</span>&gt;</span>
</code></pre>
<p><strong>è¡¥å……ï¼š</strong>
<code>v-model</code>å®é™…ä¸Šæ˜¯è¯­æ³•ç³–ï¼Œå®ƒç­‰äºï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
  <span class="hljs-attr">:value</span>=<span class="hljs-string">"title"</span>
  @<span class="hljs-attr">input</span>=<span class="hljs-string">"title = $event.target.value"</span>
&gt;</span>
</code></pre>
<p>å¯¹äºå¤é€‰æ¡†ï¼Œ<code>v-model</code>çš„å¤„ç†æœ‰æ‰€ä¸åŒï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"todo.done"</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ç­‰ä»·äº --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
  <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> 
  <span class="hljs-attr">:checked</span>=<span class="hljs-string">"todo.done"</span>
  @<span class="hljs-attr">change</span>=<span class="hljs-string">"todo.done = $event.target.checked"</span>
&gt;</span>
</code></pre>
<h4 data-id="heading-7">ğŸ¯ 3. æŒ‡ä»¤ç³»ç»Ÿè¯¦è§£</h4>
<p><strong><code>v-show</code> vs <code>v-if</code></strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- v-ifæ˜¯çœŸæ­£çš„æ¡ä»¶æ¸²æŸ“ --&gt;
&lt;div v-if="show"&gt;æ¡ä»¶æ¸²æŸ“&lt;/div&gt; &lt;!-- ä¼šä»DOMä¸­ç§»é™¤/æ·»åŠ  --&gt;

&lt;!-- v-showåªæ˜¯æ§åˆ¶display --&gt;
&lt;div v-show="show"&gt;æ˜¾ç¤ºæ§åˆ¶&lt;/div&gt; &lt;!-- å§‹ç»ˆåœ¨DOMä¸­ï¼Œåªæ˜¯displayåˆ‡æ¢ --&gt;
</code></pre>
<p><strong>åŠ¨æ€å‚æ•°</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- åŠ¨æ€æŒ‡ä»¤å‚æ•° --&gt;
&lt;a :[attributeName]="url"&gt;é“¾æ¥&lt;/a&gt;
&lt;button @[eventName]="doSomething"&gt;æŒ‰é’®&lt;/button&gt;
</code></pre>
<h4 data-id="heading-8">ğŸ¯ 4. <code>computed</code> - æ™ºèƒ½è®¡ç®—å±æ€§</h4>
<p><strong>ç»†èŠ‚</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¡ç®—å±æ€§çš„ç¼“å­˜ç‰¹æ€§</span>
<span class="hljs-keyword">const</span> expensiveCalculation = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é‡æ–°è®¡ç®—'</span>) <span class="hljs-comment">// åªæœ‰ä¾èµ–å˜åŒ–æ—¶æ‰ä¼šæ‰§è¡Œ</span>
  <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.<span class="hljs-property">done</span>)
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">title</span>.<span class="hljs-title function_">toUpperCase</span>())
    .<span class="hljs-title function_">join</span>(<span class="hljs-string">', '</span>)
})

<span class="hljs-comment">// ä¾èµ–æ²¡æœ‰å˜åŒ–æ—¶ï¼Œç›´æ¥è¿”å›ç¼“å­˜å€¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(expensiveCalculation.<span class="hljs-property">value</span>) <span class="hljs-comment">// è¾“å‡ºå¹¶æ‰“å°"é‡æ–°è®¡ç®—"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(expensiveCalculation.<span class="hljs-property">value</span>) <span class="hljs-comment">// ç›´æ¥è¿”å›ç¼“å­˜å€¼ï¼Œä¸æ‰“å°</span>
</code></pre>
<h4 data-id="heading-9">ğŸ¯ 5. <code>watch</code> - æ•°æ®ç›‘å¬å™¨</h4>
<p><strong>é‡è¦çŸ¥è¯†ç‚¹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ç›‘å¬å•ä¸ªref</span>
<span class="hljs-title function_">watch</span>(title, <span class="hljs-function">(<span class="hljs-params">newTitle, oldTitle</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ ‡é¢˜ä»"<span class="hljs-subst">${oldTitle}</span>"å˜ä¸º"<span class="hljs-subst">${newTitle}</span>"`</span>)
})

<span class="hljs-comment">// 2. ç›‘å¬å¤šä¸ªæ•°æ®æº</span>
<span class="hljs-title function_">watch</span>([title, todos], <span class="hljs-function">(<span class="hljs-params">[newTitle, newTodos], [oldTitle, oldTodos]</span>) =&gt;</span> {
  <span class="hljs-comment">// å¤„ç†å˜åŒ–</span>
})

<span class="hljs-comment">// 3. ç«‹å³æ‰§è¡Œçš„watch</span>
<span class="hljs-title function_">watch</span>(todos, <span class="hljs-function">(<span class="hljs-params">newTodos</span>) =&gt;</span> {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(newTodos))
}, { <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> }) <span class="hljs-comment">// ç»„ä»¶åˆ›å»ºæ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡</span>

<span class="hljs-comment">// 4. æ·±åº¦ç›‘å¬</span>
<span class="hljs-title function_">watch</span>(todos, <span class="hljs-function">(<span class="hljs-params">newTodos</span>) =&gt;</span> {
  <span class="hljs-comment">// å¯ä»¥æ£€æµ‹åˆ°å¯¹è±¡å†…éƒ¨å±æ€§çš„å˜åŒ–</span>
}, { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> })
</code></pre>
<h4 data-id="heading-10">ğŸ¯ 6. ç”Ÿå‘½å‘¨æœŸé’©å­</h4>
<p><strong>å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { 
  onBeforeMount, 
  onMounted,
  onBeforeUpdate,
  onUpdated,
  onBeforeUnmount,
  onUnmounted,
  onErrorCaptured
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-title function_">onBeforeMount</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶æŒ‚è½½å‰'</span>)
})

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶å·²æŒ‚è½½ï¼Œå¯ä»¥è®¿é—®DOM'</span>)
})

<span class="hljs-title function_">onBeforeUpdate</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶æ›´æ–°å‰'</span>)
})

<span class="hljs-title function_">onUpdated</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶å·²æ›´æ–°'</span>)
})

<span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶å¸è½½å‰'</span>)
})

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶å·²å¸è½½'</span>)
})

<span class="hljs-title function_">onErrorCaptured</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ•è·åˆ°å­ç»„ä»¶é”™è¯¯:'</span>, error)
})
</code></pre>
<h3 data-id="heading-11">ç¬¬å››ç« ï¼šVue3å¼€å‘æ¨¡å¼çš„ä¼˜åŠ¿</h3>
<h4 data-id="heading-12">ğŸš€ 1. å¼€å‘æ•ˆç‡å¯¹æ¯”</h4>



































<table><thead><tr><th>åŠŸèƒ½</th><th>ä¼ ç»ŸJSä»£ç é‡</th><th>Vue3ä»£ç é‡</th><th>æ•ˆç‡æå‡</th></tr></thead><tbody><tr><td>æ•°æ®ç»‘å®š</td><td>10-15è¡Œ</td><td>1è¡Œ</td><td>90%</td></tr><tr><td>åˆ—è¡¨æ¸²æŸ“</td><td>15-20è¡Œ</td><td>3è¡Œ</td><td>85%</td></tr><tr><td>äº‹ä»¶å¤„ç†</td><td>5-10è¡Œ</td><td>1è¡Œ</td><td>80%</td></tr><tr><td>æ ·å¼ç»‘å®š</td><td>5-10è¡Œ</td><td>1è¡Œ</td><td>80%</td></tr></tbody></table>
<h4 data-id="heading-13">ğŸ¯ 2. æ€ç»´æ¨¡å¼è½¬å˜</h4>
<p><strong>ä¼ ç»Ÿå¼€å‘æ€ç»´</strong>ï¼ˆæ€ä¹ˆåšï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ‰¾åˆ°DOMå…ƒç´ 
<span class="hljs-bullet">2.</span> ç›‘å¬äº‹ä»¶
<span class="hljs-bullet">3.</span> è·å–æ•°æ®
<span class="hljs-bullet">4.</span> æ“ä½œDOMæ›´æ–°ç•Œé¢
</code></pre>
<p><strong>Vue3å¼€å‘æ€ç»´</strong>ï¼ˆè¦ä»€ä¹ˆï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> å®šä¹‰æ•°æ®çŠ¶æ€
<span class="hljs-bullet">2.</span> æè¿°UIä¸æ•°æ®çš„å…³ç³»
<span class="hljs-bullet">3.</span> ä¿®æ”¹æ•°æ®
<span class="hljs-bullet">4.</span> ç•Œé¢è‡ªåŠ¨æ›´æ–°
</code></pre>
<h4 data-id="heading-14">ğŸ’¡ 3. æ€§èƒ½ä¼˜åŒ–è‡ªåŠ¨åŒ–</h4>
<p>Vue3è‡ªåŠ¨ä¸ºä½ åšäº†è¿™äº›ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. è™šæ‹ŸDOMå‡å°‘çœŸå®DOMæ“ä½œ</span>
<span class="hljs-comment">// 2. Diffç®—æ³•æœ€å°åŒ–æ›´æ–°</span>
<span class="hljs-comment">// 3. å“åº”å¼ç³»ç»Ÿç²¾ç¡®è¿½è¸ªä¾èµ–</span>
<span class="hljs-comment">// 4. è®¡ç®—å±æ€§ç¼“å­˜é¿å…é‡å¤è®¡ç®—</span>
<span class="hljs-comment">// 5. ç»„ä»¶å¤ç”¨å‡å°‘æ¸²æŸ“å¼€é”€</span>
</code></pre>
<h3 data-id="heading-15">ç¬¬äº”ç« ï¼šå®æˆ˜æŠ€å·§ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-16">ğŸ“ 1. ä»£ç ç»„ç»‡å»ºè®®</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
// 1. å¯¼å…¥éƒ¨åˆ†
import { ref, computed, watch, onMounted } from 'vue'

// 2. å“åº”å¼æ•°æ®
const title = ref('')
const todos = ref([])

// 3. è®¡ç®—å±æ€§
const activeCount = computed(() =&gt; { /* ... */ })

// 4. æ–¹æ³•å®šä¹‰
const addTodo = () =&gt; { /* ... */ }

// 5. ç”Ÿå‘½å‘¨æœŸ
onMounted(() =&gt; { /* ... */ })

// 6. ç›‘å¬å™¨
watch(todos, () =&gt; { /* ... */ })
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-17">ğŸ¨ 2. æ ·å¼ç®¡ç†æŠ€å·§</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;style scoped&gt;
/* scopedå±æ€§è®©æ ·å¼åªä½œç”¨äºå½“å‰ç»„ä»¶ */
.todo-item {
  padding: 10px;
}

/* æ·±åº¦é€‰æ‹©å™¨ */
:deep(.child-component) {
  color: red;
}

/* å…¨å±€æ ·å¼ */
:global(.global-class) {
  font-size: 16px;
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-18">ğŸ”§ 3. è°ƒè¯•æŠ€å·§</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åœ¨æ¨¡æ¿ä¸­è°ƒè¯•</span>
&lt;div&gt;{{ debugInfo }}&lt;/div&gt;

<span class="hljs-comment">// 2. ä½¿ç”¨Vue Devtoolsæµè§ˆå™¨æ’ä»¶</span>
<span class="hljs-comment">// 3. ä½¿ç”¨console.logå¢å¼º</span>
<span class="hljs-title function_">watch</span>(todos, <span class="hljs-function">(<span class="hljs-params">newTodos</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'todoså˜åŒ–:'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(newTodos, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
}, { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> })
</code></pre>
<h3 data-id="heading-19">ç»“è¯­ï¼šä»å­¦ä¹ è€…åˆ°å®è·µè€…</h3>
<p>é€šè¿‡è¿™ä¸ªTodoåº”ç”¨ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†Vue3å¦‚ä½•å°†æˆ‘ä»¬ä»ç¹ççš„DOMæ“ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œè®©æˆ‘ä»¬èƒ½æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚è¿™ç§<strong>å£°æ˜å¼ç¼–ç¨‹</strong>çš„æ€ç»´æ–¹å¼ï¼Œä¸ä»…è®©ä»£ç æ›´ç®€æ´ï¼Œä¹Ÿè®©å¼€å‘æ›´é«˜æ•ˆã€‚</p>
<p><strong>è®°ä½</strong>ï¼š</p>
<ol>
<li>Vue3ä¸æ˜¯é­”æ³•ï¼Œä½†å®ƒè®©å¼€å‘å˜å¾—åƒé­”æ³•ä¸€æ ·ç®€å•</li>
<li>å­¦ä¹ Vue3ä¸ä»…æ˜¯å­¦ä¹ ä¸€ä¸ªæ¡†æ¶ï¼Œæ›´æ˜¯å­¦ä¹ ä¸€ç§æ›´å¥½çš„ç¼–ç¨‹æ€ç»´</li>
<li>ä»ä»Šå¤©å¼€å§‹ï¼Œå°è¯•ç”¨æ•°æ®é©±åŠ¨çš„æ–¹å¼æ€è€ƒé—®é¢˜</li>
</ol>
<p><strong>ä¸‹ä¸€æ­¥å»ºè®®</strong>ï¼š</p>
<ol>
<li>åœ¨Vue Playgroundä¸­å¤šç»ƒä¹ </li>
<li>é˜…è¯»Vue3å®˜æ–¹æ–‡æ¡£</li>
<li>å°è¯•å®ç°æ›´å¤æ‚çš„åŠŸèƒ½ï¼ˆè¿‡æ»¤ã€æœç´¢ã€æ’åºï¼‰</li>
<li>å­¦ä¹ Vue Routerå’ŒPinia</li>
</ol>
<hr/>
<p><strong>ğŸ“š èµ„æºæ¨è</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2F" target="_blank" title="https://vuejs.org/" ref="nofollow noopener noreferrer">Vue3å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.vuemastery.com%2Fcourses%2F" target="_blank" title="https://www.vuemastery.com/courses/" ref="nofollow noopener noreferrer">Vue Masteryå…è´¹è¯¾ç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.com.cn%2F" target="_blank" title="https://vuejs.com.cn/" ref="nofollow noopener noreferrer">Vue.jsä¸­æ–‡ç¤¾åŒº</a></li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£Vue3çš„å¼ºå¤§ä¹‹å¤„ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–æƒ³æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºäº¤æµã€‚ğŸŒŸ</p>
<p><strong>ä¸€èµ·è¿›æ­¥ï¼Œä»ä»Šå¤©å¼€å§‹ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[UniApp è·¯ç”±å¯¼èˆªå®ˆå«]]></title>    <link>https://juejin.cn/post/7604037348607492134</link>    <guid>https://juejin.cn/post/7604037348607492134</guid>    <pubDate>2026-02-08T14:09:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604037348607492134" data-draft-id="7603721514204233737" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" UniApp è·¯ç”±å¯¼èˆªå®ˆå«"/> <meta itemprop="keywords" content="å‰ç«¯,å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="datePublished" content="2026-02-08T14:09:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¦‚æœä½ å¥½"/> <meta itemprop="url" content="https://juejin.cn/user/2272012281328215"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             UniApp è·¯ç”±å¯¼èˆªå®ˆå«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2272012281328215/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¦‚æœä½ å¥½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-08T14:09:06.000Z" title="Sun Feb 08 2026 14:09:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">UniApp è·¯ç”±å¯¼èˆªå®ˆå«</h2>
<p>å¤§å®¶å¹³æ—¶åš Vue é¡¹ç›®ï¼Œè·¯ç”±å®ˆå«åŸºæœ¬éƒ½æ˜¯æ ‡é…ï¼šbeforeEach ä¸€å†™ï¼Œç™½åå•ã€token æ ¡éªŒã€è·³è½¬æ‹¦æˆªä¸€æ°”å‘µæˆã€‚</p>
<p>ä½†æ¢åˆ° UniApp å°±ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼š<strong>æ²¡æœ‰ Vue-Routerï¼Œä¹Ÿæ²¡æœ‰ beforeEach</strong>ã€‚</p>
<p>å¾ˆå¤šäººåˆšä¸Šæ‰‹éƒ½ä¼šæ‡µï¼šè·¯ç”±å®ˆå«åˆ°åº•æ€ä¹ˆå†™ï¼Ÿ</p>
<p>å…¶å® UniApp æœ‰è‡ªå·±çš„æ–¹æ¡ˆï¼Œå°±æ˜¯å®˜æ–¹æä¾›çš„ <strong>æ‹¦æˆªå™¨ï¼ˆinterceptorï¼‰</strong>ï¼Œä»Šå¤©å°±æŠŠå®Œæ•´å¯è½åœ°ã€ç›´æ¥å¤åˆ¶ç²˜è´´çš„è·¯ç”±å®ˆå«ç»™ä½ ä»¬ã€‚</p>
<hr/>
<h3 data-id="heading-1">Vue é‡Œæ˜¯è¿™æ ·å†™çš„</h3>
<pre><code class="hljs language-javascript" lang="javascript">router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-string">'/login'</span>) <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>()
  <span class="hljs-keyword">const</span> token = sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
  <span class="hljs-keyword">if</span> (!token) <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>(<span class="hljs-string">'/login'</span>)
  <span class="hljs-title function_">next</span>()
})
</code></pre>
<p>é€»è¾‘å¾ˆç®€å•ï¼š</p>
<ul>
<li>ç™½åå•ç›´æ¥è¿‡</li>
<li>æ²¡ token è·³ç™»å½•</li>
<li>æœ‰ token æ­£å¸¸è·³è½¬</li>
</ul>
<p>ä½† UniApp ä¸è¿™å¥—ï¼Œå®ƒçš„é¡µé¢è·³è½¬å…¨é ï¼š</p>
<ul>
<li>uni.navigateTo</li>
<li>uni.redirectTo</li>
<li>uni.reLaunch</li>
<li>uni.switchTab</li>
</ul>
<p>æ‰€ä»¥æ€è·¯ä¹Ÿå¾ˆç›´æ¥ï¼š<strong>æŠŠè¿™å‡ ä¸ª API å…¨éƒ¨æ‹¦æˆªï¼Œè‡ªå·±åšæ ¡éªŒ</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-2">UniApp è·¯ç”±å®ˆå«æ ¸å¿ƒï¼šæ‹¦æˆªå™¨</h3>
<p>å®˜æ–¹æ–‡æ¡£é‡Œå…¶å®å†™å¾—å¾ˆæ¸…æ¥šï¼š
<code>uni.addInterceptor</code> å¯ä»¥æ‹¦æˆªå‡ ä¹æ‰€æœ‰ uni å¼€å¤´çš„ APIï¼ŒåŒ…æ‹¬è·¯ç”±ã€è¯·æ±‚ã€æ‰«ç ã€æ”¯ä»˜ç­‰ç­‰ã€‚</p>
<p>è·¯ç”±å®ˆå«ï¼Œæœ¬è´¨å°±æ˜¯ï¼š
<strong>æ‹¦æˆªè·¯ç”±è·³è½¬ â†’ åˆ¤æ–­æƒé™ â†’ æ”¾è¡Œ / æ‹¦æˆªè·³ç™»å½•</strong></p>
<p>æ‹¦æˆªå™¨æœ€é‡è¦çš„å°±æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼š
<strong>invoke(args)</strong></p>
<ul>
<li>return true ï¼ æ”¾è¡Œ</li>
<li>return false ï¼ æ‹¦æˆªï¼Œä¸æ‰§è¡ŒåŸæ¥çš„è·³è½¬</li>
</ul>
<p>æ‡‚è¿™ä¸ªï¼Œæ•´ä¸ªè·¯ç”±å®ˆå«å°±é€šäº†ã€‚</p>
<hr/>
<h3 data-id="heading-3">ç›´æ¥ä¸Šä»£ç ï¼šutils/interceptor.js</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€è·¯ç”±æ‹¦æˆªå™¨ï¼ˆè·¯ç”±å®ˆå«ï¼‰</span>
<span class="hljs-comment">// åœ¨ App.vue onLaunch ä¸­è°ƒç”¨ä¸€æ¬¡å³å¯</span>

<span class="hljs-comment">// ç™½åå•ï¼šä¸éœ€è¦ç™»å½•å°±èƒ½è®¿é—®çš„é¡µé¢</span>
<span class="hljs-keyword">const</span> whiteList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([
  <span class="hljs-string">'/pages/login/login'</span>,
  <span class="hljs-comment">// '/pages/register/register', æƒ³åŠ å°±åŠ </span>
])

<span class="hljs-comment">// æ ¸å¿ƒæ ¡éªŒé€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkAuth</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-comment">// æˆªå–çº¯è·¯å¾„ï¼Œå¿½ç•¥ ? å‚æ•°</span>
  <span class="hljs-keyword">const</span> path = url.<span class="hljs-title function_">split</span>(<span class="hljs-string">'?'</span>)[<span class="hljs-number">0</span>]

  <span class="hljs-comment">// ç™½åå•ç›´æ¥æ”¾è¡Œ</span>
  <span class="hljs-keyword">if</span> (whiteList.<span class="hljs-title function_">has</span>(path)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }

  <span class="hljs-comment">// æ ¡éªŒ token</span>
  <span class="hljs-keyword">const</span> token = uni.<span class="hljs-title function_">getStorageSync</span>(<span class="hljs-string">'token'</span>)
  <span class="hljs-keyword">return</span> !!token
}

<span class="hljs-comment">// æ‹¦æˆªå™¨é…ç½®</span>
<span class="hljs-keyword">const</span> routeInterceptor = {
  <span class="hljs-title function_">invoke</span>(<span class="hljs-params">args</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å³å°†è·³è½¬ï¼š'</span>, args.<span class="hljs-property">url</span>)

    <span class="hljs-comment">// æ ¡éªŒé€šè¿‡ï¼Œæ­£å¸¸è·³è½¬</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">checkAuth</span>(args.<span class="hljs-property">url</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }

    <span class="hljs-comment">// æœªç™»å½• â†’ è·³ç™»å½•ï¼Œå¹¶æŠŠåŸæ¥è¦è·³çš„åœ°å€å¸¦ä¸Š</span>
    uni.<span class="hljs-title function_">redirectTo</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-string">`/pages/login/login?redirect=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(args.url)}</span>`</span>
    })

    <span class="hljs-comment">// æ‹¦æˆªæœ¬æ¬¡è·¯ç”±è·³è½¬</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
}

<span class="hljs-comment">// æ³¨å†Œæ‰€æœ‰è·¯ç”±æ‹¦æˆª</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initRouteGuard</span>(<span class="hljs-params"/>) {
  uni.<span class="hljs-title function_">addInterceptor</span>(<span class="hljs-string">'navigateTo'</span>, routeInterceptor)
  uni.<span class="hljs-title function_">addInterceptor</span>(<span class="hljs-string">'redirectTo'</span>, routeInterceptor)
  uni.<span class="hljs-title function_">addInterceptor</span>(<span class="hljs-string">'reLaunch'</span>, routeInterceptor)
  uni.<span class="hljs-title function_">addInterceptor</span>(<span class="hljs-string">'switchTab'</span>, routeInterceptor)

}
</code></pre>
<hr/>
<h3 data-id="heading-4">åœ¨ App.vue ä¸­å¯ç”¨ï¼ˆéå¸¸å…³é”®ï¼‰</h3>
<p>ä¸ºä»€ä¹ˆå¿…é¡»å†™åœ¨ <code>onLaunch</code>ï¼Ÿ</p>
<p>å› ä¸ºï¼š
<strong>æ‹¦æˆªå™¨å¿…é¡»åœ¨ä»»ä½•é¡µé¢è·³è½¬ä¹‹å‰å°±æ³¨å†Œå¥½</strong>
onLaunch æ˜¯åº”ç”¨å¯åŠ¨æœ€æ—©çš„ç”Ÿå‘½å‘¨æœŸï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼Œæœ€é€‚åˆå¹²è¿™äº‹ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script&gt;
import { initRouteGuard } from '@/utils/interceptor.js'

export default {
  onLaunch() {
    // å¯åŠ¨è·¯ç”±å®ˆå«
    initRouteGuard()
  },
  onShow() {},
  onHide() {}
}
&lt;/script&gt;
</code></pre>
<hr/>
<h3 data-id="heading-5">ç™»å½•æˆåŠŸåå¦‚ä½•â€œå›è·³åŸæ¥é¡µé¢â€</h3>
<p>æ‹¦æˆªæ—¶æˆ‘ä»¬æ‹¼äº†ä¸€ä¸ª <code>redirect</code> å‚æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">/login?<span class="hljs-attr">redirect</span>=xxx
</code></pre>
<p>ç™»å½•æˆåŠŸåè¿™æ ·è·³å›å»å°±è¡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">login</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç™»å½•è¯·æ±‚...</span>
  <span class="hljs-keyword">const</span> token = res.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>
  uni.<span class="hljs-title function_">setStorageSync</span>(<span class="hljs-string">'token'</span>, token)

  <span class="hljs-comment">// è·å–å½“å‰é¡µé¢å®ä¾‹</span>
  <span class="hljs-keyword">const</span> pages = <span class="hljs-title function_">getCurrentPages</span>()
  <span class="hljs-keyword">const</span> current = pages[pages.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]
  <span class="hljs-keyword">const</span> redirect = current.<span class="hljs-property">options</span>.<span class="hljs-property">redirect</span>

  <span class="hljs-keyword">if</span> (redirect) {
    <span class="hljs-comment">// è·³å›åŸæ¥æƒ³è®¿é—®çš„é¡µé¢</span>
    uni.<span class="hljs-title function_">redirectTo</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-built_in">decodeURIComponent</span>(redirect)
    })
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// é»˜è®¤è·³é¦–é¡µæˆ– tabBar</span>
    uni.<span class="hljs-title function_">switchTab</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/home/home'</span>
    })
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-6">ä¸€äº›å®ç”¨å°ç»†èŠ‚</h3>
<ol>
<li>
<p><strong>tabBar é¡µé¢ä¹Ÿèƒ½æ‹¦æˆª</strong>
switchTab å·²ç»åŒ…å«åœ¨æ‹¦æˆªé‡Œï¼Œæ²¡ token ç…§æ ·è·³ç™»å½•ã€‚</p>
</li>
<li>
<p><strong>è·¯å¾„ä¸€å®šè¦å†™å®Œæ•´</strong>
<code>/pages/login/login</code> åˆ«å†™é”™ï¼Œä¸ç„¶ç™½åå•ä¸ç”Ÿæ•ˆã€‚</p>
</li>
<li>
<p><strong>navigateBack ä¸€èˆ¬ä¸ç”¨æ‹¦æˆª</strong>
è¿”å›ä¸Šä¸€é¡µé€šå¸¸ä¸éœ€è¦æƒé™ï¼Œé™¤éä½ æœ‰ç‰¹æ®Šåœºæ™¯ã€‚</p>
</li>
<li>
<p><strong>å¯æ‰©å±•æƒé™æ§åˆ¶</strong>
æƒ³åŠ è§’è‰²ã€éªŒè¿‡æœŸã€éªŒçŠ¶æ€ï¼Œç›´æ¥åœ¨ <code>checkAuth</code> é‡ŒåŠ é€»è¾‘å°±è¡Œï¼Œéå¸¸çµæ´»ã€‚</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-7">æ€»ç»“</h3>
<ul>
<li>UniApp æ²¡æœ‰ beforeEachï¼Œä½†èƒ½ç”¨ <code>uni.addInterceptor</code> å®ç°ä¸€æ¨¡ä¸€æ ·çš„æ•ˆæœ</li>
<li>æ‹¦æˆª navigateTo / redirectTo / reLaunch / switchTab å››ä¸ª API å°±å¤Ÿè¦†ç›–æ‰€æœ‰è·¯ç”±</li>
<li>ç™½åå• + token æ ¡éªŒ = æœ€å¸¸ç”¨è·¯ç”±å®ˆå«</li>
<li>å¿…é¡»åœ¨ App.vue onLaunch é‡Œåˆå§‹åŒ–ï¼Œå¦åˆ™ä¸ç”Ÿæ•ˆ</li>
<li>ä»£ç ç›´æ¥å¤åˆ¶ï¼Œæ”¹æ”¹é¡µé¢è·¯å¾„å°±èƒ½ä¸Šçº¿</li>
</ul>
<p>è¿™å¥—å†™æ³•æˆ‘åœ¨å¥½å‡ ä¸ª UniApp é¡¹ç›®é‡Œéƒ½åœ¨ç”¨ï¼ŒH5ã€å°ç¨‹åºã€App å…¨ç«¯ç¨³å®šï¼Œæ²¡å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[ExposureèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7604084016509993001</link>    <guid>https://juejin.cn/post/7604084016509993001</guid>    <pubDate>2026-02-09T01:58:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7604084016509993001" data-draft-id="7604093823957958675" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[ExposureèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2026-02-09T01:58:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[ExposureèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-09T01:58:21.000Z" title="Mon Feb 09 2026 01:58:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>æ›å…‰èŠ‚ç‚¹æ˜¯Unity Shader Graphä¸­ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·èŠ‚ç‚¹ï¼Œä¸“é—¨ç”¨äºåœ¨ç€è‰²å™¨ä¸­è®¿é—®æ‘„åƒæœºçš„æ›å…‰ä¿¡æ¯ã€‚åœ¨åŸºäºç‰©ç†çš„æ¸²æŸ“ï¼ˆPBRï¼‰æµç¨‹ä¸­ï¼Œæ›å…‰æ§åˆ¶æ˜¯å®ç°é«˜åŠ¨æ€èŒƒå›´ï¼ˆHDRï¼‰æ¸²æŸ“çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼Œè€Œæ›å…‰èŠ‚ç‚¹åˆ™ä¸ºç€è‰²å™¨è‰ºæœ¯å®¶æä¾›äº†ç›´æ¥è®¿é—®è¿™äº›æ›å…‰å‚æ•°çš„é€”å¾„ã€‚</p>
<p>æ›å…‰èŠ‚ç‚¹çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ä»å½“å‰æ¸²æŸ“ç®¡çº¿ä¸­è·å–æ‘„åƒæœºçš„æ›å…‰å€¼ï¼Œä½¿ç€è‰²å™¨èƒ½å¤Ÿæ ¹æ®åœºæ™¯çš„æ›å…‰è®¾ç½®åšå‡ºç›¸åº”çš„ååº”ã€‚è¿™åœ¨åˆ›å»ºå¯¹å…‰ç…§æ¡ä»¶æ•æ„Ÿçš„ç€è‰²å™¨æ•ˆæœæ—¶å°¤ä¸ºé‡è¦ï¼Œæ¯”å¦‚è‡ªåŠ¨è°ƒæ•´æè´¨äº®åº¦ã€å®ç°æ›å…‰è‡ªé€‚åº”æ•ˆæœæˆ–è€…åˆ›å»ºä¸æ‘„åƒæœºæ›å…‰è®¾ç½®åŒæ­¥çš„åæœŸå¤„ç†æ•ˆæœã€‚</p>
<p>åœ¨ç°ä»£åŒ–çš„æ¸¸æˆå¼€å‘ä¸­ï¼ŒHDRæ¸²æŸ“å·²ç»æˆä¸ºæ ‡å‡†é…ç½®ï¼Œå®ƒå…è®¸åœºæ™¯ä¸­çš„äº®åº¦å€¼è¶…å‡ºä¼ ç»Ÿçš„0-1èŒƒå›´ï¼Œä»è€Œèƒ½å¤Ÿæ›´çœŸå®åœ°æ¨¡æ‹Ÿç°å®ä¸–ç•Œä¸­çš„å…‰ç…§æ¡ä»¶ã€‚æ›å…‰èŠ‚ç‚¹æ­£æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹å‘æŒ¥ç€é‡è¦ä½œç”¨ï¼Œå®ƒæ¶èµ·äº†ç€è‰²å™¨ä¸æ¸²æŸ“ç®¡çº¿æ›å…‰ç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢ã€‚</p>
<h2 data-id="heading-0">æ¸²æŸ“ç®¡çº¿å…¼å®¹æ€§</h2>
<p>æ›å…‰èŠ‚ç‚¹åœ¨ä¸åŒæ¸²æŸ“ç®¡çº¿ä¸­çš„æ”¯æŒæƒ…å†µæ˜¯å¼€å‘è€…éœ€è¦ç‰¹åˆ«æ³¨æ„çš„é‡è¦ä¿¡æ¯ã€‚äº†è§£èŠ‚ç‚¹çš„å…¼å®¹æ€§æœ‰åŠ©äºé¿å…åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°æ„å¤–çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>















<table><thead><tr><th><strong>èŠ‚ç‚¹</strong></th><th><strong>é€šç”¨æ¸²æŸ“ç®¡çº¿ (URP)</strong></th><th><strong>é«˜æ¸…æ¸²æŸ“ç®¡çº¿ (HDRP)</strong></th></tr></thead><tbody><tr><td>Exposure</td><td>å¦</td><td>æ˜¯</td></tr></tbody></table>
<p>ä»å…¼å®¹æ€§è¡¨æ ¼ä¸­å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œæ›å…‰èŠ‚ç‚¹ç›®å‰ä»…åœ¨é«˜æ¸…æ¸²æŸ“ç®¡çº¿ï¼ˆHDRPï¼‰ä¸­å¾—åˆ°æ”¯æŒï¼Œè€Œåœ¨é€šç”¨æ¸²æŸ“ç®¡çº¿ï¼ˆURPï¼‰ä¸­ä¸å¯ç”¨ã€‚è¿™ä¸€å·®å¼‚ä¸»è¦æºäºä¸¤ç§æ¸²æŸ“ç®¡çº¿åœ¨æ›å…‰å¤„ç†æœºåˆ¶ä¸Šçš„æ ¹æœ¬åŒºåˆ«ã€‚</p>
<p>HDRPä½œä¸ºUnityçš„é«˜ç«¯æ¸²æŸ“è§£å†³æ–¹æ¡ˆï¼Œå†…ç½®äº†å®Œæ•´çš„ç‰©ç†ç›¸æœºå’Œæ›å…‰ç³»ç»Ÿï¼Œæ”¯æŒè‡ªåŠ¨æ›å…‰ï¼ˆè‡ªåŠ¨æ›å…‰é€‚åº”ï¼‰å’Œæ‰‹åŠ¨æ›å…‰æ§åˆ¶ã€‚HDRPçš„æ›å…‰ç³»ç»ŸåŸºäºçœŸå®çš„ç‰©ç†ç›¸æœºå‚æ•°ï¼Œå¦‚å…‰åœˆã€å¿«é—¨é€Ÿåº¦å’ŒISOæ„Ÿå…‰åº¦ï¼Œè¿™ä½¿å¾—å®ƒèƒ½å¤Ÿæä¾›æ›´åŠ çœŸå®å’Œçµæ´»çš„æ›å…‰æ§åˆ¶ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒURPè™½ç„¶ä¹Ÿæ”¯æŒHDRæ¸²æŸ“ï¼Œä½†å…¶æ›å…‰ç³»ç»Ÿç›¸å¯¹ç®€åŒ–ï¼Œä¸»è¦æä¾›åŸºæœ¬çš„æ›å…‰è¡¥å¿åŠŸèƒ½ï¼Œè€Œæ²¡æœ‰HDRPé‚£æ ·å®Œæ•´çš„ç‰©ç†ç›¸æœºæ¨¡æ‹Ÿã€‚å› æ­¤ï¼ŒURPä¸­æ²¡æœ‰æä¾›ç›´æ¥è®¿é—®æ›å…‰å€¼çš„Shader GraphèŠ‚ç‚¹ã€‚</p>
<p>å¯¹äºURPç”¨æˆ·ï¼Œå¦‚æœéœ€è¦å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹æ›¿ä»£æ–¹æ¡ˆï¼š</p>
<ul>
<li>ä½¿ç”¨è‡ªå®šä¹‰æ¸²æŸ“å™¨ç‰¹æ€§ä¼ é€’æ›å…‰å‚æ•°</li>
<li>é€šè¿‡è„šæœ¬å°†æ›å…‰å€¼ä½œä¸ºç€è‰²å™¨å…¨å±€å±æ€§ä¼ é€’</li>
<li>ä½¿ç”¨URPæä¾›çš„å…¶ä»–å…‰ç…§ç›¸å…³èŠ‚ç‚¹é—´æ¥å®ç°ç±»ä¼¼æ•ˆæœ</li>
</ul>
<h2 data-id="heading-1">ç«¯å£è¯¦è§£</h2>
<p>æ›å…‰èŠ‚ç‚¹çš„ç«¯å£é…ç½®ç›¸å¯¹ç®€å•ï¼Œä½†ç†è§£æ¯ä¸ªç«¯å£çš„ç‰¹æ€§å’Œç”¨é€”å¯¹äºæ­£ç¡®ä½¿ç”¨è¯¥èŠ‚ç‚¹è‡³å…³é‡è¦ã€‚</p>

















<table><thead><tr><th>åç§°</th><th>æ–¹å‘</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>Output</strong></td><td>è¾“å‡º</td><td>Float</td><td>æ›å…‰å€¼ã€‚</td></tr></tbody></table>
<p>æ›å…‰èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªè¾“å‡ºç«¯å£ï¼Œè¿™æ„å‘³ç€å®ƒåªèƒ½ä½œä¸ºæ•°æ®æºåœ¨Shader Graphä¸­ä½¿ç”¨ï¼Œè€Œä¸èƒ½æ¥æ”¶å¤–éƒ¨è¾“å…¥ã€‚è¿™ç§è®¾è®¡åæ˜ äº†æ›å…‰å€¼çš„æœ¬è´¨â€”â€”å®ƒæ˜¯ä»æ¸²æŸ“ç®¡çº¿çš„ç›¸æœºç³»ç»Ÿè·å–çš„åªè¯»å‚æ•°ã€‚</p>
<p>è¾“å‡ºç«¯å£çš„Floatç±»å‹è¡¨æ˜æ›å…‰å€¼æ˜¯ä¸€ä¸ªæ ‡é‡æ•°å€¼ï¼Œè¿™ä¸ªæ•°å€¼ä»£è¡¨äº†å½“å‰å¸§æˆ–ä¸Šä¸€å¸§çš„æ›å…‰ä¹˜æ•°ã€‚åœ¨HDRPçš„æ›å…‰ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå€¼é€šå¸¸ç”¨äºå°†åœºæ™¯ä¸­çš„å…‰ç…§å€¼ä»HDRèŒƒå›´æ˜ å°„åˆ°æ˜¾ç¤ºè®¾å¤‡çš„LDRèŒƒå›´ã€‚</p>
<p>ç†è§£æ›å…‰å€¼çš„æ•°å€¼èŒƒå›´å¯¹äºæ­£ç¡®ä½¿ç”¨è¯¥èŠ‚ç‚¹éå¸¸é‡è¦ï¼š</p>
<ul>
<li>å½“æ›å…‰å€¼ä¸º1.0æ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰åº”ç”¨ä»»ä½•æ›å…‰è°ƒæ•´</li>
<li>æ›å…‰å€¼å¤§äº1.0è¡¨ç¤ºå¢åŠ æ›å…‰ï¼ˆä½¿å›¾åƒæ›´äº®ï¼‰</li>
<li>æ›å…‰å€¼å°äº1.0è¡¨ç¤ºå‡å°‘æ›å…‰ï¼ˆä½¿å›¾åƒæ›´æš—ï¼‰</li>
<li>åœ¨è‡ªåŠ¨æ›å…‰ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå€¼ä¼šæ ¹æ®åœºæ™¯äº®åº¦åŠ¨æ€å˜åŒ–</li>
</ul>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæ›å…‰èŠ‚ç‚¹çš„è¾“å‡ºå¯ä»¥ç›´æ¥ç”¨äºä¹˜æ³•è¿ç®—æ¥è°ƒæ•´æè´¨çš„äº®åº¦ï¼Œæˆ–è€…ç”¨äºæ›´å¤æ‚çš„æ›å…‰ç›¸å…³è®¡ç®—ã€‚ä¾‹å¦‚ï¼Œåœ¨åˆ›å»ºè‡ªå‘å…‰æè´¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ›å…‰å€¼æ¥ç¡®ä¿æè´¨åœ¨ä¸åŒæ›å…‰è®¾ç½®ä¸‹ä¿æŒè§†è§‰ä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-2">æ›å…‰ç±»å‹æ·±åº¦è§£æ</h2>
<p>æ›å…‰èŠ‚ç‚¹çš„æ ¸å¿ƒåŠŸèƒ½é€šè¿‡å…¶æ›å…‰ç±»å‹ï¼ˆExposure Typeï¼‰è®¾ç½®æ¥å®ç°ï¼Œè¿™ä¸ªè®¾ç½®å†³å®šäº†èŠ‚ç‚¹ä»æ¸²æŸ“ç®¡çº¿è·å–å“ªç§ç±»å‹çš„æ›å…‰å€¼ã€‚ç†è§£æ¯ç§æ›å…‰ç±»å‹çš„ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯æ˜¯æŒæ¡è¯¥èŠ‚ç‚¹çš„å…³é”®ã€‚</p>

























<table><thead><tr><th>åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>CurrentMultiplier</strong></td><td>ä»å½“å‰å¸§è·å–æ‘„åƒæœºçš„æ›å…‰å€¼ã€‚</td></tr><tr><td><strong>InverseCurrentMultiplier</strong></td><td>ä»å½“å‰å¸§è·å–æ‘„åƒæœºçš„æ›å…‰å€¼çš„å€’æ•°ã€‚</td></tr><tr><td><strong>PreviousMultiplier</strong></td><td>ä»ä¸Šä¸€å¸§è·å–æ‘„åƒæœºçš„æ›å…‰å€¼ã€‚</td></tr><tr><td><strong>InversePreviousMultiplier</strong></td><td>ä»ä¸Šä¸€å¸§è·å–æ‘„åƒæœºçš„æ›å…‰å€¼çš„å€’æ•°ã€‚</td></tr></tbody></table>
<h3 data-id="heading-3">CurrentMultiplierï¼ˆå½“å‰å¸§æ›å…‰ä¹˜æ•°ï¼‰</h3>
<p>CurrentMultiplieræ˜¯æœ€å¸¸ç”¨çš„æ›å…‰ç±»å‹ï¼Œå®ƒæä¾›å½“å‰å¸§ç›¸æœºçš„å®æ—¶æ›å…‰å€¼ã€‚è¿™ä¸ªå€¼åæ˜ äº†ç›¸æœºç³»ç»Ÿæ ¹æ®åœºæ™¯äº®åº¦å’Œæ›å…‰è®¾ç½®è®¡ç®—å‡ºçš„å½“å‰æ›å…‰ä¹˜æ•°ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</p>
<ul>
<li>å®æ—¶è°ƒæ•´æè´¨äº®åº¦ä»¥åŒ¹é…åœºæ™¯æ›å…‰</li>
<li>åˆ›å»ºå¯¹æ›å…‰æ•æ„Ÿçš„ç‰¹æ®Šæ•ˆæœ</li>
<li>ç¡®ä¿è‡ªå®šä¹‰ç€è‰²å™¨ä¸HDRPæ›å…‰ç³»ç»ŸåŒæ­¥</li>
</ul>
<p>æŠ€æœ¯ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å€¼éšæ¯å¸§æ›´æ–°ï¼Œå“åº”å®æ—¶å˜åŒ–</li>
<li>ç›´æ¥åæ˜ å½“å‰ç›¸æœºçš„æ›å…‰çŠ¶æ€</li>
<li>é€‚ç”¨äºå¤§å¤šæ•°éœ€è¦ä¸æ›å…‰åŒæ­¥çš„æ•ˆæœ</li>
</ul>
<h3 data-id="heading-4">InverseCurrentMultiplierï¼ˆå½“å‰å¸§æ›å…‰ä¹˜æ•°å€’æ•°ï¼‰</h3>
<p>InverseCurrentMultiplieræä¾›å½“å‰å¸§æ›å…‰å€¼çš„å€’æ•°ï¼Œå³1é™¤ä»¥æ›å…‰ä¹˜æ•°ã€‚è¿™ç§ç±»å‹çš„æ›å…‰å€¼åœ¨æŸäº›ç‰¹å®šè®¡ç®—ä¸­éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯å½“éœ€è¦æŠµæ¶ˆæ›å…‰å½±å“æ—¶ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</p>
<ul>
<li>åœ¨åæœŸå¤„ç†æ•ˆæœä¸­æŠµæ¶ˆæ›å…‰å½±å“</li>
<li>åˆ›å»ºåœ¨ä»»æ„æ›å…‰è®¾ç½®ä¸‹ä¿æŒæ’å®šäº®åº¦çš„å…ƒç´ </li>
<li>è¿›è¡Œæ›å…‰ç›¸å…³çš„é¢œè‰²æ ¡æ­£è®¡ç®—</li>
</ul>
<p>æŠ€æœ¯ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å€¼ä¸CurrentMultiplieräº’ä¸ºå€’æ•°</li>
<li>å¯ç”¨äº"åå‘"æ›å…‰è®¡ç®—</li>
<li>åœ¨éœ€è¦ä¿æŒæ’å®šè§†è§‰äº®åº¦çš„æ•ˆæœä¸­ç‰¹åˆ«æœ‰ç”¨</li>
</ul>
<h3 data-id="heading-5">PreviousMultiplierï¼ˆä¸Šä¸€å¸§æ›å…‰ä¹˜æ•°ï¼‰</h3>
<p>PreviousMultiplieræä¾›ä¸Šä¸€å¸§çš„æ›å…‰å€¼ï¼Œè¿™åœ¨æŸäº›éœ€è¦å¹³æ»‘è¿‡æ¸¡æˆ–é¿å…é—ªçƒçš„æ•ˆæœä¸­éå¸¸æœ‰ç”¨ã€‚ç”±äºè‡ªåŠ¨æ›å…‰ç³»ç»Ÿå¯èƒ½ä¼šå¯¼è‡´æ›å…‰å€¼åœ¨å¸§ä¹‹é—´å˜åŒ–ï¼Œä½¿ç”¨ä¸Šä¸€å¸§çš„å€¼å¯ä»¥æä¾›æ›´åŠ ç¨³å®šçš„å‚è€ƒã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</p>
<ul>
<li>å®ç°æ›å…‰å¹³æ»‘è¿‡æ¸¡æ•ˆæœ</li>
<li>é¿å…å› æ›å…‰çªå˜å¯¼è‡´çš„è§†è§‰é—ªçƒ</li>
<li>æ—¶é—´ç›¸å…³çš„æ›å…‰è®¡ç®—</li>
</ul>
<p>æŠ€æœ¯ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æä¾›å‰ä¸€å¸§çš„æ›å…‰çŠ¶æ€</li>
<li>æœ‰åŠ©äºå‡å°‘æ›å…‰çªå˜å¸¦æ¥çš„è§†è§‰é—®é¢˜</li>
<li>åœ¨æ—¶é—´æ€§æ•ˆæœä¸­æä¾›ä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-6">InversePreviousMultiplierï¼ˆä¸Šä¸€å¸§æ›å…‰ä¹˜æ•°å€’æ•°ï¼‰</h3>
<p>InversePreviousMultiplierç»“åˆäº†ä¸Šä¸€å¸§æ•°æ®å’Œå€’æ•°è®¡ç®—ï¼Œä¸ºç‰¹å®šçš„é«˜çº§åº”ç”¨åœºæ™¯æä¾›æ”¯æŒã€‚è¿™ç§æ›å…‰ç±»å‹åœ¨éœ€è¦åŸºäºå†å²æ›å…‰æ•°æ®è¿›è¡Œå¤æ‚è®¡ç®—çš„æ•ˆæœä¸­å‘æŒ¥ä½œç”¨ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</p>
<ul>
<li>åŸºäºå†å²æ›å…‰çš„æ•°æ®åˆ†æ</li>
<li>å¤æ‚çš„æ—¶åºæ›å…‰æ•ˆæœ</li>
<li>é«˜çº§æ›å…‰è¡¥å¿ç®—æ³•</li>
</ul>
<p>æŠ€æœ¯ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç»“åˆäº†æ—¶é—´å»¶è¿Ÿå’Œå€’æ•°è®¡ç®—</li>
<li>é€‚ç”¨äºä¸“ä¸šçš„æ›å…‰å¤„ç†éœ€æ±‚</li>
<li>åœ¨é«˜çº§æ¸²æŸ“æŠ€æœ¯ä¸­ä½¿ç”¨</li>
</ul>
<h2 data-id="heading-7">å®é™…åº”ç”¨æ¡ˆä¾‹</h2>
<h3 data-id="heading-8">HDRè‡ªå‘å…‰æè´¨</h3>
<p>åœ¨HDRPä¸­åˆ›å»ºè‡ªå‘å…‰æè´¨æ—¶ï¼Œä½¿ç”¨æ›å…‰èŠ‚ç‚¹å¯ä»¥ç¡®ä¿æè´¨åœ¨ä¸åŒæ›å…‰è®¾ç½®ä¸‹ä¿æŒæ­£ç¡®çš„è§†è§‰è¡¨ç°ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„å®ç°ç¤ºä¾‹ï¼š</p>
<ol>
<li>åˆ›å»ºShader Graphå¹¶æ·»åŠ ExposureèŠ‚ç‚¹</li>
<li>è®¾ç½®æ›å…‰ç±»å‹ä¸ºCurrentMultiplier</li>
<li>å°†è‡ªå‘å…‰é¢œè‰²ä¸æ›å…‰èŠ‚ç‚¹è¾“å‡ºç›¸ä¹˜</li>
<li>è¿æ¥åˆ°ä¸»èŠ‚ç‚¹çš„Emissionè¾“å…¥</li>
</ol>
<p>è¿™ç§æ–¹æ³•ç¡®ä¿äº†è‡ªå‘å…‰æè´¨çš„äº®åº¦ä¼šéšç€ç›¸æœºæ›å…‰è®¾ç½®è‡ªåŠ¨è°ƒæ•´ï¼Œåœ¨ä½æ›å…‰æƒ…å†µä¸‹ä¸ä¼šè¿‡äº®ï¼Œåœ¨é«˜æ›å…‰æƒ…å†µä¸‹ä¸ä¼šè¿‡æš—ã€‚</p>
<h3 data-id="heading-9">æ›å…‰è‡ªé€‚åº”æ•ˆæœ</h3>
<p>åˆ©ç”¨PreviousMultiplierå’ŒCurrentMultiplierå¯ä»¥åˆ›å»ºå¹³æ»‘çš„æ›å…‰è¿‡æ¸¡æ•ˆæœï¼Œé¿å…è‡ªåŠ¨æ›å…‰è°ƒæ•´æ—¶çš„çªå…€å˜åŒ–ï¼š</p>
<ol>
<li>æ·»åŠ ä¸¤ä¸ªExposureèŠ‚ç‚¹ï¼Œåˆ†åˆ«è®¾ç½®ä¸ºPreviousMultiplierå’ŒCurrentMultiplier</li>
<li>ä½¿ç”¨LerpèŠ‚ç‚¹åœ¨ä¸¤è€…ä¹‹é—´è¿›è¡Œæ’å€¼</li>
<li>é€šè¿‡TimeèŠ‚ç‚¹æ§åˆ¶æ’å€¼é€Ÿåº¦</li>
<li>å°†ç»“æœç”¨äºéœ€è¦å¹³æ»‘è¿‡æ¸¡çš„æ•ˆæœ</li>
</ol>
<p>è¿™ç§æŠ€æœ¯ç‰¹åˆ«é€‚ç”¨äºå…¨å±æ•ˆæœæˆ–UIå…ƒç´ ï¼Œå¯ä»¥ç¡®ä¿è§†è§‰å…ƒç´ åœ¨æ›å…‰å˜åŒ–æ—¶å¹³ç¨³è¿‡æ¸¡ã€‚</p>
<h3 data-id="heading-10">æ›å…‰ä¸å˜å…ƒç´ </h3>
<p>æŸäº›åœºæ™¯å…ƒç´ å¯èƒ½éœ€è¦åœ¨ä¸åŒæ›å…‰è®¾ç½®ä¸‹ä¿æŒæ’å®šçš„è§†è§‰äº®åº¦ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨InverseCurrentMultiplierï¼š</p>
<ol>
<li>ä½¿ç”¨ExposureèŠ‚ç‚¹è®¾ç½®ä¸ºInverseCurrentMultiplier</li>
<li>å°†éœ€è¦ä¿æŒæ’å®šäº®åº¦çš„é¢œè‰²å€¼ä¸æ›å…‰å€’æ•°ç›¸ä¹˜</li>
<li>è¿™æ ·å¯ä»¥æŠµæ¶ˆç›¸æœºæ›å…‰å¯¹ç‰¹å®šå…ƒç´ çš„å½±å“</li>
</ol>
<p>è¿™ç§æ–¹æ³•å¸¸ç”¨äºUIæ¸²æŸ“ã€è°ƒè¯•ä¿¡æ¯æ˜¾ç¤ºæˆ–å…¶ä»–éœ€è¦ç‹¬ç«‹äºåœºæ™¯æ›å…‰çš„è§†è§‰å…ƒç´ ã€‚</p>
<h2 data-id="heading-11">æ€§èƒ½è€ƒè™‘ä¸æœ€ä½³å®è·µ</h2>
<p>è™½ç„¶æ›å…‰èŠ‚ç‚¹æœ¬èº«æ€§èƒ½å¼€é”€å¾ˆå°ï¼Œä½†åœ¨å®é™…ä½¿ç”¨ä¸­ä»éœ€æ³¨æ„ä¸€äº›æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ul>
<li>é¿å…åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­è¿‡åº¦å¤æ‚çš„æ›å…‰è®¡ç®—</li>
<li>è€ƒè™‘ä½¿ç”¨é¡¶ç‚¹ç€è‰²å™¨è¿›è¡Œæ›å…‰ç›¸å…³è®¡ç®—ï¼ˆå¦‚æœé€‚ç”¨ï¼‰</li>
<li>å¯¹äºé™æ€ç‰©ä½“ï¼Œå¯ä»¥è¯„ä¼°æ˜¯å¦çœŸçš„éœ€è¦æ¯å¸§æ›´æ–°æ›å…‰å€¼</li>
<li>åœ¨ç§»åŠ¨å¹³å°ä½¿ç”¨æ—¶æ³¨æ„æµ‹è¯•æ€§èƒ½å½±å“</li>
</ul>
<p>æœ€ä½³å®è·µå»ºè®®ï¼š</p>
<ul>
<li>åœ¨HDRPé¡¹ç›®ä¸­å……åˆ†åˆ©ç”¨æ›å…‰èŠ‚ç‚¹ç¡®ä¿è§†è§‰ä¸€è‡´æ€§</li>
<li>ç†è§£ä¸åŒæ›å…‰ç±»å‹çš„é€‚ç”¨åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„ç±»å‹</li>
<li>ç»“åˆHDRPçš„Volumeç³»ç»Ÿæµ‹è¯•ç€è‰²å™¨åœ¨ä¸åŒæ›å…‰è®¾ç½®ä¸‹çš„è¡¨ç°</li>
<li>åœ¨è‡ªåŠ¨æ›å…‰å’Œæ‰‹åŠ¨æ›å…‰æ¨¡å¼ä¸‹éƒ½è¿›è¡Œæµ‹è¯•</li>
</ul>
<h2 data-id="heading-12">æ•…éšœæ’é™¤ä¸å¸¸è§é—®é¢˜</h2>
<p>åœ¨ä½¿ç”¨æ›å…‰èŠ‚ç‚¹æ—¶å¯èƒ½ä¼šé‡åˆ°ä¸€äº›å¸¸è§é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯ç›¸åº”çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>èŠ‚ç‚¹åœ¨URPä¸­ä¸å¯ç”¨</strong>ï¼šè¿™æ˜¯é¢„æœŸè¡Œä¸ºï¼Œæ›å…‰èŠ‚ç‚¹ä»…æ”¯æŒHDRP</li>
<li><strong>æ›å…‰å€¼ä¸æ›´æ–°</strong>ï¼šæ£€æŸ¥ç›¸æœºæ˜¯å¦å¯ç”¨äº†è‡ªåŠ¨æ›å…‰ï¼Œåœ¨æ‰‹åŠ¨æ›å…‰æ¨¡å¼ä¸‹å€¼å¯èƒ½ä¸å˜</li>
<li><strong>æ•ˆæœä¸ç¬¦åˆé¢„æœŸ</strong>ï¼šç¡®è®¤ä½¿ç”¨äº†æ­£ç¡®çš„æ›å…‰ç±»å‹ï¼Œä¸åŒåœºæ™¯éœ€è¦ä¸åŒçš„ç±»å‹</li>
<li><strong>ç§»åŠ¨ç«¯è¡¨ç°å¼‚å¸¸</strong>ï¼šæŸäº›ç§»åŠ¨è®¾å¤‡å¯èƒ½å¯¹HDRæ”¯æŒæœ‰é™ï¼Œéœ€è¿›è¡Œé’ˆå¯¹æ€§æµ‹è¯•</li>
</ul>
<p>è°ƒè¯•æŠ€å·§ï¼š</p>
<ul>
<li>ä½¿ç”¨DebugèŠ‚ç‚¹è¾“å‡ºæ›å…‰å€¼æ£€æŸ¥å®é™…æ•°å€¼</li>
<li>åœ¨ä¸åŒå…‰ç…§ç¯å¢ƒä¸‹æµ‹è¯•ç€è‰²å™¨è¡¨ç°</li>
<li>å¯¹æ¯”æ‰‹åŠ¨æ›å…‰å’Œè‡ªåŠ¨æ›å…‰æ¨¡å¼ä¸‹çš„æ•ˆæœå·®å¼‚</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>